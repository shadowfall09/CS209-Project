{"items":[{"tags":["java","android","kotlin","firebase-realtime-database"],"comments":[{"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":1,"creation_date":1638903925,"post_id":70263382,"comment_id":124210267,"body_markdown":"Just as on [your previous question](https://stackoverflow.com/questions/70236152/display-all-registered-users-posts-and-following) you will need to read data from higher up in the database, and then perform nested loops over that data.","body":"Just as on <a href=\"https://stackoverflow.com/questions/70236152/display-all-registered-users-posts-and-following\">your previous question</a> you will need to read data from higher up in the database, and then perform nested loops over that data."},{"owner":{"account_id":23553599,"reputation":13,"user_id":17595939,"display_name":"Apple Juice"},"score":0,"creation_date":1638980278,"post_id":70263382,"comment_id":124232707,"body_markdown":"Thanks again, it works fine.  However, I&#39;m still in a fix somewhere else, it&#39;s nested to this question too. Can I ask here too please?","body":"Thanks again, it works fine.  However, I&#39;m still in a fix somewhere else, it&#39;s nested to this question too. Can I ask here too please?"}],"owner":{"account_id":23553599,"reputation":13,"user_id":17595939,"display_name":"Apple Juice"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1638903720,"creation_date":1638893254,"question_id":70263382,"body_markdown":"I like to make the posts of a user A followed by user B appear on user B&#39;s page.\r\n\r\nHere is the code I have tried which is not working as intended. I can only get the post of a specific user.\r\n\r\nIf possible please, write code in Java language. \r\n\r\n\r\n\r\n\r\n    private fun checkFollowings() {\r\n        followingList = ArrayList()\r\n\r\n        val followingRef = FirebaseDatabase.getInstance().reference\r\n                .child(&quot;Follow&quot;).child(FirebaseAuth.getInstance().currentUser!!.uid)\r\n                .child(&quot;Following&quot;)\r\n\r\n        followingRef.addValueEventListener(object : ValueEventListener {\r\n            override fun onDataChange(p0: DataSnapshot) {\r\n                if (p0.exists()) {\r\n                    (followingList as ArrayList&lt;String&gt;).clear()\r\n\r\n                    for (snapshot in p0.children) {\r\n                        snapshot.key?.let { (followingList as ArrayList&lt;String&gt;).add(it) }\r\n                    }\r\n\r\n                    retrievePosts()\r\n                }\r\n            }\r\n\r\n            override fun onCancelled(p0: DatabaseError) {\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    private fun retrievePosts() {\r\n\r\n        val postsRef = FirebaseDatabase.getInstance().reference.child(&quot;Posts&quot;).child(uid!!)\r\n\r\n        postsRef.addValueEventListener(object : ValueEventListener {\r\n            override fun onDataChange(p0: DataSnapshot) {\r\n                (postList as ArrayList&lt;ModelPost&gt;).clear()\r\n\r\n                for (snapshot in p0.children) {\r\n                    val post = snapshot.getValue(ModelPost::class.java)\r\n\r\n                    for (id in (followingList as ArrayList&lt;String&gt;)) {\r\n                        if (post!!.getUid() == id) {\r\n                            (postList as ArrayList&lt;ModelPost&gt;).add(post!!)\r\n\r\n                        }\r\n\r\n                        adapterPost!!.notifyDataSetChanged()\r\n                    }\r\n                }\r\n            }\r\n\r\n            override fun onCancelled(p0: DatabaseError) {\r\n            }\r\n        })\r\n    }\r\n\r\n\r\nFollowing Node:\r\n\r\n![Following Node][1]\r\n\r\n\r\nPosts Node:\r\n\r\n![Posts Node][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3rq3I.jpg\r\n  [2]: https://i.stack.imgur.com/UJOt8.jpg","title":"Make posts of user A followed by user B appear on user B page","body":"<p>I like to make the posts of a user A followed by user B appear on user B's page.</p>\n<p>Here is the code I have tried which is not working as intended. I can only get the post of a specific user.</p>\n<p>If possible please, write code in Java language.</p>\n<pre><code>private fun checkFollowings() {\n    followingList = ArrayList()\n\n    val followingRef = FirebaseDatabase.getInstance().reference\n            .child(&quot;Follow&quot;).child(FirebaseAuth.getInstance().currentUser!!.uid)\n            .child(&quot;Following&quot;)\n\n    followingRef.addValueEventListener(object : ValueEventListener {\n        override fun onDataChange(p0: DataSnapshot) {\n            if (p0.exists()) {\n                (followingList as ArrayList&lt;String&gt;).clear()\n\n                for (snapshot in p0.children) {\n                    snapshot.key?.let { (followingList as ArrayList&lt;String&gt;).add(it) }\n                }\n\n                retrievePosts()\n            }\n        }\n\n        override fun onCancelled(p0: DatabaseError) {\n        }\n    })\n}\n\n\nprivate fun retrievePosts() {\n\n    val postsRef = FirebaseDatabase.getInstance().reference.child(&quot;Posts&quot;).child(uid!!)\n\n    postsRef.addValueEventListener(object : ValueEventListener {\n        override fun onDataChange(p0: DataSnapshot) {\n            (postList as ArrayList&lt;ModelPost&gt;).clear()\n\n            for (snapshot in p0.children) {\n                val post = snapshot.getValue(ModelPost::class.java)\n\n                for (id in (followingList as ArrayList&lt;String&gt;)) {\n                    if (post!!.getUid() == id) {\n                        (postList as ArrayList&lt;ModelPost&gt;).add(post!!)\n\n                    }\n\n                    adapterPost!!.notifyDataSetChanged()\n                }\n            }\n        }\n\n        override fun onCancelled(p0: DatabaseError) {\n        }\n    })\n}\n</code></pre>\n<p>Following Node:</p>\n<p><img src=\"https://i.stack.imgur.com/3rq3I.jpg\" alt=\"Following Node\" /></p>\n<p>Posts Node:</p>\n<p><img src=\"https://i.stack.imgur.com/UJOt8.jpg\" alt=\"Posts Node\" /></p>\n"},{"tags":["java","jax-rs","rest-assured"],"comments":[{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1638906293,"post_id":70265611,"comment_id":124211096,"body_markdown":"`Connection refused` means exactly what it says. Your code attempted to open a connection to a remote host/port, and that host actively rejected the connection.  That means there&#39;s no process at the remote listening on the port your code specified.  Before you can debug this you&#39;ll need to verify that there&#39;s a process listening at the remote host/port, which is something we cannot help with.  Check to make sure your configuration and specification of the remote server is correct, and that the required process(es) is/are running on the remote.","body":"<code>Connection refused</code> means exactly what it says. Your code attempted to open a connection to a remote host/port, and that host actively rejected the connection.  That means there&#39;s no process at the remote listening on the port your code specified.  Before you can debug this you&#39;ll need to verify that there&#39;s a process listening at the remote host/port, which is something we cannot help with.  Check to make sure your configuration and specification of the remote server is correct, and that the required process(es) is/are running on the remote."},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":1,"creation_date":1638906387,"post_id":70265611,"comment_id":124211123,"body_markdown":"I’m voting to close this question because it&#39;s a network configuration issue.","body":"I’m voting to close this question because it&#39;s a network configuration issue."}],"owner":{"account_id":10273984,"reputation":47,"user_id":7581531,"display_name":"Sia"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1052,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1638903516,"creation_date":1638903516,"question_id":70265611,"body_markdown":"The project does not use Spring framework. Only using Rest Assured library to test JAX-RS api but getting below error when a particular endpoint is tested in the test method:\r\n\r\n     java.net.ConnectException: Connection refused (Connection refused)\r\n        at java.net.PlainSocketImpl.socketConnect(Native Method)\r\n        at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)\r\n        at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)\r\n        at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)\r\n        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\r\n        at java.net.Socket.connect(Socket.java:606)\r\n        at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121)\r\n        at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180)\r\n        at org.apache.http.impl.conn.ManagedClientConnectionImpl.open(ManagedClientConnectionImpl.java:326)\r\n        at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:605)\r\n        at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:440)\r\n        at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835)\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\r\n        at org.apache.http.client.HttpClient$execute$0.call(Unknown Source)\r\n        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:148)\r\n        at io.restassured.internal.RequestSpecificationImpl$RestAssuredHttpBuilder.doRequest(RequestSpecificationImpl.groovy:2055)\r\n        at io.restassured.internal.http.HTTPBuilder.doRequest(HTTPBuilder.java:495)\r\n        at io.restassured.internal.http.HTTPBuilder.request(HTTPBuilder.java:452)\r\n        at io.restassured.internal.http.HTTPBuilder$request$2.call(Unknown Source)\r\n        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:166)\r\n        at io.restassured.internal.RequestSpecificationImpl.sendHttpRequest(RequestSpecificationImpl.groovy:1451)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)\r\n        at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\r\n        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1262)\r\n        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1029)\r\n        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:816)\r\n        at groovy.lang.GroovyObject.invokeMethod(GroovyObject.java:39)\r\n        at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.call(PogoInterceptableSite.java:45)\r\n        at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.callCurrent(PogoInterceptableSite.java:55)\r\n        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)\r\n        at io.restassured.internal.RequestSpecificationImpl.sendRequest(RequestSpecificationImpl.groovy:1200)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)\r\n        at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\r\n        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1262)\r\n        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1029)\r\n        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:816)\r\n        at groovy.lang.GroovyObject.invokeMethod(GroovyObject.java:39)\r\n        at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.call(PogoInterceptableSite.java:45)\r\n        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:166)\r\n        at io.restassured.internal.filter.SendRequestFilter.filter(SendRequestFilter.groovy:30)\r\n        at io.restassured.filter.Filter$filter$0.call(Unknown Source)\r\n        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\r\n        at io.restassured.filter.Filter$filter.call(Unknown Source)\r\n        at io.restassured.internal.filter.FilterContextImpl.next(FilterContextImpl.groovy:72)\r\n        at io.restassured.filter.time.TimingFilter.filter(TimingFilter.java:56)\r\n        at io.restassured.filter.Filter$filter.call(Unknown Source)\r\n        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:157)\r\n        at io.restassured.internal.filter.FilterContextImpl.next(FilterContextImpl.groovy:72)\r\n        at io.restassured.filter.FilterContext$next.call(Unknown Source)\r\n        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:148)\r\n        at io.restassured.internal.RequestSpecificationImpl.applyPathParamsAndSendRequest(RequestSpecificationImpl.groovy:1655)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)\r\n        at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\r\n        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1262)\r\n        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1029)\r\n        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:816)\r\n        at groovy.lang.GroovyObject.invokeMethod(GroovyObject.java:39)\r\n        at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.call(PogoInterceptableSite.java:45)\r\n        at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.callCurrent(PogoInterceptableSite.java:55)\r\n        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:203)\r\n        at io.restassured.internal.RequestSpecificationImpl.applyPathParamsAndSendRequest(RequestSpecificationImpl.groovy:1661)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)\r\n        at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\r\n        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1262)\r\n        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1029)\r\n        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:816)\r\n        at groovy.lang.GroovyObject.invokeMethod(GroovyObject.java:39)\r\n        at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.call(PogoInterceptableSite.java:45)\r\n        at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.callCurrent(PogoInterceptableSite.java:55)\r\n        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:203)\r\n        at io.restassured.internal.RequestSpecificationImpl.get(RequestSpecificationImpl.groovy:171)\r\n        at io.restassured.internal.RequestSpecificationImpl.get(RequestSpecificationImpl.groovy)\r\n        at com.productlist.test.ProductTest.testGetAllProducts(ProductTest.java:78)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:133)\r\n        at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:598)\r\n        at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)\r\n        at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)\r\n        at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:824)\r\n        at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)\r\n        at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)\r\n        at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)\r\n        at java.util.ArrayList.forEach(ArrayList.java:1257)\r\n        at org.testng.TestRunner.privateRun(TestRunner.java:794)\r\n        at org.testng.TestRunner.run(TestRunner.java:596)\r\n        at org.testng.SuiteRunner.runTest(SuiteRunner.java:377)\r\n        at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:371)\r\n        at org.testng.SuiteRunner.privateRun(SuiteRunner.java:332)\r\n        at org.testng.SuiteRunner.run(SuiteRunner.java:276)\r\n        at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)\r\n        at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)\r\n        at org.testng.TestNG.runSuitesSequentially(TestNG.java:1212)\r\n        at org.testng.TestNG.runSuitesLocally(TestNG.java:1134)\r\n        at org.testng.TestNG.runSuites(TestNG.java:1063)\r\n        at org.testng.TestNG.run(TestNG.java:1031)\r\n        at org.gradle.api.internal.tasks.testing.testng.TestNGTestClassProcessor.runTests(TestNGTestClassProcessor.java:141)\r\n        at org.gradle.api.internal.tasks.testing.testng.TestNGTestClassProcessor.stop(TestNGTestClassProcessor.java:90)\r\n        at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\r\n        at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n        at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\r\n        at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\r\n        at com.sun.proxy.$Proxy2.stop(Unknown Source)\r\n        at org.gradle.api.internal.tasks.testing.worker.TestWorker.stop(TestWorker.java:132)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\r\n        at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n        at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:182)\r\n        at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:164)\r\n        at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:412)\r\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n        at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n\r\nThe main Test Class of the API is as below:\r\n\r\n    public class ProductTest{\r\n\r\n    \tprivate RequestSpecification requestSpec;\r\n    \tprivate ResponseSpecification responseSpec;\r\n\r\n    \t@BeforeClass\r\n    \tpublic void setup()  {\t\r\n    \t\tRestAssured.useRelaxedHTTPSValidation();\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\r\n    \t\trequestSpec = new RequestSpecBuilder()\r\n    \t\t\t\t.setBaseUri(&quot;https://********.com&quot;)\r\n    \t\t\t\t.setBasePath(&quot;/productlist/v1.0&quot;).addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n    \t\t\t\t.addHeader(&quot;Accept&quot;, &quot;application/json&quot;)\r\n    \t\t\t\t.addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + bearerToken.getToken()).build();\r\n    \r\n    \t\tresponseSpec = new ResponseSpecBuilder().expectStatusCode(200).build();\r\n    \r\n    \t\tRestAssured.requestSpecification = requestSpec;\r\n    \t\tRestAssured.responseSpecification = responseSpec;\r\n    \r\n    \t\t}\r\n    \t\t\r\n    \t\tcatch(Exception pe) {\r\n    \t\t\t\r\n    \t\t\tpe.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \t\r\n        @Test\r\n        public void testGetAllProducts() {\r\n        \t\tgiven().expect().when().get(ProductEndpoints.ALL_Products).then();\r\n        }\r\n    \t\r\n    \t\r\n    }\r\n\r\nThis is a dockerised test project and uses gradle build. May I please know what exactly am missing here?","title":"Getting java.net.ConnectException: Connection refused (Connection refused) for JAX-RS api testing with Rest Assured","body":"<p>The project does not use Spring framework. Only using Rest Assured library to test JAX-RS api but getting below error when a particular endpoint is tested in the test method:</p>\n<pre><code> java.net.ConnectException: Connection refused (Connection refused)\n    at java.net.PlainSocketImpl.socketConnect(Native Method)\n    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)\n    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)\n    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)\n    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\n    at java.net.Socket.connect(Socket.java:606)\n    at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121)\n    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180)\n    at org.apache.http.impl.conn.ManagedClientConnectionImpl.open(ManagedClientConnectionImpl.java:326)\n    at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:605)\n    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:440)\n    at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\n    at org.apache.http.client.HttpClient$execute$0.call(Unknown Source)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:148)\n    at io.restassured.internal.RequestSpecificationImpl$RestAssuredHttpBuilder.doRequest(RequestSpecificationImpl.groovy:2055)\n    at io.restassured.internal.http.HTTPBuilder.doRequest(HTTPBuilder.java:495)\n    at io.restassured.internal.http.HTTPBuilder.request(HTTPBuilder.java:452)\n    at io.restassured.internal.http.HTTPBuilder$request$2.call(Unknown Source)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:166)\n    at io.restassured.internal.RequestSpecificationImpl.sendHttpRequest(RequestSpecificationImpl.groovy:1451)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)\n    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1262)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1029)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:816)\n    at groovy.lang.GroovyObject.invokeMethod(GroovyObject.java:39)\n    at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.call(PogoInterceptableSite.java:45)\n    at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.callCurrent(PogoInterceptableSite.java:55)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)\n    at io.restassured.internal.RequestSpecificationImpl.sendRequest(RequestSpecificationImpl.groovy:1200)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)\n    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1262)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1029)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:816)\n    at groovy.lang.GroovyObject.invokeMethod(GroovyObject.java:39)\n    at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.call(PogoInterceptableSite.java:45)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:166)\n    at io.restassured.internal.filter.SendRequestFilter.filter(SendRequestFilter.groovy:30)\n    at io.restassured.filter.Filter$filter$0.call(Unknown Source)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\n    at io.restassured.filter.Filter$filter.call(Unknown Source)\n    at io.restassured.internal.filter.FilterContextImpl.next(FilterContextImpl.groovy:72)\n    at io.restassured.filter.time.TimingFilter.filter(TimingFilter.java:56)\n    at io.restassured.filter.Filter$filter.call(Unknown Source)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:157)\n    at io.restassured.internal.filter.FilterContextImpl.next(FilterContextImpl.groovy:72)\n    at io.restassured.filter.FilterContext$next.call(Unknown Source)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:148)\n    at io.restassured.internal.RequestSpecificationImpl.applyPathParamsAndSendRequest(RequestSpecificationImpl.groovy:1655)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)\n    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1262)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1029)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:816)\n    at groovy.lang.GroovyObject.invokeMethod(GroovyObject.java:39)\n    at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.call(PogoInterceptableSite.java:45)\n    at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.callCurrent(PogoInterceptableSite.java:55)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:203)\n    at io.restassured.internal.RequestSpecificationImpl.applyPathParamsAndSendRequest(RequestSpecificationImpl.groovy:1661)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)\n    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1262)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1029)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:816)\n    at groovy.lang.GroovyObject.invokeMethod(GroovyObject.java:39)\n    at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.call(PogoInterceptableSite.java:45)\n    at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.callCurrent(PogoInterceptableSite.java:55)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:203)\n    at io.restassured.internal.RequestSpecificationImpl.get(RequestSpecificationImpl.groovy:171)\n    at io.restassured.internal.RequestSpecificationImpl.get(RequestSpecificationImpl.groovy)\n    at com.productlist.test.ProductTest.testGetAllProducts(ProductTest.java:78)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:133)\n    at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:598)\n    at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)\n    at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)\n    at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:824)\n    at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)\n    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)\n    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)\n    at java.util.ArrayList.forEach(ArrayList.java:1257)\n    at org.testng.TestRunner.privateRun(TestRunner.java:794)\n    at org.testng.TestRunner.run(TestRunner.java:596)\n    at org.testng.SuiteRunner.runTest(SuiteRunner.java:377)\n    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:371)\n    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:332)\n    at org.testng.SuiteRunner.run(SuiteRunner.java:276)\n    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)\n    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)\n    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1212)\n    at org.testng.TestNG.runSuitesLocally(TestNG.java:1134)\n    at org.testng.TestNG.runSuites(TestNG.java:1063)\n    at org.testng.TestNG.run(TestNG.java:1031)\n    at org.gradle.api.internal.tasks.testing.testng.TestNGTestClassProcessor.runTests(TestNGTestClassProcessor.java:141)\n    at org.gradle.api.internal.tasks.testing.testng.TestNGTestClassProcessor.stop(TestNGTestClassProcessor.java:90)\n    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\n    at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\n    at com.sun.proxy.$Proxy2.stop(Unknown Source)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.stop(TestWorker.java:132)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:182)\n    at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:164)\n    at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:412)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n    at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56)\n    at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n<p>The main Test Class of the API is as below:</p>\n<pre><code>public class ProductTest{\n\n    private RequestSpecification requestSpec;\n    private ResponseSpecification responseSpec;\n\n    @BeforeClass\n    public void setup()  {  \n        RestAssured.useRelaxedHTTPSValidation();\n        \n        try {\n        \n        requestSpec = new RequestSpecBuilder()\n                .setBaseUri(&quot;https://********.com&quot;)\n                .setBasePath(&quot;/productlist/v1.0&quot;).addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                .addHeader(&quot;Accept&quot;, &quot;application/json&quot;)\n                .addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + bearerToken.getToken()).build();\n\n        responseSpec = new ResponseSpecBuilder().expectStatusCode(200).build();\n\n        RestAssured.requestSpecification = requestSpec;\n        RestAssured.responseSpecification = responseSpec;\n\n        }\n        \n        catch(Exception pe) {\n            \n            pe.printStackTrace();\n        }\n    }\n    \n    @Test\n    public void testGetAllProducts() {\n            given().expect().when().get(ProductEndpoints.ALL_Products).then();\n    }\n    \n    \n}\n</code></pre>\n<p>This is a dockerised test project and uses gradle build. May I please know what exactly am missing here?</p>\n"},{"tags":["java","vbscript","executable-jar"],"comments":[{"owner":{"account_id":354536,"reputation":16389,"user_id":692942,"accept_rate":100,"display_name":"user692942"},"score":1,"creation_date":1638901679,"post_id":70264076,"comment_id":124209413,"body_markdown":"You have no spaces between your arguments. Also, don&#39;t use `Chr(34)` it&#39;s very jarring instead escape the double-quote by doubling it, example `jar = &quot;&quot;&quot;C:\\Users\\Documents\\ExP.jarr&quot;&quot;&quot;`. Your raw java command in a VBScript string should look something like `&quot;java -jar &quot;&quot;C:\\Users\\Documents\\ExP.jar&quot;&quot; &quot;&quot;C:\\Users\\Documents\\TestProject&quot;&quot;&quot;`.","body":"You have no spaces between your arguments. Also, don&#39;t use <code>Chr(34)</code> it&#39;s very jarring instead escape the double-quote by doubling it, example <code>jar = &quot;&quot;&quot;C:\\Users\\Documents\\ExP.jarr&quot;&quot;&quot;</code>. Your raw java command in a VBScript string should look something like <code>&quot;java -jar &quot;&quot;C:\\Users\\Documents\\ExP.jar&quot;&quot; &quot;&quot;C:\\Users\\Documents\\TestProject&quot;&quot;&quot;</code>."}],"answers":[{"tags":[],"owner":{"account_id":354536,"reputation":16389,"user_id":692942,"accept_rate":100,"display_name":"user692942"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1638903216,"creation_date":1638902234,"answer_id":70265346,"question_id":70264076,"body_markdown":"You are concatenating the command to execute but not leaving spaces between the arguments so at the moment if you debugged the command being passed to `Exec()` it will look like;\r\n\r\n```none\r\njava -jar &quot;C:\\Users\\Documents\\ExP.jar&quot;&quot;C:\\Users\\Documents\\TestProject&quot;\r\n```\r\n\r\nThe fix is to add a concatentated space between `jar` and `location`.\r\n\r\n```vb\r\nSub Button1_Click()\r\n    Set WshShell = CreateObject(&quot;WScript.Shell&quot;)\r\n    Dim a\r\n    Dim location\r\n    Dim dictionary\r\n    Set dictionary = CreateObject(&quot;Scripting.Dictionary&quot;)\r\n    jar = &quot;C:\\Users\\Documents\\ExP.jar&quot;\r\n    location = &quot;C:\\Users\\Documents\\TestProject&quot;\r\n    Set WshShellExec = WshShell.Exec(&quot;java -jar &quot;&quot;&quot; &amp; jar &amp; &quot;&quot;&quot; &quot;&quot;&quot; &amp; location &amp; &quot;&quot;&quot;&quot;)\r\nEnd Sub\r\n```\r\n\r\nWhich will produce the command\r\n\r\n```none\r\njava -jar &quot;C:\\Users\\Documents\\ExP.jar&quot; &quot;C:\\Users\\Documents\\TestProject&quot;\r\n```\r\n\r\nNote, the replacement of `Chr(34)` with the correct escape method for double quotes which is to double them.\r\n\r\n---\r\n\r\n### Useful Links\r\n\r\n* [Launch programs whose path contains spaces](https://stackoverflow.com/q/1340355/692942)","title":"How to run java program via vbscript with multiple arguments?","body":"<p>You are concatenating the command to execute but not leaving spaces between the arguments so at the moment if you debugged the command being passed to <code>Exec()</code> it will look like;</p>\n<pre class=\"lang-none prettyprint-override\"><code>java -jar &quot;C:\\Users\\Documents\\ExP.jar&quot;&quot;C:\\Users\\Documents\\TestProject&quot;\n</code></pre>\n<p>The fix is to add a concatentated space between <code>jar</code> and <code>location</code>.</p>\n<pre class=\"lang-vb prettyprint-override\"><code>Sub Button1_Click()\n    Set WshShell = CreateObject(&quot;WScript.Shell&quot;)\n    Dim a\n    Dim location\n    Dim dictionary\n    Set dictionary = CreateObject(&quot;Scripting.Dictionary&quot;)\n    jar = &quot;C:\\Users\\Documents\\ExP.jar&quot;\n    location = &quot;C:\\Users\\Documents\\TestProject&quot;\n    Set WshShellExec = WshShell.Exec(&quot;java -jar &quot;&quot;&quot; &amp; jar &amp; &quot;&quot;&quot; &quot;&quot;&quot; &amp; location &amp; &quot;&quot;&quot;&quot;)\nEnd Sub\n</code></pre>\n<p>Which will produce the command</p>\n<pre class=\"lang-none prettyprint-override\"><code>java -jar &quot;C:\\Users\\Documents\\ExP.jar&quot; &quot;C:\\Users\\Documents\\TestProject&quot;\n</code></pre>\n<p>Note, the replacement of <code>Chr(34)</code> with the correct escape method for double quotes which is to double them.</p>\n<hr />\n<h3>Useful Links</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/q/1340355/692942\">Launch programs whose path contains spaces</a></li>\n</ul>\n"}],"owner":{"account_id":11045803,"reputation":1246,"user_id":8111997,"display_name":"Poorna Senani Gamage"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":195,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70265346,"answer_count":1,"score":1,"last_activity_date":1638903216,"creation_date":1638896330,"question_id":70264076,"body_markdown":"I want to run a simple java programme with parsing arguments using VB Scripts.\r\n\r\nthis is my VBScript code \r\n\r\n    Sub Button1_Click()\r\n    Set WshShell = CreateObject(&quot;WScript.Shell&quot;)\r\n    Dim jar\r\n    Dim location\r\n    Dim dictionary\r\n    Set dictionary = CreateObject(&quot;Scripting.Dictionary&quot;)\r\n    jar = &quot;C:\\Users\\Documents\\ExP.jar&quot;\r\n    location = &quot;C:\\Users\\Documents\\TestProject&quot;\r\n    Set WshShellExec = WshShell.Exec(&quot;java -jar &quot; &amp; Chr(34) &amp; jar &amp; Chr(34) &amp; location &amp; Chr(34))\r\n    End Sub\r\n\r\nThis is my java class which I want to pass arguments \r\n\r\n    \tpublic static void main(String[] args) {\r\n    \t\tReadTestScripts readTestScripts = new ReadTestScripts(args[3]);\r\n    //location  =&quot;C:\\\\Users\\\\Documents\\\\TestProject&quot; - want to pass this path to java programme \r\n    \t\treadTestScripts.showResult();\r\n        }\r\n    \r\nI didn&#39;t get the expected output when I pass the location as VBScript argument   \r\n\r\n\r\n","title":"How to run java program via vbscript with multiple arguments?","body":"<p>I want to run a simple java programme with parsing arguments using VB Scripts.</p>\n<p>this is my VBScript code</p>\n<pre><code>Sub Button1_Click()\nSet WshShell = CreateObject(&quot;WScript.Shell&quot;)\nDim jar\nDim location\nDim dictionary\nSet dictionary = CreateObject(&quot;Scripting.Dictionary&quot;)\njar = &quot;C:\\Users\\Documents\\ExP.jar&quot;\nlocation = &quot;C:\\Users\\Documents\\TestProject&quot;\nSet WshShellExec = WshShell.Exec(&quot;java -jar &quot; &amp; Chr(34) &amp; jar &amp; Chr(34) &amp; location &amp; Chr(34))\nEnd Sub\n</code></pre>\n<p>This is my java class which I want to pass arguments</p>\n<pre><code>    public static void main(String[] args) {\n        ReadTestScripts readTestScripts = new ReadTestScripts(args[3]);\n//location  =&quot;C:\\\\Users\\\\Documents\\\\TestProject&quot; - want to pass this path to java programme \n        readTestScripts.showResult();\n    }\n</code></pre>\n<p>I didn't get the expected output when I pass the location as VBScript argument</p>\n"},{"tags":["java","c","jna","jemalloc"],"answers":[{"tags":[],"owner":{"account_id":1187908,"reputation":8617,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638902651,"creation_date":1638902651,"answer_id":70265432,"question_id":70243376,"body_markdown":"Most JNA memory allocation is done using the `Memory` class.   For example, this line would allocate 1024 bytes of memory using the native `malloc()`.\r\n```java\r\nMemory buffer = new Memory(1024);\r\n```\r\nMany other JNA classes, such as `Structure`, use a `Memory` buffer internally.  Other types such as `NativeLong` also have an appropriate sized allocation.\r\n\r\nAll of these native memory allocations are eventually released as part of Java&#39;s garbage collection process (`finalize()` calls `dispose()` which releases the memory).\r\n\r\nHowever, when the allocation is done internally to the native code, there&#39;s no way without looking at that source to see where the memory is allocated and freed.  This is a common source of leaks, however, if the Java/JNA code invokes a native function which allocates memory, and fails to follow the API instructions on how to release/free that memory when done with it.  \r\n\r\nBottom line: you really have to look at the source code and for each native function that operates on memory somewhere, find out whether you are responsible for allocating the memory and passing the buffer (Java/JNA will take care of releasing it) or if the native code itself creates the buffer that it gives you.  If it&#39;s the latter case, there will always be another method you can/should use to free the buffer.","title":"Finding native memory allocations in a jna application using jemalloc","body":"<p>Most JNA memory allocation is done using the <code>Memory</code> class.   For example, this line would allocate 1024 bytes of memory using the native <code>malloc()</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Memory buffer = new Memory(1024);\n</code></pre>\n<p>Many other JNA classes, such as <code>Structure</code>, use a <code>Memory</code> buffer internally.  Other types such as <code>NativeLong</code> also have an appropriate sized allocation.</p>\n<p>All of these native memory allocations are eventually released as part of Java's garbage collection process (<code>finalize()</code> calls <code>dispose()</code> which releases the memory).</p>\n<p>However, when the allocation is done internally to the native code, there's no way without looking at that source to see where the memory is allocated and freed.  This is a common source of leaks, however, if the Java/JNA code invokes a native function which allocates memory, and fails to follow the API instructions on how to release/free that memory when done with it.</p>\n<p>Bottom line: you really have to look at the source code and for each native function that operates on memory somewhere, find out whether you are responsible for allocating the memory and passing the buffer (Java/JNA will take care of releasing it) or if the native code itself creates the buffer that it gives you.  If it's the latter case, there will always be another method you can/should use to free the buffer.</p>\n"}],"owner":{"account_id":23440416,"reputation":1,"user_id":17497992,"display_name":"ywu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":484,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1638903032,"creation_date":1638783269,"question_id":70243376,"body_markdown":"We have a Java application that invokes a .so library written in C via JNA，so the Java application and C code run in the same process. \r\n\r\nWe found a slow memory leak, and we have excluded the JVM heap as a cause via JVM heap monitor，confirming that the problem exists in the JNA or C code. \r\n\r\nWe found jemalloc can track memory allocations，so we install it with `--prefix=/usr/local --enable-prof` options, and set `LD_PRELOAD=/usr/local/lib/libjemalloc.so` and `MALLOC_CONF=prof_leak:true,lg_prof_sample:17,prof_final:true,prof_prefix:/home/admin/prof_dump/jeprof` environment. It generates a dump file，then we use jeprof tool and transform the dump file to a pdf file using `jeprof --show_bytes --pdf \\ jeprof.* \\ &gt; ./wdmp-profiling.pdf`. The result shown here: [memory leak profile][1]\r\n\r\nFrom the figure, we can find many methods invoked about java. But we can&#39;t find any information about JNA or C code. From the figure, we found a invoke branch, it only shows hexadecimal address, so we are not sure whether it relates to JNA or C. \r\n\r\nWe used the [perf-map-agent][2] tool and did export symbol mapping, as shown here: [symbols mapping][3]\r\n\r\nBut when we search the hexadecimal address from jeprof result in symbols mapping result, we can&#39;t find associated symbols.\r\n\r\nIs it possible to find where (C function name or JNA code) native memory is allocated in this case (a Java application invoking C library via JNA), not java heap memory?  If it is possible, how? \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rzHr6.jpg\r\n  [2]: https://github.com/jvm-profiling-tools/perf-map-agent\r\n  [3]: https://i.stack.imgur.com/7AVlc.png","title":"Finding native memory allocations in a jna application using jemalloc","body":"<p>We have a Java application that invokes a .so library written in C via JNA，so the Java application and C code run in the same process.</p>\n<p>We found a slow memory leak, and we have excluded the JVM heap as a cause via JVM heap monitor，confirming that the problem exists in the JNA or C code.</p>\n<p>We found jemalloc can track memory allocations，so we install it with <code>--prefix=/usr/local --enable-prof</code> options, and set <code>LD_PRELOAD=/usr/local/lib/libjemalloc.so</code> and <code>MALLOC_CONF=prof_leak:true,lg_prof_sample:17,prof_final:true,prof_prefix:/home/admin/prof_dump/jeprof</code> environment. It generates a dump file，then we use jeprof tool and transform the dump file to a pdf file using <code>jeprof --show_bytes --pdf \\ jeprof.* \\ &gt; ./wdmp-profiling.pdf</code>. The result shown here: <a href=\"https://i.stack.imgur.com/rzHr6.jpg\" rel=\"nofollow noreferrer\">memory leak profile</a></p>\n<p>From the figure, we can find many methods invoked about java. But we can't find any information about JNA or C code. From the figure, we found a invoke branch, it only shows hexadecimal address, so we are not sure whether it relates to JNA or C.</p>\n<p>We used the <a href=\"https://github.com/jvm-profiling-tools/perf-map-agent\" rel=\"nofollow noreferrer\">perf-map-agent</a> tool and did export symbol mapping, as shown here: <a href=\"https://i.stack.imgur.com/7AVlc.png\" rel=\"nofollow noreferrer\">symbols mapping</a></p>\n<p>But when we search the hexadecimal address from jeprof result in symbols mapping result, we can't find associated symbols.</p>\n<p>Is it possible to find where (C function name or JNA code) native memory is allocated in this case (a Java application invoking C library via JNA), not java heap memory?  If it is possible, how?</p>\n"},{"tags":["java","caching","spring-data-jpa","multi-tenant","hazelcast"],"answers":[{"tags":[],"owner":{"account_id":247334,"reputation":669,"user_id":521990,"accept_rate":80,"display_name":"user521990"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1620883373,"creation_date":1620883373,"answer_id":67514259,"question_id":61295458,"body_markdown":"I am using tenant per database (MySQL), but as long as you are setting a thread context above here is what I&#39;m doing - I&#39;m using Spring Boot. I&#39;ve created a custom Cache Key generator which combines the tenant name + class + and method. You can really choose any combination. Whenever I pass that tenant back it pulls the correct entries. In the Hazelcast command center for my AppointmentType map type I see the number of entries increment per tenant.\r\n\r\nSome other references that may be helpful:\r\n\r\n - https://www.javadevjournal.com/spring/spring-cache-custom-keygenerator/\r\n - https://docs.spring.io/spring-framework/docs/4.3.x/spring-framework-reference/html/cache.html (search for keyGenerator=&quot;myKeyGenerator&quot;)\r\n\r\nIn your class where you want to cache (mine is a service class):\r\n\r\n    @Service\r\n    public class AppointmentTypeService {\r\n    \r\n        private static final Logger LOGGER = LoggerFactory.getLogger(AppointmentTypeService.class);\r\n    \r\n        private final AppointmentTypeRepository appointmentTypeRepository;\r\n    \r\n        @Autowired\r\n        AppointmentTypeService(AppointmentTypeRepository appointmentTypeRepository) {\r\n            this.appointmentTypeRepository = appointmentTypeRepository;\r\n        }\r\n        \r\n        //ADD keyGenerator value. Name is the name of the bean of the class\r\n        @Cacheable(value=&quot;appointmentType&quot;, keyGenerator = &quot;multiTenantCacheKeyGenerator&quot;)\r\n        public List&lt;AppointmentType&gt; list() {\r\n            return this.appointmentTypeRepository.findAll();\r\n        }\r\n    \r\n        @CacheEvict(value=&quot;appointmentType&quot;, allEntries=true)\r\n        public Long create(AppointmentType request) {\r\n            this.appointmentTypeRepository.saveAndFlush(request);\r\n            return request.getAppointmentTypeId();\r\n        }\r\n    \r\n        @CacheEvict(value=&quot;appointmentType&quot;, allEntries=true)\r\n        public void delete(Long id) {\r\n            this.appointmentTypeRepository.deleteById(id);\r\n        }\r\n    \r\n        public Optional&lt;AppointmentType&gt; findById(Long id) {\r\n            return this.appointmentTypeRepository.findById(id);\r\n        }\r\n    \r\n    }\r\n\r\nCreate key generator class\r\n\r\n    //setting the bean name here\r\n    @Component(&quot;multiTenantCacheKeyGenerator&quot;)\r\n    public class MultiTenantCacheKeyGenerator implements KeyGenerator {\r\n    \r\n        @Override\r\n        public Object generate(Object o, Method method, Object... os) {\r\n            StringBuilder sb = new StringBuilder();\r\n            sb.append(TenantContext.getCurrentTenantInstanceName()) //my tenant context class which is using local thread. I set the value in the Spring filter.\r\n              .append(&quot;_&quot;)\r\n              .append(o.getClass().getSimpleName())\r\n              .append(&quot;-&quot;)\r\n              .append(method.getName());\r\n          }\r\n\r\n           return sb.toString();\r\n        }\r\n        \r\n    }","title":"Setting Hazelcast Cache for Multi-tenancy","body":"<p>I am using tenant per database (MySQL), but as long as you are setting a thread context above here is what I'm doing - I'm using Spring Boot. I've created a custom Cache Key generator which combines the tenant name + class + and method. You can really choose any combination. Whenever I pass that tenant back it pulls the correct entries. In the Hazelcast command center for my AppointmentType map type I see the number of entries increment per tenant.</p>\n<p>Some other references that may be helpful:</p>\n<ul>\n<li><a href=\"https://www.javadevjournal.com/spring/spring-cache-custom-keygenerator/\" rel=\"nofollow noreferrer\">https://www.javadevjournal.com/spring/spring-cache-custom-keygenerator/</a></li>\n<li><a href=\"https://docs.spring.io/spring-framework/docs/4.3.x/spring-framework-reference/html/cache.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/4.3.x/spring-framework-reference/html/cache.html</a> (search for keyGenerator=&quot;myKeyGenerator&quot;)</li>\n</ul>\n<p>In your class where you want to cache (mine is a service class):</p>\n<pre><code>@Service\npublic class AppointmentTypeService {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(AppointmentTypeService.class);\n\n    private final AppointmentTypeRepository appointmentTypeRepository;\n\n    @Autowired\n    AppointmentTypeService(AppointmentTypeRepository appointmentTypeRepository) {\n        this.appointmentTypeRepository = appointmentTypeRepository;\n    }\n    \n    //ADD keyGenerator value. Name is the name of the bean of the class\n    @Cacheable(value=&quot;appointmentType&quot;, keyGenerator = &quot;multiTenantCacheKeyGenerator&quot;)\n    public List&lt;AppointmentType&gt; list() {\n        return this.appointmentTypeRepository.findAll();\n    }\n\n    @CacheEvict(value=&quot;appointmentType&quot;, allEntries=true)\n    public Long create(AppointmentType request) {\n        this.appointmentTypeRepository.saveAndFlush(request);\n        return request.getAppointmentTypeId();\n    }\n\n    @CacheEvict(value=&quot;appointmentType&quot;, allEntries=true)\n    public void delete(Long id) {\n        this.appointmentTypeRepository.deleteById(id);\n    }\n\n    public Optional&lt;AppointmentType&gt; findById(Long id) {\n        return this.appointmentTypeRepository.findById(id);\n    }\n\n}\n</code></pre>\n<p>Create key generator class</p>\n<pre><code>//setting the bean name here\n@Component(&quot;multiTenantCacheKeyGenerator&quot;)\npublic class MultiTenantCacheKeyGenerator implements KeyGenerator {\n\n    @Override\n    public Object generate(Object o, Method method, Object... os) {\n        StringBuilder sb = new StringBuilder();\n        sb.append(TenantContext.getCurrentTenantInstanceName()) //my tenant context class which is using local thread. I set the value in the Spring filter.\n          .append(&quot;_&quot;)\n          .append(o.getClass().getSimpleName())\n          .append(&quot;-&quot;)\n          .append(method.getName());\n      }\n\n       return sb.toString();\n    }\n    \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17244140,"reputation":797,"user_id":12485815,"display_name":"francisco neto"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638902964,"creation_date":1638902964,"answer_id":70265493,"question_id":61295458,"body_markdown":"One approach to defining different cache keys for the tenants is to override the method `getCache` in `org.springframework.cache.CacheManager`, as suggested here: [Extended spring cache...][1] \r\n\r\nAs of Jhipster `7.0.1`, the `CacheManager` for Hazelcast is defined in the class `CacheConfiguration` as stated bellow:\r\n\r\n```java\r\n@Configuration\r\n@EnableCaching\r\npublic class CacheConfiguration {\r\n\r\n    //...\r\n\r\n    @Bean\r\n    public CacheManager cacheManager(HazelcastInstance hazelcastInstance) {\r\n        return new com.hazelcast.spring.cache.HazelcastCacheManager(hazelcastInstance);\r\n    }\r\n\r\n    //...\r\n}\r\n```\r\n\r\nTo have the cache keys prefixed with the tenant id, the following code may be used as a starting point:\r\n\r\n```java\r\n@Configuration\r\n@EnableCaching\r\npublic class CacheConfiguration {\r\n\r\n    @Bean\r\n    public CacheManager cacheManager(HazelcastInstance hazelcastInstance) {\r\n        return new com.hazelcast.spring.cache.HazelcastCacheManager(hazelcastInstance){\r\n            @Override\r\n            public Cache getCache(String name) {\r\n                String tenantId = TenantStorage.getTenantId();\r\n                if (StringUtils.isNotBlank(tenantId)){\r\n                    return super.getCache(String.format(&quot;%s:%s&quot;, tenantId, name));\r\n                }\r\n                return super.getCache(name);\r\n            }\r\n        };\r\n    }\r\n\r\n}\r\n```\r\n\r\nNote: in the above code, `TenantStorage.getTenantId()` is a static function one should implement and that returns the current tenant id.\r\n\r\nConsider the class posted by the OP:\r\n\r\n```java\r\n    @Cacheable(cacheNames = &quot;usersByLogin&quot;)\r\n    Optional&lt;User&gt; findOneWithRolesByLogin(String login);\r\n```\r\n\r\nThe following cache values will be used by HazelCast:\r\n\r\n- tenant1 =&gt; tenant1:usersByLogin\r\n- tenant2 =&gt; tenant2:usersByLogin\r\n- null =&gt; usersByLogin\r\n\r\n\r\n\r\n  [1]: https://developpaper.com/extended-spring-cache-supports-caching-multiple-tenants-and-their-automatic-expiration/","title":"Setting Hazelcast Cache for Multi-tenancy","body":"<p>One approach to defining different cache keys for the tenants is to override the method <code>getCache</code> in <code>org.springframework.cache.CacheManager</code>, as suggested here: <a href=\"https://developpaper.com/extended-spring-cache-supports-caching-multiple-tenants-and-their-automatic-expiration/\" rel=\"nofollow noreferrer\">Extended spring cache...</a></p>\n<p>As of Jhipster <code>7.0.1</code>, the <code>CacheManager</code> for Hazelcast is defined in the class <code>CacheConfiguration</code> as stated bellow:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableCaching\npublic class CacheConfiguration {\n\n    //...\n\n    @Bean\n    public CacheManager cacheManager(HazelcastInstance hazelcastInstance) {\n        return new com.hazelcast.spring.cache.HazelcastCacheManager(hazelcastInstance);\n    }\n\n    //...\n}\n</code></pre>\n<p>To have the cache keys prefixed with the tenant id, the following code may be used as a starting point:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableCaching\npublic class CacheConfiguration {\n\n    @Bean\n    public CacheManager cacheManager(HazelcastInstance hazelcastInstance) {\n        return new com.hazelcast.spring.cache.HazelcastCacheManager(hazelcastInstance){\n            @Override\n            public Cache getCache(String name) {\n                String tenantId = TenantStorage.getTenantId();\n                if (StringUtils.isNotBlank(tenantId)){\n                    return super.getCache(String.format(&quot;%s:%s&quot;, tenantId, name));\n                }\n                return super.getCache(name);\n            }\n        };\n    }\n\n}\n</code></pre>\n<p>Note: in the above code, <code>TenantStorage.getTenantId()</code> is a static function one should implement and that returns the current tenant id.</p>\n<p>Consider the class posted by the OP:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Cacheable(cacheNames = &quot;usersByLogin&quot;)\n    Optional&lt;User&gt; findOneWithRolesByLogin(String login);\n</code></pre>\n<p>The following cache values will be used by HazelCast:</p>\n<ul>\n<li>tenant1 =&gt; tenant1:usersByLogin</li>\n<li>tenant2 =&gt; tenant2:usersByLogin</li>\n<li>null =&gt; usersByLogin</li>\n</ul>\n"}],"owner":{"account_id":3823175,"reputation":521,"user_id":3170736,"accept_rate":50,"display_name":"user3170736"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1453,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1638902964,"creation_date":1587240180,"question_id":61295458,"body_markdown":"I am currently using the JHipster generator for really boiler plate code which involves HazelCast as a second level cache. I was able to get Multi-tenancy (schema per tenant) working with a header based tenant context. The problem I have now, is that the @Cacheable annotations all share a context. If the cache is hot, I end up with cross-schema data. For example, tenant1 pulls all records from their table which is cached. Tenant 2 goes to pull the same items from their table, the cache is read, and it never goes to the actual tenant db. An easy fix would be disable caching all together but I would like to not do that. I can not for the life of me figure out how to make hazelcast aware of the tenant context - documentation is lacking. Some others have solved this with using custom name resolvers but it doesn&#39;t appear to be as dynamic as I was hoping (i.e. you have to know all of the tenants ahead of time). Thoughts?\r\n\r\n\r\nCurrent cache config:\r\n\r\n```\r\n@Configuration\r\n@EnableCaching\r\npublic class CacheConfiguration implements DisposableBean {\r\n\r\n    private final Logger log = LoggerFactory.getLogger(CacheConfiguration.class);\r\n\r\n    private final Environment env;\r\n\r\n    private final ServerProperties serverProperties;\r\n\r\n    private final DiscoveryClient discoveryClient;\r\n\r\n    private Registration registration;\r\n\r\n    public CacheConfiguration(Environment env, ServerProperties serverProperties, DiscoveryClient discoveryClient) {\r\n        this.env = env;\r\n        this.serverProperties = serverProperties;\r\n        this.discoveryClient = discoveryClient;\r\n    }\r\n\r\n    @Autowired(required = false)\r\n    public void setRegistration(Registration registration) {\r\n        this.registration = registration;\r\n    }\r\n\r\n    @Override\r\n    public void destroy() throws Exception {\r\n        log.info(&quot;Closing Cache Manager&quot;);\r\n        Hazelcast.shutdownAll();\r\n    }\r\n\r\n    @Bean\r\n    public CacheManager cacheManager(HazelcastInstance hazelcastInstance) {\r\n        log.debug(&quot;Starting HazelcastCacheManager&quot;);\r\n        return new com.hazelcast.spring.cache.HazelcastCacheManager(hazelcastInstance);\r\n    }\r\n\r\n    @Bean\r\n    public HazelcastInstance hazelcastInstance(JHipsterProperties jHipsterProperties) {\r\n        log.debug(&quot;Configuring Hazelcast&quot;);\r\n        HazelcastInstance hazelCastInstance = Hazelcast.getHazelcastInstanceByName(&quot;SampleApp&quot;);\r\n        if (hazelCastInstance != null) {\r\n            log.debug(&quot;Hazelcast already initialized&quot;);\r\n            return hazelCastInstance;\r\n        }\r\n        Config config = new Config();\r\n        config.setInstanceName(&quot;SampleApp&quot;);\r\n        config.getNetworkConfig().getJoin().getMulticastConfig().setEnabled(false);\r\n        if (this.registration == null) {\r\n            log.warn(&quot;No discovery service is set up, Hazelcast cannot create a cluster.&quot;);\r\n        } else {\r\n            // The serviceId is by default the application&#39;s name,\r\n            // see the &quot;spring.application.name&quot; standard Spring property\r\n            String serviceId = registration.getServiceId();\r\n            log.debug(&quot;Configuring Hazelcast clustering for instanceId: {}&quot;, serviceId);\r\n            // In development, everything goes through 127.0.0.1, with a different port\r\n            if (env.acceptsProfiles(Profiles.of(JHipsterConstants.SPRING_PROFILE_DEVELOPMENT))) {\r\n                log.debug(&quot;Application is running with the \\&quot;dev\\&quot; profile, Hazelcast &quot; +\r\n                          &quot;cluster will only work with localhost instances&quot;);\r\n\r\n                System.setProperty(&quot;hazelcast.local.localAddress&quot;, &quot;127.0.0.1&quot;);\r\n                config.getNetworkConfig().setPort(serverProperties.getPort() + 5701);\r\n                config.getNetworkConfig().getJoin().getTcpIpConfig().setEnabled(true);\r\n                for (ServiceInstance instance : discoveryClient.getInstances(serviceId)) {\r\n                    String clusterMember = &quot;127.0.0.1:&quot; + (instance.getPort() + 5701);\r\n                    log.debug(&quot;Adding Hazelcast (dev) cluster member {}&quot;, clusterMember);\r\n                    config.getNetworkConfig().getJoin().getTcpIpConfig().addMember(clusterMember);\r\n                }\r\n            } else { // Production configuration, one host per instance all using port 5701\r\n                config.getNetworkConfig().setPort(5701);\r\n                config.getNetworkConfig().getJoin().getTcpIpConfig().setEnabled(true);\r\n                for (ServiceInstance instance : discoveryClient.getInstances(serviceId)) {\r\n                    String clusterMember = instance.getHost() + &quot;:5701&quot;;\r\n                    log.debug(&quot;Adding Hazelcast (prod) cluster member {}&quot;, clusterMember);\r\n                    config.getNetworkConfig().getJoin().getTcpIpConfig().addMember(clusterMember);\r\n                }\r\n            }\r\n        }\r\n        config.getMapConfigs().put(&quot;default&quot;, initializeDefaultMapConfig(jHipsterProperties));\r\n\r\n        // Full reference is available at: http://docs.hazelcast.org/docs/management-center/3.9/manual/html/Deploying_and_Starting.html\r\n        config.setManagementCenterConfig(initializeDefaultManagementCenterConfig(jHipsterProperties));\r\n        config.getMapConfigs().put(&quot;com.test.sampleapp.domain.*&quot;, initializeDomainMapConfig(jHipsterProperties));\r\n        return Hazelcast.newHazelcastInstance(config);\r\n    }\r\n\r\n    private ManagementCenterConfig initializeDefaultManagementCenterConfig(JHipsterProperties jHipsterProperties) {\r\n        ManagementCenterConfig managementCenterConfig = new ManagementCenterConfig();\r\n        managementCenterConfig.setEnabled(jHipsterProperties.getCache().getHazelcast().getManagementCenter().isEnabled());\r\n        managementCenterConfig.setUrl(jHipsterProperties.getCache().getHazelcast().getManagementCenter().getUrl());\r\n        managementCenterConfig.setUpdateInterval(jHipsterProperties.getCache().getHazelcast().getManagementCenter().getUpdateInterval());\r\n        return managementCenterConfig;\r\n    }\r\n\r\n    private MapConfig initializeDefaultMapConfig(JHipsterProperties jHipsterProperties) {\r\n        MapConfig mapConfig = new MapConfig();\r\n\r\n        /*\r\n        Number of backups. If 1 is set as the backup-count for example,\r\n        then all entries of the map will be copied to another JVM for\r\n        fail-safety. Valid numbers are 0 (no backup), 1, 2, 3.\r\n        */\r\n        mapConfig.setBackupCount(jHipsterProperties.getCache().getHazelcast().getBackupCount());\r\n\r\n        /*\r\n        Valid values are:\r\n        NONE (no eviction),\r\n        LRU (Least Recently Used),\r\n        LFU (Least Frequently Used).\r\n        NONE is the default.\r\n        */\r\n        mapConfig.setEvictionPolicy(EvictionPolicy.LRU);\r\n\r\n        /*\r\n        Maximum size of the map. When max size is reached,\r\n        map is evicted based on the policy defined.\r\n        Any integer between 0 and Integer.MAX_VALUE. 0 means\r\n        Integer.MAX_VALUE. Default is 0.\r\n        */\r\n        mapConfig.setMaxSizeConfig(new MaxSizeConfig(0, MaxSizeConfig.MaxSizePolicy.USED_HEAP_SIZE));\r\n\r\n        return mapConfig;\r\n    }\r\n\r\n    private MapConfig initializeDomainMapConfig(JHipsterProperties jHipsterProperties) {\r\n        MapConfig mapConfig = new MapConfig();\r\n        mapConfig.setTimeToLiveSeconds(jHipsterProperties.getCache().getHazelcast().getTimeToLiveSeconds());\r\n        return mapConfig;\r\n    }\r\n}\r\n```\r\n\r\nSample Repository using cacheNames...\r\n\r\n```\r\n@Repository\r\npublic interface UserRepository extends JpaRepository&lt;User, Long&gt; {\r\n\r\n    String USERS_BY_LOGIN_CACHE = &quot;usersByLogin&quot;;\r\n\r\n    String USERS_BY_EMAIL_CACHE = &quot;usersByEmail&quot;;\r\n\r\n    String USERS_BY_ID_CACHE = &quot;usersById&quot;;\r\n\r\n    Optional&lt;User&gt; findOneByActivationKey(String activationKey);\r\n\r\n    List&lt;User&gt; findAllByActivatedIsFalseAndActivationKeyIsNotNullAndCreatedDateBefore(Instant dateTime);\r\n\r\n    Optional&lt;User&gt; findOneByResetKey(String resetKey);\r\n\r\n    Optional&lt;User&gt; findOneByEmailIgnoreCase(String email);\r\n\r\n    Optional&lt;User&gt; findOneByLogin(String login);\r\n\r\n    @EntityGraph(attributePaths = &quot;roles&quot;)\r\n    @Cacheable(cacheNames = USERS_BY_ID_CACHE)\r\n    Optional&lt;User&gt; findOneWithRolesById(Long id);\r\n\r\n    @EntityGraph(attributePaths = &quot;roles&quot;)\r\n    @Cacheable(cacheNames = USERS_BY_LOGIN_CACHE)\r\n    Optional&lt;User&gt; findOneWithRolesByLogin(String login);\r\n\r\n    @EntityGraph(attributePaths = { &quot;roles&quot;, &quot;roles.permissions&quot; })\r\n    @Cacheable(cacheNames = USERS_BY_LOGIN_CACHE)\r\n    Optional&lt;User&gt; findOneWithRolesAndPermissionsByLogin(String login);\r\n\r\n    @EntityGraph(attributePaths = &quot;roles&quot;)\r\n    @Cacheable(cacheNames = USERS_BY_EMAIL_CACHE)\r\n    Optional&lt;User&gt; findOneWithRolesByEmail(String email);\r\n\r\n    Page&lt;User&gt; findAllByLoginNot(Pageable pageable, String login);\r\n}\r\n```\r\n\r\n","title":"Setting Hazelcast Cache for Multi-tenancy","body":"<p>I am currently using the JHipster generator for really boiler plate code which involves HazelCast as a second level cache. I was able to get Multi-tenancy (schema per tenant) working with a header based tenant context. The problem I have now, is that the @Cacheable annotations all share a context. If the cache is hot, I end up with cross-schema data. For example, tenant1 pulls all records from their table which is cached. Tenant 2 goes to pull the same items from their table, the cache is read, and it never goes to the actual tenant db. An easy fix would be disable caching all together but I would like to not do that. I can not for the life of me figure out how to make hazelcast aware of the tenant context - documentation is lacking. Some others have solved this with using custom name resolvers but it doesn't appear to be as dynamic as I was hoping (i.e. you have to know all of the tenants ahead of time). Thoughts?</p>\n\n<p>Current cache config:</p>\n\n<pre><code>@Configuration\n@EnableCaching\npublic class CacheConfiguration implements DisposableBean {\n\n    private final Logger log = LoggerFactory.getLogger(CacheConfiguration.class);\n\n    private final Environment env;\n\n    private final ServerProperties serverProperties;\n\n    private final DiscoveryClient discoveryClient;\n\n    private Registration registration;\n\n    public CacheConfiguration(Environment env, ServerProperties serverProperties, DiscoveryClient discoveryClient) {\n        this.env = env;\n        this.serverProperties = serverProperties;\n        this.discoveryClient = discoveryClient;\n    }\n\n    @Autowired(required = false)\n    public void setRegistration(Registration registration) {\n        this.registration = registration;\n    }\n\n    @Override\n    public void destroy() throws Exception {\n        log.info(\"Closing Cache Manager\");\n        Hazelcast.shutdownAll();\n    }\n\n    @Bean\n    public CacheManager cacheManager(HazelcastInstance hazelcastInstance) {\n        log.debug(\"Starting HazelcastCacheManager\");\n        return new com.hazelcast.spring.cache.HazelcastCacheManager(hazelcastInstance);\n    }\n\n    @Bean\n    public HazelcastInstance hazelcastInstance(JHipsterProperties jHipsterProperties) {\n        log.debug(\"Configuring Hazelcast\");\n        HazelcastInstance hazelCastInstance = Hazelcast.getHazelcastInstanceByName(\"SampleApp\");\n        if (hazelCastInstance != null) {\n            log.debug(\"Hazelcast already initialized\");\n            return hazelCastInstance;\n        }\n        Config config = new Config();\n        config.setInstanceName(\"SampleApp\");\n        config.getNetworkConfig().getJoin().getMulticastConfig().setEnabled(false);\n        if (this.registration == null) {\n            log.warn(\"No discovery service is set up, Hazelcast cannot create a cluster.\");\n        } else {\n            // The serviceId is by default the application's name,\n            // see the \"spring.application.name\" standard Spring property\n            String serviceId = registration.getServiceId();\n            log.debug(\"Configuring Hazelcast clustering for instanceId: {}\", serviceId);\n            // In development, everything goes through 127.0.0.1, with a different port\n            if (env.acceptsProfiles(Profiles.of(JHipsterConstants.SPRING_PROFILE_DEVELOPMENT))) {\n                log.debug(\"Application is running with the \\\"dev\\\" profile, Hazelcast \" +\n                          \"cluster will only work with localhost instances\");\n\n                System.setProperty(\"hazelcast.local.localAddress\", \"127.0.0.1\");\n                config.getNetworkConfig().setPort(serverProperties.getPort() + 5701);\n                config.getNetworkConfig().getJoin().getTcpIpConfig().setEnabled(true);\n                for (ServiceInstance instance : discoveryClient.getInstances(serviceId)) {\n                    String clusterMember = \"127.0.0.1:\" + (instance.getPort() + 5701);\n                    log.debug(\"Adding Hazelcast (dev) cluster member {}\", clusterMember);\n                    config.getNetworkConfig().getJoin().getTcpIpConfig().addMember(clusterMember);\n                }\n            } else { // Production configuration, one host per instance all using port 5701\n                config.getNetworkConfig().setPort(5701);\n                config.getNetworkConfig().getJoin().getTcpIpConfig().setEnabled(true);\n                for (ServiceInstance instance : discoveryClient.getInstances(serviceId)) {\n                    String clusterMember = instance.getHost() + \":5701\";\n                    log.debug(\"Adding Hazelcast (prod) cluster member {}\", clusterMember);\n                    config.getNetworkConfig().getJoin().getTcpIpConfig().addMember(clusterMember);\n                }\n            }\n        }\n        config.getMapConfigs().put(\"default\", initializeDefaultMapConfig(jHipsterProperties));\n\n        // Full reference is available at: http://docs.hazelcast.org/docs/management-center/3.9/manual/html/Deploying_and_Starting.html\n        config.setManagementCenterConfig(initializeDefaultManagementCenterConfig(jHipsterProperties));\n        config.getMapConfigs().put(\"com.test.sampleapp.domain.*\", initializeDomainMapConfig(jHipsterProperties));\n        return Hazelcast.newHazelcastInstance(config);\n    }\n\n    private ManagementCenterConfig initializeDefaultManagementCenterConfig(JHipsterProperties jHipsterProperties) {\n        ManagementCenterConfig managementCenterConfig = new ManagementCenterConfig();\n        managementCenterConfig.setEnabled(jHipsterProperties.getCache().getHazelcast().getManagementCenter().isEnabled());\n        managementCenterConfig.setUrl(jHipsterProperties.getCache().getHazelcast().getManagementCenter().getUrl());\n        managementCenterConfig.setUpdateInterval(jHipsterProperties.getCache().getHazelcast().getManagementCenter().getUpdateInterval());\n        return managementCenterConfig;\n    }\n\n    private MapConfig initializeDefaultMapConfig(JHipsterProperties jHipsterProperties) {\n        MapConfig mapConfig = new MapConfig();\n\n        /*\n        Number of backups. If 1 is set as the backup-count for example,\n        then all entries of the map will be copied to another JVM for\n        fail-safety. Valid numbers are 0 (no backup), 1, 2, 3.\n        */\n        mapConfig.setBackupCount(jHipsterProperties.getCache().getHazelcast().getBackupCount());\n\n        /*\n        Valid values are:\n        NONE (no eviction),\n        LRU (Least Recently Used),\n        LFU (Least Frequently Used).\n        NONE is the default.\n        */\n        mapConfig.setEvictionPolicy(EvictionPolicy.LRU);\n\n        /*\n        Maximum size of the map. When max size is reached,\n        map is evicted based on the policy defined.\n        Any integer between 0 and Integer.MAX_VALUE. 0 means\n        Integer.MAX_VALUE. Default is 0.\n        */\n        mapConfig.setMaxSizeConfig(new MaxSizeConfig(0, MaxSizeConfig.MaxSizePolicy.USED_HEAP_SIZE));\n\n        return mapConfig;\n    }\n\n    private MapConfig initializeDomainMapConfig(JHipsterProperties jHipsterProperties) {\n        MapConfig mapConfig = new MapConfig();\n        mapConfig.setTimeToLiveSeconds(jHipsterProperties.getCache().getHazelcast().getTimeToLiveSeconds());\n        return mapConfig;\n    }\n}\n</code></pre>\n\n<p>Sample Repository using cacheNames...</p>\n\n<pre><code>@Repository\npublic interface UserRepository extends JpaRepository&lt;User, Long&gt; {\n\n    String USERS_BY_LOGIN_CACHE = \"usersByLogin\";\n\n    String USERS_BY_EMAIL_CACHE = \"usersByEmail\";\n\n    String USERS_BY_ID_CACHE = \"usersById\";\n\n    Optional&lt;User&gt; findOneByActivationKey(String activationKey);\n\n    List&lt;User&gt; findAllByActivatedIsFalseAndActivationKeyIsNotNullAndCreatedDateBefore(Instant dateTime);\n\n    Optional&lt;User&gt; findOneByResetKey(String resetKey);\n\n    Optional&lt;User&gt; findOneByEmailIgnoreCase(String email);\n\n    Optional&lt;User&gt; findOneByLogin(String login);\n\n    @EntityGraph(attributePaths = \"roles\")\n    @Cacheable(cacheNames = USERS_BY_ID_CACHE)\n    Optional&lt;User&gt; findOneWithRolesById(Long id);\n\n    @EntityGraph(attributePaths = \"roles\")\n    @Cacheable(cacheNames = USERS_BY_LOGIN_CACHE)\n    Optional&lt;User&gt; findOneWithRolesByLogin(String login);\n\n    @EntityGraph(attributePaths = { \"roles\", \"roles.permissions\" })\n    @Cacheable(cacheNames = USERS_BY_LOGIN_CACHE)\n    Optional&lt;User&gt; findOneWithRolesAndPermissionsByLogin(String login);\n\n    @EntityGraph(attributePaths = \"roles\")\n    @Cacheable(cacheNames = USERS_BY_EMAIL_CACHE)\n    Optional&lt;User&gt; findOneWithRolesByEmail(String email);\n\n    Page&lt;User&gt; findAllByLoginNot(Pageable pageable, String login);\n}\n</code></pre>\n"},{"tags":["java","android","android-studio","google-maps","mobile"],"answers":[{"tags":[],"owner":{"account_id":11172549,"reputation":124,"user_id":8199125,"display_name":"Ali Babadi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638893855,"creation_date":1638893855,"answer_id":70263519,"question_id":70263462,"body_markdown":"You missed the `&gt;` in your permission.\r\n\r\njust copy this :\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;","title":"AndroidManifest.xml trouble in the code using ACCESS_FINE_LOCATION I kept changing the program around and now I cannot figure out what went wrong","body":"<p>You missed the <code>&gt;</code> in your permission.</p>\n<p>just copy this :</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\n</code></pre>\n"}],"owner":{"account_id":22506596,"reputation":1,"user_id":16702103,"display_name":"Amanda W"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1638902936,"creation_date":1638893610,"question_id":70263462,"body_markdown":"My program was up and running completely. Now it seems like there is something wrong in the AndroidManifest.xml I tried tinkering around with the code and added custom markers and a few other things. I think at one point I did something to the AndroidManifest and it is not working as it should work. The app launches and I am able to login but once the maps API begins, then it crashes and I do not know what went wrong...\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        package=&quot;com.example.vuapp&quot;&gt;\r\n    &lt;!--\r\n         The ACCESS_COARSE/FINE_LOCATION permissions are not required to use\r\n         Google Maps Android API v2, but you must specify either coarse or fine\r\n         location permissions for the &quot;MyLocation&quot; functionality.\r\n    --&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.vumap&quot;&gt;\r\n\r\n        &lt;!--\r\n             The API key for Google Maps-based APIs is defined as a string resource.\r\n             (See the file &quot;res/values/google_maps_api.xml&quot;).\r\n             Note that the API key is linked to the encryption key used to sign the APK.\r\n             You need a different API key for each encryption key, including the release key that is used to\r\n             sign the APK for publishing.\r\n             You can define the keys for the debug and release targets in src/debug/ and src/release/.\r\n        --&gt;\r\n        &lt;meta-data\r\n            android:name=&quot;com.google.android.geo.API_KEY&quot;\r\n            android:value=&quot;@string/google_maps_key&quot; /&gt;\r\n\r\n        &lt;activity\r\n            android:name=&quot;.MapsActivity&quot;\r\n            android:exported=&quot;true&quot;\r\n            android:label=&quot;@string/title_activity_maps&quot; /&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n\r\n\r\n        &lt;meta-data\r\n            android:name=&quot;preloaded_fonts&quot;\r\n            android:resource=&quot;@array/preloaded_fonts&quot; /&gt;\r\n    &lt;/activity&gt;\r\n\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n","title":"AndroidManifest.xml trouble in the code using ACCESS_FINE_LOCATION I kept changing the program around and now I cannot figure out what went wrong","body":"<p>My program was up and running completely. Now it seems like there is something wrong in the AndroidManifest.xml I tried tinkering around with the code and added custom markers and a few other things. I think at one point I did something to the AndroidManifest and it is not working as it should work. The app launches and I am able to login but once the maps API begins, then it crashes and I do not know what went wrong...</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    package=&quot;com.example.vuapp&quot;&gt;\n&lt;!--\n     The ACCESS_COARSE/FINE_LOCATION permissions are not required to use\n     Google Maps Android API v2, but you must specify either coarse or fine\n     location permissions for the &quot;MyLocation&quot; functionality.\n--&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\n\n&lt;application\n    android:allowBackup=&quot;true&quot;\n    android:icon=&quot;@mipmap/ic_launcher&quot;\n    android:label=&quot;@string/app_name&quot;\n    android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n    android:supportsRtl=&quot;true&quot;\n    android:theme=&quot;@style/Theme.vumap&quot;&gt;\n\n    &lt;!--\n         The API key for Google Maps-based APIs is defined as a string resource.\n         (See the file &quot;res/values/google_maps_api.xml&quot;).\n         Note that the API key is linked to the encryption key used to sign the APK.\n         You need a different API key for each encryption key, including the release key that is used to\n         sign the APK for publishing.\n         You can define the keys for the debug and release targets in src/debug/ and src/release/.\n    --&gt;\n    &lt;meta-data\n        android:name=&quot;com.google.android.geo.API_KEY&quot;\n        android:value=&quot;@string/google_maps_key&quot; /&gt;\n\n    &lt;activity\n        android:name=&quot;.MapsActivity&quot;\n        android:exported=&quot;true&quot;\n        android:label=&quot;@string/title_activity_maps&quot; /&gt;\n    &lt;activity\n        android:name=&quot;.MainActivity&quot;\n        android:exported=&quot;true&quot;&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n            &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n        &lt;/intent-filter&gt;\n\n\n    &lt;meta-data\n        android:name=&quot;preloaded_fonts&quot;\n        android:resource=&quot;@array/preloaded_fonts&quot; /&gt;\n&lt;/activity&gt;\n\n&lt;/application&gt;\n</code></pre>\n\n"},{"tags":["python","java","encryption","byte","blowfish"],"comments":[{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":2,"creation_date":1638854185,"post_id":70254698,"comment_id":124192011,"body_markdown":"It is the same output.  Notice that at the positions in each output array where the characters differ, the two different values always add up to 256.  Does that tell you anything? (Hint: signed vs unsigned bytes)","body":"It is the same output.  Notice that at the positions in each output array where the characters differ, the two different values always add up to 256.  Does that tell you anything? (Hint: signed vs unsigned bytes)"}],"answers":[{"tags":[],"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1638902509,"creation_date":1638902509,"answer_id":70265403,"question_id":70254698,"body_markdown":"Java Output\r\n\r\n    [47, -19, 48, -42, 19, 126, -105, 66, 21, -126, -44]\r\n\r\nPython Output\r\n\r\n    47 237 48 214 19 126 151 66 21 130 212\r\n\r\nThese represent the exact same bit pattern, therefore your code is working.\r\n\r\nThe apparent difference comes from the fact that in Java the `byte` type is _signed_. Notice that the only differences are the output bytes that display as negative values in the Java output.  \r\n\r\nTaking the first difference for example, `-19` vs `237`, the bit pattern for both of these is `0xED`, or binary `1110 1101`.  If interpreted as unsigned, the value is `237`, but if interpreted as signed, the value is `-19`.\r\n\r\n","title":"Convert Blowfish Encryption from Java to Python","body":"<p>Java Output</p>\n<pre><code>[47, -19, 48, -42, 19, 126, -105, 66, 21, -126, -44]\n</code></pre>\n<p>Python Output</p>\n<pre><code>47 237 48 214 19 126 151 66 21 130 212\n</code></pre>\n<p>These represent the exact same bit pattern, therefore your code is working.</p>\n<p>The apparent difference comes from the fact that in Java the <code>byte</code> type is <em>signed</em>. Notice that the only differences are the output bytes that display as negative values in the Java output.</p>\n<p>Taking the first difference for example, <code>-19</code> vs <code>237</code>, the bit pattern for both of these is <code>0xED</code>, or binary <code>1110 1101</code>.  If interpreted as unsigned, the value is <code>237</code>, but if interpreted as signed, the value is <code>-19</code>.</p>\n"}],"owner":{"account_id":21444942,"reputation":241,"user_id":15798673,"display_name":"Callum"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":170,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70265403,"answer_count":1,"score":0,"last_activity_date":1638902509,"creation_date":1638848697,"question_id":70254698,"body_markdown":"I am attempting to convert my Java Blowfish encryption algorithm into Python. I am using the blowfish package which takes the same parameters as the Java library. They both execute successfully, however, I do not get the same result back.\r\n\r\nJava code\r\n---------\r\n\r\n        public static void main(String[] args) {\r\n\r\n        try {\r\n            String mainText = &quot;hello world&quot;;\r\n            String stBlowfishIv = &quot;zzyyxxaa&quot;;\r\n            String stBlowfishKey = &quot;how.good&quot;;\r\n\r\n            byte[] byteString;\r\n            IvParameterSpec iv = new IvParameterSpec(stBlowfishIv.getBytes());\r\n            SecretKey key = new SecretKeySpec(stBlowfishKey.getBytes(), &quot;Blowfish&quot;);\r\n            Cipher c = Cipher.getInstance(&quot;Blowfish/CFB/NoPadding&quot;);\r\n            c.init(Cipher.ENCRYPT_MODE, key, iv);\r\n            byteString = c.doFinal(mainText.getBytes());\r\n            System.out.println(Arrays.toString(byteString));\r\n        }\r\n        catch (GeneralSecurityException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\nOutput\r\n------\r\n\r\n&gt; [47, -19, 48, -42, 19, 126, -105, 66, 21, -126, -44]\r\n\r\n\r\nPython code\r\n-----------\r\n\r\n        def encrypt(self, initVector=&quot;zzyyxxaa&quot;, key=&quot;how.good&quot;):\r\n\r\n        totalString = &quot;hello world&quot;\r\n        initVectorBytes = bytes(initVector, &#39;utf-8&#39;)\r\n        keyBytes = bytes(key, &#39;utf-8&#39;)\r\n        totalStringBytes = bytes(totalString, &#39;utf-8&#39;)\r\n\r\n        cipher = blowfish.Cipher(keyBytes)\r\n\r\n        dataEncrypted = b&quot;&quot;.join(cipher.encrypt_cfb(totalStringBytes, initVectorBytes))\r\n        print(dataEncrypted)\r\n\r\n        for byte in dataEncrypted:\r\n            print(byte, end=&#39; &#39;)\r\n\r\nOutput\r\n------\r\n\r\n&gt; b&#39;/\\xed0\\xd6\\x13~\\x97B\\x15\\x82\\xd4&#39;\r\n\r\n&gt; 47 237 48 214 19 126 151 66 21 130 212\r\n\r\nSome assistance or guidance would be much appreciated.","title":"Convert Blowfish Encryption from Java to Python","body":"<p>I am attempting to convert my Java Blowfish encryption algorithm into Python. I am using the blowfish package which takes the same parameters as the Java library. They both execute successfully, however, I do not get the same result back.</p>\n<h2>Java code</h2>\n<pre><code>    public static void main(String[] args) {\n\n    try {\n        String mainText = &quot;hello world&quot;;\n        String stBlowfishIv = &quot;zzyyxxaa&quot;;\n        String stBlowfishKey = &quot;how.good&quot;;\n\n        byte[] byteString;\n        IvParameterSpec iv = new IvParameterSpec(stBlowfishIv.getBytes());\n        SecretKey key = new SecretKeySpec(stBlowfishKey.getBytes(), &quot;Blowfish&quot;);\n        Cipher c = Cipher.getInstance(&quot;Blowfish/CFB/NoPadding&quot;);\n        c.init(Cipher.ENCRYPT_MODE, key, iv);\n        byteString = c.doFinal(mainText.getBytes());\n        System.out.println(Arrays.toString(byteString));\n    }\n    catch (GeneralSecurityException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<h2>Output</h2>\n<blockquote>\n<p>[47, -19, 48, -42, 19, 126, -105, 66, 21, -126, -44]</p>\n</blockquote>\n<h2>Python code</h2>\n<pre><code>    def encrypt(self, initVector=&quot;zzyyxxaa&quot;, key=&quot;how.good&quot;):\n\n    totalString = &quot;hello world&quot;\n    initVectorBytes = bytes(initVector, 'utf-8')\n    keyBytes = bytes(key, 'utf-8')\n    totalStringBytes = bytes(totalString, 'utf-8')\n\n    cipher = blowfish.Cipher(keyBytes)\n\n    dataEncrypted = b&quot;&quot;.join(cipher.encrypt_cfb(totalStringBytes, initVectorBytes))\n    print(dataEncrypted)\n\n    for byte in dataEncrypted:\n        print(byte, end=' ')\n</code></pre>\n<h2>Output</h2>\n<blockquote>\n<p>b'/\\xed0\\xd6\\x13~\\x97B\\x15\\x82\\xd4'</p>\n</blockquote>\n<blockquote>\n<p>47 237 48 214 19 126 151 66 21 130 212</p>\n</blockquote>\n<p>Some assistance or guidance would be much appreciated.</p>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1505349249,"post_id":46208460,"comment_id":79380816,"body_markdown":"Would you please post a minimal example test case that you expect to pass but fails (e.g., configure the mapper, set a field to empty, serialize, show the output)?","body":"Would you please post a minimal example test case that you expect to pass but fails (e.g., configure the mapper, set a field to empty, serialize, show the output)?"},{"owner":{"account_id":6250645,"reputation":877,"user_id":4860821,"accept_rate":80,"display_name":"Panda"},"score":0,"creation_date":1505352940,"post_id":46208460,"comment_id":79381569,"body_markdown":"Just added some tests. Sorry they weren&#39;t there to begin with.","body":"Just added some tests. Sorry they weren&#39;t there to begin with."},{"owner":{"account_id":6250645,"reputation":877,"user_id":4860821,"accept_rate":80,"display_name":"Panda"},"score":0,"creation_date":1505354332,"post_id":46208460,"comment_id":79381890,"body_markdown":"As I said in the original question (and as indicated in the tests), null should be serialized and empty() shouldn&#39;t. This isn&#39;t the default behavior of the module. That question doesn&#39;t answer how to achieve this behavior.","body":"As I said in the original question (and as indicated in the tests), null should be serialized and empty() shouldn&#39;t. This isn&#39;t the default behavior of the module. That question doesn&#39;t answer how to achieve this behavior."},{"owner":{"account_id":1961010,"reputation":1184,"user_id":1762592,"accept_rate":56,"display_name":"Vinay Gaba"},"score":0,"creation_date":1573696526,"post_id":46208460,"comment_id":103969891,"body_markdown":"@Panda were you able to figure this out ?","body":"@Panda were you able to figure this out ?"}],"answers":[{"tags":[],"owner":{"account_id":9376049,"reputation":3355,"user_id":7643517,"display_name":"Nolequen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638902434,"creation_date":1638902434,"answer_id":70265392,"question_id":46208460,"body_markdown":"It is possible to implement using `JsonInclude.Include.CUSTOM` rule and custom `value` filter:\r\n\r\n```java\r\nclass OptionalFilter {\r\n\r\n    @Override\r\n    public boolean equals(Object obj) {\r\n        return obj instanceof Optional &amp;&amp; ((Optional&lt;?&gt;) obj).isEmpty();\r\n    }\r\n}\r\n\r\nclass POJO {\r\n    @JsonInclude(value = JsonInclude.Include.CUSTOM, valueFilter = OptionalFilter.class)\r\n    public Optional&lt;String&gt; content;\r\n}\r\n```\r\nwith setting `configureAbsentsAsNulls` to `true`:\r\n```java\r\nnew Jdk8Module().configureAbsentsAsNulls(true)\r\n```","title":"Jackson optional field empty() vs null","body":"<p>It is possible to implement using <code>JsonInclude.Include.CUSTOM</code> rule and custom <code>value</code> filter:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class OptionalFilter {\n\n    @Override\n    public boolean equals(Object obj) {\n        return obj instanceof Optional &amp;&amp; ((Optional&lt;?&gt;) obj).isEmpty();\n    }\n}\n\nclass POJO {\n    @JsonInclude(value = JsonInclude.Include.CUSTOM, valueFilter = OptionalFilter.class)\n    public Optional&lt;String&gt; content;\n}\n</code></pre>\n<p>with setting <code>configureAbsentsAsNulls</code> to <code>true</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>new Jdk8Module().configureAbsentsAsNulls(true)\n</code></pre>\n"}],"owner":{"account_id":6250645,"reputation":877,"user_id":4860821,"accept_rate":80,"display_name":"Panda"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2232,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"answer_count":1,"score":6,"last_activity_date":1638902434,"creation_date":1505346943,"question_id":46208460,"body_markdown":"I&#39;m trying to use Optional in a POJO to indicate when a json field can be null, absent, or present. My issue is that I cannot figure out how to configure jackson to not treat `Optional.empty()` and `null` as the same. For `empty()`, I want the field to be ignored. None of the JsonInclude values seem to do this. `Jdk8Module#configureAbsentsAsNulls()` looked promising, but it doesn&#39;t change the results of my tests. Is there a way to do this?\r\n\r\n**tl;dr**\r\n`null` values *should* be serialized, `Optional.empty()` should not be serialized.\r\n\r\nHere are some tests exhibiting the behavior I&#39;m trying to achieve. \r\n\r\n    class POJO {\r\n    \tpublic Optional&lt;String&gt; content;\r\n    }\r\n    \r\n    private ObjectMapper getMapper() {\r\n    \treturn new ObjectMapper().registerModule(new Jdk8Module());\r\n    }\r\n    \r\n    @org.junit.Test\r\n    public void testAbsent() throws JsonProcessingException {\r\n    \tObjectMapper mapper = getMapper();\r\n    \r\n    \tPOJO pojo = new POJO();\r\n    \tpojo.content = Optional.empty();\r\n    \r\n    \tString result = mapper.writeValueAsString(pojo);\r\n    \r\n    \tassertEquals(&quot;{}&quot;, result);\r\n    }\r\n    \r\n    @org.junit.Test\r\n    public void testNull() throws JsonProcessingException {\r\n    \tObjectMapper mapper = getMapper();\r\n    \r\n    \tPOJO pojo = new POJO();\r\n    \tpojo.content = null;\r\n    \r\n    \tString result = mapper.writeValueAsString(pojo);\r\n    \r\n    \tassertEquals(&quot;{\\&quot;content\\&quot;:null}&quot;, result);\r\n    }\r\n    \r\n    @org.junit.Test\r\n    public void testPresent() throws JsonProcessingException {\r\n    \tObjectMapper mapper = getMapper();\r\n    \r\n    \tPOJO pojo = new POJO();\r\n    \tpojo.content = Optional.of(&quot;Hello&quot;);\r\n    \r\n    \tString result = mapper.writeValueAsString(pojo);\r\n    \r\n    \tassertEquals(&quot;{\\&quot;content\\&quot;:\\&quot;Hello\\&quot;}&quot;, result);\r\n    }","title":"Jackson optional field empty() vs null","body":"<p>I'm trying to use Optional in a POJO to indicate when a json field can be null, absent, or present. My issue is that I cannot figure out how to configure jackson to not treat <code>Optional.empty()</code> and <code>null</code> as the same. For <code>empty()</code>, I want the field to be ignored. None of the JsonInclude values seem to do this. <code>Jdk8Module#configureAbsentsAsNulls()</code> looked promising, but it doesn't change the results of my tests. Is there a way to do this?</p>\n\n<p><strong>tl;dr</strong>\n<code>null</code> values <em>should</em> be serialized, <code>Optional.empty()</code> should not be serialized.</p>\n\n<p>Here are some tests exhibiting the behavior I'm trying to achieve. </p>\n\n<pre><code>class POJO {\n    public Optional&lt;String&gt; content;\n}\n\nprivate ObjectMapper getMapper() {\n    return new ObjectMapper().registerModule(new Jdk8Module());\n}\n\n@org.junit.Test\npublic void testAbsent() throws JsonProcessingException {\n    ObjectMapper mapper = getMapper();\n\n    POJO pojo = new POJO();\n    pojo.content = Optional.empty();\n\n    String result = mapper.writeValueAsString(pojo);\n\n    assertEquals(\"{}\", result);\n}\n\n@org.junit.Test\npublic void testNull() throws JsonProcessingException {\n    ObjectMapper mapper = getMapper();\n\n    POJO pojo = new POJO();\n    pojo.content = null;\n\n    String result = mapper.writeValueAsString(pojo);\n\n    assertEquals(\"{\\\"content\\\":null}\", result);\n}\n\n@org.junit.Test\npublic void testPresent() throws JsonProcessingException {\n    ObjectMapper mapper = getMapper();\n\n    POJO pojo = new POJO();\n    pojo.content = Optional.of(\"Hello\");\n\n    String result = mapper.writeValueAsString(pojo);\n\n    assertEquals(\"{\\\"content\\\":\\\"Hello\\\"}\", result);\n}\n</code></pre>\n"},{"tags":["java","regex","parsing","capturing-group"],"comments":[{"owner":{"account_id":262968,"reputation":767120,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"score":0,"creation_date":1638900763,"post_id":70264894,"comment_id":124209063,"body_markdown":"You have only 2 capture groups so you cannot get more that 2 groups in the result. You will have to run a loop to match all the repetitions","body":"You have only 2 capture groups so you cannot get more that 2 groups in the result. You will have to run a loop to match all the repetitions"},{"owner":{"account_id":13064687,"reputation":58,"user_id":9440510,"display_name":"Derek McCants"},"score":0,"creation_date":1638901197,"post_id":70264894,"comment_id":124209235,"body_markdown":"@anubhava Thanks, I understand.  Does that mean then regex like `(a){4}` matching against `aaaa` would match, but only capture one group containing `a`?","body":"@anubhava Thanks, I understand.  Does that mean then regex like <code>(a){4}</code> matching against <code>aaaa</code> would match, but only capture one group containing <code>a</code>?"},{"owner":{"account_id":1707439,"reputation":236106,"user_id":1566221,"accept_rate":86,"display_name":"rici"},"score":0,"creation_date":1638913843,"post_id":70264894,"comment_id":124213719,"body_markdown":"Surely the regex to match a value should be `&quot;[^&quot;]*&quot;|[^,]*`. Otherwise, how can you write a value which includes a comma?","body":"Surely the regex to match a value should be <code>&quot;[^&quot;]*&quot;|[^,]*</code>. Otherwise, how can you write a value which includes a comma?"}],"answers":[{"tags":[],"owner":{"account_id":262968,"reputation":767120,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1638902375,"creation_date":1638901473,"answer_id":70265181,"question_id":70264894,"body_markdown":"You have only 2 capture groups so you cannot get more that 2 groups in the result. You will have to run a loop to match all the repetitions \r\n\r\nYou may use this regex in `while` loop to get all matches:\r\n\r\n```sh\r\n(?:([\\w/.-]+)\\h*=|(?!^)\\G,)\\h*((\\&quot;?)[^\\&quot;,]*\\3)\r\n```\r\n\r\n`\\G` asserts position at the end of the previous match or the start of the string for the first match, since we are using `(?!^)` we force `\\G` to only match **position at the end of the previous match**\r\n\r\n[RegEx Demo][1]\r\n\r\n[**CODE DEMO**][2]\r\n\r\n**Code:**\r\n\r\n\r\n    final String regex = &quot;(?:([\\\\w/.-]+)\\\\h*=|(?!^)\\\\G,)\\\\h*((\\&quot;?)[^\\&quot;,]*\\\\3)&quot;;\r\n    final String string = &quot;SettingName = \\&quot;Value1\\&quot;,0x2,3,\\&quot;Value4 contains spaces\\&quot;, \\&quot;Value5 has a space before the string that is ignored\\&quot;&quot;;\r\n        \r\n    final Pattern pattern = Pattern.compile(regex, Pattern.MULTILINE);\r\n    final Matcher matcher = pattern.matcher(string);\r\n        \r\n\twhile (matcher.find()) {\r\n\t\tif (matcher.group(1) != null)\r\n\t\t\tSystem.out.println(matcher.group(1));\r\n\t\tSystem.out.println(&quot;\\t=&gt; &quot; + matcher.group(2));\r\n\t}\r\n\r\n\r\n  [1]: https://regex101.com/r/tUXDPo/1\r\n  [2]: https://ideone.com/rhyCiY","title":"Capturing Arbitrary Multiple Groups with Regex","body":"<p>You have only 2 capture groups so you cannot get more that 2 groups in the result. You will have to run a loop to match all the repetitions</p>\n<p>You may use this regex in <code>while</code> loop to get all matches:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>(?:([\\w/.-]+)\\h*=|(?!^)\\G,)\\h*((\\&quot;?)[^\\&quot;,]*\\3)\n</code></pre>\n<p><code>\\G</code> asserts position at the end of the previous match or the start of the string for the first match, since we are using <code>(?!^)</code> we force <code>\\G</code> to only match <strong>position at the end of the previous match</strong></p>\n<p><a href=\"https://regex101.com/r/tUXDPo/1\" rel=\"nofollow noreferrer\">RegEx Demo</a></p>\n<p><a href=\"https://ideone.com/rhyCiY\" rel=\"nofollow noreferrer\"><strong>CODE DEMO</strong></a></p>\n<p><strong>Code:</strong></p>\n<pre><code>final String regex = &quot;(?:([\\\\w/.-]+)\\\\h*=|(?!^)\\\\G,)\\\\h*((\\&quot;?)[^\\&quot;,]*\\\\3)&quot;;\nfinal String string = &quot;SettingName = \\&quot;Value1\\&quot;,0x2,3,\\&quot;Value4 contains spaces\\&quot;, \\&quot;Value5 has a space before the string that is ignored\\&quot;&quot;;\n    \nfinal Pattern pattern = Pattern.compile(regex, Pattern.MULTILINE);\nfinal Matcher matcher = pattern.matcher(string);\n    \nwhile (matcher.find()) {\n    if (matcher.group(1) != null)\n        System.out.println(matcher.group(1));\n    System.out.println(&quot;\\t=&gt; &quot; + matcher.group(2));\n}\n</code></pre>\n"}],"owner":{"account_id":13064687,"reputation":58,"user_id":9440510,"display_name":"Derek McCants"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70265181,"answer_count":1,"score":1,"last_activity_date":1638902375,"creation_date":1638900021,"question_id":70264894,"body_markdown":"I am trying to use regular expressions in Java to capture data from the following string:\r\n\r\n`   SettingName = &quot;Value1&quot;,0x2,3,&quot;Value4 contains spaces&quot;, &quot;Value5 has a space before the string that is ignored&quot;`\r\n\r\nThe string may be prepended with an arbitrary amount of whitespace, which can be ignored.  It also may contain more or fewer values than listed here, this is just an example.\r\n\r\nMy intent is to capture these groups:\r\n&lt;li&gt;Group 1: SettingName&lt;/li&gt;\r\n&lt;li&gt;Group 2: &quot;Value1&quot; (with the quotes)&lt;/li&gt;\r\n&lt;li&gt;Group 3: 0x2&lt;/li&gt;\r\n&lt;li&gt;Group 4: 3&lt;/li&gt;\r\n&lt;li&gt;Group 5: &quot;Value4 contains spaces&quot;&lt;/li&gt;\r\n&lt;li&gt;Group 6: &quot;Value5 has a space before the string that is ignored&quot;&lt;/li&gt;\r\n&lt;br/&gt;\r\n\r\nThe regex I am trying to use is:\r\n\r\n    \\s*([\\w\\/.-]+)\\s*=(?:\\s*(\\&quot;?[^\\&quot;,]*\\&quot;?)(?:,|\\s*$))+\r\n    \\s* -&gt; Consume an arbitrary number of whitespace\r\n       ( -&gt; Start a capturing group (group 1)\r\n        [\\w\\/.-] -&gt; Get a letter of the SettingName, which may be contain alphanumberic, /, ., and -\r\n                + -&gt; Get the previous token one or more times (so group 1 is not blank)\r\n                 ) -&gt; End the capturing group\r\n                  \\s* -&gt; Consume an arbitrary amount of whitespace\r\n                     = -&gt; Consume the equals sign\r\n                      (?: -&gt; Start an uncaptured group\r\n                         \\s* -&gt; Consume an arbitrary amount of whitespace\r\n                            ( -&gt; Start a captured group\r\n                             \\&quot;? -&gt; Consume a quote, if it exists\r\n                                [^\\&quot;,] -&gt; Consume any nonquote, noncomma character\r\n                                      \\&quot;? -&gt; Consume the end quote, if it exists\r\n                                         ) -&gt; End the captured group\r\n                                          (?: -&gt; start a uncaptured group\r\n                                             ,|\\s*$ -&gt; capture either a comma or end of line (string?) character\r\n                                                   ) -&gt; end the uncaptured group\r\n                                                    ) -&gt; end the outer uncaptured group\r\n                                                     + -&gt; match the outer uncaptured group 1 or more times\r\n\r\nI am using this code:\r\n\r\n    private static final String regex = &quot;\\\\s*([\\\\w\\\\/.-]+)\\\\s*=(?:\\\\s*(\\&quot;?[^\\&quot;,]*\\&quot;?)(?:,|\\\\s*$))+&quot;;\r\n    private static final Pattern settingPat = Pattern.compile(regex);\r\n    ...\r\n    public String text;\r\n    public Matcher m;\r\n    ...\r\n    public void someMethod(String lineContents)\r\n    {\r\n        m = settingPat.matcher(text);\r\n        if(!m.matches())\r\n            ... (do other stuff)\r\n        else\r\n        {\r\n            name = m.group(1);     // should be &quot;SettingName&quot;\r\n            value[0] = m.group(2); // should be &quot;\\&quot;Value1\\&quot;&quot;\r\n            value[1] = m.group(3); // should be &quot;0x2&quot;\r\n            ...\r\n        }\r\n    }\r\n\r\nWith this code, it matches to the String, but it seems that I am only capturing the last group.  Does Java and/or regular expressions support arbitrary capturing groups repeatedly with a `+` modifier?","title":"Capturing Arbitrary Multiple Groups with Regex","body":"<p>I am trying to use regular expressions in Java to capture data from the following string:</p>\n<p><code>   SettingName = &quot;Value1&quot;,0x2,3,&quot;Value4 contains spaces&quot;, &quot;Value5 has a space before the string that is ignored&quot;</code></p>\n<p>The string may be prepended with an arbitrary amount of whitespace, which can be ignored.  It also may contain more or fewer values than listed here, this is just an example.</p>\n<p>My intent is to capture these groups:</p>\n<li>Group 1: SettingName</li>\n<li>Group 2: \"Value1\" (with the quotes)</li>\n<li>Group 3: 0x2</li>\n<li>Group 4: 3</li>\n<li>Group 5: \"Value4 contains spaces\"</li>\n<li>Group 6: \"Value5 has a space before the string that is ignored\"</li>\n<br/>\n<p>The regex I am trying to use is:</p>\n<pre><code>\\s*([\\w\\/.-]+)\\s*=(?:\\s*(\\&quot;?[^\\&quot;,]*\\&quot;?)(?:,|\\s*$))+\n\\s* -&gt; Consume an arbitrary number of whitespace\n   ( -&gt; Start a capturing group (group 1)\n    [\\w\\/.-] -&gt; Get a letter of the SettingName, which may be contain alphanumberic, /, ., and -\n            + -&gt; Get the previous token one or more times (so group 1 is not blank)\n             ) -&gt; End the capturing group\n              \\s* -&gt; Consume an arbitrary amount of whitespace\n                 = -&gt; Consume the equals sign\n                  (?: -&gt; Start an uncaptured group\n                     \\s* -&gt; Consume an arbitrary amount of whitespace\n                        ( -&gt; Start a captured group\n                         \\&quot;? -&gt; Consume a quote, if it exists\n                            [^\\&quot;,] -&gt; Consume any nonquote, noncomma character\n                                  \\&quot;? -&gt; Consume the end quote, if it exists\n                                     ) -&gt; End the captured group\n                                      (?: -&gt; start a uncaptured group\n                                         ,|\\s*$ -&gt; capture either a comma or end of line (string?) character\n                                               ) -&gt; end the uncaptured group\n                                                ) -&gt; end the outer uncaptured group\n                                                 + -&gt; match the outer uncaptured group 1 or more times\n</code></pre>\n<p>I am using this code:</p>\n<pre><code>private static final String regex = &quot;\\\\s*([\\\\w\\\\/.-]+)\\\\s*=(?:\\\\s*(\\&quot;?[^\\&quot;,]*\\&quot;?)(?:,|\\\\s*$))+&quot;;\nprivate static final Pattern settingPat = Pattern.compile(regex);\n...\npublic String text;\npublic Matcher m;\n...\npublic void someMethod(String lineContents)\n{\n    m = settingPat.matcher(text);\n    if(!m.matches())\n        ... (do other stuff)\n    else\n    {\n        name = m.group(1);     // should be &quot;SettingName&quot;\n        value[0] = m.group(2); // should be &quot;\\&quot;Value1\\&quot;&quot;\n        value[1] = m.group(3); // should be &quot;0x2&quot;\n        ...\n    }\n}\n</code></pre>\n<p>With this code, it matches to the String, but it seems that I am only capturing the last group.  Does Java and/or regular expressions support arbitrary capturing groups repeatedly with a <code>+</code> modifier?</p>\n"},{"tags":["java","if-statement","arraylist"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":3,"creation_date":1638844124,"post_id":70254222,"comment_id":124190398,"body_markdown":"Store them in the list as lowercase？","body":"Store them in the list as lowercase？"},{"owner":{"account_id":248321,"reputation":62665,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":2,"creation_date":1638844577,"post_id":70254222,"comment_id":124190465,"body_markdown":"Welcome to Stack Overflow. What do you mean by &quot;ignore&quot;? When you use your code, what exactly happens to the `words`, and exactly how is that different from what is supposed to happen? And if you *only* want to &quot;store them in an array&quot;, then why do you need any other logic like `!words.contains(nextWord)`? Please try to explain the task clearly.","body":"Welcome to Stack Overflow. What do you mean by &quot;ignore&quot;? When you use your code, what exactly happens to the <code>words</code>, and exactly how is that different from what is supposed to happen? And if you <i>only</i> want to &quot;store them in an array&quot;, then why do you need any other logic like <code>!words.contains(nextWord)</code>? Please try to explain the task clearly."},{"owner":{"account_id":20309078,"reputation":23,"user_id":14896604,"display_name":"Yasser BK"},"score":0,"creation_date":1638846263,"post_id":70254222,"comment_id":124190715,"body_markdown":"When the user enters &quot;The&quot; or &quot;the&quot; I want them to be defined as one word, not two  @KarlKnechtel","body":"When the user enters &quot;The&quot; or &quot;the&quot; I want them to be defined as one word, not two  @KarlKnechtel"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1638854351,"post_id":70254222,"comment_id":124192034,"body_markdown":"Search Stack Overflow before posting.","body":"Search Stack Overflow before posting."}],"answers":[{"tags":[],"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638847487,"creation_date":1638844368,"answer_id":70254261,"question_id":70254222,"body_markdown":"You can use the toLowerCase function from String\r\n\r\n```\r\nScanner fileScanner = new Scanner(file);\r\n\r\nfileScanner.useDelimiter(&quot;[^A-Za-z0-9]&quot;);\r\n\r\nSet&lt;String&gt; wordsCheck = new HashSet&lt;&gt;();\r\nList&lt;String&gt; words = new ArrayList&lt;&gt;();\r\n        \r\nwhile (fileScanner.hasNext())\r\n{\r\n      \r\n    String nextWord = fileScanner.next();\r\n         \r\n    if (!wordsCheck.contains(nextWord.toLowerCase()))\r\n    {\r\n         \r\n       wordsCheck.add(nextWord.toLowerCase());\r\n       words.add(nextWord);\r\n         \r\n    }\r\n         \r\n}\r\n   \r\n```","title":"How Ignore the if case (i.e., consider “The” and “the” as the same word)","body":"<p>You can use the toLowerCase function from String</p>\n<pre><code>Scanner fileScanner = new Scanner(file);\n\nfileScanner.useDelimiter(&quot;[^A-Za-z0-9]&quot;);\n\nSet&lt;String&gt; wordsCheck = new HashSet&lt;&gt;();\nList&lt;String&gt; words = new ArrayList&lt;&gt;();\n        \nwhile (fileScanner.hasNext())\n{\n      \n    String nextWord = fileScanner.next();\n         \n    if (!wordsCheck.contains(nextWord.toLowerCase()))\n    {\n         \n       wordsCheck.add(nextWord.toLowerCase());\n       words.add(nextWord);\n         \n    }\n         \n}\n   \n</code></pre>\n"},{"tags":[],"owner":{"account_id":22425724,"reputation":1060,"user_id":16632363,"display_name":"user16632363"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638902372,"creation_date":1638844710,"answer_id":70254289,"question_id":70254222,"body_markdown":"        Scanner fileScanner = new Scanner(file);\r\n        fileScanner.useDelimiter(&quot;[^A-Za-z0-9]&quot;);\r\n        Map&lt;String,String&gt; words = new HashMap&lt;&gt;();\r\n        while (fileScanner.hasNext()) {\r\n            String nextWord = fileScanner.next();\r\n            words.put(nextWord.toLowerCase(), nextWord);\r\n        }\r\n\r\nKey points:\r\n\r\n0.  Store lower cased words\r\n\r\n1.  Convert input to lower case before looking it up\r\n\r\n2.  Use a HashMap rather than an ArrayList - much better performance for &#39;contains&#39;. The key is the lowercased word, the value is what the user actually typed.\r\n\r\n3.  Given we&#39;re using a Map, we don&#39;t even need to check &#39;contains&#39; since the Set automatically ensures only one instance of equal keys (it retains the most recently added instance, but that&#39;s ok here)\r\n\r\n\r\n\r\n","title":"How Ignore the if case (i.e., consider “The” and “the” as the same word)","body":"<pre><code>    Scanner fileScanner = new Scanner(file);\n    fileScanner.useDelimiter(&quot;[^A-Za-z0-9]&quot;);\n    Map&lt;String,String&gt; words = new HashMap&lt;&gt;();\n    while (fileScanner.hasNext()) {\n        String nextWord = fileScanner.next();\n        words.put(nextWord.toLowerCase(), nextWord);\n    }\n</code></pre>\n<p>Key points:</p>\n<ol start=\"0\">\n<li><p>Store lower cased words</p>\n</li>\n<li><p>Convert input to lower case before looking it up</p>\n</li>\n<li><p>Use a HashMap rather than an ArrayList - much better performance for 'contains'. The key is the lowercased word, the value is what the user actually typed.</p>\n</li>\n<li><p>Given we're using a Map, we don't even need to check 'contains' since the Set automatically ensures only one instance of equal keys (it retains the most recently added instance, but that's ok here)</p>\n</li>\n</ol>\n"}],"owner":{"account_id":20309078,"reputation":23,"user_id":14896604,"display_name":"Yasser BK"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1638854338,"answer_count":2,"score":-1,"last_activity_date":1638902372,"creation_date":1638843952,"question_id":70254222,"body_markdown":"Sorry if this is an obvious problem.\r\n\r\nI&#39;m trying to read strings from users and store them in an array.\r\nbut I want to Ignore the if case (i.e., consider “The” and “the” as the same word)\r\n\r\nThanks a lot for any help!\r\n\r\n    Scanner fileScanner = new Scanner(file);\r\n            fileScanner.useDelimiter(&quot;[^A-Za-z0-9]&quot;);\r\n            ArrayList&lt;String&gt; words = new ArrayList&lt;String&gt;();\r\n            while (fileScanner.hasNext()) {\r\n                String nextWord = fileScanner.next();\r\n                if (!words.contains(nextWord) ) {\r\n                    words.add(nextWord);\r\n                }\r\n            }","title":"How Ignore the if case (i.e., consider “The” and “the” as the same word)","body":"<p>Sorry if this is an obvious problem.</p>\n<p>I'm trying to read strings from users and store them in an array.\nbut I want to Ignore the if case (i.e., consider “The” and “the” as the same word)</p>\n<p>Thanks a lot for any help!</p>\n<pre><code>Scanner fileScanner = new Scanner(file);\n        fileScanner.useDelimiter(&quot;[^A-Za-z0-9]&quot;);\n        ArrayList&lt;String&gt; words = new ArrayList&lt;String&gt;();\n        while (fileScanner.hasNext()) {\n            String nextWord = fileScanner.next();\n            if (!words.contains(nextWord) ) {\n                words.add(nextWord);\n            }\n        }\n</code></pre>\n"},{"tags":["java","couchbase-lite"],"comments":[{"owner":{"account_id":911472,"reputation":6655,"user_id":945226,"accept_rate":70,"display_name":"G. Blake Meike"},"score":0,"creation_date":1642611779,"post_id":69928241,"comment_id":125119143,"body_markdown":"It would help a lot if I could see what your DB looks like: maybe just 10 or 12 documents.  Also, I note that you have written `Meta.id.from(&quot;playerDS&quot;)`.  The &quot;playerDS&quot; in there should probably not be a literal.  That is probably the reason that you are not seeing any ids in your results.","body":"It would help a lot if I could see what your DB looks like: maybe just 10 or 12 documents.  Also, I note that you have written <code>Meta.id.from(&quot;playerDS&quot;)</code>.  The &quot;playerDS&quot; in there should probably not be a literal.  That is probably the reason that you are not seeing any ids in your results."}],"answers":[{"tags":[],"owner":{"account_id":10195393,"reputation":44,"user_id":7527373,"display_name":"J.Zhao"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1638902137,"creation_date":1638902137,"answer_id":70265328,"question_id":69928241,"body_markdown":"Two questions:\r\n1. Are the above 6 docs all you have in the database?\r\n2. Could you please list all of the &quot;gives me about 12 records?&quot;","title":"couchbase lite join statement returning a lot more documents than expected","body":"<p>Two questions:</p>\n<ol>\n<li>Are the above 6 docs all you have in the database?</li>\n<li>Could you please list all of the &quot;gives me about 12 records?&quot;</li>\n</ol>\n"}],"owner":{"account_id":22590774,"reputation":49,"user_id":16773919,"display_name":"ruth hadish"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1638902137,"creation_date":1636633275,"question_id":69928241,"body_markdown":"I have seen this [https://forums.couchbase.com/t/join-three-documents/31166][1] 2 which I hoped would solve my issue but it didn’t. Basically, I expect only two documents but I am getting a dozen. Here are my document types:\r\n\r\n    {type:&#39;parent&#39;, parentId: 1, parentName: &#39;parent name1&#39;}\r\n    {type:&#39;parent&#39;, parentId: 2, parentName: &#39;parent name2&#39;}\r\n    {type:&#39;child&#39;, parentId: 1, childName: &#39; Child 1&#39;}\r\n    {type:&#39;child&#39;, parentId: 2, childName: &#39; Child 2&#39;}\r\n    {type:&#39;player&#39;, parentId: 1, childId: 1, playerId: 10}\r\n    {type:&#39;player&#39;, parentId: 1, childId: 2, playerId: 10}\r\n\r\nbasically, player documents select a parent and a child to create their own parent-child relationship. So in the above, player with id 10 has chosen to create a family with children 1 and 2 and parent id 1. Now I want to return the family for playerId 10 which should be two documents as follows:\r\n\r\n    {type:&#39;player&#39;, parentId: 1, childId: 2, playerId: 10, parentName: &#39;parent name 1&#39;, childName: &#39;child name 2&#39;},\r\n    {type:&#39;player&#39;, parentId: 1, childId: 1, playerId: 10, parentName: &#39;parent name 1&#39;, childName: &#39;child name 1&#39;}\r\n\r\nthe join statement from the above link gives me about 12 records when in reality it should return two documents for player id 10.\r\n\r\nMy code is:\r\n\r\n    public void chosenFamily(int playerId){\r\n            String aliasPlayer = &quot;playerDS&quot;;\r\n            String aliasParent =  &quot;parentsDS&quot;;\r\n            String aliasChildren = &quot;childrenDS&quot;;\r\n            DataSource parentsDS = DataSource.database(database).as(aliasParent);\r\n            DataSource playerDS = DataSource.database(database).as(aliasPlayer);\r\n            DataSource childrenDS = DataSource.database(database).as(aliasChildren);\r\n       \r\n            Expression expression = Expression.property(&quot;type&quot;).from(aliasPlayer).equalTo(Expression.string(&quot;player&quot;))\r\n                    .and(Expression.property(&quot;playerId&quot;).from(aliasPlayer).equalTo(Expression.intValue(playerId)))\r\n                    .and(Expression.property(&quot;type&quot;).from(aliasParent).equalTo(Expression.string(&quot;parent&quot;)))\r\n                    .and(Expression.property(&quot;type&quot;).from(aliasChildren).equalTo(Expression.string(&quot;child&quot;)));\r\n    \r\n    \r\n            Query query = QueryBuilder.select(\r\n                    SelectResult.expression(Meta.id.from(&quot;playerDS&quot;)),\r\n                    SelectResult.expression(Expression.property(&quot;type&quot;).from(aliasPlayer)),\r\n                    SelectResult.expression(Expression.property(&quot;parentId&quot;).from(aliasPlayer)),\r\n                    SelectResult.expression(Expression.property(&quot;playerId&quot;).from(aliasPlayer)),\r\n                    SelectResult.expression(Expression.property(&quot;childId&quot;).from(aliasPlayer)),\r\n                    SelectResult.expression(Expression.property(&quot;parentName&quot;).from(aliasParent)),\r\n                    SelectResult.expression(Expression.property(&quot;childName&quot;).from(aliasChildren))\r\n            ).from(playerDS)\r\n                    .join(\r\n                            Join.join(parentsDS).on(Expression.property(&quot;parentId&quot;).from(aliasPlayer).equalTo(Expression.property(&quot;parentId&quot;).from(aliasParent))),\r\n                            Join.join(childrenDS).on(Expression.property(&quot;parentId&quot;).from(aliasChildren).equalTo(Expression.property(&quot;parentId&quot;).from(aliasParent)))\r\n    \r\n                    )\r\n                    .where(expression);\r\n    \r\n            ResultSet resultSet = null;\r\n            try {\r\n                resultSet = query.execute();\r\n                logMessages(resultSet.size()); // 12 documents.\r\n            } catch (CouchbaseLiteException e) {\r\n                logMessages(e);\r\n            }\r\n        }\r\n\r\n\r\n  [1]: https://forums.couchbase.com/t/join-three-documents/31166","title":"couchbase lite join statement returning a lot more documents than expected","body":"<p>I have seen this <a href=\"https://forums.couchbase.com/t/join-three-documents/31166\" rel=\"nofollow noreferrer\">https://forums.couchbase.com/t/join-three-documents/31166</a> 2 which I hoped would solve my issue but it didn’t. Basically, I expect only two documents but I am getting a dozen. Here are my document types:</p>\n<pre><code>{type:'parent', parentId: 1, parentName: 'parent name1'}\n{type:'parent', parentId: 2, parentName: 'parent name2'}\n{type:'child', parentId: 1, childName: ' Child 1'}\n{type:'child', parentId: 2, childName: ' Child 2'}\n{type:'player', parentId: 1, childId: 1, playerId: 10}\n{type:'player', parentId: 1, childId: 2, playerId: 10}\n</code></pre>\n<p>basically, player documents select a parent and a child to create their own parent-child relationship. So in the above, player with id 10 has chosen to create a family with children 1 and 2 and parent id 1. Now I want to return the family for playerId 10 which should be two documents as follows:</p>\n<pre><code>{type:'player', parentId: 1, childId: 2, playerId: 10, parentName: 'parent name 1', childName: 'child name 2'},\n{type:'player', parentId: 1, childId: 1, playerId: 10, parentName: 'parent name 1', childName: 'child name 1'}\n</code></pre>\n<p>the join statement from the above link gives me about 12 records when in reality it should return two documents for player id 10.</p>\n<p>My code is:</p>\n<pre><code>public void chosenFamily(int playerId){\n        String aliasPlayer = &quot;playerDS&quot;;\n        String aliasParent =  &quot;parentsDS&quot;;\n        String aliasChildren = &quot;childrenDS&quot;;\n        DataSource parentsDS = DataSource.database(database).as(aliasParent);\n        DataSource playerDS = DataSource.database(database).as(aliasPlayer);\n        DataSource childrenDS = DataSource.database(database).as(aliasChildren);\n   \n        Expression expression = Expression.property(&quot;type&quot;).from(aliasPlayer).equalTo(Expression.string(&quot;player&quot;))\n                .and(Expression.property(&quot;playerId&quot;).from(aliasPlayer).equalTo(Expression.intValue(playerId)))\n                .and(Expression.property(&quot;type&quot;).from(aliasParent).equalTo(Expression.string(&quot;parent&quot;)))\n                .and(Expression.property(&quot;type&quot;).from(aliasChildren).equalTo(Expression.string(&quot;child&quot;)));\n\n\n        Query query = QueryBuilder.select(\n                SelectResult.expression(Meta.id.from(&quot;playerDS&quot;)),\n                SelectResult.expression(Expression.property(&quot;type&quot;).from(aliasPlayer)),\n                SelectResult.expression(Expression.property(&quot;parentId&quot;).from(aliasPlayer)),\n                SelectResult.expression(Expression.property(&quot;playerId&quot;).from(aliasPlayer)),\n                SelectResult.expression(Expression.property(&quot;childId&quot;).from(aliasPlayer)),\n                SelectResult.expression(Expression.property(&quot;parentName&quot;).from(aliasParent)),\n                SelectResult.expression(Expression.property(&quot;childName&quot;).from(aliasChildren))\n        ).from(playerDS)\n                .join(\n                        Join.join(parentsDS).on(Expression.property(&quot;parentId&quot;).from(aliasPlayer).equalTo(Expression.property(&quot;parentId&quot;).from(aliasParent))),\n                        Join.join(childrenDS).on(Expression.property(&quot;parentId&quot;).from(aliasChildren).equalTo(Expression.property(&quot;parentId&quot;).from(aliasParent)))\n\n                )\n                .where(expression);\n\n        ResultSet resultSet = null;\n        try {\n            resultSet = query.execute();\n            logMessages(resultSet.size()); // 12 documents.\n        } catch (CouchbaseLiteException e) {\n            logMessages(e);\n        }\n    }\n</code></pre>\n"},{"tags":["java","apache-httpcomponents"],"answers":[{"tags":[],"owner":{"account_id":242184,"reputation":1015,"user_id":513530,"display_name":"milbr"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1552552842,"creation_date":1552552842,"answer_id":55158126,"question_id":54591140,"body_markdown":"Problem is in `URIUtils.rewriteURI()` where is this code:\r\n\r\n```\r\nfinal StringBuilder buf = new StringBuilder(path.length());\r\nboolean foundSlash = false;\r\nfor (int i = 0; i &lt; path.length(); i++) {\r\n\tfinal char ch = path.charAt(i);\r\n\tif (ch != &#39;/&#39; || !foundSlash) {\r\n\t\tbuf.append(ch);\r\n\t}\r\n\tfoundSlash = ch == &#39;/&#39;;\r\n}\r\nuribuilder.setPath(buf.toString());\r\n```\r\n\r\nSo double slashes in uri path are always replaced with one slash. You can use another http client like *OkHttp* which doesn&#39;t make this normalization.","title":"Apache Http Client - Stop Removing Double Slashes from URL","body":"<p>Problem is in <code>URIUtils.rewriteURI()</code> where is this code:</p>\n\n<pre><code>final StringBuilder buf = new StringBuilder(path.length());\nboolean foundSlash = false;\nfor (int i = 0; i &lt; path.length(); i++) {\n    final char ch = path.charAt(i);\n    if (ch != '/' || !foundSlash) {\n        buf.append(ch);\n    }\n    foundSlash = ch == '/';\n}\nuribuilder.setPath(buf.toString());\n</code></pre>\n\n<p>So double slashes in uri path are always replaced with one slash. You can use another http client like <em>OkHttp</em> which doesn't make this normalization.</p>\n"},{"tags":[],"owner":{"account_id":19242328,"reputation":11,"user_id":14062072,"display_name":"Seth Horrigan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1596739476,"creation_date":1596739476,"answer_id":63289896,"question_id":54591140,"body_markdown":"For a similar case I encountered, the best solution was to use URLEncoder.encode to url-encode the embedded URL. \r\n\r\nIn your example, \r\n```\r\nnew HttpGet(&quot;http://thumbors-server/usafe/200x200/&quot; + URLEncoder.encode(&quot;http://host.com/image.jpg&quot;, &quot;UTF-8&quot;))\r\n```","title":"Apache Http Client - Stop Removing Double Slashes from URL","body":"<p>For a similar case I encountered, the best solution was to use URLEncoder.encode to url-encode the embedded URL.</p>\n<p>In your example,</p>\n<pre><code>new HttpGet(&quot;http://thumbors-server/usafe/200x200/&quot; + URLEncoder.encode(&quot;http://host.com/image.jpg&quot;, &quot;UTF-8&quot;))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":387508,"reputation":433,"user_id":745894,"display_name":"Jeff Vincent"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638902115,"creation_date":1638900691,"answer_id":70265028,"question_id":54591140,"body_markdown":"I encountered this today in the http-client v4.5.13.  The server I&#39;m hitting/testing does not handle URI&#39;s properly so URLEncoding didn&#39;t work.  I needed a workaround (short of using raw sockets) in my code.\r\n\r\nAfter some debugging found that you can disable URI normalization using the RequestConfig.custom().setNormlizeUri() method when setting up the client configuration.\r\n\r\n[Javadoc link to the RequestConfig builder][1]\r\n\r\nExample:\r\n\r\n    requestConfig = RequestConfig.custom()\r\n                        .setConnectTimeout(connectionTimeoutMS)\r\n                        .setConnectionRequestTimeout(connectionTimeoutMS)\r\n                        .setSocketTimeout(connectionTimeoutMS)\r\n                        .setNormalizeUri(normalizeUri)\r\n                        .build();\r\n\r\n\r\n\r\n\r\n  [1]: https://hc.apache.org/httpcomponents-client-4.5.x/current/httpclient/apidocs/org/apache/http/client/config/RequestConfig.Builder.html","title":"Apache Http Client - Stop Removing Double Slashes from URL","body":"<p>I encountered this today in the http-client v4.5.13.  The server I'm hitting/testing does not handle URI's properly so URLEncoding didn't work.  I needed a workaround (short of using raw sockets) in my code.</p>\n<p>After some debugging found that you can disable URI normalization using the RequestConfig.custom().setNormlizeUri() method when setting up the client configuration.</p>\n<p><a href=\"https://hc.apache.org/httpcomponents-client-4.5.x/current/httpclient/apidocs/org/apache/http/client/config/RequestConfig.Builder.html\" rel=\"nofollow noreferrer\">Javadoc link to the RequestConfig builder</a></p>\n<p>Example:</p>\n<pre><code>requestConfig = RequestConfig.custom()\n                    .setConnectTimeout(connectionTimeoutMS)\n                    .setConnectionRequestTimeout(connectionTimeoutMS)\n                    .setSocketTimeout(connectionTimeoutMS)\n                    .setNormalizeUri(normalizeUri)\n                    .build();\n</code></pre>\n"}],"owner":{"account_id":792027,"reputation":2645,"user_id":869368,"display_name":"Matthias"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2180,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1638902115,"creation_date":1549624102,"question_id":54591140,"body_markdown":"I am using Apache HTTP Components Client 4.5.7 to request a URL that containing a double slash. When I look at the wire log, I see that the double slash was &quot;fixed&quot; to be only one slash. Unfortunately that is no desireable behaviour for me, as it will cause the request to fail. \r\n\r\nBackground: I am requesting resized images from Thumbor (an image resize server). A Thumbor URL will basically look like this: \r\n\r\n\r\nthis url will cause thumbor to download http://host.com/image.jpg and resize it to fit into 200x200 pixels. \r\n\r\nThe code looks like this: \r\n\r\n    HttpGet httpUriRequest = new HttpGet(&quot;http://thumbors-server/usafe/200x200/http://host.com/image.jpg&quot;);\r\n    CLIENT.execute(httpUriRequest, responseHandler); \r\n\r\nWhat httpclient sends to the server. however is this: \r\n\r\n    DEBUG o.a.h.headers     http-outgoing-1 &gt;&gt; GET /unsafe/300x300/http:/host.com/image1.jpg HTTP/1.1 \r\n    DEBUG o.a.h.headers     http-outgoing-1 &gt;&gt; Host: localhost:4002 \r\n    DEBUG o.a.h.headers     http-outgoing-1 &gt;&gt; Connection: Keep-Alive \r\n    DEBUG o.a.h.headers     http-outgoing-1 &gt;&gt; User-Agent: Apache-HttpClient/4.5.7 (Java/11.0.1) \r\n    DEBUG o.a.h.headers     http-outgoing-1 &gt;&gt; Accept-Encoding: gzip,deflate \r\n\r\nplease note that http://host.com was replaced by http:/host.com (notice the missing second /). This will cause the request to fail. \r\n\r\nHow can I stop http client from &quot;fixing&quot; the url that I pass to it? ","title":"Apache Http Client - Stop Removing Double Slashes from URL","body":"<p>I am using Apache HTTP Components Client 4.5.7 to request a URL that containing a double slash. When I look at the wire log, I see that the double slash was \"fixed\" to be only one slash. Unfortunately that is no desireable behaviour for me, as it will cause the request to fail. </p>\n\n<p>Background: I am requesting resized images from Thumbor (an image resize server). A Thumbor URL will basically look like this: </p>\n\n<p>this url will cause thumbor to download <a href=\"http://host.com/image.jpg\" rel=\"noreferrer\">http://host.com/image.jpg</a> and resize it to fit into 200x200 pixels. </p>\n\n<p>The code looks like this: </p>\n\n<pre><code>HttpGet httpUriRequest = new HttpGet(\"http://thumbors-server/usafe/200x200/http://host.com/image.jpg\");\nCLIENT.execute(httpUriRequest, responseHandler); \n</code></pre>\n\n<p>What httpclient sends to the server. however is this: </p>\n\n<pre><code>DEBUG o.a.h.headers     http-outgoing-1 &gt;&gt; GET /unsafe/300x300/http:/host.com/image1.jpg HTTP/1.1 \nDEBUG o.a.h.headers     http-outgoing-1 &gt;&gt; Host: localhost:4002 \nDEBUG o.a.h.headers     http-outgoing-1 &gt;&gt; Connection: Keep-Alive \nDEBUG o.a.h.headers     http-outgoing-1 &gt;&gt; User-Agent: Apache-HttpClient/4.5.7 (Java/11.0.1) \nDEBUG o.a.h.headers     http-outgoing-1 &gt;&gt; Accept-Encoding: gzip,deflate \n</code></pre>\n\n<p>please note that <a href=\"http://host.com\" rel=\"noreferrer\">http://host.com</a> was replaced by http:/host.com (notice the missing second /). This will cause the request to fail. </p>\n\n<p>How can I stop http client from \"fixing\" the url that I pass to it? </p>\n"},{"tags":["java","xml","xslt"],"answers":[{"tags":[],"owner":{"account_id":91947,"reputation":161814,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1638901351,"creation_date":1638900623,"answer_id":70265010,"question_id":70264903,"body_markdown":"Try to make the DocumentBuilderFactory  namespace aware by calling the method https://docs.oracle.com/javase/8/docs/api/javax/xml/parsers/DocumentBuilderFactory.html#setNamespaceAware-boolean- for that before creating the DocumentBuilder and parsing XML input:\r\n\r\n    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n    factory.setNamespaceAware(true);\r\n    DocumentBuilder builder = factory.newDocumentBuilder();\r\n    ...\r\n\r\n","title":"Not able to write XML data in CSV file using XSL","body":"<p>Try to make the DocumentBuilderFactory  namespace aware by calling the method <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/xml/parsers/DocumentBuilderFactory.html#setNamespaceAware-boolean-\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/javax/xml/parsers/DocumentBuilderFactory.html#setNamespaceAware-boolean-</a> for that before creating the DocumentBuilder and parsing XML input:</p>\n<pre><code>DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\nfactory.setNamespaceAware(true);\nDocumentBuilder builder = factory.newDocumentBuilder();\n...\n</code></pre>\n"}],"owner":{"account_id":7635415,"reputation":37,"user_id":5789120,"display_name":"kathir43"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":70265010,"answer_count":1,"score":-1,"last_activity_date":1638901351,"creation_date":1638900075,"question_id":70264903,"body_markdown":"    I have a XML file like this:\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\r\n    &lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot; xmlns:ext=&quot;http://www.liquibase.org/xml/ns/dbchangelog-ext&quot; xmlns:pro=&quot;http://www.liquibase.org/xml/ns/pro&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.1.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.1.xsd&quot;&gt;\r\n        &lt;changeSet author=&quot;253503 (generated)&quot; id=&quot;1638881200824-1&quot;&gt;\r\n            &lt;insert tableName=&quot;sampletable&quot;&gt;\r\n                &lt;column name=&quot;id&quot; valueNumeric=&quot;2&quot;/&gt;\r\n                &lt;column name=&quot;name&quot; value=&quot;k&quot;/&gt;\r\n                &lt;column name=&quot;active&quot; valueBoolean=&quot;true&quot;/&gt;\r\n                &lt;column name=&quot;age&quot; valueNumeric=&quot;2&quot;/&gt;\r\n            &lt;/insert&gt;\r\n            &lt;insert tableName=&quot;sampletable&quot;&gt;\r\n                &lt;column name=&quot;id&quot; valueNumeric=&quot;23&quot;/&gt;\r\n                &lt;column name=&quot;name&quot; value=&quot;kathir&quot;/&gt;\r\n                &lt;column name=&quot;active&quot; valueBoolean=&quot;true&quot;/&gt;\r\n                &lt;column name=&quot;age&quot; valueNumeric=&quot;29&quot;/&gt;\r\n            &lt;/insert&gt;\r\n            &lt;insert tableName=&quot;sampletable&quot;&gt;\r\n                &lt;column name=&quot;id&quot; valueNumeric=&quot;24&quot;/&gt;\r\n                &lt;column name=&quot;name&quot; value=&quot;gowtham&quot;/&gt;\r\n                &lt;column name=&quot;active&quot; valueBoolean=&quot;true&quot;/&gt;\r\n                &lt;column name=&quot;age&quot; valueNumeric=&quot;28&quot;/&gt;\r\n            &lt;/insert&gt;\r\n            &lt;insert tableName=&quot;sampletable&quot;&gt;\r\n                &lt;column name=&quot;id&quot; valueNumeric=&quot;25&quot;/&gt;\r\n                &lt;column name=&quot;name&quot; value=&quot;varshan&quot;/&gt;\r\n                &lt;column name=&quot;active&quot; valueBoolean=&quot;false&quot;/&gt;\r\n                &lt;column name=&quot;age&quot; valueNumeric=&quot;5&quot;/&gt;\r\n            &lt;/insert&gt;\r\n            &lt;insert tableName=&quot;sampletable&quot;&gt;\r\n                &lt;column name=&quot;id&quot; valueNumeric=&quot;45&quot;/&gt;\r\n                &lt;column name=&quot;name&quot; value=&quot;heal&quot;/&gt;\r\n                &lt;column name=&quot;active&quot; valueBoolean=&quot;true&quot;/&gt;\r\n                &lt;column name=&quot;age&quot; valueNumeric=&quot;65&quot;/&gt;\r\n            &lt;/insert&gt;\r\n        &lt;/changeSet&gt;\r\n    &lt;/databaseChangeLog&gt;\r\n    \r\n    And my XSL file is:\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\r\n        xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n        xmlns:dbc=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot;\r\n        version=&quot;1.0&quot;&gt;\r\n    \r\n      &lt;xsl:output method=&quot;text&quot;/&gt;\r\n    \r\n      &lt;xsl:template match=&quot;/&quot;&gt;\r\n        &lt;!-- Header --&gt;\r\n        &lt;xsl:apply-templates select=&quot;dbc:databaseChangeLog/dbc:changeSet/dbc:insert[1]&quot;&gt;\r\n          &lt;xsl:with-param name=&quot;header&quot;&gt;true&lt;/xsl:with-param&gt;\r\n        &lt;/xsl:apply-templates&gt;\r\n        &lt;!-- Data --&gt;\r\n        &lt;xsl:apply-templates select=&quot;dbc:databaseChangeLog/dbc:changeSet/dbc:insert&quot;/&gt;\r\n      &lt;/xsl:template&gt;\r\n      \r\n      &lt;xsl:template match=&quot;dbc:insert&quot;&gt;\r\n        &lt;xsl:param name=&quot;header&quot;/&gt;\r\n        &lt;xsl:for-each select=&quot;dbc:column&quot;&gt;\r\n          &lt;!-- For the header take the name attribute, else take the attribute starting with value--&gt;\r\n          &lt;xsl:choose&gt;\r\n            &lt;xsl:when test=&quot;$header=&#39;true&#39;&quot;&gt;\r\n              &lt;xsl:value-of select=&quot;@name&quot;/&gt;\r\n            &lt;/xsl:when&gt;\r\n            &lt;xsl:otherwise&gt;\r\n              &lt;xsl:value-of select=&quot;@*[starts-with(name(),&#39;value&#39;)]&quot;/&gt;\r\n            &lt;/xsl:otherwise&gt;\r\n          &lt;/xsl:choose&gt;\r\n          &lt;!-- Insert comma between values, except for last value insert new line --&gt;\r\n          &lt;xsl:choose&gt;\r\n            &lt;xsl:when test=&quot;position()=last()&quot;&gt;\r\n              &lt;xsl:text&gt;&amp;#xa;&lt;/xsl:text&gt;\r\n            &lt;/xsl:when&gt;\r\n            &lt;xsl:otherwise&gt;\r\n              &lt;xsl:text&gt;,&lt;/xsl:text&gt;\r\n            &lt;/xsl:otherwise&gt;\r\n          &lt;/xsl:choose&gt;\r\n        &lt;/xsl:for-each&gt;\r\n      &lt;/xsl:template&gt;  \r\n    &lt;/xsl:stylesheet&gt;\r\n    \r\n    my Java code is :\r\n     public static void main(String args[]) throws Exception { \r\n    \t    \tFile stylesheet = new File(&quot;NewStylesheet1.xsl&quot;);\r\n    \t        File xmlSource = new File(&quot;db.changelog9.xml&quot;);\r\n    \r\n    \t        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n    \t        DocumentBuilder builder = factory.newDocumentBuilder();\r\n    \t        Document document = builder.parse(xmlSource);\r\n    \r\n    \t        StreamSource stylesource = new StreamSource(stylesheet);\r\n    \t        Transformer transformer = TransformerFactory.newInstance()\r\n    \t                .newTransformer(stylesource);\r\n    \t        Source source = new DOMSource(document);\r\n    \t        Result outputTarget = new StreamResult(new File(&quot;/tmp/x.csv&quot;));\r\n    \t        transformer.transform(source, outputTarget);\r\n    \t    \t}\r\nI am to perform direct transformation(i.e. Right click on XML file -&gt; Run as XSLT transformation and add the XSL file) and it generates the output as expected like below:\r\nid,name,active,age\r\n2,k,true,2\r\n23,kathir,true,29\r\n24,gowtham,true,28\r\n25,varshan,false,5\r\n45,heal,true,65\r\n    \r\nBut when I try to perform the same action using the java code it is not able to write the values in CSV file. It returns an empty file without any values. Can someone help with resolving the issue?\r\n\r\n","title":"Not able to write XML data in CSV file using XSL","body":"<pre><code>I have a XML file like this:\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\n&lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot; xmlns:ext=&quot;http://www.liquibase.org/xml/ns/dbchangelog-ext&quot; xmlns:pro=&quot;http://www.liquibase.org/xml/ns/pro&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.1.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.1.xsd&quot;&gt;\n    &lt;changeSet author=&quot;253503 (generated)&quot; id=&quot;1638881200824-1&quot;&gt;\n        &lt;insert tableName=&quot;sampletable&quot;&gt;\n            &lt;column name=&quot;id&quot; valueNumeric=&quot;2&quot;/&gt;\n            &lt;column name=&quot;name&quot; value=&quot;k&quot;/&gt;\n            &lt;column name=&quot;active&quot; valueBoolean=&quot;true&quot;/&gt;\n            &lt;column name=&quot;age&quot; valueNumeric=&quot;2&quot;/&gt;\n        &lt;/insert&gt;\n        &lt;insert tableName=&quot;sampletable&quot;&gt;\n            &lt;column name=&quot;id&quot; valueNumeric=&quot;23&quot;/&gt;\n            &lt;column name=&quot;name&quot; value=&quot;kathir&quot;/&gt;\n            &lt;column name=&quot;active&quot; valueBoolean=&quot;true&quot;/&gt;\n            &lt;column name=&quot;age&quot; valueNumeric=&quot;29&quot;/&gt;\n        &lt;/insert&gt;\n        &lt;insert tableName=&quot;sampletable&quot;&gt;\n            &lt;column name=&quot;id&quot; valueNumeric=&quot;24&quot;/&gt;\n            &lt;column name=&quot;name&quot; value=&quot;gowtham&quot;/&gt;\n            &lt;column name=&quot;active&quot; valueBoolean=&quot;true&quot;/&gt;\n            &lt;column name=&quot;age&quot; valueNumeric=&quot;28&quot;/&gt;\n        &lt;/insert&gt;\n        &lt;insert tableName=&quot;sampletable&quot;&gt;\n            &lt;column name=&quot;id&quot; valueNumeric=&quot;25&quot;/&gt;\n            &lt;column name=&quot;name&quot; value=&quot;varshan&quot;/&gt;\n            &lt;column name=&quot;active&quot; valueBoolean=&quot;false&quot;/&gt;\n            &lt;column name=&quot;age&quot; valueNumeric=&quot;5&quot;/&gt;\n        &lt;/insert&gt;\n        &lt;insert tableName=&quot;sampletable&quot;&gt;\n            &lt;column name=&quot;id&quot; valueNumeric=&quot;45&quot;/&gt;\n            &lt;column name=&quot;name&quot; value=&quot;heal&quot;/&gt;\n            &lt;column name=&quot;active&quot; valueBoolean=&quot;true&quot;/&gt;\n            &lt;column name=&quot;age&quot; valueNumeric=&quot;65&quot;/&gt;\n        &lt;/insert&gt;\n    &lt;/changeSet&gt;\n&lt;/databaseChangeLog&gt;\n\nAnd my XSL file is:\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\n    xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\n    xmlns:dbc=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot;\n    version=&quot;1.0&quot;&gt;\n\n  &lt;xsl:output method=&quot;text&quot;/&gt;\n\n  &lt;xsl:template match=&quot;/&quot;&gt;\n    &lt;!-- Header --&gt;\n    &lt;xsl:apply-templates select=&quot;dbc:databaseChangeLog/dbc:changeSet/dbc:insert[1]&quot;&gt;\n      &lt;xsl:with-param name=&quot;header&quot;&gt;true&lt;/xsl:with-param&gt;\n    &lt;/xsl:apply-templates&gt;\n    &lt;!-- Data --&gt;\n    &lt;xsl:apply-templates select=&quot;dbc:databaseChangeLog/dbc:changeSet/dbc:insert&quot;/&gt;\n  &lt;/xsl:template&gt;\n  \n  &lt;xsl:template match=&quot;dbc:insert&quot;&gt;\n    &lt;xsl:param name=&quot;header&quot;/&gt;\n    &lt;xsl:for-each select=&quot;dbc:column&quot;&gt;\n      &lt;!-- For the header take the name attribute, else take the attribute starting with value--&gt;\n      &lt;xsl:choose&gt;\n        &lt;xsl:when test=&quot;$header='true'&quot;&gt;\n          &lt;xsl:value-of select=&quot;@name&quot;/&gt;\n        &lt;/xsl:when&gt;\n        &lt;xsl:otherwise&gt;\n          &lt;xsl:value-of select=&quot;@*[starts-with(name(),'value')]&quot;/&gt;\n        &lt;/xsl:otherwise&gt;\n      &lt;/xsl:choose&gt;\n      &lt;!-- Insert comma between values, except for last value insert new line --&gt;\n      &lt;xsl:choose&gt;\n        &lt;xsl:when test=&quot;position()=last()&quot;&gt;\n          &lt;xsl:text&gt;&amp;#xa;&lt;/xsl:text&gt;\n        &lt;/xsl:when&gt;\n        &lt;xsl:otherwise&gt;\n          &lt;xsl:text&gt;,&lt;/xsl:text&gt;\n        &lt;/xsl:otherwise&gt;\n      &lt;/xsl:choose&gt;\n    &lt;/xsl:for-each&gt;\n  &lt;/xsl:template&gt;  \n&lt;/xsl:stylesheet&gt;\n\nmy Java code is :\n public static void main(String args[]) throws Exception { \n            File stylesheet = new File(&quot;NewStylesheet1.xsl&quot;);\n            File xmlSource = new File(&quot;db.changelog9.xml&quot;);\n\n            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n            DocumentBuilder builder = factory.newDocumentBuilder();\n            Document document = builder.parse(xmlSource);\n\n            StreamSource stylesource = new StreamSource(stylesheet);\n            Transformer transformer = TransformerFactory.newInstance()\n                    .newTransformer(stylesource);\n            Source source = new DOMSource(document);\n            Result outputTarget = new StreamResult(new File(&quot;/tmp/x.csv&quot;));\n            transformer.transform(source, outputTarget);\n            }\n</code></pre>\n<p>I am to perform direct transformation(i.e. Right click on XML file -&gt; Run as XSLT transformation and add the XSL file) and it generates the output as expected like below:\nid,name,active,age\n2,k,true,2\n23,kathir,true,29\n24,gowtham,true,28\n25,varshan,false,5\n45,heal,true,65</p>\n<p>But when I try to perform the same action using the java code it is not able to write the values in CSV file. It returns an empty file without any values. Can someone help with resolving the issue?</p>\n"},{"tags":["java","azure","apache-beam"],"answers":[{"tags":[],"owner":{"account_id":14798284,"reputation":1363,"user_id":10687325,"display_name":"Alexey Romanenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1638901175,"creation_date":1638901175,"answer_id":70265123,"question_id":70254824,"body_markdown":"I guess it can be caused by the fact that `TokenCredentialSerializer` is [implemented][1] only in Beam 2.33.0. Could you upgrade your Beam dependencies to, at least, Beam 2.33.0 and see if it will solve a problem? \r\n\r\n\r\n  [1]: https://issues.apache.org/jira/browse/BEAM-12428","title":"How to upload a file to Azure blob Storage by Apache Beam?","body":"<p>I guess it can be caused by the fact that <code>TokenCredentialSerializer</code> is <a href=\"https://issues.apache.org/jira/browse/BEAM-12428\" rel=\"nofollow noreferrer\">implemented</a> only in Beam 2.33.0. Could you upgrade your Beam dependencies to, at least, Beam 2.33.0 and see if it will solve a problem?</p>\n"}],"owner":{"account_id":5630539,"reputation":129,"user_id":4457621,"display_name":"Yukino Ikegami"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":328,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70265123,"answer_count":1,"score":1,"last_activity_date":1638901175,"creation_date":1638849973,"question_id":70254824,"body_markdown":"I want to upload a file to Azure blob by Apache Beam.\r\nBut, I can&#39;t it. Why?\r\n\r\nI set the correct environment variables.\r\n\r\n`az` command is OK:\r\n\r\n```\r\n$ az storage blob upload \\\r\n-c AZURE_STORAGE_CONTAINER_NAME \\\r\n-f example.json -n example.json \\\r\n--account-name $AZURE_STORAGE_ACCOUNT \\\r\n--account-key $AZURE_STORAGE_KEY                                                                        \r\nFinished[#############################################################]  100.0000%\r\n{\r\n  &quot;etag&quot;: &quot;\\&quot;0x8D9B92C4C0BE870\\&quot;&quot;,\r\n  &quot;lastModified&quot;: &quot;2021-12-07T02:50:15+00:00&quot;\r\n}\r\n```\r\n\r\nBut, the following command run:\r\n\r\n```\r\n$ mvn compile exec:java -Dexec.mainClass=jp.example.Indexer \\\r\n-Dexec.args=&quot;--runner=DirectRunner \\\r\n--destination=azfs://$AZURE_STORAGE_ACCOUNT/$AZURE_STORAGE_CONTAINER_NAME/example.json \\\r\n--source=example.json \\\r\n--azureConnectionString=$AZURE_CONNECTION_STRING \\\r\n--sasToken=$AZURE_STORAGE_SAS_TOKEN \\\r\n--accessKey=$AZURE_STORAGE_KEY \\\r\n--accountName=$AZURE_STORAGE_ACCOUNT\r\n```\r\n\r\nThen, the following errors occur:\r\n\r\n```\r\n[WARNING] \r\njava.lang.IllegalArgumentException: PipelineOptions specified failed to serialize to JSON.\r\n    at org.apache.beam.runners.direct.DirectRunner.run (DirectRunner.java:171)\r\n    at org.apache.beam.runners.direct.DirectRunner.run (DirectRunner.java:67)\r\n    at org.apache.beam.sdk.Pipeline.run (Pipeline.java:323)\r\n    at org.apache.beam.sdk.Pipeline.run (Pipeline.java:309)\r\n    at jp.example.Indexer.main (Indexer.java:24)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:566)\r\n    at org.codehaus.mojo.exec.ExecJavaMojo$1.run (ExecJavaMojo.java:282)\r\n    at java.lang.Thread.run (Thread.java:829)\r\nCaused by: com.fasterxml.jackson.databind.JsonMappingException: Unexpected IOException (of type java.io.IOException): Failed to serialize and deserialize property &#39;azureCredentialsProvider&#39; with value &#39;com.azure.identity.DefaultAzureCredential@3e88886c&#39;\r\n    at com.fasterxml.jackson.databind.JsonMappingException.fromUnexpectedIOE (JsonMappingException.java:334)\r\n    at com.fasterxml.jackson.databind.ObjectMapper.writeValueAsBytes (ObjectMapper.java:3769)\r\n    at org.apache.beam.runners.direct.DirectRunner.run (DirectRunner.java:168)\r\n    at org.apache.beam.runners.direct.DirectRunner.run (DirectRunner.java:67)\r\n    at org.apache.beam.sdk.Pipeline.run (Pipeline.java:323)\r\n    at org.apache.beam.sdk.Pipeline.run (Pipeline.java:309)\r\n    at jp.example.Indexer.main (Indexer.java:24)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:566)\r\n    at org.codehaus.mojo.exec.ExecJavaMojo$1.run (ExecJavaMojo.java:282)\r\n    at java.lang.Thread.run (Thread.java:829)\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  13.564 s\r\n[INFO] Finished at: 2021-12-07T11:58:57+09:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.6.0:java (default-cli) on project Indexer: An exception occured while executing the Java class. PipelineOptions specified failed to serialize to JSON.: Unexpected IOException (of type java.io.IOException): Failed to serialize and deserialize property &#39;azureCredentialsProvider&#39; with value &#39;com.azure.identity.DefaultAzureCredential@3e88886c&#39; -&gt; [Help 1]\r\n[ERROR] \r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR] \r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n```\r\n\r\n`Indexer.java` is here.\r\n\r\n```java\r\npackage jp. example;\r\n\r\nimport java.util.logging.Logger;\r\nimport org.apache.beam.sdk.Pipeline;\r\nimport org.apache.beam.sdk.io.TextIO;\r\nimport org.apache.beam.sdk.options.PipelineOptionsFactory;\r\nimport org.apache.beam.sdk.values.PCollection;\r\n\r\n\r\npublic class Indexer {\r\n\r\n    private static final Logger LOG = Logger.getLogger(Indexer.class.getName());\r\n\r\n    public static void main(String[] args) {\r\n        ToAzurePipelineOptions options = PipelineOptionsFactory.fromArgs(args)\r\n                .withValidation()\r\n                .as(ToAzurePipelineOptions.class);\r\n        Pipeline p = Pipeline.create(options);\r\n\r\n        PCollection&lt;String&gt; lines = p.apply(TextIO.read().from(options.getSource()));\r\n\r\n        lines.apply(TextIO.write().to(options.getDestination()));\r\n\r\n        p.run();\r\n    }\r\n}\r\n```\r\n\r\n`ToAzurePipelineOptions.java` is here.\r\n\r\n```java\r\npackage jp.example;\r\n\r\nimport org.apache.beam.runners.dataflow.options.DataflowPipelineOptions;\r\nimport org.apache.beam.sdk.io.azure.options.BlobstoreOptions;\r\nimport org.apache.beam.sdk.options.Default;\r\nimport org.apache.beam.sdk.options.Description;\r\n\r\npublic interface ToAzurePipelineOptions extends DataflowPipelineOptions, BlobstoreOptions{\r\n\r\n    @Description(&quot;Root path of data files&quot;)\r\n    @Default.String(&quot;file://hoge&quot;)\r\n    String getSource();\r\n\r\n    void setSource(String value);\r\n\r\n    @Description(&quot;Address of Azure Storage&quot;)\r\n    @Default.String(&quot;azfs://hoge&quot;)\r\n    String getDestination();\r\n\r\n    void setDestination(String value);\r\n}\r\n```\r\n\r\nThe versions of `beam-sdks-java-io-azure` and `beam-sdks-java-core` are `2.31.0`.","title":"How to upload a file to Azure blob Storage by Apache Beam?","body":"<p>I want to upload a file to Azure blob by Apache Beam.\nBut, I can't it. Why?</p>\n<p>I set the correct environment variables.</p>\n<p><code>az</code> command is OK:</p>\n<pre><code>$ az storage blob upload \\\n-c AZURE_STORAGE_CONTAINER_NAME \\\n-f example.json -n example.json \\\n--account-name $AZURE_STORAGE_ACCOUNT \\\n--account-key $AZURE_STORAGE_KEY                                                                        \nFinished[#############################################################]  100.0000%\n{\n  &quot;etag&quot;: &quot;\\&quot;0x8D9B92C4C0BE870\\&quot;&quot;,\n  &quot;lastModified&quot;: &quot;2021-12-07T02:50:15+00:00&quot;\n}\n</code></pre>\n<p>But, the following command run:</p>\n<pre><code>$ mvn compile exec:java -Dexec.mainClass=jp.example.Indexer \\\n-Dexec.args=&quot;--runner=DirectRunner \\\n--destination=azfs://$AZURE_STORAGE_ACCOUNT/$AZURE_STORAGE_CONTAINER_NAME/example.json \\\n--source=example.json \\\n--azureConnectionString=$AZURE_CONNECTION_STRING \\\n--sasToken=$AZURE_STORAGE_SAS_TOKEN \\\n--accessKey=$AZURE_STORAGE_KEY \\\n--accountName=$AZURE_STORAGE_ACCOUNT\n</code></pre>\n<p>Then, the following errors occur:</p>\n<pre><code>[WARNING] \njava.lang.IllegalArgumentException: PipelineOptions specified failed to serialize to JSON.\n    at org.apache.beam.runners.direct.DirectRunner.run (DirectRunner.java:171)\n    at org.apache.beam.runners.direct.DirectRunner.run (DirectRunner.java:67)\n    at org.apache.beam.sdk.Pipeline.run (Pipeline.java:323)\n    at org.apache.beam.sdk.Pipeline.run (Pipeline.java:309)\n    at jp.example.Indexer.main (Indexer.java:24)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:566)\n    at org.codehaus.mojo.exec.ExecJavaMojo$1.run (ExecJavaMojo.java:282)\n    at java.lang.Thread.run (Thread.java:829)\nCaused by: com.fasterxml.jackson.databind.JsonMappingException: Unexpected IOException (of type java.io.IOException): Failed to serialize and deserialize property 'azureCredentialsProvider' with value 'com.azure.identity.DefaultAzureCredential@3e88886c'\n    at com.fasterxml.jackson.databind.JsonMappingException.fromUnexpectedIOE (JsonMappingException.java:334)\n    at com.fasterxml.jackson.databind.ObjectMapper.writeValueAsBytes (ObjectMapper.java:3769)\n    at org.apache.beam.runners.direct.DirectRunner.run (DirectRunner.java:168)\n    at org.apache.beam.runners.direct.DirectRunner.run (DirectRunner.java:67)\n    at org.apache.beam.sdk.Pipeline.run (Pipeline.java:323)\n    at org.apache.beam.sdk.Pipeline.run (Pipeline.java:309)\n    at jp.example.Indexer.main (Indexer.java:24)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:566)\n    at org.codehaus.mojo.exec.ExecJavaMojo$1.run (ExecJavaMojo.java:282)\n    at java.lang.Thread.run (Thread.java:829)\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  13.564 s\n[INFO] Finished at: 2021-12-07T11:58:57+09:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.6.0:java (default-cli) on project Indexer: An exception occured while executing the Java class. PipelineOptions specified failed to serialize to JSON.: Unexpected IOException (of type java.io.IOException): Failed to serialize and deserialize property 'azureCredentialsProvider' with value 'com.azure.identity.DefaultAzureCredential@3e88886c' -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n</code></pre>\n<p><code>Indexer.java</code> is here.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package jp. example;\n\nimport java.util.logging.Logger;\nimport org.apache.beam.sdk.Pipeline;\nimport org.apache.beam.sdk.io.TextIO;\nimport org.apache.beam.sdk.options.PipelineOptionsFactory;\nimport org.apache.beam.sdk.values.PCollection;\n\n\npublic class Indexer {\n\n    private static final Logger LOG = Logger.getLogger(Indexer.class.getName());\n\n    public static void main(String[] args) {\n        ToAzurePipelineOptions options = PipelineOptionsFactory.fromArgs(args)\n                .withValidation()\n                .as(ToAzurePipelineOptions.class);\n        Pipeline p = Pipeline.create(options);\n\n        PCollection&lt;String&gt; lines = p.apply(TextIO.read().from(options.getSource()));\n\n        lines.apply(TextIO.write().to(options.getDestination()));\n\n        p.run();\n    }\n}\n</code></pre>\n<p><code>ToAzurePipelineOptions.java</code> is here.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package jp.example;\n\nimport org.apache.beam.runners.dataflow.options.DataflowPipelineOptions;\nimport org.apache.beam.sdk.io.azure.options.BlobstoreOptions;\nimport org.apache.beam.sdk.options.Default;\nimport org.apache.beam.sdk.options.Description;\n\npublic interface ToAzurePipelineOptions extends DataflowPipelineOptions, BlobstoreOptions{\n\n    @Description(&quot;Root path of data files&quot;)\n    @Default.String(&quot;file://hoge&quot;)\n    String getSource();\n\n    void setSource(String value);\n\n    @Description(&quot;Address of Azure Storage&quot;)\n    @Default.String(&quot;azfs://hoge&quot;)\n    String getDestination();\n\n    void setDestination(String value);\n}\n</code></pre>\n<p>The versions of <code>beam-sdks-java-io-azure</code> and <code>beam-sdks-java-core</code> are <code>2.31.0</code>.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1441481,"reputation":10825,"user_id":1361506,"display_name":"azurefrog"},"score":1,"creation_date":1638899815,"post_id":70264833,"comment_id":124208688,"body_markdown":"What do you expect to return if **none** of the if / else-if statements is true?","body":"What do you expect to return if <b>none</b> of the if / else-if statements is true?"},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":1,"creation_date":1638900192,"post_id":70264833,"comment_id":124208836,"body_markdown":"Consider adding curly braces (even for a one-liner block), which will clarify the code structure, and make it more obvious what is missing.","body":"Consider adding curly braces (even for a one-liner block), which will clarify the code structure, and make it more obvious what is missing."}],"answers":[{"tags":[],"owner":{"account_id":3993139,"reputation":2383,"user_id":3291390,"display_name":"Stack Underflow"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1638900087,"creation_date":1638900087,"answer_id":70264905,"question_id":70264833,"body_markdown":"At the end of all your if/else conditions, add a final else to handle invalid input.\r\n\r\n```\r\n...\r\nelse {\r\n    return &quot;Error: Unable to check triangle.&quot;;\r\n}\r\n```","title":"My code is not compiling because of a &quot;missing return statement&quot; error but I do not understand why?","body":"<p>At the end of all your if/else conditions, add a final else to handle invalid input.</p>\n<pre><code>...\nelse {\n    return &quot;Error: Unable to check triangle.&quot;;\n}\n</code></pre>\n"}],"owner":{"account_id":23578005,"reputation":1,"user_id":17617414,"display_name":"Vatana Chea"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1638900228,"answer_count":1,"score":-1,"last_activity_date":1638900993,"creation_date":1638899776,"question_id":70264833,"body_markdown":"```\r\n   public static String triangleCheck(){ // Triangle Method\r\n      Scanner scan = new Scanner(System.in);\r\n      \r\n            System.out.print(&quot;What is the length of side 1? &quot;);\r\n            int side1 = scan.nextInt();\r\n            System.out.print(&quot;what is the length of side 2? &quot;);\r\n            int side2 = scan.nextInt();\r\n            System.out.print(&quot;What is the length of side 3? &quot;);\r\n            int side3 = scan.nextInt();\r\n\r\n      if (!(side1+side2&gt;side3 &amp;&amp; side2+side3&gt;side1 &amp;&amp; side3+side1&gt;side2))\r\n         return &quot; However your measure don&#39;t quite make a full triangle. &quot;;\r\n         \r\n      else if ((side1 &gt; side2) &amp;&amp; (side1 &gt; side3))\r\n         if(side1*side1 == side2*side2 + side3*side3)\r\n            return &quot;It is a right triangle.&quot;;\r\n         else if((side1*side1) &gt; side2*side2 + side3*side3)\r\n            return &quot;It is an obtuse triangle.&quot;;\r\n         else \r\n            return &quot;It is an acute triangle.&quot;;\r\n            \r\n      else if ((side2 &gt; side1) &amp;&amp; (side2 &gt; side3))\r\n         if(side2*side2 == side1*side1 + side3*side3)\r\n            return &quot;It is a right triangle.&quot;;\r\n            else if((side2*side2) &gt; side1*side1 + side3*side3)\r\n               return &quot;It is an obtuse triangle.&quot;;\r\n         else \r\n            return &quot;It is an acute triangle.&quot;;\r\n      \r\n      else if ((side3 &gt; side1) &amp;&amp; (side3 &gt; side2))\r\n            if (side2*side2 == side1*side1 + side3*side3)\r\n               return &quot;It is a right triangle.&quot;;\r\n            else if((side2*side2) &gt; side1*side1 + side3*side3)\r\n               return &quot;It is an obtuse triangle.&quot;;\r\n            else \r\n               return &quot;It is an acute triangle.&quot;;\r\n}\r\n```\r\nThis is my method for my program I&#39;m trying to run my code but it won&#39;t run it says error: missing return statement &quot;}&quot;, I think this if/else part is the problem but I can&#39;t figure out where I did wrong and how I could fix it","title":"My code is not compiling because of a &quot;missing return statement&quot; error but I do not understand why?","body":"<pre><code>   public static String triangleCheck(){ // Triangle Method\n      Scanner scan = new Scanner(System.in);\n      \n            System.out.print(&quot;What is the length of side 1? &quot;);\n            int side1 = scan.nextInt();\n            System.out.print(&quot;what is the length of side 2? &quot;);\n            int side2 = scan.nextInt();\n            System.out.print(&quot;What is the length of side 3? &quot;);\n            int side3 = scan.nextInt();\n\n      if (!(side1+side2&gt;side3 &amp;&amp; side2+side3&gt;side1 &amp;&amp; side3+side1&gt;side2))\n         return &quot; However your measure don't quite make a full triangle. &quot;;\n         \n      else if ((side1 &gt; side2) &amp;&amp; (side1 &gt; side3))\n         if(side1*side1 == side2*side2 + side3*side3)\n            return &quot;It is a right triangle.&quot;;\n         else if((side1*side1) &gt; side2*side2 + side3*side3)\n            return &quot;It is an obtuse triangle.&quot;;\n         else \n            return &quot;It is an acute triangle.&quot;;\n            \n      else if ((side2 &gt; side1) &amp;&amp; (side2 &gt; side3))\n         if(side2*side2 == side1*side1 + side3*side3)\n            return &quot;It is a right triangle.&quot;;\n            else if((side2*side2) &gt; side1*side1 + side3*side3)\n               return &quot;It is an obtuse triangle.&quot;;\n         else \n            return &quot;It is an acute triangle.&quot;;\n      \n      else if ((side3 &gt; side1) &amp;&amp; (side3 &gt; side2))\n            if (side2*side2 == side1*side1 + side3*side3)\n               return &quot;It is a right triangle.&quot;;\n            else if((side2*side2) &gt; side1*side1 + side3*side3)\n               return &quot;It is an obtuse triangle.&quot;;\n            else \n               return &quot;It is an acute triangle.&quot;;\n}\n</code></pre>\n<p>This is my method for my program I'm trying to run my code but it won't run it says error: missing return statement &quot;}&quot;, I think this if/else part is the problem but I can't figure out where I did wrong and how I could fix it</p>\n"},{"tags":["java","eclipse","class"],"answers":[{"tags":[],"owner":{"account_id":22283160,"reputation":107,"user_id":16511253,"display_name":"Emad Ali"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638900978,"creation_date":1638051308,"answer_id":70139109,"question_id":70139055,"body_markdown":"I see a problem in `getSale()` where you are trying to use `userBagWeight`, but that variable doesn&#39;t exist outside the constructor parameters, which could create a lot of problems since other `methods` are calling on it. The constructor taking\r\n`double userBagWeight, double userBagNumber`, yet it&#39;s not assigning them to any fields or doing anything with them.\r\n\r\nI missed the part where you are treating `Sale()` as a `constructor`, but those are no `constructors`. The `constructor` is named after your class name.\r\n\r\n    public secondarySetUp(double userBagWeight, double userBagNumber)\r\nchange `Sale()` to `secondarySetUp` and you will be fine.\r\n\r\nhere how your class should be like :\r\n\r\n    public class secondarySetUp {\r\n    \r\n    // Constants\r\n    static double pricePerPound = 5.99;\r\n    static double taxRate = 0.0725;\r\n    \r\n    int singleBagger, pounderBagger;\r\n    double userBagWeight, userBagNumber;\r\n    public secondarySetUp(double userBagWeight, double userBagNumber) {\r\n        this.userBagWeight = userBagWeight;\r\n        this.userBagNumber = userBagNumber;\r\n\r\n        singleBagger = 1;\r\n        pounderBagger = 1;\r\n        \r\n        \r\n        \r\n    //  A method named getTaxRate() that returns the tax rate.  \r\n        \r\n        System.out.printf(&quot;\\nPrice per Pound: $%2.2f&quot;, getPrice());\r\n        System.out.printf(&quot;\\nSales Tax: $%2.2f&quot;, getTaxRate());\r\n        System.out.print(&quot; %&quot;);\r\n        System.out.printf(&quot;\\nPrice of one bag weighing one pound: %3.2f&quot;, getSale());\r\n        \r\n    }\r\n    // First constructor receiving No argument pricing\r\n    public secondarySetUp(int w, int n) {\r\n            singleBagger = w;\r\n            pounderBagger = n;\r\n        }\r\n    // Sale without tax\r\n    public double getSale() {\r\n        return userBagWeight * singleBagger * pounderBagger;\r\n    }\r\n    // Get Sale Tax\r\n    public double getSaleTax() {\r\n        return (getSale() * taxRate);\r\n    }\r\n    // Get total pricing\r\n    public double getTotalPrice() {\r\n        return (getSale() + getSaleTax());\r\n    }\r\n    public double getPrice() {\r\n        return pricePerPound;\r\n    }\r\n    public double getTaxRate() {\r\n        return taxRate * 100;\r\n    }\r\n}\r\n\r\n`this` is a keyword to tell the program that we want to use the field &quot;instance variable&quot;, if we have a method with `parameter` that have same name as a field name, then to tell them apart we tell the program `this.fieldName` to know which one we talking about.","title":"Struggles in using multiple classes","body":"<p>I see a problem in <code>getSale()</code> where you are trying to use <code>userBagWeight</code>, but that variable doesn't exist outside the constructor parameters, which could create a lot of problems since other <code>methods</code> are calling on it. The constructor taking\n<code>double userBagWeight, double userBagNumber</code>, yet it's not assigning them to any fields or doing anything with them.</p>\n<p>I missed the part where you are treating <code>Sale()</code> as a <code>constructor</code>, but those are no <code>constructors</code>. The <code>constructor</code> is named after your class name.</p>\n<pre><code>public secondarySetUp(double userBagWeight, double userBagNumber)\n</code></pre>\n<p>change <code>Sale()</code> to <code>secondarySetUp</code> and you will be fine.</p>\n<p>here how your class should be like :</p>\n<pre><code>public class secondarySetUp {\n\n// Constants\nstatic double pricePerPound = 5.99;\nstatic double taxRate = 0.0725;\n\nint singleBagger, pounderBagger;\ndouble userBagWeight, userBagNumber;\npublic secondarySetUp(double userBagWeight, double userBagNumber) {\n    this.userBagWeight = userBagWeight;\n    this.userBagNumber = userBagNumber;\n\n    singleBagger = 1;\n    pounderBagger = 1;\n    \n    \n    \n//  A method named getTaxRate() that returns the tax rate.  \n    \n    System.out.printf(&quot;\\nPrice per Pound: $%2.2f&quot;, getPrice());\n    System.out.printf(&quot;\\nSales Tax: $%2.2f&quot;, getTaxRate());\n    System.out.print(&quot; %&quot;);\n    System.out.printf(&quot;\\nPrice of one bag weighing one pound: %3.2f&quot;, getSale());\n    \n}\n// First constructor receiving No argument pricing\npublic secondarySetUp(int w, int n) {\n        singleBagger = w;\n        pounderBagger = n;\n    }\n// Sale without tax\npublic double getSale() {\n    return userBagWeight * singleBagger * pounderBagger;\n}\n// Get Sale Tax\npublic double getSaleTax() {\n    return (getSale() * taxRate);\n}\n// Get total pricing\npublic double getTotalPrice() {\n    return (getSale() + getSaleTax());\n}\npublic double getPrice() {\n    return pricePerPound;\n}\npublic double getTaxRate() {\n    return taxRate * 100;\n}\n</code></pre>\n<p>}</p>\n<p><code>this</code> is a keyword to tell the program that we want to use the field &quot;instance variable&quot;, if we have a method with <code>parameter</code> that have same name as a field name, then to tell them apart we tell the program <code>this.fieldName</code> to know which one we talking about.</p>\n"}],"owner":{"account_id":22762839,"reputation":19,"user_id":16921360,"display_name":"Metiri Magoro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1638900978,"creation_date":1638050693,"question_id":70139055,"body_markdown":"So currently, I&#39;m struggling to make one particular program in eclipse for an assignment, while I am able to make most of the program, I seem to struggle with the no argument part of the program as well as bringing the pieces of the first class into the second for a brief moment. Here is my code for the first class\r\n\r\n    // Preparation of the input\r\n    import java.util.Scanner;\r\n    \r\n    public class primarySetUp {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// Variable Declaration\r\n\t\tdouble userBagNumber;\r\n\t\tdouble userBagWeight;\r\n\t\t\r\n\t\t// Create Scanner\r\n\t\tScanner input = new Scanner(System.in);\r\n\t\tjava.util.Date date = new java.util.Date();\r\n\t\t\r\n\t\t// Opening Statement\r\n\t\tSystem.out.println(&quot;Welcome to the Coffee Sales Simulation!&quot;);\r\n\t\t\r\n\t\t// Get User Input\r\n\t\tSystem.out.println(&quot;How heavy do you want the bags to be?&quot;);\r\n\t\tuserBagWeight = input.nextDouble();\r\n\t\tSystem.out.println(&quot;How many bags do you want?&quot;);\r\n\t\tuserBagNumber = input.nextDouble();\r\n\t\t\r\n\t\t// Get output\r\n\t\t// Date\r\n\t\tSystem.out.println(&quot;Todays date:  &quot;);\r\n\t\tSystem.out.printf(&quot;%tB %&lt;te, %&lt;tY&quot;, date);\r\n\t\tSystem.out.println(&quot;&quot;); // spacer\r\n\t\t// Original Inputs\r\n\t\tSystem.out.printf(&quot;\\nNumber of Bags: %3.0f&quot;, userBagNumber);\r\n\t\tSystem.out.printf(&quot;\\nWeight of Each Bag: %3.2f&quot;, userBagWeight);\r\n\t\tSystem.out.print(&quot; lbs&quot;);\r\n\t\t\r\n\t\t// Calling of the Class\r\n\t\tsecondarySetUp mysecondarySetUp = new secondarySetUp(userBagWeight, userBagNumber);\r\n\t\t\r\n\t\t// End Program\r\n\t\tSystem.out.println(&quot;\\nThank you for shopping with us!&quot;);\r\n\t}\r\n\r\n    }\r\n\r\nand here is my code for the second class, which is full of errors in this case.\r\n\r\n    public class secondarySetUp {\r\n    \t\r\n    \t// Constants\r\n    \tstatic double pricePerPound = 5.99;\r\n    \tstatic double taxRate = 0.0725;\r\n    \t\r\n    \tint singleBagger, pounderBagger;\r\n    \tpublic secondarySetUp(double userBagWeight, double userBagNumber) {\r\n    \t\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t//\tA method named getTaxRate() that returns the tax rate.\t\r\n    \t\t\r\n    \t\tSystem.out.printf(&quot;\\nPrice per Pound: $%2.2f&quot;, getPrice());\r\n    \t\tSystem.out.printf(&quot;\\nSales Tax: $%2.2f&quot;, getTaxRate());\r\n    \t\tSystem.out.print(&quot; %&quot;);\r\n    \t\tSystem.out.printf(&quot;\\nPrice of one bag weighing one pound: %3.2f&quot;, getSale());\r\n    \t\t\r\n    \t}\r\n    \t// No argument pricing\r\n    \tpublic Sale() {\r\n    \t\t\tsingleBagger = 1;\r\n    \t\t\tpounderBagger = 1;\r\n    \t\t}\r\n    \t// First constructor receiving No argument pricing\r\n    \tpublic Sale(int w, int n) {\r\n    \t\t\tsingleBagger = w;\r\n    \t\t\tpounderBagger = n;\r\n    \t\t}\r\n    \t// Sale without tax\r\n    \tpublic double getSale() {\r\n    \t\treturn userBagWeight * singleBagger * pounderBagger;\r\n    \t}\r\n    \t// Get Sale Tax\r\n    \tpublic double getSaleTax() {\r\n    \t\treturn (getSale() * taxRate);\r\n    \t}\r\n    \t// Get total pricing\r\n    \tpublic double getTotalPrice() {\r\n    \t\treturn (getSale() + getSaleTax());\r\n    \t}\r\n    \tpublic double getPrice() {\r\n    \t\treturn pricePerPound;\r\n    \t}\r\n    \tpublic double getTaxRate() {\r\n    \t\treturn taxRate * 100;\r\n    \t}\r\n    }\r\nIf you have any sort of fixes I could apply, please let me know; I am planning on adding the print statements for the rest of the arguments as well, but I&#39;d like to get Sale() fixed up first.\r\n","title":"Struggles in using multiple classes","body":"<p>So currently, I'm struggling to make one particular program in eclipse for an assignment, while I am able to make most of the program, I seem to struggle with the no argument part of the program as well as bringing the pieces of the first class into the second for a brief moment. Here is my code for the first class</p>\n<pre><code>// Preparation of the input\nimport java.util.Scanner;\n\npublic class primarySetUp {\n\npublic static void main(String[] args) {\n    // Variable Declaration\n    double userBagNumber;\n    double userBagWeight;\n    \n    // Create Scanner\n    Scanner input = new Scanner(System.in);\n    java.util.Date date = new java.util.Date();\n    \n    // Opening Statement\n    System.out.println(&quot;Welcome to the Coffee Sales Simulation!&quot;);\n    \n    // Get User Input\n    System.out.println(&quot;How heavy do you want the bags to be?&quot;);\n    userBagWeight = input.nextDouble();\n    System.out.println(&quot;How many bags do you want?&quot;);\n    userBagNumber = input.nextDouble();\n    \n    // Get output\n    // Date\n    System.out.println(&quot;Todays date:  &quot;);\n    System.out.printf(&quot;%tB %&lt;te, %&lt;tY&quot;, date);\n    System.out.println(&quot;&quot;); // spacer\n    // Original Inputs\n    System.out.printf(&quot;\\nNumber of Bags: %3.0f&quot;, userBagNumber);\n    System.out.printf(&quot;\\nWeight of Each Bag: %3.2f&quot;, userBagWeight);\n    System.out.print(&quot; lbs&quot;);\n    \n    // Calling of the Class\n    secondarySetUp mysecondarySetUp = new secondarySetUp(userBagWeight, userBagNumber);\n    \n    // End Program\n    System.out.println(&quot;\\nThank you for shopping with us!&quot;);\n}\n\n}\n</code></pre>\n<p>and here is my code for the second class, which is full of errors in this case.</p>\n<pre><code>public class secondarySetUp {\n    \n    // Constants\n    static double pricePerPound = 5.99;\n    static double taxRate = 0.0725;\n    \n    int singleBagger, pounderBagger;\n    public secondarySetUp(double userBagWeight, double userBagNumber) {\n    \n        \n        \n        \n    //  A method named getTaxRate() that returns the tax rate.  \n        \n        System.out.printf(&quot;\\nPrice per Pound: $%2.2f&quot;, getPrice());\n        System.out.printf(&quot;\\nSales Tax: $%2.2f&quot;, getTaxRate());\n        System.out.print(&quot; %&quot;);\n        System.out.printf(&quot;\\nPrice of one bag weighing one pound: %3.2f&quot;, getSale());\n        \n    }\n    // No argument pricing\n    public Sale() {\n            singleBagger = 1;\n            pounderBagger = 1;\n        }\n    // First constructor receiving No argument pricing\n    public Sale(int w, int n) {\n            singleBagger = w;\n            pounderBagger = n;\n        }\n    // Sale without tax\n    public double getSale() {\n        return userBagWeight * singleBagger * pounderBagger;\n    }\n    // Get Sale Tax\n    public double getSaleTax() {\n        return (getSale() * taxRate);\n    }\n    // Get total pricing\n    public double getTotalPrice() {\n        return (getSale() + getSaleTax());\n    }\n    public double getPrice() {\n        return pricePerPound;\n    }\n    public double getTaxRate() {\n        return taxRate * 100;\n    }\n}\n</code></pre>\n<p>If you have any sort of fixes I could apply, please let me know; I am planning on adding the print statements for the rest of the arguments as well, but I'd like to get Sale() fixed up first.</p>\n"},{"tags":["java","eclipse","execute","external-application"],"comments":[{"owner":{"account_id":279146,"reputation":5158,"user_id":574147,"display_name":"Fabio Bonfante"},"score":1,"creation_date":1638900768,"post_id":70264733,"comment_id":124209064,"body_markdown":"Don&#39;t trust Finder to check what file really exists on the filesystem, it lies","body":"Don&#39;t trust Finder to check what file really exists on the filesystem, it lies"}],"answers":[{"tags":[],"owner":{"account_id":3159259,"reputation":109668,"user_id":2670892,"display_name":"greg-449"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638900773,"creation_date":1638900190,"answer_id":70264923,"question_id":70264733,"body_markdown":"Use the macOS `open` command to run an application:\r\n```\r\nopen -a Console\r\n```\r\nYou can&#39;t find Console using the `ls` command in `/Applications` because Finder is actually showing the contents of `/Applications` merged with `/System/Applications`. The path to Console is actually:\r\n```none\r\n/System/Applications/Utilities/Console.app/Contents/MacOS/Console\r\n```\r\nThis split was introduced in macOS Catalina.\r\n\r\nNote: `System.console()` is something else entirely, it isn&#39;t available in Eclipse.","title":"Why can&#39;t I run an application or console from within Java?","body":"<p>Use the macOS <code>open</code> command to run an application:</p>\n<pre><code>open -a Console\n</code></pre>\n<p>You can't find Console using the <code>ls</code> command in <code>/Applications</code> because Finder is actually showing the contents of <code>/Applications</code> merged with <code>/System/Applications</code>. The path to Console is actually:</p>\n<pre class=\"lang-none prettyprint-override\"><code>/System/Applications/Utilities/Console.app/Contents/MacOS/Console\n</code></pre>\n<p>This split was introduced in macOS Catalina.</p>\n<p>Note: <code>System.console()</code> is something else entirely, it isn't available in Eclipse.</p>\n"}],"owner":{"account_id":11962775,"reputation":11,"user_id":8753394,"display_name":"Paul"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1638900773,"creation_date":1638899232,"question_id":70264733,"body_markdown":"I am trying to update a 200,000 line program written in Java/Eclipse in 2009.\r\n\r\nI imported it to the latest Eclipse/Java, and there are several problems:\r\n1. the following line (which ran inn 2009) generates an error message\r\n\r\n\t\ttry \r\n\t\t{\r\n\t\t\tconsoleProcess = Runtime.getRuntime().exec(&quot;/Applications/Utilities/Console.app/Contents/MacOS/Console&quot;);\r\n\t\t } \r\n\t\t catch (Exception err) {\r\n\t\t\terr.printStackTrace();\r\n\t\t }\r\n\r\n\r\nThe error message is &quot;java.io.IOException: Cannot run program &quot;/Applications/Utilities/Console.app/Contents/MacOS/Console&quot;: error=2, No such file or directory\r\n\tat java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1142)&quot;\r\n\r\nHowever, the file is definitely there, it shows up in the finder (although not in an &quot;ls&quot; command from a terminal window, which I&#39;d also like to get input on.) and I can click on it and run it. I also cannot run BBEdit this way :  I can however run  open/run XQuartz using similar code. \r\n \r\n\r\nI started trying to write around this problem by trying to open a console with the following  code, which however produces the error message that &quot;The console is NULL&quot;\r\n\r\n```\r\nimport java.io.Console;\r\n\r\n\r\n\r\n    Console console = System.console();\r\n    if(console == null) {\r\n        System.out.println(&quot;The console is NULL&quot;);\r\n    }        \r\n    else \r\n    {\r\n        String  ch=console.readLine();    \r\n    }\r\n```\r\n\r\n\r\n\r\nThanks so much !! ","title":"Why can&#39;t I run an application or console from within Java?","body":"<p>I am trying to update a 200,000 line program written in Java/Eclipse in 2009.</p>\n<p>I imported it to the latest Eclipse/Java, and there are several problems:</p>\n<ol>\n<li><p>the following line (which ran inn 2009) generates an error message</p>\n<pre><code> try \n {\n     consoleProcess = Runtime.getRuntime().exec(&quot;/Applications/Utilities/Console.app/Contents/MacOS/Console&quot;);\n  } \n  catch (Exception err) {\n     err.printStackTrace();\n  }\n</code></pre>\n</li>\n</ol>\n<p>The error message is &quot;java.io.IOException: Cannot run program &quot;/Applications/Utilities/Console.app/Contents/MacOS/Console&quot;: error=2, No such file or directory\nat java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1142)&quot;</p>\n<p>However, the file is definitely there, it shows up in the finder (although not in an &quot;ls&quot; command from a terminal window, which I'd also like to get input on.) and I can click on it and run it. I also cannot run BBEdit this way :  I can however run  open/run XQuartz using similar code.</p>\n<p>I started trying to write around this problem by trying to open a console with the following  code, which however produces the error message that &quot;The console is NULL&quot;</p>\n<pre><code>import java.io.Console;\n\n\n\n    Console console = System.console();\n    if(console == null) {\n        System.out.println(&quot;The console is NULL&quot;);\n    }        \n    else \n    {\n        String  ch=console.readLine();    \n    }\n</code></pre>\n<p>Thanks so much !!</p>\n"},{"tags":["java","rest","amazon-s3"],"comments":[{"owner":{"account_id":8423897,"reputation":1034,"user_id":7505687,"display_name":"Dilermando Lima"},"score":0,"creation_date":1638845080,"post_id":70252008,"comment_id":124190541,"body_markdown":"If you print `var name` before response... are you sure has a name and not UUID? or try to put name between `\\&quot;` like ` &quot;attachment; filename=\\&quot;&quot; + name + &quot;\\&quot;&quot;`...  Beside this I have no ideia about not working, everything likes good","body":"If you print <code>var name</code> before response... are you sure has a name and not UUID? or try to put name between <code>\\&quot;</code> like ` &quot;attachment; filename=\\&quot;&quot; + name + &quot;\\&quot;&quot;`...  Beside this I have no ideia about not working, everything likes good"},{"owner":{"account_id":14932927,"reputation":117,"user_id":14923814,"display_name":"Алексеев станислав"},"score":0,"creation_date":1638867613,"post_id":70252008,"comment_id":124195594,"body_markdown":"still not working , the name is &quot;aaa.xlsx&quot; ,but when i download it - its name 23dfd-qe23e23-1ewdq-123123 without any extension - it use key of file from s3 to name file","body":"still not working , the name is &quot;aaa.xlsx&quot; ,but when i download it - its name 23dfd-qe23e23-1ewdq-123123 without any extension - it use key of file from s3 to name file"},{"owner":{"account_id":8423897,"reputation":1034,"user_id":7505687,"display_name":"Dilermando Lima"},"score":0,"creation_date":1638872048,"post_id":70252008,"comment_id":124197152,"body_markdown":"What is this controller doing? Only return a URL on Locations or are you build a new Resource stream and return to consumer? It looks like you are return a URL and after downloding from S3 directly.","body":"What is this controller doing? Only return a URL on Locations or are you build a new Resource stream and return to consumer? It looks like you are return a URL and after downloding from S3 directly."},{"owner":{"account_id":14932927,"reputation":117,"user_id":14923814,"display_name":"Алексеев станислав"},"score":0,"creation_date":1638877721,"post_id":70252008,"comment_id":124199319,"body_markdown":"it is just redirecting to s3 ,do not download the file on server","body":"it is just redirecting to s3 ,do not download the file on server"},{"owner":{"account_id":8423897,"reputation":1034,"user_id":7505687,"display_name":"Dilermando Lima"},"score":0,"creation_date":1638877852,"post_id":70252008,"comment_id":124199361,"body_markdown":"Try check if S3 are overriding headers or some settings for this. I&#39;ve never tried this before.","body":"Try check if S3 are overriding headers or some settings for this. I&#39;ve never tried this before."}],"answers":[{"tags":[],"owner":{"account_id":8423897,"reputation":1034,"user_id":7505687,"display_name":"Dilermando Lima"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638879802,"creation_date":1638879802,"answer_id":70260078,"question_id":70252008,"body_markdown":"@Алексеев станислав\r\n\r\nSome work arround for this is consuming your rest service by javascript and add file&#39;s name in a new header response and rename file when download by client.\r\n\r\n\r\n```\r\n// don&#39;t forget to allow X-File-Name header on CORS in spring\r\nheaders.add(&quot;X-File-Name&quot;,  nameToBeDownloaded );\r\n```\r\n\r\nExample on ANGULAR but can be parsed to other language\r\n```javascript\r\nthis.http.get(uri_link_spring_redirecting_to_S3, {\r\n    responseType: &#39;blob&#39;,\r\n    observe: &#39;response&#39;\r\n}).subscribe(\r\n    (response) =&gt; {\r\n        var link = document.createElement(&#39;a&#39;);\r\n        var file = new Blob([response.body], {\r\n            type: &#39;text/csv;charset=utf-8;&#39;\r\n        });\r\n        link.href = window.URL.createObjectURL(file);\r\n        link.download = response?.headers?.get(&#39;X-File-Name&#39;);; &#39;download.csv&#39;;\r\n        link.click();\r\n    },\r\n    error =&gt; {\r\n        ...\r\n    }\r\n)\r\n\r\n```\r\n","title":"How to redirect s3 link from rest controller java","body":"<p>@Алексеев станислав</p>\n<p>Some work arround for this is consuming your rest service by javascript and add file's name in a new header response and rename file when download by client.</p>\n<pre><code>// don't forget to allow X-File-Name header on CORS in spring\nheaders.add(&quot;X-File-Name&quot;,  nameToBeDownloaded );\n</code></pre>\n<p>Example on ANGULAR but can be parsed to other language</p>\n<pre class=\"lang-js prettyprint-override\"><code>this.http.get(uri_link_spring_redirecting_to_S3, {\n    responseType: 'blob',\n    observe: 'response'\n}).subscribe(\n    (response) =&gt; {\n        var link = document.createElement('a');\n        var file = new Blob([response.body], {\n            type: 'text/csv;charset=utf-8;'\n        });\n        link.href = window.URL.createObjectURL(file);\n        link.download = response?.headers?.get('X-File-Name');; 'download.csv';\n        link.click();\n    },\n    error =&gt; {\n        ...\n    }\n)\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14932927,"reputation":117,"user_id":14923814,"display_name":"Алексеев станислав"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638900565,"creation_date":1638900565,"answer_id":70264995,"question_id":70252008,"body_markdown":"Finally i found solution- i use S3Presigner ,make presigned url and redirect it with simple Http response\r\n\r\n      @Bean\r\n      public S3Presigner getS3Presigner() {\r\n        return S3Presigner.builder()\r\n          .credentialsProvider(StaticCredentialsProvider.create(AwsBasicCredentials.create(ACCESS_KEY, SECRET_KEY)))\r\n          .region(Region.of(REGION))\r\n          .endpointOverride(URI.create(END_POINT))\r\n          .build();\r\n      }\r\n\r\n      public String getPresignedURL(UUID uuid) {\r\n        var name = getName(uuid);\r\n        var contentDisposition = &quot;attachment;filename=&quot; + name;\r\n        var contentType = new MimetypesFileTypeMap().getContentType(name);\r\n    \r\n        GetObjectRequest getObjectRequest = GetObjectRequest.builder()\r\n          .bucket(BUCKET)\r\n          .key(uuid.toString())\r\n          .responseContentDisposition(contentDisposition)\r\n          .responseContentType(contentType)\r\n          .build();\r\n    \r\n        GetObjectPresignRequest getObjectPresignRequest =\r\n          GetObjectPresignRequest.builder()\r\n            .signatureDuration(Duration.ofMinutes(5))\r\n            .getObjectRequest(getObjectRequest)\r\n            .build();\r\n    \r\n        PresignedGetObjectRequest presignedGetObjectRequest =\r\n          s3Presigner.presignGetObject(getObjectPresignRequest);\r\n    \r\n       return presignedGetObjectRequest.url().toString();\r\n      }\r\n\r\n    @GetMapping(&quot;/redirect/{uuid}&quot;)\r\n      public void redirectToS3(@PathVariable UUID uuid, HttpServletResponse response) {\r\n        try {\r\n          var URI = storageServiceS3.getPresignedURL(uuid);\r\n          response.sendRedirect(URI);\r\n        } catch (NoSuchKeyException | IOException e) {\r\n          response.setStatus(404);\r\n        }\r\n      }\r\n\r\nIt works pretty good ;)\r\n","title":"How to redirect s3 link from rest controller java","body":"<p>Finally i found solution- i use S3Presigner ,make presigned url and redirect it with simple Http response</p>\n<pre><code>  @Bean\n  public S3Presigner getS3Presigner() {\n    return S3Presigner.builder()\n      .credentialsProvider(StaticCredentialsProvider.create(AwsBasicCredentials.create(ACCESS_KEY, SECRET_KEY)))\n      .region(Region.of(REGION))\n      .endpointOverride(URI.create(END_POINT))\n      .build();\n  }\n\n  public String getPresignedURL(UUID uuid) {\n    var name = getName(uuid);\n    var contentDisposition = &quot;attachment;filename=&quot; + name;\n    var contentType = new MimetypesFileTypeMap().getContentType(name);\n\n    GetObjectRequest getObjectRequest = GetObjectRequest.builder()\n      .bucket(BUCKET)\n      .key(uuid.toString())\n      .responseContentDisposition(contentDisposition)\n      .responseContentType(contentType)\n      .build();\n\n    GetObjectPresignRequest getObjectPresignRequest =\n      GetObjectPresignRequest.builder()\n        .signatureDuration(Duration.ofMinutes(5))\n        .getObjectRequest(getObjectRequest)\n        .build();\n\n    PresignedGetObjectRequest presignedGetObjectRequest =\n      s3Presigner.presignGetObject(getObjectPresignRequest);\n\n   return presignedGetObjectRequest.url().toString();\n  }\n\n@GetMapping(&quot;/redirect/{uuid}&quot;)\n  public void redirectToS3(@PathVariable UUID uuid, HttpServletResponse response) {\n    try {\n      var URI = storageServiceS3.getPresignedURL(uuid);\n      response.sendRedirect(URI);\n    } catch (NoSuchKeyException | IOException e) {\n      response.setStatus(404);\n    }\n  }\n</code></pre>\n<p>It works pretty good ;)</p>\n"}],"owner":{"account_id":14932927,"reputation":117,"user_id":14923814,"display_name":"Алексеев станислав"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":604,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1638900565,"creation_date":1638825113,"question_id":70252008,"body_markdown":"we have S3 storage ,there are a lot of some files, jpg,mp3 and others\r\nwhat i need to do?\r\ni need to redirect client to get the file from our s3 without uploading it on our server\r\nand i want that clien get the file on his pc with name and extension\r\n\r\nso it looks like clien send us uuid - we find link of this file on s3 and redirect it like this\r\n\r\n      @GetMapping(&quot;/test/{uuid}&quot;)\r\n      public ResponseEntity&lt;Void&gt; getFile(@PathVariable UUID uuid) {\r\n        var url = storageServiceS3.getUrl(uuid);\r\n        try {\r\n          var name = storageServiceS3.getName(uuid);\r\n          return ResponseEntity.status(HttpStatus.MOVED_PERMANENTLY)\r\n            .header(HttpHeaders.LOCATION, url)\r\n            .header(HttpHeaders.CONTENT_TYPE, new MimetypesFileTypeMap().getContentType(name))\r\n            .header(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=&quot; + name)\r\n            .build();\r\n        } catch (NoSuchKeyException ex) {\r\n          return ResponseEntity.status(HttpStatus.NOT_FOUND)\r\n            .build();\r\n        }\r\n      }\r\n\r\neverything works good ,the file is downloading but one problem - the file has no name (its name still is key from s3) and no extension.\r\n\r\ni think this code not works correctly \r\n\r\n    .header(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=&quot; + name)\r\n\r\nis there any way to do this or i still need upload file to server and then send it to client ?","title":"How to redirect s3 link from rest controller java","body":"<p>we have S3 storage ,there are a lot of some files, jpg,mp3 and others\nwhat i need to do?\ni need to redirect client to get the file from our s3 without uploading it on our server\nand i want that clien get the file on his pc with name and extension</p>\n<p>so it looks like clien send us uuid - we find link of this file on s3 and redirect it like this</p>\n<pre><code>  @GetMapping(&quot;/test/{uuid}&quot;)\n  public ResponseEntity&lt;Void&gt; getFile(@PathVariable UUID uuid) {\n    var url = storageServiceS3.getUrl(uuid);\n    try {\n      var name = storageServiceS3.getName(uuid);\n      return ResponseEntity.status(HttpStatus.MOVED_PERMANENTLY)\n        .header(HttpHeaders.LOCATION, url)\n        .header(HttpHeaders.CONTENT_TYPE, new MimetypesFileTypeMap().getContentType(name))\n        .header(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=&quot; + name)\n        .build();\n    } catch (NoSuchKeyException ex) {\n      return ResponseEntity.status(HttpStatus.NOT_FOUND)\n        .build();\n    }\n  }\n</code></pre>\n<p>everything works good ,the file is downloading but one problem - the file has no name (its name still is key from s3) and no extension.</p>\n<p>i think this code not works correctly</p>\n<pre><code>.header(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=&quot; + name)\n</code></pre>\n<p>is there any way to do this or i still need upload file to server and then send it to client ?</p>\n"},{"tags":["java","arrays","json","string","org.json"],"comments":[{"owner":{"account_id":8641099,"reputation":3709,"user_id":6469772,"display_name":"LHCHIN"},"score":0,"creation_date":1637714634,"post_id":70084579,"comment_id":123899220,"body_markdown":"It seems what you want to do is like [Generating JSON from JsonPath](https://github.com/KumarJayanti/JsonPath/tree/master#generating-json-from-jsonpath)?","body":"It seems what you want to do is like <a href=\"https://github.com/KumarJayanti/JsonPath/tree/master#generating-json-from-jsonpath\" rel=\"nofollow noreferrer\">Generating JSON from JsonPath</a>?"}],"answers":[{"tags":[],"owner":{"account_id":18131155,"reputation":91,"user_id":13186253,"display_name":"Ey&#252;p Yıldız"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1638900399,"creation_date":1638900399,"answer_id":70264962,"question_id":70084579,"body_markdown":"Here&#39;s the solution:\r\n\r\n    public void expand(Object parent, String key, Object value) {\r\n        JSONElement element = new JSONElement(parent);\r\n        if (!key.contains(&quot;.&quot;)) { // End\r\n            element.put(key, value);\r\n            return;\r\n        }\r\n\r\n        String innerKey = key.substring(0, key.indexOf(&quot;.&quot;));\r\n        String remaining = key.substring(key.indexOf(&quot;.&quot;) + 1);\r\n\r\n        if (element.has(innerKey)) {\r\n            expand(element.get(innerKey), remaining, value);\r\n            return;\r\n        }\r\n\r\n        Object object = element.newInstance();\r\n        Object put = element.put(innerKey, object);\r\n        expand(put, remaining, value);\r\n    }\r\n\r\nJSONElement class:\r\n\r\n    import com.google.common.base.Preconditions;\r\n    import org.json.JSONArray;\r\n    import org.json.JSONObject;\r\n\r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n\r\n    public class JSONElement {\r\n\r\n        private static final Pattern pattern = Pattern.compile(&quot;(?&lt;=\\\\[)([^]]+)(?=])&quot;);\r\n\r\n        private final Object base;\r\n\r\n        public JSONElement(Object base) {\r\n            Preconditions.checkNotNull(base, &quot;base&quot;);\r\n            Preconditions.checkState(base instanceof JSONObject || base instanceof JSONArray, &quot;base must be a JSONObject or JSONArray instead of &quot; + base.getClass().getSimpleName());\r\n            this.base = base;\r\n        }\r\n\r\n        public Object put(Object key, Object value) {\r\n            String keyAsString = String.valueOf(key);\r\n\r\n            if (base instanceof JSONObject) {\r\n                if (keyAsString.contains(&quot;[&quot;)) {\r\n                    String formatKey = keyAsString.contains(&quot;[&quot;) ? keyAsString.substring(0, keyAsString.indexOf(&quot;[&quot;)) : keyAsString;\r\n                    JSONArray array = ((JSONObject) base).has(formatKey) ? ((JSONObject) base).getJSONArray(formatKey) : new JSONArray();\r\n\r\n                    int index = getIndex(keyAsString);\r\n                    array.put(index, value);\r\n                    ((JSONObject) base).put(formatKey, array);\r\n                    return ((JSONArray) ((JSONObject) base).get(formatKey)).get(index);\r\n                }\r\n\r\n                ((JSONObject) base).put(keyAsString, value);\r\n                return ((JSONObject) base).get(keyAsString);\r\n            }\r\n\r\n            int index = getIndex(keyAsString);\r\n            ((JSONArray) base).put(index, value);\r\n            return ((JSONArray) base).get(index);\r\n        }\r\n\r\n        public boolean has(Object key) {\r\n            String keyAsString = String.valueOf(key);\r\n\r\n            if (base instanceof JSONObject) {\r\n                JSONObject object = (JSONObject) base;\r\n                String formatKey = formatKey(keyAsString);\r\n                if (keyAsString.contains(&quot;[&quot;))\r\n                    return object.has(formatKey) &amp;&amp; !object.getJSONArray(formatKey).isNull(getIndex(keyAsString));\r\n\r\n                return object.has(formatKey);\r\n            }\r\n\r\n            return !((JSONArray) base).isNull(getIndex(keyAsString));\r\n        }\r\n\r\n        public Object get(Object key) {\r\n            String keyAsString = String.valueOf(key);\r\n            if (base instanceof JSONObject) {\r\n                JSONObject object = (JSONObject) base;\r\n                String formatKey = formatKey(keyAsString);\r\n                if (keyAsString.contains(&quot;[&quot;))\r\n                    return object.getJSONArray(formatKey).get(getIndex(keyAsString));\r\n\r\n                return object.get(formatKey);\r\n            }\r\n\r\n            return ((JSONArray) base).get(getIndex(keyAsString));\r\n        }\r\n\r\n        public Object newInstance() {\r\n            return base instanceof JSONObject ? new JSONObject() : new JSONArray();\r\n        }\r\n\r\n        private int getIndex(String key) {\r\n            Matcher matcher = pattern.matcher(key);\r\n            Preconditions.checkState(matcher.find(), String.format(&quot;Matcher couldn&#39;t find an index number in \\&quot;%s\\&quot;&quot;, key));\r\n            return Integer.parseInt(matcher.group());\r\n        }\r\n\r\n        private String formatKey(String key) {\r\n            return key.contains(&quot;[&quot;) ? key.substring(0, key.indexOf(&quot;[&quot;)) : key;\r\n        }\r\n    }\r\n\r\nUsage:\r\n\r\n    JSONObject jsonObject = new JSONObject();\r\n    expand(jsonObject, &quot;first.second[0].third[0].fourth&quot;, &quot;some string&quot;);\r\n    System.out.println(jsonObject.toString()); // Prints: {&quot;first&quot;:{&quot;second&quot;:[{&quot;third&quot;:[{&quot;fourth&quot;:&quot;some string&quot;}]}]}}","title":"Dot notation to JSON (including arrays)","body":"<p>Here's the solution:</p>\n<pre><code>public void expand(Object parent, String key, Object value) {\n    JSONElement element = new JSONElement(parent);\n    if (!key.contains(&quot;.&quot;)) { // End\n        element.put(key, value);\n        return;\n    }\n\n    String innerKey = key.substring(0, key.indexOf(&quot;.&quot;));\n    String remaining = key.substring(key.indexOf(&quot;.&quot;) + 1);\n\n    if (element.has(innerKey)) {\n        expand(element.get(innerKey), remaining, value);\n        return;\n    }\n\n    Object object = element.newInstance();\n    Object put = element.put(innerKey, object);\n    expand(put, remaining, value);\n}\n</code></pre>\n<p>JSONElement class:</p>\n<pre><code>import com.google.common.base.Preconditions;\nimport org.json.JSONArray;\nimport org.json.JSONObject;\n\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class JSONElement {\n\n    private static final Pattern pattern = Pattern.compile(&quot;(?&lt;=\\\\[)([^]]+)(?=])&quot;);\n\n    private final Object base;\n\n    public JSONElement(Object base) {\n        Preconditions.checkNotNull(base, &quot;base&quot;);\n        Preconditions.checkState(base instanceof JSONObject || base instanceof JSONArray, &quot;base must be a JSONObject or JSONArray instead of &quot; + base.getClass().getSimpleName());\n        this.base = base;\n    }\n\n    public Object put(Object key, Object value) {\n        String keyAsString = String.valueOf(key);\n\n        if (base instanceof JSONObject) {\n            if (keyAsString.contains(&quot;[&quot;)) {\n                String formatKey = keyAsString.contains(&quot;[&quot;) ? keyAsString.substring(0, keyAsString.indexOf(&quot;[&quot;)) : keyAsString;\n                JSONArray array = ((JSONObject) base).has(formatKey) ? ((JSONObject) base).getJSONArray(formatKey) : new JSONArray();\n\n                int index = getIndex(keyAsString);\n                array.put(index, value);\n                ((JSONObject) base).put(formatKey, array);\n                return ((JSONArray) ((JSONObject) base).get(formatKey)).get(index);\n            }\n\n            ((JSONObject) base).put(keyAsString, value);\n            return ((JSONObject) base).get(keyAsString);\n        }\n\n        int index = getIndex(keyAsString);\n        ((JSONArray) base).put(index, value);\n        return ((JSONArray) base).get(index);\n    }\n\n    public boolean has(Object key) {\n        String keyAsString = String.valueOf(key);\n\n        if (base instanceof JSONObject) {\n            JSONObject object = (JSONObject) base;\n            String formatKey = formatKey(keyAsString);\n            if (keyAsString.contains(&quot;[&quot;))\n                return object.has(formatKey) &amp;&amp; !object.getJSONArray(formatKey).isNull(getIndex(keyAsString));\n\n            return object.has(formatKey);\n        }\n\n        return !((JSONArray) base).isNull(getIndex(keyAsString));\n    }\n\n    public Object get(Object key) {\n        String keyAsString = String.valueOf(key);\n        if (base instanceof JSONObject) {\n            JSONObject object = (JSONObject) base;\n            String formatKey = formatKey(keyAsString);\n            if (keyAsString.contains(&quot;[&quot;))\n                return object.getJSONArray(formatKey).get(getIndex(keyAsString));\n\n            return object.get(formatKey);\n        }\n\n        return ((JSONArray) base).get(getIndex(keyAsString));\n    }\n\n    public Object newInstance() {\n        return base instanceof JSONObject ? new JSONObject() : new JSONArray();\n    }\n\n    private int getIndex(String key) {\n        Matcher matcher = pattern.matcher(key);\n        Preconditions.checkState(matcher.find(), String.format(&quot;Matcher couldn't find an index number in \\&quot;%s\\&quot;&quot;, key));\n        return Integer.parseInt(matcher.group());\n    }\n\n    private String formatKey(String key) {\n        return key.contains(&quot;[&quot;) ? key.substring(0, key.indexOf(&quot;[&quot;)) : key;\n    }\n}\n</code></pre>\n<p>Usage:</p>\n<pre><code>JSONObject jsonObject = new JSONObject();\nexpand(jsonObject, &quot;first.second[0].third[0].fourth&quot;, &quot;some string&quot;);\nSystem.out.println(jsonObject.toString()); // Prints: {&quot;first&quot;:{&quot;second&quot;:[{&quot;third&quot;:[{&quot;fourth&quot;:&quot;some string&quot;}]}]}}\n</code></pre>\n"}],"owner":{"account_id":18131155,"reputation":91,"user_id":13186253,"display_name":"Ey&#252;p Yıldız"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2033,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70264962,"answer_count":1,"score":2,"last_activity_date":1638900399,"creation_date":1637685680,"question_id":70084579,"body_markdown":"I want to convert dot notated string to a JSONObject but include arrays too, for example: I want to set `first.second[0].third[0].fourth` to `some string`. So, JSON must be:\r\n\r\n    {\r\n      &quot;first&quot;: {\r\n        &quot;second&quot;: [\r\n          {\r\n            &quot;third&quot;: [\r\n              &quot;fourth&quot;: &quot;some string&quot;\r\n            ]\r\n          }\r\n        ]\r\n      }\r\n    }\r\n\r\nI found [this method][1] then edited and it turned out something like this:\r\n\r\n    private void expand(Object parent, String key, String value) {\r\n        if (key == null) return;\r\n        if (!key.contains(&quot;.&quot;) &amp;&amp; !key.contains(&quot;[&quot;)) {\r\n            if (parent instanceof JSONObject) {\r\n                ((JSONObject) parent).put(key, value);\r\n            } else {\r\n                ((JSONArray) parent).put(value);\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        String innerKey = key.substring(0, key.contains(&quot;.&quot;) ? key.indexOf(&quot;.&quot;) : key.length());\r\n        String formattedInnerKey = innerKey.contains(&quot;[&quot;) ? innerKey.substring(0, innerKey.indexOf(&quot;[&quot;)) : innerKey;\r\n        String remaining = key.contains(&quot;.&quot;) ? key.substring(key.indexOf(&quot;.&quot;) + 1) : key.contains(&quot;]&quot;) ? key.substring(key.indexOf(&quot;]&quot;) + 1) : null;\r\n\r\n        if (parent instanceof JSONObject) {\r\n            JSONObject jsonObject = (JSONObject) parent;\r\n            if (jsonObject.has(formattedInnerKey)) {\r\n                expand(jsonObject.get(formattedInnerKey), remaining, value);\r\n                return;\r\n            }\r\n        } else {\r\n            JSONArray jsonArray = (JSONArray) parent;\r\n            Matcher matcher = Pattern.compile(&quot;(?&lt;=\\\\[)([^\\\\]]+)(?=\\\\])&quot;).matcher(innerKey);\r\n            Preconditions.checkState(matcher.find(), String.format(&quot;Matcher couldn&#39;t find a index number in \\&quot;%s\\&quot;&quot;, innerKey));\r\n            int index = Integer.parseInt(matcher.group());\r\n            System.out.print(index + &quot; - &quot;);\r\n            if (!jsonArray.isNull(index)) {\r\n                System.out.print(jsonArray.get(index));\r\n                expand(jsonArray.get(index), remaining, value);\r\n                return;\r\n            }\r\n        }\r\n\r\n        Object obj = innerKey.contains(&quot;[&quot;) ? new JSONArray() : new JSONObject();\r\n        if (parent instanceof JSONObject) {\r\n            ((JSONObject) parent).put(formattedInnerKey, obj);\r\n        } else {\r\n            JSONObject base = new JSONObject();\r\n            base.put(formattedInnerKey, obj);\r\n            Matcher matcher = Pattern.compile(&quot;(?&lt;=\\\\[)([^\\\\]]+)(?=\\\\])&quot;).matcher(innerKey);\r\n            Preconditions.checkState(matcher.find(), String.format(&quot;Matcher couldn&#39;t find a index number in \\&quot;%s\\&quot;&quot;, innerKey));\r\n            int index = Integer.parseInt(matcher.group());\r\n            ((JSONArray) parent).put(index, base);\r\n        }\r\n        expand(obj, remaining, value);\r\n    }\r\n\r\nThis method -kinda- works but the problem is that it adds elements to the array instead of putting. I want to be able to put the object to an index in that array. How can I fix this?\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/64083527/13186253","title":"Dot notation to JSON (including arrays)","body":"<p>I want to convert dot notated string to a JSONObject but include arrays too, for example: I want to set <code>first.second[0].third[0].fourth</code> to <code>some string</code>. So, JSON must be:</p>\n<pre><code>{\n  &quot;first&quot;: {\n    &quot;second&quot;: [\n      {\n        &quot;third&quot;: [\n          &quot;fourth&quot;: &quot;some string&quot;\n        ]\n      }\n    ]\n  }\n}\n</code></pre>\n<p>I found <a href=\"https://stackoverflow.com/a/64083527/13186253\">this method</a> then edited and it turned out something like this:</p>\n<pre><code>private void expand(Object parent, String key, String value) {\n    if (key == null) return;\n    if (!key.contains(&quot;.&quot;) &amp;&amp; !key.contains(&quot;[&quot;)) {\n        if (parent instanceof JSONObject) {\n            ((JSONObject) parent).put(key, value);\n        } else {\n            ((JSONArray) parent).put(value);\n        }\n\n        return;\n    }\n\n    String innerKey = key.substring(0, key.contains(&quot;.&quot;) ? key.indexOf(&quot;.&quot;) : key.length());\n    String formattedInnerKey = innerKey.contains(&quot;[&quot;) ? innerKey.substring(0, innerKey.indexOf(&quot;[&quot;)) : innerKey;\n    String remaining = key.contains(&quot;.&quot;) ? key.substring(key.indexOf(&quot;.&quot;) + 1) : key.contains(&quot;]&quot;) ? key.substring(key.indexOf(&quot;]&quot;) + 1) : null;\n\n    if (parent instanceof JSONObject) {\n        JSONObject jsonObject = (JSONObject) parent;\n        if (jsonObject.has(formattedInnerKey)) {\n            expand(jsonObject.get(formattedInnerKey), remaining, value);\n            return;\n        }\n    } else {\n        JSONArray jsonArray = (JSONArray) parent;\n        Matcher matcher = Pattern.compile(&quot;(?&lt;=\\\\[)([^\\\\]]+)(?=\\\\])&quot;).matcher(innerKey);\n        Preconditions.checkState(matcher.find(), String.format(&quot;Matcher couldn't find a index number in \\&quot;%s\\&quot;&quot;, innerKey));\n        int index = Integer.parseInt(matcher.group());\n        System.out.print(index + &quot; - &quot;);\n        if (!jsonArray.isNull(index)) {\n            System.out.print(jsonArray.get(index));\n            expand(jsonArray.get(index), remaining, value);\n            return;\n        }\n    }\n\n    Object obj = innerKey.contains(&quot;[&quot;) ? new JSONArray() : new JSONObject();\n    if (parent instanceof JSONObject) {\n        ((JSONObject) parent).put(formattedInnerKey, obj);\n    } else {\n        JSONObject base = new JSONObject();\n        base.put(formattedInnerKey, obj);\n        Matcher matcher = Pattern.compile(&quot;(?&lt;=\\\\[)([^\\\\]]+)(?=\\\\])&quot;).matcher(innerKey);\n        Preconditions.checkState(matcher.find(), String.format(&quot;Matcher couldn't find a index number in \\&quot;%s\\&quot;&quot;, innerKey));\n        int index = Integer.parseInt(matcher.group());\n        ((JSONArray) parent).put(index, base);\n    }\n    expand(obj, remaining, value);\n}\n</code></pre>\n<p>This method -kinda- works but the problem is that it adds elements to the array instead of putting. I want to be able to put the object to an index in that array. How can I fix this?</p>\n"},{"tags":["java","spring","jdbc","jdbctemplate","spring-jdbc"],"answers":[{"tags":[],"owner":{"account_id":47296,"reputation":27247,"user_id":140037,"accept_rate":74,"display_name":"Brett Ryan"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1343367697,"creation_date":1343367697,"answer_id":11682081,"question_id":11681713,"body_markdown":"I&#39;ve currently solved this by using the `DataSourceTransactionManager` directly, though it seems like I&#39;m not saving as much boiler-plate as I first hoped. Don&#39;t get me wrong, it&#39;s cleaner, though I still can&#39;t help but feel there must be a simpler way. I don&#39;t need a transaction for the read, I just want to set the isolation.\r\n\r\n    private Customer getCustomer(final DataSourceTransactionManager txMan,\r\n                                 final JdbcTemplate t,\r\n                                 final String id) {\r\n        DefaultTransactionDefinition def = new DefaultTransactionDefinition();\r\n        def.setIsolationLevel(TransactionDefinition.ISOLATION_READ_UNCOMMITTED);\r\n\r\n        TransactionStatus status = txMan.getTransaction(def);\r\n        Customer c = null;\r\n        try {\r\n            c = t.queryForObject(SELECT_CUSTOMER, new CustomerRowMapper(), id);\r\n        } catch (Exception ex) {\r\n            txMan.rollback(status);\r\n            throw ex;\r\n        }\r\n        txMan.commit(status);\r\n        return c;\r\n    }\r\n\r\nI&#39;m still going to keep this one unanswered for a while as I truly believe there must be a better way.\r\n\r\nRefer to [Spring 3.1.x Documentation - Chapter 11 - Transaction Management][1]\r\n\r\n\r\n  [1]: http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html#transaction-programmatic-ptm","title":"How can I get a spring JdbcTemplate to read_uncommitted?","body":"<p>I've currently solved this by using the <code>DataSourceTransactionManager</code> directly, though it seems like I'm not saving as much boiler-plate as I first hoped. Don't get me wrong, it's cleaner, though I still can't help but feel there must be a simpler way. I don't need a transaction for the read, I just want to set the isolation.</p>\n\n<pre><code>private Customer getCustomer(final DataSourceTransactionManager txMan,\n                             final JdbcTemplate t,\n                             final String id) {\n    DefaultTransactionDefinition def = new DefaultTransactionDefinition();\n    def.setIsolationLevel(TransactionDefinition.ISOLATION_READ_UNCOMMITTED);\n\n    TransactionStatus status = txMan.getTransaction(def);\n    Customer c = null;\n    try {\n        c = t.queryForObject(SELECT_CUSTOMER, new CustomerRowMapper(), id);\n    } catch (Exception ex) {\n        txMan.rollback(status);\n        throw ex;\n    }\n    txMan.commit(status);\n    return c;\n}\n</code></pre>\n\n<p>I'm still going to keep this one unanswered for a while as I truly believe there must be a better way.</p>\n\n<p>Refer to <a href=\"http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html#transaction-programmatic-ptm\" rel=\"noreferrer\">Spring 3.1.x Documentation - Chapter 11 - Transaction Management</a></p>\n"},{"tags":[],"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1498023660,"creation_date":1377071289,"answer_id":18351701,"question_id":11681713,"body_markdown":"Using the `TransactionTemplate` helps you here, you need to configure it appropriately. The transaction template also contains the transaction configuration. Actually the `TransactionTemplate` extends `DefaultTransactionDefinition`.\r\n\r\nSo somewhere in your configuration you should have something like this.\r\n\r\n    &lt;bean id=&quot;txTemplate&quot; class=&quot; org.springframework.transaction.support.TransactionTemplate&quot;&gt;\r\n      &lt;property name=&quot;isolationLevelName&quot; value=&quot;ISOLATION_READ_UNCOMMITTED&quot;/&gt;\r\n      &lt;property name=&quot;readOnly&quot; value=&quot;true&quot; /&gt;\r\n      &lt;property name=&quot;transactionManager&quot; ref=&quot;transactionManager&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\nIf you then inject this bean into your class you should be able to use the `TransactionTemplate` based code you posted/tried earlier.\r\n\r\nHowever there might be a nicer solution which can clean up your code. For one of the projects I worked on, we had a similar setup as yours (single app multiple databases). For this we wrote some spring code which basically switches the datasource when needed. More information can be found [here](http://mdeinum.wordpress.com/2007/01/05/one-application-per-client-database/). \r\n\r\nIf that is to far fetched or overkill for your application you can also try and use Spring&#39;s [`AbstractRoutingDataSource`][1], which based on a lookup key (country code in your case) selects the proper datasource to use.\r\n\r\nBy using either of those 2 solutions you can start using springs [declarative transactionmanagement][2] approach (which should clean up your code considerably).\r\n\r\n[1]: http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/jdbc/datasource/lookup/AbstractRoutingDataSource.html\r\n[2]: https://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#transaction-declarative","title":"How can I get a spring JdbcTemplate to read_uncommitted?","body":"<p>Using the <code>TransactionTemplate</code> helps you here, you need to configure it appropriately. The transaction template also contains the transaction configuration. Actually the <code>TransactionTemplate</code> extends <code>DefaultTransactionDefinition</code>.</p>\n\n<p>So somewhere in your configuration you should have something like this.</p>\n\n<pre><code>&lt;bean id=\"txTemplate\" class=\" org.springframework.transaction.support.TransactionTemplate\"&gt;\n  &lt;property name=\"isolationLevelName\" value=\"ISOLATION_READ_UNCOMMITTED\"/&gt;\n  &lt;property name=\"readOnly\" value=\"true\" /&gt;\n  &lt;property name=\"transactionManager\" ref=\"transactionManager\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>If you then inject this bean into your class you should be able to use the <code>TransactionTemplate</code> based code you posted/tried earlier.</p>\n\n<p>However there might be a nicer solution which can clean up your code. For one of the projects I worked on, we had a similar setup as yours (single app multiple databases). For this we wrote some spring code which basically switches the datasource when needed. More information can be found <a href=\"http://mdeinum.wordpress.com/2007/01/05/one-application-per-client-database/\" rel=\"nofollow noreferrer\">here</a>. </p>\n\n<p>If that is to far fetched or overkill for your application you can also try and use Spring's <a href=\"http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/jdbc/datasource/lookup/AbstractRoutingDataSource.html\" rel=\"nofollow noreferrer\"><code>AbstractRoutingDataSource</code></a>, which based on a lookup key (country code in your case) selects the proper datasource to use.</p>\n\n<p>By using either of those 2 solutions you can start using springs <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#transaction-declarative\" rel=\"nofollow noreferrer\">declarative transactionmanagement</a> approach (which should clean up your code considerably).</p>\n"},{"tags":[],"owner":{"account_id":1971411,"reputation":421,"user_id":1770217,"display_name":"Satish"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1489153592,"creation_date":1489152771,"answer_id":42719640,"question_id":11681713,"body_markdown":"Define a proxy data source, class being org.springframework.jdbc.datasource.LazyConnectionDataSourceProxy and set the transaction isolation level. Inject actual data source either through setter or constructor.\r\n\r\n&lt;pre&gt;\r\n&amp;lt;bean id=&quot;yourDataSource&quot; class=&quot;org.springframework.jdbc.datasource.LazyConnectionDataSourceProxy&quot;&amp;gt;\r\n    &amp;lt;constructor-arg index=&quot;0&quot; ref=&quot;targetDataSource&quot;/&amp;gt;\r\n    &amp;lt;property name=&quot;defaultTransactionIsolationName&quot; value=&quot;TRANSACTION_READ_UNCOMMITTED&quot;/&amp;gt;\r\n&amp;lt;/bean&amp;gt;\r\n&lt;/pre&gt;","title":"How can I get a spring JdbcTemplate to read_uncommitted?","body":"<p>Define a proxy data source, class being org.springframework.jdbc.datasource.LazyConnectionDataSourceProxy and set the transaction isolation level. Inject actual data source either through setter or constructor.</p>\n\n<pre>\n&lt;bean id=\"yourDataSource\" class=\"org.springframework.jdbc.datasource.LazyConnectionDataSourceProxy\"&gt;\n    &lt;constructor-arg index=\"0\" ref=\"targetDataSource\"/&gt;\n    &lt;property name=\"defaultTransactionIsolationName\" value=\"TRANSACTION_READ_UNCOMMITTED\"/&gt;\n&lt;/bean&gt;\n</pre>\n"},{"tags":[],"owner":{"account_id":279146,"reputation":5158,"user_id":574147,"display_name":"Fabio Bonfante"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638899941,"creation_date":1638899941,"answer_id":70264873,"question_id":11681713,"body_markdown":"I&#39;m not sure you can do it without working with at the &#39;Transactional&#39; abstraction-level provided by Spring.\r\n\r\nA more &#39;xml-free&#39; to build your transactionTemplate could be something like this. \r\n\r\n```java\r\nprivate TransactionTemplate getTransactionTemplate(String executionTenantCode, boolean readOnlyTransaction) {\r\n    TransactionTemplate tt = new TransactionTemplate(transactionManager);\r\n    tt.setReadOnly(readOnlyTransaction);\r\n    tt.setIsolationLevel(TransactionDefinition.ISOLATION_READ_UNCOMMITTED);\r\n    tt.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRES_NEW);\r\n    return tt;\r\n}\r\n\r\n```\r\n\r\nIn any case I would &quot;leverage&quot; the `@Transactional` annotation specifying the appropriate transaction manager, binded with a separate data-source. I&#39;ve done this for a multi-tenant application.\r\n\r\nThe usage:\r\n```java\r\n@Transactional(transactionManager = CATALOG_TRANSACTION_MANAGER, \r\n    isolation = Isolation.READ_UNCOMMITTED, \r\n    readOnly = true)\r\npublic void myMethod() {\r\n  //....\r\n}\r\n```\r\n\r\nThe bean(s) declaration:\r\n```java\r\npublic class CatalogDataSourceConfiguration {\r\n    \r\n    @Bean(name = &quot;catalogDataSource&quot;)\r\n    @ConfigurationProperties(&quot;catalog.datasource&quot;)\r\n    public DataSource catalogDataSource() {\r\n        return DataSourceBuilder.create().build();\r\n    }\r\n\r\n    @Bean(name = ENTITY_MANAGER_FACTORY)\r\n    public EntityManagerFactory entityManagerFactory(\r\n            @Qualifier(&quot;catalogEntityManagerFactoryBean&quot;) LocalContainerEntityManagerFactoryBean emFactoryBean) {\r\n        return emFactoryBean.getObject();\r\n    }\r\n\r\n    @Bean(name= CATALOG_TRANSACTION_MANAGER)\r\n    public PlatformTransactionManager catalogTM(@Qualifier(ENTITY_MANAGER_FACTORY) EntityManagerFactory emf) {\r\n        JpaTransactionManager transactionManager = new JpaTransactionManager();\r\n        transactionManager.setEntityManagerFactory(emf);\r\n        return transactionManager;\r\n    }\r\n\r\n    @Bean\r\n    public NamedParameterJdbcTemplate catalogJdbcTemplate() {\r\n        return new NamedParameterJdbcTemplate(catalogDataSource());\r\n    }\r\n\r\n}\r\n```","title":"How can I get a spring JdbcTemplate to read_uncommitted?","body":"<p>I'm not sure you can do it without working with at the 'Transactional' abstraction-level provided by Spring.</p>\n<p>A more 'xml-free' to build your transactionTemplate could be something like this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private TransactionTemplate getTransactionTemplate(String executionTenantCode, boolean readOnlyTransaction) {\n    TransactionTemplate tt = new TransactionTemplate(transactionManager);\n    tt.setReadOnly(readOnlyTransaction);\n    tt.setIsolationLevel(TransactionDefinition.ISOLATION_READ_UNCOMMITTED);\n    tt.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRES_NEW);\n    return tt;\n}\n\n</code></pre>\n<p>In any case I would &quot;leverage&quot; the <code>@Transactional</code> annotation specifying the appropriate transaction manager, binded with a separate data-source. I've done this for a multi-tenant application.</p>\n<p>The usage:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Transactional(transactionManager = CATALOG_TRANSACTION_MANAGER, \n    isolation = Isolation.READ_UNCOMMITTED, \n    readOnly = true)\npublic void myMethod() {\n  //....\n}\n</code></pre>\n<p>The bean(s) declaration:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CatalogDataSourceConfiguration {\n    \n    @Bean(name = &quot;catalogDataSource&quot;)\n    @ConfigurationProperties(&quot;catalog.datasource&quot;)\n    public DataSource catalogDataSource() {\n        return DataSourceBuilder.create().build();\n    }\n\n    @Bean(name = ENTITY_MANAGER_FACTORY)\n    public EntityManagerFactory entityManagerFactory(\n            @Qualifier(&quot;catalogEntityManagerFactoryBean&quot;) LocalContainerEntityManagerFactoryBean emFactoryBean) {\n        return emFactoryBean.getObject();\n    }\n\n    @Bean(name= CATALOG_TRANSACTION_MANAGER)\n    public PlatformTransactionManager catalogTM(@Qualifier(ENTITY_MANAGER_FACTORY) EntityManagerFactory emf) {\n        JpaTransactionManager transactionManager = new JpaTransactionManager();\n        transactionManager.setEntityManagerFactory(emf);\n        return transactionManager;\n    }\n\n    @Bean\n    public NamedParameterJdbcTemplate catalogJdbcTemplate() {\n        return new NamedParameterJdbcTemplate(catalogDataSource());\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":47296,"reputation":27247,"user_id":140037,"accept_rate":74,"display_name":"Brett Ryan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8114,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":11682081,"answer_count":4,"score":8,"last_activity_date":1638899941,"creation_date":1343365268,"question_id":11681713,"body_markdown":"Firstly, I can&#39;t use the declarative `@Transactional` approach as the application has multiple JDBC data-sources, I don&#39;t want to bore with the details, but suffice it to say the DAO method is passed the correct data-source to perform the logic. All JDBC data sources have the same schema, they&#39;re separated as I&#39;m exposing rest services for an ERP system.\r\n\r\nDue to this legacy system there are a lot of long lived locked records which I do not have control over, so I want dirty reads.\r\n\r\nUsing JDBC I would perform the following:\r\n\r\n    private Customer getCustomer(DataSource ds, String id) {\r\n        Customer c = null;\r\n        PreparedStatement stmt = null;\r\n        Connection con = null;\r\n        try {\r\n            con = ds.getConnection();\r\n            con.setTransactionIsolation(Connection.TRANSACTION_READ_UNCOMMITTED);\r\n            stmt = con.prepareStatement(SELECT_CUSTOMER);\r\n            stmt.setString(1, id);\r\n            ResultSet res = stmt.executeQuery();\r\n            c = buildCustomer(res);\r\n        } catch (SQLException ex) {\r\n            // log errors\r\n        } finally {\r\n            // Close resources\r\n        }\r\n        return c;\r\n    }\r\n\r\nOkay, lots&#39; of boiler-plate, I know. So I&#39;ve tried out `JdbcTemplate` since I&#39;m using spring.\r\n\r\nUse JdbcTemplate\r\n\r\n    private Customer getCustomer(JdbcTemplate t, String id) {\r\n        return t.queryForObject(SELECT_CUSTOMER, new CustomerRowMapper(), id);\r\n    }\r\n\r\nMuch nicer, but it&#39;s still using default transaction isolation. I need to somehow change this. So I thought about using a `TransactionTemplate`.\r\n\r\n    private Customer getCustomer(final TransactionTemplate tt,\r\n                                 final JdbcTemplate t,\r\n                                 final String id) {\r\n        return tt.execute(new TransactionCallback&lt;Customer&gt;() {\r\n            @Override\r\n            public Customer doInTransaction(TransactionStatus ts) {\r\n                return t.queryForObject(SELECT_CUSTOMER, new CustomerRowMapper(), id);\r\n            }\r\n        });\r\n    }\r\n\r\nBut how do I set the transaction isolation here? I can&#39;t find it anywhere on the callback or the `TransactionTemplate` to do this.\r\n\r\nI&#39;m reading Spring in Action, Third Edition which explains as far as I&#39;ve done, though the chapter on transactions continues on to using declarative transactions with annotations, but as mentioned I can&#39;t use this as my DAO needs to determine at runtime which data-source to used based on provided arguments, in my case a country code.\r\n\r\nAny help would be greatly appreciated.","title":"How can I get a spring JdbcTemplate to read_uncommitted?","body":"<p>Firstly, I can't use the declarative <code>@Transactional</code> approach as the application has multiple JDBC data-sources, I don't want to bore with the details, but suffice it to say the DAO method is passed the correct data-source to perform the logic. All JDBC data sources have the same schema, they're separated as I'm exposing rest services for an ERP system.</p>\n\n<p>Due to this legacy system there are a lot of long lived locked records which I do not have control over, so I want dirty reads.</p>\n\n<p>Using JDBC I would perform the following:</p>\n\n<pre><code>private Customer getCustomer(DataSource ds, String id) {\n    Customer c = null;\n    PreparedStatement stmt = null;\n    Connection con = null;\n    try {\n        con = ds.getConnection();\n        con.setTransactionIsolation(Connection.TRANSACTION_READ_UNCOMMITTED);\n        stmt = con.prepareStatement(SELECT_CUSTOMER);\n        stmt.setString(1, id);\n        ResultSet res = stmt.executeQuery();\n        c = buildCustomer(res);\n    } catch (SQLException ex) {\n        // log errors\n    } finally {\n        // Close resources\n    }\n    return c;\n}\n</code></pre>\n\n<p>Okay, lots' of boiler-plate, I know. So I've tried out <code>JdbcTemplate</code> since I'm using spring.</p>\n\n<p>Use JdbcTemplate</p>\n\n<pre><code>private Customer getCustomer(JdbcTemplate t, String id) {\n    return t.queryForObject(SELECT_CUSTOMER, new CustomerRowMapper(), id);\n}\n</code></pre>\n\n<p>Much nicer, but it's still using default transaction isolation. I need to somehow change this. So I thought about using a <code>TransactionTemplate</code>.</p>\n\n<pre><code>private Customer getCustomer(final TransactionTemplate tt,\n                             final JdbcTemplate t,\n                             final String id) {\n    return tt.execute(new TransactionCallback&lt;Customer&gt;() {\n        @Override\n        public Customer doInTransaction(TransactionStatus ts) {\n            return t.queryForObject(SELECT_CUSTOMER, new CustomerRowMapper(), id);\n        }\n    });\n}\n</code></pre>\n\n<p>But how do I set the transaction isolation here? I can't find it anywhere on the callback or the <code>TransactionTemplate</code> to do this.</p>\n\n<p>I'm reading Spring in Action, Third Edition which explains as far as I've done, though the chapter on transactions continues on to using declarative transactions with annotations, but as mentioned I can't use this as my DAO needs to determine at runtime which data-source to used based on provided arguments, in my case a country code.</p>\n\n<p>Any help would be greatly appreciated.</p>\n"},{"tags":["java","android","android-studio","nfc","mifare"],"comments":[{"owner":{"account_id":1654563,"reputation":57569,"user_id":1524450,"display_name":"Michael"},"score":0,"creation_date":1638898049,"post_id":70264201,"comment_id":124207952,"body_markdown":"It seems to me like you&#39;d need to implement the protocol as described in e.g. [this NXP document](https://www.nxp.com/docs/en/data-sheet/MF0ICU2.pdf), or find a library that already has implemented this. In the first scenario it would be too broad for a StackOverflow question, and in the second scenario it would be off-topic. So essentially, you need to ask a more specific question.","body":"It seems to me like you&#39;d need to implement the protocol as described in e.g. <a href=\"https://www.nxp.com/docs/en/data-sheet/MF0ICU2.pdf\" rel=\"nofollow noreferrer\">this NXP document</a>, or find a library that already has implemented this. In the first scenario it would be too broad for a StackOverflow question, and in the second scenario it would be off-topic. So essentially, you need to ask a more specific question."},{"owner":{"account_id":1654563,"reputation":57569,"user_id":1524450,"display_name":"Michael"},"score":0,"creation_date":1638898078,"post_id":70264201,"comment_id":124207963,"body_markdown":"As far as detecting the card goes; I would guess that [enabling NFC reader mode](https://developer.android.com/reference/android/nfc/NfcAdapter#enableReaderMode(android.app.Activity,%20android.nfc.NfcAdapter.ReaderCallback,%20int,%20android.os.Bundle)) with at least `FLAG_READ_NFC_A` set should work, but it&#39;s not something I&#39;ve tested myself with these types of cards.","body":"As far as detecting the card goes; I would guess that <a href=\"https://developer.android.com/reference/android/nfc/NfcAdapter#enableReaderMode(android.app.Activity,%20android.nfc.NfcAdapter.ReaderCallback,%20int,%20android.os.Bundle)\" rel=\"nofollow noreferrer\">enabling NFC reader mode</a> with at least <code>FLAG_READ_NFC_A</code> set should work, but it&#39;s not something I&#39;ve tested myself with these types of cards."},{"owner":{"account_id":11989020,"reputation":3798,"user_id":8772744,"display_name":"MD. RAKIB HASAN"},"score":0,"creation_date":1639462840,"post_id":70264201,"comment_id":124348205,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"answers":[{"tags":[],"owner":{"account_id":2755641,"reputation":8688,"user_id":2373819,"display_name":"Andrew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638899615,"creation_date":1638899615,"answer_id":70264807,"question_id":70264201,"body_markdown":"So I would ignore most guides out there on the internet as they use the older `enableForgroundDispatch` API which is bad for writing to Tag&#39;s\r\n\r\nSo https://stackoverflow.com/a/64921434/2373819 give you the basics of NFC writing using the newer and better API but for Ndef, whereas you need to use the low level NfcA `transceive` method to read and write individual memory areas instead of Ndef. The [datasheet][1] for the Tag give the details of set of bytes to send as commands to achieve this.\r\n\r\nhttps://stackoverflow.com/a/59397667/2373819 is another example but shows how to use `NfcA` `transceive`\r\n\r\nBut you must understand that all NFC interactions are driven by Tag detection when the Tag is physically moved in to range. Thus doing something only on button push is harder.\r\n\r\nYou need to do either or both of the following.\r\n\r\n1) Push button prompt user to bring the Tag in to range, read/write data.\r\n\r\n2) When Tag comes in to range, store the Tag object and then use it when the button is pushed and handle the error if the Tag has already gone out of range (at which point you could prompt the user to bring the Tag back in to range as per 1)\r\n\r\n\r\n  [1]: https://www.nxp.com/docs/en/data-sheet/MF0ICU2.pdf","title":"How to write to a Mifare Ultralight Card on Android Studio (Java)","body":"<p>So I would ignore most guides out there on the internet as they use the older <code>enableForgroundDispatch</code> API which is bad for writing to Tag's</p>\n<p>So <a href=\"https://stackoverflow.com/a/64921434/2373819\">https://stackoverflow.com/a/64921434/2373819</a> give you the basics of NFC writing using the newer and better API but for Ndef, whereas you need to use the low level NfcA <code>transceive</code> method to read and write individual memory areas instead of Ndef. The <a href=\"https://www.nxp.com/docs/en/data-sheet/MF0ICU2.pdf\" rel=\"nofollow noreferrer\">datasheet</a> for the Tag give the details of set of bytes to send as commands to achieve this.</p>\n<p><a href=\"https://stackoverflow.com/a/59397667/2373819\">https://stackoverflow.com/a/59397667/2373819</a> is another example but shows how to use <code>NfcA</code> <code>transceive</code></p>\n<p>But you must understand that all NFC interactions are driven by Tag detection when the Tag is physically moved in to range. Thus doing something only on button push is harder.</p>\n<p>You need to do either or both of the following.</p>\n<ol>\n<li><p>Push button prompt user to bring the Tag in to range, read/write data.</p>\n</li>\n<li><p>When Tag comes in to range, store the Tag object and then use it when the button is pushed and handle the error if the Tag has already gone out of range (at which point you could prompt the user to bring the Tag back in to range as per 1)</p>\n</li>\n</ol>\n"}],"owner":{"account_id":23577321,"reputation":1,"user_id":17616826,"display_name":"DJdeRepentigny"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":453,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1638899615,"creation_date":1638896845,"question_id":70264201,"body_markdown":"I&#39;ve been trying to create an app that writes data to a Mifare Ultralight NFC card but I can&#39;t seem to find any documentation that can help me. The official documents are very vague. I just want to write two pages of data when I press a button but I have no idea how to get the phone to detect the card and write.\r\nI have some experience in Java but I just started using android studio.\r\n\r\nThanks!","title":"How to write to a Mifare Ultralight Card on Android Studio (Java)","body":"<p>I've been trying to create an app that writes data to a Mifare Ultralight NFC card but I can't seem to find any documentation that can help me. The official documents are very vague. I just want to write two pages of data when I press a button but I have no idea how to get the phone to detect the card and write.\nI have some experience in Java but I just started using android studio.</p>\n<p>Thanks!</p>\n"},{"tags":["java","pdf-generation","xsl-fo"],"comments":[{"owner":{"account_id":5103278,"reputation":7584,"user_id":4092205,"display_name":"Tony Graham"},"score":0,"creation_date":1638918350,"post_id":70264795,"comment_id":124214895,"body_markdown":"Why do you want a binary image of the original PDF? Is it to stop copying or what?","body":"Why do you want a binary image of the original PDF? Is it to stop copying or what?"},{"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"score":0,"creation_date":1638920614,"post_id":70264795,"comment_id":124215377,"body_markdown":"Problem I have is that generated `pdf` is sent to third party and they have trouble reading it. Unfortunately I don&#39;t have much details on what exactly problem is. Only thing I know they have some unspecified problems with fonts. I thought if I can produce `pdf` that doesn&#39;t contains any fonts my problem will be solved. It is workaround, but I willing to give it a shot.","body":"Problem I have is that generated <code>pdf</code> is sent to third party and they have trouble reading it. Unfortunately I don&#39;t have much details on what exactly problem is. Only thing I know they have some unspecified problems with fonts. I thought if I can produce <code>pdf</code> that doesn&#39;t contains any fonts my problem will be solved. It is workaround, but I willing to give it a shot."},{"owner":{"account_id":2905849,"reputation":8813,"user_id":2491227,"accept_rate":33,"display_name":"Kevin Brown"},"score":0,"creation_date":1638933944,"post_id":70264795,"comment_id":124217591,"body_markdown":"Your lack of detail in the real issue ... is the issue. Stating &quot;they have trouble reading it&quot; does not help. With their eyes? With a computer program that reads the content? Those two different things are very different and your idea would not solve one of them and likely make it worse. You need to provide specifics behing their issues for anyone to help you in any way that could solve the problem.","body":"Your lack of detail in the real issue ... is the issue. Stating &quot;they have trouble reading it&quot; does not help. With their eyes? With a computer program that reads the content? Those two different things are very different and your idea would not solve one of them and likely make it worse. You need to provide specifics behing their issues for anyone to help you in any way that could solve the problem."},{"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"score":1,"creation_date":1638980621,"post_id":70264795,"comment_id":124232868,"body_markdown":"I don&#39;t want to solve specific problems with fonts, because I don&#39;t know any details on what exactly problem is. I want to avoid it completely by turning my pdf in basically picture. I still need it to be in pdf format though.","body":"I don&#39;t want to solve specific problems with fonts, because I don&#39;t know any details on what exactly problem is. I want to avoid it completely by turning my pdf in basically picture. I still need it to be in pdf format though."},{"owner":{"account_id":4570164,"reputation":4170,"user_id":3710053,"display_name":"Siebe Jongebloed"},"score":1,"creation_date":1641481928,"post_id":70264795,"comment_id":124819405,"body_markdown":"I don&#39;t think you can solve that with xsl. But since you are using java, take a look at https://pdfbox.apache.org/. \nA good start would be these answers: https://stackoverflow.com/a/21071761/3710053 \nand https://stackoverflow.com/a/23409518/3710053","body":"I don&#39;t think you can solve that with xsl. But since you are using java, take a look at <a href=\"https://pdfbox.apache.org/\" rel=\"nofollow noreferrer\">pdfbox.apache.org</a>.  A good start would be these answers: <a href=\"https://stackoverflow.com/a/21071761/3710053\">stackoverflow.com/a/21071761/3710053</a>  and <a href=\"https://stackoverflow.com/a/23409518/3710053\">stackoverflow.com/a/23409518/3710053</a>"}],"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1638899548,"creation_date":1638899548,"question_id":70264795,"body_markdown":"I currently generate complex `pdf` using `xsl-fo`.\r\nIs it possible to create `pdf` that contains binary image of its content?\r\n\r\nI want to basically render document inside transformation.\r\n\r\nMaybe there are some rendering options?\r\n\r\nMy `xsl` is pretty complex, so I want to minimize changes. \r\n\r\n ","title":"Generate flat PDF","body":"<p>I currently generate complex <code>pdf</code> using <code>xsl-fo</code>.\nIs it possible to create <code>pdf</code> that contains binary image of its content?</p>\n<p>I want to basically render document inside transformation.</p>\n<p>Maybe there are some rendering options?</p>\n<p>My <code>xsl</code> is pretty complex, so I want to minimize changes.</p>\n"},{"tags":["java","spring-boot","webhooks"],"comments":[{"owner":{"account_id":514697,"reputation":1188,"user_id":1574215,"accept_rate":55,"display_name":"Nyamiou The Galeanthrope"},"score":0,"creation_date":1606492666,"post_id":65040075,"comment_id":114985277,"body_markdown":"Pretty sure it should be data.id, data.account_id, data.status, ... instead of data[id], data[account_id], data[status], ...","body":"Pretty sure it should be data.id, data.account_id, data.status, ... instead of data[id], data[account_id], data[status], ..."},{"owner":{"account_id":4360995,"reputation":172,"user_id":3558080,"display_name":"Daniel Santana"},"score":0,"creation_date":1606502379,"post_id":65040075,"comment_id":114988716,"body_markdown":"@NyamiouTheGaleanthrope, but unfortunately, it&#39;s not. Second API documentation, post content is data[id], etc. https://dev.iugu.com/docs/referencias-gatilhos.\n\nI do not have access to change API implementation. It&#39;s a third party API, then I need to know if there is a way to get this values in Spring Boot in this format.","body":"@NyamiouTheGaleanthrope, but unfortunately, it&#39;s not. Second API documentation, post content is data[id], etc. <a href=\"https://dev.iugu.com/docs/referencias-gatilhos\" rel=\"nofollow noreferrer\">dev.iugu.com/docs/referencias-gatilhos</a>.  I do not have access to change API implementation. It&#39;s a third party API, then I need to know if there is a way to get this values in Spring Boot in this format."}],"answers":[{"tags":[],"owner":{"account_id":23495349,"reputation":1,"user_id":17545869,"display_name":"Igor Miguel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638899028,"creation_date":1638899028,"answer_id":70264682,"question_id":65040075,"body_markdown":"I have the same problem using Iugu Webhooks API. To solve, i just stringify the raw data sent by Iugu, remove the unwanted characters, and then parse again the object to get the variables that i want.\r\n\r\n        var dataReceived = JSON.stringify(req.body).replace(&#39;data[id]&#39;,&#39;id&#39;).replace(&#39;data[status]&#39;,&#39;status&#39;).replace(&#39;data[account_id]&#39;,&#39;account_id&#39;);\r\n    \r\n      var finalData = JSON.parse(dataReceived);\r\n    \r\n      return res.status(200).send(finalData.id);","title":"Receive an urlenconded in Spring Boot API","body":"<p>I have the same problem using Iugu Webhooks API. To solve, i just stringify the raw data sent by Iugu, remove the unwanted characters, and then parse again the object to get the variables that i want.</p>\n<pre><code>    var dataReceived = JSON.stringify(req.body).replace('data[id]','id').replace('data[status]','status').replace('data[account_id]','account_id');\n\n  var finalData = JSON.parse(dataReceived);\n\n  return res.status(200).send(finalData.id);\n</code></pre>\n"}],"owner":{"account_id":4360995,"reputation":172,"user_id":3558080,"display_name":"Daniel Santana"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1638899028,"creation_date":1606491905,"question_id":65040075,"body_markdown":"I need to receive a request from a webhook from a third party API. \r\n\r\nPost content is an urlenconded in following format:\r\n\r\n&gt; event=invoice.created&amp;data%5Bid%5D=value1&amp;data%5Bstatus%5D=pending&amp;data%5Baccount_id%5D=value2\r\n\r\nThe problem is serialize this params data[id] with these square brackets. I&#39;m getting an error in spring boot:\r\n\r\n&gt; Invalid property &#39;data[account_id]&#39; of bean class [br.com.bettha.domain.dto.IuguWebhookDto]: Property referenced in indexed property path &#39;data[account_id]&#39; is neither an array nor a List nor a Map; returned value was [IuguDataDto(id=null, account_id=null, status=null, subscription_id=null)]\r\n\r\nMy controller:\r\n\r\n    @PostMapping(value = &quot;/subscription-invoice&quot;, consumes = {MediaType.APPLICATION_FORM_URLENCODED_VALUE})\r\n\t@ApiOperation(\r\n\t\t\tvalue=&quot;Create a subscription invoice from Iugu&#39;s webhook&quot;,\r\n\t\t\tresponse= Invoice.class,\r\n\t\t\tnotes=&quot;This Operation creates a subscription invoice from Iugu&#39;s webhook&quot;)\r\n\t@PreAuthorize(&quot;#oauth2.hasScope(&#39;read&#39;)&quot;)\r\n\tpublic ResponseEntity&lt;Invoice&gt; createSubscriptionInvoice(IuguWebhookDto iuguWebhookDto) {\r\n\t\ttry {\r\n\t\t\tInvoice invoice = paymentService.createSubscriptionInvoiceFromIugusWebhook(iuguWebhookDto);\r\n\t\t\treturn new ResponseEntity&lt;&gt;(invoice, HttpStatus.CREATED);\r\n\t\t} catch (EntityNotFoundException e) {\r\n\t\t\tthrow new ResponseStatusException(HttpStatus.NOT_FOUND, e.getMessage(), e);\r\n\t\t} catch (Exception e) {\r\n\t\t\tthrow new ResponseStatusException(HttpStatus.INTERNAL_SERVER_ERROR, e.getMessage(), e);\r\n\t\t}\r\n\t}\r\n\r\nIuguWebhookDto.java:\r\n```\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@ToString\r\npublic class IuguWebhookDto implements Serializable {\r\n    private static final long serialVersionUID = -5557936429069206933L;\r\n\r\n    private String event;\r\n    \r\n    private IuguDataDto data;\r\n```\r\n\r\nIuguDataDto.java:\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@ToString\r\npublic class IuguDataDto implements Serializable {\r\n    private static final long serialVersionUID = -5557936429069206933L;\r\n\r\n    private String id;\r\n\r\n    private String account_id;\r\n\r\n    private String status;\r\n\r\n    private String subscription_id;\r\n```\r\n\r\nHow can I receive these request params as an object in Spring Boot?","title":"Receive an urlenconded in Spring Boot API","body":"<p>I need to receive a request from a webhook from a third party API.</p>\n<p>Post content is an urlenconded in following format:</p>\n<blockquote>\n<p>event=invoice.created&amp;data%5Bid%5D=value1&amp;data%5Bstatus%5D=pending&amp;data%5Baccount_id%5D=value2</p>\n</blockquote>\n<p>The problem is serialize this params data[id] with these square brackets. I'm getting an error in spring boot:</p>\n<blockquote>\n<p>Invalid property 'data[account_id]' of bean class [br.com.bettha.domain.dto.IuguWebhookDto]: Property referenced in indexed property path 'data[account_id]' is neither an array nor a List nor a Map; returned value was [IuguDataDto(id=null, account_id=null, status=null, subscription_id=null)]</p>\n</blockquote>\n<p>My controller:</p>\n<pre><code>@PostMapping(value = &quot;/subscription-invoice&quot;, consumes = {MediaType.APPLICATION_FORM_URLENCODED_VALUE})\n@ApiOperation(\n        value=&quot;Create a subscription invoice from Iugu's webhook&quot;,\n        response= Invoice.class,\n        notes=&quot;This Operation creates a subscription invoice from Iugu's webhook&quot;)\n@PreAuthorize(&quot;#oauth2.hasScope('read')&quot;)\npublic ResponseEntity&lt;Invoice&gt; createSubscriptionInvoice(IuguWebhookDto iuguWebhookDto) {\n    try {\n        Invoice invoice = paymentService.createSubscriptionInvoiceFromIugusWebhook(iuguWebhookDto);\n        return new ResponseEntity&lt;&gt;(invoice, HttpStatus.CREATED);\n    } catch (EntityNotFoundException e) {\n        throw new ResponseStatusException(HttpStatus.NOT_FOUND, e.getMessage(), e);\n    } catch (Exception e) {\n        throw new ResponseStatusException(HttpStatus.INTERNAL_SERVER_ERROR, e.getMessage(), e);\n    }\n}\n</code></pre>\n<p>IuguWebhookDto.java:</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@ToString\npublic class IuguWebhookDto implements Serializable {\n    private static final long serialVersionUID = -5557936429069206933L;\n\n    private String event;\n    \n    private IuguDataDto data;\n</code></pre>\n<p>IuguDataDto.java:</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@ToString\npublic class IuguDataDto implements Serializable {\n    private static final long serialVersionUID = -5557936429069206933L;\n\n    private String id;\n\n    private String account_id;\n\n    private String status;\n\n    private String subscription_id;\n</code></pre>\n<p>How can I receive these request params as an object in Spring Boot?</p>\n"},{"tags":["java","json","report"],"comments":[{"owner":{"display_name":"user1514879"},"score":0,"creation_date":1358349032,"post_id":11536995,"comment_id":19968230,"body_markdown":"Did you ever get this working?  I&#39;m trying the same thing now","body":"Did you ever get this working?  I&#39;m trying the same thing now"}],"answers":[{"tags":[],"owner":{"account_id":238974,"reputation":3579,"user_id":508247,"accept_rate":50,"display_name":"pmckeown"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1363767866,"creation_date":1363767866,"answer_id":15518513,"question_id":11536995,"body_markdown":"I&#39;ve just been struggling with using JSON as the DataSource to a Jasper Report and with a lack of decent examples on the Net I thought I would post this here for future reference.  \r\n\r\nThis example is how to use iReport Designer and a JSON DataSource.\r\n\r\nFirstly, the input JSON:\r\n\r\n    { \r\n        &quot;userName&quot;: &quot;Evil Raat&quot;,\r\n        &quot;details&quot;: {\r\n            &quot;email&quot;: &quot;not_really@test.com&quot;\r\n        }\r\n    }\r\n\r\nThen create a JSON DataSource in iReport Designer and point it at your file (leaving all the other details as their defaults)\r\n\r\nNext you can use the following jrxml template to render the above JSON into a report:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;jasperReport xmlns=&quot;http://jasperreports.sourceforge.net/jasperreports&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd&quot; name=&quot;sample&quot; language=&quot;groovy&quot; pageWidth=&quot;595&quot; pageHeight=&quot;842&quot; columnWidth=&quot;555&quot; leftMargin=&quot;20&quot; rightMargin=&quot;20&quot; topMargin=&quot;20&quot; bottomMargin=&quot;20&quot; uuid=&quot;a894078a-929b-4aae-a1d0-46485f0f8835&quot;&gt;\r\n    \t&lt;property name=&quot;ireport.zoom&quot; value=&quot;1.0&quot;/&gt;\r\n    \t&lt;property name=&quot;ireport.x&quot; value=&quot;0&quot;/&gt;\r\n    \t&lt;property name=&quot;ireport.y&quot; value=&quot;0&quot;/&gt;\r\n    \t&lt;queryString language=&quot;json&quot;&gt;\r\n    \t\t&lt;![CDATA[]]&gt;\r\n    \t&lt;/queryString&gt;\r\n    \t&lt;field name=&quot;userName&quot; class=&quot;java.lang.String&quot;&gt;\r\n    \t\t&lt;fieldDescription&gt;&lt;![CDATA[userName]]&gt;&lt;/fieldDescription&gt;\r\n    \t&lt;/field&gt;\r\n    \t&lt;field name=&quot;userEmail&quot; class=&quot;java.lang.String&quot;&gt;\r\n    \t\t&lt;fieldDescription&gt;&lt;![CDATA[details.email]]&gt;&lt;/fieldDescription&gt;\r\n    \t&lt;/field&gt;\r\n    \t&lt;title&gt;\r\n    \t\t&lt;band height=&quot;200&quot; splitType=&quot;Stretch&quot;&gt;\r\n    \t\t\t&lt;textField&gt;\r\n    \t\t\t\t&lt;reportElement uuid=&quot;3b74775b-4555-43c3-bdf2-1677145c8660&quot; x=&quot;0&quot; y=&quot;31&quot; width=&quot;555&quot; height=&quot;20&quot;/&gt;\r\n    \t\t\t\t&lt;textElement textAlignment=&quot;Right&quot;&gt;\r\n    \t\t\t\t\t&lt;font fontName=&quot;Helvetica&quot; size=&quot;12&quot; isBold=&quot;true&quot;/&gt;\r\n    \t\t\t\t&lt;/textElement&gt;\r\n    \t\t\t\t&lt;textFieldExpression&gt;&lt;![CDATA[$F{userName}]]&gt;&lt;/textFieldExpression&gt;\r\n    \t\t\t&lt;/textField&gt;\r\n    \t\t\t&lt;textField&gt;\r\n    \t\t\t\t&lt;reportElement uuid=&quot;aa6cc7c8-2ca1-4f0f-92e2-c466083daba0&quot; x=&quot;0&quot; y=&quot;54&quot; width=&quot;555&quot; height=&quot;20&quot;/&gt;\r\n    \t\t\t\t&lt;textElement textAlignment=&quot;Right&quot;&gt;\r\n    \t\t\t\t\t&lt;font fontName=&quot;Helvetica&quot; size=&quot;12&quot; isBold=&quot;true&quot;/&gt;\r\n    \t\t\t\t&lt;/textElement&gt;\r\n    \t\t\t\t&lt;textFieldExpression&gt;&lt;![CDATA[$F{userEmail}]]&gt;&lt;/textFieldExpression&gt;\r\n    \t\t\t&lt;/textField&gt;\r\n    \t\t&lt;/band&gt;\r\n    \t&lt;/title&gt;\r\n    &lt;/jasperReport&gt;\r\n\r\n**NOTE:** You must define the field elements first, before any they can be used.  They should be the JSON path from the root of the JSON input file using standard dot notation.  See the fieldDescription elements above for examples.\r\n\r\nOnce your field is defined you can use its computed value in a text field or whatever: &lt;![CDATA[$F{userName}]]&gt;\r\n\r\nHope that helps some people.  ","title":"Create Jasper Report PDF form from JSON Object or JSON String","body":"<p>I've just been struggling with using JSON as the DataSource to a Jasper Report and with a lack of decent examples on the Net I thought I would post this here for future reference.  </p>\n\n<p>This example is how to use iReport Designer and a JSON DataSource.</p>\n\n<p>Firstly, the input JSON:</p>\n\n<pre><code>{ \n    \"userName\": \"Evil Raat\",\n    \"details\": {\n        \"email\": \"not_really@test.com\"\n    }\n}\n</code></pre>\n\n<p>Then create a JSON DataSource in iReport Designer and point it at your file (leaving all the other details as their defaults)</p>\n\n<p>Next you can use the following jrxml template to render the above JSON into a report:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;jasperReport xmlns=\"http://jasperreports.sourceforge.net/jasperreports\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd\" name=\"sample\" language=\"groovy\" pageWidth=\"595\" pageHeight=\"842\" columnWidth=\"555\" leftMargin=\"20\" rightMargin=\"20\" topMargin=\"20\" bottomMargin=\"20\" uuid=\"a894078a-929b-4aae-a1d0-46485f0f8835\"&gt;\n    &lt;property name=\"ireport.zoom\" value=\"1.0\"/&gt;\n    &lt;property name=\"ireport.x\" value=\"0\"/&gt;\n    &lt;property name=\"ireport.y\" value=\"0\"/&gt;\n    &lt;queryString language=\"json\"&gt;\n        &lt;![CDATA[]]&gt;\n    &lt;/queryString&gt;\n    &lt;field name=\"userName\" class=\"java.lang.String\"&gt;\n        &lt;fieldDescription&gt;&lt;![CDATA[userName]]&gt;&lt;/fieldDescription&gt;\n    &lt;/field&gt;\n    &lt;field name=\"userEmail\" class=\"java.lang.String\"&gt;\n        &lt;fieldDescription&gt;&lt;![CDATA[details.email]]&gt;&lt;/fieldDescription&gt;\n    &lt;/field&gt;\n    &lt;title&gt;\n        &lt;band height=\"200\" splitType=\"Stretch\"&gt;\n            &lt;textField&gt;\n                &lt;reportElement uuid=\"3b74775b-4555-43c3-bdf2-1677145c8660\" x=\"0\" y=\"31\" width=\"555\" height=\"20\"/&gt;\n                &lt;textElement textAlignment=\"Right\"&gt;\n                    &lt;font fontName=\"Helvetica\" size=\"12\" isBold=\"true\"/&gt;\n                &lt;/textElement&gt;\n                &lt;textFieldExpression&gt;&lt;![CDATA[$F{userName}]]&gt;&lt;/textFieldExpression&gt;\n            &lt;/textField&gt;\n            &lt;textField&gt;\n                &lt;reportElement uuid=\"aa6cc7c8-2ca1-4f0f-92e2-c466083daba0\" x=\"0\" y=\"54\" width=\"555\" height=\"20\"/&gt;\n                &lt;textElement textAlignment=\"Right\"&gt;\n                    &lt;font fontName=\"Helvetica\" size=\"12\" isBold=\"true\"/&gt;\n                &lt;/textElement&gt;\n                &lt;textFieldExpression&gt;&lt;![CDATA[$F{userEmail}]]&gt;&lt;/textFieldExpression&gt;\n            &lt;/textField&gt;\n        &lt;/band&gt;\n    &lt;/title&gt;\n&lt;/jasperReport&gt;\n</code></pre>\n\n<p><strong>NOTE:</strong> You must define the field elements first, before any they can be used.  They should be the JSON path from the root of the JSON input file using standard dot notation.  See the fieldDescription elements above for examples.</p>\n\n<p>Once your field is defined you can use its computed value in a text field or whatever: </p>\n\n<p>Hope that helps some people.  </p>\n"},{"tags":[],"owner":{"account_id":3343428,"reputation":141,"user_id":2809126,"display_name":"jerry"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1505885804,"creation_date":1505885804,"answer_id":46314028,"question_id":11536995,"body_markdown":"This is how I handle json arrays in jasper\r\n\r\nLets say I want to report off the following array.\r\n\r\n    [\r\n      {&quot;name&quot;:&quot;Jerry&quot;, &quot;value&quot;:&quot;Jesus&quot;},\r\n      {&quot;name&quot;:&quot;Gideon&quot;, &quot;value&quot;: &quot;Loves&quot;},\r\n      {&quot;name&quot;:&quot;Eva&quot;, &quot;value&quot;: &quot;You&quot;}\r\n    ]\r\n\r\nWhen designing the report, make sure you name the fields the exact same name as your json field name. So in the designer I would add two fields called **name** and **value**. You can even add as many parameters to the report designer as needed. For this example, I will add a parameter called **title** in Jasper Studio.\r\n\r\nNow here is the java code that will create the jasper report based off of this test array. I will hard code the json data in the code, but you can load from file or whatever you feel is best. I commented the code to explain what is happening.\r\n\r\n    import net.sf.jasperreports.engine.export.JRHtmlExporterParameter;\r\n    import net.sf.jasperreports.engine.export.JRXlsExporterParameter;\r\n    import net.sf.jasperreports.engine.export.JRHtmlExporter;\r\n    import net.sf.jasperreports.engine.export.JRXlsExporter;\r\n    import net.sf.jasperreports.engine.data.JsonDataSource;\r\n    import net.sf.jasperreports.engine.JRExporterParameter;\r\n    import net.sf.jasperreports.engine.JasperExportManager;\r\n    import net.sf.jasperreports.engine.JasperFillManager;\r\n    import net.sf.jasperreports.engine.util.JRLoader;\r\n    import net.sf.jasperreports.engine.JasperReport;\r\n    import net.sf.jasperreports.engine.JRException;\r\n    import net.sf.jasperreports.engine.JasperPrint;\r\n    import org.apache.commons.codec.binary.Base64;\r\n    import java.util.HashMap;\r\n    import java.util.Locale;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import java.io.*;\r\n    \r\n    //Class Name. This must match the class name you put in your build.gradle file\r\n    public class JasperPDFExample {\r\n     public static void main(String[] args) {\r\n      try {\r\n       try {\r\n        //Our json object. This can be loaded from file\r\n        String rawJsonData = &quot;[{\\&quot;name\\&quot;:\\&quot;Jerry\\&quot;, \\&quot;value\\&quot;:\\&quot;Jesus\\&quot;},&quot;\r\n                           + &quot;{\\&quot;name\\&quot;:\\&quot;Gideon\\&quot;, \\&quot;value\\&quot;: \\&quot;Loves\\&quot;},&quot;\r\n                           + &quot;{\\&quot;name\\&quot;:\\&quot;Eva\\&quot;, \\&quot;value\\&quot;: \\&quot;You\\&quot;}&quot;\r\n                           + &quot;]&quot;;\r\n        //Load compiled jasper report that we created on first section.\r\n        JasperReport report = (JasperReport) JRLoader.loadObject(new File(&quot;/home/jerry/Sample.jasper&quot;));\r\n        //Convert json string to byte array.\r\n        ByteArrayInputStream jsonDataStream = new ByteArrayInputStream(rawJsonData.getBytes());\r\n        //Create json datasource from json stream\r\n        JsonDataSource ds = new JsonDataSource(jsonDataStream);\r\n        //Create HashMap to add report parameters\r\n        Map parameters = new HashMap();\r\n        //Add title parameter. Make sure the key is same name as what you named the parameter in jasper report.\r\n        parameters.put(&quot;title&quot;, &quot;Jasper PDF Example&quot;);\r\n        //Create Jasper Print object passing report, parameter json data source.\r\n        JasperPrint jasperPrint = JasperFillManager.fillReport(report, parameters, ds);\r\n        //Export and save pdf to file\r\n        JasperExportManager.exportReportToPdfFile(jasperPrint,&quot;/home/jerry/jasperpdfexample.pdf&quot;);\r\n       } catch (JRException ex) {\r\n        ex.printStackTrace();\r\n        throw new RuntimeException(ex);\r\n       } catch (Exception ex) {\r\n        ex.printStackTrace();\r\n        throw new RuntimeException(ex);\r\n       }\r\n      } catch (Exception ex) {\r\n       ex.printStackTrace();\r\n       throw new RuntimeException(ex);\r\n      }\r\n     }\r\n    }\r\n\r\nThanks to https://mis.io/pub/how-to-create-a-jasper-pdf-report-from-a-json-datasource-in-java/ I was able to get this to work along with setting up java for jasper using gradle build tool.","title":"Create Jasper Report PDF form from JSON Object or JSON String","body":"<p>This is how I handle json arrays in jasper</p>\n\n<p>Lets say I want to report off the following array.</p>\n\n<pre><code>[\n  {\"name\":\"Jerry\", \"value\":\"Jesus\"},\n  {\"name\":\"Gideon\", \"value\": \"Loves\"},\n  {\"name\":\"Eva\", \"value\": \"You\"}\n]\n</code></pre>\n\n<p>When designing the report, make sure you name the fields the exact same name as your json field name. So in the designer I would add two fields called <strong>name</strong> and <strong>value</strong>. You can even add as many parameters to the report designer as needed. For this example, I will add a parameter called <strong>title</strong> in Jasper Studio.</p>\n\n<p>Now here is the java code that will create the jasper report based off of this test array. I will hard code the json data in the code, but you can load from file or whatever you feel is best. I commented the code to explain what is happening.</p>\n\n<pre><code>import net.sf.jasperreports.engine.export.JRHtmlExporterParameter;\nimport net.sf.jasperreports.engine.export.JRXlsExporterParameter;\nimport net.sf.jasperreports.engine.export.JRHtmlExporter;\nimport net.sf.jasperreports.engine.export.JRXlsExporter;\nimport net.sf.jasperreports.engine.data.JsonDataSource;\nimport net.sf.jasperreports.engine.JRExporterParameter;\nimport net.sf.jasperreports.engine.JasperExportManager;\nimport net.sf.jasperreports.engine.JasperFillManager;\nimport net.sf.jasperreports.engine.util.JRLoader;\nimport net.sf.jasperreports.engine.JasperReport;\nimport net.sf.jasperreports.engine.JRException;\nimport net.sf.jasperreports.engine.JasperPrint;\nimport org.apache.commons.codec.binary.Base64;\nimport java.util.HashMap;\nimport java.util.Locale;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Map;\nimport java.io.*;\n\n//Class Name. This must match the class name you put in your build.gradle file\npublic class JasperPDFExample {\n public static void main(String[] args) {\n  try {\n   try {\n    //Our json object. This can be loaded from file\n    String rawJsonData = \"[{\\\"name\\\":\\\"Jerry\\\", \\\"value\\\":\\\"Jesus\\\"},\"\n                       + \"{\\\"name\\\":\\\"Gideon\\\", \\\"value\\\": \\\"Loves\\\"},\"\n                       + \"{\\\"name\\\":\\\"Eva\\\", \\\"value\\\": \\\"You\\\"}\"\n                       + \"]\";\n    //Load compiled jasper report that we created on first section.\n    JasperReport report = (JasperReport) JRLoader.loadObject(new File(\"/home/jerry/Sample.jasper\"));\n    //Convert json string to byte array.\n    ByteArrayInputStream jsonDataStream = new ByteArrayInputStream(rawJsonData.getBytes());\n    //Create json datasource from json stream\n    JsonDataSource ds = new JsonDataSource(jsonDataStream);\n    //Create HashMap to add report parameters\n    Map parameters = new HashMap();\n    //Add title parameter. Make sure the key is same name as what you named the parameter in jasper report.\n    parameters.put(\"title\", \"Jasper PDF Example\");\n    //Create Jasper Print object passing report, parameter json data source.\n    JasperPrint jasperPrint = JasperFillManager.fillReport(report, parameters, ds);\n    //Export and save pdf to file\n    JasperExportManager.exportReportToPdfFile(jasperPrint,\"/home/jerry/jasperpdfexample.pdf\");\n   } catch (JRException ex) {\n    ex.printStackTrace();\n    throw new RuntimeException(ex);\n   } catch (Exception ex) {\n    ex.printStackTrace();\n    throw new RuntimeException(ex);\n   }\n  } catch (Exception ex) {\n   ex.printStackTrace();\n   throw new RuntimeException(ex);\n  }\n }\n}\n</code></pre>\n\n<p>Thanks to <a href=\"https://mis.io/pub/how-to-create-a-jasper-pdf-report-from-a-json-datasource-in-java/\" rel=\"noreferrer\">https://mis.io/pub/how-to-create-a-jasper-pdf-report-from-a-json-datasource-in-java/</a> I was able to get this to work along with setting up java for jasper using gradle build tool.</p>\n"},{"tags":[],"owner":{"account_id":2283646,"reputation":11117,"user_id":2008247,"accept_rate":77,"display_name":"Jan Bodnar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638898911,"creation_date":1638898911,"answer_id":70264655,"question_id":11536995,"body_markdown":"You shoot yourself in the foot if you do it in Java. \r\n\r\nA Groovy example is much more easy:\r\n\r\n```groovy\r\n@Grab(group=&#39;net.sf.jasperreports&#39;, module=&#39;jasperreports&#39;, version=&#39;6.17.0&#39;)\r\n\r\nimport net.sf.jasperreports.engine.JasperCompileManager\r\nimport net.sf.jasperreports.engine.JasperFillManager\r\nimport net.sf.jasperreports.engine.JasperExportManager\r\nimport net.sf.jasperreports.engine.data.JsonDataSource\r\n\r\ndef xmlFile = &quot;report.xml&quot;\r\ndef jrReport = JasperCompileManager.compileReport(xmlFile)\r\n\r\ndef url = &#39;https://jsonplaceholder.typicode.com/users&#39;\r\ndef is = new URL(url).openStream()\r\ndef ds = new JsonDataSource(is)\r\n\r\ndef params = [:]\r\ndef jrPrint = JasperFillManager.fillReport(jrReport, params, ds)\r\n\r\nJasperExportManager.exportReportToPdfFile(jrPrint, &quot;report.pdf&quot;)\r\n```\r\n\r\nReport template:\r\n\r\n\r\n```xml\r\n&lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE jasperReport PUBLIC &quot;//JasperReports//DTD Report Design//EN&quot;\r\n        &quot;http://jasperreports.sourceforge.net/dtds/jasperreport.dtd&quot;&gt;\r\n\r\n&lt;jasperReport xmlns=&quot;http://jasperreports.sourceforge.net/jasperreports&quot;\r\n              xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n              xsi:schemaLocation=&quot;http://jasperreports.sourceforge.net/jasperreports\r\n   http://jasperreports.sourceforge.net/xsd/jasperreport.xsd&quot;\r\n              name=&quot;report&quot; topMargin=&quot;20&quot; bottomMargin=&quot;20&quot;&gt;\r\n\r\n    &lt;queryString language=&quot;json&quot;&gt;\r\n        &lt;![CDATA[]]&gt;\r\n    &lt;/queryString&gt;\r\n\r\n    &lt;field name=&quot;id&quot; class=&quot;java.lang.Long&quot;/&gt;\r\n    &lt;field name=&quot;name&quot;/&gt;\r\n    &lt;field name=&quot;username&quot;/&gt;\r\n\r\n    &lt;detail&gt;\r\n        &lt;band height=&quot;15&quot;&gt;\r\n\r\n            &lt;textField&gt;\r\n                &lt;reportElement x=&quot;0&quot; y=&quot;0&quot; width=&quot;50&quot; height=&quot;15&quot;/&gt;\r\n                &lt;textElement textAlignment=&quot;Right&quot; verticalAlignment=&quot;Middle&quot;/&gt;\r\n                &lt;textFieldExpression class=&quot;java.lang.Long&quot;&gt;\r\n                    &lt;![CDATA[$F{id}]]&gt;\r\n                &lt;/textFieldExpression&gt;\r\n            &lt;/textField&gt;\r\n\r\n            &lt;textField&gt;\r\n                &lt;reportElement x=&quot;70&quot; y=&quot;0&quot; width=&quot;100&quot; height=&quot;15&quot; /&gt;\r\n\r\n                &lt;textElement textAlignment=&quot;Left&quot; verticalAlignment=&quot;Middle&quot;/&gt;\r\n                &lt;textFieldExpression&gt;\r\n                    &lt;![CDATA[$F{name}]]&gt;\r\n                &lt;/textFieldExpression&gt;\r\n            &lt;/textField&gt;\r\n\r\n            &lt;textField&gt;\r\n                &lt;reportElement x=&quot;190&quot; y=&quot;0&quot; width=&quot;100&quot; height=&quot;15&quot; /&gt;\r\n                &lt;textElement textAlignment=&quot;Right&quot; verticalAlignment=&quot;Middle&quot;/&gt;\r\n                &lt;textFieldExpression&gt;\r\n                    &lt;![CDATA[$F{username}]]&gt;\r\n                &lt;/textFieldExpression&gt;\r\n            &lt;/textField&gt;\r\n\r\n        &lt;/band&gt;\r\n    &lt;/detail&gt;\r\n\r\n&lt;/jasperReport&gt;\r\n```\r\n\r\nIn the example, we get data from the popular API test website https://jsonplaceholder.typicode.com/users and pick three fields to be displayed in our report. \r\n\r\nrun with `$ groovy report.gvy`","title":"Create Jasper Report PDF form from JSON Object or JSON String","body":"<p>You shoot yourself in the foot if you do it in Java.</p>\n<p>A Groovy example is much more easy:</p>\n<pre><code>@Grab(group='net.sf.jasperreports', module='jasperreports', version='6.17.0')\n\nimport net.sf.jasperreports.engine.JasperCompileManager\nimport net.sf.jasperreports.engine.JasperFillManager\nimport net.sf.jasperreports.engine.JasperExportManager\nimport net.sf.jasperreports.engine.data.JsonDataSource\n\ndef xmlFile = &quot;report.xml&quot;\ndef jrReport = JasperCompileManager.compileReport(xmlFile)\n\ndef url = 'https://jsonplaceholder.typicode.com/users'\ndef is = new URL(url).openStream()\ndef ds = new JsonDataSource(is)\n\ndef params = [:]\ndef jrPrint = JasperFillManager.fillReport(jrReport, params, ds)\n\nJasperExportManager.exportReportToPdfFile(jrPrint, &quot;report.pdf&quot;)\n</code></pre>\n<p>Report template:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE jasperReport PUBLIC &quot;//JasperReports//DTD Report Design//EN&quot;\n        &quot;http://jasperreports.sourceforge.net/dtds/jasperreport.dtd&quot;&gt;\n\n&lt;jasperReport xmlns=&quot;http://jasperreports.sourceforge.net/jasperreports&quot;\n              xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n              xsi:schemaLocation=&quot;http://jasperreports.sourceforge.net/jasperreports\n   http://jasperreports.sourceforge.net/xsd/jasperreport.xsd&quot;\n              name=&quot;report&quot; topMargin=&quot;20&quot; bottomMargin=&quot;20&quot;&gt;\n\n    &lt;queryString language=&quot;json&quot;&gt;\n        &lt;![CDATA[]]&gt;\n    &lt;/queryString&gt;\n\n    &lt;field name=&quot;id&quot; class=&quot;java.lang.Long&quot;/&gt;\n    &lt;field name=&quot;name&quot;/&gt;\n    &lt;field name=&quot;username&quot;/&gt;\n\n    &lt;detail&gt;\n        &lt;band height=&quot;15&quot;&gt;\n\n            &lt;textField&gt;\n                &lt;reportElement x=&quot;0&quot; y=&quot;0&quot; width=&quot;50&quot; height=&quot;15&quot;/&gt;\n                &lt;textElement textAlignment=&quot;Right&quot; verticalAlignment=&quot;Middle&quot;/&gt;\n                &lt;textFieldExpression class=&quot;java.lang.Long&quot;&gt;\n                    &lt;![CDATA[$F{id}]]&gt;\n                &lt;/textFieldExpression&gt;\n            &lt;/textField&gt;\n\n            &lt;textField&gt;\n                &lt;reportElement x=&quot;70&quot; y=&quot;0&quot; width=&quot;100&quot; height=&quot;15&quot; /&gt;\n\n                &lt;textElement textAlignment=&quot;Left&quot; verticalAlignment=&quot;Middle&quot;/&gt;\n                &lt;textFieldExpression&gt;\n                    &lt;![CDATA[$F{name}]]&gt;\n                &lt;/textFieldExpression&gt;\n            &lt;/textField&gt;\n\n            &lt;textField&gt;\n                &lt;reportElement x=&quot;190&quot; y=&quot;0&quot; width=&quot;100&quot; height=&quot;15&quot; /&gt;\n                &lt;textElement textAlignment=&quot;Right&quot; verticalAlignment=&quot;Middle&quot;/&gt;\n                &lt;textFieldExpression&gt;\n                    &lt;![CDATA[$F{username}]]&gt;\n                &lt;/textFieldExpression&gt;\n            &lt;/textField&gt;\n\n        &lt;/band&gt;\n    &lt;/detail&gt;\n\n&lt;/jasperReport&gt;\n</code></pre>\n<p>In the example, we get data from the popular API test website <a href=\"https://jsonplaceholder.typicode.com/users\" rel=\"nofollow noreferrer\">https://jsonplaceholder.typicode.com/users</a> and pick three fields to be displayed in our report.</p>\n<p>run with <code>$ groovy report.gvy</code></p>\n"}],"owner":{"account_id":1202341,"reputation":363,"user_id":1172729,"accept_rate":50,"display_name":"Peer Mohamed"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38368,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"answer_count":3,"score":16,"last_activity_date":1638898911,"creation_date":1342599297,"question_id":11536995,"body_markdown":"It is fine when create the Jasper report(PDF, Excel, Csv) by using JRBeanCollectionDataSource. It means that the .jrxml file accepts the collection of pojo as a input to process the report.\r\n\r\nNow, I have been trying to create the jasper report with the same .jrxml but from JSON Object.\r\nI tried the following, but all values are null in pdf report\r\n\r\n    Resource resource = new ClassPathXmlApplicationContext().getResource(&quot;classpath:reports/project.jrxml&quot;);\r\n    JsonDataSource ds = new JsonDataSource(new File(&quot;c:\\myjson.json&quot;));\r\n    jasperDesign = JRXmlLoader.load(resource.getInputStream());\r\n    JasperReport jasperReport  = JasperCompileManager.compileReport(jasperDesign);\r\n    JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport,  parameters,  ds);\r\n    JasperExportManager.exportReportToPdfFile(jasperPrint, destination+fileName+&quot;.pdf&quot;);\r\n\r\nCan any one help me?\r\n\r\n\r\n\r\n     \r\n     \r\n\r\n\r\n","title":"Create Jasper Report PDF form from JSON Object or JSON String","body":"<p>It is fine when create the Jasper report(PDF, Excel, Csv) by using JRBeanCollectionDataSource. It means that the .jrxml file accepts the collection of pojo as a input to process the report.</p>\n\n<p>Now, I have been trying to create the jasper report with the same .jrxml but from JSON Object.\nI tried the following, but all values are null in pdf report</p>\n\n<pre><code>Resource resource = new ClassPathXmlApplicationContext().getResource(\"classpath:reports/project.jrxml\");\nJsonDataSource ds = new JsonDataSource(new File(\"c:\\myjson.json\"));\njasperDesign = JRXmlLoader.load(resource.getInputStream());\nJasperReport jasperReport  = JasperCompileManager.compileReport(jasperDesign);\nJasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport,  parameters,  ds);\nJasperExportManager.exportReportToPdfFile(jasperPrint, destination+fileName+\".pdf\");\n</code></pre>\n\n<p>Can any one help me?</p>\n"},{"tags":["java","eclipse","class","oop"],"comments":[{"owner":{"account_id":11359982,"reputation":308,"user_id":8328420,"display_name":"moonman4"},"score":0,"creation_date":1638898864,"post_id":70264412,"comment_id":124208311,"body_markdown":"Does this answer your question? [How to override equals method in Java](https://stackoverflow.com/questions/8180430/how-to-override-equals-method-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/8180430/how-to-override-equals-method-in-java\">How to override equals method in Java</a>"}],"answers":[{"tags":[],"owner":{"account_id":11359982,"reputation":308,"user_id":8328420,"display_name":"moonman4"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638898803,"creation_date":1638898803,"answer_id":70264627,"question_id":70264412,"body_markdown":"Object a very general class and will likely be of little use to you on its own.\r\n\r\nIf you are trying to access properties of some other class then you need to check the ```Object other``` is an instance of ```YourClass``` and then cast it.\r\n\r\n[enter link description here][1]\r\n\r\n```\r\nclass yourClass {\r\n    @Override\r\n    public boolean equals(Object other) {\r\n        // nothing to compare if other is null\r\n        if(other == null) return false;\r\n\r\n        // Can only be equals if they are both YourClass\r\n        if(other instanceof YourClass){\r\n            // Tell java to make other into YourClass instead of Object\r\n            YourClass yourClass = (YourClass)other\r\n\r\n            //Access properties of another here\r\n            //...\r\n        }\r\n\r\n        // other is not an instance of YourClass so it cant be equals\r\n        return false;\r\n}\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/8180430/how-to-override-equals-method-in-java","title":"How to get attributes from an Object type in Java","body":"<p>Object a very general class and will likely be of little use to you on its own.</p>\n<p>If you are trying to access properties of some other class then you need to check the <code>Object other</code> is an instance of <code>YourClass</code> and then cast it.</p>\n<p>[enter link description here][1]</p>\n<pre><code>class yourClass {\n    @Override\n    public boolean equals(Object other) {\n        // nothing to compare if other is null\n        if(other == null) return false;\n\n        // Can only be equals if they are both YourClass\n        if(other instanceof YourClass){\n            // Tell java to make other into YourClass instead of Object\n            YourClass yourClass = (YourClass)other\n\n            //Access properties of another here\n            //...\n        }\n\n        // other is not an instance of YourClass so it cant be equals\n        return false;\n}\n\n\n  [1]: https://stackoverflow.com/questions/8180430/how-to-override-equals-method-in-java\n</code></pre>\n"}],"owner":{"account_id":8847980,"reputation":31,"user_id":7839617,"display_name":"anonon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":622,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1638898803,"creation_date":1638897710,"question_id":70264412,"body_markdown":"I am trying to implement an ```public boolean equals(Object other)``` method for my Java class where the first argument is passed as an Object type. The problem is that I do not know how to access to the attributes of an Object type. ","title":"How to get attributes from an Object type in Java","body":"<p>I am trying to implement an <code>public boolean equals(Object other)</code> method for my Java class where the first argument is passed as an Object type. The problem is that I do not know how to access to the attributes of an Object type.</p>\n"},{"tags":["java","maven","spring-mvc","pom.xml","maven-plugin"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":3,"creation_date":1638874744,"post_id":70258765,"comment_id":124198219,"body_markdown":"As far as I know used undeclared dependencies are those that you didn&#39;t declare in your pom.xml but are transitive dependencies of those you did declare - plus your code directly uses them. This could lead to build problems if the version of a transitive dependency changes so you might want to think about declaring them. Unused declared dependencies are those you declared in your pom.xml but your code doesn&#39;t seem to use them - they might be safe to remove but the plugin might also have missed a usage, so try and check. If they are still needed, tell Maven to ignore them in the analysis.","body":"As far as I know used undeclared dependencies are those that you didn&#39;t declare in your pom.xml but are transitive dependencies of those you did declare - plus your code directly uses them. This could lead to build problems if the version of a transitive dependency changes so you might want to think about declaring them. Unused declared dependencies are those you declared in your pom.xml but your code doesn&#39;t seem to use them - they might be safe to remove but the plugin might also have missed a usage, so try and check. If they are still needed, tell Maven to ignore them in the analysis."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1638874758,"post_id":70258765,"comment_id":124198228,"body_markdown":"I would do step by step...remove one and check your tests and go on...","body":"I would do step by step...remove one and check your tests and go on..."},{"owner":{"account_id":4464043,"reputation":57,"user_id":3632140,"display_name":"user3632140"},"score":0,"creation_date":1638875296,"post_id":70258765,"comment_id":124198456,"body_markdown":"@Thomas Could you tell me how to remove Unused declared dependencies since they are not direct libraries in pom.xml","body":"@Thomas Could you tell me how to remove Unused declared dependencies since they are not direct libraries in pom.xml"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1638875438,"post_id":70258765,"comment_id":124198518,"body_markdown":"Look at your pom.xml, you should have listed them there - that&#39;s what I understand &quot;declared&quot; means.","body":"Look at your pom.xml, you should have listed them there - that&#39;s what I understand &quot;declared&quot; means."},{"owner":{"account_id":4464043,"reputation":57,"user_id":3632140,"display_name":"user3632140"},"score":1,"creation_date":1638879069,"post_id":70258765,"comment_id":124199834,"body_markdown":"any comment from experts ?","body":"any comment from experts ?"},{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1638973256,"post_id":70258765,"comment_id":124229513,"body_markdown":"Does this answer your question? [What are unused/undeclared dependencies in Maven? What to do with them?](https://stackoverflow.com/questions/4565740/what-are-unused-undeclared-dependencies-in-maven-what-to-do-with-them)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/4565740/what-are-unused-undeclared-dependencies-in-maven-what-to-do-with-them\">What are unused/undeclared dependencies in Maven? What to do with them?</a>"}],"owner":{"account_id":4464043,"reputation":57,"user_id":3632140,"display_name":"user3632140"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1336,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1638898707,"creation_date":1638873994,"question_id":70258765,"body_markdown":"I want to remove unnecessary dependencies from pom.xml. I have used mvn dependency:analyze and I got these results. Do I need to remove used undeclared dependencies and unused declared dependencies? May I know how can I remove dependencies from maven, so that I can build my project quickly?\r\n\r\n    [WARNING] Used undeclared dependencies found:\r\n    [WARNING]    com.fasterxml.jackson.core:jackson-annotations:jar:2.11.2:compile\r\n    [WARNING]    org.springframework:spring-beans:jar:5.2.9.RELEASE:compile\r\n    [WARNING]    junit:junit:jar:4.13:compile\r\n    [WARNING]    org.springframework:spring-jdbc:jar:5.2.9.RELEASE:compile\r\n    [WARNING]    com.sap.cloud.security.xsuaa:spring-xsuaa:jar:2.8.0:compile\r\n    [WARNING]    com.google.code.gson:gson:jar:2.8.6:compile\r\n    [WARNING]    com.zaxxer:HikariCP:jar:3.4.5:compile\r\n    [WARNING]    com.sap.cloud.instancemanager:util:jar:1.17.2:compile\r\n    [WARNING]    org.springframework:spring-core:jar:5.2.9.RELEASE:compile\r\n    [WARNING]    org.springframework.boot:spring-boot-autoconfigure:jar:2.3.4.RELEASE:compile\r\n    \r\n    [WARNING] Unused declared dependencies found:\r\n    [WARNING]    com.sap.cds:cds-starter-spring-boot-odata:jar:1.17.1:compile\r\n    [WARNING]    org.apache.tomcat.embed:tomcat-embed-websocket:jar:9.0.53:compile\r\n    [WARNING]    org.apache.tomcat:tomcat-annotations-api:jar:9.0.53:compile","title":"What shall we do with unused declared dependencies found and used undeclared dependencies in maven&#39;s pom.xml","body":"<p>I want to remove unnecessary dependencies from pom.xml. I have used mvn dependency:analyze and I got these results. Do I need to remove used undeclared dependencies and unused declared dependencies? May I know how can I remove dependencies from maven, so that I can build my project quickly?</p>\n<pre><code>[WARNING] Used undeclared dependencies found:\n[WARNING]    com.fasterxml.jackson.core:jackson-annotations:jar:2.11.2:compile\n[WARNING]    org.springframework:spring-beans:jar:5.2.9.RELEASE:compile\n[WARNING]    junit:junit:jar:4.13:compile\n[WARNING]    org.springframework:spring-jdbc:jar:5.2.9.RELEASE:compile\n[WARNING]    com.sap.cloud.security.xsuaa:spring-xsuaa:jar:2.8.0:compile\n[WARNING]    com.google.code.gson:gson:jar:2.8.6:compile\n[WARNING]    com.zaxxer:HikariCP:jar:3.4.5:compile\n[WARNING]    com.sap.cloud.instancemanager:util:jar:1.17.2:compile\n[WARNING]    org.springframework:spring-core:jar:5.2.9.RELEASE:compile\n[WARNING]    org.springframework.boot:spring-boot-autoconfigure:jar:2.3.4.RELEASE:compile\n\n[WARNING] Unused declared dependencies found:\n[WARNING]    com.sap.cds:cds-starter-spring-boot-odata:jar:1.17.1:compile\n[WARNING]    org.apache.tomcat.embed:tomcat-embed-websocket:jar:9.0.53:compile\n[WARNING]    org.apache.tomcat:tomcat-annotations-api:jar:9.0.53:compile\n</code></pre>\n"},{"tags":["java","spring","validation","controller"],"owner":{"account_id":5354566,"reputation":113,"user_id":4267653,"display_name":"Miguel Cabanes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1638898554,"creation_date":1638898270,"question_id":70264521,"body_markdown":"I have a List with JSR Validations like @Max, @Min, and a Dto with inner list like:\r\n\r\n    &quot;data&quot;: [\r\n      {\r\n       &quot;id&quot;: 1,\r\n       &quot;age&quot;: 110, //@Max(100)\r\n      },\r\n      {\r\n       &quot;id&quot;: 2,\r\n       &quot;age&quot;: 200, //@Max(100)\r\n    }]\r\n\r\nI want to handle JSR with `@ControllerAdvice` and overriding `handleMethodArgumentNotValid` method. If I try to inspect `BindingResult` instance I can get all errors but they are instances from `SpringValidatorAdapter.ViolationFieldError`\r\n\r\nInside this class, `ViolationFieldError`, there is a property named `violation` and inside this a `leafBeanInstance` with the original object from the list.\r\n\r\nI cannot use this because, `ViolationFieldError` is a private class\r\n\r\nHow can I deal with this? Suggestions?\r\n\r\nThanks","title":"Need to retrieve original validated object from MethodArgumentNotValidException","body":"<p>I have a List with JSR Validations like @Max, @Min, and a Dto with inner list like:</p>\n<pre><code>&quot;data&quot;: [\n  {\n   &quot;id&quot;: 1,\n   &quot;age&quot;: 110, //@Max(100)\n  },\n  {\n   &quot;id&quot;: 2,\n   &quot;age&quot;: 200, //@Max(100)\n}]\n</code></pre>\n<p>I want to handle JSR with <code>@ControllerAdvice</code> and overriding <code>handleMethodArgumentNotValid</code> method. If I try to inspect <code>BindingResult</code> instance I can get all errors but they are instances from <code>SpringValidatorAdapter.ViolationFieldError</code></p>\n<p>Inside this class, <code>ViolationFieldError</code>, there is a property named <code>violation</code> and inside this a <code>leafBeanInstance</code> with the original object from the list.</p>\n<p>I cannot use this because, <code>ViolationFieldError</code> is a private class</p>\n<p>How can I deal with this? Suggestions?</p>\n<p>Thanks</p>\n"},{"tags":["java","lambda","java-8","java-stream"],"comments":[{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":5,"creation_date":1478602507,"post_id":40484985,"comment_id":68213819,"body_markdown":"You definitely want `flatMap`: `entrySet.stream().flatMap(e -&gt; e.getValue().stream().map(s -&gt; new SimpleImmutableEntry(e.getKey(), s))`","body":"You definitely want <code>flatMap</code>: <code>entrySet.stream().flatMap(e -&gt; e.getValue().stream().map(s -&gt; new SimpleImmutableEntry(e.getKey(), s))</code>"},{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":2,"creation_date":1478602692,"post_id":40484985,"comment_id":68213909,"body_markdown":"@MarkoTopolnik your comment should be an answer.","body":"@MarkoTopolnik your comment should be an answer."},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":1,"creation_date":1478602715,"post_id":40484985,"comment_id":68213928,"body_markdown":"@MarkoTopolnik that should be an answer","body":"@MarkoTopolnik that should be an answer"},{"owner":{"account_id":1936546,"reputation":133675,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"score":1,"creation_date":1478611696,"post_id":40484985,"comment_id":68219929,"body_markdown":"Very related http://stackoverflow.com/q/34999568/1743880 and http://stackoverflow.com/questions/32189147/mapstring-liststring-to-pairstring-string","body":"Very related <a href=\"http://stackoverflow.com/q/34999568/1743880\">stackoverflow.com/q/34999568/1743880</a> and <a href=\"http://stackoverflow.com/questions/32189147/mapstring-liststring-to-pairstring-string\" title=\"mapstring liststring to pairstring string\">stackoverflow.com/questions/32189147/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1478607836,"creation_date":1478602795,"answer_id":40485164,"question_id":40484985,"body_markdown":"You should use `flatMap` as follows:\r\n\r\n    entrySet.stream()\r\n            .flatMap(e -&gt; e.getValue().stream()\r\n                           .map(s -&gt; new SimpleImmutableEntry(e.getKey(), s)));\r\n\r\n`SimpleImmutableEntry` is a nested class in `AbstractMap`.","title":"Flatten a Map&lt;Integer, List&lt;String&gt;&gt; to Map&lt;String, Integer&gt; with stream and lambda","body":"<p>You should use <code>flatMap</code> as follows:</p>\n\n<pre><code>entrySet.stream()\n        .flatMap(e -&gt; e.getValue().stream()\n                       .map(s -&gt; new SimpleImmutableEntry(e.getKey(), s)));\n</code></pre>\n\n<p><code>SimpleImmutableEntry</code> is a nested class in <code>AbstractMap</code>.</p>\n"},{"tags":[],"owner":{"account_id":4215179,"reputation":2795,"user_id":3451639,"accept_rate":58,"display_name":"Aleksander Mielczarek"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1478602967,"creation_date":1478602967,"answer_id":40485212,"question_id":40484985,"body_markdown":"This should work. Please notice that you lost some keys from List&lt;String&gt;.\r\n\r\n    Map&lt;Integer, List&lt;String&gt;&gt; mapFrom = new HashMap&lt;&gt;();\r\n    Map&lt;String, Integer&gt; mapTo = mapFrom.entrySet().stream()\r\n            .flatMap(integerListEntry -&gt; integerListEntry.getValue()\r\n                    .stream()\r\n                    .map(listItem -&gt; new AbstractMap.SimpleEntry&lt;&gt;(listItem, integerListEntry.getKey())))\r\n            .collect(Collectors.toMap(AbstractMap.SimpleEntry::getKey, AbstractMap.SimpleEntry::getValue));","title":"Flatten a Map&lt;Integer, List&lt;String&gt;&gt; to Map&lt;String, Integer&gt; with stream and lambda","body":"<p>This should work. Please notice that you lost some keys from List.</p>\n\n<pre><code>Map&lt;Integer, List&lt;String&gt;&gt; mapFrom = new HashMap&lt;&gt;();\nMap&lt;String, Integer&gt; mapTo = mapFrom.entrySet().stream()\n        .flatMap(integerListEntry -&gt; integerListEntry.getValue()\n                .stream()\n                .map(listItem -&gt; new AbstractMap.SimpleEntry&lt;&gt;(listItem, integerListEntry.getKey())))\n        .collect(Collectors.toMap(AbstractMap.SimpleEntry::getKey, AbstractMap.SimpleEntry::getValue));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7525670,"reputation":12194,"user_id":5715934,"accept_rate":95,"display_name":"Supun Wijerathne"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1478603888,"creation_date":1478603295,"answer_id":40485322,"question_id":40484985,"body_markdown":"Hope this would do it in simplest way. :))\r\n\r\n    mapFrom.forEach((key, values) -&gt; values.forEach(value -&gt; mapTo.put(value, key)));","title":"Flatten a Map&lt;Integer, List&lt;String&gt;&gt; to Map&lt;String, Integer&gt; with stream and lambda","body":"<p>Hope this would do it in simplest way. :))</p>\n\n<pre><code>mapFrom.forEach((key, values) -&gt; values.forEach(value -&gt; mapTo.put(value, key)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":38,"is_accepted":true,"score":38,"last_activity_date":1478604257,"creation_date":1478604257,"answer_id":40485671,"question_id":40484985,"body_markdown":"You need to use `flatMap` to flatten the values into a new stream, but since you still need the original keys for collecting into a `Map`, you have to map to a temporary object holding key and value, e.g.\r\n\r\n    Map&lt;String, Integer&gt; mapTo = mapFrom.entrySet().stream()\r\n           .flatMap(e-&gt;e.getValue().stream()\r\n                        .map(v-&gt;new AbstractMap.SimpleImmutableEntry&lt;&gt;(e.getKey(), v)))\r\n           .collect(Collectors.toMap(Map.Entry::getValue, Map.Entry::getKey));\r\n\r\nThe `Map.Entry` is a stand-in for the nonexistent tuple type, any other type capable of holding two objects of different type is sufficient.\r\n\r\nAn alternative not requiring these temporary objects, is a custom collector:\r\n\r\n    Map&lt;String, Integer&gt; mapTo = mapFrom.entrySet().stream().collect(\r\n        HashMap::new, (m,e)-&gt;e.getValue().forEach(v-&gt;m.put(v, e.getKey())), Map::putAll);\r\n\r\nThis differs from `toMap` in overwriting duplicate keys silently, whereas `toMap` without a merger function will throw an exception, if there is a duplicate key. Basically, this custom collector is a parallel capable variant of\r\n\r\n    Map&lt;String, Integer&gt; mapTo = new HashMap&lt;&gt;();\r\n    mapFrom.forEach((k, l) -&gt; l.forEach(v -&gt; mapTo.put(v, k)));\r\n\r\nBut note that this task wouldn’t benefit from parallel processing, even with a very large input map. Only if there were additional computational intense task within the stream pipeline that could benefit from SMP, there was a chance of getting a benefit from parallel streams. So perhaps, the concise, sequential Collection API solution is preferable.\r\n","title":"Flatten a Map&lt;Integer, List&lt;String&gt;&gt; to Map&lt;String, Integer&gt; with stream and lambda","body":"<p>You need to use <code>flatMap</code> to flatten the values into a new stream, but since you still need the original keys for collecting into a <code>Map</code>, you have to map to a temporary object holding key and value, e.g.</p>\n\n<pre><code>Map&lt;String, Integer&gt; mapTo = mapFrom.entrySet().stream()\n       .flatMap(e-&gt;e.getValue().stream()\n                    .map(v-&gt;new AbstractMap.SimpleImmutableEntry&lt;&gt;(e.getKey(), v)))\n       .collect(Collectors.toMap(Map.Entry::getValue, Map.Entry::getKey));\n</code></pre>\n\n<p>The <code>Map.Entry</code> is a stand-in for the nonexistent tuple type, any other type capable of holding two objects of different type is sufficient.</p>\n\n<p>An alternative not requiring these temporary objects, is a custom collector:</p>\n\n<pre><code>Map&lt;String, Integer&gt; mapTo = mapFrom.entrySet().stream().collect(\n    HashMap::new, (m,e)-&gt;e.getValue().forEach(v-&gt;m.put(v, e.getKey())), Map::putAll);\n</code></pre>\n\n<p>This differs from <code>toMap</code> in overwriting duplicate keys silently, whereas <code>toMap</code> without a merger function will throw an exception, if there is a duplicate key. Basically, this custom collector is a parallel capable variant of</p>\n\n<pre><code>Map&lt;String, Integer&gt; mapTo = new HashMap&lt;&gt;();\nmapFrom.forEach((k, l) -&gt; l.forEach(v -&gt; mapTo.put(v, k)));\n</code></pre>\n\n<p>But note that this task wouldn’t benefit from parallel processing, even with a very large input map. Only if there were additional computational intense task within the stream pipeline that could benefit from SMP, there was a chance of getting a benefit from parallel streams. So perhaps, the concise, sequential Collection API solution is preferable.</p>\n"},{"tags":[],"owner":{"account_id":4396854,"reputation":1866,"user_id":3583589,"display_name":"benez"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1638898338,"creation_date":1638898338,"answer_id":70264534,"question_id":40484985,"body_markdown":"Same as the previous answers with Java 9:\r\n\r\n    Map&lt;String, Integer&gt; mapTo = mapFrom.entrySet()\r\n            .stream()\r\n            .flatMap(entry -&gt; entry.getValue()\r\n                    .stream()\r\n                    .map(s -&gt; Map.entry(s, entry.getKey())))\r\n            .collect(toMap(Entry::getKey, Entry::getValue));","title":"Flatten a Map&lt;Integer, List&lt;String&gt;&gt; to Map&lt;String, Integer&gt; with stream and lambda","body":"<p>Same as the previous answers with Java 9:</p>\n<pre><code>Map&lt;String, Integer&gt; mapTo = mapFrom.entrySet()\n        .stream()\n        .flatMap(entry -&gt; entry.getValue()\n                .stream()\n                .map(s -&gt; Map.entry(s, entry.getKey())))\n        .collect(toMap(Entry::getKey, Entry::getValue));\n</code></pre>\n"}],"owner":{"account_id":1291862,"reputation":1375,"user_id":1243812,"accept_rate":75,"display_name":"Vongo"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32309,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"accepted_answer_id":40485671,"answer_count":5,"score":26,"last_activity_date":1638898338,"creation_date":1478602173,"question_id":40484985,"body_markdown":"I would like to flatten a `Map` which associates an `Integer` key to a list of `String`, without losing the key mapping.\r\nI am curious as though it is possible and useful to do so with `stream` and `lambda`.\r\n\r\nWe start with something like this:\r\n\r\n    Map&lt;Integer, List&lt;String&gt;&gt; mapFrom = new HashMap&lt;&gt;();\r\n\r\nLet&#39;s assume that mapFrom is populated somewhere, and looks like:\r\n\r\n\t1: a,b,c\r\n\t2: d,e,f\r\n\tetc.\r\n\r\nLet&#39;s also assume that the values in the lists are unique.\r\n\r\nNow, I want to &quot;unfold&quot; it to get a second map like:\r\n\r\n\ta: 1\r\n\tb: 1\r\n\tc: 1\r\n\td: 2\r\n\te: 2\r\n\tf: 2\r\n\tetc.\r\n\r\nI could do it like this (or very similarly, using `foreach`):\r\n\r\n\tMap&lt;String, Integer&gt; mapTo = new HashMap&lt;&gt;();\r\n\tfor (Map.Entry&lt;Integer, List&lt;String&gt;&gt; entry: mapFrom.entrySet()) {\r\n\t\tfor (String s: entry.getValue()) {\r\n\t\t\tmapTo.put(s, entry.getKey());\r\n\t\t}\r\n\t}\r\n\r\nNow let&#39;s assume that I want to use lambda instead of nested `for` loops. I would probably do something like this:\r\n\r\n\tMap&lt;String, Integer&gt; mapTo = mapFrom.entrySet().stream().map(e -&gt; {\r\n\t\te.getValue().stream().?\r\n\t\t// Here I can iterate on each List, \r\n        // but my best try would only give me a flat map for each key, \r\n        // that I wouldn&#39;t know how to flatten.\r\n\t}).collect(Collectors.toMap(/*A String value*/,/*An Integer key*/))\r\n\r\nI also gave a try to `flatMap`, but I don&#39;t think that it is the right way to go, because although it helps me get rid of the dimensionality issue, I lose the key in the process.\r\n\r\nIn a nutshell, my two questions are :\r\n\r\n - Is it possible to use `streams` and `lambda` to achieve this?\r\n - Is is useful (performance, readability) to do so?","title":"Flatten a Map&lt;Integer, List&lt;String&gt;&gt; to Map&lt;String, Integer&gt; with stream and lambda","body":"<p>I would like to flatten a <code>Map</code> which associates an <code>Integer</code> key to a list of <code>String</code>, without losing the key mapping.\nI am curious as though it is possible and useful to do so with <code>stream</code> and <code>lambda</code>.</p>\n\n<p>We start with something like this:</p>\n\n<pre><code>Map&lt;Integer, List&lt;String&gt;&gt; mapFrom = new HashMap&lt;&gt;();\n</code></pre>\n\n<p>Let's assume that mapFrom is populated somewhere, and looks like:</p>\n\n<pre><code>1: a,b,c\n2: d,e,f\netc.\n</code></pre>\n\n<p>Let's also assume that the values in the lists are unique.</p>\n\n<p>Now, I want to \"unfold\" it to get a second map like:</p>\n\n<pre><code>a: 1\nb: 1\nc: 1\nd: 2\ne: 2\nf: 2\netc.\n</code></pre>\n\n<p>I could do it like this (or very similarly, using <code>foreach</code>):</p>\n\n<pre><code>Map&lt;String, Integer&gt; mapTo = new HashMap&lt;&gt;();\nfor (Map.Entry&lt;Integer, List&lt;String&gt;&gt; entry: mapFrom.entrySet()) {\n    for (String s: entry.getValue()) {\n        mapTo.put(s, entry.getKey());\n    }\n}\n</code></pre>\n\n<p>Now let's assume that I want to use lambda instead of nested <code>for</code> loops. I would probably do something like this:</p>\n\n<pre><code>Map&lt;String, Integer&gt; mapTo = mapFrom.entrySet().stream().map(e -&gt; {\n    e.getValue().stream().?\n    // Here I can iterate on each List, \n    // but my best try would only give me a flat map for each key, \n    // that I wouldn't know how to flatten.\n}).collect(Collectors.toMap(/*A String value*/,/*An Integer key*/))\n</code></pre>\n\n<p>I also gave a try to <code>flatMap</code>, but I don't think that it is the right way to go, because although it helps me get rid of the dimensionality issue, I lose the key in the process.</p>\n\n<p>In a nutshell, my two questions are :</p>\n\n<ul>\n<li>Is it possible to use <code>streams</code> and <code>lambda</code> to achieve this?</li>\n<li>Is is useful (performance, readability) to do so?</li>\n</ul>\n"},{"tags":["java","spring","neo4j","spring-data-neo4j","neo4j-ogm"],"answers":[{"tags":[],"owner":{"account_id":2825258,"reputation":51,"user_id":2428037,"display_name":"Ronny"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638898009,"creation_date":1638897000,"answer_id":70264237,"question_id":70250447,"body_markdown":"It seems like I have choosen to add so-called &quot;rich relationships&quot; (https://docs.spring.io/spring-data/neo4j/docs/4.2.0.RC1/reference/html/#__relationshipentity_rich_relationships). Omitting this relationship class will yield only edges between nodes. So instead of having a set with relationships, modify the set to contain Person.\r\n\r\nChange this\r\n```java\r\n\r\n@Relationship(type = &quot;FAMILY&quot;)\r\n  private Set&lt;Familyrelation&gt; relations = new HashSet&lt;&gt;();\r\n```\r\n\r\nto\r\n\r\n```java\r\n@Relationship(type = &quot;FAMILY&quot;)\r\n  private Set&lt;Person&gt; relations = new HashSet&lt;&gt;();\r\n```\r\n\r\n```java\r\nfinal Person2 person1 = new Person2();\r\n    person1.setName(&quot;Bob&quot;);\r\n    person1.setAge(40);\r\n\r\n    final Person2 person2 = new Person2();\r\n    person2.setName(&quot;Alice&quot;);\r\n    person2.setAge(30);\r\n\r\n    person1.setRelasjon(person2);\r\n    person2.setRelasjon(person1);\r\n\r\n    personRepository.save(person1);\r\n\r\n```\r\n\r\nThis will yield nodes with edges connected to them.\r\n\r\n[![No rich relationships][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IZtWv.png","title":"Neo4J OGM: relationships between nodes becomes nodes with edges to the entities (nodes)","body":"<p>It seems like I have choosen to add so-called &quot;rich relationships&quot; (<a href=\"https://docs.spring.io/spring-data/neo4j/docs/4.2.0.RC1/reference/html/#__relationshipentity_rich_relationships\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/neo4j/docs/4.2.0.RC1/reference/html/#__relationshipentity_rich_relationships</a>). Omitting this relationship class will yield only edges between nodes. So instead of having a set with relationships, modify the set to contain Person.</p>\n<p>Change this</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Relationship(type = &quot;FAMILY&quot;)\n  private Set&lt;Familyrelation&gt; relations = new HashSet&lt;&gt;();\n</code></pre>\n<p>to</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Relationship(type = &quot;FAMILY&quot;)\n  private Set&lt;Person&gt; relations = new HashSet&lt;&gt;();\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>final Person2 person1 = new Person2();\n    person1.setName(&quot;Bob&quot;);\n    person1.setAge(40);\n\n    final Person2 person2 = new Person2();\n    person2.setName(&quot;Alice&quot;);\n    person2.setAge(30);\n\n    person1.setRelasjon(person2);\n    person2.setRelasjon(person1);\n\n    personRepository.save(person1);\n\n</code></pre>\n<p>This will yield nodes with edges connected to them.</p>\n<p><a href=\"https://i.stack.imgur.com/IZtWv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IZtWv.png\" alt=\"No rich relationships\" /></a></p>\n"}],"owner":{"account_id":2825258,"reputation":51,"user_id":2428037,"display_name":"Ronny"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1638898009,"creation_date":1638816751,"question_id":70250447,"body_markdown":"I am using Spring Boot and OGM. I have a @Nodeentity (Person) and a @RelationshipEntity (Familyrelation) with a type. When I put together nodes and relationships (a simple family-relationship between two persons), I get four nodes and the property of the two &quot;extra&quot; nodes is the relationship-id. Here is the code (excerpt):\r\n\r\n```java\r\n@Repository\r\npublic interface PersonRepository extends Neo4jRepository&lt;Person, Long&gt; {\r\n\r\n}\r\n\r\n@Data\r\n@Slf4j\r\n@NodeEntity(&quot;Person&quot;)\r\npublic class Person {\r\n\r\n  @Id\r\n  @GeneratedValue\r\n  private Long id;\r\n  private String name;\r\n  private int age;\r\n\r\n  @Relationship(type = &quot;FAMILY&quot;)\r\n  private Set&lt;Familyrelation&gt; relations = new HashSet&lt;&gt;();\r\n\r\n  public Set&lt;Familyrelation&gt; getRelations() {\r\n    return relations;\r\n  }\r\n\r\n  public void setRelasjon(Familyrelation relasjon) {\r\n    this.relations.add(relasjon);\r\n  }\r\n\r\n  //Hashcode and equals omitted\r\n\r\n@RelationshipEntity(type = &quot;FAMILY&quot;)\r\npublic class Familyrelation {\r\n\r\n  @Id\r\n  @GeneratedValue\r\n  private Long relationshipId;\r\n  @StartNode\r\n  private Person person;\r\n  @EndNode\r\n  private Person relatedPerson;\r\n\r\n\r\n  public void setPerson(final Person person) {\r\n    this.person = person;\r\n  }\r\n\r\n  public void setRelatedPerson(final Person relatedPerson) {\r\n    this.relatedPerson = relatedPerson;\r\n  }\r\n\r\n//Omitted hashcode, equals and other getters/setters\r\n```\r\n\r\nHere is how I create the graph:\r\n```java\r\n\r\n final Person person1 = new Person();\r\n person1.setName(&quot;Bob&quot;);\r\n person1.setAge(40);\r\n\r\n final Person person2 = new Person();\r\n person2.setName(&quot;Alice&quot;);\r\n person2.setAge(30);\r\n\r\n final Familyrelation familierelasjon1 = new Familyrelation();\r\n familierelasjon1.setPerson(person1);\r\n familierelasjon1.setRelatedPerson(person2);\r\n final Familyrelation familierelasjon2 = new Familyrelation();\r\n familierelasjon2.setPerson(person2);\r\n familierelasjon2.setRelatedPerson(person1);\r\n\r\n person1.setRelasjon(familierelasjon1);\r\n person2.setRelasjon(familierelasjon2);\r\n\r\n personRepository.save(person1);\r\n personRepository.save(person2);\r\n```\r\n\r\n[![Relationship is becoming a node][1]][1]\r\n\r\nWhat am I missing here?\r\n\r\nEDIT: omitting persisting person2 will yield the same result.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rOudM.png","title":"Neo4J OGM: relationships between nodes becomes nodes with edges to the entities (nodes)","body":"<p>I am using Spring Boot and OGM. I have a @Nodeentity (Person) and a @RelationshipEntity (Familyrelation) with a type. When I put together nodes and relationships (a simple family-relationship between two persons), I get four nodes and the property of the two &quot;extra&quot; nodes is the relationship-id. Here is the code (excerpt):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface PersonRepository extends Neo4jRepository&lt;Person, Long&gt; {\n\n}\n\n@Data\n@Slf4j\n@NodeEntity(&quot;Person&quot;)\npublic class Person {\n\n  @Id\n  @GeneratedValue\n  private Long id;\n  private String name;\n  private int age;\n\n  @Relationship(type = &quot;FAMILY&quot;)\n  private Set&lt;Familyrelation&gt; relations = new HashSet&lt;&gt;();\n\n  public Set&lt;Familyrelation&gt; getRelations() {\n    return relations;\n  }\n\n  public void setRelasjon(Familyrelation relasjon) {\n    this.relations.add(relasjon);\n  }\n\n  //Hashcode and equals omitted\n\n@RelationshipEntity(type = &quot;FAMILY&quot;)\npublic class Familyrelation {\n\n  @Id\n  @GeneratedValue\n  private Long relationshipId;\n  @StartNode\n  private Person person;\n  @EndNode\n  private Person relatedPerson;\n\n\n  public void setPerson(final Person person) {\n    this.person = person;\n  }\n\n  public void setRelatedPerson(final Person relatedPerson) {\n    this.relatedPerson = relatedPerson;\n  }\n\n//Omitted hashcode, equals and other getters/setters\n</code></pre>\n<p>Here is how I create the graph:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n final Person person1 = new Person();\n person1.setName(&quot;Bob&quot;);\n person1.setAge(40);\n\n final Person person2 = new Person();\n person2.setName(&quot;Alice&quot;);\n person2.setAge(30);\n\n final Familyrelation familierelasjon1 = new Familyrelation();\n familierelasjon1.setPerson(person1);\n familierelasjon1.setRelatedPerson(person2);\n final Familyrelation familierelasjon2 = new Familyrelation();\n familierelasjon2.setPerson(person2);\n familierelasjon2.setRelatedPerson(person1);\n\n person1.setRelasjon(familierelasjon1);\n person2.setRelasjon(familierelasjon2);\n\n personRepository.save(person1);\n personRepository.save(person2);\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/rOudM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rOudM.png\" alt=\"Relationship is becoming a node\" /></a></p>\n<p>What am I missing here?</p>\n<p>EDIT: omitting persisting person2 will yield the same result.</p>\n"},{"tags":["java","spring","wicket"],"comments":[{"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"score":1,"creation_date":1261570113,"post_id":1947389,"comment_id":1863974,"body_markdown":"There is no `@SpringBean` annotation in the Spring API. There is one in Wicket, though, is that what you&#39;re using?","body":"There is no <code>@SpringBean</code> annotation in the Spring API. There is one in Wicket, though, is that what you&#39;re using?"},{"owner":{"account_id":561787,"reputation":1187,"user_id":174987,"accept_rate":83,"display_name":"Tarquila"},"score":1,"creation_date":1261573703,"post_id":1947389,"comment_id":1864301,"body_markdown":"Ah, I didn&#39;t know that - yes I am using Wicket.  I&#39;ll change the question and tags to reflect that.  Thanks.","body":"Ah, I didn&#39;t know that - yes I am using Wicket.  I&#39;ll change the question and tags to reflect that.  Thanks."},{"owner":{"account_id":50098,"reputation":32598,"user_id":149311,"accept_rate":80,"display_name":"Thomas Jung"},"score":0,"creation_date":1261575502,"post_id":1947389,"comment_id":1864492,"body_markdown":"@Tarquila - I think it&#39;s easier to fix this question for spring. And add a new one for Wicket.","body":"@Tarquila - I think it&#39;s easier to fix this question for spring. And add a new one for Wicket."},{"owner":{"account_id":159083,"reputation":15549,"user_id":378151,"accept_rate":74,"display_name":"Snekse"},"score":3,"creation_date":1323966291,"post_id":1947389,"comment_id":10553879,"body_markdown":"I think the accepted answer for this question should be changed.  @skaffman&#39;s answer seems to be the true correct answer.","body":"I think the accepted answer for this question should be changed.  @skaffman&#39;s answer seems to be the true correct answer."}],"answers":[{"tags":[],"owner":{"account_id":50098,"reputation":32598,"user_id":149311,"accept_rate":80,"display_name":"Thomas Jung"},"down_vote_count":2,"up_vote_count":2,"is_accepted":true,"score":0,"last_activity_date":1261500948,"creation_date":1261499250,"answer_id":1947470,"question_id":1947389,"body_markdown":"Spring uses the class loader and ASM at runtime to find all annotated classes.\r\n\r\nYou can [configure][1] where spring should search for beans:\r\n\r\n    &lt;context:component-scan base-package=&quot;some.package.to.start.from&quot;/&gt;\r\n\r\nThis uses the [ClassPathBeanDefinitionScanner][2] internally which will use the [PathMatchingResourcePatternResolver][3] to find the classes and the ASM-based [MetadataReader][4] to read the annotations.\r\n\r\n\r\n  [1]: http://static.springsource.org/spring/docs/2.5.x/reference/beans.html#beans-annotation-config\r\n  [2]: http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/context/annotation/ClassPathBeanDefinitionScanner.html\r\n  [3]: http://static.springsource.org/spring/docs/2.5.6/api/org/springframework/core/io/support/PathMatchingResourcePatternResolver.html\r\n  [4]: http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/core/type/classreading/MetadataReader.html","title":"How does Wicket&#39;s @SpringBean annotation work?","body":"<p>Spring uses the class loader and ASM at runtime to find all annotated classes.</p>\n\n<p>You can <a href=\"http://static.springsource.org/spring/docs/2.5.x/reference/beans.html#beans-annotation-config\" rel=\"nofollow noreferrer\">configure</a> where spring should search for beans:</p>\n\n<pre><code>&lt;context:component-scan base-package=\"some.package.to.start.from\"/&gt;\n</code></pre>\n\n<p>This uses the <a href=\"http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/context/annotation/ClassPathBeanDefinitionScanner.html\" rel=\"nofollow noreferrer\">ClassPathBeanDefinitionScanner</a> internally which will use the <a href=\"http://static.springsource.org/spring/docs/2.5.6/api/org/springframework/core/io/support/PathMatchingResourcePatternResolver.html\" rel=\"nofollow noreferrer\">PathMatchingResourcePatternResolver</a> to find the classes and the ASM-based <a href=\"http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/core/type/classreading/MetadataReader.html\" rel=\"nofollow noreferrer\">MetadataReader</a> to read the annotations.</p>\n"},{"tags":[],"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1437040925,"creation_date":1261574477,"answer_id":1952771,"question_id":1947389,"body_markdown":"`@SpringBean` works using Wicket&#39;s [underlying Injector mechanism][1]. When you instantiate a Wicket component, the constructor of Wicket&#39;s component base class introspects the class being instantiated, looking for the `@SpringBean` annotation. If the bean is found, then Wicket generates a proxy for the spring bean and injects it into the component&#39;s field. This is Wicket&#39;s equivalent of Spring&#39;s `@Autowired` annotation, the effect is similar.\r\n\r\nIt doesn&#39;t, however, have anything to do with Spring&#39;s own context/classpath scanning functionality (e.g. `@Component`), which is about auto-discovery of what is and isn&#39;t a bean, rather having anything to do with wiring.\r\n\r\n\r\n  [1]: https://cwiki.apache.org/confluence/display/WICKET/Spring\r\n","title":"How does Wicket&#39;s @SpringBean annotation work?","body":"<p><code>@SpringBean</code> works using Wicket's <a href=\"https://cwiki.apache.org/confluence/display/WICKET/Spring\" rel=\"noreferrer\">underlying Injector mechanism</a>. When you instantiate a Wicket component, the constructor of Wicket's component base class introspects the class being instantiated, looking for the <code>@SpringBean</code> annotation. If the bean is found, then Wicket generates a proxy for the spring bean and injects it into the component's field. This is Wicket's equivalent of Spring's <code>@Autowired</code> annotation, the effect is similar.</p>\n\n<p>It doesn't, however, have anything to do with Spring's own context/classpath scanning functionality (e.g. <code>@Component</code>), which is about auto-discovery of what is and isn't a bean, rather having anything to do with wiring.</p>\n"},{"tags":[],"owner":{"account_id":24219,"reputation":63,"user_id":61492,"display_name":"Rod"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1328956579,"creation_date":1328956579,"answer_id":9239521,"question_id":1947389,"body_markdown":"The class marked with a @SpringBean annotation has to have one of:\r\n\r\n 1. A no-args constructor\r\n 2. A superclass with a no-args constructor\r\n 3. Implement an interface\r\n\r\nAn exception will be thrown if these conditions are not met as Wicket will not be able to proxy the class.","title":"How does Wicket&#39;s @SpringBean annotation work?","body":"<p>The class marked with a @SpringBean annotation has to have one of:</p>\n\n<ol>\n<li>A no-args constructor</li>\n<li>A superclass with a no-args constructor</li>\n<li>Implement an interface</li>\n</ol>\n\n<p>An exception will be thrown if these conditions are not met as Wicket will not be able to proxy the class.</p>\n"}],"owner":{"account_id":561787,"reputation":1187,"user_id":174987,"accept_rate":83,"display_name":"Tarquila"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17321,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":1947470,"answer_count":3,"score":12,"last_activity_date":1638897872,"creation_date":1261498467,"question_id":1947389,"body_markdown":"How does Wicket&#39;s `@SpringBean` annotation work?  Does it use reflection at run time?  Does it make the compiler inject some code?  Or what?","title":"How does Wicket&#39;s @SpringBean annotation work?","body":"<p>How does Wicket's <code>@SpringBean</code> annotation work?  Does it use reflection at run time?  Does it make the compiler inject some code?  Or what?</p>\n"},{"tags":["java","spring","configuration","spring-jdbc","spring-bean"],"answers":[{"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638893420,"creation_date":1638893420,"answer_id":70263421,"question_id":70262864,"body_markdown":"To my knowledge, there is no way around the fact that if you want to have access to multiple databases Spring will not be able to do the magic for you. You will need to create the two `JdbcTemplate` Spring-managed beans and then inject them where needed using the `@Qualifier` annotation.\r\n\r\nThis approach has two benefits:\r\n\r\n 1. It actually work;\r\n 2. You are explicit about what you are doing. A Spring application has already a good load of magic happening in there, so we might want to avoid some additional one when we need something a little bit more custom and that is not that complex to achieve.","title":"Spring autowire custom @ConfigurationProperties object by prefix","body":"<p>To my knowledge, there is no way around the fact that if you want to have access to multiple databases Spring will not be able to do the magic for you. You will need to create the two <code>JdbcTemplate</code> Spring-managed beans and then inject them where needed using the <code>@Qualifier</code> annotation.</p>\n<p>This approach has two benefits:</p>\n<ol>\n<li>It actually work;</li>\n<li>You are explicit about what you are doing. A Spring application has already a good load of magic happening in there, so we might want to avoid some additional one when we need something a little bit more custom and that is not that complex to achieve.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":8423897,"reputation":1034,"user_id":7505687,"display_name":"Dilermando Lima"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1638897811,"creation_date":1638897811,"answer_id":70264437,"question_id":70262864,"body_markdown":"You don&#39;t need create a `DatabaseProperties`. Spring already does this for us on datasources and proprierties variable\r\n\r\n```java\r\n\r\n@Configuration\r\npublic class ConfigDataSource {\r\n\r\n\r\n    @Bean(&quot;datasource-1&quot;)  // this name will qualify on @autowired\r\n    @ConfigurationProperties(prefix=&quot;spring.datasource.yourname-datasource-1&quot;) // this is the name for the prefix for datasource on .properties settings\r\n    public DataSource dataSourcePostgres() {\r\n        return DataSourceBuilder.create().build();\r\n    }\r\n\t\r\n\t\r\n\t@Bean(&quot;datasource-2&quot;)  // this name will qualify on @autowired\r\n    @ConfigurationProperties(prefix=&quot;spring.datasource.yourname-datasource-2&quot;) // this is the name for the prefix for datasource on .properties settings\r\n    public DataSource dataSourceMySql() {\r\n        return DataSourceBuilder.create().build();\r\n    }\r\n    \r\n}\r\n```\r\n\r\n.properties\r\n\r\n```properties\r\n# Its required use the same name declared in bean\r\nspring.datasource.yourname-datasource-1.url=...\r\nspring.datasource.yourname-datasource-1.jdbcUrl=${spring.datasource.yourname-datasource-1}\r\nspring.datasource.yourname-datasource-1.username=user\r\nspring.datasource.yourname-datasource-1.password=pass\r\nspring.datasource.yourname-datasource-1.driver-class-name=your.driver\r\n\r\nspring.datasource.yourname-datasource-2.url=...\r\nspring.datasource.yourname-datasource-2.jdbcUrl=${spring.datasource.yourname-datasource-2}\r\nspring.datasource.yourname-datasource-2.username=user\r\nspring.datasource.yourname-datasource-2.password=pass\r\nspring.datasource.yourname-datasource-2.driver-class-name=your.driver\r\n```\r\n\r\nusing on services\r\n\r\n```java\r\n\r\n@Awtowired\r\n@Qualifier(&quot;datasource-1&quot;)\r\nprivate DataSource dataSource1;\r\n\r\n@Awtowired\r\n@Qualifier(&quot;datasource-2&quot;)\r\nprivate DataSource dataSource2;\r\n\r\npublic testJdbcTemplate(){\r\n     // You can qualifier JdbcTemplate below on bean and not necessary need instance on service\r\n     JdbcTemplate jdbcTemplateDatasource1 = new JdbcTemplate(dataSource1);\r\n     JdbcTemplate jdbcTemplateDatasource2 = new JdbcTemplate(dataSource2);\r\n}\r\n\r\n```","title":"Spring autowire custom @ConfigurationProperties object by prefix","body":"<p>You don't need create a <code>DatabaseProperties</code>. Spring already does this for us on datasources and proprierties variable</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Configuration\npublic class ConfigDataSource {\n\n\n    @Bean(&quot;datasource-1&quot;)  // this name will qualify on @autowired\n    @ConfigurationProperties(prefix=&quot;spring.datasource.yourname-datasource-1&quot;) // this is the name for the prefix for datasource on .properties settings\n    public DataSource dataSourcePostgres() {\n        return DataSourceBuilder.create().build();\n    }\n    \n    \n    @Bean(&quot;datasource-2&quot;)  // this name will qualify on @autowired\n    @ConfigurationProperties(prefix=&quot;spring.datasource.yourname-datasource-2&quot;) // this is the name for the prefix for datasource on .properties settings\n    public DataSource dataSourceMySql() {\n        return DataSourceBuilder.create().build();\n    }\n    \n}\n</code></pre>\n<p>.properties</p>\n<pre><code># Its required use the same name declared in bean\nspring.datasource.yourname-datasource-1.url=...\nspring.datasource.yourname-datasource-1.jdbcUrl=${spring.datasource.yourname-datasource-1}\nspring.datasource.yourname-datasource-1.username=user\nspring.datasource.yourname-datasource-1.password=pass\nspring.datasource.yourname-datasource-1.driver-class-name=your.driver\n\nspring.datasource.yourname-datasource-2.url=...\nspring.datasource.yourname-datasource-2.jdbcUrl=${spring.datasource.yourname-datasource-2}\nspring.datasource.yourname-datasource-2.username=user\nspring.datasource.yourname-datasource-2.password=pass\nspring.datasource.yourname-datasource-2.driver-class-name=your.driver\n</code></pre>\n<p>using on services</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Awtowired\n@Qualifier(&quot;datasource-1&quot;)\nprivate DataSource dataSource1;\n\n@Awtowired\n@Qualifier(&quot;datasource-2&quot;)\nprivate DataSource dataSource2;\n\npublic testJdbcTemplate(){\n     // You can qualifier JdbcTemplate below on bean and not necessary need instance on service\n     JdbcTemplate jdbcTemplateDatasource1 = new JdbcTemplate(dataSource1);\n     JdbcTemplate jdbcTemplateDatasource2 = new JdbcTemplate(dataSource2);\n}\n\n</code></pre>\n"}],"owner":{"account_id":16379082,"reputation":355,"user_id":11830541,"display_name":"Serhii Kachan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":723,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70264437,"answer_count":2,"score":0,"last_activity_date":1638897811,"creation_date":1638891086,"question_id":70262864,"body_markdown":"I would like to achieve not-trivial bean injection implementation.\r\n\r\nI have a custom properties file:\r\n\r\n    @Getter\r\n    @Setter\r\n    @ConfigurationProperties\r\n    public class DatabaseProperties {\r\n      private String url;\r\n      private String username;\r\n      private String password;\r\n    }\r\n\r\nI Here is the configuration file:\r\n\r\n    @Configuration\r\n    @EnableConfigurationProperties(DatabaseProperties.class)\r\n    public class DBConfig {\r\n\r\n      @Bean\r\n      @ConfigurationProperties(prefix = &quot;datasource.database1&quot;)\r\n      public JdbcTemplate jdbcTemplateDatabase1(DatabaseProperties databaseProperties) {\r\n        DataSource dataSource = new DriverManagerDataSource(\r\n                databaseProperties.getUrl(),\r\n                databaseProperties.getUsername(),\r\n                databaseProperties.getPassword());\r\n        return new JdbcTemplate(dataSource);\r\n      }\r\n\r\n      @Bean\r\n      @ConfigurationProperties(prefix = &quot;datasource.database2&quot;)\r\n      public JdbcTemplate jdbcTemplateDatabase2(DatabaseProperties databaseProperties) {\r\n        DataSource dataSource = new DriverManagerDataSource(\r\n                databaseProperties.getUrl(),\r\n                databaseProperties.getUsername(),\r\n                databaseProperties.getPassword());\r\n        return new JdbcTemplate(dataSource);\r\n      }\r\n    }\r\n\r\nThe goal I want to achieve is to instantiate a new DatabaseProperties instance based on prefix.\r\n\r\nThere are two possible solutions:\r\n\r\n - create two beans of type DatabaseProperties using corresponding prefixes and two JdbcTemplate beans where parameter is qualified DatabaseProperties bean accordingly.\r\n - in each JdbcTemplate bean provide 3 parameters (String url, String username, String password) and inject them through @Value\r\n\r\nBUT Is it possible to get rid of creating DatabaseProperties beans for each JdbcTemplate or using @Value ?","title":"Spring autowire custom @ConfigurationProperties object by prefix","body":"<p>I would like to achieve not-trivial bean injection implementation.</p>\n<p>I have a custom properties file:</p>\n<pre><code>@Getter\n@Setter\n@ConfigurationProperties\npublic class DatabaseProperties {\n  private String url;\n  private String username;\n  private String password;\n}\n</code></pre>\n<p>I Here is the configuration file:</p>\n<pre><code>@Configuration\n@EnableConfigurationProperties(DatabaseProperties.class)\npublic class DBConfig {\n\n  @Bean\n  @ConfigurationProperties(prefix = &quot;datasource.database1&quot;)\n  public JdbcTemplate jdbcTemplateDatabase1(DatabaseProperties databaseProperties) {\n    DataSource dataSource = new DriverManagerDataSource(\n            databaseProperties.getUrl(),\n            databaseProperties.getUsername(),\n            databaseProperties.getPassword());\n    return new JdbcTemplate(dataSource);\n  }\n\n  @Bean\n  @ConfigurationProperties(prefix = &quot;datasource.database2&quot;)\n  public JdbcTemplate jdbcTemplateDatabase2(DatabaseProperties databaseProperties) {\n    DataSource dataSource = new DriverManagerDataSource(\n            databaseProperties.getUrl(),\n            databaseProperties.getUsername(),\n            databaseProperties.getPassword());\n    return new JdbcTemplate(dataSource);\n  }\n}\n</code></pre>\n<p>The goal I want to achieve is to instantiate a new DatabaseProperties instance based on prefix.</p>\n<p>There are two possible solutions:</p>\n<ul>\n<li>create two beans of type DatabaseProperties using corresponding prefixes and two JdbcTemplate beans where parameter is qualified DatabaseProperties bean accordingly.</li>\n<li>in each JdbcTemplate bean provide 3 parameters (String url, String username, String password) and inject them through @Value</li>\n</ul>\n<p>BUT Is it possible to get rid of creating DatabaseProperties beans for each JdbcTemplate or using @Value ?</p>\n"},{"tags":["java","android","xml","android-studio","sdk"],"comments":[{"owner":{"account_id":1849514,"reputation":193868,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":0,"creation_date":1638837444,"post_id":70253466,"comment_id":124189268,"body_markdown":"It says your module&#39;s `compileSdkVersion` is too low. Have you tried updating your `compileSdkVersion`?","body":"It says your module&#39;s <code>compileSdkVersion</code> is too low. Have you tried updating your <code>compileSdkVersion</code>?"}],"answers":[{"tags":[],"owner":{"account_id":15804854,"reputation":513,"user_id":11403638,"display_name":"Matrix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638848214,"creation_date":1638845771,"answer_id":70254410,"question_id":70253466,"body_markdown":"in your project, `app -&gt; build.gradle:`\r\n\r\n    android {\r\n    compileSdkVersion 30\r\n    buildToolsVersion &quot;30.0.3&quot;\r\n\r\n        defaultConfig {\r\n            applicationId &quot;....&quot;\r\n            minSdkVersion 16\r\n            targetSdkVersion 30\r\n        }\r\n    }\r\n\r\nhere the minSdkVersion is minCompileSdk.","title":"How Do I Change My minCompileSDK Version In Android Studio?","body":"<p>in your project, <code>app -&gt; build.gradle:</code></p>\n<pre><code>android {\ncompileSdkVersion 30\nbuildToolsVersion &quot;30.0.3&quot;\n\n    defaultConfig {\n        applicationId &quot;....&quot;\n        minSdkVersion 16\n        targetSdkVersion 30\n    }\n}\n</code></pre>\n<p>here the minSdkVersion is minCompileSdk.</p>\n"},{"tags":[],"owner":{"account_id":22821029,"reputation":96,"user_id":16970888,"display_name":"Jamebes"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638862822,"creation_date":1638862822,"answer_id":70256458,"question_id":70253466,"body_markdown":"You can change minSdk and targetSdk. And ensure minSdk and target &lt; compileSDK\r\n\r\n      compileSdk 31\r\n\r\n    defaultConfig {\r\n        ...\r\n        minSdk 25\r\n        targetSdk 31\r\n        ...\r\n\r\n        \r\n    }\r\n\r\n&quot;the minCompileSdk (31) specified in a dependency&#39;s AAR metadata (META-INF/com/android/build/Gradle/aarmetadata.properties)\r\nIm set compileSdk 31 to fixed that error. Show me your build.gradle\r\n","title":"How Do I Change My minCompileSDK Version In Android Studio?","body":"<p>You can change minSdk and targetSdk. And ensure minSdk and target &lt; compileSDK</p>\n<pre><code>  compileSdk 31\n\ndefaultConfig {\n    ...\n    minSdk 25\n    targetSdk 31\n    ...\n\n    \n}\n</code></pre>\n<p>&quot;the minCompileSdk (31) specified in a dependency's AAR metadata (META-INF/com/android/build/Gradle/aarmetadata.properties)\nIm set compileSdk 31 to fixed that error. Show me your build.gradle</p>\n"},{"tags":[],"owner":{"account_id":14449988,"reputation":11,"user_id":10437837,"display_name":"Tim Sherwood"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1638897636,"creation_date":1638897636,"answer_id":70264392,"question_id":70253466,"body_markdown":"Thanks for the feedback! It looks like the solution was to change targetSDKversion and compileSDKVersion to 31 but keep buildToolsVersion at 30.0.3. I&#39;m guessing any version between target and min will work.","title":"How Do I Change My minCompileSDK Version In Android Studio?","body":"<p>Thanks for the feedback! It looks like the solution was to change targetSDKversion and compileSDKVersion to 31 but keep buildToolsVersion at 30.0.3. I'm guessing any version between target and min will work.</p>\n"}],"owner":{"account_id":14449988,"reputation":11,"user_id":10437837,"display_name":"Tim Sherwood"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1471,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1638897636,"creation_date":1638835732,"question_id":70253466,"body_markdown":"I just pulled up the android studio again and the current SDK version appears to have major bugs. While on SDK version 31 I get an error message saying SDK tools are corrupted and to uninstall then reinstall version 31.\r\n\r\nWhen I switch to version 30 I get another error message stating that &quot;the minCompileSdk (31) specified in a dependency&#39;s AAR metadata (META-INF/com/android/build/Gradle/aarmetadata.properties) is greater than this module&#39;s compileSdkVersion&quot;, and I can&#39;t find any sources on google for altering minCompileSdk.\r\n\r\nI just need to fix one of these problems, not both.\r\n\r\np.s. - I have already uninstalled and reinstalled APK 31 several times.","title":"How Do I Change My minCompileSDK Version In Android Studio?","body":"<p>I just pulled up the android studio again and the current SDK version appears to have major bugs. While on SDK version 31 I get an error message saying SDK tools are corrupted and to uninstall then reinstall version 31.</p>\n<p>When I switch to version 30 I get another error message stating that &quot;the minCompileSdk (31) specified in a dependency's AAR metadata (META-INF/com/android/build/Gradle/aarmetadata.properties) is greater than this module's compileSdkVersion&quot;, and I can't find any sources on google for altering minCompileSdk.</p>\n<p>I just need to fix one of these problems, not both.</p>\n<p>p.s. - I have already uninstalled and reinstalled APK 31 several times.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1638902036,"post_id":70264342,"comment_id":124209549,"body_markdown":"I had a similar issue when I first learned to use Java Mail and I was able to fix it. I just can&#39;t remember how. If I find my old code, I will share what I did.","body":"I had a similar issue when I first learned to use Java Mail and I was able to fix it. I just can&#39;t remember how. If I find my old code, I will share what I did."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1638902381,"post_id":70264342,"comment_id":124209683,"body_markdown":"If I remember correctly, I followed these recommendations. I just can&#39;t remember, but you may want to read this and try: https://community.oracle.com/tech/developers/discussion/2354385/best-performance-method-for-retrieving-all-messages-on-imap-server","body":"If I remember correctly, I followed these recommendations. I just can&#39;t remember, but you may want to read this and try: <a href=\"https://community.oracle.com/tech/developers/discussion/2354385/best-performance-method-for-retrieving-all-messages-on-imap-server\" rel=\"nofollow noreferrer\">community.oracle.com/tech/developers/discussion/2354385/&hellip;</a>"}],"owner":{"account_id":22198660,"reputation":133,"user_id":16439691,"display_name":"Girls are beautiful"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":331,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1638897458,"creation_date":1638897458,"question_id":70264342,"body_markdown":"    final Session session = Session.getDefaultInstance(new Properties());\r\n\r\n\t\t\ttry (Store store = session.getStore(&quot;imaps&quot;))\r\n\t\t\t{\r\n\t\t\t\tstore.connect(&quot;smtp.gmail.com&quot;, &quot;email@gmail.com&quot;, &quot;password&quot;);\r\n\r\n\t\t\t\ttry (Folder inbox = store.getFolder(&quot;Inbox&quot;))\r\n\t\t\t\t{\r\n\t\t\t\t\tinbox.open(Folder.READ_WRITE);\r\n\r\n\t\t\t\t\tfor (final Message message : inbox.getMessages())\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfinal Multipart multipart = (Multipart) message.getContent();\r\n\r\n\t\t\t\t\t\tSystem.out.println(multipart.getBodyPart(0).getContent());\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\nThe fetching of each mail takes around 0.5 second.\r\nSo if i do a loop over all my mail and let&#39;s say i have around 100 it can take up to minutes. Is there something wrong with my code or the javaxmail works like that? I realise it open a connection per mail but this seem wrong. It should fetch all data once and then cache them. \r\n\r\n\r\n","title":"Javax Mail fetching is very slow","body":"<pre><code>final Session session = Session.getDefaultInstance(new Properties());\n\n        try (Store store = session.getStore(&quot;imaps&quot;))\n        {\n            store.connect(&quot;smtp.gmail.com&quot;, &quot;email@gmail.com&quot;, &quot;password&quot;);\n\n            try (Folder inbox = store.getFolder(&quot;Inbox&quot;))\n            {\n                inbox.open(Folder.READ_WRITE);\n\n                for (final Message message : inbox.getMessages())\n                {\n                    final Multipart multipart = (Multipart) message.getContent();\n\n                    System.out.println(multipart.getBodyPart(0).getContent());\n                }\n            }\n        }\n</code></pre>\n<p>The fetching of each mail takes around 0.5 second.\nSo if i do a loop over all my mail and let's say i have around 100 it can take up to minutes. Is there something wrong with my code or the javaxmail works like that? I realise it open a connection per mail but this seem wrong. It should fetch all data once and then cache them.</p>\n"},{"tags":["java","android","kotlin","google-hangouts","sms-retriever-api"],"comments":[{"owner":{"account_id":4997462,"reputation":9987,"user_id":4017501,"accept_rate":62,"display_name":"cutiko"},"score":0,"creation_date":1637755303,"post_id":70094673,"comment_id":123909769,"body_markdown":"How is the SMS triggered? And, old version is already installed so nothing to.do there the has is already on the app code. New version will have another hash.","body":"How is the SMS triggered? And, old version is already installed so nothing to.do there the has is already on the app code. New version will have another hash."},{"owner":{"account_id":7837765,"reputation":31,"user_id":5925131,"display_name":"Chen Cohen"},"score":0,"creation_date":1638178300,"post_id":70094673,"comment_id":124009563,"body_markdown":"hi, sorry for the delay, we need somehow to support both two new hashes. The SMS triggered by server when the user is asking to fill OTP code. We are not sure if we need to deliver two codes and if the client should tell the server what hash to use.","body":"hi, sorry for the delay, we need somehow to support both two new hashes. The SMS triggered by server when the user is asking to fill OTP code. We are not sure if we need to deliver two codes and if the client should tell the server what hash to use."}],"answers":[{"tags":[],"owner":{"account_id":7837765,"reputation":31,"user_id":5925131,"display_name":"Chen Cohen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1638897204,"creation_date":1638897204,"answer_id":70264286,"question_id":70094673,"body_markdown":"We have solved it by sending 2 hashes in same SMS. \r\nHope this will help to others.\r\nThanks.","title":"Multiple App Signings With SMS Retriever API","body":"<p>We have solved it by sending 2 hashes in same SMS.\nHope this will help to others.\nThanks.</p>\n"}],"owner":{"account_id":7837765,"reputation":31,"user_id":5925131,"display_name":"Chen Cohen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70264286,"answer_count":1,"score":1,"last_activity_date":1638897204,"creation_date":1637750813,"question_id":70094673,"body_markdown":"I am working on the SMS Retriever API.I has successfully initiated the process with out current app signature but we need to upgrade the signature soon.\r\nWhen we will do so, two app signatures will run on the users devices (the old signature for app updates and new signature for new installs).\r\n\r\nI don&#39;t sure how to implement SMS Retriever API with 2 different 11-character hash strings base on the two signatures.\r\n\r\nCan I generate one hash from two different signatures?\r\nOr, what is the best way to handle those 2 hash strings for the same app?\r\n\r\nThanks in advance.","title":"Multiple App Signings With SMS Retriever API","body":"<p>I am working on the SMS Retriever API.I has successfully initiated the process with out current app signature but we need to upgrade the signature soon.\nWhen we will do so, two app signatures will run on the users devices (the old signature for app updates and new signature for new installs).</p>\n<p>I don't sure how to implement SMS Retriever API with 2 different 11-character hash strings base on the two signatures.</p>\n<p>Can I generate one hash from two different signatures?\nOr, what is the best way to handle those 2 hash strings for the same app?</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","maven","quarkus","graalvm"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1638884733,"post_id":70260864,"comment_id":124202181,"body_markdown":"Where are the two back slashes `\\\\cl.exe` are coming from?","body":"Where are the two back slashes <code>\\\\cl.exe</code> are coming from?"},{"owner":{"account_id":14046066,"reputation":117,"user_id":10146295,"display_name":"Saddex"},"score":0,"creation_date":1638885187,"post_id":70260864,"comment_id":124202402,"body_markdown":"I found this similar post which suggests that it should be a problem related to the environment, which seems likely - but otherwise, I have no idea. https://github.com/quarkusio/quarkus/issues/18787","body":"I found this similar post which suggests that it should be a problem related to the environment, which seems likely - but otherwise, I have no idea. <a href=\"https://github.com/quarkusio/quarkus/issues/18787\" rel=\"nofollow noreferrer\">github.com/quarkusio/quarkus/issues/18787</a>"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1638888751,"post_id":70260864,"comment_id":124204034,"body_markdown":"I would check the JAVA_HOME, PATH variable etc.","body":"I would check the JAVA_HOME, PATH variable etc."}],"answers":[{"tags":[],"owner":{"account_id":14046066,"reputation":117,"user_id":10146295,"display_name":"Saddex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1638897167,"creation_date":1638891207,"answer_id":70262904,"question_id":70260864,"body_markdown":"As so many times before this, the error messages I get by the terminal tend not to be very helpful.\r\n\r\nWhen I originally tried to do native compilation, I had watched a guide where the instructor used Mac as his default development environment.\r\n\r\nThere is an extra step for Windows, which is descibed here:\r\nhttps://quarkus.io/guides/building-native-image#producing-a-native-executable\r\n\r\n[![enter image description here][1]][1]\r\n\r\nBasically, I needed to install Visual Studio 2022 with the Windows 10 SDK. I had a version of Visual Studio 2017 installed, but a patch too low and I lacked disk space to simply update that one on its install location on the C: drive.\r\n\r\nAfter installing, I had to open x64 Native Tools command prompt (Start &gt; Visual Studio 2022 &gt; x64 Native Tools command prompt). The command won&#39;t work in the regular Powershell or CMD. Compilation was only successful after restarting my computer - before that I ended up with error c1083.\r\n\r\nNow I have a 51 MB executable.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/W2HmD.png","title":"java.nio.file.InvalidPathException: Illegal char &lt;&quot;&gt; at index 0: &quot;C:\\Program Files\\Git\\bin\\\\cl.exe at java.base/sun.nio.fs.WindowsPathParser.normalize","body":"<p>As so many times before this, the error messages I get by the terminal tend not to be very helpful.</p>\n<p>When I originally tried to do native compilation, I had watched a guide where the instructor used Mac as his default development environment.</p>\n<p>There is an extra step for Windows, which is descibed here:\n<a href=\"https://quarkus.io/guides/building-native-image#producing-a-native-executable\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/building-native-image#producing-a-native-executable</a></p>\n<p><a href=\"https://i.stack.imgur.com/W2HmD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W2HmD.png\" alt=\"enter image description here\" /></a></p>\n<p>Basically, I needed to install Visual Studio 2022 with the Windows 10 SDK. I had a version of Visual Studio 2017 installed, but a patch too low and I lacked disk space to simply update that one on its install location on the C: drive.</p>\n<p>After installing, I had to open x64 Native Tools command prompt (Start &gt; Visual Studio 2022 &gt; x64 Native Tools command prompt). The command won't work in the regular Powershell or CMD. Compilation was only successful after restarting my computer - before that I ended up with error c1083.</p>\n<p>Now I have a 51 MB executable.</p>\n"}],"owner":{"account_id":14046066,"reputation":117,"user_id":10146295,"display_name":"Saddex"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3336,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70262904,"answer_count":1,"score":2,"last_activity_date":1638897167,"creation_date":1638883078,"question_id":70260864,"body_markdown":"I want to compile a Quarkus project to native on my Windows 10 Home 64-bit computer, using the following command:\r\n````\r\n.\\mvnw package -Pnative\r\n````\r\n\r\nThe computer has GraalVM 21.3.0 installed, with GRAALVM_HOME, JAVA_HOME and PATH all set accordingly. Native-image is installed. It also runs Docker via WSL2. In theory, all should be set. Instead I get this error, using a basic project with only a few extensions installed. Project uses Maven as package manager.\r\n\r\n````\r\nFatal error:java.nio.file.InvalidPathException: Illegal char &lt;&quot;&gt; at index 0: &quot;C:\\Program Files\\Git\\bin\\\\cl.exe\r\n        at java.base/sun.nio.fs.WindowsPathParser.normalize(WindowsPathParser.java:182)\r\n        at java.base/sun.nio.fs.WindowsPathParser.parse(WindowsPathParser.java:153)\r\n        at java.base/sun.nio.fs.WindowsPathParser.parse(WindowsPathParser.java:77)\r\n        at java.base/sun.nio.fs.WindowsPath.parse(WindowsPath.java:92)\r\n        at java.base/sun.nio.fs.WindowsFileSystem.getPath(WindowsFileSystem.java:229)\r\n        at java.base/java.nio.file.Path.of(Path.java:147)\r\n        at java.base/java.nio.file.Paths.get(Paths.java:69)\r\n        at com.oracle.svm.hosted.c.codegen.CCompilerInvoker.lambda$lookupSearchPath$1(CCompilerInvoker.java:497)\r\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\n        at java.base/java.util.Spliterators$ArraySpliterator.tryAdvance(Spliterators.java:958)\r\n        at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:127)\r\n        at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:502)\r\n        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:488)\r\n        at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n        at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)\r\n        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n        at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:543)\r\n        at com.oracle.svm.hosted.c.codegen.CCompilerInvoker.lookupSearchPath(CCompilerInvoker.java:499)\r\n        at com.oracle.svm.hosted.c.codegen.CCompilerInvoker.getCCompilerPath(CCompilerInvoker.java:509)\r\n        at com.oracle.svm.hosted.c.codegen.CCompilerInvoker.getCCompilerInfo(CCompilerInvoker.java:356)\r\n        at com.oracle.svm.hosted.c.codegen.CCompilerInvoker.&lt;init&gt;(CCompilerInvoker.java:70)\r\n        at com.oracle.svm.hosted.c.codegen.CCompilerInvoker$WindowsCCompilerInvoker.&lt;init&gt;(CCompilerInvoker.java:110)\r\n        at com.oracle.svm.hosted.c.codegen.CCompilerInvoker.create(CCompilerInvoker.java:84)\r\n        at com.oracle.svm.hosted.NativeImageGenerator.setupNativeImage(NativeImageGenerator.java:864)\r\n        at com.oracle.svm.hosted.NativeImageGenerator.doRun(NativeImageGenerator.java:527)\r\n        at com.oracle.svm.hosted.NativeImageGenerator.run(NativeImageGenerator.java:488)\r\n        at com.oracle.svm.hosted.NativeImageGeneratorRunner.buildImage(NativeImageGeneratorRunner.java:403)\r\n        at com.oracle.svm.hosted.NativeImageGeneratorRunner.build(NativeImageGeneratorRunner.java:569)\r\n        at com.oracle.svm.hosted.NativeImageGeneratorRunner.main(NativeImageGeneratorRunner.java:122)\r\n        at com.oracle.svm.hosted.NativeImageGeneratorRunner$JDK9Plus.main(NativeImageGeneratorRunner.java:599)\r\n````\r\n\r\nThings I have tried to far is to check the PATH environment variable, specifically the one going to the Git directory, and also tried searching through the project search tree in IntelliJ, with no luck. It seems like it would be very easy to solve, if I can find where the problem lies. Any ideas?\r\n\r\nThanks in advance!","title":"java.nio.file.InvalidPathException: Illegal char &lt;&quot;&gt; at index 0: &quot;C:\\Program Files\\Git\\bin\\\\cl.exe at java.base/sun.nio.fs.WindowsPathParser.normalize","body":"<p>I want to compile a Quarkus project to native on my Windows 10 Home 64-bit computer, using the following command:</p>\n<pre><code>.\\mvnw package -Pnative\n</code></pre>\n<p>The computer has GraalVM 21.3.0 installed, with GRAALVM_HOME, JAVA_HOME and PATH all set accordingly. Native-image is installed. It also runs Docker via WSL2. In theory, all should be set. Instead I get this error, using a basic project with only a few extensions installed. Project uses Maven as package manager.</p>\n<pre><code>Fatal error:java.nio.file.InvalidPathException: Illegal char &lt;&quot;&gt; at index 0: &quot;C:\\Program Files\\Git\\bin\\\\cl.exe\n        at java.base/sun.nio.fs.WindowsPathParser.normalize(WindowsPathParser.java:182)\n        at java.base/sun.nio.fs.WindowsPathParser.parse(WindowsPathParser.java:153)\n        at java.base/sun.nio.fs.WindowsPathParser.parse(WindowsPathParser.java:77)\n        at java.base/sun.nio.fs.WindowsPath.parse(WindowsPath.java:92)\n        at java.base/sun.nio.fs.WindowsFileSystem.getPath(WindowsFileSystem.java:229)\n        at java.base/java.nio.file.Path.of(Path.java:147)\n        at java.base/java.nio.file.Paths.get(Paths.java:69)\n        at com.oracle.svm.hosted.c.codegen.CCompilerInvoker.lambda$lookupSearchPath$1(CCompilerInvoker.java:497)\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\n        at java.base/java.util.Spliterators$ArraySpliterator.tryAdvance(Spliterators.java:958)\n        at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:127)\n        at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:502)\n        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:488)\n        at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\n        at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)\n        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n        at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:543)\n        at com.oracle.svm.hosted.c.codegen.CCompilerInvoker.lookupSearchPath(CCompilerInvoker.java:499)\n        at com.oracle.svm.hosted.c.codegen.CCompilerInvoker.getCCompilerPath(CCompilerInvoker.java:509)\n        at com.oracle.svm.hosted.c.codegen.CCompilerInvoker.getCCompilerInfo(CCompilerInvoker.java:356)\n        at com.oracle.svm.hosted.c.codegen.CCompilerInvoker.&lt;init&gt;(CCompilerInvoker.java:70)\n        at com.oracle.svm.hosted.c.codegen.CCompilerInvoker$WindowsCCompilerInvoker.&lt;init&gt;(CCompilerInvoker.java:110)\n        at com.oracle.svm.hosted.c.codegen.CCompilerInvoker.create(CCompilerInvoker.java:84)\n        at com.oracle.svm.hosted.NativeImageGenerator.setupNativeImage(NativeImageGenerator.java:864)\n        at com.oracle.svm.hosted.NativeImageGenerator.doRun(NativeImageGenerator.java:527)\n        at com.oracle.svm.hosted.NativeImageGenerator.run(NativeImageGenerator.java:488)\n        at com.oracle.svm.hosted.NativeImageGeneratorRunner.buildImage(NativeImageGeneratorRunner.java:403)\n        at com.oracle.svm.hosted.NativeImageGeneratorRunner.build(NativeImageGeneratorRunner.java:569)\n        at com.oracle.svm.hosted.NativeImageGeneratorRunner.main(NativeImageGeneratorRunner.java:122)\n        at com.oracle.svm.hosted.NativeImageGeneratorRunner$JDK9Plus.main(NativeImageGeneratorRunner.java:599)\n</code></pre>\n<p>Things I have tried to far is to check the PATH environment variable, specifically the one going to the Git directory, and also tried searching through the project search tree in IntelliJ, with no luck. It seems like it would be very easy to solve, if I can find where the problem lies. Any ideas?</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","boolean","compiler-optimization","properties-file"],"comments":[{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1638897231,"post_id":70264273,"comment_id":124207652,"body_markdown":"Java tends to do just what you told it to do. If you didn&#39;t tell it to save the result in a variable, it gets re-evaluated.","body":"Java tends to do just what you told it to do. If you didn&#39;t tell it to save the result in a variable, it gets re-evaluated."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1638910026,"post_id":70264273,"comment_id":124212454,"body_markdown":"If the property can never change during execution, then I would recommend caching it.","body":"If the property can never change during execution, then I would recommend caching it."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1685618020,"post_id":70264273,"comment_id":134686759,"body_markdown":"`prop.getProperty(&quot;PRINT_RECEIVED_BYTES&quot;)` is definitely not a constant expression.","body":"<code>prop.getProperty(&quot;PRINT_RECEIVED_BYTES&quot;)</code> is definitely not a constant expression."}],"owner":{"account_id":12303965,"reputation":33,"user_id":8977589,"display_name":"jetshaun"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1638897145,"creation_date":1638897145,"question_id":70264273,"body_markdown":"I have some legacy java code in a data capturing program meant to read data byte-by-byte from a serial port.\r\n\r\n\r\n\tprivate void processByte(byte b) {\r\n\t\t\r\n\t\tif(Boolean.parseBoolean(prop.getProperty(&quot;PRINT_RECEIVED_BYTES&quot;))) {\r\n\t\t\tSystem.out.println(&quot;Current byte received: ASCII Decimal value: &quot; + b + &quot;, Char value: &quot; + (char) b);\r\n\t\t}\r\n    .\r\n    .\r\n    .\r\n    }\r\n\r\nMy concern is: Is the parsing of the property PRINT_RECEIVED_BYTES (which can be either `true` or `false`) evaluated for every run of the `processByte()` method?\r\nShould I bother to change the code and store the parsed property value in a boolean field, to be used in the `if` statement inside `processByte()`?\r\n\r\nThe properties are read from a file only once when the program starts. The method is being called from inside a loop for every byte of data received.","title":"Does Boolean.parseBoolean() evaluate a constant expression every time inside a loop, or is there any optimization taking place?","body":"<p>I have some legacy java code in a data capturing program meant to read data byte-by-byte from a serial port.</p>\n<pre><code>private void processByte(byte b) {\n    \n    if(Boolean.parseBoolean(prop.getProperty(&quot;PRINT_RECEIVED_BYTES&quot;))) {\n        System.out.println(&quot;Current byte received: ASCII Decimal value: &quot; + b + &quot;, Char value: &quot; + (char) b);\n    }\n.\n.\n.\n}\n</code></pre>\n<p>My concern is: Is the parsing of the property PRINT_RECEIVED_BYTES (which can be either <code>true</code> or <code>false</code>) evaluated for every run of the <code>processByte()</code> method?\nShould I bother to change the code and store the parsed property value in a boolean field, to be used in the <code>if</code> statement inside <code>processByte()</code>?</p>\n<p>The properties are read from a file only once when the program starts. The method is being called from inside a loop for every byte of data received.</p>\n"},{"tags":["java","mysql","jdbc","minecraft"],"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1638819892,"post_id":70251007,"comment_id":124184681,"body_markdown":"Does this answer your question? [Java MySQL connection not working: No suitable driver found](https://stackoverflow.com/questions/63842554/java-mysql-connection-not-working-no-suitable-driver-found)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/63842554/java-mysql-connection-not-working-no-suitable-driver-found\">Java MySQL connection not working: No suitable driver found</a>"},{"owner":{"account_id":21216603,"reputation":31,"user_id":15604110,"display_name":"Knoquer Bonk"},"score":0,"creation_date":1638821254,"post_id":70251007,"comment_id":124185133,"body_markdown":"Sadly, no. I tried loading the driver like that, but I&#39;m still getting the exact same error message. On top of that, wasn&#39;t loading the driver not necessary anymore after a certain jdbc update?","body":"Sadly, no. I tried loading the driver like that, but I&#39;m still getting the exact same error message. On top of that, wasn&#39;t loading the driver not necessary anymore after a certain jdbc update?"},{"owner":{"account_id":130571,"reputation":3343,"user_id":329931,"accept_rate":57,"display_name":"Tom"},"score":0,"creation_date":1669874924,"post_id":70251007,"comment_id":131743295,"body_markdown":"stuck on the same thing. Did you find an answer?","body":"stuck on the same thing. Did you find an answer?"}],"answers":[{"tags":[],"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638827064,"creation_date":1638820048,"answer_id":70251106,"question_id":70251007,"body_markdown":"You have to load driver at the beginning (only one time) :\r\n```\r\ntry {\r\n   Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n   // Or &quot;com.mysql.jdbc.Driver&quot; for some old mysql driver\r\n} catch(ClassNotFoundException e) {\r\n   getLogger().error(&quot;Failed to load driver&quot;);\r\n   e.printStackTrace();\r\n}\r\n```\r\nThen, you should check that the given jar is exported with good dependencies. Depending or your minecraft version, maybe it&#39;s already include. But it&#39;s possible that it&#39;s not.\r\n\r\nSo, you have to change your export settings to include the jar `mysql-connector-java-8.0.27.jar` in your own.","title":"JDBC No suitable driver found (Minecraft Fabric modding)","body":"<p>You have to load driver at the beginning (only one time) :</p>\n<pre><code>try {\n   Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n   // Or &quot;com.mysql.jdbc.Driver&quot; for some old mysql driver\n} catch(ClassNotFoundException e) {\n   getLogger().error(&quot;Failed to load driver&quot;);\n   e.printStackTrace();\n}\n</code></pre>\n<p>Then, you should check that the given jar is exported with good dependencies. Depending or your minecraft version, maybe it's already include. But it's possible that it's not.</p>\n<p>So, you have to change your export settings to include the jar <code>mysql-connector-java-8.0.27.jar</code> in your own.</p>\n"}],"owner":{"account_id":21216603,"reputation":31,"user_id":15604110,"display_name":"Knoquer Bonk"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":241,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1638879601,"answer_count":1,"score":2,"last_activity_date":1638896758,"creation_date":1638819449,"question_id":70251007,"body_markdown":"EDIT (**fixed**):\r\n\r\nI found out how to fix this issue, it apperently had something to do with the fact I used gradle to build my project (which is standard for modding with FabricMC). Because of that, **I had to add the MySQL Connector/J to the dependencies in the build.gradle file**. After that I built another project and the SQL connection worked!\r\n\r\nI didn&#39;t need to add it as a library or dependency afterward. I also didn&#39;t have to load the driver using Class.forName();\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-gradle --&gt;\r\n\r\n    dependencies {\r\n    \t// To change the versions see the gradle.properties file\r\n    \tminecraft &quot;com.mojang:minecraft:${project.minecraft_version}&quot;\r\n    \tmappings &quot;net.fabricmc:yarn:${project.yarn_mappings}:v2&quot;\r\n    \tmodImplementation &quot;net.fabricmc:fabric-loader:${project.loader_version}&quot;\r\n\r\n    \t// Fabric API. This is technically optional, but you probably want it anyway.\r\n    \tmodImplementation &quot;net.fabricmc.fabric-api:fabric-api:${project.fabric_version}&quot;\r\n    \t\r\n    \t// https://mvnrepository.com/artifact/mysql/mysql-connector-java\r\n    \timplementation &#39;mysql:mysql-connector-java:8.0.27&#39;\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\n\r\nIm writing a Minecraft mod using the Fabric API in Intellij Idea and need to communicate with a database that&#39;s on another server (which is using DirectAdmin).\r\n\r\nI&#39;ve tried a lot of solutions suggested from different questions, like loading the driver first or installing the Database Manager plugin. Those sadly don&#39;t seem to solve the problem.\r\n\r\nI have also quadruple-checked if I&#39;m using the correct path to the database, which I seem to be doing.\r\n\r\n(Im using Java 16, in case that helps)\r\n\r\nI tried make the connection, but keep getting the same error:\r\njava.sql.SQLException: No suitable driver found for jdbc\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI have included the mysql-connector-java-8.0.27.jar library and am still getting the error.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nAfter that I also added it as a dependency, but it still doesn&#39;t work.\r\n\r\n[![enter image description here][3]][3]\r\n\r\nAm I missing something here? I&#39;ve been reading a lot of these posts but none of the solutions seem to work.\r\nSomething I&#39;m suspecting is that I have to add some sort of library to the server the database is on as well, but I don&#39;t know how I would do that.\r\n\r\nThis is the code I use to make the connection. I call the connect() method from my Main class, which is in a try/catch\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    package nl.egelblad.tutorial.sql;\r\n\r\n    import java.sql.*;\r\n\r\n    public class MySQL {\r\n        private String host = &quot;185.102.34.56&quot;;\r\n        private String port = &quot;3306&quot;;\r\n        private String database = &quot;my_db&quot;;\r\n        private String username = &quot;db_username&quot;;\r\n        private String password = &quot;db_password&quot;;\r\n        private Connection connection;\r\n\r\n        public boolean isConnected() {\r\n            return (connection == null ? false : true);\r\n        }\r\n\r\n        public void connect() throws ClassNotFoundException, SQLException {\r\n            if (!isConnected()) {\r\n                connection = DriverManager.getConnection(&quot;jdbc:mysql://&quot; + host + &quot;:&quot; + port + &quot;/&quot; + database + &quot;?useSSL=false&amp;amp;autoReconnect=true&quot;, username, password);\r\n            }\r\n        }\r\n\r\n        public void disconnect() {\r\n            if (isConnected()) {\r\n                try {\r\n                    connection.close();\r\n                } catch (SQLException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n\r\n        public Connection getConnection() {\r\n            return connection;\r\n        }\r\n    }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n[![enter image description here][4]][4]\r\n\r\n[![enter image description here][5]][5]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/57jyo.png\r\n  [2]: https://i.stack.imgur.com/DdGyd.png\r\n  [3]: https://i.stack.imgur.com/fMoYI.png\r\n  [4]: https://i.stack.imgur.com/cENbv.png\r\n  [5]: https://i.stack.imgur.com/nDFtG.png","title":"JDBC No suitable driver found (Minecraft Fabric modding)","body":"<p>EDIT (<strong>fixed</strong>):</p>\n<p>I found out how to fix this issue, it apperently had something to do with the fact I used gradle to build my project (which is standard for modding with FabricMC). Because of that, <strong>I had to add the MySQL Connector/J to the dependencies in the build.gradle file</strong>. After that I built another project and the SQL connection worked!</p>\n<p>I didn't need to add it as a library or dependency afterward. I also didn't have to load the driver using Class.forName();</p>\n<pre class=\"lang-gradle prettyprint-override\"><code>dependencies {\n    // To change the versions see the gradle.properties file\n    minecraft &quot;com.mojang:minecraft:${project.minecraft_version}&quot;\n    mappings &quot;net.fabricmc:yarn:${project.yarn_mappings}:v2&quot;\n    modImplementation &quot;net.fabricmc:fabric-loader:${project.loader_version}&quot;\n\n    // Fabric API. This is technically optional, but you probably want it anyway.\n    modImplementation &quot;net.fabricmc.fabric-api:fabric-api:${project.fabric_version}&quot;\n    \n    // https://mvnrepository.com/artifact/mysql/mysql-connector-java\n    implementation 'mysql:mysql-connector-java:8.0.27'\n}\n</code></pre>\n<p>Im writing a Minecraft mod using the Fabric API in Intellij Idea and need to communicate with a database that's on another server (which is using DirectAdmin).</p>\n<p>I've tried a lot of solutions suggested from different questions, like loading the driver first or installing the Database Manager plugin. Those sadly don't seem to solve the problem.</p>\n<p>I have also quadruple-checked if I'm using the correct path to the database, which I seem to be doing.</p>\n<p>(Im using Java 16, in case that helps)</p>\n<p>I tried make the connection, but keep getting the same error:\njava.sql.SQLException: No suitable driver found for jdbc</p>\n<p><a href=\"https://i.stack.imgur.com/57jyo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/57jyo.png\" alt=\"enter image description here\" /></a></p>\n<p>I have included the mysql-connector-java-8.0.27.jar library and am still getting the error.</p>\n<p><a href=\"https://i.stack.imgur.com/DdGyd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DdGyd.png\" alt=\"enter image description here\" /></a></p>\n<p>After that I also added it as a dependency, but it still doesn't work.</p>\n<p><a href=\"https://i.stack.imgur.com/fMoYI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fMoYI.png\" alt=\"enter image description here\" /></a></p>\n<p>Am I missing something here? I've been reading a lot of these posts but none of the solutions seem to work.\nSomething I'm suspecting is that I have to add some sort of library to the server the database is on as well, but I don't know how I would do that.</p>\n<p>This is the code I use to make the connection. I call the connect() method from my Main class, which is in a try/catch</p>\n<pre class=\"lang-java prettyprint-override\"><code>package nl.egelblad.tutorial.sql;\n\nimport java.sql.*;\n\npublic class MySQL {\n    private String host = &quot;185.102.34.56&quot;;\n    private String port = &quot;3306&quot;;\n    private String database = &quot;my_db&quot;;\n    private String username = &quot;db_username&quot;;\n    private String password = &quot;db_password&quot;;\n    private Connection connection;\n\n    public boolean isConnected() {\n        return (connection == null ? false : true);\n    }\n\n    public void connect() throws ClassNotFoundException, SQLException {\n        if (!isConnected()) {\n            connection = DriverManager.getConnection(&quot;jdbc:mysql://&quot; + host + &quot;:&quot; + port + &quot;/&quot; + database + &quot;?useSSL=false&amp;amp;autoReconnect=true&quot;, username, password);\n        }\n    }\n\n    public void disconnect() {\n        if (isConnected()) {\n            try {\n                connection.close();\n            } catch (SQLException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n    public Connection getConnection() {\n        return connection;\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/cENbv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cENbv.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/nDFtG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nDFtG.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","maven","tomcat","applet","jsweet"],"answers":[{"tags":[],"owner":{"account_id":1643431,"reputation":851,"user_id":1515454,"display_name":"alexp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638896747,"creation_date":1638896747,"answer_id":70264180,"question_id":70263905,"body_markdown":"You might consider CheerpJ (https://leaningtech.com/cheerpj/) for this project. From your description it seems likely that the applet would work out-of-the-box.\r\n\r\nIf you want to give quickly give it a try: https://chrome.google.com/webstore/detail/cheerpj-applet-runner/bbmolahhldcbngedljfadjlognfaaein\r\n\r\nFull disclosure: I am lead dev of CheerpJ and CTO of LeaningTech.","title":"Evaluating Jsweet for applet to HTML conversion","body":"<p>You might consider CheerpJ (<a href=\"https://leaningtech.com/cheerpj/\" rel=\"nofollow noreferrer\">https://leaningtech.com/cheerpj/</a>) for this project. From your description it seems likely that the applet would work out-of-the-box.</p>\n<p>If you want to give quickly give it a try: <a href=\"https://chrome.google.com/webstore/detail/cheerpj-applet-runner/bbmolahhldcbngedljfadjlognfaaein\" rel=\"nofollow noreferrer\">https://chrome.google.com/webstore/detail/cheerpj-applet-runner/bbmolahhldcbngedljfadjlognfaaein</a></p>\n<p>Full disclosure: I am lead dev of CheerpJ and CTO of LeaningTech.</p>\n"}],"owner":{"account_id":2322124,"reputation":77,"user_id":2037567,"display_name":"VSTech"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1638896747,"creation_date":1638895566,"question_id":70263905,"body_markdown":"I have been evaluating Jsweet since the past 4 days in order to finalize a tool that can be used to modernize an application from applet to html5/js based front end. I have been able to try the trial examples where applet based java files are getting transpiled to .js files. As a next step I need to have Jsweet introduced to the an applet based application which has 9 tabs with considerable components like dashboards, report generation related drop downs, date picker elements, tables etc. However this application which I need to modernize is not maven based and hence does not have a pom.xml. It is executed using Tomcat.\r\n\r\n1. Is maven a pre requisite for Jsweet?\r\n2. My expectations from Jsweet are that if I am able to introduce Jsweet to my codebase like in the example and able to create a build using maven, I should be in a position to get .js files created in the target&gt;js&gt;applet folder. Could these be confirmed please?","title":"Evaluating Jsweet for applet to HTML conversion","body":"<p>I have been evaluating Jsweet since the past 4 days in order to finalize a tool that can be used to modernize an application from applet to html5/js based front end. I have been able to try the trial examples where applet based java files are getting transpiled to .js files. As a next step I need to have Jsweet introduced to the an applet based application which has 9 tabs with considerable components like dashboards, report generation related drop downs, date picker elements, tables etc. However this application which I need to modernize is not maven based and hence does not have a pom.xml. It is executed using Tomcat.</p>\n<ol>\n<li>Is maven a pre requisite for Jsweet?</li>\n<li>My expectations from Jsweet are that if I am able to introduce Jsweet to my codebase like in the example and able to create a build using maven, I should be in a position to get .js files created in the target&gt;js&gt;applet folder. Could these be confirmed please?</li>\n</ol>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1392086576,"post_id":21691963,"comment_id":32795158,"body_markdown":"Duplicate of: [How to concatenate two arrays in Java?](http://stackoverflow.com/questions/80476/how-to-concatenate-two-arrays-in-java)","body":"Duplicate of: <a href=\"http://stackoverflow.com/questions/80476/how-to-concatenate-two-arrays-in-java\">How to concatenate two arrays in Java?</a>"},{"owner":{"account_id":3392345,"reputation":10946,"user_id":2846923,"accept_rate":100,"display_name":"The Guy with The Hat"},"score":2,"creation_date":1392086652,"post_id":21691963,"comment_id":32795180,"body_markdown":"@Mr.Polywhirl This in not about concatenation. Please re-read the question.","body":"@Mr.Polywhirl This in not about concatenation. Please re-read the question."},{"owner":{"account_id":475533,"reputation":6984,"user_id":885922,"accept_rate":86,"display_name":"xlm"},"score":0,"creation_date":1392087052,"post_id":21691963,"comment_id":32795286,"body_markdown":"@dsdouglous could you please add more code/context to how you are calling the addition of the arrays? Would help me provide a better answer.","body":"@dsdouglous could you please add more code/context to how you are calling the addition of the arrays? Would help me provide a better answer."},{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1392088050,"post_id":21691963,"comment_id":32795519,"body_markdown":"Yeah, sorry for the confusion.","body":"Yeah, sorry for the confusion."},{"owner":{"account_id":475533,"reputation":6984,"user_id":885922,"accept_rate":86,"display_name":"xlm"},"score":0,"creation_date":1392088642,"post_id":21691963,"comment_id":32795689,"body_markdown":"@dsdouglous thanks, you might want to check your code though i.e. in else clause you refer to variable `c` which is only declared/in-scope for in the if-then clause. Also I think you have used `added` interchangeably with `c`","body":"@dsdouglous thanks, you might want to check your code though i.e. in else clause you refer to variable <code>c</code> which is only declared/in-scope for in the if-then clause. Also I think you have used <code>added</code> interchangeably with <code>c</code>"}],"answers":[{"tags":[],"owner":{"account_id":475533,"reputation":6984,"user_id":885922,"accept_rate":86,"display_name":"xlm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1392087750,"creation_date":1392086410,"answer_id":21691987,"question_id":21691963,"body_markdown":"Firstly, you&#39;ll get a ArrayIndexOutOfBoundsException because on the last iteration (3rd iteration): `c[2] = a[2] + b[2]`, `b[2]` is out of bound since it is smaller. So you can&#39;t check null in this case you have to check the length of the shorter array. \r\n\r\nAlso I&#39;m not sure how you get {4, 4} because I need more code to understand what is going on. \r\n\r\nBut anyway here&#39;s a solution to avoid ArrayIndexOutOfBoundsException:   \r\n\r\n    public static int[] add(int[] a, int[] b) {\r\n\t\tint[] c;\r\n\t\t\r\n\t\tif (a.length &gt;= b.length){\r\n\t\t\tc = new int[a.length];\r\n\r\n\t\t\tfor(int i=0; i&lt;c.length; i++){\r\n\t\t\t\tc[i] = (i &lt; b.length) ? a[i] + b[i]: a[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\telse{\r\n\t\t\tc = new int[b.length];\r\n\r\n\t\t\tfor(int i=0; i&lt;c.length; i++){\r\n\t\t\t\tc[i] = (i &lt; a.length) ? a[i] + b[i]: b[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn c;\r\n\t}","title":"How to add two different sized arrays?","body":"<p>Firstly, you'll get a ArrayIndexOutOfBoundsException because on the last iteration (3rd iteration): <code>c[2] = a[2] + b[2]</code>, <code>b[2]</code> is out of bound since it is smaller. So you can't check null in this case you have to check the length of the shorter array. </p>\n\n<p>Also I'm not sure how you get {4, 4} because I need more code to understand what is going on. </p>\n\n<p>But anyway here's a solution to avoid ArrayIndexOutOfBoundsException:   </p>\n\n<pre><code>public static int[] add(int[] a, int[] b) {\n    int[] c;\n\n    if (a.length &gt;= b.length){\n        c = new int[a.length];\n\n        for(int i=0; i&lt;c.length; i++){\n            c[i] = (i &lt; b.length) ? a[i] + b[i]: a[i];\n        }\n    }\n    else{\n        c = new int[b.length];\n\n        for(int i=0; i&lt;c.length; i++){\n            c[i] = (i &lt; a.length) ? a[i] + b[i]: b[i];\n        }\n    }\n    return c;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1392115848,"creation_date":1392086983,"answer_id":21692078,"question_id":21691963,"body_markdown":"You can define a destination array with a length of the max of both source arrays. After that you just do array bounds-checking. Of course, you should also add checks for null before you even begin to loop over `c`.\r\n\r\n    import java.util.Arrays;\r\n    \r\n    class AddArrays {\r\n    \tprivate static int[] a = new int[] { 1, 2, 3 };\r\n        private static int[] b = new int[] { 3, 2 };\r\n        private static int[] c = add(a, b);\r\n    \t\r\n    \tprivate static int[] add(int[] a, int[] b) {\r\n    \t\tint[] c = new int[(int) Math.max(a.length, b.length)];\r\n    \t\tfor (int i = 0; i &lt; c.length; i++) {\r\n    \t\t\tif (a.length &gt; i) {\r\n    \t\t\t\tc[i] += a[i];\r\n    \t\t\t}\r\n    \t\t\tif (b.length &gt; i) {\r\n    \t\t\t\tc[i] += b[i];\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn c;\r\n    \t}\r\n    \t\r\n    \tpublic static void main (String[] args) {\r\n    \t\tSystem.out.println(Arrays.toString(c));\r\n    \t}\r\n    }\r\n\r\nOutput:\r\n\r\n    [4, 4, 3]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29","title":"How to add two different sized arrays?","body":"<p>You can define a destination array with a length of the max of both source arrays. After that you just do array bounds-checking. Of course, you should also add checks for null before you even begin to loop over <code>c</code>.</p>\n\n<pre><code>import java.util.Arrays;\n\nclass AddArrays {\n    private static int[] a = new int[] { 1, 2, 3 };\n    private static int[] b = new int[] { 3, 2 };\n    private static int[] c = add(a, b);\n\n    private static int[] add(int[] a, int[] b) {\n        int[] c = new int[(int) Math.max(a.length, b.length)];\n        for (int i = 0; i &lt; c.length; i++) {\n            if (a.length &gt; i) {\n                c[i] += a[i];\n            }\n            if (b.length &gt; i) {\n                c[i] += b[i];\n            }\n        }\n        return c;\n    }\n\n    public static void main (String[] args) {\n        System.out.println(Arrays.toString(c));\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[4, 4, 3]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3982537,"reputation":6447,"user_id":3284114,"accept_rate":100,"display_name":"msmolcic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1392087707,"creation_date":1392087707,"answer_id":21692194,"question_id":21691963,"body_markdown":"You&#39;ve gone out of bounds because program is looking for number on the third place in the &quot;a&quot; and &quot;b&quot; array. In the &quot;a&quot; array it&#39;s number 3, but array &quot;b&quot; has no such number so you get an error index out of bounds. I fixed that problem by doing the next thing:\r\n\r\n    if (a.length &gt;= b.length){\r\n        int[] c = new int[a.length];\r\n\r\n        for(int i=0; i &lt; c.length; i++){\r\n            if (i &lt; b.length)\r\n                c[i] = a[i] + b[i];\r\n            else\r\n                c[i] = a[i];\r\n        }\r\n\r\n        return c;\r\n\r\n    } else {\r\n        int[]c = new int[b.length];\r\n\r\n        for(int i=0; i&lt;c.length; i++){\r\n            if (i &lt; a.length)\r\n                c[i] = a[i] + b[i];\r\n            else\r\n                c[i] = b[i];\r\n        }\r\n        \r\n        return c;\r\n\r\n    }\r\n\r\nNew array gets the sum of numbers while both arrays got numbers on that index and when the shorter array is out of number the rest of numbers are simply copied into the new array. Hope it helps, if you have any other questions please let me know.","title":"How to add two different sized arrays?","body":"<p>You've gone out of bounds because program is looking for number on the third place in the \"a\" and \"b\" array. In the \"a\" array it's number 3, but array \"b\" has no such number so you get an error index out of bounds. I fixed that problem by doing the next thing:</p>\n\n<pre><code>if (a.length &gt;= b.length){\n    int[] c = new int[a.length];\n\n    for(int i=0; i &lt; c.length; i++){\n        if (i &lt; b.length)\n            c[i] = a[i] + b[i];\n        else\n            c[i] = a[i];\n    }\n\n    return c;\n\n} else {\n    int[]c = new int[b.length];\n\n    for(int i=0; i&lt;c.length; i++){\n        if (i &lt; a.length)\n            c[i] = a[i] + b[i];\n        else\n            c[i] = b[i];\n    }\n\n    return c;\n\n}\n</code></pre>\n\n<p>New array gets the sum of numbers while both arrays got numbers on that index and when the shorter array is out of number the rest of numbers are simply copied into the new array. Hope it helps, if you have any other questions please let me know.</p>\n"},{"tags":[],"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1392089042,"creation_date":1392089042,"answer_id":21692431,"question_id":21691963,"body_markdown":"You&#39;ve got a couple problems, namely:\r\n\r\n - Your lengths are mixed up so you&#39;ll get an exception. You should do the addition for the smaller array&#39;s length, then copy the rest of the larger array. (Assuming that is the desired behavior.)\r\n - In the first example, you have your return statements inside your loops. Move them to outside.\r\n\r\nIf it were me, what I would do is assume one was the longer array and swap the references if it&#39;s not. This way you only have to write one loop.\r\n\r\n    static int[] sum(int[] a, int[] b) {\r\n        int[] c;\r\n\r\n        if(b.length &gt; a.length) {\r\n            c = a;\r\n            a = b;\r\n            b = c;\r\n        }\r\n\r\n        c = Arrays.copyOf(a, a.length);\r\n\r\n        for(int i = 0; i &lt; b.length; i++) {\r\n            c[i] += b[i];\r\n        }\r\n\r\n        return c;\r\n    }\r\n\r\nInstead of `copyOf`, the other way you could do it is something like this:\r\n\r\n        ...\r\n\r\n        c = new int[a.length];\r\n\r\n        int i = 0;\r\n        for(; i &lt; b.length; i++) {\r\n            c[i] = a[i] + b[i];\r\n        }\r\n        for(; i &lt; a.length; i++) {\r\n            c[i] = a[i];\r\n        }\r\n\r\n        return c;\r\n    }\r\n\r\nOr instead of the second loop:\r\n\r\n        System.arraycopy(a, i, c, i, a.length - i);\r\n\r\nI think either of those are more clear than the alternative, which would be to put an if statement inside the loop:\r\n\r\n        for(int i = 0; i &lt; c.length; i++) {\r\n            if(i &lt; b.length) {\r\n                c[i] = a[i] + b[i];\r\n            } else {\r\n                c[i] = a[i];\r\n            }\r\n        }\r\n\r\nDoing that is also another branch which will technically be a little slower.","title":"How to add two different sized arrays?","body":"<p>You've got a couple problems, namely:</p>\n\n<ul>\n<li>Your lengths are mixed up so you'll get an exception. You should do the addition for the smaller array's length, then copy the rest of the larger array. (Assuming that is the desired behavior.)</li>\n<li>In the first example, you have your return statements inside your loops. Move them to outside.</li>\n</ul>\n\n<p>If it were me, what I would do is assume one was the longer array and swap the references if it's not. This way you only have to write one loop.</p>\n\n<pre><code>static int[] sum(int[] a, int[] b) {\n    int[] c;\n\n    if(b.length &gt; a.length) {\n        c = a;\n        a = b;\n        b = c;\n    }\n\n    c = Arrays.copyOf(a, a.length);\n\n    for(int i = 0; i &lt; b.length; i++) {\n        c[i] += b[i];\n    }\n\n    return c;\n}\n</code></pre>\n\n<p>Instead of <code>copyOf</code>, the other way you could do it is something like this:</p>\n\n<pre><code>    ...\n\n    c = new int[a.length];\n\n    int i = 0;\n    for(; i &lt; b.length; i++) {\n        c[i] = a[i] + b[i];\n    }\n    for(; i &lt; a.length; i++) {\n        c[i] = a[i];\n    }\n\n    return c;\n}\n</code></pre>\n\n<p>Or instead of the second loop:</p>\n\n<pre><code>    System.arraycopy(a, i, c, i, a.length - i);\n</code></pre>\n\n<p>I think either of those are more clear than the alternative, which would be to put an if statement inside the loop:</p>\n\n<pre><code>    for(int i = 0; i &lt; c.length; i++) {\n        if(i &lt; b.length) {\n            c[i] = a[i] + b[i];\n        } else {\n            c[i] = a[i];\n        }\n    }\n</code></pre>\n\n<p>Doing that is also another branch which will technically be a little slower.</p>\n"},{"tags":[],"owner":{"account_id":44455,"reputation":3383,"user_id":130529,"accept_rate":99,"display_name":"Harish"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522027603,"creation_date":1522027603,"answer_id":49482738,"question_id":21691963,"body_markdown":"Here is a testdriven approach to solve the problem.Build your boundary cases and start writing the code.You should be able to solve this problem.\r\n\r\n    package loopfusion;\r\n\r\nimport java.util.Arrays;\r\n\r\npublic class AddArray {\r\n\r\n    public static void main(String[] args) {\r\n        //second array is bigger\r\n        int[] array1 = {1, 3, 4, 5, 7};\r\n        int[] array2 = {4, 45, 54, 65, 34, 45, 234, 56};\r\n        int[] resultArr = add(array1, array2);\r\n        for (int i = 0; i &lt; resultArr.length; i++) {\r\n            System.out.println(resultArr[i]);\r\n        }\r\n        //first array is bigger\r\n        int[] array3 = {4, 45, 54, 65, 34, 45, 234, 56};\r\n        int[] array4 = {1, 3, 4, 5, 7};\r\n        resultArr = add(array3, array4);\r\n        for (int i = 0; i &lt; resultArr.length; i++) {\r\n            System.out.println(resultArr[i]);\r\n        }\r\n\r\n        //first array is empty\r\n        int[] array5 = {};\r\n        int[] array6 = {1, 3, 4, 5, 7};\r\n        resultArr = add(array5, array6);\r\n        for (int i = 0; i &lt; resultArr.length; i++) {\r\n            System.out.println(resultArr[i]);\r\n        }\r\n\r\n        //Second array is empty\r\n        int[] array7 = {1, 3, 4, 5, 7};\r\n        int[] array8 = {};\r\n        resultArr = add(array7, array8);\r\n        for (int i = 0; i &lt; resultArr.length; i++) {\r\n            System.out.println(resultArr[i]);\r\n        }\r\n\r\n        //Both arrays are empty\r\n        int[] array9 = {};\r\n        int[] array10 = {};\r\n        resultArr = add(array9, array10);\r\n        for (int i = 0; i &lt; resultArr.length; i++) {\r\n            System.out.println(resultArr[i]);\r\n        }\r\n\r\n        //Both arrays are of equal length\r\n        int[] array11 = {1, 3, 4, 5, 7};\r\n        int[] array12 = {1, 3, 4, 5, 7};\r\n        resultArr = add(array11, array12);\r\n        for (int i = 0; i &lt; resultArr.length; i++) {\r\n            System.out.println(resultArr[i]);\r\n        }\r\n\r\n    }\r\n\r\n    public static int[] add(int[] arr1, int[] arr2) {\r\n        int arrLength1 = arr1.length;\r\n        int arrLength2 = arr2.length;\r\n        int[] resultArr;\r\n        int smallerLength = 0;\r\n        if (arrLength1 &gt; arrLength2) {\r\n            resultArr = Arrays.copyOf(arr1, arrLength1);\r\n            smallerLength = arrLength2;\r\n        } else {\r\n            resultArr = Arrays.copyOf(arr2, arrLength2);\r\n            smallerLength = arrLength1;\r\n        }\r\n        for (int i = 0; i &lt; smallerLength; i++) {\r\n            resultArr[i] = arr1[i] + arr2[i];\r\n\r\n        }\r\n\r\n        return resultArr;\r\n    }\r\n}\r\n\r\n","title":"How to add two different sized arrays?","body":"<p>Here is a testdriven approach to solve the problem.Build your boundary cases and start writing the code.You should be able to solve this problem.</p>\n\n<pre><code>package loopfusion;\n</code></pre>\n\n<p>import java.util.Arrays;</p>\n\n<p>public class AddArray {</p>\n\n<pre><code>public static void main(String[] args) {\n    //second array is bigger\n    int[] array1 = {1, 3, 4, 5, 7};\n    int[] array2 = {4, 45, 54, 65, 34, 45, 234, 56};\n    int[] resultArr = add(array1, array2);\n    for (int i = 0; i &lt; resultArr.length; i++) {\n        System.out.println(resultArr[i]);\n    }\n    //first array is bigger\n    int[] array3 = {4, 45, 54, 65, 34, 45, 234, 56};\n    int[] array4 = {1, 3, 4, 5, 7};\n    resultArr = add(array3, array4);\n    for (int i = 0; i &lt; resultArr.length; i++) {\n        System.out.println(resultArr[i]);\n    }\n\n    //first array is empty\n    int[] array5 = {};\n    int[] array6 = {1, 3, 4, 5, 7};\n    resultArr = add(array5, array6);\n    for (int i = 0; i &lt; resultArr.length; i++) {\n        System.out.println(resultArr[i]);\n    }\n\n    //Second array is empty\n    int[] array7 = {1, 3, 4, 5, 7};\n    int[] array8 = {};\n    resultArr = add(array7, array8);\n    for (int i = 0; i &lt; resultArr.length; i++) {\n        System.out.println(resultArr[i]);\n    }\n\n    //Both arrays are empty\n    int[] array9 = {};\n    int[] array10 = {};\n    resultArr = add(array9, array10);\n    for (int i = 0; i &lt; resultArr.length; i++) {\n        System.out.println(resultArr[i]);\n    }\n\n    //Both arrays are of equal length\n    int[] array11 = {1, 3, 4, 5, 7};\n    int[] array12 = {1, 3, 4, 5, 7};\n    resultArr = add(array11, array12);\n    for (int i = 0; i &lt; resultArr.length; i++) {\n        System.out.println(resultArr[i]);\n    }\n\n}\n\npublic static int[] add(int[] arr1, int[] arr2) {\n    int arrLength1 = arr1.length;\n    int arrLength2 = arr2.length;\n    int[] resultArr;\n    int smallerLength = 0;\n    if (arrLength1 &gt; arrLength2) {\n        resultArr = Arrays.copyOf(arr1, arrLength1);\n        smallerLength = arrLength2;\n    } else {\n        resultArr = Arrays.copyOf(arr2, arrLength2);\n        smallerLength = arrLength1;\n    }\n    for (int i = 0; i &lt; smallerLength; i++) {\n        resultArr[i] = arr1[i] + arr2[i];\n\n    }\n\n    return resultArr;\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":13997589,"reputation":29,"user_id":10110016,"display_name":"srihari krishna"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1532079872,"creation_date":1532078737,"answer_id":51439353,"question_id":21691963,"body_markdown":"    int[] vector1={1,2,3,4};\r\n    int[] vector2={1,2,3};\r\n    int result[]=new int[(int)Math.max(vector1.length,vector2.length)];\r\n    for(int i=0;i&lt;result.length; i++) {\r\n        if(vector1.length&gt;i &amp;&amp; vector2.length&gt;i) \r\n            result[i]=vector1[i] + vector2[i];\r\n\r\n        else if(vector1.length&lt;vector2.length)\r\n            result[i]+=vector2[i];\r\n\r\n        else if(vector2.length&lt;vector1.length) \r\n            result[i]+=vector1[i];\r\n\r\n        System.out.print(result[i]+&quot;    &quot;);\r\n    }\r\n\r\nHere, first arraysize of the result is first predicted by comparing the sizes of two input arrays and setting the maximum size from comparison of two.\r\n\r\nNext, the input array which is larger than the other is just added to the result array by comparing the sizes of the input arrays inside the for loop. \r\n\r\nResult:\r\n\r\n    2    4    6    4","title":"How to add two different sized arrays?","body":"<pre><code>int[] vector1={1,2,3,4};\nint[] vector2={1,2,3};\nint result[]=new int[(int)Math.max(vector1.length,vector2.length)];\nfor(int i=0;i&lt;result.length; i++) {\n    if(vector1.length&gt;i &amp;&amp; vector2.length&gt;i) \n        result[i]=vector1[i] + vector2[i];\n\n    else if(vector1.length&lt;vector2.length)\n        result[i]+=vector2[i];\n\n    else if(vector2.length&lt;vector1.length) \n        result[i]+=vector1[i];\n\n    System.out.print(result[i]+\"    \");\n}\n</code></pre>\n\n<p>Here, first arraysize of the result is first predicted by comparing the sizes of two input arrays and setting the maximum size from comparison of two.</p>\n\n<p>Next, the input array which is larger than the other is just added to the result array by comparing the sizes of the input arrays inside the for loop. </p>\n\n<p>Result:</p>\n\n<pre><code>2    4    6    4\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23577514,"reputation":1,"user_id":17616996,"display_name":"Pulkit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638896112,"creation_date":1638896112,"answer_id":70264021,"question_id":21691963,"body_markdown":"     public static int[] applyOn2Array(IntBinaryOperator operator, int[] b, int a[]) {\r\n         int maxLength = b.length &gt; a.length? b.length:a.length;       \r\n         int res[] = null;\r\n         try {\r\n             res = IntStream.range(0, maxLength)\r\n             .map(index -&gt; operator.applyAsInt(a.length &gt; index?a[index]:0,b.length &gt; index? b[index]:0))\r\n             .toArray();\r\n         }catch(ArrayIndexOutOfBoundsException e) {\r\n             System.out.println(&quot;Error:&quot;+e.getMessage());\r\n         }\r\n         return res;\r\n     }","title":"How to add two different sized arrays?","body":"<pre><code> public static int[] applyOn2Array(IntBinaryOperator operator, int[] b, int a[]) {\n     int maxLength = b.length &gt; a.length? b.length:a.length;       \n     int res[] = null;\n     try {\n         res = IntStream.range(0, maxLength)\n         .map(index -&gt; operator.applyAsInt(a.length &gt; index?a[index]:0,b.length &gt; index? b[index]:0))\n         .toArray();\n     }catch(ArrayIndexOutOfBoundsException e) {\n         System.out.println(&quot;Error:&quot;+e.getMessage());\n     }\n     return res;\n }\n</code></pre>\n"}],"owner":{"account_id":3975883,"reputation":93,"user_id":3279087,"accept_rate":70,"display_name":"dsdouglous"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14591,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":21692078,"answer_count":7,"score":0,"last_activity_date":1638896112,"creation_date":1392086280,"question_id":21691963,"body_markdown":"If I have an array `int[] a = new int[]{1, 2, 3};` and another `int[] b = new int[]{3, 2};` and I want to add the two together, I would do:\r\n    \r\n    if (a.length &gt;= b.length){\r\n        int[] c = new int[a.length];\r\n        \r\n        for(int i=0; i&lt;c.length; i++){\r\n            c[i] = a[i] + b[i];\r\n            return c;\r\n        }\r\n    }\r\n    else{\r\n        int[]c = new int[b.length];\r\n        \r\n        for(int i=0; i&lt;c.length; i++){\r\n            c[i] = a[i] + b[i];\r\n            return c;\r\n        }\r\n\r\nBut when I print c, I get {4, 4} and the 3 on the end is left out, where am I going wrong?\r\n\r\nThanks in advance for any help!\r\n\r\n\r\n    public Poly add(Poly a){\r\n\t\t\r\n\t\tif (coefficients.length &lt;= a.coefficients.length){\r\n\t\t\tint[] c = new int[coefficients.length]; \r\n\t\t\t\r\n\t\t\tfor (int i=0; i&lt;added.length; i++){\r\n\t\t\t\tc[i] = a.coefficients[i] + coefficients[i];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tPoly total = new Poly(c);\r\n\t\t\treturn total;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tint[] added = new int[a.coefficients.length];\r\n\t\t\t\r\n\t\t\tfor (int i=0; i&lt;added.length; i++){\r\n\t\t\t\tadded[i] = a.coefficients[i] + coefficients[i];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tPoly total = new Poly(c);\r\n\t\t\treturn total;\r\n\t\t}\t\t\r\n\t}\r\n\r\nand Poly is a constructor that takes an int array as an argument (`Poly ex = new Poly(new int[]{1, 2, 3})`)","title":"How to add two different sized arrays?","body":"<p>If I have an array <code>int[] a = new int[]{1, 2, 3};</code> and another <code>int[] b = new int[]{3, 2};</code> and I want to add the two together, I would do:</p>\n\n<pre><code>if (a.length &gt;= b.length){\n    int[] c = new int[a.length];\n\n    for(int i=0; i&lt;c.length; i++){\n        c[i] = a[i] + b[i];\n        return c;\n    }\n}\nelse{\n    int[]c = new int[b.length];\n\n    for(int i=0; i&lt;c.length; i++){\n        c[i] = a[i] + b[i];\n        return c;\n    }\n</code></pre>\n\n<p>But when I print c, I get {4, 4} and the 3 on the end is left out, where am I going wrong?</p>\n\n<p>Thanks in advance for any help!</p>\n\n<pre><code>public Poly add(Poly a){\n\n    if (coefficients.length &lt;= a.coefficients.length){\n        int[] c = new int[coefficients.length]; \n\n        for (int i=0; i&lt;added.length; i++){\n            c[i] = a.coefficients[i] + coefficients[i];\n        }\n\n        Poly total = new Poly(c);\n        return total;\n    }\n    else{\n        int[] added = new int[a.coefficients.length];\n\n        for (int i=0; i&lt;added.length; i++){\n            added[i] = a.coefficients[i] + coefficients[i];\n        }\n\n        Poly total = new Poly(c);\n        return total;\n    }       \n}\n</code></pre>\n\n<p>and Poly is a constructor that takes an int array as an argument (<code>Poly ex = new Poly(new int[]{1, 2, 3})</code>)</p>\n"},{"tags":["java","currency"],"answers":[{"tags":[],"owner":{"account_id":66967,"reputation":500,"user_id":196207,"display_name":"Sankozi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638896101,"creation_date":1638887287,"answer_id":70261936,"question_id":70260746,"body_markdown":"*ROL* is an obsolete currency code. *RON* is current. See Wikipedia: [*Romanian leu, History*][1].\r\n\r\nEither your client should update Java environment, or you should start using currency codes instead of numbers (which as you can see may change mapping).\r\n\r\n\r\n  [1]: https://en.m.wikipedia.org/wiki/Romanian_leu#History","title":"Romanian Currency ROL-RON Problem on Different Environments","body":"<p><em>ROL</em> is an obsolete currency code. <em>RON</em> is current. See Wikipedia: <a href=\"https://en.m.wikipedia.org/wiki/Romanian_leu#History\" rel=\"nofollow noreferrer\"><em>Romanian leu, History</em></a>.</p>\n<p>Either your client should update Java environment, or you should start using currency codes instead of numbers (which as you can see may change mapping).</p>\n"}],"owner":{"account_id":9171073,"reputation":732,"user_id":6818560,"accept_rate":12,"display_name":"İlkay Gunel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1638896101,"creation_date":1638882539,"question_id":70260746,"body_markdown":"I have a currency project with Java Spring Boot and according to some datas, I&#39;m writing the currency to the page. \r\n\r\nHere is my currency finding code:\r\n\r\n    String currencyCode = &quot;0946&quot;;\r\n    Optional&lt;Currency&gt; currency = Currency.getAvailableCurrencies().stream().filter(currency -&gt; currency.getNumericCode() == Integer.parseInt(currencyCode)).findAny();\r\n    String currencySymbol = currency.get().getSymbol(Locale.getDefault());\r\n\r\nI&#39;m using openjdk:8-alpine as Java Runtime Environment. When I run this code at my test environment, I can get the RON which is correct. \r\nBut my client who is in Romania, runs the application and gets ROL instead of RON.\r\n\r\nWhat can be the problem about getting ROL instead of RON? \r\n\r\n\r\n","title":"Romanian Currency ROL-RON Problem on Different Environments","body":"<p>I have a currency project with Java Spring Boot and according to some datas, I'm writing the currency to the page.</p>\n<p>Here is my currency finding code:</p>\n<pre><code>String currencyCode = &quot;0946&quot;;\nOptional&lt;Currency&gt; currency = Currency.getAvailableCurrencies().stream().filter(currency -&gt; currency.getNumericCode() == Integer.parseInt(currencyCode)).findAny();\nString currencySymbol = currency.get().getSymbol(Locale.getDefault());\n</code></pre>\n<p>I'm using openjdk:8-alpine as Java Runtime Environment. When I run this code at my test environment, I can get the RON which is correct.\nBut my client who is in Romania, runs the application and gets ROL instead of RON.</p>\n<p>What can be the problem about getting ROL instead of RON?</p>\n"},{"tags":["java","linux","jvm"],"comments":[{"owner":{"account_id":71985,"reputation":7903,"user_id":208013,"display_name":"Mirek Pluta"},"score":1,"creation_date":1638454037,"post_id":70200828,"comment_id":124096221,"body_markdown":"Just to be sure. It&#39;s not running inside of a docker container? (java older than 11 can&#39;t properly detect memory limits if run within a container)","body":"Just to be sure. It&#39;s not running inside of a docker container? (java older than 11 can&#39;t properly detect memory limits if run within a container)"}],"answers":[{"tags":[],"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1638743776,"creation_date":1638743776,"answer_id":70239163,"question_id":70200828,"body_markdown":"Your Jenkins environment has a strict limitation on the amount of virtual memory (-v) a process can use. Meanwhile, JVM tends to reserve a *huge* amount of virtual memory. Note: this is not the actual memory consumption, but just a reservation of the address space, which is practically unlimited on 64-bit systems, so JVM does not  even attempt to be modest in such reservation by default.\r\n\r\nJava process reserves virtual memory for Java Heap and for many other structures: Code Cache, Metaspace, Compressed Class Space, thread stacks etc. See [the related answer](https://stackoverflow.com/questions/53451103/java-using-much-more-memory-than-heap-size-or-size-correctly-docker-memory-limi/53624438#53624438) for details.\r\n\r\nYou haven&#39;t set any JVM options, so the JVM by default reserves\r\n - 1/4 RAM for the Heap;\r\n - 1 GB for the Compressed Class Space;\r\n - 240 MB for the Code Cache;\r\n - 1 MB per each thread stack, and so on.\r\n\r\nThe above answer also mentions JVM options for limiting those structures.\r\n\r\nHere is also an [interesting post](https://shipilev.net/jvm/anatomy-quarks/12-native-memory-tracking/) describing the experiment of reducing JVM memory usage.\r\n\r\nUsing [`jemalloc`](http://jemalloc.net/) in place of the standard libc allocator, or limiting the number of allocator arenas using [`MALLOC_ARENA_MAX`](https://man7.org/linux/man-pages/man3/mallopt.3.html), allows to reduce virtual memory consumption even further.\r\n\r\nFor example, with the following command line options, JVM reserves less than 500 MB of virtual memory:\r\n\r\n```\r\nMALLOC_ARENA_MAX=2 java -Xmx100m -XX:ReservedCodeCacheSize=64m -XX:-UseCompressedClassPointers -Xss256k &lt;args&gt;\r\n```\r\n\r\nHowever, if possible, I&#39;d suggest to set `ulimit -v unlimited` instead. As said above, virtual memory (unlike physical memory) is almost endless, so there is no much sense in limiting it.","title":"Error occurred during initialization of VM - Could not allocate metaspace","body":"<p>Your Jenkins environment has a strict limitation on the amount of virtual memory (-v) a process can use. Meanwhile, JVM tends to reserve a <em>huge</em> amount of virtual memory. Note: this is not the actual memory consumption, but just a reservation of the address space, which is practically unlimited on 64-bit systems, so JVM does not  even attempt to be modest in such reservation by default.</p>\n<p>Java process reserves virtual memory for Java Heap and for many other structures: Code Cache, Metaspace, Compressed Class Space, thread stacks etc. See <a href=\"https://stackoverflow.com/questions/53451103/java-using-much-more-memory-than-heap-size-or-size-correctly-docker-memory-limi/53624438#53624438\">the related answer</a> for details.</p>\n<p>You haven't set any JVM options, so the JVM by default reserves</p>\n<ul>\n<li>1/4 RAM for the Heap;</li>\n<li>1 GB for the Compressed Class Space;</li>\n<li>240 MB for the Code Cache;</li>\n<li>1 MB per each thread stack, and so on.</li>\n</ul>\n<p>The above answer also mentions JVM options for limiting those structures.</p>\n<p>Here is also an <a href=\"https://shipilev.net/jvm/anatomy-quarks/12-native-memory-tracking/\" rel=\"noreferrer\">interesting post</a> describing the experiment of reducing JVM memory usage.</p>\n<p>Using <a href=\"http://jemalloc.net/\" rel=\"noreferrer\"><code>jemalloc</code></a> in place of the standard libc allocator, or limiting the number of allocator arenas using <a href=\"https://man7.org/linux/man-pages/man3/mallopt.3.html\" rel=\"noreferrer\"><code>MALLOC_ARENA_MAX</code></a>, allows to reduce virtual memory consumption even further.</p>\n<p>For example, with the following command line options, JVM reserves less than 500 MB of virtual memory:</p>\n<pre><code>MALLOC_ARENA_MAX=2 java -Xmx100m -XX:ReservedCodeCacheSize=64m -XX:-UseCompressedClassPointers -Xss256k &lt;args&gt;\n</code></pre>\n<p>However, if possible, I'd suggest to set <code>ulimit -v unlimited</code> instead. As said above, virtual memory (unlike physical memory) is almost endless, so there is no much sense in limiting it.</p>\n"}],"owner":{"account_id":259035,"reputation":12666,"user_id":541624,"accept_rate":64,"display_name":"ericn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2672,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1638895574,"creation_date":1638453582,"question_id":70200828,"body_markdown":"The metaspace requires is ~1GB\r\n```\r\njenkins@android-build:~$ /var/lib/jenkins/tools/hudson.model.JDK/JDK_8u131/bin/java -version\r\nError occurred during initialization of VM\r\nCould not allocate metaspace: 1073741824 bytes\r\n```\r\n\r\nHere are the memory limits for user jenkins\r\n```\r\njenkins@android-build:~$ ulimit -a\r\ncore file size          (blocks, -c) 0\r\ndata seg size           (kbytes, -d) unlimited\r\nscheduling priority             (-e) 0\r\nfile size               (blocks, -f) unlimited\r\npending signals                 (-i) 381421\r\nmax locked memory       (kbytes, -l) 65536\r\nmax memory size         (kbytes, -m) 8000000\r\nopen files                      (-n) 65535\r\npipe size            (512 bytes, -p) 8\r\nPOSIX message queues     (bytes, -q) 819200\r\nreal-time priority              (-r) 0\r\nstack size              (kbytes, -s) 8192\r\ncpu time               (seconds, -t) unlimited\r\nmax user processes              (-u) 381421\r\nvirtual memory          (kbytes, -v) 4000000\r\nfile locks                      (-x) unlimited\r\n```\r\n\r\nTrying to replicate an OutOfMemoryError situation, hence limiting the memory with ulimit\r\n\r\nHow much more memory do I need in order to run Java programs?\r\n\r\nMy program is configured to use max 4GB of heap\r\n```\r\ndexOptions {\r\n        javaMaxHeapSize &quot;4g&quot;\r\n        preDexLibraries true\r\n    }\r\n```\r\nand 5GB Xmx\r\ngradle.properties\r\n```\r\norg.gradle.jvmargs=-Xmx5120M\r\n```","title":"Error occurred during initialization of VM - Could not allocate metaspace","body":"<p>The metaspace requires is ~1GB</p>\n<pre><code>jenkins@android-build:~$ /var/lib/jenkins/tools/hudson.model.JDK/JDK_8u131/bin/java -version\nError occurred during initialization of VM\nCould not allocate metaspace: 1073741824 bytes\n</code></pre>\n<p>Here are the memory limits for user jenkins</p>\n<pre><code>jenkins@android-build:~$ ulimit -a\ncore file size          (blocks, -c) 0\ndata seg size           (kbytes, -d) unlimited\nscheduling priority             (-e) 0\nfile size               (blocks, -f) unlimited\npending signals                 (-i) 381421\nmax locked memory       (kbytes, -l) 65536\nmax memory size         (kbytes, -m) 8000000\nopen files                      (-n) 65535\npipe size            (512 bytes, -p) 8\nPOSIX message queues     (bytes, -q) 819200\nreal-time priority              (-r) 0\nstack size              (kbytes, -s) 8192\ncpu time               (seconds, -t) unlimited\nmax user processes              (-u) 381421\nvirtual memory          (kbytes, -v) 4000000\nfile locks                      (-x) unlimited\n</code></pre>\n<p>Trying to replicate an OutOfMemoryError situation, hence limiting the memory with ulimit</p>\n<p>How much more memory do I need in order to run Java programs?</p>\n<p>My program is configured to use max 4GB of heap</p>\n<pre><code>dexOptions {\n        javaMaxHeapSize &quot;4g&quot;\n        preDexLibraries true\n    }\n</code></pre>\n<p>and 5GB Xmx\ngradle.properties</p>\n<pre><code>org.gradle.jvmargs=-Xmx5120M\n</code></pre>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":4518950,"reputation":2083,"user_id":4109326,"display_name":"Alexander Guyer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1423946582,"creation_date":1423946582,"answer_id":28520107,"question_id":28520031,"body_markdown":"This is a logical error. Examine your code:\r\n\r\nLet&#39;s say they input 5 as the row count.\r\n\r\nThe first for loop would then cycle through, starting with `m=1,` and then 3, and then 5. The nested for loop is also fine -- it simply draws a &#39;*&#39; an amount of times equal to the value of m.\r\n\r\nHowever, the input was 5, correct? The second for loop sets `i = rows,` so `i` will start out equal to 5. You already drew the longest row, being the one with 5 asterisks in it, in the first for loop. Now, since you are setting `i = 5,` you are drawing another row with 5 asterisks. What you want as your second for loop is this:\r\n\r\n`for(int i = rows - 2; i &gt; 0; i-=2){\r\n...`\r\n\r\nThis way the second for loop does not draw the longest row **again** as the first for loop already did.","title":"Java Half Diamond With Asterisk&#39;s (for loops)","body":"<p>This is a logical error. Examine your code:</p>\n\n<p>Let's say they input 5 as the row count.</p>\n\n<p>The first for loop would then cycle through, starting with <code>m=1,</code> and then 3, and then 5. The nested for loop is also fine -- it simply draws a '*' an amount of times equal to the value of m.</p>\n\n<p>However, the input was 5, correct? The second for loop sets <code>i = rows,</code> so <code>i</code> will start out equal to 5. You already drew the longest row, being the one with 5 asterisks in it, in the first for loop. Now, since you are setting <code>i = 5,</code> you are drawing another row with 5 asterisks. What you want as your second for loop is this:</p>\n\n<p><code>for(int i = rows - 2; i &gt; 0; i-=2){\n...</code></p>\n\n<p>This way the second for loop does not draw the longest row <strong>again</strong> as the first for loop already did.</p>\n"},{"tags":[],"owner":{"account_id":6661550,"reputation":1,"user_id":5140489,"display_name":"Jacob Galalastray"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1437503110,"creation_date":1437503110,"answer_id":31546836,"question_id":28520031,"body_markdown":"This should help a lot its the best answer/example you&#39;ll find...take a look at it. It has everything that is needed to make a half diamond pointing down.\r\n\r\n\r\n\r\n      for (int line = n - 1; line &gt;= 1; line--)\r\n      {\r\n          for (int spaces = n - line; spaces &gt;= 0; spaces--)\r\n              System.out.print(&quot; &quot;);\r\n          \r\n          for(int i = 1; i &lt; line + line; i++)\r\n              System.out.print(&quot;*&quot;);\r\n          \r\n          System.out.println();\r\n      }\r\n      \r\n      keyboard.close();\r\n  }\r\n}","title":"Java Half Diamond With Asterisk&#39;s (for loops)","body":"<p>This should help a lot its the best answer/example you'll find...take a look at it. It has everything that is needed to make a half diamond pointing down.</p>\n\n<pre><code>  for (int line = n - 1; line &gt;= 1; line--)\n  {\n      for (int spaces = n - line; spaces &gt;= 0; spaces--)\n          System.out.print(\" \");\n\n      for(int i = 1; i &lt; line + line; i++)\n          System.out.print(\"*\");\n\n      System.out.println();\n  }\n\n  keyboard.close();\n</code></pre>\n\n<p>}\n}</p>\n"},{"tags":[],"owner":{"account_id":11222692,"reputation":3,"user_id":8233348,"display_name":"Sanjay Aerla"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1498802210,"creation_date":1498758417,"answer_id":44831822,"question_id":28520031,"body_markdown":"This might help you.\r\n\r\n    for(int i = 0;i&lt;5;i++) {\r\n\t    for(int j= 0;j&lt;i;j++) {\r\n\t\t\tSystem.out.print(&quot;*&quot;);\r\n\t\t}\r\n\t\tSystem.out.println(&quot;&quot;);\r\n\t}\r\n\t\t\r\n\tfor(int i = 5;i&gt;0;i--) {\r\n\t\tfor(int j=0;j&lt;i;j++) {\r\n\t\t\tSystem.out.print(&quot;*&quot;);\r\n\t\t}\r\n\t\tSystem.out.println(&quot;&quot;);\r\n\t}","title":"Java Half Diamond With Asterisk&#39;s (for loops)","body":"<p>This might help you.</p>\n\n<pre><code>for(int i = 0;i&lt;5;i++) {\n    for(int j= 0;j&lt;i;j++) {\n        System.out.print(\"*\");\n    }\n    System.out.println(\"\");\n}\n\nfor(int i = 5;i&gt;0;i--) {\n    for(int j=0;j&lt;i;j++) {\n        System.out.print(\"*\");\n    }\n    System.out.println(\"\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10494532,"reputation":1352,"user_id":7735255,"display_name":"Parvathirajan Natarajan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522923082,"creation_date":1522923082,"answer_id":49669748,"question_id":28520031,"body_markdown":"This might be helpful\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class HalfDiamond\r\n    {\r\n    \tpublic static void main(String[] args) \r\n    \t{\r\n    \t\tint n;\r\n    \t\tScanner obj=new Scanner(System.in);\r\n    \t\tSystem.out.print(&quot;Enter the number of Rows:&quot;);\r\n    \t\tn=obj.nextInt();\r\n    \t\tfor(int i=1;i&lt;=n;i=i+2)\r\n    \t\t{\r\n    \t\t\tfor(int j=1;j&lt;=i;j++)\r\n    \t\t\t{\r\n    \t\t\t\tif(i%2==1)\r\n    \t\t\t\t\tSystem.out.print(&quot;*&quot;);\r\n    \t\t\t}\r\n    \t\t\tSystem.out.println();\r\n    \t\t}\r\n    \t\tfor(int i=n-2;i&gt;=1;i=i-2)\r\n    \t\t{\r\n    \t\t\tfor(int j=1;j&lt;=i;j++)\r\n    \t\t\t{\r\n    \t\t\t\tif(i%2==1)\r\n    \t\t\t\t\tSystem.out.print(&quot;*&quot;);\r\n    \t\t\t}\r\n    \t\t\tSystem.out.println();\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n","title":"Java Half Diamond With Asterisk&#39;s (for loops)","body":"<p>This might be helpful</p>\n\n<pre><code>import java.util.Scanner;\n\npublic class HalfDiamond\n{\n    public static void main(String[] args) \n    {\n        int n;\n        Scanner obj=new Scanner(System.in);\n        System.out.print(\"Enter the number of Rows:\");\n        n=obj.nextInt();\n        for(int i=1;i&lt;=n;i=i+2)\n        {\n            for(int j=1;j&lt;=i;j++)\n            {\n                if(i%2==1)\n                    System.out.print(\"*\");\n            }\n            System.out.println();\n        }\n        for(int i=n-2;i&gt;=1;i=i-2)\n        {\n            for(int j=1;j&lt;=i;j++)\n            {\n                if(i%2==1)\n                    System.out.print(\"*\");\n            }\n            System.out.println();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21574009,"reputation":1,"user_id":15906463,"display_name":"Durvesh Patil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638860306,"creation_date":1638855051,"answer_id":70255351,"question_id":28520031,"body_markdown":"Try this code\r\n\r\n    import java.util.Scanner;\r\n    public class Solution {\r\n        \r\n        public static void main(String[] args) {\r\n            // Write your code here\r\n            \r\n            Scanner scn = new Scanner(System.in);\r\n            \r\n            int n = scn.nextInt();\r\n            \r\n            System.out.println(&quot;*&quot;);\r\n            \r\n            for(int i=1;i&lt;=n;i++)\r\n            {\r\n                System.out.print(&quot;*&quot;);\r\n                \r\n                for(int j=1;j&lt;=i;j++)\r\n                    System.out.print(j);\r\n                \r\n                for(int j=i-1;j&gt;=1;j--)\r\n                    System.out.print(j);\r\n                \r\n                \r\n                System.out.println(&quot;*&quot;);\r\n            }\r\n            \r\n            for(int i=n-1;i&gt;=1;i--)\r\n            {\r\n                System.out.print(&quot;*&quot;);\r\n                for(int j=1;j&lt;=i;j++)\r\n                    System.out.print(j);\r\n                for(int j=i-1;j&gt;=1;j--)\r\n                    System.out.print(j);\r\n                System.out.println(&quot;*&quot;);\r\n            }\r\n            System.out.println(&quot;*&quot;);    \r\n        }\r\n    }","title":"Java Half Diamond With Asterisk&#39;s (for loops)","body":"<p>Try this code</p>\n<pre><code>import java.util.Scanner;\npublic class Solution {\n    \n    public static void main(String[] args) {\n        // Write your code here\n        \n        Scanner scn = new Scanner(System.in);\n        \n        int n = scn.nextInt();\n        \n        System.out.println(&quot;*&quot;);\n        \n        for(int i=1;i&lt;=n;i++)\n        {\n            System.out.print(&quot;*&quot;);\n            \n            for(int j=1;j&lt;=i;j++)\n                System.out.print(j);\n            \n            for(int j=i-1;j&gt;=1;j--)\n                System.out.print(j);\n            \n            \n            System.out.println(&quot;*&quot;);\n        }\n        \n        for(int i=n-1;i&gt;=1;i--)\n        {\n            System.out.print(&quot;*&quot;);\n            for(int j=1;j&lt;=i;j++)\n                System.out.print(j);\n            for(int j=i-1;j&gt;=1;j--)\n                System.out.print(j);\n            System.out.println(&quot;*&quot;);\n        }\n        System.out.println(&quot;*&quot;);    \n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2989870,"reputation":391,"user_id":2537652,"accept_rate":50,"display_name":"Christian Bartram"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5324,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":28520107,"answer_count":5,"score":-2,"last_activity_date":1638895560,"creation_date":1423946128,"question_id":28520031,"body_markdown":"Hey im having trouble with my nested for loops in drawing a half diamond in java \r\nI need to take a user input and make a half diamond with the amount of lines a user specified here is my code\r\n\r\n    \r\n    public static void diamond(int rows) {\r\n          int m, n;\r\n        for (m = 1; m &lt;= rows; m += 2)\r\n        {\r\n            for (n = 1; n &lt;= m; n++)\r\n            {\r\n\r\n                System.out.print(&quot;*&quot;);\r\n            }\r\n            System.out.println();\r\n        }\r\n      for (int i = rows; i &gt; 0; i -= 2) {\r\n\r\n            for (int j = 0; j &lt; i; j++) {\r\n\r\n                System.out.print(&quot;*&quot;);\r\n            }\r\n            System.out.println(&quot;&quot;);\r\n        }\r\n    }\r\n\r\nheres an image of the expected vs actual output \r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/Qhtiq.png","title":"Java Half Diamond With Asterisk&#39;s (for loops)","body":"<p>Hey im having trouble with my nested for loops in drawing a half diamond in java \nI need to take a user input and make a half diamond with the amount of lines a user specified here is my code</p>\n\n<pre><code>public static void diamond(int rows) {\n      int m, n;\n    for (m = 1; m &lt;= rows; m += 2)\n    {\n        for (n = 1; n &lt;= m; n++)\n        {\n\n            System.out.print(\"*\");\n        }\n        System.out.println();\n    }\n  for (int i = rows; i &gt; 0; i -= 2) {\n\n        for (int j = 0; j &lt; i; j++) {\n\n            System.out.print(\"*\");\n        }\n        System.out.println(\"\");\n    }\n}\n</code></pre>\n\n<p>heres an image of the expected vs actual output </p>\n\n<p><img src=\"https://i.stack.imgur.com/Qhtiq.png\" alt=\"enter image description here\"></p>\n"},{"tags":["java","android","android-studio","android-appcompat","androidx"],"comments":[{"owner":{"account_id":1849514,"reputation":193868,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":0,"creation_date":1638896946,"post_id":70263882,"comment_id":124207557,"body_markdown":"That&#39;s not a public class that any library should be implementing.","body":"That&#39;s not a public class that any library should be implementing."}],"owner":{"account_id":23560996,"reputation":68,"user_id":17602360,"display_name":"SibMo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":508,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1638895425,"creation_date":1638895425,"question_id":70263882,"body_markdown":"I&#39;m currently updating the codebase for a project that I found on [Github](https://github.com/arimorty/floatingsearchview/tree/a0f8fbc90d98eb1b629c6295dd2d3577412e7b1e) that uses a handy search feature.\r\n\r\nI&#39;ve updated most of the codebase however I keep getting issues similar to the post title, I have suppressed lint a number of times using the following code:\r\n\r\n        //noinspection RestrictedApi\r\n\r\nIt seems to work at suppressing code inside my methods however there&#39;s a piece of code where I must implement a MenuPresenter interface which can be found in the following library:\r\n\r\n    import androidx.appcompat.view.menu.MenuPresenter;\r\n\r\nThe implementation:\r\n\r\n    public class MenuPopupHelper implements AdapterView.OnItemClickListener, View.OnKeyListener,\r\n        ViewTreeObserver.OnGlobalLayoutListener, PopupWindow.OnDismissListener,\r\n         MenuPresenter {}\r\n\r\n\r\nThere doesn&#39;t seem to be any android documentation on androidx.appcompat.view.menu.MenuPresenter. Any ideas on how I can work around this issue?\r\n","title":"MenuPresenter can only be accessed from within the same library group prefix (referenced groupId=androidx.appcompat with prefix androidx from groupId","body":"<p>I'm currently updating the codebase for a project that I found on <a href=\"https://github.com/arimorty/floatingsearchview/tree/a0f8fbc90d98eb1b629c6295dd2d3577412e7b1e\" rel=\"nofollow noreferrer\">Github</a> that uses a handy search feature.</p>\n<p>I've updated most of the codebase however I keep getting issues similar to the post title, I have suppressed lint a number of times using the following code:</p>\n<pre><code>    //noinspection RestrictedApi\n</code></pre>\n<p>It seems to work at suppressing code inside my methods however there's a piece of code where I must implement a MenuPresenter interface which can be found in the following library:</p>\n<pre><code>import androidx.appcompat.view.menu.MenuPresenter;\n</code></pre>\n<p>The implementation:</p>\n<pre><code>public class MenuPopupHelper implements AdapterView.OnItemClickListener, View.OnKeyListener,\n    ViewTreeObserver.OnGlobalLayoutListener, PopupWindow.OnDismissListener,\n     MenuPresenter {}\n</code></pre>\n<p>There doesn't seem to be any android documentation on androidx.appcompat.view.menu.MenuPresenter. Any ideas on how I can work around this issue?</p>\n"},{"tags":["java","arrays","string","stack","rpn"],"owner":{"account_id":23113844,"reputation":11,"user_id":17221418,"display_name":"Michael Calle"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1638895395,"creation_date":1638826012,"question_id":70252174,"body_markdown":"I&#39;m trying to make a program that processes a line of rpn expression through a stack method. The input is a string array that is converted from a string input. \r\n\r\n    String[] collect = &quot;8 6 + 2 /&quot;; //the\r\n    String line; //the inputed line\r\n    collect = line.split(&quot; &quot;); //the conversion\r\n    System.out.println(stackem(collect)); // calling the stack method for an output method\r\n\r\nThe problem is that the output is always the operator ate the end of the line, so when I put in the code that checks for malformed expressions it always turns into the error. Basically my input would be like this:&lt;br/&gt;\r\ninput: 8 6 + 2 / &lt;br/&gt;\r\noutput: Error: &quot;Expression is malformed&quot; &lt;br/&gt;\r\noutput (without the error code): / &lt;br/&gt;\r\noutput (what&#39;s supposed to be the output): 7 &lt;br/&gt;\r\n\r\nThis is the code for the stack method:\r\n\r\n    public String stackem(String[] input)\r\n    {\r\n    Stack&lt;String&gt; stack = new Stack&lt;String&gt;();\r\n    int x, y;\r\n    String result = &quot;&quot;;\r\n    int get = 0;\r\n    String choice;\r\n    int value = 0;\r\n    String p = &quot;&quot;;\r\n    int output;\r\n\r\n    try\r\n    {\r\n    for (int i = 0; i &lt; input.length; i++) \r\n    {\r\n    if (input[i] == &quot;+&quot; || input[i] == &quot;-&quot; || input[i] == &quot;*&quot; || input[i] == &quot;/&quot; || input[i] == &quot;^&quot;) \r\n    {\r\n    choice = input[i];\r\n    }\r\n    else \r\n    {\r\n    stack.push(input[i]);\r\n    continue;\r\n    }\r\n\r\n    switch (choice) \r\n    {\r\n    case &quot;+&quot;:\r\n    x = Integer.parseInt(stack.pop());\r\n    y = Integer.parseInt(stack.pop());\r\n    value = x + y;\r\n    result = p + value;\r\n    stack.push(result);\r\n    break;\r\n \r\n    case &quot;-&quot;:\r\n    x = Integer.parseInt(stack.pop());\r\n    y = Integer.parseInt(stack.pop());\r\n    value = y - x;\r\n    result = p + value;\r\n    stack.push(result);\r\n    break;\r\n \r\n    case &quot;*&quot;:\r\n    x = Integer.parseInt(stack.pop());\r\n    y = Integer.parseInt(stack.pop());\r\n    value = x * y;\r\n    result = p + value;\r\n    stack.push(result);\r\n    break;\r\n \r\n    case &quot;/&quot;:\r\n    x = Integer.parseInt(stack.pop());\r\n    y = Integer.parseInt(stack.pop());\r\n    value = y / x;\r\n    result = p + value;\r\n    stack.push(result);\r\n    break;\r\n\r\n    case &quot;^&quot;:\r\n    x = Integer.parseInt(stack.pop());\r\n    y = Integer.parseInt(stack.pop());\r\n    value = (int)Math.pow(y,x);\r\n    result = p + value;\r\n    stack.push(result);\r\n    break;\r\n \r\n    default:\r\n    continue;\r\n    }\r\n    }\r\n\r\n    output = Integer.parseInt(stack.pop());\r\n    }\r\n    catch (Exception ex)\r\n    {\r\n    return &quot;Error: Expression is malformed&quot;;\r\n    }\r\n    return &quot;Result: &quot; + output;\r\n    }\r\n\r\nIs there any way to fix this issue?","title":"RPN stacking method not working with converted string arrays","body":"<p>I'm trying to make a program that processes a line of rpn expression through a stack method. The input is a string array that is converted from a string input.</p>\n<pre><code>String[] collect = &quot;8 6 + 2 /&quot;; //the\nString line; //the inputed line\ncollect = line.split(&quot; &quot;); //the conversion\nSystem.out.println(stackem(collect)); // calling the stack method for an output method\n</code></pre>\n<p>The problem is that the output is always the operator ate the end of the line, so when I put in the code that checks for malformed expressions it always turns into the error. Basically my input would be like this:<br/>\ninput: 8 6 + 2 / <br/>\noutput: Error: &quot;Expression is malformed&quot; <br/>\noutput (without the error code): / <br/>\noutput (what's supposed to be the output): 7 <br/></p>\n<p>This is the code for the stack method:</p>\n<pre><code>public String stackem(String[] input)\n{\nStack&lt;String&gt; stack = new Stack&lt;String&gt;();\nint x, y;\nString result = &quot;&quot;;\nint get = 0;\nString choice;\nint value = 0;\nString p = &quot;&quot;;\nint output;\n\ntry\n{\nfor (int i = 0; i &lt; input.length; i++) \n{\nif (input[i] == &quot;+&quot; || input[i] == &quot;-&quot; || input[i] == &quot;*&quot; || input[i] == &quot;/&quot; || input[i] == &quot;^&quot;) \n{\nchoice = input[i];\n}\nelse \n{\nstack.push(input[i]);\ncontinue;\n}\n\nswitch (choice) \n{\ncase &quot;+&quot;:\nx = Integer.parseInt(stack.pop());\ny = Integer.parseInt(stack.pop());\nvalue = x + y;\nresult = p + value;\nstack.push(result);\nbreak;\n\ncase &quot;-&quot;:\nx = Integer.parseInt(stack.pop());\ny = Integer.parseInt(stack.pop());\nvalue = y - x;\nresult = p + value;\nstack.push(result);\nbreak;\n\ncase &quot;*&quot;:\nx = Integer.parseInt(stack.pop());\ny = Integer.parseInt(stack.pop());\nvalue = x * y;\nresult = p + value;\nstack.push(result);\nbreak;\n\ncase &quot;/&quot;:\nx = Integer.parseInt(stack.pop());\ny = Integer.parseInt(stack.pop());\nvalue = y / x;\nresult = p + value;\nstack.push(result);\nbreak;\n\ncase &quot;^&quot;:\nx = Integer.parseInt(stack.pop());\ny = Integer.parseInt(stack.pop());\nvalue = (int)Math.pow(y,x);\nresult = p + value;\nstack.push(result);\nbreak;\n\ndefault:\ncontinue;\n}\n}\n\noutput = Integer.parseInt(stack.pop());\n}\ncatch (Exception ex)\n{\nreturn &quot;Error: Expression is malformed&quot;;\n}\nreturn &quot;Result: &quot; + output;\n}\n</code></pre>\n<p>Is there any way to fix this issue?</p>\n"},{"tags":["java","intellij-idea","memory-leaks","out-of-memory","serversocket"],"comments":[{"owner":{"account_id":22914258,"reputation":39,"user_id":17051099,"display_name":"neldierto"},"score":0,"creation_date":1638895514,"post_id":70263871,"comment_id":124207003,"body_markdown":"this is what the error message looks like:\n```\nException in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\n\tat abgabe6.TCPEmpfang.acceptConnection(TCPEmpfang.java:40)\n\tat abgabe6.TCPEmpfang.startTCPEmpfang(TCPEmpfang.java:23)\n\tat abgabe6.TCPEmpfang.main(TCPEmpfang.java:16)\n```","body":"this is what the error message looks like: ``` Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space \tat abgabe6.TCPEmpfang.acceptConnection(TCPEmpfang.java:40) \tat abgabe6.TCPEmpfang.startTCPEmpfang(TCPEmpfang.java:23) \tat abgabe6.TCPEmpfang.main(TCPEmpfang.java:16) ```"},{"owner":{"display_name":"user2711811"},"score":0,"creation_date":1638895844,"post_id":70263871,"comment_id":124207125,"body_markdown":"What is an expected value for `dataSize` - try allocating `data` before entering loop (to some reasonable length) and if `dataSize` is bigger than current length of `data` then grow `data` by 2x for example.  But the point is do not reallocate every iteration and re-use current allocation.","body":"What is an expected value for <code>dataSize</code> - try allocating <code>data</code> before entering loop (to some reasonable length) and if <code>dataSize</code> is bigger than current length of <code>data</code> then grow <code>data</code> by 2x for example.  But the point is do not reallocate every iteration and re-use current allocation."},{"owner":{"account_id":22914258,"reputation":39,"user_id":17051099,"display_name":"neldierto"},"score":0,"creation_date":1638897954,"post_id":70263871,"comment_id":124207913,"body_markdown":"thx Andy, according to your hint I looked into `dataSize` and its value was 1633771873 so that probably causes the exception.","body":"thx Andy, according to your hint I looked into <code>dataSize</code> and its value was 1633771873 so that probably causes the exception."}],"owner":{"account_id":22914258,"reputation":39,"user_id":17051099,"display_name":"neldierto"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":154,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1638895387,"creation_date":1638895387,"question_id":70263871,"body_markdown":"in my java program i get `Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space` when i try to run it.\r\n\r\nThe program uses ServerSocket and Socket to receive packets from a client program, which uses Socket too. I previously was using treads for the server but now the program contains only main and a receiver function.\r\n\r\nhere is the source code:\r\n```Java\r\npublic class TCPEmpfang {\r\n\r\n    private static final int TIMEOUT = 1000;\r\n\r\n    public static void main(String[] args) {\r\n        new TCPEmpfang().startTCPEmpfang();\r\n    }\r\n\r\n    private void startTCPEmpfang() {\r\n        try (ServerSocket serverSocket = new ServerSocket(4712)) {\r\n            System.out.println(&quot;Waiting for clients...&quot;);\r\n            while (true) {\r\n                    acceptConnection(serverSocket);\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private void acceptConnection(ServerSocket servSocket) {\r\n        final long timeStart = System.currentTimeMillis();\r\n        int sum = 0;\r\n        try (Socket s = servSocket.accept()) {\r\n            System.out.println(&quot;NEU&quot;);\r\n            s.setSoTimeout(TIMEOUT);\r\n            try (InputStream input = s.getInputStream();\r\n                 DataInputStream dis = new DataInputStream(input)) {\r\n                while (true) {\r\n                    int dataSize = dis.readInt();\r\n                    byte[] data = new byte[dataSize];\r\n                    dis.readFully(data);\r\n                    sum += dataSize;\r\n                }\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        long timeEnd = System.currentTimeMillis();\r\n        final long timeDiff = timeEnd - timeStart;\r\n        final double goodPut = (double) sum / timeDiff * 8 / 1000;\r\n\r\n        System.out.println(&quot;The goodput was: &quot; + goodPut + &quot; kbit/s&quot;);\r\n\r\n        writeResults(goodPut);\r\n    }\r\n``` \r\n\r\nMy question is why this Exception occurs in this program? And I am interested in how i know if there is memory leak and whether there can be a memory leak in intelliJ (JetBrains) at all.\r\n\r\nI have read a lot about how to expand the heap, but I am not interested in that.\r\n\r\nthanks for your answers :)","title":"Get back Memory from java.lang.OutOfMemoryError: Java heap space","body":"<p>in my java program i get <code>Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space</code> when i try to run it.</p>\n<p>The program uses ServerSocket and Socket to receive packets from a client program, which uses Socket too. I previously was using treads for the server but now the program contains only main and a receiver function.</p>\n<p>here is the source code:</p>\n<pre><code>public class TCPEmpfang {\n\n    private static final int TIMEOUT = 1000;\n\n    public static void main(String[] args) {\n        new TCPEmpfang().startTCPEmpfang();\n    }\n\n    private void startTCPEmpfang() {\n        try (ServerSocket serverSocket = new ServerSocket(4712)) {\n            System.out.println(&quot;Waiting for clients...&quot;);\n            while (true) {\n                    acceptConnection(serverSocket);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void acceptConnection(ServerSocket servSocket) {\n        final long timeStart = System.currentTimeMillis();\n        int sum = 0;\n        try (Socket s = servSocket.accept()) {\n            System.out.println(&quot;NEU&quot;);\n            s.setSoTimeout(TIMEOUT);\n            try (InputStream input = s.getInputStream();\n                 DataInputStream dis = new DataInputStream(input)) {\n                while (true) {\n                    int dataSize = dis.readInt();\n                    byte[] data = new byte[dataSize];\n                    dis.readFully(data);\n                    sum += dataSize;\n                }\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        long timeEnd = System.currentTimeMillis();\n        final long timeDiff = timeEnd - timeStart;\n        final double goodPut = (double) sum / timeDiff * 8 / 1000;\n\n        System.out.println(&quot;The goodput was: &quot; + goodPut + &quot; kbit/s&quot;);\n\n        writeResults(goodPut);\n    }\n</code></pre>\n<p>My question is why this Exception occurs in this program? And I am interested in how i know if there is memory leak and whether there can be a memory leak in intelliJ (JetBrains) at all.</p>\n<p>I have read a lot about how to expand the heap, but I am not interested in that.</p>\n<p>thanks for your answers :)</p>\n"},{"tags":["java","jaxb","eclipselink","moxy"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1638890942,"post_id":70262741,"comment_id":124205066,"body_markdown":"Add the required dependency. &quot; Implementation of Jakarta XML Binding-API has not been found on module path or classpath.&quot;","body":"Add the required dependency. &quot; Implementation of Jakarta XML Binding-API has not been found on module path or classpath.&quot;"},{"owner":{"account_id":14638583,"reputation":387,"user_id":10571898,"display_name":"Rakshan Premsagar Kapikad"},"score":0,"creation_date":1638891017,"post_id":70262741,"comment_id":124205100,"body_markdown":"The same file works perfect on the eclipse IDE, but not on the command line. How is it that the dependencies are different?","body":"The same file works perfect on the eclipse IDE, but not on the command line. How is it that the dependencies are different?"},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1638891080,"post_id":70262741,"comment_id":124205130,"body_markdown":"Yeah, because you have the dependency there. You should also deploy the dependency.","body":"Yeah, because you have the dependency there. You should also deploy the dependency."},{"owner":{"account_id":14638583,"reputation":387,"user_id":10571898,"display_name":"Rakshan Premsagar Kapikad"},"score":0,"creation_date":1638892325,"post_id":70262741,"comment_id":124205695,"body_markdown":"This program is incorporated as an artifact to a microservice environment. The microservice is being hosted in a docker container having openJDK image.  I am not responsible for the deploying, but once it was deployed, there showed errors on my side of the code as I have mentioned","body":"This program is incorporated as an artifact to a microservice environment. The microservice is being hosted in a docker container having openJDK image.  I am not responsible for the deploying, but once it was deployed, there showed errors on my side of the code as I have mentioned"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1638893062,"post_id":70262741,"comment_id":124206008,"body_markdown":"The error states you don&#39;t have the dependency (JAXB implementation classes) on your class path. What version of java and EclipseLink do you have?","body":"The error states you don&#39;t have the dependency (JAXB implementation classes) on your class path. What version of java and EclipseLink do you have?"},{"owner":{"account_id":14638583,"reputation":387,"user_id":10571898,"display_name":"Rakshan Premsagar Kapikad"},"score":0,"creation_date":1638893143,"post_id":70262741,"comment_id":124206045,"body_markdown":"eclipselink 3.0.0 and java 1.8","body":"eclipselink 3.0.0 and java 1.8"},{"owner":{"account_id":8324875,"reputation":11755,"user_id":6413377,"accept_rate":25,"display_name":"pirho"},"score":0,"creation_date":1638893888,"post_id":70262741,"comment_id":124206311,"body_markdown":"Using Maven/Gradle?","body":"Using Maven/Gradle?"},{"owner":{"account_id":14638583,"reputation":387,"user_id":10571898,"display_name":"Rakshan Premsagar Kapikad"},"score":0,"creation_date":1638893927,"post_id":70262741,"comment_id":124206323,"body_markdown":"i am using maven","body":"i am using maven"},{"owner":{"account_id":8324875,"reputation":11755,"user_id":6413377,"accept_rate":25,"display_name":"pirho"},"score":0,"creation_date":1638894884,"post_id":70262741,"comment_id":124206746,"body_markdown":"Just to be sure put the maven dependency part in your question also. Is it like in [here](https://stackoverflow.com/q/53978612/6413377)?","body":"Just to be sure put the maven dependency part in your question also. Is it like in <a href=\"https://stackoverflow.com/q/53978612/6413377\">here</a>?"},{"owner":{"account_id":14638583,"reputation":387,"user_id":10571898,"display_name":"Rakshan Premsagar Kapikad"},"score":0,"creation_date":1638895184,"post_id":70262741,"comment_id":124206880,"body_markdown":"hI, just updated he dependencies in the question","body":"hI, just updated he dependencies in the question"},{"owner":{"account_id":8324875,"reputation":11755,"user_id":6413377,"accept_rate":25,"display_name":"pirho"},"score":0,"creation_date":1638896050,"post_id":70262741,"comment_id":124207204,"body_markdown":"I think it is as told in comment from Chris. You just do not have the implementation dependency only API. Not sure where it digs MOXY while running in Eclipse. Check the post linked in my previous comment,","body":"I think it is as told in comment from Chris. You just do not have the implementation dependency only API. Not sure where it digs MOXY while running in Eclipse. Check the post linked in my previous comment,"}],"owner":{"account_id":14638583,"reputation":387,"user_id":10571898,"display_name":"Rakshan Premsagar Kapikad"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":447,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1638895273,"creation_date":1638890614,"question_id":70262741,"body_markdown":"I have a program to generate an XML based on certain inputs, I have made use of jaxb with Moxy. I see that my code works perfectly on eclipse, but when it is being deployed or when it is being run on the cmd line from the jar, it says the following error \r\n\r\n&gt; jakarta.xml.bind.JAXBException: Implementation of Jakarta XML Binding-API has not been found on module path or classpath.\r\n\r\n\r\nI have a jaxb.properties file which says : \r\n\r\n```\r\njakarta.xml.bind.JAXBContextFactory=org.eclipse.persistence.jaxb.JAXBContextFactory\r\n```\r\n\r\nDoes it mean that the execution is only restricted to eclipse?\r\nRunning a little clueless.\r\n\r\n---------------------------------------------------------------\r\nUpdate 1: \r\n\r\ndependencies: \r\n\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;XXX&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;projectX&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;exclusions&gt;\r\n\t\t&lt;exclusion&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t&lt;/exclusion&gt;\r\n\t&lt;/exclusions&gt;\r\n&lt;/dependency&gt;\r\n\t\t\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n\t&lt;version&gt;3.0.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.eclipse.persistence&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;eclipselink&lt;/artifactId&gt;\r\n\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"jaxb unmarshalling works on eclipse, but fails when deployed","body":"<p>I have a program to generate an XML based on certain inputs, I have made use of jaxb with Moxy. I see that my code works perfectly on eclipse, but when it is being deployed or when it is being run on the cmd line from the jar, it says the following error</p>\n<blockquote>\n<p>jakarta.xml.bind.JAXBException: Implementation of Jakarta XML Binding-API has not been found on module path or classpath.</p>\n</blockquote>\n<p>I have a jaxb.properties file which says :</p>\n<pre><code>jakarta.xml.bind.JAXBContextFactory=org.eclipse.persistence.jaxb.JAXBContextFactory\n</code></pre>\n<p>Does it mean that the execution is only restricted to eclipse?\nRunning a little clueless.</p>\n<hr />\n<p>Update 1:</p>\n<p>dependencies:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;XXX&lt;/groupId&gt;\n    &lt;artifactId&gt;projectX&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n        \n&lt;dependency&gt;\n    &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n    &lt;version&gt;3.0.1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.eclipse.persistence&lt;/groupId&gt;\n    &lt;artifactId&gt;eclipselink&lt;/artifactId&gt;\n    &lt;version&gt;3.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","c++"],"comments":[{"owner":{"account_id":226699,"reputation":10545,"user_id":487892,"display_name":"drescherjm"},"score":1,"creation_date":1638894347,"post_id":70263599,"comment_id":124206511,"body_markdown":"***But it should have been*** No this is actually wrong. Some numbers are impossible to represent by the floating point hardware implementation. This calculator should help you understand this behavior and what is stored: [https://www.h-schmidt.net/FloatConverter/IEEE754.html](https://www.h-schmidt.net/FloatConverter/IEEE754.html)","body":"<b><i>But it should have been</i></b> No this is actually wrong. Some numbers are impossible to represent by the floating point hardware implementation. This calculator should help you understand this behavior and what is stored: <a href=\"https://www.h-schmidt.net/FloatConverter/IEEE754.html\" rel=\"nofollow noreferrer\">https://www.h-schmidt.net/FloatConverter/IEEE754.html</a>"},{"owner":{"account_id":23136927,"reputation":103,"user_id":17241042,"display_name":"Ham Lemon"},"score":0,"creation_date":1638895831,"post_id":70263599,"comment_id":124207122,"body_markdown":"the calculator gives a very small error whereas my error are in 10^-2 orders, why?","body":"the calculator gives a very small error whereas my error are in 10^-2 orders, why?"},{"owner":{"account_id":226699,"reputation":10545,"user_id":487892,"display_name":"drescherjm"},"score":0,"creation_date":1638896314,"post_id":70263599,"comment_id":124207313,"body_markdown":"Put `79737.68` into the calculator and see what value it returns.","body":"Put <code>79737.68</code> into the calculator and see what value it returns."}],"owner":{"account_id":23136927,"reputation":103,"user_id":17241042,"display_name":"Ham Lemon"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1638894353,"answer_count":0,"score":0,"last_activity_date":1638894289,"creation_date":1638894206,"question_id":70263599,"body_markdown":"I know this may be basic but the problem is that I was experimenting with a small program to implicitly convert data types into the highest order by Java, C++ hierarchy and the results were interesting, for example:\r\n```\r\npublic class idk\r\n{\r\n\tpublic static void main(String args[])\r\n\t{\r\n\t\tdouble a;\r\n\t\tint b = 4565;\r\n\t\tchar c = &#39;z&#39;;\r\n\t\tbyte d = 1;\r\n\t\tshort e = 32;\r\n\t\tlong f = 74539;\r\n\t\tfloat g = 478.68f;\r\n\t\ta = b+c+d+e+f+g;\r\n\t\tSystem.out.println(a);\r\n\t}\r\n}\r\n```\r\n\t\t\r\nHere the output came to be \r\n```\r\n79737.6796875\r\n```\r\nBut it should have been\r\n```\r\n79737.68\r\n```\r\nand in C++ \r\n```\r\n#include &lt;iostream&gt;\r\n\r\nusing namespace std;\r\n\r\nint main()\r\n{\r\n    double a;\r\n\tint b = 4565;\r\n\tchar c = &#39;z&#39;;\r\n\tshort e = 32;\r\n\tlong f = 74539;\r\n\tfloat g = 478.68f;\r\n\ta = b+c+d+e+f+g;\r\n    \r\n    if(a == 79736.6796875)\r\n    cout&lt;&lt;a;\r\n\r\n    return 0;\r\n}\r\n```\r\nAnd it did print a, so the end is that the decimal numbers are being altered and if the float variable was changed to double, then all the problems vanish, why is that and what is the solution?","title":"Float Variable Decimal Number Problems in Java, C++","body":"<p>I know this may be basic but the problem is that I was experimenting with a small program to implicitly convert data types into the highest order by Java, C++ hierarchy and the results were interesting, for example:</p>\n<pre><code>public class idk\n{\n    public static void main(String args[])\n    {\n        double a;\n        int b = 4565;\n        char c = 'z';\n        byte d = 1;\n        short e = 32;\n        long f = 74539;\n        float g = 478.68f;\n        a = b+c+d+e+f+g;\n        System.out.println(a);\n    }\n}\n</code></pre>\n<p>Here the output came to be</p>\n<pre><code>79737.6796875\n</code></pre>\n<p>But it should have been</p>\n<pre><code>79737.68\n</code></pre>\n<p>and in C++</p>\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    double a;\n    int b = 4565;\n    char c = 'z';\n    short e = 32;\n    long f = 74539;\n    float g = 478.68f;\n    a = b+c+d+e+f+g;\n    \n    if(a == 79736.6796875)\n    cout&lt;&lt;a;\n\n    return 0;\n}\n</code></pre>\n<p>And it did print a, so the end is that the decimal numbers are being altered and if the float variable was changed to double, then all the problems vanish, why is that and what is the solution?</p>\n"},{"tags":["java","log4j"],"answers":[{"tags":[],"owner":{"account_id":334630,"reputation":5349,"user_id":661196,"accept_rate":79,"display_name":"Cygnusx1"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638893805,"creation_date":1312998731,"answer_id":7015453,"question_id":7014792,"body_markdown":"I can think of 2 solutions:\r\n\r\n1) Write your own logger that will use SMTPAppender and set the properties programatically.\r\n\r\n2) Use the [MDC][1] to put a dynamic value in your code.  You can get values from the MDC in your log4j.xml with the `%X`.\r\n\r\nex:\r\n\r\n    log4j.appender.ERROREMAIL.Subject=%X{key}\r\n\r\n\r\n  [1]: http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/MDC.html","title":"How can I dynamically change the email subject using Log4J SMTPAppender?","body":"<p>I can think of 2 solutions:</p>\n<ol>\n<li><p>Write your own logger that will use SMTPAppender and set the properties programatically.</p>\n</li>\n<li><p>Use the <a href=\"http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/MDC.html\" rel=\"nofollow noreferrer\">MDC</a> to put a dynamic value in your code.  You can get values from the MDC in your log4j.xml with the <code>%X</code>.</p>\n</li>\n</ol>\n<p>ex:</p>\n<pre><code>log4j.appender.ERROREMAIL.Subject=%X{key}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":410855,"reputation":2014,"user_id":782938,"display_name":"Terrell Plotzki"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1313005017,"creation_date":1313005017,"answer_id":7016713,"question_id":7014792,"body_markdown":"You should just need to make use of the hostname variable something like:\r\n\r\n    log4j.appender.ERROREMAIL.Subject=${hostname} \r\n\r\nDepending on your paritcular configuration and OS you may need to supply this variable to your JVM at statrup using -Dhostname=&#39;machinename&#39; or -Dhostname=$HOST","title":"How can I dynamically change the email subject using Log4J SMTPAppender?","body":"<p>You should just need to make use of the hostname variable something like:</p>\n\n<pre><code>log4j.appender.ERROREMAIL.Subject=${hostname} \n</code></pre>\n\n<p>Depending on your paritcular configuration and OS you may need to supply this variable to your JVM at statrup using -Dhostname='machinename' or -Dhostname=$HOST</p>\n"},{"tags":[],"owner":{"account_id":301920,"reputation":2739,"user_id":609973,"display_name":"MarianP"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1313705234,"creation_date":1313094747,"answer_id":7032448,"question_id":7014792,"body_markdown":"In the following piece of code I read out the *log4j.properties* file, set the property **log4j.appender.ERROREMAIL.Subject** to **emailRecipients** and reset the log4j configuration. Could be done at the start of the application, you just need to set the *emailRecepients* string right.\r\n\r\n    \tProperties props = new Properties();\r\n        try {\r\n             InputStream configStream = Thread.class.getResourceAsStream(&quot;/log4j.properties&quot;);\r\n             if (configStream == null) {\r\n            \t throw new RuntimeException();\r\n             }\r\n             props.load(configStream);\r\n             configStream.close();\r\n        } catch(Throwable e) {\r\n            System.out.println(&quot;Error: Cannot load log4j configuration file &quot;);\r\n        }\r\n        \r\n        props.setProperty(&quot;log4j.appender.ERROREMAIL.Subject&quot;, emailRecipients);\r\n\r\n        LogManager.resetConfiguration();\r\n        PropertyConfigurator.configure(props);\r\n","title":"How can I dynamically change the email subject using Log4J SMTPAppender?","body":"<p>In the following piece of code I read out the <em>log4j.properties</em> file, set the property <strong>log4j.appender.ERROREMAIL.Subject</strong> to <strong>emailRecipients</strong> and reset the log4j configuration. Could be done at the start of the application, you just need to set the <em>emailRecepients</em> string right.</p>\n\n<pre><code>    Properties props = new Properties();\n    try {\n         InputStream configStream = Thread.class.getResourceAsStream(\"/log4j.properties\");\n         if (configStream == null) {\n             throw new RuntimeException();\n         }\n         props.load(configStream);\n         configStream.close();\n    } catch(Throwable e) {\n        System.out.println(\"Error: Cannot load log4j configuration file \");\n    }\n\n    props.setProperty(\"log4j.appender.ERROREMAIL.Subject\", emailRecipients);\n\n    LogManager.resetConfiguration();\n    PropertyConfigurator.configure(props);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":128862,"reputation":7,"user_id":327015,"display_name":"Nicolay"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1319715975,"creation_date":1319715975,"answer_id":7915391,"question_id":7014792,"body_markdown":"To set a username or over ENV variable\r\n\r\n    log4j.appender.smtp.Subject=SYNC PROJECTS (${user.name}) Error Log ...","title":"How can I dynamically change the email subject using Log4J SMTPAppender?","body":"<p>To set a username or over ENV variable</p>\n\n<pre><code>log4j.appender.smtp.Subject=SYNC PROJECTS (${user.name}) Error Log ...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5038104,"reputation":11,"user_id":4046342,"display_name":"Lael Fox Willis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1411728579,"creation_date":1411728579,"answer_id":26057829,"question_id":7014792,"body_markdown":"    ///////////////////////////////////////////////////////////////////////////\r\n    // Initial Logging configuration\r\n    ///////////////////////////////////////////////////////////////////////////\r\n    \r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; \r\n    &lt;!DOCTYPE log4j:configuration SYSTEM &quot;log4j.dtd&quot;&gt;\r\n    &lt;log4j:configuration xmlns:log4j=&#39;http://jakarta.apache.org/log4j/&#39;&gt;\r\n    \t\r\n    \t\r\n    \t&lt;appender name=&quot;consoleAppender&quot; class=&quot;org.apache.log4j.ConsoleAppender&quot;&gt;\r\n          &lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;\r\n             &lt;param name=&quot;ConversionPattern&quot; value=&quot;%d{dd MMM yyyy HH:mm:ss} %5p %c{1} - %m%n&quot;/&gt;\r\n          &lt;/layout&gt;\r\n       &lt;/appender&gt;\r\n    \t\r\n    \t\r\n    \t&lt;!-- BufferSize almacena un buffer de mensajes. Un evento de tipo error o \r\n    \tsuperior provoca el envio del correo junto con el resto de mensajes en el buffer (si los hay) --&gt;\r\n    \t&lt;appender name=&quot;emailAppender&quot;  class=&quot;org.apache.log4j.net.SMTPAppender&quot;&gt;  \r\n    \t\t\r\n            &lt;param name=&quot;BufferSize&quot;    value=&quot;40&quot;/&gt; \r\n            &lt;param name=&quot;SMTPHost&quot;      value=&quot;conectores.mydomain.es&quot; /&gt;  \r\n            &lt;param name=&quot;SMTPUsername&quot;  value=&quot;weblogic&quot; /&gt;           \r\n            &lt;param name=&quot;From&quot;          value=&quot;no.reply@mydomain.es&quot; /&gt;  \r\n            &lt;param name=&quot;To&quot;            value=&quot;foo.bar@externos-mydomain.es&quot; /&gt;  \r\n            &lt;param name=&quot;Subject&quot;       value=&quot;Notificaci&#243;n de la aplicaci&#243;n&quot; /&gt;  \r\n                              \r\n    \t\t&lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;  \r\n    \t\t\t&lt;param name=&quot;ConversionPattern&quot; value=&quot;%n%d{yyyy-MM-dd HH:mm:ss} [%-5p] [%l] %n%m%n&quot; /&gt;  \r\n    \t\t&lt;/layout&gt;  \r\n        &lt;/appender&gt;  \r\n    \r\n    \t&lt;!-- Las trazas de nivel trace o superior las mete en el buffer, el resto las desecha --&gt;\r\n    \t&lt;logger name=&quot;smtp.logger&quot;&gt;  \r\n    \t\t&lt;level value=&quot;debug&quot;/&gt;\r\n            &lt;appender-ref ref=&quot;emailAppender&quot; /&gt;  \r\n        &lt;/logger&gt;   \r\n    \r\n    \t&lt;root&gt;\r\n    \t\t&lt;priority value=&quot;debug&quot;/&gt;\r\n    \t\t&lt;appender-ref ref=&quot;consoleAppender&quot;/&gt;\r\n    \t&lt;/root&gt;\r\n    \t\r\n    &lt;/log4j:configuration&gt;\r\n    \r\n    ///////////////////////////////////////////////////////////////////////////\r\n    // Dynamic configuration of SMTAppender attributes\r\n    ///////////////////////////////////////////////////////////////////////////\r\n    \r\n    package es.foo.test;\r\n    \r\n    import java.util.Enumeration;\r\n    \r\n    import java.util.Properties;\r\n    \r\n    import org.apache.log4j.Appender;\r\n    import org.apache.log4j.Logger;\r\n    import org.apache.log4j.net.SMTPAppender;\r\n    \r\n    public class TestSMTPAppender {\r\n    \t\r\n    \tprivate static Logger smtp = Logger.getLogger(&quot;smtp.logger&quot;);\r\n    \tprivate static boolean ini_flag = false;\t\r\n    \tprivate static final Properties propiedades = new Properties();\t\r\n    \tstatic {\r\n    \t\ttry {\t\t\t\r\n    \t\t\tpropiedades.load(TestSMTPAppender.class.getClassLoader().getResourceAsStream(&quot;mydomainUtiles.properties&quot;));\r\n    \t\t} catch (Exception ioe) {\r\n    \t\t\tSystem.err.println(&quot;error while creating properties from &#39;mydomainUtiles.properties&#39;: &quot; + ioe.getMessage());\t\r\n    \t\t}\r\n    \t}\t\r\n    \t\r\n    \tprivate static void initializeLogger(){\t\r\n    \t\t\r\n    \t\tString SMTPHost = propiedades.getProperty(&quot;host&quot;);\r\n    \t\tString SMTPUsername = propiedades.getProperty(&quot;user&quot;);\r\n    \t\tString From = propiedades.getProperty(&quot;sender&quot;);\r\n    \t\t\r\n    \t\tEnumeration eappenders = smtp.getAllAppenders();\r\n    \t\twhile(eappenders.hasMoreElements()){\r\n    \t\t\tAppender appender = (Appender) eappenders.nextElement();\r\n    \t\t\tif(appender instanceof SMTPAppender){\r\n    \t\t\t\t\r\n    \t\t\t\tif(SMTPHost != null){\r\n    \t\t\t\t\t((SMTPAppender)appender).setSMTPHost(SMTPHost);\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\tif(SMTPUsername != null){\r\n    \t\t\t\t\t((SMTPAppender)appender).setSMTPUsername(SMTPUsername);\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\tif(From != null){\r\n    \t\t\t\t\t((SMTPAppender)appender).setFrom(From);\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\t// Place here other attributes, like Subject\r\n    \t\t\t\t\t\t\t\t\r\n    \t\t\t\t((SMTPAppender)appender).activateOptions();\r\n    \t\t\t}\t\t\t\r\n    \t\t}\r\n    \t}\r\n    \t\t\t\t\r\n    \tpublic static Logger getSMTPLogger(){\r\n    \t\tif(!ini_flag){\r\n    \t\t\tinitializeLogger();\r\n    \t\t\tini_flag = true;\t\t\r\n    \t\t}\r\n    \t\treturn TestSMTPAppender.smtp;\r\n    \t}\t\r\n    \r\n    }\r\n    \r\n    ///////////////////////////////////////////////////////////////////////////\r\n    // TEST\r\n    ///////////////////////////////////////////////////////////////////////////\r\n    \r\n    package es.foo.test;\r\n    \r\n    import java.util.Enumeration;\r\n    \r\n    import org.apache.log4j.Appender;\r\n    import org.apache.log4j.Logger;\r\n    import org.apache.log4j.net.SMTPAppender;\r\n    \r\n    public class Test {\r\n    \t\r\n    \tprivate static Logger smtp = TestSMTPAppender.getSMTPLogger();\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\t\t\r\n    \t\tsmtp.trace(&quot;message1&quot;);\r\n    \t\tsmtp.debug(&quot;message2&quot;);\r\n    \t\tsmtp.info(&quot;message3&quot;);\r\n    \t\tsmtp.warn(&quot;message4&quot;);\r\n    \t\tsmtp.error(&quot;message5&quot;);\r\n    \r\n    \t}\r\n    }\r\n    \r\n    ","title":"How can I dynamically change the email subject using Log4J SMTPAppender?","body":"<pre><code>///////////////////////////////////////////////////////////////////////////\n// Initial Logging configuration\n///////////////////////////////////////////////////////////////////////////\n\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt; \n&lt;!DOCTYPE log4j:configuration SYSTEM \"log4j.dtd\"&gt;\n&lt;log4j:configuration xmlns:log4j='http://jakarta.apache.org/log4j/'&gt;\n\n\n    &lt;appender name=\"consoleAppender\" class=\"org.apache.log4j.ConsoleAppender\"&gt;\n      &lt;layout class=\"org.apache.log4j.PatternLayout\"&gt;\n         &lt;param name=\"ConversionPattern\" value=\"%d{dd MMM yyyy HH:mm:ss} %5p %c{1} - %m%n\"/&gt;\n      &lt;/layout&gt;\n   &lt;/appender&gt;\n\n\n    &lt;!-- BufferSize almacena un buffer de mensajes. Un evento de tipo error o \n    superior provoca el envio del correo junto con el resto de mensajes en el buffer (si los hay) --&gt;\n    &lt;appender name=\"emailAppender\"  class=\"org.apache.log4j.net.SMTPAppender\"&gt;  \n\n        &lt;param name=\"BufferSize\"    value=\"40\"/&gt; \n        &lt;param name=\"SMTPHost\"      value=\"conectores.mydomain.es\" /&gt;  \n        &lt;param name=\"SMTPUsername\"  value=\"weblogic\" /&gt;           \n        &lt;param name=\"From\"          value=\"no.reply@mydomain.es\" /&gt;  \n        &lt;param name=\"To\"            value=\"foo.bar@externos-mydomain.es\" /&gt;  \n        &lt;param name=\"Subject\"       value=\"Notificación de la aplicación\" /&gt;  \n\n        &lt;layout class=\"org.apache.log4j.PatternLayout\"&gt;  \n            &lt;param name=\"ConversionPattern\" value=\"%n%d{yyyy-MM-dd HH:mm:ss} [%-5p] [%l] %n%m%n\" /&gt;  \n        &lt;/layout&gt;  \n    &lt;/appender&gt;  \n\n    &lt;!-- Las trazas de nivel trace o superior las mete en el buffer, el resto las desecha --&gt;\n    &lt;logger name=\"smtp.logger\"&gt;  \n        &lt;level value=\"debug\"/&gt;\n        &lt;appender-ref ref=\"emailAppender\" /&gt;  \n    &lt;/logger&gt;   \n\n    &lt;root&gt;\n        &lt;priority value=\"debug\"/&gt;\n        &lt;appender-ref ref=\"consoleAppender\"/&gt;\n    &lt;/root&gt;\n\n&lt;/log4j:configuration&gt;\n\n///////////////////////////////////////////////////////////////////////////\n// Dynamic configuration of SMTAppender attributes\n///////////////////////////////////////////////////////////////////////////\n\npackage es.foo.test;\n\nimport java.util.Enumeration;\n\nimport java.util.Properties;\n\nimport org.apache.log4j.Appender;\nimport org.apache.log4j.Logger;\nimport org.apache.log4j.net.SMTPAppender;\n\npublic class TestSMTPAppender {\n\n    private static Logger smtp = Logger.getLogger(\"smtp.logger\");\n    private static boolean ini_flag = false;    \n    private static final Properties propiedades = new Properties(); \n    static {\n        try {           \n            propiedades.load(TestSMTPAppender.class.getClassLoader().getResourceAsStream(\"mydomainUtiles.properties\"));\n        } catch (Exception ioe) {\n            System.err.println(\"error while creating properties from 'mydomainUtiles.properties': \" + ioe.getMessage());    \n        }\n    }   \n\n    private static void initializeLogger(){ \n\n        String SMTPHost = propiedades.getProperty(\"host\");\n        String SMTPUsername = propiedades.getProperty(\"user\");\n        String From = propiedades.getProperty(\"sender\");\n\n        Enumeration eappenders = smtp.getAllAppenders();\n        while(eappenders.hasMoreElements()){\n            Appender appender = (Appender) eappenders.nextElement();\n            if(appender instanceof SMTPAppender){\n\n                if(SMTPHost != null){\n                    ((SMTPAppender)appender).setSMTPHost(SMTPHost);\n                }\n\n                if(SMTPUsername != null){\n                    ((SMTPAppender)appender).setSMTPUsername(SMTPUsername);\n                }\n\n                if(From != null){\n                    ((SMTPAppender)appender).setFrom(From);\n                }\n\n                // Place here other attributes, like Subject\n\n                ((SMTPAppender)appender).activateOptions();\n            }           \n        }\n    }\n\n    public static Logger getSMTPLogger(){\n        if(!ini_flag){\n            initializeLogger();\n            ini_flag = true;        \n        }\n        return TestSMTPAppender.smtp;\n    }   \n\n}\n\n///////////////////////////////////////////////////////////////////////////\n// TEST\n///////////////////////////////////////////////////////////////////////////\n\npackage es.foo.test;\n\nimport java.util.Enumeration;\n\nimport org.apache.log4j.Appender;\nimport org.apache.log4j.Logger;\nimport org.apache.log4j.net.SMTPAppender;\n\npublic class Test {\n\n    private static Logger smtp = TestSMTPAppender.getSMTPLogger();\n\n    public static void main(String[] args) {\n\n        smtp.trace(\"message1\");\n        smtp.debug(\"message2\");\n        smtp.info(\"message3\");\n        smtp.warn(\"message4\");\n        smtp.error(\"message5\");\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4115708,"reputation":3,"user_id":3377322,"display_name":"user3377322"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1453336322,"creation_date":1453336322,"answer_id":34913316,"question_id":7014792,"body_markdown":"if we are reading the properties and adding the subject throw java code we will get concurrent request problem.\r\n\r\nif first user modified the subject and doing some other operations before sending the mail. at the same time second user added different subject. first user is also get the second user&#39;s subject.     ","title":"How can I dynamically change the email subject using Log4J SMTPAppender?","body":"<p>if we are reading the properties and adding the subject throw java code we will get concurrent request problem.</p>\n\n<p>if first user modified the subject and doing some other operations before sending the mail. at the same time second user added different subject. first user is also get the second user's subject.     </p>\n"}],"owner":{"account_id":83567,"reputation":1683,"user_id":234194,"accept_rate":56,"display_name":"user234194"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7569,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":7032448,"answer_count":6,"score":10,"last_activity_date":1638893805,"creation_date":1312995680,"question_id":7014792,"body_markdown":"    log4j.appender.ERROREMAIL=org.apache.log4j.net.SMTPAppender\r\n    log4j.appender.ERROREMAIL.SMTPHost=www.company.com\r\n    log4j.appender.ERROREMAIL.Threshold=ERROR\r\n    log4j.appender.ERROREMAIL.To=email.address1@company.com,email.address2@company.com,email.address3@company.com\r\n    log4j.appender.ERROREMAIL.From=some.emailaddress.com\r\n    log4j.appender.ERROREMAIL.Subject=messagesubject1\r\n\r\nI am using the above mentioned log4j property file to send \r\nemail when I do \r\n\r\n    log.error(&quot;Error message&quot;);\r\n\r\nHow do I be able to make it dynamic so that \r\nthe message subject can change dynamically depending upon the machine name(env name).\r\n\r\neg:\r\n\r\n    log4j.appender.ERROREMAIL.Subject=messagesubject1, messagesubject2, messagesubject3\r\n\r\nI want to use subjects 1,2 and 3 dynamically depending upon machine name.\r\n\r\nAny help will be appreciated.\r\nThanks\r\n\r\n\r\n\r\n","title":"How can I dynamically change the email subject using Log4J SMTPAppender?","body":"<pre><code>log4j.appender.ERROREMAIL=org.apache.log4j.net.SMTPAppender\nlog4j.appender.ERROREMAIL.SMTPHost=www.company.com\nlog4j.appender.ERROREMAIL.Threshold=ERROR\nlog4j.appender.ERROREMAIL.To=email.address1@company.com,email.address2@company.com,email.address3@company.com\nlog4j.appender.ERROREMAIL.From=some.emailaddress.com\nlog4j.appender.ERROREMAIL.Subject=messagesubject1\n</code></pre>\n\n<p>I am using the above mentioned log4j property file to send \nemail when I do </p>\n\n<pre><code>log.error(\"Error message\");\n</code></pre>\n\n<p>How do I be able to make it dynamic so that \nthe message subject can change dynamically depending upon the machine name(env name).</p>\n\n<p>eg:</p>\n\n<pre><code>log4j.appender.ERROREMAIL.Subject=messagesubject1, messagesubject2, messagesubject3\n</code></pre>\n\n<p>I want to use subjects 1,2 and 3 dynamically depending upon machine name.</p>\n\n<p>Any help will be appreciated.\nThanks</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":0,"creation_date":1638893350,"post_id":70263385,"comment_id":124206118,"body_markdown":"Nope.  Just specify &quot;Java 8&quot; as the target in your project settings.  That should be perfectly OK.  FYI, Eclipse has its *OWN* Java compiler, independent of the JRE you use to *RUN* Eclipse.","body":"Nope.  Just specify &quot;Java 8&quot; as the target in your project settings.  That should be perfectly OK.  FYI, Eclipse has its <i>OWN</i> Java compiler, independent of the JRE you use to <i>RUN</i> Eclipse."}],"answers":[{"tags":[],"owner":{"account_id":7932983,"reputation":1434,"user_id":5990117,"display_name":"Petr Aleksandrov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1638893681,"creation_date":1638893681,"answer_id":70263481,"question_id":70263385,"body_markdown":"The version of Java used by Eclipse does NOT depend on version of Java you are using for compilation the project. \r\n\r\nE.g. you can run Eclipse on Java11 and setup it to build the project using Java8. \r\n\r\nThere is only downside I can see: using an old version of IDE you are loosing all new fancy features. ","title":"any downside to use latest Eclipse with my Java 8 project?","body":"<p>The version of Java used by Eclipse does NOT depend on version of Java you are using for compilation the project.</p>\n<p>E.g. you can run Eclipse on Java11 and setup it to build the project using Java8.</p>\n<p>There is only downside I can see: using an old version of IDE you are loosing all new fancy features.</p>\n"}],"owner":{"account_id":8567452,"reputation":165,"user_id":6419522,"display_name":"peterB"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70263481,"answer_count":1,"score":0,"last_activity_date":1638893681,"creation_date":1638893271,"question_id":70263385,"body_markdown":"The project I am working on is a Java 8 project. I haven&#39;t updated my Eclipse for years. The latest Eclipse required Java 11. I know I can point my project to Java 8. Are there any potential issues with doing so?","title":"any downside to use latest Eclipse with my Java 8 project?","body":"<p>The project I am working on is a Java 8 project. I haven't updated my Eclipse for years. The latest Eclipse required Java 11. I know I can point my project to Java 8. Are there any potential issues with doing so?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":5273740,"reputation":698,"user_id":4211252,"display_name":"Thilo Schwarz"},"score":0,"creation_date":1638863414,"post_id":70256123,"comment_id":124194191,"body_markdown":"You should add the annotation ```@EnableConfigurationProperties``` to your CustomProperties.","body":"You should add the annotation <code>@EnableConfigurationProperties</code> to your CustomProperties."},{"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"score":0,"creation_date":1638866245,"post_id":70256123,"comment_id":124195135,"body_markdown":"`YamlPropertyLoaderFactory` is a custom class ?","body":"<code>YamlPropertyLoaderFactory</code> is a custom class ?"},{"owner":{"display_name":"user10586382"},"score":0,"creation_date":1638885090,"post_id":70256123,"comment_id":124202352,"body_markdown":"@dariosicily I just updated my question. You can see YamlPropertySourceFactory above.","body":"@dariosicily I just updated my question. You can see YamlPropertySourceFactory above."}],"answers":[{"tags":[],"owner":{"account_id":5629908,"reputation":1224,"user_id":4457144,"accept_rate":60,"display_name":"vincent"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638893611,"creation_date":1638890487,"answer_id":70262702,"question_id":70256123,"body_markdown":"It seems that the problem comes from the visibility of your MyNode class members.\r\nIf you define public setters for all the members, everything will work fine.\r\nSo just try to modify \r\n\r\n    public class MyNode {\r\n        String label, id, uri; \r\n    }\r\n\r\nto \r\n\r\n    public class MyNode {\r\n    \tprivate String label, id, uri;\r\n    \r\n    \tpublic String getLabel() {\r\n    \t\treturn label;\r\n    \t}\r\n    \r\n    \tpublic void setLabel(String label) {\r\n    \t\tthis.label = label;\r\n    \t}\r\n    \r\n    \tpublic String getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \r\n    \tpublic void setId(String id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \r\n    \tpublic String getUri() {\r\n    \t\treturn uri;\r\n    \t}\r\n    \r\n    \tpublic void setUri(String uri) {\r\n    \t\tthis.uri = uri;\r\n    \t}\r\n    }","title":"Load/Map array of object with Spring @PropertySource","body":"<p>It seems that the problem comes from the visibility of your MyNode class members.\nIf you define public setters for all the members, everything will work fine.\nSo just try to modify</p>\n<pre><code>public class MyNode {\n    String label, id, uri; \n}\n</code></pre>\n<p>to</p>\n<pre><code>public class MyNode {\n    private String label, id, uri;\n\n    public String getLabel() {\n        return label;\n    }\n\n    public void setLabel(String label) {\n        this.label = label;\n    }\n\n    public String getId() {\n        return id;\n    }\n\n    public void setId(String id) {\n        this.id = id;\n    }\n\n    public String getUri() {\n        return uri;\n    }\n\n    public void setUri(String uri) {\n        this.uri = uri;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user10586382"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1638891817,"creation_date":1638891817,"answer_id":70263048,"question_id":70256123,"body_markdown":"I solved it by adding @Data (Lombok) and make MyNode as inner static class. You can also add getter and setter if you don&#39;t use Lombok.\r\n\r\n    @ConfigurationProperties(prefix = &quot;main&quot;)\r\n    @PropertySource(value = &quot;classpath:mycustomfile.yml&quot;, factory = YamlPropertyLoaderFactory.class)\r\n    @Component\r\n    public class CustomProperties {\r\n        private List&lt;MyNode&gt; nodes;\r\n    \r\n        @Data\r\n        public static class MyNode {\r\n            private String label, id, uri; \r\n        }\r\n    }","title":"Load/Map array of object with Spring @PropertySource","body":"<p>I solved it by adding @Data (Lombok) and make MyNode as inner static class. You can also add getter and setter if you don't use Lombok.</p>\n<pre><code>@ConfigurationProperties(prefix = &quot;main&quot;)\n@PropertySource(value = &quot;classpath:mycustomfile.yml&quot;, factory = YamlPropertyLoaderFactory.class)\n@Component\npublic class CustomProperties {\n    private List&lt;MyNode&gt; nodes;\n\n    @Data\n    public static class MyNode {\n        private String label, id, uri; \n    }\n}\n</code></pre>\n"}],"owner":{"display_name":"user10586382"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":926,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70263048,"answer_count":2,"score":0,"last_activity_date":1638893611,"creation_date":1638860907,"question_id":70256123,"body_markdown":"I would like to read the array in the YAML file in java spring. I don&#39;t know if it&#39;s possible to use an array of objects.\r\nHere is the content of the YAML:\r\n\r\n    main:\r\n       nodes:\r\n            -\r\n                 label: &quot;My label&quot;\r\n                 id: &quot;My label id&quot;\r\n                 uri: &quot;&quot;\r\n            -\r\n                 label: &quot;My label&quot;\r\n                 id: &quot;My label id&quot;\r\n                 uri: &quot;&quot;\r\n\r\nAnd here is my component which loads the file:\r\n\r\n    public class MyNode {\r\n        String label, id, uri;\r\n    }\r\n    \r\n    @ConfigurationProperties(prefix = &quot;main&quot;)\r\n    @PropertySource(value = &quot;classpath:mycustomfile.yml&quot;, factory = YamlPropertyLoaderFactory.class)\r\n    @Component\r\n    public class CustomProperties {\r\n        private List&lt;MyNode&gt; nodes;\r\n    }\r\n\r\nAnd the YamlPropertySourceFactory \r\n\r\n    public class YamlPropertySourceFactory implements PropertySourceFactory {\r\n    \r\n        @Override\r\n        public PropertySource&lt;?&gt; createPropertySource(String name, EncodedResource encodedResource) \r\n          throws IOException {\r\n            YamlPropertiesFactoryBean factory = new YamlPropertiesFactoryBean();\r\n            factory.setResources(encodedResource.getResource());\r\n    \r\n            Properties properties = factory.getObject();\r\n    \r\n            return new PropertiesPropertySource(encodedResource.getResource().getFilename(), properties);\r\n        }\r\n    }\r\n\r\nWhen I run my application, nodes are null. I followed [Baeldun tutorial][1]\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-yaml-propertysource","title":"Load/Map array of object with Spring @PropertySource","body":"<p>I would like to read the array in the YAML file in java spring. I don't know if it's possible to use an array of objects.\nHere is the content of the YAML:</p>\n<pre><code>main:\n   nodes:\n        -\n             label: &quot;My label&quot;\n             id: &quot;My label id&quot;\n             uri: &quot;&quot;\n        -\n             label: &quot;My label&quot;\n             id: &quot;My label id&quot;\n             uri: &quot;&quot;\n</code></pre>\n<p>And here is my component which loads the file:</p>\n<pre><code>public class MyNode {\n    String label, id, uri;\n}\n\n@ConfigurationProperties(prefix = &quot;main&quot;)\n@PropertySource(value = &quot;classpath:mycustomfile.yml&quot;, factory = YamlPropertyLoaderFactory.class)\n@Component\npublic class CustomProperties {\n    private List&lt;MyNode&gt; nodes;\n}\n</code></pre>\n<p>And the YamlPropertySourceFactory</p>\n<pre><code>public class YamlPropertySourceFactory implements PropertySourceFactory {\n\n    @Override\n    public PropertySource&lt;?&gt; createPropertySource(String name, EncodedResource encodedResource) \n      throws IOException {\n        YamlPropertiesFactoryBean factory = new YamlPropertiesFactoryBean();\n        factory.setResources(encodedResource.getResource());\n\n        Properties properties = factory.getObject();\n\n        return new PropertiesPropertySource(encodedResource.getResource().getFilename(), properties);\n    }\n}\n</code></pre>\n<p>When I run my application, nodes are null. I followed <a href=\"https://www.baeldung.com/spring-yaml-propertysource\" rel=\"nofollow noreferrer\">Baeldun tutorial</a></p>\n"},{"tags":["java","java.util.scanner"],"comments":[{"owner":{"account_id":6712727,"reputation":640,"user_id":5175581,"display_name":"Ewan Brown"},"score":0,"creation_date":1638892774,"post_id":70263249,"comment_id":124205883,"body_markdown":"What is the value of a?","body":"What is the value of a?"},{"owner":{"display_name":"user6073886"},"score":3,"creation_date":1638892798,"post_id":70263249,"comment_id":124205895,"body_markdown":"`a.equals(&quot;skels&quot;) || a.equals(&quot;iceS&quot;) || ....` - You need to use the `||` operator on the booleans that the equals method returns, not on the Strings that you pass into the method","body":"<code>a.equals(&quot;skels&quot;) || a.equals(&quot;iceS&quot;) || ....</code> - You need to use the <code>||</code> operator on the booleans that the equals method returns, not on the Strings that you pass into the method"},{"owner":{"account_id":1441481,"reputation":10825,"user_id":1361506,"display_name":"azurefrog"},"score":0,"creation_date":1638892817,"post_id":70263249,"comment_id":124205903,"body_markdown":"Strings aren&#39;t boolean values, so you cannot compare them with `||`.","body":"Strings aren&#39;t boolean values, so you cannot compare them with <code>||</code>."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1638893080,"post_id":70263249,"comment_id":124206013,"body_markdown":"See [here](https://stackoverflow.com/questions/37330551/how-to-check-whether-a-liststring-contains-a-specific-string) for a few ideas on how to do it properly.","body":"See <a href=\"https://stackoverflow.com/questions/37330551/how-to-check-whether-a-liststring-contains-a-specific-string\">here</a> for a few ideas on how to do it properly."}],"answers":[{"tags":[],"owner":{"account_id":18135174,"reputation":375,"user_id":13189807,"display_name":"verity"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638892825,"creation_date":1638892825,"answer_id":70263278,"question_id":70263249,"body_markdown":"you need to call the `equals` methode multiple times and move the `||` out of the `equals` call, like this:\r\n\r\n    if(a.equals(&quot;skels&quot;) || a.equals(&quot;iceS&quot;) || a.equals(&quot;fireS&quot;) || a.equals(&quot;elecS&quot;) || a.equals(&quot;healS&quot;)) {\r\n        card1 = 1;\r\n    }","title":"Is there a reason this won&#39;t work? I have the || operators right, can you compare user inputted strings using the ||?","body":"<p>you need to call the <code>equals</code> methode multiple times and move the <code>||</code> out of the <code>equals</code> call, like this:</p>\n<pre><code>if(a.equals(&quot;skels&quot;) || a.equals(&quot;iceS&quot;) || a.equals(&quot;fireS&quot;) || a.equals(&quot;elecS&quot;) || a.equals(&quot;healS&quot;)) {\n    card1 = 1;\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user14978390"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1638893490,"creation_date":1638892850,"answer_id":70263284,"question_id":70263249,"body_markdown":"A value cannot be two values, if that makes sense.\r\n\r\nequals takes one value, and the operator `||` is a logical or that takes two booleans.\r\n\r\nYou are using it in a wrong context.\r\n\r\n**Elaboration**\r\n\r\n    String a = &quot;Hello&quot;; //does mean, that a has now the value &quot;Hello&quot;\r\n\r\nIt can be used as a parameter, for example in the equals-Method:\r\n\r\n    boolean result1 = a.equals(&quot;Hello&quot;); //or\r\n    boolean result2 = &quot;Hello&quot;.equals(a);\r\nBoth of these uses of equals take one String and return one boolean.\r\n\r\nYou can also write something like \r\n\r\n    boolean b = &quot;Hello&quot;.equals(&quot;World&quot;) || &quot;Hello&quot;.equals(a);\r\n\r\nWhich would set the value of `b` to `true`, and not `false or true`.\r\n\r\nWhy?\r\n\r\n - `&quot;Hello&quot;.equals(&quot;World&quot;)` is false \r\n - `&quot;Hello&quot;.equals(a)` is true \r\n - `false || true` is true\r\n\r\nThe `||` operator (just as `&amp;&amp;` and `^`) works in a boolean context, where only booleans can be compared.\r\n\r\nWriting smth like:\r\n`String a = &quot;Hello&quot; || &quot;World&quot;;` makes no sense, cause neither are &quot;Hello&quot; or &quot;World&quot; true or false. They are Strings.\r\n\r\nWith that in mind, you can compare and use multiple equals statements in a boolean expression; Because they return booleans, which these operators can work with.","title":"Is there a reason this won&#39;t work? I have the || operators right, can you compare user inputted strings using the ||?","body":"<p>A value cannot be two values, if that makes sense.</p>\n<p>equals takes one value, and the operator <code>||</code> is a logical or that takes two booleans.</p>\n<p>You are using it in a wrong context.</p>\n<p><strong>Elaboration</strong></p>\n<pre><code>String a = &quot;Hello&quot;; //does mean, that a has now the value &quot;Hello&quot;\n</code></pre>\n<p>It can be used as a parameter, for example in the equals-Method:</p>\n<pre><code>boolean result1 = a.equals(&quot;Hello&quot;); //or\nboolean result2 = &quot;Hello&quot;.equals(a);\n</code></pre>\n<p>Both of these uses of equals take one String and return one boolean.</p>\n<p>You can also write something like</p>\n<pre><code>boolean b = &quot;Hello&quot;.equals(&quot;World&quot;) || &quot;Hello&quot;.equals(a);\n</code></pre>\n<p>Which would set the value of <code>b</code> to <code>true</code>, and not <code>false or true</code>.</p>\n<p>Why?</p>\n<ul>\n<li><code>&quot;Hello&quot;.equals(&quot;World&quot;)</code> is false</li>\n<li><code>&quot;Hello&quot;.equals(a)</code> is true</li>\n<li><code>false || true</code> is true</li>\n</ul>\n<p>The <code>||</code> operator (just as <code>&amp;&amp;</code> and <code>^</code>) works in a boolean context, where only booleans can be compared.</p>\n<p>Writing smth like:\n<code>String a = &quot;Hello&quot; || &quot;World&quot;;</code> makes no sense, cause neither are &quot;Hello&quot; or &quot;World&quot; true or false. They are Strings.</p>\n<p>With that in mind, you can compare and use multiple equals statements in a boolean expression; Because they return booleans, which these operators can work with.</p>\n"}],"owner":{"account_id":23576845,"reputation":11,"user_id":17616409,"display_name":"Houston Forbes"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1638893490,"creation_date":1638892659,"question_id":70263249,"body_markdown":"It says &quot;error: bad operand types for binary operator &#39;||&#39;&quot;\r\n\r\n    if(a.equals(&quot;skels&quot; || &quot;iceS&quot; || &quot;fireS&quot; || &quot;elecS&quot; || &quot;healS&quot;)) {\r\n        card1 = 1;\r\n    } ","title":"Is there a reason this won&#39;t work? I have the || operators right, can you compare user inputted strings using the ||?","body":"<p>It says &quot;error: bad operand types for binary operator '||'&quot;</p>\n<pre><code>if(a.equals(&quot;skels&quot; || &quot;iceS&quot; || &quot;fireS&quot; || &quot;elecS&quot; || &quot;healS&quot;)) {\n    card1 = 1;\n} \n</code></pre>\n"},{"tags":["java","spring","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":7932983,"reputation":1434,"user_id":5990117,"display_name":"Petr Aleksandrov"},"score":1,"creation_date":1638892541,"post_id":70263124,"comment_id":124205786,"body_markdown":"Does the `group` column exist in the DB?","body":"Does the <code>group</code> column exist in the DB?"},{"owner":{"account_id":19942283,"reputation":381,"user_id":14613787,"display_name":"Deepanshu Rathi"},"score":0,"creation_date":1638893850,"post_id":70263124,"comment_id":124206295,"body_markdown":"group is a reserved keyword in mysql, would suggest naming it nutrientGroup or something","body":"group is a reserved keyword in mysql, would suggest naming it nutrientGroup or something"}],"answers":[{"tags":[],"owner":{"account_id":1901420,"reputation":3763,"user_id":1717210,"display_name":"TacheDeChoco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1638893409,"creation_date":1638893409,"answer_id":70263419,"question_id":70263124,"body_markdown":"A possible reason could be that &#39;group&#39; is a reserved word (think about &quot;group by&quot; expressions).\r\nYou may give a try to this: enclose the column name within backticks\r\n\r\n\r\n    @Column(name=&quot;`group`&quot;)\r\n    private Group group;\r\n\r\nIn JPA 2.0, the syntax is a bit different:\r\n\r\n    @Column(name=&quot;\\&quot;group\\&quot;&quot;)\r\n\r\nand see it this works better.","title":"Saving JPA @Enumerated value into the database","body":"<p>A possible reason could be that 'group' is a reserved word (think about &quot;group by&quot; expressions).\nYou may give a try to this: enclose the column name within backticks</p>\n<pre><code>@Column(name=&quot;`group`&quot;)\nprivate Group group;\n</code></pre>\n<p>In JPA 2.0, the syntax is a bit different:</p>\n<pre><code>@Column(name=&quot;\\&quot;group\\&quot;&quot;)\n</code></pre>\n<p>and see it this works better.</p>\n"}],"owner":{"account_id":5361744,"reputation":63,"user_id":4272784,"display_name":"Piotr Chabros"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70263419,"answer_count":1,"score":0,"last_activity_date":1638893409,"creation_date":1638892157,"question_id":70263124,"body_markdown":"I am trying to save @Enumerated value into the database:\r\n\r\n```\r\n@Entity\r\npublic class Macronutrient {\r\n\r\n    public enum Group {\r\n        CARBOHYDRATE, PROTEIN, FAT\r\n    }\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Size(min = 3, max = 255)\r\n    @NotBlank\r\n    @Column(unique = true)\r\n    private String name;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    private Group group;\r\n\r\n    //getters and setters\r\n\r\n}\r\n```\r\n\r\nI am sending PATCH request to modify existing Macronutrient:\r\n```\r\nPATCH /macronutrients\r\n{\r\n    &quot;id&quot;: 1,\r\n    &quot;name&quot;: &quot;Macronutrient&quot;,\r\n    &quot;group&quot;: &quot;CARBOHYDRATE&quot;\r\n}\r\n```\r\n\r\nThe code responsible for handling the update:\r\n\r\n```\r\npublic Macronutrient patchMacronutrient(Macronutrient macronutrient) {\r\n    ...\r\n    if (Objects.nonNull(macronutrient.getGroup())) {\r\n        existingMacronutrient.setGroup(macronutrient.getGroup());\r\n    }\r\n    ...\r\n}\r\n```\r\n\r\nThe response I am getting:\r\n**ERROR: syntax error at or near &quot;group&quot;**\r\n\r\n```\r\nHibernate: \r\n    update\r\n        public.macronutrient \r\n    set\r\n        \r\n    group=?,\r\n    name=? where\r\n        id=?\r\n```\r\n\r\nIf I DON&#39;T set the `group` property on Macronutrient then it saved properly.\r\nPlease help!","title":"Saving JPA @Enumerated value into the database","body":"<p>I am trying to save @Enumerated value into the database:</p>\n<pre><code>@Entity\npublic class Macronutrient {\n\n    public enum Group {\n        CARBOHYDRATE, PROTEIN, FAT\n    }\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Size(min = 3, max = 255)\n    @NotBlank\n    @Column(unique = true)\n    private String name;\n\n    @Enumerated(EnumType.STRING)\n    private Group group;\n\n    //getters and setters\n\n}\n</code></pre>\n<p>I am sending PATCH request to modify existing Macronutrient:</p>\n<pre><code>PATCH /macronutrients\n{\n    &quot;id&quot;: 1,\n    &quot;name&quot;: &quot;Macronutrient&quot;,\n    &quot;group&quot;: &quot;CARBOHYDRATE&quot;\n}\n</code></pre>\n<p>The code responsible for handling the update:</p>\n<pre><code>public Macronutrient patchMacronutrient(Macronutrient macronutrient) {\n    ...\n    if (Objects.nonNull(macronutrient.getGroup())) {\n        existingMacronutrient.setGroup(macronutrient.getGroup());\n    }\n    ...\n}\n</code></pre>\n<p>The response I am getting:\n<strong>ERROR: syntax error at or near &quot;group&quot;</strong></p>\n<pre><code>Hibernate: \n    update\n        public.macronutrient \n    set\n        \n    group=?,\n    name=? where\n        id=?\n</code></pre>\n<p>If I DON'T set the <code>group</code> property on Macronutrient then it saved properly.\nPlease help!</p>\n"},{"tags":["java","c","java-native-interface","jmh"],"comments":[{"owner":{"account_id":769702,"reputation":5530,"user_id":1061193,"accept_rate":83,"display_name":"drum"},"score":0,"creation_date":1638321167,"post_id":70174730,"comment_id":124056255,"body_markdown":"Are you able to reduce and simplify your question and code to the minimum necessary to reproduce it?","body":"Are you able to reduce and simplify your question and code to the minimum necessary to reproduce it?"},{"owner":{"account_id":22137971,"reputation":36,"user_id":16388401,"display_name":"Tim Erdar"},"score":0,"creation_date":1638364838,"post_id":70174730,"comment_id":124067766,"body_markdown":"I don&#39;t know which parts of the code are safely removable to get a minimum working example because I don&#39;t know if the problem is in JMH, JNI or anywhere else.","body":"I don&#39;t know which parts of the code are safely removable to get a minimum working example because I don&#39;t know if the problem is in JMH, JNI or anywhere else."},{"owner":{"account_id":22137971,"reputation":36,"user_id":16388401,"display_name":"Tim Erdar"},"score":0,"creation_date":1638795464,"post_id":70174730,"comment_id":124175178,"body_markdown":"I&#39;ve provided a minimum necessary example below.","body":"I&#39;ve provided a minimum necessary example below."}],"answers":[{"tags":[],"owner":{"account_id":292208,"reputation":10665,"user_id":2245707,"accept_rate":17,"display_name":"pveentjer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638344130,"creation_date":1638343801,"answer_id":70180434,"question_id":70174730,"body_markdown":"I ran the example in my IDE (got rid of the native stuff). And it seems to be working correctly. \r\n\r\nSo first the setup is called, then the benchmark, and then the teardown. This is the expected sequential flow you normally want to have. So I don&#39;t see the problem.\r\n\r\nI do see some concurrency problems btw. \r\n\r\n```\r\n        synchronized (PowerGadgetProfiler.profilerLock){\r\n            try {\r\n                System.out.println(&quot;THREAD &quot; + Thread.currentThread().getId() + &quot; WAITS FOR PROFILER LOCK&quot;);\r\n                PowerGadgetProfiler.profilerLock.wait();\r\n                PowerGadgetProfiler.running = true;\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n```\r\n\r\nThe profilerLock wait can spuriously fail, so normally this needs to be called in a loop. Also normally you wait for a condition like profiler running; but in this case, you are setting the condition.\r\n\r\nSo I would expect something like this:\r\n\r\n```\r\nsynchronized (PowerGadgetProfiler.profilerLock){\r\n      while(!PowerGadgetProfiler.running){             \r\n          PowerGadgetProfiler.profilerLock.wait();    \r\n      }\r\n}\r\n```\r\n\r\nAnd I would update `PowerGadgetProfiler.running` like this:\r\n\r\n```\r\npublic static void startProfiling(){\r\n    synchronized(profilerLock) {\r\n        PowerGadgetProfiler.running=true;\r\n        profilerLock.notifyAll();\r\n    } \r\n```\r\n\r\nSimilar fixes should be applied when you wait for the termination of the profiler. ","title":"Why is my native JNI code running sequential instead of concurrent?","body":"<p>I ran the example in my IDE (got rid of the native stuff). And it seems to be working correctly.</p>\n<p>So first the setup is called, then the benchmark, and then the teardown. This is the expected sequential flow you normally want to have. So I don't see the problem.</p>\n<p>I do see some concurrency problems btw.</p>\n<pre><code>        synchronized (PowerGadgetProfiler.profilerLock){\n            try {\n                System.out.println(&quot;THREAD &quot; + Thread.currentThread().getId() + &quot; WAITS FOR PROFILER LOCK&quot;);\n                PowerGadgetProfiler.profilerLock.wait();\n                PowerGadgetProfiler.running = true;\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n</code></pre>\n<p>The profilerLock wait can spuriously fail, so normally this needs to be called in a loop. Also normally you wait for a condition like profiler running; but in this case, you are setting the condition.</p>\n<p>So I would expect something like this:</p>\n<pre><code>synchronized (PowerGadgetProfiler.profilerLock){\n      while(!PowerGadgetProfiler.running){             \n          PowerGadgetProfiler.profilerLock.wait();    \n      }\n}\n</code></pre>\n<p>And I would update <code>PowerGadgetProfiler.running</code> like this:</p>\n<pre><code>public static void startProfiling(){\n    synchronized(profilerLock) {\n        PowerGadgetProfiler.running=true;\n        profilerLock.notifyAll();\n    } \n</code></pre>\n<p>Similar fixes should be applied when you wait for the termination of the profiler.</p>\n"},{"tags":[],"owner":{"account_id":2690669,"reputation":18637,"user_id":2613885,"display_name":"Aleksey Shipilev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638525519,"creation_date":1638525519,"answer_id":70212423,"question_id":70174730,"body_markdown":"You cannot block in `@Setup`, as it would be called by the benchmark thread, which would never get to `@Benchmark` body:\r\n\r\n```\r\n    @Setup(Level.Trial)\r\n    public void initializeProfilerThread() {\r\n        ProfilerThread profilerThread = new ProfilerThread();\r\n        profilerThread.start();\r\n        synchronized (PowerGadgetProfiler.profilerLock){\r\n            try {\r\n                PowerGadgetProfiler.profilerLock.wait(); // &lt;---- HERE\r\n                PowerGadgetProfiler.running = true;\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\nThe only way this might work is by accident: in a multi-threaded benchmark, some thread would eventually get to `notify` this thread.\r\n\r\nBut all this looks unnecessary. JMH would guarantee only one thread is calling `@Setup` for `@State(Benchmark)`, which means all this can be simplified to:\r\n\r\n```\r\n@State(Scope.Benchmark)\r\npublic class BenchmarkContainer {\r\n\r\n    Thread profilerThread;\r\n\r\n    @Setup(Level.Trial)\r\n    public void startProfiling() {\r\n        profilerThread = new ProfilerThread();\r\n        profilerThread.start();\r\n        profilerThread.running = true;\r\n    }\r\n\r\n    @TearDown(Level.Trial)\r\n    public void stopProfiling(){\r\n        profilerThread.running = false;\r\n        profilerThread.join();\r\n    }\r\n```\r\n\r\nIf you want more answers, provide the MCVE.","title":"Why is my native JNI code running sequential instead of concurrent?","body":"<p>You cannot block in <code>@Setup</code>, as it would be called by the benchmark thread, which would never get to <code>@Benchmark</code> body:</p>\n<pre><code>    @Setup(Level.Trial)\n    public void initializeProfilerThread() {\n        ProfilerThread profilerThread = new ProfilerThread();\n        profilerThread.start();\n        synchronized (PowerGadgetProfiler.profilerLock){\n            try {\n                PowerGadgetProfiler.profilerLock.wait(); // &lt;---- HERE\n                PowerGadgetProfiler.running = true;\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n</code></pre>\n<p>The only way this might work is by accident: in a multi-threaded benchmark, some thread would eventually get to <code>notify</code> this thread.</p>\n<p>But all this looks unnecessary. JMH would guarantee only one thread is calling <code>@Setup</code> for <code>@State(Benchmark)</code>, which means all this can be simplified to:</p>\n<pre><code>@State(Scope.Benchmark)\npublic class BenchmarkContainer {\n\n    Thread profilerThread;\n\n    @Setup(Level.Trial)\n    public void startProfiling() {\n        profilerThread = new ProfilerThread();\n        profilerThread.start();\n        profilerThread.running = true;\n    }\n\n    @TearDown(Level.Trial)\n    public void stopProfiling(){\n        profilerThread.running = false;\n        profilerThread.join();\n    }\n</code></pre>\n<p>If you want more answers, provide the MCVE.</p>\n"},{"tags":[],"owner":{"account_id":22137971,"reputation":36,"user_id":16388401,"display_name":"Tim Erdar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638893246,"creation_date":1638893246,"answer_id":70263380,"question_id":70174730,"body_markdown":"I have finally uncovered the mystery behind the &#39;&#39;strange&#39;&#39; behavior of my program. The truth is, that the program works perfectly fine, but the `printf` statements in the native C code are queued up and executed all at once at the end of all benchmarks.\r\n\r\n**What did I do to uncover that?**\r\n\r\nI added something like a back coupling (or feedback) mechanism to my native &quot;peep&quot; method. Instead of just printing something via `printf`, the method calls a function called `backCoupledPeep` in the Java code which does exactly the same like the &quot;old&quot; peep, but via `System.out.println`.\r\n\r\n**Important code fractions:**\r\n\r\n*PowerGadgetProfiler.java*\r\n\r\n```java\r\npackage Profiling;\r\n\r\n...\r\n\r\npublic class PowerGadgetProfiler {\r\n\r\n...\r\n\r\n  public static void backCoupledPeep(){\r\n    System.out.println(&quot;BACKCOUPLED PEEP TRIGGERED FROM NATIVE CODE&quot;);\r\n  }\r\n\r\n}\r\n```\r\n\r\n*Profiling_PowerGadgetProfiler.c*\r\n\r\n```c\r\n...\r\n\r\nJNIEXPORT void JNICALL Java_Profiling_PowerGadgetProfiler_peep\r\n  (JNIEnv *env, jclass thisClass)\r\n  {\r\n    uint64_t tid;\r\n    pthread_threadid_np(NULL, &amp;tid);\r\n\r\n    jmethodID mid = (*env)-&gt;GetStaticMethodID(env, thisClass, &quot;backCoupledPeep&quot;, &quot;()V&quot;);\r\n\r\n    if(mid != NULL)\r\n    {\r\n        (*env)-&gt;CallStaticVoidMethod(env, thisClass, mid);\r\n    }\r\n\r\n    printf(&quot;THREAD %llu NATIVE PEEP\\n&quot;, tid);\r\n  }\r\n```\r\n\r\n**Console output:**\r\n\r\n```\r\n# JMH version: 1.32\r\n# VM version: JDK 14.0.1, OpenJDK 64-Bit Server VM, 14.0.1+7\r\n# VM invoker: /Users/timerdar/Library/Java/JavaVirtualMachines/openjdk-14.0.1/Contents/Home/bin/java\r\n# VM options: -Djava.library.path=/Users/timerdar/IdeaProjects/microbenchmark_test/src/main/java/Profiling -javaagent:/Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar=61242:/Applications/IntelliJ IDEA CE.app/Contents/bin -Dfile.encoding=UTF-8\r\n# Blackhole mode: full + dont-inline hint\r\n# Warmup: 5 iterations, 10 s each\r\n# Measurement: 5 iterations, 10 s each\r\n# Timeout: 10 min per iteration\r\n# Threads: 1 thread, will synchronize iterations\r\n# Benchmark mode: Throughput, ops/time\r\n# Benchmark: BenchmarkContainers.BenchmarkContainer.geoSum\r\n# Parameters: (upperBound = 1)\r\n\r\n# Run progress: 0,00% complete, ETA 00:06:40\r\n# Fork: N/A, test runs in the host VM\r\n# *** WARNING: Non-forked runs may silently omit JVM options, mess up profilers, disable compiler hints, etc. ***\r\n# *** WARNING: Use non-forked runs only for debugging purposes, not for actual performance runs. ***\r\n# Warmup Iteration   1: STARTING PROFILING IN PROFILER THREAD\r\nTHREAD 14 LIBRARY LOADED SUCCESSFULLY\r\nBACKCOUPLED PEEP TRIGGERED FROM NATIVE CODE &lt;- correct/desired occurrence\r\nMOCK PEEP\r\n297967165,801 ops/s\r\n# Warmup Iteration   2: 335669073,439 ops/s\r\n# Warmup Iteration   3: 293700200,462 ops/s\r\n# Warmup Iteration   4: 294345901,793 ops/s\r\n# Warmup Iteration   5: 288535310,404 ops/s\r\nIteration   1: 291056885,946 ops/s\r\nIteration   2: 289043398,600 ops/s\r\nIteration   3: 290960426,836 ops/s\r\nIteration   4: 295573154,239 ops/s\r\nIteration   5: BACKCOUPLED PEEP TRIGGERED FROM NATIVE CODE &lt;- correct/desired occurrence\r\nMOCK PEEP\r\n295093250,001 ops/s\r\n\r\nResult &quot;BenchmarkContainers.BenchmarkContainer.geoSum&quot;:\r\n  292345423,124 &#177;(99.9%) 10967697,488 ops/s [Average]\r\n  (min, avg, max) = (289043398,600, 292345423,124, 295573154,239), stdev = 2848276,208\r\n  CI (99.9%): [281377725,636, 303313120,612] (assumes normal distribution)\r\n\r\n...\r\n///\r\n/// all other benchmarks\r\n///\r\n...\r\n\r\n/// &quot;queued up&quot; printf&#39;s\r\nTHREAD 277532 NATIVE PEEP\r\nTHREAD 277532 NATIVE PEEP\r\nTHREAD 278012 NATIVE PEEP\r\nTHREAD 278012 NATIVE PEEP\r\nTHREAD 279212 NATIVE PEEP\r\nTHREAD 279212 NATIVE PEEP\r\nTHREAD 279758 NATIVE PEEP\r\nTHREAD 279758 NATIVE PEEP\r\n\r\nProcess finished with exit code 0\r\n\r\n```","title":"Why is my native JNI code running sequential instead of concurrent?","body":"<p>I have finally uncovered the mystery behind the ''strange'' behavior of my program. The truth is, that the program works perfectly fine, but the <code>printf</code> statements in the native C code are queued up and executed all at once at the end of all benchmarks.</p>\n<p><strong>What did I do to uncover that?</strong></p>\n<p>I added something like a back coupling (or feedback) mechanism to my native &quot;peep&quot; method. Instead of just printing something via <code>printf</code>, the method calls a function called <code>backCoupledPeep</code> in the Java code which does exactly the same like the &quot;old&quot; peep, but via <code>System.out.println</code>.</p>\n<p><strong>Important code fractions:</strong></p>\n<p><em>PowerGadgetProfiler.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>package Profiling;\n\n...\n\npublic class PowerGadgetProfiler {\n\n...\n\n  public static void backCoupledPeep(){\n    System.out.println(&quot;BACKCOUPLED PEEP TRIGGERED FROM NATIVE CODE&quot;);\n  }\n\n}\n</code></pre>\n<p><em>Profiling_PowerGadgetProfiler.c</em></p>\n<pre class=\"lang-c prettyprint-override\"><code>...\n\nJNIEXPORT void JNICALL Java_Profiling_PowerGadgetProfiler_peep\n  (JNIEnv *env, jclass thisClass)\n  {\n    uint64_t tid;\n    pthread_threadid_np(NULL, &amp;tid);\n\n    jmethodID mid = (*env)-&gt;GetStaticMethodID(env, thisClass, &quot;backCoupledPeep&quot;, &quot;()V&quot;);\n\n    if(mid != NULL)\n    {\n        (*env)-&gt;CallStaticVoidMethod(env, thisClass, mid);\n    }\n\n    printf(&quot;THREAD %llu NATIVE PEEP\\n&quot;, tid);\n  }\n</code></pre>\n<p><strong>Console output:</strong></p>\n<pre><code># JMH version: 1.32\n# VM version: JDK 14.0.1, OpenJDK 64-Bit Server VM, 14.0.1+7\n# VM invoker: /Users/timerdar/Library/Java/JavaVirtualMachines/openjdk-14.0.1/Contents/Home/bin/java\n# VM options: -Djava.library.path=/Users/timerdar/IdeaProjects/microbenchmark_test/src/main/java/Profiling -javaagent:/Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar=61242:/Applications/IntelliJ IDEA CE.app/Contents/bin -Dfile.encoding=UTF-8\n# Blackhole mode: full + dont-inline hint\n# Warmup: 5 iterations, 10 s each\n# Measurement: 5 iterations, 10 s each\n# Timeout: 10 min per iteration\n# Threads: 1 thread, will synchronize iterations\n# Benchmark mode: Throughput, ops/time\n# Benchmark: BenchmarkContainers.BenchmarkContainer.geoSum\n# Parameters: (upperBound = 1)\n\n# Run progress: 0,00% complete, ETA 00:06:40\n# Fork: N/A, test runs in the host VM\n# *** WARNING: Non-forked runs may silently omit JVM options, mess up profilers, disable compiler hints, etc. ***\n# *** WARNING: Use non-forked runs only for debugging purposes, not for actual performance runs. ***\n# Warmup Iteration   1: STARTING PROFILING IN PROFILER THREAD\nTHREAD 14 LIBRARY LOADED SUCCESSFULLY\nBACKCOUPLED PEEP TRIGGERED FROM NATIVE CODE &lt;- correct/desired occurrence\nMOCK PEEP\n297967165,801 ops/s\n# Warmup Iteration   2: 335669073,439 ops/s\n# Warmup Iteration   3: 293700200,462 ops/s\n# Warmup Iteration   4: 294345901,793 ops/s\n# Warmup Iteration   5: 288535310,404 ops/s\nIteration   1: 291056885,946 ops/s\nIteration   2: 289043398,600 ops/s\nIteration   3: 290960426,836 ops/s\nIteration   4: 295573154,239 ops/s\nIteration   5: BACKCOUPLED PEEP TRIGGERED FROM NATIVE CODE &lt;- correct/desired occurrence\nMOCK PEEP\n295093250,001 ops/s\n\nResult &quot;BenchmarkContainers.BenchmarkContainer.geoSum&quot;:\n  292345423,124 ±(99.9%) 10967697,488 ops/s [Average]\n  (min, avg, max) = (289043398,600, 292345423,124, 295573154,239), stdev = 2848276,208\n  CI (99.9%): [281377725,636, 303313120,612] (assumes normal distribution)\n\n...\n///\n/// all other benchmarks\n///\n...\n\n/// &quot;queued up&quot; printf's\nTHREAD 277532 NATIVE PEEP\nTHREAD 277532 NATIVE PEEP\nTHREAD 278012 NATIVE PEEP\nTHREAD 278012 NATIVE PEEP\nTHREAD 279212 NATIVE PEEP\nTHREAD 279212 NATIVE PEEP\nTHREAD 279758 NATIVE PEEP\nTHREAD 279758 NATIVE PEEP\n\nProcess finished with exit code 0\n\n</code></pre>\n"}],"owner":{"account_id":22137971,"reputation":36,"user_id":16388401,"display_name":"Tim Erdar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":249,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1638893246,"creation_date":1638299100,"question_id":70174730,"body_markdown":"## Original problem (with full code) ##\r\n\r\n(I kept the original full code alive because the answers below are related to this full code.)\r\n\r\nI am currently working on my master thesis project about energy-efficient software engineering where I want to (coarsely) monitor the energy consumption behavior of different Java methods.\r\n\r\n**Short description of the desired behavior:** \r\n\r\nI have a set of JMH benchmarks that I want to profile with the [Intel Power Gadget API][1]. The desired behavior should look like that:\r\n\r\n - Before each method benchmark a new Thread, which will do the profiling part, should be created and started.\r\n- During the benchmark of the &quot;main&quot; thread, the profiler thread should read a sample until the JMH teardown method is executed.\r\n\r\n**My problem:** \r\n\r\nThe code executes sequentially instead of the desired concurrent execution. The &quot;profiling phase&quot; should begin in the JMH Setup and end in the JMH Teardown method.\r\n\r\n**My code:**\r\n\r\nThe code is still experimental and messy. Sorry for that. I still kept all of the debug print statements for logging purposes. \r\n\r\n*BenchmarkProgram.java:*\r\n\r\n```java\r\npackage Profiling;\r\n\r\npublic class BenchmarkProgram {\r\n\r\n    public static void main(String[] args) throws Exception{\r\n        org.openjdk.jmh.Main.main(args);\r\n    }\r\n}\r\n```\r\n\r\n*PowerGadgetProfiler.java:*\r\n\r\n```java\r\npackage Profiling;\r\n\r\n\r\nimport BenchmarkContainers.BenchmarkContainer;\r\n\r\nimport java.lang.reflect.Method;\r\nimport java.time.LocalDateTime;\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\n\r\npublic class PowerGadgetProfiler {\r\n\r\n    static{\r\n        System.loadLibrary(&quot;PowerGadgetProfiler&quot;);\r\n        System.out.println(&quot;THREAD &quot; + Thread.currentThread().getId() +  &quot; LIBRARY LOADED SUCCESSFULLY&quot;);\r\n    }\r\n\r\n    public static int profileId = 0;\r\n    static int methodCounter = 0;\r\n\r\n    private static final String folderName = buildFolderName();\r\n\r\n    public static final Object profilerLock = new Object();\r\n\r\n    public static volatile boolean running = false;\r\n\r\n    private static final PowerGadgetProfiler instance = new PowerGadgetProfiler();\r\n\r\n    private static String[] getBenchmarkMethodsInOrder(){\r\n        ArrayList&lt;String&gt; methodNames = new ArrayList&lt;&gt;();\r\n        Method[] methods = BenchmarkContainer.class.getMethods();\r\n        for (Method method : methods) {\r\n            String name = method.toString();\r\n            if(name.contains(&quot;BenchmarkContainer&quot;)\r\n            &amp;&amp; !name.contains(&quot;initializeProfilerThread&quot;)\r\n            &amp;&amp; !name.contains(&quot;stopProfiling&quot;)){\r\n                methodNames.add(method.getName());\r\n            }\r\n        }\r\n        String[] methodArray = methodNames.toArray(new String[0]);\r\n        Arrays.sort(methodArray);\r\n        System.out.println(&quot;THREAD &quot; + Thread.currentThread().getId() + &quot; METHODS: &quot; + Arrays.toString(methodArray));\r\n        return methodArray;\r\n    }\r\n\r\n    private static String buildFolderName(){\r\n        LocalDateTime timeStamp = LocalDateTime.now();\r\n        String result = &quot;/Users/timerdar/BM-&quot;;          // change when on other machine\r\n        result += Integer.toString(timeStamp.getYear());\r\n        result += Integer.toString(timeStamp.getMonthValue());\r\n        result += Integer.toString(timeStamp.getDayOfMonth());\r\n        result += Integer.toString(timeStamp.getHour());\r\n        result += Integer.toString(timeStamp.getMinute());\r\n        return result;\r\n    }\r\n\r\n    private static String buildFileName(){\r\n        return folderName + &quot;/&quot; + benchmarkMethods[methodCounter] + profileId + &quot;.csv&quot;;\r\n    }\r\n\r\n    private static final String[] benchmarkMethods = getBenchmarkMethodsInOrder();\r\n\r\n    private native void startProfiling(String fileName);\r\n\r\n    private native void readSample();\r\n\r\n    private native void stopProfiling();\r\n\r\n    public static void startProfiling(){\r\n        System.out.println(&quot;THREAD &quot; + Thread.currentThread().getId() + &quot; ENTERED START PROFILING&quot;);\r\n        synchronized(profilerLock) {\r\n            System.out.println(&quot;THREAD &quot; + Thread.currentThread().getId() + &quot; RELEASES PROFILER LOCK&quot;);\r\n            profilerLock.notify();\r\n        }\r\n        final String fileName = buildFileName();\r\n        instance.startProfiling(fileName);\r\n        System.out.println(&quot;THREAD &quot; + Thread.currentThread().getId() + &quot; CALLED PROFILE EXECUTION&quot;);\r\n        profileId++;\r\n        while(running){\r\n            getSample();\r\n        }\r\n        endProfiling();\r\n    }\r\n\r\n    private static void getSample(){\r\n        instance.readSample();\r\n    }\r\n\r\n    private static void endProfiling(){\r\n        System.out.println(&quot;THREAD &quot; + Thread.currentThread().getId() + &quot; ENTERED endProfiling()&quot;);\r\n        instance.stopProfiling();\r\n        System.out.println(&quot;JAVA THREAD &quot; + Thread.currentThread().getId() + &quot; CALLED NATIVE stopProfiling()&quot;);\r\n        methodCounter++;\r\n    }\r\n}\r\n```\r\n\r\n*BenchmarkContainer.java:*\r\n\r\nThis is just a really small subset of all benchmarks I have. I reduced the number of benchmarks to reduce the overhead while creating a proof-of-concept.\r\n\r\n```java\r\npackage BenchmarkContainers;\r\n\r\nimport Profiling.PowerGadgetProfiler;\r\nimport Profiling.ProfilerThread;\r\nimport org.openjdk.jmh.annotations.*;\r\n\r\nimport java.util.concurrent.TimeUnit;\r\n\r\n@State(Scope.Benchmark)\r\npublic class BenchmarkContainer {\r\n\r\n    //@Param({&quot;5&quot;, &quot;30&quot;,  &quot;210&quot;, &quot;1470&quot;})\r\n    @Param({&quot;1&quot;, &quot;2&quot;})\r\n    public int upperBound;\r\n\r\n    @Setup(Level.Trial)\r\n    public void initializeProfilerThread() {\r\n        System.out.println(&quot;THREAD &quot; + Thread.currentThread().getId() + &quot; ENTERED initializeProfilerThread()&quot;);\r\n        ProfilerThread profilerThread = new ProfilerThread();\r\n        profilerThread.start();\r\n        synchronized (PowerGadgetProfiler.profilerLock){\r\n            try {\r\n                System.out.println(&quot;THREAD &quot; + Thread.currentThread().getId() + &quot; WAITS FOR PROFILER LOCK&quot;);\r\n                PowerGadgetProfiler.profilerLock.wait();\r\n                PowerGadgetProfiler.running = true;\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n    @TearDown(Level.Trial)\r\n    public void stopProfiling(){\r\n        System.out.println(&quot;THREAD &quot; + Thread.currentThread().getId() + &quot; ENTERED TEARDOWN PROCEDURE&quot;);\r\n        synchronized (PowerGadgetProfiler.profilerLock){\r\n            PowerGadgetProfiler.running = false;\r\n        }\r\n    }\r\n\r\n    @Benchmark\r\n    @Fork(value = 1, warmups = 1)\r\n    @OutputTimeUnit(TimeUnit.NANOSECONDS)\r\n    @BenchmarkMode(Mode.AverageTime)\r\n    public void init(){\r\n        {\r\n\r\n        }\r\n    }\r\n\r\n    @Benchmark\r\n    @Fork(value = 1, warmups = 1)\r\n    @OutputTimeUnit(TimeUnit.NANOSECONDS)\r\n    @BenchmarkMode(Mode.AverageTime)\r\n    public int geoSum(){\r\n        int sum = 0;\r\n        for(int i = 0; i &lt;= upperBound; i++){\r\n            sum += i;\r\n        }\r\n        return sum;\r\n    }\r\n}\r\n```\r\n\r\n*ProfilerThread.java:*\r\n\r\n```java\r\npackage Profiling;\r\n\r\npublic class ProfilerThread extends Thread{\r\n\r\n    @Override\r\n    public void run() {\r\n        System.out.println(&quot;STARTING PROFILING IN PROFILER THREAD&quot;);\r\n        PowerGadgetProfiler.startProfiling();\r\n    }\r\n}\r\n```\r\n\r\n*Profiling_PowerGadgetProfiler.c:*\r\n\r\n```c\r\n#include &lt;jni.h&gt;\r\n#include &lt;stdio.h&gt;\r\n#include &lt;stdlib.h&gt;\r\n#include &lt;string.h&gt;\r\n#include &lt;unistd.h&gt;\r\n\r\n#include &lt;IntelPowerGadget/EnergyLib.h&gt;\r\n#include &lt;pthread.h&gt;\r\n\r\n#include &quot;Profiling_PowerGadgetProfiler.h&quot;\r\n\r\nJNIEXPORT void JNICALL Java_Profiling_PowerGadgetProfiler_startProfiling\r\n  (JNIEnv *env, jobject thisObject, jstring fileName)\r\n  {\r\n      uint64_t tid;\r\n      pthread_threadid_np(NULL, &amp;tid);\r\n      printf(&quot;THREAD %llu CALLED NATIVE startProfiling()\\n&quot;, tid);\r\n\r\n\r\n      IntelEnergyLibInitialize();\r\n\r\n      printf(&quot;NATIVE PROFILER INITIALIZED\\n&quot;);\r\n      char fileNameAsString[255];\r\n\r\n      const char *fileNameAsConstString = (*env)-&gt;GetStringUTFChars(env, fileName, 0);\r\n\r\n      strcpy(fileNameAsString, fileNameAsConstString);\r\n\r\n      printf(&quot;RESULTING FILE NAME: %s\\n&quot;, fileNameAsString);\r\n      printf(&quot;STARTING PROFILING IN NATIVE CODE\\n&quot;);\r\n\r\n      StartLog(fileNameAsString);\r\n\r\n  }\r\n\r\n\r\nJNIEXPORT void JNICALL Java_Profiling_PowerGadgetProfiler_readSample\r\n  (JNIEnv *env , jobject thisObject)\r\n{\r\n    ReadSample();\r\n}\r\n\r\nJNIEXPORT void JNICALL Java_Profiling_PowerGadgetProfiler_stopProfiling\r\n (JNIEnv* env, jobject thisObject)\r\n{\r\n    uint64_t tid;\r\n    pthread_threadid_np(NULL, &amp;tid);\r\n    printf(&quot;THREAD %llu CALLED NATIVE stopProfiling()\\n&quot;, tid);\r\n    printf(&quot;ENDING PROFILING IN NATIVE CODE AND WRITE TO FILE\\n&quot;);\r\n    StopLog();\r\n}\r\n```\r\n\r\n**Console output:**\r\n\r\nPlease don&#39;t worry about the mix of JMH and my outputs. This does not matter for me.\r\n\r\n```\r\n# JMH version: 1.32\r\n# VM version: JDK 14.0.1, OpenJDK 64-Bit Server VM, 14.0.1+7\r\n# VM invoker: /Users/timerdar/Library/Java/JavaVirtualMachines/openjdk-14.0.1/Contents/Home/bin/java\r\n# VM options: -Djava.library.path=/Users/timerdar/IdeaProjects/microbenchmark_test/src/main/java/Profiling -javaagent:/Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar=62464:/Applications/IntelliJ IDEA CE.app/Contents/bin -Dfile.encoding=UTF-8\r\n# Blackhole mode: full + dont-inline hint\r\n# Warmup: 5 iterations, 10 s each\r\n# Measurement: 5 iterations, 10 s each\r\n# Timeout: 10 min per iteration\r\n# Threads: 1 thread, will synchronize iterations\r\n# Benchmark mode: Average time, time/op\r\n# Benchmark: BenchmarkContainers.BenchmarkContainer.geoSum\r\n# Parameters: (upperBound = 1)\r\n\r\n# Run progress: 0,00% complete, ETA 00:13:20\r\n# Warmup Fork: 1 of 1\r\n# Warmup Iteration   1: THREAD 16 ENTERED initializeProfilerThread()\r\nSTARTING PROFILING IN PROFILER THREAD\r\nTHREAD 17 LIBRARY LOADED SUCCESSFULLY\r\nTHREAD 17 METHODS: [geoSum, init]\r\nTHREAD 16 WAITS FOR PROFILER LOCK\r\nTHREAD 17 ENTERED START PROFILING\r\nTHREAD 17 RELEASES PROFILER LOCK\r\nTHREAD 17 STARTING PROFILING IN PGP WITH PARAM VALUE: 1\r\nTHREAD 17 CALLED PROFILE EXECUTION\r\n6,152 ns/op\r\n# Warmup Iteration   2: 6,139 ns/op\r\n# Warmup Iteration   3: 5,688 ns/op\r\n# Warmup Iteration   4: 6,172 ns/op\r\n# Warmup Iteration   5: 6,525 ns/op\r\nIteration   1: 6,858 ns/op\r\nIteration   2: 7,265 ns/op\r\nIteration   3: 7,523 ns/op\r\nIteration   4: 7,494 ns/op\r\nIteration   5: THREAD 16 ENTERED TEARDOWN PROCEDURE\r\n7,776 ns/op\r\nTHREAD 17 ENTERED endProfiling()\r\nTHREAD 204730 CALLED NATIVE startProfiling()\r\nNATIVE PROFILER INITIALIZED\r\nRESULTING FILE NAME: /Users/timerdar/BM-202111301910/geoSum0.csv\r\nSTARTING PROFILING IN NATIVE CODE\r\nTHREAD 204730 CALLED NATIVE stopProfiling()\r\nENDING PROFILING IN NATIVE CODE AND WRITE TO FILE\r\n```\r\n\r\n**What I&#39;ve tried so far:**\r\n\r\n- I removed the control flow of the profiling from the native code into the Java code. Before I had a static variable in my native code which indicated the running state of the benchmark. The ```ReadSample()``` method was called until this variable swapped (other function in the C file).\r\n\r\n- I removed the ```synchronized``` keyword from the functions in ```PowerGadgetProfiler``` ```startProfiling```, ```getSample``` and ```endProfiling```\r\n\r\nThank you for your patience and I hope you can help me. \r\n\r\n\r\n## Minimum necessary code example to reproduce the problem: ##\r\n\r\nI have created a minimum working example to reduce the problem to it&#39;s main components.\r\n\r\n**The code:**\r\n\r\n*BenchmarkProgram.java*\r\n\r\n```java\r\npackage Profiling;\r\n\r\npublic class BenchmarkProgram {\r\n\r\n    public static void main(String[] args) throws Exception{\r\n        org.openjdk.jmh.Main.main(args);\r\n    }\r\n}\r\n```\r\n\r\n*BenchmarkContainer.java*\r\n\r\n```java\r\npackage BenchmarkContainers;\r\n\r\nimport Profiling.PowerGadgetProfiler;\r\nimport Profiling.ProfilerThread;\r\nimport org.openjdk.jmh.annotations.*;\r\n\r\n@State(Scope.Benchmark)\r\npublic class BenchmarkContainer {\r\n\r\n    @Param({&quot;1&quot;, &quot;2&quot;})\r\n    public int upperBound;\r\n\r\n    Thread profilerThread;\r\n\r\n    @Setup(Level.Trial)\r\n    public void initializeProfilerThread() {\r\n        profilerThread = new ProfilerThread();\r\n        profilerThread.start();\r\n        PowerGadgetProfiler.running = true;\r\n    }\r\n\r\n    @TearDown(Level.Trial)\r\n    public void stopProfiling() {\r\n        PowerGadgetProfiler.running = false;\r\n        try {\r\n            profilerThread.join();\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    @Benchmark\r\n    @Fork(0)\r\n    public void init() {\r\n        {\r\n\r\n        }\r\n    }\r\n\r\n    @Benchmark\r\n    @Fork(0)\r\n    public int geoSum() {\r\n        int sum = 0;\r\n        for (int i = 0; i &lt;= upperBound; i++) {\r\n            sum += i;\r\n        }\r\n        return sum;\r\n    }\r\n}\r\n```\r\n\r\n*PowerGadgetProfiler.java*\r\n\r\n```java\r\npackage Profiling;\r\n\r\npublic class PowerGadgetProfiler {\r\n\r\n    static {\r\n        System.loadLibrary(&quot;PowerGadgetProfiler&quot;);\r\n    }\r\n\r\n    public static volatile boolean running = false;\r\n\r\n    private static native void peep();\r\n\r\n    public static void startProfiling() {\r\n        peep();\r\n        System.out.println(&quot;MOCK PEEP&quot;);\r\n        while (running) {\r\n            getSample();\r\n        }\r\n        endProfiling();\r\n    }\r\n\r\n    private static void getSample() {\r\n        // mock sampling\r\n    }\r\n\r\n    private static void endProfiling() {\r\n        peep();\r\n        System.out.println(&quot;MOCK PEEP&quot;);\r\n    }\r\n}\r\n```\r\n\r\n*ProfilerThread.java*\r\n\r\n```java\r\npackage Profiling;\r\n\r\npublic class ProfilerThread extends Thread{\r\n\r\n    @Override\r\n    public void run() {\r\n        System.out.println(&quot;STARTING PROFILING IN PROFILER THREAD&quot;);\r\n        PowerGadgetProfiler.startProfiling();\r\n    }\r\n}\r\n```\r\n\r\n*Profiling_PowerGadgetProfiler.c*\r\n\r\n```c\r\n#include &lt;jni.h&gt;\r\n#include &lt;stdio.h&gt;\r\n#include &lt;stdlib.h&gt;\r\n#include &lt;unistd.h&gt;\r\n\r\n#include &lt;IntelPowerGadget/EnergyLib.h&gt;\r\n#include &lt;pthread.h&gt;\r\n\r\n#include &quot;Profiling_PowerGadgetProfiler.h&quot;\r\n\r\nJNIEXPORT void JNICALL Java_Profiling_PowerGadgetProfiler_peep\r\n  (JNIEnv *env, jclass thisClass)\r\n  {\r\n    uint64_t tid;\r\n    pthread_threadid_np(NULL, &amp;tid);\r\n    printf(&quot;THREAD %llu PEEP\\n&quot;, tid);\r\n  }\r\n\r\n```\r\n\r\n**The output:**\r\n\r\n```\r\n# JMH version: 1.32\r\n# VM version: JDK 14.0.1, OpenJDK 64-Bit Server VM, 14.0.1+7\r\n# VM invoker: /Users/timerdar/Library/Java/JavaVirtualMachines/openjdk-14.0.1/Contents/Home/bin/java\r\n# VM options: -Djava.library.path=/Users/timerdar/IdeaProjects/microbenchmark_test/src/main/java/Profiling -javaagent:/Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar=50458:/Applications/IntelliJ IDEA CE.app/Contents/bin -Dfile.encoding=UTF-8\r\n# Blackhole mode: full + dont-inline hint\r\n# Warmup: 5 iterations, 10 s each\r\n# Measurement: 5 iterations, 10 s each\r\n# Timeout: 10 min per iteration\r\n# Threads: 1 thread, will synchronize iterations\r\n# Benchmark mode: Throughput, ops/time\r\n# Benchmark: BenchmarkContainers.BenchmarkContainer.geoSum\r\n# Parameters: (upperBound = 1)\r\n\r\n# Run progress: 0,00% complete, ETA 00:06:40\r\n# Fork: N/A, test runs in the host VM\r\n# *** WARNING: Non-forked runs may silently omit JVM options, mess up profilers, disable compiler hints, etc. ***\r\n# *** WARNING: Use non-forked runs only for debugging purposes, not for actual performance runs. ***\r\n# Warmup Iteration   1: STARTING PROFILING IN PROFILER THREAD\r\nTHREAD 14 LIBRARY LOADED SUCCESSFULLY\r\nMOCK PEEP\r\n351509573,446 ops/s\r\n# Warmup Iteration   2: 368618416,430 ops/s\r\n# Warmup Iteration   3: 318780225,551 ops/s\r\n# Warmup Iteration   4: 316404930,396 ops/s\r\n# Warmup Iteration   5: 308587428,671 ops/s\r\nIteration   1: 307622321,475 ops/s\r\nIteration   2: 295849314,405 ops/s\r\nIteration   3: 310904513,944 ops/s\r\nIteration   4: 298409293,008 ops/s\r\nIteration   5: MOCK PEEP\r\n293730263,155 ops/s\r\n\r\nResult &quot;BenchmarkContainers.BenchmarkContainer.geoSum&quot;:\r\n  301303141,197 &#177;(99.9%) 29045283,861 ops/s [Average]\r\n  (min, avg, max) = (293730263,155, 301303141,197, 310904513,944), stdev = 7542967,981\r\n  CI (99.9%): [272257857,337, 330348425,058] (assumes normal distribution)\r\n\r\n\r\n# JMH version: 1.32\r\n# VM version: JDK 14.0.1, OpenJDK 64-Bit Server VM, 14.0.1+7\r\n# VM invoker: /Users/timerdar/Library/Java/JavaVirtualMachines/openjdk-14.0.1/Contents/Home/bin/java\r\n# VM options: -Djava.library.path=/Users/timerdar/IdeaProjects/microbenchmark_test/src/main/java/Profiling -javaagent:/Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar=50458:/Applications/IntelliJ IDEA CE.app/Contents/bin -Dfile.encoding=UTF-8\r\n# Blackhole mode: full + dont-inline hint\r\n# Warmup: 5 iterations, 10 s each\r\n# Measurement: 5 iterations, 10 s each\r\n# Timeout: 10 min per iteration\r\n# Threads: 1 thread, will synchronize iterations\r\n# Benchmark mode: Throughput, ops/time\r\n# Benchmark: BenchmarkContainers.BenchmarkContainer.geoSum\r\n# Parameters: (upperBound = 2)\r\n\r\n# Run progress: 25,00% complete, ETA 00:05:01\r\n# Fork: N/A, test runs in the host VM\r\n# *** WARNING: Non-forked runs may silently omit JVM options, mess up profilers, disable compiler hints, etc. ***\r\n# *** WARNING: Use non-forked runs only for debugging purposes, not for actual performance runs. ***\r\n# Warmup Iteration   1: STARTING PROFILING IN PROFILER THREAD\r\nMOCK PEEP\r\n250420430,065 ops/s\r\n# Warmup Iteration   2: 240512982,879 ops/s\r\n# Warmup Iteration   3: 234267496,579 ops/s\r\n# Warmup Iteration   4: 232677741,065 ops/s\r\n# Warmup Iteration   5: 225373803,499 ops/s\r\nIteration   1: 225697770,075 ops/s\r\nIteration   2: 233106892,737 ops/s\r\nIteration   3: 230332046,340 ops/s\r\nIteration   4: 220403129,274 ops/s\r\nIteration   5: MOCK PEEP\r\n222970983,188 ops/s\r\n\r\nResult &quot;BenchmarkContainers.BenchmarkContainer.geoSum&quot;:\r\n  226502164,323 &#177;(99.9%) 20064492,546 ops/s [Average]\r\n  (min, avg, max) = (220403129,274, 226502164,323, 233106892,737), stdev = 5210684,997\r\n  CI (99.9%): [206437671,777, 246566656,869] (assumes normal distribution)\r\n\r\n\r\n# JMH version: 1.32\r\n# VM version: JDK 14.0.1, OpenJDK 64-Bit Server VM, 14.0.1+7\r\n# VM invoker: /Users/timerdar/Library/Java/JavaVirtualMachines/openjdk-14.0.1/Contents/Home/bin/java\r\n# VM options: -Djava.library.path=/Users/timerdar/IdeaProjects/microbenchmark_test/src/main/java/Profiling -javaagent:/Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar=50458:/Applications/IntelliJ IDEA CE.app/Contents/bin -Dfile.encoding=UTF-8\r\n# Blackhole mode: full + dont-inline hint\r\n# Warmup: 5 iterations, 10 s each\r\n# Measurement: 5 iterations, 10 s each\r\n# Timeout: 10 min per iteration\r\n# Threads: 1 thread, will synchronize iterations\r\n# Benchmark mode: Throughput, ops/time\r\n# Benchmark: BenchmarkContainers.BenchmarkContainer.init\r\n# Parameters: (upperBound = 1)\r\n\r\n# Run progress: 50,00% complete, ETA 00:03:20\r\n# Fork: N/A, test runs in the host VM\r\n# *** WARNING: Non-forked runs may silently omit JVM options, mess up profilers, disable compiler hints, etc. ***\r\n# *** WARNING: Use non-forked runs only for debugging purposes, not for actual performance runs. ***\r\n# Warmup Iteration   1: STARTING PROFILING IN PROFILER THREAD\r\nMOCK PEEP\r\n1285734648,964 ops/s\r\n# Warmup Iteration   2: 1281687199,566 ops/s\r\n# Warmup Iteration   3: 1248636633,953 ops/s\r\n# Warmup Iteration   4: 1286229544,274 ops/s\r\n# Warmup Iteration   5: 1242773248,106 ops/s\r\nIteration   1: 1249716889,546 ops/s\r\nIteration   2: 1163957364,456 ops/s\r\nIteration   3: 1165338083,544 ops/s\r\nIteration   4: 1175806686,372 ops/s\r\nIteration   5: MOCK PEEP\r\n1206242463,819 ops/s\r\n\r\nResult &quot;BenchmarkContainers.BenchmarkContainer.init&quot;:\r\n  1192212297,547 &#177;(99.9%) 140077359,758 ops/s [Average]\r\n  (min, avg, max) = (1163957364,456, 1192212297,547, 1249716889,546), stdev = 36377645,494\r\n  CI (99.9%): [1052134937,790, 1332289657,305] (assumes normal distribution)\r\n\r\n\r\n# JMH version: 1.32\r\n# VM version: JDK 14.0.1, OpenJDK 64-Bit Server VM, 14.0.1+7\r\n# VM invoker: /Users/timerdar/Library/Java/JavaVirtualMachines/openjdk-14.0.1/Contents/Home/bin/java\r\n# VM options: -Djava.library.path=/Users/timerdar/IdeaProjects/microbenchmark_test/src/main/java/Profiling -javaagent:/Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar=50458:/Applications/IntelliJ IDEA CE.app/Contents/bin -Dfile.encoding=UTF-8\r\n# Blackhole mode: full + dont-inline hint\r\n# Warmup: 5 iterations, 10 s each\r\n# Measurement: 5 iterations, 10 s each\r\n# Timeout: 10 min per iteration\r\n# Threads: 1 thread, will synchronize iterations\r\n# Benchmark mode: Throughput, ops/time\r\n# Benchmark: BenchmarkContainers.BenchmarkContainer.init\r\n# Parameters: (upperBound = 2)\r\n\r\n# Run progress: 75,00% complete, ETA 00:01:40\r\n# Fork: N/A, test runs in the host VM\r\n# *** WARNING: Non-forked runs may silently omit JVM options, mess up profilers, disable compiler hints, etc. ***\r\n# *** WARNING: Use non-forked runs only for debugging purposes, not for actual performance runs. ***\r\n# Warmup Iteration   1: STARTING PROFILING IN PROFILER THREAD\r\nMOCK PEEP\r\n1167710836,896 ops/s\r\n# Warmup Iteration   2: 1206785568,628 ops/s\r\n# Warmup Iteration   3: 1160517470,177 ops/s\r\n# Warmup Iteration   4: 1192993000,343 ops/s\r\n# Warmup Iteration   5: 1198394027,257 ops/s\r\nIteration   1: 1158210173,102 ops/s\r\nIteration   2: 1169432730,215 ops/s\r\nIteration   3: 1070907177,608 ops/s\r\nIteration   4: 336332917,114 ops/s\r\nIteration   5: MOCK PEEP\r\n433452372,375 ops/s\r\n\r\nResult &quot;BenchmarkContainers.BenchmarkContainer.init&quot;:\r\n  833667074,083 &#177;(99.9%) 1589834232,333 ops/s [Average]\r\n  (min, avg, max) = (336332917,114, 833667074,083, 1169432730,215), stdev = 412874901,402\r\n  CI (99.9%): [≈ 0, 2423501306,415] (assumes normal distribution)\r\n\r\n\r\n# Run complete. Total time: 00:06:40\r\n\r\nREMEMBER: The numbers below are just data. To gain reusable insights, you need to follow up on\r\nwhy the numbers are the way they are. Use profilers (see -prof, -lprof), design factorial\r\nexperiments, perform baseline and negative tests that provide experimental control, make sure\r\nthe benchmarking environment is safe on JVM/OS/HW level, ask for reviews from the domain experts.\r\nDo not assume the numbers tell you what you want them to tell.\r\n\r\nBenchmark                                      (upperBound)   Mode  Cnt           Score            Error  Units\r\nBenchmarkContainers.BenchmarkContainer.geoSum             1  thrpt    5   301303141,197 &#177;   29045283,861  ops/s\r\nBenchmarkContainers.BenchmarkContainer.geoSum             2  thrpt    5   226502164,323 &#177;   20064492,546  ops/s\r\nBenchmarkContainers.BenchmarkContainer.init               1  thrpt    5  1192212297,547 &#177;  140077359,758  ops/s\r\nBenchmarkContainers.BenchmarkContainer.init               2  thrpt    5   833667074,083 &#177; 1589834232,333  ops/s\r\nTHREAD 62778 PEEP\r\nTHREAD 62778 PEEP\r\nTHREAD 63451 PEEP\r\nTHREAD 63451 PEEP\r\nTHREAD 63828 PEEP\r\nTHREAD 63828 PEEP\r\nTHREAD 64242 PEEP\r\nTHREAD 64242 PEEP\r\n\r\nProcess finished with exit code 0\r\n```\r\n\r\n**Expected behavior:**\r\nUsually I would expect the native code to execute first before the Java code continues running. But however, the program seems to queue up all code and then executes everything at once when the benchmark is finished.\r\n\r\nAs [this Stackoverflow Thread][2] says, the program usually should work as expected. But I am currently not able to identify the problem in my code.\r\n\r\nThe behavior I would expect from the program is described in the following diagram:\r\n\r\n[![Expected program flow][3]][3] \r\n\r\nI hope you are able to help me again.\r\n\r\n\r\n  [2]: https://stackoverflow.com/questions/38378901/jni-thread-model\r\n  [3]: https://i.stack.imgur.com/anT9z.jpg\r\n\r\n  [1]: https://www.intel.com/content/www/us/en/developer/articles/tool/power-gadget.html","title":"Why is my native JNI code running sequential instead of concurrent?","body":"<h2>Original problem (with full code)</h2>\n<p>(I kept the original full code alive because the answers below are related to this full code.)</p>\n<p>I am currently working on my master thesis project about energy-efficient software engineering where I want to (coarsely) monitor the energy consumption behavior of different Java methods.</p>\n<p><strong>Short description of the desired behavior:</strong></p>\n<p>I have a set of JMH benchmarks that I want to profile with the <a href=\"https://www.intel.com/content/www/us/en/developer/articles/tool/power-gadget.html\" rel=\"nofollow noreferrer\">Intel Power Gadget API</a>. The desired behavior should look like that:</p>\n<ul>\n<li>Before each method benchmark a new Thread, which will do the profiling part, should be created and started.</li>\n<li>During the benchmark of the &quot;main&quot; thread, the profiler thread should read a sample until the JMH teardown method is executed.</li>\n</ul>\n<p><strong>My problem:</strong></p>\n<p>The code executes sequentially instead of the desired concurrent execution. The &quot;profiling phase&quot; should begin in the JMH Setup and end in the JMH Teardown method.</p>\n<p><strong>My code:</strong></p>\n<p>The code is still experimental and messy. Sorry for that. I still kept all of the debug print statements for logging purposes.</p>\n<p><em>BenchmarkProgram.java:</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>package Profiling;\n\npublic class BenchmarkProgram {\n\n    public static void main(String[] args) throws Exception{\n        org.openjdk.jmh.Main.main(args);\n    }\n}\n</code></pre>\n<p><em>PowerGadgetProfiler.java:</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>package Profiling;\n\n\nimport BenchmarkContainers.BenchmarkContainer;\n\nimport java.lang.reflect.Method;\nimport java.time.LocalDateTime;\nimport java.util.ArrayList;\nimport java.util.Arrays;\n\npublic class PowerGadgetProfiler {\n\n    static{\n        System.loadLibrary(&quot;PowerGadgetProfiler&quot;);\n        System.out.println(&quot;THREAD &quot; + Thread.currentThread().getId() +  &quot; LIBRARY LOADED SUCCESSFULLY&quot;);\n    }\n\n    public static int profileId = 0;\n    static int methodCounter = 0;\n\n    private static final String folderName = buildFolderName();\n\n    public static final Object profilerLock = new Object();\n\n    public static volatile boolean running = false;\n\n    private static final PowerGadgetProfiler instance = new PowerGadgetProfiler();\n\n    private static String[] getBenchmarkMethodsInOrder(){\n        ArrayList&lt;String&gt; methodNames = new ArrayList&lt;&gt;();\n        Method[] methods = BenchmarkContainer.class.getMethods();\n        for (Method method : methods) {\n            String name = method.toString();\n            if(name.contains(&quot;BenchmarkContainer&quot;)\n            &amp;&amp; !name.contains(&quot;initializeProfilerThread&quot;)\n            &amp;&amp; !name.contains(&quot;stopProfiling&quot;)){\n                methodNames.add(method.getName());\n            }\n        }\n        String[] methodArray = methodNames.toArray(new String[0]);\n        Arrays.sort(methodArray);\n        System.out.println(&quot;THREAD &quot; + Thread.currentThread().getId() + &quot; METHODS: &quot; + Arrays.toString(methodArray));\n        return methodArray;\n    }\n\n    private static String buildFolderName(){\n        LocalDateTime timeStamp = LocalDateTime.now();\n        String result = &quot;/Users/timerdar/BM-&quot;;          // change when on other machine\n        result += Integer.toString(timeStamp.getYear());\n        result += Integer.toString(timeStamp.getMonthValue());\n        result += Integer.toString(timeStamp.getDayOfMonth());\n        result += Integer.toString(timeStamp.getHour());\n        result += Integer.toString(timeStamp.getMinute());\n        return result;\n    }\n\n    private static String buildFileName(){\n        return folderName + &quot;/&quot; + benchmarkMethods[methodCounter] + profileId + &quot;.csv&quot;;\n    }\n\n    private static final String[] benchmarkMethods = getBenchmarkMethodsInOrder();\n\n    private native void startProfiling(String fileName);\n\n    private native void readSample();\n\n    private native void stopProfiling();\n\n    public static void startProfiling(){\n        System.out.println(&quot;THREAD &quot; + Thread.currentThread().getId() + &quot; ENTERED START PROFILING&quot;);\n        synchronized(profilerLock) {\n            System.out.println(&quot;THREAD &quot; + Thread.currentThread().getId() + &quot; RELEASES PROFILER LOCK&quot;);\n            profilerLock.notify();\n        }\n        final String fileName = buildFileName();\n        instance.startProfiling(fileName);\n        System.out.println(&quot;THREAD &quot; + Thread.currentThread().getId() + &quot; CALLED PROFILE EXECUTION&quot;);\n        profileId++;\n        while(running){\n            getSample();\n        }\n        endProfiling();\n    }\n\n    private static void getSample(){\n        instance.readSample();\n    }\n\n    private static void endProfiling(){\n        System.out.println(&quot;THREAD &quot; + Thread.currentThread().getId() + &quot; ENTERED endProfiling()&quot;);\n        instance.stopProfiling();\n        System.out.println(&quot;JAVA THREAD &quot; + Thread.currentThread().getId() + &quot; CALLED NATIVE stopProfiling()&quot;);\n        methodCounter++;\n    }\n}\n</code></pre>\n<p><em>BenchmarkContainer.java:</em></p>\n<p>This is just a really small subset of all benchmarks I have. I reduced the number of benchmarks to reduce the overhead while creating a proof-of-concept.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package BenchmarkContainers;\n\nimport Profiling.PowerGadgetProfiler;\nimport Profiling.ProfilerThread;\nimport org.openjdk.jmh.annotations.*;\n\nimport java.util.concurrent.TimeUnit;\n\n@State(Scope.Benchmark)\npublic class BenchmarkContainer {\n\n    //@Param({&quot;5&quot;, &quot;30&quot;,  &quot;210&quot;, &quot;1470&quot;})\n    @Param({&quot;1&quot;, &quot;2&quot;})\n    public int upperBound;\n\n    @Setup(Level.Trial)\n    public void initializeProfilerThread() {\n        System.out.println(&quot;THREAD &quot; + Thread.currentThread().getId() + &quot; ENTERED initializeProfilerThread()&quot;);\n        ProfilerThread profilerThread = new ProfilerThread();\n        profilerThread.start();\n        synchronized (PowerGadgetProfiler.profilerLock){\n            try {\n                System.out.println(&quot;THREAD &quot; + Thread.currentThread().getId() + &quot; WAITS FOR PROFILER LOCK&quot;);\n                PowerGadgetProfiler.profilerLock.wait();\n                PowerGadgetProfiler.running = true;\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n    @TearDown(Level.Trial)\n    public void stopProfiling(){\n        System.out.println(&quot;THREAD &quot; + Thread.currentThread().getId() + &quot; ENTERED TEARDOWN PROCEDURE&quot;);\n        synchronized (PowerGadgetProfiler.profilerLock){\n            PowerGadgetProfiler.running = false;\n        }\n    }\n\n    @Benchmark\n    @Fork(value = 1, warmups = 1)\n    @OutputTimeUnit(TimeUnit.NANOSECONDS)\n    @BenchmarkMode(Mode.AverageTime)\n    public void init(){\n        {\n\n        }\n    }\n\n    @Benchmark\n    @Fork(value = 1, warmups = 1)\n    @OutputTimeUnit(TimeUnit.NANOSECONDS)\n    @BenchmarkMode(Mode.AverageTime)\n    public int geoSum(){\n        int sum = 0;\n        for(int i = 0; i &lt;= upperBound; i++){\n            sum += i;\n        }\n        return sum;\n    }\n}\n</code></pre>\n<p><em>ProfilerThread.java:</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>package Profiling;\n\npublic class ProfilerThread extends Thread{\n\n    @Override\n    public void run() {\n        System.out.println(&quot;STARTING PROFILING IN PROFILER THREAD&quot;);\n        PowerGadgetProfiler.startProfiling();\n    }\n}\n</code></pre>\n<p><em>Profiling_PowerGadgetProfiler.c:</em></p>\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;jni.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n\n#include &lt;IntelPowerGadget/EnergyLib.h&gt;\n#include &lt;pthread.h&gt;\n\n#include &quot;Profiling_PowerGadgetProfiler.h&quot;\n\nJNIEXPORT void JNICALL Java_Profiling_PowerGadgetProfiler_startProfiling\n  (JNIEnv *env, jobject thisObject, jstring fileName)\n  {\n      uint64_t tid;\n      pthread_threadid_np(NULL, &amp;tid);\n      printf(&quot;THREAD %llu CALLED NATIVE startProfiling()\\n&quot;, tid);\n\n\n      IntelEnergyLibInitialize();\n\n      printf(&quot;NATIVE PROFILER INITIALIZED\\n&quot;);\n      char fileNameAsString[255];\n\n      const char *fileNameAsConstString = (*env)-&gt;GetStringUTFChars(env, fileName, 0);\n\n      strcpy(fileNameAsString, fileNameAsConstString);\n\n      printf(&quot;RESULTING FILE NAME: %s\\n&quot;, fileNameAsString);\n      printf(&quot;STARTING PROFILING IN NATIVE CODE\\n&quot;);\n\n      StartLog(fileNameAsString);\n\n  }\n\n\nJNIEXPORT void JNICALL Java_Profiling_PowerGadgetProfiler_readSample\n  (JNIEnv *env , jobject thisObject)\n{\n    ReadSample();\n}\n\nJNIEXPORT void JNICALL Java_Profiling_PowerGadgetProfiler_stopProfiling\n (JNIEnv* env, jobject thisObject)\n{\n    uint64_t tid;\n    pthread_threadid_np(NULL, &amp;tid);\n    printf(&quot;THREAD %llu CALLED NATIVE stopProfiling()\\n&quot;, tid);\n    printf(&quot;ENDING PROFILING IN NATIVE CODE AND WRITE TO FILE\\n&quot;);\n    StopLog();\n}\n</code></pre>\n<p><strong>Console output:</strong></p>\n<p>Please don't worry about the mix of JMH and my outputs. This does not matter for me.</p>\n<pre><code># JMH version: 1.32\n# VM version: JDK 14.0.1, OpenJDK 64-Bit Server VM, 14.0.1+7\n# VM invoker: /Users/timerdar/Library/Java/JavaVirtualMachines/openjdk-14.0.1/Contents/Home/bin/java\n# VM options: -Djava.library.path=/Users/timerdar/IdeaProjects/microbenchmark_test/src/main/java/Profiling -javaagent:/Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar=62464:/Applications/IntelliJ IDEA CE.app/Contents/bin -Dfile.encoding=UTF-8\n# Blackhole mode: full + dont-inline hint\n# Warmup: 5 iterations, 10 s each\n# Measurement: 5 iterations, 10 s each\n# Timeout: 10 min per iteration\n# Threads: 1 thread, will synchronize iterations\n# Benchmark mode: Average time, time/op\n# Benchmark: BenchmarkContainers.BenchmarkContainer.geoSum\n# Parameters: (upperBound = 1)\n\n# Run progress: 0,00% complete, ETA 00:13:20\n# Warmup Fork: 1 of 1\n# Warmup Iteration   1: THREAD 16 ENTERED initializeProfilerThread()\nSTARTING PROFILING IN PROFILER THREAD\nTHREAD 17 LIBRARY LOADED SUCCESSFULLY\nTHREAD 17 METHODS: [geoSum, init]\nTHREAD 16 WAITS FOR PROFILER LOCK\nTHREAD 17 ENTERED START PROFILING\nTHREAD 17 RELEASES PROFILER LOCK\nTHREAD 17 STARTING PROFILING IN PGP WITH PARAM VALUE: 1\nTHREAD 17 CALLED PROFILE EXECUTION\n6,152 ns/op\n# Warmup Iteration   2: 6,139 ns/op\n# Warmup Iteration   3: 5,688 ns/op\n# Warmup Iteration   4: 6,172 ns/op\n# Warmup Iteration   5: 6,525 ns/op\nIteration   1: 6,858 ns/op\nIteration   2: 7,265 ns/op\nIteration   3: 7,523 ns/op\nIteration   4: 7,494 ns/op\nIteration   5: THREAD 16 ENTERED TEARDOWN PROCEDURE\n7,776 ns/op\nTHREAD 17 ENTERED endProfiling()\nTHREAD 204730 CALLED NATIVE startProfiling()\nNATIVE PROFILER INITIALIZED\nRESULTING FILE NAME: /Users/timerdar/BM-202111301910/geoSum0.csv\nSTARTING PROFILING IN NATIVE CODE\nTHREAD 204730 CALLED NATIVE stopProfiling()\nENDING PROFILING IN NATIVE CODE AND WRITE TO FILE\n</code></pre>\n<p><strong>What I've tried so far:</strong></p>\n<ul>\n<li><p>I removed the control flow of the profiling from the native code into the Java code. Before I had a static variable in my native code which indicated the running state of the benchmark. The <code>ReadSample()</code> method was called until this variable swapped (other function in the C file).</p>\n</li>\n<li><p>I removed the <code>synchronized</code> keyword from the functions in <code>PowerGadgetProfiler</code> <code>startProfiling</code>, <code>getSample</code> and <code>endProfiling</code></p>\n</li>\n</ul>\n<p>Thank you for your patience and I hope you can help me.</p>\n<h2>Minimum necessary code example to reproduce the problem:</h2>\n<p>I have created a minimum working example to reduce the problem to it's main components.</p>\n<p><strong>The code:</strong></p>\n<p><em>BenchmarkProgram.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>package Profiling;\n\npublic class BenchmarkProgram {\n\n    public static void main(String[] args) throws Exception{\n        org.openjdk.jmh.Main.main(args);\n    }\n}\n</code></pre>\n<p><em>BenchmarkContainer.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>package BenchmarkContainers;\n\nimport Profiling.PowerGadgetProfiler;\nimport Profiling.ProfilerThread;\nimport org.openjdk.jmh.annotations.*;\n\n@State(Scope.Benchmark)\npublic class BenchmarkContainer {\n\n    @Param({&quot;1&quot;, &quot;2&quot;})\n    public int upperBound;\n\n    Thread profilerThread;\n\n    @Setup(Level.Trial)\n    public void initializeProfilerThread() {\n        profilerThread = new ProfilerThread();\n        profilerThread.start();\n        PowerGadgetProfiler.running = true;\n    }\n\n    @TearDown(Level.Trial)\n    public void stopProfiling() {\n        PowerGadgetProfiler.running = false;\n        try {\n            profilerThread.join();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n\n    }\n\n    @Benchmark\n    @Fork(0)\n    public void init() {\n        {\n\n        }\n    }\n\n    @Benchmark\n    @Fork(0)\n    public int geoSum() {\n        int sum = 0;\n        for (int i = 0; i &lt;= upperBound; i++) {\n            sum += i;\n        }\n        return sum;\n    }\n}\n</code></pre>\n<p><em>PowerGadgetProfiler.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>package Profiling;\n\npublic class PowerGadgetProfiler {\n\n    static {\n        System.loadLibrary(&quot;PowerGadgetProfiler&quot;);\n    }\n\n    public static volatile boolean running = false;\n\n    private static native void peep();\n\n    public static void startProfiling() {\n        peep();\n        System.out.println(&quot;MOCK PEEP&quot;);\n        while (running) {\n            getSample();\n        }\n        endProfiling();\n    }\n\n    private static void getSample() {\n        // mock sampling\n    }\n\n    private static void endProfiling() {\n        peep();\n        System.out.println(&quot;MOCK PEEP&quot;);\n    }\n}\n</code></pre>\n<p><em>ProfilerThread.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>package Profiling;\n\npublic class ProfilerThread extends Thread{\n\n    @Override\n    public void run() {\n        System.out.println(&quot;STARTING PROFILING IN PROFILER THREAD&quot;);\n        PowerGadgetProfiler.startProfiling();\n    }\n}\n</code></pre>\n<p><em>Profiling_PowerGadgetProfiler.c</em></p>\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;jni.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\n#include &lt;IntelPowerGadget/EnergyLib.h&gt;\n#include &lt;pthread.h&gt;\n\n#include &quot;Profiling_PowerGadgetProfiler.h&quot;\n\nJNIEXPORT void JNICALL Java_Profiling_PowerGadgetProfiler_peep\n  (JNIEnv *env, jclass thisClass)\n  {\n    uint64_t tid;\n    pthread_threadid_np(NULL, &amp;tid);\n    printf(&quot;THREAD %llu PEEP\\n&quot;, tid);\n  }\n\n</code></pre>\n<p><strong>The output:</strong></p>\n<pre><code># JMH version: 1.32\n# VM version: JDK 14.0.1, OpenJDK 64-Bit Server VM, 14.0.1+7\n# VM invoker: /Users/timerdar/Library/Java/JavaVirtualMachines/openjdk-14.0.1/Contents/Home/bin/java\n# VM options: -Djava.library.path=/Users/timerdar/IdeaProjects/microbenchmark_test/src/main/java/Profiling -javaagent:/Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar=50458:/Applications/IntelliJ IDEA CE.app/Contents/bin -Dfile.encoding=UTF-8\n# Blackhole mode: full + dont-inline hint\n# Warmup: 5 iterations, 10 s each\n# Measurement: 5 iterations, 10 s each\n# Timeout: 10 min per iteration\n# Threads: 1 thread, will synchronize iterations\n# Benchmark mode: Throughput, ops/time\n# Benchmark: BenchmarkContainers.BenchmarkContainer.geoSum\n# Parameters: (upperBound = 1)\n\n# Run progress: 0,00% complete, ETA 00:06:40\n# Fork: N/A, test runs in the host VM\n# *** WARNING: Non-forked runs may silently omit JVM options, mess up profilers, disable compiler hints, etc. ***\n# *** WARNING: Use non-forked runs only for debugging purposes, not for actual performance runs. ***\n# Warmup Iteration   1: STARTING PROFILING IN PROFILER THREAD\nTHREAD 14 LIBRARY LOADED SUCCESSFULLY\nMOCK PEEP\n351509573,446 ops/s\n# Warmup Iteration   2: 368618416,430 ops/s\n# Warmup Iteration   3: 318780225,551 ops/s\n# Warmup Iteration   4: 316404930,396 ops/s\n# Warmup Iteration   5: 308587428,671 ops/s\nIteration   1: 307622321,475 ops/s\nIteration   2: 295849314,405 ops/s\nIteration   3: 310904513,944 ops/s\nIteration   4: 298409293,008 ops/s\nIteration   5: MOCK PEEP\n293730263,155 ops/s\n\nResult &quot;BenchmarkContainers.BenchmarkContainer.geoSum&quot;:\n  301303141,197 ±(99.9%) 29045283,861 ops/s [Average]\n  (min, avg, max) = (293730263,155, 301303141,197, 310904513,944), stdev = 7542967,981\n  CI (99.9%): [272257857,337, 330348425,058] (assumes normal distribution)\n\n\n# JMH version: 1.32\n# VM version: JDK 14.0.1, OpenJDK 64-Bit Server VM, 14.0.1+7\n# VM invoker: /Users/timerdar/Library/Java/JavaVirtualMachines/openjdk-14.0.1/Contents/Home/bin/java\n# VM options: -Djava.library.path=/Users/timerdar/IdeaProjects/microbenchmark_test/src/main/java/Profiling -javaagent:/Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar=50458:/Applications/IntelliJ IDEA CE.app/Contents/bin -Dfile.encoding=UTF-8\n# Blackhole mode: full + dont-inline hint\n# Warmup: 5 iterations, 10 s each\n# Measurement: 5 iterations, 10 s each\n# Timeout: 10 min per iteration\n# Threads: 1 thread, will synchronize iterations\n# Benchmark mode: Throughput, ops/time\n# Benchmark: BenchmarkContainers.BenchmarkContainer.geoSum\n# Parameters: (upperBound = 2)\n\n# Run progress: 25,00% complete, ETA 00:05:01\n# Fork: N/A, test runs in the host VM\n# *** WARNING: Non-forked runs may silently omit JVM options, mess up profilers, disable compiler hints, etc. ***\n# *** WARNING: Use non-forked runs only for debugging purposes, not for actual performance runs. ***\n# Warmup Iteration   1: STARTING PROFILING IN PROFILER THREAD\nMOCK PEEP\n250420430,065 ops/s\n# Warmup Iteration   2: 240512982,879 ops/s\n# Warmup Iteration   3: 234267496,579 ops/s\n# Warmup Iteration   4: 232677741,065 ops/s\n# Warmup Iteration   5: 225373803,499 ops/s\nIteration   1: 225697770,075 ops/s\nIteration   2: 233106892,737 ops/s\nIteration   3: 230332046,340 ops/s\nIteration   4: 220403129,274 ops/s\nIteration   5: MOCK PEEP\n222970983,188 ops/s\n\nResult &quot;BenchmarkContainers.BenchmarkContainer.geoSum&quot;:\n  226502164,323 ±(99.9%) 20064492,546 ops/s [Average]\n  (min, avg, max) = (220403129,274, 226502164,323, 233106892,737), stdev = 5210684,997\n  CI (99.9%): [206437671,777, 246566656,869] (assumes normal distribution)\n\n\n# JMH version: 1.32\n# VM version: JDK 14.0.1, OpenJDK 64-Bit Server VM, 14.0.1+7\n# VM invoker: /Users/timerdar/Library/Java/JavaVirtualMachines/openjdk-14.0.1/Contents/Home/bin/java\n# VM options: -Djava.library.path=/Users/timerdar/IdeaProjects/microbenchmark_test/src/main/java/Profiling -javaagent:/Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar=50458:/Applications/IntelliJ IDEA CE.app/Contents/bin -Dfile.encoding=UTF-8\n# Blackhole mode: full + dont-inline hint\n# Warmup: 5 iterations, 10 s each\n# Measurement: 5 iterations, 10 s each\n# Timeout: 10 min per iteration\n# Threads: 1 thread, will synchronize iterations\n# Benchmark mode: Throughput, ops/time\n# Benchmark: BenchmarkContainers.BenchmarkContainer.init\n# Parameters: (upperBound = 1)\n\n# Run progress: 50,00% complete, ETA 00:03:20\n# Fork: N/A, test runs in the host VM\n# *** WARNING: Non-forked runs may silently omit JVM options, mess up profilers, disable compiler hints, etc. ***\n# *** WARNING: Use non-forked runs only for debugging purposes, not for actual performance runs. ***\n# Warmup Iteration   1: STARTING PROFILING IN PROFILER THREAD\nMOCK PEEP\n1285734648,964 ops/s\n# Warmup Iteration   2: 1281687199,566 ops/s\n# Warmup Iteration   3: 1248636633,953 ops/s\n# Warmup Iteration   4: 1286229544,274 ops/s\n# Warmup Iteration   5: 1242773248,106 ops/s\nIteration   1: 1249716889,546 ops/s\nIteration   2: 1163957364,456 ops/s\nIteration   3: 1165338083,544 ops/s\nIteration   4: 1175806686,372 ops/s\nIteration   5: MOCK PEEP\n1206242463,819 ops/s\n\nResult &quot;BenchmarkContainers.BenchmarkContainer.init&quot;:\n  1192212297,547 ±(99.9%) 140077359,758 ops/s [Average]\n  (min, avg, max) = (1163957364,456, 1192212297,547, 1249716889,546), stdev = 36377645,494\n  CI (99.9%): [1052134937,790, 1332289657,305] (assumes normal distribution)\n\n\n# JMH version: 1.32\n# VM version: JDK 14.0.1, OpenJDK 64-Bit Server VM, 14.0.1+7\n# VM invoker: /Users/timerdar/Library/Java/JavaVirtualMachines/openjdk-14.0.1/Contents/Home/bin/java\n# VM options: -Djava.library.path=/Users/timerdar/IdeaProjects/microbenchmark_test/src/main/java/Profiling -javaagent:/Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar=50458:/Applications/IntelliJ IDEA CE.app/Contents/bin -Dfile.encoding=UTF-8\n# Blackhole mode: full + dont-inline hint\n# Warmup: 5 iterations, 10 s each\n# Measurement: 5 iterations, 10 s each\n# Timeout: 10 min per iteration\n# Threads: 1 thread, will synchronize iterations\n# Benchmark mode: Throughput, ops/time\n# Benchmark: BenchmarkContainers.BenchmarkContainer.init\n# Parameters: (upperBound = 2)\n\n# Run progress: 75,00% complete, ETA 00:01:40\n# Fork: N/A, test runs in the host VM\n# *** WARNING: Non-forked runs may silently omit JVM options, mess up profilers, disable compiler hints, etc. ***\n# *** WARNING: Use non-forked runs only for debugging purposes, not for actual performance runs. ***\n# Warmup Iteration   1: STARTING PROFILING IN PROFILER THREAD\nMOCK PEEP\n1167710836,896 ops/s\n# Warmup Iteration   2: 1206785568,628 ops/s\n# Warmup Iteration   3: 1160517470,177 ops/s\n# Warmup Iteration   4: 1192993000,343 ops/s\n# Warmup Iteration   5: 1198394027,257 ops/s\nIteration   1: 1158210173,102 ops/s\nIteration   2: 1169432730,215 ops/s\nIteration   3: 1070907177,608 ops/s\nIteration   4: 336332917,114 ops/s\nIteration   5: MOCK PEEP\n433452372,375 ops/s\n\nResult &quot;BenchmarkContainers.BenchmarkContainer.init&quot;:\n  833667074,083 ±(99.9%) 1589834232,333 ops/s [Average]\n  (min, avg, max) = (336332917,114, 833667074,083, 1169432730,215), stdev = 412874901,402\n  CI (99.9%): [≈ 0, 2423501306,415] (assumes normal distribution)\n\n\n# Run complete. Total time: 00:06:40\n\nREMEMBER: The numbers below are just data. To gain reusable insights, you need to follow up on\nwhy the numbers are the way they are. Use profilers (see -prof, -lprof), design factorial\nexperiments, perform baseline and negative tests that provide experimental control, make sure\nthe benchmarking environment is safe on JVM/OS/HW level, ask for reviews from the domain experts.\nDo not assume the numbers tell you what you want them to tell.\n\nBenchmark                                      (upperBound)   Mode  Cnt           Score            Error  Units\nBenchmarkContainers.BenchmarkContainer.geoSum             1  thrpt    5   301303141,197 ±   29045283,861  ops/s\nBenchmarkContainers.BenchmarkContainer.geoSum             2  thrpt    5   226502164,323 ±   20064492,546  ops/s\nBenchmarkContainers.BenchmarkContainer.init               1  thrpt    5  1192212297,547 ±  140077359,758  ops/s\nBenchmarkContainers.BenchmarkContainer.init               2  thrpt    5   833667074,083 ± 1589834232,333  ops/s\nTHREAD 62778 PEEP\nTHREAD 62778 PEEP\nTHREAD 63451 PEEP\nTHREAD 63451 PEEP\nTHREAD 63828 PEEP\nTHREAD 63828 PEEP\nTHREAD 64242 PEEP\nTHREAD 64242 PEEP\n\nProcess finished with exit code 0\n</code></pre>\n<p><strong>Expected behavior:</strong>\nUsually I would expect the native code to execute first before the Java code continues running. But however, the program seems to queue up all code and then executes everything at once when the benchmark is finished.</p>\n<p>As <a href=\"https://stackoverflow.com/questions/38378901/jni-thread-model\">this Stackoverflow Thread</a> says, the program usually should work as expected. But I am currently not able to identify the problem in my code.</p>\n<p>The behavior I would expect from the program is described in the following diagram:</p>\n<p><a href=\"https://i.stack.imgur.com/anT9z.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/anT9z.jpg\" alt=\"Expected program flow\" /></a></p>\n<p>I hope you are able to help me again.</p>\n"},{"tags":["java","eclipse","repository","ibm-odm"],"answers":[{"tags":[],"owner":{"account_id":17250244,"reputation":226,"user_id":12490561,"display_name":"Emmanuel B."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638893121,"creation_date":1638892720,"answer_id":70263260,"question_id":69371722,"body_markdown":"You need to finalize the wizard in this page to finish the installation of the Rule Execution Server and then there should be a button to execute the final SQL script.\r\n\r\n\r\nBest\r\nEmmanuel","title":"IBM ODM Rule Execution Server Repository not loaded","body":"<p>You need to finalize the wizard in this page to finish the installation of the Rule Execution Server and then there should be a button to execute the final SQL script.</p>\n<p>Best\nEmmanuel</p>\n"}],"owner":{"account_id":14265593,"reputation":97,"user_id":10304864,"display_name":"Emre &#214;zincegedik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":174,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1638893121,"creation_date":1632898660,"question_id":69371722,"body_markdown":"Hello I am new to ODM and its tools. I encountered a problem with connecting rule execution server&#39;s repository with my company&#39;s repository.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dl8AM.png\r\n\r\nI can click next and go to last step until finish but when I go to http://localhost:9080/res/protected/installer.jsf again the same page is displayed. Did I do installation improperly?","title":"IBM ODM Rule Execution Server Repository not loaded","body":"<p>Hello I am new to ODM and its tools. I encountered a problem with connecting rule execution server's repository with my company's repository.</p>\n<p><a href=\"https://i.stack.imgur.com/dl8AM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dl8AM.png\" alt=\"enter image description here\" /></a></p>\n<p>I can click next and go to last step until finish but when I go to http://localhost:9080/res/protected/installer.jsf again the same page is displayed. Did I do installation improperly?</p>\n"},{"tags":["java","android","android-volley"],"comments":[{"owner":{"account_id":8908789,"reputation":5958,"user_id":6649786,"accept_rate":100,"display_name":"Wais Kamal"},"score":0,"creation_date":1638893356,"post_id":70263342,"comment_id":124206122,"body_markdown":"The for loop is totally redundant in your code. The IDE should have already pointed that to you (I assume you are using Android Studio).","body":"The for loop is totally redundant in your code. The IDE should have already pointed that to you (I assume you are using Android Studio)."},{"owner":{"account_id":21644177,"reputation":81,"user_id":17483997,"display_name":"Brad Cruise"},"score":0,"creation_date":1638893557,"post_id":70263342,"comment_id":124206185,"body_markdown":"But, when I don&#39;t use the for loop the code stops to `JSONObject usersObject = new JSONObject(response);` line and it doesn&#39;t read the if statement. It neither even reads the Toast after this line.","body":"But, when I don&#39;t use the for loop the code stops to <code>JSONObject usersObject = new JSONObject(response);</code> line and it doesn&#39;t read the if statement. It neither even reads the Toast after this line."},{"owner":{"account_id":8908789,"reputation":5958,"user_id":6649786,"accept_rate":100,"display_name":"Wais Kamal"},"score":0,"creation_date":1638893600,"post_id":70263342,"comment_id":124206201,"body_markdown":"This is a good sign that you are receiving invalid JSON. To make sure this is the case check the stack trace.","body":"This is a good sign that you are receiving invalid JSON. To make sure this is the case check the stack trace."},{"owner":{"account_id":21644177,"reputation":81,"user_id":17483997,"display_name":"Brad Cruise"},"score":0,"creation_date":1638894287,"post_id":70263342,"comment_id":124206490,"body_markdown":"@WaisKamal in Logcat I get this if I don&#39;t use for loop:`java.lang.reflect.Method.invoke(Native Method)\n2021-12-07 18:16:35.601 24191-24191/com.example.app W/System.err:     at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:539)\n2021-12-07 18:16:35.601 24191-24191/com.example.app W/System.err:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:950)`","body":"@WaisKamal in Logcat I get this if I don&#39;t use for loop:<code>java.lang.reflect.Method.invoke(Native Method) 2021-12-07 18:16:35.601 24191-24191&#47;com.example.app W&#47;System.err:     at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(&zwnj;&#8203;RuntimeInit.java:539&zwnj;&#8203;) 2021-12-07 18:16:35.601 24191-24191&#47;com.example.app W&#47;System.err:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:950)</code>"},{"owner":{"account_id":8908789,"reputation":5958,"user_id":6649786,"accept_rate":100,"display_name":"Wais Kamal"},"score":0,"creation_date":1638894438,"post_id":70263342,"comment_id":124206538,"body_markdown":"Try logging the `response` string and check if there is anything wrong with the JSON you are receiving.","body":"Try logging the <code>response</code> string and check if there is anything wrong with the JSON you are receiving."},{"owner":{"account_id":21644177,"reputation":81,"user_id":17483997,"display_name":"Brad Cruise"},"score":0,"creation_date":1638894492,"post_id":70263342,"comment_id":124206559,"body_markdown":"How do I logging the `response`?","body":"How do I logging the <code>response</code>?"},{"owner":{"account_id":8908789,"reputation":5958,"user_id":6649786,"accept_rate":100,"display_name":"Wais Kamal"},"score":0,"creation_date":1638894537,"post_id":70263342,"comment_id":124206586,"body_markdown":"`Log.d(&quot;response&quot;, response)`","body":"<code>Log.d(&quot;response&quot;, response)</code>"},{"owner":{"account_id":11172549,"reputation":124,"user_id":8199125,"display_name":"Ali Babadi"},"score":0,"creation_date":1638894611,"post_id":70263342,"comment_id":124206623,"body_markdown":"Maybe you got exception before the `if` condition and you think it ignores that. log the `catch` block to find out.","body":"Maybe you got exception before the <code>if</code> condition and you think it ignores that. log the <code>catch</code> block to find out."},{"owner":{"account_id":21644177,"reputation":81,"user_id":17483997,"display_name":"Brad Cruise"},"score":0,"creation_date":1638894715,"post_id":70263342,"comment_id":124206672,"body_markdown":"@WaisKamal There is no error with the JSON. When I am logging `response` is showing up correctly.","body":"@WaisKamal There is no error with the JSON. When I am logging <code>response</code> is showing up correctly."},{"owner":{"account_id":8908789,"reputation":5958,"user_id":6649786,"accept_rate":100,"display_name":"Wais Kamal"},"score":0,"creation_date":1638894854,"post_id":70263342,"comment_id":124206727,"body_markdown":"You need to step through your app with a debugger. It will help you identify the faulty line.","body":"You need to step through your app with a debugger. It will help you identify the faulty line."},{"owner":{"account_id":21644177,"reputation":81,"user_id":17483997,"display_name":"Brad Cruise"},"score":0,"creation_date":1638894949,"post_id":70263342,"comment_id":124206777,"body_markdown":"@AliBabadi I found the error. it throws `org.json.JSONArray cannot be converted to JSONObject` thank you very much.","body":"@AliBabadi I found the error. it throws <code>org.json.JSONArray cannot be converted to JSONObject</code> thank you very much."},{"owner":{"account_id":21644177,"reputation":81,"user_id":17483997,"display_name":"Brad Cruise"},"score":0,"creation_date":1638894997,"post_id":70263342,"comment_id":124206794,"body_markdown":"@WaisKamal I found the error. I had to Log the catch. Thank you very much for your help.","body":"@WaisKamal I found the error. I had to Log the catch. Thank you very much for your help."},{"owner":{"account_id":11172549,"reputation":124,"user_id":8199125,"display_name":"Ali Babadi"},"score":0,"creation_date":1638895156,"post_id":70263342,"comment_id":124206865,"body_markdown":"@BradCruise so you have problem with your Json conversion","body":"@BradCruise so you have problem with your Json conversion"},{"owner":{"account_id":21644177,"reputation":81,"user_id":17483997,"display_name":"Brad Cruise"},"score":0,"creation_date":1638895318,"post_id":70263342,"comment_id":124206935,"body_markdown":"@AliBabadi Yes. I am gonna ask a new question because that is not relevant with the current question!","body":"@AliBabadi Yes. I am gonna ask a new question because that is not relevant with the current question!"},{"owner":{"account_id":11172549,"reputation":124,"user_id":8199125,"display_name":"Ali Babadi"},"score":0,"creation_date":1638895395,"post_id":70263342,"comment_id":124206954,"body_markdown":"@BradCruise it would be great if you mark useful my answer","body":"@BradCruise it would be great if you mark useful my answer"}],"owner":{"account_id":21644177,"reputation":81,"user_id":17483997,"display_name":"Brad Cruise"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":284,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1638893063,"creation_date":1638893063,"question_id":70263342,"body_markdown":"I am trying to check if user ```ID``` is equal to ```CurrentUserID``` and I use ```for``` loop. Although, I am using an ```if``` in order to check if ID == CurrentUserID but, when I run the code it ignores the if statement and it doesn&#39;t stop to the data I need and it continues the loop. Here is the code I wrote:\r\n\r\n    private void userInfo() {\r\n            RequestQueue queue = Volley.newRequestQueue(getContext());\r\n            StringRequest stringRequest = new StringRequest(Request.Method.GET, JSON_URL, new Response.Listener&lt;String&gt;() {\r\n                @Override\r\n                public void onResponse(String response) {\r\n                    for (int i = 0; i &lt; response.length(); i++) {\r\n                    try {\r\n                        JSONObject usersObject = new JSONObject(response);\r\n                        Toast.makeText(getContext(), &quot;Name: &quot;+usersObject, Toast.LENGTH_LONG).show();\r\n    \r\n                        String ID = usersObject.getString(&quot;ID&quot;);\r\n                        if (ID.equalsIgnoreCase(CurrentUser)) {\r\n                            String fullName = usersObject.getString(&quot;fullName&quot;);\r\n                            String userName = usersObject.getString(&quot;username&quot;);\r\n    \r\n                            fullname.setText(fullName);\r\n                            username.setText(userName);\r\n                        } else {\r\n                            fullname.setText(&quot;No Name&quot;);\r\n                        }\r\n                        Toast.makeText(getContext(), &quot;Name: &quot;+CurrentUser, Toast.LENGTH_SHORT).show();\r\n                        Toast.makeText(getContext(), &quot;Name: &quot;+ID, Toast.LENGTH_SHORT).show();\r\n    \r\n                    } catch (JSONException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                    }\r\n                }\r\n            }, new Response.ErrorListener() {\r\n                @Override\r\n                public void onErrorResponse(VolleyError error) {\r\n    \r\n                }\r\n            });\r\n    \r\n    \r\n            queue.add(stringRequest);\r\n        }\r\n\r\nHowever, If I don&#39;t use the for statement the code stops to ```JSONObject usersObject = new JSONObject(response);``` and it doesn&#39;t read the code bellow this line. What should I do to check the ID?","title":"How to get a specific data in java with Volley library?","body":"<p>I am trying to check if user <code>ID</code> is equal to <code>CurrentUserID</code> and I use <code>for</code> loop. Although, I am using an <code>if</code> in order to check if ID == CurrentUserID but, when I run the code it ignores the if statement and it doesn't stop to the data I need and it continues the loop. Here is the code I wrote:</p>\n<pre><code>private void userInfo() {\n        RequestQueue queue = Volley.newRequestQueue(getContext());\n        StringRequest stringRequest = new StringRequest(Request.Method.GET, JSON_URL, new Response.Listener&lt;String&gt;() {\n            @Override\n            public void onResponse(String response) {\n                for (int i = 0; i &lt; response.length(); i++) {\n                try {\n                    JSONObject usersObject = new JSONObject(response);\n                    Toast.makeText(getContext(), &quot;Name: &quot;+usersObject, Toast.LENGTH_LONG).show();\n\n                    String ID = usersObject.getString(&quot;ID&quot;);\n                    if (ID.equalsIgnoreCase(CurrentUser)) {\n                        String fullName = usersObject.getString(&quot;fullName&quot;);\n                        String userName = usersObject.getString(&quot;username&quot;);\n\n                        fullname.setText(fullName);\n                        username.setText(userName);\n                    } else {\n                        fullname.setText(&quot;No Name&quot;);\n                    }\n                    Toast.makeText(getContext(), &quot;Name: &quot;+CurrentUser, Toast.LENGTH_SHORT).show();\n                    Toast.makeText(getContext(), &quot;Name: &quot;+ID, Toast.LENGTH_SHORT).show();\n\n                } catch (JSONException e) {\n                    e.printStackTrace();\n                }\n                }\n            }\n        }, new Response.ErrorListener() {\n            @Override\n            public void onErrorResponse(VolleyError error) {\n\n            }\n        });\n\n\n        queue.add(stringRequest);\n    }\n</code></pre>\n<p>However, If I don't use the for statement the code stops to <code>JSONObject usersObject = new JSONObject(response);</code> and it doesn't read the code bellow this line. What should I do to check the ID?</p>\n"},{"tags":["java","spring-boot","hibernate","jpa","concurrency"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1638872897,"post_id":70258295,"comment_id":124197485,"body_markdown":"Use spring transaction management and inject the entitymanager. Put the logic in a servie method which is marked `@Transactional` so that everything executes in a single transaction. Don&#39;t use `syncrhonized` as that simply won&#39;t work.","body":"Use spring transaction management and inject the entitymanager. Put the logic in a servie method which is marked <code>@Transactional</code> so that everything executes in a single transaction. Don&#39;t use <code>syncrhonized</code> as that simply won&#39;t work."},{"owner":{"account_id":14762290,"reputation":63,"user_id":10661256,"display_name":"Ankit Kadam"},"score":0,"creation_date":1638876099,"post_id":70258295,"comment_id":124198762,"body_markdown":"HI @M.Deinum, thanks for ur response. I have updated code snippet ... still employee with same mail id is getting picked by all threads","body":"HI @M.Deinum, thanks for ur response. I have updated code snippet ... still employee with same mail id is getting picked by all threads"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1638876369,"post_id":70258295,"comment_id":124198843,"body_markdown":"I stated service not controller, annotating a private method won&#39;t work neither an internal method call. You still need to select for update in your select method else it won&#39;t work.","body":"I stated service not controller, annotating a private method won&#39;t work neither an internal method call. You still need to select for update in your select method else it won&#39;t work."},{"owner":{"account_id":14762290,"reputation":63,"user_id":10661256,"display_name":"Ankit Kadam"},"score":0,"creation_date":1638878031,"post_id":70258295,"comment_id":124199427,"body_markdown":"@M.Deinum, again I updated the code ... still not getting op as expected","body":"@M.Deinum, again I updated the code ... still not getting op as expected"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1638881757,"post_id":70258295,"comment_id":124200839,"body_markdown":"And again you aren&#39;t using locks. Also why the cruft with casting to a `Session`? Just use the `EntityManager`. On the query use `setLockType` (or was it `setLockMode` and use the one you want. Also you don&#39;t need to call update as it is a managed object it will be persisted automatically.","body":"And again you aren&#39;t using locks. Also why the cruft with casting to a <code>Session</code>? Just use the <code>EntityManager</code>. On the query use <code>setLockType</code> (or was it <code>setLockMode</code> and use the one you want. Also you don&#39;t need to call update as it is a managed object it will be persisted automatically."},{"owner":{"account_id":14762290,"reputation":63,"user_id":10661256,"display_name":"Ankit Kadam"},"score":0,"creation_date":1638883585,"post_id":70258295,"comment_id":124201605,"body_markdown":"Not getting how to implement ... could u pls provide code changes in the answers?","body":"Not getting how to implement ... could u pls provide code changes in the answers?"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1638884155,"post_id":70258295,"comment_id":124201885,"body_markdown":"I basically gave you the answer already. add `query.setLockType(LockModeType.PESSIMISTIC_WRITE);`. To enable locking.","body":"I basically gave you the answer already. add <code>query.setLockType(LockModeType.PESSIMISTIC_WRITE);</code>. To enable locking."},{"owner":{"account_id":14762290,"reputation":63,"user_id":10661256,"display_name":"Ankit Kadam"},"score":0,"creation_date":1638885436,"post_id":70258295,"comment_id":124202520,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/239912/discussion-between-ankit-kadam-and-m-deinum).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/239912/discussion-between-ankit-kadam-and-m-deinum\">continue this discussion in chat</a>."}],"answers":[{"tags":[],"owner":{"account_id":1901420,"reputation":3763,"user_id":1717210,"display_name":"TacheDeChoco"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638872915,"creation_date":1638872915,"answer_id":70258515,"question_id":70258295,"body_markdown":"You can set a specific lock mode in order to issue a &#39;select for update&#39; to the DBMS:\r\n\r\n    EntityManager em;\r\n    ...\r\n    Employee found = em.find(Employee.class, empId, LockModeType.PESSIMISTIC_WRITE);","title":"How to acquired a lock at database row level using in Spring Boot and Hibernate?","body":"<p>You can set a specific lock mode in order to issue a 'select for update' to the DBMS:</p>\n<pre><code>EntityManager em;\n...\nEmployee found = em.find(Employee.class, empId, LockModeType.PESSIMISTIC_WRITE);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638885544,"creation_date":1638884647,"answer_id":70261219,"question_id":70258295,"body_markdown":"First of all use Spring to your advantage, you are currently working around it. You should have a single transactional method that does the work. Next just use JPA instead of directly accessing the Hibernate `Session` that doesn&#39;t add anything but confusion/complexity here. Finally use the [`setLockMode`][1] on the query to determine the locks. \r\n\r\nYour repository method (or service) should look something like this\r\n\r\n```java\r\n@Repository\r\npublic class EmployeeRepositoryImpl implements EmployeeRepository{\r\n\r\n\r\n  @PersistenceContext\r\n  private EntityManager em;\r\n\r\n  @Override\r\n  @Transactional\r\n  public Employee findEmpToProcessAndUpdateStatus() {\r\n\r\n    String hql = &quot;SELECT e FROM Employee e where e.status is null&quot;;\r\n    TypedQuery&lt;Employee&gt; query = em.createQuery(hql, Employee.class);\r\n    query.setMaxResults(1);\r\n    query.setLockMode(LockModeType.PESSIMISTIC_WRITE);\r\n    Employee employee = query.getSingleResult();\r\n    System.out.println(&quot;FETCHED : &quot; + employee.getFirstName());\r\n    employee.setStatus(&quot;INPROGRESS&quot;);\r\n    this.updateEmployee(employee);\r\n    return employee;\r\n  }\r\n\r\n  private boolean updateEmployee(Employee employee) {\r\n    try{\r\n        Thread.sleep(3000);\r\n        em.merge(employee);\r\n        System.out.println(&quot;UPDATED : &quot; + employee.getFirstName());\r\n    }catch (Exception e){\r\n        e.printStackTrace();\r\n    }\r\n    return true;\r\n  }\r\n}\r\n```\r\n\r\nHowever this could cause deadlocks on your database with all those locks. So use with care.\r\n\r\n[1]: https://docs.oracle.com/javaee/6/api/javax/persistence/Query.html#setLockMode(javax.persistence.LockModeType)","title":"How to acquired a lock at database row level using in Spring Boot and Hibernate?","body":"<p>First of all use Spring to your advantage, you are currently working around it. You should have a single transactional method that does the work. Next just use JPA instead of directly accessing the Hibernate <code>Session</code> that doesn't add anything but confusion/complexity here. Finally use the <a href=\"https://docs.oracle.com/javaee/6/api/javax/persistence/Query.html#setLockMode(javax.persistence.LockModeType)\" rel=\"nofollow noreferrer\"><code>setLockMode</code></a> on the query to determine the locks.</p>\n<p>Your repository method (or service) should look something like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic class EmployeeRepositoryImpl implements EmployeeRepository{\n\n\n  @PersistenceContext\n  private EntityManager em;\n\n  @Override\n  @Transactional\n  public Employee findEmpToProcessAndUpdateStatus() {\n\n    String hql = &quot;SELECT e FROM Employee e where e.status is null&quot;;\n    TypedQuery&lt;Employee&gt; query = em.createQuery(hql, Employee.class);\n    query.setMaxResults(1);\n    query.setLockMode(LockModeType.PESSIMISTIC_WRITE);\n    Employee employee = query.getSingleResult();\n    System.out.println(&quot;FETCHED : &quot; + employee.getFirstName());\n    employee.setStatus(&quot;INPROGRESS&quot;);\n    this.updateEmployee(employee);\n    return employee;\n  }\n\n  private boolean updateEmployee(Employee employee) {\n    try{\n        Thread.sleep(3000);\n        em.merge(employee);\n        System.out.println(&quot;UPDATED : &quot; + employee.getFirstName());\n    }catch (Exception e){\n        e.printStackTrace();\n    }\n    return true;\n  }\n}\n</code></pre>\n<p>However this could cause deadlocks on your database with all those locks. So use with care.</p>\n"}],"owner":{"account_id":14762290,"reputation":63,"user_id":10661256,"display_name":"Ankit Kadam"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2981,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1638892601,"creation_date":1638871979,"question_id":70258295,"body_markdown":"I am reading a single record from the database and updating it for which I have 2 methods.\r\nBut between these 2 operations, I want to acquire a lock on that particular row so that different threads will not process the same row.\r\n\r\nHere is my code for the repository:\r\n\r\n            package com.anco.crud.repository;\r\n    \r\n    import com.anco.crud.model.Employee;\r\n    import org.hibernate.Session;\r\n    import org.hibernate.query.Query;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    import javax.persistence.EntityManager;\r\n    \r\n    @Repository\r\n    public class EmployeeRepositoryImpl implements EmployeeRepository{\r\n    \r\n    \r\n        @Autowired\r\n        private EntityManager entityManager;\r\n    \r\n    @Override\r\n    @Transactional\r\n    public Employee findEmpToProcessAndUpdateStatus() {\r\n        Session currentSession = entityManager.unwrap(Session.class);\r\n\r\n        String hql = &quot;from Employee where status is null&quot;;\r\n        Query query = currentSession.createQuery(hql);\r\n        query.setMaxResults(1);\r\n        Employee employee = (Employee) query.uniqueResult();\r\n        System.out.println(&quot;FETCHED : &quot; + employee.getFirstName());\r\n        employee.setStatus(&quot;INPROGRESS&quot;);\r\n        updateEmployee(employee);\r\n        return employee;\r\n    }\r\n\r\n    private boolean updateEmployee(Employee employee) {\r\n        try{\r\n            Thread.sleep(3000);\r\n            Session currentSession = entityManager.unwrap(Session.class);\r\n            currentSession.update(employee);\r\n            System.out.println(&quot;UPDATED : &quot; + employee.getFirstName());\r\n        }catch (Exception e){\r\n            e.printStackTrace();\r\n        }\r\n        return true;\r\n    }\r\n    }\r\n    \r\nController code:\r\n\r\n        @GetMapping(&quot;/employee/{mail}&quot;)\r\n        public boolean getAndUpdate() {\r\n            for(int i=0;i&lt;5;i++){\r\n                Runnable rn = () -&gt; process();\r\n                this.executor.execute(rn);\r\n            }\r\n            return true;\r\n        }\r\n    \r\n        private void process() {\r\n        try {\r\n            Employee emp = employeeRepository.findEmpToProcessAndUpdateStatus();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\nIf this is not the correct way then what is a better approach?","title":"How to acquired a lock at database row level using in Spring Boot and Hibernate?","body":"<p>I am reading a single record from the database and updating it for which I have 2 methods.\nBut between these 2 operations, I want to acquire a lock on that particular row so that different threads will not process the same row.</p>\n<p>Here is my code for the repository:</p>\n<pre><code>        package com.anco.crud.repository;\n\nimport com.anco.crud.model.Employee;\nimport org.hibernate.Session;\nimport org.hibernate.query.Query;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Repository;\n\nimport javax.persistence.EntityManager;\n\n@Repository\npublic class EmployeeRepositoryImpl implements EmployeeRepository{\n\n\n    @Autowired\n    private EntityManager entityManager;\n\n@Override\n@Transactional\npublic Employee findEmpToProcessAndUpdateStatus() {\n    Session currentSession = entityManager.unwrap(Session.class);\n\n    String hql = &quot;from Employee where status is null&quot;;\n    Query query = currentSession.createQuery(hql);\n    query.setMaxResults(1);\n    Employee employee = (Employee) query.uniqueResult();\n    System.out.println(&quot;FETCHED : &quot; + employee.getFirstName());\n    employee.setStatus(&quot;INPROGRESS&quot;);\n    updateEmployee(employee);\n    return employee;\n}\n\nprivate boolean updateEmployee(Employee employee) {\n    try{\n        Thread.sleep(3000);\n        Session currentSession = entityManager.unwrap(Session.class);\n        currentSession.update(employee);\n        System.out.println(&quot;UPDATED : &quot; + employee.getFirstName());\n    }catch (Exception e){\n        e.printStackTrace();\n    }\n    return true;\n}\n}\n</code></pre>\n<p>Controller code:</p>\n<pre><code>    @GetMapping(&quot;/employee/{mail}&quot;)\n    public boolean getAndUpdate() {\n        for(int i=0;i&lt;5;i++){\n            Runnable rn = () -&gt; process();\n            this.executor.execute(rn);\n        }\n        return true;\n    }\n\n    private void process() {\n    try {\n        Employee emp = employeeRepository.findEmpToProcessAndUpdateStatus();\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>If this is not the correct way then what is a better approach?</p>\n"},{"tags":["java","multithreading","scheduled-tasks","java.util.concurrent","threadpoolexecutor"],"answers":[{"tags":[],"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"down_vote_count":1,"up_vote_count":32,"is_accepted":true,"score":31,"last_activity_date":1638892400,"creation_date":1412709909,"answer_id":26243649,"question_id":26243422,"body_markdown":"The purpose of having separate dedicated threadpools is so that an activity doesn&#39;t get starved for threads because other activities took all the threads. If some service has its own threadpool then it is assured of having a certain number of threads at its disposal and it&#39;s not as sensitive to demands made by other services. \r\n\r\nOS Threads are a limited resource. If you have an application that uses threads for different purposes, some of them might become busy and keep a lot of threads working for them, or some service might have a bug where in some circumstance a thread isn&#39;t returned to the pool. If that can happen to one thread, the same circumstance may be applicable to all of the threads, and a whole thread pool can be drained this way. (There is an example early on in the Release It! book describing a situation where a database was being switched over, and badly-written JDBC code caused a leak like this.)\r\n \r\nWith the multiple dedicated threadpools if a service needs too many threads then it has to wait for threads to be available, introducing back-pressure into the system so that it degrades gradually, and since other parts have their own thread pools they have a chance to catch their parts up. So the idea is that the system should have more stable characteristics as load changes. In the case you describe having a separate threadpool for scheduled tasks makes sure that those tasks get run regardless of how busy the rest of the system is.\r\n\r\nThe multiple threadpools would require tuning to make sure each pool had enough threads and not too many. With a single threadpool then that might reduce the number of idle threads and might make better use of more threads, but you would not have the predictability of knowing some important task would get the threads it needed to finish in a timely manner.\r\n","title":"Is having a single threadpool better design than multiple threadpools","body":"<p>The purpose of having separate dedicated threadpools is so that an activity doesn't get starved for threads because other activities took all the threads. If some service has its own threadpool then it is assured of having a certain number of threads at its disposal and it's not as sensitive to demands made by other services.</p>\n<p>OS Threads are a limited resource. If you have an application that uses threads for different purposes, some of them might become busy and keep a lot of threads working for them, or some service might have a bug where in some circumstance a thread isn't returned to the pool. If that can happen to one thread, the same circumstance may be applicable to all of the threads, and a whole thread pool can be drained this way. (There is an example early on in the Release It! book describing a situation where a database was being switched over, and badly-written JDBC code caused a leak like this.)</p>\n<p>With the multiple dedicated threadpools if a service needs too many threads then it has to wait for threads to be available, introducing back-pressure into the system so that it degrades gradually, and since other parts have their own thread pools they have a chance to catch their parts up. So the idea is that the system should have more stable characteristics as load changes. In the case you describe having a separate threadpool for scheduled tasks makes sure that those tasks get run regardless of how busy the rest of the system is.</p>\n<p>The multiple threadpools would require tuning to make sure each pool had enough threads and not too many. With a single threadpool then that might reduce the number of idle threads and might make better use of more threads, but you would not have the predictability of knowing some important task would get the threads it needed to finish in a timely manner.</p>\n"},{"tags":[],"owner":{"account_id":6571936,"reputation":132,"user_id":5079567,"display_name":"Ankit Arora"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1534007838,"creation_date":1534007838,"answer_id":51802020,"question_id":26243422,"body_markdown":"Having a single thread pool is NOT a good design because in case of 1 thread pool, if one part of the application becomes slower, threads will concentrate there. If proper timeouts are not implemented, threads will stay and consume resources. A lot of such threads and connections can cause our system to break as no threads will be left for new requests.\r\n\r\nOn the other hand, **having multiple thread pools** ensures that issue is contained and does not become a system-wide failure. We can have different thread pools for accepting connections, running batch jobs, talking to remote api&#39;s databases. It does reduce efficiency to some extent but **makes our system robust and fault tolerant**.","title":"Is having a single threadpool better design than multiple threadpools","body":"<p>Having a single thread pool is NOT a good design because in case of 1 thread pool, if one part of the application becomes slower, threads will concentrate there. If proper timeouts are not implemented, threads will stay and consume resources. A lot of such threads and connections can cause our system to break as no threads will be left for new requests.</p>\n\n<p>On the other hand, <strong>having multiple thread pools</strong> ensures that issue is contained and does not become a system-wide failure. We can have different thread pools for accepting connections, running batch jobs, talking to remote api's databases. It does reduce efficiency to some extent but <strong>makes our system robust and fault tolerant</strong>.</p>\n"}],"owner":{"account_id":3241521,"reputation":311,"user_id":2734429,"accept_rate":80,"display_name":"Lee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10701,"favorite_count":0,"down_vote_count":1,"up_vote_count":24,"accepted_answer_id":26243649,"answer_count":2,"score":23,"last_activity_date":1638892400,"creation_date":1412709000,"question_id":26243422,"body_markdown":"What are the advantages and disadvantages of having more than one threadpool in Java? I have seen code where there are multiple threadpools for different &quot;types&quot;  of tasks, and I&#39;m not sure whether its better design or just developers being lazy. One example is using a [ScheduledThreadPoolExecutor][1] for tasks that are executed periodically or have a timeout, and use another ThreadPoolExecutor for everything else. \r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html","title":"Is having a single threadpool better design than multiple threadpools","body":"<p>What are the advantages and disadvantages of having more than one threadpool in Java? I have seen code where there are multiple threadpools for different \"types\"  of tasks, and I'm not sure whether its better design or just developers being lazy. One example is using a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html\" rel=\"noreferrer\">ScheduledThreadPoolExecutor</a> for tasks that are executed periodically or have a timeout, and use another ThreadPoolExecutor for everything else. </p>\n"},{"tags":["java","gradle"],"comments":[{"owner":{"account_id":14620333,"reputation":35,"user_id":10559220,"display_name":"SkywalkerLuke JS"},"score":0,"creation_date":1638891912,"post_id":70262951,"comment_id":124205520,"body_markdown":"https://stackoverflow.com/questions/460364/how-to-use-classes-from-jar-files","body":"<a href=\"https://stackoverflow.com/questions/460364/how-to-use-classes-from-jar-files\" title=\"how to use classes from jar files\">stackoverflow.com/questions/460364/&hellip;</a>"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":2,"creation_date":1638892723,"post_id":70262951,"comment_id":124205861,"body_markdown":"Basically what you need to do is to add the third party project (and probably all its dependencies) to the classpath. Note that this can be a tedious task - this is among the reasons why build systems like gradle and maven exist.","body":"Basically what you need to do is to add the third party project (and probably all its dependencies) to the classpath. Note that this can be a tedious task - this is among the reasons why build systems like gradle and maven exist."},{"owner":{"account_id":4856868,"reputation":334,"user_id":3917570,"accept_rate":80,"display_name":"intumwa"},"score":0,"creation_date":1638917572,"post_id":70262951,"comment_id":124214688,"body_markdown":"@Thomas Kl&#228;ger thanks for the hint on the classpath. It&#39;s what I was looking for and it has worked.","body":"@Thomas Kl&#228;ger thanks for the hint on the classpath. It&#39;s what I was looking for and it has worked."}],"owner":{"account_id":4856868,"reputation":334,"user_id":3917570,"accept_rate":80,"display_name":"intumwa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1638894819,"answer_count":0,"score":0,"last_activity_date":1638892263,"creation_date":1638891442,"question_id":70262951,"body_markdown":"I probably don&#39;t know the right technical jargon to explain this but I&#39;m trying to write a simple Java class with a reference to classes in a third-party project with Gradle dependencies such as:\r\n\r\n    import com.third.party.library.Class;\r\n\r\n    public class Main {\r\n      public static void main(String[] args) {\r\n        // some code\r\n      }\r\n    }\r\nwhere `com.third.party.library.Class` is a class from a third-party project with dependencies managed using Gradle. I have access to the code of the third-party project and its `build.gradle` file but I&#39;m unsure of how to build that pipeline without using Gradle in my own code.\r\n\r\nCan someone please give me hints on how to achieve this? Even clarity on my question can help.","title":"Can a Java class import classes from a third-party project with dependencies managed by Gradle?","body":"<p>I probably don't know the right technical jargon to explain this but I'm trying to write a simple Java class with a reference to classes in a third-party project with Gradle dependencies such as:</p>\n<pre><code>import com.third.party.library.Class;\n\npublic class Main {\n  public static void main(String[] args) {\n    // some code\n  }\n}\n</code></pre>\n<p>where <code>com.third.party.library.Class</code> is a class from a third-party project with dependencies managed using Gradle. I have access to the code of the third-party project and its <code>build.gradle</code> file but I'm unsure of how to build that pipeline without using Gradle in my own code.</p>\n<p>Can someone please give me hints on how to achieve this? Even clarity on my question can help.</p>\n"},{"tags":["java","processing"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1639389046,"post_id":70262825,"comment_id":124327200,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":10871958,"reputation":193,"user_id":7993564,"display_name":"Jo&#227;o Sim&#245;es"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638892157,"creation_date":1638891707,"answer_id":70263020,"question_id":70262825,"body_markdown":"From what I could gather, the way to go would be with a `HashMap&lt;String,Integer&gt;` or even `HashMap&lt;Integer,Integer&gt;` if you&#39;re sure the ids will always be numeric and fit inside an Integer.\r\n\r\nThe following code assumes there&#39;s a Collection of `ids` called `listOfIds`.\r\nIt will traverse this list and check if we have any value stored for the key `id` in our `HashMap`. \r\n\r\nIf not, it will store the value `1` in there, symbolizing we have found once this id. \r\n\r\nOtherwise, if it&#39;s not the first time we have found this id, we retrieve the current value and increment it by one.\r\n\r\n    Map&lt;String,Integer&gt; mapOfIds = new HashMap&lt;&gt;();\r\n    for(String id: listOfIds) {\r\n        Integer currentValue = mapOfIds.get(id) == null ? 1 : mapOfIds.get(id) + 1;\r\n        mapOfIds.put(id,currentValue);\r\n    }\r\n\r\n\r\n","title":"Counting instances of a string in a table Java/Processing","body":"<p>From what I could gather, the way to go would be with a <code>HashMap&lt;String,Integer&gt;</code> or even <code>HashMap&lt;Integer,Integer&gt;</code> if you're sure the ids will always be numeric and fit inside an Integer.</p>\n<p>The following code assumes there's a Collection of <code>ids</code> called <code>listOfIds</code>.\nIt will traverse this list and check if we have any value stored for the key <code>id</code> in our <code>HashMap</code>.</p>\n<p>If not, it will store the value <code>1</code> in there, symbolizing we have found once this id.</p>\n<p>Otherwise, if it's not the first time we have found this id, we retrieve the current value and increment it by one.</p>\n<pre><code>Map&lt;String,Integer&gt; mapOfIds = new HashMap&lt;&gt;();\nfor(String id: listOfIds) {\n    Integer currentValue = mapOfIds.get(id) == null ? 1 : mapOfIds.get(id) + 1;\n    mapOfIds.put(id,currentValue);\n}\n</code></pre>\n"}],"owner":{"account_id":23286704,"reputation":1,"user_id":17369426,"display_name":"TMB"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1638892157,"creation_date":1638890956,"question_id":70262825,"body_markdown":"New to coding so looking for some help. \r\nI have a csv dataset which contains a couple of columns and a few thousand rows. The rows are grouped by an ID and I&#39;m trying to count how many instances of each ID number there are in the CSV.\r\n\r\ni.e. 100 fall under ID number 1, 210, under number 2 etc. \r\n\r\nThe data is loaded as a table into processing, is there some kind of while/for/if loop or anything I can use to simply count how many times a certain string appears in the file? \r\n\r\nTIA","title":"Counting instances of a string in a table Java/Processing","body":"<p>New to coding so looking for some help.\nI have a csv dataset which contains a couple of columns and a few thousand rows. The rows are grouped by an ID and I'm trying to count how many instances of each ID number there are in the CSV.</p>\n<p>i.e. 100 fall under ID number 1, 210, under number 2 etc.</p>\n<p>The data is loaded as a table into processing, is there some kind of while/for/if loop or anything I can use to simply count how many times a certain string appears in the file?</p>\n<p>TIA</p>\n"},{"tags":["java","xls"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1638888979,"post_id":70262220,"comment_id":124204150,"body_markdown":"Unclear what Excel functions you&#39;ve tried to use so far","body":"Unclear what Excel functions you&#39;ve tried to use so far"}],"answers":[{"tags":[],"owner":{"account_id":6589148,"reputation":556,"user_id":5090996,"display_name":"Paul Bilnoski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638891981,"creation_date":1638891981,"answer_id":70263087,"question_id":70262220,"body_markdown":"You might try using a library like Apache POI https://poi.apache.org/ (see also https://poi.apache.org/components/spreadsheet/quick-guide.html) to handle writing in the custom XLS format. Writing to XLSX as XML might be possible with simple XML export, though you would have a lot of work to manually generate the proper output.","title":"write data into excel xls file using java","body":"<p>You might try using a library like Apache POI <a href=\"https://poi.apache.org/\" rel=\"nofollow noreferrer\">https://poi.apache.org/</a> (see also <a href=\"https://poi.apache.org/components/spreadsheet/quick-guide.html\" rel=\"nofollow noreferrer\">https://poi.apache.org/components/spreadsheet/quick-guide.html</a>) to handle writing in the custom XLS format. Writing to XLSX as XML might be possible with simple XML export, though you would have a lot of work to manually generate the proper output.</p>\n"}],"owner":{"account_id":20662456,"reputation":17,"user_id":15170137,"display_name":"codeitforfuture"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":462,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1638891981,"creation_date":1638888528,"question_id":70262220,"body_markdown":"i have data saved in a table (i already collected it from a file) and i want to write it in an Excel xls file using java \r\n\r\ni am sharing only the main class, because it shows how i save my data in a table \r\n\r\n```\r\npublic static void main(String args[]) throws FileNotFoundException {\r\n\t\t\r\n\t\tSylkParser test = new SylkParser();\r\n\t\t\r\n\t\tReader reader = new FileReader(&quot;file.slk&quot;); \r\n\t      \r\n\t\t\r\n\t\tList&lt;SylkRecord&gt; parsed = test.parseRecords(reader);\r\n\t\t\r\n\t\tSylkSheet sheet = new SylkSheet(parsed);\r\n\r\n\t\tString[][] table = new String[47][8];\r\n\t\t// print array in rectangular form\r\n\t\tfor (int i=1; i&lt;47; i++) {\r\n\t\t\tfor (int j=1; j&lt;8; j++) {\r\n\r\n\t\t\t\tString data = new String();\r\n\r\n\t\t\t\tif (sheet.getCell(i,j) == null) { data = &quot;&quot;; }\r\n\r\n\t\t\t\telse if (sheet.getCell(i,j).valueStr instanceof String) {data = sheet.getCell(i,j).valueStr; }\r\n\r\n\t\t\t\telse if (sheet.getCell(i,j).valueNumber instanceof Number) {data = sheet.getCell(i,j).valueNumber.toString();}\r\n\r\n\t\t\t\ttable[i][j]=data;//your value\r\n\t\t\t\tSystem.out.println(table[i][j]);\r\n\r\n\t\t\t}\r\n\t\t}\r\n}\r\n```","title":"write data into excel xls file using java","body":"<p>i have data saved in a table (i already collected it from a file) and i want to write it in an Excel xls file using java</p>\n<p>i am sharing only the main class, because it shows how i save my data in a table</p>\n<pre><code>public static void main(String args[]) throws FileNotFoundException {\n        \n        SylkParser test = new SylkParser();\n        \n        Reader reader = new FileReader(&quot;file.slk&quot;); \n          \n        \n        List&lt;SylkRecord&gt; parsed = test.parseRecords(reader);\n        \n        SylkSheet sheet = new SylkSheet(parsed);\n\n        String[][] table = new String[47][8];\n        // print array in rectangular form\n        for (int i=1; i&lt;47; i++) {\n            for (int j=1; j&lt;8; j++) {\n\n                String data = new String();\n\n                if (sheet.getCell(i,j) == null) { data = &quot;&quot;; }\n\n                else if (sheet.getCell(i,j).valueStr instanceof String) {data = sheet.getCell(i,j).valueStr; }\n\n                else if (sheet.getCell(i,j).valueNumber instanceof Number) {data = sheet.getCell(i,j).valueNumber.toString();}\n\n                table[i][j]=data;//your value\n                System.out.println(table[i][j]);\n\n            }\n        }\n}\n</code></pre>\n"},{"tags":["java","maven","maven-plugin"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1500633802,"post_id":45234590,"comment_id":77436841,"body_markdown":"`mvn dependency:tree`? what do you mean by programmatically ? For what purpose?","body":"<code>mvn dependency:tree</code>? what do you mean by programmatically ? For what purpose?"},{"owner":{"account_id":3593742,"reputation":207,"user_id":2999097,"accept_rate":45,"display_name":"Noshaf"},"score":0,"creation_date":1500633970,"post_id":45234590,"comment_id":77436947,"body_markdown":"i mean in java .. if jar file path is given can i get to know its dependents jars(3rd party jars) ?","body":"i mean in java .. if jar file path is given can i get to know its dependents jars(3rd party jars) ?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1500715350,"post_id":45234590,"comment_id":77469936,"body_markdown":"The jar file will not really help...cause you need to have a pom file (in general if you build the jar using Maven the pom file is usually contained in the jar but not necessarily). So far you have answered to use Java..but what is the purpose of this? What kind of problem are you trying to achieve?","body":"The jar file will not really help...cause you need to have a pom file (in general if you build the jar using Maven the pom file is usually contained in the jar but not necessarily). So far you have answered to use Java..but what is the purpose of this? What kind of problem are you trying to achieve?"}],"answers":[{"tags":[],"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1500636964,"creation_date":1500636964,"answer_id":45236673,"question_id":45234590,"body_markdown":"In general, this is difficult. What you can do:\r\n\r\n1. Grab the pom.xml of the jar, put it into an empty directory and call &quot;mvn dependency:list&quot; through ProcessBuilder. Parse the result and you have a list of the dependencies. This may fail, though, if the pom.xml cannot be interpreted as the pom of an independent project (e.g. if it is part of a multi-module build).\r\n\r\n2. Try Aether to determine a list of dependencies instead of using ProcessBuilder. The potential problems are the same as above.","title":"How to get Jar dependencies list","body":"<p>In general, this is difficult. What you can do:</p>\n\n<ol>\n<li><p>Grab the pom.xml of the jar, put it into an empty directory and call \"mvn dependency:list\" through ProcessBuilder. Parse the result and you have a list of the dependencies. This may fail, though, if the pom.xml cannot be interpreted as the pom of an independent project (e.g. if it is part of a multi-module build).</p></li>\n<li><p>Try Aether to determine a list of dependencies instead of using ProcessBuilder. The potential problems are the same as above.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1961485,"reputation":3248,"user_id":1762932,"accept_rate":84,"display_name":"Tom"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1500637120,"creation_date":1500637120,"answer_id":45236728,"question_id":45234590,"body_markdown":"The following brute force method can successfully get all the absolute paths of dependency (3rd party) jars. Replace &#39;FileUtils.getFileListRecursively&#39; and &#39;FileUtils.readLines&#39; with your own methods.\r\n\r\n\r\n    FileUtils.getFileListRecursively(&quot;src&quot;)\r\n\r\nreads the absolute file paths from the &#39;src&#39; folder of your current java project, and \r\n\r\n    FileUtils.readLines(filePath)\r\n\r\nreads the file as a text file and returns all lines as an ArrayList of Strings.\r\n\r\n\r\n\t\tHashSet&lt;String&gt; jarLocationsSet = new HashSet&lt;&gt;();\r\n\t\t\r\n\t\tfinal String importString = &quot;import &quot;;\r\n\t\tfinal String javaString = &quot;java&quot;;\r\n\t\tArrayList&lt;String&gt; fileList = FileUtils.getFileListRecursively(&quot;src&quot;);\r\n\t\tfor (String filePath : fileList) {\r\n\t\t\tif (filePath.endsWith(javaString) == false){\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tList&lt;String&gt; lines = FileUtils.readLines(filePath);\r\n\t\t\t\r\n\t\t\tfor (String line : lines) {\r\n\t\t\t\t\r\n\t\t\t\tint isecl = line.indexOf(&#39;;&#39;);\r\n\t\t\t\tif (line.contains(importString) == false || isecl &lt; 0){\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (line.contains(&quot;static&quot;)){\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tint start = line.indexOf(importString);\r\n\t\t\t\tline = line.substring(start + importString.length(), isecl);\r\n\t\t\t\tif (line.startsWith(javaString)){\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tClass&lt;?&gt; clazz = null;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tclazz = Class.forName(line, false, ClassLoader.getSystemClassLoader());\r\n\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t}\r\n\t\t\t\tif (clazz == null){\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tURL location = clazz.getResource(&#39;/&#39;+clazz.getName().replace(&#39;.&#39;, &#39;/&#39;) + &quot;.class&quot;);\r\n\t\t\t\tString locationString = location.toString();\r\n\t\t\t\tint jarIndex= locationString.indexOf(&quot;.jar&quot;);\r\n\t\t\t\tif (jarIndex &lt; 0){\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tlocationString = locationString.substring(0, jarIndex + 4);\r\n\t\t\t\tjarLocationsSet.add(locationString);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\t\r\n\t\tfor (String jarLocation : jarLocationsSet) {\r\n\t\t\tSystem.out.println(&quot;jarLocation = &quot; + jarLocation);\r\n\t\t}\r\n","title":"How to get Jar dependencies list","body":"<p>The following brute force method can successfully get all the absolute paths of dependency (3rd party) jars. Replace 'FileUtils.getFileListRecursively' and 'FileUtils.readLines' with your own methods.</p>\n\n<pre><code>FileUtils.getFileListRecursively(\"src\")\n</code></pre>\n\n<p>reads the absolute file paths from the 'src' folder of your current java project, and </p>\n\n<pre><code>FileUtils.readLines(filePath)\n</code></pre>\n\n<p>reads the file as a text file and returns all lines as an ArrayList of Strings.</p>\n\n<pre><code>    HashSet&lt;String&gt; jarLocationsSet = new HashSet&lt;&gt;();\n\n    final String importString = \"import \";\n    final String javaString = \"java\";\n    ArrayList&lt;String&gt; fileList = FileUtils.getFileListRecursively(\"src\");\n    for (String filePath : fileList) {\n        if (filePath.endsWith(javaString) == false){\n            continue;\n        }\n        List&lt;String&gt; lines = FileUtils.readLines(filePath);\n\n        for (String line : lines) {\n\n            int isecl = line.indexOf(';');\n            if (line.contains(importString) == false || isecl &lt; 0){\n                continue;\n            }\n            if (line.contains(\"static\")){\n                continue;\n            }\n            int start = line.indexOf(importString);\n            line = line.substring(start + importString.length(), isecl);\n            if (line.startsWith(javaString)){\n                continue;\n            }\n            Class&lt;?&gt; clazz = null;\n            try {\n                clazz = Class.forName(line, false, ClassLoader.getSystemClassLoader());\n            } catch (Exception e) {\n            }\n            if (clazz == null){\n                continue;\n            }\n\n\n            URL location = clazz.getResource('/'+clazz.getName().replace('.', '/') + \".class\");\n            String locationString = location.toString();\n            int jarIndex= locationString.indexOf(\".jar\");\n            if (jarIndex &lt; 0){\n                continue;\n            }\n            locationString = locationString.substring(0, jarIndex + 4);\n            jarLocationsSet.add(locationString);\n        }\n\n    }\n\n\n    for (String jarLocation : jarLocationsSet) {\n        System.out.println(\"jarLocation = \" + jarLocation);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13958266,"reputation":131,"user_id":10080018,"display_name":"Wei Wang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638891940,"creation_date":1638891940,"answer_id":70263078,"question_id":45234590,"body_markdown":"It&#39;s a bad idea to read the pom file and find out what&#39;s inside because one dependency can be imported with different version numbers several times by other dependencies, and it can get very deep, maven has its own way to decide which version to use. The general idea is to read the final jar file and find the folder where all the jars are inside.  \r\n\r\n\r\n```\r\nRuntimeMXBean bean = ManagementFactory.getRuntimeMXBean();\r\nString classPath = bean.getClassPath();//    /opt/spring-boot/app.jar\r\nZipFile jarFile = new ZipFile(classPath);\r\nEnumeration&lt;? extends ZipEntry&gt; entries = jarFile.entries();\r\nwhile (entries.hasMoreElements()) {\r\n                ZipEntry zipEntry = entries.nextElement();\r\n                if (!zipEntry.isDirectory()) {\r\n                 system.out.println( zipEntry.getName());  \r\n                }\r\n            }\r\n```","title":"How to get Jar dependencies list","body":"<p>It's a bad idea to read the pom file and find out what's inside because one dependency can be imported with different version numbers several times by other dependencies, and it can get very deep, maven has its own way to decide which version to use. The general idea is to read the final jar file and find the folder where all the jars are inside.</p>\n<pre><code>RuntimeMXBean bean = ManagementFactory.getRuntimeMXBean();\nString classPath = bean.getClassPath();//    /opt/spring-boot/app.jar\nZipFile jarFile = new ZipFile(classPath);\nEnumeration&lt;? extends ZipEntry&gt; entries = jarFile.entries();\nwhile (entries.hasMoreElements()) {\n                ZipEntry zipEntry = entries.nextElement();\n                if (!zipEntry.isDirectory()) {\n                 system.out.println( zipEntry.getName());  \n                }\n            }\n</code></pre>\n"}],"owner":{"account_id":3593742,"reputation":207,"user_id":2999097,"accept_rate":45,"display_name":"Noshaf"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5379,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":45236673,"answer_count":3,"score":3,"last_activity_date":1638891940,"creation_date":1500630831,"question_id":45234590,"body_markdown":"I want to list down all the dependencies of jar file which is created through maven project build. How can I acheive this in java ? I know it through maven command `mvn:dependency` but i want to do it programmatically..\r\nAny Help?","title":"How to get Jar dependencies list","body":"<p>I want to list down all the dependencies of jar file which is created through maven project build. How can I acheive this in java ? I know it through maven command <code>mvn:dependency</code> but i want to do it programmatically..\nAny Help?</p>\n"},{"tags":["java","spring-boot","maven","vaadin14"],"comments":[{"owner":{"account_id":18559092,"reputation":521,"user_id":13523483,"display_name":"Mikael Grankvist"},"score":0,"creation_date":1638868182,"post_id":70248918,"comment_id":124195769,"body_markdown":"Could you give some code sample on this as using https://github.com/vaadin/skeleton-starter-flow/tree/v14 with 14.7.4 (also 14.6.0) the `CssImport` works as it should in that case. With default lumo and defined material theme. So I don&#39;t really know what extra to try with in this case.","body":"Could you give some code sample on this as using <a href=\"https://github.com/vaadin/skeleton-starter-flow/tree/v14\" rel=\"nofollow noreferrer\">github.com/vaadin/skeleton-starter-flow/tree/v14</a> with 14.7.4 (also 14.6.0) the <code>CssImport</code> works as it should in that case. With default lumo and defined material theme. So I don&#39;t really know what extra to try with in this case."},{"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"score":1,"creation_date":1638872907,"post_id":70248918,"comment_id":124197490,"body_markdown":"I&#39;ve created a minimum working example (with the structure in my question) to post here - and it works. I&#39;m now officially confused as I haven&#39;t a clue what&#39;s the difference. When I&#39;ve found it, I will report.","body":"I&#39;ve created a minimum working example (with the structure in my question) to post here - and it works. I&#39;m now officially confused as I haven&#39;t a clue what&#39;s the difference. When I&#39;ve found it, I will report."},{"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"score":0,"creation_date":1638888024,"post_id":70248918,"comment_id":124203719,"body_markdown":"@MikaelGrankvist the problem got caused by the plugin &quot;tinymce-for-flow&quot;, which prior to the newest version had a resource path that contained &quot;themes&quot;.","body":"@MikaelGrankvist the problem got caused by the plugin &quot;tinymce-for-flow&quot;, which prior to the newest version had a resource path that contained &quot;themes&quot;."},{"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"score":0,"creation_date":1638891534,"post_id":70248918,"comment_id":124205338,"body_markdown":"I&#39;ve created an issue on Github for this: https://github.com/vaadin/platform/issues/2596","body":"I&#39;ve created an issue on Github for this: <a href=\"https://github.com/vaadin/platform/issues/2596\" rel=\"nofollow noreferrer\">github.com/vaadin/platform/issues/2596</a>"}],"answers":[{"tags":[],"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1638891821,"creation_date":1638891821,"answer_id":70263050,"question_id":70248918,"body_markdown":"The critical information missing was a Vaadin webcomponent named &quot;TinyMCE for Flow&quot; that was the reason for this behavior. Don&#39;t know why it broke so much. \r\nThe solution was to update it to the newest version (3.1.1).","title":"Is Vaadin&#39;s CssImport annotation broken?","body":"<p>The critical information missing was a Vaadin webcomponent named &quot;TinyMCE for Flow&quot; that was the reason for this behavior. Don't know why it broke so much.\nThe solution was to update it to the newest version (3.1.1).</p>\n"}],"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70263050,"answer_count":1,"score":1,"last_activity_date":1638891821,"creation_date":1638809114,"question_id":70248918,"body_markdown":"we&#39;ve used Vaadin 14.5 and the `@CssImport` for custom CSS worked fine.\r\nNow we wanted to update but since 14.6 the `@CssImport` doesn&#39;t load the custom CSS anymore.\r\n\r\nWe have the following Maven structure:\r\n\r\n```\r\n- app-1, -2... : the apps that have common code and style\r\n\r\n- shared : all the code and style we share between our apps\r\n |\r\n +- src/main/java/our/package/AbstractUI.java\r\n |\r\n  - src/main/resources/META-INF/resources/frontend/\r\n   |\r\n   +- css\r\n      |  \r\n      +-styles.css\r\n      |\r\n       - vaadin-vertical-layout.css\r\n\r\n```\r\n\r\nIn the shared artifact we have several custom CSS files for Vaadin components, where we address the CSS that has to be adjusted in the shadow DOMs:\r\n```css\r\nvaadin-vertical-layout.css\r\n/* Page */\r\n:host(.Page) {\r\n\tleft: 64px;\r\n\tpadding-top: 2em;\r\n\tposition: absolute;\r\n\ttransition: all 0.5s ease;\r\n\twidth: calc(100% - 64px);\r\n}\r\n```\r\n\r\nAnd then we load all these custom CSS in the class `AbstractUI`, that is the super class for all the other UI classes:\r\n```java\r\n@StyleSheet(&quot;./css/styles.css&quot;)\r\n...\r\n@CssImport(value = &quot;./css/vaadin-vertical-layout.css&quot;, themeFor = &quot;vaadin-vertical-layout&quot;)\r\n@Theme(value = Material.class, variant = Material.LIGHT)\r\npublic abstract class AbstractUI extends VerticalLayout { \r\n```\r\nThe apps then don&#39;t have to bother with all the annotations and can simply extend `AbstractUI` and the CSS is loaded and added to the existing shadow DOM CSS.\r\n\r\nThat worked fine with Vaadin 14 up to 14.5.5, but after 14.6.0 the custom CSS is no longer loaded. The `vaadin-maven-plugin` does check for the existence of the CSS files when building the frontend (and quits with an error if they aren&#39;t there), but in the application \r\nthe CSS just isn&#39;t loaded.\r\nTo clarify: the `@StyleSheet` annotation still works, so that CSS is loaded.\r\n\r\nIs this a bug in Vaadin or do we miss some critical information?","title":"Is Vaadin&#39;s CssImport annotation broken?","body":"<p>we've used Vaadin 14.5 and the <code>@CssImport</code> for custom CSS worked fine.\nNow we wanted to update but since 14.6 the <code>@CssImport</code> doesn't load the custom CSS anymore.</p>\n<p>We have the following Maven structure:</p>\n<pre><code>- app-1, -2... : the apps that have common code and style\n\n- shared : all the code and style we share between our apps\n |\n +- src/main/java/our/package/AbstractUI.java\n |\n  - src/main/resources/META-INF/resources/frontend/\n   |\n   +- css\n      |  \n      +-styles.css\n      |\n       - vaadin-vertical-layout.css\n\n</code></pre>\n<p>In the shared artifact we have several custom CSS files for Vaadin components, where we address the CSS that has to be adjusted in the shadow DOMs:</p>\n<pre class=\"lang-css prettyprint-override\"><code>vaadin-vertical-layout.css\n/* Page */\n:host(.Page) {\n    left: 64px;\n    padding-top: 2em;\n    position: absolute;\n    transition: all 0.5s ease;\n    width: calc(100% - 64px);\n}\n</code></pre>\n<p>And then we load all these custom CSS in the class <code>AbstractUI</code>, that is the super class for all the other UI classes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@StyleSheet(&quot;./css/styles.css&quot;)\n...\n@CssImport(value = &quot;./css/vaadin-vertical-layout.css&quot;, themeFor = &quot;vaadin-vertical-layout&quot;)\n@Theme(value = Material.class, variant = Material.LIGHT)\npublic abstract class AbstractUI extends VerticalLayout { \n</code></pre>\n<p>The apps then don't have to bother with all the annotations and can simply extend <code>AbstractUI</code> and the CSS is loaded and added to the existing shadow DOM CSS.</p>\n<p>That worked fine with Vaadin 14 up to 14.5.5, but after 14.6.0 the custom CSS is no longer loaded. The <code>vaadin-maven-plugin</code> does check for the existence of the CSS files when building the frontend (and quits with an error if they aren't there), but in the application\nthe CSS just isn't loaded.\nTo clarify: the <code>@StyleSheet</code> annotation still works, so that CSS is loaded.</p>\n<p>Is this a bug in Vaadin or do we miss some critical information?</p>\n"},{"tags":["java","windows","ssl-certificate","keystore"],"comments":[{"owner":{"account_id":1938802,"reputation":12091,"user_id":1745544,"accept_rate":23,"display_name":"OldProgrammer"},"score":0,"creation_date":1638893195,"post_id":70263049,"comment_id":124206067,"body_markdown":".msc files are console manager plugins, not certificates.","body":".msc files are console manager plugins, not certificates."},{"owner":{"account_id":16619110,"reputation":101,"user_id":12009987,"display_name":"Sylvester"},"score":0,"creation_date":1638893570,"post_id":70263049,"comment_id":124206190,"body_markdown":"I did not say, they are certificates. They are certificate manager tools.","body":"I did not say, they are certificates. They are certificate manager tools."}],"owner":{"account_id":16619110,"reputation":101,"user_id":12009987,"display_name":"Sylvester"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":968,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1638891818,"creation_date":1638891818,"question_id":70263049,"body_markdown":"On Windows 10/11, I can either import a certificate to certmgr.msc and certlm.msc. If I understand this right, **certmgr.msc** stores the certificates and keys of the **local user**, while **certlm.msc** stores the certificates and keys of the **local machine**.\r\n\r\nI can read certificates which were imported to certmgr.msc with a java application like this:\r\n\r\n``` \r\nKeyStore keyStore;\r\nkeyStore = KeyStore.getInstance(&quot;Windows-MY&quot;);\r\nkeyStore.load(null, null);\r\n\r\nKeyStore trustStore;\r\ntrustStore = KeyStore.getInstance(&quot;Windows-ROOT&quot;);\r\ntrustStore.load(null, null);\r\n```\r\n\r\nHowever this code snippet does not read the certificates and keys which I imported to certlm.msc. How can I do that?","title":"How can I read the contents of Windows&#39;s certlm.msc to a Keystore in java?","body":"<p>On Windows 10/11, I can either import a certificate to certmgr.msc and certlm.msc. If I understand this right, <strong>certmgr.msc</strong> stores the certificates and keys of the <strong>local user</strong>, while <strong>certlm.msc</strong> stores the certificates and keys of the <strong>local machine</strong>.</p>\n<p>I can read certificates which were imported to certmgr.msc with a java application like this:</p>\n<pre><code>KeyStore keyStore;\nkeyStore = KeyStore.getInstance(&quot;Windows-MY&quot;);\nkeyStore.load(null, null);\n\nKeyStore trustStore;\ntrustStore = KeyStore.getInstance(&quot;Windows-ROOT&quot;);\ntrustStore.load(null, null);\n</code></pre>\n<p>However this code snippet does not read the certificates and keys which I imported to certlm.msc. How can I do that?</p>\n"},{"tags":["java","android","arraylist"],"comments":[{"owner":{"account_id":11172549,"reputation":124,"user_id":8199125,"display_name":"Ali Babadi"},"score":0,"creation_date":1638893447,"post_id":70262992,"comment_id":124206144,"body_markdown":"You can&#39;t, LuckyWheel Library only accepts data of type `LuckyItem` You should use a converter to convert your custom data to `LuckyItem`","body":"You can&#39;t, LuckyWheel Library only accepts data of type <code>LuckyItem</code> You should use a converter to convert your custom data to <code>LuckyItem</code>"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1638895384,"post_id":70262992,"comment_id":124206951,"body_markdown":"Poor title. Rewrite to summarize your specific technical issue.","body":"Poor title. Rewrite to summarize your specific technical issue."}],"owner":{"account_id":23573274,"reputation":1,"user_id":17613205,"display_name":"Ruslan Emelianov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1638891591,"creation_date":1638891591,"question_id":70262992,"body_markdown":"Hello I am new to programming\r\n\r\nI am using this library &lt;https://github.com/thanhniencung/LuckyWheel&gt;\r\n\r\nHow to use user-created data in the Wheel?\r\n\r\n`ArrayList&lt;String&gt; Item = getIntent().getStringArrayListExtra(&quot;key&quot;);`\r\n\r\n```\r\n\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.Toast;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Random;\r\n\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport rubikstudio.library.LuckyWheelView;\r\nimport rubikstudio.library.model.LuckyItem;\r\n\r\npublic class Game extends AppCompatActivity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.new_wheel);\r\n\r\n        ArrayList&lt;String&gt; Item = getIntent().getStringArrayListExtra(&quot;key&quot;);\r\n\r\n\r\n        LuckyWheelView luckyWheelView = findViewById(R.id.wheel);\r\n        List&lt;LuckyItem&gt; data = new ArrayList&lt;LuckyItem&gt;();\r\n        for (int i = 0; i &lt; 12; i++) {\r\n            LuckyItem luckyItem = new LuckyItem();\r\n            luckyItem.secondaryText = &quot;Item&quot;+i;\r\n            data.add(luckyItem);\r\n        }\r\n\r\n        luckyWheelView.setData(data);\r\n        luckyWheelView.setRound(getRandomRound());\r\n        luckyWheelView.setLuckyWheelBackgrouldColor(R.array.color_wheel);\r\n\r\n        Button Button = findViewById(R.id.play);\r\n        Button.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                int index = getRandomIndex();\r\n                luckyWheelView.startLuckyWheelWithTargetIndex(index);\r\n            }\r\n        });\r\n        luckyWheelView.setLuckyRoundItemSelectedListener(new LuckyWheelView.LuckyRoundItemSelectedListener() {\r\n            @Override\r\n            public void LuckyRoundItemSelected(int index) {\r\n                if (index == 0){\r\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\r\n                }\r\n                if (index == 1){\r\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\r\n                }\r\n                if (index == 2){\r\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\r\n                }\r\n                if (index == 3){\r\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\r\n                }\r\n                if (index == 4){\r\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\r\n                }\r\n                if (index == 5){\r\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\r\n                }\r\n                if (index == 6){\r\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\r\n                }\r\n                if (index == 7){\r\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\r\n                }\r\n                if (index == 8){\r\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\r\n                }\r\n                if (index == 9){\r\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\r\n                }\r\n                if (index == 10){\r\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\r\n                }\r\n                if (index == 11){\r\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\r\n                }\r\n            }\r\n        });\r\n    }\r\n    private int getRandomRound() {\r\n        Random rand = new Random();\r\n        return rand.nextInt(5) + 8;\r\n    }\r\n\r\n    private int getRandomIndex() {\r\n        int[] ind = new int[]{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12};\r\n        int rand = new Random().nextInt(ind.length);\r\n        return ind[rand];\r\n    }\r\n    }\r\n\r\n```","title":"Interaction Array List and Lucky Wheel","body":"<p>Hello I am new to programming</p>\n<p>I am using this library <a href=\"https://github.com/thanhniencung/LuckyWheel\" rel=\"nofollow noreferrer\">https://github.com/thanhniencung/LuckyWheel</a></p>\n<p>How to use user-created data in the Wheel?</p>\n<p><code>ArrayList&lt;String&gt; Item = getIntent().getStringArrayListExtra(&quot;key&quot;);</code></p>\n<pre><code>\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.Toast;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Random;\n\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport rubikstudio.library.LuckyWheelView;\nimport rubikstudio.library.model.LuckyItem;\n\npublic class Game extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.new_wheel);\n\n        ArrayList&lt;String&gt; Item = getIntent().getStringArrayListExtra(&quot;key&quot;);\n\n\n        LuckyWheelView luckyWheelView = findViewById(R.id.wheel);\n        List&lt;LuckyItem&gt; data = new ArrayList&lt;LuckyItem&gt;();\n        for (int i = 0; i &lt; 12; i++) {\n            LuckyItem luckyItem = new LuckyItem();\n            luckyItem.secondaryText = &quot;Item&quot;+i;\n            data.add(luckyItem);\n        }\n\n        luckyWheelView.setData(data);\n        luckyWheelView.setRound(getRandomRound());\n        luckyWheelView.setLuckyWheelBackgrouldColor(R.array.color_wheel);\n\n        Button Button = findViewById(R.id.play);\n        Button.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                int index = getRandomIndex();\n                luckyWheelView.startLuckyWheelWithTargetIndex(index);\n            }\n        });\n        luckyWheelView.setLuckyRoundItemSelectedListener(new LuckyWheelView.LuckyRoundItemSelectedListener() {\n            @Override\n            public void LuckyRoundItemSelected(int index) {\n                if (index == 0){\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\n                }\n                if (index == 1){\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\n                }\n                if (index == 2){\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\n                }\n                if (index == 3){\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\n                }\n                if (index == 4){\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\n                }\n                if (index == 5){\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\n                }\n                if (index == 6){\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\n                }\n                if (index == 7){\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\n                }\n                if (index == 8){\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\n                }\n                if (index == 9){\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\n                }\n                if (index == 10){\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\n                }\n                if (index == 11){\n                    Toast.makeText(getApplicationContext(), data.get(index).secondaryText, Toast.LENGTH_LONG).show();\n                }\n            }\n        });\n    }\n    private int getRandomRound() {\n        Random rand = new Random();\n        return rand.nextInt(5) + 8;\n    }\n\n    private int getRandomIndex() {\n        int[] ind = new int[]{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12};\n        int rand = new Random().nextInt(ind.length);\n        return ind[rand];\n    }\n    }\n\n</code></pre>\n"},{"tags":["java","android","scoped-storage"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1638892865,"post_id":70262963,"comment_id":124205919,"body_markdown":"Environment.isExternalStorageLegacy().","body":"Environment.isExternalStorageLegacy()."},{"owner":{"account_id":13776356,"reputation":2129,"user_id":9942608,"display_name":"Himanshi Thakur"},"score":0,"creation_date":1639719997,"post_id":70262963,"comment_id":124425747,"body_markdown":"Hope this answer can help you https://stackoverflow.com/a/58451482/9942608 .","body":"Hope this answer can help you <a href=\"https://stackoverflow.com/a/58451482/9942608\">stackoverflow.com/a/58451482/9942608</a> ."}],"owner":{"account_id":1433045,"reputation":794,"user_id":1354997,"accept_rate":34,"display_name":"Pink Jazz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1638891465,"creation_date":1638891465,"question_id":70262963,"body_markdown":"I am migrating my app over to Scoped Storage and have included the `preserveLegacyExternalStorage=&quot;true&quot;` flag in the manifest.  I would like to know if there is some way to test if the app is using legacy storage or not.  Part of my app&#39;s functionality depends on legacy storage, and simply changing it to scoped storage will break it, regardless of the flag in the manifest, so I need some way to detect legacy storage, or at least switch to scoped storage if legacy storage fails.","title":"Scoped Storage (Java) - How to test if app is using legacy storage?","body":"<p>I am migrating my app over to Scoped Storage and have included the <code>preserveLegacyExternalStorage=&quot;true&quot;</code> flag in the manifest.  I would like to know if there is some way to test if the app is using legacy storage or not.  Part of my app's functionality depends on legacy storage, and simply changing it to scoped storage will break it, regardless of the flag in the manifest, so I need some way to detect legacy storage, or at least switch to scoped storage if legacy storage fails.</p>\n"},{"tags":["java","spring","spring-boot","spring-kafka","spring-cloud-stream"],"comments":[{"owner":{"account_id":445335,"reputation":5970,"user_id":837717,"display_name":"Oleg Zhurakousky"},"score":0,"creation_date":1638885444,"post_id":70260291,"comment_id":124202529,"body_markdown":"Consider posting a complete example that reproduces the issue to Github and leaving a link here, this way we can take a look what&#39;s wrong with your app","body":"Consider posting a complete example that reproduces the issue to Github and leaving a link here, this way we can take a look what&#39;s wrong with your app"},{"owner":{"account_id":15864507,"reputation":23,"user_id":11446833,"display_name":"karun"},"score":0,"creation_date":1638885863,"post_id":70260291,"comment_id":124202721,"body_markdown":"@OlegZhurakousky done, please take a look https://github.com/karunvarma/auth-service","body":"@OlegZhurakousky done, please take a look <a href=\"https://github.com/karunvarma/auth-service\" rel=\"nofollow noreferrer\">github.com/karunvarma/auth-service</a>"},{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1638973522,"post_id":70260291,"comment_id":124229637,"body_markdown":"See also my answer","body":"See also my answer"}],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1638891194,"creation_date":1638891194,"answer_id":70262899,"question_id":70260291,"body_markdown":"For `&lt;spring-cloud.version&gt;2021.0.0&lt;/spring-cloud.version&gt;` you have to use:\r\n\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.6.1&lt;/version&gt;\r\n\r\nThe `poller` configuration has been removed from Spring Cloud Stream `3.2.x` in favor of respective auto-configuration in Spring Boot: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#messaging.spring-integration","title":"spring cloud stream kafka: : Error creating bean with name &#39;supplierInitializer&#39; defined in class path resource","body":"<p>For <code>&lt;spring-cloud.version&gt;2021.0.0&lt;/spring-cloud.version&gt;</code> you have to use:</p>\n<pre><code>    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.6.1&lt;/version&gt;\n</code></pre>\n<p>The <code>poller</code> configuration has been removed from Spring Cloud Stream <code>3.2.x</code> in favor of respective auto-configuration in Spring Boot: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#messaging.spring-integration\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#messaging.spring-integration</a></p>\n"}],"owner":{"account_id":15864507,"reputation":23,"user_id":11446833,"display_name":"karun"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4665,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70262899,"answer_count":1,"score":0,"last_activity_date":1638891194,"creation_date":1638880776,"question_id":70260291,"body_markdown":"&gt; In the event you only have single bean of type java.util.function.[Supplier/Function/Consumer],  you can skip the spring.cloud.function.definition property, since such functional bean will be &gt; &gt; auto-discovered. However, it is considered best practice to use such property to avoid any \r\n  confusion.\r\n\r\nSo I do have multiple beans in my project but still only one bean of type supplier.\r\n\r\nNot sure what exactly what I am missing.\r\n\r\n\r\n**EXCEPTION TRACE**:\r\n```\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;supplierInitializer&#39; defined in class path resource [org/springframework/cloud/stream/function/FunctionConfiguration.class]: Invocation of init method failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userProducer-out-0_spca&#39;: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: No poller has been defined for channel-adapter &#39;userProducer-out-0_spca&#39;, and no default poller is available within the context.\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.12.jar:5.3.12]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.12.jar:5.3.12]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.12.jar:5.3.12]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.12.jar:5.3.12]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.12.jar:5.3.12]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.12.jar:5.3.12]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.12.jar:5.3.12]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:944) ~[spring-beans-5.3.12.jar:5.3.12]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.12.jar:5.3.12]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.12.jar:5.3.12]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.5.6.jar:2.5.6]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-2.5.6.jar:2.5.6]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434) ~[spring-boot-2.5.6.jar:2.5.6]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:338) ~[spring-boot-2.5.6.jar:2.5.6]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1343) ~[spring-boot-2.5.6.jar:2.5.6]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1332) ~[spring-boot-2.5.6.jar:2.5.6]\r\n\tat com.moments.auth.AuthApplication.main(AuthApplication.java:16) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.5.6.jar:2.5.6]\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userProducer-out-0_spca&#39;: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: No poller has been defined for channel-adapter &#39;userProducer-out-0_spca&#39;, and no default poller is available within the context.\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.12.jar:5.3.12]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.12.jar:5.3.12]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.12.jar:5.3.12]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.12.jar:5.3.12]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.12.jar:5.3.12]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.12.jar:5.3.12]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.12.jar:5.3.12]\r\n\tat org.springframework.integration.dsl.context.IntegrationFlowBeanPostProcessor.registerComponent(IntegrationFlowBeanPostProcessor.java:456) ~[spring-integration-core-5.5.5.jar:5.5.5]\r\n\tat org.springframework.integration.dsl.context.IntegrationFlowBeanPostProcessor.processStandardIntegrationFlow(IntegrationFlowBeanPostProcessor.java:234) ~[spring-integration-core-5.5.5.jar:5.5.5]\r\n\tat org.springframework.integration.dsl.context.IntegrationFlowBeanPostProcessor.postProcessBeforeInitialization(IntegrationFlowBeanPostProcessor.java:116) ~[spring-integration-core-5.5.5.jar:5.5.5]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:440) ~[spring-beans-5.3.12.jar:5.3.12]\r\n\tat org.springframework.cloud.stream.function.FunctionConfiguration$1.afterPropertiesSet(FunctionConfiguration.java:241) ~[spring-cloud-stream-3.2.1.jar:3.2.1]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.12.jar:5.3.12]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.12.jar:5.3.12]\r\n\t... 21 common frames omitted\r\nCaused by: java.lang.IllegalArgumentException: No poller has been defined for channel-adapter &#39;userProducer-out-0_spca&#39;, and no default poller is available within the context.\r\n\tat org.springframework.util.Assert.notNull(Assert.java:219) ~[spring-core-5.3.12.jar:5.3.12]\r\n\tat org.springframework.integration.config.SourcePollingChannelAdapterFactoryBean.initializeAdapter(SourcePollingChannelAdapterFactoryBean.java:181) ~[spring-integration-core-5.5.5.jar:5.5.5]\r\n\tat org.springframework.integration.config.SourcePollingChannelAdapterFactoryBean.afterPropertiesSet(SourcePollingChannelAdapterFactoryBean.java:144) ~[spring-integration-core-5.5.5.jar:5.5.5]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.12.jar:5.3.12]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.12.jar:5.3.12]\r\n\t... 34 common frames omitted\r\n\r\n```\r\n\r\n\r\n**POM.XML**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.5.6&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.moments&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;auth&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;auth&lt;/name&gt;\r\n\t&lt;description&gt;Auth service&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n\t\t&lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n\t\t&lt;spring-cloud.version&gt;2021.0.0&lt;/spring-cloud.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.5.5&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jjwt&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.9.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-stream-kafka --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-stream&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-stream-binder-kafka&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n&lt;!--\t\t&lt;dependency&gt;--&gt;\r\n&lt;!--\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;--&gt;\r\n&lt;!--\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;--&gt;\r\n&lt;!--\t\t\t&lt;scope&gt;test&lt;/scope&gt;--&gt;\r\n&lt;!--\t\t&lt;/dependency&gt;--&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;source&gt;16&lt;/source&gt;\r\n\t\t\t\t\t&lt;target&gt;16&lt;/target&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n\r\nStarter code:\r\n\r\n```\r\n@SpringBootApplication\r\npublic class AuthApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(AuthApplication.class, args);\r\n\t}\r\n\r\n\r\n\t@Bean\r\n\tpublic Supplier&lt;String&gt; userProducer() {\r\n\t\treturn () -&gt; &quot;hello&quot;;\r\n\t}\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n**YML File**\r\n```\r\nspring:\r\n  cloud.stream:\r\n    function.definition : userProducer\r\n\r\n    bindings:\r\n      userProducer-out-0:\r\n        destination: users # topic\r\n\r\n    kafka.binder:\r\n      brokers: localhost\r\n      configuration:\r\n        key:\r\n          serializer: org.apache.kafka.common.serialization.StringSerializer\r\n      defaultBrokerPort: 9002\r\n\r\n```\r\n\r\n\r\n","title":"spring cloud stream kafka: : Error creating bean with name &#39;supplierInitializer&#39; defined in class path resource","body":"<blockquote>\n<p>In the event you only have single bean of type java.util.function.[Supplier/Function/Consumer],  you can skip the spring.cloud.function.definition property, since such functional bean will be &gt; &gt; auto-discovered. However, it is considered best practice to use such property to avoid any\nconfusion.</p>\n</blockquote>\n<p>So I do have multiple beans in my project but still only one bean of type supplier.</p>\n<p>Not sure what exactly what I am missing.</p>\n<p><strong>EXCEPTION TRACE</strong>:</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'supplierInitializer' defined in class path resource [org/springframework/cloud/stream/function/FunctionConfiguration.class]: Invocation of init method failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userProducer-out-0_spca': Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: No poller has been defined for channel-adapter 'userProducer-out-0_spca', and no default poller is available within the context.\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.12.jar:5.3.12]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.12.jar:5.3.12]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.12.jar:5.3.12]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.12.jar:5.3.12]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.12.jar:5.3.12]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.12.jar:5.3.12]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.12.jar:5.3.12]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:944) ~[spring-beans-5.3.12.jar:5.3.12]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.12.jar:5.3.12]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.12.jar:5.3.12]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.5.6.jar:2.5.6]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-2.5.6.jar:2.5.6]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434) ~[spring-boot-2.5.6.jar:2.5.6]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:338) ~[spring-boot-2.5.6.jar:2.5.6]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343) ~[spring-boot-2.5.6.jar:2.5.6]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1332) ~[spring-boot-2.5.6.jar:2.5.6]\n    at com.moments.auth.AuthApplication.main(AuthApplication.java:16) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.5.6.jar:2.5.6]\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userProducer-out-0_spca': Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: No poller has been defined for channel-adapter 'userProducer-out-0_spca', and no default poller is available within the context.\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.12.jar:5.3.12]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.12.jar:5.3.12]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.12.jar:5.3.12]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.12.jar:5.3.12]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.12.jar:5.3.12]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.12.jar:5.3.12]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.12.jar:5.3.12]\n    at org.springframework.integration.dsl.context.IntegrationFlowBeanPostProcessor.registerComponent(IntegrationFlowBeanPostProcessor.java:456) ~[spring-integration-core-5.5.5.jar:5.5.5]\n    at org.springframework.integration.dsl.context.IntegrationFlowBeanPostProcessor.processStandardIntegrationFlow(IntegrationFlowBeanPostProcessor.java:234) ~[spring-integration-core-5.5.5.jar:5.5.5]\n    at org.springframework.integration.dsl.context.IntegrationFlowBeanPostProcessor.postProcessBeforeInitialization(IntegrationFlowBeanPostProcessor.java:116) ~[spring-integration-core-5.5.5.jar:5.5.5]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:440) ~[spring-beans-5.3.12.jar:5.3.12]\n    at org.springframework.cloud.stream.function.FunctionConfiguration$1.afterPropertiesSet(FunctionConfiguration.java:241) ~[spring-cloud-stream-3.2.1.jar:3.2.1]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.12.jar:5.3.12]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.12.jar:5.3.12]\n    ... 21 common frames omitted\nCaused by: java.lang.IllegalArgumentException: No poller has been defined for channel-adapter 'userProducer-out-0_spca', and no default poller is available within the context.\n    at org.springframework.util.Assert.notNull(Assert.java:219) ~[spring-core-5.3.12.jar:5.3.12]\n    at org.springframework.integration.config.SourcePollingChannelAdapterFactoryBean.initializeAdapter(SourcePollingChannelAdapterFactoryBean.java:181) ~[spring-integration-core-5.5.5.jar:5.5.5]\n    at org.springframework.integration.config.SourcePollingChannelAdapterFactoryBean.afterPropertiesSet(SourcePollingChannelAdapterFactoryBean.java:144) ~[spring-integration-core-5.5.5.jar:5.5.5]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.12.jar:5.3.12]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.12.jar:5.3.12]\n    ... 34 common frames omitted\n\n</code></pre>\n<p><strong>POM.XML</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.5.6&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.moments&lt;/groupId&gt;\n    &lt;artifactId&gt;auth&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;auth&lt;/name&gt;\n    &lt;description&gt;Auth service&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n        &lt;spring-cloud.version&gt;2021.0.0&lt;/spring-cloud.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n            &lt;version&gt;2.5.5&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\n            &lt;version&gt;0.9.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-stream-kafka --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-stream&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-stream-binder-kafka&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n&lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;--&gt;\n&lt;!--            &lt;scope&gt;test&lt;/scope&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n    &lt;/dependencies&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;16&lt;/source&gt;\n                    &lt;target&gt;16&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>Starter code:</p>\n<pre><code>@SpringBootApplication\npublic class AuthApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(AuthApplication.class, args);\n    }\n\n\n    @Bean\n    public Supplier&lt;String&gt; userProducer() {\n        return () -&gt; &quot;hello&quot;;\n    }\n}\n\n</code></pre>\n<p><strong>YML File</strong></p>\n<pre><code>spring:\n  cloud.stream:\n    function.definition : userProducer\n\n    bindings:\n      userProducer-out-0:\n        destination: users # topic\n\n    kafka.binder:\n      brokers: localhost\n      configuration:\n        key:\n          serializer: org.apache.kafka.common.serialization.StringSerializer\n      defaultBrokerPort: 9002\n\n</code></pre>\n"},{"tags":["java","maven","build","apache-poi","xmlbeans"],"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1632261442,"post_id":69274700,"comment_id":122443740,"body_markdown":"Do you have an older version of XMLBeans on your classpath? Looks like it is using an old one, not the one that Apache POI pulls in","body":"Do you have an older version of XMLBeans on your classpath? Looks like it is using an old one, not the one that Apache POI pulls in"},{"owner":{"account_id":964210,"reputation":1018,"user_id":987959,"display_name":"PJ Fanning"},"score":0,"creation_date":1632314298,"post_id":69274700,"comment_id":122457849,"body_markdown":"this looks like a duplicate of https://stackoverflow.com/questions/62177218/error-when-reading-values-from-excel-files-using-apache-poi-4-1-1","body":"this looks like a duplicate of <a href=\"https://stackoverflow.com/questions/62177218/error-when-reading-values-from-excel-files-using-apache-poi-4-1-1\" title=\"error when reading values from excel files using apache poi 4 1 1\">stackoverflow.com/questions/62177218/&hellip;</a>"}],"owner":{"account_id":13343490,"reputation":53,"user_id":9631002,"display_name":"lee"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1656,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1638890945,"creation_date":1632253224,"question_id":69274700,"body_markdown":"I am trying to update:\r\n\r\n    groupId  org.apache.poi\r\n    artifactId  poi-ooxmlartifactId\r\n    version  4.1.1  version\r\n\r\nto: \r\n\r\n    version 5.0.0  version\r\n\r\nBut for code it fail for 5.0.0 as:\r\n\r\n&gt; java: cannot access org.apache.xmlbeans.xml.stream.XMLInputStream\r\n&gt; class file for org.apache.xmlbeans.xml.stream.XMLInputStream not found","title":"How can I upgrade org.apache.poi of poi-ooxml from 4.1.1 to 5.0.0?","body":"<p>I am trying to update:</p>\n<pre><code>groupId  org.apache.poi\nartifactId  poi-ooxmlartifactId\nversion  4.1.1  version\n</code></pre>\n<p>to:</p>\n<pre><code>version 5.0.0  version\n</code></pre>\n<p>But for code it fail for 5.0.0 as:</p>\n<blockquote>\n<p>java: cannot access org.apache.xmlbeans.xml.stream.XMLInputStream\nclass file for org.apache.xmlbeans.xml.stream.XMLInputStream not found</p>\n</blockquote>\n"},{"tags":["java","datetimeformatter"],"comments":[{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1638793284,"post_id":70245250,"comment_id":124174401,"body_markdown":"https://stackoverflow.com/questions/26393594/using-new-java-8-datetimeformatter-to-do-strict-date-parsing","body":"<a href=\"https://stackoverflow.com/questions/26393594/using-new-java-8-datetimeformatter-to-do-strict-date-parsing\" title=\"using new java 8 datetimeformatter to do strict date parsing\">stackoverflow.com/questions/26393594/&hellip;</a>"},{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1638793297,"post_id":70245250,"comment_id":124174406,"body_markdown":"https://stackoverflow.com/questions/41103603/issue-with-datetimeparseexception-when-using-strict-resolver-style","body":"<a href=\"https://stackoverflow.com/questions/41103603/issue-with-datetimeparseexception-when-using-strict-resolver-style\" title=\"issue with datetimeparseexception when using strict resolver style\">stackoverflow.com/questions/41103603/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1638890907,"creation_date":1638793246,"answer_id":70245422,"question_id":70245250,"body_markdown":"That&#39;s because `yyyy` means *year-of-era*. `STRICT`ly speaking, such date probably expects &quot;AD&quot; or &quot;BC&quot; to be present.\r\n\r\nIf you change the pattern string to\r\n\r\n```java\r\nuuuuMMdd\r\n```\r\n\r\nit&#39;ll work.\r\n\r\nDespite the fact that `yyyy` *looks* like a natural way to express &quot;the current year&quot;, it does not actually *mean* &quot;the current year&quot;, but rather &quot;the current year in the current era&quot;.\r\n\r\nYou should always use `uuuu` instead of `yyyy`.","title":"DateTimeFormatter - ResolverStyle issue","body":"<p>That's because <code>yyyy</code> means <em>year-of-era</em>. <code>STRICT</code>ly speaking, such date probably expects &quot;AD&quot; or &quot;BC&quot; to be present.</p>\n<p>If you change the pattern string to</p>\n<pre class=\"lang-java prettyprint-override\"><code>uuuuMMdd\n</code></pre>\n<p>it'll work.</p>\n<p>Despite the fact that <code>yyyy</code> <em>looks</em> like a natural way to express &quot;the current year&quot;, it does not actually <em>mean</em> &quot;the current year&quot;, but rather &quot;the current year in the current era&quot;.</p>\n<p>You should always use <code>uuuu</code> instead of <code>yyyy</code>.</p>\n"}],"owner":{"account_id":272779,"reputation":5565,"user_id":564045,"accept_rate":78,"display_name":"PDStat"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":464,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1638888282,"accepted_answer_id":70245422,"answer_count":1,"score":0,"last_activity_date":1638890907,"creation_date":1638792413,"question_id":70245250,"body_markdown":"I&#39;m wanting to create a `LocalDate` instance by parsing a String with a DateTimeFormatter, I noticed that if I parse a string where the day is greater than the number of days in the month then the smart resolver just resolves it to the last day for example. (I want the exception to be thrown)\r\n\r\n        DateTimeFormatter smartFormatter = DateTimeFormatter.ofPattern(&quot;yyyyMMdd&quot;);\r\n        \r\n        LocalDate.parse(&quot;20000431&quot;, smartFormatter);\r\n\r\nThis is resolved to 30th April 2000, so I added the following\r\n\r\n        DateTimeFormatter strictFormatter = DateTimeFormatter.ofPattern(&quot;yyyyMMdd&quot;).withResolverStyle(ResolverStyle.STRICT);\r\n        \r\n        LocalDate.parse(&quot;20000431&quot;, strictFormatter);\r\n\r\nAs expected this now throws an exception. However, I&#39;ve noticed that it also throws an exception for the 30th April, which is obviously valid. What&#39;s wrong with the below?\r\n\r\n        DateTimeFormatter strictFormatter = DateTimeFormatter.ofPattern(&quot;yyyyMMdd&quot;).withResolverStyle(ResolverStyle.STRICT);\r\n        \r\n        LocalDate.parse(&quot;20000430&quot;, strictFormatter);\r\n\r\n\r\n","title":"DateTimeFormatter - ResolverStyle issue","body":"<p>I'm wanting to create a <code>LocalDate</code> instance by parsing a String with a DateTimeFormatter, I noticed that if I parse a string where the day is greater than the number of days in the month then the smart resolver just resolves it to the last day for example. (I want the exception to be thrown)</p>\n<pre><code>    DateTimeFormatter smartFormatter = DateTimeFormatter.ofPattern(&quot;yyyyMMdd&quot;);\n    \n    LocalDate.parse(&quot;20000431&quot;, smartFormatter);\n</code></pre>\n<p>This is resolved to 30th April 2000, so I added the following</p>\n<pre><code>    DateTimeFormatter strictFormatter = DateTimeFormatter.ofPattern(&quot;yyyyMMdd&quot;).withResolverStyle(ResolverStyle.STRICT);\n    \n    LocalDate.parse(&quot;20000431&quot;, strictFormatter);\n</code></pre>\n<p>As expected this now throws an exception. However, I've noticed that it also throws an exception for the 30th April, which is obviously valid. What's wrong with the below?</p>\n<pre><code>    DateTimeFormatter strictFormatter = DateTimeFormatter.ofPattern(&quot;yyyyMMdd&quot;).withResolverStyle(ResolverStyle.STRICT);\n    \n    LocalDate.parse(&quot;20000430&quot;, strictFormatter);\n</code></pre>\n"},{"tags":["java","spring","oracle"],"answers":[{"tags":[],"owner":{"account_id":6169361,"reputation":20329,"user_id":4808122,"accept_rate":89,"display_name":"Marmite Bomber"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1638890689,"creation_date":1638889414,"answer_id":70262440,"question_id":70261991,"body_markdown":"The cause of the error `ORA-00909: invalid number of arguments` is the statement providing the count of the rows\r\n\r\n    select\r\n            distinct count(distinct content0_.id,\r\n            content0_.version) as col_0_0_ \r\n        from\r\n            content content0_\r\n    ...\r\n\r\nThis construction `COUNT(DISTINCT expr,[expr...])` maight be allowed in [MySQL][1]\r\n\r\nbut is *illegal* in Oracle.\r\n\r\nAs your *dialect* is `Oracle12cDialect` I&#39;d suspect a *problem* in the implementation of this dialect in case of *more than one identifying columns in the entity*. See e.g. [here][2] for correct SQL  solutions.\r\n\r\nAlso note that the *first* `DISTINCT` in this query is possible, but completely *irrelevant* as a query with `count` will produce only *one row*-\r\n\r\n\r\nHaving said that you should IMO make some effort in your data model that will make the usage of `distinct` *not necessary*.  IMHO the *right* approach.\r\n\r\n\r\n  [1]: https://www.w3resource.com/mysql/aggregate-functions-and-grouping/aggregate-functions-and-grouping-count-with-distinct.php\r\n  [2]: https://stackoverflow.com/q/5677665/4808122","title":"JPA and Oracle DB: Distinct query with pagination leads to Error: ORA-00909: Invalid amount of arguments","body":"<p>The cause of the error <code>ORA-00909: invalid number of arguments</code> is the statement providing the count of the rows</p>\n<pre><code>select\n        distinct count(distinct content0_.id,\n        content0_.version) as col_0_0_ \n    from\n        content content0_\n...\n</code></pre>\n<p>This construction <code>COUNT(DISTINCT expr,[expr...])</code> maight be allowed in <a href=\"https://www.w3resource.com/mysql/aggregate-functions-and-grouping/aggregate-functions-and-grouping-count-with-distinct.php\" rel=\"nofollow noreferrer\">MySQL</a></p>\n<p>but is <em>illegal</em> in Oracle.</p>\n<p>As your <em>dialect</em> is <code>Oracle12cDialect</code> I'd suspect a <em>problem</em> in the implementation of this dialect in case of <em>more than one identifying columns in the entity</em>. See e.g. <a href=\"https://stackoverflow.com/q/5677665/4808122\">here</a> for correct SQL  solutions.</p>\n<p>Also note that the <em>first</em> <code>DISTINCT</code> in this query is possible, but completely <em>irrelevant</em> as a query with <code>count</code> will produce only <em>one row</em>-</p>\n<p>Having said that you should IMO make some effort in your data model that will make the usage of <code>distinct</code> <em>not necessary</em>.  IMHO the <em>right</em> approach.</p>\n"},{"tags":[],"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638890904,"creation_date":1638890904,"answer_id":70262814,"question_id":70261991,"body_markdown":"Actually the failing query:\r\n\r\n&gt; ```\r\n&gt;     select\r\n&gt;         distinct count(distinct (content0_.id,\r\n&gt;         content0_.version)) as col_0_0_ \r\n&gt;     from\r\n&gt;         content content0_ \r\n&gt;     where\r\n&gt;         content0_.status=? ```\r\n\r\nis a query which spring-data issues to get the total amount of records available (please check: org.springframework.data.jpa.repository.support.SimpleJpaRepository#executeCountQuery - actually, it would worth to provide the full stacktrace). And it seems that your Content entity has composite PK, i.e. (id, version) (again, no entity definition provided), but HBN experiences some difficulties with such queries: https://hibernate.atlassian.net/browse/HHH-11042","title":"JPA and Oracle DB: Distinct query with pagination leads to Error: ORA-00909: Invalid amount of arguments","body":"<p>Actually the failing query:</p>\n<blockquote>\n<pre><code>    select\n        distinct count(distinct (content0_.id,\n        content0_.version)) as col_0_0_ \n    from\n        content content0_ \n    where\n        content0_.status=? ```\n</code></pre>\n</blockquote>\n<p>is a query which spring-data issues to get the total amount of records available (please check: org.springframework.data.jpa.repository.support.SimpleJpaRepository#executeCountQuery - actually, it would worth to provide the full stacktrace). And it seems that your Content entity has composite PK, i.e. (id, version) (again, no entity definition provided), but HBN experiences some difficulties with such queries: <a href=\"https://hibernate.atlassian.net/browse/HHH-11042\" rel=\"nofollow noreferrer\">https://hibernate.atlassian.net/browse/HHH-11042</a></p>\n"}],"owner":{"account_id":2778891,"reputation":9987,"user_id":2391849,"accept_rate":84,"display_name":"Mulgard"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":823,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":70262440,"answer_count":2,"score":-1,"last_activity_date":1638890904,"creation_date":1638887507,"question_id":70261991,"body_markdown":"Im running a spring backend with an oracle database.\r\nI use the specification API to perform queries:\r\n\r\n```java\r\n@Slf4j\r\npublic class ContentSpecification implements Specification&lt;Content&gt; {\r\n\r\n  private final transient ContentFilter filter;\r\n\r\n  public ContentSpecification(final ContentFilter filter) {\r\n    this.filter = filter;\r\n  }\r\n\r\n  @Override\r\n  public Predicate toPredicate(\r\n      @NonNull final Root&lt;Content&gt; root,\r\n      @NonNull final CriteriaQuery&lt;?&gt; query,\r\n      @NonNull final CriteriaBuilder builder) {\r\n    final List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\r\n\r\n    if (!isEmpty(filter.getTerm())) {\r\n      // ... not relevant\r\n\r\n      predicates.add(builder.or(title, subtitle, body, keywords));\r\n    }\r\n    \r\n    query.distinct(true);\r\n\r\n    return builder.and(predicates.toArray(new Predicate[0]));\r\n  }\r\n}\r\n```\r\n\r\n```java\r\n  public PagedModel&lt;ContentModel&gt; getContent(\r\n      final String term,\r\n      final Integer page,\r\n      final Integer size) {\r\n\r\n    final int pageSize = size == 0 ? MAX_VALUE : size;\r\n\r\n    return pagedAssembler\r\n        .toModel(\r\n            repository.findAll(\r\n                new ContentSpecification(\r\n                    new ContentFilter(term)),\r\n                PageRequest.of(page, pageSize)),\r\n            contentAssembler);\r\n  }\r\n```\r\n\r\nThis is working perfectly with H2 and MySQL Database.\r\nBut as soon as im using an Oracle database it wont work:\r\n\r\n```yml\r\nspring:\r\n  datasource:\r\n    driver-class-name: oracle.jdbc.OracleDriver\r\n    initialization-mode: never\r\n    url: &lt;url&gt;\r\n    username: &lt;user&gt;\r\n    password: &lt;pw&gt;\r\n  jpa:\r\n    database-platform: org.hibernate.dialect.Oracle12cDialect\r\n    hibernate:\r\n      ddl-auto: validate\r\n    properties:\r\n      hibernate:\r\n        format_sql: true\r\n        current_session_context_class: org.springframework.orm.hibernate5.SpringSessionContext\r\n    show-sql: true\r\n```\r\n\r\nThe console output im getting is the following:\r\n\r\n```\r\n2021-12-07 15:24:22.487  INFO [my-service,4d641a9f03674994,4d641a9f03674994,false] 14244 --- [nio-8082-exec-7] d.b.b.p.p.content.ContentController      : get content: null, null, null, 0, 5\r\nHibernate: \r\n    select\r\n        * \r\n    from\r\n        ( select\r\n            distinct content0_.id as id2_3_,\r\n            content0_.version as version3_3_,\r\n            content0_.status as status9_3_,\r\n            content0_.status_date as status_date10_3_,\r\n            content0_.subtitle as subtitle11_3_,\r\n            content0_.title as title12_3_,\r\n        from\r\n            content content0_ \r\n        where\r\n            content0_.status=? ) \r\n    where\r\n        rownum &lt;= ?\r\nHibernate: \r\n    select\r\n        distinct count(distinct content0_.id,\r\n        content0_.version) as col_0_0_ \r\n    from\r\n        content content0_ \r\n    where\r\n        content0_.status=?\r\n2021-12-07 15:24:22.508  WARN [my-service,4d641a9f03674994,4d641a9f03674994,false] 14244 --- [nio-8082-exec-7] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 909, SQLState: 42000\r\n2021-12-07 15:24:22.508 ERROR [my-service,4d641a9f03674994,4d641a9f03674994,false] 14244 --- [nio-8082-exec-7] o.h.engine.jdbc.spi.SqlExceptionHelper   : ORA-00909: Invalid amount of arguments\r\n2021-12-07 15:24:22.514 ERROR [my-service,4d641a9f03674994,4d641a9f03674994,false] 14244 --- [nio-8082-exec-7] d.b.b.p.p.ApplicationExceptionHandler    : runtime exception: \r\n\r\norg.springframework.dao.InvalidDataAccessResourceUsageException: could not extract ResultSet; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not extract ResultSet\r\n\t...\r\nCaused by: org.hibernate.exception.SQLGrammarException: could not extract ResultSet\r\n\t... 111 common frames omitted\r\nCaused by: java.sql.SQLSyntaxErrorException: ORA-00909: Ung&#252;ltige Anzahl von Argumenten\r\n\tat oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:509) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\r\n\tat oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:461) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\r\n\tat oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1104) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\r\n\tat oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:550) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\r\n\tat oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:268) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\r\n\tat oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:655) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\r\n\tat oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:270) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\r\n\tat oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:91) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\r\n\tat oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPreparedStatement.java:807) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\r\n\tat oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:983) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\r\n\tat oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1168) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\r\n\tat oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3666) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\r\n\tat oracle.jdbc.driver.T4CPreparedStatement.executeInternal(T4CPreparedStatement.java:1426) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\r\n\tat oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3713) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\r\n\tat oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(OraclePreparedStatementWrapper.java:1167) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-3.4.2.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-3.4.2.jar:na]\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:57) ~[hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\t... 148 common frames omitted\r\nCaused by: oracle.jdbc.OracleDatabaseException: ORA-00909: Ung&#252;ltige Anzahl von Argumenten\r\n\r\n\tat oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:513) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\r\n\t... 165 common frames omitted\r\n```\r\n\r\nAs soon as I remove either the `distinct` or the `pagination` it will also work with the oracle db.\r\n\r\nIs there a solution for oracle to get the distinct running together with the pagination?\r\n\r\n**EDIT**\r\n\r\nSo it seems like oracle fails with the count query.\r\nJust for comparison, with H2 the following sql is \r\ngetting generated:\r\n\r\n```sql\r\nHibernate: \r\n    select\r\n        distinct content0_.id as id2_3_,\r\n        content0_.version as version3_3_,\r\n        content0_.status as status9_3_,\r\n        content0_.status_date as status_10_3_,\r\n        content0_.subtitle as subtitl11_3_,\r\n        content0_.title as title12_3_,\r\n    from\r\n        content content0_ \r\n    where\r\n        content0_.status=? limit ?\r\nHibernate: \r\n    select\r\n        distinct count(distinct (content0_.id,\r\n        content0_.version)) as col_0_0_ \r\n    from\r\n        content content0_ \r\n    where\r\n        content0_.status=?\r\n```","title":"JPA and Oracle DB: Distinct query with pagination leads to Error: ORA-00909: Invalid amount of arguments","body":"<p>Im running a spring backend with an oracle database.\nI use the specification API to perform queries:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\npublic class ContentSpecification implements Specification&lt;Content&gt; {\n\n  private final transient ContentFilter filter;\n\n  public ContentSpecification(final ContentFilter filter) {\n    this.filter = filter;\n  }\n\n  @Override\n  public Predicate toPredicate(\n      @NonNull final Root&lt;Content&gt; root,\n      @NonNull final CriteriaQuery&lt;?&gt; query,\n      @NonNull final CriteriaBuilder builder) {\n    final List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\n\n    if (!isEmpty(filter.getTerm())) {\n      // ... not relevant\n\n      predicates.add(builder.or(title, subtitle, body, keywords));\n    }\n    \n    query.distinct(true);\n\n    return builder.and(predicates.toArray(new Predicate[0]));\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>  public PagedModel&lt;ContentModel&gt; getContent(\n      final String term,\n      final Integer page,\n      final Integer size) {\n\n    final int pageSize = size == 0 ? MAX_VALUE : size;\n\n    return pagedAssembler\n        .toModel(\n            repository.findAll(\n                new ContentSpecification(\n                    new ContentFilter(term)),\n                PageRequest.of(page, pageSize)),\n            contentAssembler);\n  }\n</code></pre>\n<p>This is working perfectly with H2 and MySQL Database.\nBut as soon as im using an Oracle database it wont work:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  datasource:\n    driver-class-name: oracle.jdbc.OracleDriver\n    initialization-mode: never\n    url: &lt;url&gt;\n    username: &lt;user&gt;\n    password: &lt;pw&gt;\n  jpa:\n    database-platform: org.hibernate.dialect.Oracle12cDialect\n    hibernate:\n      ddl-auto: validate\n    properties:\n      hibernate:\n        format_sql: true\n        current_session_context_class: org.springframework.orm.hibernate5.SpringSessionContext\n    show-sql: true\n</code></pre>\n<p>The console output im getting is the following:</p>\n<pre><code>2021-12-07 15:24:22.487  INFO [my-service,4d641a9f03674994,4d641a9f03674994,false] 14244 --- [nio-8082-exec-7] d.b.b.p.p.content.ContentController      : get content: null, null, null, 0, 5\nHibernate: \n    select\n        * \n    from\n        ( select\n            distinct content0_.id as id2_3_,\n            content0_.version as version3_3_,\n            content0_.status as status9_3_,\n            content0_.status_date as status_date10_3_,\n            content0_.subtitle as subtitle11_3_,\n            content0_.title as title12_3_,\n        from\n            content content0_ \n        where\n            content0_.status=? ) \n    where\n        rownum &lt;= ?\nHibernate: \n    select\n        distinct count(distinct content0_.id,\n        content0_.version) as col_0_0_ \n    from\n        content content0_ \n    where\n        content0_.status=?\n2021-12-07 15:24:22.508  WARN [my-service,4d641a9f03674994,4d641a9f03674994,false] 14244 --- [nio-8082-exec-7] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 909, SQLState: 42000\n2021-12-07 15:24:22.508 ERROR [my-service,4d641a9f03674994,4d641a9f03674994,false] 14244 --- [nio-8082-exec-7] o.h.engine.jdbc.spi.SqlExceptionHelper   : ORA-00909: Invalid amount of arguments\n2021-12-07 15:24:22.514 ERROR [my-service,4d641a9f03674994,4d641a9f03674994,false] 14244 --- [nio-8082-exec-7] d.b.b.p.p.ApplicationExceptionHandler    : runtime exception: \n\norg.springframework.dao.InvalidDataAccessResourceUsageException: could not extract ResultSet; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not extract ResultSet\n    ...\nCaused by: org.hibernate.exception.SQLGrammarException: could not extract ResultSet\n    ... 111 common frames omitted\nCaused by: java.sql.SQLSyntaxErrorException: ORA-00909: Ungültige Anzahl von Argumenten\n    at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:509) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\n    at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:461) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\n    at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1104) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\n    at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:550) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\n    at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:268) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\n    at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:655) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\n    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:270) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\n    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:91) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\n    at oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPreparedStatement.java:807) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\n    at oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:983) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\n    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1168) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\n    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3666) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\n    at oracle.jdbc.driver.T4CPreparedStatement.executeInternal(T4CPreparedStatement.java:1426) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\n    at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3713) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\n    at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(OraclePreparedStatementWrapper.java:1167) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\n    at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-3.4.2.jar:na]\n    at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-3.4.2.jar:na]\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:57) ~[hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    ... 148 common frames omitted\nCaused by: oracle.jdbc.OracleDatabaseException: ORA-00909: Ungültige Anzahl von Argumenten\n\n    at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:513) ~[ojdbc8-19.3.0.0.jar:19.3.0.0.0]\n    ... 165 common frames omitted\n</code></pre>\n<p>As soon as I remove either the <code>distinct</code> or the <code>pagination</code> it will also work with the oracle db.</p>\n<p>Is there a solution for oracle to get the distinct running together with the pagination?</p>\n<p><strong>EDIT</strong></p>\n<p>So it seems like oracle fails with the count query.\nJust for comparison, with H2 the following sql is\ngetting generated:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>Hibernate: \n    select\n        distinct content0_.id as id2_3_,\n        content0_.version as version3_3_,\n        content0_.status as status9_3_,\n        content0_.status_date as status_10_3_,\n        content0_.subtitle as subtitl11_3_,\n        content0_.title as title12_3_,\n    from\n        content content0_ \n    where\n        content0_.status=? limit ?\nHibernate: \n    select\n        distinct count(distinct (content0_.id,\n        content0_.version)) as col_0_0_ \n    from\n        content content0_ \n    where\n        content0_.status=?\n</code></pre>\n"},{"tags":["java","xpath"],"comments":[{"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"score":0,"creation_date":1638885844,"post_id":70261052,"comment_id":124202714,"body_markdown":"Please explain the purpose of your search. Currently you are searching only in text nodes. But in your example XML the word &quot;java&quot; is only contained in attributes. If you are not interested in the XML structure you can treat the XML as plain text and perform a simple text search. Then you will find element names containing &quot;java&quot; and comments, too. But it depends on your use case.","body":"Please explain the purpose of your search. Currently you are searching only in text nodes. But in your example XML the word &quot;java&quot; is only contained in attributes. If you are not interested in the XML structure you can treat the XML as plain text and perform a simple text search. Then you will find element names containing &quot;java&quot; and comments, too. But it depends on your use case."}],"answers":[{"tags":[],"owner":{"account_id":8112,"reputation":64592,"user_id":14419,"accept_rate":100,"display_name":"Mads Hansen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1638890469,"creation_date":1638886842,"answer_id":70261831,"question_id":70261052,"body_markdown":"Your XPath is searching the `text()` nodes, but the word `java` appears in the `@type` attribute (which is not a `text()` node).\r\n\r\nIf you want to search for the word in both `text()` and `@*` then you could use a union `|` operator and check for either/both containing that word:\r\n\r\n    //text()[contains(. ,&#39;java&#39;)] | //@*[contains(., &#39;java&#39;)]\r\n\r\nBut you might also want to scan `comment()` and `processing-instruction()`, so could generically match on `node()` and then in the predicate test:\r\n\r\n    //node()[contains(. ,&#39;java&#39;)] | //@*[contains(., &#39;java&#39;)]\r\n\r\nWith XPath 2.0 or greater, you could use:\r\n\r\n    //node()[(.|@*)[contains(., &#39;java&#39;)]]","title":"Java XPath scan file looking for a word","body":"<p>Your XPath is searching the <code>text()</code> nodes, but the word <code>java</code> appears in the <code>@type</code> attribute (which is not a <code>text()</code> node).</p>\n<p>If you want to search for the word in both <code>text()</code> and <code>@*</code> then you could use a union <code>|</code> operator and check for either/both containing that word:</p>\n<pre><code>//text()[contains(. ,'java')] | //@*[contains(., 'java')]\n</code></pre>\n<p>But you might also want to scan <code>comment()</code> and <code>processing-instruction()</code>, so could generically match on <code>node()</code> and then in the predicate test:</p>\n<pre><code>//node()[contains(. ,'java')] | //@*[contains(., 'java')]\n</code></pre>\n<p>With XPath 2.0 or greater, you could use:</p>\n<pre><code>//node()[(.|@*)[contains(., 'java')]]\n</code></pre>\n"}],"owner":{"account_id":21978200,"reputation":25,"user_id":16253680,"display_name":"Adrian"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70261831,"answer_count":1,"score":1,"last_activity_date":1638890469,"creation_date":1638884019,"question_id":70261052,"body_markdown":"Im building an application that will taka a word from user and then scan file using XPath returning true or false depending on wheather the word was found in that file or not.\r\n\r\n\r\nI have build following class that implements XPath, but i am either missunderstanding how it should work or there is something wrong with my code. Can anyone explain to me how to use Xpath to make full file search?\r\n```\r\npublic XPath() throws IOException, SAXException, ParserConfigurationException, XPathExpressionException {\r\n        FileInputStream fileIS = new FileInputStream(&quot;text.xml&quot;);\r\n        DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();\r\n        DocumentBuilder builder = builderFactory.newDocumentBuilder();\r\n        Document xmlDocument = builder.parse(fileIS);\r\n        XPathFactory xPathfactory = XPathFactory.newInstance();\r\n        javax.xml.xpath.XPath xPath = xPathfactory.newXPath();\r\n        XPathExpression expr = xPath.compile(&quot;//text()[contains(.,&#39;java&#39;)]&quot;);\r\n        System.out.println(expr.evaluate(xmlDocument, XPathConstants.NODESET));\r\n    }\r\n```\r\n\r\n\r\nAnd the xml file i am currently testing on.\r\n```\r\n&lt;?xml version=&quot;1.0&quot;?&gt;\r\n&lt;Tutorials&gt;\r\n    &lt;Tutorial tutId=&quot;01&quot; type=&quot;java&quot;&gt;\r\n        &lt;title&gt;Guava&lt;/title&gt;\r\n        &lt;description&gt;Introduction to Guava&lt;/description&gt;\r\n        &lt;date&gt;04/04/2016&lt;/date&gt;\r\n        &lt;author&gt;GuavaAuthor&lt;/author&gt;\r\n    &lt;/Tutorial&gt;\r\n    &lt;Tutorial tutId=&quot;02&quot; type=&quot;java&quot;&gt;\r\n        &lt;title&gt;XML&lt;/title&gt;\r\n        &lt;description&gt;Introduction to XPath&lt;/description&gt;\r\n        &lt;date&gt;04/05/2016&lt;/date&gt;\r\n        &lt;author&gt;XMLAuthor&lt;/author&gt;\r\n    &lt;/Tutorial&gt;\r\n&lt;/Tutorials&gt;\r\n```\r\n\r\n\r\nFound the solution, i was missing correct display of the found entries and as someone pointed out in comment &#39;java&#39; is in arguments and i want to scan only text fields so it would be never found, after adding following code and changing the word my app will look for, application works\r\n\r\n```\r\nObject result = expr.evaluate(xmlDocument, XPathConstants.NODESET);\r\n        NodeList nodes = (NodeList) result;\r\n        for (int i = 0; i &lt; nodes.getLength(); i++) {\r\n            System.out.println(nodes.item(i).getNodeValue());\r\n        }\r\n```","title":"Java XPath scan file looking for a word","body":"<p>Im building an application that will taka a word from user and then scan file using XPath returning true or false depending on wheather the word was found in that file or not.</p>\n<p>I have build following class that implements XPath, but i am either missunderstanding how it should work or there is something wrong with my code. Can anyone explain to me how to use Xpath to make full file search?</p>\n<pre><code>public XPath() throws IOException, SAXException, ParserConfigurationException, XPathExpressionException {\n        FileInputStream fileIS = new FileInputStream(&quot;text.xml&quot;);\n        DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();\n        DocumentBuilder builder = builderFactory.newDocumentBuilder();\n        Document xmlDocument = builder.parse(fileIS);\n        XPathFactory xPathfactory = XPathFactory.newInstance();\n        javax.xml.xpath.XPath xPath = xPathfactory.newXPath();\n        XPathExpression expr = xPath.compile(&quot;//text()[contains(.,'java')]&quot;);\n        System.out.println(expr.evaluate(xmlDocument, XPathConstants.NODESET));\n    }\n</code></pre>\n<p>And the xml file i am currently testing on.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;\n&lt;Tutorials&gt;\n    &lt;Tutorial tutId=&quot;01&quot; type=&quot;java&quot;&gt;\n        &lt;title&gt;Guava&lt;/title&gt;\n        &lt;description&gt;Introduction to Guava&lt;/description&gt;\n        &lt;date&gt;04/04/2016&lt;/date&gt;\n        &lt;author&gt;GuavaAuthor&lt;/author&gt;\n    &lt;/Tutorial&gt;\n    &lt;Tutorial tutId=&quot;02&quot; type=&quot;java&quot;&gt;\n        &lt;title&gt;XML&lt;/title&gt;\n        &lt;description&gt;Introduction to XPath&lt;/description&gt;\n        &lt;date&gt;04/05/2016&lt;/date&gt;\n        &lt;author&gt;XMLAuthor&lt;/author&gt;\n    &lt;/Tutorial&gt;\n&lt;/Tutorials&gt;\n</code></pre>\n<p>Found the solution, i was missing correct display of the found entries and as someone pointed out in comment 'java' is in arguments and i want to scan only text fields so it would be never found, after adding following code and changing the word my app will look for, application works</p>\n<pre><code>Object result = expr.evaluate(xmlDocument, XPathConstants.NODESET);\n        NodeList nodes = (NodeList) result;\n        for (int i = 0; i &lt; nodes.getLength(); i++) {\n            System.out.println(nodes.item(i).getNodeValue());\n        }\n</code></pre>\n"},{"tags":["java","aws-sdk","portforwarding","aws-ssm"],"owner":{"account_id":10498990,"reputation":11,"user_id":7738244,"display_name":"Manasa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":257,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1638890381,"creation_date":1638889573,"question_id":70262476,"body_markdown":"    Map&lt;String, List&lt;String&gt;&gt; parameters = new HashMap&lt;&gt;();\r\n\tparameters.put(&quot;portNumber&quot;, Arrays.asList(AWS_REMOTEPORT));\r\n\tparameters.put(&quot;localPortNumber&quot;, Arrays.asList(AWS_LOCALPORT));\r\n\tBasicAWSCredentials awsCreds = new BasicAWSCredentials(AWS_ACCESSKEYID, AWS_SECRETACCESSKEY);\r\n\tStartSessionResult result = AWSSimpleSystemsManagementAsyncClientBuilder.standard()\r\n\t.withCredentials(new AWSStaticCredentialsProvider(awsCreds)).withRegion(AWS_REGION).build()\r\n\t.startSession(new StartSessionRequest().withTarget(AWS_TARGET)\r\n\t.withDocumentName(&quot;AWS-StartPortForwardingSession&quot;).withParameters(parameters));\r\n    sessionID = result.getSessionId();\r\n    StringBuilder responseJson = new StringBuilder(&quot;{&quot;);\r\n\tresponseJson.append(&quot;\\&quot;SessionId\\&quot;:&quot;);\r\n\tresponseJson.append(&quot;\\&quot;&quot;);\r\n\tresponseJson.append(result.getSessionId());\r\n\tresponseJson.append(&quot;\\&quot;&quot;);\r\n\tresponseJson.append(&quot;,\\&quot;TokenValue\\&quot;:&quot;);\r\n\tresponseJson.append(&quot;\\&quot;&quot;);\r\n\tresponseJson.append(result.getTokenValue());\r\n\tresponseJson.append(&quot;\\&quot;&quot;);\r\n\tresponseJson.append(&quot;,\\&quot;StreamUrl\\&quot;:&quot;);\r\n\tresponseJson.append(&quot;\\&quot;&quot;);\r\n\tresponseJson.append(result.getStreamUrl());\r\n\tresponseJson.append(&quot;\\&quot;&quot;);\r\n\tresponseJson.append(&quot;}&quot;);\r\n\tList&lt;String&gt; arguments = new ArrayList&lt;&gt;();\r\n\targuments.add(&quot;session-manager-plugin&quot;);\r\n\targuments.add(responseJson.toString());\r\n\targuments.add(AWS_REGION); // Whatever region you use\r\n\targuments.add(&quot;StartSession&quot;);\r\n\targuments.add(&quot;default&quot;); // Whatever profile you use\r\n\targuments.add(&quot;{\\&quot;Target\\&quot;:\\&quot;&quot;+AWS_TARGET+&quot;\\&quot;,\\&quot;DocumentName\\&quot;:\\&quot;AWS-StartPortForwardingSession\\&quot;,\\&quot;Parameters\\&quot;:{\\&quot;portNumber\\&quot;:[\\&quot;&quot;+AWS_REMOTEPORT+&quot;\\&quot;],\\&quot;localPortNumber\\&quot;:[\\&quot;&quot;+AWS_LOCALPORT+&quot;\\&quot;]}}&quot;);\r\n    arguments.add(&quot;https://ssm.us-east-1.amazonaws.com/&quot;);\r\n\tProcessBuilder pb = new ProcessBuilder(arguments.toArray(new String[] {}));\r\n\tpb.redirectErrorStream(true);\r\n\tProcess p = pb.start();\r\n\tBufferedReader r = new BufferedReader(new \r\n    InputStreamReader(p.getInputStream()));\r\n\tString line;\r\n\twhile (true) {\r\n\tline = r.readLine();\r\n\tif (line == null) { break; }\r\n\tSystem.out.println(line);\r\n\t\t\t    }\r\n\r\n\r\nI am able to get the session id successfully but port forwarding is not working as expected. I tried to using session manager plugin mentioned in https://stackoverflow.com/questions/60658044/how-to-use-an-aws-port-forwarding-session-via-java-sdk but no success. Can someone help me what I am doing wrong","title":"Unable to establish port forwarding using AWS SDK","body":"<pre><code>Map&lt;String, List&lt;String&gt;&gt; parameters = new HashMap&lt;&gt;();\nparameters.put(&quot;portNumber&quot;, Arrays.asList(AWS_REMOTEPORT));\nparameters.put(&quot;localPortNumber&quot;, Arrays.asList(AWS_LOCALPORT));\nBasicAWSCredentials awsCreds = new BasicAWSCredentials(AWS_ACCESSKEYID, AWS_SECRETACCESSKEY);\nStartSessionResult result = AWSSimpleSystemsManagementAsyncClientBuilder.standard()\n.withCredentials(new AWSStaticCredentialsProvider(awsCreds)).withRegion(AWS_REGION).build()\n.startSession(new StartSessionRequest().withTarget(AWS_TARGET)\n.withDocumentName(&quot;AWS-StartPortForwardingSession&quot;).withParameters(parameters));\nsessionID = result.getSessionId();\nStringBuilder responseJson = new StringBuilder(&quot;{&quot;);\nresponseJson.append(&quot;\\&quot;SessionId\\&quot;:&quot;);\nresponseJson.append(&quot;\\&quot;&quot;);\nresponseJson.append(result.getSessionId());\nresponseJson.append(&quot;\\&quot;&quot;);\nresponseJson.append(&quot;,\\&quot;TokenValue\\&quot;:&quot;);\nresponseJson.append(&quot;\\&quot;&quot;);\nresponseJson.append(result.getTokenValue());\nresponseJson.append(&quot;\\&quot;&quot;);\nresponseJson.append(&quot;,\\&quot;StreamUrl\\&quot;:&quot;);\nresponseJson.append(&quot;\\&quot;&quot;);\nresponseJson.append(result.getStreamUrl());\nresponseJson.append(&quot;\\&quot;&quot;);\nresponseJson.append(&quot;}&quot;);\nList&lt;String&gt; arguments = new ArrayList&lt;&gt;();\narguments.add(&quot;session-manager-plugin&quot;);\narguments.add(responseJson.toString());\narguments.add(AWS_REGION); // Whatever region you use\narguments.add(&quot;StartSession&quot;);\narguments.add(&quot;default&quot;); // Whatever profile you use\narguments.add(&quot;{\\&quot;Target\\&quot;:\\&quot;&quot;+AWS_TARGET+&quot;\\&quot;,\\&quot;DocumentName\\&quot;:\\&quot;AWS-StartPortForwardingSession\\&quot;,\\&quot;Parameters\\&quot;:{\\&quot;portNumber\\&quot;:[\\&quot;&quot;+AWS_REMOTEPORT+&quot;\\&quot;],\\&quot;localPortNumber\\&quot;:[\\&quot;&quot;+AWS_LOCALPORT+&quot;\\&quot;]}}&quot;);\narguments.add(&quot;https://ssm.us-east-1.amazonaws.com/&quot;);\nProcessBuilder pb = new ProcessBuilder(arguments.toArray(new String[] {}));\npb.redirectErrorStream(true);\nProcess p = pb.start();\nBufferedReader r = new BufferedReader(new \nInputStreamReader(p.getInputStream()));\nString line;\nwhile (true) {\nline = r.readLine();\nif (line == null) { break; }\nSystem.out.println(line);\n            }\n</code></pre>\n<p>I am able to get the session id successfully but port forwarding is not working as expected. I tried to using session manager plugin mentioned in <a href=\"https://stackoverflow.com/questions/60658044/how-to-use-an-aws-port-forwarding-session-via-java-sdk\">How to use an AWS Port Forwarding session via Java SDK</a> but no success. Can someone help me what I am doing wrong</p>\n"},{"tags":["java","arraylist"],"comments":[{"owner":{"account_id":1500413,"reputation":320,"user_id":1405280,"accept_rate":80,"display_name":"Tanbir Ahmed"},"score":1,"creation_date":1638889639,"post_id":70262340,"comment_id":124204472,"body_markdown":"The problem seems to be that you are trying to modify a `Collection` on which you are iterating. You have to create a new `Collection` and modify that.","body":"The problem seems to be that you are trying to modify a <code>Collection</code> on which you are iterating. You have to create a new <code>Collection</code> and modify that."},{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":1,"creation_date":1638889690,"post_id":70262340,"comment_id":124204498,"body_markdown":"Does this answer your question? [How to avoid &quot;ConcurrentModificationException&quot; while removing elements from \\`ArrayList\\` while iterating it?](https://stackoverflow.com/questions/18448671/how-to-avoid-concurrentmodificationexception-while-removing-elements-from-arr)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/18448671/how-to-avoid-concurrentmodificationexception-while-removing-elements-from-arr\">How to avoid &quot;ConcurrentModificationException&quot; while removing elements from `ArrayList` while iterating it?</a>"},{"owner":{"account_id":8741282,"reputation":1956,"user_id":6538278,"display_name":"0009laH"},"score":1,"creation_date":1638889766,"post_id":70262340,"comment_id":124204529,"body_markdown":"Never use a *for-each* loop to modify a Java list! I suggest you to look at [this request](https://stackoverflow.com/questions/223918/iterating-through-a-collection-avoiding-concurrentmodificationexception-when-re), which explains your problem and their solutions","body":"Never use a <i>for-each</i> loop to modify a Java list! I suggest you to look at <a href=\"https://stackoverflow.com/questions/223918/iterating-through-a-collection-avoiding-concurrentmodificationexception-when-re\">this request</a>, which explains your problem and their solutions"}],"answers":[{"tags":[],"owner":{"display_name":"user14978390"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638890108,"creation_date":1638889709,"answer_id":70262512,"question_id":70262340,"body_markdown":"You cannot remove entries while in a for-each loop.\r\n\r\n    for (int i = 0; i &lt; boxes.size(); i++) {\r\n    \tif (boxes.get(i).mouseOver())\r\n    \t\tboxes.add(boxes.remove(i));\r\n    }","title":"Move element of arraylist to last position","body":"<p>You cannot remove entries while in a for-each loop.</p>\n<pre><code>for (int i = 0; i &lt; boxes.size(); i++) {\n    if (boxes.get(i).mouseOver())\n        boxes.add(boxes.remove(i));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15891083,"reputation":1,"user_id":11466183,"display_name":"Rameshkanna Yohalingam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638890340,"creation_date":1638889768,"answer_id":70262524,"question_id":70262340,"body_markdown":"If `java.util.ConcurrentModificationException` is the error you were getting,\r\ntry not to use advanced for loop and just use regular for loop. Also in your code I see you are trying to remove the element from the list with the actual object. In Arraylist you can only remove by the index, not the element.\r\n\r\nI think below should work.\r\n\r\n```\r\nfor (int i = 0; i &lt; boxes.size(); i++) {\r\n    if (boxes.get(i).mouseOver()) { \r\n        boxes.add(boxes.remove(i));\r\n    }\r\n}","title":"Move element of arraylist to last position","body":"<p>If <code>java.util.ConcurrentModificationException</code> is the error you were getting,\ntry not to use advanced for loop and just use regular for loop. Also in your code I see you are trying to remove the element from the list with the actual object. In Arraylist you can only remove by the index, not the element.</p>\n<p>I think below should work.</p>\n<pre><code>for (int i = 0; i &lt; boxes.size(); i++) {\n    if (boxes.get(i).mouseOver()) { \n        boxes.add(boxes.remove(i));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1638889969,"creation_date":1638889768,"answer_id":70262525,"question_id":70262340,"body_markdown":"Once you modify the `boxes` (by removing and or adding elements) you cannot continue iterating over it.  One way you can avoid that would be by `break`ing out of the loop once you move the `Box` you want to move:\r\n```\r\nfor (Box i : boxes) {  //where boxes is the arrayList\r\n    if (i.mouseOver()) {  //does the swapping I need if the mouse is over the box\r\n        // No need to create a new reference\r\n        boxes.remove(i);\r\n        boxes.add(i);\r\n        break;\r\n    }\r\n}\r\n```","title":"Move element of arraylist to last position","body":"<p>Once you modify the <code>boxes</code> (by removing and or adding elements) you cannot continue iterating over it.  One way you can avoid that would be by <code>break</code>ing out of the loop once you move the <code>Box</code> you want to move:</p>\n<pre><code>for (Box i : boxes) {  //where boxes is the arrayList\n    if (i.mouseOver()) {  //does the swapping I need if the mouse is over the box\n        // No need to create a new reference\n        boxes.remove(i);\n        boxes.add(i);\n        break;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":22982446,"reputation":35,"user_id":17109144,"display_name":"Phil_Software"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":219,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":70262525,"answer_count":3,"score":-2,"last_activity_date":1638890340,"creation_date":1638888957,"question_id":70262340,"body_markdown":"I have an arrayList of complex objects `Box`. I need a specific element of these Boxes to be moved to the last position of the arrayList and have the original one removed like shown in the diagram:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hRe25.png\r\n\r\nMy code is something like this, but I get this error: ```ConcurrentModificationException```\r\n\r\n\r\n    for (Box i : boxes) {  //where boxes is the arrayList\r\n     if (i.mouseOver()) {  //does the swapping I need if the mouse is over the box\r\n      \r\n      Box copy=i;\r\n      boxes.remove(i);  //these 3 lines are where I think the mistake is\r\n      boxes.add(copy);\r\n     }\r\n    }\r\n","title":"Move element of arraylist to last position","body":"<p>I have an arrayList of complex objects <code>Box</code>. I need a specific element of these Boxes to be moved to the last position of the arrayList and have the original one removed like shown in the diagram:</p>\n<p><a href=\"https://i.stack.imgur.com/hRe25.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hRe25.png\" alt=\"enter image description here\" /></a></p>\n<p>My code is something like this, but I get this error: <code>ConcurrentModificationException</code></p>\n<pre><code>for (Box i : boxes) {  //where boxes is the arrayList\n if (i.mouseOver()) {  //does the swapping I need if the mouse is over the box\n  \n  Box copy=i;\n  boxes.remove(i);  //these 3 lines are where I think the mistake is\n  boxes.add(copy);\n }\n}\n</code></pre>\n"},{"tags":["java","android","usb","smartcard","apdu"],"comments":[{"owner":{"account_id":1540730,"reputation":5168,"user_id":1435475,"accept_rate":75,"display_name":"guidot"},"score":0,"creation_date":1638977917,"post_id":70262673,"comment_id":124231630,"body_markdown":"What you describe as &quot;read command&quot; is actually a SELECT according to ISO 7816-4.  Since you provide no LE and P2 indicates no response data wanted I would only expect SW1/SW2, i. e. 90 00 in case of success.","body":"What you describe as &quot;read command&quot; is actually a SELECT according to ISO 7816-4.  Since you provide no LE and P2 indicates no response data wanted I would only expect SW1/SW2, i. e. 90 00 in case of success."}],"owner":{"account_id":17979316,"reputation":88,"user_id":13066074,"display_name":"JVK"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1638890331,"creation_date":1638890331,"question_id":70262673,"body_markdown":"Setting: I need to read data form an eID smartcard using a built in reader from the android device in java.\r\n\r\nI first try to power on the device. This returns me a lot of 0 bytes. This makes me think it already fails here? When I try to perform a read command I again get 0 bytes for the data part. \r\nAm I misunderstanding how to perform these instructions or is there a key part that I am missing?\r\n\r\nThis is all new to me and not my usual cup of tea.\r\n\r\n```java\r\npublic void readCard() {\r\n        powerOnReader();\r\n        getPermission();\r\n        setDevice();\r\n        setEndpoints();\r\n        sendPowerOnCCIDCommand();\r\n        sendReadCCIDCommand();\r\n    }\r\n ```\r\n\r\n#### First I send the poweron command to the endpoint:\r\n```java\r\npublic void sendPowerOnCCIDCommand() {\r\n        int dataTransferred = 0;\r\n        byte[] PC_to_RDR_IccPowerOn = hexStringToByteArray(&quot;62&quot; + &quot;00000000&quot; + &quot;00&quot; + &quot;00&quot; + &quot;00&quot; + &quot;0000&quot;);\r\n        if (epOut != null) {\r\n            dataTransferred = smartCardConnection.bulkTransfer(epOut, PC_to_RDR_IccPowerOn, PC_to_RDR_IccPowerOn.length, 2000);\r\n        }\r\n\r\n        write(smartCardConnection, epOut, PC_to_RDR_IccPowerOn);\r\n        read(smartCardConnection, epIn);\r\n    }\r\n  ```\r\n\r\n\r\nThis returns the following: \r\n\r\n`80  00  00  00  00  00  00  41  FE  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00`\r\n\r\n\r\n#### Next I try to perform a read operation:\r\n\r\nthe APDU instruction for this read operation should be the following: \r\n`00 A4 08 0C 06 3F00 DF01 4031`\r\n```java\r\npublic void sendReadCCIDCommand() {\r\n        Log.d(LOG_TAG, &quot;SENDREAD&quot;);\r\n        byte[] command = hexStringToByteArray(&quot;6F&quot; + &quot;0C000000&quot; + &quot;00&quot; + &quot;01&quot; + &quot;00&quot; + &quot;0000&quot; + &quot;00&quot; + &quot;A4&quot; + &quot;08&quot; + &quot;0C&quot; + &quot;06&quot; +&quot;3F00&quot; +&quot;DF01&quot; + &quot;4031&quot;);\r\n\r\n        write(smartCardConnection, epOut, command);\r\n        read(smartCardConnection, epIn);\r\n    }\r\n```\r\n\r\nThis returns the following: \r\n\r\n`80  00  00  00  00  00  01  41  FE  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00`\r\n\r\n\r\n#### The read and write functions:\r\n```java\r\npublic int read(UsbDeviceConnection connection, UsbEndpoint epIn) {\r\n        StringBuilder result = new StringBuilder();\r\n        final byte[] buffer = new byte[epIn.getMaxPacketSize()];\r\n        int byteCount = 0;\r\n        byteCount = connection.bulkTransfer(epIn, buffer, buffer.length, 500);\r\n        \r\n        if (byteCount &gt;= 0) {\r\n            for (byte bb : buffer) {\r\n                result.append(String.format(&quot; %02X &quot;, bb));\r\n            }\r\n        } \r\n\r\n        return byteCount;\r\n    }\r\n\r\n    public void write(UsbDeviceConnection connection, UsbEndpoint epOut, byte[] command) {\r\n        StringBuilder result = new StringBuilder();\r\n        connection.bulkTransfer(epOut, command, command.length, 1000);\r\n        for (byte bb : command) {\r\n            result.append(String.format(&quot; %02X &quot;, bb));\r\n        }\r\n    }\r\n ```","title":"Reading eID data in java android","body":"<p>Setting: I need to read data form an eID smartcard using a built in reader from the android device in java.</p>\n<p>I first try to power on the device. This returns me a lot of 0 bytes. This makes me think it already fails here? When I try to perform a read command I again get 0 bytes for the data part.\nAm I misunderstanding how to perform these instructions or is there a key part that I am missing?</p>\n<p>This is all new to me and not my usual cup of tea.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void readCard() {\n        powerOnReader();\n        getPermission();\n        setDevice();\n        setEndpoints();\n        sendPowerOnCCIDCommand();\n        sendReadCCIDCommand();\n    }\n</code></pre>\n<h4>First I send the poweron command to the endpoint:</h4>\n<pre class=\"lang-java prettyprint-override\"><code>public void sendPowerOnCCIDCommand() {\n        int dataTransferred = 0;\n        byte[] PC_to_RDR_IccPowerOn = hexStringToByteArray(&quot;62&quot; + &quot;00000000&quot; + &quot;00&quot; + &quot;00&quot; + &quot;00&quot; + &quot;0000&quot;);\n        if (epOut != null) {\n            dataTransferred = smartCardConnection.bulkTransfer(epOut, PC_to_RDR_IccPowerOn, PC_to_RDR_IccPowerOn.length, 2000);\n        }\n\n        write(smartCardConnection, epOut, PC_to_RDR_IccPowerOn);\n        read(smartCardConnection, epIn);\n    }\n</code></pre>\n<p>This returns the following:</p>\n<p><code>80  00  00  00  00  00  00  41  FE  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00</code></p>\n<h4>Next I try to perform a read operation:</h4>\n<p>the APDU instruction for this read operation should be the following:\n<code>00 A4 08 0C 06 3F00 DF01 4031</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>public void sendReadCCIDCommand() {\n        Log.d(LOG_TAG, &quot;SENDREAD&quot;);\n        byte[] command = hexStringToByteArray(&quot;6F&quot; + &quot;0C000000&quot; + &quot;00&quot; + &quot;01&quot; + &quot;00&quot; + &quot;0000&quot; + &quot;00&quot; + &quot;A4&quot; + &quot;08&quot; + &quot;0C&quot; + &quot;06&quot; +&quot;3F00&quot; +&quot;DF01&quot; + &quot;4031&quot;);\n\n        write(smartCardConnection, epOut, command);\n        read(smartCardConnection, epIn);\n    }\n</code></pre>\n<p>This returns the following:</p>\n<p><code>80  00  00  00  00  00  01  41  FE  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00  00</code></p>\n<h4>The read and write functions:</h4>\n<pre class=\"lang-java prettyprint-override\"><code>public int read(UsbDeviceConnection connection, UsbEndpoint epIn) {\n        StringBuilder result = new StringBuilder();\n        final byte[] buffer = new byte[epIn.getMaxPacketSize()];\n        int byteCount = 0;\n        byteCount = connection.bulkTransfer(epIn, buffer, buffer.length, 500);\n        \n        if (byteCount &gt;= 0) {\n            for (byte bb : buffer) {\n                result.append(String.format(&quot; %02X &quot;, bb));\n            }\n        } \n\n        return byteCount;\n    }\n\n    public void write(UsbDeviceConnection connection, UsbEndpoint epOut, byte[] command) {\n        StringBuilder result = new StringBuilder();\n        connection.bulkTransfer(epOut, command, command.length, 1000);\n        for (byte bb : command) {\n            result.append(String.format(&quot; %02X &quot;, bb));\n        }\n    }\n</code></pre>\n"},{"tags":["java","android","maven","gradle","build"],"answers":[{"tags":[],"owner":{"account_id":8541170,"reputation":13179,"user_id":6401241,"display_name":"Radesh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1544512136,"creation_date":1544512136,"answer_id":53719068,"question_id":53718969,"body_markdown":"Base on this [link][1] \r\n\r\n&gt;  android licenses. Maybe try $ANDROID_HOME/tools/bin/sdkmanager &quot;build-tools;26.0.1&quot; &quot;platforms;android-26&quot; and see if that helps.\r\n\r\nThis Image can help you\r\n\r\n[![image][2]][2]\r\n\r\n\r\nI suggest you to update `buildToolsVersion` and `supportLibVersion` \r\n\r\n\r\n  [1]: https://github.com/oblador/react-native-vector-icons/issues/527\r\n  [2]: https://i.stack.imgur.com/EY67B.png","title":"Could not find any matches for com.android.tools.build:gradle:2.3.+","body":"<p>Base on this <a href=\"https://github.com/oblador/react-native-vector-icons/issues/527\" rel=\"nofollow noreferrer\">link</a> </p>\n\n<blockquote>\n  <p>android licenses. Maybe try $ANDROID_HOME/tools/bin/sdkmanager \"build-tools;26.0.1\" \"platforms;android-26\" and see if that helps.</p>\n</blockquote>\n\n<p>This Image can help you</p>\n\n<p><a href=\"https://i.stack.imgur.com/EY67B.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EY67B.png\" alt=\"image\"></a></p>\n\n<p>I suggest you to update <code>buildToolsVersion</code> and <code>supportLibVersion</code> </p>\n"},{"tags":[],"owner":{"account_id":6792046,"reputation":95,"user_id":5228825,"accept_rate":100,"display_name":"m1ha1"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1544519767,"creation_date":1544519767,"answer_id":53720826,"question_id":53718969,"body_markdown":"Try to update &#39;react-native-vector-icons&#39; package to the latest version (6.1.0).","title":"Could not find any matches for com.android.tools.build:gradle:2.3.+","body":"<p>Try to update 'react-native-vector-icons' package to the latest version (6.1.0).</p>\n"},{"tags":[],"owner":{"account_id":10932052,"reputation":12327,"user_id":8034839,"display_name":"shizhen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1544577942,"creation_date":1544577942,"answer_id":53734791,"question_id":53718969,"body_markdown":"Try to add this to your `build.gradle` file. \r\n\r\n    subprojects {\r\n        if (project.name.contains(&#39;react-native-vector-icons&#39;)) {\r\n            buildscript {\r\n                repositories {\r\n                    jcenter()\r\n                    maven { url &quot;https://dl.bintray.com/android/android-tools/&quot;  }\r\n                }\r\n            }\r\n        }\r\n    }","title":"Could not find any matches for com.android.tools.build:gradle:2.3.+","body":"<p>Try to add this to your <code>build.gradle</code> file. </p>\n\n<pre><code>subprojects {\n    if (project.name.contains('react-native-vector-icons')) {\n        buildscript {\n            repositories {\n                jcenter()\n                maven { url \"https://dl.bintray.com/android/android-tools/\"  }\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11019006,"reputation":48,"user_id":8093932,"display_name":"Gustavo In&#225;cio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544627041,"creation_date":1544627041,"answer_id":53745859,"question_id":53718969,"body_markdown":"I&#39;ve actually fixed this issue by updating react-native-vector-icons.\r\n\r\nThe method I used is described [HERE][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/53726778/8093932","title":"Could not find any matches for com.android.tools.build:gradle:2.3.+","body":"<p>I've actually fixed this issue by updating react-native-vector-icons.</p>\n\n<p>The method I used is described <a href=\"https://stackoverflow.com/a/53726778/8093932\">HERE</a></p>\n"}],"owner":{"account_id":13060863,"reputation":87,"user_id":9438101,"display_name":"Mirsa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":251,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":53719068,"answer_count":4,"score":4,"last_activity_date":1638890075,"creation_date":1544511705,"question_id":53718969,"body_markdown":"I&#39;m getting this error in when I try to build my app through react-native run-android. It was fine yesterday, but suddenly get this error today.\r\n\r\nI already check the react native vector icons and it looks fine, this also working well with iOS.\r\n\r\nHere&#39;s the error:\r\n\r\n \r\n\r\n       * What went wrong:\r\n    A problem occurred configuring project &#39;:react-native-vector-icons&#39;.\r\n    &gt; Could not resolve all files for configuration &#39;:react-native-vector-icons:classpath&#39;.\r\n       &gt; Could not find any matches for com.android.tools.build:gradle:2.3.+ as no versions of com.android.tools.build:gradle are available.\r\n         Searched in the following locations:\r\n             https://jcenter.bintray.com/com/android/tools/build/gradle/maven-metadata.xml\r\n             https://jcenter.bintray.com/com/android/tools/build/gradle/\r\n         Required by:\r\n             project :react-native-vector-icons\r\n\r\n\r\nHere&#39;s my gradle file:\r\n\r\n\r\n    buildscript {\r\n        repositories {\r\n            maven { url &#39;https://maven.fabric.io/public&#39; }\r\n            google()\r\n            maven {\r\n                url &#39;https://maven.google.com/&#39;\r\n                name &#39;Google&#39;\r\n            }\r\n            jcenter()\r\n        }\r\n        dependencies {\r\n            classpath &#39;com.android.tools.build:gradle:3.1.3&#39;\r\n            classpath &#39;com.google.gms:google-services:3.2.0&#39;\r\n            classpath &#39;io.fabric.tools:gradle:1.+&#39;\r\n    \r\n            // NOTE: Do not place your application dependencies here; they belong\r\n            // in the individual module build.gradle files\r\n        }\r\n    }\r\n    \r\n    allprojects {\r\n        repositories {\r\n            mavenLocal()\r\n            google()\r\n            maven {\r\n                // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm\r\n                url &quot;$rootDir/../node_modules/react-native/android&quot;\r\n            }\r\n            maven { url &#39;https://maven.fabric.io/public&#39; }\r\n            maven { url &quot;https://maven.google.com&quot; }\r\n            jcenter()\r\n        }\r\n    }\r\n    \r\n    ext {\r\n        buildToolsVersion = &quot;26.0.1&quot;\r\n        minSdkVersion = 16\r\n        compileSdkVersion = 26\r\n        targetSdkVersion = 26\r\n        supportLibVersion = &quot;26.1.0&quot;\r\n    }\r\n    \r\n    subprojects {\r\n    \r\n     project.configurations.all {\r\n        resolutionStrategy.eachDependency { details -&gt;\r\n           if (details.requested.group == &#39;com.android.support&#39;\r\n                  &amp;&amp; !details.requested.name.contains(&#39;multidex&#39;) ) {\r\n               details.useVersion &quot;26.0.1&quot;\r\n            }\r\n         }\r\n      }\r\n    \r\n      afterEvaluate {project -&gt;\r\n          if (project.hasProperty(&quot;android&quot;)) {\r\n              android {\r\n                  compileSdkVersion rootProject.ext.compileSdkVersion\r\n                  buildToolsVersion &#39;26.0.1&#39;\r\n                  defaultConfig {\r\n                      targetSdkVersion rootProject.ext.targetSdkVersion\r\n                  }\r\n              }\r\n          }\r\n      }\r\n    }\r\n\r\n\r\nWhat am I missing here?","title":"Could not find any matches for com.android.tools.build:gradle:2.3.+","body":"<p>I'm getting this error in when I try to build my app through react-native run-android. It was fine yesterday, but suddenly get this error today.</p>\n<p>I already check the react native vector icons and it looks fine, this also working well with iOS.</p>\n<p>Here's the error:</p>\n<pre><code>   * What went wrong:\nA problem occurred configuring project ':react-native-vector-icons'.\n&gt; Could not resolve all files for configuration ':react-native-vector-icons:classpath'.\n   &gt; Could not find any matches for com.android.tools.build:gradle:2.3.+ as no versions of com.android.tools.build:gradle are available.\n     Searched in the following locations:\n         https://jcenter.bintray.com/com/android/tools/build/gradle/maven-metadata.xml\n         https://jcenter.bintray.com/com/android/tools/build/gradle/\n     Required by:\n         project :react-native-vector-icons\n</code></pre>\n<p>Here's my gradle file:</p>\n<pre><code>buildscript {\n    repositories {\n        maven { url 'https://maven.fabric.io/public' }\n        google()\n        maven {\n            url 'https://maven.google.com/'\n            name 'Google'\n        }\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.1.3'\n        classpath 'com.google.gms:google-services:3.2.0'\n        classpath 'io.fabric.tools:gradle:1.+'\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        mavenLocal()\n        google()\n        maven {\n            // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm\n            url &quot;$rootDir/../node_modules/react-native/android&quot;\n        }\n        maven { url 'https://maven.fabric.io/public' }\n        maven { url &quot;https://maven.google.com&quot; }\n        jcenter()\n    }\n}\n\next {\n    buildToolsVersion = &quot;26.0.1&quot;\n    minSdkVersion = 16\n    compileSdkVersion = 26\n    targetSdkVersion = 26\n    supportLibVersion = &quot;26.1.0&quot;\n}\n\nsubprojects {\n\n project.configurations.all {\n    resolutionStrategy.eachDependency { details -&gt;\n       if (details.requested.group == 'com.android.support'\n              &amp;&amp; !details.requested.name.contains('multidex') ) {\n           details.useVersion &quot;26.0.1&quot;\n        }\n     }\n  }\n\n  afterEvaluate {project -&gt;\n      if (project.hasProperty(&quot;android&quot;)) {\n          android {\n              compileSdkVersion rootProject.ext.compileSdkVersion\n              buildToolsVersion '26.0.1'\n              defaultConfig {\n                  targetSdkVersion rootProject.ext.targetSdkVersion\n              }\n          }\n      }\n  }\n}\n</code></pre>\n<p>What am I missing here?</p>\n"},{"tags":["java","database","testing","junit"],"comments":[{"owner":{"display_name":"user330315"},"score":0,"creation_date":1315218040,"post_id":7306437,"comment_id":8805548,"body_markdown":"Which DBMS? PostgreSQL? Oracle? ...","body":"Which DBMS? PostgreSQL? Oracle? ..."},{"owner":{"account_id":112963,"reputation":28051,"user_id":297776,"accept_rate":94,"display_name":"soc"},"score":0,"creation_date":1315224214,"post_id":7306437,"comment_id":8807088,"body_markdown":"JPA with EclipseLink, hsqldb.","body":"JPA with EclipseLink, hsqldb."}],"answers":[{"tags":[],"owner":{"account_id":198008,"reputation":12189,"user_id":442433,"display_name":"Giorgos Dimtsas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1315217123,"creation_date":1315217123,"answer_id":7306525,"question_id":7306437,"body_markdown":"[DBUnit](http://www.dbunit.org/) can reset your database between tests and even fill it with predefined test data.","title":"What is the best way to reset the database to a known state while testing database operations?","body":"<p><a href=\"http://www.dbunit.org/\" rel=\"nofollow\">DBUnit</a> can reset your database between tests and even fill it with predefined test data.</p>\n"},{"tags":[],"owner":{"account_id":59692,"reputation":35753,"user_id":178526,"accept_rate":85,"display_name":"sfussenegger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1315217509,"creation_date":1315217509,"answer_id":7306581,"question_id":7306437,"body_markdown":"The easiest way is simply rolling back all changes after each test. This requires a transactional RDBMS and a custom test runner or similar that wraps each test into it&#39;s own transaction. Spring&#39;s [AbstractTransactionalJUnit4SpringContextTests][1] does exactly that.\r\n\r\n\r\n  [1]: http://jarvana.com/jarvana/view/org/springframework/spring-test/3.0.5.RELEASE/spring-test-3.0.5.RELEASE-sources.jar!/org/springframework/test/context/junit4/AbstractTransactionalJUnit4SpringContextTests.java?format=ok","title":"What is the best way to reset the database to a known state while testing database operations?","body":"<p>The easiest way is simply rolling back all changes after each test. This requires a transactional RDBMS and a custom test runner or similar that wraps each test into it's own transaction. Spring's <a href=\"http://jarvana.com/jarvana/view/org/springframework/spring-test/3.0.5.RELEASE/spring-test-3.0.5.RELEASE-sources.jar!/org/springframework/test/context/junit4/AbstractTransactionalJUnit4SpringContextTests.java?format=ok\" rel=\"nofollow\">AbstractTransactionalJUnit4SpringContextTests</a> does exactly that.</p>\n"},{"tags":[],"owner":{"account_id":1376,"reputation":61117,"user_id":1836,"accept_rate":90,"display_name":"Matthew Farwell"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1317301441,"creation_date":1315221963,"answer_id":7307371,"question_id":7306437,"body_markdown":"One technique that I have used in the past is to recreate the database from scratch by simply copying the database from a standard &#39;test database&#39;, and using this in the tests.\r\n\r\nThis technique works if:\r\n\r\n 1. Your schema doesn&#39;t change much (otherwise it&#39;s a pain to keep in line)\r\n 2. You&#39;re using something like hibernate which is reasonably database independent.\r\n\r\nThis has the following advantages:\r\n\r\n 1. It works with code that manages its own transactions. My integration tests run under junit. For instance, when I&#39;m testing a batch process I call Batch.main() from junit, and test stuff before and after. I wouldn&#39;t want to change the transaction processing in the code under test.\r\n 2. It&#39;s reasonably fast. If the files are small enough, then speed is not a problem.\r\n 3. It makes running integration tests on a ci server easy. The database files are checked in with the code. No need for a real database to be up and running.\r\n\r\nAnd the following disadvantages:\r\n\r\n 1. The test database files need to be maintained along with the real database. If you&#39;re adding columns all of the time, this can be a pain.\r\n 2. There is code to manage the jdbc urls, because they change for every test.\r\n\r\nI use this with Oracle as the production/integration database and hsqldb as the test database. It works pretty well. hsqldb is a single file, so is easy to copy.\r\n\r\nSo, in the *@Before*, using hsqldb, you copy the file to a location such as target/it/database/name_of_test.script. This is picked up in the test.\r\n\r\nIn the *@After*, you delete the file (or just leave it, who cares). With hsqldb, you&#39;ll need to do a SHUTDOWN as well, so that you can delete the file.\r\n\r\nYou can also use a *@Rule* which extends from *ExternalResource*, which is a better way to manage your resources.\r\n\r\nOne other tip is that if you&#39;re using maven or something like it, you can create the database in target. I use target/it. This way, the copies of databases get removed when I do and mvn clean. For my batches, I actually copy all of my other properties files etc into this directory as well, so I don&#39;t get any files appearing in strange places either.","title":"What is the best way to reset the database to a known state while testing database operations?","body":"<p>One technique that I have used in the past is to recreate the database from scratch by simply copying the database from a standard 'test database', and using this in the tests.</p>\n\n<p>This technique works if:</p>\n\n<ol>\n<li>Your schema doesn't change much (otherwise it's a pain to keep in line)</li>\n<li>You're using something like hibernate which is reasonably database independent.</li>\n</ol>\n\n<p>This has the following advantages:</p>\n\n<ol>\n<li>It works with code that manages its own transactions. My integration tests run under junit. For instance, when I'm testing a batch process I call Batch.main() from junit, and test stuff before and after. I wouldn't want to change the transaction processing in the code under test.</li>\n<li>It's reasonably fast. If the files are small enough, then speed is not a problem.</li>\n<li>It makes running integration tests on a ci server easy. The database files are checked in with the code. No need for a real database to be up and running.</li>\n</ol>\n\n<p>And the following disadvantages:</p>\n\n<ol>\n<li>The test database files need to be maintained along with the real database. If you're adding columns all of the time, this can be a pain.</li>\n<li>There is code to manage the jdbc urls, because they change for every test.</li>\n</ol>\n\n<p>I use this with Oracle as the production/integration database and hsqldb as the test database. It works pretty well. hsqldb is a single file, so is easy to copy.</p>\n\n<p>So, in the <em>@Before</em>, using hsqldb, you copy the file to a location such as target/it/database/name_of_test.script. This is picked up in the test.</p>\n\n<p>In the <em>@After</em>, you delete the file (or just leave it, who cares). With hsqldb, you'll need to do a SHUTDOWN as well, so that you can delete the file.</p>\n\n<p>You can also use a <em>@Rule</em> which extends from <em>ExternalResource</em>, which is a better way to manage your resources.</p>\n\n<p>One other tip is that if you're using maven or something like it, you can create the database in target. I use target/it. This way, the copies of databases get removed when I do and mvn clean. For my batches, I actually copy all of my other properties files etc into this directory as well, so I don't get any files appearing in strange places either.</p>\n"},{"tags":[],"owner":{"account_id":40221,"reputation":32100,"user_id":116509,"accept_rate":100,"display_name":"artbristol"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1353499890,"creation_date":1353499890,"answer_id":13492965,"question_id":7306437,"body_markdown":"I am answering this more for my own reference, but here goes. The answer assumes a per-developer SQL Server DB.\r\n\r\nBasic approach\r\n--------------\r\n\r\n1. Use DBUnit to store an XML file of the known state. You can extract this file once you&#39;ve set up the DB, or you can create it from scratch. Put this file in your version control along with scripts that call DBUnit to populate the DB with it.\r\n\r\n2. In your tests, call the aforementioned scripts using `@Before`.\r\n\r\nSpeedup 1\r\n---------\r\n\r\nOnce this is working, tweak the approach to speed things up. Here&#39;s an approach for a SQL Server DB.\r\n\r\n\r\nBefore DBUnit, totally wipe out the DB:\r\n\r\n    EXEC sp_msforeachtable &#39;ALTER TABLE ? NOCHECK CONSTRAINT ALL&#39;;\r\n    EXEC sp_MSforeachtable &#39;ALTER TABLE ? DISABLE TRIGGER ALL&#39;;\r\n    EXEC sp_MSForEachTable &#39;SET QUOTED_IDENTIFIER ON SET ANSI_NULLS ON DELETE FROM ?&#39;;\r\n\r\nAfter DBUnit, restore the constraints\r\n\r\n    EXEC sp_MSforeachtable &#39;ALTER TABLE ? CHECK CONSTRAINT ALL&#39;;\r\n    EXEC sp_MSforeachtable &#39;ALTER TABLE ? ENABLE TRIGGER ALL&#39;;\r\n\r\nSpeedup 2\r\n---------\r\n\r\nUse SQL Server&#39;s RESTORE functionality. In my tests, this runs in 25% the time DBUnit takes. If (and only if) this is a major factor in your test duration, it&#39;s worth investigating this approach.\r\n\r\nThe following classes show an implementation using Spring JDBC, JTDS, and CDI injection. This is designed to work for in-container tests, where the container may be making its own connections to the DB, that need to be stopped \r\n\r\n    import java.io.File;\r\n    import java.sql.SQLException;\r\n    \r\n    import javax.inject.Inject;\r\n    import javax.sql.DataSource;\r\n    \r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.jdbc.core.JdbcTemplate;\r\n    \r\n    /**\r\n     * Allows the DB to be reset quickly using SQL restore, at the price of\r\n     * additional complexity. Recommended to vanilla DBUnit unless speed is\r\n     * necessary.\r\n     * \r\n     * @author aocathain\r\n     * \r\n     */\r\n    @SuppressWarnings({ &quot;PMD.SignatureDeclareThrowsException&quot; })\r\n    public abstract class DbResetterSO {\r\n    \r\n    \tprotected final Logger logger = LoggerFactory.getLogger(getClass());\r\n    \r\n    \t/**\r\n    \t * Deliberately created in the target dir, so that on mvn clean, it is\r\n    \t * deleted and will be recreated.\r\n    \t */\r\n    \tprivate final File backupFile = new File(\r\n    \t\t\t&quot;target\\\\test-classes\\\\db-backup.bak&quot;);\r\n    \r\n    \t@Inject\r\n    \tprivate OtherDbConnections otherDbConnections;\r\n    \r\n    \t/**\r\n    \t * Backs up the database, if a backup doesn&#39;t exist.\r\n    \t * \r\n    \t * @param masterDataSource\r\n    \t *            a datasource with sufficient rights to do RESTORE DATABASE. It\r\n    \t *            must not be connected to the database being restored, so\r\n    \t *            should have db master as its default db.\r\n    \t */\r\n    \tpublic void backup(final DataSource masterDataSource) throws Exception {\r\n    \r\n    \t\tfinal JdbcTemplate masterJdbcTemplate = new JdbcTemplate(\r\n    \t\t\t\tmasterDataSource);\r\n    \r\n    \t\tif (backupFile.exists()) {\r\n    \t\t\tlogger.debug(&quot;File {} already exists, not backing up&quot;, backupFile);\r\n    \t\t} else {\r\n    \t\t\totherDbConnections.start();\r\n    \r\n    \t\t\tsetupDbWithDbUnit();\r\n    \r\n    \t\t\totherDbConnections.stop();\r\n    \t\t\tlogger.debug(&quot;Backing up&quot;);\r\n    \t\t\tmasterJdbcTemplate.execute(&quot;BACKUP DATABASE [&quot; + getDbName()\r\n    \t\t\t\t\t+ &quot;] TO DISK =&#39;&quot; + backupFile.getAbsolutePath() + &quot;&#39;&quot;);\r\n    \t\t\tlogger.debug(&quot;Finished backing up&quot;);\r\n    \t\t\totherDbConnections.start();\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Restores the database\r\n    \t * \r\n    \t * @param masterDataSource\r\n    \t *            a datasource with sufficient rights to do RESTORE DATABASE. It\r\n    \t *            must not be connected to the database being restored, so\r\n    \t *            should have db master as its default db.\r\n    \t */\r\n    \tpublic void restore(final DataSource masterDataSource) throws SQLException {\r\n    \t\tfinal JdbcTemplate masterJdbcTemplate = new JdbcTemplate(\r\n    \t\t\t\tmasterDataSource);\r\n    \r\n    \t\tif (!backupFile.exists()) {\r\n    \t\t\tthrow new IllegalStateException(backupFile.getAbsolutePath()\r\n    \t\t\t\t\t+ &quot; must have been created already&quot;);\r\n    \t\t}\r\n    \t\totherDbConnections.stop();\r\n    \r\n    \t\tlogger.debug(&quot;Setting to single user&quot;);\r\n    \r\n    \t\tmasterJdbcTemplate.execute(&quot;ALTER DATABASE [&quot; + getDbName()\r\n    \t\t\t\t+ &quot;] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;&quot;);\r\n    \r\n    \t\tlogger.info(&quot;Restoring&quot;);\r\n    \r\n    \t\tmasterJdbcTemplate.execute(&quot;RESTORE DATABASE [&quot; + getDbName()\r\n    \t\t\t\t+ &quot;] FROM DISK =&#39;&quot; + backupFile.getAbsolutePath()\r\n    \t\t\t\t+ &quot;&#39; WITH REPLACE&quot;);\r\n    \r\n    \t\tlogger.debug(&quot;Setting to multi user&quot;);\r\n    \r\n    \t\tmasterJdbcTemplate.execute(&quot;ALTER DATABASE [&quot; + getDbName()\r\n    \t\t\t\t+ &quot;] SET MULTI_USER;&quot;);\r\n    \r\n    \t\totherDbConnections.start();\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @return Name of the DB on the SQL server instance\r\n    \t */\r\n    \tprotected abstract String getDbName();\r\n    \r\n    \t/**\r\n    \t * Sets up the DB to the required known state. Can be slow, since it&#39;s only\r\n    \t * run once, during the initial backup. Can use the DB connections from otherDbConnections.\r\n    \t */\r\n    \tprotected abstract void setupDbWithDbUnit() throws Exception;\r\n    }\r\n    \r\n    \r\n    import java.sql.SQLException;\r\n    \r\n    /**\r\n     * To SQL RESTORE the db, all other connections to that DB must be stopped. Implementations of this interface must\r\n     * have control of all other connections.\r\n     * \r\n     * @author aocathain\r\n     * \r\n     */\r\n    public interface OtherDbConnections\r\n    {\r\n    \r\n    \t/**\r\n    \t * Restarts all connections\r\n    \t */\r\n    \tvoid start() throws SQLException;\r\n    \r\n    \t/**\r\n    \t * Stops all connections\r\n    \t */\r\n    \tvoid stop() throws SQLException;\r\n    \r\n    }\r\n\r\n\r\n\r\n    import java.sql.Connection;\r\n    import java.sql.SQLException;\r\n    \r\n    import javax.annotation.PostConstruct;\r\n    import javax.annotation.PreDestroy;\r\n    import javax.enterprise.inject.Produces;\r\n    import javax.inject.Named;\r\n    import javax.inject.Singleton;\r\n    import javax.sql.DataSource;\r\n    \r\n    import net.sourceforge.jtds.jdbcx.JtdsDataSource;\r\n    \r\n    import org.springframework.jdbc.datasource.DelegatingDataSource;\r\n    import org.springframework.jdbc.datasource.SingleConnectionDataSource;\r\n    \r\n    /**\r\n     * Implements OtherDbConnections for the DbResetter and provides the DataSource during in-container tests.\r\n     * \r\n     * @author aocathain\r\n     * \r\n     */\r\n    @Singleton\r\n    @SuppressWarnings({ &quot;PMD.AvoidUsingVolatile&quot; })\r\n    public abstract class ResettableDataSourceProviderSO implements OtherDbConnections\r\n    {\r\n    \r\n    \tprivate volatile Connection connection;\r\n    \tprivate volatile SingleConnectionDataSource scds;\r\n    \tprivate final DelegatingDataSource dgds = new DelegatingDataSource();\r\n    \r\n    \t@Produces\r\n    \t@Named(&quot;in-container-ds&quot;)\r\n    \tpublic DataSource resettableDatasource() throws SQLException\r\n    \t{\r\n    \t\treturn dgds;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \t@PostConstruct\r\n    \tpublic void start() throws SQLException\r\n    \t{\r\n    \t\tfinal JtdsDataSource ds = new JtdsDataSource();\r\n    \r\n    \t\tds.setServerName(&quot;localhost&quot;);\r\n    \t\tds.setDatabaseName(dbName());\r\n    \t\tconnection = ds.getConnection(username(), password());\r\n    \r\n    \t\tscds = new SingleConnectionDataSource(connection, true);\r\n    \t\tdgds.setTargetDataSource(scds);\r\n    \r\n    \t}\r\n    \r\n    \tprotected abstract String password();\r\n    \r\n    \tprotected abstract String username();\r\n    \r\n    \tprotected abstract String dbName();\r\n    \r\n    \t@Override\r\n    \t@PreDestroy\r\n    \tpublic void stop() throws SQLException\r\n    \t{\r\n    \t\tif (null != connection)\r\n    \t\t{\r\n    \t\t\tscds.destroy();\r\n    \t\t\tconnection.close();\r\n    \t\t}\r\n    \r\n    \t}\r\n    }\r\n\r\n","title":"What is the best way to reset the database to a known state while testing database operations?","body":"<p>I am answering this more for my own reference, but here goes. The answer assumes a per-developer SQL Server DB.</p>\n\n<h2>Basic approach</h2>\n\n<ol>\n<li><p>Use DBUnit to store an XML file of the known state. You can extract this file once you've set up the DB, or you can create it from scratch. Put this file in your version control along with scripts that call DBUnit to populate the DB with it.</p></li>\n<li><p>In your tests, call the aforementioned scripts using <code>@Before</code>.</p></li>\n</ol>\n\n<h2>Speedup 1</h2>\n\n<p>Once this is working, tweak the approach to speed things up. Here's an approach for a SQL Server DB.</p>\n\n<p>Before DBUnit, totally wipe out the DB:</p>\n\n<pre><code>EXEC sp_msforeachtable 'ALTER TABLE ? NOCHECK CONSTRAINT ALL';\nEXEC sp_MSforeachtable 'ALTER TABLE ? DISABLE TRIGGER ALL';\nEXEC sp_MSForEachTable 'SET QUOTED_IDENTIFIER ON SET ANSI_NULLS ON DELETE FROM ?';\n</code></pre>\n\n<p>After DBUnit, restore the constraints</p>\n\n<pre><code>EXEC sp_MSforeachtable 'ALTER TABLE ? CHECK CONSTRAINT ALL';\nEXEC sp_MSforeachtable 'ALTER TABLE ? ENABLE TRIGGER ALL';\n</code></pre>\n\n<h2>Speedup 2</h2>\n\n<p>Use SQL Server's RESTORE functionality. In my tests, this runs in 25% the time DBUnit takes. If (and only if) this is a major factor in your test duration, it's worth investigating this approach.</p>\n\n<p>The following classes show an implementation using Spring JDBC, JTDS, and CDI injection. This is designed to work for in-container tests, where the container may be making its own connections to the DB, that need to be stopped </p>\n\n<pre><code>import java.io.File;\nimport java.sql.SQLException;\n\nimport javax.inject.Inject;\nimport javax.sql.DataSource;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.jdbc.core.JdbcTemplate;\n\n/**\n * Allows the DB to be reset quickly using SQL restore, at the price of\n * additional complexity. Recommended to vanilla DBUnit unless speed is\n * necessary.\n * \n * @author aocathain\n * \n */\n@SuppressWarnings({ \"PMD.SignatureDeclareThrowsException\" })\npublic abstract class DbResetterSO {\n\n    protected final Logger logger = LoggerFactory.getLogger(getClass());\n\n    /**\n     * Deliberately created in the target dir, so that on mvn clean, it is\n     * deleted and will be recreated.\n     */\n    private final File backupFile = new File(\n            \"target\\\\test-classes\\\\db-backup.bak\");\n\n    @Inject\n    private OtherDbConnections otherDbConnections;\n\n    /**\n     * Backs up the database, if a backup doesn't exist.\n     * \n     * @param masterDataSource\n     *            a datasource with sufficient rights to do RESTORE DATABASE. It\n     *            must not be connected to the database being restored, so\n     *            should have db master as its default db.\n     */\n    public void backup(final DataSource masterDataSource) throws Exception {\n\n        final JdbcTemplate masterJdbcTemplate = new JdbcTemplate(\n                masterDataSource);\n\n        if (backupFile.exists()) {\n            logger.debug(\"File {} already exists, not backing up\", backupFile);\n        } else {\n            otherDbConnections.start();\n\n            setupDbWithDbUnit();\n\n            otherDbConnections.stop();\n            logger.debug(\"Backing up\");\n            masterJdbcTemplate.execute(\"BACKUP DATABASE [\" + getDbName()\n                    + \"] TO DISK ='\" + backupFile.getAbsolutePath() + \"'\");\n            logger.debug(\"Finished backing up\");\n            otherDbConnections.start();\n        }\n\n    }\n\n    /**\n     * Restores the database\n     * \n     * @param masterDataSource\n     *            a datasource with sufficient rights to do RESTORE DATABASE. It\n     *            must not be connected to the database being restored, so\n     *            should have db master as its default db.\n     */\n    public void restore(final DataSource masterDataSource) throws SQLException {\n        final JdbcTemplate masterJdbcTemplate = new JdbcTemplate(\n                masterDataSource);\n\n        if (!backupFile.exists()) {\n            throw new IllegalStateException(backupFile.getAbsolutePath()\n                    + \" must have been created already\");\n        }\n        otherDbConnections.stop();\n\n        logger.debug(\"Setting to single user\");\n\n        masterJdbcTemplate.execute(\"ALTER DATABASE [\" + getDbName()\n                + \"] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;\");\n\n        logger.info(\"Restoring\");\n\n        masterJdbcTemplate.execute(\"RESTORE DATABASE [\" + getDbName()\n                + \"] FROM DISK ='\" + backupFile.getAbsolutePath()\n                + \"' WITH REPLACE\");\n\n        logger.debug(\"Setting to multi user\");\n\n        masterJdbcTemplate.execute(\"ALTER DATABASE [\" + getDbName()\n                + \"] SET MULTI_USER;\");\n\n        otherDbConnections.start();\n    }\n\n    /**\n     * @return Name of the DB on the SQL server instance\n     */\n    protected abstract String getDbName();\n\n    /**\n     * Sets up the DB to the required known state. Can be slow, since it's only\n     * run once, during the initial backup. Can use the DB connections from otherDbConnections.\n     */\n    protected abstract void setupDbWithDbUnit() throws Exception;\n}\n\n\nimport java.sql.SQLException;\n\n/**\n * To SQL RESTORE the db, all other connections to that DB must be stopped. Implementations of this interface must\n * have control of all other connections.\n * \n * @author aocathain\n * \n */\npublic interface OtherDbConnections\n{\n\n    /**\n     * Restarts all connections\n     */\n    void start() throws SQLException;\n\n    /**\n     * Stops all connections\n     */\n    void stop() throws SQLException;\n\n}\n\n\n\nimport java.sql.Connection;\nimport java.sql.SQLException;\n\nimport javax.annotation.PostConstruct;\nimport javax.annotation.PreDestroy;\nimport javax.enterprise.inject.Produces;\nimport javax.inject.Named;\nimport javax.inject.Singleton;\nimport javax.sql.DataSource;\n\nimport net.sourceforge.jtds.jdbcx.JtdsDataSource;\n\nimport org.springframework.jdbc.datasource.DelegatingDataSource;\nimport org.springframework.jdbc.datasource.SingleConnectionDataSource;\n\n/**\n * Implements OtherDbConnections for the DbResetter and provides the DataSource during in-container tests.\n * \n * @author aocathain\n * \n */\n@Singleton\n@SuppressWarnings({ \"PMD.AvoidUsingVolatile\" })\npublic abstract class ResettableDataSourceProviderSO implements OtherDbConnections\n{\n\n    private volatile Connection connection;\n    private volatile SingleConnectionDataSource scds;\n    private final DelegatingDataSource dgds = new DelegatingDataSource();\n\n    @Produces\n    @Named(\"in-container-ds\")\n    public DataSource resettableDatasource() throws SQLException\n    {\n        return dgds;\n    }\n\n    @Override\n    @PostConstruct\n    public void start() throws SQLException\n    {\n        final JtdsDataSource ds = new JtdsDataSource();\n\n        ds.setServerName(\"localhost\");\n        ds.setDatabaseName(dbName());\n        connection = ds.getConnection(username(), password());\n\n        scds = new SingleConnectionDataSource(connection, true);\n        dgds.setTargetDataSource(scds);\n\n    }\n\n    protected abstract String password();\n\n    protected abstract String username();\n\n    protected abstract String dbName();\n\n    @Override\n    @PreDestroy\n    public void stop() throws SQLException\n    {\n        if (null != connection)\n        {\n            scds.destroy();\n            connection.close();\n        }\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":265711,"reputation":478,"user_id":552865,"display_name":"Mariano"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638889910,"creation_date":1638889910,"answer_id":70262572,"question_id":7306437,"body_markdown":"It&#39;s an old Topic I know but times have changed in the last ten years ;)\r\n\r\nA solution I like much is do create a prepatched dockerimage and create a container from it with [Testcontainers][1]. It may take a moment to start the container (not that much time) but in this way you are able to run all tests in parallel because it&#39;s up to you how many Databse Instances you want to use (I use one per CPU dynamically) and speedup the whole testsoute alot.\r\n\r\nThe nice thing here is, if your application relies on more other dependencies (e.g. other servers like ssh, ftp, ldap, rest Services, ... whatever) you can deal with it in the same way.\r\n\r\nIn Addition, you are of course able do combine this solution with any of the other solutions to speed the whole thing up a little more.\r\n\r\n\r\n  [1]: https://www.testcontainers.org/","title":"What is the best way to reset the database to a known state while testing database operations?","body":"<p>It's an old Topic I know but times have changed in the last ten years ;)</p>\n<p>A solution I like much is do create a prepatched dockerimage and create a container from it with <a href=\"https://www.testcontainers.org/\" rel=\"nofollow noreferrer\">Testcontainers</a>. It may take a moment to start the container (not that much time) but in this way you are able to run all tests in parallel because it's up to you how many Databse Instances you want to use (I use one per CPU dynamically) and speedup the whole testsoute alot.</p>\n<p>The nice thing here is, if your application relies on more other dependencies (e.g. other servers like ssh, ftp, ldap, rest Services, ... whatever) you can deal with it in the same way.</p>\n<p>In Addition, you are of course able do combine this solution with any of the other solutions to speed the whole thing up a little more.</p>\n"}],"owner":{"account_id":112963,"reputation":28051,"user_id":297776,"accept_rate":94,"display_name":"soc"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4283,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":7307371,"answer_count":5,"score":8,"last_activity_date":1638889910,"creation_date":1315216604,"question_id":7306437,"body_markdown":"I&#39;m writing tests with JUnit for some methods operating on a test database.\r\n\r\nI need to reset the database to the original state after each `@Test`. I&#39;m wondering what&#39;s the best way to do that.\r\n\r\nIs there some method in the `EntityManager`? Or should I just delete everything manually or with an SQL statement? Would it be better to just drop and recreate the whole database?","title":"What is the best way to reset the database to a known state while testing database operations?","body":"<p>I'm writing tests with JUnit for some methods operating on a test database.</p>\n\n<p>I need to reset the database to the original state after each <code>@Test</code>. I'm wondering what's the best way to do that.</p>\n\n<p>Is there some method in the <code>EntityManager</code>? Or should I just delete everything manually or with an SQL statement? Would it be better to just drop and recreate the whole database?</p>\n"},{"tags":["java","memory-leaks","jvm","hazelcast"],"answers":[{"tags":[],"owner":{"account_id":919674,"reputation":14586,"user_id":951609,"accept_rate":60,"display_name":"František Hartman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638875647,"creation_date":1638875647,"answer_id":70259148,"question_id":70258795,"body_markdown":"&gt; it is like the VM memory usage is following the higher memory usage of hazelcast. then when the GC starts in hazelcast the heap memory usage on hazelcast decreases but the VM memory usage never decreases.\r\n\r\nThis is typical behaviour for any JVM application, it is not specific to Hazelcast. By default JVM rarely returns the memory to OS, but it is possible to configure it that way.\r\n\r\nSee e.g. [this answer](https://stackoverflow.com/a/30464183/951609) for more details on behaviours of particular JVMs.\r\n\r\nYou say you are using a dedicated VM for Hazelcast. In such scenario, it doesn&#39;t make sense to return the memory to OS and it is best to use the same MIN and MAX heap size so there is no heap resizing when Hazelcast is running.","title":"Hazelcast (JVM) memory settings","body":"<blockquote>\n<p>it is like the VM memory usage is following the higher memory usage of hazelcast. then when the GC starts in hazelcast the heap memory usage on hazelcast decreases but the VM memory usage never decreases.</p>\n</blockquote>\n<p>This is typical behaviour for any JVM application, it is not specific to Hazelcast. By default JVM rarely returns the memory to OS, but it is possible to configure it that way.</p>\n<p>See e.g. <a href=\"https://stackoverflow.com/a/30464183/951609\">this answer</a> for more details on behaviours of particular JVMs.</p>\n<p>You say you are using a dedicated VM for Hazelcast. In such scenario, it doesn't make sense to return the memory to OS and it is best to use the same MIN and MAX heap size so there is no heap resizing when Hazelcast is running.</p>\n"}],"owner":{"account_id":23573433,"reputation":11,"user_id":17613351,"display_name":"karim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1060,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1638889903,"creation_date":1638874124,"question_id":70258795,"body_markdown":"I have installed a cluster of 3 hazelcast nodes.\r\nEach hazelcast node is installed in a dedicated VM (running with centos 7).\r\nEach VM has 16GB RAM and a 15GB HDD.\r\nfor each hazelcast node I set the heap memory size in the start.sh script as MIN HEAP SIZE=8G and MAX HEAP SIZE=10G.\r\n\r\nHowever, when I monitor the memory usage on the VM, it is not matching the heap memory usage of hazelcast at all.\r\nLet me give you an example:\r\nthe VM is showing the memory usage 80%. however when I check hazelcast heap memory usage it is at 45%. it is like the VM memory usage is following the higher memory usage of hazelcast. then when the GC starts in hazelcast the heap memory usage on hazelcast decreases but the VM memory usage never decreases.\r\nin the VM I also disable THP and set the swappiness to 10 as mentioned in the performance tuning documentation Performance Tuning (hazelcast.com)\r\n\r\nSo is there a missing configuration that I should do for hazelcast? What can/should I do?","title":"Hazelcast (JVM) memory settings","body":"<p>I have installed a cluster of 3 hazelcast nodes.\nEach hazelcast node is installed in a dedicated VM (running with centos 7).\nEach VM has 16GB RAM and a 15GB HDD.\nfor each hazelcast node I set the heap memory size in the start.sh script as MIN HEAP SIZE=8G and MAX HEAP SIZE=10G.</p>\n<p>However, when I monitor the memory usage on the VM, it is not matching the heap memory usage of hazelcast at all.\nLet me give you an example:\nthe VM is showing the memory usage 80%. however when I check hazelcast heap memory usage it is at 45%. it is like the VM memory usage is following the higher memory usage of hazelcast. then when the GC starts in hazelcast the heap memory usage on hazelcast decreases but the VM memory usage never decreases.\nin the VM I also disable THP and set the swappiness to 10 as mentioned in the performance tuning documentation Performance Tuning (hazelcast.com)</p>\n<p>So is there a missing configuration that I should do for hazelcast? What can/should I do?</p>\n"},{"tags":["java","java-8","garbage-collection","jvm","g1gc"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1518497365,"post_id":48759638,"comment_id":84519921,"body_markdown":"Ok. Set the young generation size to 16 GB and see if that makes a difference. You know your application better then we do.","body":"Ok. Set the young generation size to 16 GB and see if that makes a difference. You know your application better then we do."},{"owner":{"account_id":8947710,"reputation":3608,"user_id":6716781,"display_name":"Jonah Benton"},"score":0,"creation_date":1518499701,"post_id":48759638,"comment_id":84520555,"body_markdown":"It looks the app makes a lot of short lived garbage that is easy to dispose of. G1 should be a good fit. Should be able to set XX:InitiatingHeapOccupancyPercent to be pretty high- 75 or 80, which should make the GC graph look more like the CMS graph.","body":"It looks the app makes a lot of short lived garbage that is easy to dispose of. G1 should be a good fit. Should be able to set XX:InitiatingHeapOccupancyPercent to be pretty high- 75 or 80, which should make the GC graph look more like the CMS graph."},{"owner":{"account_id":3301474,"reputation":2047,"user_id":2777540,"accept_rate":22,"display_name":"Michael P"},"score":0,"creation_date":1518501302,"post_id":48759638,"comment_id":84521064,"body_markdown":"@JonahB all the GC cycles that you see in the image are G1New. Please correct me if I misunderstood the XX:InitiatingHeapOccupancyPercent meaning. Isn&#39;t  a Concurrent Marking Cycle part of the old generation collection? (looking here http://www.oracle.com/technetwork/tutorials/tutorials-1876574.html at G1 Collection Phases - Concurrent Marking Cycle Phases section). If so how would raising that value prevent the G1New cycles?","body":"@JonahB all the GC cycles that you see in the image are G1New. Please correct me if I misunderstood the XX:InitiatingHeapOccupancyPercent meaning. Isn&#39;t  a Concurrent Marking Cycle part of the old generation collection? (looking here <a href=\"http://www.oracle.com/technetwork/tutorials/tutorials-1876574.html\" rel=\"nofollow noreferrer\">oracle.com/technetwork/tutorials/tutorials-1876574.html</a> at G1 Collection Phases - Concurrent Marking Cycle Phases section). If so how would raising that value prevent the G1New cycles?"},{"owner":{"account_id":3301474,"reputation":2047,"user_id":2777540,"accept_rate":22,"display_name":"Michael P"},"score":2,"creation_date":1518501583,"post_id":48759638,"comment_id":84521155,"body_markdown":"@ElliottFrisch, thanks for the reply. According to Oracle, if I set the young generation size, G1GC will not respect the target pause time. &quot;Explicitly setting young generation size via -Xmn meddles with the default behavior of the G1 collector.\n\nG1 will no longer respect the pause time target for collections. So in essence, setting the young generation size disables the pause time goal.\nG1 is no longer able to expand and contract the young generation space as needed. Since the size is fixed, no changes can be made to the size&quot;","body":"@ElliottFrisch, thanks for the reply. According to Oracle, if I set the young generation size, G1GC will not respect the target pause time. &quot;Explicitly setting young generation size via -Xmn meddles with the default behavior of the G1 collector.  G1 will no longer respect the pause time target for collections. So in essence, setting the young generation size disables the pause time goal. G1 is no longer able to expand and contract the young generation space as needed. Since the size is fixed, no changes can be made to the size&quot;"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1518510177,"post_id":48759638,"comment_id":84524904,"body_markdown":"Did you try what happens, if you don’t specify `MaxGCPauseMillis`?","body":"Did you try what happens, if you don’t specify <code>MaxGCPauseMillis</code>?"},{"owner":{"account_id":8947710,"reputation":3608,"user_id":6716781,"display_name":"Jonah Benton"},"score":0,"creation_date":1518534514,"post_id":48759638,"comment_id":84540640,"body_markdown":"Yes, IHOP instructs GC for old gen. The pauses in the graph are very long for such a small collection. Something going wrong there. If you try setting large young gen size, you may get the same behavior as CMS but- without knowing the app- I would guess you will see longer pauses. If you were seeing numerous but much shorter collections under G1, that would be a reason to grow young gen. IHOP is there to guide GC around how quickly garbage is generated, relative to how quickly it can be cleaned. Increasing should allow GC to push work to old gen, and lengthen the time between collections.","body":"Yes, IHOP instructs GC for old gen. The pauses in the graph are very long for such a small collection. Something going wrong there. If you try setting large young gen size, you may get the same behavior as CMS but- without knowing the app- I would guess you will see longer pauses. If you were seeing numerous but much shorter collections under G1, that would be a reason to grow young gen. IHOP is there to guide GC around how quickly garbage is generated, relative to how quickly it can be cleaned. Increasing should allow GC to push work to old gen, and lengthen the time between collections."},{"owner":{"account_id":3301474,"reputation":2047,"user_id":2777540,"accept_rate":22,"display_name":"Michael P"},"score":0,"creation_date":1518541763,"post_id":48759638,"comment_id":84545409,"body_markdown":"@JonahB please see my update. As you can see all those pauses are as long as the target pause time and they are all new.","body":"@JonahB please see my update. As you can see all those pauses are as long as the target pause time and they are all new."},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1518541936,"post_id":48759638,"comment_id":84545519,"body_markdown":"You might also want to try setting -Xms to a value **lower** than -Xmx, that gives the tuning heuristics in the VM some room to play.","body":"You might also want to try setting -Xms to a value <b>lower</b> than -Xmx, that gives the tuning heuristics in the VM some room to play."},{"owner":{"account_id":1443334,"reputation":41522,"user_id":1362755,"display_name":"the8472"},"score":0,"creation_date":1518550352,"post_id":48759638,"comment_id":84550091,"body_markdown":"Those screenshots only graph 3 variables. Enable detailed GC logging, post logs, those track dozens of stats of interest.","body":"Those screenshots only graph 3 variables. Enable detailed GC logging, post logs, those track dozens of stats of interest."},{"owner":{"account_id":3301474,"reputation":2047,"user_id":2777540,"accept_rate":22,"display_name":"Michael P"},"score":0,"creation_date":1518551807,"post_id":48759638,"comment_id":84550793,"body_markdown":"@the8472 I added GC logs, please see the update","body":"@the8472 I added GC logs, please see the update"},{"owner":{"account_id":5316725,"reputation":141,"user_id":4241377,"display_name":"Mr__Steel"},"score":0,"creation_date":1520286768,"post_id":48759638,"comment_id":85245687,"body_markdown":"As your pause time is very low for a 22GB heap, the G1 tries to reduce the Young Generation till it can assure that the pause time is met. According to the GC log, just half of the available Memory is really used. Have you tried to reduce the -Xmx and -Xms to around 12GB?","body":"As your pause time is very low for a 22GB heap, the G1 tries to reduce the Young Generation till it can assure that the pause time is met. According to the GC log, just half of the available Memory is really used. Have you tried to reduce the -Xmx and -Xms to around 12GB?"}],"answers":[{"tags":[],"owner":{"account_id":1443334,"reputation":41522,"user_id":1362755,"display_name":"the8472"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1518570539,"creation_date":1518570539,"answer_id":48778187,"question_id":48759638,"body_markdown":"Your GC log shows an average GC pause interval of 2 seconds with each around 30-40ms, which amounts to an application throughput of around 95%. That does not amount to &quot;killing performance&quot; territory. At least not due to GC pauses.\r\n\r\nG1 does more concurrent work though, e.g. for remembered set refinement and your pauses seem to spend some time in [update/scan RS][1], so I assume the concurrent GC threads are busy too, i.e. it may need additional CPU cycles outside GC pauses, which is not covered by the logs by default, you need `+G1SummarizeRSetStats` for that. If latency is more important you might want to allocated more cores to the machine, if throughput is more important you could tune G1 to perform more of the RS updates during the pauses (at the cost of increased pause times). \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/gctuning/garbage-first-garbage-collector-tuning.htm#JSGCT-GUID-70E3F150-B68E-4787-BBF1-F91315AC9AB9","title":"G1GC very high GC count and CPU, very frequency GCs that kill performance","body":"<p>Your GC log shows an average GC pause interval of 2 seconds with each around 30-40ms, which amounts to an application throughput of around 95%. That does not amount to \"killing performance\" territory. At least not due to GC pauses.</p>\n\n<p>G1 does more concurrent work though, e.g. for remembered set refinement and your pauses seem to spend some time in <a href=\"https://docs.oracle.com/javase/9/gctuning/garbage-first-garbage-collector-tuning.htm#JSGCT-GUID-70E3F150-B68E-4787-BBF1-F91315AC9AB9\" rel=\"nofollow noreferrer\">update/scan RS</a>, so I assume the concurrent GC threads are busy too, i.e. it may need additional CPU cycles outside GC pauses, which is not covered by the logs by default, you need <code>+G1SummarizeRSetStats</code> for that. If latency is more important you might want to allocated more cores to the machine, if throughput is more important you could tune G1 to perform more of the RS updates during the pauses (at the cost of increased pause times). </p>\n"},{"tags":[],"owner":{"account_id":3301474,"reputation":2047,"user_id":2777540,"accept_rate":22,"display_name":"Michael P"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1518740692,"creation_date":1518740692,"answer_id":48818412,"question_id":48759638,"body_markdown":"I was able to see that the time spent in copying objects is very significant. Looks like G1GC has 15 generations by default before the object is promoted to Tenured Generation. \r\nI reduced it to 1 (`-XX:MaxTenuringThreshold=1`)\r\n\r\nAlso I don&#39;t know how to confirm it in the logs, however visualizing the GC log I saw that the young generation is constantly being resized, from minimum size to maximum size. I narrowed down the range and that also improved the performance. \r\n\r\n\r\n\r\nLooking here https://docs.oracle.com/javase/9/gctuning/garbage-first-garbage-collector-tuning.htm#JSGCT-GUID-70E3F150-B68E-4787-BBF1-F91315AC9AB9\r\nI was trying to figure out if coarsenings is indeed an issue. But it simply says to set gc+remset=trace which I do not understand how to pass to java in command line, and if it&#39;s even available in JDK 8.\r\nI increased the XX:G1RSetRegionEntries a bit just in case.\r\n\r\nI hope it helps to the future G1GC tuner and if anyone else has more suggestions that would be great.\r\n\r\nWhat I still see is that [Processed Buffers] is still taking a very long time in young evacuations, and [Scan RS] is very long in mixed collections.\r\nNot sure why","title":"G1GC very high GC count and CPU, very frequency GCs that kill performance","body":"<p>I was able to see that the time spent in copying objects is very significant. Looks like G1GC has 15 generations by default before the object is promoted to Tenured Generation. \nI reduced it to 1 (<code>-XX:MaxTenuringThreshold=1</code>)</p>\n\n<p>Also I don't know how to confirm it in the logs, however visualizing the GC log I saw that the young generation is constantly being resized, from minimum size to maximum size. I narrowed down the range and that also improved the performance. </p>\n\n<p>Looking here <a href=\"https://docs.oracle.com/javase/9/gctuning/garbage-first-garbage-collector-tuning.htm#JSGCT-GUID-70E3F150-B68E-4787-BBF1-F91315AC9AB9\" rel=\"noreferrer\">https://docs.oracle.com/javase/9/gctuning/garbage-first-garbage-collector-tuning.htm#JSGCT-GUID-70E3F150-B68E-4787-BBF1-F91315AC9AB9</a>\nI was trying to figure out if coarsenings is indeed an issue. But it simply says to set gc+remset=trace which I do not understand how to pass to java in command line, and if it's even available in JDK 8.\nI increased the XX:G1RSetRegionEntries a bit just in case.</p>\n\n<p>I hope it helps to the future G1GC tuner and if anyone else has more suggestions that would be great.</p>\n\n<p>What I still see is that [Processed Buffers] is still taking a very long time in young evacuations, and [Scan RS] is very long in mixed collections.\nNot sure why</p>\n"}],"owner":{"account_id":3301474,"reputation":2047,"user_id":2777540,"accept_rate":22,"display_name":"Michael P"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10907,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":2,"score":7,"last_activity_date":1638889238,"creation_date":1518497272,"question_id":48759638,"body_markdown":"I&#39;ve recently switched my Java application from CMS + ParNew to G1GC.\r\nWhat I observed when I did the switch is the CPU usage went higher and the GC count + pause time went up as well.\r\nMy JVM flags before the switched were \r\n\r\n     java -Xmx22467m -Xms22467m -XX:NewSize=11233m -XX:+UseConcMarkSweepGC -XX:AutoBoxCacheMax=1048576 -jar my-application.jar\r\n    \r\nAfter the switch my flags are:\r\n\r\n    java -Xmx22467m -Xms22467m -XX:+G1GC -XX:AutoBoxCacheMax=1048576 -XX:MaxGCPauseMillis=30 -jar my-application.jar\r\n\r\nI followed Oracle&#39;s Best Practices http://www.oracle.com/technetwork/tutorials/tutorials-1876574.html \r\n\r\n    Do not Set Young Generation Size\r\nAnd did not set the young generation size.\r\nHowever I am suspecting that the young generation size is the problem here.\r\nWhat I see is the heap usage is fluctuating between ~6 - 8 GB.\r\n[![Heap usage][1]][1]\r\n\r\n\r\nWhereas before, with CMS and Par New there the memory usage grew between 4-16 GB and only then I saw a GC:\r\n[![enter image description here][2]][2]\r\n\r\n\r\nI am not sure I understand why with G1GC the GC is so frequent. I am not sure what I&#39;m missing when it comes to GC tuning with G1GC.\r\n\r\nI&#39;m using Java 8 :\r\nava version &quot;1.8.0_144&quot;\r\nJava(TM) SE Runtime Environment (build 1.8.0_144-b01)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.144-b01, mixed mode)\r\n\r\nI appreciate your help.\r\n\r\n**UPDATE**:\r\nA bit more information about those pauses:\r\n[![enter image description here][3]][3]\r\nAs you can see all those pauses are G1New, and seemingly they are as long as my target pause time, which is 30ms. \r\nWhen I look at the ParNew pauses before the switch to G1GC, this is how it looked like:\r\n[![enter image description here][4]][4]\r\nSo they are also all young gen collections (ParNew) but they are less frequent and shorter, because they happen only when the heap usage gets to around 14GB (according to the graph)\r\n\r\nI am still clueless why the G1New happen so early (in terms of heap usage)\r\n\r\n**Update 2**\r\nI also noticed that NewRatio=2, I don&#39;t know if G1GC is respecting that, but that would mean that my New Gen is capped at 7GB. Could that be the reason?\r\n\r\n**Update 3**\r\nAdding G1GC GC logs:\r\nhttps://drive.google.com/file/d/1iWqZCbB-nU6k_0-AQdvb6vaBSYbkQcqn/view?usp=sharing\r\n\r\n  [1]: https://i.stack.imgur.com/2lnyx.png\r\n  [2]: https://i.stack.imgur.com/4NLfl.png\r\n  [3]: https://i.stack.imgur.com/oyiRo.png\r\n  [4]: https://i.stack.imgur.com/UpSV3.png\r\n\r\n","title":"G1GC very high GC count and CPU, very frequency GCs that kill performance","body":"<p>I've recently switched my Java application from CMS + ParNew to G1GC.\nWhat I observed when I did the switch is the CPU usage went higher and the GC count + pause time went up as well.\nMy JVM flags before the switched were</p>\n<pre><code> java -Xmx22467m -Xms22467m -XX:NewSize=11233m -XX:+UseConcMarkSweepGC -XX:AutoBoxCacheMax=1048576 -jar my-application.jar\n</code></pre>\n<p>After the switch my flags are:</p>\n<pre><code>java -Xmx22467m -Xms22467m -XX:+G1GC -XX:AutoBoxCacheMax=1048576 -XX:MaxGCPauseMillis=30 -jar my-application.jar\n</code></pre>\n<p>I followed Oracle's Best Practices <a href=\"http://www.oracle.com/technetwork/tutorials/tutorials-1876574.html\" rel=\"nofollow noreferrer\">http://www.oracle.com/technetwork/tutorials/tutorials-1876574.html</a></p>\n<pre><code>Do not Set Young Generation Size\n</code></pre>\n<p>And did not set the young generation size.\nHowever I am suspecting that the young generation size is the problem here.\nWhat I see is the heap usage is fluctuating between ~6 - 8 GB.\n<a href=\"https://i.stack.imgur.com/2lnyx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2lnyx.png\" alt=\"Heap usage\" /></a></p>\n<p>Whereas before, with CMS and Par New there the memory usage grew between 4-16 GB and only then I saw a GC:\n<a href=\"https://i.stack.imgur.com/4NLfl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4NLfl.png\" alt=\"enter image description here\" /></a></p>\n<p>I am not sure I understand why with G1GC the GC is so frequent. I am not sure what I'm missing when it comes to GC tuning with G1GC.</p>\n<p>I'm using Java 8 :\nava version &quot;1.8.0_144&quot;\nJava(TM) SE Runtime Environment (build 1.8.0_144-b01)\nJava HotSpot(TM) 64-Bit Server VM (build 25.144-b01, mixed mode)</p>\n<p>I appreciate your help.</p>\n<p><strong>UPDATE</strong>:\nA bit more information about those pauses:\n<a href=\"https://i.stack.imgur.com/oyiRo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oyiRo.png\" alt=\"enter image description here\" /></a>\nAs you can see all those pauses are G1New, and seemingly they are as long as my target pause time, which is 30ms.\nWhen I look at the ParNew pauses before the switch to G1GC, this is how it looked like:\n<a href=\"https://i.stack.imgur.com/UpSV3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UpSV3.png\" alt=\"enter image description here\" /></a>\nSo they are also all young gen collections (ParNew) but they are less frequent and shorter, because they happen only when the heap usage gets to around 14GB (according to the graph)</p>\n<p>I am still clueless why the G1New happen so early (in terms of heap usage)</p>\n<p><strong>Update 2</strong>\nI also noticed that NewRatio=2, I don't know if G1GC is respecting that, but that would mean that my New Gen is capped at 7GB. Could that be the reason?</p>\n<p><strong>Update 3</strong>\nAdding G1GC GC logs:\n<a href=\"https://drive.google.com/file/d/1iWqZCbB-nU6k_0-AQdvb6vaBSYbkQcqn/view?usp=sharing\" rel=\"nofollow noreferrer\">https://drive.google.com/file/d/1iWqZCbB-nU6k_0-AQdvb6vaBSYbkQcqn/view?usp=sharing</a></p>\n"},{"tags":["java","linked-list"],"comments":[{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":1,"creation_date":1638887315,"post_id":70261896,"comment_id":124203388,"body_markdown":"You can use Java streams and [`filter()`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#filter-java.util.function.Predicate-). Also, add the `Item` class to your question.","body":"You can use Java streams and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#filter-java.util.function.Predicate-\" rel=\"nofollow noreferrer\"><code>filter()</code></a>. Also, add the <code>Item</code> class to your question."},{"owner":{"account_id":23492502,"reputation":13,"user_id":17543363,"display_name":"user17543363"},"score":0,"creation_date":1638887864,"post_id":70261896,"comment_id":124203654,"body_markdown":"Thank you i&#39;ve added it","body":"Thank you i&#39;ve added it"},{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":0,"creation_date":1638887944,"post_id":70261896,"comment_id":124203682,"body_markdown":"Shouldn&#39;t `filterStorage()` return a `LinkedList&lt;Item&gt;`?","body":"Shouldn&#39;t <code>filterStorage()</code> return a <code>LinkedList&lt;Item&gt;</code>?"},{"owner":{"account_id":7132908,"reputation":189,"user_id":5453550,"display_name":"NLxDoDge"},"score":0,"creation_date":1638888337,"post_id":70261896,"comment_id":124203856,"body_markdown":"@user17543363 I tried to edit your code blocks, but someone else was already doing that. Could you next time add: `\\`\\`\\`java` on the line above your code and three more `\\`\\`\\`` on the end so it formats right for everyone :) thanks!","body":"@user17543363 I tried to edit your code blocks, but someone else was already doing that. Could you next time add: <code>```java</code> on the line above your code and three more <code>```</code> on the end so it formats right for everyone :) thanks!"},{"owner":{"account_id":23492502,"reputation":13,"user_id":17543363,"display_name":"user17543363"},"score":1,"creation_date":1638889076,"post_id":70261896,"comment_id":124204198,"body_markdown":"Sorry im pretty new to StackOverFlow i will try my best next time @NLxDoDge","body":"Sorry im pretty new to StackOverFlow i will try my best next time @NLxDoDge"},{"owner":{"account_id":23492502,"reputation":13,"user_id":17543363,"display_name":"user17543363"},"score":0,"creation_date":1638889088,"post_id":70261896,"comment_id":124204206,"body_markdown":"yes @JohnnyMopp i made a mistake there thank you for telling me.","body":"yes @JohnnyMopp i made a mistake there thank you for telling me."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1638895624,"post_id":70261896,"comment_id":124207048,"body_markdown":"You can try your best *this* time. Just click the *Edit* link to fix the formatting in your code in this Question.","body":"You can try your best <i>this</i> time. Just click the <i>Edit</i> link to fix the formatting in your code in this Question."}],"answers":[{"tags":[],"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1638889037,"creation_date":1638889037,"answer_id":70262359,"question_id":70261896,"body_markdown":"It looks like you can&#39;t use streams, so a simple `for` loop works. The signature of the `filterStorage` looks wrong so I have modified it.\r\n```\r\npublic LinkedList&lt;Item&gt; filterStorage(Allergen filter)\r\n{\r\n\tLinkedList&lt;Item&gt; newList = new LinkedList&lt;&gt;();\r\n\tfor (Item item1 : items) {\r\n\t\tif (item1.getAllergenes().contains(filter)) {\r\n\t\t\tnewList.add(item1);\r\n\t\t}\r\n\t}\r\n\treturn newList;\r\n}\r\n\r\n```","title":"How to filter a LinkedList with enums","body":"<p>It looks like you can't use streams, so a simple <code>for</code> loop works. The signature of the <code>filterStorage</code> looks wrong so I have modified it.</p>\n<pre><code>public LinkedList&lt;Item&gt; filterStorage(Allergen filter)\n{\n    LinkedList&lt;Item&gt; newList = new LinkedList&lt;&gt;();\n    for (Item item1 : items) {\n        if (item1.getAllergenes().contains(filter)) {\n            newList.add(item1);\n        }\n    }\n    return newList;\n}\n\n</code></pre>\n"}],"owner":{"account_id":23492502,"reputation":13,"user_id":17543363,"display_name":"user17543363"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":70262359,"answer_count":1,"score":-1,"last_activity_date":1638889037,"creation_date":1638887138,"question_id":70261896,"body_markdown":"how can i filter my items that my &quot;StorageManager&quot; has in his LinkedList called &quot;items&quot;list with the help of enums?\r\nItems that are affected by this filter need to get copied into a new LinkedList. Ive managed to add items into the storage managers List with buyNewItem() but need help with the second task.\r\n\r\nIf i forgot to add some important informations please let me know.\r\n\r\nEdit : The ONLY imports that re allowed are \r\n\r\nimport java.util.Arrays;    \r\nimport java.util.LinkedList;\r\n\r\n\r\nEdit 2 : I forgot the Item Class so here it is\r\n\r\npublic abstract class Item {\r\n\r\n\tprivate double price;\r\n\tprivate int ID;\r\n\tprivate LinkedList&lt;Allergen&gt; allergenes;\r\n\t\r\n\t\r\n\tpublic Item(double price,int ID) {\r\n\t\tsuper();\r\n\t\tthis.price = price;\r\n\t\tthis.ID = ID;\r\n\t\tthis.allergenes = new LinkedList&lt;Allergen&gt;();\r\n\t\t\r\n\t}\r\n\tpublic double getPrice() {\r\n\t\treturn price;\r\n\t}\r\n\tpublic void setPrice(double price) {\r\n\t\tthis.price = price;\r\n\t}\r\n\tpublic int getID() {\r\n\t\treturn ID;\r\n\t}\r\n\tpublic void setID(int iD) {\r\n\t\tID = iD;\r\n\t}\r\n\tpublic LinkedList&lt;Allergen&gt; getAllergenes() {\r\n\t\treturn allergenes;\r\n\t}\r\n\tpublic void setAllergenes(LinkedList&lt;Allergen&gt; allergenes) {\r\n\t\tthis.allergenes = allergenes;\r\n\t}\r\n\t\r\n}\r\n\r\n\r\n\r\nThanks in advance! :)\r\n\r\n```\r\npublic class StorageManager extends Employee {\r\n\tprivate LinkedList&lt;Item&gt;items;\r\n\t\t\r\n\t\r\n\tpublic LinkedList&lt;Item&gt; getItems() {\r\n\t\treturn items;\r\n\t}\r\n\r\n\tpublic void setItems(LinkedList&lt;Item&gt; items) {\r\n\t\tthis.items = items;\r\n\t}\r\n\t\r\n\tpublic boolean buyNewItem(Item item) {\r\n\t\tboolean IstDA = false;\r\n\t\tfor ( Item item1 : items) {\r\n\t\t\tif(item1.equals(item)) {\r\n\t\t\t\tthis.items.add(item);\r\n\t\t\t\tIstDA = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}if(IstDA == false) {\r\n\t\t\tSystem.out.println(&quot;Ist bereits im Warenkorb&quot;);\r\n\t\t}\r\n\t}\r\n\t\t\r\n\t\t\r\n\t\r\n\t\r\n\tpublic static LinkedList&lt;Allergen&gt; filterStorage(filter Allergen){\r\n\t\tif (this.items.contain(Allergen)){\r\n```\r\n\r\n\r\nmy enums list:\r\n\r\n\r\n\r\n\tNUTS,PEANUTS,SOYBEANS,GLUTEN,FISH,MILK,EGGS;\r\n\r\n\r\n\t","title":"How to filter a LinkedList with enums","body":"<p>how can i filter my items that my &quot;StorageManager&quot; has in his LinkedList called &quot;items&quot;list with the help of enums?\nItems that are affected by this filter need to get copied into a new LinkedList. Ive managed to add items into the storage managers List with buyNewItem() but need help with the second task.</p>\n<p>If i forgot to add some important informations please let me know.</p>\n<p>Edit : The ONLY imports that re allowed are</p>\n<p>import java.util.Arrays;<br />\nimport java.util.LinkedList;</p>\n<p>Edit 2 : I forgot the Item Class so here it is</p>\n<p>public abstract class Item {</p>\n<pre><code>private double price;\nprivate int ID;\nprivate LinkedList&lt;Allergen&gt; allergenes;\n\n\npublic Item(double price,int ID) {\n    super();\n    this.price = price;\n    this.ID = ID;\n    this.allergenes = new LinkedList&lt;Allergen&gt;();\n    \n}\npublic double getPrice() {\n    return price;\n}\npublic void setPrice(double price) {\n    this.price = price;\n}\npublic int getID() {\n    return ID;\n}\npublic void setID(int iD) {\n    ID = iD;\n}\npublic LinkedList&lt;Allergen&gt; getAllergenes() {\n    return allergenes;\n}\npublic void setAllergenes(LinkedList&lt;Allergen&gt; allergenes) {\n    this.allergenes = allergenes;\n}\n</code></pre>\n<p>}</p>\n<p>Thanks in advance! :)</p>\n<pre><code>public class StorageManager extends Employee {\n    private LinkedList&lt;Item&gt;items;\n        \n    \n    public LinkedList&lt;Item&gt; getItems() {\n        return items;\n    }\n\n    public void setItems(LinkedList&lt;Item&gt; items) {\n        this.items = items;\n    }\n    \n    public boolean buyNewItem(Item item) {\n        boolean IstDA = false;\n        for ( Item item1 : items) {\n            if(item1.equals(item)) {\n                this.items.add(item);\n                IstDA = true;\n                break;\n            }\n        }if(IstDA == false) {\n            System.out.println(&quot;Ist bereits im Warenkorb&quot;);\n        }\n    }\n        \n        \n    \n    \n    public static LinkedList&lt;Allergen&gt; filterStorage(filter Allergen){\n        if (this.items.contain(Allergen)){\n</code></pre>\n<p>my enums list:</p>\n<pre><code>NUTS,PEANUTS,SOYBEANS,GLUTEN,FISH,MILK,EGGS;\n</code></pre>\n"},{"tags":["java","bash","docker"],"comments":[{"owner":{"account_id":4912982,"reputation":14853,"user_id":3957754,"accept_rate":50,"display_name":"JRichardsz"},"score":1,"creation_date":1638889215,"post_id":70262306,"comment_id":124204261,"body_markdown":"Why `/bin/sh -c java` could cause problem? Is this a question regarding to some research or do you have errors on your container?","body":"Why <code>&#47;bin&#47;sh -c java</code> could cause problem? Is this a question regarding to some research or do you have errors on your container?"},{"owner":{"account_id":4385428,"reputation":1304,"user_id":3575763,"display_name":"Flame239"},"score":0,"creation_date":1638889525,"post_id":70262306,"comment_id":124204405,"body_markdown":"There are bunch of answers which say that signal shouldn&#39;t be propagated, but in my case it does. For example: https://stackoverflow.com/a/34446294/3575763","body":"There are bunch of answers which say that signal shouldn&#39;t be propagated, but in my case it does. For example: <a href=\"https://stackoverflow.com/a/34446294/3575763\">stackoverflow.com/a/34446294/3575763</a>"}],"owner":{"account_id":4385428,"reputation":1304,"user_id":3575763,"display_name":"Flame239"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":300,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1638888849,"creation_date":1638888849,"question_id":70262306,"body_markdown":"After reading a bunch of articles about bash not propagating SIGTERM to its children, I thought that having entrypoint of `/bin/sh -c java ...` will cause problems and SIGTERM won&#39;t be propagated to `java` process, but it actually does and shutdown hooks run. Contrary to that, if I run `/bin/sh -c sleep ...` then it wont be terminated with SIGTERM. \r\n\r\nNB: in both cases I see actual process being PID 1 (not bash)\r\n\r\nHow can this be explained?","title":"Docker /bin/sh propagates SIGTERM to java app when it shouldn&#39;t","body":"<p>After reading a bunch of articles about bash not propagating SIGTERM to its children, I thought that having entrypoint of <code>/bin/sh -c java ...</code> will cause problems and SIGTERM won't be propagated to <code>java</code> process, but it actually does and shutdown hooks run. Contrary to that, if I run <code>/bin/sh -c sleep ...</code> then it wont be terminated with SIGTERM.</p>\n<p>NB: in both cases I see actual process being PID 1 (not bash)</p>\n<p>How can this be explained?</p>\n"},{"tags":["java","arrays","exception"],"comments":[{"owner":{"account_id":2173538,"reputation":615,"user_id":1924829,"accept_rate":76,"display_name":"Sunny"},"score":0,"creation_date":1581650731,"post_id":60219471,"comment_id":106516385,"body_markdown":"int s = i + (int)(Math.random() * (noOfCards - 1));\nThis is where you are going wrong. when i is the last index of the array adding something to it would just make you break out of the array. If you want it to wrap around how about taking mod nr of cards? So do something like this:\nint s = (i + (int)(Math.random() * (noOfCards - 1))) %nrOfCards;\nBut rather than this I think it would help a lot more to search stack overflow for how to use Math.random to get an int in a range.","body":"int s = i + (int)(Math.random() * (noOfCards - 1)); This is where you are going wrong. when i is the last index of the array adding something to it would just make you break out of the array. If you want it to wrap around how about taking mod nr of cards? So do something like this: int s = (i + (int)(Math.random() * (noOfCards - 1))) %nrOfCards; But rather than this I think it would help a lot more to search stack overflow for how to use Math.random to get an int in a range."}],"answers":[{"tags":[],"owner":{"account_id":4563475,"reputation":27298,"user_id":3705127,"accept_rate":52,"display_name":"sprinter"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1581653592,"creation_date":1581650513,"answer_id":60219535,"question_id":60219471,"body_markdown":"Consider the lines:\r\n\r\n    for (int i = 0; i &lt; noOfCards; i++) {\r\n        int s = i + (int)(Math.random() * (noOfCards - 1));\r\n        Object temp = array[s]; //this is the first line it says has a problem\r\n\r\ni varies from 0 to noOfCards - 1\r\nYour random number expression varies from 0 to noOfCards - 2\r\nSo s varies from 0 to (2 * noOfCards) - 3\r\n\r\nThen `array[s]` will throw an exception whenever s &gt;= noOfCards\r\n\r\nIt doesn&#39;t happen every time you run it because sometimes the random numbers all happen to be under noOfCards\r\n\r\nIf you want to swap with a random other card then you could try:\r\n\r\n    Random random = new Random();\r\n    int s = (i + random.nextInt(noOfCards - 1)) % noOfCards;\r\n\r\nI realise you&#39;re using this as a learning opportunity, but in case you weren&#39;t aware, there is a `Collections.shuffle` method that can be used to shuffle collections such as `ArrayList` in one command.\r\n","title":"I keep getting the error &quot;Index 5 out of bounds for length 5&quot; but don&#39;t know what to change","body":"<p>Consider the lines:</p>\n\n<pre><code>for (int i = 0; i &lt; noOfCards; i++) {\n    int s = i + (int)(Math.random() * (noOfCards - 1));\n    Object temp = array[s]; //this is the first line it says has a problem\n</code></pre>\n\n<p>i varies from 0 to noOfCards - 1\nYour random number expression varies from 0 to noOfCards - 2\nSo s varies from 0 to (2 * noOfCards) - 3</p>\n\n<p>Then <code>array[s]</code> will throw an exception whenever s >= noOfCards</p>\n\n<p>It doesn't happen every time you run it because sometimes the random numbers all happen to be under noOfCards</p>\n\n<p>If you want to swap with a random other card then you could try:</p>\n\n<pre><code>Random random = new Random();\nint s = (i + random.nextInt(noOfCards - 1)) % noOfCards;\n</code></pre>\n\n<p>I realise you're using this as a learning opportunity, but in case you weren't aware, there is a <code>Collections.shuffle</code> method that can be used to shuffle collections such as <code>ArrayList</code> in one command.</p>\n"},{"tags":[],"owner":{"account_id":207717,"reputation":1,"user_id":3802981,"display_name":"Ch&#226;u Hồng Lĩnh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581650725,"creation_date":1581650725,"answer_id":60219562,"question_id":60219471,"body_markdown":"Here is the line that causes the trouble:\r\n\r\n    int s = i + (int)(Math.random() * (noOfCards - 1));\r\n\r\nWhenever the value s is &gt;= 5, the array[s] will point to something out of bound.\r\n\r\nFor example i can be 3, if Math.random() returns something like 0.5, then **3 + (int)(0.5 * 4)** is equal to **5**, which is out of bound (0..4)\r\n\r\nIt doesn&#39;t happen all the times, because some times the Math.random() generates small enough number, so the evaluation of s is smaller than 5.\r\n\r\nTo ensure that the value of s always in the range (0..4), you should modulo the result to 5.\r\n\r\nHere is how the line should be:\r\n\r\n    int s = (i + (int)(Math.random() * (noOfCards - 1))) % 5;","title":"I keep getting the error &quot;Index 5 out of bounds for length 5&quot; but don&#39;t know what to change","body":"<p>Here is the line that causes the trouble:</p>\n\n<pre><code>int s = i + (int)(Math.random() * (noOfCards - 1));\n</code></pre>\n\n<p>Whenever the value s is >= 5, the array[s] will point to something out of bound.</p>\n\n<p>For example i can be 3, if Math.random() returns something like 0.5, then <strong>3 + (int)(0.5 * 4)</strong> is equal to <strong>5</strong>, which is out of bound (0..4)</p>\n\n<p>It doesn't happen all the times, because some times the Math.random() generates small enough number, so the evaluation of s is smaller than 5.</p>\n\n<p>To ensure that the value of s always in the range (0..4), you should modulo the result to 5.</p>\n\n<p>Here is how the line should be:</p>\n\n<pre><code>int s = (i + (int)(Math.random() * (noOfCards - 1))) % 5;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17694958,"reputation":266,"user_id":12845944,"display_name":"Kevin Le"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1581650840,"creation_date":1581650840,"answer_id":60219576,"question_id":60219471,"body_markdown":"Max index of array with length N is (N-1). Code should be like this:\r\n\r\n    public static void shuffle(Object[] array) {\r\n    \tint noOfCards = array.length;\r\n    \tRandom random = new Random();\r\n    \tfor (int i = 0; i &lt; noOfCards; i++) {\r\n    \t\tint s = random.nextInt(noOfCards);\r\n    \r\n    \t\tObject temp = array[s];\r\n    \t\tarray[s] = array[i];\r\n    \t\tarray[i] = temp;\r\n    \t}\r\n    }\r\n\r\n","title":"I keep getting the error &quot;Index 5 out of bounds for length 5&quot; but don&#39;t know what to change","body":"<p>Max index of array with length N is (N-1). Code should be like this:</p>\n\n<pre><code>public static void shuffle(Object[] array) {\n    int noOfCards = array.length;\n    Random random = new Random();\n    for (int i = 0; i &lt; noOfCards; i++) {\n        int s = random.nextInt(noOfCards);\n\n        Object temp = array[s];\n        array[s] = array[i];\n        array[i] = temp;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16786079,"reputation":210,"user_id":12135033,"display_name":"Manish Sharma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581650884,"creation_date":1581650884,"answer_id":60219580,"question_id":60219471,"body_markdown":"change this line\r\n\r\n    int s = i + (int)(Math.random() * (noOfCards - 1));\r\nto this\r\n\r\n    int s =  (int)(Math.random() * (noOfCards - 1));\r\n\r\njust remove i variable from the above code","title":"I keep getting the error &quot;Index 5 out of bounds for length 5&quot; but don&#39;t know what to change","body":"<p>change this line</p>\n\n<pre><code>int s = i + (int)(Math.random() * (noOfCards - 1));\n</code></pre>\n\n<p>to this</p>\n\n<pre><code>int s =  (int)(Math.random() * (noOfCards - 1));\n</code></pre>\n\n<p>just remove i variable from the above code</p>\n"},{"tags":[],"owner":{"account_id":8405686,"reputation":764,"user_id":6309242,"display_name":"Dave The Dane"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582079763,"creation_date":1581652165,"answer_id":60219719,"question_id":60219471,"body_markdown":"You need to remember that indices are zero-based in Java.\r\n\r\nNote a couple of things:&lt;br&gt;\r\n- make things final if they&#39;re final&lt;br&gt;\r\n- use `SecureRandom`: it is more random than `Random`&lt;br&gt;\r\n- use the `nextInt(n)` method of SecureRandom to get an int in your range&lt;br&gt;\r\n- note the use of Streams to print out the result&lt;br&gt;\r\n\r\n\r\n    import java.security.SecureRandom;\r\n    import java.util.stream.Stream;\r\n    \r\n    public class Card {\r\n    \r\n    \tpublic static void shuffle(final Object[] array) {\r\n    \r\n    \t\tfinal SecureRandom random    = new SecureRandom();\r\n    \r\n    \t\tfinal int          noOfCards = array.length;\r\n    \r\n    \t\tfor (int i = 0; i &lt; noOfCards; i++) {\r\n    \r\n    \t\t\tfinal int    s    = random.nextInt(noOfCards);\r\n    \r\n    \t\t\tfinal Object temp = array[s];\r\n    \r\n    \t\t\tarray[s] = array[i];\r\n    \t\t\tarray[i] = temp;\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static void main(final String[] args) throws Exception {\r\n    \r\n    \t\tfinal String[] strOfCards = {&quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;D&quot;,&quot;E&quot;};\r\n    \r\n    \t\tCard.shuffle(strOfCards);\r\n    \r\n    \t\tStream.of(strOfCards).forEach(System.out::println);\r\n    \t}\r\n    }\r\n\r\nIf you fancy using a `List` it&#39;s a bit more compact:\r\n\r\n    import java.security.SecureRandom;\r\n    import java.util.*;\r\n    import java.util.stream.IntStream;\r\n    \r\n    public class Card {\r\n    \r\n    \tpublic static void main(final String[] args) throws Exception {\r\n    \r\n    \t\tfinal SecureRandom random = new SecureRandom();\r\n    \r\n    \t\tfinal List&lt;String&gt; cards  = Arrays.asList(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;);\r\n    \r\n    \t\tIntStream.range(0, cards.size()).forEach(i -&gt;\r\n    \t\t\tCollections.swap(cards, i, random.nextInt(cards.size()))\r\n    \t\t);\r\n    \t\tcards.forEach(System.out::println);\r\n    \t}\r\n    }\r\n\r\n","title":"I keep getting the error &quot;Index 5 out of bounds for length 5&quot; but don&#39;t know what to change","body":"<p>You need to remember that indices are zero-based in Java.</p>\n\n<p>Note a couple of things:<br>\n- make things final if they're final<br>\n- use <code>SecureRandom</code>: it is more random than <code>Random</code><br>\n- use the <code>nextInt(n)</code> method of SecureRandom to get an int in your range<br>\n- note the use of Streams to print out the result<br></p>\n\n<pre><code>import java.security.SecureRandom;\nimport java.util.stream.Stream;\n\npublic class Card {\n\n    public static void shuffle(final Object[] array) {\n\n        final SecureRandom random    = new SecureRandom();\n\n        final int          noOfCards = array.length;\n\n        for (int i = 0; i &lt; noOfCards; i++) {\n\n            final int    s    = random.nextInt(noOfCards);\n\n            final Object temp = array[s];\n\n            array[s] = array[i];\n            array[i] = temp;\n        }\n    }\n\n    public static void main(final String[] args) throws Exception {\n\n        final String[] strOfCards = {\"A\",\"B\",\"C\",\"D\",\"E\"};\n\n        Card.shuffle(strOfCards);\n\n        Stream.of(strOfCards).forEach(System.out::println);\n    }\n}\n</code></pre>\n\n<p>If you fancy using a <code>List</code> it's a bit more compact:</p>\n\n<pre><code>import java.security.SecureRandom;\nimport java.util.*;\nimport java.util.stream.IntStream;\n\npublic class Card {\n\n    public static void main(final String[] args) throws Exception {\n\n        final SecureRandom random = new SecureRandom();\n\n        final List&lt;String&gt; cards  = Arrays.asList(\"A\", \"B\", \"C\", \"D\", \"E\");\n\n        IntStream.range(0, cards.size()).forEach(i -&gt;\n            Collections.swap(cards, i, random.nextInt(cards.size()))\n        );\n        cards.forEach(System.out::println);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21609457,"reputation":113,"user_id":15936314,"display_name":"Shehzad Adeel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638888834,"creation_date":1638888834,"answer_id":70262304,"question_id":60219471,"body_markdown":"M getting the same issue with this code and still no idea how to solve it\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.FileReader;\r\n    import java.io.FileWriter;\r\n    import java.io.PrintWriter;\r\n    import java.io.IOException;\r\n    import java.util.List;\r\n    import java.util.ArrayList;\r\n    import javax.swing.JOptionPane;\r\n    \r\n    public class Main\r\n    {\r\n    \tpublic static void main (String[] args)\r\n    \t{\r\n    \t\twhile (true)\r\n    \t\t{\r\n    \t\t\tString number = JOptionPane.showInputDialog(&quot;Please Enter \\n&quot;\r\n    \t\t\t+ &quot;1 for &#39;Add new Employee&#39;&quot;\r\n    \t\t\t+ &quot;\\n 2 for &#39;Search in employee&#39;&quot;\r\n    \t\t\t+ &quot;\\n 3 for &#39;Exit&#39;&quot;);\r\n    \t\t\t\r\n    \t\t\tint convertnumber = Integer.parseInt(number);\r\n    \t\t\t\r\n    \t\t\tif (convertnumber == 1)\r\n    \t\t\t{\r\n    \t\t\t\taddEmployee();\r\n    \t\t\t}\r\n    \t\t\telse if (convertnumber == 2)\r\n    \t\t\t{\r\n    \t\t\t\tString eId = JOptionPane.showInputDialog(&quot;Enter ID to search&quot;);\r\n    \t\t\t\tsearchEmplye(eId);\r\n    \t\t\t}\r\n    \t\t\telse if (convertnumber == 3)\r\n    \t\t\t{\r\n    \t\t\t\tJOptionPane.showMessageDialog(null, &quot;Developed By: BC180401942 SHEHZAD ADEEL&quot;);\r\n    \t\t\t\tSystem.exit(0);\r\n    \t\t\t}\r\n    \t\t\telse\r\n    \t\t\t{\r\n    \t\t\t\tJOptionPane.showMessageDialog(null, &quot;Invalid input&quot;);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic static void searchEmplye(String eId)\r\n    \t{\r\n    \t\ttry\r\n    \t\t{\r\n    \t\t\tString tokens[] = null;\r\n    \t\t\tString id, name, dob, qual, expe, pays;\r\n    \t\t\tFileReader fr = new FileReader(&quot;empData.txt&quot;);\r\n    \t\t\tBufferedReader br = new BufferedReader(fr);\r\n    \t\t\t\r\n    \t\t\tString line = br.readLine();\r\n    \t\t\t\r\n    \t\t\tif (line == null)\r\n    \t\t\t{\r\n    \t\t\t\tJOptionPane.showMessageDialog(null, &quot;Employee Not found&quot;);\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\twhile (line != null)\r\n    \t\t\t{\r\n    \t\t\t\ttokens = line.split (&quot;,&quot;);\r\n    \t\t\t\tid = tokens[0];\r\n    \t\t\t\tname = tokens[1];\r\n    \t\t\t\tdob = tokens[2];\r\n    \t\t\t\tqual = tokens[3];\r\n    \t\t\t\texpe = tokens[4];\r\n    \t\t\t\tpays = tokens[5];\r\n    \t\t\t\t\r\n    \t\t\t\tEmployee emp = new Employee (id, name, dob, qual, expe, pays);\r\n    \t\t\t\t\r\n    \t\t\t\tArrayList list = new ArrayList();\r\n    \t\t\t\tlist.add(emp);\r\n    \t\t\t\tline = br.readLine();\r\n    \t\t\t\t\r\n    \t\t\t\t/*\r\n    \t\t\t\tfor (int i = 0; i &lt; list.size(); i++)\r\n    \t\t\t\t{\r\n    \t\t\t\t\tEmployee p = (Employee) list.get(i);\r\n    \t\t\t\t\tif (eId.equals(p.getEmpId()))\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\tJOptionPane.showMessageDialog(null, &quot;Employee: \\n&quot;\r\n    \t\t\t\t\t\t+ &quot;Employee ID: &quot; + p.getEmpId()\r\n    \t\t\t\t\t\t+ &quot; \\n Employee Name: &quot;  +p.getEmpName()\r\n    \t\t\t\t\t\t+ &quot; \\n Employee DOB: &quot; + p.getEmpDoB()\r\n    \t\t\t\t\t\t+ &quot; \\n Qualification: &quot; + p.getEmpQualf()\r\n    \t\t\t\t\t\t+ &quot; \\n Experience: &quot; + p.getEmpExp()\r\n    \t\t\t\t\t\t+ &quot; \\n Pay Scal: &quot; + p.getEmpPSacle()\r\n    \t\t\t\t\t\t);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\t*/\r\n    \t\t\t\tfor (int i = 0; i &lt; list.size(); i++)\r\n    \t\t\t\t{\r\n    \t\t\t\t\tEmployee p = (Employee) list.get(i);\r\n    \t\t\t\t\tif (eId.equals(p.getEmpId()))\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\tJOptionPane.showMessageDialog( null, &quot;Employee: \\n&quot; +\r\n    \t\t\t\t\t\t&quot;EmpId: &quot; + p.getEmpId() + &quot;\\n&quot; +\r\n    \t\t\t\t\t\t&quot;Name: &quot; + p.getEmpName() + &quot;\\n&quot; +\r\n    \t\t\t\t\t\t&quot;DoB: &quot; + p.getEmpDoB() + &quot;\\n&quot; +\r\n    \t\t\t\t\t\t&quot;Qualification: &quot; + p.getEmpQualf() + &quot;\\n&quot; +\r\n    \t\t\t\t\t\t&quot;Experience: &quot; + p.getEmpExp() + &quot;\\n&quot; +\r\n    \t\t\t\t\t\t&quot;PayScale: &quot; + p.getEmpPScale() );\r\n    \t\t\t\t\t}\t\r\n    \t\t\t\t\telse\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\tJOptionPane.showMessageDialog(null, &quot;Employee Not found&quot;);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\tbr.close();\r\n    \t\t\tfr.close();\r\n    \t\t}\r\n    \t\tcatch (Exception ex)\r\n    \t\t{\r\n    \t\t\tex.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic static void addEmployee()\r\n    \t{\r\n    \t\ttry\r\n    \t\t{\r\n    \t\t\tArrayList list = new ArrayList();\r\n    \t\t\tString id = JOptionPane.showInputDialog(&quot;Enter Employee ID: &quot;);\r\n    \t\t\tString name = JOptionPane.showInputDialog(&quot;Enter name: &quot;);\r\n    \t\t\tString dob = JOptionPane.showInputDialog(&quot;Enter DoB (year): &quot;);\r\n    \t\t\tString qual = JOptionPane.showInputDialog(&quot;Enter Qualification: &quot;);\r\n    \t\t\tString exp = JOptionPane.showInputDialog(&quot;Enter Employee experience (in months): &quot;);\r\n    \t\t\tString pays = JOptionPane.showInputDialog(&quot;Enter Employee Pay Scale (in number): &quot;);\r\n    \t\t\t\r\n    \t\t\tEmployee emp = new Employee (id, name, dob, qual, exp, pays);\r\n    \t\t\tlist.add(emp);\r\n    \t\t\t/*\r\n    \t\t\tArrayList list = new ArrayList();\r\n    \t\t\tString id = JOptionPane.showInputDialog(&quot;Enter ID &quot;);\r\n    \t\t\tString name = JOptionPane.showInputDialog(&quot;Enter Name &quot;);\r\n    \t\t\tString dob = JOptionPane.showInputDialog(&quot;Enter DOB &quot;);\r\n    \t\t\tString qualification = JOptionPane.showInputDialog(&quot;Enter qualification &quot;);\r\n    \t\t\tString experience = JOptionPane.showInputDialog(&quot;Enter Employee Experience&quot;);\r\n    \t\t\tString paScale = JOptionPane.showInputDialog(&quot;Enter Employee pay scale &quot;);\r\n    \t\t\t\r\n    \t\t\tEmployee emp = new Employee(id, name, qualification, experience, paScale);\r\n    \t\t\tlist.add(emp);\r\n    \t\t\t*/\r\n    \t\t\t\r\n    \t\t\tString line;\r\n    \t\t\tFileWriter fw = new FileWriter(&quot;empData.txt&quot;);\r\n    \t\t\tPrintWriter pw = new PrintWriter(fw);\r\n    \t\t\t\r\n    \t\t\tfor (int i = 0; i &lt; list.size(); i++)\r\n    \t\t\t{\r\n    \t\t\t\temp = (Employee) list.get(i);\r\n    \t\t\t\t//line = emp.getEmpId() + &quot;,&quot; + emp.getEmpName() + &quot;,&quot; + emp.getEmpDoB() + &quot;,&quot; + emp.getEmpQualf() + &quot;,&quot; + emp.getEmpExp() + &quot;,&quot; + emp.getEmpPSacle();\r\n    \t\t\t\t\r\n    \t\t\t\tline = emp.getEmpId() + &quot;,&quot; +\r\n    \t\t\t\temp.getEmpName() + &quot;,&quot; +\r\n    \t\t\t\temp.getEmpDoB() + &quot;,&quot; +\r\n    \t\t\t\temp.getEmpQualf() + &quot;,&quot; +\r\n    \t\t\t\temp.getEmpPScale();\r\n    \t\t\t\t\r\n    \t\t\t\tpw.println(line);\r\n    \t\t\t}\r\n    \t\t\tpw.flush();\r\n    \t\t\tpw.close();\r\n    \t\t\tfw.close();\r\n    \t\t}\r\n    \t\tcatch (IOException ioEx)\r\n    \t\t{\r\n    \t\t\tSystem.out.println(ioEx);\r\n    \t\t}\r\n    \t}\r\n    }","title":"I keep getting the error &quot;Index 5 out of bounds for length 5&quot; but don&#39;t know what to change","body":"<p>M getting the same issue with this code and still no idea how to solve it</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.FileReader;\nimport java.io.FileWriter;\nimport java.io.PrintWriter;\nimport java.io.IOException;\nimport java.util.List;\nimport java.util.ArrayList;\nimport javax.swing.JOptionPane;\n\npublic class Main\n{\n    public static void main (String[] args)\n    {\n        while (true)\n        {\n            String number = JOptionPane.showInputDialog(&quot;Please Enter \\n&quot;\n            + &quot;1 for 'Add new Employee'&quot;\n            + &quot;\\n 2 for 'Search in employee'&quot;\n            + &quot;\\n 3 for 'Exit'&quot;);\n            \n            int convertnumber = Integer.parseInt(number);\n            \n            if (convertnumber == 1)\n            {\n                addEmployee();\n            }\n            else if (convertnumber == 2)\n            {\n                String eId = JOptionPane.showInputDialog(&quot;Enter ID to search&quot;);\n                searchEmplye(eId);\n            }\n            else if (convertnumber == 3)\n            {\n                JOptionPane.showMessageDialog(null, &quot;Developed By: BC180401942 SHEHZAD ADEEL&quot;);\n                System.exit(0);\n            }\n            else\n            {\n                JOptionPane.showMessageDialog(null, &quot;Invalid input&quot;);\n            }\n        }\n    }\n    \n    public static void searchEmplye(String eId)\n    {\n        try\n        {\n            String tokens[] = null;\n            String id, name, dob, qual, expe, pays;\n            FileReader fr = new FileReader(&quot;empData.txt&quot;);\n            BufferedReader br = new BufferedReader(fr);\n            \n            String line = br.readLine();\n            \n            if (line == null)\n            {\n                JOptionPane.showMessageDialog(null, &quot;Employee Not found&quot;);\n            }\n            \n            while (line != null)\n            {\n                tokens = line.split (&quot;,&quot;);\n                id = tokens[0];\n                name = tokens[1];\n                dob = tokens[2];\n                qual = tokens[3];\n                expe = tokens[4];\n                pays = tokens[5];\n                \n                Employee emp = new Employee (id, name, dob, qual, expe, pays);\n                \n                ArrayList list = new ArrayList();\n                list.add(emp);\n                line = br.readLine();\n                \n                /*\n                for (int i = 0; i &lt; list.size(); i++)\n                {\n                    Employee p = (Employee) list.get(i);\n                    if (eId.equals(p.getEmpId()))\n                    {\n                        JOptionPane.showMessageDialog(null, &quot;Employee: \\n&quot;\n                        + &quot;Employee ID: &quot; + p.getEmpId()\n                        + &quot; \\n Employee Name: &quot;  +p.getEmpName()\n                        + &quot; \\n Employee DOB: &quot; + p.getEmpDoB()\n                        + &quot; \\n Qualification: &quot; + p.getEmpQualf()\n                        + &quot; \\n Experience: &quot; + p.getEmpExp()\n                        + &quot; \\n Pay Scal: &quot; + p.getEmpPSacle()\n                        );\n                    }\n                    */\n                for (int i = 0; i &lt; list.size(); i++)\n                {\n                    Employee p = (Employee) list.get(i);\n                    if (eId.equals(p.getEmpId()))\n                    {\n                        JOptionPane.showMessageDialog( null, &quot;Employee: \\n&quot; +\n                        &quot;EmpId: &quot; + p.getEmpId() + &quot;\\n&quot; +\n                        &quot;Name: &quot; + p.getEmpName() + &quot;\\n&quot; +\n                        &quot;DoB: &quot; + p.getEmpDoB() + &quot;\\n&quot; +\n                        &quot;Qualification: &quot; + p.getEmpQualf() + &quot;\\n&quot; +\n                        &quot;Experience: &quot; + p.getEmpExp() + &quot;\\n&quot; +\n                        &quot;PayScale: &quot; + p.getEmpPScale() );\n                    }   \n                    else\n                    {\n                        JOptionPane.showMessageDialog(null, &quot;Employee Not found&quot;);\n                    }\n                }\n            }\n            br.close();\n            fr.close();\n        }\n        catch (Exception ex)\n        {\n            ex.printStackTrace();\n        }\n    }\n    \n    public static void addEmployee()\n    {\n        try\n        {\n            ArrayList list = new ArrayList();\n            String id = JOptionPane.showInputDialog(&quot;Enter Employee ID: &quot;);\n            String name = JOptionPane.showInputDialog(&quot;Enter name: &quot;);\n            String dob = JOptionPane.showInputDialog(&quot;Enter DoB (year): &quot;);\n            String qual = JOptionPane.showInputDialog(&quot;Enter Qualification: &quot;);\n            String exp = JOptionPane.showInputDialog(&quot;Enter Employee experience (in months): &quot;);\n            String pays = JOptionPane.showInputDialog(&quot;Enter Employee Pay Scale (in number): &quot;);\n            \n            Employee emp = new Employee (id, name, dob, qual, exp, pays);\n            list.add(emp);\n            /*\n            ArrayList list = new ArrayList();\n            String id = JOptionPane.showInputDialog(&quot;Enter ID &quot;);\n            String name = JOptionPane.showInputDialog(&quot;Enter Name &quot;);\n            String dob = JOptionPane.showInputDialog(&quot;Enter DOB &quot;);\n            String qualification = JOptionPane.showInputDialog(&quot;Enter qualification &quot;);\n            String experience = JOptionPane.showInputDialog(&quot;Enter Employee Experience&quot;);\n            String paScale = JOptionPane.showInputDialog(&quot;Enter Employee pay scale &quot;);\n            \n            Employee emp = new Employee(id, name, qualification, experience, paScale);\n            list.add(emp);\n            */\n            \n            String line;\n            FileWriter fw = new FileWriter(&quot;empData.txt&quot;);\n            PrintWriter pw = new PrintWriter(fw);\n            \n            for (int i = 0; i &lt; list.size(); i++)\n            {\n                emp = (Employee) list.get(i);\n                //line = emp.getEmpId() + &quot;,&quot; + emp.getEmpName() + &quot;,&quot; + emp.getEmpDoB() + &quot;,&quot; + emp.getEmpQualf() + &quot;,&quot; + emp.getEmpExp() + &quot;,&quot; + emp.getEmpPSacle();\n                \n                line = emp.getEmpId() + &quot;,&quot; +\n                emp.getEmpName() + &quot;,&quot; +\n                emp.getEmpDoB() + &quot;,&quot; +\n                emp.getEmpQualf() + &quot;,&quot; +\n                emp.getEmpPScale();\n                \n                pw.println(line);\n            }\n            pw.flush();\n            pw.close();\n            fw.close();\n        }\n        catch (IOException ioEx)\n        {\n            System.out.println(ioEx);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17759644,"reputation":11,"user_id":12895891,"display_name":"tryingMyBest"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18974,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":6,"score":1,"last_activity_date":1638888834,"creation_date":1581649985,"question_id":60219471,"body_markdown":"I&#39;m pretty new to coding so please bear with me, I am just experimenting with ways to shuffle an array for eventual use in shuffling a deck of cards in a card game I am creating in Java. I know that index 5 is out of bounds for length 5 but what is puzzling to me is that the error doesn&#39;t ALWAYS pop up. Sometimes I try to run my code and it works just fine, other times I get the error even if I haven&#39;t changed anything between times that I run it.\r\n\r\n    public class Card{\r\n    \t\r\n    \tpublic static void shuffle(Object[] array) {\r\n    \t\t\r\n    \t\tint noOfCards = array.length;\r\n    \t\t\r\n    \t\tfor (int i = 0; i &lt; noOfCards; i++) {\r\n    \t\t\t\r\n    \t\t\tint s = i + (int)(Math.random() * (noOfCards - 1));\r\n    \t\t\t\r\n    \t\t\tObject temp = array[s]; //this is the first line it says has a problem\r\n    \t\t\tarray[s] = array[i];\r\n    \t\t\tarray[i] = temp;\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    \t\tString[] strOfCards = {&quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;D&quot;,&quot;E&quot;};\r\n    \t\t\r\n    \t\tCard.shuffle(strOfCards); //this is the second line that has a problem\r\n    \t\tfor(int i = 0; i &lt; strOfCards.length; i++) {\r\n    \t\t\tSystem.out.println(strOfCards[i] + &quot; &quot;);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nI have no idea how to change the flawed lines, any suggestions are welcome!\r\n*** i have tried changing the number of letters in the string but then the error changes with it i.e. &quot;Index 6 out of bounds for length 6&quot;","title":"I keep getting the error &quot;Index 5 out of bounds for length 5&quot; but don&#39;t know what to change","body":"<p>I'm pretty new to coding so please bear with me, I am just experimenting with ways to shuffle an array for eventual use in shuffling a deck of cards in a card game I am creating in Java. I know that index 5 is out of bounds for length 5 but what is puzzling to me is that the error doesn't ALWAYS pop up. Sometimes I try to run my code and it works just fine, other times I get the error even if I haven't changed anything between times that I run it.</p>\n\n<pre><code>public class Card{\n\n    public static void shuffle(Object[] array) {\n\n        int noOfCards = array.length;\n\n        for (int i = 0; i &lt; noOfCards; i++) {\n\n            int s = i + (int)(Math.random() * (noOfCards - 1));\n\n            Object temp = array[s]; //this is the first line it says has a problem\n            array[s] = array[i];\n            array[i] = temp;\n        }\n    }\n\n    public static void main(String[] args) {\n\n        String[] strOfCards = {\"A\",\"B\",\"C\",\"D\",\"E\"};\n\n        Card.shuffle(strOfCards); //this is the second line that has a problem\n        for(int i = 0; i &lt; strOfCards.length; i++) {\n            System.out.println(strOfCards[i] + \" \");\n        }\n    }\n}\n</code></pre>\n\n<p>I have no idea how to change the flawed lines, any suggestions are welcome!\n*** i have tried changing the number of letters in the string but then the error changes with it i.e. \"Index 6 out of bounds for length 6\"</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1481052965,"post_id":41003355,"comment_id":69215612,"body_markdown":"How is this configuration class supposed to get loaded? You didn&#39;t show your Spring Boot bootstrap.","body":"How is this configuration class supposed to get loaded? You didn&#39;t show your Spring Boot bootstrap."},{"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"score":1,"creation_date":1481053353,"post_id":41003355,"comment_id":69215804,"body_markdown":"Sorry, it is supposed to get loaded using `@SpringBootApplication`, i.e. using `@ComponentScan` and `@EnableAutoConfiguration`.","body":"Sorry, it is supposed to get loaded using <code>@SpringBootApplication</code>, i.e. using <code>@ComponentScan</code> and <code>@EnableAutoConfiguration</code>."},{"owner":{"account_id":8148968,"reputation":1793,"user_id":6136697,"display_name":"M. Rizzo"},"score":2,"creation_date":1481053822,"post_id":41003355,"comment_id":69216038,"body_markdown":"In both cases is the @Configuration class in the same package as your Springboot application class?","body":"In both cases is the @Configuration class in the same package as your Springboot application class?"}],"answers":[{"tags":[],"owner":{"account_id":2758415,"reputation":3933,"user_id":2375843,"accept_rate":80,"display_name":"Tom"},"down_vote_count":0,"up_vote_count":73,"is_accepted":true,"score":73,"last_activity_date":1638888714,"creation_date":1481053962,"answer_id":41003694,"question_id":41003355,"body_markdown":"The `@SpringBootApplication` annotation (or, more precisely the inferred `@ComponentScan` annotation) by default only scans the classpath next to and below the annotated class.\r\n\r\nSo, your configuration class must be placed next to or in a sub package of you Application class.","title":"Spring Boot: Configuration Class is simply ignored and not loaded","body":"<p>The <code>@SpringBootApplication</code> annotation (or, more precisely the inferred <code>@ComponentScan</code> annotation) by default only scans the classpath next to and below the annotated class.</p>\n<p>So, your configuration class must be placed next to or in a sub package of you Application class.</p>\n"}],"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41300,"favorite_count":0,"down_vote_count":0,"up_vote_count":31,"accepted_answer_id":41003694,"answer_count":1,"score":31,"last_activity_date":1638888714,"creation_date":1481052682,"question_id":41003355,"body_markdown":"I have the following `@Configuration` class on the classpath of a few of my `@SpringBootApplication`s:\r\n\r\n    @Configuration\r\n    @Import({MainConfig.class, RestConfig.class})\r\n    public class ApiConfig {\r\n    \r\n        @Bean\r\n        @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\r\n        public Client client() throws ExecutionException, InterruptedException {\r\n            return service.create(Client.class);\r\n        }\r\n    \r\n    }\r\n\r\nI have two services that use this config (with differently named `Client` classes).\r\n\r\nService 1 starts correctly and loads this config. I can see during start up that a bean of type `ApiConfig` was eagerly initialized.\r\n\r\nService 2 starts incorrectly: the above configuration class is simply ignored and not initialized.\r\n\r\nThe services are started in separate JVMs.\r\n\r\nTher services have nearly identical, very small `application.properties` files:\r\n\r\n    spring.application.name=xxx-api\r\n    server.port=0\r\n    eureka.name=xxx.api\r\n    # Only for reading properties from a central location\r\n    context.initializer.classes=com.package.contextClass\r\n\r\nI&#39;m not even sure what kind of additional information I could write into the question. I have been going through logs for a couple of hours now and see no discernible difference, simply that it plainly ignores my `@Configuration` class. \r\n\r\nHas anyone had this issue before?","title":"Spring Boot: Configuration Class is simply ignored and not loaded","body":"<p>I have the following <code>@Configuration</code> class on the classpath of a few of my <code>@SpringBootApplication</code>s:</p>\n\n<pre><code>@Configuration\n@Import({MainConfig.class, RestConfig.class})\npublic class ApiConfig {\n\n    @Bean\n    @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\n    public Client client() throws ExecutionException, InterruptedException {\n        return service.create(Client.class);\n    }\n\n}\n</code></pre>\n\n<p>I have two services that use this config (with differently named <code>Client</code> classes).</p>\n\n<p>Service 1 starts correctly and loads this config. I can see during start up that a bean of type <code>ApiConfig</code> was eagerly initialized.</p>\n\n<p>Service 2 starts incorrectly: the above configuration class is simply ignored and not initialized.</p>\n\n<p>The services are started in separate JVMs.</p>\n\n<p>Ther services have nearly identical, very small <code>application.properties</code> files:</p>\n\n<pre><code>spring.application.name=xxx-api\nserver.port=0\neureka.name=xxx.api\n# Only for reading properties from a central location\ncontext.initializer.classes=com.package.contextClass\n</code></pre>\n\n<p>I'm not even sure what kind of additional information I could write into the question. I have been going through logs for a couple of hours now and see no discernible difference, simply that it plainly ignores my <code>@Configuration</code> class. </p>\n\n<p>Has anyone had this issue before?</p>\n"},{"tags":["java"],"comments":[{"owner":{"display_name":"user6073886"},"score":3,"creation_date":1638885931,"post_id":70261570,"comment_id":124202753,"body_markdown":"What do you mean with &quot;whether or not it matches a character from an array&quot;? Your array is an array of integers and not characters. Are you trying to see if the String contains a number 0-9?","body":"What do you mean with &quot;whether or not it matches a character from an array&quot;? Your array is an array of integers and not characters. Are you trying to see if the String contains a number 0-9?"},{"owner":{"account_id":23552857,"reputation":83,"user_id":17595306,"display_name":"Shivang Gupta"},"score":0,"creation_date":1638886556,"post_id":70261570,"comment_id":124203067,"body_markdown":"What exactly is the array of characters you want to check, as @OHGODSPIDERS asked, it makes a difference if you just wanna check the presence of integers in your string or any other certain characters.","body":"What exactly is the array of characters you want to check, as @OHGODSPIDERS asked, it makes a difference if you just wanna check the presence of integers in your string or any other certain characters."},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1638886720,"post_id":70261570,"comment_id":124203124,"body_markdown":"Be aware that what you are trying to do is something that `Regular Expressions` has standardized","body":"Be aware that what you are trying to do is something that <code>Regular Expressions</code> has standardized"},{"owner":{"account_id":23552857,"reputation":83,"user_id":17595306,"display_name":"Shivang Gupta"},"score":0,"creation_date":1638886970,"post_id":70261570,"comment_id":124203234,"body_markdown":"@ControlAltDel, I think @ItchyPrune just wants to use some basic iteration and comparison operators instead of `regex`.","body":"@ControlAltDel, I think @ItchyPrune just wants to use some basic iteration and comparison operators instead of <code>regex</code>."},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":1,"creation_date":1638887498,"post_id":70261570,"comment_id":124203477,"body_markdown":"@ShivangGupta I agree with you. However I am a RegEx &quot;evangelist&quot; - I want the world to learn about the &quot;glory&quot; of what text search can be! Not that I expect that everyone in practical life will use them - I just want people to be aware.","body":"@ShivangGupta I agree with you. However I am a RegEx &quot;evangelist&quot; - I want the world to learn about the &quot;glory&quot; of what text search can be! Not that I expect that everyone in practical life will use them - I just want people to be aware."}],"answers":[{"tags":[],"owner":{"account_id":14962711,"reputation":68,"user_id":10801972,"display_name":"McWolke"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1638888688,"creation_date":1638888688,"answer_id":70262265,"question_id":70261570,"body_markdown":"there are several problems with your code here:\r\n\r\n- your ```numbers``` array is of type int, however you want to compare the characters. use char[] instead and use chars in your array instead of ints like this: ```&#39;0&#39;, &#39;1&#39;, ...``` \r\n- indexOf is not a existing method for arrays, instead use a for loop to iterate through all the entries of the array and compare them by hand\r\n- your function claims to return a String ```public String Registration``` but you want to return an int. change this to ```public int Registration```.\r\n- You have no return in your function. you have to use the keyword ```return``` in your function if your function should return something. \r\n\r\nA possible solution may look like this:\r\n\r\n    public static int Registration(String reg) {\r\n      char[] numbers = {&#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39; , &#39;8&#39;, &#39;9&#39;,}; // use a char array char[] and add numbers as chars to array.\r\n      if (reg.length() &gt;= 7) {\r\n        for (int i = 0; i &lt; reg.length(); i++) {\r\n          char character = reg.charAt(i);\r\n          for(char number : numbers)\r\n          {\r\n            if(number == character)\r\n            {\r\n              return i; // found a matching character, return the index of the matching character\r\n            }\r\n          }\r\n        }\r\n      }\r\n      // return -1 for the case that we find nothing.\r\n      return -1;\r\n    }\r\n\r\nplease try to understand what happens here and do not just copy and paste the solution.\r\n\r\nNote: the thing you wish to do can be easily implemented with RegEx, however, this may be too hard for you at your current stage. \r\n","title":"How to check if a character at a certian index matches an item within an array","body":"<p>there are several problems with your code here:</p>\n<ul>\n<li>your <code>numbers</code> array is of type int, however you want to compare the characters. use char[] instead and use chars in your array instead of ints like this: <code>'0', '1', ...</code></li>\n<li>indexOf is not a existing method for arrays, instead use a for loop to iterate through all the entries of the array and compare them by hand</li>\n<li>your function claims to return a String <code>public String Registration</code> but you want to return an int. change this to <code>public int Registration</code>.</li>\n<li>You have no return in your function. you have to use the keyword <code>return</code> in your function if your function should return something.</li>\n</ul>\n<p>A possible solution may look like this:</p>\n<pre><code>public static int Registration(String reg) {\n  char[] numbers = {'0', '1', '2', '3', '4', '5', '6', '7' , '8', '9',}; // use a char array char[] and add numbers as chars to array.\n  if (reg.length() &gt;= 7) {\n    for (int i = 0; i &lt; reg.length(); i++) {\n      char character = reg.charAt(i);\n      for(char number : numbers)\n      {\n        if(number == character)\n        {\n          return i; // found a matching character, return the index of the matching character\n        }\n      }\n    }\n  }\n  // return -1 for the case that we find nothing.\n  return -1;\n}\n</code></pre>\n<p>please try to understand what happens here and do not just copy and paste the solution.</p>\n<p>Note: the thing you wish to do can be easily implemented with RegEx, however, this may be too hard for you at your current stage.</p>\n"}],"owner":{"account_id":22053065,"reputation":33,"user_id":16317035,"display_name":"ItchyPrune"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70262265,"answer_count":1,"score":0,"last_activity_date":1638888688,"creation_date":1638885843,"question_id":70261570,"body_markdown":"I&#39;m trying to take a string as an input (around 5 - 7 characters), iterate through each character and check whether or not it matches a character from an array. For example:\r\n\r\n\r\n    static String Registration(String reg) {\r\n        int[] numbers = {0, 1, 2, 3, 4, 5, 6, 7 , 8, 9,};\r\n        if (reg.length() &gt;= 7) {\r\n            for (int i = 0; i &lt; reg.length(); i++) {\r\n                reg.indexOf(numbers[i]);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nThe above is clearly wrong. However, I hope it illustrates what I&#39;m trying to do. For example, if the string was &quot;H3llo&quot;, I would want to check each character in the string and see if it matches with any items in the array. If it does, I would like to store the index as an int.\r\n\r\nThis is probably not an efficient way of doing it, but it&#39;s the only way I can think of with my current level of learning.","title":"How to check if a character at a certian index matches an item within an array","body":"<p>I'm trying to take a string as an input (around 5 - 7 characters), iterate through each character and check whether or not it matches a character from an array. For example:</p>\n<pre><code>static String Registration(String reg) {\n    int[] numbers = {0, 1, 2, 3, 4, 5, 6, 7 , 8, 9,};\n    if (reg.length() &gt;= 7) {\n        for (int i = 0; i &lt; reg.length(); i++) {\n            reg.indexOf(numbers[i]);\n        }\n    }\n}\n</code></pre>\n<p>The above is clearly wrong. However, I hope it illustrates what I'm trying to do. For example, if the string was &quot;H3llo&quot;, I would want to check each character in the string and see if it matches with any items in the array. If it does, I would like to store the index as an int.</p>\n<p>This is probably not an efficient way of doing it, but it's the only way I can think of with my current level of learning.</p>\n"},{"tags":["java","ssl","jce","openjdk-11"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1633092235,"post_id":69405990,"comment_id":122674871,"body_markdown":"IIRC (but my TLS/SSL is a bit rusty, so I might be wrong), your API sends the entire certificate chain, so as that includes the intermediate certificate, Java can verify it. As an aside, the latest OpenJDK is 11.0.12, you might want to upgrade.","body":"IIRC (but my TLS/SSL is a bit rusty, so I might be wrong), your API sends the entire certificate chain, so as that includes the intermediate certificate, Java can verify it. As an aside, the latest OpenJDK is 11.0.12, you might want to upgrade."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1633092348,"post_id":69405990,"comment_id":122674917,"body_markdown":"I think what Mark is right: It&#39;s up to the server presenting the certificate to also provide necessary intermediate certificates. The best bet is to always send all known chains going to all known root certificates. This way if the client knows any of the root certificates, it&#39;s fine.","body":"I think what Mark is right: It&#39;s up to the server presenting the certificate to also provide necessary intermediate certificates. The best bet is to always send all known chains going to all known root certificates. This way if the client knows any of the root certificates, it&#39;s fine."},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1633199489,"post_id":69405990,"comment_id":122697995,"body_markdown":"To be exact, TLS (and SSL) specifications require the server to send the full chain except it may omit the root (and if the root _is_ sent that copy is not used, only the one in the client&#39;s truststore); you can use `keytool -printcert -sslserver host[:port]` to see exactly what your server sends. In addition certs from most public CAs for over a decade include the AIA (AuthorityInfoAccess) extension with a caIssuer field, which can be used to dynamically fetch intermediate cert(s); browsers often do this automatically, while Java/JCE doesn&#39;t by default but can be configured to.","body":"To be exact, TLS (and SSL) specifications require the server to send the full chain except it may omit the root (and if the root <i>is</i> sent that copy is not used, only the one in the client&#39;s truststore); you can use <code>keytool -printcert -sslserver host[:port]</code> to see exactly what your server sends. In addition certs from most public CAs for over a decade include the AIA (AuthorityInfoAccess) extension with a caIssuer field, which can be used to dynamically fetch intermediate cert(s); browsers often do this automatically, while Java/JCE doesn&#39;t by default but can be configured to."},{"owner":{"account_id":15648991,"reputation":53,"user_id":11290716,"display_name":"Damien Tacheron"},"score":0,"creation_date":1633331970,"post_id":69405990,"comment_id":122721410,"body_markdown":"Thanks a lot. Effectively, i wrote a little java program to see what certificates are sended by the server, and the intermediate cert is sended. I thought, but it was an error, that the jvm had to get the intermediate cert into the trusttore in order to read his public key and validate the site cert. It was a mistake.","body":"Thanks a lot. Effectively, i wrote a little java program to see what certificates are sended by the server, and the intermediate cert is sended. I thought, but it was an error, that the jvm had to get the intermediate cert into the trusttore in order to read his public key and validate the site cert. It was a mistake."}],"answers":[{"tags":[],"owner":{"account_id":15648991,"reputation":53,"user_id":11290716,"display_name":"Damien Tacheron"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1638888509,"creation_date":1638796706,"answer_id":70246162,"question_id":69405990,"body_markdown":"In order to validate the server certificate during the ssl handhshake phase, the http client needs the certificate which was used to sign the server certificate (the intermediate certificate), and the certificate which was used to sign the intermediate certificate (root certificate).\r\n\r\nAll these certificates constitute what is known as &quot;the chain of certification&quot;. There is usually one intermediate certificate, sometimes there is no intermediate certificate (server cert signed directly by the root certificate), or you could have many intermediate certificates.\r\n\r\nJCE/JSE needs all these certificates for validating the server identity. If one certificate is missing (generaly the root certificate), or perempted, or invalid, or under some circumstances due to network failures or bad server setup, java throws a SSLHandshakeException.\r\n\r\nJava looks for the root certificate in his trusted store (according to the JRE setup : there are defaults, they can be overrided by differents ways)\r\nThe server certificate is sended by the server.\r\n\r\nI thought that the intermediate certificate has to be present also in the java trusted store. This was a mistake. In fact, the intermediate certificate is sended by the server also.\r\n\r\ni hadn&#39;t a SSLHandhakeException while the intermediate certificate was not present in the java trust store, so i didn&#39;t understood. After speaking here, and writing some lines of java to read what is sended by the server, i understand now that the intermediate certificate is sended by the server.\r\n\r\nSo, you don&#39;t need to have the intermediate(s) certificate(s) in java trust store for the ssl handhsake to succeed.\r\n","title":"How is is possible that Java 11 validates a certificate whom intermediate certificate isn&#39;t avalaible in cacerts?","body":"<p>In order to validate the server certificate during the ssl handhshake phase, the http client needs the certificate which was used to sign the server certificate (the intermediate certificate), and the certificate which was used to sign the intermediate certificate (root certificate).</p>\n<p>All these certificates constitute what is known as &quot;the chain of certification&quot;. There is usually one intermediate certificate, sometimes there is no intermediate certificate (server cert signed directly by the root certificate), or you could have many intermediate certificates.</p>\n<p>JCE/JSE needs all these certificates for validating the server identity. If one certificate is missing (generaly the root certificate), or perempted, or invalid, or under some circumstances due to network failures or bad server setup, java throws a SSLHandshakeException.</p>\n<p>Java looks for the root certificate in his trusted store (according to the JRE setup : there are defaults, they can be overrided by differents ways)\nThe server certificate is sended by the server.</p>\n<p>I thought that the intermediate certificate has to be present also in the java trusted store. This was a mistake. In fact, the intermediate certificate is sended by the server also.</p>\n<p>i hadn't a SSLHandhakeException while the intermediate certificate was not present in the java trust store, so i didn't understood. After speaking here, and writing some lines of java to read what is sended by the server, i understand now that the intermediate certificate is sended by the server.</p>\n<p>So, you don't need to have the intermediate(s) certificate(s) in java trust store for the ssl handhsake to succeed.</p>\n"}],"owner":{"account_id":15648991,"reputation":53,"user_id":11290716,"display_name":"Damien Tacheron"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1450,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70246162,"answer_count":1,"score":0,"last_activity_date":1638888509,"creation_date":1633091781,"question_id":69405990,"body_markdown":"I don&#39;t have to fix something that doesn&#39;t work, but I try to understand why something works, because I think it should not work.\r\n\r\nI&#39;m using OpenJDK11 / Ubuntu 16.04. I make an HTTPS call. The SSL handshake succeeds.\r\n\r\nThe cert chain contains 3 certs: \r\n- API certificate of course. Issued by an intermediate CA (issuer = CN = DigiCert TLS RSA SHA256 2020 CA1,O = DigiCert Inc,C = US)\r\n- Intermediate CA certificate. Issued by a root CA (issuer = CN = DigiCert Global Root CA,OU = www.digicert.com,O = DigiCert Inc,C = US)\r\n- Root certificate \r\n\r\nThe second certificate is not available in the cacert keystore in use (default keystore under lib/security folder). This sounds quite normal as the cert was issued in April 2021, while the JRE was released on January 2021 (openjdk version &quot;11.0.10&quot; 2021-01-19)\r\n\r\nWhy can this handshake succeed? In my mind, as Java doesn&#39;t know the second certificate, it can not validate the API certificate.\r\n\r\n","title":"How is is possible that Java 11 validates a certificate whom intermediate certificate isn&#39;t avalaible in cacerts?","body":"<p>I don't have to fix something that doesn't work, but I try to understand why something works, because I think it should not work.</p>\n<p>I'm using OpenJDK11 / Ubuntu 16.04. I make an HTTPS call. The SSL handshake succeeds.</p>\n<p>The cert chain contains 3 certs:</p>\n<ul>\n<li>API certificate of course. Issued by an intermediate CA (issuer = CN = DigiCert TLS RSA SHA256 2020 CA1,O = DigiCert Inc,C = US)</li>\n<li>Intermediate CA certificate. Issued by a root CA (issuer = CN = DigiCert Global Root CA,OU = www.digicert.com,O = DigiCert Inc,C = US)</li>\n<li>Root certificate</li>\n</ul>\n<p>The second certificate is not available in the cacert keystore in use (default keystore under lib/security folder). This sounds quite normal as the cert was issued in April 2021, while the JRE was released on January 2021 (openjdk version &quot;11.0.10&quot; 2021-01-19)</p>\n<p>Why can this handshake succeed? In my mind, as Java doesn't know the second certificate, it can not validate the API certificate.</p>\n"},{"tags":["java","android","intellij-idea","xml-parsing","compiler-errors"],"answers":[{"tags":[],"owner":{"account_id":251441,"reputation":428,"user_id":528827,"accept_rate":25,"display_name":"ciaranodc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638888348,"creation_date":1638888348,"answer_id":70262179,"question_id":28096122,"body_markdown":"You will get `java.lang.RuntimeException: Stub!` if you try to use something from the Android platform jar (`android.jar`) outside of Android. You would need to build and run this as an Android application via a device or emulated device or else change your main() method to a JUnit test method like this and then run it:\r\n\r\n    @Test\r\n    public void myTest() throws IOException, XmlPullParserException {\r\n        File file = new File( &quot;testmap.tmx&quot; );\r\n        XmlPullParserFactory factory = XmlPullParserFactory.newInstance();\r\n        factory.setNamespaceAware(true);\r\n        XmlPullParser xpp = factory.newPullParser();\r\n        xpp.setInput( new FileReader( file ) );\r\n\r\n        TiledXMLParser parser = new TiledXMLParser( xpp );\r\n    }\r\n\r\n ","title":"Exception in thread &quot;main&quot; java.lang.RuntimeException: Stub XmlPullParserFactory","body":"<p>You will get <code>java.lang.RuntimeException: Stub!</code> if you try to use something from the Android platform jar (<code>android.jar</code>) outside of Android. You would need to build and run this as an Android application via a device or emulated device or else change your main() method to a JUnit test method like this and then run it:</p>\n<pre><code>@Test\npublic void myTest() throws IOException, XmlPullParserException {\n    File file = new File( &quot;testmap.tmx&quot; );\n    XmlPullParserFactory factory = XmlPullParserFactory.newInstance();\n    factory.setNamespaceAware(true);\n    XmlPullParser xpp = factory.newPullParser();\n    xpp.setInput( new FileReader( file ) );\n\n    TiledXMLParser parser = new TiledXMLParser( xpp );\n}\n</code></pre>\n"}],"owner":{"account_id":5447009,"reputation":53,"user_id":4333193,"display_name":"Olva"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":667,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1638888348,"creation_date":1421951295,"question_id":28096122,"body_markdown":"I want to run one of my java classes using Intellij Idea 14, and I am having trouble with trying to get rid of this compile-time error.\r\n\r\n    Exception in thread &quot;main&quot; java.lang.RuntimeException: Stub!\r\n    \tat org.xmlpull.v1.XmlPullParserFactory.newInstance(XmlPullParserFactory.java:13)\r\n\r\nAnd I am following this site: http://xmlpull.org/v1/download/unpacked/doc/quick_intro.html for guidance with xmlpullparser and xmlpullparserfactory.\r\n\r\nNow, I have downloaded one implementation of XMLPULL API V1, kxml2.jar, and I have added it to my classpath, correct me if I am wrong but this is what I did:\r\n\r\nProject Structure &gt; Modules &gt; Dependencies &gt; + &gt; Jars or Directories &gt; file location\r\n\r\nWhat else do I need to do?\r\n\r\nMain Method:\r\n\r\n    public static void main ( String[] args ) throws IOException, XmlPullParserException {\r\n        File file = new File( &quot;testmap.tmx&quot; );\r\n        XmlPullParserFactory factory = XmlPullParserFactory.newInstance();\r\n        factory.setNamespaceAware(true);\r\n        XmlPullParser xpp = factory.newPullParser();\r\n        xpp.setInput( new FileReader( file ) );\r\n\r\n        TiledXMLParser parser = new TiledXMLParser( xpp );\r\n    }","title":"Exception in thread &quot;main&quot; java.lang.RuntimeException: Stub XmlPullParserFactory","body":"<p>I want to run one of my java classes using Intellij Idea 14, and I am having trouble with trying to get rid of this compile-time error.</p>\n\n<pre><code>Exception in thread \"main\" java.lang.RuntimeException: Stub!\n    at org.xmlpull.v1.XmlPullParserFactory.newInstance(XmlPullParserFactory.java:13)\n</code></pre>\n\n<p>And I am following this site: <a href=\"http://xmlpull.org/v1/download/unpacked/doc/quick_intro.html\" rel=\"nofollow\">http://xmlpull.org/v1/download/unpacked/doc/quick_intro.html</a> for guidance with xmlpullparser and xmlpullparserfactory.</p>\n\n<p>Now, I have downloaded one implementation of XMLPULL API V1, kxml2.jar, and I have added it to my classpath, correct me if I am wrong but this is what I did:</p>\n\n<p>Project Structure > Modules > Dependencies > + > Jars or Directories > file location</p>\n\n<p>What else do I need to do?</p>\n\n<p>Main Method:</p>\n\n<pre><code>public static void main ( String[] args ) throws IOException, XmlPullParserException {\n    File file = new File( \"testmap.tmx\" );\n    XmlPullParserFactory factory = XmlPullParserFactory.newInstance();\n    factory.setNamespaceAware(true);\n    XmlPullParser xpp = factory.newPullParser();\n    xpp.setInput( new FileReader( file ) );\n\n    TiledXMLParser parser = new TiledXMLParser( xpp );\n}\n</code></pre>\n"},{"tags":["java","karate"],"comments":[{"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"score":0,"creation_date":1638888272,"post_id":70261212,"comment_id":124203829,"body_markdown":"I&#39;m going to pass on this question as I think it can be made simpler instead of just dumping your situation as-is. I suggest you search for other answers: https://stackoverflow.com/search?q=%5Bkarate%5D+schema","body":"I&#39;m going to pass on this question as I think it can be made simpler instead of just dumping your situation as-is. I suggest you search for other answers: <a href=\"https://stackoverflow.com/search?q=%5Bkarate%5D+schema\">stackoverflow.com/search?q=%5Bkarate%5D+schema</a>"}],"answers":[{"tags":[],"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1638888340,"creation_date":1638888340,"answer_id":70262176,"question_id":70261212,"body_markdown":"The only observation I have is if you cast to a string, you won&#39;t be able to do any matching.\r\n\r\nInstead of `* string jsonSchemaExpected` do `* def jsonSchemaExpected`.","title":"Complex schema validation in Karate","body":"<p>The only observation I have is if you cast to a string, you won't be able to do any matching.</p>\n<p>Instead of <code>* string jsonSchemaExpected</code> do <code>* def jsonSchemaExpected</code>.</p>\n"}],"owner":{"account_id":11355297,"reputation":13,"user_id":8325090,"display_name":"Rishabh anand"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":964,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70262176,"answer_count":1,"score":1,"last_activity_date":1638888340,"creation_date":1638884619,"question_id":70261212,"body_markdown":"I&#39;m trying to validate the response schema with karate but facing issue with array. \r\nAttaching the response and feature as well as my schema.json.\r\n\r\nResponse - \r\n\r\n    {\r\n    &quot;page&quot;: 1,\r\n    &quot;per_page&quot;: 6,\r\n    &quot;total&quot;: 12,\r\n    &quot;total_pages&quot;: 2,\r\n    &quot;data&quot;: [\r\n        \r\n        {\r\n            &quot;id&quot;: 3,\r\n            &quot;email&quot;: &quot;emma.wong@reqres.in&quot;,\r\n            &quot;first_name&quot;: &quot;Emma&quot;,\r\n            &quot;last_name&quot;: &quot;Wong&quot;,\r\n            &quot;avatar&quot;: &quot;https://reqres.in/img/faces/3-image.jpg&quot;\r\n        },\r\n        {\r\n            &quot;id&quot;: 4,\r\n            &quot;email&quot;: &quot;eve.holt@reqres.in&quot;,\r\n            &quot;first_name&quot;: &quot;Eve&quot;,\r\n            &quot;last_name&quot;: &quot;Holt&quot;,\r\n            &quot;avatar&quot;: &quot;https://reqres.in/img/faces/4-image.jpg&quot;\r\n        },\r\n        {\r\n            &quot;id&quot;: 5,\r\n            &quot;email&quot;: &quot;charles.morris@reqres.in&quot;,\r\n            &quot;first_name&quot;: &quot;Charles&quot;,\r\n            &quot;last_name&quot;: &quot;Morris&quot;,\r\n            &quot;avatar&quot;: &quot;https://reqres.in/img/faces/5-image.jpg&quot;\r\n        },\r\n        {\r\n            &quot;id&quot;: 6,\r\n            &quot;email&quot;: &quot;tracey.ramos@reqres.in&quot;,\r\n            &quot;first_name&quot;: &quot;Tracey&quot;,\r\n            &quot;last_name&quot;: &quot;Ramos&quot;,\r\n            &quot;avatar&quot;: &quot;https://reqres.in/img/faces/6-image.jpg&quot;\r\n        }\r\n    ],\r\n    &quot;support&quot;: {\r\n        &quot;url&quot;: &quot;https://reqres.in/#support-heading&quot;,\r\n        &quot;text&quot;: &quot;To keep ReqRes free, contributions towards server costs are appreciated!&quot;\r\n    }\r\n}\r\n\r\n     Scenario: Get all Users and validate schema\r\n        Given url getUrl\r\n        When method Get\r\n        Then status 200\r\n        And print response\r\n        Then match response == &#39;#object&#39;\r\n        * string jsonSchemaExpected = read(&#39;file:src/test/resources/features/sample/responseSchema.json&#39;)\r\n        And print response.data.length \r\n        And match response == jsonSchemaExpected\r\n\r\n\r\n**responseSchema.json**\r\n\r\n&gt; {\r\n    &quot;page&quot;: &quot;#number&quot;,\r\n    &quot;per_page&quot;: &quot;#number&quot;,\r\n    &quot;total&quot;: &quot;#number&quot;,\r\n    &quot;total_pages&quot;: &quot;#number&quot;,\r\n    &quot;data&quot;: &quot;#[] #object&quot;,\r\n    &quot;support&quot;: &quot;#object&quot;\r\n}","title":"Complex schema validation in Karate","body":"<p>I'm trying to validate the response schema with karate but facing issue with array.\nAttaching the response and feature as well as my schema.json.</p>\n<p>Response -</p>\n<pre><code>{\n&quot;page&quot;: 1,\n&quot;per_page&quot;: 6,\n&quot;total&quot;: 12,\n&quot;total_pages&quot;: 2,\n&quot;data&quot;: [\n    \n    {\n        &quot;id&quot;: 3,\n        &quot;email&quot;: &quot;emma.wong@reqres.in&quot;,\n        &quot;first_name&quot;: &quot;Emma&quot;,\n        &quot;last_name&quot;: &quot;Wong&quot;,\n        &quot;avatar&quot;: &quot;https://reqres.in/img/faces/3-image.jpg&quot;\n    },\n    {\n        &quot;id&quot;: 4,\n        &quot;email&quot;: &quot;eve.holt@reqres.in&quot;,\n        &quot;first_name&quot;: &quot;Eve&quot;,\n        &quot;last_name&quot;: &quot;Holt&quot;,\n        &quot;avatar&quot;: &quot;https://reqres.in/img/faces/4-image.jpg&quot;\n    },\n    {\n        &quot;id&quot;: 5,\n        &quot;email&quot;: &quot;charles.morris@reqres.in&quot;,\n        &quot;first_name&quot;: &quot;Charles&quot;,\n        &quot;last_name&quot;: &quot;Morris&quot;,\n        &quot;avatar&quot;: &quot;https://reqres.in/img/faces/5-image.jpg&quot;\n    },\n    {\n        &quot;id&quot;: 6,\n        &quot;email&quot;: &quot;tracey.ramos@reqres.in&quot;,\n        &quot;first_name&quot;: &quot;Tracey&quot;,\n        &quot;last_name&quot;: &quot;Ramos&quot;,\n        &quot;avatar&quot;: &quot;https://reqres.in/img/faces/6-image.jpg&quot;\n    }\n],\n&quot;support&quot;: {\n    &quot;url&quot;: &quot;https://reqres.in/#support-heading&quot;,\n    &quot;text&quot;: &quot;To keep ReqRes free, contributions towards server costs are appreciated!&quot;\n}\n</code></pre>\n<p>}</p>\n<pre><code> Scenario: Get all Users and validate schema\n    Given url getUrl\n    When method Get\n    Then status 200\n    And print response\n    Then match response == '#object'\n    * string jsonSchemaExpected = read('file:src/test/resources/features/sample/responseSchema.json')\n    And print response.data.length \n    And match response == jsonSchemaExpected\n</code></pre>\n<p><strong>responseSchema.json</strong></p>\n<blockquote>\n<p>{\n&quot;page&quot;: &quot;#number&quot;,\n&quot;per_page&quot;: &quot;#number&quot;,\n&quot;total&quot;: &quot;#number&quot;,\n&quot;total_pages&quot;: &quot;#number&quot;,\n&quot;data&quot;: &quot;#[] #object&quot;,\n&quot;support&quot;: &quot;#object&quot;\n}</p>\n</blockquote>\n"},{"tags":["java","textbox","apache-poi","jsoup","apache-poi-4"],"comments":[{"owner":{"account_id":1806796,"reputation":329,"user_id":1643748,"accept_rate":57,"display_name":"C&#225;ssio"},"score":1,"creation_date":1638890062,"post_id":70262149,"comment_id":124204647,"body_markdown":"This may be usefull (part of it) : https://dzone.com/articles/converting-html-to-richtextstring-for-apache-poi","body":"This may be usefull (part of it) : <a href=\"https://dzone.com/articles/converting-html-to-richtextstring-for-apache-poi\" rel=\"nofollow noreferrer\">dzone.com/articles/&hellip;</a>"},{"owner":{"account_id":12911780,"reputation":173,"user_id":9337249,"display_name":"Sam Si"},"score":0,"creation_date":1638893978,"post_id":70262149,"comment_id":124206350,"body_markdown":"@C&#225;ssio Thanks for that article. I will go through it.","body":"@C&#225;ssio Thanks for that article. I will go through it."}],"owner":{"account_id":12911780,"reputation":173,"user_id":9337249,"display_name":"Sam Si"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":625,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1638888202,"creation_date":1638888202,"question_id":70262149,"body_markdown":"Given a HTML as string like this.\r\n\r\n```html\r\n&lt;p&gt;&lt;strong&gt;This is a text Message.&lt;/strong&gt;&lt;/p&gt;\r\n&lt;ul&gt;\r\n    &lt;li&gt;UL 1&lt;/li&gt;\r\n    &lt;li&gt;&lt;strong&gt;UL&amp;nbsp;&lt;/strong&gt;2&lt;/li&gt;\r\n    &lt;li&gt;&lt;em&gt;UL 3&lt;/em&gt;&lt;/li&gt;\r\n&lt;/ul&gt;\r\n&lt;ol&gt;\r\n    &lt;li style=&quot;font-weight: bold;&quot;&gt;&lt;strong&gt;First statement&lt;/strong&gt;&lt;/li&gt;\r\n    &lt;li&gt;&lt;strong&gt;Second&amp;nbsp;&lt;/strong&gt;Statement&lt;/li&gt;\r\n    &lt;li&gt;Third &lt;strong&gt;Statement&lt;/strong&gt;&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;p&gt;This is another &lt;em&gt;text &lt;/em&gt;message.&lt;/p&gt;\r\n```\r\n\r\nI want to format this into an excel textbox. It will look like this.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4X3OF.png\r\n\r\nI tried writing some basic code to extract the right values.\r\nIt didn&#39;t work as expected.\r\n\r\nWhat the code does is the following.\r\n1. Get all the children elements from the HTML.\r\n2. Process them in order and extract the text from it.\r\n\r\nProblem comes due to the nested tags `strong` within `p` etc....\r\n\r\n```java\r\npublic void CreateHtmlToRichText() {\r\n//        This is a text Message.\r\n//\r\n//        UL 1\r\n//        UL 2\r\n//        UL 3\r\n//        First statement\r\n//        Second Statement\r\n//        Third Statement\r\n//\r\n//        This is another text message.\r\n\r\n        String htmlString = &quot;&lt;p&gt;&lt;strong&gt;This is a text Message.&lt;/strong&gt;&lt;/p&gt;\\n&quot; +\r\n                &quot;&lt;ul&gt;\\n&quot; +\r\n                &quot;    &lt;li&gt;UL 1&lt;/li&gt;\\n&quot; +\r\n                &quot;    &lt;li&gt;&lt;strong&gt;UL&amp;nbsp;&lt;/strong&gt;2&lt;/li&gt;\\n&quot; +\r\n                &quot;    &lt;li&gt;&lt;em&gt;UL 3&lt;/em&gt;&lt;/li&gt;\\n&quot; +\r\n                &quot;&lt;/ul&gt;\\n&quot; +\r\n                &quot;&lt;ol&gt;\\n&quot; +\r\n                &quot;    &lt;li style=\\&quot;font-weight: bold;\\&quot;&gt;&lt;strong&gt;First statement&lt;/strong&gt;&lt;/li&gt;\\n&quot; +\r\n                &quot;    &lt;li&gt;&lt;strong&gt;Second&amp;nbsp;&lt;/strong&gt;Statement&lt;/li&gt;\\n&quot; +\r\n                &quot;    &lt;li&gt;Third &lt;strong&gt;Statement&lt;/strong&gt;&lt;/li&gt;\\n&quot; +\r\n                &quot;&lt;/ol&gt;\\n&quot; +\r\n                &quot;&lt;p&gt;This is another &lt;em&gt;text &lt;/em&gt;message.&lt;/p&gt;&quot;;\r\n        System.out.println(htmlString);\r\n        Document document = Jsoup.parse(htmlString);\r\n        Elements elements = document.body().children().select(&quot;*&quot;);\r\n        System.out.println(&quot;****************************&quot;);\r\n        System.out.println(elements.size());\r\n        Map&lt;Integer, String&gt; paragraphMap = new HashMap&lt;&gt;();\r\n        Set&lt;String&gt; newLineSet = new HashSet&lt;&gt;();\r\n        newLineSet.add(&quot;p&quot;);\r\n        newLineSet.add(&quot;ol&quot;);\r\n        newLineSet.add(&quot;ul&quot;);\r\n        newLineSet.add(&quot;li&quot;);\r\n        newLineSet.add(&quot;br&quot;);\r\n\r\n        int lineNumber = 0;\r\n        for (Element element : elements) {\r\n            String ownText = element.ownText();\r\n            String tagName = element.tagName();\r\n\r\n            System.out.println(&quot;added &quot; + lineNumber + &quot;, &quot; + ownText);\r\n            if (newLineSet.contains(tagName)) {\r\n                lineNumber++;\r\n            }\r\n            paragraphMap.put(lineNumber, paragraphMap.getOrDefault(lineNumber, &quot;&quot;) + &quot; &quot; + ownText);\r\n\r\n            System.out.println(&quot;*********************&quot;);\r\n            System.out.println(element);\r\n            System.out.println(&quot;Tag : &quot; + tagName);\r\n            System.out.println(&quot;Own Text : &quot; + ownText);\r\n            System.out.println(&quot;*********************&quot;);\r\n        }\r\n\r\n        System.out.println(paragraphMap);\r\n\r\n        for (int line = 0; line &lt;= lineNumber; line++) {\r\n            if (paragraphMap.containsKey(line)) {\r\n                System.out.println(paragraphMap.get(line).strip());\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\nOutputs:\r\n\r\n```\r\nThis is a text Message.\r\n\r\nUL 1\r\n2 UL\r\nUL 3\r\n\r\nFirst statement\r\nStatement Second\r\nThird Statement\r\nThis is another message. text\r\n```","title":"HTML string to RichText in an excel textbox using apache POI","body":"<p>Given a HTML as string like this.</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;p&gt;&lt;strong&gt;This is a text Message.&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n    &lt;li&gt;UL 1&lt;/li&gt;\n    &lt;li&gt;&lt;strong&gt;UL&amp;nbsp;&lt;/strong&gt;2&lt;/li&gt;\n    &lt;li&gt;&lt;em&gt;UL 3&lt;/em&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol&gt;\n    &lt;li style=&quot;font-weight: bold;&quot;&gt;&lt;strong&gt;First statement&lt;/strong&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;strong&gt;Second&amp;nbsp;&lt;/strong&gt;Statement&lt;/li&gt;\n    &lt;li&gt;Third &lt;strong&gt;Statement&lt;/strong&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;This is another &lt;em&gt;text &lt;/em&gt;message.&lt;/p&gt;\n</code></pre>\n<p>I want to format this into an excel textbox. It will look like this.\n<a href=\"https://i.stack.imgur.com/4X3OF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4X3OF.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried writing some basic code to extract the right values.\nIt didn't work as expected.</p>\n<p>What the code does is the following.</p>\n<ol>\n<li>Get all the children elements from the HTML.</li>\n<li>Process them in order and extract the text from it.</li>\n</ol>\n<p>Problem comes due to the nested tags <code>strong</code> within <code>p</code> etc....</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void CreateHtmlToRichText() {\n//        This is a text Message.\n//\n//        UL 1\n//        UL 2\n//        UL 3\n//        First statement\n//        Second Statement\n//        Third Statement\n//\n//        This is another text message.\n\n        String htmlString = &quot;&lt;p&gt;&lt;strong&gt;This is a text Message.&lt;/strong&gt;&lt;/p&gt;\\n&quot; +\n                &quot;&lt;ul&gt;\\n&quot; +\n                &quot;    &lt;li&gt;UL 1&lt;/li&gt;\\n&quot; +\n                &quot;    &lt;li&gt;&lt;strong&gt;UL&amp;nbsp;&lt;/strong&gt;2&lt;/li&gt;\\n&quot; +\n                &quot;    &lt;li&gt;&lt;em&gt;UL 3&lt;/em&gt;&lt;/li&gt;\\n&quot; +\n                &quot;&lt;/ul&gt;\\n&quot; +\n                &quot;&lt;ol&gt;\\n&quot; +\n                &quot;    &lt;li style=\\&quot;font-weight: bold;\\&quot;&gt;&lt;strong&gt;First statement&lt;/strong&gt;&lt;/li&gt;\\n&quot; +\n                &quot;    &lt;li&gt;&lt;strong&gt;Second&amp;nbsp;&lt;/strong&gt;Statement&lt;/li&gt;\\n&quot; +\n                &quot;    &lt;li&gt;Third &lt;strong&gt;Statement&lt;/strong&gt;&lt;/li&gt;\\n&quot; +\n                &quot;&lt;/ol&gt;\\n&quot; +\n                &quot;&lt;p&gt;This is another &lt;em&gt;text &lt;/em&gt;message.&lt;/p&gt;&quot;;\n        System.out.println(htmlString);\n        Document document = Jsoup.parse(htmlString);\n        Elements elements = document.body().children().select(&quot;*&quot;);\n        System.out.println(&quot;****************************&quot;);\n        System.out.println(elements.size());\n        Map&lt;Integer, String&gt; paragraphMap = new HashMap&lt;&gt;();\n        Set&lt;String&gt; newLineSet = new HashSet&lt;&gt;();\n        newLineSet.add(&quot;p&quot;);\n        newLineSet.add(&quot;ol&quot;);\n        newLineSet.add(&quot;ul&quot;);\n        newLineSet.add(&quot;li&quot;);\n        newLineSet.add(&quot;br&quot;);\n\n        int lineNumber = 0;\n        for (Element element : elements) {\n            String ownText = element.ownText();\n            String tagName = element.tagName();\n\n            System.out.println(&quot;added &quot; + lineNumber + &quot;, &quot; + ownText);\n            if (newLineSet.contains(tagName)) {\n                lineNumber++;\n            }\n            paragraphMap.put(lineNumber, paragraphMap.getOrDefault(lineNumber, &quot;&quot;) + &quot; &quot; + ownText);\n\n            System.out.println(&quot;*********************&quot;);\n            System.out.println(element);\n            System.out.println(&quot;Tag : &quot; + tagName);\n            System.out.println(&quot;Own Text : &quot; + ownText);\n            System.out.println(&quot;*********************&quot;);\n        }\n\n        System.out.println(paragraphMap);\n\n        for (int line = 0; line &lt;= lineNumber; line++) {\n            if (paragraphMap.containsKey(line)) {\n                System.out.println(paragraphMap.get(line).strip());\n            }\n        }\n    }\n</code></pre>\n<p>Outputs:</p>\n<pre><code>This is a text Message.\n\nUL 1\n2 UL\nUL 3\n\nFirst statement\nStatement Second\nThird Statement\nThis is another message. text\n</code></pre>\n"},{"tags":["java","oracle","jpa","liquibase","identity"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1638455652,"post_id":70201017,"comment_id":124097146,"body_markdown":"How do you create the entity?","body":"How do you create the entity?"},{"owner":{"account_id":22647479,"reputation":11,"user_id":16822634,"display_name":"Sedef Bostancı"},"score":0,"creation_date":1638455977,"post_id":70201017,"comment_id":124097330,"body_markdown":"`IdentityDemo identityDemo=new IdentityDemo();\nidentityDemo.setDefinition(&quot;new test&quot;);  em.merge(identityDemo) ` like that em is EntityManager. Is that what you asked?","body":"<code>IdentityDemo identityDemo=new IdentityDemo(); identityDemo.setDefinition(&quot;new test&quot;);  em.merge(identityDemo) </code> like that em is EntityManager. Is that what you asked?"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1638456127,"post_id":70201017,"comment_id":124097412,"body_markdown":"As it is IDENTITY Hibernate shouldn&#39;t add the ID to the insert statement. How does the insert statement look like?","body":"As it is IDENTITY Hibernate shouldn&#39;t add the ID to the insert statement. How does the insert statement look like?"},{"owner":{"account_id":22647479,"reputation":11,"user_id":16822634,"display_name":"Sedef Bostancı"},"score":0,"creation_date":1638515334,"post_id":70201017,"comment_id":124113823,"body_markdown":"I&#39;ve added the hibernate log to the question","body":"I&#39;ve added the hibernate log to the question"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1638521391,"post_id":70201017,"comment_id":124115646,"body_markdown":"But this looks fine. Can you please post the whole stacktrace of the constraint violation?","body":"But this looks fine. Can you please post the whole stacktrace of the constraint violation?"},{"owner":{"account_id":22647479,"reputation":11,"user_id":16822634,"display_name":"Sedef Bostancı"},"score":0,"creation_date":1638528472,"post_id":70201017,"comment_id":124118179,"body_markdown":"Okey, I added it also I updated the question, the table definition part, because id should be primary key I forgot to add it. Sorry.","body":"Okey, I added it also I updated the question, the table definition part, because id should be primary key I forgot to add it. Sorry."},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1638538090,"post_id":70201017,"comment_id":124121771,"body_markdown":"The problem is that in the migration script you insert a value with an ID so oracle will NOT update the sequence! https://stackoverflow.com/questions/61682294/oracle-12c-insert-into-table-with-identity-column","body":"The problem is that in the migration script you insert a value with an ID so oracle will NOT update the sequence! <a href=\"https://stackoverflow.com/questions/61682294/oracle-12c-insert-into-table-with-identity-column\" title=\"oracle 12c insert into table with identity column\">stackoverflow.com/questions/61682294/&hellip;</a>"},{"owner":{"account_id":22647479,"reputation":11,"user_id":16822634,"display_name":"Sedef Bostancı"},"score":0,"creation_date":1638862503,"post_id":70201017,"comment_id":124193906,"body_markdown":"START WITH LIMIT VALUE approach on this page solved my issue. Thank you so much.","body":"START WITH LIMIT VALUE approach on this page solved my issue. Thank you so much."},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1638870861,"post_id":70201017,"comment_id":124196716,"body_markdown":"Great. So please add the comment as the answer","body":"Great. So please add the comment as the answer"}],"answers":[{"tags":[],"owner":{"account_id":22647479,"reputation":11,"user_id":16822634,"display_name":"Sedef Bostancı"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1638888077,"creation_date":1638887569,"answer_id":70262003,"question_id":70201017,"body_markdown":"After inserting a record by giving id with liquibase, altering table with the `ALTER TABLE identity_demo MODIFY id NUMBER(19,0) GENERATED BY DEFAULT AS IDENTITY (START WITH LIMIT VALUE)` command as mentioned on [this question][1] updates the sequence generator. So that inserting new records to the table with entity manager can be done without constraint error.\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/61682294/oracle-12c-insert-into-table-with-identity-column","title":"Oracle Identity issue using with Liquibase and JPA","body":"<p>After inserting a record by giving id with liquibase, altering table with the <code>ALTER TABLE identity_demo MODIFY id NUMBER(19,0) GENERATED BY DEFAULT AS IDENTITY (START WITH LIMIT VALUE)</code> command as mentioned on <a href=\"https://stackoverflow.com/questions/61682294/oracle-12c-insert-into-table-with-identity-column\">this question</a> updates the sequence generator. So that inserting new records to the table with entity manager can be done without constraint error.</p>\n"}],"owner":{"account_id":22647479,"reputation":11,"user_id":16822634,"display_name":"Sedef Bostancı"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":226,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70262003,"answer_count":1,"score":1,"last_activity_date":1638888077,"creation_date":1638454310,"question_id":70201017,"body_markdown":"I have a table like below created using liquibase in Oracle and I am inserting a row to this table by giving id as 1\r\n\r\n``` \r\n--liquibase formatted sql\r\n\r\n--changeset xxx:211202160323-1\r\nCREATE  TABLE identity_demo  (\r\n    id NUMBER(19,0) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,\r\n    description VARCHAR(100) not null\r\n);\r\n\r\n--changeset xxx:211202160323-2\r\nINSERT INTO identity_demo(id, description) VALUES(1,&#39;test&#39;);\r\n``` \r\nAnd I have following definition in JPA entity class\r\n\r\n```\r\n@Id\r\n@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n@Column(name = &quot;id&quot;)\r\nprivate Long id;\r\n\r\n@Column(name = &quot;description&quot;)\r\nprivate String description;\r\n```  \r\nAfter this changesets are executed, when I look at the table in Oracle, I see that this row has been added as follows\r\n\r\n|ID |DESCRIPTION |\r\n| -- | -- |\r\n| 1| test|\r\n\r\nAfter that, I want to add an another row using JPA entity manager, I am getting the error:\r\n\r\n*Caused by: javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not execute statement*\r\n\r\nbecause it&#39;s trying to insert the row with an id of 1 but the value with id 1 has already been added by liquibase changeset. My question is why id didn&#39;t continue from 2 when I added with JPA entity manager? How can I insert values to this table both by using the entity manager and sometimes by giving the id value manually with the liquibase script?\r\n\r\nMy liquibase version is 4.3.5 and Oracle version is 19c.\r\n\r\nHibernate log is:\r\n\r\n```09:55:08,843 INFO [stdout] (default task-2) */ insert\r\n09:55:08,843 INFO [stdout] (default task-2) into\r\n09:55:08,843 INFO [stdout] (default task-2) identity_demo\r\n09:55:08,843 INFO [stdout] (default task-2) (description)\r\n09:55:08,843 INFO [stdout] (default task-2) values\r\n09:55:08,843 INFO [stdout] (default task-2) (?)\r\n09:55:08,852 TRACE [org.hibernate.resource.jdbc.internal.ResourceRegistryStandardImpl] (default task-2) Registering statement [org.jboss.jca.adapters.jdbc.jdk8.WrappedPreparedStatementJDK8@5aad7866]\r\n09:55:08,852 TRACE [org.hibernate.persister.entity.AbstractEntityPersister] (default task-2) Dehydrating entity: [com.test.server.persistence.entity.IdentityDemo#&lt;null&gt;]\r\n09:55:08,852 TRACE [org.hibernate.type.descriptor.sql.BasicBinder] (default task-2) binding parameter [1] as [VARCHAR] - [new record test]\r\n```\r\nWhole stacktrace of error message:\r\n```\r\n3:32:14,457 ERROR [org.jboss.as.ejb3.invocation] (default task-2) WFLYEJB0034: EJB Invocation failed on component UserManagerBean for method public abstract void com.test.server.security.UserManagerRemote.updateIdentityDemo(com.test.server.persistence.entity.IdentityDemo): javax.ejb.EJBException: javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:266)\r\n\tat org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:388)\r\n\tat org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:158)\r\n\tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n\tat org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:509)\r\n\tat org.jboss.weld.module.ejb.AbstractEJBRequestScopeActivationInterceptor.aroundInvoke(AbstractEJBRequestScopeActivationInterceptor.java:81)\r\n\tat org.jboss.as.weld.ejb.EjbRequestScopeActivationInterceptor.processInvocation(EjbRequestScopeActivationInterceptor.java:89)\r\n\tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n\tat org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41)\r\n\tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n\tat org.jboss.as.ejb3.component.invocationmetrics.WaitTimeInterceptor.processInvocation(WaitTimeInterceptor.java:47)\r\n\tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n\tat org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:100)\r\n\tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n\tat org.jboss.as.ejb3.deployment.processors.StartupAwaitInterceptor.processInvocation(StartupAwaitInterceptor.java:22)\r\n\tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n\tat org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:64)\r\n\tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n\tat org.jboss.as.ejb3.deployment.processors.EjbSuspendInterceptor.processInvocation(EjbSuspendInterceptor.java:57)\r\n\tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n\tat org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:67)\r\n\tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n\tat org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50)\r\n\tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n\tat org.jboss.invocation.ContextClassLoaderInterceptor.processInvocation(ContextClassLoaderInterceptor.java:60)\r\n\tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n\tat org.jboss.invocation.InterceptorContext.run(InterceptorContext.java:438)\r\n\tat org.wildfly.security.manager.WildFlySecurityManager.doChecked(WildFlySecurityManager.java:628)\r\n\tat org.jboss.invocation.AccessCheckingInterceptor.processInvocation(AccessCheckingInterceptor.java:57)\r\n\tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n\tat org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:53)\r\n\tat org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:198)\r\n\tat org.wildfly.security.auth.server.SecurityIdentity.runAsFunctionEx(SecurityIdentity.java:421)\r\n\tat org.jboss.as.ejb3.remote.AssociationImpl.invokeWithIdentity(AssociationImpl.java:619)\r\n\tat org.jboss.as.ejb3.remote.AssociationImpl.invokeMethod(AssociationImpl.java:600)\r\n\tat org.jboss.as.ejb3.remote.AssociationImpl.lambda$receiveInvocationRequest$0(AssociationImpl.java:217)\r\n\tat org.jboss.as.ejb3.remote.AssociationImpl.execute(AssociationImpl.java:310)\r\n\tat org.jboss.as.ejb3.remote.AssociationImpl.receiveInvocationRequest(AssociationImpl.java:263)\r\n\tat org.jboss.ejb.protocol.remote.EJBServerChannel$ReceiverImpl.handleInvocationRequest(EJBServerChannel.java:473)\r\n\tat org.jboss.ejb.protocol.remote.EJBServerChannel$ReceiverImpl.handleMessage(EJBServerChannel.java:208)\r\n\tat org.jboss.remoting3.remote.RemoteConnectionChannel.lambda$handleMessageData$3(RemoteConnectionChannel.java:430)\r\n\tat org.jboss.remoting3.EndpointImpl$TrackingExecutor.lambda$execute$0(EndpointImpl.java:991)\r\n\tat org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n\tat org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\r\n\tat org.xnio.XnioWorker$WorkerThreadFactory$1$1.run(XnioWorker.java:1280)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:154)\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:181)\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:188)\r\n\tat org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:917)\r\n\tat org.hibernate.internal.SessionImpl.merge(SessionImpl.java:891)\r\n\tat org.jboss.as.jpa.container.AbstractEntityManager.merge(AbstractEntityManager.java:568)\r\n\tat com.test.server.persistence.service.IdentityDemoService.createOrUpdate(IdentityDemoService.java:16)\r\n\tat com.test.server.security.UserManagerBean.updateIdentityDemo(UserManagerBean.java:188)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.jboss.as.ee.component.ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptor.java:52)\r\n\tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n\tat org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:509)\r\n\tat org.jboss.as.weld.interceptors.Jsr299BindingsInterceptor.delegateInterception(Jsr299BindingsInterceptor.java:79)\r\n\tat org.jboss.as.weld.interceptors.Jsr299BindingsInterceptor.doMethodInterception(Jsr299BindingsInterceptor.java:89)\r\n\tat org.jboss.as.weld.interceptors.Jsr299BindingsInterceptor.processInvocation(Jsr299BindingsInterceptor.java:102)\r\n\tat org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:63)\r\n\tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n\tat org.jboss.as.ejb3.component.invocationmetrics.ExecutionTimeInterceptor.processInvocation(ExecutionTimeInterceptor.java:43)\r\n\tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n\tat org.jboss.as.jpa.interceptor.SBInvocationInterceptor.processInvocation(SBInvocationInterceptor.java:47)\r\n\tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n\tat org.jboss.as.ee.concurrent.ConcurrentContextInterceptor.processInvocation(ConcurrentContextInterceptor.java:45)\r\n\tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n\tat org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:40)\r\n\tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n\tat org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:53)\r\n\tat org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:52)\r\n\tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n\tat org.jboss.as.ejb3.component.pool.PooledInstanceInterceptor.processInvocation(PooledInstanceInterceptor.java:51)\r\n\tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n\tat org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:54)\r\n\tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n\tat org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:252)\r\n\t... 47 more\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:59)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:178)\r\n\tat org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)\r\n\tat org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:42)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3090)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3683)\r\n\tat org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:81)\r\n\tat org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645)\r\n\tat org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282)\r\n\tat org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)\r\n\tat org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317)\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:332)\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:289)\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:196)\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:127)\r\n\tat org.hibernate.event.internal.DefaultMergeEventListener.saveTransientEntity(DefaultMergeEventListener.java:287)\r\n\tat org.hibernate.event.internal.DefaultMergeEventListener.entityIsTransient(DefaultMergeEventListener.java:259)\r\n\tat org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:191)\r\n\tat org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:72)\r\n\tat org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:905)\r\n\t... 79 more\r\nCaused by: java.sql.SQLIntegrityConstraintViolationException: ORA-00001: unique constraint (DSA.SYS_C0030335) violated\r\n\r\n\tat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:450)\r\n\tat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:399)\r\n\tat oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1059)\r\n\tat oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:522)\r\n\tat oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:257)\r\n\tat oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:587)\r\n\tat oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:225)\r\n\tat oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:53)\r\n\tat oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:943)\r\n\tat oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1151)\r\n\tat oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:4798)\r\n\tat oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:4877)\r\n\tat oracle.jdbc.driver.OraclePreparedStatementWrapper.executeUpdate(OraclePreparedStatementWrapper.java:1361)\r\n\tat org.jboss.jca.adapters.jdbc.WrappedPreparedStatement.executeUpdate(WrappedPreparedStatement.java:537)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:175)\r\n\r\n```\r\nThanks\r\n","title":"Oracle Identity issue using with Liquibase and JPA","body":"<p>I have a table like below created using liquibase in Oracle and I am inserting a row to this table by giving id as 1</p>\n<pre><code>--liquibase formatted sql\n\n--changeset xxx:211202160323-1\nCREATE  TABLE identity_demo  (\n    id NUMBER(19,0) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,\n    description VARCHAR(100) not null\n);\n\n--changeset xxx:211202160323-2\nINSERT INTO identity_demo(id, description) VALUES(1,'test');\n</code></pre>\n<p>And I have following definition in JPA entity class</p>\n<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\n@Column(name = &quot;id&quot;)\nprivate Long id;\n\n@Column(name = &quot;description&quot;)\nprivate String description;\n</code></pre>\n<p>After this changesets are executed, when I look at the table in Oracle, I see that this row has been added as follows</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>ID</th>\n<th>DESCRIPTION</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>test</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>After that, I want to add an another row using JPA entity manager, I am getting the error:</p>\n<p><em>Caused by: javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not execute statement</em></p>\n<p>because it's trying to insert the row with an id of 1 but the value with id 1 has already been added by liquibase changeset. My question is why id didn't continue from 2 when I added with JPA entity manager? How can I insert values to this table both by using the entity manager and sometimes by giving the id value manually with the liquibase script?</p>\n<p>My liquibase version is 4.3.5 and Oracle version is 19c.</p>\n<p>Hibernate log is:</p>\n<pre><code>09:55:08,843 INFO [stdout] (default task-2) into\n09:55:08,843 INFO [stdout] (default task-2) identity_demo\n09:55:08,843 INFO [stdout] (default task-2) (description)\n09:55:08,843 INFO [stdout] (default task-2) values\n09:55:08,843 INFO [stdout] (default task-2) (?)\n09:55:08,852 TRACE [org.hibernate.resource.jdbc.internal.ResourceRegistryStandardImpl] (default task-2) Registering statement [org.jboss.jca.adapters.jdbc.jdk8.WrappedPreparedStatementJDK8@5aad7866]\n09:55:08,852 TRACE [org.hibernate.persister.entity.AbstractEntityPersister] (default task-2) Dehydrating entity: [com.test.server.persistence.entity.IdentityDemo#&lt;null&gt;]\n09:55:08,852 TRACE [org.hibernate.type.descriptor.sql.BasicBinder] (default task-2) binding parameter [1] as [VARCHAR] - [new record test]\n</code></pre>\n<p>Whole stacktrace of error message:</p>\n<pre><code>3:32:14,457 ERROR [org.jboss.as.ejb3.invocation] (default task-2) WFLYEJB0034: EJB Invocation failed on component UserManagerBean for method public abstract void com.test.server.security.UserManagerRemote.updateIdentityDemo(com.test.server.persistence.entity.IdentityDemo): javax.ejb.EJBException: javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not execute statement\n    at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:266)\n    at org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:388)\n    at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:158)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:509)\n    at org.jboss.weld.module.ejb.AbstractEJBRequestScopeActivationInterceptor.aroundInvoke(AbstractEJBRequestScopeActivationInterceptor.java:81)\n    at org.jboss.as.weld.ejb.EjbRequestScopeActivationInterceptor.processInvocation(EjbRequestScopeActivationInterceptor.java:89)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ejb3.component.invocationmetrics.WaitTimeInterceptor.processInvocation(WaitTimeInterceptor.java:47)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:100)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ejb3.deployment.processors.StartupAwaitInterceptor.processInvocation(StartupAwaitInterceptor.java:22)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:64)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ejb3.deployment.processors.EjbSuspendInterceptor.processInvocation(EjbSuspendInterceptor.java:57)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:67)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.invocation.ContextClassLoaderInterceptor.processInvocation(ContextClassLoaderInterceptor.java:60)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.invocation.InterceptorContext.run(InterceptorContext.java:438)\n    at org.wildfly.security.manager.WildFlySecurityManager.doChecked(WildFlySecurityManager.java:628)\n    at org.jboss.invocation.AccessCheckingInterceptor.processInvocation(AccessCheckingInterceptor.java:57)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:53)\n    at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:198)\n    at org.wildfly.security.auth.server.SecurityIdentity.runAsFunctionEx(SecurityIdentity.java:421)\n    at org.jboss.as.ejb3.remote.AssociationImpl.invokeWithIdentity(AssociationImpl.java:619)\n    at org.jboss.as.ejb3.remote.AssociationImpl.invokeMethod(AssociationImpl.java:600)\n    at org.jboss.as.ejb3.remote.AssociationImpl.lambda$receiveInvocationRequest$0(AssociationImpl.java:217)\n    at org.jboss.as.ejb3.remote.AssociationImpl.execute(AssociationImpl.java:310)\n    at org.jboss.as.ejb3.remote.AssociationImpl.receiveInvocationRequest(AssociationImpl.java:263)\n    at org.jboss.ejb.protocol.remote.EJBServerChannel$ReceiverImpl.handleInvocationRequest(EJBServerChannel.java:473)\n    at org.jboss.ejb.protocol.remote.EJBServerChannel$ReceiverImpl.handleMessage(EJBServerChannel.java:208)\n    at org.jboss.remoting3.remote.RemoteConnectionChannel.lambda$handleMessageData$3(RemoteConnectionChannel.java:430)\n    at org.jboss.remoting3.EndpointImpl$TrackingExecutor.lambda$execute$0(EndpointImpl.java:991)\n    at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n    at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\n    at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\n    at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\n    at org.xnio.XnioWorker$WorkerThreadFactory$1$1.run(XnioWorker.java:1280)\n    at java.lang.Thread.run(Thread.java:748)\nCaused by: javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not execute statement\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:154)\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:181)\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:188)\n    at org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:917)\n    at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:891)\n    at org.jboss.as.jpa.container.AbstractEntityManager.merge(AbstractEntityManager.java:568)\n    at com.test.server.persistence.service.IdentityDemoService.createOrUpdate(IdentityDemoService.java:16)\n    at com.test.server.security.UserManagerBean.updateIdentityDemo(UserManagerBean.java:188)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.jboss.as.ee.component.ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptor.java:52)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:509)\n    at org.jboss.as.weld.interceptors.Jsr299BindingsInterceptor.delegateInterception(Jsr299BindingsInterceptor.java:79)\n    at org.jboss.as.weld.interceptors.Jsr299BindingsInterceptor.doMethodInterception(Jsr299BindingsInterceptor.java:89)\n    at org.jboss.as.weld.interceptors.Jsr299BindingsInterceptor.processInvocation(Jsr299BindingsInterceptor.java:102)\n    at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:63)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ejb3.component.invocationmetrics.ExecutionTimeInterceptor.processInvocation(ExecutionTimeInterceptor.java:43)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.jpa.interceptor.SBInvocationInterceptor.processInvocation(SBInvocationInterceptor.java:47)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ee.concurrent.ConcurrentContextInterceptor.processInvocation(ConcurrentContextInterceptor.java:45)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:40)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:53)\n    at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:52)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ejb3.component.pool.PooledInstanceInterceptor.processInvocation(PooledInstanceInterceptor.java:51)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:54)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:252)\n    ... 47 more\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\n    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:59)\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:178)\n    at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)\n    at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:42)\n    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3090)\n    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3683)\n    at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:81)\n    at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645)\n    at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282)\n    at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)\n    at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317)\n    at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:332)\n    at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:289)\n    at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:196)\n    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:127)\n    at org.hibernate.event.internal.DefaultMergeEventListener.saveTransientEntity(DefaultMergeEventListener.java:287)\n    at org.hibernate.event.internal.DefaultMergeEventListener.entityIsTransient(DefaultMergeEventListener.java:259)\n    at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:191)\n    at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:72)\n    at org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:905)\n    ... 79 more\nCaused by: java.sql.SQLIntegrityConstraintViolationException: ORA-00001: unique constraint (DSA.SYS_C0030335) violated\n\n    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:450)\n    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:399)\n    at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1059)\n    at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:522)\n    at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:257)\n    at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:587)\n    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:225)\n    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:53)\n    at oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:943)\n    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1151)\n    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:4798)\n    at oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:4877)\n    at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeUpdate(OraclePreparedStatementWrapper.java:1361)\n    at org.jboss.jca.adapters.jdbc.WrappedPreparedStatement.executeUpdate(WrappedPreparedStatement.java:537)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:175)\n\n</code></pre>\n<p>Thanks</p>\n"},{"tags":["java","jboss7.x"],"comments":[{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1638998824,"post_id":70261977,"comment_id":124239370,"body_markdown":"That doesn&#39;t look quite right to me. You shouldn&#39;t create a new `ExecutorService` within a callable.","body":"That doesn&#39;t look quite right to me. You shouldn&#39;t create a new <code>ExecutorService</code> within a callable."},{"owner":{"account_id":20036898,"reputation":11,"user_id":14688410,"display_name":"Spk"},"score":0,"creation_date":1639030449,"post_id":70261977,"comment_id":124245386,"body_markdown":"ExecutorService is outside callable. Question is \n\nI am using below Executor service which is using newFixedTreadPool of size 2. I want instead of JVM, App server jboss to manage thread so plan on replacing ExecutorService to ManagedExecutorService. Question was is my understanding right here and if so can I pass newFixedThreadPool to managedExecutorService or just leave it to be managed by container. What is best and recommended Production-ready solution","body":"ExecutorService is outside callable. Question is   I am using below Executor service which is using newFixedTreadPool of size 2. I want instead of JVM, App server jboss to manage thread so plan on replacing ExecutorService to ManagedExecutorService. Question was is my understanding right here and if so can I pass newFixedThreadPool to managedExecutorService or just leave it to be managed by container. What is best and recommended Production-ready solution"},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1639077373,"post_id":70261977,"comment_id":124263096,"body_markdown":"Oh I see. The format just looked odd :) Anyway it&#39;s always a better idea to use the `MangaedExecutorService` which can be injected in managed beans. The context will be setup correctly for the threads. If you use your own `ExecutorService` you need to setup the context for the thread itself.","body":"Oh I see. The format just looked odd :) Anyway it&#39;s always a better idea to use the <code>MangaedExecutorService</code> which can be injected in managed beans. The context will be setup correctly for the threads. If you use your own <code>ExecutorService</code> you need to setup the context for the thread itself."}],"owner":{"account_id":20036898,"reputation":11,"user_id":14688410,"display_name":"Spk"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1638888003,"creation_date":1638887469,"question_id":70261977,"body_markdown":"I am using below Executor service which is using newFixedTreadPool of size 2.\r\nI want instead of JVM, App server jboss to manage thread so plan on replacing ExecutorService to ManagedExecutorService. Question was is my understanding right here and if so can I pass newFixedThreadPool to managedExecutorService or just leave it to be managed by container. What is best and recommended Production-ready solution\r\n\r\n```\r\nCallable callableObj = () -&gt; { \r\n  Map&lt;String, String&gt; dsTokenMap = //some function call; return dsTokenMap; }; \r\nExecutorService service = Executors.newFixedThreadPool( 2 ); \r\nFuture future = service.submit( callableObj );\r\n\r\ntry { \r\n  Map result = future.get(500,TimeUnit.MILLISECONDS); \r\n  logDebug( &quot;result from Async call is :::&quot;+result ); } \r\ncatch ( Exception ex ) {\r\n}\r\n\r\n```","title":"Managed Executor Service replacing Executor Service to use Container threads( jboss app server) instead of JVM","body":"<p>I am using below Executor service which is using newFixedTreadPool of size 2.\nI want instead of JVM, App server jboss to manage thread so plan on replacing ExecutorService to ManagedExecutorService. Question was is my understanding right here and if so can I pass newFixedThreadPool to managedExecutorService or just leave it to be managed by container. What is best and recommended Production-ready solution</p>\n<pre><code>Callable callableObj = () -&gt; { \n  Map&lt;String, String&gt; dsTokenMap = //some function call; return dsTokenMap; }; \nExecutorService service = Executors.newFixedThreadPool( 2 ); \nFuture future = service.submit( callableObj );\n\ntry { \n  Map result = future.get(500,TimeUnit.MILLISECONDS); \n  logDebug( &quot;result from Async call is :::&quot;+result ); } \ncatch ( Exception ex ) {\n}\n\n</code></pre>\n"},{"tags":["java","list","concurrency"],"comments":[{"owner":{"account_id":193707,"reputation":34681,"user_id":435605,"accept_rate":45,"display_name":"AlikElzin-kilaka"},"score":30,"creation_date":1312355463,"post_id":6916385,"comment_id":8247310,"body_markdown":"Why not constructive? Several proposed CopyOnWriteArrayList that is not found in .Net. You can say that both questions relate to each other but not to close this one!!!","body":"Why not constructive? Several proposed CopyOnWriteArrayList that is not found in .Net. You can say that both questions relate to each other but not to close this one!!!"},{"owner":{"account_id":45520,"reputation":123284,"user_id":134204,"display_name":"Panagiotis Kanavos"},"score":0,"creation_date":1385049849,"post_id":6916385,"comment_id":29992303,"body_markdown":"In .NET the equivalent of CopyOnWriteArrayList are the Immutable Collections. A concurrent collection is one that doesn&#39;t require locking to modify (like ConcurrentQueue etc), NOT one that copies its contents each time it&#39;s copied.","body":"In .NET the equivalent of CopyOnWriteArrayList are the Immutable Collections. A concurrent collection is one that doesn&#39;t require locking to modify (like ConcurrentQueue etc), NOT one that copies its contents each time it&#39;s copied."},{"owner":{"account_id":15824,"reputation":4589,"user_id":33836,"accept_rate":92,"display_name":"Matt Passell"},"score":1,"creation_date":1437401323,"post_id":6916385,"comment_id":50998433,"body_markdown":"I have no idea why Jarrod Roberson would think it was a good idea to take the detailed edits made by Stephan and revert them back to the original, poorly-phrased question. Jarrod&#39;s answer is still a perfectly acceptable one. In fact, CopyOnWriteArrayList is the only concurrent class implementing List in the JDK. Puzzled...","body":"I have no idea why Jarrod Roberson would think it was a good idea to take the detailed edits made by Stephan and revert them back to the original, poorly-phrased question. Jarrod&#39;s answer is still a perfectly acceptable one. In fact, CopyOnWriteArrayList is the only concurrent class implementing List in the JDK. Puzzled..."},{"owner":{"display_name":"user177800"},"score":13,"creation_date":1437405228,"post_id":6916385,"comment_id":51001436,"body_markdown":"Because the accepted answer was to the **original question** and Stephan put a completely unrelated question with a bunch of source code that the **original** poster did not include **anywhere** changing the question completely, which generated more answers that were suggesting things other than the `List` which the original specifically says is a **requirement** which is considered vandalism. A moderator already locked the question because of the people that are complaining that the answers do not answer that vandalized version of the question.","body":"Because the accepted answer was to the <b>original question</b> and Stephan put a completely unrelated question with a bunch of source code that the <b>original</b> poster did not include <b>anywhere</b> changing the question completely, which generated more answers that were suggesting things other than the <code>List</code> which the original specifically says is a <b>requirement</b> which is considered vandalism. A moderator already locked the question because of the people that are complaining that the answers do not answer that vandalized version of the question."},{"owner":{"display_name":"user177800"},"score":1,"creation_date":1437407370,"post_id":6916385,"comment_id":51002924,"body_markdown":"/`locked`/`closed`/ previous comment","body":"/<code>locked</code>/<code>closed</code>/ previous comment"},{"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"score":11,"creation_date":1535908207,"post_id":6916385,"comment_id":91228165,"body_markdown":"There&#39;s no reason for this question to be closed. It asks about classes in the JDK, which is nothing like searching for a library; it&#39;s the base of Java.","body":"There&#39;s no reason for this question to be closed. It asks about classes in the JDK, which is nothing like searching for a library; it&#39;s the base of Java."}],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":62,"is_accepted":false,"score":62,"last_activity_date":1312307820,"creation_date":1312307820,"answer_id":6916414,"question_id":6916385,"body_markdown":"Because the act of acquiring the position and getting the element from the given position naturally requires some locking (you can&#39;t have the list have structural changes between those two operations).\r\n\r\nThe very idea of a concurrent collection is that each operation on its own is atomic and can be done without explicit locking/synchronization.\r\n\r\nTherefore getting the element at position `n` from a given `List` as an atomic operation doesn&#39;t make too much sense in a situation where concurrent access is anticipated.","title":"Is there a concurrent List in Java&#39;s JDK?","body":"<p>Because the act of acquiring the position and getting the element from the given position naturally requires some locking (you can't have the list have structural changes between those two operations).</p>\n\n<p>The very idea of a concurrent collection is that each operation on its own is atomic and can be done without explicit locking/synchronization.</p>\n\n<p>Therefore getting the element at position <code>n</code> from a given <code>List</code> as an atomic operation doesn't make too much sense in a situation where concurrent access is anticipated.</p>\n"},{"tags":[],"owner":{"display_name":"user177800"},"down_vote_count":6,"up_vote_count":225,"is_accepted":true,"score":219,"last_activity_date":1585324513,"creation_date":1312307850,"answer_id":6916419,"question_id":6916385,"body_markdown":"There is a concurrent list implementation in [java.util.concurrent][1]. [CopyOnWriteArrayList][2] in particular.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/package-summary.html\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/CopyOnWriteArrayList.html","title":"Is there a concurrent List in Java&#39;s JDK?","body":"<p>There is a concurrent list implementation in <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/package-summary.html\" rel=\"noreferrer\">java.util.concurrent</a>. <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/CopyOnWriteArrayList.html\" rel=\"noreferrer\">CopyOnWriteArrayList</a> in particular.</p>\n"},{"tags":[],"owner":{"account_id":125128,"reputation":51999,"user_id":320700,"accept_rate":74,"display_name":"Yanick Rochon"},"down_vote_count":12,"up_vote_count":181,"is_accepted":false,"score":169,"last_activity_date":1638887677,"creation_date":1312308041,"answer_id":6916461,"question_id":6916385,"body_markdown":"**Disclaimer** : This answer was published in 2011, before JDK 5, and before much advanced and optimal concurrent APIs. So, while the following *will* work, it is not the best option.\r\n\r\n---\r\n\r\nYou can very well use [Collections.synchronizedList(List)](http://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#synchronizedList-java.util.List) if all you need is simple invocation synchronization:\r\n\r\n     List&lt;Object&gt; objList = Collections.synchronizedList(new ArrayList&lt;Object&gt;());","title":"Is there a concurrent List in Java&#39;s JDK?","body":"<p><strong>Disclaimer</strong> : This answer was published in 2011, before JDK 5, and before much advanced and optimal concurrent APIs. So, while the following <em>will</em> work, it is not the best option.</p>\n<hr />\n<p>You can very well use <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#synchronizedList-java.util.List\" rel=\"noreferrer\">Collections.synchronizedList(List)</a> if all you need is simple invocation synchronization:</p>\n<pre><code> List&lt;Object&gt; objList = Collections.synchronizedList(new ArrayList&lt;Object&gt;());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15824,"reputation":4589,"user_id":33836,"accept_rate":92,"display_name":"Matt Passell"},"down_vote_count":2,"up_vote_count":263,"is_accepted":false,"score":261,"last_activity_date":1608179346,"creation_date":1409683782,"answer_id":25630263,"question_id":6916385,"body_markdown":"# `ConcurrentLinkedQueue`\r\n\r\nIf you don&#39;t care about having index-based access and just want the insertion-order-preserving characteristics of a List, you could consider a [`java.util.concurrent.ConcurrentLinkedQueue`][1]. Since it implements Iterable, once you&#39;ve finished adding all the items, you can loop over the contents using the enhanced for syntax:\r\n\r\n    Queue&lt;String&gt; globalQueue = new ConcurrentLinkedQueue&lt;String&gt;();\r\n\r\n    //Multiple threads can safely call globalQueue.add()...\r\n\r\n    for (String href : globalQueue) {\r\n        //do something with href\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentLinkedQueue.html","title":"Is there a concurrent List in Java&#39;s JDK?","body":"<h1><code>ConcurrentLinkedQueue</code></h1>\n<p>If you don't care about having index-based access and just want the insertion-order-preserving characteristics of a List, you could consider a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentLinkedQueue.html\" rel=\"noreferrer\"><code>java.util.concurrent.ConcurrentLinkedQueue</code></a>. Since it implements Iterable, once you've finished adding all the items, you can loop over the contents using the enhanced for syntax:</p>\n<pre><code>Queue&lt;String&gt; globalQueue = new ConcurrentLinkedQueue&lt;String&gt;();\n\n//Multiple threads can safely call globalQueue.add()...\n\nfor (String href : globalQueue) {\n    //do something with href\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6174988,"reputation":11040,"user_id":4812170,"accept_rate":73,"display_name":"vaquar khan"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1572544163,"creation_date":1572543241,"answer_id":58648601,"question_id":6916385,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Ry2Ly.png\r\n\r\n\r\n&gt; CopyOnWriteArrayList  is a thread-safe variant of ArrayList in which\r\n&gt; all mutative operations (add, set, and so on) are implemented by\r\n&gt; making a fresh copy of the underlying array.\r\n\r\n\r\nCopyOnWriteArrayList is a concurrent alternative of synchronized List implements List interface and its part of java.util.concurrent packageand its a thread-safe collection.\r\n\r\n    public class CopyOnWriteArrayList&lt;E&gt;\r\n        implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable\r\n\r\n\r\n\r\n   \r\n\r\n    \r\n\r\nCopyOnWriteArrayList  is fail-safe and doesn&#39;t throw ConcurrentModificationException when underlying CopyOnWriteArrayList is modified during Iteration use a separate copy of ArrayList. \r\n\r\nThis is ordinarily too costly because copy array involved every update operation a cloned copy will be created. CopyOnWriteArrayList is the best choice only for frequent read operation.\r\n \r\n\r\n    /**\r\n             * Returns a shallow copy of this list.  (The elements themselves\r\n             * are not copied.)\r\n             *\r\n             * @return a clone of this list\r\n             */\r\n            public Object clone() {\r\n                try {\r\n                    @SuppressWarnings(&quot;unchecked&quot;)\r\n                    CopyOnWriteArrayList&lt;E&gt; clone =\r\n                        (CopyOnWriteArrayList&lt;E&gt;) super.clone();\r\n                    clone.resetLock();\r\n                    return clone;\r\n                } catch (CloneNotSupportedException e) {\r\n                    // this shouldn&#39;t happen, since we are Cloneable\r\n                    throw new InternalError();\r\n                }\r\n            }\r\n\r\n- http://gee.cs.oswego.edu/dl/classes/EDU/oswego/cs/dl/util/concurrent/CopyOnWriteArrayList.html\r\n\r\n\r\n- https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/CopyOnWriteArrayList.html\r\n- https://www.logicbig.com/tutorials/core-java-tutorial/java-collections/concurrent-collection-cheatsheet.html\r\n\r\n","title":"Is there a concurrent List in Java&#39;s JDK?","body":"<p><a href=\"https://i.stack.imgur.com/Ry2Ly.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Ry2Ly.png\" alt=\"enter image description here\"></a></p>\n\n<blockquote>\n  <p>CopyOnWriteArrayList  is a thread-safe variant of ArrayList in which\n  all mutative operations (add, set, and so on) are implemented by\n  making a fresh copy of the underlying array.</p>\n</blockquote>\n\n<p>CopyOnWriteArrayList is a concurrent alternative of synchronized List implements List interface and its part of java.util.concurrent packageand its a thread-safe collection.</p>\n\n<pre><code>public class CopyOnWriteArrayList&lt;E&gt;\n    implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable\n</code></pre>\n\n<p>CopyOnWriteArrayList  is fail-safe and doesn't throw ConcurrentModificationException when underlying CopyOnWriteArrayList is modified during Iteration use a separate copy of ArrayList. </p>\n\n<p>This is ordinarily too costly because copy array involved every update operation a cloned copy will be created. CopyOnWriteArrayList is the best choice only for frequent read operation.</p>\n\n<pre><code>/**\n         * Returns a shallow copy of this list.  (The elements themselves\n         * are not copied.)\n         *\n         * @return a clone of this list\n         */\n        public Object clone() {\n            try {\n                @SuppressWarnings(\"unchecked\")\n                CopyOnWriteArrayList&lt;E&gt; clone =\n                    (CopyOnWriteArrayList&lt;E&gt;) super.clone();\n                clone.resetLock();\n                return clone;\n            } catch (CloneNotSupportedException e) {\n                // this shouldn't happen, since we are Cloneable\n                throw new InternalError();\n            }\n        }\n</code></pre>\n\n<ul>\n<li><p><a href=\"http://gee.cs.oswego.edu/dl/classes/EDU/oswego/cs/dl/util/concurrent/CopyOnWriteArrayList.html\" rel=\"noreferrer\">http://gee.cs.oswego.edu/dl/classes/EDU/oswego/cs/dl/util/concurrent/CopyOnWriteArrayList.html</a></p></li>\n<li><p><a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/CopyOnWriteArrayList.html\" rel=\"noreferrer\">https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/CopyOnWriteArrayList.html</a></p></li>\n<li><a href=\"https://www.logicbig.com/tutorials/core-java-tutorial/java-collections/concurrent-collection-cheatsheet.html\" rel=\"noreferrer\">https://www.logicbig.com/tutorials/core-java-tutorial/java-collections/concurrent-collection-cheatsheet.html</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":920347,"reputation":10311,"user_id":952135,"accept_rate":58,"display_name":"Oliv"},"down_vote_count":0,"up_vote_count":51,"is_accepted":false,"score":51,"last_activity_date":1619084115,"creation_date":1573569641,"answer_id":58820905,"question_id":6916385,"body_markdown":"You have these options: \r\n\r\n- `Collections.synchronizedList()`: you can wrap any `List` implementation (`ArrayList`, `LinkedList` or a 3rd-party list). Access to every method (reading and writing) will be protected using `synchronized`. When using `iterator()` or enhanced for loop, you must manually synchronize the whole iteration. While iterating, other threads are fully blocked even from reading. You can also synchronize separately for each `hasNext` and `next` calls, but then `ConcurrentModificationException` is possible.\r\n\r\n- [`CopyOnWriteArrayList`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/CopyOnWriteArrayList.html): it&#39;s expensive to modify, but wait-free to read. Iterators never throw `ConcurrentModificationException`, they return a snapshot of the list at the moment of iterator creation even if the list is modified by another thread while iterating. Useful for infrequently updated lists. Bulk operations like `addAll` are preferred for updates - the internal array is copied less many times.\r\n\r\n- `Vector`: very much like `synchronizedList(new ArrayList&lt;&gt;())`, but iteration is synchronized too. However, iterators can throw `ConcurrentModificationException` if the vector is modified by another thread while iterating.\r\n\r\nOther options:\r\n\r\n- `Queue` or `Deque` might be an alternative if you only add/remove at the ends of the list or iterate it. `Queue` allows only adding at one end and removing from the other end, `Deque` allows adding and removing on both ends. There&#39;s no access by index. There are multiple implementations with better concurrency properties than any `List` can provide. Look at &quot;All Known Implementing Classes&quot; in the [Queue javadoc][1], those implementations that are in the `java.util.concurrent` package are concurrent. You can also have a look at [JCTools][2], it contains faster queue implementations specialized for single consumer or single producer.\r\n- `Collections.unmodifiableList()`: wait-free, thread-safe, but non-modifiable\r\n- [`List.of`][3] &amp; [`List.copyOf`][4]: Another [non-modifiable list][5] in Java 9 and later.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/Queue.html\r\n  [2]: https://github.com/JCTools/JCTools\r\n  [3]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html#of(E...)\r\n  [4]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html#copyOf(java.util.Collection)\r\n  [5]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html#unmodifiable","title":"Is there a concurrent List in Java&#39;s JDK?","body":"<p>You have these options:</p>\n<ul>\n<li><p><code>Collections.synchronizedList()</code>: you can wrap any <code>List</code> implementation (<code>ArrayList</code>, <code>LinkedList</code> or a 3rd-party list). Access to every method (reading and writing) will be protected using <code>synchronized</code>. When using <code>iterator()</code> or enhanced for loop, you must manually synchronize the whole iteration. While iterating, other threads are fully blocked even from reading. You can also synchronize separately for each <code>hasNext</code> and <code>next</code> calls, but then <code>ConcurrentModificationException</code> is possible.</p>\n</li>\n<li><p><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/CopyOnWriteArrayList.html\" rel=\"noreferrer\"><code>CopyOnWriteArrayList</code></a>: it's expensive to modify, but wait-free to read. Iterators never throw <code>ConcurrentModificationException</code>, they return a snapshot of the list at the moment of iterator creation even if the list is modified by another thread while iterating. Useful for infrequently updated lists. Bulk operations like <code>addAll</code> are preferred for updates - the internal array is copied less many times.</p>\n</li>\n<li><p><code>Vector</code>: very much like <code>synchronizedList(new ArrayList&lt;&gt;())</code>, but iteration is synchronized too. However, iterators can throw <code>ConcurrentModificationException</code> if the vector is modified by another thread while iterating.</p>\n</li>\n</ul>\n<p>Other options:</p>\n<ul>\n<li><code>Queue</code> or <code>Deque</code> might be an alternative if you only add/remove at the ends of the list or iterate it. <code>Queue</code> allows only adding at one end and removing from the other end, <code>Deque</code> allows adding and removing on both ends. There's no access by index. There are multiple implementations with better concurrency properties than any <code>List</code> can provide. Look at &quot;All Known Implementing Classes&quot; in the <a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/Queue.html\" rel=\"noreferrer\">Queue javadoc</a>, those implementations that are in the <code>java.util.concurrent</code> package are concurrent. You can also have a look at <a href=\"https://github.com/JCTools/JCTools\" rel=\"noreferrer\">JCTools</a>, it contains faster queue implementations specialized for single consumer or single producer.</li>\n<li><code>Collections.unmodifiableList()</code>: wait-free, thread-safe, but non-modifiable</li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html#of(E...)\" rel=\"noreferrer\"><code>List.of</code></a> &amp; <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html#copyOf(java.util.Collection)\" rel=\"noreferrer\"><code>List.copyOf</code></a>: Another <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html#unmodifiable\" rel=\"noreferrer\">non-modifiable list</a> in Java 9 and later.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3191144,"reputation":5197,"user_id":2695344,"accept_rate":42,"display_name":"Martin Kersten"},"down_vote_count":3,"up_vote_count":3,"is_accepted":false,"score":0,"last_activity_date":1601886955,"creation_date":1601886955,"answer_id":64205121,"question_id":6916385,"body_markdown":"Mostly if you need a concurrent list it is inside a model object (as you should not use abstract data types like a list to represent a node in a application model graph) or it is part of a particular service, you can synchronize the access yourself.\r\n\r\n    class MyClass {\r\n      List&lt;MyType&gt; myConcurrentList = new ArrayList&lt;&gt;();\r\n      void myMethod() {\r\n        synchronzied(myConcurrentList) {\r\n          doSomethingWithList;\r\n        }\r\n      }\r\n    }\r\n\r\nOften this is enough to get you going. If you need to iterate, iterate over a copy of the list not the list itself and only synchronize the part where you copy the list not while you are iterating over it.\r\n\r\nAlso when concurrently working on a list you usually do something more than just adding or removing or copying, meaning that the operation becomes meaningful enough to warrent its own method and the list becomes member of a special class representing just this particular list with thread safe behavior. \r\n\r\nEven if I agree that a concurrent list implementation is needed and Vector / Collections.sychronizeList(list) do not do the trick as for sure you need something like compareAndAdd or compareAndRemove or get(..., ifAbsentDo), even if you have a ConcurrentList implementation developers often introduce bugs by not considering what is the true transaction when working with a concurrent lists (and maps).\r\n\r\nThese scenarios where the transactions are too small for what the intended purpose of the interaction with a concurrent ADT (abstract data type) always lead to me hide the list in a special class and synchronizing access to this class objects method using the synchronized on the method level. Its the only way to be sure that the transactions are correct.\r\n\r\nI have seen too many bugs to do it any other way - at least if the code is important and handles something like money or security or guarantees some quality of service measures (e.g sending message at least once and only once).","title":"Is there a concurrent List in Java&#39;s JDK?","body":"<p>Mostly if you need a concurrent list it is inside a model object (as you should not use abstract data types like a list to represent a node in a application model graph) or it is part of a particular service, you can synchronize the access yourself.</p>\n<pre><code>class MyClass {\n  List&lt;MyType&gt; myConcurrentList = new ArrayList&lt;&gt;();\n  void myMethod() {\n    synchronzied(myConcurrentList) {\n      doSomethingWithList;\n    }\n  }\n}\n</code></pre>\n<p>Often this is enough to get you going. If you need to iterate, iterate over a copy of the list not the list itself and only synchronize the part where you copy the list not while you are iterating over it.</p>\n<p>Also when concurrently working on a list you usually do something more than just adding or removing or copying, meaning that the operation becomes meaningful enough to warrent its own method and the list becomes member of a special class representing just this particular list with thread safe behavior.</p>\n<p>Even if I agree that a concurrent list implementation is needed and Vector / Collections.sychronizeList(list) do not do the trick as for sure you need something like compareAndAdd or compareAndRemove or get(..., ifAbsentDo), even if you have a ConcurrentList implementation developers often introduce bugs by not considering what is the true transaction when working with a concurrent lists (and maps).</p>\n<p>These scenarios where the transactions are too small for what the intended purpose of the interaction with a concurrent ADT (abstract data type) always lead to me hide the list in a special class and synchronizing access to this class objects method using the synchronized on the method level. Its the only way to be sure that the transactions are correct.</p>\n<p>I have seen too many bugs to do it any other way - at least if the code is important and handles something like money or security or guarantees some quality of service measures (e.g sending message at least once and only once).</p>\n"}],"owner":{"account_id":193707,"reputation":34681,"user_id":435605,"accept_rate":45,"display_name":"AlikElzin-kilaka"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":448766,"favorite_count":0,"down_vote_count":3,"up_vote_count":385,"accepted_answer_id":6916419,"answer_count":7,"score":382,"last_activity_date":1638887677,"creation_date":1312307688,"question_id":6916385,"body_markdown":"How can I create a concurrent List instance, where I can access elements by index? Does the JDK have any classes or factory methods I can use?","title":"Is there a concurrent List in Java&#39;s JDK?","body":"<p>How can I create a concurrent List instance, where I can access elements by index? Does the JDK have any classes or factory methods I can use?</p>\n"},{"tags":["java","jvm","soapui"],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1349275672,"creation_date":1349275672,"answer_id":12711007,"question_id":12710957,"body_markdown":"This error often occurs if you try to set too much memory on a 32-bit OS such as Windows. E.g. if you use `-Xmx1600m` or more on Windows 32-bit you will get this error.\r\n\r\nWhich OS and version of Java do you have on the machine which fails.","title":"Getting JVM error after SOAP UI installation","body":"<p>This error often occurs if you try to set too much memory on a 32-bit OS such as Windows. E.g. if you use <code>-Xmx1600m</code> or more on Windows 32-bit you will get this error.</p>\n\n<p>Which OS and version of Java do you have on the machine which fails.</p>\n"},{"tags":[],"owner":{"account_id":1928352,"reputation":11,"user_id":1738308,"display_name":"Riana Subroto"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1349963131,"creation_date":1349963131,"answer_id":12841040,"question_id":12710957,"body_markdown":"What I did with mine is kill all application processes that use Java, for example: Mozilla FireFox. You can kill the process from Windows Task Manager. After that, rerun your SOAP UI.","title":"Getting JVM error after SOAP UI installation","body":"<p>What I did with mine is kill all application processes that use Java, for example: Mozilla FireFox. You can kill the process from Windows Task Manager. After that, rerun your SOAP UI.</p>\n"},{"tags":[],"owner":{"account_id":2357292,"reputation":5009,"user_id":2064835,"accept_rate":72,"display_name":"ankit"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1408780855,"creation_date":1367476155,"answer_id":16331731,"question_id":12710957,"body_markdown":"This problem occurs because Soap Ui tries to get the specified amount of memory in form of single block which is rarely available. \r\nSo solution to this problem is navigate to soapUi.x.x.x.vmoption file which can be found in \r\n\r\nc-&gt;program files-&gt; emiware -&gt; soapUi.x.x.x -&gt;bin \r\n\r\nedit this file and make the -Xms to something lesser default value is 1200m make it 512m if does not work change it some to a lesser value.\r\n\r\n\r\n**PS x.x.x. is the version of SoapUI in my case its 4.0.0**  \r\n\r\n-Xms means initial heap size.\r\n\r\n-Xmx means maximum heap size. \r\n\r\nSo you can set values as per your requirement.","title":"Getting JVM error after SOAP UI installation","body":"<p>This problem occurs because Soap Ui tries to get the specified amount of memory in form of single block which is rarely available. \nSo solution to this problem is navigate to soapUi.x.x.x.vmoption file which can be found in </p>\n\n<p>c->program files-> emiware -> soapUi.x.x.x ->bin </p>\n\n<p>edit this file and make the -Xms to something lesser default value is 1200m make it 512m if does not work change it some to a lesser value.</p>\n\n<p><strong>PS x.x.x. is the version of SoapUI in my case its 4.0.0</strong>  </p>\n\n<p>-Xms means initial heap size.</p>\n\n<p>-Xmx means maximum heap size. </p>\n\n<p>So you can set values as per your requirement.</p>\n"},{"tags":[],"owner":{"account_id":3037902,"reputation":1,"user_id":2575556,"display_name":"bart honhoff"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1373615632,"creation_date":1373615632,"answer_id":17610137,"question_id":12710957,"body_markdown":"Neither of these solutions worked for me. What did work was starting the soapui.bat file int he same mentioned \\bin directory.\r\nThis file does set the required JAVA environment settings.\r\n\r\nUsing Java a lot I cannot do this as an general Environment variable since this will impact my SQLdeveloper from Oracle and other Java goodies.","title":"Getting JVM error after SOAP UI installation","body":"<p>Neither of these solutions worked for me. What did work was starting the soapui.bat file int he same mentioned \\bin directory.\nThis file does set the required JAVA environment settings.</p>\n\n<p>Using Java a lot I cannot do this as an general Environment variable since this will impact my SQLdeveloper from Oracle and other Java goodies.</p>\n"},{"tags":[],"owner":{"account_id":4387327,"reputation":11,"user_id":3577035,"display_name":"Amandeep Singh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1398548382,"creation_date":1398548382,"answer_id":23316809,"question_id":12710957,"body_markdown":"There is quite a simple fix to this soapUI issue...\r\n\r\nAnkit and Peter have mentioned about it here... to help you (and others) with this, I have written a step-by-step tutorial for this along with screenshots for the fix. I hope this helps you...!\r\n\r\nYou can check it here - http://quicksoftwaretesting.com/soapui-jvm-heap-size-xmx-error/","title":"Getting JVM error after SOAP UI installation","body":"<p>There is quite a simple fix to this soapUI issue...</p>\n\n<p>Ankit and Peter have mentioned about it here... to help you (and others) with this, I have written a step-by-step tutorial for this along with screenshots for the fix. I hope this helps you...!</p>\n\n<p>You can check it here - <a href=\"http://quicksoftwaretesting.com/soapui-jvm-heap-size-xmx-error/\" rel=\"nofollow\">http://quicksoftwaretesting.com/soapui-jvm-heap-size-xmx-error/</a></p>\n"},{"tags":[],"owner":{"account_id":3995165,"reputation":127,"user_id":3292913,"display_name":"Sorin"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1413819100,"creation_date":1413819100,"answer_id":26469427,"question_id":12710957,"body_markdown":"Make sure you downloaded the appropriate version (32/64 bit) for your OS.","title":"Getting JVM error after SOAP UI installation","body":"<p>Make sure you downloaded the appropriate version (32/64 bit) for your OS.</p>\n"}],"owner":{"account_id":434427,"reputation":372,"user_id":820393,"accept_rate":80,"display_name":"Piyush"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26728,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":12711007,"answer_count":6,"score":8,"last_activity_date":1638887515,"creation_date":1349275516,"question_id":12710957,"body_markdown":"I am trying to install `SOAPUI` tool. After the installation, when executed, I amm getting this error:\r\n\r\n&gt; The JVM could not be started. The maximum heap size (-XMx) might be\r\n&gt; too large or anti virus or firewall tool could block the execution\r\n\r\nWhen installed to a different machine, it works fine.\r\n\r\nAny suggestions?","title":"Getting JVM error after SOAP UI installation","body":"<p>I am trying to install <code>SOAPUI</code> tool. After the installation, when executed, I amm getting this error:</p>\n\n<blockquote>\n  <p>The JVM could not be started. The maximum heap size (-XMx) might be\n  too large or anti virus or firewall tool could block the execution</p>\n</blockquote>\n\n<p>When installed to a different machine, it works fine.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["java","java.util.scanner"],"answers":[{"tags":[],"owner":{"account_id":7132908,"reputation":189,"user_id":5453550,"display_name":"NLxDoDge"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1638887398,"creation_date":1638887398,"answer_id":70261961,"question_id":70249630,"body_markdown":"What you can do with the Scanner is ask for the destination of the new CSV file, parse that to a string and use the FileReaders to read the contents of the file.\r\n\r\nFor example:\r\n```java\r\nScanner scanner = new Scanner(System.in);  // Create a Scanner object\r\nSystem.out.println(&quot;Enter .csv filepath&quot;);\r\n\r\nString filepath = scanner.nextLine(); \r\n\r\nList&lt;String&gt; contents = Files.readAllLines(Paths.get(filepath));\r\n```\r\nYou however have to change some of this code to make it work. As the `Paths.get(filepath)` only looks from the directory where you start the terminal (same folder).\r\n\r\nWhen you run this when a file like `text.txt` (or csv for that matter) with `./text.txt` as input it will get all the lines of the file and put it in the list.\r\n\r\nWill this work for you?","title":"Creating a scanner that allows user to add CSV file to it in Java","body":"<p>What you can do with the Scanner is ask for the destination of the new CSV file, parse that to a string and use the FileReaders to read the contents of the file.</p>\n<p>For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner scanner = new Scanner(System.in);  // Create a Scanner object\nSystem.out.println(&quot;Enter .csv filepath&quot;);\n\nString filepath = scanner.nextLine(); \n\nList&lt;String&gt; contents = Files.readAllLines(Paths.get(filepath));\n</code></pre>\n<p>You however have to change some of this code to make it work. As the <code>Paths.get(filepath)</code> only looks from the directory where you start the terminal (same folder).</p>\n<p>When you run this when a file like <code>text.txt</code> (or csv for that matter) with <code>./text.txt</code> as input it will get all the lines of the file and put it in the list.</p>\n<p>Will this work for you?</p>\n"}],"owner":{"account_id":23370985,"reputation":15,"user_id":17441843,"display_name":"bennydabull"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70261961,"answer_count":1,"score":1,"last_activity_date":1638887398,"creation_date":1638812534,"question_id":70249630,"body_markdown":"I am trying to create a service that parse&#39;s each line of a CSV file and runs a variety of booleans for the string on each line. Everything is working correctly but the way I have it set up is that the user copies the text in the CSV file and pastes it into the scanner. I want to make it so that the user can add a CSV file while the code is running. \r\n\r\nThe way I have it set up right now:\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class Main {\r\n\r\n      public static void main(String[] args) {\r\n        Scanner exampleString = new Scanner(System.in);\r\n        do {\r\n            String checkString = exampleString.nextLine();\r\n            boolean testOne = checkString.contains(&quot;Text from CSV line&quot;);\r\n            if(testOne){\r\n               String removingExtraCharacters = checkString.replaceAll\r\n               (&quot; [^\\\\d.$]&quot;, &quot;&quot;);\r\n                System.out.println(removingExtraCharacters);\r\n            }\r\n         }while (exampleString.hasNextLine());\r\n          exampleString.close();\r\n     }\r\n    }\r\n\r\nI looked into using the Scanner(File()) method but I could only figure out how to put the file into it before running the code.\r\nIs there any way to make it ask the user to add the file to the Scanner after the code is ran? \r\n        ","title":"Creating a scanner that allows user to add CSV file to it in Java","body":"<p>I am trying to create a service that parse's each line of a CSV file and runs a variety of booleans for the string on each line. Everything is working correctly but the way I have it set up is that the user copies the text in the CSV file and pastes it into the scanner. I want to make it so that the user can add a CSV file while the code is running.</p>\n<p>The way I have it set up right now:</p>\n<pre><code>import java.util.Scanner;\n\npublic class Main {\n\n  public static void main(String[] args) {\n    Scanner exampleString = new Scanner(System.in);\n    do {\n        String checkString = exampleString.nextLine();\n        boolean testOne = checkString.contains(&quot;Text from CSV line&quot;);\n        if(testOne){\n           String removingExtraCharacters = checkString.replaceAll\n           (&quot; [^\\\\d.$]&quot;, &quot;&quot;);\n            System.out.println(removingExtraCharacters);\n        }\n     }while (exampleString.hasNextLine());\n      exampleString.close();\n }\n}\n</code></pre>\n<p>I looked into using the Scanner(File()) method but I could only figure out how to put the file into it before running the code.\nIs there any way to make it ask the user to add the file to the Scanner after the code is ran?</p>\n"},{"tags":["java","android-studio"],"comments":[{"owner":{"account_id":9349629,"reputation":723,"user_id":6939768,"accept_rate":55,"display_name":"Zelkins"},"score":0,"creation_date":1639529007,"post_id":70261341,"comment_id":124370552,"body_markdown":"Can you ask a more specific question, it is unclear what you are trying to fix / the intended results","body":"Can you ask a more specific question, it is unclear what you are trying to fix / the intended results"}],"answers":[{"tags":[],"owner":{"account_id":12822707,"reputation":677,"user_id":9276996,"display_name":"Turtle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638887376,"creation_date":1638887376,"answer_id":70261955,"question_id":70261341,"body_markdown":"From the exception which you mentioned, it can be seen that you are accessing the method `getName()` on a null reference which stopped you from starting the activity.\r\n\r\n&gt; E/AndroidRuntime: FATAL EXCEPTION: main\r\n&gt;     Process: com.example.shopingonline, PID: 18327\r\n&gt;     java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.shopingonline/com.example.shopingonline.HomeActivity}:\r\n&gt; java.lang.NullPointerException: Attempt to invoke virtual method\r\n&gt; &#39;java.lang.String com.example.shopingonline.Model.Users.getName()&#39; on\r\n&gt; a null object reference\r\n\r\nYou need to check if you are expecting a null reference in the first place, if so you can add a null check to avoid it. See [this][1] for more info\r\n\r\n    if(Prevalent.currentOnlineUser != null)\r\n        userNameTextView.setText(Prevalent.currentOnlineUser.getName());\r\n\r\n  [1]: https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it","title":"how can i resolve this problem in android studio for e-commerce apps?","body":"<p>From the exception which you mentioned, it can be seen that you are accessing the method <code>getName()</code> on a null reference which stopped you from starting the activity.</p>\n<blockquote>\n<p>E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: com.example.shopingonline, PID: 18327\njava.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.shopingonline/com.example.shopingonline.HomeActivity}:\njava.lang.NullPointerException: Attempt to invoke virtual method\n'java.lang.String com.example.shopingonline.Model.Users.getName()' on\na null object reference</p>\n</blockquote>\n<p>You need to check if you are expecting a null reference in the first place, if so you can add a null check to avoid it. See <a href=\"https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it\">this</a> for more info</p>\n<pre><code>if(Prevalent.currentOnlineUser != null)\n    userNameTextView.setText(Prevalent.currentOnlineUser.getName());\n</code></pre>\n"}],"owner":{"account_id":23575362,"reputation":1,"user_id":17615087,"display_name":"natasha rondot"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1638887376,"creation_date":1638885147,"question_id":70261341,"body_markdown":"    E/AndroidRuntime: FATAL EXCEPTION: main\r\n        Process: com.example.shopingonline, PID: 18327\r\n        java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.shopingonline/com.example.shopingonline.HomeActivity}: java.lang.NullPointerException: Attempt to invoke virtual method &#39;java.lang.String com.example.shopingonline.Model.Users.getName()&#39; on a null object reference\r\n    \r\n    View headerView = navigationView.getHeaderView(0);\r\n            TextView userNameTextView = headerView.findViewById(R.id.user_profile_name);\r\n            CircleImageView profileImageView = headerView.findViewById(R.id.user_profile_image);\r\n    \r\n            userNameTextView.setText(Prevalent.currentOnlineUser.getName());\r\n    \r\n    public class Prevalent {\r\n        public static Users currentOnlineUser;\r\n        //unique key for all users\r\n        public static final String UserPhoneKey = &quot;UserPhone&quot;;\r\n        public static final String UserPasswordKey = &quot;UserPassword&quot;;\r\n    }\r\n    \r\n    \r\n    \r\n    public class Users {\r\n        //get the name passeword, all the user information\r\n        private String name, phone, password;\r\n    \r\n        public Users(String name, String phone, String password) {\r\n            this.name = name;\r\n            this.phone= phone;\r\n            this.password = password;\r\n        }\r\n    \r\n        public Users(){\r\n    \r\n        };\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        public String getPhone() {\r\n            return phone;\r\n        }\r\n    \r\n        public void setPhone(String phone) {\r\n            this.phone = phone;\r\n    \r\n        } public String getPassword() {\r\n            return password;\r\n        }\r\n    \r\n        public void setPassword(String password) {\r\n            this.password = password;\r\n        }\r\n    }\r\n\r\n\r\n// i have this problem and i can&#39;t resolve it i tried for 4 days but it&#39;s so hard for me as beginner  gjvkhkbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\r\n\r\n","title":"how can i resolve this problem in android studio for e-commerce apps?","body":"<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.shopingonline, PID: 18327\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.shopingonline/com.example.shopingonline.HomeActivity}: java.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.String com.example.shopingonline.Model.Users.getName()' on a null object reference\n\nView headerView = navigationView.getHeaderView(0);\n        TextView userNameTextView = headerView.findViewById(R.id.user_profile_name);\n        CircleImageView profileImageView = headerView.findViewById(R.id.user_profile_image);\n\n        userNameTextView.setText(Prevalent.currentOnlineUser.getName());\n\npublic class Prevalent {\n    public static Users currentOnlineUser;\n    //unique key for all users\n    public static final String UserPhoneKey = &quot;UserPhone&quot;;\n    public static final String UserPasswordKey = &quot;UserPassword&quot;;\n}\n\n\n\npublic class Users {\n    //get the name passeword, all the user information\n    private String name, phone, password;\n\n    public Users(String name, String phone, String password) {\n        this.name = name;\n        this.phone= phone;\n        this.password = password;\n    }\n\n    public Users(){\n\n    };\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getPhone() {\n        return phone;\n    }\n\n    public void setPhone(String phone) {\n        this.phone = phone;\n\n    } public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n}\n</code></pre>\n<p>// i have this problem and i can't resolve it i tried for 4 days but it's so hard for me as beginner  gjvkhkbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb</p>\n"},{"tags":["java","android","mapbox"],"owner":{"account_id":21724577,"reputation":78,"user_id":16775298,"display_name":"Nothing"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":194,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1638887119,"creation_date":1638887119,"question_id":70261892,"body_markdown":"i am a beginner in java and trying to plot a path from sample coordinates. For this, i am following the official documentation. Here is the link to it: https://docs.mapbox.com/android/maps/examples/draw-geo-json-line/. i did not find relevant resources for newer mapbox 10.1.0. No lifecycle need to be defined, getInstance, getAsync method are not there in the new one. so, i decomplied kotlin to java to try if i could make it work. This code snippet from the reference link i provided:\r\n\r\n    mapView.getMapboxMap().loadStyle(\r\n    (\r\n    style(styleUri = Style.MAPBOX_STREETS) {\r\n    +geoJsonSource(GEOJSON_SOURCE_ID) {\r\n    url(&quot;asset://from_crema_to_council_crest.geojson&quot;)\r\n    }\r\n    +lineLayer(&quot;linelayer&quot;, GEOJSON_SOURCE_ID) {\r\n    lineCap(LineCap.ROUND)\r\n    lineJoin(LineJoin.ROUND)\r\n    lineOpacity(0.7)\r\n    lineWidth(8.0)\r\n    lineColor(&quot;#888&quot;)\r\n    }\r\n    }\r\n    )\r\n    )\r\ngets converted to       m\r\n\r\n    apView.getMapboxMap().loadStyle(StyleExtensionImplKt.style(&quot;mapbox://styles/mapbox/streets-v11&quot;, (Function1)null.INSTANCE));\r\n\r\n   \r\n\r\n the style method inside StyleExtensionImplKt.kt is shown below:\r\n\r\n    /**\r\n     * DSL function to construct a style extension.\r\n     */\r\n    fun style(styleUri: String, block: Builder.() -&gt; Unit) =\r\n      Builder(styleUri).apply(block).build()\r\n\r\nNow, it says the second parameter is a DSL function and now i am stuck on how should i implement this. I only wanted to plot a simple GeoJSON path on the map using some sample coordinate array. I have plotted the map but am stuck on this now. Can someone help me? Could someone provide some reference?\r\n\r\nHere is my code snippet to show the map, on MainActivity.java:\r\n\r\n     @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            MapView mapView = findViewById(R.id.mapView);\r\n    \r\n    \r\n            if(mapView != null){\r\n            mapView.getMapboxMap().loadStyleUri(Style.MAPBOX_STREETS);\r\n        }\r\n\r\n","title":"Stuck on Plotting path from some sample random GeoJson in mapbox java android","body":"<p>i am a beginner in java and trying to plot a path from sample coordinates. For this, i am following the official documentation. Here is the link to it: <a href=\"https://docs.mapbox.com/android/maps/examples/draw-geo-json-line/\" rel=\"nofollow noreferrer\">https://docs.mapbox.com/android/maps/examples/draw-geo-json-line/</a>. i did not find relevant resources for newer mapbox 10.1.0. No lifecycle need to be defined, getInstance, getAsync method are not there in the new one. so, i decomplied kotlin to java to try if i could make it work. This code snippet from the reference link i provided:</p>\n<pre><code>mapView.getMapboxMap().loadStyle(\n(\nstyle(styleUri = Style.MAPBOX_STREETS) {\n+geoJsonSource(GEOJSON_SOURCE_ID) {\nurl(&quot;asset://from_crema_to_council_crest.geojson&quot;)\n}\n+lineLayer(&quot;linelayer&quot;, GEOJSON_SOURCE_ID) {\nlineCap(LineCap.ROUND)\nlineJoin(LineJoin.ROUND)\nlineOpacity(0.7)\nlineWidth(8.0)\nlineColor(&quot;#888&quot;)\n}\n}\n)\n)\n</code></pre>\n<p>gets converted to       m</p>\n<pre><code>apView.getMapboxMap().loadStyle(StyleExtensionImplKt.style(&quot;mapbox://styles/mapbox/streets-v11&quot;, (Function1)null.INSTANCE));\n</code></pre>\n<p>the style method inside StyleExtensionImplKt.kt is shown below:</p>\n<pre><code>/**\n * DSL function to construct a style extension.\n */\nfun style(styleUri: String, block: Builder.() -&gt; Unit) =\n  Builder(styleUri).apply(block).build()\n</code></pre>\n<p>Now, it says the second parameter is a DSL function and now i am stuck on how should i implement this. I only wanted to plot a simple GeoJSON path on the map using some sample coordinate array. I have plotted the map but am stuck on this now. Can someone help me? Could someone provide some reference?</p>\n<p>Here is my code snippet to show the map, on MainActivity.java:</p>\n<pre><code> @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        MapView mapView = findViewById(R.id.mapView);\n\n\n        if(mapView != null){\n        mapView.getMapboxMap().loadStyleUri(Style.MAPBOX_STREETS);\n    }\n</code></pre>\n"},{"tags":["java","mysql","spring-boot","microservices"],"comments":[{"owner":{"account_id":1152485,"reputation":551,"user_id":1133898,"accept_rate":86,"display_name":"Rajib Deka"},"score":0,"creation_date":1639375274,"post_id":70261851,"comment_id":124323698,"body_markdown":"you may look into this https://stackoverflow.com/questions/6559272/algid-parse-error-not-a-sequence","body":"you may look into this <a href=\"https://stackoverflow.com/questions/6559272/algid-parse-error-not-a-sequence\" title=\"algid parse error not a sequence\">stackoverflow.com/questions/6559272/&hellip;</a>"}],"owner":{"account_id":23575691,"reputation":11,"user_id":17615372,"display_name":"Rafael Mu&#241;oz "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2769,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1638886917,"creation_date":1638886917,"question_id":70261851,"body_markdown":"I have the following code implemented in java service class inside a spring microservices arquitecture:\r\n\r\n    @Autowired\r\n\tprivate UsuarioRepository usuarioRepository;\r\n\r\n    public String prueba(String data) {\r\n\t\t\r\n\t\tgenerateKeys(data);\t\r\n\t    \r\n\t    byte[] text=encryptPrivate(&quot;texto de prueba lala&quot;,data);\r\n\t    String texto=decryptPublic(text,data);\r\n\t\t\r\n\t\treturn texto;\r\n\t}\r\n    \r\n    public String generateKeys(String username) {\r\n\r\n\t\tKeyPairGenerator keyPairGenerator = null;\r\n\t\ttry {\r\n\t\t\tkeyPairGenerator = KeyPairGenerator.getInstance(&quot;RSA&quot;);\r\n\t\t} catch (NoSuchAlgorithmException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\n\t\tkeyPairGenerator.initialize(512); // m&#250;ltiplo de 64, 512 ~ 65536\r\n\r\n\t\tKeyPair keyPair = keyPairGenerator.generateKeyPair();\r\n\r\n\t\tRSAPrivateKey rsaPrivateKey = (RSAPrivateKey) keyPair.getPrivate();\r\n\t\tSystem.out.println(&quot;Private: &quot; + rsaPrivateKey);\r\n\r\n\t\tRSAPublicKey rsaPublicKey = (RSAPublicKey) keyPair.getPublic();\r\n\t\tSystem.out.println(&quot;Public: &quot; + rsaPublicKey);\r\n\t\t\r\n\t\tbyte[] publicKeyBytes = keyPair.getPublic().getEncoded();\r\n\t\tbyte[] privateKeyBytes = keyPair.getPrivate().getEncoded();\r\n\t\tSystem.out.println(&quot;Encoded: &quot; + publicKeyBytes);\r\n\t\t\r\n\t\tusuarioRepository.add(publicKeyBytes, privateKeyBytes, username);\r\n\r\n\t\treturn &quot;ok&quot;;\r\n\t}\r\n\r\n    public byte[] encryptPrivate(String data, String username) {\r\n\t\t\r\n\t\t//sacar clave de BBDD\r\n\t\tbyte[] keyBytes = getPrKey(username); //new byte[(int)f.length()]; \r\n\t\tEncodedKeySpec spec = new PKCS8EncodedKeySpec(keyBytes);\r\n       \r\n        try {\r\n\t\t\t KeyFactory kf = KeyFactory.getInstance(&quot;RSA&quot;); \r\n\t\t\t RSAPrivateKey rsaPrivateKey = (RSAPrivateKey) kf.generatePrivate(spec);\r\n\t\t\t Cipher cipher = Cipher.getInstance(&quot;RSA&quot;);\r\n\t         cipher.init(Cipher.ENCRYPT_MODE, rsaPrivateKey);\r\n\t         byte[] cipherText = cipher.doFinal(data.getBytes());\r\n\t         \r\n\t         return cipherText;\r\n\t\t\t \r\n\t\t} catch (InvalidKeySpecException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (NoSuchAlgorithmException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (NoSuchPaddingException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (InvalidKeyException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (IllegalBlockSizeException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (BadPaddingException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n        \r\n\t\t\r\n\t\treturn null;\r\n\t}\r\n\r\n    public String decryptPublic(byte[] data, String username) {\r\n\r\n\t\tbyte[] keyBytes = getPuKey(username); //new byte[(int)f.length()]; \r\n\t\tX509EncodedKeySpec spec = new X509EncodedKeySpec(keyBytes);\r\n\t\ttry {\r\n\t\t\t KeyFactory kf = KeyFactory.getInstance(&quot;RSA&quot;); \r\n\t\t\t RSAPublicKey rsaPublicKey = (RSAPublicKey) kf.generatePublic(spec);\r\n\t\t\t Cipher cipher = Cipher.getInstance(&quot;RSA&quot;);\r\n\t\t\t cipher.init(Cipher.DECRYPT_MODE, rsaPublicKey); \r\n\t\t     byte[] plainText = cipher.doFinal(data);\r\n\t\t     //new String(plainText);\r\n\t\t     return new String(plainText);\r\n\t\t\t \r\n\t\t} catch (InvalidKeySpecException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (NoSuchAlgorithmException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (NoSuchPaddingException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (InvalidKeyException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (IllegalBlockSizeException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (BadPaddingException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn &quot;fail&quot;;\t\t\r\n\t\t\t\t\r\n\t}\r\n\r\nThe problem comes when I try to recover the private key from the DDBB:\r\n\r\n     RSAPrivateKey rsaPrivateKey = (RSAPrivateKey) kf.generatePrivate(spec);\r\n\r\nIm storing the key in a varbinary. I got the following error:\r\n\r\n  \r\n\r\n    \r\njava.security.spec.InvalidKeySpecException: java.security.InvalidKeyException: IOException : DerValue.getBigIntegerInternal, not expected 48\r\n\tat java.base/sun.security.rsa.RSAKeyFactory.engineGeneratePrivate(RSAKeyFactory.java:252)\r\n\tat java.base/java.security.KeyFactory.generatePrivate(KeyFactory.java:390)\r\n\tat com.iasec.wallet.service.WalletServiceImpl.encryptPrivate(WalletServiceImpl.java:134)\r\n\tat com.iasec.wallet.service.WalletServiceImpl.prueba(WalletServiceImpl.java:50)\r\n\tat com.iasec.wallet.controller.WalletController.encrypt1(WalletController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:567)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:681)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1722)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:831)\r\nCaused by: java.security.InvalidKeyException: IOException : DerValue.getBigIntegerInternal, not expected 48\r\n\tat java.base/sun.security.pkcs.PKCS8Key.decode(PKCS8Key.java:133)\r\n\tat java.base/sun.security.pkcs.PKCS8Key.&lt;init&gt;(PKCS8Key.java:94)\r\n\tat java.base/sun.security.rsa.RSAPrivateCrtKeyImpl.&lt;init&gt;(RSAPrivateCrtKeyImpl.java:152)\r\n\tat java.base/sun.security.rsa.RSAPrivateCrtKeyImpl.newKey(RSAPrivateCrtKeyImpl.java:89)\r\n\tat java.base/sun.security.rsa.RSAKeyFactory.generatePrivate(RSAKeyFactory.java:343)\r\n\tat java.base/sun.security.rsa.RSAKeyFactory.engineGeneratePrivate(RSAKeyFactory.java:248)\r\n\t... 54 more\r\njava.security.spec.InvalidKeySpecException: java.security.InvalidKeyException: IOException: algid parse error, not a sequence\r\n\tat java.base/sun.security.rsa.RSAKeyFactory.engineGeneratePublic(RSAKeyFactory.java:240)\r\n\tat java.base/java.security.KeyFactory.generatePublic(KeyFactory.java:352)\r\n\tat com.iasec.wallet.service.WalletServiceImpl.decryptPublic(WalletServiceImpl.java:209)\r\n\tat com.iasec.wallet.service.WalletServiceImpl.prueba(WalletServiceImpl.java:51)\r\n\tat com.iasec.wallet.controller.WalletController.encrypt1(WalletController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:567)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:681)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1722)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:831)\r\nCaused by: java.security.InvalidKeyException: IOException: algid parse error, not a sequence\r\n\tat java.base/sun.security.x509.X509Key.decode(X509Key.java:397)\r\n\tat java.base/sun.security.x509.X509Key.decode(X509Key.java:402)\r\n\r\n","title":"java.security.spec.InvalidKeySpecException: java.security.InvalidKeyException: IOException: algid parse error, not a sequence","body":"<p>I have the following code implemented in java service class inside a spring microservices arquitecture:</p>\n<pre><code>@Autowired\nprivate UsuarioRepository usuarioRepository;\n\npublic String prueba(String data) {\n    \n    generateKeys(data); \n    \n    byte[] text=encryptPrivate(&quot;texto de prueba lala&quot;,data);\n    String texto=decryptPublic(text,data);\n    \n    return texto;\n}\n\npublic String generateKeys(String username) {\n\n    KeyPairGenerator keyPairGenerator = null;\n    try {\n        keyPairGenerator = KeyPairGenerator.getInstance(&quot;RSA&quot;);\n    } catch (NoSuchAlgorithmException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n\n    keyPairGenerator.initialize(512); // múltiplo de 64, 512 ~ 65536\n\n    KeyPair keyPair = keyPairGenerator.generateKeyPair();\n\n    RSAPrivateKey rsaPrivateKey = (RSAPrivateKey) keyPair.getPrivate();\n    System.out.println(&quot;Private: &quot; + rsaPrivateKey);\n\n    RSAPublicKey rsaPublicKey = (RSAPublicKey) keyPair.getPublic();\n    System.out.println(&quot;Public: &quot; + rsaPublicKey);\n    \n    byte[] publicKeyBytes = keyPair.getPublic().getEncoded();\n    byte[] privateKeyBytes = keyPair.getPrivate().getEncoded();\n    System.out.println(&quot;Encoded: &quot; + publicKeyBytes);\n    \n    usuarioRepository.add(publicKeyBytes, privateKeyBytes, username);\n\n    return &quot;ok&quot;;\n}\n\npublic byte[] encryptPrivate(String data, String username) {\n    \n    //sacar clave de BBDD\n    byte[] keyBytes = getPrKey(username); //new byte[(int)f.length()]; \n    EncodedKeySpec spec = new PKCS8EncodedKeySpec(keyBytes);\n   \n    try {\n         KeyFactory kf = KeyFactory.getInstance(&quot;RSA&quot;); \n         RSAPrivateKey rsaPrivateKey = (RSAPrivateKey) kf.generatePrivate(spec);\n         Cipher cipher = Cipher.getInstance(&quot;RSA&quot;);\n         cipher.init(Cipher.ENCRYPT_MODE, rsaPrivateKey);\n         byte[] cipherText = cipher.doFinal(data.getBytes());\n         \n         return cipherText;\n         \n    } catch (InvalidKeySpecException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (NoSuchAlgorithmException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (NoSuchPaddingException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (InvalidKeyException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (IllegalBlockSizeException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (BadPaddingException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n    \n    \n    return null;\n}\n\npublic String decryptPublic(byte[] data, String username) {\n\n    byte[] keyBytes = getPuKey(username); //new byte[(int)f.length()]; \n    X509EncodedKeySpec spec = new X509EncodedKeySpec(keyBytes);\n    try {\n         KeyFactory kf = KeyFactory.getInstance(&quot;RSA&quot;); \n         RSAPublicKey rsaPublicKey = (RSAPublicKey) kf.generatePublic(spec);\n         Cipher cipher = Cipher.getInstance(&quot;RSA&quot;);\n         cipher.init(Cipher.DECRYPT_MODE, rsaPublicKey); \n         byte[] plainText = cipher.doFinal(data);\n         //new String(plainText);\n         return new String(plainText);\n         \n    } catch (InvalidKeySpecException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (NoSuchAlgorithmException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (NoSuchPaddingException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (InvalidKeyException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (IllegalBlockSizeException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (BadPaddingException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n    return &quot;fail&quot;;      \n            \n}\n</code></pre>\n<p>The problem comes when I try to recover the private key from the DDBB:</p>\n<pre><code> RSAPrivateKey rsaPrivateKey = (RSAPrivateKey) kf.generatePrivate(spec);\n</code></pre>\n<p>Im storing the key in a varbinary. I got the following error:</p>\n<p>java.security.spec.InvalidKeySpecException: java.security.InvalidKeyException: IOException : DerValue.getBigIntegerInternal, not expected 48\nat java.base/sun.security.rsa.RSAKeyFactory.engineGeneratePrivate(RSAKeyFactory.java:252)\nat java.base/java.security.KeyFactory.generatePrivate(KeyFactory.java:390)\nat com.iasec.wallet.service.WalletServiceImpl.encryptPrivate(WalletServiceImpl.java:134)\nat com.iasec.wallet.service.WalletServiceImpl.prueba(WalletServiceImpl.java:50)\nat com.iasec.wallet.controller.WalletController.encrypt1(WalletController.java:43)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:567)\nat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\nat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\nat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\nat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\nat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:681)\nat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\nat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\nat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\nat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\nat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1722)\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\nat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\nat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\nat java.base/java.lang.Thread.run(Thread.java:831)\nCaused by: java.security.InvalidKeyException: IOException : DerValue.getBigIntegerInternal, not expected 48\nat java.base/sun.security.pkcs.PKCS8Key.decode(PKCS8Key.java:133)\nat java.base/sun.security.pkcs.PKCS8Key.(PKCS8Key.java:94)\nat java.base/sun.security.rsa.RSAPrivateCrtKeyImpl.(RSAPrivateCrtKeyImpl.java:152)\nat java.base/sun.security.rsa.RSAPrivateCrtKeyImpl.newKey(RSAPrivateCrtKeyImpl.java:89)\nat java.base/sun.security.rsa.RSAKeyFactory.generatePrivate(RSAKeyFactory.java:343)\nat java.base/sun.security.rsa.RSAKeyFactory.engineGeneratePrivate(RSAKeyFactory.java:248)\n... 54 more\njava.security.spec.InvalidKeySpecException: java.security.InvalidKeyException: IOException: algid parse error, not a sequence\nat java.base/sun.security.rsa.RSAKeyFactory.engineGeneratePublic(RSAKeyFactory.java:240)\nat java.base/java.security.KeyFactory.generatePublic(KeyFactory.java:352)\nat com.iasec.wallet.service.WalletServiceImpl.decryptPublic(WalletServiceImpl.java:209)\nat com.iasec.wallet.service.WalletServiceImpl.prueba(WalletServiceImpl.java:51)\nat com.iasec.wallet.controller.WalletController.encrypt1(WalletController.java:43)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:567)\nat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\nat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\nat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\nat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\nat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:681)\nat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\nat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\nat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\nat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\nat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1722)\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\nat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\nat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\nat java.base/java.lang.Thread.run(Thread.java:831)\nCaused by: java.security.InvalidKeyException: IOException: algid parse error, not a sequence\nat java.base/sun.security.x509.X509Key.decode(X509Key.java:397)\nat java.base/sun.security.x509.X509Key.decode(X509Key.java:402)</p>\n"},{"tags":["java","ajax","api","get"],"comments":[{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":0,"creation_date":1638887632,"post_id":70261839,"comment_id":124203550,"body_markdown":"Interesting. Which JAX-RS implementation are you using? For a start, can you set a fixed-size thread pool to the client - `client = ClientBuilder.executorService(Executors.newFixedThreadPool(10)).build();` and see how it behaves?","body":"Interesting. Which JAX-RS implementation are you using? For a start, can you set a fixed-size thread pool to the client - <code>client = ClientBuilder.executorService(Executors.newFixedThreadPool(1&zwnj;&#8203;0)).build();</code> and see how it behaves?"},{"owner":{"account_id":14906761,"reputation":39,"user_id":10763710,"display_name":"Flytre 7"},"score":0,"creation_date":1638888021,"post_id":70261839,"comment_id":124203718,"body_markdown":"Here&#39;s my gradle dependencies:\n    implementation group: &#39;javax.ws.rs&#39;, name: &#39;javax.ws.rs-api&#39;, version: &#39;2.0&#39;\n    implementation group: &#39;org.jboss.resteasy&#39;, name: &#39;resteasy-client&#39;, version: &#39;4.7.2.Final&#39;\n\nLooks like a very old version of JAX-RS, that might have something to do with it.","body":"Here&#39;s my gradle dependencies:     implementation group: &#39;javax.ws.rs&#39;, name: &#39;javax.ws.rs-api&#39;, version: &#39;2.0&#39;     implementation group: &#39;org.jboss.resteasy&#39;, name: &#39;resteasy-client&#39;, version: &#39;4.7.2.Final&#39;  Looks like a very old version of JAX-RS, that might have something to do with it."}],"owner":{"account_id":14906761,"reputation":39,"user_id":10763710,"display_name":"Flytre 7"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1638886870,"creation_date":1638886870,"question_id":70261839,"body_markdown":"I have the following code:\r\n\r\n    public static Client client = ClientBuilder.newClient();\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        for (int i = 0; i &lt; 100; i++) {\r\n            System.out.println(Thread.activeCount());\r\n            client.target(&quot;https://en.wikipedia.org/wiki/Special:Random&quot;).request().buildGet().submit(new InvocationCallback&lt;Response&gt;() {\r\n\r\n                @Override\r\n                public void completed(Response response) {\r\n                    response.close();\r\n                }\r\n\r\n                @Override\r\n                public void failed(Throwable throwable) {\r\n\r\n                }\r\n            });\r\n\r\n        }\r\n        Thread.sleep(10000L);\r\n        System.out.println(Thread.activeCount());\r\n    }\r\nEach time I call .submit() the client creates a new thread for the new get request that just permanently stays open. The problem with this is that I eventually reach the max # of threads and the program malfunctions because it cannot create a new thread. How do I avoid this problem? \r\n\r\n\r\nOutput:\r\n```\r\n1\r\n2\r\n3\r\n4\r\n...\r\n101\r\n```\r\n\r\n\r\nThe ideal solution would be to make this program single threaded and hang the program until each get-request receives a response. I&#39;m open to using an alternative API if this is not possible with javax.ws.rs.","title":"JAX-RS API Leaking Threads","body":"<p>I have the following code:</p>\n<pre><code>public static Client client = ClientBuilder.newClient();\n\npublic static void main(String[] args) throws InterruptedException {\n    for (int i = 0; i &lt; 100; i++) {\n        System.out.println(Thread.activeCount());\n        client.target(&quot;https://en.wikipedia.org/wiki/Special:Random&quot;).request().buildGet().submit(new InvocationCallback&lt;Response&gt;() {\n\n            @Override\n            public void completed(Response response) {\n                response.close();\n            }\n\n            @Override\n            public void failed(Throwable throwable) {\n\n            }\n        });\n\n    }\n    Thread.sleep(10000L);\n    System.out.println(Thread.activeCount());\n}\n</code></pre>\n<p>Each time I call .submit() the client creates a new thread for the new get request that just permanently stays open. The problem with this is that I eventually reach the max # of threads and the program malfunctions because it cannot create a new thread. How do I avoid this problem?</p>\n<p>Output:</p>\n<pre><code>1\n2\n3\n4\n...\n101\n</code></pre>\n<p>The ideal solution would be to make this program single threaded and hang the program until each get-request receives a response. I'm open to using an alternative API if this is not possible with javax.ws.rs.</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1348938255,"post_id":12654600,"comment_id":17070710,"body_markdown":"Have you looked at the Arrays API?","body":"Have you looked at the Arrays API?"},{"owner":{"account_id":1853886,"reputation":210597,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1348938270,"post_id":12654600,"comment_id":17070718,"body_markdown":"Make your array of type `Integer`. Arrays.sort don&#39;t accept Comparator for primitive type.. Have a look at various methods of [ArrayList](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Arrays.html)","body":"Make your array of type <code>Integer</code>. Arrays.sort don&#39;t accept Comparator for primitive type.. Have a look at various methods of <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Arrays.html\" rel=\"nofollow noreferrer\">ArrayList</a>"}],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1348938265,"creation_date":1348938265,"answer_id":12654628,"question_id":12654600,"body_markdown":"It&#39;s not clear why you&#39;re trying to loop, but the `Arrays.sort` methods operating on *primitive* arrays don&#39;t allow a custom comparator to be specified.\r\n\r\nThe simplest approach would be to sort and then reverse the array. I can&#39;t immediately find a `reverse` method which would take an `int[]` but it would be easy to write your own.","title":"Sorting an int array in descending order is giving &quot;method not applicable for arguments&quot;","body":"<p>It's not clear why you're trying to loop, but the <code>Arrays.sort</code> methods operating on <em>primitive</em> arrays don't allow a custom comparator to be specified.</p>\n\n<p>The simplest approach would be to sort and then reverse the array. I can't immediately find a <code>reverse</code> method which would take an <code>int[]</code> but it would be easy to write your own.</p>\n"},{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1348938274,"creation_date":1348938274,"answer_id":12654630,"question_id":12654600,"body_markdown":"If you look at the [javadoc of Arrays][1], you will see that the only `sort` methods that take a `comparator` as a second parameter are:\r\n\r\n    sort(T[] a, Comparator&lt;? super T&gt; c)\r\n    sort(T[] a, int fromIndex, int toIndex, Comparator&lt;? super T&gt; c)\r\n\r\nIn your case, `int[]` is not a `T[]` (`Integer[]` would be) so you can&#39;t apply those methods.\r\n\r\nYou have (at least) 2 options:\r\n\r\n- sort in ascending order and [reverse the array][2]\r\n- transform the array into an `Integer[]` and use the methods above\r\n\r\n [1]: http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html\r\n [2]: https://stackoverflow.com/questions/9995432/reverse-array-order","title":"Sorting an int array in descending order is giving &quot;method not applicable for arguments&quot;","body":"<p>If you look at the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html\" rel=\"nofollow noreferrer\">javadoc of Arrays</a>, you will see that the only <code>sort</code> methods that take a <code>comparator</code> as a second parameter are:</p>\n\n<pre><code>sort(T[] a, Comparator&lt;? super T&gt; c)\nsort(T[] a, int fromIndex, int toIndex, Comparator&lt;? super T&gt; c)\n</code></pre>\n\n<p>In your case, <code>int[]</code> is not a <code>T[]</code> (<code>Integer[]</code> would be) so you can't apply those methods.</p>\n\n<p>You have (at least) 2 options:</p>\n\n<ul>\n<li>sort in ascending order and <a href=\"https://stackoverflow.com/questions/9995432/reverse-array-order\">reverse the array</a></li>\n<li>transform the array into an <code>Integer[]</code> and use the methods above</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1819410,"reputation":4797,"user_id":1653776,"accept_rate":67,"display_name":"basiljames"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1348938351,"creation_date":1348938351,"answer_id":12654638,"question_id":12654600,"body_markdown":"`Arrays.sort(arr,comparator);` will not work on primitives. The `arr` has to be array of Objects.","title":"Sorting an int array in descending order is giving &quot;method not applicable for arguments&quot;","body":"<p><code>Arrays.sort(arr,comparator);</code> will not work on primitives. The <code>arr</code> has to be array of Objects.</p>\n"},{"tags":[],"owner":{"account_id":368269,"reputation":93629,"user_id":714969,"accept_rate":86,"display_name":"Kevin Bowersox"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1348938443,"creation_date":1348938443,"answer_id":12654651,"question_id":12654600,"body_markdown":"The only sort method that accepts a comparator in the Arrays class requires you to supply an object array.  There is no method within the class with a signature of sort(int[], Comparator)","title":"Sorting an int array in descending order is giving &quot;method not applicable for arguments&quot;","body":"<p>The only sort method that accepts a comparator in the Arrays class requires you to supply an object array.  There is no method within the class with a signature of sort(int[], Comparator)</p>\n"},{"tags":[],"owner":{"account_id":22431405,"reputation":83,"user_id":16637183,"display_name":"CHANDRU R"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638886826,"creation_date":1638886826,"answer_id":70261824,"question_id":12654600,"body_markdown":"Change int Integer while defining an array.\r\nChange `int arr[]={};` to `Integer arr[]={};`\r\nThis will make your code to run","title":"Sorting an int array in descending order is giving &quot;method not applicable for arguments&quot;","body":"<p>Change int Integer while defining an array.\nChange <code>int arr[]={};</code> to <code>Integer arr[]={};</code>\nThis will make your code to run</p>\n"}],"owner":{"account_id":1890212,"reputation":165,"user_id":1708514,"accept_rate":57,"display_name":"xyvyre"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6960,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":12654628,"answer_count":5,"score":3,"last_activity_date":1638886826,"creation_date":1348938034,"question_id":12654600,"body_markdown":"I&#39;m trying to sort an array in descending order in Java using this code:\r\n\r\n    for(int i = 0; i &lt; arr.length; i++) {\r\n       Comparator comparator = Collections.reverseOrder();\r\n       Arrays.sort(arr,comparator);\r\n    }\r\n\r\nBut I get this error:\r\n        \r\n&gt; The method sort(int[]) in the type Arrays is not applicable for the arguments (int[], Comparator)\r\n","title":"Sorting an int array in descending order is giving &quot;method not applicable for arguments&quot;","body":"<p>I'm trying to sort an array in descending order in Java using this code:</p>\n\n<pre><code>for(int i = 0; i &lt; arr.length; i++) {\n   Comparator comparator = Collections.reverseOrder();\n   Arrays.sort(arr,comparator);\n}\n</code></pre>\n\n<p>But I get this error:</p>\n\n<blockquote>\n  <p>The method sort(int[]) in the type Arrays is not applicable for the arguments (int[], Comparator)</p>\n</blockquote>\n"},{"tags":["java","design-patterns"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1638840475,"post_id":70253866,"comment_id":124189785,"body_markdown":"An instance variable?","body":"An instance variable?"},{"owner":{"account_id":5252988,"reputation":1450,"user_id":4196620,"display_name":"kendavidson"},"score":0,"creation_date":1638885272,"post_id":70253866,"comment_id":124202444,"body_markdown":"What&#39;s the end goal? To call `ParentDao` and get parent with children or call `ChildDao` and get parent with children (which doesn&#39;t make much sense).  I would assume you&#39;d call `ParentDao` which would then in turn call `ChildDao` to populate the list?  Maintaining the parent in the `ChildDao` would require caching, and you don&#39;t have a reference to `Child { Parent parent }` so what would you do with the `Parent` after?","body":"What&#39;s the end goal? To call <code>ParentDao</code> and get parent with children or call <code>ChildDao</code> and get parent with children (which doesn&#39;t make much sense).  I would assume you&#39;d call <code>ParentDao</code> which would then in turn call <code>ChildDao</code> to populate the list?  Maintaining the parent in the <code>ChildDao</code> would require caching, and you don&#39;t have a reference to <code>Child { Parent parent }</code> so what would you do with the <code>Parent</code> after?"},{"owner":{"account_id":10459329,"reputation":251,"user_id":7710603,"accept_rate":62,"display_name":"RookieDev"},"score":0,"creation_date":1638886344,"post_id":70253866,"comment_id":124202954,"body_markdown":"I want to be able to save some context between each call to `mapObjectModel`.\n\nThe DB willl return something like\n&lt;BR&gt;\nParent         Child &lt;BR&gt;\n1                   1.      &lt;BR&gt;\n1                   2       &lt;BR&gt;  \n\nWhat my SpecificDAO should return is an object of Parent with a List&lt;Child&gt; so every time the call is made to`mapObjectModel` with each row I want to know if I already have the Parent object created in which case I can keep adding childs","body":"I want to be able to save some context between each call to <code>mapObjectModel</code>.  The DB willl return something like &lt;BR&gt; Parent         Child &lt;BR&gt; 1                   1.      &lt;BR&gt; 1                   2       &lt;BR&gt;    What my SpecificDAO should return is an object of Parent with a List&lt;Child&gt; so every time the call is made to<code>mapObjectModel</code> with each row I want to know if I already have the Parent object created in which case I can keep adding childs"}],"owner":{"account_id":10459329,"reputation":251,"user_id":7710603,"accept_rate":62,"display_name":"RookieDev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1638886647,"creation_date":1638839954,"question_id":70253866,"body_markdown":"We&#39;ve inherited some code where there is a DAO pattern implemented as such:\r\n\r\n\r\n----------\r\n\r\n\r\n    interface DomainMapper&lt;S, T&gt; {\r\n        T mapObjectModel(S source);\r\n    }\r\n    public abstract class AbstractDao&lt;Source, Target&gt; implements DomainMapper&lt;Source, Target&gt; {\r\n        protected List&lt;T&gt; execute(SqlParameter params...) {\r\n            // Executes some query\r\n            public S mapRow(ResultSet rs, int rowNum) {\r\n                // does the mapping\r\n                S source = super.mapRow(rs, rowNum);\r\n                T value = mapObjectModel(s);\r\n            }\r\n        }\r\n    }\r\n    public class SpecificDAO extends AbstractDAO&lt;Source, Target&gt; {\r\n        // Other functions\r\n        public Target mapObjectModel(Source s) {\r\n             // Mapping implementation here\r\n        }\r\n    }\r\n\r\nWe have about 20 DAO&#39;s implemented in the similar fashion.\r\n\r\nHere&#39;s the question\r\n\r\n 1. There is a specific DAO that needs some kind of state to persist between calls.\r\n    I mean, between every call to `mapObjectModel()` with the Source, I need to store some value that I will use during the next call.\r\n for e.g. imagine Parent - Child relation, the mapObjectModel will be called for every child with the Parent and I want to create an Object graph something like below.\r\n\r\n    `public class Parent {\r\n        private List&lt;Child&gt; children;\r\n    }`\r\n\r\nso, I want to create a &quot;context&quot; that I can refer to in the next call and get the Parent and add children to it.\r\n\r\nWhat is the best and easy way to update the `mapObjectModel()` to carry state information between calls and with minimal change to the existing DAO&#39;s?\r\n\r\nIs there a pattern that can solve this problem for me?\r\n\r\nThanks\r\n\r\nEDIT:\r\n\r\nI want to be able to save some context between each call to `mapObjectModel`.\r\n\r\nThe DB willl return something like\r\n\r\n\r\n----------\r\n\r\n\r\nParent         Child\r\n\r\n\r\n----------\r\n\r\n\r\n1                   1\r\n\r\n\r\n----------\r\n\r\n\r\n1                   2       \r\n\r\n\r\n----------\r\n\r\n\r\nWhat my SpecificDAO should return is an object of Parent with a List&lt;Child&gt; so every time the call is made to`mapObjectModel` with each row I want to know if I already have the Parent object created in which case I can keep adding childs\r\n\r\n","title":"Design Pattern question - Implementing DAO pattern with Modern Java","body":"<p>We've inherited some code where there is a DAO pattern implemented as such:</p>\n<hr />\n<pre><code>interface DomainMapper&lt;S, T&gt; {\n    T mapObjectModel(S source);\n}\npublic abstract class AbstractDao&lt;Source, Target&gt; implements DomainMapper&lt;Source, Target&gt; {\n    protected List&lt;T&gt; execute(SqlParameter params...) {\n        // Executes some query\n        public S mapRow(ResultSet rs, int rowNum) {\n            // does the mapping\n            S source = super.mapRow(rs, rowNum);\n            T value = mapObjectModel(s);\n        }\n    }\n}\npublic class SpecificDAO extends AbstractDAO&lt;Source, Target&gt; {\n    // Other functions\n    public Target mapObjectModel(Source s) {\n         // Mapping implementation here\n    }\n}\n</code></pre>\n<p>We have about 20 DAO's implemented in the similar fashion.</p>\n<p>Here's the question</p>\n<ol>\n<li><p>There is a specific DAO that needs some kind of state to persist between calls.\nI mean, between every call to <code>mapObjectModel()</code> with the Source, I need to store some value that I will use during the next call.\nfor e.g. imagine Parent - Child relation, the mapObjectModel will be called for every child with the Parent and I want to create an Object graph something like below.</p>\n<p><code>public class Parent { private List&lt;Child&gt; children; }</code></p>\n</li>\n</ol>\n<p>so, I want to create a &quot;context&quot; that I can refer to in the next call and get the Parent and add children to it.</p>\n<p>What is the best and easy way to update the <code>mapObjectModel()</code> to carry state information between calls and with minimal change to the existing DAO's?</p>\n<p>Is there a pattern that can solve this problem for me?</p>\n<p>Thanks</p>\n<p>EDIT:</p>\n<p>I want to be able to save some context between each call to <code>mapObjectModel</code>.</p>\n<p>The DB willl return something like</p>\n<hr />\n<p>Parent         Child</p>\n<hr />\n<p>1                   1</p>\n<hr />\n<p>1                   2</p>\n<hr />\n<p>What my SpecificDAO should return is an object of Parent with a List so every time the call is made to<code>mapObjectModel</code> with each row I want to know if I already have the Parent object created in which case I can keep adding childs</p>\n"},{"tags":["java","sql","postgresql"],"comments":[{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1357130007,"post_id":14122057,"comment_id":19547423,"body_markdown":"I suggest using the Javadoc from Java 7 (though it might not make that much difference)","body":"I suggest using the Javadoc from Java 7 (though it might not make that much difference)"}],"answers":[{"tags":[],"owner":{"account_id":985766,"reputation":2525,"user_id":1004307,"accept_rate":100,"display_name":"TechSpellBound"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1357130299,"creation_date":1357129996,"answer_id":14122118,"question_id":14122057,"body_markdown":"No. It throws `SQLException` if the column does not exist.\r\n\r\nIf you are considering that the column exists and all its values are null, then it will return an array of null values.","title":"Can ResultSet.getArray(colName) return null?","body":"<p>No. It throws <code>SQLException</code> if the column does not exist.</p>\n\n<p>If you are considering that the column exists and all its values are null, then it will return an array of null values.</p>\n"},{"tags":[],"owner":{"account_id":767188,"reputation":186,"user_id":789966,"display_name":"Swen Th&#252;mmler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638885932,"creation_date":1638885932,"answer_id":70261598,"question_id":14122057,"body_markdown":"Yes, if the column is NULL in the database, ResultSet::getArray will return null.","title":"Can ResultSet.getArray(colName) return null?","body":"<p>Yes, if the column is NULL in the database, ResultSet::getArray will return null.</p>\n"}],"owner":{"account_id":447455,"reputation":61,"user_id":841081,"display_name":"atuls"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1019,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1638885932,"creation_date":1357129770,"question_id":14122057,"body_markdown":"http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html#getArray(java.lang.String)\r\n\r\nDoesn&#39;t seem to mention the possibility.\r\n\r\n","title":"Can ResultSet.getArray(colName) return null?","body":"<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html#getArray(java.lang.String)\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html#getArray(java.lang.String)</a></p>\n\n<p>Doesn't seem to mention the possibility.</p>\n"},{"tags":["java","android","google-cloud-firestore"],"comments":[{"owner":{"account_id":6023206,"reputation":7990,"user_id":4729721,"display_name":"a_local_nobody"},"score":1,"creation_date":1638879922,"post_id":70259918,"comment_id":124200137,"body_markdown":"Does this answer your question? [What is a NullPointerException, and how do I fix it?](https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it\">What is a NullPointerException, and how do I fix it?</a>"},{"owner":{"account_id":6023206,"reputation":7990,"user_id":4729721,"display_name":"a_local_nobody"},"score":0,"creation_date":1638880010,"post_id":70259918,"comment_id":124200157,"body_markdown":"why are you doing this in onCreate ? if this is a fragment use onViewCreated","body":"why are you doing this in onCreate ? if this is a fragment use onViewCreated"},{"owner":{"account_id":19765318,"reputation":125,"user_id":14473487,"display_name":"IceFox_Programming"},"score":0,"creation_date":1638881306,"post_id":70259918,"comment_id":124200676,"body_markdown":"The problem is that the value from the field &quot;group_name&quot; doesn&#39;t get added to grouplist, so it stays null. That causes the NullPointerException. So no that doesn&#39;t answer my question.","body":"The problem is that the value from the field &quot;group_name&quot; doesn&#39;t get added to grouplist, so it stays null. That causes the NullPointerException. So no that doesn&#39;t answer my question."},{"owner":{"account_id":19765318,"reputation":125,"user_id":14473487,"display_name":"IceFox_Programming"},"score":0,"creation_date":1638881327,"post_id":70259918,"comment_id":124200685,"body_markdown":"Oncreate is normally not an issue.","body":"Oncreate is normally not an issue."},{"owner":{"account_id":19765318,"reputation":125,"user_id":14473487,"display_name":"IceFox_Programming"},"score":0,"creation_date":1638882261,"post_id":70259918,"comment_id":124201039,"body_markdown":"@a_local_nobody I added screenshots to explain the problem better","body":"@a_local_nobody I added screenshots to explain the problem better"},{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":0,"creation_date":1638882729,"post_id":70259918,"comment_id":124201243,"body_markdown":"Why don&#39;t you move your `getData` log first so you can see what data is in the snapshot?","body":"Why don&#39;t you move your <code>getData</code> log first so you can see what data is in the snapshot?"},{"owner":{"account_id":19765318,"reputation":125,"user_id":14473487,"display_name":"IceFox_Programming"},"score":0,"creation_date":1638883290,"post_id":70259918,"comment_id":124201474,"body_markdown":"@TylerV Already tested that and it clearly shows that it retrieves all the data and you can see the field and it&#39;s value. There is just something wrong with getString.","body":"@TylerV Already tested that and it clearly shows that it retrieves all the data and you can see the field and it&#39;s value. There is just something wrong with getString."},{"owner":{"account_id":19765318,"reputation":125,"user_id":14473487,"display_name":"IceFox_Programming"},"score":0,"creation_date":1638883576,"post_id":70259918,"comment_id":124201600,"body_markdown":"@TylerV I added the result as image","body":"@TylerV I added the result as image"},{"owner":{"account_id":19765318,"reputation":125,"user_id":14473487,"display_name":"IceFox_Programming"},"score":0,"creation_date":1638893872,"post_id":70259918,"comment_id":124206304,"body_markdown":"@a_local_nobody I completely misunderstood what a nullpointerexception was. I thought that the adapter was staying null but it was exactly gridview that was null, because I gave it the wrong ID. So your answer did end up being useful. It were 2 problems at once so I got confused.","body":"@a_local_nobody I completely misunderstood what a nullpointerexception was. I thought that the adapter was staying null but it was exactly gridview that was null, because I gave it the wrong ID. So your answer did end up being useful. It were 2 problems at once so I got confused."}],"answers":[{"tags":[],"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1638885840,"creation_date":1638885161,"answer_id":70261351,"question_id":70259918,"body_markdown":"It looks like the issue is that you have created a document that is more nested than you intended, and includes the document id in the document itself. You created something like this (which you can see in your Firestore screenshot, as well as the log output you posted):\r\n \r\n    collection[docId] = {docId={group_name=Test}}\r\n    \r\nwhen I think you intended to create\r\n\r\n    collection[docId] = {group_name=Test}\r\n    \r\n    \r\nTo fix this, you would just change `document(key).set(update)` to `document(key).set(groupData)` in `CreateNewGroup`. \r\n\r\nThere are several useful examples of how to set and update document data in the [Firestore docs](https://firebase.google.com/docs/firestore/manage-data/add-data).\r\n\r\nAlternately, if this is your intended document structure you would need to change how you retrieve `group_name`.\r\n\r\nInstead of\r\n\r\n    String group = documentSnapshot.getString(&quot;group_name&quot;);\r\n    \r\nyou would need something like this to first retrieve the nested map, then get the `group_name` attribute from it\r\n\r\n    String group = documentSnapshot.getData().get(key).get(&quot;group_name&quot;);","title":"Android studio Firebase Firestore cann&#39;t retrieve field data","body":"<p>It looks like the issue is that you have created a document that is more nested than you intended, and includes the document id in the document itself. You created something like this (which you can see in your Firestore screenshot, as well as the log output you posted):</p>\n<pre><code>collection[docId] = {docId={group_name=Test}}\n</code></pre>\n<p>when I think you intended to create</p>\n<pre><code>collection[docId] = {group_name=Test}\n</code></pre>\n<p>To fix this, you would just change <code>document(key).set(update)</code> to <code>document(key).set(groupData)</code> in <code>CreateNewGroup</code>.</p>\n<p>There are several useful examples of how to set and update document data in the <a href=\"https://firebase.google.com/docs/firestore/manage-data/add-data\" rel=\"nofollow noreferrer\">Firestore docs</a>.</p>\n<p>Alternately, if this is your intended document structure you would need to change how you retrieve <code>group_name</code>.</p>\n<p>Instead of</p>\n<pre><code>String group = documentSnapshot.getString(&quot;group_name&quot;);\n</code></pre>\n<p>you would need something like this to first retrieve the nested map, then get the <code>group_name</code> attribute from it</p>\n<pre><code>String group = documentSnapshot.getData().get(key).get(&quot;group_name&quot;);\n</code></pre>\n"}],"owner":{"account_id":19765318,"reputation":125,"user_id":14473487,"display_name":"IceFox_Programming"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":590,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":70261351,"answer_count":1,"score":1,"last_activity_date":1638885840,"creation_date":1638879084,"question_id":70259918,"body_markdown":"I&#39;m trying to retrieve the value from the string field group_name in firestore but I get a NullPointerException because the value doesn&#39;t get retrieved and added to an arraylist. So the arraylist is empty. I&#39;m trying to get the data within OnCreateView, because I&#39;m working with fragments. Adding data works perfectly (createNewGroup()).\r\n [![Error][1]][1]\r\n\r\n[![Firestore][2]][2]\r\n\r\n        @Override\r\n    public void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        mAuth = FirebaseAuth.getInstance();\r\n        currentUser = mAuth.getCurrentUser();\r\n        db = FirebaseFirestore.getInstance();\r\n        //FirebaseFirestoreSettings settings = new FirebaseFirestoreSettings.Builder().setPersistenceEnabled(true).setCacheSizeBytes(FirebaseFirestoreSettings.CACHE_SIZE_UNLIMITED).build();\r\n        //db.setFirestoreSettings(settings);\r\n    }\r\n\r\n\r\n\r\n        groupList = new ArrayList&lt;&gt;();\r\n        gridView = view.findViewById(R.id.notes_gridview);\r\n        //Source source = Source.CACHE;\r\n        //https://firebase.google.com/docs/firestore/query-data/get-data#source_options\r\n        db.collection(&quot;groups&quot;).document(key).get().addOnSuccessListener(new OnSuccessListener&lt;DocumentSnapshot&gt;() {\r\n            @Override\r\n            public void onSuccess(DocumentSnapshot documentSnapshot) {\r\n                if (documentSnapshot.exists()) {\r\n                    groupList.add(documentSnapshot.getString(&quot;group_name&quot;));\r\n                    Log.w(TAG, &quot;DocumentSnapshot data: &quot; + documentSnapshot.getData());\r\n                    adpter = new GroupAdapter(getActivity(), groupList);\r\n                    gridView.setAdapter(adpter);\r\n                    mProgressCircle.setVisibility(View.INVISIBLE);\r\n                } else {\r\n                    Log.w(TAG, &quot;No such document&quot;);\r\n                }\r\n            }\r\n        }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Log.w(TAG, &quot;Error getting documents: &quot; + e.getMessage());\r\n            }\r\n        });\r\n\r\n    private void CreateNewGroup(String groupName) {\r\n        HashMap&lt;String, String&gt; groupData = new HashMap&lt;&gt;();\r\n        groupData.put(&quot;group_name&quot;, groupName);\r\n        HashMap&lt;String, Object&gt; update = new HashMap&lt;&gt;();\r\n        update.put(key, groupData);\r\n        db.collection(&quot;groups&quot;).document(key).set(update).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\r\n            @Override\r\n            public void onSuccess(Void unused) {\r\n                Log.w(TAG, &quot;New group added successfully to Firestore&quot;);\r\n                ((NavigationHost) getActivity()).navigateTo(new MyGroupsFragment(), false);\r\n            }\r\n        }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Toast.makeText(getActivity(), &quot;Failed adding new group to firestore&quot;, Toast.LENGTH_LONG).show();\r\n            }\r\n        });\r\n    }\r\n\r\n\r\nUPDATE:\r\n[![getfieldValue][3]][3]\r\n\r\n[![nullpointerexception][4]][4]\r\n\r\n[![Getdata][5]][5]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nOCm6.png\r\n  [2]: https://i.stack.imgur.com/VqvqD.png\r\n  [3]: https://i.stack.imgur.com/NJBey.png\r\n  [4]: https://i.stack.imgur.com/TIXt7.png\r\n  [5]: https://i.stack.imgur.com/XhuAf.png","title":"Android studio Firebase Firestore cann&#39;t retrieve field data","body":"<p>I'm trying to retrieve the value from the string field group_name in firestore but I get a NullPointerException because the value doesn't get retrieved and added to an arraylist. So the arraylist is empty. I'm trying to get the data within OnCreateView, because I'm working with fragments. Adding data works perfectly (createNewGroup()).\n<a href=\"https://i.stack.imgur.com/nOCm6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nOCm6.png\" alt=\"Error\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/VqvqD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VqvqD.png\" alt=\"Firestore\" /></a></p>\n<pre><code>    @Override\npublic void onCreate(@Nullable Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n\n    mAuth = FirebaseAuth.getInstance();\n    currentUser = mAuth.getCurrentUser();\n    db = FirebaseFirestore.getInstance();\n    //FirebaseFirestoreSettings settings = new FirebaseFirestoreSettings.Builder().setPersistenceEnabled(true).setCacheSizeBytes(FirebaseFirestoreSettings.CACHE_SIZE_UNLIMITED).build();\n    //db.setFirestoreSettings(settings);\n}\n\n\n\n    groupList = new ArrayList&lt;&gt;();\n    gridView = view.findViewById(R.id.notes_gridview);\n    //Source source = Source.CACHE;\n    //https://firebase.google.com/docs/firestore/query-data/get-data#source_options\n    db.collection(&quot;groups&quot;).document(key).get().addOnSuccessListener(new OnSuccessListener&lt;DocumentSnapshot&gt;() {\n        @Override\n        public void onSuccess(DocumentSnapshot documentSnapshot) {\n            if (documentSnapshot.exists()) {\n                groupList.add(documentSnapshot.getString(&quot;group_name&quot;));\n                Log.w(TAG, &quot;DocumentSnapshot data: &quot; + documentSnapshot.getData());\n                adpter = new GroupAdapter(getActivity(), groupList);\n                gridView.setAdapter(adpter);\n                mProgressCircle.setVisibility(View.INVISIBLE);\n            } else {\n                Log.w(TAG, &quot;No such document&quot;);\n            }\n        }\n    }).addOnFailureListener(new OnFailureListener() {\n        @Override\n        public void onFailure(@NonNull Exception e) {\n            Log.w(TAG, &quot;Error getting documents: &quot; + e.getMessage());\n        }\n    });\n\nprivate void CreateNewGroup(String groupName) {\n    HashMap&lt;String, String&gt; groupData = new HashMap&lt;&gt;();\n    groupData.put(&quot;group_name&quot;, groupName);\n    HashMap&lt;String, Object&gt; update = new HashMap&lt;&gt;();\n    update.put(key, groupData);\n    db.collection(&quot;groups&quot;).document(key).set(update).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\n        @Override\n        public void onSuccess(Void unused) {\n            Log.w(TAG, &quot;New group added successfully to Firestore&quot;);\n            ((NavigationHost) getActivity()).navigateTo(new MyGroupsFragment(), false);\n        }\n    }).addOnFailureListener(new OnFailureListener() {\n        @Override\n        public void onFailure(@NonNull Exception e) {\n            Toast.makeText(getActivity(), &quot;Failed adding new group to firestore&quot;, Toast.LENGTH_LONG).show();\n        }\n    });\n}\n</code></pre>\n<p>UPDATE:\n<a href=\"https://i.stack.imgur.com/NJBey.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NJBey.png\" alt=\"getfieldValue\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/TIXt7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TIXt7.png\" alt=\"nullpointerexception\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/XhuAf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XhuAf.png\" alt=\"Getdata\" /></a></p>\n"},{"tags":["java","process"],"answers":[{"tags":[],"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1382899498,"creation_date":1382899095,"answer_id":19621872,"question_id":19621838,"body_markdown":"The complete first argument of `exec` is being interpreted as the executable. Use\r\n\r\n    p = rt.exec(new String[] {&quot;winrar.exe&quot;, &quot;x&quot;, &quot;h:\\\\myjar.jar&quot;, &quot;*.*&quot;, &quot;h:\\\\new&quot; }\r\n                null, \r\n                dir);","title":"CreateProcess error=2, The system cannot find the file specified","body":"<p>The complete first argument of <code>exec</code> is being interpreted as the executable. Use</p>\n\n<pre><code>p = rt.exec(new String[] {\"winrar.exe\", \"x\", \"h:\\\\myjar.jar\", \"*.*\", \"h:\\\\new\" }\n            null, \n            dir);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":168238,"reputation":1432,"user_id":393569,"accept_rate":36,"display_name":"viator"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1382902064,"creation_date":1382902064,"answer_id":19622433,"question_id":19621838,"body_markdown":"The `dir` you specified is a working directory of running process - it doesn&#39;t help to find executable. Use `cmd /c winrar ...` to run process looking for executable in __PATH__ or try to use _absolute_ path to _winrar_.","title":"CreateProcess error=2, The system cannot find the file specified","body":"<p>The <code>dir</code> you specified is a working directory of running process - it doesn't help to find executable. Use <code>cmd /c winrar ...</code> to run process looking for executable in <strong>PATH</strong> or try to use <em>absolute</em> path to <em>winrar</em>.</p>\n"},{"tags":[],"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":51,"is_accepted":true,"score":51,"last_activity_date":1435183745,"creation_date":1382905399,"answer_id":19623090,"question_id":19621838,"body_markdown":"Assuming that `winrar.exe` is in the `PATH`, then `Runtime.exec` is capable of finding it, if it is not, you will need to supply the fully qualified path to it, for example, assuming `winrar.exe` is installed in `C:/Program Files/WinRAR` you would need to use something like...\r\n\r\n    p=r.exec(&quot;C:/Program Files/WinRAR/winrar x h:\\\\myjar.jar *.* h:\\\\new&quot;);\r\n\r\nPersonally, I would recommend that you use `ProcessBuilder` as it has some additional configuration abilities amongst other things.  Where possible, you should also separate your command and parameters into separate `String` elements, it deals with things like spaces much better then a single `String` variable, for example...\r\n\r\n    ProcessBuilder pb = new ProcessBuilder(\r\n        &quot;C:/Program Files/WinRAR/winrar&quot;,\r\n        &quot;x&quot;,\r\n        &quot;myjar.jar&quot;,\r\n        &quot;*.*&quot;,\r\n        &quot;new&quot;);\r\n    pb.directory(new File(&quot;H:/&quot;));\r\n    pb. redirectErrorStream(true);\r\n\r\n    Process p = pb.start();\r\n\r\nDon&#39;t forget to read the contents of the `InputStream` from the process, as failing to do so may stall the process","title":"CreateProcess error=2, The system cannot find the file specified","body":"<p>Assuming that <code>winrar.exe</code> is in the <code>PATH</code>, then <code>Runtime.exec</code> is capable of finding it, if it is not, you will need to supply the fully qualified path to it, for example, assuming <code>winrar.exe</code> is installed in <code>C:/Program Files/WinRAR</code> you would need to use something like...</p>\n\n<pre><code>p=r.exec(\"C:/Program Files/WinRAR/winrar x h:\\\\myjar.jar *.* h:\\\\new\");\n</code></pre>\n\n<p>Personally, I would recommend that you use <code>ProcessBuilder</code> as it has some additional configuration abilities amongst other things.  Where possible, you should also separate your command and parameters into separate <code>String</code> elements, it deals with things like spaces much better then a single <code>String</code> variable, for example...</p>\n\n<pre><code>ProcessBuilder pb = new ProcessBuilder(\n    \"C:/Program Files/WinRAR/winrar\",\n    \"x\",\n    \"myjar.jar\",\n    \"*.*\",\n    \"new\");\npb.directory(new File(\"H:/\"));\npb. redirectErrorStream(true);\n\nProcess p = pb.start();\n</code></pre>\n\n<p>Don't forget to read the contents of the <code>InputStream</code> from the process, as failing to do so may stall the process</p>\n"},{"tags":[],"owner":{"account_id":4469637,"reputation":473,"user_id":3636293,"display_name":"EagleEye1984"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1622643927,"creation_date":1479367205,"answer_id":40648879,"question_id":19621838,"body_markdown":"I used ProcessBuilder but had the same issue. The issue was with using command as one String line (like I would type it in cmd) instead of String array. In example from above. If I ran\r\n\r\n    ProcessBuilder pb = \r\n       new ProcessBuilder(&quot;C:/Program Files/WinRAR/winrar x myjar.jar *.* new&quot;);\r\n    pb.directory(new File(&quot;H:/&quot;));\r\n    pb.redirectErrorStream(true);\r\n    \r\n    Process p = pb.start();\r\n\r\nI got an error. But if I ran\r\n\r\n    ProcessBuilder pb = \r\n       new ProcessBuilder(&quot;C:/Program Files/WinRAR/winrar&quot;, &quot;x&quot;, &quot;myjar.jar&quot;, &quot;*.*&quot;, &quot;new&quot;);\r\n    pb.directory(new File(&quot;H:/&quot;));\r\n    pb.redirectErrorStream(true);\r\n    \r\n    Process p = pb.start();\r\n\r\neverything was OK.","title":"CreateProcess error=2, The system cannot find the file specified","body":"<p>I used ProcessBuilder but had the same issue. The issue was with using command as one String line (like I would type it in cmd) instead of String array. In example from above. If I ran</p>\n<pre><code>ProcessBuilder pb = \n   new ProcessBuilder(&quot;C:/Program Files/WinRAR/winrar x myjar.jar *.* new&quot;);\npb.directory(new File(&quot;H:/&quot;));\npb.redirectErrorStream(true);\n\nProcess p = pb.start();\n</code></pre>\n<p>I got an error. But if I ran</p>\n<pre><code>ProcessBuilder pb = \n   new ProcessBuilder(&quot;C:/Program Files/WinRAR/winrar&quot;, &quot;x&quot;, &quot;myjar.jar&quot;, &quot;*.*&quot;, &quot;new&quot;);\npb.directory(new File(&quot;H:/&quot;));\npb.redirectErrorStream(true);\n\nProcess p = pb.start();\n</code></pre>\n<p>everything was OK.</p>\n"},{"tags":[],"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1486381659,"creation_date":1486381659,"answer_id":42067040,"question_id":19621838,"body_markdown":"My recomendation is to keep the `getRuntime().exec` because `exec` uses the `ProcessBuilder`.\r\n\r\nTry\r\n\r\n     p=r.exec(new String[] {&quot;winrar&quot;, &quot;x&quot;, &quot;h:\\\\myjar.jar&quot;, &quot;*.*&quot;, &quot;h:\\\\new&quot;}, null, dir);\r\n\r\n","title":"CreateProcess error=2, The system cannot find the file specified","body":"<p>My recomendation is to keep the <code>getRuntime().exec</code> because <code>exec</code> uses the <code>ProcessBuilder</code>.</p>\n\n<p>Try</p>\n\n<pre><code> p=r.exec(new String[] {\"winrar\", \"x\", \"h:\\\\myjar.jar\", \"*.*\", \"h:\\\\new\"}, null, dir);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":326581,"reputation":406,"user_id":648410,"display_name":"Kristiaan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638885694,"creation_date":1638885694,"answer_id":70261521,"question_id":19621838,"body_markdown":"Either way worked for me: Runtime.getRuntime().exec(...) or using the ProcessBuilder. Still for some calls it still failed with the same error as stated in the original question: &quot;CreateProcess error=2, The system cannot find the file specified&quot;. On closer inspection, that was because I was executing a command file that made use of current directory references (%~dp0). Apparently they did not work, even when calling the command from the same directory. Using absolute paths solved the problem.","title":"CreateProcess error=2, The system cannot find the file specified","body":"<p>Either way worked for me: Runtime.getRuntime().exec(...) or using the ProcessBuilder. Still for some calls it still failed with the same error as stated in the original question: &quot;CreateProcess error=2, The system cannot find the file specified&quot;. On closer inspection, that was because I was executing a command file that made use of current directory references (%~dp0). Apparently they did not work, even when calling the command from the same directory. Using absolute paths solved the problem.</p>\n"}],"owner":{"account_id":1725244,"reputation":511,"user_id":1580087,"accept_rate":44,"display_name":"Trijit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":309133,"favorite_count":0,"down_vote_count":0,"up_vote_count":38,"accepted_answer_id":19623090,"answer_count":6,"score":38,"last_activity_date":1638885694,"creation_date":1382898916,"question_id":19621838,"body_markdown":"I am writing a program in java which would execute winrar and unzip a jar file for me placed in `h:\\myjar.jar` into the folder `h:\\new`. My java code goes something like this\r\n\r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    \r\n    public class MainClass {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    \t\tRuntime r = Runtime.getRuntime();\r\n    \t\tProcess p = null;\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\tFile dir = new File(&quot;C:/Program Files/WinRAR&quot;);\r\n    \t\t\tp = r.exec(&quot;winrar x h:\\\\myjar.jar *.* h:\\\\new&quot;, null, dir);\r\n    \t\t} catch (IOException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nWhen I execute this, I am getting this error\r\n\r\n    java.io.IOException: Cannot run program &quot;winrar&quot; (in directory &quot;C:\\Program Files\\WinRAR&quot;): CreateProcess error=2, The system cannot find the file specified\r\n    \tat java.lang.ProcessBuilder.start(Unknown Source)\r\n    \tat java.lang.Runtime.exec(Unknown Source)\r\n    \tat java.lang.Runtime.exec(Unknown Source)\r\n    \tat MainClass.main(MainClass.java:16)\r\n    Caused by: java.io.IOException: CreateProcess error=2, The system cannot find the file specified\r\n    \tat java.lang.ProcessImpl.create(Native Method)\r\n    \tat java.lang.ProcessImpl.&lt;init&gt;(Unknown Source)\r\n    \tat java.lang.ProcessImpl.start(Unknown Source)\r\n    \t... 4 more\r\n\r\n\r\nCan anyone tell me why am I encountering such a problem. What is the change I need to incorporate in code so that it works?\r\n","title":"CreateProcess error=2, The system cannot find the file specified","body":"<p>I am writing a program in java which would execute winrar and unzip a jar file for me placed in <code>h:\\myjar.jar</code> into the folder <code>h:\\new</code>. My java code goes something like this</p>\n\n<pre><code>import java.io.File;\nimport java.io.IOException;\n\npublic class MainClass {\n\n    public static void main(String[] args) {\n\n        Runtime r = Runtime.getRuntime();\n        Process p = null;\n\n        try {\n            File dir = new File(\"C:/Program Files/WinRAR\");\n            p = r.exec(\"winrar x h:\\\\myjar.jar *.* h:\\\\new\", null, dir);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>When I execute this, I am getting this error</p>\n\n<pre><code>java.io.IOException: Cannot run program \"winrar\" (in directory \"C:\\Program Files\\WinRAR\"): CreateProcess error=2, The system cannot find the file specified\n    at java.lang.ProcessBuilder.start(Unknown Source)\n    at java.lang.Runtime.exec(Unknown Source)\n    at java.lang.Runtime.exec(Unknown Source)\n    at MainClass.main(MainClass.java:16)\nCaused by: java.io.IOException: CreateProcess error=2, The system cannot find the file specified\n    at java.lang.ProcessImpl.create(Native Method)\n    at java.lang.ProcessImpl.&lt;init&gt;(Unknown Source)\n    at java.lang.ProcessImpl.start(Unknown Source)\n    ... 4 more\n</code></pre>\n\n<p>Can anyone tell me why am I encountering such a problem. What is the change I need to incorporate in code so that it works?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8208,"page":1784,"page_size":100}
