{"items":[{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1659622229,"creation_date":1659622229,"answer_id":73237408,"question_id":73237351,"body_markdown":"From [the docs](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#whenComplete-java.util.function.BiConsumer-) (emphasis mine)\r\n\r\n&gt;     public CompletableFuture&lt;T&gt; whenComplete(BiConsumer&lt;? super T,? super Throwable&gt; action)\r\n&gt;\r\n&gt; Description copied from interface: `CompletionStage`\r\n&gt;\r\n&gt; Returns a new `CompletionStage` with the same result or exception as this stage, that executes the given action when this stage completes.\r\n&gt;\r\n&gt; When this stage is complete, the given action is invoked with the result (or `null` if none) and the exception (or `null` if none) of this stage as arguments. The returned stage is completed when the action returns. **If the supplied action itself encounters an exception, then the returned stage exceptionally completes with this exception unless this stage also completed exceptionally.**\r\n\r\n`whenComplete` returns a new `CompletableFuture`. `CompletableFuture` keeps track of what exception (if any) has occurred and expects you to deal with it. By ignoring the return value, you&#39;re suppressing the exception.\r\n\r\nTo wait on the result of the future, or throw if it throws, use [`join`](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#join--).\r\n\r\n```\r\nc.whenComplete((unused, throwable) -&gt; {\r\n  System.out.println((5/0));\r\n  throw new RuntimeException(&quot;I am throwing an exception&quot;);\r\n}).join();\r\n```","title":"Exception is not being logged/throwed inside of completable future","body":"<p>From <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#whenComplete-java.util.function.BiConsumer-\" rel=\"nofollow noreferrer\">the docs</a> (emphasis mine)</p>\n<blockquote>\n<pre><code>public CompletableFuture&lt;T&gt; whenComplete(BiConsumer&lt;? super T,? super Throwable&gt; action)\n</code></pre>\n<p>Description copied from interface: <code>CompletionStage</code></p>\n<p>Returns a new <code>CompletionStage</code> with the same result or exception as this stage, that executes the given action when this stage completes.</p>\n<p>When this stage is complete, the given action is invoked with the result (or <code>null</code> if none) and the exception (or <code>null</code> if none) of this stage as arguments. The returned stage is completed when the action returns. <strong>If the supplied action itself encounters an exception, then the returned stage exceptionally completes with this exception unless this stage also completed exceptionally.</strong></p>\n</blockquote>\n<p><code>whenComplete</code> returns a new <code>CompletableFuture</code>. <code>CompletableFuture</code> keeps track of what exception (if any) has occurred and expects you to deal with it. By ignoring the return value, you're suppressing the exception.</p>\n<p>To wait on the result of the future, or throw if it throws, use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#join--\" rel=\"nofollow noreferrer\"><code>join</code></a>.</p>\n<pre><code>c.whenComplete((unused, throwable) -&gt; {\n  System.out.println((5/0));\n  throw new RuntimeException(&quot;I am throwing an exception&quot;);\n}).join();\n</code></pre>\n"}],"owner":{"account_id":19658232,"reputation":87,"user_id":14390355,"display_name":"korallo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73237408,"answer_count":1,"score":1,"last_activity_date":1659622229,"creation_date":1659621963,"question_id":73237351,"body_markdown":"I just realised that exception inside of whenComplete, in completable future is not being logged/throwed. Can someone explain that? How to properly use whenComplete?\r\n\r\n    public static void main(String[] args) {\r\n\r\n        var c =   CompletableFuture.runAsync(() -&gt; {\r\n            System.out.println(&quot;done&quot;);\r\n\r\n        });\r\n\r\n        c.whenComplete((unused, throwable) -&gt; {\r\n\r\n            System.out.println((5/0));\r\n\r\n\r\n            throw new RuntimeException(&quot;I am throwing an exception&quot;);\r\n\r\n\r\n\r\n        });\r\n\r\n        System.out.println(&quot;ok&quot;);\r\n    }\r\n\r\n\r\noutput of this block of code\r\n\r\n\r\ndone  \r\nok","title":"Exception is not being logged/throwed inside of completable future","body":"<p>I just realised that exception inside of whenComplete, in completable future is not being logged/throwed. Can someone explain that? How to properly use whenComplete?</p>\n<pre><code>public static void main(String[] args) {\n\n    var c =   CompletableFuture.runAsync(() -&gt; {\n        System.out.println(&quot;done&quot;);\n\n    });\n\n    c.whenComplete((unused, throwable) -&gt; {\n\n        System.out.println((5/0));\n\n\n        throw new RuntimeException(&quot;I am throwing an exception&quot;);\n\n\n\n    });\n\n    System.out.println(&quot;ok&quot;);\n}\n</code></pre>\n<p>output of this block of code</p>\n<p>done<br />\nok</p>\n"},{"tags":["java","tomcat","heap-memory","eclipse-mat"],"comments":[{"owner":{"account_id":3370948,"reputation":4617,"user_id":2830167,"accept_rate":100,"display_name":"ZhaoGang"},"score":0,"creation_date":1547387837,"post_id":54169195,"comment_id":95167897,"body_markdown":"So you are analyze the heap memory dump for `tomcat`? In your screenshot, the `SystemLogHandler` is used to capture log so IMHO, if you want to kill these `CaptureLog` objects you should stop tomcat logging which is a really bad idea.","body":"So you are analyze the heap memory dump for <code>tomcat</code>? In your screenshot, the <code>SystemLogHandler</code> is used to capture log so IMHO, if you want to kill these <code>CaptureLog</code> objects you should stop tomcat logging which is a really bad idea."},{"owner":{"account_id":2324956,"reputation":969,"user_id":2039693,"accept_rate":50,"display_name":"Ramesh Subramanian"},"score":0,"creation_date":1548334774,"post_id":54169195,"comment_id":95509770,"body_markdown":"You are redirecting system.out and system.err to file or other resource. So that `SystemLogHandler` becomes the top in the MAT.","body":"You are redirecting system.out and system.err to file or other resource. So that <code>SystemLogHandler</code> becomes the top in the MAT."}],"owner":{"account_id":8667034,"reputation":1,"user_id":6487117,"display_name":"Ahasan Al Rabbi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":195,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659621745,"creation_date":1547385118,"question_id":54169195,"body_markdown":"I have tried to analyze java heap memory dump with MAT.\r\nThen I found org.apache.tomcat.util.log.CaptureLog objects taking high memory from heap. How do I stop this or disable CaptureLog.\r\n[Mat screenshot][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/g77PP.png","title":"How to disable tomcat capture log?","body":"<p>I have tried to analyze java heap memory dump with MAT.\nThen I found org.apache.tomcat.util.log.CaptureLog objects taking high memory from heap. How do I stop this or disable CaptureLog.\n<a href=\"https://i.stack.imgur.com/g77PP.png\" rel=\"nofollow noreferrer\">Mat screenshot</a></p>\n"},{"tags":["java","multithreading"],"answers":[{"tags":[],"owner":{"account_id":6742966,"reputation":713,"user_id":5195552,"display_name":"Diego"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1659575614,"creation_date":1659574514,"answer_id":73229264,"question_id":73228917,"body_markdown":"**TL;DR**\r\n\r\nOversimplifying it, when two threads execute computeIfAbsent, just one of them will be successful. The second thread will be blocked until the first one ends. Once it is done, the second thread will now find the key and won&#39;t apply the mapping function.\r\n\r\n----\r\nNow going into detail:\r\n\r\ncomputeIfAbsent is said to be atomic since it uses a mix between synchronization and compare-and-swap mechanisms to search and set values in the map. This ensures that two threads won&#39;t collide when setting a new key, and that is why the documentation ensures that this method will be executed &quot;once at most&quot;.\r\n\r\nIf you take a quick look at computeIfAbsent source code in the JDK you will find the following:\r\n\r\n    synchronized (r) {\r\n                    if (casTabAt(tab, i, null, r)) {\r\n                        binCount = 1;\r\n                        Node&lt;K,V&gt; node = null;\r\n                        try {\r\n                            if ((val = mappingFunction.apply(key)) != null)\r\n                                node = new Node&lt;K,V&gt;(h, key, val);\r\n                        } finally {\r\n                            setTabAt(tab, i, node);\r\n                        }\r\n                    }\r\n                }\r\n\r\nThat snippet will granularly block and try to atomically apply the mapping function.\r\n\r\nIf you want to dig even more on that and you have a good understanding of how HashMaps work and CAS, you can also take a look at a more detailed explanation of the ConcurrentHashMap code here: [https://stackoverflow.com/questions/36562643/concurrenthashmap-in-jdk8-code-explanation][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/36562643/concurrenthashmap-in-jdk8-code-explanation","title":"What does Atomicity imply for cmputeIfAbsent in a concurrent hash map? Atomicity vs. Synchronized","body":"<p><strong>TL;DR</strong></p>\n<p>Oversimplifying it, when two threads execute computeIfAbsent, just one of them will be successful. The second thread will be blocked until the first one ends. Once it is done, the second thread will now find the key and won't apply the mapping function.</p>\n<hr />\n<p>Now going into detail:</p>\n<p>computeIfAbsent is said to be atomic since it uses a mix between synchronization and compare-and-swap mechanisms to search and set values in the map. This ensures that two threads won't collide when setting a new key, and that is why the documentation ensures that this method will be executed &quot;once at most&quot;.</p>\n<p>If you take a quick look at computeIfAbsent source code in the JDK you will find the following:</p>\n<pre><code>synchronized (r) {\n                if (casTabAt(tab, i, null, r)) {\n                    binCount = 1;\n                    Node&lt;K,V&gt; node = null;\n                    try {\n                        if ((val = mappingFunction.apply(key)) != null)\n                            node = new Node&lt;K,V&gt;(h, key, val);\n                    } finally {\n                        setTabAt(tab, i, node);\n                    }\n                }\n            }\n</code></pre>\n<p>That snippet will granularly block and try to atomically apply the mapping function.</p>\n<p>If you want to dig even more on that and you have a good understanding of how HashMaps work and CAS, you can also take a look at a more detailed explanation of the ConcurrentHashMap code here: <a href=\"https://stackoverflow.com/questions/36562643/concurrenthashmap-in-jdk8-code-explanation\">ConcurrentHashmap in JDK8 code explanation</a></p>\n"},{"tags":[],"owner":{"account_id":5998820,"reputation":12666,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1659621585,"creation_date":1659610309,"answer_id":73234631,"question_id":73228917,"body_markdown":"There are situations where the mapping function could be executed concurrently for different key values so it is important that your mapping function is thread-safe.\r\n\r\nThe `computeIfAbsent` method only guarantees that the mapping function isn&#39;t called simultaneously for the same key value. Also note that a `Map` works by hashing muliple keys into buckets of entries and if `computeIfAbsent(a, mapFunc)` is called at same time as `computeIfAbsent(b, mapFunc)` with pair of keys a+b that map to same sub-table of `ConcurrentHashMap`, then `mapFunc` for each key will be run one after the other and not at same time.\r\n\r\nHowever where the different keys do not resolve to same sub-table within `ConcurrentHashMap` you should expect your mapping function to be called simulaneously by different threads for different key values.\r\n\r\nHere is an example which shows a thread-safe mapping function that detects concurrent callers:\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        ConcurrentHashMap&lt;String, String&gt; map = new ConcurrentHashMap&lt;&gt;(2096, 1.0f);\r\n        AtomicInteger concurrent = new AtomicInteger();\r\n        Function&lt;String, String&gt; mappingFunction = s -&gt; {\r\n            int c = concurrent.incrementAndGet();\r\n            String value = &quot;Value:&quot;+s +&quot; concurrent=&quot;+c+&quot; thread=&quot;+Thread.currentThread().getName();\r\n            if (c != 1)\r\n                System.out.println(&quot;Multiple callers for &quot;+value);\r\n            try { Thread.sleep(50); } catch (InterruptedException ignore) { }\r\n            concurrent.decrementAndGet();\r\n            return value;\r\n        };\r\n        Runnable task = () -&gt; {\r\n            Random r = new Random();\r\n            for (int i = 0; i &lt; 10_000; i++)\r\n                map.computeIfAbsent(String.valueOf(r.nextInt(10240)), mappingFunction);\r\n        };\r\n\r\n        Thread a = new Thread(task, &quot;one&quot;);\r\n\r\n        a.start();\r\n        task.run();\r\n        a.join();\r\n        map.values().stream().limit(32).forEach(System.out::println);\r\n    }\r\n\r\nIf run enough, there will be occasions where the counter inside `mappingFunction` shows that 2 instances are running at same time on the pair of threads.\r\n\r\n**EDIT**\r\n\r\nTo answer your comment about `synchronized (r)`:\r\n\r\nNote that there is infinite `while` loop inside the `computeIfAbsent` which only exits on `break` or `return`, and `mappingFunction.apply(key)` is called in two places:\r\n\r\n1) when the key is the first entry into the sub-table it runs to the `synchronized (r)` block. As the line before declares `Node&lt;K,V&gt; r = new ReservationNode&lt;K,V&gt;()` there is NEVER contention on `r` from different threads, but only one thread successfully enters the `if (casTabAt(...)) { binCount = 1; ... } ` block and returns, other losing threads resume the loop.\r\n\r\n2) when the key is not the first entry into the sub-table it runs to the `synchronized (f)` block which would block all but one threads trying to `computeIfAbsent` for different keys that are hashed to the same sub-table. As each thread enters the block it verifies `f` is unchanged, and if so returns existing or computed new value - otherwise resumes the loop.\r\n","title":"What does Atomicity imply for cmputeIfAbsent in a concurrent hash map? Atomicity vs. Synchronized","body":"<p>There are situations where the mapping function could be executed concurrently for different key values so it is important that your mapping function is thread-safe.</p>\n<p>The <code>computeIfAbsent</code> method only guarantees that the mapping function isn't called simultaneously for the same key value. Also note that a <code>Map</code> works by hashing muliple keys into buckets of entries and if <code>computeIfAbsent(a, mapFunc)</code> is called at same time as <code>computeIfAbsent(b, mapFunc)</code> with pair of keys a+b that map to same sub-table of <code>ConcurrentHashMap</code>, then <code>mapFunc</code> for each key will be run one after the other and not at same time.</p>\n<p>However where the different keys do not resolve to same sub-table within <code>ConcurrentHashMap</code> you should expect your mapping function to be called simulaneously by different threads for different key values.</p>\n<p>Here is an example which shows a thread-safe mapping function that detects concurrent callers:</p>\n<pre><code>public static void main(String[] args) throws InterruptedException {\n    ConcurrentHashMap&lt;String, String&gt; map = new ConcurrentHashMap&lt;&gt;(2096, 1.0f);\n    AtomicInteger concurrent = new AtomicInteger();\n    Function&lt;String, String&gt; mappingFunction = s -&gt; {\n        int c = concurrent.incrementAndGet();\n        String value = &quot;Value:&quot;+s +&quot; concurrent=&quot;+c+&quot; thread=&quot;+Thread.currentThread().getName();\n        if (c != 1)\n            System.out.println(&quot;Multiple callers for &quot;+value);\n        try { Thread.sleep(50); } catch (InterruptedException ignore) { }\n        concurrent.decrementAndGet();\n        return value;\n    };\n    Runnable task = () -&gt; {\n        Random r = new Random();\n        for (int i = 0; i &lt; 10_000; i++)\n            map.computeIfAbsent(String.valueOf(r.nextInt(10240)), mappingFunction);\n    };\n\n    Thread a = new Thread(task, &quot;one&quot;);\n\n    a.start();\n    task.run();\n    a.join();\n    map.values().stream().limit(32).forEach(System.out::println);\n}\n</code></pre>\n<p>If run enough, there will be occasions where the counter inside <code>mappingFunction</code> shows that 2 instances are running at same time on the pair of threads.</p>\n<p><strong>EDIT</strong></p>\n<p>To answer your comment about <code>synchronized (r)</code>:</p>\n<p>Note that there is infinite <code>while</code> loop inside the <code>computeIfAbsent</code> which only exits on <code>break</code> or <code>return</code>, and <code>mappingFunction.apply(key)</code> is called in two places:</p>\n<ol>\n<li><p>when the key is the first entry into the sub-table it runs to the <code>synchronized (r)</code> block. As the line before declares <code>Node&lt;K,V&gt; r = new ReservationNode&lt;K,V&gt;()</code> there is NEVER contention on <code>r</code> from different threads, but only one thread successfully enters the <code>if (casTabAt(...)) { binCount = 1; ... } </code> block and returns, other losing threads resume the loop.</p>\n</li>\n<li><p>when the key is not the first entry into the sub-table it runs to the <code>synchronized (f)</code> block which would block all but one threads trying to <code>computeIfAbsent</code> for different keys that are hashed to the same sub-table. As each thread enters the block it verifies <code>f</code> is unchanged, and if so returns existing or computed new value - otherwise resumes the loop.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":14791149,"reputation":258,"user_id":10682052,"display_name":"Shawn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":73234631,"answer_count":2,"score":5,"last_activity_date":1659621585,"creation_date":1659570018,"question_id":73228917,"body_markdown":"I know there have been many questions around `computeIfAbsent`.  \r\n\r\nSpecifically what I am looking for is to understand the statement around atomicity for a concurrent hash map.\r\n\r\nfrom [the JavaDoc][1]\r\n\r\n&gt; The entire method invocation is performed atomically, so the function is applied at most once per key.\r\n\r\nIf two threads attempt to execute `computeIfAbsent` with different key&#39;s and find that in both cases the map does not contain them, might the resulting executions of the compute if absent function be concurrent? I understand they would not be concurrent in the event that both threads were trying to add the SAME key.\r\n\r\nThe word Atomic is used and it is mentioned that this means applied at most once per key. But there isn&#39;t a specific mention of synchronized behaviour on the method.\r\n\r\nAs a side note, this is relevant to me in that the method called by computeIfAbsent modifies then uses a field of the class in its body.*\r\n\r\nI want to understand if there is a threading concern resulting from two different thread executions of the computeIfAbsent method for the two different keys.\r\n\r\nEssentially do I have to look at something along the lines of synchronizing access to the field variable and its subsequent use within the computeIfAbsent method I call.\r\n\r\n\r\n*( The computeIfAbsent method invoked is the only method which modifies the field.  There is no other invoker of the method outside of the call from the hash map computeIfAbsent method. There is only one instance of the concurrent hash map that calls the computeWithAbsent method that invokes the &quot;atomic&quot; method in question)\r\n\r\nMy field is volatile to avoid potential concerns with atomic visibility.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html#computeIfAbsent-K-java.util.function.Function-","title":"What does Atomicity imply for cmputeIfAbsent in a concurrent hash map? Atomicity vs. Synchronized","body":"<p>I know there have been many questions around <code>computeIfAbsent</code>.</p>\n<p>Specifically what I am looking for is to understand the statement around atomicity for a concurrent hash map.</p>\n<p>from <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html#computeIfAbsent-K-java.util.function.Function-\" rel=\"nofollow noreferrer\">the JavaDoc</a></p>\n<blockquote>\n<p>The entire method invocation is performed atomically, so the function is applied at most once per key.</p>\n</blockquote>\n<p>If two threads attempt to execute <code>computeIfAbsent</code> with different key's and find that in both cases the map does not contain them, might the resulting executions of the compute if absent function be concurrent? I understand they would not be concurrent in the event that both threads were trying to add the SAME key.</p>\n<p>The word Atomic is used and it is mentioned that this means applied at most once per key. But there isn't a specific mention of synchronized behaviour on the method.</p>\n<p>As a side note, this is relevant to me in that the method called by computeIfAbsent modifies then uses a field of the class in its body.*</p>\n<p>I want to understand if there is a threading concern resulting from two different thread executions of the computeIfAbsent method for the two different keys.</p>\n<p>Essentially do I have to look at something along the lines of synchronizing access to the field variable and its subsequent use within the computeIfAbsent method I call.</p>\n<p>*( The computeIfAbsent method invoked is the only method which modifies the field.  There is no other invoker of the method outside of the call from the hash map computeIfAbsent method. There is only one instance of the concurrent hash map that calls the computeWithAbsent method that invokes the &quot;atomic&quot; method in question)</p>\n<p>My field is volatile to avoid potential concerns with atomic visibility.</p>\n"},{"tags":["java","spring","server","javabeans"],"comments":[{"owner":{"account_id":13602652,"reputation":132,"user_id":9812860,"display_name":"bonobo"},"score":0,"creation_date":1659559342,"post_id":73227173,"comment_id":129326162,"body_markdown":"If you want your application to execute some operation as soon as it starts you may find the @PostConstruct annotation helpful?","body":"If you want your application to execute some operation as soon as it starts you may find the @PostConstruct annotation helpful?"},{"owner":{"account_id":22249835,"reputation":1973,"user_id":16482938,"display_name":"j_b"},"score":1,"creation_date":1659559818,"post_id":73227173,"comment_id":129326280,"body_markdown":"Depending on the version of Spring you are using you may be able to use the @DependsOn annotation (https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/DependsOn.html)","body":"Depending on the version of Spring you are using you may be able to use the @DependsOn annotation (<a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/DependsOn.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/current/javadoc-api/or&zwnj;&#8203;g/&hellip;</a>)"},{"owner":{"account_id":10091943,"reputation":27,"user_id":7458652,"display_name":"Manni"},"score":0,"creation_date":1659581070,"post_id":73227173,"comment_id":129330187,"body_markdown":"@bonobo &#39;@PostConstruct&#39; does not work in this case as it is based upon the life cycle of a specific bean. If any other bean gets loaded before my desired bean, this won&#39;t help.","body":"@bonobo &#39;@PostConstruct&#39; does not work in this case as it is based upon the life cycle of a specific bean. If any other bean gets loaded before my desired bean, this won&#39;t help."},{"owner":{"account_id":10091943,"reputation":27,"user_id":7458652,"display_name":"Manni"},"score":0,"creation_date":1659581397,"post_id":73227173,"comment_id":129330231,"body_markdown":"@j_b Tried using &#39;depends-on&#39;, but it didn&#39;t work for me. That is why I am looking for a way that would make my bean load as the first bean ever.","body":"@j_b Tried using &#39;depends-on&#39;, but it didn&#39;t work for me. That is why I am looking for a way that would make my bean load as the first bean ever."},{"owner":{"account_id":2799515,"reputation":815,"user_id":6647878,"display_name":"Nidhi257"},"score":0,"creation_date":1659582892,"post_id":73227173,"comment_id":129330412,"body_markdown":"try annotation @Priority","body":"try annotation @Priority"},{"owner":{"account_id":12142871,"reputation":97,"user_id":8866086,"display_name":"sjy"},"score":0,"creation_date":1659583872,"post_id":73227173,"comment_id":129330522,"body_markdown":"What about @lazy connection bean @lazy(false) rest of beans lazy","body":"What about @lazy connection bean @lazy(false) rest of beans lazy"},{"owner":{"account_id":10091943,"reputation":27,"user_id":7458652,"display_name":"Manni"},"score":0,"creation_date":1659587802,"post_id":73227173,"comment_id":129331100,"body_markdown":"@Nidhi257 I assume you mean &#39;@Order&#39; annotation. I couldn&#39;t find &#39;@Priority&#39; in any of the spring packages apart from in javax.annotations. But &#39;@Order&#39; is specific for spring boot. Does not work","body":"@Nidhi257 I assume you mean &#39;@Order&#39; annotation. I couldn&#39;t find &#39;@Priority&#39; in any of the spring packages apart from in javax.annotations. But &#39;@Order&#39; is specific for spring boot. Does not work"},{"owner":{"account_id":10091943,"reputation":27,"user_id":7458652,"display_name":"Manni"},"score":0,"creation_date":1659587893,"post_id":73227173,"comment_id":129331109,"body_markdown":"@sjy Tried &#39;lazy-init&#39; in the xml config. Does not work. The only way i am able to make it work is to introduce false dependency by injecting my bean into other beans.","body":"@sjy Tried &#39;lazy-init&#39; in the xml config. Does not work. The only way i am able to make it work is to introduce false dependency by injecting my bean into other beans."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1659590512,"post_id":73227173,"comment_id":129331527,"body_markdown":"`@DependsOn` is the way to go. All the beans using an connection should use `@DepensON(&quot;connection-check-bean&quot;)`. If it didn&#39;t work you didn&#39;t do it properly.","body":"<code>@DependsOn</code> is the way to go. All the beans using an connection should use <code>@DepensON(&quot;connection-check-bean&quot;)</code>. If it didn&#39;t work you didn&#39;t do it properly."},{"owner":{"account_id":10091943,"reputation":27,"user_id":7458652,"display_name":"Manni"},"score":0,"creation_date":1659621485,"post_id":73227173,"comment_id":129342212,"body_markdown":"@M.Deinum My bad. depends-on worked for me, it just that because of some other errors I didn&#39;t notice it. Thanks","body":"@M.Deinum My bad. depends-on worked for me, it just that because of some other errors I didn&#39;t notice it. Thanks"}],"owner":{"account_id":10091943,"reputation":27,"user_id":7458652,"display_name":"Manni"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":613,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659621431,"creation_date":1659556881,"question_id":73227173,"body_markdown":"I have a java application based upon spring and I have a bean that runs some connection test logic during server startup. If the connection test fails, I stop the server. \r\n\r\nI need this bean as the first one to be loaded before any other beans performs some operations using the connection string. \r\n\r\nCan someone help me figure out how I can load this connection test bean as the first bean please. \r\n\r\nWays tried:\r\n- Bean lifecycle hooks such as InitializingBean, init-method, @PostConstruct won&#39;t work as they will get invoked for my specific bean but can&#39;t control what beans gets loaded before my desired bean.\r\n\r\n\r\nUpdate:\r\n- depends-on or @DependsOn worked.\r\n\r\n\r\nThanks","title":"Spring: How to load my bean as the first bean when server startsup","body":"<p>I have a java application based upon spring and I have a bean that runs some connection test logic during server startup. If the connection test fails, I stop the server.</p>\n<p>I need this bean as the first one to be loaded before any other beans performs some operations using the connection string.</p>\n<p>Can someone help me figure out how I can load this connection test bean as the first bean please.</p>\n<p>Ways tried:</p>\n<ul>\n<li>Bean lifecycle hooks such as InitializingBean, init-method, @PostConstruct won't work as they will get invoked for my specific bean but can't control what beans gets loaded before my desired bean.</li>\n</ul>\n<p>Update:</p>\n<ul>\n<li>depends-on or @DependsOn worked.</li>\n</ul>\n<p>Thanks</p>\n"},{"tags":["java","exception","serialization","deserialization"],"answers":[{"tags":[],"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659621361,"creation_date":1659621361,"answer_id":73237210,"question_id":73236810,"body_markdown":"Your 2 `User` classes are not the same, they are in different packages. The exception message is telling you this: `serialization.serialize.User` is a different class than `serialization.deSerialize.User`.\r\n\r\nUsing &quot;default&quot; binary serialization as you are, the class being deserialized into must be the exact same as the original object that was serialized. Even though your 2 `User` classes have the same structure, they are not compatible as far as serialization goes.\r\n\r\nThe simplest solution is to use the same `User` class for both serialization and deserialization. If you _must_ serialize one class and deserialize into a different class, I suggest you use a different form for the serialization, such as JSON. The [Jackson library][1] makes this easy to do, and you can have different classes.\r\n\r\nIt&#39;s also possible you could [override `writeObject()` and `readObject()` methods][2] to achieve this, but I&#39;m not certain it will work with binary serialization.\r\n\r\n\r\n  [1]: https://github.com/FasterXML/jackson\r\n  [2]: https://www.baeldung.com/java-serialization#3-custom-serialization-in-java","title":"ClassCastException occurs while trying to deserialize the serialized object","body":"<p>Your 2 <code>User</code> classes are not the same, they are in different packages. The exception message is telling you this: <code>serialization.serialize.User</code> is a different class than <code>serialization.deSerialize.User</code>.</p>\n<p>Using &quot;default&quot; binary serialization as you are, the class being deserialized into must be the exact same as the original object that was serialized. Even though your 2 <code>User</code> classes have the same structure, they are not compatible as far as serialization goes.</p>\n<p>The simplest solution is to use the same <code>User</code> class for both serialization and deserialization. If you <em>must</em> serialize one class and deserialize into a different class, I suggest you use a different form for the serialization, such as JSON. The <a href=\"https://github.com/FasterXML/jackson\" rel=\"nofollow noreferrer\">Jackson library</a> makes this easy to do, and you can have different classes.</p>\n<p>It's also possible you could <a href=\"https://www.baeldung.com/java-serialization#3-custom-serialization-in-java\" rel=\"nofollow noreferrer\">override <code>writeObject()</code> and <code>readObject()</code> methods</a> to achieve this, but I'm not certain it will work with binary serialization.</p>\n"}],"owner":{"account_id":19504381,"reputation":624,"user_id":14269736,"display_name":"sravanTG"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":468,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73237210,"answer_count":1,"score":0,"last_activity_date":1659621361,"creation_date":1659619567,"question_id":73236810,"body_markdown":"I am trying to deserialize the object in java and I am receiving this error `[ClassCastException]` constantly. The object is serialized but desrialization is not working.\r\nI think there is no error in code anywhere but don&#39;t know why I am receiving this error. please help.\r\n\r\nserialized object code:\r\nUser class.\r\n```\r\npackage serialization.serialize;\r\n\r\nimport java.io.Serializable;\r\n\r\npublic class User implements Serializable {\r\n    String name;\r\n    String password;\r\n    public void hello(){\r\n        System.out.println(&quot;Hello &quot; + name);\r\n    }\r\n}\r\n```\r\n\r\nserialized object code:\r\nMain class.\r\n```\r\npackage serialization.serialize;\r\n\r\nimport java.io.*;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) throws IOException {\r\n        User user1 = new User();\r\n        user1.name = &quot;harry&quot;;\r\n        user1.password = &quot;123abc&quot;;\r\n\r\n        FileOutputStream fileOut = new FileOutputStream(&quot;User1.ser&quot;);\r\n        ObjectOutputStream out = new ObjectOutputStream(fileOut);\r\n        out.writeObject(user1);\r\n        out.close();\r\n        fileOut.close();\r\n        System.out.println(&quot;Object info saved.&quot;);\r\n    }\r\n}\r\n```\r\nNow the Deserialization code.\r\nUser class.\r\n```\r\npackage serialization.deSerialize;\r\n\r\nimport java.io.Serializable;\r\n\r\npublic class User implements Serializable {\r\n        String name;\r\n        String password;\r\n        public void hello(){\r\n            System.out.println(&quot;Hello &quot; + name);\r\n        }\r\n}\r\n```\r\nMain class.\r\n```\r\npackage serialization.deSerialize;\r\n\r\nimport java.io.*;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) throws IOException, ClassNotFoundException {\r\n        User user1;\r\n        FileInputStream fileIn = new FileInputStream(&quot;C:\\\\Users\\\\tgsra\\\\IdeaProjects\\\\javaBroCode\\\\src\\\\serialization\\\\serialize\\\\User1.ser&quot;);\r\n        ObjectInputStream in = new ObjectInputStream(fileIn);\r\n        user1 = (User)in.readObject();\r\n        in.close();\r\n        fileIn.close();\r\n        System.out.println(user1.name);\r\n        System.out.println(user1.password);\r\n        user1.hello();\r\n    }\r\n}\r\n```\r\nThis is the error i am getting.\r\n```\r\nException in thread &quot;main&quot; java.lang.ClassCastException: class serialization.serialize.User cannot be cast to class serialization.deSerialize.User (serialization.serialize.User and serialization.deSerialize.User are in unnamed module of loader &#39;app&#39;)\r\n\tat serialization.deSerialize.Main.main(Main.java:10)\r\n```\r\n\r\n","title":"ClassCastException occurs while trying to deserialize the serialized object","body":"<p>I am trying to deserialize the object in java and I am receiving this error <code>[ClassCastException]</code> constantly. The object is serialized but desrialization is not working.\nI think there is no error in code anywhere but don't know why I am receiving this error. please help.</p>\n<p>serialized object code:\nUser class.</p>\n<pre><code>package serialization.serialize;\n\nimport java.io.Serializable;\n\npublic class User implements Serializable {\n    String name;\n    String password;\n    public void hello(){\n        System.out.println(&quot;Hello &quot; + name);\n    }\n}\n</code></pre>\n<p>serialized object code:\nMain class.</p>\n<pre><code>package serialization.serialize;\n\nimport java.io.*;\n\npublic class Main {\n    public static void main(String[] args) throws IOException {\n        User user1 = new User();\n        user1.name = &quot;harry&quot;;\n        user1.password = &quot;123abc&quot;;\n\n        FileOutputStream fileOut = new FileOutputStream(&quot;User1.ser&quot;);\n        ObjectOutputStream out = new ObjectOutputStream(fileOut);\n        out.writeObject(user1);\n        out.close();\n        fileOut.close();\n        System.out.println(&quot;Object info saved.&quot;);\n    }\n}\n</code></pre>\n<p>Now the Deserialization code.\nUser class.</p>\n<pre><code>package serialization.deSerialize;\n\nimport java.io.Serializable;\n\npublic class User implements Serializable {\n        String name;\n        String password;\n        public void hello(){\n            System.out.println(&quot;Hello &quot; + name);\n        }\n}\n</code></pre>\n<p>Main class.</p>\n<pre><code>package serialization.deSerialize;\n\nimport java.io.*;\n\npublic class Main {\n    public static void main(String[] args) throws IOException, ClassNotFoundException {\n        User user1;\n        FileInputStream fileIn = new FileInputStream(&quot;C:\\\\Users\\\\tgsra\\\\IdeaProjects\\\\javaBroCode\\\\src\\\\serialization\\\\serialize\\\\User1.ser&quot;);\n        ObjectInputStream in = new ObjectInputStream(fileIn);\n        user1 = (User)in.readObject();\n        in.close();\n        fileIn.close();\n        System.out.println(user1.name);\n        System.out.println(user1.password);\n        user1.hello();\n    }\n}\n</code></pre>\n<p>This is the error i am getting.</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.ClassCastException: class serialization.serialize.User cannot be cast to class serialization.deSerialize.User (serialization.serialize.User and serialization.deSerialize.User are in unnamed module of loader 'app')\n    at serialization.deSerialize.Main.main(Main.java:10)\n</code></pre>\n"},{"tags":["java","recursion","tree","parent-child"],"comments":[{"owner":{"account_id":25962043,"reputation":68,"user_id":19678500,"display_name":"Yellow"},"score":1,"creation_date":1659619416,"post_id":73236650,"comment_id":129341356,"body_markdown":"Question, where does childs[] come from? obj is an array containing all the nodes?","body":"Question, where does childs[] come from? obj is an array containing all the nodes?"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1659619929,"post_id":73236650,"comment_id":129341582,"body_markdown":"`I am stuck on how to find out if it&#39;s deletable or not` - Wait, you have a column `deletable` in your DB. Hence, you should know whether a particular object can be deleted by looking at its property.","body":"<code>I am stuck on how to find out if it&#39;s deletable or not</code> - Wait, you have a column <code>deletable</code> in your DB. Hence, you should know whether a particular object can be deleted by looking at its property."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1659620087,"post_id":73236650,"comment_id":129341641,"body_markdown":"In case if you want to verify if information in the `deletable` column is correct, then explain your logic. Do you need to find out whether a particular node has no children?","body":"In case if you want to verify if information in the <code>deletable</code> column is correct, then explain your logic. Do you need to find out whether a particular node has no children?"},{"owner":{"account_id":9315226,"reputation":445,"user_id":6915773,"display_name":"Blaj Bogdan"},"score":0,"creation_date":1659685820,"post_id":73236650,"comment_id":129357613,"body_markdown":"@Yellow, is an array of nodes containing all the node where some may not have any particular link with the chain we need.","body":"@Yellow, is an array of nodes containing all the node where some may not have any particular link with the chain we need."},{"owner":{"account_id":9315226,"reputation":445,"user_id":6915773,"display_name":"Blaj Bogdan"},"score":0,"creation_date":1659685828,"post_id":73236650,"comment_id":129357617,"body_markdown":"@AlexanderIvanchenko I know which are deletable, but a parent may have n Childs and so on.","body":"@AlexanderIvanchenko I know which are deletable, but a parent may have n Childs and so on."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1659688874,"post_id":73236650,"comment_id":129358585,"body_markdown":"`but a parent may have n Childs and so on` - Can you give a more elaborate exploration on what do you need to check, what should be the result (it&#39;s not clear from your pseudocode)?","body":"<code>but a parent may have n Childs and so on</code> - Can you give a more elaborate exploration on what do you need to check, what should be the result (it&#39;s not clear from your pseudocode)?"}],"answers":[{"tags":[],"owner":{"account_id":25962043,"reputation":68,"user_id":19678500,"display_name":"Yellow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659621293,"creation_date":1659620252,"answer_id":73236955,"question_id":73236650,"body_markdown":"I&#39;m not sure about the methods I have available to get the data needed but I was thinking about something like this:\r\n\r\nEdited:\r\n```\r\npublic static void main(String[] args) \r\n{   \r\n    int id; // = some id\r\n    Data1[] objs = getAllData(); //it will also get objects which have no direct link to the id we provided\r\n    boolean canDelete = isDeletable(objs[id-1], objs);\r\n}\r\n\r\npublic static boolean isDeletable(Data1 parent, Data1[] objs) \r\n{\r\n    if(parent.getIdDeletable() == 0)\r\n        return false;\r\n    \r\n    \r\n    int pid = parent.getId();\r\n    for(Data1 o: obj)\r\n    {\r\n        if(o.getParentId() == pid &amp;&amp; !isDeletable(o, objs))\r\n            return false;\r\n    }\r\n    return true;\r\n}\r\n```\r\n\r\nSteps:\r\n\r\n 1. If the parent cannot be deleted return false\r\n 2. Else check every child\r\n 3. If there is a child that cannot be deleted return false\r\n 4. Else return true\r\n\r\nWhich means that the function returns true is the object and its children can be deleted.\r\n","title":"Java arrays of multiple parents and children need to find out if all children of a specified parent are deletable","body":"<p>I'm not sure about the methods I have available to get the data needed but I was thinking about something like this:</p>\n<p>Edited:</p>\n<pre><code>public static void main(String[] args) \n{   \n    int id; // = some id\n    Data1[] objs = getAllData(); //it will also get objects which have no direct link to the id we provided\n    boolean canDelete = isDeletable(objs[id-1], objs);\n}\n\npublic static boolean isDeletable(Data1 parent, Data1[] objs) \n{\n    if(parent.getIdDeletable() == 0)\n        return false;\n    \n    \n    int pid = parent.getId();\n    for(Data1 o: obj)\n    {\n        if(o.getParentId() == pid &amp;&amp; !isDeletable(o, objs))\n            return false;\n    }\n    return true;\n}\n</code></pre>\n<p>Steps:</p>\n<ol>\n<li>If the parent cannot be deleted return false</li>\n<li>Else check every child</li>\n<li>If there is a child that cannot be deleted return false</li>\n<li>Else return true</li>\n</ol>\n<p>Which means that the function returns true is the object and its children can be deleted.</p>\n"}],"owner":{"account_id":9315226,"reputation":445,"user_id":6915773,"display_name":"Blaj Bogdan"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":229,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659621293,"creation_date":1659618906,"question_id":73236650,"body_markdown":"So I have the following problem. I have a tree in UI and in DB I have data showing which node has which parented, so I lose the direct connection I have in UI. I need to know if every object is deletable or not based if it&#39;s children are.\r\nData1\r\n\r\n    name    id    deletable   parentId\r\n    A       1     1           0   \r\n    B1      2     1           1   \r\n    B2      3     1           1   \r\n    C1      4     0           3   \r\n    C2      5     1           3   \r\n    D1      6     1           5\r\nI get a request to delete a certain ID, I need to verify if I can delete it. The problem is that I don&#39;t have a good method of finding if the Childs all are deletable.\r\n\r\nEx: I get request to delete(id = 3) it won&#39;t be possible as it&#39;s child with id = 4 is not deletable.\r\n\r\nI have options to either do this in SQL or in Java. Was thinking of the following\r\n\r\n    Data1[] obj = getAllData() //it will also get objects which have no direct link to the id we provided\r\n    recursiveMethod(obj, id);\r\n\r\n    recursiveMethod(Data1[] obj, currentParentId) {\r\n         //last node\r\n        if(obj.lenth == 1)\r\n            return obj.getIdDeletable;\r\n        //filter obj for childs having parentId= currentParentId\r\n        childs[] = logic;\r\n        for(Data1 child: childs) {\r\n            recursiveMethod(obj, child.getId)\r\n        } \r\n    }\r\n\r\nThe data U work in backend are arrays&lt;Data1&gt; and I start with the Id of the object I want to delete. I am stuck on how to find out if it&#39;s deletable or not\r\n\r\n\r\n  \r\n","title":"Java arrays of multiple parents and children need to find out if all children of a specified parent are deletable","body":"<p>So I have the following problem. I have a tree in UI and in DB I have data showing which node has which parented, so I lose the direct connection I have in UI. I need to know if every object is deletable or not based if it's children are.\nData1</p>\n<pre><code>name    id    deletable   parentId\nA       1     1           0   \nB1      2     1           1   \nB2      3     1           1   \nC1      4     0           3   \nC2      5     1           3   \nD1      6     1           5\n</code></pre>\n<p>I get a request to delete a certain ID, I need to verify if I can delete it. The problem is that I don't have a good method of finding if the Childs all are deletable.</p>\n<p>Ex: I get request to delete(id = 3) it won't be possible as it's child with id = 4 is not deletable.</p>\n<p>I have options to either do this in SQL or in Java. Was thinking of the following</p>\n<pre><code>Data1[] obj = getAllData() //it will also get objects which have no direct link to the id we provided\nrecursiveMethod(obj, id);\n\nrecursiveMethod(Data1[] obj, currentParentId) {\n     //last node\n    if(obj.lenth == 1)\n        return obj.getIdDeletable;\n    //filter obj for childs having parentId= currentParentId\n    childs[] = logic;\n    for(Data1 child: childs) {\n        recursiveMethod(obj, child.getId)\n    } \n}\n</code></pre>\n<p>The data U work in backend are arrays and I start with the Id of the object I want to delete. I am stuck on how to find out if it's deletable or not</p>\n"},{"tags":["java","autoencoder","deeplearning4j","dimensionality-reduction","dl4j"],"answers":[{"tags":[],"owner":{"account_id":6647858,"reputation":3100,"user_id":5131255,"display_name":"Adam Gibson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659620821,"creation_date":1659620821,"answer_id":73237080,"question_id":73237000,"body_markdown":"I would use the transfer learning api for that. You can freeze layers as well as remove and add new layers. That should help with freezing or adding/removing what you need.\r\n\r\nIn your case with the feed forward you would need to know the the index of the layer(s) to remove to only have the encoder after you&#39;re done training. Some examples can be found here: https://github.com/eclipse/deeplearning4j-examples/tree/master/dl4j-examples/src/main/java/org/deeplearning4j/examples/advanced/features/transferlearning\r\n\r\nFrom the examples repo there here&#39;s a simpler example of setting up a FineTuneConfiguration:\r\n```\r\nComputationGraph vgg16 = (ComputationGraph) zooModel.initPretrained();\r\n        log.info(vgg16.summary());\r\n\r\n        //Decide on a fine tune configuration to use.\r\n        //In cases where there already exists a setting the fine tune setting will\r\n        //  override the setting for all layers that are not &quot;frozen&quot;.\r\n        FineTuneConfiguration fineTuneConf = new FineTuneConfiguration.Builder()\r\n            .updater(new Nesterovs(5e-5))\r\n            .seed(seed)\r\n            .build();\r\n\r\n        //Construct a new model with the intended architecture and print summary\r\n        ComputationGraph vgg16Transfer = new TransferLearning.GraphBuilder(vgg16)\r\n            .fineTuneConfiguration(fineTuneConf)\r\n            .setFeatureExtractor(featureExtractionLayer) //the specified layer and below are &quot;frozen&quot;\r\n            .removeVertexKeepConnections(&quot;predictions&quot;) //replace the functionality of the final vertex\r\n            .addLayer(&quot;predictions&quot;,\r\n                new OutputLayer.Builder(LossFunctions.LossFunction.NEGATIVELOGLIKELIHOOD)\r\n                    .nIn(4096).nOut(numClasses)\r\n                    .weightInit(new NormalDistribution(0,0.2*(2.0/(4096+numClasses)))) //This weight init dist gave better results than Xavier\r\n                    .activation(Activation.SOFTMAX).build(),\r\n                &quot;fc2&quot;)\r\n            .build();\r\n```\r\n\r\nThis is changing a computation graph and only changing the last layer. Note most of the examples are focused on simpler use cases like changing the last layer. Feel free to post more questions if you have them. Hopefully this helps as a starting point.","title":"Autoencoder for dimesionality reduction in DL4J","body":"<p>I would use the transfer learning api for that. You can freeze layers as well as remove and add new layers. That should help with freezing or adding/removing what you need.</p>\n<p>In your case with the feed forward you would need to know the the index of the layer(s) to remove to only have the encoder after you're done training. Some examples can be found here: <a href=\"https://github.com/eclipse/deeplearning4j-examples/tree/master/dl4j-examples/src/main/java/org/deeplearning4j/examples/advanced/features/transferlearning\" rel=\"nofollow noreferrer\">https://github.com/eclipse/deeplearning4j-examples/tree/master/dl4j-examples/src/main/java/org/deeplearning4j/examples/advanced/features/transferlearning</a></p>\n<p>From the examples repo there here's a simpler example of setting up a FineTuneConfiguration:</p>\n<pre><code>ComputationGraph vgg16 = (ComputationGraph) zooModel.initPretrained();\n        log.info(vgg16.summary());\n\n        //Decide on a fine tune configuration to use.\n        //In cases where there already exists a setting the fine tune setting will\n        //  override the setting for all layers that are not &quot;frozen&quot;.\n        FineTuneConfiguration fineTuneConf = new FineTuneConfiguration.Builder()\n            .updater(new Nesterovs(5e-5))\n            .seed(seed)\n            .build();\n\n        //Construct a new model with the intended architecture and print summary\n        ComputationGraph vgg16Transfer = new TransferLearning.GraphBuilder(vgg16)\n            .fineTuneConfiguration(fineTuneConf)\n            .setFeatureExtractor(featureExtractionLayer) //the specified layer and below are &quot;frozen&quot;\n            .removeVertexKeepConnections(&quot;predictions&quot;) //replace the functionality of the final vertex\n            .addLayer(&quot;predictions&quot;,\n                new OutputLayer.Builder(LossFunctions.LossFunction.NEGATIVELOGLIKELIHOOD)\n                    .nIn(4096).nOut(numClasses)\n                    .weightInit(new NormalDistribution(0,0.2*(2.0/(4096+numClasses)))) //This weight init dist gave better results than Xavier\n                    .activation(Activation.SOFTMAX).build(),\n                &quot;fc2&quot;)\n            .build();\n</code></pre>\n<p>This is changing a computation graph and only changing the last layer. Note most of the examples are focused on simpler use cases like changing the last layer. Feel free to post more questions if you have them. Hopefully this helps as a starting point.</p>\n"}],"owner":{"account_id":25977668,"reputation":1,"user_id":19691902,"display_name":"code monkey"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1659620821,"creation_date":1659620434,"question_id":73237000,"body_markdown":"I&#39;m trying to write an autoencoder for dimensionality reduction in DL4J, but all the autoencoder examples I can find for DL4J are for outlier detection.\r\n\r\nhttps://deeplearning4j.konduit.ai/v/en-1.0.0-beta6/getting-started/tutorials/basic-autoencoder\r\n\r\nDoes anybody have an example for dimensionality reduction in DL4J or how I can load just the encoding part of the multi layer network for evaluation after the training on the full encoder/decoder stack has been completed?\r\n\r\nAny help or pointers are greatly appreciated.\r\n\r\nThanks\r\n","title":"Autoencoder for dimesionality reduction in DL4J","body":"<p>I'm trying to write an autoencoder for dimensionality reduction in DL4J, but all the autoencoder examples I can find for DL4J are for outlier detection.</p>\n<p><a href=\"https://deeplearning4j.konduit.ai/v/en-1.0.0-beta6/getting-started/tutorials/basic-autoencoder\" rel=\"nofollow noreferrer\">https://deeplearning4j.konduit.ai/v/en-1.0.0-beta6/getting-started/tutorials/basic-autoencoder</a></p>\n<p>Does anybody have an example for dimensionality reduction in DL4J or how I can load just the encoding part of the multi layer network for evaluation after the training on the full encoder/decoder stack has been completed?</p>\n<p>Any help or pointers are greatly appreciated.</p>\n<p>Thanks</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1652421944,"post_id":72219944,"comment_id":127606590,"body_markdown":"I&#39;m afraid that cannot be achieved using your actual database schema.","body":"I&#39;m afraid that cannot be achieved using your actual database schema."},{"owner":{"account_id":17032910,"reputation":41,"user_id":12322670,"display_name":"Muratcan Yıldız"},"score":0,"creation_date":1652441165,"post_id":72219944,"comment_id":127612753,"body_markdown":"What kind of database schema do I need for this?","body":"What kind of database schema do I need for this?"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1652441754,"post_id":72219944,"comment_id":127612974,"body_markdown":"One that has no extra level between the actual data and the primary ID.","body":"One that has no extra level between the actual data and the primary ID."},{"owner":{"account_id":17032910,"reputation":41,"user_id":12322670,"display_name":"Muratcan Yıldız"},"score":0,"creation_date":1659620796,"post_id":72219944,"comment_id":129341925,"body_markdown":"@AlexMamo can you show me an example of this","body":"@AlexMamo can you show me an example of this"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1659621163,"post_id":72219944,"comment_id":129342069,"body_markdown":"Are you allowed to change the database schema?","body":"Are you allowed to change the database schema?"},{"owner":{"account_id":17032910,"reputation":41,"user_id":12322670,"display_name":"Muratcan Yıldız"},"score":0,"creation_date":1659621277,"post_id":72219944,"comment_id":129342113,"body_markdown":"@AlexMamo yes i have this permission","body":"@AlexMamo yes i have this permission"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1659689251,"post_id":72219944,"comment_id":129358711,"body_markdown":"One more question. You need a query to find all messages of the current user or of all users?","body":"One more question. You need a query to find all messages of the current user or of all users?"},{"owner":{"account_id":17032910,"reputation":41,"user_id":12322670,"display_name":"Muratcan Yıldız"},"score":0,"creation_date":1659712100,"post_id":72219944,"comment_id":129367133,"body_markdown":"@AlexMamo yes..","body":"@AlexMamo yes.."}],"owner":{"account_id":17032910,"reputation":41,"user_id":12322670,"display_name":"Muratcan Yıldız"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1659620813,"creation_date":1652376821,"question_id":72219944,"body_markdown":"I want to delete the messages of every user before 30 days. When the user enters the application, their own messages are deleted. But I can&#39;t access every user&#39;s messages. I couldn&#39;t find what to write for the query.\r\n\r\n\r\nThis my message db:\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThis my Code to delete messages when the user opens an account :\r\n``` \r\n   mAuth = FirebaseAuth.getInstance();\r\n        currentUserID = mAuth.getCurrentUser().getUid();\r\n        ChatsRef = FirebaseDatabase.getInstance().getReference().child(&quot;message&quot;).child(currentUserID);\r\n     \r\n\r\n long cutoff = new Date().getTime() - TimeUnit.MILLISECONDS.convert(30, TimeUnit.DAYS);\r\n        Query oldItems = ChatsRef.orderByChild(&quot;timestamp&quot;).endAt(cutoff);\r\n        oldItems.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(DataSnapshot snapshot) {\r\n                for (DataSnapshot itemSnapshot: snapshot.getChildren()) {\r\n                    itemSnapshot.getRef().removeValue();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(DatabaseError databaseError) {\r\n                throw databaseError.toException();\r\n            }\r\n        });\r\n\r\n``` \r\nHow can I access the timestamp of each user?\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/b6qyA.jpg\r\n  [2]: https://i.stack.imgur.com/yakgl.jpg","title":"How can I access specific data in Firebase?","body":"<p>I want to delete the messages of every user before 30 days. When the user enters the application, their own messages are deleted. But I can't access every user's messages. I couldn't find what to write for the query.</p>\n<p>This my message db:\n<a href=\"https://i.stack.imgur.com/b6qyA.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b6qyA.jpg\" alt=\"enter image description here\" /></a></p>\n<p>This my Code to delete messages when the user opens an account :</p>\n<pre><code>   mAuth = FirebaseAuth.getInstance();\n        currentUserID = mAuth.getCurrentUser().getUid();\n        ChatsRef = FirebaseDatabase.getInstance().getReference().child(&quot;message&quot;).child(currentUserID);\n     \n\n long cutoff = new Date().getTime() - TimeUnit.MILLISECONDS.convert(30, TimeUnit.DAYS);\n        Query oldItems = ChatsRef.orderByChild(&quot;timestamp&quot;).endAt(cutoff);\n        oldItems.addListenerForSingleValueEvent(new ValueEventListener() {\n            @Override\n            public void onDataChange(DataSnapshot snapshot) {\n                for (DataSnapshot itemSnapshot: snapshot.getChildren()) {\n                    itemSnapshot.getRef().removeValue();\n                }\n            }\n\n            @Override\n            public void onCancelled(DatabaseError databaseError) {\n                throw databaseError.toException();\n            }\n        });\n\n</code></pre>\n<p>How can I access the timestamp of each user?</p>\n"},{"tags":["java","spring","oauth-2.0","webclient"],"owner":{"account_id":4172720,"reputation":195,"user_id":3420116,"display_name":"asyncmind"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":175,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1659620677,"creation_date":1659615877,"question_id":73235900,"body_markdown":"In a multi-tenancy Spring boot web app (with spring security 5), I need to make http requests to externals services secured by oauth2.\r\n\r\n**Each client using the same app can has multiple oauth2 config depending on external services it can access.**\r\n\r\nThere is how I instantiate my singleton WebClient:\r\n\r\n    OAuth2AuthorizedClientProvider authorizedClientProvider = OAuth2AuthorizedClientProviderBuilder.builder()\r\n    \t\t\t\t.clientCredentials()\r\n    \t\t\t\t.build();\r\n    \t\t\t\t\r\n    OAuth2AuthorizedClientRepository oAuth2AuthorizedClientRepository = new HttpSessionOAuth2AuthorizedClientRepository();\r\n    \r\n    // oAuth2ClientRegistrationDAO is my custom bean implements ClientRegistrationRepository defined below\r\n    DefaultOAuth2AuthorizedClientManager authorizedClientManager = new DefaultOAuth2AuthorizedClientManager(oAuth2ClientRegistrationDAO, oAuth2AuthorizedClientRepository);\r\n    authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\r\n    \r\n    ServletOAuth2AuthorizedClientExchangeFilterFunction filter = new ServletOAuth2AuthorizedClientExchangeFilterFunction(\r\n    \t\t\t\tauthorizedClientManager);\r\n\r\n    // WebClient to be used to communicate thought oauth2 secured webservices\t\t\t\t\r\n    WebClient webClient = WebClient.builder().apply(filter.oauth2Configuration()).build();\r\n\r\nThis is my custom bean implements ClientRegistrationRepository used to provide right Oauth2 parameters depending on registrationId value:\r\n\r\n    @Repository\r\n    public class OAuth2ClientRegistrationDAO implements ClientRegistrationRepository {\r\n    \r\n    \t@Override\r\n    \tpublic ClientRegistration findByRegistrationId(String registrationId) {\r\n    \t\r\n    \t\t// Problem: auth object is NULL! \r\n    \t\tAuthentication auth = SecurityContextHolder.getContext().getAuthentication();\r\n    \t\r\n    \t\tSystem.out.println(auth); // print: null\r\n    \t\r\n    \t\t// TODO get ClientRegistration from right database\r\n    \t\t// (depending logged tenant, fetched from Authentication object) and return them\r\n    \t}\r\n    }\r\n\r\n**The problem is when I do a request like this:**\r\n\r\n    // Here, auth is not null: Ok!\r\n    Authentication auth = SecurityContextHolder.getContext().getAuthentication();\r\n\t\r\n    webClient.get()\r\n    \t.uri(&quot;[External webservice url secured with oauth2]&quot;)\r\n    \t.attributes(\r\n    \t\t\tServerOAuth2AuthorizedClientExchangeFilterFunction\r\n    \t\t\t  .clientRegistrationId(&quot;[registrationId]&quot;))\r\n    \t.retrieve()\r\n    \t.bodyToMono(String.class)\r\n    \t.block();\r\nMy Authentication object of logged user is null into OAuth2ClientRegistrationDAO **because on asynchronous implementation of WebClient, method findByRegistrationId() is called on another thread than this used by Authenticated spring app client**.\r\n\r\nEdit: I found a potential solution using `SecurityContextHolder.setStrategyName(SecurityContextHolder.MODE_INHERITABLETHREADLOCAL);` Authentication context is still present on other thread with this configuration","title":"Authentication object loss into ClientRegistrationRepository.findByRegistrationId() method for WebClient with oauth2 filters","body":"<p>In a multi-tenancy Spring boot web app (with spring security 5), I need to make http requests to externals services secured by oauth2.</p>\n<p><strong>Each client using the same app can has multiple oauth2 config depending on external services it can access.</strong></p>\n<p>There is how I instantiate my singleton WebClient:</p>\n<pre><code>OAuth2AuthorizedClientProvider authorizedClientProvider = OAuth2AuthorizedClientProviderBuilder.builder()\n                .clientCredentials()\n                .build();\n                \nOAuth2AuthorizedClientRepository oAuth2AuthorizedClientRepository = new HttpSessionOAuth2AuthorizedClientRepository();\n\n// oAuth2ClientRegistrationDAO is my custom bean implements ClientRegistrationRepository defined below\nDefaultOAuth2AuthorizedClientManager authorizedClientManager = new DefaultOAuth2AuthorizedClientManager(oAuth2ClientRegistrationDAO, oAuth2AuthorizedClientRepository);\nauthorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\n\nServletOAuth2AuthorizedClientExchangeFilterFunction filter = new ServletOAuth2AuthorizedClientExchangeFilterFunction(\n                authorizedClientManager);\n\n// WebClient to be used to communicate thought oauth2 secured webservices               \nWebClient webClient = WebClient.builder().apply(filter.oauth2Configuration()).build();\n</code></pre>\n<p>This is my custom bean implements ClientRegistrationRepository used to provide right Oauth2 parameters depending on registrationId value:</p>\n<pre><code>@Repository\npublic class OAuth2ClientRegistrationDAO implements ClientRegistrationRepository {\n\n    @Override\n    public ClientRegistration findByRegistrationId(String registrationId) {\n    \n        // Problem: auth object is NULL! \n        Authentication auth = SecurityContextHolder.getContext().getAuthentication();\n    \n        System.out.println(auth); // print: null\n    \n        // TODO get ClientRegistration from right database\n        // (depending logged tenant, fetched from Authentication object) and return them\n    }\n}\n</code></pre>\n<p><strong>The problem is when I do a request like this:</strong></p>\n<pre><code>// Here, auth is not null: Ok!\nAuthentication auth = SecurityContextHolder.getContext().getAuthentication();\n\nwebClient.get()\n    .uri(&quot;[External webservice url secured with oauth2]&quot;)\n    .attributes(\n            ServerOAuth2AuthorizedClientExchangeFilterFunction\n              .clientRegistrationId(&quot;[registrationId]&quot;))\n    .retrieve()\n    .bodyToMono(String.class)\n    .block();\n</code></pre>\n<p>My Authentication object of logged user is null into OAuth2ClientRegistrationDAO <strong>because on asynchronous implementation of WebClient, method findByRegistrationId() is called on another thread than this used by Authenticated spring app client</strong>.</p>\n<p>Edit: I found a potential solution using <code>SecurityContextHolder.setStrategyName(SecurityContextHolder.MODE_INHERITABLETHREADLOCAL);</code> Authentication context is still present on other thread with this configuration</p>\n"},{"tags":["java","rounding-error"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1659621695,"post_id":73236995,"comment_id":129342290,"body_markdown":"try printing `new BigDecimal(9999.005).toString()`;  or use `new BigDecimal(&quot;9999.005&quot;)` in your tests - floating point numbers like `double` and `float` (often) are just approximations) (and this kind of question is not exactly new on this site)","body":"try printing <code>new BigDecimal(9999.005).toString()</code>;  or use <code>new BigDecimal(&quot;9999.005&quot;)</code> in your tests - floating point numbers like <code>double</code> and <code>float</code> (often) are just approximations) (and this kind of question is not exactly new on this site)"},{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":1,"creation_date":1659621908,"post_id":73236995,"comment_id":129342368,"body_markdown":"Does this answer your question? [How to round 0.745 to 0.75 using BigDecimal.ROUND\\_HALF\\_UP?](https://stackoverflow.com/questions/12460482/how-to-round-0-745-to-0-75-using-bigdecimal-round-half-up) Specifically use a string conversion `new BigDecimal(&quot;9999.005&quot;)` or use the valueOf method to retain precision of the double `new BigDecimal.valueOf(9999.005)`","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/12460482/how-to-round-0-745-to-0-75-using-bigdecimal-round-half-up\">How to round 0.745 to 0.75 using BigDecimal.ROUND_HALF_UP?</a> Specifically use a string conversion <code>new BigDecimal(&quot;9999.005&quot;)</code> or use the valueOf method to retain precision of the double <code>new BigDecimal.valueOf(9999.005)</code>"},{"owner":{"account_id":3291356,"reputation":31,"user_id":2769607,"display_name":"user2769607"},"score":0,"creation_date":1659622677,"post_id":73236995,"comment_id":129342667,"body_markdown":"You both are right. Never knew floats and doubles loses precision. I tried the string values and they round up as expected.","body":"You both are right. Never knew floats and doubles loses precision. I tried the string values and they round up as expected."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1659623409,"post_id":73236995,"comment_id":129343001,"body_markdown":"basically `9999.005` cannot be expressed precisely as `double` (like we cannot write 1/3 precisely as a floating point - needs infinite digits)","body":"basically <code>9999.005</code> cannot be expressed precisely as <code>double</code> (like we cannot write 1/3 precisely as a floating point - needs infinite digits)"}],"owner":{"account_id":3291356,"reputation":31,"user_id":2769607,"display_name":"user2769607"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"closed_date":1659622684,"answer_count":0,"score":3,"last_activity_date":1659620411,"creation_date":1659620411,"question_id":73236995,"body_markdown":"I stumbled across following scenario where how rounding works does not make sense to me.\r\n```\r\nnew BigDecimal(9999.005).setScale(2, RoundingMode.HALF_UP) -- 9999.0\r\nnew BigDecimal(999.005).setScale(2, RoundingMode.HALF_UP) -- 999.0\r\nnew BigDecimal(9.005).setScale(2, RoundingMode.HALF_UP) -- 9.01\r\nMath.round(9999.005*100.00)/100.000 -- 9999.0\r\nMath.round(999.005*100.00)/100.000 -- 999.01\r\nMath.round(9.005*100.00)/100.000 -- 9.01\r\n```\r\nMy understanding is when RoundingMode.HALF_UP is used, it should convert all three values .01 regardless of what is the number before decimal.\r\n\r\nJava documentation - Rounding mode to round towards {@literal &quot;nearest neighbor&quot;}\r\n         * unless both neighbors are equidistant, in which case round up.\r\n         * Behaves as for {@code RoundingMode.UP} if the discarded\r\n         * fraction is &amp;ge; 0.5; otherwise, behaves as for\r\n         * {@code RoundingMode.DOWN}.  Note that this is the rounding\r\n         * mode commonly taught at school.\r\n\r\nAm I wrong in the understanding on how this should work?","title":"Rounding in java shows different result","body":"<p>I stumbled across following scenario where how rounding works does not make sense to me.</p>\n<pre><code>new BigDecimal(9999.005).setScale(2, RoundingMode.HALF_UP) -- 9999.0\nnew BigDecimal(999.005).setScale(2, RoundingMode.HALF_UP) -- 999.0\nnew BigDecimal(9.005).setScale(2, RoundingMode.HALF_UP) -- 9.01\nMath.round(9999.005*100.00)/100.000 -- 9999.0\nMath.round(999.005*100.00)/100.000 -- 999.01\nMath.round(9.005*100.00)/100.000 -- 9.01\n</code></pre>\n<p>My understanding is when RoundingMode.HALF_UP is used, it should convert all three values .01 regardless of what is the number before decimal.</p>\n<p>Java documentation - Rounding mode to round towards {@literal &quot;nearest neighbor&quot;}\n* unless both neighbors are equidistant, in which case round up.\n* Behaves as for {@code RoundingMode.UP} if the discarded\n* fraction is ≥ 0.5; otherwise, behaves as for\n* {@code RoundingMode.DOWN}.  Note that this is the rounding\n* mode commonly taught at school.</p>\n<p>Am I wrong in the understanding on how this should work?</p>\n"},{"tags":["java","spring-boot","facet","hibernate-search","faceted-search"],"comments":[{"owner":{"account_id":4645073,"reputation":1083,"user_id":3763679,"display_name":"Andreas Radauer"},"score":0,"creation_date":1639522968,"post_id":70243614,"comment_id":124369313,"body_markdown":"I implemented my example with Hibernate Search 6. And also with aggregations I don&#39;t know how to achieve my target","body":"I implemented my example with Hibernate Search 6. And also with aggregations I don&#39;t know how to achieve my target"},{"owner":{"account_id":2082352,"reputation":792,"user_id":1854103,"display_name":"Tijkijiki"},"score":1,"creation_date":1640035158,"post_id":70243614,"comment_id":124495618,"body_markdown":"Can you describe current behavior and expected behavior more precisely please?","body":"Can you describe current behavior and expected behavior more precisely please?"},{"owner":{"account_id":4645073,"reputation":1083,"user_id":3763679,"display_name":"Andreas Radauer"},"score":0,"creation_date":1640039058,"post_id":70243614,"comment_id":124496651,"body_markdown":"ok an other Example: I have Jobs\nJava in London, Java in Paris, C# in Paris, Python in Vienna\nThe Facets would look like this\nCity:\nParis, \nLondon, \nVienna, \nLanguages:\nJava, \nC#, \nPython\n\nIf I select java. Facets look like this:\nCity: \nParis, \nLondon,\nLanguages:\nJava  \nBut this is not how for example amazon would show it. Java would not affect the values in the language group. The aggregation should return all possible values of the language group filtered by the city group.","body":"ok an other Example: I have Jobs Java in London, Java in Paris, C# in Paris, Python in Vienna The Facets would look like this City: Paris,  London,  Vienna,  Languages: Java,  C#,  Python  If I select java. Facets look like this: City:  Paris,  London, Languages: Java   But this is not how for example amazon would show it. Java would not affect the values in the language group. The aggregation should return all possible values of the language group filtered by the city group."}],"answers":[{"tags":[],"owner":{"account_id":8974783,"reputation":9445,"user_id":6692043,"display_name":"yrodiere"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659620252,"creation_date":1659620252,"answer_id":73236954,"question_id":70243614,"body_markdown":"There is already an enhancement request about this: https://hibernate.atlassian.net/browse/HSEARCH-713","title":"Selected facet should not filter own group using hibernate search","body":"<p>There is already an enhancement request about this: <a href=\"https://hibernate.atlassian.net/browse/HSEARCH-713\" rel=\"nofollow noreferrer\">https://hibernate.atlassian.net/browse/HSEARCH-713</a></p>\n"}],"owner":{"account_id":4645073,"reputation":1083,"user_id":3763679,"display_name":"Andreas Radauer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":195,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":73236954,"answer_count":1,"score":3,"last_activity_date":1659620252,"creation_date":1638784570,"question_id":70243614,"body_markdown":"If I have some Products with color and size.\r\nJeans Blue Size L\r\nJeans Red Size S\r\nT-shirt REd Size S\r\nand so on..\r\n\r\nDoing a facet search using hibernate-search works as quite well. But if I select one of the criteria, I would expect that the values of the own group are not filtered.\r\nfor Example\r\n\r\nColor\r\nRed (2)\r\nBlue (3)\r\n\r\nSize\r\nS (1)\r\nM (2)\r\nL (3)\r\n\r\nIf I selected the red color using something like this\r\n\r\n    fullTextQuery.getFacetManager().getFacetGroup(FACET_COLOR).selectFacets(colorFacet)\r\n\r\nThis selection should influence the overall Results of the Item List and the Result of the Size Facets. But of course I don&#39;t want that the Blue option to vanish. My expected behavior is pretty much how its done on bigger ecommerce sites.\r\nBut in my example the selected color red also changes the own group.\r\n\r\nI’m I missing something?\r\nThis is my example:\r\n\r\n    public SearchResponse search(SearchRequest request)\r\n        {\r\n    \r\n            FullTextEntityManager fullTextEntityManager = Search.getFullTextEntityManager(entityManager);\r\n    \r\n            QueryBuilder queryBuilder =\r\n              fullTextEntityManager.getSearchFactory().buildQueryBuilder().forEntity(Product.class).get();\r\n    \r\n            BooleanJunction bool = queryBuilder.bool().must(queryBuilder.all().createQuery());\r\n    \r\n            FacetingRequest colorFacetRequest = queryBuilder.facet().name(FACET_COLOR).onField(FACET_COLOR)\r\n              .discrete().createFacetingRequest();\r\n    \r\n            FacetingRequest sizeFacetRequest = queryBuilder.facet().name(FACET_SIZE).onField(FACET_SIZE)\r\n              .discrete().createFacetingRequest();\r\n    \r\n            FullTextQuery fullTextQuery = fullTextEntityManager.createFullTextQuery(bool.createQuery(), Product.class);\r\n            fullTextQuery.getFacetManager().enableFaceting(colorFacetRequest);\r\n            fullTextQuery.getFacetManager().enableFaceting(sizeFacetRequest);\r\n    \r\n            if (!StringUtils.isEmpty(request.color))\r\n            {\r\n                fullTextQuery.getFacetManager().getFacets(FACET_COLOR)\r\n                  .stream().filter(f -&gt; f.getValue().equals(request.color)).forEach(found -&gt; {\r\n                      fullTextQuery.getFacetManager().getFacetGroup(FACET_COLOR).selectFacets(found);\r\n                  });\r\n            }\r\n    \r\n            if (!StringUtils.isEmpty(request.size))\r\n            {\r\n                fullTextQuery.getFacetManager().getFacets(FACET_SIZE)\r\n                  .stream().filter(f -&gt; f.getValue().equals(request.size)).forEach(found -&gt; {\r\n                      fullTextQuery.getFacetManager().getFacetGroup(FACET_SIZE).selectFacets(found);\r\n    \r\n                  });\r\n            }\r\n    \r\n            List&lt;SearchFacet&gt; colorFacet = fullTextQuery.getFacetManager().getFacets(FACET_COLOR)\r\n              .stream().map(f -&gt; new SearchFacet(f.getValue(), f.getCount())).collect(Collectors.toList());\r\n            List&lt;SearchFacet&gt; sizeFacet = fullTextQuery.getFacetManager().getFacets(FACET_SIZE)\r\n              .stream().map(f -&gt; new SearchFacet(f.getValue(), f.getCount())).collect(Collectors.toList());\r\n    \r\n            return new SearchResponse(sizeFacet, colorFacet, fullTextQuery.getResultList());\r\n    \r\n        }\r\n\r\ndisabling each group before the getFacets Methods does not seem very clean\r\n\r\nThanks","title":"Selected facet should not filter own group using hibernate search","body":"<p>If I have some Products with color and size.\nJeans Blue Size L\nJeans Red Size S\nT-shirt REd Size S\nand so on..</p>\n<p>Doing a facet search using hibernate-search works as quite well. But if I select one of the criteria, I would expect that the values of the own group are not filtered.\nfor Example</p>\n<p>Color\nRed (2)\nBlue (3)</p>\n<p>Size\nS (1)\nM (2)\nL (3)</p>\n<p>If I selected the red color using something like this</p>\n<pre><code>fullTextQuery.getFacetManager().getFacetGroup(FACET_COLOR).selectFacets(colorFacet)\n</code></pre>\n<p>This selection should influence the overall Results of the Item List and the Result of the Size Facets. But of course I don't want that the Blue option to vanish. My expected behavior is pretty much how its done on bigger ecommerce sites.\nBut in my example the selected color red also changes the own group.</p>\n<p>I’m I missing something?\nThis is my example:</p>\n<pre><code>public SearchResponse search(SearchRequest request)\n    {\n\n        FullTextEntityManager fullTextEntityManager = Search.getFullTextEntityManager(entityManager);\n\n        QueryBuilder queryBuilder =\n          fullTextEntityManager.getSearchFactory().buildQueryBuilder().forEntity(Product.class).get();\n\n        BooleanJunction bool = queryBuilder.bool().must(queryBuilder.all().createQuery());\n\n        FacetingRequest colorFacetRequest = queryBuilder.facet().name(FACET_COLOR).onField(FACET_COLOR)\n          .discrete().createFacetingRequest();\n\n        FacetingRequest sizeFacetRequest = queryBuilder.facet().name(FACET_SIZE).onField(FACET_SIZE)\n          .discrete().createFacetingRequest();\n\n        FullTextQuery fullTextQuery = fullTextEntityManager.createFullTextQuery(bool.createQuery(), Product.class);\n        fullTextQuery.getFacetManager().enableFaceting(colorFacetRequest);\n        fullTextQuery.getFacetManager().enableFaceting(sizeFacetRequest);\n\n        if (!StringUtils.isEmpty(request.color))\n        {\n            fullTextQuery.getFacetManager().getFacets(FACET_COLOR)\n              .stream().filter(f -&gt; f.getValue().equals(request.color)).forEach(found -&gt; {\n                  fullTextQuery.getFacetManager().getFacetGroup(FACET_COLOR).selectFacets(found);\n              });\n        }\n\n        if (!StringUtils.isEmpty(request.size))\n        {\n            fullTextQuery.getFacetManager().getFacets(FACET_SIZE)\n              .stream().filter(f -&gt; f.getValue().equals(request.size)).forEach(found -&gt; {\n                  fullTextQuery.getFacetManager().getFacetGroup(FACET_SIZE).selectFacets(found);\n\n              });\n        }\n\n        List&lt;SearchFacet&gt; colorFacet = fullTextQuery.getFacetManager().getFacets(FACET_COLOR)\n          .stream().map(f -&gt; new SearchFacet(f.getValue(), f.getCount())).collect(Collectors.toList());\n        List&lt;SearchFacet&gt; sizeFacet = fullTextQuery.getFacetManager().getFacets(FACET_SIZE)\n          .stream().map(f -&gt; new SearchFacet(f.getValue(), f.getCount())).collect(Collectors.toList());\n\n        return new SearchResponse(sizeFacet, colorFacet, fullTextQuery.getResultList());\n\n    }\n</code></pre>\n<p>disabling each group before the getFacets Methods does not seem very clean</p>\n<p>Thanks</p>\n"},{"tags":["java","html","api"],"comments":[{"owner":{"account_id":8198,"reputation":176773,"user_id":14637,"accept_rate":88,"display_name":"Thomas"},"score":0,"creation_date":1659619401,"post_id":73236730,"comment_id":129341351,"body_markdown":"Java can read from files or environment variables just as well. Or do you mean it&#39;s a Java**Script** project? Those are _very_ different things.","body":"Java can read from files or environment variables just as well. Or do you mean it&#39;s a Java<b>Script</b> project? Those are <i>very</i> different things."}],"answers":[{"tags":[],"owner":{"display_name":"user19691658"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659620103,"creation_date":1659620103,"answer_id":73236923,"question_id":73236730,"body_markdown":"Since you&#39;re using that key in an HTML tag, hiding it from Git commit won&#39;t make your key safe from public access because anyways on production the key will be publicly accessible since the clients can see HTML code that the server is sending.\r\n\r\nIf you just want to make sure that the key won&#39;t be committed to Git, then I can think of two methods in that case.\r\n\r\n1. Keep the key in a separate file (like the .env that we usually use with nodejs), read the file contents using Java (Since you said Java is used instead of nodejs), and while rendering the webpage simply put that key in the output.\r\n\r\n2. Create a javascript file and keep your key in that script file (assign it to a variable)\r\nAnd then in your HTML file you can simply write a JavaScript code like this:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;script src=&quot;env.js&quot;&gt;&lt;/script&gt;\r\n\r\n    &lt;script&gt;\r\n        var s = document.createElement(&quot;script&quot;);\r\n        s.type = &quot;text/javascript&quot;;\r\n        s.src = &quot;https://maps.googleapis.com/maps/api/js?key=&quot;+myKey+&quot;&amp;callback=initMap&quot;;\r\n        $(&quot;head&quot;).append(s);\r\n    &lt;/script&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nMake sure that you&#39;re creating a variable with the name &quot;myKey&quot; in your env.js file.\r\n\r\nNow you can simply add your env.js file to .gitignore","title":"Hiding API key when committing changes to GitHub","body":"<p>Since you're using that key in an HTML tag, hiding it from Git commit won't make your key safe from public access because anyways on production the key will be publicly accessible since the clients can see HTML code that the server is sending.</p>\n<p>If you just want to make sure that the key won't be committed to Git, then I can think of two methods in that case.</p>\n<ol>\n<li><p>Keep the key in a separate file (like the .env that we usually use with nodejs), read the file contents using Java (Since you said Java is used instead of nodejs), and while rendering the webpage simply put that key in the output.</p>\n</li>\n<li><p>Create a javascript file and keep your key in that script file (assign it to a variable)\nAnd then in your HTML file you can simply write a JavaScript code like this:</p>\n</li>\n</ol>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"env.js\"&gt;&lt;/script&gt;\n\n&lt;script&gt;\n    var s = document.createElement(\"script\");\n    s.type = \"text/javascript\";\n    s.src = \"https://maps.googleapis.com/maps/api/js?key=\"+myKey+\"&amp;callback=initMap\";\n    $(\"head\").append(s);\n&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Make sure that you're creating a variable with the name &quot;myKey&quot; in your env.js file.</p>\n<p>Now you can simply add your env.js file to .gitignore</p>\n"}],"owner":{"account_id":25967801,"reputation":1,"user_id":19683512,"display_name":"ginny100"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1659620103,"creation_date":1659619208,"question_id":73236730,"body_markdown":"I have a Java project which contains an ```index.html``` file. In this html file, I need to access an API key with this line of code:\r\n\r\n    &lt;script src=&quot;https://maps.googleapis.com/maps/api/js?key=ABCDEFGHijklmnopqrst12345&amp;callback=initMap&quot;&gt;&lt;/script&gt;\r\n\r\nI want to commit this file to GitHub, but I do not want to show my API key. However, I cannot achieve this by storing my API key in an ```.env``` file since my project has nothing to do with ```node.js```, it&#39;s just a Java project.\r\n\r\nPlease give me some advice on how I can store my API key within my project and make sure it won&#39;t be committed to GitHub. Thanks in advance.","title":"Hiding API key when committing changes to GitHub","body":"<p>I have a Java project which contains an <code>index.html</code> file. In this html file, I need to access an API key with this line of code:</p>\n<pre><code>&lt;script src=&quot;https://maps.googleapis.com/maps/api/js?key=ABCDEFGHijklmnopqrst12345&amp;callback=initMap&quot;&gt;&lt;/script&gt;\n</code></pre>\n<p>I want to commit this file to GitHub, but I do not want to show my API key. However, I cannot achieve this by storing my API key in an <code>.env</code> file since my project has nothing to do with <code>node.js</code>, it's just a Java project.</p>\n<p>Please give me some advice on how I can store my API key within my project and make sure it won't be committed to GitHub. Thanks in advance.</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1659620132,"post_id":73236878,"comment_id":129341664,"body_markdown":"`Collection&lt;Object&gt;` says it is a collection of Objects, a `Collection&lt;Integer&gt;` is a collection of Integers, which are also Objects. You can add `String` to `Collection&lt;Object&gt;` but not to `Collection&lt;Integer&gt;` Hence, if you want to refer to the fact the Integer are Objects you can say, I have a `Collection&lt;? extends Object&gt;` That way you know `?` is more specific than `Object` but you only need to know they&#39;re Objects. eg. You cannot add a String to it.","body":"<code>Collection&lt;Object&gt;</code> says it is a collection of Objects, a <code>Collection&lt;Integer&gt;</code> is a collection of Integers, which are also Objects. You can add <code>String</code> to <code>Collection&lt;Object&gt;</code> but not to <code>Collection&lt;Integer&gt;</code> Hence, if you want to refer to the fact the Integer are Objects you can say, I have a <code>Collection&lt;? extends Object&gt;</code> That way you know <code>?</code> is more specific than <code>Object</code> but you only need to know they&#39;re Objects. eg. You cannot add a String to it."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1659620255,"post_id":73236878,"comment_id":129341712,"body_markdown":"You can *add* any kind of object into a `Collection&lt;Object&gt;`, but you can only add integers to `Collection&lt;Integer&gt;`, so clearly `Collection&lt;Object&gt;` is not a supertype of `Collection&lt;Integer&gt;`. Now try adding things to `Collection&lt;?&gt;` :)","body":"You can <i>add</i> any kind of object into a <code>Collection&lt;Object&gt;</code>, but you can only add integers to <code>Collection&lt;Integer&gt;</code>, so clearly <code>Collection&lt;Object&gt;</code> is not a supertype of <code>Collection&lt;Integer&gt;</code>. Now try adding things to <code>Collection&lt;?&gt;</code> :)"}],"owner":{"display_name":"user10525734"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1659620125,"answer_count":0,"score":0,"last_activity_date":1659619891,"creation_date":1659619891,"question_id":73236878,"body_markdown":"I`m currently trying to study java generics and I`m trying to understand wilcards .\r\nI was reading java docs and I encountered this information below. Can you please clarify why \r\nCollection&lt;object&gt; is not the supertype of all collections and it is when we use Collection&lt;?&gt;  ?\r\nIs this because , in example , we can pass a collection into a collection ? \r\n\r\nthank you .\r\nThe text from docs is below :\r\n\r\nConsider the problem of writing a routine that prints out all the elements in a collection. Here&#39;s how you might write it in an older version of the language (that is, a pre-5.0 release):\r\n\r\n    void printCollection(Collection c) {\r\n    Iterator i = c.iterator();\r\n    for (k = 0; k &lt; c.size(); k++) {\r\n        System.out.println(i.next());\r\n    }\r\n}\r\nAnd here is a naive attempt at writing it using generics (and the new for loop syntax):\r\n\r\n         void printCollection(Collection&lt;Object&gt; c) {\r\n          for (Object e : c) {\r\n          System.out.println(e);\r\n          }\r\n            }\r\nThe problem is that this new version is much less useful than the old one. Whereas the old code could be called with any kind of collection as a parameter, the new code only takes Collection&lt;Object&gt;, which, as we&#39;ve just demonstrated, is not a supertype of all kinds of collections!\r\n\r\nSo what is the supertype of all kinds of collections? It&#39;s written Collection&lt;?&gt; (pronounced &quot;collection of unknown&quot;), that is, a collection whose element type matches anything. It&#39;s called a wildcard type for obvious reasons. We can write:\r\n\r\n        void printCollection(Collection&lt;?&gt; c) {\r\n         for (Object e : c) {\r\n        System.out.println(e);\r\n        }\r\n      }","title":"Why collection&lt;object&gt; is not the super type of all Collections?","body":"<p>I<code>m currently trying to study java generics and I</code>m trying to understand wilcards .\nI was reading java docs and I encountered this information below. Can you please clarify why\nCollection is not the supertype of all collections and it is when we use Collection&lt;?&gt;  ?\nIs this because , in example , we can pass a collection into a collection ?</p>\n<p>thank you .\nThe text from docs is below :</p>\n<p>Consider the problem of writing a routine that prints out all the elements in a collection. Here's how you might write it in an older version of the language (that is, a pre-5.0 release):</p>\n<pre><code>void printCollection(Collection c) {\nIterator i = c.iterator();\nfor (k = 0; k &lt; c.size(); k++) {\n    System.out.println(i.next());\n}\n</code></pre>\n<p>}\nAnd here is a naive attempt at writing it using generics (and the new for loop syntax):</p>\n<pre><code>     void printCollection(Collection&lt;Object&gt; c) {\n      for (Object e : c) {\n      System.out.println(e);\n      }\n        }\n</code></pre>\n<p>The problem is that this new version is much less useful than the old one. Whereas the old code could be called with any kind of collection as a parameter, the new code only takes Collection, which, as we've just demonstrated, is not a supertype of all kinds of collections!</p>\n<p>So what is the supertype of all kinds of collections? It's written Collection&lt;?&gt; (pronounced &quot;collection of unknown&quot;), that is, a collection whose element type matches anything. It's called a wildcard type for obvious reasons. We can write:</p>\n<pre><code>    void printCollection(Collection&lt;?&gt; c) {\n     for (Object e : c) {\n    System.out.println(e);\n    }\n  }\n</code></pre>\n"},{"tags":["java","spring-boot","spring-mvc","thymeleaf"],"answers":[{"tags":[],"owner":{"account_id":24430255,"reputation":88,"user_id":18355295,"display_name":"Stefan Billmaier"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659619485,"creation_date":1659619485,"answer_id":73236791,"question_id":73229134,"body_markdown":"As your screenshot states the type of variable ```e``` is not an OTPException, but an ExecutionException.\r\nThe cause of ExecutionException is an OTPException.\r\n\r\nEither change that ```service.generate(...)``` throws directly an OTPException (and does not wrap it into an ExectionException).\r\nOr change the catch block in your controller to catch ExecutionException and check the cause of the catched exception.","title":"Thymeleaf: Catch exception in controller","body":"<p>As your screenshot states the type of variable <code>e</code> is not an OTPException, but an ExecutionException.\nThe cause of ExecutionException is an OTPException.</p>\n<p>Either change that <code>service.generate(...)</code> throws directly an OTPException (and does not wrap it into an ExectionException).\nOr change the catch block in your controller to catch ExecutionException and check the cause of the catched exception.</p>\n"}],"owner":{"account_id":6070104,"reputation":1839,"user_id":4739210,"accept_rate":0,"display_name":"Aymen Kanzari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":201,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1659619485,"creation_date":1659572760,"question_id":73229134,"body_markdown":"I have the below method in the controller that I catch an error inside it\r\n    \r\n    @Controller\r\n    @RequestMapping(&quot;/popup&quot;)\r\n    public class PopupResource {\r\n    \r\n        @GetMapping\r\n        public String popup() {\r\n            try {\r\n                 service.generate(new ExistOTPValidQuery().requestNumber(&quot;test&quot;), Boolean.class).get();\r\n            } catch (OTPException e) {\r\n                  return &quot;user&quot;;\r\n            }\r\n            return &quot;error&quot;;\r\n        }\r\n    }\r\n\r\nI defined the exception\r\n\r\n    @Order(Ordered.HIGHEST_PRECEDENCE)\r\n    @ControllerAdvice()\r\n    public class GlobalExceptionHandler {\r\n    \r\n        @ExceptionHandler(OTPException.class)\r\n        public ResponseEntity&lt;Object&gt; otpException(OTPException ex) {\r\n            return buildResponseEntity(new ApiError(CustomHttpStatus.OTP_REQUEST, new Date(), ex.getMessage()),\r\n                HttpStatus.BAD_REQUEST);\r\n        }\r\n    \r\n        private ResponseEntity&lt;Object&gt; buildResponseEntity(ApiError apiError, HttpStatus status) {\r\n            return new ResponseEntity&lt;&gt;(apiError, status);\r\n        }\r\n        \r\n    }\r\n\r\nThe problem when the service throws the exception `OTPException`, it&#39;s not catched in the controller \r\n\r\n\r\nwhen I put a break point on this catch block, I get the values like in the picture below\r\n\r\n\r\n    catch (Exception e) {\r\n      if (e instanceof OTPException) { //it does not enter here\r\n          return &quot;user&quot;;\r\n      }\r\n    }\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/P5oz8.png","title":"Thymeleaf: Catch exception in controller","body":"<p>I have the below method in the controller that I catch an error inside it</p>\n<pre><code>@Controller\n@RequestMapping(&quot;/popup&quot;)\npublic class PopupResource {\n\n    @GetMapping\n    public String popup() {\n        try {\n             service.generate(new ExistOTPValidQuery().requestNumber(&quot;test&quot;), Boolean.class).get();\n        } catch (OTPException e) {\n              return &quot;user&quot;;\n        }\n        return &quot;error&quot;;\n    }\n}\n</code></pre>\n<p>I defined the exception</p>\n<pre><code>@Order(Ordered.HIGHEST_PRECEDENCE)\n@ControllerAdvice()\npublic class GlobalExceptionHandler {\n\n    @ExceptionHandler(OTPException.class)\n    public ResponseEntity&lt;Object&gt; otpException(OTPException ex) {\n        return buildResponseEntity(new ApiError(CustomHttpStatus.OTP_REQUEST, new Date(), ex.getMessage()),\n            HttpStatus.BAD_REQUEST);\n    }\n\n    private ResponseEntity&lt;Object&gt; buildResponseEntity(ApiError apiError, HttpStatus status) {\n        return new ResponseEntity&lt;&gt;(apiError, status);\n    }\n    \n}\n</code></pre>\n<p>The problem when the service throws the exception <code>OTPException</code>, it's not catched in the controller</p>\n<p>when I put a break point on this catch block, I get the values like in the picture below</p>\n<pre><code>catch (Exception e) {\n  if (e instanceof OTPException) { //it does not enter here\n      return &quot;user&quot;;\n  }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/P5oz8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P5oz8.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":186438,"reputation":11018,"user_id":423823,"display_name":"Zelimir"},"score":0,"creation_date":1296592927,"post_id":4609456,"comment_id":5410724,"body_markdown":"Have you found the way how to resize drawable (Bitmap)?","body":"Have you found the way how to resize drawable (Bitmap)?"},{"owner":{"account_id":896925,"reputation":1592,"user_id":933969,"accept_rate":100,"display_name":"William T. Mallard"},"score":2,"creation_date":1385111662,"post_id":4609456,"comment_id":30017579,"body_markdown":"Way late, but wondering why you weren&#39;t calling `setCompoundDrawables()`?  Intrinsic refers to the original image size in other places within Android, e.g. `Drawable.getIntrinsicHeight()`.","body":"Way late, but wondering why you weren&#39;t calling <code>setCompoundDrawables()</code>?  Intrinsic refers to the original image size in other places within Android, e.g. <code>Drawable.getIntrinsicHeight()</code>."}],"answers":[{"tags":[],"owner":{"account_id":273172,"reputation":45,"user_id":564612,"accept_rate":75,"display_name":"user564612"},"down_vote_count":54,"up_vote_count":7,"is_accepted":false,"score":-47,"last_activity_date":1328016954,"creation_date":1294263950,"answer_id":4609540,"question_id":4609456,"body_markdown":"    Button button = new Button(this);\r\n    Button = (Button) findViewById(R.id.button01);\r\n\r\nUse `Button.setHeight()` or `Button.setWeight()` and set a value.","title":"Set drawable size programmatically","body":"<pre><code>Button button = new Button(this);\nButton = (Button) findViewById(R.id.button01);\n</code></pre>\n\n<p>Use <code>Button.setHeight()</code> or <code>Button.setWeight()</code> and set a value.</p>\n"},{"tags":[],"owner":{"account_id":130475,"reputation":7330,"user_id":329776,"display_name":"jkhouw1"},"down_vote_count":6,"up_vote_count":40,"is_accepted":false,"score":34,"last_activity_date":1328016951,"creation_date":1303007896,"answer_id":5691074,"question_id":4609456,"body_markdown":"Specify the size with `setBounds()`, ie for a 50x50 size use\r\n\r\n    drawable.setBounds(0, 0, 50, 50);\r\n\r\n\r\n\r\n&gt; public void setBounds (int left, int top, int right, int bottom) \r\n","title":"Set drawable size programmatically","body":"<p>Specify the size with <code>setBounds()</code>, ie for a 50x50 size use</p>\n\n<pre><code>drawable.setBounds(0, 0, 50, 50);\n</code></pre>\n\n<blockquote>\n  <p>public void setBounds (int left, int top, int right, int bottom) </p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":221465,"reputation":3582,"user_id":479478,"accept_rate":75,"display_name":"Eric Chen"},"down_vote_count":1,"up_vote_count":178,"is_accepted":false,"score":177,"last_activity_date":1349888377,"creation_date":1325072485,"answer_id":8655456,"question_id":4609456,"body_markdown":"The `setBounds()` method doesn&#39;t work for every type of container (did work for some of my `ImageView`&#39;s, however).\r\n\r\nTry the method below to scale the drawable itself:\r\n\r\n    // Read your drawable from somewhere\r\n    Drawable dr = getResources().getDrawable(R.drawable.somedrawable);\r\n    Bitmap bitmap = ((BitmapDrawable) dr).getBitmap();\r\n    // Scale it to 50 x 50\r\n    Drawable d = new BitmapDrawable(getResources(), Bitmap.createScaledBitmap(bitmap, 50, 50, true));\r\n    // Set your new, scaled drawable &quot;d&quot;","title":"Set drawable size programmatically","body":"<p>The <code>setBounds()</code> method doesn't work for every type of container (did work for some of my <code>ImageView</code>'s, however).</p>\n\n<p>Try the method below to scale the drawable itself:</p>\n\n<pre><code>// Read your drawable from somewhere\nDrawable dr = getResources().getDrawable(R.drawable.somedrawable);\nBitmap bitmap = ((BitmapDrawable) dr).getBitmap();\n// Scale it to 50 x 50\nDrawable d = new BitmapDrawable(getResources(), Bitmap.createScaledBitmap(bitmap, 50, 50, true));\n// Set your new, scaled drawable \"d\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":180740,"reputation":2722,"user_id":414266,"accept_rate":100,"display_name":"Zulaxia"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1331488935,"creation_date":1331488935,"answer_id":9657424,"question_id":4609456,"body_markdown":"You can create a subclass of the view type, and override the onSizeChanged method.\r\n\r\nI wanted to have scaling compound drawables on my text views that didn&#39;t require me to mess around with defining bitmap drawables in xml, etc. and did it this way:\r\n\r\n    public class StatIcon extends TextView {\r\n\r\n\t\tprivate Bitmap mIcon;\r\n\r\n    \tpublic void setIcon(int drawableId) {\r\n\t\tmIcon = BitmapFactory.decodeResource(RIApplication.appResources,\r\n\t\t\t\tdrawableId);\r\n\t\t}\r\n    \r\n    \t@Override\r\n\t\tprotected void onSizeChanged(int w, int h, int oldw, int oldh) {\r\n\t\t\tif ((w &gt; 0) &amp;&amp; (mIcon != null))\r\n\t\t\t\tthis.setCompoundDrawablesWithIntrinsicBounds(\r\n\t\t\t\t\tnull,\r\n\t\t\t\t\tnew BitmapDrawable(Bitmap.createScaledBitmap(mIcon, w, w,\r\n\t\t\t\t\t\t\ttrue)), null, null);\r\n    \r\n\t\t\tsuper.onSizeChanged(w, h, oldw, oldh);\r\n\t\t}\r\n    \r\n    }\r\n\r\n*(Note that I used w twice, not h, as in this case I was putting the icon above the text, and thus the icon shouldn&#39;t have the same height as the text view)*\r\n\r\nThis can be applied to background drawables, or anything else you want to resize relative to your view size. onSizeChanged() is called the first time the View is made, so you don&#39;t need any special cases for initialising the size.","title":"Set drawable size programmatically","body":"<p>You can create a subclass of the view type, and override the onSizeChanged method.</p>\n\n<p>I wanted to have scaling compound drawables on my text views that didn't require me to mess around with defining bitmap drawables in xml, etc. and did it this way:</p>\n\n<pre><code>public class StatIcon extends TextView {\n\n    private Bitmap mIcon;\n\n    public void setIcon(int drawableId) {\n    mIcon = BitmapFactory.decodeResource(RIApplication.appResources,\n            drawableId);\n    }\n\n    @Override\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\n        if ((w &gt; 0) &amp;&amp; (mIcon != null))\n            this.setCompoundDrawablesWithIntrinsicBounds(\n                null,\n                new BitmapDrawable(Bitmap.createScaledBitmap(mIcon, w, w,\n                        true)), null, null);\n\n        super.onSizeChanged(w, h, oldw, oldh);\n    }\n\n}\n</code></pre>\n\n<p><em>(Note that I used w twice, not h, as in this case I was putting the icon above the text, and thus the icon shouldn't have the same height as the text view)</em></p>\n\n<p>This can be applied to background drawables, or anything else you want to resize relative to your view size. onSizeChanged() is called the first time the View is made, so you don't need any special cases for initialising the size.</p>\n"},{"tags":[],"owner":{"account_id":141284,"reputation":2245,"user_id":348192,"display_name":"iBog"},"down_vote_count":4,"up_vote_count":18,"is_accepted":false,"score":14,"last_activity_date":1371736129,"creation_date":1371736129,"answer_id":17215366,"question_id":4609456,"body_markdown":"Before apply .setBounds(..) try to convert current Drawable into ScaleDrawable\r\n\r\n    drawable = new ScaleDrawable(drawable, 0, width, height).getDrawable();\r\n\r\nafter that \r\n\r\n    drawable.setBounds(0, 0, width, height);\r\nwill work","title":"Set drawable size programmatically","body":"<p>Before apply .setBounds(..) try to convert current Drawable into ScaleDrawable</p>\n\n<pre><code>drawable = new ScaleDrawable(drawable, 0, width, height).getDrawable();\n</code></pre>\n\n<p>after that </p>\n\n<pre><code>drawable.setBounds(0, 0, width, height);\n</code></pre>\n\n<p>will work</p>\n"},{"tags":[],"owner":{"account_id":1538645,"reputation":742,"user_id":2930101,"accept_rate":52,"display_name":"OneEyeQuestion"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1385861016,"creation_date":1385861016,"answer_id":20307688,"question_id":4609456,"body_markdown":"Use the post method to achieve the desired effect:\r\n\r\n    {your view}.post(new Runnable()\r\n\t\t{\r\n\t\t\t@Override\r\n\t\t\tpublic void run()\r\n\t\t\t{\r\n\t\t\t\tDrawable image = context.getResources().getDrawable({drawable image resource id});\r\n\t\t\t\timage.setBounds(0, 0, {width amount in pixels}, {height amount in pixels});\r\n\t\t\t\t{your view}.setCompoundDrawables(image, null, null, null);\r\n\t\t\t}\r\n\t\t});","title":"Set drawable size programmatically","body":"<p>Use the post method to achieve the desired effect:</p>\n\n<pre><code>{your view}.post(new Runnable()\n    {\n        @Override\n        public void run()\n        {\n            Drawable image = context.getResources().getDrawable({drawable image resource id});\n            image.setBounds(0, 0, {width amount in pixels}, {height amount in pixels});\n            {your view}.setCompoundDrawables(image, null, null, null);\n        }\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7026976,"reputation":382,"user_id":5384043,"accept_rate":14,"display_name":"Androbean Studio"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1464506605,"creation_date":1464506605,"answer_id":37507292,"question_id":4609456,"body_markdown":"Probably a little late. But here is the solution that finally worked for me in every situation.\r\n\r\nThe idea is to create a custom drawable with fixed intrinic size and pass the drawing job on to the original drawable.\r\n\r\n \r\n\r\n    Drawable icon = new ColorDrawable(){\r\n        \tDrawable iconOrig = resolveInfo.loadIcon(packageManager);\r\n        \r\n        \t@Override\r\n        \tpublic void setBounds(int left, int top, int right, int bottom){\r\n        \t\tsuper.setBounds(left, top, right, bottom);//This is needed so that getBounds on this class would work correctly.\r\n        \t\ticonOrig.setBounds(left, top, right, bottom);\r\n        \t}\r\n        \r\n        \t@Override\r\n        \tpublic void draw(Canvas canvas){\r\n        \t\ticonOrig.draw(canvas);\r\n        \t}\r\n        \r\n        \t@Override\r\n        \tpublic int getIntrinsicWidth(){\r\n        \t\treturn  mPlatform.dp2px(30);\r\n        \t}\r\n        \r\n        \t@Override\r\n        \tpublic int getIntrinsicHeight(){\r\n        \t\treturn  mPlatform.dp2px(30);\r\n        \t}\r\n        };","title":"Set drawable size programmatically","body":"<p>Probably a little late. But here is the solution that finally worked for me in every situation.</p>\n\n<p>The idea is to create a custom drawable with fixed intrinic size and pass the drawing job on to the original drawable.</p>\n\n<pre><code>Drawable icon = new ColorDrawable(){\n        Drawable iconOrig = resolveInfo.loadIcon(packageManager);\n\n        @Override\n        public void setBounds(int left, int top, int right, int bottom){\n            super.setBounds(left, top, right, bottom);//This is needed so that getBounds on this class would work correctly.\n            iconOrig.setBounds(left, top, right, bottom);\n        }\n\n        @Override\n        public void draw(Canvas canvas){\n            iconOrig.draw(canvas);\n        }\n\n        @Override\n        public int getIntrinsicWidth(){\n            return  mPlatform.dp2px(30);\n        }\n\n        @Override\n        public int getIntrinsicHeight(){\n            return  mPlatform.dp2px(30);\n        }\n    };\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8590499,"reputation":91,"user_id":6435240,"display_name":"Semih Fatih"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1482668898,"creation_date":1482668196,"answer_id":41321037,"question_id":4609456,"body_markdown":"To use\r\n\r\n    textView.setCompoundDrawablesWithIntrinsicBounds()\r\nYour minSdkVersion should be 17 in build.gradle\r\n\r\n        defaultConfig {\r\n        applicationId &quot;com.example...&quot;\r\n        minSdkVersion 17\r\n        targetSdkVersion 25\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n    }\r\n\r\nTo change drawable size:\r\n\r\n        TextView v = (TextView)findViewById(email);\r\n        Drawable dr = getResources().getDrawable(R.drawable.signup_mail);\r\n        Bitmap bitmap = ((BitmapDrawable) dr).getBitmap();\r\n        Drawable d = new BitmapDrawable(getResources(), Bitmap.createScaledBitmap(bitmap, 80, 80, true));\r\n\r\n        //setCompoundDrawablesWithIntrinsicBounds (image to left, top, right, bottom)\r\n        v.setCompoundDrawablesWithIntrinsicBounds(d,null,null,null);","title":"Set drawable size programmatically","body":"<p>To use</p>\n\n<pre><code>textView.setCompoundDrawablesWithIntrinsicBounds()\n</code></pre>\n\n<p>Your minSdkVersion should be 17 in build.gradle</p>\n\n<pre><code>    defaultConfig {\n    applicationId \"com.example...\"\n    minSdkVersion 17\n    targetSdkVersion 25\n    versionCode 1\n    versionName \"1.0\"\n}\n</code></pre>\n\n<p>To change drawable size:</p>\n\n<pre><code>    TextView v = (TextView)findViewById(email);\n    Drawable dr = getResources().getDrawable(R.drawable.signup_mail);\n    Bitmap bitmap = ((BitmapDrawable) dr).getBitmap();\n    Drawable d = new BitmapDrawable(getResources(), Bitmap.createScaledBitmap(bitmap, 80, 80, true));\n\n    //setCompoundDrawablesWithIntrinsicBounds (image to left, top, right, bottom)\n    v.setCompoundDrawablesWithIntrinsicBounds(d,null,null,null);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5936955,"reputation":7346,"user_id":4669617,"accept_rate":50,"display_name":"ceph3us"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1516013810,"creation_date":1495563312,"answer_id":44142192,"question_id":4609456,"body_markdown":"i didn&#39;t have time to dig why the setBounds() method is not working on bitmap drawable as expected but i have little tweaked @androbean-studio solution to do what setBounds should do...\r\n\r\n    /**\r\n\t * Created by ceph3us on 23.05.17.\r\n\t * file belong to pl.ceph3us.base.android.drawables\r\n\t * this class wraps drawable and forwards draw canvas\r\n\t * on it wrapped instance by using its defined bounds\r\n\t */\r\n\tpublic class WrappedDrawable extends Drawable {\r\n\t\r\n\t\tprivate final Drawable _drawable;\r\n\t\tprotected Drawable getDrawable() {\r\n\t\t\treturn _drawable;\r\n\t\t}\r\n\t\r\n\t\tpublic WrappedDrawable(Drawable drawable) {\r\n\t\t\tsuper();\r\n\t\t\t_drawable = drawable;\r\n\t\t}\r\n\t\r\n\t\t@Override\r\n\t\tpublic void setBounds(int left, int top, int right, int bottom) {\r\n\t    \t//update bounds to get correctly\r\n\t\t    super.setBounds(left, top, right, bottom);\r\n\t\t\tDrawable drawable = getDrawable();\r\n\t\t\tif (drawable != null) {\r\n\t\t\t\tdrawable.setBounds(left, top, right, bottom);\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t@Override\r\n\t\tpublic void setAlpha(int alpha) {\r\n\t\t\tDrawable drawable = getDrawable();\r\n\t\t\tif (drawable != null) {\r\n\t\t\t\tdrawable.setAlpha(alpha);\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t@Override\r\n\t\tpublic void setColorFilter(ColorFilter colorFilter) {\r\n\t\t\tDrawable drawable = getDrawable();\r\n\t\t\tif (drawable != null) {\r\n\t\t\t\tdrawable.setColorFilter(colorFilter);\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t@Override\r\n\t\tpublic int getOpacity() {\r\n\t\t\tDrawable drawable = getDrawable();\r\n\t\t\treturn drawable != null\r\n\t\t\t\t\t? drawable.getOpacity()\r\n\t\t\t\t\t: PixelFormat.UNKNOWN;\r\n\t\t}\r\n\t\r\n\t\t@Override\r\n\t\tpublic void draw(Canvas canvas) {\r\n\t\t\tDrawable drawable = getDrawable();\r\n\t\t\tif (drawable != null) {\r\n\t\t\t\tdrawable.draw(canvas);\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t@Override\r\n\t\tpublic int getIntrinsicWidth() {\r\n\t\t\tDrawable drawable = getDrawable();\r\n\t\t\treturn drawable != null\r\n\t\t\t\t\t? drawable.getBounds().width()\r\n\t\t\t\t\t: 0;\r\n\t\t}\r\n\t\r\n\t\t@Override\r\n\t\tpublic int getIntrinsicHeight() {\r\n\t\t\tDrawable drawable = getDrawable();\r\n\t\t\treturn drawable != null ?\r\n\t\t\t\t\tdrawable.getBounds().height()\r\n\t\t\t\t\t: 0;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\nusage:\r\n\r\n    // get huge drawable \r\n\tfinal Drawable drawable = resources.getDrawable(R.drawable.g_logo);\r\n    // create our wrapper   \t\t\r\n    WrappedDrawable wrappedDrawable = new WrappedDrawable(drawable);\r\n    // set bounds on wrapper \r\n\twrappedDrawable.setBounds(0,0,32,32); \r\n    // use wrapped drawable \r\n    Button.setCompoundDrawablesWithIntrinsicBounds(wrappedDrawable ,null, null, null);\r\n\r\nresults\r\n\r\nbefore: [![enter image description here][1]][1]  after: [![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Azt0e.png\r\n  [2]: https://i.stack.imgur.com/hWK6Z.png","title":"Set drawable size programmatically","body":"<p>i didn't have time to dig why the setBounds() method is not working on bitmap drawable as expected but i have little tweaked @androbean-studio solution to do what setBounds should do...</p>\n\n<pre><code>/**\n * Created by ceph3us on 23.05.17.\n * file belong to pl.ceph3us.base.android.drawables\n * this class wraps drawable and forwards draw canvas\n * on it wrapped instance by using its defined bounds\n */\npublic class WrappedDrawable extends Drawable {\n\n    private final Drawable _drawable;\n    protected Drawable getDrawable() {\n        return _drawable;\n    }\n\n    public WrappedDrawable(Drawable drawable) {\n        super();\n        _drawable = drawable;\n    }\n\n    @Override\n    public void setBounds(int left, int top, int right, int bottom) {\n        //update bounds to get correctly\n        super.setBounds(left, top, right, bottom);\n        Drawable drawable = getDrawable();\n        if (drawable != null) {\n            drawable.setBounds(left, top, right, bottom);\n        }\n    }\n\n    @Override\n    public void setAlpha(int alpha) {\n        Drawable drawable = getDrawable();\n        if (drawable != null) {\n            drawable.setAlpha(alpha);\n        }\n    }\n\n    @Override\n    public void setColorFilter(ColorFilter colorFilter) {\n        Drawable drawable = getDrawable();\n        if (drawable != null) {\n            drawable.setColorFilter(colorFilter);\n        }\n    }\n\n    @Override\n    public int getOpacity() {\n        Drawable drawable = getDrawable();\n        return drawable != null\n                ? drawable.getOpacity()\n                : PixelFormat.UNKNOWN;\n    }\n\n    @Override\n    public void draw(Canvas canvas) {\n        Drawable drawable = getDrawable();\n        if (drawable != null) {\n            drawable.draw(canvas);\n        }\n    }\n\n    @Override\n    public int getIntrinsicWidth() {\n        Drawable drawable = getDrawable();\n        return drawable != null\n                ? drawable.getBounds().width()\n                : 0;\n    }\n\n    @Override\n    public int getIntrinsicHeight() {\n        Drawable drawable = getDrawable();\n        return drawable != null ?\n                drawable.getBounds().height()\n                : 0;\n    }\n}\n</code></pre>\n\n<p>usage:</p>\n\n<pre><code>// get huge drawable \nfinal Drawable drawable = resources.getDrawable(R.drawable.g_logo);\n// create our wrapper           \nWrappedDrawable wrappedDrawable = new WrappedDrawable(drawable);\n// set bounds on wrapper \nwrappedDrawable.setBounds(0,0,32,32); \n// use wrapped drawable \nButton.setCompoundDrawablesWithIntrinsicBounds(wrappedDrawable ,null, null, null);\n</code></pre>\n\n<p>results</p>\n\n<p>before: <a href=\"https://i.stack.imgur.com/Azt0e.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Azt0e.png\" alt=\"enter image description here\"></a>  after: <a href=\"https://i.stack.imgur.com/hWK6Z.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hWK6Z.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":6983920,"reputation":814,"user_id":5355662,"display_name":"Valery Miller"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1524641793,"creation_date":1524641793,"answer_id":50016553,"question_id":4609456,"body_markdown":"You can use LayerDrawable from only one layer and setLayerInset method:\r\n\r\n    \r\n    Drawable[] layers = new Drawable[1];\r\n    layers[0] = application.getResources().getDrawable(R.drawable.you_drawable);\r\n    \r\n    LayerDrawable layerDrawable = new LayerDrawable(layers);\r\n    layerDrawable.setLayerInset(0, 10, 10, 10, 10);\r\n\r\n","title":"Set drawable size programmatically","body":"<p>You can use LayerDrawable from only one layer and setLayerInset method:</p>\n\n<pre><code>Drawable[] layers = new Drawable[1];\nlayers[0] = application.getResources().getDrawable(R.drawable.you_drawable);\n\nLayerDrawable layerDrawable = new LayerDrawable(layers);\nlayerDrawable.setLayerInset(0, 10, 10, 10, 10);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5984797,"reputation":14686,"user_id":5730321,"accept_rate":69,"display_name":"Leo DroidCoder"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1560762245,"creation_date":1560762245,"answer_id":56628075,"question_id":4609456,"body_markdown":"It&#39;s been a while since the question was asked  \r\nbut is still unclear for many how to do this simple thing.\r\n\r\nIt&#39;s pretty simple in that case when you use a Drawable as a compound drawable on a TextView (Button).  \r\n\r\nSo 2 things you have to do:\r\n\r\n1.Set bounds:  \r\n\r\n    drawable.setBounds(left, top, right, bottom)\r\n\r\n2.Set the drawable appropriately (without using of intrinsic bounds): \r\n\r\n    button.setCompoundDrawablesRelative(drawable, null, null, null)\r\n\r\n\r\n\r\n\r\n - No need to use Bitmaps\r\n - No workarounds such as `ScaleDrawable` `ColorDrawable` or `LayerDrawable` (what are definitely created for other purposes)\r\n - No need in custom drawables!\r\n - No workarounds with the `post`\r\n - It&#39;s a native and simple solution, just how Android expects you to do.\r\n\r\n \r\n\r\n\r\n","title":"Set drawable size programmatically","body":"<p>It's been a while since the question was asked<br>\nbut is still unclear for many how to do this simple thing.</p>\n\n<p>It's pretty simple in that case when you use a Drawable as a compound drawable on a TextView (Button).  </p>\n\n<p>So 2 things you have to do:</p>\n\n<p>1.Set bounds:  </p>\n\n<pre><code>drawable.setBounds(left, top, right, bottom)\n</code></pre>\n\n<p>2.Set the drawable appropriately (without using of intrinsic bounds): </p>\n\n<pre><code>button.setCompoundDrawablesRelative(drawable, null, null, null)\n</code></pre>\n\n<ul>\n<li>No need to use Bitmaps</li>\n<li>No workarounds such as <code>ScaleDrawable</code> <code>ColorDrawable</code> or <code>LayerDrawable</code> (what are definitely created for other purposes)</li>\n<li>No need in custom drawables!</li>\n<li>No workarounds with the <code>post</code></li>\n<li>It's a native and simple solution, just how Android expects you to do.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":8229022,"reputation":31,"user_id":6190330,"display_name":"Ilia Petukhov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1565022051,"creation_date":1565022051,"answer_id":57362496,"question_id":4609456,"body_markdown":"jkhouw1 answer is correct one, but it lacks some details, see below:\r\n\r\nIt is much easier for at least API &gt; 21.\r\nAssume that we have VectorDrawable from resources (example code to retrieve it):\r\n\r\n    val iconResource = context.resources.getIdentifier(name, &quot;drawable&quot;, context.packageName)\r\n    val drawable = context.resources.getDrawable(iconResource, null)\r\n\r\nFor that VectorDrawable just set desired size:\r\n\r\n    drawable.setBounds(0, 0, size, size)\r\n\r\nAnd show drawable in button:\r\n\r\n    button.setCompoundDrawables(null, drawable, null, null)\r\n\r\nThat&#39;s it. But note to use setCompoundDrawables (not Intrinsic version)!","title":"Set drawable size programmatically","body":"<p>jkhouw1 answer is correct one, but it lacks some details, see below:</p>\n\n<p>It is much easier for at least API > 21.\nAssume that we have VectorDrawable from resources (example code to retrieve it):</p>\n\n<pre><code>val iconResource = context.resources.getIdentifier(name, \"drawable\", context.packageName)\nval drawable = context.resources.getDrawable(iconResource, null)\n</code></pre>\n\n<p>For that VectorDrawable just set desired size:</p>\n\n<pre><code>drawable.setBounds(0, 0, size, size)\n</code></pre>\n\n<p>And show drawable in button:</p>\n\n<pre><code>button.setCompoundDrawables(null, drawable, null, null)\n</code></pre>\n\n<p>That's it. But note to use setCompoundDrawables (not Intrinsic version)!</p>\n"},{"tags":[],"owner":{"account_id":15388734,"reputation":1,"user_id":11102118,"display_name":"Xiaomei"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596708771,"creation_date":1596708771,"answer_id":63281348,"question_id":4609456,"body_markdown":"You can try `button.requestLayout()`. When the background size is changed, it needs to remeasure and layout, but it won&#39;t do it \r\n","title":"Set drawable size programmatically","body":"<p>You can try <code>button.requestLayout()</code>. When the background size is changed, it needs to remeasure and layout, but it won't do it</p>\n"},{"tags":[],"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1597683061,"creation_date":1597683061,"answer_id":63455235,"question_id":4609456,"body_markdown":"Got this working using LayerDrawable:\r\n\r\n```kt\r\nfun getResizedDrawable(drawable: Drawable, scale: Float) =\r\n    LayerDrawable(arrayOf(drawable)).also { it.setLayerSize(0, (drawable.intrinsicWidth * scale).toInt(), (drawable.intrinsicHeight * scale).toInt()) }\r\n\r\nfun getResizedDrawable(drawable: Drawable, scalex: Float, scaleY: Float) =\r\n    LayerDrawable(arrayOf(drawable)).also { it.setLayerSize(0, (drawable.intrinsicWidth * scalex).toInt(), (drawable.intrinsicHeight * scaleY).toInt()) }\r\n\r\nfun getResizedDrawableUsingSpecificSize(drawable: Drawable, newWidth: Int, newHeight: Int) =\r\n    LayerDrawable(arrayOf(drawable)).also { it.setLayerSize(0, newWidth, newHeight) }\r\n```\r\n\r\nExample:\r\n\r\n\r\n```kt\r\nval drawable = AppCompatResources.getDrawable(this, android.R.drawable.sym_def_app_icon)!!\r\nval resizedDrawable = getResizedDrawable(drawable, 3f)\r\ntextView.setCompoundDrawablesWithIntrinsicBounds(resizedDrawable, null, null, null)\r\nimageView.setImageDrawable(resizedDrawable)\r\n```","title":"Set drawable size programmatically","body":"<p>Got this working using LayerDrawable:</p>\n<pre><code>fun getResizedDrawable(drawable: Drawable, scale: Float) =\n    LayerDrawable(arrayOf(drawable)).also { it.setLayerSize(0, (drawable.intrinsicWidth * scale).toInt(), (drawable.intrinsicHeight * scale).toInt()) }\n\nfun getResizedDrawable(drawable: Drawable, scalex: Float, scaleY: Float) =\n    LayerDrawable(arrayOf(drawable)).also { it.setLayerSize(0, (drawable.intrinsicWidth * scalex).toInt(), (drawable.intrinsicHeight * scaleY).toInt()) }\n\nfun getResizedDrawableUsingSpecificSize(drawable: Drawable, newWidth: Int, newHeight: Int) =\n    LayerDrawable(arrayOf(drawable)).also { it.setLayerSize(0, newWidth, newHeight) }\n</code></pre>\n<p>Example:</p>\n<pre><code>val drawable = AppCompatResources.getDrawable(this, android.R.drawable.sym_def_app_icon)!!\nval resizedDrawable = getResizedDrawable(drawable, 3f)\ntextView.setCompoundDrawablesWithIntrinsicBounds(resizedDrawable, null, null, null)\nimageView.setImageDrawable(resizedDrawable)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9717606,"reputation":482,"user_id":7207418,"display_name":"Tidder Jail"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1635859152,"creation_date":1635859152,"answer_id":69811181,"question_id":4609456,"body_markdown":"You can create an extension for that if you&#39;re using Kotlin\r\n\r\n```\r\nfun Drawable.resizeTo(context: Context, size: Int) =\r\n    BitmapDrawable(context.resources, toBitmap(size, size))\r\n```","title":"Set drawable size programmatically","body":"<p>You can create an extension for that if you're using Kotlin</p>\n<pre><code>fun Drawable.resizeTo(context: Context, size: Int) =\n    BitmapDrawable(context.resources, toBitmap(size, size))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14050017,"reputation":371,"user_id":10149074,"display_name":"Krzysiulele"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659618846,"creation_date":1659618846,"answer_id":73236629,"question_id":4609456,"body_markdown":"Example of how to scale Drawable by percentage: \r\n\r\n    // If used for TextView, must be set by setCompoundDrawable(...) without intrinsic bounds\r\n    // because already have bounds.\r\n    fun Drawable.setScaledBoundsBy(percent: Float) = apply {\r\n        setBounds(0, 0, intrinsicWidth.times(percent).toInt(), intrinsicHeight.times(percent).toInt())\r\n    }","title":"Set drawable size programmatically","body":"<p>Example of how to scale Drawable by percentage:</p>\n<pre><code>// If used for TextView, must be set by setCompoundDrawable(...) without intrinsic bounds\n// because already have bounds.\nfun Drawable.setScaledBoundsBy(percent: Float) = apply {\n    setBounds(0, 0, intrinsicWidth.times(percent).toInt(), intrinsicHeight.times(percent).toInt())\n}\n</code></pre>\n"}],"owner":{"display_name":"user375566"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":202950,"favorite_count":0,"down_vote_count":0,"up_vote_count":107,"answer_count":16,"score":107,"last_activity_date":1659618846,"creation_date":1294263306,"question_id":4609456,"body_markdown":"The images (icons) come in roughly the same size, but I need to resize them in order for the buttons to remain the same height.\r\n\r\nHow do I do this?\r\n\r\n    Button button = new Button(this);\r\n    button.setText(apiEventObject.getTitle());\r\n    button.setOnClickListener(listener);\r\n    \r\n    /*\r\n     * set clickable id of button to actual event id\r\n     */\r\n    int id = Integer.parseInt(apiEventObject.getId());\r\n    button.setId(id);\r\n    \r\n    button.setLayoutParams(new LayoutParams(\r\n    \t\tandroid.view.ViewGroup.LayoutParams.FILL_PARENT,\r\n    \t\tandroid.view.ViewGroup.LayoutParams.WRAP_CONTENT));\r\n    \r\n    Drawable drawable = LoadImageFromWebOperations(apiSizeObject.getSmall());\r\n    //?resize drawable here? drawable.setBounds(50, 50, 50, 50);\r\n    button.setCompoundDrawablesWithIntrinsicBounds(drawable, null, null, null);","title":"Set drawable size programmatically","body":"<p>The images (icons) come in roughly the same size, but I need to resize them in order for the buttons to remain the same height.</p>\n\n<p>How do I do this?</p>\n\n<pre><code>Button button = new Button(this);\nbutton.setText(apiEventObject.getTitle());\nbutton.setOnClickListener(listener);\n\n/*\n * set clickable id of button to actual event id\n */\nint id = Integer.parseInt(apiEventObject.getId());\nbutton.setId(id);\n\nbutton.setLayoutParams(new LayoutParams(\n        android.view.ViewGroup.LayoutParams.FILL_PARENT,\n        android.view.ViewGroup.LayoutParams.WRAP_CONTENT));\n\nDrawable drawable = LoadImageFromWebOperations(apiSizeObject.getSmall());\n//?resize drawable here? drawable.setBounds(50, 50, 50, 50);\nbutton.setCompoundDrawablesWithIntrinsicBounds(drawable, null, null, null);\n</code></pre>\n"},{"tags":["java","json","maven","dependencies","bazel"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1632990737,"post_id":69386256,"comment_id":122644051,"body_markdown":"Does Bazel use Central repository?","body":"Does Bazel use Central repository?"},{"owner":{"account_id":1543562,"reputation":69,"user_id":1437645,"display_name":"Shatlyk Ashyralyyev"},"score":0,"creation_date":1632990988,"post_id":69386256,"comment_id":122644167,"body_markdown":"Does your WORKSPACE file have maven install setup from `rules_jvm_external`?\n\nAlso, `@maven//:com_googlecode_json-simple` might be `@maven//:com_googlecode_json_simple` instead (all underscores).","body":"Does your WORKSPACE file have maven install setup from <code>rules_jvm_external</code>?  Also, <code>@maven&#47;&#47;:com_googlecode_json-simple</code> might be <code>@maven&#47;&#47;:com_googlecode_json_simple</code> instead (all underscores)."}],"answers":[{"tags":[],"owner":{"account_id":2972033,"reputation":181,"user_id":2523897,"display_name":"mmende"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659618599,"creation_date":1659618599,"answer_id":73236575,"question_id":69386256,"body_markdown":"In your `WORKSPACE` file adjust `maven_install` to include json-simple in artifacts:\r\n\r\n```bazel\r\nload(&quot;@rules_jvm_external//:repositories.bzl&quot;, &quot;rules_jvm_external_deps&quot;)\r\nrules_jvm_external_deps()\r\nload(&quot;@rules_jvm_external//:setup.bzl&quot;, &quot;rules_jvm_external_setup&quot;)\r\nrules_jvm_external_setup()\r\nload(&quot;@rules_jvm_external//:defs.bzl&quot;, &quot;maven_install&quot;)\r\n\r\nmaven_install(\r\n    name = &quot;maven&quot;,\r\n    artifacts = [\r\n        &quot;com.googlecode.json-simple:json-simple:aar:1.1.1&quot;,\r\n    ],\r\n    fetch_sources = True,\r\n    repositories = [\r\n        &quot;https://maven.google.com&quot;,\r\n        &quot;https://repo1.maven.org/maven2&quot;,\r\n    ],\r\n    version_conflict_policy = &quot;pinned&quot;,\r\n)\r\n```\r\n\r\n...the `dep` label in your `BUILD` file should then be `@maven//:com_googlecode_json_simple_json_simple`:\r\n\r\n```bazel\r\njava_fuzz_target_test(\r\n    name = &quot;Test&quot;,\r\n    srcs = [\r\n        &quot;src/main/java/com/examples/Test.java&quot;,\r\n    ],\r\n    tags = [&quot;manual&quot;],\r\n    target_class = &quot;com.example.Test&quot;,\r\n    deps = [\r\n        &quot;@maven//:com_googlecode_json_simple_json_simple&quot;,\r\n    ],\r\n)\r\n```","title":"Maven can&#39;t find JSON dependency","body":"<p>In your <code>WORKSPACE</code> file adjust <code>maven_install</code> to include json-simple in artifacts:</p>\n<pre><code>load(&quot;@rules_jvm_external//:repositories.bzl&quot;, &quot;rules_jvm_external_deps&quot;)\nrules_jvm_external_deps()\nload(&quot;@rules_jvm_external//:setup.bzl&quot;, &quot;rules_jvm_external_setup&quot;)\nrules_jvm_external_setup()\nload(&quot;@rules_jvm_external//:defs.bzl&quot;, &quot;maven_install&quot;)\n\nmaven_install(\n    name = &quot;maven&quot;,\n    artifacts = [\n        &quot;com.googlecode.json-simple:json-simple:aar:1.1.1&quot;,\n    ],\n    fetch_sources = True,\n    repositories = [\n        &quot;https://maven.google.com&quot;,\n        &quot;https://repo1.maven.org/maven2&quot;,\n    ],\n    version_conflict_policy = &quot;pinned&quot;,\n)\n</code></pre>\n<p>...the <code>dep</code> label in your <code>BUILD</code> file should then be <code>@maven//:com_googlecode_json_simple_json_simple</code>:</p>\n<pre><code>java_fuzz_target_test(\n    name = &quot;Test&quot;,\n    srcs = [\n        &quot;src/main/java/com/examples/Test.java&quot;,\n    ],\n    tags = [&quot;manual&quot;],\n    target_class = &quot;com.example.Test&quot;,\n    deps = [\n        &quot;@maven//:com_googlecode_json_simple_json_simple&quot;,\n    ],\n)\n</code></pre>\n"}],"owner":{"account_id":22196460,"reputation":65,"user_id":16437817,"display_name":"seriouslyg0e"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":991,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659618599,"creation_date":1632976930,"question_id":69386256,"body_markdown":"I&#39;m using Bazel to build my Java program, however whenever I try this command I get the following error: \r\n\r\n```bazel run //examples:Test```\r\n\r\n```\r\n/Users/seriouslyg0e/Desktop/jazzer/examples/BUILD.bazel:16:22: no such target &#39;@maven//:com_googlecode_json-simple&#39;: target &#39;com_googlecode_json-simple&#39; not declared in package &#39;&#39; defined by /private/var/tmp/_bazel_seriouslyg0e/e98dbf4629f0c8d44a5082fd7d505b2d/external/maven/BUILD and referenced by &#39;//examples:Test&#39;\r\n```\r\n\r\nI&#39;m trying to use the JSON library here:\r\n\r\nhttps://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple/1.1.1\r\n\r\nand my BAZEL.build file looks like this:\r\n\r\n```\r\njava_fuzz_target_test(\r\n    name = &quot;Test&quot;,\r\n    srcs = [\r\n        &quot;src/main/java/com/examples/Test.java&quot;,\r\n    ],\r\n    tags = [&quot;manual&quot;],\r\n    target_class = &quot;com.example.Test&quot;,\r\n    deps = [\r\n        &quot;@maven//:com_googlecode_json-simple&quot;,\r\n    ],\r\n)\r\n```\r\n\r\nAny ideas why this error is occurring? \r\n\r\nThe packages I&#39;m using in my code are:\r\n\r\n```\r\nimport org.json.simple.JSONObject;\r\nimport org.json.simple.JSONArray;\r\nimport org.json.simple.parser.ParseException;\r\nimport org.json.simple.parser.JSONParser;\r\n```\r\n\r\nThanks! ","title":"Maven can&#39;t find JSON dependency","body":"<p>I'm using Bazel to build my Java program, however whenever I try this command I get the following error:</p>\n<p><code>bazel run //examples:Test</code></p>\n<pre><code>/Users/seriouslyg0e/Desktop/jazzer/examples/BUILD.bazel:16:22: no such target '@maven//:com_googlecode_json-simple': target 'com_googlecode_json-simple' not declared in package '' defined by /private/var/tmp/_bazel_seriouslyg0e/e98dbf4629f0c8d44a5082fd7d505b2d/external/maven/BUILD and referenced by '//examples:Test'\n</code></pre>\n<p>I'm trying to use the JSON library here:</p>\n<p><a href=\"https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple/1.1.1\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple/1.1.1</a></p>\n<p>and my BAZEL.build file looks like this:</p>\n<pre><code>java_fuzz_target_test(\n    name = &quot;Test&quot;,\n    srcs = [\n        &quot;src/main/java/com/examples/Test.java&quot;,\n    ],\n    tags = [&quot;manual&quot;],\n    target_class = &quot;com.example.Test&quot;,\n    deps = [\n        &quot;@maven//:com_googlecode_json-simple&quot;,\n    ],\n)\n</code></pre>\n<p>Any ideas why this error is occurring?</p>\n<p>The packages I'm using in my code are:</p>\n<pre><code>import org.json.simple.JSONObject;\nimport org.json.simple.JSONArray;\nimport org.json.simple.parser.ParseException;\nimport org.json.simple.parser.JSONParser;\n</code></pre>\n<p>Thanks!</p>\n"},{"tags":["java","instrumentation","javassist","javaagents"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1661159927,"post_id":73181365,"comment_id":129696988,"body_markdown":"You are mixing up the injected code and the code that does the injection. You are only injecting some `println` calls and performing a database update within the tranformer. Generally, you should avoid injecting large complex code. Create ordinary utility code, like a method for storing your specific data (i.e. the two strings) into a database and inject only a call to this method.","body":"You are mixing up the injected code and the code that does the injection. You are only injecting some <code>println</code> calls and performing a database update within the tranformer. Generally, you should avoid injecting large complex code. Create ordinary utility code, like a method for storing your specific data (i.e. the two strings) into a database and inject only a call to this method."}],"owner":{"account_id":19708105,"reputation":21,"user_id":14429269,"display_name":"Maheshbabu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":384,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1659618341,"creation_date":1659252110,"question_id":73181365,"body_markdown":"**InterceptingClassTransformer class**\r\n\r\nI want to save method name and class name in database at runtime. \r\n1) I want to save method name and class name. I don&#39;t know how to insert data into database. I want to save only invoked method name and class name. Once I run the java agent it will store all the method names and class names in the database but my requirement is to store when method gets invoked.\r\n       \r\n                         \r\n\r\n                              try {\r\n                \t\t\t\t\tClassPool classPool = scopedClassPoolFactory.create(loader, rootPool,\r\n                \t\t\t\t\t\t\tScopedClassPoolRepositoryImpl.getInstance());\r\n                \t\t\t\t\tCtClass ctClass = classPool.makeClass(new ByteArrayInputStream(classfileBuffer));\r\n                \t\t\t\t\tCtMethod[] methods = ctClass.getDeclaredMethods();\r\n                \t\t\t\t\tInsertMethods m = new InsertMethods();\r\n                \t\t\t\t\tint mid = className.lastIndexOf(&#39;/&#39;) + 1;\r\n                \t\t\t\t\tString finalClsName = className.substring(mid);\r\n                \t\t\t\t\tfor (CtMethod method : methods) {\r\n                \t\t\t\t\t\tfinal StringBuffer buffer = new StringBuffer();\r\n                \t\t\t\t\t\tString methodName = method.getName();\r\n                \t\t\t\t\t\tbuffer.append(&quot;System.err.println(\\&quot;Invoked Class Name: &quot; + finalClsName + &quot; Method Name: &quot;\r\n                \t\t\t\t\t\t\t\t+ methodName + &quot; executed\\&quot; );&quot;);\r\n                \t\t\t\t\t\tmethod.insertBefore(buffer.toString());\r\n                \t\t\t\t\t\tmethod.addLocalVariable(&quot;startTime&quot;, CtClass.longType);\t\r\n                \t\t\t\t\t\tmethod.insertBefore(&quot;startTime = System.nanoTime();&quot;);\r\n                \t\t\t\t\t\tmethod.insertAfter(&quot;System.out.println(\\&quot;Execution Duration &quot;\r\n                \t\t\t\t\t\t\t\t+ &quot;(nano sec): \\&quot;+ (System.nanoTime() - startTime) );&quot;);\r\n                \t\t\t\t\t\tmethod.insertAfter(&quot;System.out.println(\\&quot;Logging using After Method execution\\&quot;);&quot;);\t\t\t\t\t\t\r\n                \t\t\t\t\t\tPreparedStatement st = m.insertData();                \t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t  st.setString(1,finalClsName);\r\n\t\t\t\t\t\t\t\t  st.setString(2,methodName);\r\n\t\t\t\t\t\t\t\t  st.executeUpdate();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n                \t\t\t\t\tbyteCode = ctClass.toBytecode();\r\n                \t\t\t\t\tctClass.detach();\r\n                \t\t\t\t} catch (Throwable ex) {\r\n                \t\t\t\t\tlog.log(Level.SEVERE, &quot;Error in transforming the class: &quot; + className, ex);\r\n                \t\t\t\t}\r\n                \t\t\t}\r\n                \r\n                \t\t}\r\n                \t\treturn byteCode;\r\n    }\r\n    \r\n**Jdbc Insert Statement**\r\n    \r\n    Here I am using JDBC to insert data into database.\r\n    `\r\n            //Insert statement Class\r\n            public class InsertMethods {\r\n            \t\r\n            \tpublic PreparedStatement insertData() throws SQLException {\r\n            \t\tConnection con= DBconnection.createNewDBconnection();\r\n            \t\tString q= &quot;insert into method_info(m_key, m_value) values(?,?)&quot;;\r\n            \t\tPreparedStatement st= con.prepareStatement(q);\r\n            \t\treturn st;\r\n            \t\t\r\n            \t}\r\n            \r\n            }\r\n\r\n","title":"How to save method name and class name in database using javassist?","body":"<p><strong>InterceptingClassTransformer class</strong></p>\n<p>I want to save method name and class name in database at runtime.</p>\n<ol>\n<li><p>I want to save method name and class name. I don't know how to insert data into database. I want to save only invoked method name and class name. Once I run the java agent it will store all the method names and class names in the database but my requirement is to store when method gets invoked.</p>\n<pre><code>                       try {\n                             ClassPool classPool = scopedClassPoolFactory.create(loader, rootPool,\n                                     ScopedClassPoolRepositoryImpl.getInstance());\n                             CtClass ctClass = classPool.makeClass(new ByteArrayInputStream(classfileBuffer));\n                             CtMethod[] methods = ctClass.getDeclaredMethods();\n                             InsertMethods m = new InsertMethods();\n                             int mid = className.lastIndexOf('/') + 1;\n                             String finalClsName = className.substring(mid);\n                             for (CtMethod method : methods) {\n                                 final StringBuffer buffer = new StringBuffer();\n                                 String methodName = method.getName();\n                                 buffer.append(&quot;System.err.println(\\&quot;Invoked Class Name: &quot; + finalClsName + &quot; Method Name: &quot;\n                                         + methodName + &quot; executed\\&quot; );&quot;);\n                                 method.insertBefore(buffer.toString());\n                                 method.addLocalVariable(&quot;startTime&quot;, CtClass.longType); \n                                 method.insertBefore(&quot;startTime = System.nanoTime();&quot;);\n                                 method.insertAfter(&quot;System.out.println(\\&quot;Execution Duration &quot;\n                                         + &quot;(nano sec): \\&quot;+ (System.nanoTime() - startTime) );&quot;);\n                                 method.insertAfter(&quot;System.out.println(\\&quot;Logging using After Method execution\\&quot;);&quot;);                        \n                                 PreparedStatement st = m.insertData();                                      \n                           st.setString(1,finalClsName);\n                           st.setString(2,methodName);\n                           st.executeUpdate();\n             }\n             }\n                             byteCode = ctClass.toBytecode();\n                             ctClass.detach();\n                         } catch (Throwable ex) {\n                             log.log(Level.SEVERE, &quot;Error in transforming the class: &quot; + className, ex);\n                         }\n                     }\n\n                 }\n                 return byteCode;\n</code></pre>\n<p>}</p>\n</li>\n</ol>\n<p><strong>Jdbc Insert Statement</strong></p>\n<pre><code>Here I am using JDBC to insert data into database.\n`\n        //Insert statement Class\n        public class InsertMethods {\n            \n            public PreparedStatement insertData() throws SQLException {\n                Connection con= DBconnection.createNewDBconnection();\n                String q= &quot;insert into method_info(m_key, m_value) values(?,?)&quot;;\n                PreparedStatement st= con.prepareStatement(q);\n                return st;\n                \n            }\n        \n        }\n</code></pre>\n"},{"tags":["java","android","android-studio","htmlunit"],"answers":[{"tags":[],"owner":{"account_id":8054049,"reputation":4480,"user_id":6071729,"display_name":"A Farmanbar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1582919016,"creation_date":1582893425,"answer_id":60451867,"question_id":60423257,"body_markdown":"As [hc.apache.org][1] documented:\r\n\r\n`AllowAllHostnameVerifier` Deprecated. (`4.4`) Use `NoopHostnameVerifier`\r\n\r\nIf you  downgrade dependencies&#39;s version to `4.3`(2013~2015) exception will be resolved. \r\n\r\n    implementation &#39;net.sourceforge.htmlunit:htmlunit:2.15&#39;\r\n\r\n\r\n  [1]: https://hc.apache.org","title":"No static field INSTANCE of type Lorg/apache/http/conn/ssl/AllowAllHostnameVerifier when using htmlunit in Android Studio Project","body":"<p>As <a href=\"https://hc.apache.org\" rel=\"nofollow noreferrer\">hc.apache.org</a> documented:</p>\n\n<p><code>AllowAllHostnameVerifier</code> Deprecated. (<code>4.4</code>) Use <code>NoopHostnameVerifier</code></p>\n\n<p>If you  downgrade dependencies's version to <code>4.3</code>(2013~2015) exception will be resolved. </p>\n\n<pre><code>implementation 'net.sourceforge.htmlunit:htmlunit:2.15'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15062152,"reputation":1774,"user_id":13519865,"display_name":"Cyber Avater"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659618023,"creation_date":1659618023,"answer_id":73236428,"question_id":60423257,"body_markdown":"Use the port for android:\r\n\r\nhttps://github.com/HtmlUnit/htmlunit-android\r\n\r\nUse this as the dependency:\r\n```\r\nimplementation(&quot;net.sourceforge.htmlunit:htmlunit-android:2.63.0&quot;)\r\n``` ","title":"No static field INSTANCE of type Lorg/apache/http/conn/ssl/AllowAllHostnameVerifier when using htmlunit in Android Studio Project","body":"<p>Use the port for android:</p>\n<p><a href=\"https://github.com/HtmlUnit/htmlunit-android\" rel=\"nofollow noreferrer\">https://github.com/HtmlUnit/htmlunit-android</a></p>\n<p>Use this as the dependency:</p>\n<pre><code>implementation(&quot;net.sourceforge.htmlunit:htmlunit-android:2.63.0&quot;)\n</code></pre>\n"}],"owner":{"account_id":14628192,"reputation":191,"user_id":10564900,"display_name":"DeborahAnn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10164,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":60451867,"answer_count":2,"score":8,"last_activity_date":1659618023,"creation_date":1582754494,"question_id":60423257,"body_markdown":"I am using htmlunit 2.36.0 in my Android Studio Project. I successfully compiled the apk but I am getting some runtime errors when I try to get a webpage.\r\nBefore, I was getting the following error: \r\n\r\n    java.lang.BootstrapMethodError: Exception from call site\r\n\r\nBut I was able to fix the issue by adding this in the gradle:\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n\r\n\r\nHowever, now I am facing another error: \r\n\r\n     java.lang.NoSuchFieldError: No static field INSTANCE of type Lorg/apache/http/conn/ssl/AllowAllHostnameVerifier; in class Lorg/apache/http/conn/ssl/AllowAllHostnameVerifier; or its superclasses (declaration of &#39;org.apache.http.conn.ssl.AllowAllHostnameVerifier&#39; appears in /system/framework/framework.jar!classes3.dex)\r\n            at org.apache.http.conn.ssl.SSLConnectionSocketFactory.&lt;clinit&gt;(SSLConnectionSocketFactory.java:151)\r\n            at com.gargoylesoftware.htmlunit.httpclient.HtmlUnitSSLConnectionSocketFactory.buildSSLSocketFactory(HtmlUnitSSLConnectionSocketFactory.java:89)\r\n            at com.gargoylesoftware.htmlunit.HttpWebConnection.configureHttpsScheme(HttpWebConnection.java:635)\r\n            at com.gargoylesoftware.htmlunit.HttpWebConnection.createHttpClientBuilder(HttpWebConnection.java:558)\r\n            at com.gargoylesoftware.htmlunit.HttpWebConnection.getHttpClientBuilder(HttpWebConnection.java:519)\r\n            at com.gargoylesoftware.htmlunit.HttpWebConnection.getResponse(HttpWebConnection.java:171)\r\n            at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseFromWebConnection(WebClient.java:1407)\r\n            at com.gargoylesoftware.htmlunit.WebClient.loadWebResponse(WebClient.java:1326)\r\n            at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:396)\r\n            at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:317)\r\n            at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:469)\r\n            at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:450)\r\n\r\nApparently, there is no static field instance of AllowAllHostnameVerifier in its own class or or its superclasses. I have no idea how to fix this.","title":"No static field INSTANCE of type Lorg/apache/http/conn/ssl/AllowAllHostnameVerifier when using htmlunit in Android Studio Project","body":"<p>I am using htmlunit 2.36.0 in my Android Studio Project. I successfully compiled the apk but I am getting some runtime errors when I try to get a webpage.\nBefore, I was getting the following error: </p>\n\n<pre><code>java.lang.BootstrapMethodError: Exception from call site\n</code></pre>\n\n<p>But I was able to fix the issue by adding this in the gradle:</p>\n\n<pre><code>compileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n}\n</code></pre>\n\n<p>However, now I am facing another error: </p>\n\n<pre><code> java.lang.NoSuchFieldError: No static field INSTANCE of type Lorg/apache/http/conn/ssl/AllowAllHostnameVerifier; in class Lorg/apache/http/conn/ssl/AllowAllHostnameVerifier; or its superclasses (declaration of 'org.apache.http.conn.ssl.AllowAllHostnameVerifier' appears in /system/framework/framework.jar!classes3.dex)\n        at org.apache.http.conn.ssl.SSLConnectionSocketFactory.&lt;clinit&gt;(SSLConnectionSocketFactory.java:151)\n        at com.gargoylesoftware.htmlunit.httpclient.HtmlUnitSSLConnectionSocketFactory.buildSSLSocketFactory(HtmlUnitSSLConnectionSocketFactory.java:89)\n        at com.gargoylesoftware.htmlunit.HttpWebConnection.configureHttpsScheme(HttpWebConnection.java:635)\n        at com.gargoylesoftware.htmlunit.HttpWebConnection.createHttpClientBuilder(HttpWebConnection.java:558)\n        at com.gargoylesoftware.htmlunit.HttpWebConnection.getHttpClientBuilder(HttpWebConnection.java:519)\n        at com.gargoylesoftware.htmlunit.HttpWebConnection.getResponse(HttpWebConnection.java:171)\n        at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseFromWebConnection(WebClient.java:1407)\n        at com.gargoylesoftware.htmlunit.WebClient.loadWebResponse(WebClient.java:1326)\n        at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:396)\n        at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:317)\n        at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:469)\n        at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:450)\n</code></pre>\n\n<p>Apparently, there is no static field instance of AllowAllHostnameVerifier in its own class or or its superclasses. I have no idea how to fix this.</p>\n"},{"tags":["java","postgresql","spring-boot","hibernate","triggers"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":1,"creation_date":1659616751,"post_id":73235971,"comment_id":129340216,"body_markdown":"The trigger should only be executed when the transaction is committed, as that is when the insert is actually happening on the database level. You can test this by adding a delay in the `@Transactional` method and check when the trigger is executed.","body":"The trigger should only be executed when the transaction is committed, as that is when the insert is actually happening on the database level. You can test this by adding a delay in the <code>@Transactional</code> method and check when the trigger is executed."},{"owner":{"account_id":10470529,"reputation":365,"user_id":7718524,"display_name":"Ketan Suthar"},"score":0,"creation_date":1659617206,"post_id":73235971,"comment_id":129340394,"body_markdown":"Hi, @XtremeBaumer thanks for replying. I know it is committed after the method is completed. I checked that a new record was created and the trigger was also hit and the actual ID of the row was printed in logs but why dated were not truncated?","body":"Hi, @XtremeBaumer thanks for replying. I know it is committed after the method is completed. I checked that a new record was created and the trigger was also hit and the actual ID of the row was printed in logs but why dated were not truncated?"}],"answers":[{"tags":[],"owner":{"account_id":2662746,"reputation":11456,"user_id":2302032,"display_name":"Stefanov.sm"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659617649,"creation_date":1659617056,"answer_id":73236186,"question_id":73235971,"body_markdown":"The OMR might be updating. Use `BEFORE INSERT OR UPDATE` trigger with this somewhat simpler function (w/o the message) using [date_trunc](https://www.postgresql.org/docs/current/functions-datetime.html#FUNCTIONS-DATETIME-TRUNC):\r\n```sql\r\ncreate or replace function iv_slot_ai() returns trigger language plpgsql as\r\n$body$\r\nbegin\r\n  new.start_time := date_trunc(&#39;minute&#39;, new.start_time);\r\n  new.end_time := date_trunc(&#39;minute&#39;, new.end_time);\r\n  return new;\r\nend;\r\n$body$;","title":"Trigger is not updating current record PostgresSQL when record is inserted from hibernate","body":"<p>The OMR might be updating. Use <code>BEFORE INSERT OR UPDATE</code> trigger with this somewhat simpler function (w/o the message) using <a href=\"https://www.postgresql.org/docs/current/functions-datetime.html#FUNCTIONS-DATETIME-TRUNC\" rel=\"nofollow noreferrer\">date_trunc</a>:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>create or replace function iv_slot_ai() returns trigger language plpgsql as\n$body$\nbegin\n  new.start_time := date_trunc('minute', new.start_time);\n  new.end_time := date_trunc('minute', new.end_time);\n  return new;\nend;\n$body$;\n</code></pre>\n"}],"owner":{"account_id":10470529,"reputation":365,"user_id":7718524,"display_name":"Ketan Suthar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73236186,"answer_count":1,"score":1,"last_activity_date":1659617649,"creation_date":1659616188,"question_id":73235971,"body_markdown":"I have one table which stores interview slots with start and end times below is the table:\r\n\r\n    CREATE TABLE INTERVIEW_SLOT (\r\n        ID SERIAL PRIMARY KEY NOT NULL,\r\n        INTERVIEWER INTEGER REFERENCES USERS(ID) NOT NULL,\r\n        START_TIME TIMESTAMP NOT NULL, -- start time of interview\r\n        END_TIME TIMESTAMP NOT NULL, -- end time of interview\r\n        -- more columns are not necessary for this question\r\n    );\r\n\r\nI have created a trigger which will truncate start and end time to minutes below is the trigger:\r\n\r\n\r\n    CREATE OR REPLACE FUNCTION\r\n    iv_slot_ai() returns trigger AS\r\n    $BODY$\r\n    BEGIN\r\n    raise warning &#39;cleaning start and end time for iv slot for id: %&#39;, new.id;\r\n        update interview_slot set end_time = TO_TIMESTAMP(end_time::text, &#39;YYYY-MM-DD HH24:MI&#39;);\r\n        update interview_slot set start_time = TO_TIMESTAMP(start_time::text, &#39;YYYY-MM-DD HH24:MI&#39;);\r\n    \treturn new;\r\n    END;\r\n    $BODY$\r\n    LANGUAGE plpgsql VOLATILE;\r\n    \r\n    CREATE TRIGGER IV_SLOT_AI AFTER INSERT ON INTERVIEW_SLOT\r\n    FOR EACH ROW\r\n    EXECUTE PROCEDURE iv_slot_ai();\r\n\r\n\r\nWhen I insert a record from psql terminal manually trigger gets hit and updates the inserted record properly.\r\n\r\n     INSERT INTO public.interview_slot(\r\n    interviewer, start_time, end_time, is_booked, created_on, inform_email_timestamp)\r\n    VALUES (388, &#39;2022-08-22 13:00:10.589&#39;, &#39;2022-08-22 13:30:09.589&#39;, &#39;F&#39;, current_date, current_date);\r\n    WARNING:  cleaning start and end time for iv slot for id: 72\r\n    INSERT 0 1\r\n    \r\n    select * from interview_slot order by id desc limit 1;\r\n     id | interviewer |       start_time        |        end_time         |\r\n    ----+-------------+-------------------------+-------------------------+\r\n     72 |         388 | 2022-08-22 13:00:00     | 2022-08-22 13:30:00     |\r\n\r\n\r\n\r\n\r\n\r\nI have a backend application in spring boot with hibernate ORM. When I insert the record from API call, it gets triggered(i have checked in Postgres logs) but the inserted record does not get updated.\r\n\r\nActually, method which saves records is being called from another method that has this `@Transactional()` annotation.\r\n\r\nI have also tried BEFORE trigger but it was also not working.\r\n\r\nCan anyone explain why this is happening and what is the solution?\r\n\r\nIs it because of transactional annotation?\r\n","title":"Trigger is not updating current record PostgresSQL when record is inserted from hibernate","body":"<p>I have one table which stores interview slots with start and end times below is the table:</p>\n<pre><code>CREATE TABLE INTERVIEW_SLOT (\n    ID SERIAL PRIMARY KEY NOT NULL,\n    INTERVIEWER INTEGER REFERENCES USERS(ID) NOT NULL,\n    START_TIME TIMESTAMP NOT NULL, -- start time of interview\n    END_TIME TIMESTAMP NOT NULL, -- end time of interview\n    -- more columns are not necessary for this question\n);\n</code></pre>\n<p>I have created a trigger which will truncate start and end time to minutes below is the trigger:</p>\n<pre><code>CREATE OR REPLACE FUNCTION\niv_slot_ai() returns trigger AS\n$BODY$\nBEGIN\nraise warning 'cleaning start and end time for iv slot for id: %', new.id;\n    update interview_slot set end_time = TO_TIMESTAMP(end_time::text, 'YYYY-MM-DD HH24:MI');\n    update interview_slot set start_time = TO_TIMESTAMP(start_time::text, 'YYYY-MM-DD HH24:MI');\n    return new;\nEND;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n\nCREATE TRIGGER IV_SLOT_AI AFTER INSERT ON INTERVIEW_SLOT\nFOR EACH ROW\nEXECUTE PROCEDURE iv_slot_ai();\n</code></pre>\n<p>When I insert a record from psql terminal manually trigger gets hit and updates the inserted record properly.</p>\n<pre><code> INSERT INTO public.interview_slot(\ninterviewer, start_time, end_time, is_booked, created_on, inform_email_timestamp)\nVALUES (388, '2022-08-22 13:00:10.589', '2022-08-22 13:30:09.589', 'F', current_date, current_date);\nWARNING:  cleaning start and end time for iv slot for id: 72\nINSERT 0 1\n\nselect * from interview_slot order by id desc limit 1;\n id | interviewer |       start_time        |        end_time         |\n----+-------------+-------------------------+-------------------------+\n 72 |         388 | 2022-08-22 13:00:00     | 2022-08-22 13:30:00     |\n</code></pre>\n<p>I have a backend application in spring boot with hibernate ORM. When I insert the record from API call, it gets triggered(i have checked in Postgres logs) but the inserted record does not get updated.</p>\n<p>Actually, method which saves records is being called from another method that has this <code>@Transactional()</code> annotation.</p>\n<p>I have also tried BEFORE trigger but it was also not working.</p>\n<p>Can anyone explain why this is happening and what is the solution?</p>\n<p>Is it because of transactional annotation?</p>\n"},{"tags":["java","vaadin","vaadin-flow","vaadin-upload"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":1,"creation_date":1659448249,"post_id":73205325,"comment_id":129293734,"body_markdown":"This works for me. What&#39;s the type of the memoryBuffer?","body":"This works for me. What&#39;s the type of the memoryBuffer?"},{"owner":{"account_id":25955900,"reputation":11,"user_id":19673273,"display_name":"Xragg"},"score":0,"creation_date":1659590466,"post_id":73205325,"comment_id":129331515,"body_markdown":"Thanks for your reply. private final MemoryBuffer memoryBuffer = new MemoryBuffer();","body":"Thanks for your reply. private final MemoryBuffer memoryBuffer = new MemoryBuffer();"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1659594127,"post_id":73205325,"comment_id":129332338,"body_markdown":"Just to verify a suspicion: can you please use MultiFileMemoryBuffer and try again?","body":"Just to verify a suspicion: can you please use MultiFileMemoryBuffer and try again?"},{"owner":{"account_id":25955900,"reputation":11,"user_id":19673273,"display_name":"Xragg"},"score":0,"creation_date":1659597405,"post_id":73205325,"comment_id":129333287,"body_markdown":"I tried but I have the same problem: file content is empty byte array.","body":"I tried but I have the same problem: file content is empty byte array."},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1659602498,"post_id":73205325,"comment_id":129335000,"body_markdown":"Can you try with the newest Vaadin version?","body":"Can you try with the newest Vaadin version?"}],"owner":{"account_id":25955900,"reputation":11,"user_id":19673273,"display_name":"Xragg"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":219,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1659617601,"creation_date":1659433328,"question_id":73205325,"body_markdown":"I am currently facing an issue with the Upload component of Vaadin v22.0.15.\r\n\r\nI want to be able to drag and drop attachments from an Outlook email. It works perfectly if the email has been sent in HTML format.\r\n\r\nIn that case you can see the attachments at the top of the email, just under the subject. When I drag and drop one of those, the file is being correctly loaded in the MemoryBuffer.\r\n\r\n**Example image: email in HTML format**\r\n\r\n[![enter image description here][1]][1]\r\n\r\nMy problem is when the email has been sent in Rich Text Format, in which case the attachments are visible inside the body of the email.\r\n\r\nWhen I try to drag and drop an attachment from an email sent in Rich Text Format the content of the file is not loaded in the MemoryBuffer. I get an empty file with the same name as the attachment.\r\n\r\n**Example image:** \r\n\r\n[![enter image description here][2]][2]\r\n\r\nHere is some code:\r\n\r\n    myUpload.addSucceededListener(event -&gt; {\r\n            try {\r\n                uploadedFileContent = memoryBuffer.getInputStream().readAllBytes(); //this returns an empty byte array when I drag and drop from the email content (as per example image 2)\r\n            } catch (IOException e) {\r\n                LOGGER.error(&quot;File not readable&quot;, e);\r\n            }\r\n        });\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/p83om.png\r\n  [2]: https://i.stack.imgur.com/TjC93.png","title":"Drag and drop an email attachment that is inside the body of the email","body":"<p>I am currently facing an issue with the Upload component of Vaadin v22.0.15.</p>\n<p>I want to be able to drag and drop attachments from an Outlook email. It works perfectly if the email has been sent in HTML format.</p>\n<p>In that case you can see the attachments at the top of the email, just under the subject. When I drag and drop one of those, the file is being correctly loaded in the MemoryBuffer.</p>\n<p><strong>Example image: email in HTML format</strong></p>\n<p><a href=\"https://i.stack.imgur.com/p83om.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p83om.png\" alt=\"enter image description here\" /></a></p>\n<p>My problem is when the email has been sent in Rich Text Format, in which case the attachments are visible inside the body of the email.</p>\n<p>When I try to drag and drop an attachment from an email sent in Rich Text Format the content of the file is not loaded in the MemoryBuffer. I get an empty file with the same name as the attachment.</p>\n<p><strong>Example image:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/TjC93.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TjC93.png\" alt=\"enter image description here\" /></a></p>\n<p>Here is some code:</p>\n<pre><code>myUpload.addSucceededListener(event -&gt; {\n        try {\n            uploadedFileContent = memoryBuffer.getInputStream().readAllBytes(); //this returns an empty byte array when I drag and drop from the email content (as per example image 2)\n        } catch (IOException e) {\n            LOGGER.error(&quot;File not readable&quot;, e);\n        }\n    });\n</code></pre>\n"},{"tags":["java","cryptography","rsa","private-key","pem"],"comments":[{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":3,"creation_date":1599202367,"post_id":63734219,"comment_id":112706329,"body_markdown":"`getKeyPair` doesn&#39;t like _the value null_ which was returned from `readObject` because your PEM data is invalid. **PEM format MUST HAVE LINE BREAKS** (see wikipedia under Privacy-Enhanced Mail) and yours doesn&#39;t. Add them and it works.  BTW, converting `keyPair.getPrivate()` to a CrtSpec and running it back through the KeyFactory is useless; `keyPair.getPrivate()` _already is_ a valid implementation of `RSAPrivateKey`","body":"<code>getKeyPair</code> doesn&#39;t like <i>the value null</i> which was returned from <code>readObject</code> because your PEM data is invalid. <b>PEM format MUST HAVE LINE BREAKS</b> (see wikipedia under Privacy-Enhanced Mail) and yours doesn&#39;t. Add them and it works.  BTW, converting <code>keyPair.getPrivate()</code> to a CrtSpec and running it back through the KeyFactory is useless; <code>keyPair.getPrivate()</code> <i>already is</i> a valid implementation of <code>RSAPrivateKey</code>"}],"answers":[{"tags":[],"owner":{"account_id":14697403,"reputation":1,"user_id":10614423,"display_name":"coding_tim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659617268,"creation_date":1659617268,"answer_id":73236231,"question_id":63734219,"body_markdown":"I had a similar issue and was able to solve it by altering the key from\r\n\r\n    -----BEGIN RSA PRIVATE KEY-----\r\n     .....content here.....\r\n    -----END RSA PRIVATE KEY-----\r\n\r\nto:\r\n\r\n    -----BEGIN EC PRIVATE KEY-----\r\n     .....content here.....\r\n    -----END EC PRIVATE KEY-----\r\n\r\nSince you are working with an RSA instance and not an elliptic curve (EC) this might not be the source of your problems but maybe it helps someone. ","title":"PEMException: unable to convert key pair: null","body":"<p>I had a similar issue and was able to solve it by altering the key from</p>\n<pre><code>-----BEGIN RSA PRIVATE KEY-----\n .....content here.....\n-----END RSA PRIVATE KEY-----\n</code></pre>\n<p>to:</p>\n<pre><code>-----BEGIN EC PRIVATE KEY-----\n .....content here.....\n-----END EC PRIVATE KEY-----\n</code></pre>\n<p>Since you are working with an RSA instance and not an elliptic curve (EC) this might not be the source of your problems but maybe it helps someone.</p>\n"}],"owner":{"account_id":276507,"reputation":16077,"user_id":569976,"accept_rate":68,"display_name":"neubert"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3191,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1659617268,"creation_date":1599188566,"question_id":63734219,"body_markdown":"I&#39;m trying to run the following program:\r\n\r\n```\r\nimport java.security.Security;\r\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\r\nimport org.bouncycastle.openssl.PEMParser;\r\nimport org.bouncycastle.openssl.jcajce.JcaPEMKeyConverter;\r\nimport org.bouncycastle.openssl.PEMKeyPair;\r\nimport java.security.spec.RSAPrivateCrtKeySpec;\r\nimport java.security.KeyPair;\r\nimport java.security.KeyFactory;\r\nimport java.io.StringReader;\r\nimport javax.crypto.Cipher;\r\nimport java.util.Base64;\r\nimport java.security.interfaces.RSAPrivateKey;\r\n\r\npublic class Test\r\n{\r\n    public static void main(String[] args) throws Exception\r\n    {\r\n        Security.addProvider(new BouncyCastleProvider());\r\n\r\n        String key = &quot;-----BEGIN RSA PRIVATE KEY-----&quot; +\r\n&quot;MIIBOgIBAAJBAKj34GkxFhD90vcNLYLInFEX6Ppy1tPf9Cnzj4p4WGeKLs1Pt8Qu&quot; +\r\n&quot;KUpRKfFLfRYC9AIKjbJTWit+CqvjWYzvQwECAwEAAQJAIJLixBy2qpFoS4DSmoEm&quot; +\r\n&quot;o3qGy0t6z09AIJtH+5OeRV1be+N4cDYJKffGzDa88vQENZiRm0GRq6a+HPGQMd2k&quot; +\r\n&quot;TQIhAKMSvzIBnni7ot/OSie2TmJLY4SwTQAevXysE2RbFDYdAiEBCUEaRQnMnbp7&quot; +\r\n&quot;9mxDXDf6AU0cN/RPBjb9qSHDcWZHGzUCIG2Es59z8ugGrDY+pxLQnwfotadxd+Uy&quot; +\r\n&quot;v/Ow5T0q5gIJAiEAyS4RaI9YG8EWx/2w0T67ZUVAw8eOMB6BIUg0Xcu+3okCIBOs&quot; +\r\n&quot;/5OiPgoTdSy7bcF9IGpSE8ZgGKzgYQVZeN97YE00&quot; +\r\n&quot;-----END RSA PRIVATE KEY-----&quot;;\r\n\r\n        String ciphertext = &quot;L812/9Y8TSpwErlLR6Bz4J3uR/T5YaqtTtB5jxtD1qazGPI5t15V9drWi58colGOZFeCnGKpCrtQWKk4HWRocQ==&quot;;\r\n\r\n        // load the private key\r\n        PEMParser pemParser = new PEMParser(new StringReader(key));\r\n        JcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider(&quot;BC&quot;);\r\n        KeyPair keyPair = converter.getKeyPair((PEMKeyPair) pemParser.readObject());\r\n        KeyFactory keyFactory = KeyFactory.getInstance(&quot;RSA&quot;);\r\n        RSAPrivateCrtKeySpec privateKeySpec = keyFactory.getKeySpec(keyPair.getPrivate(), RSAPrivateCrtKeySpec.class);\r\n        RSAPrivateKey privateKey = (RSAPrivateKey) keyFactory.generatePrivate(privateKeySpec);\r\n\r\n        // load the ciphertext\r\n        byte[] cipherBytes = Base64.getDecoder().decode(ciphertext);\r\n\r\n        // perform the actual decryption\r\n        Cipher cipher = Cipher.getInstance(&quot;RSA/ECB/PKCS1Padding&quot;, &quot;BC&quot;);\r\n        cipher.init(Cipher.DECRYPT_MODE, privateKey);\r\n        byte[] plaintext = cipher.doFinal(cipherBytes);\r\n    }\r\n}\r\n```\r\nIt was able to compile without issue but when I try to run it I get the following error:\r\n\r\n```\r\nException in thread &quot;main&quot; org.bouncycastle.openssl.PEMException: unable to convert key pair: null\r\n        at org.bouncycastle.openssl.jcajce.JcaPEMKeyConverter.getKeyPair(Unknown Source)\r\n        at Test.main(MyTest.java:35)\r\nCaused by: java.lang.NullPointerException\r\n        ... 2 more\r\n```\r\nSo I guess `getKeyPair` doesn&#39;t like `(PEMKeyPair) pemParser.readObject()`. Well that&#39;s what I got from [Get a PrivateKey from a RSA .pem file](https://stackoverflow.com/a/44683080/569976)...","title":"PEMException: unable to convert key pair: null","body":"<p>I'm trying to run the following program:</p>\n<pre><code>import java.security.Security;\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\nimport org.bouncycastle.openssl.PEMParser;\nimport org.bouncycastle.openssl.jcajce.JcaPEMKeyConverter;\nimport org.bouncycastle.openssl.PEMKeyPair;\nimport java.security.spec.RSAPrivateCrtKeySpec;\nimport java.security.KeyPair;\nimport java.security.KeyFactory;\nimport java.io.StringReader;\nimport javax.crypto.Cipher;\nimport java.util.Base64;\nimport java.security.interfaces.RSAPrivateKey;\n\npublic class Test\n{\n    public static void main(String[] args) throws Exception\n    {\n        Security.addProvider(new BouncyCastleProvider());\n\n        String key = &quot;-----BEGIN RSA PRIVATE KEY-----&quot; +\n&quot;MIIBOgIBAAJBAKj34GkxFhD90vcNLYLInFEX6Ppy1tPf9Cnzj4p4WGeKLs1Pt8Qu&quot; +\n&quot;KUpRKfFLfRYC9AIKjbJTWit+CqvjWYzvQwECAwEAAQJAIJLixBy2qpFoS4DSmoEm&quot; +\n&quot;o3qGy0t6z09AIJtH+5OeRV1be+N4cDYJKffGzDa88vQENZiRm0GRq6a+HPGQMd2k&quot; +\n&quot;TQIhAKMSvzIBnni7ot/OSie2TmJLY4SwTQAevXysE2RbFDYdAiEBCUEaRQnMnbp7&quot; +\n&quot;9mxDXDf6AU0cN/RPBjb9qSHDcWZHGzUCIG2Es59z8ugGrDY+pxLQnwfotadxd+Uy&quot; +\n&quot;v/Ow5T0q5gIJAiEAyS4RaI9YG8EWx/2w0T67ZUVAw8eOMB6BIUg0Xcu+3okCIBOs&quot; +\n&quot;/5OiPgoTdSy7bcF9IGpSE8ZgGKzgYQVZeN97YE00&quot; +\n&quot;-----END RSA PRIVATE KEY-----&quot;;\n\n        String ciphertext = &quot;L812/9Y8TSpwErlLR6Bz4J3uR/T5YaqtTtB5jxtD1qazGPI5t15V9drWi58colGOZFeCnGKpCrtQWKk4HWRocQ==&quot;;\n\n        // load the private key\n        PEMParser pemParser = new PEMParser(new StringReader(key));\n        JcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider(&quot;BC&quot;);\n        KeyPair keyPair = converter.getKeyPair((PEMKeyPair) pemParser.readObject());\n        KeyFactory keyFactory = KeyFactory.getInstance(&quot;RSA&quot;);\n        RSAPrivateCrtKeySpec privateKeySpec = keyFactory.getKeySpec(keyPair.getPrivate(), RSAPrivateCrtKeySpec.class);\n        RSAPrivateKey privateKey = (RSAPrivateKey) keyFactory.generatePrivate(privateKeySpec);\n\n        // load the ciphertext\n        byte[] cipherBytes = Base64.getDecoder().decode(ciphertext);\n\n        // perform the actual decryption\n        Cipher cipher = Cipher.getInstance(&quot;RSA/ECB/PKCS1Padding&quot;, &quot;BC&quot;);\n        cipher.init(Cipher.DECRYPT_MODE, privateKey);\n        byte[] plaintext = cipher.doFinal(cipherBytes);\n    }\n}\n</code></pre>\n<p>It was able to compile without issue but when I try to run it I get the following error:</p>\n<pre><code>Exception in thread &quot;main&quot; org.bouncycastle.openssl.PEMException: unable to convert key pair: null\n        at org.bouncycastle.openssl.jcajce.JcaPEMKeyConverter.getKeyPair(Unknown Source)\n        at Test.main(MyTest.java:35)\nCaused by: java.lang.NullPointerException\n        ... 2 more\n</code></pre>\n<p>So I guess <code>getKeyPair</code> doesn't like <code>(PEMKeyPair) pemParser.readObject()</code>. Well that's what I got from <a href=\"https://stackoverflow.com/a/44683080/569976\">Get a PrivateKey from a RSA .pem file</a>...</p>\n"},{"tags":["java","amazon-s3"],"comments":[{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1659616953,"post_id":73236069,"comment_id":129340289,"body_markdown":"The answer to this question is really up to your application. If the images are a time-lined story and it wouldn&#39;t make sense to upload the 5th image without uploading the 4th, then you should go by sync (so you can wait for success of each image before moving to next). If the order is unimportant, then async would be more efficient and even if you happen to five image 5th loaded without image 4th, you wouldn&#39;t mind.","body":"The answer to this question is really up to your application. If the images are a time-lined story and it wouldn&#39;t make sense to upload the 5th image without uploading the 4th, then you should go by sync (so you can wait for success of each image before moving to next). If the order is unimportant, then async would be more efficient and even if you happen to five image 5th loaded without image 4th, you wouldn&#39;t mind."},{"owner":{"account_id":18380141,"reputation":41,"user_id":13388342,"display_name":"aishu8333"},"score":0,"creation_date":1659617373,"post_id":73236069,"comment_id":129340464,"body_markdown":"Thanks for the response. My application don&#39;t require any order. But it needs the confirmation that images got stored successfully. If all images are stored then it should proceed with next steps.  But my main concern is will it cause any latency","body":"Thanks for the response. My application don&#39;t require any order. But it needs the confirmation that images got stored successfully. If all images are stored then it should proceed with next steps.  But my main concern is will it cause any latency"},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1659617595,"post_id":73236069,"comment_id":129340562,"body_markdown":"I don&#39;t know specifically the Amazon-S3 but generally speaking, if you post a sync request it will be up to the server to release the handle when it&#39;s done whereas if you post the async request, the server will call you back when the result is ready and you can meanwhile do other things. If you need to wait for the confirmation, you can post them asynchronously and then wait for the 10 to have the confirmation callback","body":"I don&#39;t know specifically the Amazon-S3 but generally speaking, if you post a sync request it will be up to the server to release the handle when it&#39;s done whereas if you post the async request, the server will call you back when the result is ready and you can meanwhile do other things. If you need to wait for the confirmation, you can post them asynchronously and then wait for the 10 to have the confirmation callback"}],"owner":{"account_id":18380141,"reputation":41,"user_id":13388342,"display_name":"aishu8333"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1659616961,"creation_date":1659616641,"question_id":73236069,"body_markdown":"I have to store maximum 10 images[Each image size is 2 MB] to S3. As S3 cannot store multiple images at once in a single API call, I need to call putObject 10 times sequentially. My question is, do i have to prefer async call or sync ? \r\n\r\nIm assuming that sync will work in this scenario because S3 handles 3500 requests per second &amp; each image size will be 2 MB. So i don&#39;t think i will face latency issues in my application.","title":"What to prefer sync / async S3 when uploading multiple files at once [Java]","body":"<p>I have to store maximum 10 images[Each image size is 2 MB] to S3. As S3 cannot store multiple images at once in a single API call, I need to call putObject 10 times sequentially. My question is, do i have to prefer async call or sync ?</p>\n<p>Im assuming that sync will work in this scenario because S3 handles 3500 requests per second &amp; each image size will be 2 MB. So i don't think i will face latency issues in my application.</p>\n"},{"tags":["java","jdbc"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":1,"creation_date":1659448922,"post_id":73208760,"comment_id":129294058,"body_markdown":"There are some open-source _connection pool_ libraries. Very nice that you are using _try-with-resources_. However also `try (ResultSet find_id = pst.executeQuery()) {` and remove `pst.close();`. Of course above you could have an outer `try (Conncection` and many inner `try (PreparedStatement`. And use `setLong`/`getLong`.","body":"There are some open-source <i>connection pool</i> libraries. Very nice that you are using <i>try-with-resources</i>. However also <code>try (ResultSet find_id = pst.executeQuery()) {</code> and remove <code>pst.close();</code>. Of course above you could have an outer <code>try (Conncection</code> and many inner <code>try (PreparedStatement</code>. And use <code>setLong</code>/<code>getLong</code>."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1659450164,"creation_date":1659450164,"answer_id":73209207,"question_id":73208760,"body_markdown":"Your question boils down to state tracking. Tons of your code across the entire breath of the project will want to do stuff with the DB, and DBs are _fundamentally_ session oriented concepts. Thus, you will need to change your code flow – any code anywhere that needs to do anything with the DB can&#39;t just go: &quot;Eh, fine, I&#39;ll go make a connection then&quot;. It needs to get an existing connection provided to it, because &#39;just make new connections every time&#39; doesn&#39;t work. Not just because that is quite slow, but primarily because transactions are a thing.\r\n\r\nThis is where injection frameworks come in: They are all about having state that needs to exist in loads of places in the project. But, you can also do it &#39;by hand&#39;, so to speak: Pass a `Connection` object around as method parameter.\r\n\r\nYou have a few code smells in this code. These issues are leading you to this question.\r\n\r\n## Exception handling\r\n\r\n&#39;when an exception occurs, print some stuff to a log and just keeps going&#39; is what your code does now. This is, hopefully now obvious given that I put it that way, a really bad idea. A method that _fundamentally_ does DB things _should_ be declared to `throws SQLException`. The entire &#39;code flow&#39; (every method that ends up being called to perform a particular job) needs to be methods that _ALL_ are declared as `throws SQLException`, at which point you can get rid of all your try/catch blocks. You&#39;ll be reducing your code LOC by quite a bit whilst you make the code better! Yay!\r\n\r\nYou want &#39;an exception&#39; to do many things:\r\n\r\n* Stop execution. You don&#39;t want code to continue when you&#39;re in a state you don&#39;t understand. SQLException has a ton of reasons for it, hence, you have no idea what happened. Carrying on is bad. One easy fix is to have the catch block rethrow something (`throw new RuntimeException(&quot;uncaught&quot;, e)` - you should update your IDE templates, this is the correct default catch block content), but even better is to just let the SQLException happen.\r\n* You want to save the relevant info as much as possible: The stack trace, the causal chain, the exact exception type, the message, and any special info that the exception object has - SQLException has lots of this, such as the postgres error state number which is very important, and is not always included in the message.\r\n\r\nJust letting everything throw SQLException does all that - there will be very few places (all the top level calls) where you can write code that deals with it, instead of writing 83951 times `lgr.log(Level.SEVERE)`.\r\n\r\n## Connections are created every time\r\n\r\nYou don&#39;t want to do that - you want the connection to be passed along. In general you want a more robust setup to track transactions. All DB everythings are always in transactional form. Even if you have autocommit true (that&#39;s why it is called &#39;AutoCommit&#39; and not &#39;transactionless&#39;): That just means the DB assumes you meant to `db.commit()` after every query.\r\n\r\nEven read queries are transactional. Imagine a bank that needs to hand out a bank guarantee for buyout by a partnership. To do so, it needs to sum up the balance of every member of the partnership. You could simply do:\r\n\r\n```\r\nint sum = 0;\r\nfor (Partner p : partners) {\r\n  try (var pst = con.prepareStatement(&quot;SELECT balance FROM table2 WHERE id=?&quot;)) {\r\n    ... \r\n    sum += rs.getInteger(1);\r\n  }\r\n}\r\n\r\nreturn sum &gt; requiredGuarantee;\r\n```\r\n\r\nHowever, the above code is __subtly broken__. Imagine that right in the middle of this code, one of the partners transfers a large sum to another partner. You so happen to read the partner transfering the cash out _before_ the transfer, but read the balance of the receiving partner _after_ it. Your code now has the wrong sum! It things the total amount in the accounts of all the partners is much higher than it really is. The bank gives the guarantee, the deal falls through, and the bank just lost 10 million dollars. Oops. Quite the bug, isn&#39;t it?\r\n\r\nThe solution is transactions. And the right transactionlevel. At the right level (SERIALIZABLE is the only level that can do this correctly), if you do all these SELECTs in a single transaction, the above situation __cannot occur__. Postgres will let you query and sum up as normal, and you may indeed get the wrong sum, but the `.commit()` call (and note that in this transaction we have not written anything at all yet!) __will fail__. That&#39;s your cue to start over.\r\n\r\nConnections are at the same level as the transaction: If you want to run 2 transactions simultaneously, you must have 2 connections. A single connection is &#39;in&#39; a transaction. Hence, passing the Connection object around _is_ the same as passing the transaction around, and you must have transactions as the above code shows (imagine that the bank guarantee ends up being represented by INSERTing a new row in the &#39;guarantees&#39; table. You want it all in a single transaction, so that after all that, you `.commit()` and postgres will throw you an exception (and that row you wrote never happened) if the summing wasn&#39;t consistent due to some other transaction having occurred in between that changed the balance of one or more partners.\r\n\r\nThat&#39;s the _only_ correct way to write a &#39;consistent&#39; data model.\r\n\r\nFor certain projects, the cost of consistency is too high. However, unless your name is literally google, you won&#39;t ever get there, and if you must have this, it&#39;s way more complicated than just picking a lower transaction isolation level. So, go for the consistency.\r\n\r\nIt&#39;s up to you if you want `Connection con` to be the first parameter of all your db-based methods, or if you want to create an object and have a field of type &#39;con&#39; (but remember, they HAVE to be closed, so either the code that creates such an object has to use try-with-resources to close that connection, or your class that has a field `Connection con` needs to be `AutoClosable`, and has to be created with try-with-resources!) - or if you want to use an injection framework like spring or dagger or guice.\r\n\r\n## Use an abstraction\r\n\r\nJDBC is primary designed to expose every feature that every relational DB system could possibly have, and to be a consistent &#39;bottom layer&#39;. This means that as an API to directly program an app on, __it&#39;s horrible__. It&#39;s not meant for you.\r\n\r\nUse a library that _was_ meant for such a purpose. It&#39;ll be built _on top_ of JDBC. You&#39;re doing the equivalent of writing direct machine code, effectively. That&#39;s rarely a good idea.\r\n\r\nYou can use JPA (Object Persistence Frameworks) like Hibernate, but that&#39;s a whole new can of worms. If you like SQL, the tools you are looking for are [JOOQ](https://www.jooq.org) or [JDBI](https://www.jdbi.org). These mean your complicated:\r\n\r\n```\r\npst.setObject(1, id);\r\n       \r\n        ResultSet find_next = pst.executeQuery();{\r\n\r\n            while (find_next.next()) {\r\n\r\n                id2 = find_next.getInt(1);\r\n            }\r\n            pst.close();\r\n```\r\n\r\nall turn into simple one-liners.\r\n\r\n## connection pooling\r\n\r\nCreating a connection object is really expensive. It&#39;s an inevitable cost you must pay if you want multiple simultaneous transactions, but you don&#39;t really want to pay it if you have multiple sequential ones. It depends a bit on the DB engine and JDBC driver (some even have a baked-in pooling system, some don&#39;t). But one easy solution is to add a layer of abstraction: Instead of asking the DriverManager to get you a connection, you can ask a connection pooler. It gives you a virtualized connection object that passes through all calls, except for `close()`, which doesn&#39;t _actually_ close the connection, but simply invalidates the virtual object and passes the actual connection back into &#39;the pool&#39;.\r\n\r\nThis is not necessary until you get quite a bit of traffic, but if you want to be fully ready, it&#39;s something you can look at. Libraries like [HikariCP](https://github.com/brettwooldridge/HikariCP) make this easy.\r\n","title":"How to avoid multiple connections for jdbc postgres","body":"<p>Your question boils down to state tracking. Tons of your code across the entire breath of the project will want to do stuff with the DB, and DBs are <em>fundamentally</em> session oriented concepts. Thus, you will need to change your code flow – any code anywhere that needs to do anything with the DB can't just go: &quot;Eh, fine, I'll go make a connection then&quot;. It needs to get an existing connection provided to it, because 'just make new connections every time' doesn't work. Not just because that is quite slow, but primarily because transactions are a thing.</p>\n<p>This is where injection frameworks come in: They are all about having state that needs to exist in loads of places in the project. But, you can also do it 'by hand', so to speak: Pass a <code>Connection</code> object around as method parameter.</p>\n<p>You have a few code smells in this code. These issues are leading you to this question.</p>\n<h2>Exception handling</h2>\n<p>'when an exception occurs, print some stuff to a log and just keeps going' is what your code does now. This is, hopefully now obvious given that I put it that way, a really bad idea. A method that <em>fundamentally</em> does DB things <em>should</em> be declared to <code>throws SQLException</code>. The entire 'code flow' (every method that ends up being called to perform a particular job) needs to be methods that <em>ALL</em> are declared as <code>throws SQLException</code>, at which point you can get rid of all your try/catch blocks. You'll be reducing your code LOC by quite a bit whilst you make the code better! Yay!</p>\n<p>You want 'an exception' to do many things:</p>\n<ul>\n<li>Stop execution. You don't want code to continue when you're in a state you don't understand. SQLException has a ton of reasons for it, hence, you have no idea what happened. Carrying on is bad. One easy fix is to have the catch block rethrow something (<code>throw new RuntimeException(&quot;uncaught&quot;, e)</code> - you should update your IDE templates, this is the correct default catch block content), but even better is to just let the SQLException happen.</li>\n<li>You want to save the relevant info as much as possible: The stack trace, the causal chain, the exact exception type, the message, and any special info that the exception object has - SQLException has lots of this, such as the postgres error state number which is very important, and is not always included in the message.</li>\n</ul>\n<p>Just letting everything throw SQLException does all that - there will be very few places (all the top level calls) where you can write code that deals with it, instead of writing 83951 times <code>lgr.log(Level.SEVERE)</code>.</p>\n<h2>Connections are created every time</h2>\n<p>You don't want to do that - you want the connection to be passed along. In general you want a more robust setup to track transactions. All DB everythings are always in transactional form. Even if you have autocommit true (that's why it is called 'AutoCommit' and not 'transactionless'): That just means the DB assumes you meant to <code>db.commit()</code> after every query.</p>\n<p>Even read queries are transactional. Imagine a bank that needs to hand out a bank guarantee for buyout by a partnership. To do so, it needs to sum up the balance of every member of the partnership. You could simply do:</p>\n<pre><code>int sum = 0;\nfor (Partner p : partners) {\n  try (var pst = con.prepareStatement(&quot;SELECT balance FROM table2 WHERE id=?&quot;)) {\n    ... \n    sum += rs.getInteger(1);\n  }\n}\n\nreturn sum &gt; requiredGuarantee;\n</code></pre>\n<p>However, the above code is <strong>subtly broken</strong>. Imagine that right in the middle of this code, one of the partners transfers a large sum to another partner. You so happen to read the partner transfering the cash out <em>before</em> the transfer, but read the balance of the receiving partner <em>after</em> it. Your code now has the wrong sum! It things the total amount in the accounts of all the partners is much higher than it really is. The bank gives the guarantee, the deal falls through, and the bank just lost 10 million dollars. Oops. Quite the bug, isn't it?</p>\n<p>The solution is transactions. And the right transactionlevel. At the right level (SERIALIZABLE is the only level that can do this correctly), if you do all these SELECTs in a single transaction, the above situation <strong>cannot occur</strong>. Postgres will let you query and sum up as normal, and you may indeed get the wrong sum, but the <code>.commit()</code> call (and note that in this transaction we have not written anything at all yet!) <strong>will fail</strong>. That's your cue to start over.</p>\n<p>Connections are at the same level as the transaction: If you want to run 2 transactions simultaneously, you must have 2 connections. A single connection is 'in' a transaction. Hence, passing the Connection object around <em>is</em> the same as passing the transaction around, and you must have transactions as the above code shows (imagine that the bank guarantee ends up being represented by INSERTing a new row in the 'guarantees' table. You want it all in a single transaction, so that after all that, you <code>.commit()</code> and postgres will throw you an exception (and that row you wrote never happened) if the summing wasn't consistent due to some other transaction having occurred in between that changed the balance of one or more partners.</p>\n<p>That's the <em>only</em> correct way to write a 'consistent' data model.</p>\n<p>For certain projects, the cost of consistency is too high. However, unless your name is literally google, you won't ever get there, and if you must have this, it's way more complicated than just picking a lower transaction isolation level. So, go for the consistency.</p>\n<p>It's up to you if you want <code>Connection con</code> to be the first parameter of all your db-based methods, or if you want to create an object and have a field of type 'con' (but remember, they HAVE to be closed, so either the code that creates such an object has to use try-with-resources to close that connection, or your class that has a field <code>Connection con</code> needs to be <code>AutoClosable</code>, and has to be created with try-with-resources!) - or if you want to use an injection framework like spring or dagger or guice.</p>\n<h2>Use an abstraction</h2>\n<p>JDBC is primary designed to expose every feature that every relational DB system could possibly have, and to be a consistent 'bottom layer'. This means that as an API to directly program an app on, <strong>it's horrible</strong>. It's not meant for you.</p>\n<p>Use a library that <em>was</em> meant for such a purpose. It'll be built <em>on top</em> of JDBC. You're doing the equivalent of writing direct machine code, effectively. That's rarely a good idea.</p>\n<p>You can use JPA (Object Persistence Frameworks) like Hibernate, but that's a whole new can of worms. If you like SQL, the tools you are looking for are <a href=\"https://www.jooq.org\" rel=\"nofollow noreferrer\">JOOQ</a> or <a href=\"https://www.jdbi.org\" rel=\"nofollow noreferrer\">JDBI</a>. These mean your complicated:</p>\n<pre><code>pst.setObject(1, id);\n       \n        ResultSet find_next = pst.executeQuery();{\n\n            while (find_next.next()) {\n\n                id2 = find_next.getInt(1);\n            }\n            pst.close();\n</code></pre>\n<p>all turn into simple one-liners.</p>\n<h2>connection pooling</h2>\n<p>Creating a connection object is really expensive. It's an inevitable cost you must pay if you want multiple simultaneous transactions, but you don't really want to pay it if you have multiple sequential ones. It depends a bit on the DB engine and JDBC driver (some even have a baked-in pooling system, some don't). But one easy solution is to add a layer of abstraction: Instead of asking the DriverManager to get you a connection, you can ask a connection pooler. It gives you a virtualized connection object that passes through all calls, except for <code>close()</code>, which doesn't <em>actually</em> close the connection, but simply invalidates the virtual object and passes the actual connection back into 'the pool'.</p>\n<p>This is not necessary until you get quite a bit of traffic, but if you want to be fully ready, it's something you can look at. Libraries like <a href=\"https://github.com/brettwooldridge/HikariCP\" rel=\"nofollow noreferrer\">HikariCP</a> make this easy.</p>\n"}],"owner":{"account_id":19093368,"reputation":532,"user_id":13943207,"display_name":"stanvooz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":462,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1659616192,"creation_date":1659448268,"question_id":73208760,"body_markdown":"I need to query a PostgreSQL database based upon the result of the previous query. Right now, I have for each query a new `DriverManager` connection and this seems not like the best practise to me (I&#39;m new to Java).\r\n\r\n    public static Integer item(DataModel params) {\r\n\r\n        Psqlcon psql = new Psqlcon();\r\n        \r\n        try (Connection con = DriverManager.getConnection(psql.url, psql.user, psql.password);\r\n             PreparedStatement pst = con.prepareStatement(&quot;SELECT * FROM table1 WHERE var=? &quot;\r\n            pst.setObject(1, params.getID());\r\n           \r\n            ResultSet find_id = pst.executeQuery();{\r\n\r\n                while (find_id.next()) {\r\n\r\n                    id = find_id.getInt(1);\r\n                }\r\n                pst.close();\r\n            }\r\n\r\n        } catch (SQLException ex) {\r\n\r\n            Logger lgr = Logger.getLogger(something.class.getName());\r\n            lgr.log(Level.SEVERE, ex.getMessage(), ex);\r\n        }\r\n\r\n        try (Connection con = DriverManager.getConnection(psql.url, psql.user, psql.password);\r\n                 PreparedStatement pst = con.prepareStatement(&quot;SELECT something FROM table2 WHERE id=? &quot;\r\n                \r\n            pst.setObject(1, id);\r\n           \r\n            ResultSet find_next = pst.executeQuery();{\r\n\r\n                while (find_next.next()) {\r\n\r\n                    id2 = find_next.getInt(1);\r\n                }\r\n                pst.close();\r\n            }\r\n       \r\n            ....on so on\r\n\r\nThis is an oversimplified example. The queries are actually a bit more complex. Wouldn&#39;t it be better to have one `connection` and close only the `prepareStatement`? How do I accomplish to have only one connection?","title":"How to avoid multiple connections for jdbc postgres","body":"<p>I need to query a PostgreSQL database based upon the result of the previous query. Right now, I have for each query a new <code>DriverManager</code> connection and this seems not like the best practise to me (I'm new to Java).</p>\n<pre><code>public static Integer item(DataModel params) {\n\n    Psqlcon psql = new Psqlcon();\n    \n    try (Connection con = DriverManager.getConnection(psql.url, psql.user, psql.password);\n         PreparedStatement pst = con.prepareStatement(&quot;SELECT * FROM table1 WHERE var=? &quot;\n        pst.setObject(1, params.getID());\n       \n        ResultSet find_id = pst.executeQuery();{\n\n            while (find_id.next()) {\n\n                id = find_id.getInt(1);\n            }\n            pst.close();\n        }\n\n    } catch (SQLException ex) {\n\n        Logger lgr = Logger.getLogger(something.class.getName());\n        lgr.log(Level.SEVERE, ex.getMessage(), ex);\n    }\n\n    try (Connection con = DriverManager.getConnection(psql.url, psql.user, psql.password);\n             PreparedStatement pst = con.prepareStatement(&quot;SELECT something FROM table2 WHERE id=? &quot;\n            \n        pst.setObject(1, id);\n       \n        ResultSet find_next = pst.executeQuery();{\n\n            while (find_next.next()) {\n\n                id2 = find_next.getInt(1);\n            }\n            pst.close();\n        }\n   \n        ....on so on\n</code></pre>\n<p>This is an oversimplified example. The queries are actually a bit more complex. Wouldn't it be better to have one <code>connection</code> and close only the <code>prepareStatement</code>? How do I accomplish to have only one connection?</p>\n"},{"tags":["java","jdbc"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":2,"creation_date":1659452321,"post_id":73209155,"comment_id":129295510,"body_markdown":"you are overwriting previous `rset` in catch block - that is the reason.","body":"you are overwriting previous <code>rset</code> in catch block - that is the reason."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1659469939,"post_id":73209155,"comment_id":129301331,"body_markdown":"Your IDE is actually wrong.  ResultSets are a special case.  From [the ResultSet documentation](https://docs.oracle.com/en/java/javase/18/docs/api/java.sql/java/sql/ResultSet.html):  “A ResultSet object is automatically closed when the Statement object that generated it is closed, re-executed, or used to retrieve the next result from a sequence of multiple results.”","body":"Your IDE is actually wrong.  ResultSets are a special case.  From <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.sql/java/sql/ResultSet.html\" rel=\"nofollow noreferrer\">the ResultSet documentation</a>:  “A ResultSet object is automatically closed when the Statement object that generated it is closed, re-executed, or used to retrieve the next result from a sequence of multiple results.”"}],"answers":[{"tags":[],"owner":{"account_id":11358426,"reputation":1127,"user_id":8327330,"display_name":"iamgirdhar"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1659450726,"creation_date":1659450726,"answer_id":73209338,"question_id":73209155,"body_markdown":"Use **try-with-resources** feature\r\n\r\nYou can use `try-with-resources` feature of `java 7` it will handle the auto closing of the resources as `ResultSet`,`Statement` implements `AutoCloseable` interface.\r\n\r\nlike : `try (ResultSet rset = stmt.executeQuery(query))`\r\n\r\nsimilarly for other resources as well.","title":"Close ResultSet after using in catch-block","body":"<p>Use <strong>try-with-resources</strong> feature</p>\n<p>You can use <code>try-with-resources</code> feature of <code>java 7</code> it will handle the auto closing of the resources as <code>ResultSet</code>,<code>Statement</code> implements <code>AutoCloseable</code> interface.</p>\n<p>like : <code>try (ResultSet rset = stmt.executeQuery(query))</code></p>\n<p>similarly for other resources as well.</p>\n"},{"tags":[],"owner":{"account_id":15054416,"reputation":419,"user_id":10865170,"display_name":"Big Zed"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1659451999,"creation_date":1659451999,"answer_id":73209624,"question_id":73209155,"body_markdown":"Try to put the ``return``statement after the ``finally`` clause. i think your function is ignoring everything that comes after the ``return`` statement.\r\n\r\nTry something like :   \r\n```\r\nStatement stmt = null;\r\nResultSet rset = null;\r\n\r\nString parsedResult = null;  // String or the object type you want to return.\r\n\r\ntry {\r\n    stmt = connection.createStatement();\r\n    try {\r\n        String query = foo();\r\n        rset = stmt.executeQuery(query);\r\n    } catch (Exception e) {\r\n        String query = bar();\r\n        rset = stmt.executeQuery(query);\r\n    }\r\n     parsedResult = JsonHandler.resultSetToJson(rset);\r\n} finally {\r\n    if (rset != null)\r\n        rset.close();\r\n    if (stmt != null)\r\n        stmt.close();\r\n}\r\n\r\nreturn parsedResult;\r\n```  ","title":"Close ResultSet after using in catch-block","body":"<p>Try to put the <code>return</code>statement after the <code>finally</code> clause. i think your function is ignoring everything that comes after the <code>return</code> statement.</p>\n<p>Try something like :</p>\n<pre><code>Statement stmt = null;\nResultSet rset = null;\n\nString parsedResult = null;  // String or the object type you want to return.\n\ntry {\n    stmt = connection.createStatement();\n    try {\n        String query = foo();\n        rset = stmt.executeQuery(query);\n    } catch (Exception e) {\n        String query = bar();\n        rset = stmt.executeQuery(query);\n    }\n     parsedResult = JsonHandler.resultSetToJson(rset);\n} finally {\n    if (rset != null)\n        rset.close();\n    if (stmt != null)\n        stmt.close();\n}\n\nreturn parsedResult;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1659540825,"creation_date":1659452878,"answer_id":73209834,"question_id":73209155,"body_markdown":"As [commented][1], your second assignment of `rset` would let the first `ResultSet` object become a candidate for garbage collection without being closed. Thus the warning from the compiler or your IDE. \r\n\r\nTo more reliably and clearly close your resources, use try-with-resources.\r\n\r\n# try-with-resources syntax\r\n\r\nModern Java offers the try-with-resources syntax feature to automatically close any object that implements [`AutoCloseable`][2] with its single method `close`. The resources will be closed in the reverse of the order in which they were instantiated. And they are closed whether your code completes successfully or throws an exception. \r\n\r\nSee [The Java Tutorials][3] provided free of cost by Oracle Corp.\r\n\r\nTry-with-resources is one of my favorite features in Java. Along with [text blocks][4], database work is much easier now, and more fool-proof.\r\n\r\n`Connnection`, `Statement`, and `ResultSet` are all such auto-closeable resources. So wrap them in try-with-resource syntax.\r\n\r\n## Exceptions\r\n\r\nGet specific with your exceptions. Trap for the ones expected within the local context. \r\n\r\n## Code\r\n\r\nHere is some untested code.\r\n\r\nNotice how we name each `ResultSet` object differently.\r\n\r\nNotice how the nesting of try-with-resources calls communicates visually the cascading structure of our logic. \r\n\r\n```java\r\ntry \r\n(\r\n    Connection conn = myDataSource.getConnection() ;\r\n    Statement stmt = conn.createStatement() ;\r\n)\r\n{\r\n    try \r\n    (\r\n        ResultSet rsetFoo = stmt.executeQuery( foo() );\r\n    )\r\n    {\r\n        return JsonHandler.resultSetToJson( rsetFoo );\r\n    }\r\n    catch ( SQLException | SQLTimeoutException e) \r\n    {\r\n        try \r\n        (\r\n            ResultSet rsetBar = stmt.executeQuery( bar() );\r\n        )\r\n        {\r\n            return JsonHandler.resultSetToJson( rsetBar );\r\n        }\r\n    }\r\n}\r\ncatch ( SQLException e ) \r\n{\r\n    … \r\n}\r\ncatch ( SQLTimeoutException e ) \r\n{\r\n    …\r\n}\r\n```\r\n\r\n\r\nIf you had searched before posting, you would have found many existing examples, and much discussion, already posted on Stack Overflow.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/73209155/close-resultset-after-using-in-catch-block/73209834#comment129295510_73209155\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/AutoCloseable.html\r\n  [3]: https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\r\n  [4]: https://openjdk.org/jeps/378","title":"Close ResultSet after using in catch-block","body":"<p>As <a href=\"https://stackoverflow.com/questions/73209155/close-resultset-after-using-in-catch-block/73209834#comment129295510_73209155\">commented</a>, your second assignment of <code>rset</code> would let the first <code>ResultSet</code> object become a candidate for garbage collection without being closed. Thus the warning from the compiler or your IDE.</p>\n<p>To more reliably and clearly close your resources, use try-with-resources.</p>\n<h1>try-with-resources syntax</h1>\n<p>Modern Java offers the try-with-resources syntax feature to automatically close any object that implements <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/AutoCloseable.html\" rel=\"nofollow noreferrer\"><code>AutoCloseable</code></a> with its single method <code>close</code>. The resources will be closed in the reverse of the order in which they were instantiated. And they are closed whether your code completes successfully or throws an exception.</p>\n<p>See <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">The Java Tutorials</a> provided free of cost by Oracle Corp.</p>\n<p>Try-with-resources is one of my favorite features in Java. Along with <a href=\"https://openjdk.org/jeps/378\" rel=\"nofollow noreferrer\">text blocks</a>, database work is much easier now, and more fool-proof.</p>\n<p><code>Connnection</code>, <code>Statement</code>, and <code>ResultSet</code> are all such auto-closeable resources. So wrap them in try-with-resource syntax.</p>\n<h2>Exceptions</h2>\n<p>Get specific with your exceptions. Trap for the ones expected within the local context.</p>\n<h2>Code</h2>\n<p>Here is some untested code.</p>\n<p>Notice how we name each <code>ResultSet</code> object differently.</p>\n<p>Notice how the nesting of try-with-resources calls communicates visually the cascading structure of our logic.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try \n(\n    Connection conn = myDataSource.getConnection() ;\n    Statement stmt = conn.createStatement() ;\n)\n{\n    try \n    (\n        ResultSet rsetFoo = stmt.executeQuery( foo() );\n    )\n    {\n        return JsonHandler.resultSetToJson( rsetFoo );\n    }\n    catch ( SQLException | SQLTimeoutException e) \n    {\n        try \n        (\n            ResultSet rsetBar = stmt.executeQuery( bar() );\n        )\n        {\n            return JsonHandler.resultSetToJson( rsetBar );\n        }\n    }\n}\ncatch ( SQLException e ) \n{\n    … \n}\ncatch ( SQLTimeoutException e ) \n{\n    …\n}\n</code></pre>\n<p>If you had searched before posting, you would have found many existing examples, and much discussion, already posted on Stack Overflow.</p>\n"}],"owner":{"account_id":7247431,"reputation":27,"user_id":5528906,"accept_rate":75,"display_name":"mavok"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":73209834,"answer_count":3,"score":-2,"last_activity_date":1659616146,"creation_date":1659449880,"question_id":73209155,"body_markdown":"Eclipse IDE always shows following warning:\r\n\r\n&gt; Resource leak: &#39;rset&#39; is not closed at this location\r\n\r\nBut for me the code seems to be correct:\r\n\r\n    Statement stmt = null;\r\n\tResultSet rset = null;\r\n\ttry {\r\n\t    stmt = connection.createStatement();\r\n\t    try {\r\n\t\t    String query = foo();\r\n\t\t    rset = stmt.executeQuery(query);\r\n\t    } catch (Exception e) {\r\n\t\t    String query = bar();\r\n\t\t    rset = stmt.executeQuery(query);\r\n\t    }\r\n\t    return JsonHandler.resultSetToJson(rset);\r\n\t} finally {\r\n\t    if (rset != null)\r\n\t\t    rset.close();\r\n\t    if (stmt != null)\r\n\t\t    stmt.close();\r\n\t}\r\n\r\nHow do I close the ResultSet?","title":"Close ResultSet after using in catch-block","body":"<p>Eclipse IDE always shows following warning:</p>\n<blockquote>\n<p>Resource leak: 'rset' is not closed at this location</p>\n</blockquote>\n<p>But for me the code seems to be correct:</p>\n<pre><code>Statement stmt = null;\nResultSet rset = null;\ntry {\n    stmt = connection.createStatement();\n    try {\n        String query = foo();\n        rset = stmt.executeQuery(query);\n    } catch (Exception e) {\n        String query = bar();\n        rset = stmt.executeQuery(query);\n    }\n    return JsonHandler.resultSetToJson(rset);\n} finally {\n    if (rset != null)\n        rset.close();\n    if (stmt != null)\n        stmt.close();\n}\n</code></pre>\n<p>How do I close the ResultSet?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6921189,"reputation":1490,"user_id":5313817,"display_name":"Rishal"},"score":0,"creation_date":1659612339,"post_id":73235030,"comment_id":129338577,"body_markdown":"is the string is guaranteed to be same, After Errorcode you will get your myName?","body":"is the string is guaranteed to be same, After Errorcode you will get your myName?"},{"owner":{"account_id":6074897,"reputation":2892,"user_id":4742570,"display_name":"jsheeran"},"score":1,"creation_date":1659612377,"post_id":73235030,"comment_id":129338595,"body_markdown":"Does this answer your question? [How can I efficiently parse HTML with Java?](https://stackoverflow.com/questions/2168610/how-can-i-efficiently-parse-html-with-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2168610/how-can-i-efficiently-parse-html-with-java\">How can I efficiently parse HTML with Java?</a>"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1659630131,"post_id":73235030,"comment_id":129345735,"body_markdown":"[Do not use regular expressions to parse HTML.](https://stackoverflow.com/questions/701166/can-you-provide-some-examples-of-why-it-is-hard-to-parse-xml-and-html-with-a-reg)  Doing so *will* break eventually.","body":"<a href=\"https://stackoverflow.com/questions/701166/can-you-provide-some-examples-of-why-it-is-hard-to-parse-xml-and-html-with-a-reg\">Do not use regular expressions to parse HTML.</a>  Doing so <i>will</i> break eventually."}],"answers":[{"tags":[],"owner":{"account_id":6921189,"reputation":1490,"user_id":5313817,"display_name":"Rishal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659615455,"creation_date":1659615455,"answer_id":73235812,"question_id":73235030,"body_markdown":"As per your string it looks like `HTML` and if you want to parse it, there are multiple ways to do it. As in comments one of the ways suggested is `JSOUP`.\r\n\r\nIf you are aware of the `tags` and `path` you can use `XPath` to obtain the information you need.\r\n\r\n**For reference example as below:**\r\n\r\n        String s = &quot;&lt;tr&gt;&lt;td&gt;&lt;b&gt;ErrorCode&lt;/b&gt;&lt;/td&gt;&lt;td&gt;myName&lt;/td&gt;&lt;/tr&gt;&quot;;\r\n\r\n        InputSource inputXML = new InputSource(new StringReader(s));\r\n        XPathFactory xpathFactory = XPathFactory.newInstance();\r\n        XPath xpath = xpathFactory.newXPath();\r\n\r\n        String xpathExpression = &quot;/tr/td[2]&quot;; //Xpath to evaluate and find your value as per your String.\r\n\r\n        XPathExpression expr = xpath.compile(xpathExpression);\r\n        \r\n       //It will give you List of Nodes in which you can iterate and find out your value.\r\n        NodeList nodes = (NodeList) expr.evaluate(inputXML, XPathConstants.NODESET);\r\n        System.out.println(nodes.item(0).getTextContent());\r\n\r\nAnother approach is to use Html Parsing Libraries as given in suggestions.\r\n**JSoup**\r\n\r\nFor Jsoup (XML) below is reference code can be used.\r\n\r\n        String s = &quot;&lt;tr&gt;&lt;td&gt;&lt;b&gt;ErrorCode&lt;/b&gt;&lt;/td&gt;&lt;td&gt;myName&lt;/td&gt;&lt;/tr&gt;&quot;;\r\n        Document doc = Jsoup.parse(s,&quot;&quot;, Parser.xmlParser());\r\n        Elements td = doc.select(&quot;td&quot;);\r\n        System.out.println(td.get(1).text());\r\n\r\nFor Jsoup(Html) your tags need to be proper.\r\n\r\n        String s = &quot;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;b&gt;ErrorCode&lt;/b&gt;&lt;/td&gt;&lt;td&gt;myName&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;;\r\n        Document doc = Jsoup.parse(s);\r\n        Elements td = doc.select(&quot;td&quot;);\r\n        System.out.println(td.get(1).text());","title":"how to extract specific word from given string? I want Only MyName from the given string","body":"<p>As per your string it looks like <code>HTML</code> and if you want to parse it, there are multiple ways to do it. As in comments one of the ways suggested is <code>JSOUP</code>.</p>\n<p>If you are aware of the <code>tags</code> and <code>path</code> you can use <code>XPath</code> to obtain the information you need.</p>\n<p><strong>For reference example as below:</strong></p>\n<pre><code>    String s = &quot;&lt;tr&gt;&lt;td&gt;&lt;b&gt;ErrorCode&lt;/b&gt;&lt;/td&gt;&lt;td&gt;myName&lt;/td&gt;&lt;/tr&gt;&quot;;\n\n    InputSource inputXML = new InputSource(new StringReader(s));\n    XPathFactory xpathFactory = XPathFactory.newInstance();\n    XPath xpath = xpathFactory.newXPath();\n\n    String xpathExpression = &quot;/tr/td[2]&quot;; //Xpath to evaluate and find your value as per your String.\n\n    XPathExpression expr = xpath.compile(xpathExpression);\n    \n   //It will give you List of Nodes in which you can iterate and find out your value.\n    NodeList nodes = (NodeList) expr.evaluate(inputXML, XPathConstants.NODESET);\n    System.out.println(nodes.item(0).getTextContent());\n</code></pre>\n<p>Another approach is to use Html Parsing Libraries as given in suggestions.\n<strong>JSoup</strong></p>\n<p>For Jsoup (XML) below is reference code can be used.</p>\n<pre><code>    String s = &quot;&lt;tr&gt;&lt;td&gt;&lt;b&gt;ErrorCode&lt;/b&gt;&lt;/td&gt;&lt;td&gt;myName&lt;/td&gt;&lt;/tr&gt;&quot;;\n    Document doc = Jsoup.parse(s,&quot;&quot;, Parser.xmlParser());\n    Elements td = doc.select(&quot;td&quot;);\n    System.out.println(td.get(1).text());\n</code></pre>\n<p>For Jsoup(Html) your tags need to be proper.</p>\n<pre><code>    String s = &quot;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;b&gt;ErrorCode&lt;/b&gt;&lt;/td&gt;&lt;td&gt;myName&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;;\n    Document doc = Jsoup.parse(s);\n    Elements td = doc.select(&quot;td&quot;);\n    System.out.println(td.get(1).text());\n</code></pre>\n"}],"owner":{"account_id":25976481,"reputation":1,"user_id":19690863,"display_name":"Shubhankarr Saha"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1659632126,"answer_count":1,"score":-1,"last_activity_date":1659615455,"creation_date":1659611980,"question_id":73235030,"body_markdown":"```java\r\nString s= &quot;&lt;tr&gt;&lt;td&gt;&lt;b&gt;ErrorCode&lt;/b&gt;&lt;/td&gt;&lt;td&gt;myName&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;b&gt;&quot;;      \r\nString p[]= s.split(`enter code here`);\r\n```","title":"how to extract specific word from given string? I want Only MyName from the given string","body":"<pre class=\"lang-java prettyprint-override\"><code>String s= &quot;&lt;tr&gt;&lt;td&gt;&lt;b&gt;ErrorCode&lt;/b&gt;&lt;/td&gt;&lt;td&gt;myName&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;b&gt;&quot;;      \nString p[]= s.split(`enter code here`);\n</code></pre>\n"},{"tags":["java","mongodb","spring-data","spring-data-mongodb"],"comments":[{"owner":{"account_id":9744,"reputation":80826,"user_id":18122,"accept_rate":80,"display_name":"Oliver Drotbohm"},"score":1,"creation_date":1387437599,"post_id":20667057,"comment_id":30959950,"body_markdown":"What do the documents look like you&#39;re trying to read? Can you check, that the values of `impapps`, `repository` and `artifacts` are arrays in MongoDB? If so, the `read(…)` method should run into the `typeToUse.isCollectionLike() &amp;&amp; dbo instanceof BasicDBList` clause and properly create a collection for the property. I am assuming you rather find something *not* an array and thus the entity resolution kicks in.\n\nPS: Would you mind properly formatting the code samples? Makes the post much better to read and will probably attract more people to answer.","body":"What do the documents look like you&#39;re trying to read? Can you check, that the values of <code>impapps</code>, <code>repository</code> and <code>artifacts</code> are arrays in MongoDB? If so, the <code>read(…)</code> method should run into the <code>typeToUse.isCollectionLike() &amp;&amp; dbo instanceof BasicDBList</code> clause and properly create a collection for the property. I am assuming you rather find something <i>not</i> an array and thus the entity resolution kicks in.  PS: Would you mind properly formatting the code samples? Makes the post much better to read and will probably attract more people to answer."},{"owner":{"account_id":1616076,"reputation":673,"user_id":1493723,"accept_rate":52,"display_name":"VBJ"},"score":0,"creation_date":1387468399,"post_id":20667057,"comment_id":30977978,"body_markdown":"@OliverGierke Thanks for your reply. I have formatted my question a bit. And i have the `document` pic attached. `impappa` is created as an array, `artifacts` is created as array and `repository` is currently created as blank array currently.","body":"@OliverGierke Thanks for your reply. I have formatted my question a bit. And i have the <code>document</code> pic attached. <code>impappa</code> is created as an array, <code>artifacts</code> is created as array and <code>repository</code> is currently created as blank array currently."},{"owner":{"account_id":1616076,"reputation":673,"user_id":1493723,"accept_rate":52,"display_name":"VBJ"},"score":0,"creation_date":1387472269,"post_id":20667057,"comment_id":30980612,"body_markdown":"now when i see it close..i see that `impapps` is storing as an document instead of an array of documents..I think there is issues in my code. When i edit the `impapps` looks like it is not storing as an array but as a document.","body":"now when i see it close..i see that <code>impapps</code> is storing as an document instead of an array of documents..I think there is issues in my code. When i edit the <code>impapps</code> looks like it is not storing as an array but as a document."},{"owner":{"account_id":1616076,"reputation":673,"user_id":1493723,"accept_rate":52,"display_name":"VBJ"},"score":0,"creation_date":1387478167,"post_id":20667057,"comment_id":30984068,"body_markdown":"@OliverGierke Since you are here..can you please tell me what is the right way to update an exiting document in an array..I tried this but it is just replacing it as document. `Criteria crit=new Criteria().andOperator(\n\t\t\t\t\t\tCriteria.where(&quot;_id&quot;).is(projectId),\n\t\t\t\t\t\tCriteria.where(&quot;impapps.appid&quot;).is(impapp.getAppId())\n\t\t\t\t\t\t);Query query=new Query(crit);Update upd=new Update();\nupd.set(&quot;impapps&quot;, impapp);mongoTemplate.updateFirst(query, upd, Project.class)`","body":"@OliverGierke Since you are here..can you please tell me what is the right way to update an exiting document in an array..I tried this but it is just replacing it as document. <code>Criteria crit=new Criteria().andOperator( \t\t\t\t\t\tCriteria.where(&quot;_id&quot;).is(projectId), \t\t\t\t\t\tCriteria.where(&quot;impapps.appid&quot;).is(impapp.getAppId()) \t\t\t\t\t\t);Query query=new Query(crit);Update upd=new Update(); upd.set(&quot;impapps&quot;, impapp);mongoTemplate.updateFirst(query, upd, Project.class)</code>"},{"owner":{"account_id":1616076,"reputation":673,"user_id":1493723,"accept_rate":52,"display_name":"VBJ"},"score":0,"creation_date":1387478651,"post_id":20667057,"comment_id":30984328,"body_markdown":"@OliverGierke nevermind sir. I got it by adding a $ sign. Thank you for looking into the post. You have great holidays!!","body":"@OliverGierke nevermind sir. I got it by adding a $ sign. Thank you for looking into the post. You have great holidays!!"},{"owner":{"account_id":9744,"reputation":80826,"user_id":18122,"accept_rate":80,"display_name":"Oliver Drotbohm"},"score":0,"creation_date":1387542988,"post_id":20667057,"comment_id":31009726,"body_markdown":"Please don&#39;t use the comment section to side-track this. This is an FAQ site, not a discussion forum.","body":"Please don&#39;t use the comment section to side-track this. This is an FAQ site, not a discussion forum."}],"answers":[{"tags":[],"owner":{"account_id":9744,"reputation":80826,"user_id":18122,"accept_rate":80,"display_name":"Oliver Drotbohm"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1387543105,"creation_date":1387543105,"answer_id":20703823,"question_id":20667057,"body_markdown":"The `impapps` field in your document is not an array but a nested document. So if you change your `List&lt;ImpactedApplications&gt;` to a simple `ImpactedApplications` this should read fine.","title":"Spring Mongodb- Could not instantiate bean class [java.util.List]: Specified class is an interface","body":"<p>The <code>impapps</code> field in your document is not an array but a nested document. So if you change your <code>List&lt;ImpactedApplications&gt;</code> to a simple <code>ImpactedApplications</code> this should read fine.</p>\n"},{"tags":[],"owner":{"account_id":4722924,"reputation":121,"user_id":3820358,"display_name":"bastien"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1465390772,"creation_date":1465372925,"answer_id":37696621,"question_id":20667057,"body_markdown":"I have got the same exception : \r\n\r\n**Try to declare your field like this :**\r\n\r\n\r\n    @Field(&quot;impapps&quot;)\r\n    ArrayList&lt;ImpactedApplications&gt; impapps = new ArrayList&lt;ImpactedApplications&gt;();\r\n\r\nI don&#39;t like to do that but it works for me. \r\n\r\n**edit:**\r\n\r\nMy issue was due to unwind operation during aggregation.\r\nIt transform array (declared as List&lt;&gt; in my class) into object \r\nand then reflection doesn&#39;t work because spring was expecting a list.\r\n\r\n","title":"Spring Mongodb- Could not instantiate bean class [java.util.List]: Specified class is an interface","body":"<p>I have got the same exception : </p>\n\n<p><strong>Try to declare your field like this :</strong></p>\n\n<pre><code>@Field(\"impapps\")\nArrayList&lt;ImpactedApplications&gt; impapps = new ArrayList&lt;ImpactedApplications&gt;();\n</code></pre>\n\n<p>I don't like to do that but it works for me. </p>\n\n<p><strong>edit:</strong></p>\n\n<p>My issue was due to unwind operation during aggregation.\nIt transform array (declared as List&lt;> in my class) into object \nand then reflection doesn't work because spring was expecting a list.</p>\n"},{"tags":[],"owner":{"account_id":9358395,"reputation":50,"user_id":13416066,"display_name":"Gaurav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659615424,"creation_date":1659615424,"answer_id":73235802,"question_id":20667057,"body_markdown":"use ArrayList&lt;SomeObject&gt; someObjects instead of List&lt;SomeObject&gt; someObjects. \r\n\r\nIt worked for me. ","title":"Spring Mongodb- Could not instantiate bean class [java.util.List]: Specified class is an interface","body":"<p>use ArrayList someObjects instead of List someObjects.</p>\n<p>It worked for me.</p>\n"}],"owner":{"account_id":1616076,"reputation":673,"user_id":1493723,"accept_rate":52,"display_name":"VBJ"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19287,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":20703823,"answer_count":3,"score":4,"last_activity_date":1659615424,"creation_date":1387395973,"question_id":20667057,"body_markdown":"my project is using Spring data mongodb. I was not having below error until i made an edit to one of the document that has a field with Array of Documents in it. It was working fine before but now I keep getting the below error.\r\n\r\nThe field i updated was impapps in the Projects POJO class. I am not sure how to clear this error tried different things but did not work out.\r\n\r\n        SEVERE: Servlet.service() for servlet [appServlet] in context with path [/mongodproject] threw exception [Request processing failed; nested exception is org.springframework.data.mapping.model.MappingInstantiationException: Could not instantiate bean class [java.util.List]: Specified class is an interface] with root cause\r\n    org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [java.util.List]: Specified class is an interface\r\n    \tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:101)\r\n    \tat org.springframework.data.convert.ReflectionEntityInstantiator.createInstance(ReflectionEntityInstantiator.java:60)\r\n    \tat org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:232)\r\n    \tat org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:212)\r\n    \tat org.springframework.data.mongodb.core.convert.MappingMongoConverter.readValue(MappingMongoConverter.java:1008)\r\n    \tat org.springframework.data.mongodb.core.convert.MappingMongoConverter.access$100(MappingMongoConverter.java:75)\r\n    \tat org.springframework.data.mongodb.core.convert.MappingMongoConverter$MongoDbPropertyValueProvider.getPropertyValue(MappingMongoConverter.java:957)\r\n    \tat org.springframework.data.mongodb.core.convert.MappingMongoConverter.getValueInternal(MappingMongoConverter.java:713)\r\n\r\nHere are my POJO and Spring Repository class.\r\n\r\n**Project POJO Class**\r\n\r\n    @Document(collection=&quot;releases&quot;)\r\n     public class Project {\r\n\t@Id\r\n\tprivate String id;\r\n\t ......\r\n\t@Field(&quot;impapps&quot;)\r\n\tprivate List&lt;ImpactedApplications&gt; impapps=new ArrayList&lt;ImpactedApplications&gt;();\r\n        .....getters/setters\r\n    }\t\r\n\r\n**ImpactedApplication POJO Class:**\r\n\t\r\n    public class ImpactedApplications {\r\n\r\n\t@Field(&quot;appid&quot;)\r\n\tprivate String appId;\r\n\t.....\r\n\t@Field(&quot;repository&quot;)\r\n\tprivate List&lt;ScriptsRepo&gt; rep=new ArrayList&lt;ScriptsRepo&gt;();\r\n\t@Field(&quot;artifacts&quot;)\r\n\tprivate List&lt;Artifacts&gt; artifacts=new ArrayList&lt;Artifacts&gt;();\r\n         //getter and setters\r\n   }\r\n\r\n**Artifacts POJO Class**\r\n\r\n    public class Artifacts {\r\n    \r\n    \t@Field(&quot;artifacttype&quot;)\r\n    \tprivate String artifactType;\r\n    \t@Field(&quot;documentlink&quot;)\r\n    \tprivate String documentLink;\r\n    \t@Field(&quot;arttestphase&quot;)\r\n    \tprivate String artTestPhase;\r\n    \t@Field(&quot;artifactname&quot;)\r\n    \tprivate ArtifactsEnums artifactsNames;\r\n    \t@Field(&quot;startdate&quot;)\r\n    \tprivate String startDate;\r\n    \t@Field(&quot;enddate&quot;)\r\n    \tprivate String endDate;\r\n    \t@Field(&quot;peerrev&quot;)\r\n    \tprivate boolean peerReview;\r\n    \t@Field(&quot;busrev&quot;)\r\n    \tprivate boolean busReview;\r\n    \t@Field(&quot;na&quot;)\r\n    \tprivate boolean na;\r\n\r\n**Spring Repository classes**\r\n\r\n    public interface ProjectRepository extends Repository&lt;Project, String&gt; {\r\n\t\r\n\tProject findById(String id);\r\n\tList&lt;Project&gt; findByYearAndReleaseMonthNoOrderByProjectNameDesc(String year,String month, Sort sort);\r\n\tProject findByYearAndReleaseMonthNoAndId(String year, String month,String id);\r\n\r\n\r\n&gt; Whenever i call the above methods i keep getting the exception.\r\n\r\n\r\n**Below is how my document is looking currently.**\r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/ohNSH.png","title":"Spring Mongodb- Could not instantiate bean class [java.util.List]: Specified class is an interface","body":"<p>my project is using Spring data mongodb. I was not having below error until i made an edit to one of the document that has a field with Array of Documents in it. It was working fine before but now I keep getting the below error.</p>\n\n<p>The field i updated was impapps in the Projects POJO class. I am not sure how to clear this error tried different things but did not work out.</p>\n\n<pre><code>    SEVERE: Servlet.service() for servlet [appServlet] in context with path [/mongodproject] threw exception [Request processing failed; nested exception is org.springframework.data.mapping.model.MappingInstantiationException: Could not instantiate bean class [java.util.List]: Specified class is an interface] with root cause\norg.springframework.beans.BeanInstantiationException: Could not instantiate bean class [java.util.List]: Specified class is an interface\n    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:101)\n    at org.springframework.data.convert.ReflectionEntityInstantiator.createInstance(ReflectionEntityInstantiator.java:60)\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:232)\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:212)\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.readValue(MappingMongoConverter.java:1008)\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.access$100(MappingMongoConverter.java:75)\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter$MongoDbPropertyValueProvider.getPropertyValue(MappingMongoConverter.java:957)\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.getValueInternal(MappingMongoConverter.java:713)\n</code></pre>\n\n<p>Here are my POJO and Spring Repository class.</p>\n\n<p><strong>Project POJO Class</strong></p>\n\n<pre><code>@Document(collection=\"releases\")\n public class Project {\n@Id\nprivate String id;\n ......\n@Field(\"impapps\")\nprivate List&lt;ImpactedApplications&gt; impapps=new ArrayList&lt;ImpactedApplications&gt;();\n    .....getters/setters\n}   \n</code></pre>\n\n<p><strong>ImpactedApplication POJO Class:</strong></p>\n\n<pre><code>public class ImpactedApplications {\n\n@Field(\"appid\")\nprivate String appId;\n.....\n@Field(\"repository\")\nprivate List&lt;ScriptsRepo&gt; rep=new ArrayList&lt;ScriptsRepo&gt;();\n@Field(\"artifacts\")\nprivate List&lt;Artifacts&gt; artifacts=new ArrayList&lt;Artifacts&gt;();\n     //getter and setters\n</code></pre>\n\n<p>}</p>\n\n<p><strong>Artifacts POJO Class</strong></p>\n\n<pre><code>public class Artifacts {\n\n    @Field(\"artifacttype\")\n    private String artifactType;\n    @Field(\"documentlink\")\n    private String documentLink;\n    @Field(\"arttestphase\")\n    private String artTestPhase;\n    @Field(\"artifactname\")\n    private ArtifactsEnums artifactsNames;\n    @Field(\"startdate\")\n    private String startDate;\n    @Field(\"enddate\")\n    private String endDate;\n    @Field(\"peerrev\")\n    private boolean peerReview;\n    @Field(\"busrev\")\n    private boolean busReview;\n    @Field(\"na\")\n    private boolean na;\n</code></pre>\n\n<p><strong>Spring Repository classes</strong></p>\n\n<pre><code>public interface ProjectRepository extends Repository&lt;Project, String&gt; {\n\nProject findById(String id);\nList&lt;Project&gt; findByYearAndReleaseMonthNoOrderByProjectNameDesc(String year,String month, Sort sort);\nProject findByYearAndReleaseMonthNoAndId(String year, String month,String id);\n</code></pre>\n\n<blockquote>\n  <p>Whenever i call the above methods i keep getting the exception.</p>\n</blockquote>\n\n<p><strong>Below is how my document is looking currently.</strong></p>\n\n<p><img src=\"https://i.stack.imgur.com/ohNSH.png\" alt=\"enter image description here\"></p>\n"},{"tags":["java","spring","spring-boot","web-services","jax-ws"],"comments":[{"owner":{"account_id":419743,"reputation":2186,"user_id":797078,"accept_rate":52,"display_name":"amique"},"score":0,"creation_date":1407465502,"post_id":25177491,"comment_id":39235488,"body_markdown":"Using CXF as perfollowing https://github.com/vanioinformatika/spring-boot-cxf-integration-example solved the issue.","body":"Using CXF as perfollowing <a href=\"https://github.com/vanioinformatika/spring-boot-cxf-integration-example\" rel=\"nofollow noreferrer\">github.com/vanioinformatika/spring-boot-cxf-integration-exam&zwnj;&#8203;ple</a> solved the issue."}],"answers":[{"tags":[],"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1483784929,"creation_date":1407416588,"answer_id":25183285,"question_id":25177491,"body_markdown":"By default Spring doesn&#39;t know anything about your JAX-WS endpoints – they&#39;re managed by the JAX-WS runtime rather than Spring. You can overcome this by using [SpringBeanAutowiringSupport][1] You&#39;d typically do so simply by subclassing it:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public class MySoapService extends SpringBeanAutowiringSupport implements MyServicePortType {\r\n        …\r\n    }\r\n\r\nYou also have the option of calling it directly from a method annotated with `@PostConstruct`:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public class MySoapService implements MyServicePortType {\r\n        \r\n        @PostConstruct\r\n        public void init() {\r\n            SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/context/support/SpringBeanAutowiringSupport.html","title":"Spring Boot register JAX-WS webservice as bean","body":"<p>By default Spring doesn't know anything about your JAX-WS endpoints – they're managed by the JAX-WS runtime rather than Spring. You can overcome this by using <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/context/support/SpringBeanAutowiringSupport.html\" rel=\"nofollow noreferrer\">SpringBeanAutowiringSupport</a> You'd typically do so simply by subclassing it:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class MySoapService extends SpringBeanAutowiringSupport implements MyServicePortType {\n    …\n}\n</code></pre>\n\n<p>You also have the option of calling it directly from a method annotated with <code>@PostConstruct</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class MySoapService implements MyServicePortType {\n\n    @PostConstruct\n    public void init() {\n        SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":66337,"reputation":367,"user_id":194672,"display_name":"Parker Wang"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1483973899,"creation_date":1451179264,"answer_id":34476810,"question_id":25177491,"body_markdown":"Extending `SpringBeanAutowiringSupport` is the recommended way to get beans injected for JAX-WS endpoint class, from current spring root web application context. However this does not work with **spring boot** as it&#39;s a bit different on [servlet context initialization][1]. \r\n\r\n### Problem ###\r\n\r\n`SpringBootServletInitializer.startup()` uses a custom `ContextLoaderListener` and does not pass the created application context to `ContextLoader`. Later when the object of JAX-WS endpoint class being initialized, `SpringBeanAutowiringSupport` depends on `ContextLoader` to retrieve the current application context, and always get `null`.\r\n\r\n\r\n\tpublic abstract class SpringBootServletInitializer implements WebApplicationInitializer {\r\n\r\n\t\t@Override\r\n\t\tpublic void onStartup(ServletContext servletContext) throws ServletException {\r\n\t\t\tWebApplicationContext rootAppContext = createRootApplicationContext(\r\n\t\t\t\t\tservletContext);\r\n\t\t\tif (rootAppContext != null) {\r\n\t\t\t\tservletContext.addListener(new ContextLoaderListener(rootAppContext) {\r\n\t\t\t\t\t@Override\r\n\t\t\t\t\tpublic void contextInitialized(ServletContextEvent event) {\r\n\t\t\t\t\t\t// no-op because the application context is already initialized\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t    ......\r\n\t\t}\r\n    }\r\n\r\n### Workaround ###\r\n\r\nYou could register a bean that implements `org.springframework.boot.context.embedded.ServletContextInitializer` to retrieve the application context during `startup()`.\r\n\r\n    @Configuration\r\n    public class WebApplicationContextLocator implements ServletContextInitializer {\r\n\r\n        private static WebApplicationContext webApplicationContext;\r\n\r\n        public static WebApplicationContext getCurrentWebApplicationContext() {\r\n            return webApplicationContext;\r\n        }\r\n\r\n        @Override\r\n        public void onStartup(ServletContext servletContext) throws ServletException {\r\n            webApplicationContext = WebApplicationContextUtils.getWebApplicationContext(servletContext);\r\n        }\r\n    }\r\n\r\n\r\nThen you could implement self-autowiring in your JAX-WS endpoint class.\r\n\r\n\r\n    @WebService\r\n    public class ServiceImpl implements ServicePortType {\r\n\r\n        @Autowired\r\n        private FooBean bean;\r\n\r\n        public ServiceImpl() {\r\n            AutowiredAnnotationBeanPostProcessor bpp = new AutowiredAnnotationBeanPostProcessor();\r\n            WebApplicationContext currentContext = WebApplicationContextLocator.getCurrentWebApplicationContext();\r\n            bpp.setBeanFactory(currentContext.getAutowireCapableBeanFactory());\r\n            bpp.processInjection(this);\r\n        }\r\n\r\n        // alternative constructor to facilitate unit testing.\r\n        protected ServiceImpl(ApplicationContext context) {\r\n            AutowiredAnnotationBeanPostProcessor bpp = new AutowiredAnnotationBeanPostProcessor();\r\n            bpp.setBeanFactory(new DefaultListableBeanFactory(context));\r\n            bpp.processInjection(this);\r\n        }\r\n    }\r\n\r\n### Unit Testing ###\r\n\r\nIn unit tests you could get current spring application context injected, and call alternative constructor with it.\r\n\r\n    @Autowired \r\n    private ApplicationContext context;\r\n\r\n    private ServicePortType service;\r\n\r\n    @Before\r\n    public void setup() {\r\n        this.service = new ServiceImpl(this.context);\r\n    }\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-embedded-container-context-initializer","title":"Spring Boot register JAX-WS webservice as bean","body":"<p>Extending <code>SpringBeanAutowiringSupport</code> is the recommended way to get beans injected for JAX-WS endpoint class, from current spring root web application context. However this does not work with <strong>spring boot</strong> as it's a bit different on <a href=\"http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-embedded-container-context-initializer\" rel=\"noreferrer\">servlet context initialization</a>. </p>\n\n<h3>Problem</h3>\n\n<p><code>SpringBootServletInitializer.startup()</code> uses a custom <code>ContextLoaderListener</code> and does not pass the created application context to <code>ContextLoader</code>. Later when the object of JAX-WS endpoint class being initialized, <code>SpringBeanAutowiringSupport</code> depends on <code>ContextLoader</code> to retrieve the current application context, and always get <code>null</code>.</p>\n\n<pre><code>public abstract class SpringBootServletInitializer implements WebApplicationInitializer {\n\n    @Override\n    public void onStartup(ServletContext servletContext) throws ServletException {\n        WebApplicationContext rootAppContext = createRootApplicationContext(\n                servletContext);\n        if (rootAppContext != null) {\n            servletContext.addListener(new ContextLoaderListener(rootAppContext) {\n                @Override\n                public void contextInitialized(ServletContextEvent event) {\n                    // no-op because the application context is already initialized\n                }\n            });\n        }\n        ......\n    }\n}\n</code></pre>\n\n<h3>Workaround</h3>\n\n<p>You could register a bean that implements <code>org.springframework.boot.context.embedded.ServletContextInitializer</code> to retrieve the application context during <code>startup()</code>.</p>\n\n<pre><code>@Configuration\npublic class WebApplicationContextLocator implements ServletContextInitializer {\n\n    private static WebApplicationContext webApplicationContext;\n\n    public static WebApplicationContext getCurrentWebApplicationContext() {\n        return webApplicationContext;\n    }\n\n    @Override\n    public void onStartup(ServletContext servletContext) throws ServletException {\n        webApplicationContext = WebApplicationContextUtils.getWebApplicationContext(servletContext);\n    }\n}\n</code></pre>\n\n<p>Then you could implement self-autowiring in your JAX-WS endpoint class.</p>\n\n<pre><code>@WebService\npublic class ServiceImpl implements ServicePortType {\n\n    @Autowired\n    private FooBean bean;\n\n    public ServiceImpl() {\n        AutowiredAnnotationBeanPostProcessor bpp = new AutowiredAnnotationBeanPostProcessor();\n        WebApplicationContext currentContext = WebApplicationContextLocator.getCurrentWebApplicationContext();\n        bpp.setBeanFactory(currentContext.getAutowireCapableBeanFactory());\n        bpp.processInjection(this);\n    }\n\n    // alternative constructor to facilitate unit testing.\n    protected ServiceImpl(ApplicationContext context) {\n        AutowiredAnnotationBeanPostProcessor bpp = new AutowiredAnnotationBeanPostProcessor();\n        bpp.setBeanFactory(new DefaultListableBeanFactory(context));\n        bpp.processInjection(this);\n    }\n}\n</code></pre>\n\n<h3>Unit Testing</h3>\n\n<p>In unit tests you could get current spring application context injected, and call alternative constructor with it.</p>\n\n<pre><code>@Autowired \nprivate ApplicationContext context;\n\nprivate ServicePortType service;\n\n@Before\npublic void setup() {\n    this.service = new ServiceImpl(this.context);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6402290,"reputation":12668,"user_id":4964553,"display_name":"jonashackt"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1458580549,"creation_date":1458580549,"answer_id":36137611,"question_id":25177491,"body_markdown":"You don&#180;t have to extend your Configuration from SpringBootServletInitializer, nor override configure() or onStartup() methods. And in no way you have to build something implementing WebApplicationInitializer. There are only few steps to do (you could also do all the steps in a seperate @Configuration-class, the class with @SpringBootApplication only needs to know, where this one is - e.g. via @ComponentScan).\r\n\r\n 1. Register the CXFServlet in an ServletRegistrationBean\r\n 2. Instantiate a SpringBus\r\n 3. Instantiate your Implementation of the JAX-WS SEI (Service Interface)\r\n 4. Instantiate a EndpointImpl with the SpringBus and SEI implementing Beans\r\n 5. Call publish() method on that EndpointImpl\r\n\r\nDone. \r\n\r\n\r\n\r\n\t@SpringBootApplication\r\n\tpublic class SimpleBootCxfApplication {\r\n\r\n\t    public static void main(String[] args) {\r\n\t        SpringApplication.run(SimpleBootCxfApplication.class, args);\r\n\t    }\r\n\r\n\t    @Bean\r\n\t    public ServletRegistrationBean dispatcherServlet() {\r\n\t        return new ServletRegistrationBean(new CXFServlet(), &quot;/soap-api/*&quot;);\r\n\t    }\r\n\r\n\t    @Bean(name = Bus.DEFAULT_BUS_ID)\r\n\t    public SpringBus springBus() {\r\n\t        return new SpringBus();\r\n\t    }    \r\n\t    \r\n\t    @Bean\r\n\t    public WeatherService weatherService() {\r\n\t    \treturn new WeatherServiceEndpoint();\r\n\t    }\r\n\t    \r\n\t    @Bean\r\n\t    public Endpoint endpoint() {\r\n\t        EndpointImpl endpoint = new EndpointImpl(springBus(), weatherService());\r\n\t        endpoint.publish(&quot;/WeatherSoapService&quot;);\r\n\t        return endpoint;\r\n\t    }\r\n\t}","title":"Spring Boot register JAX-WS webservice as bean","body":"<p>You don´t have to extend your Configuration from SpringBootServletInitializer, nor override configure() or onStartup() methods. And in no way you have to build something implementing WebApplicationInitializer. There are only few steps to do (you could also do all the steps in a seperate @Configuration-class, the class with @SpringBootApplication only needs to know, where this one is - e.g. via @ComponentScan).</p>\n\n<ol>\n<li>Register the CXFServlet in an ServletRegistrationBean</li>\n<li>Instantiate a SpringBus</li>\n<li>Instantiate your Implementation of the JAX-WS SEI (Service Interface)</li>\n<li>Instantiate a EndpointImpl with the SpringBus and SEI implementing Beans</li>\n<li>Call publish() method on that EndpointImpl</li>\n</ol>\n\n<p>Done. </p>\n\n<pre><code>@SpringBootApplication\npublic class SimpleBootCxfApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(SimpleBootCxfApplication.class, args);\n    }\n\n    @Bean\n    public ServletRegistrationBean dispatcherServlet() {\n        return new ServletRegistrationBean(new CXFServlet(), \"/soap-api/*\");\n    }\n\n    @Bean(name = Bus.DEFAULT_BUS_ID)\n    public SpringBus springBus() {\n        return new SpringBus();\n    }    \n\n    @Bean\n    public WeatherService weatherService() {\n        return new WeatherServiceEndpoint();\n    }\n\n    @Bean\n    public Endpoint endpoint() {\n        EndpointImpl endpoint = new EndpointImpl(springBus(), weatherService());\n        endpoint.publish(\"/WeatherSoapService\");\n        return endpoint;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7291708,"reputation":3515,"user_id":5557885,"accept_rate":54,"display_name":"rajadilipkolli"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1486579661,"creation_date":1486578968,"answer_id":42121042,"question_id":25177491,"body_markdown":"Taking clue from @Andy Wilkinson using [SpringBeanAutoWiringSupport][1] is achieved by using\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public class MySoapService extends SpringBeanAutowiringSupport implements MyServicePortType {\r\n        …\r\n    }\r\n\r\nYou also have the option of calling it directly from a method annotated with `@PostConstruct`:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Service\r\n    public class MySoapService implements MyServicePortType {\r\n\r\n        @Autowired\r\n        ServletContext servletContext;\r\n\r\n        @PostConstruct\r\n        public void init() {\r\n            SpringBeanAutowiringSupport.processInjectionBasedOnServletContext(this,\r\n                servletContext);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/context/support/SpringBeanAutowiringSupport.html","title":"Spring Boot register JAX-WS webservice as bean","body":"<p>Taking clue from @Andy Wilkinson using <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/context/support/SpringBeanAutowiringSupport.html\" rel=\"nofollow noreferrer\">SpringBeanAutoWiringSupport</a> is achieved by using</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class MySoapService extends SpringBeanAutowiringSupport implements MyServicePortType {\n    …\n}\n</code></pre>\n\n<p>You also have the option of calling it directly from a method annotated with <code>@PostConstruct</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class MySoapService implements MyServicePortType {\n\n    @Autowired\n    ServletContext servletContext;\n\n    @PostConstruct\n    public void init() {\n        SpringBeanAutowiringSupport.processInjectionBasedOnServletContext(this,\n            servletContext);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":951457,"reputation":605,"user_id":977528,"accept_rate":0,"display_name":"Andrew Niken"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659615264,"creation_date":1659615264,"answer_id":73235775,"question_id":25177491,"body_markdown":"Try to look this way: @ServletComponentScan\r\n\r\n    @SpringBootApplication\r\n    @EnableTransactionManagement\r\n    @ServletComponentScan\r\n    public class TelecomApplication { .... }","title":"Spring Boot register JAX-WS webservice as bean","body":"<p>Try to look this way: @ServletComponentScan</p>\n<pre><code>@SpringBootApplication\n@EnableTransactionManagement\n@ServletComponentScan\npublic class TelecomApplication { .... }\n</code></pre>\n"}],"owner":{"account_id":419743,"reputation":2186,"user_id":797078,"accept_rate":52,"display_name":"amique"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18819,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":34476810,"answer_count":5,"score":6,"last_activity_date":1659615264,"creation_date":1407399611,"question_id":25177491,"body_markdown":"In my spring boot ws based application I have created a jax-ws webservice following a contract first approach. The Web service is up but I cannot autowire my other beans inside my webservice.\r\n\r\nHow can I define, my webservice in spring as bean? \r\n\r\nFollowing is my webservice impl class:\r\n```java\r\n@WebService(endpointInterface = &quot;com.foo.bar.MyServicePortType&quot;)\r\n@Service\r\npublic class MySoapService implements MyServicePortType {\r\n    @Autowired\r\n    private MyBean obj;\r\n\r\n    public Res method(final Req request) {\r\n        System.out.println(&quot;\\n\\n\\nCALLING.......\\n\\n&quot; + obj.toString()); //obj is null here\r\n        return new Res();\r\n    }\r\n}\r\n```\r\nMyServicePortType is geneated by maven from wsdl file \r\n\r\nWhen I call this service (via SoapUi) it gives `NullPointerException` as the MyBean object is not autowired.\r\n\r\nSince my application is built on Spring boot, there is no xml file. Currently I have `sun-jaxws.xml` file with endpoint configuration. How can I do following configuration in spring boot application\r\n```xml\r\n&lt;wss:binding url=&quot;/hello&quot;&gt;\r\n    &lt;wss:service&gt;\r\n        &lt;ws:service bean=&quot;#helloWs&quot;/&gt;\r\n    &lt;/wss:service&gt;\r\n&lt;/wss:binding&gt;\r\n```\r\n\r\nFollowing is my `SpringBootServletInitializer` class:\r\n```java\r\n@Configuration\r\npublic class WebXml extends SpringBootServletInitializer {\r\n    @Override\r\n    protected SpringApplicationBuilder configure(final SpringApplicationBuilder application) {\r\n        return application.sources(WSApplication.class);\r\n    }\r\n\r\n    @Bean\r\n    public ServletRegistrationBean jaxws() {\r\n        final ServletRegistrationBean jaxws = new ServletRegistrationBean(new WSServlet(), &quot;/jaxws&quot;);\r\n        return jaxws;\r\n    }\r\n\r\n    @Override\r\n    public void onStartup(final ServletContext servletContext) throws ServletException {\r\n        super.onStartup(servletContext);\r\n        servletContext.addListener(new WSServletContextListener());\r\n    }\r\n}\r\n```\r\n","title":"Spring Boot register JAX-WS webservice as bean","body":"<p>In my spring boot ws based application I have created a jax-ws webservice following a contract first approach. The Web service is up but I cannot autowire my other beans inside my webservice.</p>\n<p>How can I define, my webservice in spring as bean?</p>\n<p>Following is my webservice impl class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@WebService(endpointInterface = &quot;com.foo.bar.MyServicePortType&quot;)\n@Service\npublic class MySoapService implements MyServicePortType {\n    @Autowired\n    private MyBean obj;\n\n    public Res method(final Req request) {\n        System.out.println(&quot;\\n\\n\\nCALLING.......\\n\\n&quot; + obj.toString()); //obj is null here\n        return new Res();\n    }\n}\n</code></pre>\n<p>MyServicePortType is geneated by maven from wsdl file</p>\n<p>When I call this service (via SoapUi) it gives <code>NullPointerException</code> as the MyBean object is not autowired.</p>\n<p>Since my application is built on Spring boot, there is no xml file. Currently I have <code>sun-jaxws.xml</code> file with endpoint configuration. How can I do following configuration in spring boot application</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;wss:binding url=&quot;/hello&quot;&gt;\n    &lt;wss:service&gt;\n        &lt;ws:service bean=&quot;#helloWs&quot;/&gt;\n    &lt;/wss:service&gt;\n&lt;/wss:binding&gt;\n</code></pre>\n<p>Following is my <code>SpringBootServletInitializer</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class WebXml extends SpringBootServletInitializer {\n    @Override\n    protected SpringApplicationBuilder configure(final SpringApplicationBuilder application) {\n        return application.sources(WSApplication.class);\n    }\n\n    @Bean\n    public ServletRegistrationBean jaxws() {\n        final ServletRegistrationBean jaxws = new ServletRegistrationBean(new WSServlet(), &quot;/jaxws&quot;);\n        return jaxws;\n    }\n\n    @Override\n    public void onStartup(final ServletContext servletContext) throws ServletException {\n        super.onStartup(servletContext);\n        servletContext.addListener(new WSServletContextListener());\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","hibernate","maven","websphere-liberty"],"comments":[{"owner":{"account_id":4558101,"reputation":17722,"user_id":3701228,"display_name":"Gas"},"score":0,"creation_date":1647437674,"post_id":71495648,"comment_id":126370681,"body_markdown":"What features you have in `server.xml`? You probably have `jpa-2.0` and if you want to use hibernate provider 2.1, you need to change Liberty feature to `jpaContainer-2.1`","body":"What features you have in <code>server.xml</code>? You probably have <code>jpa-2.0</code> and if you want to use hibernate provider 2.1, you need to change Liberty feature to <code>jpaContainer-2.1</code>"}],"answers":[{"tags":[],"owner":{"account_id":24576068,"reputation":81,"user_id":18481860,"display_name":"Vinay"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1659615019,"creation_date":1659615019,"answer_id":73235729,"question_id":71495648,"body_markdown":"Method JoinColumn.foreignKey() was added in JPA2.2 library onwards, So below JPA2.2 version it&#39;s not available. \r\n\r\nIssue resolved, After removing support of above method and dependencies version updated as mention below as hibernate version 4.2.15 is compatible with JPA 2.1\r\n                \r\n\t         &lt;dependency&gt;\r\n\t            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n\t            &lt;version&gt;4.2.15.Final&lt;/version&gt;\r\n\t         &lt;/dependency&gt;\r\n \t         &lt;dependency&gt;\r\n\t            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n\t            &lt;version&gt;4.2.15.Final&lt;/version&gt;\r\n\t         &lt;/dependency&gt;\r\n\t         &lt;dependency&gt;\r\n\t            &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\r\n\t            &lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\r\n\t            &lt;version&gt;1.0.0.Final&lt;/version&gt;\r\n\t         &lt;/dependency&gt;\r\n\t         &lt;dependency&gt;\r\n\t            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n\t            &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\r\n\t            &lt;version&gt;1.2.0.RELEASE&lt;/version&gt;\r\n\t          &lt;/dependency&gt;","title":"How to override pom.xml dependency over liberty dependency mentioned in server.xml at deployment time?","body":"<p>Method JoinColumn.foreignKey() was added in JPA2.2 library onwards, So below JPA2.2 version it's not available.</p>\n<p>Issue resolved, After removing support of above method and dependencies version updated as mention below as hibernate version 4.2.15 is compatible with JPA 2.1</p>\n<pre><code>         &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n            &lt;version&gt;4.2.15.Final&lt;/version&gt;\n         &lt;/dependency&gt;\n         &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;4.2.15.Final&lt;/version&gt;\n         &lt;/dependency&gt;\n         &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0.Final&lt;/version&gt;\n         &lt;/dependency&gt;\n         &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\n            &lt;version&gt;1.2.0.RELEASE&lt;/version&gt;\n          &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":24576068,"reputation":81,"user_id":18481860,"display_name":"Vinay"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":183,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73235729,"answer_count":1,"score":0,"last_activity_date":1659615019,"creation_date":1647427370,"question_id":71495648,"body_markdown":"I am facing issue related to old version of dependency jpa2.0 mentioned in liberty server.xml file.\r\n\r\nI want to use project&#39;s pom.xml hibernate-jpa-2.1-api dependency without removing liberty&#39;s jpa 2.0 (com.ibm.websphere.javaee.persistence.2.0_1.0.53.jar) dependency.\r\n\r\nError while deploying in liberty SIT environment:\r\n\r\n```none\r\nCaused by: java.lang.NoSuchMethodError: javax/persistence/JoinColumn.foreignKey()Ljavax/persistence/ForeignKey; (loaded from file:/apps/waslb/sit/shared/websupporta/wlp/lib/../dev/api/spec/com.ibm.websphere.javaee.persistence.2.0_1.0.53.jar by org.eclipse.osgi.internal.loader.EquinoxClassLoader@69b35caa[com.ibm.websphere.javaee.persistence.2.0:1.0.53.cl210620210527-1900(id=117)]) called from class org.hibernate.cfg.AnnotationBinder (loaded from file:/apps/waslb/sit/shared/websupporta/wlp/usr/servers/websupporta11/apps/expanded/web-apps-esignservices-war.war/WEB-INF/lib/hibernate-core-4.3.11.Final.jar by com.ibm.ws.classloading.internal.AppClassLoader@40ad1256).\r\n```\r\n\r\nBelow is the pom.xml file dependencies:\r\n```xml\r\n &lt;dependency&gt;\r\n    &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\r\n    &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\r\n    &lt;version&gt;6.2.2.jre8&lt;/version&gt;\r\n &lt;/dependency&gt;\r\n &lt;dependency&gt;\r\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n    &lt;version&gt;4.3.11.Final&lt;/version&gt;\r\n &lt;/dependency&gt;\r\n &lt;dependency&gt;\r\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n    &lt;version&gt;4.3.11.Final&lt;/version&gt;\r\n &lt;/dependency&gt;\r\n &lt;dependency&gt;\r\n    &lt;groupId&gt;org.hibernate.common&lt;/groupId&gt;\r\n    &lt;artifactId&gt;hibernate-commons-annotations&lt;/artifactId&gt;\r\n    &lt;version&gt;4.0.5.Final&lt;/version&gt;\r\n &lt;/dependency&gt;\r\n &lt;dependency&gt;\r\n    &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\r\n    &lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0.0.Final&lt;/version&gt;\r\n &lt;/dependency&gt;\r\n &lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\r\n    &lt;version&gt;1.2.0.RELEASE&lt;/version&gt;\r\n    &lt;exclusions&gt;\r\n        &lt;exclusion&gt;\r\n                &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\r\n                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n        &lt;/exclusion&gt;\r\n        &lt;exclusion&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-asm&lt;/artifactId&gt;\r\n        &lt;/exclusion&gt;\r\n \t&lt;/exclusions&gt;\r\n &lt;/dependency&gt;\r\n```","title":"How to override pom.xml dependency over liberty dependency mentioned in server.xml at deployment time?","body":"<p>I am facing issue related to old version of dependency jpa2.0 mentioned in liberty server.xml file.</p>\n<p>I want to use project's pom.xml hibernate-jpa-2.1-api dependency without removing liberty's jpa 2.0 (com.ibm.websphere.javaee.persistence.2.0_1.0.53.jar) dependency.</p>\n<p>Error while deploying in liberty SIT environment:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Caused by: java.lang.NoSuchMethodError: javax/persistence/JoinColumn.foreignKey()Ljavax/persistence/ForeignKey; (loaded from file:/apps/waslb/sit/shared/websupporta/wlp/lib/../dev/api/spec/com.ibm.websphere.javaee.persistence.2.0_1.0.53.jar by org.eclipse.osgi.internal.loader.EquinoxClassLoader@69b35caa[com.ibm.websphere.javaee.persistence.2.0:1.0.53.cl210620210527-1900(id=117)]) called from class org.hibernate.cfg.AnnotationBinder (loaded from file:/apps/waslb/sit/shared/websupporta/wlp/usr/servers/websupporta11/apps/expanded/web-apps-esignservices-war.war/WEB-INF/lib/hibernate-core-4.3.11.Final.jar by com.ibm.ws.classloading.internal.AppClassLoader@40ad1256).\n</code></pre>\n<p>Below is the pom.xml file dependencies:</p>\n<pre class=\"lang-xml prettyprint-override\"><code> &lt;dependency&gt;\n    &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\n    &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\n    &lt;version&gt;6.2.2.jre8&lt;/version&gt;\n &lt;/dependency&gt;\n &lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n    &lt;version&gt;4.3.11.Final&lt;/version&gt;\n &lt;/dependency&gt;\n &lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n    &lt;version&gt;4.3.11.Final&lt;/version&gt;\n &lt;/dependency&gt;\n &lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate.common&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-commons-annotations&lt;/artifactId&gt;\n    &lt;version&gt;4.0.5.Final&lt;/version&gt;\n &lt;/dependency&gt;\n &lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0.Final&lt;/version&gt;\n &lt;/dependency&gt;\n &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\n    &lt;version&gt;1.2.0.RELEASE&lt;/version&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n                &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\n                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;/exclusion&gt;\n        &lt;exclusion&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-asm&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","algorithm","collections"],"comments":[{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1659609071,"post_id":73233774,"comment_id":129337357,"body_markdown":"Can you explain which subsists do you want to preserve (it&#39;s not very clear from your data-sample)? Why list `[A]` should be discarded?","body":"Can you explain which subsists do you want to preserve (it&#39;s not very clear from your data-sample)? Why list <code>[A]</code> should be discarded?"},{"owner":{"account_id":6271524,"reputation":1112,"user_id":4875624,"accept_rate":86,"display_name":"Koustav Ray"},"score":0,"creation_date":1659609660,"post_id":73233774,"comment_id":129337563,"body_markdown":"@AlexanderIvanchenko because A is a subset of all the other sets, i.e. it&#39;s a proper subset (i.e. this list is wholly contained within another list in some other list), same reason why we discard [A,C] as it&#39;s a proper subset of set [A,B,C]","body":"@AlexanderIvanchenko because A is a subset of all the other sets, i.e. it&#39;s a proper subset (i.e. this list is wholly contained within another list in some other list), same reason why we discard [A,C] as it&#39;s a proper subset of set [A,B,C]"}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659614391,"creation_date":1659614391,"answer_id":73235594,"question_id":73233774,"body_markdown":"You&#39;re not checking each combination against the whole data set. Your mistake is rooted in the nested loop, where iteration starts from the index `j=i+1`.\r\n\r\nSince performance of the `containsAll()` depends on the collection that is passed as an argument, it makes sense to generate a *List* of *Sets* out of the given list of list.\r\n\r\nHere&#39;s how it can be implemented using Stream API.\r\n\r\n```\r\nList&lt;List&lt;String&gt;&gt; source = List.of(\r\n    List.of(&quot;A&quot;, &quot;B&quot;), List.of(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;),\r\n    List.of(&quot;A&quot;, &quot;C&quot;), List.of(&quot;A&quot;, &quot;D&quot;), List.of(&quot;A&quot;)\r\n);\r\n        \r\nList&lt;Set&lt;String&gt;&gt; sets = source.stream()\r\n    .map(HashSet::new)\r\n    .collect(Collectors.toList());\r\n    \r\nList&lt;List&lt;String&gt;&gt; result = sets.stream()\r\n    .filter(set -&gt; sets.stream().filter(s -&gt; !s.equals(set)).noneMatch(s -&gt; s.containsAll(set)))\r\n    .map(ArrayList::new)\r\n    .collect(Collectors.toList());\r\n    \r\nSystem.out.println(result);\r\n```\r\n*Output:*\r\n```\r\n[[A, B, C], [A, D]]\r\n```\r\n\r\n***Note*** that we need to exclude the current combination of strings while checking whether it is a subset of any of the other elements or not, see `filter(s -&gt; !s.equals(set))` in the code above.","title":"Find (Reduce) proper subsets of lists from list of lists in java","body":"<p>You're not checking each combination against the whole data set. Your mistake is rooted in the nested loop, where iteration starts from the index <code>j=i+1</code>.</p>\n<p>Since performance of the <code>containsAll()</code> depends on the collection that is passed as an argument, it makes sense to generate a <em>List</em> of <em>Sets</em> out of the given list of list.</p>\n<p>Here's how it can be implemented using Stream API.</p>\n<pre><code>List&lt;List&lt;String&gt;&gt; source = List.of(\n    List.of(&quot;A&quot;, &quot;B&quot;), List.of(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;),\n    List.of(&quot;A&quot;, &quot;C&quot;), List.of(&quot;A&quot;, &quot;D&quot;), List.of(&quot;A&quot;)\n);\n        \nList&lt;Set&lt;String&gt;&gt; sets = source.stream()\n    .map(HashSet::new)\n    .collect(Collectors.toList());\n    \nList&lt;List&lt;String&gt;&gt; result = sets.stream()\n    .filter(set -&gt; sets.stream().filter(s -&gt; !s.equals(set)).noneMatch(s -&gt; s.containsAll(set)))\n    .map(ArrayList::new)\n    .collect(Collectors.toList());\n    \nSystem.out.println(result);\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>[[A, B, C], [A, D]]\n</code></pre>\n<p><em><strong>Note</strong></em> that we need to exclude the current combination of strings while checking whether it is a subset of any of the other elements or not, see <code>filter(s -&gt; !s.equals(set))</code> in the code above.</p>\n"}],"owner":{"account_id":6271524,"reputation":1112,"user_id":4875624,"accept_rate":86,"display_name":"Koustav Ray"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73235594,"answer_count":1,"score":0,"last_activity_date":1659614391,"creation_date":1659606557,"question_id":73233774,"body_markdown":"I want to get something like this below:\r\n```\r\n//Input:\r\n{\r\n    &quot;paths&quot;: [\r\n        [\r\n            &quot;A&quot;,&quot;B&quot;\r\n        ],\r\n        [\r\n            &quot;A&quot;,&quot;B&quot;,&quot;C&quot;\r\n        ],\r\n        [\r\n            &quot;A&quot;,&quot;C&quot;\r\n        ],\r\n        [\r\n            &quot;A&quot;,&quot;D&quot;\r\n        ],\r\n        [\r\n            &quot;A&quot;\r\n        ]\r\n    ]\r\n}\r\n\r\n//Output:\r\n{\r\n    &quot;paths&quot;: [\r\n        \r\n        [\r\n            &quot;A&quot;,&quot;B&quot;,&quot;C&quot;\r\n        ],\r\n        [\r\n            &quot;A&quot;,&quot;D&quot;\r\n        ]\r\n       \r\n    ]\r\n}\r\n\r\n```\r\n\r\nWhat my code looks like:\r\n```\r\nList&lt;LinkedList&lt;String&gt;&gt; paths = new LinkedList&lt;&gt;();\r\n//...\r\n//some process that adds elements to paths.\r\n\r\npaths.sort(Comparator.comparingInt(LinkedList::size));\r\n\r\nList&lt;LinkedList&lt;String&gt;&gt; uniquePaths = new ArrayList&lt;&gt;();\r\n\r\n                for (int i = 0; i &lt; paths.size(); i++) {\r\n                    boolean unique=true;\r\n                    for (int j = i+1 ; j &lt; paths.size(); j++) {\r\n\r\n                        if (paths.get(j).containsAll(paths.get(i))){\r\n                            unique=false;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if(unique) {\r\n                        uniquePaths.add(paths.get(i));\r\n                    }\r\n                }\r\n\r\n```\r\nBut this logic seems a bit off.(This is resulting in something like: `[[A][A,D][A,B,C]]`) Please help with some better way of solving this. \r\n\r\nSimilar Question but in R:\r\nhttps://stackoverflow.com/questions/64465598/how-to-reduce-subset-list-of-lists","title":"Find (Reduce) proper subsets of lists from list of lists in java","body":"<p>I want to get something like this below:</p>\n<pre><code>//Input:\n{\n    &quot;paths&quot;: [\n        [\n            &quot;A&quot;,&quot;B&quot;\n        ],\n        [\n            &quot;A&quot;,&quot;B&quot;,&quot;C&quot;\n        ],\n        [\n            &quot;A&quot;,&quot;C&quot;\n        ],\n        [\n            &quot;A&quot;,&quot;D&quot;\n        ],\n        [\n            &quot;A&quot;\n        ]\n    ]\n}\n\n//Output:\n{\n    &quot;paths&quot;: [\n        \n        [\n            &quot;A&quot;,&quot;B&quot;,&quot;C&quot;\n        ],\n        [\n            &quot;A&quot;,&quot;D&quot;\n        ]\n       \n    ]\n}\n\n</code></pre>\n<p>What my code looks like:</p>\n<pre><code>List&lt;LinkedList&lt;String&gt;&gt; paths = new LinkedList&lt;&gt;();\n//...\n//some process that adds elements to paths.\n\npaths.sort(Comparator.comparingInt(LinkedList::size));\n\nList&lt;LinkedList&lt;String&gt;&gt; uniquePaths = new ArrayList&lt;&gt;();\n\n                for (int i = 0; i &lt; paths.size(); i++) {\n                    boolean unique=true;\n                    for (int j = i+1 ; j &lt; paths.size(); j++) {\n\n                        if (paths.get(j).containsAll(paths.get(i))){\n                            unique=false;\n                            break;\n                        }\n                    }\n                    if(unique) {\n                        uniquePaths.add(paths.get(i));\n                    }\n                }\n\n</code></pre>\n<p>But this logic seems a bit off.(This is resulting in something like: <code>[[A][A,D][A,B,C]]</code>) Please help with some better way of solving this.</p>\n<p>Similar Question but in R:\n<a href=\"https://stackoverflow.com/questions/64465598/how-to-reduce-subset-list-of-lists\">How to reduce (subset) list of lists?</a></p>\n"},{"tags":["javascript","java","spring-boot","websocket","stomp"],"comments":[{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1618792318,"post_id":67153974,"comment_id":118702354,"body_markdown":"_&quot;The message port closed before a response was received&quot;_ - Sounds like the server threw an exception and closed the connection. Look at the server error logs for more information.","body":"<i>&quot;The message port closed before a response was received&quot;</i> - Sounds like the server threw an exception and closed the connection. Look at the server error logs for more information."}],"owner":{"account_id":19988915,"reputation":77,"user_id":14650416,"display_name":"mistertl"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1192,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1659613911,"creation_date":1618784700,"question_id":67153974,"body_markdown":"I try to build a chat application with HTML,JS,CSS with the libraries STOMPJS and SOCKJS as the frontend and Spring Boot as backend. \r\n\r\nMy connect code in the frontend looks like this: \r\n\r\n     function connect() {\r\n            var socket = new SockJS(&quot;http://localhost:8080/chat&quot;);\r\n            stompClient = Stomp.over(socket);\r\n    \r\n            stompClient.connect(\r\n              {},\r\n              function (frame) {\r\n                console.log(&quot;2&quot;);\r\n    \r\n                setConnected(true);\r\n                console.log(&quot;Connected: &quot; + frame);\r\n                stompClient.subscribe(&quot;/topic/messages&quot;, function (messageOutput) {\r\n                  showMessageOutput(JSON.parse(messageOutput.body));\r\n                });\r\n              },\r\n              console.log(&quot;error&quot;)\r\n            );\r\n          }\r\n\r\nAs far as I know is the connect function of STOMPJS like this: headers, connectCallback, errorCallback.\r\n\r\nIt never reach the console.log &quot;2&quot; and it gives me the console.log &quot;error&quot; back. \r\n\r\nI activated CORS like this in my backend with setAllowedOriginPatterns(&quot;*&quot;) in my Spring Boot application:\r\n\r\n     @Configuration\r\n    @EnableWebSocketMessageBroker\r\n    public class WebSocketConfig extends AbstractWebSocketMessageBrokerConfigurer {\r\n    \r\n        @Override\r\n        public void configureMessageBroker(MessageBrokerRegistry config) {\r\n            config.enableSimpleBroker(&quot;/topic&quot;);\r\n            config.setApplicationDestinationPrefixes(&quot;/app&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public void registerStompEndpoints(StompEndpointRegistry registry) {\r\n             registry.addEndpoint(&quot;/chat&quot;);\r\n             registry.addEndpoint(&quot;/chat&quot;).setAllowedOriginPatterns(&quot;*&quot;).withSockJS();\r\n        }\r\n    }\r\n\r\nAnd the controller looks like this: \r\n\r\n    @Controller\r\n    public class MController {\r\n    \t@MessageMapping(&quot;/chat&quot;)\r\n    \t@SendTo(&quot;/topic/messages&quot;)\r\n    \tpublic OutputMessage send(Message message) throws Exception {\r\n    \t    String time = new SimpleDateFormat(&quot;HH:mm&quot;).format(new Date());\r\n    \t    return new OutputMessage(message.getFrom(), message.getText(), time);\r\n    \t}\r\n    }\r\n\r\nIn the screenshot you can see the console.log when I execute the function &quot;connect&quot;:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pLi2l.png\r\n\r\nI checked all the documentation of SockJS and StompJS but I couldn&#39;t find a solution.\r\n\r\nThank you very much for your answer in advance. :)","title":"Spring Boot Websocket with SockJS and StompJS connect function does not work, always error","body":"<p>I try to build a chat application with HTML,JS,CSS with the libraries STOMPJS and SOCKJS as the frontend and Spring Boot as backend.</p>\n<p>My connect code in the frontend looks like this:</p>\n<pre><code> function connect() {\n        var socket = new SockJS(&quot;http://localhost:8080/chat&quot;);\n        stompClient = Stomp.over(socket);\n\n        stompClient.connect(\n          {},\n          function (frame) {\n            console.log(&quot;2&quot;);\n\n            setConnected(true);\n            console.log(&quot;Connected: &quot; + frame);\n            stompClient.subscribe(&quot;/topic/messages&quot;, function (messageOutput) {\n              showMessageOutput(JSON.parse(messageOutput.body));\n            });\n          },\n          console.log(&quot;error&quot;)\n        );\n      }\n</code></pre>\n<p>As far as I know is the connect function of STOMPJS like this: headers, connectCallback, errorCallback.</p>\n<p>It never reach the console.log &quot;2&quot; and it gives me the console.log &quot;error&quot; back.</p>\n<p>I activated CORS like this in my backend with setAllowedOriginPatterns(&quot;*&quot;) in my Spring Boot application:</p>\n<pre><code> @Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig extends AbstractWebSocketMessageBrokerConfigurer {\n\n    @Override\n    public void configureMessageBroker(MessageBrokerRegistry config) {\n        config.enableSimpleBroker(&quot;/topic&quot;);\n        config.setApplicationDestinationPrefixes(&quot;/app&quot;);\n    }\n\n    @Override\n    public void registerStompEndpoints(StompEndpointRegistry registry) {\n         registry.addEndpoint(&quot;/chat&quot;);\n         registry.addEndpoint(&quot;/chat&quot;).setAllowedOriginPatterns(&quot;*&quot;).withSockJS();\n    }\n}\n</code></pre>\n<p>And the controller looks like this:</p>\n<pre><code>@Controller\npublic class MController {\n    @MessageMapping(&quot;/chat&quot;)\n    @SendTo(&quot;/topic/messages&quot;)\n    public OutputMessage send(Message message) throws Exception {\n        String time = new SimpleDateFormat(&quot;HH:mm&quot;).format(new Date());\n        return new OutputMessage(message.getFrom(), message.getText(), time);\n    }\n}\n</code></pre>\n<p>In the screenshot you can see the console.log when I execute the function &quot;connect&quot;:</p>\n<p><a href=\"https://i.stack.imgur.com/pLi2l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pLi2l.png\" alt=\"enter image description here\" /></a></p>\n<p>I checked all the documentation of SockJS and StompJS but I couldn't find a solution.</p>\n<p>Thank you very much for your answer in advance. :)</p>\n"},{"tags":["java","spring","spring-boot","http"],"comments":[{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1659543589,"post_id":73224050,"comment_id":129320891,"body_markdown":"I don&#39;t think the restTemplate has a &quot;delete&quot; which takes a body, that&#39;s why the real request is failing (body is not added). I think you&#39;ll have to call pure HTTP without passing through Spring&#39;s rest template (or use the &quot;exchange&quot; of restTemplate where you build your own RequestHttpEntity with verb DELETE and a body)","body":"I don&#39;t think the restTemplate has a &quot;delete&quot; which takes a body, that&#39;s why the real request is failing (body is not added). I think you&#39;ll have to call pure HTTP without passing through Spring&#39;s rest template (or use the &quot;exchange&quot; of restTemplate where you build your own RequestHttpEntity with verb DELETE and a body)"},{"owner":{"account_id":45934,"reputation":203659,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1659545452,"post_id":73224050,"comment_id":129321542,"body_markdown":"Is there a reason you want to have a method for a DELETE request which takes a body? It&#39;s not disallowed to have a body in a DELETE request, but what it should mean is not well specified and some specifications seem to say that the body of a DELETE request should be ignored. See [Is an entity body allowed for an HTTP DELETE request?](https://stackoverflow.com/questions/299628/is-an-entity-body-allowed-for-an-http-delete-request). In other words: Don&#39;t design your REST API with a DELETE request that requires a body.","body":"Is there a reason you want to have a method for a DELETE request which takes a body? It&#39;s not disallowed to have a body in a DELETE request, but what it should mean is not well specified and some specifications seem to say that the body of a DELETE request should be ignored. See <a href=\"https://stackoverflow.com/questions/299628/is-an-entity-body-allowed-for-an-http-delete-request\">Is an entity body allowed for an HTTP DELETE request?</a>. In other words: Don&#39;t design your REST API with a DELETE request that requires a body."},{"owner":{"account_id":5873859,"reputation":905,"user_id":4625372,"accept_rate":75,"display_name":"Ptiseb"},"score":0,"creation_date":1659612916,"post_id":73224050,"comment_id":129338794,"body_markdown":"Thanks for your messages. It worked using the exchange method.\n@Jesper, noted :) i didn&#39;t get this point of the spec.","body":"Thanks for your messages. It worked using the exchange method. @Jesper, noted :) i didn&#39;t get this point of the spec."}],"answers":[{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659613793,"creation_date":1659548726,"answer_id":73225671,"question_id":73224050,"body_markdown":"&gt; I use the module spring-boot-starter-web of **spring boot (v2.7.1 on my\r\n&gt; project)**.\r\n\r\nAccording to the most [recent][1] version of rest template, it offers only the following `delete` methods and none of these methods expects an `entity` as parameter to be sent to `request body` of http request.\r\n\r\n&gt; void\tdelete(String url, Map&lt;String,?&gt; uriVariables)\r\n&gt; \r\n&gt; void\tdelete(String url, Object... uriVariables)\r\n&gt; \r\n&gt; void\tdelete(URI url)\r\n\r\nUri variables that the above methods offer are something different. They are passed and then used to modify the URI accordingly. If for example your URI was `./some1/some2/{foo}`, you pass a uriVariable like 2 and it makes the URI `./some1/some2/2`.\r\n\r\nThis is not what you need and you currently have no other choice, than to work around this issue, as it remains at your disposal the general `exchange` method of restTemplate.\r\n\r\n&gt;     &lt;T&gt; ResponseEntity&lt;T&gt; exchange(String url, HttpMethod method, HttpEntity&lt;?&gt; requestEntity, Class&lt;T&gt; &gt;  responseType, Object... uriVariables)\r\n&gt;\r\n&gt; Execute the HTTP method to the given URI template, writing the given request entity &gt; to the request, and returns the response as ResponseEntity.\r\n\r\nThis is how it could be used.\r\n\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.setContentType(MediaType.TEXT_PLAIN_VALUE);\r\n    \r\n    HttpEntity&lt;String&gt; entity = new HttpEntity&lt;String&gt;(&quot;SomeText&quot;, headers);\r\n    restTemplate.exchange(&quot;http://localhost:8090/url/route2&quot;, HttpMethod.DELETE, entity, String.class);\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html","title":"Difference between DELETE HTTP request parameters and request body","body":"<blockquote>\n<p>I use the module spring-boot-starter-web of <strong>spring boot (v2.7.1 on my\nproject)</strong>.</p>\n</blockquote>\n<p>According to the most <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html\" rel=\"nofollow noreferrer\">recent</a> version of rest template, it offers only the following <code>delete</code> methods and none of these methods expects an <code>entity</code> as parameter to be sent to <code>request body</code> of http request.</p>\n<blockquote>\n<p>void  delete(String url, Map&lt;String,?&gt; uriVariables)</p>\n<p>void  delete(String url, Object... uriVariables)</p>\n<p>void  delete(URI url)</p>\n</blockquote>\n<p>Uri variables that the above methods offer are something different. They are passed and then used to modify the URI accordingly. If for example your URI was <code>./some1/some2/{foo}</code>, you pass a uriVariable like 2 and it makes the URI <code>./some1/some2/2</code>.</p>\n<p>This is not what you need and you currently have no other choice, than to work around this issue, as it remains at your disposal the general <code>exchange</code> method of restTemplate.</p>\n<blockquote>\n<pre><code>&lt;T&gt; ResponseEntity&lt;T&gt; exchange(String url, HttpMethod method, HttpEntity&lt;?&gt; requestEntity, Class&lt;T&gt; &gt;  responseType, Object... uriVariables)\n</code></pre>\n<p>Execute the HTTP method to the given URI template, writing the given request entity &gt; to the request, and returns the response as ResponseEntity.</p>\n</blockquote>\n<p>This is how it could be used.</p>\n<pre><code>HttpHeaders headers = new HttpHeaders();\nheaders.setContentType(MediaType.TEXT_PLAIN_VALUE);\n\nHttpEntity&lt;String&gt; entity = new HttpEntity&lt;String&gt;(&quot;SomeText&quot;, headers);\nrestTemplate.exchange(&quot;http://localhost:8090/url/route2&quot;, HttpMethod.DELETE, entity, String.class);\n</code></pre>\n"}],"owner":{"account_id":5873859,"reputation":905,"user_id":4625372,"accept_rate":75,"display_name":"Ptiseb"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1182,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73225671,"answer_count":1,"score":2,"last_activity_date":1659613884,"creation_date":1659541017,"question_id":73224050,"body_markdown":"I&#39;m trying to understand the behaviour of an HTTP DELETE request.\r\n\r\nOn my java web application, I defined the following\r\n\t\r\n\r\n    @DeleteMapping(&quot;url/route&quot;)\r\n    public ResponseEntity&lt;String&gt; route(@RequestParam int param1, @RequestParam long param2, @RequestParam long param3, @RequestParam String param4) {\r\n    \tSystem.out.println(param1 + &quot;-&quot; + param2 + &quot;-&quot; + param3 + &quot;-&quot; + param4 );\r\n    \treturn new ResponseEntity&lt;String&gt;(HttpStatus.OK);\r\n    }\r\n    \t\r\n    @DeleteMapping(&quot;url/route2&quot;)\r\n    public ResponseEntity&lt;String&gt; route2(@RequestBody String body) {\t\t\r\n    \tSystem.out.println(body);\r\n    \treturn new ResponseEntity&lt;String&gt;(HttpStatus.OK);\r\n    }\r\n\r\nAnd on a java client, I do the following\r\n\r\n    public final void myFunction(final int param1, final long param2, final long param3, final String param4) {\r\n        restTemplate.delete(&quot;http://localhost:8090/url/route?&quot;\r\n                + &quot;param1=&quot; + param1 + &quot;&amp;&quot;\r\n                + &quot;param2=&quot;+ param2 + &quot;&amp;&quot;\r\n                + &quot;param3=&quot; + param3 + &quot;&amp;&quot;\r\n                + &quot;param4=&quot; + param4, String.class);\r\n        \r\n        restTemplate.delete(&quot;http://localhost:8090/url/route2&quot;, &quot;SomeText&quot;, String.class);\r\n    }\r\n\r\nThe first request works fine, the log is well displayed. However, on the second case, i get the following error \r\n\r\n&gt; HttpMessageNotReadableException: Required request body is missing:\r\n&gt; public org.springframework.http.ResponseEntity&lt;java.lang.String&gt;\r\n&gt; com.thales.atm.thmi.microservice.CanvasController.deleteGraphicObject2(java.lang.String)]\r\n\r\nI use the module spring-boot-starter-web of spring boot (v2.7.1 on my project).\r\n\r\nCan someone explain me what&#39;s wrong in my ussage of body parameters for this delete request ?\r\n\r\nThanks!","title":"Difference between DELETE HTTP request parameters and request body","body":"<p>I'm trying to understand the behaviour of an HTTP DELETE request.</p>\n<p>On my java web application, I defined the following</p>\n<pre><code>@DeleteMapping(&quot;url/route&quot;)\npublic ResponseEntity&lt;String&gt; route(@RequestParam int param1, @RequestParam long param2, @RequestParam long param3, @RequestParam String param4) {\n    System.out.println(param1 + &quot;-&quot; + param2 + &quot;-&quot; + param3 + &quot;-&quot; + param4 );\n    return new ResponseEntity&lt;String&gt;(HttpStatus.OK);\n}\n    \n@DeleteMapping(&quot;url/route2&quot;)\npublic ResponseEntity&lt;String&gt; route2(@RequestBody String body) {        \n    System.out.println(body);\n    return new ResponseEntity&lt;String&gt;(HttpStatus.OK);\n}\n</code></pre>\n<p>And on a java client, I do the following</p>\n<pre><code>public final void myFunction(final int param1, final long param2, final long param3, final String param4) {\n    restTemplate.delete(&quot;http://localhost:8090/url/route?&quot;\n            + &quot;param1=&quot; + param1 + &quot;&amp;&quot;\n            + &quot;param2=&quot;+ param2 + &quot;&amp;&quot;\n            + &quot;param3=&quot; + param3 + &quot;&amp;&quot;\n            + &quot;param4=&quot; + param4, String.class);\n    \n    restTemplate.delete(&quot;http://localhost:8090/url/route2&quot;, &quot;SomeText&quot;, String.class);\n}\n</code></pre>\n<p>The first request works fine, the log is well displayed. However, on the second case, i get the following error</p>\n<blockquote>\n<p>HttpMessageNotReadableException: Required request body is missing:\npublic org.springframework.http.ResponseEntity&lt;java.lang.String&gt;\ncom.thales.atm.thmi.microservice.CanvasController.deleteGraphicObject2(java.lang.String)]</p>\n</blockquote>\n<p>I use the module spring-boot-starter-web of spring boot (v2.7.1 on my project).</p>\n<p>Can someone explain me what's wrong in my ussage of body parameters for this delete request ?</p>\n<p>Thanks!</p>\n"},{"tags":["java","string","algorithm","cp"],"answers":[{"tags":[],"owner":{"account_id":6402640,"reputation":17528,"user_id":4964822,"display_name":"nice_dev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659611730,"creation_date":1659611730,"answer_id":73234942,"question_id":73224093,"body_markdown":"**Issue:**\r\n\r\n    if(s1.length()&gt;=s2.length()){\r\n       res = s1;\r\n    }else{\r\n       res = s2;\r\n    }\r\n\r\nIssue is with the above snippet. You assign either of the value to `res` regardless of whether it will give you the _longest palindrome candidate_ or not. In other words, you are overwriting `res` each time without having additional checks for it&#39;s length since we need to find the _longest_. \r\n\r\n**Solution:**\r\n\r\nYou can do the below to fix it:\r\n\r\n    public String longestPalindrome(String s) {        \r\n    \tString res = &quot;&quot;;    \r\n    \tfor(int i = 0; i &lt; s.length(); i++){\r\n    \t    String s1 = expandFromCentre(s, i, i); // aba            \r\n    \t    String s2 = expandFromCentre(s, i, i+1);  //abba\r\n    \t    \r\n    \t    if(res.length() &lt; s1.length()){\r\n    \t        res = s1;\r\n    \t    }\r\n    \t    \r\n    \t    if(res.length() &lt; s2.length()){\r\n    \t        res = s2;\r\n    \t    }        \r\n    \t}                \r\n    \treturn res;        \r\n    }","title":"Longest Palindromic Substring using expandfromcenter approach","body":"<p><strong>Issue:</strong></p>\n<pre><code>if(s1.length()&gt;=s2.length()){\n   res = s1;\n}else{\n   res = s2;\n}\n</code></pre>\n<p>Issue is with the above snippet. You assign either of the value to <code>res</code> regardless of whether it will give you the <em>longest palindrome candidate</em> or not. In other words, you are overwriting <code>res</code> each time without having additional checks for it's length since we need to find the <em>longest</em>.</p>\n<p><strong>Solution:</strong></p>\n<p>You can do the below to fix it:</p>\n<pre><code>public String longestPalindrome(String s) {        \n    String res = &quot;&quot;;    \n    for(int i = 0; i &lt; s.length(); i++){\n        String s1 = expandFromCentre(s, i, i); // aba            \n        String s2 = expandFromCentre(s, i, i+1);  //abba\n        \n        if(res.length() &lt; s1.length()){\n            res = s1;\n        }\n        \n        if(res.length() &lt; s2.length()){\n            res = s2;\n        }        \n    }                \n    return res;        \n}\n</code></pre>\n"}],"owner":{"account_id":25736959,"reputation":21,"user_id":19491527,"display_name":"panda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659613691,"creation_date":1659541199,"question_id":73224093,"body_markdown":"I am trying to do Leetcode **Longest Palindromic Substring** with expandfromCentre approach, but instead of returning the length in the function as most of the solutions did, I tried returning the string itself. I think it should work... I don&#39;t know what&#39;s causing the error.\r\n\r\n\r\n    class Solution {\r\n        public String longestPalindrome(String s) {\r\n            int n = s.length();\r\n            int maxLength = 1;\r\n            \r\n            String res = Character.toString(s.charAt(0));\r\n            \r\n            int start=0; int end=0;\r\n            \r\n            for(int i=0; i&lt;n; i++){\r\n                String s1 = expandFromCentre(s, i, i); // aba            \r\n                String s2 = expandFromCentre(s, i, i+1);  //abba\r\n                \r\n                if(s1.length()&gt;=s2.length()){\r\n                    res = s1;\r\n                }\r\n                else{\r\n                    res = s2;\r\n                }\r\n            \r\n            }                \r\n            return res;\r\n            \r\n        }\r\n        \r\n        static String expandFromCentre(String s, int left, int right){\r\n            int n = s.length();\r\n            \r\n            while(left&gt;=0 &amp;&amp; right&lt;n &amp;&amp; s.charAt(left)==s.charAt(right) ){\r\n                left--;\r\n                right++;\r\n            }\r\n       \r\n            return s.substring(left+1, right);\r\n            \r\n        }\r\n    }","title":"Longest Palindromic Substring using expandfromcenter approach","body":"<p>I am trying to do Leetcode <strong>Longest Palindromic Substring</strong> with expandfromCentre approach, but instead of returning the length in the function as most of the solutions did, I tried returning the string itself. I think it should work... I don't know what's causing the error.</p>\n<pre><code>class Solution {\n    public String longestPalindrome(String s) {\n        int n = s.length();\n        int maxLength = 1;\n        \n        String res = Character.toString(s.charAt(0));\n        \n        int start=0; int end=0;\n        \n        for(int i=0; i&lt;n; i++){\n            String s1 = expandFromCentre(s, i, i); // aba            \n            String s2 = expandFromCentre(s, i, i+1);  //abba\n            \n            if(s1.length()&gt;=s2.length()){\n                res = s1;\n            }\n            else{\n                res = s2;\n            }\n        \n        }                \n        return res;\n        \n    }\n    \n    static String expandFromCentre(String s, int left, int right){\n        int n = s.length();\n        \n        while(left&gt;=0 &amp;&amp; right&lt;n &amp;&amp; s.charAt(left)==s.charAt(right) ){\n            left--;\n            right++;\n        }\n   \n        return s.substring(left+1, right);\n        \n    }\n}\n</code></pre>\n"},{"tags":["java","optaplanner"],"answers":[{"tags":[],"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659442941,"creation_date":1659376752,"answer_id":73197783,"question_id":73196378,"body_markdown":"You should write a constraint which penalizes empty vehicles, and give it sufficient weight. Such a constraint could look like this, in theory:\r\n\r\n    constraintFactory.forEach(Transport.class)\r\n        .filter(transport -&gt; transport.isEmpty())\r\n        .penalize(&quot;Empty vehicle&quot;, HardSoftScore.ONE_SOFT, \r\n            transport -&gt; Math.pow(transport.countEmptySeats(), 2))\r\n\r\nDo note that:\r\n- The constraint weight is soft. You may want to consider making this a hard constraint, if this is of an utmost importance.\r\n- The match weight is based on the number of empty seats, and it grows quickly. This is important - if a vehicle has more empty seats, it will incur a larger penalty, the assumption being that bigger vehicles are more expensive to run. You may find a different way of factoring that in.\r\n\r\nHowever, I believe that your model above is broken. As far as I know, `PlanningListVariable` can not be used as any other collection. It is specifically designed to model a chain - for example, the list would represent a route of a vehicle, each item one stop on the route. The list defines a precedence relationship, where your model has none. Have you seen this actually work at runtime? (I&#39;d be surprised if it did, but it is possible that I do not yet fully understand this new and as of yet undocumented feature.)\r\n\r\nI can think of two ways of modelling the problem, each with its own pros and cons:\r\n\r\n- Have one planning entity per seat in a transport. Make that entity&#39;s variable (the employee) nullable. And then write a constraint which penalizes vehicles per empty seats.\r\n\r\n- Have employee be the entity, and assign transports to them. If a transport has no employees, it gets a penalty. If a transport has more employees than seats, it gets a (very) hard penalty.\r\n\r\nI&#39;d probably prefer the latter, as I foresee it will lead to less struggle further down the line.","title":"How to choose a car and optimally accommodate passengers in it?","body":"<p>You should write a constraint which penalizes empty vehicles, and give it sufficient weight. Such a constraint could look like this, in theory:</p>\n<pre><code>constraintFactory.forEach(Transport.class)\n    .filter(transport -&gt; transport.isEmpty())\n    .penalize(&quot;Empty vehicle&quot;, HardSoftScore.ONE_SOFT, \n        transport -&gt; Math.pow(transport.countEmptySeats(), 2))\n</code></pre>\n<p>Do note that:</p>\n<ul>\n<li>The constraint weight is soft. You may want to consider making this a hard constraint, if this is of an utmost importance.</li>\n<li>The match weight is based on the number of empty seats, and it grows quickly. This is important - if a vehicle has more empty seats, it will incur a larger penalty, the assumption being that bigger vehicles are more expensive to run. You may find a different way of factoring that in.</li>\n</ul>\n<p>However, I believe that your model above is broken. As far as I know, <code>PlanningListVariable</code> can not be used as any other collection. It is specifically designed to model a chain - for example, the list would represent a route of a vehicle, each item one stop on the route. The list defines a precedence relationship, where your model has none. Have you seen this actually work at runtime? (I'd be surprised if it did, but it is possible that I do not yet fully understand this new and as of yet undocumented feature.)</p>\n<p>I can think of two ways of modelling the problem, each with its own pros and cons:</p>\n<ul>\n<li><p>Have one planning entity per seat in a transport. Make that entity's variable (the employee) nullable. And then write a constraint which penalizes vehicles per empty seats.</p>\n</li>\n<li><p>Have employee be the entity, and assign transports to them. If a transport has no employees, it gets a penalty. If a transport has more employees than seats, it gets a (very) hard penalty.</p>\n</li>\n</ul>\n<p>I'd probably prefer the latter, as I foresee it will lead to less struggle further down the line.</p>\n"}],"owner":{"account_id":25648217,"reputation":65,"user_id":19415969,"display_name":"Scott A. Levinson"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1659613184,"creation_date":1659368970,"question_id":73196378,"body_markdown":"Based on my previous question [How to choose a vehicle that can accommodate the specified number of employees with OptaPlanner?][1]\r\n\r\nEmployee:\r\n```java\r\npublic class Employee {\r\n\r\n    @PlanningId\r\n    private Long id;\r\n\r\n    private String name;\r\n\r\n    @PlanningVariable(valueRangeProviderRefs = &quot;transportRange&quot;)\r\n    private Transport transport;\r\n}\r\n```\r\nTransport:\r\n```java\r\n@PlanningEntity\r\npublic class Transport {\r\n\r\n    @PlanningId\r\n    private Long id;\r\n    private Integer capacity;\r\n\r\n    @PlanningListVariable(valueRangeProviderRefs = &quot;employeeRange&quot;)\r\n    private List&lt;Employee&gt; employeeList = new ArrayList&lt;&gt;();\r\n\r\n    public int countEmptySeats() {\r\n        return seatsNumber - inspectors.size();\r\n    }\r\n    \r\n}\r\n\r\n```\r\n\r\n```java\r\n@PlanningEntity\r\nclass Transport {\r\n\r\n\t@PlanningId\r\n    Long id;\r\n\t\r\n\t@InverseRelationShadowVariable(sourceVariableName = &quot;transport&quot;)\r\n    List&lt;Employee&gt; employees = new ArrayList&lt;&gt;();\r\n}\r\n```\r\n\r\n\r\nSolution:\r\n```java\r\n@PlanningSolution\r\npublic class Solution {\r\n\r\n    @PlanningEntityCollectionProperty\r\n    private List&lt;Transport&gt; transports;\r\n\r\n    @ProblemFactCollectionProperty\r\n    @ValueRangeProvider(id = &quot;employeeRange&quot;)\r\n    private List&lt;Employee&gt; employees;\r\n\r\n    @PlanningScore\r\n    private HardMediumSoftLongScore score;\r\n\r\n    public Plan(List&lt;Transport&gt; transports, List&lt;Employee&gt; employees) {\r\n        this.transports = transports;\r\n        this.employees = employees;\r\n    }\r\n}\r\n\r\n```\r\n\r\nConstraints:\r\n```java\r\nprivate Constraint transportMaxCapacity(ConstraintFactory factory) {\r\nreturn factory.forEach(Transport.class)\r\n        .filter(transport -&gt; transport.getEmployees().size() &gt; transport.getCapacity())\r\n        .penalizeLong(&quot;max capacity conflict&quot;,\r\n                HardMediumSoftLongScore.ONE_HARD, transport -&gt; transport.getEmployees().size() - transport.getCapacity());\r\n}\r\n\r\nprivate Constraint transportCapacity(ConstraintFactory factory) {\r\nreturn factory.forEach(Transport.class)\r\n        .filter(transport -&gt; !transport.getEmployees().isEmpty())\r\n        .filter(transport -&gt; transport.getEmployees().size() &lt; transport.getCapacity())\r\n        .penalizeLong(&quot;optimal placement conflict&quot;,\r\n                HardMediumSoftLongScore.ONE_SOFT, transport -&gt; transport.getCapacity() - transport.getInspectorList().size());\r\n}\r\n\r\nprivate Constraint optimalVehicleConflict(ConstraintFactory factory) {\r\n        return factory.forEach(Transport.class)\r\n                .filter(transport -&gt; transport.getEmployees().isEmpty())\r\n                .penalize(&quot;Empty transport&quot;, HardMediumSoftLongScore.ONE_SOFT, vehicle -&gt; (int) Math.pow(transport.countEmptySeats(), 2));\r\n    }\r\n```\r\n**The problem:** When I have vehicle with capacities: 17, 6, 2, 2, 2 and 6 passengers then as a result I get 3 vehicles with 2 passengers instead of 1 vehicle with capacity 6.\r\n\r\n\r\n\r\n```\r\n+---------+-----------+\r\n| vehicle | employees |\r\n+---------+-----------+\r\n|      17 |         - |\r\n|       6 |         - |\r\n|       2 |         2 |\r\n|       2 |         2 |\r\n|       2 |         2 |\r\n+---------+-----------+\r\n```\r\nHow I can solve this problem? Thanks in advance!\r\n\r\n  [1]: https://stackoverflow.com/questions/73105237/how-to-choose-a-vehicle-that-can-accommodate-the-specified-number-of-employees-w","title":"How to choose a car and optimally accommodate passengers in it?","body":"<p>Based on my previous question <a href=\"https://stackoverflow.com/questions/73105237/how-to-choose-a-vehicle-that-can-accommodate-the-specified-number-of-employees-w\">How to choose a vehicle that can accommodate the specified number of employees with OptaPlanner?</a></p>\n<p>Employee:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Employee {\n\n    @PlanningId\n    private Long id;\n\n    private String name;\n\n    @PlanningVariable(valueRangeProviderRefs = &quot;transportRange&quot;)\n    private Transport transport;\n}\n</code></pre>\n<p>Transport:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PlanningEntity\npublic class Transport {\n\n    @PlanningId\n    private Long id;\n    private Integer capacity;\n\n    @PlanningListVariable(valueRangeProviderRefs = &quot;employeeRange&quot;)\n    private List&lt;Employee&gt; employeeList = new ArrayList&lt;&gt;();\n\n    public int countEmptySeats() {\n        return seatsNumber - inspectors.size();\n    }\n    \n}\n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@PlanningEntity\nclass Transport {\n\n    @PlanningId\n    Long id;\n    \n    @InverseRelationShadowVariable(sourceVariableName = &quot;transport&quot;)\n    List&lt;Employee&gt; employees = new ArrayList&lt;&gt;();\n}\n</code></pre>\n<p>Solution:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PlanningSolution\npublic class Solution {\n\n    @PlanningEntityCollectionProperty\n    private List&lt;Transport&gt; transports;\n\n    @ProblemFactCollectionProperty\n    @ValueRangeProvider(id = &quot;employeeRange&quot;)\n    private List&lt;Employee&gt; employees;\n\n    @PlanningScore\n    private HardMediumSoftLongScore score;\n\n    public Plan(List&lt;Transport&gt; transports, List&lt;Employee&gt; employees) {\n        this.transports = transports;\n        this.employees = employees;\n    }\n}\n\n</code></pre>\n<p>Constraints:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Constraint transportMaxCapacity(ConstraintFactory factory) {\nreturn factory.forEach(Transport.class)\n        .filter(transport -&gt; transport.getEmployees().size() &gt; transport.getCapacity())\n        .penalizeLong(&quot;max capacity conflict&quot;,\n                HardMediumSoftLongScore.ONE_HARD, transport -&gt; transport.getEmployees().size() - transport.getCapacity());\n}\n\nprivate Constraint transportCapacity(ConstraintFactory factory) {\nreturn factory.forEach(Transport.class)\n        .filter(transport -&gt; !transport.getEmployees().isEmpty())\n        .filter(transport -&gt; transport.getEmployees().size() &lt; transport.getCapacity())\n        .penalizeLong(&quot;optimal placement conflict&quot;,\n                HardMediumSoftLongScore.ONE_SOFT, transport -&gt; transport.getCapacity() - transport.getInspectorList().size());\n}\n\nprivate Constraint optimalVehicleConflict(ConstraintFactory factory) {\n        return factory.forEach(Transport.class)\n                .filter(transport -&gt; transport.getEmployees().isEmpty())\n                .penalize(&quot;Empty transport&quot;, HardMediumSoftLongScore.ONE_SOFT, vehicle -&gt; (int) Math.pow(transport.countEmptySeats(), 2));\n    }\n</code></pre>\n<p><strong>The problem:</strong> When I have vehicle with capacities: 17, 6, 2, 2, 2 and 6 passengers then as a result I get 3 vehicles with 2 passengers instead of 1 vehicle with capacity 6.</p>\n<pre><code>+---------+-----------+\n| vehicle | employees |\n+---------+-----------+\n|      17 |         - |\n|       6 |         - |\n|       2 |         2 |\n|       2 |         2 |\n|       2 |         2 |\n+---------+-----------+\n</code></pre>\n<p>How I can solve this problem? Thanks in advance!</p>\n"},{"tags":["java","android","android-studio","kotlin","android-fragments"],"answers":[{"tags":[],"owner":{"account_id":9653069,"reputation":146,"user_id":7163567,"display_name":"khoshrang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659602663,"creation_date":1659602663,"answer_id":73232883,"question_id":73232021,"body_markdown":"your best option is using the **shared view model** in which your both fragment will use on view Model and you don&#39;t need to worry about the lifecycle of your fragments.\r\ntake a look at the link below\r\n\r\n[sharedviewModel][1] \r\n\r\n\r\n  [1]: https://developer.android.com/codelabs/basic-android-kotlin-training-shared-viewmodel","title":"How to get callback in fragment when it&#39;s in stack (currently not visible)","body":"<p>your best option is using the <strong>shared view model</strong> in which your both fragment will use on view Model and you don't need to worry about the lifecycle of your fragments.\ntake a look at the link below</p>\n<p><a href=\"https://developer.android.com/codelabs/basic-android-kotlin-training-shared-viewmodel\" rel=\"nofollow noreferrer\">sharedviewModel</a></p>\n"},{"tags":[],"owner":{"account_id":2624262,"reputation":1566,"user_id":2271651,"display_name":"sergpetrov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659613072,"creation_date":1659613072,"answer_id":73235284,"question_id":73232021,"body_markdown":"You have several options to achieve this, it depends on many factors such as the context of your task, what type of data you want to share between fragments, what type of architecture in your project, and whether the data should be persistent in the memory or, database or another cache, etc.\r\n\r\n - If you want to pass a one-time simple data to Fragment A then you can use [Fragment Result API][1]\r\n - If you are using [Android Architecture Components][2] and MVVM then try [Shared View Model][3] or [NavGraph View Model][4]\r\n - If you have a DI you can use some scoped instance to temporarily keep and share your data (for example a Repository), so the scope of life of the instance should be longer than these 2 fragments.\r\n - If you have storage that allows changes observing then you can subscribe to the changes in Fragment A (for example Room [Observing database changes][5]).\r\n\r\n\r\n  [1]: https://developer.android.com/guide/fragments/communicate#fragment-result\r\n  [2]: https://developer.android.com/topic/architecture\r\n  [3]: https://developer.android.com/topic/libraries/architecture/viewmodel#sharing\r\n  [4]: https://developer.android.com/guide/fragments/communicate#scoping_a_viewmodel_to_the_navigation_graph\r\n  [5]: https://developer.android.com/codelabs/android-room-with-a-view-kotlin#6","title":"How to get callback in fragment when it&#39;s in stack (currently not visible)","body":"<p>You have several options to achieve this, it depends on many factors such as the context of your task, what type of data you want to share between fragments, what type of architecture in your project, and whether the data should be persistent in the memory or, database or another cache, etc.</p>\n<ul>\n<li>If you want to pass a one-time simple data to Fragment A then you can use <a href=\"https://developer.android.com/guide/fragments/communicate#fragment-result\" rel=\"nofollow noreferrer\">Fragment Result API</a></li>\n<li>If you are using <a href=\"https://developer.android.com/topic/architecture\" rel=\"nofollow noreferrer\">Android Architecture Components</a> and MVVM then try <a href=\"https://developer.android.com/topic/libraries/architecture/viewmodel#sharing\" rel=\"nofollow noreferrer\">Shared View Model</a> or <a href=\"https://developer.android.com/guide/fragments/communicate#scoping_a_viewmodel_to_the_navigation_graph\" rel=\"nofollow noreferrer\">NavGraph View Model</a></li>\n<li>If you have a DI you can use some scoped instance to temporarily keep and share your data (for example a Repository), so the scope of life of the instance should be longer than these 2 fragments.</li>\n<li>If you have storage that allows changes observing then you can subscribe to the changes in Fragment A (for example Room <a href=\"https://developer.android.com/codelabs/android-room-with-a-view-kotlin#6\" rel=\"nofollow noreferrer\">Observing database changes</a>).</li>\n</ul>\n"}],"owner":{"account_id":16904606,"reputation":561,"user_id":12225165,"display_name":"Jaydeep parmar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73235284,"answer_count":2,"score":0,"last_activity_date":1659613072,"creation_date":1659598561,"question_id":73232021,"body_markdown":"I want **callback** in **fragment** when it&#39;s **not currently visible**\r\n\r\n**Ex:** I am opening `FragmentA` then I am opening `FragmentB` now I am updating list sequence in `FragmentB` after updating list sequence I also want to update list in `FragmentA` before opening it (want to update list in `FragmentA` when `FragmentB` is visible)\r\n\r\nI have not perform `.popBackStack()` in `FragmentB`\r\n\r\nNow if I update list seqeuence 2nd time then list sequence in `FragmentA` should update\r\n\r\n**In sort : I want callback in fragment when it&#39;s not currently visible**\r\n\r\nIs it posible?","title":"How to get callback in fragment when it&#39;s in stack (currently not visible)","body":"<p>I want <strong>callback</strong> in <strong>fragment</strong> when it's <strong>not currently visible</strong></p>\n<p><strong>Ex:</strong> I am opening <code>FragmentA</code> then I am opening <code>FragmentB</code> now I am updating list sequence in <code>FragmentB</code> after updating list sequence I also want to update list in <code>FragmentA</code> before opening it (want to update list in <code>FragmentA</code> when <code>FragmentB</code> is visible)</p>\n<p>I have not perform <code>.popBackStack()</code> in <code>FragmentB</code></p>\n<p>Now if I update list seqeuence 2nd time then list sequence in <code>FragmentA</code> should update</p>\n<p><strong>In sort : I want callback in fragment when it's not currently visible</strong></p>\n<p>Is it posible?</p>\n"},{"tags":["java","scala"],"comments":[{"owner":{"account_id":7034556,"reputation":12325,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":1,"creation_date":1659611684,"post_id":73234878,"comment_id":129338304,"body_markdown":"Show us the code you tried and example data.","body":"Show us the code you tried and example data."},{"owner":{"account_id":7034556,"reputation":12325,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":0,"creation_date":1659611720,"post_id":73234878,"comment_id":129338329,"body_markdown":"Also consider there are already libraries to do this, you should not be writing this yourself.","body":"Also consider there are already libraries to do this, you should not be writing this yourself."}],"answers":[{"tags":[],"owner":{"account_id":5335286,"reputation":39826,"user_id":4254517,"accept_rate":48,"display_name":"Dima"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659612806,"creation_date":1659612806,"answer_id":73235225,"question_id":73234878,"body_markdown":"You just need to parse it to a larger container, and then downcast:\r\n\r\n```\r\nval byteVal = java.lang.Long.valueOf(&quot;f0&quot;, 16).toByte      // -16\r\nval shortVal = java.lang.Long.valueOf(&quot;fff0&quot;, 16).toShort  // -16\r\nval intVal  = java.lang.Long.valueOf(&quot;fffffff0&quot;, 16).toInt // -16\r\n```\r\n\r\n\r\n","title":"How can we convert Hex string to Byte, Short datatype in scala","body":"<p>You just need to parse it to a larger container, and then downcast:</p>\n<pre><code>val byteVal = java.lang.Long.valueOf(&quot;f0&quot;, 16).toByte      // -16\nval shortVal = java.lang.Long.valueOf(&quot;fff0&quot;, 16).toShort  // -16\nval intVal  = java.lang.Long.valueOf(&quot;fffffff0&quot;, 16).toInt // -16\n</code></pre>\n"}],"owner":{"account_id":25503389,"reputation":17,"user_id":19296206,"display_name":"Nagababu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1659675384,"accepted_answer_id":73235225,"answer_count":1,"score":0,"last_activity_date":1659612848,"creation_date":1659611454,"question_id":73234878,"body_markdown":"I am working on a small project where i required to decode the data coming as a Hexadecimal format in Scala Spark. For that I need to convert two Hexadecimal character&#39;s to signed number i.e &quot;F0&quot; to &quot;-16&quot; using Scala.(1 byte string)\r\n    And need to convert 2 byte i.e. four char hexadecimal string to signed number. But when I am trying to convert It was showing &quot;Value out of range&quot; Exception. Could you suggest me a simple way to do it. Thank you.","title":"How can we convert Hex string to Byte, Short datatype in scala","body":"<p>I am working on a small project where i required to decode the data coming as a Hexadecimal format in Scala Spark. For that I need to convert two Hexadecimal character's to signed number i.e &quot;F0&quot; to &quot;-16&quot; using Scala.(1 byte string)\nAnd need to convert 2 byte i.e. four char hexadecimal string to signed number. But when I am trying to convert It was showing &quot;Value out of range&quot; Exception. Could you suggest me a simple way to do it. Thank you.</p>\n"},{"tags":["java","spring","ssl","https","spring-vault"],"comments":[{"owner":{"account_id":7719340,"reputation":85,"user_id":5846031,"display_name":"thelearner"},"score":0,"creation_date":1659436816,"post_id":70560824,"comment_id":129289385,"body_markdown":"Hi @meldevep, did you find any answer to this?","body":"Hi @meldevep, did you find any answer to this?"},{"owner":{"account_id":21375952,"reputation":593,"user_id":15742673,"display_name":"meldevep"},"score":0,"creation_date":1659603962,"post_id":70560824,"comment_id":129335522,"body_markdown":"Hey @thelearner. There is no out-of-box way to do so. One of the project contributors mentioned they do not like this idea  [link](https://github.com/spring-projects/spring-vault/issues/130). You may want to rewrite some classes that will lead to accepting any certificate. \n`SSLContext sslContext = SSLContext.getInstance(&quot;SSL&quot;);\n// set up a TrustManager that trusts everything`","body":"Hey @thelearner. There is no out-of-box way to do so. One of the project contributors mentioned they do not like this idea  <a href=\"https://github.com/spring-projects/spring-vault/issues/130\" rel=\"nofollow noreferrer\">link</a>. You may want to rewrite some classes that will lead to accepting any certificate.  <code>SSLContext sslContext = SSLContext.getInstance(&quot;SSL&quot;); &#47;&#47; set up a TrustManager that trusts everything</code>"},{"owner":{"account_id":7719340,"reputation":85,"user_id":5846031,"display_name":"thelearner"},"score":0,"creation_date":1659606849,"post_id":70560824,"comment_id":129336476,"body_markdown":"Thanks for the reply @meldevep. I&#39;m facing this SSL issue from last one week. I&#39;m able to connect to local vault server via token &amp; AppRole authentication mechanism but I&#39;m not able to connect to our dev vault server on AWS or Azure. Everytime, it gives SSL Peer shut down error. So, I thought if I can skip the SSL part, may be I can check if I&#39;m able to connect to our dev vault server.","body":"Thanks for the reply @meldevep. I&#39;m facing this SSL issue from last one week. I&#39;m able to connect to local vault server via token &amp; AppRole authentication mechanism but I&#39;m not able to connect to our dev vault server on AWS or Azure. Everytime, it gives SSL Peer shut down error. So, I thought if I can skip the SSL part, may be I can check if I&#39;m able to connect to our dev vault server."},{"owner":{"account_id":21375952,"reputation":593,"user_id":15742673,"display_name":"meldevep"},"score":1,"creation_date":1659612291,"post_id":70560824,"comment_id":129338562,"body_markdown":"@thelearner As I said, there is no way that I&#39;m aware of to disable ssl verification in Spring Vault. There is an alternative library from HashiCorp that provides SSL configuration out-of-box [BetterCloud/vault-java-driver](https://github.com/BetterCloud/vault-java-driver#ssl-config). You may also want to check this [topic](https://www.javafixing.com/2022/04/fixed-how-to-disable-ssl-certificate.html?m=1) that may be useful for you. Cheers! That’s all I can help with. In the end I just used BetterCloud vault driver","body":"@thelearner As I said, there is no way that I&#39;m aware of to disable ssl verification in Spring Vault. There is an alternative library from HashiCorp that provides SSL configuration out-of-box <a href=\"https://github.com/BetterCloud/vault-java-driver#ssl-config\" rel=\"nofollow noreferrer\">BetterCloud/vault-java-driver</a>. You may also want to check this <a href=\"https://www.javafixing.com/2022/04/fixed-how-to-disable-ssl-certificate.html?m=1\" rel=\"nofollow noreferrer\">topic</a> that may be useful for you. Cheers! That’s all I can help with. In the end I just used BetterCloud vault driver"}],"answers":[{"tags":[],"owner":{"account_id":21375952,"reputation":593,"user_id":15742673,"display_name":"meldevep"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659612613,"creation_date":1659612613,"answer_id":73235178,"question_id":70560824,"body_markdown":"As the project&#39;s github page states - there is no way to disable SSL verification in Spring Vault. Please refer to [project github issue](https://github.com/spring-projects/spring-vault/issues/130) . Alternatively If someone has the answer, please feel free to post ","title":"How to disable SSL verification in Spring Vault","body":"<p>As the project's github page states - there is no way to disable SSL verification in Spring Vault. Please refer to <a href=\"https://github.com/spring-projects/spring-vault/issues/130\" rel=\"nofollow noreferrer\">project github issue</a> . Alternatively If someone has the answer, please feel free to post</p>\n"}],"owner":{"account_id":21375952,"reputation":593,"user_id":15742673,"display_name":"meldevep"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":535,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1659612613,"creation_date":1641171097,"question_id":70560824,"body_markdown":"I&#39;m trying to configure Spring vault, and for some reason, I need to disable SSL verification. Is there any known way to configure Spring Vault to ignore SSL? ","title":"How to disable SSL verification in Spring Vault","body":"<p>I'm trying to configure Spring vault, and for some reason, I need to disable SSL verification. Is there any known way to configure Spring Vault to ignore SSL?</p>\n"},{"tags":["java","spring","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1659597880,"post_id":73231825,"comment_id":129333457,"body_markdown":"why don&#39;t you simply have your db generate the key with autoincrement?","body":"why don&#39;t you simply have your db generate the key with autoincrement?"},{"owner":{"account_id":20078422,"reputation":21,"user_id":14721638,"display_name":"StzEZ"},"score":0,"creation_date":1659598079,"post_id":73231825,"comment_id":129333521,"body_markdown":"@Stultuske So generationType.Auto instead of identity?","body":"@Stultuske So generationType.Auto instead of identity?"},{"owner":{"account_id":20078422,"reputation":21,"user_id":14721638,"display_name":"StzEZ"},"score":0,"creation_date":1659598507,"post_id":73231825,"comment_id":129333685,"body_markdown":"@Stultuske I tried and it throws Sequence &quot;HIBERNATE_SEQUENCE&quot; not found; error. Either way, I think making it work with identity generationType would be the best approach","body":"@Stultuske I tried and it throws Sequence &quot;HIBERNATE_SEQUENCE&quot; not found; error. Either way, I think making it work with identity generationType would be the best approach"}],"answers":[{"tags":[],"owner":{"account_id":20078422,"reputation":21,"user_id":14721638,"display_name":"StzEZ"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659612220,"creation_date":1659612220,"answer_id":73235084,"question_id":73231825,"body_markdown":"In the end i &quot;solved&quot; it by basically making it bidirectional","title":"Hibernate duplicate primary key on cascade insert with more than one entity (Unidirectional one-to-many)","body":"<p>In the end i &quot;solved&quot; it by basically making it bidirectional</p>\n"}],"owner":{"account_id":20078422,"reputation":21,"user_id":14721638,"display_name":"StzEZ"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":269,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659612220,"creation_date":1659597742,"question_id":73231825,"body_markdown":"I have a entity with a unidirectional @OneToMany as follows:\r\n```\r\npublic class Parent {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @ManyToOne(cascade = CascadeType.REFRESH)\r\n    @JoinColumn(name = &quot;id_status&quot;)\r\n    private Status status;\r\n\r\n    @OneToMany(cascade = {CascadeType.ALL}, orphanRemoval = true)\r\n    @JoinColumn(name = &quot;childId&quot;)\r\n    private List&lt;Child&gt; children = new ArrayList&lt;&gt;();\r\n\r\n}\r\n```\r\nWhich references this with the unidirectional @OneToMany (Last column of Parent entity):\r\n```\r\npublic class Child{\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long childId;\r\n\r\n    private Date date;\r\n\r\n    @Length(max = 255)\r\n    private String description;\r\n\r\n}\r\n```\r\n\r\nMy problem is that on insert/update/delete of parent entity, any operation with the child entity fails.\r\nMain issues are:\r\n- On insert/update of parent with multiple children (with one child it works, but saves the child with id 2 instead of 1): \r\n```\r\norg.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: &quot;PUBLIC.PRIMARY_KEY_DF ON PUBLIC.CHILD(CHILD_ID) VALUES ( /* 2 */ CAST(2 AS DECFLOAT) )&quot;; SQL statement:\r\nupdate child set child_id=? where child_id=? [23505-212]\r\n```\r\n- On update of parent removing a child:\r\n```\r\norg.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: NULL not allowed for column &quot;CHILD_ID&quot;; SQL statement:\r\nupdate child set child_id=null where child_id=? [23502-212]\r\n```\r\nThere are some other minor issues, but it&#39;s mainly this that is giving me a hard time, thanks in advance.","title":"Hibernate duplicate primary key on cascade insert with more than one entity (Unidirectional one-to-many)","body":"<p>I have a entity with a unidirectional @OneToMany as follows:</p>\n<pre><code>public class Parent {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @ManyToOne(cascade = CascadeType.REFRESH)\n    @JoinColumn(name = &quot;id_status&quot;)\n    private Status status;\n\n    @OneToMany(cascade = {CascadeType.ALL}, orphanRemoval = true)\n    @JoinColumn(name = &quot;childId&quot;)\n    private List&lt;Child&gt; children = new ArrayList&lt;&gt;();\n\n}\n</code></pre>\n<p>Which references this with the unidirectional @OneToMany (Last column of Parent entity):</p>\n<pre><code>public class Child{\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long childId;\n\n    private Date date;\n\n    @Length(max = 255)\n    private String description;\n\n}\n</code></pre>\n<p>My problem is that on insert/update/delete of parent entity, any operation with the child entity fails.\nMain issues are:</p>\n<ul>\n<li>On insert/update of parent with multiple children (with one child it works, but saves the child with id 2 instead of 1):</li>\n</ul>\n<pre><code>org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: &quot;PUBLIC.PRIMARY_KEY_DF ON PUBLIC.CHILD(CHILD_ID) VALUES ( /* 2 */ CAST(2 AS DECFLOAT) )&quot;; SQL statement:\nupdate child set child_id=? where child_id=? [23505-212]\n</code></pre>\n<ul>\n<li>On update of parent removing a child:</li>\n</ul>\n<pre><code>org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: NULL not allowed for column &quot;CHILD_ID&quot;; SQL statement:\nupdate child set child_id=null where child_id=? [23502-212]\n</code></pre>\n<p>There are some other minor issues, but it's mainly this that is giving me a hard time, thanks in advance.</p>\n"},{"tags":["java","azure","azure-web-app-service","spring-boot-gradle-plugin","azure-java-tools"],"answers":[{"tags":[],"owner":{"account_id":25926474,"reputation":4571,"user_id":19648279,"display_name":"Harshitha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659612106,"creation_date":1659612106,"answer_id":73235057,"question_id":72960322,"body_markdown":"`Azure_App_Id`, `Azure_Password`, `Azure_Tenant_Id` are the key-value pairs you will get after creating the service principal for your application in the Azure.\r\n\r\n***Brief Explanation:***\r\n\r\n- **`AZURE_APP_ID`** is the associated service principal&#39;s application Id/Name/URL for login.\r\n- **`AZURE_PASSWORD`** is the service principal creds\r\n\r\nAs you mentioned the bitbucket pipeline, this [bitbucket official site](https://bitbucket.org/microsoft/azure-functions-deploy/src/master/README.md) will helps you how to create service principal for your web app and get the details required for deploying ***YAML*** script.\r\n\r\nThis site extends to [Azure CLI site](https://learn.microsoft.com/en-us/cli/azure/create-an-azure-service-principal-azure-cli) of creating service principal that is focused on Function app deploy script to bitbucket, where you can follow the same steps and replace the function app with web app.\r\n\r\n","title":"Setting up gradle azurewebapp plugin for springboot deployment","body":"<p><code>Azure_App_Id</code>, <code>Azure_Password</code>, <code>Azure_Tenant_Id</code> are the key-value pairs you will get after creating the service principal for your application in the Azure.</p>\n<p><em><strong>Brief Explanation:</strong></em></p>\n<ul>\n<li><strong><code>AZURE_APP_ID</code></strong> is the associated service principal's application Id/Name/URL for login.</li>\n<li><strong><code>AZURE_PASSWORD</code></strong> is the service principal creds</li>\n</ul>\n<p>As you mentioned the bitbucket pipeline, this <a href=\"https://bitbucket.org/microsoft/azure-functions-deploy/src/master/README.md\" rel=\"nofollow noreferrer\">bitbucket official site</a> will helps you how to create service principal for your web app and get the details required for deploying <em><strong>YAML</strong></em> script.</p>\n<p>This site extends to <a href=\"https://learn.microsoft.com/en-us/cli/azure/create-an-azure-service-principal-azure-cli\" rel=\"nofollow noreferrer\">Azure CLI site</a> of creating service principal that is focused on Function app deploy script to bitbucket, where you can follow the same steps and replace the function app with web app.</p>\n"}],"owner":{"account_id":236909,"reputation":8312,"user_id":504717,"accept_rate":56,"display_name":"Em Ae"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659612106,"creation_date":1657679898,"question_id":72960322,"body_markdown":"I have a springboot webapp that i want to deploy to Azure. The app is springboot jar. I have been able to use `azurewebapp` plug in to achieve this but it is using `OAUTH2` which limits integrating this deployment method into our CD (bitbucket). \r\n\r\nSo the more generic question would be how can i deploy my springboot app via bitbucket deployment pipeline? \r\n\r\nI looked at sample yaml file from bitbucket and it looks like that it needs these variables\r\n\r\n```\r\nAZURE_APP_ID: $AZURE_APP_ID\r\nAZURE_PASSWORD: $AZURE_PASSWORD\r\nAZURE_TENANT_ID: $AZURE_TENANT_ID\r\nAZURE_RESOURCE_GROUP: $AZURE_RESOURCE_GROUP\r\nAZURE_APP_NAME: $AZURE_APP_NAME\r\nZIP_FILE: app-$BITBUCKET_BUILD_NUMBER.zip\r\n```\r\n\r\nSo where would i get these values from\r\n* Azure App ID: I am assuming this is from Azure app service? But i don&#39;t see any app-id on my currently deployed app. \r\n* Azure Password: is this password for my (admin) account?\r\n* Azure Tenant ID: Whats this? where to get it from?\r\n\r\nAlso, is this correct approach or should i be using some other method? Azure pipeline? ","title":"Setting up gradle azurewebapp plugin for springboot deployment","body":"<p>I have a springboot webapp that i want to deploy to Azure. The app is springboot jar. I have been able to use <code>azurewebapp</code> plug in to achieve this but it is using <code>OAUTH2</code> which limits integrating this deployment method into our CD (bitbucket).</p>\n<p>So the more generic question would be how can i deploy my springboot app via bitbucket deployment pipeline?</p>\n<p>I looked at sample yaml file from bitbucket and it looks like that it needs these variables</p>\n<pre><code>AZURE_APP_ID: $AZURE_APP_ID\nAZURE_PASSWORD: $AZURE_PASSWORD\nAZURE_TENANT_ID: $AZURE_TENANT_ID\nAZURE_RESOURCE_GROUP: $AZURE_RESOURCE_GROUP\nAZURE_APP_NAME: $AZURE_APP_NAME\nZIP_FILE: app-$BITBUCKET_BUILD_NUMBER.zip\n</code></pre>\n<p>So where would i get these values from</p>\n<ul>\n<li>Azure App ID: I am assuming this is from Azure app service? But i don't see any app-id on my currently deployed app.</li>\n<li>Azure Password: is this password for my (admin) account?</li>\n<li>Azure Tenant ID: Whats this? where to get it from?</li>\n</ul>\n<p>Also, is this correct approach or should i be using some other method? Azure pipeline?</p>\n"},{"tags":["java","clojure"],"comments":[{"owner":{"account_id":75599,"reputation":877,"user_id":216798,"accept_rate":80,"display_name":"georgek"},"score":0,"creation_date":1394122808,"post_id":22214175,"comment_id":33754823,"body_markdown":"Maybe https://github.com/ngrunwald/gavagai would be helpful as well.","body":"Maybe <a href=\"https://github.com/ngrunwald/gavagai\" rel=\"nofollow noreferrer\">github.com/ngrunwald/gavagai</a> would be helpful as well."},{"owner":{"account_id":4127642,"reputation":1279,"user_id":3386328,"accept_rate":100,"display_name":"tgrrr"},"score":0,"creation_date":1394150332,"post_id":22214175,"comment_id":33771865,"body_markdown":"Yeah saw this project but its probably overkill for what I need. Its also fun to work these things out for yourself sometimes!","body":"Yeah saw this project but its probably overkill for what I need. Its also fun to work these things out for yourself sometimes!"}],"answers":[{"tags":[],"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1394081218,"creation_date":1394081218,"answer_id":22215208,"question_id":22214175,"body_markdown":"The `.toString` etc are symbols in the calling code. \r\n\r\nI think it would be better to pass the method name and invoke it using &quot;.&quot;.\r\n\r\n    (defmacro obj-to-map \r\n      [obj &amp; body]\r\n      (let [afn (fn [[method kw]]\r\n                  `(~kw (. ~obj ~method)))]\r\n      `(assoc {} ~@(mapcat afn (partition 2 body)))))\r\n    \r\n    (obj-to-map &quot;hello&quot; length :length toString :value)  \r\n    \r\n    =&gt;  {:value &quot;hello&quot;, :length 5}","title":"Convert Java object methods call results to Clojure map","body":"<p>The <code>.toString</code> etc are symbols in the calling code. </p>\n\n<p>I think it would be better to pass the method name and invoke it using \".\".</p>\n\n<pre><code>(defmacro obj-to-map \n  [obj &amp; body]\n  (let [afn (fn [[method kw]]\n              `(~kw (. ~obj ~method)))]\n  `(assoc {} ~@(mapcat afn (partition 2 body)))))\n\n(obj-to-map \"hello\" length :length toString :value)  \n\n=&gt;  {:value \"hello\", :length 5}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3298176,"reputation":7136,"user_id":2774914,"accept_rate":94,"display_name":"diziaq"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659611929,"creation_date":1659611929,"answer_id":73235009,"question_id":22214175,"body_markdown":"As an option consider solving this without macros. A macro would still implicitly use reflection, and here it is enough to apply `clojure.lang.Reflector/invokeInstanceMethod`\r\n\r\nThe basic implementation is `obj-to-map` followed by to simple modifications with var-args.\r\n\r\n\r\n    ; just a reusable object for calling no-arg methods\r\n    (def empty_array (into-array Object []))\r\n    \r\n    ; function update-vals available since v1.11.50\r\n    (defn obj-to-map [obj methods]\r\n      (update-vals methods\r\n                   #(clojure.lang.Reflector/invokeInstanceMethod\r\n                      obj % empty_array)))\r\n    \r\n    (defn obj-to-map2 [obj &amp; methods]\r\n      (obj-to-map obj (apply hash-map methods)))\r\n    \r\n    (defn obj-to-map3 [obj &amp; methods]\r\n      (obj-to-map obj (into {} (for [k methods] [(keyword k) k]))))\r\n        \r\n    (defn obj-to-map4 [obj &amp; methods]\r\n      (obj-to-map obj (into {} (for [k methods] [(keyword k) (str k)]))))\r\n\r\n    ; usage\r\n\r\n    (obj-to-map &quot;hello&quot; {:len &quot;length&quot; :st &quot;toString&quot;})     ; =&gt; {:len 5, :st hello}\r\n    \r\n    (obj-to-map2 &quot;hello&quot; :len &quot;length&quot; :st &quot;toString&quot;)      ; =&gt; {:st hello, :len 5}\r\n\r\n    (obj-to-map3 &quot;hello&quot; &quot;length&quot; &quot;toString&quot;)               ; =&gt; {:length 5, :toString hello}\r\n\r\n    (obj-to-map4 &quot;hello&quot; &#39;length &#39;toString)                 ; =&gt; {:length 5, :toString hello}\r\n\r\nDocs: [update-vals][1]\r\n\r\n\r\n  [1]: https://cljs.github.io/api/cljs.core/update-vals","title":"Convert Java object methods call results to Clojure map","body":"<p>As an option consider solving this without macros. A macro would still implicitly use reflection, and here it is enough to apply <code>clojure.lang.Reflector/invokeInstanceMethod</code></p>\n<p>The basic implementation is <code>obj-to-map</code> followed by to simple modifications with var-args.</p>\n<pre><code>; just a reusable object for calling no-arg methods\n(def empty_array (into-array Object []))\n\n; function update-vals available since v1.11.50\n(defn obj-to-map [obj methods]\n  (update-vals methods\n               #(clojure.lang.Reflector/invokeInstanceMethod\n                  obj % empty_array)))\n\n(defn obj-to-map2 [obj &amp; methods]\n  (obj-to-map obj (apply hash-map methods)))\n\n(defn obj-to-map3 [obj &amp; methods]\n  (obj-to-map obj (into {} (for [k methods] [(keyword k) k]))))\n    \n(defn obj-to-map4 [obj &amp; methods]\n  (obj-to-map obj (into {} (for [k methods] [(keyword k) (str k)]))))\n\n; usage\n\n(obj-to-map &quot;hello&quot; {:len &quot;length&quot; :st &quot;toString&quot;})     ; =&gt; {:len 5, :st hello}\n\n(obj-to-map2 &quot;hello&quot; :len &quot;length&quot; :st &quot;toString&quot;)      ; =&gt; {:st hello, :len 5}\n\n(obj-to-map3 &quot;hello&quot; &quot;length&quot; &quot;toString&quot;)               ; =&gt; {:length 5, :toString hello}\n\n(obj-to-map4 &quot;hello&quot; 'length 'toString)                 ; =&gt; {:length 5, :toString hello}\n</code></pre>\n<p>Docs: <a href=\"https://cljs.github.io/api/cljs.core/update-vals\" rel=\"nofollow noreferrer\">update-vals</a></p>\n"}],"owner":{"account_id":4127642,"reputation":1279,"user_id":3386328,"accept_rate":100,"display_name":"tgrrr"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":329,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":22215208,"answer_count":2,"score":3,"last_activity_date":1659612069,"creation_date":1394076096,"question_id":22214175,"body_markdown":"I&#39;m new to Clojure and have created a simple macro to call certain methods on a Java class and return results into a Clojure map and this all works fine.  (Also i&#39;m aware of the `bean` function however the classes I&#39;m using aren&#39;t beans).\r\n\r\nMy question is in regard to the calling code.  Is it better form to pass the Java &#39;methods&#39; as symbols?  \r\n\r\nI&#39;m not even sure what type `.toString` is at the moment (in the calling code)? It all works but not sure its idiomatic Clojure.\r\n\r\n    (defmacro obj-to-map \r\n      [obj &amp; body]\r\n      (let [afn (fn [[method kw]]\r\n                  `(~kw (~method ~obj)))]\r\n      `(assoc {} ~@(mapcat afn (partition 2 body)))))\r\n\r\n    (obj-to-map &quot;hello&quot; .length :length .toString :value)  \r\n    \r\n    =&gt;  {:value &quot;hello&quot;, :length 5}\r\n\r\n\r\n","title":"Convert Java object methods call results to Clojure map","body":"<p>I'm new to Clojure and have created a simple macro to call certain methods on a Java class and return results into a Clojure map and this all works fine.  (Also i'm aware of the <code>bean</code> function however the classes I'm using aren't beans).</p>\n\n<p>My question is in regard to the calling code.  Is it better form to pass the Java 'methods' as symbols?  </p>\n\n<p>I'm not even sure what type <code>.toString</code> is at the moment (in the calling code)? It all works but not sure its idiomatic Clojure.</p>\n\n<pre><code>(defmacro obj-to-map \n  [obj &amp; body]\n  (let [afn (fn [[method kw]]\n              `(~kw (~method ~obj)))]\n  `(assoc {} ~@(mapcat afn (partition 2 body)))))\n\n(obj-to-map \"hello\" .length :length .toString :value)  \n\n=&gt;  {:value \"hello\", :length 5}\n</code></pre>\n"},{"tags":["java","spring-boot","elasticsearch"],"comments":[{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":1,"creation_date":1659609843,"post_id":73234444,"comment_id":129337632,"body_markdown":"Try `&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&quot;` instead of `&quot;M/d/yyyy hh:mm:sss&quot;`, which does not match at all starting with a single-digit month and day of month separated by slashes.","body":"Try <code>&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&quot;</code> instead of <code>&quot;M&#47;d&#47;yyyy hh:mm:sss&quot;</code>, which does not match at all starting with a single-digit month and day of month separated by slashes."},{"owner":{"account_id":12037792,"reputation":1783,"user_id":8805742,"display_name":"mahfuj asif"},"score":1,"creation_date":1659611142,"post_id":73234444,"comment_id":129338115,"body_markdown":"Your pattern works. Sorry i pasted wrong pattern, I have updated my question","body":"Your pattern works. Sorry i pasted wrong pattern, I have updated my question"}],"answers":[{"tags":[],"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659611835,"creation_date":1659611835,"answer_id":73234973,"question_id":73234444,"body_markdown":"The `&quot;format&quot;` pattern in your JSON definition is not matching the one of `ISO_LOCAL_DATE_TIME` because it…\r\n\r\n - does not include a `T` between date and time of day and\r\n - contains 3 `s`, which would (possibly inpredictably) produce a three-digit value for seconds of minute, though those are limited to 59\r\n - does not contain any symbol that outputs a fraction of second (should be `S`)\r\n - uses lower-case symbols for hour of day, which is for 12-hour format and would require `AM` or `PM` somewhere in the output in order to be precise\r\n\r\nUse this pattern instead:\r\n\r\n```json\r\n&quot;action_time&quot;: {\r\n    &quot;type&quot;: &quot;date&quot;,\r\n    &quot;format&quot;: &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&quot;\r\n}\r\n```\r\n\r\nYou can read more about those pattern symbols in [the JavaDocs of `DateTimeFormatter`](https://docs.oracle.com/javase/9/docs/api/java/time/format/DateTimeFormatter.html) (here Java 9).","title":"Elasticsearch equivalent date pattern for java ISO_LOCAL_DATE_TIME","body":"<p>The <code>&quot;format&quot;</code> pattern in your JSON definition is not matching the one of <code>ISO_LOCAL_DATE_TIME</code> because it…</p>\n<ul>\n<li>does not include a <code>T</code> between date and time of day and</li>\n<li>contains 3 <code>s</code>, which would (possibly inpredictably) produce a three-digit value for seconds of minute, though those are limited to 59</li>\n<li>does not contain any symbol that outputs a fraction of second (should be <code>S</code>)</li>\n<li>uses lower-case symbols for hour of day, which is for 12-hour format and would require <code>AM</code> or <code>PM</code> somewhere in the output in order to be precise</li>\n</ul>\n<p>Use this pattern instead:</p>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;action_time&quot;: {\n    &quot;type&quot;: &quot;date&quot;,\n    &quot;format&quot;: &quot;yyyy-MM-dd'T'HH:mm:ss.SSS&quot;\n}\n</code></pre>\n<p>You can read more about those pattern symbols in <a href=\"https://docs.oracle.com/javase/9/docs/api/java/time/format/DateTimeFormatter.html\" rel=\"nofollow noreferrer\">the JavaDocs of <code>DateTimeFormatter</code></a> (here Java 9).</p>\n"}],"owner":{"account_id":12037792,"reputation":1783,"user_id":8805742,"display_name":"mahfuj asif"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73234973,"answer_count":1,"score":1,"last_activity_date":1659611835,"creation_date":1659609538,"question_id":73234444,"body_markdown":"In my pojo there is a LocalDateTime field which is formated with \r\n```\r\nDateTimeFormatter.ISO_LOCAL_DATE_TIME\r\n```\r\n\r\nI have to save the pojo in elasticsearch. What should be the relevant string pattern of this field in elasticsearch?\r\nI tried the following\r\n```\r\n&quot;action_time&quot;: {\r\n    &quot;type&quot;: &quot;date&quot;,\r\n    &quot;format&quot;: &quot;yyyy-MM-dd hh:mm:sss&quot;\r\n}\r\n```\r\n\r\nWhen I print the field with ISO_LOCAL_DATE_TIME format in java I get this output\r\n```\r\n2022-08-04T16:29:09.866\r\n```\r\n\r\nWhat should be the proper pattern here?\r\n","title":"Elasticsearch equivalent date pattern for java ISO_LOCAL_DATE_TIME","body":"<p>In my pojo there is a LocalDateTime field which is formated with</p>\n<pre><code>DateTimeFormatter.ISO_LOCAL_DATE_TIME\n</code></pre>\n<p>I have to save the pojo in elasticsearch. What should be the relevant string pattern of this field in elasticsearch?\nI tried the following</p>\n<pre><code>&quot;action_time&quot;: {\n    &quot;type&quot;: &quot;date&quot;,\n    &quot;format&quot;: &quot;yyyy-MM-dd hh:mm:sss&quot;\n}\n</code></pre>\n<p>When I print the field with ISO_LOCAL_DATE_TIME format in java I get this output</p>\n<pre><code>2022-08-04T16:29:09.866\n</code></pre>\n<p>What should be the proper pattern here?</p>\n"},{"tags":["java","java-8","functional-interface"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1644585668,"post_id":71080761,"comment_id":125651998,"body_markdown":"Aside from not compiling, this function doesn&#39;t make type sense: to chain functions, you have to be able to pass the output of one as the input to the next. This means that `Input` and `Output` have to be the same types.","body":"Aside from not compiling, this function doesn&#39;t make type sense: to chain functions, you have to be able to pass the output of one as the input to the next. This means that <code>Input</code> and <code>Output</code> have to be the same types."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":1,"creation_date":1644585681,"post_id":71080761,"comment_id":125652006,"body_markdown":"I think that you&#39;ll run into generic type mismatches very quickly. That&#39;s because the result of the first function is the input to the second, so these need to match. For two functions you need not one but three generic types: `&lt;I, M, O&gt; O flow(I input, Function&lt;I, M&gt; f1, Function&lt;M, O&gt; f2)`. The more functions, the more generic types are needed. My advice: just chain the functions where they come from, because at that point their generic types are still known.","body":"I think that you&#39;ll run into generic type mismatches very quickly. That&#39;s because the result of the first function is the input to the second, so these need to match. For two functions you need not one but three generic types: <code>&lt;I, M, O&gt; O flow(I input, Function&lt;I, M&gt; f1, Function&lt;M, O&gt; f2)</code>. The more functions, the more generic types are needed. My advice: just chain the functions where they come from, because at that point their generic types are still known."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1644585704,"post_id":71080761,"comment_id":125652016,"body_markdown":"&quot;just chain the functions where they come from&quot; yes, this. But then, if you&#39;re composing the functions outside this method, you may as well also _apply_ the composed function outside this method, making it redundant.","body":"&quot;just chain the functions where they come from&quot; yes, this. But then, if you&#39;re composing the functions outside this method, you may as well also <i>apply</i> the composed function outside this method, making it redundant."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1644585775,"post_id":71080761,"comment_id":125652041,"body_markdown":"This method also doesn&#39;t make sense because you would end up with `outputFunction` being the composition of the penultimate and last function (ignoring the off-by-one indexing error), rather than a chain of all the functions.","body":"This method also doesn&#39;t make sense because you would end up with <code>outputFunction</code> being the composition of the penultimate and last function (ignoring the off-by-one indexing error), rather than a chain of all the functions."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1644585833,"post_id":71080761,"comment_id":125652071,"body_markdown":"It is not possible to chain a bunch of `Function&lt;Input, Output&gt;` together. Think about it: the first function would produce `Output`, and the second function would need to take in an `Output` (not `Input`!) for this to work! In general, it is possible to chain `Function&lt;T1, T2&gt;`, `Function&lt;T2, T3&gt;`, `Function&lt;T3, T4&gt;` and so on together to produce `Function&lt;T1, Tn&gt;`, but it is not possible to chain a list of functions of the same type `Function&lt;T1, T2&gt;`, unless `T1 ` and `T2` are the same.","body":"It is not possible to chain a bunch of <code>Function&lt;Input, Output&gt;</code> together. Think about it: the first function would produce <code>Output</code>, and the second function would need to take in an <code>Output</code> (not <code>Input</code>!) for this to work! In general, it is possible to chain <code>Function&lt;T1, T2&gt;</code>, <code>Function&lt;T2, T3&gt;</code>, <code>Function&lt;T3, T4&gt;</code> and so on together to produce <code>Function&lt;T1, Tn&gt;</code>, but it is not possible to chain a list of functions of the same type <code>Function&lt;T1, T2&gt;</code>, unless <code>T1 </code> and <code>T2</code> are the same."},{"owner":{"account_id":3711024,"reputation":23,"user_id":3088368,"display_name":"Mohibul Hassan"},"score":0,"creation_date":1644585849,"post_id":71080761,"comment_id":125652076,"body_markdown":"@AndyTurner its an example what i want to achieve.","body":"@AndyTurner its an example what i want to achieve."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1644585875,"post_id":71080761,"comment_id":125652089,"body_markdown":"@MohibulHassan I can only go off what you show us.","body":"@MohibulHassan I can only go off what you show us."},{"owner":{"account_id":3711024,"reputation":23,"user_id":3088368,"display_name":"Mohibul Hassan"},"score":0,"creation_date":1644585929,"post_id":71080761,"comment_id":125652111,"body_markdown":"@RobSpoor thank you. That&#39;s a nice advice","body":"@RobSpoor thank you. That&#39;s a nice advice"},{"owner":{"account_id":3711024,"reputation":23,"user_id":3088368,"display_name":"Mohibul Hassan"},"score":0,"creation_date":1644586038,"post_id":71080761,"comment_id":125652167,"body_markdown":"@Sweeper thank you for the explanation. Now i understand clearly","body":"@Sweeper thank you for the explanation. Now i understand clearly"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1644591516,"post_id":71080761,"comment_id":125654322,"body_markdown":"It&#39;s not possible with functions, but the overall idea isn&#39;t absolutely pointless. You can combine in such a way unary operators, predicates, even consumers.","body":"It&#39;s not possible with functions, but the overall idea isn&#39;t absolutely pointless. You can combine in such a way unary operators, predicates, even consumers."}],"answers":[{"tags":[],"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659611756,"creation_date":1659611756,"answer_id":73234951,"question_id":71080761,"body_markdown":"As already pointed out in the comments, there is not an easy way to produce chained functions without specifically defining the input-output type for each of them and keeping the solution flexible.\r\n\r\nA solution asks for a compromise by keeping the `Function` raw that would not enforce the types at the compile time and does not prevent runtime errors.\r\n\r\n```java\r\nprivate static Object flow(Object input, Function... functions) {\r\n\tObject temp = input;\r\n\tfor (Function function : functions) {\r\n\t\ttemp = function.apply(temp);\r\n\t}\r\n\treturn temp;\r\n}\r\n```\r\nUsage:\r\n```java\r\nfinal int input = 1;\r\nfinal String result = (String) flow(input,\r\n\t(Function&lt;Integer, Integer&gt;) integer -&gt; integer * 10,\r\n\tinteger -&gt; ((double) integer / 4),\r\n\tdecimal -&gt; &quot;c&quot; + decimal,\r\n\tstring -&gt; List.of(&quot;a&quot;, &quot;b&quot;, string),\r\n\t(Function&lt;List&lt;Double&gt;, Set&lt;Double&gt;&gt;) HashSet::new,\r\n\t(Function&lt;Set&lt;String&gt;, String&gt;) set -&gt; String.join(&quot;-&quot;, set)\r\n);\r\n\r\n```\r\nResult:\r\n&gt; ```\r\n&gt; a-b-c2.5\r\n&gt; ```","title":"looping / chaining multiple Function.applyThen() or Function.apply() using for or for-each loop","body":"<p>As already pointed out in the comments, there is not an easy way to produce chained functions without specifically defining the input-output type for each of them and keeping the solution flexible.</p>\n<p>A solution asks for a compromise by keeping the <code>Function</code> raw that would not enforce the types at the compile time and does not prevent runtime errors.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static Object flow(Object input, Function... functions) {\n    Object temp = input;\n    for (Function function : functions) {\n        temp = function.apply(temp);\n    }\n    return temp;\n}\n</code></pre>\n<p>Usage:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final int input = 1;\nfinal String result = (String) flow(input,\n    (Function&lt;Integer, Integer&gt;) integer -&gt; integer * 10,\n    integer -&gt; ((double) integer / 4),\n    decimal -&gt; &quot;c&quot; + decimal,\n    string -&gt; List.of(&quot;a&quot;, &quot;b&quot;, string),\n    (Function&lt;List&lt;Double&gt;, Set&lt;Double&gt;&gt;) HashSet::new,\n    (Function&lt;Set&lt;String&gt;, String&gt;) set -&gt; String.join(&quot;-&quot;, set)\n);\n\n</code></pre>\n<p>Result:</p>\n<blockquote>\n<pre><code>a-b-c2.5\n</code></pre>\n</blockquote>\n"}],"owner":{"account_id":3711024,"reputation":23,"user_id":3088368,"display_name":"Mohibul Hassan"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":496,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1659611756,"creation_date":1644585508,"question_id":71080761,"body_markdown":"i have a generic method that takes a var-args type Function and an input and i want to process the first Function and input then the output will be chained by `Function.apply(Function.apply(input))` or chained by `andThen()` like `Function.andThen(Function)` and the output function will take the input and process it.\r\n\r\n    private static &lt;Input,Output&gt; Output flow(Input input, Function&lt;Input,Output&gt;... functions) {\r\n        Function&lt;Input,Output&gt; outputFunction;\r\n        for (int i =0; i&lt;functions.length; i++) {\r\n            outputFunction = functions[i].andThen((Function&lt;? super Output, ? extends Output&gt;) functions[i+1]);\r\n        }\r\n    }\r\n\r\nQ1: is it possible using function.apply(input);\r\n\r\nQ2: is it possible using function.andThen(function);\r\n\r\nQ3: any other solution available for this same problem?\r\n\r\nQ4: what would be the best practice if i want to solve this type of chaining issue?","title":"looping / chaining multiple Function.applyThen() or Function.apply() using for or for-each loop","body":"<p>i have a generic method that takes a var-args type Function and an input and i want to process the first Function and input then the output will be chained by <code>Function.apply(Function.apply(input))</code> or chained by <code>andThen()</code> like <code>Function.andThen(Function)</code> and the output function will take the input and process it.</p>\n<pre><code>private static &lt;Input,Output&gt; Output flow(Input input, Function&lt;Input,Output&gt;... functions) {\n    Function&lt;Input,Output&gt; outputFunction;\n    for (int i =0; i&lt;functions.length; i++) {\n        outputFunction = functions[i].andThen((Function&lt;? super Output, ? extends Output&gt;) functions[i+1]);\n    }\n}\n</code></pre>\n<p>Q1: is it possible using function.apply(input);</p>\n<p>Q2: is it possible using function.andThen(function);</p>\n<p>Q3: any other solution available for this same problem?</p>\n<p>Q4: what would be the best practice if i want to solve this type of chaining issue?</p>\n"},{"tags":["java","spring-boot","file-upload","azure-functions"],"answers":[{"tags":[],"owner":{"account_id":21648949,"reputation":1274,"user_id":15969858,"display_name":"RKM"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659611719,"creation_date":1659611719,"answer_id":73234938,"question_id":73173368,"body_markdown":"    Is there any way to get the content without headers using `httpRequestMessage` in java? \r\n\r\n\r\nNo, we cannot get only the content without headers using the `httpRequestMessage` in java.\r\n\r\nThere is no method inside `httpRequestMessage` interface which can be used to remove the headers present inside the **RequestBody**, But there are few methods by using which we can get only the **headers** present inside the HTTP Request.\r\n\r\nRefer this [document](https://learn.microsoft.com/en-in/java/api/com.microsoft.azure.functions.httprequestmessage?view=azure-java-stable#methods) for more information.","title":"How to get actual content/body from httpRequestMessage in java azure function","body":"<pre><code>Is there any way to get the content without headers using `httpRequestMessage` in java? \n</code></pre>\n<p>No, we cannot get only the content without headers using the <code>httpRequestMessage</code> in java.</p>\n<p>There is no method inside <code>httpRequestMessage</code> interface which can be used to remove the headers present inside the <strong>RequestBody</strong>, But there are few methods by using which we can get only the <strong>headers</strong> present inside the HTTP Request.</p>\n<p>Refer this <a href=\"https://learn.microsoft.com/en-in/java/api/com.microsoft.azure.functions.httprequestmessage?view=azure-java-stable#methods\" rel=\"nofollow noreferrer\">document</a> for more information.</p>\n"}],"owner":{"account_id":21121216,"reputation":41,"user_id":15527204,"display_name":"Shiva Rena"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":573,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659611719,"creation_date":1659162503,"question_id":73173368,"body_markdown":"I am developing one java azure function to upload files or images\r\n\r\n    @FunctionName(&quot;upload&quot;)\r\n    public HttpResponseMessage uploadDocuments(@HttpTrigger(name = &quot;req&quot;, methods = {\r\n    HttpMethod.POST }, authLevel = AuthorizationLevel.ANONYMOUS) HttpRequestMessage&lt;String&gt; request,final ExecutionContext context){\r\n    // Get request body \r\n    String reqBody = request.getBody().get(); \r\n    }\r\n\r\n//Here i am getting reqBody like this it inclued headers with content\r\n\r\n    ----------------------------493134179411177203860920\r\n    Content-Disposition: form-data; name=&quot;myfile[]&quot;; filename=&quot;newone.json&quot;\r\n    Content-Type: application/json\r\n    \r\n    {\r\n    &quot;name&quot;:&quot;jhon&quot;\r\n     &quot;age&quot;:23\r\n    }\r\n    \r\n    ----------------------------493134179411177203860920--\r\n\r\nActual file content\r\n   \r\n\r\n    {\r\n        &quot;name&quot;:&quot;jhon&quot;\r\n         &quot;age&quot;:23\r\n        }\r\n\r\nQuestion: is there any way to get the content without headers using httpRequestMessage in java ?\r\n\r\n\r\n","title":"How to get actual content/body from httpRequestMessage in java azure function","body":"<p>I am developing one java azure function to upload files or images</p>\n<pre><code>@FunctionName(&quot;upload&quot;)\npublic HttpResponseMessage uploadDocuments(@HttpTrigger(name = &quot;req&quot;, methods = {\nHttpMethod.POST }, authLevel = AuthorizationLevel.ANONYMOUS) HttpRequestMessage&lt;String&gt; request,final ExecutionContext context){\n// Get request body \nString reqBody = request.getBody().get(); \n}\n</code></pre>\n<p>//Here i am getting reqBody like this it inclued headers with content</p>\n<pre><code>----------------------------493134179411177203860920\nContent-Disposition: form-data; name=&quot;myfile[]&quot;; filename=&quot;newone.json&quot;\nContent-Type: application/json\n\n{\n&quot;name&quot;:&quot;jhon&quot;\n &quot;age&quot;:23\n}\n\n----------------------------493134179411177203860920--\n</code></pre>\n<p>Actual file content</p>\n<pre><code>{\n    &quot;name&quot;:&quot;jhon&quot;\n     &quot;age&quot;:23\n    }\n</code></pre>\n<p>Question: is there any way to get the content without headers using httpRequestMessage in java ?</p>\n"},{"tags":["java","groovy","configuration","logback","slf4j"],"owner":{"account_id":11664426,"reputation":41,"user_id":8541544,"display_name":"Kristaps Štrāls"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":364,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1659611696,"creation_date":1659593397,"question_id":73231044,"body_markdown":"Working a project update, we updated groovy dependency for our java (gradle) project to version 4.0.4. Now, however, our **logback.groovy** configuration is no longer working.\r\nThe issue is that the appender property closures no longer seem to apply to the property that we are configuring (eg. **PatternLayoutEncoder**), but the appender itself.\r\n\r\nversions:\r\n\r\n- logback-classic: **ch.qos.logback:logback-classic:1.2.7**\r\n- groovy: **org.apache.groovy:groovy-all:4.0.4**\r\n\r\nprevious groovy version was `2.5.x`.\r\n\r\nSimple logback.groovy file:\r\n\r\n```groovy\r\nstatusListener(OnConsoleStatusListener)\r\n\r\nappender(&quot;CONSOLE&quot;, ConsoleAppender) {\r\n\tencoder(PatternLayoutEncoder) {\r\n\t\tpattern = &quot;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&quot;\r\n\t}\r\n}\r\n\r\nroot(DEBUG, [&quot;CONSOLE&quot;])\r\n```\r\n\r\nerror log:\r\n\r\n```\r\n09:02:39,743 |-INFO in ch.qos.logback.classic.gaffer.ConfigurationDelegate@79f227a9 - Added status listener of type [ch.qos.logback.core.status.OnConsoleStatusListener]\r\n09:02:39,810 |-INFO in ch.qos.logback.classic.gaffer.ConfigurationDelegate@79f227a9 - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]\r\n09:02:39,812 |-INFO in ch.qos.logback.classic.gaffer.ConfigurationDelegate@79f227a9 - Naming appender as [CONSOLE]\r\n09:02:39,913 |-ERROR in ch.qos.logback.classic.gaffer.AppenderDelegate@27e32fe4 - Appender [CONSOLE] of type [ch.qos.logback.core.ConsoleAppender] has no appplicable [pattern] property \r\nFailed to instantiate [ch.qos.logback.classic.LoggerContext]\r\nReported exception:\r\njava.lang.ClassCastException: class java.lang.String cannot be cast to class java.util.Iterator (java.lang.String and java.util.Iterator are in module java.base of loader &#39;bootstrap&#39;)\r\n\tat com.sun.proxy.$Proxy17.iterator(Unknown Source)\r\n\tat org.codehaus.groovy.runtime.DefaultGroovyMethods.toList(DefaultGroovyMethods.java:3293)\r\n\tat org.codehaus.groovy.runtime.DefaultGroovyMethods.asCollection(DefaultGroovyMethods.java:11550)\r\n\tat org.codehaus.groovy.runtime.DefaultGroovyMethods.minus(DefaultGroovyMethods.java:13702)\r\n\tat org.codehaus.groovy.runtime.DefaultGroovyMethods.minus(DefaultGroovyMethods.java:13609)\r\n\tat org.codehaus.groovy.runtime.dgm$523.doMethodInvoke(Unknown Source)\r\n\tat org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoMetaMethodSiteNoUnwrap.invoke(PojoMetaMethodSite.java:234)\r\n\tat org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:57)\r\n\tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)\r\n\tat ch.qos.logback.classic.gaffer.ComponentDelegate.analyzeArgs(ComponentDelegate.groovy:111)\r\n\tat ch.qos.logback.classic.gaffer.ComponentDelegate$analyzeArgs.callCurrent(Unknown Source)\r\n\tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:49)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:185)\r\n\tat ch.qos.logback.classic.gaffer.ComponentDelegate.methodMissing(ComponentDelegate.groovy:49)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:343)\r\n\tat groovy.lang.MetaClassImpl.invokeMissingMethod(MetaClassImpl.java:926)\r\n\tat groovy.lang.MetaClassImpl.invokePropertyOrMissing(MetaClassImpl.java:1451)\r\n\tat groovy.lang.MetaClassImpl.doInvokeMethod(MetaClassImpl.java:1373)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1103)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1009)\r\n\tat org.codehaus.groovy.runtime.InvokerHelper.invokePogoMethod(InvokerHelper.java:610)\r\n\tat org.codehaus.groovy.runtime.InvokerHelper.invokeMethod(InvokerHelper.java:593)\r\n\tat org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeOnDelegationObjects(ClosureMetaClass.java:391)\r\n\tat org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:330)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1009)\r\n\tat org.codehaus.groovy.vmplugin.v8.IndyInterface.fromCache(IndyInterface.java:318)\r\n\tat Script1$_run_closure1.doCall(Script1.groovy:4)\r\n\tat Script1$_run_closure1.doCall(Script1.groovy)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:343)\r\n\tat groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:328)\r\n\tat org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:279)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1009)\r\n\tat org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.call(PogoMetaClassSite.java:39)\r\n\tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)\r\n\tat ch.qos.logback.classic.gaffer.ConfigurationDelegate.appender(ConfigurationDelegate.groovy:143)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:343)\r\n\tat org.codehaus.groovy.runtime.metaclass.MixinInstanceMetaMethod.invoke(MixinInstanceMetaMethod.java:61)\r\n\tat groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:328)\r\n\tat org.codehaus.groovy.vmplugin.v8.IndyInterface.fromCache(IndyInterface.java:318)\r\n\tat Script1.run(Script1.groovy:3)\r\n\tat Script1$run.call(Unknown Source)\r\n\tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)\r\n\tat ch.qos.logback.classic.gaffer.GafferConfigurator.run(GafferConfigurator.groovy:77)\r\n\tat ch.qos.logback.classic.gaffer.GafferConfigurator$run.callCurrent(Unknown Source)\r\n\tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:49)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:185)\r\n\tat ch.qos.logback.classic.gaffer.GafferConfigurator.run(GafferConfigurator.groovy:44)\r\n\tat ch.qos.logback.classic.gaffer.GafferUtil.runGafferConfiguratorOn(GafferUtil.java:43)\r\n\tat ch.qos.logback.classic.util.ContextInitializer.configureByResource(ContextInitializer.java:67)\r\n\tat ch.qos.logback.classic.util.ContextInitializer.autoConfig(ContextInitializer.java:150)\r\n\tat org.slf4j.impl.StaticLoggerBinder.init(StaticLoggerBinder.java:84)\r\n\tat org.slf4j.impl.StaticLoggerBinder.&lt;clinit&gt;(StaticLoggerBinder.java:55)\r\n\tat org.slf4j.LoggerFactory.bind(LoggerFactory.java:150)\r\n\tat org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:124)\r\n\tat org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:417)\r\n\tat org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:362)\r\n\tat org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:388)\r\n```\r\n\r\nThis looks like the main error: `Appender [CONSOLE] of type [ch.qos.logback.core.ConsoleAppender] has no appplicable [pattern]`, though `java.lang.ClassCastException: class java.lang.String cannot be cast to class java.util.Iterator (java.lang.String and java.util.Iterator are in module java.base of loader &#39;bootstrap&#39;)` could be something else as well, I guess.\r\n\r\nXML configuration seems to work fine (and I know that groovy config is deprecated), but we have a ton of logback.groovy configuration files in various places and would like to use those for the time being, if possible...","title":"logback.groovy configuration not working after groovy update","body":"<p>Working a project update, we updated groovy dependency for our java (gradle) project to version 4.0.4. Now, however, our <strong>logback.groovy</strong> configuration is no longer working.\nThe issue is that the appender property closures no longer seem to apply to the property that we are configuring (eg. <strong>PatternLayoutEncoder</strong>), but the appender itself.</p>\n<p>versions:</p>\n<ul>\n<li>logback-classic: <strong>ch.qos.logback:logback-classic:1.2.7</strong></li>\n<li>groovy: <strong>org.apache.groovy:groovy-all:4.0.4</strong></li>\n</ul>\n<p>previous groovy version was <code>2.5.x</code>.</p>\n<p>Simple logback.groovy file:</p>\n<pre><code>statusListener(OnConsoleStatusListener)\n\nappender(&quot;CONSOLE&quot;, ConsoleAppender) {\n    encoder(PatternLayoutEncoder) {\n        pattern = &quot;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&quot;\n    }\n}\n\nroot(DEBUG, [&quot;CONSOLE&quot;])\n</code></pre>\n<p>error log:</p>\n<pre><code>09:02:39,743 |-INFO in ch.qos.logback.classic.gaffer.ConfigurationDelegate@79f227a9 - Added status listener of type [ch.qos.logback.core.status.OnConsoleStatusListener]\n09:02:39,810 |-INFO in ch.qos.logback.classic.gaffer.ConfigurationDelegate@79f227a9 - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]\n09:02:39,812 |-INFO in ch.qos.logback.classic.gaffer.ConfigurationDelegate@79f227a9 - Naming appender as [CONSOLE]\n09:02:39,913 |-ERROR in ch.qos.logback.classic.gaffer.AppenderDelegate@27e32fe4 - Appender [CONSOLE] of type [ch.qos.logback.core.ConsoleAppender] has no appplicable [pattern] property \nFailed to instantiate [ch.qos.logback.classic.LoggerContext]\nReported exception:\njava.lang.ClassCastException: class java.lang.String cannot be cast to class java.util.Iterator (java.lang.String and java.util.Iterator are in module java.base of loader 'bootstrap')\n    at com.sun.proxy.$Proxy17.iterator(Unknown Source)\n    at org.codehaus.groovy.runtime.DefaultGroovyMethods.toList(DefaultGroovyMethods.java:3293)\n    at org.codehaus.groovy.runtime.DefaultGroovyMethods.asCollection(DefaultGroovyMethods.java:11550)\n    at org.codehaus.groovy.runtime.DefaultGroovyMethods.minus(DefaultGroovyMethods.java:13702)\n    at org.codehaus.groovy.runtime.DefaultGroovyMethods.minus(DefaultGroovyMethods.java:13609)\n    at org.codehaus.groovy.runtime.dgm$523.doMethodInvoke(Unknown Source)\n    at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoMetaMethodSiteNoUnwrap.invoke(PojoMetaMethodSite.java:234)\n    at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:57)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)\n    at ch.qos.logback.classic.gaffer.ComponentDelegate.analyzeArgs(ComponentDelegate.groovy:111)\n    at ch.qos.logback.classic.gaffer.ComponentDelegate$analyzeArgs.callCurrent(Unknown Source)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:49)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:185)\n    at ch.qos.logback.classic.gaffer.ComponentDelegate.methodMissing(ComponentDelegate.groovy:49)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:343)\n    at groovy.lang.MetaClassImpl.invokeMissingMethod(MetaClassImpl.java:926)\n    at groovy.lang.MetaClassImpl.invokePropertyOrMissing(MetaClassImpl.java:1451)\n    at groovy.lang.MetaClassImpl.doInvokeMethod(MetaClassImpl.java:1373)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1103)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1009)\n    at org.codehaus.groovy.runtime.InvokerHelper.invokePogoMethod(InvokerHelper.java:610)\n    at org.codehaus.groovy.runtime.InvokerHelper.invokeMethod(InvokerHelper.java:593)\n    at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeOnDelegationObjects(ClosureMetaClass.java:391)\n    at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:330)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1009)\n    at org.codehaus.groovy.vmplugin.v8.IndyInterface.fromCache(IndyInterface.java:318)\n    at Script1$_run_closure1.doCall(Script1.groovy:4)\n    at Script1$_run_closure1.doCall(Script1.groovy)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:343)\n    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:328)\n    at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:279)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1009)\n    at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.call(PogoMetaClassSite.java:39)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)\n    at ch.qos.logback.classic.gaffer.ConfigurationDelegate.appender(ConfigurationDelegate.groovy:143)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:343)\n    at org.codehaus.groovy.runtime.metaclass.MixinInstanceMetaMethod.invoke(MixinInstanceMetaMethod.java:61)\n    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:328)\n    at org.codehaus.groovy.vmplugin.v8.IndyInterface.fromCache(IndyInterface.java:318)\n    at Script1.run(Script1.groovy:3)\n    at Script1$run.call(Unknown Source)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)\n    at ch.qos.logback.classic.gaffer.GafferConfigurator.run(GafferConfigurator.groovy:77)\n    at ch.qos.logback.classic.gaffer.GafferConfigurator$run.callCurrent(Unknown Source)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:49)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:185)\n    at ch.qos.logback.classic.gaffer.GafferConfigurator.run(GafferConfigurator.groovy:44)\n    at ch.qos.logback.classic.gaffer.GafferUtil.runGafferConfiguratorOn(GafferUtil.java:43)\n    at ch.qos.logback.classic.util.ContextInitializer.configureByResource(ContextInitializer.java:67)\n    at ch.qos.logback.classic.util.ContextInitializer.autoConfig(ContextInitializer.java:150)\n    at org.slf4j.impl.StaticLoggerBinder.init(StaticLoggerBinder.java:84)\n    at org.slf4j.impl.StaticLoggerBinder.&lt;clinit&gt;(StaticLoggerBinder.java:55)\n    at org.slf4j.LoggerFactory.bind(LoggerFactory.java:150)\n    at org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:124)\n    at org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:417)\n    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:362)\n    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:388)\n</code></pre>\n<p>This looks like the main error: <code>Appender [CONSOLE] of type [ch.qos.logback.core.ConsoleAppender] has no appplicable [pattern]</code>, though <code>java.lang.ClassCastException: class java.lang.String cannot be cast to class java.util.Iterator (java.lang.String and java.util.Iterator are in module java.base of loader 'bootstrap')</code> could be something else as well, I guess.</p>\n<p>XML configuration seems to work fine (and I know that groovy config is deprecated), but we have a ton of logback.groovy configuration files in various places and would like to use those for the time being, if possible...</p>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":8781643,"reputation":25950,"user_id":6565093,"accept_rate":47,"display_name":"pvpkiran"},"score":4,"creation_date":1518010357,"post_id":48665084,"comment_id":84327603,"body_markdown":"You need to give a reducingfunction indicating what needs to be done in case of key conflicts","body":"You need to give a reducingfunction indicating what needs to be done in case of key conflicts"},{"owner":{"account_id":2134379,"reputation":7299,"user_id":1894517,"accept_rate":79,"display_name":"Vinay Prajapati"},"score":0,"creation_date":1518010512,"post_id":48665084,"comment_id":84327713,"body_markdown":"Can you please post here something working or any reference links etc?","body":"Can you please post here something working or any reference links etc?"},{"owner":{"account_id":11866266,"reputation":89,"user_id":8683738,"display_name":"Deep Roy"},"score":0,"creation_date":1659611084,"post_id":48665084,"comment_id":129338095,"body_markdown":"nested groupingBy questions and solutions:","body":"nested groupingBy questions and solutions:"}],"answers":[{"tags":[],"owner":{"account_id":2111403,"reputation":33698,"user_id":1876620,"accept_rate":94,"display_name":"fps"},"down_vote_count":0,"up_vote_count":26,"is_accepted":true,"score":26,"last_activity_date":1518023906,"creation_date":1518010572,"answer_id":48665228,"question_id":48665084,"body_markdown":"&lt;h2&gt;Abstract / Brief discussion&lt;/h2&gt;\r\n\r\nHaving a map of maps of maps is questionable when seen from an object-oriented prespective, as it might seem that you&#39;re lacking some abstraction (i.e. you could create a class `Result` that encapsulates the results of the nested grouping). However, it&#39;s perfectly reasonable when considered exclusively from a pure data-oriented approach. \r\n\r\nSo here I present two approaches: the first one is purely data-oriented (with nested `groupingBy` calls, hence nested maps), while the second one is more OO-friendly and makes a better job at abstracting the grouping criteria. Just pick the one which better represents your intentions and coding standards/traditions and, more importantly, the one you most like.\r\n\r\n\r\n----------\r\n\r\n\r\n&lt;h2&gt;Data-oriented approach&lt;/h2&gt;\r\n\r\nFor the first approach, you can just nest the `groupingBy` calls:\r\n\r\n    Map&lt;String, Map&lt;String, Map&lt;String, List&lt;Booker&gt;&gt;&gt;&gt; result = list.stream()\r\n        .collect(Collectors.groupingBy(ProductDto::getStatus,\r\n                 Collectors.groupingBy(ProductDto::getCategory,\r\n                 Collectors.groupingBy(ProductDto::getType,\r\n                     Collectors.mapping(\r\n                             ProductDto::getBooker,\r\n                             Collectors.toList())))));\r\n\r\nAs you see, the result is a `Map&lt;String, Map&lt;String, Map&lt;String, List&lt;Booker&gt;&gt;&gt;&gt;`. This is because there might be more than one `ProductDto` instance with the same `(status, category, type)` combination.\r\n\r\nAlso, as you need `Booker` instances instead of `ProductDto` instances, I&#39;m *adapting* the last `groupingBy` collector so that it returns `Booker`s instead of `productDto`s. \r\n\r\n\r\n----------\r\n\r\n\r\n&lt;h3&gt;About &lt;em&gt;reduction&lt;/em&gt;&lt;/h3&gt;\r\n\r\nIf you need to have only one `Booker` instance instead of a `List&lt;Booker&gt;` as the value of the innermost map, you would need a way to *reduce* `Booker` instances, i.e. convert many instances into one by means of an associative operation (accumulating the sum of some attribute being the most common one).\r\n\r\n----------\r\n\r\n&lt;h2&gt;Object-oriented friendly approach&lt;/h2&gt;\r\n\r\nFor the second approach, having a `Map&lt;String, Map&lt;String, Map&lt;String, List&lt;Booker&gt;&gt;&gt;&gt;` might be seen as bad practice or even as pure evil. So, instead of having a map of maps of maps of lists, you could have only one map of lists whose keys represent the combination of the 3 properties you want to group by. \r\n\r\nThe easiest way to do this is to use a `List` as the key, as lists already provide `hashCode` and `equals` implementations:\r\n\r\n    Map&lt;List&lt;String&gt;, List&lt;Booker&gt;&gt; result = list.stream()\r\n        .collect(Collectors.groupingBy(\r\n             dto -&gt; Arrays.asList(dto.getStatus(), dto.getCategory(), dto.getType()),\r\n             Collectors.mapping(\r\n                     ProductDto::getBooker,\r\n                     Collectors.toList())))));\r\n\r\nIf you are on Java 9+, you can use [`List.of`][1] instead of `Arrays.asList`, as `List.of` returns a fully immutable and highly optimized list.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/util/List.html#of-E-E-E-","title":"How to create a nested Map using Collectors.groupingBy?","body":"<h2>Abstract / Brief discussion</h2>\n\n<p>Having a map of maps of maps is questionable when seen from an object-oriented prespective, as it might seem that you're lacking some abstraction (i.e. you could create a class <code>Result</code> that encapsulates the results of the nested grouping). However, it's perfectly reasonable when considered exclusively from a pure data-oriented approach. </p>\n\n<p>So here I present two approaches: the first one is purely data-oriented (with nested <code>groupingBy</code> calls, hence nested maps), while the second one is more OO-friendly and makes a better job at abstracting the grouping criteria. Just pick the one which better represents your intentions and coding standards/traditions and, more importantly, the one you most like.</p>\n\n<hr>\n\n<h2>Data-oriented approach</h2>\n\n<p>For the first approach, you can just nest the <code>groupingBy</code> calls:</p>\n\n<pre><code>Map&lt;String, Map&lt;String, Map&lt;String, List&lt;Booker&gt;&gt;&gt;&gt; result = list.stream()\n    .collect(Collectors.groupingBy(ProductDto::getStatus,\n             Collectors.groupingBy(ProductDto::getCategory,\n             Collectors.groupingBy(ProductDto::getType,\n                 Collectors.mapping(\n                         ProductDto::getBooker,\n                         Collectors.toList())))));\n</code></pre>\n\n<p>As you see, the result is a <code>Map&lt;String, Map&lt;String, Map&lt;String, List&lt;Booker&gt;&gt;&gt;&gt;</code>. This is because there might be more than one <code>ProductDto</code> instance with the same <code>(status, category, type)</code> combination.</p>\n\n<p>Also, as you need <code>Booker</code> instances instead of <code>ProductDto</code> instances, I'm <em>adapting</em> the last <code>groupingBy</code> collector so that it returns <code>Booker</code>s instead of <code>productDto</code>s. </p>\n\n<hr>\n\n<h3>About <em>reduction</em></h3>\n\n<p>If you need to have only one <code>Booker</code> instance instead of a <code>List&lt;Booker&gt;</code> as the value of the innermost map, you would need a way to <em>reduce</em> <code>Booker</code> instances, i.e. convert many instances into one by means of an associative operation (accumulating the sum of some attribute being the most common one).</p>\n\n<hr>\n\n<h2>Object-oriented friendly approach</h2>\n\n<p>For the second approach, having a <code>Map&lt;String, Map&lt;String, Map&lt;String, List&lt;Booker&gt;&gt;&gt;&gt;</code> might be seen as bad practice or even as pure evil. So, instead of having a map of maps of maps of lists, you could have only one map of lists whose keys represent the combination of the 3 properties you want to group by. </p>\n\n<p>The easiest way to do this is to use a <code>List</code> as the key, as lists already provide <code>hashCode</code> and <code>equals</code> implementations:</p>\n\n<pre><code>Map&lt;List&lt;String&gt;, List&lt;Booker&gt;&gt; result = list.stream()\n    .collect(Collectors.groupingBy(\n         dto -&gt; Arrays.asList(dto.getStatus(), dto.getCategory(), dto.getType()),\n         Collectors.mapping(\n                 ProductDto::getBooker,\n                 Collectors.toList())))));\n</code></pre>\n\n<p>If you are on Java 9+, you can use <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/List.html#of-E-E-E-\" rel=\"noreferrer\"><code>List.of</code></a> instead of <code>Arrays.asList</code>, as <code>List.of</code> returns a fully immutable and highly optimized list.</p>\n"},{"tags":[],"owner":{"account_id":11866266,"reputation":89,"user_id":8683738,"display_name":"Deep Roy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659611472,"creation_date":1659611472,"answer_id":73234882,"question_id":48665084,"body_markdown":"nested groupingBy questions and solutions:&lt;br&gt;\r\nq. print all male and female  dept-wise(nested groupingBy):&lt;br&gt;\r\nans: \r\n\r\n    employeeList.stream().collect(Collectors.groupingBy(Employee::getDepartment,Collectors.groupingBy(Employee::getGender)))\r\n            .entrySet().stream().forEach(System.out::println)\r\n\r\nq. print the employees more than 25 and not -  male and female - dept-wise&lt;br&gt;\r\nans: \r\n\r\n    employeeList.stream().collect(\r\n    Collectors.groupingBy(Employee::getDepartment, Collectors.groupingBy(Employee::getGender, Collectors.partitioningBy(emp -&gt; emp.getAge() &gt; 25))))\r\n    .entrySet().stream().forEach(System.out::println);\r\n\r\nq. eldest male and female from each department&lt;br&gt;\r\nans: \r\n\r\n    employeeList.stream().collect(Collectors.groupingBy(Employee::getDepartment,Collectors.groupingBy(Employee::getGender,Collectors.maxBy(Comparator.comparing(Employee::getAge)))))\r\n            .entrySet().stream().forEach(System.out::println);\r\n\r\nsome more helpful questions @: \r\n  [1]: https://www.youtube.com/watch?v=AFmyV43UBgc","title":"How to create a nested Map using Collectors.groupingBy?","body":"<p>nested groupingBy questions and solutions:<br>\nq. print all male and female  dept-wise(nested groupingBy):<br>\nans:</p>\n<pre><code>employeeList.stream().collect(Collectors.groupingBy(Employee::getDepartment,Collectors.groupingBy(Employee::getGender)))\n        .entrySet().stream().forEach(System.out::println)\n</code></pre>\n<p>q. print the employees more than 25 and not -  male and female - dept-wise<br>\nans:</p>\n<pre><code>employeeList.stream().collect(\nCollectors.groupingBy(Employee::getDepartment, Collectors.groupingBy(Employee::getGender, Collectors.partitioningBy(emp -&gt; emp.getAge() &gt; 25))))\n.entrySet().stream().forEach(System.out::println);\n</code></pre>\n<p>q. eldest male and female from each department<br>\nans:</p>\n<pre><code>employeeList.stream().collect(Collectors.groupingBy(Employee::getDepartment,Collectors.groupingBy(Employee::getGender,Collectors.maxBy(Comparator.comparing(Employee::getAge)))))\n        .entrySet().stream().forEach(System.out::println);\n</code></pre>\n<p>some more helpful questions @:\n[1]: <a href=\"https://www.youtube.com/watch?v=AFmyV43UBgc\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=AFmyV43UBgc</a></p>\n"}],"owner":{"account_id":2134379,"reputation":7299,"user_id":1894517,"accept_rate":79,"display_name":"Vinay Prajapati"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7112,"favorite_count":0,"down_vote_count":1,"up_vote_count":12,"accepted_answer_id":48665228,"answer_count":2,"score":11,"last_activity_date":1659611472,"creation_date":1518010179,"question_id":48665084,"body_markdown":"I have a list of class say `ProductDto`\r\n\r\n    public class ProductDto {\r\n        private String Id;\r\n        private String status;\r\n        private Booker booker;\r\n        private String category;\r\n        private String type;\r\n    }\r\n\r\nI want to have a Map as below:-\r\n\r\n` Map&lt;String,Map&lt;String,Map&lt;String,Booker&gt;&gt;`\r\n\r\nThe properties are to be mapped as below:\r\n\r\n`Map&lt;status,Map&lt;category,Map&lt;type,Booker&gt;`\r\n\r\nI know one level of grouping could be done easily without any hassles using `Collectors.groupingBy`. \r\n\r\nI tried to use this for nested level but it failed for me when same values  started coming for fields that are keys. \r\n\r\nMy code is something like below:-\r\n\r\n     list.stream()\r\n                    .collect(Collectors.groupingBy(\r\n                            (FenergoProductDto productDto) -&gt; \r\n                            productDto.getStatus()\r\n                            ,\r\n                            Collectors.toMap(k -&gt; k.getProductCategory(), fProductDto -&gt; {\r\n                                Map&lt;String, Booker&gt; productTypeMap = new ProductTypes();\r\n                                productTypeMap.put(fProductDto.getProductTypeName(),\r\n                                        createBooker(fProductDto.getBookingEntityName()));\r\n                                return productTypeMap;\r\n                            })\r\n                    ));\r\n\r\nIf anyone knows a good approach to do this by using streams, please share!","title":"How to create a nested Map using Collectors.groupingBy?","body":"<p>I have a list of class say <code>ProductDto</code></p>\n\n<pre><code>public class ProductDto {\n    private String Id;\n    private String status;\n    private Booker booker;\n    private String category;\n    private String type;\n}\n</code></pre>\n\n<p>I want to have a Map as below:-</p>\n\n<p><code>Map&lt;String,Map&lt;String,Map&lt;String,Booker&gt;&gt;</code></p>\n\n<p>The properties are to be mapped as below:</p>\n\n<p><code>Map&lt;status,Map&lt;category,Map&lt;type,Booker&gt;</code></p>\n\n<p>I know one level of grouping could be done easily without any hassles using <code>Collectors.groupingBy</code>. </p>\n\n<p>I tried to use this for nested level but it failed for me when same values  started coming for fields that are keys. </p>\n\n<p>My code is something like below:-</p>\n\n<pre><code> list.stream()\n                .collect(Collectors.groupingBy(\n                        (FenergoProductDto productDto) -&gt; \n                        productDto.getStatus()\n                        ,\n                        Collectors.toMap(k -&gt; k.getProductCategory(), fProductDto -&gt; {\n                            Map&lt;String, Booker&gt; productTypeMap = new ProductTypes();\n                            productTypeMap.put(fProductDto.getProductTypeName(),\n                                    createBooker(fProductDto.getBookingEntityName()));\n                            return productTypeMap;\n                        })\n                ));\n</code></pre>\n\n<p>If anyone knows a good approach to do this by using streams, please share!</p>\n"},{"tags":["java","spring-webflux"],"comments":[{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":1,"creation_date":1659492551,"post_id":73214661,"comment_id":129305801,"body_markdown":"Why not leave it as `Mono&lt;Set&lt;String&gt;&gt;`?","body":"Why not leave it as <code>Mono&lt;Set&lt;String&gt;&gt;</code>?"}],"answers":[{"tags":[],"owner":{"account_id":10834672,"reputation":416,"user_id":7968003,"display_name":"anicetkeric"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659611275,"creation_date":1659611275,"answer_id":73234842,"question_id":73214661,"body_markdown":"You can use `zip()` static method. \r\nIt merges given monos into a new Mono that will be fulfilled when all of the given Monos have produced an item, aggregating their values as defined by the combinator function.\r\n\r\n```java\r\n\t\tMono&lt;Set&lt;String&gt;&gt; mergeField = Mono.zip(researchTeamField,reviewerTeamField).map(d -&gt; {\r\n\t\t\td.getT1().addAll(d.getT2());\r\n\t\t\treturn d.getT1();\r\n\t\t});\r\n```","title":"how would you combine set of mono string in web flux","body":"<p>You can use <code>zip()</code> static method.\nIt merges given monos into a new Mono that will be fulfilled when all of the given Monos have produced an item, aggregating their values as defined by the combinator function.</p>\n<pre class=\"lang-java prettyprint-override\"><code>        Mono&lt;Set&lt;String&gt;&gt; mergeField = Mono.zip(researchTeamField,reviewerTeamField).map(d -&gt; {\n            d.getT1().addAll(d.getT2());\n            return d.getT1();\n        });\n</code></pre>\n"}],"owner":{"account_id":1941911,"reputation":751,"user_id":2183545,"accept_rate":65,"display_name":"shanky"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73234842,"answer_count":1,"score":1,"last_activity_date":1659611275,"creation_date":1659481583,"question_id":73214661,"body_markdown":"I have two following methods `Mono&lt;Set&lt;String&gt;&gt; researchTeamField = submissionService.findByResearchTeamField() //returns set of string` and  `Mono&lt;Set&lt;String&gt;&gt; reviewerTeamField =submissionService.findByReviewerTeamField() //returns set of reviewer string.` I want to combine the result of two set of string into one final mono set string. How can i do it?","title":"how would you combine set of mono string in web flux","body":"<p>I have two following methods <code>Mono&lt;Set&lt;String&gt;&gt; researchTeamField = submissionService.findByResearchTeamField() //returns set of string</code> and  <code>Mono&lt;Set&lt;String&gt;&gt; reviewerTeamField =submissionService.findByReviewerTeamField() //returns set of reviewer string.</code> I want to combine the result of two set of string into one final mono set string. How can i do it?</p>\n"},{"tags":["java","algorithm","recursion"],"comments":[{"owner":{"account_id":7413926,"reputation":5474,"user_id":11374957,"display_name":"Kaan"},"score":1,"creation_date":1655057995,"post_id":72594721,"comment_id":128234990,"body_markdown":"This question does not contain enough specifics for others to provide helpful answers. Take a look at [&quot;How do I ask a good question?&quot;](https://stackoverflow.com/help/how-to-ask)","body":"This question does not contain enough specifics for others to provide helpful answers. Take a look at <a href=\"https://stackoverflow.com/help/how-to-ask\">&quot;How do I ask a good question?&quot;</a>"},{"owner":{"account_id":7276433,"reputation":90,"user_id":5547738,"display_name":"AliBaharni97"},"score":0,"creation_date":1655062314,"post_id":72594721,"comment_id":128235805,"body_markdown":"if you are talking about [nim game](https://en.wikipedia.org/wiki/Nim), let me know so I can help you with.","body":"if you are talking about <a href=\"https://en.wikipedia.org/wiki/Nim\" rel=\"nofollow noreferrer\">nim game</a>, let me know so I can help you with."},{"owner":{"account_id":34433,"reputation":55374,"user_id":1400793,"display_name":"Paul Hankin"},"score":1,"creation_date":1655063083,"post_id":72594721,"comment_id":128235954,"body_markdown":"There&#39;s n(n+1)/2 game states, and you can use dynamic programming to compute the value of each state.","body":"There&#39;s n(n+1)/2 game states, and you can use dynamic programming to compute the value of each state."},{"owner":{"account_id":3700957,"reputation":13521,"user_id":3080723,"display_name":"Stef"},"score":1,"creation_date":1655066623,"post_id":72594721,"comment_id":128236622,"body_markdown":"You might be interested in the [minimax algorithm](https://en.wikipedia.org/wiki/Minimax#Minimax_algorithm_with_alternate_moves). If you look at the last branching point before a leaf, it&#39;s relatively obvious which move the player will make; mark the result of the best move on the corresponding node. Then do that for the second-to-last branching points; etc.","body":"You might be interested in the <a href=\"https://en.wikipedia.org/wiki/Minimax#Minimax_algorithm_with_alternate_moves\" rel=\"nofollow noreferrer\">minimax algorithm</a>. If you look at the last branching point before a leaf, it&#39;s relatively obvious which move the player will make; mark the result of the best move on the corresponding node. Then do that for the second-to-last branching points; etc."}],"answers":[{"tags":[],"owner":{"account_id":25946942,"reputation":23,"user_id":19665553,"display_name":"DDela"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659610712,"creation_date":1659610577,"answer_id":73234687,"question_id":72594721,"body_markdown":"When you talk about optimal game results I assume that the player always chooses the highest number.\r\n\r\nYou will need to add *deque* pakages\r\n\r\n    import java.util.ArrayDeque;\r\n    import java.util.Deque;\r\n\r\nHere you have a method that gives an array with the player A and player B results.\r\n\r\n    private static int[] optimalGameResults(int[] board) {\r\n            boolean turnA=true;\r\n            int sumA=0,sumB=0;\r\n            Deque&lt;Integer&gt; deque = new ArrayDeque&lt;&gt;();\r\n            for (int n: board) {\r\n                deque.offer(n);\r\n            }\r\n            while (deque.size()&gt;0){\r\n                if(turnA){\r\n                    sumA = sumOptimal(sumA, deque);\r\n                    turnA=false;\r\n                }else{\r\n                    sumB = sumOptimal(sumB, deque);\r\n                    turnA=true;\r\n                }\r\n            }\r\n            int[] abResults={sumA,sumB};\r\n            return abResults;\r\n        }\r\n\r\nIt also needs an additional method to know which value remove (optimization)\r\n\r\n    private static int sumOptimal(int sum, Deque&lt;Integer&gt; deque) {\r\n            if(deque.getFirst()&gt; deque.getLast()){\r\n                sum += deque.removeFirst();\r\n            }else {\r\n                sum += deque.removeLast();\r\n            }\r\n            return sum;\r\n        }","title":"How do I design a algorithm to predict the outcome of a game with both players playing optimally?","body":"<p>When you talk about optimal game results I assume that the player always chooses the highest number.</p>\n<p>You will need to add <em>deque</em> pakages</p>\n<pre><code>import java.util.ArrayDeque;\nimport java.util.Deque;\n</code></pre>\n<p>Here you have a method that gives an array with the player A and player B results.</p>\n<pre><code>private static int[] optimalGameResults(int[] board) {\n        boolean turnA=true;\n        int sumA=0,sumB=0;\n        Deque&lt;Integer&gt; deque = new ArrayDeque&lt;&gt;();\n        for (int n: board) {\n            deque.offer(n);\n        }\n        while (deque.size()&gt;0){\n            if(turnA){\n                sumA = sumOptimal(sumA, deque);\n                turnA=false;\n            }else{\n                sumB = sumOptimal(sumB, deque);\n                turnA=true;\n            }\n        }\n        int[] abResults={sumA,sumB};\n        return abResults;\n    }\n</code></pre>\n<p>It also needs an additional method to know which value remove (optimization)</p>\n<pre><code>private static int sumOptimal(int sum, Deque&lt;Integer&gt; deque) {\n        if(deque.getFirst()&gt; deque.getLast()){\n            sum += deque.removeFirst();\n        }else {\n            sum += deque.removeLast();\n        }\n        return sum;\n    }\n</code></pre>\n"}],"owner":{"account_id":24881834,"reputation":21,"user_id":18754940,"display_name":"Stefan Remus"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":126,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":1,"score":0,"last_activity_date":1659610712,"creation_date":1655057339,"question_id":72594721,"body_markdown":"Currently, I am looking for a recursive solution to predict the outcome of a game with both players playing optimally. The game is played between two players.\r\n\r\nI am given a sequence of numbers in the form of an array and always want to draw a number from one of the edge sides (i.e. start or end of the array). Depending on which player&#39;s turn it is, the points are credited and it is the next player&#39;s turn. This player now also chooses a number, which is at the edge of the number array. At the end the player with the larger sum has won.\r\n\r\nIn the graphic all possible game courses for four starting numbers are visualized in a binary tree. I am now wondering how to design a recursive algorithm that takes all these possible combinations into account and finally returns the score of the winning player if both players play optimally.\r\n\r\n![Binary-Tree: level 1 (3592), level 2 (359;952),(35,59;95,52), level 3 (3,5;5,9. 9,5;5,2)][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WaFWo.png","title":"How do I design a algorithm to predict the outcome of a game with both players playing optimally?","body":"<p>Currently, I am looking for a recursive solution to predict the outcome of a game with both players playing optimally. The game is played between two players.</p>\n<p>I am given a sequence of numbers in the form of an array and always want to draw a number from one of the edge sides (i.e. start or end of the array). Depending on which player's turn it is, the points are credited and it is the next player's turn. This player now also chooses a number, which is at the edge of the number array. At the end the player with the larger sum has won.</p>\n<p>In the graphic all possible game courses for four starting numbers are visualized in a binary tree. I am now wondering how to design a recursive algorithm that takes all these possible combinations into account and finally returns the score of the winning player if both players play optimally.</p>\n<p><img src=\"https://i.stack.imgur.com/WaFWo.png\" alt=\"Binary-Tree: level 1 (3592), level 2 (359;952),(35,59;95,52), level 3 (3,5;5,9. 9,5;5,2)\" /></p>\n"},{"tags":["java","mockito","junit5","junit5-extension-model"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":2,"creation_date":1609618967,"post_id":65543399,"comment_id":115880707,"body_markdown":"Have you annotated the `private MyMockedClass myMockedClass;` field with the `@Mock` annotation? As far as I remember the `@Mock` annotation is still required for Mockito to initialize mocks.","body":"Have you annotated the <code>private MyMockedClass myMockedClass;</code> field with the <code>@Mock</code> annotation? As far as I remember the <code>@Mock</code> annotation is still required for Mockito to initialize mocks."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1609667125,"post_id":65543399,"comment_id":115889061,"body_markdown":"Just out of curiosity: why do you need mocks in the `@BeforeAll` method? Why are mocks in the `@BeforeEach` method not sufficient?","body":"Just out of curiosity: why do you need mocks in the <code>@BeforeAll</code> method? Why are mocks in the <code>@BeforeEach</code> method not sufficient?"},{"owner":{"account_id":8186124,"reputation":4869,"user_id":6161898,"display_name":"fg78nc"},"score":0,"creation_date":1609699272,"post_id":65543399,"comment_id":115898479,"body_markdown":"@ThomasKl&#228;ger I am providing mock behavior (answer) in `@BeforeAll`. I do not want to re-run init method for each unit test.","body":"@ThomasKl&#228;ger I am providing mock behavior (answer) in <code>@BeforeAll</code>. I do not want to re-run init method for each unit test."}],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299858,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1629997832,"creation_date":1609617277,"answer_id":65543436,"question_id":65543399,"body_markdown":"You&#39;re missing the initialization of the `myMockedClass`. Note that you can&#39;t use a `@Mock` annotation for it, because the `@BeforeAll` method would be run before that annotation is used to initialize the mocked object, and you&#39;d have to resort to explicitly calling `Mockito.mock`:\r\n\r\n    @BeforeAll\r\n    public void init() {\r\n        myMockedClass = mock(MyMockedClass.class); // Here\r\n        when(myMockedClass.getSomething()).thenReturn(something);\r\n    }","title":"Mockito does not initialize mock in test running with JUnit 5 in @BeforeAll annotated method","body":"<p>You're missing the initialization of the <code>myMockedClass</code>. Note that you can't use a <code>@Mock</code> annotation for it, because the <code>@BeforeAll</code> method would be run before that annotation is used to initialize the mocked object, and you'd have to resort to explicitly calling <code>Mockito.mock</code>:</p>\n<pre><code>@BeforeAll\npublic void init() {\n    myMockedClass = mock(MyMockedClass.class); // Here\n    when(myMockedClass.getSomething()).thenReturn(something);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1609625047,"creation_date":1609625047,"answer_id":65544568,"question_id":65543399,"body_markdown":"The `MockitoExtension` class implements the `BeforeEachCallback` but not the `BeforeAllCallback` from JUnit-Jupiter-API. It does therefore not provide any additional behaviour for `@BeforeAll` annotated methods.\r\n\r\nSource extract of [`MockitoExtension`](https://github.com/mockito/mockito/blob/release/3.x/subprojects/junit-jupiter/src/main/java/org/mockito/junit/jupiter/MockitoExtension.java#L118)\r\n\r\n    public class MockitoExtension implements BeforeEachCallback, AfterEachCallback, ParameterResolver {","title":"Mockito does not initialize mock in test running with JUnit 5 in @BeforeAll annotated method","body":"<p>The <code>MockitoExtension</code> class implements the <code>BeforeEachCallback</code> but not the <code>BeforeAllCallback</code> from JUnit-Jupiter-API. It does therefore not provide any additional behaviour for <code>@BeforeAll</code> annotated methods.</p>\n<p>Source extract of <a href=\"https://github.com/mockito/mockito/blob/release/3.x/subprojects/junit-jupiter/src/main/java/org/mockito/junit/jupiter/MockitoExtension.java#L118\" rel=\"noreferrer\"><code>MockitoExtension</code></a></p>\n<pre><code>public class MockitoExtension implements BeforeEachCallback, AfterEachCallback, ParameterResolver {\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1453062,"reputation":151,"user_id":1369407,"accept_rate":25,"display_name":"Builder Bob"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1659610163,"creation_date":1659610163,"answer_id":73234589,"question_id":65543399,"body_markdown":"it&#39;s a bit old but I found a solution that works for me :\r\n\r\n    public class MockitoExtensionBeforeAll extends MockitoExtension implements BeforeAllCallback, AfterAllCallback {\r\n\r\n\t@Override\r\n\tpublic void beforeAll(ExtensionContext context) {\r\n\t\tsuper.beforeEach(context);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void afterAll(ExtensionContext context) {\r\n\t\tsuper.afterEach(context);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void beforeEach(ExtensionContext context) {\r\n\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void afterEach(ExtensionContext context) {\r\n\r\n\t}\r\n}","title":"Mockito does not initialize mock in test running with JUnit 5 in @BeforeAll annotated method","body":"<p>it's a bit old but I found a solution that works for me :</p>\n<pre><code>public class MockitoExtensionBeforeAll extends MockitoExtension implements BeforeAllCallback, AfterAllCallback {\n\n@Override\npublic void beforeAll(ExtensionContext context) {\n    super.beforeEach(context);\n}\n\n@Override\npublic void afterAll(ExtensionContext context) {\n    super.afterEach(context);\n}\n\n@Override\npublic void beforeEach(ExtensionContext context) {\n\n}\n\n@Override\npublic void afterEach(ExtensionContext context) {\n\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":8186124,"reputation":4869,"user_id":6161898,"display_name":"fg78nc"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18044,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"answer_count":3,"score":15,"last_activity_date":1659610163,"creation_date":1609617067,"question_id":65543399,"body_markdown":"Mockito does not initialize a mock run with the JUnit 5 in a `@BeforeAll` annotated method.\r\nIt works if I change the `init`&#39;s method annotation to `@BeforeEach`. Tests are run within IntelliJ IDEA.\r\n\r\nMy test class :\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    @TestInstance(TestInstance.Lifecycle.PER_CLASS)\r\n    public class MyTest {\r\n        \r\n        private MyMockedClass myMockedClass;\r\n    \r\n        @BeforeAll\r\n        public void init() {\r\n            when(myMockedClass.getSomething()).thenReturn(something); // Mock is not initialized, getting NPE on test\r\n\r\nDependencies (only related ones are shown, others omitted for brevity):\r\n\r\n    [INFO] --- maven-dependency-plugin:2.10:tree (default-cli) @ XXX ---\r\n    [INFO] +- org.mockito:mockito-core:jar:3.6.28:test\r\n    [INFO] |  +- net.bytebuddy:byte-buddy:jar:1.10.18:compile\r\n    [INFO] |  +- net.bytebuddy:byte-buddy-agent:jar:1.10.18:test\r\n    [INFO] |  \\- org.objenesis:objenesis:jar:3.1:test\r\n    [INFO] +- org.mockito:mockito-junit-jupiter:jar:3.6.28:test\r\n    [INFO] |  \\- org.junit.jupiter:junit-jupiter-api:jar:5.7.0:test\r\n    [INFO] |     +- org.apiguardian:apiguardian-api:jar:1.1.0:test\r\n    [INFO] |     +- org.opentest4j:opentest4j:jar:1.2.0:test\r\n    [INFO] |     \\- org.junit.platform:junit-platform-commons:jar:1.7.0:test\r\n    [INFO] +- org.springframework.boot:spring-boot-starter-test:jar:2.4.1:test\r\n    [INFO] |  +- org.junit.jupiter:junit-jupiter:jar:5.7.0:test\r\n    [INFO] |  |  +- org.junit.jupiter:junit-jupiter-params:jar:5.7.0:test\r\n    [INFO] |  |  \\- org.junit.jupiter:junit-jupiter-engine:jar:5.7.0:test\r\n    [INFO] |  |     \\- org.junit.platform:junit-platform-engine:jar:1.7.0:test","title":"Mockito does not initialize mock in test running with JUnit 5 in @BeforeAll annotated method","body":"<p>Mockito does not initialize a mock run with the JUnit 5 in a <code>@BeforeAll</code> annotated method.\nIt works if I change the <code>init</code>'s method annotation to <code>@BeforeEach</code>. Tests are run within IntelliJ IDEA.</p>\n<p>My test class :</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\n@TestInstance(TestInstance.Lifecycle.PER_CLASS)\npublic class MyTest {\n    \n    private MyMockedClass myMockedClass;\n\n    @BeforeAll\n    public void init() {\n        when(myMockedClass.getSomething()).thenReturn(something); // Mock is not initialized, getting NPE on test\n</code></pre>\n<p>Dependencies (only related ones are shown, others omitted for brevity):</p>\n<pre><code>[INFO] --- maven-dependency-plugin:2.10:tree (default-cli) @ XXX ---\n[INFO] +- org.mockito:mockito-core:jar:3.6.28:test\n[INFO] |  +- net.bytebuddy:byte-buddy:jar:1.10.18:compile\n[INFO] |  +- net.bytebuddy:byte-buddy-agent:jar:1.10.18:test\n[INFO] |  \\- org.objenesis:objenesis:jar:3.1:test\n[INFO] +- org.mockito:mockito-junit-jupiter:jar:3.6.28:test\n[INFO] |  \\- org.junit.jupiter:junit-jupiter-api:jar:5.7.0:test\n[INFO] |     +- org.apiguardian:apiguardian-api:jar:1.1.0:test\n[INFO] |     +- org.opentest4j:opentest4j:jar:1.2.0:test\n[INFO] |     \\- org.junit.platform:junit-platform-commons:jar:1.7.0:test\n[INFO] +- org.springframework.boot:spring-boot-starter-test:jar:2.4.1:test\n[INFO] |  +- org.junit.jupiter:junit-jupiter:jar:5.7.0:test\n[INFO] |  |  +- org.junit.jupiter:junit-jupiter-params:jar:5.7.0:test\n[INFO] |  |  \\- org.junit.jupiter:junit-jupiter-engine:jar:5.7.0:test\n[INFO] |  |     \\- org.junit.platform:junit-platform-engine:jar:1.7.0:test\n</code></pre>\n"},{"tags":["java","html","spring","thymeleaf"],"comments":[{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1659618727,"post_id":73234507,"comment_id":129341067,"body_markdown":"Take a look at [parameterized fragments](https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf#parameterizable-fragment-signatures). I think that is what you need. See also [these SO questions and answers](https://www.google.com/search?q=thymeleaf+parameterized+fragments+site%3Astackoverflow.com) for more examples.","body":"Take a look at <a href=\"https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf#parameterizable-fragment-signatures\" rel=\"nofollow noreferrer\">parameterized fragments</a>. I think that is what you need. See also <a href=\"https://www.google.com/search?q=thymeleaf+parameterized+fragments+site%3Astackoverflow.com\" rel=\"nofollow noreferrer\">these SO questions and answers</a> for more examples."},{"owner":{"account_id":5152799,"reputation":19367,"user_id":4126893,"display_name":"Metroids"},"score":0,"creation_date":1659645189,"post_id":73234507,"comment_id":129350062,"body_markdown":"What have you tried? There is documentation on [using fragments](https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#template-layout) (w/parameters).","body":"What have you tried? There is documentation on <a href=\"https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#template-layout\" rel=\"nofollow noreferrer\">using fragments</a> (w/parameters)."}],"owner":{"account_id":23976372,"reputation":29,"user_id":17988386,"display_name":"Max"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1659609929,"creation_date":1659609835,"question_id":73234507,"body_markdown":"I have a table and fragment on on childFragment.html\r\n\r\n    &lt;div th:fragment=&quot;firstTable&quot;&gt;\r\n    &lt;table border=&quot;2&quot;&gt;\r\n    &lt;tbody&gt;\r\n    &lt;tr th:each=&quot;rt : ${fragment}&quot;&gt;\r\n    &lt;td th:text=&quot;${rt.id}&quot;&gt;&lt;/td&gt;\r\n    &lt;td th:text=&quot;${rt.number}&quot;&gt;&lt;/td&gt;\r\n    &lt;td th:text=&quot;${rt.number2}&quot;&gt;&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n    &lt;/tbody&gt;\r\n    &lt;/table&gt;\r\n    &lt;/div&gt; \r\nHow can I insert it in the another html page?\r\n","title":"Insert table as fragment with parameters","body":"<p>I have a table and fragment on on childFragment.html</p>\n<pre><code>&lt;div th:fragment=&quot;firstTable&quot;&gt;\n&lt;table border=&quot;2&quot;&gt;\n&lt;tbody&gt;\n&lt;tr th:each=&quot;rt : ${fragment}&quot;&gt;\n&lt;td th:text=&quot;${rt.id}&quot;&gt;&lt;/td&gt;\n&lt;td th:text=&quot;${rt.number}&quot;&gt;&lt;/td&gt;\n&lt;td th:text=&quot;${rt.number2}&quot;&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n&lt;/div&gt; \n</code></pre>\n<p>How can I insert it in the another html page?</p>\n"},{"tags":["java","date","java-time"],"comments":[{"owner":{"account_id":5445285,"reputation":1672,"user_id":4332063,"display_name":"Wedson Quintanilha da Silva"},"score":4,"creation_date":1605632385,"post_id":22223786,"comment_id":114707919,"body_markdown":"Use: \n\nLocalDate start = YearMonth.now().atDay(1);\nLocalDate end   = YearMonth.now().atEndOfMonth();\n\nOR:\n\nLocalDate startDay = Year.of(2020).atMonth(11).atDay(1);\nLocalDate endDay = Year.of(2020).atMonth(11).atEndOfMonth();","body":"Use:   LocalDate start = YearMonth.now().atDay(1); LocalDate end   = YearMonth.now().atEndOfMonth();  OR:  LocalDate startDay = Year.of(2020).atMonth(11).atDay(1); LocalDate endDay = Year.of(2020).atMonth(11).atEndOfMonth();"}],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":270,"is_accepted":false,"score":270,"last_activity_date":1649187558,"creation_date":1394107236,"answer_id":22223886,"question_id":22223786,"body_markdown":"Just use `withDayOfMonth`, and `lengthOfMonth()`:\r\n\r\n    LocalDate initial = LocalDate.of(2014, 2, 13);\r\n    LocalDate start = initial.withDayOfMonth(1);\r\n    LocalDate end = initial.withDayOfMonth(initial.getMonth().length(initial.isLeapYear()));","title":"Get first and last day of month using threeten, LocalDate","body":"<p>Just use <code>withDayOfMonth</code>, and <code>lengthOfMonth()</code>:</p>\n<pre><code>LocalDate initial = LocalDate.of(2014, 2, 13);\nLocalDate start = initial.withDayOfMonth(1);\nLocalDate end = initial.withDayOfMonth(initial.getMonth().length(initial.isLeapYear()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4129007,"reputation":27,"user_id":3387365,"display_name":"Shekhar Rajput"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1394110997,"creation_date":1394109994,"answer_id":22224999,"question_id":22223786,"body_markdown":"Try this:\r\n\r\n    LocalDate initial = LocalDate.of(2014, 2, 13);\r\n    LocalDate start = initial.withDayOfMonth(1);\t\t \r\n    LocalDate end = initial.withDayOfMonth(initial.getMonthOfYear().getLastDayOfMonth(false));\r\n    System.out.println(start);\r\n    System.out.println(end);\r\n\r\nyou can find the desire output but need to take care of  parameter **true/false** for **getLastDayOfMonth** method \r\n\r\nthat parameter denotes leap year","title":"Get first and last day of month using threeten, LocalDate","body":"<p>Try this:</p>\n\n<pre><code>LocalDate initial = LocalDate.of(2014, 2, 13);\nLocalDate start = initial.withDayOfMonth(1);         \nLocalDate end = initial.withDayOfMonth(initial.getMonthOfYear().getLastDayOfMonth(false));\nSystem.out.println(start);\nSystem.out.println(end);\n</code></pre>\n\n<p>you can find the desire output but need to take care of  parameter <strong>true/false</strong> for <strong>getLastDayOfMonth</strong> method </p>\n\n<p>that parameter denotes leap year</p>\n"},{"tags":[],"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"down_vote_count":2,"up_vote_count":30,"is_accepted":false,"score":28,"last_activity_date":1394116115,"creation_date":1394115727,"answer_id":22227251,"question_id":22223786,"body_markdown":"Jon Skeets answer is right and has deserved my upvote, just adding this slightly different solution for completeness:\r\n\r\n    import static java.time.temporal.TemporalAdjusters.lastDayOfMonth;\r\n    \r\n    LocalDate initial = LocalDate.of(2014, 2, 13);\r\n    LocalDate start = initial.withDayOfMonth(1);\r\n    LocalDate end = initial.with(lastDayOfMonth());","title":"Get first and last day of month using threeten, LocalDate","body":"<p>Jon Skeets answer is right and has deserved my upvote, just adding this slightly different solution for completeness:</p>\n\n<pre><code>import static java.time.temporal.TemporalAdjusters.lastDayOfMonth;\n\nLocalDate initial = LocalDate.of(2014, 2, 13);\nLocalDate start = initial.withDayOfMonth(1);\nLocalDate end = initial.with(lastDayOfMonth());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17393,"reputation":61637,"user_id":38896,"accept_rate":80,"display_name":"JodaStephen"},"down_vote_count":0,"up_vote_count":217,"is_accepted":false,"score":217,"last_activity_date":1394156857,"creation_date":1394156857,"answer_id":22239895,"question_id":22223786,"body_markdown":"The API was designed to support a solution that matches closely to business requirements\r\n\r\n    import static java.time.temporal.TemporalAdjusters.*;\r\n\r\n    LocalDate initial = LocalDate.of(2014, 2, 13);\r\n    LocalDate start = initial.with(firstDayOfMonth());\r\n    LocalDate end = initial.with(lastDayOfMonth());\r\n\r\nHowever, Jon&#39;s solutions are also fine.","title":"Get first and last day of month using threeten, LocalDate","body":"<p>The API was designed to support a solution that matches closely to business requirements</p>\n\n<pre><code>import static java.time.temporal.TemporalAdjusters.*;\n\nLocalDate initial = LocalDate.of(2014, 2, 13);\nLocalDate start = initial.with(firstDayOfMonth());\nLocalDate end = initial.with(lastDayOfMonth());\n</code></pre>\n\n<p>However, Jon's solutions are also fine.</p>\n"},{"tags":[],"owner":{"account_id":405939,"reputation":11839,"user_id":775138,"accept_rate":66,"display_name":"herman"},"down_vote_count":0,"up_vote_count":158,"is_accepted":false,"score":158,"last_activity_date":1552583473,"creation_date":1524043315,"answer_id":49895903,"question_id":22223786,"body_markdown":"# `YearMonth`\r\n\r\nFor completeness, and more elegant in my opinion, see this use of [`YearMonth`][1] class.\r\n\r\n    YearMonth month = YearMonth.from(date);\r\n    LocalDate start = month.atDay(1);\r\n    LocalDate end   = month.atEndOfMonth();\r\n\r\n\r\nFor the first &amp; last day of the current month, this becomes:\r\n\r\n    LocalDate start = YearMonth.now().atDay(1);\r\n    LocalDate end   = YearMonth.now().atEndOfMonth();\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/YearMonth.html","title":"Get first and last day of month using threeten, LocalDate","body":"<h1><code>YearMonth</code></h1>\n\n<p>For completeness, and more elegant in my opinion, see this use of <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/YearMonth.html\" rel=\"noreferrer\"><code>YearMonth</code></a> class.</p>\n\n<pre><code>YearMonth month = YearMonth.from(date);\nLocalDate start = month.atDay(1);\nLocalDate end   = month.atEndOfMonth();\n</code></pre>\n\n<p>For the first &amp; last day of the current month, this becomes:</p>\n\n<pre><code>LocalDate start = YearMonth.now().atDay(1);\nLocalDate end   = YearMonth.now().atEndOfMonth();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1398261,"reputation":3758,"user_id":1327585,"accept_rate":74,"display_name":"Anil Bhaskar"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1545928780,"creation_date":1545928780,"answer_id":53948173,"question_id":22223786,"body_markdown":"If anyone comes looking for **first day of previous month** and **last day of previous month**:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public static LocalDate firstDayOfPreviousMonth(LocalDate date) {\r\n    \t\treturn date.minusMonths(1).withDayOfMonth(1);\r\n    \t}\r\n    \t\r\n\r\n    public static LocalDate lastDayOfPreviousMonth(LocalDate date) {\r\n    \t\treturn date.withDayOfMonth(1).minusDays(1);\r\n    \t}\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Get first and last day of month using threeten, LocalDate","body":"<p>If anyone comes looking for <strong>first day of previous month</strong> and <strong>last day of previous month</strong>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static LocalDate firstDayOfPreviousMonth(LocalDate date) {\n        return date.minusMonths(1).withDayOfMonth(1);\n    }\n\n\npublic static LocalDate lastDayOfPreviousMonth(LocalDate date) {\n        return date.withDayOfMonth(1).minusDays(1);\n    }\n</code></pre>\n\n\n"},{"tags":[],"owner":{"account_id":2168743,"reputation":10044,"user_id":1921273,"display_name":"MrSmith42"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1550768550,"creation_date":1550768550,"answer_id":54812503,"question_id":22223786,"body_markdown":"if you want to do it only with the LocalDate-class:\r\n\r\n    LocalDate initial = LocalDate.of(2014, 2, 13);\r\n    \r\n    LocalDate start = LocalDate.of(initial.getYear(), initial.getMonthValue(),1);\r\n\r\n    // Idea: the last day is the same as the first day of next month minus one day.\r\n    LocalDate end = LocalDate.of(initial.getYear(), initial.getMonthValue(), 1).plusMonths(1).minusDays(1);","title":"Get first and last day of month using threeten, LocalDate","body":"<p>if you want to do it only with the LocalDate-class:</p>\n\n<pre><code>LocalDate initial = LocalDate.of(2014, 2, 13);\n\nLocalDate start = LocalDate.of(initial.getYear(), initial.getMonthValue(),1);\n\n// Idea: the last day is the same as the first day of next month minus one day.\nLocalDate end = LocalDate.of(initial.getYear(), initial.getMonthValue(), 1).plusMonths(1).minusDays(1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8693070,"reputation":375,"user_id":6505418,"display_name":"Luis Roberto"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1569036263,"creation_date":1569036263,"answer_id":58037031,"question_id":22223786,"body_markdown":"Just here to show my implementation for @herman solution\r\n\r\n    ZoneId americaLaPazZone = ZoneId.of(&quot;UTC-04:00&quot;);\r\n\r\n    static Date firstDateOfMonth(Date date) {\r\n      LocalDate localDate = convertToLocalDateWithTimezone(date);\r\n      YearMonth baseMonth = YearMonth.from(localDate);\r\n      LocalDateTime initialDate = baseMonth.atDay(firstDayOfMonth).atStartOfDay();\r\n      return Date.from(initialDate.atZone(americaLaPazZone).toInstant());\r\n    }\r\n\r\n    static Date lastDateOfMonth(Date date) {\r\n      LocalDate localDate = convertToLocalDateWithTimezone(date);\r\n      YearMonth baseMonth = YearMonth.from(localDate);\r\n      LocalDateTime lastDate = baseMonth.atEndOfMonth().atTime(23, 59, 59);\r\n      return Date.from(lastDate.atZone(americaLaPazZone).toInstant());\r\n    }\r\n\r\n    static LocalDate convertToLocalDateWithTimezone(Date date) {\r\n      return LocalDateTime.from(date.toInstant().atZone(americaLaPazZone)).toLocalDate();\r\n    }\r\n","title":"Get first and last day of month using threeten, LocalDate","body":"<p>Just here to show my implementation for @herman solution</p>\n\n<pre><code>ZoneId americaLaPazZone = ZoneId.of(\"UTC-04:00\");\n\nstatic Date firstDateOfMonth(Date date) {\n  LocalDate localDate = convertToLocalDateWithTimezone(date);\n  YearMonth baseMonth = YearMonth.from(localDate);\n  LocalDateTime initialDate = baseMonth.atDay(firstDayOfMonth).atStartOfDay();\n  return Date.from(initialDate.atZone(americaLaPazZone).toInstant());\n}\n\nstatic Date lastDateOfMonth(Date date) {\n  LocalDate localDate = convertToLocalDateWithTimezone(date);\n  YearMonth baseMonth = YearMonth.from(localDate);\n  LocalDateTime lastDate = baseMonth.atEndOfMonth().atTime(23, 59, 59);\n  return Date.from(lastDate.atZone(americaLaPazZone).toInstant());\n}\n\nstatic LocalDate convertToLocalDateWithTimezone(Date date) {\n  return LocalDateTime.from(date.toInstant().atZone(americaLaPazZone)).toLocalDate();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17236297,"reputation":61,"user_id":12479693,"display_name":"VSs"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1575463759,"creation_date":1575463759,"answer_id":59176457,"question_id":22223786,"body_markdown":"You can try this to avoid indicating custom date and if there is need to display start and end dates of current month:\r\n\r\n        LocalDate start = LocalDate.now().minusDays(LocalDate.now().getDayOfMonth()-1);\r\n        LocalDate end = LocalDate.now().minusDays(LocalDate.now().getDayOfMonth()).plusMonths(1);\r\n        System.out.println(&quot;Start of month: &quot; + start);\r\n        System.out.println(&quot;End of month: &quot; + end);\r\n\r\n*Result:*\r\n\r\n    &gt;     Start of month: 2019-12-01\r\n    &gt;     End of month: 2019-12-30","title":"Get first and last day of month using threeten, LocalDate","body":"<p>You can try this to avoid indicating custom date and if there is need to display start and end dates of current month:</p>\n\n<pre><code>    LocalDate start = LocalDate.now().minusDays(LocalDate.now().getDayOfMonth()-1);\n    LocalDate end = LocalDate.now().minusDays(LocalDate.now().getDayOfMonth()).plusMonths(1);\n    System.out.println(\"Start of month: \" + start);\n    System.out.println(\"End of month: \" + end);\n</code></pre>\n\n<p><em>Result:</em></p>\n\n<pre><code>&gt;     Start of month: 2019-12-01\n&gt;     End of month: 2019-12-30\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9860777,"reputation":189,"user_id":9811713,"display_name":"dersu"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1579274800,"creation_date":1579274800,"answer_id":59790305,"question_id":22223786,"body_markdown":"     LocalDate monthstart = LocalDate.of(year,month,1);\r\n     LocalDate monthend = monthstart.plusDays(monthstart.lengthOfMonth()-1);","title":"Get first and last day of month using threeten, LocalDate","body":"<pre><code> LocalDate monthstart = LocalDate.of(year,month,1);\n LocalDate monthend = monthstart.plusDays(monthstart.lengthOfMonth()-1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1151419,"reputation":521,"user_id":1133042,"display_name":"Viorel Stolea"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1636145685,"creation_date":1636043146,"answer_id":69842587,"question_id":22223786,"body_markdown":"    LocalDate endDate = startDate.withDayOfMonth(1).plusMonths(1).minusDays(1);\r\n\r\nor\r\n\r\n\t\tLocalDate startDate = LocalDate.now();\r\n\t\tSystem.out.println(&quot;startDate: &quot;+startDate);\r\n\t\t\r\n\t\tLocalDate firstDayOfMonth_of_startDate = startDate.withDayOfMonth(1); \r\n\t\tSystem.out.println(&quot;firstDayOfMonth_of_startDate: &quot;+firstDayOfMonth_of_startDate);\r\n\t\t\r\n\t\tLocalDate firstDayOfNextMonth_of_startDate = firstDayOfMonth_of_startDate.plusMonths(1); \r\n\t\tSystem.out.println(&quot;firstDayOfNextMonth_of_startDate: &quot;+firstDayOfNextMonth_of_startDate);\r\n\t\t\r\n\t\tLocalDate lastDayOfTheMonth_of_startDate = firstDayOfNextMonth_of_startDate.minusDays(1); \r\n\t\tSystem.out.println(&quot;lastDayOfTheMonth_of_startDate: &quot;+lastDayOfTheMonth_of_startDate);\r\n\r\n\t\t// or everything in one line\r\n\t\tLocalDate endDate = startDate.withDayOfMonth(1).plusMonths(1).minusDays(1);\r\n\t\tSystem.out.println(&quot;endDate: &quot;+endDate);\r\nand the printouts\r\n\r\n    startDate: 2021-11-05\r\n    firstDayOfMonth_of_startDate: 2021-11-01\r\n    firstDayOfNextMonth_of_startDate: 2021-12-01\r\n    lastDayOfTheMonth_of_startDate: 2021-11-30\r\n    endDate: 2021-11-30\r\n\r\n","title":"Get first and last day of month using threeten, LocalDate","body":"<pre><code>LocalDate endDate = startDate.withDayOfMonth(1).plusMonths(1).minusDays(1);\n</code></pre>\n<p>or</p>\n<pre><code>    LocalDate startDate = LocalDate.now();\n    System.out.println(&quot;startDate: &quot;+startDate);\n    \n    LocalDate firstDayOfMonth_of_startDate = startDate.withDayOfMonth(1); \n    System.out.println(&quot;firstDayOfMonth_of_startDate: &quot;+firstDayOfMonth_of_startDate);\n    \n    LocalDate firstDayOfNextMonth_of_startDate = firstDayOfMonth_of_startDate.plusMonths(1); \n    System.out.println(&quot;firstDayOfNextMonth_of_startDate: &quot;+firstDayOfNextMonth_of_startDate);\n    \n    LocalDate lastDayOfTheMonth_of_startDate = firstDayOfNextMonth_of_startDate.minusDays(1); \n    System.out.println(&quot;lastDayOfTheMonth_of_startDate: &quot;+lastDayOfTheMonth_of_startDate);\n\n    // or everything in one line\n    LocalDate endDate = startDate.withDayOfMonth(1).plusMonths(1).minusDays(1);\n    System.out.println(&quot;endDate: &quot;+endDate);\n</code></pre>\n<p>and the printouts</p>\n<pre><code>startDate: 2021-11-05\nfirstDayOfMonth_of_startDate: 2021-11-01\nfirstDayOfNextMonth_of_startDate: 2021-12-01\nlastDayOfTheMonth_of_startDate: 2021-11-30\nendDate: 2021-11-30\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1636162225,"creation_date":1636134845,"answer_id":69857415,"question_id":22223786,"body_markdown":"## Yet another solution for the last day of the month:\r\n\r\nI have written this answer just for learners who want to learn by playing with various options. ***I do not recommend it for production use.*** \r\n\r\n    import java.time.LocalDate;\r\n    import java.time.YearMonth;\r\n    import java.time.format.DateTimeFormatter;\r\n    import java.time.format.DateTimeFormatterBuilder;\r\n    import java.time.temporal.ChronoField;\r\n    import java.util.Locale;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\t//Test\r\n    \t\tSystem.out.println(lastDateOfMonth(LocalDate.of(2014, 1, 13)));\r\n    \t\tSystem.out.println(lastDateOfMonth(LocalDate.of(2014, 2, 13)));\r\n    \t\tSystem.out.println(lastDateOfMonth(LocalDate.of(2016, 2, 13)));\r\n    \t\tSystem.out.println(lastDateOfMonth(LocalDate.of(2014, 4, 13)));\r\n    \t}\r\n    \t\r\n    \tstatic LocalDate lastDateOfMonth(LocalDate date) {\r\n    \t\tDateTimeFormatter dtf = new DateTimeFormatterBuilder()\r\n    \t\t\t\t\t\t\t\t.parseDefaulting(ChronoField.DAY_OF_MONTH, 31)\r\n    \t\t\t\t\t\t\t\t.appendPattern(&quot;uuuu-MM&quot;)\r\n    \t\t\t\t\t\t\t\t.toFormatter(Locale.ENGLISH);\r\n    \t\treturn LocalDate.parse(YearMonth.from(date).toString(), dtf);\r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n    2014-01-31\r\n    2014-02-28\r\n    2016-02-29\r\n    2014-04-30\r\n\r\n[&lt;kbd&gt;ONLINE DEMO&lt;/kbd&gt;][1]\r\n\r\n### How does it work?\r\n\r\nThe function, [`YearMonth#toString`](https://docs.oracle.com/javase/8/docs/api/java/time/YearMonth.html#toString--) returns a string in the format, `uuuu-MM`, the format I have used with the `DateTimeFormatterBuilder`. I have defaulted the [`ChronoField.DAY_OF_MONTH`](https://docs.oracle.com/javase/8/docs/api/java/time/temporal/ChronoField.html#DAY_OF_MONTH) to 31, the maximum number of days a month can have, and this works for all months.\r\n\r\nLearn more about the [modern Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html)&lt;sup&gt;*&lt;/sup&gt; from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.\r\n\r\n***\r\n&lt;sup&gt;* If you are working for an Android project and your Android API level is still not compliant with Java-8, check [Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table). Note that Android 8.0 Oreo already provides [support for `java.time`](https://developer.android.com/reference/java/time/package-summary). Check [this answer](https://stackoverflow.com/a/67752047/10819573) and [this answer](https://stackoverflow.com/a/67505173/10819573) to learn how to use `java.time` API with JDBC.\r\n&lt;/sup&gt;\r\n\r\n\r\n  [1]: https://ideone.com/Cf19wS","title":"Get first and last day of month using threeten, LocalDate","body":"<h2>Yet another solution for the last day of the month:</h2>\n<p>I have written this answer just for learners who want to learn by playing with various options. <em><strong>I do not recommend it for production use.</strong></em></p>\n<pre><code>import java.time.LocalDate;\nimport java.time.YearMonth;\nimport java.time.format.DateTimeFormatter;\nimport java.time.format.DateTimeFormatterBuilder;\nimport java.time.temporal.ChronoField;\nimport java.util.Locale;\n\npublic class Main {\n    public static void main(String[] args) {\n        //Test\n        System.out.println(lastDateOfMonth(LocalDate.of(2014, 1, 13)));\n        System.out.println(lastDateOfMonth(LocalDate.of(2014, 2, 13)));\n        System.out.println(lastDateOfMonth(LocalDate.of(2016, 2, 13)));\n        System.out.println(lastDateOfMonth(LocalDate.of(2014, 4, 13)));\n    }\n    \n    static LocalDate lastDateOfMonth(LocalDate date) {\n        DateTimeFormatter dtf = new DateTimeFormatterBuilder()\n                                .parseDefaulting(ChronoField.DAY_OF_MONTH, 31)\n                                .appendPattern(&quot;uuuu-MM&quot;)\n                                .toFormatter(Locale.ENGLISH);\n        return LocalDate.parse(YearMonth.from(date).toString(), dtf);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>2014-01-31\n2014-02-28\n2016-02-29\n2014-04-30\n</code></pre>\n<p><a href=\"https://ideone.com/Cf19wS\" rel=\"nofollow noreferrer\"><kbd>ONLINE DEMO</kbd></a></p>\n<h3>How does it work?</h3>\n<p>The function, <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/YearMonth.html#toString--\" rel=\"nofollow noreferrer\"><code>YearMonth#toString</code></a> returns a string in the format, <code>uuuu-MM</code>, the format I have used with the <code>DateTimeFormatterBuilder</code>. I have defaulted the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/temporal/ChronoField.html#DAY_OF_MONTH\" rel=\"nofollow noreferrer\"><code>ChronoField.DAY_OF_MONTH</code></a> to 31, the maximum number of days a month can have, and this works for all months.</p>\n<p>Learn more about the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html\" rel=\"nofollow noreferrer\">modern Date-Time API</a><sup>*</sup> from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n<hr />\n<p><sup>* If you are working for an Android project and your Android API level is still not compliant with Java-8, check <a href=\"https://developer.android.com/studio/write/java8-support-table\" rel=\"nofollow noreferrer\">Java 8+ APIs available through desugaring</a>. Note that Android 8.0 Oreo already provides <a href=\"https://developer.android.com/reference/java/time/package-summary\" rel=\"nofollow noreferrer\">support for <code>java.time</code></a>. Check <a href=\"https://stackoverflow.com/a/67752047/10819573\">this answer</a> and <a href=\"https://stackoverflow.com/a/67505173/10819573\">this answer</a> to learn how to use <code>java.time</code> API with JDBC.\n</sup></p>\n"},{"tags":[],"owner":{"account_id":17765152,"reputation":11,"user_id":19565220,"display_name":"Saurav Solanki"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659609623,"creation_date":1659609623,"answer_id":73234460,"question_id":22223786,"body_markdown":"use withDayOfMonth.\r\neg. LocalDateTime.now().withDayOfMonth(1)\r\nthis will give start of the month.","title":"Get first and last day of month using threeten, LocalDate","body":"<p>use withDayOfMonth.\neg. LocalDateTime.now().withDayOfMonth(1)\nthis will give start of the month.</p>\n"}],"owner":{"account_id":1939551,"reputation":2435,"user_id":1746050,"accept_rate":15,"display_name":"user1746050"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":185625,"favorite_count":0,"down_vote_count":0,"up_vote_count":185,"answer_count":13,"score":185,"last_activity_date":1659609623,"creation_date":1394106949,"question_id":22223786,"body_markdown":"I have a LocalDate which needs to get the first and last day of the month. \r\nHow do I do that?\r\n\r\neg. `13/2/2014`\r\nI need to get `1/2/2014` and `28/2/2014` in [LocalDate][1] formats.\r\n\r\nUsing threeten LocalDate class.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html","title":"Get first and last day of month using threeten, LocalDate","body":"<p>I have a LocalDate which needs to get the first and last day of the month. \nHow do I do that?</p>\n\n<p>eg. <code>13/2/2014</code>\nI need to get <code>1/2/2014</code> and <code>28/2/2014</code> in <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\" rel=\"noreferrer\">LocalDate</a> formats.</p>\n\n<p>Using threeten LocalDate class.</p>\n"},{"tags":["java","arraylist","concurrenthashmap"],"comments":[{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1659609765,"post_id":73234450,"comment_id":129337603,"body_markdown":"Where are your words? In the key or the value of the map? Note the fact that it&#39;s a concurrent hash map is irrelevant for your question, you&#39;re handling List / Map (no matter the implementation)","body":"Where are your words? In the key or the value of the map? Note the fact that it&#39;s a concurrent hash map is irrelevant for your question, you&#39;re handling List / Map (no matter the implementation)"},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1659609873,"post_id":73234450,"comment_id":129337645,"body_markdown":"If the words were in the values, then it would look something like this: `lemmas.forEach((k, v) -&gt; corpus.addAll(Arrays.asList(v.split(&quot; &quot;))));`","body":"If the words were in the values, then it would look something like this: <code>lemmas.forEach((k, v) -&gt; corpus.addAll(Arrays.asList(v.split(&quot; &quot;))));</code>"},{"owner":{"account_id":15285573,"reputation":1147,"user_id":11028689,"display_name":"Bluetail"},"score":0,"creation_date":1659947428,"post_id":73234450,"comment_id":129407200,"body_markdown":"It gives me an error, &#39;The method add String in the type ArrayList &lt;String&gt; is not applicable for the arguments (String[]).","body":"It gives me an error, &#39;The method add String in the type ArrayList &lt;String&gt; is not applicable for the arguments (String[])."}],"owner":{"account_id":15285573,"reputation":1147,"user_id":11028689,"display_name":"Bluetail"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659609564,"creation_date":1659609564,"question_id":73234450,"body_markdown":"I have a class like this, and I am trying to write a loop which would use the strings for each entry in the lemmas ConcurrentHashMap ( get the string stored in value), split them by space into separate words, and then add these words into the corpus ArrayList.\r\n\r\n\r\n\r\n    package pipeline;\r\n    import java.util.ArrayList;\r\n    import java.util.Map.Entry;\r\n    import java.util.concurrent.ConcurrentHashMap;\r\n    import helpers.JSONIOHelper;\r\n    \r\n    public class B3DescriptiveStatistics {\r\n    \r\n    \tprivate static void startCreatingStatistics(String filePath) {\r\n    \t\tSystem.out.println(&quot;Loading file...&quot;);\t\t\r\n    \t\t\t\t\r\n    \t\tJSONIOHelper JSONIO = new JSONIOHelper(); \r\n    \t\tJSONIO.LoadJSON(filePath); \r\n    \r\n    \t\tConcurrentHashMap&lt;String, String&gt; lemmas = JSONIO.GetLemmasFromJSONStructure(); \r\n    \t\t\r\n    \t\tArrayList&lt;String&gt; corpus = new ArrayList&lt;String&gt;();\r\n    \t\tConcurrentHashMap&lt;String, Integer&gt; counts = new ConcurrentHashMap&lt;String, Integer&gt;();\r\n    \t\t\r\n    //\t\tlemmas.forEach( (string values, integer) -&gt; corpus.add(string values) ?;\r\n    \t\t\r\n    \t\tfor(String word : lemmas.split(&quot; &quot;)) {\r\n    \t\t    corpus.add(word);\r\n    \t\t}\t\r\n    \t}\r\n\r\nso my problem is how to get the string values and include them in my for loop?","title":"Adding words to ArrayList with HashMap values in Java","body":"<p>I have a class like this, and I am trying to write a loop which would use the strings for each entry in the lemmas ConcurrentHashMap ( get the string stored in value), split them by space into separate words, and then add these words into the corpus ArrayList.</p>\n<pre><code>package pipeline;\nimport java.util.ArrayList;\nimport java.util.Map.Entry;\nimport java.util.concurrent.ConcurrentHashMap;\nimport helpers.JSONIOHelper;\n\npublic class B3DescriptiveStatistics {\n\n    private static void startCreatingStatistics(String filePath) {\n        System.out.println(&quot;Loading file...&quot;);      \n                \n        JSONIOHelper JSONIO = new JSONIOHelper(); \n        JSONIO.LoadJSON(filePath); \n\n        ConcurrentHashMap&lt;String, String&gt; lemmas = JSONIO.GetLemmasFromJSONStructure(); \n        \n        ArrayList&lt;String&gt; corpus = new ArrayList&lt;String&gt;();\n        ConcurrentHashMap&lt;String, Integer&gt; counts = new ConcurrentHashMap&lt;String, Integer&gt;();\n        \n//      lemmas.forEach( (string values, integer) -&gt; corpus.add(string values) ?;\n        \n        for(String word : lemmas.split(&quot; &quot;)) {\n            corpus.add(word);\n        }   \n    }\n</code></pre>\n<p>so my problem is how to get the string values and include them in my for loop?</p>\n"},{"tags":["java","collections","java-8","java-stream"],"comments":[{"owner":{"account_id":6004372,"reputation":390,"user_id":4716743,"display_name":"Manjunath Prabhakar"},"score":0,"creation_date":1639648919,"post_id":70376736,"comment_id":124404742,"body_markdown":"Hello, Welcome to stack overflow, please clearly define your problem statement. Enlighten us whats in your MyObject &amp; MyObjectDTO.  Thank you","body":"Hello, Welcome to stack overflow, please clearly define your problem statement. Enlighten us whats in your MyObject &amp; MyObjectDTO.  Thank you"}],"answers":[{"tags":[],"owner":{"account_id":4285471,"reputation":1290,"user_id":4304123,"display_name":"Blair Nangle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639649097,"creation_date":1639649097,"answer_id":70377125,"question_id":70376736,"body_markdown":"With a for-loop and streams:\r\n\r\n```java\r\nprivate Map&lt;Integer, List&lt;MyObjectDto&gt;&gt; mapNestedListToDto(Map&lt;Integer, List&lt;MyObject&gt;&gt; collection) {\r\n    Map&lt;Integer, List&lt;Dto&gt;&gt; collectionWithDtos = new HashMap&lt;&gt;();\r\n    for (Integer i : collection.keySet()) {\r\n      List&lt;Dto&gt; dtos = collection.get(i).stream().map(myObject -&gt; mappingFunction(myObject)).collect(Collectors.toList());\r\n      mapped.put(i, dtos);\r\n    }\r\n\r\n    return collectionWithDtos;\r\n}\r\n```\r\n\r\nWhere `mappingFunction()` is the method that will actually convert an instance of `MyObject` to an instance of `MyObjectDTO`.","title":"Map a List to DTO inside map - java","body":"<p>With a for-loop and streams:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Map&lt;Integer, List&lt;MyObjectDto&gt;&gt; mapNestedListToDto(Map&lt;Integer, List&lt;MyObject&gt;&gt; collection) {\n    Map&lt;Integer, List&lt;Dto&gt;&gt; collectionWithDtos = new HashMap&lt;&gt;();\n    for (Integer i : collection.keySet()) {\n      List&lt;Dto&gt; dtos = collection.get(i).stream().map(myObject -&gt; mappingFunction(myObject)).collect(Collectors.toList());\n      mapped.put(i, dtos);\n    }\n\n    return collectionWithDtos;\n}\n</code></pre>\n<p>Where <code>mappingFunction()</code> is the method that will actually convert an instance of <code>MyObject</code> to an instance of <code>MyObjectDTO</code>.</p>\n"},{"tags":[],"owner":{"account_id":22886030,"reputation":1849,"user_id":17026900,"display_name":"Oussama ZAGHDOUD"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639649705,"creation_date":1639649188,"answer_id":70377137,"question_id":70376736,"body_markdown":"*You can create a new HashMap where you will put the old keys with a new values ( values will be the Dto created based on the original objects )*\r\n\r\n    class Person {\r\n\tString name ;\r\n\tpublic Person(String s) {\r\n\t\tthis.name=s;\r\n\t}\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\treturn name;\r\n\t}\r\n    }\r\n\r\n    class PersonDto {\r\n\tString name;\r\n\tpublic PersonDto(Person p) {\r\n\t\tthis.name=p.name+&quot;Dto&quot;;\r\n\t}\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\treturn name;\r\n\t}\r\n    }\r\n\r\n    public class Main {\r\n\tpublic static void main(String[] args) {\r\n    // your initial HashMap \r\n\t\tMap&lt;Integer, List&lt;Person&gt;&gt; map = new HashMap&lt;&gt;();\r\n\t\tPerson x =new Person(&quot;X&quot;);\r\n\t\tPerson y =new Person(&quot;Y&quot;);\r\n\t\tList&lt;Person&gt; lst1 = new ArrayList&lt;&gt;();\r\n\t\tlst1.add(x);\r\n\t\tList&lt;Person&gt; lst2 = new ArrayList&lt;&gt;();\r\n\t\tlst2.add(y);\r\n\t\t\r\n\t\tmap.put(1, lst1);\r\n\t\tmap.put(2, lst2);\r\n\t\t// create a new HashMap&lt;Integer, List&lt;MyObjectDto&gt;&gt; \r\n\t\tMap&lt;Integer, List&lt;PersonDto&gt;&gt; mapDto = new HashMap&lt;&gt;();\r\n\t\t// Simply use forEach \r\n        // in the next line instead of &quot;new PersonDto(e)&quot; you will put your mapping method \r\n\t\tmap.forEach((k,v)-&gt;{\r\n\t\t\tmapDto.put(k, v.stream().map(e-&gt; new PersonDto(e)).collect(Collectors.toList()));\r\n\t\t\t\r\n\t\t});\r\n\t\t\r\n\t\tSystem.out.println(map);\r\n\t\tSystem.out.println(mapDto);\r\n\t\t\r\n\t\t}\r\n    }\r\n\r\n***Output :*** \r\n&gt; {1=[X], 2=[Y]}\r\n&gt; \r\n&gt; {1=[XDto], 2=[YDto]}","title":"Map a List to DTO inside map - java","body":"<p><em>You can create a new HashMap where you will put the old keys with a new values ( values will be the Dto created based on the original objects )</em></p>\n<pre><code>class Person {\nString name ;\npublic Person(String s) {\n    this.name=s;\n}\n@Override\npublic String toString() {\n    // TODO Auto-generated method stub\n    return name;\n}\n}\n\nclass PersonDto {\nString name;\npublic PersonDto(Person p) {\n    this.name=p.name+&quot;Dto&quot;;\n}\n@Override\npublic String toString() {\n    // TODO Auto-generated method stub\n    return name;\n}\n}\n\npublic class Main {\npublic static void main(String[] args) {\n// your initial HashMap \n    Map&lt;Integer, List&lt;Person&gt;&gt; map = new HashMap&lt;&gt;();\n    Person x =new Person(&quot;X&quot;);\n    Person y =new Person(&quot;Y&quot;);\n    List&lt;Person&gt; lst1 = new ArrayList&lt;&gt;();\n    lst1.add(x);\n    List&lt;Person&gt; lst2 = new ArrayList&lt;&gt;();\n    lst2.add(y);\n    \n    map.put(1, lst1);\n    map.put(2, lst2);\n    // create a new HashMap&lt;Integer, List&lt;MyObjectDto&gt;&gt; \n    Map&lt;Integer, List&lt;PersonDto&gt;&gt; mapDto = new HashMap&lt;&gt;();\n    // Simply use forEach \n    // in the next line instead of &quot;new PersonDto(e)&quot; you will put your mapping method \n    map.forEach((k,v)-&gt;{\n        mapDto.put(k, v.stream().map(e-&gt; new PersonDto(e)).collect(Collectors.toList()));\n        \n    });\n    \n    System.out.println(map);\n    System.out.println(mapDto);\n    \n    }\n}\n</code></pre>\n<p><em><strong>Output :</strong></em></p>\n<blockquote>\n<p>{1=[X], 2=[Y]}</p>\n<p>{1=[XDto], 2=[YDto]}</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1659609520,"creation_date":1639649655,"answer_id":70377227,"question_id":70376736,"body_markdown":"This is a way to go with the following simple call:\r\n\r\n```\r\nMap&lt;Integer, List&lt;MyObjectDto&gt;&gt; mappedCollection = collection.entrySet().stream()\r\n        .collect(Collectors.toMap(\r\n                Map.Entry::getKey, \r\n                e -&gt; e.getValue()\r\n                      .stream()\r\n                      .map(myObject -&gt; new MyObjectDto())  // mapping here\r\n                      .collect(Collectors.toList())));\r\n```\r\n\r\nBasically, you want to collect it into the same-structured map with the same key. Stream the set of entries `Set&lt;Map.Entry&lt;Integer, List&lt;MyObject&gt;&gt;&gt;` and map it into a new map using `Collectors.toMap(Function, Function)` where:\r\n - Key is the same key: `entry -&gt; entry.getKey()`\r\n - Value is the same value (`List`), except all `MyObject` objects are mapped into `MyObjectDto`, which can be performed with another stream.\r\n\r\nAs long as we don&#39;t know the structures of the objects to be mapped, you have to add it by yourself to the line with a comment.","title":"Map a List to DTO inside map - java","body":"<p>This is a way to go with the following simple call:</p>\n<pre><code>Map&lt;Integer, List&lt;MyObjectDto&gt;&gt; mappedCollection = collection.entrySet().stream()\n        .collect(Collectors.toMap(\n                Map.Entry::getKey, \n                e -&gt; e.getValue()\n                      .stream()\n                      .map(myObject -&gt; new MyObjectDto())  // mapping here\n                      .collect(Collectors.toList())));\n</code></pre>\n<p>Basically, you want to collect it into the same-structured map with the same key. Stream the set of entries <code>Set&lt;Map.Entry&lt;Integer, List&lt;MyObject&gt;&gt;&gt;</code> and map it into a new map using <code>Collectors.toMap(Function, Function)</code> where:</p>\n<ul>\n<li>Key is the same key: <code>entry -&gt; entry.getKey()</code></li>\n<li>Value is the same value (<code>List</code>), except all <code>MyObject</code> objects are mapped into <code>MyObjectDto</code>, which can be performed with another stream.</li>\n</ul>\n<p>As long as we don't know the structures of the objects to be mapped, you have to add it by yourself to the line with a comment.</p>\n"}],"owner":{"account_id":14619342,"reputation":23,"user_id":10558530,"display_name":"qba1992"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3256,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70377227,"answer_count":3,"score":2,"last_activity_date":1659609520,"creation_date":1639647359,"question_id":70376736,"body_markdown":"I have such collection: `Map&lt;Integer, List&lt;MyObject&gt;&gt; collection`\r\nI would like to map the whole list of `MyObject` to `MyObjectDTO` and return the whole map with the mapped list. \r\n\r\nSo return will be:\r\n``` Map&lt;Integer, List&lt;MyObjectDto&gt;&gt; collectionWithDtos ```\r\n\r\nWhat is the easiest and quickest way? I&#39;ve checked a couple of ways with streams but none of that produced results as I expected.\r\nThanks","title":"Map a List to DTO inside map - java","body":"<p>I have such collection: <code>Map&lt;Integer, List&lt;MyObject&gt;&gt; collection</code>\nI would like to map the whole list of <code>MyObject</code> to <code>MyObjectDTO</code> and return the whole map with the mapped list.</p>\n<p>So return will be:\n<code>Map&lt;Integer, List&lt;MyObjectDto&gt;&gt; collectionWithDtos</code></p>\n<p>What is the easiest and quickest way? I've checked a couple of ways with streams but none of that produced results as I expected.\nThanks</p>\n"},{"tags":["java","android","android-studio","retrofit"],"comments":[{"owner":{"account_id":10014547,"reputation":1156,"user_id":7406338,"display_name":"Morph21"},"score":0,"creation_date":1659609147,"post_id":73234139,"comment_id":129337385,"body_markdown":"you probably got xml response","body":"you probably got xml response"},{"owner":{"account_id":8959047,"reputation":15,"user_id":6682386,"display_name":"Rohit Barge"},"score":0,"creation_date":1659609352,"post_id":73234139,"comment_id":129337454,"body_markdown":"I got response in Json formate","body":"I got response in Json formate"},{"owner":{"account_id":10014547,"reputation":1156,"user_id":7406338,"display_name":"Morph21"},"score":0,"creation_date":1659609681,"post_id":73234139,"comment_id":129337571,"body_markdown":"Try to get your response as String instead of your POJO object and put it into some online json formatter and you will see what you have wrong there. Anyway it&#39;s an error with json format so something went wrong there","body":"Try to get your response as String instead of your POJO object and put it into some online json formatter and you will see what you have wrong there. Anyway it&#39;s an error with json format so something went wrong there"}],"owner":{"account_id":8959047,"reputation":15,"user_id":6682386,"display_name":"Rohit Barge"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":191,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659609292,"creation_date":1659608211,"question_id":73234139,"body_markdown":"I am using retrofit to fetch web API\r\n\r\nMy API Call as follows: \r\n\r\n    @POST(ApiConstant.ADD_MEMBER)\r\n    Call&lt;MemberResponse&gt; addMember(@Body Map&lt;String, Object&gt; map);\r\n\r\nResponse Call \r\n\r\n    HashMap&lt;String, Object&gt; list = new HashMap&lt;&gt;();\r\n        list.put(&quot;code&quot;, TinyDB.getInstance().getString(PrefrenceConstent.TRAINER_CODE));\r\n        list.put(&quot;first_name&quot;, TinyDB.getInstance().getString(PrefrenceConstent.KEY_NAME));\r\n        list.put(&quot;email&quot;, TinyDB.getInstance().getString(PrefrenceConstent.KEY_USER_EMAIL));\r\n        list.put(&quot;contact&quot;, TinyDB.getInstance().getString(PrefrenceConstent.KEY_USER_MOBILE));\r\n        list.put(&quot;last_name&quot;, &quot;Null&quot;);\r\n\r\n        try {\r\n            Response&lt;MemberResponse&gt; responseAllInvites = ApiBuilder.getApiInterfaceCoachPro().addMember(list).execute();\r\n            if (responseAllInvites.body() != null) {\r\n                Timber.e(&quot;Response: %s&quot;, responseAllInvites.body().getData());\r\n                MemberInfo invitationsList = responseAllInvites.body().getData();\r\n                String member_code = invitationsList.getMember_code();\r\n                Timber.e(&quot;Member Code: %s&quot;, member_code);\r\n            }\r\n        } catch (Exception e) {\r\n            return Result.failure();\r\n        }\r\n\r\nPOJO\r\n\r\n    public class MemberResponse {\r\n    @SerializedName(&quot;data&quot;)\r\n    @Expose\r\n    private MemberInfo data;\r\n\r\n    @SerializedName(&quot;Message&quot;)\r\n    @Expose\r\n    private String message;\r\n\r\n    public MemberInfo getData() {\r\n        return data;\r\n    }\r\n\r\n    public void setData(MemberInfo data) {\r\n        this.data = data;\r\n    }\r\n\r\n    public String getMessage() {\r\n        return message;\r\n    }\r\n\r\n    public void setMessage(String message) {\r\n        this.message = message;\r\n    }}\r\n\r\nExpected JSON Response\r\n\r\n    {\r\n    &quot;data&quot;: {\r\n        &quot;id&quot;: 84,\r\n        &quot;member_code&quot;: &quot;testcrm-72807-47474-12&quot;\r\n    },\r\n    &quot;Message&quot;: &quot;Member details were successfully created!&quot;}\r\n\r\n\r\nI am getting below error\r\n\r\n&gt; java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 10 path $.data","title":"Expected BEGIN_OBJECT but was String then Worker fail response","body":"<p>I am using retrofit to fetch web API</p>\n<p>My API Call as follows:</p>\n<pre><code>@POST(ApiConstant.ADD_MEMBER)\nCall&lt;MemberResponse&gt; addMember(@Body Map&lt;String, Object&gt; map);\n</code></pre>\n<p>Response Call</p>\n<pre><code>HashMap&lt;String, Object&gt; list = new HashMap&lt;&gt;();\n    list.put(&quot;code&quot;, TinyDB.getInstance().getString(PrefrenceConstent.TRAINER_CODE));\n    list.put(&quot;first_name&quot;, TinyDB.getInstance().getString(PrefrenceConstent.KEY_NAME));\n    list.put(&quot;email&quot;, TinyDB.getInstance().getString(PrefrenceConstent.KEY_USER_EMAIL));\n    list.put(&quot;contact&quot;, TinyDB.getInstance().getString(PrefrenceConstent.KEY_USER_MOBILE));\n    list.put(&quot;last_name&quot;, &quot;Null&quot;);\n\n    try {\n        Response&lt;MemberResponse&gt; responseAllInvites = ApiBuilder.getApiInterfaceCoachPro().addMember(list).execute();\n        if (responseAllInvites.body() != null) {\n            Timber.e(&quot;Response: %s&quot;, responseAllInvites.body().getData());\n            MemberInfo invitationsList = responseAllInvites.body().getData();\n            String member_code = invitationsList.getMember_code();\n            Timber.e(&quot;Member Code: %s&quot;, member_code);\n        }\n    } catch (Exception e) {\n        return Result.failure();\n    }\n</code></pre>\n<p>POJO</p>\n<pre><code>public class MemberResponse {\n@SerializedName(&quot;data&quot;)\n@Expose\nprivate MemberInfo data;\n\n@SerializedName(&quot;Message&quot;)\n@Expose\nprivate String message;\n\npublic MemberInfo getData() {\n    return data;\n}\n\npublic void setData(MemberInfo data) {\n    this.data = data;\n}\n\npublic String getMessage() {\n    return message;\n}\n\npublic void setMessage(String message) {\n    this.message = message;\n}}\n</code></pre>\n<p>Expected JSON Response</p>\n<pre><code>{\n&quot;data&quot;: {\n    &quot;id&quot;: 84,\n    &quot;member_code&quot;: &quot;testcrm-72807-47474-12&quot;\n},\n&quot;Message&quot;: &quot;Member details were successfully created!&quot;}\n</code></pre>\n<p>I am getting below error</p>\n<blockquote>\n<p>java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 10 path $.data</p>\n</blockquote>\n"},{"tags":["java","spring","security","nullpointerexception","jwt"],"comments":[{"owner":{"account_id":17360629,"reputation":1309,"user_id":12576990,"display_name":"Rafael"},"score":0,"creation_date":1581961957,"post_id":60267832,"comment_id":106604473,"body_markdown":"check this answer: https://stackoverflow.com/a/31402509/12576990","body":"check this answer: <a href=\"https://stackoverflow.com/a/31402509/12576990\">stackoverflow.com/a/31402509/12576990</a>"},{"owner":{"account_id":13547347,"reputation":2140,"user_id":9773274,"display_name":"NatFar"},"score":0,"creation_date":1581977077,"post_id":60267832,"comment_id":106610361,"body_markdown":"How do you add the filter?","body":"How do you add the filter?"},{"owner":{"account_id":12082059,"reputation":199,"user_id":10134272,"display_name":"Egor"},"score":0,"creation_date":1582038522,"post_id":60267832,"comment_id":106633983,"body_markdown":"NatFar, I add filter.","body":"NatFar, I add filter."},{"owner":{"account_id":8900088,"reputation":4307,"user_id":6643803,"accept_rate":81,"display_name":"akuma8"},"score":0,"creation_date":1582040187,"post_id":60267832,"comment_id":106635006,"body_markdown":"Maybe it&#39;s not related to your problem but I am wondering why are you trying to authenticate the user manually by parsing the JWT token? Since you are using Spring Security 5.2.2.RELEASE, all that job is already done for you. The only thing you have to do is to indicate the authorization server uri: https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#oauth2resourceserver-jwt-minimalconfiguration and adapt roles if needed: https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#oauth2resourceserver-jwt-authorization-extraction","body":"Maybe it&#39;s not related to your problem but I am wondering why are you trying to authenticate the user manually by parsing the JWT token? Since you are using Spring Security 5.2.2.RELEASE, all that job is already done for you. The only thing you have to do is to indicate the authorization server uri: <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#oauth2resourceserver-jwt-minimalconfiguration\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/site/docs/current/reference/&hellip;</a> and adapt roles if needed: <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#oauth2resourceserver-jwt-authorization-extraction\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/site/docs/current/reference/&hellip;</a>"},{"owner":{"account_id":12082059,"reputation":199,"user_id":10134272,"display_name":"Egor"},"score":0,"creation_date":1582042678,"post_id":60267832,"comment_id":106636599,"body_markdown":"akuma8, I don&#39;t have authorization server so I verify token myself.","body":"akuma8, I don&#39;t have authorization server so I verify token myself."}],"answers":[{"tags":[],"owner":{"account_id":11969855,"reputation":61,"user_id":8758620,"display_name":"James Williams"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604265055,"creation_date":1604265055,"answer_id":64637037,"question_id":60267832,"body_markdown":"A little late to the game here but i just had this same exception. The clue is the CGLIB proxies in the INFO above the null pointer and the Generic Filter exception. Do you have @Transactional anywhere in here? Have you defined any transactional functionality around these methods? I had @Transactional on my doFilterInternal. Removing the @Transactional fixed my issue.","title":"NullPointerException. Spring security filter failed","body":"<p>A little late to the game here but i just had this same exception. The clue is the CGLIB proxies in the INFO above the null pointer and the Generic Filter exception. Do you have @Transactional anywhere in here? Have you defined any transactional functionality around these methods? I had @Transactional on my doFilterInternal. Removing the @Transactional fixed my issue.</p>\n"},{"tags":[],"owner":{"account_id":7298812,"reputation":31,"user_id":5562470,"display_name":"Shaikh Dahood"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1606452011,"creation_date":1606452011,"answer_id":65032173,"question_id":60267832,"body_markdown":"I was facing exactly the same issue and it was the spring aop configuration that I had in my app. I added a pointcut to exclude GenricFilterBean class implementation and everything seems to work fine.","title":"NullPointerException. Spring security filter failed","body":"<p>I was facing exactly the same issue and it was the spring aop configuration that I had in my app. I added a pointcut to exclude GenricFilterBean class implementation and everything seems to work fine.</p>\n"},{"tags":[],"owner":{"account_id":12226886,"reputation":1130,"user_id":8924185,"display_name":"Ahmad Zahabi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1619694660,"creation_date":1619694660,"answer_id":67316219,"question_id":60267832,"body_markdown":"I faced the same issue and I resolved it in this way:\r\n\r\n1- create a custom annotation:\r\n\r\n    @Target(ElementType.METHOD)\r\n    public @interface NoLogging\r\n    {\r\n    }\r\n\r\n2- annotate the doFilterInternal \r\n\t\r\n\r\n        @Override\r\n    \t@NoLogging\r\n    \tprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n\r\n3- exclude the methods annotated with this annotation from AOP:\r\n\r\n    @Before(value = &quot;execution(* com.company..*..*(..)) &amp;&amp; !@annotation(com.company.aop.NoLogging)&quot;)\r\n    \tpublic void logEntry(JoinPoint joinPoint)","title":"NullPointerException. Spring security filter failed","body":"<p>I faced the same issue and I resolved it in this way:</p>\n<p>1- create a custom annotation:</p>\n<pre><code>@Target(ElementType.METHOD)\npublic @interface NoLogging\n{\n}\n</code></pre>\n<p>2- annotate the doFilterInternal</p>\n<pre><code>    @Override\n    @NoLogging\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n</code></pre>\n<p>3- exclude the methods annotated with this annotation from AOP:</p>\n<pre><code>@Before(value = &quot;execution(* com.company..*..*(..)) &amp;&amp; !@annotation(com.company.aop.NoLogging)&quot;)\n    public void logEntry(JoinPoint joinPoint)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11898721,"reputation":1,"user_id":8707310,"display_name":"Dmitry Murashov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656924505,"creation_date":1656924505,"answer_id":72854006,"question_id":60267832,"body_markdown":"I had this because didn&#39;t registered Filter with FilterRegistrationBean. After this error disappeared.\r\nhttps://www.techiedelight.com/how-to-define-custom-filters-spring-boot-application/\r\nsecond case","title":"NullPointerException. Spring security filter failed","body":"<p>I had this because didn't registered Filter with FilterRegistrationBean. After this error disappeared.\n<a href=\"https://www.techiedelight.com/how-to-define-custom-filters-spring-boot-application/\" rel=\"nofollow noreferrer\">https://www.techiedelight.com/how-to-define-custom-filters-spring-boot-application/</a>\nsecond case</p>\n"},{"tags":[],"owner":{"account_id":23167600,"reputation":21,"user_id":17267296,"display_name":"Abhinandan Sanduja"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659609242,"creation_date":1659608716,"answer_id":73234258,"question_id":60267832,"body_markdown":"I might be bit late here, but i also faced this issue and was able to debug the actual reason as to why it happens.\r\nSpring AOP creates proxies by extension and we have a `init()` defined in GenericFilterBean \r\n\r\n    public final void init(FilterConfig filterConfig) throws ServletException {\r\n    ...\r\n    }\r\nSince the init method is defined as **final** and final methods and classes can&#39;t be extended which is the necessity for creating proxies. Hence SpringAOP is not able to create a proper proxy for this method and delegation of method call from proxy object to target object fails and it returns **null** value from proxy object.\r\n\r\nIn short,\r\nAll the classes or methods which are defined as final in java will have issues when you are using SpringAOP.\r\n\r\nSo, the solution like other users have mentioned is to exclude the **GenericFilterBean** using AOP pointcuts.","title":"NullPointerException. Spring security filter failed","body":"<p>I might be bit late here, but i also faced this issue and was able to debug the actual reason as to why it happens.\nSpring AOP creates proxies by extension and we have a <code>init()</code> defined in GenericFilterBean</p>\n<pre><code>public final void init(FilterConfig filterConfig) throws ServletException {\n...\n}\n</code></pre>\n<p>Since the init method is defined as <strong>final</strong> and final methods and classes can't be extended which is the necessity for creating proxies. Hence SpringAOP is not able to create a proper proxy for this method and delegation of method call from proxy object to target object fails and it returns <strong>null</strong> value from proxy object.</p>\n<p>In short,\nAll the classes or methods which are defined as final in java will have issues when you are using SpringAOP.</p>\n<p>So, the solution like other users have mentioned is to exclude the <strong>GenericFilterBean</strong> using AOP pointcuts.</p>\n"}],"owner":{"account_id":12082059,"reputation":199,"user_id":10134272,"display_name":"Egor"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4748,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":5,"score":3,"last_activity_date":1659609242,"creation_date":1581961310,"question_id":60267832,"body_markdown":"I have no ideas why this app does not start displaying this error. I tried to use Spring Security and JWT.\r\n\r\n\r\n    2020-Feb-17 12:29:07 PM [main] INFO  org.springframework.aop.framework.CglibAopProxy - Unable to proxy interface-implementing method [public final void org.springframework.web.filter.OncePerRequestFilter.doFilter(javax.servlet.ServletRequest,javax.servlet.ServletResponse,javax.servlet.FilterChain) throws javax.servlet.ServletException,java.io.IOException] because it is marked as final: Consider using interface-based JDK proxies instead!\r\n    2020-Feb-17 12:29:07 PM [main] INFO  org.springframework.aop.framework.CglibAopProxy - Unable to proxy interface-implementing method [public final void org.springframework.web.filter.GenericFilterBean.init(javax.servlet.FilterConfig) throws javax.servlet.ServletException] because it is marked as final: Consider using interface-based JDK proxies instead!\r\n    2020-Feb-17 12:29:07 PM [main] ERROR org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Exception starting filter [jwtRequestFilter]\r\n    java.lang.NullPointerException: null\r\n    \tat org.springframework.web.filter.GenericFilterBean.init(GenericFilterBean.java:241) ~[spring-web-5.2.2.RELEASE.jar:5.2.2.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:270) ~[tomcat-embed-core-9.0.29.jar:9.0.29]\r\n    \tat org.apache.catalina.core.ApplicationFilterConfig.&lt;init&gt;(ApplicationFilterConfig.java:106) ~[tomcat-embed-core-9.0.29.jar:9.0.29]\r\n    \tat org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4533) [tomcat-embed-core-9.0.29.jar:9.0.29]\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5172) [tomcat-embed-core-9.0.29.jar:9.0.29]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) [tomcat-embed-core-9.0.29.jar:9.0.29]\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1384) [tomcat-embed-core-9.0.29.jar:9.0.29]\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1374) [tomcat-embed-core-9.0.29.jar:9.0.29]\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?]\r\n    \tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) [tomcat-embed-core-9.0.29.jar:9.0.29]\r\n    \tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140) [?:?]\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:909) [tomcat-embed-core-9.0.29.jar:9.0.29]\r\n    \tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:841) [tomcat-embed-core-9.0.29.jar:9.0.29]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) [tomcat-embed-core-9.0.29.jar:9.0.29]\r\n\r\nThis is filter code. I don&#39;t understand what is wrong with it. The application just crushed upon loading time with null pointer exception related to the security filter. \r\n\r\n    @Override\r\n        protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws ServletException, IOException {\r\n    \r\n            final String requestTokenHeader = request.getHeader(&quot;Authorization&quot;);\r\n            String email = null;\r\n            String jwtToken = null;\r\n            \r\n            if (requestTokenHeader != null &amp;&amp; requestTokenHeader.startsWith(&quot;FC &quot;)) {\r\n                jwtToken = requestTokenHeader.replace(&quot;FC &quot;, &quot;&quot;);\r\n                try {\r\n                    email = jwtTokenUtil.getEmailFromToken(jwtToken);\r\n                } catch (IllegalArgumentException e) {\r\n                    System.out.println(&quot;Unable to get JWT Token&quot;);\r\n                } catch (ExpiredJwtException e) {\r\n                    System.out.println(&quot;JWT Token has expired&quot;);\r\n                }\r\n            } else {\r\n                logger.warn(&quot;JWT Token does not begin with FC String&quot;);\r\n            }\r\n    \r\n            if (email != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\r\n                UserDetails userDetails = this.jwtUserDetailsService.loadUserByUsername(email);\r\n                if (jwtTokenUtil.validateToken(jwtToken, userDetails)) {\r\n                    UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\r\n                            userDetails, null, userDetails.getAuthorities());\r\n                    usernamePasswordAuthenticationToken\r\n                            .setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n                    SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\r\n                }\r\n            }\r\n            chain.doFilter(request, response);\r\n        }\r\n\r\n\r\n@UPDATE\r\n\r\nadded method where I add filter. \r\n\r\n    @Override\r\n        protected void configure(HttpSecurity httpSecurity) throws Exception {\r\n            httpSecurity.csrf().disable()\r\n                    .authorizeRequests().antMatchers(&quot;/service/**&quot;).permitAll()\r\n                    .anyRequest().authenticated().and()\r\n                    .exceptionHandling().authenticationEntryPoint(jwtAuthenticationEntryPoint)\r\n                    .and().sessionManagement()\r\n                    .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n            httpSecurity.addFilterBefore(jwtRequestFilter, UsernamePasswordAuthenticationFilter.class);\r\n        }","title":"NullPointerException. Spring security filter failed","body":"<p>I have no ideas why this app does not start displaying this error. I tried to use Spring Security and JWT.</p>\n\n<pre><code>2020-Feb-17 12:29:07 PM [main] INFO  org.springframework.aop.framework.CglibAopProxy - Unable to proxy interface-implementing method [public final void org.springframework.web.filter.OncePerRequestFilter.doFilter(javax.servlet.ServletRequest,javax.servlet.ServletResponse,javax.servlet.FilterChain) throws javax.servlet.ServletException,java.io.IOException] because it is marked as final: Consider using interface-based JDK proxies instead!\n2020-Feb-17 12:29:07 PM [main] INFO  org.springframework.aop.framework.CglibAopProxy - Unable to proxy interface-implementing method [public final void org.springframework.web.filter.GenericFilterBean.init(javax.servlet.FilterConfig) throws javax.servlet.ServletException] because it is marked as final: Consider using interface-based JDK proxies instead!\n2020-Feb-17 12:29:07 PM [main] ERROR org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Exception starting filter [jwtRequestFilter]\njava.lang.NullPointerException: null\n    at org.springframework.web.filter.GenericFilterBean.init(GenericFilterBean.java:241) ~[spring-web-5.2.2.RELEASE.jar:5.2.2.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:270) ~[tomcat-embed-core-9.0.29.jar:9.0.29]\n    at org.apache.catalina.core.ApplicationFilterConfig.&lt;init&gt;(ApplicationFilterConfig.java:106) ~[tomcat-embed-core-9.0.29.jar:9.0.29]\n    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4533) [tomcat-embed-core-9.0.29.jar:9.0.29]\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5172) [tomcat-embed-core-9.0.29.jar:9.0.29]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) [tomcat-embed-core-9.0.29.jar:9.0.29]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1384) [tomcat-embed-core-9.0.29.jar:9.0.29]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1374) [tomcat-embed-core-9.0.29.jar:9.0.29]\n    at java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?]\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) [tomcat-embed-core-9.0.29.jar:9.0.29]\n    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140) [?:?]\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:909) [tomcat-embed-core-9.0.29.jar:9.0.29]\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:841) [tomcat-embed-core-9.0.29.jar:9.0.29]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) [tomcat-embed-core-9.0.29.jar:9.0.29]\n</code></pre>\n\n<p>This is filter code. I don't understand what is wrong with it. The application just crushed upon loading time with null pointer exception related to the security filter. </p>\n\n<pre><code>@Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws ServletException, IOException {\n\n        final String requestTokenHeader = request.getHeader(\"Authorization\");\n        String email = null;\n        String jwtToken = null;\n\n        if (requestTokenHeader != null &amp;&amp; requestTokenHeader.startsWith(\"FC \")) {\n            jwtToken = requestTokenHeader.replace(\"FC \", \"\");\n            try {\n                email = jwtTokenUtil.getEmailFromToken(jwtToken);\n            } catch (IllegalArgumentException e) {\n                System.out.println(\"Unable to get JWT Token\");\n            } catch (ExpiredJwtException e) {\n                System.out.println(\"JWT Token has expired\");\n            }\n        } else {\n            logger.warn(\"JWT Token does not begin with FC String\");\n        }\n\n        if (email != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\n            UserDetails userDetails = this.jwtUserDetailsService.loadUserByUsername(email);\n            if (jwtTokenUtil.validateToken(jwtToken, userDetails)) {\n                UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\n                        userDetails, null, userDetails.getAuthorities());\n                usernamePasswordAuthenticationToken\n                        .setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n                SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\n            }\n        }\n        chain.doFilter(request, response);\n    }\n</code></pre>\n\n<p>@UPDATE</p>\n\n<p>added method where I add filter. </p>\n\n<pre><code>@Override\n    protected void configure(HttpSecurity httpSecurity) throws Exception {\n        httpSecurity.csrf().disable()\n                .authorizeRequests().antMatchers(\"/service/**\").permitAll()\n                .anyRequest().authenticated().and()\n                .exceptionHandling().authenticationEntryPoint(jwtAuthenticationEntryPoint)\n                .and().sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n        httpSecurity.addFilterBefore(jwtRequestFilter, UsernamePasswordAuthenticationFilter.class);\n    }\n</code></pre>\n"},{"tags":["java","apache-camel","swagger","openapi"],"answers":[{"tags":[],"owner":{"account_id":13497285,"reputation":127,"user_id":9737735,"display_name":"Joselo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659609034,"creation_date":1620830087,"answer_id":67505740,"question_id":67265296,"body_markdown":"Turns out this functionality was not present in camel (nor for swagger neither openapi) so I created a [Jira][1] for this. It was implemented by someone in the community and It&#39;s going to be ready for the next camel release.\r\n\r\n**UPDATE**\r\n\r\nThe improvement was done and is ready in Camel 3.10.0 onwards.\r\n\r\n  [1]: https://issues.apache.org/jira/browse/CAMEL-16558","title":"Mark an endpoint as deprecated with camel-swagger-java","body":"<p>Turns out this functionality was not present in camel (nor for swagger neither openapi) so I created a <a href=\"https://issues.apache.org/jira/browse/CAMEL-16558\" rel=\"nofollow noreferrer\">Jira</a> for this. It was implemented by someone in the community and It's going to be ready for the next camel release.</p>\n<p><strong>UPDATE</strong></p>\n<p>The improvement was done and is ready in Camel 3.10.0 onwards.</p>\n"}],"owner":{"account_id":13497285,"reputation":127,"user_id":9737735,"display_name":"Joselo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":430,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":67505740,"answer_count":1,"score":0,"last_activity_date":1659609034,"creation_date":1619434305,"question_id":67265296,"body_markdown":"Is there a way to mark a particular endpoint as deprecated in swagger using the modules camel-swagger-java or camel-openapi-java? \r\n\r\nReviewing the [openapi v2 specification][1] is possible to add the &quot;deprecated: true&quot; property to the documentation in order to deprecate and endpoint but I can&#39;t find a way to implement this using camel swagger or camel openapi. I was testing both demo projects from camel ([rest swagger example][2] and [rest openapi example][3]) and I couldn&#39;t implement this behaviour.\r\n\r\nIs there something that I&#39;m missing? I was also trying to find a ticket in [Camel&#39;s Jira portal][4] related to this issue and I didn&#39;t find any.\r\n\r\nThanks in advance for your help.\r\n\r\n\r\n  [1]: https://swagger.io/specification/v2/\r\n  [2]: https://github.com/apache/camel-spring-boot-examples/tree/main/rest-swagger\r\n  [3]: https://github.com/apache/camel-spring-boot-examples/tree/main/rest-openapi\r\n  [4]: https://issues.apache.org/jira/projects/CAMEL/issues/CAMEL-16553?filter=allopenissues","title":"Mark an endpoint as deprecated with camel-swagger-java","body":"<p>Is there a way to mark a particular endpoint as deprecated in swagger using the modules camel-swagger-java or camel-openapi-java?</p>\n<p>Reviewing the <a href=\"https://swagger.io/specification/v2/\" rel=\"nofollow noreferrer\">openapi v2 specification</a> is possible to add the &quot;deprecated: true&quot; property to the documentation in order to deprecate and endpoint but I can't find a way to implement this using camel swagger or camel openapi. I was testing both demo projects from camel (<a href=\"https://github.com/apache/camel-spring-boot-examples/tree/main/rest-swagger\" rel=\"nofollow noreferrer\">rest swagger example</a> and <a href=\"https://github.com/apache/camel-spring-boot-examples/tree/main/rest-openapi\" rel=\"nofollow noreferrer\">rest openapi example</a>) and I couldn't implement this behaviour.</p>\n<p>Is there something that I'm missing? I was also trying to find a ticket in <a href=\"https://issues.apache.org/jira/projects/CAMEL/issues/CAMEL-16553?filter=allopenissues\" rel=\"nofollow noreferrer\">Camel's Jira portal</a> related to this issue and I didn't find any.</p>\n<p>Thanks in advance for your help.</p>\n"},{"tags":["javascript","java","reactjs","spring-boot","axios"],"comments":[{"owner":{"account_id":3544434,"reputation":1492,"user_id":2960757,"display_name":"CodeTheorist"},"score":0,"creation_date":1659608956,"post_id":73233690,"comment_id":129337317,"body_markdown":"Does this answer your question? [How to download files using axios](https://stackoverflow.com/questions/41938718/how-to-download-files-using-axios)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/41938718/how-to-download-files-using-axios\">How to download files using axios</a>"}],"answers":[{"tags":[],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659608351,"creation_date":1659606879,"answer_id":73233842,"question_id":73233690,"body_markdown":"I think you should add `produces = MediaType.APPLICATION_OCTET_STREAM_VALUE` to `@GetMapping` annotation. If this doesn&#39;t help then try to return `ByteArrayResource` directly instead of wrapping it with `HttpEntity`.\r\n\r\nP.S. When I was implementing a similar controller for file downloading I did it like\r\n```java\r\n  @GetMapping(path = &quot;/downloadTranslatedFile/{translatedFileId}&quot;, produces = MediaType.APPLICATION_OCTET_STREAM_VALUE)\r\n  public Resource downloadFile(@PathVariable(&quot;translatedFileId&quot;) long translatedFileId) {\r\n    TranslatedFileEntity file = translatedFileRepository.findById(translatedFileId).orElseThrow(NullPointerException::new);\r\n\r\n    return readFromFile(file);\r\n  }\r\n\r\n  private ByteArrayResource readFromFile(TranslatedFileEntity file) {\r\n    return new ByteArrayResource(file.getData());\r\n  }\r\n```","title":"Spring RESTful + Spring: Return 200, but cannot download, how to fix?","body":"<p>I think you should add <code>produces = MediaType.APPLICATION_OCTET_STREAM_VALUE</code> to <code>@GetMapping</code> annotation. If this doesn't help then try to return <code>ByteArrayResource</code> directly instead of wrapping it with <code>HttpEntity</code>.</p>\n<p>P.S. When I was implementing a similar controller for file downloading I did it like</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @GetMapping(path = &quot;/downloadTranslatedFile/{translatedFileId}&quot;, produces = MediaType.APPLICATION_OCTET_STREAM_VALUE)\n  public Resource downloadFile(@PathVariable(&quot;translatedFileId&quot;) long translatedFileId) {\n    TranslatedFileEntity file = translatedFileRepository.findById(translatedFileId).orElseThrow(NullPointerException::new);\n\n    return readFromFile(file);\n  }\n\n  private ByteArrayResource readFromFile(TranslatedFileEntity file) {\n    return new ByteArrayResource(file.getData());\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3544434,"reputation":1492,"user_id":2960757,"display_name":"CodeTheorist"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659608936,"creation_date":1659608562,"answer_id":73234218,"question_id":73233690,"body_markdown":"By the looks of this, you&#39;re downloading the file using fetch, Axios or whatever, but not sure as you haven&#39;t included the HTTP client code.\r\n\r\nWhen the response has been received, you need to use a package like [File Saver][1] to actually save the file, otherwise the data will simply be disregarded.\r\n\r\nYou should also ensure that the correct headers are on the response:\r\n\r\n - Content-Disposition: &quot;attachment;filename=report.xls&quot;\r\n - Content-Type: &quot;application/octet-stream&quot;\r\n\r\nIf using Axios, you should also set `responseType: &#39;blob&#39;` as part of the request options, to ensure the data is downloaded as a Blob rather than JSON.\r\n\r\nUsing `file-saver`, you can also use this to download the file directly, if no security headers are required to download said file.\r\n\r\n  [1]: https://www.npmjs.com/package/file-saver","title":"Spring RESTful + Spring: Return 200, but cannot download, how to fix?","body":"<p>By the looks of this, you're downloading the file using fetch, Axios or whatever, but not sure as you haven't included the HTTP client code.</p>\n<p>When the response has been received, you need to use a package like <a href=\"https://www.npmjs.com/package/file-saver\" rel=\"nofollow noreferrer\">File Saver</a> to actually save the file, otherwise the data will simply be disregarded.</p>\n<p>You should also ensure that the correct headers are on the response:</p>\n<ul>\n<li>Content-Disposition: &quot;attachment;filename=report.xls&quot;</li>\n<li>Content-Type: &quot;application/octet-stream&quot;</li>\n</ul>\n<p>If using Axios, you should also set <code>responseType: 'blob'</code> as part of the request options, to ensure the data is downloaded as a Blob rather than JSON.</p>\n<p>Using <code>file-saver</code>, you can also use this to download the file directly, if no security headers are required to download said file.</p>\n"}],"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":240,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1659608936,"creation_date":1659606235,"question_id":73233690,"body_markdown":"Spring Boot 2.7.2, Java/JDK 18, PostgreSQL 14, Excel XLSX file. Java code\r\n\r\n```java\r\npackage com.example.controller;\r\n\r\nimport org.apache.commons.io.IOUtils;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.core.io.ByteArrayResource;\r\nimport org.springframework.http.HttpEntity;\r\nimport org.springframework.http.HttpHeaders;\r\nimport org.springframework.http.MediaType;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.CrossOrigin;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\n\r\n@CrossOrigin(origins = &quot;*&quot;, maxAge = 3600)\r\n@RestController\r\n@RequestMapping(&quot;/download&quot;)\r\npublic class DownloadController {\r\n\r\n    private static final Logger LOGGER = LoggerFactory.getLogger(DownloadController.class);\r\n\r\n    // GET http://localhost:80/download/B01-DN_01_Summary.xlsx\r\n\r\n// E:\\github\\spring_jwt\\src\\main\\resources\\FilesHere\\ImportExcel\\B01-DN_01_Summary.xlsx\r\n    @GetMapping(&quot;/{file_name}&quot;)\r\n    public HttpEntity&lt;ByteArrayResource&gt; createExcelWithTaskConfigurations(@PathVariable(&quot;file_name&quot;) String file_name) throws IOException {\r\n        InputStream inputStream = getClass().getResourceAsStream(&quot;/FilesHere/ImportExcel/&quot; + file_name);\r\n        byte[] excelContent = IOUtils.toByteArray(inputStream);\r\n        HttpHeaders httpHeaders = new HttpHeaders();\r\n        httpHeaders.set(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=&quot; + file_name);\r\n        httpHeaders.setContentType(MediaType.parseMediaType(&quot;application/vnd.ms-excel&quot;));\r\n        return new HttpEntity&lt;&gt;(new ByteArrayResource(excelContent), httpHeaders);\r\n    }\r\n\r\n}\r\n```\r\n\r\nReact 18.2.0\r\n\r\n```js\r\nimport React from &#39;react&#39;;\r\nimport DataGrid, {Column, Pager, Paging, FilterRow, Lookup} from &#39;devextreme-react/data-grid&#39;;\r\nimport apiClient from &quot;../../http-common&quot;;\r\nimport {Link} from &quot;react-router-dom&quot;;\r\nimport Button from &quot;devextreme-react/button&quot;;\r\n\r\nexport default function Import_excel() {\r\n    const [dataSource, setDataSource] = React.useState([]);\r\n\r\n    // React.useEffect(() =&gt; {\r\n    //     async function getData(file) {\r\n    //         const bearer_token = `Bearer ${localStorage.getItem(&#39;token&#39;)}`;\r\n    //         try {\r\n    //             const config = {\r\n    //                 headers: {\r\n    //                     Authorization: bearer_token\r\n    //                 }\r\n    //             };\r\n    //             const res = await apiClient.get(&#39;/download/&#39; + file, config); // &lt;== Here we use await keywords to get the result of the Promise, check internet if it&#39;s blurry for you\r\n    //             // setDataSource(res.data); // Maybe do some work on res.data to get the expected format\r\n    //             // console.log(res.data)\r\n    //         } catch (err) {\r\n    //             // here display a message to the user or something else\r\n    //             // console.error(err.message);\r\n    //         }\r\n    //     }\r\n    // }, []);\r\n\r\n\r\n    const dataSource2 = {\r\n        store: {\r\n            type: &quot;array&quot;,\r\n            key: &quot;file&quot;,\r\n            data: [{\r\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;Nh&#243;m Kh&#225;ch h&#224;ng, nh&#224; cung cấp&quot;,\r\n                &quot;file&quot;: &quot;Mau_danh_muc_nhom_KH_NCC.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;Kh&#225;ch h&#224;ng&quot;,\r\n                &quot;file&quot;: &quot;Mau_danh_muc_khach_hang.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;Nh&#224; cung cấp&quot;,\r\n                &quot;file&quot;: &quot;Mau_danh_muc_nha_cung_cap.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;Nh&#226;n vi&#234;n&quot;,\r\n                &quot;file&quot;: &quot;Mau_danh_muc_nhan_vien.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;Nh&#243;m vật tư, h&#224;ng h&#243;a, dịch vụ&quot;,\r\n                &quot;file&quot;: &quot;Mau_danh_muc_nhom_VTHH.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;Vật tư, h&#224;ng h&#243;a&quot;,\r\n                &quot;file&quot;: &quot;Danh_muc_VTHH_cap_nhat_gia_nhap_kho.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;Đối tượng Tập hợp chi ph&#237;&quot;,\r\n                &quot;file&quot;: &quot;Mau_danh_muc_doi_tuong_THCP.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;C&#244;ng tr&#236;nh&quot;,\r\n                &quot;file&quot;: &quot;Mau_danh_muc_cong_trinh.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;M&#227; thống k&#234;&quot;,\r\n                &quot;file&quot;: &quot;Mau_danh_muc_ma_thong_ke.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;Cơ cấu tổ chức&quot;,\r\n                &quot;file&quot;: &quot;Mau_danh_muc_co_cau_to_chuc.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;Kho&quot;,\r\n                &quot;file&quot;: &quot;Mau_danh_muc_kho.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;Khoản mục chi ph&#237;&quot;,\r\n                &quot;file&quot;: &quot;Mau_danh_muc_khoan_muc_chi_phi.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;Mục thu/chi&quot;,\r\n                &quot;file&quot;: &quot;Mau_danh_muc_muc_thu_chi.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Số dư&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;Số dư T&#224;i khoản Kế to&#225;n&quot;,\r\n                &quot;file&quot;: &quot;So_du_tai_khoan.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Số dư&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;Số dư T&#224;i khoản Ng&#226;n h&#224;ng&quot;,\r\n                &quot;file&quot;: &quot;So_du_tai_khoan_ngan_hang_VND.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Số dư&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;C&#244;ng nợ Kh&#225;ch h&#224;ng&quot;,\r\n                &quot;file&quot;: &quot;Cong_no_dau_ky_khach_hang.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Số dư&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;C&#244;ng nợ Nh&#224; cung cấp&quot;,\r\n                &quot;file&quot;: &quot;03_So_du_cong_no_nha_cung_cap.xls&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Số dư&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;C&#244;ng nợ Nh&#226;n vi&#234;n&quot;,\r\n                &quot;file&quot;: &quot;04_So_du_cong_no_nhan_vien.xls&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Số dư&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;Tồn kho vật tư, h&#224;ng h&#243;a&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Số dư&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;Chi ph&#237; dở dang theo Đối tượng tập hợp chi ph&#237;&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Số dư&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;Chi ph&#237; dở dang theo C&#244;ng tr&#236;nh&quot;,\r\n                &quot;file&quot;: &quot;Chi_phi_do_dang_cong_trinh.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Số dư&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;Chi ph&#237; dở dang theo Đơn đặt h&#224;ng&quot;,\r\n                &quot;file&quot;: &quot;Chi_phi_do_dang_don_hang.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Số dư&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;Chi ph&#237; dở dang theo Hợp đồng b&#225;n&quot;,\r\n                &quot;file&quot;: &quot;Chi_phi_do_dang_hop_dong.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Số dư&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;Khai b&#225;o T&#224;i sản cố định đầu kỳ&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Số dư&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;Khai b&#225;o CCDC đầu kỳ&quot;,\r\n                &quot;file&quot;: &quot;06_Cong_cu_dung_cu_dau_ky.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Số dư&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;Doanh thu nhận trước đầu kỳ&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Số dư&quot;,\r\n                &quot;sub_group&quot;: &quot;&quot;,\r\n                &quot;name&quot;: &quot;Chi ph&#237; trả trước đầu kỳ&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Quỹ&quot;,\r\n                &quot;name&quot;: &quot;Phiếu thu&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Quỹ&quot;,\r\n                &quot;name&quot;: &quot;Phiếu chi&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Ng&#226;n h&#224;ng&quot;,\r\n                &quot;name&quot;: &quot;Thu tiền gửi&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Ng&#226;n h&#224;ng&quot;,\r\n                &quot;name&quot;: &quot;Chi tiền gửi&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Ng&#226;n h&#224;ng&quot;,\r\n                &quot;name&quot;: &quot;Chuyển tiền nội bộ&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Khế ước vay&quot;,\r\n                &quot;name&quot;: &quot;Hợp đồng t&#237;n dụng&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Khế ước vay&quot;,\r\n                &quot;name&quot;: &quot;Khế ước vay&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Khế ước vay&quot;,\r\n                &quot;name&quot;: &quot;Khế ước vay đầu kỳ&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Mua h&#224;ng&quot;,\r\n                &quot;name&quot;: &quot;Đơn mua h&#224;ng&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Mua h&#224;ng&quot;,\r\n                &quot;name&quot;: &quot;Hợp đồng mua h&#224;ng&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Mua h&#224;ng&quot;,\r\n                &quot;name&quot;: &quot;Mua h&#224;ng qua kho&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Mua h&#224;ng&quot;,\r\n                &quot;name&quot;: &quot;Mua h&#224;ng kh&#244;ng qua kho&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Mua h&#224;ng&quot;,\r\n                &quot;name&quot;: &quot;Mua h&#224;ng nhiều h&#243;a đơn qua kho&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Mua h&#224;ng&quot;,\r\n                &quot;name&quot;: &quot;Mua h&#224;ng nhiều h&#243;a đơn kh&#244;ng qua kho&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Mua h&#224;ng&quot;,\r\n                &quot;name&quot;: &quot;Mua dịch vụ&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Mua h&#224;ng&quot;,\r\n                &quot;name&quot;: &quot;Mua h&#224;ng trả lại qua kho&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Mua h&#224;ng&quot;,\r\n                &quot;name&quot;: &quot;H&#224;ng mua trả lại kh&#244;ng qua kho&quot;,\r\n                &quot;file&quot;: &quot;Tra_lai_hang_mua_khong_qua_kho.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Mua h&#224;ng&quot;,\r\n                &quot;name&quot;: &quot;H&#224;ng mua giảm gi&#225;&quot;,\r\n                &quot;file&quot;: &quot;Hang_mua_giam_gia_VND.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;B&#225;n h&#224;ng&quot;,\r\n                &quot;name&quot;: &quot;B&#225;o gi&#225;&quot;,\r\n                &quot;file&quot;: &quot;Bao_gia.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;B&#225;n h&#224;ng&quot;,\r\n                &quot;name&quot;: &quot;Đơn đặt h&#224;ng&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;B&#225;n h&#224;ng&quot;,\r\n                &quot;name&quot;: &quot;B&#225;n h&#224;ng&quot;,\r\n                &quot;file&quot;: &quot;Ban_hang_VND.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;B&#225;n h&#224;ng&quot;,\r\n                &quot;name&quot;: &quot;H&#243;a đơn b&#225;n h&#224;ng&quot;,\r\n                &quot;file&quot;: &quot;Hoa_don_ban_hang_VND.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;B&#225;n h&#224;ng&quot;,\r\n                &quot;name&quot;: &quot;H&#224;ng b&#225;n trả lại&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;B&#225;n h&#224;ng&quot;,\r\n                &quot;name&quot;: &quot;H&#224;ng b&#225;n giảm gi&#225;&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;B&#225;n h&#224;ng&quot;,\r\n                &quot;name&quot;: &quot;Doanh thu nhận trước đầu kỳ&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;B&#225;n h&#224;ng&quot;,\r\n                &quot;name&quot;: &quot;Danh thu nhận trước&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Kho&quot;,\r\n                &quot;name&quot;: &quot;Chuyển kho&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Kho&quot;,\r\n                &quot;name&quot;: &quot;Nhập kho&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Kho&quot;,\r\n                &quot;name&quot;: &quot;Xuất kho&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Kho&quot;,\r\n                &quot;name&quot;: &quot;Lệnh sản xuất&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Kho&quot;,\r\n                &quot;name&quot;: &quot;Lắp r&#225;p, th&#225;o dỡ&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;C&#244;ng cụ, dụng cụ&quot;,\r\n                &quot;name&quot;: &quot;Ghi tăng&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;T&#224;i sản cố định&quot;,\r\n                &quot;name&quot;: &quot;Ghi tăng&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Gi&#225; th&#224;nh&quot;,\r\n                &quot;name&quot;: &quot;Định mức nguy&#234;n vật liệu c&#244;ng tr&#236;nh&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Gi&#225; th&#224;nh&quot;,\r\n                &quot;name&quot;: &quot;Định mức gi&#225; th&#224;nh phẩm&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Gi&#225; th&#224;nh&quot;,\r\n                &quot;name&quot;: &quot;Định mức ph&#226;n bổ theo đối tượng THCP&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Gi&#225; th&#224;nh&quot;,\r\n                &quot;name&quot;: &quot;Định mức ph&#226;n bổ theo c&#244;ng tr&#236;nh&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Tổng hợp&quot;,\r\n                &quot;name&quot;: &quot;Chứng từ ngiệp vụ kh&#225;c&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Tổng hợp&quot;,\r\n                &quot;name&quot;: &quot;Chứng từ quyết to&#225;n tạm ứng&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Tổng hợp&quot;,\r\n                &quot;name&quot;: &quot;Chi ph&#237; trả trước đầu kỳ&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Tổng hợp&quot;,\r\n                &quot;name&quot;: &quot;Chi ph&#237; trả trước&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;Hợp đồng&quot;,\r\n                &quot;name&quot;: &quot;Hợp đồng b&#225;n&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;M&#227; quy c&#225;ch&quot;,\r\n                &quot;name&quot;: &quot;Nhập khẩu m&#227; quy c&#225;ch cho chứng từ nhập kho&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;M&#227; quy c&#225;ch&quot;,\r\n                &quot;name&quot;: &quot;Nhập khẩu m&#227; quy c&#225;ch cho chứng từ b&#225;n h&#224;ng, xuất kho&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }, {\r\n                &quot;group&quot;: &quot;Chứng từ&quot;,\r\n                &quot;sub_group&quot;: &quot;M&#227; quy c&#225;ch&quot;,\r\n                &quot;name&quot;: &quot;Nhập khẩu m&#227; quy c&#225;ch cho chứng từ chuyển kho&quot;,\r\n                &quot;file&quot;: &quot;nv.xlsx&quot;\r\n            }\r\n            ]\r\n        }\r\n    };\r\n\r\n    async function getData(file) {\r\n        const bearer_token = `Bearer ${localStorage.getItem(&#39;token&#39;)}`;\r\n        try {\r\n            const config = {\r\n                headers: {\r\n                    Authorization: bearer_token\r\n                }\r\n            };\r\n            const res = await apiClient.get(&#39;/download/&#39; + file, config); // &lt;== Here we use await keywords to get the result of the Promise, check internet if it&#39;s blurry for you\r\n            // setDataSource(res.data); // Maybe do some work on res.data to get the expected format\r\n            // console.log(res.data)\r\n        } catch (err) {\r\n            // here display a message to the user or something else\r\n            // console.error(err.message);\r\n        }\r\n    }\r\n\r\n\r\n    function DiffCell(cellData) {\r\n        return (\r\n            &lt;Button onClick={() =&gt; {\r\n              console.log(&quot;he&gt;&gt;&gt;&quot;)\r\n              console.log(cellData.data.file)\r\n                getData(cellData.data.file).then(r =&gt; r)\r\n              }}\r\n\r\n            &gt;Tải về&lt;/Button&gt;\r\n        );\r\n    }\r\n\r\n    return (\r\n        &lt;React.Fragment&gt;\r\n            &lt;h2 className={&#39;content-block&#39;}&gt;Nhập dữ liệu từ Excel&lt;/h2&gt;\r\n            &lt;DataGrid className={&#39;dx-card wide-card&#39;} dataSource={dataSource2}\r\n                      showBorders={true}\r\n                      showColumnLines={true}\r\n                      allowColumnResizing={true}\r\n                      allowColumnReordering={true}\r\n                      focusedRowEnabled={true}\r\n                      defaultFocusedRowIndex={0}\r\n                      columnAutoWidth={true}\r\n                      columnHidingEnabled={true}&gt;\r\n\r\n                &lt;Paging defaultPageSize={100}/&gt;\r\n                &lt;Pager showPageSizeSelector={true} showInfo={true}/&gt;\r\n                &lt;FilterRow visible={true}/&gt;\r\n\r\n                &lt;Column dataField={&#39;group&#39;} name={&#39;group&#39;} width={290} caption={&#39;Nh&#243;m dữ liệu&#39;} dataType=&quot;string&quot;\r\n                        allowSorting={true} hidingPriority={1} groupIndex={0}/&gt;\r\n                &lt;Column dataField={&#39;sub_group&#39;} name={&#39;sub_group&#39;} width={290} caption={&#39;Nh&#243;m con&#39;} dataType=&quot;string&quot;\r\n                        allowSorting={true} hidingPriority={1} groupIndex={1}/&gt;\r\n                &lt;Column dataField={&#39;name&#39;} name={&#39;name&#39;} width={200} caption={&#39;T&#234;n&#39;} dataType=&quot;string&quot;\r\n                        allowSorting={true} hidingPriority={8}/&gt;\r\n                &lt;Column width={190} caption={&#39;Tải về&#39;} cellRender={DiffCell}&gt;\r\n\r\n                &lt;/Column&gt;\r\n            &lt;/DataGrid&gt;\r\n        &lt;/React.Fragment&gt;\r\n    )\r\n}\r\n\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\nSpring RESTful + Spring: Return 200, but cannot download, how to fix?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/maCtW.png\r\n  [2]: https://i.stack.imgur.com/X30xG.png","title":"Spring RESTful + Spring: Return 200, but cannot download, how to fix?","body":"<p>Spring Boot 2.7.2, Java/JDK 18, PostgreSQL 14, Excel XLSX file. Java code</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.controller;\n\nimport org.apache.commons.io.IOUtils;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.core.io.ByteArrayResource;\nimport org.springframework.http.HttpEntity;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.CrossOrigin;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.io.IOException;\nimport java.io.InputStream;\n\n@CrossOrigin(origins = &quot;*&quot;, maxAge = 3600)\n@RestController\n@RequestMapping(&quot;/download&quot;)\npublic class DownloadController {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(DownloadController.class);\n\n    // GET http://localhost:80/download/B01-DN_01_Summary.xlsx\n\n// E:\\github\\spring_jwt\\src\\main\\resources\\FilesHere\\ImportExcel\\B01-DN_01_Summary.xlsx\n    @GetMapping(&quot;/{file_name}&quot;)\n    public HttpEntity&lt;ByteArrayResource&gt; createExcelWithTaskConfigurations(@PathVariable(&quot;file_name&quot;) String file_name) throws IOException {\n        InputStream inputStream = getClass().getResourceAsStream(&quot;/FilesHere/ImportExcel/&quot; + file_name);\n        byte[] excelContent = IOUtils.toByteArray(inputStream);\n        HttpHeaders httpHeaders = new HttpHeaders();\n        httpHeaders.set(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=&quot; + file_name);\n        httpHeaders.setContentType(MediaType.parseMediaType(&quot;application/vnd.ms-excel&quot;));\n        return new HttpEntity&lt;&gt;(new ByteArrayResource(excelContent), httpHeaders);\n    }\n\n}\n</code></pre>\n<p>React 18.2.0</p>\n<pre class=\"lang-js prettyprint-override\"><code>import React from 'react';\nimport DataGrid, {Column, Pager, Paging, FilterRow, Lookup} from 'devextreme-react/data-grid';\nimport apiClient from &quot;../../http-common&quot;;\nimport {Link} from &quot;react-router-dom&quot;;\nimport Button from &quot;devextreme-react/button&quot;;\n\nexport default function Import_excel() {\n    const [dataSource, setDataSource] = React.useState([]);\n\n    // React.useEffect(() =&gt; {\n    //     async function getData(file) {\n    //         const bearer_token = `Bearer ${localStorage.getItem('token')}`;\n    //         try {\n    //             const config = {\n    //                 headers: {\n    //                     Authorization: bearer_token\n    //                 }\n    //             };\n    //             const res = await apiClient.get('/download/' + file, config); // &lt;== Here we use await keywords to get the result of the Promise, check internet if it's blurry for you\n    //             // setDataSource(res.data); // Maybe do some work on res.data to get the expected format\n    //             // console.log(res.data)\n    //         } catch (err) {\n    //             // here display a message to the user or something else\n    //             // console.error(err.message);\n    //         }\n    //     }\n    // }, []);\n\n\n    const dataSource2 = {\n        store: {\n            type: &quot;array&quot;,\n            key: &quot;file&quot;,\n            data: [{\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Nhóm Khách hàng, nhà cung cấp&quot;,\n                &quot;file&quot;: &quot;Mau_danh_muc_nhom_KH_NCC.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Khách hàng&quot;,\n                &quot;file&quot;: &quot;Mau_danh_muc_khach_hang.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Nhà cung cấp&quot;,\n                &quot;file&quot;: &quot;Mau_danh_muc_nha_cung_cap.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Nhân viên&quot;,\n                &quot;file&quot;: &quot;Mau_danh_muc_nhan_vien.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Nhóm vật tư, hàng hóa, dịch vụ&quot;,\n                &quot;file&quot;: &quot;Mau_danh_muc_nhom_VTHH.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Vật tư, hàng hóa&quot;,\n                &quot;file&quot;: &quot;Danh_muc_VTHH_cap_nhat_gia_nhap_kho.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Đối tượng Tập hợp chi phí&quot;,\n                &quot;file&quot;: &quot;Mau_danh_muc_doi_tuong_THCP.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Công trình&quot;,\n                &quot;file&quot;: &quot;Mau_danh_muc_cong_trinh.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Mã thống kê&quot;,\n                &quot;file&quot;: &quot;Mau_danh_muc_ma_thong_ke.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Cơ cấu tổ chức&quot;,\n                &quot;file&quot;: &quot;Mau_danh_muc_co_cau_to_chuc.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Kho&quot;,\n                &quot;file&quot;: &quot;Mau_danh_muc_kho.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Khoản mục chi phí&quot;,\n                &quot;file&quot;: &quot;Mau_danh_muc_khoan_muc_chi_phi.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Dữ liệu Danh mục&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Mục thu/chi&quot;,\n                &quot;file&quot;: &quot;Mau_danh_muc_muc_thu_chi.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Số dư&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Số dư Tài khoản Kế toán&quot;,\n                &quot;file&quot;: &quot;So_du_tai_khoan.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Số dư&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Số dư Tài khoản Ngân hàng&quot;,\n                &quot;file&quot;: &quot;So_du_tai_khoan_ngan_hang_VND.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Số dư&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Công nợ Khách hàng&quot;,\n                &quot;file&quot;: &quot;Cong_no_dau_ky_khach_hang.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Số dư&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Công nợ Nhà cung cấp&quot;,\n                &quot;file&quot;: &quot;03_So_du_cong_no_nha_cung_cap.xls&quot;\n            }, {\n                &quot;group&quot;: &quot;Số dư&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Công nợ Nhân viên&quot;,\n                &quot;file&quot;: &quot;04_So_du_cong_no_nhan_vien.xls&quot;\n            }, {\n                &quot;group&quot;: &quot;Số dư&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Tồn kho vật tư, hàng hóa&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Số dư&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Chi phí dở dang theo Đối tượng tập hợp chi phí&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Số dư&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Chi phí dở dang theo Công trình&quot;,\n                &quot;file&quot;: &quot;Chi_phi_do_dang_cong_trinh.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Số dư&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Chi phí dở dang theo Đơn đặt hàng&quot;,\n                &quot;file&quot;: &quot;Chi_phi_do_dang_don_hang.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Số dư&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Chi phí dở dang theo Hợp đồng bán&quot;,\n                &quot;file&quot;: &quot;Chi_phi_do_dang_hop_dong.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Số dư&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Khai báo Tài sản cố định đầu kỳ&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Số dư&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Khai báo CCDC đầu kỳ&quot;,\n                &quot;file&quot;: &quot;06_Cong_cu_dung_cu_dau_ky.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Số dư&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Doanh thu nhận trước đầu kỳ&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Số dư&quot;,\n                &quot;sub_group&quot;: &quot;&quot;,\n                &quot;name&quot;: &quot;Chi phí trả trước đầu kỳ&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Quỹ&quot;,\n                &quot;name&quot;: &quot;Phiếu thu&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Quỹ&quot;,\n                &quot;name&quot;: &quot;Phiếu chi&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Ngân hàng&quot;,\n                &quot;name&quot;: &quot;Thu tiền gửi&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Ngân hàng&quot;,\n                &quot;name&quot;: &quot;Chi tiền gửi&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Ngân hàng&quot;,\n                &quot;name&quot;: &quot;Chuyển tiền nội bộ&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Khế ước vay&quot;,\n                &quot;name&quot;: &quot;Hợp đồng tín dụng&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Khế ước vay&quot;,\n                &quot;name&quot;: &quot;Khế ước vay&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Khế ước vay&quot;,\n                &quot;name&quot;: &quot;Khế ước vay đầu kỳ&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Mua hàng&quot;,\n                &quot;name&quot;: &quot;Đơn mua hàng&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Mua hàng&quot;,\n                &quot;name&quot;: &quot;Hợp đồng mua hàng&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Mua hàng&quot;,\n                &quot;name&quot;: &quot;Mua hàng qua kho&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Mua hàng&quot;,\n                &quot;name&quot;: &quot;Mua hàng không qua kho&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Mua hàng&quot;,\n                &quot;name&quot;: &quot;Mua hàng nhiều hóa đơn qua kho&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Mua hàng&quot;,\n                &quot;name&quot;: &quot;Mua hàng nhiều hóa đơn không qua kho&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Mua hàng&quot;,\n                &quot;name&quot;: &quot;Mua dịch vụ&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Mua hàng&quot;,\n                &quot;name&quot;: &quot;Mua hàng trả lại qua kho&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Mua hàng&quot;,\n                &quot;name&quot;: &quot;Hàng mua trả lại không qua kho&quot;,\n                &quot;file&quot;: &quot;Tra_lai_hang_mua_khong_qua_kho.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Mua hàng&quot;,\n                &quot;name&quot;: &quot;Hàng mua giảm giá&quot;,\n                &quot;file&quot;: &quot;Hang_mua_giam_gia_VND.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Bán hàng&quot;,\n                &quot;name&quot;: &quot;Báo giá&quot;,\n                &quot;file&quot;: &quot;Bao_gia.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Bán hàng&quot;,\n                &quot;name&quot;: &quot;Đơn đặt hàng&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Bán hàng&quot;,\n                &quot;name&quot;: &quot;Bán hàng&quot;,\n                &quot;file&quot;: &quot;Ban_hang_VND.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Bán hàng&quot;,\n                &quot;name&quot;: &quot;Hóa đơn bán hàng&quot;,\n                &quot;file&quot;: &quot;Hoa_don_ban_hang_VND.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Bán hàng&quot;,\n                &quot;name&quot;: &quot;Hàng bán trả lại&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Bán hàng&quot;,\n                &quot;name&quot;: &quot;Hàng bán giảm giá&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Bán hàng&quot;,\n                &quot;name&quot;: &quot;Doanh thu nhận trước đầu kỳ&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Bán hàng&quot;,\n                &quot;name&quot;: &quot;Danh thu nhận trước&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Kho&quot;,\n                &quot;name&quot;: &quot;Chuyển kho&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Kho&quot;,\n                &quot;name&quot;: &quot;Nhập kho&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Kho&quot;,\n                &quot;name&quot;: &quot;Xuất kho&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Kho&quot;,\n                &quot;name&quot;: &quot;Lệnh sản xuất&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Kho&quot;,\n                &quot;name&quot;: &quot;Lắp ráp, tháo dỡ&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Công cụ, dụng cụ&quot;,\n                &quot;name&quot;: &quot;Ghi tăng&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Tài sản cố định&quot;,\n                &quot;name&quot;: &quot;Ghi tăng&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Giá thành&quot;,\n                &quot;name&quot;: &quot;Định mức nguyên vật liệu công trình&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Giá thành&quot;,\n                &quot;name&quot;: &quot;Định mức giá thành phẩm&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Giá thành&quot;,\n                &quot;name&quot;: &quot;Định mức phân bổ theo đối tượng THCP&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Giá thành&quot;,\n                &quot;name&quot;: &quot;Định mức phân bổ theo công trình&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Tổng hợp&quot;,\n                &quot;name&quot;: &quot;Chứng từ ngiệp vụ khác&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Tổng hợp&quot;,\n                &quot;name&quot;: &quot;Chứng từ quyết toán tạm ứng&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Tổng hợp&quot;,\n                &quot;name&quot;: &quot;Chi phí trả trước đầu kỳ&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Tổng hợp&quot;,\n                &quot;name&quot;: &quot;Chi phí trả trước&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Hợp đồng&quot;,\n                &quot;name&quot;: &quot;Hợp đồng bán&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Mã quy cách&quot;,\n                &quot;name&quot;: &quot;Nhập khẩu mã quy cách cho chứng từ nhập kho&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Mã quy cách&quot;,\n                &quot;name&quot;: &quot;Nhập khẩu mã quy cách cho chứng từ bán hàng, xuất kho&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }, {\n                &quot;group&quot;: &quot;Chứng từ&quot;,\n                &quot;sub_group&quot;: &quot;Mã quy cách&quot;,\n                &quot;name&quot;: &quot;Nhập khẩu mã quy cách cho chứng từ chuyển kho&quot;,\n                &quot;file&quot;: &quot;nv.xlsx&quot;\n            }\n            ]\n        }\n    };\n\n    async function getData(file) {\n        const bearer_token = `Bearer ${localStorage.getItem('token')}`;\n        try {\n            const config = {\n                headers: {\n                    Authorization: bearer_token\n                }\n            };\n            const res = await apiClient.get('/download/' + file, config); // &lt;== Here we use await keywords to get the result of the Promise, check internet if it's blurry for you\n            // setDataSource(res.data); // Maybe do some work on res.data to get the expected format\n            // console.log(res.data)\n        } catch (err) {\n            // here display a message to the user or something else\n            // console.error(err.message);\n        }\n    }\n\n\n    function DiffCell(cellData) {\n        return (\n            &lt;Button onClick={() =&gt; {\n              console.log(&quot;he&gt;&gt;&gt;&quot;)\n              console.log(cellData.data.file)\n                getData(cellData.data.file).then(r =&gt; r)\n              }}\n\n            &gt;Tải về&lt;/Button&gt;\n        );\n    }\n\n    return (\n        &lt;React.Fragment&gt;\n            &lt;h2 className={'content-block'}&gt;Nhập dữ liệu từ Excel&lt;/h2&gt;\n            &lt;DataGrid className={'dx-card wide-card'} dataSource={dataSource2}\n                      showBorders={true}\n                      showColumnLines={true}\n                      allowColumnResizing={true}\n                      allowColumnReordering={true}\n                      focusedRowEnabled={true}\n                      defaultFocusedRowIndex={0}\n                      columnAutoWidth={true}\n                      columnHidingEnabled={true}&gt;\n\n                &lt;Paging defaultPageSize={100}/&gt;\n                &lt;Pager showPageSizeSelector={true} showInfo={true}/&gt;\n                &lt;FilterRow visible={true}/&gt;\n\n                &lt;Column dataField={'group'} name={'group'} width={290} caption={'Nhóm dữ liệu'} dataType=&quot;string&quot;\n                        allowSorting={true} hidingPriority={1} groupIndex={0}/&gt;\n                &lt;Column dataField={'sub_group'} name={'sub_group'} width={290} caption={'Nhóm con'} dataType=&quot;string&quot;\n                        allowSorting={true} hidingPriority={1} groupIndex={1}/&gt;\n                &lt;Column dataField={'name'} name={'name'} width={200} caption={'Tên'} dataType=&quot;string&quot;\n                        allowSorting={true} hidingPriority={8}/&gt;\n                &lt;Column width={190} caption={'Tải về'} cellRender={DiffCell}&gt;\n\n                &lt;/Column&gt;\n            &lt;/DataGrid&gt;\n        &lt;/React.Fragment&gt;\n    )\n}\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/maCtW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/maCtW.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/X30xG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/X30xG.png\" alt=\"enter image description here\" /></a></p>\n<p>Spring RESTful + Spring: Return 200, but cannot download, how to fix?</p>\n"},{"tags":["java","selenium-webdriver","captcha"],"comments":[{"owner":{"account_id":479680,"reputation":68980,"user_id":892493,"accept_rate":100,"display_name":"drew010"},"score":0,"creation_date":1524795011,"post_id":50038628,"comment_id":87124952,"body_markdown":"Recaptcha knows the difference between your Selenium session that has no previous cookies vs your normal browser where Google knows about you.  The site probably doesn&#39;t have any selenium specific detection, though it&#39;s easy to do.  Normally, you&#39;ll detect no mouse movements (mouseover, mousemove etc) under selenium control.","body":"Recaptcha knows the difference between your Selenium session that has no previous cookies vs your normal browser where Google knows about you.  The site probably doesn&#39;t have any selenium specific detection, though it&#39;s easy to do.  Normally, you&#39;ll detect no mouse movements (mouseover, mousemove etc) under selenium control."}],"answers":[{"tags":[],"owner":{"account_id":7085509,"reputation":447,"user_id":5422437,"display_name":"Zhivko.Kostadinov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659608837,"creation_date":1524752708,"answer_id":50045504,"question_id":50038628,"body_markdown":"The main goal of Captcha is: an application to prevent unauthorized access and automated accessing of the websites using any tools/bots. Selenium(or any Automation Tool) cannot read CAPTCHAs.\r\n\r\nSo, if y can, mock this service in the staging/test environment.\r\nAlso, Captcha is an outside service.\r\nIt&#39;s not necessary to test Captcha behavior, right?\r\n\r\nHowever (as for everything, a hack is available), you can use some software/websites to convert ‘image to text’ (which would be not ‘always’ correct!)\r\n\r\nAnother thing, we can set cookies for Captcha. The secret key for captcha should be used in this case.\r\n","title":"How to hide that browser is under SeleniumWebdriver control","body":"<p>The main goal of Captcha is: an application to prevent unauthorized access and automated accessing of the websites using any tools/bots. Selenium(or any Automation Tool) cannot read CAPTCHAs.</p>\n<p>So, if y can, mock this service in the staging/test environment.\nAlso, Captcha is an outside service.\nIt's not necessary to test Captcha behavior, right?</p>\n<p>However (as for everything, a hack is available), you can use some software/websites to convert ‘image to text’ (which would be not ‘always’ correct!)</p>\n<p>Another thing, we can set cookies for Captcha. The secret key for captcha should be used in this case.</p>\n"}],"owner":{"account_id":12706527,"reputation":999,"user_id":9231614,"display_name":"kris82pl"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":910,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659608837,"creation_date":1524732346,"question_id":50038628,"body_markdown":"Is it any way to do it ? I have automated script which searches through website with captcha and I noticed that if I open this website manually there is only &quot;I&#39;m not a robot&quot; checkbox but when I open it using selenium there are also several puzzles to solve so server must recognize that my browser &quot;is being controlled by automated test software&quot; as Chrome says.\r\nI tried to use incognito mode but it doesn&#39;t help.","title":"How to hide that browser is under SeleniumWebdriver control","body":"<p>Is it any way to do it ? I have automated script which searches through website with captcha and I noticed that if I open this website manually there is only \"I'm not a robot\" checkbox but when I open it using selenium there are also several puzzles to solve so server must recognize that my browser \"is being controlled by automated test software\" as Chrome says.\nI tried to use incognito mode but it doesn't help.</p>\n"},{"tags":["java","android","hijri"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1621344643,"post_id":67579553,"comment_id":119463380,"body_markdown":"I don&#39;t see anything obviously wrong with your code, it feels like this could actually be a bug in either one of the components (the calendar or the date picker). Could you verify if `now.get(Calendar.DAY_OF_MONTH)` actually returns 31? Because I don&#39;t think it should ever do that in this code, but the exception message does suggest that.","body":"I don&#39;t see anything obviously wrong with your code, it feels like this could actually be a bug in either one of the components (the calendar or the date picker). Could you verify if <code>now.get(Calendar.DAY_OF_MONTH)</code> actually returns 31? Because I don&#39;t think it should ever do that in this code, but the exception message does suggest that."},{"owner":{"account_id":20559155,"reputation":73,"user_id":15090028,"display_name":"Mr Learning"},"score":1,"creation_date":1621345408,"post_id":67579553,"comment_id":119463803,"body_markdown":"Im so sorry i didnt mean to roll back, maybe some problems on my phone keep lagging as i open it on car. Thank you for editting. Really appreciate it","body":"Im so sorry i didnt mean to roll back, maybe some problems on my phone keep lagging as i open it on car. Thank you for editting. Really appreciate it"},{"owner":{"account_id":20559155,"reputation":73,"user_id":15090028,"display_name":"Mr Learning"},"score":0,"creation_date":1621346212,"post_id":67579553,"comment_id":119464245,"body_markdown":"@JoachimSauer I couldnt, may you tell me how to verify it ?","body":"@JoachimSauer I couldnt, may you tell me how to verify it ?"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1621346337,"post_id":67579553,"comment_id":119464335,"body_markdown":"Either add a breakpoint and inspect it with a debugger or [log it](https://developer.android.com/reference/android/util/Log).","body":"Either add a breakpoint and inspect it with a debugger or <a href=\"https://developer.android.com/reference/android/util/Log\" rel=\"nofollow noreferrer\">log it</a>."},{"owner":{"display_name":"user13146129"},"score":0,"creation_date":1621350155,"post_id":67579553,"comment_id":119466430,"body_markdown":"Sorry! You were using (`hijricalendar`) Hijri in question but, why you are using Hijrah in title?","body":"Sorry! You were using (<code>hijricalendar</code>) Hijri in question but, why you are using Hijrah in title?"},{"owner":{"account_id":20559155,"reputation":73,"user_id":15090028,"display_name":"Mr Learning"},"score":0,"creation_date":1621353013,"post_id":67579553,"comment_id":119467899,"body_markdown":"im sorry as someone update the question, it showing differently. i update the correct one. thank you.","body":"im sorry as someone update the question, it showing differently. i update the correct one. thank you."},{"owner":{"account_id":20559155,"reputation":73,"user_id":15090028,"display_name":"Mr Learning"},"score":0,"creation_date":1621353611,"post_id":67579553,"comment_id":119468220,"body_markdown":"@JoachimSauer the debugger just show the error. I tried to log it, but no result showed","body":"@JoachimSauer the debugger just show the error. I tried to log it, but no result showed"},{"owner":{"account_id":20559155,"reputation":73,"user_id":15090028,"display_name":"Mr Learning"},"score":0,"creation_date":1621358685,"post_id":67579553,"comment_id":119470540,"body_markdown":"@JoachimSauer the system print out 5, so is this a bug ?","body":"@JoachimSauer the system print out 5, so is this a bug ?"},{"owner":{"account_id":20559155,"reputation":73,"user_id":15090028,"display_name":"Mr Learning"},"score":0,"creation_date":1621362299,"post_id":67579553,"comment_id":119471946,"body_markdown":"Just to inform, i checked the source code of HijriDatePickerDialog.java setting the date of month to 31. Compared to the real source code on github, it shows 29. So now im stuck to changing the read-only file.","body":"Just to inform, i checked the source code of HijriDatePickerDialog.java setting the date of month to 31. Compared to the real source code on github, it shows 29. So now im stuck to changing the read-only file."},{"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"score":0,"creation_date":1621422292,"post_id":67579553,"comment_id":119489389,"body_markdown":"The umalqura calendar never has 31 days in any month. It is either 29 or 30 days.","body":"The umalqura calendar never has 31 days in any month. It is either 29 or 30 days."},{"owner":{"account_id":20559155,"reputation":73,"user_id":15090028,"display_name":"Mr Learning"},"score":0,"creation_date":1621440973,"post_id":67579553,"comment_id":119498469,"body_markdown":"@MenoHochschild yes it is. However when i check the HijriDatePickerDialog.java class, it showed 31. May i know how to overcome this?","body":"@MenoHochschild yes it is. However when i check the HijriDatePickerDialog.java class, it showed 31. May i know how to overcome this?"}],"answers":[{"tags":[],"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1621633795,"creation_date":1621510990,"answer_id":67619672,"question_id":67579553,"body_markdown":"This problem seems to be a known bug in the msarhan-library. There was also a meanwhile closed [issue][1] on its related website. It indicates that a fix has been applied in the newest version.\r\n\r\nSo I suggest you to **update your marhan library to version v2.0.2** which might solve your problem.\r\n\r\nUpdate:\r\n-------\r\n\r\nWhen looking at the date-picker-library you use we can see that it still uses the [version v2.0.1][2]. Either you wait until the author of the date-picker-library fixes the dependency or you build your own version of the date-picker-library.\r\n\r\n\r\n  [1]: https://github.com/msarhan/ummalqura-calendar/issues/26\r\n  [2]: https://github.com/alhazmy13/HijriDatePicker/blob/10fd1ce99543e90e9dd403af402b2f09ca2de35f/library/build.gradle#L47","title":"Invalid Hijrah Day of Month : 31","body":"<p>This problem seems to be a known bug in the msarhan-library. There was also a meanwhile closed <a href=\"https://github.com/msarhan/ummalqura-calendar/issues/26\" rel=\"nofollow noreferrer\">issue</a> on its related website. It indicates that a fix has been applied in the newest version.</p>\n<p>So I suggest you to <strong>update your marhan library to version v2.0.2</strong> which might solve your problem.</p>\n<h2>Update:</h2>\n<p>When looking at the date-picker-library you use we can see that it still uses the <a href=\"https://github.com/alhazmy13/HijriDatePicker/blob/10fd1ce99543e90e9dd403af402b2f09ca2de35f/library/build.gradle#L47\" rel=\"nofollow noreferrer\">version v2.0.1</a>. Either you wait until the author of the date-picker-library fixes the dependency or you build your own version of the date-picker-library.</p>\n"},{"tags":[],"owner":{"account_id":8235698,"reputation":145,"user_id":6194988,"accept_rate":0,"display_name":"Mohamed Mohamed Taha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659608051,"creation_date":1659608051,"answer_id":73234108,"question_id":67579553,"body_markdown":"If you use koltin this method will fix your issue\r\n\r\n \r\n\r\n     fun selectDateOfBirthHijri(context: Context, editText: EditText, childFragmentManager: FragmentManager) {\r\n           val now = Calendar.getInstance()\r\n           val dateOfBirthClickListener =\r\n               HijriDatePickerDialog.OnDateSetListener { view, year, month, dayOfMonth -&gt;\r\n                   now.set(Calendar.YEAR, year)\r\n                   now.set(Calendar.MONTH, month)\r\n                   now.set(Calendar.DAY_OF_MONTH, dayOfMonth)\r\n                   editText.setText(\r\n                       Formatter.format(\r\n                           now.time.toString(),\r\n                           Formatter.EEE_MMM_DD_HH_MM_SS_ZZZ_YYYY,\r\n                           Formatter.DD_MM_YYYY\r\n                       )\r\n                   )\r\n               }\r\n           val ummAlquraCalendar = UmmalquraCalendar()\r\n           val b = HijriDatePickerDialog.newInstance(\r\n               dateOfBirthClickListener,\r\n               ummAlquraCalendar.get(UmmalquraCalendar.YEAR),\r\n               ummAlquraCalendar.get(UmmalquraCalendar.MONTH),\r\n               ummAlquraCalendar.get(UmmalquraCalendar.DAY_OF_MONTH)\r\n           )\r\n           b.maxDate = UmmalquraCalendar(ummAlquraCalendar.get(Calendar.YEAR),\r\n               ummAlquraCalendar.get(Calendar.MONTH),\r\n               ummAlquraCalendar.get(Calendar.DAY_OF_MONTH))\r\n           b.setTitle(context.getString(R.string.hint_date_of_birth))\r\n           b.show(childFragmentManager, &quot;HijriDatePickerDialog&quot;)\r\n       }","title":"Invalid Hijrah Day of Month : 31","body":"<p>If you use koltin this method will fix your issue</p>\n<pre><code> fun selectDateOfBirthHijri(context: Context, editText: EditText, childFragmentManager: FragmentManager) {\n       val now = Calendar.getInstance()\n       val dateOfBirthClickListener =\n           HijriDatePickerDialog.OnDateSetListener { view, year, month, dayOfMonth -&gt;\n               now.set(Calendar.YEAR, year)\n               now.set(Calendar.MONTH, month)\n               now.set(Calendar.DAY_OF_MONTH, dayOfMonth)\n               editText.setText(\n                   Formatter.format(\n                       now.time.toString(),\n                       Formatter.EEE_MMM_DD_HH_MM_SS_ZZZ_YYYY,\n                       Formatter.DD_MM_YYYY\n                   )\n               )\n           }\n       val ummAlquraCalendar = UmmalquraCalendar()\n       val b = HijriDatePickerDialog.newInstance(\n           dateOfBirthClickListener,\n           ummAlquraCalendar.get(UmmalquraCalendar.YEAR),\n           ummAlquraCalendar.get(UmmalquraCalendar.MONTH),\n           ummAlquraCalendar.get(UmmalquraCalendar.DAY_OF_MONTH)\n       )\n       b.maxDate = UmmalquraCalendar(ummAlquraCalendar.get(Calendar.YEAR),\n           ummAlquraCalendar.get(Calendar.MONTH),\n           ummAlquraCalendar.get(Calendar.DAY_OF_MONTH))\n       b.setTitle(context.getString(R.string.hint_date_of_birth))\n       b.show(childFragmentManager, &quot;HijriDatePickerDialog&quot;)\n   }\n</code></pre>\n"}],"owner":{"account_id":20559155,"reputation":73,"user_id":15090028,"display_name":"Mr Learning"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":390,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":67619672,"answer_count":2,"score":0,"last_activity_date":1659608051,"creation_date":1621308293,"question_id":67579553,"body_markdown":"I tried to create a simple activity with a button and a textview that showing the date. The button should show the HijriDatePicker dialog when clicked. I tried to make it using ummalqura-calendar and by the dialog, i tried use the HijriDatePicker to create the dialog. \r\n\r\nHowever, after many attempts, it doesn&#39;t work. Sometimes the activity will stop when I click the button, and sometimes it just crash. I tried already for many fail attempts.\r\n\r\n```\r\nE/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.example.myapplication, PID: 13658\r\n    com.github.msarhan.ummalqura.calendar.DateTimeException: Invalid Hijrah day of month: 31\r\n        at com.github.msarhan.ummalqura.calendar.HijrahChronology.getEpochDay(HijrahChronology.java:255)\r\n        at com.github.msarhan.ummalqura.calendar.HijrahChronology.toGregorian(HijrahChronology.java:697)\r\n        at com.github.msarhan.ummalqura.calendar.UmmalquraCalendar.set(UmmalquraCalendar.java:259)\r\n        at net.alhazmy13.hijridatepicker.date.hijri.HijriDatePickerDialog.getEndDate(HijriDatePickerDialog.java:1028)\r\n        at net.alhazmy13.hijridatepicker.date.hijri.MonthAdapter.getCount(MonthAdapter.java:146)\r\n        at android.widget.ListView.setAdapter(ListView.java:493)\r\n        at net.alhazmy13.hijridatepicker.date.hijri.DayPickerView.refreshAdapter(DayPickerView.java:142)\r\n        at net.alhazmy13.hijridatepicker.date.hijri.DayPickerView.setController(DayPickerView.java:114)\r\n        at net.alhazmy13.hijridatepicker.date.hijri.DayPickerView.&lt;init&gt;(DayPickerView.java:105)\r\n        at net.alhazmy13.hijridatepicker.date.hijri.SimpleDayPickerView.&lt;init&gt;(SimpleDayPickerView.java:32)\r\n        at net.alhazmy13.hijridatepicker.date.hijri.HijriDatePickerDialog.onCreateView(HijriDatePickerDialog.java:340)\r\n        at androidx.fragment.app.Fragment.performCreateView(Fragment.java:2600)\r\n        at androidx.fragment.app.FragmentManagerImpl.moveToState(FragmentManagerImpl.java:881)\r\n        at androidx.fragment.app.FragmentManagerImpl.moveFragmentToExpectedState(FragmentManagerImpl.java:1238)\r\n        at androidx.fragment.app.FragmentManagerImpl.moveToState(FragmentManagerImpl.java:1303)\r\n        at androidx.fragment.app.BackStackRecord.executeOps(BackStackRecord.java:439)\r\n        at androidx.fragment.app.FragmentManagerImpl.executeOps(FragmentManagerImpl.java:2079)\r\n        at androidx.fragment.app.FragmentManagerImpl.executeOpsTogether(FragmentManagerImpl.java:1869)\r\n        at androidx.fragment.app.FragmentManagerImpl.removeRedundantOperationsAndExecute(FragmentManagerImpl.java:1824)\r\n        at androidx.fragment.app.FragmentManagerImpl.execPendingActions(FragmentManagerImpl.java:1727)\r\n        at androidx.fragment.app.FragmentManagerImpl$2.run(FragmentManagerImpl.java:150)\r\n        at android.os.Handler.handleCallback(Handler.java:751)\r\n        at android.os.Handler.dispatchMessage(Handler.java:95)\r\n        at android.os.Looper.loop(Looper.java:154)\r\n        at android.app.ActivityThread.main(ActivityThread.java:6119)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\r\n```\r\n\r\nand my main activity java \r\n```\r\npublic class MainActivity extends AppCompatActivity implements HijriDatePickerDialog.OnDateSetListener{\r\n    TextView tvDate;\r\n    TextView etDate;\r\n    HijriDatePickerDialog.OnDateSetListener setListener;\r\n\r\n    public MainActivity() {\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        tvDate = findViewById(R.id.tv_date);\r\n        etDate = findViewById(R.id.et_date);\r\n\r\n\r\n        tvDate.setOnClickListener(v -&gt; {\r\n            UmmalquraCalendar now = new UmmalquraCalendar();\r\n            HijriDatePickerDialog dpd = HijriDatePickerDialog.newInstance(\r\n                    MainActivity.this,\r\n                    now.get(Calendar.YEAR),\r\n                    now.get(Calendar.MONTH),\r\n                    now.get(Calendar.DAY_OF_MONTH)\r\n            );\r\n            dpd.setMinDate(new UmmalquraCalendar(1440,0,1));\r\n            dpd.show(getSupportFragmentManager(), &quot;Datepickerdialog&quot;);\r\n        });\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onResume() {\r\n        super.onResume();\r\n        assert getFragmentManager() != null;\r\n        HijriDatePickerDialog dpd = (HijriDatePickerDialog) getSupportFragmentManager().findFragmentByTag(&quot;Datepickerdialog&quot;);\r\n        if (dpd != null) dpd.setOnDateSetListener(this);\r\n    }\r\n\r\n    @Override\r\n    public void onDateSet(HijriDatePickerDialog view, int year, int monthOfYear, int dayOfMonth) {\r\n        String date = &quot;You picked the following date: &quot; + dayOfMonth + &quot;/&quot; + (++monthOfYear) + &quot;/&quot; + year;\r\n        System.out.println(date);\r\n        etDate.setText(date);\r\n    }\r\n}\r\n```","title":"Invalid Hijrah Day of Month : 31","body":"<p>I tried to create a simple activity with a button and a textview that showing the date. The button should show the HijriDatePicker dialog when clicked. I tried to make it using ummalqura-calendar and by the dialog, i tried use the HijriDatePicker to create the dialog.</p>\n<p>However, after many attempts, it doesn't work. Sometimes the activity will stop when I click the button, and sometimes it just crash. I tried already for many fail attempts.</p>\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.myapplication, PID: 13658\n    com.github.msarhan.ummalqura.calendar.DateTimeException: Invalid Hijrah day of month: 31\n        at com.github.msarhan.ummalqura.calendar.HijrahChronology.getEpochDay(HijrahChronology.java:255)\n        at com.github.msarhan.ummalqura.calendar.HijrahChronology.toGregorian(HijrahChronology.java:697)\n        at com.github.msarhan.ummalqura.calendar.UmmalquraCalendar.set(UmmalquraCalendar.java:259)\n        at net.alhazmy13.hijridatepicker.date.hijri.HijriDatePickerDialog.getEndDate(HijriDatePickerDialog.java:1028)\n        at net.alhazmy13.hijridatepicker.date.hijri.MonthAdapter.getCount(MonthAdapter.java:146)\n        at android.widget.ListView.setAdapter(ListView.java:493)\n        at net.alhazmy13.hijridatepicker.date.hijri.DayPickerView.refreshAdapter(DayPickerView.java:142)\n        at net.alhazmy13.hijridatepicker.date.hijri.DayPickerView.setController(DayPickerView.java:114)\n        at net.alhazmy13.hijridatepicker.date.hijri.DayPickerView.&lt;init&gt;(DayPickerView.java:105)\n        at net.alhazmy13.hijridatepicker.date.hijri.SimpleDayPickerView.&lt;init&gt;(SimpleDayPickerView.java:32)\n        at net.alhazmy13.hijridatepicker.date.hijri.HijriDatePickerDialog.onCreateView(HijriDatePickerDialog.java:340)\n        at androidx.fragment.app.Fragment.performCreateView(Fragment.java:2600)\n        at androidx.fragment.app.FragmentManagerImpl.moveToState(FragmentManagerImpl.java:881)\n        at androidx.fragment.app.FragmentManagerImpl.moveFragmentToExpectedState(FragmentManagerImpl.java:1238)\n        at androidx.fragment.app.FragmentManagerImpl.moveToState(FragmentManagerImpl.java:1303)\n        at androidx.fragment.app.BackStackRecord.executeOps(BackStackRecord.java:439)\n        at androidx.fragment.app.FragmentManagerImpl.executeOps(FragmentManagerImpl.java:2079)\n        at androidx.fragment.app.FragmentManagerImpl.executeOpsTogether(FragmentManagerImpl.java:1869)\n        at androidx.fragment.app.FragmentManagerImpl.removeRedundantOperationsAndExecute(FragmentManagerImpl.java:1824)\n        at androidx.fragment.app.FragmentManagerImpl.execPendingActions(FragmentManagerImpl.java:1727)\n        at androidx.fragment.app.FragmentManagerImpl$2.run(FragmentManagerImpl.java:150)\n        at android.os.Handler.handleCallback(Handler.java:751)\n        at android.os.Handler.dispatchMessage(Handler.java:95)\n        at android.os.Looper.loop(Looper.java:154)\n        at android.app.ActivityThread.main(ActivityThread.java:6119)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\n</code></pre>\n<p>and my main activity java</p>\n<pre><code>public class MainActivity extends AppCompatActivity implements HijriDatePickerDialog.OnDateSetListener{\n    TextView tvDate;\n    TextView etDate;\n    HijriDatePickerDialog.OnDateSetListener setListener;\n\n    public MainActivity() {\n\n    }\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        tvDate = findViewById(R.id.tv_date);\n        etDate = findViewById(R.id.et_date);\n\n\n        tvDate.setOnClickListener(v -&gt; {\n            UmmalquraCalendar now = new UmmalquraCalendar();\n            HijriDatePickerDialog dpd = HijriDatePickerDialog.newInstance(\n                    MainActivity.this,\n                    now.get(Calendar.YEAR),\n                    now.get(Calendar.MONTH),\n                    now.get(Calendar.DAY_OF_MONTH)\n            );\n            dpd.setMinDate(new UmmalquraCalendar(1440,0,1));\n            dpd.show(getSupportFragmentManager(), &quot;Datepickerdialog&quot;);\n        });\n\n    }\n\n    @Override\n    public void onResume() {\n        super.onResume();\n        assert getFragmentManager() != null;\n        HijriDatePickerDialog dpd = (HijriDatePickerDialog) getSupportFragmentManager().findFragmentByTag(&quot;Datepickerdialog&quot;);\n        if (dpd != null) dpd.setOnDateSetListener(this);\n    }\n\n    @Override\n    public void onDateSet(HijriDatePickerDialog view, int year, int monthOfYear, int dayOfMonth) {\n        String date = &quot;You picked the following date: &quot; + dayOfMonth + &quot;/&quot; + (++monthOfYear) + &quot;/&quot; + year;\n        System.out.println(date);\n        etDate.setText(date);\n    }\n}\n</code></pre>\n"},{"tags":["java","ms-word","apache-poi","apache-tika"],"comments":[{"owner":{"account_id":2800812,"reputation":1340,"user_id":2409095,"display_name":"Dhrubajyoti Gogoi"},"score":1,"creation_date":1401187270,"post_id":23886205,"comment_id":36774374,"body_markdown":"Did you have a look at [JODConverter](https://code.google.com/p/jodconverter/)? SO had a similar question [earlier](http://stackoverflow.com/questions/20484225/how-to-convert-docx-to-doc-using-apache-poi).","body":"Did you have a look at <a href=\"https://code.google.com/p/jodconverter/\" rel=\"nofollow noreferrer\">JODConverter</a>? SO had a similar question <a href=\"http://stackoverflow.com/questions/20484225/how-to-convert-docx-to-doc-using-apache-poi\">earlier</a>."},{"owner":{"account_id":3302792,"reputation":61,"user_id":2778499,"display_name":"Ram Kurup"},"score":0,"creation_date":1401243804,"post_id":23886205,"comment_id":36803122,"body_markdown":"I don&#39;t want to use JOD converter. My requirement holds with POI or Tika.","body":"I don&#39;t want to use JOD converter. My requirement holds with POI or Tika."},{"owner":{"account_id":30580,"reputation":15467,"user_id":1031689,"accept_rate":67,"display_name":"JasonPlutext"},"score":0,"creation_date":1401254574,"post_id":23886205,"comment_id":36805877,"body_markdown":"In that case, unless your documents are very simple, you&#39;ll need to write a fair bit of code (so each feature of interest to you is implemented for legacy binary doc in HWPF, and can be written to XWPF (docx))","body":"In that case, unless your documents are very simple, you&#39;ll need to write a fair bit of code (so each feature of interest to you is implemented for legacy binary doc in HWPF, and can be written to XWPF (docx))"},{"owner":{"account_id":3302792,"reputation":61,"user_id":2778499,"display_name":"Ram Kurup"},"score":0,"creation_date":1401548769,"post_id":23886205,"comment_id":36933589,"body_markdown":"@JasonPlutext My Question is that how to do it?","body":"@JasonPlutext My Question is that how to do it?"},{"owner":{"account_id":30580,"reputation":15467,"user_id":1031689,"accept_rate":67,"display_name":"JasonPlutext"},"score":0,"creation_date":1401573266,"post_id":23886205,"comment_id":36939105,"body_markdown":"Well, https://github.com/plutext/docx4j/blob/master/src/main/java/org/docx4j/convert/in/Doc.java is simple HWPF to docx4j; since that is ASLv2 code, you can adapt/extend it to convert to XWPF instead.","body":"Well, <a href=\"https://github.com/plutext/docx4j/blob/master/src/main/java/org/docx4j/convert/in/Doc.java\" rel=\"nofollow noreferrer\">github.com/plutext/docx4j/blob/master/src/main/java/org/docx&zwnj;&#8203;4j/&hellip;</a> is simple HWPF to docx4j; since that is ASLv2 code, you can adapt/extend it to convert to XWPF instead."},{"owner":{"account_id":179293,"reputation":15713,"user_id":411846,"accept_rate":80,"display_name":"centic"},"score":0,"creation_date":1483960821,"post_id":23886205,"comment_id":70298295,"body_markdown":"Possible duplicate of [How to convert .docx to .doc using apache poi](http://stackoverflow.com/questions/20484225/how-to-convert-docx-to-doc-using-apache-poi)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/20484225/how-to-convert-docx-to-doc-using-apache-poi\">How to convert .docx to .doc using apache poi</a>"}],"answers":[{"tags":[],"owner":{"account_id":6950221,"reputation":141,"user_id":5333071,"accept_rate":67,"display_name":"chile"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659608012,"creation_date":1483688719,"answer_id":41501199,"question_id":23886205,"body_markdown":"\r\n\r\nI use `aspose words` to convert `.doc` to `.docx`.\r\n\r\n\r\n\r\n    Document doc = new Document(filePath);\r\n    doc.save(descFilePath);\r\n\r\nVery convenient, ust two lines.","title":"How to convert doc to docx using Tika or POI?","body":"<p>I use <code>aspose words</code> to convert <code>.doc</code> to <code>.docx</code>.</p>\n<pre><code>Document doc = new Document(filePath);\ndoc.save(descFilePath);\n</code></pre>\n<p>Very convenient, ust two lines.</p>\n"}],"owner":{"account_id":3302792,"reputation":61,"user_id":2778499,"display_name":"Ram Kurup"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4432,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1659608012,"creation_date":1401184097,"question_id":23886205,"body_markdown":"How to convert a .doc file to .docx using apache Tika or with apache POI? I am stuck in converting the document to docx format. \r\n\r\n","title":"How to convert doc to docx using Tika or POI?","body":"<p>How to convert a .doc file to .docx using apache Tika or with apache POI? I am stuck in converting the document to docx format.</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":3,"creation_date":1659573375,"post_id":73229143,"comment_id":129328976,"body_markdown":"`I was trying to use streams` - Please share your attempt and also specify which library you&#39;re using to parse JSON.","body":"<code>I was trying to use streams</code> - Please share your attempt and also specify which library you&#39;re using to parse JSON."}],"answers":[{"tags":[],"owner":{"account_id":6967171,"reputation":199,"user_id":5344750,"accept_rate":79,"display_name":"Abrar Ahamed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659607995,"creation_date":1659586637,"answer_id":73230319,"question_id":73229143,"body_markdown":"Found the solution \r\n\r\n```\r\n            for (Map.Entry&lt;String, Object&gt; entry : RootResponse.entrySet()){\r\n\r\n                RootResponse[] ls = (RootResponse[]) entry.getValue();\r\n                for(RootResponse a : ls){\r\n                     List&lt;Map&lt;Object, SubRecords&gt;&gt; dcfrecord = (List&lt;Map&lt;Object, SubRecords&gt;&gt;) a.getTransactions();\r\n                   Optional&lt;SubRecords&gt; subRecords = Optional.of((SubRecords) dcfrecord.stream().flatMap(key -&gt; key.entrySet().stream().filter(k1 -&gt; k1.getKey().equals(rrn))).map(value -&gt; value.getValue()).findFirst().get());\r\n                   SubRecords subrecord = SubRecords.get();\r\n                    System.out.println(subrecord.getR_6220());\r\n                    if(gen4record != null){\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n```","title":"Java Streams : how to filter object based on key value","body":"<p>Found the solution</p>\n<pre><code>            for (Map.Entry&lt;String, Object&gt; entry : RootResponse.entrySet()){\n\n                RootResponse[] ls = (RootResponse[]) entry.getValue();\n                for(RootResponse a : ls){\n                     List&lt;Map&lt;Object, SubRecords&gt;&gt; dcfrecord = (List&lt;Map&lt;Object, SubRecords&gt;&gt;) a.getTransactions();\n                   Optional&lt;SubRecords&gt; subRecords = Optional.of((SubRecords) dcfrecord.stream().flatMap(key -&gt; key.entrySet().stream().filter(k1 -&gt; k1.getKey().equals(rrn))).map(value -&gt; value.getValue()).findFirst().get());\n                   SubRecords subrecord = SubRecords.get();\n                    System.out.println(subrecord.getR_6220());\n                    if(gen4record != null){\n                        break;\n                    }\n                }\n            }\n\n</code></pre>\n"}],"owner":{"account_id":6967171,"reputation":199,"user_id":5344750,"accept_rate":79,"display_name":"Abrar Ahamed"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":204,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1659607995,"creation_date":1659572898,"question_id":73229143,"body_markdown":"I have a class as below which is mapped to the response of one of the api request. The response json is nothing but RootResponse[]\r\n\r\n```\r\n\r\npublic class RootResponse {\r\n\r\n    String header;\r\n    String tailer;\r\n    List&lt;Map&lt;Object, subRecords&gt;&gt; transactions;\r\n    DcfSummary summary;\r\n\r\n\r\n}\r\n```\r\n\r\nThe json response which I received is mapped to the class as map&lt;string, Object&gt;\r\n\r\nbelow is the sample json response , In the transactions which is ( List&lt;Map&lt;Object, subRecords&gt;&gt; transactions;)  there is a  key for example &quot;789983333&quot; which is dynamic. so what I want to achieve if I give the key then I want to get that object which is \r\n\r\n```\r\n\r\n&quot;789983333&quot;: {\r\n\t\t\t\t&quot;r_01&quot;: &quot;record1&quot;,\r\n\t\t\t\t&quot;r_02&quot;: &quot;record2&quot;,\r\n\t\t\t\t&quot;r_03&quot;: &quot;record3&quot;,\r\n\t\t\t\t&quot;r_04&quot;: &quot;record4&quot;\r\n\t\t\t}\r\n\t\t}\r\n```\r\n\r\n\r\n```\r\n[{\r\n\t\t&quot;header&quot;: &quot;header1&quot;,\r\n\t\t&quot;transactions&quot;: [{\r\n\t\t\t&quot;789983333&quot;: {\r\n\t\t\t\t&quot;r_01&quot;: &quot;record1&quot;,\r\n\t\t\t\t&quot;r_02&quot;: &quot;record2&quot;,\r\n\t\t\t\t&quot;r_03&quot;: &quot;record3&quot;,\r\n\t\t\t\t&quot;r_04&quot;: &quot;record4&quot;\r\n\t\t\t}\r\n\t\t}],\r\n\t\t&quot;tailer&quot;: &quot;tailer1&quot;,\r\n\t\t&quot;summary&quot;: {\r\n\t\t\t&quot;item1&quot;: &quot;370840&quot;,\r\n\t\t\t&quot;item2&quot;: &quot;0&quot;,\r\n\t\t\t&quot;item3&quot;: &quot;0&quot;,\r\n\t\t\t&quot;item4&quot;: &quot;0&quot;,\r\n\t\t\t&quot;item5&quot;: &quot;0&quot;,\r\n\t\t\t&quot;item6&quot;: &quot;0&quot;,\r\n\t\t\t&quot;totaltransactions&quot;: &quot;00000000&quot;\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\t&quot;header&quot;: &quot;header1&quot;,\r\n\t\t&quot;transactions&quot;: [{\r\n\t\t\t&quot;789983333&quot;: {\r\n\t\t\t\t&quot;r_01&quot;: &quot;record1&quot;,\r\n\t\t\t\t&quot;r_02&quot;: &quot;record2&quot;,\r\n\t\t\t\t&quot;r_03&quot;: &quot;record3&quot;,\r\n\t\t\t\t&quot;r_04&quot;: &quot;record4&quot;\r\n\t\t\t}\r\n\t\t}],\r\n\t\t&quot;tailer&quot;: &quot;tailer1&quot;,\r\n\t\t&quot;summary&quot;: {\r\n\t\t\t&quot;item1&quot;: &quot;370840&quot;,\r\n\t\t\t&quot;item2&quot;: &quot;0&quot;,\r\n\t\t\t&quot;item3&quot;: &quot;0&quot;,\r\n\t\t\t&quot;item4&quot;: &quot;0&quot;,\r\n\t\t\t&quot;item5&quot;: &quot;0&quot;,\r\n\t\t\t&quot;item6&quot;: &quot;0&quot;,\r\n\t\t\t&quot;totaltransactions&quot;: &quot;00000000&quot;\r\n\t\t}\r\n\t}\r\n]\r\n\r\n```\r\nI was trying to use streams in java but no luck. The idea is once I get the object based on the reference key then I can get records and validate the response. tried various options not able to get it. Any help would be appreciated.\r\n\r\n","title":"Java Streams : how to filter object based on key value","body":"<p>I have a class as below which is mapped to the response of one of the api request. The response json is nothing but RootResponse[]</p>\n<pre><code>\npublic class RootResponse {\n\n    String header;\n    String tailer;\n    List&lt;Map&lt;Object, subRecords&gt;&gt; transactions;\n    DcfSummary summary;\n\n\n}\n</code></pre>\n<p>The json response which I received is mapped to the class as map&lt;string, Object&gt;</p>\n<p>below is the sample json response , In the transactions which is ( List&lt;Map&lt;Object, subRecords&gt;&gt; transactions;)  there is a  key for example &quot;789983333&quot; which is dynamic. so what I want to achieve if I give the key then I want to get that object which is</p>\n<pre><code>\n&quot;789983333&quot;: {\n                &quot;r_01&quot;: &quot;record1&quot;,\n                &quot;r_02&quot;: &quot;record2&quot;,\n                &quot;r_03&quot;: &quot;record3&quot;,\n                &quot;r_04&quot;: &quot;record4&quot;\n            }\n        }\n</code></pre>\n<pre><code>[{\n        &quot;header&quot;: &quot;header1&quot;,\n        &quot;transactions&quot;: [{\n            &quot;789983333&quot;: {\n                &quot;r_01&quot;: &quot;record1&quot;,\n                &quot;r_02&quot;: &quot;record2&quot;,\n                &quot;r_03&quot;: &quot;record3&quot;,\n                &quot;r_04&quot;: &quot;record4&quot;\n            }\n        }],\n        &quot;tailer&quot;: &quot;tailer1&quot;,\n        &quot;summary&quot;: {\n            &quot;item1&quot;: &quot;370840&quot;,\n            &quot;item2&quot;: &quot;0&quot;,\n            &quot;item3&quot;: &quot;0&quot;,\n            &quot;item4&quot;: &quot;0&quot;,\n            &quot;item5&quot;: &quot;0&quot;,\n            &quot;item6&quot;: &quot;0&quot;,\n            &quot;totaltransactions&quot;: &quot;00000000&quot;\n        }\n    },\n    {\n        &quot;header&quot;: &quot;header1&quot;,\n        &quot;transactions&quot;: [{\n            &quot;789983333&quot;: {\n                &quot;r_01&quot;: &quot;record1&quot;,\n                &quot;r_02&quot;: &quot;record2&quot;,\n                &quot;r_03&quot;: &quot;record3&quot;,\n                &quot;r_04&quot;: &quot;record4&quot;\n            }\n        }],\n        &quot;tailer&quot;: &quot;tailer1&quot;,\n        &quot;summary&quot;: {\n            &quot;item1&quot;: &quot;370840&quot;,\n            &quot;item2&quot;: &quot;0&quot;,\n            &quot;item3&quot;: &quot;0&quot;,\n            &quot;item4&quot;: &quot;0&quot;,\n            &quot;item5&quot;: &quot;0&quot;,\n            &quot;item6&quot;: &quot;0&quot;,\n            &quot;totaltransactions&quot;: &quot;00000000&quot;\n        }\n    }\n]\n\n</code></pre>\n<p>I was trying to use streams in java but no luck. The idea is once I get the object based on the reference key then I can get records and validate the response. tried various options not able to get it. Any help would be appreciated.</p>\n"},{"tags":["java","logging","output","undefined-symbol"],"answers":[{"tags":[],"owner":{"account_id":17804432,"reputation":28,"user_id":19639045,"display_name":"TheCodingBuddy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659506926,"creation_date":1659506777,"answer_id":73216922,"question_id":73216827,"body_markdown":"Check imports of logger. \r\nJava.util.logging.* provides addHandler(). [Check this article for more information][1]\r\n\r\n\r\n  [1]: https://www.google.com/amp/s/www.geeksforgeeks.org/logger-addhandler-method-in-java-with-examples/amp/","title":"Java: Logger.addHandler is undefined","body":"<p>Check imports of logger.\nJava.util.logging.* provides addHandler(). <a href=\"https://www.google.com/amp/s/www.geeksforgeeks.org/logger-addhandler-method-in-java-with-examples/amp/\" rel=\"nofollow noreferrer\">Check this article for more information</a></p>\n"}],"owner":{"account_id":25963987,"reputation":31,"user_id":19680152,"display_name":"Nathan Xu  "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":398,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73216922,"answer_count":1,"score":0,"last_activity_date":1659607834,"creation_date":1659506052,"question_id":73216827,"body_markdown":"Like the title says, the ```addHandler(Handler handler)``` void for the ```Logger``` class appears to be undefined in my script.\r\n\r\nFor context, I am running the program on IntelliJ IDEA. I am trying to use the ```addHandler``` command in order to specify a file destination for the output log file that the ```Logger``` class writes to.\r\n\r\nI&#39;ve been told that the output log file should be in the ```Sun\\Java\\Deployment\\log``` directory but the folder is completely empty.\r\n\r\nIn all honesty, I could really care less where the log file is written to. But, seeing as it&#39;s not in the folder it&#39;s supposed to be in, I thought specifying a different destination would do the trick.\r\n\r\nThis problem also seems to occur with other voids such as ```getHandlers()``` so the issue might be more serious than I imagined.\r\n\r\nA snippet of my code:\r\n\r\n```java\r\nimport org.apache.logging.log4j.LogManager;\r\nimport org.apache.logging.log4j.Logger;\r\n\r\npublic class Main {\r\n     private final static Logger LOGGER = LogManager.getLogger(Main.class.getName());\r\n\r\n     public static void main(String... args){\r\n        FileHandler fileHandler;\r\n\r\n        try {\r\n            fileHandler = new FileHandler(&quot;log.txt&quot;);\r\n            SimpleFormatter formatter = new SimpleFormatter();\r\n            LOGGER.addHandler(fileHandler); // error\r\n            fileHandler.setFormatter(formatter);\r\n        } catch (SecurityException | IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n}\r\n```\r\n\r\nAnd when I run the program, the build error that follows:\r\n```\r\njava: cannot find symbol\r\n  symbol:   method addHandler(java.util.logging.FileHandler)\r\n  location: variable LOGGER of type org.apache.logging.log4j.Logger\r\n```\r\n\r\nMaven dependency setup\r\n```xml\r\n&lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n            &lt;version&gt;2.17.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.17.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n```\r\n\r\nAny and all help is greatly appreciated.","title":"Java: Logger.addHandler is undefined","body":"<p>Like the title says, the <code>addHandler(Handler handler)</code> void for the <code>Logger</code> class appears to be undefined in my script.</p>\n<p>For context, I am running the program on IntelliJ IDEA. I am trying to use the <code>addHandler</code> command in order to specify a file destination for the output log file that the <code>Logger</code> class writes to.</p>\n<p>I've been told that the output log file should be in the <code>Sun\\Java\\Deployment\\log</code> directory but the folder is completely empty.</p>\n<p>In all honesty, I could really care less where the log file is written to. But, seeing as it's not in the folder it's supposed to be in, I thought specifying a different destination would do the trick.</p>\n<p>This problem also seems to occur with other voids such as <code>getHandlers()</code> so the issue might be more serious than I imagined.</p>\n<p>A snippet of my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\n\npublic class Main {\n     private final static Logger LOGGER = LogManager.getLogger(Main.class.getName());\n\n     public static void main(String... args){\n        FileHandler fileHandler;\n\n        try {\n            fileHandler = new FileHandler(&quot;log.txt&quot;);\n            SimpleFormatter formatter = new SimpleFormatter();\n            LOGGER.addHandler(fileHandler); // error\n            fileHandler.setFormatter(formatter);\n        } catch (SecurityException | IOException e) {\n            e.printStackTrace();\n        }\n}\n</code></pre>\n<p>And when I run the program, the build error that follows:</p>\n<pre><code>java: cannot find symbol\n  symbol:   method addHandler(java.util.logging.FileHandler)\n  location: variable LOGGER of type org.apache.logging.log4j.Logger\n</code></pre>\n<p>Maven dependency setup</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.17.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;2.17.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>Any and all help is greatly appreciated.</p>\n"},{"tags":["java","ssl","weblogic","weblogic12c","sslhandshakeexception"],"comments":[{"owner":{"account_id":2640300,"reputation":1317,"user_id":2284107,"accept_rate":60,"display_name":"kAmol"},"score":0,"creation_date":1607853464,"post_id":65274306,"comment_id":115398235,"body_markdown":"Sha1 keys are different may be because they were exported and added on different dates. But when tried to add again, it gives me error, it already exists.","body":"Sha1 keys are different may be because they were exported and added on different dates. But when tried to add again, it gives me error, it already exists."},{"owner":{"account_id":2640300,"reputation":1317,"user_id":2284107,"accept_rate":60,"display_name":"kAmol"},"score":0,"creation_date":1607853912,"post_id":65274306,"comment_id":115398351,"body_markdown":"To add : It worked up yesterday post importing certificates, but post restarting laptop and weblogic server, I am facing this issue","body":"To add : It worked up yesterday post importing certificates, but post restarting laptop and weblogic server, I am facing this issue"},{"owner":{"account_id":9107988,"reputation":3190,"user_id":6777695,"display_name":"Hakan54"},"score":0,"creation_date":1607855246,"post_id":65274306,"comment_id":115398620,"body_markdown":"Let&#39;s try to understand what is actually happening during the handshake proces. For that we need the logs of it. Could you start your server with the following parameters: `-Djavax.net.debug=SSL,keymanager,trustmanager,ssl:handshake` and share the full logs including the part when the request has been executed to the other server?","body":"Let&#39;s try to understand what is actually happening during the handshake proces. For that we need the logs of it. Could you start your server with the following parameters: <code>-Djavax.net.debug=SSL,keymanager,trustmanager,ssl:handshake</code> and share the full logs including the part when the request has been executed to the other server?"},{"owner":{"account_id":2640300,"reputation":1317,"user_id":2284107,"accept_rate":60,"display_name":"kAmol"},"score":0,"creation_date":1607867643,"post_id":65274306,"comment_id":115401648,"body_markdown":"@Hakan54 added stacktrace","body":"@Hakan54 added stacktrace"},{"owner":{"account_id":9107988,"reputation":3190,"user_id":6777695,"display_name":"Hakan54"},"score":0,"creation_date":1608302952,"post_id":65274306,"comment_id":115549497,"body_markdown":"A bit late from my side. I have the feeling that the ssl configuration you have provided is only being used for the server. However the server is executing a https request to another server with a http client. I don&#39;t think that http client within the server has a ssl configuration present. Can you maybe share how the external request is being constructed and executed?","body":"A bit late from my side. I have the feeling that the ssl configuration you have provided is only being used for the server. However the server is executing a https request to another server with a http client. I don&#39;t think that http client within the server has a ssl configuration present. Can you maybe share how the external request is being constructed and executed?"}],"answers":[{"tags":[],"owner":{"account_id":5790784,"reputation":1,"user_id":4568331,"display_name":"Vigneshwar Ponnusamy"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1659604058,"creation_date":1659603681,"answer_id":73233088,"question_id":65274306,"body_markdown":"Hello to whoever still looking for an answer,\r\n\r\nHope this helps you.\r\n\r\nI also had similar issue in running my application in Jdeveloper 12.2.1.4.0.\r\n\r\nLet me explain my situation and solution.\r\n\r\nMy application in Jdeveloper calls a REST api running in remote server.\r\nI downloaded the cert from browser by loading the remote server URL. I uploaded to Demotrust.jks file in oracle middleware folder.\r\nWhile running the application, I can see remote server cert appearing in Jdev logs (after turning on ssl debugging), but still the application was facing ```javax.net.ssl.SSLHandshakeException: General SSLEngine error``` while calling remote server REST api. I verified that the certificate is not expired. \r\n\r\nIn Weblogic admin console, I turned off ``Use KSS demo`` flag (Under ``Domain -&gt; Security -&gt; Advanced``).\r\n\r\nI have also set ``Hostname verification`` to `None` in SSL because its a wildcard certificate ``(Servers -&gt; DefaultServer -&gt; SSL -&gt; advanced)``. Still getting the SSLEngine problem. I found one more thing that needs to be set correctly.\r\n\r\nThe remote server is running within corp network. \r\nI found that **proxy** in Jdeveloper preferences is set to automatic. I set it to **None** (ofcourse test connection will fail and its ok) and restarted the server. With all of these configuration in place, the application is able to connect to REST API.","title":"javax.net.ssl.SSLHandshakeException: Even after adding certificate","body":"<p>Hello to whoever still looking for an answer,</p>\n<p>Hope this helps you.</p>\n<p>I also had similar issue in running my application in Jdeveloper 12.2.1.4.0.</p>\n<p>Let me explain my situation and solution.</p>\n<p>My application in Jdeveloper calls a REST api running in remote server.\nI downloaded the cert from browser by loading the remote server URL. I uploaded to Demotrust.jks file in oracle middleware folder.\nWhile running the application, I can see remote server cert appearing in Jdev logs (after turning on ssl debugging), but still the application was facing <code>javax.net.ssl.SSLHandshakeException: General SSLEngine error</code> while calling remote server REST api. I verified that the certificate is not expired.</p>\n<p>In Weblogic admin console, I turned off <code>Use KSS demo</code> flag (Under <code>Domain -&gt; Security -&gt; Advanced</code>).</p>\n<p>I have also set <code>Hostname verification</code> to <code>None</code> in SSL because its a wildcard certificate <code>(Servers -&gt; DefaultServer -&gt; SSL -&gt; advanced)</code>. Still getting the SSLEngine problem. I found one more thing that needs to be set correctly.</p>\n<p>The remote server is running within corp network.\nI found that <strong>proxy</strong> in Jdeveloper preferences is set to automatic. I set it to <strong>None</strong> (ofcourse test connection will fail and its ok) and restarted the server. With all of these configuration in place, the application is able to connect to REST API.</p>\n"}],"owner":{"account_id":2640300,"reputation":1317,"user_id":2284107,"accept_rate":60,"display_name":"kAmol"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":6227,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1659607594,"answer_count":1,"score":0,"last_activity_date":1659607651,"creation_date":1607853350,"question_id":65274306,"body_markdown":"I am using weblogic server which has keystores in use like :\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nNow when my application running on this server tries to download images from another server, it throws \r\n`javax.net.ssl.SSLHandshakeException: General SSLEngine problem`\r\n\r\nI have added server certificates to these both `DemoTrust.jks` and `JDK CACERTS` using [this link][2] :\r\nafter adding certificates, it looks like :\r\n\r\n[![enter image description here][3]][3]\r\n\r\nAnd java certs has \r\n\r\n[![enter image description here][4]][4]\r\n\r\nAs suggested by different posts, I have also added to startWeblogic.cmd\r\n\r\n&gt; set JAVA_OPTIONS=%JAVA_OPTIONS% -Dweblogic.security.SSL.verbose=true\r\nset JAVA_OPTIONS=%JAVA_OPTIONS% -Dweblogic.security.SSL.enable.renegotiation=true\r\nset JAVA_OPTIONS=%JAVA_OPTIONS% -Dsun.security.ssl.allowUnsafeRenegotiation=true\r\n\r\nAm I missing something ? Any Suggestions ?\r\n\r\nEdit 1 : Adding exception stacktrace\r\n\r\n&gt; vax.net.ssl.SSLHandshakeException: General SSLEngine problem\r\n        at sun.security.ssl.Handshaker.checkThrown(Handshaker.java:1529)\r\n        at sun.security.ssl.SSLEngineImpl.checkTaskThrown(SSLEngineImpl.java:535)\r\n        at sun.security.ssl.SSLEngineImpl.writeAppRecord(SSLEngineImpl.java:1214)\r\n        at sun.security.ssl.SSLEngineImpl.wrap(SSLEngineImpl.java:1186)\r\n        at javax.net.ssl.SSLEngine.wrap(SSLEngine.java:469)\r\n        at weblogic.security.SSL.jsseadapter.JaSSLEngine$1.run(JaSSLEngine.java:69)\r\n        at weblogic.security.SSL.jsseadapter.JaSSLEngine.doAction(JaSSLEngine.java:743)\r\n        at weblogic.security.SSL.jsseadapter.JaSSLEngine.wrap(JaSSLEngine.java:67)\r\n        at weblogic.socket.JSSEFilterImpl.wrapAndWrite(JSSEFilterImpl.java:771)\r\n        at weblogic.socket.JSSEFilterImpl.doHandshake(JSSEFilterImpl.java:119)\r\n        at weblogic.socket.JSSEFilterImpl.doHandshake(JSSEFilterImpl.java:87)\r\n        at weblogic.socket.JSSESocket.startHandshake(JSSESocket.java:250)\r\n        at weblogic.net.http.HttpsClient.New(HttpsClient.java:577)\r\n        at weblogic.net.http.HttpsClient.New(HttpsClient.java:557)\r\n        at weblogic.net.http.HttpsURLConnection.connect(HttpsURLConnection.java:265)\r\n        at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:651)\r\n        at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:628)\r\n        at org.jsoup.helper.HttpConnection.execute(HttpConnection.java:260)\r\n        at org.jsoup.helper.HttpConnection.get(HttpConnection.java:249)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at com.bea.core.repackaged.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)\r\n        at com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\r\n        at com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n        at com.oracle.pitchfork.intercept.MethodInvocationInvocationContext.proceed(MethodInvocationInvocationContext.java:101)\r\n        at com.oracle.pitchfork.intercept.JeeInterceptorInterceptor.invoke(JeeInterceptorInterceptor.java:101)\r\n        at com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n        at com.oracle.pitchfork.intercept.MethodInvocationInvocationContext.proceed(MethodInvocationInvocationContext.java:101)\r\n        at org.jboss.weld.ejb.AbstractEJBRequestScopeActivationInterceptor.aroundInvoke(AbstractEJBRequestScopeActivationInterceptor.java:73)\r\n        at org.jboss.weld.ejb.SessionBeanInterceptor.aroundInvoke(SessionBeanInterceptor.java:52)\r\n        at sun.reflect.GeneratedMethodAccessor235.invoke(Unknown Source)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at com.oracle.pitchfork.intercept.JeeInterceptorInterceptor.invoke(JeeInterceptorInterceptor.java:94)\r\n        at com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n        at com.bea.core.repackaged.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:133)\r\n        at com.bea.core.repackaged.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:121)\r\n        at com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n        at com.bea.core.repackaged.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)\r\n        at com.sun.proxy.$Proxy254.execute(Unknown Source)\r\n        at weblogic.ejb.container.internal.SessionLocalMethodInvoker.invoke(SessionLocalMethodInvoker.java:33)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n        at java.lang.Thread.run(Thread.java:748)\r\nCaused by: javax.net.ssl.SSLHandshakeException: General SSLEngine problem\r\n        at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)\r\n        at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1728)\r\n        at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:330)\r\n        at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:322)\r\n        at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1614)\r\n        at sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:216)\r\n        at sun.security.ssl.Handshaker.processLoop(Handshaker.java:1052)\r\n        at sun.security.ssl.Handshaker$1.run(Handshaker.java:992)\r\n        at sun.security.ssl.Handshaker$1.run(Handshaker.java:989)\r\n        at java.security.AccessController.doPrivileged(Native Method)\r\n        at sun.security.ssl.Handshaker$DelegatedTask.run(Handshaker.java:1467)\r\n        at weblogic.socket.JSSEFilterImpl.doTasks(JSSEFilterImpl.java:223)\r\n        at weblogic.socket.JSSEFilterImpl.doHandshake(JSSEFilterImpl.java:123)\r\n        ... 44 more\r\nCaused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n        at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:397)\r\n        at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:302)\r\n        at sun.security.validator.Validator.validate(Validator.java:260)\r\n        at sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:324)\r\n        at sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:229)\r\n        at sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:105)\r\n        at weblogic.security.SSL.jsseadapter.JaTrustManager.checkServerTrusted(JaTrustManager.java:128)\r\n        at sun.security.ssl.AbstractTrustManagerWrapper.checkServerTrusted(SSLContextImpl.java:999)\r\n        at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1601)\r\n        ... 52 more\r\nCaused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n        at sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:141)\r\n        at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:126)\r\n        at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:280)\r\n        at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:392)\r\n        ... 60 more\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sanKT.png\r\n  [2]: http://saltnlight5.blogspot.com/2016/07/wls-how-to-import-ssl-cert-into-wls.html\r\n  [3]: https://i.stack.imgur.com/IN8E9.png\r\n  [4]: https://i.stack.imgur.com/wv9nY.png","title":"javax.net.ssl.SSLHandshakeException: Even after adding certificate","body":"<p>I am using weblogic server which has keystores in use like :</p>\n<p><a href=\"https://i.stack.imgur.com/sanKT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sanKT.png\" alt=\"enter image description here\" /></a></p>\n<p>Now when my application running on this server tries to download images from another server, it throws\n<code>javax.net.ssl.SSLHandshakeException: General SSLEngine problem</code></p>\n<p>I have added server certificates to these both <code>DemoTrust.jks</code> and <code>JDK CACERTS</code> using <a href=\"http://saltnlight5.blogspot.com/2016/07/wls-how-to-import-ssl-cert-into-wls.html\" rel=\"nofollow noreferrer\">this link</a> :\nafter adding certificates, it looks like :</p>\n<p><a href=\"https://i.stack.imgur.com/IN8E9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IN8E9.png\" alt=\"enter image description here\" /></a></p>\n<p>And java certs has</p>\n<p><a href=\"https://i.stack.imgur.com/wv9nY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wv9nY.png\" alt=\"enter image description here\" /></a></p>\n<p>As suggested by different posts, I have also added to startWeblogic.cmd</p>\n<blockquote>\n<p>set JAVA_OPTIONS=%JAVA_OPTIONS% -Dweblogic.security.SSL.verbose=true\nset JAVA_OPTIONS=%JAVA_OPTIONS% -Dweblogic.security.SSL.enable.renegotiation=true\nset JAVA_OPTIONS=%JAVA_OPTIONS% -Dsun.security.ssl.allowUnsafeRenegotiation=true</p>\n</blockquote>\n<p>Am I missing something ? Any Suggestions ?</p>\n<p>Edit 1 : Adding exception stacktrace</p>\n<blockquote>\n<p>vax.net.ssl.SSLHandshakeException: General SSLEngine problem\nat sun.security.ssl.Handshaker.checkThrown(Handshaker.java:1529)\nat sun.security.ssl.SSLEngineImpl.checkTaskThrown(SSLEngineImpl.java:535)\nat sun.security.ssl.SSLEngineImpl.writeAppRecord(SSLEngineImpl.java:1214)\nat sun.security.ssl.SSLEngineImpl.wrap(SSLEngineImpl.java:1186)\nat javax.net.ssl.SSLEngine.wrap(SSLEngine.java:469)\nat weblogic.security.SSL.jsseadapter.JaSSLEngine$1.run(JaSSLEngine.java:69)\nat weblogic.security.SSL.jsseadapter.JaSSLEngine.doAction(JaSSLEngine.java:743)\nat weblogic.security.SSL.jsseadapter.JaSSLEngine.wrap(JaSSLEngine.java:67)\nat weblogic.socket.JSSEFilterImpl.wrapAndWrite(JSSEFilterImpl.java:771)\nat weblogic.socket.JSSEFilterImpl.doHandshake(JSSEFilterImpl.java:119)\nat weblogic.socket.JSSEFilterImpl.doHandshake(JSSEFilterImpl.java:87)\nat weblogic.socket.JSSESocket.startHandshake(JSSESocket.java:250)\nat weblogic.net.http.HttpsClient.New(HttpsClient.java:577)\nat weblogic.net.http.HttpsClient.New(HttpsClient.java:557)\nat weblogic.net.http.HttpsURLConnection.connect(HttpsURLConnection.java:265)\nat org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:651)\nat org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:628)\nat org.jsoup.helper.HttpConnection.execute(HttpConnection.java:260)\nat org.jsoup.helper.HttpConnection.get(HttpConnection.java:249)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat com.bea.core.repackaged.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)\nat com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\nat com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\nat com.oracle.pitchfork.intercept.MethodInvocationInvocationContext.proceed(MethodInvocationInvocationContext.java:101)\nat com.oracle.pitchfork.intercept.JeeInterceptorInterceptor.invoke(JeeInterceptorInterceptor.java:101)\nat com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\nat com.oracle.pitchfork.intercept.MethodInvocationInvocationContext.proceed(MethodInvocationInvocationContext.java:101)\nat org.jboss.weld.ejb.AbstractEJBRequestScopeActivationInterceptor.aroundInvoke(AbstractEJBRequestScopeActivationInterceptor.java:73)\nat org.jboss.weld.ejb.SessionBeanInterceptor.aroundInvoke(SessionBeanInterceptor.java:52)\nat sun.reflect.GeneratedMethodAccessor235.invoke(Unknown Source)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat com.oracle.pitchfork.intercept.JeeInterceptorInterceptor.invoke(JeeInterceptorInterceptor.java:94)\nat com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\nat com.bea.core.repackaged.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:133)\nat com.bea.core.repackaged.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:121)\nat com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\nat com.bea.core.repackaged.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)\nat com.sun.proxy.$Proxy254.execute(Unknown Source)\nat weblogic.ejb.container.internal.SessionLocalMethodInvoker.invoke(SessionLocalMethodInvoker.java:33)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\nat java.lang.Thread.run(Thread.java:748)\nCaused by: javax.net.ssl.SSLHandshakeException: General SSLEngine problem\nat sun.security.ssl.Alerts.getSSLException(Alerts.java:192)\nat sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1728)\nat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:330)\nat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:322)\nat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1614)\nat sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:216)\nat sun.security.ssl.Handshaker.processLoop(Handshaker.java:1052)\nat sun.security.ssl.Handshaker$1.run(Handshaker.java:992)\nat sun.security.ssl.Handshaker$1.run(Handshaker.java:989)\nat java.security.AccessController.doPrivileged(Native Method)\nat sun.security.ssl.Handshaker$DelegatedTask.run(Handshaker.java:1467)\nat weblogic.socket.JSSEFilterImpl.doTasks(JSSEFilterImpl.java:223)\nat weblogic.socket.JSSEFilterImpl.doHandshake(JSSEFilterImpl.java:123)\n... 44 more\nCaused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\nat sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:397)\nat sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:302)\nat sun.security.validator.Validator.validate(Validator.java:260)\nat sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:324)\nat sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:229)\nat sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:105)\nat weblogic.security.SSL.jsseadapter.JaTrustManager.checkServerTrusted(JaTrustManager.java:128)\nat sun.security.ssl.AbstractTrustManagerWrapper.checkServerTrusted(SSLContextImpl.java:999)\nat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1601)\n... 52 more\nCaused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\nat sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:141)\nat sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:126)\nat java.security.cert.CertPathBuilder.build(CertPathBuilder.java:280)\nat sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:392)\n... 60 more</p>\n</blockquote>\n"},{"tags":["java","android","mediarecorder","android-external-storage"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1658806592,"post_id":73115827,"comment_id":129136885,"body_markdown":"Yes you cannot create your own subfolders on external storage on Android 11+ devices. Use an existing public folder.","body":"Yes you cannot create your own subfolders on external storage on Android 11+ devices. Use an existing public folder."},{"owner":{"account_id":9069534,"reputation":548,"user_id":6753279,"accept_rate":63,"display_name":"Ritu"},"score":1,"creation_date":1658826443,"post_id":73115827,"comment_id":129142135,"body_markdown":"@blackapps I&#39;m creating app directory inside existing music directory like others app do. For ex in picture folder you can see different app subfolder like Twitter, Instagram etc.","body":"@blackapps I&#39;m creating app directory inside existing music directory like others app do. For ex in picture folder you can see different app subfolder like Twitter, Instagram etc."},{"owner":{"account_id":9069534,"reputation":548,"user_id":6753279,"accept_rate":63,"display_name":"Ritu"},"score":0,"creation_date":1658827932,"post_id":73115827,"comment_id":129142790,"body_markdown":"@blackapps i can see directory created by file.mkdirs but the file is not created. Any idea?","body":"@blackapps i can see directory created by file.mkdirs but the file is not created. Any idea?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1658900421,"post_id":73115827,"comment_id":129163500,"body_markdown":"Not all extensions are permitted in public Music directory. Try .mp3.","body":"Not all extensions are permitted in public Music directory. Try .mp3."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1658900508,"post_id":73115827,"comment_id":129163521,"body_markdown":"if (!dir.exists()){\n                         if (!   dir.mkdirs()) return:\n                        }","body":"if (!dir.exists()){                          if (!   dir.mkdirs()) return:                         }"},{"owner":{"account_id":9069534,"reputation":548,"user_id":6753279,"accept_rate":63,"display_name":"Ritu"},"score":0,"creation_date":1658926707,"post_id":73115827,"comment_id":129173002,"body_markdown":"@blackapps Is there any documentation for extension permitted ? Directory is created everytime but not the recorded file","body":"@blackapps Is there any documentation for extension permitted ? Directory is created everytime but not the recorded file"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1658934134,"post_id":73115827,"comment_id":129176455,"body_markdown":"`Try .mp3.` You are not reacting on this suggestion. Nor on the mkdirs advise. Any reason?","body":"<code>Try .mp3.</code> You are not reacting on this suggestion. Nor on the mkdirs advise. Any reason?"},{"owner":{"account_id":9069534,"reputation":548,"user_id":6753279,"accept_rate":63,"display_name":"Ritu"},"score":0,"creation_date":1658938294,"post_id":73115827,"comment_id":129178277,"body_markdown":"@blackapps mp3 works but creating .mp3 is not suitable in our case for recording and i mentioned in my comment that i can see directory but not file. Is there any way to save recordings in music folder?","body":"@blackapps mp3 works but creating .mp3 is not suitable in our case for recording and i mentioned in my comment that i can see directory but not file. Is there any way to save recordings in music folder?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1658939864,"post_id":73115827,"comment_id":129178868,"body_markdown":"If .mp3 works than in Music folder isnt it? So you would see it. There would be a file then. You are unclear.","body":"If .mp3 works than in Music folder isnt it? So you would see it. There would be a file then. You are unclear."},{"owner":{"account_id":9069534,"reputation":548,"user_id":6753279,"accept_rate":63,"display_name":"Ritu"},"score":0,"creation_date":1658942850,"post_id":73115827,"comment_id":129179921,"body_markdown":"@blackapps I can see mp3 file in music folder but i need to create 3gp for recording through MediaRecorder","body":"@blackapps I can see mp3 file in music folder but i need to create 3gp for recording through MediaRecorder"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1658943026,"post_id":73115827,"comment_id":129179992,"body_markdown":"Well, as said before, and as you saw, not all extensions are permitted in Music folder.","body":"Well, as said before, and as you saw, not all extensions are permitted in Music folder."},{"owner":{"account_id":9069534,"reputation":548,"user_id":6753279,"accept_rate":63,"display_name":"Ritu"},"score":0,"creation_date":1658944609,"post_id":73115827,"comment_id":129180544,"body_markdown":"@blackapps is there any documentation where i can see allowed extensions in music folder and where else i can store recordings then","body":"@blackapps is there any documentation where i can see allowed extensions in music folder and where else i can store recordings then"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1658945598,"post_id":73115827,"comment_id":129180866,"body_markdown":"A .3gp file is a video file extension. Not a music file extension. You could try public Movies or Videos directory.","body":"A .3gp file is a video file extension. Not a music file extension. You could try public Movies or Videos directory."},{"owner":{"account_id":9069534,"reputation":548,"user_id":6753279,"accept_rate":63,"display_name":"Ritu"},"score":0,"creation_date":1658952974,"post_id":73115827,"comment_id":129183162,"body_markdown":"@blackapps  The offical documentation of Android using 3gp you can check i mentioned link in my question","body":"@blackapps  The offical documentation of Android using 3gp you can check i mentioned link in my question"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1658953249,"post_id":73115827,"comment_id":129183228,"body_markdown":"It is unclear what you wanna say. Or what should i check? Repeat: not all file extensions are permitted in Music folder.","body":"It is unclear what you wanna say. Or what should i check? Repeat: not all file extensions are permitted in Music folder."},{"owner":{"account_id":1468853,"reputation":3627,"user_id":1380933,"display_name":"Vadik Sirekanyan"},"score":0,"creation_date":1659526857,"post_id":73115827,"comment_id":129314936,"body_markdown":"@Ritu, unfortunately, getExternalStoragePublicDirectory() method is deprecated, you should use [MediaStore API](https://developer.android.com/training/data-storage/shared/media) to work with public shared directories on Android 11+.","body":"@Ritu, unfortunately, getExternalStoragePublicDirectory() method is deprecated, you should use <a href=\"https://developer.android.com/training/data-storage/shared/media\" rel=\"nofollow noreferrer\">MediaStore API</a> to work with public shared directories on Android 11+."}],"answers":[{"tags":[],"owner":{"account_id":1468853,"reputation":3627,"user_id":1380933,"display_name":"Vadik Sirekanyan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659519296,"creation_date":1659517232,"answer_id":73218970,"question_id":73115827,"body_markdown":"The [`getExternalStoragePublicDirectory()`](https://developer.android.com/reference/android/os/Environment#getExternalStoragePublicDirectory(java.lang.String)) method is [deprecated](https://stackoverflow.com/questions/56468539) in API level 29 (Android 10).\r\n\r\nIf you want to save a file into a public shareable directory you have to use [MediaStore API](https://developer.android.com/training/data-storage/shared/media). I also recommend taking a look at [all options](https://developer.android.com/training/data-storage) for storing files on Android.\r\n\r\nIf you have no problems with saving your recordings into a cache directory (by using the code from the official docs). Then you can copy the file from the cache to the public directory using MediaStore API:\r\n\r\n```java\r\nprivate void copyToPublicDirectory(String filename) throws IOException {\r\n    InputStream inputStream = createInputStream(filename);\r\n    OutputStream outputStream = createOutputStream(filename);\r\n    copy(inputStream, outputStream);\r\n}\r\n\r\nprivate InputStream createInputStream(String filename) throws IOException {\r\n    File cacheDirectory = getExternalCacheDir();\r\n    if (cacheDirectory == null)\r\n        throw new RuntimeException(&quot;Cache is not currently available&quot;);\r\n    return new FileInputStream(new File(cacheDirectory, filename));\r\n}\r\n\r\nprivate OutputStream createOutputStream(String filename) throws IOException {\r\n    ContentValues contentValues = new ContentValues();\r\n    contentValues.put(MediaStore.MediaColumns.DISPLAY_NAME, filename);\r\n    Uri contentUri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;\r\n    Uri uri = getContentResolver().insert(contentUri, contentValues);\r\n    if (uri == null)\r\n        throw new RuntimeException(&quot;Cannot insert file: &quot; + filename);\r\n    OutputStream outputStream = getContentResolver().openOutputStream(uri);\r\n    if (outputStream == null)\r\n        throw new RuntimeException(&quot;Cannot open uri: &quot; + uri);\r\n    return outputStream;\r\n}\r\n\r\nprivate void copy(InputStream source, OutputStream target) throws IOException {\r\n    byte[] buffer = new byte[8192];\r\n    int length;\r\n    while ((length = source.read(buffer)) != -1) {\r\n        target.write(buffer, 0, length);\r\n    }\r\n}\r\n```\r\n\r\n**Note:** 3gp recordings have `video/3gpp` mime type. And it will be saved into the `Movies` directory (as @blackapps already said). If you want to record a file in audio format and save it into the `Music` directory, then do the following:\r\n\r\n1. Change content uri from `MediaStore.Video.Media.EXTERNAL_CONTENT_URI` to `MediaStore.Audio.Media.EXTERNAL_CONTENT_URI` in the code above.\r\n\r\n2. Use OGG format in your MediaRecorder setup (OGG format is available only for Android API 29 and higher):\r\n    ```java\r\n    setOutputFormat(MediaRecorder.OutputFormat.OGG)\r\n    setAudioEncoder(MediaRecorder.AudioEncoder.OPUS)\r\n    ```\r\n\r\n**PS:** don&#39;t forget to add all necessary permissions to make things work.","title":"MediaRecorder prepare() failed /storage/emulated/0/: open failed: EPERM (Operation not permitted)","body":"<p>The <a href=\"https://developer.android.com/reference/android/os/Environment#getExternalStoragePublicDirectory(java.lang.String)\" rel=\"nofollow noreferrer\"><code>getExternalStoragePublicDirectory()</code></a> method is <a href=\"https://stackoverflow.com/questions/56468539\">deprecated</a> in API level 29 (Android 10).</p>\n<p>If you want to save a file into a public shareable directory you have to use <a href=\"https://developer.android.com/training/data-storage/shared/media\" rel=\"nofollow noreferrer\">MediaStore API</a>. I also recommend taking a look at <a href=\"https://developer.android.com/training/data-storage\" rel=\"nofollow noreferrer\">all options</a> for storing files on Android.</p>\n<p>If you have no problems with saving your recordings into a cache directory (by using the code from the official docs). Then you can copy the file from the cache to the public directory using MediaStore API:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void copyToPublicDirectory(String filename) throws IOException {\n    InputStream inputStream = createInputStream(filename);\n    OutputStream outputStream = createOutputStream(filename);\n    copy(inputStream, outputStream);\n}\n\nprivate InputStream createInputStream(String filename) throws IOException {\n    File cacheDirectory = getExternalCacheDir();\n    if (cacheDirectory == null)\n        throw new RuntimeException(&quot;Cache is not currently available&quot;);\n    return new FileInputStream(new File(cacheDirectory, filename));\n}\n\nprivate OutputStream createOutputStream(String filename) throws IOException {\n    ContentValues contentValues = new ContentValues();\n    contentValues.put(MediaStore.MediaColumns.DISPLAY_NAME, filename);\n    Uri contentUri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;\n    Uri uri = getContentResolver().insert(contentUri, contentValues);\n    if (uri == null)\n        throw new RuntimeException(&quot;Cannot insert file: &quot; + filename);\n    OutputStream outputStream = getContentResolver().openOutputStream(uri);\n    if (outputStream == null)\n        throw new RuntimeException(&quot;Cannot open uri: &quot; + uri);\n    return outputStream;\n}\n\nprivate void copy(InputStream source, OutputStream target) throws IOException {\n    byte[] buffer = new byte[8192];\n    int length;\n    while ((length = source.read(buffer)) != -1) {\n        target.write(buffer, 0, length);\n    }\n}\n</code></pre>\n<p><strong>Note:</strong> 3gp recordings have <code>video/3gpp</code> mime type. And it will be saved into the <code>Movies</code> directory (as @blackapps already said). If you want to record a file in audio format and save it into the <code>Music</code> directory, then do the following:</p>\n<ol>\n<li><p>Change content uri from <code>MediaStore.Video.Media.EXTERNAL_CONTENT_URI</code> to <code>MediaStore.Audio.Media.EXTERNAL_CONTENT_URI</code> in the code above.</p>\n</li>\n<li><p>Use OGG format in your MediaRecorder setup (OGG format is available only for Android API 29 and higher):</p>\n<pre class=\"lang-java prettyprint-override\"><code>setOutputFormat(MediaRecorder.OutputFormat.OGG)\nsetAudioEncoder(MediaRecorder.AudioEncoder.OPUS)\n</code></pre>\n</li>\n</ol>\n<p><strong>PS:</strong> don't forget to add all necessary permissions to make things work.</p>\n"}],"owner":{"account_id":9069534,"reputation":548,"user_id":6753279,"accept_rate":63,"display_name":"Ritu"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":890,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73218970,"answer_count":1,"score":1,"last_activity_date":1659607635,"creation_date":1658786934,"question_id":73115827,"body_markdown":"I am trying to record audio on my Android 12 Device with `File and Media Permission` granted but `recorder.prepare();` throws\r\n\r\n`prepare() failed /storage/emulated/0/Music/Exotel/Media/Exotel Audio/Voice Messages/Exotel Temp/Exotel_Voice1658709937668.3gpp: open failed: EPERM (Operation not permitted)`\r\n\r\nI am using [official documentation][1] but they are saving recording into app specific storage(`getExternalCacheDir().getAbsolutePath();`) and i am saving on external public storage \r\n`String TempPath = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MUSIC).getAbsolutePath()+ &quot;/&quot; + subfolder;` . No matter what i try i still get the same error whenever i tried to save into external shared storage. \r\n\r\nHere is my code:\r\n\r\n```java\r\nString subfolder = &quot;Exotel/Media/Exotel Audio/Voice Messages/Exotel Temp&quot;;\r\nString time = new SimpleDateFormat(&quot;yyyyMMddhhmmss&quot;, Locale.US).format(new Date());\r\nString filename = Session.getUserFname()+&quot;_Voice&quot;+time+&quot;.3gp&quot;;\r\nString TempPath = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MUSIC).getAbsolutePath()+ &quot;/&quot; + subfolder;\r\nFile dir = new File(TempPath);\r\n\r\nif (!dir.exists()){\r\n    dir.mkdirs();\r\n}\r\n\r\nTempPath = TempPath+&quot;/&quot;+filename;\r\nLog.d(TAG, &quot;onTouch: Temp Path &quot;+TempPath);\r\n\r\nrecorder = new MediaRecorder();\r\nrecorder.setAudioSource(MediaRecorder.AudioSource.MIC);\r\nrecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);\r\nrecorder.setOutputFile(TempPath);\r\nrecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);\r\n\r\ntry {\r\n    recorder.prepare();\r\n    recorder.start();\r\n} catch (IOException | IllegalStateException e) {\r\n    Log.e(TAG, &quot;prepare() failed &quot;+e.getMessage());\r\n}\r\n```\r\n\r\n[1]: https://developer.android.com/guide/topics/media/mediarecorder","title":"MediaRecorder prepare() failed /storage/emulated/0/: open failed: EPERM (Operation not permitted)","body":"<p>I am trying to record audio on my Android 12 Device with <code>File and Media Permission</code> granted but <code>recorder.prepare();</code> throws</p>\n<p><code>prepare() failed /storage/emulated/0/Music/Exotel/Media/Exotel Audio/Voice Messages/Exotel Temp/Exotel_Voice1658709937668.3gpp: open failed: EPERM (Operation not permitted)</code></p>\n<p>I am using <a href=\"https://developer.android.com/guide/topics/media/mediarecorder\" rel=\"nofollow noreferrer\">official documentation</a> but they are saving recording into app specific storage(<code>getExternalCacheDir().getAbsolutePath();</code>) and i am saving on external public storage\n<code>String TempPath = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MUSIC).getAbsolutePath()+ &quot;/&quot; + subfolder;</code> . No matter what i try i still get the same error whenever i tried to save into external shared storage.</p>\n<p>Here is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String subfolder = &quot;Exotel/Media/Exotel Audio/Voice Messages/Exotel Temp&quot;;\nString time = new SimpleDateFormat(&quot;yyyyMMddhhmmss&quot;, Locale.US).format(new Date());\nString filename = Session.getUserFname()+&quot;_Voice&quot;+time+&quot;.3gp&quot;;\nString TempPath = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MUSIC).getAbsolutePath()+ &quot;/&quot; + subfolder;\nFile dir = new File(TempPath);\n\nif (!dir.exists()){\n    dir.mkdirs();\n}\n\nTempPath = TempPath+&quot;/&quot;+filename;\nLog.d(TAG, &quot;onTouch: Temp Path &quot;+TempPath);\n\nrecorder = new MediaRecorder();\nrecorder.setAudioSource(MediaRecorder.AudioSource.MIC);\nrecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);\nrecorder.setOutputFile(TempPath);\nrecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);\n\ntry {\n    recorder.prepare();\n    recorder.start();\n} catch (IOException | IllegalStateException e) {\n    Log.e(TAG, &quot;prepare() failed &quot;+e.getMessage());\n}\n</code></pre>\n"},{"tags":["java","google-bigquery","publish-subscribe","google-cloud-pubsub"],"answers":[{"tags":[],"owner":{"account_id":88036,"reputation":205429,"user_id":243782,"accept_rate":94,"display_name":"Pentium10"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1530608423,"creation_date":1530608423,"answer_id":51150523,"question_id":51149927,"body_markdown":"Cloud Pub/Sub is a queue service, imagine like a database.\r\n\r\nYou still need something between Cloud Pub/Sub and Bigquery which executes the jobs that are waiting in the queue. For this people often use DataFlow, but you can implement your own worker to read from Pub/Sub and write to BigQuery.","title":"PUB/SUB To Bigquery Without Using DataFlow","body":"<p>Cloud Pub/Sub is a queue service, imagine like a database.</p>\n\n<p>You still need something between Cloud Pub/Sub and Bigquery which executes the jobs that are waiting in the queue. For this people often use DataFlow, but you can implement your own worker to read from Pub/Sub and write to BigQuery.</p>\n"},{"tags":[],"owner":{"account_id":13090054,"reputation":2079,"user_id":9457843,"display_name":"rsantiago"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1534452471,"creation_date":1534452471,"answer_id":51885128,"question_id":51149927,"body_markdown":"Pubsub stores messages, and they are meant to be read by clients to be processed. Instead of using Pubsub, you can modify your your application to insert directly into BigQuery because there are nothing to process in the messages. [This link][1] contains examples for all the available clients for streaming loading. For batch check [this one][2].\r\n\r\nHowever, if you still need to dump your messages there is a beta [Pub/Sub to BigQuery template][3] that could do that. Be aware that it is an intermediate process dedicated to transfer structured data. Basically there are two requirements:\r\n\r\n- Pubsub messages has to be in simple JSON format, for example {&quot;k1&quot;:&quot;v1&quot;, &quot;k2&quot;:&quot;v2&quot;}. And then, your data will inserted in columns k1 and k2.\r\n- The table should exist in BigQuery prior the execution.\r\n\r\nCheck the link of the template for complete instructions. \r\n\r\nHope this information answer your question.\r\n\r\n\r\n  [1]: https://cloud.google.com/bigquery/streaming-data-into-bigquery#streaminginsertexamples\r\n  [2]: https://cloud.google.com/bigquery/docs/loading-data#supported_data_formats\r\n  [3]: https://cloud.google.com/dataflow/docs/templates/provided-templates#cloud-pubsub-to-bigquery","title":"PUB/SUB To Bigquery Without Using DataFlow","body":"<p>Pubsub stores messages, and they are meant to be read by clients to be processed. Instead of using Pubsub, you can modify your your application to insert directly into BigQuery because there are nothing to process in the messages. <a href=\"https://cloud.google.com/bigquery/streaming-data-into-bigquery#streaminginsertexamples\" rel=\"nofollow noreferrer\">This link</a> contains examples for all the available clients for streaming loading. For batch check <a href=\"https://cloud.google.com/bigquery/docs/loading-data#supported_data_formats\" rel=\"nofollow noreferrer\">this one</a>.</p>\n\n<p>However, if you still need to dump your messages there is a beta <a href=\"https://cloud.google.com/dataflow/docs/templates/provided-templates#cloud-pubsub-to-bigquery\" rel=\"nofollow noreferrer\">Pub/Sub to BigQuery template</a> that could do that. Be aware that it is an intermediate process dedicated to transfer structured data. Basically there are two requirements:</p>\n\n<ul>\n<li>Pubsub messages has to be in simple JSON format, for example {\"k1\":\"v1\", \"k2\":\"v2\"}. And then, your data will inserted in columns k1 and k2.</li>\n<li>The table should exist in BigQuery prior the execution.</li>\n</ul>\n\n<p>Check the link of the template for complete instructions. </p>\n\n<p>Hope this information answer your question.</p>\n"},{"tags":[],"owner":{"account_id":1616749,"reputation":348,"user_id":1494229,"display_name":"Balasubramanian Naagarajan"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1659607532,"creation_date":1659356005,"answer_id":73193492,"question_id":51149927,"body_markdown":"GCP has introduced new feature called [BigQuery subscriptions][1] iwhich allows the pubsub subscription to write to Bigquery directly without using dataflow jobs. You won&#39;t get billed any additional charges to write the data to bigquery.\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://cloud.google.com/pubsub/docs/bigquery\r\n  [2]: https://i.stack.imgur.com/ozh3L.png","title":"PUB/SUB To Bigquery Without Using DataFlow","body":"<p>GCP has introduced new feature called <a href=\"https://cloud.google.com/pubsub/docs/bigquery\" rel=\"nofollow noreferrer\">BigQuery subscriptions</a> iwhich allows the pubsub subscription to write to Bigquery directly without using dataflow jobs. You won't get billed any additional charges to write the data to bigquery.</p>\n<p><a href=\"https://i.stack.imgur.com/ozh3L.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ozh3L.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":9231111,"reputation":69,"user_id":6857144,"display_name":"Gal Kogman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6143,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":3,"score":4,"last_activity_date":1659607532,"creation_date":1530606433,"question_id":51149927,"body_markdown":"I would like to insert into bigquery tables data using pubsub. The data has been processed so I do not need dataflow.\r\nHow can I do this?\r\nThanks in advance","title":"PUB/SUB To Bigquery Without Using DataFlow","body":"<p>I would like to insert into bigquery tables data using pubsub. The data has been processed so I do not need dataflow.\nHow can I do this?\nThanks in advance</p>\n"},{"tags":["java","logging","log4j","slf4j"],"comments":[{"owner":{"account_id":367746,"reputation":24129,"user_id":714112,"accept_rate":80,"display_name":"Sridhar Sarnobat"},"score":1,"creation_date":1547594738,"post_id":10505418,"comment_id":95243191,"body_markdown":"I swear there was a way to turn on slf4j debugging (meta debugging) but I can&#39;t remember what it was. None of the answers address that.","body":"I swear there was a way to turn on slf4j debugging (meta debugging) but I can&#39;t remember what it was. None of the answers address that."}],"answers":[{"tags":[],"owner":{"account_id":299251,"reputation":335905,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"down_vote_count":0,"up_vote_count":71,"is_accepted":true,"score":71,"last_activity_date":1336507084,"creation_date":1336507084,"answer_id":10505593,"question_id":10505418,"body_markdown":"Just do what SLF4J does to discover the binding:\r\n\r\n\tfinal StaticLoggerBinder binder = StaticLoggerBinder.getSingleton();\r\n\r\nNow you can try to find out what is the actual implementation [tag:logback] in my case:\r\n\r\n\tSystem.out.println(binder.getLoggerFactory());\r\n\tSystem.out.println(binder.getLoggerFactoryClassStr());\r\n\r\nThis prints:\r\n\r\n    ch.qos.logback.classic.LoggerContext[default]\r\n    ch.qos.logback.classic.selector.DefaultContextSelector","title":"How to find which library slf4j has bound itself to?","body":"<p>Just do what SLF4J does to discover the binding:</p>\n\n<pre><code>final StaticLoggerBinder binder = StaticLoggerBinder.getSingleton();\n</code></pre>\n\n<p>Now you can try to find out what is the actual implementation <a href=\"/questions/tagged/logback\" class=\"post-tag\" title=\"show questions tagged 'logback'\" rel=\"tag\">logback</a> in my case:</p>\n\n<pre><code>System.out.println(binder.getLoggerFactory());\nSystem.out.println(binder.getLoggerFactoryClassStr());\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>ch.qos.logback.classic.LoggerContext[default]\nch.qos.logback.classic.selector.DefaultContextSelector\n</code></pre>\n"},{"tags":[],"owner":{"account_id":39941,"reputation":23634,"user_id":115478,"accept_rate":74,"display_name":"leedm777"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1336507093,"creation_date":1336507093,"answer_id":10505596,"question_id":10505418,"body_markdown":"The [`StaticLoggerBinder`][1]&#39;s [`getLoggerFactoryClassStr()`][2] method is probably what you&#39;re looking for.\r\n\r\n\r\n  [1]: http://www.slf4j.org/apidocs/org/slf4j/impl/StaticLoggerBinder.html\r\n  [2]: http://www.slf4j.org/apidocs/org/slf4j/impl/StaticLoggerBinder.html#getLoggerFactoryClassStr%28%29","title":"How to find which library slf4j has bound itself to?","body":"<p>The <a href=\"http://www.slf4j.org/apidocs/org/slf4j/impl/StaticLoggerBinder.html\" rel=\"noreferrer\"><code>StaticLoggerBinder</code></a>'s <a href=\"http://www.slf4j.org/apidocs/org/slf4j/impl/StaticLoggerBinder.html#getLoggerFactoryClassStr%28%29\" rel=\"noreferrer\"><code>getLoggerFactoryClassStr()</code></a> method is probably what you're looking for.</p>\n"},{"tags":[],"owner":{"account_id":4262789,"reputation":4632,"user_id":3486720,"accept_rate":36,"display_name":"Apurva Singh"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1469030419,"creation_date":1469030419,"answer_id":38485411,"question_id":10505418,"body_markdown":"Easy. Put a breakpoint on .. say.. LOG.info(...). Once debugger stops there, step into.. and viola.. you will find yourself in the code of the actual logger... say log4j or logback.. whatever.","title":"How to find which library slf4j has bound itself to?","body":"<p>Easy. Put a breakpoint on .. say.. LOG.info(...). Once debugger stops there, step into.. and viola.. you will find yourself in the code of the actual logger... say log4j or logback.. whatever.</p>\n"},{"tags":[],"owner":{"account_id":148669,"reputation":495,"user_id":360612,"display_name":"Ben Spiller"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1557852691,"creation_date":1557852691,"answer_id":56135139,"question_id":10505418,"body_markdown":"It&#39;s possible to do this using the main slf4j public API (i.e. without the internal StaticLoggerBinder), e.g. to detect if slf4j has bpound to log4j2:\r\n\r\n```  \r\nif (&quot;org.apache.logging.slf4j.Log4jLoggerFactory&quot;.equals(\r\n    org.slf4j.LoggerFactory.getILoggerFactory().getClass().getName()\r\n) \r\n{ ... }\r\n```\r\n\r\n","title":"How to find which library slf4j has bound itself to?","body":"<p>It's possible to do this using the main slf4j public API (i.e. without the internal StaticLoggerBinder), e.g. to detect if slf4j has bpound to log4j2:</p>\n\n<pre><code>if (\"org.apache.logging.slf4j.Log4jLoggerFactory\".equals(\n    org.slf4j.LoggerFactory.getILoggerFactory().getClass().getName()\n) \n{ ... }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3146499,"reputation":177,"user_id":2660889,"display_name":"Tumelo Galenos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659607302,"creation_date":1659607302,"answer_id":73233951,"question_id":10505418,"body_markdown":"Or, avoiding the need to have StaticLoggerBinder (which is not part of slf4j-api):\r\n\r\n    log.info(log.getClass().getName());\r\n\r\n\r\nIn my case this prints\r\n\r\n\r\n    ch.qos.logback.classic.Logger\r\n","title":"How to find which library slf4j has bound itself to?","body":"<p>Or, avoiding the need to have StaticLoggerBinder (which is not part of slf4j-api):</p>\n<pre><code>log.info(log.getClass().getName());\n</code></pre>\n<p>In my case this prints</p>\n<pre><code>ch.qos.logback.classic.Logger\n</code></pre>\n"}],"owner":{"account_id":1012116,"reputation":796,"user_id":1024460,"accept_rate":100,"display_name":"psykeron"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11830,"favorite_count":0,"down_vote_count":0,"up_vote_count":58,"accepted_answer_id":10505593,"answer_count":5,"score":58,"last_activity_date":1659607302,"creation_date":1336506433,"question_id":10505418,"body_markdown":"I am using slf4j for logging in my application.\r\nI get the purpose of slf4j. I would like to know how to find out which logging-library slf4j is currently binding to. I have log4j in my referenced libraries. I am assuming that slf4j has bound itself to log4j.\r\n\r\nWhat I would like to know is, is there any way to explicitly confirm this binding?","title":"How to find which library slf4j has bound itself to?","body":"<p>I am using slf4j for logging in my application.\nI get the purpose of slf4j. I would like to know how to find out which logging-library slf4j is currently binding to. I have log4j in my referenced libraries. I am assuming that slf4j has bound itself to log4j.</p>\n\n<p>What I would like to know is, is there any way to explicitly confirm this binding?</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":2,"creation_date":1659598175,"post_id":73231897,"comment_id":129333559,"body_markdown":"here is the relevant part of your stacktrace: Caused by: java.lang.ClassNotFoundException: Controller","body":"here is the relevant part of your stacktrace: Caused by: java.lang.ClassNotFoundException: Controller"},{"owner":{"account_id":1374245,"reputation":4806,"user_id":1308570,"accept_rate":76,"display_name":"kaysush"},"score":0,"creation_date":1659598390,"post_id":73231897,"comment_id":129333636,"body_markdown":"A mentioned by @Stultuske this is because of class `Controller` not being found. This could be because the dependency is missing. FWIK, Controller is a JavaFX class so you might want to check if JavaFX lib is correctly added to the project.","body":"A mentioned by @Stultuske this is because of class <code>Controller</code> not being found. This could be because the dependency is missing. FWIK, Controller is a JavaFX class so you might want to check if JavaFX lib is correctly added to the project."},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1659598397,"post_id":73231897,"comment_id":129333644,"body_markdown":"your controller is in the package `application`. So you need to use `fx:controller=&quot;application.Controller&quot;` to correctly reference it","body":"your controller is in the package <code>application</code>. So you need to use <code>fx:controller=&quot;application.Controller&quot;</code> to correctly reference it"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1659598452,"post_id":73231897,"comment_id":129333663,"body_markdown":"@kaysush the Controller class is right there. OP is just not using the fully qualified name to reference it.","body":"@kaysush the Controller class is right there. OP is just not using the fully qualified name to reference it."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":4,"creation_date":1659598459,"post_id":73231897,"comment_id":129333666,"body_markdown":"You can solve this either by using `fx:controller=&quot;application.Controller&quot;` (the fully qualified name of your controller class) or, I believe, by adding an `&lt;?import application.Controller?&gt;` instruction to your FXML file. You also need to change your controller class to import `javafx.event.ActionEvent` instead of the AWT equivalent (that&#39;s not related to your current error, but will prevent a future error from occurring).","body":"You can solve this either by using <code>fx:controller=&quot;application.Controller&quot;</code> (the fully qualified name of your controller class) or, I believe, by adding an <code>&lt;?import application.Controller?&gt;</code> instruction to your FXML file. You also need to change your controller class to import <code>javafx.event.ActionEvent</code> instead of the AWT equivalent (that&#39;s not related to your current error, but will prevent a future error from occurring)."},{"owner":{"account_id":25168615,"reputation":21,"user_id":19689010,"display_name":"kanikamaboco"},"score":0,"creation_date":1659600030,"post_id":73231897,"comment_id":129334165,"body_markdown":"///controller class to import `javafx.event.ActionEvent` your current error, but will prevent a future error from occurring). ///   I used it as a reference. Thank you very much.","body":"///controller class to import <code>javafx.event.ActionEvent</code> your current error, but will prevent a future error from occurring). ///   I used it as a reference. Thank you very much."}],"answers":[{"tags":[],"owner":{"account_id":25168615,"reputation":21,"user_id":19689010,"display_name":"kanikamaboco"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1659606920,"creation_date":1659600683,"answer_id":73232479,"question_id":73231897,"body_markdown":"[Slaw](https://stackoverflow.com/users/6395627/slaw) posted [a comment](https://stackoverflow.com/questions/73231897/i-read-the-error-and-cant-figure-out-the-solution-why-am-i-getting-a-javafx-f/73232479#comment129333666_73231897):\r\n\r\n&gt; You can solve this either by using `fx:controller=&quot;application.Controller&quot;` (the fully qualified name of your controller class) or, I believe, by adding an `&lt;?import application.Controller?&gt;` instruction to your FXML file. You also need to change your controller class to import `javafx.event.ActionEvent` instead of the AWT equivalent (that&#39;s not related to your current error, but will prevent a future error from occurring). \r\n\r\nWriting `fx:controller=&quot;application.Controller&quot;` fixed it.","title":"I read the error and can&#39;t figure out the solution. Why am I getting a &quot;javafx.fxml.LoadException&quot;?","body":"<p><a href=\"https://stackoverflow.com/users/6395627/slaw\">Slaw</a> posted <a href=\"https://stackoverflow.com/questions/73231897/i-read-the-error-and-cant-figure-out-the-solution-why-am-i-getting-a-javafx-f/73232479#comment129333666_73231897\">a comment</a>:</p>\n<blockquote>\n<p>You can solve this either by using <code>fx:controller=&quot;application.Controller&quot;</code> (the fully qualified name of your controller class) or, I believe, by adding an <code>&lt;?import application.Controller?&gt;</code> instruction to your FXML file. You also need to change your controller class to import <code>javafx.event.ActionEvent</code> instead of the AWT equivalent (that's not related to your current error, but will prevent a future error from occurring).</p>\n</blockquote>\n<p>Writing <code>fx:controller=&quot;application.Controller&quot;</code> fixed it.</p>\n"}],"owner":{"account_id":25168615,"reputation":21,"user_id":19689010,"display_name":"kanikamaboco"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":441,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659606920,"creation_date":1659598102,"question_id":73231897,"body_markdown":"When I run the following code in eclipse with java 18 I get an error. Please Help. The fxml is generated using the scene builder.\r\nI read the error, but I don&#39;t understand the solution. In Main.fxml he thought everything was fine until line 9.\r\n\r\nI used this video as a reference.\r\nhttps://youtu.be/N3LZM4WFHBY?list=PLZPZq0r_RZOM-8vJA3NQFZB7JroDcMwev\r\n\r\nMain.java:\r\n```\r\npackage application;\r\n\t\r\nimport javafx.application.Application;\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.stage.Stage;\r\nimport javafx.scene.Parent;\r\nimport javafx.scene.Scene;\r\n\r\n\r\npublic class Main extends Application {\r\n\t@Override\r\n\tpublic void start(Stage primaryStage) {\r\n\t\ttry {\r\n\t\t\tParent root = FXMLLoader.load(getClass().getResource(&quot;Main.fxml&quot;));\r\n\t\t\tScene scene = new Scene(root);\r\n\t\t\tprimaryStage.setResizable(false);\r\n\t\t\t\r\n\t\t\tprimaryStage.setScene(scene);\r\n\t\t\tprimaryStage.show();\r\n\t\t} catch(Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tlaunch(args);\r\n\t}\r\n}\r\n```\r\n\r\nController.java:\r\n```\r\npackage application;\r\n\r\nimport java.awt.event.ActionEvent;\r\n\r\npublic class Controller {\r\n\t\r\n\tpublic void up(ActionEvent e) {\r\n\t\tSystem.out.println(&quot;UP&quot;);\r\n\t}\t\r\n\tpublic void down(ActionEvent e) {\r\n\t\tSystem.out.println(&quot;DOWN&quot;);\r\n\t}\t\r\n\tpublic void right(ActionEvent e) {\r\n\t\tSystem.out.println(&quot;RIGHT&quot;);\r\n\t}\t\r\n\tpublic void left(ActionEvent e) {\r\n\t\tSystem.out.println(&quot;LEFT&quot;);\r\n\t}\r\n    \r\n}\r\n\r\n```\r\n\r\nMain.fxml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE configuration&gt;\r\n\r\n&lt;?import javafx.scene.control.*?&gt;\r\n&lt;?import java.lang.*?&gt;\r\n&lt;?import javafx.scene.layout.*?&gt;\r\n\r\n\r\n&lt;AnchorPane maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;400.0&quot; prefWidth=&quot;600.0&quot; xmlns=&quot;http://javafx.com/javafx/8&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;Controller&quot;&gt;\r\n   &lt;children&gt;\r\n      &lt;Button layoutX=&quot;286.0&quot; layoutY=&quot;14.0&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#up&quot; text=&quot;UP&quot; /&gt;\r\n      &lt;Button layoutX=&quot;536.0&quot; layoutY=&quot;188.0&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#right&quot; text=&quot;RIGHT&quot; /&gt;\r\n      &lt;Button layoutX=&quot;273.0&quot; layoutY=&quot;361.0&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#down&quot; text=&quot;DOWN&quot; /&gt;\r\n      &lt;Button layoutX=&quot;14.0&quot; layoutY=&quot;188.0&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#left&quot; text=&quot;LEFT&quot; /&gt;\r\n   &lt;/children&gt;\r\n&lt;/AnchorPane&gt;\r\n\r\n```\r\n\r\nError:\r\n```\r\njavafx.fxml.LoadException: \r\n/C:/Users/suyak/eclipse-workspace/Message/bin/application/Main.fxml:9\r\n\r\n\tat javafx.fxml@18.0.2/javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2707)\r\n\tat javafx.fxml@18.0.2/javafx.fxml.FXMLLoader$ValueElement.processAttribute(FXMLLoader.java:933)\r\n\tat javafx.fxml@18.0.2/javafx.fxml.FXMLLoader$InstanceDeclarationElement.processAttribute(FXMLLoader.java:981)\r\n\tat javafx.fxml@18.0.2/javafx.fxml.FXMLLoader$Element.processStartElement(FXMLLoader.java:230)\r\n\tat javafx.fxml@18.0.2/javafx.fxml.FXMLLoader$ValueElement.processStartElement(FXMLLoader.java:755)\r\n\tat javafx.fxml@18.0.2/javafx.fxml.FXMLLoader.processStartElement(FXMLLoader.java:2808)\r\n\tat javafx.fxml@18.0.2/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2634)\r\n\tat javafx.fxml@18.0.2/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2548)\r\n\tat javafx.fxml@18.0.2/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3331)\r\n\tat javafx.fxml@18.0.2/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3287)\r\n\tat javafx.fxml@18.0.2/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3255)\r\n\tat javafx.fxml@18.0.2/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3227)\r\n\tat javafx.fxml@18.0.2/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3203)\r\n\tat javafx.fxml@18.0.2/javafx.fxml.FXMLLoader.load(FXMLLoader.java:3196)\r\n\tat FirstJavaFX/application.Main.start(Main.java:14)\r\n\tat javafx.graphics@18.0.2/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:847)\r\n\tat javafx.graphics@18.0.2/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:484)\r\n\tat javafx.graphics@18.0.2/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:457)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\tat javafx.graphics@18.0.2/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:456)\r\n\tat javafx.graphics@18.0.2/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\r\n\tat javafx.graphics@18.0.2/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\r\n\tat javafx.graphics@18.0.2/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:184)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: java.lang.ClassNotFoundException: Controller\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n\tat javafx.fxml@18.0.2/javafx.fxml.FXMLLoader$ValueElement.processAttribute(FXMLLoader.java:931)\r\n\t... 22 more\r\n\r\n```\r\n","title":"I read the error and can&#39;t figure out the solution. Why am I getting a &quot;javafx.fxml.LoadException&quot;?","body":"<p>When I run the following code in eclipse with java 18 I get an error. Please Help. The fxml is generated using the scene builder.\nI read the error, but I don't understand the solution. In Main.fxml he thought everything was fine until line 9.</p>\n<p>I used this video as a reference.\n<a href=\"https://youtu.be/N3LZM4WFHBY?list=PLZPZq0r_RZOM-8vJA3NQFZB7JroDcMwev\" rel=\"nofollow noreferrer\">https://youtu.be/N3LZM4WFHBY?list=PLZPZq0r_RZOM-8vJA3NQFZB7JroDcMwev</a></p>\n<p>Main.java:</p>\n<pre><code>package application;\n    \nimport javafx.application.Application;\nimport javafx.fxml.FXMLLoader;\nimport javafx.stage.Stage;\nimport javafx.scene.Parent;\nimport javafx.scene.Scene;\n\n\npublic class Main extends Application {\n    @Override\n    public void start(Stage primaryStage) {\n        try {\n            Parent root = FXMLLoader.load(getClass().getResource(&quot;Main.fxml&quot;));\n            Scene scene = new Scene(root);\n            primaryStage.setResizable(false);\n            \n            primaryStage.setScene(scene);\n            primaryStage.show();\n        } catch(Exception e) {\n            e.printStackTrace();\n        }\n    }\n    \n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n</code></pre>\n<p>Controller.java:</p>\n<pre><code>package application;\n\nimport java.awt.event.ActionEvent;\n\npublic class Controller {\n    \n    public void up(ActionEvent e) {\n        System.out.println(&quot;UP&quot;);\n    }   \n    public void down(ActionEvent e) {\n        System.out.println(&quot;DOWN&quot;);\n    }   \n    public void right(ActionEvent e) {\n        System.out.println(&quot;RIGHT&quot;);\n    }   \n    public void left(ActionEvent e) {\n        System.out.println(&quot;LEFT&quot;);\n    }\n    \n}\n\n</code></pre>\n<p>Main.fxml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE configuration&gt;\n\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import java.lang.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n\n\n&lt;AnchorPane maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;400.0&quot; prefWidth=&quot;600.0&quot; xmlns=&quot;http://javafx.com/javafx/8&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;Controller&quot;&gt;\n   &lt;children&gt;\n      &lt;Button layoutX=&quot;286.0&quot; layoutY=&quot;14.0&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#up&quot; text=&quot;UP&quot; /&gt;\n      &lt;Button layoutX=&quot;536.0&quot; layoutY=&quot;188.0&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#right&quot; text=&quot;RIGHT&quot; /&gt;\n      &lt;Button layoutX=&quot;273.0&quot; layoutY=&quot;361.0&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#down&quot; text=&quot;DOWN&quot; /&gt;\n      &lt;Button layoutX=&quot;14.0&quot; layoutY=&quot;188.0&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#left&quot; text=&quot;LEFT&quot; /&gt;\n   &lt;/children&gt;\n&lt;/AnchorPane&gt;\n\n</code></pre>\n<p>Error:</p>\n<pre><code>javafx.fxml.LoadException: \n/C:/Users/suyak/eclipse-workspace/Message/bin/application/Main.fxml:9\n\n    at javafx.fxml@18.0.2/javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2707)\n    at javafx.fxml@18.0.2/javafx.fxml.FXMLLoader$ValueElement.processAttribute(FXMLLoader.java:933)\n    at javafx.fxml@18.0.2/javafx.fxml.FXMLLoader$InstanceDeclarationElement.processAttribute(FXMLLoader.java:981)\n    at javafx.fxml@18.0.2/javafx.fxml.FXMLLoader$Element.processStartElement(FXMLLoader.java:230)\n    at javafx.fxml@18.0.2/javafx.fxml.FXMLLoader$ValueElement.processStartElement(FXMLLoader.java:755)\n    at javafx.fxml@18.0.2/javafx.fxml.FXMLLoader.processStartElement(FXMLLoader.java:2808)\n    at javafx.fxml@18.0.2/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2634)\n    at javafx.fxml@18.0.2/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2548)\n    at javafx.fxml@18.0.2/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3331)\n    at javafx.fxml@18.0.2/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3287)\n    at javafx.fxml@18.0.2/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3255)\n    at javafx.fxml@18.0.2/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3227)\n    at javafx.fxml@18.0.2/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3203)\n    at javafx.fxml@18.0.2/javafx.fxml.FXMLLoader.load(FXMLLoader.java:3196)\n    at FirstJavaFX/application.Main.start(Main.java:14)\n    at javafx.graphics@18.0.2/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:847)\n    at javafx.graphics@18.0.2/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:484)\n    at javafx.graphics@18.0.2/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:457)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at javafx.graphics@18.0.2/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:456)\n    at javafx.graphics@18.0.2/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\n    at javafx.graphics@18.0.2/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\n    at javafx.graphics@18.0.2/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:184)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.lang.ClassNotFoundException: Controller\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n    at javafx.fxml@18.0.2/javafx.fxml.FXMLLoader$ValueElement.processAttribute(FXMLLoader.java:931)\n    ... 22 more\n\n</code></pre>\n"},{"tags":["java","maven","intellij-idea"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1659522929,"post_id":73220106,"comment_id":129313492,"body_markdown":"The JVM is too old to run the code you ask it to.","body":"The JVM is too old to run the code you ask it to."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1659523132,"post_id":73220106,"comment_id":129313576,"body_markdown":"That means you are using a JVM version less than 8...","body":"That means you are using a JVM version less than 8..."},{"owner":{"account_id":11798387,"reputation":45,"user_id":8632656,"display_name":"Ragu"},"score":1,"creation_date":1659524322,"post_id":73220106,"comment_id":129314030,"body_markdown":"Yes, I&#39;m using java 7.\nproject is built with 1.7","body":"Yes, I&#39;m using java 7. project is built with 1.7"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1659545985,"post_id":73220106,"comment_id":129321697,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":11798387,"reputation":45,"user_id":8632656,"display_name":"Ragu"},"score":0,"creation_date":1659611983,"post_id":73220106,"comment_id":129338450,"body_markdown":"Problem seems to be at the JDK for importer. \nSolution https://stackoverflow.com/a/73220755/8632656 worked.","body":"Problem seems to be at the JDK for importer.  Solution <a href=\"https://stackoverflow.com/a/73220755/8632656\">stackoverflow.com/a/73220755/8632656</a> worked."}],"answers":[{"tags":[],"owner":{"account_id":2273465,"reputation":15439,"user_id":2000323,"display_name":"Andrey"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1659525234,"creation_date":1659525234,"answer_id":73220755,"question_id":73220106,"body_markdown":"It is known issue in 2022.2 version, see *[IDEA-298673](https://youtrack.jetbrains.com/issue/IDEA-298673) Error importing maven project (bound to max JDK 1.7)*\r\n\r\nThe workaround is to define 1.8+ JDK for the Settings (Preferences on macOS) | Build, Execution, Deployment | Build Tools | Maven | Importing | **JDK for importer:**.\r\n\r\nIn later IDE versions, IDE will automatically fallback to the internal JDK for Maven import. Note that this JDK has no relation to the Project JDK which is used to build and run the application.","title":"Intellij -- java.lang.UnsupportedClassVersionError: org/jetbrains/idea/maven/server/RemoteMavenServer36","body":"<p>It is known issue in 2022.2 version, see <em><a href=\"https://youtrack.jetbrains.com/issue/IDEA-298673\" rel=\"noreferrer\">IDEA-298673</a> Error importing maven project (bound to max JDK 1.7)</em></p>\n<p>The workaround is to define 1.8+ JDK for the Settings (Preferences on macOS) | Build, Execution, Deployment | Build Tools | Maven | Importing | <strong>JDK for importer:</strong>.</p>\n<p>In later IDE versions, IDE will automatically fallback to the internal JDK for Maven import. Note that this JDK has no relation to the Project JDK which is used to build and run the application.</p>\n"}],"owner":{"account_id":11798387,"reputation":45,"user_id":8632656,"display_name":"Ragu"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1635,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":73220755,"answer_count":1,"score":4,"last_activity_date":1659606737,"creation_date":1659522241,"question_id":73220106,"body_markdown":"Intellij keeps throwing this error.\r\n```\r\njava.lang.UnsupportedClassVersionError: org/jetbrains/idea/maven/server/RemoteMavenServer36 : Unsupported major.minor version 52.0\r\nException in thread &quot;main&quot; \r\n```\r\n\r\nNote: Tried jdk difference mentioned in other post. Still, no luck.","title":"Intellij -- java.lang.UnsupportedClassVersionError: org/jetbrains/idea/maven/server/RemoteMavenServer36","body":"<p>Intellij keeps throwing this error.</p>\n<pre><code>java.lang.UnsupportedClassVersionError: org/jetbrains/idea/maven/server/RemoteMavenServer36 : Unsupported major.minor version 52.0\nException in thread &quot;main&quot; \n</code></pre>\n<p>Note: Tried jdk difference mentioned in other post. Still, no luck.</p>\n"},{"tags":["java","pdf","base64","decode","encode"],"comments":[{"owner":{"account_id":206952,"reputation":576,"user_id":456561,"display_name":"Rick"},"score":2,"creation_date":1535516591,"post_id":52069359,"comment_id":91088677,"body_markdown":"What happens if you just write encodedBytes to the file, instead of pumping it through a String and then writing the bytes of the String?","body":"What happens if you just write encodedBytes to the file, instead of pumping it through a String and then writing the bytes of the String?"},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":3,"creation_date":1535517359,"post_id":52069359,"comment_id":91088870,"body_markdown":"You should not be going via `originalString`.  Keep the raw decoded bytes.","body":"You should not be going via <code>originalString</code>.  Keep the raw decoded bytes."},{"owner":{"account_id":12480927,"reputation":375,"user_id":9085708,"display_name":"DKKs"},"score":0,"creation_date":1535528226,"post_id":52069359,"comment_id":91093571,"body_markdown":"@LouisWasserman Oh, I see that, Thank you  :)","body":"@LouisWasserman Oh, I see that, Thank you  :)"}],"answers":[{"tags":[],"owner":{"account_id":9801766,"reputation":671,"user_id":7262910,"display_name":"dev_ramiz_1707"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1535518020,"creation_date":1535518020,"answer_id":52069655,"question_id":52069359,"body_markdown":"I have used Apache Commons library. The version I used for testing this Utility is commons-code-1.4.jar. There are multiple uses of Base64 Codec. The one I had a need to was during Docusign eSignature webservice call where the files attached were sent in a Base64 encoded format.   \r\n\r\n\r\n    import java.io.BufferedInputStream;\r\n    import java.io.BufferedOutputStream;\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n     \r\n    import org.apache.commons.codec.binary.Base64;\r\n     \r\n    public class FileCodecBase64 {\r\n     \r\n        private static final boolean IS_CHUNKED = true;\r\n     \r\n        public static void main(String args[]) throws Exception {\r\n     \r\n            /* Encode a file and write the encoded output to a text file. */\r\n            encode(&quot;C:/temp/something.pdf&quot;, &quot;c:/temp/something-encoded.txt&quot;, IS_CHUNKED);\r\n     \r\n            /* Decode a file and write the decoded file to file system */\r\n            decode(&quot;C:/temp/something-encoded.txt&quot;, &quot;c:/temp/something-decoded.pdf&quot;);\r\n        }\r\n     \r\n        /**\r\n         * This method converts the content of a source file into Base64 encoded data and saves that to a target file.\r\n         * If isChunked parameter is set to true, there is a hard wrap of the output  encoded text.\r\n         */\r\n        private static void encode(String sourceFile, String targetFile, boolean isChunked) throws Exception {\r\n     \r\n            byte[] base64EncodedData = Base64.encodeBase64(loadFileAsBytesArray(sourceFile), isChunked);\r\n     \r\n            writeByteArraysToFile(targetFile, base64EncodedData);\r\n        }\r\n     \r\n        public static void decode(String sourceFile, String targetFile) throws Exception {\r\n     \r\n            byte[] decodedBytes = Base64.decodeBase64(loadFileAsBytesArray(sourceFile));\r\n     \r\n            writeByteArraysToFile(targetFile, decodedBytes);\r\n        }\r\n     \r\n        /**\r\n         * This method loads a file from file system and returns the byte array of the content.\r\n         * \r\n         * @param fileName\r\n         * @return\r\n         * @throws Exception\r\n         */\r\n        public static byte[] loadFileAsBytesArray(String fileName) throws Exception {\r\n     \r\n            File file = new File(fileName);\r\n            int length = (int) file.length();\r\n            BufferedInputStream reader = new BufferedInputStream(new FileInputStream(file));\r\n            byte[] bytes = new byte[length];\r\n            reader.read(bytes, 0, length);\r\n            reader.close();\r\n            return bytes;\r\n     \r\n        }\r\n     \r\n        /**\r\n         * This method writes byte array content into a file.\r\n         * \r\n         * @param fileName\r\n         * @param content\r\n         * @throws IOException\r\n         */\r\n        public static void writeByteArraysToFile(String fileName, byte[] content) throws IOException {\r\n     \r\n            File file = new File(fileName);\r\n            BufferedOutputStream writer = new BufferedOutputStream(new FileOutputStream(file));\r\n            writer.write(content);\r\n            writer.flush();\r\n            writer.close();\r\n     \r\n        }\r\n    }\r\n\r\ni hope this work","title":"How to Convert Pdf to base64 and Encode / Decode","body":"<p>I have used Apache Commons library. The version I used for testing this Utility is commons-code-1.4.jar. There are multiple uses of Base64 Codec. The one I had a need to was during Docusign eSignature webservice call where the files attached were sent in a Base64 encoded format.   </p>\n\n<pre><code>import java.io.BufferedInputStream;\nimport java.io.BufferedOutputStream;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\n\nimport org.apache.commons.codec.binary.Base64;\n\npublic class FileCodecBase64 {\n\n    private static final boolean IS_CHUNKED = true;\n\n    public static void main(String args[]) throws Exception {\n\n        /* Encode a file and write the encoded output to a text file. */\n        encode(\"C:/temp/something.pdf\", \"c:/temp/something-encoded.txt\", IS_CHUNKED);\n\n        /* Decode a file and write the decoded file to file system */\n        decode(\"C:/temp/something-encoded.txt\", \"c:/temp/something-decoded.pdf\");\n    }\n\n    /**\n     * This method converts the content of a source file into Base64 encoded data and saves that to a target file.\n     * If isChunked parameter is set to true, there is a hard wrap of the output  encoded text.\n     */\n    private static void encode(String sourceFile, String targetFile, boolean isChunked) throws Exception {\n\n        byte[] base64EncodedData = Base64.encodeBase64(loadFileAsBytesArray(sourceFile), isChunked);\n\n        writeByteArraysToFile(targetFile, base64EncodedData);\n    }\n\n    public static void decode(String sourceFile, String targetFile) throws Exception {\n\n        byte[] decodedBytes = Base64.decodeBase64(loadFileAsBytesArray(sourceFile));\n\n        writeByteArraysToFile(targetFile, decodedBytes);\n    }\n\n    /**\n     * This method loads a file from file system and returns the byte array of the content.\n     * \n     * @param fileName\n     * @return\n     * @throws Exception\n     */\n    public static byte[] loadFileAsBytesArray(String fileName) throws Exception {\n\n        File file = new File(fileName);\n        int length = (int) file.length();\n        BufferedInputStream reader = new BufferedInputStream(new FileInputStream(file));\n        byte[] bytes = new byte[length];\n        reader.read(bytes, 0, length);\n        reader.close();\n        return bytes;\n\n    }\n\n    /**\n     * This method writes byte array content into a file.\n     * \n     * @param fileName\n     * @param content\n     * @throws IOException\n     */\n    public static void writeByteArraysToFile(String fileName, byte[] content) throws IOException {\n\n        File file = new File(fileName);\n        BufferedOutputStream writer = new BufferedOutputStream(new FileOutputStream(file));\n        writer.write(content);\n        writer.flush();\n        writer.close();\n\n    }\n}\n</code></pre>\n\n<p>i hope this work</p>\n"},{"tags":[],"owner":{"account_id":6932710,"reputation":3956,"user_id":5321729,"accept_rate":67,"display_name":"Ajit Soman"},"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1535519747,"creation_date":1535519747,"answer_id":52069903,"question_id":52069359,"body_markdown":"You can decode base64 encoded String and pass that `byte[]` to `FileOutputStream` write method to fix this issue.\r\n\r\n  \r\n\r\n            String filePath = &quot;C:\\\\Users\\\\xyz\\\\Desktop\\\\&quot;;\r\n            String originalFileName = &quot;96172560100_copy2.pdf&quot;;\r\n            String newFileName = &quot;test.pdf&quot;;\r\n\r\n            byte[] input_file = Files.readAllBytes(Paths.get(filePath+originalFileName));\r\n           \r\n            byte[] encodedBytes = Base64.getEncoder().encode(input_file);\r\n            String encodedString =  new String(encodedBytes);\r\n            byte[] decodedBytes = Base64.getDecoder().decode(encodedString.getBytes());\r\n    \r\n            FileOutputStream fos = new FileOutputStream(filePath+newFileName);\r\n            fos.write(decodedBytes);\r\n            fos.flush();\r\n            fos.close();","title":"How to Convert Pdf to base64 and Encode / Decode","body":"<p>You can decode base64 encoded String and pass that <code>byte[]</code> to <code>FileOutputStream</code> write method to fix this issue.</p>\n\n<pre><code>        String filePath = \"C:\\\\Users\\\\xyz\\\\Desktop\\\\\";\n        String originalFileName = \"96172560100_copy2.pdf\";\n        String newFileName = \"test.pdf\";\n\n        byte[] input_file = Files.readAllBytes(Paths.get(filePath+originalFileName));\n\n        byte[] encodedBytes = Base64.getEncoder().encode(input_file);\n        String encodedString =  new String(encodedBytes);\n        byte[] decodedBytes = Base64.getDecoder().decode(encodedString.getBytes());\n\n        FileOutputStream fos = new FileOutputStream(filePath+newFileName);\n        fos.write(decodedBytes);\n        fos.flush();\n        fos.close();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13932107,"reputation":31,"user_id":10060063,"display_name":"Danish Ali"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1580279886,"creation_date":1580279886,"answer_id":59961660,"question_id":52069359,"body_markdown":"    import java.io.File;\r\n    import java.io.FileOutputStream;\r\n    import java.io.OutputStream;\r\n    import java.nio.file.Files;\r\n    import java.nio.file.Paths;\r\n    import java.util.Base64;\r\n\r\n    public class Base64Sample {\r\n\r\n\tpublic static void main(String... strings) throws Exception {\r\n\t\tString filePath = &quot;/home/user/sample.pdf&quot;;\r\n\t\tFile pdfFile = new File(filePath);\r\n\t\tbyte[] encoded = Files.readAllBytes(Paths.get(pdfFile.getAbsolutePath()));\r\n\t\tBase64.Encoder enc = Base64.getEncoder();\r\n\t\tbyte[] strenc = enc.encode(encoded);\r\n\t\tString encode = new String(strenc, &quot;UTF-8&quot;);\r\n\t\tBase64.Decoder dec = Base64.getDecoder();\r\n\t\tbyte[] strdec = dec.decode(encode);\r\n\t\tOutputStream out = new FileOutputStream(&quot;/home/user/out.pdf&quot;);\r\n\t\tout.write(strdec);\r\n\t\tout.close();\r\n\t}\r\n      }","title":"How to Convert Pdf to base64 and Encode / Decode","body":"<pre><code>import java.io.File;\nimport java.io.FileOutputStream;\nimport java.io.OutputStream;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\nimport java.util.Base64;\n\npublic class Base64Sample {\n\npublic static void main(String... strings) throws Exception {\n    String filePath = \"/home/user/sample.pdf\";\n    File pdfFile = new File(filePath);\n    byte[] encoded = Files.readAllBytes(Paths.get(pdfFile.getAbsolutePath()));\n    Base64.Encoder enc = Base64.getEncoder();\n    byte[] strenc = enc.encode(encoded);\n    String encode = new String(strenc, \"UTF-8\");\n    Base64.Decoder dec = Base64.getDecoder();\n    byte[] strdec = dec.decode(encode);\n    OutputStream out = new FileOutputStream(\"/home/user/out.pdf\");\n    out.write(strdec);\n    out.close();\n}\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10357596,"reputation":472,"user_id":7638998,"display_name":"gowthaman C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1659606701,"creation_date":1591261404,"answer_id":62190768,"question_id":52069359,"body_markdown":"        if (resultCode == RESULT_OK) {\r\n                          \r\n         InputStream is = null;\r\n                          \r\n          try \r\n        \r\n        {\r\n                                \r\n        is = getContentResolver().openInputStream(imageReturnedIntent.getData());\r\n                            \r\n        } \r\n        \r\n        catch (FileNotFoundException e) \r\n        {\r\n                               \r\n         e.printStackTrace();\r\n                           \r\n         }\r\n                           \r\n         byte[] bytesArray = new byte[0];\r\n                            \r\n        try {\r\n                              \r\n          bytesArray = new byte[is.available()];\r\n                           \r\n         } \r\n        catch (IOException e) {\r\n                      \r\n    \r\n    enter code here\r\n    \r\n         \r\n         e.printStackTrace();\r\n                          \r\n          }\r\n                          \r\n          try\r\n         {\r\n                              \r\n          is.read(bytesArray);\r\n                                \r\n        String d = Base64.encodeToString(bytesArray, android.util.Base64.DEFAULT);\r\n                                \r\n        \r\n                            } catch (IOException e) {\r\n                                e.printStackTrace();\r\n                            }\r\n                        }","title":"How to Convert Pdf to base64 and Encode / Decode","body":"<pre><code>    if (resultCode == RESULT_OK) {\n                      \n     InputStream is = null;\n                      \n      try \n    \n    {\n                            \n    is = getContentResolver().openInputStream(imageReturnedIntent.getData());\n                        \n    } \n    \n    catch (FileNotFoundException e) \n    {\n                           \n     e.printStackTrace();\n                       \n     }\n                       \n     byte[] bytesArray = new byte[0];\n                        \n    try {\n                          \n      bytesArray = new byte[is.available()];\n                       \n     } \n    catch (IOException e) {\n                  \n\nenter code here\n\n     \n     e.printStackTrace();\n                      \n      }\n                      \n      try\n     {\n                          \n      is.read(bytesArray);\n                            \n    String d = Base64.encodeToString(bytesArray, android.util.Base64.DEFAULT);\n                            \n    \n                        } catch (IOException e) {\n                            e.printStackTrace();\n                        }\n                    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8414254,"reputation":893,"user_id":6315190,"display_name":"Sanjay Chauhan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625232489,"creation_date":1625232489,"answer_id":68226055,"question_id":52069359,"body_markdown":"I tried lots of code then after I tried the below code and its work for me.\r\nThis code is works for other files also like .png, .jpg, jpeg, .pdf and .doc etc...\r\n\r\n    String base64 = Base64.encodeToString(getBytesFromUri(uri, requireContext()), Base64.NO_WRAP);\r\n                            \r\n    \r\n    public static byte[] getBytesFromUri(Uri uri, Context context) throws IOException {\r\n            InputStream iStream = context.getContentResolver().openInputStream(uri);\r\n            ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream();\r\n            int bufferSize = 1024;\r\n            byte[] buffer = new byte[bufferSize];\r\n    \r\n            int len = 0;\r\n            while ((len = iStream.read(buffer)) != -1) {\r\n                byteBuffer.write(buffer, 0, len);\r\n            }\r\n            return byteBuffer.toByteArray();\r\n        }\r\n\r\nI hope it&#39;s helpful to you!","title":"How to Convert Pdf to base64 and Encode / Decode","body":"<p>I tried lots of code then after I tried the below code and its work for me.\nThis code is works for other files also like .png, .jpg, jpeg, .pdf and .doc etc...</p>\n<pre><code>String base64 = Base64.encodeToString(getBytesFromUri(uri, requireContext()), Base64.NO_WRAP);\n                        \n\npublic static byte[] getBytesFromUri(Uri uri, Context context) throws IOException {\n        InputStream iStream = context.getContentResolver().openInputStream(uri);\n        ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream();\n        int bufferSize = 1024;\n        byte[] buffer = new byte[bufferSize];\n\n        int len = 0;\n        while ((len = iStream.read(buffer)) != -1) {\n            byteBuffer.write(buffer, 0, len);\n        }\n        return byteBuffer.toByteArray();\n    }\n</code></pre>\n<p>I hope it's helpful to you!</p>\n"}],"owner":{"account_id":12480927,"reputation":375,"user_id":9085708,"display_name":"DKKs"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81161,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":52069903,"answer_count":5,"score":19,"last_activity_date":1659606701,"creation_date":1535515824,"question_id":52069359,"body_markdown":"OK, I have some pdf need convert to base64 by base64encoder.\r\n\r\nfinally, I use decoder to convert back to pdf format but my content is lost.\r\n\r\nmy code :\r\n\r\n    byte[] input_file = Files.readAllBytes(Paths.get(&quot;C:\\\\user\\\\Desktop\\\\dir1\\\\dir2\\\\test3.pdf&quot;));\r\n\t\tbyte[] encodedBytes = Base64.getEncoder().encode(input_file);\r\n\r\n\t\tString pdfInBase64 = new String(encodedBytes);\r\n\t\tString originalString = new String(Base64.getDecoder().decode(encodedBytes));\r\n\r\n\t\tSystem.out.println(&quot;originalString : &quot; + originalString);\r\n\r\n\t\tFileOutputStream fos = new FileOutputStream(&quot;C:\\\\user\\\\Desktop\\\\dir1\\\\dir2\\\\newtest3.pdf&quot;);\r\n\t\tfos.write(originalString.getBytes());\r\n\t\tfos.flush();\r\n\t\tfos.close();\r\n\r\nresult :\r\n\r\nEncode : https://pastebin.com/fnMACZzH\r\n\r\n[Before base64encode][1]\r\n\r\n\r\n[After decode][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/FZ6ki.png\r\n  [2]: https://i.stack.imgur.com/O5a70.png\r\n\r\nThank You ","title":"How to Convert Pdf to base64 and Encode / Decode","body":"<p>OK, I have some pdf need convert to base64 by base64encoder.</p>\n\n<p>finally, I use decoder to convert back to pdf format but my content is lost.</p>\n\n<p>my code :</p>\n\n<pre><code>byte[] input_file = Files.readAllBytes(Paths.get(\"C:\\\\user\\\\Desktop\\\\dir1\\\\dir2\\\\test3.pdf\"));\n    byte[] encodedBytes = Base64.getEncoder().encode(input_file);\n\n    String pdfInBase64 = new String(encodedBytes);\n    String originalString = new String(Base64.getDecoder().decode(encodedBytes));\n\n    System.out.println(\"originalString : \" + originalString);\n\n    FileOutputStream fos = new FileOutputStream(\"C:\\\\user\\\\Desktop\\\\dir1\\\\dir2\\\\newtest3.pdf\");\n    fos.write(originalString.getBytes());\n    fos.flush();\n    fos.close();\n</code></pre>\n\n<p>result :</p>\n\n<p>Encode : <a href=\"https://pastebin.com/fnMACZzH\" rel=\"noreferrer\">https://pastebin.com/fnMACZzH</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/FZ6ki.png\" rel=\"noreferrer\">Before base64encode</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/O5a70.png\" rel=\"noreferrer\">After decode</a></p>\n\n<p>Thank You </p>\n"},{"tags":["java","jenkins","groovy"],"comments":[{"owner":{"account_id":1307867,"reputation":457685,"user_id":1256452,"accept_rate":50,"display_name":"torek"},"score":1,"creation_date":1659606668,"post_id":73227560,"comment_id":129336402,"body_markdown":"See [What are &#39;properties&#39; in Groovy?](https://stackoverflow.com/q/13225599/1256452), [groovy.lang.Binding difference between property and variable](https://stackoverflow.com/q/53594351/1256452), and [What is the difference between defining variables using def and without?](https://stackoverflow.com/q/39514795/1256452). Note in particular [Pom12&#39;s answer](https://stackoverflow.com/a/39531443/1256452) to the last question (and the note `but y definition will throw an exception.`)","body":"See <a href=\"https://stackoverflow.com/q/13225599/1256452\">What are &#39;properties&#39; in Groovy?</a>, <a href=\"https://stackoverflow.com/q/53594351/1256452\">groovy.lang.Binding difference between property and variable</a>, and <a href=\"https://stackoverflow.com/q/39514795/1256452\">What is the difference between defining variables using def and without?</a>. Note in particular <a href=\"https://stackoverflow.com/a/39531443/1256452\">Pom12&#39;s answer</a> to the last question (and the note <code>but y definition will throw an exception.</code>)"}],"owner":{"account_id":1083037,"reputation":4332,"user_id":1079483,"accept_rate":64,"display_name":"Sebi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1659606529,"creation_date":1659559135,"question_id":73227560,"body_markdown":"Context:\r\n\r\n - `featureBranch` has been forked from `sprintBranch` and now needs to be merged into it\r\n - `file[A-C]` where changed in `featureBranch` creating a conflict with `sprintBranch`\r\n - changes from `featureBranch` are to be kept\r\n - after a merge of `sprintBranch` into `featureBranch` (no files were changed in `sprintBranch` pipelines in jenkins have started to fail\r\n\r\n    $ git log\r\n       commit ce90629c1f6a796a9e1b9ebf9f03641ecffeeabd (HEAD -&gt; featureBranch, origin/featureBranch)\r\n    Merge: f261cec59 dca640165\r\n    Author: userA\r\n    Date:   Wed Aug 3 \r\n    \r\n        Merge remote-tracking branch &#39;sprintBranch&#39; into &#39;featureBranch&#39;\r\n    \r\n        # Conflicts:\r\n        #       code/fileA\r\n        #       code/fileB\r\n        #       code/fileC\r\n    \r\n       commit f261cec591f05979c769c272ef2cba135414a6e9\r\n       Author: userB\r\n       Date:   Wed Aug 3 \r\n    \r\n        Commit msg #1\r\n    \r\n       commit e22e68756637ed7e628a2de6e45bf8b36f5a5127\r\n       Author: userB\r\n       Date:   Tue Aug 2 \r\n    \r\n        Commit msg #2\r\n\r\nAfter conflicts were resolved and a push was made to `origin/featureBranch` even though there were no changes, the following occurs on jenkins that uses the following pipeline:\r\n\r\n    Nodes.node(this, &quot;name&quot;, &quot;proj&quot;) { podLabel -&gt;\r\n        node(podLabel) {\r\n            try {\r\n                stage(&#39;Checkout&#39;) {\r\n                    cleanWs()\r\n                    checkout scm\r\n                }\r\n                LongCommitID = sh(returnStdout: true, script: &quot;git rev-parse HEAD&quot;).trim()\r\n    \r\n                SdkNotifier.buildStarted(&quot;bitbucketURL&quot;,\r\n                        credentials,\r\n                        LongCommitID,\r\n                        BitbucketAccessToken)\r\n    \t\t\t\t\t\r\nproducing:\r\n\r\n      hudson.remoting.ProxyException: groovy.lang.MissingPropertyException: No such property: LongCommitID for class: WorkflowScript\r\n      \tat org.codehaus.groovy.runtime.ScriptBytecodeAdapter.unwrap(ScriptBytecodeAdapter.java:66)\r\n      \tat org.codehaus.groovy.runtime.ScriptBytecodeAdapter.getProperty(ScriptBytecodeAdapter.java:471)\r\n      \tat org.kohsuke.groovy.sandbox.impl.Checker$7.call(Checker.java:355)\r\n      \tat org.kohsuke.groovy.sandbox.GroovyInterceptor.onGetProperty(GroovyInterceptor.java:68)\r\n      \tat org.jenkinsci.plugins.scriptsecurity.sandbox.groovy.SandboxInterceptor.onGetProperty(SandboxInterceptor.java:313)\t\r\n\r\nRunning locally we get the `HEAD` correctly. \r\n\r\n    $ git rev-parse HEAD\r\n    ce90629c1f6a796a9e1b9ebf9f03641ecffeeabd\r\n\r\nIf the files that are in conflict in the current branch that is to be merged into another, \r\nare left unchanged in the current branch, where are they being pushed to? The target branch, right?","title":"Jenkins pipeline fails after merge","body":"<p>Context:</p>\n<ul>\n<li><p><code>featureBranch</code> has been forked from <code>sprintBranch</code> and now needs to be merged into it</p>\n</li>\n<li><p><code>file[A-C]</code> where changed in <code>featureBranch</code> creating a conflict with <code>sprintBranch</code></p>\n</li>\n<li><p>changes from <code>featureBranch</code> are to be kept</p>\n</li>\n<li><p>after a merge of <code>sprintBranch</code> into <code>featureBranch</code> (no files were changed in <code>sprintBranch</code> pipelines in jenkins have started to fail</p>\n<p>$ git log\ncommit ce90629c1f6a796a9e1b9ebf9f03641ecffeeabd (HEAD -&gt; featureBranch, origin/featureBranch)\nMerge: f261cec59 dca640165\nAuthor: userA\nDate:   Wed Aug 3</p>\n<pre><code> Merge remote-tracking branch 'sprintBranch' into 'featureBranch'\n\n # Conflicts:\n #       code/fileA\n #       code/fileB\n #       code/fileC\n\ncommit f261cec591f05979c769c272ef2cba135414a6e9\nAuthor: userB\nDate:   Wed Aug 3 \n\n Commit msg #1\n\ncommit e22e68756637ed7e628a2de6e45bf8b36f5a5127\nAuthor: userB\nDate:   Tue Aug 2 \n\n Commit msg #2\n</code></pre>\n</li>\n</ul>\n<p>After conflicts were resolved and a push was made to <code>origin/featureBranch</code> even though there were no changes, the following occurs on jenkins that uses the following pipeline:</p>\n<pre><code>Nodes.node(this, &quot;name&quot;, &quot;proj&quot;) { podLabel -&gt;\n    node(podLabel) {\n        try {\n            stage('Checkout') {\n                cleanWs()\n                checkout scm\n            }\n            LongCommitID = sh(returnStdout: true, script: &quot;git rev-parse HEAD&quot;).trim()\n\n            SdkNotifier.buildStarted(&quot;bitbucketURL&quot;,\n                    credentials,\n                    LongCommitID,\n                    BitbucketAccessToken)\n                    \n</code></pre>\n<p>producing:</p>\n<pre><code>  hudson.remoting.ProxyException: groovy.lang.MissingPropertyException: No such property: LongCommitID for class: WorkflowScript\n    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.unwrap(ScriptBytecodeAdapter.java:66)\n    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.getProperty(ScriptBytecodeAdapter.java:471)\n    at org.kohsuke.groovy.sandbox.impl.Checker$7.call(Checker.java:355)\n    at org.kohsuke.groovy.sandbox.GroovyInterceptor.onGetProperty(GroovyInterceptor.java:68)\n    at org.jenkinsci.plugins.scriptsecurity.sandbox.groovy.SandboxInterceptor.onGetProperty(SandboxInterceptor.java:313)    \n</code></pre>\n<p>Running locally we get the <code>HEAD</code> correctly.</p>\n<pre><code>$ git rev-parse HEAD\nce90629c1f6a796a9e1b9ebf9f03641ecffeeabd\n</code></pre>\n<p>If the files that are in conflict in the current branch that is to be merged into another,\nare left unchanged in the current branch, where are they being pushed to? The target branch, right?</p>\n"},{"tags":["java","unit-testing","junit"],"comments":[{"owner":{"account_id":5665550,"reputation":1596,"user_id":4481818,"display_name":"skubski"},"score":0,"creation_date":1659546517,"post_id":73225182,"comment_id":129321884,"body_markdown":"Is `testClassObject` even instantiated? From what you have pasted, the nullpointer might be coming from `testClassObject.sendCommand(test);`.","body":"Is <code>testClassObject</code> even instantiated? From what you have pasted, the nullpointer might be coming from <code>testClassObject.sendCommand(test);</code>."},{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":1,"creation_date":1659546633,"post_id":73225182,"comment_id":129321924,"body_markdown":"You don&#39;t show where you&#39;re getting the NPE, so there&#39;s no telling why you&#39;re getting that error. Your stack trace should tell you exactly what line the error is occurring on. Also, instead of putting in a JSON string, make a second JSONObject and put that in your current object.","body":"You don&#39;t show where you&#39;re getting the NPE, so there&#39;s no telling why you&#39;re getting that error. Your stack trace should tell you exactly what line the error is occurring on. Also, instead of putting in a JSON string, make a second JSONObject and put that in your current object."},{"owner":{"account_id":17084800,"reputation":57,"user_id":12362378,"display_name":"Justin"},"score":0,"creation_date":1659546918,"post_id":73225182,"comment_id":129322028,"body_markdown":"testClassObject is instantiated, I chose to leave this out of the code I provided.\nMy full stack trace shows the null pointer exception is read at the beginning of the switch statement. This showcases that &quot;name&quot; is never read, meaning my JSON Object is empty or null","body":"testClassObject is instantiated, I chose to leave this out of the code I provided. My full stack trace shows the null pointer exception is read at the beginning of the switch statement. This showcases that &quot;name&quot; is never read, meaning my JSON Object is empty or null"}],"answers":[{"tags":[],"owner":{"account_id":140023,"reputation":814,"user_id":346027,"display_name":"anders"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659606315,"creation_date":1659606315,"answer_id":73233705,"question_id":73225182,"body_markdown":"`reader.getJSONObject(&quot;payload&quot;)` isn&#39;t a `JSONObject` - it&#39;s a `String`\r\n\r\nyou should add this when you create you test object\r\n\r\n    test.put(&quot;payload&quot;, new JSONObject(&quot;{ \\&quot;example\\&quot;: \\&quot;payload\\&quot; }&quot;));\r\n\r\n","title":"How to format a JSONObject Unit test to not be null?","body":"<p><code>reader.getJSONObject(&quot;payload&quot;)</code> isn't a <code>JSONObject</code> - it's a <code>String</code></p>\n<p>you should add this when you create you test object</p>\n<pre><code>test.put(&quot;payload&quot;, new JSONObject(&quot;{ \\&quot;example\\&quot;: \\&quot;payload\\&quot; }&quot;));\n</code></pre>\n"}],"owner":{"account_id":17084800,"reputation":57,"user_id":12362378,"display_name":"Justin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":539,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73233705,"answer_count":1,"score":1,"last_activity_date":1659606315,"creation_date":1659546251,"question_id":73225182,"body_markdown":"When I run the following unit test on the sendCommand Method, I get a null pointer exception. How do I format my JSON Object to properly Unit \r\n\r\nMy Unit test:\r\n\r\n    @Test(expected = IllegalStateException.class)\r\n        public void shouldThrowIllegalStateExceptionOnUnknownCommand() {\r\n            try {\r\n                JSONObject test = new JSONObject();\r\n                test.put(&quot;name&quot;, &quot;UnitTest&quot;);\r\n                test.put(&quot;payload&quot;, &quot;{ \\&quot;example\\&quot;: \\&quot;payload\\&quot; }&quot;);\r\n                testClassObject.sendCommand(test);\r\n            } catch (JSONException e) {\r\n                Log.e(TAG, &quot;failed to parse JSON Object Unit test&quot; + e.getMessage());\r\n            }\r\n        }\r\n\r\nMy Method:\r\n\r\n    public void sendCommand(JSONObject reader) {\r\n            try {\r\n                String commandName = reader.getString(&quot;name&quot;);\r\n                JSONObject data = reader.getJSONObject(&quot;payload&quot;);\r\n                switch (commandName)\r\n                {\r\n                    case &quot;ValidCommand&quot;:\r\n                        //Do Stuff\r\n                        break;\r\n                    default:\r\n                        Log.i(TAG, &quot;Unknown command&quot;);\r\n                        throw new IllegalStateException(&quot;Unknown command: &quot; + commandName);\r\n                }\r\n            } catch (JSONException e) {\r\n                Log.e(TAG, &quot; Failed to parse JSON Object / array &quot; + e.getMessage());\r\n            }\r\n        }\r\n\r\nMy Error message: \r\n\r\n    Unexpected exception, expected&lt;java.lang.IllegalStateException&gt; but was&lt;java.lang.NullPointerException&gt;\r\n        java.lang.Exception: Unexpected exception, expected&lt;java.lang.IllegalStateException&gt; but was&lt;java.lang.NullPointerException&gt;\r\n        \tat org.junit.internal.runners.statements.ExpectException.evaluate(ExpectException.java:28)\r\n\r\nThis error message is occurring at the Switch statement of sendCommand().","title":"How to format a JSONObject Unit test to not be null?","body":"<p>When I run the following unit test on the sendCommand Method, I get a null pointer exception. How do I format my JSON Object to properly Unit</p>\n<p>My Unit test:</p>\n<pre><code>@Test(expected = IllegalStateException.class)\n    public void shouldThrowIllegalStateExceptionOnUnknownCommand() {\n        try {\n            JSONObject test = new JSONObject();\n            test.put(&quot;name&quot;, &quot;UnitTest&quot;);\n            test.put(&quot;payload&quot;, &quot;{ \\&quot;example\\&quot;: \\&quot;payload\\&quot; }&quot;);\n            testClassObject.sendCommand(test);\n        } catch (JSONException e) {\n            Log.e(TAG, &quot;failed to parse JSON Object Unit test&quot; + e.getMessage());\n        }\n    }\n</code></pre>\n<p>My Method:</p>\n<pre><code>public void sendCommand(JSONObject reader) {\n        try {\n            String commandName = reader.getString(&quot;name&quot;);\n            JSONObject data = reader.getJSONObject(&quot;payload&quot;);\n            switch (commandName)\n            {\n                case &quot;ValidCommand&quot;:\n                    //Do Stuff\n                    break;\n                default:\n                    Log.i(TAG, &quot;Unknown command&quot;);\n                    throw new IllegalStateException(&quot;Unknown command: &quot; + commandName);\n            }\n        } catch (JSONException e) {\n            Log.e(TAG, &quot; Failed to parse JSON Object / array &quot; + e.getMessage());\n        }\n    }\n</code></pre>\n<p>My Error message:</p>\n<pre><code>Unexpected exception, expected&lt;java.lang.IllegalStateException&gt; but was&lt;java.lang.NullPointerException&gt;\n    java.lang.Exception: Unexpected exception, expected&lt;java.lang.IllegalStateException&gt; but was&lt;java.lang.NullPointerException&gt;\n        at org.junit.internal.runners.statements.ExpectException.evaluate(ExpectException.java:28)\n</code></pre>\n<p>This error message is occurring at the Switch statement of sendCommand().</p>\n"},{"tags":["java","jpa","jakarta-ee","mariadb","unit-of-work"],"owner":{"account_id":25955101,"reputation":11,"user_id":19672557,"display_name":"Ferrari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1659606125,"creation_date":1659430177,"question_id":73204589,"body_markdown":"## Context:\r\nThe application persists objects in a `PendingJobTable`, which then get retrieved and processed. This table holds objects in their original state (before being processed).\r\n\r\nOne of the scheduled jobs runs `@Startup` to create a worker, which retrieves all the original objects to process them.\r\n```\r\n@Singleton\r\n@Startup\r\npublic class PendingJobExecutor {\r\n    @EJB\r\n    private PendingJobWorker pendingJobWorker;\r\n\r\n    @PostConstruct\r\n    public void startUp() {\r\n        Logger.info(&quot;Executing pending jobs ...&quot;);\r\n        pendingJobWorker.runPendingJobs();\r\n    }\r\n}\r\n```\r\n`PendingJobWorker` simply injects the `PendingService` and calls the `pendingService.executePendingJobs()` method:\r\n```\r\n@Singleton\r\npublic class PendingJobWorker {\r\n    private final PendingService pendingService;\r\n\r\n    @Inject\r\n    public PendingJobWorker(\r\n            @Pending final PendingService pendingService) {\r\n        this.pendingService = pendingService;\r\n    }\r\n\r\n    public void runPendingJobs() {\r\n        pendingService.executePendingJobs();\r\n    }\r\n}\r\n```\r\nThe `PendingService` retrieves all pending jobs using `findPendingJobs`, lets the worker process them (Futures) one-by-one, and then saves the resulting objects using `saveJob`:\r\n```\r\n@Transactional\r\npublic abstract class JobRepositoryBase {\r\n    @PersistenceContext(unitName = &quot;Production&quot;)\r\n    protected EntityManager entityManager;\r\n\r\n    protected PendingJob findPendingJob(final UUID jobId) {\r\n        return entityManager.find(PendingJob.class, jobId);\r\n    }\r\n\r\n    protected void saveJob(final UUID jobId, final Future&lt;? extends Job&gt; jobFuture) {\r\n        try {\r\n            // Save processed object\r\n            final var job = jobFuture.get();\r\n            entityManager.persist(job);\r\n            entityManager.flush();\r\n\r\n            Logger.info(&quot;Processed object {} persisted.&quot;, jobId);\r\n        } catch (final InterruptedException | ExecutionException e) {\r\n            Logger.error(e, &quot;Persisting the job with ID {} failed!&quot;, jobId);\r\n            Thread.currentThread().interrupt();\r\n        } catch (final CancellationException e) {\r\n            Logger.error(e, &quot;The job with ID {} was cancelled!&quot;, jobId);\r\n        }\r\n    }\r\n```\r\n\r\nWhile adding entries into the `PendingJobTable` manually (QueryConsole) works after restart, simulating a crash causes the `QueryException.` To &quot;simulate a crash&quot;, I&#39;m stopping the docker container in the middle of the processing process. The original job is still in the `PendingJobTable` and should be processed again on `@Startup`.\r\n\r\nCan I somehow capture the `UnitOfWork` from the parent and continue working after the &quot;crash?&quot;\r\n\r\n## Exception:\r\n```\r\nCaused by: Exception [EclipseLink-6004] (Eclipse Persistence Services - 2.7.9.payara-p1): org.eclipse.persistence.exceptions.QueryException\r\nException Description: The object [PendingJob], of class [class com.example.PendingJob], with identity hashcode (System.identityHashCod\r\ne()) [948,982,881], is not from this UnitOfWork object space, but the parent session&#39;s. The object was never registered in this UnitOfWork, but read from the parent session and related to an object registered in the UnitOfWork.\r\n```\r\n\r\n## Platform Info\r\n- Jakarta EE Platform 9.1.0\r\n- Java 11\r\n- MariaDB jdbc\r\n- Payara Application Server\r\n- plain JPA (no hibernate)\r\n\r\n## Found &quot;solutions&quot;\r\n- https://stackoverflow.com/questions/16428581/object-is-not-from-this-unitofwork\r\n\r\n## Update\r\nThe exception is caused only when I&#39;m &quot;crashing&quot; docker containers using `docker-compose down`, which doesn&#39;t cause a real crash. However, the exception is not appearing (and the application works as intended) when killing or restarting the container. I will still try to find a way to fix the exception.\r\n\r\nI kill the container (with `restart: on-failure`) using `docker ps` to find the container id:\r\n```\r\ndocker ps\r\n```\r\nThen by checking what processes this container is running:\r\n```\r\ndocker exec -it &lt;container_id&gt; ps -aux\r\n```\r\nand killing the jvm process (some pid):\r\n```\r\ndocker exec -it &lt;container_id&gt; kill -9 &lt;pid&gt;\r\n```","title":"UnitOfWork Exception triggered after System-Crash","body":"<h2>Context:</h2>\n<p>The application persists objects in a <code>PendingJobTable</code>, which then get retrieved and processed. This table holds objects in their original state (before being processed).</p>\n<p>One of the scheduled jobs runs <code>@Startup</code> to create a worker, which retrieves all the original objects to process them.</p>\n<pre><code>@Singleton\n@Startup\npublic class PendingJobExecutor {\n    @EJB\n    private PendingJobWorker pendingJobWorker;\n\n    @PostConstruct\n    public void startUp() {\n        Logger.info(&quot;Executing pending jobs ...&quot;);\n        pendingJobWorker.runPendingJobs();\n    }\n}\n</code></pre>\n<p><code>PendingJobWorker</code> simply injects the <code>PendingService</code> and calls the <code>pendingService.executePendingJobs()</code> method:</p>\n<pre><code>@Singleton\npublic class PendingJobWorker {\n    private final PendingService pendingService;\n\n    @Inject\n    public PendingJobWorker(\n            @Pending final PendingService pendingService) {\n        this.pendingService = pendingService;\n    }\n\n    public void runPendingJobs() {\n        pendingService.executePendingJobs();\n    }\n}\n</code></pre>\n<p>The <code>PendingService</code> retrieves all pending jobs using <code>findPendingJobs</code>, lets the worker process them (Futures) one-by-one, and then saves the resulting objects using <code>saveJob</code>:</p>\n<pre><code>@Transactional\npublic abstract class JobRepositoryBase {\n    @PersistenceContext(unitName = &quot;Production&quot;)\n    protected EntityManager entityManager;\n\n    protected PendingJob findPendingJob(final UUID jobId) {\n        return entityManager.find(PendingJob.class, jobId);\n    }\n\n    protected void saveJob(final UUID jobId, final Future&lt;? extends Job&gt; jobFuture) {\n        try {\n            // Save processed object\n            final var job = jobFuture.get();\n            entityManager.persist(job);\n            entityManager.flush();\n\n            Logger.info(&quot;Processed object {} persisted.&quot;, jobId);\n        } catch (final InterruptedException | ExecutionException e) {\n            Logger.error(e, &quot;Persisting the job with ID {} failed!&quot;, jobId);\n            Thread.currentThread().interrupt();\n        } catch (final CancellationException e) {\n            Logger.error(e, &quot;The job with ID {} was cancelled!&quot;, jobId);\n        }\n    }\n</code></pre>\n<p>While adding entries into the <code>PendingJobTable</code> manually (QueryConsole) works after restart, simulating a crash causes the <code>QueryException.</code> To &quot;simulate a crash&quot;, I'm stopping the docker container in the middle of the processing process. The original job is still in the <code>PendingJobTable</code> and should be processed again on <code>@Startup</code>.</p>\n<p>Can I somehow capture the <code>UnitOfWork</code> from the parent and continue working after the &quot;crash?&quot;</p>\n<h2>Exception:</h2>\n<pre><code>Caused by: Exception [EclipseLink-6004] (Eclipse Persistence Services - 2.7.9.payara-p1): org.eclipse.persistence.exceptions.QueryException\nException Description: The object [PendingJob], of class [class com.example.PendingJob], with identity hashcode (System.identityHashCod\ne()) [948,982,881], is not from this UnitOfWork object space, but the parent session's. The object was never registered in this UnitOfWork, but read from the parent session and related to an object registered in the UnitOfWork.\n</code></pre>\n<h2>Platform Info</h2>\n<ul>\n<li>Jakarta EE Platform 9.1.0</li>\n<li>Java 11</li>\n<li>MariaDB jdbc</li>\n<li>Payara Application Server</li>\n<li>plain JPA (no hibernate)</li>\n</ul>\n<h2>Found &quot;solutions&quot;</h2>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/16428581/object-is-not-from-this-unitofwork\">Object is not from this UnitOfWork</a></li>\n</ul>\n<h2>Update</h2>\n<p>The exception is caused only when I'm &quot;crashing&quot; docker containers using <code>docker-compose down</code>, which doesn't cause a real crash. However, the exception is not appearing (and the application works as intended) when killing or restarting the container. I will still try to find a way to fix the exception.</p>\n<p>I kill the container (with <code>restart: on-failure</code>) using <code>docker ps</code> to find the container id:</p>\n<pre><code>docker ps\n</code></pre>\n<p>Then by checking what processes this container is running:</p>\n<pre><code>docker exec -it &lt;container_id&gt; ps -aux\n</code></pre>\n<p>and killing the jvm process (some pid):</p>\n<pre><code>docker exec -it &lt;container_id&gt; kill -9 &lt;pid&gt;\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":3402838,"reputation":1903,"user_id":2854632,"accept_rate":77,"display_name":"H Raval"},"score":1,"creation_date":1458539960,"post_id":36124082,"comment_id":59887774,"body_markdown":"create a folder with dot ex. .images....it will be hidden","body":"create a folder with dot ex. .images....it will be hidden"}],"answers":[{"tags":[],"owner":{"account_id":2156954,"reputation":5870,"user_id":1911941,"accept_rate":100,"display_name":"ELITE"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1458540311,"creation_date":1458540311,"answer_id":36124159,"question_id":36124082,"body_markdown":"Android is multi user linux system, so if you create folder starting with `dot`, it&#39;ll be hidden.\r\n\r\nSo store folder starting with `dot`\r\n\r\nfor example\r\n\r\n    File folder = new File(Environment.getExternalStorageDirectory(), &quot;.hiddenFolder&quot;);\r\n    folder.mkdir();\r\n\r\nand store all images in this folder and access images in your app from same folder.","title":"How to hide a folder using programmatically in android, and access there file.","body":"<p>Android is multi user linux system, so if you create folder starting with <code>dot</code>, it'll be hidden.</p>\n\n<p>So store folder starting with <code>dot</code></p>\n\n<p>for example</p>\n\n<pre><code>File folder = new File(Environment.getExternalStorageDirectory(), \".hiddenFolder\");\nfolder.mkdir();\n</code></pre>\n\n<p>and store all images in this folder and access images in your app from same folder.</p>\n"},{"tags":[],"owner":{"account_id":3339315,"reputation":2719,"user_id":2805971,"display_name":"Rohit Heera"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1458542870,"creation_date":1458540325,"answer_id":36124163,"question_id":36124082,"body_markdown":"Just put a `.` in front of your folder name than it becomes a hidden folder","title":"How to hide a folder using programmatically in android, and access there file.","body":"<p>Just put a <code>.</code> in front of your folder name than it becomes a hidden folder</p>\n"},{"tags":[],"owner":{"account_id":8071089,"reputation":352,"user_id":6083839,"display_name":"mantlabs"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1458540374,"creation_date":1458540374,"answer_id":36124174,"question_id":36124082,"body_markdown":"Create a folder with a . (dot) before its name, and add an empty .nomedia file inside it. (.(dot)nomedia - exactly as I typed it) and add your files ands images there. \n\nNow other Apps like Gallery will ignore these images. That&#39;s the only way that I think this can be done.\n\nE.g.: folder name: .images\n\nwhich includes an empty file .nomedia","title":"How to hide a folder using programmatically in android, and access there file.","body":"<p>Create a folder with a . (dot) before its name, and add an empty .nomedia file inside it. (.(dot)nomedia - exactly as I typed it) and add your files ands images there. </p>\n\n<p>Now other Apps like Gallery will ignore these images. That's the only way that I think this can be done.</p>\n\n<p>E.g.: folder name: .images</p>\n\n<p>which includes an empty file .nomedia</p>\n"}],"owner":{"account_id":3536838,"reputation":61,"user_id":2954909,"display_name":"Arshad"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14258,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1659606077,"creation_date":1458539902,"question_id":36124082,"body_markdown":"I am developing android application which having some external files. I want to hide these files. Can we access hidden file in my app. Example I have many of images which will be use in my app. I want to hide these file but access only using my app. ","title":"How to hide a folder using programmatically in android, and access there file.","body":"<p>I am developing android application which having some external files. I want to hide these files. Can we access hidden file in my app. Example I have many of images which will be use in my app. I want to hide these file but access only using my app. </p>\n"},{"tags":["java","pdfbox"],"answers":[{"tags":[],"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659449100,"creation_date":1659449100,"answer_id":73208968,"question_id":73204608,"body_markdown":"*You add 2 signature fields to the document.*\r\n\r\nYou call `addAp` twice. Each time that method creates a `PDSignatureField`, and in the loop immediately after the `addAp` call the single widget of that field is added to the pages. Thus, both signature fields are reachable in the resulting PDF.\r\n\r\n*The two signature fields share the signature value.*\r\n\r\n`addAp` sets the value of both signature fields to the same signature value. When eventually the signature bytes are written into this value, both signature fields become signed.\r\n\r\n*Only the second signature field is in the PDF form definition.*\r\n\r\n`addAp` removes any field from the PDF form definition before adding the newly generated one. In the end, therefore, the PDF form definition only contains the signature field from the last `addAp` call.\r\n\r\n*Adobe Acrobat opens the file...*\r\n\r\nAdobe Acrobat automatically only validates the signature field in the PDF form definition. But as soon as it displays the widget of the other signature field, it also displays it on the signature panel. As it wasn&#39;t there from the start, though, it is displayed as not-yet-validated.\r\n\r\n---\r\n\r\nBy not clearing the PDF form definition field list in the second `addAp` call, you should get two automatically validated signature fields in the signature panel.\r\n\r\nAlternatively, by creating only a single form field with two widget annotations, you should get only a single signature field in the signature panel.\r\n\r\nAs a warning: You reference the same widget annotation from multiple pages. This strictly speaking is forbidden by the PDF specification. Thus, any validator may warn about this issue and - as this issue occurs in the context of a signature - message doubts about the validity of that signature.","title":"Add digital signature to PDF use PDFbox","body":"<p><em>You add 2 signature fields to the document.</em></p>\n<p>You call <code>addAp</code> twice. Each time that method creates a <code>PDSignatureField</code>, and in the loop immediately after the <code>addAp</code> call the single widget of that field is added to the pages. Thus, both signature fields are reachable in the resulting PDF.</p>\n<p><em>The two signature fields share the signature value.</em></p>\n<p><code>addAp</code> sets the value of both signature fields to the same signature value. When eventually the signature bytes are written into this value, both signature fields become signed.</p>\n<p><em>Only the second signature field is in the PDF form definition.</em></p>\n<p><code>addAp</code> removes any field from the PDF form definition before adding the newly generated one. In the end, therefore, the PDF form definition only contains the signature field from the last <code>addAp</code> call.</p>\n<p><em>Adobe Acrobat opens the file...</em></p>\n<p>Adobe Acrobat automatically only validates the signature field in the PDF form definition. But as soon as it displays the widget of the other signature field, it also displays it on the signature panel. As it wasn't there from the start, though, it is displayed as not-yet-validated.</p>\n<hr />\n<p>By not clearing the PDF form definition field list in the second <code>addAp</code> call, you should get two automatically validated signature fields in the signature panel.</p>\n<p>Alternatively, by creating only a single form field with two widget annotations, you should get only a single signature field in the signature panel.</p>\n<p>As a warning: You reference the same widget annotation from multiple pages. This strictly speaking is forbidden by the PDF specification. Thus, any validator may warn about this issue and - as this issue occurs in the context of a signature - message doubts about the validity of that signature.</p>\n"}],"owner":{"account_id":21131086,"reputation":27,"user_id":15536335,"display_name":"Serendipity"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":754,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659605863,"creation_date":1659430255,"question_id":73204608,"body_markdown":"I want to ask a question. I added digital paging seal to a multi-page PDF, each page has the same seal, add the digital signature once on the first page, and then the other pages only need to quote the appearance of the first seal. But using adobe Acrobat DC to open, there will be an extra &quot;123&quot; signature in the generated document. What causes it?\r\n\r\nI wrote the following code based on [this answer][1] and it helped me a lot.\r\n\r\n```lang-java\r\n       addAp(doc, doc.getPage(0), rect, signature, xz[0]);\r\n       for (int i = 0; i &lt; doc.getNumberOfPages() - 1; i++) {\r\n            addAnnots(doc.getPage(i));\r\n       }\r\n       addAp(doc, doc.getPage(1), lerect, signature, xz[1]);\r\n       for (int i = 1; i &lt; doc.getNumberOfPages(); i++) {\r\n            addAnnots(doc.getPage(i));\r\n       }\r\n\r\nvoid addAp(PDDocument pdDocument, PDPage pdPage, PDRectangle rectangle, PDSignature signature, BufferedImage signatureImage) throws IOException {\r\n    PDAcroForm acroForm = pdDocument.getDocumentCatalog().getAcroForm();\r\n    List&lt;PDField&gt; acroFormFields = acroForm.getFields();\r\n\r\n    PDSignatureField signatureField = new PDSignatureField(acroForm);\r\n    signatureField.setValue(signature);\r\n    PDAnnotationWidget widget = signatureField.getWidgets().get(0);\r\n    acroFormFields.clear();\r\n    acroFormFields.add(signatureField);\r\n\r\n    widget.setRectangle(rectangle);\r\n    widget.setPage(pdPage);\r\n\r\n    // from PDVisualSigBuilder.createHolderForm()\r\n    PDStream stream = new PDStream(pdDocument);\r\n    PDFormXObject form = new PDFormXObject(stream);\r\n    PDResources res = new PDResources();\r\n    form.setResources(res);\r\n    form.setFormType(1);\r\n    PDRectangle bbox = new PDRectangle(rectangle.getWidth(), rectangle.getHeight());\r\n\r\n    form.setBBox(bbox);\r\n\r\n    // from PDVisualSigBuilder.createAppearanceDictionary()\r\n    PDAppearanceDictionary appearance = new PDAppearanceDictionary();\r\n    appearance.getCOSObject().setDirect(true);\r\n    PDAppearanceStream appearanceStream = new PDAppearanceStream(form.getCOSObject());\r\n    appearance.setNormalAppearance(appearanceStream);\r\n    widget.setAppearance(appearance);\r\n\r\n    ByteArrayOutputStream bao = new ByteArrayOutputStream();\r\n    ImageIO.write(signatureImage, &quot;png&quot;, bao);\r\n\r\n    bao.flush();\r\n    byte[] imageByte = bao.toByteArray();\r\n    bao.close();\r\n\r\n    PDImageXObject pdImage = PDImageXObject.createFromByteArray(pdDocument, imageByte, null);\r\n\r\n\r\n    try (PDPageContentStream cs = new PDPageContentStream(pdDocument, appearanceStream)) {\r\n\r\n        PDExtendedGraphicsState r0 = new PDExtendedGraphicsState();\r\n\r\n        r0.setBlendMode(BlendMode.DARKEN);\r\n\r\n        cs.setGraphicsStateParameters(r0);\r\n\r\n        cs.addComment(&quot;This is a comment&quot;);\r\n        cs.drawImage(pdImage, 0, 0, rectangle.getWidth(), rectangle.getHeight());\r\n\r\n    }\r\n\r\n    setPdAnnotationWidget(widget);\r\n}\r\n\r\nvoid addAnnots(PDPage pdPage) throws IOException {\r\n\r\n    pdPage.getAnnotations().add(getPdAnnotationWidget());\r\n\r\n    COSDictionary pageTreeObject = pdPage.getCOSObject();\r\n    while (pageTreeObject != null) {\r\n        pageTreeObject.setNeedToBeUpdated(true);\r\n        pageTreeObject = (COSDictionary) pageTreeObject.getDictionaryObject(COSName.PARENT);\r\n    }\r\n}\r\n```\r\n\r\n PDFBOX version is 2.0.20.\r\n                            \r\n\r\nAfter modification:\r\n\r\n         ArrayList&lt;PDAnnotationWidget&gt; listWidget = addAp1(doc, signature);\r\n         addAp2(doc, doc.getPage(0), rect, xz[0], listWidget.get(0));\r\n         for (int i = 0; i &lt; doc.getNumberOfPages() - 1; i++) {\r\n             addAnnots(doc.getPage(i));\r\n         }\r\n         addAp2(doc, doc.getPage(1), lerect, xz[1], listWidget.get(1));\r\n         for (int i = 1; i &lt; doc.getNumberOfPages(); i++) {\r\n             addAnnots(doc.getPage(i));\r\n         }\r\n\r\n        ArrayList&lt;PDAnnotationWidget&gt; addAp1(PDDocument pdDocument, PDSignature signature) throws IOException {\r\n                ArrayList&lt;PDAnnotationWidget&gt; widgetList = new ArrayList&lt;&gt;();\r\n        PDAcroForm acroForm = pdDocument.getDocumentCatalog().getAcroForm();\r\n        List&lt;PDField&gt; acroFormFields = acroForm.getFields();\r\n\r\n        PDAnnotationWidget widget1 = new PDAnnotationWidget();\r\n        PDAnnotationWidget widget2 = new PDAnnotationWidget();\r\n        widgetList.add(widget1);\r\n        widgetList.add(widget2);\r\n\r\n        PDSignatureField signatureField = new PDSignatureField(acroForm);\r\n        signatureField.setValue(signature);\r\n\r\n        signatureField.setWidgets(widgetList);\r\n\r\n        acroFormFields.clear();\r\n        acroFormFields.add(signatureField);\r\n\r\n\r\n        return widgetList;\r\n    }\r\n     void addAp2(PDDocument pdDocument, PDPage pdPage, PDRectangle rectangle, BufferedImage signatureImage, PDAnnotationWidget widget) throws IOException {\r\n    \r\n       widget.setPage(pdPage);\r\n       widget.setRectangle(rectangle);\r\n       ....\r\n    }\r\nWPS:\r\n[![enter image description here][2]][2]\r\n\r\nAdobe Acrobat DC:\r\n[![enter image description here][3]][3]\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/52834362/1729265\r\n  [2]: https://i.stack.imgur.com/rpKpb.png\r\n  [3]: https://i.stack.imgur.com/OhJGP.png","title":"Add digital signature to PDF use PDFbox","body":"<p>I want to ask a question. I added digital paging seal to a multi-page PDF, each page has the same seal, add the digital signature once on the first page, and then the other pages only need to quote the appearance of the first seal. But using adobe Acrobat DC to open, there will be an extra &quot;123&quot; signature in the generated document. What causes it?</p>\n<p>I wrote the following code based on <a href=\"https://stackoverflow.com/a/52834362/1729265\">this answer</a> and it helped me a lot.</p>\n<pre class=\"lang-java prettyprint-override\"><code>       addAp(doc, doc.getPage(0), rect, signature, xz[0]);\n       for (int i = 0; i &lt; doc.getNumberOfPages() - 1; i++) {\n            addAnnots(doc.getPage(i));\n       }\n       addAp(doc, doc.getPage(1), lerect, signature, xz[1]);\n       for (int i = 1; i &lt; doc.getNumberOfPages(); i++) {\n            addAnnots(doc.getPage(i));\n       }\n\nvoid addAp(PDDocument pdDocument, PDPage pdPage, PDRectangle rectangle, PDSignature signature, BufferedImage signatureImage) throws IOException {\n    PDAcroForm acroForm = pdDocument.getDocumentCatalog().getAcroForm();\n    List&lt;PDField&gt; acroFormFields = acroForm.getFields();\n\n    PDSignatureField signatureField = new PDSignatureField(acroForm);\n    signatureField.setValue(signature);\n    PDAnnotationWidget widget = signatureField.getWidgets().get(0);\n    acroFormFields.clear();\n    acroFormFields.add(signatureField);\n\n    widget.setRectangle(rectangle);\n    widget.setPage(pdPage);\n\n    // from PDVisualSigBuilder.createHolderForm()\n    PDStream stream = new PDStream(pdDocument);\n    PDFormXObject form = new PDFormXObject(stream);\n    PDResources res = new PDResources();\n    form.setResources(res);\n    form.setFormType(1);\n    PDRectangle bbox = new PDRectangle(rectangle.getWidth(), rectangle.getHeight());\n\n    form.setBBox(bbox);\n\n    // from PDVisualSigBuilder.createAppearanceDictionary()\n    PDAppearanceDictionary appearance = new PDAppearanceDictionary();\n    appearance.getCOSObject().setDirect(true);\n    PDAppearanceStream appearanceStream = new PDAppearanceStream(form.getCOSObject());\n    appearance.setNormalAppearance(appearanceStream);\n    widget.setAppearance(appearance);\n\n    ByteArrayOutputStream bao = new ByteArrayOutputStream();\n    ImageIO.write(signatureImage, &quot;png&quot;, bao);\n\n    bao.flush();\n    byte[] imageByte = bao.toByteArray();\n    bao.close();\n\n    PDImageXObject pdImage = PDImageXObject.createFromByteArray(pdDocument, imageByte, null);\n\n\n    try (PDPageContentStream cs = new PDPageContentStream(pdDocument, appearanceStream)) {\n\n        PDExtendedGraphicsState r0 = new PDExtendedGraphicsState();\n\n        r0.setBlendMode(BlendMode.DARKEN);\n\n        cs.setGraphicsStateParameters(r0);\n\n        cs.addComment(&quot;This is a comment&quot;);\n        cs.drawImage(pdImage, 0, 0, rectangle.getWidth(), rectangle.getHeight());\n\n    }\n\n    setPdAnnotationWidget(widget);\n}\n\nvoid addAnnots(PDPage pdPage) throws IOException {\n\n    pdPage.getAnnotations().add(getPdAnnotationWidget());\n\n    COSDictionary pageTreeObject = pdPage.getCOSObject();\n    while (pageTreeObject != null) {\n        pageTreeObject.setNeedToBeUpdated(true);\n        pageTreeObject = (COSDictionary) pageTreeObject.getDictionaryObject(COSName.PARENT);\n    }\n}\n</code></pre>\n<p>PDFBOX version is 2.0.20.</p>\n<p>After modification:</p>\n<pre><code>     ArrayList&lt;PDAnnotationWidget&gt; listWidget = addAp1(doc, signature);\n     addAp2(doc, doc.getPage(0), rect, xz[0], listWidget.get(0));\n     for (int i = 0; i &lt; doc.getNumberOfPages() - 1; i++) {\n         addAnnots(doc.getPage(i));\n     }\n     addAp2(doc, doc.getPage(1), lerect, xz[1], listWidget.get(1));\n     for (int i = 1; i &lt; doc.getNumberOfPages(); i++) {\n         addAnnots(doc.getPage(i));\n     }\n\n    ArrayList&lt;PDAnnotationWidget&gt; addAp1(PDDocument pdDocument, PDSignature signature) throws IOException {\n            ArrayList&lt;PDAnnotationWidget&gt; widgetList = new ArrayList&lt;&gt;();\n    PDAcroForm acroForm = pdDocument.getDocumentCatalog().getAcroForm();\n    List&lt;PDField&gt; acroFormFields = acroForm.getFields();\n\n    PDAnnotationWidget widget1 = new PDAnnotationWidget();\n    PDAnnotationWidget widget2 = new PDAnnotationWidget();\n    widgetList.add(widget1);\n    widgetList.add(widget2);\n\n    PDSignatureField signatureField = new PDSignatureField(acroForm);\n    signatureField.setValue(signature);\n\n    signatureField.setWidgets(widgetList);\n\n    acroFormFields.clear();\n    acroFormFields.add(signatureField);\n\n\n    return widgetList;\n}\n void addAp2(PDDocument pdDocument, PDPage pdPage, PDRectangle rectangle, BufferedImage signatureImage, PDAnnotationWidget widget) throws IOException {\n\n   widget.setPage(pdPage);\n   widget.setRectangle(rectangle);\n   ....\n}\n</code></pre>\n<p>WPS:\n<a href=\"https://i.stack.imgur.com/rpKpb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rpKpb.png\" alt=\"enter image description here\" /></a></p>\n<p>Adobe Acrobat DC:\n<a href=\"https://i.stack.imgur.com/OhJGP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OhJGP.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","itext","itext7"],"answers":[{"tags":[],"owner":{"account_id":3385419,"reputation":11912,"user_id":2841472,"accept_rate":75,"display_name":"Sai prateek"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1548336171,"creation_date":1548335990,"answer_id":54347636,"question_id":54347293,"body_markdown":"You can use `PageOrientationsEventHandler` to handle orientation in your document like -\r\n\r\n    PdfDocument pdfDoc = new PdfDocument(new PdfWriter(DEST));\r\n    PageOrientationsEventHandler eventHandler = new PageOrientationsEventHandler();\r\n    pdfDoc.addEventHandler(PdfDocumentEvent.START_PAGE, eventHandler);\r\n    Document doc = new Document(pdfDoc);\r\n    doc.add(new Paragraph(&quot;A simple page in portrait orientation&quot;));\r\n    eventHandler.setOrientation(LANDSCAPE);\r\n\r\ncheck it in more detail [here][1].\r\n\r\n  [1]: https://itextpdf.com/en/resources/examples/itext-7/page-orientation-and-rotation","title":"How to set orientation to Landscape in iText 7","body":"<p>You can use <code>PageOrientationsEventHandler</code> to handle orientation in your document like -</p>\n\n<pre><code>PdfDocument pdfDoc = new PdfDocument(new PdfWriter(DEST));\nPageOrientationsEventHandler eventHandler = new PageOrientationsEventHandler();\npdfDoc.addEventHandler(PdfDocumentEvent.START_PAGE, eventHandler);\nDocument doc = new Document(pdfDoc);\ndoc.add(new Paragraph(\"A simple page in portrait orientation\"));\neventHandler.setOrientation(LANDSCAPE);\n</code></pre>\n\n<p>check it in more detail <a href=\"https://itextpdf.com/en/resources/examples/itext-7/page-orientation-and-rotation\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":8930620,"reputation":2388,"user_id":6663375,"display_name":"Uladzimir Asipchuk"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1659605819,"creation_date":1548337855,"answer_id":54348204,"question_id":54347293,"body_markdown":"Please just use a converter method that takes `PdfDocument` as a parameter. For example, the next one : `convertToPdf(InputStream htmlStream, PdfDocument pdfDocument, ConverterProperties converterProperties)`\r\n\r\nNow the only thing you need is to set the page size to the document before converting the html file.\r\n\r\n        PdfDocument pdfDocument = new PdfDocument(new PdfWriter(new File(sourcePath)));\r\n        pdfDocument.setDefaultPageSize(PageSize.A4.rotate());\r\n        HtmlConverter.convertToPdf(new FileInputStream(destPath), pdfDocument, new ConverterProperties());\r\n","title":"How to set orientation to Landscape in iText 7","body":"<p>Please just use a converter method that takes <code>PdfDocument</code> as a parameter. For example, the next one : <code>convertToPdf(InputStream htmlStream, PdfDocument pdfDocument, ConverterProperties converterProperties)</code></p>\n<p>Now the only thing you need is to set the page size to the document before converting the html file.</p>\n<pre><code>    PdfDocument pdfDocument = new PdfDocument(new PdfWriter(new File(sourcePath)));\n    pdfDocument.setDefaultPageSize(PageSize.A4.rotate());\n    HtmlConverter.convertToPdf(new FileInputStream(destPath), pdfDocument, new ConverterProperties());\n</code></pre>\n"}],"owner":{"account_id":14655611,"reputation":147,"user_id":10584260,"display_name":"NeedToLearn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14763,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":2,"score":11,"last_activity_date":1659605819,"creation_date":1548334903,"question_id":54347293,"body_markdown":"I am converting html to pdf using iText7 with method convertToPdf(). PDF is getting generated properly but Landscape mode is not working.\r\n\r\nCan some one tell how to get Landscape mode?\r\n\r\n    import com.itextpdf.html2pdf.ConverterProperties;\r\n    import com.itextpdf.html2pdf.HtmlConverter;\r\n    import com.itextpdf.styledxmlparser.css.media.MediaDeviceDescription;\r\n    import com.itextpdf.styledxmlparser.css.media.MediaType;\r\n\r\n    import java.io.File;\r\n    import java.io.IOException;\r\n\r\n    import static com.itextpdf.html2pdf.css.CssConstants.LANDSCAPE;\r\n\r\n    public class htmlToPDF {\r\n\r\n        public static void main(String args[]) throws IOException {\r\n        \r\n            ConverterProperties properties = new ConverterProperties();\r\n\r\n            MediaDeviceDescription med = new MediaDeviceDescription(MediaType.ALL);\r\n            med.setOrientation(LANDSCAPE);\r\n            properties.setMediaDeviceDescription(med);\r\n        \r\n            HtmlConverter.convertToPdf(new File(&quot;D:\\\\test.html&quot;), new File(&quot;D:\\\\test.pdf&quot;),properties);\r\n        }\r\n    }\r\n\r\n","title":"How to set orientation to Landscape in iText 7","body":"<p>I am converting html to pdf using iText7 with method convertToPdf(). PDF is getting generated properly but Landscape mode is not working.</p>\n\n<p>Can some one tell how to get Landscape mode?</p>\n\n<pre><code>import com.itextpdf.html2pdf.ConverterProperties;\nimport com.itextpdf.html2pdf.HtmlConverter;\nimport com.itextpdf.styledxmlparser.css.media.MediaDeviceDescription;\nimport com.itextpdf.styledxmlparser.css.media.MediaType;\n\nimport java.io.File;\nimport java.io.IOException;\n\nimport static com.itextpdf.html2pdf.css.CssConstants.LANDSCAPE;\n\npublic class htmlToPDF {\n\n    public static void main(String args[]) throws IOException {\n\n        ConverterProperties properties = new ConverterProperties();\n\n        MediaDeviceDescription med = new MediaDeviceDescription(MediaType.ALL);\n        med.setOrientation(LANDSCAPE);\n        properties.setMediaDeviceDescription(med);\n\n        HtmlConverter.convertToPdf(new File(\"D:\\\\test.html\"), new File(\"D:\\\\test.pdf\"),properties);\n    }\n}\n</code></pre>\n"},{"tags":["java","log4j2"],"answers":[{"tags":[],"owner":{"account_id":3983214,"reputation":4583,"user_id":3284624,"display_name":"D.B."},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1659605716,"creation_date":1492135675,"answer_id":43404258,"question_id":42682380,"body_markdown":"You have to do it by removing the appender and then adding it again with the desired level.\r\n\r\n**Example `log4j2.xml`:**\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Configuration status=&quot;WARN&quot;&gt;\r\n    &lt;Appenders&gt;\r\n        &lt;File name=&quot;logFile&quot; fileName=&quot;log.txt&quot; immediateFlush=&quot;false&quot;\r\n              append=&quot;true&quot;&gt;\r\n            &lt;PatternLayout\r\n                pattern=&quot;%d{yyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot;/&gt;\r\n        &lt;/File&gt;\r\n    &lt;/Appenders&gt;\r\n\r\n    &lt;Loggers&gt;\r\n        &lt;Root level=&quot;trace&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;logFile&quot; level=&quot;info&quot;/&gt;\r\n        &lt;/Root&gt;\r\n    &lt;/Loggers&gt;\r\n&lt;/Configuration&gt;\r\n```\r\n\r\n**Example code:**\r\n\r\n```java\r\npackage example;\r\n\r\nimport org.apache.logging.log4j.Level;\r\nimport org.apache.logging.log4j.LogManager;\r\nimport org.apache.logging.log4j.Logger;\r\nimport org.apache.logging.log4j.core.LoggerContext;\r\nimport org.apache.logging.log4j.core.config.Configuration;\r\nimport org.apache.logging.log4j.core.config.LoggerConfig;\r\n\r\npublic class Log4j2SetAppenderRefLvlMain {\r\n    private static final Logger log = LogManager.getLogger();\r\n    \r\n    public static void main(String[] args) {\r\n        final LoggerContext ctx = (LoggerContext) LogManager.getContext(false);\r\n        final Configuration config = ctx.getConfiguration();\r\n\r\n        \r\n        log.info(&quot;Before altering the appender!&quot;);\r\n        \r\n        LoggerConfig rootLoggerConfig = config.getLoggers().get(&quot;&quot;);\r\n        rootLoggerConfig.removeAppender(&quot;logFile&quot;);\r\n        rootLoggerConfig.addAppender(config.getAppender(&quot;logFile&quot;), Level.WARN, null);\r\n        ctx.updateLoggers();\r\n        \r\n        log.info(&quot;After altering the appender!&quot;);\r\n        log.warn(&quot;After altering the appender!&quot;);\r\n    }\r\n\r\n}\r\n```\r\n\r\n**Output:**\r\n```\r\n2017-04-13 21:04:20.892 [main] INFO  example.Log4j2SetAppenderRefLvlMain - Before altering the appender!\r\n2017-04-13 21:04:20.895 [main] WARN  example.Log4j2SetAppenderRefLvlMain - After altering the appender!\r\n```\r\n\r\nNotice how only the `WARN` level message is printed to the log after we changed the appender level to `WARN`. This proves that it works.\r\n","title":"How can I change the AppenderRef Level in log4j2 programmatically?","body":"<p>You have to do it by removing the appender and then adding it again with the desired level.</p>\n<p><strong>Example <code>log4j2.xml</code>:</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;WARN&quot;&gt;\n    &lt;Appenders&gt;\n        &lt;File name=&quot;logFile&quot; fileName=&quot;log.txt&quot; immediateFlush=&quot;false&quot;\n              append=&quot;true&quot;&gt;\n            &lt;PatternLayout\n                pattern=&quot;%d{yyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot;/&gt;\n        &lt;/File&gt;\n    &lt;/Appenders&gt;\n\n    &lt;Loggers&gt;\n        &lt;Root level=&quot;trace&quot;&gt;\n            &lt;AppenderRef ref=&quot;logFile&quot; level=&quot;info&quot;/&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<p><strong>Example code:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package example;\n\nimport org.apache.logging.log4j.Level;\nimport org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\nimport org.apache.logging.log4j.core.LoggerContext;\nimport org.apache.logging.log4j.core.config.Configuration;\nimport org.apache.logging.log4j.core.config.LoggerConfig;\n\npublic class Log4j2SetAppenderRefLvlMain {\n    private static final Logger log = LogManager.getLogger();\n    \n    public static void main(String[] args) {\n        final LoggerContext ctx = (LoggerContext) LogManager.getContext(false);\n        final Configuration config = ctx.getConfiguration();\n\n        \n        log.info(&quot;Before altering the appender!&quot;);\n        \n        LoggerConfig rootLoggerConfig = config.getLoggers().get(&quot;&quot;);\n        rootLoggerConfig.removeAppender(&quot;logFile&quot;);\n        rootLoggerConfig.addAppender(config.getAppender(&quot;logFile&quot;), Level.WARN, null);\n        ctx.updateLoggers();\n        \n        log.info(&quot;After altering the appender!&quot;);\n        log.warn(&quot;After altering the appender!&quot;);\n    }\n\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>2017-04-13 21:04:20.892 [main] INFO  example.Log4j2SetAppenderRefLvlMain - Before altering the appender!\n2017-04-13 21:04:20.895 [main] WARN  example.Log4j2SetAppenderRefLvlMain - After altering the appender!\n</code></pre>\n<p>Notice how only the <code>WARN</code> level message is printed to the log after we changed the appender level to <code>WARN</code>. This proves that it works.</p>\n"}],"owner":{"account_id":2201328,"reputation":710,"user_id":1945654,"accept_rate":77,"display_name":"Michael Langhammer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7112,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":43404258,"answer_count":1,"score":8,"last_activity_date":1659605716,"creation_date":1489009075,"question_id":42682380,"body_markdown":"How can I change the `AppenderRef` `Level` in log4j2?\r\n\r\nThere is a  [stackoverflow question](https://stackoverflow.com/questions/41427352/) (with answer) where this was solved non-programmatically. I want the same but programmatically instead. There is only a get method in `AppenderRef` to retrieve the `Level` but no method to set it.\r\n\r\nSo, is there any way to set the `Level` in the `AppenderRef` in log4j2 programmatically?","title":"How can I change the AppenderRef Level in log4j2 programmatically?","body":"<p>How can I change the <code>AppenderRef</code> <code>Level</code> in log4j2?</p>\n\n<p>There is a  <a href=\"https://stackoverflow.com/questions/41427352/\">stackoverflow question</a> (with answer) where this was solved non-programmatically. I want the same but programmatically instead. There is only a get method in <code>AppenderRef</code> to retrieve the <code>Level</code> but no method to set it.</p>\n\n<p>So, is there any way to set the <code>Level</code> in the <code>AppenderRef</code> in log4j2 programmatically?</p>\n"},{"tags":["java","performance-testing","benchmarking","microbenchmark","jmh"],"comments":[{"owner":{"account_id":379763,"reputation":29886,"user_id":733345,"display_name":"Joe"},"score":0,"creation_date":1659605122,"post_id":73144982,"comment_id":129335899,"body_markdown":"Do the methods have any observable side-effects? Why is it _not_ an acceptable optimisation to eliminate them?","body":"Do the methods have any observable side-effects? Why is it <i>not</i> an acceptable optimisation to eliminate them?"}],"answers":[{"tags":[],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659605491,"creation_date":1659605136,"answer_id":73233427,"question_id":73144982,"body_markdown":"If your method accepts any parameters you could try this:\r\n```java\r\n@Benchmark\r\npublic Object test() {\r\n  yourVoidMethod(param);\r\n  return param;\r\n}\r\n```\r\nCompiler might think that `param` is somehow modified within tested method and won&#39;t throw the code away.\r\n\r\nAlso for some void methods you can do smth like:\r\n```java\r\n@Benchmark\r\npublic int test() {\r\n  yourVoidMethod();\r\n  return hashCode();\r\n}\r\n```\r\nFor me it worked for cases like\r\n```java\r\n@Benchmark\r\npublic int sleep() {\r\n  while (run) {\r\n    LockSupport.parkNanos(TimeUnit.MICROSECONDS.toNanos(pause));\r\n  }\r\n  return hashCode();\r\n}\r\n```\r\nbut this is quite a special case.\r\n\r\nThe best approach is to redesign your code in a way to return something from it.\r\n\r\n**UPD**: You could also try to extend from the class encapsulating your code in order to somehow use `Blackhole` inside of your code, e.g. via overriding or overloading a method. See https://github.com/openjdk/jmh/blob/master/jmh-samples/src/main/java/org/openjdk/jmh/samples/JMHSample_28_BlackholeHelpers.java ","title":"Testing void methods with JMH","body":"<p>If your method accepts any parameters you could try this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Benchmark\npublic Object test() {\n  yourVoidMethod(param);\n  return param;\n}\n</code></pre>\n<p>Compiler might think that <code>param</code> is somehow modified within tested method and won't throw the code away.</p>\n<p>Also for some void methods you can do smth like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Benchmark\npublic int test() {\n  yourVoidMethod();\n  return hashCode();\n}\n</code></pre>\n<p>For me it worked for cases like</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Benchmark\npublic int sleep() {\n  while (run) {\n    LockSupport.parkNanos(TimeUnit.MICROSECONDS.toNanos(pause));\n  }\n  return hashCode();\n}\n</code></pre>\n<p>but this is quite a special case.</p>\n<p>The best approach is to redesign your code in a way to return something from it.</p>\n<p><strong>UPD</strong>: You could also try to extend from the class encapsulating your code in order to somehow use <code>Blackhole</code> inside of your code, e.g. via overriding or overloading a method. See <a href=\"https://github.com/openjdk/jmh/blob/master/jmh-samples/src/main/java/org/openjdk/jmh/samples/JMHSample_28_BlackholeHelpers.java\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jmh/blob/master/jmh-samples/src/main/java/org/openjdk/jmh/samples/JMHSample_28_BlackholeHelpers.java</a></p>\n"}],"owner":{"account_id":2860492,"reputation":595,"user_id":2455862,"accept_rate":31,"display_name":"user2455862"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":389,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1659605491,"creation_date":1658958604,"question_id":73144982,"body_markdown":"I&#39;m testing bunch of void methods with JMH. I know the importance of using blackhole to prevent dead code elimination. But what about void methods? I cannot consume them with blackholes, will they be properly tested?","title":"Testing void methods with JMH","body":"<p>I'm testing bunch of void methods with JMH. I know the importance of using blackhole to prevent dead code elimination. But what about void methods? I cannot consume them with blackholes, will they be properly tested?</p>\n"},{"tags":["java","gatling"],"answers":[{"tags":[],"owner":{"account_id":6852429,"reputation":6319,"user_id":5269205,"display_name":"St&#233;phane LANDELLE"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1659605301,"creation_date":1659605301,"answer_id":73233466,"question_id":73230692,"body_markdown":"Polling doesn&#39;t support checks atm. This was missing from the documentation. I just [pushed a commit][1] to mention it.\r\n\r\nThen, I&#39;m not sure what you&#39;re trying to achieve here.\r\n\r\n`poll` works as a non-blocking background task.\r\n\r\nIt looks to me what you&#39;re trying to achieve is *&quot;as long as the request doesn&#39;t return some status, wait some time and try again&quot;*, hence some blocking logic.\r\nThis is something you should implement with a conditional loop such as `asLongAs` or `doWhile`, see https://gatling.io/docs/gatling/reference/current/core/scenario/#aslongas.\r\n\r\n\r\n  [1]: https://github.com/gatling/gatling/commit/ac191e335b10c106a8f168172214535b978710d2","title":"gatling: respons body not saving when polling http request","body":"<p>Polling doesn't support checks atm. This was missing from the documentation. I just <a href=\"https://github.com/gatling/gatling/commit/ac191e335b10c106a8f168172214535b978710d2\" rel=\"nofollow noreferrer\">pushed a commit</a> to mention it.</p>\n<p>Then, I'm not sure what you're trying to achieve here.</p>\n<p><code>poll</code> works as a non-blocking background task.</p>\n<p>It looks to me what you're trying to achieve is <em>&quot;as long as the request doesn't return some status, wait some time and try again&quot;</em>, hence some blocking logic.\nThis is something you should implement with a conditional loop such as <code>asLongAs</code> or <code>doWhile</code>, see <a href=\"https://gatling.io/docs/gatling/reference/current/core/scenario/#aslongas\" rel=\"nofollow noreferrer\">https://gatling.io/docs/gatling/reference/current/core/scenario/#aslongas</a>.</p>\n"}],"owner":{"account_id":14700288,"reputation":89,"user_id":10616501,"display_name":"HudsonHornet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":212,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659605301,"creation_date":1659590541,"question_id":73230692,"body_markdown":"I&#39;m running stress test using gatling and java, so when i poll http request, response body not saving, but when i call http request directly from `exec(getState)` without `poll()` function, it saves.\r\nHere&#39;s my code:\r\n\r\n        HttpRequestActionBuilder getState =\r\n            http(&quot;Get state&quot;)\r\n                    .get(mainApiUrl + &quot;/users/&quot; + &quot;#{&quot; + INSTANCE_ID + &quot;}&quot;)\r\n                    .header(&quot;Authorization&quot;, &quot;Bearer &quot; + &quot;#{&quot; + AUTH_TOKEN + &quot;}&quot;)\r\n                    .check(status().is(200), jsonPath(&quot;$.metadata.frontendStatus&quot;).saveAs(FRONTEND_STATUS));\r\n\r\n\r\n        ChainBuilder startRequest =\r\n            feed(randomRequestBodyFeeder)\r\n                    .pause(1)\r\n                    .exec(authorize)\r\n                    .pause(Duration.ofSeconds(4))\r\n                    .exec(poll().every(Duration.ofSeconds(1)).exec(getState))\r\n                    .doIf(session -&gt; session.getString(FRONTEND_STATUS).equals(WAITING_FOR_CUSTOMER_APPLICATION)).then(\r\n                            exec(postApplication).pause(Duration.ofSeconds(5))\r\n                    ))\r\n                    .exec(poll().stop());\r\n\r\n\r\n ","title":"gatling: respons body not saving when polling http request","body":"<p>I'm running stress test using gatling and java, so when i poll http request, response body not saving, but when i call http request directly from <code>exec(getState)</code> without <code>poll()</code> function, it saves.\nHere's my code:</p>\n<pre><code>    HttpRequestActionBuilder getState =\n        http(&quot;Get state&quot;)\n                .get(mainApiUrl + &quot;/users/&quot; + &quot;#{&quot; + INSTANCE_ID + &quot;}&quot;)\n                .header(&quot;Authorization&quot;, &quot;Bearer &quot; + &quot;#{&quot; + AUTH_TOKEN + &quot;}&quot;)\n                .check(status().is(200), jsonPath(&quot;$.metadata.frontendStatus&quot;).saveAs(FRONTEND_STATUS));\n\n\n    ChainBuilder startRequest =\n        feed(randomRequestBodyFeeder)\n                .pause(1)\n                .exec(authorize)\n                .pause(Duration.ofSeconds(4))\n                .exec(poll().every(Duration.ofSeconds(1)).exec(getState))\n                .doIf(session -&gt; session.getString(FRONTEND_STATUS).equals(WAITING_FOR_CUSTOMER_APPLICATION)).then(\n                        exec(postApplication).pause(Duration.ofSeconds(5))\n                ))\n                .exec(poll().stop());\n</code></pre>\n"},{"tags":["java","android","kotlin","text-to-speech"],"answers":[{"tags":[],"owner":{"account_id":25966241,"reputation":203,"user_id":19682156,"display_name":"Desmond"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1659605293,"creation_date":1659604995,"answer_id":73233383,"question_id":73232605,"body_markdown":"Step 1: Extend your activity with TextToSpeech.OnInitListener.\r\n\r\n    class MainActivity : AppCompatActivity(),TextToSpeech.OnInitListener {\r\n\r\n        private var tts: TextToSpeech? = null\r\n\r\nStep 2: Set Language\r\n\r\n    override fun onInit(status: Int) {\r\n        if (status == TextToSpeech.SUCCESS) {\r\n            val result = tts!!.setLanguage(Locale.US)\r\n  \r\n            if (result == TextToSpeech.LANG_MISSING_DATA || result == TextToSpeech.LANG_NOT_SUPPORTED) {\r\n                Log.e(&quot;TTS&quot;,&quot;The Language not supported!&quot;)\r\n            } else {\r\n               //Do something such as enable the button\r\n            }\r\n        }\r\n    }\r\n\r\nStep 3: Initialise TextToSpeech class variable in onCreate.\r\n\r\n    tts = TextToSpeech(this, this)\r\n\r\nStep 4: speak the text when you click it.\r\n\r\n    vh.miketv.setOnClickListener {\r\n                val text: String = &quot;Hello&quot;\r\n                tts!!.speak(text, TextToSpeech.QUEUE_FLUSH, null,&quot;&quot;)\r\n            }\r\n            return view\r\n\r\nStep 5: Stop TextToSpeech Engine when your activity is destroyed.\r\n\r\n    public override fun onDestroy() {\r\n      // Shutdown TTS\r\n      if (tts != null) {\r\n        tts!!.stop()\r\n        tts!!.shutdown()\r\n      }\r\n      super.onDestroy()\r\n    }","title":"textToSpeech - unresolved reference in Kotlin","body":"<p>Step 1: Extend your activity with TextToSpeech.OnInitListener.</p>\n<pre><code>class MainActivity : AppCompatActivity(),TextToSpeech.OnInitListener {\n\n    private var tts: TextToSpeech? = null\n</code></pre>\n<p>Step 2: Set Language</p>\n<pre><code>override fun onInit(status: Int) {\n    if (status == TextToSpeech.SUCCESS) {\n        val result = tts!!.setLanguage(Locale.US)\n\n        if (result == TextToSpeech.LANG_MISSING_DATA || result == TextToSpeech.LANG_NOT_SUPPORTED) {\n            Log.e(&quot;TTS&quot;,&quot;The Language not supported!&quot;)\n        } else {\n           //Do something such as enable the button\n        }\n    }\n}\n</code></pre>\n<p>Step 3: Initialise TextToSpeech class variable in onCreate.</p>\n<pre><code>tts = TextToSpeech(this, this)\n</code></pre>\n<p>Step 4: speak the text when you click it.</p>\n<pre><code>vh.miketv.setOnClickListener {\n            val text: String = &quot;Hello&quot;\n            tts!!.speak(text, TextToSpeech.QUEUE_FLUSH, null,&quot;&quot;)\n        }\n        return view\n</code></pre>\n<p>Step 5: Stop TextToSpeech Engine when your activity is destroyed.</p>\n<pre><code>public override fun onDestroy() {\n  // Shutdown TTS\n  if (tts != null) {\n    tts!!.stop()\n    tts!!.shutdown()\n  }\n  super.onDestroy()\n}\n</code></pre>\n"}],"owner":{"account_id":24622279,"reputation":32,"user_id":18522459,"display_name":"User2207"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73233383,"answer_count":1,"score":0,"last_activity_date":1659605293,"creation_date":1659601263,"question_id":73232605,"body_markdown":"I have been trying to implement textToSpeech on a microphone that you can press on, but the textToSpeech turns red and &quot;unresolved reference&quot; is displayed.\r\n\r\nHere is the code from the Main Activity:\r\n``` \r\nvh.miketv.setOnClickListener {\r\n                val text: String =\r\n                    celldata!![position].getText_eng().toString() + &quot;   &quot; + celldata[position].getText_spn()\r\n                textToSpeech.speak(text, QUEUE_FLUSH, null)\r\n            }\r\n            return view\r\n```\r\n\r\nAlso, here is everything that I have imported:\r\n``` \r\nimport android.content.Intent\r\nimport android.os.Bundle\r\nimport android.os.CountDownTimer\r\nimport android.speech.tts.TextToSpeech\r\nimport android.speech.tts.TextToSpeech.*\r\nimport android.util.Log\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport android.widget.BaseAdapter\r\nimport android.widget.GridView\r\nimport android.widget.ImageView\r\nimport android.widget.TextView\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.cardview.widget.CardView\r\nimport main.com.cellappkotlin.model.CellDataBean\r\nimport java.util.*\r\n```\r\nI have also tried in Java, and it worked with the following code, but I can&#39;t figure it out how to make it work in Kotlin as well:\r\n ```\r\npublic void onClick(View view) {\r\n                    String text = celldata.get(i).getText_eng()+&quot;   &quot;+celldata.get(i).getText_spn();\r\n                    textToSpeech.speak(text,TextToSpeech.QUEUE_FLUSH,null);\r\n                }\r\n ```\r\nThe text to speech works generally in this app, I have implemented it somewhere else and everything was okay, but only in this particular case, when I want to press on that microphone, it doesn&#39;t seem to work.\r\n\r\nCould someone help me understand what is wrong, please?\r\nThank you very much.","title":"textToSpeech - unresolved reference in Kotlin","body":"<p>I have been trying to implement textToSpeech on a microphone that you can press on, but the textToSpeech turns red and &quot;unresolved reference&quot; is displayed.</p>\n<p>Here is the code from the Main Activity:</p>\n<pre><code>vh.miketv.setOnClickListener {\n                val text: String =\n                    celldata!![position].getText_eng().toString() + &quot;   &quot; + celldata[position].getText_spn()\n                textToSpeech.speak(text, QUEUE_FLUSH, null)\n            }\n            return view\n</code></pre>\n<p>Also, here is everything that I have imported:</p>\n<pre><code>import android.content.Intent\nimport android.os.Bundle\nimport android.os.CountDownTimer\nimport android.speech.tts.TextToSpeech\nimport android.speech.tts.TextToSpeech.*\nimport android.util.Log\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\nimport android.widget.BaseAdapter\nimport android.widget.GridView\nimport android.widget.ImageView\nimport android.widget.TextView\nimport androidx.appcompat.app.AppCompatActivity\nimport androidx.cardview.widget.CardView\nimport main.com.cellappkotlin.model.CellDataBean\nimport java.util.*\n</code></pre>\n<p>I have also tried in Java, and it worked with the following code, but I can't figure it out how to make it work in Kotlin as well:</p>\n<pre><code>public void onClick(View view) {\n                   String text = celldata.get(i).getText_eng()+&quot;   &quot;+celldata.get(i).getText_spn();\n                   textToSpeech.speak(text,TextToSpeech.QUEUE_FLUSH,null);\n               }\n</code></pre>\n<p>The text to speech works generally in this app, I have implemented it somewhere else and everything was okay, but only in this particular case, when I want to press on that microphone, it doesn't seem to work.</p>\n<p>Could someone help me understand what is wrong, please?\nThank you very much.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","naturalid"],"comments":[{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1659564429,"post_id":73228235,"comment_id":129327465,"body_markdown":"Why would you use unwrap in the first place","body":"Why would you use unwrap in the first place"},{"owner":{"display_name":"user19600914"},"score":0,"creation_date":1659593148,"post_id":73228235,"comment_id":129332071,"body_markdown":"@Antonio See my update","body":"@Antonio See my update"}],"answers":[{"tags":[],"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659605219,"creation_date":1659605219,"answer_id":73233444,"question_id":73228235,"body_markdown":"I think the [Hibernate ORM documentation][1] explains the use of `@NaturalId` pretty well:\r\n\r\n&gt; Natural ids represent domain model unique identifiers that have a meaning in the real world too. Even if a natural id does not make a good primary key (surrogate keys being usually preferred), it’s still useful to tell Hibernate about it.\r\n\r\nWhen you mark a field as natural id, Hibernate creates a unique constraint for it in the database (if you generate it at start up) and [caching using the field as key becomes possible][2]. You can also use `@NaturalIdCache` to use the second-level cache. In general, it should lead to better performance when looking for the entity using the field.\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/5.6/userguide/html_single/Hibernate_User_Guide.html#naturalid\r\n  [2]: https://docs.jboss.org/hibernate/orm/5.6/userguide/html_single/Hibernate_User_Guide.html#naturalid-mutability-caching","title":"Why should I use @NaturalId?","body":"<p>I think the <a href=\"https://docs.jboss.org/hibernate/orm/5.6/userguide/html_single/Hibernate_User_Guide.html#naturalid\" rel=\"nofollow noreferrer\">Hibernate ORM documentation</a> explains the use of <code>@NaturalId</code> pretty well:</p>\n<blockquote>\n<p>Natural ids represent domain model unique identifiers that have a meaning in the real world too. Even if a natural id does not make a good primary key (surrogate keys being usually preferred), it’s still useful to tell Hibernate about it.</p>\n</blockquote>\n<p>When you mark a field as natural id, Hibernate creates a unique constraint for it in the database (if you generate it at start up) and <a href=\"https://docs.jboss.org/hibernate/orm/5.6/userguide/html_single/Hibernate_User_Guide.html#naturalid-mutability-caching\" rel=\"nofollow noreferrer\">caching using the field as key becomes possible</a>. You can also use <code>@NaturalIdCache</code> to use the second-level cache. In general, it should lead to better performance when looking for the entity using the field.</p>\n"}],"owner":{"display_name":"user19600914"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":463,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73233444,"answer_count":1,"score":0,"last_activity_date":1659605219,"creation_date":1659563925,"question_id":73228235,"body_markdown":"When I am looking for `@NaturalId` and trying to understand what the advantages of using it is. I am reading several articles like [this](https://vladmihalcea.com/the-best-way-to-map-a-naturalid-business-key-with-jpa-and-hibernate/) article.\r\n\r\n\r\n```\r\n@Entity(name = &quot;Post&quot;)\r\n@Table(name = &quot;post&quot;)\r\n@org.hibernate.annotations.Cache(\r\n    usage = CacheConcurrencyStrategy.READ_WRITE\r\n)\r\n@NaturalIdCache\r\npublic class Post {\r\n \r\n    @Id\r\n    @GeneratedValue\r\n    private Long id;\r\n \r\n    private String title;\r\n \r\n    @NaturalId\r\n    @Column(nullable = false, unique = true)\r\n    private String slug;\r\n \r\n    //Getters and setters omitted for brevity\r\n \r\n    @Override\r\n    public boolean equals(Object o) {\r\n        if (this == o) return true;\r\n        if (o == null || getClass() != o.getClass())\r\n            return false;\r\n        Post post = (Post) o;\r\n        return Objects.equals(slug, post.slug);\r\n    }\r\n \r\n    @Override\r\n    public int hashCode() {\r\n        return Objects.hash(slug);\r\n    }\r\n}\r\n```\r\n\r\n&lt;br/&gt;\r\n\r\nAnd when retrieving record, the following approach is used:\r\n\r\n```\r\nString slug = &quot;high-performance-java-persistence&quot;;\r\n \r\nPost post = entityManager.unwrap(Session.class)\r\n    .bySimpleNaturalId(Post.class)\r\n    .load(slug);\r\n```\r\n\r\nI am wondering that, what is I remove `@NaturalId` from the `slug` field and retrieve the record via `bySlug` method? As far as I see, `@NaturalId` acts as an index and may help to access the record faster I think. Is that true? Could you explain the benefits of it? ","title":"Why should I use @NaturalId?","body":"<p>When I am looking for <code>@NaturalId</code> and trying to understand what the advantages of using it is. I am reading several articles like <a href=\"https://vladmihalcea.com/the-best-way-to-map-a-naturalid-business-key-with-jpa-and-hibernate/\" rel=\"nofollow noreferrer\">this</a> article.</p>\n<pre><code>@Entity(name = &quot;Post&quot;)\n@Table(name = &quot;post&quot;)\n@org.hibernate.annotations.Cache(\n    usage = CacheConcurrencyStrategy.READ_WRITE\n)\n@NaturalIdCache\npublic class Post {\n \n    @Id\n    @GeneratedValue\n    private Long id;\n \n    private String title;\n \n    @NaturalId\n    @Column(nullable = false, unique = true)\n    private String slug;\n \n    //Getters and setters omitted for brevity\n \n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass())\n            return false;\n        Post post = (Post) o;\n        return Objects.equals(slug, post.slug);\n    }\n \n    @Override\n    public int hashCode() {\n        return Objects.hash(slug);\n    }\n}\n</code></pre>\n<br/>\n<p>And when retrieving record, the following approach is used:</p>\n<pre><code>String slug = &quot;high-performance-java-persistence&quot;;\n \nPost post = entityManager.unwrap(Session.class)\n    .bySimpleNaturalId(Post.class)\n    .load(slug);\n</code></pre>\n<p>I am wondering that, what is I remove <code>@NaturalId</code> from the <code>slug</code> field and retrieve the record via <code>bySlug</code> method? As far as I see, <code>@NaturalId</code> acts as an index and may help to access the record faster I think. Is that true? Could you explain the benefits of it?</p>\n"},{"tags":["java","android","numberpicker"],"answers":[{"tags":[],"owner":{"display_name":"user5294144"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1535459182,"creation_date":1535394692,"answer_id":52045096,"question_id":51403083,"body_markdown":"My [ScrollPicker][1] library could be of help here but unfortunately it can&#39;t have the &#39;selector wheel&#39; &#39;wrapped&#39;, so no looped display of the list is available.  \r\nWhile you can&#39;t set the scrolling speed from code, you don&#39;t have to, because you can get to the end of those 60 items in 1 swipe. This is the reason why I think it still might be suitable for you. You can control your swipe speed by the velocity you do on your swipes.  \r\n\r\nHere&#39;s what you have to do:  \r\n1. Use ScrollPicker instead of NumberPicker  \r\n2. Set your Collection in code with setItems(..). No setMinValue, setMaxValue or conversion to Strings is necessary, just set your int Collection.\r\n  [1]: https://github.com/tomeeeS/ScrollPickerDemo","title":"Changing NumberPicker scrolling speed","body":"<p>My <a href=\"https://github.com/tomeeeS/ScrollPickerDemo\" rel=\"nofollow noreferrer\">ScrollPicker</a> library could be of help here but unfortunately it can't have the 'selector wheel' 'wrapped', so no looped display of the list is available.<br>\nWhile you can't set the scrolling speed from code, you don't have to, because you can get to the end of those 60 items in 1 swipe. This is the reason why I think it still might be suitable for you. You can control your swipe speed by the velocity you do on your swipes.  </p>\n\n<p>Here's what you have to do:<br>\n1. Use ScrollPicker instead of NumberPicker<br>\n2. Set your Collection in code with setItems(..). No setMinValue, setMaxValue or conversion to Strings is necessary, just set your int Collection.</p>\n"},{"tags":[],"owner":{"account_id":13075870,"reputation":88,"user_id":9448028,"display_name":"Kevin Barron"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1535480388,"creation_date":1535480388,"answer_id":52064116,"question_id":51403083,"body_markdown":"I haven&#39;t been able to find a solution for this either but I just wanted to clarify on why \r\n\r\n    mSecondsPicker.setOnLongPressUpdateInterval(8000);\r\nisn&#39;t working the way you are expecting it to. The [description](https://developer.android.com/reference/android/widget/NumberPicker#setOnLongPressUpdateInterval(long)) for this method is &quot;Sets the speed at which the numbers be incremented and decremented when the up and down buttons are long pressed respectively.&quot; Meaning that rather than controlling swipe speed it only affects the scroll speed when you hold the up and down buttons. I believe the &quot;up and down&quot; buttons for the default NumberPicker are the numbers above and below the highlighted or selected number in the NumberPicker. \r\n\r\n","title":"Changing NumberPicker scrolling speed","body":"<p>I haven't been able to find a solution for this either but I just wanted to clarify on why </p>\n\n<pre><code>mSecondsPicker.setOnLongPressUpdateInterval(8000);\n</code></pre>\n\n<p>isn't working the way you are expecting it to. The <a href=\"https://developer.android.com/reference/android/widget/NumberPicker#setOnLongPressUpdateInterval(long)\" rel=\"nofollow noreferrer\">description</a> for this method is \"Sets the speed at which the numbers be incremented and decremented when the up and down buttons are long pressed respectively.\" Meaning that rather than controlling swipe speed it only affects the scroll speed when you hold the up and down buttons. I believe the \"up and down\" buttons for the default NumberPicker are the numbers above and below the highlighted or selected number in the NumberPicker. </p>\n"},{"tags":[],"owner":{"account_id":3477700,"reputation":42367,"user_id":2910520,"accept_rate":100,"display_name":"MatPag"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1535481388,"creation_date":1535481017,"answer_id":52064245,"question_id":51403083,"body_markdown":"There is no public way to access friction level in the default `NumberPicker` widget.\r\n\r\nYou can use this custom [NumberPickerView][1].\r\nInstallation instructions in english are [here][2].\r\n\r\nIt does exactly what you want with the method below to control friction level:\r\n\r\n    //double the default scroll friction level\r\n    mNumberPickerView.setFriction(2 * ViewConfiguration.get(mContext).getScrollFriction());\r\n\r\n&gt; The default scroll friction value is 0.015f and can be found [here][3]\r\n\r\n\r\n  [1]: https://github.com/Carbs0126/NumberPickerView/blob/master/README_English.md\r\n  [2]: https://github.com/Carbs0126/NumberPickerView/blob/master/README_English.md#how-to-use\r\n  [3]: https://github.com/aosp-mirror/platform_frameworks_base/blob/d720f7d67028b1564b96dee4fe3a988baad4d10d/core/java/android/view/ViewConfiguration.java#L229","title":"Changing NumberPicker scrolling speed","body":"<p>There is no public way to access friction level in the default <code>NumberPicker</code> widget.</p>\n\n<p>You can use this custom <a href=\"https://github.com/Carbs0126/NumberPickerView/blob/master/README_English.md\" rel=\"nofollow noreferrer\">NumberPickerView</a>.\nInstallation instructions in english are <a href=\"https://github.com/Carbs0126/NumberPickerView/blob/master/README_English.md#how-to-use\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>It does exactly what you want with the method below to control friction level:</p>\n\n<pre><code>//double the default scroll friction level\nmNumberPickerView.setFriction(2 * ViewConfiguration.get(mContext).getScrollFriction());\n</code></pre>\n\n<blockquote>\n  <p>The default scroll friction value is 0.015f and can be found <a href=\"https://github.com/aosp-mirror/platform_frameworks_base/blob/d720f7d67028b1564b96dee4fe3a988baad4d10d/core/java/android/view/ViewConfiguration.java#L229\" rel=\"nofollow noreferrer\">here</a></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":25895029,"reputation":11,"user_id":19621731,"display_name":"Dantic"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659604603,"creation_date":1659604119,"answer_id":73233180,"question_id":51403083,"body_markdown":"I have seen a few questions relating to this point (such as [here][1] and [here][2]).\r\n\r\nThe variable in NumberPicker associated with maximum scroll speed is set to private by default. Fortunately, we can use reflection to access and change these values. Why the class doesn&#39;t have a public method for altering something as basic as scroll speed is beyond me.\r\n\r\nDigging around in the source code for NumberPicker [here][3] I found this to be the `private int mMaximumFlingVelocity` variable. \r\n\r\nAssuming `numberPicker` is our NumberPicker:\r\n\r\n    // Can set this value to anything to modify our scroll speed, where a value\r\n    // between 0 and 1 makes the scroll speed slower, and anything greater than\r\n    // 1 makes it faster (e.g. a factor of 2 makes it twice as fast)\r\n    final double scrollSpeedFactor = 2;\r\n\r\n    // Surrounding by try/catch is required here because Class.getDeclaredField\r\n    // can throw a NoSuchFieldException and Field.get can throw an IllegalAccessException\r\n    try {\r\n        // Our private field is accessed with getDeclaredField\r\n        Field field = numberPicker.getClass().getDeclaredField(&quot;mMaximumFlingVelocity&quot;);\r\n\r\n        // We make the field accessible\r\n        field.setAccessible(true);\r\n\r\n        // Get the value\r\n        int maxVelocityValue = (int) field.get(numberPicker);\r\n\r\n        // Set a new velocity value based on our scrollSpeedFactor\r\n        int newVelocityValue = (int) (maxVelocityValue * scrollSpeedFactor);\r\n\r\n        // Set the new velocity\r\n        field.setInt(numberPicker, newVelocityValue);\r\n    } \r\n    catch (NoSuchFieldException | IllegalAccessException e) {\r\n        e.printStackTrace();\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/questions/31608635/change-the-fling-speed-for-androids-numberpicker-within-an-alertdialog\r\n  [2]: https://stackoverflow.com/questions/38705492/android-numberpicker-scroll-fling-faster\r\n  [3]: https://android.googlesource.com/platform/frameworks/base/+/jb-release/core/java/android/widget/NumberPicker.java","title":"Changing NumberPicker scrolling speed","body":"<p>I have seen a few questions relating to this point (such as <a href=\"https://stackoverflow.com/questions/31608635/change-the-fling-speed-for-androids-numberpicker-within-an-alertdialog\">here</a> and <a href=\"https://stackoverflow.com/questions/38705492/android-numberpicker-scroll-fling-faster\">here</a>).</p>\n<p>The variable in NumberPicker associated with maximum scroll speed is set to private by default. Fortunately, we can use reflection to access and change these values. Why the class doesn't have a public method for altering something as basic as scroll speed is beyond me.</p>\n<p>Digging around in the source code for NumberPicker <a href=\"https://android.googlesource.com/platform/frameworks/base/+/jb-release/core/java/android/widget/NumberPicker.java\" rel=\"nofollow noreferrer\">here</a> I found this to be the <code>private int mMaximumFlingVelocity</code> variable.</p>\n<p>Assuming <code>numberPicker</code> is our NumberPicker:</p>\n<pre><code>// Can set this value to anything to modify our scroll speed, where a value\n// between 0 and 1 makes the scroll speed slower, and anything greater than\n// 1 makes it faster (e.g. a factor of 2 makes it twice as fast)\nfinal double scrollSpeedFactor = 2;\n\n// Surrounding by try/catch is required here because Class.getDeclaredField\n// can throw a NoSuchFieldException and Field.get can throw an IllegalAccessException\ntry {\n    // Our private field is accessed with getDeclaredField\n    Field field = numberPicker.getClass().getDeclaredField(&quot;mMaximumFlingVelocity&quot;);\n\n    // We make the field accessible\n    field.setAccessible(true);\n\n    // Get the value\n    int maxVelocityValue = (int) field.get(numberPicker);\n\n    // Set a new velocity value based on our scrollSpeedFactor\n    int newVelocityValue = (int) (maxVelocityValue * scrollSpeedFactor);\n\n    // Set the new velocity\n    field.setInt(numberPicker, newVelocityValue);\n} \ncatch (NoSuchFieldException | IllegalAccessException e) {\n    e.printStackTrace();\n}\n</code></pre>\n"}],"owner":{"account_id":10597477,"reputation":386,"user_id":7805600,"display_name":"Claudiu Moise"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1980,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":4,"score":3,"last_activity_date":1659604603,"creation_date":1531919942,"question_id":51403083,"body_markdown":"Can&#39;t believe I haven&#39;t found an answered Stack Overflow post about this...\r\n\r\nI&#39;m making a timer where you select the time from a NumberPicker widget. The problem is that it takes 10-13 scrolls to get to the bottom\r\n\r\nI looked in the documentation but haven&#39;t found anything\r\n\r\n    String[] minsecvalues = new String[61];\r\n\r\n    for(int i=0; i &lt; minsecvalues.length; i++){\r\n            minsecvalues[i] = Integer.toString(i);\r\n    }\r\n\r\n    NumberPicker mSecondsPicker = (NumberPicker) v.findViewById(R.id.np_seconds_picker);\r\n    mSecondsPicker.setMaxValue(60);\r\n    mSecondsPicker.setMinValue(0);\r\n    mSecondsPicker.setWrapSelectorWheel(true);\r\n    mSecondsPicker.setDisplayedValues(minsecvalues);\r\n\r\n    //supposed to change scroll speed but doesn&#39;t work\r\n    mSecondsPicker.setOnLongPressUpdateInterval(8000);\r\n    //This method looks promising but my app crashes when I run it\r\n    //mSecondsPicker.scrollBy(0, 20);\r\n\r\n\r\n","title":"Changing NumberPicker scrolling speed","body":"<p>Can't believe I haven't found an answered Stack Overflow post about this...</p>\n\n<p>I'm making a timer where you select the time from a NumberPicker widget. The problem is that it takes 10-13 scrolls to get to the bottom</p>\n\n<p>I looked in the documentation but haven't found anything</p>\n\n<pre><code>String[] minsecvalues = new String[61];\n\nfor(int i=0; i &lt; minsecvalues.length; i++){\n        minsecvalues[i] = Integer.toString(i);\n}\n\nNumberPicker mSecondsPicker = (NumberPicker) v.findViewById(R.id.np_seconds_picker);\nmSecondsPicker.setMaxValue(60);\nmSecondsPicker.setMinValue(0);\nmSecondsPicker.setWrapSelectorWheel(true);\nmSecondsPicker.setDisplayedValues(minsecvalues);\n\n//supposed to change scroll speed but doesn't work\nmSecondsPicker.setOnLongPressUpdateInterval(8000);\n//This method looks promising but my app crashes when I run it\n//mSecondsPicker.scrollBy(0, 20);\n</code></pre>\n"},{"tags":["java","javafx","webview","get"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1496773997,"post_id":44387512,"comment_id":75794509,"body_markdown":"Have you looked at this [example](https://stackoverflow.com/q/13601435/230513)? If this is not a duplicate, please edit your question to include a [mcve] that shows your revised approach.","body":"Have you looked at this <a href=\"https://stackoverflow.com/q/13601435/230513\">example</a>? If this is not a duplicate, please edit your question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that shows your revised approach."},{"owner":{"account_id":10939762,"reputation":111,"user_id":8040055,"accept_rate":64,"display_name":"me_the_seven"},"score":0,"creation_date":1496822171,"post_id":44387512,"comment_id":75812350,"body_markdown":"Thanks for reply sir, But as you see it is a GET method, but it does not display anything in url, Just URL.\nthe web displays authentication popup and then go to 192.168.1.2/wireless","body":"Thanks for reply sir, But as you see it is a GET method, but it does not display anything in url, Just URL. the web displays authentication popup and then go to 192.168.1.2/wireless"}],"answers":[{"tags":[],"owner":{"account_id":10939762,"reputation":111,"user_id":8040055,"accept_rate":64,"display_name":"me_the_seven"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1496835525,"creation_date":1496835525,"answer_id":44411599,"question_id":44387512,"body_markdown":"I did it in this way, I created a class with a constructor, the all is in constructor, notice that my constructor what I wanted, you can change it, but the algorithm is this : \r\n\r\n        import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.net.Authenticator;\r\n    import java.net.InetAddress;\r\n    import java.net.MalformedURLException;\r\n    import java.net.PasswordAuthentication;\r\n    import java.net.URL;\r\n    import javafx.application.Platform;\r\n    import javafx.embed.swing.JFXPanel;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.layout.BorderPane;\r\n    import javafx.scene.web.WebView;\r\n    import javax.swing.JFrame;\r\n    public class WebViewSample {\r\n    \t\r\n    \tpublic WebViewSample(String urlString, JFrame myFrame, JFXPanel myFXPanel) {\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t// Sets the authenticator that will be used by the networking code\r\n    \t\t    // when a proxy or an HTTP server asks for authentication.\r\n    \t\t\tAuthenticator.setDefault(new CustomAuthenticator());\r\n    \t\t\t\r\n    \t\t\tURL url = new URL(&quot;http://&quot; +urlString + &quot;/wireless&quot;);\r\n                                Platform.runLater(() -&gt; {\r\n                                BorderPane borderPane = new BorderPane();\r\n                                WebView webComponent = new WebView();\r\n          \r\n                                webComponent.getEngine().load(url.toString());\r\n    \r\n                                borderPane.setCenter(webComponent);\r\n                                Scene scene = new Scene(borderPane,450,450);\r\n                                myFXPanel.setScene(scene);\r\n                            });\r\n                        }\r\n    \t\tcatch (MalformedURLException e) {\r\n    \t\t\tSystem.out.println(&quot;Malformed URL: &quot; + e.getMessage());\r\n    \t\t}\r\n    \t\tcatch (IOException e) {\r\n    \t\t\tSystem.out.println(&quot;I/O Error: &quot; + e.getMessage());\r\n    \t\t}\t\t\r\n    \t}\t\r\n    \tpublic static class CustomAuthenticator extends Authenticator {\r\n    \t\t\r\n    \t\t// Called when password authorization is needed\r\n    \t\tprotected PasswordAuthentication getPasswordAuthentication() {\r\n    \t\t\t\r\n    \t\t\t// Get information about the request\r\n    \t\t\tString prompt = getRequestingPrompt();\r\n    \t\t\tString hostname = getRequestingHost();\r\n    \t\t\tInetAddress ipaddr = getRequestingSite();\r\n    \t\t\tint port = getRequestingPort();\r\n    \r\n    \t\t\tString username = &quot;myUserName&quot;;\r\n    \t\t\tString password = &quot;myPassword&quot;;\r\n    \t\t\t// Return the information (a data holder that is used by Authenticator)\r\n    \t\t\treturn new PasswordAuthentication(username, password.toCharArray());\t\t\t\r\n    \t\t}\t\t\r\n    \t}\r\n    }","title":"Display webview with basic authentication inside program","body":"<p>I did it in this way, I created a class with a constructor, the all is in constructor, notice that my constructor what I wanted, you can change it, but the algorithm is this : </p>\n\n<pre><code>    import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.net.Authenticator;\nimport java.net.InetAddress;\nimport java.net.MalformedURLException;\nimport java.net.PasswordAuthentication;\nimport java.net.URL;\nimport javafx.application.Platform;\nimport javafx.embed.swing.JFXPanel;\nimport javafx.scene.Scene;\nimport javafx.scene.layout.BorderPane;\nimport javafx.scene.web.WebView;\nimport javax.swing.JFrame;\npublic class WebViewSample {\n\n    public WebViewSample(String urlString, JFrame myFrame, JFXPanel myFXPanel) {\n\n        try {\n        // Sets the authenticator that will be used by the networking code\n            // when a proxy or an HTTP server asks for authentication.\n            Authenticator.setDefault(new CustomAuthenticator());\n\n            URL url = new URL(\"http://\" +urlString + \"/wireless\");\n                            Platform.runLater(() -&gt; {\n                            BorderPane borderPane = new BorderPane();\n                            WebView webComponent = new WebView();\n\n                            webComponent.getEngine().load(url.toString());\n\n                            borderPane.setCenter(webComponent);\n                            Scene scene = new Scene(borderPane,450,450);\n                            myFXPanel.setScene(scene);\n                        });\n                    }\n        catch (MalformedURLException e) {\n            System.out.println(\"Malformed URL: \" + e.getMessage());\n        }\n        catch (IOException e) {\n            System.out.println(\"I/O Error: \" + e.getMessage());\n        }       \n    }   \n    public static class CustomAuthenticator extends Authenticator {\n\n        // Called when password authorization is needed\n        protected PasswordAuthentication getPasswordAuthentication() {\n\n            // Get information about the request\n            String prompt = getRequestingPrompt();\n            String hostname = getRequestingHost();\n            InetAddress ipaddr = getRequestingSite();\n            int port = getRequestingPort();\n\n            String username = \"myUserName\";\n            String password = \"myPassword\";\n            // Return the information (a data holder that is used by Authenticator)\n            return new PasswordAuthentication(username, password.toCharArray());            \n        }       \n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10939762,"reputation":111,"user_id":8040055,"accept_rate":64,"display_name":"me_the_seven"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1212,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659604598,"creation_date":1496744765,"question_id":44387512,"body_markdown":"I have to display a `webpage` inside my `Java` software.( you can think it is one the page of a `Wireless Device` configuration)\r\nBut when Im gonna go to that page in browser,browser displays a `user` and `password` popup and I enter the `user` and `password` and go to that page.( notice that username is always root, but password can be different)\r\nNow I am gonna display the page from Java software, I could link the page and open the page via `Java`, But the host inside the wireless device displays : \r\n`401 Unauthorized`, The URL of the page I want to display is `http://192.168.1.2/Wireless`\r\nI used `Fiddler` to monitor its behavior, that URL is continuously reloading.\r\nAnd here is the Header of the Get method of that : \r\n\r\n    \r\n    GET /Wireless HTTP/1.1\r\n    Host: 192.168.1.2\r\n    User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:53.0) Gecko/20100101 Firefox/53.0\r\n    Accept: */*\r\n    Accept-Language: en-US,en;q=0.5\r\n    Accept-Encoding: gzip, deflate\r\n    Referer: http://192.168.1.2/Wireless\r\n    Authorization: Basic xxxxxxxxx\r\n    Connection: keep-alive\r\n    \r\n\r\nHow can I do that? With `HttpClient` ?\r\nDoes anybody knows how to do that? And give me a solution?\r\nOr a sample or anything can help me?|\r\nThanks.\r\n\r\nEDIT : \r\nHere is my code to display the webview : \r\n\r\n             myFrame.setSize(mainJTabbed.getSize());\r\n         myFrame.setLocationRelativeTo(mainJTabbed);\r\n        myFrame.setVisible(true);\r\n        myFrame.add(myFXPanel);    \r\n        Platform.runLater(() -&gt; {\r\n          BorderPane borderPane = new BorderPane();\r\n          WebView webComponent = new WebView();\r\n    \r\n          webComponent.getEngine().load(&quot;myURL&quot;);\r\n    \r\n          borderPane.setCenter(webComponent);\r\n          Scene scene = new Scene(borderPane,450,450);\r\n          myFXPanel.setScene(scene);\r\n    });\r\nAnd even it is a GET method, the user and password does not post via `URL`.","title":"Display webview with basic authentication inside program","body":"<p>I have to display a <code>webpage</code> inside my <code>Java</code> software.( you can think it is one the page of a <code>Wireless Device</code> configuration)\nBut when Im gonna go to that page in browser,browser displays a <code>user</code> and <code>password</code> popup and I enter the <code>user</code> and <code>password</code> and go to that page.( notice that username is always root, but password can be different)\nNow I am gonna display the page from Java software, I could link the page and open the page via <code>Java</code>, But the host inside the wireless device displays : \n<code>401 Unauthorized</code>, The URL of the page I want to display is <code>http://192.168.1.2/Wireless</code>\nI used <code>Fiddler</code> to monitor its behavior, that URL is continuously reloading.\nAnd here is the Header of the Get method of that : </p>\n\n<pre><code>GET /Wireless HTTP/1.1\nHost: 192.168.1.2\nUser-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:53.0) Gecko/20100101 Firefox/53.0\nAccept: */*\nAccept-Language: en-US,en;q=0.5\nAccept-Encoding: gzip, deflate\nReferer: http://192.168.1.2/Wireless\nAuthorization: Basic xxxxxxxxx\nConnection: keep-alive\n</code></pre>\n\n<p>How can I do that? With <code>HttpClient</code> ?\nDoes anybody knows how to do that? And give me a solution?\nOr a sample or anything can help me?|\nThanks.</p>\n\n<p>EDIT : \nHere is my code to display the webview : </p>\n\n<pre><code>         myFrame.setSize(mainJTabbed.getSize());\n     myFrame.setLocationRelativeTo(mainJTabbed);\n    myFrame.setVisible(true);\n    myFrame.add(myFXPanel);    \n    Platform.runLater(() -&gt; {\n      BorderPane borderPane = new BorderPane();\n      WebView webComponent = new WebView();\n\n      webComponent.getEngine().load(\"myURL\");\n\n      borderPane.setCenter(webComponent);\n      Scene scene = new Scene(borderPane,450,450);\n      myFXPanel.setScene(scene);\n});\n</code></pre>\n\n<p>And even it is a GET method, the user and password does not post via <code>URL</code>.</p>\n"},{"tags":["java","json","jackson","clone"],"answers":[{"tags":[],"owner":{"account_id":2379900,"reputation":4402,"user_id":2194119,"accept_rate":76,"display_name":"Rad"},"down_vote_count":2,"up_vote_count":23,"is_accepted":true,"score":21,"last_activity_date":1524474186,"creation_date":1524474186,"answer_id":49977118,"question_id":49903859,"body_markdown":"Answered by Tatu Saloranta:\r\n\r\n&gt; Second way should be bit more efficient since it only creates and uses\r\nlogical token stream but does not have to encode JSON and then decode (parse) it to/from token stream. So that is close to optimal regarding\r\nJackson.\r\n\r\n&gt; About the only thing to make it even more optimal would be to directly\r\nuse `TokenBuffer` (which is what Jackson itself uses for buffering). Something like:\r\n\r\n&gt;     TokenBuffer tb = new TokenBuffer(); // or one of factory methods\r\n    mapper.writeValue(tb, myPojo);\r\n    MyPojo copy = mapper.readValue(tb.asParser(), MyPojo.class);\r\n\r\n&gt; This would further eliminate construction and traversal of the tree model. I don&#39;t know how big a difference it&#39;ll make, but is not much more code.\r\n\r\n\r\nThanks Tatu :)","title":"Deep Copy using Jackson: String or JsonNode","body":"<p>Answered by Tatu Saloranta:</p>\n\n<blockquote>\n  <p>Second way should be bit more efficient since it only creates and uses\n  logical token stream but does not have to encode JSON and then decode (parse) it to/from token stream. So that is close to optimal regarding\n  Jackson.</p>\n  \n  <p>About the only thing to make it even more optimal would be to directly\n  use <code>TokenBuffer</code> (which is what Jackson itself uses for buffering). Something like:</p>\n\n<pre><code>TokenBuffer tb = new TokenBuffer(); // or one of factory methods\nmapper.writeValue(tb, myPojo);\nMyPojo copy = mapper.readValue(tb.asParser(), MyPojo.class);\n</code></pre>\n  \n  <p>This would further eliminate construction and traversal of the tree model. I don't know how big a difference it'll make, but is not much more code.</p>\n</blockquote>\n\n<p>Thanks Tatu :)</p>\n"},{"tags":[],"owner":{"account_id":384779,"reputation":605,"user_id":741519,"accept_rate":62,"display_name":"Shaik Md"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659604321,"creation_date":1659604321,"answer_id":73233221,"question_id":49903859,"body_markdown":" I have copied my &quot;valueNode&quot; during iteration and made a copy of it using ObjectMapper now &quot;copyJsonNode&quot; is the replica of &quot;valueNode&quot; which i need for further implementation.    \r\n\r\n      if (entry.getKey().equalsIgnoreCase(&quot;admin&quot;)) {\r\n\r\n                    JsonNode valueNode = entry.getValue();\r\n                    \r\n                    String copyjson = valueNode.toString();\r\n\r\n                    ObjectMapper objectMapper = new ObjectMapper();\r\n\r\n                    JsonNode copyJsonNode = objectMapper.readTree(copyjson);\r\n\r\n                   ....}","title":"Deep Copy using Jackson: String or JsonNode","body":"<p>I have copied my &quot;valueNode&quot; during iteration and made a copy of it using ObjectMapper now &quot;copyJsonNode&quot; is the replica of &quot;valueNode&quot; which i need for further implementation.</p>\n<pre><code>  if (entry.getKey().equalsIgnoreCase(&quot;admin&quot;)) {\n\n                JsonNode valueNode = entry.getValue();\n                \n                String copyjson = valueNode.toString();\n\n                ObjectMapper objectMapper = new ObjectMapper();\n\n                JsonNode copyJsonNode = objectMapper.readTree(copyjson);\n\n               ....}\n</code></pre>\n"}],"owner":{"account_id":2379900,"reputation":4402,"user_id":2194119,"accept_rate":76,"display_name":"Rad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21432,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":49977118,"answer_count":2,"score":15,"last_activity_date":1659604321,"creation_date":1524066224,"question_id":49903859,"body_markdown":"Objective: deep copy (or clone) of a Java object  \r\nOne of the suggested ways (almost everywhere) to do it is using Jackson:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    MyPojo myPojo = new MyPojo();\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    MyPojo newPojo = mapper.readValue(mapper.writeValueAsString(myPojo), MyPojo.class);\r\n\r\nQuestion: is the following better? in terms of performance? is there any drawbacks?\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    MyPojo myPojo = new MyPojo();\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    MyPojo newPojo = mapper.treeToValue(mapper.valueToTree(myPojo), MyPojo.class);\r\n","title":"Deep Copy using Jackson: String or JsonNode","body":"<p>Objective: deep copy (or clone) of a Java object<br>\nOne of the suggested ways (almost everywhere) to do it is using Jackson:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>MyPojo myPojo = new MyPojo();\nObjectMapper mapper = new ObjectMapper();\nMyPojo newPojo = mapper.readValue(mapper.writeValueAsString(myPojo), MyPojo.class);\n</code></pre>\n\n<p>Question: is the following better? in terms of performance? is there any drawbacks?</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>MyPojo myPojo = new MyPojo();\nObjectMapper mapper = new ObjectMapper();\nMyPojo newPojo = mapper.treeToValue(mapper.valueToTree(myPojo), MyPojo.class);\n</code></pre>\n"},{"tags":["java","windows","scheduled-tasks","windows-task-scheduler"],"answers":[{"tags":[],"owner":{"account_id":128166,"reputation":173,"user_id":3615209,"accept_rate":83,"display_name":"QStorm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659604288,"creation_date":1659604288,"answer_id":73233212,"question_id":70277899,"body_markdown":"I had the same issue. Unfortunately, I couldn&#39;t solve it with the task scheduler. I ended up moving away from the task scheduler and using another tool to schedule tasks.","title":"Java&#39;s jps cannot find task when run by task scheduler","body":"<p>I had the same issue. Unfortunately, I couldn't solve it with the task scheduler. I ended up moving away from the task scheduler and using another tool to schedule tasks.</p>\n"}],"owner":{"account_id":23589435,"reputation":1,"user_id":17627430,"display_name":"May T. Owens"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659604288,"creation_date":1638978820,"question_id":70277899,"body_markdown":"**Setup:**\r\n\r\nI have 2 batch files:\r\n1. runs java application (java -jar xyz.jar)\r\n2. search for given application and kills it: (for /f &quot;tokens=1&quot; %%i in (&#39;jps -m ^| find &quot;xyza&quot;&#39;) do ( taskkill /F /PID %%i ))\r\n\r\nWhen I run 1. and execute 2. from cmd everything works fine.\r\n\r\n**Problem:** When I run 1. from the task scheduler and execute 2. the jps won&#39;t find the application (jps does not find the application)\r\n\r\nI have multiple java applications so I cant do &quot;taskkill java.exe&quot; (as I need to kill just this one)\r\n\r\n**How to run *1.* so jps can &quot;see it&quot;?**\r\n\r\nI have found the same problem posted 7 years ago, however, the presented solutions do not work for me: https://stackoverflow.com/questions/26420003/batch-file-runs-manually-but-not-in-task-scheduler?newreg=1927b03c7c2547098bee0c9b3b469e85\r\n","title":"Java&#39;s jps cannot find task when run by task scheduler","body":"<p><strong>Setup:</strong></p>\n<p>I have 2 batch files:</p>\n<ol>\n<li>runs java application (java -jar xyz.jar)</li>\n<li>search for given application and kills it: (for /f &quot;tokens=1&quot; %%i in ('jps -m ^| find &quot;xyza&quot;') do ( taskkill /F /PID %%i ))</li>\n</ol>\n<p>When I run 1. and execute 2. from cmd everything works fine.</p>\n<p><strong>Problem:</strong> When I run 1. from the task scheduler and execute 2. the jps won't find the application (jps does not find the application)</p>\n<p>I have multiple java applications so I cant do &quot;taskkill java.exe&quot; (as I need to kill just this one)</p>\n<p><strong>How to run <em>1.</em> so jps can &quot;see it&quot;?</strong></p>\n<p>I have found the same problem posted 7 years ago, however, the presented solutions do not work for me: <a href=\"https://stackoverflow.com/questions/26420003/batch-file-runs-manually-but-not-in-task-scheduler?newreg=1927b03c7c2547098bee0c9b3b469e85\">Batch File runs manually but not in task scheduler</a></p>\n"},{"tags":["java","api","google-bigquery","google-cloud-storage","data-transfer"],"comments":[{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":0,"creation_date":1659600804,"post_id":73232476,"comment_id":129334438,"body_markdown":"Show us the code.","body":"Show us the code."},{"owner":{"account_id":24437311,"reputation":11,"user_id":18361426,"display_name":"Lakshmi_N"},"score":0,"creation_date":1659601293,"post_id":73232476,"comment_id":129334616,"body_markdown":"@M.Prokhorov Have added the code in description.","body":"@M.Prokhorov Have added the code in description."},{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":0,"creation_date":1659603252,"post_id":73232476,"comment_id":129335281,"body_markdown":"&quot;every 24 hours&quot; means it&#39;ll likely start at &quot;00:00&quot; in the next day after you created the transfer. How long did you wait before you concluded that your code doesn&#39;t work?","body":"&quot;every 24 hours&quot; means it&#39;ll likely start at &quot;00:00&quot; in the next day after you created the transfer. How long did you wait before you concluded that your code doesn&#39;t work?"},{"owner":{"account_id":24437311,"reputation":11,"user_id":18361426,"display_name":"Lakshmi_N"},"score":0,"creation_date":1659603809,"post_id":73232476,"comment_id":129335462,"body_markdown":"@M. Prokhorov\nafter the first run , from the Run details in BQ data trasnfer logs that it has not found any files from the path I gave.","body":"@M. Prokhorov after the first run , from the Run details in BQ data trasnfer logs that it has not found any files from the path I gave."},{"owner":{"account_id":20131891,"reputation":1237,"user_id":14764038,"display_name":"99_m4n"},"score":0,"creation_date":1659736628,"post_id":73232476,"comment_id":129373959,"body_markdown":"This may help: instead of just passing the uri for the folder you should pass a wildcard like `String sourceUri = &quot;gs://dfp-bq/C:\\\\PROG_Reports/*&quot;;` (note the `*` at the end). See [Wildcard support for Cloud Storage URIs](https://cloud.google.com/bigquery/docs/batch-loading-data#load-wildcards).","body":"This may help: instead of just passing the uri for the folder you should pass a wildcard like <code>String sourceUri = &quot;gs:&#47;&#47;dfp-bq&#47;C:\\\\PROG_Reports&#47;*&quot;;</code> (note the <code>*</code> at the end). See <a href=\"https://cloud.google.com/bigquery/docs/batch-loading-data#load-wildcards\" rel=\"nofollow noreferrer\">Wildcard support for Cloud Storage URIs</a>."},{"owner":{"account_id":24437311,"reputation":11,"user_id":18361426,"display_name":"Lakshmi_N"},"score":0,"creation_date":1660543897,"post_id":73232476,"comment_id":129549129,"body_markdown":"@99_m4n,Tried this. didnt help. It works in the UI , but from the code it didnt.","body":"@99_m4n,Tried this. didnt help. It works in the UI , but from the code it didnt."}],"owner":{"account_id":24437311,"reputation":11,"user_id":18361426,"display_name":"Lakshmi_N"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659603945,"creation_date":1659600663,"question_id":73232476,"body_markdown":"When I tried to give the source URI of a folder inside my bucket (which has around 400 CSV files) in the Java program, it has not moved any files to BQ table. If I try with a single csv file , it moves. \r\n\r\n    package com.example.bigquerydatatransfer;\r\n    \r\n    import com.google.api.gax.rpc.ApiException;\r\n    import com.google.cloud.bigquery.datatransfer.v1.CreateTransferConfigRequest;\r\n    import com.google.cloud.bigquery.datatransfer.v1.DataTransferServiceClient;\r\n    import com.google.cloud.bigquery.datatransfer.v1.ProjectName;\r\n    import com.google.cloud.bigquery.datatransfer.v1.TransferConfig;\r\n    import com.google.protobuf.Struct;\r\n    import com.google.protobuf.Value;\r\n    import java.io.IOException;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    // Sample to create google cloud storage transfer config\r\n    public class Cloud_to_BQ {\r\n    \r\n      public static void main(String[] args) throws IOException {\r\n        \r\n        final String projectId = &quot;dfp-bq&quot;;\r\n        String datasetId = &quot;mytest1&quot;;\r\n        String tableId = &quot;PROG_DATA&quot;;\r\n        \r\n        String sourceUri = &quot;gs://dfp-bq/C:\\\\PROG_Reports&quot;;\r\n        String fileFormat = &quot;CSV&quot;;\r\n        String fieldDelimiter = &quot;,&quot;;\r\n        String skipLeadingRows = &quot;1&quot;;\r\n        Map&lt;String, Value&gt; params = new HashMap&lt;&gt;();\r\n        params.put(\r\n            &quot;destination_table_name_template&quot;, Value.newBuilder().setStringValue(tableId).build());\r\n        params.put(&quot;data_path_template&quot;, Value.newBuilder().setStringValue(sourceUri).build());\r\n        params.put(&quot;write_disposition&quot;, Value.newBuilder().setStringValue(&quot;APPEND&quot;).build());\r\n        params.put(&quot;file_format&quot;, Value.newBuilder().setStringValue(fileFormat).build());\r\n        params.put(&quot;field_delimiter&quot;, Value.newBuilder().setStringValue(fieldDelimiter).build());\r\n        params.put(&quot;skip_leading_rows&quot;, Value.newBuilder().setStringValue(skipLeadingRows).build());\r\n        TransferConfig transferConfig =\r\n            TransferConfig.newBuilder()\r\n                .setDestinationDatasetId(datasetId)\r\n                .setDisplayName(&quot;Trial_Run_PROG_DataTransfer&quot;)\r\n                .setDataSourceId(&quot;google_cloud_storage&quot;)\r\n                .setParams(Struct.newBuilder().putAllFields(params).build())\r\n                .setSchedule(&quot;every 24 hours&quot;)\r\n                .build();\r\n        createCloudStorageTransfer(projectId, transferConfig);\r\n      }\r\n    \r\n      public static void createCloudStorageTransfer(String projectId, TransferConfig transferConfig)\r\n          throws IOException {\r\n        try (DataTransferServiceClient client = DataTransferServiceClient.create()) {\r\n          ProjectName parent = ProjectName.of(projectId);\r\n          CreateTransferConfigRequest request =\r\n              CreateTransferConfigRequest.newBuilder()\r\n                  .setParent(parent.toString())\r\n                  .setTransferConfig(transferConfig)\r\n                  .build();\r\n          TransferConfig config = client.createTransferConfig(request);\r\n          System.out.println(&quot;Cloud storage transfer created successfully :&quot; + config.getName());\r\n        } catch (ApiException ex) {\r\n          System.out.print(&quot;Cloud storage transfer was not created.&quot; + ex.toString());\r\n        }\r\n      }\r\n    }\r\n\r\nIs there any way I can move all the files to the BQ table at a stretch?\r\n\r\n\r\n2022-08-04T07:27:50.185847509ZNo files found matching: &quot;gs://dfp-bq/C:\\PROG_Reports&quot; - This is the BQ logs for the Run.","title":"Is it possible to transfer a folder from GCS to Bigquery using Java API","body":"<p>When I tried to give the source URI of a folder inside my bucket (which has around 400 CSV files) in the Java program, it has not moved any files to BQ table. If I try with a single csv file , it moves.</p>\n<pre><code>package com.example.bigquerydatatransfer;\n\nimport com.google.api.gax.rpc.ApiException;\nimport com.google.cloud.bigquery.datatransfer.v1.CreateTransferConfigRequest;\nimport com.google.cloud.bigquery.datatransfer.v1.DataTransferServiceClient;\nimport com.google.cloud.bigquery.datatransfer.v1.ProjectName;\nimport com.google.cloud.bigquery.datatransfer.v1.TransferConfig;\nimport com.google.protobuf.Struct;\nimport com.google.protobuf.Value;\nimport java.io.IOException;\nimport java.util.HashMap;\nimport java.util.Map;\n\n// Sample to create google cloud storage transfer config\npublic class Cloud_to_BQ {\n\n  public static void main(String[] args) throws IOException {\n    \n    final String projectId = &quot;dfp-bq&quot;;\n    String datasetId = &quot;mytest1&quot;;\n    String tableId = &quot;PROG_DATA&quot;;\n    \n    String sourceUri = &quot;gs://dfp-bq/C:\\\\PROG_Reports&quot;;\n    String fileFormat = &quot;CSV&quot;;\n    String fieldDelimiter = &quot;,&quot;;\n    String skipLeadingRows = &quot;1&quot;;\n    Map&lt;String, Value&gt; params = new HashMap&lt;&gt;();\n    params.put(\n        &quot;destination_table_name_template&quot;, Value.newBuilder().setStringValue(tableId).build());\n    params.put(&quot;data_path_template&quot;, Value.newBuilder().setStringValue(sourceUri).build());\n    params.put(&quot;write_disposition&quot;, Value.newBuilder().setStringValue(&quot;APPEND&quot;).build());\n    params.put(&quot;file_format&quot;, Value.newBuilder().setStringValue(fileFormat).build());\n    params.put(&quot;field_delimiter&quot;, Value.newBuilder().setStringValue(fieldDelimiter).build());\n    params.put(&quot;skip_leading_rows&quot;, Value.newBuilder().setStringValue(skipLeadingRows).build());\n    TransferConfig transferConfig =\n        TransferConfig.newBuilder()\n            .setDestinationDatasetId(datasetId)\n            .setDisplayName(&quot;Trial_Run_PROG_DataTransfer&quot;)\n            .setDataSourceId(&quot;google_cloud_storage&quot;)\n            .setParams(Struct.newBuilder().putAllFields(params).build())\n            .setSchedule(&quot;every 24 hours&quot;)\n            .build();\n    createCloudStorageTransfer(projectId, transferConfig);\n  }\n\n  public static void createCloudStorageTransfer(String projectId, TransferConfig transferConfig)\n      throws IOException {\n    try (DataTransferServiceClient client = DataTransferServiceClient.create()) {\n      ProjectName parent = ProjectName.of(projectId);\n      CreateTransferConfigRequest request =\n          CreateTransferConfigRequest.newBuilder()\n              .setParent(parent.toString())\n              .setTransferConfig(transferConfig)\n              .build();\n      TransferConfig config = client.createTransferConfig(request);\n      System.out.println(&quot;Cloud storage transfer created successfully :&quot; + config.getName());\n    } catch (ApiException ex) {\n      System.out.print(&quot;Cloud storage transfer was not created.&quot; + ex.toString());\n    }\n  }\n}\n</code></pre>\n<p>Is there any way I can move all the files to the BQ table at a stretch?</p>\n<p>2022-08-04T07:27:50.185847509ZNo files found matching: &quot;gs://dfp-bq/C:\\PROG_Reports&quot; - This is the BQ logs for the Run.</p>\n"},{"tags":["java","maven","jaxb2"],"answers":[{"tags":[],"owner":{"account_id":250668,"reputation":12542,"user_id":527533,"accept_rate":97,"display_name":"Jan Vladimir Mostert"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1395664713,"creation_date":1395664257,"answer_id":22609446,"question_id":22608289,"body_markdown":"Fixed it by upgrading to version 1.6\r\n\r\n    &lt;plugin&gt; \r\n        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt; \r\n        &lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt; \r\n        &lt;version&gt;1.6&lt;/version&gt; \r\n    &lt;/plugin&gt;\r\n\r\nand \r\n\r\n    &lt;!-- JAXB GENERATOR PLUGIN --&gt;\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;1.6&lt;/version&gt;\r\n        ....\r\n\r\n\r\nFixed in version 1.6, in version 1.5 all execution blocks were using the same staleFile: http://jira.codehaus.org/browse/MJAXB-8","title":"jaxb2-maven-plugin only executing first execution","body":"<p>Fixed it by upgrading to version 1.6</p>\n\n<pre><code>&lt;plugin&gt; \n    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt; \n    &lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt; \n    &lt;version&gt;1.6&lt;/version&gt; \n&lt;/plugin&gt;\n</code></pre>\n\n<p>and </p>\n\n<pre><code>&lt;!-- JAXB GENERATOR PLUGIN --&gt;\n&lt;plugin&gt;\n    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;1.6&lt;/version&gt;\n    ....\n</code></pre>\n\n<p>Fixed in version 1.6, in version 1.5 all execution blocks were using the same staleFile: <a href=\"http://jira.codehaus.org/browse/MJAXB-8\">http://jira.codehaus.org/browse/MJAXB-8</a></p>\n"},{"tags":[],"owner":{"account_id":24072178,"reputation":31,"user_id":18047991,"display_name":"izaac"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659603886,"creation_date":1659603886,"answer_id":73233131,"question_id":22608289,"body_markdown":"I wasn&#39;t be able to use version 1.6 of the plugin to solve this problem (DataSource class not found, impossible to solve this even by using javax-annotation dependency as suggested in some posts)\r\n\r\nbut I found a way to make jaxb plugin 1.5 working on more than one execution :\r\nInside each \\&lt;configuration\\&gt; section defined in each \\&lt;execution\\&gt; section, define the following parameter :\r\n \r\n    &lt;execution&gt;\r\n        ....\r\n        &lt;configuration&gt;\r\n            ....\r\n            &lt;staleFile&gt;${project.build.directory}/some directories/staleFile&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/execution&gt;\r\n \r\nOf course, the absolute file path must be unique for each execution","title":"jaxb2-maven-plugin only executing first execution","body":"<p>I wasn't be able to use version 1.6 of the plugin to solve this problem (DataSource class not found, impossible to solve this even by using javax-annotation dependency as suggested in some posts)</p>\n<p>but I found a way to make jaxb plugin 1.5 working on more than one execution :\nInside each &lt;configuration&gt; section defined in each &lt;execution&gt; section, define the following parameter :</p>\n<pre><code>&lt;execution&gt;\n    ....\n    &lt;configuration&gt;\n        ....\n        &lt;staleFile&gt;${project.build.directory}/some directories/staleFile&gt;\n    &lt;/configuration&gt;\n&lt;/execution&gt;\n</code></pre>\n<p>Of course, the absolute file path must be unique for each execution</p>\n"}],"owner":{"account_id":250668,"reputation":12542,"user_id":527533,"accept_rate":97,"display_name":"Jan Vladimir Mostert"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9350,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":22609446,"answer_count":2,"score":12,"last_activity_date":1659603886,"creation_date":1395661025,"question_id":22608289,"body_markdown":"I&#39;m trying to convert multiple XSDs to POJOs in different packages using JAXB using the jaxb-maven plugin. I&#39;ve set it up to use multiple execution blocks, the first execution block executes, then I get a message saying: No changes detected in schema or binding files\r\n\r\nThis is an extract from my pom.xml:\r\n\r\n    ...\r\n    &lt;build&gt;\r\n        &lt;pluginManagement&gt;\r\n            &lt;plugin&gt; \r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt; \r\n                &lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt; \r\n                &lt;version&gt;1.5&lt;/version&gt; \r\n            &lt;/plugin&gt;\r\n        &lt;/pluginManagement&gt;\r\n        &lt;plugins&gt;\r\n    \t&lt;!-- JAXB GENERATOR PLUGIN --&gt;\r\n    \t&lt;plugin&gt;\r\n    \t    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n    \t    &lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt;\r\n    \t    &lt;version&gt;1.5&lt;/version&gt;\r\n    \t    &lt;executions&gt;                    \r\n    \t\t&lt;execution&gt;\r\n    \t\t    &lt;id&gt;Application0&lt;/id&gt;\r\n    \t\t    &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n    \t\t    &lt;goals&gt;\r\n    \t\t\t&lt;goal&gt;xjc&lt;/goal&gt;\r\n    \t\t    &lt;/goals&gt;\r\n    \t\t    &lt;configuration&gt;\r\n    \t\t\t&lt;schemaDirectory&gt;src/main/webapp/WEB-INF/xsd/version1&lt;/schemaDirectory&gt;\r\n    \t\t\t&lt;packageName&gt;za.co.mycee.application.model&lt;/packageName&gt;\r\n    \t\t\t&lt;outputDirectory&gt;${basedir}/src/main/java/&lt;/outputDirectory&gt;\r\n    \t\t\t&lt;clearOutputDir&gt;false&lt;/clearOutputDir&gt;\r\n    \t\t\t&lt;source&gt;1.5&lt;/source&gt;\r\n    \t\t\t&lt;target&gt;2.1&lt;/target&gt;\r\n    \t\t\t&lt;arguments&gt;-no-header&lt;/arguments&gt;\r\n    \t\t    &lt;/configuration&gt;\r\n    \t\t&lt;/execution&gt;                \r\n    \t\t&lt;execution&gt;\r\n    \t\t    &lt;id&gt;Application1&lt;/id&gt;\r\n    \t\t    &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n    \t\t    &lt;goals&gt;\r\n    \t\t\t&lt;goal&gt;xjc&lt;/goal&gt;\r\n    \t\t    &lt;/goals&gt;\r\n    \t\t    &lt;configuration&gt;\r\n    \t\t\t&lt;schemaDirectory&gt;src/main/webapp/WEB-INF/xsd/version1&lt;/schemaDirectory&gt;\r\n    \t\t\t&lt;packageName&gt;za.co.mycee.application.model.version1&lt;/packageName&gt;\r\n    \t\t\t&lt;outputDirectory&gt;${basedir}/src/main/java/&lt;/outputDirectory&gt;\r\n    \t\t\t&lt;clearOutputDir&gt;false&lt;/clearOutputDir&gt;\r\n    \t\t\t&lt;source&gt;1.5&lt;/source&gt;\r\n    \t\t\t&lt;target&gt;2.1&lt;/target&gt;\r\n    \t\t\t&lt;arguments&gt;-no-header&lt;/arguments&gt;\r\n    \t\t    &lt;/configuration&gt;\r\n    \t\t&lt;/execution&gt;\r\n    \t\t&lt;execution&gt;\r\n    \t\t    &lt;id&gt;Application2&lt;/id&gt;\r\n    \t\t    &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n    \t\t    &lt;goals&gt;\r\n    \t\t\t&lt;goal&gt;xjc&lt;/goal&gt;\r\n    \t\t    &lt;/goals&gt;\r\n    \t\t    &lt;configuration&gt;\r\n    \t\t\t&lt;schemaDirectory&gt;src/main/webapp/WEB-INF/xsd/version2&lt;/schemaDirectory&gt;\r\n    \t\t\t&lt;packageName&gt;za.co.mycee.application.model.version2&lt;/packageName&gt;\r\n    \t\t\t&lt;outputDirectory&gt;${basedir}/src/main/java/&lt;/outputDirectory&gt;\r\n    \t\t\t&lt;clearOutputDir&gt;false&lt;/clearOutputDir&gt;\r\n    \t\t\t&lt;source&gt;1.5&lt;/source&gt;\r\n    \t\t\t&lt;target&gt;2.1&lt;/target&gt;\r\n    \t\t\t&lt;arguments&gt;-no-header&lt;/arguments&gt;\r\n    \t\t    &lt;/configuration&gt;\r\n    \t\t&lt;/execution&gt;        \r\n    \t    &lt;/executions&gt;\r\n    \t&lt;/plugin&gt;\r\n        ...\r\n    &lt;/build&gt;\r\n    ....\r\n\r\n\r\nThis is the error message I&#39;m getting:\r\n\r\n    [INFO] --- jaxb2-maven-plugin:1.5:xjc (Application) @ mycee-application ---                                                                                                        \r\n    [INFO] Generating source...                                                                                                                                                  \r\n    [INFO] parsing a schema...                                                                                                                                                   \r\n    [INFO] compiling a schema...                                                                                                                                                 \r\n    [INFO] za/co/mycee/application/model/AddressType.java                                                                                                                          \r\n    [INFO] ...\r\n    [INFO] za/co/mycee/application/model/package-info.java                                                                                                                         \r\n    [INFO]\r\n    [INFO] --- jaxb2-maven-plugin:1.5:xjc (Application1) @ mycee-application ---\r\n    [INFO] No changes detected in schema or binding files - skipping source generation.\r\n    [INFO]\r\n    [INFO] --- jaxb2-maven-plugin:1.5:xjc (Application2) @ mycee-application ---\r\n    [INFO] No changes detected in schema or binding files - skipping source generation.\r\n\r\nIf I swap the execution blocks around, the first one always executes and I get the same message for the remaining two blocks.\r\n\r\nAny ideas on how to work around this?","title":"jaxb2-maven-plugin only executing first execution","body":"<p>I'm trying to convert multiple XSDs to POJOs in different packages using JAXB using the jaxb-maven plugin. I've set it up to use multiple execution blocks, the first execution block executes, then I get a message saying: No changes detected in schema or binding files</p>\n\n<p>This is an extract from my pom.xml:</p>\n\n<pre><code>...\n&lt;build&gt;\n    &lt;pluginManagement&gt;\n        &lt;plugin&gt; \n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt; \n            &lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt; \n            &lt;version&gt;1.5&lt;/version&gt; \n        &lt;/plugin&gt;\n    &lt;/pluginManagement&gt;\n    &lt;plugins&gt;\n    &lt;!-- JAXB GENERATOR PLUGIN --&gt;\n    &lt;plugin&gt;\n        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;1.5&lt;/version&gt;\n        &lt;executions&gt;                    \n        &lt;execution&gt;\n            &lt;id&gt;Application0&lt;/id&gt;\n            &lt;phase&gt;generate-sources&lt;/phase&gt;\n            &lt;goals&gt;\n            &lt;goal&gt;xjc&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n            &lt;schemaDirectory&gt;src/main/webapp/WEB-INF/xsd/version1&lt;/schemaDirectory&gt;\n            &lt;packageName&gt;za.co.mycee.application.model&lt;/packageName&gt;\n            &lt;outputDirectory&gt;${basedir}/src/main/java/&lt;/outputDirectory&gt;\n            &lt;clearOutputDir&gt;false&lt;/clearOutputDir&gt;\n            &lt;source&gt;1.5&lt;/source&gt;\n            &lt;target&gt;2.1&lt;/target&gt;\n            &lt;arguments&gt;-no-header&lt;/arguments&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;                \n        &lt;execution&gt;\n            &lt;id&gt;Application1&lt;/id&gt;\n            &lt;phase&gt;generate-sources&lt;/phase&gt;\n            &lt;goals&gt;\n            &lt;goal&gt;xjc&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n            &lt;schemaDirectory&gt;src/main/webapp/WEB-INF/xsd/version1&lt;/schemaDirectory&gt;\n            &lt;packageName&gt;za.co.mycee.application.model.version1&lt;/packageName&gt;\n            &lt;outputDirectory&gt;${basedir}/src/main/java/&lt;/outputDirectory&gt;\n            &lt;clearOutputDir&gt;false&lt;/clearOutputDir&gt;\n            &lt;source&gt;1.5&lt;/source&gt;\n            &lt;target&gt;2.1&lt;/target&gt;\n            &lt;arguments&gt;-no-header&lt;/arguments&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n        &lt;execution&gt;\n            &lt;id&gt;Application2&lt;/id&gt;\n            &lt;phase&gt;generate-sources&lt;/phase&gt;\n            &lt;goals&gt;\n            &lt;goal&gt;xjc&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n            &lt;schemaDirectory&gt;src/main/webapp/WEB-INF/xsd/version2&lt;/schemaDirectory&gt;\n            &lt;packageName&gt;za.co.mycee.application.model.version2&lt;/packageName&gt;\n            &lt;outputDirectory&gt;${basedir}/src/main/java/&lt;/outputDirectory&gt;\n            &lt;clearOutputDir&gt;false&lt;/clearOutputDir&gt;\n            &lt;source&gt;1.5&lt;/source&gt;\n            &lt;target&gt;2.1&lt;/target&gt;\n            &lt;arguments&gt;-no-header&lt;/arguments&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;        \n        &lt;/executions&gt;\n    &lt;/plugin&gt;\n    ...\n&lt;/build&gt;\n....\n</code></pre>\n\n<p>This is the error message I'm getting:</p>\n\n<pre><code>[INFO] --- jaxb2-maven-plugin:1.5:xjc (Application) @ mycee-application ---                                                                                                        \n[INFO] Generating source...                                                                                                                                                  \n[INFO] parsing a schema...                                                                                                                                                   \n[INFO] compiling a schema...                                                                                                                                                 \n[INFO] za/co/mycee/application/model/AddressType.java                                                                                                                          \n[INFO] ...\n[INFO] za/co/mycee/application/model/package-info.java                                                                                                                         \n[INFO]\n[INFO] --- jaxb2-maven-plugin:1.5:xjc (Application1) @ mycee-application ---\n[INFO] No changes detected in schema or binding files - skipping source generation.\n[INFO]\n[INFO] --- jaxb2-maven-plugin:1.5:xjc (Application2) @ mycee-application ---\n[INFO] No changes detected in schema or binding files - skipping source generation.\n</code></pre>\n\n<p>If I swap the execution blocks around, the first one always executes and I get the same message for the remaining two blocks.</p>\n\n<p>Any ideas on how to work around this?</p>\n"},{"tags":["java","hibernate","jpa","apache-camel"],"answers":[{"tags":[],"owner":{"account_id":1832,"reputation":11572,"user_id":2517,"accept_rate":82,"display_name":"Jeremy Ross"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659551906,"creation_date":1659551906,"answer_id":73226274,"question_id":73225737,"body_markdown":"You may need to tell the consumer to start a transaction\r\n\r\n```lang-java\r\nfrom(&quot;jpa://Data?transacted=true&quot;)\r\n```","title":"Send data via Apache Camel route to bootstrapped JPA database connections","body":"<p>You may need to tell the consumer to start a transaction</p>\n<pre class=\"lang-java prettyprint-override\"><code>from(&quot;jpa://Data?transacted=true&quot;)\n</code></pre>\n"}],"owner":{"account_id":17459269,"reputation":136,"user_id":12657338,"display_name":"Noel93"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659603835,"creation_date":1659549023,"question_id":73225737,"body_markdown":"I have a source database with tables ```DATA``` and ```DB_CONNECTIONS```. ```DB_CONNECTIONS``` contains a bunch of destination databases where I want to copy the ```DATA``` to via Apache Camel.\r\n\r\nTo programatically build my persistence units, I followed [Baeldung&#39;s JPA bootstrapping guide][1].\r\n\r\nI implemented my own ```PersistenceUnitInfo```:\r\n```\r\nimport java.net.URL;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Properties;\r\nimport javax.persistence.SharedCacheMode;\r\nimport javax.persistence.ValidationMode;\r\nimport javax.persistence.spi.ClassTransformer;\r\nimport javax.persistence.spi.PersistenceUnitInfo;\r\nimport javax.persistence.spi.PersistenceUnitTransactionType;\r\nimport javax.sql.DataSource;\r\n\r\npublic class HibernatePersistenceUnitInfo implements PersistenceUnitInfo {\r\n\r\n\tpublic static String JPA_VERSION = &quot;2.1&quot;;\r\n\tprivate String persistenceUnitName;\r\n\tprivate String persistenceProviderClassName = &quot;org.hibernate.jpa.HibernatePersistenceProvider&quot;;\r\n\tprivate PersistenceUnitTransactionType transactionType = PersistenceUnitTransactionType.RESOURCE_LOCAL;\r\n\tprivate List&lt;String&gt; managedClassNames;\r\n\tprivate List&lt;String&gt; mappingFileNames = new ArrayList&lt;&gt;();\r\n\tprivate Properties properties;\r\n\tprivate DataSource jtaDataSource;\r\n\tprivate DataSource nonjtaDataSource;\r\n\tprivate List&lt;ClassTransformer&gt; transformers = new ArrayList&lt;&gt;();\r\n\r\n\tpublic HibernatePersistenceUnitInfo(String persistenceUnitName, List&lt;String&gt; managedClassNames, Properties properties) {\r\n\t\tthis.persistenceUnitName = persistenceUnitName;\r\n\t\tthis.managedClassNames = managedClassNames;\r\n\t\tthis.properties = properties;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String getPersistenceUnitName() {\r\n\t\treturn persistenceUnitName;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic PersistenceUnitTransactionType getTransactionType() {\r\n\t\treturn transactionType;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic DataSource getJtaDataSource() {\r\n\t\treturn jtaDataSource;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic DataSource getNonJtaDataSource() {\r\n\t\treturn nonjtaDataSource;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic List&lt;String&gt; getMappingFileNames() {\r\n\t\treturn mappingFileNames;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic List&lt;String&gt; getManagedClassNames() {\r\n\t\treturn managedClassNames;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic Properties getProperties() {\r\n\t\treturn properties;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void addTransformer(ClassTransformer transformer) {\r\n\t\ttransformers.add(transformer);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String getPersistenceProviderClassName() {\r\n\t\treturn persistenceProviderClassName;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic boolean excludeUnlistedClasses() {\r\n\t\treturn false;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic List&lt;URL&gt; getJarFileUrls() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\treturn null;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic URL getPersistenceUnitRootUrl() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\treturn null;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic SharedCacheMode getSharedCacheMode() {\r\n\t\treturn SharedCacheMode.UNSPECIFIED;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic ValidationMode getValidationMode() {\r\n\t\treturn ValidationMode.AUTO;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String getPersistenceXMLSchemaVersion() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\treturn null;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic ClassLoader getClassLoader() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\treturn null;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic ClassLoader getNewTempClassLoader() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\treturn null;\r\n\t}\r\n}\r\n```\r\n\r\nAnd a ```JpaEntityManagerFactory```:\r\n```\r\nimport java.sql.SQLException;\r\nimport java.util.Arrays;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.Properties;\r\nimport java.util.stream.Collectors;\r\nimport javax.persistence.EntityManager;\r\nimport javax.persistence.EntityManagerFactory;\r\nimport javax.persistence.spi.PersistenceUnitInfo;\r\nimport javax.sql.DataSource;\r\nimport org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl;\r\nimport org.hibernate.jpa.boot.internal.PersistenceUnitInfoDescriptor;\r\nimport oracle.jdbc.replay.OracleDataSourceImpl;\r\nimport my.package.Data;\r\n\r\npublic class JpaEntityManagerFactory {\r\n\tprivate String dbUrl;\r\n\tprivate String dbUser;\r\n\tprivate String dbPass;\r\n\tprivate Class[] entityClasses;\r\n\tprivate String persistenceUnitName;\r\n    private String dbConnectionName;\r\n\r\n\tpublic JpaEntityManagerFactory(String persistenceUnitName, String dbConnectionName) {\r\n\t\tthis.entityClasses = new Class[] {Data.class};\r\n\t\tthis.dbConnectionName= dbConnectionName;\r\n\t\tthis.persistenceUnitName = persistenceUnitName;\r\n\r\n\t\t// TODO: Fill values from DB_CONNECTIONS table by using dbConnectionName\r\n\t\tdbUrl = &quot;jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(Host=abc)(Port=123))(CONNECT_DATA=(SERVICE_NAME=XYZ)))&quot;;\r\n\t\tdbUser = &quot;sa&quot;;\r\n\t\tdbPass = &quot;sa&quot;;\r\n\t}\r\n\r\n\tpublic EntityManager getEntityManager() {\r\n\t\treturn getEntityManagerFactory().createEntityManager();\r\n\t}\r\n\r\n\tpublic EntityManagerFactory getEntityManagerFactory() {\r\n\t\tPersistenceUnitInfo persistenceUnitInfo = getPersistenceUnitInfo(persistenceUnitName);\r\n\t\tMap&lt;String, Object&gt; configuration = new HashMap&lt;&gt;();\r\n\t\treturn new EntityManagerFactoryBuilderImpl(new PersistenceUnitInfoDescriptor(persistenceUnitInfo), configuration).build();\r\n\t}\r\n\r\n\tprotected HibernatePersistenceUnitInfo getPersistenceUnitInfo(String name) {\r\n\t\treturn new HibernatePersistenceUnitInfo(name, getEntityClassNames(), getProperties());\r\n\t}\r\n\r\n\tprotected List&lt;String&gt; getEntityClassNames() {\r\n\t\treturn Arrays.asList(getEntities()).stream().map(Class::getName).collect(Collectors.toList());\r\n\t}\r\n\r\n\tprotected Properties getProperties() {\r\n\t\tProperties properties = new Properties();\r\n\t\tproperties.put(&quot;hibernate.dialect&quot;, &quot;org.hibernate.dialect.Oracle8iDialect&quot;);\r\n\t\tproperties.put(&quot;hibernate.show_sql&quot;, false);\r\n\t\tproperties.put(&quot;hibernate.hbm2ddl.auto&quot;, &quot;none&quot;);\r\n\t\tproperties.put(&quot;hibernate.connection.datasource&quot;, getOracleDataSource());\r\n\t\treturn properties;\r\n\t}\r\n\r\n\tprotected Class[] getEntities() {\r\n\t\treturn entityClasses;\r\n\t}\r\n\r\n\tprotected DataSource getOracleDataSource() {\r\n\t\tOracleDataSourceImpl dataSource = new OracleDataSourceImpl();\r\n\t\ttry {\r\n\t\t\tdataSource.setURL(dbUrl);\r\n\t\t\tdataSource.setUser(dbUser);\r\n\t\t\tdataSource.setPassword(dbPass);\r\n\t\t} catch (SQLException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn dataSource;\r\n\t}\r\n}\r\n```\r\n\r\nSince we&#39;re using Oracle databases, I swapped the ```hibernate.connection.datasource``` value from Baeldung (where they were using a MySQL one), but I&#39;m not sure if I did it correctly.\r\n\r\nFinally, in Camel, I used my ```JpaEntityManagerFactory``` to build multiple JPA endpoints with different persistence units:\r\n\r\n```\r\n\tpublic void startup() {\r\n\t\tvar factory = Persistence.createEntityManagerFactory(SOURCE_DB_PERSISTENCE_UNIT_NAME);\r\n\r\n\t\tvar jpaComponent = new JpaComponent();\r\n\t\tjpaComponent.setJoinTransaction(false);\r\n\t\tjpaComponent.setEntityManagerFactory(factory);\r\n\t\tjpaComponent.setTransactionManager(new JpaTransactionManager(factory));\r\n\t\tjpaComponent.setSharedEntityManager(true);\r\n\t\tjpaComponent.setLazyStartProducer(true);\r\n\t\tjpaComponent.setAliases(getAliases());\r\n\t\tcontext.addComponent(&quot;jpaComponent&quot;, jpaComponent);\r\n\r\n\t\ttry {\r\n            // setting up the source\r\n\t\t\tvar consumer = (JpaEndpoint) jpaComponent.createEndpoint(&quot;jpa://Data&quot;);\r\n\t    \tconsumer.setNamedQuery(NAMED_QUERY_DATA);\r\n\t\t    consumer.setConsumeDelete(false);\r\n\t\t    consumer.setPersistenceUnit(SOURCE_DB_PERSISTENCE_UNIT_NAME);\r\n\t\t    consumer.setEntityManagerFactory(Persistence.createEntityManagerFactory(SOURCE_DB_PERSISTENCE_UNIT_NAME));\r\n\t    \tconsumer.setTimeUnit(TIME_UNIT);\r\n\t    \tconsumer.setInitialDelay(INITIAL_DELAY);\r\n\t    \tconsumer.setDelay(DELAY);\r\n\t    \tconsumer.setMaxMessagesPerPoll(MAX_MESSAGES_PER_POLL);\r\n\t    \tconsumer.setJoinTransaction(false);\r\n\t    \tconsumer.setExchangePattern(ExchangePattern.InOut);\r\n\t\t\tcontext.addEndpoint(&quot;jpa://Data&quot;, consumer);\r\n\r\n\t\t\tvar persistenceUnits = getPersistenceUnitsMap(); // contains an enum of my destination databases\r\n\r\n            // setting up the multiple destinations\r\n\t\t\tfor (var entry : persistenceUnits.entrySet()) {\r\n\t\t\t\tvar database = entry.getKey();\r\n\t\t\t\tvar databaseName = database.name();\r\n\t\t\t\tvar persistenceUnit = entry.getValue();\r\n\r\n\t\t\t\tvar entityManagerFactory = new JpaEntityManagerFactory(databaseName, persistenceUnit).getEntityManagerFactory();\r\n\r\n\t\t\t\tvar producer = (JpaEndpoint) jpaComponent.createEndpoint(&quot;jpa://Data&quot; + databaseName);\r\n\t\t\t\tproducer.setEntityManagerFactory(entityManagerFactory);\r\n\t\t\t\tproducer.setPersistenceUnit(persistenceUnit);\r\n\t\t\t\tproducer.setTransactionManager(new JpaTransactionManager(entityManagerFactory));\r\n\t\t\t\tproducer.setJoinTransaction(false);\r\n\t\t\t\tcontext.addEndpoint(&quot;jpa://Data&quot; + databaseName, producer);\r\n\t\t\t}\r\n\r\n\t\t\tcontext.addRoutes(new DataRoute());\r\n\t\t\tcontext.start();\r\n\t\t} catch (final Exception e) {\r\n\t\t\tlogger.error(&quot;Error starting up camel&quot;, e);\r\n\t\t}\r\n\t}\r\n\r\n    // used to give different names (jpa://DataDB1, jpa://DataDB2 etc) to the different endpoints, all mapping to the same Entity though\r\n\tprivate Map&lt;String, Class&lt;?&gt;&gt; getAliases() {\r\n\t\tMap&lt;String, Class&lt;?&gt;&gt; aliases = new HashMap&lt;&gt;();\r\n\r\n\t\tfor (var entry : getPersistenceUnitsMap().entrySet()) {\r\n\t\t\tvar database = entry.getKey();\r\n\t\t\taliases.put(&quot;jpa://Data&quot; + database.name(), Data.class);\r\n\t\t}\r\n\t\treturn aliases;\r\n\t}\r\n```\r\n\r\nMy Camel route looks like that:\r\n```\r\n\t@Override\r\n\tpublic void configure() throws Exception {\r\n\r\n\t\tfrom(&quot;jpa://Data&quot;).routeId(&quot;dataRoute&quot;)\r\n\t\t.choice().when(simple(&quot;${body.targetDatabase} == &#39;DB1&#39; &quot;)).to(&quot;jpa://Data&quot; + Database.DB1.name()).endChoice()\r\n\t\t.when(simple(&quot;${body.targetDatabase} == &#39;DB2&#39; &quot;)).to(&quot;jpa://Data&quot; + Database.DB2.name()).endChoice()\r\n\t\t.when(simple(&quot;${body.targetDatabase} == &#39;DB3&#39; &quot;)).to(&quot;jpa://Data&quot; + Database.DB3.name()).endChoice()\r\n\t\t.......\r\n\t\t.otherwise().process(ex -&gt; {\r\n\t\t\t// some logging\r\n\t\t}).endChoice().end();\r\n\t}\r\n```\r\nNow, the problem that I&#39;m facing is the following exception:\r\n\r\n```\r\norg.apache.camel.component.jpa.JpaConsumer (Camel (camel-1) thread #24 - jpa://Data) ..component.jpa.JpaConsumer (361) Acquiring exclusive lock on entity: my.package.Data@768d98ea\r\norg.apache.camel.component.jpa.JpaConsumer (Camel (camel-1) thread #24 - jpa://Data) ..component.jpa.JpaConsumer (369) Failed to achieve lock on entity: my.package.Data@768d98ea. Reason: no transaction is in progress: javax.persistence.TransactionRequiredException: no transaction is in progress\r\n\tat org.hibernate@5.3.11.SP1-redhat-00001//org.hibernate.internal.AbstractSharedSessionContract.checkTransactionNeededForUpdateOperation(AbstractSharedSessionContract.java:398)\r\n\tat org.hibernate@5.3.11.SP1-redhat-00001//org.hibernate.internal.SessionImpl.checkTransactionNeededForUpdateOperation(SessionImpl.java:3589)\r\n\tat org.hibernate@5.3.11.SP1-redhat-00001//org.hibernate.internal.SessionImpl.lock(SessionImpl.java:3615)\r\n\tat org.hibernate@5.3.11.SP1-redhat-00001//org.hibernate.internal.SessionImpl.lock(SessionImpl.java:3609)\r\n\tat deployment.camel-db-connector-0.0.1-SNAPSHOT.war//org.apache.camel.component.jpa.JpaConsumer.lockEntity(JpaConsumer.java:365)\r\n```\r\nIt seems like no transaction was started. What do I have to change?\r\n\r\n  [1]: https://www.baeldung.com/java-bootstrap-jpa","title":"Send data via Apache Camel route to bootstrapped JPA database connections","body":"<p>I have a source database with tables <code>DATA</code> and <code>DB_CONNECTIONS</code>. <code>DB_CONNECTIONS</code> contains a bunch of destination databases where I want to copy the <code>DATA</code> to via Apache Camel.</p>\n<p>To programatically build my persistence units, I followed <a href=\"https://www.baeldung.com/java-bootstrap-jpa\" rel=\"nofollow noreferrer\">Baeldung's JPA bootstrapping guide</a>.</p>\n<p>I implemented my own <code>PersistenceUnitInfo</code>:</p>\n<pre><code>import java.net.URL;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Properties;\nimport javax.persistence.SharedCacheMode;\nimport javax.persistence.ValidationMode;\nimport javax.persistence.spi.ClassTransformer;\nimport javax.persistence.spi.PersistenceUnitInfo;\nimport javax.persistence.spi.PersistenceUnitTransactionType;\nimport javax.sql.DataSource;\n\npublic class HibernatePersistenceUnitInfo implements PersistenceUnitInfo {\n\n    public static String JPA_VERSION = &quot;2.1&quot;;\n    private String persistenceUnitName;\n    private String persistenceProviderClassName = &quot;org.hibernate.jpa.HibernatePersistenceProvider&quot;;\n    private PersistenceUnitTransactionType transactionType = PersistenceUnitTransactionType.RESOURCE_LOCAL;\n    private List&lt;String&gt; managedClassNames;\n    private List&lt;String&gt; mappingFileNames = new ArrayList&lt;&gt;();\n    private Properties properties;\n    private DataSource jtaDataSource;\n    private DataSource nonjtaDataSource;\n    private List&lt;ClassTransformer&gt; transformers = new ArrayList&lt;&gt;();\n\n    public HibernatePersistenceUnitInfo(String persistenceUnitName, List&lt;String&gt; managedClassNames, Properties properties) {\n        this.persistenceUnitName = persistenceUnitName;\n        this.managedClassNames = managedClassNames;\n        this.properties = properties;\n    }\n\n    @Override\n    public String getPersistenceUnitName() {\n        return persistenceUnitName;\n    }\n\n    @Override\n    public PersistenceUnitTransactionType getTransactionType() {\n        return transactionType;\n    }\n\n    @Override\n    public DataSource getJtaDataSource() {\n        return jtaDataSource;\n    }\n\n    @Override\n    public DataSource getNonJtaDataSource() {\n        return nonjtaDataSource;\n    }\n\n    @Override\n    public List&lt;String&gt; getMappingFileNames() {\n        return mappingFileNames;\n    }\n\n    @Override\n    public List&lt;String&gt; getManagedClassNames() {\n        return managedClassNames;\n    }\n\n    @Override\n    public Properties getProperties() {\n        return properties;\n    }\n\n    @Override\n    public void addTransformer(ClassTransformer transformer) {\n        transformers.add(transformer);\n    }\n\n    @Override\n    public String getPersistenceProviderClassName() {\n        return persistenceProviderClassName;\n    }\n\n    @Override\n    public boolean excludeUnlistedClasses() {\n        return false;\n    }\n\n    @Override\n    public List&lt;URL&gt; getJarFileUrls() {\n        // TODO Auto-generated method stub\n        return null;\n    }\n\n    @Override\n    public URL getPersistenceUnitRootUrl() {\n        // TODO Auto-generated method stub\n        return null;\n    }\n\n    @Override\n    public SharedCacheMode getSharedCacheMode() {\n        return SharedCacheMode.UNSPECIFIED;\n    }\n\n    @Override\n    public ValidationMode getValidationMode() {\n        return ValidationMode.AUTO;\n    }\n\n    @Override\n    public String getPersistenceXMLSchemaVersion() {\n        // TODO Auto-generated method stub\n        return null;\n    }\n\n    @Override\n    public ClassLoader getClassLoader() {\n        // TODO Auto-generated method stub\n        return null;\n    }\n\n    @Override\n    public ClassLoader getNewTempClassLoader() {\n        // TODO Auto-generated method stub\n        return null;\n    }\n}\n</code></pre>\n<p>And a <code>JpaEntityManagerFactory</code>:</p>\n<pre><code>import java.sql.SQLException;\nimport java.util.Arrays;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Properties;\nimport java.util.stream.Collectors;\nimport javax.persistence.EntityManager;\nimport javax.persistence.EntityManagerFactory;\nimport javax.persistence.spi.PersistenceUnitInfo;\nimport javax.sql.DataSource;\nimport org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl;\nimport org.hibernate.jpa.boot.internal.PersistenceUnitInfoDescriptor;\nimport oracle.jdbc.replay.OracleDataSourceImpl;\nimport my.package.Data;\n\npublic class JpaEntityManagerFactory {\n    private String dbUrl;\n    private String dbUser;\n    private String dbPass;\n    private Class[] entityClasses;\n    private String persistenceUnitName;\n    private String dbConnectionName;\n\n    public JpaEntityManagerFactory(String persistenceUnitName, String dbConnectionName) {\n        this.entityClasses = new Class[] {Data.class};\n        this.dbConnectionName= dbConnectionName;\n        this.persistenceUnitName = persistenceUnitName;\n\n        // TODO: Fill values from DB_CONNECTIONS table by using dbConnectionName\n        dbUrl = &quot;jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(Host=abc)(Port=123))(CONNECT_DATA=(SERVICE_NAME=XYZ)))&quot;;\n        dbUser = &quot;sa&quot;;\n        dbPass = &quot;sa&quot;;\n    }\n\n    public EntityManager getEntityManager() {\n        return getEntityManagerFactory().createEntityManager();\n    }\n\n    public EntityManagerFactory getEntityManagerFactory() {\n        PersistenceUnitInfo persistenceUnitInfo = getPersistenceUnitInfo(persistenceUnitName);\n        Map&lt;String, Object&gt; configuration = new HashMap&lt;&gt;();\n        return new EntityManagerFactoryBuilderImpl(new PersistenceUnitInfoDescriptor(persistenceUnitInfo), configuration).build();\n    }\n\n    protected HibernatePersistenceUnitInfo getPersistenceUnitInfo(String name) {\n        return new HibernatePersistenceUnitInfo(name, getEntityClassNames(), getProperties());\n    }\n\n    protected List&lt;String&gt; getEntityClassNames() {\n        return Arrays.asList(getEntities()).stream().map(Class::getName).collect(Collectors.toList());\n    }\n\n    protected Properties getProperties() {\n        Properties properties = new Properties();\n        properties.put(&quot;hibernate.dialect&quot;, &quot;org.hibernate.dialect.Oracle8iDialect&quot;);\n        properties.put(&quot;hibernate.show_sql&quot;, false);\n        properties.put(&quot;hibernate.hbm2ddl.auto&quot;, &quot;none&quot;);\n        properties.put(&quot;hibernate.connection.datasource&quot;, getOracleDataSource());\n        return properties;\n    }\n\n    protected Class[] getEntities() {\n        return entityClasses;\n    }\n\n    protected DataSource getOracleDataSource() {\n        OracleDataSourceImpl dataSource = new OracleDataSourceImpl();\n        try {\n            dataSource.setURL(dbUrl);\n            dataSource.setUser(dbUser);\n            dataSource.setPassword(dbPass);\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n        return dataSource;\n    }\n}\n</code></pre>\n<p>Since we're using Oracle databases, I swapped the <code>hibernate.connection.datasource</code> value from Baeldung (where they were using a MySQL one), but I'm not sure if I did it correctly.</p>\n<p>Finally, in Camel, I used my <code>JpaEntityManagerFactory</code> to build multiple JPA endpoints with different persistence units:</p>\n<pre><code>    public void startup() {\n        var factory = Persistence.createEntityManagerFactory(SOURCE_DB_PERSISTENCE_UNIT_NAME);\n\n        var jpaComponent = new JpaComponent();\n        jpaComponent.setJoinTransaction(false);\n        jpaComponent.setEntityManagerFactory(factory);\n        jpaComponent.setTransactionManager(new JpaTransactionManager(factory));\n        jpaComponent.setSharedEntityManager(true);\n        jpaComponent.setLazyStartProducer(true);\n        jpaComponent.setAliases(getAliases());\n        context.addComponent(&quot;jpaComponent&quot;, jpaComponent);\n\n        try {\n            // setting up the source\n            var consumer = (JpaEndpoint) jpaComponent.createEndpoint(&quot;jpa://Data&quot;);\n            consumer.setNamedQuery(NAMED_QUERY_DATA);\n            consumer.setConsumeDelete(false);\n            consumer.setPersistenceUnit(SOURCE_DB_PERSISTENCE_UNIT_NAME);\n            consumer.setEntityManagerFactory(Persistence.createEntityManagerFactory(SOURCE_DB_PERSISTENCE_UNIT_NAME));\n            consumer.setTimeUnit(TIME_UNIT);\n            consumer.setInitialDelay(INITIAL_DELAY);\n            consumer.setDelay(DELAY);\n            consumer.setMaxMessagesPerPoll(MAX_MESSAGES_PER_POLL);\n            consumer.setJoinTransaction(false);\n            consumer.setExchangePattern(ExchangePattern.InOut);\n            context.addEndpoint(&quot;jpa://Data&quot;, consumer);\n\n            var persistenceUnits = getPersistenceUnitsMap(); // contains an enum of my destination databases\n\n            // setting up the multiple destinations\n            for (var entry : persistenceUnits.entrySet()) {\n                var database = entry.getKey();\n                var databaseName = database.name();\n                var persistenceUnit = entry.getValue();\n\n                var entityManagerFactory = new JpaEntityManagerFactory(databaseName, persistenceUnit).getEntityManagerFactory();\n\n                var producer = (JpaEndpoint) jpaComponent.createEndpoint(&quot;jpa://Data&quot; + databaseName);\n                producer.setEntityManagerFactory(entityManagerFactory);\n                producer.setPersistenceUnit(persistenceUnit);\n                producer.setTransactionManager(new JpaTransactionManager(entityManagerFactory));\n                producer.setJoinTransaction(false);\n                context.addEndpoint(&quot;jpa://Data&quot; + databaseName, producer);\n            }\n\n            context.addRoutes(new DataRoute());\n            context.start();\n        } catch (final Exception e) {\n            logger.error(&quot;Error starting up camel&quot;, e);\n        }\n    }\n\n    // used to give different names (jpa://DataDB1, jpa://DataDB2 etc) to the different endpoints, all mapping to the same Entity though\n    private Map&lt;String, Class&lt;?&gt;&gt; getAliases() {\n        Map&lt;String, Class&lt;?&gt;&gt; aliases = new HashMap&lt;&gt;();\n\n        for (var entry : getPersistenceUnitsMap().entrySet()) {\n            var database = entry.getKey();\n            aliases.put(&quot;jpa://Data&quot; + database.name(), Data.class);\n        }\n        return aliases;\n    }\n</code></pre>\n<p>My Camel route looks like that:</p>\n<pre><code>    @Override\n    public void configure() throws Exception {\n\n        from(&quot;jpa://Data&quot;).routeId(&quot;dataRoute&quot;)\n        .choice().when(simple(&quot;${body.targetDatabase} == 'DB1' &quot;)).to(&quot;jpa://Data&quot; + Database.DB1.name()).endChoice()\n        .when(simple(&quot;${body.targetDatabase} == 'DB2' &quot;)).to(&quot;jpa://Data&quot; + Database.DB2.name()).endChoice()\n        .when(simple(&quot;${body.targetDatabase} == 'DB3' &quot;)).to(&quot;jpa://Data&quot; + Database.DB3.name()).endChoice()\n        .......\n        .otherwise().process(ex -&gt; {\n            // some logging\n        }).endChoice().end();\n    }\n</code></pre>\n<p>Now, the problem that I'm facing is the following exception:</p>\n<pre><code>org.apache.camel.component.jpa.JpaConsumer (Camel (camel-1) thread #24 - jpa://Data) ..component.jpa.JpaConsumer (361) Acquiring exclusive lock on entity: my.package.Data@768d98ea\norg.apache.camel.component.jpa.JpaConsumer (Camel (camel-1) thread #24 - jpa://Data) ..component.jpa.JpaConsumer (369) Failed to achieve lock on entity: my.package.Data@768d98ea. Reason: no transaction is in progress: javax.persistence.TransactionRequiredException: no transaction is in progress\n    at org.hibernate@5.3.11.SP1-redhat-00001//org.hibernate.internal.AbstractSharedSessionContract.checkTransactionNeededForUpdateOperation(AbstractSharedSessionContract.java:398)\n    at org.hibernate@5.3.11.SP1-redhat-00001//org.hibernate.internal.SessionImpl.checkTransactionNeededForUpdateOperation(SessionImpl.java:3589)\n    at org.hibernate@5.3.11.SP1-redhat-00001//org.hibernate.internal.SessionImpl.lock(SessionImpl.java:3615)\n    at org.hibernate@5.3.11.SP1-redhat-00001//org.hibernate.internal.SessionImpl.lock(SessionImpl.java:3609)\n    at deployment.camel-db-connector-0.0.1-SNAPSHOT.war//org.apache.camel.component.jpa.JpaConsumer.lockEntity(JpaConsumer.java:365)\n</code></pre>\n<p>It seems like no transaction was started. What do I have to change?</p>\n"},{"tags":["java","input","time","limit"],"comments":[{"owner":{"account_id":1462372,"reputation":307,"user_id":1376307,"display_name":"Petro Gordiyevich"},"score":0,"creation_date":1495078073,"post_id":44038081,"comment_id":75102521,"body_markdown":"Use getCharacters().toString(); instead. Check this: https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/TextField.html#getCharacters--","body":"Use getCharacters().toString(); instead. Check this: <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/TextField.html#getCharacters--\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/javafx/api/javafx/scene/control/&hellip;</a>"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1495078184,"post_id":44038081,"comment_id":75102550,"body_markdown":"@PetroGordiyevich What are you talking about?","body":"@PetroGordiyevich What are you talking about?"},{"owner":{"account_id":1462372,"reputation":307,"user_id":1376307,"display_name":"Petro Gordiyevich"},"score":0,"creation_date":1495078207,"post_id":44038081,"comment_id":75102557,"body_markdown":"sorry, answered to wrong question.","body":"sorry, answered to wrong question."},{"owner":{"account_id":9060356,"reputation":2116,"user_id":6747071,"accept_rate":100,"display_name":"Enstage"},"score":0,"creation_date":1495080933,"post_id":44038081,"comment_id":75103245,"body_markdown":"You need to show us your code and what you have already tried.","body":"You need to show us your code and what you have already tried."},{"owner":{"account_id":9605857,"reputation":51,"user_id":8028679,"display_name":"Jerry Chen"},"score":0,"creation_date":1495132669,"post_id":44038081,"comment_id":75135883,"body_markdown":"@Enstage I honestly have no idea what to even try.","body":"@Enstage I honestly have no idea what to even try."}],"answers":[{"tags":[],"owner":{"account_id":10922151,"reputation":1249,"user_id":8028053,"display_name":"fileyfood500"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1495078690,"creation_date":1495078690,"answer_id":44038182,"question_id":44038081,"body_markdown":"You can use Timer and TimerTask. TimerTask will allow you to run a task after a certain amount of time, in this case you can use this task to stop waiting for the user.\r\n\r\n    import java.util.Timer;\r\n    import java.util.TimerTask;\r\n\r\n    ...\r\n\r\n    TimerTask task = new TimerTask()\r\n    {\r\n        public void run()\r\n        {\r\n            if( str.equals(&quot;&quot;) )\r\n            {\r\n                System.out.println( &quot;you input nothing. exit...&quot; );\r\n                System.exit( 0 );\r\n            }\r\n        }    \r\n    };\r\n\r\n    ...\r\n\r\n    Timer timer = new Timer();\r\n\r\n    timer.schedule( task, 10*1000 );\r\n\r\n    Scanner sc = new Scanner(System.in);\r\n    String in = sc.readLine();\r\n\r\n    timer.cancel();\r\n\r\nSo if the user doesn&#39;t respond within 10 seconds here, the timer will quit reading input. I stole/adapted this response from this initial post:\r\nhttps://stackoverflow.com/questions/5853989/time-limit-for-an-input\r\n","title":"Set Time Limit on User Input (Scanner) Java","body":"<p>You can use Timer and TimerTask. TimerTask will allow you to run a task after a certain amount of time, in this case you can use this task to stop waiting for the user.</p>\n\n<pre><code>import java.util.Timer;\nimport java.util.TimerTask;\n\n...\n\nTimerTask task = new TimerTask()\n{\n    public void run()\n    {\n        if( str.equals(\"\") )\n        {\n            System.out.println( \"you input nothing. exit...\" );\n            System.exit( 0 );\n        }\n    }    \n};\n\n...\n\nTimer timer = new Timer();\n\ntimer.schedule( task, 10*1000 );\n\nScanner sc = new Scanner(System.in);\nString in = sc.readLine();\n\ntimer.cancel();\n</code></pre>\n\n<p>So if the user doesn't respond within 10 seconds here, the timer will quit reading input. I stole/adapted this response from this initial post:\n<a href=\"https://stackoverflow.com/questions/5853989/time-limit-for-an-input\">Time limit for an input</a></p>\n"},{"tags":[],"owner":{"account_id":12938660,"reputation":565,"user_id":9355196,"display_name":"jashgopani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659603807,"creation_date":1659603807,"answer_id":73233122,"question_id":44038081,"body_markdown":"I found another approach where we can continue our flow after the timeout instead of terminating the program.\r\nThat can be done via ScheduledExecutorService class.\r\nThe logic implemented is\r\n\r\n 1. Initialize a variable for managing the input state and another one for storing the result. (The input I wanted was boolean)\r\n2. Schedule the input task at a 0s delay (i.e ask for input immediately)\r\n3. Schedule another task to check for the input status as per the specified delay\r\n4. Wait for both the tasks to be completed\r\n5. Return the result\r\n\r\n    \r\n        import java.util.concurrent.Executors;\r\n        import java.util.concurrent.ScheduledExecutorService;\r\n        import java.util.concurrent.TimeUnit;\r\n        import java.util.concurrent.atomic.AtomicBoolean;\r\n\r\n        ...\r\n\r\n        //member variables of class\r\n        private static AtomicBoolean inputValue = new AtomicBoolean(true);\r\n        private static AtomicBoolean inputEntered = new AtomicBoolean(false);\r\n        private static ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);\r\n\r\n        ...\r\n\r\n        public static void main(String[] args) {\r\n\r\n            try {\r\n                boolean yes = getTimedInput(&quot;Enter yes or no&quot;, 5);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n           }\r\n        }\r\n\r\n        ...\r\n\r\n        public static boolean getTimedInput(String inputString, long timeoutInSeconds) throws Exception {\r\n\r\n            System.out.printf(&quot;%s [Y/n] [timeout=%ds] &gt;&gt; &quot;, inputString.trim(), timeoutInSeconds);\r\n            scheduler.schedule(() -&gt; {\r\n                try {\r\n                    String s = br.readLine();\r\n                    if (s != null) {\r\n                        inputValue.set(s.trim().equalsIgnoreCase(&quot;y&quot;));\r\n                    }\r\n                    inputEntered.set(true);\r\n                } catch (IOException e) {\r\n                }\r\n            }, 0, TimeUnit.SECONDS);\r\n            scheduler.schedule(() -&gt; {\r\n                if (inputEntered.get()) {\r\n                inputEntered.set(false);\r\n                } else {\r\n                    System.out.println(&quot;\\nInput timed out. Considering it as Y&quot;);    \r\n                    inputValue.set(true);\r\n                }\r\n            }, 0, TimeUnit.SECONDS);\r\n            scheduler.awaitTermination(timeoutInSeconds + 1, TimeUnit.SECONDS);\r\n            System.out.println();\r\n            return inputValue.get();\r\n        }","title":"Set Time Limit on User Input (Scanner) Java","body":"<p>I found another approach where we can continue our flow after the timeout instead of terminating the program.\nThat can be done via ScheduledExecutorService class.\nThe logic implemented is</p>\n<ol>\n<li><p>Initialize a variable for managing the input state and another one for storing the result. (The input I wanted was boolean)</p>\n</li>\n<li><p>Schedule the input task at a 0s delay (i.e ask for input immediately)</p>\n</li>\n<li><p>Schedule another task to check for the input status as per the specified delay</p>\n</li>\n<li><p>Wait for both the tasks to be completed</p>\n</li>\n<li><p>Return the result</p>\n<pre><code> import java.util.concurrent.Executors;\n import java.util.concurrent.ScheduledExecutorService;\n import java.util.concurrent.TimeUnit;\n import java.util.concurrent.atomic.AtomicBoolean;\n\n ...\n\n //member variables of class\n private static AtomicBoolean inputValue = new AtomicBoolean(true);\n private static AtomicBoolean inputEntered = new AtomicBoolean(false);\n private static ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);\n\n ...\n\n public static void main(String[] args) {\n\n     try {\n         boolean yes = getTimedInput(&quot;Enter yes or no&quot;, 5);\n     } catch (Exception e) {\n         e.printStackTrace();\n    }\n }\n\n ...\n\n public static boolean getTimedInput(String inputString, long timeoutInSeconds) throws Exception {\n\n     System.out.printf(&quot;%s [Y/n] [timeout=%ds] &gt;&gt; &quot;, inputString.trim(), timeoutInSeconds);\n     scheduler.schedule(() -&gt; {\n         try {\n             String s = br.readLine();\n             if (s != null) {\n                 inputValue.set(s.trim().equalsIgnoreCase(&quot;y&quot;));\n             }\n             inputEntered.set(true);\n         } catch (IOException e) {\n         }\n     }, 0, TimeUnit.SECONDS);\n     scheduler.schedule(() -&gt; {\n         if (inputEntered.get()) {\n         inputEntered.set(false);\n         } else {\n             System.out.println(&quot;\\nInput timed out. Considering it as Y&quot;);    \n             inputValue.set(true);\n         }\n     }, 0, TimeUnit.SECONDS);\n     scheduler.awaitTermination(timeoutInSeconds + 1, TimeUnit.SECONDS);\n     System.out.println();\n     return inputValue.get();\n }\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":9605857,"reputation":51,"user_id":8028679,"display_name":"Jerry Chen"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6730,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":2,"score":4,"last_activity_date":1659603807,"creation_date":1495077896,"question_id":44038081,"body_markdown":"So I&#39;m trying to read user input using the Scanner class. Is there a simple way to make it so that after 10 seconds it moves onto the next block of code? Thanks ","title":"Set Time Limit on User Input (Scanner) Java","body":"<p>So I'm trying to read user input using the Scanner class. Is there a simple way to make it so that after 10 seconds it moves onto the next block of code? Thanks </p>\n"},{"tags":["java","android","kotlin","android-room","kotlin-coroutines"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":3,"creation_date":1659423817,"post_id":73203102,"comment_id":129284854,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":1675086,"reputation":33855,"user_id":1540818,"accept_rate":82,"display_name":"Joffrey"},"score":0,"creation_date":1659427668,"post_id":73203102,"comment_id":129286138,"body_markdown":"Can you provide the piece of code that causes this error?","body":"Can you provide the piece of code that causes this error?"},{"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"score":0,"creation_date":1659436431,"post_id":73203102,"comment_id":129289249,"body_markdown":"I vaguely recall a question along similar lines where the issue, if I recall correctly, was the mix of Java and Kotlin and the annotationProcessor/kapt both being coded.","body":"I vaguely recall a question along similar lines where the issue, if I recall correctly, was the mix of Java and Kotlin and the annotationProcessor/kapt both being coded."},{"owner":{"account_id":25939597,"reputation":26,"user_id":19659324,"display_name":"Martin Schwarzbock"},"score":0,"creation_date":1659508794,"post_id":73203102,"comment_id":129308472,"body_markdown":"@MikeT Thanks to you I oriented my search to solve the problem correctly.","body":"@MikeT Thanks to you I oriented my search to solve the problem correctly."}],"answers":[{"tags":[],"owner":{"account_id":25939597,"reputation":26,"user_id":19659324,"display_name":"Martin Schwarzbock"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659601774,"creation_date":1659509141,"answer_id":73217344,"question_id":73203102,"body_markdown":"&gt; [**READ THE NEW ANSWER**] After trying a lot of things I finally found the error, which was very\r\n&gt; stupid. The problem was that I repeated twice the implementation of\r\n&gt; the room-compiler dependency.\r\n&gt; \r\n&gt; I deleted the kapt dependency. Anyway this link helped me to identify the problem [https://stackoverflow.com/questions/46850060/errorexecution-failed-for-task-appkaptdebugkotlin.][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/46850060/errorexecution-failed-for-task-appkaptdebugkotlin.","title":"How to implement corroutines/room correctly? Kotlin Android","body":"<blockquote>\n<p>[<strong>READ THE NEW ANSWER</strong>] After trying a lot of things I finally found the error, which was very\nstupid. The problem was that I repeated twice the implementation of\nthe room-compiler dependency.</p>\n<p>I deleted the kapt dependency. Anyway this link helped me to identify the problem <a href=\"https://stackoverflow.com/questions/46850060/errorexecution-failed-for-task-appkaptdebugkotlin.\">Error:Execution failed for task &#39;:app:kaptDebugKotlin&#39;</a></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":25939597,"reputation":26,"user_id":19659324,"display_name":"Martin Schwarzbock"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659603651,"creation_date":1659603651,"answer_id":73233077,"question_id":73203102,"body_markdown":"The previous solution was only useful for a short time, the real problem was that I had to update gradle. In the classpath I added this:\r\n\r\n    &gt; buildscript {\r\n        repositories {\r\n            ...\r\n            ...\r\n        }\r\n        dependencies {\r\n            classpath &quot;com.android.tools.build:gradle:7.0.4&quot;\r\n            classpath &#39;org.jetbrains.kotlin:kotlin-gradle-plugin:1.7.10&#39;\r\n            classpath &quot;com.google.devtools.ksp:com.google.devtools.ksp.gradle.plugin:1.7.20-Beta-1.0.6&quot;\r\n            ...\r\n        }\r\n    \r\n     \r\n    \r\n        }\r\n\r\n&gt; Be sure that the ksp version match with your kotlin plugin version, you can also check the maven website here: [Maven][1]\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/com.google.devtools.ksp/com.google.devtools.ksp.gradle.plugin\r\n\r\nThen in the build.gradle add the ksp plugin, add the new ksp compileOption and change the kap annotatons to ksp:\r\n\r\n\r\n        plugins {\r\n        ...\r\n        ...\r\n        id &#39;com.google.devtools.ksp&#39;\r\n        }\r\n        android{\r\n        ...\r\n        ksp {\r\n            arg(&quot;room.schemaLocation&quot;, &quot;$projectDir/schemas&quot;.toString())\r\n        }\r\n        ...\r\n        \r\n    }\r\n    dependencies {\r\n        ...\r\n        //room\r\n        def roomVersion = &quot;2.4.3&quot;\r\n\r\n        implementation(&quot;androidx.room:room-runtime:$roomVersion&quot;)\r\n        ksp &quot;androidx.room:room-compiler:$roomVersion&quot;\r\n        implementation(&quot;androidx.room:room-ktx:$roomVersion&quot;)\r\n        ...\r\n}\r\n\r\n\r\n","title":"How to implement corroutines/room correctly? Kotlin Android","body":"<p>The previous solution was only useful for a short time, the real problem was that I had to update gradle. In the classpath I added this:</p>\n<pre><code>&gt; buildscript {\n    repositories {\n        ...\n        ...\n    }\n    dependencies {\n        classpath &quot;com.android.tools.build:gradle:7.0.4&quot;\n        classpath 'org.jetbrains.kotlin:kotlin-gradle-plugin:1.7.10'\n        classpath &quot;com.google.devtools.ksp:com.google.devtools.ksp.gradle.plugin:1.7.20-Beta-1.0.6&quot;\n        ...\n    }\n\n \n\n    }\n</code></pre>\n<blockquote>\n<p>Be sure that the ksp version match with your kotlin plugin version, you can also check the maven website here: <a href=\"https://mvnrepository.com/artifact/com.google.devtools.ksp/com.google.devtools.ksp.gradle.plugin\" rel=\"nofollow noreferrer\">Maven</a></p>\n</blockquote>\n<p>Then in the build.gradle add the ksp plugin, add the new ksp compileOption and change the kap annotatons to ksp:</p>\n<pre><code>    plugins {\n    ...\n    ...\n    id 'com.google.devtools.ksp'\n    }\n    android{\n    ...\n    ksp {\n        arg(&quot;room.schemaLocation&quot;, &quot;$projectDir/schemas&quot;.toString())\n    }\n    ...\n    \n}\ndependencies {\n    ...\n    //room\n    def roomVersion = &quot;2.4.3&quot;\n\n    implementation(&quot;androidx.room:room-runtime:$roomVersion&quot;)\n    ksp &quot;androidx.room:room-compiler:$roomVersion&quot;\n    implementation(&quot;androidx.room:room-ktx:$roomVersion&quot;)\n    ...\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":25939597,"reputation":26,"user_id":19659324,"display_name":"Martin Schwarzbock"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":759,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1659603651,"creation_date":1659422873,"question_id":73203102,"body_markdown":"have tried to implement coroutines/room in two projects and I get\r\nthe same error. \r\nPlease help me!!!\r\n\r\n    Execution failed for task &#39;:app:kaptDebugKotlin&#39;\r\n\r\n    error: type of the parameter must be a class annotated with @Entity or a collection/array of it.\r\n        kotlin.coroutines.Continuation&lt;? super kotlin.Unit&gt; continuation);\r\n\r\n&gt;This is my room database class:\r\n\r\n    @Database(entities = [Meal::class], version = 1, exportSchema = false)\r\n    @TypeConverters(MealTypeConvertor::class)\r\n    abstract class MealDataBase : RoomDatabase() {\r\n        abstract fun mealDao(): MealDao\r\n    \r\n        companion object {\r\n            @Volatile\r\n            var INSTANCE: MealDataBase? = null\r\n    \r\n            @Synchronized\r\n            fun getInstance(context: Context): MealDataBase {\r\n                if (INSTANCE == null) {\r\n                    INSTANCE = Room.databaseBuilder(\r\n                        context,\r\n                        MealDataBase::class.java,\r\n                        &quot;meal.db&quot;\r\n                    ).fallbackToDestructiveMigration()\r\n                        .build()\r\n                }\r\n                return INSTANCE as MealDataBase\r\n            }\r\n    \r\n        }\r\n    }\r\n\r\n\r\n\r\n&gt; This my model data Class with the @Entity anotation: \r\n\r\n    @Entity(tableName = &quot;mealInformation&quot;)\r\n    data class Meal(\r\n    val dateModified: Any?,\r\n    @PrimaryKey\r\n    val idMeal: String,\r\n    val strArea: String?,\r\n    val strCategory: String?,\r\n    val strCreativeCommonsConfirmed: Any?,\r\n    val strDrinkAlternate: Any?,\r\n    val strImageSource: Any?,\r\n    val strIngredient1: String?\r\n    )\r\n\r\n&gt; My class is already noted with **@Entity** and my version of gradle is up to date. My dependencies:\r\n\r\n    dependencies {\r\n    def nav_version = &quot;2.3.5&quot;\r\n    implementation &#39;androidx.core:core-ktx:1.8.0&#39;\r\n    implementation &#39;androidx.appcompat:appcompat:1.4.2&#39;\r\n    implementation &#39;com.google.android.material:material:1.6.1&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.3&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.4.0&#39;\r\n    apply plugin: &#39;kotlin-kapt&#39;\r\n\r\n    //Navigation Component\r\n    implementation &quot;androidx.navigation:navigation-fragment-ktx:$nav_version&quot;\r\n    implementation &quot;androidx.navigation:navigation-ui-ktx:$nav_version&quot;\r\n\r\n    //intuit\r\n    implementation &#39;com.intuit.sdp:sdp-android:1.0.6&#39;\r\n    implementation &#39;com.intuit.ssp:ssp-android:1.0.6&#39;\r\n\r\n    //gif\r\n    implementation &#39;pl.droidsonroids.gif:android-gif-drawable:1.2.17&#39;\r\n\r\n    //Retrofit\r\n    implementation(&quot;com.squareup.retrofit2:retrofit:2.9.0&quot;)\r\n    implementation &#39;com.squareup.retrofit2:converter-gson:2.9.0&#39;\r\n\r\n    //images\r\n    implementation &#39;com.github.bumptech.glide:glide:4.13.2&#39;\r\n\r\n    //videoModel mvvm\r\n    def lifecycle_version = &quot;2.4.0-rc01&quot;\r\n    implementation &quot;androidx.lifecycle:lifecycle-viewmodel-ktx:$lifecycle_version&quot;\r\n    implementation &quot;androidx.lifecycle:lifecycle-livedata-ktx:$lifecycle_version&quot;\r\n    implementation &quot;androidx.lifecycle:lifecycle-viewmodel-ktx:2.5.1&quot;\r\n\r\n    //room\r\n    def roomVersion = &quot;2.4.2&quot;\r\n    implementation(&quot;androidx.room:room-runtime:$roomVersion&quot;)\r\n    annotationProcessor(&quot;androidx.room:room-compiler:$roomVersion&quot;)\r\n    kapt(&quot;androidx.room:room-compiler:$roomVersion&quot;)\r\n    implementation(&quot;androidx.room:room-ktx:$roomVersion&quot;)\r\n\r\n    }\r\n\r\n\r\n&gt; My class is already noted with **@Entity** and my version of gradle is up to date \r\n\r\n","title":"How to implement corroutines/room correctly? Kotlin Android","body":"<p>have tried to implement coroutines/room in two projects and I get\nthe same error.\nPlease help me!!!</p>\n<pre><code>Execution failed for task ':app:kaptDebugKotlin'\n\nerror: type of the parameter must be a class annotated with @Entity or a collection/array of it.\n    kotlin.coroutines.Continuation&lt;? super kotlin.Unit&gt; continuation);\n</code></pre>\n<blockquote>\n<p>This is my room database class:</p>\n</blockquote>\n<pre><code>@Database(entities = [Meal::class], version = 1, exportSchema = false)\n@TypeConverters(MealTypeConvertor::class)\nabstract class MealDataBase : RoomDatabase() {\n    abstract fun mealDao(): MealDao\n\n    companion object {\n        @Volatile\n        var INSTANCE: MealDataBase? = null\n\n        @Synchronized\n        fun getInstance(context: Context): MealDataBase {\n            if (INSTANCE == null) {\n                INSTANCE = Room.databaseBuilder(\n                    context,\n                    MealDataBase::class.java,\n                    &quot;meal.db&quot;\n                ).fallbackToDestructiveMigration()\n                    .build()\n            }\n            return INSTANCE as MealDataBase\n        }\n\n    }\n}\n</code></pre>\n<blockquote>\n<p>This my model data Class with the @Entity anotation:</p>\n</blockquote>\n<pre><code>@Entity(tableName = &quot;mealInformation&quot;)\ndata class Meal(\nval dateModified: Any?,\n@PrimaryKey\nval idMeal: String,\nval strArea: String?,\nval strCategory: String?,\nval strCreativeCommonsConfirmed: Any?,\nval strDrinkAlternate: Any?,\nval strImageSource: Any?,\nval strIngredient1: String?\n)\n</code></pre>\n<blockquote>\n<p>My class is already noted with <strong>@Entity</strong> and my version of gradle is up to date. My dependencies:</p>\n</blockquote>\n<pre><code>dependencies {\ndef nav_version = &quot;2.3.5&quot;\nimplementation 'androidx.core:core-ktx:1.8.0'\nimplementation 'androidx.appcompat:appcompat:1.4.2'\nimplementation 'com.google.android.material:material:1.6.1'\nimplementation 'androidx.constraintlayout:constraintlayout:2.1.4'\ntestImplementation 'junit:junit:4.13.2'\nandroidTestImplementation 'androidx.test.ext:junit:1.1.3'\nandroidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\napply plugin: 'kotlin-kapt'\n\n//Navigation Component\nimplementation &quot;androidx.navigation:navigation-fragment-ktx:$nav_version&quot;\nimplementation &quot;androidx.navigation:navigation-ui-ktx:$nav_version&quot;\n\n//intuit\nimplementation 'com.intuit.sdp:sdp-android:1.0.6'\nimplementation 'com.intuit.ssp:ssp-android:1.0.6'\n\n//gif\nimplementation 'pl.droidsonroids.gif:android-gif-drawable:1.2.17'\n\n//Retrofit\nimplementation(&quot;com.squareup.retrofit2:retrofit:2.9.0&quot;)\nimplementation 'com.squareup.retrofit2:converter-gson:2.9.0'\n\n//images\nimplementation 'com.github.bumptech.glide:glide:4.13.2'\n\n//videoModel mvvm\ndef lifecycle_version = &quot;2.4.0-rc01&quot;\nimplementation &quot;androidx.lifecycle:lifecycle-viewmodel-ktx:$lifecycle_version&quot;\nimplementation &quot;androidx.lifecycle:lifecycle-livedata-ktx:$lifecycle_version&quot;\nimplementation &quot;androidx.lifecycle:lifecycle-viewmodel-ktx:2.5.1&quot;\n\n//room\ndef roomVersion = &quot;2.4.2&quot;\nimplementation(&quot;androidx.room:room-runtime:$roomVersion&quot;)\nannotationProcessor(&quot;androidx.room:room-compiler:$roomVersion&quot;)\nkapt(&quot;androidx.room:room-compiler:$roomVersion&quot;)\nimplementation(&quot;androidx.room:room-ktx:$roomVersion&quot;)\n\n}\n</code></pre>\n<blockquote>\n<p>My class is already noted with <strong>@Entity</strong> and my version of gradle is up to date</p>\n</blockquote>\n"},{"tags":["java","docker","gradle"],"comments":[{"owner":{"account_id":6464248,"reputation":6030,"user_id":5006866,"display_name":"thokuest"},"score":0,"creation_date":1643104980,"post_id":70844518,"comment_id":125245518,"body_markdown":"Are you by chance building the image from Windows?","body":"Are you by chance building the image from Windows?"},{"owner":{"account_id":5814053,"reputation":2527,"user_id":7759514,"accept_rate":61,"display_name":"Tobiq"},"score":0,"creation_date":1643106571,"post_id":70844518,"comment_id":125246097,"body_markdown":"@thokuest I am. i was wondering if this is some bug with WSL or something?","body":"@thokuest I am. i was wondering if this is some bug with WSL or something?"},{"owner":{"account_id":13863020,"reputation":137023,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1643112178,"post_id":70844518,"comment_id":125248184,"body_markdown":"The Gradle wrapper `gradlew` is a shell script, and if shell scripts get copied in with DOS line endings, you could get a &quot;not found&quot; error like this.","body":"The Gradle wrapper <code>gradlew</code> is a shell script, and if shell scripts get copied in with DOS line endings, you could get a &quot;not found&quot; error like this."},{"owner":{"account_id":5814053,"reputation":2527,"user_id":7759514,"accept_rate":61,"display_name":"Tobiq"},"score":1,"creation_date":1643129216,"post_id":70844518,"comment_id":125255613,"body_markdown":"I saw someone make this comment and I switched the line endings to &quot;LF&quot; from &quot;CLRF&quot; in intellij, but it didn&#39;t fix it @DavidMaze","body":"I saw someone make this comment and I switched the line endings to &quot;LF&quot; from &quot;CLRF&quot; in intellij, but it didn&#39;t fix it @DavidMaze"}],"answers":[{"tags":[],"owner":{"account_id":6464248,"reputation":6030,"user_id":5006866,"display_name":"thokuest"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1643119218,"creation_date":1643119218,"answer_id":70849938,"question_id":70844518,"body_markdown":"`/bin/sh: 1: ./gradlew: not found` is usually caused by carriage return (`\\r`) line endings in the bash script. Removing the carriage return will most like resolve the issue.","title":"Can&#39;t run gradle wrapper with docker build","body":"<p><code>/bin/sh: 1: ./gradlew: not found</code> is usually caused by carriage return (<code>\\r</code>) line endings in the bash script. Removing the carriage return will most like resolve the issue.</p>\n"},{"tags":[],"owner":{"account_id":146411,"reputation":9094,"user_id":356857,"accept_rate":80,"display_name":"WeMakeSoftware"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1649676888,"creation_date":1649676535,"answer_id":71827011,"question_id":70844518,"body_markdown":"Got exact same problem on Windows environment. This has to do with the line endings of the shell script files.\r\n\r\nI fixed it this way:\r\n\r\n1. Step - set the line endings to match the *nix style\r\n\r\n```\r\ngit config --global core.autocrlf input\r\n```\r\n\r\n2. Delete the git repo and re-clone it using the updated configuration\r\n\r\n3. Relaunch the docker build\r\n\r\n\r\n**NB!** just setting the configuration without re-cloning the repo doesn&#39;t help. \r\n","title":"Can&#39;t run gradle wrapper with docker build","body":"<p>Got exact same problem on Windows environment. This has to do with the line endings of the shell script files.</p>\n<p>I fixed it this way:</p>\n<ol>\n<li>Step - set the line endings to match the *nix style</li>\n</ol>\n<pre><code>git config --global core.autocrlf input\n</code></pre>\n<ol start=\"2\">\n<li><p>Delete the git repo and re-clone it using the updated configuration</p>\n</li>\n<li><p>Relaunch the docker build</p>\n</li>\n</ol>\n<p><strong>NB!</strong> just setting the configuration without re-cloning the repo doesn't help.</p>\n"},{"tags":[],"owner":{"account_id":532848,"reputation":854,"user_id":903610,"accept_rate":83,"display_name":"MHM"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1650595999,"creation_date":1650595999,"answer_id":71962964,"question_id":70844518,"body_markdown":"I was having the same problem with the Windows environment. This happens according to carriage return (`\\r`) line endings in the bash script as [@thokuest][1] pointed out. But you should consider when you changed the line ending to `LF` from `CLRF` in IntelliJ, the `gradlew` file in the container is not changed accordingly and it is cached from your previous `docker build .` command. So you should run this command:\r\n\r\n```docker build --no-cache .```\r\n\r\nor:\r\n\r\n```docker build --no-cache --progress=plain .``` if you want to see full output.\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/5006866/thokuest","title":"Can&#39;t run gradle wrapper with docker build","body":"<p>I was having the same problem with the Windows environment. This happens according to carriage return (<code>\\r</code>) line endings in the bash script as <a href=\"https://stackoverflow.com/users/5006866/thokuest\">@thokuest</a> pointed out. But you should consider when you changed the line ending to <code>LF</code> from <code>CLRF</code> in IntelliJ, the <code>gradlew</code> file in the container is not changed accordingly and it is cached from your previous <code>docker build .</code> command. So you should run this command:</p>\n<p><code>docker build --no-cache .</code></p>\n<p>or:</p>\n<p><code>docker build --no-cache --progress=plain .</code> if you want to see full output.</p>\n"},{"tags":[],"owner":{"account_id":1369345,"reputation":1739,"user_id":1305029,"accept_rate":46,"display_name":"ranjan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653383151,"creation_date":1653383151,"answer_id":72360107,"question_id":70844518,"body_markdown":"Converting EOL to UNIX (LF) of the gradlew file should work.\r\nIt can be fixed using notepad++.\r\n\r\n- Open the gradlew file in notepad++\r\n\r\n- Edit -&gt; EOL Conversion -&gt; UNIX (LF) \r\n- save","title":"Can&#39;t run gradle wrapper with docker build","body":"<p>Converting EOL to UNIX (LF) of the gradlew file should work.\nIt can be fixed using notepad++.</p>\n<ul>\n<li><p>Open the gradlew file in notepad++</p>\n</li>\n<li><p>Edit -&gt; EOL Conversion -&gt; UNIX (LF)</p>\n</li>\n<li><p>save</p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2292490,"reputation":629,"user_id":2014865,"display_name":"Mohanraj Karatadipalayam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659603152,"creation_date":1659603152,"answer_id":73232970,"question_id":70844518,"body_markdown":"You need to run dos2unix command like below\r\n\r\n    dos2unix ./gradlew\r\n\r\nAnd then don&#39;t forget to run the docker build with --no-cache, to avoid picking layer caches from your previous `docker build`  like below\r\n\r\n\r\n     docker build --no-cache .","title":"Can&#39;t run gradle wrapper with docker build","body":"<p>You need to run dos2unix command like below</p>\n<pre><code>dos2unix ./gradlew\n</code></pre>\n<p>And then don't forget to run the docker build with --no-cache, to avoid picking layer caches from your previous <code>docker build</code>  like below</p>\n<pre><code> docker build --no-cache .\n</code></pre>\n"}],"owner":{"account_id":5814053,"reputation":2527,"user_id":7759514,"accept_rate":61,"display_name":"Tobiq"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6928,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":5,"score":5,"last_activity_date":1659603152,"creation_date":1643093820,"question_id":70844518,"body_markdown":"I have this small build: \r\n```dockerfile\r\nFROM eclipse-temurin:17-jdk as build-java\r\nCOPY java-project /root/project\r\nWORKDIR /root/project\r\nRUN chmod +x ./gradlew\r\nRUN ls\r\nRUN ./gradlew ...\r\n```\r\n\r\n```\r\n#9 [build-build-java 5/6] RUN ls\r\n#9 sha256:2d05b1e31ea4eaa8a9343b4f48fadcf7351b9d55dcc9c27e572d7bb32c4d723c\r\n#9 0.194 build\r\n#9 0.194 build.gradle\r\n#9 0.194 docker-compose.yml\r\n#9 0.194 gradle\r\n#9 0.194 gradlew\r\n#9 0.194 gradlew.bat\r\n#9 0.194 HELP.md\r\n#9 0.194 lombok.config\r\n#9 0.194 settings.gradle\r\n#9 0.194 src\r\n#9 DONE 0.2s\r\n\r\n#10 [build-build-java 6/6] RUN ./gradlew ...\r\n#10 sha256:62cb4a1a6288008f3faccc3504e63ef87d30c3d7fde904a0576ffcf571e9b310\r\n#10 0.310 /bin/sh: 1: ./gradlew: not found\r\n#10 ERROR: executor failed running [/bin/sh -c ./gradlew ...]: exit code: 127\r\n\r\n```\r\nI&#39;ve bene stuck on this for a while now.\r\n\r\nI&#39;ve tried using `FROM gradle` instead and then using `gradle ...` but then I get this file mount error: \r\n```#10 [build-build-java 6/6] RUN gradle ...\r\n#10 sha256:26de7798a76971c3eb12e6398f830ee487fe41c110d0f8ca6a23a92ee5437267\r\n#10 0.854 \r\n#10 0.854 Welcome to Gradle 7.3.3!\r\n#10 0.854\r\n#10 0.854 Here are the highlights of this release:\r\n#10 0.854  - Easily declare new test suites in Java projects\r\n#10 0.855  - Support for Java 17\r\n#10 0.855  - Support for Scala 3\r\n#10 0.855\r\n#10 0.855 For more details see https://docs.gradle.org/7.3.3/release-notes.html\r\n#10 0.855\r\n#10 0.952 Starting a Gradle Daemon (subsequent builds will be faster)\r\n#10 2.153 Unable to list file systems to check whether they can be watched. Assuming all file systems can be watched. Re\r\nason: Could not query file systems: could not open mount file (errno 2: No such file or directory)\r\n\r\n```","title":"Can&#39;t run gradle wrapper with docker build","body":"<p>I have this small build:</p>\n<pre><code>FROM eclipse-temurin:17-jdk as build-java\nCOPY java-project /root/project\nWORKDIR /root/project\nRUN chmod +x ./gradlew\nRUN ls\nRUN ./gradlew ...\n</code></pre>\n<pre><code>#9 [build-build-java 5/6] RUN ls\n#9 sha256:2d05b1e31ea4eaa8a9343b4f48fadcf7351b9d55dcc9c27e572d7bb32c4d723c\n#9 0.194 build\n#9 0.194 build.gradle\n#9 0.194 docker-compose.yml\n#9 0.194 gradle\n#9 0.194 gradlew\n#9 0.194 gradlew.bat\n#9 0.194 HELP.md\n#9 0.194 lombok.config\n#9 0.194 settings.gradle\n#9 0.194 src\n#9 DONE 0.2s\n\n#10 [build-build-java 6/6] RUN ./gradlew ...\n#10 sha256:62cb4a1a6288008f3faccc3504e63ef87d30c3d7fde904a0576ffcf571e9b310\n#10 0.310 /bin/sh: 1: ./gradlew: not found\n#10 ERROR: executor failed running [/bin/sh -c ./gradlew ...]: exit code: 127\n\n</code></pre>\n<p>I've bene stuck on this for a while now.</p>\n<p>I've tried using <code>FROM gradle</code> instead and then using <code>gradle ...</code> but then I get this file mount error:</p>\n<pre><code>#10 sha256:26de7798a76971c3eb12e6398f830ee487fe41c110d0f8ca6a23a92ee5437267\n#10 0.854 \n#10 0.854 Welcome to Gradle 7.3.3!\n#10 0.854\n#10 0.854 Here are the highlights of this release:\n#10 0.854  - Easily declare new test suites in Java projects\n#10 0.855  - Support for Java 17\n#10 0.855  - Support for Scala 3\n#10 0.855\n#10 0.855 For more details see https://docs.gradle.org/7.3.3/release-notes.html\n#10 0.855\n#10 0.952 Starting a Gradle Daemon (subsequent builds will be faster)\n#10 2.153 Unable to list file systems to check whether they can be watched. Assuming all file systems can be watched. Re\nason: Could not query file systems: could not open mount file (errno 2: No such file or directory)\n\n</code></pre>\n"},{"tags":["java","android","service","accelerometer"],"comments":[{"owner":{"account_id":6283885,"reputation":613,"user_id":4883879,"display_name":"Fabio"},"score":1,"creation_date":1659604600,"post_id":73232950,"comment_id":129335725,"body_markdown":"It happens because when the app goes into the background the service can get blocked. To keep it active you have to use a notification.\n\nHere the documentation: https://developer.android.com/guide/components/foreground-services","body":"It happens because when the app goes into the background the service can get blocked. To keep it active you have to use a notification.  Here the documentation: <a href=\"https://developer.android.com/guide/components/foreground-services\" rel=\"nofollow noreferrer\">developer.android.com/guide/components/foreground-services</a>"},{"owner":{"account_id":17559461,"reputation":51,"user_id":12738175,"display_name":"panostr"},"score":0,"creation_date":1659614303,"post_id":73232950,"comment_id":129339305,"body_markdown":"@Fabio Yes you are right it works now with the notification. One more question. This code is inside a library, that means the final file is an .aar extension. I want on click on this notification to open the host app. How can i achieve that?","body":"@Fabio Yes you are right it works now with the notification. One more question. This code is inside a library, that means the final file is an .aar extension. I want on click on this notification to open the host app. How can i achieve that?"}],"owner":{"account_id":17559461,"reputation":51,"user_id":12738175,"display_name":"panostr"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659603057,"creation_date":1659603057,"question_id":73232950,"body_markdown":"I have an issue with my code. I have a service that implements the SensorEventListener that i want to keep running in the background. When in foreground it works as it should but when i put my app in background, the accelerometer sensor gives me results for 1-2 minutes and then it stops working. Below is my service.\r\n\r\n    public class HealthService extends Service implements SensorEventListener {\r\n\r\n    // ===========================================================\r\n    // Constants\r\n    // ===========================================================\r\n\r\n    // ===========================================================\r\n    // Fields\r\n    // ===========================================================\r\n\r\n    private Context mContext;\r\n    private SensorManager mSensorManager;\r\n    private Sensor mSensor;\r\n    private int mSteps = 0;\r\n    private final int ACCEL_RING_SIZE = 50;\r\n    private final int VEL_RING_SIZE = 10;\r\n    private final float STEP_THRESHOLD = 20f;\r\n    private final int STEP_DELAY_NS = 250000000;\r\n    private int accelRingCounter = 0;\r\n    private float[] accelRingX = new float[ACCEL_RING_SIZE];\r\n    private float[] accelRingY = new float[ACCEL_RING_SIZE];\r\n    private float[] accelRingZ = new float[ACCEL_RING_SIZE];\r\n    private int velRingCounter = 0;\r\n    private float[] velRing = new float[VEL_RING_SIZE];\r\n    private long lastStepTimeNs = 0;\r\n    private float oldVelocityEstimate = 0;\r\n\r\n    // ===========================================================\r\n    // Contructors\r\n    // ===========================================================\r\n\r\n    // ===========================================================\r\n    // Methods for/from SuperClass/Interfaces\r\n    // ===========================================================\r\n\r\n\r\n    @Override\r\n    public void onCreate() {\r\n        super.onCreate();\r\n\r\n        mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);\r\n        mSensor = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);\r\n        registerStepSensor();\r\n    }\r\n\r\n    @Override\r\n    public int onStartCommand(Intent intent, int flags, int startId) {\r\n        new Thread(\r\n                () -&gt; {\r\n                    while (true) {\r\n                        sendSteps();\r\n                        try {\r\n                            Thread.sleep(10000);\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                }\r\n        ).start();\r\n\r\n        return super.onStartCommand(intent, flags, startId);\r\n    }\r\n\r\n    @Override\r\n    public void onDestroy() {\r\n        super.onDestroy();\r\n\r\n        unregisterStepSensor();\r\n    }\r\n\r\n    @Nullable\r\n    @Override\r\n    public IBinder onBind(Intent intent) {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public void onSensorChanged(SensorEvent sensorEvent) {\r\n        if (sensorEvent.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {\r\n            updateSteps(\r\n                    sensorEvent.timestamp,\r\n                    sensorEvent.values[0],\r\n                    sensorEvent.values[1],\r\n                    sensorEvent.values[2]);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onAccuracyChanged(Sensor sensor, int i) {\r\n\r\n    }\r\n\r\n    // ===========================================================\r\n    // Methods\r\n    // ===========================================================\r\n\r\n    public void registerStepSensor() {\r\n        mSensorManager.registerListener(this, mSensor, SensorManager.SENSOR_DELAY_GAME);\r\n    }\r\n\r\n    public void unregisterStepSensor() {\r\n        mSensorManager.unregisterListener(this);\r\n    }\r\n\r\n    private void updateSteps(long timeNs, float x, float y, float z) {\r\n        float[] currentAccel = new float[3];\r\n        currentAccel[0] = x;\r\n        currentAccel[1] = y;\r\n        currentAccel[2] = z;\r\n\r\n        // First step is to update our guess of where the global z vector is.\r\n        accelRingCounter++;\r\n        accelRingX[accelRingCounter % ACCEL_RING_SIZE] = currentAccel[0];\r\n        accelRingY[accelRingCounter % ACCEL_RING_SIZE] = currentAccel[1];\r\n        accelRingZ[accelRingCounter % ACCEL_RING_SIZE] = currentAccel[2];\r\n\r\n        float[] worldZ = new float[3];\r\n        worldZ[0] = sum(accelRingX) / Math.min(accelRingCounter, ACCEL_RING_SIZE);\r\n        worldZ[1] = sum(accelRingY) / Math.min(accelRingCounter, ACCEL_RING_SIZE);\r\n        worldZ[2] = sum(accelRingZ) / Math.min(accelRingCounter, ACCEL_RING_SIZE);\r\n\r\n        float normalization_factor = norm(worldZ);\r\n\r\n        worldZ[0] = worldZ[0] / normalization_factor;\r\n        worldZ[1] = worldZ[1] / normalization_factor;\r\n        worldZ[2] = worldZ[2] / normalization_factor;\r\n\r\n        float currentZ = dot(worldZ, currentAccel) - normalization_factor;\r\n        velRingCounter++;\r\n        velRing[velRingCounter % VEL_RING_SIZE] = currentZ;\r\n\r\n        float velocityEstimate = sum(velRing);\r\n\r\n        if (velocityEstimate &gt; STEP_THRESHOLD\r\n                &amp;&amp; oldVelocityEstimate &lt;= STEP_THRESHOLD\r\n                &amp;&amp; (timeNs - lastStepTimeNs &gt; STEP_DELAY_NS)) {\r\n            mSteps++;\r\n            HealthUtils.setStepsCounter(mContext, mSteps);\r\n            lastStepTimeNs = timeNs;\r\n        }\r\n        oldVelocityEstimate = velocityEstimate;\r\n    }\r\n\r\n    private float sum(float[] array) {\r\n        float retval = 0;\r\n        for (float v : array) {\r\n            retval += v;\r\n        }\r\n        return retval;\r\n    }\r\n\r\n    private float[] cross(float[] arrayA, float[] arrayB) {\r\n        float[] retArray = new float[3];\r\n        retArray[0] = arrayA[1] * arrayB[2] - arrayA[2] * arrayB[1];\r\n        retArray[1] = arrayA[2] * arrayB[0] - arrayA[0] * arrayB[2];\r\n        retArray[2] = arrayA[0] * arrayB[1] - arrayA[1] * arrayB[0];\r\n        return retArray;\r\n    }\r\n\r\n    private float norm(float[] array) {\r\n        float retval = 0;\r\n        for (float v : array) {\r\n            retval += v * v;\r\n        }\r\n        return (float) Math.sqrt(retval);\r\n    }\r\n\r\n    private float dot(float[] a, float[] b) {\r\n        return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\r\n    }\r\n\r\n    private float[] normalize(float[] a) {\r\n        float[] retval = new float[a.length];\r\n        float norm = norm(a);\r\n        for (int i = 0; i &lt; a.length; i++) {\r\n            retval[i] = a[i] / norm;\r\n        }\r\n        return retval;\r\n    }\r\n\r\n    private void sendSteps() {\r\n        String date = new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss&quot;, Locale.getDefault()).format(new Date());\r\n\r\n        HealthManager.setPacingDetails(new PacingCalculateRequest()\r\n                        .setCounter(HealthUtils.getStepsCounter(mContext))\r\n                        .setDate(date),\r\n                new CallbackReceiver&lt;JSONObject&gt;() {\r\n                    @Override\r\n                    public void onSuccess(JSONObject result) {\r\n                        HealthUtils.log(&quot;Health Service success&quot;);\r\n                        int status = result.optInt(&quot;status&quot;, 2);\r\n                        if (status == 1) {\r\n                            mSteps = 0;\r\n                            HealthUtils.setStepsCounter(mContext, 0);\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onFailure(int errorCode) {\r\n                        HealthUtils.log(&quot;Health Service error: &quot; + String.valueOf(errorCode));\r\n                    }\r\n                });\r\n    }}\r\n\r\n\r\n*Parts of the code is based from here: http://www.gadgetsaint.com/android/create-pedometer-step-counter-android/#.Weg2KmiCyM8*","title":"SensorEventListener in Background Service stops working","body":"<p>I have an issue with my code. I have a service that implements the SensorEventListener that i want to keep running in the background. When in foreground it works as it should but when i put my app in background, the accelerometer sensor gives me results for 1-2 minutes and then it stops working. Below is my service.</p>\n<pre><code>public class HealthService extends Service implements SensorEventListener {\n\n// ===========================================================\n// Constants\n// ===========================================================\n\n// ===========================================================\n// Fields\n// ===========================================================\n\nprivate Context mContext;\nprivate SensorManager mSensorManager;\nprivate Sensor mSensor;\nprivate int mSteps = 0;\nprivate final int ACCEL_RING_SIZE = 50;\nprivate final int VEL_RING_SIZE = 10;\nprivate final float STEP_THRESHOLD = 20f;\nprivate final int STEP_DELAY_NS = 250000000;\nprivate int accelRingCounter = 0;\nprivate float[] accelRingX = new float[ACCEL_RING_SIZE];\nprivate float[] accelRingY = new float[ACCEL_RING_SIZE];\nprivate float[] accelRingZ = new float[ACCEL_RING_SIZE];\nprivate int velRingCounter = 0;\nprivate float[] velRing = new float[VEL_RING_SIZE];\nprivate long lastStepTimeNs = 0;\nprivate float oldVelocityEstimate = 0;\n\n// ===========================================================\n// Contructors\n// ===========================================================\n\n// ===========================================================\n// Methods for/from SuperClass/Interfaces\n// ===========================================================\n\n\n@Override\npublic void onCreate() {\n    super.onCreate();\n\n    mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);\n    mSensor = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);\n    registerStepSensor();\n}\n\n@Override\npublic int onStartCommand(Intent intent, int flags, int startId) {\n    new Thread(\n            () -&gt; {\n                while (true) {\n                    sendSteps();\n                    try {\n                        Thread.sleep(10000);\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                }\n            }\n    ).start();\n\n    return super.onStartCommand(intent, flags, startId);\n}\n\n@Override\npublic void onDestroy() {\n    super.onDestroy();\n\n    unregisterStepSensor();\n}\n\n@Nullable\n@Override\npublic IBinder onBind(Intent intent) {\n    return null;\n}\n\n@Override\npublic void onSensorChanged(SensorEvent sensorEvent) {\n    if (sensorEvent.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {\n        updateSteps(\n                sensorEvent.timestamp,\n                sensorEvent.values[0],\n                sensorEvent.values[1],\n                sensorEvent.values[2]);\n    }\n}\n\n@Override\npublic void onAccuracyChanged(Sensor sensor, int i) {\n\n}\n\n// ===========================================================\n// Methods\n// ===========================================================\n\npublic void registerStepSensor() {\n    mSensorManager.registerListener(this, mSensor, SensorManager.SENSOR_DELAY_GAME);\n}\n\npublic void unregisterStepSensor() {\n    mSensorManager.unregisterListener(this);\n}\n\nprivate void updateSteps(long timeNs, float x, float y, float z) {\n    float[] currentAccel = new float[3];\n    currentAccel[0] = x;\n    currentAccel[1] = y;\n    currentAccel[2] = z;\n\n    // First step is to update our guess of where the global z vector is.\n    accelRingCounter++;\n    accelRingX[accelRingCounter % ACCEL_RING_SIZE] = currentAccel[0];\n    accelRingY[accelRingCounter % ACCEL_RING_SIZE] = currentAccel[1];\n    accelRingZ[accelRingCounter % ACCEL_RING_SIZE] = currentAccel[2];\n\n    float[] worldZ = new float[3];\n    worldZ[0] = sum(accelRingX) / Math.min(accelRingCounter, ACCEL_RING_SIZE);\n    worldZ[1] = sum(accelRingY) / Math.min(accelRingCounter, ACCEL_RING_SIZE);\n    worldZ[2] = sum(accelRingZ) / Math.min(accelRingCounter, ACCEL_RING_SIZE);\n\n    float normalization_factor = norm(worldZ);\n\n    worldZ[0] = worldZ[0] / normalization_factor;\n    worldZ[1] = worldZ[1] / normalization_factor;\n    worldZ[2] = worldZ[2] / normalization_factor;\n\n    float currentZ = dot(worldZ, currentAccel) - normalization_factor;\n    velRingCounter++;\n    velRing[velRingCounter % VEL_RING_SIZE] = currentZ;\n\n    float velocityEstimate = sum(velRing);\n\n    if (velocityEstimate &gt; STEP_THRESHOLD\n            &amp;&amp; oldVelocityEstimate &lt;= STEP_THRESHOLD\n            &amp;&amp; (timeNs - lastStepTimeNs &gt; STEP_DELAY_NS)) {\n        mSteps++;\n        HealthUtils.setStepsCounter(mContext, mSteps);\n        lastStepTimeNs = timeNs;\n    }\n    oldVelocityEstimate = velocityEstimate;\n}\n\nprivate float sum(float[] array) {\n    float retval = 0;\n    for (float v : array) {\n        retval += v;\n    }\n    return retval;\n}\n\nprivate float[] cross(float[] arrayA, float[] arrayB) {\n    float[] retArray = new float[3];\n    retArray[0] = arrayA[1] * arrayB[2] - arrayA[2] * arrayB[1];\n    retArray[1] = arrayA[2] * arrayB[0] - arrayA[0] * arrayB[2];\n    retArray[2] = arrayA[0] * arrayB[1] - arrayA[1] * arrayB[0];\n    return retArray;\n}\n\nprivate float norm(float[] array) {\n    float retval = 0;\n    for (float v : array) {\n        retval += v * v;\n    }\n    return (float) Math.sqrt(retval);\n}\n\nprivate float dot(float[] a, float[] b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\nprivate float[] normalize(float[] a) {\n    float[] retval = new float[a.length];\n    float norm = norm(a);\n    for (int i = 0; i &lt; a.length; i++) {\n        retval[i] = a[i] / norm;\n    }\n    return retval;\n}\n\nprivate void sendSteps() {\n    String date = new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss&quot;, Locale.getDefault()).format(new Date());\n\n    HealthManager.setPacingDetails(new PacingCalculateRequest()\n                    .setCounter(HealthUtils.getStepsCounter(mContext))\n                    .setDate(date),\n            new CallbackReceiver&lt;JSONObject&gt;() {\n                @Override\n                public void onSuccess(JSONObject result) {\n                    HealthUtils.log(&quot;Health Service success&quot;);\n                    int status = result.optInt(&quot;status&quot;, 2);\n                    if (status == 1) {\n                        mSteps = 0;\n                        HealthUtils.setStepsCounter(mContext, 0);\n                    }\n                }\n\n                @Override\n                public void onFailure(int errorCode) {\n                    HealthUtils.log(&quot;Health Service error: &quot; + String.valueOf(errorCode));\n                }\n            });\n}}\n</code></pre>\n<p><em>Parts of the code is based from here: <a href=\"http://www.gadgetsaint.com/android/create-pedometer-step-counter-android/#.Weg2KmiCyM8\" rel=\"nofollow noreferrer\">http://www.gadgetsaint.com/android/create-pedometer-step-counter-android/#.Weg2KmiCyM8</a></em></p>\n"},{"tags":["java","for-loop"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1659587111,"post_id":73230091,"comment_id":129331014,"body_markdown":"It looks like method `toRevIdxString()` is not printing what you expect it to print. So why do you think the problem is in method `printInfo`? Also, in the text file data that you posted in your question, there are no duplicates. The second circle has a radius of 3.2 while the first circle has a radius of 2.5. Try to post a [mcve]. Post a `main` method which calls method `printInfo`. Also post the code for method `toRevIdxString()`.","body":"It looks like method <code>toRevIdxString()</code> is not printing what you expect it to print. So why do you think the problem is in method <code>printInfo</code>? Also, in the text file data that you posted in your question, there are no duplicates. The second circle has a radius of 3.2 while the first circle has a radius of 2.5. Try to post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Post a <code>main</code> method which calls method <code>printInfo</code>. Also post the code for method <code>toRevIdxString()</code>."},{"owner":{"account_id":25866862,"reputation":7,"user_id":19687871,"display_name":"pnrgl"},"score":0,"creation_date":1659588358,"post_id":73230091,"comment_id":129331156,"body_markdown":"Nice to see you again @Abra, I have edited the initial post but I did not do a minimal reproducible. You are correct about the new circle having a radius as 3.2, I was using the the output as reference and I&#39;m assuming that its wrong.","body":"Nice to see you again @Abra, I have edited the initial post but I did not do a minimal reproducible. You are correct about the new circle having a radius as 3.2, I was using the the output as reference and I&#39;m assuming that its wrong."},{"owner":{"account_id":25866862,"reputation":7,"user_id":19687871,"display_name":"pnrgl"},"score":0,"creation_date":1659589420,"post_id":73230091,"comment_id":129331323,"body_markdown":"I think I figured out one of the problems that I was having, but I think what I need to do is find a way to use the first number to be used as how many times the program will loop for shapes and store that into the 0 position.","body":"I think I figured out one of the problems that I was having, but I think what I need to do is find a way to use the first number to be used as how many times the program will loop for shapes and store that into the 0 position."},{"owner":{"account_id":12991330,"reputation":94,"user_id":9390458,"display_name":"&#199;iğdem Erşep&#231;iler"},"score":0,"creation_date":1659617982,"post_id":73230091,"comment_id":129340747,"body_markdown":"I think it is because you allocate 10 spaces for shapes array, and add or not you increment i. So if no = 5, there is no shape but because i is incremented, current shapes[i] will be null. You can add a control to your printinfo() method and not print null values. Or do not increment i in main method if the value is null.","body":"I think it is because you allocate 10 spaces for shapes array, and add or not you increment i. So if no = 5, there is no shape but because i is incremented, current shapes[i] will be null. You can add a control to your printinfo() method and not print null values. Or do not increment i in main method if the value is null."}],"owner":{"account_id":25866862,"reputation":7,"user_id":19687871,"display_name":"pnrgl"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1659602672,"creation_date":1659584207,"question_id":73230091,"body_markdown":"I am to use data stored in a text file. The top number is how many loops we are supposed to print out to each assigned number to shape. If there are duplicates, detect the amount of duplicates and output if any. I was able to print out data, but it does not start from the initial count of 0 and is supposed to repeat the same data if the file has the same corresponding number to shape. For example:  \r\n\r\n```java\r\npublic class Assignment10 {\r\n\tpublic void printInfo(Shape[] sh, Circle newCircle, Rectangle newRectangle, Square newSquare, Ellipse newEllipse) {\r\n\t\tSystem.out.println(&quot;========BEGIN: printInfo()========&quot;);\r\n\t\tfor (int i = 0; i &lt; sh.length; i++)\r\n\t\t\tSystem.out.printf(i + &quot;: &quot; + sh[i] + &quot;\\n&quot;);\r\n\t\tSystem.out.printf(&quot;\\n&quot;);\r\n\t\tnewCircle.toRevIdxString();\r\n\t\tnewRectangle.toRevIdxString();\r\n\t\tnewSquare.toRevIdxString();\r\n\t\tnewEllipse.toRevIdxString();\r\n\t\tSystem.out.println(&quot;========END: printInfo()========&quot;);\r\n\t}\r\n\r\n\tpublic void detectDup_CorrectType(Shape[] sh, Circle c, Rectangle r, Square s, Ellipse e) {\r\n\t\tfor (int i = 0; i &lt; sh.length; i++)\r\n\t\t\tfor (int j = i + 1; j &lt; sh.length; j++)\r\n\t\t\t\tif (sh[i].equals(sh[j])) {\r\n\t\t\t\t\tSystem.out.println(&quot;Duplicate detected:&quot;);\r\n\t\t\t\t\tSystem.out.println(i + &quot;: &quot; + sh[i]);\r\n\t\t\t\t\tSystem.out.println(j + &quot;: &quot; + sh[j]);\r\n\t\t\t\t\tSystem.out.println(&quot;\\n&quot;);\r\n\t\t\t\t}\r\n```\r\n\r\nthe text file data I have is \r\n```none\r\n5\r\n1\r\n2.5\r\n2\r\n4\r\n3\r\n3\r\n5\r\n2\r\n6\r\n5.3\r\n1\r\n3.2\r\n```\r\nIn my console it prints \r\n```none\r\n========BEGIN: printInfo()========\r\n0: null\r\n1: Circle with (2.50) has Perimeter=15.71 and Area=19.63\r\n2: Rectangle with (4.00, 3.00) has Perimeter=14.00 and Area=12.00\r\n3: Square with (5.0) has Perimeter=20.0 and Area=25.0\r\n4: Rectangle with (6.00, 5.30) has Perimeter=22.60 and Area=31.80\r\n5: Circle with (3.20) has Perimeter=20.11 and Area=32.17\r\n6: null\r\n7: null\r\n8: null\r\n9: null\r\n\r\nCircle Reverse Idx List-&gt; \r\n[1, 5]\r\nRectangle Reverse Idx List-&gt; \r\n[2, 4]Square Reverse Idx List-&gt; \r\n[3]\r\nEllipse Reverse Idx List-&gt; \r\n[]\r\n========END: printInfo()========\r\n```\r\n\r\nWhen it should print\r\n```none\r\n\r\n========BEGIN: printInfo()========\r\n0: Circle with (2.50) has Perimeter=15.71 and Area=19.63\r\n1: Rectangle with (4.00, 3.00) has Perimeter=14.00 and Area=12.00\r\n2: Square with (5.00) has Perimeter=20.00 and Area=25.00\r\n3: Rectangle with (6.00, 5.30) has Perimeter=22.60 and Area=31.80\r\n4: Circle with (2.50) has Perimeter=15.71 and Area=19.63\r\nCircle Reverse Idx List-&gt;[0, 4]\r\nRectangle Reverse Idx List-&gt;[1, 3]\r\nSquare Reverse Idx List-&gt;[2]\r\nEllipse Reverse Idx List-&gt;[]\r\n========END: printInfo()========\r\nDuplicate detected:\r\n0: Circle with (2.50) has Perimeter=15.71 and Area=19.63\r\n4: Circle with (2.50) has Perimeter=15.71 and Area=19.63\r\n========BEGIN: printInfo()========\r\n0: Circle with (2.50) has Perimeter=15.71 and Area=19.63\r\n1: Rectangle with (4.00, 3.00) has Perimeter=14.00 and Area=12.00\r\n2: Square with (5.00) has Perimeter=20.00 and Area=25.00\r\n3: Rectangle with (6.00, 5.30) has Perimeter=22.60 and Area=31.80\r\n4: Circle with (2.50) has Perimeter=15.71 and Area=19.63\r\nCircle Reverse Idx List-&gt;[0, 4]\r\nRectangle Reverse Idx List-&gt;[1, 3]\r\nSquare Reverse Idx List-&gt;[2]\r\nEllipse Reverse Idx List-&gt;[]\r\n========END: printInfo()========\r\n```\r\n\r\nI have all the other methods in their respective classes. I am hoping the problem lies here where I have posted the printInfo.\r\n\r\nIf I need to add the full code that includes the main I will. \r\n\r\n```java\r\npublic static void main(String[] args) throws FileNotFoundException {\r\n\tAssignment10 at = new Assignment10();\r\n\tint no, i = 0;\r\n\tShape[] shapes = new Shape[10];\r\n\tCircle newCircle = new Circle();\r\n\tRectangle newRectangle = new Rectangle();\r\n\tSquare newSquare = new Square();\r\n\tEllipse newEllipse = new Ellipse();\r\n\tFile input = new File(&quot;input01.txt&quot;);\r\n\tScanner sc = new Scanner(input);\r\n\twhile (sc.hasNextLine()) {\r\n\t\tno = sc.nextInt();\r\n\t\tswitch (no) {\r\n\t\tcase 1:\r\n\t\t\tdouble rad = sc.nextDouble();\r\n\t\t\tshapes[i] = new Circle(rad);\r\n\t\t\tnewCircle.idx.add(i);\r\n\t\t\tbreak;\r\n\t\tcase 2:\r\n\t\t\tdouble len = sc.nextDouble();\r\n\t\t\tdouble brd = sc.nextDouble();\r\n\t\t\tshapes[i] = new Rectangle(len, brd);\r\n\t\t\tnewRectangle.idx.add(i);\r\n\t\t\tbreak;\r\n\t\tcase 3:\r\n\t\t\tfloat side = sc.nextFloat();\r\n\t\t\tshapes[i] = new Square(side);\r\n\t\t\tnewSquare.idx.add(i);\r\n\t\t\tbreak;\r\n\t\tcase 4:\r\n\t\t\tfloat a = sc.nextFloat();\r\n\t\t\tfloat b = sc.nextFloat();\r\n\t\t\tshapes[i] = new Ellipse(a, b);\r\n\t\t\tnewEllipse.idx.add(i);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\ti++;\r\n\t}\r\n\tat.printInfo(shapes, newCircle, newRectangle, newSquare, newEllipse);\r\n\tat.detectDup_CorrectType(shapes, newCircle, newRectangle, newSquare, newEllipse);\r\n\tat.printInfo(shapes, newCircle, newRectangle, newSquare, newEllipse);\r\n}\r\n```\r\n```java\r\npublic void toRevIdxString() {\r\n\tSystem.out.println(&quot;Ellipse Reverse Idx List-&gt; &quot;);\r\n\tSystem.out.println(idx);\r\n}\r\n```","title":"How to use text file to store as data","body":"<p>I am to use data stored in a text file. The top number is how many loops we are supposed to print out to each assigned number to shape. If there are duplicates, detect the amount of duplicates and output if any. I was able to print out data, but it does not start from the initial count of 0 and is supposed to repeat the same data if the file has the same corresponding number to shape. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Assignment10 {\n    public void printInfo(Shape[] sh, Circle newCircle, Rectangle newRectangle, Square newSquare, Ellipse newEllipse) {\n        System.out.println(&quot;========BEGIN: printInfo()========&quot;);\n        for (int i = 0; i &lt; sh.length; i++)\n            System.out.printf(i + &quot;: &quot; + sh[i] + &quot;\\n&quot;);\n        System.out.printf(&quot;\\n&quot;);\n        newCircle.toRevIdxString();\n        newRectangle.toRevIdxString();\n        newSquare.toRevIdxString();\n        newEllipse.toRevIdxString();\n        System.out.println(&quot;========END: printInfo()========&quot;);\n    }\n\n    public void detectDup_CorrectType(Shape[] sh, Circle c, Rectangle r, Square s, Ellipse e) {\n        for (int i = 0; i &lt; sh.length; i++)\n            for (int j = i + 1; j &lt; sh.length; j++)\n                if (sh[i].equals(sh[j])) {\n                    System.out.println(&quot;Duplicate detected:&quot;);\n                    System.out.println(i + &quot;: &quot; + sh[i]);\n                    System.out.println(j + &quot;: &quot; + sh[j]);\n                    System.out.println(&quot;\\n&quot;);\n                }\n</code></pre>\n<p>the text file data I have is</p>\n<pre class=\"lang-none prettyprint-override\"><code>5\n1\n2.5\n2\n4\n3\n3\n5\n2\n6\n5.3\n1\n3.2\n</code></pre>\n<p>In my console it prints</p>\n<pre class=\"lang-none prettyprint-override\"><code>========BEGIN: printInfo()========\n0: null\n1: Circle with (2.50) has Perimeter=15.71 and Area=19.63\n2: Rectangle with (4.00, 3.00) has Perimeter=14.00 and Area=12.00\n3: Square with (5.0) has Perimeter=20.0 and Area=25.0\n4: Rectangle with (6.00, 5.30) has Perimeter=22.60 and Area=31.80\n5: Circle with (3.20) has Perimeter=20.11 and Area=32.17\n6: null\n7: null\n8: null\n9: null\n\nCircle Reverse Idx List-&gt; \n[1, 5]\nRectangle Reverse Idx List-&gt; \n[2, 4]Square Reverse Idx List-&gt; \n[3]\nEllipse Reverse Idx List-&gt; \n[]\n========END: printInfo()========\n</code></pre>\n<p>When it should print</p>\n<pre class=\"lang-none prettyprint-override\"><code>\n========BEGIN: printInfo()========\n0: Circle with (2.50) has Perimeter=15.71 and Area=19.63\n1: Rectangle with (4.00, 3.00) has Perimeter=14.00 and Area=12.00\n2: Square with (5.00) has Perimeter=20.00 and Area=25.00\n3: Rectangle with (6.00, 5.30) has Perimeter=22.60 and Area=31.80\n4: Circle with (2.50) has Perimeter=15.71 and Area=19.63\nCircle Reverse Idx List-&gt;[0, 4]\nRectangle Reverse Idx List-&gt;[1, 3]\nSquare Reverse Idx List-&gt;[2]\nEllipse Reverse Idx List-&gt;[]\n========END: printInfo()========\nDuplicate detected:\n0: Circle with (2.50) has Perimeter=15.71 and Area=19.63\n4: Circle with (2.50) has Perimeter=15.71 and Area=19.63\n========BEGIN: printInfo()========\n0: Circle with (2.50) has Perimeter=15.71 and Area=19.63\n1: Rectangle with (4.00, 3.00) has Perimeter=14.00 and Area=12.00\n2: Square with (5.00) has Perimeter=20.00 and Area=25.00\n3: Rectangle with (6.00, 5.30) has Perimeter=22.60 and Area=31.80\n4: Circle with (2.50) has Perimeter=15.71 and Area=19.63\nCircle Reverse Idx List-&gt;[0, 4]\nRectangle Reverse Idx List-&gt;[1, 3]\nSquare Reverse Idx List-&gt;[2]\nEllipse Reverse Idx List-&gt;[]\n========END: printInfo()========\n</code></pre>\n<p>I have all the other methods in their respective classes. I am hoping the problem lies here where I have posted the printInfo.</p>\n<p>If I need to add the full code that includes the main I will.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) throws FileNotFoundException {\n    Assignment10 at = new Assignment10();\n    int no, i = 0;\n    Shape[] shapes = new Shape[10];\n    Circle newCircle = new Circle();\n    Rectangle newRectangle = new Rectangle();\n    Square newSquare = new Square();\n    Ellipse newEllipse = new Ellipse();\n    File input = new File(&quot;input01.txt&quot;);\n    Scanner sc = new Scanner(input);\n    while (sc.hasNextLine()) {\n        no = sc.nextInt();\n        switch (no) {\n        case 1:\n            double rad = sc.nextDouble();\n            shapes[i] = new Circle(rad);\n            newCircle.idx.add(i);\n            break;\n        case 2:\n            double len = sc.nextDouble();\n            double brd = sc.nextDouble();\n            shapes[i] = new Rectangle(len, brd);\n            newRectangle.idx.add(i);\n            break;\n        case 3:\n            float side = sc.nextFloat();\n            shapes[i] = new Square(side);\n            newSquare.idx.add(i);\n            break;\n        case 4:\n            float a = sc.nextFloat();\n            float b = sc.nextFloat();\n            shapes[i] = new Ellipse(a, b);\n            newEllipse.idx.add(i);\n            break;\n        }\n        i++;\n    }\n    at.printInfo(shapes, newCircle, newRectangle, newSquare, newEllipse);\n    at.detectDup_CorrectType(shapes, newCircle, newRectangle, newSquare, newEllipse);\n    at.printInfo(shapes, newCircle, newRectangle, newSquare, newEllipse);\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public void toRevIdxString() {\n    System.out.println(&quot;Ellipse Reverse Idx List-&gt; &quot;);\n    System.out.println(idx);\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-mvc","redis"],"owner":{"account_id":11616761,"reputation":63,"user_id":8509208,"display_name":"TraiTran"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":802,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1659602440,"creation_date":1659581489,"question_id":73229857,"body_markdown":"My service is built with spring boot REST API with Redis.\r\nSome time face with error that logs:\r\n\r\n    nested exception is java.util.concurrent.RejectedExecutionException: event executor terminated\r\n    org.springframework.data.redis.RedisSystemException: Unknown redis exception; nested exception is java.util.concurrent.RejectedExecutionException: event executor terminated\r\n    at org.springframework.data.redis.FallbackExceptionTranslationStrategy.getFallback(FallbackExceptionTranslationStrategy.java:53) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\r\n    at org.springframework.data.redis.FallbackExceptionTranslationStrategy.translate(FallbackExceptionTranslationStrategy.java:43) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\r\n    at org.springframework.data.redis.connection.lettuce.LettuceConnection.convertLettuceAccessException(LettuceConnection.java:270) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\r\n    at org.springframework.data.redis.connection.lettuce.LettuceStringCommands.convertLettuceAccessException(LettuceStringCommands.java:799) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\r\n    at org.springframework.data.redis.connection.lettuce.LettuceStringCommands.setEx(LettuceStringCommands.java:232) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\r\n    at org.springframework.data.redis.connection.DefaultedRedisConnection.setEx(DefaultedRedisConnection.java:302) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\r\n    at org.springframework.data.redis.connection.DefaultStringRedisConnection.setEx(DefaultStringRedisConnection.java:1003) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\r\n    at org.springframework.data.redis.core.DefaultValueOperations$4.potentiallyUsePsetEx(DefaultValueOperations.java:268) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\r\n    at org.springframework.data.redis.core.DefaultValueOperations$4.doInRedis(DefaultValueOperations.java:261) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\r\n    at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:228) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\r\n    at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:188) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\r\n    at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:96) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\r\n    at org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:256) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\r\n\r\nI have researched and fixed it with lettuce pool solution. My config in application.yaml\r\nredis:\r\n  \r\n\r\n    host: ${REDIS_HOST}\r\n      port: ${REDIS_PORT}\r\n      password: ${REDIS_PASSWORD}\r\n      cachePrefix: ${spring.application.name}\r\n      defaultExpiration: 300\r\n      lettuce:\r\n        pool:\r\n          maxActive: ${REDIS_POOL_ACTIVE:40}\r\n          maxIdle: ${REDIS_POOL_MAX_IDLE:40}\r\n          minIdle: ${REDIS_POOL_MIN_IDLE:4}\r\n\r\nMy configuration Redis class\r\n\r\n    @EnableCaching\r\n    @Configuration\r\n    @EnableConfigurationProperties\r\n    public class RedisConfiguration extends CachingConfigurerSupport {\r\n    \r\n        @Autowired\r\n        private  RedisConnectionFactory redisConnectionFactory;\r\n    \r\n        @Primary\r\n        @Bean\r\n        public RedisExpireProperties expireProperties() {\r\n            return new RedisExpireProperties();\r\n        }\r\n    \r\n    \r\n        @Bean\r\n        public RedisCacheManager redisCacheManager(LettuceConnectionFactory lettuceConnectionFactory,\r\n                                                   RedisExpireProperties expireProperties) {\r\n            RedisCacheConfiguration redisCacheConfiguration = RedisCacheConfiguration.defaultCacheConfig()\r\n                    .disableCachingNullValues()\r\n                    .entryTtl(Duration.ofSeconds(expireProperties.getDefaultExpiration()))\r\n                    .serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(RedisSerializer.json()));\r\n    \r\n            if (StringUtils.isNotBlank(expireProperties.getCachePrefix())) {\r\n                String cachePrefix = &quot;.&quot; + expireProperties.getCachePrefix() + &quot;:&quot;;\r\n                redisCacheConfiguration.prefixKeysWith(cachePrefix);\r\n                redisCacheConfiguration.usePrefix();\r\n            }\r\n    \r\n            return RedisCacheManager.RedisCacheManagerBuilder.fromConnectionFactory(lettuceConnectionFactory)\r\n                    .cacheDefaults(redisCacheConfiguration).build();\r\n    \r\n        }\r\n    \r\n        @Bean\r\n        public RedisTemplate&lt;Object, Object&gt; redisTemplate(RedisConnectionFactory redisConnectionFactory) {\r\n            RedisTemplate&lt;Object, Object&gt; redisTemplate = new RedisTemplate&lt;&gt;();\r\n            redisTemplate.setConnectionFactory(redisConnectionFactory);\r\n            redisTemplate.setKeySerializer(new StringRedisSerializer());\r\n            return redisTemplate;\r\n        }\r\n\r\nBut This error still appears. Please suggest for me a new solution to resolve the error.\r\nMany thanks!\r\n\r\n","title":"Java Spring Boot Redis has occurred nested exception is java.util.concurrent.RejectedExecutionException: event executor terminated","body":"<p>My service is built with spring boot REST API with Redis.\nSome time face with error that logs:</p>\n<pre><code>nested exception is java.util.concurrent.RejectedExecutionException: event executor terminated\norg.springframework.data.redis.RedisSystemException: Unknown redis exception; nested exception is java.util.concurrent.RejectedExecutionException: event executor terminated\nat org.springframework.data.redis.FallbackExceptionTranslationStrategy.getFallback(FallbackExceptionTranslationStrategy.java:53) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\nat org.springframework.data.redis.FallbackExceptionTranslationStrategy.translate(FallbackExceptionTranslationStrategy.java:43) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\nat org.springframework.data.redis.connection.lettuce.LettuceConnection.convertLettuceAccessException(LettuceConnection.java:270) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\nat org.springframework.data.redis.connection.lettuce.LettuceStringCommands.convertLettuceAccessException(LettuceStringCommands.java:799) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\nat org.springframework.data.redis.connection.lettuce.LettuceStringCommands.setEx(LettuceStringCommands.java:232) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\nat org.springframework.data.redis.connection.DefaultedRedisConnection.setEx(DefaultedRedisConnection.java:302) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\nat org.springframework.data.redis.connection.DefaultStringRedisConnection.setEx(DefaultStringRedisConnection.java:1003) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\nat org.springframework.data.redis.core.DefaultValueOperations$4.potentiallyUsePsetEx(DefaultValueOperations.java:268) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\nat org.springframework.data.redis.core.DefaultValueOperations$4.doInRedis(DefaultValueOperations.java:261) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\nat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:228) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\nat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:188) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\nat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:96) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\nat org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:256) ~[spring-data-redis-2.2.3.RELEASE.jar!/:2.2.3.RELEASE]\n</code></pre>\n<p>I have researched and fixed it with lettuce pool solution. My config in application.yaml\nredis:</p>\n<pre><code>host: ${REDIS_HOST}\n  port: ${REDIS_PORT}\n  password: ${REDIS_PASSWORD}\n  cachePrefix: ${spring.application.name}\n  defaultExpiration: 300\n  lettuce:\n    pool:\n      maxActive: ${REDIS_POOL_ACTIVE:40}\n      maxIdle: ${REDIS_POOL_MAX_IDLE:40}\n      minIdle: ${REDIS_POOL_MIN_IDLE:4}\n</code></pre>\n<p>My configuration Redis class</p>\n<pre><code>@EnableCaching\n@Configuration\n@EnableConfigurationProperties\npublic class RedisConfiguration extends CachingConfigurerSupport {\n\n    @Autowired\n    private  RedisConnectionFactory redisConnectionFactory;\n\n    @Primary\n    @Bean\n    public RedisExpireProperties expireProperties() {\n        return new RedisExpireProperties();\n    }\n\n\n    @Bean\n    public RedisCacheManager redisCacheManager(LettuceConnectionFactory lettuceConnectionFactory,\n                                               RedisExpireProperties expireProperties) {\n        RedisCacheConfiguration redisCacheConfiguration = RedisCacheConfiguration.defaultCacheConfig()\n                .disableCachingNullValues()\n                .entryTtl(Duration.ofSeconds(expireProperties.getDefaultExpiration()))\n                .serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(RedisSerializer.json()));\n\n        if (StringUtils.isNotBlank(expireProperties.getCachePrefix())) {\n            String cachePrefix = &quot;.&quot; + expireProperties.getCachePrefix() + &quot;:&quot;;\n            redisCacheConfiguration.prefixKeysWith(cachePrefix);\n            redisCacheConfiguration.usePrefix();\n        }\n\n        return RedisCacheManager.RedisCacheManagerBuilder.fromConnectionFactory(lettuceConnectionFactory)\n                .cacheDefaults(redisCacheConfiguration).build();\n\n    }\n\n    @Bean\n    public RedisTemplate&lt;Object, Object&gt; redisTemplate(RedisConnectionFactory redisConnectionFactory) {\n        RedisTemplate&lt;Object, Object&gt; redisTemplate = new RedisTemplate&lt;&gt;();\n        redisTemplate.setConnectionFactory(redisConnectionFactory);\n        redisTemplate.setKeySerializer(new StringRedisSerializer());\n        return redisTemplate;\n    }\n</code></pre>\n<p>But This error still appears. Please suggest for me a new solution to resolve the error.\nMany thanks!</p>\n"},{"tags":["java","spring","spring-boot","rest","spring-restcontroller"],"answers":[{"tags":[],"owner":{"account_id":9843309,"reputation":1992,"user_id":7291698,"display_name":"user7291698"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659602288,"creation_date":1659600466,"answer_id":73232429,"question_id":73232193,"body_markdown":"Use `POST` to store the picture on the server, `GET` to receive it and display it to the user.\r\n\r\n**Update**\r\nYou could try something like this:\r\n\r\n        @RequestMapping(value = &quot;/api/image/save&quot;, method = RequestMethod.POST)\r\n        public void addImage(@RequestBody Image image) {\r\n            imageService.addImage(image);\r\n        }\r\nThis is what you put inside your controller. Then you need an `imageService`-instance which stores the image in the database. And you have an `Image`-class that contains the image data (image comes in e.g. as a base64-encoded String).","title":"how to store user profile pictures in springboot rest api backend application","body":"<p>Use <code>POST</code> to store the picture on the server, <code>GET</code> to receive it and display it to the user.</p>\n<p><strong>Update</strong>\nYou could try something like this:</p>\n<pre><code>    @RequestMapping(value = &quot;/api/image/save&quot;, method = RequestMethod.POST)\n    public void addImage(@RequestBody Image image) {\n        imageService.addImage(image);\n    }\n</code></pre>\n<p>This is what you put inside your controller. Then you need an <code>imageService</code>-instance which stores the image in the database. And you have an <code>Image</code>-class that contains the image data (image comes in e.g. as a base64-encoded String).</p>\n"}],"owner":{"account_id":25759739,"reputation":23,"user_id":19510873,"display_name":"shukhrat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":757,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73232429,"answer_count":1,"score":0,"last_activity_date":1659602288,"creation_date":1659599342,"question_id":73232193,"body_markdown":"I am working in backend part with spring boot and rest api. I need to store user details in database. The question is what is best approach to handle user profile pictures in the server. how to use @POST AND @GET methods in that case? ","title":"how to store user profile pictures in springboot rest api backend application","body":"<p>I am working in backend part with spring boot and rest api. I need to store user details in database. The question is what is best approach to handle user profile pictures in the server. how to use @POST AND @GET methods in that case?</p>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1659605306,"post_id":73232771,"comment_id":129335957,"body_markdown":"Have you checked the values in the database?","body":"Have you checked the values in the database?"},{"owner":{"account_id":8941168,"reputation":61,"user_id":6670138,"display_name":"AppleT"},"score":0,"creation_date":1659605731,"post_id":73232771,"comment_id":129336123,"body_markdown":"The values are INPROGRESS, SUCCESS or FAILURE or null.","body":"The values are INPROGRESS, SUCCESS or FAILURE or null."},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1659607445,"post_id":73232771,"comment_id":129336705,"body_markdown":"`A data base column that you want to map to a Java Enum may not be nullable`","body":"<code>A data base column that you want to map to a Java Enum may not be nullable</code>"}],"owner":{"account_id":8941168,"reputation":61,"user_id":6670138,"display_name":"AppleT"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1659680588,"answer_count":0,"score":0,"last_activity_date":1659602084,"creation_date":1659602084,"question_id":73232771,"body_markdown":"I have an enum in my Model:\r\n\r\n```\r\npublic class RealTimeUpdateLog {\r\n\t\r\n\tpublic enum PROG_STATUS {INPROGRESS, SUCCESS, FAILURE};\r\n\r\n    @Enumerated(EnumType.STRING)\r\n\tprivate PROG_STATUS progStatus;\r\n    ...\r\n    public PROG_STATUS getProgStatus() {\r\n\t\treturn progStatus;\r\n\t}\r\n\r\n\tpublic void setProgStatus(PROG_STATUS progStatus) {\r\n\t\tthis.progStatus = progStatus;\r\n\t}\r\n}\r\n```\r\n\r\nI am trying to read from db:\r\n\r\n```\r\n@Query(&quot;select rtl from RealTimeUpdateLog rtl, RealTimeUpdateLog prtl where rtl.orderId=prtl.orderId and&quot; +\r\n\t\t\t&quot; prtl.customerId=?1 and prtl.seq+1=?2 and prtl.syncCompleted=true and (rtl.progStatus &lt;&gt;?4 or rtl.progStatus is null) and rtl.customerId=?1 and rtl.seq=?2 and rtl.syncCompleted=false and rtl.retryCount&gt;=0 and rtl.retryCount&lt;=?3&quot;)\r\n\tList&lt;RealTimeUpdateLog&gt; findAllIfPreviousSyncedByOrder(Long customerId, int seq, int retryCount, PROG_STATUS progStatus);\r\n```\r\n\r\nand my params to the query are: 60, 2, 1, PROG_STATUS.INPROGRESS\r\n\r\nBut I am getting this error:\r\n\r\n&gt; org.springframework.dao.InvalidDataAccessApiUsageException: Unknown name value [] for enum class [com.myCompany.app.model.RealTimeUpdateLog$PROG_STATUS]; nested exception is java.lang.IllegalArgumentException: Unknown name value [] for enum class [com.myCompany.app.model.RealTimeUpdateLog$PROG_STATUS]\r\n\r\nCan someone help me? Thanks.","title":"InvalidDataAccessApiUsageException: Unknown name value [] for enum class","body":"<p>I have an enum in my Model:</p>\n<pre><code>public class RealTimeUpdateLog {\n    \n    public enum PROG_STATUS {INPROGRESS, SUCCESS, FAILURE};\n\n    @Enumerated(EnumType.STRING)\n    private PROG_STATUS progStatus;\n    ...\n    public PROG_STATUS getProgStatus() {\n        return progStatus;\n    }\n\n    public void setProgStatus(PROG_STATUS progStatus) {\n        this.progStatus = progStatus;\n    }\n}\n</code></pre>\n<p>I am trying to read from db:</p>\n<pre><code>@Query(&quot;select rtl from RealTimeUpdateLog rtl, RealTimeUpdateLog prtl where rtl.orderId=prtl.orderId and&quot; +\n            &quot; prtl.customerId=?1 and prtl.seq+1=?2 and prtl.syncCompleted=true and (rtl.progStatus &lt;&gt;?4 or rtl.progStatus is null) and rtl.customerId=?1 and rtl.seq=?2 and rtl.syncCompleted=false and rtl.retryCount&gt;=0 and rtl.retryCount&lt;=?3&quot;)\n    List&lt;RealTimeUpdateLog&gt; findAllIfPreviousSyncedByOrder(Long customerId, int seq, int retryCount, PROG_STATUS progStatus);\n</code></pre>\n<p>and my params to the query are: 60, 2, 1, PROG_STATUS.INPROGRESS</p>\n<p>But I am getting this error:</p>\n<blockquote>\n<p>org.springframework.dao.InvalidDataAccessApiUsageException: Unknown name value [] for enum class [com.myCompany.app.model.RealTimeUpdateLog$PROG_STATUS]; nested exception is java.lang.IllegalArgumentException: Unknown name value [] for enum class [com.myCompany.app.model.RealTimeUpdateLog$PROG_STATUS]</p>\n</blockquote>\n<p>Can someone help me? Thanks.</p>\n"},{"tags":["java","uribuilder"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1659602940,"post_id":73232735,"comment_id":129335162,"body_markdown":"It&#39;s always DNS. DNS entries are frequently cached at various places (on the remote server end, locally, ...). That&#39;s why they have a TTL. How long ago was the IP changed? What&#39;s the TTL of the entry? If this is the issue then it has nothing to do with Java itself or UriBuilder.","body":"It&#39;s always DNS. DNS entries are frequently cached at various places (on the remote server end, locally, ...). That&#39;s why they have a TTL. How long ago was the IP changed? What&#39;s the TTL of the entry? If this is the issue then it has nothing to do with Java itself or UriBuilder."},{"owner":{"account_id":10212255,"reputation":185,"user_id":7538994,"display_name":"Corporativo"},"score":0,"creation_date":1659606526,"post_id":73232735,"comment_id":129336356,"body_markdown":"IP change yesterday and I don&#39;t know what is TTL.","body":"IP change yesterday and I don&#39;t know what is TTL."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1659606864,"post_id":73232735,"comment_id":129336484,"body_markdown":"TTL is &quot;time to live&quot;. Simply speaking is how long DNS entries are okay to be cached. Does resolving the host name on the server directly (using `nslookup` or `dig` or even just `ping`) show the new IP?","body":"TTL is &quot;time to live&quot;. Simply speaking is how long DNS entries are okay to be cached. Does resolving the host name on the server directly (using <code>nslookup</code> or <code>dig</code> or even just <code>ping</code>) show the new IP?"},{"owner":{"account_id":10212255,"reputation":185,"user_id":7538994,"display_name":"Corporativo"},"score":0,"creation_date":1659608376,"post_id":73232735,"comment_id":129337107,"body_markdown":"OK for TTL. With ping from my PC show the new IP since it changed. Thanks.","body":"OK for TTL. With ping from my PC show the new IP since it changed. Thanks."}],"owner":{"account_id":10212255,"reputation":185,"user_id":7538994,"display_name":"Corporativo"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659601927,"creation_date":1659601927,"question_id":73232735,"body_markdown":"We have a CompanyTokenValidation class with this code:\r\n\r\n    return this.defaultWebClient.get()\r\n            .uri(uriBuilder -&gt; uriBuilder\r\n                    .path(tokenValidationUri)\r\n                    .build())\r\n            .header(HttpHeaders.AUTHORIZATION, bearerToken)\r\n            .retrieve()\r\n            .bodyToMono(JsonNode.class)\r\n            .block();\r\n\r\nAnd uriBuilder goes to old IP, printing this trace:\r\n\r\n    reactor.core.Exceptions$ReactiveException: io.netty.channel.ConnectTimeoutException: connection timed out: /XXX.XXX.XX.51:8082\r\n    \tat reactor.core.Exceptions.propagate(Exceptions.java:393)\r\n    \tat reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:97)\r\n    \tat reactor.core.publisher.Mono.block(Mono.java:1680)\r\n    \tat com.company.web.validations.CompanyTokenValidation.validate(CompanyTokenValidation.java:44)\r\n    \tat com.company.web.validations.validators.Validator.validate(Validator.java:38)\r\n\r\n\r\n\r\nWe restart tomcat four times to put logs, and always goes to old IP. &#191;Is a problem in uriBuilder Spiing injetion?\r\n\r\nI&#39;m completely lost. We always work with DNS names like city-51.company.com  in our yml or properties.","title":"Old IP on uriBuilder after server IP change","body":"<p>We have a CompanyTokenValidation class with this code:</p>\n<pre><code>return this.defaultWebClient.get()\n        .uri(uriBuilder -&gt; uriBuilder\n                .path(tokenValidationUri)\n                .build())\n        .header(HttpHeaders.AUTHORIZATION, bearerToken)\n        .retrieve()\n        .bodyToMono(JsonNode.class)\n        .block();\n</code></pre>\n<p>And uriBuilder goes to old IP, printing this trace:</p>\n<pre><code>reactor.core.Exceptions$ReactiveException: io.netty.channel.ConnectTimeoutException: connection timed out: /XXX.XXX.XX.51:8082\n    at reactor.core.Exceptions.propagate(Exceptions.java:393)\n    at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:97)\n    at reactor.core.publisher.Mono.block(Mono.java:1680)\n    at com.company.web.validations.CompanyTokenValidation.validate(CompanyTokenValidation.java:44)\n    at com.company.web.validations.validators.Validator.validate(Validator.java:38)\n</code></pre>\n<p>We restart tomcat four times to put logs, and always goes to old IP. ¿Is a problem in uriBuilder Spiing injetion?</p>\n<p>I'm completely lost. We always work with DNS names like city-51.company.com  in our yml or properties.</p>\n"},{"tags":["java","applet","java-web-start","jnlp","signed-applet"],"answers":[{"tags":[],"owner":{"account_id":20061,"reputation":20239,"user_id":47552,"accept_rate":91,"display_name":"Matt McHenry"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1386610255,"creation_date":1386352001,"answer_id":20430290,"question_id":20430289,"body_markdown":"On both counts, your application will need to add some trivial code to be executed at start-up, in order to work around these two issues.\n\n## Wildcards Not Allowed in Property Values ##\n\nThe [JNLP specification](http://jcp.org/aboutJava/communityprocess/mrel/jsr056/index5.html) says:\n\n&gt; It is expected that a JNLP Client will blacklist (or restrict) certain jnlp elements and argument values such as &quot;java-vm-args&quot; or property &quot;name&quot; and &quot;value&quot; to maintain security. The exact list is up to the individual JNLP Client implementations.\n\nIn fact, the Oracle implementation (at least in 7u45) does blacklist the `value` attribute of the `&lt;property/&gt;` element -- it cannot be wildcarded.  I&#39;ve been unable to locate any reasoning behind this decision, but there it is.\n\nThe webstart work-around allows arbitrary property names as well as values; the applet work-around requires that the names of the properties be known at code-signing time.\n\n### Work-around: Webstart ###\n\nIn your JNLP file, include a number of wildcard arguments:\n\n    &lt;application-desc main-class=&quot;com.example.YourMainClass&quot;&gt;\n      &lt;argument&gt;*&lt;/argument&gt;\n      &lt;argument&gt;*&lt;/argument&gt;\n    &lt;/application-desc&gt;\n\nIn your application&#39;s `main` method, parse these arguments and copy them in to system properties using [`System.setProperty()`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#setProperty%28java.lang.String,%20java.lang.String%29), skipping over arguments that still have the literal value `&quot;*&quot;`.  I recommend simply splitting each argument on the first occurrence of `&quot;=&quot;`.  (If your application already takes regular arguments as well, you&#39;ll have to get a bit more creative.)\n\n### Work-around: Applet ###\n\nIn your JNLP file, include parameters defining the system properties that need to be set:\n\n    &lt;applet-desc main-class=&quot;com.example.YourMainClassApplet&quot;&gt;\n      &lt;param name=&quot;SYS_PROPERTY_PARAMETERS&quot; value=&quot;prop1,prop2&quot;/&gt;\n      &lt;param name=&quot;prop1&quot; value=&quot;*&quot;/&gt;\n      &lt;param name=&quot;prop2&quot; value=&quot;*&quot;/&gt;\n    &lt;/applet-desc&gt;\n\nIn your [`Applet.init()`](http://docs.oracle.com/javase/7/docs/api/java/applet/Applet.html#init%28%29) method, get the value of the `SYS_PROPERTY_PARAMETERS` parameter, and iterate over it to get the value of each parameter.  If it is not the literal `&quot;*&quot;`, copy it to a system property using `System.setProperty()`.\n\n## &quot;Insecure Operation&quot; dialog ##\n\nThis is a [bug in the Oracle plugin](https://bugs.openjdk.java.net/browse/JDK-8029517) that is triggered by the use of LiveConnect (Java &lt;-&gt; JavaScript interaction).\n\n### Work-around: &quot;secure&quot; property prefixes ###\n\nPrefix all system properties set via `&lt;property/&gt;` elements in the JNLP with `&quot;jnlp.&quot;`:\n\n    &lt;property name=&quot;jnlp.my-prop&quot; value=&quot;fixed-value&quot;/&gt;\n\nThen in your application&#39;s `main()` or `Applet.init()` method, iterate over a *copy of* [`System.getProperties()`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#getProperties%28%29) and, if the property name starts with `&quot;jnlp.&quot;`, copy its value into a property of the same name with that prefix stripped off.  (Iterating over the copy is necessary to avoid a `ConcurrentModificationException`.)\n\n## Gotcha: JNLP template validator considers order of XML attributes ##\n\nFinally, if your process of filling in the values for the properties could cause attributes of other elements in the JNLP document to be reordered, this may cause the JNLP template validation to fail.  (Parsing the JNLP with a DOM parser, filling in the wildcards, and streaming it back out using `StreamResult` is one way this could happen.)  For example, I had these two multi-attribute elements, and the order of the elements had to match:\n\n    &lt;jnlp codebase=&quot;*&quot; spec=&quot;1.0+&quot;&gt;\n    &lt;j2se java-vm-args=&quot;-Xms256M -Xmx512M -XX:MaxPermSize=256m&quot; version=&quot;1.6+&quot;/&gt;","title":"How can I pass arbitrary system properties whose values may change to a signed Java RIA (applet, webstart) via JNLP?","body":"<p>On both counts, your application will need to add some trivial code to be executed at start-up, in order to work around these two issues.</p>\n<h2>Wildcards Not Allowed in Property Values</h2>\n<p>The <a href=\"http://jcp.org/aboutJava/communityprocess/mrel/jsr056/index5.html\" rel=\"noreferrer\">JNLP specification</a> says:</p>\n<blockquote>\n<p>It is expected that a JNLP Client will blacklist (or restrict) certain jnlp elements and argument values such as &quot;java-vm-args&quot; or property &quot;name&quot; and &quot;value&quot; to maintain security. The exact list is up to the individual JNLP Client implementations.</p>\n</blockquote>\n<p>In fact, the Oracle implementation (at least in 7u45) does blacklist the <code>value</code> attribute of the <code>&lt;property/&gt;</code> element -- it cannot be wildcarded.  I've been unable to locate any reasoning behind this decision, but there it is.</p>\n<p>The webstart work-around allows arbitrary property names as well as values; the applet work-around requires that the names of the properties be known at code-signing time.</p>\n<h3>Work-around: Webstart</h3>\n<p>In your JNLP file, include a number of wildcard arguments:</p>\n<pre><code>&lt;application-desc main-class=&quot;com.example.YourMainClass&quot;&gt;\n  &lt;argument&gt;*&lt;/argument&gt;\n  &lt;argument&gt;*&lt;/argument&gt;\n&lt;/application-desc&gt;\n</code></pre>\n<p>In your application's <code>main</code> method, parse these arguments and copy them in to system properties using <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#setProperty%28java.lang.String,%20java.lang.String%29\" rel=\"noreferrer\"><code>System.setProperty()</code></a>, skipping over arguments that still have the literal value <code>&quot;*&quot;</code>.  I recommend simply splitting each argument on the first occurrence of <code>&quot;=&quot;</code>.  (If your application already takes regular arguments as well, you'll have to get a bit more creative.)</p>\n<h3>Work-around: Applet</h3>\n<p>In your JNLP file, include parameters defining the system properties that need to be set:</p>\n<pre><code>&lt;applet-desc main-class=&quot;com.example.YourMainClassApplet&quot;&gt;\n  &lt;param name=&quot;SYS_PROPERTY_PARAMETERS&quot; value=&quot;prop1,prop2&quot;/&gt;\n  &lt;param name=&quot;prop1&quot; value=&quot;*&quot;/&gt;\n  &lt;param name=&quot;prop2&quot; value=&quot;*&quot;/&gt;\n&lt;/applet-desc&gt;\n</code></pre>\n<p>In your <a href=\"http://docs.oracle.com/javase/7/docs/api/java/applet/Applet.html#init%28%29\" rel=\"noreferrer\"><code>Applet.init()</code></a> method, get the value of the <code>SYS_PROPERTY_PARAMETERS</code> parameter, and iterate over it to get the value of each parameter.  If it is not the literal <code>&quot;*&quot;</code>, copy it to a system property using <code>System.setProperty()</code>.</p>\n<h2>&quot;Insecure Operation&quot; dialog</h2>\n<p>This is a <a href=\"https://bugs.openjdk.java.net/browse/JDK-8029517\" rel=\"noreferrer\">bug in the Oracle plugin</a> that is triggered by the use of LiveConnect (Java &lt;-&gt; JavaScript interaction).</p>\n<h3>Work-around: &quot;secure&quot; property prefixes</h3>\n<p>Prefix all system properties set via <code>&lt;property/&gt;</code> elements in the JNLP with <code>&quot;jnlp.&quot;</code>:</p>\n<pre><code>&lt;property name=&quot;jnlp.my-prop&quot; value=&quot;fixed-value&quot;/&gt;\n</code></pre>\n<p>Then in your application's <code>main()</code> or <code>Applet.init()</code> method, iterate over a <em>copy of</em> <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#getProperties%28%29\" rel=\"noreferrer\"><code>System.getProperties()</code></a> and, if the property name starts with <code>&quot;jnlp.&quot;</code>, copy its value into a property of the same name with that prefix stripped off.  (Iterating over the copy is necessary to avoid a <code>ConcurrentModificationException</code>.)</p>\n<h2>Gotcha: JNLP template validator considers order of XML attributes</h2>\n<p>Finally, if your process of filling in the values for the properties could cause attributes of other elements in the JNLP document to be reordered, this may cause the JNLP template validation to fail.  (Parsing the JNLP with a DOM parser, filling in the wildcards, and streaming it back out using <code>StreamResult</code> is one way this could happen.)  For example, I had these two multi-attribute elements, and the order of the elements had to match:</p>\n<pre><code>&lt;jnlp codebase=&quot;*&quot; spec=&quot;1.0+&quot;&gt;\n&lt;j2se java-vm-args=&quot;-Xms256M -Xmx512M -XX:MaxPermSize=256m&quot; version=&quot;1.6+&quot;/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2826694,"reputation":31,"user_id":2429207,"display_name":"Ralf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659601307,"creation_date":1659601307,"answer_id":73232612,"question_id":20430289,"body_markdown":"This was a bug in Oracle Java. According to this [bug report][1] it should be fixed in version 9.\r\n\r\n\r\n  [1]: https://bugs.openjdk.org/browse/JDK-8024536%20/","title":"How can I pass arbitrary system properties whose values may change to a signed Java RIA (applet, webstart) via JNLP?","body":"<p>This was a bug in Oracle Java. According to this <a href=\"https://bugs.openjdk.org/browse/JDK-8024536%20/\" rel=\"nofollow noreferrer\">bug report</a> it should be fixed in version 9.</p>\n"}],"owner":{"account_id":20061,"reputation":20239,"user_id":47552,"accept_rate":91,"display_name":"Matt McHenry"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2554,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":20430290,"answer_count":2,"score":3,"last_activity_date":1659601307,"creation_date":1386352001,"question_id":20430289,"body_markdown":"Due to [tighter security restrictions](https://blogs.oracle.com/java-platform-group/entry/new_security_requirements_for_rias) in `7u51`, due in January, I&#39;m trying to sign my JNLP file.\r\n\r\nOur application requires certain custom system properties to be set, and the values of some of those properties are different depending on where the applet is being deployed.  I would like to avoid having to re-sign the JAR containing the JNLP template for each deployment.\r\n\r\nThe naive approach of putting `&lt;property name=&quot;my-prop&quot; value=&quot;*&quot;/&gt;` in the JNLP template does not work.\r\n\r\nEven with `&lt;property name=&quot;my-prop&quot; value=&quot;fixed-value&quot;/&gt;` in the template, I sometimes get a dialog saying &quot;This application is going to perform an insecure operation.  Do you want to continue?&quot;:\r\n\r\n![insecure operation security dialog][1]\r\n\r\nWhat&#39;s the right way to pass system properties in to a signed Java RIA?\r\n\r\n  [1]: http://i.stack.imgur.com/txsZx.png","title":"How can I pass arbitrary system properties whose values may change to a signed Java RIA (applet, webstart) via JNLP?","body":"<p>Due to <a href=\"https://blogs.oracle.com/java-platform-group/entry/new_security_requirements_for_rias\" rel=\"nofollow noreferrer\">tighter security restrictions</a> in <code>7u51</code>, due in January, I'm trying to sign my JNLP file.</p>\n\n<p>Our application requires certain custom system properties to be set, and the values of some of those properties are different depending on where the applet is being deployed.  I would like to avoid having to re-sign the JAR containing the JNLP template for each deployment.</p>\n\n<p>The naive approach of putting <code>&lt;property name=\"my-prop\" value=\"*\"/&gt;</code> in the JNLP template does not work.</p>\n\n<p>Even with <code>&lt;property name=\"my-prop\" value=\"fixed-value\"/&gt;</code> in the template, I sometimes get a dialog saying \"This application is going to perform an insecure operation.  Do you want to continue?\":</p>\n\n<p><img src=\"https://i.stack.imgur.com/txsZx.png\" alt=\"insecure operation security dialog\"></p>\n\n<p>What's the right way to pass system properties in to a signed Java RIA?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1358249035,"post_id":14336646,"comment_id":19926131,"body_markdown":"Looks like an exam question to me...","body":"Looks like an exam question to me..."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1358249104,"post_id":14336646,"comment_id":19926167,"body_markdown":"Steps to find out without bothering the good people on SO: 1) File-&gt;Open 2) copy-paste 3) File-&gt;Save 4) javac.","body":"Steps to find out without bothering the good people on SO: 1) File-&gt;Open 2) copy-paste 3) File-&gt;Save 4) javac."}],"answers":[{"tags":[],"owner":{"account_id":1025295,"reputation":46067,"user_id":1034737,"accept_rate":80,"display_name":"PermGenError"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1358249018,"creation_date":1358249018,"answer_id":14336672,"question_id":14336646,"body_markdown":"[java.util.Properties][1] inherits **put method** from [java.util.HashTable][2], thus your key would be `&quot;[%1]&quot;` and `&quot;[%2]&quot;` in your case.\r\n\r\n[HashTable.put()][3]\r\n\r\n    public V put(K key,\r\n        V value)\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html\r\n  [3]: http://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html#put%28K,%20V%29","title":"Creating Properties object in Java","body":"<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html\" rel=\"nofollow\">java.util.Properties</a> inherits <strong>put method</strong> from <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html\" rel=\"nofollow\">java.util.HashTable</a>, thus your key would be <code>\"[%1]\"</code> and <code>\"[%2]\"</code> in your case.</p>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html#put%28K,%20V%29\" rel=\"nofollow\">HashTable.put()</a></p>\n\n<pre><code>public V put(K key,\n    V value)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":72575,"reputation":40794,"user_id":209513,"accept_rate":100,"display_name":"Subhrajyoti Majumder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1358249370,"creation_date":1358249040,"answer_id":14336680,"question_id":14336646,"body_markdown":"    properties.put(&lt;key&gt;, &lt;value&gt;);\r\n\r\nThis is what you want to know.\r\n\r\n`Properties` is subclass of `Hashtable`, it represents a persistent set of properties.\r\n\r\n`Properties#put` method is inheritated from super class `HashTable`. ","title":"Creating Properties object in Java","body":"<pre><code>properties.put(&lt;key&gt;, &lt;value&gt;);\n</code></pre>\n\n<p>This is what you want to know.</p>\n\n<p><code>Properties</code> is subclass of <code>Hashtable</code>, it represents a persistent set of properties.</p>\n\n<p><code>Properties#put</code> method is inheritated from super class <code>HashTable</code>. </p>\n"},{"tags":[],"owner":{"account_id":1599292,"reputation":1261,"user_id":1480684,"display_name":"Ronn Macc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659601191,"creation_date":1659601191,"answer_id":73232582,"question_id":14336646,"body_markdown":"A fancy syntax\r\n\r\n    Properties props = new Properties() {{\r\n        put(&quot;Key1&quot;, &quot;Val1&quot;);\r\n        put(&quot;Key2&quot;, &quot;Val2&quot;);\r\n    }};","title":"Creating Properties object in Java","body":"<p>A fancy syntax</p>\n<pre><code>Properties props = new Properties() {{\n    put(&quot;Key1&quot;, &quot;Val1&quot;);\n    put(&quot;Key2&quot;, &quot;Val2&quot;);\n}};\n</code></pre>\n"}],"owner":{"account_id":1919742,"reputation":1887,"user_id":1731553,"accept_rate":52,"display_name":"user1731553"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":6214,"favorite_count":0,"down_vote_count":5,"up_vote_count":1,"answer_count":3,"score":-4,"last_activity_date":1659601191,"creation_date":1358248929,"question_id":14336646,"body_markdown":"If we create a Properties like:\r\n\r\n    Properties properties = new Properties();\r\n    properties.put(&quot;[%1]&quot;, &quot;username&quot;);\r\n    properties.put(&quot;[%2]&quot;, &quot;password&quot;);\r\n\r\nthen what is added as the key in the properties.","title":"Creating Properties object in Java","body":"<p>If we create a Properties like:</p>\n\n<pre><code>Properties properties = new Properties();\nproperties.put(\"[%1]\", \"username\");\nproperties.put(\"[%2]\", \"password\");\n</code></pre>\n\n<p>then what is added as the key in the properties.</p>\n"},{"tags":["java","android","xml","android-button","material-components-android"],"comments":[{"owner":{"account_id":2294849,"reputation":331976,"user_id":2016562,"accept_rate":92,"display_name":"Gabriele Mariotti"},"score":0,"creation_date":1602923294,"post_id":64400433,"comment_id":113877495,"body_markdown":"Are you using the material components library?","body":"Are you using the material components library?"},{"owner":{"account_id":19066903,"reputation":143,"user_id":13921830,"display_name":"Tomer"},"score":0,"creation_date":1602924752,"post_id":64400433,"comment_id":113877791,"body_markdown":"No, The button color is purple by default","body":"No, The button color is purple by default"},{"owner":{"account_id":2294849,"reputation":331976,"user_id":2016562,"accept_rate":92,"display_name":"Gabriele Mariotti"},"score":0,"creation_date":1602925258,"post_id":64400433,"comment_id":113877895,"body_markdown":"Post your app theme","body":"Post your app theme"},{"owner":{"account_id":933696,"reputation":995,"user_id":963038,"accept_rate":75,"display_name":"Md. Tahmid Mozaffar"},"score":0,"creation_date":1602926175,"post_id":64400433,"comment_id":113878106,"body_markdown":"your colorPrimary and colorPrimaryVariant is set to purple. changing these to a grey color is not working?","body":"your colorPrimary and colorPrimaryVariant is set to purple. changing these to a grey color is not working?"},{"owner":{"account_id":19066903,"reputation":143,"user_id":13921830,"display_name":"Tomer"},"score":0,"creation_date":1602926215,"post_id":64400433,"comment_id":113878118,"body_markdown":"What is the hex value of default button color?","body":"What is the hex value of default button color?"},{"owner":{"account_id":2294849,"reputation":331976,"user_id":2016562,"accept_rate":92,"display_name":"Gabriele Mariotti"},"score":0,"creation_date":1602926519,"post_id":64400433,"comment_id":113878179,"body_markdown":"@Tomer You are using a MaterialComponents theme. Check the answer below. The background color of the button is based on `&lt;item name=&quot;colorPrimary&quot;&gt;@color/purple_500&lt;/item&gt;`.","body":"@Tomer You are using a MaterialComponents theme. Check the answer below. The background color of the button is based on <code>&lt;item name=&quot;colorPrimary&quot;&gt;@color&#47;purple_500&lt;&#47;item&gt;</code>."}],"answers":[{"tags":[],"owner":{"account_id":2294849,"reputation":331976,"user_id":2016562,"accept_rate":92,"display_name":"Gabriele Mariotti"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1602926964,"creation_date":1602923394,"answer_id":64400491,"question_id":64400433,"body_markdown":"Since you are using a **`Theme.MaterialComponents.*`** theme the default background color of the `Button` (which is replaced by a `MaterialButton`) is the **`colorPrimary`** defined in your app theme.  \r\nIn your case:\r\n\r\n    &lt;item name=&quot;colorPrimary&quot;&gt;@color/purple_500&lt;/item&gt;\r\n\r\nYou can change this value (but this will affect all widgets).  \r\n\r\nIf you want to change globally the button style in your app you can also add the `materialButtonStyle` attribute in your app theme:\r\n\r\n    &lt;style name=&quot;Theme.HangmanGame&quot; parent=&quot;Theme.MaterialComponents.DayNight.DarkActionBar&quot;&gt;\r\n       &lt;item name=&quot;materialButtonStyle&quot;&gt;@style/Widget.App.Button&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\nwith:\r\n\r\n    &lt;style name=&quot;Widget.App.Button&quot; parent=&quot;Widget.MaterialComponents.Button&quot;&gt;\r\n        &lt;item name=&quot;backgroundTint&quot;&gt;@color/...&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n\r\nIf you want to change this color only in the button you can use also the `app:backgroundTint` attribute removing the `android:background` attribute:\r\n\r\n    &lt;Button\r\n        app:backgroundTint=&quot;@color/...&quot;/&gt;\r\n\r\nIf you want to use a custom background using the `android:background` attribute you have to add `app:backgroundTint=&quot;@null&quot;` to avoid that the button is tinted.","title":"Android default button color","body":"<p>Since you are using a <strong><code>Theme.MaterialComponents.*</code></strong> theme the default background color of the <code>Button</code> (which is replaced by a <code>MaterialButton</code>) is the <strong><code>colorPrimary</code></strong> defined in your app theme.<br />\nIn your case:</p>\n<pre><code>&lt;item name=&quot;colorPrimary&quot;&gt;@color/purple_500&lt;/item&gt;\n</code></pre>\n<p>You can change this value (but this will affect all widgets).</p>\n<p>If you want to change globally the button style in your app you can also add the <code>materialButtonStyle</code> attribute in your app theme:</p>\n<pre><code>&lt;style name=&quot;Theme.HangmanGame&quot; parent=&quot;Theme.MaterialComponents.DayNight.DarkActionBar&quot;&gt;\n   &lt;item name=&quot;materialButtonStyle&quot;&gt;@style/Widget.App.Button&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n<p>with:</p>\n<pre><code>&lt;style name=&quot;Widget.App.Button&quot; parent=&quot;Widget.MaterialComponents.Button&quot;&gt;\n    &lt;item name=&quot;backgroundTint&quot;&gt;@color/...&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n<p>If you want to change this color only in the button you can use also the <code>app:backgroundTint</code> attribute removing the <code>android:background</code> attribute:</p>\n<pre><code>&lt;Button\n    app:backgroundTint=&quot;@color/...&quot;/&gt;\n</code></pre>\n<p>If you want to use a custom background using the <code>android:background</code> attribute you have to add <code>app:backgroundTint=&quot;@null&quot;</code> to avoid that the button is tinted.</p>\n"},{"tags":[],"owner":{"account_id":7011745,"reputation":167,"user_id":5374362,"display_name":"swordguy8"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1615618235,"creation_date":1615618235,"answer_id":66610821,"question_id":64400433,"body_markdown":"I think the easiest way is to go into three xml files: src\\main\\res\\values\\colors.xml, src\\main\\res\\values\\themes.xml, and src\\main\\res\\values-night\\themes.xml\r\n\r\nIn the colors.xml, add a color and call it &quot;button&quot;, then set the color to what you want. For a simple list of color codes, see this answer: https://stackoverflow.com/a/7323234/5374362\r\n\r\nThe line would look something like this: \r\n```\r\n&lt;color name=&quot;button&quot;&gt;#808080&lt;/color&gt;  //That code is the gray you want.\r\n```\r\n\r\nIn the two themes files, change colorPrimary to &quot;@color/button&quot;\r\n\r\nThis will affect every button in the app.","title":"Android default button color","body":"<p>I think the easiest way is to go into three xml files: src\\main\\res\\values\\colors.xml, src\\main\\res\\values\\themes.xml, and src\\main\\res\\values-night\\themes.xml</p>\n<p>In the colors.xml, add a color and call it &quot;button&quot;, then set the color to what you want. For a simple list of color codes, see this answer: <a href=\"https://stackoverflow.com/a/7323234/5374362\">https://stackoverflow.com/a/7323234/5374362</a></p>\n<p>The line would look something like this:</p>\n<pre><code>&lt;color name=&quot;button&quot;&gt;#808080&lt;/color&gt;  //That code is the gray you want.\n</code></pre>\n<p>In the two themes files, change colorPrimary to &quot;@color/button&quot;</p>\n<p>This will affect every button in the app.</p>\n"},{"tags":[],"owner":{"account_id":25974764,"reputation":1,"user_id":19689360,"display_name":"IS - Android Developer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659600504,"creation_date":1659600504,"answer_id":73232437,"question_id":64400433,"body_markdown":"Either, you can change the application theme in themes.xml from:\r\n\r\n    &lt;style name=&quot;Theme.DemoApp&quot; parent=&quot;Theme.MaterialComponents.DayNight.DarkActionBar&quot;&gt;\r\n\r\nto this:\r\n\r\n        &lt;style name=&quot;Theme.DemoApp&quot; parent=&quot;Theme.AppCompat.DayNight.DarkActionBar&quot;&gt;\r\n\r\nThen, add Button Background:\r\n\r\n    &lt;Button\r\n            android:id=&quot;@+id/button&quot;\r\n            android:layout_width=&quot;120dp&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            **android:background=&quot;@color/white&quot;**\r\n            android:text=&quot;Submit&quot;/&gt;","title":"Android default button color","body":"<p>Either, you can change the application theme in themes.xml from:</p>\n<pre><code>&lt;style name=&quot;Theme.DemoApp&quot; parent=&quot;Theme.MaterialComponents.DayNight.DarkActionBar&quot;&gt;\n</code></pre>\n<p>to this:</p>\n<pre><code>    &lt;style name=&quot;Theme.DemoApp&quot; parent=&quot;Theme.AppCompat.DayNight.DarkActionBar&quot;&gt;\n</code></pre>\n<p>Then, add Button Background:</p>\n<pre><code>&lt;Button\n        android:id=&quot;@+id/button&quot;\n        android:layout_width=&quot;120dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        **android:background=&quot;@color/white&quot;**\n        android:text=&quot;Submit&quot;/&gt;\n</code></pre>\n"}],"owner":{"account_id":19066903,"reputation":143,"user_id":13921830,"display_name":"Tomer"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18841,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":3,"score":11,"last_activity_date":1659600504,"creation_date":1602922954,"question_id":64400433,"body_markdown":"When I open a new android studio project, the default color for button is purple. I want the default color to be the gray default button color(I assume you know what I mean). I tried to change the color via xml and java and nothing worked. I want that the default button color will be gray without I&#39;d have to change it every time.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jVyKc.png\r\n  [2]: https://i.stack.imgur.com/TF8Lh.png\r\n\r\nthemse.xml:\r\n\r\n    &lt;resources xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n    &lt;!-- Base application theme. --&gt;\r\n    &lt;style name=&quot;Theme.HangmanGame&quot; parent=&quot;Theme.MaterialComponents.DayNight.DarkActionBar&quot;&gt;\r\n        &lt;!-- Primary brand color. --&gt;\r\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/purple_500&lt;/item&gt;\r\n        &lt;item name=&quot;colorPrimaryVariant&quot;&gt;@color/purple_700&lt;/item&gt;\r\n        &lt;item name=&quot;colorOnPrimary&quot;&gt;@color/white&lt;/item&gt;\r\n        &lt;!-- Secondary brand color. --&gt;\r\n        &lt;item name=&quot;colorSecondary&quot;&gt;@color/teal_200&lt;/item&gt;\r\n        &lt;item name=&quot;colorSecondaryVariant&quot;&gt;@color/teal_700&lt;/item&gt;\r\n        &lt;item name=&quot;colorOnSecondary&quot;&gt;@color/black&lt;/item&gt;\r\n        &lt;!-- Status bar color. --&gt;\r\n        &lt;item name=&quot;android:statusBarColor&quot; tools:targetApi=&quot;l&quot;&gt;?attr/colorPrimaryVariant&lt;/item&gt;\r\n        &lt;!-- Customize your theme here. --&gt;\r\n    &lt;/style&gt;\r\n&lt;/resources&gt;\r\n\r\nthemes.xml(night)\r\n\r\n    &lt;resources xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n    &lt;!-- Base application theme. --&gt;\r\n    &lt;style name=&quot;Theme.HangmanGame&quot; parent=&quot;Theme.MaterialComponents.DayNight.DarkActionBar&quot;&gt;\r\n        &lt;!-- Primary brand color. --&gt;\r\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/purple_200&lt;/item&gt;\r\n        &lt;item name=&quot;colorPrimaryVariant&quot;&gt;@color/purple_700&lt;/item&gt;\r\n        &lt;item name=&quot;colorOnPrimary&quot;&gt;@color/black&lt;/item&gt;\r\n        &lt;!-- Secondary brand color. --&gt;\r\n        &lt;item name=&quot;colorSecondary&quot;&gt;@color/teal_200&lt;/item&gt;\r\n        &lt;item name=&quot;colorSecondaryVariant&quot;&gt;@color/teal_200&lt;/item&gt;\r\n        &lt;item name=&quot;colorOnSecondary&quot;&gt;@color/black&lt;/item&gt;\r\n        &lt;!-- Status bar color. --&gt;\r\n        &lt;item name=&quot;android:statusBarColor&quot; tools:targetApi=&quot;l&quot;&gt;?attr/colorPrimaryVariant&lt;/item&gt;\r\n        &lt;!-- Customize your theme here. --&gt;\r\n    &lt;/style&gt;\r\n&lt;/resources&gt;","title":"Android default button color","body":"<p>When I open a new android studio project, the default color for button is purple. I want the default color to be the gray default button color(I assume you know what I mean). I tried to change the color via xml and java and nothing worked. I want that the default button color will be gray without I'd have to change it every time.\n<a href=\"https://i.stack.imgur.com/jVyKc.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/jVyKc.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/TF8Lh.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/TF8Lh.png\" alt=\"enter image description here\" /></a></p>\n<p>themse.xml:</p>\n<pre><code>&lt;resources xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n&lt;!-- Base application theme. --&gt;\n&lt;style name=&quot;Theme.HangmanGame&quot; parent=&quot;Theme.MaterialComponents.DayNight.DarkActionBar&quot;&gt;\n    &lt;!-- Primary brand color. --&gt;\n    &lt;item name=&quot;colorPrimary&quot;&gt;@color/purple_500&lt;/item&gt;\n    &lt;item name=&quot;colorPrimaryVariant&quot;&gt;@color/purple_700&lt;/item&gt;\n    &lt;item name=&quot;colorOnPrimary&quot;&gt;@color/white&lt;/item&gt;\n    &lt;!-- Secondary brand color. --&gt;\n    &lt;item name=&quot;colorSecondary&quot;&gt;@color/teal_200&lt;/item&gt;\n    &lt;item name=&quot;colorSecondaryVariant&quot;&gt;@color/teal_700&lt;/item&gt;\n    &lt;item name=&quot;colorOnSecondary&quot;&gt;@color/black&lt;/item&gt;\n    &lt;!-- Status bar color. --&gt;\n    &lt;item name=&quot;android:statusBarColor&quot; tools:targetApi=&quot;l&quot;&gt;?attr/colorPrimaryVariant&lt;/item&gt;\n    &lt;!-- Customize your theme here. --&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>themes.xml(night)</p>\n<pre><code>&lt;resources xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n&lt;!-- Base application theme. --&gt;\n&lt;style name=&quot;Theme.HangmanGame&quot; parent=&quot;Theme.MaterialComponents.DayNight.DarkActionBar&quot;&gt;\n    &lt;!-- Primary brand color. --&gt;\n    &lt;item name=&quot;colorPrimary&quot;&gt;@color/purple_200&lt;/item&gt;\n    &lt;item name=&quot;colorPrimaryVariant&quot;&gt;@color/purple_700&lt;/item&gt;\n    &lt;item name=&quot;colorOnPrimary&quot;&gt;@color/black&lt;/item&gt;\n    &lt;!-- Secondary brand color. --&gt;\n    &lt;item name=&quot;colorSecondary&quot;&gt;@color/teal_200&lt;/item&gt;\n    &lt;item name=&quot;colorSecondaryVariant&quot;&gt;@color/teal_200&lt;/item&gt;\n    &lt;item name=&quot;colorOnSecondary&quot;&gt;@color/black&lt;/item&gt;\n    &lt;!-- Status bar color. --&gt;\n    &lt;item name=&quot;android:statusBarColor&quot; tools:targetApi=&quot;l&quot;&gt;?attr/colorPrimaryVariant&lt;/item&gt;\n    &lt;!-- Customize your theme here. --&gt;\n&lt;/style&gt;\n</code></pre>\n\n"},{"tags":["java","algorithm","string","search","data-structures"],"comments":[{"owner":{"account_id":43577,"reputation":54129,"user_id":127479,"accept_rate":95,"display_name":"Adamski"},"score":0,"creation_date":1253034265,"post_id":1428348,"comment_id":1272231,"body_markdown":"Are the strings English words or can they contain any character?  Are they case-sensitive?","body":"Are the strings English words or can they contain any character?  Are they case-sensitive?"},{"owner":{"account_id":7944,"reputation":21068,"user_id":14007,"accept_rate":92,"display_name":"Alex Beardsley"},"score":0,"creation_date":1253034525,"post_id":1428348,"comment_id":1272273,"body_markdown":"@Adamski They are English words and are not case sensitive; however, they are very technical words, like things you wouldn&#39;t find in a dictionary.","body":"@Adamski They are English words and are not case sensitive; however, they are very technical words, like things you wouldn&#39;t find in a dictionary."},{"owner":{"account_id":43577,"reputation":54129,"user_id":127479,"accept_rate":95,"display_name":"Adamski"},"score":0,"creation_date":1253034982,"post_id":1428348,"comment_id":1272328,"body_markdown":"If the dictionary contained &quot;foob&quot; would that be returned if I searched for &quot;foo&quot; or are you only concerned with exact matches?","body":"If the dictionary contained &quot;foob&quot; would that be returned if I searched for &quot;foo&quot; or are you only concerned with exact matches?"},{"owner":{"account_id":7944,"reputation":21068,"user_id":14007,"accept_rate":92,"display_name":"Alex Beardsley"},"score":0,"creation_date":1253035611,"post_id":1428348,"comment_id":1272407,"body_markdown":"@Adamski See the edit I made.  I&#39;m only concerned with exact matches of valid words, i.e. foo would match &quot;foo bar&quot; or &quot;bar foo&quot; but not &quot;foob&quot;.","body":"@Adamski See the edit I made.  I&#39;m only concerned with exact matches of valid words, i.e. foo would match &quot;foo bar&quot; or &quot;bar foo&quot; but not &quot;foob&quot;."}],"answers":[{"tags":[],"owner":{"account_id":17795,"reputation":24571,"user_id":40214,"accept_rate":79,"display_name":"Dennis C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659600424,"creation_date":1253034092,"answer_id":1428410,"question_id":1428348,"body_markdown":"What you need is [Apache Lucene][1].\r\n\r\n\r\n  [1]: https://lucene.apache.org/","title":"Search For String Permutations In String Set","body":"<p>What you need is <a href=\"https://lucene.apache.org/\" rel=\"nofollow noreferrer\">Apache Lucene</a>.</p>\n"},{"tags":[],"owner":{"account_id":58049,"reputation":102,"user_id":173851,"display_name":"ejspencer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1291031248,"creation_date":1253038458,"answer_id":1428815,"question_id":1428348,"body_markdown":"I&#39;d suggest using a dictionary. Use strings as keys and a list of strings as the value. Tokenize the strings that will be searched, and add the entire string to your dictionary once for each token. (Youn can use the split method to tokenize your strings. Use space as the delimiter.) Thereafter, whenever you need to do a look up, you tokenize the search string and perform a look up for each token in your dictionary.\r\n\r\nThus if you have added the following strings: foo, baz, bar, blah, foo bar, foo baz\r\n\r\nYour dictionary has entries:\r\n\r\nfoo: foo, foo bar, foo baz\r\nbaz: baz, foo baz\r\nbar: bar, foo bar\r\nblah: blah\r\n\r\nShould you then search for &quot;foo bar&quot;,\r\n\r\nyour output is the union of the entries stored under foo and bar like so:\r\n&quot;foo bar&quot;:= foo, bar\r\n\r\nfoo: foo, foo bar, foo baz\r\nunion\r\nbar: bar, foo bar\r\n\r\ngiving: foo, foo bar, foo baz, bar\r\n\r\nEDIT: I&#39;ve just noticed that you only want complete or partial matches, i.e. foo baz is not acceptable. The easy solution is to post process the results - restrict the longer of the search string and target string to the length of the shorter one and then compare the truncated string with the unmodified string. Accept only those that are equivalent.\r\n\r\nEDIT: So it turns out foo baz is indeed a match. Disregard the paragraph above (first edit).\r\nSee (C#) code as follows:\r\n\r\n    class DictionarySearch\r\n    {\r\n        private Dictionary&lt;string, List&lt;string&gt;&gt; dict;\r\n\r\n        public DictionarySearch()\r\n        {\r\n            dict = new Dictionary&lt;string, List&lt;string&gt;&gt;();\r\n        }\r\n        \r\n        /// &lt;summary&gt;\r\n        /// Add a string e.g. foo bar to the dictionary\r\n        /// &lt;/summary&gt;\r\n        /// &lt;param name=&quot;s&quot;&gt;string to be added&lt;/param&gt;\r\n        public void addString(string s)\r\n        {\r\n            //tokenize string\r\n            string[] words = s.Split(new char[] { &#39; &#39; });\r\n\r\n            //add each token to the dictionary as a key with the matching value being s\r\n            foreach (string w in words)\r\n            {\r\n                if (dict.ContainsKey(w))\r\n                {\r\n                    dict[w].Add(s);\r\n                }\r\n                else\r\n                {\r\n                    dict.Add(w, new List&lt;string&gt;());\r\n                    dict[w].Add(s);\r\n                }\r\n            }\r\n        }\r\n        /// &lt;summary&gt;\r\n        /// Find all strings which match at least one token\r\n        /// &lt;/summary&gt;\r\n        /// &lt;param name=&quot;s&quot;&gt;string of tokens (words) to be matched&lt;/param&gt;\r\n        /// &lt;returns&gt;List of strings matching at least one word&lt;/returns&gt;\r\n        public IList&lt;string&gt; getMatches(string s)\r\n        {\r\n            //split search string into words\r\n            string[] words = s.Split(new char[] { &#39; &#39; });\r\n            List&lt;string&gt; output = new List&lt;string&gt;();\r\n\r\n            //retrieve from dictionary list of strings matching each word.\r\n            foreach (string w in words)\r\n            {\r\n                if (dict.ContainsKey(w))\r\n                {\r\n                    output.AddRange(dict[w]);\r\n                }\r\n                else\r\n                {\r\n                    continue;\r\n                }\r\n            }\r\n\r\n            return output;\r\n        }\r\n    }\r\n\r\nGiven a dictionary with m strings with q words per string and n unique words, and a search string with l words the time complexities are as follows:\r\n\r\nPopulate data structure: O(q*m*T[dictionary-insert]). An insert needs to be performed for each word\r\n\r\nFind a string: O(l*T[dictionary-find]). A dictionary lookup per word in search string.\r\n\r\nThe actual cost depends on your dictionary implementation. A hash table based dictionary incurs O(1) cost for both insert and find. A binary tree based dictionary incurs O(lg n) cost for both insert and find.","title":"Search For String Permutations In String Set","body":"<p>I'd suggest using a dictionary. Use strings as keys and a list of strings as the value. Tokenize the strings that will be searched, and add the entire string to your dictionary once for each token. (Youn can use the split method to tokenize your strings. Use space as the delimiter.) Thereafter, whenever you need to do a look up, you tokenize the search string and perform a look up for each token in your dictionary.</p>\n\n<p>Thus if you have added the following strings: foo, baz, bar, blah, foo bar, foo baz</p>\n\n<p>Your dictionary has entries:</p>\n\n<p>foo: foo, foo bar, foo baz\nbaz: baz, foo baz\nbar: bar, foo bar\nblah: blah</p>\n\n<p>Should you then search for \"foo bar\",</p>\n\n<p>your output is the union of the entries stored under foo and bar like so:\n\"foo bar\":= foo, bar</p>\n\n<p>foo: foo, foo bar, foo baz\nunion\nbar: bar, foo bar</p>\n\n<p>giving: foo, foo bar, foo baz, bar</p>\n\n<p>EDIT: I've just noticed that you only want complete or partial matches, i.e. foo baz is not acceptable. The easy solution is to post process the results - restrict the longer of the search string and target string to the length of the shorter one and then compare the truncated string with the unmodified string. Accept only those that are equivalent.</p>\n\n<p>EDIT: So it turns out foo baz is indeed a match. Disregard the paragraph above (first edit).\nSee (C#) code as follows:</p>\n\n<pre><code>class DictionarySearch\n{\n    private Dictionary&lt;string, List&lt;string&gt;&gt; dict;\n\n    public DictionarySearch()\n    {\n        dict = new Dictionary&lt;string, List&lt;string&gt;&gt;();\n    }\n\n    /// &lt;summary&gt;\n    /// Add a string e.g. foo bar to the dictionary\n    /// &lt;/summary&gt;\n    /// &lt;param name=\"s\"&gt;string to be added&lt;/param&gt;\n    public void addString(string s)\n    {\n        //tokenize string\n        string[] words = s.Split(new char[] { ' ' });\n\n        //add each token to the dictionary as a key with the matching value being s\n        foreach (string w in words)\n        {\n            if (dict.ContainsKey(w))\n            {\n                dict[w].Add(s);\n            }\n            else\n            {\n                dict.Add(w, new List&lt;string&gt;());\n                dict[w].Add(s);\n            }\n        }\n    }\n    /// &lt;summary&gt;\n    /// Find all strings which match at least one token\n    /// &lt;/summary&gt;\n    /// &lt;param name=\"s\"&gt;string of tokens (words) to be matched&lt;/param&gt;\n    /// &lt;returns&gt;List of strings matching at least one word&lt;/returns&gt;\n    public IList&lt;string&gt; getMatches(string s)\n    {\n        //split search string into words\n        string[] words = s.Split(new char[] { ' ' });\n        List&lt;string&gt; output = new List&lt;string&gt;();\n\n        //retrieve from dictionary list of strings matching each word.\n        foreach (string w in words)\n        {\n            if (dict.ContainsKey(w))\n            {\n                output.AddRange(dict[w]);\n            }\n            else\n            {\n                continue;\n            }\n        }\n\n        return output;\n    }\n}\n</code></pre>\n\n<p>Given a dictionary with m strings with q words per string and n unique words, and a search string with l words the time complexities are as follows:</p>\n\n<p>Populate data structure: O(q<em>m</em>T[dictionary-insert]). An insert needs to be performed for each word</p>\n\n<p>Find a string: O(l*T[dictionary-find]). A dictionary lookup per word in search string.</p>\n\n<p>The actual cost depends on your dictionary implementation. A hash table based dictionary incurs O(1) cost for both insert and find. A binary tree based dictionary incurs O(lg n) cost for both insert and find.</p>\n"},{"tags":[],"owner":{"account_id":48334,"reputation":19092,"user_id":143585,"accept_rate":67,"display_name":"Denis Tulskiy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1253044066,"creation_date":1253044066,"answer_id":1429272,"question_id":1428348,"body_markdown":"This code works. Don&#39;t know if that&#39;s efficient enough for you:\r\n    \r\n        String[] dict = &quot;foo bar&quot;.split(&quot; &quot;);\r\n\r\n\t\tString[] array = new String[] { &quot;foo&quot;, &quot;baz&quot;, &quot;bar&quot;, &quot;blah&quot;, &quot;foo bar&quot;,\r\n\t\t\t\t&quot;foo baz&quot; };\r\n\r\n\t\tloop: for (String s : array) {\r\n\t\t\tString[] a = s.split(&quot; &quot;);\r\n\r\n\t\t\tfor (String sample : dict)\r\n\t\t\t\tfor (String s1 : a)\r\n\t\t\t\t\tif (sample.equals(s1)) {\r\n\t\t\t\t\t\tSystem.out.println(s);\r\n\t\t\t\t\t\tcontinue loop;\r\n\t\t\t\t\t}\r\n\t\t}\r\n\r\n","title":"Search For String Permutations In String Set","body":"<p>This code works. Don't know if that's efficient enough for you:</p>\n\n<pre><code>    String[] dict = \"foo bar\".split(\" \");\n\n    String[] array = new String[] { \"foo\", \"baz\", \"bar\", \"blah\", \"foo bar\",\n            \"foo baz\" };\n\n    loop: for (String s : array) {\n        String[] a = s.split(\" \");\n\n        for (String sample : dict)\n            for (String s1 : a)\n                if (sample.equals(s1)) {\n                    System.out.println(s);\n                    continue loop;\n                }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":30304,"reputation":27134,"user_id":82559,"display_name":"alphazero"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1253045878,"creation_date":1253044180,"answer_id":1429280,"question_id":1428348,"body_markdown":"(When you say &quot;efficient&quot;, you probably need to be more explicit in terms of space, and time. Lets assume you mean time efficiency (given that you mentioned permutations)).\r\n\r\nThe task of computing the answer to \r\n\r\n    String[] findStringsContaining(List&lt;String&gt; strings, String[] words)\r\n\r\ncan be partitioned and handed off to parallel threads of execution, given that it is purely functional and side effect free in an intermediate stage, and, the results joined as a final step.  I.e. you can partition across the words, and/or, the list of strings.  \r\n\r\n\r\nThis is how [map-reduce][1] works (and your case, its irrelevant that its all happening on the same machine.)\r\n\r\nYour mapper (assigned to a thread for each of the words) is:\r\n\r\n    boolean [] stringContainsWord (List&lt;String&gt; strings, String word);\r\n\r\nThat method would execute in parallel.\r\n\r\nThe boolean array would then have a true for each index (of List&lt;String&gt;) that matched for the given word.\r\n\r\nand your reducer (running after all mappers have finished) is:\r\n\r\n    List&lt;String&gt; getMatchingList(List&lt;String&gt;, List&lt;boolean[]&gt; mapperResults);\r\n\r\n\r\nPutting aside the overhead for the threads and assuming negligible costs for mapper thread counts for a reasonable number of input words, this would give you a O(n) (for the mapper) +O(m) (for the reducer) time process, where n is the number of items in your list of strings, and m is the number of words in your input.\r\n\r\nYou can further parallelize the task by partitioning your list of Strings and running p threads for each of the words, and having each thread searching a sub-set of your list of Strings, so that the input List&lt;String&gt; to your mapper is 1/p elements of the overall list.\r\n\r\n--\r\n\r\nAn alternative approach which you may want to consider, specially if the list of strings is huge, and, the content is langauge (such as English), is to optimize given the fact that most languages have a fairly small set of words that constitute the bulk of sentences in that language.  For example, if your list has 2 million English sentences, chances are that the list of unique words is many orders of magnitude smaller (say a few hundred).\r\n\r\nIn that case, you can have a Map of word -&gt; sentences, and testing for matching sentences for any given word is reduced to a lookup in the map.\r\n\r\n(Note that you can still combine the initial approach with this.)\r\n\r\n  [1]: http://en.wikipedia.org/wiki/MapReduce","title":"Search For String Permutations In String Set","body":"<p>(When you say \"efficient\", you probably need to be more explicit in terms of space, and time. Lets assume you mean time efficiency (given that you mentioned permutations)).</p>\n\n<p>The task of computing the answer to </p>\n\n<pre><code>String[] findStringsContaining(List&lt;String&gt; strings, String[] words)\n</code></pre>\n\n<p>can be partitioned and handed off to parallel threads of execution, given that it is purely functional and side effect free in an intermediate stage, and, the results joined as a final step.  I.e. you can partition across the words, and/or, the list of strings.  </p>\n\n<p>This is how <a href=\"http://en.wikipedia.org/wiki/MapReduce\" rel=\"nofollow noreferrer\">map-reduce</a> works (and your case, its irrelevant that its all happening on the same machine.)</p>\n\n<p>Your mapper (assigned to a thread for each of the words) is:</p>\n\n<pre><code>boolean [] stringContainsWord (List&lt;String&gt; strings, String word);\n</code></pre>\n\n<p>That method would execute in parallel.</p>\n\n<p>The boolean array would then have a true for each index (of List) that matched for the given word.</p>\n\n<p>and your reducer (running after all mappers have finished) is:</p>\n\n<pre><code>List&lt;String&gt; getMatchingList(List&lt;String&gt;, List&lt;boolean[]&gt; mapperResults);\n</code></pre>\n\n<p>Putting aside the overhead for the threads and assuming negligible costs for mapper thread counts for a reasonable number of input words, this would give you a O(n) (for the mapper) +O(m) (for the reducer) time process, where n is the number of items in your list of strings, and m is the number of words in your input.</p>\n\n<p>You can further parallelize the task by partitioning your list of Strings and running p threads for each of the words, and having each thread searching a sub-set of your list of Strings, so that the input List to your mapper is 1/p elements of the overall list.</p>\n\n<p>--</p>\n\n<p>An alternative approach which you may want to consider, specially if the list of strings is huge, and, the content is langauge (such as English), is to optimize given the fact that most languages have a fairly small set of words that constitute the bulk of sentences in that language.  For example, if your list has 2 million English sentences, chances are that the list of unique words is many orders of magnitude smaller (say a few hundred).</p>\n\n<p>In that case, you can have a Map of word -> sentences, and testing for matching sentences for any given word is reduced to a lookup in the map.</p>\n\n<p>(Note that you can still combine the initial approach with this.)</p>\n"},{"tags":[],"owner":{"account_id":55840,"reputation":318,"user_id":167316,"display_name":"CodePartizan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1253052123,"creation_date":1253052123,"answer_id":1429858,"question_id":1428348,"body_markdown":"from ejspencer&#39;s Idea I put this together\r\n\r\n    // Build the dictionary/data structure \r\n    // O( [average split length]*n )\r\n    public static Dictionary&lt;String,List&lt;int&gt;&gt; BuildDictionary(String[] data)\r\n    {\r\n        String[] temp;\r\n        Dictionary&lt;String,List&lt;int&gt;&gt; dict = new Dictionary&lt;String,List&lt;int&gt;&gt;();\r\n        for(int i = 0; i &lt; data.length; i++)\r\n        {\r\n        \ttemp = data[i].split(&quot; &quot;);\r\n        \tfor(int j = 0; j &lt; temp.length; j ++)\r\n        \t{\r\n        \t\tif(dict.get(temp[j]) == null)\r\n        \t\t\tdict.put(temp[j],new List&lt;int&gt;());\r\n    \r\n        \t\tdict.get(temp[j]).add(i);\r\n        \t}\r\n        }\r\n\r\n        return dict;\r\n    }\r\n\r\n    // find all the matches\r\n    // O( [average number of matches per key]*[input split length])\r\n    public static List&lt;int&gt; FindMatches(String input, Dictionary&lt;String,List&lt;int&gt; dict)\r\n    {\r\n        String[] temp = input.split(&quot; &quot;);\r\n        List&lt;int&gt; ret = new List&lt;int&gt;();\r\n\r\n        for(int i = 0; i &lt; temp.length; i++)\r\n        {\r\n        \tif(dict.get(temp[i]) == null)\r\n        \t\tcontinue; // no match\r\n\r\n        \t// read the match into the return list, ignore copies\r\n        \tList&lt;int&gt; match = dict.get(temp[i]);\r\n        \tfor(int j = 0; j &lt; match.count(); j++)\r\n        \t\tif(!ret.contains(match.get(i))\r\n        \t\t\tret.add(match.get(i));\r\n        }\r\n\r\n        return ret;\r\n    }\r\n\r\nit probably won&#39;t compile right off, but I figure you&#39;re going to have to futz with it anyway and this gives you a pretty good idea for fast access and simple code (no offense alphazero).\r\n\r\nThis search is case sensitive, but you can just as eaily use toUpper or toLower to change it.","title":"Search For String Permutations In String Set","body":"<p>from ejspencer's Idea I put this together</p>\n\n<pre><code>// Build the dictionary/data structure \n// O( [average split length]*n )\npublic static Dictionary&lt;String,List&lt;int&gt;&gt; BuildDictionary(String[] data)\n{\n    String[] temp;\n    Dictionary&lt;String,List&lt;int&gt;&gt; dict = new Dictionary&lt;String,List&lt;int&gt;&gt;();\n    for(int i = 0; i &lt; data.length; i++)\n    {\n        temp = data[i].split(\" \");\n        for(int j = 0; j &lt; temp.length; j ++)\n        {\n            if(dict.get(temp[j]) == null)\n                dict.put(temp[j],new List&lt;int&gt;());\n\n            dict.get(temp[j]).add(i);\n        }\n    }\n\n    return dict;\n}\n\n// find all the matches\n// O( [average number of matches per key]*[input split length])\npublic static List&lt;int&gt; FindMatches(String input, Dictionary&lt;String,List&lt;int&gt; dict)\n{\n    String[] temp = input.split(\" \");\n    List&lt;int&gt; ret = new List&lt;int&gt;();\n\n    for(int i = 0; i &lt; temp.length; i++)\n    {\n        if(dict.get(temp[i]) == null)\n            continue; // no match\n\n        // read the match into the return list, ignore copies\n        List&lt;int&gt; match = dict.get(temp[i]);\n        for(int j = 0; j &lt; match.count(); j++)\n            if(!ret.contains(match.get(i))\n                ret.add(match.get(i));\n    }\n\n    return ret;\n}\n</code></pre>\n\n<p>it probably won't compile right off, but I figure you're going to have to futz with it anyway and this gives you a pretty good idea for fast access and simple code (no offense alphazero).</p>\n\n<p>This search is case sensitive, but you can just as eaily use toUpper or toLower to change it.</p>\n"},{"tags":[],"owner":{},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1253314885,"creation_date":1253314885,"answer_id":1447170,"question_id":1428348,"body_markdown":"How big is your dictionary? You could convert your dictionary to a trie. There have been posts by people how to convert a dictionary to a trie. Once you do that, lookup is simple and fast.\r\n\r\nAlso, a simple solution could be to break up the search string into separate words, and search each of them in your trie, making sure duplicates are not considered twice.","title":"Search For String Permutations In String Set","body":"<p>How big is your dictionary? You could convert your dictionary to a trie. There have been posts by people how to convert a dictionary to a trie. Once you do that, lookup is simple and fast.</p>\n\n<p>Also, a simple solution could be to break up the search string into separate words, and search each of them in your trie, making sure duplicates are not considered twice.</p>\n"},{"tags":[],"owner":{"account_id":24075,"reputation":29658,"user_id":60956,"accept_rate":85,"display_name":"Joel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659600453,"creation_date":1267886681,"answer_id":2392818,"question_id":1428348,"body_markdown":"For large input strings and dictionaries with multi word phrases consider either the [Rabin-Karp][1] or [Aho-Corasick][2] algos.\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Rabin–Karp_string_search_algorithm\r\n  [2]: http://en.wikipedia.org/wiki/Aho-Corasick_algorithm","title":"Search For String Permutations In String Set","body":"<p>For large input strings and dictionaries with multi word phrases consider either the <a href=\"http://en.wikipedia.org/wiki/Rabin%E2%80%93Karp_string_search_algorithm\" rel=\"nofollow noreferrer\">Rabin-Karp</a> or <a href=\"http://en.wikipedia.org/wiki/Aho-Corasick_algorithm\" rel=\"nofollow noreferrer\">Aho-Corasick</a> algos.</p>\n"}],"owner":{"account_id":7944,"reputation":21068,"user_id":14007,"accept_rate":92,"display_name":"Alex Beardsley"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2323,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":1428815,"answer_count":7,"score":1,"last_activity_date":1659600453,"creation_date":1253033537,"question_id":1428348,"body_markdown":"The title of this is kind of awkward; I wasn&#39;t really sure how to sum this up.  I know how I can do this, I&#39;m just not sure how to do it efficiently.  Here&#39;s my problem:\r\n\r\nI have a string as input. Let&#39;s say:\r\n\r\n&gt; foo bar\r\n\r\nAnd I have a very large set of strings (tens of thousands).  Let&#39;s say:\r\n\r\n&gt; foo, baz, bar, blah, foo bar, foo baz\r\n\r\nI need to match the input to strings in the set.  In this case, &quot;foo&quot;, &quot;bar&quot;, and &quot;foo bar&quot;  are considered matches.\r\n\r\nSo, I need to either somehow search all permutations of the input (it could be longer than 2 words), or somehow detect if the user meant to put it (or part of it) in quotes.  Or maybe do something I haven&#39;t thought of.\r\n\r\nIs there some kind of data structure or algorithm I can use for this?  How should I go about doing it, or should I not handle this use case?\r\n\r\n**EDIT**: There&#39;s a typo above that distorted the problem; in the above example, &quot;foo baz&quot; is also a match.  Sorry about that.  I essentially want to match any permutation of the input words to the dictionary.  So an input of &quot;abc xyz&quot; would match to &quot;123 abc&quot; or &quot;abc xyz&quot; or &quot;xyz 123&quot;, but not &quot;abcxyz&quot;.","title":"Search For String Permutations In String Set","body":"<p>The title of this is kind of awkward; I wasn't really sure how to sum this up.  I know how I can do this, I'm just not sure how to do it efficiently.  Here's my problem:</p>\n\n<p>I have a string as input. Let's say:</p>\n\n<blockquote>\n  <p>foo bar</p>\n</blockquote>\n\n<p>And I have a very large set of strings (tens of thousands).  Let's say:</p>\n\n<blockquote>\n  <p>foo, baz, bar, blah, foo bar, foo baz</p>\n</blockquote>\n\n<p>I need to match the input to strings in the set.  In this case, \"foo\", \"bar\", and \"foo bar\"  are considered matches.</p>\n\n<p>So, I need to either somehow search all permutations of the input (it could be longer than 2 words), or somehow detect if the user meant to put it (or part of it) in quotes.  Or maybe do something I haven't thought of.</p>\n\n<p>Is there some kind of data structure or algorithm I can use for this?  How should I go about doing it, or should I not handle this use case?</p>\n\n<p><strong>EDIT</strong>: There's a typo above that distorted the problem; in the above example, \"foo baz\" is also a match.  Sorry about that.  I essentially want to match any permutation of the input words to the dictionary.  So an input of \"abc xyz\" would match to \"123 abc\" or \"abc xyz\" or \"xyz 123\", but not \"abcxyz\".</p>\n"},{"tags":["java","web-services","https"],"answers":[{"tags":[],"owner":{"account_id":914,"reputation":234979,"user_id":1199,"display_name":"Blair Conrad"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1222442085,"creation_date":1222442085,"answer_id":140142,"question_id":140113,"body_markdown":"Really, there shouldn&#39;t much different from consuming a web service over HTTP. The big thing is that the process calling the web service will have to trust the server&#39;s SSL certificate. If the certificate was purchased from a well-known certificate-issuing authority, this usually isn&#39;t a problem. Otherwise, the client will want to either trust the root certificate, or the certificate associated with the server&#39;s fully qualified host name.\r\n","title":"Consume Webservice using https protocol","body":"<p>Really, there shouldn't much different from consuming a web service over HTTP. The big thing is that the process calling the web service will have to trust the server's SSL certificate. If the certificate was purchased from a well-known certificate-issuing authority, this usually isn't a problem. Otherwise, the client will want to either trust the root certificate, or the certificate associated with the server's fully qualified host name.</p>\n"},{"tags":[],"owner":{"account_id":6590,"reputation":13159,"user_id":11142,"accept_rate":49,"display_name":"anjanb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1222442819,"creation_date":1222442819,"answer_id":140214,"question_id":140113,"body_markdown":"Blair says it right. all the same, try it out using SoapUI , which is a web service test client. This is an open source utility : so you get a chance to see how things work under the covers.","title":"Consume Webservice using https protocol","body":"<p>Blair says it right. all the same, try it out using SoapUI , which is a web service test client. This is an open source utility : so you get a chance to see how things work under the covers.</p>\n"},{"tags":[],"owner":{"account_id":10045,"reputation":5505,"user_id":18796,"display_name":"Ian McLaird"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1659600039,"creation_date":1222971093,"answer_id":163759,"question_id":140113,"body_markdown":"You may need to use the [keytool][1] command to trust the server&#39;s SSL certificate.  I&#39;ve generally found that it is necessary to run something like this:\r\n\r\n    keytool -importcert -v -trustcacerts -alias ServerName -file server_cert_file.crt -keystore client_keystore_file\r\n\r\n  [1]: https://web.archive.org/web/20100606064854/http://java.sun.com:80/j2se/1.4.2/docs/tooldocs/windows/keytool.html","title":"Consume Webservice using https protocol","body":"<p>You may need to use the <a href=\"https://web.archive.org/web/20100606064854/http://java.sun.com:80/j2se/1.4.2/docs/tooldocs/windows/keytool.html\" rel=\"nofollow noreferrer\">keytool</a> command to trust the server's SSL certificate.  I've generally found that it is necessary to run something like this:</p>\n<pre><code>keytool -importcert -v -trustcacerts -alias ServerName -file server_cert_file.crt -keystore client_keystore_file\n</code></pre>\n"}],"owner":{"account_id":6830,"reputation":4131,"user_id":11612,"accept_rate":92,"display_name":"Damien"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3047,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":140142,"answer_count":3,"score":1,"last_activity_date":1659600039,"creation_date":1222441782,"question_id":140113,"body_markdown":"I want to consume a web service over https from a java client.\r\nWhat steps will i need to take in order to do this?","title":"Consume Webservice using https protocol","body":"<p>I want to consume a web service over https from a java client.\nWhat steps will i need to take in order to do this?</p>\n"},{"tags":["java","algorithm","java-8","java-stream","collectors"],"comments":[{"owner":{"account_id":25251803,"reputation":88,"user_id":19084192,"display_name":"Kaiak"},"score":0,"creation_date":1659540616,"post_id":73223765,"comment_id":129319759,"body_markdown":"Can you override `equals()` (and `hashCode()`) of your Party class? In this case you can use `distinct()`. \n\nMore info here: https://stackoverflow.com/questions/27911406/java8-streams-remove-duplicates-with-stream-distinct","body":"Can you override <code>equals()</code> (and <code>hashCode()</code>) of your Party class? In this case you can use <code>distinct()</code>.   More info here: <a href=\"https://stackoverflow.com/questions/27911406/java8-streams-remove-duplicates-with-stream-distinct\" title=\"java8 streams remove duplicates with stream distinct\">stackoverflow.com/questions/27911406/&hellip;</a>"},{"owner":{"account_id":286249,"reputation":43941,"user_id":585411,"accept_rate":60,"display_name":"btilly"},"score":0,"creation_date":1659541174,"post_id":73223765,"comment_id":129319978,"body_markdown":"By non-duplicate list do you mean a list of the items which are never duplicated?  Or do you mean a list of all items but skipping the duplicate copies?  If the latter, if B is a duplicate of A and C is a duplicate of B (but different field), do you want to just get A?  Or get A and C because C is not a duplicate of anything in the list.","body":"By non-duplicate list do you mean a list of the items which are never duplicated?  Or do you mean a list of all items but skipping the duplicate copies?  If the latter, if B is a duplicate of A and C is a duplicate of B (but different field), do you want to just get A?  Or get A and C because C is not a duplicate of anything in the list."},{"owner":{"account_id":25762469,"reputation":53,"user_id":19513159,"display_name":"Yash garg"},"score":0,"creation_date":1659545197,"post_id":73223765,"comment_id":129321458,"body_markdown":"@AlexanderIvanchenko `Function.identity()` is used for String not for the Party class itself. I have mapped it to name property.","body":"@AlexanderIvanchenko <code>Function.identity()</code> is used for String not for the Party class itself. I have mapped it to name property."},{"owner":{"account_id":25762469,"reputation":53,"user_id":19513159,"display_name":"Yash garg"},"score":0,"creation_date":1659545318,"post_id":73223765,"comment_id":129321498,"body_markdown":"@Kaiak I can override `equals()/hashCode()` but the fields should be compared using a `||` not using `&amp;&amp;`","body":"@Kaiak I can override <code>equals()&#47;hashCode()</code> but the fields should be compared using a <code>||</code> not using <code>&amp;&amp;</code>"},{"owner":{"account_id":25762469,"reputation":53,"user_id":19513159,"display_name":"Yash garg"},"score":0,"creation_date":1659545486,"post_id":73223765,"comment_id":129321557,"body_markdown":"@btilly In the situation i.e. B is duplicate of A and C is a duplicate of B, I want to get both A and C because now the list contain two completely different elements","body":"@btilly In the situation i.e. B is duplicate of A and C is a duplicate of B, I want to get both A and C because now the list contain two completely different elements"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1659556935,"post_id":73223765,"comment_id":129325342,"body_markdown":"@Yashgarg No, sorry, it wouldn&#39;t work. I&#39;ve explained in the answer why this approach of using a broken `equals/hashCode` implementation is **not** viable.","body":"@Yashgarg No, sorry, it wouldn&#39;t work. I&#39;ve explained in the answer why this approach of using a broken <code>equals&#47;hashCode</code> implementation is <b>not</b> viable."}],"answers":[{"tags":[],"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659545934,"creation_date":1659545085,"answer_id":73224937,"question_id":73223765,"body_markdown":"I would use create a map for each property where \r\n\r\n- `key` is the property we want to check duplicate\r\n- `value` is a `Set` containing all the index of element in the list with same key.\r\n\r\nThen we can \r\n1. filter values in the map with more that 1 index (i.e. duplicate indexes).\r\n2. union all the duplicate index\r\n3. determine if the element is duplicate/unique by using the duplicate index.\r\n\r\nThe time complexity is roughly O(n).\r\n```\r\npublic class UniquePerEachProperty {\r\n    private static void separate(List&lt;Party&gt; partyList) {\r\n        Map&lt;String, Set&lt;Integer&gt;&gt; nameToIndexesMap = new HashMap&lt;&gt;();\r\n        Map&lt;String, Set&lt;Integer&gt;&gt; emailToIndexesMap = new HashMap&lt;&gt;();\r\n        Map&lt;Long, Set&lt;Integer&gt;&gt; numberToIndexesMap = new HashMap&lt;&gt;();\r\n        Map&lt;String, Set&lt;Integer&gt;&gt; gstNumberToIndexesMap = new HashMap&lt;&gt;();\r\n        for (int i = 0; i &lt; partyList.size(); i++) {\r\n            Party party = partyList.get(i);\r\n            nameToIndexesMap.putIfAbsent(party.getName(), new HashSet&lt;&gt;());\r\n            nameToIndexesMap.get(party.getName()).add(i);\r\n\r\n            emailToIndexesMap.putIfAbsent(party.getEmail(), new HashSet&lt;&gt;());\r\n            emailToIndexesMap.get(party.getEmail()).add(i);\r\n\r\n            numberToIndexesMap.putIfAbsent(party.getNumber(), new HashSet&lt;&gt;());\r\n            numberToIndexesMap.get(party.getNumber()).add(i);\r\n\r\n            gstNumberToIndexesMap.putIfAbsent(party.getGstNumber(), new HashSet&lt;&gt;());\r\n            gstNumberToIndexesMap.get(party.getGstNumber()).add(i);\r\n        }\r\n        Set&lt;Integer&gt; duplicatedIndexes = Stream.of(\r\n                        nameToIndexesMap.values(),\r\n                        emailToIndexesMap.values(),\r\n                        numberToIndexesMap.values(),\r\n                        gstNumberToIndexesMap.values()\r\n                ).flatMap(Collection::stream).filter(indexes -&gt; indexes.size() &gt; 1)\r\n                .flatMap(Set::stream).collect(Collectors.toSet());\r\n        List&lt;Party&gt; duplicatedList = new ArrayList&lt;&gt;();\r\n        List&lt;Party&gt; uniqueList = new ArrayList&lt;&gt;();\r\n        for (int i = 0; i &lt; partyList.size(); i++) {\r\n            Party party = partyList.get(i);\r\n            if (duplicatedIndexes.contains(i)) {\r\n                duplicatedList.add(party);\r\n            } else {\r\n                uniqueList.add(party);\r\n            }\r\n        }\r\n        System.out.println(&quot;duplicated:&quot; + duplicatedList);\r\n        System.out.println(&quot;unique:&quot; + uniqueList);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        separate(List.of(\r\n                // name duplicate\r\n                new Party(&quot;name1&quot;, 1L, &quot;email1&quot;, &quot;gstNumber1&quot;),\r\n                new Party(&quot;name1&quot;, 2L, &quot;email2&quot;, &quot;gstNumber2&quot;),\r\n                // number duplicate\r\n                new Party(&quot;name3&quot;, 3L, &quot;email3&quot;, &quot;gstNumber3&quot;),\r\n                new Party(&quot;name4&quot;, 3L, &quot;email4&quot;, &quot;gstNumber4&quot;),\r\n                // email duplicate\r\n                new Party(&quot;name5&quot;, 5L, &quot;email5&quot;, &quot;gstNumber5&quot;),\r\n                new Party(&quot;name6&quot;, 6L, &quot;email5&quot;, &quot;gstNumber6&quot;),\r\n                // gstNumber duplicate\r\n                new Party(&quot;name7&quot;, 7L, &quot;email7&quot;, &quot;gstNumber7&quot;),\r\n                new Party(&quot;name8&quot;, 8L, &quot;email8&quot;, &quot;gstNumber7&quot;),\r\n                // unique\r\n                new Party(&quot;name9&quot;, 9L, &quot;email9&quot;, &quot;gstNumber9&quot;)\r\n        ));\r\n    }\r\n}\r\n```\r\nAssume Party has below `constructor` and `toString()`(for testing)\r\n```\r\npublic class Party {\r\n    public Party(String name, Long number, String email, String gstNumber) {\r\n        this.name = name;\r\n        this.number = number;\r\n        this.email = email;\r\n        this.address = &quot;&quot;;\r\n        this.openingBalance = BigDecimal.ZERO;\r\n        this.openingDate = LocalDateTime.MIN;\r\n        this.gstNumber = gstNumber;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Party{&quot; +\r\n                &quot;name=&#39;&quot; + name + &#39;\\&#39;&#39; +\r\n                &quot;, number=&quot; + number +\r\n                &quot;, email=&#39;&quot; + email + &#39;\\&#39;&#39; +\r\n                &quot;, gstNumber=&#39;&quot; + gstNumber + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n    }\r\n    ...\r\n}\r\n```","title":"Extract a list containing duplicates from a list and also get the non-duplicate list java 8 stream","body":"<p>I would use create a map for each property where</p>\n<ul>\n<li><code>key</code> is the property we want to check duplicate</li>\n<li><code>value</code> is a <code>Set</code> containing all the index of element in the list with same key.</li>\n</ul>\n<p>Then we can</p>\n<ol>\n<li>filter values in the map with more that 1 index (i.e. duplicate indexes).</li>\n<li>union all the duplicate index</li>\n<li>determine if the element is duplicate/unique by using the duplicate index.</li>\n</ol>\n<p>The time complexity is roughly O(n).</p>\n<pre><code>public class UniquePerEachProperty {\n    private static void separate(List&lt;Party&gt; partyList) {\n        Map&lt;String, Set&lt;Integer&gt;&gt; nameToIndexesMap = new HashMap&lt;&gt;();\n        Map&lt;String, Set&lt;Integer&gt;&gt; emailToIndexesMap = new HashMap&lt;&gt;();\n        Map&lt;Long, Set&lt;Integer&gt;&gt; numberToIndexesMap = new HashMap&lt;&gt;();\n        Map&lt;String, Set&lt;Integer&gt;&gt; gstNumberToIndexesMap = new HashMap&lt;&gt;();\n        for (int i = 0; i &lt; partyList.size(); i++) {\n            Party party = partyList.get(i);\n            nameToIndexesMap.putIfAbsent(party.getName(), new HashSet&lt;&gt;());\n            nameToIndexesMap.get(party.getName()).add(i);\n\n            emailToIndexesMap.putIfAbsent(party.getEmail(), new HashSet&lt;&gt;());\n            emailToIndexesMap.get(party.getEmail()).add(i);\n\n            numberToIndexesMap.putIfAbsent(party.getNumber(), new HashSet&lt;&gt;());\n            numberToIndexesMap.get(party.getNumber()).add(i);\n\n            gstNumberToIndexesMap.putIfAbsent(party.getGstNumber(), new HashSet&lt;&gt;());\n            gstNumberToIndexesMap.get(party.getGstNumber()).add(i);\n        }\n        Set&lt;Integer&gt; duplicatedIndexes = Stream.of(\n                        nameToIndexesMap.values(),\n                        emailToIndexesMap.values(),\n                        numberToIndexesMap.values(),\n                        gstNumberToIndexesMap.values()\n                ).flatMap(Collection::stream).filter(indexes -&gt; indexes.size() &gt; 1)\n                .flatMap(Set::stream).collect(Collectors.toSet());\n        List&lt;Party&gt; duplicatedList = new ArrayList&lt;&gt;();\n        List&lt;Party&gt; uniqueList = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; partyList.size(); i++) {\n            Party party = partyList.get(i);\n            if (duplicatedIndexes.contains(i)) {\n                duplicatedList.add(party);\n            } else {\n                uniqueList.add(party);\n            }\n        }\n        System.out.println(&quot;duplicated:&quot; + duplicatedList);\n        System.out.println(&quot;unique:&quot; + uniqueList);\n    }\n\n    public static void main(String[] args) {\n        separate(List.of(\n                // name duplicate\n                new Party(&quot;name1&quot;, 1L, &quot;email1&quot;, &quot;gstNumber1&quot;),\n                new Party(&quot;name1&quot;, 2L, &quot;email2&quot;, &quot;gstNumber2&quot;),\n                // number duplicate\n                new Party(&quot;name3&quot;, 3L, &quot;email3&quot;, &quot;gstNumber3&quot;),\n                new Party(&quot;name4&quot;, 3L, &quot;email4&quot;, &quot;gstNumber4&quot;),\n                // email duplicate\n                new Party(&quot;name5&quot;, 5L, &quot;email5&quot;, &quot;gstNumber5&quot;),\n                new Party(&quot;name6&quot;, 6L, &quot;email5&quot;, &quot;gstNumber6&quot;),\n                // gstNumber duplicate\n                new Party(&quot;name7&quot;, 7L, &quot;email7&quot;, &quot;gstNumber7&quot;),\n                new Party(&quot;name8&quot;, 8L, &quot;email8&quot;, &quot;gstNumber7&quot;),\n                // unique\n                new Party(&quot;name9&quot;, 9L, &quot;email9&quot;, &quot;gstNumber9&quot;)\n        ));\n    }\n}\n</code></pre>\n<p>Assume Party has below <code>constructor</code> and <code>toString()</code>(for testing)</p>\n<pre><code>public class Party {\n    public Party(String name, Long number, String email, String gstNumber) {\n        this.name = name;\n        this.number = number;\n        this.email = email;\n        this.address = &quot;&quot;;\n        this.openingBalance = BigDecimal.ZERO;\n        this.openingDate = LocalDateTime.MIN;\n        this.gstNumber = gstNumber;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Party{&quot; +\n                &quot;name='&quot; + name + '\\'' +\n                &quot;, number=&quot; + number +\n                &quot;, email='&quot; + email + '\\'' +\n                &quot;, gstNumber='&quot; + gstNumber + '\\'' +\n                '}';\n    }\n    ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1659554070,"creation_date":1659553256,"answer_id":73226513,"question_id":73223765,"body_markdown":"&lt;h1&gt;Never ignore Equals/hashCode contract&lt;/h1&gt;\r\n\r\n&gt; `name`, `email`, `number`, `gstNumber`\r\n&gt; \r\n&gt; Any of these properties can result in a duplicate, which mean **or**\r\n\r\nYour definition of a duplicate **implies** that any of these properties should match, whilst others might **not**.\r\n\r\nIt means that it&#39;s impossible to provide an implementation `equals/hashCode` that would match the given definition and doesn&#39;t violate the [*hashCode contract*](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()).\r\n\r\n&gt; If two objects are equal according to the `equals` method, then calling the `hashCode` method on each of the two objects must produce the **same integer result**.\r\n\r\nI.e. if you implement `equals` in such a way they any (not all) of these properties: `name`, `email`, `number`, `gstNumber` could match, and that would enough to consider the two objects equal, then there&#39;s no way to implement `hashCode` correctly.\r\n\r\nAnd as the consequence of this, you can&#39;t use the object with a broken `equals/hashCode` implementation in with a hash-based Collection because equal objects might end up the in the different bucket (since they can produce different hashes). I.e. `HashMap` would not be able to recognize the duplicated keys, hence `groupingBy` with `groupingBy()` with `Function.identity()` as a *classifier* function would not work properly.\r\n\r\nTherefore, to address this problem, you need to implement `equals()` based on all `4` properties: `name`, `email`, `number`, `gstNumber` (i.e. all these values have to be equal), and similarly all these values must contribute to hash-code.\r\n\r\n&lt;h1&gt;How to determine Duplicates&lt;/h1&gt;\r\n\r\nThere&#39;s no easy way to determine duplicates by multiple criteria. The solution you&#39;ve provided is **not** viable, since we can&#39;t rely on the `equals/hashCode`.\r\n\r\nThe only way is to generate a `HashMap` separately for each end every attribute (i.e. in this case we need `4` maps). But can we alternate this, avoiding repeating the same steps for each map and hard coding the logic?\r\n\r\nYes, we can.\r\n\r\nWe can create a custom generic accumulation type (it would be suitable for any class - no hard-coded logic) that would encapsulate all the logic of determining duplicates and maintain an arbitrary number of maps under the hood. After consuming all the elements from the given collection, this custom object would be aware of all the duplicates in it.\r\n\r\nThat&#39;s how it can be implemented.\r\n\r\nA custom accumulation type that would be used as container of a custom *Collector*. Its constructor expects varargs of *functions*, each function correspond to the property that should be taken into account while checking whether an object is a duplicate.\r\n\r\n    public static class DuplicateChecker&lt;T&gt; implements Consumer&lt;T&gt; {\r\n        \r\n        private List&lt;DuplicateHandler&lt;T&gt;&gt; handles;\r\n        private Set&lt;T&gt; duplicates;\r\n    \r\n        @SafeVarargs\r\n        public DuplicateChecker(Function&lt;T, ?&gt;... keyExtractors) {\r\n            this.handles = Arrays.stream(keyExtractors)\r\n                .map(DuplicateHandler::new)\r\n                .toList();\r\n        }\r\n    \r\n        @Override\r\n        public void accept(T t) {\r\n            handles.forEach(h -&gt; h.accept(t));\r\n        }\r\n        \r\n        public DuplicateChecker&lt;T&gt; merge(DuplicateChecker&lt;T&gt; other) {\r\n            for (DuplicateHandler&lt;T&gt; handler: handles) {\r\n                other.handles.forEach(handler::merge);\r\n            }\r\n            \r\n            return this;\r\n        }\r\n    \r\n        public DuplicateChecker&lt;T&gt; finish() {\r\n            duplicates = handles.stream()\r\n                .flatMap(handler -&gt; handler.getDuplicates().stream())\r\n                .flatMap(Set::stream)\r\n                .collect(Collectors.toSet());\r\n            \r\n            return this;\r\n        }\r\n        \r\n        public boolean isDuplicate(T t) {\r\n            return duplicates.contains(t);\r\n        }\r\n    }\r\n\r\nA helper class representing a single createrion (like `name`, `email`, etc.) which encapsulates a `HashMap`. `keyExtractor` is used to obtain a *key* from an object of type `T`.\r\n\r\n    public static class DuplicateHandler&lt;T&gt; implements Consumer&lt;T&gt; {\r\n        private Map&lt;Object, Set&lt;T&gt;&gt; itemByKey = new HashMap&lt;&gt;();\r\n        private Function&lt;T, ?&gt; keyExtractor;\r\n    \r\n        public DuplicateHandler(Function&lt;T, ?&gt; keyExtractor) {\r\n            this.keyExtractor = keyExtractor;\r\n        }\r\n    \r\n        @Override\r\n        public void accept(T t) {\r\n            itemByKey.computeIfAbsent(keyExtractor.apply(t), k -&gt; new HashSet&lt;&gt;()).add(t);\r\n        }\r\n    \r\n        public void merge(DuplicateHandler&lt;T&gt; other) {\r\n            other.itemByKey.forEach((k, v) -&gt;\r\n                itemByKey.merge(k,v,(oldV, newV) -&gt; { oldV.addAll(newV); return oldV; }));\r\n        }\r\n        \r\n        public Collection&lt;Set&lt;T&gt;&gt; getDuplicates() {\r\n            Collection&lt;Set&lt;T&gt;&gt; duplicates = itemByKey.values();\r\n            duplicates.removeIf(set -&gt; set.size() == 1); // the object is proved to be unique by this particular property\r\n            \r\n            return duplicates;\r\n        }\r\n    }\r\n\r\nAnd that is the method, responsible for generating the map of duplicates, that would be used from the clean code. The given collection would be partitioned into two parts: one mapped to the *key* `true` - duplicates, another mapped to the *key* `false` - unique objects.\r\n\r\n    public static &lt;T&gt; Map&lt;Boolean, List&lt;T&gt;&gt; getPartitionByProperties(Collection&lt;T&gt; parties,\r\n                                                                     Function&lt;T, ?&gt;... keyExtractors) {\r\n        \r\n        DuplicateChecker&lt;T&gt; duplicateChecker = parties.stream()\r\n            .collect(Collector.of(\r\n                () -&gt; new DuplicateChecker&lt;&gt;(keyExtractors),\r\n                DuplicateChecker::accept,\r\n                DuplicateChecker::merge,\r\n                DuplicateChecker::finish\r\n            ));\r\n        \r\n        return parties.stream()\r\n            .collect(Collectors.partitioningBy(duplicateChecker::isDuplicate));\r\n    }\r\n\r\nAnd that how you can apply it for your particular case.\r\n\r\n`main()`\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;Party&gt; parties = // initializing the list of parties\r\n        \r\n        Map&lt;Boolean, List&lt;Party&gt;&gt; isDuplicate = partitionByProperties(parties,\r\n                Party::getName, Party::getNumber,\r\n                Party::getEmail, Party::getGstNumber);\r\n    }","title":"Extract a list containing duplicates from a list and also get the non-duplicate list java 8 stream","body":"<h1>Never ignore Equals/hashCode contract</h1>\n<blockquote>\n<p><code>name</code>, <code>email</code>, <code>number</code>, <code>gstNumber</code></p>\n<p>Any of these properties can result in a duplicate, which mean <strong>or</strong></p>\n</blockquote>\n<p>Your definition of a duplicate <strong>implies</strong> that any of these properties should match, whilst others might <strong>not</strong>.</p>\n<p>It means that it's impossible to provide an implementation <code>equals/hashCode</code> that would match the given definition and doesn't violate the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()\" rel=\"nofollow noreferrer\"><em>hashCode contract</em></a>.</p>\n<blockquote>\n<p>If two objects are equal according to the <code>equals</code> method, then calling the <code>hashCode</code> method on each of the two objects must produce the <strong>same integer result</strong>.</p>\n</blockquote>\n<p>I.e. if you implement <code>equals</code> in such a way they any (not all) of these properties: <code>name</code>, <code>email</code>, <code>number</code>, <code>gstNumber</code> could match, and that would enough to consider the two objects equal, then there's no way to implement <code>hashCode</code> correctly.</p>\n<p>And as the consequence of this, you can't use the object with a broken <code>equals/hashCode</code> implementation in with a hash-based Collection because equal objects might end up the in the different bucket (since they can produce different hashes). I.e. <code>HashMap</code> would not be able to recognize the duplicated keys, hence <code>groupingBy</code> with <code>groupingBy()</code> with <code>Function.identity()</code> as a <em>classifier</em> function would not work properly.</p>\n<p>Therefore, to address this problem, you need to implement <code>equals()</code> based on all <code>4</code> properties: <code>name</code>, <code>email</code>, <code>number</code>, <code>gstNumber</code> (i.e. all these values have to be equal), and similarly all these values must contribute to hash-code.</p>\n<h1>How to determine Duplicates</h1>\n<p>There's no easy way to determine duplicates by multiple criteria. The solution you've provided is <strong>not</strong> viable, since we can't rely on the <code>equals/hashCode</code>.</p>\n<p>The only way is to generate a <code>HashMap</code> separately for each end every attribute (i.e. in this case we need <code>4</code> maps). But can we alternate this, avoiding repeating the same steps for each map and hard coding the logic?</p>\n<p>Yes, we can.</p>\n<p>We can create a custom generic accumulation type (it would be suitable for any class - no hard-coded logic) that would encapsulate all the logic of determining duplicates and maintain an arbitrary number of maps under the hood. After consuming all the elements from the given collection, this custom object would be aware of all the duplicates in it.</p>\n<p>That's how it can be implemented.</p>\n<p>A custom accumulation type that would be used as container of a custom <em>Collector</em>. Its constructor expects varargs of <em>functions</em>, each function correspond to the property that should be taken into account while checking whether an object is a duplicate.</p>\n<pre><code>public static class DuplicateChecker&lt;T&gt; implements Consumer&lt;T&gt; {\n    \n    private List&lt;DuplicateHandler&lt;T&gt;&gt; handles;\n    private Set&lt;T&gt; duplicates;\n\n    @SafeVarargs\n    public DuplicateChecker(Function&lt;T, ?&gt;... keyExtractors) {\n        this.handles = Arrays.stream(keyExtractors)\n            .map(DuplicateHandler::new)\n            .toList();\n    }\n\n    @Override\n    public void accept(T t) {\n        handles.forEach(h -&gt; h.accept(t));\n    }\n    \n    public DuplicateChecker&lt;T&gt; merge(DuplicateChecker&lt;T&gt; other) {\n        for (DuplicateHandler&lt;T&gt; handler: handles) {\n            other.handles.forEach(handler::merge);\n        }\n        \n        return this;\n    }\n\n    public DuplicateChecker&lt;T&gt; finish() {\n        duplicates = handles.stream()\n            .flatMap(handler -&gt; handler.getDuplicates().stream())\n            .flatMap(Set::stream)\n            .collect(Collectors.toSet());\n        \n        return this;\n    }\n    \n    public boolean isDuplicate(T t) {\n        return duplicates.contains(t);\n    }\n}\n</code></pre>\n<p>A helper class representing a single createrion (like <code>name</code>, <code>email</code>, etc.) which encapsulates a <code>HashMap</code>. <code>keyExtractor</code> is used to obtain a <em>key</em> from an object of type <code>T</code>.</p>\n<pre><code>public static class DuplicateHandler&lt;T&gt; implements Consumer&lt;T&gt; {\n    private Map&lt;Object, Set&lt;T&gt;&gt; itemByKey = new HashMap&lt;&gt;();\n    private Function&lt;T, ?&gt; keyExtractor;\n\n    public DuplicateHandler(Function&lt;T, ?&gt; keyExtractor) {\n        this.keyExtractor = keyExtractor;\n    }\n\n    @Override\n    public void accept(T t) {\n        itemByKey.computeIfAbsent(keyExtractor.apply(t), k -&gt; new HashSet&lt;&gt;()).add(t);\n    }\n\n    public void merge(DuplicateHandler&lt;T&gt; other) {\n        other.itemByKey.forEach((k, v) -&gt;\n            itemByKey.merge(k,v,(oldV, newV) -&gt; { oldV.addAll(newV); return oldV; }));\n    }\n    \n    public Collection&lt;Set&lt;T&gt;&gt; getDuplicates() {\n        Collection&lt;Set&lt;T&gt;&gt; duplicates = itemByKey.values();\n        duplicates.removeIf(set -&gt; set.size() == 1); // the object is proved to be unique by this particular property\n        \n        return duplicates;\n    }\n}\n</code></pre>\n<p>And that is the method, responsible for generating the map of duplicates, that would be used from the clean code. The given collection would be partitioned into two parts: one mapped to the <em>key</em> <code>true</code> - duplicates, another mapped to the <em>key</em> <code>false</code> - unique objects.</p>\n<pre><code>public static &lt;T&gt; Map&lt;Boolean, List&lt;T&gt;&gt; getPartitionByProperties(Collection&lt;T&gt; parties,\n                                                                 Function&lt;T, ?&gt;... keyExtractors) {\n    \n    DuplicateChecker&lt;T&gt; duplicateChecker = parties.stream()\n        .collect(Collector.of(\n            () -&gt; new DuplicateChecker&lt;&gt;(keyExtractors),\n            DuplicateChecker::accept,\n            DuplicateChecker::merge,\n            DuplicateChecker::finish\n        ));\n    \n    return parties.stream()\n        .collect(Collectors.partitioningBy(duplicateChecker::isDuplicate));\n}\n</code></pre>\n<p>And that how you can apply it for your particular case.</p>\n<p><code>main()</code></p>\n<pre><code>public static void main(String[] args) {\n    List&lt;Party&gt; parties = // initializing the list of parties\n    \n    Map&lt;Boolean, List&lt;Party&gt;&gt; isDuplicate = partitionByProperties(parties,\n            Party::getName, Party::getNumber,\n            Party::getEmail, Party::getGstNumber);\n}\n</code></pre>\n"}],"owner":{"account_id":25762469,"reputation":53,"user_id":19513159,"display_name":"Yash garg"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":392,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73226513,"answer_count":2,"score":2,"last_activity_date":1659599690,"creation_date":1659539608,"question_id":73223765,"body_markdown":"I am reading data from an excel file using apache poi and transforming it into a list of object. But now I want to extract any duplicates based on certain rules into another list of that object and also get the non-duplicate list.\r\n&lt;br&gt;Condition to check for a duplicate\r\n\r\n 1. name\r\n 2. email\r\n 3. phone number\r\n 4. gst number\r\n\r\nAny of these properties can result in a duplicate. which mean **or** not an **and**\r\n\r\n**Party Class**\r\n```\r\npublic class Party {\r\n\r\n    private String name;\r\n\r\n    private Long number;\r\n\r\n    private String email;\r\n\r\n    private String address;\r\n\r\n    private BigDecimal openingBalance;\r\n\r\n    private LocalDateTime openingDate;\r\n\r\n    private String gstNumber;\r\n   // Getter Setter Skipped\r\n}\r\n``` \r\n\r\nLet&#39;s say this is the list returned by the logic to excel data so far \r\n```\r\n    var firstParty = new Party();\r\n    firstParty.setName(&quot;Valid Party&quot;);\r\n    firstParty.setAddress(&quot;Valid&quot;);\r\n    firstParty.setEmail(&quot;Valid&quot;);\r\n    firstParty.setGstNumber(&quot;Valid&quot;);\r\n    firstParty.setNumber(1234567890L);\r\n    firstParty.setOpeningBalance(BigDecimal.ZERO);\r\n    firstParty.setOpeningDate(DateUtil.getDDMMDateFromString(&quot;01/01/2020&quot;));\r\n\r\n    var secondParty = new Party();\r\n    secondParty.setName(&quot;Valid Party&quot;);\r\n    secondParty.setAddress(&quot;Valid Address&quot;);\r\n    secondParty.setEmail(&quot;Valid Email&quot;);\r\n    secondParty.setGstNumber(&quot;Valid GST&quot;);\r\n    secondParty.setNumber(7593612247L);\r\n    secondParty.setOpeningBalance(BigDecimal.ZERO);\r\n    secondParty.setOpeningDate(DateUtil.getDDMMDateFromString(&quot;01/01/2020&quot;));\r\n\r\n    var thirdParty = new Party();\r\n    thirdParty.setName(&quot;Valid Party 1&quot;);\r\n    thirdParty.setAddress(&quot;address&quot;);\r\n    thirdParty.setEmail(&quot;email&quot;);\r\n    thirdParty.setGstNumber(&quot;gst&quot;);\r\n    thirdParty.setNumber(7593612888L);\r\n    thirdParty.setOpeningBalance(BigDecimal.ZERO);\r\n    secondParty.setOpeningDate(DateUtil.getDDMMDateFromString(&quot;01/01/2020&quot;));\r\n\r\n    var validParties = List.of(firstParty, secondParty, thirdParty);\r\n```\r\n\r\nWhat I have attempted so far :-\r\n```\r\n\r\nvar partyNameOccurrenceMap = validParties.parallelStream()\r\n        .map(Party::getName)\r\n        .collect(Collectors.groupingBy(Function.identity(), HashMap::new, Collectors.counting()));\r\n\r\nvar partyNameOccurrenceMapCopy = SerializationUtils.clone(partyNameOccurrenceMap);\r\n\r\nvar duplicateParties = validParties.stream()\r\n        .filter(party-&gt; {\r\n            var occurrence = partyNameOccurrenceMap.get(party.getName());\r\n            if (occurrence &gt; 1) {\r\n                partyNameOccurrenceMap.put(party.getName(), occurrence - 1);\r\n                return true;\r\n            }\r\n            return false;\r\n        })\r\n        .toList();\r\nvar nonDuplicateParties = validParties.stream()\r\n        .filter(party -&gt; {\r\n            var occurrence = partyNameOccurrenceMapCopy.get(party.getName());\r\n            if (occurrence &gt; 1) {\r\n                partyNameOccurrenceMapCopy.put(party.getName(), occurrence - 1);\r\n                return false;\r\n            }\r\n            return true;\r\n        })\r\n        .toList();\r\n```\r\nThe above code only checks for *party name* but we also need to check for *email*, *phone number* and *gst number*.\r\n\r\nThe code written above works just fine but the readability, conciseness and the performance might be an issue as the data set is large enough like 10k rows in excel file","title":"Extract a list containing duplicates from a list and also get the non-duplicate list java 8 stream","body":"<p>I am reading data from an excel file using apache poi and transforming it into a list of object. But now I want to extract any duplicates based on certain rules into another list of that object and also get the non-duplicate list.\n<br>Condition to check for a duplicate</p>\n<ol>\n<li>name</li>\n<li>email</li>\n<li>phone number</li>\n<li>gst number</li>\n</ol>\n<p>Any of these properties can result in a duplicate. which mean <strong>or</strong> not an <strong>and</strong></p>\n<p><strong>Party Class</strong></p>\n<pre><code>public class Party {\n\n    private String name;\n\n    private Long number;\n\n    private String email;\n\n    private String address;\n\n    private BigDecimal openingBalance;\n\n    private LocalDateTime openingDate;\n\n    private String gstNumber;\n   // Getter Setter Skipped\n}\n</code></pre>\n<p>Let's say this is the list returned by the logic to excel data so far</p>\n<pre><code>    var firstParty = new Party();\n    firstParty.setName(&quot;Valid Party&quot;);\n    firstParty.setAddress(&quot;Valid&quot;);\n    firstParty.setEmail(&quot;Valid&quot;);\n    firstParty.setGstNumber(&quot;Valid&quot;);\n    firstParty.setNumber(1234567890L);\n    firstParty.setOpeningBalance(BigDecimal.ZERO);\n    firstParty.setOpeningDate(DateUtil.getDDMMDateFromString(&quot;01/01/2020&quot;));\n\n    var secondParty = new Party();\n    secondParty.setName(&quot;Valid Party&quot;);\n    secondParty.setAddress(&quot;Valid Address&quot;);\n    secondParty.setEmail(&quot;Valid Email&quot;);\n    secondParty.setGstNumber(&quot;Valid GST&quot;);\n    secondParty.setNumber(7593612247L);\n    secondParty.setOpeningBalance(BigDecimal.ZERO);\n    secondParty.setOpeningDate(DateUtil.getDDMMDateFromString(&quot;01/01/2020&quot;));\n\n    var thirdParty = new Party();\n    thirdParty.setName(&quot;Valid Party 1&quot;);\n    thirdParty.setAddress(&quot;address&quot;);\n    thirdParty.setEmail(&quot;email&quot;);\n    thirdParty.setGstNumber(&quot;gst&quot;);\n    thirdParty.setNumber(7593612888L);\n    thirdParty.setOpeningBalance(BigDecimal.ZERO);\n    secondParty.setOpeningDate(DateUtil.getDDMMDateFromString(&quot;01/01/2020&quot;));\n\n    var validParties = List.of(firstParty, secondParty, thirdParty);\n</code></pre>\n<p>What I have attempted so far :-</p>\n<pre><code>\nvar partyNameOccurrenceMap = validParties.parallelStream()\n        .map(Party::getName)\n        .collect(Collectors.groupingBy(Function.identity(), HashMap::new, Collectors.counting()));\n\nvar partyNameOccurrenceMapCopy = SerializationUtils.clone(partyNameOccurrenceMap);\n\nvar duplicateParties = validParties.stream()\n        .filter(party-&gt; {\n            var occurrence = partyNameOccurrenceMap.get(party.getName());\n            if (occurrence &gt; 1) {\n                partyNameOccurrenceMap.put(party.getName(), occurrence - 1);\n                return true;\n            }\n            return false;\n        })\n        .toList();\nvar nonDuplicateParties = validParties.stream()\n        .filter(party -&gt; {\n            var occurrence = partyNameOccurrenceMapCopy.get(party.getName());\n            if (occurrence &gt; 1) {\n                partyNameOccurrenceMapCopy.put(party.getName(), occurrence - 1);\n                return false;\n            }\n            return true;\n        })\n        .toList();\n</code></pre>\n<p>The above code only checks for <em>party name</em> but we also need to check for <em>email</em>, <em>phone number</em> and <em>gst number</em>.</p>\n<p>The code written above works just fine but the readability, conciseness and the performance might be an issue as the data set is large enough like 10k rows in excel file</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8858,"page":1134,"page_size":100}
