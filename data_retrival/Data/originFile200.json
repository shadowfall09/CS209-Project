{"items":[{"tags":["java","azure-sql-database","azure-aks","azure-managed-identity"],"comments":[{"owner":{"account_id":5210616,"reputation":26054,"user_id":4167200,"accept_rate":91,"display_name":"Thomas"},"score":0,"creation_date":1693942964,"post_id":77047099,"comment_id":135825545,"body_markdown":"So you d like to have a single managed identity with multiple sql role or multiple managed identity with a single sql role ?","body":"So you d like to have a single managed identity with multiple sql role or multiple managed identity with a single sql role ?"},{"owner":{"account_id":9021500,"reputation":720,"user_id":6814764,"display_name":"Debugger"},"score":0,"creation_date":1693962469,"post_id":77047099,"comment_id":135827804,"body_markdown":"Hi, Multiple or single mange’s identity with multiple roles(reader,Admin)would be helpful","body":"Hi, Multiple or single mange’s identity with multiple roles(reader,Admin)would be helpful"},{"owner":{"account_id":5210616,"reputation":26054,"user_id":4167200,"accept_rate":91,"display_name":"Thomas"},"score":0,"creation_date":1693964440,"post_id":77047099,"comment_id":135828009,"body_markdown":"ok so what did not work following the documentation ?","body":"ok so what did not work following the documentation ?"},{"owner":{"account_id":9021500,"reputation":720,"user_id":6814764,"display_name":"Debugger"},"score":0,"creation_date":1693965401,"post_id":77047099,"comment_id":135828089,"body_markdown":"In Above doc they suggested to use any one role only for single managed identity, like it might be reader or writer or admin. Since we are not passing the username or user I’d we are not able choose the user role via application.","body":"In Above doc they suggested to use any one role only for single managed identity, like it might be reader or writer or admin. Since we are not passing the username or user I’d we are not able choose the user role via application."},{"owner":{"account_id":9021500,"reputation":720,"user_id":6814764,"display_name":"Debugger"},"score":0,"creation_date":1693965558,"post_id":77047099,"comment_id":135828093,"body_markdown":"For example - we need to use same database with different roles via password  less authentication for different app which we hosted in AKS.  Currently it’s taking managed identity user, we could able to set db permissions but we couldn’t able use multiple user roles like I mentioned above","body":"For example - we need to use same database with different roles via password  less authentication for different app which we hosted in AKS.  Currently it’s taking managed identity user, we could able to set db permissions but we couldn’t able use multiple user roles like I mentioned above"},{"owner":{"account_id":5210616,"reputation":26054,"user_id":4167200,"accept_rate":91,"display_name":"Thomas"},"score":0,"creation_date":1693965812,"post_id":77047099,"comment_id":135828111,"body_markdown":"sorry i dont really understand you mean. do you have script to share to explain what is not working ?","body":"sorry i dont really understand you mean. do you have script to share to explain what is not working ?"},{"owner":{"account_id":9021500,"reputation":720,"user_id":6814764,"display_name":"Debugger"},"score":0,"creation_date":1693977435,"post_id":77047099,"comment_id":135828972,"body_markdown":"Sorry for that, I will update the question with detail diagram shortly, mean time I will explain you, In above document link(question) they mentioned script for db user creation and permission, we need two separate users like below for same database\n\nalter role db_datareader add member [&lt;read-user&gt;];\nalter role db_datawriter add member [&lt;write-user&gt;];\n\nbut unfortunately we are not sure how to achieve that using aks managed identity","body":"Sorry for that, I will update the question with detail diagram shortly, mean time I will explain you, In above document link(question) they mentioned script for db user creation and permission, we need two separate users like below for same database  alter role db_datareader add member [&lt;read-user&gt;]; alter role db_datawriter add member [&lt;write-user&gt;];  but unfortunately we are not sure how to achieve that using aks managed identity"},{"owner":{"account_id":5210616,"reputation":26054,"user_id":4167200,"accept_rate":91,"display_name":"Thomas"},"score":0,"creation_date":1693978575,"post_id":77047099,"comment_id":135829081,"body_markdown":"did you create the two sql users: `create user [&lt;managed-identity-name1&gt;] from external provider;` ?","body":"did you create the two sql users: <code>create user [&lt;managed-identity-name1&gt;] from external provider;</code> ?"},{"owner":{"account_id":9021500,"reputation":720,"user_id":6814764,"display_name":"Debugger"},"score":0,"creation_date":1693980003,"post_id":77047099,"comment_id":135829245,"body_markdown":"Only one managed-idenity will be mapped to AKS cluster right ? So not sure how to create another managed identity and map it via app ?  Shall we create two managed identity for single cluster ? Any way to tell app like which user to choose explicitly ?","body":"Only one managed-idenity will be mapped to AKS cluster right ? So not sure how to create another managed identity and map it via app ?  Shall we create two managed identity for single cluster ? Any way to tell app like which user to choose explicitly ?"},{"owner":{"account_id":5210616,"reputation":26054,"user_id":4167200,"accept_rate":91,"display_name":"Thomas"},"score":0,"creation_date":1693982075,"post_id":77047099,"comment_id":135829516,"body_markdown":"each pod/app can use it&#39;s own identity so it s not a problem.","body":"each pod/app can use it&#39;s own identity so it s not a problem."},{"owner":{"account_id":5210616,"reputation":26054,"user_id":4167200,"accept_rate":91,"display_name":"Thomas"},"score":0,"creation_date":1693982119,"post_id":77047099,"comment_id":135829526,"body_markdown":"See the documentation here: https://learn.microsoft.com/en-us/azure/aks/workload-identity-overview?tabs=dotnet","body":"See the documentation here: <a href=\"https://learn.microsoft.com/en-us/azure/aks/workload-identity-overview?tabs=dotnet\" rel=\"nofollow noreferrer\">learn.microsoft.com/en-us/azure/aks/&hellip;</a>"}],"owner":{"account_id":9021500,"reputation":720,"user_id":6814764,"display_name":"Debugger"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1693985007,"creation_date":1693940245,"question_id":77047099,"body_markdown":"I&#39;m working on implementing Azure passwordless authentication for my Java app, which is hosted on AKS, and I&#39;m using Azure SQL Single Database. I was able to achieve this by following the steps outlined in this article:\r\n\r\nhttps://learn.microsoft.com/en-us/samples/azure-samples/azure-sql-db-who-am-i/azure-sql-db-passwordless-connections/\r\n\r\nHowever, I&#39;ve encountered an issue where I can&#39;t use multiple database accounts with different roles (such as reader role or admin role) for the same database using Managed Identity. I&#39;m wondering if there are any possibilities to map multiple managed identities for different roles in passwordless authentication?\r\n\r\nAny suggestions would be greatly appreciated.\r\n\r\nThank you!&quot;\r\n","title":"Azure SQL password less authentication with multiple user role","body":"<p>I'm working on implementing Azure passwordless authentication for my Java app, which is hosted on AKS, and I'm using Azure SQL Single Database. I was able to achieve this by following the steps outlined in this article:</p>\n<p><a href=\"https://learn.microsoft.com/en-us/samples/azure-samples/azure-sql-db-who-am-i/azure-sql-db-passwordless-connections/\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/samples/azure-samples/azure-sql-db-who-am-i/azure-sql-db-passwordless-connections/</a></p>\n<p>However, I've encountered an issue where I can't use multiple database accounts with different roles (such as reader role or admin role) for the same database using Managed Identity. I'm wondering if there are any possibilities to map multiple managed identities for different roles in passwordless authentication?</p>\n<p>Any suggestions would be greatly appreciated.</p>\n<p>Thank you!&quot;</p>\n"},{"tags":["java","wix","jpackage"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684752824,"post_id":76305166,"comment_id":134557897,"body_markdown":"If you&#39;re intending to create a 32-bit installer, I&#39;m guessing you&#39;re going to have to do that on a 32 machine with an appropriate JDK. Hope you can find one with jpackage","body":"If you&#39;re intending to create a 32-bit installer, I&#39;m guessing you&#39;re going to have to do that on a 32 machine with an appropriate JDK. Hope you can find one with jpackage"},{"owner":{"account_id":5143936,"reputation":3502,"user_id":4120431,"display_name":"N Dorigatti"},"score":1,"creation_date":1684753831,"post_id":76305166,"comment_id":134558081,"body_markdown":"yes, i created a 32bit jvm and using a 32bit openjdk version with jpackage. That&#39;s the starting point of the question","body":"yes, i created a 32bit jvm and using a 32bit openjdk version with jpackage. That&#39;s the starting point of the question"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684754362,"post_id":76305166,"comment_id":134558169,"body_markdown":"Confusion: you *created* a 32 bit vm, not a jvm ;) I&#39;m saying you might need 32-bit metal, not virtualization. Even if you *could* get it to work, it wouldn&#39;t be as trustworthy","body":"Confusion: you <i>created</i> a 32 bit vm, not a jvm ;) I&#39;m saying you might need 32-bit metal, not virtualization. Even if you <i>could</i> get it to work, it wouldn&#39;t be as trustworthy"},{"owner":{"account_id":5143936,"reputation":3502,"user_id":4120431,"display_name":"N Dorigatti"},"score":0,"creation_date":1684758975,"post_id":76305166,"comment_id":134559150,"body_markdown":"No confusion: I created a 32bit VM of windows 10, then I downloaded a version of the jdk 15 that is x86 https://www.azul.com/downloads/?version=java-15-mts&amp;os=windows&amp;architecture=x86-32-bit#zulu and went through jpackage. The issue here is with jpackage that creates a x64 installer (see the command -arch !)","body":"No confusion: I created a 32bit VM of windows 10, then I downloaded a version of the jdk 15 that is x86 <a href=\"https://www.azul.com/downloads/?version=java-15-mts&amp;os=windows&amp;architecture=x86-32-bit#zulu\" rel=\"nofollow noreferrer\">azul.com/downloads/&hellip;</a> and went through jpackage. The issue here is with jpackage that creates a x64 installer (see the command -arch !)"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684759617,"post_id":76305166,"comment_id":134559271,"body_markdown":"If your x86 jpackage cannot create a 32 bit installer, then you&#39;ll need to fall back on 3rd party tools","body":"If your x86 jpackage cannot create a 32 bit installer, then you&#39;ll need to fall back on 3rd party tools"},{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":0,"creation_date":1684765178,"post_id":76305166,"comment_id":134560552,"body_markdown":"There&#39;s code that should handle this in jpackage: https://github.com/openjdk/jdk/blob/master/src/jdk.jpackage/windows/classes/jdk/jpackage/internal/WixFragmentBuilder.java#L104 If you launch `jshell` from the x86 JDK, and enter `System.getProperty(&quot;os.arch&quot;)` what does it print?","body":"There&#39;s code that should handle this in jpackage: <a href=\"https://github.com/openjdk/jdk/blob/master/src/jdk.jpackage/windows/classes/jdk/jpackage/internal/WixFragmentBuilder.java#L104\" rel=\"nofollow noreferrer\">github.com/openjdk/jdk/blob/master/src/jdk.jpackage/windows/&zwnj;&#8203;&hellip;</a> If you launch <code>jshell</code> from the x86 JDK, and enter <code>System.getProperty(&quot;os.arch&quot;)</code> what does it print?"},{"owner":{"account_id":5143936,"reputation":3502,"user_id":4120431,"display_name":"N Dorigatti"},"score":0,"creation_date":1684768813,"post_id":76305166,"comment_id":134561451,"body_markdown":"Thanks, I&#39;ll try to launch it but i&#39;m quite sure it will give x86. On this, I see from the commits that the file has been added in 2021, so maybe it is not part of jdk15, so i&#39;ll have to find out since when it has been added!","body":"Thanks, I&#39;ll try to launch it but i&#39;m quite sure it will give x86. On this, I see from the commits that the file has been added in 2021, so maybe it is not part of jdk15, so i&#39;ll have to find out since when it has been added!"},{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":1,"creation_date":1684769791,"post_id":76305166,"comment_id":134561667,"body_markdown":"You&#39;re right, it was fixed in JDK 17: https://bugs.openjdk.org/browse/JDK-8258755 If you&#39;re an Azul customer, you might be able to ask them to backport the fix to JDK 15.","body":"You&#39;re right, it was fixed in JDK 17: <a href=\"https://bugs.openjdk.org/browse/JDK-8258755\" rel=\"nofollow noreferrer\">bugs.openjdk.org/browse/JDK-8258755</a> If you&#39;re an Azul customer, you might be able to ask them to backport the fix to JDK 15."},{"owner":{"account_id":5143936,"reputation":3502,"user_id":4120431,"display_name":"N Dorigatti"},"score":0,"creation_date":1684826845,"post_id":76305166,"comment_id":134569723,"body_markdown":"Ok, it should not be a problem as I can use JDK 17 to build the package but attach my custom created runtime with java15! Thank you very much for the link!","body":"Ok, it should not be a problem as I can use JDK 17 to build the package but attach my custom created runtime with java15! Thank you very much for the link!"},{"owner":{"account_id":5143936,"reputation":3502,"user_id":4120431,"display_name":"N Dorigatti"},"score":0,"creation_date":1684859776,"post_id":76305166,"comment_id":134577835,"body_markdown":"I tried with Zulu jdk17 32bit but was not successful, Zulu says 17.0.7 and looking at the commits it seems a newer version... I&#39;ll try to find another jdk or search for a jdk 19! I&#39;ll try temurin jdk 18 or 19. Let&#39;s see!","body":"I tried with Zulu jdk17 32bit but was not successful, Zulu says 17.0.7 and looking at the commits it seems a newer version... I&#39;ll try to find another jdk or search for a jdk 19! I&#39;ll try temurin jdk 18 or 19. Let&#39;s see!"},{"owner":{"account_id":5143936,"reputation":3502,"user_id":4120431,"display_name":"N Dorigatti"},"score":0,"creation_date":1684867809,"post_id":76305166,"comment_id":134579356,"body_markdown":"Nothing to do, now jdks 17,18 and 19 correctly call &quot;candle&quot; with arch -x86 but the installer hangs (a small window opens for some milliseconds then hides and I see the process in activity manager). I&#39;ll give up and go for Innosetup if noone have clues... \nToo bad, the 32bit installer works on my Windows11 64bit machine (saying it is 32bit), so I dont&#39; know what to do","body":"Nothing to do, now jdks 17,18 and 19 correctly call &quot;candle&quot; with arch -x86 but the installer hangs (a small window opens for some milliseconds then hides and I see the process in activity manager). I&#39;ll give up and go for Innosetup if noone have clues...  Too bad, the 32bit installer works on my Windows11 64bit machine (saying it is 32bit), so I dont&#39; know what to do"}],"answers":[{"tags":[],"owner":{"account_id":5143936,"reputation":3502,"user_id":4120431,"display_name":"N Dorigatti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693984830,"creation_date":1693984830,"answer_id":77049761,"question_id":76305166,"body_markdown":"I ended up using a different software for preparing the installer following the guide of the SweetHome3D ( https://sweethome3d.com/ ) creator:\r\n\r\nhttp://www.eteks.com/tips/tipCreationExe.html\r\n\r\nIt did not work using candle and wxs so there is no real solution, just the alternative for 32bit.","title":"jpackage (java15) can&#39;t create a Windows x86 Installer","body":"<p>I ended up using a different software for preparing the installer following the guide of the SweetHome3D ( <a href=\"https://sweethome3d.com/\" rel=\"nofollow noreferrer\">https://sweethome3d.com/</a> ) creator:</p>\n<p><a href=\"http://www.eteks.com/tips/tipCreationExe.html\" rel=\"nofollow noreferrer\">http://www.eteks.com/tips/tipCreationExe.html</a></p>\n<p>It did not work using candle and wxs so there is no real solution, just the alternative for 32bit.</p>\n"}],"owner":{"account_id":5143936,"reputation":3502,"user_id":4120431,"display_name":"N Dorigatti"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77049761,"answer_count":1,"score":1,"last_activity_date":1693984830,"creation_date":1684750694,"question_id":76305166,"body_markdown":"I tried a lot of different approaches but always failed.\r\n\r\nI successfully generated an x64 installer for my java jar (spring boot runnable), but I&#39;m unable to create the x86 version of the installer.\r\n\r\nAfter moving to a x86 virtual machine, I downloaded the zulu jdk 15 whom is able to run my software (manually), so I tried to run the jpackage tool, but it creates an installer for an x64 system.\r\n\r\nAs I could not find any additional parameter, i tried to verbose log the jpackage tool and found that &#39;candle&#39; is called with the wrong arch (I replaced paths and variables to shorten path!\r\n```\r\n [candle.exe, -nologo, TMPDIR\\config\\main.wxs,\r\n -ext, WixUtilExtension, -arch, x64, \r\n -out, TMPDIR\\wixobj\\main.wixobj,\r\n -dJpAppDescription=DESCRIPTION, -dJpProductCode=UUID, -dJpAppName=APPNAME, \r\n -dJpIsSystemWide=yes, -dJpAllowDowngrades=yes, -dJpIcon=TMPDIR\\images\\win-msi.image\\APPNAME\\APPNAME.exe, \r\n -dJpAppVersion=1.0.0, -dJpInstallDirChooser=yes, -dJpAllowUpgrades=yes, -dJpProductUpgradeCode=UUID2,\r\n -dJpAppVendor=VENDOR, -dJpConfigDir=TMPDIR\\config]\r\n```\r\n\r\nif I manually launch the command with -arch x86 it fails telling that Intelx64 files are missing (there is a preparation of wxs file before candle i suppose).\r\n\r\nDoes anyone fixed this issue?","title":"jpackage (java15) can&#39;t create a Windows x86 Installer","body":"<p>I tried a lot of different approaches but always failed.</p>\n<p>I successfully generated an x64 installer for my java jar (spring boot runnable), but I'm unable to create the x86 version of the installer.</p>\n<p>After moving to a x86 virtual machine, I downloaded the zulu jdk 15 whom is able to run my software (manually), so I tried to run the jpackage tool, but it creates an installer for an x64 system.</p>\n<p>As I could not find any additional parameter, i tried to verbose log the jpackage tool and found that 'candle' is called with the wrong arch (I replaced paths and variables to shorten path!</p>\n<pre><code> [candle.exe, -nologo, TMPDIR\\config\\main.wxs,\n -ext, WixUtilExtension, -arch, x64, \n -out, TMPDIR\\wixobj\\main.wixobj,\n -dJpAppDescription=DESCRIPTION, -dJpProductCode=UUID, -dJpAppName=APPNAME, \n -dJpIsSystemWide=yes, -dJpAllowDowngrades=yes, -dJpIcon=TMPDIR\\images\\win-msi.image\\APPNAME\\APPNAME.exe, \n -dJpAppVersion=1.0.0, -dJpInstallDirChooser=yes, -dJpAllowUpgrades=yes, -dJpProductUpgradeCode=UUID2,\n -dJpAppVendor=VENDOR, -dJpConfigDir=TMPDIR\\config]\n</code></pre>\n<p>if I manually launch the command with -arch x86 it fails telling that Intelx64 files are missing (there is a preparation of wxs file before candle i suppose).</p>\n<p>Does anyone fixed this issue?</p>\n"},{"tags":["java","hdf5"],"answers":[{"tags":[],"owner":{"account_id":5452365,"reputation":490,"user_id":4336776,"display_name":"Aaryn Tonita"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1421855525,"creation_date":1421855525,"answer_id":28071383,"question_id":28067732,"body_markdown":"I don&#39;t think that will work. It is not quite clear to me, but I believe the getInferredType() you are using is creating a data set with 2 name -&gt; value entries. So it is effectively creating an object inside the hdf5. The best solution I could come up with was to read the previous values add them to the valueList before outputting:\r\n\r\n        ArrayList&lt;String&gt; valueList = new ArrayList&lt;&gt;();\r\n\r\n        valueList.add(&quot;Value1&quot;);\r\n        valueList.add(&quot;Value2&quot;);\r\n\r\n        try (IHDF5Reader reader = HDF5Factory.configure(&quot;My_Log.h5&quot;).reader()) {\r\n            String[] previous = reader.string().readArray(&quot;log1&quot;);\r\n            for (int i = 0; i &lt; previous.length; i++) {\r\n                valueList.add(i, previous[i]);\r\n            }\r\n        } catch (HDF5FileNotFoundException ex) {\r\n            // Nothing to do here.\r\n        }\r\n\r\n        MDArray&lt;String&gt; values = new MDArray&lt;&gt;(String.class, new long[]{valueList.size()});\r\n        for (int i = 0; i &lt; valueList.size(); i++) {\r\n            values.set(valueList.get(i), i);\r\n        }\r\n\r\n        try (IHDF5Writer writer = HDF5Factory.configure(&quot;My_Log.h5&quot;).writer()) {\r\n            writer.string().writeMDArray(&quot;log1&quot;, values);\r\n        }\r\n\r\nIf you call this code a second time with &quot;Value3&quot; and &quot;Value4&quot; instead, you will get 4 values. This sort of solution might become unpleasant if you start to have hierarchies of datasets however.","title":"JHDF5 - How to avoid dataset being overwritten","body":"<p>I don't think that will work. It is not quite clear to me, but I believe the getInferredType() you are using is creating a data set with 2 name -> value entries. So it is effectively creating an object inside the hdf5. The best solution I could come up with was to read the previous values add them to the valueList before outputting:</p>\n\n<pre><code>    ArrayList&lt;String&gt; valueList = new ArrayList&lt;&gt;();\n\n    valueList.add(\"Value1\");\n    valueList.add(\"Value2\");\n\n    try (IHDF5Reader reader = HDF5Factory.configure(\"My_Log.h5\").reader()) {\n        String[] previous = reader.string().readArray(\"log1\");\n        for (int i = 0; i &lt; previous.length; i++) {\n            valueList.add(i, previous[i]);\n        }\n    } catch (HDF5FileNotFoundException ex) {\n        // Nothing to do here.\n    }\n\n    MDArray&lt;String&gt; values = new MDArray&lt;&gt;(String.class, new long[]{valueList.size()});\n    for (int i = 0; i &lt; valueList.size(); i++) {\n        values.set(valueList.get(i), i);\n    }\n\n    try (IHDF5Writer writer = HDF5Factory.configure(\"My_Log.h5\").writer()) {\n        writer.string().writeMDArray(\"log1\", values);\n    }\n</code></pre>\n\n<p>If you call this code a second time with \"Value3\" and \"Value4\" instead, you will get 4 values. This sort of solution might become unpleasant if you start to have hierarchies of datasets however.</p>\n"},{"tags":[],"owner":{"account_id":9685157,"reputation":884,"user_id":7185263,"display_name":"SOG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693984428,"creation_date":1625215615,"answer_id":68222236,"question_id":28067732,"body_markdown":"To solve your issue, you need to define the dataset `log1` as extendible so that it can store an unknown number of log entries (that are generated over time) and write these using a point or hyperslab selection (otherwise, the dataset will be overwritten).\r\n\r\nIf you are not bound to a specific technology to handle HDF5 files, you may wish to give a look at [HDFql][1] which is an high-level language to manage HDF5 files easily. A possible solution for your use-case using HDFql (in Java) is:\r\n\r\n    public class Example\r\n    {\r\n\r\n        public Class Log\r\n        {\r\n            String name1;\r\n            String name2;\r\n        }\r\n\r\n        public boolean doSomething(Log log)\r\n        {\r\n            log.name1 = &quot;Value1&quot;;\r\n            log.name2 = &quot;Value2&quot;;\r\n            return true;\r\n        }\r\n\r\n        public static void main(String args[])\r\n        {\r\n            // declare variables\r\n            Log log = new Log();\r\n            int variableNumber;\r\n\r\n            // create an HDF5 file named &#39;My_Log.h5&#39; and use (i.e. open) it\r\n            HDFql.execute(&quot;CREATE AND USE FILE My_Log.h5&quot;);\r\n\r\n            // create an extendible HDF5 dataset named &#39;log1&#39; of data type compound\r\n            HDFql.execute(&quot;CREATE DATASET log1 AS COMPOUND(name1 AS VARCHAR, name2 AS VARCHAR)(0 TO UNLIMITED)&quot;);\r\n\r\n            // register variable &#39;log&#39; for subsequent usage (by HDFql)\r\n\t\t    variableNumber = HDFql.variableRegister(log);\r\n\r\n            // call function &#39;doSomething&#39; that does something and populates variable &#39;log&#39; with an entry\r\n            while(doSomething(log))\r\n            {\r\n                // alter (i.e. extend) dataset &#39;log1&#39; to +1 (i.e. add a new row)\r\n\t\t\t    HDFql.execute(&quot;ALTER DIMENSION log1 TO +1&quot;);\r\n\r\n                // insert (i.e. write) data stored in variable &#39;log&#39; into dataset &#39;log1&#39; using a point selection\r\n\t\t\t    HDFql.execute(&quot;INSERT INTO log1[-1] VALUES FROM MEMORY &quot; + variableNumber);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n  [1]: https://www.hdfql.com","title":"JHDF5 - How to avoid dataset being overwritten","body":"<p>To solve your issue, you need to define the dataset <code>log1</code> as extendible so that it can store an unknown number of log entries (that are generated over time) and write these using a point or hyperslab selection (otherwise, the dataset will be overwritten).</p>\n<p>If you are not bound to a specific technology to handle HDF5 files, you may wish to give a look at <a href=\"https://www.hdfql.com\" rel=\"nofollow noreferrer\">HDFql</a> which is an high-level language to manage HDF5 files easily. A possible solution for your use-case using HDFql (in Java) is:</p>\n<pre><code>public class Example\n{\n\n    public Class Log\n    {\n        String name1;\n        String name2;\n    }\n\n    public boolean doSomething(Log log)\n    {\n        log.name1 = &quot;Value1&quot;;\n        log.name2 = &quot;Value2&quot;;\n        return true;\n    }\n\n    public static void main(String args[])\n    {\n        // declare variables\n        Log log = new Log();\n        int variableNumber;\n\n        // create an HDF5 file named 'My_Log.h5' and use (i.e. open) it\n        HDFql.execute(&quot;CREATE AND USE FILE My_Log.h5&quot;);\n\n        // create an extendible HDF5 dataset named 'log1' of data type compound\n        HDFql.execute(&quot;CREATE DATASET log1 AS COMPOUND(name1 AS VARCHAR, name2 AS VARCHAR)(0 TO UNLIMITED)&quot;);\n\n        // register variable 'log' for subsequent usage (by HDFql)\n        variableNumber = HDFql.variableRegister(log);\n\n        // call function 'doSomething' that does something and populates variable 'log' with an entry\n        while(doSomething(log))\n        {\n            // alter (i.e. extend) dataset 'log1' to +1 (i.e. add a new row)\n            HDFql.execute(&quot;ALTER DIMENSION log1 TO +1&quot;);\n\n            // insert (i.e. write) data stored in variable 'log' into dataset 'log1' using a point selection\n            HDFql.execute(&quot;INSERT INTO log1[-1] VALUES FROM MEMORY &quot; + variableNumber);\n        }\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":1186865,"reputation":742,"user_id":1160650,"accept_rate":80,"display_name":"HigiPha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":621,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1693984428,"creation_date":1421844758,"question_id":28067732,"body_markdown":"I am using JHDF5 to log a collection of values to a hdf5 file. I am currently using two ArrayLists to do this, one with the values and one with the names of the values. \r\n\r\n    ArrayList&lt;String&gt; valueList = new ArrayList&lt;String&gt;(); \r\n    ArrayList&lt;String&gt; nameList = new ArrayList&lt;String&gt;();\r\n    \r\n    valueList.add(&quot;Value1&quot;);\r\n    valueList.add(&quot;Value2&quot;);\r\n    nameList.add(&quot;Name1&quot;);\r\n    nameList.add(&quot;Name2&quot;);\r\n\r\n    IHDF5Writer writer = HDF5Factory.configure(&quot;My_Log&quot;).keepDataSetsIfTheyExist().writer();    \r\n    HDF5CompoundType&lt;List&lt;?&gt;&gt; type = writer.compound().getInferredType(&quot;&quot;, nameList, valueList);\t\t\r\n    \t\t\r\n    writer.compound().write(&quot;log1&quot;, type, valueList);\t\t\r\n    writer.close();\r\n\r\nThis will log the values in the correct way to the file My_Log and in the dataset &quot;log1&quot;. However, this example always overwrites the previous log of the values in the dataset &quot;log1&quot;. I want to be able to log to the same dataset everytime, adding the latest log to the next line/index of the dataset. For example, if I were to change the value of `&quot;Name2&quot;` to `&quot;Value3&quot;` and log the values, and then change `&quot;Name1&quot;` to `&quot;Value4&quot;` and `&quot;Name2&quot;` to `&quot;Value5&quot;` and log the values, the dataset should look like this: \r\n\r\n![enter image description here][1]\r\n\r\nI thought the `keepDataSetsIfTheyExist()` option to would prevent the dataset to be overwritten, but apparently it doesn&#39;t work that way.\r\n\r\nSomething similar to what I want can be achieved in some cases with `writer.compound().writeArrayBlock()`, and specify by what index the array block shall be written. However, this solution doesn&#39;t seem to be compatible with my current code, where I have to use lists for handling my data. \r\n\r\nIs there some option to achieve this that I have overlooked, or can&#39;t this be done with JHDF5?\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/qfXRD.png","title":"JHDF5 - How to avoid dataset being overwritten","body":"<p>I am using JHDF5 to log a collection of values to a hdf5 file. I am currently using two ArrayLists to do this, one with the values and one with the names of the values. </p>\n\n<pre><code>ArrayList&lt;String&gt; valueList = new ArrayList&lt;String&gt;(); \nArrayList&lt;String&gt; nameList = new ArrayList&lt;String&gt;();\n\nvalueList.add(\"Value1\");\nvalueList.add(\"Value2\");\nnameList.add(\"Name1\");\nnameList.add(\"Name2\");\n\nIHDF5Writer writer = HDF5Factory.configure(\"My_Log\").keepDataSetsIfTheyExist().writer();    \nHDF5CompoundType&lt;List&lt;?&gt;&gt; type = writer.compound().getInferredType(\"\", nameList, valueList);        \n\nwriter.compound().write(\"log1\", type, valueList);       \nwriter.close();\n</code></pre>\n\n<p>This will log the values in the correct way to the file My_Log and in the dataset \"log1\". However, this example always overwrites the previous log of the values in the dataset \"log1\". I want to be able to log to the same dataset everytime, adding the latest log to the next line/index of the dataset. For example, if I were to change the value of <code>\"Name2\"</code> to <code>\"Value3\"</code> and log the values, and then change <code>\"Name1\"</code> to <code>\"Value4\"</code> and <code>\"Name2\"</code> to <code>\"Value5\"</code> and log the values, the dataset should look like this: </p>\n\n<p><img src=\"https://i.stack.imgur.com/qfXRD.png\" alt=\"enter image description here\"></p>\n\n<p>I thought the <code>keepDataSetsIfTheyExist()</code> option to would prevent the dataset to be overwritten, but apparently it doesn't work that way.</p>\n\n<p>Something similar to what I want can be achieved in some cases with <code>writer.compound().writeArrayBlock()</code>, and specify by what index the array block shall be written. However, this solution doesn't seem to be compatible with my current code, where I have to use lists for handling my data. </p>\n\n<p>Is there some option to achieve this that I have overlooked, or can't this be done with JHDF5?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":22506547,"reputation":965,"user_id":16702058,"display_name":"Hi computer"},"score":0,"creation_date":1693985094,"post_id":77049648,"comment_id":135829999,"body_markdown":"Can you control that writing process?","body":"Can you control that writing process?"},{"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"score":0,"creation_date":1693985216,"post_id":77049648,"comment_id":135830020,"body_markdown":"In general I suggest to make a list of files (including subfolders) ordered alphabetically: `/a/b/a.txt, /a/b/b.txt /a/c/c.txt` Compare the lists and find the diffs. Do you have any specific issue with an algorithm written in any particular programming language?","body":"In general I suggest to make a list of files (including subfolders) ordered alphabetically: <code>&#47;a&#47;b&#47;a.txt, &#47;a&#47;b&#47;b.txt &#47;a&#47;c&#47;c.txt</code> Compare the lists and find the diffs. Do you have any specific issue with an algorithm written in any particular programming language?"},{"owner":{"account_id":1305044,"reputation":8301,"user_id":1254208,"display_name":"GregHNZ"},"score":0,"creation_date":1693986895,"post_id":77049648,"comment_id":135830321,"body_markdown":"Is this a one-off process, or something you need to automate?  If it&#39;s a one-off I&#39;d use WinMerge which will tell you the dfference between the folders.   If you want to script it, check out `rdiff` - https://serverfault.com/questions/39534/best-way-to-compare-diff-a-full-directory-structure   If you need to do it regularly, could you use a version control system (like `git`) and get it to do it for you?","body":"Is this a one-off process, or something you need to automate?  If it&#39;s a one-off I&#39;d use WinMerge which will tell you the dfference between the folders.   If you want to script it, check out <code>rdiff</code> - <a href=\"https://serverfault.com/questions/39534/best-way-to-compare-diff-a-full-directory-structure\" title=\"best way to compare diff a full directory structure\">serverfault.com/questions/39534/&hellip;</a>   If you need to do it regularly, could you use a version control system (like <code>git</code>) and get it to do it for you?"},{"owner":{"account_id":28480293,"reputation":95,"user_id":21794356,"display_name":"Emiya Elien"},"score":0,"creation_date":1693986898,"post_id":77049648,"comment_id":135830322,"body_markdown":"the write process can&#39;t be controlled(at leaset i don&#39;t know how to control it), acutally I want to make this diff func working as fast as possible","body":"the write process can&#39;t be controlled(at leaset i don&#39;t know how to control it), acutally I want to make this diff func working as fast as possible"},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":0,"creation_date":1693991527,"post_id":77049648,"comment_id":135831268,"body_markdown":"Perhaps utilizing Java&#39;s [Watch Service API](https://docs.oracle.com/javase/tutorial/essential/io/notification.html#name) may be of some use. This could at least potentially let you know when changes are made which can then be acted upon.","body":"Perhaps utilizing Java&#39;s <a href=\"https://docs.oracle.com/javase/tutorial/essential/io/notification.html#name\" rel=\"nofollow noreferrer\">Watch Service API</a> may be of some use. This could at least potentially let you know when changes are made which can then be acted upon."}],"owner":{"account_id":28480293,"reputation":95,"user_id":21794356,"display_name":"Emiya Elien"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693984294,"creation_date":1693983717,"question_id":77049648,"body_markdown":"Assume that we have a one-root file structure\r\n\r\n```\r\nrepository\r\n    |\r\n    |---com\r\n    |    |\r\n    |    |---google\r\n    |    |     |\r\n    |    |     |---cloud\r\n    |    |     |     |\r\n    |    |    ...   ...\r\n    |    |---github\r\n    |    |     |\r\n    |    |    ...\r\n    |   ...\r\n    |---org\r\n    |    |\r\n    |    |---spring\r\n    |    |     |\r\n    |    |     |---boot\r\n    |    |     |    |\r\n    |    |     |   ...\r\n    |    |     |---cloud\r\n    |    |     |    |\r\n    |    |     |   ...\r\n    |    |    ...\r\n    |   ...\r\n   ...\r\n```\r\n\r\nJust call it `folder A` to represent the root [repository] and [its structure]\r\n\r\nNow make a copy for folder A, and rename `folder B`. \r\n\r\nFolder B has the same structure as folder A, that means they all have folder com,org; \r\n\r\nin sub-folder com, they all have folder google,github; ... ; \r\n\r\nand in the bottom folder, they have the same file\r\n\r\nNow things have some changed, a process puts some new folder and file at folder A, such as\r\n\r\n`com/google/cloud/google-cloud-bom/0.146.0/google-cloud-bom-0.146.0.pom` \r\n\r\nwhich different from the existing structure \r\n\r\n`com/google/cloud.google-cloud-bom/0.141.0/google-cloud-bom-0.141.0.pom`\r\n\r\nand also new structure in root\r\n\r\n`io/minio/minio/8.5.1/minio-8.5.1.jar`\r\n\r\nI don&#39;t know how many files, folders, sub-folders have been added in folder A, but I would like to threw the duplicate file and empty folder to catch them. In above case, the target folder C would be like\r\n\r\n```\r\nrepository\r\n    |\r\n    |---com\r\n    |    |\r\n    |    |---google\r\n    |          |\r\n    |          |---cloud\r\n    |                |\r\n    |                |---google-cloud-bom\r\n    |                            |\r\n    |                            |---0.146.0\r\n    |                                   |\r\n    |                                   |---google-cloud-bom-0.146.0.pom\r\n    |---io\r\n        |\r\n        |---minio\r\n              |\r\n              |---minio\r\n                    |\r\n                    |---8.5.1\r\n                          |\r\n                          |---minio-8.5.1.jar\r\n```\r\n\r\nHow to operate the file system through powershell/java/python/others to achieve this function?","title":"How to do file system difference through program or script?","body":"<p>Assume that we have a one-root file structure</p>\n<pre><code>repository\n    |\n    |---com\n    |    |\n    |    |---google\n    |    |     |\n    |    |     |---cloud\n    |    |     |     |\n    |    |    ...   ...\n    |    |---github\n    |    |     |\n    |    |    ...\n    |   ...\n    |---org\n    |    |\n    |    |---spring\n    |    |     |\n    |    |     |---boot\n    |    |     |    |\n    |    |     |   ...\n    |    |     |---cloud\n    |    |     |    |\n    |    |     |   ...\n    |    |    ...\n    |   ...\n   ...\n</code></pre>\n<p>Just call it <code>folder A</code> to represent the root [repository] and [its structure]</p>\n<p>Now make a copy for folder A, and rename <code>folder B</code>.</p>\n<p>Folder B has the same structure as folder A, that means they all have folder com,org;</p>\n<p>in sub-folder com, they all have folder google,github; ... ;</p>\n<p>and in the bottom folder, they have the same file</p>\n<p>Now things have some changed, a process puts some new folder and file at folder A, such as</p>\n<p><code>com/google/cloud/google-cloud-bom/0.146.0/google-cloud-bom-0.146.0.pom</code></p>\n<p>which different from the existing structure</p>\n<p><code>com/google/cloud.google-cloud-bom/0.141.0/google-cloud-bom-0.141.0.pom</code></p>\n<p>and also new structure in root</p>\n<p><code>io/minio/minio/8.5.1/minio-8.5.1.jar</code></p>\n<p>I don't know how many files, folders, sub-folders have been added in folder A, but I would like to threw the duplicate file and empty folder to catch them. In above case, the target folder C would be like</p>\n<pre><code>repository\n    |\n    |---com\n    |    |\n    |    |---google\n    |          |\n    |          |---cloud\n    |                |\n    |                |---google-cloud-bom\n    |                            |\n    |                            |---0.146.0\n    |                                   |\n    |                                   |---google-cloud-bom-0.146.0.pom\n    |---io\n        |\n        |---minio\n              |\n              |---minio\n                    |\n                    |---8.5.1\n                          |\n                          |---minio-8.5.1.jar\n</code></pre>\n<p>How to operate the file system through powershell/java/python/others to achieve this function?</p>\n"},{"tags":["java","gradle","junit","ant","junit5"],"answers":[{"tags":[],"owner":{"account_id":11726648,"reputation":19523,"user_id":8583692,"display_name":"Mahozad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693983995,"creation_date":1693983626,"answer_id":77049637,"question_id":57223851,"body_markdown":"Here is a solution using Ant Task JUnitReport grabbed from [this SO answer](https://stackoverflow.com/a/39180709/8583692):\r\n\r\n```groovy\r\nconfigurations {\r\n    antJUnit\r\n}\r\n\r\ndependencies {\r\n    antJUnit &#39;org.apache.ant:ant-junit:1.9.7&#39;\r\n}\r\n\r\ntask mergeJUnitReports {\r\n    ext {\r\n        resultsDir = file(&quot;$buildDir/allreports&quot;)\r\n        targetDir = file(&quot;$buildDir/test-results/merged&quot;)\r\n    }\r\n\r\n    doLast {\r\n        ant.taskdef(\r\n            name: &#39;junitreport&#39;,\r\n            classname: &#39;org.apache.tools.ant.taskdefs.optional.junit.XMLResultAggregator&#39;,\r\n            classpath: configurations.antJUnit.asPath\r\n        )\r\n\r\n        ant.junitreport(todir: resultsDir) {\r\n            fileset(dir: resultsDir, includes: &#39;TEST-*.xml&#39;)\r\n            report(todir: targetDir, format: &#39;frames&#39;)\r\n        }\r\n    }\r\n}\r\n```\r\n","title":"Is there a way to make Gradle test results go to one xml file?","body":"<p>Here is a solution using Ant Task JUnitReport grabbed from <a href=\"https://stackoverflow.com/a/39180709/8583692\">this SO answer</a>:</p>\n<pre><code>configurations {\n    antJUnit\n}\n\ndependencies {\n    antJUnit 'org.apache.ant:ant-junit:1.9.7'\n}\n\ntask mergeJUnitReports {\n    ext {\n        resultsDir = file(&quot;$buildDir/allreports&quot;)\n        targetDir = file(&quot;$buildDir/test-results/merged&quot;)\n    }\n\n    doLast {\n        ant.taskdef(\n            name: 'junitreport',\n            classname: 'org.apache.tools.ant.taskdefs.optional.junit.XMLResultAggregator',\n            classpath: configurations.antJUnit.asPath\n        )\n\n        ant.junitreport(todir: resultsDir) {\n            fileset(dir: resultsDir, includes: 'TEST-*.xml')\n            report(todir: targetDir, format: 'frames')\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":16394598,"reputation":138,"user_id":11842525,"display_name":"Luke Shay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1693983995,"creation_date":1564158277,"question_id":57223851,"body_markdown":"Gradle XML test results are currently being output into separate files based on the class name. Is there a way to make the XML test results all go to one file for all the classes? The Gradle version I am using is 5.5.1.\r\n\r\nI have combed through the Gradle website and have not found anything related to this.\r\n","title":"Is there a way to make Gradle test results go to one xml file?","body":"<p>Gradle XML test results are currently being output into separate files based on the class name. Is there a way to make the XML test results all go to one file for all the classes? The Gradle version I am using is 5.5.1.</p>\n<p>I have combed through the Gradle website and have not found anything related to this.</p>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":17679173,"reputation":1273,"user_id":12833551,"display_name":"Pratik Fagadiya"},"score":0,"creation_date":1693299876,"post_id":76998760,"comment_id":135739066,"body_markdown":"Is it in custom view from kotlin/java class or Jetpack compose ? Please specify it","body":"Is it in custom view from kotlin/java class or Jetpack compose ? Please specify it"},{"owner":{"account_id":15502362,"reputation":65,"user_id":11291132,"display_name":"Rakesh"},"score":0,"creation_date":1693301174,"post_id":76998760,"comment_id":135739298,"body_markdown":"@PratikFagadiya Java/Kotlin class","body":"@PratikFagadiya Java/Kotlin class"},{"owner":{"account_id":22432165,"reputation":1234,"user_id":16637863,"display_name":"Pawan Harariya"},"score":0,"creation_date":1693308455,"post_id":76998760,"comment_id":135740618,"body_markdown":"@Rakesh A quick hack can be to use another ImageView on top of your main imageView and add the svg to upper imageView, and match your svg color to background color of screen, the svg will hide the image view at relevant places, making it appear rounded.","body":"@Rakesh A quick hack can be to use another ImageView on top of your main imageView and add the svg to upper imageView, and match your svg color to background color of screen, the svg will hide the image view at relevant places, making it appear rounded."}],"answers":[{"tags":[],"owner":{"account_id":2278328,"reputation":2637,"user_id":2004073,"accept_rate":80,"display_name":"Mike"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693378480,"creation_date":1693378480,"answer_id":77005578,"question_id":76998760,"body_markdown":"For that you need to create a custom ImageView with overriden onDraw method. \r\nIn this method you should create a path using bezier curve and then draw image inside. \r\nMore information about custom drawing is on https://www.kodeco.com/9556022-drawing-custom-shapes-in-android?page=2#toc-anchor-011\r\nand https://medium.com/@pranjalg2308/understanding-bezier-curve-in-android-and-moddinggraphview-library-a9b1f0f95cd0","title":"Custom rectangle Imageview with curve from top and bottom","body":"<p>For that you need to create a custom ImageView with overriden onDraw method.\nIn this method you should create a path using bezier curve and then draw image inside.\nMore information about custom drawing is on <a href=\"https://www.kodeco.com/9556022-drawing-custom-shapes-in-android?page=2#toc-anchor-011\" rel=\"nofollow noreferrer\">https://www.kodeco.com/9556022-drawing-custom-shapes-in-android?page=2#toc-anchor-011</a>\nand <a href=\"https://medium.com/@pranjalg2308/understanding-bezier-curve-in-android-and-moddinggraphview-library-a9b1f0f95cd0\" rel=\"nofollow noreferrer\">https://medium.com/@pranjalg2308/understanding-bezier-curve-in-android-and-moddinggraphview-library-a9b1f0f95cd0</a></p>\n"},{"tags":[],"owner":{"account_id":4868030,"reputation":1930,"user_id":3925552,"accept_rate":40,"display_name":"HassanUsman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693382650,"creation_date":1693382650,"answer_id":77006031,"question_id":76998760,"body_markdown":"First you need to create a **Curved Shape Drawable:**\r\n\r\n    class CurvedShapeDrawable : Drawable() {\r\n    private val paint = Paint(Paint.ANTI_ALIAS_FLAG).apply {\r\n        color = Color.BLUE // Set your desired color here\r\n    }\r\n\r\n    override fun draw(canvas: Canvas) {\r\n        val width = bounds.width().toFloat()\r\n        val height = bounds.height().toFloat()\r\n        \r\n        val path = Path().apply {\r\n            moveTo(0f, height)\r\n            lineTo(0f, height * 0.8f)\r\n            quadTo(width * 0.5f, height * 0.6f, width, height * 0.8f)\r\n            lineTo(width, height)\r\n            close()\r\n        }\r\n\r\n        canvas.drawPath(path, paint)\r\n    }\r\n\r\n    // Override other methods like `setAlpha`, `setColorFilter`, and `getOpacity`\r\n    }\r\n\r\nAfter creating the custom `Drawable`, apply it to your `ImageView` using the background property.\r\n\r\n    val curvedShapeDrawable = CurvedShapeDrawable()\r\n    imageView.background = curvedShapeDrawable\r\n\r\nTo load `images` from an API and display them in your `ViewPager`, you&#39;ll need an image loading library like `Glide` or `Picasso`. \r\n\r\n    // Add Glide dependency to your build.gradle\r\n    implementation &#39;com.github.bumptech.glide:glide:4.12.0&#39;\r\n    kapt &#39;com.github.bumptech.glide:compiler:4.12.0&#39;\r\n    \r\n    // Load images using Glide\r\n    Glide.with(context)\r\n        .load(imageUrl) // Replace with your image URL from the API\r\n        .into(imageView)\r\n\r\nTry this, hope so it&#39;ll solved your problem.\r\n\r\n","title":"Custom rectangle Imageview with curve from top and bottom","body":"<p>First you need to create a <strong>Curved Shape Drawable:</strong></p>\n<pre><code>class CurvedShapeDrawable : Drawable() {\nprivate val paint = Paint(Paint.ANTI_ALIAS_FLAG).apply {\n    color = Color.BLUE // Set your desired color here\n}\n\noverride fun draw(canvas: Canvas) {\n    val width = bounds.width().toFloat()\n    val height = bounds.height().toFloat()\n    \n    val path = Path().apply {\n        moveTo(0f, height)\n        lineTo(0f, height * 0.8f)\n        quadTo(width * 0.5f, height * 0.6f, width, height * 0.8f)\n        lineTo(width, height)\n        close()\n    }\n\n    canvas.drawPath(path, paint)\n}\n\n// Override other methods like `setAlpha`, `setColorFilter`, and `getOpacity`\n}\n</code></pre>\n<p>After creating the custom <code>Drawable</code>, apply it to your <code>ImageView</code> using the background property.</p>\n<pre><code>val curvedShapeDrawable = CurvedShapeDrawable()\nimageView.background = curvedShapeDrawable\n</code></pre>\n<p>To load <code>images</code> from an API and display them in your <code>ViewPager</code>, you'll need an image loading library like <code>Glide</code> or <code>Picasso</code>.</p>\n<pre><code>// Add Glide dependency to your build.gradle\nimplementation 'com.github.bumptech.glide:glide:4.12.0'\nkapt 'com.github.bumptech.glide:compiler:4.12.0'\n\n// Load images using Glide\nGlide.with(context)\n    .load(imageUrl) // Replace with your image URL from the API\n    .into(imageView)\n</code></pre>\n<p>Try this, hope so it'll solved your problem.</p>\n"},{"tags":[],"owner":{"account_id":19715420,"reputation":8505,"user_id":14434976,"display_name":"MariosP"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693983965,"creation_date":1693983965,"answer_id":77049681,"question_id":76998760,"body_markdown":"You can achieve this kind of shape in `ImageView` by extending the `com.google.android.material.imageview.ShapeableImageView` and change the default `ShapeAppearanceModel`. Using the `ShapeAppearanceModel` you can apply a custom `EdgeTreatment` to draw a curve in the top edge and bottom edge. Also it has helper methods to draw the corners to `CornerFamily.ROUNDED` or `CornerFamily.CUT`. Example is like the below:\r\n\r\n1.Create a subclass of **ShapeableImageView**:\r\n\r\n    public class CustomImageView extends ShapeableImageView {\r\n    \r\n        public CustomImageView(Context context) {\r\n            super(context);\r\n            init();\r\n        }\r\n    \r\n        public CustomImageView(Context context, @Nullable AttributeSet attrs) {\r\n            super(context, attrs);\r\n            init();\r\n        }\r\n    \r\n        public CustomImageView(Context context, @Nullable AttributeSet attrs, int defStyle) {\r\n            super(context, attrs, defStyle);\r\n            init();\r\n        }\r\n    \r\n        private void init(){\r\n    \r\n            //set the curveOffset and cornerRadius in pixels\r\n            int curveOffset = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 10, getResources().getDisplayMetrics());\r\n            int cornerRadius = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 20, getResources().getDisplayMetrics());\r\n    \r\n            //set the new ShapeAppearanceModel\r\n            ShapeAppearanceModel shapeAppearanceModel = getShapeAppearanceModel()\r\n                    .toBuilder()\r\n                    .setAllCorners(CornerFamily.ROUNDED, cornerRadius)\r\n                    .setTopEdge(new EdgeTreatment(){\r\n                        @Override\r\n                        public void getEdgePath(float length, float center, float interpolation, @NonNull ShapePath shapePath) {\r\n                            shapePath.quadToPoint(length/2, curveOffset, length, 0f);\r\n                        }\r\n                    })\r\n                    .setBottomEdge(new EdgeTreatment(){\r\n                        @Override\r\n                        public void getEdgePath(float length, float center, float interpolation, @NonNull ShapePath shapePath) {\r\n                            shapePath.quadToPoint(length/2, curveOffset, length, 0f);\r\n                        }\r\n                    })\r\n                    .build();\r\n            setShapeAppearanceModel(shapeAppearanceModel);\r\n        }\r\n    }\r\n\r\n2.Use it in your xml like below:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;&gt;\r\n    \r\n        &lt;my.package.name.CustomImageView\r\n            android:id=&quot;@+id/shapeImageView&quot;\r\n            android:layout_width=&quot;250dp&quot;\r\n            android:layout_height=&quot;150dp&quot;\r\n            android:background=&quot;@android:color/darker_gray&quot;\r\n            android:layout_marginTop=&quot;10dp&quot;\r\n            app:srcCompat=&quot;@android:drawable/sym_action_chat&quot;/&gt;\r\n    \r\n    &lt;/RelativeLayout&gt;\r\n\r\n**Result:**\r\n\r\n[![shape_image_view][1]][1]\r\n\r\n**Sample usage in a `RecyclerView` using **Glide** image loading library:**\r\n\r\n1.Declare the `CustomImageView` in your list item xml in the same way as above:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:background=&quot;@android:color/white&quot;\r\n        android:paddingTop=&quot;20dp&quot;&gt;\r\n    \r\n        &lt;my.package.name.CustomImageView\r\n            android:id=&quot;@+id/imageView&quot;\r\n            android:layout_width=&quot;250dp&quot;\r\n            android:layout_height=&quot;150dp&quot;\r\n            android:layout_centerHorizontal=&quot;true&quot; /&gt;\r\n    \r\n    &lt;/RelativeLayout&gt;\r\n\r\n2.Load the images into the **CustomImageView** using **Glide** in on `onBindViewHolder` like the below:\r\n\r\n    int width = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 250, context.getResources().getDisplayMetrics());\r\n    int height = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 150, context.getResources().getDisplayMetrics());\r\n    Glide.with(context)\r\n            .load(model.getUrl())\r\n            .override(width, height)\r\n            .centerCrop()\r\n            .into(holder.imageView);\r\n\r\n**Result in a RecyclerView:**\r\n\r\n[![recyclerview_sample][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nPGTV.png\r\n  [2]: https://i.stack.imgur.com/i2AYa.jpg","title":"Custom rectangle Imageview with curve from top and bottom","body":"<p>You can achieve this kind of shape in <code>ImageView</code> by extending the <code>com.google.android.material.imageview.ShapeableImageView</code> and change the default <code>ShapeAppearanceModel</code>. Using the <code>ShapeAppearanceModel</code> you can apply a custom <code>EdgeTreatment</code> to draw a curve in the top edge and bottom edge. Also it has helper methods to draw the corners to <code>CornerFamily.ROUNDED</code> or <code>CornerFamily.CUT</code>. Example is like the below:</p>\n<p>1.Create a subclass of <strong>ShapeableImageView</strong>:</p>\n<pre><code>public class CustomImageView extends ShapeableImageView {\n\n    public CustomImageView(Context context) {\n        super(context);\n        init();\n    }\n\n    public CustomImageView(Context context, @Nullable AttributeSet attrs) {\n        super(context, attrs);\n        init();\n    }\n\n    public CustomImageView(Context context, @Nullable AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n        init();\n    }\n\n    private void init(){\n\n        //set the curveOffset and cornerRadius in pixels\n        int curveOffset = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 10, getResources().getDisplayMetrics());\n        int cornerRadius = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 20, getResources().getDisplayMetrics());\n\n        //set the new ShapeAppearanceModel\n        ShapeAppearanceModel shapeAppearanceModel = getShapeAppearanceModel()\n                .toBuilder()\n                .setAllCorners(CornerFamily.ROUNDED, cornerRadius)\n                .setTopEdge(new EdgeTreatment(){\n                    @Override\n                    public void getEdgePath(float length, float center, float interpolation, @NonNull ShapePath shapePath) {\n                        shapePath.quadToPoint(length/2, curveOffset, length, 0f);\n                    }\n                })\n                .setBottomEdge(new EdgeTreatment(){\n                    @Override\n                    public void getEdgePath(float length, float center, float interpolation, @NonNull ShapePath shapePath) {\n                        shapePath.quadToPoint(length/2, curveOffset, length, 0f);\n                    }\n                })\n                .build();\n        setShapeAppearanceModel(shapeAppearanceModel);\n    }\n}\n</code></pre>\n<p>2.Use it in your xml like below:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;&gt;\n\n    &lt;my.package.name.CustomImageView\n        android:id=&quot;@+id/shapeImageView&quot;\n        android:layout_width=&quot;250dp&quot;\n        android:layout_height=&quot;150dp&quot;\n        android:background=&quot;@android:color/darker_gray&quot;\n        android:layout_marginTop=&quot;10dp&quot;\n        app:srcCompat=&quot;@android:drawable/sym_action_chat&quot;/&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p><strong>Result:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/nPGTV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nPGTV.png\" alt=\"shape_image_view\" /></a></p>\n<p><strong>Sample usage in a <code>RecyclerView</code> using <strong>Glide</strong> image loading library:</strong></p>\n<p>1.Declare the <code>CustomImageView</code> in your list item xml in the same way as above:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:background=&quot;@android:color/white&quot;\n    android:paddingTop=&quot;20dp&quot;&gt;\n\n    &lt;my.package.name.CustomImageView\n        android:id=&quot;@+id/imageView&quot;\n        android:layout_width=&quot;250dp&quot;\n        android:layout_height=&quot;150dp&quot;\n        android:layout_centerHorizontal=&quot;true&quot; /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>2.Load the images into the <strong>CustomImageView</strong> using <strong>Glide</strong> in on <code>onBindViewHolder</code> like the below:</p>\n<pre><code>int width = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 250, context.getResources().getDisplayMetrics());\nint height = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 150, context.getResources().getDisplayMetrics());\nGlide.with(context)\n        .load(model.getUrl())\n        .override(width, height)\n        .centerCrop()\n        .into(holder.imageView);\n</code></pre>\n<p><strong>Result in a RecyclerView:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/i2AYa.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i2AYa.jpg\" alt=\"recyclerview_sample\" /></a></p>\n"}],"owner":{"account_id":15502362,"reputation":65,"user_id":11291132,"display_name":"Rakesh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77049681,"answer_count":3,"score":1,"last_activity_date":1693983965,"creation_date":1693299548,"question_id":76998760,"body_markdown":"[![Expected Imageview UI](https://i.stack.imgur.com/ecbFh.jpg)](https://i.stack.imgur.com/ecbFh.jpg)\r\n\r\nHello, I am creating a image slider with viewpager and want to create a custom Imageview with curve from top and bottom for the item list in Java/Kotlin and set images from api I am able to create custom rectangle image but I am not aware of how to create curve from top and bottom.\r\n\r\nTried\r\n1. Svg set to ImageView but shape changes once image is set dynamically.\r\n2. Custom Image class by extending Imageview","title":"Custom rectangle Imageview with curve from top and bottom","body":"<p><a href=\"https://i.stack.imgur.com/ecbFh.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ecbFh.jpg\" alt=\"Expected Imageview UI\" /></a></p>\n<p>Hello, I am creating a image slider with viewpager and want to create a custom Imageview with curve from top and bottom for the item list in Java/Kotlin and set images from api I am able to create custom rectangle image but I am not aware of how to create curve from top and bottom.</p>\n<p>Tried</p>\n<ol>\n<li>Svg set to ImageView but shape changes once image is set dynamically.</li>\n<li>Custom Image class by extending Imageview</li>\n</ol>\n"},{"tags":["java","key"],"answers":[{"tags":[],"owner":{"account_id":5143936,"reputation":3502,"user_id":4120431,"display_name":"N Dorigatti"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693983844,"creation_date":1693917054,"answer_id":77046194,"question_id":77046193,"body_markdown":"After some hours of digging into it, I found the solution.\r\nThe key retrieval was ok (I improved a bit, see below the code), but the real issue was that I had to use the public affineX (not from private key) and that value must be converted to an unsignedByteArray. That gave me the correct sha256 and the key was obtained correctly without any header needed.\r\n\r\nProvide the *privateKey* param as the full Private key String (as in PEM file):\r\n``` lang-kt\r\nfun load_pkcs_ec_key_pairs(privateKey: String): Pair&lt;ECPublicKey, ECPrivateKey&gt; {\r\n        StringReader(privateKey).use { keyReader -&gt;\r\n            val pemParser = PEMParser(keyReader)\r\n            val converter = JcaPEMKeyConverter()\r\n            val pemPair = pemParser.readObject() as PEMKeyPair\r\n            val privateKeyInfo = PrivateKeyInfo.getInstance(pemPair.privateKeyInfo)\r\n            val publicKeyInfo = SubjectPublicKeyInfo.getInstance(pemPair.publicKeyInfo)\r\n            val ecpublicKey = converter.getPublicKey(publicKeyInfo) as ECPublicKey\r\n            val ecprivateKey=  converter.getPrivateKey(privateKeyInfo) as ECPrivateKey\r\n            return Pair(ecpublicKey, ecprivateKey)\r\n        }\r\n    }\r\n```\r\n\r\nThen use the pair obtained in this way:\r\n``` lang-kt\r\n        val privateKey = pairKeys.second\r\n        val publicKey = pairKeys.first\r\n\r\n        val xCoord = publicKey.w.affineX\r\n        val reversedX = Utils.toByteArrayUnsigned(xCoord)\r\n        val calculateSha256 = VASUtils.calculateSha256(reversedX)\r\n        val hint = calculateSha256.copyOfRange(0, 4)\r\n        println(&quot;[decrypt] Hint calculated is: ${Hex.toHexString(hint)} device: $expected&quot;)\r\n        assertEquals(Hex.toHexString(hint), expected)\r\n```\r\n\r\nwhere \r\n``` lang-kt\r\nfun toByteArrayUnsigned(bi: BigInteger): ByteArray {\r\n    var extractedBytes = bi.toByteArray()\r\n    var skipped = 0\r\n    var skip = true\r\n    for (b in extractedBytes) {\r\n        val signByte = b == 0x00.toByte()\r\n        if (skip &amp;&amp; signByte) {\r\n            skipped++\r\n             continue\r\n        } else if (skip) {\r\n            skip = false\r\n        }\r\n     }\r\n     extractedBytes = Arrays.copyOfRange(\r\n         extractedBytes, skipped, extractedBytes.size\r\n     )\r\n     return extractedBytes\r\n}\r\n```\r\n\r\n","title":"Parsing and loading EC Private key, curve secp256r1","body":"<p>After some hours of digging into it, I found the solution.\nThe key retrieval was ok (I improved a bit, see below the code), but the real issue was that I had to use the public affineX (not from private key) and that value must be converted to an unsignedByteArray. That gave me the correct sha256 and the key was obtained correctly without any header needed.</p>\n<p>Provide the <em>privateKey</em> param as the full Private key String (as in PEM file):</p>\n<pre class=\"lang-kt prettyprint-override\"><code>fun load_pkcs_ec_key_pairs(privateKey: String): Pair&lt;ECPublicKey, ECPrivateKey&gt; {\n        StringReader(privateKey).use { keyReader -&gt;\n            val pemParser = PEMParser(keyReader)\n            val converter = JcaPEMKeyConverter()\n            val pemPair = pemParser.readObject() as PEMKeyPair\n            val privateKeyInfo = PrivateKeyInfo.getInstance(pemPair.privateKeyInfo)\n            val publicKeyInfo = SubjectPublicKeyInfo.getInstance(pemPair.publicKeyInfo)\n            val ecpublicKey = converter.getPublicKey(publicKeyInfo) as ECPublicKey\n            val ecprivateKey=  converter.getPrivateKey(privateKeyInfo) as ECPrivateKey\n            return Pair(ecpublicKey, ecprivateKey)\n        }\n    }\n</code></pre>\n<p>Then use the pair obtained in this way:</p>\n<pre class=\"lang-kt prettyprint-override\"><code>        val privateKey = pairKeys.second\n        val publicKey = pairKeys.first\n\n        val xCoord = publicKey.w.affineX\n        val reversedX = Utils.toByteArrayUnsigned(xCoord)\n        val calculateSha256 = VASUtils.calculateSha256(reversedX)\n        val hint = calculateSha256.copyOfRange(0, 4)\n        println(&quot;[decrypt] Hint calculated is: ${Hex.toHexString(hint)} device: $expected&quot;)\n        assertEquals(Hex.toHexString(hint), expected)\n</code></pre>\n<p>where</p>\n<pre class=\"lang-kt prettyprint-override\"><code>fun toByteArrayUnsigned(bi: BigInteger): ByteArray {\n    var extractedBytes = bi.toByteArray()\n    var skipped = 0\n    var skip = true\n    for (b in extractedBytes) {\n        val signByte = b == 0x00.toByte()\n        if (skip &amp;&amp; signByte) {\n            skipped++\n             continue\n        } else if (skip) {\n            skip = false\n        }\n     }\n     extractedBytes = Arrays.copyOfRange(\n         extractedBytes, skipped, extractedBytes.size\n     )\n     return extractedBytes\n}\n</code></pre>\n"}],"owner":{"account_id":5143936,"reputation":3502,"user_id":4120431,"display_name":"N Dorigatti"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":235,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77046194,"answer_count":1,"score":0,"last_activity_date":1693983844,"creation_date":1693903230,"question_id":77046193,"body_markdown":"I&#39;m doing a spin-off request from this: [EC Key request](https://security.stackexchange.com/questions/260145/what-format-is-this-private-key-in-and-how-can-i-process-it-using-bouncycastle/266785?noredirect=1#comment566137_266785)\r\n\r\nAs my problem is a bit different but similar.\r\nI have the following private key (in this format, not a file):\r\n`MHcCAQEEID0VR/I814rQUqWIYPEhno+3kexN/jN2n1ub+mJ6ZWyhoAoGCCqGSM49AwEHoUQDQgAEwKMBv29ByaSLiGF0FctuyB+Hs2oZ1kDIYhTVllPexNGudAlm8IWOH0e+Exc97/zBdawu7Yl+XytQONszGzAK7w==`\r\n\r\nAnd I want to load it to an ECPrivateKey (possibly to have an ECPublicKey too).\r\nFollowing a bunch of links and ideas, i got two possible code hints:\r\n1- Bouncy castle:\r\n\r\n```\r\nval privateKey = &quot;PRIVATE KEY ABOVE, MHc...&quot;\r\nval rdr = StringReader(privateKey)\r\nval parsed = PEMParser(rdr).readObject()\r\nval pair = JcaPEMKeyConverter().getKeyPair(parsed as PEMKeyPair)\r\nprintln(&quot;[load_ec_pair_keys] Algorithm: ${pair.private.algorithm} , Private Key: ${pair.private} , Public Key: ${pair.public}&quot;)\r\nreturn pair\r\n```\r\n\r\nThe output gives:\r\n&gt; Algorithm: ECDSA , Private Key: EC Private Key &gt;[fe:60:f6:24:f9:ba:61:4f:60:98:d9:72:b2:14:87:c8:13:c2:3f:f4]\r\n&gt;\r\n&gt;    X: c0a301bf6f41c9a48b88617415cb6ec81f87b36a19d640c86214d59653dec4d1\r\n&gt;\r\n&gt;    Y: ae740966f0858e1f47be13173deffcc175ac2eed897e5f2b5038db331b300aef\r\n\r\nBut if I save that private key to a pem file and use openssl:\r\n**openssl ec -noout -text -inform PEM -in private.pem**\r\nThe result is:\r\n&gt;read EC key\r\n&gt;Private-Key: (256 bit)\r\n&gt;\r\n&gt;priv:\r\n&gt;    3d:15:47:f2:3c:d7:8a:d0:52:a5:88:60:f1:21:9e:\r\n&gt;    8f:b7:91:ec:4d:fe:33:76:9f:5b:9b:fa:62:7a:65:\r\n&gt;    6c:a1\r\n&gt; \r\n&gt; pub:\r\n&gt;    04:c0:a3:01:bf:6f:41:c9:a4:8b:88:61:74:15:cb:\r\n&gt;    6e:c8:1f:87:b3:6a:19:d6:40:c8:62:14:d5:96:53:\r\n&gt;    de:c4:d1:ae:74:09:66:f0:85:8e:1f:47:be:13:17:\r\n&gt;    3d:ef:fc:c1:75:ac:2e:ed:89:7e:5f:2b:50:38:db:\r\n&gt;    33:1b:30:0a:ef\r\n&gt; \r\n&gt;ASN1 OID: prime256v1\r\n&gt;\r\n&gt;NIST CURVE: P-256\r\n\r\n\r\nSo those seems different to me, and using the help (see comments too) of @dave_thompson_085 I ended up with the following code:\r\n2 - No BouncyCastle, java.security package:\r\n```\r\nfun load_ec_full(): ECPrivateKey {\r\n        val a = AlgorithmParameters.getInstance(&quot;EC&quot;)\r\n        a.init(ECGenParameterSpec(&quot;secp256r1&quot;))\r\n        val p: ECParameterSpec = a.getParameterSpec(ECParameterSpec::class.java)\r\n        println(&quot;p=(dec)&quot; + (p.curve.field as ECFieldFp).p)\r\n        val G: ECPoint = p.generator\r\n        System.out.format(&quot;Gx=(hex)%032x%n&quot;, G.affineX)\r\n        System.out.format(&quot;Gy=(hex)%032x%n&quot;, G.affineY)\r\n\r\n//        val headerPrefix = Hex.decode(&quot;303E020100301006072A8648CE3D020106052B8104000A042730250201010420&quot;) //secp256k1 \r\n        val headerPrefix = Hex.decode(&quot;308187020100301306072a8648ce3d020106082a8648ce3d030107046d306b02&quot;) //secp256r1 \r\n        val privateKSimple =\r\n            &quot;MHcCAQEEID0VR/I814rQUqWIYPEhno+3kexN/jN2n1ub+mJ6ZWyhoAoGCCqGSM49AwEHoUQDQgAEwKMBv29ByaSLiGF0FctuyB+Hs2oZ1kDIYhTVllPexNGudAlm8IWO&quot; +\r\n                    &quot;H0e+Exc97/zBdawu7Yl+XytQONszGzAK7w==&quot;\r\n        val decodedPK = java.util.Base64.getDecoder().decode(privateKSimple)\r\n        val kf: KeyFactory = KeyFactory.getInstance(&quot;EC&quot;)\r\n        val k1 = kf.generatePrivate(PKCS8EncodedKeySpec(headerPrefix + decodedPK)) as ECPrivateKey\r\n        val p2 = k1.params\r\n        println(&quot;again p=(dec)&quot; + (p2.curve.field as ECFieldFp).p)\r\n        println(&quot;KEY: $k1&quot;)\r\n```\r\n\r\nIf i use the first headerPrefix (secp256k1) i got a key with output:\r\n\r\n&gt;p=(dec)115792089210356248762697446949407573530086143415290314195533631308867097853951\r\n&gt;\r\n&gt; Gx=(hex)6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296\r\n&gt;\r\n&gt; Gy=(hex)4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5\r\n&gt;\r\n&gt; again p=(dec)115792089237316195423570985008687907853269984665640564039457584007908834671663\r\n&gt;\r\n&gt; KEY: sun.security.ec.ECPrivateKeyImpl@b8485def\r\n\r\nSo the key is not written out, but is different for the one generated above).\r\n\r\nIf I use the headerPrefix generated using the openssl command hinted in the other response: **openssl pkcs8 -topk8 -nocrypt -in private.pem -out pkcs8der -outform der**\r\nthat i obtained as: &quot;308187020100301306072a8648ce3d020106082a8648ce3d030107046d306b02&quot;\r\nthis breaks the code:\r\n&gt;java.security.InvalidKeyException: Invalid EC private key\r\njava.security.spec.InvalidKeySpecException: java.security.InvalidKeyException: Invalid EC private key\r\n\tat jdk.crypto.ec/sun.security.ec.ECKeyFactory.engineGeneratePrivate(Unknown Source)\r\n\tat java.base/java.security.KeyFactory.generatePrivate(Unknown Source)\r\n\tat com.mhamdaoui.smartcardreader.ExampleUnitTest.load_ec_full(ExampleUnitTest.kt:249)\r\n\tat com.mhamdaoui.smartcardreader.ExampleUnitTest.test load rsa key(ExampleUnitTest.kt:273)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.mockito.internal.runners.DefaultInternalRunner$1$1.evaluate(DefaultInternalRunner.java:55)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\r\n\tat org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\r\n\tat org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:413)\r\n\tat org.mockito.internal.runners.DefaultInternalRunner$1.run(DefaultInternalRunner.java:100)\r\n\tat org.mockito.internal.runners.DefaultInternalRunner.run(DefaultInternalRunner.java:107)\r\n\tat org.mockito.internal.runners.StrictRunner.run(StrictRunner.java:41)\r\n\tat org.mockito.junit.MockitoJUnitRunner.run(MockitoJUnitRunner.java:163)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:108)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:58)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:40)\r\n\tat org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:60)\r\n\tat org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n\tat org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\r\n\tat org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\r\n\tat jdk.proxy1/jdk.proxy1.$Proxy2.processTestClass(Unknown Source)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker$2.run(TestWorker.java:176)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)\r\n\tat org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)\r\n\tat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)\r\n\tat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)\r\n\tat worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\r\n\tat worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)\r\nCaused by: java.security.InvalidKeyException: Invalid EC private key\r\n\tat jdk.crypto.ec/sun.security.ec.ECPrivateKeyImpl.parseKeyBits(Unknown Source)\r\n\tat jdk.crypto.ec/sun.security.ec.ECPrivateKeyImpl.&lt;init&gt;(Unknown Source)\r\n\tat jdk.crypto.ec/sun.security.ec.ECKeyFactory.implGeneratePrivate(Unknown Source)\r\n\t... 52 more\r\nCaused by: java.io.IOException: Integer exceeds maximum valid value\r\n\tat java.base/sun.security.util.DerValue.getIntegerInternal(Unknown Source)\r\n\tat java.base/sun.security.util.DerValue.getInteger(Unknown Source)\r\n\tat java.base/sun.security.util.DerInputStream.getInteger(Unknown Source)\r\n\t... 55 more\r\n\r\nI&#39;m quite lost now as I&#39;m new on the field, and honestly this is only a small side of my project.\r\nThe only thing I know is that in oder to be sure the key is parsed correctly, the following code on the key should give the result: &quot;c0b77375&quot;\r\n```\r\nval xCoord = privateKey.params.generator.affineX\r\nval calculateSha256 = VASUtils.calculateSha256(xCoord.toByteArray())\r\nval result = calculateSha256.copyOfRange(0, 4)\r\n```\r\n\r\nTo give you a bit more context, I&#39;m trying to replicate on Android (Kotlin, but is JVM...) the AppleVAS reading code that can be found here:\r\nhttps://github.com/RfidResearchGroup/proxmark3/blob/32f892e512d97be402c0abaf6f00675686ed0893/client/src/cmdhfvas.c#L280\r\n\r\nI have the correct *cryptogram* data and other variables, but method **GetPrivateKeyHint** in Java fails for me and the given key. \r\n\r\nIf someone can help me, or can check what I&#39;m doing wrong it would be very helpful, I&#39;m planning to put all my work on a github open repository at the end, so it&#39;s not a commercial action.","title":"Parsing and loading EC Private key, curve secp256r1","body":"<p>I'm doing a spin-off request from this: <a href=\"https://security.stackexchange.com/questions/260145/what-format-is-this-private-key-in-and-how-can-i-process-it-using-bouncycastle/266785?noredirect=1#comment566137_266785\">EC Key request</a></p>\n<p>As my problem is a bit different but similar.\nI have the following private key (in this format, not a file):\n<code>MHcCAQEEID0VR/I814rQUqWIYPEhno+3kexN/jN2n1ub+mJ6ZWyhoAoGCCqGSM49AwEHoUQDQgAEwKMBv29ByaSLiGF0FctuyB+Hs2oZ1kDIYhTVllPexNGudAlm8IWOH0e+Exc97/zBdawu7Yl+XytQONszGzAK7w==</code></p>\n<p>And I want to load it to an ECPrivateKey (possibly to have an ECPublicKey too).\nFollowing a bunch of links and ideas, i got two possible code hints:\n1- Bouncy castle:</p>\n<pre><code>val privateKey = &quot;PRIVATE KEY ABOVE, MHc...&quot;\nval rdr = StringReader(privateKey)\nval parsed = PEMParser(rdr).readObject()\nval pair = JcaPEMKeyConverter().getKeyPair(parsed as PEMKeyPair)\nprintln(&quot;[load_ec_pair_keys] Algorithm: ${pair.private.algorithm} , Private Key: ${pair.private} , Public Key: ${pair.public}&quot;)\nreturn pair\n</code></pre>\n<p>The output gives:</p>\n<blockquote>\n<p>Algorithm: ECDSA , Private Key: EC Private Key &gt;[fe:60:f6:24:f9:ba:61:4f:60:98:d9:72:b2:14:87:c8:13:c2:3f:f4]</p>\n<p>X: c0a301bf6f41c9a48b88617415cb6ec81f87b36a19d640c86214d59653dec4d1</p>\n<p>Y: ae740966f0858e1f47be13173deffcc175ac2eed897e5f2b5038db331b300aef</p>\n</blockquote>\n<p>But if I save that private key to a pem file and use openssl:\n<strong>openssl ec -noout -text -inform PEM -in private.pem</strong>\nThe result is:</p>\n<blockquote>\n<p>read EC key\nPrivate-Key: (256 bit)</p>\n<p>priv:\n3d:15:47:f2:3c:d7:8a:d0:52:a5:88:60:f1:21:9e:\n8f:b7:91:ec:4d:fe:33:76:9f:5b:9b:fa:62:7a:65:\n6c:a1</p>\n<p>pub:\n04:c0:a3:01:bf:6f:41:c9:a4:8b:88:61:74:15:cb:\n6e:c8:1f:87:b3:6a:19:d6:40:c8:62:14:d5:96:53:\nde:c4:d1:ae:74:09:66:f0:85:8e:1f:47:be:13:17:\n3d:ef:fc:c1:75:ac:2e:ed:89:7e:5f:2b:50:38:db:\n33:1b:30:0a:ef</p>\n<p>ASN1 OID: prime256v1</p>\n<p>NIST CURVE: P-256</p>\n</blockquote>\n<p>So those seems different to me, and using the help (see comments too) of @dave_thompson_085 I ended up with the following code:\n2 - No BouncyCastle, java.security package:</p>\n<pre><code>fun load_ec_full(): ECPrivateKey {\n        val a = AlgorithmParameters.getInstance(&quot;EC&quot;)\n        a.init(ECGenParameterSpec(&quot;secp256r1&quot;))\n        val p: ECParameterSpec = a.getParameterSpec(ECParameterSpec::class.java)\n        println(&quot;p=(dec)&quot; + (p.curve.field as ECFieldFp).p)\n        val G: ECPoint = p.generator\n        System.out.format(&quot;Gx=(hex)%032x%n&quot;, G.affineX)\n        System.out.format(&quot;Gy=(hex)%032x%n&quot;, G.affineY)\n\n//        val headerPrefix = Hex.decode(&quot;303E020100301006072A8648CE3D020106052B8104000A042730250201010420&quot;) //secp256k1 \n        val headerPrefix = Hex.decode(&quot;308187020100301306072a8648ce3d020106082a8648ce3d030107046d306b02&quot;) //secp256r1 \n        val privateKSimple =\n            &quot;MHcCAQEEID0VR/I814rQUqWIYPEhno+3kexN/jN2n1ub+mJ6ZWyhoAoGCCqGSM49AwEHoUQDQgAEwKMBv29ByaSLiGF0FctuyB+Hs2oZ1kDIYhTVllPexNGudAlm8IWO&quot; +\n                    &quot;H0e+Exc97/zBdawu7Yl+XytQONszGzAK7w==&quot;\n        val decodedPK = java.util.Base64.getDecoder().decode(privateKSimple)\n        val kf: KeyFactory = KeyFactory.getInstance(&quot;EC&quot;)\n        val k1 = kf.generatePrivate(PKCS8EncodedKeySpec(headerPrefix + decodedPK)) as ECPrivateKey\n        val p2 = k1.params\n        println(&quot;again p=(dec)&quot; + (p2.curve.field as ECFieldFp).p)\n        println(&quot;KEY: $k1&quot;)\n</code></pre>\n<p>If i use the first headerPrefix (secp256k1) i got a key with output:</p>\n<blockquote>\n<p>p=(dec)115792089210356248762697446949407573530086143415290314195533631308867097853951</p>\n<p>Gx=(hex)6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296</p>\n<p>Gy=(hex)4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5</p>\n<p>again p=(dec)115792089237316195423570985008687907853269984665640564039457584007908834671663</p>\n<p>KEY: sun.security.ec.ECPrivateKeyImpl@b8485def</p>\n</blockquote>\n<p>So the key is not written out, but is different for the one generated above).</p>\n<p>If I use the headerPrefix generated using the openssl command hinted in the other response: <strong>openssl pkcs8 -topk8 -nocrypt -in private.pem -out pkcs8der -outform der</strong>\nthat i obtained as: &quot;308187020100301306072a8648ce3d020106082a8648ce3d030107046d306b02&quot;\nthis breaks the code:</p>\n<blockquote>\n<p>java.security.InvalidKeyException: Invalid EC private key\njava.security.spec.InvalidKeySpecException: java.security.InvalidKeyException: Invalid EC private key\nat jdk.crypto.ec/sun.security.ec.ECKeyFactory.engineGeneratePrivate(Unknown Source)\nat java.base/java.security.KeyFactory.generatePrivate(Unknown Source)\nat com.mhamdaoui.smartcardreader.ExampleUnitTest.load_ec_full(ExampleUnitTest.kt:249)\nat com.mhamdaoui.smartcardreader.ExampleUnitTest.test load rsa key(ExampleUnitTest.kt:273)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\nat java.base/java.lang.reflect.Method.invoke(Unknown Source)\nat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\nat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\nat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\nat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\nat org.mockito.internal.runners.DefaultInternalRunner$1$1.evaluate(DefaultInternalRunner.java:55)\nat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\nat org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\nat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\nat org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\nat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\nat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\nat org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\nat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\nat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\nat org.junit.runners.ParentRunner.run(ParentRunner.java:413)\nat org.mockito.internal.runners.DefaultInternalRunner$1.run(DefaultInternalRunner.java:100)\nat org.mockito.internal.runners.DefaultInternalRunner.run(DefaultInternalRunner.java:107)\nat org.mockito.internal.runners.StrictRunner.run(StrictRunner.java:41)\nat org.mockito.junit.MockitoJUnitRunner.run(MockitoJUnitRunner.java:163)\nat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:108)\nat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:58)\nat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:40)\nat org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:60)\nat org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:52)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\nat java.base/java.lang.reflect.Method.invoke(Unknown Source)\nat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\nat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\nat org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\nat org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\nat jdk.proxy1/jdk.proxy1.$Proxy2.processTestClass(Unknown Source)\nat org.gradle.api.internal.tasks.testing.worker.TestWorker$2.run(TestWorker.java:176)\nat org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)\nat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)\nat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)\nat org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)\nat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)\nat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)\nat worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\nat worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)\nCaused by: java.security.InvalidKeyException: Invalid EC private key\nat jdk.crypto.ec/sun.security.ec.ECPrivateKeyImpl.parseKeyBits(Unknown Source)\nat jdk.crypto.ec/sun.security.ec.ECPrivateKeyImpl.(Unknown Source)\nat jdk.crypto.ec/sun.security.ec.ECKeyFactory.implGeneratePrivate(Unknown Source)\n... 52 more\nCaused by: java.io.IOException: Integer exceeds maximum valid value\nat java.base/sun.security.util.DerValue.getIntegerInternal(Unknown Source)\nat java.base/sun.security.util.DerValue.getInteger(Unknown Source)\nat java.base/sun.security.util.DerInputStream.getInteger(Unknown Source)\n... 55 more</p>\n</blockquote>\n<p>I'm quite lost now as I'm new on the field, and honestly this is only a small side of my project.\nThe only thing I know is that in oder to be sure the key is parsed correctly, the following code on the key should give the result: &quot;c0b77375&quot;</p>\n<pre><code>val xCoord = privateKey.params.generator.affineX\nval calculateSha256 = VASUtils.calculateSha256(xCoord.toByteArray())\nval result = calculateSha256.copyOfRange(0, 4)\n</code></pre>\n<p>To give you a bit more context, I'm trying to replicate on Android (Kotlin, but is JVM...) the AppleVAS reading code that can be found here:\n<a href=\"https://github.com/RfidResearchGroup/proxmark3/blob/32f892e512d97be402c0abaf6f00675686ed0893/client/src/cmdhfvas.c#L280\" rel=\"nofollow noreferrer\">https://github.com/RfidResearchGroup/proxmark3/blob/32f892e512d97be402c0abaf6f00675686ed0893/client/src/cmdhfvas.c#L280</a></p>\n<p>I have the correct <em>cryptogram</em> data and other variables, but method <strong>GetPrivateKeyHint</strong> in Java fails for me and the given key.</p>\n<p>If someone can help me, or can check what I'm doing wrong it would be very helpful, I'm planning to put all my work on a github open repository at the end, so it's not a commercial action.</p>\n"},{"tags":["java","exception","arraylist"],"comments":[{"owner":{"account_id":6104455,"reputation":4456,"user_id":4762502,"accept_rate":73,"display_name":"Gaurav Jeswani"},"score":0,"creation_date":1631592800,"post_id":69171680,"comment_id":122256718,"body_markdown":"I think it would be good for you, if you debug it. That will help you to understand it better. And what you are trying to do here in code?","body":"I think it would be good for you, if you debug it. That will help you to understand it better. And what you are trying to do here in code?"},{"owner":{"account_id":1888690,"reputation":3005,"user_id":1707353,"accept_rate":91,"display_name":"Jeff Holt"},"score":1,"creation_date":1631593273,"post_id":69171680,"comment_id":122256805,"body_markdown":"`al.get(i).get(0)` is the culprit. Visually, that&#39;s line 32 of what you posted. The ith element of al is an empty array. The 3 if statements in the for loop don&#39;t guarantee anything is added.","body":"<code>al.get(i).get(0)</code> is the culprit. Visually, that&#39;s line 32 of what you posted. The ith element of al is an empty array. The 3 if statements in the for loop don&#39;t guarantee anything is added."},{"owner":{"account_id":4959604,"reputation":8469,"user_id":3991211,"display_name":"Garr Godfrey"},"score":0,"creation_date":1631593679,"post_id":69171680,"comment_id":122256880,"body_markdown":"Not sure what your algorithm does, but the problem is the last time through the loop. It sets flag=0 but does not increment `idx`, and immediately after it will add a new element to the arraylist, but idx still references the previous entry, and nothing is added to the last arraylist","body":"Not sure what your algorithm does, but the problem is the last time through the loop. It sets flag=0 but does not increment <code>idx</code>, and immediately after it will add a new element to the arraylist, but idx still references the previous entry, and nothing is added to the last arraylist"},{"owner":{"account_id":20525751,"reputation":949,"user_id":15064224,"display_name":"Issa Khodadadi"},"score":0,"creation_date":1631596869,"post_id":69171680,"comment_id":122257550,"body_markdown":"Subtract one unit from `al.size()` in your last for loop: `for(int i=0;i&lt;al.size()-1;i++)...`","body":"Subtract one unit from <code>al.size()</code> in your last for loop: <code>for(int i=0;i&lt;al.size()-1;i++)...</code>"}],"answers":[{"tags":[],"owner":{"account_id":5977652,"reputation":394,"user_id":4697928,"display_name":"Abishek Stephen"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1631594626,"creation_date":1631594007,"answer_id":69171829,"question_id":69171680,"body_markdown":"Your arraylist is having some empty list and if you access it, it will throw IndexOutOfBoundsException.\r\n\r\n[![Empty][1]][1]\r\n\r\nAlways check if data is present in that index before accessing it.\r\n\r\n  [1]: https://i.stack.imgur.com/osIyV.png","title":"java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0","body":"<p>Your arraylist is having some empty list and if you access it, it will throw IndexOutOfBoundsException.</p>\n<p><a href=\"https://i.stack.imgur.com/osIyV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/osIyV.png\" alt=\"Empty\" /></a></p>\n<p>Always check if data is present in that index before accessing it.</p>\n"},{"tags":[],"owner":{"account_id":16933574,"reputation":109,"user_id":12247187,"display_name":"unpluggeDloop"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670505392,"creation_date":1670505392,"answer_id":74730877,"question_id":69171680,"body_markdown":"if you run this code\r\n\r\nSystem.out.println(arrayListName.get(arrayListName.size()-1));\r\n\r\n&gt; It compiled successfully, while running it shows:  Exception in thread\r\n&gt; &quot;main&quot; java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0\r\n\r\nWhen array list is empty and you search value from it in that way you get error. \r\nBut if you check does your array list is empty. When array list have at least one element in it, run code and you get your value - no compiler error.\r\n\r\n        \tpublic static void functionNameHere(){\r\n\t\tif (!arrayListName.isEmpty() ){\r\n                //execute code\r\n                System.out.println(arrayListName.get(arrayListName.size()-1));\r\n                }\t\t\r\n\t}","title":"java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0","body":"<p>if you run this code</p>\n<p>System.out.println(arrayListName.get(arrayListName.size()-1));</p>\n<blockquote>\n<p>It compiled successfully, while running it shows:  Exception in thread\n&quot;main&quot; java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0</p>\n</blockquote>\n<p>When array list is empty and you search value from it in that way you get error.\nBut if you check does your array list is empty. When array list have at least one element in it, run code and you get your value - no compiler error.</p>\n<pre><code>        public static void functionNameHere(){\n    if (!arrayListName.isEmpty() ){\n            //execute code\n            System.out.println(arrayListName.get(arrayListName.size()-1));\n            }       \n}\n</code></pre>\n"}],"owner":{"account_id":18076324,"reputation":11,"user_id":13274967,"display_name":"Pavan venkata sai"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26109,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1693983655,"creation_date":1631592447,"question_id":69171680,"body_markdown":" \r\n\r\n    import java.util.*;\r\n     class stockbuysell{\r\n        //Function to find the days of buying and selling stock for max profit.\r\n    \tpublic static void main(String []args){\r\n    \t\tint A[] = {100,180,260,310,40,535,695};\r\n    \t\t ArrayList&lt;ArrayList&lt;Integer&gt;&gt; al = stockBuySell(A,7);\r\n    \t}\r\n        static ArrayList&lt;ArrayList&lt;Integer&gt; &gt; stockBuySell(int A[], int n) {\r\n            // code here\r\n           // buy = 0;\r\n            //sell = 1\r\n            ArrayList&lt;ArrayList&lt;Integer&gt;&gt; al = new ArrayList&lt;ArrayList&lt;Integer&gt;&gt;();\r\n            int flag = 0;\r\n            int idx = 0;\r\n            for(int i=1;i&lt;n;i++){\r\n                if(i==n-1 &amp;&amp; flag==1){\r\n                    al.get(idx).add(i);\r\n                    flag = 0;\r\n                }\r\n                if(flag == 0 &amp;&amp; A[i]&gt;A[i-1]){//\r\n                    al.add(new ArrayList&lt;Integer&gt;());\r\n                    al.get(idx).add(i-1);\r\n                    flag = 1;\r\n                }\r\n                if(flag == 1 &amp;&amp; A[i]&lt;A[i-1]){//\r\n                    al.get(idx).add(i-1);\r\n                    flag = 0;\r\n                    idx++;\r\n                }\r\n            }\r\n            for(int i=0;i&lt;al.size();i++){\r\n                System.out.println(al.get(i).get(0)+&quot; &quot;+al.get(i).get(1));\r\n            }\r\n            return al;\r\n        }\r\n    }\r\n\r\nI don&#39;t know where I get an error. It compiled successfully, while running it shows:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0\r\n            at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:64)\r\n            at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:70)\r\n            at java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:266)\r\n            at java.base/java.util.Objects.checkIndex(Objects.java:359)\r\n            at java.base/java.util.ArrayList.get(ArrayList.java:427)\r\n            at stockbuysell.stockBuySell(stockBuySell.java:32)\r\n            at stockbuysell.main(stockBuySell.java:6)\r\n\r\n","title":"java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0","body":"<pre><code>import java.util.*;\n class stockbuysell{\n    //Function to find the days of buying and selling stock for max profit.\n    public static void main(String []args){\n        int A[] = {100,180,260,310,40,535,695};\n         ArrayList&lt;ArrayList&lt;Integer&gt;&gt; al = stockBuySell(A,7);\n    }\n    static ArrayList&lt;ArrayList&lt;Integer&gt; &gt; stockBuySell(int A[], int n) {\n        // code here\n       // buy = 0;\n        //sell = 1\n        ArrayList&lt;ArrayList&lt;Integer&gt;&gt; al = new ArrayList&lt;ArrayList&lt;Integer&gt;&gt;();\n        int flag = 0;\n        int idx = 0;\n        for(int i=1;i&lt;n;i++){\n            if(i==n-1 &amp;&amp; flag==1){\n                al.get(idx).add(i);\n                flag = 0;\n            }\n            if(flag == 0 &amp;&amp; A[i]&gt;A[i-1]){//\n                al.add(new ArrayList&lt;Integer&gt;());\n                al.get(idx).add(i-1);\n                flag = 1;\n            }\n            if(flag == 1 &amp;&amp; A[i]&lt;A[i-1]){//\n                al.get(idx).add(i-1);\n                flag = 0;\n                idx++;\n            }\n        }\n        for(int i=0;i&lt;al.size();i++){\n            System.out.println(al.get(i).get(0)+&quot; &quot;+al.get(i).get(1));\n        }\n        return al;\n    }\n}\n</code></pre>\n<p>I don't know where I get an error. It compiled successfully, while running it shows:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0\n        at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:64)\n        at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:70)\n        at java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:266)\n        at java.base/java.util.Objects.checkIndex(Objects.java:359)\n        at java.base/java.util.ArrayList.get(ArrayList.java:427)\n        at stockbuysell.stockBuySell(stockBuySell.java:32)\n        at stockbuysell.main(stockBuySell.java:6)\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":12142689,"reputation":9,"user_id":8865952,"display_name":"Jonathan Soledad"},"score":0,"creation_date":1509510210,"post_id":47048192,"comment_id":81043482,"body_markdown":"Ignore the while loop towards the top i forgot to delete that.","body":"Ignore the while loop towards the top i forgot to delete that."},{"owner":{"account_id":3983214,"reputation":4583,"user_id":3284624,"display_name":"D.B."},"score":0,"creation_date":1509510843,"post_id":47048192,"comment_id":81043625,"body_markdown":"Walk yourself through the steps you would use to do it then think about how you can program an algorithm to do the same steps. Think about the fact that you have a fixed number of coins to deal with and they have a fixed value - 25, 10, 5, 1. Write out the math somewhere to make sure you understand how it will work and/or try to solve small pieces first (e.g. figure out how to calculate just the number of quarters needed then add more coins later)","body":"Walk yourself through the steps you would use to do it then think about how you can program an algorithm to do the same steps. Think about the fact that you have a fixed number of coins to deal with and they have a fixed value - 25, 10, 5, 1. Write out the math somewhere to make sure you understand how it will work and/or try to solve small pieces first (e.g. figure out how to calculate just the number of quarters needed then add more coins later)"},{"owner":{"account_id":2871026,"reputation":31449,"user_id":2464386,"accept_rate":84,"display_name":"ajb"},"score":0,"creation_date":1509515787,"post_id":47048192,"comment_id":81045021,"body_markdown":"Best way to get the &quot;cents&quot; out of `dollar`, since `dollar` is a `double`: (1) Multiply by 100 to get the total number of cents, which could be &gt; 100 (2) Use `Math.round()` to convert to an integer (3) Use the `%` operator--I&#39;ll let you figure out how.  You need to use `round` because `double` cannot represent most dollar values exactly, and multiplying by 100 could give you an answer that&#39;s a little less or a little more than the actual integer value.","body":"Best way to get the &quot;cents&quot; out of <code>dollar</code>, since <code>dollar</code> is a <code>double</code>: (1) Multiply by 100 to get the total number of cents, which could be &gt; 100 (2) Use <code>Math.round()</code> to convert to an integer (3) Use the <code>%</code> operator--I&#39;ll let you figure out how.  You need to use <code>round</code> because <code>double</code> cannot represent most dollar values exactly, and multiplying by 100 could give you an answer that&#39;s a little less or a little more than the actual integer value."},{"owner":{"account_id":2871026,"reputation":31449,"user_id":2464386,"accept_rate":84,"display_name":"ajb"},"score":0,"creation_date":1509516167,"post_id":47048192,"comment_id":81045161,"body_markdown":"I wrote the above before realizing that the assignment asked you to use a substring to extract the cents.  I think that is a really bad way to do things.  So now you know what the right way to do it is, even if you can&#39;t use it on this assignment.","body":"I wrote the above before realizing that the assignment asked you to use a substring to extract the cents.  I think that is a really bad way to do things.  So now you know what the right way to do it is, even if you can&#39;t use it on this assignment."}],"answers":[{"tags":[],"owner":{"account_id":3983214,"reputation":4583,"user_id":3284624,"display_name":"D.B."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1509517125,"creation_date":1509516630,"answer_id":47049173,"question_id":47048192,"body_markdown":"Here&#39;s some example code for you to look at. Note that I renamed your `Dollar` variable to `dollarStr` since variables shouldn&#39;t begin with a capital letter per [Java Naming Conventions](http://www.oracle.com/technetwork/java/codeconventions-135099.html). I also want to point out that ajb is quite correct in that using `double` to represent currency is not a good idea. However, since this is a simple homework assignment I doubt that it&#39;s going to be an issue for you.\r\n\r\n\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    import java.util.Scanner;\r\n    \r\n    ...\r\n    \t\r\n    public static void main(String[] args){\r\n    \t//omitting extra code to shorten the answer\r\n    \t...\r\n    \r\n    \t}else if(conversion == 1) {\r\n    \t\tSystem.out.print(&quot;Enter the Yuan amount: &quot;);\r\n    \t\tyuan = key.nextDouble();\r\n    \t\tdollar = yuan / exchangeRate;\r\n    \r\n    \t\tSystem.out.printf(yuan + &quot; yuan is%8.3f dollars.&quot;, dollar);\r\n    \t\tSystem.out.println();\r\n    \r\n    \t\tdollarStr = String.valueOf(dollar);\r\n    \t\tSystem.out.println(dollarStr.substring(0, dollarStr.indexOf(&quot;.&quot;)) + &quot; dollars&quot;);\r\n    \t   \r\n    \t    //Get the &quot;cents&quot; part of the converted value\r\n    \t\tString centsStr = dollarStr.substring(dollarStr.indexOf(&quot;.&quot;));\r\n    \t\t//Convert the value into a double\r\n    \t\tdouble cents = Double.parseDouble(centsStr);\r\n    \t\t//Multiplying by 100 so that something like 0.173 dollars \r\n    \t\t// becomes 17.3 cents\r\n    \t\tcents *= 100;\r\n    \t\t\r\n    \t\t//Assuming you want to round to nearest penny, \r\n    \t\t//  but it&#39;s unclear from your question if this is correct.\r\n    \t\tcents = Math.round(cents); \r\n    \t\t\r\n    \t\t//quick and dirty conversion of the rounded cents to an integer value\r\n    \t\tint change = (int) cents;\r\n    \t\t\r\n    \t\t//For demonstration purposes, feel free to remove it.\r\n    \t\tSystem.out.println(cents+ &quot; cents&quot;);\r\n    \t\t\r\n    \t\t//Calculate how many of each kind of coin and display results.\r\n    \t\tMap&lt;Coin, Integer&gt; changeMap = makeChange(change);\r\n    \t\tfor(Coin coin: changeMap.keySet()){\r\n    \t\t\tint numCoins = changeMap.get(coin);\r\n    \t\t\tSystem.out.print(numCoins +&quot; &quot;+ (numCoins != 1 ? coin.getPlural() : coin.name().toLowerCase())+&quot; &quot;);\r\n    \t\t}\r\n    \t\tSystem.out.print(&quot;\\n&quot;);\r\n    \t}\r\n    \t\r\n    }\r\n    \r\n    //Calculates the number of each kind of Coin to use\r\n    // in order to make the specified amount of change.\r\n    public static Map&lt;Coin,Integer&gt; makeChange(int cents){\r\n    \tMap&lt;Coin,Integer&gt; results = new HashMap&lt;&gt;();\r\n    \tfor(Coin coin: Coin.values()){\r\n    \t\tint numCoins = cents/coin.getValue();\r\n    \t\tcents = cents % coin.getValue();\r\n    \t\t\r\n    \t\tresults.put(coin, numCoins);\r\n    \t}\r\n    \treturn results;\r\n    }\r\n\r\nHere is the `Coin` [enumeration][1] that goes along with the above code: \r\n\r\n    public enum Coin {\r\n    \tQUARTER(25, &quot;quarters&quot;), DIME(10, &quot;dimes&quot;), NICKEL(5, &quot;nickels&quot;), PENNY(1, &quot;pennies&quot;);\r\n    \t\r\n    \tprivate int value;\r\n    \tprivate String plural;\r\n    \t\r\n    \tprivate Coin(int val, String plur){\r\n    \t\tvalue = val;\r\n    \t\tplural = plur;\r\n    \t}\r\n    \t\r\n    \tpublic int getValue(){\r\n    \t\treturn value;\r\n    \t}\r\n    \t\r\n    \tpublic String getPlural(){\r\n    \t\treturn plural;\r\n    \t}\r\n    }\r\n\r\nIf you&#39;re not comfortable with enums then feel free to convert that into a traditional class and define some constants instead.\r\n\r\nSome things you still need to worry about are: \r\n\r\n 1. Testing your code thoroughly\r\n 2. Handling bad user input - negative numbers, strings instead of numbers, etc.\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/javaOO/enum.html","title":"Currency exchange rate java assignment","body":"<p>Here's some example code for you to look at. Note that I renamed your <code>Dollar</code> variable to <code>dollarStr</code> since variables shouldn't begin with a capital letter per <a href=\"http://www.oracle.com/technetwork/java/codeconventions-135099.html\" rel=\"nofollow noreferrer\">Java Naming Conventions</a>. I also want to point out that ajb is quite correct in that using <code>double</code> to represent currency is not a good idea. However, since this is a simple homework assignment I doubt that it's going to be an issue for you.</p>\n\n<pre><code>import java.util.HashMap;\nimport java.util.Map;\nimport java.util.Scanner;\n\n...\n\npublic static void main(String[] args){\n    //omitting extra code to shorten the answer\n    ...\n\n    }else if(conversion == 1) {\n        System.out.print(\"Enter the Yuan amount: \");\n        yuan = key.nextDouble();\n        dollar = yuan / exchangeRate;\n\n        System.out.printf(yuan + \" yuan is%8.3f dollars.\", dollar);\n        System.out.println();\n\n        dollarStr = String.valueOf(dollar);\n        System.out.println(dollarStr.substring(0, dollarStr.indexOf(\".\")) + \" dollars\");\n\n        //Get the \"cents\" part of the converted value\n        String centsStr = dollarStr.substring(dollarStr.indexOf(\".\"));\n        //Convert the value into a double\n        double cents = Double.parseDouble(centsStr);\n        //Multiplying by 100 so that something like 0.173 dollars \n        // becomes 17.3 cents\n        cents *= 100;\n\n        //Assuming you want to round to nearest penny, \n        //  but it's unclear from your question if this is correct.\n        cents = Math.round(cents); \n\n        //quick and dirty conversion of the rounded cents to an integer value\n        int change = (int) cents;\n\n        //For demonstration purposes, feel free to remove it.\n        System.out.println(cents+ \" cents\");\n\n        //Calculate how many of each kind of coin and display results.\n        Map&lt;Coin, Integer&gt; changeMap = makeChange(change);\n        for(Coin coin: changeMap.keySet()){\n            int numCoins = changeMap.get(coin);\n            System.out.print(numCoins +\" \"+ (numCoins != 1 ? coin.getPlural() : coin.name().toLowerCase())+\" \");\n        }\n        System.out.print(\"\\n\");\n    }\n\n}\n\n//Calculates the number of each kind of Coin to use\n// in order to make the specified amount of change.\npublic static Map&lt;Coin,Integer&gt; makeChange(int cents){\n    Map&lt;Coin,Integer&gt; results = new HashMap&lt;&gt;();\n    for(Coin coin: Coin.values()){\n        int numCoins = cents/coin.getValue();\n        cents = cents % coin.getValue();\n\n        results.put(coin, numCoins);\n    }\n    return results;\n}\n</code></pre>\n\n<p>Here is the <code>Coin</code> <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/enum.html\" rel=\"nofollow noreferrer\">enumeration</a> that goes along with the above code: </p>\n\n<pre><code>public enum Coin {\n    QUARTER(25, \"quarters\"), DIME(10, \"dimes\"), NICKEL(5, \"nickels\"), PENNY(1, \"pennies\");\n\n    private int value;\n    private String plural;\n\n    private Coin(int val, String plur){\n        value = val;\n        plural = plur;\n    }\n\n    public int getValue(){\n        return value;\n    }\n\n    public String getPlural(){\n        return plural;\n    }\n}\n</code></pre>\n\n<p>If you're not comfortable with enums then feel free to convert that into a traditional class and define some constants instead.</p>\n\n<p>Some things you still need to worry about are: </p>\n\n<ol>\n<li>Testing your code thoroughly</li>\n<li>Handling bad user input - negative numbers, strings instead of numbers, etc.</li>\n</ol>\n"}],"owner":{"account_id":12142689,"reputation":9,"user_id":8865952,"display_name":"Jonathan Soledad"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13069,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1693983655,"creation_date":1509510109,"question_id":47048192,"body_markdown":"Hello I am looking for help on my homework assignment!\r\nSo the prompt is as follows:\r\n\r\n&quot; Write a program that prompts the user to enter the exchange rate from currency in US dollars to Chinese RMB. Prompt the user to enter 0 to convert from US dollars to Chinese RMB and 1 to convert from Chinese RMB to US dollars. Prompt the user to enter the amount in US dollars or Chinese RMB to convert it to Chinese RMB or US dollars, respectively. When the user enters &quot;1&quot; (yuans to dollars) the program should extract the dollar amount before the decimal point, and the cents after the decimal amount using the indexOf() and substring() methods.Here are the sample runs, user&#39;s input is underlined:\r\n \r\nEnter the exchange rate from dollars to RMB: 6.81\r\nEnter 0 to convert dollars to RMB and 1 vice versa: 0\r\nEnter the dollar amount: 100\r\n$100.0 is 681.0 yuan.\r\nEnter the exchange rate from dollars to RMB: 6.81\r\nEnter 0 to convert dollars to RMB and 1 vice versa: 1\r\nEnter the yuan amount: 1000\r\n1000.0 yuan is $146.843 dollar\r\n 146 dollars\r\n 3 quarters\r\n 0 dimes\r\n 1 nickel\r\n 4 pennies&quot;\r\n\r\nSo i got my code to do all of the things before it separates the money into cent US cent values. This is where my problem comes in, I don&#39;t know how to work with the decimal values (or cents) to make it display how many of each are in the amount. \r\nThis is my code\r\n\r\n    import java.util.Scanner;\r\n    public class LabTask6 {\r\n    private static Scanner key = new Scanner(System.in);\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\t\r\n\t\tdouble exchangeRate = 0;\r\n\t\tint conversion;\r\n\t\tdouble dollar = 0;\r\n\t\tdouble yuan = 0;\r\n\t\tString Dollar = &quot; &quot;;\r\n\t\tint quarter = 0;\r\n\t\t\r\n\t\t\r\n\t\tSystem.out.print(&quot;Enter the exchange rate from dollars to RMB: &quot;);\r\n\t\texchangeRate = key.nextDouble();\r\n\t\t\r\n\t\tSystem.out.print(&quot;Enter 0 to convert dollars to RMB or &quot;\r\n\t\t\t\t+ &quot; 1 for RMB to dollars: &quot;);\r\n\t\tconversion = key.nextInt();\r\n\t\t\r\n\t\t\r\n\t\t//while(conversion == 0 || conversion == 1) {\r\n\t\tif(conversion == 0) {\r\n\t\t\tSystem.out.print(&quot;Enter the dollar amount: &quot;);\r\n\t\t\tdollar = key.nextDouble();\r\n\t\t\tyuan = dollar * exchangeRate;\r\n\t\t\t\r\n\t\t\tSystem.out.println(&quot;$&quot; + dollar + &quot; is &quot; + yuan + &quot; yuan.&quot;);\r\n\t\t\tSystem.out.println();\r\n\t\t\t\r\n\t\t}else if(conversion == 1) {\r\n\t\t\tSystem.out.print(&quot;Enter the Yuan amount: &quot;);\r\n\t\t\tyuan = key.nextDouble();\r\n\t\t\tdollar = yuan / exchangeRate;\r\n\t\t\t\r\n\t\t\tSystem.out.printf(yuan + &quot; yuan is%8.3f dollars.&quot;, dollar);\r\n\t\t\tSystem.out.println();\r\n\t\t\t\r\n\t\t\tDollar = dollar + &quot;&quot;;\r\n\t\t\tSystem.out.println(Dollar.substring(0, Dollar.indexOf(&quot;.&quot;)) + &quot; dollars&quot;);\r\n\t\t}\r\n\t\t\t\t\r\n\t}\r\n\r\n    }\r\n\r\nAs you can see, in the second if statement i tried to get the &quot;dollar&quot; amount by converting the number into a string and displaying only the things from index(0) to the &#39;.&#39; char. However that will not work for the rest of the required items like nickels, dimes, quarters, and pennies.\r\nMy initial idea was to make a while loop that prevented the decimals (cents) from reaching zero and incrementing the cent value, declared as variables, so long as they were divisible by the cent value i.e. number was 126.47, i would take the 47 and see if it was divisible by 25 then if the result was &gt;0 then it would add 1 to quarter, or quarter++. Two problems come up with this, one is that the end value would not be 47 cents, and also that i am trying to figure out how to isolate and manipulate those cent values in the first place.\r\nI know i wrote a freaking essay but i am completely stumped now, and i was trying to be as clear as possible, can anyone help? \r\n\r\nRecap, i want to print the dollar, quarter, nickel, dime, and penny amounts. but have no clue how.","title":"Currency exchange rate java assignment","body":"<p>Hello I am looking for help on my homework assignment!\nSo the prompt is as follows:</p>\n\n<p>\" Write a program that prompts the user to enter the exchange rate from currency in US dollars to Chinese RMB. Prompt the user to enter 0 to convert from US dollars to Chinese RMB and 1 to convert from Chinese RMB to US dollars. Prompt the user to enter the amount in US dollars or Chinese RMB to convert it to Chinese RMB or US dollars, respectively. When the user enters \"1\" (yuans to dollars) the program should extract the dollar amount before the decimal point, and the cents after the decimal amount using the indexOf() and substring() methods.Here are the sample runs, user's input is underlined:</p>\n\n<p>Enter the exchange rate from dollars to RMB: 6.81\nEnter 0 to convert dollars to RMB and 1 vice versa: 0\nEnter the dollar amount: 100\n$100.0 is 681.0 yuan.\nEnter the exchange rate from dollars to RMB: 6.81\nEnter 0 to convert dollars to RMB and 1 vice versa: 1\nEnter the yuan amount: 1000\n1000.0 yuan is $146.843 dollar\n 146 dollars\n 3 quarters\n 0 dimes\n 1 nickel\n 4 pennies\"</p>\n\n<p>So i got my code to do all of the things before it separates the money into cent US cent values. This is where my problem comes in, I don't know how to work with the decimal values (or cents) to make it display how many of each are in the amount. \nThis is my code</p>\n\n<pre><code>import java.util.Scanner;\npublic class LabTask6 {\nprivate static Scanner key = new Scanner(System.in);\npublic static void main(String[] args) {\n    // TODO Auto-generated method stub\n\n    double exchangeRate = 0;\n    int conversion;\n    double dollar = 0;\n    double yuan = 0;\n    String Dollar = \" \";\n    int quarter = 0;\n\n\n    System.out.print(\"Enter the exchange rate from dollars to RMB: \");\n    exchangeRate = key.nextDouble();\n\n    System.out.print(\"Enter 0 to convert dollars to RMB or \"\n            + \" 1 for RMB to dollars: \");\n    conversion = key.nextInt();\n\n\n    //while(conversion == 0 || conversion == 1) {\n    if(conversion == 0) {\n        System.out.print(\"Enter the dollar amount: \");\n        dollar = key.nextDouble();\n        yuan = dollar * exchangeRate;\n\n        System.out.println(\"$\" + dollar + \" is \" + yuan + \" yuan.\");\n        System.out.println();\n\n    }else if(conversion == 1) {\n        System.out.print(\"Enter the Yuan amount: \");\n        yuan = key.nextDouble();\n        dollar = yuan / exchangeRate;\n\n        System.out.printf(yuan + \" yuan is%8.3f dollars.\", dollar);\n        System.out.println();\n\n        Dollar = dollar + \"\";\n        System.out.println(Dollar.substring(0, Dollar.indexOf(\".\")) + \" dollars\");\n    }\n\n}\n\n}\n</code></pre>\n\n<p>As you can see, in the second if statement i tried to get the \"dollar\" amount by converting the number into a string and displaying only the things from index(0) to the '.' char. However that will not work for the rest of the required items like nickels, dimes, quarters, and pennies.\nMy initial idea was to make a while loop that prevented the decimals (cents) from reaching zero and incrementing the cent value, declared as variables, so long as they were divisible by the cent value i.e. number was 126.47, i would take the 47 and see if it was divisible by 25 then if the result was >0 then it would add 1 to quarter, or quarter++. Two problems come up with this, one is that the end value would not be 47 cents, and also that i am trying to figure out how to isolate and manipulate those cent values in the first place.\nI know i wrote a freaking essay but i am completely stumped now, and i was trying to be as clear as possible, can anyone help? </p>\n\n<p>Recap, i want to print the dollar, quarter, nickel, dime, and penny amounts. but have no clue how.</p>\n"},{"tags":["java","exception","tcp","socket.io","client-server"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1693989430,"post_id":77049640,"comment_id":135830822,"body_markdown":"1. Can you ping `172.13.0.1`? 2. Can you Telnet to `172.13.0.1 port 61616`? Hint: this is not a coding problem.","body":"1. Can you ping <code>172.13.0.1</code>? 2. Can you Telnet to <code>172.13.0.1 port 61616</code>? Hint: this is not a coding problem."},{"owner":{"account_id":4112149,"reputation":1,"user_id":21115947,"display_name":"user61815"},"score":0,"creation_date":1694003080,"post_id":77049640,"comment_id":135833541,"body_markdown":"yes, its reachable. I can connect to the port. I added dos.writeUTF(data + &quot;\\n&quot;); to my code and I think it has worked. have not seen this error since then, still observing.","body":"yes, its reachable. I can connect to the port. I added dos.writeUTF(data + &quot;\\n&quot;); to my code and I think it has worked. have not seen this error since then, still observing."}],"owner":{"account_id":4112149,"reputation":1,"user_id":21115947,"display_name":"user61815"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693983645,"creation_date":1693983645,"question_id":77049640,"body_markdown":"I&#39;m new to java and building a microservice in java that reads messages from ActiveMQ and send the message as a TCP packet to another server using socker programming. I&#39;m able to successfully read the message from ActiveMQ however after sending a few TCP packets I get &#39;Operation timed out&#39; exception.  Please let me know what can be done to resolve this?\r\n\r\n    App.java\r\n\r\n\r\n    package com.example;\r\n    import java.io.File;\r\n    import java.io.FileWriter;\r\n    import java.io.BufferedWriter;\r\n    import java.io.IOException;\r\n    import javax.jms.*;\r\n    import java.io.*;\r\n    import java.net.Socket;\r\n    import org.apache.activemq.ActiveMQConnectionFactory;\r\n\r\n    public class App\r\n    {\r\n    private static String url = &quot;tcp://172.13.0.1:61616&quot;;\r\n    private static String topicName = &quot;topic/CNAAlarms&quot;;\r\n    public static void main(String[] args)\r\n    {\r\n        try {\r\n            connectToActiveMQ(url, topicName);\r\n        }catch(Exception e){\r\n            System.out.println(&quot;for connectToActiveMQ == &quot; + e.getMessage());\r\n            System.out.println(&quot;------------&quot;);\r\n        }\r\n    }\r\n    public static void connectToActiveMQ(String url, String topicName) throws JMSException {\r\n        System.out.println(&quot;inside connectToActiveMQ&quot;);\r\n        System.out.println(&quot;url = &quot; + url);\r\n        System.out.println(&quot;topicName = &quot; + topicName);\r\n        ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory();\r\n        connectionFactory.setUserName(&quot;abc@abc&quot;);\r\n        connectionFactory.setPassword(&quot;abc&quot;);\r\n        connectionFactory.setClientID(&quot;testingClient&quot;);\r\n        connectionFactory.setBrokerURL(url);\r\n        Connection connection = connectionFactory.createConnection();\r\n        System.out.println(&quot;connected&quot;);\r\n        connection.start(); \r\n        Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);\r\n        System.out.println(&quot;session created&quot;);\r\n        Topic topic = session.createTopic(topicName);\r\n        TopicSubscriber durablSubscriber = session.createDurableSubscriber(topic, topicName);\r\n        System.out.println(&quot;durable subscriber created&quot;);\r\n        MessageListener listener = new Listener();\r\n        durablSubscriber.setMessageListener(listener);\r\n      \r\n    }\r\n    public static void sendDataToTCPServer(String data){\r\n       // initialize socket and output streams\r\n        try {\r\n            System.out.println(&quot;Inside SendDataToTCPServer&quot;);\r\n            Socket s = new Socket(&quot;abc123d.it.internal&quot;, 11201);\r\n            DataOutputStream dos = new DataOutputStream(s.getOutputStream());\r\n            dos.writeUTF(data);\r\n            dos.close();\r\n            s.close();\r\n    \r\n        }catch(IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n    }\r\n\r\n    Listener.java\r\n\r\n\r\n    package com.example;\r\n    import javax.jms.*;\r\n    public class Listener implements MessageListener{\r\n    public void onMessage(Message message){\r\n        try{\r\n            if (message instanceof TextMessage) {\r\n                TextMessage textMessage = (TextMessage) message;\r\n                String text = textMessage.getText();\r\n                System.out.println(&quot;Received text: &quot; + text);\r\n                App.sendDataToTCPServer(&quot;activemq-bridge :&quot; + text + &quot;\\n&quot;);\r\n    \r\n            } else {\r\n                System.out.println(&quot;Received: &quot; + message);\r\n                App.sendDataToTCPServer(&quot;activemq-bridge :&quot; +message + &quot;\\n&quot;);\r\n            }\r\n        }catch(Exception e){\r\n            System.out.println(&quot;for onMessage Listener: &quot; + e.getMessage());\r\n        }\r\n    }\r\n    }\r\n\r\n\r\n\r\n    Output:\r\n\r\n    Received text: {&quot;userName&quot;:null,&quot;enterpriseName&quot;:&quot;ABC&quot;}\r\n    Inside SendDataToTCPServer\r\n    java.net.ConnectException: Operation timed out\r\n        at java.base/sun.nio.ch.Net.connect0(Native Method)\r\n        at java.base/sun.nio.ch.Net.connect(Net.java:579)\r\n        at java.base/sun.nio.ch.Net.connect(Net.java:568)\r\n        at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:585)\r\n        at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\r\n        at java.base/java.net.Socket.connect(Socket.java:633)\r\n        at java.base/java.net.Socket.connect(Socket.java:583)\r\n        at java.base/java.net.Socket.&lt;init&gt;(Socket.java:507)\r\n        at java.base/java.net.Socket.&lt;init&gt;(Socket.java:287)\r\n        at com.example.App.sendDataToTCPServer(App.java:98)\r\n        at com.example.Listener.onMessage(Listener.java:12)\r\n        at    org.apache.activemq.ActiveMQMessageConsumer.dispatch(ActiveMQMessageConsumer.java:1321)\r\n        at org.apache.activemq.ActiveMQSessionExecutor.dispatch(ActiveMQSessionExecutor.java:131)\r\n        at org.apache.activemq.ActiveMQSessionExecutor.iterate(ActiveMQSessionExecutor.java:202)\r\n        at org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:129)\r\n        at org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:47)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n        at java.base/java.lang.Thread.run(Thread.java:833)\r\n\r\n","title":"Java Socket programming java.net.ConnectException: Operation timed out","body":"<p>I'm new to java and building a microservice in java that reads messages from ActiveMQ and send the message as a TCP packet to another server using socker programming. I'm able to successfully read the message from ActiveMQ however after sending a few TCP packets I get 'Operation timed out' exception.  Please let me know what can be done to resolve this?</p>\n<pre><code>App.java\n\n\npackage com.example;\nimport java.io.File;\nimport java.io.FileWriter;\nimport java.io.BufferedWriter;\nimport java.io.IOException;\nimport javax.jms.*;\nimport java.io.*;\nimport java.net.Socket;\nimport org.apache.activemq.ActiveMQConnectionFactory;\n\npublic class App\n{\nprivate static String url = &quot;tcp://172.13.0.1:61616&quot;;\nprivate static String topicName = &quot;topic/CNAAlarms&quot;;\npublic static void main(String[] args)\n{\n    try {\n        connectToActiveMQ(url, topicName);\n    }catch(Exception e){\n        System.out.println(&quot;for connectToActiveMQ == &quot; + e.getMessage());\n        System.out.println(&quot;------------&quot;);\n    }\n}\npublic static void connectToActiveMQ(String url, String topicName) throws JMSException {\n    System.out.println(&quot;inside connectToActiveMQ&quot;);\n    System.out.println(&quot;url = &quot; + url);\n    System.out.println(&quot;topicName = &quot; + topicName);\n    ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory();\n    connectionFactory.setUserName(&quot;abc@abc&quot;);\n    connectionFactory.setPassword(&quot;abc&quot;);\n    connectionFactory.setClientID(&quot;testingClient&quot;);\n    connectionFactory.setBrokerURL(url);\n    Connection connection = connectionFactory.createConnection();\n    System.out.println(&quot;connected&quot;);\n    connection.start(); \n    Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);\n    System.out.println(&quot;session created&quot;);\n    Topic topic = session.createTopic(topicName);\n    TopicSubscriber durablSubscriber = session.createDurableSubscriber(topic, topicName);\n    System.out.println(&quot;durable subscriber created&quot;);\n    MessageListener listener = new Listener();\n    durablSubscriber.setMessageListener(listener);\n  \n}\npublic static void sendDataToTCPServer(String data){\n   // initialize socket and output streams\n    try {\n        System.out.println(&quot;Inside SendDataToTCPServer&quot;);\n        Socket s = new Socket(&quot;abc123d.it.internal&quot;, 11201);\n        DataOutputStream dos = new DataOutputStream(s.getOutputStream());\n        dos.writeUTF(data);\n        dos.close();\n        s.close();\n\n    }catch(IOException e) {\n        e.printStackTrace();\n    }\n}\n}\n\nListener.java\n\n\npackage com.example;\nimport javax.jms.*;\npublic class Listener implements MessageListener{\npublic void onMessage(Message message){\n    try{\n        if (message instanceof TextMessage) {\n            TextMessage textMessage = (TextMessage) message;\n            String text = textMessage.getText();\n            System.out.println(&quot;Received text: &quot; + text);\n            App.sendDataToTCPServer(&quot;activemq-bridge :&quot; + text + &quot;\\n&quot;);\n\n        } else {\n            System.out.println(&quot;Received: &quot; + message);\n            App.sendDataToTCPServer(&quot;activemq-bridge :&quot; +message + &quot;\\n&quot;);\n        }\n    }catch(Exception e){\n        System.out.println(&quot;for onMessage Listener: &quot; + e.getMessage());\n    }\n}\n}\n\n\n\nOutput:\n\nReceived text: {&quot;userName&quot;:null,&quot;enterpriseName&quot;:&quot;ABC&quot;}\nInside SendDataToTCPServer\njava.net.ConnectException: Operation timed out\n    at java.base/sun.nio.ch.Net.connect0(Native Method)\n    at java.base/sun.nio.ch.Net.connect(Net.java:579)\n    at java.base/sun.nio.ch.Net.connect(Net.java:568)\n    at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:585)\n    at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\n    at java.base/java.net.Socket.connect(Socket.java:633)\n    at java.base/java.net.Socket.connect(Socket.java:583)\n    at java.base/java.net.Socket.&lt;init&gt;(Socket.java:507)\n    at java.base/java.net.Socket.&lt;init&gt;(Socket.java:287)\n    at com.example.App.sendDataToTCPServer(App.java:98)\n    at com.example.Listener.onMessage(Listener.java:12)\n    at    org.apache.activemq.ActiveMQMessageConsumer.dispatch(ActiveMQMessageConsumer.java:1321)\n    at org.apache.activemq.ActiveMQSessionExecutor.dispatch(ActiveMQSessionExecutor.java:131)\n    at org.apache.activemq.ActiveMQSessionExecutor.iterate(ActiveMQSessionExecutor.java:202)\n    at org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:129)\n    at org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:47)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n</code></pre>\n"},{"tags":["java","javafx","libraries","compatibility"],"owner":{"account_id":202644,"reputation":859,"user_id":449845,"accept_rate":61,"display_name":"schmimona"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693983634,"creation_date":1693983634,"question_id":77049638,"body_markdown":"I trying to update the libraries in a JavaFX project. Unfortunately after updating them, one functionality - creating a DOC file - doesn&#39;t work anymore.\r\n\r\nThe code goes into this line of code :\r\n\r\n    resultDocument = new XWPFDocument();\r\n\r\nand doesn&#39;t come out. There is no exception and it doesn&#39;t freeze.\r\n\r\nI think there is a compatibility issue with the libraries. This are the libraries that I am using:\r\n\r\n- commons-codec-1.16.0 \r\n- commons-compress-1.23.0 \r\n- commons-io-2.13.0\r\n- commons-lang3-3.13.0 \r\n- commons-logging-1.2 \r\n- controlsfx-8.40.16\r\n- dom4j-2.1.4 \r\n- gembox-spreadsheet \r\n- geronimo-stax-api_1.0_spec-1.0\r\n- guava-32.1.2-jre \r\n- jsoup-1.16.1\r\n- jsr305-3.0.2 \r\n- log4j-1.2-api-2.20.0\r\n- log4j-api-2.20.0 \r\n- log4j-core-2.20.0 \r\n- poi-5.2.3 \r\n- poi-ooxml-5.2.3\r\n- poi-ooxml-full-5.2.3 \r\n- poi-ooxml-schemas-4.1.2 \r\n- saxon-9.1.0.8\r\n- saxon-dom-9.1.0.8 \r\n- stax-api-1.0.1 \r\n- xbean \r\n- xbean_xpath \r\n- xml-apis-1.4.1\r\n- xmlbeans-5.1.1 \r\n- zip4j-2.11.5\r\n\r\nI am using jre1.8.0_361 fr this project.\r\nDo you have any ideas?","title":"Creating a new XWPFDocument after updating libraries does not work","body":"<p>I trying to update the libraries in a JavaFX project. Unfortunately after updating them, one functionality - creating a DOC file - doesn't work anymore.</p>\n<p>The code goes into this line of code :</p>\n<pre><code>resultDocument = new XWPFDocument();\n</code></pre>\n<p>and doesn't come out. There is no exception and it doesn't freeze.</p>\n<p>I think there is a compatibility issue with the libraries. This are the libraries that I am using:</p>\n<ul>\n<li>commons-codec-1.16.0</li>\n<li>commons-compress-1.23.0</li>\n<li>commons-io-2.13.0</li>\n<li>commons-lang3-3.13.0</li>\n<li>commons-logging-1.2</li>\n<li>controlsfx-8.40.16</li>\n<li>dom4j-2.1.4</li>\n<li>gembox-spreadsheet</li>\n<li>geronimo-stax-api_1.0_spec-1.0</li>\n<li>guava-32.1.2-jre</li>\n<li>jsoup-1.16.1</li>\n<li>jsr305-3.0.2</li>\n<li>log4j-1.2-api-2.20.0</li>\n<li>log4j-api-2.20.0</li>\n<li>log4j-core-2.20.0</li>\n<li>poi-5.2.3</li>\n<li>poi-ooxml-5.2.3</li>\n<li>poi-ooxml-full-5.2.3</li>\n<li>poi-ooxml-schemas-4.1.2</li>\n<li>saxon-9.1.0.8</li>\n<li>saxon-dom-9.1.0.8</li>\n<li>stax-api-1.0.1</li>\n<li>xbean</li>\n<li>xbean_xpath</li>\n<li>xml-apis-1.4.1</li>\n<li>xmlbeans-5.1.1</li>\n<li>zip4j-2.11.5</li>\n</ul>\n<p>I am using jre1.8.0_361 fr this project.\nDo you have any ideas?</p>\n"},{"tags":["java","python","key"],"answers":[{"tags":[],"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693960349,"creation_date":1693960349,"answer_id":77048398,"question_id":77046197,"body_markdown":"**That format is not a point** and trying to use or decode it as a point won&#39;t work. Also, the first byte of an X9-compressed point, what you call &#39;signbyte&#39;, for a point with y-coordinate even, is 0x02 not 0x03. And the language you posted isn&#39;t Java, although it is apparently calling Java.\r\n\r\nThere are two approaches:\r\n\r\n1. use the format you&#39;ve built, which is **actually the ASN.1 structure SubjectPublicKeyInfo** [defined in X.509/PKIX](https://www.rfc-editor.org/rfc/rfc5280#section-4.1.2.7) supplemented [for ECC by RFC5480](https://www.rfc-editor.org/rfc/rfc5480#section-2):\r\n```none\r\n$ xxd -r -p &lt;&lt;END | openssl asn1parse -inform der -i -dump\r\n3039301306072a8648ce3d020106082a8648ce3d030107032200\r\n02d97d3b7c269bfa720f01605be5e46585d39f474064ae1c7b4e03377066d1df58\r\nEND\r\n    0:d=0  hl=2 l=  57 cons: SEQUENCE\r\n    2:d=1  hl=2 l=  19 cons:  SEQUENCE\r\n    4:d=2  hl=2 l=   7 prim:   OBJECT            :id-ecPublicKey\r\n   13:d=2  hl=2 l=   8 prim:   OBJECT            :prime256v1\r\n   23:d=1  hl=2 l=  34 prim:  BIT STRING\r\n      0000 - 00 02 d9 7d 3b 7c 26 9b-fa 72 0f 01 60 5b e5 e4   ...};|&amp;..r..`[..\r\n      0010 - 65 85 d3 9f 47 40 64 ae-1c 7b 4e 03 37 70 66 d1   e...G@d..{N.7pf.\r\n      0020 - df 58                                             .X\r\n# observe that this contains an AlgorithmIdentifier for (X9-style) ECC with the desired curve\r\n# and a BIT STRING _containing_ (after the first byte 0x00 which is actually part of \r\n# the ASN.1 encoding but OpenSSL displays as part of the value) the point 0x02 + 32 bytes\r\n```\r\n\r\nThis is the format used by (standard) Java crypto for publickey encoding, as well as by OpenSSL and things using OpenSSL like pyca and many others, and (thus) can be processed as-is by a suitable JCA `KeyFactory`:\r\n```Java\r\n        byte[] spki = unhex(&quot;3039301306072a8648ce3d020106082a8648ce3d030107032200&quot;\r\n            + &quot;02d97d3b7c269bfa720f01605be5e46585d39f474064ae1c7b4e03377066d1df58&quot;);\r\n        KeyFactory kf1 = KeyFactory.getInstance(&quot;EC&quot;,&quot;BC&quot;);\r\n        PublicKey pub1 = kf1.generatePublic(new X509EncodedKeySpec(spki));\r\n```\r\n\r\n2. use the approach you posted, but pass it ONLY the point NOT the whole structure (i.e. WITHOUT the &#39;fixed prefix&#39;). Also you don&#39;t need to convert the spec:\r\n```Java\r\nimport org.bouncycastle.jce.ECNamedCurveTable;\r\nimport org.bouncycastle.jce.spec.ECNamedCurveParameterSpec;\r\nimport org.bouncycastle.jce.spec.ECPublicKeySpec;\r\nimport org.bouncycastle.math.ec.ECPoint; // NOT the JCA one!\r\n...\r\n        byte[] raw = unhex(&quot;02d97d3b7c269bfa720f01605be5e46585d39f474064ae1c7b4e03377066d1df58&quot;);\r\n        ECNamedCurveParameterSpec ecSpec = ECNamedCurveTable.getParameterSpec (&quot;prime256v1&quot;);\r\n        ECPoint point = ecSpec.getCurve().decodePoint (raw);\r\n        KeyFactory kf2 = KeyFactory.getInstance(&quot;EC&quot;, &quot;BC&quot;);\r\n        PublicKey pub2 = kf2.generatePublic(new ECPublicKeySpec(point, ecSpec));\r\n```\r\n","title":"Read EC Public Key, works in python, error in java","body":"<p><strong>That format is not a point</strong> and trying to use or decode it as a point won't work. Also, the first byte of an X9-compressed point, what you call 'signbyte', for a point with y-coordinate even, is 0x02 not 0x03. And the language you posted isn't Java, although it is apparently calling Java.</p>\n<p>There are two approaches:</p>\n<ol>\n<li>use the format you've built, which is <strong>actually the ASN.1 structure SubjectPublicKeyInfo</strong> <a href=\"https://www.rfc-editor.org/rfc/rfc5280#section-4.1.2.7\" rel=\"nofollow noreferrer\">defined in X.509/PKIX</a> supplemented <a href=\"https://www.rfc-editor.org/rfc/rfc5480#section-2\" rel=\"nofollow noreferrer\">for ECC by RFC5480</a>:</li>\n</ol>\n<pre class=\"lang-none prettyprint-override\"><code>$ xxd -r -p &lt;&lt;END | openssl asn1parse -inform der -i -dump\n3039301306072a8648ce3d020106082a8648ce3d030107032200\n02d97d3b7c269bfa720f01605be5e46585d39f474064ae1c7b4e03377066d1df58\nEND\n    0:d=0  hl=2 l=  57 cons: SEQUENCE\n    2:d=1  hl=2 l=  19 cons:  SEQUENCE\n    4:d=2  hl=2 l=   7 prim:   OBJECT            :id-ecPublicKey\n   13:d=2  hl=2 l=   8 prim:   OBJECT            :prime256v1\n   23:d=1  hl=2 l=  34 prim:  BIT STRING\n      0000 - 00 02 d9 7d 3b 7c 26 9b-fa 72 0f 01 60 5b e5 e4   ...};|&amp;..r..`[..\n      0010 - 65 85 d3 9f 47 40 64 ae-1c 7b 4e 03 37 70 66 d1   e...G@d..{N.7pf.\n      0020 - df 58                                             .X\n# observe that this contains an AlgorithmIdentifier for (X9-style) ECC with the desired curve\n# and a BIT STRING _containing_ (after the first byte 0x00 which is actually part of \n# the ASN.1 encoding but OpenSSL displays as part of the value) the point 0x02 + 32 bytes\n</code></pre>\n<p>This is the format used by (standard) Java crypto for publickey encoding, as well as by OpenSSL and things using OpenSSL like pyca and many others, and (thus) can be processed as-is by a suitable JCA <code>KeyFactory</code>:</p>\n<pre><code>        byte[] spki = unhex(&quot;3039301306072a8648ce3d020106082a8648ce3d030107032200&quot;\n            + &quot;02d97d3b7c269bfa720f01605be5e46585d39f474064ae1c7b4e03377066d1df58&quot;);\n        KeyFactory kf1 = KeyFactory.getInstance(&quot;EC&quot;,&quot;BC&quot;);\n        PublicKey pub1 = kf1.generatePublic(new X509EncodedKeySpec(spki));\n</code></pre>\n<ol start=\"2\">\n<li>use the approach you posted, but pass it ONLY the point NOT the whole structure (i.e. WITHOUT the 'fixed prefix'). Also you don't need to convert the spec:</li>\n</ol>\n<pre><code>import org.bouncycastle.jce.ECNamedCurveTable;\nimport org.bouncycastle.jce.spec.ECNamedCurveParameterSpec;\nimport org.bouncycastle.jce.spec.ECPublicKeySpec;\nimport org.bouncycastle.math.ec.ECPoint; // NOT the JCA one!\n...\n        byte[] raw = unhex(&quot;02d97d3b7c269bfa720f01605be5e46585d39f474064ae1c7b4e03377066d1df58&quot;);\n        ECNamedCurveParameterSpec ecSpec = ECNamedCurveTable.getParameterSpec (&quot;prime256v1&quot;);\n        ECPoint point = ecSpec.getCurve().decodePoint (raw);\n        KeyFactory kf2 = KeyFactory.getInstance(&quot;EC&quot;, &quot;BC&quot;);\n        PublicKey pub2 = kf2.generatePublic(new ECPublicKeySpec(point, ecSpec));\n</code></pre>\n"}],"owner":{"account_id":5143936,"reputation":3502,"user_id":4120431,"display_name":"N Dorigatti"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":157,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77048398,"answer_count":1,"score":0,"last_activity_date":1693983512,"creation_date":1693924802,"question_id":77046197,"body_markdown":"I have this issue moving some code from python to java.\r\nThe following public key:\r\n&gt; MDkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDIgAC2X07fCab+nIPAWBb5eRlhdOfR0Bkrhx7TgM3cGbR31g=\r\n\r\ncan be succesfully read from this python code:\r\n``` lang-py\r\nkey = bytearray.fromhex(\r\n   &quot;3039301306072a8648ce3d020106082a8648ce3d030107032200&quot;\r\n) + bytearray([0x03]) + bytearray.fromhex(&quot;d97d3b7c269bfa720f01605be5e46585d39f474064ae1c7b4e03377066d1df58&quot;)\r\ndevice_public_key = load_der_public_key(\r\n                key\r\n            )\r\n```\r\nprinting out device_public_key I see:\r\n&gt; &lt;cryptography.hazmat.backends.openssl.ec._EllipticCurvePublicKey object at 0x102372cd0&gt;\r\n\r\nWhen trying to do the same in Java, I fail in every possibile try:\r\n``` lang-kt\r\n    fun loadKey() {\r\n       \r\n        val key  = Hex.decode(&quot;3039301306072a8648ce3d020106082a8648ce3d03010703220003d97d3b7c269bfa720f01605be5e46585d39f474064ae1c7b4e03377066d1df58&quot;)\r\n        try {\r\n            read(key)\r\n        } catch (e: Exception) {\r\n            println(&quot;Failed to load for sign $sign: $e&quot;)\r\n        }\r\n    }\r\n\r\n    private fun read(publicKey: ByteArray) {\r\n        val spec: ECNamedCurveParameterSpec = ECNamedCurveTable.getParameterSpec(&quot;prime256v1&quot;)\r\n        val kf = KeyFactory.getInstance(&quot;ECDSA&quot;, BouncyCastleProvider())\r\n        val params = ECNamedCurveSpec(&quot;prime256v1&quot;, spec.curve, spec.g, spec.n)\r\n        val point: ECPoint = ECPointUtil.decodePoint(params.curve, publicKey)\r\n        val pubKeySpec = ECPublicKeySpec(point, params)\r\n        val t =  kf.generatePublic(pubKeySpec) as ECPublicKey\r\n        println(t)\r\n    }\r\n\r\n```\r\n\r\nThe exception i get is:\r\n&gt; java.lang.IllegalArgumentException: Invalid point encoding 0x30\r\n\r\nI can&#39;t undestand what&#39;s wrong since the key is correct (works in python).\r\nI tryed to Byte64 encode/decode but it always fail.\r\n\r\nThis post is linked to my previous question (next step):\r\nhttps://security.stackexchange.com/questions/272048/parsing-and-loading-ec-private-key-curve-secp256r1\r\n\r\nThe public key is different, the one i&#39;m trying to load is defined as a concatenation of a fixed header, a signbyte and the variable I receive:\r\n&gt;Compressed ephemeral public key used for ECDH w/ reader private key, 32 byte X coordinate. Note: when uncompressing, the Y coordinate is always even\r\n\r\nEDIT: Thanks to @dave_thompson_085 for the explanation!\r\nIndeed the code is not Java but Kotlin (JVM compatible), I forgot to mention it (code runs on Android).\r\nMy solution is similar to 2nd option, but the curve is obtained from the private key, and the compressed key (as explained) is only the sign byte (0x02) plus the body (as I understood, the body is the xCoordinate of the point).\r\n\r\n``` lang-kt\r\nfun load_compressed_public_key(privateKey: ECPrivateKey, compressedKey: ByteArray): ECPublicKey {\r\n            val decodePoint = org.bouncycastle.jce.ECPointUtil.decodePoint(privateKey.params.curve, compressedKey)\r\n            val spec = ECNamedCurveTable.getParameterSpec(&quot;secp256r1&quot;)\r\n            val kf = java.security.KeyFactory.getInstance(&quot;ECDSA&quot;, BouncyCastleProvider())\r\n            val params = ECNamedCurveSpec(&quot;secp256r1&quot;, spec.curve, spec.g, spec.n)\r\n            val pubKeySpec = java.security.spec.ECPublicKeySpec(decodePoint, params)\r\n            val uncompressed = kf.generatePublic(pubKeySpec) as ECPublicKey\r\n            return uncompressed\r\n        }\r\n```\r\n\r\nI also tried to use approach 1 (was my first attempt) but I failed just because I did not add BouncyCastleProvider when obtaining the KeyFactory! I did a quick test, with &quot;BC&quot; works, without fails with &quot;Invalid EC Key&quot;\r\nBelow the working test (in kotlin):\r\n\r\n``` lang-kt\r\n    @Test\r\n    fun `test load ephemeral x509`(){\r\n        val spki: ByteArray = Hex.decode(\r\n            &quot;3039301306072a8648ce3d020106082a8648ce3d030107032200&quot;\r\n                    + &quot;02d97d3b7c269bfa720f01605be5e46585d39f474064ae1c7b4e03377066d1df58&quot;\r\n        )\r\n        val kf1: KeyFactory = KeyFactory.getInstance(&quot;EC&quot;, BouncyCastleProvider())\r\n        val pub1: PublicKey = kf1.generatePublic(X509EncodedKeySpec(spki))\r\n        println(pub1)\r\n    }\r\n```\r\n\r\n\r\nThanks again for the help and for the explanation, I appreciate it instead of raw code!","title":"Read EC Public Key, works in python, error in java","body":"<p>I have this issue moving some code from python to java.\nThe following public key:</p>\n<blockquote>\n<p>MDkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDIgAC2X07fCab+nIPAWBb5eRlhdOfR0Bkrhx7TgM3cGbR31g=</p>\n</blockquote>\n<p>can be succesfully read from this python code:</p>\n<pre class=\"lang-py prettyprint-override\"><code>key = bytearray.fromhex(\n   &quot;3039301306072a8648ce3d020106082a8648ce3d030107032200&quot;\n) + bytearray([0x03]) + bytearray.fromhex(&quot;d97d3b7c269bfa720f01605be5e46585d39f474064ae1c7b4e03377066d1df58&quot;)\ndevice_public_key = load_der_public_key(\n                key\n            )\n</code></pre>\n<p>printing out device_public_key I see:</p>\n<blockquote>\n<p>&lt;cryptography.hazmat.backends.openssl.ec._EllipticCurvePublicKey object at 0x102372cd0&gt;</p>\n</blockquote>\n<p>When trying to do the same in Java, I fail in every possibile try:</p>\n<pre class=\"lang-kt prettyprint-override\"><code>    fun loadKey() {\n       \n        val key  = Hex.decode(&quot;3039301306072a8648ce3d020106082a8648ce3d03010703220003d97d3b7c269bfa720f01605be5e46585d39f474064ae1c7b4e03377066d1df58&quot;)\n        try {\n            read(key)\n        } catch (e: Exception) {\n            println(&quot;Failed to load for sign $sign: $e&quot;)\n        }\n    }\n\n    private fun read(publicKey: ByteArray) {\n        val spec: ECNamedCurveParameterSpec = ECNamedCurveTable.getParameterSpec(&quot;prime256v1&quot;)\n        val kf = KeyFactory.getInstance(&quot;ECDSA&quot;, BouncyCastleProvider())\n        val params = ECNamedCurveSpec(&quot;prime256v1&quot;, spec.curve, spec.g, spec.n)\n        val point: ECPoint = ECPointUtil.decodePoint(params.curve, publicKey)\n        val pubKeySpec = ECPublicKeySpec(point, params)\n        val t =  kf.generatePublic(pubKeySpec) as ECPublicKey\n        println(t)\n    }\n\n</code></pre>\n<p>The exception i get is:</p>\n<blockquote>\n<p>java.lang.IllegalArgumentException: Invalid point encoding 0x30</p>\n</blockquote>\n<p>I can't undestand what's wrong since the key is correct (works in python).\nI tryed to Byte64 encode/decode but it always fail.</p>\n<p>This post is linked to my previous question (next step):\n<a href=\"https://security.stackexchange.com/questions/272048/parsing-and-loading-ec-private-key-curve-secp256r1\">https://security.stackexchange.com/questions/272048/parsing-and-loading-ec-private-key-curve-secp256r1</a></p>\n<p>The public key is different, the one i'm trying to load is defined as a concatenation of a fixed header, a signbyte and the variable I receive:</p>\n<blockquote>\n<p>Compressed ephemeral public key used for ECDH w/ reader private key, 32 byte X coordinate. Note: when uncompressing, the Y coordinate is always even</p>\n</blockquote>\n<p>EDIT: Thanks to @dave_thompson_085 for the explanation!\nIndeed the code is not Java but Kotlin (JVM compatible), I forgot to mention it (code runs on Android).\nMy solution is similar to 2nd option, but the curve is obtained from the private key, and the compressed key (as explained) is only the sign byte (0x02) plus the body (as I understood, the body is the xCoordinate of the point).</p>\n<pre class=\"lang-kt prettyprint-override\"><code>fun load_compressed_public_key(privateKey: ECPrivateKey, compressedKey: ByteArray): ECPublicKey {\n            val decodePoint = org.bouncycastle.jce.ECPointUtil.decodePoint(privateKey.params.curve, compressedKey)\n            val spec = ECNamedCurveTable.getParameterSpec(&quot;secp256r1&quot;)\n            val kf = java.security.KeyFactory.getInstance(&quot;ECDSA&quot;, BouncyCastleProvider())\n            val params = ECNamedCurveSpec(&quot;secp256r1&quot;, spec.curve, spec.g, spec.n)\n            val pubKeySpec = java.security.spec.ECPublicKeySpec(decodePoint, params)\n            val uncompressed = kf.generatePublic(pubKeySpec) as ECPublicKey\n            return uncompressed\n        }\n</code></pre>\n<p>I also tried to use approach 1 (was my first attempt) but I failed just because I did not add BouncyCastleProvider when obtaining the KeyFactory! I did a quick test, with &quot;BC&quot; works, without fails with &quot;Invalid EC Key&quot;\nBelow the working test (in kotlin):</p>\n<pre class=\"lang-kt prettyprint-override\"><code>    @Test\n    fun `test load ephemeral x509`(){\n        val spki: ByteArray = Hex.decode(\n            &quot;3039301306072a8648ce3d020106082a8648ce3d030107032200&quot;\n                    + &quot;02d97d3b7c269bfa720f01605be5e46585d39f474064ae1c7b4e03377066d1df58&quot;\n        )\n        val kf1: KeyFactory = KeyFactory.getInstance(&quot;EC&quot;, BouncyCastleProvider())\n        val pub1: PublicKey = kf1.generatePublic(X509EncodedKeySpec(spki))\n        println(pub1)\n    }\n</code></pre>\n<p>Thanks again for the help and for the explanation, I appreciate it instead of raw code!</p>\n"},{"tags":["java","matlab","hdf5"],"comments":[{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":0,"creation_date":1687296879,"post_id":76518422,"comment_id":134916260,"body_markdown":"You could try using JMatio.","body":"You could try using JMatio."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1687298814,"post_id":76518422,"comment_id":134916525,"body_markdown":"What have you tried? You should share your code and ask for an specific example. Note that recommendation of libraries is off topic in Stackoverlow.","body":"What have you tried? You should share your code and ask for an specific example. Note that recommendation of libraries is off topic in Stackoverlow."},{"owner":{"account_id":6377538,"reputation":829,"user_id":4948006,"accept_rate":100,"display_name":"A M"},"score":0,"creation_date":1687331367,"post_id":76518422,"comment_id":134919872,"body_markdown":"@AliasCartellano JMatIO does not support .mat v7.3 files. I tried to use it, without success.","body":"@AliasCartellano JMatIO does not support .mat v7.3 files. I tried to use it, without success."},{"owner":{"account_id":5914240,"reputation":1974,"user_id":4653517,"display_name":"James Mudd"},"score":1,"creation_date":1688121507,"post_id":76518422,"comment_id":135034622,"body_markdown":"Hi I am the jhdf developer and would be happy to help. Im not exactly clear on the structure of your file and what part you want to open. Maybe try opening a example file in HDFView, and then add the tree to the question, or open an issue on github. Seeing an example file would really help. I should a an example to the docs but try looking at `Dataset#getData(long[] sliceOffset, int[] sliceDimensions)` that reads part of a dataset.","body":"Hi I am the jhdf developer and would be happy to help. Im not exactly clear on the structure of your file and what part you want to open. Maybe try opening a example file in HDFView, and then add the tree to the question, or open an issue on github. Seeing an example file would really help. I should a an example to the docs but try looking at <code>Dataset#getData(long[] sliceOffset, int[] sliceDimensions)</code> that reads part of a dataset."},{"owner":{"account_id":6377538,"reputation":829,"user_id":4948006,"accept_rate":100,"display_name":"A M"},"score":0,"creation_date":1688678500,"post_id":76518422,"comment_id":135110091,"body_markdown":"Hi @JamesMudd, I edited the question, adding more info about the file structure and the code.","body":"Hi @JamesMudd, I edited the question, adding more info about the file structure and the code."},{"owner":{"account_id":6377538,"reputation":829,"user_id":4948006,"accept_rate":100,"display_name":"A M"},"score":0,"creation_date":1689842407,"post_id":76518422,"comment_id":135271516,"body_markdown":"Hi @JamesMudd, is there a better way to code what I implemented, with JHDF?","body":"Hi @JamesMudd, is there a better way to code what I implemented, with JHDF?"},{"owner":{"account_id":5914240,"reputation":1974,"user_id":4653517,"display_name":"James Mudd"},"score":0,"creation_date":1689858582,"post_id":76518422,"comment_id":135274912,"body_markdown":"As you need to search through the `Date` dataset to find the required points you need to load all the data in that case. If the `Duration` dataset is significantly larger (I suspect its not in this case) then you could load only the data you want there but that wouldn&#39;t be a significant improvement here.","body":"As you need to search through the <code>Date</code> dataset to find the required points you need to load all the data in that case. If the <code>Duration</code> dataset is significantly larger (I suspect its not in this case) then you could load only the data you want there but that wouldn&#39;t be a significant improvement here."}],"answers":[{"tags":[],"owner":{"account_id":13741585,"reputation":701,"user_id":9927941,"display_name":"John BG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687561496,"creation_date":1687372045,"answer_id":76526160,"question_id":76518422,"body_markdown":"**1.-**\r\n\r\nif the `.mat` file was created with `matfile` and `&#39;Writable&#39;` was set to `false` then you have do\r\n\r\n    matfile(filename,&#39;Writable&#39;,true)\r\n\r\notherwise `filename` is read only.\r\n\r\nIf the .mat file was created like this\r\n\r\n    hm=matfile(&#39;filename.mat&#39;)\r\n\r\n`hm` being the handle to such newly created `.mat` file then check `&#39;Writable&#39;` status with\r\n\r\n    m.Properties.Writable\r\n\r\n**2.-** \r\n\r\nIn the following link you will find out that precisely to interface .mat files at Mathworks there&#39;s a product called **MATLAB builder JA**\r\n\r\n[https://uk.mathworks.com/support/search.html/answers/100293-how-can-i-read-mat-files-from-java.html?fq%5B%5D=asset_type_name:answer&amp;fq%5B%5D=category:compiler_sdk/java_packages&amp;page=1][1]\r\n\r\n\r\n**3.-**\r\n\r\nIf it&#39;s not `&#39;Writable&#39;` and **MATLAB builder JA** is out of range, the same QA in the link I just supplied points at going down to C/C++ and writting your own function to connect **MATLAB LIBMAT** with **JNI API**.\r\n\r\nFor either **2.-** or **3.-** you are going to need **MATLAB Compiler**.\r\n\r\n**Additional Comment**\r\n\r\nIn this page \r\n\r\n[https://uk.mathworks.com/help/matlab/matlab_external/list-of-examples.html][2]\r\n\r\nyou will find links to functions in C that you can use from JAVA to import `.mat` files.\r\n\r\nHowever since Mathworks has a toolbox to such purpose, **Builder JA**, it may be the case that you will have to modify the free  functions available in the last link I supply in this answer, or add something, which would be the work already solved in the toolbox **Builder JA** suggested in point 2. \r\n\r\nWhy don&#39;t you install the **Builder JA** trial that is free for 30 days and assess whether you really need **Builder JA**? \r\n\r\nThen you will be able to consider whether keeping **Builder JA**, at a price, or go for the do-it-yourself option.\r\n\r\n\r\n  [1]: https://uk.mathworks.com/support/search.html/answers/100293-how-can-i-read-mat-files-from-java.html?fq%5B%5D=asset_type_name:answer&amp;fq%5B%5D=category:compiler_sdk/java_packages&amp;page=1\r\n  [2]: https://uk.mathworks.com/help/matlab/matlab_external/list-of-examples.html","title":"Java - Read only parts of .mat file","body":"<p><strong>1.-</strong></p>\n<p>if the <code>.mat</code> file was created with <code>matfile</code> and <code>'Writable'</code> was set to <code>false</code> then you have do</p>\n<pre><code>matfile(filename,'Writable',true)\n</code></pre>\n<p>otherwise <code>filename</code> is read only.</p>\n<p>If the .mat file was created like this</p>\n<pre><code>hm=matfile('filename.mat')\n</code></pre>\n<p><code>hm</code> being the handle to such newly created <code>.mat</code> file then check <code>'Writable'</code> status with</p>\n<pre><code>m.Properties.Writable\n</code></pre>\n<p><strong>2.-</strong></p>\n<p>In the following link you will find out that precisely to interface .mat files at Mathworks there's a product called <strong>MATLAB builder JA</strong></p>\n<p><a href=\"https://uk.mathworks.com/support/search.html/answers/100293-how-can-i-read-mat-files-from-java.html?fq%5B%5D=asset_type_name:answer&amp;fq%5B%5D=category:compiler_sdk/java_packages&amp;page=1\" rel=\"nofollow noreferrer\">https://uk.mathworks.com/support/search.html/answers/100293-how-can-i-read-mat-files-from-java.html?fq%5B%5D=asset_type_name:answer&amp;fq%5B%5D=category:compiler_sdk/java_packages&amp;page=1</a></p>\n<p><strong>3.-</strong></p>\n<p>If it's not <code>'Writable'</code> and <strong>MATLAB builder JA</strong> is out of range, the same QA in the link I just supplied points at going down to C/C++ and writting your own function to connect <strong>MATLAB LIBMAT</strong> with <strong>JNI API</strong>.</p>\n<p>For either <strong>2.-</strong> or <strong>3.-</strong> you are going to need <strong>MATLAB Compiler</strong>.</p>\n<p><strong>Additional Comment</strong></p>\n<p>In this page</p>\n<p><a href=\"https://uk.mathworks.com/help/matlab/matlab_external/list-of-examples.html\" rel=\"nofollow noreferrer\">https://uk.mathworks.com/help/matlab/matlab_external/list-of-examples.html</a></p>\n<p>you will find links to functions in C that you can use from JAVA to import <code>.mat</code> files.</p>\n<p>However since Mathworks has a toolbox to such purpose, <strong>Builder JA</strong>, it may be the case that you will have to modify the free  functions available in the last link I supply in this answer, or add something, which would be the work already solved in the toolbox <strong>Builder JA</strong> suggested in point 2.</p>\n<p>Why don't you install the <strong>Builder JA</strong> trial that is free for 30 days and assess whether you really need <strong>Builder JA</strong>?</p>\n<p>Then you will be able to consider whether keeping <strong>Builder JA</strong>, at a price, or go for the do-it-yourself option.</p>\n"},{"tags":[],"owner":{"account_id":9685157,"reputation":884,"user_id":7185263,"display_name":"SOG"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693982929,"creation_date":1687494079,"answer_id":76537069,"question_id":76518422,"body_markdown":"Based on the title and description of your use-case, it seems that you need to use HDF5 point or hyperslab selections to read data partially (i.e. some parts of it).\r\n\r\nIf you are not bound to a particular HDF5 library, you may want to try [HDFql][1], a high-level (declarative) programming language to manage HDF5 data, which is used below to illustrate the aforementioned type of selections in Java.\r\n\r\n    // create a chunked dataset named &#39;dset&#39; of type int with one dimension (size 1000) \r\n    HDFql.Execute(&quot;CREATE CHUNKED DATASET dset AS INT(1000)&quot;);\r\n\r\n    // read element stored in position #50 of &#39;dset&#39; using a point selection\r\n    HDFql.Execute(&quot;SELECT FROM dset[49]&quot;);\r\n\r\n    // read elements stored in positions #100 and #200 of &#39;dset&#39; using a point selection\r\n    HDFql.Execute(&quot;SELECT FROM dset[99; 199]&quot;);\r\n\r\n    // read elements stored in positions #50 through #70 of &#39;dset&#39; using an (regular) hyperslab selection\r\n    HDFql.Execute(&quot;SELECT FROM dset[49:::20]&quot;);\r\n\r\n    // read elements stored in positions #10 through #20 and positions #200 through #500 of &#39;dset&#39; using an (irregular) hyperslab selection\r\n    HDFql.Execute(&quot;SELECT FROM dset[9:::10 OR 199:::300]&quot;);\r\n\r\n  [1]: https://www.hdfql.com","title":"Java - Read only parts of .mat file","body":"<p>Based on the title and description of your use-case, it seems that you need to use HDF5 point or hyperslab selections to read data partially (i.e. some parts of it).</p>\n<p>If you are not bound to a particular HDF5 library, you may want to try <a href=\"https://www.hdfql.com\" rel=\"nofollow noreferrer\">HDFql</a>, a high-level (declarative) programming language to manage HDF5 data, which is used below to illustrate the aforementioned type of selections in Java.</p>\n<pre><code>// create a chunked dataset named 'dset' of type int with one dimension (size 1000) \nHDFql.Execute(&quot;CREATE CHUNKED DATASET dset AS INT(1000)&quot;);\n\n// read element stored in position #50 of 'dset' using a point selection\nHDFql.Execute(&quot;SELECT FROM dset[49]&quot;);\n\n// read elements stored in positions #100 and #200 of 'dset' using a point selection\nHDFql.Execute(&quot;SELECT FROM dset[99; 199]&quot;);\n\n// read elements stored in positions #50 through #70 of 'dset' using an (regular) hyperslab selection\nHDFql.Execute(&quot;SELECT FROM dset[49:::20]&quot;);\n\n// read elements stored in positions #10 through #20 and positions #200 through #500 of 'dset' using an (irregular) hyperslab selection\nHDFql.Execute(&quot;SELECT FROM dset[9:::10 OR 199:::300]&quot;);\n</code></pre>\n"}],"owner":{"account_id":6377538,"reputation":829,"user_id":4948006,"accept_rate":100,"display_name":"A M"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":157,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1693982929,"creation_date":1687295441,"question_id":76518422,"body_markdown":"I&#39;m trying to read some portions of a .mat file, **version v7.3**, inside my Java application.\r\n\r\nIn particular, I&#39;d like to load only some parts of a variable stored inside the .mat file.\r\n\r\nMatlab supports this feature for that version of file, by using the command **matfile** (more info [here](https://it.mathworks.com/help/matlab/import_export/load-parts-of-variables-from-mat-files.html)).\r\n\r\nA good example of what I want to achieve is in this [answer](https://stackoverflow.com/a/17524044/4948006). \r\n\r\nThe file I have to process contains 1xN rows, like the field Date, as you can see in the following picture:\r\n[![enter image description here][1]][1]\r\n\r\nI couldn&#39;t find any Java library able to support .mat v7.3, but since that version of file is **HDF5-based**, I tried to implement a solution that processes the file considering it as HDF5 one.\r\nI&#39;m using [**JHDF** libray](https://github.com/jamesmudd/jhdf), but I can&#39;t understand if it supports a matfile like command.\r\n\r\n\r\nIn particular, I&#39;d like to extract data from Duration field, only when Date field assumes a particular value. Date contains dates in the format yyyymmdd, as integer values, in ascending order. \r\n\r\nLet&#39;s say I want to read data from Duration, when Date = 20230211. I implemented this with JHDF, as follows:\r\n\r\n    HdfFile hdfFile = new HdfFile(Paths.get(&quot;file.mat&quot;));\r\n    int[] dateArr = (int[]) hdfFile.getDatasetByPath(&quot;/Task/Date&quot;).getDataFlat();\r\n    if (dateArr.length &gt; 0) {\r\n        int startIdx = 0;\r\n        int finalIdx = dateArr.length - 1;\r\n        for (int i = 0; i &lt; dateArr.length; i++) {\r\n            if (dateArr[i] == 20230211) {\r\n                startIdx = i;\r\n                break;\r\n            }\r\n        }\r\n        for (int i = startIdx + 1; i &lt; dateArr.length; i++) {\r\n            if (dateArr[i] &gt; 20230211) {\r\n                finalIdx = i - 1;\r\n                break;\r\n            }\r\n        }\r\n        float[] duration = (float[]) hdfFile.getDatasetByPath(&quot;/Task/Duration&quot;).getDataFlat();\r\n        float[] desiredDuration = Arrays.copyOfRange(duration, startIdx, finalIdx + 1);\r\n    }\r\n\r\nDo you know what I can do to emulate the matfile command in Java?\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3FVRR.png","title":"Java - Read only parts of .mat file","body":"<p>I'm trying to read some portions of a .mat file, <strong>version v7.3</strong>, inside my Java application.</p>\n<p>In particular, I'd like to load only some parts of a variable stored inside the .mat file.</p>\n<p>Matlab supports this feature for that version of file, by using the command <strong>matfile</strong> (more info <a href=\"https://it.mathworks.com/help/matlab/import_export/load-parts-of-variables-from-mat-files.html\" rel=\"nofollow noreferrer\">here</a>).</p>\n<p>A good example of what I want to achieve is in this <a href=\"https://stackoverflow.com/a/17524044/4948006\">answer</a>.</p>\n<p>The file I have to process contains 1xN rows, like the field Date, as you can see in the following picture:\n<a href=\"https://i.stack.imgur.com/3FVRR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3FVRR.png\" alt=\"enter image description here\" /></a></p>\n<p>I couldn't find any Java library able to support .mat v7.3, but since that version of file is <strong>HDF5-based</strong>, I tried to implement a solution that processes the file considering it as HDF5 one.\nI'm using <a href=\"https://github.com/jamesmudd/jhdf\" rel=\"nofollow noreferrer\"><strong>JHDF</strong> libray</a>, but I can't understand if it supports a matfile like command.</p>\n<p>In particular, I'd like to extract data from Duration field, only when Date field assumes a particular value. Date contains dates in the format yyyymmdd, as integer values, in ascending order.</p>\n<p>Let's say I want to read data from Duration, when Date = 20230211. I implemented this with JHDF, as follows:</p>\n<pre><code>HdfFile hdfFile = new HdfFile(Paths.get(&quot;file.mat&quot;));\nint[] dateArr = (int[]) hdfFile.getDatasetByPath(&quot;/Task/Date&quot;).getDataFlat();\nif (dateArr.length &gt; 0) {\n    int startIdx = 0;\n    int finalIdx = dateArr.length - 1;\n    for (int i = 0; i &lt; dateArr.length; i++) {\n        if (dateArr[i] == 20230211) {\n            startIdx = i;\n            break;\n        }\n    }\n    for (int i = startIdx + 1; i &lt; dateArr.length; i++) {\n        if (dateArr[i] &gt; 20230211) {\n            finalIdx = i - 1;\n            break;\n        }\n    }\n    float[] duration = (float[]) hdfFile.getDatasetByPath(&quot;/Task/Duration&quot;).getDataFlat();\n    float[] desiredDuration = Arrays.copyOfRange(duration, startIdx, finalIdx + 1);\n}\n</code></pre>\n<p>Do you know what I can do to emulate the matfile command in Java?</p>\n"},{"tags":["java","arrays","arraylist","primitive-types"],"comments":[{"owner":{"account_id":2055900,"reputation":7174,"user_id":1889720,"accept_rate":78,"display_name":"Evorlor"},"score":3,"creation_date":1433966856,"post_id":718554,"comment_id":49584624,"body_markdown":"If you don&#39;t need primitive ints, you can use:\n    `List&lt;Integer&gt; x = new ArrayList&lt;Integer&gt;();`\n    `Integer[] n = x.toArray(new Integer[0]);`","body":"If you don&#39;t need primitive ints, you can use:     <code>List&lt;Integer&gt; x = new ArrayList&lt;Integer&gt;();</code>     <code>Integer[] n = x.toArray(new Integer[0]);</code>"},{"owner":{"account_id":1352612,"reputation":4119,"user_id":1357094,"accept_rate":85,"display_name":"cellepo"},"score":0,"creation_date":1540327091,"post_id":718554,"comment_id":92822449,"body_markdown":"Possible duplicate of [Converting an array of objects to an array of their primitive types](https://stackoverflow.com/questions/564392/converting-an-array-of-objects-to-an-array-of-their-primitive-types)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/564392/converting-an-array-of-objects-to-an-array-of-their-primitive-types\">Converting an array of objects to an array of their primitive types</a>"},{"owner":{"account_id":13165284,"reputation":521,"user_id":9509713,"display_name":"Nosrep"},"score":2,"creation_date":1594133236,"post_id":718554,"comment_id":111016038,"body_markdown":"@cellepo That question is about converting between an Object and primitive array, this is about converting between an ArrayList and primitive array","body":"@cellepo That question is about converting between an Object and primitive array, this is about converting between an ArrayList and primitive array"}],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438169,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":2,"up_vote_count":268,"is_accepted":true,"score":266,"last_activity_date":1326390009,"creation_date":1238918648,"answer_id":718558,"question_id":718554,"body_markdown":"You can convert, but I don&#39;t think there&#39;s anything built in to do it automatically:\r\n\r\n    public static int[] convertIntegers(List&lt;Integer&gt; integers)\r\n    {\r\n        int[] ret = new int[integers.size()];\r\n        for (int i=0; i &lt; ret.length; i++)\r\n        {\r\n            ret[i] = integers.get(i).intValue();\r\n        }\r\n        return ret;\r\n    }\r\n\r\n(Note that this will throw a NullPointerException if either `integers` or any element within it is `null`.)\r\n\r\nEDIT: As per comments, you may want to use the list iterator to avoid nasty costs with lists such as `LinkedList`:\r\n\r\n\r\n    public static int[] convertIntegers(List&lt;Integer&gt; integers)\r\n    {\r\n        int[] ret = new int[integers.size()];\r\n        Iterator&lt;Integer&gt; iterator = integers.iterator();\r\n        for (int i = 0; i &lt; ret.length; i++)\r\n        {\r\n            ret[i] = iterator.next().intValue();\r\n        }\r\n        return ret;\r\n    }\r\n","title":"How to convert an ArrayList containing Integers to primitive int array?","body":"<p>You can convert, but I don't think there's anything built in to do it automatically:</p>\n\n<pre><code>public static int[] convertIntegers(List&lt;Integer&gt; integers)\n{\n    int[] ret = new int[integers.size()];\n    for (int i=0; i &lt; ret.length; i++)\n    {\n        ret[i] = integers.get(i).intValue();\n    }\n    return ret;\n}\n</code></pre>\n\n<p>(Note that this will throw a NullPointerException if either <code>integers</code> or any element within it is <code>null</code>.)</p>\n\n<p>EDIT: As per comments, you may want to use the list iterator to avoid nasty costs with lists such as <code>LinkedList</code>:</p>\n\n<pre><code>public static int[] convertIntegers(List&lt;Integer&gt; integers)\n{\n    int[] ret = new int[integers.size()];\n    Iterator&lt;Integer&gt; iterator = integers.iterator();\n    for (int i = 0; i &lt; ret.length; i++)\n    {\n        ret[i] = iterator.next().intValue();\n    }\n    return ret;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25166,"reputation":29119,"user_id":64495,"accept_rate":67,"display_name":"Bj&#246;rn"},"down_vote_count":1,"up_vote_count":69,"is_accepted":false,"score":68,"last_activity_date":1238922032,"creation_date":1238922032,"answer_id":718606,"question_id":718554,"body_markdown":"Apache Commons has a ArrayUtils class, which has a method toPrimitive() that does exactly this.\r\n\r\n    import org.apache.commons.lang.ArrayUtils;\r\n    ...\r\n        List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();\r\n        list.add(new Integer(1));\r\n        list.add(new Integer(2));\r\n        int[] intArray = ArrayUtils.toPrimitive(list.toArray(new Integer[0]));\r\n\r\nHowever, as Jon showed, it is pretty easy to do this by yourself instead of using external libraries.","title":"How to convert an ArrayList containing Integers to primitive int array?","body":"<p>Apache Commons has a ArrayUtils class, which has a method toPrimitive() that does exactly this.</p>\n\n<pre><code>import org.apache.commons.lang.ArrayUtils;\n...\n    List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();\n    list.add(new Integer(1));\n    list.add(new Integer(2));\n    int[] intArray = ArrayUtils.toPrimitive(list.toArray(new Integer[0]));\n</code></pre>\n\n<p>However, as Jon showed, it is pretty easy to do this by yourself instead of using external libraries.</p>\n"},{"tags":[],"owner":{"account_id":32251,"reputation":114942,"user_id":89266,"accept_rate":91,"display_name":"dfa"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1265055268,"creation_date":1265055268,"answer_id":2179730,"question_id":718554,"body_markdown":"using [Dollar][1] should be quite simple:\r\n\r\n    List&lt;Integer&gt; list = $(5).toList(); // the list 0, 1, 2, 3, 4  \r\n    int[] array = $($(list).toArray()).toIntArray();\r\n\r\nI&#39;m planning to improve the DSL in order to remove the intermediate `toArray()` call\r\n   \r\n\r\n\r\n  [1]: http://bitbucket.org/dfa/dollar","title":"How to convert an ArrayList containing Integers to primitive int array?","body":"<p>using <a href=\"http://bitbucket.org/dfa/dollar\" rel=\"noreferrer\">Dollar</a> should be quite simple:</p>\n\n<pre><code>List&lt;Integer&gt; list = $(5).toList(); // the list 0, 1, 2, 3, 4  \nint[] array = $($(list).toArray()).toIntArray();\n</code></pre>\n\n<p>I'm planning to improve the DSL in order to remove the intermediate <code>toArray()</code> call</p>\n"},{"tags":[],"owner":{"account_id":613039,"reputation":85,"user_id":329780,"display_name":"Andrew F."},"down_vote_count":5,"up_vote_count":9,"is_accepted":false,"score":4,"last_activity_date":1340043596,"creation_date":1272633761,"answer_id":2744759,"question_id":718554,"body_markdown":"It bewilders me that we encourage one-off custom methods whenever a perfectly good, well used library like Apache Commons has solved the problem already.  Though the solution is trivial if not absurd, it is irresponsible to encourage such a behavior due to long term maintenance and accessibility.\r\n\r\nJust go with [Apache Commons][1]\r\n\r\n\r\n  [1]: http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/ArrayUtils.html#toPrimitive%28java.lang.Integer%5B%5D,%20int%29","title":"How to convert an ArrayList containing Integers to primitive int array?","body":"<p>It bewilders me that we encourage one-off custom methods whenever a perfectly good, well used library like Apache Commons has solved the problem already.  Though the solution is trivial if not absurd, it is irresponsible to encourage such a behavior due to long term maintenance and accessibility.</p>\n\n<p>Just go with <a href=\"http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/ArrayUtils.html#toPrimitive%28java.lang.Integer%5B%5D,%20int%29\" rel=\"nofollow noreferrer\">Apache Commons</a></p>\n"},{"tags":[],"owner":{"account_id":129700,"reputation":44876,"user_id":328445,"accept_rate":100,"display_name":"Matthew"},"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1397242619,"creation_date":1301777794,"answer_id":5525814,"question_id":718554,"body_markdown":"I believe iterating using the List&#39;s iterator is a better idea, as `list.get(i)` can have poor performance depending on the List implementation:\r\n\r\n    private int[] buildIntArray(List&lt;Integer&gt; integers) {\r\n        int[] ints = new int[integers.size()];\r\n        int i = 0;\r\n        for (Integer n : integers) {\r\n            ints[i++] = n;\r\n        }\r\n        return ints;\r\n    }","title":"How to convert an ArrayList containing Integers to primitive int array?","body":"<p>I believe iterating using the List's iterator is a better idea, as <code>list.get(i)</code> can have poor performance depending on the List implementation:</p>\n\n<pre><code>private int[] buildIntArray(List&lt;Integer&gt; integers) {\n    int[] ints = new int[integers.size()];\n    int i = 0;\n    for (Integer n : integers) {\n        ints[i++] = n;\n    }\n    return ints;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":911686,"reputation":9,"user_id":945376,"display_name":"snn"},"down_vote_count":9,"up_vote_count":2,"is_accepted":false,"score":-7,"last_activity_date":1316031724,"creation_date":1316028366,"answer_id":7421850,"question_id":718554,"body_markdown":"    Integer[] arr = (Integer[]) x.toArray(new Integer[x.size()]);\r\n\r\naccess `arr` like normal `int[]`.","title":"How to convert an ArrayList containing Integers to primitive int array?","body":"<pre><code>Integer[] arr = (Integer[]) x.toArray(new Integer[x.size()]);\n</code></pre>\n\n<p>access <code>arr</code> like normal <code>int[]</code>.</p>\n"},{"tags":[],"owner":{"account_id":19996,"reputation":7356,"user_id":47361,"accept_rate":83,"display_name":"Snehal"},"down_vote_count":3,"up_vote_count":90,"is_accepted":false,"score":87,"last_activity_date":1467233020,"creation_date":1324153872,"answer_id":8547729,"question_id":718554,"body_markdown":"# Google Guava\r\n\r\n[Google Guava](https://en.m.wikipedia.org/wiki/Google_Guava) provides a neat way to do this by calling [`Ints.toArray`](http://google.github.io/guava/releases/19.0/api/docs/com/google/common/primitives/Ints.html#toArray(java.util.Collection)).\r\n\r\n    List&lt;Integer&gt; list = ...;\r\n    int[] values = Ints.toArray(list);","title":"How to convert an ArrayList containing Integers to primitive int array?","body":"<h1>Google Guava</h1>\n\n<p><a href=\"https://en.m.wikipedia.org/wiki/Google_Guava\">Google Guava</a> provides a neat way to do this by calling <a href=\"http://google.github.io/guava/releases/19.0/api/docs/com/google/common/primitives/Ints.html#toArray(java.util.Collection)\"><code>Ints.toArray</code></a>.</p>\n\n<pre><code>List&lt;Integer&gt; list = ...;\nint[] values = Ints.toArray(list);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2711114,"reputation":1,"user_id":2339550,"display_name":"CodeMadness"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1367585347,"creation_date":1367492940,"answer_id":16336520,"question_id":718554,"body_markdown":"       List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();\r\n\r\n\t\tlist.add(1);\r\n\t\tlist.add(2);\r\n\r\n\t\tint[] result = null;\r\n\t\tStringBuffer strBuffer = new StringBuffer();\r\n\t\tfor (Object o : list) {\r\n\t\t\tstrBuffer.append(o);\r\n\t\t\tresult = new int[] { Integer.parseInt(strBuffer.toString()) };\r\n\t\t\tfor (Integer i : result) {\r\n\t\t\t\tSystem.out.println(i);\r\n\t\t\t}\r\n\t\t\tstrBuffer.delete(0, strBuffer.length());\r\n\t\t}","title":"How to convert an ArrayList containing Integers to primitive int array?","body":"<pre><code>   List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();\n\n    list.add(1);\n    list.add(2);\n\n    int[] result = null;\n    StringBuffer strBuffer = new StringBuffer();\n    for (Object o : list) {\n        strBuffer.append(o);\n        result = new int[] { Integer.parseInt(strBuffer.toString()) };\n        for (Integer i : result) {\n            System.out.println(i);\n        }\n        strBuffer.delete(0, strBuffer.length());\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12059,"reputation":26552,"user_id":23572,"accept_rate":63,"display_name":"Craig P. Motlin"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1488683754,"creation_date":1377772344,"answer_id":18508549,"question_id":718554,"body_markdown":"If you&#39;re using [Eclipse Collections][1], you can use the `collectInt()` method to switch from an object container to a primitive int container.\r\n\r\n    List&lt;Integer&gt; integers = new ArrayList&lt;&gt;(Arrays.asList(1, 2, 3, 4, 5));\r\n    MutableIntList intList =\r\n      ListAdapter.adapt(integers).collectInt(i -&gt; i);\r\n    Assert.assertArrayEquals(new int[]{1, 2, 3, 4, 5}, intList.toArray());\r\n\r\nIf you can convert your `ArrayList` to a `FastList`, you can get rid of the adapter.\r\n\r\n    Assert.assertArrayEquals(\r\n      new int[]{1, 2, 3, 4, 5},\r\n      Lists.mutable.with(1, 2, 3, 4, 5)\r\n        .collectInt(i -&gt; i).toArray());\r\n\r\n\r\n**Note:** I am a committer for Eclipse collections.\r\n\r\n\r\n  [1]: http://www.eclipse.org/collections/","title":"How to convert an ArrayList containing Integers to primitive int array?","body":"<p>If you're using <a href=\"http://www.eclipse.org/collections/\" rel=\"nofollow noreferrer\">Eclipse Collections</a>, you can use the <code>collectInt()</code> method to switch from an object container to a primitive int container.</p>\n\n<pre><code>List&lt;Integer&gt; integers = new ArrayList&lt;&gt;(Arrays.asList(1, 2, 3, 4, 5));\nMutableIntList intList =\n  ListAdapter.adapt(integers).collectInt(i -&gt; i);\nAssert.assertArrayEquals(new int[]{1, 2, 3, 4, 5}, intList.toArray());\n</code></pre>\n\n<p>If you can convert your <code>ArrayList</code> to a <code>FastList</code>, you can get rid of the adapter.</p>\n\n<pre><code>Assert.assertArrayEquals(\n  new int[]{1, 2, 3, 4, 5},\n  Lists.mutable.with(1, 2, 3, 4, 5)\n    .collectInt(i -&gt; i).toArray());\n</code></pre>\n\n<p><strong>Note:</strong> I am a committer for Eclipse collections.</p>\n"},{"tags":[],"owner":{"account_id":1734091,"reputation":92376,"user_id":1587046,"accept_rate":62,"display_name":"Alexis C."},"down_vote_count":0,"up_vote_count":408,"is_accepted":false,"score":408,"last_activity_date":1468950557,"creation_date":1400187715,"answer_id":23688547,"question_id":718554,"body_markdown":"If you are using [tag:java-8] there&#39;s also another way to do this.\r\n\r\n    int[] arr = list.stream().mapToInt(i -&gt; i).toArray();\r\n\r\nWhat it does is:\r\n\r\n - getting a `Stream&lt;Integer&gt;` from the list\r\n - obtaining an `IntStream` by mapping each element to itself (identity function), unboxing the `int` value hold by each `Integer` object (done automatically since Java 5)\r\n - getting the array of `int` by calling `toArray`\r\n\r\nYou could also explicitly call `intValue` via a method reference, i.e:\r\n   \r\n\r\n    int[] arr = list.stream().mapToInt(Integer::intValue).toArray();\r\n\r\nIt&#39;s also worth mentioning that you could get a `NullPointerException` if you have any `null` reference in the list. This could be easily avoided by adding a filtering condition to the stream pipeline like this:\r\n\r\n                           //.filter(Objects::nonNull) also works\r\n    int[] arr = list.stream().filter(i -&gt; i != null).mapToInt(i -&gt; i).toArray();\r\n\r\nExample:\r\n\r\n    List&lt;Integer&gt; list = Arrays.asList(1, 2, 3, 4);\r\n    int[] arr = list.stream().mapToInt(i -&gt; i).toArray(); //[1, 2, 3, 4]\r\n\r\n    list.set(1, null); //[1, null, 3, 4]\r\n    arr = list.stream().filter(i -&gt; i != null).mapToInt(i -&gt; i).toArray(); //[1, 3, 4]","title":"How to convert an ArrayList containing Integers to primitive int array?","body":"<p>If you are using <a href=\"/questions/tagged/java-8\" class=\"post-tag\" title=\"show questions tagged &#39;java-8&#39;\" rel=\"tag\">java-8</a> there's also another way to do this.</p>\n\n<pre><code>int[] arr = list.stream().mapToInt(i -&gt; i).toArray();\n</code></pre>\n\n<p>What it does is:</p>\n\n<ul>\n<li>getting a <code>Stream&lt;Integer&gt;</code> from the list</li>\n<li>obtaining an <code>IntStream</code> by mapping each element to itself (identity function), unboxing the <code>int</code> value hold by each <code>Integer</code> object (done automatically since Java 5)</li>\n<li>getting the array of <code>int</code> by calling <code>toArray</code></li>\n</ul>\n\n<p>You could also explicitly call <code>intValue</code> via a method reference, i.e:</p>\n\n<pre><code>int[] arr = list.stream().mapToInt(Integer::intValue).toArray();\n</code></pre>\n\n<p>It's also worth mentioning that you could get a <code>NullPointerException</code> if you have any <code>null</code> reference in the list. This could be easily avoided by adding a filtering condition to the stream pipeline like this:</p>\n\n<pre><code>                       //.filter(Objects::nonNull) also works\nint[] arr = list.stream().filter(i -&gt; i != null).mapToInt(i -&gt; i).toArray();\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>List&lt;Integer&gt; list = Arrays.asList(1, 2, 3, 4);\nint[] arr = list.stream().mapToInt(i -&gt; i).toArray(); //[1, 2, 3, 4]\n\nlist.set(1, null); //[1, null, 3, 4]\narr = list.stream().filter(i -&gt; i != null).mapToInt(i -&gt; i).toArray(); //[1, 3, 4]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4782738,"reputation":143,"user_id":3864041,"display_name":"sagiksp"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1439479706,"creation_date":1439478613,"answer_id":31992122,"question_id":718554,"body_markdown":"You can simply copy it to an array:\r\n\r\n    int[] arr = new int[list.size()];\r\n    for(int i = 0; i &lt; list.size(); i++) {\r\n        arr[i] = list.get(i);\r\n    }\r\n\r\nNot too fancy; but, hey, it works...","title":"How to convert an ArrayList containing Integers to primitive int array?","body":"<p>You can simply copy it to an array:</p>\n\n<pre><code>int[] arr = new int[list.size()];\nfor(int i = 0; i &lt; list.size(); i++) {\n    arr[i] = list.get(i);\n}\n</code></pre>\n\n<p>Not too fancy; but, hey, it works...</p>\n"},{"tags":[],"owner":{"account_id":4205825,"reputation":720,"user_id":3444748,"display_name":"Harshan Morawaka"},"down_vote_count":9,"up_vote_count":9,"is_accepted":false,"score":0,"last_activity_date":1559401275,"creation_date":1455423345,"answer_id":35388292,"question_id":718554,"body_markdown":"This code segment is working for me, try this:\r\n\r\n    Integer[] arr = x.toArray(new Integer[x.size()]);\r\n\r\nWorth to mention ArrayList should be declared like this:\r\n\r\n    ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;();","title":"How to convert an ArrayList containing Integers to primitive int array?","body":"<p>This code segment is working for me, try this:</p>\n\n<pre><code>Integer[] arr = x.toArray(new Integer[x.size()]);\n</code></pre>\n\n<p>Worth to mention ArrayList should be declared like this:</p>\n\n<pre><code>ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4443197,"reputation":8014,"user_id":3617234,"accept_rate":89,"display_name":"EssaidiM"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1589741209,"creation_date":1580727758,"answer_id":60037893,"question_id":718554,"body_markdown":"Java 8:\r\n\r\n    int[] intArr = Arrays.stream(integerList).mapToInt(i-&gt;i).toArray();","title":"How to convert an ArrayList containing Integers to primitive int array?","body":"<p>Java 8:</p>\n\n<pre><code>int[] intArr = Arrays.stream(integerList).mapToInt(i-&gt;i).toArray();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1581861440,"creation_date":1581861136,"answer_id":60249173,"question_id":718554,"body_markdown":"## Arrays.setAll()\r\n\r\n\t\tList&lt;Integer&gt; x = new ArrayList&lt;&gt;(Arrays.asList(7, 9, 13));\r\n\t\tint[] n = new int[x.size()];\r\n\t\tArrays.setAll(n, x::get);\r\n\t\t\r\n\t\tSystem.out.println(&quot;Array of primitive ints: &quot; + Arrays.toString(n));\r\n\r\nOutput:\r\n\r\n&gt; Array of primitive ints: [7, 9, 13]\r\n\r\nThe same works for an array of `long` or `double`, but not for arrays of `boolean`, `char`, `byte`, `short` or `float`. If you’ve got a really huge list, there’s even a `parallelSetAll` method that you may use instead.\r\n\r\nTo me this is good and elgant enough that I wouldn’t want to get an external library nor use streams for it.\r\n\r\n**Documentation link:** [`Arrays.setAll(int[], IntUnaryOperator)`](https://docs.oracle.com/javase/10/docs/api/java/util/Arrays.html#setAll(int%5B%5D,java.util.function.IntUnaryOperator))","title":"How to convert an ArrayList containing Integers to primitive int array?","body":"<h2>Arrays.setAll()</h2>\n\n<pre><code>    List&lt;Integer&gt; x = new ArrayList&lt;&gt;(Arrays.asList(7, 9, 13));\n    int[] n = new int[x.size()];\n    Arrays.setAll(n, x::get);\n\n    System.out.println(\"Array of primitive ints: \" + Arrays.toString(n));\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>Array of primitive ints: [7, 9, 13]</p>\n</blockquote>\n\n<p>The same works for an array of <code>long</code> or <code>double</code>, but not for arrays of <code>boolean</code>, <code>char</code>, <code>byte</code>, <code>short</code> or <code>float</code>. If you’ve got a really huge list, there’s even a <code>parallelSetAll</code> method that you may use instead.</p>\n\n<p>To me this is good and elgant enough that I wouldn’t want to get an external library nor use streams for it.</p>\n\n<p><strong>Documentation link:</strong> <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/Arrays.html#setAll(int%5B%5D,java.util.function.IntUnaryOperator)\" rel=\"noreferrer\"><code>Arrays.setAll(int[], IntUnaryOperator)</code></a></p>\n"},{"tags":[],"owner":{"account_id":9817090,"reputation":40,"user_id":7273261,"display_name":"PramodG"},"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1584168681,"creation_date":1584167120,"answer_id":60680319,"question_id":718554,"body_markdown":"A very simple one-line solution is:\r\n```\r\nInteger[] i = arrlist.stream().toArray(Integer[]::new);\r\n```","title":"How to convert an ArrayList containing Integers to primitive int array?","body":"<p>A very simple one-line solution is:</p>\n\n<pre><code>Integer[] i = arrlist.stream().toArray(Integer[]::new);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16288566,"reputation":327,"user_id":11762632,"display_name":"Miguel Carrillo"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1585855246,"creation_date":1585855246,"answer_id":60999431,"question_id":718554,"body_markdown":"This works nice for me :)\r\n\r\nFound at https://www.techiedelight.com/convert-list-integer-array-int/\r\n\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    \r\n    class ListUtil\r\n    {\r\n    \t// Program to convert list of integer to array of int in Java\r\n    \tpublic static void main(String args[])\r\n    \t{\r\n    \t\tList&lt;Integer&gt; list = Arrays.asList(1, 2, 3, 4, 5);\r\n    \r\n    \t\tint[] primitive = list.stream()\r\n    \t\t\t\t\t\t\t.mapToInt(Integer::intValue)\r\n    \t\t\t\t\t\t\t.toArray();\r\n    \r\n    \t\tSystem.out.println(Arrays.toString(primitive));\r\n    \t}\r\n    }","title":"How to convert an ArrayList containing Integers to primitive int array?","body":"<p>This works nice for me :)</p>\n\n<p>Found at <a href=\"https://www.techiedelight.com/convert-list-integer-array-int/\" rel=\"noreferrer\">https://www.techiedelight.com/convert-list-integer-array-int/</a></p>\n\n<pre><code>import java.util.Arrays;\nimport java.util.List;\n\nclass ListUtil\n{\n    // Program to convert list of integer to array of int in Java\n    public static void main(String args[])\n    {\n        List&lt;Integer&gt; list = Arrays.asList(1, 2, 3, 4, 5);\n\n        int[] primitive = list.stream()\n                            .mapToInt(Integer::intValue)\n                            .toArray();\n\n        System.out.println(Arrays.toString(primitive));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10535144,"reputation":11,"user_id":7763291,"display_name":"Sherlock"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1594394028,"creation_date":1594394028,"answer_id":62837289,"question_id":718554,"body_markdown":"Next lines you can find convertion from int[] -&gt; List&lt;Integer&gt; -&gt; int[]   \r\n\r\n       private static int[] convert(int[] arr) {\r\n            List&lt;Integer&gt; myList=new ArrayList&lt;Integer&gt;();\r\n            for(int number:arr){\r\n                   myList.add(number);\r\n                }\r\n            }\r\n            int[] myArray=new int[myList.size()];\r\n            for(int i=0;i&lt;myList.size();i++){\r\n               myArray[i]=myList.get(i);\r\n            }\r\n            return myArray;\r\n        }","title":"How to convert an ArrayList containing Integers to primitive int array?","body":"<p>Next lines you can find convertion from int[] -&gt; List -&gt; int[]</p>\n<pre><code>   private static int[] convert(int[] arr) {\n        List&lt;Integer&gt; myList=new ArrayList&lt;Integer&gt;();\n        for(int number:arr){\n               myList.add(number);\n            }\n        }\n        int[] myArray=new int[myList.size()];\n        for(int i=0;i&lt;myList.size();i++){\n           myArray[i]=myList.get(i);\n        }\n        return myArray;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":452040,"reputation":16752,"user_id":848253,"accept_rate":62,"display_name":"PerracoLabs"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1600867780,"creation_date":1600867780,"answer_id":64029115,"question_id":718554,"body_markdown":"**Arrays.setAll()** will work for most scenarios:\r\n\r\n1) Integer List to primitive int array:\r\n\r\n       public static int[] convert(final List&lt;Integer&gt; list)\r\n       {\r\n          final int[] out = new int[list.size()];\r\n          Arrays.setAll(out, list::get);\r\n          return out;\r\n       }\r\n\r\n2) Integer List (made of Strings) to primitive int array:\r\n\r\n       public static int[] convert(final List&lt;String&gt; list)\r\n       {\r\n          final int[] out = new int[list.size()];\r\n          Arrays.setAll(out, i -&gt; Integer.parseInt(list.get(i)));\r\n          return out;\r\n       }\r\n\r\n\r\n3) Integer array to primitive int array:\r\n\r\n       public static int[] convert(final Integer[] array)\r\n       {\r\n          final int[] out = new int[array.length];\r\n          Arrays.setAll(out, i -&gt; array[i]);\r\n          return out;\r\n       }\r\n\r\n4) Primitive int array to Integer array:\r\n\r\n       public static Integer[] convert(final int[] array)\r\n       {\r\n          final Integer[] out = new Integer[array.length];\r\n          Arrays.setAll(out, i -&gt; array[i]);\r\n          return out;\r\n       }\r\n","title":"How to convert an ArrayList containing Integers to primitive int array?","body":"<p><strong>Arrays.setAll()</strong> will work for most scenarios:</p>\n<ol>\n<li><p>Integer List to primitive int array:</p>\n<pre><code>public static int[] convert(final List&lt;Integer&gt; list)\n{\n   final int[] out = new int[list.size()];\n   Arrays.setAll(out, list::get);\n   return out;\n}\n</code></pre>\n</li>\n<li><p>Integer List (made of Strings) to primitive int array:</p>\n<pre><code>public static int[] convert(final List&lt;String&gt; list)\n{\n   final int[] out = new int[list.size()];\n   Arrays.setAll(out, i -&gt; Integer.parseInt(list.get(i)));\n   return out;\n}\n</code></pre>\n</li>\n<li><p>Integer array to primitive int array:</p>\n<pre><code>public static int[] convert(final Integer[] array)\n{\n   final int[] out = new int[array.length];\n   Arrays.setAll(out, i -&gt; array[i]);\n   return out;\n}\n</code></pre>\n</li>\n<li><p>Primitive int array to Integer array:</p>\n<pre><code>public static Integer[] convert(final int[] array)\n{\n   final Integer[] out = new Integer[array.length];\n   Arrays.setAll(out, i -&gt; array[i]);\n   return out;\n}\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":14248225,"reputation":657,"user_id":10292570,"display_name":"Sneha Mule"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1619456015,"creation_date":1619456015,"answer_id":67270729,"question_id":718554,"body_markdown":"Java 8\r\n\r\n    int[] array = list.stream().mapToInt(i-&gt;i).toArray();\r\n\r\n    OR \r\n \r\n    int[] array = list.stream().mapToInt(Integer::intValue).toArray();","title":"How to convert an ArrayList containing Integers to primitive int array?","body":"<p>Java 8</p>\n<pre><code>int[] array = list.stream().mapToInt(i-&gt;i).toArray();\n\nOR \n\nint[] array = list.stream().mapToInt(Integer::intValue).toArray();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7262327,"reputation":130,"user_id":5538511,"display_name":"Mohammad Yasin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693982057,"creation_date":1693982057,"answer_id":77049491,"question_id":718554,"body_markdown":"**Don&#39;t use java stream for this task if time is critical for your task**\r\n&lt;br /&gt;\r\nIt is slower than using for-each loop. Use the same as:\r\n\r\n        List&lt;Integer&gt; modes = new ArrayList&lt;&gt;();\r\n        int[] m = new int[modes.size()];\r\n        for (int i = 0; i &lt; m.length; i++) {\r\n            m[i] = modes.get(i);\r\n        }\r\n\r\nYou can measure it with ***jmh***","title":"How to convert an ArrayList containing Integers to primitive int array?","body":"<p><strong>Don't use java stream for this task if time is critical for your task</strong>\n<br />\nIt is slower than using for-each loop. Use the same as:</p>\n<pre><code>    List&lt;Integer&gt; modes = new ArrayList&lt;&gt;();\n    int[] m = new int[modes.size()];\n    for (int i = 0; i &lt; m.length; i++) {\n        m[i] = modes.get(i);\n    }\n</code></pre>\n<p>You can measure it with <em><strong>jmh</strong></em></p>\n"}],"owner":{"account_id":19996,"reputation":7356,"user_id":47361,"accept_rate":83,"display_name":"Snehal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":577862,"favorite_count":0,"down_vote_count":1,"up_vote_count":441,"accepted_answer_id":718558,"answer_count":20,"score":440,"last_activity_date":1693982057,"creation_date":1238918369,"question_id":718554,"body_markdown":"I&#39;m trying to convert an ArrayList containing Integer objects to primitive int[] with the following piece of code, but it is throwing compile time error. Is it possible to convert in Java?\r\n\r\n    List&lt;Integer&gt; x =  new ArrayList&lt;Integer&gt;();\r\n    int[] n = (int[])x.toArray(int[x.size()]);\r\n\r\n","title":"How to convert an ArrayList containing Integers to primitive int array?","body":"<p>I'm trying to convert an ArrayList containing Integer objects to primitive int[] with the following piece of code, but it is throwing compile time error. Is it possible to convert in Java?</p>\n\n<pre><code>List&lt;Integer&gt; x =  new ArrayList&lt;Integer&gt;();\nint[] n = (int[])x.toArray(int[x.size()]);\n</code></pre>\n"},{"tags":["java","mysql","insert","mybatis"],"answers":[{"tags":[],"owner":{"account_id":3135077,"reputation":3704,"user_id":2651741,"display_name":"Larry.Z"},"down_vote_count":8,"up_vote_count":3,"is_accepted":true,"score":-5,"last_activity_date":1377825515,"creation_date":1377825515,"answer_id":18523424,"question_id":18507508,"body_markdown":"If you want to get the generated primary key, you should pass the arguments by `Map` or `POJO Object` \r\n\r\n    public void insertRecord(Map&lt;String, Object&gt; map);\r\nWhen call the mapping method, put values to map.\r\n\r\n    Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();\r\n    map.put(&quot;returnedId&quot;, 0);\r\n    map.put(&quot;message&quot;, message);\r\n    // other paramters\r\n    mapper.insertRecord(map);\r\n    return map.get(&quot;returnedId&quot;);\r\n\r\n    ","title":"MyBatis, how to get the auto generated key of an insert? [MySql]","body":"<p>If you want to get the generated primary key, you should pass the arguments by <code>Map</code> or <code>POJO Object</code> </p>\n\n<pre><code>public void insertRecord(Map&lt;String, Object&gt; map);\n</code></pre>\n\n<p>When call the mapping method, put values to map.</p>\n\n<pre><code>Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();\nmap.put(\"returnedId\", 0);\nmap.put(\"message\", message);\n// other paramters\nmapper.insertRecord(map);\nreturn map.get(\"returnedId\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2401103,"reputation":704,"user_id":2098735,"display_name":"shola"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1446448971,"creation_date":1377845698,"answer_id":18526754,"question_id":18507508,"body_markdown":"Please follow below steps:\r\n\r\n1. Create Error POJO with id as attribute\r\n\r\n2. Replace returnId to error as below,\r\n\r\n&gt; public void insertRecord(@Param(&quot;error&quot;) Error error,\r\n&gt; @Param(&quot;timestamp&quot;)Timestamp timestamp,@Param(&quot;type&quot;) String\r\n&gt; type,@Param(&quot;message&quot;) String message,@Param(&quot;source&quot;) String source);\r\n\r\n3. Change  keyProperty=&quot;ID_ERROR&quot; to  keyProperty=&quot;error.id&quot;\r\n\r\n4. Remove  \r\n\r\n        &lt;selectKey resultType=&quot;long&quot; order=&quot;AFTER&quot; keyProperty=&quot;returnedId&quot;&gt;\r\n            SELECT LAST_INSERT_ID() as returnedId\r\n        &lt;/selectKey&gt;\r\n\r\nYou will get inserted `id` in `error.id`","title":"MyBatis, how to get the auto generated key of an insert? [MySql]","body":"<p>Please follow below steps:</p>\n\n<ol>\n<li><p>Create Error POJO with id as attribute</p></li>\n<li><p>Replace returnId to error as below,</p></li>\n</ol>\n\n<blockquote>\n  <p>public void insertRecord(@Param(\"error\") Error error,\n  @Param(\"timestamp\")Timestamp timestamp,@Param(\"type\") String\n  type,@Param(\"message\") String message,@Param(\"source\") String source);</p>\n</blockquote>\n\n<ol start=\"3\">\n<li><p>Change  keyProperty=\"ID_ERROR\" to  keyProperty=\"error.id\"</p></li>\n<li><p>Remove  </p>\n\n<pre><code>&lt;selectKey resultType=\"long\" order=\"AFTER\" keyProperty=\"returnedId\"&gt;\n    SELECT LAST_INSERT_ID() as returnedId\n&lt;/selectKey&gt;\n</code></pre></li>\n</ol>\n\n<p>You will get inserted <code>id</code> in <code>error.id</code></p>\n"},{"tags":[],"owner":{"account_id":147167,"reputation":2559,"user_id":358099,"accept_rate":47,"display_name":"bharanitharan"},"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1484564982,"creation_date":1378101093,"answer_id":18566434,"question_id":18507508,"body_markdown":"You can achieve this by two ways,\r\n\r\n1. By using `useGeneratedKeys=&quot;true&quot;, keyProperty=&quot;id&quot;, keyColumn=&quot;id&quot;`\r\n\r\n   `keyProperty` refers to the POJO variable name and `keyColumn` refers to generated column name  in database\r\n\r\n2. By using `&lt;selectKey/&gt;` inside insert tag ","title":"MyBatis, how to get the auto generated key of an insert? [MySql]","body":"<p>You can achieve this by two ways,</p>\n\n<ol>\n<li><p>By using <code>useGeneratedKeys=\"true\", keyProperty=\"id\", keyColumn=\"id\"</code></p>\n\n<p><code>keyProperty</code> refers to the POJO variable name and <code>keyColumn</code> refers to generated column name  in database</p></li>\n<li><p>By using <code>&lt;selectKey/&gt;</code> inside insert tag </p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1217455,"reputation":1009,"user_id":1184757,"display_name":"T M"},"down_vote_count":0,"up_vote_count":71,"is_accepted":false,"score":71,"last_activity_date":1457338795,"creation_date":1389024273,"answer_id":20954027,"question_id":18507508,"body_markdown":"For me it is working like this (mybatis 3.x) .. \r\nThe id must be set auto increment in mysql table\r\n\r\n    \r\n\t&lt;insert id=&quot;createEmpty&quot; parameterType=&quot;Project&quot; useGeneratedKeys=&quot;true&quot; keyProperty=&quot;project.projectId&quot; keyColumn=&quot;PROJECT_ID&quot;&gt;\r\n\t\tINSERT INTO PROJECT (TITLE,DESCRIPTION)\r\n\t\tVALUES\r\n\t\t(#{title},#{description})\r\n    &lt;/insert&gt;\r\n\r\n[NOTE](http://www.mybatis.org/mybatis-3/sqlmap-xml.html#Auto-mapping) `keyProperty=&quot;project.projectId&quot;` and `useGeneratedKeys=&quot;true&quot;`\r\n\r\nmy interface is:\r\n\r\n    public int createEmpty(@Param(&quot;project&quot;) Project project, @Param(&quot;title&quot;) String title,\r\n        @Param(&quot;description&quot;) String description);\r\n\r\nfinally to get the value (that will be automatically assigned to the pojo&#39;s id property) i use:\r\n\r\n    projectRepository.createEmpty(p, &quot;one&quot;, &quot;two&quot;);\r\n    System.err.print(p.getProjectId() + &quot;\\n&quot;);","title":"MyBatis, how to get the auto generated key of an insert? [MySql]","body":"<p>For me it is working like this (mybatis 3.x) .. \nThe id must be set auto increment in mysql table</p>\n\n<pre><code>&lt;insert id=\"createEmpty\" parameterType=\"Project\" useGeneratedKeys=\"true\" keyProperty=\"project.projectId\" keyColumn=\"PROJECT_ID\"&gt;\n    INSERT INTO PROJECT (TITLE,DESCRIPTION)\n    VALUES\n    (#{title},#{description})\n&lt;/insert&gt;\n</code></pre>\n\n<p><a href=\"http://www.mybatis.org/mybatis-3/sqlmap-xml.html#Auto-mapping\">NOTE</a> <code>keyProperty=\"project.projectId\"</code> and <code>useGeneratedKeys=\"true\"</code></p>\n\n<p>my interface is:</p>\n\n<pre><code>public int createEmpty(@Param(\"project\") Project project, @Param(\"title\") String title,\n    @Param(\"description\") String description);\n</code></pre>\n\n<p>finally to get the value (that will be automatically assigned to the pojo's id property) i use:</p>\n\n<pre><code>projectRepository.createEmpty(p, \"one\", \"two\");\nSystem.err.print(p.getProjectId() + \"\\n\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1136185,"reputation":8141,"user_id":1121225,"accept_rate":62,"display_name":"Md. Naushad Alam"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1446449781,"creation_date":1432100682,"answer_id":30341197,"question_id":18507508,"body_markdown":"Easy Solution:\r\n\r\nUse `KeyProperty` attribute as `objectName.AutoincrementId`\r\nLike  below...\r\n\r\n`useGeneratedKeys=&quot;true&quot;, KeyProperty=&quot;person.id&quot;, KeyColumn=&quot;id&quot;`","title":"MyBatis, how to get the auto generated key of an insert? [MySql]","body":"<p>Easy Solution:</p>\n\n<p>Use <code>KeyProperty</code> attribute as <code>objectName.AutoincrementId</code>\nLike  below...</p>\n\n<p><code>useGeneratedKeys=\"true\", KeyProperty=\"person.id\", KeyColumn=\"id\"</code></p>\n"},{"tags":[],"owner":{"account_id":6462334,"reputation":997,"user_id":5005676,"display_name":"Shubham Verma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1463107385,"creation_date":1463107385,"answer_id":37200418,"question_id":18507508,"body_markdown":"Under the Mapper Xml, use the query : \r\n\r\n        &lt;insert id=&quot;saveDemo&quot; parameterType=&quot;com.abc.demo&quot;\r\n\t\t   useGeneratedKeys=&quot;true&quot; keyProperty=&quot;demoId&quot; keyColumn=&quot;DEMOID&quot;&gt;\r\n\t\t   INSERT INTO TBL_DEMO (DEMONAME,DEMODESCRIPTION)\r\n\t\t   VALUE (#{demoName},#{demoDescription})\r\n\t\t   &lt;selectKey keyProperty=&quot;demoId&quot; resultType=&quot;int&quot; order=&quot;AFTER&quot;&gt;\r\n\t\t\tSELECT LAST_INSERT_ID();\r\n\t\t   &lt;/selectKey&gt;\r\n\t    &lt;/insert&gt;\r\n\r\n\r\n\r\nJava Side \r\n\r\n    @Override\r\n    public boolean saveDemo(Demo demo) {\r\n        boolean status = false;\r\n        SqlSession session = this.sqlSessionFactory.openSession();\r\n        try {\r\n            DemoMapper mapper = session.getMapper(DemoMapper.class);\r\n            mapper.saveDemo(demo);\r\n            session.commit();\r\n            status = true;\r\n        } catch(PersistenceException e) {\r\n            System.out.println(e);\r\n        } finally {\r\n            session.close();\r\n        }\r\n        return status;\r\n    }\r\n\r\n\r\n","title":"MyBatis, how to get the auto generated key of an insert? [MySql]","body":"<p>Under the Mapper Xml, use the query : </p>\n\n<pre><code>    &lt;insert id=\"saveDemo\" parameterType=\"com.abc.demo\"\n       useGeneratedKeys=\"true\" keyProperty=\"demoId\" keyColumn=\"DEMOID\"&gt;\n       INSERT INTO TBL_DEMO (DEMONAME,DEMODESCRIPTION)\n       VALUE (#{demoName},#{demoDescription})\n       &lt;selectKey keyProperty=\"demoId\" resultType=\"int\" order=\"AFTER\"&gt;\n        SELECT LAST_INSERT_ID();\n       &lt;/selectKey&gt;\n    &lt;/insert&gt;\n</code></pre>\n\n<p>Java Side </p>\n\n<pre><code>@Override\npublic boolean saveDemo(Demo demo) {\n    boolean status = false;\n    SqlSession session = this.sqlSessionFactory.openSession();\n    try {\n        DemoMapper mapper = session.getMapper(DemoMapper.class);\n        mapper.saveDemo(demo);\n        session.commit();\n        status = true;\n    } catch(PersistenceException e) {\n        System.out.println(e);\n    } finally {\n        session.close();\n    }\n    return status;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6765248,"reputation":168,"user_id":5210448,"display_name":"Audrey Carval"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1526042103,"creation_date":1526042103,"answer_id":50292489,"question_id":18507508,"body_markdown":"If you take a look at &lt;a href=&quot;http://www.mybatis.org/mybatis-3/sqlmap-xml.html#insert_update_and_delete&quot;&gt;MyBatis documentation&lt;/a&gt;, &lt;strong&gt;useGeneratedKeys&lt;/strong&gt; and &lt;strong&gt;keyProperty&lt;/strong&gt; is what you need at least to get auto increment data (for some database, you will need to add &lt;strong&gt;keyColumn&lt;/strong&gt;).\r\n\r\nAs you can see, useGeneratedKeys depends on if/how is implemented the getGeneretadKeys method of the dataBase&#39;s JDBC.\r\n\r\nFor exemple,  with &lt;a href=&quot;https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-usagenotes-last-insert-id.html&quot;&gt;mysql&lt;/a&gt;  or H2, getGeneretadKeys support only one column. The last generated key will be the one return by getGeneretadKeys.\r\n\r\nIn conclusion, in your case you need to add only useGeneratedKeys and keyProperty (with ID_ERROR auto_increment):\r\n\r\nMapper.xml\r\n\r\n\t&lt;resultMap type=&#39;pathToJavaClass/Error&#39; id=&#39;error&#39;&gt;\r\n\t\t&lt;id property=&#39;id&#39; column=&#39;ID_ERROR&#39; /&gt;\r\n\t\t&lt;result property=&#39;timestamp&#39; column=&#39;DATE&#39; /&gt;\r\n\t\t&lt;result property=&#39;type&#39; column=&#39;TYPE&#39;/&gt;\r\n\t\t&lt;result property=&#39;message&#39; column=&#39;MESSAGE&#39;/&gt;\r\n\t\t&lt;result property=&#39;source&#39; column=&#39;SOURCE&#39;/&gt;\r\n\t&lt;/resultMap&gt;\r\n    &lt;insert id=&quot;insertRecord&quot; parameterType=&quot;error&quot; useGeneratedKeys=&quot;true&quot; keyProperty=&quot;id&quot;&gt;\r\n    INSERT INTO errors (\r\n        DATE,\r\n        TYPE,\r\n        MESSAGE,\r\n        SOURCE\r\n    )\r\n    VALUES (\r\n        #{timestamp},\r\n        #{type},\r\n        #{message},\r\n        #{source}\r\n    )\r\n    &lt;/insert&gt;\r\n\r\nInterface.java\r\n\r\n    public void insertRecord(@Param(&quot;error&quot;) Error error);\r\n\r\nIf you still get some issue to retrieve generated Keys, check also the documentation of mysql&#39;s JDBC (older version may not implement getGeneretadKeys).\r\n\r\n","title":"MyBatis, how to get the auto generated key of an insert? [MySql]","body":"<p>If you take a look at <a href=\"http://www.mybatis.org/mybatis-3/sqlmap-xml.html#insert_update_and_delete\" rel=\"noreferrer\">MyBatis documentation</a>, <strong>useGeneratedKeys</strong> and <strong>keyProperty</strong> is what you need at least to get auto increment data (for some database, you will need to add <strong>keyColumn</strong>).</p>\n\n<p>As you can see, useGeneratedKeys depends on if/how is implemented the getGeneretadKeys method of the dataBase's JDBC.</p>\n\n<p>For exemple,  with <a href=\"https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-usagenotes-last-insert-id.html\" rel=\"noreferrer\">mysql</a>  or H2, getGeneretadKeys support only one column. The last generated key will be the one return by getGeneretadKeys.</p>\n\n<p>In conclusion, in your case you need to add only useGeneratedKeys and keyProperty (with ID_ERROR auto_increment):</p>\n\n<p>Mapper.xml</p>\n\n<pre><code>&lt;resultMap type='pathToJavaClass/Error' id='error'&gt;\n    &lt;id property='id' column='ID_ERROR' /&gt;\n    &lt;result property='timestamp' column='DATE' /&gt;\n    &lt;result property='type' column='TYPE'/&gt;\n    &lt;result property='message' column='MESSAGE'/&gt;\n    &lt;result property='source' column='SOURCE'/&gt;\n&lt;/resultMap&gt;\n&lt;insert id=\"insertRecord\" parameterType=\"error\" useGeneratedKeys=\"true\" keyProperty=\"id\"&gt;\nINSERT INTO errors (\n    DATE,\n    TYPE,\n    MESSAGE,\n    SOURCE\n)\nVALUES (\n    #{timestamp},\n    #{type},\n    #{message},\n    #{source}\n)\n&lt;/insert&gt;\n</code></pre>\n\n<p>Interface.java</p>\n\n<pre><code>public void insertRecord(@Param(\"error\") Error error);\n</code></pre>\n\n<p>If you still get some issue to retrieve generated Keys, check also the documentation of mysql's JDBC (older version may not implement getGeneretadKeys).</p>\n"},{"tags":[],"owner":{"account_id":4716379,"reputation":1255,"user_id":3901138,"accept_rate":41,"display_name":"Park JongBum"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1539580103,"creation_date":1539578574,"answer_id":52809875,"question_id":18507508,"body_markdown":"In the xml file Put below 5 lines: \r\n\r\n    &lt;insert id=&quot;createPet&quot; parameterType=&quot;java.util.Map&quot;\r\n    \tuseGeneratedKeys=&quot;true&quot; keyProperty=&quot;id&quot;&gt;\r\n    \tINSERT INTO Pet (NAME, OWNER, SPECIES, SEX, BIRTH)\r\n    \tVALUES (#{name}, #{owner}, #{species}, #{sex}, #{birth})\r\n    &lt;/insert&gt;\r\n\r\nCreate this method in Java main class and call it in the main method:\r\n\r\n    public int createPet(PetDVO petDVO) throws Exception {\r\n    \tHashMap&lt;String, Object&gt; inputMap = new HashMap&lt;String, Object&gt;();\r\n    \tinputMap.put(&quot;name&quot;, petDVO.getName());\r\n    \tinputMap.put(&quot;owner&quot;, petDVO.getOwner());\r\n    \tinputMap.put(&quot;species&quot;, petDVO.getSpecies());\r\n    \tinputMap.put(&quot;sex&quot;, petDVO.getSex());\r\n    \tinputMap.put(&quot;birth&quot;, petDVO.getBirth());\r\n    \r\n    \t/**\r\n    \t * Get the sql session and commit the data\r\n    \t */\r\n    \tSqlSession sqlSession = getSqlSession();\r\n    \tsqlSession.insert(&quot;createPet&quot;, inputMap);\r\n    \tsqlSession.commit();\r\n    \r\n    \tBigInteger newID = (BigInteger)inputMap.get(&quot;id&quot;);\r\n    \treturn newID.intValue();\r\n    }\r\n\r\nBut you should create PetDVO class yourself. That is it.","title":"MyBatis, how to get the auto generated key of an insert? [MySql]","body":"<p>In the xml file Put below 5 lines: </p>\n\n<pre><code>&lt;insert id=\"createPet\" parameterType=\"java.util.Map\"\n    useGeneratedKeys=\"true\" keyProperty=\"id\"&gt;\n    INSERT INTO Pet (NAME, OWNER, SPECIES, SEX, BIRTH)\n    VALUES (#{name}, #{owner}, #{species}, #{sex}, #{birth})\n&lt;/insert&gt;\n</code></pre>\n\n<p>Create this method in Java main class and call it in the main method:</p>\n\n<pre><code>public int createPet(PetDVO petDVO) throws Exception {\n    HashMap&lt;String, Object&gt; inputMap = new HashMap&lt;String, Object&gt;();\n    inputMap.put(\"name\", petDVO.getName());\n    inputMap.put(\"owner\", petDVO.getOwner());\n    inputMap.put(\"species\", petDVO.getSpecies());\n    inputMap.put(\"sex\", petDVO.getSex());\n    inputMap.put(\"birth\", petDVO.getBirth());\n\n    /**\n     * Get the sql session and commit the data\n     */\n    SqlSession sqlSession = getSqlSession();\n    sqlSession.insert(\"createPet\", inputMap);\n    sqlSession.commit();\n\n    BigInteger newID = (BigInteger)inputMap.get(\"id\");\n    return newID.intValue();\n}\n</code></pre>\n\n<p>But you should create PetDVO class yourself. That is it.</p>\n"},{"tags":[],"owner":{"account_id":4623279,"reputation":752,"user_id":3747762,"display_name":"david euler"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679485262,"creation_date":1679485262,"answer_id":75811817,"question_id":18507508,"body_markdown":"Use Select annotation with insert sql and a RETURNING indication.\r\n\r\nThe following code works for me for Postgres, MyBatis 3.5.0.\r\n\r\n```\r\n    @Select(&quot;insert into db_mutil_route(user_id, pk, instance_id, name, create_time, update_time) values(#{userId}, #{pk}, #{instanceId}, #{name}, now(), now()) RETURNING id&quot;)\r\n    @Options(flushCache = Options.FlushCachePolicy.TRUE, useGeneratedKeys = true, keyProperty = &quot;id&quot;, keyColumn=&quot;id&quot;)\r\n    Route insert(Route dbRoute);\r\n```\r\n\r\nReference:\r\nhttps://github.com/mybatis/mybatis-3/issues/1293","title":"MyBatis, how to get the auto generated key of an insert? [MySql]","body":"<p>Use Select annotation with insert sql and a RETURNING indication.</p>\n<p>The following code works for me for Postgres, MyBatis 3.5.0.</p>\n<pre><code>    @Select(&quot;insert into db_mutil_route(user_id, pk, instance_id, name, create_time, update_time) values(#{userId}, #{pk}, #{instanceId}, #{name}, now(), now()) RETURNING id&quot;)\n    @Options(flushCache = Options.FlushCachePolicy.TRUE, useGeneratedKeys = true, keyProperty = &quot;id&quot;, keyColumn=&quot;id&quot;)\n    Route insert(Route dbRoute);\n</code></pre>\n<p>Reference:\n<a href=\"https://github.com/mybatis/mybatis-3/issues/1293\" rel=\"nofollow noreferrer\">https://github.com/mybatis/mybatis-3/issues/1293</a></p>\n"},{"tags":[],"owner":{"account_id":2570597,"reputation":1648,"user_id":2229437,"display_name":"kai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693981917,"creation_date":1693981917,"answer_id":77049481,"question_id":18507508,"body_markdown":"In generatorConfig.xml\r\n```\r\n        &lt;table tableName=&quot;models&quot; domainObjectName=&quot;Model&quot;&gt;\r\n            &lt;generatedKey column=&quot;id&quot; sqlStatement=&quot;MySql&quot; identity=&quot;true&quot;/&gt;\r\n        &lt;/table&gt;\r\n```\r\n\r\nafter insert by `modelMapper().insertSelective(model)`, the primary key can get by `model.getId()`","title":"MyBatis, how to get the auto generated key of an insert? [MySql]","body":"<p>In generatorConfig.xml</p>\n<pre><code>        &lt;table tableName=&quot;models&quot; domainObjectName=&quot;Model&quot;&gt;\n            &lt;generatedKey column=&quot;id&quot; sqlStatement=&quot;MySql&quot; identity=&quot;true&quot;/&gt;\n        &lt;/table&gt;\n</code></pre>\n<p>after insert by <code>modelMapper().insertSelective(model)</code>, the primary key can get by <code>model.getId()</code></p>\n"}],"owner":{"account_id":3034022,"reputation":1229,"user_id":2572526,"accept_rate":60,"display_name":"user2572526"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":130119,"favorite_count":0,"down_vote_count":0,"up_vote_count":42,"accepted_answer_id":18523424,"answer_count":10,"score":42,"last_activity_date":1693981917,"creation_date":1377769577,"question_id":18507508,"body_markdown":"how can I get the generated key of an insert with MyBatis?\r\nI read many pages about this question but I&#39;m still blocked, could anyone help me, please?\r\nThis is my code:\r\n\r\nThe table:\r\n\r\n    ID_ERROR long primary key\r\n    DATE timestamp\r\n    TYPE varchar\r\n    MESSAGE varchar\r\n    SOURCE varchar\r\n\r\nThe dao:\r\n\r\n    Long returnedId = 0L;\r\n    MyMapper myMapper = this.sqlSession.getMapper(MyMapper.class);\r\n    myMapper.insertRecord(returnedId, Utils.now(), t.getClass().getName(), t.getMessage(), c.getName());\r\n    return returnedId;\r\n\r\nThe mapper.java:\r\n\r\n    public void insertRecord(@Param(&quot;returnedId&quot;) Long returnedId, @Param(&quot;timestamp&quot;)Timestamp timestamp,@Param(&quot;type&quot;) String type,@Param(&quot;message&quot;) String message,@Param(&quot;source&quot;) String source);\r\n\r\nThe mapper.xml\r\n\r\n     &lt;insert id=&quot;insertRecord&quot; parameterType=&quot;map&quot; useGeneratedKeys=&quot;true&quot;  keyProperty=&quot;ID_ERROR&quot;&gt;\r\n\t\tINSERT INTO errors (\r\n\t\t\tDATE,\r\n\t\t\tTYPE,\r\n\t\t\tMESSAGE,\r\n\t\t\tSOURCE\r\n\t\t)\r\n\t\tVALUES (\r\n\t\t\t#{timestamp},\r\n\t\t\t#{type},\r\n\t\t\t#{message},\r\n\t\t\t#{source}\r\n\t\t)\r\n\t\t&lt;selectKey resultType=&quot;long&quot; order=&quot;AFTER&quot; keyProperty=&quot;returnedId&quot;&gt;\r\n\t\t\tSELECT LAST_INSERT_ID() as returnedId\r\n\t\t&lt;/selectKey&gt;\r\n\t&lt;/insert&gt;\r\n\r\nWhat is wrong? How can I get the generated key of this insert?\r\nThanks!","title":"MyBatis, how to get the auto generated key of an insert? [MySql]","body":"<p>how can I get the generated key of an insert with MyBatis?\nI read many pages about this question but I'm still blocked, could anyone help me, please?\nThis is my code:</p>\n\n<p>The table:</p>\n\n<pre><code>ID_ERROR long primary key\nDATE timestamp\nTYPE varchar\nMESSAGE varchar\nSOURCE varchar\n</code></pre>\n\n<p>The dao:</p>\n\n<pre><code>Long returnedId = 0L;\nMyMapper myMapper = this.sqlSession.getMapper(MyMapper.class);\nmyMapper.insertRecord(returnedId, Utils.now(), t.getClass().getName(), t.getMessage(), c.getName());\nreturn returnedId;\n</code></pre>\n\n<p>The mapper.java:</p>\n\n<pre><code>public void insertRecord(@Param(\"returnedId\") Long returnedId, @Param(\"timestamp\")Timestamp timestamp,@Param(\"type\") String type,@Param(\"message\") String message,@Param(\"source\") String source);\n</code></pre>\n\n<p>The mapper.xml</p>\n\n<pre><code> &lt;insert id=\"insertRecord\" parameterType=\"map\" useGeneratedKeys=\"true\"  keyProperty=\"ID_ERROR\"&gt;\n    INSERT INTO errors (\n        DATE,\n        TYPE,\n        MESSAGE,\n        SOURCE\n    )\n    VALUES (\n        #{timestamp},\n        #{type},\n        #{message},\n        #{source}\n    )\n    &lt;selectKey resultType=\"long\" order=\"AFTER\" keyProperty=\"returnedId\"&gt;\n        SELECT LAST_INSERT_ID() as returnedId\n    &lt;/selectKey&gt;\n&lt;/insert&gt;\n</code></pre>\n\n<p>What is wrong? How can I get the generated key of this insert?\nThanks!</p>\n"},{"tags":["java","eclipse-plugin","eclipse-rcp"],"comments":[{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":2,"creation_date":1693896988,"post_id":77041699,"comment_id":135816034,"body_markdown":"You set up a Target Platform which can be any version you like. Preferences &gt; Plug-in Development &gt; Target Platform. Don&#39;t try and mix versions from different releases, always use a target platform for a particular release.","body":"You set up a Target Platform which can be any version you like. Preferences &gt; Plug-in Development &gt; Target Platform. Don&#39;t try and mix versions from different releases, always use a target platform for a particular release."},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":2,"creation_date":1693904771,"post_id":77041699,"comment_id":135817547,"body_markdown":"The Eclipse [archive](https://archive.eclipse.org/eclipse/downloads/) has every release of Eclipse.","body":"The Eclipse <a href=\"https://archive.eclipse.org/eclipse/downloads/\" rel=\"nofollow noreferrer\">archive</a> has every release of Eclipse."},{"owner":{"account_id":445785,"reputation":10573,"user_id":838434,"accept_rate":88,"display_name":"MaDa"},"score":0,"creation_date":1693959968,"post_id":77041699,"comment_id":135827565,"body_markdown":"Thanks @greg-449, that was the way to go! You could change the comment to a proper answer.","body":"Thanks @greg-449, that was the way to go! You could change the comment to a proper answer."}],"answers":[{"tags":[],"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693981899,"creation_date":1693981899,"answer_id":77049479,"question_id":77041699,"body_markdown":"You use a &quot;Target Platform&quot; to specify which version of plug-ins to use. It is recommended that you always do this even when developing for the current Eclipse as it give you better control of exactly what is available.\r\n\r\nTarget Platforms are set up in the Preferences (Settings on macOS) in the &quot;Plug-in Development &gt; Target Platform&quot; page. You can have multiple target platforms but only one is active at a time.\r\n\r\nThe Eclipse [archive](https://archive.eclipse.org/eclipse/downloads/) has downloads for every version of Eclipse. These can be used as target platforms. \r\n\r\nDon&#39;t try and mix plug-ins from different Eclipse versions.\r\n","title":"Eclipse RCP plugin repository - old versions of plugins?","body":"<p>You use a &quot;Target Platform&quot; to specify which version of plug-ins to use. It is recommended that you always do this even when developing for the current Eclipse as it give you better control of exactly what is available.</p>\n<p>Target Platforms are set up in the Preferences (Settings on macOS) in the &quot;Plug-in Development &gt; Target Platform&quot; page. You can have multiple target platforms but only one is active at a time.</p>\n<p>The Eclipse <a href=\"https://archive.eclipse.org/eclipse/downloads/\" rel=\"nofollow noreferrer\">archive</a> has downloads for every version of Eclipse. These can be used as target platforms.</p>\n<p>Don't try and mix plug-ins from different Eclipse versions.</p>\n"}],"owner":{"account_id":445785,"reputation":10573,"user_id":838434,"accept_rate":88,"display_name":"MaDa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77049479,"answer_count":1,"score":0,"last_activity_date":1693981899,"creation_date":1693887170,"question_id":77041699,"body_markdown":"I&#39;m about to start modernization of a very old Eclipse RCP application, which uses Eclipse Helios (2011) as an IDE and runs on Java 1.6.\r\n\r\nThe first step I&#39;d like to do is to take a newer version of Eclipse IDE and force it to load that ancient project. What I came across is the following problem: old plugin dependencies are present:\r\n```lang:none\r\norg.eclipse.ui (3.203.100.v20230417-1307)\r\n```\r\nbut their minor versions have gone through a lot, too. What I need, for the example above, is:\r\n```lang:none\r\norg.eclipse.ui (3.6.2.M20110203-1100)\r\n```\r\n\r\nIs it really the case, that **I can&#39;t get core plugin versions in any version I desire**, only in the one bundled with the IDE?","title":"Eclipse RCP plugin repository - old versions of plugins?","body":"<p>I'm about to start modernization of a very old Eclipse RCP application, which uses Eclipse Helios (2011) as an IDE and runs on Java 1.6.</p>\n<p>The first step I'd like to do is to take a newer version of Eclipse IDE and force it to load that ancient project. What I came across is the following problem: old plugin dependencies are present:</p>\n<pre><code>org.eclipse.ui (3.203.100.v20230417-1307)\n</code></pre>\n<p>but their minor versions have gone through a lot, too. What I need, for the example above, is:</p>\n<pre><code>org.eclipse.ui (3.6.2.M20110203-1100)\n</code></pre>\n<p>Is it really the case, that <strong>I can't get core plugin versions in any version I desire</strong>, only in the one bundled with the IDE?</p>\n"},{"tags":["java","spring-boot","log4j","slf4j"],"comments":[{"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"score":0,"creation_date":1693982282,"post_id":77049475,"comment_id":135829553,"body_markdown":"Could you add the current pattern you have in your configuration ?","body":"Could you add the current pattern you have in your configuration ?"}],"owner":{"account_id":13266298,"reputation":1211,"user_id":9578985,"display_name":"Jerald Baker"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693981857,"creation_date":1693981857,"question_id":77049475,"body_markdown":"I am using SLf4J and springboot. \r\nI see that in logs, I see some lines of exception&#39;s stacktrace suppressed.\r\n\r\n    at org.x.x.Method$$EnhancerBySpringCGLIB$$c5ed3cb4.create(&lt;generated&gt;) ~[app-core-0.9.3-SNAPSHOT.jar!/:?]|\r\n    at org.x.x.Method$$FastClassBySpringCGLIB$$495e8f0c.invoke(&lt;generated&gt;) ~[app-core-0.9.3-SNAPSHOT.jar!/:?]|\r\n    ... suppressed 9 lines|\r\n    at org.x.x.Method$$EnhancerBySpringCGLIB$$ddbb65ef.create(&lt;generated&gt;) ~[app-core-0.9.3-SNAPSHOT.jar!/:?]|\r\n    ... suppressed 2 lines|\r\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_372]|\r\n    ... suppressed 7 lines|\r\n    ... 94 more|Caused by: java.lang.NullPointerException|\r\n\r\n\r\nHow to NOT suppress these &quot;suppressed X lines&quot; and elaborate the &quot;94 more&quot; in the logs?\r\n","title":"How to not suppress parts of exception stacktrace in Logs?","body":"<p>I am using SLf4J and springboot.\nI see that in logs, I see some lines of exception's stacktrace suppressed.</p>\n<pre><code>at org.x.x.Method$$EnhancerBySpringCGLIB$$c5ed3cb4.create(&lt;generated&gt;) ~[app-core-0.9.3-SNAPSHOT.jar!/:?]|\nat org.x.x.Method$$FastClassBySpringCGLIB$$495e8f0c.invoke(&lt;generated&gt;) ~[app-core-0.9.3-SNAPSHOT.jar!/:?]|\n... suppressed 9 lines|\nat org.x.x.Method$$EnhancerBySpringCGLIB$$ddbb65ef.create(&lt;generated&gt;) ~[app-core-0.9.3-SNAPSHOT.jar!/:?]|\n... suppressed 2 lines|\nat java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_372]|\n... suppressed 7 lines|\n... 94 more|Caused by: java.lang.NullPointerException|\n</code></pre>\n<p>How to NOT suppress these &quot;suppressed X lines&quot; and elaborate the &quot;94 more&quot; in the logs?</p>\n"},{"tags":["java","apache-camel","jms","enterprise-integration"],"comments":[{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":1,"creation_date":1693920458,"post_id":77000642,"comment_id":135820893,"body_markdown":"This question is off-topic and should either be re-worded or closed. Asking for the _best_ way to accomplish a particular task is going to elicit opinion-based answers rather than fact-based ones since it&#39;s a relative measure based almost entirely on your specific use-case.","body":"This question is off-topic and should either be re-worded or closed. Asking for the <i>best</i> way to accomplish a particular task is going to elicit opinion-based answers rather than fact-based ones since it&#39;s a relative measure based almost entirely on your specific use-case."},{"owner":{"account_id":1581346,"reputation":11,"user_id":1466675,"display_name":"hans lux"},"score":0,"creation_date":1693993838,"post_id":77000642,"comment_id":135831735,"body_markdown":"Thanks for the comment. I re-worded the question.\nI am not interested in an opnion-based answer, but the correct way of using the apache-camel api to handle exceptions and retries.","body":"Thanks for the comment. I re-worded the question. I am not interested in an opnion-based answer, but the correct way of using the apache-camel api to handle exceptions and retries."}],"owner":{"account_id":1581346,"reputation":11,"user_id":1466675,"display_name":"hans lux"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693981817,"creation_date":1693315481,"question_id":77000642,"body_markdown":"I receive a message via a message queue.\r\nThe message should be persisted and sent to a SOAP endpoint.\r\n\r\nWhen that SOAP endpoint is not available, delivery to that endpoint should be retried until\r\nit is sucessfully delivered.\r\nRetries should happen with a delay of 10 seconds.\r\n\r\nI tried several ways to achieve this.\r\n\r\nonException, errorHandler(noErrorHandler), transacted(), rollback()....\r\n\r\n\r\n\r\nWhat finally works is this.\r\n\r\n       \r\n```\r\nfrom(incomingQueue)\r\n                .routeId(&quot;incomingQueue&quot;)\r\n                .log(&quot;sending to partner&quot;)\r\n                .wireTap(persistOutgoingUri)\r\n                .doTry()\r\n                .to(sendViaSoap)\r\n                .log(&quot;Got Response for SOAP: ${body}&quot;)\r\n                .doCatch(IOException.class)\r\n                .log(&quot;SOAP delivery failed, requeuing the message...&quot;)\r\n                .delay(10000)\r\n                .to(incomingQueue);\r\n```\r\n\r\nBut I wonder, if that is the idiomatic way to do it in apache camel.","title":"Re-Queue/Re-Try a message on failure","body":"<p>I receive a message via a message queue.\nThe message should be persisted and sent to a SOAP endpoint.</p>\n<p>When that SOAP endpoint is not available, delivery to that endpoint should be retried until\nit is sucessfully delivered.\nRetries should happen with a delay of 10 seconds.</p>\n<p>I tried several ways to achieve this.</p>\n<p>onException, errorHandler(noErrorHandler), transacted(), rollback()....</p>\n<p>What finally works is this.</p>\n<pre><code>from(incomingQueue)\n                .routeId(&quot;incomingQueue&quot;)\n                .log(&quot;sending to partner&quot;)\n                .wireTap(persistOutgoingUri)\n                .doTry()\n                .to(sendViaSoap)\n                .log(&quot;Got Response for SOAP: ${body}&quot;)\n                .doCatch(IOException.class)\n                .log(&quot;SOAP delivery failed, requeuing the message...&quot;)\n                .delay(10000)\n                .to(incomingQueue);\n</code></pre>\n<p>But I wonder, if that is the idiomatic way to do it in apache camel.</p>\n"},{"tags":["java","selenium","selenium-webdriver","testng"],"answers":[{"tags":[],"owner":{"account_id":1516059,"reputation":303,"user_id":1417038,"display_name":"Escay"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1415280500,"creation_date":1415280500,"answer_id":26780717,"question_id":23149807,"body_markdown":"The option &#39;allow-return-values&#39; is not meant to test the return value &quot;hai&quot;. It is meant to allow @Test annotation on methods that have return values.\r\n\r\nBy default TestNG follows best practices for unit testing, which means a unit test method should not have a return value. However sometimes you want to add the @Test annotation to a method with a return value. If you do not specify &#39;allow-return-values&#39; in your Suite configuration TestNG will print out a warning and will not run the method as tests.\r\n\r\nThe warning TestNG gives is something like:\r\n\r\n&gt; Method public java.util.List a.B.getC(java.util.List) has a @Test annotation but also a return value: ignoring it. Use &#39;suite allow-return-values=&quot;true&quot;&#39; to fix this\r\n\r\nThe only useful example of allowing return values I have found so far is when your test class implements a certain interface and you want to test all interface methods by adding @Test annotations.\r\n\r\nSee [http://testng.org/doc/documentation-main.html][1] for the real documentation.\r\n\r\n\r\n  [1]: http://testng.org/doc/documentation-main.html","title":"How to use &quot;allow-return-values=&quot;true&quot;&quot; in TestNG test methods?","body":"<p>The option 'allow-return-values' is not meant to test the return value \"hai\". It is meant to allow @Test annotation on methods that have return values.</p>\n\n<p>By default TestNG follows best practices for unit testing, which means a unit test method should not have a return value. However sometimes you want to add the @Test annotation to a method with a return value. If you do not specify 'allow-return-values' in your Suite configuration TestNG will print out a warning and will not run the method as tests.</p>\n\n<p>The warning TestNG gives is something like:</p>\n\n<blockquote>\n  <p>Method public java.util.List a.B.getC(java.util.List) has a @Test annotation but also a return value: ignoring it. Use 'suite allow-return-values=\"true\"' to fix this</p>\n</blockquote>\n\n<p>The only useful example of allowing return values I have found so far is when your test class implements a certain interface and you want to test all interface methods by adding @Test annotations.</p>\n\n<p>See <a href=\"http://testng.org/doc/documentation-main.html\" rel=\"nofollow\">http://testng.org/doc/documentation-main.html</a> for the real documentation.</p>\n"}],"owner":{"account_id":4005953,"reputation":2281,"user_id":3300593,"accept_rate":81,"display_name":"Vinod"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8957,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693981507,"creation_date":1397807337,"question_id":23149807,"body_markdown":"I am beginner to [TestNG][1]. I about test method in official TestNG documentation. I am not clear with the use of `allow-return-values=&quot;true&quot;` can any one explain it briefly with example. I did one example I didn&#39;t get way the way of using,\r\n\r\nThis is my .xml\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot; &gt;\r\n    \r\n    &lt;suite name=&quot;newSuite&quot; parallel=&quot;methods&quot; thread-count=&quot;5&quot; allow-return-values=&quot;true&quot;&gt;\r\n    &lt;parameter name=&quot;browser&quot; value=&quot;Firefox&quot;&gt;&lt;/parameter&gt;\r\n    &lt;test name=&quot;dataprovider&quot; allow-return-values=&quot;true&quot;&gt;\r\n       &lt;classes&gt;\r\n          &lt;class name=&quot;com.tets.SampleTest&quot;&gt;&lt;/class&gt;\r\n       &lt;/classes&gt;\r\n    &lt;/test&gt;\r\n    &lt;/suite&gt;\r\nand my test class is as follows,\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public class SampleTest {\r\n    \r\n    @AfterMethod\r\n    public void teardown(Object returnValueFromTest){\r\n        //inspect returnValueFromTest and perform necessary clean up.\r\n    }\r\n    \r\n    \r\n    @Test\r\n    public String testEventGeneration(){\r\n        //generate event\r\n    \r\n        //returning generated e\tvent id.\r\n        return &quot;E1234&quot;;\r\n       \r\n    }\r\n    \r\n    @Test\r\n    public String testMarketGeneration(){\r\n        //generate market\r\n    \r\n        //returning generated market.\r\n        return &quot;hai&quot;;\r\n    }}\r\n\r\nHow and where can I get the return value from `testMarketGeneration` test method ?\r\n\r\n\r\n  [1]: http://testng.org/doc/index.html","title":"How to use &quot;allow-return-values=&quot;true&quot;&quot; in TestNG test methods?","body":"<p>I am beginner to <a href=\"http://testng.org/doc/index.html\" rel=\"nofollow\">TestNG</a>. I about test method in official TestNG documentation. I am not clear with the use of <code>allow-return-values=\"true\"</code> can any one explain it briefly with example. I did one example I didn't get way the way of using,</p>\n\n<p>This is my .xml</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!DOCTYPE suite SYSTEM \"http://testng.org/testng-1.0.dtd\" &gt;\n\n&lt;suite name=\"newSuite\" parallel=\"methods\" thread-count=\"5\" allow-return-values=\"true\"&gt;\n&lt;parameter name=\"browser\" value=\"Firefox\"&gt;&lt;/parameter&gt;\n&lt;test name=\"dataprovider\" allow-return-values=\"true\"&gt;\n   &lt;classes&gt;\n      &lt;class name=\"com.tets.SampleTest\"&gt;&lt;/class&gt;\n   &lt;/classes&gt;\n&lt;/test&gt;\n&lt;/suite&gt;\n</code></pre>\n\n<p>and my test class is as follows,</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class SampleTest {\n\n@AfterMethod\npublic void teardown(Object returnValueFromTest){\n    //inspect returnValueFromTest and perform necessary clean up.\n}\n\n\n@Test\npublic String testEventGeneration(){\n    //generate event\n\n    //returning generated e vent id.\n    return \"E1234\";\n\n}\n\n@Test\npublic String testMarketGeneration(){\n    //generate market\n\n    //returning generated market.\n    return \"hai\";\n}}\n</code></pre>\n\n<p>How and where can I get the return value from <code>testMarketGeneration</code> test method ?</p>\n"},{"tags":["java","aiml"],"comments":[{"owner":{"account_id":9739137,"reputation":886,"user_id":7221393,"accept_rate":89,"display_name":"Dev_Man"},"score":0,"creation_date":1494479383,"post_id":43463390,"comment_id":74847139,"body_markdown":"were you able to find any solution?","body":"were you able to find any solution?"},{"owner":{"account_id":5700535,"reputation":441,"user_id":4915000,"accept_rate":71,"display_name":"Kavipriya"},"score":0,"creation_date":1494568154,"post_id":43463390,"comment_id":74893037,"body_markdown":"No, I haven&#39;t found any solution for this problem. Luckily for my project that was not that important.","body":"No, I haven&#39;t found any solution for this problem. Luckily for my project that was not that important."},{"owner":{"account_id":3893766,"reputation":1244,"user_id":3223340,"accept_rate":38,"display_name":"Jugi"},"score":0,"creation_date":1505988263,"post_id":43463390,"comment_id":79641790,"body_markdown":"hi kavipriya. Did u find a solution for this ?","body":"hi kavipriya. Did u find a solution for this ?"},{"owner":{"account_id":5700535,"reputation":441,"user_id":4915000,"accept_rate":71,"display_name":"Kavipriya"},"score":0,"creation_date":1506083351,"post_id":43463390,"comment_id":79688922,"body_markdown":"No.. I couldn&#39;t make it work.. I shifted to other project and left that.. so haven&#39;t tried again.. please let me know if you get any solution.","body":"No.. I couldn&#39;t make it work.. I shifted to other project and left that.. so haven&#39;t tried again.. please let me know if you get any solution."}],"answers":[{"tags":[],"owner":{"account_id":6959701,"reputation":89,"user_id":5339590,"display_name":"Hamza Idrees"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1497171734,"creation_date":1497171734,"answer_id":44482099,"question_id":43463390,"body_markdown":"Explore program-ab and see how its tags work. I created a tag by replicating code for person tag in program ab code.","title":"AIMLProcessorExtension: tag not working in aiml","body":"<p>Explore program-ab and see how its tags work. I created a tag by replicating code for person tag in program ab code.</p>\n"},{"tags":[],"owner":{"account_id":25335219,"reputation":11,"user_id":19154464,"display_name":"Ahmad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693981342,"creation_date":1693981342,"answer_id":77049422,"question_id":43463390,"body_markdown":"I faced the same problem and after a long time of trying different solutions I could find the solution for the problem why you get the no answer from java side when you put your made up tag &lt;check&gt; in your aiml file, and instead the tag is converted automatically to &lt;check/&gt; tag.\r\n\r\nIt was an issue of getting the dependencies wight in the pom.xml file. you should use the dependencies used in the following [pom.xml][1]. This pom.xml is from the same [repository][2] where you found the example of AIMLExtension.\r\n\r\nI added the following lines to the properties in my pom.xml:\r\n\r\n        &lt;slf4j.version&gt;1.7.5&lt;/slf4j.version&gt;\r\n\t\t&lt;httpclient.version&gt;4.2.5&lt;/httpclient.version&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n\r\nand the following lines to the dependencies: \r\n\r\n        &lt;dependency&gt;\r\n\t    \t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t    \t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n\t    \t&lt;version&gt;${slf4j.version}&lt;/version&gt;\r\n\t    &lt;/dependency&gt;\r\n\t    &lt;dependency&gt;\r\n\t    \t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t    \t&lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\r\n\t    \t&lt;version&gt;${slf4j.version}&lt;/version&gt;\r\n\t    \t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t    &lt;/dependency&gt;\r\n\t    &lt;dependency&gt;\r\n\t    \t&lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n\t    \t&lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n\t    \t&lt;version&gt;1.0.13&lt;/version&gt;\r\n\t    \t&lt;optional&gt;true&lt;/optional&gt;\r\n\t     &lt;/dependency&gt;\r\n    \r\n\r\n\r\nYou should make sure that you have defined a class to write the new aiml files as shown in ([3.1. Adding Custom Patterns][3]) before running and testing your chat bot \r\n\r\n\r\n  [1]: https://github.com/lumenrobot/program-ab/blob/master/pom.xml\r\n  [2]: https://github.com/lumenrobot/program-ab/blob/master/src/main/java/org/alicebot/ab/PCAIMLProcessorExtension.java\r\n  [3]: https://howtodoinjava.com/java/library/java-aiml-chatbot-example/","title":"AIMLProcessorExtension: tag not working in aiml","body":"<p>I faced the same problem and after a long time of trying different solutions I could find the solution for the problem why you get the no answer from java side when you put your made up tag  in your aiml file, and instead the tag is converted automatically to  tag.</p>\n<p>It was an issue of getting the dependencies wight in the pom.xml file. you should use the dependencies used in the following <a href=\"https://github.com/lumenrobot/program-ab/blob/master/pom.xml\" rel=\"nofollow noreferrer\">pom.xml</a>. This pom.xml is from the same <a href=\"https://github.com/lumenrobot/program-ab/blob/master/src/main/java/org/alicebot/ab/PCAIMLProcessorExtension.java\" rel=\"nofollow noreferrer\">repository</a> where you found the example of AIMLExtension.</p>\n<p>I added the following lines to the properties in my pom.xml:</p>\n<pre><code>    &lt;slf4j.version&gt;1.7.5&lt;/slf4j.version&gt;\n    &lt;httpclient.version&gt;4.2.5&lt;/httpclient.version&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n</code></pre>\n<p>and the following lines to the dependencies:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n        &lt;version&gt;${slf4j.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\n        &lt;version&gt;${slf4j.version}&lt;/version&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n        &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n        &lt;version&gt;1.0.13&lt;/version&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n     &lt;/dependency&gt;\n</code></pre>\n<p>You should make sure that you have defined a class to write the new aiml files as shown in (<a href=\"https://howtodoinjava.com/java/library/java-aiml-chatbot-example/\" rel=\"nofollow noreferrer\">3.1. Adding Custom Patterns</a>) before running and testing your chat bot</p>\n"}],"owner":{"account_id":5700535,"reputation":441,"user_id":4915000,"accept_rate":71,"display_name":"Kavipriya"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":396,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1693981342,"creation_date":1492488389,"question_id":43463390,"body_markdown":"I am trying to create my own tag in `aiml` using program tab. The tag is not working. What is the problem?\r\n\r\nJava code:\r\n\r\n    public class AIMLExtension implements AIMLProcessorExtension{\r\n\t  public Set&lt;String&gt; extensionTagNames = Utilities.stringSet(&quot;check&quot;);\r\n\t  @Override\r\n\t  public Set&lt;String&gt; extensionTagSet() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\treturn extensionTagNames;\r\n\t  }\r\n\r\n\t  private String contactId(Node node, ParseState ps) {\r\n        return &quot;Success :P&quot;;\r\n      }\r\n\t\r\n\t  @Override\r\n\t  public String recursEval(Node node, ParseState ps) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\ttry {\r\n            String nodeName = node.getNodeName();\r\n            if (nodeName.equals(&quot;check&quot;))\r\n                return contactId(node, ps);\r\n            else return (AIMLProcessor.genericXML(node, ps));\r\n        } catch (Exception ex) {\r\n            ex.printStackTrace();\r\n            return &quot;&quot;;\r\n        }\r\n\t  }\r\n    }\r\n\r\nAIML code: I am getting `I have no answer`for the below code.\r\n\r\n    &lt;category&gt;\r\n      &lt;pattern&gt;CHECKING EXTENSION&lt;/pattern&gt;\r\n      &lt;template&gt;RESTCALL &lt;check&gt; &lt;/template&gt;\r\n    &lt;/category&gt;\r\n\r\n\r\n\r\nAIML code : I am getting `RESTCALL &lt;check/&gt;` itself for the below code.\r\n\r\n    &lt;category&gt;\r\n      &lt;pattern&gt;CHECKING EXTENSION&lt;/pattern&gt;\r\n      &lt;template&gt;RESTCALL &lt;check/&gt; &lt;/template&gt;\r\n    &lt;/category&gt;","title":"AIMLProcessorExtension: tag not working in aiml","body":"<p>I am trying to create my own tag in <code>aiml</code> using program tab. The tag is not working. What is the problem?</p>\n\n<p>Java code:</p>\n\n<pre><code>public class AIMLExtension implements AIMLProcessorExtension{\n  public Set&lt;String&gt; extensionTagNames = Utilities.stringSet(\"check\");\n  @Override\n  public Set&lt;String&gt; extensionTagSet() {\n    // TODO Auto-generated method stub\n    return extensionTagNames;\n  }\n\n  private String contactId(Node node, ParseState ps) {\n    return \"Success :P\";\n  }\n\n  @Override\n  public String recursEval(Node node, ParseState ps) {\n    // TODO Auto-generated method stub\n    try {\n        String nodeName = node.getNodeName();\n        if (nodeName.equals(\"check\"))\n            return contactId(node, ps);\n        else return (AIMLProcessor.genericXML(node, ps));\n    } catch (Exception ex) {\n        ex.printStackTrace();\n        return \"\";\n    }\n  }\n}\n</code></pre>\n\n<p>AIML code: I am getting <code>I have no answer</code>for the below code.</p>\n\n<pre><code>&lt;category&gt;\n  &lt;pattern&gt;CHECKING EXTENSION&lt;/pattern&gt;\n  &lt;template&gt;RESTCALL &lt;check&gt; &lt;/template&gt;\n&lt;/category&gt;\n</code></pre>\n\n<p>AIML code : I am getting <code>RESTCALL &lt;check/&gt;</code> itself for the below code.</p>\n\n<pre><code>&lt;category&gt;\n  &lt;pattern&gt;CHECKING EXTENSION&lt;/pattern&gt;\n  &lt;template&gt;RESTCALL &lt;check/&gt; &lt;/template&gt;\n&lt;/category&gt;\n</code></pre>\n"},{"tags":["java","collections","set"],"comments":[{"owner":{"account_id":224454,"reputation":9570,"user_id":484293,"accept_rate":97,"display_name":"blubb"},"score":0,"creation_date":1466783315,"post_id":38015282,"comment_id":63476636,"body_markdown":"Are you looking for Guava&#39;s `Sets.symmetricDifference(source.keySet(), target.keySet())`?","body":"Are you looking for Guava&#39;s <code>Sets.symmetricDifference(source.keySet(), target.keySet())</code>?"}],"answers":[{"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1693981273,"creation_date":1466777192,"answer_id":38015376,"question_id":38015282,"body_markdown":"Sets allow you to **remove** elements as well.\r\n\r\nIf generating &quot;helper&quot; sets is not a problem for you (because of too many entries; what about:\r\n\r\n    Set&lt;String&gt; sources = get a copy of all source entries\r\n    Set&lt;String&gt; targets = get a copy of all target entries\r\n\r\nthen:\r\n\r\n    sources.removeAll(targets) ... leaves only entries in sources that are only in sources, not in target\r\n\r\nwhereas \r\n\r\n    sources.retainAll(targets) ... leaves only entries that are in both sets\r\n\r\nYou can work your way from here ...","title":"How to get the difference between two maps Java?","body":"<p>Sets allow you to <strong>remove</strong> elements as well.</p>\n<p>If generating &quot;helper&quot; sets is not a problem for you (because of too many entries; what about:</p>\n<pre><code>Set&lt;String&gt; sources = get a copy of all source entries\nSet&lt;String&gt; targets = get a copy of all target entries\n</code></pre>\n<p>then:</p>\n<pre><code>sources.removeAll(targets) ... leaves only entries in sources that are only in sources, not in target\n</code></pre>\n<p>whereas</p>\n<pre><code>sources.retainAll(targets) ... leaves only entries that are in both sets\n</code></pre>\n<p>You can work your way from here ...</p>\n"},{"tags":[],"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1466777245,"creation_date":1466777245,"answer_id":38015391,"question_id":38015282,"body_markdown":"You may use a copy `Set` and `removeAll` :\r\n\r\n\r\n    Set&lt;String&gt; difference = new HashSet&lt;String&gt;(sourceKeysList);\r\n    difference.removeAll(targetKeysList);\r\n\r\n\r\nSee [The Set Interface][1]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/collections/interfaces/set.html","title":"How to get the difference between two maps Java?","body":"<p>You may use a copy <code>Set</code> and <code>removeAll</code> :</p>\n\n<pre><code>Set&lt;String&gt; difference = new HashSet&lt;String&gt;(sourceKeysList);\ndifference.removeAll(targetKeysList);\n</code></pre>\n\n<p>See <a href=\"https://docs.oracle.com/javase/tutorial/collections/interfaces/set.html\" rel=\"noreferrer\">The Set Interface</a></p>\n"},{"tags":[],"owner":{"account_id":7127146,"reputation":3476,"user_id":5449709,"accept_rate":77,"display_name":"Daniel Stradowski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1466777485,"creation_date":1466777485,"answer_id":38015475,"question_id":38015282,"body_markdown":"1. It shows mapping keys available in sourceRecords but not in targetRecords.\r\n\r\n`sourceKeysList.removeAll(targetKeysList)`\r\n\r\n2. It shows mapping keys available in targetRecords but not in sourceRecords.\r\n\r\n`targetKeysList.removeAll(sourceKeysList)`","title":"How to get the difference between two maps Java?","body":"<ol>\n<li>It shows mapping keys available in sourceRecords but not in targetRecords.</li>\n</ol>\n\n<p><code>sourceKeysList.removeAll(targetKeysList)</code></p>\n\n<ol start=\"2\">\n<li>It shows mapping keys available in targetRecords but not in sourceRecords.</li>\n</ol>\n\n<p><code>targetKeysList.removeAll(sourceKeysList)</code></p>\n"},{"tags":[],"owner":{"account_id":170188,"reputation":11294,"user_id":396730,"accept_rate":90,"display_name":"Philipp Wendler"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1693981093,"creation_date":1490181638,"answer_id":42950187,"question_id":38015282,"body_markdown":"You can use [Guava](https://github.com/google/guava)&#39;s [`Maps.difference(Map&lt;K, V&gt; left, Map&lt;K, V&gt; right)`][2] method. It returns a [`MapDifference`](https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/MapDifference.html) object, which has methods for getting all four kinds of map entries:\r\n\r\n- equally present in left and right map\r\n- only in left map\r\n- only in right map\r\n- key present in both maps, but with different values\r\n\r\nSo in your case, it could be solved with only 3 lines of code:\r\n\r\n    MapDifference&lt;String, Record&gt; diff = Maps.difference(sourceRecords, targetRecords);\r\n    Set&lt;String&gt; keysOnlyInSource = diff.entriesOnlyOnLeft().keySet();\r\n    Set&lt;String&gt; keysOnlyInTarget = diff.entriesOnlyOnRight().keySet();\r\n\r\n\r\n\r\n[2]: https://guava.dev/releases/snapshot/api/docs/com/google/common/collect/Maps.html#difference(java.util.Map,java.util.Map)","title":"How to get the difference between two maps Java?","body":"<p>You can use <a href=\"https://github.com/google/guava\" rel=\"nofollow noreferrer\">Guava</a>'s <a href=\"https://guava.dev/releases/snapshot/api/docs/com/google/common/collect/Maps.html#difference(java.util.Map,java.util.Map)\" rel=\"nofollow noreferrer\"><code>Maps.difference(Map&lt;K, V&gt; left, Map&lt;K, V&gt; right)</code></a> method. It returns a <a href=\"https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/MapDifference.html\" rel=\"nofollow noreferrer\"><code>MapDifference</code></a> object, which has methods for getting all four kinds of map entries:</p>\n<ul>\n<li>equally present in left and right map</li>\n<li>only in left map</li>\n<li>only in right map</li>\n<li>key present in both maps, but with different values</li>\n</ul>\n<p>So in your case, it could be solved with only 3 lines of code:</p>\n<pre><code>MapDifference&lt;String, Record&gt; diff = Maps.difference(sourceRecords, targetRecords);\nSet&lt;String&gt; keysOnlyInSource = diff.entriesOnlyOnLeft().keySet();\nSet&lt;String&gt; keysOnlyInTarget = diff.entriesOnlyOnRight().keySet();\n</code></pre>\n"}],"owner":{"account_id":8698646,"reputation":203,"user_id":6509273,"display_name":"Robot"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38578,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":38015376,"answer_count":4,"score":19,"last_activity_date":1693981273,"creation_date":1466776895,"question_id":38015282,"body_markdown":"I have two maps as below : \r\n\r\n    Map&lt;String, Record&gt; sourceRecords;\r\n    Map&lt;String, Record&gt; targetRecords;\r\n\r\nI want to get the keys differ from each of the maps.i.e. \r\n\r\n 1. It shows mapping keys available in sourceRecords but not in targetRecords.\r\n 2. It shows mapping keys available in targetRecords but not in sourceRecords.\r\n\r\n\r\nI did it as below :\r\n\r\n    Set&lt;String&gt; sourceKeysList = new HashSet&lt;String&gt;(sourceRecords.keySet());\r\n    Set&lt;String&gt; targetKeysList = new HashSet&lt;String&gt;(targetRecords.keySet());\r\n    \r\n    SetView&lt;String&gt; intersection = Sets.intersection(sourceKeysList, targetKeysList);\r\n    Iterator it = intersection.iterator();\r\n    while (it.hasNext()) {\r\n    \tObject object = (Object) it.next();\r\n    \tSystem.out.println(object.toString());\r\n    }\r\n    \t\t\r\n    SetView&lt;String&gt; difference = Sets.symmetricDifference(sourceKeysList, targetKeysList);\r\n    ImmutableSet&lt;String&gt; immutableSet = difference.immutableCopy();\r\n\r\n\r\n**EDIT**\r\n\r\n    if(sourceKeysList.removeAll(targetKeysList)){\r\n    \t\t\t//distinct sourceKeys\r\n    \t\t\tIterator&lt;String&gt; it1 = sourceKeysList.iterator();\r\n    \t\t\twhile (it1.hasNext()) {\r\n    \t\t\t\tString id = (String) it1.next();\r\n    \t\t\t\tString resultMessage = &quot;This ID exists in source file but not in target file&quot;;\r\n    \t\t\t\tSystem.out.println(resultMessage);\r\n    \t\t\t\tvalues = createMessageRow(id, resultMessage);\r\n    \t\t\t\tresult.add(values);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tif(targetKeysList.removeAll(sourceKeysList)){\r\n    \t\t\t//distinct targetKeys\r\n    \t\t\tIterator&lt;String&gt; it1 = targetKeysList.iterator();\r\n    \t\t\twhile (it1.hasNext()) {\r\n    \t\t\t\tString id = (String) it1.next();\r\n    \t\t\t\tString resultMessage = &quot;This ID exists in target file but not in source file&quot;;\r\n    \t\t\t\tSystem.out.println(resultMessage);\r\n    \t\t\t\tvalues = createMessageRow(id, resultMessage);\r\n    \t\t\t\tresult.add(values);\r\n    \t\t\t}\r\n    \t\t}\r\n\r\nI am able to find the common keys but not distinct keys. Please help.\r\n","title":"How to get the difference between two maps Java?","body":"<p>I have two maps as below : </p>\n\n<pre><code>Map&lt;String, Record&gt; sourceRecords;\nMap&lt;String, Record&gt; targetRecords;\n</code></pre>\n\n<p>I want to get the keys differ from each of the maps.i.e. </p>\n\n<ol>\n<li>It shows mapping keys available in sourceRecords but not in targetRecords.</li>\n<li>It shows mapping keys available in targetRecords but not in sourceRecords.</li>\n</ol>\n\n<p>I did it as below :</p>\n\n<pre><code>Set&lt;String&gt; sourceKeysList = new HashSet&lt;String&gt;(sourceRecords.keySet());\nSet&lt;String&gt; targetKeysList = new HashSet&lt;String&gt;(targetRecords.keySet());\n\nSetView&lt;String&gt; intersection = Sets.intersection(sourceKeysList, targetKeysList);\nIterator it = intersection.iterator();\nwhile (it.hasNext()) {\n    Object object = (Object) it.next();\n    System.out.println(object.toString());\n}\n\nSetView&lt;String&gt; difference = Sets.symmetricDifference(sourceKeysList, targetKeysList);\nImmutableSet&lt;String&gt; immutableSet = difference.immutableCopy();\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<pre><code>if(sourceKeysList.removeAll(targetKeysList)){\n            //distinct sourceKeys\n            Iterator&lt;String&gt; it1 = sourceKeysList.iterator();\n            while (it1.hasNext()) {\n                String id = (String) it1.next();\n                String resultMessage = \"This ID exists in source file but not in target file\";\n                System.out.println(resultMessage);\n                values = createMessageRow(id, resultMessage);\n                result.add(values);\n            }\n        }\n        if(targetKeysList.removeAll(sourceKeysList)){\n            //distinct targetKeys\n            Iterator&lt;String&gt; it1 = targetKeysList.iterator();\n            while (it1.hasNext()) {\n                String id = (String) it1.next();\n                String resultMessage = \"This ID exists in target file but not in source file\";\n                System.out.println(resultMessage);\n                values = createMessageRow(id, resultMessage);\n                result.add(values);\n            }\n        }\n</code></pre>\n\n<p>I am able to find the common keys but not distinct keys. Please help.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","hibernate-criteria"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1467864394,"post_id":38237321,"comment_id":63895946,"body_markdown":"Show your entity classes. Joins like this are typically handled for you.","body":"Show your entity classes. Joins like this are typically handled for you."},{"owner":{"account_id":8753643,"reputation":61,"user_id":6545864,"display_name":"Nicolas Ding"},"score":0,"creation_date":1467865056,"post_id":38237321,"comment_id":63896077,"body_markdown":"I added the student and the school class.","body":"I added the student and the school class."},{"owner":{"account_id":7951510,"reputation":584,"user_id":6002202,"accept_rate":42,"display_name":"subbu royal"},"score":0,"creation_date":1467866282,"post_id":38237321,"comment_id":63896342,"body_markdown":"can you give full stack trace of exception?","body":"can you give full stack trace of exception?"},{"owner":{"account_id":21375357,"reputation":82,"user_id":15742199,"display_name":"baumeister"},"score":0,"creation_date":1620761575,"post_id":38237321,"comment_id":119295724,"body_markdown":"I&#39;ve not tried it out and maybe there&#39;s also another mistake: from looking at the code fragments your Specification does `root.join(&quot;student&quot;, JoinType.LEFT);` whereas the attribute in class School is called students (with an s at the end). That would also fit to the error message.","body":"I&#39;ve not tried it out and maybe there&#39;s also another mistake: from looking at the code fragments your Specification does <code>root.join(&quot;student&quot;, JoinType.LEFT);</code> whereas the attribute in class School is called students (with an s at the end). That would also fit to the error message."}],"answers":[{"tags":[],"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1467866008,"creation_date":1467866008,"answer_id":38237581,"question_id":38237321,"body_markdown":"This is how I do it\r\n\r\n\t\tEntityManager em = emf.createEntityManager();\r\n\t\tCriteriaBuilder cb = em.getCriteriaBuilder();\r\n\t\tCriteriaQuery&lt;Object&gt; cq = cb.createQuery();\r\n\t\tRoot&lt;Item&gt; ri = cq.from(School.class);\r\n\r\n\t\t// joins\r\n\t\tJoin&lt;Object, Object&gt; h = ri.join(&quot;Student&quot;);\r\n        Query query = em.createQuery(cq);\r\n\t\tList&lt;Object[]&gt; result = query.getResultList();\r\n\r\nBut as you have your Entities setup, which not just use JPA?\r\n\r\n","title":"How to join two tables using JPA Criteria Builder?","body":"<p>This is how I do it</p>\n\n<pre><code>    EntityManager em = emf.createEntityManager();\n    CriteriaBuilder cb = em.getCriteriaBuilder();\n    CriteriaQuery&lt;Object&gt; cq = cb.createQuery();\n    Root&lt;Item&gt; ri = cq.from(School.class);\n\n    // joins\n    Join&lt;Object, Object&gt; h = ri.join(\"Student\");\n    Query query = em.createQuery(cq);\n    List&lt;Object[]&gt; result = query.getResultList();\n</code></pre>\n\n<p>But as you have your Entities setup, which not just use JPA?</p>\n"}],"owner":{"account_id":8753643,"reputation":61,"user_id":6545864,"display_name":"Nicolas Ding"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11195,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1693980190,"creation_date":1467863806,"question_id":38237321,"body_markdown":"I have an sql table called school, and another called student. Every school has an ID, and every student has a &quot;school ID&quot;, which is the ID of the school they belong to.\r\nNow I want to find all schools in which there is a student called &quot;John&quot;.\r\nThe SQL syntax would be something like : \r\n&lt;!-- language: lang-sql --&gt;\r\n\r\n    SELECT * FROM school \r\n    INNER JOIN student\r\n       on student.school_id = school.id\r\n    where student.name = &quot;John&quot;\r\n\r\nHowever, I have to use the Spring Boot Specification to make my Query (ie use it like) : \r\n\r\n    schoolDao.findAll(new mySpecification(&quot;John&quot;));\r\n\r\nI have to use that because there is already a Specification and I just want to add a new on top of it : \r\n\r\n    schoolDao.findAll(\r\n        (Specification) Specifications.where(new oldSpecification(), new mySpecification(&quot;John&quot;));\r\n\r\nSo how can I do that ? \r\n\r\nI tried \r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public Predicate toPredicate(Root&lt;T&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder cb) {\r\n    \tif (this.filterTag == &quot;&quot;) {\r\n    \t\treturn null;\r\n    \t}\r\n    \tClass clazz = query.getResultType();\r\n        if (clazz.equals(Long.class) || clazz.equals(long.class)) {\r\n            return null;\r\n        }\r\n        Join&lt;School,Student&gt; tags = root.join(&quot;student&quot;, JoinType.LEFT);\r\n        \r\n    \treturn cb.equal(tags.get(&quot;name&quot;), &quot;John&quot;);\r\n    }\r\n\r\nbut it doesn&#39;t work. Anyone can help ?\r\n\r\nEDIT : The Student class\r\n\r\n    @Entity\r\n    @Table(name = &quot;student&quot;)\r\n    public class Student implements Serializable {\r\n    \r\n        private static final long serialVersionUID = 1L;\r\n    \r\n        @ManyToOne\r\n        private Long schoolId;\r\n    \r\n        private String name;\r\n    \r\n        public Long getSchoolId() {\r\n            return schoolId;\r\n        }\r\n    \r\n        public void setSchoolId(Long schoolId) {\r\n            this.schoolId = schoolId;\r\n        }\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n    }\r\n\r\nand the School class : \r\n\r\n    @Entity\r\n    @Table(name = &quot;school&quot;)\r\n    public class School implements Serializable {\r\n    \r\n        private static final long serialVersionUID = 1L;\r\n    \r\n        //other fields\r\n        \r\n        @OneToMany(targetEntity = Student.class, mappedBy = &quot;schoolId&quot;)\r\n        @Transient\r\n        private List&lt;Student&gt; students = new ArrayList&lt;Student&gt;();\r\n        \r\n       //all getters and setters\r\n    }\r\n\r\nEDIT 2 : \r\n\r\nThe error is \r\n\r\n    java.lang.IllegalArgumentException: Unable to locate Attribute  with the the given name [student] on this ManagedType [School]\r\n    at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:384) ~[spring-orm-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:227) ~[spring-orm-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:417) ~[spring-orm-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:59) ~[spring-tx-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:213) ~[spring-tx-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:147) ~[spring-tx-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:131) ~[spring-data-jpa-1.9.1.RELEASE.jar!/:na]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92) ~[spring-aop-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:208) ~[spring-aop-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat com.sun.proxy.$Proxy113.findAll(Unknown Source) ~[na:na]\r\n    \tat com.visenze.evaluation.service.SearchExperimentService.getSearchExperiments(SearchExperimentService.java:132) ~[classes!/:na]\r\n    \tat com.visenze.evaluation.service.SearchExperimentService$$FastClassBySpringCGLIB$$30203a2c.invoke(&lt;generated&gt;) ~[classes!/:na]\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204) ~[spring-core-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:650) ~[spring-aop-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat com.visenze.evaluation.service.SearchExperimentService$$EnhancerBySpringCGLIB$$2cf73334.getSearchExperiments(&lt;generated&gt;) ~[classes!/:na]\r\n    \tat com.visenze.evaluation.controller.SearchExperimentController.getSearchExperiments(SearchExperimentController.java:126) ~[classes!/:na]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_92]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_92]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_92]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_92]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:222) ~[spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137) ~[spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110) ~[spring-webmvc-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:814) ~[spring-webmvc-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:737) ~[spring-webmvc-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85) ~[spring-webmvc-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959) ~[spring-webmvc-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893) ~[spring-webmvc-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970) [spring-webmvc-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:861) [spring-webmvc-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:622) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846) [spring-webmvc-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:729) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) [tomcat-embed-websocket-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.springframework.boot.actuate.autoconfigure.EndpointWebMvcAutoConfiguration$ApplicationContextHeaderFilter.doFilterInternal(EndpointWebMvcAutoConfiguration.java:242) [spring-boot-actuator-1.3.0.RELEASE.jar!/:1.3.0.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.springframework.boot.actuate.trace.WebRequestTraceFilter.doFilterInternal(WebRequestTraceFilter.java:111) [spring-boot-actuator-1.3.0.RELEASE.jar!/:1.3.0.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:316) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:114) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:122) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:169) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:48) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:158) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:120) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:91) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:53) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:213) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:176) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:87) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:121) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.springframework.boot.actuate.autoconfigure.MetricsFilter.doFilterInternal(MetricsFilter.java:103) [spring-boot-actuator-1.3.0.RELEASE.jar!/:1.3.0.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:217) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:673) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1500) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1456) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_92]\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_92]\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\r\n    \tat java.lang.Thread.run(Thread.java:745) [na:1.8.0_92]\r\n    Caused by: java.lang.IllegalArgumentException: Unable to locate Attribute  with the the given name [ExperimentTag] on this ManagedType [com.visenze.evaluation.model.base.IdEntity]\r\n    \tat org.hibernate.jpa.internal.metamodel.AbstractManagedType.checkNotNull(AbstractManagedType.java:144) ~[hibernate-entitymanager-4.3.11.Final.jar!/:4.3.11.Final]\r\n    \tat org.hibernate.jpa.internal.metamodel.AbstractManagedType.getAttribute(AbstractManagedType.java:130) ~[hibernate-entitymanager-4.3.11.Final.jar!/:4.3.11.Final]\r\n    \tat org.hibernate.jpa.internal.metamodel.AbstractManagedType.getAttribute(AbstractManagedType.java:128) ~[hibernate-entitymanager-4.3.11.Final.jar!/:4.3.11.Final]\r\n    \tat org.hibernate.jpa.internal.metamodel.AbstractManagedType.getAttribute(AbstractManagedType.java:128) ~[hibernate-entitymanager-4.3.11.Final.jar!/:4.3.11.Final]\r\n    \tat org.hibernate.jpa.criteria.path.AbstractFromImpl.locateAttributeInternal(AbstractFromImpl.java:133) ~[hibernate-entitymanager-4.3.11.Final.jar!/:4.3.11.Final]\r\n    \tat org.hibernate.jpa.criteria.path.AbstractPathImpl.locateAttribute(AbstractPathImpl.java:221) ~[hibernate-entitymanager-4.3.11.Final.jar!/:4.3.11.Final]\r\n    \tat org.hibernate.jpa.criteria.path.AbstractFromImpl.join(AbstractFromImpl.java:419) ~[hibernate-entitymanager-4.3.11.Final.jar!/:4.3.11.Final]\r\n    \tat org.hibernate.jpa.criteria.path.AbstractFromImpl.join(AbstractFromImpl.java:405) ~[hibernate-entitymanager-4.3.11.Final.jar!/:4.3.11.Final]\r\n    \tat com.visenze.evaluation.dao.jpa.TagFilterSpecification.toPredicate(TagFilterSpecification.java:39) ~[classes!/:na]\r\n    \tat org.springframework.data.jpa.domain.Specifications$ComposedSpecification.toPredicate(Specifications.java:189) ~[spring-data-jpa-1.9.1.RELEASE.jar!/:na]\r\n    \tat org.springframework.data.jpa.domain.Specifications.toPredicate(Specifications.java:99) ~[spring-data-jpa-1.9.1.RELEASE.jar!/:na]\r\n    \tat org.springframework.data.jpa.repository.support.SimpleJpaRepository.applySpecificationToCriteria(SimpleJpaRepository.java:583) ~[spring-data-jpa-1.9.1.RELEASE.jar!/:na]\r\n    \tat org.springframework.data.jpa.repository.support.SimpleJpaRepository.getQuery(SimpleJpaRepository.java:534) ~[spring-data-jpa-1.9.1.RELEASE.jar!/:na]\r\n    \tat org.springframework.data.jpa.repository.support.SimpleJpaRepository.getQuery(SimpleJpaRepository.java:519) ~[spring-data-jpa-1.9.1.RELEASE.jar!/:na]\r\n    \tat org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll(SimpleJpaRepository.java:401) ~[spring-data-jpa-1.9.1.RELEASE.jar!/:na]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_92]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_92]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_92]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_92]\r\n    \tat org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.executeMethodOn(RepositoryFactorySupport.java:483) ~[spring-data-commons-1.11.1.RELEASE.jar!/:na]\r\n    \tat org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.doInvoke(RepositoryFactorySupport.java:468) ~[spring-data-commons-1.11.1.RELEASE.jar!/:na]\r\n    \tat org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.invoke(RepositoryFactorySupport.java:440) ~[spring-data-commons-1.11.1.RELEASE.jar!/:na]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:61) ~[spring-data-commons-1.11.1.RELEASE.jar!/:na]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99) ~[spring-tx-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281) ~[spring-tx-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96) ~[spring-tx-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:136) ~[spring-tx-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\r\n    \t... 111 common frames omitted\r\n\r\nThanks\r\n\r\n","title":"How to join two tables using JPA Criteria Builder?","body":"<p>I have an sql table called school, and another called student. Every school has an ID, and every student has a &quot;school ID&quot;, which is the ID of the school they belong to.\nNow I want to find all schools in which there is a student called &quot;John&quot;.\nThe SQL syntax would be something like :</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT * FROM school \nINNER JOIN student\n   on student.school_id = school.id\nwhere student.name = &quot;John&quot;\n</code></pre>\n<p>However, I have to use the Spring Boot Specification to make my Query (ie use it like) :</p>\n<pre><code>schoolDao.findAll(new mySpecification(&quot;John&quot;));\n</code></pre>\n<p>I have to use that because there is already a Specification and I just want to add a new on top of it :</p>\n<pre><code>schoolDao.findAll(\n    (Specification) Specifications.where(new oldSpecification(), new mySpecification(&quot;John&quot;));\n</code></pre>\n<p>So how can I do that ?</p>\n<p>I tried</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Predicate toPredicate(Root&lt;T&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder cb) {\n    if (this.filterTag == &quot;&quot;) {\n        return null;\n    }\n    Class clazz = query.getResultType();\n    if (clazz.equals(Long.class) || clazz.equals(long.class)) {\n        return null;\n    }\n    Join&lt;School,Student&gt; tags = root.join(&quot;student&quot;, JoinType.LEFT);\n    \n    return cb.equal(tags.get(&quot;name&quot;), &quot;John&quot;);\n}\n</code></pre>\n<p>but it doesn't work. Anyone can help ?</p>\n<p>EDIT : The Student class</p>\n<pre><code>@Entity\n@Table(name = &quot;student&quot;)\npublic class Student implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    @ManyToOne\n    private Long schoolId;\n\n    private String name;\n\n    public Long getSchoolId() {\n        return schoolId;\n    }\n\n    public void setSchoolId(Long schoolId) {\n        this.schoolId = schoolId;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n}\n</code></pre>\n<p>and the School class :</p>\n<pre><code>@Entity\n@Table(name = &quot;school&quot;)\npublic class School implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    //other fields\n    \n    @OneToMany(targetEntity = Student.class, mappedBy = &quot;schoolId&quot;)\n    @Transient\n    private List&lt;Student&gt; students = new ArrayList&lt;Student&gt;();\n    \n   //all getters and setters\n}\n</code></pre>\n<p>EDIT 2 :</p>\n<p>The error is</p>\n<pre><code>java.lang.IllegalArgumentException: Unable to locate Attribute  with the the given name [student] on this ManagedType [School]\nat org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:384) ~[spring-orm-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:227) ~[spring-orm-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:417) ~[spring-orm-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:59) ~[spring-tx-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:213) ~[spring-tx-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:147) ~[spring-tx-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:131) ~[spring-data-jpa-1.9.1.RELEASE.jar!/:na]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92) ~[spring-aop-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:208) ~[spring-aop-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at com.sun.proxy.$Proxy113.findAll(Unknown Source) ~[na:na]\n    at com.visenze.evaluation.service.SearchExperimentService.getSearchExperiments(SearchExperimentService.java:132) ~[classes!/:na]\n    at com.visenze.evaluation.service.SearchExperimentService$$FastClassBySpringCGLIB$$30203a2c.invoke(&lt;generated&gt;) ~[classes!/:na]\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204) ~[spring-core-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:650) ~[spring-aop-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at com.visenze.evaluation.service.SearchExperimentService$$EnhancerBySpringCGLIB$$2cf73334.getSearchExperiments(&lt;generated&gt;) ~[classes!/:na]\n    at com.visenze.evaluation.controller.SearchExperimentController.getSearchExperiments(SearchExperimentController.java:126) ~[classes!/:na]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_92]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_92]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_92]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_92]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:222) ~[spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137) ~[spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110) ~[spring-webmvc-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:814) ~[spring-webmvc-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:737) ~[spring-webmvc-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85) ~[spring-webmvc-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959) ~[spring-webmvc-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893) ~[spring-webmvc-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970) [spring-webmvc-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:861) [spring-webmvc-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:622) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846) [spring-webmvc-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) [tomcat-embed-websocket-8.0.28.jar!/:8.0.28]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.springframework.boot.actuate.autoconfigure.EndpointWebMvcAutoConfiguration$ApplicationContextHeaderFilter.doFilterInternal(EndpointWebMvcAutoConfiguration.java:242) [spring-boot-actuator-1.3.0.RELEASE.jar!/:1.3.0.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.springframework.boot.actuate.trace.WebRequestTraceFilter.doFilterInternal(WebRequestTraceFilter.java:111) [spring-boot-actuator-1.3.0.RELEASE.jar!/:1.3.0.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:316) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:114) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:122) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:169) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:48) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:158) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:120) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:91) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:53) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:213) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:176) [spring-security-web-4.0.3.RELEASE.jar!/:4.0.3.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:87) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:121) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.springframework.boot.actuate.autoconfigure.MetricsFilter.doFilterInternal(MetricsFilter.java:103) [spring-boot-actuator-1.3.0.RELEASE.jar!/:1.3.0.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:217) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:673) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1500) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1456) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_92]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_92]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.0.28.jar!/:8.0.28]\n    at java.lang.Thread.run(Thread.java:745) [na:1.8.0_92]\nCaused by: java.lang.IllegalArgumentException: Unable to locate Attribute  with the the given name [ExperimentTag] on this ManagedType [com.visenze.evaluation.model.base.IdEntity]\n    at org.hibernate.jpa.internal.metamodel.AbstractManagedType.checkNotNull(AbstractManagedType.java:144) ~[hibernate-entitymanager-4.3.11.Final.jar!/:4.3.11.Final]\n    at org.hibernate.jpa.internal.metamodel.AbstractManagedType.getAttribute(AbstractManagedType.java:130) ~[hibernate-entitymanager-4.3.11.Final.jar!/:4.3.11.Final]\n    at org.hibernate.jpa.internal.metamodel.AbstractManagedType.getAttribute(AbstractManagedType.java:128) ~[hibernate-entitymanager-4.3.11.Final.jar!/:4.3.11.Final]\n    at org.hibernate.jpa.internal.metamodel.AbstractManagedType.getAttribute(AbstractManagedType.java:128) ~[hibernate-entitymanager-4.3.11.Final.jar!/:4.3.11.Final]\n    at org.hibernate.jpa.criteria.path.AbstractFromImpl.locateAttributeInternal(AbstractFromImpl.java:133) ~[hibernate-entitymanager-4.3.11.Final.jar!/:4.3.11.Final]\n    at org.hibernate.jpa.criteria.path.AbstractPathImpl.locateAttribute(AbstractPathImpl.java:221) ~[hibernate-entitymanager-4.3.11.Final.jar!/:4.3.11.Final]\n    at org.hibernate.jpa.criteria.path.AbstractFromImpl.join(AbstractFromImpl.java:419) ~[hibernate-entitymanager-4.3.11.Final.jar!/:4.3.11.Final]\n    at org.hibernate.jpa.criteria.path.AbstractFromImpl.join(AbstractFromImpl.java:405) ~[hibernate-entitymanager-4.3.11.Final.jar!/:4.3.11.Final]\n    at com.visenze.evaluation.dao.jpa.TagFilterSpecification.toPredicate(TagFilterSpecification.java:39) ~[classes!/:na]\n    at org.springframework.data.jpa.domain.Specifications$ComposedSpecification.toPredicate(Specifications.java:189) ~[spring-data-jpa-1.9.1.RELEASE.jar!/:na]\n    at org.springframework.data.jpa.domain.Specifications.toPredicate(Specifications.java:99) ~[spring-data-jpa-1.9.1.RELEASE.jar!/:na]\n    at org.springframework.data.jpa.repository.support.SimpleJpaRepository.applySpecificationToCriteria(SimpleJpaRepository.java:583) ~[spring-data-jpa-1.9.1.RELEASE.jar!/:na]\n    at org.springframework.data.jpa.repository.support.SimpleJpaRepository.getQuery(SimpleJpaRepository.java:534) ~[spring-data-jpa-1.9.1.RELEASE.jar!/:na]\n    at org.springframework.data.jpa.repository.support.SimpleJpaRepository.getQuery(SimpleJpaRepository.java:519) ~[spring-data-jpa-1.9.1.RELEASE.jar!/:na]\n    at org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll(SimpleJpaRepository.java:401) ~[spring-data-jpa-1.9.1.RELEASE.jar!/:na]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_92]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_92]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_92]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_92]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.executeMethodOn(RepositoryFactorySupport.java:483) ~[spring-data-commons-1.11.1.RELEASE.jar!/:na]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.doInvoke(RepositoryFactorySupport.java:468) ~[spring-data-commons-1.11.1.RELEASE.jar!/:na]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.invoke(RepositoryFactorySupport.java:440) ~[spring-data-commons-1.11.1.RELEASE.jar!/:na]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:61) ~[spring-data-commons-1.11.1.RELEASE.jar!/:na]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99) ~[spring-tx-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281) ~[spring-tx-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96) ~[spring-tx-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:136) ~[spring-tx-4.2.3.RELEASE.jar!/:4.2.3.RELEASE]\n    ... 111 common frames omitted\n</code></pre>\n<p>Thanks</p>\n"},{"tags":["java","selenium","webdriver"],"comments":[{"owner":{"account_id":8359997,"reputation":129,"user_id":6278738,"accept_rate":50,"display_name":"Mahesh"},"score":0,"creation_date":1464887229,"post_id":37598041,"comment_id":62681103,"body_markdown":"I want to click in a particular cell in the table as there would be some requirement where the cells in the table might have dropdowns or text fields which needs input","body":"I want to click in a particular cell in the table as there would be some requirement where the cells in the table might have dropdowns or text fields which needs input"}],"answers":[{"tags":[],"owner":{"account_id":1873413,"reputation":28421,"user_id":1695163,"accept_rate":79,"display_name":"ddavison"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1464890850,"creation_date":1464890850,"answer_id":37599180,"question_id":37598041,"body_markdown":"You could modify your loop to click, instead of contat&#39;ing a giant string\r\n\r\n    for(WebElement row: allrows){\r\n        List&lt;WebElement&gt; Cells = row.findElements(By.tagName(&quot;td&quot;));\r\n        for(WebElement Cell:Cells){\r\n            if (Cell.getText().contains(&quot;Jackson&quot;))\r\n                Cell.click();\r\n        }\r\n    }\r\n\r\nKeep in mind though, that clicking the `&lt;td&gt;` may not actually trigger as the `&lt;td&gt;` may not be listening for the click event.  If it has a link in the TD, then you can do something like:\r\n\r\n    Cell.findElement(&quot;a&quot;).click();","title":"Selenium Webdriver Java: How to click on a particular cell in table using row and column numbers","body":"<p>You could modify your loop to click, instead of contat'ing a giant string</p>\n\n<pre><code>for(WebElement row: allrows){\n    List&lt;WebElement&gt; Cells = row.findElements(By.tagName(\"td\"));\n    for(WebElement Cell:Cells){\n        if (Cell.getText().contains(\"Jackson\"))\n            Cell.click();\n    }\n}\n</code></pre>\n\n<p>Keep in mind though, that clicking the <code>&lt;td&gt;</code> may not actually trigger as the <code>&lt;td&gt;</code> may not be listening for the click event.  If it has a link in the TD, then you can do something like:</p>\n\n<pre><code>Cell.findElement(\"a\").click();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1470096,"reputation":123,"user_id":1381879,"display_name":"Srikanth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1512560557,"creation_date":1512560557,"answer_id":47673457,"question_id":37598041,"body_markdown":"You will have to build a dynamic selector to achieve this.\r\n\r\nFor example: \r\n\r\n    private String rowRootSelector = &quot;tr&quot;;\r\n    private String specificCellRoot = rowRootSelector + &quot;:nth-of-type(%d) &gt; td:nth-of-type(%d)&quot;;\r\n\r\nAnd in the method where you take Row and Column as input parameter, the selector has to be built.\r\n\r\n    String selector = String.format(specificCellRoot, rowIndex, columnIndex);\r\n\r\nAnd, now you can click or do any other operation on that web element.\r\n\r\n    driver.findElement(By.cssSelector(selector));\r\n\r\n","title":"Selenium Webdriver Java: How to click on a particular cell in table using row and column numbers","body":"<p>You will have to build a dynamic selector to achieve this.</p>\n\n<p>For example: </p>\n\n<pre><code>private String rowRootSelector = \"tr\";\nprivate String specificCellRoot = rowRootSelector + \":nth-of-type(%d) &gt; td:nth-of-type(%d)\";\n</code></pre>\n\n<p>And in the method where you take Row and Column as input parameter, the selector has to be built.</p>\n\n<pre><code>String selector = String.format(specificCellRoot, rowIndex, columnIndex);\n</code></pre>\n\n<p>And, now you can click or do any other operation on that web element.</p>\n\n<pre><code>driver.findElement(By.cssSelector(selector));\n</code></pre>\n"}],"owner":{"account_id":8359997,"reputation":129,"user_id":6278738,"accept_rate":50,"display_name":"Mahesh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15853,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1693980190,"creation_date":1464887146,"question_id":37598041,"body_markdown":"I have written a code to verify if a given text is present in that row or not but how do i click in a  particular cell? Please help me.  \r\nBelow is the code i have written for verifying the text.\r\n\r\n    package com.Tables;\r\n\r\n    import java.util.List;\r\n\r\n    public class HandlingTables {\r\n\r\n\tpublic static void main(String[] args) throws InterruptedException {\r\n\t\tString s=&quot;&quot;;\r\n\t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;D:/chromedriver.exe&quot;);\r\n\t\tWebDriver driver = new ChromeDriver();\r\n\t\tdriver.get(&quot;http://www.w3schools.com/html/html_tables.asp&quot;);\r\n\t\tWebElement table = driver.findElement(By.className(&quot;w3-table-all&quot;));\r\n\t\tList&lt;WebElement&gt; allrows = table.findElements(By.tagName(&quot;tr&quot;));\r\n\t\tList&lt;WebElement&gt; allcols = table.findElements(By.tagName(&quot;td&quot;));\r\n\t\tSystem.out.println(&quot;Number of rows in the table &quot;+allrows.size());\r\n\t\tSystem.out.println(&quot;Number of columns in the table &quot;+allcols.size());\r\n\t\t\r\n\t\tfor(WebElement row: allrows){\r\n\t\t\tList&lt;WebElement&gt; Cells = row.findElements(By.tagName(&quot;td&quot;));\r\n\t\t\tfor(WebElement Cell:Cells){\r\n\t\t\t\ts = s.concat(Cell.getText());\t\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(s);\r\n\t\tif(s.contains(&quot;Jackson&quot;)){\r\n\t\t\tSystem.out.println(&quot;Jackson is present in the table&quot;);\r\n\t\t}else{\r\n\t\t\tSystem.out.println(&quot;Jackson is not available in the table&quot;);\r\n\t\t}\r\n\t\tThread.sleep(10000);\r\n\t\tdriver.quit();\r\n      }\r\n    }  \r\n\r\n\r\n","title":"Selenium Webdriver Java: How to click on a particular cell in table using row and column numbers","body":"<p>I have written a code to verify if a given text is present in that row or not but how do i click in a  particular cell? Please help me.<br>\nBelow is the code i have written for verifying the text.</p>\n\n<pre><code>package com.Tables;\n\nimport java.util.List;\n\npublic class HandlingTables {\n\npublic static void main(String[] args) throws InterruptedException {\n    String s=\"\";\n    System.setProperty(\"webdriver.chrome.driver\", \"D:/chromedriver.exe\");\n    WebDriver driver = new ChromeDriver();\n    driver.get(\"http://www.w3schools.com/html/html_tables.asp\");\n    WebElement table = driver.findElement(By.className(\"w3-table-all\"));\n    List&lt;WebElement&gt; allrows = table.findElements(By.tagName(\"tr\"));\n    List&lt;WebElement&gt; allcols = table.findElements(By.tagName(\"td\"));\n    System.out.println(\"Number of rows in the table \"+allrows.size());\n    System.out.println(\"Number of columns in the table \"+allcols.size());\n\n    for(WebElement row: allrows){\n        List&lt;WebElement&gt; Cells = row.findElements(By.tagName(\"td\"));\n        for(WebElement Cell:Cells){\n            s = s.concat(Cell.getText());   \n        }\n    }\n    System.out.println(s);\n    if(s.contains(\"Jackson\")){\n        System.out.println(\"Jackson is present in the table\");\n    }else{\n        System.out.println(\"Jackson is not available in the table\");\n    }\n    Thread.sleep(10000);\n    driver.quit();\n  }\n}  \n</code></pre>\n"},{"tags":["java","asynchronous","intellij-idea","google-drive-api","okhttp"],"owner":{"account_id":29376601,"reputation":1,"user_id":22507998,"display_name":"Sourab"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693980119,"creation_date":1693980119,"question_id":77049326,"body_markdown":"Here is a REST client code which is uploading a file to a Google drive asynchronously using CompletableFuture and okhttp&#39;s enqueue method-\r\n\r\n\r\n```\r\nclass GoogleDriveClient {\r\n    private static String GDRIVE_METADATA_BASE_URL = &quot;https://www.googleapis.com/drive/v3/files&quot;;\r\n    private static String GDRIVE_FILE_BASE_URL = &quot;https://www.googleapis.com/upload/drive/v3/files&quot;;\r\n    private static final String BEARER_TOKEN = &quot;ya29.a0AfB_byAMRXUSSIKjn10pIWLecuFGOwdxpn1OML3zs2dSjZxxSDBCz5sDcGrtlS935pkBp_MwnhwE7YskL5CaFpmWzUrx6k_ynvE8yqnt2CRo01ACk_2fcCZAdzdrQVd5V6oys88O-9zVXBhrRvhEIE7410sFf01hANKnbQaCgYKATsSARASFQHsvYlssCibTKLmy1KIRVwL9Cr7Vw0173&quot;;\r\n\r\n    private final OkHttpClient client = new OkHttpClient();\r\n\r\n\r\n    public CompletableFuture&lt;HttpResponse&gt; createFile(File file) {\r\n        CompletableFuture&lt;HttpResponse&gt; futureHttpResponse = new CompletableFuture&lt;&gt;();\r\n\r\n        String metadata = &quot;{\\&quot;name\\&quot;: \\&quot;&quot; + file.getName() + &quot;\\&quot;}&quot;;\r\n\r\n        RequestBody metadataBody = RequestBody.create(metadata, MediaType.parse(&quot;application/json&quot;));\r\n        RequestBody fileDataBody = RequestBody.create(file, MediaType.parse(&quot;application/octet-stream&quot;)); //application/octet-stream\r\n\r\n        MultipartBody body = new MultipartBody.Builder()\r\n                .setType(MultipartBody.FORM)\r\n                .addPart(metadataBody)\r\n                .addPart(fileDataBody)\r\n                .build();\r\n\r\n        Request request = new Request.Builder()\r\n                .url(GDRIVE_FILE_BASE_URL + &quot;?uploadType=multipart&quot;)\r\n                .header(&quot;Authorization&quot;, &quot;Bearer &quot; + BEARER_TOKEN)\r\n                .post(body)\r\n                .build();\r\n\r\n        client.newCall(request).enqueue(new HttpResponseCallback(futureHttpResponse));\r\n\r\n        return futureHttpResponse;\r\n    }\r\n\r\n    private static class HttpResponseCallback implements Callback {\r\n        private final CompletableFuture&lt;HttpResponse&gt; futureHttpResponse;\r\n\r\n        public HttpResponseCallback(CompletableFuture&lt;HttpResponse&gt; futureHttpResponse) {\r\n            this.futureHttpResponse = futureHttpResponse;\r\n        }\r\n\r\n        @Override\r\n        public void onFailure(@NotNull Call call, @NotNull IOException e) {\r\n            futureHttpResponse.completeExceptionally(e);\r\n        }\r\n\r\n        @Override\r\n        public void onResponse(@NotNull Call call, @NotNull Response response) throws IOException {\r\n            if (!response.isSuccessful())\r\n                System.out.println(&quot;Response not successful&quot;);\r\n            else {\r\n                futureHttpResponse.complete(new HttpResponse(response.code(), response.body().string()));\r\n                System.out.println(&quot;Response successful&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\npublic class Main {\r\n    public static void main(String[] args) throws ExecutionException, InterruptedException {\r\n        GoogleDriveClient googleDriveClient = new GoogleDriveClient();\r\n\r\n        String filePath = &quot;C:\\\\Files\\\\sample.bat&quot;;\r\n        File newFile = new File(filePath);\r\n        CompletableFuture&lt;HttpResponse&gt; future = googleDriveClient.createFile(newFile);\r\n        HttpResponse response = future.get();\r\n        System.out.println(response.getCode());\r\n        System.out.println(response.getBody());\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nThe problem is that its uploading a file successfully but the execution is not terminating after uploading the file. Its terminating after 1 minute or so. \r\n\r\nI Tried to close the client connection but its of no use. Am I missing something or anything I am not aware of? Please help. Thank you.\r\n\r\n","title":"Execution terminating after 1 minute of delay","body":"<p>Here is a REST client code which is uploading a file to a Google drive asynchronously using CompletableFuture and okhttp's enqueue method-</p>\n<pre><code>class GoogleDriveClient {\n    private static String GDRIVE_METADATA_BASE_URL = &quot;https://www.googleapis.com/drive/v3/files&quot;;\n    private static String GDRIVE_FILE_BASE_URL = &quot;https://www.googleapis.com/upload/drive/v3/files&quot;;\n    private static final String BEARER_TOKEN = &quot;ya29.a0AfB_byAMRXUSSIKjn10pIWLecuFGOwdxpn1OML3zs2dSjZxxSDBCz5sDcGrtlS935pkBp_MwnhwE7YskL5CaFpmWzUrx6k_ynvE8yqnt2CRo01ACk_2fcCZAdzdrQVd5V6oys88O-9zVXBhrRvhEIE7410sFf01hANKnbQaCgYKATsSARASFQHsvYlssCibTKLmy1KIRVwL9Cr7Vw0173&quot;;\n\n    private final OkHttpClient client = new OkHttpClient();\n\n\n    public CompletableFuture&lt;HttpResponse&gt; createFile(File file) {\n        CompletableFuture&lt;HttpResponse&gt; futureHttpResponse = new CompletableFuture&lt;&gt;();\n\n        String metadata = &quot;{\\&quot;name\\&quot;: \\&quot;&quot; + file.getName() + &quot;\\&quot;}&quot;;\n\n        RequestBody metadataBody = RequestBody.create(metadata, MediaType.parse(&quot;application/json&quot;));\n        RequestBody fileDataBody = RequestBody.create(file, MediaType.parse(&quot;application/octet-stream&quot;)); //application/octet-stream\n\n        MultipartBody body = new MultipartBody.Builder()\n                .setType(MultipartBody.FORM)\n                .addPart(metadataBody)\n                .addPart(fileDataBody)\n                .build();\n\n        Request request = new Request.Builder()\n                .url(GDRIVE_FILE_BASE_URL + &quot;?uploadType=multipart&quot;)\n                .header(&quot;Authorization&quot;, &quot;Bearer &quot; + BEARER_TOKEN)\n                .post(body)\n                .build();\n\n        client.newCall(request).enqueue(new HttpResponseCallback(futureHttpResponse));\n\n        return futureHttpResponse;\n    }\n\n    private static class HttpResponseCallback implements Callback {\n        private final CompletableFuture&lt;HttpResponse&gt; futureHttpResponse;\n\n        public HttpResponseCallback(CompletableFuture&lt;HttpResponse&gt; futureHttpResponse) {\n            this.futureHttpResponse = futureHttpResponse;\n        }\n\n        @Override\n        public void onFailure(@NotNull Call call, @NotNull IOException e) {\n            futureHttpResponse.completeExceptionally(e);\n        }\n\n        @Override\n        public void onResponse(@NotNull Call call, @NotNull Response response) throws IOException {\n            if (!response.isSuccessful())\n                System.out.println(&quot;Response not successful&quot;);\n            else {\n                futureHttpResponse.complete(new HttpResponse(response.code(), response.body().string()));\n                System.out.println(&quot;Response successful&quot;);\n            }\n        }\n    }\n\n\n}\n\n\npublic class Main {\n    public static void main(String[] args) throws ExecutionException, InterruptedException {\n        GoogleDriveClient googleDriveClient = new GoogleDriveClient();\n\n        String filePath = &quot;C:\\\\Files\\\\sample.bat&quot;;\n        File newFile = new File(filePath);\n        CompletableFuture&lt;HttpResponse&gt; future = googleDriveClient.createFile(newFile);\n        HttpResponse response = future.get();\n        System.out.println(response.getCode());\n        System.out.println(response.getBody());\n    }\n}\n\n</code></pre>\n<p>The problem is that its uploading a file successfully but the execution is not terminating after uploading the file. Its terminating after 1 minute or so.</p>\n<p>I Tried to close the client connection but its of no use. Am I missing something or anything I am not aware of? Please help. Thank you.</p>\n"},{"tags":["java","intellij-idea","java-module","openjfx","module-info"],"comments":[{"owner":{"account_id":14391463,"reputation":682,"user_id":10395952,"display_name":"Guest 21"},"score":4,"creation_date":1537734568,"post_id":52469803,"comment_id":91881967,"body_markdown":"Your Main class isn&#39;t in any package (or to be precise, it uses unnamed package), and that&#39;s not allowed in modular app. Add package declaration to Main.java (e.g. &quot;package main;&quot;).","body":"Your Main class isn&#39;t in any package (or to be precise, it uses unnamed package), and that&#39;s not allowed in modular app. Add package declaration to Main.java (e.g. &quot;package main;&quot;)."},{"owner":{"account_id":4031788,"reputation":1863,"user_id":3317592,"accept_rate":64,"display_name":"AlwaysNeedingHelp"},"score":0,"creation_date":1537734680,"post_id":52469803,"comment_id":91882000,"body_markdown":"@Guest21 I get an error &quot;Package main does not correspond to the file path&quot;","body":"@Guest21 I get an error &quot;Package main does not correspond to the file path&quot;"},{"owner":{"account_id":14391463,"reputation":682,"user_id":10395952,"display_name":"Guest 21"},"score":0,"creation_date":1537734995,"post_id":52469803,"comment_id":91882070,"body_markdown":"IDE should offer you to move the file - put mouse cursor on package name, hit Alt+Enter, and click on &quot;Move to package main&quot;. Or move the file manually - make new package &quot;main&quot; and move the file into it.","body":"IDE should offer you to move the file - put mouse cursor on package name, hit Alt+Enter, and click on &quot;Move to package main&quot;. Or move the file manually - make new package &quot;main&quot; and move the file into it."},{"owner":{"account_id":4031788,"reputation":1863,"user_id":3317592,"accept_rate":64,"display_name":"AlwaysNeedingHelp"},"score":0,"creation_date":1537735143,"post_id":52469803,"comment_id":91882100,"body_markdown":"@Guest21 thanks, I created a new package called main and moved it in, I got a new error which again has me confused, mind taking a look? I put it in the OP.","body":"@Guest21 thanks, I created a new package called main and moved it in, I got a new error which again has me confused, mind taking a look? I put it in the OP."}],"answers":[{"tags":[],"owner":{"account_id":14391463,"reputation":682,"user_id":10395952,"display_name":"Guest 21"},"down_vote_count":1,"up_vote_count":9,"is_accepted":true,"score":8,"last_activity_date":1537736096,"creation_date":1537735654,"answer_id":52470126,"question_id":52469803,"body_markdown":"In order for a JavaFx to launch your app, it needs access to its main class, so you need to export the package in which the main class is located.\r\n\r\nAdd export declaration to module-info:\r\n\r\n    module Game.main {\r\n        ...\r\n\r\n        exports main;\r\n    }","title":"Error: Main.class found in top-level directory (unnamed package not allowed in module)","body":"<p>In order for a JavaFx to launch your app, it needs access to its main class, so you need to export the package in which the main class is located.</p>\n\n<p>Add export declaration to module-info:</p>\n\n<pre><code>module Game.main {\n    ...\n\n    exports main;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13051807,"reputation":1191,"user_id":9431874,"display_name":"NL23codes"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1576001828,"creation_date":1575321931,"answer_id":59146894,"question_id":52469803,"body_markdown":"If you move a class to a different folder, before the class declaration line, you need to have a reference to the folder where this class is/should be located - telling the system where to look. For example:\r\n\r\n    //This line below is important\r\n    package main.java.main.Main;\r\n\r\n    public class Main extends Application {\r\n    \r\n        @Override\r\n        public void start(Stage primaryStage) throws Exception {\r\n        }\r\n    }","title":"Error: Main.class found in top-level directory (unnamed package not allowed in module)","body":"<p>If you move a class to a different folder, before the class declaration line, you need to have a reference to the folder where this class is/should be located - telling the system where to look. For example:</p>\n\n<pre><code>//This line below is important\npackage main.java.main.Main;\n\npublic class Main extends Application {\n\n    @Override\n    public void start(Stage primaryStage) throws Exception {\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11475936,"reputation":2345,"user_id":8411453,"display_name":"Marco D.G."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678095980,"creation_date":1678095980,"answer_id":75649280,"question_id":52469803,"body_markdown":"If your class is under `(default package)` :\r\n----------------------------------------\r\nUnrelated to the specific question.\r\n\r\nYou could encounter this error while trying to run a class for example `HelloWorld.java` inside the package `(default package)`.\r\n\r\nTo solve the issue create a new package under the `src` folder *(at least in a generic case)* and **give it a name** then move your class into the new package and try running it again:\r\n\r\n Right-lick on the class (under the named package) -&gt; Run As -&gt; Java Application.","title":"Error: Main.class found in top-level directory (unnamed package not allowed in module)","body":"<h2>If your class is under <code>(default package)</code> :</h2>\n<p>Unrelated to the specific question.</p>\n<p>You could encounter this error while trying to run a class for example <code>HelloWorld.java</code> inside the package <code>(default package)</code>.</p>\n<p>To solve the issue create a new package under the <code>src</code> folder <em>(at least in a generic case)</em> and <strong>give it a name</strong> then move your class into the new package and try running it again:</p>\n<p>Right-lick on the class (under the named package) -&gt; Run As -&gt; Java Application.</p>\n"},{"tags":[],"owner":{"account_id":23119134,"reputation":44,"user_id":17400037,"display_name":"brandon v"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1693979284,"creation_date":1693979284,"answer_id":77049279,"question_id":52469803,"body_markdown":"I was experiencing this Exception when trying to run my javafx application with the javafx-maven-plugin after adding some new classes.\r\n\r\nAnd executing `mvn clean` solved the issue. Then I successfully executed the application with `mvn javafx:run`","title":"Error: Main.class found in top-level directory (unnamed package not allowed in module)","body":"<p>I was experiencing this Exception when trying to run my javafx application with the javafx-maven-plugin after adding some new classes.</p>\n<p>And executing <code>mvn clean</code> solved the issue. Then I successfully executed the application with <code>mvn javafx:run</code></p>\n"}],"owner":{"account_id":4031788,"reputation":1863,"user_id":3317592,"accept_rate":64,"display_name":"AlwaysNeedingHelp"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18604,"favorite_count":0,"down_vote_count":1,"up_vote_count":8,"accepted_answer_id":52470126,"answer_count":4,"score":7,"last_activity_date":1693979284,"creation_date":1537733031,"question_id":52469803,"body_markdown":"Trying to update an application to Java 11 and after sorting through hell with modules I thought I had got rid of all the red errors and now I&#39;m getting this one I&#39;ve never seen before:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nLooking around I&#39;ve seen people suggest it is possible to do with the application structure:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nor the module-info.java file:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nCan anybody see what I need to do to get rid of this?\r\n\r\nEdit:\r\nError after moving Main.java to a package called &#39;main&#39; and trying to run it:\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/FtSx2.png\r\n  [2]: https://i.stack.imgur.com/nhlw6.png\r\n  [3]: https://i.stack.imgur.com/qtTO5.png\r\n  [4]: https://i.stack.imgur.com/GrSBM.png","title":"Error: Main.class found in top-level directory (unnamed package not allowed in module)","body":"<p>Trying to update an application to Java 11 and after sorting through hell with modules I thought I had got rid of all the red errors and now I'm getting this one I've never seen before:</p>\n\n<p><a href=\"https://i.stack.imgur.com/FtSx2.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/FtSx2.png\" alt=\"enter image description here\"></a></p>\n\n<p>Looking around I've seen people suggest it is possible to do with the application structure:</p>\n\n<p><a href=\"https://i.stack.imgur.com/nhlw6.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/nhlw6.png\" alt=\"enter image description here\"></a></p>\n\n<p>or the module-info.java file:</p>\n\n<p><a href=\"https://i.stack.imgur.com/qtTO5.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/qtTO5.png\" alt=\"enter image description here\"></a></p>\n\n<p>Can anybody see what I need to do to get rid of this?</p>\n\n<p>Edit:\nError after moving Main.java to a package called 'main' and trying to run it:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GrSBM.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/GrSBM.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","arrays","performance","optimization","hashmap"],"comments":[{"owner":{"account_id":11603,"reputation":21560,"user_id":22437,"accept_rate":88,"display_name":"Dour High Arch"},"score":7,"creation_date":1308874826,"post_id":6462055,"comment_id":7591213,"body_markdown":"Waitaminnit; if you &quot;really need performance&quot; you would already know the answer to this question because you would have profiled your app to determine that this Hashmap vs. Array issue was actually relevant. If you have not, you need to do so to determine this really does affect your performance and is not actually a waste of time.","body":"Waitaminnit; if you &quot;really need performance&quot; you would already know the answer to this question because you would have profiled your app to determine that this Hashmap vs. Array issue was actually relevant. If you have not, you need to do so to determine this really does affect your performance and is not actually a waste of time."},{"owner":{"account_id":371708,"reputation":2260,"user_id":720386,"accept_rate":94,"display_name":"Timotheus"},"score":3,"creation_date":1308875160,"post_id":6462055,"comment_id":7591258,"body_markdown":"Good point, but as a novice programmer it&#39;s always nice to get some reflection in case you miss something or get suggestions on better strategies","body":"Good point, but as a novice programmer it&#39;s always nice to get some reflection in case you miss something or get suggestions on better strategies"},{"owner":{"account_id":120028,"reputation":35734,"user_id":312172,"accept_rate":86,"display_name":"user unknown"},"score":0,"creation_date":1308875401,"post_id":6462055,"comment_id":7591287,"body_markdown":"How often is doSomethingToObject called? And yes, the advice, a novice programmer should take seriously, is Dour High Arch&#39;s advice.","body":"How often is doSomethingToObject called? And yes, the advice, a novice programmer should take seriously, is Dour High Arch&#39;s advice."},{"owner":{"display_name":"user780363"},"score":4,"creation_date":1308876426,"post_id":6462055,"comment_id":7591402,"body_markdown":"if you &quot;really need performance&quot; you should not write in java...","body":"if you &quot;really need performance&quot; you should not write in java..."},{"owner":{"account_id":43861,"reputation":59776,"user_id":128397,"accept_rate":82,"display_name":"Daniel Pryden"},"score":0,"creation_date":1308876797,"post_id":6462055,"comment_id":7591449,"body_markdown":"@Franklin: Huh?  Java is quite fast these days.","body":"@Franklin: Huh?  Java is quite fast these days."},{"owner":{"account_id":371708,"reputation":2260,"user_id":720386,"accept_rate":94,"display_name":"Timotheus"},"score":0,"creation_date":1308879077,"post_id":6462055,"comment_id":7591728,"body_markdown":"@Franklin I&#39;ve seen benchmarks where Java was nearly equal to C++","body":"@Franklin I&#39;ve seen benchmarks where Java was nearly equal to C++"},{"owner":{"display_name":"user780363"},"score":0,"creation_date":1308882912,"post_id":6462055,"comment_id":7592268,"body_markdown":"@Dasdasd there are lies, damn lies, statistics and benchmarks...","body":"@Dasdasd there are lies, damn lies, statistics and benchmarks..."},{"owner":{"account_id":11603,"reputation":21560,"user_id":22437,"accept_rate":88,"display_name":"Dour High Arch"},"score":3,"creation_date":1308933442,"post_id":6462055,"comment_id":7603152,"body_markdown":"Dasdasd, you have to benchmark your actual app running with real data. Making up fake &quot;benchmarks&quot; using two sample points will only mislead you. You must benchmark your whole application and optimize bottlenecks, not pick lines of code that look like fun to change. If this issue is not a bottleneck, optimizing it will not improve performance no matter how fast you make it.","body":"Dasdasd, you have to benchmark your actual app running with real data. Making up fake &quot;benchmarks&quot; using two sample points will only mislead you. You must benchmark your whole application and optimize bottlenecks, not pick lines of code that look like fun to change. If this issue is not a bottleneck, optimizing it will not improve performance no matter how fast you make it."},{"owner":{"account_id":357086,"reputation":2586,"user_id":697031,"display_name":"Michael Krussel"},"score":0,"creation_date":1308936252,"post_id":6462055,"comment_id":7603937,"body_markdown":"If there values are known, I&#39;d suggest making the values an enum and using an EnumMap","body":"If there values are known, I&#39;d suggest making the values an enum and using an EnumMap"},{"owner":{"account_id":159474,"reputation":16722,"user_id":378874,"accept_rate":98,"display_name":"Rick"},"score":0,"creation_date":1322087039,"post_id":6462055,"comment_id":10150740,"body_markdown":"@Dour High Arch his question is valid, your point isn&#39;t, your logic of writing an app and then profiling it to determine bottlenecks is backwards in the context of this question, perhaps SO isn&#39;t the right place to ask a question like this but its valid to want to learn the underlying mechanics / performance of a specific data structure, everything shouldn&#39;t be done using trial and error, which is basically what you are suggesting","body":"@Dour High Arch his question is valid, your point isn&#39;t, your logic of writing an app and then profiling it to determine bottlenecks is backwards in the context of this question, perhaps SO isn&#39;t the right place to ask a question like this but its valid to want to learn the underlying mechanics / performance of a specific data structure, everything shouldn&#39;t be done using trial and error, which is basically what you are suggesting"},{"owner":{"account_id":12404,"reputation":62016,"user_id":24396,"accept_rate":74,"display_name":"Steve Kuo"},"score":2,"creation_date":1358962803,"post_id":6462055,"comment_id":20185031,"body_markdown":"Your benchmarking is flawed. You need to do each test in its own JVM invocation. As is now, if you reversed ProcessArray and ProcessHash you&#39;ll see different values.","body":"Your benchmarking is flawed. You need to do each test in its own JVM invocation. As is now, if you reversed ProcessArray and ProcessHash you&#39;ll see different values."}],"answers":[{"tags":[],"owner":{"account_id":378721,"reputation":47508,"user_id":731620,"accept_rate":80,"display_name":"ratchet freak"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1308878936,"creation_date":1308874573,"answer_id":6462063,"question_id":6462055,"body_markdown":"arrays when the indexes are know are faster (HashMap uses an array of linked lists behind the scenes which adds a bit of overhead above the array accesses not to mention the hashing operations that need to be done)\r\n\r\nand FYI `HashMap&lt;String,SomeObject&gt; objects = HashMap&lt;String,SomeObject&gt;();` makes it so you won&#39;t have to cast\r\n","title":"Hashmap vs Array performance","body":"<p>arrays when the indexes are know are faster (HashMap uses an array of linked lists behind the scenes which adds a bit of overhead above the array accesses not to mention the hashing operations that need to be done)</p>\n\n<p>and FYI <code>HashMap&lt;String,SomeObject&gt; objects = HashMap&lt;String,SomeObject&gt;();</code> makes it so you won't have to cast</p>\n"},{"tags":[],"owner":{"account_id":31164,"reputation":378674,"user_id":85371,"accept_rate":43,"display_name":"sehe"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1308874613,"creation_date":1308874613,"answer_id":6462067,"question_id":6462055,"body_markdown":"For the example shown, HashTable wins, I believe. The problem with the array approach is that it doesn&#39;t scale. I imagine you want to have more than two entries in the table, and the condition branch tree in doSomethingToObject will quickly get unwieldly and slow.\r\n\r\n","title":"Hashmap vs Array performance","body":"<p>For the example shown, HashTable wins, I believe. The problem with the array approach is that it doesn't scale. I imagine you want to have more than two entries in the table, and the condition branch tree in doSomethingToObject will quickly get unwieldly and slow.</p>\n"},{"tags":[],"owner":{"account_id":388401,"reputation":6292,"user_id":747320,"accept_rate":100,"display_name":"Basanth Roy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1308874752,"creation_date":1308874752,"answer_id":6462075,"question_id":6462055,"body_markdown":"Arrays will usually be faster than Collections classes.\r\n\r\nPS. You mentioned HashTable in your post. HashTable has even worse performance thatn HashMap. I assume your mention of HashTable was a typo\r\n\r\n&gt; &quot;The HashTable one looks much much\r\n&gt; better &quot;","title":"Hashmap vs Array performance","body":"<p>Arrays will usually be faster than Collections classes.</p>\n\n<p>PS. You mentioned HashTable in your post. HashTable has even worse performance thatn HashMap. I assume your mention of HashTable was a typo</p>\n\n<blockquote>\n  <p>\"The HashTable one looks much much\n  better \"</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":371054,"reputation":24474,"user_id":719363,"accept_rate":75,"display_name":"Alex Gitelman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1308874837,"creation_date":1308874837,"answer_id":6462084,"question_id":6462055,"body_markdown":"Logically, `HashMap` is definitely a fit in your case. From performance standpoint is also wins since in case of arrays you will need to do number of string comparisons (in your algorithm) while in HashMap you just use a hash code if load factor is not too high. Both array and HashMap will need to be resized if you add many elements, but in case of HashMap you will need to also redistribute elements. In this use case HashMap loses.","title":"Hashmap vs Array performance","body":"<p>Logically, <code>HashMap</code> is definitely a fit in your case. From performance standpoint is also wins since in case of arrays you will need to do number of string comparisons (in your algorithm) while in HashMap you just use a hash code if load factor is not too high. Both array and HashMap will need to be resized if you add many elements, but in case of HashMap you will need to also redistribute elements. In this use case HashMap loses.</p>\n"},{"tags":[],"owner":{"account_id":430085,"reputation":41,"user_id":813317,"display_name":"BlueGuitar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1308878347,"creation_date":1308878347,"answer_id":6462348,"question_id":6462055,"body_markdown":"The example is strange. The key problem is whether your data is dynamic. If it is, you could not write you program that way (as in the array case). In order words, comparing between your array and hash implementation is not fair. The hash implementation works for dynamic data, but the array implementation does not. \r\n\r\n\r\nIf you only have static data (6 fixed objects), array or hash just work as data holder. You could even define static objects.","title":"Hashmap vs Array performance","body":"<p>The example is strange. The key problem is whether your data is dynamic. If it is, you could not write you program that way (as in the array case). In order words, comparing between your array and hash implementation is not fair. The hash implementation works for dynamic data, but the array implementation does not. </p>\n\n<p>If you only have static data (6 fixed objects), array or hash just work as data holder. You could even define static objects.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":2,"up_vote_count":46,"is_accepted":true,"score":44,"last_activity_date":1522658630,"creation_date":1308895090,"answer_id":6464004,"question_id":6462055,"body_markdown":"HashMap uses an array underneath so it can never be faster than using an array correctly.\r\n\r\n`Random.nextInt()` is many times slower than what you are testing, even using array to test an array is going to bias your results. \r\n\r\nThe reason your array benchmark is so slow is due to the equals comparisons, not the array access itself.\r\n\r\n`HashTable` is usually much slower than `HashMap` because it does much the same thing but is also synchronized.\r\n\r\nA common problem with micro-benchmarks is the JIT which is very good at removing code which doesn&#39;t do anything. If you are not careful you will only be testing whether you have confused the JIT enough that it cannot workout your code doesn&#39;t do anything.\r\n\r\nThis is one of the reason you can write micro-benchmarks which out perform C++ systems.  This is because Java is a simpler language and easier to reason about and thus detect code which does nothing useful.  This can lead to tests which show that Java does &quot;nothing useful&quot; much faster than C++ ;)","title":"Hashmap vs Array performance","body":"<p>HashMap uses an array underneath so it can never be faster than using an array correctly.</p>\n\n<p><code>Random.nextInt()</code> is many times slower than what you are testing, even using array to test an array is going to bias your results. </p>\n\n<p>The reason your array benchmark is so slow is due to the equals comparisons, not the array access itself.</p>\n\n<p><code>HashTable</code> is usually much slower than <code>HashMap</code> because it does much the same thing but is also synchronized.</p>\n\n<p>A common problem with micro-benchmarks is the JIT which is very good at removing code which doesn't do anything. If you are not careful you will only be testing whether you have confused the JIT enough that it cannot workout your code doesn't do anything.</p>\n\n<p>This is one of the reason you can write micro-benchmarks which out perform C++ systems.  This is because Java is a simpler language and easier to reason about and thus detect code which does nothing useful.  This can lead to tests which show that Java does \"nothing useful\" much faster than C++ ;)</p>\n"},{"tags":[],"owner":{"account_id":29376579,"reputation":1,"user_id":22507980,"display_name":"user22507980"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693979130,"creation_date":1693979130,"answer_id":77049269,"question_id":6462055,"body_markdown":"I wonder no one tell about performance of Hashmap&#39;s. Don&#39;t forget the fact a hash-function called each time one put data on Hashmap and getting data from a hashmap behind the scene. Each function call uses stack. And even hash function is not simple one primitive operation. The smarter hash-function the more complex code it implements. The same time using trees behind the scene takes a time and a code for pasting data and rearranging hives. Take note no one answered the question when using a hashtable become more efficient over simple array.","title":"Hashmap vs Array performance","body":"<p>I wonder no one tell about performance of Hashmap's. Don't forget the fact a hash-function called each time one put data on Hashmap and getting data from a hashmap behind the scene. Each function call uses stack. And even hash function is not simple one primitive operation. The smarter hash-function the more complex code it implements. The same time using trees behind the scene takes a time and a code for pasting data and rearranging hives. Take note no one answered the question when using a hashtable become more efficient over simple array.</p>\n"}],"owner":{"account_id":371708,"reputation":2260,"user_id":720386,"accept_rate":94,"display_name":"Timotheus"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83840,"favorite_count":0,"down_vote_count":1,"up_vote_count":37,"accepted_answer_id":6464004,"answer_count":7,"score":36,"last_activity_date":1693979130,"creation_date":1308874423,"question_id":6462055,"body_markdown":"Is it (performance-wise) better to use Arrays or HashMaps when the indexes of the Array are known? Keep in mind that the &#39;objects array/map&#39; in the example is just an example, in my real project it is generated by another class so I cant use individual variables.\r\n\r\nArrayExample:\r\n\r\n    SomeObject[] objects = new SomeObject[2];\r\n    objects[0] = new SomeObject(&quot;Obj1&quot;);\r\n    objects[1] = new SomeObject(&quot;Obj2&quot;);\r\n    \r\n    void doSomethingToObject(String Identifier){\r\n        SomeObject object;\r\n        if(Identifier.equals(&quot;Obj1&quot;)){\r\n            object=objects[0];\r\n        }else if(){\r\n            object=objects[1];\r\n        }\r\n        //do stuff\r\n    }\r\n\r\nHashMapExample:\r\n\r\n    HashMap objects = HashMap();\r\n    objects.put(&quot;Obj1&quot;,new SomeObject());\r\n    objects.put(&quot;Obj2&quot;,new SomeObject());\r\n    \r\n    void doSomethingToObject(String Identifier){\r\n        SomeObject object = (SomeObject) objects.get(Identifier);\r\n        //do stuff\r\n    }\r\n\r\n\r\nThe HashMap one looks much much better but I really need performance on this so that has priority.\r\n\r\n**EDIT:** Well Array&#39;s it is then, suggestions are still welcome\r\n\r\n**EDIT:** I forgot to mention, the size of the Array/HashMap is always the same (6)\r\n\r\n\r\n\r\n**EDIT:** It appears that HashMaps are faster\r\nArray: 128ms\r\nHash: 103ms\r\n\r\nWhen using less cycles the HashMaps was even twice as fast\r\n\r\n\r\n\r\n\r\ntest code:\r\n\r\n    import java.util.HashMap;\r\n    import java.util.Random;\r\n\r\n    public class Optimizationsest {\r\n\tprivate static Random r = new Random();\r\n\t\r\n    private static HashMap&lt;String,SomeObject&gt; hm = new HashMap&lt;String,SomeObject&gt;();\r\n    private static SomeObject[] o = new SomeObject[6];\r\n    \r\n    private static String[] Indentifiers = {&quot;Obj1&quot;,&quot;Obj2&quot;,&quot;Obj3&quot;,&quot;Obj4&quot;,&quot;Obj5&quot;,&quot;Obj6&quot;};\r\n    \r\n    private static int t = 1000000;\r\n    \r\n    public static void main(String[] args){\r\n    \tCreateHash();\r\n    \tCreateArray();\r\n        long loopTime = ProcessArray();\r\n        long hashTime = ProcessHash();\r\n        System.out.println(&quot;Array: &quot; + loopTime + &quot;ms&quot;);\r\n        System.out.println(&quot;Hash: &quot; + hashTime + &quot;ms&quot;);\r\n    }\r\n\r\n    public static void CreateHash(){\r\n    \tfor(int i=0; i &lt;= 5; i++){\r\n        \thm.put(&quot;Obj&quot;+(i+1), new SomeObject());\r\n    \t}\r\n    }\r\n    \r\n    public static void CreateArray(){\r\n    \tfor(int i=0; i &lt;= 5; i++){\r\n        \to[i]=new SomeObject();\r\n    \t}\r\n    }\r\n    \r\n    public static long ProcessArray(){\r\n        StopWatch sw = new StopWatch();\r\n        sw.start();\r\n        for(int i = 1;i&lt;=t;i++){\r\n        \tcheckArray(Indentifiers[r.nextInt(6)]);\r\n        }\r\n        sw.stop();\r\n        return sw.getElapsedTime();\r\n    }\r\n    \r\n    \r\n\r\n    private static void checkArray(String Identifier) {\r\n        SomeObject object;\r\n        if(Identifier.equals(&quot;Obj1&quot;)){\r\n            object=o[0];\r\n        }else if(Identifier.equals(&quot;Obj2&quot;)){\r\n            object=o[1];\r\n        }else if(Identifier.equals(&quot;Obj3&quot;)){\r\n            object=o[2];\r\n        }else if(Identifier.equals(&quot;Obj4&quot;)){\r\n            object=o[3];\r\n        }else if(Identifier.equals(&quot;Obj5&quot;)){\r\n            object=o[4];\r\n        }else if(Identifier.equals(&quot;Obj6&quot;)){\r\n            object=o[5];\r\n        }else{\r\n        \tobject = new SomeObject();\r\n        }\r\n        object.kill();\r\n\t}\r\n\r\n\tpublic static long ProcessHash(){\r\n        StopWatch sw = new StopWatch();\r\n        sw.start();\r\n        for(int i = 1;i&lt;=t;i++){\r\n        \tcheckHash(Indentifiers[r.nextInt(6)]);\r\n        }\r\n        sw.stop();\r\n        return sw.getElapsedTime();\r\n    }\r\n\r\n\tprivate static void checkHash(String Identifier) {\r\n\t\tSomeObject object = (SomeObject) hm.get(Identifier);\r\n\t\tobject.kill();\r\n\t}\r\n}\r\n    \r\n","title":"Hashmap vs Array performance","body":"<p>Is it (performance-wise) better to use Arrays or HashMaps when the indexes of the Array are known? Keep in mind that the 'objects array/map' in the example is just an example, in my real project it is generated by another class so I cant use individual variables.</p>\n\n<p>ArrayExample:</p>\n\n<pre><code>SomeObject[] objects = new SomeObject[2];\nobjects[0] = new SomeObject(\"Obj1\");\nobjects[1] = new SomeObject(\"Obj2\");\n\nvoid doSomethingToObject(String Identifier){\n    SomeObject object;\n    if(Identifier.equals(\"Obj1\")){\n        object=objects[0];\n    }else if(){\n        object=objects[1];\n    }\n    //do stuff\n}\n</code></pre>\n\n<p>HashMapExample:</p>\n\n<pre><code>HashMap objects = HashMap();\nobjects.put(\"Obj1\",new SomeObject());\nobjects.put(\"Obj2\",new SomeObject());\n\nvoid doSomethingToObject(String Identifier){\n    SomeObject object = (SomeObject) objects.get(Identifier);\n    //do stuff\n}\n</code></pre>\n\n<p>The HashMap one looks much much better but I really need performance on this so that has priority.</p>\n\n<p><strong>EDIT:</strong> Well Array's it is then, suggestions are still welcome</p>\n\n<p><strong>EDIT:</strong> I forgot to mention, the size of the Array/HashMap is always the same (6)</p>\n\n<p><strong>EDIT:</strong> It appears that HashMaps are faster\nArray: 128ms\nHash: 103ms</p>\n\n<p>When using less cycles the HashMaps was even twice as fast</p>\n\n<p>test code:</p>\n\n<pre><code>import java.util.HashMap;\nimport java.util.Random;\n\npublic class Optimizationsest {\nprivate static Random r = new Random();\n\nprivate static HashMap&lt;String,SomeObject&gt; hm = new HashMap&lt;String,SomeObject&gt;();\nprivate static SomeObject[] o = new SomeObject[6];\n\nprivate static String[] Indentifiers = {\"Obj1\",\"Obj2\",\"Obj3\",\"Obj4\",\"Obj5\",\"Obj6\"};\n\nprivate static int t = 1000000;\n\npublic static void main(String[] args){\n    CreateHash();\n    CreateArray();\n    long loopTime = ProcessArray();\n    long hashTime = ProcessHash();\n    System.out.println(\"Array: \" + loopTime + \"ms\");\n    System.out.println(\"Hash: \" + hashTime + \"ms\");\n}\n\npublic static void CreateHash(){\n    for(int i=0; i &lt;= 5; i++){\n        hm.put(\"Obj\"+(i+1), new SomeObject());\n    }\n}\n\npublic static void CreateArray(){\n    for(int i=0; i &lt;= 5; i++){\n        o[i]=new SomeObject();\n    }\n}\n\npublic static long ProcessArray(){\n    StopWatch sw = new StopWatch();\n    sw.start();\n    for(int i = 1;i&lt;=t;i++){\n        checkArray(Indentifiers[r.nextInt(6)]);\n    }\n    sw.stop();\n    return sw.getElapsedTime();\n}\n\n\n\nprivate static void checkArray(String Identifier) {\n    SomeObject object;\n    if(Identifier.equals(\"Obj1\")){\n        object=o[0];\n    }else if(Identifier.equals(\"Obj2\")){\n        object=o[1];\n    }else if(Identifier.equals(\"Obj3\")){\n        object=o[2];\n    }else if(Identifier.equals(\"Obj4\")){\n        object=o[3];\n    }else if(Identifier.equals(\"Obj5\")){\n        object=o[4];\n    }else if(Identifier.equals(\"Obj6\")){\n        object=o[5];\n    }else{\n        object = new SomeObject();\n    }\n    object.kill();\n}\n\npublic static long ProcessHash(){\n    StopWatch sw = new StopWatch();\n    sw.start();\n    for(int i = 1;i&lt;=t;i++){\n        checkHash(Indentifiers[r.nextInt(6)]);\n    }\n    sw.stop();\n    return sw.getElapsedTime();\n}\n\nprivate static void checkHash(String Identifier) {\n    SomeObject object = (SomeObject) hm.get(Identifier);\n    object.kill();\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":["java","spring-boot","hibernate","unit-testing","integration-testing"],"comments":[{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":1,"creation_date":1693908891,"post_id":77043355,"comment_id":135818329,"body_markdown":"You may want to check out [this question](https://stackoverflow.com/questions/28455078).","body":"You may want to check out <a href=\"https://stackoverflow.com/questions/28455078\">this question</a>."},{"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"score":0,"creation_date":1693909814,"post_id":77043355,"comment_id":135818504,"body_markdown":"do you mean the entities changes which are mapped to database tables / columns? Stuff like column renaming?","body":"do you mean the entities changes which are mapped to database tables / columns? Stuff like column renaming?"},{"owner":{"account_id":14424207,"reputation":21,"user_id":10419469,"display_name":"Kundan Kumar"},"score":0,"creation_date":1693912198,"post_id":77043355,"comment_id":135819000,"body_markdown":"@MarkBramnik Yes, the column renaming.","body":"@MarkBramnik Yes, the column renaming."},{"owner":{"account_id":14424207,"reputation":21,"user_id":10419469,"display_name":"Kundan Kumar"},"score":0,"creation_date":1693914366,"post_id":77043355,"comment_id":135819421,"body_markdown":"@MarkBramnik any approach regarding how to check the column renaming/deletion using code/unit test/integration test ?","body":"@MarkBramnik any approach regarding how to check the column renaming/deletion using code/unit test/integration test ?"},{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":0,"creation_date":1693986889,"post_id":77043355,"comment_id":135830320,"body_markdown":"What do you mean by &#39;check&#39;? If someone renames a column without also preparing an appropriate DB migration to adjust the DB tables, then the integration tests will fail, thus &#39;checking&#39; the change (you are, of course, using DB migrations for managing the schema, right?)","body":"What do you mean by &#39;check&#39;? If someone renames a column without also preparing an appropriate DB migration to adjust the DB tables, then the integration tests will fail, thus &#39;checking&#39; the change (you are, of course, using DB migrations for managing the schema, right?)"},{"owner":{"account_id":14424207,"reputation":21,"user_id":10419469,"display_name":"Kundan Kumar"},"score":0,"creation_date":1695189120,"post_id":77043355,"comment_id":135988924,"body_markdown":"@crizzis Yes, using flyway db tool for db migration using sql scripts.","body":"@crizzis Yes, using flyway db tool for db migration using sql scripts."}],"answers":[{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693978267,"creation_date":1693978267,"answer_id":77049216,"question_id":77043355,"body_markdown":"First, let me express some general thoughts:\r\n\r\nIt basically depends on what is your baseline, when you change the column, where do you maintain such a change and how does the change made in code propagates to the actual database. \r\nSince usually the code is &quot;static&quot; and represents the state of the project in time, you might need an external database with the previous version of the code deployed to compare to. This in general complicates the  tests because tests usually need to check a functionality of the current version of code and not to compare it with the previous versions or something. \r\n\r\nSo I would consider implementing such a check not as a test but as an external verification tool that can run during the build (say in CI). \r\nAlso what happens if this tool fails? Like ok, someone has indeed changed the column, so what? Should the whole build fail? If so how will the project evolve? After all the db changes happen and probably for good reasons...\r\n\r\nSo, assuming you still want to implement such a tool, read on:\r\n\r\nOne approach is to maintain migrations, tools like Flyway and Liquibase come to the rescue here.\r\n\r\nThe idea is that each change will be documented in code by means of a special &quot;migration&quot; script / file. \r\nFor example in Flyway there is a special table in db that contains the state of applied migrations so you can query it in the test and see whether you have more recent migrations to apply for example (each migration will change the db schema)\r\n\r\n\r\nAnother approach is using hibernate mappings in the entity annotations for example. \r\nIn this case You can try to check whether the current mapping can be applied to the current database state (its called mappings validation): Technically there is a property `hibernate.hbm2ddl.auto` that can be set to `validate` (read [this question][1] for more details)\r\n\r\nThe last possible option concept that comes to my mind:\r\nCompare the metadata of 2 schemas: One baseline (prepared in advance - this is the one you verify your mappings against) - query its metadata (tables, column names, indices, constraints, whatever you need)\r\nThen create a &quot;sample schema&quot; our of your hibernate mappings (you might want to use testcontainers for the db, if its possible) or even the real database to create a &quot;mock&quot; schema. \r\nNow Query the metadata of this new schema and compare with the first &quot;baseline&quot; schema. Probably it will use some custom solutions because you&#39;ll end up with some custom checks sooner or later (this change is ok, but that change is not) I believe.. \r\n\r\n  [1]: https://stackoverflow.com/questions/2116625/how-to-validate-hibernate-mapping-against-database","title":"Unit test to catch the situation where if we rename or delete an attribute in a Java/Spring Boot data model","body":"<p>First, let me express some general thoughts:</p>\n<p>It basically depends on what is your baseline, when you change the column, where do you maintain such a change and how does the change made in code propagates to the actual database.\nSince usually the code is &quot;static&quot; and represents the state of the project in time, you might need an external database with the previous version of the code deployed to compare to. This in general complicates the  tests because tests usually need to check a functionality of the current version of code and not to compare it with the previous versions or something.</p>\n<p>So I would consider implementing such a check not as a test but as an external verification tool that can run during the build (say in CI).\nAlso what happens if this tool fails? Like ok, someone has indeed changed the column, so what? Should the whole build fail? If so how will the project evolve? After all the db changes happen and probably for good reasons...</p>\n<p>So, assuming you still want to implement such a tool, read on:</p>\n<p>One approach is to maintain migrations, tools like Flyway and Liquibase come to the rescue here.</p>\n<p>The idea is that each change will be documented in code by means of a special &quot;migration&quot; script / file.\nFor example in Flyway there is a special table in db that contains the state of applied migrations so you can query it in the test and see whether you have more recent migrations to apply for example (each migration will change the db schema)</p>\n<p>Another approach is using hibernate mappings in the entity annotations for example.\nIn this case You can try to check whether the current mapping can be applied to the current database state (its called mappings validation): Technically there is a property <code>hibernate.hbm2ddl.auto</code> that can be set to <code>validate</code> (read <a href=\"https://stackoverflow.com/questions/2116625/how-to-validate-hibernate-mapping-against-database\">this question</a> for more details)</p>\n<p>The last possible option concept that comes to my mind:\nCompare the metadata of 2 schemas: One baseline (prepared in advance - this is the one you verify your mappings against) - query its metadata (tables, column names, indices, constraints, whatever you need)\nThen create a &quot;sample schema&quot; our of your hibernate mappings (you might want to use testcontainers for the db, if its possible) or even the real database to create a &quot;mock&quot; schema.\nNow Query the metadata of this new schema and compare with the first &quot;baseline&quot; schema. Probably it will use some custom solutions because you'll end up with some custom checks sooner or later (this change is ok, but that change is not) I believe..</p>\n"}],"owner":{"account_id":14424207,"reputation":21,"user_id":10419469,"display_name":"Kundan Kumar"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77049216,"answer_count":1,"score":-1,"last_activity_date":1693978267,"creation_date":1693906433,"question_id":77043355,"body_markdown":"I have to catch the situation whenever any attribute name is renamed or deleted from a java/spring boot data model. My project uses java, spring boot and hibernate.\r\n\r\n**How can I know when an attribute is renamed/deleted ?**\r\n\r\nAny hint/idea will be very helpful. ","title":"Unit test to catch the situation where if we rename or delete an attribute in a Java/Spring Boot data model","body":"<p>I have to catch the situation whenever any attribute name is renamed or deleted from a java/spring boot data model. My project uses java, spring boot and hibernate.</p>\n<p><strong>How can I know when an attribute is renamed/deleted ?</strong></p>\n<p>Any hint/idea will be very helpful.</p>\n"},{"tags":["java","regex","regex-group"],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693971647,"creation_date":1693971303,"answer_id":77048878,"question_id":77010760,"body_markdown":"&gt; _&quot;... how can I achieve it in Java without reimplementing the parsing of $ capture group syntax? ...&quot;_\r\n\r\nThe only way to return captured values would be through the _Pattern_ and _Matcher_ class.  \r\nOr, with the appended `.*`, as you mentioned.\r\n\r\n&gt; _&quot;... I want the other string to be able to use matching groups from the regex, but I can&#39;t find a way to do this in Java. ..._\r\n&gt;\r\n&gt; ```java\r\n&gt; // Outputs &quot;https://www.taco&amp;temp=1&quot; want &quot;taco&quot;\r\n&gt; ```\r\n\r\nImplementing the template syntax is not difficult.  \r\nThe _[Matcher#namedGroups](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html#namedGroups())_ method returns a _Map_ of capture group names and their group numbers.\r\n\r\n```java\r\nString string = template;\r\nfor (int i = 1; i &lt;= m.groupCount(); i++)\r\n    string = string.replaceAll(&quot;\\\\$&quot; + i, m.group(i));\r\nfor (Map.Entry&lt;String, Integer&gt; e : m.namedGroups().entrySet())\r\n    string = string.replaceAll(&quot;\\\\$\\\\{&quot; + e.getKey() + &quot;}&quot;, m.group(e.getValue()));\r\n```\r\n\r\nHere is the full re-factor.\r\n\r\n```java\r\npublic static Function&lt;String, AbstractMap.SimpleEntry&lt;String, String&gt;&gt; process(String regex, String template){\r\n    return input -&gt; {\r\n        Matcher m = Pattern.compile(regex).matcher(input);\r\n        if(!m.find()) return null;\r\n        String string = template;\r\n        for (int i = 1; i &lt;= m.groupCount(); i++)\r\n            string = string.replaceAll(&quot;\\\\$&quot; + i, m.group(i));\r\n        for (Map.Entry&lt;String, Integer&gt; e : m.namedGroups().entrySet())\r\n            string = string.replaceAll(&quot;\\\\$\\\\{&quot; + e.getKey() + &quot;}&quot;, m.group(e.getValue()));\r\n        return new AbstractMap.SimpleEntry&lt;&gt;(string, input);\r\n    };\r\n}\r\n\r\npublic static void main (String[] args) throws Exception {\r\n    String text = &quot;https://www.myaddress.com?x=y&amp;w=z&amp;other=other&amp;q=taco&amp;temp=1&quot;;\r\n    Function&lt;String, AbstractMap.SimpleEntry&lt;String, String&gt;&gt; func1 = process(&quot;myaddress.com.*[?&amp;]q=(\\\\w+)&quot;, &quot;$1&quot;);\r\n    Function&lt;String, AbstractMap.SimpleEntry&lt;String, String&gt;&gt; func2 = process(&quot;myaddress.com.*[?&amp;]q=(?&lt;query&gt;\\\\w+)&quot;, &quot;query: ${query}&quot;);\r\n    System.out.println(func1.apply(text).getKey());\r\n    // Outputs &quot;https://www.taco&amp;temp=1&quot; want &quot;taco&quot;\r\n    System.out.println(func2.apply(text).getKey());\r\n    // Outputs &quot;https://www.query: taco&amp;temp=1&quot; want &quot;query: taco&quot;\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\ntaco\r\nquery: taco\r\n```","title":"Expand Regex SubGroup Matches in Java","body":"<blockquote>\n<p><em>&quot;... how can I achieve it in Java without reimplementing the parsing of $ capture group syntax? ...&quot;</em></p>\n</blockquote>\n<p>The only way to return captured values would be through the <em>Pattern</em> and <em>Matcher</em> class.<br />\nOr, with the appended <code>.*</code>, as you mentioned.</p>\n<blockquote>\n<p><em>&quot;... I want the other string to be able to use matching groups from the regex, but I can't find a way to do this in Java. ...</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>// Outputs &quot;https://www.taco&amp;temp=1&quot; want &quot;taco&quot;\n</code></pre>\n</blockquote>\n<p>Implementing the template syntax is not difficult.<br />\nThe <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html#namedGroups()\" rel=\"nofollow noreferrer\">Matcher#namedGroups</a></em> method returns a <em>Map</em> of capture group names and their group numbers.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String string = template;\nfor (int i = 1; i &lt;= m.groupCount(); i++)\n    string = string.replaceAll(&quot;\\\\$&quot; + i, m.group(i));\nfor (Map.Entry&lt;String, Integer&gt; e : m.namedGroups().entrySet())\n    string = string.replaceAll(&quot;\\\\$\\\\{&quot; + e.getKey() + &quot;}&quot;, m.group(e.getValue()));\n</code></pre>\n<p>Here is the full re-factor.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Function&lt;String, AbstractMap.SimpleEntry&lt;String, String&gt;&gt; process(String regex, String template){\n    return input -&gt; {\n        Matcher m = Pattern.compile(regex).matcher(input);\n        if(!m.find()) return null;\n        String string = template;\n        for (int i = 1; i &lt;= m.groupCount(); i++)\n            string = string.replaceAll(&quot;\\\\$&quot; + i, m.group(i));\n        for (Map.Entry&lt;String, Integer&gt; e : m.namedGroups().entrySet())\n            string = string.replaceAll(&quot;\\\\$\\\\{&quot; + e.getKey() + &quot;}&quot;, m.group(e.getValue()));\n        return new AbstractMap.SimpleEntry&lt;&gt;(string, input);\n    };\n}\n\npublic static void main (String[] args) throws Exception {\n    String text = &quot;https://www.myaddress.com?x=y&amp;w=z&amp;other=other&amp;q=taco&amp;temp=1&quot;;\n    Function&lt;String, AbstractMap.SimpleEntry&lt;String, String&gt;&gt; func1 = process(&quot;myaddress.com.*[?&amp;]q=(\\\\w+)&quot;, &quot;$1&quot;);\n    Function&lt;String, AbstractMap.SimpleEntry&lt;String, String&gt;&gt; func2 = process(&quot;myaddress.com.*[?&amp;]q=(?&lt;query&gt;\\\\w+)&quot;, &quot;query: ${query}&quot;);\n    System.out.println(func1.apply(text).getKey());\n    // Outputs &quot;https://www.taco&amp;temp=1&quot; want &quot;taco&quot;\n    System.out.println(func2.apply(text).getKey());\n    // Outputs &quot;https://www.query: taco&amp;temp=1&quot; want &quot;query: taco&quot;\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>taco\nquery: taco\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4620709,"reputation":8645,"user_id":3745896,"accept_rate":93,"display_name":"River"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693978215,"creation_date":1693978215,"answer_id":77049213,"question_id":77010760,"body_markdown":"Answering my question with my workaround as it seems the most elegant solution available.\r\n\r\n------------\r\nThere is currently no method for this in Java; the best workaround is to expand the match to the entire string.\r\n\r\nExpanding the match looks a little different depending on which of [Java&#39;s three match operations][1] you&#39;re using:\r\n\r\n- [`matches`][2] - This already matches against the full string; a match will necessarily include all input.\r\n- [`lookingAt`][3] - Matches from start of input, append `.*` to your regex to include the full input in your match&lt;sup&gt;1&lt;/sup&gt;.\r\n- [`find`][4] - Matches any substring in the input, append *and* prepend `.*` to your regex to match the full input.\r\n\r\nThen you can use the original solution with [`replaceFirst`][5] and it will work as expected.\r\n\r\nNote that since you&#39;re expanding the match to the whole input, once you do so, any match operation becomes equivalent to using `matches`.\r\n\r\n\r\n&lt;sub&gt;&lt;sup&gt;1&lt;/sup&gt; Equivalently, in this case you can use [`appendReplacement`][6] without calling `appendTail` instead of expanding the match.&lt;/sub&gt;\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html#matches()\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html#lookingAt()\r\n  [4]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html#find()\r\n  [5]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html#replaceFirst(java.lang.String)\r\n  [6]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html#appendReplacement(java.lang.StringBuilder,java.lang.String)","title":"Expand Regex SubGroup Matches in Java","body":"<p>Answering my question with my workaround as it seems the most elegant solution available.</p>\n<hr />\n<p>There is currently no method for this in Java; the best workaround is to expand the match to the entire string.</p>\n<p>Expanding the match looks a little different depending on which of <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html\" rel=\"nofollow noreferrer\">Java's three match operations</a> you're using:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html#matches()\" rel=\"nofollow noreferrer\"><code>matches</code></a> - This already matches against the full string; a match will necessarily include all input.</li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html#lookingAt()\" rel=\"nofollow noreferrer\"><code>lookingAt</code></a> - Matches from start of input, append <code>.*</code> to your regex to include the full input in your match<sup>1</sup>.</li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html#find()\" rel=\"nofollow noreferrer\"><code>find</code></a> - Matches any substring in the input, append <em>and</em> prepend <code>.*</code> to your regex to match the full input.</li>\n</ul>\n<p>Then you can use the original solution with <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html#replaceFirst(java.lang.String)\" rel=\"nofollow noreferrer\"><code>replaceFirst</code></a> and it will work as expected.</p>\n<p>Note that since you're expanding the match to the whole input, once you do so, any match operation becomes equivalent to using <code>matches</code>.</p>\n<p><sub><sup>1</sup> Equivalently, in this case you can use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html#appendReplacement(java.lang.StringBuilder,java.lang.String)\" rel=\"nofollow noreferrer\"><code>appendReplacement</code></a> without calling <code>appendTail</code> instead of expanding the match.</sub></p>\n"}],"owner":{"account_id":4620709,"reputation":8645,"user_id":3745896,"accept_rate":93,"display_name":"River"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77049213,"answer_count":2,"score":0,"last_activity_date":1693978215,"creation_date":1693421101,"question_id":77010760,"body_markdown":"I have a function that takes a regex and another string and returns a lambda that matches the regex against whatever input. I want the other string to be able to use matching groups from the regex, but I can&#39;t find a way to do this in Java.\r\n\r\nMinimal example:\r\n\r\n```java\r\npublic static Function&lt;String, AbstractMap.SimpleEntry&gt; process(String regex, String template){\r\n  return input -&gt; {\r\n\tMatcher m = Pattern.compile(regex).matcher(input);\r\n\tif(!m.find()){\r\n\t  return null;\r\n\t}\r\n\t// Want something like:\r\n\t// String key = m.expand(template);\r\n\t// That *only* expands template and doesn&#39;t add anything else.\r\n\t\t\r\n\t// **Doesn&#39;t work**\r\n\t// m.replaceFirst/appendReplacement keep parts of the original input\r\n\tString key = m.replaceFirst(template);\r\n\t\t\r\n\treturn Map.entry(key, input);\r\n  };\r\n}\r\n\t\r\npublic static void main (String[] args) throws Exception {\r\n  String text = &quot;https://www.myaddress.com?x=y&amp;w=z&amp;other=other&amp;q=taco&amp;temp=1&quot;;\r\n  Function&lt;String, AbstractMap.SimpleEntry&gt; func1 = process(&quot;myaddress.com.*[?&amp;]q=(\\\\w+)&quot;, &quot;$1&quot;);\r\n  Function&lt;String, AbstractMap.SimpleEntry&gt; func2 = process(&quot;myaddress.com.*[?&amp;]q=(?&lt;query&gt;\\\\w+)&quot;, &quot;query: ${query}&quot;);\r\n  System.out.println(func1.apply(text).getKey());\r\n  // Outputs &quot;https://www.taco&amp;temp=1&quot; want &quot;taco&quot;\r\n  System.out.println(func2.apply(text).getKey());\r\n  // Outputs &quot;https://www.query: taco&amp;temp=1&quot; want &quot;query: taco&quot;\r\n}\r\n```\r\n\r\nThis example only uses a single capture group, but `regex`/`template` could be anything and we should support it generically (e.g. process should handle `$1 $4 ${mygroup}` as a `template` for a compatible `regex`). Forcing the user to match the entire URL is also undesirable.\r\n\r\nGolang has an [`Expand` function for this](https://pkg.go.dev/regexp#Regexp.ExpandString), how can I achieve it in Java without reimplementing the parsing of `$` capture group syntax?\r\n\r\nThe best workaround I currently have is simply to prepend and append `.*` to the regex string when compiling it.","title":"Expand Regex SubGroup Matches in Java","body":"<p>I have a function that takes a regex and another string and returns a lambda that matches the regex against whatever input. I want the other string to be able to use matching groups from the regex, but I can't find a way to do this in Java.</p>\n<p>Minimal example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Function&lt;String, AbstractMap.SimpleEntry&gt; process(String regex, String template){\n  return input -&gt; {\n    Matcher m = Pattern.compile(regex).matcher(input);\n    if(!m.find()){\n      return null;\n    }\n    // Want something like:\n    // String key = m.expand(template);\n    // That *only* expands template and doesn't add anything else.\n        \n    // **Doesn't work**\n    // m.replaceFirst/appendReplacement keep parts of the original input\n    String key = m.replaceFirst(template);\n        \n    return Map.entry(key, input);\n  };\n}\n    \npublic static void main (String[] args) throws Exception {\n  String text = &quot;https://www.myaddress.com?x=y&amp;w=z&amp;other=other&amp;q=taco&amp;temp=1&quot;;\n  Function&lt;String, AbstractMap.SimpleEntry&gt; func1 = process(&quot;myaddress.com.*[?&amp;]q=(\\\\w+)&quot;, &quot;$1&quot;);\n  Function&lt;String, AbstractMap.SimpleEntry&gt; func2 = process(&quot;myaddress.com.*[?&amp;]q=(?&lt;query&gt;\\\\w+)&quot;, &quot;query: ${query}&quot;);\n  System.out.println(func1.apply(text).getKey());\n  // Outputs &quot;https://www.taco&amp;temp=1&quot; want &quot;taco&quot;\n  System.out.println(func2.apply(text).getKey());\n  // Outputs &quot;https://www.query: taco&amp;temp=1&quot; want &quot;query: taco&quot;\n}\n</code></pre>\n<p>This example only uses a single capture group, but <code>regex</code>/<code>template</code> could be anything and we should support it generically (e.g. process should handle <code>$1 $4 ${mygroup}</code> as a <code>template</code> for a compatible <code>regex</code>). Forcing the user to match the entire URL is also undesirable.</p>\n<p>Golang has an <a href=\"https://pkg.go.dev/regexp#Regexp.ExpandString\" rel=\"nofollow noreferrer\"><code>Expand</code> function for this</a>, how can I achieve it in Java without reimplementing the parsing of <code>$</code> capture group syntax?</p>\n<p>The best workaround I currently have is simply to prepend and append <code>.*</code> to the regex string when compiling it.</p>\n"},{"tags":["java","http","dns","dialogflow-es","unknown-host"],"comments":[{"owner":{"account_id":2256817,"reputation":12199,"user_id":1987838,"accept_rate":100,"display_name":"Hackerman"},"score":0,"creation_date":1503598696,"post_id":45868239,"comment_id":78695590,"body_markdown":"Can you post the output of `dig api.api.ai`....also run the command multiple times in order to check if it gets the right answer every time...","body":"Can you post the output of <code>dig api.api.ai</code>....also run the command multiple times in order to check if it gets the right answer every time..."},{"owner":{"account_id":529467,"reputation":193,"user_id":8485541,"display_name":"Aman ZeeK Verma"},"score":0,"creation_date":1503599901,"post_id":45868239,"comment_id":78696330,"body_markdown":"Always got a reply:\nzeek@zeek:$ dig api.api.ai\n\n; &lt;&lt;&gt;&gt; DiG 9.10.3-P4-Ubuntu &lt;&lt;&gt;&gt; api.api.ai\n;; global options: +cmd\n;; Got answer:\n;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 2451\n;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n;; QUESTION SECTION:\n;api.api.ai.\t\t\tIN\tA\n\n;; ANSWER SECTION:\napi.api.ai.\t\t262\tIN\tA\t35.190.15.252\n\n;; Query time: 3 msec\n;; SERVER: 127.0.1.1#53(127.0.1.1)\n;; WHEN: Thu Aug 24 14:38:08 EDT 2017\n;; MSG SIZE  rcvd: 55\nSORRY ABOUT THE FORMAT HERE","body":"Always got a reply: zeek@zeek:$ dig api.api.ai  ; &lt;&lt;&gt;&gt; DiG 9.10.3-P4-Ubuntu &lt;&lt;&gt;&gt; api.api.ai ;; global options: +cmd ;; Got answer: ;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 2451 ;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1  ;; OPT PSEUDOSECTION: ; EDNS: version: 0, flags:; udp: 4096 ;; QUESTION SECTION: ;api.api.ai.\t\t\tIN\tA  ;; ANSWER SECTION: api.api.ai.\t\t262\tIN\tA\t35.190.15.252  ;; Query time: 3 msec ;; SERVER: 127.0.1.1#53(127.0.1.1) ;; WHEN: Thu Aug 24 14:38:08 EDT 2017 ;; MSG SIZE  rcvd: 55 SORRY ABOUT THE FORMAT HERE"},{"owner":{"account_id":2256817,"reputation":12199,"user_id":1987838,"accept_rate":100,"display_name":"Hackerman"},"score":1,"creation_date":1503600232,"post_id":45868239,"comment_id":78696499,"body_markdown":"For what I am seeing, it seems that resolves to ip4 without issues...but your app sometimes try to resolve using ipv6 and that is why it is failing...","body":"For what I am seeing, it seems that resolves to ip4 without issues...but your app sometimes try to resolve using ipv6 and that is why it is failing..."},{"owner":{"account_id":529467,"reputation":193,"user_id":8485541,"display_name":"Aman ZeeK Verma"},"score":0,"creation_date":1503600327,"post_id":45868239,"comment_id":78696548,"body_markdown":"Is there a way to force ipv4 resolution ?","body":"Is there a way to force ipv4 resolution ?"},{"owner":{"account_id":529467,"reputation":193,"user_id":8485541,"display_name":"Aman ZeeK Verma"},"score":0,"creation_date":1503600421,"post_id":45868239,"comment_id":78696602,"body_markdown":"-Djava.net.preferIPv4Stack=true   is doing the trick so far!!!!     I will confirm after few more tries","body":"-Djava.net.preferIPv4Stack=true   is doing the trick so far!!!!     I will confirm after few more tries"},{"owner":{"account_id":529467,"reputation":193,"user_id":8485541,"display_name":"Aman ZeeK Verma"},"score":0,"creation_date":1503601107,"post_id":45868239,"comment_id":78697002,"body_markdown":"I think I have executed it many times to &quot;confirm&quot; preferIPv4Stack works. Is there a way to fix ipv6 translation? Why does the code attempting ipv6? Is that my problem or api.api.ai problem?","body":"I think I have executed it many times to &quot;confirm&quot; preferIPv4Stack works. Is there a way to fix ipv6 translation? Why does the code attempting ipv6? Is that my problem or api.api.ai problem?"},{"owner":{"account_id":529467,"reputation":193,"user_id":8485541,"display_name":"Aman ZeeK Verma"},"score":0,"creation_date":1503605374,"post_id":45868239,"comment_id":78699075,"body_markdown":"ADDITIONAL INFO: \nWhen I unplug my Ethernet (which is via Wifi Extender) and connect to my main wifi. I dont get this resolution problem","body":"ADDITIONAL INFO:  When I unplug my Ethernet (which is via Wifi Extender) and connect to my main wifi. I dont get this resolution problem"},{"owner":{"account_id":2256817,"reputation":12199,"user_id":1987838,"accept_rate":100,"display_name":"Hackerman"},"score":0,"creation_date":1503607224,"post_id":45868239,"comment_id":78699986,"body_markdown":"I assume that you are in a Linux environment...since both network cards are different, it seems then that your wifi card has some extra configurations that your eth0 card lacks....finding what makes one different from the other one should do the trick...you can call me Sherlock xD","body":"I assume that you are in a Linux environment...since both network cards are different, it seems then that your wifi card has some extra configurations that your eth0 card lacks....finding what makes one different from the other one should do the trick...you can call me Sherlock xD"},{"owner":{"account_id":2881485,"reputation":3449,"user_id":2472282,"display_name":"mattcarrollcode"},"score":0,"creation_date":1503707186,"post_id":45868239,"comment_id":78741251,"body_markdown":"Please post an answer if you figured out a solution for other!  If not, please add more to your question so we can help!","body":"Please post an answer if you figured out a solution for other!  If not, please add more to your question so we can help!"}],"answers":[{"tags":[],"owner":{"account_id":529467,"reputation":193,"user_id":8485541,"display_name":"Aman ZeeK Verma"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1504962574,"creation_date":1504962574,"answer_id":46131050,"question_id":45868239,"body_markdown":"Posting solution to help others facing same problem,\r\n\r\nOn the lines of what @Hackerman said:\r\n\r\nMy wifi-extender was not capable to handle IPV6 translation. Always check the wifi-extender spec when encountered with similar problem.\r\n\r\nAs a solution/hack (if you HAVE to use IPV4-only router) use following when starting java\r\n\r\n    -DpreferIPv4Stack","title":"api.api.ai: Temporary failure in name resolution","body":"<p>Posting solution to help others facing same problem,</p>\n\n<p>On the lines of what @Hackerman said:</p>\n\n<p>My wifi-extender was not capable to handle IPV6 translation. Always check the wifi-extender spec when encountered with similar problem.</p>\n\n<p>As a solution/hack (if you HAVE to use IPV4-only router) use following when starting java</p>\n\n<pre><code>-DpreferIPv4Stack\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10966292,"reputation":364,"user_id":8057925,"display_name":"Indrapal Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693977250,"creation_date":1693977250,"answer_id":77049157,"question_id":45868239,"body_markdown":"If you are using ubuntu system then just Disable IPv6 using GRUB and update details.\r\n\r\n     sudo nano /etc/default/grub\r\n     \r\nupdate details:\r\n\r\n     GRUB_CMDLINE_LINUX_DEFAULT=”ipv6.disable=1 quiet splash”\r\n     \r\n     GRUB_CMDLINE_LINUX=”ipv6.disable=1″\r\n\r\nAfter updating changes use command\r\n    \r\n     sudo update-grub\r\n\r\nFollow link for more details - [link][1] \r\n\r\n\r\n  [1]: https://www.geeksforgeeks.org/how-to-disable-ipv6-in-linux/","title":"api.api.ai: Temporary failure in name resolution","body":"<p>If you are using ubuntu system then just Disable IPv6 using GRUB and update details.</p>\n<pre><code> sudo nano /etc/default/grub\n \n</code></pre>\n<p>update details:</p>\n<pre><code> GRUB_CMDLINE_LINUX_DEFAULT=”ipv6.disable=1 quiet splash”\n \n GRUB_CMDLINE_LINUX=”ipv6.disable=1″\n</code></pre>\n<p>After updating changes use command</p>\n<pre><code> sudo update-grub\n</code></pre>\n<p>Follow link for more details - <a href=\"https://www.geeksforgeeks.org/how-to-disable-ipv6-in-linux/\" rel=\"nofollow noreferrer\">link</a></p>\n"}],"owner":{"account_id":529467,"reputation":193,"user_id":8485541,"display_name":"Aman ZeeK Verma"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13685,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":46131050,"answer_count":2,"score":5,"last_activity_date":1693977250,"creation_date":1503597935,"question_id":45868239,"body_markdown":"With my code (shown below), I get proper result *randomly*. But most of the time I get error.\r\n\r\nEXCEPTION: \r\n\r\n    java.net.UnknownHostException: api.api.ai: Temporary failure in name resolution\r\n\tat java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)\r\n\tat java.net.InetAddress$2.lookupAllHostAddr(InetAddress.java:928)\r\n    ..&lt;snip&gt;...\r\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:55)\r\n    at PostJSON.main(PostJSON.java:34)\r\n\r\n\r\nSSCCE CODE:\r\n\r\n    private static final String URL = &quot;https://api.api.ai/v1/query?v=20150910&quot;;\r\n\tprivate static final String ACCESS_CODE = &quot;XXXXXX&quot;;\r\n\tpublic static final HttpClient client = HttpClientBuilder.create().build();\r\n\tpublic static final HttpPost httppost = new HttpPost(URL);\r\n\r\n\tprivate static final String str_json = &quot;{ query: \\&quot;how are you\\&quot;, lang: \\&quot;en\\&quot;, sessionId: \\&quot;somerandomthing\\&quot; }&quot;;\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tHttpEntity entity = new ByteArrayEntity(str_json.getBytes(&quot;UTF-8&quot;));\r\n\t\t\thttppost.setHeader(&quot;Content-Type&quot;,\r\n\t\t\t\t\t&quot;application/json; charset=utf-8&quot;);\r\n\t\t\thttppost.setHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + ACCESS_CODE);\r\n\t\t\thttppost.setEntity(entity);\r\n\t\t\tHttpResponse response = client.execute(httppost);\r\n\t\t\tString result = EntityUtils.toString(response.getEntity());\r\n\t\t\tSystem.out.println(result);\r\n\t\t} catch (Exception ex) {\r\n\t\t\tex.printStackTrace();\r\n\t\t} \r\n\t}\r\n\r\nNSLOOKUP:\r\n\r\n    zeek@zeek:$ nslookup api.ai.ai\r\n    Server:\t\t127.0.1.1  \r\n    Address:\t127.0.1.1#53\r\n    \r\n    Non-authoritative answer:  \r\n    Name:\tapi.ai.ai  \r\n    Address: 92.242.140.21\r\n\r\n/ETC/HOSTS\r\n\r\n    127.0.0.1\tlocalhost\r\n    127.0.1.1\tzeek\r\n    \r\n    # The following lines are desirable for IPv6 capable hosts\r\n    ::1     ip6-localhost ip6-loopback\r\n    fe00::0 ip6-localnet\r\n    ff00::0 ip6-mcastprefix\r\n    ff02::1 ip6-allnodes\r\n    ff02::2 ip6-allrouters\r\n\r\nNote: It does work sometime.\r\n\r\nPlease suggest what setting/config should I be checking from my side.\r\n\r\nalso note, my ping to api.api.ai works fine.","title":"api.api.ai: Temporary failure in name resolution","body":"<p>With my code (shown below), I get proper result <em>randomly</em>. But most of the time I get error.</p>\n\n<p>EXCEPTION: </p>\n\n<pre><code>java.net.UnknownHostException: api.api.ai: Temporary failure in name resolution\nat java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)\nat java.net.InetAddress$2.lookupAllHostAddr(InetAddress.java:928)\n..&lt;snip&gt;...\nat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:55)\nat PostJSON.main(PostJSON.java:34)\n</code></pre>\n\n<p>SSCCE CODE:</p>\n\n<pre><code>private static final String URL = \"https://api.api.ai/v1/query?v=20150910\";\nprivate static final String ACCESS_CODE = \"XXXXXX\";\npublic static final HttpClient client = HttpClientBuilder.create().build();\npublic static final HttpPost httppost = new HttpPost(URL);\n\nprivate static final String str_json = \"{ query: \\\"how are you\\\", lang: \\\"en\\\", sessionId: \\\"somerandomthing\\\" }\";\n\npublic static void main(String[] args) {\n\n    try {\n\n        HttpEntity entity = new ByteArrayEntity(str_json.getBytes(\"UTF-8\"));\n        httppost.setHeader(\"Content-Type\",\n                \"application/json; charset=utf-8\");\n        httppost.setHeader(\"Authorization\", \"Bearer \" + ACCESS_CODE);\n        httppost.setEntity(entity);\n        HttpResponse response = client.execute(httppost);\n        String result = EntityUtils.toString(response.getEntity());\n        System.out.println(result);\n    } catch (Exception ex) {\n        ex.printStackTrace();\n    } \n}\n</code></pre>\n\n<p>NSLOOKUP:</p>\n\n<pre><code>zeek@zeek:$ nslookup api.ai.ai\nServer:     127.0.1.1  \nAddress:    127.0.1.1#53\n\nNon-authoritative answer:  \nName:   api.ai.ai  \nAddress: 92.242.140.21\n</code></pre>\n\n<p>/ETC/HOSTS</p>\n\n<pre><code>127.0.0.1   localhost\n127.0.1.1   zeek\n\n# The following lines are desirable for IPv6 capable hosts\n::1     ip6-localhost ip6-loopback\nfe00::0 ip6-localnet\nff00::0 ip6-mcastprefix\nff02::1 ip6-allnodes\nff02::2 ip6-allrouters\n</code></pre>\n\n<p>Note: It does work sometime.</p>\n\n<p>Please suggest what setting/config should I be checking from my side.</p>\n\n<p>also note, my ping to api.api.ai works fine.</p>\n"},{"tags":["java","spring-boot","encryption","jdbc","tomcat9"],"comments":[{"owner":{"account_id":12359057,"reputation":103,"user_id":9013909,"display_name":"RancidCrab"},"score":0,"creation_date":1693936867,"post_id":77046688,"comment_id":135824525,"body_markdown":"Where are you going to host your app? The large cloud providers all offer managed secret handling like AWS Secrets Manager.","body":"Where are you going to host your app? The large cloud providers all offer managed secret handling like AWS Secrets Manager."},{"owner":{"account_id":2090213,"reputation":1431,"user_id":1860222,"accept_rate":52,"display_name":"pbuchheit"},"score":0,"creation_date":1693937356,"post_id":77046688,"comment_id":135824609,"body_markdown":"@RancidCrab The application will be running in an Ubuntu environment hosted in AWS. Storing a secret isn&#39;t the problem, I need to figure out how to access that data in the context of my application.","body":"@RancidCrab The application will be running in an Ubuntu environment hosted in AWS. Storing a secret isn&#39;t the problem, I need to figure out how to access that data in the context of my application."},{"owner":{"account_id":13294099,"reputation":49274,"user_id":9597706,"display_name":"Richard Heap"},"score":5,"creation_date":1693938278,"post_id":77046688,"comment_id":135824738,"body_markdown":"Call the Java impl of the AWS Secrets Manager API https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/secretsmanager/SecretsManagerClient.html#getSecretValue(software.amazon.awssdk.services.secretsmanager.model.GetSecretValueRequest)","body":"Call the Java impl of the AWS Secrets Manager API <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/secretsmanager/SecretsManagerClient.html#getSecretValue(software.amazon.awssdk.services.secretsmanager.model.GetSecretValueRequest)\" rel=\"nofollow noreferrer\">sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/&hellip;</a>"},{"owner":{"account_id":1809323,"reputation":11348,"user_id":1645712,"accept_rate":73,"display_name":"gusto2"},"score":0,"creation_date":1696344088,"post_id":77046688,"comment_id":136138982,"body_markdown":"You may add more context and limitations. `Jasyp` is safe and good enough for most of the cases. Then the question is - where/how do you store and configure the decryption key. usually it has to be part of the environment parameters (variable, ...). . When using an external service (AWS SecretManager, Azure KeyVault, ...)  you need to store thes service credentials somewhere too.. (except when running on the cloud, when a runtime role could be used).","body":"You may add more context and limitations. <code>Jasyp</code> is safe and good enough for most of the cases. Then the question is - where/how do you store and configure the decryption key. usually it has to be part of the environment parameters (variable, ...). . When using an external service (AWS SecretManager, Azure KeyVault, ...)  you need to store thes service credentials somewhere too.. (except when running on the cloud, when a runtime role could be used)."}],"answers":[{"tags":[],"owner":{"account_id":29241064,"reputation":26,"user_id":22402580,"display_name":"linden"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693977176,"creation_date":1693977176,"answer_id":77049153,"question_id":77046688,"body_markdown":"Just to elaborate more, the answer given by Richard is 100% valid, and not only we can use AWS Secret Manager to secure sensitive data but also vaults like HashiCorp, or if budget/requirement permits we can use a solution based on HSM (Hardware security module) which could be overkill.\r\n\r\nLimitations given by you are not a problem cause this is the standard procedure for deployment of application WAR.\r\n\r\nBut if you have decided that you want to encrypt the Sensitive data what you can do is.\r\n\r\nEncrypt the sensitive data using Some encryption algorithm and save the actual key in AWS secret manager itself. Post deployment of the application when you have access to your AWS secrets manager from your code, you can always ask for an encryption key from the secrets manager and decrypt your data on the fly.\r\n\r\nThis again has one issue where in the above operation we are assuming our AWS secret credentials are safe in the first place. (standard chicken and egg problem)\r\n\r\nAs you can see there&#39;s no one solution fits all scenario. One needs to make sure that we follow all the standards related to maintaining sensitive data at every level. (key rotation, monitoring, service authorization, auditing ...the list goes on)\r\n\r\nHope this helps. Thanks.","title":"How to encrypt/decrypt sensitive properties in a Tomcat web application","body":"<p>Just to elaborate more, the answer given by Richard is 100% valid, and not only we can use AWS Secret Manager to secure sensitive data but also vaults like HashiCorp, or if budget/requirement permits we can use a solution based on HSM (Hardware security module) which could be overkill.</p>\n<p>Limitations given by you are not a problem cause this is the standard procedure for deployment of application WAR.</p>\n<p>But if you have decided that you want to encrypt the Sensitive data what you can do is.</p>\n<p>Encrypt the sensitive data using Some encryption algorithm and save the actual key in AWS secret manager itself. Post deployment of the application when you have access to your AWS secrets manager from your code, you can always ask for an encryption key from the secrets manager and decrypt your data on the fly.</p>\n<p>This again has one issue where in the above operation we are assuming our AWS secret credentials are safe in the first place. (standard chicken and egg problem)</p>\n<p>As you can see there's no one solution fits all scenario. One needs to make sure that we follow all the standards related to maintaining sensitive data at every level. (key rotation, monitoring, service authorization, auditing ...the list goes on)</p>\n<p>Hope this helps. Thanks.</p>\n"}],"owner":{"account_id":2090213,"reputation":1431,"user_id":1860222,"accept_rate":52,"display_name":"pbuchheit"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":169,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693977176,"creation_date":1693935815,"question_id":77046688,"body_markdown":"I&#39;m working on moving a java web application from development to pre-production. As part of that process, there are some fields in the tomcat &#39;application.properties&#39; file like the database password and API tokens that need to be encrypted. I&#39;m struggling to find a secure way to do this. I was originally planning on using [Jasypt][1], but from what I can tell, that library hasn&#39;t seen a substantial update in several years. I&#39;m not sure what the alternatives are. The best I can come up with is querying a stored private key variable from gitlab, but I would still need to figure out how to actually do the encryption/decription.\r\n\r\nAny help or suggestions would be appreciated.\r\n\r\nSome notes about the limitations I&#39;m working with:\r\n\r\n - The application is compiled as a WAR and then copied to the webapps directory of the tomcat server.\r\n - Tomcat is being started/stopped as a service using a systemctl command.\r\n - Eventually, the deployment will be done as part of a CI pipline, but for now I need to be able to build and deploy manually from a local environment.\r\n\r\n \r\n\r\n\r\n  [1]: http://www.jasypt.org/","title":"How to encrypt/decrypt sensitive properties in a Tomcat web application","body":"<p>I'm working on moving a java web application from development to pre-production. As part of that process, there are some fields in the tomcat 'application.properties' file like the database password and API tokens that need to be encrypted. I'm struggling to find a secure way to do this. I was originally planning on using <a href=\"http://www.jasypt.org/\" rel=\"nofollow noreferrer\">Jasypt</a>, but from what I can tell, that library hasn't seen a substantial update in several years. I'm not sure what the alternatives are. The best I can come up with is querying a stored private key variable from gitlab, but I would still need to figure out how to actually do the encryption/decription.</p>\n<p>Any help or suggestions would be appreciated.</p>\n<p>Some notes about the limitations I'm working with:</p>\n<ul>\n<li>The application is compiled as a WAR and then copied to the webapps directory of the tomcat server.</li>\n<li>Tomcat is being started/stopped as a service using a systemctl command.</li>\n<li>Eventually, the deployment will be done as part of a CI pipline, but for now I need to be able to build and deploy manually from a local environment.</li>\n</ul>\n"},{"tags":["java","sockets"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1693952814,"post_id":77047972,"comment_id":135826911,"body_markdown":"In the processConnect method of NonBlockingClientRead, add some println statements to inform you of whether the method is returning and what value it is returning.","body":"In the processConnect method of NonBlockingClientRead, add some println statements to inform you of whether the method is returning and what value it is returning."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1693952917,"post_id":77047972,"comment_id":135826927,"body_markdown":"I added those println messages and it works for me.  Can you characterize better why you think this code doesn&#39;t work?  (The code does have a problem when the client closes its connection, but that&#39;s not directly the problem here.)","body":"I added those println messages and it works for me.  Can you characterize better why you think this code doesn&#39;t work?  (The code does have a problem when the client closes its connection, but that&#39;s not directly the problem here.)"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1693955998,"post_id":77047972,"comment_id":135827213,"body_markdown":"You should not register for `SelectionKey.OP_READ | SelectionKey.OP_WRITE);``OP_WRITE` is true as long as there is space in the send buffer, which is nearly always the case. You only use `OP_WRITE` after a zero-length write, and you stop using it immediately the send buffer starts accepting writes again. And after processing `OP_CONNECT` successfully you should remove it from the key&#39;s `interestOps`.","body":"You should not register for <code>SelectionKey.OP_READ | SelectionKey.OP_WRITE);``OP_WRITE</code> is true as long as there is space in the send buffer, which is nearly always the case. You only use <code>OP_WRITE</code> after a zero-length write, and you stop using it immediately the send buffer starts accepting writes again. And after processing <code>OP_CONNECT</code> successfully you should remove it from the key&#39;s <code>interestOps</code>."}],"owner":{"account_id":7527198,"reputation":1099,"user_id":5716914,"accept_rate":11,"display_name":"Johnyb"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1693976567,"answer_count":0,"score":0,"last_activity_date":1693976709,"creation_date":1693951111,"question_id":77047972,"body_markdown":"I have Socket server using non-blocking sockets:\r\n\r\n    public class NonBlockingMessageQueue implements MessageQueue {\r\n    \r\n        private final Map&lt;SelectionKey, LocalDateTime&gt; keyMap = new HashMap&lt;&gt;();\r\n        private final List&lt;String&gt; messages = new ArrayList&lt;&gt;();\r\n    \r\n        private Selector selector;\r\n        private ServerSocketChannel serverSocketChannel;\r\n    \r\n        @Override\r\n        public void start(int port) {\r\n            try {\r\n                initSelector();\r\n                listenToSockets();\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    \r\n        private void initSelector() throws IOException {\r\n            this.selector = Selector.open();\r\n            this.serverSocketChannel = ServerSocketChannel.open();\r\n            serverSocketChannel.configureBlocking(false);\r\n    \r\n            InetAddress ip = InetAddress.getByName(&quot;localhost&quot;);\r\n            serverSocketChannel.bind(new InetSocketAddress(ip, 1234));\r\n            serverSocketChannel.register(selector, SelectionKey.OP_ACCEPT);\r\n        }\r\n    \r\n        private void listenToSockets() throws IOException {\r\n            while (true) {\r\n                if (selector.select() &lt;= 0)\r\n                    continue;\r\n                Set&lt;SelectionKey&gt; selectedKeys = selector.selectedKeys();\r\n                Iterator&lt;SelectionKey&gt; iterator = selectedKeys.iterator();\r\n                while (iterator.hasNext()) {\r\n                    SelectionKey key = iterator.next();\r\n                    iterator.remove();\r\n                    keyMap.put(key, LocalDateTime.now());\r\n                    if (key.isAcceptable()) {\r\n                        SocketChannel sc = serverSocketChannel.accept();\r\n                        sc.configureBlocking(false);\r\n                        sc.register(selector, SelectionKey.OP_READ | SelectionKey.OP_WRITE);\r\n                        System.out.println(&quot;Connection Accepted: &quot; + sc.getLocalAddress() + &quot;n&quot;);\r\n                    }\r\n    \r\n                    if (key.isReadable()) {\r\n                        boolean exists = keyMap.containsKey(key);\r\n                        SocketChannel sc = (SocketChannel) key.channel();\r\n                        ByteBuffer bb = ByteBuffer.allocate(1024);\r\n                        sc.read(bb);\r\n                        String result = new String(bb.array()).trim();\r\n                        messages.add(result);\r\n    \r\n    \r\n                        for( SelectionKey channel : keyMap.keySet()) {\r\n                            try {\r\n                                SelectableChannel chan = channel.channel();\r\n                                if( (chan.validOps() &amp; SelectionKey.OP_WRITE ) &gt; 0) {\r\n                                    ByteBuffer bbb = ByteBuffer.wrap(messages.get(0).getBytes());\r\n                                                                 ((SocketChannel)chan).write(bbb);\r\n                                }\r\n                            }catch (Throwable e ){\r\n                                System.out.println(&quot;Error &quot; + e);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nAnd then i have two clients, one for writing and one for reading:\r\n\r\n\r\n        public class NonBlockingClientWrite {\r\n            private static BufferedReader input = null;\r\n            public static void main(String[] args) throws Exception {\r\n                InetSocketAddress addr = new InetSocketAddress(\r\n                        InetAddress.getByName(&quot;localhost&quot;), 1234);\r\n                Selector selector = Selector.open();\r\n                SocketChannel sc = SocketChannel.open();\r\n                sc.configureBlocking(false);\r\n                sc.connect(addr);\r\n                sc.register(selector, SelectionKey.OP_CONNECT | SelectionKey.OP_WRITE);\r\n                input = new BufferedReader(new InputStreamReader(System.in));\r\n                while (true) {\r\n                    if (selector.select() &gt; 0) {\r\n                        Boolean doneStatus = processReadySet\r\n                                (selector.selectedKeys());\r\n                        if (doneStatus) {\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                sc.close();\r\n            }\r\n            public static Boolean processReadySet(Set readySet)\r\n                    throws Exception {\r\n                SelectionKey key = null;\r\n                Iterator iterator = null;\r\n                iterator = readySet.iterator();\r\n                while (iterator.hasNext()) {\r\n                    key = (SelectionKey) iterator.next();\r\n                    iterator.remove();\r\n                }\r\n                if (key.isConnectable()) {\r\n                    Boolean connected = processConnect(key);\r\n                    if (!connected) {\r\n                        return true;\r\n                    }\r\n                }\r\n                if (key.isWritable()) {\r\n                    System.out.print(&quot;Type a message (type quit to stop): &quot;);\r\n                    String msg = input.readLine();\r\n                    if (msg.equalsIgnoreCase(&quot;quit&quot;)) {\r\n                        return true;\r\n                    }\r\n                    SocketChannel sc = (SocketChannel) key.channel();\r\n                    ByteBuffer bb = ByteBuffer.wrap(msg.getBytes());\r\n                    sc.write(bb);\r\n                }\r\n                return false;\r\n            }\r\n            public static Boolean processConnect(SelectionKey key) {\r\n                SocketChannel sc = (SocketChannel) key.channel();\r\n                try {\r\n                    while (sc.isConnectionPending()) {\r\n                        sc.finishConnect();\r\n                    }\r\n                } catch (IOException e) {\r\n                    key.cancel();\r\n                    e.printStackTrace();\r\n                    return false;\r\n                }\r\n                return true;\r\n            }\r\n        }\r\n    \r\n\r\nAnd read:\r\n\r\n    \r\n    public class NonBlockingClientRead {\r\n        private static BufferedReader input = null;\r\n        public static void main(String[] args) throws Exception {\r\n            InetSocketAddress addr = new InetSocketAddress(InetAddress.getByName(&quot;localhost&quot;), 1234);\r\n            Selector selector = Selector.open();\r\n            SocketChannel sc = SocketChannel.open();\r\n            sc.configureBlocking(false);\r\n            sc.connect(addr);\r\n            sc.register(selector, SelectionKey.OP_CONNECT | SelectionKey.OP_READ);\r\n            while (true) {\r\n                if (selector.select() &gt; 0) {\r\n                    Boolean doneStatus = processReadySet(selector.selectedKeys());\r\n                    if (doneStatus) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            sc.close();\r\n        }\r\n        public static Boolean processReadySet(Set readySet) throws Exception {\r\n            SelectionKey key = null;\r\n            Iterator iterator = null;\r\n            iterator = readySet.iterator();\r\n            while (iterator.hasNext()) {\r\n                key = (SelectionKey) iterator.next();\r\n                iterator.remove();\r\n            }\r\n            if (key.isConnectable()) {\r\n                Boolean connected = processConnect(key);\r\n                if (!connected) {\r\n                    return true;\r\n                }\r\n            }\r\n            if (key.isReadable()) {\r\n                SocketChannel sc = (SocketChannel) key.channel();\r\n                ByteBuffer bb = ByteBuffer.allocate(1024);\r\n                sc.read(bb);\r\n                String result = new String(bb.array()).trim();\r\n                System.out.println(&quot;Message received from Server: &quot; + result + &quot; Message length= &quot;\r\n                        + result.length());\r\n            }\r\n            return false;\r\n        }\r\n        public static Boolean processConnect(SelectionKey key) {\r\n            SocketChannel sc = (SocketChannel) key.channel();\r\n            try {\r\n                while (sc.isConnectionPending()) {\r\n                    sc.finishConnect();\r\n                }\r\n            } catch (IOException e) {\r\n                key.cancel();\r\n                e.printStackTrace();\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n\r\nBasicly, whenever i receive message from write client, i want to send it to read server ( the most primitive MQ example), however whenver i send data to the client, it is not receiving any messages, why?\r\n\r\nAlso \r\n  1) when i store the `SelectionKey` in a map , i have two types ,`SocketChannel` and `ServerSocketChannelImpl` , where does the `ServerSocketChannelImpl` comes from?\r\n\r\n[![enter image description here][1]][1]\r\n  \r\n  2) When i check ops for writing the socket, both `SocketChannel` in map ( i assume they are from clients have OP_WRITE flag set , e.g\r\n\r\n    chan.validOps() &amp; SelectionKey.OP_WRITE \r\n\r\nresults true for both of them , even tho i explicitly set one for `OP_READ` and one for `OP_WRITE`, how is this possible?\r\n\r\n 3) if i add `if( key.isWritable())` in server logic, it always goes into this branch, white? I assume `isReadable()` is true only when there is message in channel, so what is the purpose of `isWritable()` if we send directly messages with `channel.write(buffer)` ? And why is it always true? \r\n\r\nThanks for help!\r\n\r\n  [1]: https://i.stack.imgur.com/KOJwI.png","title":"Non blocking sockets arent receiving any writes from server","body":"<p>I have Socket server using non-blocking sockets:</p>\n<pre><code>public class NonBlockingMessageQueue implements MessageQueue {\n\n    private final Map&lt;SelectionKey, LocalDateTime&gt; keyMap = new HashMap&lt;&gt;();\n    private final List&lt;String&gt; messages = new ArrayList&lt;&gt;();\n\n    private Selector selector;\n    private ServerSocketChannel serverSocketChannel;\n\n    @Override\n    public void start(int port) {\n        try {\n            initSelector();\n            listenToSockets();\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    private void initSelector() throws IOException {\n        this.selector = Selector.open();\n        this.serverSocketChannel = ServerSocketChannel.open();\n        serverSocketChannel.configureBlocking(false);\n\n        InetAddress ip = InetAddress.getByName(&quot;localhost&quot;);\n        serverSocketChannel.bind(new InetSocketAddress(ip, 1234));\n        serverSocketChannel.register(selector, SelectionKey.OP_ACCEPT);\n    }\n\n    private void listenToSockets() throws IOException {\n        while (true) {\n            if (selector.select() &lt;= 0)\n                continue;\n            Set&lt;SelectionKey&gt; selectedKeys = selector.selectedKeys();\n            Iterator&lt;SelectionKey&gt; iterator = selectedKeys.iterator();\n            while (iterator.hasNext()) {\n                SelectionKey key = iterator.next();\n                iterator.remove();\n                keyMap.put(key, LocalDateTime.now());\n                if (key.isAcceptable()) {\n                    SocketChannel sc = serverSocketChannel.accept();\n                    sc.configureBlocking(false);\n                    sc.register(selector, SelectionKey.OP_READ | SelectionKey.OP_WRITE);\n                    System.out.println(&quot;Connection Accepted: &quot; + sc.getLocalAddress() + &quot;n&quot;);\n                }\n\n                if (key.isReadable()) {\n                    boolean exists = keyMap.containsKey(key);\n                    SocketChannel sc = (SocketChannel) key.channel();\n                    ByteBuffer bb = ByteBuffer.allocate(1024);\n                    sc.read(bb);\n                    String result = new String(bb.array()).trim();\n                    messages.add(result);\n\n\n                    for( SelectionKey channel : keyMap.keySet()) {\n                        try {\n                            SelectableChannel chan = channel.channel();\n                            if( (chan.validOps() &amp; SelectionKey.OP_WRITE ) &gt; 0) {\n                                ByteBuffer bbb = ByteBuffer.wrap(messages.get(0).getBytes());\n                                                             ((SocketChannel)chan).write(bbb);\n                            }\n                        }catch (Throwable e ){\n                            System.out.println(&quot;Error &quot; + e);\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>And then i have two clients, one for writing and one for reading:</p>\n<pre><code>    public class NonBlockingClientWrite {\n        private static BufferedReader input = null;\n        public static void main(String[] args) throws Exception {\n            InetSocketAddress addr = new InetSocketAddress(\n                    InetAddress.getByName(&quot;localhost&quot;), 1234);\n            Selector selector = Selector.open();\n            SocketChannel sc = SocketChannel.open();\n            sc.configureBlocking(false);\n            sc.connect(addr);\n            sc.register(selector, SelectionKey.OP_CONNECT | SelectionKey.OP_WRITE);\n            input = new BufferedReader(new InputStreamReader(System.in));\n            while (true) {\n                if (selector.select() &gt; 0) {\n                    Boolean doneStatus = processReadySet\n                            (selector.selectedKeys());\n                    if (doneStatus) {\n                        break;\n                    }\n                }\n            }\n            sc.close();\n        }\n        public static Boolean processReadySet(Set readySet)\n                throws Exception {\n            SelectionKey key = null;\n            Iterator iterator = null;\n            iterator = readySet.iterator();\n            while (iterator.hasNext()) {\n                key = (SelectionKey) iterator.next();\n                iterator.remove();\n            }\n            if (key.isConnectable()) {\n                Boolean connected = processConnect(key);\n                if (!connected) {\n                    return true;\n                }\n            }\n            if (key.isWritable()) {\n                System.out.print(&quot;Type a message (type quit to stop): &quot;);\n                String msg = input.readLine();\n                if (msg.equalsIgnoreCase(&quot;quit&quot;)) {\n                    return true;\n                }\n                SocketChannel sc = (SocketChannel) key.channel();\n                ByteBuffer bb = ByteBuffer.wrap(msg.getBytes());\n                sc.write(bb);\n            }\n            return false;\n        }\n        public static Boolean processConnect(SelectionKey key) {\n            SocketChannel sc = (SocketChannel) key.channel();\n            try {\n                while (sc.isConnectionPending()) {\n                    sc.finishConnect();\n                }\n            } catch (IOException e) {\n                key.cancel();\n                e.printStackTrace();\n                return false;\n            }\n            return true;\n        }\n    }\n</code></pre>\n<p>And read:</p>\n<pre><code>public class NonBlockingClientRead {\n    private static BufferedReader input = null;\n    public static void main(String[] args) throws Exception {\n        InetSocketAddress addr = new InetSocketAddress(InetAddress.getByName(&quot;localhost&quot;), 1234);\n        Selector selector = Selector.open();\n        SocketChannel sc = SocketChannel.open();\n        sc.configureBlocking(false);\n        sc.connect(addr);\n        sc.register(selector, SelectionKey.OP_CONNECT | SelectionKey.OP_READ);\n        while (true) {\n            if (selector.select() &gt; 0) {\n                Boolean doneStatus = processReadySet(selector.selectedKeys());\n                if (doneStatus) {\n                    break;\n                }\n            }\n        }\n        sc.close();\n    }\n    public static Boolean processReadySet(Set readySet) throws Exception {\n        SelectionKey key = null;\n        Iterator iterator = null;\n        iterator = readySet.iterator();\n        while (iterator.hasNext()) {\n            key = (SelectionKey) iterator.next();\n            iterator.remove();\n        }\n        if (key.isConnectable()) {\n            Boolean connected = processConnect(key);\n            if (!connected) {\n                return true;\n            }\n        }\n        if (key.isReadable()) {\n            SocketChannel sc = (SocketChannel) key.channel();\n            ByteBuffer bb = ByteBuffer.allocate(1024);\n            sc.read(bb);\n            String result = new String(bb.array()).trim();\n            System.out.println(&quot;Message received from Server: &quot; + result + &quot; Message length= &quot;\n                    + result.length());\n        }\n        return false;\n    }\n    public static Boolean processConnect(SelectionKey key) {\n        SocketChannel sc = (SocketChannel) key.channel();\n        try {\n            while (sc.isConnectionPending()) {\n                sc.finishConnect();\n            }\n        } catch (IOException e) {\n            key.cancel();\n            e.printStackTrace();\n            return false;\n        }\n        return true;\n    }\n}\n</code></pre>\n<p>Basicly, whenever i receive message from write client, i want to send it to read server ( the most primitive MQ example), however whenver i send data to the client, it is not receiving any messages, why?</p>\n<p>Also</p>\n<ol>\n<li>when i store the <code>SelectionKey</code> in a map , i have two types ,<code>SocketChannel</code> and <code>ServerSocketChannelImpl</code> , where does the <code>ServerSocketChannelImpl</code> comes from?</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/KOJwI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KOJwI.png\" alt=\"enter image description here\" /></a></p>\n<ol start=\"2\">\n<li>When i check ops for writing the socket, both <code>SocketChannel</code> in map ( i assume they are from clients have OP_WRITE flag set , e.g</li>\n</ol>\n<pre><code>chan.validOps() &amp; SelectionKey.OP_WRITE \n</code></pre>\n<p>results true for both of them , even tho i explicitly set one for <code>OP_READ</code> and one for <code>OP_WRITE</code>, how is this possible?</p>\n<ol start=\"3\">\n<li>if i add <code>if( key.isWritable())</code> in server logic, it always goes into this branch, white? I assume <code>isReadable()</code> is true only when there is message in channel, so what is the purpose of <code>isWritable()</code> if we send directly messages with <code>channel.write(buffer)</code> ? And why is it always true?</li>\n</ol>\n<p>Thanks for help!</p>\n"},{"tags":["java","android","gradle","build","butterknife"],"answers":[{"tags":[],"owner":{"account_id":14096747,"reputation":696,"user_id":10183294,"display_name":"SVK"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1614315599,"creation_date":1614315599,"answer_id":66380380,"question_id":66380187,"body_markdown":"Please note that, as per official documentation the Butter Knife tool is now deprecated.  \r\n And they have recommended to switch to [View Binding](https://developer.android.com/topic/libraries/view-binding). \r\n\r\nHence, I request you to revisit your decision of using Butter Knife.\r\n\r\nAnd in your gradle files, please ensure that below lines are added properly.  \r\nAdd these changes and then click on File &gt; Invalidate Cache and Restart in Android Studio.\r\n\r\n```\r\nandroid {\r\n  ...\r\n  // Butterknife requires Java 8.\r\n  compileOptions {\r\n    sourceCompatibility JavaVersion.VERSION_1_8\r\n    targetCompatibility JavaVersion.VERSION_1_8\r\n  }\r\n}\r\n```\r\nDependency\r\n```\r\ndependencies {\r\n  implementation &#39;com.jakewharton:butterknife:10.2.3&#39;\r\n  annotationProcessor &#39;com.jakewharton:butterknife-compiler:10.2.3&#39;\r\n}\r\n```\r\nIf you are using Kotlin, replace annotationProcessor with kapt.\r\n\r\nAnd to use Butter Knife in a library, please follow the steps provided in section **Library Projects** inside [official documentation](https://github.com/JakeWharton/butterknife)","title":"not able to build android project with butterknife dependency","body":"<p>Please note that, as per official documentation the Butter Knife tool is now deprecated.<br />\nAnd they have recommended to switch to <a href=\"https://developer.android.com/topic/libraries/view-binding\" rel=\"nofollow noreferrer\">View Binding</a>.</p>\n<p>Hence, I request you to revisit your decision of using Butter Knife.</p>\n<p>And in your gradle files, please ensure that below lines are added properly.<br />\nAdd these changes and then click on File &gt; Invalidate Cache and Restart in Android Studio.</p>\n<pre><code>android {\n  ...\n  // Butterknife requires Java 8.\n  compileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n  }\n}\n</code></pre>\n<p>Dependency</p>\n<pre><code>dependencies {\n  implementation 'com.jakewharton:butterknife:10.2.3'\n  annotationProcessor 'com.jakewharton:butterknife-compiler:10.2.3'\n}\n</code></pre>\n<p>If you are using Kotlin, replace annotationProcessor with kapt.</p>\n<p>And to use Butter Knife in a library, please follow the steps provided in section <strong>Library Projects</strong> inside <a href=\"https://github.com/JakeWharton/butterknife\" rel=\"nofollow noreferrer\">official documentation</a></p>\n"}],"owner":{"display_name":"user14979907"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7069,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":66380380,"answer_count":1,"score":3,"last_activity_date":1693976553,"creation_date":1614314157,"question_id":66380187,"body_markdown":"I am not able to build android project due to error of butterknife dependency.\r\n\r\nERROR\r\n\r\n&gt; Execution failed for task &#39;:app:javaPreCompileDebug&#39;.\r\n&gt; &gt; Could not resolve all files for configuration &#39;:app:debugAnnotationProcessorClasspath&#39;.\r\n&gt;    &gt; Failed to transform butterknife-compiler-8.6.0.jar (com.jakewharton:butterknife-compiler:8.6.0) to match attributes\r\n&gt; {artifactType=processed-jar, org.gradle.category=library,\r\n&gt; org.gradle.libraryelements=jar, org.gradle.status=release,\r\n&gt; org.gradle.usage=java-runtime}.\r\n&gt;       &gt; Execution failed for JetifyTransform: /Users/jordan/.gradle/caches/modules-2/files-2.1/com.jakewharton/butterknife-compiler/8.6.0/d3defb48a63aa0591117d0cec09f47a13fffda19/butterknife-compiler-8.6.0.jar.\r\n&gt;          &gt; Failed to transform &#39;/Users/jordan/.gradle/caches/modules-2/files-2.1/com.jakewharton/butterknife-compiler/8.6.0/d3defb48a63aa0591117d0cec09f47a13fffda19/butterknife-compiler-8.6.0.jar&#39;\r\n&gt; using Jetifier. Reason: AmbiguousStringJetifierException, message: The\r\n&gt; given artifact contains a string literal with a package reference\r\n&gt; &#39;android.support.v4.content&#39; that cannot be safely rewritten.\r\n&gt; Libraries using reflection such as annotation processors need to be\r\n&gt; updated manually to add support for androidx.. (Run with --stacktrace\r\n&gt; for more details.)\r\n&gt;            This is a known exception, and Jetifier won&#39;t be able to jetify this library.\r\n&gt;            Suggestions:\r\n&gt;             - If you believe this library doesn&#39;t need to be jetified (e.g., if it already supports AndroidX, or if it doesn&#39;t use support\r\n&gt; libraries/AndroidX at all), add android.jetifier.blacklist =\r\n&gt; {comma-separated list of regular expressions (or simply names) of the\r\n&gt; libraries that you don&#39;t want to be jetified} to the gradle.properties\r\n&gt; file.\r\n&gt;             - If you believe this library needs to be jetified (e.g., if it uses old support libraries and breaks your app if it isn&#39;t\r\n&gt; jetified), contact the library&#39;s authors to update this library to\r\n&gt; support AndroidX and use the supported version once it is released.\r\n&gt;            If you need further help, please leave a comment at \r\n\r\n\r\nDependency in Gradle Build File in App Level\r\n\r\n\r\n    dependencies {\r\n        implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n        implementation &#39;androidx.appcompat:appcompat:1.2.0&#39;\r\n        implementation &#39;androidx.constraintlayout:constraintlayout:2.0.4&#39;\r\n        testImplementation &#39;junit:junit:4.12&#39;\r\n        androidTestImplementation &#39;androidx.test.ext:junit:1.1.2&#39;\r\n        androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.3.0&#39;\r\n        implementation &#39;androidx.cardview:cardview:1.0.0&#39;\r\n        implementation &#39;androidx.recyclerview:recyclerview:1.2.0-beta02&#39;\r\n        implementation &#39;com.melnykov:floatingactionbutton:1.3.0&#39;\r\n      //  implementation &#39;com.android.support:design:28.0.0&#39;\r\n     //   implementation &#39;com.android.support:support-v13:28.0.0&#39;\r\n        implementation &#39;com.jpardogo.materialtabstrip:library:1.0.6&#39;\r\n        implementation &#39;com.jakewharton:butterknife:8.6.0&#39;\r\n        annotationProcessor &#39;com.jakewharton:butterknife-compiler:8.6.0&#39;\r\n    \r\n    \r\n    \r\n    }\r\n\r\n\r\nhow should I resolve it ?\r\n","title":"not able to build android project with butterknife dependency","body":"<p>I am not able to build android project due to error of butterknife dependency.</p>\n<p>ERROR</p>\n<blockquote>\n<p>Execution failed for task ':app:javaPreCompileDebug'.</p>\n<blockquote>\n<p>Could not resolve all files for configuration ':app:debugAnnotationProcessorClasspath'.\nFailed to transform butterknife-compiler-8.6.0.jar (com.jakewharton:butterknife-compiler:8.6.0) to match attributes\n{artifactType=processed-jar, org.gradle.category=library,\norg.gradle.libraryelements=jar, org.gradle.status=release,\norg.gradle.usage=java-runtime}.\n&gt; Execution failed for JetifyTransform: /Users/jordan/.gradle/caches/modules-2/files-2.1/com.jakewharton/butterknife-compiler/8.6.0/d3defb48a63aa0591117d0cec09f47a13fffda19/butterknife-compiler-8.6.0.jar.\n&gt; Failed to transform '/Users/jordan/.gradle/caches/modules-2/files-2.1/com.jakewharton/butterknife-compiler/8.6.0/d3defb48a63aa0591117d0cec09f47a13fffda19/butterknife-compiler-8.6.0.jar'\nusing Jetifier. Reason: AmbiguousStringJetifierException, message: The\ngiven artifact contains a string literal with a package reference\n'android.support.v4.content' that cannot be safely rewritten.\nLibraries using reflection such as annotation processors need to be\nupdated manually to add support for androidx.. (Run with --stacktrace\nfor more details.)\nThis is a known exception, and Jetifier won't be able to jetify this library.\nSuggestions:\n- If you believe this library doesn't need to be jetified (e.g., if it already supports AndroidX, or if it doesn't use support\nlibraries/AndroidX at all), add android.jetifier.blacklist =\n{comma-separated list of regular expressions (or simply names) of the\nlibraries that you don't want to be jetified} to the gradle.properties\nfile.\n- If you believe this library needs to be jetified (e.g., if it uses old support libraries and breaks your app if it isn't\njetified), contact the library's authors to update this library to\nsupport AndroidX and use the supported version once it is released.\nIf you need further help, please leave a comment at</p>\n</blockquote>\n</blockquote>\n<p>Dependency in Gradle Build File in App Level</p>\n<pre><code>dependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation 'androidx.appcompat:appcompat:1.2.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.4'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\n    implementation 'androidx.cardview:cardview:1.0.0'\n    implementation 'androidx.recyclerview:recyclerview:1.2.0-beta02'\n    implementation 'com.melnykov:floatingactionbutton:1.3.0'\n  //  implementation 'com.android.support:design:28.0.0'\n //   implementation 'com.android.support:support-v13:28.0.0'\n    implementation 'com.jpardogo.materialtabstrip:library:1.0.6'\n    implementation 'com.jakewharton:butterknife:8.6.0'\n    annotationProcessor 'com.jakewharton:butterknife-compiler:8.6.0'\n\n\n\n}\n</code></pre>\n<p>how should I resolve it ?</p>\n"},{"tags":["java","algorithm","sorting","hashmap","java.util.scanner"],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693949993,"creation_date":1693947982,"answer_id":77047747,"question_id":77047591,"body_markdown":"Your try-with-resources blocks are causing problems as try with resources closes the open `InputStream` when done (which one should not do with a Scanner for the console). Once a console Scanner is open, if you close it in the same program you won&#39;t be able to re-open it.\r\n\r\nTry the following to see this behavior.\r\n```\r\ntry (Scanner scanner = new Scanner(System.in)) {\r\n     System.out.print(&quot;Prompting for input:&quot;);\r\n     if (scanner.hasNextLine()) {\r\n         String s = scanner.nextLine();\r\n         System.out.println(s);\r\n     }         \r\n }\r\n try (Scanner scan = new Scanner(System.in)) {\r\n     System.out.print(&quot;Prompting for input again: &quot;);\r\n     if (scan.hasNextLine()) {\r\n         String s = scan.nextLine();\r\n         System.out.println(s);\r\n     }         \r\n }\r\n```\r\nJust use one scanner and pass it to the methods. And eliminate the try-with resources blocks.\r\n```\r\n// Prompt user input\r\nScanner scanner = new Scanner(System.in);\r\nSorter.getName(scanner);\r\nSorter.dict();\r\nSorter.counter(scanner);\r\n```\r\n","title":"How do I correct my Sorter methods to allow for more user input?","body":"<p>Your try-with-resources blocks are causing problems as try with resources closes the open <code>InputStream</code> when done (which one should not do with a Scanner for the console). Once a console Scanner is open, if you close it in the same program you won't be able to re-open it.</p>\n<p>Try the following to see this behavior.</p>\n<pre><code>try (Scanner scanner = new Scanner(System.in)) {\n     System.out.print(&quot;Prompting for input:&quot;);\n     if (scanner.hasNextLine()) {\n         String s = scanner.nextLine();\n         System.out.println(s);\n     }         \n }\n try (Scanner scan = new Scanner(System.in)) {\n     System.out.print(&quot;Prompting for input again: &quot;);\n     if (scan.hasNextLine()) {\n         String s = scan.nextLine();\n         System.out.println(s);\n     }         \n }\n</code></pre>\n<p>Just use one scanner and pass it to the methods. And eliminate the try-with resources blocks.</p>\n<pre><code>// Prompt user input\nScanner scanner = new Scanner(System.in);\nSorter.getName(scanner);\nSorter.dict();\nSorter.counter(scanner);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693976496,"creation_date":1693965508,"answer_id":77048615,"question_id":77047591,"body_markdown":"&gt; _&quot;... when I run the code, it asks for name input, but then it terminates right as it says to input a numeric value. ...&quot;_\r\n\r\nThis is because _scanner.hasNextLine_ is returning _false_ within the _counter_ method.\r\n\r\nAfter removing the condition, an exception will occur, from the _scanner.nextLine_ call.\r\n\r\n```none\r\nException in thread &quot;main&quot; java.util.NoSuchElementException: No line found\r\n\tat java.base/java.util.Scanner.nextLine(Scanner.java:1660)\r\n\tat Sorter.counter ...\r\n```\r\n\r\nThis is because you&#39;re _try-with-resources_ statements are closing the _static_ _[System#in](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/System.html#in)_ stream.\r\n\r\nUse a single _Scanner_ instance; place _scanner_ as a _static_ field of _Sorter_.  \r\nAnd, utilize this object in _getName_ and _counter_.\r\n\r\nAnd, instead checking _hasNextLine_, use _[String#isBlank](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#isBlank())_ on _nextLine_.\r\n\r\n```java\r\nclass Sorter {\r\n    static Scanner scanner = new Scanner(System.in);\r\n\r\n    public static void dict() {...}\r\n\r\n    public static String getName() {\r\n        System.out.print(&quot;Enter your name: &quot;);\r\n        String nameInput = scanner.nextLine();\r\n        if (!nameInput.isBlank()) {\r\n            System.out.println(&quot;Hello, &quot; + nameInput + &quot;.&quot;);\r\n            return nameInput;\r\n        } else {\r\n            // handle no input available\r\n            return null;\r\n        }\r\n    }\r\n\r\n    public static void counter() {\r\n        System.out.print(&quot;Enter a numerical value: &quot;);\r\n        String userInputString = scanner.nextLine();\r\n        try {\r\n            if (userInputString.isBlank()) throw new Exception(); \r\n            int userInput = Integer.parseInt(userInputString);\r\n            String whatFamily = getGroup(userInput);\r\n            System.out.println(&quot;Family: &quot; + whatFamily);\r\n        } catch (NumberFormatException e) {\r\n            System.out.println(&quot;No Family LOL get rekt&quot;);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        \r\n    }\r\n...\r\n}\r\n```\r\n\r\nAs a recommendation, _encapsulate_ a _[LinkedHashMap](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/LinkedHashMap.html)_ class in order to provide functionality to the _Range_ object.\r\n\r\n```java\r\nclass RangeMap&lt;K, V extends Range&gt; extends LinkedHashMap&lt;K, Range&gt; {\r\n    Range put(K key, int i, int n) {\r\n        return super.put(key, new Range(i, n));\r\n    }\r\n\r\n    Range get(int i, int n) {\r\n        return super.get(new Range(i, n));\r\n    }\r\n\r\n    AbstractMap.SimpleEntry&lt;K, Range&gt; find(int x) {\r\n        Range copy;\r\n        for (Map.Entry&lt;K, Range&gt; e : entrySet()) {\r\n            copy = e.getValue();\r\n            if (x &gt;= copy.getStart() &amp;&amp; x &lt;= copy.getEnd())\r\n                return new SimpleEntry&lt;&gt;(e.getKey(), e.getValue());\r\n        }\r\n        return null;\r\n    }\r\n}\r\n```\r\n\r\nNow you can re-factor the _getGroup_ method.  \r\nYou&#39;ll need to increase the scope, and switch the context, of _dictionary_.\r\n\r\n```java\r\nclass Sorter {\r\n    static Scanner scanner = new Scanner(System.in);\r\n    // Create a dictionary\r\n    static RangeMap&lt;String, Range&gt; dictionary = new RangeMap&lt;&gt;();\r\n...\r\n    public static String getGroup(int value) {\r\n        AbstractMap.SimpleEntry&lt;String, Range&gt; r = dictionary.find(value);\r\n        if (r != null) return r.getKey();\r\n        return &quot;No Family LOL get rekt&quot;;\r\n    }\r\n...\r\n}\r\n```\r\n\r\nAdditionally, you can modify the _dict_ method.\r\n\r\n```java\r\npublic static void dict() {\r\n    // Add groups and their corresponding value ranges\r\n    dictionary.put(&quot;Family A&quot;, 0, 10);\r\n    dictionary.put(&quot;Family B&quot;, 11, 20);\r\n    dictionary.put(&quot;Family C&quot;, 21, 30);\r\n\r\n    // Retrieve the value range for a specific group\r\n    Range range;\r\n    for (Map.Entry&lt;String, Range&gt; e : dictionary.entrySet()) {\r\n        range = e.getValue();\r\n        System.out.printf(&quot;Value range for %s: %d - %d%n&quot;,\r\n                          e.getKey(), range.start(), range.end());\r\n    }\r\n}\r\n```\r\n\r\nOn a final note, you can utilize a _[record](https://docs.oracle.com/en/java/javase/20/language/records.html)_ for the _Range_ class.  \r\nThis will force the names _getStart_ to _start_ and _getEnd_ to _end_.\r\n\r\n```java\r\nrecord Range(int start, int end) { }\r\n```","title":"How do I correct my Sorter methods to allow for more user input?","body":"<blockquote>\n<p><em>&quot;... when I run the code, it asks for name input, but then it terminates right as it says to input a numeric value. ...&quot;</em></p>\n</blockquote>\n<p>This is because <em>scanner.hasNextLine</em> is returning <em>false</em> within the <em>counter</em> method.</p>\n<p>After removing the condition, an exception will occur, from the <em>scanner.nextLine</em> call.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; java.util.NoSuchElementException: No line found\n    at java.base/java.util.Scanner.nextLine(Scanner.java:1660)\n    at Sorter.counter ...\n</code></pre>\n<p>This is because you're <em>try-with-resources</em> statements are closing the <em>static</em> <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/System.html#in\" rel=\"nofollow noreferrer\">System#in</a></em> stream.</p>\n<p>Use a single <em>Scanner</em> instance; place <em>scanner</em> as a <em>static</em> field of <em>Sorter</em>.<br />\nAnd, utilize this object in <em>getName</em> and <em>counter</em>.</p>\n<p>And, instead checking <em>hasNextLine</em>, use <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#isBlank()\" rel=\"nofollow noreferrer\">String#isBlank</a></em> on <em>nextLine</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Sorter {\n    static Scanner scanner = new Scanner(System.in);\n\n    public static void dict() {...}\n\n    public static String getName() {\n        System.out.print(&quot;Enter your name: &quot;);\n        String nameInput = scanner.nextLine();\n        if (!nameInput.isBlank()) {\n            System.out.println(&quot;Hello, &quot; + nameInput + &quot;.&quot;);\n            return nameInput;\n        } else {\n            // handle no input available\n            return null;\n        }\n    }\n\n    public static void counter() {\n        System.out.print(&quot;Enter a numerical value: &quot;);\n        String userInputString = scanner.nextLine();\n        try {\n            if (userInputString.isBlank()) throw new Exception(); \n            int userInput = Integer.parseInt(userInputString);\n            String whatFamily = getGroup(userInput);\n            System.out.println(&quot;Family: &quot; + whatFamily);\n        } catch (NumberFormatException e) {\n            System.out.println(&quot;No Family LOL get rekt&quot;);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        \n    }\n...\n}\n</code></pre>\n<p>As a recommendation, <em>encapsulate</em> a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/LinkedHashMap.html\" rel=\"nofollow noreferrer\">LinkedHashMap</a></em> class in order to provide functionality to the <em>Range</em> object.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class RangeMap&lt;K, V extends Range&gt; extends LinkedHashMap&lt;K, Range&gt; {\n    Range put(K key, int i, int n) {\n        return super.put(key, new Range(i, n));\n    }\n\n    Range get(int i, int n) {\n        return super.get(new Range(i, n));\n    }\n\n    AbstractMap.SimpleEntry&lt;K, Range&gt; find(int x) {\n        Range copy;\n        for (Map.Entry&lt;K, Range&gt; e : entrySet()) {\n            copy = e.getValue();\n            if (x &gt;= copy.getStart() &amp;&amp; x &lt;= copy.getEnd())\n                return new SimpleEntry&lt;&gt;(e.getKey(), e.getValue());\n        }\n        return null;\n    }\n}\n</code></pre>\n<p>Now you can re-factor the <em>getGroup</em> method.<br />\nYou'll need to increase the scope, and switch the context, of <em>dictionary</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Sorter {\n    static Scanner scanner = new Scanner(System.in);\n    // Create a dictionary\n    static RangeMap&lt;String, Range&gt; dictionary = new RangeMap&lt;&gt;();\n...\n    public static String getGroup(int value) {\n        AbstractMap.SimpleEntry&lt;String, Range&gt; r = dictionary.find(value);\n        if (r != null) return r.getKey();\n        return &quot;No Family LOL get rekt&quot;;\n    }\n...\n}\n</code></pre>\n<p>Additionally, you can modify the <em>dict</em> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void dict() {\n    // Add groups and their corresponding value ranges\n    dictionary.put(&quot;Family A&quot;, 0, 10);\n    dictionary.put(&quot;Family B&quot;, 11, 20);\n    dictionary.put(&quot;Family C&quot;, 21, 30);\n\n    // Retrieve the value range for a specific group\n    Range range;\n    for (Map.Entry&lt;String, Range&gt; e : dictionary.entrySet()) {\n        range = e.getValue();\n        System.out.printf(&quot;Value range for %s: %d - %d%n&quot;,\n                          e.getKey(), range.start(), range.end());\n    }\n}\n</code></pre>\n<p>On a final note, you can utilize a <em><a href=\"https://docs.oracle.com/en/java/javase/20/language/records.html\" rel=\"nofollow noreferrer\">record</a></em> for the <em>Range</em> class.<br />\nThis will force the names <em>getStart</em> to <em>start</em> and <em>getEnd</em> to <em>end</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>record Range(int start, int end) { }\n</code></pre>\n"}],"owner":{"account_id":26717768,"reputation":43,"user_id":20322128,"display_name":"L4w1i3t"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":77047747,"answer_count":2,"score":1,"last_activity_date":1693976496,"creation_date":1693946106,"question_id":77047591,"body_markdown":"I am trying to build a sorting algorithm for a few friends of mine, and I am making a test build for it right now. Eventually I will have it more dynamic, but currently I just have it to where it takes in user input for one&#39;s name and whatever number they enter. However, when I run the code, it asks for name input, but then it terminates right as it says to input a numeric value. I&#39;ve been dealing with this for half an hour now and, honestly, I&#39;m a bit stumped.\r\n\r\nMy code is as follows:\r\n```\r\n//Sorter.java\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.Scanner;\r\n\r\npublic class Sorter {\r\n\r\n    public static void dict() {\r\n\r\n        // Create a dictionary\r\n        Map&lt;String, Range&gt; dictionary = new HashMap&lt;&gt;();\r\n\r\n        // Add groups and their corresponding value ranges\r\n        dictionary.put(&quot;Family A&quot;, new Range(0, 10));\r\n        dictionary.put(&quot;Family B&quot;, new Range(11, 20));\r\n        dictionary.put(&quot;Family C&quot;, new Range(21, 30));\r\n\r\n        // Retrieve the value range for a specific group\r\n        Range rangea = dictionary.get(&quot;Family A&quot;);\r\n        System.out.println(&quot;Value range for Family A: &quot; + rangea.getStart() + &quot; - &quot; + rangea.getEnd());\r\n        Range rangeb = dictionary.get(&quot;Family B&quot;);\r\n        System.out.println(&quot;Value range for Family B: &quot; + rangeb.getStart() + &quot; - &quot; + rangeb.getEnd());\r\n        Range rangec = dictionary.get(&quot;Family C&quot;);\r\n        System.out.println(&quot;Value range for Family C: &quot; + rangec.getStart() + &quot; - &quot; + rangec.getEnd());\r\n\r\n    }\r\n\r\n    public static String getName() {\r\n        try (Scanner scanner = new Scanner(System.in)) {\r\n            System.out.print(&quot;Enter your name: &quot;);\r\n            if (scanner.hasNextLine()) {\r\n                String nameInput = scanner.nextLine();\r\n                System.out.println(&quot;Hello, &quot; + nameInput + &quot;.&quot;);\r\n                return nameInput;\r\n            } else {\r\n                // handle no input available\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n\r\n/**\r\n * Prompts the user to enter a numerical value and prints the corresponding family group.\r\n */\r\n    public static void counter() {\r\n        try (Scanner scanner = new Scanner(System.in)) {\r\n            System.out.print(&quot;Enter a numerical value: &quot;);\r\n            if (scanner.hasNextLine()) {\r\n                String userInputString = scanner.nextLine();\r\n                try {\r\n                    int userInput = Integer.parseInt(userInputString);\r\n                    String whatFamily = getGroup(userInput);\r\n                    System.out.println(&quot;Family: &quot; + whatFamily);\r\n                } catch (NumberFormatException e) {\r\n                    System.out.println(&quot;No Family LOL get rekt&quot;);\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Determines the group based on the given value.\r\n     *\r\n     * @param  value  the value to be evaluated\r\n     * @return        the group corresponding to the value\r\n     */\r\n    public static String getGroup(int value) {\r\n        // Check if the value is less than 0\r\n        if (value &lt; 0) {\r\n            return &quot;Family A&quot;;\r\n        }\r\n        // Check if the value is within the range of Family A\r\n        else if (value &gt;= 1 &amp;&amp; value &lt;= 10) {\r\n            return &quot;Family A&quot;;\r\n        }\r\n        // Check if the value is within the range of Family B\r\n        else if (value &gt;= 11 &amp;&amp; value &lt;= 20) {\r\n            return &quot;Family B&quot;;\r\n        }\r\n        // Check if the value is within the range of Family C\r\n        else if (value &gt;= 21 &amp;&amp; value &lt;= 30) {\r\n            return &quot;Family C&quot;;\r\n        }\r\n        // Check if the value is greater than 30\r\n        else if (value &gt; 30) {\r\n            return &quot;Family C&quot;;\r\n        }\r\n        // Value is outside the range of any family\r\n        else {\r\n            return &quot;No Family LOL get rekt&quot;;\r\n        }\r\n    }\r\n}\r\n\r\nclass Range {\r\n    private int start;\r\n    private int end;\r\n\r\n    public Range(int start, int end) {\r\n        this.start = start;\r\n        this.end = end;\r\n    }\r\n\r\n    public int getStart() {\r\n        return start;\r\n    }\r\n\r\n    public int getEnd() {\r\n        return end;\r\n    }\r\n}\r\n```\r\n```\r\n//Exec.java\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class Exec {\r\n    /**\r\n     * Initializes a dictionary with groups and their corresponding value ranges.\r\n     * Prints the value range for each group and prompts user input.\r\n     *\r\n     * @param  args  command line arguments\r\n     */\r\n    public static void main(String[] args) {\r\n\r\n        // Prompt user input\r\n        Sorter.getName();\r\n        Sorter.dict();\r\n        Sorter.counter();\r\n    }\r\n}\r\n```","title":"How do I correct my Sorter methods to allow for more user input?","body":"<p>I am trying to build a sorting algorithm for a few friends of mine, and I am making a test build for it right now. Eventually I will have it more dynamic, but currently I just have it to where it takes in user input for one's name and whatever number they enter. However, when I run the code, it asks for name input, but then it terminates right as it says to input a numeric value. I've been dealing with this for half an hour now and, honestly, I'm a bit stumped.</p>\n<p>My code is as follows:</p>\n<pre><code>//Sorter.java\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Scanner;\n\npublic class Sorter {\n\n    public static void dict() {\n\n        // Create a dictionary\n        Map&lt;String, Range&gt; dictionary = new HashMap&lt;&gt;();\n\n        // Add groups and their corresponding value ranges\n        dictionary.put(&quot;Family A&quot;, new Range(0, 10));\n        dictionary.put(&quot;Family B&quot;, new Range(11, 20));\n        dictionary.put(&quot;Family C&quot;, new Range(21, 30));\n\n        // Retrieve the value range for a specific group\n        Range rangea = dictionary.get(&quot;Family A&quot;);\n        System.out.println(&quot;Value range for Family A: &quot; + rangea.getStart() + &quot; - &quot; + rangea.getEnd());\n        Range rangeb = dictionary.get(&quot;Family B&quot;);\n        System.out.println(&quot;Value range for Family B: &quot; + rangeb.getStart() + &quot; - &quot; + rangeb.getEnd());\n        Range rangec = dictionary.get(&quot;Family C&quot;);\n        System.out.println(&quot;Value range for Family C: &quot; + rangec.getStart() + &quot; - &quot; + rangec.getEnd());\n\n    }\n\n    public static String getName() {\n        try (Scanner scanner = new Scanner(System.in)) {\n            System.out.print(&quot;Enter your name: &quot;);\n            if (scanner.hasNextLine()) {\n                String nameInput = scanner.nextLine();\n                System.out.println(&quot;Hello, &quot; + nameInput + &quot;.&quot;);\n                return nameInput;\n            } else {\n                // handle no input available\n                return null;\n            }\n        }\n    }\n\n/**\n * Prompts the user to enter a numerical value and prints the corresponding family group.\n */\n    public static void counter() {\n        try (Scanner scanner = new Scanner(System.in)) {\n            System.out.print(&quot;Enter a numerical value: &quot;);\n            if (scanner.hasNextLine()) {\n                String userInputString = scanner.nextLine();\n                try {\n                    int userInput = Integer.parseInt(userInputString);\n                    String whatFamily = getGroup(userInput);\n                    System.out.println(&quot;Family: &quot; + whatFamily);\n                } catch (NumberFormatException e) {\n                    System.out.println(&quot;No Family LOL get rekt&quot;);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        }\n    }\n\n    /**\n     * Determines the group based on the given value.\n     *\n     * @param  value  the value to be evaluated\n     * @return        the group corresponding to the value\n     */\n    public static String getGroup(int value) {\n        // Check if the value is less than 0\n        if (value &lt; 0) {\n            return &quot;Family A&quot;;\n        }\n        // Check if the value is within the range of Family A\n        else if (value &gt;= 1 &amp;&amp; value &lt;= 10) {\n            return &quot;Family A&quot;;\n        }\n        // Check if the value is within the range of Family B\n        else if (value &gt;= 11 &amp;&amp; value &lt;= 20) {\n            return &quot;Family B&quot;;\n        }\n        // Check if the value is within the range of Family C\n        else if (value &gt;= 21 &amp;&amp; value &lt;= 30) {\n            return &quot;Family C&quot;;\n        }\n        // Check if the value is greater than 30\n        else if (value &gt; 30) {\n            return &quot;Family C&quot;;\n        }\n        // Value is outside the range of any family\n        else {\n            return &quot;No Family LOL get rekt&quot;;\n        }\n    }\n}\n\nclass Range {\n    private int start;\n    private int end;\n\n    public Range(int start, int end) {\n        this.start = start;\n        this.end = end;\n    }\n\n    public int getStart() {\n        return start;\n    }\n\n    public int getEnd() {\n        return end;\n    }\n}\n</code></pre>\n<pre><code>//Exec.java\n\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class Exec {\n    /**\n     * Initializes a dictionary with groups and their corresponding value ranges.\n     * Prints the value range for each group and prompts user input.\n     *\n     * @param  args  command line arguments\n     */\n    public static void main(String[] args) {\n\n        // Prompt user input\n        Sorter.getName();\n        Sorter.dict();\n        Sorter.counter();\n    }\n}\n</code></pre>\n"},{"tags":["java","memory"],"comments":[{"owner":{"account_id":366370,"reputation":2002,"user_id":711855,"display_name":"juanmf"},"score":1,"creation_date":1458394097,"post_id":52353,"comment_id":59847408,"body_markdown":"I added my Agent with mvn configs and explained how here: http://stackoverflow.com/a/36102269/711855","body":"I added my Agent with mvn configs and explained how here: <a href=\"http://stackoverflow.com/a/36102269/711855\">stackoverflow.com/a/36102269/711855</a>"}],"answers":[{"tags":[],"owner":{"account_id":2978,"reputation":49999,"user_id":4223,"accept_rate":93,"display_name":"jodonnell"},"down_vote_count":15,"up_vote_count":9,"is_accepted":false,"score":-6,"last_activity_date":1220980295,"creation_date":1220980295,"answer_id":52362,"question_id":52353,"body_markdown":"I doubt you want to do it programmatically unless you just want to do it once and store it for future use.  It&#39;s a costly thing to do.  There&#39;s no sizeof() operator in Java, and even if there was, it would only count the cost of the references to other objects and the size of the primitives.\r\n\r\nOne way you could do it is to serialize the thing to a File and look at the size of the file, like this:\r\n\r\n    Serializable myObject;\r\n    ObjectOutputStream oos = new ObjectOutputStream (new FileOutputStream (&quot;obj.ser&quot;));\r\n    oos.write (myObject);\r\n    oos.close ();\r\n\r\nOf course, this assumes that each object is distinct and doesn&#39;t contain non-transient references to anything else.\r\n\r\nAnother strategy would be to take each object and examine its members by reflection and add up the sizes (boolean &amp; byte = 1 byte, short &amp; char = 2 bytes, etc.), working your way down the membership hierarchy.  But that&#39;s tedious and expensive and ends up doing the same thing the serialization strategy would do.\r\n","title":"How to determine the size of an object in Java","body":"<p>I doubt you want to do it programmatically unless you just want to do it once and store it for future use.  It's a costly thing to do.  There's no sizeof() operator in Java, and even if there was, it would only count the cost of the references to other objects and the size of the primitives.</p>\n\n<p>One way you could do it is to serialize the thing to a File and look at the size of the file, like this:</p>\n\n<pre><code>Serializable myObject;\nObjectOutputStream oos = new ObjectOutputStream (new FileOutputStream (\"obj.ser\"));\noos.write (myObject);\noos.close ();\n</code></pre>\n\n<p>Of course, this assumes that each object is distinct and doesn't contain non-transient references to anything else.</p>\n\n<p>Another strategy would be to take each object and examine its members by reflection and add up the sizes (boolean &amp; byte = 1 byte, short &amp; char = 2 bytes, etc.), working your way down the membership hierarchy.  But that's tedious and expensive and ends up doing the same thing the serialization strategy would do.</p>\n"},{"tags":[],"owner":{"account_id":3393,"reputation":60796,"user_id":4893,"accept_rate":64,"display_name":"sblundy"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1220980540,"creation_date":1220980540,"answer_id":52377,"question_id":52353,"body_markdown":"There isn&#39;t a method call, if that&#39;s what you&#39;re asking for. With a little research, I suppose you could write your own. A particular instance has a fixed sized derived from the number of references and primitive values plus instance bookkeeping data. You would simply walk the object graph. The less varied the row types, the easier.\r\n\r\nIf that&#39;s too slow or just more trouble than it&#39;s worth, there&#39;s always good old-fashioned  row counting rule-of-thumbs.","title":"How to determine the size of an object in Java","body":"<p>There isn't a method call, if that's what you're asking for. With a little research, I suppose you could write your own. A particular instance has a fixed sized derived from the number of references and primitive values plus instance bookkeeping data. You would simply walk the object graph. The less varied the row types, the easier.</p>\n\n<p>If that's too slow or just more trouble than it's worth, there's always good old-fashioned  row counting rule-of-thumbs.</p>\n"},{"tags":[],"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"down_vote_count":13,"up_vote_count":52,"is_accepted":false,"score":39,"last_activity_date":1405526927,"creation_date":1220980768,"answer_id":52391,"question_id":52353,"body_markdown":"If you would just like to know how much memory is being used in your JVM, and how much is free, you could try something like this:\r\n\r\n    // Get current size of heap in bytes\r\n    long heapSize = Runtime.getRuntime().totalMemory();\r\n    \r\n    // Get maximum size of heap in bytes. The heap cannot grow beyond this size.\r\n    // Any attempt will result in an OutOfMemoryException.\r\n    long heapMaxSize = Runtime.getRuntime().maxMemory();\r\n    \r\n    // Get amount of free memory within the heap in bytes. This size will increase\r\n    // after garbage collection and decrease as new objects are created.\r\n    long heapFreeSize = Runtime.getRuntime().freeMemory();\r\n\r\n\r\nedit: I thought this might be helpful as the question author also stated he would like to have logic that handles &quot;read as many rows as possible until I&#39;ve used 32MB of memory.&quot;","title":"How to determine the size of an object in Java","body":"<p>If you would just like to know how much memory is being used in your JVM, and how much is free, you could try something like this:</p>\n\n<pre><code>// Get current size of heap in bytes\nlong heapSize = Runtime.getRuntime().totalMemory();\n\n// Get maximum size of heap in bytes. The heap cannot grow beyond this size.\n// Any attempt will result in an OutOfMemoryException.\nlong heapMaxSize = Runtime.getRuntime().maxMemory();\n\n// Get amount of free memory within the heap in bytes. This size will increase\n// after garbage collection and decrease as new objects are created.\nlong heapFreeSize = Runtime.getRuntime().freeMemory();\n</code></pre>\n\n<p>edit: I thought this might be helpful as the question author also stated he would like to have logic that handles \"read as many rows as possible until I've used 32MB of memory.\"</p>\n"},{"tags":[],"owner":{"account_id":3416,"reputation":81767,"user_id":4926,"accept_rate":85,"display_name":"Jason Cohen"},"down_vote_count":2,"up_vote_count":14,"is_accepted":false,"score":12,"last_activity_date":1220980788,"creation_date":1220980788,"answer_id":52393,"question_id":52353,"body_markdown":"You have to walk the objects using reflection.  Be careful as you do:\r\n\r\n  - Just allocating an object has some overhead in the JVM.  The amount varies by JVM so you might make this value a parameter.  At least make it a constant (8 bytes?) and apply to anything allocated.\r\n  - Just because `byte` is theoretically 1 byte doesn&#39;t mean it takes just one in memory.\r\n  - There will be loops in object references, so you&#39;ll need to keep a `HashMap` or somesuch *using object-equals as the comparator* to eliminate infinite loops.\r\n\r\n@jodonnell: I like the simplicity of your solution, but many objects aren&#39;t Serializable (so this would throw an exception), fields can be transient, and objects can override the standard methods.\r\n\r\n","title":"How to determine the size of an object in Java","body":"<p>You have to walk the objects using reflection.  Be careful as you do:</p>\n\n<ul>\n<li>Just allocating an object has some overhead in the JVM.  The amount varies by JVM so you might make this value a parameter.  At least make it a constant (8 bytes?) and apply to anything allocated.</li>\n<li>Just because <code>byte</code> is theoretically 1 byte doesn't mean it takes just one in memory.</li>\n<li>There will be loops in object references, so you'll need to keep a <code>HashMap</code> or somesuch <em>using object-equals as the comparator</em> to eliminate infinite loops.</li>\n</ul>\n\n<p>@jodonnell: I like the simplicity of your solution, but many objects aren't Serializable (so this would throw an exception), fields can be transient, and objects can override the standard methods.</p>\n"},{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":2,"up_vote_count":14,"is_accepted":false,"score":12,"last_activity_date":1356494656,"creation_date":1220980840,"answer_id":52395,"question_id":52353,"body_markdown":"You have to measure it with a tool, or estimate it by hand, and it depends on the JVM you are using.\r\n\r\nThere is some fixed overhead per object. It&#39;s JVM-specific, but I usually estimate 40 bytes. Then you have to look at the members of the class. Object references are 4 (8) bytes in a 32-bit (64-bit) JVM. Primitive types are: \r\n\r\n  - boolean and byte: 1 byte\r\n  - char and short: 2 bytes\r\n  - int and float: 4 bytes\r\n  - long and double: 8 bytes\r\n\r\nArrays follow the same rules; that is, it&#39;s an object reference so that takes 4 (or 8) bytes in your object, and then its length multiplied by the size of its element.\r\n\r\nTrying to do it programmatically with calls to `Runtime.freeMemory()` just doesn&#39;t give you much accuracy, because of asynchronous calls to the garbage collector, etc. Profiling the heap with -Xrunhprof or other tools will give you the most accurate results.","title":"How to determine the size of an object in Java","body":"<p>You have to measure it with a tool, or estimate it by hand, and it depends on the JVM you are using.</p>\n\n<p>There is some fixed overhead per object. It's JVM-specific, but I usually estimate 40 bytes. Then you have to look at the members of the class. Object references are 4 (8) bytes in a 32-bit (64-bit) JVM. Primitive types are: </p>\n\n<ul>\n<li>boolean and byte: 1 byte</li>\n<li>char and short: 2 bytes</li>\n<li>int and float: 4 bytes</li>\n<li>long and double: 8 bytes</li>\n</ul>\n\n<p>Arrays follow the same rules; that is, it's an object reference so that takes 4 (or 8) bytes in your object, and then its length multiplied by the size of its element.</p>\n\n<p>Trying to do it programmatically with calls to <code>Runtime.freeMemory()</code> just doesn't give you much accuracy, because of asynchronous calls to the garbage collector, etc. Profiling the heap with -Xrunhprof or other tools will give you the most accurate results.</p>\n"},{"tags":[],"owner":{"account_id":3684,"reputation":43315,"user_id":5346,"accept_rate":84,"display_name":"Nick Fortescue"},"down_vote_count":11,"up_vote_count":85,"is_accepted":false,"score":74,"last_activity_date":1517673179,"creation_date":1220980957,"answer_id":52401,"question_id":52353,"body_markdown":"Firstly &quot;the size of an object&quot; isn&#39;t a well-defined concept in Java. You could mean the object itself, with just its members, the Object and all objects it refers to (the reference graph). You could mean the size in memory or the size on disk. And the JVM is allowed to optimise things like Strings.\r\n\r\nSo the only correct way is to ask the JVM, with a good profiler (I use [YourKit][1]), which probably isn&#39;t what you want.\r\n\r\nHowever, from the description above it sounds like each row will be self-contained, and not have a big dependency tree, so the serialization method will probably be a good approximation on most JVMs. The easiest way to do this is as follows:\r\n\r\n     Serializable ser;\r\n     ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n     ObjectOutputStream oos = new ObjectOutputStream(baos);\r\n     oos.writeObject(ser);\r\n     oos.close();\r\n     return baos.size();\r\n\r\nRemember that if you have objects with common references this *will not* give the correct result, and size of serialization will not always match size in memory, but it is a good approximation. The code will be a bit more efficient if you initialise the ByteArrayOutputStream size to a sensible value.\r\n\r\n  [1]: http://www.yourkit.com","title":"How to determine the size of an object in Java","body":"<p>Firstly \"the size of an object\" isn't a well-defined concept in Java. You could mean the object itself, with just its members, the Object and all objects it refers to (the reference graph). You could mean the size in memory or the size on disk. And the JVM is allowed to optimise things like Strings.</p>\n\n<p>So the only correct way is to ask the JVM, with a good profiler (I use <a href=\"http://www.yourkit.com\" rel=\"noreferrer\">YourKit</a>), which probably isn't what you want.</p>\n\n<p>However, from the description above it sounds like each row will be self-contained, and not have a big dependency tree, so the serialization method will probably be a good approximation on most JVMs. The easiest way to do this is as follows:</p>\n\n<pre><code> Serializable ser;\n ByteArrayOutputStream baos = new ByteArrayOutputStream();\n ObjectOutputStream oos = new ObjectOutputStream(baos);\n oos.writeObject(ser);\n oos.close();\n return baos.size();\n</code></pre>\n\n<p>Remember that if you have objects with common references this <em>will not</em> give the correct result, and size of serialization will not always match size in memory, but it is a good approximation. The code will be a bit more efficient if you initialise the ByteArrayOutputStream size to a sensible value.</p>\n"},{"tags":[],"owner":{"account_id":1497,"reputation":10898,"user_id":1996,"accept_rate":78,"display_name":"Boris Terzic"},"down_vote_count":0,"up_vote_count":81,"is_accepted":false,"score":81,"last_activity_date":1594534148,"creation_date":1220985774,"answer_id":52568,"question_id":52353,"body_markdown":"Some years back Javaworld had [an article on determining the size of composite and potentially nested Java objects][1], they basically walk through creating a sizeof() implementation in Java. The approach basically builds on other work where people experimentally identified the size of primitives and typical Java objects and then apply that knowledge to a method that recursively walks an object graph to tally the total size.\r\n\r\nIt is always going to be somewhat less accurate than a native C implementation simply because of the things going on behind the scenes of a class but it should be a good indicator.\r\n\r\nAlternatively a SourceForge project appropriately called [sizeof][2] that offers a Java5 library with a sizeof() implementation.\r\n\r\nP.S. Do not use the serialization approach, there is no correlation between the size of a serialized object and the amount of memory it consumes when live.\r\n\r\n\r\n  [1]: https://www.infoworld.com/article/2077408/sizeof-for-java.html\r\n  [2]: http://sourceforge.net/projects/sizeof","title":"How to determine the size of an object in Java","body":"<p>Some years back Javaworld had <a href=\"https://www.infoworld.com/article/2077408/sizeof-for-java.html\" rel=\"noreferrer\">an article on determining the size of composite and potentially nested Java objects</a>, they basically walk through creating a sizeof() implementation in Java. The approach basically builds on other work where people experimentally identified the size of primitives and typical Java objects and then apply that knowledge to a method that recursively walks an object graph to tally the total size.</p>\n<p>It is always going to be somewhat less accurate than a native C implementation simply because of the things going on behind the scenes of a class but it should be a good indicator.</p>\n<p>Alternatively a SourceForge project appropriately called <a href=\"http://sourceforge.net/projects/sizeof\" rel=\"noreferrer\">sizeof</a> that offers a Java5 library with a sizeof() implementation.</p>\n<p>P.S. Do not use the serialization approach, there is no correlation between the size of a serialized object and the amount of memory it consumes when live.</p>\n"},{"tags":[],"owner":{"account_id":3744,"reputation":4970,"user_id":5438,"display_name":"Stefan Karlsson"},"down_vote_count":8,"up_vote_count":497,"is_accepted":true,"score":489,"last_activity_date":1623166860,"creation_date":1220988277,"answer_id":52682,"question_id":52353,"body_markdown":"You can use the [`java.lang.instrument` package][1].\r\n\r\nCompile and put this class in a JAR:\r\n\r\n    import java.lang.instrument.Instrumentation;\r\n    \r\n    public class ObjectSizeFetcher {\r\n        private static Instrumentation instrumentation;\r\n    \r\n        public static void premain(String args, Instrumentation inst) {\r\n            instrumentation = inst;\r\n        }\r\n    \r\n        public static long getObjectSize(Object o) {\r\n            return instrumentation.getObjectSize(o);\r\n        }\r\n    }\r\n\r\n\r\nAdd the following to your `MANIFEST.MF`:\r\n\r\n    Premain-Class: ObjectSizeFetcher\r\n\r\nUse the `getObjectSize()` method:\r\n\r\n    public class C {\r\n        private int x;\r\n        private int y;\r\n    \r\n        public static void main(String [] args) {\r\n            System.out.println(ObjectSizeFetcher.getObjectSize(new C()));\r\n        }\r\n    }\r\n\r\nInvoke with:\r\n\r\n    java -javaagent:ObjectSizeFetcherAgent.jar C\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/lang/instrument/Instrumentation.html","title":"How to determine the size of an object in Java","body":"<p>You can use the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/instrument/Instrumentation.html\" rel=\"noreferrer\"><code>java.lang.instrument</code> package</a>.</p>\n<p>Compile and put this class in a JAR:</p>\n<pre><code>import java.lang.instrument.Instrumentation;\n\npublic class ObjectSizeFetcher {\n    private static Instrumentation instrumentation;\n\n    public static void premain(String args, Instrumentation inst) {\n        instrumentation = inst;\n    }\n\n    public static long getObjectSize(Object o) {\n        return instrumentation.getObjectSize(o);\n    }\n}\n</code></pre>\n<p>Add the following to your <code>MANIFEST.MF</code>:</p>\n<pre><code>Premain-Class: ObjectSizeFetcher\n</code></pre>\n<p>Use the <code>getObjectSize()</code> method:</p>\n<pre><code>public class C {\n    private int x;\n    private int y;\n\n    public static void main(String [] args) {\n        System.out.println(ObjectSizeFetcher.getObjectSize(new C()));\n    }\n}\n</code></pre>\n<p>Invoke with:</p>\n<pre><code>java -javaagent:ObjectSizeFetcherAgent.jar C\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1161310,"reputation":8921,"user_id":1140754,"accept_rate":70,"display_name":"Miguel Gamboa"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1337013433,"creation_date":1337013433,"answer_id":10587479,"question_id":52353,"body_markdown":"The `java.lang.instrument.Instrumentation` class provides a nice way to get the size of a Java Object, but it requires you to define a `premain` and run your program with a java agent. This is very boring when you do not need any agent and then you have to provide a dummy Jar agent to your application.\r\n\r\nSo I got an alternative solution using the `Unsafe` class from the `sun.misc`. So, considering the objects heap alignment according to the processor architecture and calculating the maximum field offset, you can measure the size of a Java Object. In the example below I use an auxiliary class `UtilUnsafe` to get a reference to the `sun.misc.Unsafe` object.\r\n\r\n    private static final int NR_BITS = Integer.valueOf(System.getProperty(&quot;sun.arch.data.model&quot;));\r\n    private static final int BYTE = 8;\r\n    private static final int WORD = NR_BITS/BYTE;\r\n    private static final int MIN_SIZE = 16; \r\n\t\r\n    public static int sizeOf(Class src){\r\n        //\r\n        // Get the instance fields of src class\r\n        // \r\n        List&lt;Field&gt; instanceFields = new LinkedList&lt;Field&gt;();\r\n        do{\r\n            if(src == Object.class) return MIN_SIZE;\r\n            for (Field f : src.getDeclaredFields()) {\r\n                if((f.getModifiers() &amp; Modifier.STATIC) == 0){\r\n                    instanceFields.add(f);\r\n                }\r\n            }\r\n            src = src.getSuperclass();\r\n        }while(instanceFields.isEmpty());\r\n        //\r\n        // Get the field with the maximum offset\r\n        // \t\r\n        long maxOffset = 0;\r\n        for (Field f : instanceFields) {\r\n            long offset = UtilUnsafe.UNSAFE.objectFieldOffset(f);\r\n            if(offset &gt; maxOffset) maxOffset = offset; \r\n        }\r\n        return  (((int)maxOffset/WORD) + 1)*WORD; \r\n    }\r\n    class UtilUnsafe {\r\n        public static final sun.misc.Unsafe UNSAFE;\r\n\r\n        static {\r\n            Object theUnsafe = null;\r\n            Exception exception = null;\r\n            try {\r\n                Class&lt;?&gt; uc = Class.forName(&quot;sun.misc.Unsafe&quot;);\r\n                Field f = uc.getDeclaredField(&quot;theUnsafe&quot;);\r\n                f.setAccessible(true);\r\n                theUnsafe = f.get(uc);\r\n            } catch (Exception e) { exception = e; }\r\n            UNSAFE = (sun.misc.Unsafe) theUnsafe;\r\n            if (UNSAFE == null) throw new Error(&quot;Could not obtain access to sun.misc.Unsafe&quot;, exception);\r\n        }\r\n        private UtilUnsafe() { }\r\n    }\r\n","title":"How to determine the size of an object in Java","body":"<p>The <code>java.lang.instrument.Instrumentation</code> class provides a nice way to get the size of a Java Object, but it requires you to define a <code>premain</code> and run your program with a java agent. This is very boring when you do not need any agent and then you have to provide a dummy Jar agent to your application.</p>\n\n<p>So I got an alternative solution using the <code>Unsafe</code> class from the <code>sun.misc</code>. So, considering the objects heap alignment according to the processor architecture and calculating the maximum field offset, you can measure the size of a Java Object. In the example below I use an auxiliary class <code>UtilUnsafe</code> to get a reference to the <code>sun.misc.Unsafe</code> object.</p>\n\n<pre><code>private static final int NR_BITS = Integer.valueOf(System.getProperty(\"sun.arch.data.model\"));\nprivate static final int BYTE = 8;\nprivate static final int WORD = NR_BITS/BYTE;\nprivate static final int MIN_SIZE = 16; \n\npublic static int sizeOf(Class src){\n    //\n    // Get the instance fields of src class\n    // \n    List&lt;Field&gt; instanceFields = new LinkedList&lt;Field&gt;();\n    do{\n        if(src == Object.class) return MIN_SIZE;\n        for (Field f : src.getDeclaredFields()) {\n            if((f.getModifiers() &amp; Modifier.STATIC) == 0){\n                instanceFields.add(f);\n            }\n        }\n        src = src.getSuperclass();\n    }while(instanceFields.isEmpty());\n    //\n    // Get the field with the maximum offset\n    //  \n    long maxOffset = 0;\n    for (Field f : instanceFields) {\n        long offset = UtilUnsafe.UNSAFE.objectFieldOffset(f);\n        if(offset &gt; maxOffset) maxOffset = offset; \n    }\n    return  (((int)maxOffset/WORD) + 1)*WORD; \n}\nclass UtilUnsafe {\n    public static final sun.misc.Unsafe UNSAFE;\n\n    static {\n        Object theUnsafe = null;\n        Exception exception = null;\n        try {\n            Class&lt;?&gt; uc = Class.forName(\"sun.misc.Unsafe\");\n            Field f = uc.getDeclaredField(\"theUnsafe\");\n            f.setAccessible(true);\n            theUnsafe = f.get(uc);\n        } catch (Exception e) { exception = e; }\n        UNSAFE = (sun.misc.Unsafe) theUnsafe;\n        if (UNSAFE == null) throw new Error(\"Could not obtain access to sun.misc.Unsafe\", exception);\n    }\n    private UtilUnsafe() { }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":53886,"reputation":321,"user_id":161142,"display_name":"JZeeb"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1365088087,"creation_date":1365088087,"answer_id":15815016,"question_id":52353,"body_markdown":"You could generate a heap dump (with jmap, for example) and then analyze the output to find object sizes.  This is an offline solution, but you can examine shallow and deep sizes, etc.","title":"How to determine the size of an object in Java","body":"<p>You could generate a heap dump (with jmap, for example) and then analyze the output to find object sizes.  This is an offline solution, but you can examine shallow and deep sizes, etc.</p>\n"},{"tags":[],"owner":{"account_id":378959,"reputation":19465,"user_id":834316,"accept_rate":82,"display_name":"PNS"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1450310299,"creation_date":1378412029,"answer_id":18645101,"question_id":52353,"body_markdown":"There is also the **Memory Measurer** tool (formerly at [Google Code][1], now on [GitHub][2]), which is simple and published under the commercial-friendly **Apache 2.0 license**, as discussed in a [similar question][3].\r\n\r\nIt, too, requires a command-line argument to the java interpreter if you want to measure memory byte consumption, but otherwise seems to work just fine, at least in the scenarios I have used it.\r\n\r\n\r\n  [1]: http://code.google.com/p/memory-measurer/\r\n  [2]: https://github.com/DimitrisAndreou/memory-measurer\r\n  [3]: https://stackoverflow.com/questions/9368764/calculate-size-of-object-in-java","title":"How to determine the size of an object in Java","body":"<p>There is also the <strong>Memory Measurer</strong> tool (formerly at <a href=\"http://code.google.com/p/memory-measurer/\" rel=\"nofollow noreferrer\">Google Code</a>, now on <a href=\"https://github.com/DimitrisAndreou/memory-measurer\" rel=\"nofollow noreferrer\">GitHub</a>), which is simple and published under the commercial-friendly <strong>Apache 2.0 license</strong>, as discussed in a <a href=\"https://stackoverflow.com/questions/9368764/calculate-size-of-object-in-java\">similar question</a>.</p>\n\n<p>It, too, requires a command-line argument to the java interpreter if you want to measure memory byte consumption, but otherwise seems to work just fine, at least in the scenarios I have used it.</p>\n"},{"tags":[],"owner":{"account_id":305991,"reputation":39137,"user_id":616460,"accept_rate":93,"display_name":"Jason C"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1384572864,"creation_date":1384572864,"answer_id":20014332,"question_id":52353,"body_markdown":"I wrote a quick test once to estimate on the fly:\r\n\r\n    public class Test1 {\r\n    \r\n        // non-static nested\r\n        class Nested { }\r\n        \r\n        // static nested\r\n        static class StaticNested { }\r\n        \r\n        static long getFreeMemory () {\r\n            // waits for free memory measurement to stabilize\r\n            long init = Runtime.getRuntime().freeMemory(), init2;\r\n            int count = 0;\r\n            do {\r\n                System.out.println(&quot;waiting...&quot; + init);\r\n                System.gc();\r\n                try { Thread.sleep(250); } catch (Exception x) { }\r\n                init2 = init;\r\n                init = Runtime.getRuntime().freeMemory();\r\n                if (init == init2) ++ count; else count = 0;\r\n            } while (count &lt; 5);\r\n            System.out.println(&quot;ok...&quot; + init);\r\n            return init;\r\n        }\r\n        \r\n        Test1 () throws InterruptedException {\r\n    \r\n            Object[] s = new Object[10000];\r\n            Object[] n = new Object[10000];\r\n            Object[] t = new Object[10000];\r\n    \r\n            long init = getFreeMemory();\r\n            \r\n            //for (int j = 0; j &lt; 10000; ++ j)\r\n            //    s[j] = new Separate();\r\n            \r\n            long afters = getFreeMemory();\r\n    \r\n            for (int j = 0; j &lt; 10000; ++ j)\r\n                n[j] = new Nested();\r\n    \r\n            long aftersn = getFreeMemory();\r\n            \r\n            for (int j = 0; j &lt; 10000; ++ j)\r\n                t[j] = new StaticNested();\r\n    \r\n            long aftersnt = getFreeMemory();\r\n    \r\n            System.out.println(&quot;separate:      &quot; + -(afters - init) + &quot; each=&quot; + -(afters - init) / 10000);\r\n            System.out.println(&quot;nested:        &quot; + -(aftersn - afters) + &quot; each=&quot; + -(aftersn - afters) / 10000);\r\n            System.out.println(&quot;static nested: &quot; + -(aftersnt - aftersn) + &quot; each=&quot; + -(aftersnt - aftersn) / 10000);\r\n            \r\n        }\r\n        \r\n        public static void main (String[] args) throws InterruptedException {\r\n            new Test1();\r\n        }\r\n    \r\n    }\r\n\r\nGeneral concept is allocate objects and measure change in free heap space. The key being `getFreeMemory()`, which **requests GC runs and waits for the reported free heap size to stabilize**. The output of the above is:\r\n\r\n    nested:        160000 each=16\r\n    static nested: 160000 each=16\r\n\r\nWhich is what we expect, given alignment behavior and possible heap block header overhead.\r\n\r\nThe instrumentation method detailed in the accepted answer here the most accurate. The method I described is accurate but only under controlled conditions where no other threads are creating/discarding objects.","title":"How to determine the size of an object in Java","body":"<p>I wrote a quick test once to estimate on the fly:</p>\n\n<pre><code>public class Test1 {\n\n    // non-static nested\n    class Nested { }\n\n    // static nested\n    static class StaticNested { }\n\n    static long getFreeMemory () {\n        // waits for free memory measurement to stabilize\n        long init = Runtime.getRuntime().freeMemory(), init2;\n        int count = 0;\n        do {\n            System.out.println(\"waiting...\" + init);\n            System.gc();\n            try { Thread.sleep(250); } catch (Exception x) { }\n            init2 = init;\n            init = Runtime.getRuntime().freeMemory();\n            if (init == init2) ++ count; else count = 0;\n        } while (count &lt; 5);\n        System.out.println(\"ok...\" + init);\n        return init;\n    }\n\n    Test1 () throws InterruptedException {\n\n        Object[] s = new Object[10000];\n        Object[] n = new Object[10000];\n        Object[] t = new Object[10000];\n\n        long init = getFreeMemory();\n\n        //for (int j = 0; j &lt; 10000; ++ j)\n        //    s[j] = new Separate();\n\n        long afters = getFreeMemory();\n\n        for (int j = 0; j &lt; 10000; ++ j)\n            n[j] = new Nested();\n\n        long aftersn = getFreeMemory();\n\n        for (int j = 0; j &lt; 10000; ++ j)\n            t[j] = new StaticNested();\n\n        long aftersnt = getFreeMemory();\n\n        System.out.println(\"separate:      \" + -(afters - init) + \" each=\" + -(afters - init) / 10000);\n        System.out.println(\"nested:        \" + -(aftersn - afters) + \" each=\" + -(aftersn - afters) / 10000);\n        System.out.println(\"static nested: \" + -(aftersnt - aftersn) + \" each=\" + -(aftersnt - aftersn) / 10000);\n\n    }\n\n    public static void main (String[] args) throws InterruptedException {\n        new Test1();\n    }\n\n}\n</code></pre>\n\n<p>General concept is allocate objects and measure change in free heap space. The key being <code>getFreeMemory()</code>, which <strong>requests GC runs and waits for the reported free heap size to stabilize</strong>. The output of the above is:</p>\n\n<pre><code>nested:        160000 each=16\nstatic nested: 160000 each=16\n</code></pre>\n\n<p>Which is what we expect, given alignment behavior and possible heap block header overhead.</p>\n\n<p>The instrumentation method detailed in the accepted answer here the most accurate. The method I described is accurate but only under controlled conditions where no other threads are creating/discarding objects.</p>\n"},{"tags":[],"owner":{"account_id":443771,"reputation":335,"user_id":835199,"accept_rate":0,"display_name":"user835199"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1399447423,"creation_date":1399447423,"answer_id":23511330,"question_id":52353,"body_markdown":"    long heapSizeBefore = Runtime.getRuntime().totalMemory();\r\n\r\n    // Code for object construction\r\n    ...\r\n    long heapSizeAfter = Runtime.getRuntime().totalMemory();\r\n    long size = heapSizeAfter - heapSizeBefore;\r\n\r\nsize gives you the increase in memory usage of the jvm due to object creation and that typically is the size of the object.\r\n","title":"How to determine the size of an object in Java","body":"<pre><code>long heapSizeBefore = Runtime.getRuntime().totalMemory();\n\n// Code for object construction\n...\nlong heapSizeAfter = Runtime.getRuntime().totalMemory();\nlong size = heapSizeAfter - heapSizeBefore;\n</code></pre>\n\n<p>size gives you the increase in memory usage of the jvm due to object creation and that typically is the size of the object.</p>\n"},{"tags":[],"owner":{"account_id":4663661,"reputation":301,"user_id":3777283,"display_name":"dlaudams"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1403762555,"creation_date":1403761007,"answer_id":24423089,"question_id":52353,"body_markdown":"Here is a utility I made using some of the linked examples to handle 32-bit, 64-bit and 64-bit with compressed OOP. It uses `sun.misc.Unsafe`.\r\n\r\nIt uses `Unsafe.addressSize()` to get the size of a native pointer and `Unsafe.arrayIndexScale( Object[].class )` for the size of a Java reference.\r\n\r\nIt uses the field offset of a known class to work out the base size of an object.\r\n\r\n\r\n\r\n    \r\n    import java.lang.reflect.Array;\r\n    import java.lang.reflect.Field;\r\n    import java.lang.reflect.Modifier;\r\n    import java.util.IdentityHashMap;\r\n    import java.util.Stack;\r\n    import sun.misc.Unsafe;\r\n    \r\n    /** Usage: \r\n     * MemoryUtil.sizeOf( object )\r\n     * MemoryUtil.deepSizeOf( object )\r\n     * MemoryUtil.ADDRESS_MODE\r\n     */\r\n    public class MemoryUtil\r\n    {\r\n        private MemoryUtil()\r\n        {\r\n        }\r\n            \r\n        public static enum AddressMode\r\n        {\r\n            /** Unknown address mode. Size calculations may be unreliable. */\r\n            UNKNOWN,\r\n            /** 32-bit address mode using 32-bit references. */\r\n            MEM_32BIT,\r\n            /** 64-bit address mode using 64-bit references. */\r\n            MEM_64BIT,\r\n            /** 64-bit address mode using 32-bit compressed references. */\r\n            MEM_64BIT_COMPRESSED_OOPS\r\n        }\r\n        \r\n        /** The detected runtime address mode. */\r\n        public static final AddressMode ADDRESS_MODE;\r\n        \r\n        private static final Unsafe UNSAFE;\r\n        \r\n        private static final long ADDRESS_SIZE; // The size in bytes of a native pointer: 4 for 32 bit, 8 for 64 bit\r\n        private static final long REFERENCE_SIZE; // The size of a Java reference: 4 for 32 bit, 4 for 64 bit compressed oops, 8 for 64 bit\r\n        private static final long OBJECT_BASE_SIZE; // The minimum size of an Object: 8 for 32 bit, 12 for 64 bit compressed oops, 16 for 64 bit\r\n        private static final long OBJECT_ALIGNMENT = 8;\r\n        \r\n        /** Use the offset of a known field to determine the minimum size of an object. */\r\n        private static final Object HELPER_OBJECT = new Object() { byte b; };\r\n        \r\n        \r\n        static\r\n        {\r\n            try\r\n            {\r\n                // Use reflection to get a reference to the &#39;Unsafe&#39; object.\r\n                Field f = Unsafe.class.getDeclaredField( &quot;theUnsafe&quot; );\r\n                f.setAccessible( true );\r\n                UNSAFE = (Unsafe) f.get( null );\r\n    \r\n                OBJECT_BASE_SIZE = UNSAFE.objectFieldOffset( HELPER_OBJECT.getClass().getDeclaredField( &quot;b&quot; ) );\r\n\r\n                ADDRESS_SIZE = UNSAFE.addressSize();\r\n                REFERENCE_SIZE = UNSAFE.arrayIndexScale( Object[].class );\r\n                \r\n                if( ADDRESS_SIZE == 4 )\r\n                {\r\n                    ADDRESS_MODE = AddressMode.MEM_32BIT;\r\n                }\r\n                else if( ADDRESS_SIZE == 8 &amp;&amp; REFERENCE_SIZE == 8 )\r\n                {\r\n                    ADDRESS_MODE = AddressMode.MEM_64BIT;\r\n                }\r\n                else if( ADDRESS_SIZE == 8 &amp;&amp; REFERENCE_SIZE == 4 )\r\n                {\r\n                    ADDRESS_MODE = AddressMode.MEM_64BIT_COMPRESSED_OOPS;\r\n                }\r\n                else\r\n                {\r\n                    ADDRESS_MODE = AddressMode.UNKNOWN;\r\n                }\r\n            }\r\n            catch( Exception e )\r\n            {\r\n                throw new Error( e );\r\n            }\r\n        }\r\n        \r\n    \r\n        /** Return the size of the object excluding any referenced objects. */\r\n        public static long shallowSizeOf( final Object object )\r\n        {\r\n            Class&lt;?&gt; objectClass = object.getClass();\r\n            if( objectClass.isArray() )\r\n            {\r\n                // Array size is base offset + length * element size\r\n                long size = UNSAFE.arrayBaseOffset( objectClass )\r\n                        + UNSAFE.arrayIndexScale( objectClass ) * Array.getLength( object );\r\n                return padSize( size );\r\n            }\r\n            else\r\n            {\r\n                // Object size is the largest field offset padded out to 8 bytes\r\n                long size = OBJECT_BASE_SIZE;\r\n                do\r\n                {\r\n                    for( Field field : objectClass.getDeclaredFields() )\r\n                    {\r\n                        if( (field.getModifiers() &amp; Modifier.STATIC) == 0 )\r\n                        {\r\n                            long offset = UNSAFE.objectFieldOffset( field );\r\n                            if( offset &gt;= size )\r\n                            {\r\n                                size = offset + 1; // Field size is between 1 and PAD_SIZE bytes. Padding will round up to padding size.\r\n                            }\r\n                        }\r\n                    }\r\n                    objectClass = objectClass.getSuperclass();\r\n                }\r\n                while( objectClass != null );\r\n                \r\n                return padSize( size );\r\n            }\r\n        }\r\n        \r\n        \r\n        private static final long padSize( final long size )\r\n        {\r\n            return (size + (OBJECT_ALIGNMENT - 1)) &amp; ~(OBJECT_ALIGNMENT - 1);\r\n        }\r\n    \r\n        \r\n        /** Return the size of the object including any referenced objects. */\r\n        public static long deepSizeOf( final Object object )\r\n        {\r\n            IdentityHashMap&lt;Object,Object&gt; visited = new IdentityHashMap&lt;Object,Object&gt;();\r\n            Stack&lt;Object&gt; stack = new Stack&lt;Object&gt;();\r\n            if( object != null ) stack.push( object );\r\n            \r\n            long size = 0;\r\n            while( !stack.isEmpty() )\r\n            {\r\n                size += internalSizeOf( stack.pop(), stack, visited );\r\n            }\r\n            return size;\r\n        }\r\n        \r\n        \r\n        private static long internalSizeOf( final Object object, final Stack&lt;Object&gt; stack, final IdentityHashMap&lt;Object,Object&gt; visited )\r\n        {\r\n            // Scan for object references and add to stack\r\n            Class&lt;?&gt; c = object.getClass();\r\n            if( c.isArray() &amp;&amp; !c.getComponentType().isPrimitive() )\r\n            {\r\n                // Add unseen array elements to stack\r\n                for( int i = Array.getLength( object ) - 1; i &gt;= 0; i-- )\r\n                {\r\n                    Object val = Array.get( object, i );\r\n                    if( val != null &amp;&amp; visited.put( val, val ) == null )\r\n                    {\r\n                        stack.add( val );\r\n                    }\r\n                }\r\n            }\r\n            else\r\n            {\r\n                // Add unseen object references to the stack\r\n                for( ; c != null; c = c.getSuperclass() )\r\n                {\r\n                    for( Field field : c.getDeclaredFields() )\r\n                    {\r\n                        if( (field.getModifiers() &amp; Modifier.STATIC) == 0 \r\n                                &amp;&amp; !field.getType().isPrimitive() )\r\n                        {\r\n                            field.setAccessible( true );\r\n                            try\r\n                            {\r\n                                Object val = field.get( object );\r\n                                if( val != null &amp;&amp; visited.put( val, val ) == null )\r\n                                {\r\n                                    stack.add( val );\r\n                                }\r\n                            }\r\n                            catch( IllegalArgumentException e )\r\n                            {\r\n                                throw new RuntimeException( e );\r\n                            }\r\n                            catch( IllegalAccessException e )\r\n                            {\r\n                                throw new RuntimeException( e );\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            \r\n            return shallowSizeOf( object );\r\n        }\r\n    }\r\n\r\n","title":"How to determine the size of an object in Java","body":"<p>Here is a utility I made using some of the linked examples to handle 32-bit, 64-bit and 64-bit with compressed OOP. It uses <code>sun.misc.Unsafe</code>.</p>\n\n<p>It uses <code>Unsafe.addressSize()</code> to get the size of a native pointer and <code>Unsafe.arrayIndexScale( Object[].class )</code> for the size of a Java reference.</p>\n\n<p>It uses the field offset of a known class to work out the base size of an object.</p>\n\n<pre><code>import java.lang.reflect.Array;\nimport java.lang.reflect.Field;\nimport java.lang.reflect.Modifier;\nimport java.util.IdentityHashMap;\nimport java.util.Stack;\nimport sun.misc.Unsafe;\n\n/** Usage: \n * MemoryUtil.sizeOf( object )\n * MemoryUtil.deepSizeOf( object )\n * MemoryUtil.ADDRESS_MODE\n */\npublic class MemoryUtil\n{\n    private MemoryUtil()\n    {\n    }\n\n    public static enum AddressMode\n    {\n        /** Unknown address mode. Size calculations may be unreliable. */\n        UNKNOWN,\n        /** 32-bit address mode using 32-bit references. */\n        MEM_32BIT,\n        /** 64-bit address mode using 64-bit references. */\n        MEM_64BIT,\n        /** 64-bit address mode using 32-bit compressed references. */\n        MEM_64BIT_COMPRESSED_OOPS\n    }\n\n    /** The detected runtime address mode. */\n    public static final AddressMode ADDRESS_MODE;\n\n    private static final Unsafe UNSAFE;\n\n    private static final long ADDRESS_SIZE; // The size in bytes of a native pointer: 4 for 32 bit, 8 for 64 bit\n    private static final long REFERENCE_SIZE; // The size of a Java reference: 4 for 32 bit, 4 for 64 bit compressed oops, 8 for 64 bit\n    private static final long OBJECT_BASE_SIZE; // The minimum size of an Object: 8 for 32 bit, 12 for 64 bit compressed oops, 16 for 64 bit\n    private static final long OBJECT_ALIGNMENT = 8;\n\n    /** Use the offset of a known field to determine the minimum size of an object. */\n    private static final Object HELPER_OBJECT = new Object() { byte b; };\n\n\n    static\n    {\n        try\n        {\n            // Use reflection to get a reference to the 'Unsafe' object.\n            Field f = Unsafe.class.getDeclaredField( \"theUnsafe\" );\n            f.setAccessible( true );\n            UNSAFE = (Unsafe) f.get( null );\n\n            OBJECT_BASE_SIZE = UNSAFE.objectFieldOffset( HELPER_OBJECT.getClass().getDeclaredField( \"b\" ) );\n\n            ADDRESS_SIZE = UNSAFE.addressSize();\n            REFERENCE_SIZE = UNSAFE.arrayIndexScale( Object[].class );\n\n            if( ADDRESS_SIZE == 4 )\n            {\n                ADDRESS_MODE = AddressMode.MEM_32BIT;\n            }\n            else if( ADDRESS_SIZE == 8 &amp;&amp; REFERENCE_SIZE == 8 )\n            {\n                ADDRESS_MODE = AddressMode.MEM_64BIT;\n            }\n            else if( ADDRESS_SIZE == 8 &amp;&amp; REFERENCE_SIZE == 4 )\n            {\n                ADDRESS_MODE = AddressMode.MEM_64BIT_COMPRESSED_OOPS;\n            }\n            else\n            {\n                ADDRESS_MODE = AddressMode.UNKNOWN;\n            }\n        }\n        catch( Exception e )\n        {\n            throw new Error( e );\n        }\n    }\n\n\n    /** Return the size of the object excluding any referenced objects. */\n    public static long shallowSizeOf( final Object object )\n    {\n        Class&lt;?&gt; objectClass = object.getClass();\n        if( objectClass.isArray() )\n        {\n            // Array size is base offset + length * element size\n            long size = UNSAFE.arrayBaseOffset( objectClass )\n                    + UNSAFE.arrayIndexScale( objectClass ) * Array.getLength( object );\n            return padSize( size );\n        }\n        else\n        {\n            // Object size is the largest field offset padded out to 8 bytes\n            long size = OBJECT_BASE_SIZE;\n            do\n            {\n                for( Field field : objectClass.getDeclaredFields() )\n                {\n                    if( (field.getModifiers() &amp; Modifier.STATIC) == 0 )\n                    {\n                        long offset = UNSAFE.objectFieldOffset( field );\n                        if( offset &gt;= size )\n                        {\n                            size = offset + 1; // Field size is between 1 and PAD_SIZE bytes. Padding will round up to padding size.\n                        }\n                    }\n                }\n                objectClass = objectClass.getSuperclass();\n            }\n            while( objectClass != null );\n\n            return padSize( size );\n        }\n    }\n\n\n    private static final long padSize( final long size )\n    {\n        return (size + (OBJECT_ALIGNMENT - 1)) &amp; ~(OBJECT_ALIGNMENT - 1);\n    }\n\n\n    /** Return the size of the object including any referenced objects. */\n    public static long deepSizeOf( final Object object )\n    {\n        IdentityHashMap&lt;Object,Object&gt; visited = new IdentityHashMap&lt;Object,Object&gt;();\n        Stack&lt;Object&gt; stack = new Stack&lt;Object&gt;();\n        if( object != null ) stack.push( object );\n\n        long size = 0;\n        while( !stack.isEmpty() )\n        {\n            size += internalSizeOf( stack.pop(), stack, visited );\n        }\n        return size;\n    }\n\n\n    private static long internalSizeOf( final Object object, final Stack&lt;Object&gt; stack, final IdentityHashMap&lt;Object,Object&gt; visited )\n    {\n        // Scan for object references and add to stack\n        Class&lt;?&gt; c = object.getClass();\n        if( c.isArray() &amp;&amp; !c.getComponentType().isPrimitive() )\n        {\n            // Add unseen array elements to stack\n            for( int i = Array.getLength( object ) - 1; i &gt;= 0; i-- )\n            {\n                Object val = Array.get( object, i );\n                if( val != null &amp;&amp; visited.put( val, val ) == null )\n                {\n                    stack.add( val );\n                }\n            }\n        }\n        else\n        {\n            // Add unseen object references to the stack\n            for( ; c != null; c = c.getSuperclass() )\n            {\n                for( Field field : c.getDeclaredFields() )\n                {\n                    if( (field.getModifiers() &amp; Modifier.STATIC) == 0 \n                            &amp;&amp; !field.getType().isPrimitive() )\n                    {\n                        field.setAccessible( true );\n                        try\n                        {\n                            Object val = field.get( object );\n                            if( val != null &amp;&amp; visited.put( val, val ) == null )\n                            {\n                                stack.add( val );\n                            }\n                        }\n                        catch( IllegalArgumentException e )\n                        {\n                            throw new RuntimeException( e );\n                        }\n                        catch( IllegalAccessException e )\n                        {\n                            throw new RuntimeException( e );\n                        }\n                    }\n                }\n            }\n        }\n\n        return shallowSizeOf( object );\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":160345,"reputation":11044,"user_id":380331,"accept_rate":92,"display_name":"Agnius Vasiliauskas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1413755622,"creation_date":1413471731,"answer_id":26407668,"question_id":52353,"body_markdown":"My answer is based on the code supplied by Nick. That code measures total amount of bytes which are occupied by the serialized object. So this actually measures serialization stuff + plain object memory footprint (just serialize for example `int` and you will see that total amount of serialized bytes is not `4`). So if you want to get raw byte number used exactly for your object - you need to modify that code a bit. Like so:\r\n\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.ObjectOutputStream;\r\n    import java.io.Serializable;\r\n    \r\n    public class ObjectSizeCalculator {\r\n        private Object getFirstObjectReference(Object o) {\r\n            String objectType = o.getClass().getTypeName();\r\n    \r\n            if (objectType.substring(objectType.length()-2).equals(&quot;[]&quot;)) {\r\n                try {\r\n                    if (objectType.equals(&quot;java.lang.Object[]&quot;))\r\n                        return ((Object[])o)[0];\r\n                    else if (objectType.equals(&quot;int[]&quot;))\r\n                        return ((int[])o)[0];\r\n                    else\r\n                        throw new RuntimeException(&quot;Not Implemented !&quot;);\r\n                } catch (IndexOutOfBoundsException e) {\r\n                    return null;\r\n                }\r\n            }\r\n    \r\n            return o;\r\n        } \r\n    \r\n        public int getObjectSizeInBytes(Object o) {\r\n            final String STRING_JAVA_TYPE_NAME = &quot;java.lang.String&quot;;\r\n    \r\n            if (o == null)\r\n                return 0;\r\n    \r\n            String objectType = o.getClass().getTypeName();\r\n            boolean isArray = objectType.substring(objectType.length()-2).equals(&quot;[]&quot;);\r\n    \r\n            Object objRef = getFirstObjectReference(o);\r\n            if (objRef != null &amp;&amp; !(objRef instanceof Serializable))\r\n                throw new RuntimeException(&quot;Object must be serializable for measuring it&#39;s memory footprint using this method !&quot;);\r\n    \r\n            try {\r\n                ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n                ObjectOutputStream oos = new ObjectOutputStream(baos);\r\n                oos.writeObject(o);\r\n                oos.close();\r\n                byte[] bytes = baos.toByteArray();\r\n    \r\n                for (int i = bytes.length - 1, j = 0; i != 0; i--, j++) {\r\n                    if (objectType != STRING_JAVA_TYPE_NAME) {\r\n                        if (bytes[i] == 112)\r\n                            if (isArray)\r\n                                return j - 4;\r\n                            else\r\n                                return j;\r\n                    } else {\r\n                        if (bytes[i] == 0)\r\n                            return j - 1;\r\n                    }\r\n                }\r\n            } catch (Exception e) {\r\n                return -1;\r\n            }\r\n    \r\n            return -1;\r\n        }    \r\n        \r\n    }\r\n\r\nI&#39;ve tested this solution with primitive types, String, and on some trivial classes. There may be not covered cases also.\r\n\r\n&lt;br&gt;**UPDATE:** Example modified to support memory footprint calculation of array objects.","title":"How to determine the size of an object in Java","body":"<p>My answer is based on the code supplied by Nick. That code measures total amount of bytes which are occupied by the serialized object. So this actually measures serialization stuff + plain object memory footprint (just serialize for example <code>int</code> and you will see that total amount of serialized bytes is not <code>4</code>). So if you want to get raw byte number used exactly for your object - you need to modify that code a bit. Like so:</p>\n\n<pre><code>import java.io.ByteArrayOutputStream;\nimport java.io.ObjectOutputStream;\nimport java.io.Serializable;\n\npublic class ObjectSizeCalculator {\n    private Object getFirstObjectReference(Object o) {\n        String objectType = o.getClass().getTypeName();\n\n        if (objectType.substring(objectType.length()-2).equals(\"[]\")) {\n            try {\n                if (objectType.equals(\"java.lang.Object[]\"))\n                    return ((Object[])o)[0];\n                else if (objectType.equals(\"int[]\"))\n                    return ((int[])o)[0];\n                else\n                    throw new RuntimeException(\"Not Implemented !\");\n            } catch (IndexOutOfBoundsException e) {\n                return null;\n            }\n        }\n\n        return o;\n    } \n\n    public int getObjectSizeInBytes(Object o) {\n        final String STRING_JAVA_TYPE_NAME = \"java.lang.String\";\n\n        if (o == null)\n            return 0;\n\n        String objectType = o.getClass().getTypeName();\n        boolean isArray = objectType.substring(objectType.length()-2).equals(\"[]\");\n\n        Object objRef = getFirstObjectReference(o);\n        if (objRef != null &amp;&amp; !(objRef instanceof Serializable))\n            throw new RuntimeException(\"Object must be serializable for measuring it's memory footprint using this method !\");\n\n        try {\n            ByteArrayOutputStream baos = new ByteArrayOutputStream();\n            ObjectOutputStream oos = new ObjectOutputStream(baos);\n            oos.writeObject(o);\n            oos.close();\n            byte[] bytes = baos.toByteArray();\n\n            for (int i = bytes.length - 1, j = 0; i != 0; i--, j++) {\n                if (objectType != STRING_JAVA_TYPE_NAME) {\n                    if (bytes[i] == 112)\n                        if (isArray)\n                            return j - 4;\n                        else\n                            return j;\n                } else {\n                    if (bytes[i] == 0)\n                        return j - 1;\n                }\n            }\n        } catch (Exception e) {\n            return -1;\n        }\n\n        return -1;\n    }    \n\n}\n</code></pre>\n\n<p>I've tested this solution with primitive types, String, and on some trivial classes. There may be not covered cases also.</p>\n\n<p><br><strong>UPDATE:</strong> Example modified to support memory footprint calculation of array objects.</p>\n"},{"tags":[],"owner":{"account_id":543250,"reputation":18874,"user_id":912319,"accept_rate":62,"display_name":"Kanagavelu Sugumar"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1436758371,"creation_date":1425366298,"answer_id":28825937,"question_id":52353,"body_markdown":"This answer is not related to Object size, but when you are using array to accommodate the objects; how much memory size it will allocate for the object.\r\n\r\nSo arrays, list, or map all those collection won&#39;t be going to store objects really (only at the time of primitives, real object memory size is needed), it will store only references for those objects. \r\n\r\nNow the `Used heap memory = sizeOfObj + sizeOfRef (* 4 bytes) in collection`\r\n\r\n* (4/8 bytes) depends on (32/64 bit) OS\r\n\r\n**PRIMITIVES**\r\n\r\n    int   [] intArray    = new int   [1]; will require 4 bytes.\r\n    long  [] longArray   = new long  [1]; will require 8 bytes.\r\n\r\n**OBJECTS**\r\n\r\n    Object[] objectArray = new Object[1]; will require 4 bytes. The object can be any user defined Object.\r\n    Long  [] longArray   = new Long  [1]; will require 4 bytes.\r\n\r\n\r\nI mean to say all the object REFERENCE needs only 4 bytes of memory. It may be String reference OR Double object reference, But depends on object creation the memory needed will vary.\r\n\r\n\r\ne.g) If i create object for the below class `ReferenceMemoryTest` then 4 + 4 + 4 = 12 bytes of memory will be created. The memory may differ when you are trying to initialize the references.\r\n\r\n     class ReferenceMemoryTest {\r\n        public String refStr;\r\n        public Object refObj;\r\n        public Double refDoub; \r\n    }\r\n\r\n\r\nSo when are creating object/reference array, all its contents will be occupied with NULL references. And we know each reference requires 4 bytes.\r\n\r\n\r\nAnd finally, memory allocation for the below code is 20 bytes.\r\n\r\nReferenceMemoryTest ref1 = new ReferenceMemoryTest(); ( 4(ref1) + 12 = 16 bytes)\r\nReferenceMemoryTest ref2 = ref1;                      ( 4(ref2) + 16 = 20 bytes)","title":"How to determine the size of an object in Java","body":"<p>This answer is not related to Object size, but when you are using array to accommodate the objects; how much memory size it will allocate for the object.</p>\n\n<p>So arrays, list, or map all those collection won't be going to store objects really (only at the time of primitives, real object memory size is needed), it will store only references for those objects. </p>\n\n<p>Now the <code>Used heap memory = sizeOfObj + sizeOfRef (* 4 bytes) in collection</code></p>\n\n<ul>\n<li>(4/8 bytes) depends on (32/64 bit) OS</li>\n</ul>\n\n<p><strong>PRIMITIVES</strong></p>\n\n<pre><code>int   [] intArray    = new int   [1]; will require 4 bytes.\nlong  [] longArray   = new long  [1]; will require 8 bytes.\n</code></pre>\n\n<p><strong>OBJECTS</strong></p>\n\n<pre><code>Object[] objectArray = new Object[1]; will require 4 bytes. The object can be any user defined Object.\nLong  [] longArray   = new Long  [1]; will require 4 bytes.\n</code></pre>\n\n<p>I mean to say all the object REFERENCE needs only 4 bytes of memory. It may be String reference OR Double object reference, But depends on object creation the memory needed will vary.</p>\n\n<p>e.g) If i create object for the below class <code>ReferenceMemoryTest</code> then 4 + 4 + 4 = 12 bytes of memory will be created. The memory may differ when you are trying to initialize the references.</p>\n\n<pre><code> class ReferenceMemoryTest {\n    public String refStr;\n    public Object refObj;\n    public Double refDoub; \n}\n</code></pre>\n\n<p>So when are creating object/reference array, all its contents will be occupied with NULL references. And we know each reference requires 4 bytes.</p>\n\n<p>And finally, memory allocation for the below code is 20 bytes.</p>\n\n<p>ReferenceMemoryTest ref1 = new ReferenceMemoryTest(); ( 4(ref1) + 12 = 16 bytes)\nReferenceMemoryTest ref2 = ref1;                      ( 4(ref2) + 16 = 20 bytes)</p>\n"},{"tags":[],"owner":{"account_id":60400,"reputation":19147,"user_id":180416,"accept_rate":63,"display_name":"rich"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1560039890,"creation_date":1425650854,"answer_id":28900509,"question_id":52353,"body_markdown":"Much of the other answers provide shallow sizes - e.g. the size of a HashMap without any of the keys or values, which isn&#39;t likely what you want.\r\n\r\nThe jamm project uses the java.lang.instrumentation package above but walks the tree and so can give you the deep memory use.\r\n\r\n    new MemoryMeter().measureDeep(myHashMap);\r\n\r\nhttps://github.com/jbellis/jamm\r\n\r\n&gt; To use MemoryMeter, start the JVM with &quot;-javaagent:&lt;path to&gt;/jamm.jar&quot;","title":"How to determine the size of an object in Java","body":"<p>Much of the other answers provide shallow sizes - e.g. the size of a HashMap without any of the keys or values, which isn't likely what you want.</p>\n\n<p>The jamm project uses the java.lang.instrumentation package above but walks the tree and so can give you the deep memory use.</p>\n\n<pre><code>new MemoryMeter().measureDeep(myHashMap);\n</code></pre>\n\n<p><a href=\"https://github.com/jbellis/jamm\" rel=\"noreferrer\">https://github.com/jbellis/jamm</a></p>\n\n<blockquote>\n  <p>To use MemoryMeter, start the JVM with \"-javaagent:/jamm.jar\"</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1629443,"reputation":1299,"user_id":1504300,"accept_rate":71,"display_name":"reallynice"},"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1428062999,"creation_date":1428062999,"answer_id":29431949,"question_id":52353,"body_markdown":"Without having to mess with instrumentation and so on, and if you don&#39;t need to know the byte-exact size of an object, you could go with the following approach:\r\n    \r\n    System.gc();\r\n    Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory();\r\n\r\n    do your job here\r\n\r\n    System.gc();\r\n    Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory();\r\n\r\nThis way you read the used memory before and after, and calling the GC just before getting the used memory you lower the &quot;noise&quot; almost to 0.\r\n\r\nFor a more reliable result you can run your job n times, and then divide the used memory by n, obtaining how much memory one run takes. Even more, you can run the whole thing more times and make an average.","title":"How to determine the size of an object in Java","body":"<p>Without having to mess with instrumentation and so on, and if you don't need to know the byte-exact size of an object, you could go with the following approach:</p>\n\n<pre><code>System.gc();\nRuntime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory();\n\ndo your job here\n\nSystem.gc();\nRuntime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory();\n</code></pre>\n\n<p>This way you read the used memory before and after, and calling the GC just before getting the used memory you lower the \"noise\" almost to 0.</p>\n\n<p>For a more reliable result you can run your job n times, and then divide the used memory by n, obtaining how much memory one run takes. Even more, you can run the whole thing more times and make an average.</p>\n"},{"tags":[],"owner":{"account_id":44768,"reputation":4435,"user_id":131552,"display_name":"Attila Szegedi"},"down_vote_count":1,"up_vote_count":28,"is_accepted":false,"score":27,"last_activity_date":1428577621,"creation_date":1428577621,"answer_id":29536817,"question_id":52353,"body_markdown":"Back when I worked at Twitter, I wrote a utility for calculating deep object size. It takes into account different memory models (32-bit, compressed oops, 64-bit), padding, subclass padding, works correctly on circular data structures and arrays. You can just compile this one .java file; it has no external dependencies:\r\n\r\nhttps://github.com/twitter/commons/blob/master/src/java/com/twitter/common/objectsize/ObjectSizeCalculator.java","title":"How to determine the size of an object in Java","body":"<p>Back when I worked at Twitter, I wrote a utility for calculating deep object size. It takes into account different memory models (32-bit, compressed oops, 64-bit), padding, subclass padding, works correctly on circular data structures and arrays. You can just compile this one .java file; it has no external dependencies:</p>\n\n<p><a href=\"https://github.com/twitter/commons/blob/master/src/java/com/twitter/common/objectsize/ObjectSizeCalculator.java\" rel=\"noreferrer\">https://github.com/twitter/commons/blob/master/src/java/com/twitter/common/objectsize/ObjectSizeCalculator.java</a></p>\n"},{"tags":[],"owner":{"account_id":4440133,"reputation":13373,"user_id":3614835,"accept_rate":67,"display_name":"Jeffrey Bosboom"},"down_vote_count":0,"up_vote_count":169,"is_accepted":false,"score":169,"last_activity_date":1430700412,"creation_date":1430700412,"answer_id":30021105,"question_id":52353,"body_markdown":"You should use [jol](http://openjdk.java.net/projects/code-tools/jol/), a tool developed as part of the OpenJDK project.\r\n\r\n&gt; JOL (Java Object Layout) is the tiny toolbox to analyze object layout schemes in JVMs. These tools are using Unsafe, JVMTI, and Serviceability Agent (SA) heavily to decoder the actual object layout, footprint, and references. This makes JOL much more accurate than other tools relying on heap dumps, specification assumptions, etc.\r\n\r\nTo get the sizes of primitives, references and array elements, use `VMSupport.vmDetails()`.  On Oracle JDK 1.8.0_40 running on 64-bit Windows (used for all following examples), this method returns\r\n\r\n    Running 64-bit HotSpot VM.\r\n    Using compressed oop with 0-bit shift.\r\n    Using compressed klass with 3-bit shift.\r\n    Objects are 8 bytes aligned.\r\n    Field sizes by type: 4, 1, 1, 2, 2, 4, 4, 8, 8 [bytes]\r\n    Array element sizes: 4, 1, 1, 2, 2, 4, 4, 8, 8 [bytes]\r\n\r\nYou can get the shallow size of an object instance using `ClassLayout.parseClass(Foo.class).toPrintable()` (optionally passing an instance to `toPrintable`).  This is only the space consumed by a single instance of that class; it does not include any other objects referenced by that class.  It _does_ include VM overhead for the object header, field alignment and padding.  For `java.util.regex.Pattern`:\r\n\r\n    java.util.regex.Pattern object internals:\r\n     OFFSET  SIZE        TYPE DESCRIPTION                    VALUE\r\n          0     4             (object header)                01 00 00 00 (0000 0001 0000 0000 0000 0000 0000 0000)\r\n          4     4             (object header)                00 00 00 00 (0000 0000 0000 0000 0000 0000 0000 0000)\r\n          8     4             (object header)                cb cf 00 20 (1100 1011 1100 1111 0000 0000 0010 0000)\r\n         12     4         int Pattern.flags                  0\r\n         16     4         int Pattern.capturingGroupCount    1\r\n         20     4         int Pattern.localCount             0\r\n         24     4         int Pattern.cursor                 48\r\n         28     4         int Pattern.patternLength          0\r\n         32     1     boolean Pattern.compiled               true\r\n         33     1     boolean Pattern.hasSupplementary       false\r\n         34     2             (alignment/padding gap)        N/A\r\n         36     4      String Pattern.pattern                (object)\r\n         40     4      String Pattern.normalizedPattern      (object)\r\n         44     4        Node Pattern.root                   (object)\r\n         48     4        Node Pattern.matchRoot              (object)\r\n         52     4       int[] Pattern.buffer                 null\r\n         56     4         Map Pattern.namedGroups            null\r\n         60     4 GroupHead[] Pattern.groupNodes             null\r\n         64     4       int[] Pattern.temp                   null\r\n         68     4             (loss due to the next object alignment)\r\n    Instance size: 72 bytes (reported by Instrumentation API)\r\n    Space losses: 2 bytes internal + 4 bytes external = 6 bytes total\r\n\r\nYou can get a summary view of the deep size of an object instance using `GraphLayout.parseInstance(obj).toFootprint()`.  Of course, some objects in the footprint might be shared (also referenced from other objects), so it is an overapproximation of the space that could be reclaimed when that object is garbage collected.  For the result of `Pattern.compile(&quot;^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\\\.[a-zA-Z0-9-.]+$&quot;)` (taken from [this answer](https://stackoverflow.com/a/719543/3614835)), jol reports a total footprint of 1840 bytes, of which only 72 are the Pattern instance itself.\r\n\r\n    java.util.regex.Pattern instance footprint:\r\n         COUNT       AVG       SUM   DESCRIPTION\r\n             1       112       112   [C\r\n             3       272       816   [Z\r\n             1        24        24   java.lang.String\r\n             1        72        72   java.util.regex.Pattern\r\n             9        24       216   java.util.regex.Pattern$1\r\n            13        24       312   java.util.regex.Pattern$5\r\n             1        16        16   java.util.regex.Pattern$Begin\r\n             3        24        72   java.util.regex.Pattern$BitClass\r\n             3        32        96   java.util.regex.Pattern$Curly\r\n             1        24        24   java.util.regex.Pattern$Dollar\r\n             1        16        16   java.util.regex.Pattern$LastNode\r\n             1        16        16   java.util.regex.Pattern$Node\r\n             2        24        48   java.util.regex.Pattern$Single\r\n            40                1840   (total)\r\n\r\nIf you instead use `GraphLayout.parseInstance(obj).toPrintable()`, jol will tell you the address, size, type, value and path of field dereferences to each referenced object, though that&#39;s usually too much detail to be useful.  For the ongoing pattern example, you might get the following.  (Addresses will likely change between runs.)\r\n\r\n    java.util.regex.Pattern object externals:\r\n              ADDRESS       SIZE TYPE                             PATH                           VALUE\r\n             d5e5f290         16 java.util.regex.Pattern$Node     .root.next.atom.next           (object)\r\n             d5e5f2a0        120 (something else)                 (somewhere else)               (something else)\r\n             d5e5f318         16 java.util.regex.Pattern$LastNode .root.next.next.next.next.next.next.next (object)\r\n             d5e5f328      21664 (something else)                 (somewhere else)               (something else)\r\n             d5e647c8         24 java.lang.String                 .pattern                       (object)\r\n             d5e647e0        112 [C                               .pattern.value                 [^, [, a, -, z, A, -, Z, 0, -, 9, _, ., +, -, ], +, @, [, a, -, z, A, -, Z, 0, -, 9, -, ], +, \\, ., [, a, -, z, A, -, Z, 0, -, 9, -, ., ], +, $]\r\n             d5e64850        448 (something else)                 (somewhere else)               (something else)\r\n             d5e64a10         72 java.util.regex.Pattern                                         (object)\r\n             d5e64a58        416 (something else)                 (somewhere else)               (something else)\r\n             d5e64bf8         16 java.util.regex.Pattern$Begin    .root                          (object)\r\n             d5e64c08         24 java.util.regex.Pattern$BitClass .root.next.atom.val$rhs        (object)\r\n             d5e64c20        272 [Z                               .root.next.atom.val$rhs.bits   [false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, true, false, true, true, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, true, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false]\r\n             d5e64d30         24 java.util.regex.Pattern$1        .root.next.atom.val$lhs.val$lhs.val$lhs.val$lhs.val$lhs.val$lhs (object)\r\n             d5e64d48         24 java.util.regex.Pattern$1        .root.next.atom.val$lhs.val$lhs.val$lhs.val$lhs.val$lhs.val$rhs (object)\r\n             d5e64d60         24 java.util.regex.Pattern$5        .root.next.atom.val$lhs.val$lhs.val$lhs.val$lhs.val$lhs (object)\r\n             d5e64d78         24 java.util.regex.Pattern$1        .root.next.atom.val$lhs.val$lhs.val$lhs.val$lhs.val$rhs (object)\r\n             d5e64d90         24 java.util.regex.Pattern$5        .root.next.atom.val$lhs.val$lhs.val$lhs.val$lhs (object)\r\n             d5e64da8         24 java.util.regex.Pattern$5        .root.next.atom.val$lhs.val$lhs.val$lhs (object)\r\n             d5e64dc0         24 java.util.regex.Pattern$5        .root.next.atom.val$lhs.val$lhs (object)\r\n             d5e64dd8         24 java.util.regex.Pattern$5        .root.next.atom.val$lhs        (object)\r\n             d5e64df0         24 java.util.regex.Pattern$5        .root.next.atom                (object)\r\n             d5e64e08         32 java.util.regex.Pattern$Curly    .root.next                     (object)\r\n             d5e64e28         24 java.util.regex.Pattern$Single   .root.next.next                (object)\r\n             d5e64e40         24 java.util.regex.Pattern$BitClass .root.next.next.next.atom.val$rhs (object)\r\n             d5e64e58        272 [Z                               .root.next.next.next.atom.val$rhs.bits [false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, true, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false]\r\n             d5e64f68         24 java.util.regex.Pattern$1        .root.next.next.next.atom.val$lhs.val$lhs.val$lhs (object)\r\n             d5e64f80         24 java.util.regex.Pattern$1        .root.next.next.next.atom.val$lhs.val$lhs.val$rhs (object)\r\n             d5e64f98         24 java.util.regex.Pattern$5        .root.next.next.next.atom.val$lhs.val$lhs (object)\r\n             d5e64fb0         24 java.util.regex.Pattern$1        .root.next.next.next.atom.val$lhs.val$rhs (object)\r\n             d5e64fc8         24 java.util.regex.Pattern$5        .root.next.next.next.atom.val$lhs (object)\r\n             d5e64fe0         24 java.util.regex.Pattern$5        .root.next.next.next.atom      (object)\r\n             d5e64ff8         32 java.util.regex.Pattern$Curly    .root.next.next.next           (object)\r\n             d5e65018         24 java.util.regex.Pattern$Single   .root.next.next.next.next      (object)\r\n             d5e65030         24 java.util.regex.Pattern$BitClass .root.next.next.next.next.next.atom.val$rhs (object)\r\n             d5e65048        272 [Z                               .root.next.next.next.next.next.atom.val$rhs.bits [false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, true, true, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false]\r\n             d5e65158         24 java.util.regex.Pattern$1        .root.next.next.next.next.next.atom.val$lhs.val$lhs.val$lhs.val$lhs (object)\r\n             d5e65170         24 java.util.regex.Pattern$1        .root.next.next.next.next.next.atom.val$lhs.val$lhs.val$lhs.val$rhs (object)\r\n             d5e65188         24 java.util.regex.Pattern$5        .root.next.next.next.next.next.atom.val$lhs.val$lhs.val$lhs (object)\r\n             d5e651a0         24 java.util.regex.Pattern$1        .root.next.next.next.next.next.atom.val$lhs.val$lhs.val$rhs (object)\r\n             d5e651b8         24 java.util.regex.Pattern$5        .root.next.next.next.next.next.atom.val$lhs.val$lhs (object)\r\n             d5e651d0         24 java.util.regex.Pattern$5        .root.next.next.next.next.next.atom.val$lhs (object)\r\n             d5e651e8         24 java.util.regex.Pattern$5        .root.next.next.next.next.next.atom (object)\r\n             d5e65200         32 java.util.regex.Pattern$Curly    .root.next.next.next.next.next (object)\r\n             d5e65220        120 (something else)                 (somewhere else)               (something else)\r\n             d5e65298         24 java.util.regex.Pattern$Dollar   .root.next.next.next.next.next.next (object)\r\n\r\nThe &quot;(something else)&quot; entries [describe other objects in the heap that are not part of this object graph](https://stackoverflow.com/questions/30021092/what-is-something-else-in-jol-graphlayout-output).\r\n\r\nThe best jol documentation is the [jol samples](http://hg.openjdk.java.net/code-tools/jol/file/tip/jol-samples/src/main/java/org/openjdk/jol/samples/) in the jol repository.  The samples demonstrate common jol operations and show how you can use jol to analyze VM and garbage collector internals.\r\n","title":"How to determine the size of an object in Java","body":"<p>You should use <a href=\"http://openjdk.java.net/projects/code-tools/jol/\" rel=\"noreferrer\">jol</a>, a tool developed as part of the OpenJDK project.</p>\n\n<blockquote>\n  <p>JOL (Java Object Layout) is the tiny toolbox to analyze object layout schemes in JVMs. These tools are using Unsafe, JVMTI, and Serviceability Agent (SA) heavily to decoder the actual object layout, footprint, and references. This makes JOL much more accurate than other tools relying on heap dumps, specification assumptions, etc.</p>\n</blockquote>\n\n<p>To get the sizes of primitives, references and array elements, use <code>VMSupport.vmDetails()</code>.  On Oracle JDK 1.8.0_40 running on 64-bit Windows (used for all following examples), this method returns</p>\n\n<pre><code>Running 64-bit HotSpot VM.\nUsing compressed oop with 0-bit shift.\nUsing compressed klass with 3-bit shift.\nObjects are 8 bytes aligned.\nField sizes by type: 4, 1, 1, 2, 2, 4, 4, 8, 8 [bytes]\nArray element sizes: 4, 1, 1, 2, 2, 4, 4, 8, 8 [bytes]\n</code></pre>\n\n<p>You can get the shallow size of an object instance using <code>ClassLayout.parseClass(Foo.class).toPrintable()</code> (optionally passing an instance to <code>toPrintable</code>).  This is only the space consumed by a single instance of that class; it does not include any other objects referenced by that class.  It <em>does</em> include VM overhead for the object header, field alignment and padding.  For <code>java.util.regex.Pattern</code>:</p>\n\n<pre><code>java.util.regex.Pattern object internals:\n OFFSET  SIZE        TYPE DESCRIPTION                    VALUE\n      0     4             (object header)                01 00 00 00 (0000 0001 0000 0000 0000 0000 0000 0000)\n      4     4             (object header)                00 00 00 00 (0000 0000 0000 0000 0000 0000 0000 0000)\n      8     4             (object header)                cb cf 00 20 (1100 1011 1100 1111 0000 0000 0010 0000)\n     12     4         int Pattern.flags                  0\n     16     4         int Pattern.capturingGroupCount    1\n     20     4         int Pattern.localCount             0\n     24     4         int Pattern.cursor                 48\n     28     4         int Pattern.patternLength          0\n     32     1     boolean Pattern.compiled               true\n     33     1     boolean Pattern.hasSupplementary       false\n     34     2             (alignment/padding gap)        N/A\n     36     4      String Pattern.pattern                (object)\n     40     4      String Pattern.normalizedPattern      (object)\n     44     4        Node Pattern.root                   (object)\n     48     4        Node Pattern.matchRoot              (object)\n     52     4       int[] Pattern.buffer                 null\n     56     4         Map Pattern.namedGroups            null\n     60     4 GroupHead[] Pattern.groupNodes             null\n     64     4       int[] Pattern.temp                   null\n     68     4             (loss due to the next object alignment)\nInstance size: 72 bytes (reported by Instrumentation API)\nSpace losses: 2 bytes internal + 4 bytes external = 6 bytes total\n</code></pre>\n\n<p>You can get a summary view of the deep size of an object instance using <code>GraphLayout.parseInstance(obj).toFootprint()</code>.  Of course, some objects in the footprint might be shared (also referenced from other objects), so it is an overapproximation of the space that could be reclaimed when that object is garbage collected.  For the result of <code>Pattern.compile(\"^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\\\.[a-zA-Z0-9-.]+$\")</code> (taken from <a href=\"https://stackoverflow.com/a/719543/3614835\">this answer</a>), jol reports a total footprint of 1840 bytes, of which only 72 are the Pattern instance itself.</p>\n\n<pre><code>java.util.regex.Pattern instance footprint:\n     COUNT       AVG       SUM   DESCRIPTION\n         1       112       112   [C\n         3       272       816   [Z\n         1        24        24   java.lang.String\n         1        72        72   java.util.regex.Pattern\n         9        24       216   java.util.regex.Pattern$1\n        13        24       312   java.util.regex.Pattern$5\n         1        16        16   java.util.regex.Pattern$Begin\n         3        24        72   java.util.regex.Pattern$BitClass\n         3        32        96   java.util.regex.Pattern$Curly\n         1        24        24   java.util.regex.Pattern$Dollar\n         1        16        16   java.util.regex.Pattern$LastNode\n         1        16        16   java.util.regex.Pattern$Node\n         2        24        48   java.util.regex.Pattern$Single\n        40                1840   (total)\n</code></pre>\n\n<p>If you instead use <code>GraphLayout.parseInstance(obj).toPrintable()</code>, jol will tell you the address, size, type, value and path of field dereferences to each referenced object, though that's usually too much detail to be useful.  For the ongoing pattern example, you might get the following.  (Addresses will likely change between runs.)</p>\n\n<pre><code>java.util.regex.Pattern object externals:\n          ADDRESS       SIZE TYPE                             PATH                           VALUE\n         d5e5f290         16 java.util.regex.Pattern$Node     .root.next.atom.next           (object)\n         d5e5f2a0        120 (something else)                 (somewhere else)               (something else)\n         d5e5f318         16 java.util.regex.Pattern$LastNode .root.next.next.next.next.next.next.next (object)\n         d5e5f328      21664 (something else)                 (somewhere else)               (something else)\n         d5e647c8         24 java.lang.String                 .pattern                       (object)\n         d5e647e0        112 [C                               .pattern.value                 [^, [, a, -, z, A, -, Z, 0, -, 9, _, ., +, -, ], +, @, [, a, -, z, A, -, Z, 0, -, 9, -, ], +, \\, ., [, a, -, z, A, -, Z, 0, -, 9, -, ., ], +, $]\n         d5e64850        448 (something else)                 (somewhere else)               (something else)\n         d5e64a10         72 java.util.regex.Pattern                                         (object)\n         d5e64a58        416 (something else)                 (somewhere else)               (something else)\n         d5e64bf8         16 java.util.regex.Pattern$Begin    .root                          (object)\n         d5e64c08         24 java.util.regex.Pattern$BitClass .root.next.atom.val$rhs        (object)\n         d5e64c20        272 [Z                               .root.next.atom.val$rhs.bits   [false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, true, false, true, true, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, true, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false]\n         d5e64d30         24 java.util.regex.Pattern$1        .root.next.atom.val$lhs.val$lhs.val$lhs.val$lhs.val$lhs.val$lhs (object)\n         d5e64d48         24 java.util.regex.Pattern$1        .root.next.atom.val$lhs.val$lhs.val$lhs.val$lhs.val$lhs.val$rhs (object)\n         d5e64d60         24 java.util.regex.Pattern$5        .root.next.atom.val$lhs.val$lhs.val$lhs.val$lhs.val$lhs (object)\n         d5e64d78         24 java.util.regex.Pattern$1        .root.next.atom.val$lhs.val$lhs.val$lhs.val$lhs.val$rhs (object)\n         d5e64d90         24 java.util.regex.Pattern$5        .root.next.atom.val$lhs.val$lhs.val$lhs.val$lhs (object)\n         d5e64da8         24 java.util.regex.Pattern$5        .root.next.atom.val$lhs.val$lhs.val$lhs (object)\n         d5e64dc0         24 java.util.regex.Pattern$5        .root.next.atom.val$lhs.val$lhs (object)\n         d5e64dd8         24 java.util.regex.Pattern$5        .root.next.atom.val$lhs        (object)\n         d5e64df0         24 java.util.regex.Pattern$5        .root.next.atom                (object)\n         d5e64e08         32 java.util.regex.Pattern$Curly    .root.next                     (object)\n         d5e64e28         24 java.util.regex.Pattern$Single   .root.next.next                (object)\n         d5e64e40         24 java.util.regex.Pattern$BitClass .root.next.next.next.atom.val$rhs (object)\n         d5e64e58        272 [Z                               .root.next.next.next.atom.val$rhs.bits [false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, true, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false]\n         d5e64f68         24 java.util.regex.Pattern$1        .root.next.next.next.atom.val$lhs.val$lhs.val$lhs (object)\n         d5e64f80         24 java.util.regex.Pattern$1        .root.next.next.next.atom.val$lhs.val$lhs.val$rhs (object)\n         d5e64f98         24 java.util.regex.Pattern$5        .root.next.next.next.atom.val$lhs.val$lhs (object)\n         d5e64fb0         24 java.util.regex.Pattern$1        .root.next.next.next.atom.val$lhs.val$rhs (object)\n         d5e64fc8         24 java.util.regex.Pattern$5        .root.next.next.next.atom.val$lhs (object)\n         d5e64fe0         24 java.util.regex.Pattern$5        .root.next.next.next.atom      (object)\n         d5e64ff8         32 java.util.regex.Pattern$Curly    .root.next.next.next           (object)\n         d5e65018         24 java.util.regex.Pattern$Single   .root.next.next.next.next      (object)\n         d5e65030         24 java.util.regex.Pattern$BitClass .root.next.next.next.next.next.atom.val$rhs (object)\n         d5e65048        272 [Z                               .root.next.next.next.next.next.atom.val$rhs.bits [false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, true, true, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false]\n         d5e65158         24 java.util.regex.Pattern$1        .root.next.next.next.next.next.atom.val$lhs.val$lhs.val$lhs.val$lhs (object)\n         d5e65170         24 java.util.regex.Pattern$1        .root.next.next.next.next.next.atom.val$lhs.val$lhs.val$lhs.val$rhs (object)\n         d5e65188         24 java.util.regex.Pattern$5        .root.next.next.next.next.next.atom.val$lhs.val$lhs.val$lhs (object)\n         d5e651a0         24 java.util.regex.Pattern$1        .root.next.next.next.next.next.atom.val$lhs.val$lhs.val$rhs (object)\n         d5e651b8         24 java.util.regex.Pattern$5        .root.next.next.next.next.next.atom.val$lhs.val$lhs (object)\n         d5e651d0         24 java.util.regex.Pattern$5        .root.next.next.next.next.next.atom.val$lhs (object)\n         d5e651e8         24 java.util.regex.Pattern$5        .root.next.next.next.next.next.atom (object)\n         d5e65200         32 java.util.regex.Pattern$Curly    .root.next.next.next.next.next (object)\n         d5e65220        120 (something else)                 (somewhere else)               (something else)\n         d5e65298         24 java.util.regex.Pattern$Dollar   .root.next.next.next.next.next.next (object)\n</code></pre>\n\n<p>The \"(something else)\" entries <a href=\"https://stackoverflow.com/questions/30021092/what-is-something-else-in-jol-graphlayout-output\">describe other objects in the heap that are not part of this object graph</a>.</p>\n\n<p>The best jol documentation is the <a href=\"http://hg.openjdk.java.net/code-tools/jol/file/tip/jol-samples/src/main/java/org/openjdk/jol/samples/\" rel=\"noreferrer\">jol samples</a> in the jol repository.  The samples demonstrate common jol operations and show how you can use jol to analyze VM and garbage collector internals.</p>\n"},{"tags":[],"owner":{"account_id":1961485,"reputation":3248,"user_id":1762932,"accept_rate":84,"display_name":"Tom"},"down_vote_count":1,"up_vote_count":124,"is_accepted":false,"score":123,"last_activity_date":1473407600,"creation_date":1473407600,"answer_id":39406536,"question_id":52353,"body_markdown":"I accidentally found a java class\r\n&quot;jdk.nashorn.internal.ir.debug.ObjectSizeCalculator&quot;, already in jdk, \r\nwhich is easy to use and seems quite useful for determining the size of an object.\r\n\r\n    System.out.println(ObjectSizeCalculator.getObjectSize(new gnu.trove.map.hash.TObjectIntHashMap&lt;String&gt;(12000, 0.6f, -1)));\r\n\tSystem.out.println(ObjectSizeCalculator.getObjectSize(new HashMap&lt;String, Integer&gt;(100000)));\r\n\tSystem.out.println(ObjectSizeCalculator.getObjectSize(3));\r\n\tSystem.out.println(ObjectSizeCalculator.getObjectSize(new int[]{1, 2, 3, 4, 5, 6, 7 }));\r\n\tSystem.out.println(ObjectSizeCalculator.getObjectSize(new int[100]));\r\n\r\nresults:\r\n\t\t\r\n    164192\r\n    48\r\n    16\r\n    48\r\n    416\r\n\r\n","title":"How to determine the size of an object in Java","body":"<p>I accidentally found a java class\n\"jdk.nashorn.internal.ir.debug.ObjectSizeCalculator\", already in jdk, \nwhich is easy to use and seems quite useful for determining the size of an object.</p>\n\n<pre><code>System.out.println(ObjectSizeCalculator.getObjectSize(new gnu.trove.map.hash.TObjectIntHashMap&lt;String&gt;(12000, 0.6f, -1)));\nSystem.out.println(ObjectSizeCalculator.getObjectSize(new HashMap&lt;String, Integer&gt;(100000)));\nSystem.out.println(ObjectSizeCalculator.getObjectSize(3));\nSystem.out.println(ObjectSizeCalculator.getObjectSize(new int[]{1, 2, 3, 4, 5, 6, 7 }));\nSystem.out.println(ObjectSizeCalculator.getObjectSize(new int[100]));\n</code></pre>\n\n<p>results:</p>\n\n<pre><code>164192\n48\n16\n48\n416\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4099554,"reputation":301,"user_id":7706962,"display_name":"Sai Kiran"},"down_vote_count":7,"up_vote_count":2,"is_accepted":false,"score":-5,"last_activity_date":1533138971,"creation_date":1513449078,"answer_id":47848790,"question_id":52353,"body_markdown":"For JSONObject the below code can help you.\r\n\r\n    `JSONObject.toString().getBytes(&quot;UTF-8&quot;).length`\r\n\r\nreturns size in bytes\r\n\r\nI checked it with my JSONArray object by writing it to a file. It is giving object size.","title":"How to determine the size of an object in Java","body":"<p>For JSONObject the below code can help you.</p>\n\n<pre><code>`JSONObject.toString().getBytes(\"UTF-8\").length`\n</code></pre>\n\n<p>returns size in bytes</p>\n\n<p>I checked it with my JSONArray object by writing it to a file. It is giving object size.</p>\n"},{"tags":[],"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1521806006,"creation_date":1521806006,"answer_id":49449106,"question_id":52353,"body_markdown":"Just use java visual VM. \r\n\r\nIt has everything you need to profile and debug memory problems. \r\n\r\nIt also has a OQL (Object Query Language) console which allows you to do many useful things, one of which being `sizeof(o)`","title":"How to determine the size of an object in Java","body":"<p>Just use java visual VM. </p>\n\n<p>It has everything you need to profile and debug memory problems. </p>\n\n<p>It also has a OQL (Object Query Language) console which allows you to do many useful things, one of which being <code>sizeof(o)</code></p>\n"},{"tags":[],"owner":{"account_id":1477692,"reputation":46661,"user_id":1393484,"accept_rate":100,"display_name":"Ali Dehghani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553795903,"creation_date":1553795903,"answer_id":55404104,"question_id":52353,"body_markdown":"Suppose I declare a class named `Complex` like:\r\n```java\r\npublic class Complex {\r\n\r\n    private final long real;\r\n    private final long imaginary;\r\n\r\n    // omitted\r\n}\r\n\r\n```\r\nIn order to see how much memory is allocated to live instances of this class:\r\n```bash\r\n$ jmap -histo:live &lt;pid&gt; | grep Complex\r\n\r\n num     #instances         #bytes  class name (module)\r\n-------------------------------------------------------\r\n 327:             1             32  Complex\r\n```","title":"How to determine the size of an object in Java","body":"<p>Suppose I declare a class named <code>Complex</code> like:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Complex {\n\n    private final long real;\n    private final long imaginary;\n\n    // omitted\n}\n\n</code></pre>\n\n<p>In order to see how much memory is allocated to live instances of this class:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ jmap -histo:live &lt;pid&gt; | grep Complex\n\n num     #instances         #bytes  class name (module)\n-------------------------------------------------------\n 327:             1             32  Complex\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6911355,"reputation":71,"user_id":5307079,"display_name":"David Ryan"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1662647091,"creation_date":1561610410,"answer_id":56783991,"question_id":52353,"body_markdown":"I was looking for a runtime calculation of an object size that met the following requirements:\r\n\r\n - Available at runtime with no need to include instrumentation.\r\n - Works with Java 9+ without access to Unsafe.\r\n - Is based on the Class only. Not a deep sizeOf that takes into consideration string lengths, array lengths, etc.\r\n\r\nThe following is based on the core code of the original java specialists article (https://www.javaspecialists.eu/archive/Issue078.html) and a few bits from the Unsafe version in another answer to this question.\r\n\r\nI hope someone finds it useful.\r\n```\r\npublic class JavaSize {\r\n\r\n    private static final int NR_BITS = Integer.valueOf(System.getProperty(&quot;sun.arch.data.model&quot;));\r\n    private static final int BYTE = 8;\r\n    private static final int WORD = NR_BITS / BYTE;\r\n    private static final int HEADER_SIZE = 8;\r\n\r\n    public static int sizeOf(Class&lt;?&gt; clazz) {\r\n        int result = 0;\r\n\r\n        while (clazz != null) {\r\n            Field[] fields = clazz.getDeclaredFields();\r\n            for (int i = 0; i &lt; fields.length; i++) {\r\n                if (!Modifier.isStatic(fields[i].getModifiers())) {\r\n                    if (fields[i].getType().isPrimitive()) {\r\n                        Class&lt;?&gt; primitiveClass = fields[i].getType();\r\n                        if (primitiveClass == boolean.class || primitiveClass == byte.class) {\r\n                            result += 1;\r\n                        } else if (primitiveClass == short.class) {\r\n                            result += 2;\r\n                        } else if (primitiveClass == int.class || primitiveClass == float.class) {\r\n                            result += 4;\r\n                        } else if (primitiveClass == double.class || primitiveClass == long.class) {\r\n                            result += 8;\r\n                        }\r\n\r\n                    } else {\r\n                        // assume compressed references.\r\n                        result += 4;\r\n                    }\r\n                }\r\n            }\r\n\r\n            clazz = clazz.getSuperclass();\r\n\r\n            // round up to the nearest WORD length.\r\n            if ((result % WORD) != 0) {\r\n                result += WORD - (result % WORD);\r\n            }\r\n        }\r\n\r\n        result += HEADER_SIZE;\r\n\r\n        return result;\r\n    }\r\n }\r\n```","title":"How to determine the size of an object in Java","body":"<p>I was looking for a runtime calculation of an object size that met the following requirements:</p>\n<ul>\n<li>Available at runtime with no need to include instrumentation.</li>\n<li>Works with Java 9+ without access to Unsafe.</li>\n<li>Is based on the Class only. Not a deep sizeOf that takes into consideration string lengths, array lengths, etc.</li>\n</ul>\n<p>The following is based on the core code of the original java specialists article (<a href=\"https://www.javaspecialists.eu/archive/Issue078.html\" rel=\"nofollow noreferrer\">https://www.javaspecialists.eu/archive/Issue078.html</a>) and a few bits from the Unsafe version in another answer to this question.</p>\n<p>I hope someone finds it useful.</p>\n<pre><code>public class JavaSize {\n\n    private static final int NR_BITS = Integer.valueOf(System.getProperty(&quot;sun.arch.data.model&quot;));\n    private static final int BYTE = 8;\n    private static final int WORD = NR_BITS / BYTE;\n    private static final int HEADER_SIZE = 8;\n\n    public static int sizeOf(Class&lt;?&gt; clazz) {\n        int result = 0;\n\n        while (clazz != null) {\n            Field[] fields = clazz.getDeclaredFields();\n            for (int i = 0; i &lt; fields.length; i++) {\n                if (!Modifier.isStatic(fields[i].getModifiers())) {\n                    if (fields[i].getType().isPrimitive()) {\n                        Class&lt;?&gt; primitiveClass = fields[i].getType();\n                        if (primitiveClass == boolean.class || primitiveClass == byte.class) {\n                            result += 1;\n                        } else if (primitiveClass == short.class) {\n                            result += 2;\n                        } else if (primitiveClass == int.class || primitiveClass == float.class) {\n                            result += 4;\n                        } else if (primitiveClass == double.class || primitiveClass == long.class) {\n                            result += 8;\n                        }\n\n                    } else {\n                        // assume compressed references.\n                        result += 4;\n                    }\n                }\n            }\n\n            clazz = clazz.getSuperclass();\n\n            // round up to the nearest WORD length.\n            if ((result % WORD) != 0) {\n                result += WORD - (result % WORD);\n            }\n        }\n\n        result += HEADER_SIZE;\n\n        return result;\n    }\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":71092,"reputation":3112,"user_id":205629,"display_name":"simon04"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1587677404,"creation_date":1587677404,"answer_id":61397323,"question_id":52353,"body_markdown":"When using JetBrains IntelliJ, first enable &quot;Attach memory agent&quot; in File | Settings | Build, Execution, Deployment | Debugger.\r\n\r\nWhen debugging, right-click a variable of interest and choose &quot;Calculate Retained Size&quot;: [![Calculate Retained Size][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TvMel.png","title":"How to determine the size of an object in Java","body":"<p>When using JetBrains IntelliJ, first enable \"Attach memory agent\" in File | Settings | Build, Execution, Deployment | Debugger.</p>\n\n<p>When debugging, right-click a variable of interest and choose \"Calculate Retained Size\": <a href=\"https://i.stack.imgur.com/TvMel.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/TvMel.png\" alt=\"Calculate Retained Size\"></a></p>\n"},{"tags":[],"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1645591907,"creation_date":1645583570,"answer_id":71230694,"question_id":52353,"body_markdown":"If your application has the [Apache commons lang library][1] as a dependency or is using the [Spring framework][2] then you can also use the `SerializationUtils` class to quickly find out the approximate byte size of any given object.\r\n\r\n    byte[] data = SerializationUtils.serialize(user);\r\n    System.out.println(&quot;Approximate object size in bytes &quot; + data.length);\r\n\r\n\r\n  [1]: https://www.baeldung.com/java-commons-lang-3\r\n  [2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/SerializationUtils.html","title":"How to determine the size of an object in Java","body":"<p>If your application has the <a href=\"https://www.baeldung.com/java-commons-lang-3\" rel=\"nofollow noreferrer\">Apache commons lang library</a> as a dependency or is using the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/SerializationUtils.html\" rel=\"nofollow noreferrer\">Spring framework</a> then you can also use the <code>SerializationUtils</code> class to quickly find out the approximate byte size of any given object.</p>\n<pre><code>byte[] data = SerializationUtils.serialize(user);\nSystem.out.println(&quot;Approximate object size in bytes &quot; + data.length);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":74886,"reputation":26643,"user_id":214977,"accept_rate":69,"display_name":"granadaCoder"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1648669811,"creation_date":1648669811,"answer_id":71683336,"question_id":52353,"body_markdown":"A possible year 2022 answer.\r\n\r\nhttps://github.com/ehcache/sizeof\r\n\r\nhttps://mvnrepository.com/artifact/org.ehcache/sizeof\r\n\r\n\r\n\r\nhttps://mvnrepository.com/artifact/org.ehcache/sizeof/0.4.0\r\n\r\nVersion 0.4.0 has only a (compile) dependency on \r\n\r\n\r\nhttps://mvnrepository.com/artifact/org.slf4j/slf4j-api\r\n\r\nwhich is a good thing.\r\n\r\nSample code:\r\n\r\n    //import org.ehcache.sizeof.SizeOf;\r\n    \r\n    SizeOf sizeOf = SizeOf.newInstance(); // (1)\r\n    long shallowSize = sizeOf.sizeOf(someObject); // (2)\r\n    long deepSize = sizeOf.deepSizeOf(someObject); // (3)\r\n\r\n","title":"How to determine the size of an object in Java","body":"<p>A possible year 2022 answer.</p>\n<p><a href=\"https://github.com/ehcache/sizeof\" rel=\"noreferrer\">https://github.com/ehcache/sizeof</a></p>\n<p><a href=\"https://mvnrepository.com/artifact/org.ehcache/sizeof\" rel=\"noreferrer\">https://mvnrepository.com/artifact/org.ehcache/sizeof</a></p>\n<p><a href=\"https://mvnrepository.com/artifact/org.ehcache/sizeof/0.4.0\" rel=\"noreferrer\">https://mvnrepository.com/artifact/org.ehcache/sizeof/0.4.0</a></p>\n<p>Version 0.4.0 has only a (compile) dependency on</p>\n<p><a href=\"https://mvnrepository.com/artifact/org.slf4j/slf4j-api\" rel=\"noreferrer\">https://mvnrepository.com/artifact/org.slf4j/slf4j-api</a></p>\n<p>which is a good thing.</p>\n<p>Sample code:</p>\n<pre><code>//import org.ehcache.sizeof.SizeOf;\n\nSizeOf sizeOf = SizeOf.newInstance(); // (1)\nlong shallowSize = sizeOf.sizeOf(someObject); // (2)\nlong deepSize = sizeOf.deepSizeOf(someObject); // (3)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3558883,"reputation":1652,"user_id":2971851,"accept_rate":100,"display_name":"Steven Chou"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693976468,"creation_date":1693976468,"answer_id":77049109,"question_id":52353,"body_markdown":"By using Lucene library `org.apache.lucene.util.RamUsageEstimator`\r\n\r\n```xml\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.lucene&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lucene-core&lt;/artifactId&gt;\r\n            &lt;version&gt;8.7.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\nYou&#39;ll be able to measure the memory size of an object by\r\n\r\n    System.out.println(&quot;Object took &quot; \r\n        + RamUsageEstimator.sizeOfObject(yourObj) / 1024 / 1024 + &quot;mb&quot;);\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to determine the size of an object in Java","body":"<p>By using Lucene library <code>org.apache.lucene.util.RamUsageEstimator</code></p>\n<pre class=\"lang-xml prettyprint-override\"><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.lucene&lt;/groupId&gt;\n            &lt;artifactId&gt;lucene-core&lt;/artifactId&gt;\n            &lt;version&gt;8.7.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>You'll be able to measure the memory size of an object by</p>\n<pre><code>System.out.println(&quot;Object took &quot; \n    + RamUsageEstimator.sizeOfObject(yourObj) / 1024 / 1024 + &quot;mb&quot;);\n</code></pre>\n"}],"owner":{"account_id":3517,"reputation":31981,"user_id":5074,"accept_rate":78,"display_name":"Jay R."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":365128,"favorite_count":0,"down_vote_count":2,"up_vote_count":685,"accepted_answer_id":52682,"answer_count":29,"score":683,"last_activity_date":1693976468,"creation_date":1220980023,"question_id":52353,"body_markdown":"I have an application that reads a CSV file with piles of data rows. I give the user a summary of the number of rows based on types of data, but I want to make sure that I don&#39;t read in too many rows of data and cause `OutOfMemoryError`s. Each row translates into an object. Is there a way to find out the size of that object programmatically? Is there a reference that defines how large primitive types and object references are for a `VM`?\r\n\r\nRight now, I have code that says read up to **32,000 rows**, but I&#39;d also like to have code that says read as many rows as possible until I&#39;ve used **32MB** of memory.","title":"How to determine the size of an object in Java","body":"<p>I have an application that reads a CSV file with piles of data rows. I give the user a summary of the number of rows based on types of data, but I want to make sure that I don't read in too many rows of data and cause <code>OutOfMemoryError</code>s. Each row translates into an object. Is there a way to find out the size of that object programmatically? Is there a reference that defines how large primitive types and object references are for a <code>VM</code>?</p>\n<p>Right now, I have code that says read up to <strong>32,000 rows</strong>, but I'd also like to have code that says read as many rows as possible until I've used <strong>32MB</strong> of memory.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":3131299,"reputation":37922,"user_id":2649012,"accept_rate":100,"display_name":"Phant&#244;maxx"},"score":0,"creation_date":1439419763,"post_id":31976602,"comment_id":51859794,"body_markdown":"No. They are completely **ignored** at compile time. Which means **not included**","body":"No. They are completely <b>ignored</b> at compile time. Which means <b>not included</b>"}],"answers":[{"tags":[],"owner":{"account_id":160823,"reputation":3550,"user_id":381161,"display_name":"Malcolm Smith"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1439420578,"creation_date":1439420578,"answer_id":31976852,"question_id":31976602,"body_markdown":"Comments are not preserved in the APK. The APK contains the compiled byte code for the classes in your application and this byte code does not contain source code comments. \r\n\r\nThe byte code does preserve some information about the source code, such as method names, to be used when generating stack traces. This may, or may not include accurate line numbers. See: \r\n\r\nhttps://stackoverflow.com/questions/115008/how-can-we-print-line-numbers-to-the-log-in-java\r\n\r\nhttps://stackoverflow.com/questions/25174761/why-some-stacktrace-do-not-have-line-number-in-java\r\n\r\n","title":"Are comments removed from final apk?","body":"<p>Comments are not preserved in the APK. The APK contains the compiled byte code for the classes in your application and this byte code does not contain source code comments. </p>\n\n<p>The byte code does preserve some information about the source code, such as method names, to be used when generating stack traces. This may, or may not include accurate line numbers. See: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/115008/how-can-we-print-line-numbers-to-the-log-in-java\">How can we print line numbers to the log in java</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/25174761/why-some-stacktrace-do-not-have-line-number-in-java\">Why some stacktrace do not have line number in java</a></p>\n"}],"owner":{"account_id":484049,"reputation":1034,"user_id":899488,"accept_rate":72,"display_name":"Raghav"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1008,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":31976852,"answer_count":1,"score":4,"last_activity_date":1693976323,"creation_date":1439419139,"question_id":31976602,"body_markdown":"If comments in java files are removed as part of apk creation, how the log statements are able to print the correct line number? Could someone please explain? I have seen the same behavior in java files as well when they are compiled.","title":"Are comments removed from final apk?","body":"<p>If comments in java files are removed as part of apk creation, how the log statements are able to print the correct line number? Could someone please explain? I have seen the same behavior in java files as well when they are compiled.</p>\n"},{"tags":["java","android","butterknife"],"comments":[{"owner":{"account_id":23702383,"reputation":23,"user_id":17725388,"display_name":"Nikolai Romanov Belliovichksky"},"score":0,"creation_date":1654009957,"post_id":72417437,"comment_id":127987791,"body_markdown":"Is there a fix?","body":"Is there a fix?"}],"answers":[{"tags":[],"owner":{"account_id":9200398,"reputation":171,"user_id":6837577,"display_name":"Igor Rom&#225;n"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1653781383,"creation_date":1653781383,"answer_id":72419973,"question_id":72417437,"body_markdown":"You don&#39;t have much choice, since in order to continue using ButterKnife you would have to downgrade to an older version of gradle (3.+) and that is no longer possible and would limit you too much.","title":"How to solve this Butterknife dependency error? (in unnamed module @0x67c173dd)","body":"<p>You don't have much choice, since in order to continue using ButterKnife you would have to downgrade to an older version of gradle (3.+) and that is no longer possible and would limit you too much.</p>\n"},{"tags":[],"owner":{"account_id":14943891,"reputation":1727,"user_id":10789722,"display_name":"MEGHA RAMOLIYA"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693974900,"creation_date":1693713093,"answer_id":77030856,"question_id":72417437,"body_markdown":"    In Android studio Flamingo and above version below code working for butterknife library.\r\n    \r\n     1. add below code in build.gradle(:app) file \r\n    \r\n        tasks.withType(JavaCompile).configureEach {\r\n            options.fork = true\r\n            options.forkOptions.jvmArgs += [\r\n                    &#39;--add-opens=jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED&#39;,\r\n                    &#39;--add-opens=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED&#39;,\r\n                    &#39;--add-opens=jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED&#39;,\r\n                    &#39;--add-opens=jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED&#39;,\r\n                    &#39;--add-opens=jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED&#39;,\r\n                    &#39;--add-opens=jdk.compiler/com.sun.tools.javac.model=ALL-UNNAMED&#39;,\r\n                    &#39;--add-opens=jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED&#39;,\r\n                    &#39;--add-opens=jdk.compiler/com.sun.tools.javac.processing=ALL-UNNAMED&#39;,\r\n                    &#39;--add-opens=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED&#39;,\r\n                    &#39;--add-opens=jdk.compiler/com.sun.tools.javac.jvm=ALL-UNNAMED&#39;,\r\n            ]\r\n        }\r\n    \r\n     2. \r\n        android {\r\n          ...\r\n          // Butterknife requires Java 8.\r\n          compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_1_8\r\n            targetCompatibility JavaVersion.VERSION_1_8\r\n          }\r\n        }\r\n        \r\n        dependencies {\r\n          implementation &#39;com.jakewharton:butterknife:10.2.3&#39;\r\n          annotationProcessor &#39;com.jakewharton:butterknife-compiler:10.2.3&#39;\r\n        }\r\n        \r\n         3. To use Butter Knife in a library, add the plugin to your buildscript:\r\n        \r\n        buildscript {\r\n          repositories {\r\n            mavenCentral()\r\n            google()\r\n          }\r\n          dependencies {\r\n            classpath &#39;com.jakewharton:butterknife-gradle-plugin:10.2.3&#39;\r\n          }\r\n        }\r\n        \r\n         4. and then apply it in your module:\r\n        apply plugin: &#39;com.android.library&#39;\r\n        apply plugin: &#39;com.jakewharton.butterknife&#39;\r\n        \r\n         5. Now make sure you use R2 instead of R inside all Butter Knife annotations.\r\n        class ExampleActivity extends Activity {\r\n          @BindView(R2.id.user) EditText username;\r\n          @BindView(R2.id.pass) EditText password;\r\n        ...\r\n        }","title":"How to solve this Butterknife dependency error? (in unnamed module @0x67c173dd)","body":"<pre><code>In Android studio Flamingo and above version below code working for butterknife library.\n\n 1. add below code in build.gradle(:app) file \n\n    tasks.withType(JavaCompile).configureEach {\n        options.fork = true\n        options.forkOptions.jvmArgs += [\n                '--add-opens=jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED',\n                '--add-opens=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED',\n                '--add-opens=jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED',\n                '--add-opens=jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED',\n                '--add-opens=jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED',\n                '--add-opens=jdk.compiler/com.sun.tools.javac.model=ALL-UNNAMED',\n                '--add-opens=jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED',\n                '--add-opens=jdk.compiler/com.sun.tools.javac.processing=ALL-UNNAMED',\n                '--add-opens=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED',\n                '--add-opens=jdk.compiler/com.sun.tools.javac.jvm=ALL-UNNAMED',\n        ]\n    }\n\n 2. \n    android {\n      ...\n      // Butterknife requires Java 8.\n      compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n      }\n    }\n    \n    dependencies {\n      implementation 'com.jakewharton:butterknife:10.2.3'\n      annotationProcessor 'com.jakewharton:butterknife-compiler:10.2.3'\n    }\n    \n     3. To use Butter Knife in a library, add the plugin to your buildscript:\n    \n    buildscript {\n      repositories {\n        mavenCentral()\n        google()\n      }\n      dependencies {\n        classpath 'com.jakewharton:butterknife-gradle-plugin:10.2.3'\n      }\n    }\n    \n     4. and then apply it in your module:\n    apply plugin: 'com.android.library'\n    apply plugin: 'com.jakewharton.butterknife'\n    \n     5. Now make sure you use R2 instead of R inside all Butter Knife annotations.\n    class ExampleActivity extends Activity {\n      @BindView(R2.id.user) EditText username;\n      @BindView(R2.id.pass) EditText password;\n    ...\n    }\n</code></pre>\n"}],"owner":{"account_id":23702383,"reputation":23,"user_id":17725388,"display_name":"Nikolai Romanov Belliovichksky"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2907,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77030856,"answer_count":2,"score":0,"last_activity_date":1693974900,"creation_date":1653755921,"question_id":72417437,"body_markdown":"I used **butterknife** as one of my Dependency in one of my project though I know its deprecated but it&#39;d be a huge work to rewrite the whole code.\r\n\r\n**build.gradle** :\r\n\r\n```\r\nbuildscript {\r\n    repositories {\r\n        maven {\r\n            url &quot;https://jcenter.bintray.com&quot;\r\n        }\r\n\r\n        google()\r\n    }\r\n    dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:7.0.0&#39;\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n        classpath &#39;com.google.gms:google-services:4.3.2&#39;\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        jcenter()\r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n```\r\n\r\n**AndroidManifest.xml** :\r\n\r\n```\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    package=&quot;nikolairb.createpdf&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot;\r\n        tools:ignore=&quot;scopedStorage&quot;/&gt;\r\n\r\n    &lt;uses-feature android:name=&quot;android.hardware.camera&quot; /&gt;\r\n    &lt;uses-feature\r\n        android:name=&quot;android.hardware.camera.autofocus&quot;\r\n        android:required=&quot;false&quot; /&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:name=&quot;androidx.multidex.MultiDexApplication&quot;\r\n        android:allowBackup=&quot;true&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_descriptor&quot;\r\n        android:hardwareAccelerated=&quot;true&quot;\r\n        android:requestLegacyExternalStorage=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:largeHeap=&quot;true&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/AppThemeWhite&quot;\r\n        tools:ignore=&quot;GoogleAppIndexingWarning,RtlEnabled&quot;&gt;\r\n        &lt;activity android:name=&quot;.activity.SplashActivity&quot; android:exported=&quot;true&quot;\r\n            android:theme=&quot;@style/SplashTheme&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n        &lt;activity\r\n            android:name=&quot;com.theartofdev.edmodo.cropper.CropImageActivity&quot;\r\n            android:exported=&quot;true&quot;\r\n            android:theme=&quot;@style/Base.Theme.AppCompat&quot; /&gt;\r\n        &lt;activity\r\n            android:name=&quot;.activity.MainActivity&quot;\r\n            android:exported=&quot;true&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:screenOrientation=&quot;portrait&quot;\r\n            android:windowSoftInputMode=&quot;adjustPan&quot;&gt;\r\n\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.SEND_MULTIPLE&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n\r\n                &lt;data android:mimeType=&quot;image/*&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.SEND&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n\r\n                &lt;data android:mimeType=&quot;image/*&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n\r\n            &lt;meta-data\r\n                android:name=&quot;android.app.shortcuts&quot;\r\n                android:resource=&quot;@xml/shortcuts&quot; /&gt;\r\n        &lt;/activity&gt;\r\n        &lt;activity android:name=&quot;.activity.CropImageActivity&quot; /&gt;\r\n\r\n        &lt;provider\r\n            android:name=&quot;androidx.core.content.FileProvider&quot;\r\n            android:authorities=&quot;com.swati4star.shareFile&quot;\r\n            android:exported=&quot;false&quot;\r\n            android:grantUriPermissions=&quot;true&quot;&gt;\r\n            &lt;meta-data\r\n                android:name=&quot;android.support.FILE_PROVIDER_PATHS&quot;\r\n                android:resource=&quot;@xml/provider_paths&quot; /&gt;\r\n        &lt;/provider&gt;\r\n\r\n        &lt;activity android:name=&quot;.activity.WelcomeActivity&quot; android:exported=&quot;true&quot;/&gt;\r\n        &lt;activity android:name=&quot;.activity.ImageEditor&quot; android:exported=&quot;true&quot; /&gt;\r\n        &lt;activity android:name=&quot;.activity.PreviewActivity&quot; android:exported=&quot;true&quot; /&gt;\r\n        &lt;activity android:name=&quot;.activity.RearrangeImages&quot; android:exported=&quot;true&quot; /&gt;\r\n        &lt;activity android:name=&quot;.activity.ImagesPreviewActivity&quot; android:exported=&quot;true&quot;/&gt;\r\n        &lt;activity android:name=&quot;.activity.RearrangePdfPages&quot;  android:exported=&quot;true&quot;/&gt;\r\n        &lt;activity android:name=&quot;.activity.FavouritesActivity&quot;  android:exported=&quot;true&quot;/&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n\r\n```\r\n\r\nThe **ERROR**:\r\n\r\n*Execution failed for task &#39;:app:compileDebugJavaWithJavac&#39;.*\r\n*&gt; superclass access check failed: class butterknife.compiler.ButterKnifeProcessor$RScanner (in unnamed module @0x67c173dd) cannot access class com.sun.tools.javac.tree.TreeScanner (in module jdk.compiler) because module jdk.compiler does not export com.sun.tools.javac.tree to unnamed module @0x67c173dd*\r\n\r\nTried to update, rebuild project but it didn&#39;t help and please I cannot rewrite the entire project **removing butterknife dependency.**\r\n\r\n","title":"How to solve this Butterknife dependency error? (in unnamed module @0x67c173dd)","body":"<p>I used <strong>butterknife</strong> as one of my Dependency in one of my project though I know its deprecated but it'd be a huge work to rewrite the whole code.</p>\n<p><strong>build.gradle</strong> :</p>\n<pre><code>buildscript {\n    repositories {\n        maven {\n            url &quot;https://jcenter.bintray.com&quot;\n        }\n\n        google()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:7.0.0'\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n        classpath 'com.google.gms:google-services:4.3.2'\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        jcenter()\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<p><strong>AndroidManifest.xml</strong> :</p>\n<pre><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    package=&quot;nikolairb.createpdf&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot;\n        tools:ignore=&quot;scopedStorage&quot;/&gt;\n\n    &lt;uses-feature android:name=&quot;android.hardware.camera&quot; /&gt;\n    &lt;uses-feature\n        android:name=&quot;android.hardware.camera.autofocus&quot;\n        android:required=&quot;false&quot; /&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;\n\n    &lt;application\n        android:name=&quot;androidx.multidex.MultiDexApplication&quot;\n        android:allowBackup=&quot;true&quot;\n        android:fullBackupContent=&quot;@xml/backup_descriptor&quot;\n        android:hardwareAccelerated=&quot;true&quot;\n        android:requestLegacyExternalStorage=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:largeHeap=&quot;true&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/AppThemeWhite&quot;\n        tools:ignore=&quot;GoogleAppIndexingWarning,RtlEnabled&quot;&gt;\n        &lt;activity android:name=&quot;.activity.SplashActivity&quot; android:exported=&quot;true&quot;\n            android:theme=&quot;@style/SplashTheme&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n        &lt;activity\n            android:name=&quot;com.theartofdev.edmodo.cropper.CropImageActivity&quot;\n            android:exported=&quot;true&quot;\n            android:theme=&quot;@style/Base.Theme.AppCompat&quot; /&gt;\n        &lt;activity\n            android:name=&quot;.activity.MainActivity&quot;\n            android:exported=&quot;true&quot;\n            android:label=&quot;@string/app_name&quot;\n            android:screenOrientation=&quot;portrait&quot;\n            android:windowSoftInputMode=&quot;adjustPan&quot;&gt;\n\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.SEND_MULTIPLE&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\n\n                &lt;data android:mimeType=&quot;image/*&quot; /&gt;\n            &lt;/intent-filter&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.SEND&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\n\n                &lt;data android:mimeType=&quot;image/*&quot; /&gt;\n            &lt;/intent-filter&gt;\n\n            &lt;meta-data\n                android:name=&quot;android.app.shortcuts&quot;\n                android:resource=&quot;@xml/shortcuts&quot; /&gt;\n        &lt;/activity&gt;\n        &lt;activity android:name=&quot;.activity.CropImageActivity&quot; /&gt;\n\n        &lt;provider\n            android:name=&quot;androidx.core.content.FileProvider&quot;\n            android:authorities=&quot;com.swati4star.shareFile&quot;\n            android:exported=&quot;false&quot;\n            android:grantUriPermissions=&quot;true&quot;&gt;\n            &lt;meta-data\n                android:name=&quot;android.support.FILE_PROVIDER_PATHS&quot;\n                android:resource=&quot;@xml/provider_paths&quot; /&gt;\n        &lt;/provider&gt;\n\n        &lt;activity android:name=&quot;.activity.WelcomeActivity&quot; android:exported=&quot;true&quot;/&gt;\n        &lt;activity android:name=&quot;.activity.ImageEditor&quot; android:exported=&quot;true&quot; /&gt;\n        &lt;activity android:name=&quot;.activity.PreviewActivity&quot; android:exported=&quot;true&quot; /&gt;\n        &lt;activity android:name=&quot;.activity.RearrangeImages&quot; android:exported=&quot;true&quot; /&gt;\n        &lt;activity android:name=&quot;.activity.ImagesPreviewActivity&quot; android:exported=&quot;true&quot;/&gt;\n        &lt;activity android:name=&quot;.activity.RearrangePdfPages&quot;  android:exported=&quot;true&quot;/&gt;\n        &lt;activity android:name=&quot;.activity.FavouritesActivity&quot;  android:exported=&quot;true&quot;/&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n\n</code></pre>\n<p>The <strong>ERROR</strong>:</p>\n<p><em>Execution failed for task ':app:compileDebugJavaWithJavac'.</em>\n<em>&gt; superclass access check failed: class butterknife.compiler.ButterKnifeProcessor$RScanner (in unnamed module @0x67c173dd) cannot access class com.sun.tools.javac.tree.TreeScanner (in module jdk.compiler) because module jdk.compiler does not export com.sun.tools.javac.tree to unnamed module @0x67c173dd</em></p>\n<p>Tried to update, rebuild project but it didn't help and please I cannot rewrite the entire project <strong>removing butterknife dependency.</strong></p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":74473,"reputation":1561,"user_id":213984,"display_name":"allkenang"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1693974277,"creation_date":1625702238,"answer_id":68294107,"question_id":68293940,"body_markdown":"The issue here is that the request scoped bean is not invoked directly by your controller. \r\n\r\nInstead the controller uses a proxy to invoke the request scoped bean (in this case, the proxy is a cglib one based on your proxy mode annotation, ie: `ScopedProxyMode.TARGET_CLASS`\r\n\r\nThe proxy only wraps around **methods** of the request scoped bean and not it&#39;s **variables**.\r\n\r\nSo in short, encapsulate the instance variable of your request scoped bean into a method and call that method from the Controller.\r\n\r\nsomething like this:\r\n\r\n    @Component\r\n    @Scope(value = WebApplicationContext.SCOPE_REQUEST, proxyMode = ScopedProxyMode.TARGET_CLASS)\r\n    public class UserDataContainer {\r\n    \r\n       private int requestCount = 0;\r\n       public int incrementRequestCount(){\r\n            requestCount++;\r\n            return requestCount;\r\n       }\r\n\r\n       public int getRequestCount(){\r\n             return requestCount;\r\n       }\r\n    } \r\n\r\nthen in your Controller, just invoke the public methods \r\n\r\n    @GetMapping\r\n    public String get(Model model) {\r\n        model.addAttribute(&quot;prev&quot;, userData.getRequestCount());\r\n\r\n        model.addAttribute(&quot;curr&quot;, userData.incrementRequestCount());\r\n        \r\n        return &quot;test&quot;;\r\n    }\r\n\r\n","title":"Spring RequestScope bean not working as expected","body":"<p>The issue here is that the request scoped bean is not invoked directly by your controller.</p>\n<p>Instead the controller uses a proxy to invoke the request scoped bean (in this case, the proxy is a cglib one based on your proxy mode annotation, ie: <code>ScopedProxyMode.TARGET_CLASS</code></p>\n<p>The proxy only wraps around <strong>methods</strong> of the request scoped bean and not it's <strong>variables</strong>.</p>\n<p>So in short, encapsulate the instance variable of your request scoped bean into a method and call that method from the Controller.</p>\n<p>something like this:</p>\n<pre><code>@Component\n@Scope(value = WebApplicationContext.SCOPE_REQUEST, proxyMode = ScopedProxyMode.TARGET_CLASS)\npublic class UserDataContainer {\n\n   private int requestCount = 0;\n   public int incrementRequestCount(){\n        requestCount++;\n        return requestCount;\n   }\n\n   public int getRequestCount(){\n         return requestCount;\n   }\n} \n</code></pre>\n<p>then in your Controller, just invoke the public methods</p>\n<pre><code>@GetMapping\npublic String get(Model model) {\n    model.addAttribute(&quot;prev&quot;, userData.getRequestCount());\n\n    model.addAttribute(&quot;curr&quot;, userData.incrementRequestCount());\n    \n    return &quot;test&quot;;\n}\n</code></pre>\n"}],"owner":{"account_id":9014691,"reputation":23,"user_id":6718005,"display_name":"Chris"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3330,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":68294107,"answer_count":1,"score":2,"last_activity_date":1693974277,"creation_date":1625700159,"question_id":68293940,"body_markdown":"I&#39;m trying to learn more about Spring bean scopes for use in a project.  I&#39;ve created a few test classes, and I am not getting the behavior I&#39;d expect.\r\n\r\nI created the following component, and I would like this bean to last for only the duration of the HTTP request.\r\n\r\n    @Component\r\n    @Scope(value = WebApplicationContext.SCOPE_REQUEST, proxyMode = ScopedProxyMode.TARGET_CLASS)\r\n    public class UserDataContainer {\r\n    \t\r\n    \tpublic int requestCount = 0;\r\n    \r\n    }\r\n\r\nThe following controller uses that component.\r\n\r\n    @Controller\r\n    @RequestMapping(&quot;/hello&quot;)\r\n    public class HelloController {\r\n    \t\r\n    \t@Autowired\r\n    \tprivate UserDataContainer userData;\r\n    \r\n    \t@GetMapping\r\n    \tpublic String get(Model model) {\r\n    \t\tmodel.addAttribute(&quot;prev&quot;, userData.requestCount);\r\n    \t\t\r\n    \t\tuserData.requestCount++;\r\n    \t\t\r\n    \t\tmodel.addAttribute(&quot;curr&quot;, userData.requestCount);\r\n    \t\t\r\n    \t\treturn &quot;test&quot;;\r\n    \t}\r\n    \r\n    }\r\n\r\nMy trouble is, it doesn&#39;t seem that a new instance of UserDataContainer is created for each request.  Whenever I load this page, I see that the values of &quot;prev&quot; and &quot;curr&quot; keep incrementing, instead of resetting to 0 at the start of each request.  Am I misunderstanding how this is supposed to work, or is something not implemented correctly. ","title":"Spring RequestScope bean not working as expected","body":"<p>I'm trying to learn more about Spring bean scopes for use in a project.  I've created a few test classes, and I am not getting the behavior I'd expect.</p>\n<p>I created the following component, and I would like this bean to last for only the duration of the HTTP request.</p>\n<pre><code>@Component\n@Scope(value = WebApplicationContext.SCOPE_REQUEST, proxyMode = ScopedProxyMode.TARGET_CLASS)\npublic class UserDataContainer {\n    \n    public int requestCount = 0;\n\n}\n</code></pre>\n<p>The following controller uses that component.</p>\n<pre><code>@Controller\n@RequestMapping(&quot;/hello&quot;)\npublic class HelloController {\n    \n    @Autowired\n    private UserDataContainer userData;\n\n    @GetMapping\n    public String get(Model model) {\n        model.addAttribute(&quot;prev&quot;, userData.requestCount);\n        \n        userData.requestCount++;\n        \n        model.addAttribute(&quot;curr&quot;, userData.requestCount);\n        \n        return &quot;test&quot;;\n    }\n\n}\n</code></pre>\n<p>My trouble is, it doesn't seem that a new instance of UserDataContainer is created for each request.  Whenever I load this page, I see that the values of &quot;prev&quot; and &quot;curr&quot; keep incrementing, instead of resetting to 0 at the start of each request.  Am I misunderstanding how this is supposed to work, or is something not implemented correctly.</p>\n"},{"tags":["java","android","smali"],"answers":[{"tags":[],"owner":{"account_id":15648916,"reputation":762,"user_id":11290658,"display_name":"yosra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1560947863,"creation_date":1560947863,"answer_id":56667830,"question_id":56631461,"body_markdown":"This worked for me: \r\n\r\nI just had to find the command dx which is located in `~/Android/Sdk/build-tools/$version` on Linux, but first make sure `android-sdk` is installed\r\n(usually located in `~/android/sdk` on Linux) then run dx using \r\n\r\n`./dx --dex --output=classes.dex path_to_source_file.class` if you are in the same directory as `dx`\r\n","title":"Convert .java to .smali","body":"<p>This worked for me: </p>\n\n<p>I just had to find the command dx which is located in <code>~/Android/Sdk/build-tools/$version</code> on Linux, but first make sure <code>android-sdk</code> is installed\n(usually located in <code>~/android/sdk</code> on Linux) then run dx using </p>\n\n<p><code>./dx --dex --output=classes.dex path_to_source_file.class</code> if you are in the same directory as <code>dx</code></p>\n"},{"tags":[],"owner":{"account_id":29366703,"reputation":1,"user_id":22500225,"display_name":"وان فون"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693973899,"creation_date":1693868068,"answer_id":77040947,"question_id":56631461,"body_markdown":"```java\r\npublic final boolean A0H(SharedPreferences sharedPreferences, byte[] bArr) {\r\n    3Hk A06;\r\n    if (A0I(this.A0A.A00(bArr), &quot;client_static_keypair_pwd_enc&quot;) &amp;&amp; (A06 = A06(sharedPreferences)) != null &amp;&amp; Arrays.equals(bArr, A06.A01())) {\r\n        Log.i(&quot;AuthKeyStore/storedAndCanRead/3&quot;);\r\n        return true;\r\n    }\r\n    Log.e(000.A0d(&quot;failed to store and read correct key&quot;, 000.A0n(&quot;EncryptedKeyHelper/reportEncryptedKeyHelperProblem/&quot;)), new RuntimeException());\r\n    return false;\r\n}\r\n```","title":"Convert .java to .smali","body":"<pre class=\"lang-java prettyprint-override\"><code>public final boolean A0H(SharedPreferences sharedPreferences, byte[] bArr) {\n    3Hk A06;\n    if (A0I(this.A0A.A00(bArr), &quot;client_static_keypair_pwd_enc&quot;) &amp;&amp; (A06 = A06(sharedPreferences)) != null &amp;&amp; Arrays.equals(bArr, A06.A01())) {\n        Log.i(&quot;AuthKeyStore/storedAndCanRead/3&quot;);\n        return true;\n    }\n    Log.e(000.A0d(&quot;failed to store and read correct key&quot;, 000.A0n(&quot;EncryptedKeyHelper/reportEncryptedKeyHelperProblem/&quot;)), new RuntimeException());\n    return false;\n}\n</code></pre>\n"}],"owner":{"account_id":15648916,"reputation":762,"user_id":11290658,"display_name":"yosra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":803,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":56667830,"answer_count":2,"score":2,"last_activity_date":1693973899,"creation_date":1560775023,"question_id":56631461,"body_markdown":"As mentioned in the title I am trying to convert a java file into a .smali file, so these are the commands I am trying to launch from Android studio terminal:\r\n\r\n`javac HelloWorld.java`\r\n\r\n`dx --dex --output=classes.dex HelloWorld.class`\r\n\r\n`baksmali classes.dex`\r\n\r\nBut when I launch the second command I get this error:\r\n\r\n&gt;bash: dx : command not found\r\n\r\nAlso, I&#39;ve tried to compile my file directly to smali, by going to: `Build/compile to smali` on Android studio and this is the error I get:\r\n\r\n&gt;Error:Internal error: (java.lang.ClassNotFoundException) com.google.wireless.android.sdk.stats.IntellijIndexingStats$Index\r\njava.lang.ClassNotFoundException: com.google.wireless.android.sdk.stats.IntellijIndexingStats$Index&gt;\r\n&gt;\tat java.net.URLClassLoader.findClass(URLClassLoader.java:381)\r\n&gt;\tat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n&gt;\tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n&gt;\tat com.intellij.util.indexing.counters.IndexCounters.&lt;clinit&gt;(IndexCounters.java:34)\r\n&gt;\tat com.intellij.util.indexing.impl.MapReduceIndex.&lt;init&gt;(MapReduceIndex.java:86)\r\n&gt;\tat org.jetbrains.jps.backwardRefs.index.CompilerReferenceIndex$CompilerMapReduceIndex.&lt;init&gt;(CompilerReferenceIndex.java:214)\r\n&gt;\tat org.jetbrains.jps.backwardRefs.index.CompilerReferenceIndex.&lt;init&gt;(CompilerReferenceIndex.java:73)\r\n&gt;\tat org.jetbrains.jps.backwardRefs.JavaCompilerBackwardReferenceIndex.&lt;init&gt;(JavaCompilerBackwardReferenceIndex.java:12)\r\n&gt;\tat org.jetbrains.jps.backwardRefs.JavaBackwardReferenceIndexWriter.initialize(JavaBackwardReferenceIndexWriter.java:74)\r\n&gt;\tat org.jetbrains.jps.backwardRefs.JavaBackwardReferenceIndexBuilder.buildStarted(JavaBackwardReferenceIndexBuilder.java:40)\r\n&gt;\tat org.jetbrains.jps.incremental.IncProjectBuilder.runBuild(IncProjectBuilder.java:358)\r\n&gt;\tat org.jetbrains.jps.incremental.IncProjectBuilder.build(IncProjectBuilder.java:178)\r\n&gt;\tat org.jetbrains.jps.cmdline.BuildRunner.runBuild(BuildRunner.java:138)\r\n&gt;\tat org.jetbrains.jps.cmdline.BuildSession.runBuild(BuildSession.java:302)\r\n&gt;\tat org.jetbrains.jps.cmdline.BuildSession.run(BuildSession.java:135)\r\n&gt;\tat org.jetbrains.jps.cmdline.BuildMain$MyMessageHandler.lambda$channelRead0$0(BuildMain.java:229)\r\n&gt;\tat org.jetbrains.jps.service.impl.SharedThreadPoolImpl.lambda$executeOnPooledThread$0(SharedThreadPoolImpl.java:42)\r\n&gt;\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n&gt;\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n&gt;\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n&gt;\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n&gt;\tat java.lang.Thread.run(Thread.java:745)\r\n\r\nAny ideas on how I can make this work? or any other tool to convert .java to .smali?","title":"Convert .java to .smali","body":"<p>As mentioned in the title I am trying to convert a java file into a .smali file, so these are the commands I am trying to launch from Android studio terminal:</p>\n\n<p><code>javac HelloWorld.java</code></p>\n\n<p><code>dx --dex --output=classes.dex HelloWorld.class</code></p>\n\n<p><code>baksmali classes.dex</code></p>\n\n<p>But when I launch the second command I get this error:</p>\n\n<blockquote>\n  <p>bash: dx : command not found</p>\n</blockquote>\n\n<p>Also, I've tried to compile my file directly to smali, by going to: <code>Build/compile to smali</code> on Android studio and this is the error I get:</p>\n\n<blockquote>\n  <p>Error:Internal error: (java.lang.ClassNotFoundException) com.google.wireless.android.sdk.stats.IntellijIndexingStats$Index\n  java.lang.ClassNotFoundException: com.google.wireless.android.sdk.stats.IntellijIndexingStats$Index>\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    at com.intellij.util.indexing.counters.IndexCounters.(IndexCounters.java:34)\n    at com.intellij.util.indexing.impl.MapReduceIndex.(MapReduceIndex.java:86)\n    at org.jetbrains.jps.backwardRefs.index.CompilerReferenceIndex$CompilerMapReduceIndex.(CompilerReferenceIndex.java:214)\n    at org.jetbrains.jps.backwardRefs.index.CompilerReferenceIndex.(CompilerReferenceIndex.java:73)\n    at org.jetbrains.jps.backwardRefs.JavaCompilerBackwardReferenceIndex.(JavaCompilerBackwardReferenceIndex.java:12)\n    at org.jetbrains.jps.backwardRefs.JavaBackwardReferenceIndexWriter.initialize(JavaBackwardReferenceIndexWriter.java:74)\n    at org.jetbrains.jps.backwardRefs.JavaBackwardReferenceIndexBuilder.buildStarted(JavaBackwardReferenceIndexBuilder.java:40)\n    at org.jetbrains.jps.incremental.IncProjectBuilder.runBuild(IncProjectBuilder.java:358)\n    at org.jetbrains.jps.incremental.IncProjectBuilder.build(IncProjectBuilder.java:178)\n    at org.jetbrains.jps.cmdline.BuildRunner.runBuild(BuildRunner.java:138)\n    at org.jetbrains.jps.cmdline.BuildSession.runBuild(BuildSession.java:302)\n    at org.jetbrains.jps.cmdline.BuildSession.run(BuildSession.java:135)\n    at org.jetbrains.jps.cmdline.BuildMain$MyMessageHandler.lambda$channelRead0$0(BuildMain.java:229)\n    at org.jetbrains.jps.service.impl.SharedThreadPoolImpl.lambda$executeOnPooledThread$0(SharedThreadPoolImpl.java:42)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)</p>\n</blockquote>\n\n<p>Any ideas on how I can make this work? or any other tool to convert .java to .smali?</p>\n"},{"tags":["java","mysql","mysql-8.0"],"comments":[{"owner":{"account_id":317817,"reputation":2514,"user_id":634698,"accept_rate":11,"display_name":"Thallius"},"score":1,"creation_date":1687435732,"post_id":76531689,"comment_id":134938319,"body_markdown":"Are you sure the table studquesattemptbo (what a cruel name. no one can imagine what this table is good for) is existing in the database &quot;latest&quot;?","body":"Are you sure the table studquesattemptbo (what a cruel name. no one can imagine what this table is good for) is existing in the database &quot;latest&quot;?"},{"owner":{"account_id":26398340,"reputation":11,"user_id":20049137,"display_name":"rob"},"score":0,"creation_date":1687491047,"post_id":76531689,"comment_id":134947360,"body_markdown":"yes it exist in db","body":"yes it exist in db"},{"owner":{"account_id":26398340,"reputation":11,"user_id":20049137,"display_name":"rob"},"score":0,"creation_date":1687519589,"post_id":76531689,"comment_id":134951834,"body_markdown":"@Thallius i have edited my question if possible can you please provide any inputs","body":"@Thallius i have edited my question if possible can you please provide any inputs"}],"answers":[{"tags":[],"owner":{"account_id":26398340,"reputation":11,"user_id":20049137,"display_name":"rob"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687925492,"creation_date":1687925492,"answer_id":76569981,"question_id":76531689,"body_markdown":"instead of changing the query to native query use &quot;`Pageable firstRecord = PageRequest.of(0, 1);`&quot; and pass this in the parameter of the method call","title":"issue in running the mysql query","body":"<p>instead of changing the query to native query use &quot;<code>Pageable firstRecord = PageRequest.of(0, 1);</code>&quot; and pass this in the parameter of the method call</p>\n"}],"owner":{"account_id":26398340,"reputation":11,"user_id":20049137,"display_name":"rob"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":76569981,"answer_count":1,"score":-2,"last_activity_date":1693973336,"creation_date":1687435434,"question_id":76531689,"body_markdown":"Query: -\r\n\r\n    @Query(value=&quot;select sqla.questionBO from StudBO sqla where sqa.questionBO.id != null and sqa.lessionId = :lessionId and sqa.studentBO.id=:studentId ORDER BY sqa.attemptedOn DESC limit 1&quot;, nativeQuery=true)\r\n    \tList&lt;QuestionBO&gt; getSQues(@Param(&quot;studentId&quot;) Long studentId,\r\n    \t\t\t@Param(&quot;lessionId&quot;) Long lessionId);\r\n\r\nI&#39;m upgrading my MySQL from v5 to v8 earlier I was not using nativeQuery = true variable and it was working fine, but I think now I have to use native Query as I&#39;m using the limit function.\r\n\r\nIf I don&#39;t use nativeQuery then I get &quot;`antlr.NoViableAltException: unexpected token: limit`&quot;\r\nerror at tomcat startup.\r\n\r\nBut when I use nativeQuery I get the table not found error &quot;`ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - Table &#39;latest.studquesattemptbo&#39; doesn&#39;t exist`&quot; when this method is called.\r\n\r\nI checked my.ini file and there &quot;lower_case_table_names=1&quot; is already present as pointed in this link &quot;https://knowledge.broadcom.com/external/article/47334/enterprise-dashboard-error-sqlexceptionh.html&quot;\r\n\r\nEdit1:- \r\nits BO.\r\n\r\n   \r\n\r\n     @Table(name = &quot;student_question_attempt&quot;)\r\n        public class StudQuesAttemptBO implements Serializable {\r\n    @Column(name = &quot;ATTEMPTED_ON&quot;)\r\n        private Timestamp attemptedOn;\r\n    \r\n        //@Column(name = &quot;STUDENT_ID&quot;)\r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;STUDENT_ID&quot;)\r\n        private StudentBO studentBO;\r\n    \r\n       // @Column(name = &quot;QUESTION_ID&quot;)\r\n        @ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;QUESTION_ID&quot;)\r\n        private QuestionBO questionBO;\r\n        \r\n        @Column(name = &quot;SCORE&quot;)\r\n        private Double score;\r\n        \r\n        @Column(name = &quot;LESSION_ID&quot;)\r\n        private Long lessionId;\r\n\r\nEdit2:-\r\n\r\nif i use table name instead of BO then getting:-\r\n\r\n    ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - Unknown column &#39;sqla.questionBO&#39; in &#39;field list&#39;\r\n\r\n\r\n\r\n","title":"issue in running the mysql query","body":"<p>Query: -</p>\n<pre><code>@Query(value=&quot;select sqla.questionBO from StudBO sqla where sqa.questionBO.id != null and sqa.lessionId = :lessionId and sqa.studentBO.id=:studentId ORDER BY sqa.attemptedOn DESC limit 1&quot;, nativeQuery=true)\n    List&lt;QuestionBO&gt; getSQues(@Param(&quot;studentId&quot;) Long studentId,\n            @Param(&quot;lessionId&quot;) Long lessionId);\n</code></pre>\n<p>I'm upgrading my MySQL from v5 to v8 earlier I was not using nativeQuery = true variable and it was working fine, but I think now I have to use native Query as I'm using the limit function.</p>\n<p>If I don't use nativeQuery then I get &quot;<code>antlr.NoViableAltException: unexpected token: limit</code>&quot;\nerror at tomcat startup.</p>\n<p>But when I use nativeQuery I get the table not found error &quot;<code>ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - Table 'latest.studquesattemptbo' doesn't exist</code>&quot; when this method is called.</p>\n<p>I checked my.ini file and there &quot;lower_case_table_names=1&quot; is already present as pointed in this link &quot;https://knowledge.broadcom.com/external/article/47334/enterprise-dashboard-error-sqlexceptionh.html&quot;</p>\n<p>Edit1:-\nits BO.</p>\n<pre><code> @Table(name = &quot;student_question_attempt&quot;)\n    public class StudQuesAttemptBO implements Serializable {\n@Column(name = &quot;ATTEMPTED_ON&quot;)\n    private Timestamp attemptedOn;\n\n    //@Column(name = &quot;STUDENT_ID&quot;)\n    @ManyToOne\n    @JoinColumn(name = &quot;STUDENT_ID&quot;)\n    private StudentBO studentBO;\n\n   // @Column(name = &quot;QUESTION_ID&quot;)\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;QUESTION_ID&quot;)\n    private QuestionBO questionBO;\n    \n    @Column(name = &quot;SCORE&quot;)\n    private Double score;\n    \n    @Column(name = &quot;LESSION_ID&quot;)\n    private Long lessionId;\n</code></pre>\n<p>Edit2:-</p>\n<p>if i use table name instead of BO then getting:-</p>\n<pre><code>ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - Unknown column 'sqla.questionBO' in 'field list'\n</code></pre>\n"},{"tags":["java","ffmpeg","terminal","command","processbuilder"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1688143150,"post_id":76590686,"comment_id":135039207,"body_markdown":"Please use [code format](https://stackoverflow.com/editing-help#code) for code, errors and logs.","body":"Please use <a href=\"https://stackoverflow.com/editing-help#code\">code format</a> for code, errors and logs."},{"owner":{"account_id":28926501,"reputation":1,"user_id":22156283,"display_name":"Ansh Gupta"},"score":0,"creation_date":1688192388,"post_id":76590686,"comment_id":135043918,"body_markdown":"@user16320675 yes they are needed","body":"@user16320675 yes they are needed"},{"owner":{"account_id":28926501,"reputation":1,"user_id":22156283,"display_name":"Ansh Gupta"},"score":0,"creation_date":1688192669,"post_id":76590686,"comment_id":135043942,"body_markdown":"@user16320675 ffmpeg -i left.mp3 -i right.mp3 -filter_complex &quot;[0]apad[a];[a][1]amerge[aout]&quot; -map &quot;[aout]&quot; output.mp3","body":"@user16320675 ffmpeg -i left.mp3 -i right.mp3 -filter_complex &quot;[0]apad[a];[a][1]amerge[aout]&quot; -map &quot;[aout]&quot; output.mp3"},{"owner":{"account_id":28926501,"reputation":1,"user_id":22156283,"display_name":"Ansh Gupta"},"score":0,"creation_date":1688192706,"post_id":76590686,"comment_id":135043949,"body_markdown":"@user16320675 this is the command and left.mp3 and right.mp3 are the audio files","body":"@user16320675 this is the command and left.mp3 and right.mp3 are the audio files"},{"owner":{"account_id":28926501,"reputation":1,"user_id":22156283,"display_name":"Ansh Gupta"},"score":0,"creation_date":1688192921,"post_id":76590686,"comment_id":135043964,"body_markdown":"@user16320675 https://ffmpeg.org/ffmpeg.html this the documentation and i tried after removing the quotes also, that is not a working command prompt","body":"@user16320675 <a href=\"https://ffmpeg.org/ffmpeg.html\" rel=\"nofollow noreferrer\">ffmpeg.org/ffmpeg.html</a> this the documentation and i tried after removing the quotes also, that is not a working command prompt"},{"owner":{"account_id":28926501,"reputation":1,"user_id":22156283,"display_name":"Ansh Gupta"},"score":0,"creation_date":1688193392,"post_id":76590686,"comment_id":135044001,"body_markdown":"@user16320675 can you tell me the correct way to write this","body":"@user16320675 can you tell me the correct way to write this"},{"owner":{"account_id":28926501,"reputation":1,"user_id":22156283,"display_name":"Ansh Gupta"},"score":0,"creation_date":1688193412,"post_id":76590686,"comment_id":135044003,"body_markdown":"@user16320675     /*\n       Mix multiple single channel audio files to give a single file, in MULTIPLE CHANNEL (STEREO),\n       files can be of different length but starting point will be same, the duration of output will be the duration of longest input file.\n       file1  : 1111111111111111111111111\n       file2  : 2222222222222\n       Output : XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX where X = [1,2] combination of audios\n       Command : ffmpeg -i left.mp3 -i right.mp3 -filter_complex &quot;[0]apad[a];[a][1]amerge[aout]&quot; -map &quot;[aout]&quot; output.mp3\n   */ this the task i want to do","body":"@user16320675     /*        Mix multiple single channel audio files to give a single file, in MULTIPLE CHANNEL (STEREO),        files can be of different length but starting point will be same, the duration of output will be the duration of longest input file.        file1  : 1111111111111111111111111        file2  : 2222222222222        Output : XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX where X = [1,2] combination of audios        Command : ffmpeg -i left.mp3 -i right.mp3 -filter_complex &quot;[0]apad[a];[a][1]amerge[aout]&quot; -map &quot;[aout]&quot; output.mp3    */ this the task i want to do"},{"owner":{"account_id":28926501,"reputation":1,"user_id":22156283,"display_name":"Ansh Gupta"},"score":0,"creation_date":1688197218,"post_id":76590686,"comment_id":135044303,"body_markdown":"@user16320675 can you please send your code","body":"@user16320675 can you please send your code"}],"owner":{"account_id":28926501,"reputation":1,"user_id":22156283,"display_name":"Ansh Gupta"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":149,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693972365,"creation_date":1688142036,"question_id":76590686,"body_markdown":"not able run this coomand \r\n\r\n\r\n\r\n        List&lt;String&gt; command= new ArrayList&lt;&gt;();\r\n        command.add(&quot;ffmpeg&quot;);\r\n        command.add(&quot;-i&quot;);\r\n        command.add(file1Path);\r\n        command.add(&quot;-i&quot;);\r\n        command.add(file2Path);\r\n        command.add(&quot;-filter_complex&quot;);\r\n        command.add(&quot;\\&quot;[0]apad[a];[a][1]amerge[aout]\\&quot;&quot;);\r\n        command.add(&quot;-map&quot;);\r\n        command.add(&quot;\\&quot;[aout]\\&quot;&quot;);\r\n        command.add(outputFilePath);\r\nProcessBuilder processBuilder = new ProcessBuilder(command);\r\nProcess process = processBuilder.start();\r\n\r\n\r\n\r\n\r\nerror   Stream #1:0: Audio: pcm_s16le ([1][0][0][0] / 0x0001), 8000 Hz, 1 channels, s16, 128 kb/s\r\n[AVFilterGraph @ 0x7f9dd8d05cc0] Trailing garbage after a filter: apad[a];[a][1]amerge[aout]&quot;\r\n[AVFilterGraph @ 0x7f9dd8d05cc0] Error parsing filterchain &#39;&quot;[0]apad[a];[a][1]amerge[aout]&quot;&#39; around: apad[a];[a][1]amerge[aout]&quot;\r\n\r\n\r\n\r\nHow to resolve \r\n\r\nI want to run this command which is basically merging two mono audio file to stereo ","title":"How to resolve this filter Processbuilder error?","body":"<p>not able run this coomand</p>\n<pre><code>    List&lt;String&gt; command= new ArrayList&lt;&gt;();\n    command.add(&quot;ffmpeg&quot;);\n    command.add(&quot;-i&quot;);\n    command.add(file1Path);\n    command.add(&quot;-i&quot;);\n    command.add(file2Path);\n    command.add(&quot;-filter_complex&quot;);\n    command.add(&quot;\\&quot;[0]apad[a];[a][1]amerge[aout]\\&quot;&quot;);\n    command.add(&quot;-map&quot;);\n    command.add(&quot;\\&quot;[aout]\\&quot;&quot;);\n    command.add(outputFilePath);\n</code></pre>\n<p>ProcessBuilder processBuilder = new ProcessBuilder(command);\nProcess process = processBuilder.start();</p>\n<p>error   Stream #1:0: Audio: pcm_s16le ([1][0][0][0] / 0x0001), 8000 Hz, 1 channels, s16, 128 kb/s\n[AVFilterGraph @ 0x7f9dd8d05cc0] Trailing garbage after a filter: apad[a];[a][1]amerge[aout]&quot;\n[AVFilterGraph @ 0x7f9dd8d05cc0] Error parsing filterchain '&quot;[0]apad[a];[a][1]amerge[aout]&quot;' around: apad[a];[a][1]amerge[aout]&quot;</p>\n<p>How to resolve</p>\n<p>I want to run this command which is basically merging two mono audio file to stereo</p>\n"},{"tags":["java","math","hex","integer-arithmetic"],"comments":[{"owner":{"account_id":3902605,"reputation":6480,"user_id":3230038,"accept_rate":68,"display_name":"Leo"},"score":2,"creation_date":1411163945,"post_id":25942910,"comment_id":40616026,"body_markdown":"you can start from Integer.parseInt(s, radix) source code","body":"you can start from Integer.parseInt(s, radix) source code"}],"answers":[{"tags":[],"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1693971605,"creation_date":1411163998,"answer_id":25942972,"question_id":25942910,"body_markdown":"That&#39;s just integers with a radix of 20 (base 20).  \r\n\r\nRemember the difference between the _value_ (an abstract concept) and its _representation_.  You care about representation only on input and output.  When you input values they will be represented in base-20, and you want to output them in base-20.  As long as that interface is satisfied, how the numbers are represented inside your code shouldn&#39;t matter, so you should use the most convenient representation for the range you need to cover (int, long or BigInteger).\r\n\r\nJava already has all the necessary infrastructure to deal with this. Check out the `Integer.parseInt(String value, int radix)` for input.  For output there&#39;s `Integer.toString(int value, int radix)`","title":"Implement custom Arithmetic System","body":"<p>That's just integers with a radix of 20 (base 20).</p>\n<p>Remember the difference between the <em>value</em> (an abstract concept) and its <em>representation</em>.  You care about representation only on input and output.  When you input values they will be represented in base-20, and you want to output them in base-20.  As long as that interface is satisfied, how the numbers are represented inside your code shouldn't matter, so you should use the most convenient representation for the range you need to cover (int, long or BigInteger).</p>\n<p>Java already has all the necessary infrastructure to deal with this. Check out the <code>Integer.parseInt(String value, int radix)</code> for input.  For output there's <code>Integer.toString(int value, int radix)</code></p>\n"}],"owner":{"account_id":4849399,"reputation":389,"user_id":3912134,"display_name":"g7k"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":163,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":25942972,"answer_count":1,"score":4,"last_activity_date":1693971605,"creation_date":1411163642,"question_id":25942910,"body_markdown":"I need to implement a custom integer arithmetic system, like Hexadecimal but with 4 more letters.  \r\n  \r\nFor example, Hexadecimal uses `[0-9,A-F]` to represent a number. Mine will use `[0-9,A-J]`.  \r\n\r\n    Sample representations:  \r\n    Decimal(5): Hex(5), MySystem(5)\r\n    Decimal(15): Hex(F), MySystem(F)\r\n    Decimal(16): Hex(10), MySystem(G)\r\n    Decimal(17): Hex(11), MySystem(H)\r\n    Decimal(18): Hex(12), MySystem(I)\r\n    Decimal(19): Hex(13), MySystem(J)\r\n    Decimal(20): Hex(14), MySystem(10)\r\n    ...\r\n  \r\nI cannot decide if i should store numbers as `String` or as `BigInteger`.  \r\nIt would really help if you could point me to somewhere where i could read how Hex is implemented in code. So far, i have only been able to find implementations only for conversions from/to other arithmetic systems.","title":"Implement custom Arithmetic System","body":"<p>I need to implement a custom integer arithmetic system, like Hexadecimal but with 4 more letters.</p>\n<p>For example, Hexadecimal uses <code>[0-9,A-F]</code> to represent a number. Mine will use <code>[0-9,A-J]</code>.</p>\n<pre><code>Sample representations:  \nDecimal(5): Hex(5), MySystem(5)\nDecimal(15): Hex(F), MySystem(F)\nDecimal(16): Hex(10), MySystem(G)\nDecimal(17): Hex(11), MySystem(H)\nDecimal(18): Hex(12), MySystem(I)\nDecimal(19): Hex(13), MySystem(J)\nDecimal(20): Hex(14), MySystem(10)\n...\n</code></pre>\n<p>I cannot decide if i should store numbers as <code>String</code> or as <code>BigInteger</code>.<br />\nIt would really help if you could point me to somewhere where i could read how Hex is implemented in code. So far, i have only been able to find implementations only for conversions from/to other arithmetic systems.</p>\n"},{"tags":["java","junit","mockito"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1693969163,"post_id":77048640,"comment_id":135828375,"body_markdown":"The code in the question doesn&#39;t compile, or even make any sense (for example, if `getCacheBuilder` is `static`, why is it called on an _instance_ of `cacheSystemToCacheManagerProvider` retrieved from the non-existent `getCacheSystemToCacheManagerProvider` method?) You&#39;ll need to provide a working [mre] to get the help you need.","body":"The code in the question doesn&#39;t compile, or even make any sense (for example, if <code>getCacheBuilder</code> is <code>static</code>, why is it called on an <i>instance</i> of <code>cacheSystemToCacheManagerProvider</code> retrieved from the non-existent <code>getCacheSystemToCacheManagerProvider</code> method?) You&#39;ll need to provide a working <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to get the help you need."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1693969917,"post_id":77048640,"comment_id":135828433,"body_markdown":"Although, looking again, the call to `new CommonCaffeineCacheBuilder()` happens in a static initialiser that will execute as soon as the `CacheSystemToCacheManagerProvider` class is loaded, before there is an opportunity to mock it. I would recommend refactoring to avoid the use of `static` here, and make `CacheSystemToCacheManagerProvider` an interface that can be mocked easily.","body":"Although, looking again, the call to <code>new CommonCaffeineCacheBuilder()</code> happens in a static initialiser that will execute as soon as the <code>CacheSystemToCacheManagerProvider</code> class is loaded, before there is an opportunity to mock it. I would recommend refactoring to avoid the use of <code>static</code> here, and make <code>CacheSystemToCacheManagerProvider</code> an interface that can be mocked easily."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1693971652,"post_id":77048640,"comment_id":135828539,"body_markdown":"Note that after the edit, this is still not a working example. Please ensure that code you post in your question compiles.","body":"Note that after the edit, this is still not a working example. Please ensure that code you post in your question compiles."}],"answers":[{"tags":[],"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693971277,"creation_date":1693971277,"answer_id":77048877,"question_id":77048640,"body_markdown":"The call to `new CommonCaffeineCacheBuilder()` doesn&#39;t happen when the `getCacheBuilder` is executed. It happens before that point, in a static initializer that is executed as soon as the `CacheSystemToCacheManagerProvider` class is loaded. This necessarily happens before there is an opportunity to mock it.\r\n\r\nA better design would make the `CacheSystemToCacheManagerProvider` _substitutable_ in `MyMainClass`, allowing it to be mocked more easily:\r\n\r\n```java\r\npublic class MyMainClass{\r\n    private final CacheSystemToCacheManagerProvider cacheSystemToCacheManagerProvider;\r\n\r\n    public MyMainClass(CacheSystemToCacheManagerProvider cacheSystemToCacheManagerProvider) {\r\n        this.cacheSystemToCacheManagerProvider = cacheSystemToCacheManagerProvider;\r\n    }\r\n\r\n    public String myLogic(CacheInformation cacheInformation){\r\n        return getRemoteCacheManager(cacheInformation).getValueForKey(&quot;some string&quot;);\r\n    }\r\n\r\n    public RemoteCacheManager getRemoteCacheManager(CacheInformation cacheInformation) {\r\n        GenericCacheBuilder&lt;?&gt; genericCacheBuilder = cacheSystemToCacheManagerProvider\r\n                .getCacheBuilder(cacheInformation.getRemoteCachePreference());\r\n        return (RemoteCacheManager) genericCacheBuilder.buildCacheManager(cacheInformation);\r\n    }\r\n}\r\n```\r\n\r\n```java\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\nimport static org.mockito.ArgumentMatchers.any;\r\nimport static org.mockito.Mockito.mock;\r\nimport static org.mockito.Mockito.when;\r\n\r\npublic class TestMyMainClass {\r\n    @Test\r\n    public void myLogicTest() {\r\n        var mockCacheSystemToCacheManagerProvider = mock(CacheSystemToCacheManagerProvider.class);\r\n        var mockCacheBuilder = mock(GenericCacheBuilder.class);\r\n        var mockCacheManager = mock(RemoteCacheManager.class);\r\n        var mockCacheInformation = mock(CacheInformation.class);\r\n\r\n        when(mockCacheSystemToCacheManagerProvider.getCacheBuilder(any())).thenReturn(mockCacheBuilder);\r\n        when(mockCacheBuilder.buildCacheManager(any())).thenReturn(mockCacheManager);\r\n        when(mockCacheManager.getValueForKey(&quot;some string&quot;)).thenReturn(&quot;some value&quot;);\r\n\r\n        MyMainClass myMainClass = new MyMainClass(mockCacheSystemToCacheManagerProvider);\r\n        assertEquals(&quot;some value&quot;, myMainClass.myLogic(mockCacheInformation));\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe key is to make `CacheSystemToCacheManagerProvider` an _interface_:\r\n\r\n```java\r\npublic interface CacheSystemToCacheManagerProvider {\r\n    GenericCacheBuilder&lt;?&gt; getCacheBuilder(AllowedCacheSystem system);\r\n}\r\n```\r\n\r\nWith an _implementation_ that uses the real cache providers:\r\n\r\n```java\r\npublic class StandardCacheSystemToCacheManagerProvider implements CacheSystemToCacheManagerProvider {\r\n\r\n    private final ImmutableMap&lt;AllowedCacheSystem, GenericCacheBuilder&lt;?&gt;&gt; CACHE_SYSTEM_TO_CACHE_BUILDER_MAP =\r\n            ImmutableMap.&lt;AllowedCacheSystem, GenericCacheBuilder&lt;?&gt;&gt;builder()\r\n                    .put(AllowedLocalCacheSystem.COMMON_CAFFEINE, new CommonCaffeineCacheBuilder())\r\n                    .put(AllowedRemoteCacheSystem.COMMON_REDIS, new CommonRedisCacheBuilder())\r\n                    .build();\r\n\r\n\r\n    @Override\r\n    public GenericCacheBuilder&lt;?&gt; getCacheBuilder(AllowedCacheSystem cacheSystem) {\r\n        return CACHE_SYSTEM_TO_CACHE_BUILDER_MAP.get(cacheSystem);\r\n    }\r\n}\r\n```\r\n\r\nThis ensures that the creation of of `CommonCaffeineCacheBuilder` and `CommonRedisCacheBuilder` instances will not happen in the test.","title":"Mocking static method is not working as expected in java","body":"<p>The call to <code>new CommonCaffeineCacheBuilder()</code> doesn't happen when the <code>getCacheBuilder</code> is executed. It happens before that point, in a static initializer that is executed as soon as the <code>CacheSystemToCacheManagerProvider</code> class is loaded. This necessarily happens before there is an opportunity to mock it.</p>\n<p>A better design would make the <code>CacheSystemToCacheManagerProvider</code> <em>substitutable</em> in <code>MyMainClass</code>, allowing it to be mocked more easily:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyMainClass{\n    private final CacheSystemToCacheManagerProvider cacheSystemToCacheManagerProvider;\n\n    public MyMainClass(CacheSystemToCacheManagerProvider cacheSystemToCacheManagerProvider) {\n        this.cacheSystemToCacheManagerProvider = cacheSystemToCacheManagerProvider;\n    }\n\n    public String myLogic(CacheInformation cacheInformation){\n        return getRemoteCacheManager(cacheInformation).getValueForKey(&quot;some string&quot;);\n    }\n\n    public RemoteCacheManager getRemoteCacheManager(CacheInformation cacheInformation) {\n        GenericCacheBuilder&lt;?&gt; genericCacheBuilder = cacheSystemToCacheManagerProvider\n                .getCacheBuilder(cacheInformation.getRemoteCachePreference());\n        return (RemoteCacheManager) genericCacheBuilder.buildCacheManager(cacheInformation);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import org.junit.jupiter.api.Test;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.mockito.ArgumentMatchers.any;\nimport static org.mockito.Mockito.mock;\nimport static org.mockito.Mockito.when;\n\npublic class TestMyMainClass {\n    @Test\n    public void myLogicTest() {\n        var mockCacheSystemToCacheManagerProvider = mock(CacheSystemToCacheManagerProvider.class);\n        var mockCacheBuilder = mock(GenericCacheBuilder.class);\n        var mockCacheManager = mock(RemoteCacheManager.class);\n        var mockCacheInformation = mock(CacheInformation.class);\n\n        when(mockCacheSystemToCacheManagerProvider.getCacheBuilder(any())).thenReturn(mockCacheBuilder);\n        when(mockCacheBuilder.buildCacheManager(any())).thenReturn(mockCacheManager);\n        when(mockCacheManager.getValueForKey(&quot;some string&quot;)).thenReturn(&quot;some value&quot;);\n\n        MyMainClass myMainClass = new MyMainClass(mockCacheSystemToCacheManagerProvider);\n        assertEquals(&quot;some value&quot;, myMainClass.myLogic(mockCacheInformation));\n    }\n\n}\n</code></pre>\n<p>The key is to make <code>CacheSystemToCacheManagerProvider</code> an <em>interface</em>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface CacheSystemToCacheManagerProvider {\n    GenericCacheBuilder&lt;?&gt; getCacheBuilder(AllowedCacheSystem system);\n}\n</code></pre>\n<p>With an <em>implementation</em> that uses the real cache providers:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class StandardCacheSystemToCacheManagerProvider implements CacheSystemToCacheManagerProvider {\n\n    private final ImmutableMap&lt;AllowedCacheSystem, GenericCacheBuilder&lt;?&gt;&gt; CACHE_SYSTEM_TO_CACHE_BUILDER_MAP =\n            ImmutableMap.&lt;AllowedCacheSystem, GenericCacheBuilder&lt;?&gt;&gt;builder()\n                    .put(AllowedLocalCacheSystem.COMMON_CAFFEINE, new CommonCaffeineCacheBuilder())\n                    .put(AllowedRemoteCacheSystem.COMMON_REDIS, new CommonRedisCacheBuilder())\n                    .build();\n\n\n    @Override\n    public GenericCacheBuilder&lt;?&gt; getCacheBuilder(AllowedCacheSystem cacheSystem) {\n        return CACHE_SYSTEM_TO_CACHE_BUILDER_MAP.get(cacheSystem);\n    }\n}\n</code></pre>\n<p>This ensures that the creation of of <code>CommonCaffeineCacheBuilder</code> and <code>CommonRedisCacheBuilder</code> instances will not happen in the test.</p>\n"}],"owner":{"account_id":4651430,"reputation":1022,"user_id":3768218,"accept_rate":67,"display_name":"Jeya Kumar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693971277,"creation_date":1693966010,"question_id":77048640,"body_markdown":"I have a class\r\n\r\n    public class MyMainClass{\r\n        \r\n        public void mainLogic(){\r\n         handleEvictedKeys( key, value, removalCause)\r\n    }\r\n    \r\n        private void handleEvictedKeys(final Object key, final Object value, final RemovalCause removalCause) {\r\n            if (removalCause.equals(RemovalCause.SIZE)) {\r\n                remote.setOrReplaceValueForKey((String) key, (Map&lt;String, String&gt;) value);\r\n            } else {\r\n                log.warn(&quot;Key {} and Value {} was evicted from cache for theme {} for the reason {}&quot;, key, value,\r\n                    cacheInformation.getThemeName(), removalCause);\r\n            }\r\n        }\r\n\r\n            GenericCacheBuilder genericCacheBuilder = CacheSystemToCacheManagerProvider\r\n                .getCacheBuilder(cacheInformation.getRemoteCachePreference());\r\n            return (RemoteCacheManager) genericCacheBuilder.buildCacheManager(cacheInformation);\r\n        }\r\n    }\r\n\r\nMy remote provider\r\n\r\n    public class CacheSystemToCacheManagerProvider {\r\n    \r\n            private static final ImmutableMap&lt;AllowedCacheSystem, GenericCacheBuilder&lt;?&gt;&gt; CACHE_SYSTEM_TO_CACHE_BUILDER_MAP =\r\n                ImmutableMap.&lt;AllowedCacheSystem, GenericCacheBuilder&lt;?&gt;&gt;builder()\r\n                    .put(AllowedLocalCacheSystem.COMMON_CAFFEINE, new CommonCaffeineCacheBuilder())\r\n                    .put(AllowedRemoteCacheSystem.COMMON_REDIS, new CommonRedisCacheBuilder())\r\n                    .build();\r\n        \r\n        \r\n            public static GenericCacheBuilder getCacheBuilder(AllowedCacheSystem cacheSystem) {\r\n                return CACHE_SYSTEM_TO_CACHE_BUILDER_MAP.get(cacheSystem);\r\n            }\r\n        }\r\n\r\n\r\n\r\n\r\nWhen i try to write unit test for MyMainClass\r\n\r\n    public class TestMyMainClass(){\r\n    \r\n\r\n    //all dependencies\r\n    @InjectMocks\r\n    public MyMainClass mtestClass;\r\n\r\n    public void mymainLogic(){\r\n\r\n            cacheSystemToCacheManagerProviderStatic = Mockito.mockStatic(CacheSystemToCacheManagerProvider.class);\r\n            cacheSystemToCacheManagerProviderStatic.when(\r\n                    CacheSystemToCacheManagerProvider::getCacheBuilder)\r\n                .thenReturn(getCacheBuilderMock);\r\n    mtestClass.handleEvictedKeys(a,b,c)\r\n    }\r\n    \r\n    }\r\n\r\n\r\nI am trying to mock the call CacheSystemToCacheManagerProvider.getCacheBuilder() however this is making actual call and trying to create instance of `new CommonCaffeineCacheBuilder()` this pulls lot of dependencies and breaking UT.\r\n\r\nHow to mock this static call correctly\r\n\r\n\r\n","title":"Mocking static method is not working as expected in java","body":"<p>I have a class</p>\n<pre><code>public class MyMainClass{\n    \n    public void mainLogic(){\n     handleEvictedKeys( key, value, removalCause)\n}\n\n    private void handleEvictedKeys(final Object key, final Object value, final RemovalCause removalCause) {\n        if (removalCause.equals(RemovalCause.SIZE)) {\n            remote.setOrReplaceValueForKey((String) key, (Map&lt;String, String&gt;) value);\n        } else {\n            log.warn(&quot;Key {} and Value {} was evicted from cache for theme {} for the reason {}&quot;, key, value,\n                cacheInformation.getThemeName(), removalCause);\n        }\n    }\n\n        GenericCacheBuilder genericCacheBuilder = CacheSystemToCacheManagerProvider\n            .getCacheBuilder(cacheInformation.getRemoteCachePreference());\n        return (RemoteCacheManager) genericCacheBuilder.buildCacheManager(cacheInformation);\n    }\n}\n</code></pre>\n<p>My remote provider</p>\n<pre><code>public class CacheSystemToCacheManagerProvider {\n\n        private static final ImmutableMap&lt;AllowedCacheSystem, GenericCacheBuilder&lt;?&gt;&gt; CACHE_SYSTEM_TO_CACHE_BUILDER_MAP =\n            ImmutableMap.&lt;AllowedCacheSystem, GenericCacheBuilder&lt;?&gt;&gt;builder()\n                .put(AllowedLocalCacheSystem.COMMON_CAFFEINE, new CommonCaffeineCacheBuilder())\n                .put(AllowedRemoteCacheSystem.COMMON_REDIS, new CommonRedisCacheBuilder())\n                .build();\n    \n    \n        public static GenericCacheBuilder getCacheBuilder(AllowedCacheSystem cacheSystem) {\n            return CACHE_SYSTEM_TO_CACHE_BUILDER_MAP.get(cacheSystem);\n        }\n    }\n</code></pre>\n<p>When i try to write unit test for MyMainClass</p>\n<pre><code>public class TestMyMainClass(){\n\n\n//all dependencies\n@InjectMocks\npublic MyMainClass mtestClass;\n\npublic void mymainLogic(){\n\n        cacheSystemToCacheManagerProviderStatic = Mockito.mockStatic(CacheSystemToCacheManagerProvider.class);\n        cacheSystemToCacheManagerProviderStatic.when(\n                CacheSystemToCacheManagerProvider::getCacheBuilder)\n            .thenReturn(getCacheBuilderMock);\nmtestClass.handleEvictedKeys(a,b,c)\n}\n\n}\n</code></pre>\n<p>I am trying to mock the call CacheSystemToCacheManagerProvider.getCacheBuilder() however this is making actual call and trying to create instance of <code>new CommonCaffeineCacheBuilder()</code> this pulls lot of dependencies and breaking UT.</p>\n<p>How to mock this static call correctly</p>\n"},{"tags":["java","aspectj","freefair-aspectj"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1693840953,"post_id":77036728,"comment_id":135809949,"body_markdown":"Which problem are you trying to solve that way?","body":"Which problem are you trying to solve that way?"},{"owner":{"account_id":4657335,"reputation":471,"user_id":3936201,"accept_rate":83,"display_name":"crashtua"},"score":0,"creation_date":1693896638,"post_id":77036728,"comment_id":135815963,"body_markdown":"@kriegaex more fluent and easy to use extensions to kotlin dsl. For cases where dsl subparts perform their actions immediately.","body":"@kriegaex more fluent and easy to use extensions to kotlin dsl. For cases where dsl subparts perform their actions immediately."},{"owner":{"account_id":4657335,"reputation":471,"user_id":3936201,"accept_rate":83,"display_name":"crashtua"},"score":0,"creation_date":1693896957,"post_id":77036728,"comment_id":135816024,"body_markdown":"For example, `job { execute(&quot;hello&quot;).onError { println(&quot;error&quot;) } }` will be possible. For now I use syntax like `execute { binary(&quot;hello&quot;) onError{...}}`, which add an extra block.","body":"For example, <code>job { execute(&quot;hello&quot;).onError { println(&quot;error&quot;) } }</code> will be possible. For now I use syntax like <code>execute { binary(&quot;hello&quot;) onError{...}}</code>, which add an extra block."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1693910969,"post_id":77036728,"comment_id":135818733,"body_markdown":"Please learn [how to ask a question on SO](https://stackoverflow.com/help/how-to-ask) and provide a [minimal, complete, and verifiable example](https://stackoverflow.com/help/mcve). Thank you.","body":"Please learn <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a question on SO</a> and provide a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>. Thank you."},{"owner":{"account_id":4657335,"reputation":471,"user_id":3936201,"accept_rate":83,"display_name":"crashtua"},"score":0,"creation_date":1693920998,"post_id":77036728,"comment_id":135821021,"body_markdown":"@kriegaex updated question a little bit, thanks.","body":"@kriegaex updated question a little bit, thanks."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1693925174,"post_id":77036728,"comment_id":135822043,"body_markdown":"No problem, then I wish good luck to you, to also get a little bit of an answer. &#128521;","body":"No problem, then I wish good luck to you, to also get a little bit of an answer. 😉"},{"owner":{"account_id":4657335,"reputation":471,"user_id":3936201,"accept_rate":83,"display_name":"crashtua"},"score":0,"creation_date":1693926057,"post_id":77036728,"comment_id":135822232,"body_markdown":"@kriegaex I have a strong feeling that aspectj can&#39;t do it :)","body":"@kriegaex I have a strong feeling that aspectj can&#39;t do it :)"}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693968007,"creation_date":1693968007,"answer_id":77048723,"question_id":77036728,"body_markdown":"What you want, does not make much sense. Look at your example:\r\n\r\n```java\r\ncreateBuilder().withArg2(arg2).withArg10(arg10)\r\n```\r\n\r\nThat is just source code. After being compiled, it looks the same as\r\n\r\n```java\r\nBuilder builder = createBuilder();\r\nbuilder = builder.withArg2(arg2);\r\nbuilder = builder.withArg10(arg10);\r\n```\r\n\r\nAspectJ is a tool for instrumenting byte code. Therefore, it does not see this as a single line of source code with syntactic sugar for a fluent API, but just as a bunch of method calls.\r\n\r\nNow, when we extend the sample code a bit to look like this:\r\n\r\n```java\r\nBuilder builder = createBuilder();\r\nbuilder = builder.withArg2(arg2);\r\nbuilder = builder.withArg10(arg10);\r\n// Do something else\r\nbuilder = builder.withArg3(arg3);\r\nbuilder = builder.withArg7(arg7);\r\n// Do something else\r\nbuilder = builder.withArg5(arg5);\r\n```\r\n\r\nHow is any aspect or even source code transformer expected to know when you are done, calling (fluent API) methods on your builder and are ready for the final call `builder.build()`? Even assuming, that you would use a hypothetical tool analysing and transforming source code, this would be a difficult task, because the user always has a choice to call builder methods separately or in one long chain or mix both approaches like this:\r\n\r\n```java\r\nBuilder builder = createBuilder().withArg2(arg2).withArg10(arg10);\r\n// Do something else\r\nbuilder = builder.withArg3(arg3).withArg7(arg7).withArg5(arg5);\r\n```\r\n\r\nWhat you want is not just a technological challenge, but it simply does not make a ton of sense. Why would you take away the decision from the user to decide when she is done calling builder methods and ready to call `build()`? How is an aspect even supposed to know? And why hide the `build()` call in your source code, documenting the user&#39;s intent? As much as I love AOP, this use case here is not a cross-cutting concern. From a tool or AOP paradigm perspective, it is  rather the equivalent to trying to use a hammer to dig a hole.","title":"Execute code after last method in method chain is executed","body":"<p>What you want, does not make much sense. Look at your example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>createBuilder().withArg2(arg2).withArg10(arg10)\n</code></pre>\n<p>That is just source code. After being compiled, it looks the same as</p>\n<pre class=\"lang-java prettyprint-override\"><code>Builder builder = createBuilder();\nbuilder = builder.withArg2(arg2);\nbuilder = builder.withArg10(arg10);\n</code></pre>\n<p>AspectJ is a tool for instrumenting byte code. Therefore, it does not see this as a single line of source code with syntactic sugar for a fluent API, but just as a bunch of method calls.</p>\n<p>Now, when we extend the sample code a bit to look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Builder builder = createBuilder();\nbuilder = builder.withArg2(arg2);\nbuilder = builder.withArg10(arg10);\n// Do something else\nbuilder = builder.withArg3(arg3);\nbuilder = builder.withArg7(arg7);\n// Do something else\nbuilder = builder.withArg5(arg5);\n</code></pre>\n<p>How is any aspect or even source code transformer expected to know when you are done, calling (fluent API) methods on your builder and are ready for the final call <code>builder.build()</code>? Even assuming, that you would use a hypothetical tool analysing and transforming source code, this would be a difficult task, because the user always has a choice to call builder methods separately or in one long chain or mix both approaches like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Builder builder = createBuilder().withArg2(arg2).withArg10(arg10);\n// Do something else\nbuilder = builder.withArg3(arg3).withArg7(arg7).withArg5(arg5);\n</code></pre>\n<p>What you want is not just a technological challenge, but it simply does not make a ton of sense. Why would you take away the decision from the user to decide when she is done calling builder methods and ready to call <code>build()</code>? How is an aspect even supposed to know? And why hide the <code>build()</code> call in your source code, documenting the user's intent? As much as I love AOP, this use case here is not a cross-cutting concern. From a tool or AOP paradigm perspective, it is  rather the equivalent to trying to use a hammer to dig a hole.</p>\n"}],"owner":{"account_id":4657335,"reputation":471,"user_id":3936201,"accept_rate":83,"display_name":"crashtua"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693968007,"creation_date":1693821245,"question_id":77036728,"body_markdown":"Can I create an aspect that will inject some code in the end of builder method chain in builder-like pattern? \r\n\r\nEnd-goal is to execute `build` method automatically inside aspect(and not necessarily `build` method, but any other code) without specifying it in code directly.\r\n\r\nHere is minimal example:\r\nbuilder interface:\r\n```java\r\npublic interface Builder {\r\n  Builder withArg1(Arg1 arg1);\r\n  Builder withArg2(Arg2 arg2);\r\n  ...\r\n  Builder withArgN(ArgN argN);\r\n  void build();\r\n}\r\n```\r\nmethod chain example:\r\n```java\r\ncreateBuilder().withArg2(arg2).withArg10(arg10)\r\n```\r\nexpected aspect must be executed after `.withArg10(arg10)` method.\r\n","title":"Execute code after last method in method chain is executed","body":"<p>Can I create an aspect that will inject some code in the end of builder method chain in builder-like pattern?</p>\n<p>End-goal is to execute <code>build</code> method automatically inside aspect(and not necessarily <code>build</code> method, but any other code) without specifying it in code directly.</p>\n<p>Here is minimal example:\nbuilder interface:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Builder {\n  Builder withArg1(Arg1 arg1);\n  Builder withArg2(Arg2 arg2);\n  ...\n  Builder withArgN(ArgN argN);\n  void build();\n}\n</code></pre>\n<p>method chain example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>createBuilder().withArg2(arg2).withArg10(arg10)\n</code></pre>\n<p>expected aspect must be executed after <code>.withArg10(arg10)</code> method.</p>\n"},{"tags":["java","security","https"],"answers":[{"tags":[],"owner":{"account_id":28947,"reputation":90759,"user_id":77779,"accept_rate":89,"display_name":"Yishai"},"down_vote_count":2,"up_vote_count":126,"is_accepted":true,"score":124,"last_activity_date":1427948225,"creation_date":1248881236,"answer_id":1201102,"question_id":1201048,"body_markdown":"[Here](http://web.archive.org/web/20121022013056/http://exampledepot.com/egs/javax.net.ssl/TrustAll.html) is some relevant code:\r\n\r\n    // Create a trust manager that does not validate certificate chains\r\n    TrustManager[] trustAllCerts = new TrustManager[]{\r\n        new X509TrustManager() {\r\n            public java.security.cert.X509Certificate[] getAcceptedIssuers() {\r\n                return null;\r\n            }\r\n            public void checkClientTrusted(\r\n                java.security.cert.X509Certificate[] certs, String authType) {\r\n            }\r\n            public void checkServerTrusted(\r\n                java.security.cert.X509Certificate[] certs, String authType) {\r\n            }\r\n        }\r\n    };\r\n    \r\n    // Install the all-trusting trust manager\r\n    try {\r\n        SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\r\n        sc.init(null, trustAllCerts, new java.security.SecureRandom());\r\n        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\r\n    } catch (Exception e) {\r\n    }\r\n    \r\n    // Now you can access an https URL without having the certificate in the truststore\r\n    try {\r\n        URL url = new URL(&quot;https://hostname/index.html&quot;);\r\n    } catch (MalformedURLException e) {\r\n    }\r\n\r\nThis will completely disable SSL checking—just don&#39;t learn exception handling from such code!\r\n\r\nTo do what you want, you would have to implement a check in your TrustManager that prompts the user.\r\n","title":"Allowing Java to use an untrusted certificate for SSL/HTTPS connection","body":"<p><a href=\"http://web.archive.org/web/20121022013056/http://exampledepot.com/egs/javax.net.ssl/TrustAll.html\" rel=\"noreferrer\">Here</a> is some relevant code:</p>\n\n<pre><code>// Create a trust manager that does not validate certificate chains\nTrustManager[] trustAllCerts = new TrustManager[]{\n    new X509TrustManager() {\n        public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n            return null;\n        }\n        public void checkClientTrusted(\n            java.security.cert.X509Certificate[] certs, String authType) {\n        }\n        public void checkServerTrusted(\n            java.security.cert.X509Certificate[] certs, String authType) {\n        }\n    }\n};\n\n// Install the all-trusting trust manager\ntry {\n    SSLContext sc = SSLContext.getInstance(\"SSL\");\n    sc.init(null, trustAllCerts, new java.security.SecureRandom());\n    HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\n} catch (Exception e) {\n}\n\n// Now you can access an https URL without having the certificate in the truststore\ntry {\n    URL url = new URL(\"https://hostname/index.html\");\n} catch (MalformedURLException e) {\n}\n</code></pre>\n\n<p>This will completely disable SSL checking—just don't learn exception handling from such code!</p>\n\n<p>To do what you want, you would have to implement a check in your TrustManager that prompts the user.</p>\n"},{"tags":[],"owner":{"account_id":2396003,"reputation":1750,"user_id":2094783,"accept_rate":75,"display_name":"Krzysztof Szewczyk"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1427948069,"creation_date":1371195452,"answer_id":17103420,"question_id":1201048,"body_markdown":"Following code from [here][1] is a useful solution. No keystores etc. Just call method SSLUtilities.trustAllHttpsCertificates() before initializing the service and port (in SOAP).\r\n\r\n\r\n  [1]: http://www.jiramot.info/sslutilities-accept-all-certificate-in-java\r\n\r\n    import java.security.GeneralSecurityException;\r\n    import java.security.SecureRandom;\r\n    import java.security.cert.X509Certificate;\r\n    import javax.net.ssl.HostnameVerifier;\r\n    import javax.net.ssl.HttpsURLConnection;\r\n    import javax.net.ssl.SSLContext;\r\n    import javax.net.ssl.TrustManager;\r\n    import javax.net.ssl.X509TrustManager;\r\n    \r\n    /**\r\n     * This class provide various static methods that relax X509 certificate and\r\n     * hostname verification while using the SSL over the HTTP protocol.\r\n     *  \r\n     * @author Jiramot.info\r\n     */\r\n    public final class SSLUtilities {\r\n\r\n      /**\r\n       * Hostname verifier for the Sun&#39;s deprecated API.\r\n       *\r\n       * @deprecated see {@link #_hostnameVerifier}.\r\n       */\r\n      private static com.sun.net.ssl.HostnameVerifier __hostnameVerifier;\r\n      /**\r\n       * Thrust managers for the Sun&#39;s deprecated API.\r\n       *\r\n       * @deprecated see {@link #_trustManagers}.\r\n       */\r\n      private static com.sun.net.ssl.TrustManager[] __trustManagers;\r\n      /**\r\n       * Hostname verifier.\r\n       */\r\n      private static HostnameVerifier _hostnameVerifier;\r\n      /**\r\n       * Thrust managers.\r\n       */\r\n      private static TrustManager[] _trustManagers;\r\n\r\n      /**\r\n       * Set the default Hostname Verifier to an instance of a fake class that\r\n       * trust all hostnames. This method uses the old deprecated API from the\r\n       * com.sun.ssl package.\r\n       *  \r\n       * @deprecated see {@link #_trustAllHostnames()}.\r\n       */\r\n      private static void __trustAllHostnames() {\r\n        // Create a trust manager that does not validate certificate chains\r\n        if (__hostnameVerifier == null) {\r\n            __hostnameVerifier = new SSLUtilities._FakeHostnameVerifier();\r\n        } // if\r\n        // Install the all-trusting host name verifier\r\n        com.sun.net.ssl.HttpsURLConnection\r\n                .setDefaultHostnameVerifier(__hostnameVerifier);\r\n      } // __trustAllHttpsCertificates\r\n\r\n      /**\r\n       * Set the default X509 Trust Manager to an instance of a fake class that\r\n       * trust all certificates, even the self-signed ones. This method uses the\r\n       * old deprecated API from the com.sun.ssl package.\r\n       *\r\n       * @deprecated see {@link #_trustAllHttpsCertificates()}.\r\n       */\r\n      private static void __trustAllHttpsCertificates() {\r\n        com.sun.net.ssl.SSLContext context;\r\n\r\n        // Create a trust manager that does not validate certificate chains\r\n        if (__trustManagers == null) {\r\n            __trustManagers = new com.sun.net.ssl.TrustManager[]{new SSLUtilities._FakeX509TrustManager()};\r\n        } // if\r\n        // Install the all-trusting trust manager\r\n        try {\r\n            context = com.sun.net.ssl.SSLContext.getInstance(&quot;SSL&quot;);\r\n            context.init(null, __trustManagers, new SecureRandom());\r\n        } catch (GeneralSecurityException gse) {\r\n            throw new IllegalStateException(gse.getMessage());\r\n        } // catch\r\n        com.sun.net.ssl.HttpsURLConnection.setDefaultSSLSocketFactory(context\r\n                .getSocketFactory());\r\n      } // __trustAllHttpsCertificates\r\n\r\n      /**\r\n       * Return true if the protocol handler property java. protocol.handler.pkgs\r\n       * is set to the Sun&#39;s com.sun.net.ssl. internal.www.protocol deprecated\r\n       * one, false otherwise.\r\n       *\r\n       * @return true if the protocol handler property is set to the Sun&#39;s\r\n       * deprecated one, false otherwise.\r\n       */\r\n      private static boolean isDeprecatedSSLProtocol() {\r\n        return (&quot;com.sun.net.ssl.internal.www.protocol&quot;.equals(System\r\n                .getProperty(&quot;java.protocol.handler.pkgs&quot;)));\r\n      } // isDeprecatedSSLProtocol\r\n\r\n      /**\r\n       * Set the default Hostname Verifier to an instance of a fake class that\r\n       * trust all hostnames.\r\n       */\r\n      private static void _trustAllHostnames() {\r\n          // Create a trust manager that does not validate certificate chains\r\n          if (_hostnameVerifier == null) {\r\n              _hostnameVerifier = new SSLUtilities.FakeHostnameVerifier();\r\n          } // if\r\n          // Install the all-trusting host name verifier:\r\n          HttpsURLConnection.setDefaultHostnameVerifier(_hostnameVerifier);\r\n      } // _trustAllHttpsCertificates\r\n\r\n      /**\r\n       * Set the default X509 Trust Manager to an instance of a fake class that\r\n       * trust all certificates, even the self-signed ones.\r\n       */\r\n      private static void _trustAllHttpsCertificates() {\r\n        SSLContext context;\r\n  \r\n          // Create a trust manager that does not validate certificate chains\r\n          if (_trustManagers == null) {\r\n              _trustManagers = new TrustManager[]{new SSLUtilities.FakeX509TrustManager()};\r\n          } // if\r\n          // Install the all-trusting trust manager:\r\n          try {\r\n              context = SSLContext.getInstance(&quot;SSL&quot;);\r\n              context.init(null, _trustManagers, new SecureRandom());\r\n          } catch (GeneralSecurityException gse) {\r\n              throw new IllegalStateException(gse.getMessage());\r\n          } // catch\r\n          HttpsURLConnection.setDefaultSSLSocketFactory(context\r\n                .getSocketFactory());\r\n      } // _trustAllHttpsCertificates\r\n\r\n      /**\r\n       * Set the default Hostname Verifier to an instance of a fake class that\r\n       * trust all hostnames.\r\n       */\r\n      public static void trustAllHostnames() {\r\n          // Is the deprecated protocol setted?\r\n          if (isDeprecatedSSLProtocol()) {\r\n              __trustAllHostnames();\r\n          } else {\r\n              _trustAllHostnames();\r\n          } // else\r\n      } // trustAllHostnames\r\n\r\n      /**\r\n       * Set the default X509 Trust Manager to an instance of a fake class that\r\n       * trust all certificates, even the self-signed ones.\r\n       */\r\n      public static void trustAllHttpsCertificates() {\r\n        // Is the deprecated protocol setted?\r\n        if (isDeprecatedSSLProtocol()) {\r\n            __trustAllHttpsCertificates();\r\n        } else {\r\n            _trustAllHttpsCertificates();\r\n        } // else\r\n      } // trustAllHttpsCertificates\r\n\r\n      /**\r\n       * This class implements a fake hostname verificator, trusting any host\r\n       * name. This class uses the old deprecated API from the com.sun. ssl\r\n       * package.\r\n       *\r\n       * @author Jiramot.info\r\n       *\r\n       * @deprecated see {@link SSLUtilities.FakeHostnameVerifier}.\r\n       */\r\n      public static class _FakeHostnameVerifier implements\r\n            com.sun.net.ssl.HostnameVerifier {\r\n\r\n        /**\r\n         * Always return true, indicating that the host name is an acceptable\r\n         * match with the server&#39;s authentication scheme.\r\n         *\r\n         * @param hostname the host name.\r\n         * @param session the SSL session used on the connection to host.\r\n         * @return the true boolean value indicating the host name is trusted.\r\n         */\r\n        public boolean verify(String hostname, String session) {\r\n            return (true);\r\n        } // verify\r\n      } // _FakeHostnameVerifier\r\n\r\n      /**\r\n       * This class allow any X509 certificates to be used to authenticate the\r\n       * remote side of a secure socket, including self-signed certificates. This\r\n       * class uses the old deprecated API from the com.sun.ssl package.\r\n       *\r\n       * @author Jiramot.info\r\n       *\r\n       * @deprecated see {@link SSLUtilities.FakeX509TrustManager}.\r\n       */\r\n      public static class _FakeX509TrustManager implements\r\n            com.sun.net.ssl.X509TrustManager {\r\n\r\n        /**\r\n         * Empty array of certificate authority certificates.\r\n         */\r\n        private static final X509Certificate[] _AcceptedIssuers = new X509Certificate[]{};\r\n\r\n        /**\r\n         * Always return true, trusting for client SSL chain peer certificate\r\n         * chain.\r\n         *\r\n         * @param chain the peer certificate chain.\r\n         * @return the true boolean value indicating the chain is trusted.\r\n         */\r\n        public boolean isClientTrusted(X509Certificate[] chain) {\r\n            return (true);\r\n        } // checkClientTrusted\r\n\r\n        /**\r\n         * Always return true, trusting for server SSL chain peer certificate\r\n         * chain.\r\n         *\r\n         * @param chain the peer certificate chain.\r\n         * @return the true boolean value indicating the chain is trusted.\r\n         */\r\n        public boolean isServerTrusted(X509Certificate[] chain) {\r\n            return (true);\r\n        } // checkServerTrusted\r\n\r\n        /**\r\n         * Return an empty array of certificate authority certificates which are\r\n         * trusted for authenticating peers.\r\n         *\r\n         * @return a empty array of issuer certificates.\r\n         */\r\n        public X509Certificate[] getAcceptedIssuers() {\r\n            return (_AcceptedIssuers);\r\n        } // getAcceptedIssuers\r\n      } // _FakeX509TrustManager\r\n\r\n      /**\r\n       * This class implements a fake hostname verificator, trusting any host\r\n       * name.\r\n       *\r\n       * @author Jiramot.info\r\n       */\r\n      public static class FakeHostnameVerifier implements HostnameVerifier {\r\n\r\n        /**\r\n         * Always return true, indicating that the host name is an acceptable\r\n         * match with the server&#39;s authentication scheme.\r\n         *\r\n         * @param hostname the host name.\r\n         * @param session the SSL session used on the connection to host.\r\n         * @return the true boolean value indicating the host name is trusted.\r\n         */\r\n        public boolean verify(String hostname, javax.net.ssl.SSLSession session) {\r\n            return (true);\r\n        } // verify\r\n      } // FakeHostnameVerifier\r\n\r\n      /**\r\n       * This class allow any X509 certificates to be used to authenticate the\r\n       * remote side of a secure socket, including self-signed certificates.\r\n       *\r\n       * @author Jiramot.info\r\n       */\r\n      public static class FakeX509TrustManager implements X509TrustManager {\r\n\r\n        /**\r\n         * Empty array of certificate authority certificates.\r\n         */\r\n        private static final X509Certificate[] _AcceptedIssuers = new X509Certificate[]{};\r\n\r\n        /**\r\n         * Always trust for client SSL chain peer certificate chain with any\r\n         * authType authentication types.\r\n         *\r\n         * @param chain the peer certificate chain.\r\n         * @param authType the authentication type based on the client\r\n         * certificate.\r\n         */\r\n        public void checkClientTrusted(X509Certificate[] chain, String authType) {\r\n        } // checkClientTrusted\r\n\r\n        /**\r\n         * Always trust for server SSL chain peer certificate chain with any\r\n         * authType exchange algorithm types.\r\n         *\r\n         * @param chain the peer certificate chain.\r\n         * @param authType the key exchange algorithm used.\r\n         */\r\n        public void checkServerTrusted(X509Certificate[] chain, String authType) {\r\n        } // checkServerTrusted\r\n\r\n        /**\r\n         * Return an empty array of certificate authority certificates which are\r\n         * trusted for authenticating peers.\r\n         *\r\n         * @return a empty array of issuer certificates.\r\n         */\r\n        public X509Certificate[] getAcceptedIssuers() {\r\n            return (_AcceptedIssuers);\r\n        } // getAcceptedIssuers\r\n      } // FakeX509TrustManager\r\n    } // SSLUtilities","title":"Allowing Java to use an untrusted certificate for SSL/HTTPS connection","body":"<p>Following code from <a href=\"http://www.jiramot.info/sslutilities-accept-all-certificate-in-java\" rel=\"noreferrer\">here</a> is a useful solution. No keystores etc. Just call method SSLUtilities.trustAllHttpsCertificates() before initializing the service and port (in SOAP).</p>\n\n<pre><code>import java.security.GeneralSecurityException;\nimport java.security.SecureRandom;\nimport java.security.cert.X509Certificate;\nimport javax.net.ssl.HostnameVerifier;\nimport javax.net.ssl.HttpsURLConnection;\nimport javax.net.ssl.SSLContext;\nimport javax.net.ssl.TrustManager;\nimport javax.net.ssl.X509TrustManager;\n\n/**\n * This class provide various static methods that relax X509 certificate and\n * hostname verification while using the SSL over the HTTP protocol.\n *  \n * @author Jiramot.info\n */\npublic final class SSLUtilities {\n\n  /**\n   * Hostname verifier for the Sun's deprecated API.\n   *\n   * @deprecated see {@link #_hostnameVerifier}.\n   */\n  private static com.sun.net.ssl.HostnameVerifier __hostnameVerifier;\n  /**\n   * Thrust managers for the Sun's deprecated API.\n   *\n   * @deprecated see {@link #_trustManagers}.\n   */\n  private static com.sun.net.ssl.TrustManager[] __trustManagers;\n  /**\n   * Hostname verifier.\n   */\n  private static HostnameVerifier _hostnameVerifier;\n  /**\n   * Thrust managers.\n   */\n  private static TrustManager[] _trustManagers;\n\n  /**\n   * Set the default Hostname Verifier to an instance of a fake class that\n   * trust all hostnames. This method uses the old deprecated API from the\n   * com.sun.ssl package.\n   *  \n   * @deprecated see {@link #_trustAllHostnames()}.\n   */\n  private static void __trustAllHostnames() {\n    // Create a trust manager that does not validate certificate chains\n    if (__hostnameVerifier == null) {\n        __hostnameVerifier = new SSLUtilities._FakeHostnameVerifier();\n    } // if\n    // Install the all-trusting host name verifier\n    com.sun.net.ssl.HttpsURLConnection\n            .setDefaultHostnameVerifier(__hostnameVerifier);\n  } // __trustAllHttpsCertificates\n\n  /**\n   * Set the default X509 Trust Manager to an instance of a fake class that\n   * trust all certificates, even the self-signed ones. This method uses the\n   * old deprecated API from the com.sun.ssl package.\n   *\n   * @deprecated see {@link #_trustAllHttpsCertificates()}.\n   */\n  private static void __trustAllHttpsCertificates() {\n    com.sun.net.ssl.SSLContext context;\n\n    // Create a trust manager that does not validate certificate chains\n    if (__trustManagers == null) {\n        __trustManagers = new com.sun.net.ssl.TrustManager[]{new SSLUtilities._FakeX509TrustManager()};\n    } // if\n    // Install the all-trusting trust manager\n    try {\n        context = com.sun.net.ssl.SSLContext.getInstance(\"SSL\");\n        context.init(null, __trustManagers, new SecureRandom());\n    } catch (GeneralSecurityException gse) {\n        throw new IllegalStateException(gse.getMessage());\n    } // catch\n    com.sun.net.ssl.HttpsURLConnection.setDefaultSSLSocketFactory(context\n            .getSocketFactory());\n  } // __trustAllHttpsCertificates\n\n  /**\n   * Return true if the protocol handler property java. protocol.handler.pkgs\n   * is set to the Sun's com.sun.net.ssl. internal.www.protocol deprecated\n   * one, false otherwise.\n   *\n   * @return true if the protocol handler property is set to the Sun's\n   * deprecated one, false otherwise.\n   */\n  private static boolean isDeprecatedSSLProtocol() {\n    return (\"com.sun.net.ssl.internal.www.protocol\".equals(System\n            .getProperty(\"java.protocol.handler.pkgs\")));\n  } // isDeprecatedSSLProtocol\n\n  /**\n   * Set the default Hostname Verifier to an instance of a fake class that\n   * trust all hostnames.\n   */\n  private static void _trustAllHostnames() {\n      // Create a trust manager that does not validate certificate chains\n      if (_hostnameVerifier == null) {\n          _hostnameVerifier = new SSLUtilities.FakeHostnameVerifier();\n      } // if\n      // Install the all-trusting host name verifier:\n      HttpsURLConnection.setDefaultHostnameVerifier(_hostnameVerifier);\n  } // _trustAllHttpsCertificates\n\n  /**\n   * Set the default X509 Trust Manager to an instance of a fake class that\n   * trust all certificates, even the self-signed ones.\n   */\n  private static void _trustAllHttpsCertificates() {\n    SSLContext context;\n\n      // Create a trust manager that does not validate certificate chains\n      if (_trustManagers == null) {\n          _trustManagers = new TrustManager[]{new SSLUtilities.FakeX509TrustManager()};\n      } // if\n      // Install the all-trusting trust manager:\n      try {\n          context = SSLContext.getInstance(\"SSL\");\n          context.init(null, _trustManagers, new SecureRandom());\n      } catch (GeneralSecurityException gse) {\n          throw new IllegalStateException(gse.getMessage());\n      } // catch\n      HttpsURLConnection.setDefaultSSLSocketFactory(context\n            .getSocketFactory());\n  } // _trustAllHttpsCertificates\n\n  /**\n   * Set the default Hostname Verifier to an instance of a fake class that\n   * trust all hostnames.\n   */\n  public static void trustAllHostnames() {\n      // Is the deprecated protocol setted?\n      if (isDeprecatedSSLProtocol()) {\n          __trustAllHostnames();\n      } else {\n          _trustAllHostnames();\n      } // else\n  } // trustAllHostnames\n\n  /**\n   * Set the default X509 Trust Manager to an instance of a fake class that\n   * trust all certificates, even the self-signed ones.\n   */\n  public static void trustAllHttpsCertificates() {\n    // Is the deprecated protocol setted?\n    if (isDeprecatedSSLProtocol()) {\n        __trustAllHttpsCertificates();\n    } else {\n        _trustAllHttpsCertificates();\n    } // else\n  } // trustAllHttpsCertificates\n\n  /**\n   * This class implements a fake hostname verificator, trusting any host\n   * name. This class uses the old deprecated API from the com.sun. ssl\n   * package.\n   *\n   * @author Jiramot.info\n   *\n   * @deprecated see {@link SSLUtilities.FakeHostnameVerifier}.\n   */\n  public static class _FakeHostnameVerifier implements\n        com.sun.net.ssl.HostnameVerifier {\n\n    /**\n     * Always return true, indicating that the host name is an acceptable\n     * match with the server's authentication scheme.\n     *\n     * @param hostname the host name.\n     * @param session the SSL session used on the connection to host.\n     * @return the true boolean value indicating the host name is trusted.\n     */\n    public boolean verify(String hostname, String session) {\n        return (true);\n    } // verify\n  } // _FakeHostnameVerifier\n\n  /**\n   * This class allow any X509 certificates to be used to authenticate the\n   * remote side of a secure socket, including self-signed certificates. This\n   * class uses the old deprecated API from the com.sun.ssl package.\n   *\n   * @author Jiramot.info\n   *\n   * @deprecated see {@link SSLUtilities.FakeX509TrustManager}.\n   */\n  public static class _FakeX509TrustManager implements\n        com.sun.net.ssl.X509TrustManager {\n\n    /**\n     * Empty array of certificate authority certificates.\n     */\n    private static final X509Certificate[] _AcceptedIssuers = new X509Certificate[]{};\n\n    /**\n     * Always return true, trusting for client SSL chain peer certificate\n     * chain.\n     *\n     * @param chain the peer certificate chain.\n     * @return the true boolean value indicating the chain is trusted.\n     */\n    public boolean isClientTrusted(X509Certificate[] chain) {\n        return (true);\n    } // checkClientTrusted\n\n    /**\n     * Always return true, trusting for server SSL chain peer certificate\n     * chain.\n     *\n     * @param chain the peer certificate chain.\n     * @return the true boolean value indicating the chain is trusted.\n     */\n    public boolean isServerTrusted(X509Certificate[] chain) {\n        return (true);\n    } // checkServerTrusted\n\n    /**\n     * Return an empty array of certificate authority certificates which are\n     * trusted for authenticating peers.\n     *\n     * @return a empty array of issuer certificates.\n     */\n    public X509Certificate[] getAcceptedIssuers() {\n        return (_AcceptedIssuers);\n    } // getAcceptedIssuers\n  } // _FakeX509TrustManager\n\n  /**\n   * This class implements a fake hostname verificator, trusting any host\n   * name.\n   *\n   * @author Jiramot.info\n   */\n  public static class FakeHostnameVerifier implements HostnameVerifier {\n\n    /**\n     * Always return true, indicating that the host name is an acceptable\n     * match with the server's authentication scheme.\n     *\n     * @param hostname the host name.\n     * @param session the SSL session used on the connection to host.\n     * @return the true boolean value indicating the host name is trusted.\n     */\n    public boolean verify(String hostname, javax.net.ssl.SSLSession session) {\n        return (true);\n    } // verify\n  } // FakeHostnameVerifier\n\n  /**\n   * This class allow any X509 certificates to be used to authenticate the\n   * remote side of a secure socket, including self-signed certificates.\n   *\n   * @author Jiramot.info\n   */\n  public static class FakeX509TrustManager implements X509TrustManager {\n\n    /**\n     * Empty array of certificate authority certificates.\n     */\n    private static final X509Certificate[] _AcceptedIssuers = new X509Certificate[]{};\n\n    /**\n     * Always trust for client SSL chain peer certificate chain with any\n     * authType authentication types.\n     *\n     * @param chain the peer certificate chain.\n     * @param authType the authentication type based on the client\n     * certificate.\n     */\n    public void checkClientTrusted(X509Certificate[] chain, String authType) {\n    } // checkClientTrusted\n\n    /**\n     * Always trust for server SSL chain peer certificate chain with any\n     * authType exchange algorithm types.\n     *\n     * @param chain the peer certificate chain.\n     * @param authType the key exchange algorithm used.\n     */\n    public void checkServerTrusted(X509Certificate[] chain, String authType) {\n    } // checkServerTrusted\n\n    /**\n     * Return an empty array of certificate authority certificates which are\n     * trusted for authenticating peers.\n     *\n     * @return a empty array of issuer certificates.\n     */\n    public X509Certificate[] getAcceptedIssuers() {\n        return (_AcceptedIssuers);\n    } // getAcceptedIssuers\n  } // FakeX509TrustManager\n} // SSLUtilities\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1582149007,"creation_date":1483992608,"answer_id":41556088,"question_id":1201048,"body_markdown":"Another option is to get a &quot;.pem&quot; (public key) file for that particular server, and install it locally into the heart of your JRE&#39;s &quot;cacerts&quot; file (use the keytool helper application), then it will be able to download from that server without complaint, without compromising the entire SSL structure of your running JVM and enabling download from other unknown cert servers...","title":"Allowing Java to use an untrusted certificate for SSL/HTTPS connection","body":"<p>Another option is to get a \".pem\" (public key) file for that particular server, and install it locally into the heart of your JRE's \"cacerts\" file (use the keytool helper application), then it will be able to download from that server without complaint, without compromising the entire SSL structure of your running JVM and enabling download from other unknown cert servers...</p>\n"}],"owner":{"account_id":49317,"reputation":5071,"user_id":146781,"accept_rate":94,"display_name":"Midnight Blue"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141514,"favorite_count":0,"down_vote_count":0,"up_vote_count":68,"accepted_answer_id":1201102,"answer_count":3,"score":68,"last_activity_date":1693966212,"creation_date":1248880778,"question_id":1201048,"body_markdown":"I&#39;ve been working on a program to extract information from a dynamic web application, and the program worked fine until I set my tomcat server to use SSL using a self-signed(thus, untrusted) certificate. The stack trace of the error is:\r\n\r\n    javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n    Error: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n            at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:150)\r\n            at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1584)\r\n            at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:174)\r\n            at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:168)\r\n            at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:848)\r\n            at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:106)\r\n            at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:495)\r\n            at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:433)\r\n            at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:877)\r\n            at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1089)\r\n            at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1116)\r\n            at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1100)\r\n            at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:402)\r\n            at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:170)\r\n            at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:857)\r\n            at sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:230)\r\n            at com.certicom.gls.glscs.nongui.URLReader$PostURL.setupURL(URLReader.java:34)\r\n            at com.certicom.gls.glscs.nongui.URLReader.getLogin(URLReader.java:227)\r\n            at com.certicom.gls.glscs.nongui.URLReader.testLogin(URLReader.java:436)\r\n            at com.certicom.gls.glscs.nongui.Controller.loginMenu(Controller.java:384)\r\n            at com.certicom.gls.glscs.nongui.Controller.menu(Controller.java:324)\r\n            at com.certicom.gls.glscs.nongui.Controller.&lt;init&gt;(Controller.java:49)\r\n            at com.certicom.gls.glscs.nongui.Controller.main(Controller.java:61)\r\n\r\nIn a web browser, the user is prompted a warning when accessing a HTTPS site with an untrusted certificate, and asked to make an exception if he likes to proceed; I would like to implement a similar functionality for my command-line application... I admit that I am new to socket programming and networking in general; any advice solving this problem will be great!","title":"Allowing Java to use an untrusted certificate for SSL/HTTPS connection","body":"<p>I've been working on a program to extract information from a dynamic web application, and the program worked fine until I set my tomcat server to use SSL using a self-signed(thus, untrusted) certificate. The stack trace of the error is:</p>\n\n<pre><code>javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\nError: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n        at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:150)\n        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1584)\n        at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:174)\n        at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:168)\n        at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:848)\n        at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:106)\n        at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:495)\n        at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:433)\n        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:877)\n        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1089)\n        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1116)\n        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1100)\n        at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:402)\n        at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:170)\n        at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:857)\n        at sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:230)\n        at com.certicom.gls.glscs.nongui.URLReader$PostURL.setupURL(URLReader.java:34)\n        at com.certicom.gls.glscs.nongui.URLReader.getLogin(URLReader.java:227)\n        at com.certicom.gls.glscs.nongui.URLReader.testLogin(URLReader.java:436)\n        at com.certicom.gls.glscs.nongui.Controller.loginMenu(Controller.java:384)\n        at com.certicom.gls.glscs.nongui.Controller.menu(Controller.java:324)\n        at com.certicom.gls.glscs.nongui.Controller.&lt;init&gt;(Controller.java:49)\n        at com.certicom.gls.glscs.nongui.Controller.main(Controller.java:61)\n</code></pre>\n\n<p>In a web browser, the user is prompted a warning when accessing a HTTPS site with an untrusted certificate, and asked to make an exception if he likes to proceed; I would like to implement a similar functionality for my command-line application... I admit that I am new to socket programming and networking in general; any advice solving this problem will be great!</p>\n"},{"tags":["java","calculator"],"comments":[{"owner":{"display_name":"user166390"},"score":0,"creation_date":1360115674,"post_id":14720251,"comment_id":20592460,"body_markdown":"Then operation is likely *not* equal to any of the operator strings - what *is* it really? (Also, consider using `System.out.println` for a console app .. you&#39;re reading from the console, so might as well write to it :-/)","body":"Then operation is likely <i>not</i> equal to any of the operator strings - what <i>is</i> it really? (Also, consider using <code>System.out.println</code> for a console app .. you&#39;re reading from the console, so might as well write to it :-/)"},{"owner":{"display_name":"user166390"},"score":0,"creation_date":1360116076,"post_id":14720251,"comment_id":20592586,"body_markdown":"And, how *is* this program being being started? With `java` or `javaw`?","body":"And, how <i>is</i> this program being being started? With <code>java</code> or <code>javaw</code>?"}],"answers":[{"tags":[],"owner":{"account_id":1279628,"reputation":124,"user_id":1234048,"display_name":"gincsait"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1360117358,"creation_date":1360117358,"answer_id":14720565,"question_id":14720251,"body_markdown":"Read the numbers from the dialog output instead of from System.in:\r\n\r\n    String firstNumber = JOptionPane.showInputDialog(null,&quot;please enter the first number&quot;);\r\n    if (firstNumber != null) {\r\n        num1 = Integer.parseInt(firstNumber);\r\n    }\r\n\r\nScanner is unnecessary in your code.","title":"Basic Calculator","body":"<p>Read the numbers from the dialog output instead of from System.in:</p>\n\n<pre><code>String firstNumber = JOptionPane.showInputDialog(null,\"please enter the first number\");\nif (firstNumber != null) {\n    num1 = Integer.parseInt(firstNumber);\n}\n</code></pre>\n\n<p>Scanner is unnecessary in your code.</p>\n"},{"tags":[],"owner":{"account_id":5811129,"reputation":1,"user_id":4582156,"display_name":"Zeyad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424318184,"creation_date":1424315100,"answer_id":28597986,"question_id":14720251,"body_markdown":"You can try using that sample code:\r\n\r\n    import javax.swing.JOptionPane;\r\n    \r\n    public class Hw4_3 {\r\n\t\r\n    \tprivate static boolean flag;\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tdo {\r\n    \t\t\tString[] expression = getTask();\r\n    \t\t\tdouble result = calculate(expression);\r\n    \t\t\tdisplay(expression, result);\r\n    \t\t\trepeat();\r\n    \t\t} while (flag);\r\n    \t}\r\n    \t\r\n    \tpublic static String[] getTask()\r\n    \t{\r\n    \t\tString bleh = JOptionPane.showInputDialog(null, &quot;Please enter what you would like to calculate: &quot;);\r\n    \t\tString[] tokens = bleh.split(&quot; &quot;);\r\n    \t\treturn tokens;\r\n    \t}\r\n    \t\r\n    \tpublic static double calculate(String[] data)\r\n    \t{\r\n    \t\tdouble num1 = Double.parseDouble(data[0]);\r\n    \t\tdouble num2 = Double.parseDouble(data[2]);\r\n    \t\tdouble result = 0;\r\n    \t\tif(data[1].equals(&quot;+&quot;))\r\n    \t\t{\r\n    \t\t\tresult = add(num1, num2);\r\n    \t\t\treturn result;\r\n    \t\t}\r\n    \t\telse if(data[1].equals(&quot;-&quot;))\r\n    \t\t{\r\n    \t\t\tresult = subtract(num1, num2);\r\n    \t\t\treturn result;\r\n    \t\t}\r\n    \t\telse if(data[1].equals(&quot;*&quot;))\r\n    \t\t{\r\n    \t\t\tresult = multiply(num1, num2);\r\n    \t\t\treturn result;\r\n    \t\t}\r\n    \t\telse \r\n    \t\t{\r\n    \t\t\tif(num2 == 0)\r\n    \t\t\t{\r\n    \t\t\t\tJOptionPane.showMessageDialog(null, &quot;Sytax error, divide by zero&quot;);\r\n    \t\t\t}\r\n    \t\t\tresult = divide(num1, num2);\r\n    \t\t\treturn result;\r\n    \t\t}\r\n    \t\t\t\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tpublic static double add(double num1, double num2)\r\n    \t{\r\n    \t\treturn num1 + num2;\r\n    \t}\r\n    \t\r\n    \tpublic static double subtract(double num1, double num2)\r\n    \t{\r\n    \t\treturn num1 - num2;\r\n    \t}\r\n    \t\r\n    \tpublic static double multiply(double num1, double num2)\r\n    \t{\r\n    \t\treturn num1 * num2;\r\n    \t}\r\n    \t\r\n    \tpublic static double divide(double num1, double num2)\r\n    \t{\r\n    \t\treturn num1 / num2;\r\n    \t}\r\n    \r\n    \tpublic static void display(String[] data, double result)\r\n    \t{\r\n    \t\tif(data[1].equals(&quot;/&quot;) &amp;&amp; data[2].equals(&quot;0&quot;))\r\n    \t\t{\r\n    \t\t\t\r\n    \t\t}\r\n    \t\telse\r\n    \t\t{\r\n    \t\t\tJOptionPane.showMessageDialog(null, data[0] + &quot; &quot; + data[1] + &quot; &quot; + data[2] + &quot; = &quot; + result);\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic static void repeat()\r\n    \t{\r\n    \t\tint bleh = JOptionPane.showConfirmDialog(null, &quot;More?&quot;,null, JOptionPane.YES_NO_OPTION);\r\n    \t\tif(bleh == JOptionPane.NO_OPTION)\r\n    \t\t{\r\n    \t\t\tflag = false;\r\n    \t\t\tJOptionPane.showMessageDialog(null, &quot;Have a good day.&quot;);\r\n    \t\t}\r\n    \t\telse\r\n    \t\t\tflag = true;\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"Basic Calculator","body":"<p>You can try using that sample code:</p>\n\n<pre><code>import javax.swing.JOptionPane;\n\npublic class Hw4_3 {\n\n    private static boolean flag;\n\n    public static void main(String[] args) {\n        do {\n            String[] expression = getTask();\n            double result = calculate(expression);\n            display(expression, result);\n            repeat();\n        } while (flag);\n    }\n\n    public static String[] getTask()\n    {\n        String bleh = JOptionPane.showInputDialog(null, \"Please enter what you would like to calculate: \");\n        String[] tokens = bleh.split(\" \");\n        return tokens;\n    }\n\n    public static double calculate(String[] data)\n    {\n        double num1 = Double.parseDouble(data[0]);\n        double num2 = Double.parseDouble(data[2]);\n        double result = 0;\n        if(data[1].equals(\"+\"))\n        {\n            result = add(num1, num2);\n            return result;\n        }\n        else if(data[1].equals(\"-\"))\n        {\n            result = subtract(num1, num2);\n            return result;\n        }\n        else if(data[1].equals(\"*\"))\n        {\n            result = multiply(num1, num2);\n            return result;\n        }\n        else \n        {\n            if(num2 == 0)\n            {\n                JOptionPane.showMessageDialog(null, \"Sytax error, divide by zero\");\n            }\n            result = divide(num1, num2);\n            return result;\n        }\n\n\n    }\n\n    public static double add(double num1, double num2)\n    {\n        return num1 + num2;\n    }\n\n    public static double subtract(double num1, double num2)\n    {\n        return num1 - num2;\n    }\n\n    public static double multiply(double num1, double num2)\n    {\n        return num1 * num2;\n    }\n\n    public static double divide(double num1, double num2)\n    {\n        return num1 / num2;\n    }\n\n    public static void display(String[] data, double result)\n    {\n        if(data[1].equals(\"/\") &amp;&amp; data[2].equals(\"0\"))\n        {\n\n        }\n        else\n        {\n            JOptionPane.showMessageDialog(null, data[0] + \" \" + data[1] + \" \" + data[2] + \" = \" + result);\n        }\n    }\n\n    public static void repeat()\n    {\n        int bleh = JOptionPane.showConfirmDialog(null, \"More?\",null, JOptionPane.YES_NO_OPTION);\n        if(bleh == JOptionPane.NO_OPTION)\n        {\n            flag = false;\n            JOptionPane.showMessageDialog(null, \"Have a good day.\");\n        }\n        else\n            flag = true;\n\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":2322341,"reputation":93,"user_id":2037720,"accept_rate":25,"display_name":"user2037720"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8395,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1693965905,"creation_date":1360115191,"question_id":14720251,"body_markdown":"Im having problems with my program. the program displays the first JOption message dialog box, but when you input a value, it fails to display the second dialog box??\r\n\r\n\r\n    import java.util.Scanner;\r\n    import javax.swing.JOptionPane;\r\n    \r\n    public class javaCalculator \r\n    {\r\n\tpublic static void main(String[] args) \r\n\t{\r\n\t\tint num1;\r\n\t\tint num2;\r\n\t\tString operation;\r\n\r\n\t\t\r\n\t\tScanner input = new Scanner(System.in);\r\n\t\t\r\n\t\tJOptionPane.showInputDialog(null,&quot;please enter the first number&quot;);\r\n\t\tnum1 = input.nextInt();\r\n\r\n\t\tJOptionPane.showInputDialog(null,&quot;please enter the second number&quot;);\r\n\t\tnum2 = input.nextInt();\r\n\t\t\r\n\t\t\r\n\t\tJOptionPane.showInputDialog(null,&quot;Please enter operation&quot;);\r\n\t\toperation = input.next();\r\n\t\t\r\n\t\tif (operation.equals (&quot;+&quot;))\r\n\t\t{\r\n\t\t\tJOptionPane.showMessageDialog(null,&quot;your answer is&quot; + &quot; &quot; + (num1 + num2));\r\n\t\t}\r\n\t\tif \t(operation.equals (&quot;-&quot;))\r\n\t\t{\r\n\t\t\tJOptionPane.showMessageDialog(null,&quot;your answer is&quot; + &quot; &quot; + (num1 - num2));\r\n\t\t}\r\n\t\t\r\n\t\tif (operation.equals (&quot;/&quot;))\r\n\t\t{\r\n\t\t\tJOptionPane.showMessageDialog(null,&quot;your answer is&quot; + &quot; &quot; + (num1 / num2));\r\n\t\t}\r\n\t\tif (operation.equals (&quot;*&quot;))\r\n\t\t{\r\n\t\t\tJOptionPane.showMessageDialog(null,&quot;your answer is&quot; + &quot; &quot; + (num1 * num2));\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\t\r\n\r\n\t}\r\n\r\n","title":"Basic Calculator","body":"<p>Im having problems with my program. the program displays the first JOption message dialog box, but when you input a value, it fails to display the second dialog box??</p>\n\n<pre><code>import java.util.Scanner;\nimport javax.swing.JOptionPane;\n\npublic class javaCalculator \n{\npublic static void main(String[] args) \n{\n    int num1;\n    int num2;\n    String operation;\n\n\n    Scanner input = new Scanner(System.in);\n\n    JOptionPane.showInputDialog(null,\"please enter the first number\");\n    num1 = input.nextInt();\n\n    JOptionPane.showInputDialog(null,\"please enter the second number\");\n    num2 = input.nextInt();\n\n\n    JOptionPane.showInputDialog(null,\"Please enter operation\");\n    operation = input.next();\n\n    if (operation.equals (\"+\"))\n    {\n        JOptionPane.showMessageDialog(null,\"your answer is\" + \" \" + (num1 + num2));\n    }\n    if  (operation.equals (\"-\"))\n    {\n        JOptionPane.showMessageDialog(null,\"your answer is\" + \" \" + (num1 - num2));\n    }\n\n    if (operation.equals (\"/\"))\n    {\n        JOptionPane.showMessageDialog(null,\"your answer is\" + \" \" + (num1 / num2));\n    }\n    if (operation.equals (\"*\"))\n    {\n        JOptionPane.showMessageDialog(null,\"your answer is\" + \" \" + (num1 * num2));\n    }\n\n\n}\n\n\n}\n</code></pre>\n"},{"tags":["java","unicode","utf-8","utf-16","codepoint"],"comments":[{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":2,"creation_date":1610415815,"post_id":65633261,"comment_id":116120343,"body_markdown":"Your question is confusing, because Unicode codepoints are not related to any encoding - they&#39;re just numbers. A &quot;code point (UTF8 or UTF32)&quot; doesn&#39;t exist and is leading responders the wrong way. You just want to sort by code point, period.","body":"Your question is confusing, because Unicode codepoints are not related to any encoding - they&#39;re just numbers. A &quot;code point (UTF8 or UTF32)&quot; doesn&#39;t exist and is leading responders the wrong way. You just want to sort by code point, period."}],"answers":[{"tags":[],"owner":{"account_id":19941048,"reputation":1475,"user_id":14911094,"display_name":"Jaysmito Mukherjee"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1610125689,"creation_date":1610125689,"answer_id":65633343,"question_id":65633261,"body_markdown":"**Easiest way :** \r\n\r\n    inputValues.sort(String.CASE_INSENSITIVE_ORDER.reversed());\r\n\r\n&lt;br&gt;&lt;br&gt;\r\n\r\n\r\n**Little comples but with more control :**\r\n\r\nConvert the List into an array :\r\n\r\n    String[] arr = new String[inputValues .size()]; \r\n    for (int i =0; i &lt; inputValues .size(); i++) \r\n        arr[i] = inputValues.get(i); \r\n\r\nThere are other efficient ways to convert List to array but this is the simple to understand!\r\n\r\nThen use this function:\r\n\r\n     public static String[] textSort(String[] words) {\r\n        for (int i = 0; i &lt; words.length; i++) {\r\n            for (int j = i + 1; j &lt; words.length; j++) {\r\n                if (words[i].toUpperCase().compareTo(words[j].toUpperCase()) &lt; 0) {//change this to &gt; if you want to sort reverse order\r\n                    String temp = words[i];\r\n                    words[i] = words[j];\r\n                    words[j] = temp;\r\n                }\r\n            }\r\n        }\r\n    \r\n        return words;\r\n    }\r\n","title":"How to sort in Unicode code point (UTF8 or UTF32) sorted order in java?","body":"<p><strong>Easiest way :</strong></p>\n<pre><code>inputValues.sort(String.CASE_INSENSITIVE_ORDER.reversed());\n</code></pre>\n<p><br><br></p>\n<p><strong>Little comples but with more control :</strong></p>\n<p>Convert the List into an array :</p>\n<pre><code>String[] arr = new String[inputValues .size()]; \nfor (int i =0; i &lt; inputValues .size(); i++) \n    arr[i] = inputValues.get(i); \n</code></pre>\n<p>There are other efficient ways to convert List to array but this is the simple to understand!</p>\n<p>Then use this function:</p>\n<pre><code> public static String[] textSort(String[] words) {\n    for (int i = 0; i &lt; words.length; i++) {\n        for (int j = i + 1; j &lt; words.length; j++) {\n            if (words[i].toUpperCase().compareTo(words[j].toUpperCase()) &lt; 0) {//change this to &gt; if you want to sort reverse order\n                String temp = words[i];\n                words[i] = words[j];\n                words[j] = temp;\n            }\n        }\n    }\n\n    return words;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1610695315,"creation_date":1610127391,"answer_id":65633763,"question_id":65633261,"body_markdown":"[Maybe not everyone noticed that, what appears as a capital `A` is actually a:\r\n\r\n`Mathematical Italic Capital A (U+1D434)`\r\n\r\n]\r\n\r\nYour problem is that in Java characters beyond the BMP are encoded as two characters.\r\n\r\nTo sort the list according to a codepoint-wise lexicographic order, you need to define your own `Comparator`:\r\n\r\n```java\r\npublic class CodePointComparator implements Comparator&lt;String&gt; {\r\n @Override\r\n public int compare(String o1, String o2) {\r\n    int len1 = o1.length();\r\n    int len2 = o2.length();\r\n    int lim = Math.min(len1, len2);\r\n    int k = 0;\r\n    while (k &lt; lim) {\r\n      char c1 = o1.charAt(k);\r\n      char c2 = o2.charAt(k);\r\n      if (c1 != c2) {\r\n        // A high surrogate is greater than a non-surrogate character\r\n        if (Character.isHighSurrogate(c1) != Character.isHighSurrogate(c2)) {\r\n          return Character.isHighSurrogate(c1) ? 1 : -1;\r\n        }\r\n        return c1 - c2;\r\n      }\r\n      k++;\r\n    }\r\n    return len1 - len2;\r\n  }\r\n}\r\n```\r\nand pass it as argument to the `List#sort` method. I operate directly on surrogate pairs to gain some performance.","title":"How to sort in Unicode code point (UTF8 or UTF32) sorted order in java?","body":"<p>[Maybe not everyone noticed that, what appears as a capital <code>A</code> is actually a:</p>\n<p><code>Mathematical Italic Capital A (U+1D434)</code></p>\n<p>]</p>\n<p>Your problem is that in Java characters beyond the BMP are encoded as two characters.</p>\n<p>To sort the list according to a codepoint-wise lexicographic order, you need to define your own <code>Comparator</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CodePointComparator implements Comparator&lt;String&gt; {\n @Override\n public int compare(String o1, String o2) {\n    int len1 = o1.length();\n    int len2 = o2.length();\n    int lim = Math.min(len1, len2);\n    int k = 0;\n    while (k &lt; lim) {\n      char c1 = o1.charAt(k);\n      char c2 = o2.charAt(k);\n      if (c1 != c2) {\n        // A high surrogate is greater than a non-surrogate character\n        if (Character.isHighSurrogate(c1) != Character.isHighSurrogate(c2)) {\n          return Character.isHighSurrogate(c1) ? 1 : -1;\n        }\n        return c1 - c2;\n      }\n      k++;\n    }\n    return len1 - len2;\n  }\n}\n</code></pre>\n<p>and pass it as argument to the <code>List#sort</code> method. I operate directly on surrogate pairs to gain some performance.</p>\n"},{"tags":[],"owner":{"account_id":1826492,"reputation":1650,"user_id":1659114,"accept_rate":58,"display_name":"genonymous"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1610415340,"creation_date":1610415340,"answer_id":65676891,"question_id":65633261,"body_markdown":"Sorry, I am not looking for lexicographic sorting but simply sorting based on Unicode code point (UTF-8 or UTF-32). \r\n\r\nThere is a comment in one of the libraries that I am trying to use:\r\n\r\n&gt;  Input values (keys). These must be provided to Builder in Unicode code point (UTF8 or UTF32) sorted order. Note that sorting by Java&#39;s String.compareTo, which is UTF16 sorted order, is not correct and can lead to exceptions while building the FST\r\n\r\nI was running into issues because I was using `Collections.sort` which is UTF-16 sorted order for Java. Finally I wrote my own compare function as below which resolves the issues I am facing. I am surprised that it is not available natively or with some other popular libraries.\r\n\r\n    public static void sort(List&lt;String&gt; list) {\r\n        Collections.sort(\r\n                list,\r\n                new Comparator&lt;String&gt;() {\r\n                    @Override\r\n                    public int compare(String s1, String s2) {\r\n                        int n1 = s1.length();\r\n                        int n2 = s2.length();\r\n                        int min = Math.min(n1, n2);\r\n                        for (int i = 0; i &lt; min; i++) {\r\n                            int c1 = s1.codePointAt(i);\r\n                            int c2 = s2.codePointAt(i);\r\n                            if (c1 != c2) {\r\n                                return c1 - c2;\r\n                            }\r\n                        }\r\n                        return n1 - n2;\r\n                    }\r\n                });\r\n    }\r\n\r\n\r\n\r\n\r\n","title":"How to sort in Unicode code point (UTF8 or UTF32) sorted order in java?","body":"<p>Sorry, I am not looking for lexicographic sorting but simply sorting based on Unicode code point (UTF-8 or UTF-32).</p>\n<p>There is a comment in one of the libraries that I am trying to use:</p>\n<blockquote>\n<p>Input values (keys). These must be provided to Builder in Unicode code point (UTF8 or UTF32) sorted order. Note that sorting by Java's String.compareTo, which is UTF16 sorted order, is not correct and can lead to exceptions while building the FST</p>\n</blockquote>\n<p>I was running into issues because I was using <code>Collections.sort</code> which is UTF-16 sorted order for Java. Finally I wrote my own compare function as below which resolves the issues I am facing. I am surprised that it is not available natively or with some other popular libraries.</p>\n<pre><code>public static void sort(List&lt;String&gt; list) {\n    Collections.sort(\n            list,\n            new Comparator&lt;String&gt;() {\n                @Override\n                public int compare(String s1, String s2) {\n                    int n1 = s1.length();\n                    int n2 = s2.length();\n                    int min = Math.min(n1, n2);\n                    for (int i = 0; i &lt; min; i++) {\n                        int c1 = s1.codePointAt(i);\n                        int c2 = s2.codePointAt(i);\n                        if (c1 != c2) {\n                            return c1 - c2;\n                        }\n                    }\n                    return n1 - n2;\n                }\n            });\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3558883,"reputation":1652,"user_id":2971851,"accept_rate":100,"display_name":"Steven Chou"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693965597,"creation_date":1693965597,"answer_id":77048620,"question_id":65633261,"body_markdown":"\r\nUse sort:\r\n\r\n    Collections.sort(keywordsList, new UTF8Comparator());\r\n\r\nand create a custom UTF8 comparator:\r\n\r\n    class UTF8Comparator implements Comparator&lt;String&gt; {\r\n\t\t@Override\r\n\t\tpublic int compare(String str1, String str2) {\r\n\t\t\tbyte[] bytes1 = str1.getBytes(java.nio.charset.StandardCharsets.UTF_8);\r\n\t\t\tbyte[] bytes2 = str2.getBytes(java.nio.charset.StandardCharsets.UTF_8);\r\n\r\n\t\t\tfor (int i = 0; i &lt; Math.min(bytes1.length, bytes2.length); i++) {\r\n\t\t\t\tif (bytes1[i] != bytes2[i]) {\r\n\t\t\t\t\treturn bytes1[i] - bytes2[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn bytes1.length - bytes2.length;\r\n\t\t}\r\n\t}\r\n\r\n\r\n","title":"How to sort in Unicode code point (UTF8 or UTF32) sorted order in java?","body":"<p>Use sort:</p>\n<pre><code>Collections.sort(keywordsList, new UTF8Comparator());\n</code></pre>\n<p>and create a custom UTF8 comparator:</p>\n<pre><code>class UTF8Comparator implements Comparator&lt;String&gt; {\n    @Override\n    public int compare(String str1, String str2) {\n        byte[] bytes1 = str1.getBytes(java.nio.charset.StandardCharsets.UTF_8);\n        byte[] bytes2 = str2.getBytes(java.nio.charset.StandardCharsets.UTF_8);\n\n        for (int i = 0; i &lt; Math.min(bytes1.length, bytes2.length); i++) {\n            if (bytes1[i] != bytes2[i]) {\n                return bytes1[i] - bytes2[i];\n            }\n        }\n\n        return bytes1.length - bytes2.length;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1826492,"reputation":1650,"user_id":1659114,"accept_rate":58,"display_name":"genonymous"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":938,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":65676891,"answer_count":4,"score":0,"last_activity_date":1693965597,"creation_date":1610125321,"question_id":65633261,"body_markdown":"Java&#39;s String.compareTo uses UTF16 sorted order. \r\n\r\n    List&lt;String&gt; inputValues = Arrays.asList(&quot;&#119860;&quot;,&quot;ﬁgure&quot;, &quot;ﬂagship&quot;, &quot;zion&quot;);\r\n    Collections.sort(inputValues);\r\n\r\nAbove code results into sorted order `[zion, &#119860;, ﬁgure, ﬂagship]`\r\nHowever, I want this sorted order to be `[zion, ﬁgure, ﬂagship, &#119860;]` \r\nNote that some of the characters are ligatures.","title":"How to sort in Unicode code point (UTF8 or UTF32) sorted order in java?","body":"<p>Java's String.compareTo uses UTF16 sorted order.</p>\n<pre><code>List&lt;String&gt; inputValues = Arrays.asList(&quot;𝐴&quot;,&quot;ﬁgure&quot;, &quot;ﬂagship&quot;, &quot;zion&quot;);\nCollections.sort(inputValues);\n</code></pre>\n<p>Above code results into sorted order <code>[zion, 𝐴, ﬁgure, ﬂagship]</code>\nHowever, I want this sorted order to be <code>[zion, ﬁgure, ﬂagship, 𝐴]</code>\nNote that some of the characters are ligatures.</p>\n"},{"tags":["java","spring","eclipse","gradle"],"comments":[{"owner":{"account_id":5635179,"reputation":999,"user_id":4460867,"display_name":"Martin Linha"},"score":0,"creation_date":1488366664,"post_id":42529580,"comment_id":72195988,"body_markdown":"What is the full output? Use &quot;-s&quot; argument to the build command please.","body":"What is the full output? Use &quot;-s&quot; argument to the build command please."},{"owner":{"account_id":10359929,"reputation":11,"user_id":7640729,"display_name":"anon"},"score":0,"creation_date":1488370804,"post_id":42529580,"comment_id":72198769,"body_markdown":"@MartinLinha Error details http://pastebin.com/PgAmm0Sx","body":"@MartinLinha Error details <a href=\"http://pastebin.com/PgAmm0Sx\" rel=\"nofollow noreferrer\">pastebin.com/PgAmm0Sx</a>"}],"answers":[{"tags":[],"owner":{"account_id":5635179,"reputation":999,"user_id":4460867,"display_name":"Martin Linha"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1488371082,"creation_date":1488371082,"answer_id":42531663,"question_id":42529580,"body_markdown":"Your build cannot be compiled, as stated\r\n\r\n`Compilation failed; see the compiler error output for details.`\r\n\r\ncheck the code and find what causes it to not to build. Try to run the command with `-s -i` options to find out what is wrong.","title":"Execution failed for task &#39;:compileJava&#39;. Gradle","body":"<p>Your build cannot be compiled, as stated</p>\n\n<p><code>Compilation failed; see the compiler error output for details.</code></p>\n\n<p>check the code and find what causes it to not to build. Try to run the command with <code>-s -i</code> options to find out what is wrong.</p>\n"},{"tags":[],"owner":{"account_id":4629226,"reputation":11,"user_id":3752189,"display_name":"Selva kumaran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1521742323,"creation_date":1521739804,"answer_id":49434973,"question_id":42529580,"body_markdown":"Change the javahome variable to point to the proper directory, i.e. to your jdk home directory. \r\n\r\nIn Eclipse you can change the path in a run configuration under Java Home, for example to `C:\\Program Files\\Java\\jdk-9.0.4`.\r\nThen run the configuration as `clean` and `assemble`.\r\n\r\n[![Eclipse][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6DpN7.png","title":"Execution failed for task &#39;:compileJava&#39;. Gradle","body":"<p>Change the javahome variable to point to the proper directory, i.e. to your jdk home directory. </p>\n\n<p>In Eclipse you can change the path in a run configuration under Java Home, for example to <code>C:\\Program Files\\Java\\jdk-9.0.4</code>.\nThen run the configuration as <code>clean</code> and <code>assemble</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/6DpN7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6DpN7.png\" alt=\"Eclipse\"></a></p>\n"}],"owner":{"account_id":10359929,"reputation":11,"user_id":7640729,"display_name":"anon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27313,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1693962536,"creation_date":1488365037,"question_id":42529580,"body_markdown":"I am trying to set up my first gradle project in eclipse but im having problem with building gradle. I&#39; ve copied build.gradle from spring.io but still it wont build properly. I get  Execution failed for task &#39;:compileJava&#39;. My build.gradle file looks like this \r\n\r\n     buildscript {\r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:1.5.1.RELEASE&quot;)\r\n    }\r\n    }\r\n\r\n    apply plugin: &#39;java&#39;\r\n    apply plugin: &#39;eclipse&#39;\r\n    apply plugin: &#39;idea&#39;\r\n    apply plugin: &#39;org.springframework.boot&#39;\r\n\r\n    jar {\r\n    baseName = &#39;gs-spring-boot&#39;\r\n    version =  &#39;0.1.0&#39;\r\n    }\r\n\r\n    repositories {\r\n    mavenCentral()\r\n    }\r\n\r\n    sourceCompatibility = 1.8\r\n    targetCompatibility = 1.8\r\n\r\n    dependencies {\r\n    // tag::jetty[]\r\n    compile(&quot;org.springframework.boot:spring-boot-starter-web&quot;) {\r\n        exclude module: &quot;spring-boot-starter-tomcat&quot;\r\n    }\r\n    compile(&quot;org.springframework.boot:spring-boot-starter-jetty&quot;)\r\n    // end::jetty[]\r\n    // tag::actuator[]\r\n    compile(&quot;org.springframework.boot:spring-boot-starter-actuator&quot;)\r\n    // end::actuator[]\r\n    testCompile(&quot;junit:junit&quot;)\r\n    }","title":"Execution failed for task &#39;:compileJava&#39;. Gradle","body":"<p>I am trying to set up my first gradle project in eclipse but im having problem with building gradle. I' ve copied build.gradle from spring.io but still it wont build properly. I get  Execution failed for task ':compileJava'. My build.gradle file looks like this </p>\n\n<pre><code> buildscript {\nrepositories {\n    mavenCentral()\n}\ndependencies {\n    classpath(\"org.springframework.boot:spring-boot-gradle-plugin:1.5.1.RELEASE\")\n}\n}\n\napply plugin: 'java'\napply plugin: 'eclipse'\napply plugin: 'idea'\napply plugin: 'org.springframework.boot'\n\njar {\nbaseName = 'gs-spring-boot'\nversion =  '0.1.0'\n}\n\nrepositories {\nmavenCentral()\n}\n\nsourceCompatibility = 1.8\ntargetCompatibility = 1.8\n\ndependencies {\n// tag::jetty[]\ncompile(\"org.springframework.boot:spring-boot-starter-web\") {\n    exclude module: \"spring-boot-starter-tomcat\"\n}\ncompile(\"org.springframework.boot:spring-boot-starter-jetty\")\n// end::jetty[]\n// tag::actuator[]\ncompile(\"org.springframework.boot:spring-boot-starter-actuator\")\n// end::actuator[]\ntestCompile(\"junit:junit\")\n}\n</code></pre>\n"},{"tags":["java","printing","jasper-reports"],"answers":[{"tags":[],"owner":{"account_id":2729582,"reputation":2238,"user_id":2353657,"accept_rate":60,"display_name":"Endrik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1394878229,"creation_date":1394878229,"answer_id":22422371,"question_id":22421905,"body_markdown":"I&#39;m not quite sure about what are your intentions, but if you&#39;re just saying that you don&#39;t want the Jasper Viewer (the window that opens the report as a preview after it&#39;s generation) you have only to remove the line: `JasperViewer.viewReport(jp, false);`","title":"how to print jasper report without preview in java","body":"<p>I'm not quite sure about what are your intentions, but if you're just saying that you don't want the Jasper Viewer (the window that opens the report as a preview after it's generation) you have only to remove the line: <code>JasperViewer.viewReport(jp, false);</code></p>\n"},{"tags":[],"owner":{"account_id":958762,"reputation":4773,"user_id":983559,"display_name":"dada67"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1395064198,"creation_date":1395064198,"answer_id":22456101,"question_id":22421905,"body_markdown":"You can use JRPrintServiceExporter to print a JasperPrint report.\r\n\r\nSee demo/samples/printservice in the JasperReports distribution package for an example.","title":"how to print jasper report without preview in java","body":"<p>You can use JRPrintServiceExporter to print a JasperPrint report.</p>\n\n<p>See demo/samples/printservice in the JasperReports distribution package for an example.</p>\n"},{"tags":[],"owner":{"account_id":2428640,"reputation":73,"user_id":2120061,"accept_rate":60,"display_name":"Hasan Dulanga"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1402598005,"creation_date":1402598005,"answer_id":24191547,"question_id":22421905,"body_markdown":"From \r\n\r\n    JasperViewer.viewReport(jp, false);\r\n\r\nYou can get a preview.\r\nFrom\r\n\r\n    JasperPrintManager.printReport(jp,false);\r\n\r\nYou can directly print your report.\r\nIf you don&#39;t want a preview use only second code.","title":"how to print jasper report without preview in java","body":"<p>From </p>\n\n<pre><code>JasperViewer.viewReport(jp, false);\n</code></pre>\n\n<p>You can get a preview.\nFrom</p>\n\n<pre><code>JasperPrintManager.printReport(jp,false);\n</code></pre>\n\n<p>You can directly print your report.\nIf you don't want a preview use only second code.</p>\n"}],"owner":{"account_id":2875858,"reputation":59,"user_id":2467945,"accept_rate":0,"display_name":"DeadLuck"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10953,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1693958830,"creation_date":1394875294,"question_id":22421905,"body_markdown":"I&#39;m generating receipt using *JasperReports* but i want to print it automatically or just program the attributes without previewing its output. What could be the possible codes.\r\n\r\n    try {\r\n        String get1 = lblORNum.getText();\r\n        String get2 = lblInfoID.getText();\r\n        JasperDesign jd = JRXmlLoader.load(&quot;directory&quot;);\r\n        String sql = &quot;select * from student, transaction, cashier where transaction.orNum=&quot; + get1 + &quot; AND student.id=&#39;&quot; + get2 + &quot;&#39;&quot;;\r\n        JRDesignQuery query = new JRDesignQuery();\r\n        query.setText(sql);\r\n        jd.setQuery(query);\r\n        JasperReport jr = JasperCompileManager.compileReport(jd);\r\n        JasperPrint jp = JasperFillManager.fillReport(jr, null, conn);\r\n        JasperViewer.viewReport(jp, false);\r\n    } catch (Exception e) {\r\n        System.out.println(e.toString());\r\n    }\r\n","title":"how to print jasper report without preview in java","body":"<p>I'm generating receipt using <em>JasperReports</em> but i want to print it automatically or just program the attributes without previewing its output. What could be the possible codes.</p>\n\n<pre><code>try {\n    String get1 = lblORNum.getText();\n    String get2 = lblInfoID.getText();\n    JasperDesign jd = JRXmlLoader.load(\"directory\");\n    String sql = \"select * from student, transaction, cashier where transaction.orNum=\" + get1 + \" AND student.id='\" + get2 + \"'\";\n    JRDesignQuery query = new JRDesignQuery();\n    query.setText(sql);\n    jd.setQuery(query);\n    JasperReport jr = JasperCompileManager.compileReport(jd);\n    JasperPrint jp = JasperFillManager.fillReport(jr, null, conn);\n    JasperViewer.viewReport(jp, false);\n} catch (Exception e) {\n    System.out.println(e.toString());\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":2,"creation_date":1693946683,"post_id":77047396,"comment_id":135826108,"body_markdown":"Please **do not** post images of code, data, error messages, etc. Copy or type the text into the question. Please reserve the use of images for diagrams or demonstrating rendering bugs, things that are impossible to describe accurately via text. Code or sample data in images can&#39;t be copied and pasted in order to search about a problem or reproduce it. For more details read the Meta FAQ entry [Why not upload images of code/errors when asking a question?](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557)","body":"Please <b>do not</b> post images of code, data, error messages, etc. Copy or type the text into the question. Please reserve the use of images for diagrams or demonstrating rendering bugs, things that are impossible to describe accurately via text. Code or sample data in images can&#39;t be copied and pasted in order to search about a problem or reproduce it. For more details read the Meta FAQ entry <a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557\">Why not upload images of code/errors when asking a question?</a>"}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693958597,"creation_date":1693947544,"answer_id":77047713,"question_id":77047396,"body_markdown":"&gt; _&quot;... I&#39;m pretty new to triple nested loops ...&quot;_\r\n\r\nThey are not too common, I find that most data can be parsed with just 1 or 2 loops.\r\n\r\n&gt; _&quot;... I&#39;m aware the first loop is for rows, the second for columns and the third is for the values of the columns. ...&quot;_\r\n\r\nThe third loop is not technically required; use the _[String#repeat](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#repeat(int))_ method.\r\n\r\nYou&#39;ll need two _[iterative for-loops](https://en.wikipedia.org/wiki/Iteration)_, and two variables to hold values.  \r\nIterate on _n_, then iterate on _n&amp;minus;&amp;Delta;n_.\r\n- _n_ for the amount of tokens\r\n- _&amp;Delta;n_ for the decrease in tokens, and token length\r\n\r\nHere is an example.\r\n\r\n```java\r\nString string(char letter, int n) {\r\n    StringBuilder string = new StringBuilder();\r\n    String newline = System.lineSeparator();\r\n    char copy;\r\n    int n1 = n;\r\n    for (int i = 0, j; i &lt; n; i++) {\r\n        if (i != 0) string.append(newline);\r\n        copy = letter;\r\n        for (j = 0; j &lt; n1; j++) {\r\n            if (j != 0) string.append(&#39; &#39;);\r\n            if (copy - 1 == &#39;Z&#39;) copy = &#39;A&#39;;\r\n            string.append(String.valueOf(copy++).repeat(n - j));\r\n        }\r\n        n1--;\r\n    }\r\n    return string.toString();\r\n}\r\n```\r\n\r\nIn your code you have assigned _castAscii_ to (_letter &amp;minus; count_).  \r\nThis is incorrect, you want to be increasing _letter_ by _&amp;Delta;n_; and not at the declaration.\r\n\r\nAnd, you are then casting _castAscii_ to a _char_.  \r\nI would remove _ch_ and simply cast _castAscii_ when it&#39;s appended to _output_.\r\n\r\n```java\r\noutput += (char) castAscii\r\n```\r\n\r\nAlso, the condition for the inner-most _loop_ should be _k &lt; amount - j_.  \r\nThe repeat amount is relative to _j_ and not _&amp;Delta;n_.\r\n\r\n```java\r\nfor(int k  =0 ; k &lt; amount - j; k++)\r\n```\r\n\r\nFinally, after exiting the inner-most _loop_, increment _letter_ by 1, and check for _&#39;Z&#39;_.\r\n\r\n```java\r\nfor(int k  =0 ; k &lt; amount - j; k++){\r\n    output += (char) castAscii;\r\n\r\n}\r\nif (castAscii++ == &#39;Z&#39;) castAscii = &#39;A&#39;;\r\n```\r\n\r\nHere is the re-factored code.\r\n\r\n```java\r\npublic String toString() {\r\n    String output = &quot;&quot;;\r\n    int count = 0;\r\n    int castAscii = (int) letter;\r\n    for (int i = 0; i &lt; amount; i++) {\r\n\r\n        for (int j = 0; j &lt; amount - count; j++) {\r\n            output += &quot; &quot;;\r\n\r\n            for (int k = 0; k &lt; amount - j; k++) {\r\n                output += (char) castAscii;\r\n\r\n            }\r\n            if (castAscii++ == &#39;Z&#39;) castAscii = &#39;A&#39;;\r\n\r\n        }\r\n        castAscii = letter;\r\n\r\n        output += &quot;\\n&quot;;\r\n        count++;\r\n\r\n\r\n    }\r\n\r\n    return output;\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n CCCC DDD EE F\r\n CCCC DDD EE\r\n CCCC DDD\r\n CCCC\r\n\r\n AAAAA BBBB CCC DD E\r\n AAAAA BBBB CCC DD\r\n AAAAA BBBB CCC\r\n AAAAA BBBB\r\n AAAAA\r\n\r\n BBBBBBB CCCCCC DDDDD EEEE FFF GG H\r\n BBBBBBB CCCCCC DDDDD EEEE FFF GG\r\n BBBBBBB CCCCCC DDDDD EEEE FFF\r\n BBBBBBB CCCCCC DDDDD EEEE\r\n BBBBBBB CCCCCC DDDDD\r\n BBBBBBB CCCCCC\r\n BBBBBBB\r\n\r\n XXXXXX YYYYY ZZZZ AAA BB C\r\n XXXXXX YYYYY ZZZZ AAA BB\r\n XXXXXX YYYYY ZZZZ AAA\r\n XXXXXX YYYYY ZZZZ\r\n XXXXXX YYYYY\r\n XXXXXX\r\n\r\n ZZZZZZZZ AAAAAAA BBBBBB CCCCC DDDD EEE FF G\r\n ZZZZZZZZ AAAAAAA BBBBBB CCCCC DDDD EEE FF\r\n ZZZZZZZZ AAAAAAA BBBBBB CCCCC DDDD EEE\r\n ZZZZZZZZ AAAAAAA BBBBBB CCCCC DDDD\r\n ZZZZZZZZ AAAAAAA BBBBBB CCCCC\r\n ZZZZZZZZ AAAAAAA BBBBBB\r\n ZZZZZZZZ AAAAAAA\r\n ZZZZZZZZ\r\n```","title":"Triple Nested Loop of Wrapped Letters?","body":"<blockquote>\n<p><em>&quot;... I'm pretty new to triple nested loops ...&quot;</em></p>\n</blockquote>\n<p>They are not too common, I find that most data can be parsed with just 1 or 2 loops.</p>\n<blockquote>\n<p><em>&quot;... I'm aware the first loop is for rows, the second for columns and the third is for the values of the columns. ...&quot;</em></p>\n</blockquote>\n<p>The third loop is not technically required; use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#repeat(int)\" rel=\"nofollow noreferrer\">String#repeat</a></em> method.</p>\n<p>You'll need two <em><a href=\"https://en.wikipedia.org/wiki/Iteration\" rel=\"nofollow noreferrer\">iterative for-loops</a></em>, and two variables to hold values.<br />\nIterate on <em>n</em>, then iterate on <em>n−Δn</em>.</p>\n<ul>\n<li><em>n</em> for the amount of tokens</li>\n<li><em>Δn</em> for the decrease in tokens, and token length</li>\n</ul>\n<p>Here is an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String string(char letter, int n) {\n    StringBuilder string = new StringBuilder();\n    String newline = System.lineSeparator();\n    char copy;\n    int n1 = n;\n    for (int i = 0, j; i &lt; n; i++) {\n        if (i != 0) string.append(newline);\n        copy = letter;\n        for (j = 0; j &lt; n1; j++) {\n            if (j != 0) string.append(' ');\n            if (copy - 1 == 'Z') copy = 'A';\n            string.append(String.valueOf(copy++).repeat(n - j));\n        }\n        n1--;\n    }\n    return string.toString();\n}\n</code></pre>\n<p>In your code you have assigned <em>castAscii</em> to (<em>letter − count</em>).<br />\nThis is incorrect, you want to be increasing <em>letter</em> by <em>Δn</em>; and not at the declaration.</p>\n<p>And, you are then casting <em>castAscii</em> to a <em>char</em>.<br />\nI would remove <em>ch</em> and simply cast <em>castAscii</em> when it's appended to <em>output</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>output += (char) castAscii\n</code></pre>\n<p>Also, the condition for the inner-most <em>loop</em> should be <em>k &lt; amount - j</em>.<br />\nThe repeat amount is relative to <em>j</em> and not <em>Δn</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for(int k  =0 ; k &lt; amount - j; k++)\n</code></pre>\n<p>Finally, after exiting the inner-most <em>loop</em>, increment <em>letter</em> by 1, and check for <em>'Z'</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for(int k  =0 ; k &lt; amount - j; k++){\n    output += (char) castAscii;\n\n}\nif (castAscii++ == 'Z') castAscii = 'A';\n</code></pre>\n<p>Here is the re-factored code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public String toString() {\n    String output = &quot;&quot;;\n    int count = 0;\n    int castAscii = (int) letter;\n    for (int i = 0; i &lt; amount; i++) {\n\n        for (int j = 0; j &lt; amount - count; j++) {\n            output += &quot; &quot;;\n\n            for (int k = 0; k &lt; amount - j; k++) {\n                output += (char) castAscii;\n\n            }\n            if (castAscii++ == 'Z') castAscii = 'A';\n\n        }\n        castAscii = letter;\n\n        output += &quot;\\n&quot;;\n        count++;\n\n\n    }\n\n    return output;\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code> CCCC DDD EE F\n CCCC DDD EE\n CCCC DDD\n CCCC\n\n AAAAA BBBB CCC DD E\n AAAAA BBBB CCC DD\n AAAAA BBBB CCC\n AAAAA BBBB\n AAAAA\n\n BBBBBBB CCCCCC DDDDD EEEE FFF GG H\n BBBBBBB CCCCCC DDDDD EEEE FFF GG\n BBBBBBB CCCCCC DDDDD EEEE FFF\n BBBBBBB CCCCCC DDDDD EEEE\n BBBBBBB CCCCCC DDDDD\n BBBBBBB CCCCCC\n BBBBBBB\n\n XXXXXX YYYYY ZZZZ AAA BB C\n XXXXXX YYYYY ZZZZ AAA BB\n XXXXXX YYYYY ZZZZ AAA\n XXXXXX YYYYY ZZZZ\n XXXXXX YYYYY\n XXXXXX\n\n ZZZZZZZZ AAAAAAA BBBBBB CCCCC DDDD EEE FF G\n ZZZZZZZZ AAAAAAA BBBBBB CCCCC DDDD EEE FF\n ZZZZZZZZ AAAAAAA BBBBBB CCCCC DDDD EEE\n ZZZZZZZZ AAAAAAA BBBBBB CCCCC DDDD\n ZZZZZZZZ AAAAAAA BBBBBB CCCCC\n ZZZZZZZZ AAAAAAA BBBBBB\n ZZZZZZZZ AAAAAAA\n ZZZZZZZZ\n</code></pre>\n"}],"owner":{"account_id":26568556,"reputation":43,"user_id":20195143,"display_name":"Maybe"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":112,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"accepted_answer_id":77047713,"answer_count":1,"score":-1,"last_activity_date":1693958597,"creation_date":1693943613,"question_id":77047396,"body_markdown":"Description:\r\n\r\n&gt; Used nested loops to print out a letter pattern as shown below. Wrap\r\n&gt; around the letters from Z to A.\r\n\r\nSome possible inputs:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThis is the output for &#39;X&#39; with &#39;6&#39;:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nThis is the output for &#39;C&#39; with &#39;4&#39;:\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\nI&#39;m pretty new to triple nested loops, although I&#39;m aware the first loop is for rows, the second for columns and the third is for the values of the columns. I&#39;m struggling to see why each of my rows have the same amount of letters next to each other. As well as how to wrap the letters to the next without any permeant changes. My Output Below + Code:\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BQmoE.png\r\n  [2]: https://i.stack.imgur.com/hueas.png\r\n  [3]: https://i.stack.imgur.com/d61EB.png\r\n  [4]: https://i.stack.imgur.com/9s4U0.png\r\n\r\n\r\n    public class TriangleFive\r\n    {\r\n       private char letter;\r\n       private int amount;\r\n    \r\n    \tpublic TriangleFive()\r\n    \t{\r\n    \t\tthis(&#39;a&#39;,0);\r\n    \t}\r\n    \r\n    \tpublic TriangleFive(char c, int amt)\r\n    \t{\r\n    \t\tletter = c;\r\n    \t\tamount = amt;\r\n    \t}\r\n    \r\n    \tpublic void setLetter(char c)\r\n    \t{\r\n    \t\tletter = c;\r\n    \t}\r\n    \r\n    \tpublic void setAmount(int amt)\r\n    \t{\r\n    \t\tamount = amt;\r\n    \t}\r\n    \r\n    \tpublic String toString()\r\n    \t{\r\n    \t\tString output=&quot;&quot;;\r\n    \t\tint count = 0;\r\n    \t\tint castAscii = (int) letter - count;\r\n    \t\tchar ch = (char) castAscii;\r\n    \t\tfor(int i = 0; i&lt; amount; i++){         // Rows\r\n    \r\n    \t\t\tfor(int j = 0; j&lt;amount -count; j++){    // Columns\r\n    \t\t\t\toutput += &quot; &quot;;\r\n    \r\n    \t\t\t\tfor(int k  =0 ; k &lt; amount -count; k++){    // Values in Columns\r\n    \t\t\t\t\toutput +=  ch; \r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \r\n    \t\t\toutput += &quot;\\n&quot;;\r\n    \t\t\tcount++;\r\n    \t\t}\r\n    \r\n    \t\treturn output;\r\n    \t}\r\n    }","title":"Triple Nested Loop of Wrapped Letters?","body":"<p>Description:</p>\n<blockquote>\n<p>Used nested loops to print out a letter pattern as shown below. Wrap\naround the letters from Z to A.</p>\n</blockquote>\n<p>Some possible inputs:</p>\n<p><a href=\"https://i.stack.imgur.com/BQmoE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BQmoE.png\" alt=\"enter image description here\" /></a></p>\n<p>This is the output for 'X' with '6':</p>\n<p><a href=\"https://i.stack.imgur.com/hueas.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hueas.png\" alt=\"enter image description here\" /></a></p>\n<p>This is the output for 'C' with '4':</p>\n<p><a href=\"https://i.stack.imgur.com/d61EB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d61EB.png\" alt=\"enter image description here\" /></a></p>\n<p>I'm pretty new to triple nested loops, although I'm aware the first loop is for rows, the second for columns and the third is for the values of the columns. I'm struggling to see why each of my rows have the same amount of letters next to each other. As well as how to wrap the letters to the next without any permeant changes. My Output Below + Code:</p>\n<p><a href=\"https://i.stack.imgur.com/9s4U0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9s4U0.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>public class TriangleFive\n{\n   private char letter;\n   private int amount;\n\n    public TriangleFive()\n    {\n        this('a',0);\n    }\n\n    public TriangleFive(char c, int amt)\n    {\n        letter = c;\n        amount = amt;\n    }\n\n    public void setLetter(char c)\n    {\n        letter = c;\n    }\n\n    public void setAmount(int amt)\n    {\n        amount = amt;\n    }\n\n    public String toString()\n    {\n        String output=&quot;&quot;;\n        int count = 0;\n        int castAscii = (int) letter - count;\n        char ch = (char) castAscii;\n        for(int i = 0; i&lt; amount; i++){         // Rows\n\n            for(int j = 0; j&lt;amount -count; j++){    // Columns\n                output += &quot; &quot;;\n\n                for(int k  =0 ; k &lt; amount -count; k++){    // Values in Columns\n                    output +=  ch; \n                }\n            }\n\n            output += &quot;\\n&quot;;\n            count++;\n        }\n\n        return output;\n    }\n}\n</code></pre>\n"},{"tags":["java","maven","jlink","jpackage"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691249999,"post_id":76842358,"comment_id":135468026,"body_markdown":"My edit didn&#39;t work as you&#39;ve removed the line separators. Could you please repost that, formatter as code","body":"My edit didn&#39;t work as you&#39;ve removed the line separators. Could you please repost that, formatter as code"},{"owner":{"account_id":1745522,"reputation":99,"user_id":1595856,"accept_rate":50,"display_name":"John Baker"},"score":0,"creation_date":1691250101,"post_id":76842358,"comment_id":135468041,"body_markdown":"There were no line separators. I copy/pasted from the terminal.","body":"There were no line separators. I copy/pasted from the terminal."},{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":0,"creation_date":1691250363,"post_id":76842358,"comment_id":135468079,"body_markdown":"The error seems to be from duplicate resources, not use of incubator modules: `Error: jdk.tools.jlink.plugin.PluginException: Duplicate resources`","body":"The error seems to be from duplicate resources, not use of incubator modules: <code>Error: jdk.tools.jlink.plugin.PluginException: Duplicate resources</code>"},{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":0,"creation_date":1691251012,"post_id":76842358,"comment_id":135468150,"body_markdown":"I can&#39;t find it now, but there was a user with a similar question recently (I think they deleted their question). They were also using Zulu IIRC. In the end it turned out they had a broken JDK installation, and switching JDKs worked for them.","body":"I can&#39;t find it now, but there was a user with a similar question recently (I think they deleted their question). They were also using Zulu IIRC. In the end it turned out they had a broken JDK installation, and switching JDKs worked for them."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691251031,"post_id":76842358,"comment_id":135468152,"body_markdown":"`&lt;your command&gt; 2&gt;&amp;1 | tee stacko.log` and paste that named text file formatted as code","body":"<code>&lt;your command&gt; 2&gt;&amp;1 | tee stacko.log</code> and paste that named text file formatted as code"},{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":0,"creation_date":1691251735,"post_id":76842358,"comment_id":135468227,"body_markdown":"To see if your JDK is the problem you can use the `jmod list` command on the relevant `jmods/*.jmod` files in the jdk installation directory, and then see if the reported duplicate resource indeed exists in both files.","body":"To see if your JDK is the problem you can use the <code>jmod list</code> command on the relevant <code>jmods&#47;*.jmod</code> files in the jdk installation directory, and then see if the reported duplicate resource indeed exists in both files."},{"owner":{"account_id":1745522,"reputation":99,"user_id":1595856,"accept_rate":50,"display_name":"John Baker"},"score":0,"creation_date":1691252289,"post_id":76842358,"comment_id":135468281,"body_markdown":"Weirdly when I list (with show older versions) on azul there are 2 that look identical (same version info). Downloading the &quot;older&quot; release with same details (17.0.8+7 Azul Zulu: 17.44.15) as the &quot;newer&quot; release of same name seems to work. So yes it looks like azul have released a broken build. Or the website is buggy.","body":"Weirdly when I list (with show older versions) on azul there are 2 that look identical (same version info). Downloading the &quot;older&quot; release with same details (17.0.8+7 Azul Zulu: 17.44.15) as the &quot;newer&quot; release of same name seems to work. So yes it looks like azul have released a broken build. Or the website is buggy."}],"answers":[{"tags":[],"owner":{"account_id":1745522,"reputation":99,"user_id":1595856,"accept_rate":50,"display_name":"John Baker"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691253218,"creation_date":1691253218,"answer_id":76842587,"question_id":76842358,"body_markdown":"Solved. \r\n\r\nI looks like azul released a broken jdk 17 build.\r\n\r\nThere were 2 listed with same version (when listing older versions is selected). The first didn&#39;t work, the second with same details does.\r\n\r\nIt is also possible that something went wrong when installing it, however the same thing happened on 2 different macs so think this is unlikely.","title":"jpackage has started failing on Mac OS due to: jlink failed with: WARNING: Using incubator modules: jdk.incubator.foreign, jdk.incubator.vector","body":"<p>Solved.</p>\n<p>I looks like azul released a broken jdk 17 build.</p>\n<p>There were 2 listed with same version (when listing older versions is selected). The first didn't work, the second with same details does.</p>\n<p>It is also possible that something went wrong when installing it, however the same thing happened on 2 different macs so think this is unlikely.</p>\n"},{"tags":[],"owner":{"account_id":1114689,"reputation":11376,"user_id":1104328,"accept_rate":50,"display_name":"Harry"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693955547,"creation_date":1693955547,"answer_id":77048215,"question_id":76842358,"body_markdown":"For anyone that finds this I got this when using jlink. \r\n\r\nI got this as the error\r\n\r\nError: jdk.tools.jlink.plugin.PluginException: Duplicate resources: {lib/libj2gss.dylib=[java.security.jgss, java.security.sasl], conf/management/management.properties=[jdk.management, jdk.unsupported], bin/jrunscript=[java.sql, java.security.jgss, java.scripting, java.transaction.xa, java.xml, java.security.sasl], lib/libosxkrb5.dylib=[java.security.jgss, java.security.sasl], conf/sound.properties=[java.desktop, java.instrument], conf/management/jmxremote.access=[jdk.management, jdk.unsupported], lib/librmi.dylib=[java.rmi, java.scripting], bin/jstatd=[jdk.management, jdk.unsupported], lib/libinstrument.dylib=[java.logging, java.instrument], conf/logging.properties=[java.rmi, java.sql, java.logging, java.transaction.xa, java.management, java.xml, jdk.jfr, java.security.jgss, java.naming, java.scripting, java.prefs, java.net.http, java.security.sasl], lib/libj2pcsc.dylib=[java.sql, java.transaction.xa, java.xml], lib/libmanagement.dylib=[java.naming, java.management, java.net.http], conf/management/jmxremote.password.template=[jdk.management, jdk.unsupported]}\r\n\r\n\r\nThe broken jvm is zulu, from sdkman\r\n\r\n     | 17.0.8       | zulu    | installed  | 17.0.8-zulu\r\n\r\nfix\r\n\r\n    sdk install java 17.0.8-tem","title":"jpackage has started failing on Mac OS due to: jlink failed with: WARNING: Using incubator modules: jdk.incubator.foreign, jdk.incubator.vector","body":"<p>For anyone that finds this I got this when using jlink.</p>\n<p>I got this as the error</p>\n<p>Error: jdk.tools.jlink.plugin.PluginException: Duplicate resources: {lib/libj2gss.dylib=[java.security.jgss, java.security.sasl], conf/management/management.properties=[jdk.management, jdk.unsupported], bin/jrunscript=[java.sql, java.security.jgss, java.scripting, java.transaction.xa, java.xml, java.security.sasl], lib/libosxkrb5.dylib=[java.security.jgss, java.security.sasl], conf/sound.properties=[java.desktop, java.instrument], conf/management/jmxremote.access=[jdk.management, jdk.unsupported], lib/librmi.dylib=[java.rmi, java.scripting], bin/jstatd=[jdk.management, jdk.unsupported], lib/libinstrument.dylib=[java.logging, java.instrument], conf/logging.properties=[java.rmi, java.sql, java.logging, java.transaction.xa, java.management, java.xml, jdk.jfr, java.security.jgss, java.naming, java.scripting, java.prefs, java.net.http, java.security.sasl], lib/libj2pcsc.dylib=[java.sql, java.transaction.xa, java.xml], lib/libmanagement.dylib=[java.naming, java.management, java.net.http], conf/management/jmxremote.password.template=[jdk.management, jdk.unsupported]}</p>\n<p>The broken jvm is zulu, from sdkman</p>\n<pre><code> | 17.0.8       | zulu    | installed  | 17.0.8-zulu\n</code></pre>\n<p>fix</p>\n<pre><code>sdk install java 17.0.8-tem\n</code></pre>\n"}],"owner":{"account_id":1745522,"reputation":99,"user_id":1595856,"accept_rate":50,"display_name":"John Baker"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1693955547,"creation_date":1691249834,"question_id":76842358,"body_markdown":"jpackage has been working fine until today on Mac OS. Now it fails due to some internal use of an incubator package. \r\n\r\nIs there a workaround for this? It still works fine on windows.\r\n\r\nopenjdk version &quot;17.0.8&quot; 2023-07-18 LTS\r\nOpenJDK Runtime Environment Zulu17.44+15-CA (build 17.0.8+7-LTS)\r\nOpenJDK 64-Bit Server VM Zulu17.44+15-CA (build 17.0.8+7-LTS, mixed mode, sharing)\r\n\r\nMac OS 12.6.8 (21G725)\r\n\r\nI am using jpackage from my maven build using exec plugin.\r\n\r\nI am using jpackage with --input on an app image to create a non modular app. This has been fine before. Could this have become a problem?\r\n\r\nMaven -X log\r\n\r\n    jdk.jpackage.internal.PackagerException: jlink failed with: WARNING: Using incubator modules: jdk.incubator.foreign, jdk.incubator.vector\r\n    Error: jdk.tools.jlink.plugin.PluginException: Duplicate resources: {lib/libj2gss.dylib=[java.security.jgss, java.security.sasl], lib/jfr/default.jfc=[jdk.jshell, jdk.jsobject, jdk.jfr, jdk.jlink, jdk.jpackage, jdk.jstatd, jdk.localedata], conf/management/management.properties=[jdk.management.jfr, jdk.management.agent, jdk.sctp, jdk.xml.dom, jdk.unsupported, jdk.management, jdk.net, jdk.random, jdk.nio.mapmode, jdk.security.auth, jdk.unsupported.desktop, jdk.naming.rmi, jdk.zipfs, jdk.naming.dns, jdk.security.jgss], lib/jfr/profile.jfc=[jdk.jshell, jdk.jsobject, jdk.jfr, jdk.jlink, jdk.jpackage, jdk.jstatd, jdk.localedata], lib/libosxkrb5.dylib=[java.security.jgss, java.security.sasl], lib/libmanagement_ext.dylib=[jdk.management, jdk.naming.rmi, jdk.naming.dns], lib/libextnet.dylib=[jdk.net, jdk.random, jdk.nio.mapmode, jdk.sctp], conf/sound.properties=[java.desktop, java.instrument], conf/management/jmxremote.access=[jdk.management.jfr, jdk.management.agent, jdk.sctp, jdk.xml.dom, jdk.unsupported, jdk.management, jdk.net, jdk.random, jdk.nio.mapmode, jdk.security.auth, jdk.unsupported.desktop, jdk.naming.rmi, jdk.zipfs, jdk.naming.dns, jdk.security.jgss], lib/librmi.dylib=[java.rmi, java.scripting], lib/libsyslookup.dylib=[jdk.incubator.vector, jdk.javadoc, jdk.jdi, jdk.internal.ed, jdk.internal.le, jdk.jdeps, jdk.internal.opt, jdk.jartool, jdk.jconsole, jdk.incubator.foreign, jdk.internal.jvmstat], lib/libattach.dylib=[jdk.charsets, jdk.attach], lib/libinstrument.dylib=[java.logging, java.instrument], lib/libjaas.dylib=[jdk.security.auth, jdk.unsupported.desktop, jdk.xml.dom, jdk.unsupported, jdk.zipfs, jdk.security.jgss], conf/logging.properties=[java.rmi, java.sql, jdk.incubator.vector, jdk.jdi, jdk.charsets, java.logging, java.transaction.xa, java.xml.crypto, java.xml, jdk.jfr, jdk.jstatd, jdk.httpserver, jdk.crypto.cryptoki, java.naming, jdk.internal.ed, java.prefs, java.net.http, jdk.compiler, java.security.sasl, jdk.internal.opt, jdk.jconsole, jdk.attach, jdk.crypto.ec, jdk.javadoc, jdk.jshell, jdk.editpad, jdk.internal.le, java.management, java.sql.rowset, jdk.jsobject, java.smartcardio, jdk.jlink, jdk.jdwp.agent, jdk.incubator.foreign, jdk.internal.jvmstat, java.security.jgss, java.scripting, jdk.dynalink, jdk.jdeps, jdk.accessibility, jdk.jartool, java.management.rmi, jdk.jpackage, jdk.localedata], lib/libj2pcsc.dylib=[java.sql, java.transaction.xa, java.xml.crypto, java.sql.rowset, java.xml, java.smartcardio, jdk.accessibility], lib/libj2pkcs11.dylib=[jdk.crypto.cryptoki, jdk.editpad, jdk.dynalink, jdk.crypto.ec], lib/libmanagement_agent.dylib=[jdk.management.jfr, jdk.management.agent], lib/libmanagement.dylib=[java.naming, java.management, java.net.http, java.management.rmi], conf/management/jmxremote.password.template=[jdk.management.jfr, jdk.management.agent, jdk.sctp, jdk.xml.dom, jdk.unsupported, jdk.management, jdk.net, jdk.random, jdk.nio.mapmode, jdk.security.auth, jdk.unsupported.desktop, jdk.naming.rmi, jdk.zipfs, jdk.naming.dns, jdk.security.jgss]}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"jpackage has started failing on Mac OS due to: jlink failed with: WARNING: Using incubator modules: jdk.incubator.foreign, jdk.incubator.vector","body":"<p>jpackage has been working fine until today on Mac OS. Now it fails due to some internal use of an incubator package.</p>\n<p>Is there a workaround for this? It still works fine on windows.</p>\n<p>openjdk version &quot;17.0.8&quot; 2023-07-18 LTS\nOpenJDK Runtime Environment Zulu17.44+15-CA (build 17.0.8+7-LTS)\nOpenJDK 64-Bit Server VM Zulu17.44+15-CA (build 17.0.8+7-LTS, mixed mode, sharing)</p>\n<p>Mac OS 12.6.8 (21G725)</p>\n<p>I am using jpackage from my maven build using exec plugin.</p>\n<p>I am using jpackage with --input on an app image to create a non modular app. This has been fine before. Could this have become a problem?</p>\n<p>Maven -X log</p>\n<pre><code>jdk.jpackage.internal.PackagerException: jlink failed with: WARNING: Using incubator modules: jdk.incubator.foreign, jdk.incubator.vector\nError: jdk.tools.jlink.plugin.PluginException: Duplicate resources: {lib/libj2gss.dylib=[java.security.jgss, java.security.sasl], lib/jfr/default.jfc=[jdk.jshell, jdk.jsobject, jdk.jfr, jdk.jlink, jdk.jpackage, jdk.jstatd, jdk.localedata], conf/management/management.properties=[jdk.management.jfr, jdk.management.agent, jdk.sctp, jdk.xml.dom, jdk.unsupported, jdk.management, jdk.net, jdk.random, jdk.nio.mapmode, jdk.security.auth, jdk.unsupported.desktop, jdk.naming.rmi, jdk.zipfs, jdk.naming.dns, jdk.security.jgss], lib/jfr/profile.jfc=[jdk.jshell, jdk.jsobject, jdk.jfr, jdk.jlink, jdk.jpackage, jdk.jstatd, jdk.localedata], lib/libosxkrb5.dylib=[java.security.jgss, java.security.sasl], lib/libmanagement_ext.dylib=[jdk.management, jdk.naming.rmi, jdk.naming.dns], lib/libextnet.dylib=[jdk.net, jdk.random, jdk.nio.mapmode, jdk.sctp], conf/sound.properties=[java.desktop, java.instrument], conf/management/jmxremote.access=[jdk.management.jfr, jdk.management.agent, jdk.sctp, jdk.xml.dom, jdk.unsupported, jdk.management, jdk.net, jdk.random, jdk.nio.mapmode, jdk.security.auth, jdk.unsupported.desktop, jdk.naming.rmi, jdk.zipfs, jdk.naming.dns, jdk.security.jgss], lib/librmi.dylib=[java.rmi, java.scripting], lib/libsyslookup.dylib=[jdk.incubator.vector, jdk.javadoc, jdk.jdi, jdk.internal.ed, jdk.internal.le, jdk.jdeps, jdk.internal.opt, jdk.jartool, jdk.jconsole, jdk.incubator.foreign, jdk.internal.jvmstat], lib/libattach.dylib=[jdk.charsets, jdk.attach], lib/libinstrument.dylib=[java.logging, java.instrument], lib/libjaas.dylib=[jdk.security.auth, jdk.unsupported.desktop, jdk.xml.dom, jdk.unsupported, jdk.zipfs, jdk.security.jgss], conf/logging.properties=[java.rmi, java.sql, jdk.incubator.vector, jdk.jdi, jdk.charsets, java.logging, java.transaction.xa, java.xml.crypto, java.xml, jdk.jfr, jdk.jstatd, jdk.httpserver, jdk.crypto.cryptoki, java.naming, jdk.internal.ed, java.prefs, java.net.http, jdk.compiler, java.security.sasl, jdk.internal.opt, jdk.jconsole, jdk.attach, jdk.crypto.ec, jdk.javadoc, jdk.jshell, jdk.editpad, jdk.internal.le, java.management, java.sql.rowset, jdk.jsobject, java.smartcardio, jdk.jlink, jdk.jdwp.agent, jdk.incubator.foreign, jdk.internal.jvmstat, java.security.jgss, java.scripting, jdk.dynalink, jdk.jdeps, jdk.accessibility, jdk.jartool, java.management.rmi, jdk.jpackage, jdk.localedata], lib/libj2pcsc.dylib=[java.sql, java.transaction.xa, java.xml.crypto, java.sql.rowset, java.xml, java.smartcardio, jdk.accessibility], lib/libj2pkcs11.dylib=[jdk.crypto.cryptoki, jdk.editpad, jdk.dynalink, jdk.crypto.ec], lib/libmanagement_agent.dylib=[jdk.management.jfr, jdk.management.agent], lib/libmanagement.dylib=[java.naming, java.management, java.net.http, java.management.rmi], conf/management/jmxremote.password.template=[jdk.management.jfr, jdk.management.agent, jdk.sctp, jdk.xml.dom, jdk.unsupported, jdk.management, jdk.net, jdk.random, jdk.nio.mapmode, jdk.security.auth, jdk.unsupported.desktop, jdk.naming.rmi, jdk.zipfs, jdk.naming.dns, jdk.security.jgss]}\n</code></pre>\n"},{"tags":["java","bigdecimal"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1693953122,"post_id":77047686,"comment_id":135826949,"body_markdown":"It is perfectly acceptable to store monetary values with more than two decimal digits.  What matters is *presenting* them with two decimal digits in user interfaces, which is easy with NumberFormat or Formatter.  No need to do the math of rounding or truncating them.","body":"It is perfectly acceptable to store monetary values with more than two decimal digits.  What matters is <i>presenting</i> them with two decimal digits in user interfaces, which is easy with NumberFormat or Formatter.  No need to do the math of rounding or truncating them."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1693953649,"post_id":77047686,"comment_id":135827001,"body_markdown":"Off-topic: I agree with VGR. I used to work on payroll where a per hour pay rate could have 3 digits to the right of the decimal point. But the pay check had to be in dollars with two digits to the right. We also had rental software where a rental rate could have 3 right digits.","body":"Off-topic: I agree with VGR. I used to work on payroll where a per hour pay rate could have 3 digits to the right of the decimal point. But the pay check had to be in dollars with two digits to the right. We also had rental software where a rental rate could have 3 right digits."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1693953750,"post_id":77047686,"comment_id":135827008,"body_markdown":"By the way, tracking USD dollar amounts to the third or fourth fractional digit is common in some accounting scenarios. For example, in the United States, you likely purchase gasoline for your vehicle in tenths of a penny, such as $ 4.729. When developing software, ask for an official requirement from the accounting authorities on how to handle the resolution and rounding of fractional pennies","body":"By the way, tracking USD dollar amounts to the third or fourth fractional digit is common in some accounting scenarios. For example, in the United States, you likely purchase gasoline for your vehicle in tenths of a penny, such as $ 4.729. When developing software, ask for an official requirement from the accounting authorities on how to handle the resolution and rounding of fractional pennies"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1693954532,"post_id":77047686,"comment_id":135827071,"body_markdown":"You could maintain your `BigDecimal` values in cents, and adjust the scale for input and output as you would if you were using `int` instead. By the way, if you are going to use integer types, consider using `long`.","body":"You could maintain your <code>BigDecimal</code> values in cents, and adjust the scale for input and output as you would if you were using <code>int</code> instead. By the way, if you are going to use integer types, consider using <code>long</code>."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1694100790,"post_id":77047686,"comment_id":135849931,"body_markdown":"If you wanted to use the multiply / divide / divide described in the last paragraph, the code might look something like this: `BigDecimal [] result = total.movePointRight(2).divideAndRemainder(divider);         result[0] = result[0].movePointLeft(2);         System.out.println (&quot;BigDecimal divide test: &quot;  + Arrays.toString(result));` The output is this: `BigDecimal divide test: [0.40, 1].`  Note this uses *one* division, and the multiplication and division are replaced with addition and subtraction.","body":"If you wanted to use the multiply / divide / divide described in the last paragraph, the code might look something like this: <code>BigDecimal [] result = total.movePointRight(2).divideAndRemainder(divider);         result[0] = result[0].movePointLeft(2);         System.out.println (&quot;BigDecimal divide test: &quot;  + Arrays.toString(result));</code> The output is this: <code>BigDecimal divide test: [0.40, 1].</code>  Note this uses <i>one</i> division, and the multiplication and division are replaced with addition and subtraction."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1693954804,"creation_date":1693948387,"answer_id":77047770,"question_id":77047686,"body_markdown":"The fundamental issue is your use of `divideAndRemainder` in the first place, which does not do what you want it to do; as its documentation specifies, it divides only to an integer value -- a &quot;dollar&quot; amount, without cents.  It is analogous to `divideToIntegralValue`, not `divide`:\r\n&gt; Returns a two-element BigDecimal array containing the result of divideToIntegralValue followed by the result of remainder on the two operands.\r\n\r\nYou need to use [`.divide`][1] instead, presumably specifying a [`RoundingMode`][2], and then compute the remainder yourself.\r\n\r\n```\r\nBigDecimal division = total.divide(divisor, RoundingMode.DOWN);\r\nSystem.out.println(division); // 0.40\r\nSystem.out.println(total.subtract(division.multiply(divisor))); // 0.01\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html#divide(java.math.BigDecimal,java.math.RoundingMode)\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/RoundingMode.html","title":"Does BigDecimal division have a shortcoming when the scale is known?","body":"<p>The fundamental issue is your use of <code>divideAndRemainder</code> in the first place, which does not do what you want it to do; as its documentation specifies, it divides only to an integer value -- a &quot;dollar&quot; amount, without cents.  It is analogous to <code>divideToIntegralValue</code>, not <code>divide</code>:</p>\n<blockquote>\n<p>Returns a two-element BigDecimal array containing the result of divideToIntegralValue followed by the result of remainder on the two operands.</p>\n</blockquote>\n<p>You need to use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html#divide(java.math.BigDecimal,java.math.RoundingMode)\" rel=\"nofollow noreferrer\"><code>.divide</code></a> instead, presumably specifying a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/RoundingMode.html\" rel=\"nofollow noreferrer\"><code>RoundingMode</code></a>, and then compute the remainder yourself.</p>\n<pre><code>BigDecimal division = total.divide(divisor, RoundingMode.DOWN);\nSystem.out.println(division); // 0.40\nSystem.out.println(total.subtract(division.multiply(divisor))); // 0.01\n</code></pre>\n"}],"owner":{"account_id":18520709,"reputation":35,"user_id":13493797,"display_name":"Aaron Bitman"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77047770,"answer_count":1,"score":2,"last_activity_date":1693954804,"creation_date":1693947197,"question_id":77047686,"body_markdown":"First of all, I should clarify that I&#39;m asking this question only for enlightenment; I&#39;m not desperate for an answer, but an answer might help me appreciate the BigDecimal class more.\r\n\r\nI always had - and still have - a philosophy about decimal values guaranteed to have only a certain number of digits after the decimal point. Take, for example, dollar figures, which are guaranteed to have no more than 2 digits after the decimal point. When writing code for such applications, I obviously mustn&#39;t use a float with its rounding errors. Instead, I would use an integer (or long, or BigInteger, depending on how high the figure might get) to represent the number of cents. I would store and process a figure of $12.34 as the integer 1234, for example. Only when outputting the dollar figures (and possibly when inputting them) would I format the figures with a decimal point.\r\n\r\nBut now I&#39;m reading a Java book that&#39;s pitching the BigDecimal class. It even uses dollar figures in some of the examples. I&#39;m not sold on it because I feel that division could be awkward, unless you have an idea how to do it.\r\n\r\nLet&#39;s say you&#39;re writing a program that divides a dollar figure. For instance, maybe many people want to split the money equally. And let&#39;s say, for example, that one day the program runs with the parameters such that it should divide $1.21 by 3. You would want the program to come up with the result of 40 cents with a remainder of 1 cent. In other words, the result should be 0.40 and 0.01. If the figures are stored as integers representing numbers of cents, that will work fine. But can it work with BigDecimals that represent dollars?\r\n\r\nObviously, this code won&#39;t work:\r\n\r\n    import java.math.BigDecimal;\r\n        \r\n        public class test {\r\n        \r\n        \tpublic static void main(String[] args) {\r\n        \t\tBigDecimal total = new BigDecimal(&quot;1.21&quot;);\r\n        \t\tBigDecimal divider = new BigDecimal(3);\r\n        \t\tBigDecimal results[]= new BigDecimal[2];\r\n        \t\tresults = total.divideAndRemainder(divider);\r\n        \r\n        \t\tfor (BigDecimal result : results) System.out.println(result);\t\r\n        \t}\r\n        }\r\n\r\nYou&#39;ll get a result of 0.00 and 1.21, not 0.40 and 0.01 like you want.\r\n\r\nThe book implies that the solution is to set the scale. So I tried that:\r\n\r\n\t\tBigDecimal total = new BigDecimal(&quot;1.21&quot;);\r\n\t\ttotal = total.setScale(2);\r\n\t\tBigDecimal divider = new BigDecimal(3);\r\n\t\tdivider = divider.setScale(2);\r\n\t\tBigDecimal results[]= new BigDecimal[2];\r\n\t\tresults = total.divideAndRemainder(divider);\r\n\r\nThe result is still 0.00 and 1.21.\r\n\r\nMaybe the result should be in a variable that already has the scale set? I tried that:\r\n\r\n\t\tBigDecimal total = new BigDecimal(&quot;1.21&quot;);\r\n\t\ttotal = total.setScale(2);\r\n\t\tBigDecimal divider = new BigDecimal(3);\r\n\t\tdivider = divider.setScale(2);\r\n\t\tBigDecimal results[]= new BigDecimal[2];\r\n\t\tresults[0] = new BigDecimal(0);\r\n\t\tresults[0] = results[0].setScale(2);\r\n\t\tresults[1] = new BigDecimal(0);\r\n\t\tresults[1] = results[0].setScale(2);\r\n\t\tresults = total.divideAndRemainder(divider);\r\n\r\nThat was very awkward! And the result is still the same.\r\n\r\nI could, of course, multiply the $1.21 by 100, then divide by 3, and then divide by 100, but that would be a good argument for using my integer approach in the first place and skipping those steps. Is there an elegant way to divide BigDecimal values the way I want to? Or should I stick to storing cent values in integers?\r\n\r\n","title":"Does BigDecimal division have a shortcoming when the scale is known?","body":"<p>First of all, I should clarify that I'm asking this question only for enlightenment; I'm not desperate for an answer, but an answer might help me appreciate the BigDecimal class more.</p>\n<p>I always had - and still have - a philosophy about decimal values guaranteed to have only a certain number of digits after the decimal point. Take, for example, dollar figures, which are guaranteed to have no more than 2 digits after the decimal point. When writing code for such applications, I obviously mustn't use a float with its rounding errors. Instead, I would use an integer (or long, or BigInteger, depending on how high the figure might get) to represent the number of cents. I would store and process a figure of $12.34 as the integer 1234, for example. Only when outputting the dollar figures (and possibly when inputting them) would I format the figures with a decimal point.</p>\n<p>But now I'm reading a Java book that's pitching the BigDecimal class. It even uses dollar figures in some of the examples. I'm not sold on it because I feel that division could be awkward, unless you have an idea how to do it.</p>\n<p>Let's say you're writing a program that divides a dollar figure. For instance, maybe many people want to split the money equally. And let's say, for example, that one day the program runs with the parameters such that it should divide $1.21 by 3. You would want the program to come up with the result of 40 cents with a remainder of 1 cent. In other words, the result should be 0.40 and 0.01. If the figures are stored as integers representing numbers of cents, that will work fine. But can it work with BigDecimals that represent dollars?</p>\n<p>Obviously, this code won't work:</p>\n<pre><code>import java.math.BigDecimal;\n    \n    public class test {\n    \n        public static void main(String[] args) {\n            BigDecimal total = new BigDecimal(&quot;1.21&quot;);\n            BigDecimal divider = new BigDecimal(3);\n            BigDecimal results[]= new BigDecimal[2];\n            results = total.divideAndRemainder(divider);\n    \n            for (BigDecimal result : results) System.out.println(result);   \n        }\n    }\n</code></pre>\n<p>You'll get a result of 0.00 and 1.21, not 0.40 and 0.01 like you want.</p>\n<p>The book implies that the solution is to set the scale. So I tried that:</p>\n<pre><code>    BigDecimal total = new BigDecimal(&quot;1.21&quot;);\n    total = total.setScale(2);\n    BigDecimal divider = new BigDecimal(3);\n    divider = divider.setScale(2);\n    BigDecimal results[]= new BigDecimal[2];\n    results = total.divideAndRemainder(divider);\n</code></pre>\n<p>The result is still 0.00 and 1.21.</p>\n<p>Maybe the result should be in a variable that already has the scale set? I tried that:</p>\n<pre><code>    BigDecimal total = new BigDecimal(&quot;1.21&quot;);\n    total = total.setScale(2);\n    BigDecimal divider = new BigDecimal(3);\n    divider = divider.setScale(2);\n    BigDecimal results[]= new BigDecimal[2];\n    results[0] = new BigDecimal(0);\n    results[0] = results[0].setScale(2);\n    results[1] = new BigDecimal(0);\n    results[1] = results[0].setScale(2);\n    results = total.divideAndRemainder(divider);\n</code></pre>\n<p>That was very awkward! And the result is still the same.</p>\n<p>I could, of course, multiply the $1.21 by 100, then divide by 3, and then divide by 100, but that would be a good argument for using my integer approach in the first place and skipping those steps. Is there an elegant way to divide BigDecimal values the way I want to? Or should I stick to storing cent values in integers?</p>\n"},{"tags":["java","recursion"],"comments":[{"owner":{"account_id":142333,"reputation":17994,"user_id":349990,"accept_rate":62,"display_name":"Itay Karo"},"score":0,"creation_date":1286793382,"post_id":3905382,"comment_id":4161936,"body_markdown":"With the same sense of your question i will answer &quot;With a recursive method&quot;.","body":"With the same sense of your question i will answer &quot;With a recursive method&quot;."}],"answers":[{"tags":[],"owner":{"account_id":102965,"reputation":415230,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1467972055,"creation_date":1286793363,"answer_id":3905399,"question_id":3905382,"body_markdown":"You can print it recursively by overriding `toString` in all your classes.\r\n\r\nIf you want to have a method like `printObjectRecursively(Object o)` you need to dive into reflection, fetch the fields, print their name and content recursively using `printObjectRecursively(someField)`.\r\n\r\nExample:\r\n\r\n    public class Test {\r\n        public static void main(String[] args) {\r\n            A a = new A();\r\n            System.out.println(a);\r\n        }\r\n    }\r\n    \r\n    class A {\r\n        int i = 5;\r\n        B obj = new B();\r\n        String str = &quot;hello&quot;;\r\n        public String toString() {\r\n            return String.format(&quot;A: [i: %d, obj: %s, str: %s]&quot;, i, obj, str);\r\n        }\r\n    }\r\n    \r\n    class B {\r\n        int j = 17;\r\n        public String toString() {\r\n            return String.format(&quot;B: [j: %d]&quot;, j);\r\n        }\r\n    }\r\n\r\nPrints:\r\n\r\n    A: [i: 5, obj: B: [j: 17], str: hello]\r\n\r\nA reflection-based recursive print method could be written something like this\r\n\r\n    private static final List LEAVES = Arrays.asList(\r\n            Boolean.class, Character.class, Byte.class, Short.class,\r\n            Integer.class, Long.class, Float.class, Double.class, Void.class,\r\n            String.class);\r\n\r\n    public static String toStringRecursive(Object o) throws Exception {\r\n        \r\n        if (o == null)\r\n            return &quot;null&quot;;\r\n        \r\n        if (LEAVES.contains(o.getClass()))\r\n            return o.toString();\r\n        \r\n        StringBuilder sb = new StringBuilder();\r\n        sb.append(o.getClass().getSimpleName()).append(&quot;: [&quot;);\r\n        for (Field f : o.getClass().getDeclaredFields()) {\r\n            if (Modifier.isStatic(f.getModifiers()))\r\n                continue;\r\n            f.setAccessible(true);\r\n            sb.append(f.getName()).append(&quot;: &quot;);\r\n            sb.append(toStringRecursive(f.get(o))).append(&quot; &quot;);\r\n        }\r\n        sb.append(&quot;]&quot;);\r\n        return sb.toString();\r\n    }\r\n    ","title":"Recursively print an objects details","body":"<p>You can print it recursively by overriding <code>toString</code> in all your classes.</p>\n\n<p>If you want to have a method like <code>printObjectRecursively(Object o)</code> you need to dive into reflection, fetch the fields, print their name and content recursively using <code>printObjectRecursively(someField)</code>.</p>\n\n<p>Example:</p>\n\n<pre><code>public class Test {\n    public static void main(String[] args) {\n        A a = new A();\n        System.out.println(a);\n    }\n}\n\nclass A {\n    int i = 5;\n    B obj = new B();\n    String str = \"hello\";\n    public String toString() {\n        return String.format(\"A: [i: %d, obj: %s, str: %s]\", i, obj, str);\n    }\n}\n\nclass B {\n    int j = 17;\n    public String toString() {\n        return String.format(\"B: [j: %d]\", j);\n    }\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>A: [i: 5, obj: B: [j: 17], str: hello]\n</code></pre>\n\n<p>A reflection-based recursive print method could be written something like this</p>\n\n<pre><code>private static final List LEAVES = Arrays.asList(\n        Boolean.class, Character.class, Byte.class, Short.class,\n        Integer.class, Long.class, Float.class, Double.class, Void.class,\n        String.class);\n\npublic static String toStringRecursive(Object o) throws Exception {\n\n    if (o == null)\n        return \"null\";\n\n    if (LEAVES.contains(o.getClass()))\n        return o.toString();\n\n    StringBuilder sb = new StringBuilder();\n    sb.append(o.getClass().getSimpleName()).append(\": [\");\n    for (Field f : o.getClass().getDeclaredFields()) {\n        if (Modifier.isStatic(f.getModifiers()))\n            continue;\n        f.setAccessible(true);\n        sb.append(f.getName()).append(\": \");\n        sb.append(toStringRecursive(f.get(o))).append(\" \");\n    }\n    sb.append(\"]\");\n    return sb.toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":126734,"reputation":17496,"user_id":323421,"display_name":"Sergii Pozharov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1286793409,"creation_date":1286793409,"answer_id":3905406,"question_id":3905382,"body_markdown":"You should implement the `toString` method for your classes - it will print the information about the class members - usually using their `toString` methods. |Then you jut iterate through the collection and call `toString` of each item","title":"Recursively print an objects details","body":"<p>You should implement the <code>toString</code> method for your classes - it will print the information about the class members - usually using their <code>toString</code> methods. |Then you jut iterate through the collection and call <code>toString</code> of each item</p>\n"},{"tags":[],"owner":{"account_id":135606,"reputation":6545,"user_id":338581,"accept_rate":63,"display_name":"noisy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1286793413,"creation_date":1286793413,"answer_id":3905407,"question_id":3905382,"body_markdown":"Do you really need print this informations out? Maybe watch during debbuging will be enough?","title":"Recursively print an objects details","body":"<p>Do you really need print this informations out? Maybe watch during debbuging will be enough?</p>\n"},{"tags":[],"owner":{"account_id":22946,"reputation":30978,"user_id":57095,"accept_rate":85,"display_name":"Alberto Zaccagni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1286793456,"creation_date":1286793456,"answer_id":3905410,"question_id":3905382,"body_markdown":"You are looking for something similar to PHP&#39;s var_dump, see if this question is of any help: https://stackoverflow.com/questions/301536/what-is-the-java-equivalent-of-php-var-dump\r\n\r\nAlso, have a look at reflection: http://java.sun.com/developer/technicalArticles/ALT/Reflection/","title":"Recursively print an objects details","body":"<p>You are looking for something similar to PHP's var_dump, see if this question is of any help: <a href=\"https://stackoverflow.com/questions/301536/what-is-the-java-equivalent-of-php-var-dump\">What is the Java equivalent of PHP var_dump?</a></p>\n\n<p>Also, have a look at reflection: <a href=\"http://java.sun.com/developer/technicalArticles/ALT/Reflection/\" rel=\"nofollow noreferrer\">http://java.sun.com/developer/technicalArticles/ALT/Reflection/</a></p>\n"},{"tags":[],"owner":{"account_id":117125,"reputation":13617,"user_id":306855,"accept_rate":73,"display_name":"Emil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1286793469,"creation_date":1286793469,"answer_id":3905412,"question_id":3905382,"body_markdown":"You can override the toString method.\r\n\r\n**Example:**\r\n\r\n    class foo\r\n    {\r\n     int i,j;\r\n     \r\n     String toString()\r\n     {\r\n     StringBuilder b=new StringBuilder();\r\n     return b.append(i).append(j).toString();\r\n     }\r\n    }","title":"Recursively print an objects details","body":"<p>You can override the toString method.</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>class foo\n{\n int i,j;\n\n String toString()\n {\n StringBuilder b=new StringBuilder();\n return b.append(i).append(j).toString();\n }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":142896,"reputation":35109,"user_id":350890,"accept_rate":100,"display_name":"Peter Tillemans"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1286793638,"creation_date":1286793638,"answer_id":3905432,"question_id":3905382,"body_markdown":"Use one of the serialization libraries like [Jackson][1] (JSON). \r\n\r\nThis dumps everything in plain text. If you use a Javascript capable editor to prettify the content, with a bit of luck, you might actually make some sense out of it.\r\n\r\nIf a lot of the objects are not serializable, you might end up with a lot of readable gibberish which will not help anything, unfortunately,\r\n\r\nYMMV\r\n\r\n\r\n\r\n  [1]: http://wiki.fasterxml.com/JacksonInFiveMinutes","title":"Recursively print an objects details","body":"<p>Use one of the serialization libraries like <a href=\"http://wiki.fasterxml.com/JacksonInFiveMinutes\" rel=\"nofollow\">Jackson</a> (JSON). </p>\n\n<p>This dumps everything in plain text. If you use a Javascript capable editor to prettify the content, with a bit of luck, you might actually make some sense out of it.</p>\n\n<p>If a lot of the objects are not serializable, you might end up with a lot of readable gibberish which will not help anything, unfortunately,</p>\n\n<p>YMMV</p>\n"},{"tags":[],"owner":{"account_id":660607,"reputation":73,"user_id":472233,"display_name":"HenryTaylor"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1286796530,"creation_date":1286796530,"answer_id":3905756,"question_id":3905382,"body_markdown":"I&#39;ve had great success doing this on a casual basis using XStream to dump JSON representations of objects.  It recurses down objects and just seems to do what you want it to do most of the time.  And it&#39;s super lightweight.  Example:\r\n\r\n    private static final XStream jsonXStream = \r\n        new XStream(new JsonHierarchicalStreamDriver());\r\n\t\r\n    public static String toDebugString(Object object) {\r\n        return jsonXStream.toXML(object);  \r\n        // ignore &quot;toXML&quot; name, it&#39;s going to be JSON.\r\n    }\r\n\r\n","title":"Recursively print an objects details","body":"<p>I've had great success doing this on a casual basis using XStream to dump JSON representations of objects.  It recurses down objects and just seems to do what you want it to do most of the time.  And it's super lightweight.  Example:</p>\n\n<pre><code>private static final XStream jsonXStream = \n    new XStream(new JsonHierarchicalStreamDriver());\n\npublic static String toDebugString(Object object) {\n    return jsonXStream.toXML(object);  \n    // ignore \"toXML\" name, it's going to be JSON.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":660617,"reputation":71,"user_id":472250,"display_name":"y.efe"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1693954357,"creation_date":1286797611,"answer_id":3905867,"question_id":3905382,"body_markdown":"[Apache Common Lang][1] contains `ToStringBuilder` class. You can define different style with `ToStringStyle` object.\r\n\r\nSingle line recursion:\r\n\r\n    ToStringBuilder.reflectionToString(obj, new RecursiveToStringStyle())\r\n\r\nTree-like recursion:\r\n\r\n    ToStringBuilder.reflectionToString(obj, new MultilineRecursiveToStringStyle())\r\n\r\n  [1]: https://commons.apache.org/proper/commons-lang/dependency-info.html","title":"Recursively print an objects details","body":"<p><a href=\"https://commons.apache.org/proper/commons-lang/dependency-info.html\" rel=\"nofollow noreferrer\">Apache Common Lang</a> contains <code>ToStringBuilder</code> class. You can define different style with <code>ToStringStyle</code> object.</p>\n<p>Single line recursion:</p>\n<pre><code>ToStringBuilder.reflectionToString(obj, new RecursiveToStringStyle())\n</code></pre>\n<p>Tree-like recursion:</p>\n<pre><code>ToStringBuilder.reflectionToString(obj, new MultilineRecursiveToStringStyle())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6085642,"reputation":568,"user_id":5122436,"display_name":"Mikhail Ionkin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660928737,"creation_date":1660927765,"answer_id":73419916,"question_id":3905382,"body_markdown":"In some cases it is easy to use Gson to print object. But sometimes gson does not work.\r\n\r\nHere I just improve aioobe&#39; answer for this case:\r\n- don&#39;t print printed objects (protect from infinite cycles)\r\n- print collections\r\n- don&#39;t go deeply on few basic types, like BigInteger\r\n\r\n```java\r\n    private static final Set&lt;Object&gt; looked = new HashSet&lt;&gt;();\r\n\r\n    private static final List LEAVES = Arrays.asList(\r\n            Boolean.class, Character.class, Byte.class, Short.class,\r\n            Integer.class, Long.class, Float.class, Double.class, Void.class,\r\n            String.class, java.math.BigInteger.class, java.math.BigDecimal.class);\r\n\r\n    public static void toStringRecursive(Object o, StringBuilder sb) throws Exception {\r\n        if (o == null) {\r\n            sb.append(&quot;null&quot;);\r\n            return;\r\n        }\r\n\r\n        if (looked.contains(o)) return;\r\n        looked.add(o);\r\n\r\n        if (LEAVES.contains(o.getClass())) {\r\n            sb.append(o);\r\n            return;\r\n        }\r\n\r\n        sb.append(o.getClass().getSimpleName()).append(&quot;: [&quot;);\r\n        if (o.getClass().isArray()) {\r\n            for (Object x : (Object[]) o) {\r\n                toStringRecursive(x, sb);\r\n            }\r\n        } else if (Iterable.class.isAssignableFrom(o.getClass())) {\r\n            for (Object x : (Iterable) o) {\r\n                toStringRecursive(x, sb);\r\n            }\r\n        } else if (Map.class.isAssignableFrom(o.getClass())) {\r\n            for (Object entry : ((Map)o).entrySet()) {\r\n                toStringRecursive(entry, sb);\r\n            }\r\n        } else {\r\n            for (Field f : o.getClass().getDeclaredFields()) {\r\n                if (Modifier.isStatic(f.getModifiers()))\r\n                    continue;\r\n                f.setAccessible(true);\r\n                sb.append(f.getName()).append(&quot;: &quot;);\r\n                toStringRecursive(f.get(o), sb);\r\n                sb.append(&quot; &quot;);\r\n            }\r\n        }\r\n        sb.append(&quot;]\\n&quot;);\r\n    }\r\n```","title":"Recursively print an objects details","body":"<p>In some cases it is easy to use Gson to print object. But sometimes gson does not work.</p>\n<p>Here I just improve aioobe' answer for this case:</p>\n<ul>\n<li>don't print printed objects (protect from infinite cycles)</li>\n<li>print collections</li>\n<li>don't go deeply on few basic types, like BigInteger</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>    private static final Set&lt;Object&gt; looked = new HashSet&lt;&gt;();\n\n    private static final List LEAVES = Arrays.asList(\n            Boolean.class, Character.class, Byte.class, Short.class,\n            Integer.class, Long.class, Float.class, Double.class, Void.class,\n            String.class, java.math.BigInteger.class, java.math.BigDecimal.class);\n\n    public static void toStringRecursive(Object o, StringBuilder sb) throws Exception {\n        if (o == null) {\n            sb.append(&quot;null&quot;);\n            return;\n        }\n\n        if (looked.contains(o)) return;\n        looked.add(o);\n\n        if (LEAVES.contains(o.getClass())) {\n            sb.append(o);\n            return;\n        }\n\n        sb.append(o.getClass().getSimpleName()).append(&quot;: [&quot;);\n        if (o.getClass().isArray()) {\n            for (Object x : (Object[]) o) {\n                toStringRecursive(x, sb);\n            }\n        } else if (Iterable.class.isAssignableFrom(o.getClass())) {\n            for (Object x : (Iterable) o) {\n                toStringRecursive(x, sb);\n            }\n        } else if (Map.class.isAssignableFrom(o.getClass())) {\n            for (Object entry : ((Map)o).entrySet()) {\n                toStringRecursive(entry, sb);\n            }\n        } else {\n            for (Field f : o.getClass().getDeclaredFields()) {\n                if (Modifier.isStatic(f.getModifiers()))\n                    continue;\n                f.setAccessible(true);\n                sb.append(f.getName()).append(&quot;: &quot;);\n                toStringRecursive(f.get(o), sb);\n                sb.append(&quot; &quot;);\n            }\n        }\n        sb.append(&quot;]\\n&quot;);\n    }\n</code></pre>\n"}],"owner":{"account_id":652217,"reputation":4941,"user_id":453821,"accept_rate":96,"display_name":"tom"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12373,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":3905399,"answer_count":9,"score":10,"last_activity_date":1693954357,"creation_date":1286793248,"question_id":3905382,"body_markdown":"How do I print the content of an object recursively?","title":"Recursively print an objects details","body":"<p>How do I print the content of an object recursively?</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1693956704,"post_id":77048050,"comment_id":135827268,"body_markdown":"If the complete JAR B is inside JAR A (as opposed to the contents of JAR B inside JAR A directly) then you would need a custom classloader to find classes within it. There is no built-in support for nested JARs.","body":"If the complete JAR B is inside JAR A (as opposed to the contents of JAR B inside JAR A directly) then you would need a custom classloader to find classes within it. There is no built-in support for nested JARs."}],"owner":{"account_id":29285360,"reputation":11,"user_id":22437092,"display_name":"DevF"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693952707,"creation_date":1693952707,"question_id":77048050,"body_markdown":"I know its very unusual and wrong but there is a reason for this thats not relevant for the story, for now we cant avoid it.\r\n\r\nIm using Maven and have jar A that uses jar B, I copied jar B into the `resources` folder of jar A and included jar B in the POM file of jar A with `provided` scope, an example:\r\n\r\n```\r\nimport com.google.common.collect.Lists;\r\n\r\npublic class Foo {\r\n    public static void main(String[] args) {\r\n        System.out.println(Lists.asList(&quot;foo&quot;, new String[] {&quot;bar&quot;}));\r\n    }\r\n}\r\n```\r\n\r\nPOM:\r\n```\r\n&lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n            &lt;version&gt;[15.0]&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n```\r\n\r\nNow I have jar C that uses jar A like so:\r\n\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        Test.main(null);\r\n    }\r\n}\r\n```\r\n\r\nI tried doing this in the POM of C:\r\n\r\n```\r\n&lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.ex&lt;/groupId&gt;\r\n            &lt;artifactId&gt;A&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n```\r\n\r\n\r\nBut it doesnt work because it cant find the guava classes, so my question is, is it possible to somehow make this work and added jar B to the classpath from within jar A?","title":"Include a jar from within another jar in the classpath for a transitive dependency","body":"<p>I know its very unusual and wrong but there is a reason for this thats not relevant for the story, for now we cant avoid it.</p>\n<p>Im using Maven and have jar A that uses jar B, I copied jar B into the <code>resources</code> folder of jar A and included jar B in the POM file of jar A with <code>provided</code> scope, an example:</p>\n<pre><code>import com.google.common.collect.Lists;\n\npublic class Foo {\n    public static void main(String[] args) {\n        System.out.println(Lists.asList(&quot;foo&quot;, new String[] {&quot;bar&quot;}));\n    }\n}\n</code></pre>\n<p>POM:</p>\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\n            &lt;version&gt;[15.0]&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>Now I have jar C that uses jar A like so:</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        Test.main(null);\n    }\n}\n</code></pre>\n<p>I tried doing this in the POM of C:</p>\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.ex&lt;/groupId&gt;\n            &lt;artifactId&gt;A&lt;/artifactId&gt;\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>But it doesnt work because it cant find the guava classes, so my question is, is it possible to somehow make this work and added jar B to the classpath from within jar A?</p>\n"},{"tags":["java","nullpointerexception"],"comments":[{"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"score":0,"creation_date":1529817278,"post_id":51007117,"comment_id":89007430,"body_markdown":"Is `sourceAsMap` null Or is `sourceAsMap.get(..)` returning null? or is `doc` null?","body":"Is <code>sourceAsMap</code> null Or is <code>sourceAsMap.get(..)</code> returning null? or is <code>doc</code> null?"}],"answers":[{"tags":[],"owner":{"account_id":1315198,"reputation":3834,"user_id":1262248,"accept_rate":75,"display_name":"Aman Chhabra"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1693952602,"creation_date":1529817651,"answer_id":51007151,"question_id":51007117,"body_markdown":"The null pointer exception basic cause is that you are calling a method or variable from null variable i.e. a variable which is currently not holding reference of any object. So, the easy way to avoid it is assign that variable a reference on which subsequent tasks can be called\r\n\r\nNow this can be handled in n no. of ways, out of which some basic ways are:\r\n\r\n1) Using if condition\r\n\r\n        if(doc!=null &amp;&amp; sourceAsMap!=null &amp;&amp; sourceAsMap.get(&quot;catalog_title&quot;)!=null)\r\n            doc.setCatalog_title(sourceAsMap.get(&quot;catalog_title&quot;).toString());\r\n\r\n2) Using ternary operator:\r\n\r\n        doc = null == doc ? new Document():doc;\r\n        doc.setCatalog_title(sourceAsMap!=null &amp;&amp; sourceAsMap.get(&quot;catalog_title&quot;)!=null ? sourceAsMap.get(&quot;catalog_title&quot;).toString() : null);\r\n","title":"Best practise to handle Exception in thread &quot;main&quot; java.lang.NullPointerException from Bean class","body":"<p>The null pointer exception basic cause is that you are calling a method or variable from null variable i.e. a variable which is currently not holding reference of any object. So, the easy way to avoid it is assign that variable a reference on which subsequent tasks can be called</p>\n<p>Now this can be handled in n no. of ways, out of which some basic ways are:</p>\n<ol>\n<li><p>Using if condition</p>\n<pre><code> if(doc!=null &amp;&amp; sourceAsMap!=null &amp;&amp; sourceAsMap.get(&quot;catalog_title&quot;)!=null)\n     doc.setCatalog_title(sourceAsMap.get(&quot;catalog_title&quot;).toString());\n</code></pre>\n</li>\n<li><p>Using ternary operator:</p>\n<pre><code> doc = null == doc ? new Document():doc;\n doc.setCatalog_title(sourceAsMap!=null &amp;&amp; sourceAsMap.get(&quot;catalog_title&quot;)!=null ? sourceAsMap.get(&quot;catalog_title&quot;).toString() : null);\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":13508760,"reputation":1517,"user_id":9745850,"display_name":"Hemant Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1529819433,"creation_date":1529819433,"answer_id":51007287,"question_id":51007117,"body_markdown":"You can use Guava Preconditions (https://github.com/google/guava/wiki/PreconditionsExplained), as it good practice to check preconditions of your class before executing it. As you can use `checkNotNull(T)`.\r\n\r\nIf you are expecting null in your system then instead of using a null check, use **Optional** class https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html, \r\n\r\nIf you are using Java 7 then you can use **Optional** from **Guava** https://github.com/google/guava/wiki/UsingAndAvoidingNullExplained","title":"Best practise to handle Exception in thread &quot;main&quot; java.lang.NullPointerException from Bean class","body":"<p>You can use Guava Preconditions (<a href=\"https://github.com/google/guava/wiki/PreconditionsExplained\" rel=\"nofollow noreferrer\">https://github.com/google/guava/wiki/PreconditionsExplained</a>), as it good practice to check preconditions of your class before executing it. As you can use <code>checkNotNull(T)</code>.</p>\n\n<p>If you are expecting null in your system then instead of using a null check, use <strong>Optional</strong> class <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html</a>, </p>\n\n<p>If you are using Java 7 then you can use <strong>Optional</strong> from <strong>Guava</strong> <a href=\"https://github.com/google/guava/wiki/UsingAndAvoidingNullExplained\" rel=\"nofollow noreferrer\">https://github.com/google/guava/wiki/UsingAndAvoidingNullExplained</a></p>\n"}],"owner":{"account_id":12019463,"reputation":1937,"user_id":8793412,"accept_rate":88,"display_name":"Karthikeyan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":5,"up_vote_count":0,"closed_date":1529819771,"accepted_answer_id":51007151,"answer_count":2,"score":-5,"last_activity_date":1693952602,"creation_date":1529817180,"question_id":51007117,"body_markdown":"Am using Bean class to get/set value for the attributes. In some cases am gettig `Exception in thread &quot;main&quot; java.lang.NullPointerException` error due to the value is null. What will be the best practice to handle null pointer exception when we get/set values from/to bean class.\r\n\r\nIs that ternary operator is good to use or any other suggestions?\r\n\r\nPlease find the below line of code where am getting null pointer exception.\r\n\r\n    doc.setCatalog_title(sourceAsMap.get(&quot;catalog_title&quot;).toString());","title":"Best practise to handle Exception in thread &quot;main&quot; java.lang.NullPointerException from Bean class","body":"<p>Am using Bean class to get/set value for the attributes. In some cases am gettig <code>Exception in thread \"main\" java.lang.NullPointerException</code> error due to the value is null. What will be the best practice to handle null pointer exception when we get/set values from/to bean class.</p>\n\n<p>Is that ternary operator is good to use or any other suggestions?</p>\n\n<p>Please find the below line of code where am getting null pointer exception.</p>\n\n<pre><code>doc.setCatalog_title(sourceAsMap.get(\"catalog_title\").toString());\n</code></pre>\n"},{"tags":["java","spring","spring-boot","jaxb"],"answers":[{"tags":[],"owner":{"account_id":15905509,"reputation":833,"user_id":11476834,"display_name":"Jochen Reinhardt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693575562,"creation_date":1693575562,"answer_id":77023584,"question_id":77023269,"body_markdown":"Seems you are simply missing the namespace on the `@XmlElement` for `bar`.\r\n\r\nFor me, it worked as expected, when I added that:\r\n```java\r\n@Data\r\n@XmlRootElement(name = &quot;foo&quot;, namespace = &quot;http://ns.fredhopper.com/XML/output/6.1.0&quot;)\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\npublic class Foo {\r\n\r\n    @XmlAttribute private String name;\r\n    \r\n    @XmlElementWrapper(name = &quot;bars&quot;, namespace = &quot;http://ns.fredhopper.com/XML/output/6.1.0&quot;)\r\n    @XmlElement(name = &quot;bar&quot;, namespace = &quot;http://ns.fredhopper.com/XML/output/6.1.0&quot;)\r\n    private List&lt;Bar&gt; bars;\r\n}\r\n```\r\n\r\nAnd I used the `Foo.class` when creating the `JAXBContext`:\r\n```java\r\nJAXBContext context = JAXBContext.newInstance(Foo.class);\r\nfoo = (Foo) context.createUnmarshaller().unmarshal(inputStream);\r\n```\r\n","title":"@XmlElementWrapper generating empty list","body":"<p>Seems you are simply missing the namespace on the <code>@XmlElement</code> for <code>bar</code>.</p>\n<p>For me, it worked as expected, when I added that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@XmlRootElement(name = &quot;foo&quot;, namespace = &quot;http://ns.fredhopper.com/XML/output/6.1.0&quot;)\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class Foo {\n\n    @XmlAttribute private String name;\n    \n    @XmlElementWrapper(name = &quot;bars&quot;, namespace = &quot;http://ns.fredhopper.com/XML/output/6.1.0&quot;)\n    @XmlElement(name = &quot;bar&quot;, namespace = &quot;http://ns.fredhopper.com/XML/output/6.1.0&quot;)\n    private List&lt;Bar&gt; bars;\n}\n</code></pre>\n<p>And I used the <code>Foo.class</code> when creating the <code>JAXBContext</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>JAXBContext context = JAXBContext.newInstance(Foo.class);\nfoo = (Foo) context.createUnmarshaller().unmarshal(inputStream);\n</code></pre>\n"}],"owner":{"account_id":1472305,"reputation":7002,"user_id":1383538,"accept_rate":67,"display_name":"Hayi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77023584,"answer_count":1,"score":0,"last_activity_date":1693951952,"creation_date":1693572659,"question_id":77023269,"body_markdown":"I&#39;m using JAXB to unmarshal some http client response with Spring Boot 3.0.8 &amp; Java 17,\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n      &lt;version&gt;4.0.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n      &lt;version&gt;4.0.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nBut when I use `@XmlElementWrapper`, I get empty list\r\n\r\nhere is the complete code :\r\n\r\nfoo.xml\r\n\r\n    &lt;foo xmlns=&#39;my-secret-name-space&#39; name=&#39;hello&#39;&gt;\r\n    \t&lt;bars&gt;\r\n    \t\t&lt;bar name=&#39;hello bar 1&#39;/&gt;\r\n    \t\t&lt;bar name=&#39;hello bar 2&#39;/&gt;\r\n    \t&lt;/bars&gt;\r\n    &lt;/foo&gt;\r\n\r\nFoo.java\r\n\r\n    import jakarta.xml.bind.annotation.XmlAccessType;\r\n    import jakarta.xml.bind.annotation.XmlAccessorType;\r\n    import jakarta.xml.bind.annotation.XmlAttribute;\r\n    import jakarta.xml.bind.annotation.XmlElement;\r\n    import jakarta.xml.bind.annotation.XmlElementWrapper;\r\n    import jakarta.xml.bind.annotation.XmlRootElement;\r\n    import java.util.List;\r\n    import lombok.Data;\r\n    \r\n    @Data\r\n    @XmlRootElement(name = &quot;foo&quot;, namespace = &quot;my-secret-name-space&quot;)\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    public class Foo {\r\n    \r\n      @XmlAttribute private String name;\r\n    \r\n    \r\n      @XmlElementWrapper(name = &quot;bars&quot;, namespace = &quot;my-secret-name-space&quot;)\r\n      @XmlElement(name = &quot;bar&quot;)\r\n      private List&lt;Bar&gt; bars;\r\n    \r\n    }\r\n\r\nBar.java\r\n\r\n    import jakarta.xml.bind.annotation.XmlAccessType;\r\n    import jakarta.xml.bind.annotation.XmlAccessorType;\r\n    import jakarta.xml.bind.annotation.XmlAttribute;\r\n    import jakarta.xml.bind.annotation.XmlTransient;\r\n    import lombok.Data;\r\n    \r\n    @Data\r\n    @XmlAccessorType(XmlAccessType.NONE)\r\n    public class Bar {\r\n    \r\n      @XmlAttribute private String name;\r\n    \r\n    }\r\n\r\nunmarshling code\r\n\r\n    try (InputStream inputStream = getSomeInputStream()) {\r\n      JAXBContext context = JAXBContext.newInstance(Foo.class);\r\n      return (Foo) context.createUnmarshaller().unmarshal(inputStream);\r\n    }\r\n\r\nin my Foo class i got the name attribute correctly initialized, but the bars list is empty","title":"@XmlElementWrapper generating empty list","body":"<p>I'm using JAXB to unmarshal some http client response with Spring Boot 3.0.8 &amp; Java 17,</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n  &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n  &lt;version&gt;4.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n  &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n  &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n  &lt;version&gt;4.0.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>But when I use <code>@XmlElementWrapper</code>, I get empty list</p>\n<p>here is the complete code :</p>\n<p>foo.xml</p>\n<pre><code>&lt;foo xmlns='my-secret-name-space' name='hello'&gt;\n    &lt;bars&gt;\n        &lt;bar name='hello bar 1'/&gt;\n        &lt;bar name='hello bar 2'/&gt;\n    &lt;/bars&gt;\n&lt;/foo&gt;\n</code></pre>\n<p>Foo.java</p>\n<pre><code>import jakarta.xml.bind.annotation.XmlAccessType;\nimport jakarta.xml.bind.annotation.XmlAccessorType;\nimport jakarta.xml.bind.annotation.XmlAttribute;\nimport jakarta.xml.bind.annotation.XmlElement;\nimport jakarta.xml.bind.annotation.XmlElementWrapper;\nimport jakarta.xml.bind.annotation.XmlRootElement;\nimport java.util.List;\nimport lombok.Data;\n\n@Data\n@XmlRootElement(name = &quot;foo&quot;, namespace = &quot;my-secret-name-space&quot;)\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class Foo {\n\n  @XmlAttribute private String name;\n\n\n  @XmlElementWrapper(name = &quot;bars&quot;, namespace = &quot;my-secret-name-space&quot;)\n  @XmlElement(name = &quot;bar&quot;)\n  private List&lt;Bar&gt; bars;\n\n}\n</code></pre>\n<p>Bar.java</p>\n<pre><code>import jakarta.xml.bind.annotation.XmlAccessType;\nimport jakarta.xml.bind.annotation.XmlAccessorType;\nimport jakarta.xml.bind.annotation.XmlAttribute;\nimport jakarta.xml.bind.annotation.XmlTransient;\nimport lombok.Data;\n\n@Data\n@XmlAccessorType(XmlAccessType.NONE)\npublic class Bar {\n\n  @XmlAttribute private String name;\n\n}\n</code></pre>\n<p>unmarshling code</p>\n<pre><code>try (InputStream inputStream = getSomeInputStream()) {\n  JAXBContext context = JAXBContext.newInstance(Foo.class);\n  return (Foo) context.createUnmarshaller().unmarshal(inputStream);\n}\n</code></pre>\n<p>in my Foo class i got the name attribute correctly initialized, but the bars list is empty</p>\n"},{"tags":["java","opencv","gradle","unsatisfiedlinkerror"],"owner":{"account_id":15356827,"reputation":121,"user_id":11078894,"display_name":"Puser"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693951655,"creation_date":1693927711,"question_id":77045826,"body_markdown":"I added OpenCV dependency to my build.gradle file\r\n\r\n    dependencies {\r\n\t  implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n\t  testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n\t  implementation &#39;org.openpnp:opencv:4.5.1-1&#39;\r\n    }\r\nwhen running gradle build, the library is downloaded and build works fine. But when I run the code \r\n\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.opencv.core.Core;\r\n    import org.opencv.core.Mat;\r\n\r\n\r\n\r\n    @SpringBootApplication\r\n    public class AiApplication {\r\n\r\n\t   public static void main(String[] args) {\r\n\t\t   SpringApplication.run(AiApplication.class, args);\r\n\t\t   System.out.print(&quot;Hello world&quot;);\r\n\t\t   System.loadLibrary(Core.NATIVE_LIBRARY_NAME);\r\n\t\t   Mat mat = Mat.eye(3, 3, 0);\r\n\t\t   System.out.println(&quot;OpenCV Mat:\\n&quot; + mat.dump());\r\n\t   }}\r\n\r\nI get an error \r\n\r\n&gt; java.lang.UnsatisfiedLinkError: no opencv_java451 in java.library.path:\r\n\r\nSo I located my Gradle file opencv-4.5.1-1.jar  and run\r\n\r\n    java -Djava.library.path=/home/pescador/.gradle/caches/modules-2/files-2.1/org.openpnp/opencv/4.5.1-1/31b0b04ae7565a746a15c930c3a246c2655da00c -jar ./build/libs/ai-0.0.1-SNAPSHOT.jar \r\n\r\nbut with the same error. I guess I have to add some other -Djava.library.path. I do not want to use any IDE, my project run in terminal on Linux. So any advise how to setup eclipse or IntelliJ will not help.  Thank you","title":"java.lang.UnsatisfiedLinkError: OpenCV library not found in SpringBoot with Gradle","body":"<p>I added OpenCV dependency to my build.gradle file</p>\n<pre><code>dependencies {\n  implementation 'org.springframework.boot:spring-boot-starter-web'\n  testImplementation 'org.springframework.boot:spring-boot-starter-test'\n  implementation 'org.openpnp:opencv:4.5.1-1'\n}\n</code></pre>\n<p>when running gradle build, the library is downloaded and build works fine. But when I run the code</p>\n<pre><code>import org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.opencv.core.Core;\nimport org.opencv.core.Mat;\n\n\n\n@SpringBootApplication\npublic class AiApplication {\n\n   public static void main(String[] args) {\n       SpringApplication.run(AiApplication.class, args);\n       System.out.print(&quot;Hello world&quot;);\n       System.loadLibrary(Core.NATIVE_LIBRARY_NAME);\n       Mat mat = Mat.eye(3, 3, 0);\n       System.out.println(&quot;OpenCV Mat:\\n&quot; + mat.dump());\n   }}\n</code></pre>\n<p>I get an error</p>\n<blockquote>\n<p>java.lang.UnsatisfiedLinkError: no opencv_java451 in java.library.path:</p>\n</blockquote>\n<p>So I located my Gradle file opencv-4.5.1-1.jar  and run</p>\n<pre><code>java -Djava.library.path=/home/pescador/.gradle/caches/modules-2/files-2.1/org.openpnp/opencv/4.5.1-1/31b0b04ae7565a746a15c930c3a246c2655da00c -jar ./build/libs/ai-0.0.1-SNAPSHOT.jar \n</code></pre>\n<p>but with the same error. I guess I have to add some other -Djava.library.path. I do not want to use any IDE, my project run in terminal on Linux. So any advise how to setup eclipse or IntelliJ will not help.  Thank you</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":255453,"reputation":3554,"user_id":535515,"accept_rate":100,"display_name":"Gus"},"score":1,"creation_date":1693934640,"post_id":77046532,"comment_id":135824131,"body_markdown":"Do you mean a BufferedOutputStream (https://docs.oracle.com/javase/8/docs/api/java/io/BufferedOutputStream.html)?  If not, in what way does the desired behavior differ?","body":"Do you mean a BufferedOutputStream (<a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/BufferedOutputStream.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/io/&hellip;</a>)?  If not, in what way does the desired behavior differ?"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1693934954,"post_id":77046532,"comment_id":135824186,"body_markdown":"You can extend [FilterOutputStream](https://docs.oracle.com/javase/8/docs/api/java/io/FilterOutputStream.html) and keep a buffer there.","body":"You can extend <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/FilterOutputStream.html\" rel=\"nofollow noreferrer\">FilterOutputStream</a> and keep a buffer there."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693951182,"creation_date":1693951182,"answer_id":77047975,"question_id":77046532,"body_markdown":"Try to understand how a circular buffer works:\r\nhttps://en.wikipedia.org/wiki/Circular_buffer\r\n\r\nThen create an implementation, or find one that already exists.\r\nIf you do it yourself just create an array of strings and use two pointers for writing and reading.\r\n\r\nA Queue limited in size will behave quite similar to your circular buffer if you think of overwrite protection. This is e.g. the case in the [LinkedBlockingQueue][1].\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/concurrent/LinkedBlockingQueue.html","title":"Custom Circular line OutputStream in Java","body":"<p>Try to understand how a circular buffer works:\n<a href=\"https://en.wikipedia.org/wiki/Circular_buffer\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Circular_buffer</a></p>\n<p>Then create an implementation, or find one that already exists.\nIf you do it yourself just create an array of strings and use two pointers for writing and reading.</p>\n<p>A Queue limited in size will behave quite similar to your circular buffer if you think of overwrite protection. This is e.g. the case in the <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/concurrent/LinkedBlockingQueue.html\" rel=\"nofollow noreferrer\">LinkedBlockingQueue</a>.</p>\n"}],"owner":{"account_id":26062291,"reputation":3,"user_id":19763401,"display_name":"Алексей"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1693951182,"creation_date":1693934401,"question_id":77046532,"body_markdown":"I need to create Circular OutputStream that limits the max number of lines and when it&#39;s full - starts writing with the oldest value. But I have no idea what to start with.","title":"Custom Circular line OutputStream in Java","body":"<p>I need to create Circular OutputStream that limits the max number of lines and when it's full - starts writing with the oldest value. But I have no idea what to start with.</p>\n"},{"tags":["java","android","include"],"answers":[{"tags":[],"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693949902,"creation_date":1693949902,"answer_id":77047882,"question_id":77046119,"body_markdown":"I have taken your code of content_dg_main_2 and done some changes.\r\n\r\ncontent_dg_main_2 code is here\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:aapt=&quot;http://schemas.android.com/aapt&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:id=&quot;@+id/activity_my_speedo_root&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:layout_gravity=&quot;start&quot;\r\n        &gt;\r\n        &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n            android:id=&quot;@+id/clHeader&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintLeft_toRightOf=&quot;parent&quot;&gt;\r\n            &lt;ImageView\r\n                android:id=&quot;@+id/ivNavMenu&quot;\r\n                android:layout_width=&quot;40dp&quot;\r\n                android:layout_height=&quot;40dp&quot;\r\n                android:layout_margin=&quot;8dp&quot;\r\n                android:padding=&quot;8dp&quot;\r\n                android:scaleType=&quot;fitXY&quot;\r\n                android:src=&quot;@drawable/products&quot;\r\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    &lt;!--        android:tint=&quot;@color/black&quot;--&gt;\r\n            &lt;ImageView\r\n                android:id=&quot;@+id/ivUpgrade&quot;\r\n                android:layout_width=&quot;32dp&quot;\r\n                android:layout_height=&quot;32dp&quot;\r\n                android:layout_margin=&quot;10dp&quot;\r\n                android:padding=&quot;4dp&quot;\r\n                android:src=&quot;@drawable/imagegallery&quot;\r\n                app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n                 /&gt;\r\n            &lt;TextView\r\n                android:id=&quot;@+id/tvHeader&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginStart=&quot;10dp&quot;\r\n                android:layout_marginEnd=&quot;10dp&quot;\r\n                android:text=&quot;Video Recorder&quot;\r\n                android:textColor=&quot;@color/black&quot;\r\n                android:textSize=&quot;18sp&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n                app:layout_constraintEnd_toStartOf=&quot;@+id/ivUpgrade&quot;\r\n                app:layout_constraintStart_toEndOf=&quot;@+id/ivNavMenu&quot;\r\n                app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n        &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n    &lt;!--    &lt;Button--&gt;\r\n    &lt;!--        android:id=&quot;@+id/button&quot;--&gt;\r\n    &lt;!--        android:layout_width=&quot;wrap_content&quot;--&gt;\r\n    &lt;!--        android:layout_height=&quot;wrap_content&quot;--&gt;\r\n    &lt;!--        android:onClick=&quot;consume&quot;--&gt;\r\n    &lt;!--        android:text=&quot;Button&quot;--&gt;\r\n    &lt;!--        app:layout_constraintEnd_toEndOf=&quot;parent&quot;--&gt;\r\n    &lt;!--        app:layout_constraintStart_toStartOf=&quot;parent&quot;--&gt;\r\n    &lt;!--        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;--&gt;\r\n        &lt;ScrollView\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@+id/clHeader&quot;&gt;\r\n            &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;&gt;\r\n                &lt;androidx.appcompat.widget.AppCompatButton\r\n                    android:id=&quot;@+id/btnstart&quot;\r\n                    android:layout_width=&quot;0dp&quot;\r\n                    android:layout_height=&quot;0dp&quot;\r\n                    android:layout_marginTop=&quot;10dp&quot;\r\n                    android:background=&quot;@mipmap/ic_launcher&quot;\r\n                    app:layout_constraintDimensionRatio=&quot;482:317&quot;\r\n                    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                    app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n                    app:layout_constraintWidth_percent=&quot;0.6&quot; /&gt;\r\n                &lt;!--            android:onClick=&quot;onclick&quot;--&gt;\r\n                &lt;TextView\r\n                    android:id=&quot;@+id/tvTimer&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_marginTop=&quot;64dp&quot;\r\n                    android:gravity=&quot;center&quot;\r\n                    android:text=&quot;00:00:00&quot;\r\n                    android:textColor=&quot;@color/black&quot;\r\n                    android:textSize=&quot;30sp&quot;\r\n                    android:textStyle=&quot;bold&quot;\r\n                    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                    app:layout_constraintHorizontal_bias=&quot;0.5&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                    app:layout_constraintTop_toBottomOf=&quot;@+id/btnstart&quot; /&gt;\r\n                &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n                    android:id=&quot;@+id/layout_gallery&quot;\r\n                    android:layout_width=&quot;0dp&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_marginTop=&quot;20dp&quot;\r\n                    android:padding=&quot;12dp&quot;\r\n                    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                    app:layout_constraintTop_toBottomOf=&quot;@+id/tvTimer&quot;\r\n                    app:layout_constraintWidth_percent=&quot;0.6&quot;&gt;\r\n                    &lt;ImageView\r\n                        android:id=&quot;@+id/gallryicon&quot;\r\n                        android:layout_width=&quot;70dp&quot;\r\n                        android:layout_height=&quot;70dp&quot;\r\n                        android:src=&quot;@mipmap/ic_launcher&quot;\r\n                        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n                    &lt;TextView\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:text=&quot;Gallery&quot;\r\n                        android:textColor=&quot;@color/black&quot;\r\n                        android:textSize=&quot;28dp&quot;\r\n                        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n                        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                        app:layout_constraintStart_toEndOf=&quot;@+id/gallryicon&quot;\r\n                        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n                &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n                &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n                    android:id=&quot;@+id/layout_setting&quot;\r\n                    android:layout_width=&quot;0dp&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_marginTop=&quot;10dp&quot;\r\n                    android:padding=&quot;12dp&quot;\r\n                    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                    app:layout_constraintTop_toBottomOf=&quot;@+id/layout_gallery&quot;\r\n                    app:layout_constraintWidth_percent=&quot;0.6&quot;&gt;\r\n                    &lt;ImageView\r\n                        android:id=&quot;@+id/settingicon&quot;\r\n                        android:layout_width=&quot;70dp&quot;\r\n                        android:layout_height=&quot;70dp&quot;\r\n                        android:src=&quot;@mipmap/ic_launcher&quot;\r\n                        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n                    &lt;TextView\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:text=&quot;Setting&quot;\r\n                        android:textColor=&quot;@color/black&quot;\r\n                        android:textSize=&quot;28dp&quot;\r\n                        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n                        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                        app:layout_constraintStart_toEndOf=&quot;@+id/settingicon&quot;\r\n                        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n                &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n                &lt;Button\r\n                    android:id=&quot;@+id/btnstop&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_marginTop=&quot;8dp&quot;\r\n                    android:text=&quot;stop service&quot;\r\n                    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                    app:layout_constraintTop_toBottomOf=&quot;@+id/btnstart&quot; /&gt;\r\n    &lt;!--            android:visibility=&quot;gone&quot;--&gt;\r\n                &lt;FrameLayout\r\n                    android:id=&quot;@+id/adViewFrameLayout&quot;\r\n                    android:layout_width=&quot;0dp&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_marginTop=&quot;20dp&quot;\r\n                    android:background=&quot;@android:color/transparent&quot;\r\n                    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                    app:layout_constraintTop_toBottomOf=&quot;@+id/layout_setting&quot; /&gt;\r\n            &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n        &lt;/ScrollView&gt;\r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\nand the main activity code is here where i have implemented setOnClickListeners.\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        Button startBtn;\r\n        ImageView navMenuImageView, upgradeImageView;\r\n        TextView timerTextView;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            startBtn = findViewById(R.id.btnstart);\r\n            navMenuImageView = findViewById(R.id.ivNavMenu);\r\n            upgradeImageView = findViewById(R.id.ivUpgrade);\r\n            timerTextView = findViewById(R.id.tvTimer);\r\n    \r\n            //1\r\n            startBtn.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    Toast.makeText(MainActivity.this, &quot;Start Button Clicked&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            });\r\n    \r\n            //2\r\n            navMenuImageView.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    Toast.makeText(MainActivity.this, &quot;Nav Menu ImageView Clicked&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            });\r\n    \r\n            //3\r\n            upgradeImageView.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    Toast.makeText(MainActivity.this, &quot;Upgrade ImageView Clicked&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            });\r\n    \r\n    \r\n    \r\n        }\r\n    }\r\n\r\n\r\nand these 3 onClickListeners works fine.","title":"android including layout with &lt;include&gt; tag , but any onclick functionality is not working","body":"<p>I have taken your code of content_dg_main_2 and done some changes.</p>\n<p>content_dg_main_2 code is here</p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:aapt=&quot;http://schemas.android.com/aapt&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:id=&quot;@+id/activity_my_speedo_root&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:layout_gravity=&quot;start&quot;\n    &gt;\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\n        android:id=&quot;@+id/clHeader&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintLeft_toRightOf=&quot;parent&quot;&gt;\n        &lt;ImageView\n            android:id=&quot;@+id/ivNavMenu&quot;\n            android:layout_width=&quot;40dp&quot;\n            android:layout_height=&quot;40dp&quot;\n            android:layout_margin=&quot;8dp&quot;\n            android:padding=&quot;8dp&quot;\n            android:scaleType=&quot;fitXY&quot;\n            android:src=&quot;@drawable/products&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n&lt;!--        android:tint=&quot;@color/black&quot;--&gt;\n        &lt;ImageView\n            android:id=&quot;@+id/ivUpgrade&quot;\n            android:layout_width=&quot;32dp&quot;\n            android:layout_height=&quot;32dp&quot;\n            android:layout_margin=&quot;10dp&quot;\n            android:padding=&quot;4dp&quot;\n            android:src=&quot;@drawable/imagegallery&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\n             /&gt;\n        &lt;TextView\n            android:id=&quot;@+id/tvHeader&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginStart=&quot;10dp&quot;\n            android:layout_marginEnd=&quot;10dp&quot;\n            android:text=&quot;Video Recorder&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:textSize=&quot;18sp&quot;\n            android:textStyle=&quot;bold&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n            app:layout_constraintEnd_toStartOf=&quot;@+id/ivUpgrade&quot;\n            app:layout_constraintStart_toEndOf=&quot;@+id/ivNavMenu&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n&lt;!--    &lt;Button--&gt;\n&lt;!--        android:id=&quot;@+id/button&quot;--&gt;\n&lt;!--        android:layout_width=&quot;wrap_content&quot;--&gt;\n&lt;!--        android:layout_height=&quot;wrap_content&quot;--&gt;\n&lt;!--        android:onClick=&quot;consume&quot;--&gt;\n&lt;!--        android:text=&quot;Button&quot;--&gt;\n&lt;!--        app:layout_constraintEnd_toEndOf=&quot;parent&quot;--&gt;\n&lt;!--        app:layout_constraintStart_toStartOf=&quot;parent&quot;--&gt;\n&lt;!--        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;--&gt;\n    &lt;ScrollView\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/clHeader&quot;&gt;\n        &lt;androidx.constraintlayout.widget.ConstraintLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;&gt;\n            &lt;androidx.appcompat.widget.AppCompatButton\n                android:id=&quot;@+id/btnstart&quot;\n                android:layout_width=&quot;0dp&quot;\n                android:layout_height=&quot;0dp&quot;\n                android:layout_marginTop=&quot;10dp&quot;\n                android:background=&quot;@mipmap/ic_launcher&quot;\n                app:layout_constraintDimensionRatio=&quot;482:317&quot;\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                app:layout_constraintTop_toTopOf=&quot;parent&quot;\n                app:layout_constraintWidth_percent=&quot;0.6&quot; /&gt;\n            &lt;!--            android:onClick=&quot;onclick&quot;--&gt;\n            &lt;TextView\n                android:id=&quot;@+id/tvTimer&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_marginTop=&quot;64dp&quot;\n                android:gravity=&quot;center&quot;\n                android:text=&quot;00:00:00&quot;\n                android:textColor=&quot;@color/black&quot;\n                android:textSize=&quot;30sp&quot;\n                android:textStyle=&quot;bold&quot;\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n                app:layout_constraintHorizontal_bias=&quot;0.5&quot;\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                app:layout_constraintTop_toBottomOf=&quot;@+id/btnstart&quot; /&gt;\n            &lt;androidx.constraintlayout.widget.ConstraintLayout\n                android:id=&quot;@+id/layout_gallery&quot;\n                android:layout_width=&quot;0dp&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_marginTop=&quot;20dp&quot;\n                android:padding=&quot;12dp&quot;\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                app:layout_constraintTop_toBottomOf=&quot;@+id/tvTimer&quot;\n                app:layout_constraintWidth_percent=&quot;0.6&quot;&gt;\n                &lt;ImageView\n                    android:id=&quot;@+id/gallryicon&quot;\n                    android:layout_width=&quot;70dp&quot;\n                    android:layout_height=&quot;70dp&quot;\n                    android:src=&quot;@mipmap/ic_launcher&quot;\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                    app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n                &lt;TextView\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:text=&quot;Gallery&quot;\n                    android:textColor=&quot;@color/black&quot;\n                    android:textSize=&quot;28dp&quot;\n                    app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n                    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n                    app:layout_constraintStart_toEndOf=&quot;@+id/gallryicon&quot;\n                    app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n            &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n            &lt;androidx.constraintlayout.widget.ConstraintLayout\n                android:id=&quot;@+id/layout_setting&quot;\n                android:layout_width=&quot;0dp&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_marginTop=&quot;10dp&quot;\n                android:padding=&quot;12dp&quot;\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                app:layout_constraintTop_toBottomOf=&quot;@+id/layout_gallery&quot;\n                app:layout_constraintWidth_percent=&quot;0.6&quot;&gt;\n                &lt;ImageView\n                    android:id=&quot;@+id/settingicon&quot;\n                    android:layout_width=&quot;70dp&quot;\n                    android:layout_height=&quot;70dp&quot;\n                    android:src=&quot;@mipmap/ic_launcher&quot;\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                    app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n                &lt;TextView\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:text=&quot;Setting&quot;\n                    android:textColor=&quot;@color/black&quot;\n                    android:textSize=&quot;28dp&quot;\n                    app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n                    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n                    app:layout_constraintStart_toEndOf=&quot;@+id/settingicon&quot;\n                    app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n            &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n            &lt;Button\n                android:id=&quot;@+id/btnstop&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_marginTop=&quot;8dp&quot;\n                android:text=&quot;stop service&quot;\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                app:layout_constraintTop_toBottomOf=&quot;@+id/btnstart&quot; /&gt;\n&lt;!--            android:visibility=&quot;gone&quot;--&gt;\n            &lt;FrameLayout\n                android:id=&quot;@+id/adViewFrameLayout&quot;\n                android:layout_width=&quot;0dp&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_marginTop=&quot;20dp&quot;\n                android:background=&quot;@android:color/transparent&quot;\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                app:layout_constraintTop_toBottomOf=&quot;@+id/layout_setting&quot; /&gt;\n        &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n    &lt;/ScrollView&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>and the main activity code is here where i have implemented setOnClickListeners.</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    Button startBtn;\n    ImageView navMenuImageView, upgradeImageView;\n    TextView timerTextView;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        startBtn = findViewById(R.id.btnstart);\n        navMenuImageView = findViewById(R.id.ivNavMenu);\n        upgradeImageView = findViewById(R.id.ivUpgrade);\n        timerTextView = findViewById(R.id.tvTimer);\n\n        //1\n        startBtn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Toast.makeText(MainActivity.this, &quot;Start Button Clicked&quot;, Toast.LENGTH_SHORT).show();\n            }\n        });\n\n        //2\n        navMenuImageView.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Toast.makeText(MainActivity.this, &quot;Nav Menu ImageView Clicked&quot;, Toast.LENGTH_SHORT).show();\n            }\n        });\n\n        //3\n        upgradeImageView.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Toast.makeText(MainActivity.this, &quot;Upgrade ImageView Clicked&quot;, Toast.LENGTH_SHORT).show();\n            }\n        });\n\n\n\n    }\n}\n</code></pre>\n<p>and these 3 onClickListeners works fine.</p>\n"}],"owner":{"account_id":11822974,"reputation":31,"user_id":8651592,"display_name":"Sufyan Hashmi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693949902,"creation_date":1693930377,"question_id":77046119,"body_markdown":"I have a navigation drawer in my app and one included layout. but when I run the app every image and button with onClickListener not working. in the below code, navigationDrawer code is not included because I want the other buttons to be clicked. I don&#39;t know if there is invisible layout which blocks everything or what\r\n\r\n**main Activity Layout with include tag**\r\n    \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.drawerlayout.widget.DrawerLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:aapt=&quot;http://schemas.android.com/aapt&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:id=&quot;@+id/drawerLayout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        tools:openDrawer=&quot;start&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n        &lt;include\r\n            layout=&quot;@layout/content_dg_main_2&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot; /&gt;\r\n    \r\n        &lt;com.google.android.material.navigation.NavigationView\r\n            android:id=&quot;@+id/nav_view&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:layout_gravity=&quot;start&quot;\r\n            android:background=&quot;@color/colorPrimary&quot;\r\n            app:headerLayout=&quot;@layout/navigation_drawer_menu_header&quot;\r\n            app:itemIconTint=&quot;@color/white&quot;\r\n            app:itemTextColor=&quot;@color/white&quot;\r\n            app:menu=&quot;@menu/drawer_menu&quot; /&gt;\r\n    &lt;/androidx.drawerlayout.widget.DrawerLayout&gt;\r\n**this this another layout (content_dg_main_2) with button and images**\r\n\r\n    \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n        &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:aapt=&quot;http://schemas.android.com/aapt&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:id=&quot;@+id/activity_my_speedo_root&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:layout_gravity=&quot;start&quot;\r\n        &gt;\r\n    \r\n        &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n            android:id=&quot;@+id/clHeader&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\r\n    \r\n            &lt;ImageView\r\n                android:id=&quot;@+id/ivNavMenu&quot;\r\n                android:layout_width=&quot;40dp&quot;\r\n                android:layout_height=&quot;40dp&quot;\r\n                android:layout_margin=&quot;8dp&quot;\r\n                android:padding=&quot;8dp&quot;\r\n                android:scaleType=&quot;fitXY&quot;\r\n                android:src=&quot;@drawable/menu&quot;\r\n                android:tint=&quot;@color/black&quot;\r\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    \r\n            &lt;ImageView\r\n                android:id=&quot;@+id/ivUpgrade&quot;\r\n                android:layout_width=&quot;32dp&quot;\r\n                android:layout_height=&quot;32dp&quot;\r\n                android:layout_margin=&quot;10dp&quot;\r\n                android:padding=&quot;4dp&quot;\r\n                android:src=&quot;@drawable/ic_upgrade&quot;\r\n                app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n                app:tint=&quot;@color/colorBNBSelected&quot; /&gt;\r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/tvHeader&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginStart=&quot;10dp&quot;\r\n                android:layout_marginEnd=&quot;10dp&quot;\r\n                android:text=&quot;Video Recorder&quot;\r\n                android:textColor=&quot;@color/black&quot;\r\n                android:textSize=&quot;18sp&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n                app:layout_constraintEnd_toStartOf=&quot;@+id/ivUpgrade&quot;\r\n                app:layout_constraintStart_toEndOf=&quot;@+id/ivNavMenu&quot;\r\n                app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n        &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n    \r\n        &lt;Button\r\n            android:id=&quot;@+id/button&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:onClick=&quot;consume&quot;\r\n            android:text=&quot;Button&quot;\r\n            android:visibility=&quot;gone&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    \r\n        &lt;ScrollView\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;0dp&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@+id/clHeader&quot;&gt;\r\n    \r\n            &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;&gt;\r\n    \r\n                &lt;androidx.appcompat.widget.AppCompatButton\r\n                    android:id=&quot;@+id/btnstart&quot;\r\n                    android:layout_width=&quot;0dp&quot;\r\n                    android:layout_height=&quot;0dp&quot;\r\n                    android:layout_marginTop=&quot;10dp&quot;\r\n                    android:onClick=&quot;onclick&quot;\r\n                    android:background=&quot;@mipmap/ic_launcher&quot;\r\n                    app:layout_constraintBottom_toTopOf=&quot;@+id/btnstop&quot;\r\n                    app:layout_constraintDimensionRatio=&quot;482:317&quot;\r\n                    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                    app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n                    app:layout_constraintWidth_percent=&quot;0.6&quot; /&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/tvTimer&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_marginTop=&quot;20dp&quot;\r\n                    android:gravity=&quot;center&quot;\r\n                    android:text=&quot;00:00:00&quot;\r\n                    android:textColor=&quot;@color/black&quot;\r\n                    android:textSize=&quot;30sp&quot;\r\n                    android:textStyle=&quot;bold&quot;\r\n                    app:layout_constraintTop_toBottomOf=&quot;@+id/btnstart&quot; /&gt;\r\n    \r\n                &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n                    android:id=&quot;@+id/layout_gallery&quot;\r\n                    android:layout_width=&quot;0dp&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_marginTop=&quot;20dp&quot;\r\n                    android:background=&quot;@drawable/blue_border_bg&quot;\r\n                    android:padding=&quot;12dp&quot;\r\n                    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                    app:layout_constraintTop_toBottomOf=&quot;@+id/tvTimer&quot;\r\n                    app:layout_constraintWidth_percent=&quot;0.6&quot;&gt;\r\n    \r\n                    &lt;ImageView\r\n                        android:id=&quot;@+id/gallryicon&quot;\r\n                        android:layout_width=&quot;70dp&quot;\r\n                        android:layout_height=&quot;70dp&quot;\r\n                        android:src=&quot;@mipmap/ic_launcher&quot;\r\n                        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    \r\n                    &lt;TextView\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:text=&quot;Gallery&quot;\r\n                        android:textColor=&quot;@color/black&quot;\r\n                        android:textSize=&quot;28dp&quot;\r\n                        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n                        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                        app:layout_constraintStart_toEndOf=&quot;@+id/gallryicon&quot;\r\n                        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n                &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n    \r\n                &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n                    android:id=&quot;@+id/layout_setting&quot;\r\n                    android:layout_width=&quot;0dp&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_marginTop=&quot;10dp&quot;\r\n                    android:background=&quot;@drawable/green_border_bg&quot;\r\n                    android:padding=&quot;12dp&quot;\r\n                    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                    app:layout_constraintTop_toBottomOf=&quot;@+id/layout_gallery&quot;\r\n                    app:layout_constraintWidth_percent=&quot;0.6&quot;&gt;\r\n    \r\n                    &lt;ImageView\r\n                        android:id=&quot;@+id/settingicon&quot;\r\n                        android:layout_width=&quot;70dp&quot;\r\n                        android:layout_height=&quot;70dp&quot;\r\n                        android:src=&quot;@mipmap/ic_launcher&quot;\r\n                        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    \r\n                    &lt;TextView\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:text=&quot;Setting&quot;\r\n                        android:textColor=&quot;@color/black&quot;\r\n                        android:textSize=&quot;28dp&quot;\r\n                        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n                        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                        app:layout_constraintStart_toEndOf=&quot;@+id/settingicon&quot;\r\n                        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n                &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n    \r\n                &lt;Button\r\n                    android:id=&quot;@+id/btnstop&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:text=&quot;stop service&quot;\r\n                    android:visibility=&quot;gone&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                    app:layout_constraintTop_toBottomOf=&quot;@+id/btnstart&quot; /&gt;\r\n    \r\n                &lt;FrameLayout\r\n                    android:id=&quot;@+id/adViewFrameLayout&quot;\r\n                    android:layout_width=&quot;0dp&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_marginTop=&quot;20dp&quot;\r\n                    android:background=&quot;@android:color/transparent&quot;\r\n                    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                    app:layout_constraintTop_toBottomOf=&quot;@+id/layout_setting&quot; /&gt;\r\n            &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n        &lt;/ScrollView&gt;\r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n**java code**\r\n    \r\n    \r\n\r\n    startButton = findViewById(R.id.btnstart);\r\n    navMenuImageView = findViewById(R.id.ivNavMenu);\r\n    upgradeImageView = findViewById(R.id.ivUpgrade);\r\n    timerTextView = findViewById(R.id.tvTimer);\r\n    \r\n    startButton.setOnClickListener(new View.OnClickListener() {\r\n        @Override\r\n        public void onClick(View view) {\r\n            Toast.makeText(MainDGAActivity.this, &quot;start button Clicked&quot;, Toast.LENGTH_SHORT).show();\r\n    \r\n        }\r\n    });\r\n    \r\n    navMenuImageView.setOnClickListener(new View.OnClickListener() {\r\n        @Override\r\n        public void onClick(View view) {\r\n    \r\n                drawerLayout.closeDrawer(GravityCompat.START);\r\n        }\r\n    });\r\n    \r\n    upgradeImageView.setOnClickListener(new View.OnClickListener() {\r\n        @Override\r\n        public void onClick(View view) {\r\n            // Create a dialog to display the upgrade layout\r\n            final Dialog upgradeDialog = new Dialog(MainDGAActivity.this);\r\n            upgradeDialog.setContentView(R.layout.purchase_dg_dialog); // Replace with your upgrade layout XML file\r\n    \r\n            // Optionally, set dialog properties like background, title, etc.\r\n            // For example:\r\n           /* upgradeDialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n            upgradeDialog.setTitle(&quot;Upgrade&quot;);*/\r\n    \r\n            // Add any logic or UI interactions related to your upgrade screen here\r\n    \r\n            // Add a button to close the dialog\r\n            Button closeButton = upgradeDialog.findViewById(R.id.closeButton);\r\n            closeButton.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    upgradeDialog.dismiss(); // Close the dialog when the close button is clicked\r\n                }\r\n            });\r\n    \r\n            // Show the dialog\r\n            upgradeDialog.show();\r\n        }\r\n    });","title":"android including layout with &lt;include&gt; tag , but any onclick functionality is not working","body":"<p>I have a navigation drawer in my app and one included layout. but when I run the app every image and button with onClickListener not working. in the below code, navigationDrawer code is not included because I want the other buttons to be clicked. I don't know if there is invisible layout which blocks everything or what</p>\n<p><strong>main Activity Layout with include tag</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.drawerlayout.widget.DrawerLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:aapt=&quot;http://schemas.android.com/aapt&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/drawerLayout&quot;\n    android:layout_width=&quot;match_parent&quot;\n    tools:openDrawer=&quot;start&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n    &lt;include\n        layout=&quot;@layout/content_dg_main_2&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot; /&gt;\n\n    &lt;com.google.android.material.navigation.NavigationView\n        android:id=&quot;@+id/nav_view&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:layout_gravity=&quot;start&quot;\n        android:background=&quot;@color/colorPrimary&quot;\n        app:headerLayout=&quot;@layout/navigation_drawer_menu_header&quot;\n        app:itemIconTint=&quot;@color/white&quot;\n        app:itemTextColor=&quot;@color/white&quot;\n        app:menu=&quot;@menu/drawer_menu&quot; /&gt;\n&lt;/androidx.drawerlayout.widget.DrawerLayout&gt;\n</code></pre>\n<p><strong>this this another layout (content_dg_main_2) with button and images</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:aapt=&quot;http://schemas.android.com/aapt&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:id=&quot;@+id/activity_my_speedo_root&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:layout_gravity=&quot;start&quot;\n    &gt;\n\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\n        android:id=&quot;@+id/clHeader&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/ivNavMenu&quot;\n            android:layout_width=&quot;40dp&quot;\n            android:layout_height=&quot;40dp&quot;\n            android:layout_margin=&quot;8dp&quot;\n            android:padding=&quot;8dp&quot;\n            android:scaleType=&quot;fitXY&quot;\n            android:src=&quot;@drawable/menu&quot;\n            android:tint=&quot;@color/black&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/ivUpgrade&quot;\n            android:layout_width=&quot;32dp&quot;\n            android:layout_height=&quot;32dp&quot;\n            android:layout_margin=&quot;10dp&quot;\n            android:padding=&quot;4dp&quot;\n            android:src=&quot;@drawable/ic_upgrade&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\n            app:tint=&quot;@color/colorBNBSelected&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/tvHeader&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginStart=&quot;10dp&quot;\n            android:layout_marginEnd=&quot;10dp&quot;\n            android:text=&quot;Video Recorder&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:textSize=&quot;18sp&quot;\n            android:textStyle=&quot;bold&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n            app:layout_constraintEnd_toStartOf=&quot;@+id/ivUpgrade&quot;\n            app:layout_constraintStart_toEndOf=&quot;@+id/ivNavMenu&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/button&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:onClick=&quot;consume&quot;\n        android:text=&quot;Button&quot;\n        android:visibility=&quot;gone&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n    &lt;ScrollView\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;0dp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/clHeader&quot;&gt;\n\n        &lt;androidx.constraintlayout.widget.ConstraintLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;&gt;\n\n            &lt;androidx.appcompat.widget.AppCompatButton\n                android:id=&quot;@+id/btnstart&quot;\n                android:layout_width=&quot;0dp&quot;\n                android:layout_height=&quot;0dp&quot;\n                android:layout_marginTop=&quot;10dp&quot;\n                android:onClick=&quot;onclick&quot;\n                android:background=&quot;@mipmap/ic_launcher&quot;\n                app:layout_constraintBottom_toTopOf=&quot;@+id/btnstop&quot;\n                app:layout_constraintDimensionRatio=&quot;482:317&quot;\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                app:layout_constraintTop_toTopOf=&quot;parent&quot;\n                app:layout_constraintWidth_percent=&quot;0.6&quot; /&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/tvTimer&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_marginTop=&quot;20dp&quot;\n                android:gravity=&quot;center&quot;\n                android:text=&quot;00:00:00&quot;\n                android:textColor=&quot;@color/black&quot;\n                android:textSize=&quot;30sp&quot;\n                android:textStyle=&quot;bold&quot;\n                app:layout_constraintTop_toBottomOf=&quot;@+id/btnstart&quot; /&gt;\n\n            &lt;androidx.constraintlayout.widget.ConstraintLayout\n                android:id=&quot;@+id/layout_gallery&quot;\n                android:layout_width=&quot;0dp&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_marginTop=&quot;20dp&quot;\n                android:background=&quot;@drawable/blue_border_bg&quot;\n                android:padding=&quot;12dp&quot;\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                app:layout_constraintTop_toBottomOf=&quot;@+id/tvTimer&quot;\n                app:layout_constraintWidth_percent=&quot;0.6&quot;&gt;\n\n                &lt;ImageView\n                    android:id=&quot;@+id/gallryicon&quot;\n                    android:layout_width=&quot;70dp&quot;\n                    android:layout_height=&quot;70dp&quot;\n                    android:src=&quot;@mipmap/ic_launcher&quot;\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                    app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n                &lt;TextView\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:text=&quot;Gallery&quot;\n                    android:textColor=&quot;@color/black&quot;\n                    android:textSize=&quot;28dp&quot;\n                    app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n                    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n                    app:layout_constraintStart_toEndOf=&quot;@+id/gallryicon&quot;\n                    app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n            &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n\n            &lt;androidx.constraintlayout.widget.ConstraintLayout\n                android:id=&quot;@+id/layout_setting&quot;\n                android:layout_width=&quot;0dp&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_marginTop=&quot;10dp&quot;\n                android:background=&quot;@drawable/green_border_bg&quot;\n                android:padding=&quot;12dp&quot;\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                app:layout_constraintTop_toBottomOf=&quot;@+id/layout_gallery&quot;\n                app:layout_constraintWidth_percent=&quot;0.6&quot;&gt;\n\n                &lt;ImageView\n                    android:id=&quot;@+id/settingicon&quot;\n                    android:layout_width=&quot;70dp&quot;\n                    android:layout_height=&quot;70dp&quot;\n                    android:src=&quot;@mipmap/ic_launcher&quot;\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                    app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n                &lt;TextView\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:text=&quot;Setting&quot;\n                    android:textColor=&quot;@color/black&quot;\n                    android:textSize=&quot;28dp&quot;\n                    app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n                    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n                    app:layout_constraintStart_toEndOf=&quot;@+id/settingicon&quot;\n                    app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n            &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n\n            &lt;Button\n                android:id=&quot;@+id/btnstop&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:text=&quot;stop service&quot;\n                android:visibility=&quot;gone&quot;\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                app:layout_constraintTop_toBottomOf=&quot;@+id/btnstart&quot; /&gt;\n\n            &lt;FrameLayout\n                android:id=&quot;@+id/adViewFrameLayout&quot;\n                android:layout_width=&quot;0dp&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_marginTop=&quot;20dp&quot;\n                android:background=&quot;@android:color/transparent&quot;\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                app:layout_constraintTop_toBottomOf=&quot;@+id/layout_setting&quot; /&gt;\n        &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n    &lt;/ScrollView&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p><strong>java code</strong></p>\n<pre><code>startButton = findViewById(R.id.btnstart);\nnavMenuImageView = findViewById(R.id.ivNavMenu);\nupgradeImageView = findViewById(R.id.ivUpgrade);\ntimerTextView = findViewById(R.id.tvTimer);\n\nstartButton.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View view) {\n        Toast.makeText(MainDGAActivity.this, &quot;start button Clicked&quot;, Toast.LENGTH_SHORT).show();\n\n    }\n});\n\nnavMenuImageView.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View view) {\n\n            drawerLayout.closeDrawer(GravityCompat.START);\n    }\n});\n\nupgradeImageView.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View view) {\n        // Create a dialog to display the upgrade layout\n        final Dialog upgradeDialog = new Dialog(MainDGAActivity.this);\n        upgradeDialog.setContentView(R.layout.purchase_dg_dialog); // Replace with your upgrade layout XML file\n\n        // Optionally, set dialog properties like background, title, etc.\n        // For example:\n       /* upgradeDialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\n        upgradeDialog.setTitle(&quot;Upgrade&quot;);*/\n\n        // Add any logic or UI interactions related to your upgrade screen here\n\n        // Add a button to close the dialog\n        Button closeButton = upgradeDialog.findViewById(R.id.closeButton);\n        closeButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                upgradeDialog.dismiss(); // Close the dialog when the close button is clicked\n            }\n        });\n\n        // Show the dialog\n        upgradeDialog.show();\n    }\n});\n</code></pre>\n"},{"tags":["java","kotlin"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1469809369,"post_id":38663360,"comment_id":64707673,"body_markdown":"No. Variable names are merely there for the programmer&#39;s convenience; the compiler throws them away.","body":"No. Variable names are merely there for the programmer&#39;s convenience; the compiler throws them away."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1469809421,"post_id":38663360,"comment_id":64707701,"body_markdown":"Consider what you think it should print for `printLocalVariables(1, one + 1);`.","body":"Consider what you think it should print for <code>printLocalVariables(1, one + 1);</code>."},{"owner":{"account_id":6312955,"reputation":2777,"user_id":4903925,"accept_rate":71,"display_name":"Bonatti"},"score":0,"creation_date":1469809841,"post_id":38663360,"comment_id":64707952,"body_markdown":"You can however get a memory location representation. So, &quot;one&quot; could become @2123d517 and you could trace that &quot;pointer&quot; back and forth. If its the same value, then its the same variable, in that context.","body":"You can however get a memory location representation. So, &quot;one&quot; could become @2123d517 and you could trace that &quot;pointer&quot; back and forth. If its the same value, then its the same variable, in that context."},{"owner":{"account_id":8605281,"reputation":364,"user_id":6445611,"display_name":"Александр Кундрюков"},"score":0,"creation_date":1469810135,"post_id":38663360,"comment_id":64708109,"body_markdown":"@AndyTurner &quot;value_int1, value_int2&quot; for example, thank you for your answer.","body":"@AndyTurner &quot;value_int1, value_int2&quot; for example, thank you for your answer."},{"owner":{"account_id":8605281,"reputation":364,"user_id":6445611,"display_name":"Александр Кундрюков"},"score":0,"creation_date":1469810445,"post_id":38663360,"comment_id":64708274,"body_markdown":"@Bonatti thank you, I want do another magic, I need to convert variable one to string &quot;one&quot;","body":"@Bonatti thank you, I want do another magic, I need to convert variable one to string &quot;one&quot;"},{"owner":{"account_id":6312955,"reputation":2777,"user_id":4903925,"accept_rate":71,"display_name":"Bonatti"},"score":0,"creation_date":1469811205,"post_id":38663360,"comment_id":64708627,"body_markdown":"As far as I can tell, your &quot;problem&quot; is to decompile a binary file, and get the code associated with it. If this is it, then just search for any decompiler such as [this](http://www.javadecompilers.com/) one, that is even web based that can decompile Java, Dalvik, Python, etc. State what your problem is directly, what you tried, and what you expected/wanted to happen","body":"As far as I can tell, your &quot;problem&quot; is to decompile a binary file, and get the code associated with it. If this is it, then just search for any decompiler such as <a href=\"http://www.javadecompilers.com/\" rel=\"nofollow noreferrer\">this</a> one, that is even web based that can decompile Java, Dalvik, Python, etc. State what your problem is directly, what you tried, and what you expected/wanted to happen"}],"answers":[{"tags":[],"owner":{"account_id":5074801,"reputation":5481,"user_id":4072509,"display_name":"apetranzilla"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1469809470,"creation_date":1469809470,"answer_id":38663451,"question_id":38663360,"body_markdown":"No, it&#39;s not possible. Only the variable values are passed, no data that could give you the name is available.","title":"It is possible to get local variable names programmatically in Java or Kotlin?","body":"<p>No, it's not possible. Only the variable values are passed, no data that could give you the name is available.</p>\n"},{"tags":[],"owner":{"account_id":1284143,"reputation":43090,"user_id":1237575,"accept_rate":96,"display_name":"Rafael Winterhalter"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1469810721,"creation_date":1469810721,"answer_id":38663770,"question_id":38663360,"body_markdown":"Theoretically, it is possible.\r\n\r\nYou can use a byte code parser like ASM to extract a method&#39;s local variable table from the class file of the declaring class. This table contains the names of all local variables and an offset for their validity to identify the declaration order.\r\n\r\nDo however note that this attribute is optional. A compiler can omitt adding this debug information. ","title":"It is possible to get local variable names programmatically in Java or Kotlin?","body":"<p>Theoretically, it is possible.</p>\n\n<p>You can use a byte code parser like ASM to extract a method's local variable table from the class file of the declaring class. This table contains the names of all local variables and an offset for their validity to identify the declaration order.</p>\n\n<p>Do however note that this attribute is optional. A compiler can omitt adding this debug information. </p>\n"},{"tags":[],"owner":{"account_id":3786966,"reputation":32456,"user_id":3144601,"accept_rate":75,"display_name":"voddan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1469811966,"creation_date":1469811966,"answer_id":38664073,"question_id":38663360,"body_markdown":"In the case like your example `one` and `two` will be inlined in the call site and leave no trail in the compiled code. Ups.\r\n\r\nIf all you want is easy logging, and you are using InteliJ (you should!), then use code templates. They allow one to use the local name, so you&#39;ll type `one.log&lt;tab&gt;` and get `one.log(&quot;one&quot;)`, for example","title":"It is possible to get local variable names programmatically in Java or Kotlin?","body":"<p>In the case like your example <code>one</code> and <code>two</code> will be inlined in the call site and leave no trail in the compiled code. Ups.</p>\n\n<p>If all you want is easy logging, and you are using InteliJ (you should!), then use code templates. They allow one to use the local name, so you'll type <code>one.log&lt;tab&gt;</code> and get <code>one.log(\"one\")</code>, for example</p>\n"},{"tags":[],"owner":{"account_id":477949,"reputation":5596,"user_id":889742,"accept_rate":28,"display_name":"Gonen I"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1469831558,"creation_date":1469830970,"answer_id":38668296,"question_id":38663360,"body_markdown":"This is an interesting question. But What is the purpose? Is it just an exercise?\r\n\r\nYes, getting local variable names programmatically is possible under certain conditions.\r\n\r\n1. According to some definitions, in java, function parameters are a kind of local variable. You can get those , if the code was compiled using debug information, with java reflection, method.getParameterTypes()\r\n\r\n2. If you have a .class file compiled with debug information, you can read it the local variables from it, for example using asm&#39;s ClassReader.\r\nThe following code looks at the locals of class A&#39;s function f1\r\n\r\nHere is the code:\r\n\r\n    import java.io.File;\r\n    \r\n    import java.io.FileInputStream;\r\n    \r\n    import java.io.FileNotFoundException;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    import java.util.List;\r\n    \r\n    \r\n    import org.objectweb.asm.ClassReader;\r\n    \r\n    import org.objectweb.asm.ClassVisitor;\r\n    \r\n    import org.objectweb.asm.tree.ClassNode;\r\n    \r\n    import org.objectweb.asm.tree.LocalVariableNode;\r\n    \r\n    import org.objectweb.asm.tree.MethodNode;\r\n    \r\n    public class Example {\r\n    \tpublic static void main(String[] args) throws FileNotFoundException, IOException {\r\n    \t\tClassReader reader = new ClassReader(new FileInputStream(new File(&quot;A.class&quot;)));\r\n  \r\n    \t\tfinal ClassNode classNode = new ClassNode();\r\n    \t\treader.accept((ClassVisitor) classNode, 0);\r\n    \r\n    \t\tfor (final MethodNode mn : (List&lt;MethodNode&gt;)classNode.methods) {\r\n    \t\t\tif ( mn.name.equals(&quot;f1&quot;))\r\n    \t\t\t\tfor (LocalVariableNode n : (List&lt;LocalVariableNode&gt;)mn.localVariables) {\r\n    \t\t\t\t\tSystem.out.println(n.name);\r\n    \t\t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\n3. I&#39;m not sure about this, but I think you could also do it using the LocalVariable class of the Java Debug Interface","title":"It is possible to get local variable names programmatically in Java or Kotlin?","body":"<p>This is an interesting question. But What is the purpose? Is it just an exercise?</p>\n\n<p>Yes, getting local variable names programmatically is possible under certain conditions.</p>\n\n<ol>\n<li><p>According to some definitions, in java, function parameters are a kind of local variable. You can get those , if the code was compiled using debug information, with java reflection, method.getParameterTypes()</p></li>\n<li><p>If you have a .class file compiled with debug information, you can read it the local variables from it, for example using asm's ClassReader.\nThe following code looks at the locals of class A's function f1</p></li>\n</ol>\n\n<p>Here is the code:</p>\n\n<pre><code>import java.io.File;\n\nimport java.io.FileInputStream;\n\nimport java.io.FileNotFoundException;\n\nimport java.io.IOException;\n\nimport java.util.List;\n\n\nimport org.objectweb.asm.ClassReader;\n\nimport org.objectweb.asm.ClassVisitor;\n\nimport org.objectweb.asm.tree.ClassNode;\n\nimport org.objectweb.asm.tree.LocalVariableNode;\n\nimport org.objectweb.asm.tree.MethodNode;\n\npublic class Example {\n    public static void main(String[] args) throws FileNotFoundException, IOException {\n        ClassReader reader = new ClassReader(new FileInputStream(new File(\"A.class\")));\n\n        final ClassNode classNode = new ClassNode();\n        reader.accept((ClassVisitor) classNode, 0);\n\n        for (final MethodNode mn : (List&lt;MethodNode&gt;)classNode.methods) {\n            if ( mn.name.equals(\"f1\"))\n                for (LocalVariableNode n : (List&lt;LocalVariableNode&gt;)mn.localVariables) {\n                    System.out.println(n.name);\n                }\n        }\n    }\n}\n</code></pre>\n\n<ol start=\"3\">\n<li>I'm not sure about this, but I think you could also do it using the LocalVariable class of the Java Debug Interface</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":9052714,"reputation":1,"user_id":6742103,"display_name":"Suresh Tiwari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693949743,"creation_date":1693949743,"answer_id":77047871,"question_id":38663360,"body_markdown":"Yes \r\n\r\n    objectName::PropertyOfTheObject.name\r\n\r\nThis works only in Kotlin","title":"It is possible to get local variable names programmatically in Java or Kotlin?","body":"<p>Yes</p>\n<pre><code>objectName::PropertyOfTheObject.name\n</code></pre>\n<p>This works only in Kotlin</p>\n"}],"owner":{"account_id":8605281,"reputation":364,"user_id":6445611,"display_name":"Александр Кундрюков"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5099,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":38663770,"answer_count":5,"score":6,"last_activity_date":1693949743,"creation_date":1469809140,"question_id":38663360,"body_markdown":"It is possible to get local variable names programmatically in Java or Kotlin?\r\n\r\nFor example, this code\r\n\r\n    public void printOneTwo() {\r\n        int one = 1;\r\n        int two = 2;\r\n    \r\n        printLocalVariables(one, two);\r\n    }\r\n    \r\n    private void printLocalVariables(Objects... variables) {\r\n        //code\r\n    }\r\n    \r\n    //result: &quot;one, two&quot;\r\n\r\nI need to convert variable `one` to string `&quot;one&quot;`","title":"It is possible to get local variable names programmatically in Java or Kotlin?","body":"<p>It is possible to get local variable names programmatically in Java or Kotlin?</p>\n\n<p>For example, this code</p>\n\n<pre><code>public void printOneTwo() {\n    int one = 1;\n    int two = 2;\n\n    printLocalVariables(one, two);\n}\n\nprivate void printLocalVariables(Objects... variables) {\n    //code\n}\n\n//result: \"one, two\"\n</code></pre>\n\n<p>I need to convert variable <code>one</code> to string <code>\"one\"</code></p>\n"},{"tags":["java","graalvm","graalvm-native-image"],"answers":[{"tags":[],"owner":{"account_id":5604129,"reputation":318,"user_id":5399914,"display_name":"Munish Chouhan"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1598698926,"creation_date":1598698926,"answer_id":63646236,"question_id":63638125,"body_markdown":"you can do something like this:\r\n\r\n    native-image -H:IncludeResources= &lt;Java regexp that matches resources to be included in the image&gt; \r\n\r\nto get the full picture, please check this link out\r\nhttps://docs.oracle.com/en/graalvm/enterprise/20/docs/reference-manual/native-image/Resources/","title":"How GraalVM integrate resources file in native image","body":"<p>you can do something like this:</p>\n<pre><code>native-image -H:IncludeResources= &lt;Java regexp that matches resources to be included in the image&gt; \n</code></pre>\n<p>to get the full picture, please check this link out\n<a href=\"https://docs.oracle.com/en/graalvm/enterprise/20/docs/reference-manual/native-image/Resources/\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/graalvm/enterprise/20/docs/reference-manual/native-image/Resources/</a></p>\n"}],"owner":{"account_id":1677099,"reputation":10905,"user_id":1542363,"accept_rate":92,"display_name":"Sam YC"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2194,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1693949553,"creation_date":1598634156,"question_id":63638125,"body_markdown":"Based on [this][1]:\r\n\r\n&gt; By default, the native-image builder will not integrate any of the\r\n&gt; resources which are on the classpath during image building into the\r\n&gt; image it creates. To make calls such as Class.getResource(),\r\n&gt; Class.getResourceAsStream() (or the corresponding ClassLoader methods)\r\n&gt; return specific resources (instead of null), the resources that should\r\n&gt; be accessible at image runtime need to be explicitly specified.\r\n\r\nThat explain how to access the resource file via `getResource()`. I have an use case which I need to load the resources file in WebView for iOS, so basically I try this:\r\n\r\n    public void start(Stage stage) {\r\n    \r\n        WebView webView = new WebView();\r\n    \r\n        URL url = Thread.currentThread().getContextClassLoader().getResource(&quot;demo/index.html&quot;);\r\n        \r\n        System.out.println(&quot;url = &quot; + url);\r\n        System.out.println(&quot;url.toExternalForm = &quot; + url.toExternalForm());\r\n        System.out.println(&quot;url.getPath()= &quot; + url.getPath());\r\n        \r\n        webView.getEngine().load(&quot;file://&quot; + url.getPath());\r\n        \r\n        VBox root = new VBox(webView);\r\n        root.setAlignment(Pos.CENTER);\r\n        Scene scene = new Scene(root, 640, 480);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n    }\r\n\r\nNone of these `url.toString()`, `url.toExternalForm`, `url.getPath()` return valid loadable path in native images, their value are either `resource:demo/index.html` or `file://demo/index.html`.\r\n\r\nDoes anyone know how the resource files are managed in the native image? Are they kind of merged in the single binary? By any chance, are we able to locate the resource files via file protocol?\r\n\r\n  [1]: https://www.graalvm.org/reference-manual/native-image/Resources/","title":"How GraalVM integrate resources file in native image","body":"<p>Based on <a href=\"https://www.graalvm.org/reference-manual/native-image/Resources/\" rel=\"nofollow noreferrer\">this</a>:</p>\n<blockquote>\n<p>By default, the native-image builder will not integrate any of the\nresources which are on the classpath during image building into the\nimage it creates. To make calls such as Class.getResource(),\nClass.getResourceAsStream() (or the corresponding ClassLoader methods)\nreturn specific resources (instead of null), the resources that should\nbe accessible at image runtime need to be explicitly specified.</p>\n</blockquote>\n<p>That explain how to access the resource file via <code>getResource()</code>. I have an use case which I need to load the resources file in WebView for iOS, so basically I try this:</p>\n<pre><code>public void start(Stage stage) {\n\n    WebView webView = new WebView();\n\n    URL url = Thread.currentThread().getContextClassLoader().getResource(&quot;demo/index.html&quot;);\n    \n    System.out.println(&quot;url = &quot; + url);\n    System.out.println(&quot;url.toExternalForm = &quot; + url.toExternalForm());\n    System.out.println(&quot;url.getPath()= &quot; + url.getPath());\n    \n    webView.getEngine().load(&quot;file://&quot; + url.getPath());\n    \n    VBox root = new VBox(webView);\n    root.setAlignment(Pos.CENTER);\n    Scene scene = new Scene(root, 640, 480);\n    stage.setScene(scene);\n    stage.show();\n}\n</code></pre>\n<p>None of these <code>url.toString()</code>, <code>url.toExternalForm</code>, <code>url.getPath()</code> return valid loadable path in native images, their value are either <code>resource:demo/index.html</code> or <code>file://demo/index.html</code>.</p>\n<p>Does anyone know how the resource files are managed in the native image? Are they kind of merged in the single binary? By any chance, are we able to locate the resource files via file protocol?</p>\n"},{"tags":["java","amazon-web-services","spring-boot","amazon-ec2","amazon-elb"],"answers":[{"tags":[],"owner":{"account_id":9642226,"reputation":1060,"user_id":7156098,"display_name":"alegria"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693948919,"creation_date":1693948919,"answer_id":77047819,"question_id":77047782,"body_markdown":"That sounds exactly like one of the 2 servers is broken and the load balancer does round robin between them. Every seconds request succeeds as it hits the good node.\r\n\r\nStart with directly invoking the nodes skipping the loadbalancer. One of them must be closed or failed to initialize.","title":"AWS Load Balancer returning 502 on the first request, and succeeding on the second request","body":"<p>That sounds exactly like one of the 2 servers is broken and the load balancer does round robin between them. Every seconds request succeeds as it hits the good node.</p>\n<p>Start with directly invoking the nodes skipping the loadbalancer. One of them must be closed or failed to initialize.</p>\n"},{"tags":[],"owner":{"account_id":29371698,"reputation":21,"user_id":22504169,"display_name":"Uparkalau"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693949356,"creation_date":1693949356,"answer_id":77047847,"question_id":77047782,"body_markdown":"Try to check Security Group and NACL:\r\n\r\nTake a look if EC2 instance&#39;s security group allows incoming traffic on port 80 (HTTP) and 443 (HTTPS). You can try this in the AWS Management Console or AWS CLI commands.\r\n\r\nAWS CLI command:\r\n\r\nbash\r\n\r\n    aws ec2 authorize-security-group-ingress --group-id YOUR_SECURITY_GROUP_ID --protocol tcp --port 80 --cidr YOUR_IP_RANGE","title":"AWS Load Balancer returning 502 on the first request, and succeeding on the second request","body":"<p>Try to check Security Group and NACL:</p>\n<p>Take a look if EC2 instance's security group allows incoming traffic on port 80 (HTTP) and 443 (HTTPS). You can try this in the AWS Management Console or AWS CLI commands.</p>\n<p>AWS CLI command:</p>\n<p>bash</p>\n<pre><code>aws ec2 authorize-security-group-ingress --group-id YOUR_SECURITY_GROUP_ID --protocol tcp --port 80 --cidr YOUR_IP_RANGE\n</code></pre>\n"}],"owner":{"account_id":29374221,"reputation":11,"user_id":22506171,"display_name":"Ali Siddiqui"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77047819,"answer_count":2,"score":0,"last_activity_date":1693949356,"creation_date":1693948479,"question_id":77047782,"body_markdown":"I have a reactjs frontend stored on an s3 bucket (and is accessible through cloudfront) and I have a springboot backend running on an EC2 instance.\r\n\r\nThe ReactJs frontend uses an HTTPs protocol and has an SSL certificate attached to it. And in order to connect to the backend I send a HTTPS api which connects to an Application Load Balancer and connects to the target group on the 80 group so that the springboot application can get the request. \r\n\r\nHowever, whenever I send the first request I get a 502 &quot;Bad Gateway&quot; and then when I send a second request I get a 200 success response. And then this repeats (the third request gives 502 and the fourth request gives 200). I utilized Postman to test this.\r\n\r\nI have been stuck on this for quite a while so I would appreciate any kind of help.\r\n\r\nI have tried adding \r\n`server.tomcat.connection-timeout=300000\r\nserver.tomcat.keep-alive-timeout=300000`\r\nto the application.properties in the springboot app but that does not work.","title":"AWS Load Balancer returning 502 on the first request, and succeeding on the second request","body":"<p>I have a reactjs frontend stored on an s3 bucket (and is accessible through cloudfront) and I have a springboot backend running on an EC2 instance.</p>\n<p>The ReactJs frontend uses an HTTPs protocol and has an SSL certificate attached to it. And in order to connect to the backend I send a HTTPS api which connects to an Application Load Balancer and connects to the target group on the 80 group so that the springboot application can get the request.</p>\n<p>However, whenever I send the first request I get a 502 &quot;Bad Gateway&quot; and then when I send a second request I get a 200 success response. And then this repeats (the third request gives 502 and the fourth request gives 200). I utilized Postman to test this.</p>\n<p>I have been stuck on this for quite a while so I would appreciate any kind of help.</p>\n<p>I have tried adding\n<code>server.tomcat.connection-timeout=300000 server.tomcat.keep-alive-timeout=300000</code>\nto the application.properties in the springboot app but that does not work.</p>\n"},{"tags":["java","android","gradle"],"comments":[{"owner":{"account_id":4946647,"reputation":1191,"user_id":3981822,"display_name":"Shvet"},"score":1,"creation_date":1428749804,"post_id":29576871,"comment_id":47302482,"body_markdown":"Here is same problem...http://stackoverflow.com/questions/29576097/gradle-sync-error-in-android-studio-when-importing-project?noredirect=1#comment47301067_29576097","body":"Here is same problem...<a href=\"http://stackoverflow.com/questions/29576097/gradle-sync-error-in-android-studio-when-importing-project?noredirect=1#comment47301067_29576097\" title=\"gradle sync error in android studio when importing project\">stackoverflow.com/questions/29576097/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6124259,"reputation":74,"user_id":4776802,"display_name":"Rob Bricheno"},"down_vote_count":1,"up_vote_count":6,"is_accepted":true,"score":5,"last_activity_date":1428750396,"creation_date":1428749664,"answer_id":29577064,"question_id":29576871,"body_markdown":"There is a problem with the SSL certificate configuration on services.gradle.org right now\r\n\r\nhttp://discuss.gradle.org/t/urgent-ssl-apache-configuration-for-services-gradle-org-is-bad/8808\r\n\r\nThe devs are aware and working on a fix.\r\n\r\nThis answer to the same question provides a workaround which may be suitable:\r\n\r\nhttps://stackoverflow.com/a/29576568/4776802","title":"Can&#39;t build Android App with Gradle","body":"<p>There is a problem with the SSL certificate configuration on services.gradle.org right now</p>\n\n<p><a href=\"http://discuss.gradle.org/t/urgent-ssl-apache-configuration-for-services-gradle-org-is-bad/8808\" rel=\"nofollow noreferrer\">http://discuss.gradle.org/t/urgent-ssl-apache-configuration-for-services-gradle-org-is-bad/8808</a></p>\n\n<p>The devs are aware and working on a fix.</p>\n\n<p>This answer to the same question provides a workaround which may be suitable:</p>\n\n<p><a href=\"https://stackoverflow.com/a/29576568/4776802\">https://stackoverflow.com/a/29576568/4776802</a></p>\n"},{"tags":[],"owner":{"account_id":4507674,"reputation":1952,"user_id":3664628,"display_name":"Leonid Veremchuk"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1428768270,"creation_date":1428768270,"answer_id":29579962,"question_id":29576871,"body_markdown":"Just update gradle/wrapper/gradle-wrapper.properties \r\n\r\nupdate this:\r\n\r\n-from:\r\n\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-2.3-all.zip\r\n\r\n-to:\r\n\r\n    distributionUrl=http://services.gradle.org/distributions/gradle-2.3-all.zip","title":"Can&#39;t build Android App with Gradle","body":"<p>Just update gradle/wrapper/gradle-wrapper.properties </p>\n\n<p>update this:</p>\n\n<p>-from:</p>\n\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-2.3-all.zip\n</code></pre>\n\n<p>-to:</p>\n\n<pre><code>distributionUrl=http://services.gradle.org/distributions/gradle-2.3-all.zip\n</code></pre>\n"}],"owner":{"account_id":4734355,"reputation":815,"user_id":3829158,"accept_rate":73,"display_name":"rohit-biswas"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5825,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":29577064,"answer_count":2,"score":2,"last_activity_date":1693948589,"creation_date":1428748458,"question_id":29576871,"body_markdown":"I&#39;m trying to build my Android App using the Gradle command line interface. I&#39;v also add **GRADLE_HOME/bin** to the environment. Firstly, i used gradle init to generate the wrapper, gradlew in my project folder. Now, when i use this wrapper to build my app(**./gradlew build**) or use any of its functionality, it tries to download a gradle-2.3.zip file and fails at it(error message below). What I don&#39;t understand is why gradle try to download gradle again. Also, when I open the download url in my browser, it says that the page is insecure, which might be the cause of the error. What am I doing wrong? Is there a workaround? I have managed to download the zip file using my browser, but I don&#39;t know what to do with it. Here is the exception I got.\r\n\r\nDownloading https://services.gradle.org/distributions/gradle-2.3-bin.zip\r\n\r\nException in thread &quot;main&quot; javax.net.ssl.SSLHandshakeException: \r\n\r\n&gt; java.security.cert.CertificateException: No subject alternative DNS\r\n&gt; name matching services.gradle.org found. \tat\r\n&gt; sun.security.ssl.Alerts.getSSLException(Alerts.java:192) \tat\r\n&gt; sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1884) \tat\r\n&gt; sun.security.ssl.Handshaker.fatalSE(Handshaker.java:276) \tat\r\n&gt; sun.security.ssl.Handshaker.fatalSE(Handshaker.java:270) \tat\r\n&gt; sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1439)\r\n&gt; \tat\r\n&gt; sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:209)\r\n&gt; \tat sun.security.ssl.Handshaker.processLoop(Handshaker.java:878) \tat\r\n&gt; sun.security.ssl.Handshaker.process_record(Handshaker.java:814) \tat\r\n&gt; sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1016) \tat\r\n&gt; sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1312)\r\n&gt; \tat\r\n&gt; sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1339)\r\n&gt; \tat\r\n&gt; sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1323)\r\n&gt; \tat\r\n&gt; sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:563)\r\n&gt; \tat\r\n&gt; sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)","title":"Can&#39;t build Android App with Gradle","body":"<p>I'm trying to build my Android App using the Gradle command line interface. I'v also add <strong>GRADLE_HOME/bin</strong> to the environment. Firstly, i used gradle init to generate the wrapper, gradlew in my project folder. Now, when i use this wrapper to build my app(<strong>./gradlew build</strong>) or use any of its functionality, it tries to download a gradle-2.3.zip file and fails at it(error message below). What I don't understand is why gradle try to download gradle again. Also, when I open the download url in my browser, it says that the page is insecure, which might be the cause of the error. What am I doing wrong? Is there a workaround? I have managed to download the zip file using my browser, but I don't know what to do with it. Here is the exception I got.</p>\n\n<p>Downloading <a href=\"https://services.gradle.org/distributions/gradle-2.3-bin.zip\" rel=\"nofollow\">https://services.gradle.org/distributions/gradle-2.3-bin.zip</a></p>\n\n<p>Exception in thread \"main\" javax.net.ssl.SSLHandshakeException: </p>\n\n<blockquote>\n  <p>java.security.cert.CertificateException: No subject alternative DNS\n  name matching services.gradle.org found.  at\n  sun.security.ssl.Alerts.getSSLException(Alerts.java:192)  at\n  sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1884)     at\n  sun.security.ssl.Handshaker.fatalSE(Handshaker.java:276)  at\n  sun.security.ssl.Handshaker.fatalSE(Handshaker.java:270)  at\n  sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1439)\n    at\n  sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:209)\n    at sun.security.ssl.Handshaker.processLoop(Handshaker.java:878)     at\n  sun.security.ssl.Handshaker.process_record(Handshaker.java:814)   at\n  sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1016)    at\n  sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1312)\n    at\n  sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1339)\n    at\n  sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1323)\n    at\n  sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:563)\n    at\n  sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)</p>\n</blockquote>\n"},{"tags":["java","spring-boot","spring-webflux","exceptionhandler"],"answers":[{"tags":[],"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693948413,"creation_date":1693948413,"answer_id":77047776,"question_id":77047699,"body_markdown":"Sure, why not? `Mono.error` is capable of accepting a `Supplier` object. \r\n\r\nIt&#39;s unclear what your exception cases would be, but you can handle as many cases as you need:\r\n\r\n    Mono.just(userId) \r\n      .flatMap(repo::findById)\r\n      .switchIfEmpty(Mono.error(() -&gt; {\r\n         if(isBadRequest) {\r\n           return new UserBadRequestExeception();\r\n         } else if(notFound) { \r\n           return new UserNotFoundException();\r\n         } else { \r\n           return new GenericException();\r\n         }\r\n      }));\r\n","title":"Can we handle more than one exception with switchIfEmpty in Reactor?","body":"<p>Sure, why not? <code>Mono.error</code> is capable of accepting a <code>Supplier</code> object.</p>\n<p>It's unclear what your exception cases would be, but you can handle as many cases as you need:</p>\n<pre><code>Mono.just(userId) \n  .flatMap(repo::findById)\n  .switchIfEmpty(Mono.error(() -&gt; {\n     if(isBadRequest) {\n       return new UserBadRequestExeception();\n     } else if(notFound) { \n       return new UserNotFoundException();\n     } else { \n       return new GenericException();\n     }\n  }));\n</code></pre>\n"}],"owner":{"account_id":8611883,"reputation":43,"user_id":22504890,"display_name":"user22504890"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693948413,"creation_date":1693947364,"question_id":77047699,"body_markdown":"I am using Mono to retrieve some user with my controller. I have this code \r\n\r\n`Mono.just(userId)\r\n    .flatMap(repo::findById)\r\n    .switchIfEmpty(Mono.error(new UserBadRequestExeception()))`\r\n\r\nAnd I have a test for it which is working, but I would like to write a test for user not found and this is the code : \r\n\r\n `client.post()\r\n                .uri(&quot;/user/invalid&quot;)\r\n                .bodyValue(request)\r\n                .exchange()\r\n                .expectStatus()\r\n                .isNotFound()\r\n                .expectBody()\r\n                .jsonPath(&quot;code&quot;).isEqualTo(&quot;404&quot;)\r\n                .jsonPath(&quot;message&quot;).isEqualTo(&quot;Not Found&quot;)\r\n                .jsonPath(&quot;description&quot;).isEqualTo(&quot;404 NOT_FOUND&quot;)\r\n                .jsonPath(&quot;instance&quot;).exists();\r\n`\r\nBut it gives me \r\n\r\n    java.lang.AssertionError: No value at JSON path &quot;code&quot;. \r\n\r\n\r\nI tried with onErrorResume but without luck. Can we handle one then more exception in the Mono/Flux?","title":"Can we handle more than one exception with switchIfEmpty in Reactor?","body":"<p>I am using Mono to retrieve some user with my controller. I have this code</p>\n<p><code>Mono.just(userId) .flatMap(repo::findById) .switchIfEmpty(Mono.error(new UserBadRequestExeception()))</code></p>\n<p>And I have a test for it which is working, but I would like to write a test for user not found and this is the code :</p>\n<p><code>client.post() .uri(&quot;/user/invalid&quot;) .bodyValue(request) .exchange() .expectStatus() .isNotFound() .expectBody() .jsonPath(&quot;code&quot;).isEqualTo(&quot;404&quot;) .jsonPath(&quot;message&quot;).isEqualTo(&quot;Not Found&quot;) .jsonPath(&quot;description&quot;).isEqualTo(&quot;404 NOT_FOUND&quot;) .jsonPath(&quot;instance&quot;).exists(); </code>\nBut it gives me</p>\n<pre><code>java.lang.AssertionError: No value at JSON path &quot;code&quot;. \n</code></pre>\n<p>I tried with onErrorResume but without luck. Can we handle one then more exception in the Mono/Flux?</p>\n"},{"tags":["java","spring","spring-boot","testing","spring-cloud-stream"],"comments":[{"owner":{"account_id":445335,"reputation":5970,"user_id":837717,"display_name":"Oleg Zhurakousky"},"score":1,"creation_date":1693583811,"post_id":77023895,"comment_id":135784948,"body_markdown":"There could be a lot going on there, but the main issue I see is you are attempting to use Embedded Kafka and Test Binder. Not sure what do you expect from it, given that test binder binds to its internal channels exposed via Input/OutputDestinations and has no knowledge of Kafka","body":"There could be a lot going on there, but the main issue I see is you are attempting to use Embedded Kafka and Test Binder. Not sure what do you expect from it, given that test binder binds to its internal channels exposed via Input/OutputDestinations and has no knowledge of Kafka"},{"owner":{"account_id":1357887,"reputation":235,"user_id":1295910,"display_name":"Guillaume Jobin"},"score":0,"creation_date":1693595899,"post_id":77023895,"comment_id":135786846,"body_markdown":"@OlegZhurakousky I see what you mean, however the app would not start and fail if I don&#39;t provide it with a local or embedded Kafka. Am I missing something in the way to start and use the Test Binder correctly ?","body":"@OlegZhurakousky I see what you mean, however the app would not start and fail if I don&#39;t provide it with a local or embedded Kafka. Am I missing something in the way to start and use the Test Binder correctly ?"},{"owner":{"account_id":445335,"reputation":5970,"user_id":837717,"display_name":"Oleg Zhurakousky"},"score":1,"creation_date":1693915342,"post_id":77023895,"comment_id":135819643,"body_markdown":"The best thing you can do is create a sample and commit it to Github and provide a link so we can take a look","body":"The best thing you can do is create a sample and commit it to Github and provide a link so we can take a look"},{"owner":{"account_id":1357887,"reputation":235,"user_id":1295910,"display_name":"Guillaume Jobin"},"score":0,"creation_date":1693946401,"post_id":77023895,"comment_id":135826059,"body_markdown":"@OlegZhurakousky Here is the repo : https://github.com/gjobin/spring-cloud-stream-test. Thank you for your help.","body":"@OlegZhurakousky Here is the repo : <a href=\"https://github.com/gjobin/spring-cloud-stream-test\" rel=\"nofollow noreferrer\">github.com/gjobin/spring-cloud-stream-test</a>. Thank you for your help."},{"owner":{"account_id":445335,"reputation":5970,"user_id":837717,"display_name":"Oleg Zhurakousky"},"score":1,"creation_date":1694005148,"post_id":77023895,"comment_id":135834102,"body_markdown":"Your application contains a lot of dependencies that are not needed and rather complex configuration for a case where you are trying to learn something. It also makes it difficult for us to review. So, here are few pointers; If you are using embedded kafka you don&#39;t need docker image if it, you don&#39;t need test binder for it either - just look at some embedded kafka tests that we have in as we are using it ourselves. Since you have 3 functions the only configuration you need is `spring.cloud.function.definition=source;uppercase;sink`. So, slim it down and introduce complexity incrementally","body":"Your application contains a lot of dependencies that are not needed and rather complex configuration for a case where you are trying to learn something. It also makes it difficult for us to review. So, here are few pointers; If you are using embedded kafka you don&#39;t need docker image if it, you don&#39;t need test binder for it either - just look at some embedded kafka tests that we have in as we are using it ourselves. Since you have 3 functions the only configuration you need is <code>spring.cloud.function.definition=source;uppercase;sink</code>. So, slim it down and introduce complexity incrementally"},{"owner":{"account_id":445335,"reputation":5970,"user_id":837717,"display_name":"Oleg Zhurakousky"},"score":1,"creation_date":1694005259,"post_id":77023895,"comment_id":135834127,"body_markdown":"Also, if you do want to use test binder then look at some of these tests- https://github.com/spring-cloud/spring-cloud-stream/tree/main/core/spring-cloud-stream-integration-tests/src/test/java/org/springframework/cloud/stream/function","body":"Also, if you do want to use test binder then look at some of these tests- <a href=\"https://github.com/spring-cloud/spring-cloud-stream/tree/main/core/spring-cloud-stream-integration-tests/src/test/java/org/springframework/cloud/stream/function\" rel=\"nofollow noreferrer\">github.com/spring-cloud/spring-cloud-stream/tree/main/core/&hellip;</a>"},{"owner":{"account_id":1357887,"reputation":235,"user_id":1295910,"display_name":"Guillaume Jobin"},"score":0,"creation_date":1694174702,"post_id":77023895,"comment_id":135860265,"body_markdown":"@OlegZhurakousky Thank you for the great information and examples.\nI understand how to use the test binder and refactored my code to simplify the use case. However still running into issues with embedded kafka for IT tests (PersonStreamIT class). My consumer does not get any message and it seems the topic does not even get created on the broker, but the app still runs, although with completely different headers on the message. Thank you again for your help.","body":"@OlegZhurakousky Thank you for the great information and examples. I understand how to use the test binder and refactored my code to simplify the use case. However still running into issues with embedded kafka for IT tests (PersonStreamIT class). My consumer does not get any message and it seems the topic does not even get created on the broker, but the app still runs, although with completely different headers on the message. Thank you again for your help."},{"owner":{"account_id":445335,"reputation":5970,"user_id":837717,"display_name":"Oleg Zhurakousky"},"score":1,"creation_date":1694422491,"post_id":77023895,"comment_id":135884062,"body_markdown":"Please look at our Kafka tests to see how we are using embedded kafka. For example https://github.com/spring-cloud/spring-cloud-stream/blob/b5f9c5093b010f7c8a73856d54580d80854f8568/binders/kafka-binder/spring-cloud-stream-binder-kafka/src/test/java/org/springframework/cloud/stream/binder/kafka/bootstrap/KafkaBinderBootstrapTest.java#L36","body":"Please look at our Kafka tests to see how we are using embedded kafka. For example <a href=\"https://github.com/spring-cloud/spring-cloud-stream/blob/b5f9c5093b010f7c8a73856d54580d80854f8568/binders/kafka-binder/spring-cloud-stream-binder-kafka/src/test/java/org/springframework/cloud/stream/binder/kafka/bootstrap/KafkaBinderBootstrapTest.java#L36\" rel=\"nofollow noreferrer\">github.com/spring-cloud/spring-cloud-stream/blob/&hellip;</a>"},{"owner":{"account_id":1357887,"reputation":235,"user_id":1295910,"display_name":"Guillaume Jobin"},"score":0,"creation_date":1694460730,"post_id":77023895,"comment_id":135891328,"body_markdown":"Somehow trying to replicate what&#39;s in that class, the `embeddedKafka` is null.\nI&#39;m sure I&#39;m missing something stupid but can&#39;t figure out what I&#39;m doing wrong.\nWould you mind taking a look at my last GH commit, the class PersonStreamIT, and specifically the `e2e` test, along with the comment at the bottom of the class. Thanks again and sorry to be persistent &#128517;","body":"Somehow trying to replicate what&#39;s in that class, the <code>embeddedKafka</code> is null. I&#39;m sure I&#39;m missing something stupid but can&#39;t figure out what I&#39;m doing wrong. Would you mind taking a look at my last GH commit, the class PersonStreamIT, and specifically the <code>e2e</code> test, along with the comment at the bottom of the class. Thanks again and sorry to be persistent 😅"}],"owner":{"account_id":1357887,"reputation":235,"user_id":1295910,"display_name":"Guillaume Jobin"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693948159,"creation_date":1693578183,"question_id":77023895,"body_markdown":"New to Spring Cloud Stream, using the latest 3.1.3, I am attempting to successfully write one of each type (Supplier, Function, Consumer) and matching tests, just so that I get a good grasp of the technology before I start implementing real application code.\r\n\r\nHere is the git repo for the example : https://github.com/gjobin/spring-cloud-stream-test\r\n\r\nThat being said, the test for my producer yields a weird loader exception, but only when my `functionTest()` is also included in the suite. If I execute the producer test alone, it passes as expected.\r\n\r\n```\r\njava.lang.ClassCastException: class com.example.model.Person cannot be cast to class [B (com.example.model.Person is in unnamed module of loader &#39;app&#39;; [B is in module java.base of loader &#39;bootstrap&#39;)\r\n\r\n\tat com.example.stream.PersonStreamTest.deserializePayload(PersonStreamTest.java:89)\r\n\tat com.example.stream.PersonStreamTest.receiveMessage(PersonStreamTest.java:84)\r\n\tat com.example.stream.PersonStreamTest.producerTest(PersonStreamTest.java:48)\r\n```\r\n\r\nHere is my test code :\r\n```\r\nimport ...\r\n\r\n@SpringBootTest(classes = Application.class)\r\n@Import({TestChannelBinderConfiguration.class})\r\n@ExtendWith(TestLoggerFactoryExtension.class)\r\n@EmbeddedKafka\r\nclass PersonStreamTest {\r\n\r\n    private final ObjectMapper objectMapper = new ObjectMapper();\r\n\r\n    @Autowired\r\n    private InputDestination input;\r\n\r\n    @Autowired\r\n    private OutputDestination output;\r\n\r\n\r\n    @Test\r\n    void producerTest() {\r\n        Message&lt;Person&gt; message = receiveMessage(Person.class, &quot;thasource.destination&quot;);\r\n        assertThat(message.getPayload()).isEqualTo(Person.builder().firstname(&quot;fn&quot;).lastname(&quot;ln&quot;).build());\r\n        String key = (String) message.getHeaders().get(&quot;kafka_messageKey&quot;);\r\n        assert key != null;\r\n        assertThat(UUID.fromString(key).toString()).isEqualTo(key);\r\n    }\r\n\r\n    @Test\r\n    void functionTest() {\r\n        MessageHeaders messageHeaders = new MessageHeaders(Map.of(&quot;kafka_messageKey&quot;, &quot;theKey&quot;));\r\n        Message&lt;Person&gt; sendMessage = new GenericMessage&lt;&gt;(Person.builder().firstname(&quot;firstname&quot;).lastname(&quot;lastname&quot;).build(), messageHeaders);\r\n        output.clear();\r\n        input.send(sendMessage, &quot;thasource.destination&quot;);\r\n\r\n        Message&lt;Person&gt; message = receiveMessage(Person.class, &quot;uppercased.destination&quot;);\r\n        assertThat(message.getPayload()).isEqualTo(Person.builder().firstname(&quot;firstname&quot;).lastname(&quot;LASTNAME&quot;).build());\r\n        String key = (String) message.getHeaders().get(&quot;kafka_messageKey&quot;);\r\n        assert key != null;\r\n        assertThat(key).isEqualTo(&quot;theKey&quot;);\r\n    }\r\n\r\n    @Test\r\n    void consumerTest() {\r\n        MessageHeaders messageHeaders = new MessageHeaders(Map.of(&quot;kafka_messageKey&quot;, &quot;theKey&quot;));\r\n        Person entity = Person.builder().firstname(&quot;firstname&quot;).lastname(&quot;LASTNAME&quot;).build();\r\n        Message&lt;Person&gt; sendMessage = new GenericMessage&lt;&gt;(entity, messageHeaders);\r\n        output.clear();\r\n\r\n        TestLogger logger = TestLoggerFactory.getTestLogger(PersonStream.class);\r\n        input.send(sendMessage, &quot;uppercased.destination&quot;);\r\n        assertThatIterable(logger.getLoggingEvents()).isEqualTo(List.of(info(entity.toString())));\r\n    }\r\n\r\n    private &lt;T&gt; Message&lt;T&gt; receiveMessage(Class&lt;T&gt; clazz, String bindingName) {\r\n        Message&lt;byte[]&gt; receivedMessage = output.receive(1000, bindingName);\r\n        assertThat(receivedMessage).isNotNull();\r\n        return new GenericMessage&lt;&gt;(deserializePayload(clazz, receivedMessage), receivedMessage.getHeaders());\r\n    }\r\n\r\n    private &lt;T&gt; T deserializePayload(Class&lt;T&gt; clazz, Message&lt;byte[]&gt; m) {\r\n        try {\r\n            return objectMapper.readValue(m.getPayload(), clazz);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\nMy application.yml configuration\r\n```\r\nspring:\r\n  config:\r\n    activate:\r\n      on-profile: default\r\n\r\n  cloud:\r\n    function:\r\n      definition: source;uppercase;sink\r\n\r\n    stream:\r\n      bindings:\r\n        source-out-0:\r\n          destination: thasource\r\n        uppercase-in-0:\r\n          destination: thasource\r\n          group: ingestor\r\n        uppercase-out-0:\r\n          destination: uppercased\r\n        sink-in-0:\r\n          destination: uppercased\r\n          group: ingestor\r\n      kafka:\r\n        binder:\r\n          brokers: localhost:9092\r\n          producer-properties:\r\n            compression.type: zstd\r\n            key.serializer: org.apache.kafka.common.serialization.StringSerializer\r\n            max.request.size: 15728640\r\n          consumer-properties:\r\n            key.deserializer: org.apache.kafka.common.serialization.StringDeserializer\r\n        bindings:\r\n          uppercase-out-0:\r\n            producer:\r\n              messageKeyExpression: headers[&#39;kafka_receivedMessageKey&#39;]\r\n```\r\n\r\nMy stream fuctions are defined as\r\n```\r\nimport ...\r\n\r\n@Service\r\n@Slf4j\r\npublic class PersonStream {\r\n\r\n    @Bean\r\n    public Supplier&lt;Message&lt;Person&gt;&gt; source() {\r\n        return () -&gt; MessageBuilder.withPayload(Person.builder()\r\n                        .firstname(&quot;fn&quot;)\r\n                        .lastname(&quot;ln&quot;)\r\n                        .build())\r\n                .setHeader(KafkaHeaders.KEY, UUID.randomUUID().toString())\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    public Function&lt;Person, Person&gt; uppercase() {\r\n        return p -&gt; {\r\n            p.setLastname(p.getLastname().toUpperCase());\r\n            return p;\r\n        };\r\n    }\r\n\r\n    @Bean\r\n    public Consumer&lt;Person&gt; sink() {\r\n        return p -&gt; log.info(p.toString());\r\n    }\r\n}\r\n```\r\n\r\nHelp would be greatly appreciated.\r\nCheers!","title":"ClassCastException testing Spring Cloud Stream producer only when another test is also executed","body":"<p>New to Spring Cloud Stream, using the latest 3.1.3, I am attempting to successfully write one of each type (Supplier, Function, Consumer) and matching tests, just so that I get a good grasp of the technology before I start implementing real application code.</p>\n<p>Here is the git repo for the example : <a href=\"https://github.com/gjobin/spring-cloud-stream-test\" rel=\"nofollow noreferrer\">https://github.com/gjobin/spring-cloud-stream-test</a></p>\n<p>That being said, the test for my producer yields a weird loader exception, but only when my <code>functionTest()</code> is also included in the suite. If I execute the producer test alone, it passes as expected.</p>\n<pre><code>java.lang.ClassCastException: class com.example.model.Person cannot be cast to class [B (com.example.model.Person is in unnamed module of loader 'app'; [B is in module java.base of loader 'bootstrap')\n\n    at com.example.stream.PersonStreamTest.deserializePayload(PersonStreamTest.java:89)\n    at com.example.stream.PersonStreamTest.receiveMessage(PersonStreamTest.java:84)\n    at com.example.stream.PersonStreamTest.producerTest(PersonStreamTest.java:48)\n</code></pre>\n<p>Here is my test code :</p>\n<pre><code>import ...\n\n@SpringBootTest(classes = Application.class)\n@Import({TestChannelBinderConfiguration.class})\n@ExtendWith(TestLoggerFactoryExtension.class)\n@EmbeddedKafka\nclass PersonStreamTest {\n\n    private final ObjectMapper objectMapper = new ObjectMapper();\n\n    @Autowired\n    private InputDestination input;\n\n    @Autowired\n    private OutputDestination output;\n\n\n    @Test\n    void producerTest() {\n        Message&lt;Person&gt; message = receiveMessage(Person.class, &quot;thasource.destination&quot;);\n        assertThat(message.getPayload()).isEqualTo(Person.builder().firstname(&quot;fn&quot;).lastname(&quot;ln&quot;).build());\n        String key = (String) message.getHeaders().get(&quot;kafka_messageKey&quot;);\n        assert key != null;\n        assertThat(UUID.fromString(key).toString()).isEqualTo(key);\n    }\n\n    @Test\n    void functionTest() {\n        MessageHeaders messageHeaders = new MessageHeaders(Map.of(&quot;kafka_messageKey&quot;, &quot;theKey&quot;));\n        Message&lt;Person&gt; sendMessage = new GenericMessage&lt;&gt;(Person.builder().firstname(&quot;firstname&quot;).lastname(&quot;lastname&quot;).build(), messageHeaders);\n        output.clear();\n        input.send(sendMessage, &quot;thasource.destination&quot;);\n\n        Message&lt;Person&gt; message = receiveMessage(Person.class, &quot;uppercased.destination&quot;);\n        assertThat(message.getPayload()).isEqualTo(Person.builder().firstname(&quot;firstname&quot;).lastname(&quot;LASTNAME&quot;).build());\n        String key = (String) message.getHeaders().get(&quot;kafka_messageKey&quot;);\n        assert key != null;\n        assertThat(key).isEqualTo(&quot;theKey&quot;);\n    }\n\n    @Test\n    void consumerTest() {\n        MessageHeaders messageHeaders = new MessageHeaders(Map.of(&quot;kafka_messageKey&quot;, &quot;theKey&quot;));\n        Person entity = Person.builder().firstname(&quot;firstname&quot;).lastname(&quot;LASTNAME&quot;).build();\n        Message&lt;Person&gt; sendMessage = new GenericMessage&lt;&gt;(entity, messageHeaders);\n        output.clear();\n\n        TestLogger logger = TestLoggerFactory.getTestLogger(PersonStream.class);\n        input.send(sendMessage, &quot;uppercased.destination&quot;);\n        assertThatIterable(logger.getLoggingEvents()).isEqualTo(List.of(info(entity.toString())));\n    }\n\n    private &lt;T&gt; Message&lt;T&gt; receiveMessage(Class&lt;T&gt; clazz, String bindingName) {\n        Message&lt;byte[]&gt; receivedMessage = output.receive(1000, bindingName);\n        assertThat(receivedMessage).isNotNull();\n        return new GenericMessage&lt;&gt;(deserializePayload(clazz, receivedMessage), receivedMessage.getHeaders());\n    }\n\n    private &lt;T&gt; T deserializePayload(Class&lt;T&gt; clazz, Message&lt;byte[]&gt; m) {\n        try {\n            return objectMapper.readValue(m.getPayload(), clazz);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<p>My application.yml configuration</p>\n<pre><code>spring:\n  config:\n    activate:\n      on-profile: default\n\n  cloud:\n    function:\n      definition: source;uppercase;sink\n\n    stream:\n      bindings:\n        source-out-0:\n          destination: thasource\n        uppercase-in-0:\n          destination: thasource\n          group: ingestor\n        uppercase-out-0:\n          destination: uppercased\n        sink-in-0:\n          destination: uppercased\n          group: ingestor\n      kafka:\n        binder:\n          brokers: localhost:9092\n          producer-properties:\n            compression.type: zstd\n            key.serializer: org.apache.kafka.common.serialization.StringSerializer\n            max.request.size: 15728640\n          consumer-properties:\n            key.deserializer: org.apache.kafka.common.serialization.StringDeserializer\n        bindings:\n          uppercase-out-0:\n            producer:\n              messageKeyExpression: headers['kafka_receivedMessageKey']\n</code></pre>\n<p>My stream fuctions are defined as</p>\n<pre><code>import ...\n\n@Service\n@Slf4j\npublic class PersonStream {\n\n    @Bean\n    public Supplier&lt;Message&lt;Person&gt;&gt; source() {\n        return () -&gt; MessageBuilder.withPayload(Person.builder()\n                        .firstname(&quot;fn&quot;)\n                        .lastname(&quot;ln&quot;)\n                        .build())\n                .setHeader(KafkaHeaders.KEY, UUID.randomUUID().toString())\n                .build();\n    }\n\n    @Bean\n    public Function&lt;Person, Person&gt; uppercase() {\n        return p -&gt; {\n            p.setLastname(p.getLastname().toUpperCase());\n            return p;\n        };\n    }\n\n    @Bean\n    public Consumer&lt;Person&gt; sink() {\n        return p -&gt; log.info(p.toString());\n    }\n}\n</code></pre>\n<p>Help would be greatly appreciated.\nCheers!</p>\n"},{"tags":["java","quartz-scheduler","scheduler","scheduling"],"owner":{"account_id":10198641,"reputation":91,"user_id":7558680,"display_name":"vkp"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693946452,"creation_date":1693944607,"question_id":77047478,"body_markdown":"Hi use Quartz to trigger some trivial cronTrigger based timer jobs which dont do much.\r\nI wish to support putting these jobs ON_ICE and ON_HOLD just like autosys.\r\n\r\nfor context:\r\n\r\n1. ON_ICE -&gt; if a job is put on_ice and taken off_ice and the condition had passed in the past it is ignored and the job is triggered only for its next trigger.\r\n\r\n2. ON_HOLD -&gt; if a job is put on_hold and taken off_hold and the condition had passed in the past it is fired immediately and the job continues its normal execution as per next schedules.\r\n\r\nThe way this can be achieved is using the pauseJob() and resumeJob() functions for a job \r\n\r\nI use the misFireInstruction -&gt; **fireAndProceed** by default since I want other normal jobs to follow that policy.\r\n\r\nbut in case a job is put ON_ICE and taken off_ice its misFire instruction should behave like **doNothing**\r\n\r\nI could not update the misFireInstruction of the cronTrigger during runTime directly I had to unschedule the job and reschedule it with new misFireInstruction everytime a job was put ON_ICE.\r\n\r\nIs there a better way to do it?\r\n\r\nbelow is the code:\r\n\r\nQuartzTimer.java\r\n\r\n        package org.example;\r\n        \r\n        import org.quartz.*;\r\n        import org.quartz.impl.StdSchedulerFactory;\r\n        import org.quartz.impl.triggers.CronTriggerImpl;\r\n        \r\n        import java.util.List;\r\n        \r\n        public class QuartzTimer {\r\n            private Scheduler scheduler;\r\n        \r\n            public QuartzTimer() throws SchedulerException {\r\n                this.scheduler = new StdSchedulerFactory().getScheduler();\r\n            }\r\n        \r\n            public void submitJob(String jobName, String cronSchedule) throws SchedulerException {\r\n                CronTrigger cronTrigger = TriggerBuilder.newTrigger().withIdentity(jobName+&quot;Trigger&quot;)\r\n                        .withSchedule(CronScheduleBuilder.cronSchedule(cronSchedule)\r\n                        //everyJobNeedsToFireOnceAndProceedInCaseOfMisfires        .withMisfireHandlingInstructionFireAndProceed())\r\n                        .forJob(jobName)\r\n                        .build();\r\n        \r\n                JobDetail jobDetail = JobBuilder.newJob(TimerJob.class).withIdentity(jobName).build();\r\n                scheduler.scheduleJob(jobDetail, cronTrigger);\r\n            }\r\n        \r\n            public void suspendJob(String jobName, boolean isOnIce) throws SchedulerException {\r\n                scheduler.pauseJob(JobKey.jobKey(jobName));\r\n                if(isOnIce) {\r\n    /*if Job is supposed to be put ON_ICE then its misFires should be ignored*/\r\n                    updateMisfireInstructionForJob(jobName, CronTrigger.MISFIRE_INSTRUCTION_DO_NOTHING);\r\n                }\r\n            }\r\n        \r\n            public void resumeJob(String jobName) throws SchedulerException {\r\n                scheduler.resumeJob(JobKey.jobKey(jobName));\r\n    /*incase job is taken off_ice or off_hold make sure to revert misfireinstruction*/\r\n                updateMisfireInstructionForJob(jobName, updateMisfireInstructionForJob(jobName, CronTrigger.MISFIRE_INSTRUCTION_FIRE_ONCE_NOW);\r\n            }\r\n        \r\n            public void updateMisfireInstructionForJob(String jobName, int misFireCode) throws SchedulerException {\r\n                final JobKey jobKey = JobKey.jobKey(jobName);\r\n                List&lt;? extends Trigger&gt; triggers = scheduler.getTriggersOfJob(jobKey);\r\n                triggers.forEach(trigger -&gt; {\r\n                    if(trigger instanceof CronTriggerImpl) {\r\n                        CronTriggerImpl cronTrigger = (CronTriggerImpl) trigger;\r\n                        if(cronTrigger.getMisfireInstruction() == misFireCode) {\r\n                            return;\r\n                        }\r\n                        cronTrigger.setMisfireInstruction(misFireCode);\r\n                        try {\r\n                            JobDetail jobDetail = scheduler.getJobDetail(jobKey);\r\n                            scheduler.unscheduleJob(cronTrigger.getKey());\r\n                            scheduler.scheduleJob(jobDetail, cronTrigger);\r\n                        } catch (SchedulerException e) {\r\n                            throw new RuntimeException(e);\r\n                        }\r\n        \r\n        \r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\nTimerJob.java\r\n\r\n    package org.example;\r\n    \r\n    import org.quartz.Job;\r\n    import org.quartz.JobExecutionContext;\r\n    import org.quartz.JobExecutionException;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    \r\n    public class TimerJob implements Job {\r\n    \r\n        private static final Logger LOGGER = LoggerFactory.getLogger(TimerJob.class);\r\n    \r\n        @Override\r\n        public void execute(JobExecutionContext context) throws JobExecutionException {\r\n            LOGGER.info(&quot;Executing job: {}&quot;, context.getJobDetail().getKey());\r\n            LOGGER.info(&quot;ScheduledTime: {} fireTime: {}&quot;, context.getScheduledFireTime(), context.getFireTime());\r\n            LOGGER.info(&quot;prevFireTime: {} nextFireTime: {}&quot;, context.getPreviousFireTime(), context.getNextFireTime());\r\n        }\r\n    }\r\n\r\nI know that instead of unscheduling and rescheduling with change misFireinstruction trigger causes loss of trigger history in it with the firetimes etc.\r\n\r\nsomehow if I knew that a particular job execution is a misFire I could just ignore it in case the job was on_ice and was taken off_ice.\r\n\r\nalso is there a way to update the JobDataMap of a jobDetail once a job is scheduled?\r\n\r\n","title":"Support for putting Quartz Jobs ON_ICE and ON_HOLD like autosys","body":"<p>Hi use Quartz to trigger some trivial cronTrigger based timer jobs which dont do much.\nI wish to support putting these jobs ON_ICE and ON_HOLD just like autosys.</p>\n<p>for context:</p>\n<ol>\n<li><p>ON_ICE -&gt; if a job is put on_ice and taken off_ice and the condition had passed in the past it is ignored and the job is triggered only for its next trigger.</p>\n</li>\n<li><p>ON_HOLD -&gt; if a job is put on_hold and taken off_hold and the condition had passed in the past it is fired immediately and the job continues its normal execution as per next schedules.</p>\n</li>\n</ol>\n<p>The way this can be achieved is using the pauseJob() and resumeJob() functions for a job</p>\n<p>I use the misFireInstruction -&gt; <strong>fireAndProceed</strong> by default since I want other normal jobs to follow that policy.</p>\n<p>but in case a job is put ON_ICE and taken off_ice its misFire instruction should behave like <strong>doNothing</strong></p>\n<p>I could not update the misFireInstruction of the cronTrigger during runTime directly I had to unschedule the job and reschedule it with new misFireInstruction everytime a job was put ON_ICE.</p>\n<p>Is there a better way to do it?</p>\n<p>below is the code:</p>\n<p>QuartzTimer.java</p>\n<pre><code>    package org.example;\n    \n    import org.quartz.*;\n    import org.quartz.impl.StdSchedulerFactory;\n    import org.quartz.impl.triggers.CronTriggerImpl;\n    \n    import java.util.List;\n    \n    public class QuartzTimer {\n        private Scheduler scheduler;\n    \n        public QuartzTimer() throws SchedulerException {\n            this.scheduler = new StdSchedulerFactory().getScheduler();\n        }\n    \n        public void submitJob(String jobName, String cronSchedule) throws SchedulerException {\n            CronTrigger cronTrigger = TriggerBuilder.newTrigger().withIdentity(jobName+&quot;Trigger&quot;)\n                    .withSchedule(CronScheduleBuilder.cronSchedule(cronSchedule)\n                    //everyJobNeedsToFireOnceAndProceedInCaseOfMisfires        .withMisfireHandlingInstructionFireAndProceed())\n                    .forJob(jobName)\n                    .build();\n    \n            JobDetail jobDetail = JobBuilder.newJob(TimerJob.class).withIdentity(jobName).build();\n            scheduler.scheduleJob(jobDetail, cronTrigger);\n        }\n    \n        public void suspendJob(String jobName, boolean isOnIce) throws SchedulerException {\n            scheduler.pauseJob(JobKey.jobKey(jobName));\n            if(isOnIce) {\n/*if Job is supposed to be put ON_ICE then its misFires should be ignored*/\n                updateMisfireInstructionForJob(jobName, CronTrigger.MISFIRE_INSTRUCTION_DO_NOTHING);\n            }\n        }\n    \n        public void resumeJob(String jobName) throws SchedulerException {\n            scheduler.resumeJob(JobKey.jobKey(jobName));\n/*incase job is taken off_ice or off_hold make sure to revert misfireinstruction*/\n            updateMisfireInstructionForJob(jobName, updateMisfireInstructionForJob(jobName, CronTrigger.MISFIRE_INSTRUCTION_FIRE_ONCE_NOW);\n        }\n    \n        public void updateMisfireInstructionForJob(String jobName, int misFireCode) throws SchedulerException {\n            final JobKey jobKey = JobKey.jobKey(jobName);\n            List&lt;? extends Trigger&gt; triggers = scheduler.getTriggersOfJob(jobKey);\n            triggers.forEach(trigger -&gt; {\n                if(trigger instanceof CronTriggerImpl) {\n                    CronTriggerImpl cronTrigger = (CronTriggerImpl) trigger;\n                    if(cronTrigger.getMisfireInstruction() == misFireCode) {\n                        return;\n                    }\n                    cronTrigger.setMisfireInstruction(misFireCode);\n                    try {\n                        JobDetail jobDetail = scheduler.getJobDetail(jobKey);\n                        scheduler.unscheduleJob(cronTrigger.getKey());\n                        scheduler.scheduleJob(jobDetail, cronTrigger);\n                    } catch (SchedulerException e) {\n                        throw new RuntimeException(e);\n                    }\n    \n    \n                }\n            });\n        }\n    }\n</code></pre>\n<p>TimerJob.java</p>\n<pre><code>package org.example;\n\nimport org.quartz.Job;\nimport org.quartz.JobExecutionContext;\nimport org.quartz.JobExecutionException;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\npublic class TimerJob implements Job {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(TimerJob.class);\n\n    @Override\n    public void execute(JobExecutionContext context) throws JobExecutionException {\n        LOGGER.info(&quot;Executing job: {}&quot;, context.getJobDetail().getKey());\n        LOGGER.info(&quot;ScheduledTime: {} fireTime: {}&quot;, context.getScheduledFireTime(), context.getFireTime());\n        LOGGER.info(&quot;prevFireTime: {} nextFireTime: {}&quot;, context.getPreviousFireTime(), context.getNextFireTime());\n    }\n}\n</code></pre>\n<p>I know that instead of unscheduling and rescheduling with change misFireinstruction trigger causes loss of trigger history in it with the firetimes etc.</p>\n<p>somehow if I knew that a particular job execution is a misFire I could just ignore it in case the job was on_ice and was taken off_ice.</p>\n<p>also is there a way to update the JobDataMap of a jobDetail once a job is scheduled?</p>\n"},{"tags":["java","sdk","jira"],"answers":[{"tags":[],"owner":{"account_id":98025,"reputation":436,"user_id":265582,"accept_rate":80,"display_name":"DaveG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693946415,"creation_date":1693946415,"answer_id":77047620,"question_id":75669635,"body_markdown":"The reason that you can&#39;t find your test case is because test cases aren&#39;t a core part of Jira.\r\n\r\nFrom looking at the test case id in your sample code (`XX-T1234`) it looks to me like you might be using something like Zephyr Scale (formerly known as TM4J, formerly known as Adaptavist Test Management / ATM).\r\n\r\nThis is a Jira plugin and so won&#39;t be supported by the Jira REST Client library.\r\n\r\nMy recommendation, if you&#39;re wanting to interact with Zephyr Scale is to check out their Javadocs: https://support.smartbear.com/zephyr-scale-server/javadocs/9.15.1/","title":"I want to use jira-rest-java-client sdk to access test cases of my Jira, but I&#39;m not sure how to","body":"<p>The reason that you can't find your test case is because test cases aren't a core part of Jira.</p>\n<p>From looking at the test case id in your sample code (<code>XX-T1234</code>) it looks to me like you might be using something like Zephyr Scale (formerly known as TM4J, formerly known as Adaptavist Test Management / ATM).</p>\n<p>This is a Jira plugin and so won't be supported by the Jira REST Client library.</p>\n<p>My recommendation, if you're wanting to interact with Zephyr Scale is to check out their Javadocs: <a href=\"https://support.smartbear.com/zephyr-scale-server/javadocs/9.15.1/\" rel=\"nofollow noreferrer\">https://support.smartbear.com/zephyr-scale-server/javadocs/9.15.1/</a></p>\n"}],"owner":{"account_id":5559366,"reputation":1,"user_id":4409378,"display_name":"Tyler Durden"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693946415,"creation_date":1678252458,"question_id":75669635,"body_markdown":"My pom.xml:\r\n```xml\r\n&lt;dependency&gt;\r\n            &lt;groupId&gt;com.atlassian.jira&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jira-rest-java-client-api&lt;/artifactId&gt;\r\n            &lt;version&gt;5.2.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.atlassian.jira&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jira-rest-java-client-core&lt;/artifactId&gt;\r\n            &lt;version&gt;5.2.4&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n\r\n        &lt;/dependency&gt;\r\n```\r\nI want to access one of my test case XX-T1234, here are my code.I got 404 error, I&#39;m not sure my sdk and code are right.\r\n\r\n```java\r\nimport com.atlassian.jira.rest.client.api.JiraRestClient;\r\nimport com.atlassian.jira.rest.client.api.ProjectRestClient;\r\nimport com.atlassian.jira.rest.client.api.JiraRestClientFactory;\r\nimport com.atlassian.jira.rest.client.api.domain.Issue;\r\nimport java.net.URI;\r\n\r\n\r\nString jiraUrl = &quot;https://mockrun-jira.xxxxxx.com&quot;;\r\n        String username = &quot;xxx&quot;;\r\n        String token = &quot;&lt;MASK&gt;&quot;;\r\n        String issueKey = &quot;XX-T1234&quot;; // The key of the issue you want to retrieve\r\n\r\n          Issue issue = client.getIssueClient().getIssue(issueKey).claim();\r\nSystem.out.println(&quot;Issue summary: &quot; + issue.getSummary());\r\n\r\n```\r\n     \r\n\r\n- Changed the code\r\n- Search document of Jira","title":"I want to use jira-rest-java-client sdk to access test cases of my Jira, but I&#39;m not sure how to","body":"<p>My pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n            &lt;groupId&gt;com.atlassian.jira&lt;/groupId&gt;\n            &lt;artifactId&gt;jira-rest-java-client-api&lt;/artifactId&gt;\n            &lt;version&gt;5.2.4&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.atlassian.jira&lt;/groupId&gt;\n            &lt;artifactId&gt;jira-rest-java-client-core&lt;/artifactId&gt;\n            &lt;version&gt;5.2.4&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n\n        &lt;/dependency&gt;\n</code></pre>\n<p>I want to access one of my test case XX-T1234, here are my code.I got 404 error, I'm not sure my sdk and code are right.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.atlassian.jira.rest.client.api.JiraRestClient;\nimport com.atlassian.jira.rest.client.api.ProjectRestClient;\nimport com.atlassian.jira.rest.client.api.JiraRestClientFactory;\nimport com.atlassian.jira.rest.client.api.domain.Issue;\nimport java.net.URI;\n\n\nString jiraUrl = &quot;https://mockrun-jira.xxxxxx.com&quot;;\n        String username = &quot;xxx&quot;;\n        String token = &quot;&lt;MASK&gt;&quot;;\n        String issueKey = &quot;XX-T1234&quot;; // The key of the issue you want to retrieve\n\n          Issue issue = client.getIssueClient().getIssue(issueKey).claim();\nSystem.out.println(&quot;Issue summary: &quot; + issue.getSummary());\n\n</code></pre>\n<ul>\n<li>Changed the code</li>\n<li>Search document of Jira</li>\n</ul>\n"},{"tags":["java","windows","process"],"comments":[{"owner":{"account_id":1245681,"reputation":65784,"user_id":1207195,"accept_rate":100,"display_name":"Adriano Repetti"},"score":0,"creation_date":1454326882,"post_id":35129457,"comment_id":57978967,"body_markdown":"You can use Java Native to import Process32Next() to enumerate processes. For example: http://stackoverflow.com/q/9877993/1207195","body":"You can use Java Native to import Process32Next() to enumerate processes. For example: <a href=\"http://stackoverflow.com/q/9877993/1207195\">stackoverflow.com/q/9877993/1207195</a>"},{"owner":{"account_id":2127644,"reputation":48132,"user_id":1889329,"accept_rate":71,"display_name":"IInspectable"},"score":1,"creation_date":1454332953,"post_id":35129457,"comment_id":57982853,"body_markdown":"Sounds like you are designing a complete bogus system here. What problem are you really trying to solve?","body":"Sounds like you are designing a complete bogus system here. What problem are you really trying to solve?"}],"answers":[{"tags":[],"owner":{"account_id":1677570,"reputation":18354,"user_id":1542723,"display_name":"Ferrybig"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1454326846,"creation_date":1454326846,"answer_id":35129633,"question_id":35129457,"body_markdown":"The best way would be launching the process from the java instance. The advantages of this approach are that you can be fully sure that the process that is running, is the process you started. With tasklist, it is possible for normal users to start a process with the name as the target, or reuse the pid if the program closes.\r\n\r\nFor information how to start a process, see [this](https://stackoverflow.com/q/3774432/1542723) question.\r\n\r\n &gt;     Process myProcess = Runtime.getRuntime().exec(command);\r\n\r\nYou can then use the methods of Process to monitor the state of the program, for example `myProcess.exitValue()` blocks until the program is closed.\r\n","title":"How to check if a process is running on Windows?","body":"<p>The best way would be launching the process from the java instance. The advantages of this approach are that you can be fully sure that the process that is running, is the process you started. With tasklist, it is possible for normal users to start a process with the name as the target, or reuse the pid if the program closes.</p>\n\n<p>For information how to start a process, see <a href=\"https://stackoverflow.com/q/3774432/1542723\">this</a> question.</p>\n\n<blockquote>\n<pre><code>Process myProcess = Runtime.getRuntime().exec(command);\n</code></pre>\n</blockquote>\n\n<p>You can then use the methods of Process to monitor the state of the program, for example <code>myProcess.exitValue()</code> blocks until the program is closed.</p>\n"},{"tags":[],"owner":{"account_id":5278063,"reputation":2127,"user_id":4214287,"display_name":"Leet-Falcon"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1454342092,"creation_date":1454342092,"answer_id":35134751,"question_id":35129457,"body_markdown":"There is no direct way to query general processes as each OS handles them differently.  \r\nYou kinda stuck with using proxies such as direct OS commands...\r\n\r\nYou **can** however, find a specific process using tasklist.exe with **/fi** parameter.  \r\ne.g: `tasklist.exe /nh /fi &quot;Imagename eq chrome.exe&quot;`  \r\nNote the mandatory double quotes.  \r\nSyntax &amp; usage are available on [MS Technet site][1].\r\n\r\nSame example, filtering for &quot;chrome.exe&quot; in Java:  \r\n\r\n    String findProcess = &quot;chrome.exe&quot;;\r\n    String filenameFilter = &quot;/nh /fi \\&quot;Imagename eq &quot;+findProcess+&quot;\\&quot;&quot;;\r\n    String tasksCmd = System.getenv(&quot;windir&quot;) +&quot;/system32/tasklist.exe &quot;+filenameFilter;\r\n\r\n    Process p = Runtime.getRuntime().exec(tasksCmd);\r\n    BufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream()));\r\n    \r\n    ArrayList&lt;String&gt; procs = new ArrayList&lt;String&gt;();\r\n    String line = null;\r\n    while ((line = input.readLine()) != null) \r\n    \tprocs.add(line);\r\n    \r\n    input.close();\r\n    \r\n    Boolean processFound = procs.stream().filter(row -&gt; row.indexOf(findProcess) &gt; -1).count() &gt; 0;\r\n    // Head-up! If no processes were found - we still get: \r\n    // &quot;INFO: No tasks are running which match the specified criteria.&quot;\r\n\r\n  [1]: https://technet.microsoft.com/en-us/library/bb491010.aspx","title":"How to check if a process is running on Windows?","body":"<p>There is no direct way to query general processes as each OS handles them differently.<br>\nYou kinda stuck with using proxies such as direct OS commands...</p>\n\n<p>You <strong>can</strong> however, find a specific process using tasklist.exe with <strong>/fi</strong> parameter.<br>\ne.g: <code>tasklist.exe /nh /fi \"Imagename eq chrome.exe\"</code><br>\nNote the mandatory double quotes.<br>\nSyntax &amp; usage are available on <a href=\"https://technet.microsoft.com/en-us/library/bb491010.aspx\" rel=\"noreferrer\">MS Technet site</a>.</p>\n\n<p>Same example, filtering for \"chrome.exe\" in Java:  </p>\n\n<pre><code>String findProcess = \"chrome.exe\";\nString filenameFilter = \"/nh /fi \\\"Imagename eq \"+findProcess+\"\\\"\";\nString tasksCmd = System.getenv(\"windir\") +\"/system32/tasklist.exe \"+filenameFilter;\n\nProcess p = Runtime.getRuntime().exec(tasksCmd);\nBufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream()));\n\nArrayList&lt;String&gt; procs = new ArrayList&lt;String&gt;();\nString line = null;\nwhile ((line = input.readLine()) != null) \n    procs.add(line);\n\ninput.close();\n\nBoolean processFound = procs.stream().filter(row -&gt; row.indexOf(findProcess) &gt; -1).count() &gt; 0;\n// Head-up! If no processes were found - we still get: \n// \"INFO: No tasks are running which match the specified criteria.\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7667595,"reputation":1909,"user_id":5810894,"display_name":"pan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1505982089,"creation_date":1505982089,"answer_id":46338876,"question_id":35129457,"body_markdown":"With Java 9 you can do it like this: \r\n\r\n    Optional&lt;ProcessHandle&gt; processHandle = ProcessHandle.of(pid);\r\n    boolean isrunning = processHandle.isPresent() &amp;&amp; processHandle.get().isAlive();\r\n\r\nYou are now also able, to get some info about the process directly with java. \r\n \r\n    Optional&lt;ProcessHandle&gt; processHandle = ProcessHandle.of(pid);\r\n    if(processHandle.isPresent()) {\r\n     ProcessHandle.Info processInfo = processHandle.get().info();\r\n     System.out.println(&quot;COMMAND: &quot; + processInfo.command().orElse(&quot;&quot;));\r\n     System.out.println(&quot;CLI: &quot; + processInfo.commandLine().orElse(&quot;&quot;));\r\n     System.out.println(&quot;USER: &quot; + processInfo.user().orElse(&quot;&quot;));\r\n     System.out.println(&quot;START TIME: &quot; + processInfo.startInstant().orElse(null));\r\n     System.out.println(&quot;TOTAL CPU: &quot; + processInfo.totalCpuDuration().orElse(null));\r\n     \r\n    }","title":"How to check if a process is running on Windows?","body":"<p>With Java 9 you can do it like this: </p>\n\n<pre><code>Optional&lt;ProcessHandle&gt; processHandle = ProcessHandle.of(pid);\nboolean isrunning = processHandle.isPresent() &amp;&amp; processHandle.get().isAlive();\n</code></pre>\n\n<p>You are now also able, to get some info about the process directly with java. </p>\n\n<pre><code>Optional&lt;ProcessHandle&gt; processHandle = ProcessHandle.of(pid);\nif(processHandle.isPresent()) {\n ProcessHandle.Info processInfo = processHandle.get().info();\n System.out.println(\"COMMAND: \" + processInfo.command().orElse(\"\"));\n System.out.println(\"CLI: \" + processInfo.commandLine().orElse(\"\"));\n System.out.println(\"USER: \" + processInfo.user().orElse(\"\"));\n System.out.println(\"START TIME: \" + processInfo.startInstant().orElse(null));\n System.out.println(\"TOTAL CPU: \" + processInfo.totalCpuDuration().orElse(null));\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8139998,"reputation":1398,"user_id":6130501,"display_name":"Adir Dayan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693945391,"creation_date":1693945391,"answer_id":77047535,"question_id":35129457,"body_markdown":"You can implement such method easily using Java 9:\r\n\r\n    public boolean isProcessRunning(String processName)\r\n    {\r\n        return ProcessHandle\r\n            .allProcesses()\r\n            .filter(p -&gt; p.info().command().isPresent())\r\n            .anyMatch(n -&gt; n.info().command().orElse(&quot;&quot;).endsWith(processName));\r\n    }\r\n\r\n**Note:** I used `endsWith(..)` because the command contains the full path of the executed file. BTW if you have the PID, look on the accepted answer.","title":"How to check if a process is running on Windows?","body":"<p>You can implement such method easily using Java 9:</p>\n<pre><code>public boolean isProcessRunning(String processName)\n{\n    return ProcessHandle\n        .allProcesses()\n        .filter(p -&gt; p.info().command().isPresent())\n        .anyMatch(n -&gt; n.info().command().orElse(&quot;&quot;).endsWith(processName));\n}\n</code></pre>\n<p><strong>Note:</strong> I used <code>endsWith(..)</code> because the command contains the full path of the executed file. BTW if you have the PID, look on the accepted answer.</p>\n"}],"owner":{"account_id":5786247,"reputation":12927,"user_id":4565367,"accept_rate":75,"display_name":"Francisco Romero"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19838,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":35134751,"answer_count":4,"score":4,"last_activity_date":1693945391,"creation_date":1454326308,"question_id":35129457,"body_markdown":"What I am trying to do it is a program to know if a process it is active on `Windows` to work with it in `Java`. I looked on the Internet and found two different solutions:\r\n\r\n- [Option 1][1]\r\n- [Option 2][2]\r\n\r\nBut it is not at all what I am looking for. \r\n\r\nAccording to the option 1, I would like a method to make reference to the process (and detect if it is active/running) but without searching in the full `tasklist` and then searching on it. I am searching if there is a direct method to do that.\r\n\r\nI also though to add a filter to the tasklist but could not find any filter to only get the process I am looking for. I saw all the options using `tasklist /?` on my command line.\r\n\r\nThen I searched information about the second option and `wmic` (that I never heard before) and it seems that `wmic` allows you to execute tasks on the command line (correct me if I am wrong please).\r\n\r\nSo, here I have two **questions**:\r\n\r\n- Is there a direct method to know if a process is active on Windows with Java? Trying to avoid searching in the full tasklist or using `wmic`.\r\n\r\n- If it is impossible, what of the two options that I put above would be better if we talk about efficient programming?\r\n\r\n\r\nThanks in advance!\r\n\r\n  [1]: https://stackoverflow.com/questions/19005410/check-if-some-exe-program-is-running-on-the-windows\r\n  [2]: https://stackoverflow.com/questions/2318220/how-to-detect-via-java-whether-a-particular-process-is-running-under-windows","title":"How to check if a process is running on Windows?","body":"<p>What I am trying to do it is a program to know if a process it is active on <code>Windows</code> to work with it in <code>Java</code>. I looked on the Internet and found two different solutions:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/19005410/check-if-some-exe-program-is-running-on-the-windows\">Option 1</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2318220/how-to-detect-via-java-whether-a-particular-process-is-running-under-windows\">Option 2</a></li>\n</ul>\n\n<p>But it is not at all what I am looking for. </p>\n\n<p>According to the option 1, I would like a method to make reference to the process (and detect if it is active/running) but without searching in the full <code>tasklist</code> and then searching on it. I am searching if there is a direct method to do that.</p>\n\n<p>I also though to add a filter to the tasklist but could not find any filter to only get the process I am looking for. I saw all the options using <code>tasklist /?</code> on my command line.</p>\n\n<p>Then I searched information about the second option and <code>wmic</code> (that I never heard before) and it seems that <code>wmic</code> allows you to execute tasks on the command line (correct me if I am wrong please).</p>\n\n<p>So, here I have two <strong>questions</strong>:</p>\n\n<ul>\n<li><p>Is there a direct method to know if a process is active on Windows with Java? Trying to avoid searching in the full tasklist or using <code>wmic</code>.</p></li>\n<li><p>If it is impossible, what of the two options that I put above would be better if we talk about efficient programming?</p></li>\n</ul>\n\n<p>Thanks in advance!</p>\n"},{"tags":["java","macos","callback","observable","atexit"],"owner":{"account_id":1888690,"reputation":3005,"user_id":1707353,"accept_rate":91,"display_name":"Jeff Holt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":0,"score":4,"last_activity_date":1693945315,"creation_date":1693926092,"question_id":77045635,"body_markdown":"I am trying to make [AppBundler][1] more observable and have had great success except for one thing. `JLI_Launch` does not return to the caller so I can&#39;t tell if it fails to load the main class (or any other error that would prevent it from starting).\r\n\r\nI would consider the alternative of using `JNI_CreateJavaVM` to start the JVM but I believe I&#39;d have to write a lot more code to replace `JLI_Launch` with it. And I don&#39;t really know if that would address this problem. The main reason I like `JLI_Launch` is that it closely matches what one would type at the command line. And so I believe it&#39;s easier for everyone (me and the app&#39;s end users) to understand.\r\n\r\nSo far, the only workaround I can imagine is using `atexit` and see if the current time is within a second or two of when `JLI_Launch` was called. Of course, I hate that idea but it&#39;s the only thing I can *try* right away.\r\n\r\nIn the meantime, I&#39;ve redirected stderr and can see the error in the log file. But it would be nice if I could prompt the user to look at it. As it stands, the app doesn&#39;t start and I have to *know* to look at the file. It would be nicer if I could display an alert.\r\n\r\n  [1]: https://github.com/TheInfiniteKind/appbundler","title":"Register a callback to handle JLI_Launch failing with &quot;Could not find or load main class&quot;","body":"<p>I am trying to make <a href=\"https://github.com/TheInfiniteKind/appbundler\" rel=\"nofollow noreferrer\">AppBundler</a> more observable and have had great success except for one thing. <code>JLI_Launch</code> does not return to the caller so I can't tell if it fails to load the main class (or any other error that would prevent it from starting).</p>\n<p>I would consider the alternative of using <code>JNI_CreateJavaVM</code> to start the JVM but I believe I'd have to write a lot more code to replace <code>JLI_Launch</code> with it. And I don't really know if that would address this problem. The main reason I like <code>JLI_Launch</code> is that it closely matches what one would type at the command line. And so I believe it's easier for everyone (me and the app's end users) to understand.</p>\n<p>So far, the only workaround I can imagine is using <code>atexit</code> and see if the current time is within a second or two of when <code>JLI_Launch</code> was called. Of course, I hate that idea but it's the only thing I can <em>try</em> right away.</p>\n<p>In the meantime, I've redirected stderr and can see the error in the log file. But it would be nice if I could prompt the user to look at it. As it stands, the app doesn't start and I have to <em>know</em> to look at the file. It would be nicer if I could display an alert.</p>\n"},{"tags":["java","maven","maven-3","maven-metadata"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":2,"creation_date":1367937050,"post_id":16421454,"comment_id":23547106,"body_markdown":"The access to metadata in case of SNAPSHOT&#39;s necessary to get Maven informed about newly created SNAPSHOT&#39;s etc.","body":"The access to metadata in case of SNAPSHOT&#39;s necessary to get Maven informed about newly created SNAPSHOT&#39;s etc."},{"owner":{"account_id":56519,"reputation":22672,"user_id":169277,"accept_rate":97,"display_name":"ant"},"score":8,"creation_date":1367937237,"post_id":16421454,"comment_id":23547223,"body_markdown":"I don&#39;t know why but you can avoid this by using -o option like `mvn clean install -o\n`","body":"I don&#39;t know why but you can avoid this by using -o option like <code>mvn clean install -o </code>"},{"owner":{"account_id":47487,"reputation":3720,"user_id":140707,"display_name":"Frans"},"score":0,"creation_date":1387196391,"post_id":16421454,"comment_id":30842461,"body_markdown":"Actually, the error that the build fails on is &quot;Error assembling WAR: webxml attribute is required (or pre-existing WEB-INF/web.xml if executing in update mode)&quot;. So you should fix that. I can&#39;t image it being related to your internet connection. The dependency resolution warnings are just that: warnings. They&#39;re not the ultimate cause of your build failure.","body":"Actually, the error that the build fails on is &quot;Error assembling WAR: webxml attribute is required (or pre-existing WEB-INF/web.xml if executing in update mode)&quot;. So you should fix that. I can&#39;t image it being related to your internet connection. The dependency resolution warnings are just that: warnings. They&#39;re not the ultimate cause of your build failure."},{"owner":{"account_id":47487,"reputation":3720,"user_id":140707,"display_name":"Frans"},"score":0,"creation_date":1387196487,"post_id":16421454,"comment_id":30842507,"body_markdown":"Perhaps you can clarify your question as you seem to have two questions: 1) Why is my build failing? 2) Why is maven trying to download metadata? user944849&#39;s answer goes a long way to answering 2). If that answers your question, you should accept it.","body":"Perhaps you can clarify your question as you seem to have two questions: 1) Why is my build failing? 2) Why is maven trying to download metadata? user944849&#39;s answer goes a long way to answering 2). If that answers your question, you should accept it."},{"owner":{"account_id":3287434,"reputation":1034,"user_id":2766545,"accept_rate":75,"display_name":"Janaka Bandara"},"score":0,"creation_date":1498464619,"post_id":16421454,"comment_id":76491498,"body_markdown":"Snapshot metadata update can be avoided using `-nsu`, `--no-snapshot-updates` option with `mvn`","body":"Snapshot metadata update can be avoided using <code>-nsu</code>, <code>--no-snapshot-updates</code> option with <code>mvn</code>"}],"answers":[{"tags":[],"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1367936830,"creation_date":1367936830,"answer_id":16421576,"question_id":16421454,"body_markdown":"I haven&#39;t studied yet, when Maven does which look-up, but to get stable and reproducible builds, I strongly recommend not to access Maven Respositories directly but to use a Maven Repository Manager such as Nexus.\r\n\r\nHere is the tutorial how to set up your settings file:\r\n\r\nhttp://books.sonatype.com/nexus-book/reference/maven-sect-single-group.html\r\n\r\nhttp://maven.apache.org/repository-management.html\r\n","title":"Why is Maven downloading the maven-metadata.xml every time?","body":"<p>I haven't studied yet, when Maven does which look-up, but to get stable and reproducible builds, I strongly recommend not to access Maven Respositories directly but to use a Maven Repository Manager such as Nexus.</p>\n\n<p>Here is the tutorial how to set up your settings file:</p>\n\n<p><a href=\"http://books.sonatype.com/nexus-book/reference/maven-sect-single-group.html\" rel=\"nofollow\">http://books.sonatype.com/nexus-book/reference/maven-sect-single-group.html</a></p>\n\n<p><a href=\"http://maven.apache.org/repository-management.html\" rel=\"nofollow\">http://maven.apache.org/repository-management.html</a></p>\n"},{"tags":[],"owner":{"account_id":2386830,"reputation":7918,"user_id":2087640,"accept_rate":82,"display_name":"Gab"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1367937502,"creation_date":1367937502,"answer_id":16421814,"question_id":16421454,"body_markdown":"I suppose because you didn&#39;t specify plugin version so it triggers the download of associated metadata in order to get the last one.\r\n\r\nOtherwise did you try to force local repo usage using -o ?","title":"Why is Maven downloading the maven-metadata.xml every time?","body":"<p>I suppose because you didn't specify plugin version so it triggers the download of associated metadata in order to get the last one.</p>\n\n<p>Otherwise did you try to force local repo usage using -o ?</p>\n"},{"tags":[],"owner":{"account_id":910975,"reputation":14592,"user_id":944849,"accept_rate":87,"display_name":"user944849"},"down_vote_count":1,"up_vote_count":165,"is_accepted":true,"score":164,"last_activity_date":1367947580,"creation_date":1367947580,"answer_id":16425036,"question_id":16421454,"body_markdown":"Look in your `settings.xml` (or, possibly your project&#39;s parent or corporate parent POM) for the `&lt;repositories&gt;` element.  It will look something like the below.\r\n\r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;central&lt;/id&gt;\r\n            &lt;url&gt;http://gotoNexus&lt;/url&gt;\r\n            &lt;snapshots&gt;\r\n                &lt;enabled&gt;true&lt;/enabled&gt;\r\n                &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\r\n            &lt;/snapshots&gt;\r\n            &lt;releases&gt;\r\n                &lt;enabled&gt;true&lt;/enabled&gt;\r\n                &lt;updatePolicy&gt;daily&lt;/updatePolicy&gt;\r\n            &lt;/releases&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n\r\nNote the `&lt;updatePolicy&gt;` element.  The example tells Maven to contact the remote repo (Nexus in my case, Maven Central if you&#39;re not using your own remote repo) any time Maven needs to retrieve a snapshot artifact during a build, checking to see if there&#39;s a newer copy.  The metadata is required for this.  If there is a newer copy Maven downloads it to your local repo.\r\n\r\nIn the example, for releases, the policy is `daily` so it will check during your first build of the day.  `never` is also a valid option, as described in [Maven settings docs](http://maven.apache.org/settings.html).\r\n\r\nPlugins are resolved separately.  You may have repositories configured for those as well, with different update policies if desired.\r\n\r\n    &lt;pluginRepositories&gt;\r\n        &lt;pluginRepository&gt;\r\n            &lt;id&gt;central&lt;/id&gt;\r\n            &lt;url&gt;http://gotoNexus&lt;/url&gt;\r\n            &lt;snapshots&gt;\r\n                &lt;enabled&gt;true&lt;/enabled&gt;\r\n                &lt;updatePolicy&gt;daily&lt;/updatePolicy&gt;\r\n            &lt;/snapshots&gt;\r\n            &lt;releases&gt;\r\n                &lt;enabled&gt;true&lt;/enabled&gt;\r\n                &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\r\n            &lt;/releases&gt;\r\n        &lt;/pluginRepository&gt;\r\n    &lt;/pluginRepositories&gt;\r\n\r\nSomeone else mentioned the `-o` option.  If you use that, Maven runs in &quot;offline&quot; mode. It knows it has a local repo only, and it won&#39;t contact the remote repo to refresh the artifacts no matter what update policies you use.","title":"Why is Maven downloading the maven-metadata.xml every time?","body":"<p>Look in your <code>settings.xml</code> (or, possibly your project's parent or corporate parent POM) for the <code>&lt;repositories&gt;</code> element.  It will look something like the below.</p>\n\n<pre><code>&lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;central&lt;/id&gt;\n        &lt;url&gt;http://gotoNexus&lt;/url&gt;\n        &lt;snapshots&gt;\n            &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\n        &lt;/snapshots&gt;\n        &lt;releases&gt;\n            &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;updatePolicy&gt;daily&lt;/updatePolicy&gt;\n        &lt;/releases&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt;\n</code></pre>\n\n<p>Note the <code>&lt;updatePolicy&gt;</code> element.  The example tells Maven to contact the remote repo (Nexus in my case, Maven Central if you're not using your own remote repo) any time Maven needs to retrieve a snapshot artifact during a build, checking to see if there's a newer copy.  The metadata is required for this.  If there is a newer copy Maven downloads it to your local repo.</p>\n\n<p>In the example, for releases, the policy is <code>daily</code> so it will check during your first build of the day.  <code>never</code> is also a valid option, as described in <a href=\"http://maven.apache.org/settings.html\">Maven settings docs</a>.</p>\n\n<p>Plugins are resolved separately.  You may have repositories configured for those as well, with different update policies if desired.</p>\n\n<pre><code>&lt;pluginRepositories&gt;\n    &lt;pluginRepository&gt;\n        &lt;id&gt;central&lt;/id&gt;\n        &lt;url&gt;http://gotoNexus&lt;/url&gt;\n        &lt;snapshots&gt;\n            &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;updatePolicy&gt;daily&lt;/updatePolicy&gt;\n        &lt;/snapshots&gt;\n        &lt;releases&gt;\n            &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\n        &lt;/releases&gt;\n    &lt;/pluginRepository&gt;\n&lt;/pluginRepositories&gt;\n</code></pre>\n\n<p>Someone else mentioned the <code>-o</code> option.  If you use that, Maven runs in \"offline\" mode. It knows it has a local repo only, and it won't contact the remote repo to refresh the artifacts no matter what update policies you use.</p>\n"},{"tags":[],"owner":{"account_id":2576229,"reputation":641,"user_id":2233856,"display_name":"jfc"},"down_vote_count":0,"up_vote_count":44,"is_accepted":false,"score":44,"last_activity_date":1494930435,"creation_date":1438758528,"answer_id":31825677,"question_id":16421454,"body_markdown":"It is possibly to use the flag ` -o,--offline &quot;Work offline&quot;` to prevent that.\r\n\r\nLike this:\r\n\r\n`maven compile -o`","title":"Why is Maven downloading the maven-metadata.xml every time?","body":"<p>It is possibly to use the flag <code>-o,--offline \"Work offline\"</code> to prevent that.</p>\n\n<p>Like this:</p>\n\n<p><code>maven compile -o</code></p>\n"},{"tags":[],"owner":{"account_id":3140464,"reputation":2354,"user_id":2656014,"accept_rate":73,"display_name":"Tomask"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574680804,"creation_date":1574680804,"answer_id":59030599,"question_id":16421454,"body_markdown":"Maven does this because your dependency is in a SNAPSHOT version and maven has no way to detect any changes made to that snapshot version in the repository. Release your artifact and change the version in pom.xml to that version and maven will no longer fetch the metadata file.","title":"Why is Maven downloading the maven-metadata.xml every time?","body":"<p>Maven does this because your dependency is in a SNAPSHOT version and maven has no way to detect any changes made to that snapshot version in the repository. Release your artifact and change the version in pom.xml to that version and maven will no longer fetch the metadata file.</p>\n"},{"tags":[],"owner":{"account_id":5611957,"reputation":94,"user_id":4444384,"display_name":"nowavewater"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1628144882,"creation_date":1628144882,"answer_id":68661624,"question_id":16421454,"body_markdown":"In my case I use private repository mananger. While some other maven repository manangers are deprecated. It looks like gradle looks up my private artifacts from deprecated repository managers. Update or remove deprecated repository manangers fix the issue for me.","title":"Why is Maven downloading the maven-metadata.xml every time?","body":"<p>In my case I use private repository mananger. While some other maven repository manangers are deprecated. It looks like gradle looks up my private artifacts from deprecated repository managers. Update or remove deprecated repository manangers fix the issue for me.</p>\n"},{"tags":[],"owner":{"account_id":15042567,"reputation":1,"user_id":10856673,"display_name":"Junaid Nawab"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693945170,"creation_date":1693945170,"answer_id":77047517,"question_id":16421454,"body_markdown":"I encountered a similar issue, and I was able to resolve it by removing this line from my `build.gradle` file:\r\n\r\nimplementation &#39;com.onesignal:OneSignal:[4.0.0, 4.99.99]&#39;\r\n\r\nNote: Kindly check all the dependencies in build.gradle. It is when one of the dependencies is depreciated or has an issue will downloading that dependency file from maven. Thanks alot!\r\n","title":"Why is Maven downloading the maven-metadata.xml every time?","body":"<p>I encountered a similar issue, and I was able to resolve it by removing this line from my <code>build.gradle</code> file:</p>\n<p>implementation 'com.onesignal:OneSignal:[4.0.0, 4.99.99]'</p>\n<p>Note: Kindly check all the dependencies in build.gradle. It is when one of the dependencies is depreciated or has an issue will downloading that dependency file from maven. Thanks alot!</p>\n"}],"owner":{"account_id":412334,"reputation":33758,"user_id":785349,"accept_rate":94,"display_name":"quarks"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":194202,"favorite_count":0,"down_vote_count":0,"up_vote_count":154,"accepted_answer_id":16425036,"answer_count":7,"score":154,"last_activity_date":1693945170,"creation_date":1367936485,"question_id":16421454,"body_markdown":"Below is the error I usually get when my internet connection is flanky when trying to build a web application with maven. \r\n\r\nMy question is that, why does maven always have to download every time when the same app has been built earlier. \r\n\r\nWhat could be wrong in my configuration that makes maven to download every time? \r\n\r\nBelow is an error I get when I try to build offline: \r\n\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Building mywebapp 1.0-SNAPSHOT\r\n    [INFO] ------------------------------------------------------------------------\r\n    Downloading: https://raw.github.com/pagecrumb/mungo/mvn-repo/com/pagecrumb/mungo/0.0.1-SNAPSHOT/maven-metadata.xml\r\n    \r\n    [WARNING] Could not transfer metadata com.mywebapp:mungo:0.0.1-SNAPSHOT/maven-metadata.xml \r\n    from/to mungo-mvn-repo (https://raw.github.com/pagecrumb/mungo/mvn-repo/): raw.github.com\r\n    [INFO] \r\n    [INFO] --- maven-war-plugin:2.1.1:war (default-cli) @ mywebapp ---\r\n    [INFO] Packaging webapp\r\n    [INFO] Assembling webapp [mywebapp] in [D:\\workspace\\web\\target\\mywebapp-1.0-SNAPSHOT]\r\n    [INFO] Processing war project\r\n    [INFO] Copying webapp resources [D:\\workspace\\web\\src\\main\\webapp]\r\n    [INFO] Webapp assembled in [1237 msecs]\r\n    [INFO] Building war: D:\\workspace\\web\\target\\mywebapp-1.0-SNAPSHOT.war\r\n    [WARNING] Warning: selected war files include a WEB-INF/web.xml which will be ignored \r\n    (webxml attribute is missing from war task, \r\n    or ignoreWebxml attribute is specified as &#39;true&#39;)\r\n    [INFO]                                                                         \r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Building com.mywebapp [com.mywebapp] 0.0.1-SNAPSHOT\r\n    [INFO] ------------------------------------------------------------------------\r\n    Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-release-plugin/2.1/maven-release-plugin-2.1.pom\r\n    \r\n    [WARNING] Failed to retrieve plugin descriptor for org.apache.maven.plugins:maven-release-plugin:2.1: Plugin org.apache.maven.plugins:maven-release-plugin:2.1 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-release-plugin:jar:2.1\r\n    Downloading: http://download.java.net/maven/2/org/apache/maven/plugins/maven-metadata.xml\r\n    Downloading: http://download.java.net/maven/2/org/codehaus/mojo/maven-metadata.xml\r\n    \r\n    397/397 B   \r\n                \r\n    Downloaded: http://download.java.net/maven/2/org/codehaus/mojo/maven-metadata.xml (397 B at 0.0 KB/sec)\r\n    [WARNING] Failure to transfer org.apache.maven.plugins:maven-war-plugin/maven-metadata.xml from http://download.java.net/maven/2 was cached in the local repository, resolution will not be reattempted until the update interval of maven2-repository.dev.java.net has elapsed or updates are forced. Original error: Could not transfer metadata org.apache.maven.plugins:maven-war-plugin/maven-metadata.xml from/to maven2-repository.dev.java.net (http://download.java.net/maven/2): download.java.net\r\n    [INFO] \r\n    [INFO] --- maven-war-plugin:2.3:war (default-cli) @ mywebapp-build ---\r\n    [INFO] Packaging webapp\r\n    [INFO] Assembling webapp [mywebapp-build] in [D:\\workspace\\target\\mywebapp-build-0.0.1-SNAPSHOT]\r\n    [INFO] Processing war project\r\n    [INFO] Webapp assembled in [15 msecs]\r\n    [INFO] Building war: D:\\workspace\\target\\mywebapp-build-0.0.1-SNAPSHOT.war\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Reactor Summary:\r\n    [INFO] \r\n    [INFO] mywebapp ..................................... SUCCESS [27.999s]\r\n    [INFO] com.mywebapp [com.mywebapp] ..................... FAILURE [1:00.406s]\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time: 1:41.409s\r\n    [INFO] Finished at: Tue May 07 22:13:38 SGT 2013\r\n    [INFO] Final Memory: 11M/28M\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-war-plugin:2.3:war \r\n    (default-cli) on project mywebapp-build: Error assembling WAR: webxml attribute is required (or pre-existing WEB-INF/web.xml if executing in update mode)","title":"Why is Maven downloading the maven-metadata.xml every time?","body":"<p>Below is the error I usually get when my internet connection is flanky when trying to build a web application with maven. </p>\n\n<p>My question is that, why does maven always have to download every time when the same app has been built earlier. </p>\n\n<p>What could be wrong in my configuration that makes maven to download every time? </p>\n\n<p>Below is an error I get when I try to build offline: </p>\n\n<pre><code>[INFO] ------------------------------------------------------------------------\n[INFO] Building mywebapp 1.0-SNAPSHOT\n[INFO] ------------------------------------------------------------------------\nDownloading: https://raw.github.com/pagecrumb/mungo/mvn-repo/com/pagecrumb/mungo/0.0.1-SNAPSHOT/maven-metadata.xml\n\n[WARNING] Could not transfer metadata com.mywebapp:mungo:0.0.1-SNAPSHOT/maven-metadata.xml \nfrom/to mungo-mvn-repo (https://raw.github.com/pagecrumb/mungo/mvn-repo/): raw.github.com\n[INFO] \n[INFO] --- maven-war-plugin:2.1.1:war (default-cli) @ mywebapp ---\n[INFO] Packaging webapp\n[INFO] Assembling webapp [mywebapp] in [D:\\workspace\\web\\target\\mywebapp-1.0-SNAPSHOT]\n[INFO] Processing war project\n[INFO] Copying webapp resources [D:\\workspace\\web\\src\\main\\webapp]\n[INFO] Webapp assembled in [1237 msecs]\n[INFO] Building war: D:\\workspace\\web\\target\\mywebapp-1.0-SNAPSHOT.war\n[WARNING] Warning: selected war files include a WEB-INF/web.xml which will be ignored \n(webxml attribute is missing from war task, \nor ignoreWebxml attribute is specified as 'true')\n[INFO]                                                                         \n[INFO] ------------------------------------------------------------------------\n[INFO] Building com.mywebapp [com.mywebapp] 0.0.1-SNAPSHOT\n[INFO] ------------------------------------------------------------------------\nDownloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-release-plugin/2.1/maven-release-plugin-2.1.pom\n\n[WARNING] Failed to retrieve plugin descriptor for org.apache.maven.plugins:maven-release-plugin:2.1: Plugin org.apache.maven.plugins:maven-release-plugin:2.1 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-release-plugin:jar:2.1\nDownloading: http://download.java.net/maven/2/org/apache/maven/plugins/maven-metadata.xml\nDownloading: http://download.java.net/maven/2/org/codehaus/mojo/maven-metadata.xml\n\n397/397 B   \n\nDownloaded: http://download.java.net/maven/2/org/codehaus/mojo/maven-metadata.xml (397 B at 0.0 KB/sec)\n[WARNING] Failure to transfer org.apache.maven.plugins:maven-war-plugin/maven-metadata.xml from http://download.java.net/maven/2 was cached in the local repository, resolution will not be reattempted until the update interval of maven2-repository.dev.java.net has elapsed or updates are forced. Original error: Could not transfer metadata org.apache.maven.plugins:maven-war-plugin/maven-metadata.xml from/to maven2-repository.dev.java.net (http://download.java.net/maven/2): download.java.net\n[INFO] \n[INFO] --- maven-war-plugin:2.3:war (default-cli) @ mywebapp-build ---\n[INFO] Packaging webapp\n[INFO] Assembling webapp [mywebapp-build] in [D:\\workspace\\target\\mywebapp-build-0.0.1-SNAPSHOT]\n[INFO] Processing war project\n[INFO] Webapp assembled in [15 msecs]\n[INFO] Building war: D:\\workspace\\target\\mywebapp-build-0.0.1-SNAPSHOT.war\n[INFO] ------------------------------------------------------------------------\n[INFO] Reactor Summary:\n[INFO] \n[INFO] mywebapp ..................................... SUCCESS [27.999s]\n[INFO] com.mywebapp [com.mywebapp] ..................... FAILURE [1:00.406s]\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 1:41.409s\n[INFO] Finished at: Tue May 07 22:13:38 SGT 2013\n[INFO] Final Memory: 11M/28M\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-war-plugin:2.3:war \n(default-cli) on project mywebapp-build: Error assembling WAR: webxml attribute is required (or pre-existing WEB-INF/web.xml if executing in update mode)\n</code></pre>\n"},{"tags":["python","java","dll","compilation","programming-languages"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1693661034,"post_id":77028377,"comment_id":135791744,"body_markdown":"The duplinks (taken together) should explain how to create a DLL from Java code that you can use from Python.  But there are other ways to call Java code from Python that you may also want to research.","body":"The duplinks (taken together) should explain how to create a DLL from Java code that you can use from Python.  But there are other ways to call Java code from Python that you may also want to research."},{"owner":{"account_id":28051070,"reputation":105,"user_id":21427142,"display_name":"DazzRick"},"score":0,"creation_date":1693666934,"post_id":77028377,"comment_id":135792270,"body_markdown":"Really? What the another way that you recommend me?","body":"Really? What the another way that you recommend me?"},{"owner":{"account_id":28051070,"reputation":105,"user_id":21427142,"display_name":"DazzRick"},"score":0,"creation_date":1693666996,"post_id":77028377,"comment_id":135792276,"body_markdown":"Because I want a closed code, and I don&#39;t know if have a way to convert the two code together","body":"Because I want a closed code, and I don&#39;t know if have a way to convert the two code together"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1693668470,"post_id":77028377,"comment_id":135792435,"body_markdown":"*&quot;.... that you may also want to **research**.&quot;*.  Google it.","body":"<i>&quot;.... that you may also want to <b>research</b>.&quot;</i>.  Google it."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1693668933,"post_id":77028377,"comment_id":135792469,"body_markdown":"Re: the &quot;class format error 51.0&quot; - Yes, one of duplinks specifically says that IKVM only supports Java 7 and earlier!  (It is important to read Q&amp;As carefully.) You could try recompiling your code with a Java 7 compiler, or the Java 8 compiler using the `-target 1.7` option.","body":"Re: the &quot;class format error 51.0&quot; - Yes, one of duplinks specifically says that IKVM only supports Java 7 and earlier!  (It is important to read Q&amp;As carefully.) You could try recompiling your code with a Java 7 compiler, or the Java 8 compiler using the <code>-target 1.7</code> option."},{"owner":{"account_id":28051070,"reputation":105,"user_id":21427142,"display_name":"DazzRick"},"score":0,"creation_date":1693836659,"post_id":77028377,"comment_id":135809083,"body_markdown":"I receive another error, I&#39;ll edit my question and put how I&#39;m doing it","body":"I receive another error, I&#39;ll edit my question and put how I&#39;m doing it"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1693870548,"post_id":77028377,"comment_id":135813706,"body_markdown":"The `-target` option is for `javac`.  You (would) need to rebuild all of your classes (and 3rd party library classes) for the Java 7 platform ... THEN use `ikvm`.  (I say &quot;would&quot;.  I haven&#39;t done this myself.)","body":"The <code>-target</code> option is for <code>javac</code>.  You (would) need to rebuild all of your classes (and 3rd party library classes) for the Java 7 platform ... THEN use <code>ikvm</code>.  (I say &quot;would&quot;.  I haven&#39;t done this myself.)"},{"owner":{"account_id":28051070,"reputation":105,"user_id":21427142,"display_name":"DazzRick"},"score":0,"creation_date":1693944311,"post_id":77028377,"comment_id":135825766,"body_markdown":"I undestand, I can&#39;t do it, for a lot of reasons, but principally because I don&#39;t know java, I only wanted to use this library in my python code, because this library is bestest that python libraries that do the same thing.","body":"I undestand, I can&#39;t do it, for a lot of reasons, but principally because I don&#39;t know java, I only wanted to use this library in my python code, because this library is bestest that python libraries that do the same thing."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1693976426,"post_id":77028377,"comment_id":135828886,"body_markdown":"Well ... maybe the answer is &quot;there is no way to do it&quot; that will work with current versions of Java.  Compiling Java libraries to DLLs is a pretty hairy idea.","body":"Well ... maybe the answer is &quot;there is no way to do it&quot; that will work with current versions of Java.  Compiling Java libraries to DLLs is a pretty hairy idea."},{"owner":{"account_id":28051070,"reputation":105,"user_id":21427142,"display_name":"DazzRick"},"score":0,"creation_date":1694178107,"post_id":77028377,"comment_id":135860928,"body_markdown":"I understand... thank you anyway...","body":"I understand... thank you anyway..."}],"owner":{"account_id":28051070,"reputation":105,"user_id":21427142,"display_name":"DazzRick"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1693659778,"answer_count":0,"score":0,"last_activity_date":1693944599,"creation_date":1693659575,"question_id":77028377,"body_markdown":"I want to use a [Java project](https://github.com/wmixvideo/nfe) inside Python, I read that [some Python libraries do it](https://stackoverflow.com/questions/3652554/calling-java-from-python). But my question is it: If I do it, can I compile before all the code with pyinstaller or can I **compile the java code in something like a `dll` to use inside the Python code, and use this before in the compiled program?**\r\n\r\nIf somebody can reply, I have another doubt too, if don&#39;t have a way to do **it** with Java, have a way with another language, like PHP?\r\n\r\n**EDITED:**\r\n\r\nSend me to [this question](https://stackoverflow.com/questions/262603/is-there-any-way-to-compile-java-code-into-a-dll), but its out of date... I try to use the first answer, `ikvm`, but I receive this error because the version of java:\r\n\r\n`ikvm-7.2.4630.5\\bin&gt;ikvmc -target:library -out:nfe-4.0.30.dll -recurse:./nfe-4.0.30.jar`\r\n\r\n&gt; Warning IKVMC0108: not a class file &quot;cc/mallet/util/tests/TestPriorityQueue$1.class&quot;, including it as resource    (class format error &quot;51.0&quot;)\r\n\r\n[source](https://stackoverflow.com/questions/7875231/converting-java-to-net-library-using-ikvmc-warning-ikvmc0108-not-a-class-fil)\r\n\r\nBecause the tip from @StephenC, I try to change the command:\r\n\r\n`ikvmc -target:1.7 -out:nfe-4.0.30.dll -recurse:./nfe-4.0.30.jar`\r\n\r\nI receive this error:\r\n\r\n&gt; fatal error IKVMC5009: Invalid value &#39;1.7&#39; for -target option\r\n\r\n**EDITED 09/05:**\r\n\r\nThe links don&#39;t help me to convert the library to Python. I don&#39;t know Java, and don&#39;t know what the Java version from the project that I provided. Please, if somebody know a updated way to convert newest Java libraries to Python, I thank.","title":"Can I compile the java code in something like a dll to use inside the Python code, and use this before in a pyinstaller compiled program?","body":"<p>I want to use a <a href=\"https://github.com/wmixvideo/nfe\" rel=\"nofollow noreferrer\">Java project</a> inside Python, I read that <a href=\"https://stackoverflow.com/questions/3652554/calling-java-from-python\">some Python libraries do it</a>. But my question is it: If I do it, can I compile before all the code with pyinstaller or can I <strong>compile the java code in something like a <code>dll</code> to use inside the Python code, and use this before in the compiled program?</strong></p>\n<p>If somebody can reply, I have another doubt too, if don't have a way to do <strong>it</strong> with Java, have a way with another language, like PHP?</p>\n<p><strong>EDITED:</strong></p>\n<p>Send me to <a href=\"https://stackoverflow.com/questions/262603/is-there-any-way-to-compile-java-code-into-a-dll\">this question</a>, but its out of date... I try to use the first answer, <code>ikvm</code>, but I receive this error because the version of java:</p>\n<p><code>ikvm-7.2.4630.5\\bin&gt;ikvmc -target:library -out:nfe-4.0.30.dll -recurse:./nfe-4.0.30.jar</code></p>\n<blockquote>\n<p>Warning IKVMC0108: not a class file &quot;cc/mallet/util/tests/TestPriorityQueue$1.class&quot;, including it as resource    (class format error &quot;51.0&quot;)</p>\n</blockquote>\n<p><a href=\"https://stackoverflow.com/questions/7875231/converting-java-to-net-library-using-ikvmc-warning-ikvmc0108-not-a-class-fil\">source</a></p>\n<p>Because the tip from @StephenC, I try to change the command:</p>\n<p><code>ikvmc -target:1.7 -out:nfe-4.0.30.dll -recurse:./nfe-4.0.30.jar</code></p>\n<p>I receive this error:</p>\n<blockquote>\n<p>fatal error IKVMC5009: Invalid value '1.7' for -target option</p>\n</blockquote>\n<p><strong>EDITED 09/05:</strong></p>\n<p>The links don't help me to convert the library to Python. I don't know Java, and don't know what the Java version from the project that I provided. Please, if somebody know a updated way to convert newest Java libraries to Python, I thank.</p>\n"},{"tags":["java","spring-boot","hibernate","jpa","java-17"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1693915481,"post_id":77040858,"comment_id":135819664,"body_markdown":"First, it isn&#39;t clear, are you modifying an exiting entity instance&#39;s createdBy date trying to get a new row inserted? Where is that createdAt=2023-09-04T21:52:39.860899Z date coming from? As the error states, you cannot update an existing entity&#39;s ID values; JPA will cache entities, and with change tracking, is likely detecting that this was an existing entity previously read in. If that is what you are attempting, you should instead create a copy with the timestamp left blank to let the pre-persist set it.","body":"First, it isn&#39;t clear, are you modifying an exiting entity instance&#39;s createdBy date trying to get a new row inserted? Where is that createdAt=2023-09-04T21:52:39.860899Z date coming from? As the error states, you cannot update an existing entity&#39;s ID values; JPA will cache entities, and with change tracking, is likely detecting that this was an existing entity previously read in. If that is what you are attempting, you should instead create a copy with the timestamp left blank to let the pre-persist set it."},{"owner":{"account_id":19317142,"reputation":97,"user_id":14121658,"display_name":"jnasworld223"},"score":0,"creation_date":1693944363,"post_id":77040858,"comment_id":135825780,"body_markdown":"@Chris I am adding a new entity. I am confused why the exception is thrown because the line in the stack trace points to unrelated code. Nevertheless, as described in my update, I am now using entityManager.detach() to remove the object from the persistence context and then manually setting the timestamp.","body":"@Chris I am adding a new entity. I am confused why the exception is thrown because the line in the stack trace points to unrelated code. Nevertheless, as described in my update, I am now using entityManager.detach() to remove the object from the persistence context and then manually setting the timestamp."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1694006399,"post_id":77040858,"comment_id":135834391,"body_markdown":"So you were reading in an entity, modifying it and then trying to call persist? Detach  might work, but you might also get into problems with change tracking (provider/implementation specific)- you are better off making a copy of the entity to persist as a new instance instead. As for when the exception occurs - persist/save does not require immediate inserts to the database. Instead, the JPA provider can delay statements until required to synchronize to the database (ie on flush or transaction commit, or queries that require synchronization)","body":"So you were reading in an entity, modifying it and then trying to call persist? Detach  might work, but you might also get into problems with change tracking (provider/implementation specific)- you are better off making a copy of the entity to persist as a new instance instead. As for when the exception occurs - persist/save does not require immediate inserts to the database. Instead, the JPA provider can delay statements until required to synchronize to the database (ie on flush or transaction commit, or queries that require synchronization)"},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1694007690,"post_id":77040858,"comment_id":135834694,"body_markdown":"@Chris my understanding is TC&#39;s goal is to create versions implicitly: the idea is when JPA have discovered dirty entity and is trying to flush that entity it supposed to update `createdAt` field which is part of composite PK and start considering that entity as new one. No doubts, performing detach (or other tricks) is turning that &quot;implicit magic&quot; into some kind of explicit code, which is actually expressed in wrong words","body":"@Chris my understanding is TC&#39;s goal is to create versions implicitly: the idea is when JPA have discovered dirty entity and is trying to flush that entity it supposed to update <code>createdAt</code> field which is part of composite PK and start considering that entity as new one. No doubts, performing detach (or other tricks) is turning that &quot;implicit magic&quot; into some kind of explicit code, which is actually expressed in wrong words"}],"answers":[{"tags":[],"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1693882286,"creation_date":1693882286,"answer_id":77041487,"question_id":77040858,"body_markdown":"I&#39;m not sure about the correctness of your schema design - typically such desires (i.e. maintaining a set of object versions and querying the latest one primarily) are being implemented via more complex approaches, for example:\r\n\r\n```\r\nobject_id, // unique identifier of version\r\nchronicle_id, // identifier of root version\r\nantecedent_id, // identifier of previous version\r\nlatest_flag // denotes the latest version\r\n```\r\n\r\nNevertheless, Hibernate does not support changing entity identifier, that is stated clearly in [documentation](https://docs.jboss.org/hibernate/orm/5.0/mappingGuide/en-US/html/ch06.html):\r\n\r\n&gt; Hibernate and JPA both make the following assumptions about the corresponding database column(s):\r\n&gt;\r\n&gt;- UNIQUE - The values must uniquely identify each row.\r\n&gt;- NOT NULL - The values cannot be null. For composite ids, no part can be null.\r\n&gt; - IMMUTABLE - The values, once inserted, can never be changed. This is more a general guide, than a hard-fast rule as opinions vary. JPA defines the behavior of changing the value of the identifier attribute to be undefined; **Hibernate simply does not support that**. In cases where the values for the PK you have chosen will be updated, Hibernate recommends mapping the mutable value as a natural id, and use a surrogate id for the PK. See Chapter 7, Natural Ids.\r\n\r\nTechnically, the above is stated for columns in database, but the same applies for entity classes as well.\r\n\r\n**Answering the initial question &quot;Why does it sometimes work and sometimes does not?&quot;**\r\n\r\nThe actual behaviour depends on whether the entity to be modified is known to persistent context or not, if persistent context has no information about entity to be modified it considers that entity as new and everything works &quot;as expected&quot;, otherwise exception gets thrown, for example:\r\n\r\n\r\n```\r\nclass EntityService {\r\n\r\n\r\n  private EntityRepo entityRepo;\r\n\r\n  // this throws exception\r\n  // because spring maintains single session (persistence context)\r\n  // per transaction, so both  entityRepo.findById and entityRepo.save\r\n  // calls share the same instance of persistence context\r\n\r\n  @Transactional\r\n  void save1() {\r\n     Entity entity = entityRepo.findById(...);\r\n     entity.updateTimestamp();\r\n     entityRepo.save(entity);\r\n  }\r\n\r\n  // this method does not throw exception\r\n  // because entityRepo.findById and entityRepo.save calls\r\n  // do not share the same instance of persistence context\r\n\r\n  // @Transactional (propagation = Propagation.REQUIRES_NEW)\r\n  void save2() {\r\n     Entity entity = entityRepo.findById(...);\r\n     entity.updateTimestamp();\r\n     entityRepo.save(entity);\r\n  }\r\n\r\n\r\n}\r\n\r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Why is one JPA entity complaining about modifying the identifier while another is not?","body":"<p>I'm not sure about the correctness of your schema design - typically such desires (i.e. maintaining a set of object versions and querying the latest one primarily) are being implemented via more complex approaches, for example:</p>\n<pre><code>object_id, // unique identifier of version\nchronicle_id, // identifier of root version\nantecedent_id, // identifier of previous version\nlatest_flag // denotes the latest version\n</code></pre>\n<p>Nevertheless, Hibernate does not support changing entity identifier, that is stated clearly in <a href=\"https://docs.jboss.org/hibernate/orm/5.0/mappingGuide/en-US/html/ch06.html\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<blockquote>\n<p>Hibernate and JPA both make the following assumptions about the corresponding database column(s):</p>\n<ul>\n<li>UNIQUE - The values must uniquely identify each row.</li>\n<li>NOT NULL - The values cannot be null. For composite ids, no part can be null.</li>\n<li>IMMUTABLE - The values, once inserted, can never be changed. This is more a general guide, than a hard-fast rule as opinions vary. JPA defines the behavior of changing the value of the identifier attribute to be undefined; <strong>Hibernate simply does not support that</strong>. In cases where the values for the PK you have chosen will be updated, Hibernate recommends mapping the mutable value as a natural id, and use a surrogate id for the PK. See Chapter 7, Natural Ids.</li>\n</ul>\n</blockquote>\n<p>Technically, the above is stated for columns in database, but the same applies for entity classes as well.</p>\n<p><strong>Answering the initial question &quot;Why does it sometimes work and sometimes does not?&quot;</strong></p>\n<p>The actual behaviour depends on whether the entity to be modified is known to persistent context or not, if persistent context has no information about entity to be modified it considers that entity as new and everything works &quot;as expected&quot;, otherwise exception gets thrown, for example:</p>\n<pre><code>class EntityService {\n\n\n  private EntityRepo entityRepo;\n\n  // this throws exception\n  // because spring maintains single session (persistence context)\n  // per transaction, so both  entityRepo.findById and entityRepo.save\n  // calls share the same instance of persistence context\n\n  @Transactional\n  void save1() {\n     Entity entity = entityRepo.findById(...);\n     entity.updateTimestamp();\n     entityRepo.save(entity);\n  }\n\n  // this method does not throw exception\n  // because entityRepo.findById and entityRepo.save calls\n  // do not share the same instance of persistence context\n\n  // @Transactional (propagation = Propagation.REQUIRES_NEW)\n  void save2() {\n     Entity entity = entityRepo.findById(...);\n     entity.updateTimestamp();\n     entityRepo.save(entity);\n  }\n\n\n}\n\n\n</code></pre>\n"}],"owner":{"account_id":19317142,"reputation":97,"user_id":14121658,"display_name":"jnasworld223"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693944258,"creation_date":1693865733,"question_id":77040858,"body_markdown":"I am working on an authorization microservice using Springboot. I have the notion of permissions, roles, and users, each of which is represented as an `@Entity` class with a corresponding `JpaRepository`.\r\n\r\nEach `@Entity` class has an `@IdClass` that consists of a string ID and a timestamp (the field is called `createdAt`). The idea is that any modifications to one of the entity objects will create a new row in the database. I am unable to modify this database schema. I ran into the issue where modifying the ID (the timestamp portion) on updates threw a `HibernateExeption`. My solution was to use `@PrePersist` to modify the timestamp.\r\n```\r\n  @PrePersist\r\n  private void updateTimestamp() {\r\n    createdAt = Instant.now();\r\n  }\r\n```\r\nThis seemed to work for my permissions entity. However, when I test updating my role entity, I am now getting the following error\r\n```\r\norg.hibernate.HibernateException: identifier of an instance of com.example.auth.model.Role was altered from RoleId(roleId=TEST_ROLE_R2, createdAt=2023-09-04T21:52:39.860899Z) to RoleId(roleId=TEST_ROLE_R2, createdAt=2023-08-31T23:12:25.927743Z)\r\n```\r\nwith the same `@PrePersist` method. \r\n\r\nAnother thing that is odd is that the exception seems to get thrown when accessing the permission repository. When updating/creating a role, the information for the associated permissions is referenced.\r\n\r\nWhere the exception is thrown\r\n```\r\npermissionRepository.findMostRecentPermissionById(p)\r\n```\r\n`findMostRecentPermisisonById()`\r\n```\r\n    @Query(\r\n        value = &quot;SELECT * FROM auth.permissions WHERE permissionID = :permissionID ORDER BY createdat DESC LIMIT 1&quot;,\r\n        nativeQuery = true\r\n    )\r\n    Permission findMostRecentPermissionById(String permissionID);\r\n```\r\n\r\nI am not sure what is causing the exception to be thrown at all, and am especially confused as to why it is being thrown here. The `findMostRecentPermissionById` method does not cause any issues when used in other parts of the code. Any insight or advice would be much appreciated.\r\n\r\n## Update\r\n\r\nI still do not understand why the exception was thrown where it was. However, using `entityManager.detach(entity)` allows me to manually set the timestamp field and add a new entity.","title":"Why is one JPA entity complaining about modifying the identifier while another is not?","body":"<p>I am working on an authorization microservice using Springboot. I have the notion of permissions, roles, and users, each of which is represented as an <code>@Entity</code> class with a corresponding <code>JpaRepository</code>.</p>\n<p>Each <code>@Entity</code> class has an <code>@IdClass</code> that consists of a string ID and a timestamp (the field is called <code>createdAt</code>). The idea is that any modifications to one of the entity objects will create a new row in the database. I am unable to modify this database schema. I ran into the issue where modifying the ID (the timestamp portion) on updates threw a <code>HibernateExeption</code>. My solution was to use <code>@PrePersist</code> to modify the timestamp.</p>\n<pre><code>  @PrePersist\n  private void updateTimestamp() {\n    createdAt = Instant.now();\n  }\n</code></pre>\n<p>This seemed to work for my permissions entity. However, when I test updating my role entity, I am now getting the following error</p>\n<pre><code>org.hibernate.HibernateException: identifier of an instance of com.example.auth.model.Role was altered from RoleId(roleId=TEST_ROLE_R2, createdAt=2023-09-04T21:52:39.860899Z) to RoleId(roleId=TEST_ROLE_R2, createdAt=2023-08-31T23:12:25.927743Z)\n</code></pre>\n<p>with the same <code>@PrePersist</code> method.</p>\n<p>Another thing that is odd is that the exception seems to get thrown when accessing the permission repository. When updating/creating a role, the information for the associated permissions is referenced.</p>\n<p>Where the exception is thrown</p>\n<pre><code>permissionRepository.findMostRecentPermissionById(p)\n</code></pre>\n<p><code>findMostRecentPermisisonById()</code></p>\n<pre><code>    @Query(\n        value = &quot;SELECT * FROM auth.permissions WHERE permissionID = :permissionID ORDER BY createdat DESC LIMIT 1&quot;,\n        nativeQuery = true\n    )\n    Permission findMostRecentPermissionById(String permissionID);\n</code></pre>\n<p>I am not sure what is causing the exception to be thrown at all, and am especially confused as to why it is being thrown here. The <code>findMostRecentPermissionById</code> method does not cause any issues when used in other parts of the code. Any insight or advice would be much appreciated.</p>\n<h2>Update</h2>\n<p>I still do not understand why the exception was thrown where it was. However, using <code>entityManager.detach(entity)</code> allows me to manually set the timestamp field and add a new entity.</p>\n"},{"tags":["java","spring","transactions"],"answers":[{"tags":[],"owner":{"account_id":331203,"reputation":4390,"user_id":655756,"display_name":"n1ckolas"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1693943572,"creation_date":1361543260,"answer_id":15026394,"question_id":15026142,"body_markdown":"In one of my projects because of certain reasons I also had to use `PlatformTransactionManager`. So I forced to use `org.springframework.transaction.support.TransactionTemplate`.\r\n\r\nhttp://static.springsource.org/spring/docs/2.0.x/api/org/springframework/transaction/support/TransactionTemplate.html\r\n\r\nThe main benefit is that if you have implemented PlatformTransactionManager correctly, you don&#39;t need to bother with manual commit/rollback. At least source code of TransactionTemplate may help you if you need more specific thing.\r\n\r\nIt&#39;s pretty simply to use:\r\n\r\nconfig.xml\r\n\r\n    &lt;bean name=&quot;transactionTemplate&quot;\r\n                class=&quot;org.springframework.transaction.support.TransactionTemplate&quot;&gt;\r\n        &lt;property name=&quot;transactionManager&quot; ref=&quot;platformTransactionManager&quot;/&gt;\r\n    &lt;/bean&gt;\r\n\r\nMyServiceImpl.java\r\n\r\n    @Service\r\n    public class MyServiceImpl implements MyService {\r\n\r\n        @Autowired\r\n        private TransactionTemplate transactionTemplate;\r\n\r\n        public Entity getSomethingWithTx(final long id) {\r\n\r\n            return transactionTemplate.execute(new TransactionCallback&amp;lt;Entity&gt;() {\r\n                @Override\r\n                public Entity doInTransaction(TransactionStatus status) {\r\n                    //TODO implement\r\n                }\r\n            });\r\n        }\r\n    }\r\n","title":"Creating a post commit when using transaction in Spring","body":"<p>In one of my projects because of certain reasons I also had to use <code>PlatformTransactionManager</code>. So I forced to use <code>org.springframework.transaction.support.TransactionTemplate</code>.</p>\n<p><a href=\"http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/transaction/support/TransactionTemplate.html\" rel=\"nofollow noreferrer\">http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/transaction/support/TransactionTemplate.html</a></p>\n<p>The main benefit is that if you have implemented PlatformTransactionManager correctly, you don't need to bother with manual commit/rollback. At least source code of TransactionTemplate may help you if you need more specific thing.</p>\n<p>It's pretty simply to use:</p>\n<p>config.xml</p>\n<pre><code>&lt;bean name=&quot;transactionTemplate&quot;\n            class=&quot;org.springframework.transaction.support.TransactionTemplate&quot;&gt;\n    &lt;property name=&quot;transactionManager&quot; ref=&quot;platformTransactionManager&quot;/&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>MyServiceImpl.java</p>\n<pre><code>@Service\npublic class MyServiceImpl implements MyService {\n\n    @Autowired\n    private TransactionTemplate transactionTemplate;\n\n    public Entity getSomethingWithTx(final long id) {\n\n        return transactionTemplate.execute(new TransactionCallback&amp;lt;Entity&gt;() {\n            @Override\n            public Entity doInTransaction(TransactionStatus status) {\n                //TODO implement\n            }\n        });\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":384802,"reputation":10056,"user_id":741558,"accept_rate":83,"display_name":"Grooveek"},"down_vote_count":2,"up_vote_count":94,"is_accepted":true,"score":92,"last_activity_date":1361544580,"creation_date":1361544580,"answer_id":15026797,"question_id":15026142,"body_markdown":"You could get exactly what you want by a simpler way, with [`TransactionSynchronizationManager`](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/transaction/support/TransactionSynchronizationManager.html) and [`TransactionSynchronization`](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/transaction/support/TransactionSynchronization.html)\r\n\r\nWith `TransactionSynchronizationManager`, you have static methods to get information about current transaction, and you can register a `TransactionSynchronization` wich allows you to automatically do a post-commit as you call that\r\n\r\n    TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronization(){\r\n               void afterCommit(){\r\n                    //do what you want to do after commit\r\n               }\r\n    })\r\n\r\nBe aware that the TransactionSynchronization is on a per-thread basis (which is often not a problem for a basic web request). ","title":"Creating a post commit when using transaction in Spring","body":"<p>You could get exactly what you want by a simpler way, with <a href=\"http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/transaction/support/TransactionSynchronizationManager.html\" rel=\"noreferrer\"><code>TransactionSynchronizationManager</code></a> and <a href=\"http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/transaction/support/TransactionSynchronization.html\" rel=\"noreferrer\"><code>TransactionSynchronization</code></a></p>\n\n<p>With <code>TransactionSynchronizationManager</code>, you have static methods to get information about current transaction, and you can register a <code>TransactionSynchronization</code> wich allows you to automatically do a post-commit as you call that</p>\n\n<pre><code>TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronization(){\n           void afterCommit(){\n                //do what you want to do after commit\n           }\n})\n</code></pre>\n\n<p>Be aware that the TransactionSynchronization is on a per-thread basis (which is often not a problem for a basic web request). </p>\n"},{"tags":[],"owner":{"account_id":962021,"reputation":11902,"user_id":986160,"accept_rate":83,"display_name":"Michail Michailidis"},"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1491824361,"creation_date":1491823913,"answer_id":43322052,"question_id":15026142,"body_markdown":"Credit to Grooveek&#39;s answer and Alex&#39;s comment under it - I put this here because the combined suggestions provide a solid and cleaner solution that is hard to find around the net. \r\n\r\nUsing Spring 4+. if you need a callback on a `@Transactional` method after it successfully commits just add that in the beginning of the method: \r\n\r\n    @Service\r\n    public class OneService {\r\n    \r\n        @Autowired\r\n        OneDao dao;\r\n    \r\n        @Transactional\r\n        public void a transactionalMethod() {\r\n            TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronizationAdapter(){\r\n                public void afterCommit(){\r\n                    //do stuff right after commit\r\n                    System.out.println(&quot;commit!!!&quot;);\r\n                    \r\n                }\r\n            });\r\n            //do db stuff\r\n            dao.save();\r\n        }\r\n    }","title":"Creating a post commit when using transaction in Spring","body":"<p>Credit to Grooveek's answer and Alex's comment under it - I put this here because the combined suggestions provide a solid and cleaner solution that is hard to find around the net. </p>\n\n<p>Using Spring 4+. if you need a callback on a <code>@Transactional</code> method after it successfully commits just add that in the beginning of the method: </p>\n\n<pre><code>@Service\npublic class OneService {\n\n    @Autowired\n    OneDao dao;\n\n    @Transactional\n    public void a transactionalMethod() {\n        TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronizationAdapter(){\n            public void afterCommit(){\n                //do stuff right after commit\n                System.out.println(\"commit!!!\");\n\n            }\n        });\n        //do db stuff\n        dao.save();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2141692,"reputation":3200,"user_id":1900169,"accept_rate":88,"display_name":"Frank Wilson"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1603210149,"creation_date":1593811267,"answer_id":62722827,"question_id":15026142,"body_markdown":"Since Spring 4.2 it has been possible to define listeners for post commit events (or more generally transaction synchronization events e.g. rollbacks) using annotation based configuraton. This is based off event handling in [core spring](https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#context-functionality-events). It is easier to test code using this approach since you avoid a direct dependency on TransactionSynchronizationManager, which will likely not be active in a unit test. You can easily test that your transactional service publishes an event and also that your listener performs the right action when you receive an event.\r\n\r\nSo without further ado this is how to set it up:\r\n\r\nIn this example we&#39;ll assume you have a `Customer` entity and a `CustomerRepository` (and ORM to go with it).\r\n\r\nFirst you need a new event type `NewCustomerEvent`:\r\n\r\n    // NewCustomerEvent.java\r\n    // Just a regular pojo for the event\r\n    public class NewCustomerEvent {\r\n\r\n        public String email;\r\n\r\n        // constructor, setters and getters omitted\r\n    }\r\n\r\nThen you define a listener using [`@TransactionalEventListener`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/event/TransactionalEventListener.html). By default this will execute after a sucessful commit but this can be changed using the `phase` parameter:\r\n\r\n    // NewCustomerEventListener.java\r\n    @Component\r\n    public class NewCustomerEventListener {\r\n\r\n        @TransactionalEventListener\r\n        public void handleNewCustomerEvent(NewCustomerEvent newCustomerEvent) {\r\n            // handle new customer event\r\n        }\r\n    }\r\n\r\nFinally you augment your transaction service with an [`ApplicationEventPublisher`](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/context/ApplicationEventPublisher.html) on which you call publish once all the transaction statements have been sent.\r\n\r\n    // CustomerRespositoryService.java\r\n    @Service\r\n    public class CustomerRepositoryService {\r\n\r\n        @Inject\r\n        private ApplicationEventPublisher applicationEventPublisher;\r\n\r\n        @Inject\r\n        private CustomerRepository customerRepository;\r\n\r\n        @Transactional\r\n        public void createCustomer(String email) {\r\n            Customer customer = new Customer(email);\r\n            customerRespotory.save(customer);\r\n            applicationEventPublisher.publish(new NewCustomerEvent(email));\r\n        }\r\n\r\n    }\r\n\r\nSee also:\r\n* https://dzone.com/articles/simpler-handling-of-asynchronous-transaction-bound\r\n* https://dzone.com/articles/transaction-synchronization-and-spring-application","title":"Creating a post commit when using transaction in Spring","body":"<p>Since Spring 4.2 it has been possible to define listeners for post commit events (or more generally transaction synchronization events e.g. rollbacks) using annotation based configuraton. This is based off event handling in <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#context-functionality-events\" rel=\"noreferrer\">core spring</a>. It is easier to test code using this approach since you avoid a direct dependency on TransactionSynchronizationManager, which will likely not be active in a unit test. You can easily test that your transactional service publishes an event and also that your listener performs the right action when you receive an event.</p>\n<p>So without further ado this is how to set it up:</p>\n<p>In this example we'll assume you have a <code>Customer</code> entity and a <code>CustomerRepository</code> (and ORM to go with it).</p>\n<p>First you need a new event type <code>NewCustomerEvent</code>:</p>\n<pre><code>// NewCustomerEvent.java\n// Just a regular pojo for the event\npublic class NewCustomerEvent {\n\n    public String email;\n\n    // constructor, setters and getters omitted\n}\n</code></pre>\n<p>Then you define a listener using <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/event/TransactionalEventListener.html\" rel=\"noreferrer\"><code>@TransactionalEventListener</code></a>. By default this will execute after a sucessful commit but this can be changed using the <code>phase</code> parameter:</p>\n<pre><code>// NewCustomerEventListener.java\n@Component\npublic class NewCustomerEventListener {\n\n    @TransactionalEventListener\n    public void handleNewCustomerEvent(NewCustomerEvent newCustomerEvent) {\n        // handle new customer event\n    }\n}\n</code></pre>\n<p>Finally you augment your transaction service with an <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/context/ApplicationEventPublisher.html\" rel=\"noreferrer\"><code>ApplicationEventPublisher</code></a> on which you call publish once all the transaction statements have been sent.</p>\n<pre><code>// CustomerRespositoryService.java\n@Service\npublic class CustomerRepositoryService {\n\n    @Inject\n    private ApplicationEventPublisher applicationEventPublisher;\n\n    @Inject\n    private CustomerRepository customerRepository;\n\n    @Transactional\n    public void createCustomer(String email) {\n        Customer customer = new Customer(email);\n        customerRespotory.save(customer);\n        applicationEventPublisher.publish(new NewCustomerEvent(email));\n    }\n\n}\n</code></pre>\n<p>See also:</p>\n<ul>\n<li><a href=\"https://dzone.com/articles/simpler-handling-of-asynchronous-transaction-bound\" rel=\"noreferrer\">https://dzone.com/articles/simpler-handling-of-asynchronous-transaction-bound</a></li>\n<li><a href=\"https://dzone.com/articles/transaction-synchronization-and-spring-application\" rel=\"noreferrer\">https://dzone.com/articles/transaction-synchronization-and-spring-application</a></li>\n</ul>\n"}],"owner":{"account_id":1693221,"reputation":2947,"user_id":1555190,"accept_rate":72,"display_name":"user1555190"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57089,"favorite_count":0,"down_vote_count":1,"up_vote_count":51,"accepted_answer_id":15026797,"answer_count":4,"score":50,"last_activity_date":1693943572,"creation_date":1361542470,"question_id":15026142,"body_markdown":"Due to certain reasons i have manually performed transaction commit and roll back using Spring PlatformTransactionManager, what i need to do is setup a hook so that a post commit action takes place after transaction has been committed. \r\n\r\nBy looking at:\r\n\r\n     void commit(TransactionStatus status) throws TransactionException;\r\n\r\nI cant see how i can determine a transaction was successful other than assumming it so if no expception are thrown.\r\n\r\nAnd i could use AOP as one option, but what about programmitcally doing it, maybe using  callback method?","title":"Creating a post commit when using transaction in Spring","body":"<p>Due to certain reasons i have manually performed transaction commit and roll back using Spring PlatformTransactionManager, what i need to do is setup a hook so that a post commit action takes place after transaction has been committed. </p>\n\n<p>By looking at:</p>\n\n<pre><code> void commit(TransactionStatus status) throws TransactionException;\n</code></pre>\n\n<p>I cant see how i can determine a transaction was successful other than assumming it so if no expception are thrown.</p>\n\n<p>And i could use AOP as one option, but what about programmitcally doing it, maybe using  callback method?</p>\n"},{"tags":["java","maven","spring-boot","intellij-idea","maven-compiler-plugin"],"answers":[{"tags":[],"owner":{"account_id":4118097,"reputation":5672,"user_id":3379182,"display_name":"Matteo Baldi"},"down_vote_count":3,"up_vote_count":125,"is_accepted":false,"score":122,"last_activity_date":1520241386,"creation_date":1520241386,"answer_id":49106905,"question_id":49105941,"body_markdown":"In your `pom.xml` file, simply remove the tag                        `&lt;release&gt;8&lt;/release&gt;` from your `maven-compiler-plugin` configuration:\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.7.0&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n            &lt;source&gt;1.8&lt;/source&gt;\r\n            &lt;target&gt;1.8&lt;/target&gt;\r\n            &lt;verbose&gt;true&lt;/verbose&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;","title":"Intellij maven project Fatal error compiling: invalid flag: --release","body":"<p>In your <code>pom.xml</code> file, simply remove the tag                        <code>&lt;release&gt;8&lt;/release&gt;</code> from your <code>maven-compiler-plugin</code> configuration:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.7.0&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;source&gt;1.8&lt;/source&gt;\n        &lt;target&gt;1.8&lt;/target&gt;\n        &lt;verbose&gt;true&lt;/verbose&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3191536,"reputation":1984,"user_id":2695666,"display_name":"gorjanz"},"down_vote_count":5,"up_vote_count":0,"is_accepted":false,"score":-5,"last_activity_date":1584720744,"creation_date":1555053350,"answer_id":55646376,"question_id":49105941,"body_markdown":"This configuration worked for me, for java 11. (IntelliJ version 2019.1)\r\njava.version is 11, declared in the properties part of the pom.xml. Maven version should be 3.6 or higher.\r\n\r\n    &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;fork&gt;false&lt;/fork&gt;\r\n                    &lt;source&gt;${java.version}&lt;/source&gt;\r\n                    &lt;target&gt;${java.version}&lt;/target&gt;\r\n                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n                    &lt;compilerArgs&gt;\r\n                        &lt;arg&gt;-parameters&lt;/arg&gt;\r\n                    &lt;/compilerArgs&gt;\r\n                    &lt;release&gt;${java.version}&lt;/release&gt;\r\n                    &lt;forceJavacCompilerUse&gt;true&lt;/forceJavacCompilerUse&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;!-- Replacing default-compile as it is treated specially by maven --&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;default-compile&lt;/id&gt;\r\n                        &lt;phase&gt;none&lt;/phase&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;!-- Replacing default-testCompile as it is treated specially by maven --&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;default-testCompile&lt;/id&gt;\r\n                        &lt;phase&gt;none&lt;/phase&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;java-compile&lt;/id&gt;\r\n                        &lt;phase&gt;compile&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;compile&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;java-test-compile&lt;/id&gt;\r\n                        &lt;phase&gt;test-compile&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;testCompile&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n        &lt;/plugin&gt;","title":"Intellij maven project Fatal error compiling: invalid flag: --release","body":"<p>This configuration worked for me, for java 11. (IntelliJ version 2019.1)\njava.version is 11, declared in the properties part of the pom.xml. Maven version should be 3.6 or higher.</p>\n\n<pre><code>&lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.8.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;fork&gt;false&lt;/fork&gt;\n                &lt;source&gt;${java.version}&lt;/source&gt;\n                &lt;target&gt;${java.version}&lt;/target&gt;\n                &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n                &lt;compilerArgs&gt;\n                    &lt;arg&gt;-parameters&lt;/arg&gt;\n                &lt;/compilerArgs&gt;\n                &lt;release&gt;${java.version}&lt;/release&gt;\n                &lt;forceJavacCompilerUse&gt;true&lt;/forceJavacCompilerUse&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;!-- Replacing default-compile as it is treated specially by maven --&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;default-compile&lt;/id&gt;\n                    &lt;phase&gt;none&lt;/phase&gt;\n                &lt;/execution&gt;\n                &lt;!-- Replacing default-testCompile as it is treated specially by maven --&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;default-testCompile&lt;/id&gt;\n                    &lt;phase&gt;none&lt;/phase&gt;\n                &lt;/execution&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;java-compile&lt;/id&gt;\n                    &lt;phase&gt;compile&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;compile&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;java-test-compile&lt;/id&gt;\n                    &lt;phase&gt;test-compile&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;testCompile&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n    &lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1765472,"reputation":1673,"user_id":1611445,"display_name":"Krishna Vedula"},"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1582674481,"creation_date":1582674481,"answer_id":60404811,"question_id":49105941,"body_markdown":"This has to do with the version of JDK running on your system. As per the documentation for maven-compiler-plugin, the release flag is supported since 1.9, and thus has to be commented/removed from the POM if you are using prior (1.8 and below) versions of JDK.\r\n\r\nCheck Maven documentation for release tag for maven-compiler-plugin [here][1]\r\n\r\n\r\n  [1]: https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#release","title":"Intellij maven project Fatal error compiling: invalid flag: --release","body":"<p>This has to do with the version of JDK running on your system. As per the documentation for maven-compiler-plugin, the release flag is supported since 1.9, and thus has to be commented/removed from the POM if you are using prior (1.8 and below) versions of JDK.</p>\n\n<p>Check Maven documentation for release tag for maven-compiler-plugin <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#release\" rel=\"noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":5669873,"reputation":1135,"user_id":4687703,"display_name":"izy"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1592638231,"creation_date":1592638231,"answer_id":62482927,"question_id":49105941,"body_markdown":"open terminal to check that Maven using correct version of Java\r\n\r\nrun: `mvn -v`\r\n\r\nIf you will see an old Java version, that might be the problem.\r\n\r\nBeing on Linux, I suggest removing Maven, e.g. using Fedora package manager `dnf remove maven` or check your PATH for maven. \r\n\r\nDownload one from here: https://maven.apache.org/download.cgi\r\n\r\nExtract downloaded to your home path, e.g. `~/maven`. \r\n\r\nAdd/Edit `~/maven/bin` to your PATH\r\n\r\nReapply .bash_profile (or re-login)\r\n\r\nRun `mvn -v`\r\n\r\nNow you should see a correct Java version in the output\r\n","title":"Intellij maven project Fatal error compiling: invalid flag: --release","body":"<p>open terminal to check that Maven using correct version of Java</p>\n\n<p>run: <code>mvn -v</code></p>\n\n<p>If you will see an old Java version, that might be the problem.</p>\n\n<p>Being on Linux, I suggest removing Maven, e.g. using Fedora package manager <code>dnf remove maven</code> or check your PATH for maven. </p>\n\n<p>Download one from here: <a href=\"https://maven.apache.org/download.cgi\" rel=\"noreferrer\">https://maven.apache.org/download.cgi</a></p>\n\n<p>Extract downloaded to your home path, e.g. <code>~/maven</code>. </p>\n\n<p>Add/Edit <code>~/maven/bin</code> to your PATH</p>\n\n<p>Reapply .bash_profile (or re-login)</p>\n\n<p>Run <code>mvn -v</code></p>\n\n<p>Now you should see a correct Java version in the output</p>\n"},{"tags":[],"owner":{"account_id":5063081,"reputation":1381,"user_id":4064011,"display_name":"Domenico"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1610698215,"creation_date":1610615248,"answer_id":65716110,"question_id":49105941,"body_markdown":"An alternative approach is to directly set the compiler flags inside your properties tag instead of using the `&lt;configuration&gt;` tag of the compiler plugin:\r\n\r\n    &lt;properties&gt;\r\n           &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\r\n           &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\r\n     &lt;!--  Use the release flag only if you are using Java 9+  --&gt;\r\n     &lt;!--  &lt;maven.compiler.release&gt;8&lt;/maven.compiler.release&gt;  --&gt;\r\n           &lt;!-- verbose is useful for debugging purposes --&gt;\r\n           &lt;maven.compiler.verbose&gt;true&lt;/maven.compiler.verbose&gt; \r\n    &lt;/properties&gt;\r\n\r\nAs stated in the official page:\r\n\r\n[https://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html][1]\r\n\r\n\r\n  [1]: https://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html","title":"Intellij maven project Fatal error compiling: invalid flag: --release","body":"<p>An alternative approach is to directly set the compiler flags inside your properties tag instead of using the <code>&lt;configuration&gt;</code> tag of the compiler plugin:</p>\n<pre><code>&lt;properties&gt;\n       &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\n       &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\n &lt;!--  Use the release flag only if you are using Java 9+  --&gt;\n &lt;!--  &lt;maven.compiler.release&gt;8&lt;/maven.compiler.release&gt;  --&gt;\n       &lt;!-- verbose is useful for debugging purposes --&gt;\n       &lt;maven.compiler.verbose&gt;true&lt;/maven.compiler.verbose&gt; \n&lt;/properties&gt;\n</code></pre>\n<p>As stated in the official page:</p>\n<p><a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html</a></p>\n"},{"tags":[],"owner":{"account_id":8691881,"reputation":423,"user_id":6504597,"display_name":"Raulster24"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1622629387,"creation_date":1622629387,"answer_id":67803282,"question_id":49105941,"body_markdown":"I faced this problem too, check your JAVA_HOME environment variable.\r\nI was setting the value of release to 11 as I am using JAVA 11. \r\nMy System JAVA_HOME was set for java 8, After adding the JAVA_HOME user environment variable to the java 11 path this got resolved.","title":"Intellij maven project Fatal error compiling: invalid flag: --release","body":"<p>I faced this problem too, check your JAVA_HOME environment variable.\nI was setting the value of release to 11 as I am using JAVA 11.\nMy System JAVA_HOME was set for java 8, After adding the JAVA_HOME user environment variable to the java 11 path this got resolved.</p>\n"},{"tags":[],"owner":{"account_id":4847195,"reputation":81,"user_id":3910521,"display_name":"Nitish Sahu"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1642110256,"creation_date":1642110256,"answer_id":70703487,"question_id":49105941,"body_markdown":"This is mostly because of the java version mismatch. Managing more than one java version for projects can be painful.\r\n\r\nI am working simultaneously on projects asking for different versions of java and have been using [jenv](https://www.jenv.be/) for switching the java versions.\r\n\r\n[More details here](https://github.com/jenv/jenv)","title":"Intellij maven project Fatal error compiling: invalid flag: --release","body":"<p>This is mostly because of the java version mismatch. Managing more than one java version for projects can be painful.</p>\n<p>I am working simultaneously on projects asking for different versions of java and have been using <a href=\"https://www.jenv.be/\" rel=\"nofollow noreferrer\">jenv</a> for switching the java versions.</p>\n<p><a href=\"https://github.com/jenv/jenv\" rel=\"nofollow noreferrer\">More details here</a></p>\n"},{"tags":[],"owner":{"account_id":20169546,"reputation":1,"user_id":14792673,"display_name":"Sreehari suresh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659587601,"creation_date":1659587452,"answer_id":73230405,"question_id":49105941,"body_markdown":"    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:testCompile (default-testCompile) on project selenium-for-beginners: Execution default-testCompile of goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:testCompile failed: multiple points -&gt; [Help 1]\r\n    [ERROR]\r\n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR]\r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException\r\n\r\n\r\n\r\n\r\nWhen trying to do a Selenium maven beginner project if you are running into this trouble/issue. Please try to change the maven plugin in the pom.xml file. Use Plugin for &quot;Compile Using the --release javac option (JDK 9+)&quot;. This should work.","title":"Intellij maven project Fatal error compiling: invalid flag: --release","body":"<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:testCompile (default-testCompile) on project selenium-for-beginners: Execution default-testCompile of goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:testCompile failed: multiple points -&gt; [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException\n</code></pre>\n<p>When trying to do a Selenium maven beginner project if you are running into this trouble/issue. Please try to change the maven plugin in the pom.xml file. Use Plugin for &quot;Compile Using the --release javac option (JDK 9+)&quot;. This should work.</p>\n"},{"tags":[],"owner":{"account_id":6833305,"reputation":3084,"user_id":5256337,"display_name":"Lova Chittumuri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672985514,"creation_date":1672985514,"answer_id":75027555,"question_id":49105941,"body_markdown":"Set the $MAVEN_HOME and JAVA_HOME in environment Properties \r\n\r\n 1. Check the maven version ( C:\\&gt;mvn -version )\r\n \r\n 2. Check the Java Version\r\n    ( C:\\&gt;java -version )\r\n\r\nAdd the below code snip in pom.xml file and change the version number of maven\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.7.0&lt;/version&gt; // replace the maven version number \r\n        &lt;configuration&gt;\r\n            &lt;source&gt;1.8&lt;/source&gt;\r\n            &lt;target&gt;1.8&lt;/target&gt;\r\n            &lt;verbose&gt;true&lt;/verbose&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\n\r\n","title":"Intellij maven project Fatal error compiling: invalid flag: --release","body":"<p>Set the $MAVEN_HOME and JAVA_HOME in environment Properties</p>\n<ol>\n<li><p>Check the maven version ( C:&gt;mvn -version )</p>\n</li>\n<li><p>Check the Java Version\n( C:&gt;java -version )</p>\n</li>\n</ol>\n<p>Add the below code snip in pom.xml file and change the version number of maven</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.7.0&lt;/version&gt; // replace the maven version number \n    &lt;configuration&gt;\n        &lt;source&gt;1.8&lt;/source&gt;\n        &lt;target&gt;1.8&lt;/target&gt;\n        &lt;verbose&gt;true&lt;/verbose&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13196942,"reputation":85,"user_id":9531432,"display_name":"Cyro"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1674516470,"creation_date":1674516470,"answer_id":75216095,"question_id":49105941,"body_markdown":"I was getting this error with Java v8, then resolved the issue by updating to Java v11, updating JAVA_HOME, and updating my IntelliJ SDK settings to use the new jdk.","title":"Intellij maven project Fatal error compiling: invalid flag: --release","body":"<p>I was getting this error with Java v8, then resolved the issue by updating to Java v11, updating JAVA_HOME, and updating my IntelliJ SDK settings to use the new jdk.</p>\n"},{"tags":[],"owner":{"account_id":26604654,"reputation":103,"user_id":20225739,"display_name":"Theri Muthu Selvam"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1691999207,"creation_date":1691999207,"answer_id":76897156,"question_id":49105941,"body_markdown":"Use `mvn -v` in cmd to find the java version.\r\n\r\nIn your case, you have declared java 8 in pom.xml, use the same in the JAVA_HOME of environment variables, this will resolve the issue.","title":"Intellij maven project Fatal error compiling: invalid flag: --release","body":"<p>Use <code>mvn -v</code> in cmd to find the java version.</p>\n<p>In your case, you have declared java 8 in pom.xml, use the same in the JAVA_HOME of environment variables, this will resolve the issue.</p>\n"},{"tags":[],"owner":{"account_id":15929038,"reputation":1,"user_id":11493927,"display_name":"Hugo Yip"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693943511,"creation_date":1693899147,"answer_id":77042534,"question_id":49105941,"body_markdown":"Changing `3.1.3` to `2.7.10` should fix it:\r\n\r\n```xml\r\n&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n&lt;artifactId&gt;spring-rest&lt;/artifactId&gt;\r\n&lt;version&gt;3.1.3.RELEASE&lt;/version&gt;\r\n&lt;packaging&gt;war&lt;/packaging&gt;\r\n```","title":"Intellij maven project Fatal error compiling: invalid flag: --release","body":"<p>Changing <code>3.1.3</code> to <code>2.7.10</code> should fix it:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;groupId&gt;com.example&lt;/groupId&gt;\n&lt;artifactId&gt;spring-rest&lt;/artifactId&gt;\n&lt;version&gt;3.1.3.RELEASE&lt;/version&gt;\n&lt;packaging&gt;war&lt;/packaging&gt;\n</code></pre>\n"}],"owner":{"account_id":11557107,"reputation":1507,"user_id":8467973,"display_name":"Aminul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":169918,"favorite_count":0,"down_vote_count":1,"up_vote_count":127,"answer_count":12,"score":126,"last_activity_date":1693943511,"creation_date":1520237354,"question_id":49105941,"body_markdown":"I am trying to start with Spring-boot, Maven in Intellij\r\nPlease help me I am getting the error:\r\n\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.7.0:compile (default-compile) on project spring-rest: Fatal error compiling: invalid flag: --release -&gt; [Help 1]\r\n    [ERROR] \r\n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR] \r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n    Process finished with exit code 1\r\n\r\n**My pom.xml is:**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;project\r\n       xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n                xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n           &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n       \r\n           &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n           &lt;artifactId&gt;spring-rest&lt;/artifactId&gt;\r\n           &lt;version&gt;3.1.3.RELEASE&lt;/version&gt;\r\n           &lt;packaging&gt;war&lt;/packaging&gt;\r\n       \r\n           &lt;name&gt;spring-rest&lt;/name&gt;\r\n           &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n       \r\n           &lt;parent&gt;\r\n               &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n               &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n               &lt;version&gt;2.0.0.RELEASE&lt;/version&gt;\r\n               &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n           &lt;/parent&gt;\r\n       \r\n           &lt;properties&gt;\r\n               &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n               &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n               &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n           &lt;/properties&gt;\r\n       \r\n           &lt;dependencies&gt;\r\n       \r\n               &lt;dependency&gt;\r\n                   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                   &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n                   &lt;version&gt;2.0.0.RELEASE&lt;/version&gt;\r\n               &lt;/dependency&gt;\r\n       \r\n             &lt;dependency&gt;\r\n               &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n               &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n             &lt;/dependency&gt;\r\n       \r\n               &lt;dependency&gt;\r\n                   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                   &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n               &lt;/dependency&gt;\r\n               &lt;dependency&gt;\r\n                   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                   &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n               &lt;/dependency&gt;\r\n       \r\n               &lt;dependency&gt;\r\n                   &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\r\n                   &lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\r\n                   &lt;version&gt;RELEASE&lt;/version&gt;\r\n               &lt;/dependency&gt;\r\n       \r\n       \r\n               &lt;dependency&gt;\r\n                   &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n                   &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n                   &lt;scope&gt;runtime&lt;/scope&gt;\r\n               &lt;/dependency&gt;\r\n               &lt;dependency&gt;\r\n                   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                   &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n                   &lt;scope&gt;test&lt;/scope&gt;\r\n               &lt;/dependency&gt;\r\n           &lt;/dependencies&gt;\r\n       \r\n           &lt;build&gt;\r\n               &lt;plugins&gt;\r\n                   &lt;plugin&gt;\r\n                       &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                       &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                   &lt;/plugin&gt;\r\n       \r\n                   &lt;plugin&gt;\r\n                       &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                       &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                       &lt;version&gt;3.7.0&lt;/version&gt;\r\n                       &lt;configuration&gt;\r\n                           &lt;source&gt;1.8&lt;/source&gt;\r\n                           &lt;target&gt;1.8&lt;/target&gt;\r\n                           &lt;release&gt;8&lt;/release&gt;\r\n                           &lt;verbose&gt;true&lt;/verbose&gt;\r\n                       &lt;/configuration&gt;\r\n                   &lt;/plugin&gt;\r\n               &lt;/plugins&gt;\r\n           &lt;/build&gt;\r\n       \r\n       &lt;/project&gt;\r\n\r\n","title":"Intellij maven project Fatal error compiling: invalid flag: --release","body":"<p>I am trying to start with Spring-boot, Maven in Intellij\nPlease help me I am getting the error:</p>\n\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.7.0:compile (default-compile) on project spring-rest: Fatal error compiling: invalid flag: --release -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\nProcess finished with exit code 1\n</code></pre>\n\n<p><strong>My pom.xml is:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt; &lt;project\n   xmlns=\"http://maven.apache.org/POM/4.0.0\"\n   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n            xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n       &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n       &lt;groupId&gt;com.example&lt;/groupId&gt;\n       &lt;artifactId&gt;spring-rest&lt;/artifactId&gt;\n       &lt;version&gt;3.1.3.RELEASE&lt;/version&gt;\n       &lt;packaging&gt;war&lt;/packaging&gt;\n\n       &lt;name&gt;spring-rest&lt;/name&gt;\n       &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n       &lt;parent&gt;\n           &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n           &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n           &lt;version&gt;2.0.0.RELEASE&lt;/version&gt;\n           &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n       &lt;/parent&gt;\n\n       &lt;properties&gt;\n           &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n           &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n           &lt;java.version&gt;1.8&lt;/java.version&gt;\n       &lt;/properties&gt;\n\n       &lt;dependencies&gt;\n\n           &lt;dependency&gt;\n               &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n               &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n               &lt;version&gt;2.0.0.RELEASE&lt;/version&gt;\n           &lt;/dependency&gt;\n\n         &lt;dependency&gt;\n           &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n           &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n         &lt;/dependency&gt;\n\n           &lt;dependency&gt;\n               &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n               &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n               &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n           &lt;/dependency&gt;\n\n           &lt;dependency&gt;\n               &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\n               &lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\n               &lt;version&gt;RELEASE&lt;/version&gt;\n           &lt;/dependency&gt;\n\n\n           &lt;dependency&gt;\n               &lt;groupId&gt;mysql&lt;/groupId&gt;\n               &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n               &lt;scope&gt;runtime&lt;/scope&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n               &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n               &lt;scope&gt;test&lt;/scope&gt;\n           &lt;/dependency&gt;\n       &lt;/dependencies&gt;\n\n       &lt;build&gt;\n           &lt;plugins&gt;\n               &lt;plugin&gt;\n                   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                   &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n               &lt;/plugin&gt;\n\n               &lt;plugin&gt;\n                   &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                   &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                   &lt;version&gt;3.7.0&lt;/version&gt;\n                   &lt;configuration&gt;\n                       &lt;source&gt;1.8&lt;/source&gt;\n                       &lt;target&gt;1.8&lt;/target&gt;\n                       &lt;release&gt;8&lt;/release&gt;\n                       &lt;verbose&gt;true&lt;/verbose&gt;\n                   &lt;/configuration&gt;\n               &lt;/plugin&gt;\n           &lt;/plugins&gt;\n       &lt;/build&gt;\n\n   &lt;/project&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","model-view-controller"],"comments":[{"owner":{"account_id":2019478,"reputation":4894,"user_id":1806005,"accept_rate":56,"display_name":"hi_my_name_is"},"score":0,"creation_date":1439900482,"post_id":32072255,"comment_id":52041018,"body_markdown":"use @Async method which could wrap everything you want to run, it will be processed by different thread","body":"use @Async method which could wrap everything you want to run, it will be processed by different thread"},{"owner":{"account_id":3785624,"reputation":7670,"user_id":3143670,"accept_rate":50,"display_name":"Neeraj Jain"},"score":0,"creation_date":1439900790,"post_id":32072255,"comment_id":52041221,"body_markdown":"[This might help](http://stackoverflow.com/a/17176660/3143670)","body":"<a href=\"http://stackoverflow.com/a/17176660/3143670\">This might help</a>"}],"answers":[{"tags":[],"owner":{"account_id":4342327,"reputation":145474,"user_id":3545273,"accept_rate":100,"display_name":"Serge Ballesta"},"down_vote_count":1,"up_vote_count":12,"is_accepted":true,"score":11,"last_activity_date":1439904327,"creation_date":1439903143,"answer_id":32073300,"question_id":32072255,"body_markdown":"You can of course do processing after sending the response. The more general way would be to use the `afterCompletion` method of a `HandlerInterceptor`. By construction, it will be executed after the response have been sent to client, but it forces you to split you logic in 2 components the *before* part in controller, and the *after* part in the interceptor.\r\n\r\nThe alternative way is to forget Spring MVC machinery and manually commit the response in the controller:\r\n\r\n    @RequestMapping(value = Connectors.CONNECTOR_HEARTBEAT, method = RequestMethod.POST)\r\n    public void doSomething(@RequestBody List&lt;Message&gt; messages, HttpServletResponse response) {\r\n        int code = (messages!=null &amp;&amp; !messages.isEmpty()) ? HttpServletResponse.SC_OK\r\n                : HttpServletResponse.SC_NOT_FOUND;\r\n        if (code != HttpServletResponse.SC_OK) {\r\n            response.sendError(code, res);\r\n            return;\r\n        }\r\n        java.io.PrintWriter wr = response.getWriter();\r\n        response.setStatus(code);\r\n        wr.print(res);\r\n        wr.flush();\r\n        wr.close();\r\n    \r\n        // Now it it time to do the long processing\r\n        ...\r\n    }\r\n\r\nNote the void return code to notify Spring that the response have been committed in the controller.\r\n\r\nAs a side advantage, the processing still occurs in the same thread, so you have full access to session scoped attributes or any other thread local variables used by Spring MVC or Spring Security...","title":"How to send response before actions in spring mvc","body":"<p>You can of course do processing after sending the response. The more general way would be to use the <code>afterCompletion</code> method of a <code>HandlerInterceptor</code>. By construction, it will be executed after the response have been sent to client, but it forces you to split you logic in 2 components the <em>before</em> part in controller, and the <em>after</em> part in the interceptor.</p>\n\n<p>The alternative way is to forget Spring MVC machinery and manually commit the response in the controller:</p>\n\n<pre><code>@RequestMapping(value = Connectors.CONNECTOR_HEARTBEAT, method = RequestMethod.POST)\npublic void doSomething(@RequestBody List&lt;Message&gt; messages, HttpServletResponse response) {\n    int code = (messages!=null &amp;&amp; !messages.isEmpty()) ? HttpServletResponse.SC_OK\n            : HttpServletResponse.SC_NOT_FOUND;\n    if (code != HttpServletResponse.SC_OK) {\n        response.sendError(code, res);\n        return;\n    }\n    java.io.PrintWriter wr = response.getWriter();\n    response.setStatus(code);\n    wr.print(res);\n    wr.flush();\n    wr.close();\n\n    // Now it it time to do the long processing\n    ...\n}\n</code></pre>\n\n<p>Note the void return code to notify Spring that the response have been committed in the controller.</p>\n\n<p>As a side advantage, the processing still occurs in the same thread, so you have full access to session scoped attributes or any other thread local variables used by Spring MVC or Spring Security...</p>\n"},{"tags":[],"owner":{"account_id":2080660,"reputation":6691,"user_id":1852714,"accept_rate":8,"display_name":"Angelo Immediata"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1439903561,"creation_date":1439903561,"answer_id":32073480,"question_id":32072255,"body_markdown":"I guess you mau use the async mechanism of spring\r\nAsync methods have been introduced in servlet 3.0 and Spring offers some support to them\r\nBasically... you make a request; the request is handled by the server and then, in background, a new thread manages the requesta data\r\nHere a useful link (at least i hope :) ) http://spring.io/blog/2012/05/10/spring-mvc-3-2-preview-making-a-controller-method-asynchronous/","title":"How to send response before actions in spring mvc","body":"<p>I guess you mau use the async mechanism of spring\nAsync methods have been introduced in servlet 3.0 and Spring offers some support to them\nBasically... you make a request; the request is handled by the server and then, in background, a new thread manages the requesta data\nHere a useful link (at least i hope :) ) <a href=\"http://spring.io/blog/2012/05/10/spring-mvc-3-2-preview-making-a-controller-method-asynchronous/\" rel=\"nofollow\">http://spring.io/blog/2012/05/10/spring-mvc-3-2-preview-making-a-controller-method-asynchronous/</a></p>\n"},{"tags":[],"owner":{"account_id":195966,"reputation":15172,"user_id":439171,"accept_rate":75,"display_name":"Italo Borssatto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522402249,"creation_date":1522401342,"answer_id":49571654,"question_id":32072255,"body_markdown":"You should use the `HandlerInterceptor`. But the code get a little bit more complex than expected. So, here&#39;s a code suggestion to make it simpler by putting the whole solution in a single class:\r\n\r\n    @RequestMapping(value = Connectors.CONNECTOR_HEARTBEAT, method = RequestMethod.POST)\r\n    public ResponseEntity&lt;String&gt; doSomething(@RequestBody List&lt;Message&gt; messages) {\r\n        HttpStatus code = (messages!=null &amp;&amp; !messages.isEmpty()) ? HttpStatus.OK\r\n                : HttpStatus.NOT_FOUND;\r\n\r\n\t\tresult.set(res); // Save the object to be used after response\r\n\r\n        return new ResponseEntity&lt;String&gt;(res, code);\r\n    }\r\n\r\n\tprivate static final ThreadLocal&lt;String&gt; result = new ThreadLocal&lt;String&gt;();\r\n\r\n\t@Bean\r\n\tpublic HandlerInterceptor interceptor() {\r\n\t\treturn new HandlerInterceptor() {\r\n\t\t\t@Override\r\n\t\t\tpublic void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {\r\n\t\t\t\t// Get the saved object and clean for the next request\r\n\t\t\t\tString res = result.get();\r\n\t\t\t\tresult.set(null);\r\n\r\n\t\t\t\t// TODO Your code to be executed after response.\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n","title":"How to send response before actions in spring mvc","body":"<p>You should use the <code>HandlerInterceptor</code>. But the code get a little bit more complex than expected. So, here's a code suggestion to make it simpler by putting the whole solution in a single class:</p>\n\n<pre><code>@RequestMapping(value = Connectors.CONNECTOR_HEARTBEAT, method = RequestMethod.POST)\npublic ResponseEntity&lt;String&gt; doSomething(@RequestBody List&lt;Message&gt; messages) {\n    HttpStatus code = (messages!=null &amp;&amp; !messages.isEmpty()) ? HttpStatus.OK\n            : HttpStatus.NOT_FOUND;\n\n    result.set(res); // Save the object to be used after response\n\n    return new ResponseEntity&lt;String&gt;(res, code);\n}\n\nprivate static final ThreadLocal&lt;String&gt; result = new ThreadLocal&lt;String&gt;();\n\n@Bean\npublic HandlerInterceptor interceptor() {\n    return new HandlerInterceptor() {\n        @Override\n        public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {\n            // Get the saved object and clean for the next request\n            String res = result.get();\n            result.set(null);\n\n            // TODO Your code to be executed after response.\n        }\n    };\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7573114,"reputation":308,"user_id":8342681,"display_name":"Javier Solis Guzman"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1693943040,"creation_date":1548363561,"answer_id":54355216,"question_id":32072255,"body_markdown":"You can use @Async, only need to pass your code to other bean (you could use @Service, @Component), and inject to your controller.\r\n\r\n\r\nThis is the method of your controller\r\n\r\n\r\n    @RequestMapping(value = Connectors.CONNECTOR_HEARTBEAT, method = \r\n          RequestMethod.POST)\r\n    public ResponseEntity&lt;String&gt; doSomething(@RequestBody List&lt;Message&gt; \r\n          messages) {\r\n        otherService.do();\r\n        HttpStatus code = (messages!=null &amp;&amp; !messages.isEmpty()) ? HttpStatus.OK\r\n            : HttpStatus.NOT_FOUND;\r\n         return new ResponseEntity&lt;String&gt;(res, code);\r\n   \r\n    }\r\n\r\n\r\nAnd this is the other bean\r\n\r\n    @Service\r\n    class OtherService{\r\n\r\n        @Async \r\n        void do(){\r\n           //your code\r\n        }\r\n    }\r\n\r\n","title":"How to send response before actions in spring mvc","body":"<p>You can use @Async, only need to pass your code to other bean (you could use @Service, @Component), and inject to your controller.</p>\n<p>This is the method of your controller</p>\n<pre><code>@RequestMapping(value = Connectors.CONNECTOR_HEARTBEAT, method = \n      RequestMethod.POST)\npublic ResponseEntity&lt;String&gt; doSomething(@RequestBody List&lt;Message&gt; \n      messages) {\n    otherService.do();\n    HttpStatus code = (messages!=null &amp;&amp; !messages.isEmpty()) ? HttpStatus.OK\n        : HttpStatus.NOT_FOUND;\n     return new ResponseEntity&lt;String&gt;(res, code);\n\n}\n</code></pre>\n<p>And this is the other bean</p>\n<pre><code>@Service\nclass OtherService{\n\n    @Async \n    void do(){\n       //your code\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":238581,"reputation":4917,"user_id":507564,"accept_rate":63,"display_name":"orshachar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13306,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":32073300,"answer_count":4,"score":8,"last_activity_date":1693943040,"creation_date":1439900348,"question_id":32072255,"body_markdown":"Say that my spring controller function receives a large amount of data.\r\nI want to return 200 OK, given that the data is structured right, and **after that** I want to perform the processing, which might take a while.\r\n\r\n\r\nTo my understanding the only way to send response is by **return** command. But I don&#39;t want to end the function on response send. \r\n\r\nAre there other ways to send response to client at the middle of the function?\r\n\r\nCreating a new thread run is obvious but other languages (JS) let you handle it more elegantly.\r\n\r\n\r\n\t@RequestMapping(value = Connectors.CONNECTOR_HEARTBEAT, method = RequestMethod.POST)\r\n\tpublic ResponseEntity&lt;String&gt; doSomething(@RequestBody List&lt;Message&gt; messages) {\r\n\t\tHttpStatus code = (messages!=null &amp;&amp; !messages.isEmpty()) ? HttpStatus.OK\r\n\t\t\t\t: HttpStatus.NOT_FOUND;\r\n\t\treturn new ResponseEntity&lt;String&gt;(res, code);\r\n       // how do I add code here??\r\n\t}","title":"How to send response before actions in spring mvc","body":"<p>Say that my spring controller function receives a large amount of data.\nI want to return 200 OK, given that the data is structured right, and <strong>after that</strong> I want to perform the processing, which might take a while.</p>\n\n<p>To my understanding the only way to send response is by <strong>return</strong> command. But I don't want to end the function on response send. </p>\n\n<p>Are there other ways to send response to client at the middle of the function?</p>\n\n<p>Creating a new thread run is obvious but other languages (JS) let you handle it more elegantly.</p>\n\n<pre><code>@RequestMapping(value = Connectors.CONNECTOR_HEARTBEAT, method = RequestMethod.POST)\npublic ResponseEntity&lt;String&gt; doSomething(@RequestBody List&lt;Message&gt; messages) {\n    HttpStatus code = (messages!=null &amp;&amp; !messages.isEmpty()) ? HttpStatus.OK\n            : HttpStatus.NOT_FOUND;\n    return new ResponseEntity&lt;String&gt;(res, code);\n   // how do I add code here??\n}\n</code></pre>\n"},{"tags":["java","performance"],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693913846,"creation_date":1693913135,"answer_id":77044102,"question_id":77044014,"body_markdown":"Boxing constant `boolean`s (like the literals `true` and `false`) does not create arbitrarily many new objects. The [Java Language Specification][1] says:\r\n\r\n&gt; If the value p being boxed is the result of evaluating a constant expression (&#167;15.29) of type `boolean`, [...], and the result is `true`, `false`, [...], then let `a` and `b` be the results of any two boxing conversions of `p`. It is always the case that `a == b`.\r\n\r\nIf it is not a constant boolean expression (e.g. `someString.length() == 5`), the language specification doesn&#39;t guarantee boxing to produce the same object, but I think any reasonable implementation would implement boolean boxing as calling [`Boolean.valueof(boolean)`][2], which does not create arbitrarily many new `Boolean` objects. It just returns the static final fields `Boolean.TRUE` and `Boolean.FALSE`. Of course, new `Boolean` objects will be created when the `TRUE` and `FALSE` fields are initialised, but no other `Boolean` objects will be created if you only use `Boolean.valueOf`.\r\n\r\n&gt; Returns a `Boolean` instance representing the specified boolean value. If the specified boolean value is `true`, this method returns `Boolean.TRUE`; if it is `false`, this method returns `Boolean.FALSE`.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-5.html#jls-5.1.7\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Boolean.html#valueOf(boolean)","title":"When a boolean or int are placed in a java Map that contains Objects, does emplacing them actually create a new Object?","body":"<p>Boxing constant <code>boolean</code>s (like the literals <code>true</code> and <code>false</code>) does not create arbitrarily many new objects. The <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-5.html#jls-5.1.7\" rel=\"nofollow noreferrer\">Java Language Specification</a> says:</p>\n<blockquote>\n<p>If the value p being boxed is the result of evaluating a constant expression (§15.29) of type <code>boolean</code>, [...], and the result is <code>true</code>, <code>false</code>, [...], then let <code>a</code> and <code>b</code> be the results of any two boxing conversions of <code>p</code>. It is always the case that <code>a == b</code>.</p>\n</blockquote>\n<p>If it is not a constant boolean expression (e.g. <code>someString.length() == 5</code>), the language specification doesn't guarantee boxing to produce the same object, but I think any reasonable implementation would implement boolean boxing as calling <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Boolean.html#valueOf(boolean)\" rel=\"nofollow noreferrer\"><code>Boolean.valueof(boolean)</code></a>, which does not create arbitrarily many new <code>Boolean</code> objects. It just returns the static final fields <code>Boolean.TRUE</code> and <code>Boolean.FALSE</code>. Of course, new <code>Boolean</code> objects will be created when the <code>TRUE</code> and <code>FALSE</code> fields are initialised, but no other <code>Boolean</code> objects will be created if you only use <code>Boolean.valueOf</code>.</p>\n<blockquote>\n<p>Returns a <code>Boolean</code> instance representing the specified boolean value. If the specified boolean value is <code>true</code>, this method returns <code>Boolean.TRUE</code>; if it is <code>false</code>, this method returns <code>Boolean.FALSE</code>.</p>\n</blockquote>\n"}],"owner":{"account_id":300331,"reputation":50767,"user_id":607407,"accept_rate":71,"display_name":"Tom&#225;š Zato"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77044102,"answer_count":1,"score":1,"last_activity_date":1693942703,"creation_date":1693912205,"question_id":77044014,"body_markdown":"Since in Java, generics usually operate on `Object` under the hood, I was curious if emplacing such values incurs more overhead than placing an already existing object.\r\n\r\nConsider having a `Map&lt;String, Object&gt;` that can contain arbitrary meta-information. You want to put a flag kinda entry there - if it is present, the flag is enabled.\r\n\r\nSo you have something like this:\r\n\r\n```\r\nstatic final String MY_FLAG_NAME = &quot;name&quot;;\r\nMap&lt;String, Object&gt; myMap;\r\n```\r\n\r\nNow I wonder if there is a difference between these three implementations of setting the flat:\r\n\r\n 1. `myMap.put(MY_FLAG_NAME, true)` (`false` to disable)\r\n 2. `myMap.put(MY_FLAG_NAME, null)` (we can use `containsKey`, but this looks dirty to me)\r\n 3. `myMap.put(MY_FLAG_NAME, MY_FLAG_NAME)` (string is already allocated, and we can use `&quot;&quot;` for disable)\r\n\r\nMy question here is if this will force at some point some kind of `new Boolean()` under the hood, or if it does not matter whether I put a string or a boolean. I never really got to understand how precisely Java handles the `boolean`/`Boolean` difference in generics, the same for other primitive types.\r\n\r\nThis code would be called a lot, but I don&#39;t have enough Java knowledge to make a trustworthy performance test.\r\n","title":"When a boolean or int are placed in a java Map that contains Objects, does emplacing them actually create a new Object?","body":"<p>Since in Java, generics usually operate on <code>Object</code> under the hood, I was curious if emplacing such values incurs more overhead than placing an already existing object.</p>\n<p>Consider having a <code>Map&lt;String, Object&gt;</code> that can contain arbitrary meta-information. You want to put a flag kinda entry there - if it is present, the flag is enabled.</p>\n<p>So you have something like this:</p>\n<pre><code>static final String MY_FLAG_NAME = &quot;name&quot;;\nMap&lt;String, Object&gt; myMap;\n</code></pre>\n<p>Now I wonder if there is a difference between these three implementations of setting the flat:</p>\n<ol>\n<li><code>myMap.put(MY_FLAG_NAME, true)</code> (<code>false</code> to disable)</li>\n<li><code>myMap.put(MY_FLAG_NAME, null)</code> (we can use <code>containsKey</code>, but this looks dirty to me)</li>\n<li><code>myMap.put(MY_FLAG_NAME, MY_FLAG_NAME)</code> (string is already allocated, and we can use <code>&quot;&quot;</code> for disable)</li>\n</ol>\n<p>My question here is if this will force at some point some kind of <code>new Boolean()</code> under the hood, or if it does not matter whether I put a string or a boolean. I never really got to understand how precisely Java handles the <code>boolean</code>/<code>Boolean</code> difference in generics, the same for other primitive types.</p>\n<p>This code would be called a lot, but I don't have enough Java knowledge to make a trustworthy performance test.</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":5,"creation_date":1693942118,"post_id":77047217,"comment_id":135825408,"body_markdown":"So is there an image called `richDadPoorDad.jpeg` in the same package as the `CardController` class at runtime?","body":"So is there an image called <code>richDadPoorDad.jpeg</code> in the same package as the <code>CardController</code> class at runtime?"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1693944511,"post_id":77047217,"comment_id":135825808,"body_markdown":"Unrelated to your issue, but this color specification `rgba (0,0,0,0,,1)` is syntactically wrong.  See the [CSS reference](https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/doc-files/cssref.html#typecolor) for valid color styles.","body":"Unrelated to your issue, but this color specification <code>rgba (0,0,0,0,,1)</code> is syntactically wrong.  See the <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/doc-files/cssref.html#typecolor\" rel=\"nofollow noreferrer\">CSS reference</a> for valid color styles."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1693947547,"post_id":77047217,"comment_id":135826250,"body_markdown":"I would assume that `Book` instances are &quot;dynamic&quot;. That is to say, books are loaded from an external source, such as an application database or a web API. If that&#39;s the case, then it does not make sense for the book&#39;s (cover?) image to be a _resource_, because you can&#39;t add resources at run-time. You most likely should simply be using `new Image(book.getImageSrc())`, where the &quot;image source&quot; string is a file or http(s) URI.","body":"I would assume that <code>Book</code> instances are &quot;dynamic&quot;. That is to say, books are loaded from an external source, such as an application database or a web API. If that&#39;s the case, then it does not make sense for the book&#39;s (cover?) image to be a <i>resource</i>, because you can&#39;t add resources at run-time. You most likely should simply be using <code>new Image(book.getImageSrc())</code>, where the &quot;image source&quot; string is a file or http(s) URI."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":5,"creation_date":1693947953,"post_id":77047217,"comment_id":135826301,"body_markdown":"Otherwise, this is probably a duplicate of [How do I determine the correct path for FXML files, CSS files, Images, and other resources needed by my JavaFX Application?](https://stackoverflow.com/q/61531317/6395627).","body":"Otherwise, this is probably a duplicate of <a href=\"https://stackoverflow.com/q/61531317/6395627\">How do I determine the correct path for FXML files, CSS files, Images, and other resources needed by my JavaFX Application?</a>."}],"owner":{"account_id":28304862,"reputation":57,"user_id":21643028,"display_name":"MsLaus"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693942188,"creation_date":1693941576,"question_id":77047217,"body_markdown":"This is one of my first JavaFX Project and I have a problem. in the class CardController, the &quot;getClass().getResourceAsStream(book.getImageSrc())&quot; returns null and i do not know why.\r\n\r\n```\r\npublic class CardController {\r\n\r\n    @FXML\r\n    private HBox box;\r\n\r\n    @FXML\r\n    private Label authorName;\r\n\r\n    @FXML\r\n    private Label bookName;\r\n\r\n    @FXML\r\n    private ImageView bookImage;\r\n    private String[] colors = {&quot;B9E5FF&quot;, &quot;BDB2FE&quot;, &quot;FB9AA8&quot;, &quot;FF5056&quot;};\r\n    public void setData(Book book){\r\n\r\n        Image image = new Image(getClass().getResourceAsStream(book.getImageSrc())); //here is where i have the problem\r\n\r\n        bookImage.setImage(image);\r\n        bookName.setText(book.getName());\r\n        authorName.setText(book.getAuthor());\r\n\r\n        box.setStyle(&quot;fx-background-color: #&quot;+ colors[(int)(Math.random()*colors.length)] +&quot;;&quot; +\r\n                &quot; -fx-background-radius: 15;&quot; +\r\n                &quot;-fx-effect: dropShadow(three-pass-box, rgba (0,0,0,0,,1), 10, 0, 0, 10);&quot;);\r\n    }\r\n\r\n}\r\n```\r\n\r\n```\r\npublic class Book {\r\n\r\n    private String name;\r\n    private String ImageSrc;\r\n    private String author;\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public void setImageSrc(String imageSrc) {\r\n        ImageSrc = imageSrc;\r\n    }\r\n\r\n    public void setAuthor(String author) {\r\n        this.author = author;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public String getImageSrc() {\r\n        return ImageSrc;\r\n    }\r\n\r\n    public String getAuthor() {\r\n        return author;\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class HelloController implements Initializable {\r\n\r\n    @FXML\r\n    private HBox cardLayout;\r\n\r\n    @FXML\r\n    private GridPane bookContainer;\r\n    private List&lt;Book&gt; recentlyAdded;\r\n    private List&lt;Book&gt; recommended;\r\n\r\n    @Override\r\n    public void initialize(URL url, ResourceBundle resourceBundle) {\r\n\r\n        recentlyAdded = new ArrayList&lt;&gt;(recentlyAdded());\r\n        recommended = new ArrayList&lt;&gt;(books());\r\n\r\n        int column =0;\r\n        int row = 1;\r\n\r\n        try {\r\n\r\n            for (Book value: recentlyAdded) {\r\n\r\n                FXMLLoader fxmlLoader = new FXMLLoader();\r\n                fxmlLoader.setLocation(getClass().getResource(&quot;card.fxml&quot;));\r\n                HBox cardBox = fxmlLoader.load();\r\n                CardController cardController = fxmlLoader.getController();\r\n                cardController.setData(value);\r\n                cardLayout.getChildren().add(cardBox);\r\n            }\r\n\r\n            for(Book book: recommended){\r\n\r\n                FXMLLoader fxmlLoader = new FXMLLoader();\r\n                fxmlLoader.setLocation(getClass().getResource(&quot;book.fxml&quot;));\r\n                VBox bookBox = fxmlLoader.load();\r\n                BookController bookController = fxmlLoader.getController();\r\n                bookController.setData(book);\r\n\r\n                if(column ==6){\r\n                    column =0;\r\n                    ++row;\r\n\r\n                }\r\n\r\n                bookContainer.add(bookBox, column++, row);\r\n                GridPane.setMargin(bookBox, new Insets(10));\r\n\r\n            }\r\n        }catch (IOException e){\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n    private List&lt;Book&gt; recentlyAdded(){\r\n\r\n        List&lt;Book&gt; ls = new ArrayList&lt;&gt;();\r\n\r\n        Book book = new Book();\r\n        book.setName(&quot;RICH DAD \\n POOR DAD&quot;);\r\n        book.setImageSrc(&quot;richDadPoorDad.jpeg&quot;);\r\n        book.setAuthor(&quot;Robert T.Kiyosaki&quot;);\r\n        ls.add(book);\r\n        return ls;\r\n    }\r\n\r\n    private List&lt;Book&gt; books(){\r\n\r\n        List&lt;Book&gt; ls = new ArrayList&lt;&gt;();\r\n\r\n        Book book = new Book();\r\n        book.setName(&quot;RICH DAD \\n POOR DAD&quot;);\r\n        book.setImageSrc(&quot;richDadPoorDad.jpeg&quot;);\r\n        book.setAuthor(&quot;Robert T.Kiyosaki&quot;);\r\n        ls.add(book);\r\n        return ls;\r\n    }\r\n}\r\n```","title":"getResourceAsStream returning null for Image src","body":"<p>This is one of my first JavaFX Project and I have a problem. in the class CardController, the &quot;getClass().getResourceAsStream(book.getImageSrc())&quot; returns null and i do not know why.</p>\n<pre><code>public class CardController {\n\n    @FXML\n    private HBox box;\n\n    @FXML\n    private Label authorName;\n\n    @FXML\n    private Label bookName;\n\n    @FXML\n    private ImageView bookImage;\n    private String[] colors = {&quot;B9E5FF&quot;, &quot;BDB2FE&quot;, &quot;FB9AA8&quot;, &quot;FF5056&quot;};\n    public void setData(Book book){\n\n        Image image = new Image(getClass().getResourceAsStream(book.getImageSrc())); //here is where i have the problem\n\n        bookImage.setImage(image);\n        bookName.setText(book.getName());\n        authorName.setText(book.getAuthor());\n\n        box.setStyle(&quot;fx-background-color: #&quot;+ colors[(int)(Math.random()*colors.length)] +&quot;;&quot; +\n                &quot; -fx-background-radius: 15;&quot; +\n                &quot;-fx-effect: dropShadow(three-pass-box, rgba (0,0,0,0,,1), 10, 0, 0, 10);&quot;);\n    }\n\n}\n</code></pre>\n<pre><code>public class Book {\n\n    private String name;\n    private String ImageSrc;\n    private String author;\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public void setImageSrc(String imageSrc) {\n        ImageSrc = imageSrc;\n    }\n\n    public void setAuthor(String author) {\n        this.author = author;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public String getImageSrc() {\n        return ImageSrc;\n    }\n\n    public String getAuthor() {\n        return author;\n    }\n}\n</code></pre>\n<pre><code>public class HelloController implements Initializable {\n\n    @FXML\n    private HBox cardLayout;\n\n    @FXML\n    private GridPane bookContainer;\n    private List&lt;Book&gt; recentlyAdded;\n    private List&lt;Book&gt; recommended;\n\n    @Override\n    public void initialize(URL url, ResourceBundle resourceBundle) {\n\n        recentlyAdded = new ArrayList&lt;&gt;(recentlyAdded());\n        recommended = new ArrayList&lt;&gt;(books());\n\n        int column =0;\n        int row = 1;\n\n        try {\n\n            for (Book value: recentlyAdded) {\n\n                FXMLLoader fxmlLoader = new FXMLLoader();\n                fxmlLoader.setLocation(getClass().getResource(&quot;card.fxml&quot;));\n                HBox cardBox = fxmlLoader.load();\n                CardController cardController = fxmlLoader.getController();\n                cardController.setData(value);\n                cardLayout.getChildren().add(cardBox);\n            }\n\n            for(Book book: recommended){\n\n                FXMLLoader fxmlLoader = new FXMLLoader();\n                fxmlLoader.setLocation(getClass().getResource(&quot;book.fxml&quot;));\n                VBox bookBox = fxmlLoader.load();\n                BookController bookController = fxmlLoader.getController();\n                bookController.setData(book);\n\n                if(column ==6){\n                    column =0;\n                    ++row;\n\n                }\n\n                bookContainer.add(bookBox, column++, row);\n                GridPane.setMargin(bookBox, new Insets(10));\n\n            }\n        }catch (IOException e){\n            e.printStackTrace();\n        }\n\n    }\n    private List&lt;Book&gt; recentlyAdded(){\n\n        List&lt;Book&gt; ls = new ArrayList&lt;&gt;();\n\n        Book book = new Book();\n        book.setName(&quot;RICH DAD \\n POOR DAD&quot;);\n        book.setImageSrc(&quot;richDadPoorDad.jpeg&quot;);\n        book.setAuthor(&quot;Robert T.Kiyosaki&quot;);\n        ls.add(book);\n        return ls;\n    }\n\n    private List&lt;Book&gt; books(){\n\n        List&lt;Book&gt; ls = new ArrayList&lt;&gt;();\n\n        Book book = new Book();\n        book.setName(&quot;RICH DAD \\n POOR DAD&quot;);\n        book.setImageSrc(&quot;richDadPoorDad.jpeg&quot;);\n        book.setAuthor(&quot;Robert T.Kiyosaki&quot;);\n        ls.add(book);\n        return ls;\n    }\n}\n</code></pre>\n"},{"tags":["java","android","payment-gateway","google-pay","upi"],"comments":[{"owner":{"account_id":29373846,"reputation":301,"user_id":22505875,"display_name":"Wise Chimpanzee"},"score":0,"creation_date":1693941024,"post_id":76988284,"comment_id":135857322,"body_markdown":"You can Contact to Customer Support As they can help you with this case. As far **AS MY experience Your code seems correct**. So The Last Option is left to contact customer support [here](https://developers.google.com/business-communications/business-messages/support/contact) you can get info how to get customer support.\nYou can refer [this](https://stackoverflow.com/questions/66239372/google-pay-upi-integration-not-working-in-android?noredirect=1&amp;lq=1) stack overflow question and [this stackoverflow](https://stackoverflow.com/questions/61417463/trying-to-integrate-google-pay-to-my-android-app","body":"You can Contact to Customer Support As they can help you with this case. As far <b>AS MY experience Your code seems correct</b>. So The Last Option is left to contact customer support <a href=\"https://developers.google.com/business-communications/business-messages/support/contact\" rel=\"nofollow noreferrer\">here</a> you can get info how to get customer support. You can refer <a href=\"https://stackoverflow.com/questions/66239372/google-pay-upi-integration-not-working-in-android?noredirect=1&amp;lq=1\">this</a> stack overflow question and [this stackoverflow](<a href=\"https://stackoverflow.com/questions/61417463/trying-to-integrate-google-pay-to-my-android-app\" title=\"trying to integrate google pay to my android app\">stackoverflow.com/questions/61417463/&hellip;</a>"}],"owner":{"account_id":27519060,"reputation":265,"user_id":20999526,"display_name":"George"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":491,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":0,"score":6,"last_activity_date":1693941998,"creation_date":1693158117,"question_id":76988284,"body_markdown":"I am using this library ([Library link][1]) to create a UPI intent. This library supports both payment intent and QR code generation. Now, payment through PhonePe succeeds but payment through GooglePay sometimes succeeds and sometimes fails (when done through intent). Payment through PhonePe always succeeds (both using Intent and QR). \r\n\r\nThis is what I am trying to do.\r\n\r\nMainActivity.java\r\n\r\n        btn1.setOnClickListener(view -&gt; {\r\n            try {\r\n                UPI upi = UPI.getInstance();\r\n                Intent payIntent = upi.getPaymentIntent(UPI_ID, NAME, &quot;1&quot;, &quot;INR&quot;, &quot;Test&quot;, &quot;&quot;, MERCHANT_CODE, UPI.ALL_APPS);\r\n                launcher.launch(payIntent);\r\n            }\r\n            catch (Exception e) {\r\n                Toast.makeText(MainActivity.this, e.toString(), Toast.LENGTH_LONG).show();\r\n            }\r\n        });\r\n        btn2.setOnClickListener(view -&gt; {\r\n            getSupportFragmentManager().beginTransaction().add(new QRFragment(), &quot;QR&quot;).commit();\r\n        });\r\n\r\nQRFragment.java\r\n\r\n        UPI upi = UPI.getInstance();\r\n        try {\r\n            Bitmap bitmap = upi.getQR(UPI_ID, NAME, &quot;1&quot;, &quot;INR&quot;, &quot;Test&quot;, &quot;&quot;, MERCHANT_CODE, 512);\r\n            img = view.findViewById(R.id.img);\r\n            img.setImageBitmap(bitmap);\r\n        }\r\n        catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n**Note**: The recipient UPI ID is a **business UPI ID**.\r\n\r\nEdited: The merchant has only PhonePe and PayTM merchant ID (no Google Pay). Can it be a problem?\r\n\r\n\r\n  [1]: https://github.com/samudraganguly/upi","title":"Payment through Google Pay sometimes succeeds sometimes fails using UPI Intent in Android Studio [business UPI ID]","body":"<p>I am using this library (<a href=\"https://github.com/samudraganguly/upi\" rel=\"nofollow noreferrer\">Library link</a>) to create a UPI intent. This library supports both payment intent and QR code generation. Now, payment through PhonePe succeeds but payment through GooglePay sometimes succeeds and sometimes fails (when done through intent). Payment through PhonePe always succeeds (both using Intent and QR).</p>\n<p>This is what I am trying to do.</p>\n<p>MainActivity.java</p>\n<pre><code>    btn1.setOnClickListener(view -&gt; {\n        try {\n            UPI upi = UPI.getInstance();\n            Intent payIntent = upi.getPaymentIntent(UPI_ID, NAME, &quot;1&quot;, &quot;INR&quot;, &quot;Test&quot;, &quot;&quot;, MERCHANT_CODE, UPI.ALL_APPS);\n            launcher.launch(payIntent);\n        }\n        catch (Exception e) {\n            Toast.makeText(MainActivity.this, e.toString(), Toast.LENGTH_LONG).show();\n        }\n    });\n    btn2.setOnClickListener(view -&gt; {\n        getSupportFragmentManager().beginTransaction().add(new QRFragment(), &quot;QR&quot;).commit();\n    });\n</code></pre>\n<p>QRFragment.java</p>\n<pre><code>    UPI upi = UPI.getInstance();\n    try {\n        Bitmap bitmap = upi.getQR(UPI_ID, NAME, &quot;1&quot;, &quot;INR&quot;, &quot;Test&quot;, &quot;&quot;, MERCHANT_CODE, 512);\n        img = view.findViewById(R.id.img);\n        img.setImageBitmap(bitmap);\n    }\n    catch (Exception e) {\n        e.printStackTrace();\n    }\n</code></pre>\n<p><strong>Note</strong>: The recipient UPI ID is a <strong>business UPI ID</strong>.</p>\n<p>Edited: The merchant has only PhonePe and PayTM merchant ID (no Google Pay). Can it be a problem?</p>\n"},{"tags":["java","android","android-permissions"],"answers":[{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693941769,"creation_date":1693941769,"answer_id":77047233,"question_id":77046488,"body_markdown":"You should not ask user for permission in the infinite loop. Your dialog, which gives information why you need this permission should explain which functionality requires it. If user denies granting this permission, then you should disable this functionality. In your application its best to add some way of turning on your functionality, once user explicitly turns it on (for example presses a button), you will ask for permission again - if its not granted.\r\n\r\nThis is what google actually expects from application in [Workflow for requesting permissions][1]:\r\n\r\n&gt; If the user denied the permission instead, gracefully degrade your app\r\n&gt; experience so that it provides functionality to the user without the\r\n&gt; information that&#39;s protected by that permission.\r\n\r\nBut, whats more important is that after user will deny your request twice, system will stop showing it again, so there will be no point in showing it again and again because only your dialog with request reason will show up - and no system dialog will be shown. for [reference][2]\r\n\r\n&gt; Starting in Android 11 (API level 30), if the user taps Deny for a\r\n&gt; specific permission more than once during your app&#39;s lifetime of\r\n&gt; installation on a device, the user doesn&#39;t see the system permissions\r\n&gt; dialog if your app requests that permission again. The user&#39;s action\r\n&gt; implies &quot;don&#39;t ask again.&quot; On previous versions, users saw the system\r\n&gt; permissions dialog each time your app requested a permission, unless\r\n&gt; they had previously selected a &quot;don&#39;t ask again&quot; checkbox or option.\r\n\r\nGoing back to your question:\r\n\r\n&gt; if the answer is no please tell me how to correct the code?\r\n\r\nYou should remove this line:\r\n\r\n    //is not granted\r\n    requestLocationPermission(fragment);\r\n\r\nand replace it with logic which will degrade application functionality.\r\n\r\n  [1]: https://developer.android.com/training/permissions/requesting#workflow_for_requesting_permissions\r\n  [2]:\r\nhttps://developer.android.com/training/permissions/requesting#handle-denial\r\n","title":"My own Location permission utility function for fragments. is that ok? (JAVA)","body":"<p>You should not ask user for permission in the infinite loop. Your dialog, which gives information why you need this permission should explain which functionality requires it. If user denies granting this permission, then you should disable this functionality. In your application its best to add some way of turning on your functionality, once user explicitly turns it on (for example presses a button), you will ask for permission again - if its not granted.</p>\n<p>This is what google actually expects from application in <a href=\"https://developer.android.com/training/permissions/requesting#workflow_for_requesting_permissions\" rel=\"nofollow noreferrer\">Workflow for requesting permissions</a>:</p>\n<blockquote>\n<p>If the user denied the permission instead, gracefully degrade your app\nexperience so that it provides functionality to the user without the\ninformation that's protected by that permission.</p>\n</blockquote>\n<p>But, whats more important is that after user will deny your request twice, system will stop showing it again, so there will be no point in showing it again and again because only your dialog with request reason will show up - and no system dialog will be shown. for <a href=\"https://developer.android.com/training/permissions/requesting#handle-denial\" rel=\"nofollow noreferrer\">reference</a></p>\n<blockquote>\n<p>Starting in Android 11 (API level 30), if the user taps Deny for a\nspecific permission more than once during your app's lifetime of\ninstallation on a device, the user doesn't see the system permissions\ndialog if your app requests that permission again. The user's action\nimplies &quot;don't ask again.&quot; On previous versions, users saw the system\npermissions dialog each time your app requested a permission, unless\nthey had previously selected a &quot;don't ask again&quot; checkbox or option.</p>\n</blockquote>\n<p>Going back to your question:</p>\n<blockquote>\n<p>if the answer is no please tell me how to correct the code?</p>\n</blockquote>\n<p>You should remove this line:</p>\n<pre><code>//is not granted\nrequestLocationPermission(fragment);\n</code></pre>\n<p>and replace it with logic which will degrade application functionality.</p>\n"}],"owner":{"account_id":27761018,"reputation":71,"user_id":21193451,"display_name":"user21193451"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77047233,"answer_count":1,"score":0,"last_activity_date":1693941769,"creation_date":1693933931,"question_id":77046488,"body_markdown":"I tried to write an minimized utility function for location permission for fragments as follow:\r\n\r\n````````````\r\n    public class LocationPermissionUtils {\r\n    \r\n        private static final String LOCATION_PERMISSION = Manifest.permission.ACCESS_FINE_LOCATION;\r\n        private static final String LOCATION_COARSE_PERMISSION = Manifest.permission.ACCESS_COARSE_LOCATION;\r\n    \r\n        public static boolean requestLocationPermission(Fragment fragment) {\r\n            if (checkSelfPermission(fragment.requireContext(), LOCATION_PERMISSION) == PackageManager.PERMISSION_GRANTED)\r\n                return true;\r\n    \r\n            if (ActivityCompat.shouldShowRequestPermissionRationale(fragment.requireActivity(), LOCATION_PERMISSION)) {\r\n                showDialog();\r\n            } else {\r\n                LocationUtils.permissionLauncherUtils(fragment).launch(LOCATION_PERMISSION); // &lt;-- this\r\n            }\r\n            return false;\r\n        }\r\n    \r\n        public static ActivityResultLauncher&lt;String&gt; permissionLauncherUtils(Fragment fragment) {\r\n            return fragment\r\n                    .registerForActivityResult(new ActivityResultContracts.RequestPermission(), new ActivityResultCallback&lt;Boolean&gt;() {\r\n                        @Override\r\n                        public void onActivityResult(Boolean result) {\r\n                            if (result) {\r\n                                //is granted\r\n                                // one can use a callback to send result\r\n                            } else {\r\n                                //is not granted\r\n                                requestLocationPermission(fragment); \r\n                            }\r\n                        }\r\n                    });\r\n        }\r\n\r\n       // codes of showDialog() ..\r\n    }\r\n````````````\r\n\r\nDo you recommend this code that is recursive? \r\n\r\nWill this work at all? if the answer is no please tell me how to correct the code?","title":"My own Location permission utility function for fragments. is that ok? (JAVA)","body":"<p>I tried to write an minimized utility function for location permission for fragments as follow:</p>\n<pre><code>    public class LocationPermissionUtils {\n    \n        private static final String LOCATION_PERMISSION = Manifest.permission.ACCESS_FINE_LOCATION;\n        private static final String LOCATION_COARSE_PERMISSION = Manifest.permission.ACCESS_COARSE_LOCATION;\n    \n        public static boolean requestLocationPermission(Fragment fragment) {\n            if (checkSelfPermission(fragment.requireContext(), LOCATION_PERMISSION) == PackageManager.PERMISSION_GRANTED)\n                return true;\n    \n            if (ActivityCompat.shouldShowRequestPermissionRationale(fragment.requireActivity(), LOCATION_PERMISSION)) {\n                showDialog();\n            } else {\n                LocationUtils.permissionLauncherUtils(fragment).launch(LOCATION_PERMISSION); // &lt;-- this\n            }\n            return false;\n        }\n    \n        public static ActivityResultLauncher&lt;String&gt; permissionLauncherUtils(Fragment fragment) {\n            return fragment\n                    .registerForActivityResult(new ActivityResultContracts.RequestPermission(), new ActivityResultCallback&lt;Boolean&gt;() {\n                        @Override\n                        public void onActivityResult(Boolean result) {\n                            if (result) {\n                                //is granted\n                                // one can use a callback to send result\n                            } else {\n                                //is not granted\n                                requestLocationPermission(fragment); \n                            }\n                        }\n                    });\n        }\n\n       // codes of showDialog() ..\n    }\n</code></pre>\n<p>Do you recommend this code that is recursive?</p>\n<p>Will this work at all? if the answer is no please tell me how to correct the code?</p>\n"},{"tags":["java","spring-integration","spring-dsl"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693941327,"creation_date":1693941327,"answer_id":77047191,"question_id":77046423,"body_markdown":"We don&#39;t see any retry configuration in your question, but see this one which might be exactly what you are looking for: https://stackoverflow.com/questions/66768745/how-to-get-retryadvice-working-for-kafkaproducermessagehandler.\r\n\r\nSo, this is essentially what you need:\r\n\r\n    .handle(Kafka.outboundChannelAdapter(kafkaTemplate)\r\n                     .topic(Constants.KAFKA_TOPIC)\r\n                     .sync(true), \r\n                e -&gt; e.id(Constants.ENGAGE_ACOUSTIC_ID)\r\n                        .advice(retryAdvice))","title":"How to add retry advice to kafka publishing IntegrationFlow","body":"<p>We don't see any retry configuration in your question, but see this one which might be exactly what you are looking for: <a href=\"https://stackoverflow.com/questions/66768745/how-to-get-retryadvice-working-for-kafkaproducermessagehandler\">How to get RetryAdvice working for KafkaProducerMessageHandler</a>.</p>\n<p>So, this is essentially what you need:</p>\n<pre><code>.handle(Kafka.outboundChannelAdapter(kafkaTemplate)\n                 .topic(Constants.KAFKA_TOPIC)\n                 .sync(true), \n            e -&gt; e.id(Constants.ENGAGE_ACOUSTIC_ID)\n                    .advice(retryAdvice))\n</code></pre>\n"}],"owner":{"account_id":7715174,"reputation":31,"user_id":20444450,"display_name":"Beez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693941327,"creation_date":1693933266,"question_id":77046423,"body_markdown":"I&#39;m trying to setup retryAdvice if there is an error in publishing to kafka in my publisherFlow. I can&#39;t seem to find the correct configuration on how to get it working. Any help or guidance would be much appreciated.\r\n\r\n```\r\n    @Bean\r\n    public IntegrationFlow publisherFlow(CsvToEmailInteractionConverter converter, KafkaTemplate&lt;String, String&gt; kafkaTemplate) {\r\n        return IntegrationFlow.from(&quot;publisherChannel&quot;)\r\n                              .transform(converter, &quot;transform&quot;)\r\n                              .transform(Transformers.toJson())\r\n                              .log(LoggingHandler.Level.DEBUG, Constants.LOG_FLOW_CATEGORY, m -&gt; &quot;Payload: &quot; + m.getPayload())\r\n                              .handle(Kafka.outboundChannelAdapter(kafkaTemplate)\r\n                                           .topic(Constants.KAFKA_TOPIC), e -&gt; e.id(Constants.ENGAGE_ACOUSTIC_ID))\r\n                              // .routeByException(r -&gt; r.defaultOutputChannel(MessageChannels.direct(&quot;standardFlowExceptionChannel&quot;).getObject()))\r\n                              .get();\r\n    }\r\n```\r\nI think the advice needs to go before the `handle()`?","title":"How to add retry advice to kafka publishing IntegrationFlow","body":"<p>I'm trying to setup retryAdvice if there is an error in publishing to kafka in my publisherFlow. I can't seem to find the correct configuration on how to get it working. Any help or guidance would be much appreciated.</p>\n<pre><code>    @Bean\n    public IntegrationFlow publisherFlow(CsvToEmailInteractionConverter converter, KafkaTemplate&lt;String, String&gt; kafkaTemplate) {\n        return IntegrationFlow.from(&quot;publisherChannel&quot;)\n                              .transform(converter, &quot;transform&quot;)\n                              .transform(Transformers.toJson())\n                              .log(LoggingHandler.Level.DEBUG, Constants.LOG_FLOW_CATEGORY, m -&gt; &quot;Payload: &quot; + m.getPayload())\n                              .handle(Kafka.outboundChannelAdapter(kafkaTemplate)\n                                           .topic(Constants.KAFKA_TOPIC), e -&gt; e.id(Constants.ENGAGE_ACOUSTIC_ID))\n                              // .routeByException(r -&gt; r.defaultOutputChannel(MessageChannels.direct(&quot;standardFlowExceptionChannel&quot;).getObject()))\n                              .get();\n    }\n</code></pre>\n<p>I think the advice needs to go before the <code>handle()</code>?</p>\n"},{"tags":["java","spring-boot","swagger","swagger-ui","swagger-2.0"],"owner":{"account_id":86444,"reputation":3523,"user_id":240385,"accept_rate":75,"display_name":"jason"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":732,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1693941021,"creation_date":1676743371,"question_id":75495338,"body_markdown":"I have an API that accepts a multi part form data (json body and file upload).  My API works when I use Postman but Swagger does not seem to like it.  Is there a way to allow for multipart payload?  I know I can accepts the json body as a binary file upload, but I would prefer to allow the user to enter the json body into a text area in Swagger.  Here is my example code:\r\n\r\n    @PostMapping(value = &quot;/myPost&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\r\n    public ResponseEntity&lt;MyResult&gt; createPost(\r\n          @RequestPart(value = &quot;body&quot;, required = true) MyDTO myDto,\r\n          @RequestPart(required = false) MultipartFile[] attachments) {\r\n       //my code\r\n    }\r\n\r\nSwagger will then show a Text area called Body, which has my MyDTO schema and file attachment form.  When I submit, I get this error in my Spring Boot API:\r\n\r\n**org.springframework.web.HttpMediaTypeNotSupportedException: Content type &#39;application/octet-stream&#39; not supported**\r\n\r\nI can change the RequestParts to this:\r\n\r\n    @RequestPart(value = &quot;body&quot;) @Parameter(schema = @Schema(type = &quot;string&quot;, format = &quot;binary&quot;)) final MyDTO myDTO ,\r\n    @RequestPart(value = &quot;file&quot;, required = false) final MultipartFile[] attachments\r\n\r\nAnd this will work, but instead of having a Body text area, which displays the MyDTO Schema, Swagger just shows two file upload forms (the Body upload works by putting the JSON payload into a json file and uploading that).  While it will work, it is an inconvenience to the user, as they can&#39;t just copy in the json payload and instead have to create a separate json file. Is there a way to allow a multip part form to have both a json payload and a file attachment?\r\n\r\nthanks\r\n","title":"Using Swagger for Spring Boot API Content type &#39;application/octet-stream&#39; not supported","body":"<p>I have an API that accepts a multi part form data (json body and file upload).  My API works when I use Postman but Swagger does not seem to like it.  Is there a way to allow for multipart payload?  I know I can accepts the json body as a binary file upload, but I would prefer to allow the user to enter the json body into a text area in Swagger.  Here is my example code:</p>\n<pre><code>@PostMapping(value = &quot;/myPost&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\npublic ResponseEntity&lt;MyResult&gt; createPost(\n      @RequestPart(value = &quot;body&quot;, required = true) MyDTO myDto,\n      @RequestPart(required = false) MultipartFile[] attachments) {\n   //my code\n}\n</code></pre>\n<p>Swagger will then show a Text area called Body, which has my MyDTO schema and file attachment form.  When I submit, I get this error in my Spring Boot API:</p>\n<p><strong>org.springframework.web.HttpMediaTypeNotSupportedException: Content type 'application/octet-stream' not supported</strong></p>\n<p>I can change the RequestParts to this:</p>\n<pre><code>@RequestPart(value = &quot;body&quot;) @Parameter(schema = @Schema(type = &quot;string&quot;, format = &quot;binary&quot;)) final MyDTO myDTO ,\n@RequestPart(value = &quot;file&quot;, required = false) final MultipartFile[] attachments\n</code></pre>\n<p>And this will work, but instead of having a Body text area, which displays the MyDTO Schema, Swagger just shows two file upload forms (the Body upload works by putting the JSON payload into a json file and uploading that).  While it will work, it is an inconvenience to the user, as they can't just copy in the json payload and instead have to create a separate json file. Is there a way to allow a multip part form to have both a json payload and a file attachment?</p>\n<p>thanks</p>\n"},{"tags":["java","nio","channel","datagram"],"answers":[{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1385933097,"creation_date":1385933097,"answer_id":20317444,"question_id":20300443,"body_markdown":"&gt; What i do is i instantiare an unconnected DatagramChannel as server, on any read actions i create a new DatagramChannel which i connect to the received address.\r\n\r\nWhy? You already have a `DatagramChannel.` You don&#39;t need any more.\r\n\r\nIn the nature of UDP you should treat each request/response as a completely standalone transaction, without session context. So all you have to do is receive a datagram, compute the reply, send the reply, on the same `DatagramChannel.`","title":"DatagramChannel Server one unconnected channel and more connected channels","body":"<blockquote>\n  <p>What i do is i instantiare an unconnected DatagramChannel as server, on any read actions i create a new DatagramChannel which i connect to the received address.</p>\n</blockquote>\n\n<p>Why? You already have a <code>DatagramChannel.</code> You don't need any more.</p>\n\n<p>In the nature of UDP you should treat each request/response as a completely standalone transaction, without session context. So all you have to do is receive a datagram, compute the reply, send the reply, on the same <code>DatagramChannel.</code></p>\n"}],"owner":{"account_id":383861,"reputation":459,"user_id":739986,"accept_rate":73,"display_name":"Bas Goossen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":322,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":20317444,"answer_count":1,"score":0,"last_activity_date":1693940473,"creation_date":1385815720,"question_id":20300443,"body_markdown":"I&#39;m trying to abstract NIO channels for UDP and TCP. The DatagramChannel and SocketChannel are already much alike. However i run into one problem. I&#39;m now trying to create a DatagramChannelServer as opposed to ServerSocketChannel. What i do is i instantiare an unconnected DatagramChannel as server, on any read actions i create a new DatagramChannel which i connect to the received address. So i have the unconnected DatagramChannel that is supposed to receive incomming data from all unconnected sources and the connected DatagramChannel that receives all data from the connected source.\r\n\r\nThis however does not work, since all received data whether from a connected source or not is received by the unconnected DatagramChannel. Can you somehow prioritize the order in which keys are handles in a way that Connected DatagramChannels are prioritized above unconnected DatagramChannels? or is there another elegant solution to solve this?\r\n\r\nAt this moment i have a (in my opinion) non elegant solution which takes the data from the unconnected DatagramChannel and inserts it into the respective connected DatagramChannel. However i&#39;d like to have a solution more fitting to the framework.\r\n\r\nSomebody a clue on how to do this neatly?","title":"DatagramChannel Server one unconnected channel and more connected channels","body":"<p>I'm trying to abstract NIO channels for UDP and TCP. The DatagramChannel and SocketChannel are already much alike. However i run into one problem. I'm now trying to create a DatagramChannelServer as opposed to ServerSocketChannel. What i do is i instantiare an unconnected DatagramChannel as server, on any read actions i create a new DatagramChannel which i connect to the received address. So i have the unconnected DatagramChannel that is supposed to receive incomming data from all unconnected sources and the connected DatagramChannel that receives all data from the connected source.</p>\n\n<p>This however does not work, since all received data whether from a connected source or not is received by the unconnected DatagramChannel. Can you somehow prioritize the order in which keys are handles in a way that Connected DatagramChannels are prioritized above unconnected DatagramChannels? or is there another elegant solution to solve this?</p>\n\n<p>At this moment i have a (in my opinion) non elegant solution which takes the data from the unconnected DatagramChannel and inserts it into the respective connected DatagramChannel. However i'd like to have a solution more fitting to the framework.</p>\n\n<p>Somebody a clue on how to do this neatly?</p>\n"},{"tags":["java","amazon-web-services","oracle"],"comments":[{"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"score":0,"creation_date":1693942847,"post_id":77047020,"comment_id":135825527,"body_markdown":"Is this really something similar to the actual IP address?  An IP address that starts with `10.` is not routable, meaning that it can only be used in an internal network, not internet wide.","body":"Is this really something similar to the actual IP address?  An IP address that starts with <code>10.</code> is not routable, meaning that it can only be used in an internal network, not internet wide."},{"owner":{"account_id":1801257,"reputation":8969,"user_id":1639556,"accept_rate":79,"display_name":"Leos Literak"},"score":0,"creation_date":1693944264,"post_id":77047020,"comment_id":135825756,"body_markdown":"Yes, this is an internal address. We have VPN between AWS and the network.","body":"Yes, this is an internal address. We have VPN between AWS and the network."},{"owner":{"account_id":17782616,"reputation":6789,"user_id":12913491,"display_name":"pmdba"},"score":4,"creation_date":1693953351,"post_id":77047020,"comment_id":135826973,"body_markdown":"Then it would seem that something is not right with your network configuration or routing, or perhaps a local firewall on the Oracle server is blocking the connection. You&#39;re probably going to have to get the network and/or system admins involved and trace the packets to see what&#39;s going on.","body":"Then it would seem that something is not right with your network configuration or routing, or perhaps a local firewall on the Oracle server is blocking the connection. You&#39;re probably going to have to get the network and/or system admins involved and trace the packets to see what&#39;s going on."},{"owner":{"account_id":1801257,"reputation":8969,"user_id":1639556,"accept_rate":79,"display_name":"Leos Literak"},"score":0,"creation_date":1693981501,"post_id":77047020,"comment_id":135829425,"body_markdown":"I know, that is why I posted this question. But I need to debug the issue myself and then create a new security group rule.","body":"I know, that is why I posted this question. But I need to debug the issue myself and then create a new security group rule."}],"owner":{"account_id":1801257,"reputation":8969,"user_id":1639556,"accept_rate":79,"display_name":"Leos Literak"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693940437,"creation_date":1693939524,"question_id":77047020,"body_markdown":"I need to connect on premise Oracle from AWS. There is a security group rule for the 1521 port on IP address with Oracle 19c. But the application fails, because JPA cannot open the hostname - there is a timeout.\r\n\r\nI have written a small utility for testing:\r\n\r\n        DriverManager.registerDriver(new oracle.jdbc.OracleDriver());\r\n        try (Connection conn = DriverManager.getConnection(url)) {\r\n            if (conn != null) {\r\n                System.out.println(&quot;Connected&quot;);\r\n            }\r\n        }\r\n\r\nAnd it fails too:\r\n\r\n    Caused by: java.io.IOException: Connection timed out, socket connect lapse 127236 ms. /10.20.30.40 1521 0 1 true\r\n            at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:233)\r\n            at oracle.net.nt.ConnOption.connect(ConnOption.java:174)\r\n            at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:510)\r\n            ... 12 more\r\n    Caused by: java.net.ConnectException: Connection timed out\r\n            at java.base/sun.nio.ch.Net.connect0(Native Method)\r\n            at java.base/sun.nio.ch.Net.connect(Net.java:483)\r\n            at java.base/sun.nio.ch.Net.connect(Net.java:472)\r\n            at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:692)\r\n            at java.base/java.nio.channels.SocketChannel.open(SocketChannel.java:194)\r\n            at oracle.net.nt.TimeoutSocketChannel.connect(TimeoutSocketChannel.java:99)\r\n\r\n I try to see all network communication, but this prints nothing:\r\n\r\n    java -Djavax.net.debug=all -jar oracle-test.jar jdbc:oracle:thin:user/secret@10.20.30.40:1521/DB_SVC\r\n\r\nHow can I find out the cause? I guess that there is some other communication I am not aware of. I am ordinary user, not root, so I cannot use advance sniffing tools.","title":"Cannot connect Oracle from AWS","body":"<p>I need to connect on premise Oracle from AWS. There is a security group rule for the 1521 port on IP address with Oracle 19c. But the application fails, because JPA cannot open the hostname - there is a timeout.</p>\n<p>I have written a small utility for testing:</p>\n<pre><code>    DriverManager.registerDriver(new oracle.jdbc.OracleDriver());\n    try (Connection conn = DriverManager.getConnection(url)) {\n        if (conn != null) {\n            System.out.println(&quot;Connected&quot;);\n        }\n    }\n</code></pre>\n<p>And it fails too:</p>\n<pre><code>Caused by: java.io.IOException: Connection timed out, socket connect lapse 127236 ms. /10.20.30.40 1521 0 1 true\n        at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:233)\n        at oracle.net.nt.ConnOption.connect(ConnOption.java:174)\n        at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:510)\n        ... 12 more\nCaused by: java.net.ConnectException: Connection timed out\n        at java.base/sun.nio.ch.Net.connect0(Native Method)\n        at java.base/sun.nio.ch.Net.connect(Net.java:483)\n        at java.base/sun.nio.ch.Net.connect(Net.java:472)\n        at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:692)\n        at java.base/java.nio.channels.SocketChannel.open(SocketChannel.java:194)\n        at oracle.net.nt.TimeoutSocketChannel.connect(TimeoutSocketChannel.java:99)\n</code></pre>\n<p>I try to see all network communication, but this prints nothing:</p>\n<pre><code>java -Djavax.net.debug=all -jar oracle-test.jar jdbc:oracle:thin:user/secret@10.20.30.40:1521/DB_SVC\n</code></pre>\n<p>How can I find out the cause? I guess that there is some other communication I am not aware of. I am ordinary user, not root, so I cannot use advance sniffing tools.</p>\n"},{"tags":["java","spring","spring-cloud-feign"],"owner":{"account_id":26038502,"reputation":95,"user_id":19743660,"display_name":"programmer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693939872,"creation_date":1693939872,"question_id":77047058,"body_markdown":"I want to write parameterized tests for my server, so I need to create generic HTTP client. Is it possible to do with FeignClient in Spring Boot?","title":"Set HTTP method and URL in FeignCleint dynamically","body":"<p>I want to write parameterized tests for my server, so I need to create generic HTTP client. Is it possible to do with FeignClient in Spring Boot?</p>\n"},{"tags":["java","gradle","build.gradle"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1693520946,"post_id":77019506,"comment_id":135776078,"body_markdown":"The only difference I&#39;m aware with is `compileJava` configures specifically that task, whereas `withType(JavaCompile)` configures _all_ tasks with that type, including e.g. `compileTestJava`","body":"The only difference I&#39;m aware with is <code>compileJava</code> configures specifically that task, whereas <code>withType(JavaCompile)</code> configures <i>all</i> tasks with that type, including e.g. <code>compileTestJava</code>"},{"owner":{"account_id":46213,"reputation":2690,"user_id":136449,"accept_rate":84,"display_name":"Steve"},"score":0,"creation_date":1693845509,"post_id":77019506,"comment_id":135810753,"body_markdown":"And that explains it. The code that&#39;s failing to compile in in my test code. I assumed that the test code also compiled with compileJava, not compileTestJava. Since that;s not how it works, it makes sense my tests would fail to compile when augmenting compileJava. Thanks...","body":"And that explains it. The code that&#39;s failing to compile in in my test code. I assumed that the test code also compiled with compileJava, not compileTestJava. Since that;s not how it works, it makes sense my tests would fail to compile when augmenting compileJava. Thanks..."},{"owner":{"account_id":111990,"reputation":4803,"user_id":295582,"accept_rate":100,"display_name":"Nikita Skvortsov"},"score":0,"creation_date":1693936819,"post_id":77019506,"comment_id":135824516,"body_markdown":"@Slaw looks like you should post your answer, so it gets accepted )","body":"@Slaw looks like you should post your answer, so it gets accepted )"}],"answers":[{"tags":[],"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693939438,"creation_date":1693939438,"answer_id":77047012,"question_id":77019506,"body_markdown":"When you do:\r\n\r\n```groovy\r\ncompileJava {\r\n    // configure...\r\n}\r\n```\r\n\r\nYou are configuring a specific task named `compileJava` that happens to have a type of `JavaCompile`. It will not configure any other tasks. But when you do:\r\n\r\n```groovy\r\nwithType(JavaCompile) {\r\n    // configure...\r\n}\r\n```\r\n\r\nYou are configuring _every task_ whose type is `JavaCompile`. This includes tasks like `compileTestJava`. Since [you&#39;ve confirmed][1]&lt;sup&gt;1&lt;/sup&gt; that it&#39;s your _test code_ that fails to compile with the first approach, that explains why the second approach solves the issue.\r\n\r\n---\r\n\r\n&lt;sup&gt; 1. Comment quote: &quot;_And that explains it. The code that&#39;s failing to compile in in my test code. I assumed that the test code also compiled with compileJava, not compileTestJava. Since that;s not how it works, it makes sense my tests would fail to compile when augmenting compileJava. Thanks..._&quot;&lt;/sup&gt;\r\n\r\n  [1]: https://stackoverflow.com/questions/77019506/gradle-difference-between-compilejava-and-tasks-withtypejavacompile?noredirect=1#comment135810753_77019506","title":"Gradle difference between compileJava and tasks.withType(JavaCompile)","body":"<p>When you do:</p>\n<pre><code>compileJava {\n    // configure...\n}\n</code></pre>\n<p>You are configuring a specific task named <code>compileJava</code> that happens to have a type of <code>JavaCompile</code>. It will not configure any other tasks. But when you do:</p>\n<pre><code>withType(JavaCompile) {\n    // configure...\n}\n</code></pre>\n<p>You are configuring <em>every task</em> whose type is <code>JavaCompile</code>. This includes tasks like <code>compileTestJava</code>. Since <a href=\"https://stackoverflow.com/questions/77019506/gradle-difference-between-compilejava-and-tasks-withtypejavacompile?noredirect=1#comment135810753_77019506\">you've confirmed</a><sup>1</sup> that it's your <em>test code</em> that fails to compile with the first approach, that explains why the second approach solves the issue.</p>\n<hr />\n<p><sup> 1. Comment quote: &quot;<em>And that explains it. The code that's failing to compile in in my test code. I assumed that the test code also compiled with compileJava, not compileTestJava. Since that;s not how it works, it makes sense my tests would fail to compile when augmenting compileJava. Thanks...</em>&quot;</sup></p>\n"}],"owner":{"account_id":46213,"reputation":2690,"user_id":136449,"accept_rate":84,"display_name":"Steve"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77047012,"answer_count":1,"score":1,"last_activity_date":1693939438,"creation_date":1693519498,"question_id":77019506,"body_markdown":"I&#39;m currently trying to convert an old code base from Java 8 to Java 11. Part of this old code base uses some Java-internal classes (specifically sun.security.x509). In order to make this work in Java 11 I have to add the &quot;add-exports&quot; flag to my compileJava task in Gradle to allow this internal class to be visible outside its module.\r\n\r\nSo I started with this:\r\n\r\n    compileJava {\r\n        sourceCompatibility = JavaVersion.VERSION_11\r\n        targetCompatibility = JavaVersion.VERSION_11\r\n    \r\n        options.compilerArgs = [ &#39;--add-exports=java.base/sun.security.x509=ALL-UNNAMED&#39; ]\r\n    }\r\n\r\nThis doesn&#39;t seem to work, as the add-exports does not get passed to javac, so my code fails to compile.\r\n\r\nHowever, if I do this instead it works, properly passing the add-exports to the javac process.\r\n\r\n    tasks.withType (JavaCompile) {\r\n            sourceCompatibility = JavaVersion.VERSION_11\r\n            targetCompatibility = JavaVersion.VERSION_11\r\n    \r\n            options.compilerArgs = [ &#39;--add-exports=java.base/sun.security.x509=ALL-UNNAMED&#39; ]\r\n    }\r\n\r\nObviously, there&#39;s something I don&#39;t understand here. These appear to me to functionally perform the same operations, yet the second works while the first one fails.\r\n\r\nCan anyone enlighten me as to what the difference is, and why one works and the other fails?\r\n","title":"Gradle difference between compileJava and tasks.withType(JavaCompile)","body":"<p>I'm currently trying to convert an old code base from Java 8 to Java 11. Part of this old code base uses some Java-internal classes (specifically sun.security.x509). In order to make this work in Java 11 I have to add the &quot;add-exports&quot; flag to my compileJava task in Gradle to allow this internal class to be visible outside its module.</p>\n<p>So I started with this:</p>\n<pre><code>compileJava {\n    sourceCompatibility = JavaVersion.VERSION_11\n    targetCompatibility = JavaVersion.VERSION_11\n\n    options.compilerArgs = [ '--add-exports=java.base/sun.security.x509=ALL-UNNAMED' ]\n}\n</code></pre>\n<p>This doesn't seem to work, as the add-exports does not get passed to javac, so my code fails to compile.</p>\n<p>However, if I do this instead it works, properly passing the add-exports to the javac process.</p>\n<pre><code>tasks.withType (JavaCompile) {\n        sourceCompatibility = JavaVersion.VERSION_11\n        targetCompatibility = JavaVersion.VERSION_11\n\n        options.compilerArgs = [ '--add-exports=java.base/sun.security.x509=ALL-UNNAMED' ]\n}\n</code></pre>\n<p>Obviously, there's something I don't understand here. These appear to me to functionally perform the same operations, yet the second works while the first one fails.</p>\n<p>Can anyone enlighten me as to what the difference is, and why one works and the other fails?</p>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":237656,"reputation":3080,"user_id":506005,"accept_rate":62,"display_name":"Houcem Berrayana"},"score":0,"creation_date":1694012077,"post_id":77042994,"comment_id":135835816,"body_markdown":"I&#39;ve done this by imitating what&#39;s being done on a normal authentication. Still not optimal because the AuthorizationExchange.request should contain valid information not a &quot;fake&quot; strings.","body":"I&#39;ve done this by imitating what&#39;s being done on a normal authentication. Still not optimal because the AuthorizationExchange.request should contain valid information not a &quot;fake&quot; strings."}],"owner":{"account_id":237656,"reputation":3080,"user_id":506005,"accept_rate":62,"display_name":"Houcem Berrayana"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693938788,"creation_date":1693903291,"question_id":77042994,"body_markdown":"I&#39;m implementing a biometric authentication process which has complex steps and among these steps I have to use a refresh token stored in a database table and create a new AuthorizedClient.\r\n\r\nSo far, refreshing tokens when the user is already logged in is simple through the `AuthorizedClientManager`. This is well documented and nothing challenging about it.\r\n\r\nThe code looks like this (I&#39;m using the Spring web flux and Reactive spring security but it&#39;s almost the same):\r\n``` \r\nprivate Mono&lt;OAuth2AuthorizedClient&gt; authorizedClient(OAuth2AuthenticationToken oauth2Authentication) {\r\n        String clientRegistrationId = oauth2Authentication.getAuthorizedClientRegistrationId();\r\n        OAuth2AuthorizeRequest request = OAuth2AuthorizeRequest.withClientRegistrationId(clientRegistrationId)\r\n                .principal(oauth2Authentication).build();\r\n        if (clientManager == null) {\r\n            return Mono.error(new IllegalStateException(\r\n                    &quot;No ReactiveOAuth2AuthorizedClientManager bean was found. Did you include the &quot;\r\n                            + &quot;org.springframework.boot:spring-boot-starter-oauth2-client dependency?&quot;));\r\n        }\r\n        return clientManager.authorize(request);\r\n    }\r\n\r\n```\r\n\r\nHowever, when the user has no prior access token or authentication nor an existing session, the token can&#39;t be refreshed. At least I couldn&#39;t figure out how to.\r\n\r\nI read most of spring security&#39;s oauth2 client code and can&#39;t figure out how to perform such thing.\r\n\r\nI managed also to do that by hand I created a new WebClient and refreshed the token successfully. \r\n\r\nHowever, to create manually the `Authentication` which is an instance of `OAuth2LoginAuthenticationToken` it&#39;s not straight forward and requires many params such as a valid `OAuth2AuthorizationExchange`.\r\n\r\n\r\nWhat am I missing or doing wrong?","title":"Spring security OAuth2 client - Using refresh token without a prior Authentication","body":"<p>I'm implementing a biometric authentication process which has complex steps and among these steps I have to use a refresh token stored in a database table and create a new AuthorizedClient.</p>\n<p>So far, refreshing tokens when the user is already logged in is simple through the <code>AuthorizedClientManager</code>. This is well documented and nothing challenging about it.</p>\n<p>The code looks like this (I'm using the Spring web flux and Reactive spring security but it's almost the same):</p>\n<pre><code>private Mono&lt;OAuth2AuthorizedClient&gt; authorizedClient(OAuth2AuthenticationToken oauth2Authentication) {\n        String clientRegistrationId = oauth2Authentication.getAuthorizedClientRegistrationId();\n        OAuth2AuthorizeRequest request = OAuth2AuthorizeRequest.withClientRegistrationId(clientRegistrationId)\n                .principal(oauth2Authentication).build();\n        if (clientManager == null) {\n            return Mono.error(new IllegalStateException(\n                    &quot;No ReactiveOAuth2AuthorizedClientManager bean was found. Did you include the &quot;\n                            + &quot;org.springframework.boot:spring-boot-starter-oauth2-client dependency?&quot;));\n        }\n        return clientManager.authorize(request);\n    }\n\n</code></pre>\n<p>However, when the user has no prior access token or authentication nor an existing session, the token can't be refreshed. At least I couldn't figure out how to.</p>\n<p>I read most of spring security's oauth2 client code and can't figure out how to perform such thing.</p>\n<p>I managed also to do that by hand I created a new WebClient and refreshed the token successfully.</p>\n<p>However, to create manually the <code>Authentication</code> which is an instance of <code>OAuth2LoginAuthenticationToken</code> it's not straight forward and requires many params such as a valid <code>OAuth2AuthorizationExchange</code>.</p>\n<p>What am I missing or doing wrong?</p>\n"},{"tags":["java","deprecated"],"comments":[{"owner":{"account_id":235018,"reputation":364824,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"score":10,"creation_date":1327659858,"post_id":9031832,"comment_id":11327777,"body_markdown":"Is @Deprecrated not an option for you?","body":"Is @Deprecrated not an option for you?"},{"owner":{"account_id":456728,"reputation":14328,"user_id":855636,"accept_rate":94,"display_name":"Pavel Janicek"},"score":28,"creation_date":1327659962,"post_id":9031832,"comment_id":11327812,"body_markdown":"It is, but I did not know about it ... thats why I am asking the question :)","body":"It is, but I did not know about it ... thats why I am asking the question :)"},{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":1,"creation_date":1328017149,"post_id":9031832,"comment_id":11400246,"body_markdown":"See http://docs.oracle.com/javase/1.5.0/docs/guide/javadoc/deprecation/deprecation.html","body":"See <a href=\"http://docs.oracle.com/javase/1.5.0/docs/guide/javadoc/deprecation/deprecation.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/1.5.0/docs/guide/javadoc/deprecation/&zwnj;&#8203;&hellip;</a>"},{"owner":{"account_id":410836,"reputation":1446,"user_id":782911,"accept_rate":91,"display_name":"mattumotu"},"score":5,"creation_date":1422185703,"post_id":9031832,"comment_id":44643722,"body_markdown":"comments are not the place for answers!","body":"comments are not the place for answers!"}],"answers":[{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":41,"is_accepted":false,"score":41,"last_activity_date":1366147264,"creation_date":1327659836,"answer_id":9031850,"question_id":9031832,"body_markdown":"There are two things you can do:\n\n1. Add the [`@Deprecated`][1] annotation to the method, and\n1. Add a [`@deprecated`][2] tag to the javadoc of the method\n\nYou should **do both**!\n\nQuoting the [java documentation][3] on this subject:\n\n&gt;Starting with J2SE 5.0, you deprecate a class, method, or field by using the @Deprecated annotation. Additionally, you can use the @deprecated Javadoc tag tell developers what to use instead.  \n&gt;\n&gt;Using the annotation causes the Java compiler to generate warnings when the deprecated class, method, or field is used. The compiler suppresses deprecation warnings if a deprecated compilation unit uses a deprecated class, method, or field. This enables you to build legacy APIs without generating warnings.  \n&gt;\n&gt;You are strongly recommended to use the Javadoc @deprecated tag with appropriate comments explaining how to use the new API. This ensures developers will have a workable migration path from the old API to the new API\n\n\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/lang/Deprecated.html\n  [2]: http://docs.oracle.com/javase/1.5.0/docs/guide/javadoc/deprecation/deprecation.html#javadoc_tag\n  [3]: http://docs.oracle.com/javase/1.5.0/docs/guide/javadoc/deprecation/deprecation.html#how","title":"How to declare or mark a Java method as deprecated?","body":"<p>There are two things you can do:</p>\n<ol>\n<li>Add the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/Deprecated.html\" rel=\"noreferrer\"><code>@Deprecated</code></a> annotation to the method, and</li>\n<li>Add a <a href=\"http://docs.oracle.com/javase/1.5.0/docs/guide/javadoc/deprecation/deprecation.html#javadoc_tag\" rel=\"noreferrer\"><code>@deprecated</code></a> tag to the javadoc of the method</li>\n</ol>\n<p>You should <strong>do both</strong>!</p>\n<p>Quoting the <a href=\"http://docs.oracle.com/javase/1.5.0/docs/guide/javadoc/deprecation/deprecation.html#how\" rel=\"noreferrer\">java documentation</a> on this subject:</p>\n<blockquote>\n<p>Starting with J2SE 5.0, you deprecate a class, method, or field by using the @Deprecated annotation. Additionally, you can use the @deprecated Javadoc tag tell developers what to use instead.</p>\n<p>Using the annotation causes the Java compiler to generate warnings when the deprecated class, method, or field is used. The compiler suppresses deprecation warnings if a deprecated compilation unit uses a deprecated class, method, or field. This enables you to build legacy APIs without generating warnings.</p>\n<p>You are strongly recommended to use the Javadoc @deprecated tag with appropriate comments explaining how to use the new API. This ensures developers will have a workable migration path from the old API to the new API</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":217320,"reputation":42820,"user_id":473070,"accept_rate":82,"display_name":"Vladimir Ivanov"},"down_vote_count":0,"up_vote_count":653,"is_accepted":true,"score":653,"last_activity_date":1683738067,"creation_date":1327659851,"answer_id":9031854,"question_id":9031832,"body_markdown":"Use [`@Deprecated`][1] on method.  \r\nDon&#39;t forget to add the [`@deprecated`][2] Javadoc tag:\r\n\r\n    /**\r\n     * Does some thing in old style.\r\n     *\r\n     * @deprecated use {@link #new()} instead.  \r\n     */\r\n    @Deprecated\r\n    public void old() {\r\n    // ...\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/Deprecated.html\r\n  [2]: https://docs.oracle.com/javase/1.5.0/docs/guide/javadoc/deprecation/deprecation.html","title":"How to declare or mark a Java method as deprecated?","body":"<p>Use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Deprecated.html\" rel=\"noreferrer\"><code>@Deprecated</code></a> on method.<br />\nDon't forget to add the <a href=\"https://docs.oracle.com/javase/1.5.0/docs/guide/javadoc/deprecation/deprecation.html\" rel=\"noreferrer\"><code>@deprecated</code></a> Javadoc tag:</p>\n<pre><code>/**\n * Does some thing in old style.\n *\n * @deprecated use {@link #new()} instead.  \n */\n@Deprecated\npublic void old() {\n// ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":278210,"reputation":176444,"user_id":572670,"accept_rate":92,"display_name":"amit"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1523656723,"creation_date":1327659871,"answer_id":9031858,"question_id":9031832,"body_markdown":"Use the [annotation][1] `@Deprecated` for your method, and you should also mention it in your javadocs.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/annotations/","title":"How to declare or mark a Java method as deprecated?","body":"<p>Use the <a href=\"https://docs.oracle.com/javase/tutorial/java/annotations/\" rel=\"nofollow noreferrer\">annotation</a> <code>@Deprecated</code> for your method, and you should also mention it in your javadocs.</p>\n"},{"tags":[],"owner":{"account_id":543042,"reputation":375,"user_id":912062,"display_name":"jham"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1327659930,"creation_date":1327659930,"answer_id":9031868,"question_id":9031832,"body_markdown":"Take a look at the `@Deprecated` annotation.","title":"How to declare or mark a Java method as deprecated?","body":"<p>Take a look at the <code>@Deprecated</code> annotation.</p>\n"},{"tags":[],"owner":{"account_id":219073,"reputation":2149,"user_id":475746,"display_name":"ShaMan-H_Fel"},"down_vote_count":0,"up_vote_count":95,"is_accepted":false,"score":95,"last_activity_date":1418998245,"creation_date":1327660180,"answer_id":9031910,"question_id":9031832,"body_markdown":"Use both `@Deprecated` annotation and the `@deprecated` JavaDoc tag.\r\n\r\nThe `@deprecated` JavaDoc tag is used for documentation purposes.\r\n\r\nThe `@Deprecated` annotation instructs the compiler that the method is deprecated. Here is what it says in Sun/Oracles document on the subject:\r\n\r\n&gt; Using the **`@Deprecated`** annotation to deprecate a class, method, or field ensures that all compilers will issue warnings when code uses that program element. In contrast, there is no guarantee that all compilers will always issue warnings based on the **`@deprecated`** Javadoc tag, though the Sun compilers currently do so. Other compilers may not issue such warnings. Thus, using the **`@Deprecated`** annotation to generate warnings is more portable that relying on the **`@deprecated`** Javadoc tag. \r\n\r\nYou can find the full document at [How and When to Deprecate APIs][1]\r\n\r\n [1]: http://docs.oracle.com/javase/1.5.0/docs/guide/javadoc/deprecation/deprecation.html","title":"How to declare or mark a Java method as deprecated?","body":"<p>Use both <code>@Deprecated</code> annotation and the <code>@deprecated</code> JavaDoc tag.</p>\n\n<p>The <code>@deprecated</code> JavaDoc tag is used for documentation purposes.</p>\n\n<p>The <code>@Deprecated</code> annotation instructs the compiler that the method is deprecated. Here is what it says in Sun/Oracles document on the subject:</p>\n\n<blockquote>\n  <p>Using the <strong><code>@Deprecated</code></strong> annotation to deprecate a class, method, or field ensures that all compilers will issue warnings when code uses that program element. In contrast, there is no guarantee that all compilers will always issue warnings based on the <strong><code>@deprecated</code></strong> Javadoc tag, though the Sun compilers currently do so. Other compilers may not issue such warnings. Thus, using the <strong><code>@Deprecated</code></strong> annotation to generate warnings is more portable that relying on the <strong><code>@deprecated</code></strong> Javadoc tag. </p>\n</blockquote>\n\n<p>You can find the full document at <a href=\"http://docs.oracle.com/javase/1.5.0/docs/guide/javadoc/deprecation/deprecation.html\" rel=\"noreferrer\">How and When to Deprecate APIs</a></p>\n"},{"tags":[],"owner":{"account_id":3809070,"reputation":18333,"user_id":3160597,"accept_rate":47,"display_name":"azerafati"},"down_vote_count":0,"up_vote_count":56,"is_accepted":false,"score":56,"last_activity_date":1543035107,"creation_date":1404721292,"answer_id":24605999,"question_id":9031832,"body_markdown":"since some minor explanations were missing\r\n\r\nUse **`@Deprecated`** annotation on the method like this\r\n\r\n     /**\r\n\t * @param basePrice\r\n\t * \r\n\t * @deprecated \treason this method is deprecated &lt;br/&gt;\r\n\t * \t\t\t\t{will be removed in next version} &lt;br/&gt;\r\n\t * \t\t\t\tuse {@link #setPurchasePrice()} instead like this: \r\n\t * \r\n\t * \r\n     * &lt;blockquote&gt;&lt;pre&gt;\r\n     * getProduct().setPurchasePrice(200) \r\n     * &lt;/pre&gt;&lt;/blockquote&gt;\r\n\t * \r\n\t */\r\n\t@Deprecated\r\n\tpublic void setBaseprice(int basePrice) {\r\n\t}\r\n\r\n#remember to explain:#\r\n\r\n 1. **Why is this method no longer recommended**. What problems arise when using it. Provide a link to the discussion on the matter if any. (remember to separate lines for readability `&lt;br/&gt;`\r\n 2. **When it will be removed**. (let your users know how much they can still rely on this method if they decide to stick to the old way)\r\n 3. **Provide a solution** or link to the method you recommend  `{@link #setPurchasePrice()}`","title":"How to declare or mark a Java method as deprecated?","body":"<p>since some minor explanations were missing</p>\n\n<p>Use <strong><code>@Deprecated</code></strong> annotation on the method like this</p>\n\n<pre><code> /**\n * @param basePrice\n * \n * @deprecated  reason this method is deprecated &lt;br/&gt;\n *              {will be removed in next version} &lt;br/&gt;\n *              use {@link #setPurchasePrice()} instead like this: \n * \n * \n * &lt;blockquote&gt;&lt;pre&gt;\n * getProduct().setPurchasePrice(200) \n * &lt;/pre&gt;&lt;/blockquote&gt;\n * \n */\n@Deprecated\npublic void setBaseprice(int basePrice) {\n}\n</code></pre>\n\n<h1>remember to explain:</h1>\n\n<ol>\n<li><strong>Why is this method no longer recommended</strong>. What problems arise when using it. Provide a link to the discussion on the matter if any. (remember to separate lines for readability <code>&lt;br/&gt;</code></li>\n<li><strong>When it will be removed</strong>. (let your users know how much they can still rely on this method if they decide to stick to the old way)</li>\n<li><strong>Provide a solution</strong> or link to the method you recommend  <code>{@link #setPurchasePrice()}</code></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":19721972,"reputation":1,"user_id":14439303,"display_name":"James LeMaitre"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693920293,"creation_date":1693920293,"answer_id":77044898,"question_id":9031832,"body_markdown":"You must annotate the service @Deprecated","title":"How to declare or mark a Java method as deprecated?","body":"<p>You must annotate the service @Deprecated</p>\n"},{"tags":[],"owner":{"account_id":7176041,"reputation":918,"user_id":5481947,"accept_rate":67,"display_name":"Anil Konduru"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693938588,"creation_date":1693938588,"answer_id":77046933,"question_id":9031832,"body_markdown":"Along with @Deprecated annotation on the method, include a message why it was deprecated and what is the alternate option to use.\r\n\r\n     /**\r\n     * @deprecated\r\n     * explain here why the method was deprecated, suggest alternate option to \r\n     * use\r\n     */\r\n\r\nExample message\r\n\r\n    Deprecated, for removal: This API element is subject to removal in a future version. since 3.0.0 in favor of bstractCompositeHealthContributorConfiguration(Function)","title":"How to declare or mark a Java method as deprecated?","body":"<p>Along with @Deprecated annotation on the method, include a message why it was deprecated and what is the alternate option to use.</p>\n<pre><code> /**\n * @deprecated\n * explain here why the method was deprecated, suggest alternate option to \n * use\n */\n</code></pre>\n<p>Example message</p>\n<pre><code>Deprecated, for removal: This API element is subject to removal in a future version. since 3.0.0 in favor of bstractCompositeHealthContributorConfiguration(Function)\n</code></pre>\n"}],"owner":{"account_id":456728,"reputation":14328,"user_id":855636,"accept_rate":94,"display_name":"Pavel Janicek"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":207549,"favorite_count":0,"down_vote_count":0,"up_vote_count":334,"accepted_answer_id":9031854,"answer_count":8,"score":334,"last_activity_date":1693938588,"creation_date":1327659746,"question_id":9031832,"body_markdown":"I would like to make one of my methods &quot;deprecated&quot; = not used anymore.\r\n\r\nBut still I would like to have it in my API. I just want to show &quot;warning&quot; to anyone using that method.\r\n\r\nHow can I achieve that?","title":"How to declare or mark a Java method as deprecated?","body":"<p>I would like to make one of my methods \"deprecated\" = not used anymore.</p>\n\n<p>But still I would like to have it in my API. I just want to show \"warning\" to anyone using that method.</p>\n\n<p>How can I achieve that?</p>\n"},{"tags":["java","spring","spring-boot","maven","github-packages"],"owner":{"account_id":29373313,"reputation":1,"user_id":22505435,"display_name":"wnewman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693938553,"creation_date":1693937795,"question_id":77046869,"body_markdown":"I would greatly appreciate any assistance you can provide.\r\n\r\nI&#39;m trying to save a project as a GitHub package so that I can use it as a dependency in another Java project.\r\n\r\nThe project I&#39;m working on is a Spring Boot project, and I suspect that the issue I&#39;m facing might be specific to Spring Boot.\r\n\r\n1. I run `mvn clean deploy`, which successfully creates the package in the remote GitHub Repo.\r\n2. Then, I run `mvn clean install` on the project that needs to reference the code, using the updated POM below.\r\n3. My `.m2/settings.xml` is configured as follows:\r\n\r\n```\r\n&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;\r\n  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0\r\n                      http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;\r\n\r\n  &lt;activeProfiles&gt;\r\n    &lt;activeProfile&gt;github&lt;/activeProfile&gt;\r\n  &lt;/activeProfiles&gt;\r\n\r\n  &lt;profiles&gt;\r\n    &lt;profile&gt;\r\n      &lt;id&gt;github&lt;/id&gt;\r\n      &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n          &lt;id&gt;central&lt;/id&gt;\r\n          &lt;url&gt;https://repo1.maven.org/maven2&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n        &lt;repository&gt;\r\n          &lt;id&gt;github&lt;/id&gt;\r\n          &lt;url&gt;https://maven.pkg.github.com/Owner/pName&lt;/url&gt;\r\n          &lt;snapshots&gt;\r\n            &lt;enabled&gt;true&lt;/enabled&gt;\r\n          &lt;/snapshots&gt;\r\n        &lt;/repository&gt;\r\n      &lt;/repositories&gt;\r\n    &lt;/profile&gt;\r\n  &lt;/profiles&gt;\r\n\r\n  &lt;servers&gt;\r\n    &lt;server&gt;\r\n      &lt;id&gt;github&lt;/id&gt;\r\n      &lt;username&gt;userName&lt;/username&gt;\r\n      &lt;password&gt;password&lt;/password&gt;\r\n    &lt;/server&gt;\r\n  &lt;/servers&gt;\r\n&lt;/settings&gt;\r\n```\r\n\r\n4. Here is the pom for the project to be referenced:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.companyName&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;testfunctions&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n    &lt;distributionManagement&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;github&lt;/id&gt;\r\n\t\t\t&lt;name&gt;GitHub username Apache Maven Packages&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://maven.pkg.github.com/Owner/pName&lt;/url&gt;\r\n\t\t&lt;/repository&gt;\r\n\t&lt;/distributionManagement&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java. Version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n            &lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n            &lt;version&gt;2.9.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n            &lt;groupId&gt;org.json&lt;/groupId&gt;\r\n            &lt;artifactId&gt;json&lt;/artifactId&gt;\r\n            &lt;version&gt;20090211&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n            &lt;groupId&gt;org.jsoup&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jsoup&lt;/artifactId&gt;\r\n            &lt;version&gt;1.14.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n            &lt;artifactId&gt;httpmime&lt;/artifactId&gt;\r\n            &lt;version&gt;4.3.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n5. Here is the pom for the project trying to reference the packaged:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;com.companyName&lt;/groupId&gt;\r\n    &lt;artifactId&gt;testconvert&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.companyName&lt;/groupId&gt;\r\n\t        &lt;artifactId&gt;testfunctions&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.7&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n            &lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n            &lt;version&gt;2.9.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n            &lt;groupId&gt;org.json&lt;/groupId&gt;\r\n            &lt;artifactId&gt;json&lt;/artifactId&gt;\r\n            &lt;version&gt;20090211&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n            &lt;groupId&gt;org.jsoup&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jsoup&lt;/artifactId&gt;\r\n            &lt;version&gt;1.14.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n            &lt;artifactId&gt;httpmime&lt;/artifactId&gt;\r\n            &lt;version&gt;4.3.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nIssue: Despite my efforts, when I run mvn install, nothing installs, even after forcing it with mvn clean install -U. This process seems to work fine with other non-Spring projects.\r\n\r\nIs there something different I need to do to make this work with a Spring Boot app? Is it possible?","title":"Trouble Using a Java Spring Boot Project as a GitHub Package Dependency","body":"<p>I would greatly appreciate any assistance you can provide.</p>\n<p>I'm trying to save a project as a GitHub package so that I can use it as a dependency in another Java project.</p>\n<p>The project I'm working on is a Spring Boot project, and I suspect that the issue I'm facing might be specific to Spring Boot.</p>\n<ol>\n<li>I run <code>mvn clean deploy</code>, which successfully creates the package in the remote GitHub Repo.</li>\n<li>Then, I run <code>mvn clean install</code> on the project that needs to reference the code, using the updated POM below.</li>\n<li>My <code>.m2/settings.xml</code> is configured as follows:</li>\n</ol>\n<pre><code>&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;\n  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0\n                      http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;\n\n  &lt;activeProfiles&gt;\n    &lt;activeProfile&gt;github&lt;/activeProfile&gt;\n  &lt;/activeProfiles&gt;\n\n  &lt;profiles&gt;\n    &lt;profile&gt;\n      &lt;id&gt;github&lt;/id&gt;\n      &lt;repositories&gt;\n        &lt;repository&gt;\n          &lt;id&gt;central&lt;/id&gt;\n          &lt;url&gt;https://repo1.maven.org/maven2&lt;/url&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n          &lt;id&gt;github&lt;/id&gt;\n          &lt;url&gt;https://maven.pkg.github.com/Owner/pName&lt;/url&gt;\n          &lt;snapshots&gt;\n            &lt;enabled&gt;true&lt;/enabled&gt;\n          &lt;/snapshots&gt;\n        &lt;/repository&gt;\n      &lt;/repositories&gt;\n    &lt;/profile&gt;\n  &lt;/profiles&gt;\n\n  &lt;servers&gt;\n    &lt;server&gt;\n      &lt;id&gt;github&lt;/id&gt;\n      &lt;username&gt;userName&lt;/username&gt;\n      &lt;password&gt;password&lt;/password&gt;\n    &lt;/server&gt;\n  &lt;/servers&gt;\n&lt;/settings&gt;\n</code></pre>\n<ol start=\"4\">\n<li>Here is the pom for the project to be referenced:</li>\n</ol>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.companyName&lt;/groupId&gt;\n    &lt;artifactId&gt;testfunctions&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;distributionManagement&gt;\n        &lt;repository&gt;\n            &lt;id&gt;github&lt;/id&gt;\n            &lt;name&gt;GitHub username Apache Maven Packages&lt;/name&gt;\n            &lt;url&gt;https://maven.pkg.github.com/Owner/pName&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/distributionManagement&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java. Version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n            &lt;artifactId&gt;gson&lt;/artifactId&gt;\n            &lt;version&gt;2.9.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.json&lt;/groupId&gt;\n            &lt;artifactId&gt;json&lt;/artifactId&gt;\n            &lt;version&gt;20090211&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jsoup&lt;/groupId&gt;\n            &lt;artifactId&gt;jsoup&lt;/artifactId&gt;\n            &lt;version&gt;1.14.3&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n            &lt;artifactId&gt;httpmime&lt;/artifactId&gt;\n            &lt;version&gt;4.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<ol start=\"5\">\n<li>Here is the pom for the project trying to reference the packaged:</li>\n</ol>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.companyName&lt;/groupId&gt;\n    &lt;artifactId&gt;testconvert&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.companyName&lt;/groupId&gt;\n            &lt;artifactId&gt;testfunctions&lt;/artifactId&gt;\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0.7&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n            &lt;artifactId&gt;gson&lt;/artifactId&gt;\n            &lt;version&gt;2.9.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.json&lt;/groupId&gt;\n            &lt;artifactId&gt;json&lt;/artifactId&gt;\n            &lt;version&gt;20090211&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jsoup&lt;/groupId&gt;\n            &lt;artifactId&gt;jsoup&lt;/artifactId&gt;\n            &lt;version&gt;1.14.3&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n            &lt;artifactId&gt;httpmime&lt;/artifactId&gt;\n            &lt;version&gt;4.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Issue: Despite my efforts, when I run mvn install, nothing installs, even after forcing it with mvn clean install -U. This process seems to work fine with other non-Spring projects.</p>\n<p>Is there something different I need to do to make this work with a Spring Boot app? Is it possible?</p>\n"},{"tags":["java","json","spring","gson","deserialization"],"comments":[{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":2,"creation_date":1693937678,"post_id":77046846,"comment_id":135824650,"body_markdown":"`Meta` and `Customer` are children of `Data` and should be moved to that class","body":"<code>Meta</code> and <code>Customer</code> are children of <code>Data</code> and should be moved to that class"},{"owner":{"account_id":6184227,"reputation":1190,"user_id":4818789,"accept_rate":60,"display_name":"Teddy Kossoko"},"score":0,"creation_date":1693937880,"post_id":77046846,"comment_id":135824672,"body_markdown":"@QBrute thank you very much. I spent hours on it. TY. Please last question, why     `@JsonProperty(&quot;tx_ref&quot;)\n    private String txRef;` is not converted and null in the object ?","body":"@QBrute thank you very much. I spent hours on it. TY. Please last question, why     <code>@JsonProperty(&quot;tx_ref&quot;)     private String txRef;</code> is not converted and null in the object ?"},{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":1,"creation_date":1693938362,"post_id":77046846,"comment_id":135824756,"body_markdown":"`@JsonProperty` is from Jackson. You&#39;re using Gson, so you need `@SerializedName`. Please read the [documentation](https://www.javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/annotations/SerializedName.html)","body":"<code>@JsonProperty</code> is from Jackson. You&#39;re using Gson, so you need <code>@SerializedName</code>. Please read the <a href=\"https://www.javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/annotations/SerializedName.html\" rel=\"nofollow noreferrer\">documentation</a>"},{"owner":{"account_id":6184227,"reputation":1190,"user_id":4818789,"accept_rate":60,"display_name":"Teddy Kossoko"},"score":0,"creation_date":1693939048,"post_id":77046846,"comment_id":135824879,"body_markdown":"Perfect, i reuse Jackson, add `@JsonIgnoreProperties(ignoreUnknown = true)` on object and works. Thank you","body":"Perfect, i reuse Jackson, add <code>@JsonIgnoreProperties(ignoreUnknown = true)</code> on object and works. Thank you"}],"owner":{"account_id":6184227,"reputation":1190,"user_id":4818789,"accept_rate":60,"display_name":"Teddy Kossoko"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693938046,"creation_date":1693937487,"question_id":77046846,"body_markdown":"It is very strange, it should be simple, but i don&#39;t know why, i&#39;m not able to transform my string json to object.\r\n\r\nThe JSON string:\r\n\r\n```json\r\n{\r\n  &quot;status&quot;: &quot;success&quot;,\r\n  &quot;message&quot;: &quot;Transaction fetched successfully&quot;,\r\n  &quot;data&quot;: {\r\n    &quot;id&quot;: 4576711,\r\n    &quot;tx_ref&quot;: &quot;efe4e0da-192c-406e-acf4-aeb118a2c700&quot;,\r\n    &quot;flw_ref&quot;: &quot;XXXXXXXXXXXX&quot;,\r\n    &quot;device_fingerprint&quot;: &quot;3db1a1db1ca4f052bc40fb464b0d0750&quot;,\r\n    &quot;amount&quot;: 150,\r\n    &quot;currency&quot;: &quot;XOF&quot;,\r\n    &quot;charged_amount&quot;: 150,\r\n    &quot;app_fee&quot;: 2.1,\r\n    &quot;merchant_fee&quot;: 0,\r\n    &quot;processor_response&quot;: &quot;Transaction Successful&quot;,\r\n    &quot;auth_model&quot;: &quot;AUTH&quot;,\r\n    &quot;ip&quot;: &quot;54.75.161.64&quot;,\r\n    &quot;narration&quot;: &quot;XXXXX_XXXXXX&quot;,\r\n    &quot;status&quot;: &quot;successful&quot;,\r\n    &quot;payment_type&quot;: &quot;XXXXXXXXXX&quot;,\r\n    &quot;created_at&quot;: &quot;2023-09-05T11:14:13.000Z&quot;,\r\n    &quot;account_id&quot;: 1851620,\r\n    &quot;meta&quot;: {\r\n      &quot;__CheckoutInitAddress&quot;: &quot;https://ravemodal-dev.herokuapp.com/v3/hosted/pay&quot;,\r\n      &quot;typeRequest&quot;: &quot;PASS_SUBSCRIPTION&quot;\r\n    },\r\n    &quot;amount_settled&quot;: 147.9,\r\n    &quot;customer&quot;: {\r\n      &quot;id&quot;: 2156304,\r\n      &quot;name&quot;: &quot;XXXXXXXXX&quot;,\r\n      &quot;phone_number&quot;: &quot;221123456789&quot;,\r\n      &quot;email&quot;: &quot;sav@XXXXX.XXXX&quot;,\r\n      &quot;created_at&quot;: &quot;2023-07-26T00:10:17.000Z&quot;\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n\r\nI want to convert to the object `FlwCashoutCallbackDto` and this object is \r\n\r\n```java\r\npublic class FlwCashoutCallbackDto  {\r\n\tprivate String event;\r\n\tprivate Data data;\t\r\n\tprivate Customer customer;\r\n\tprivate Meta meta;\r\n\t\r\n\t@JsonProperty(&quot;event.type&quot;)\r\n\tprivate String eventType;\r\n\t\r\n\tprivate String message;\r\n\tprivate String status;\r\n}\r\n```\r\n\r\nThe the `Meta` class:\r\n\r\n```java\r\npublic class Meta {\r\n\tprivate String __CheckoutInitAddress;\r\n\tprivate String typeRequest; // use to know how to redirect\r\n}\r\n```\r\n\r\nThe `Data` class:\r\n\r\n```java\r\npublic class Data {\r\n\tprivate int id;\r\n\t\r\n\t@JsonProperty(&quot;tx_ref&quot;)\r\n\tprivate String txRef;\r\n\t@JsonProperty(&quot;flw_ref&quot;)\r\n\tprivate String flwRef;\r\n\t@JsonProperty(&quot;device_fingerprint&quot;)\r\n\tprivate String deviceFingerprint;\r\n\tprivate BigDecimal amount;\r\n\tprivate String currency;\r\n\t@JsonProperty(&quot;charged_amount&quot;)\r\n\tprivate BigDecimal chargedAmount;\r\n\t@JsonProperty(&quot;app_fee&quot;)\r\n\tprivate BigDecimal appFee;\r\n\t@JsonProperty(&quot;merchant_fee&quot;)\r\n\tprivate BigDecimal merchantFee;\r\n\t@JsonProperty(&quot;processor_response&quot;)\r\n\tprivate String processorResponse;\r\n\t@JsonProperty(&quot;auth_model&quot;)\r\n\tprivate String authModel;\r\n\t\r\n\tprivate String ip;\r\n\tprivate String narration;\r\n\tprivate String status;\r\n\t@JsonProperty(&quot;payment_type&quot;)\r\n\tprivate String paymentType;\r\n\t@JsonProperty(&quot;created_at&quot;)\r\n\tprivate Date createdAt;\r\n\t@JsonProperty(&quot;account_id&quot;)\r\n\tprivate int accountId;\r\n\t\r\n\tprivate Customer customer;\r\n}\r\n```\r\n\r\nBut when I try to convert to `FlwCashoutCallbackDto`, Meta is `Null` and many properties inside Data missing and i have this result \r\n\r\n&gt; FlwCashoutCallbackDto(event=null, data=Data(id=XXXXXX, txRef=null, flwRef=null, deviceFingerprint=null, amount=150, currency=XOF, chargedAmount=null, appFee=null, merchantFee=null, processorResponse=null, authModel=null, ip=54.75.161.64, narration=Gara France, status=successful, paymentType=null, createdAt=null, accountId=0, customer=Customer(id=2156304, name=XXXX, phoneNumber=null, email=sav@gara.store)), customer=null, meta=null, eventType=null, message=Transaction fetched successfully, status=success)\r\n\r\n\r\nMy code is just this : \r\n\r\n```java\r\nString data = &quot;{\\&quot;status\\&quot;:\\&quot;success\\&quot;,\\&quot;message\\&quot;:\\&quot;Transaction fetched successfully\\&quot;,\\&quot;data\\&quot;:{\\&quot;id\\&quot;:4576711,\\&quot;tx_ref\\&quot;:\\&quot;efe4e0da-192c-406e-acf4-aeb118a2c700\\&quot;,\\&quot;flw_ref\\&quot;:\\&quot;xxxxxxxxx\\&quot;,\\&quot;device_fingerprint\\&quot;:\\&quot;3db1a1db1ca4f052bc40fb464b0d0750\\&quot;,\\&quot;amount\\&quot;:150,\\&quot;currency\\&quot;:\\&quot;XOF\\&quot;,\\&quot;charged_amount\\&quot;:150,\\&quot;app_fee\\&quot;:2.1,\\&quot;merchant_fee\\&quot;:0,\\&quot;processor_response\\&quot;:\\&quot;Transaction Successful\\&quot;,\\&quot;auth_model\\&quot;:\\&quot;AUTH\\&quot;,\\&quot;ip\\&quot;:\\&quot;54.75.161.64\\&quot;,\\&quot;narration\\&quot;:\\&quot;Gara France\\&quot;,\\&quot;status\\&quot;:\\&quot;successful\\&quot;,\\&quot;payment_type\\&quot;:\\&quot;XXXXXXXX\\&quot;,\\&quot;created_at\\&quot;:\\&quot;2023-09-05T11:14:13.000Z\\&quot;,\\&quot;account_id\\&quot;:1851620,\\&quot;meta\\&quot;:{\\&quot;__CheckoutInitAddress\\&quot;:\\&quot;https://ravemodal-dev.herokuapp.com/v3/hosted/pay\\&quot;,\\&quot;typeRequest\\&quot;:\\&quot;PASS_SUBSCRIPTION\\&quot;},\\&quot;amount_settled\\&quot;:147.9,\\&quot;customer\\&quot;:{\\&quot;id\\&quot;:2156304,\\&quot;name\\&quot;:\\&quot;XXXXX\\&quot;,\\&quot;phone_number\\&quot;:\\&quot;221123456789\\&quot;,\\&quot;email\\&quot;:\\&quot;XXXXX\\&quot;,\\&quot;created_at\\&quot;:\\&quot;2023-07-26T00:10:17.000Z\\&quot;}}}&quot;;\r\n\t\t\r\nFlwCashoutCallbackDto callbackDto = new Gson().fromJson(data, FlwCashoutCallbackDto.class);\r\n```\r\n\r\nWith data containing the initial JSON string.\r\n\r\nWhat is wrong with my code? ","title":"Impossible to convert correctly json string to object with Gson","body":"<p>It is very strange, it should be simple, but i don't know why, i'm not able to transform my string json to object.</p>\n<p>The JSON string:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;status&quot;: &quot;success&quot;,\n  &quot;message&quot;: &quot;Transaction fetched successfully&quot;,\n  &quot;data&quot;: {\n    &quot;id&quot;: 4576711,\n    &quot;tx_ref&quot;: &quot;efe4e0da-192c-406e-acf4-aeb118a2c700&quot;,\n    &quot;flw_ref&quot;: &quot;XXXXXXXXXXXX&quot;,\n    &quot;device_fingerprint&quot;: &quot;3db1a1db1ca4f052bc40fb464b0d0750&quot;,\n    &quot;amount&quot;: 150,\n    &quot;currency&quot;: &quot;XOF&quot;,\n    &quot;charged_amount&quot;: 150,\n    &quot;app_fee&quot;: 2.1,\n    &quot;merchant_fee&quot;: 0,\n    &quot;processor_response&quot;: &quot;Transaction Successful&quot;,\n    &quot;auth_model&quot;: &quot;AUTH&quot;,\n    &quot;ip&quot;: &quot;54.75.161.64&quot;,\n    &quot;narration&quot;: &quot;XXXXX_XXXXXX&quot;,\n    &quot;status&quot;: &quot;successful&quot;,\n    &quot;payment_type&quot;: &quot;XXXXXXXXXX&quot;,\n    &quot;created_at&quot;: &quot;2023-09-05T11:14:13.000Z&quot;,\n    &quot;account_id&quot;: 1851620,\n    &quot;meta&quot;: {\n      &quot;__CheckoutInitAddress&quot;: &quot;https://ravemodal-dev.herokuapp.com/v3/hosted/pay&quot;,\n      &quot;typeRequest&quot;: &quot;PASS_SUBSCRIPTION&quot;\n    },\n    &quot;amount_settled&quot;: 147.9,\n    &quot;customer&quot;: {\n      &quot;id&quot;: 2156304,\n      &quot;name&quot;: &quot;XXXXXXXXX&quot;,\n      &quot;phone_number&quot;: &quot;221123456789&quot;,\n      &quot;email&quot;: &quot;sav@XXXXX.XXXX&quot;,\n      &quot;created_at&quot;: &quot;2023-07-26T00:10:17.000Z&quot;\n    }\n  }\n}\n</code></pre>\n<p>I want to convert to the object <code>FlwCashoutCallbackDto</code> and this object is</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class FlwCashoutCallbackDto  {\n    private String event;\n    private Data data;  \n    private Customer customer;\n    private Meta meta;\n    \n    @JsonProperty(&quot;event.type&quot;)\n    private String eventType;\n    \n    private String message;\n    private String status;\n}\n</code></pre>\n<p>The the <code>Meta</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Meta {\n    private String __CheckoutInitAddress;\n    private String typeRequest; // use to know how to redirect\n}\n</code></pre>\n<p>The <code>Data</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Data {\n    private int id;\n    \n    @JsonProperty(&quot;tx_ref&quot;)\n    private String txRef;\n    @JsonProperty(&quot;flw_ref&quot;)\n    private String flwRef;\n    @JsonProperty(&quot;device_fingerprint&quot;)\n    private String deviceFingerprint;\n    private BigDecimal amount;\n    private String currency;\n    @JsonProperty(&quot;charged_amount&quot;)\n    private BigDecimal chargedAmount;\n    @JsonProperty(&quot;app_fee&quot;)\n    private BigDecimal appFee;\n    @JsonProperty(&quot;merchant_fee&quot;)\n    private BigDecimal merchantFee;\n    @JsonProperty(&quot;processor_response&quot;)\n    private String processorResponse;\n    @JsonProperty(&quot;auth_model&quot;)\n    private String authModel;\n    \n    private String ip;\n    private String narration;\n    private String status;\n    @JsonProperty(&quot;payment_type&quot;)\n    private String paymentType;\n    @JsonProperty(&quot;created_at&quot;)\n    private Date createdAt;\n    @JsonProperty(&quot;account_id&quot;)\n    private int accountId;\n    \n    private Customer customer;\n}\n</code></pre>\n<p>But when I try to convert to <code>FlwCashoutCallbackDto</code>, Meta is <code>Null</code> and many properties inside Data missing and i have this result</p>\n<blockquote>\n<p>FlwCashoutCallbackDto(event=null, data=Data(id=XXXXXX, txRef=null, flwRef=null, deviceFingerprint=null, amount=150, currency=XOF, chargedAmount=null, appFee=null, merchantFee=null, processorResponse=null, authModel=null, ip=54.75.161.64, narration=Gara France, status=successful, paymentType=null, createdAt=null, accountId=0, customer=Customer(id=2156304, name=XXXX, phoneNumber=null, email=sav@gara.store)), customer=null, meta=null, eventType=null, message=Transaction fetched successfully, status=success)</p>\n</blockquote>\n<p>My code is just this :</p>\n<pre class=\"lang-java prettyprint-override\"><code>String data = &quot;{\\&quot;status\\&quot;:\\&quot;success\\&quot;,\\&quot;message\\&quot;:\\&quot;Transaction fetched successfully\\&quot;,\\&quot;data\\&quot;:{\\&quot;id\\&quot;:4576711,\\&quot;tx_ref\\&quot;:\\&quot;efe4e0da-192c-406e-acf4-aeb118a2c700\\&quot;,\\&quot;flw_ref\\&quot;:\\&quot;xxxxxxxxx\\&quot;,\\&quot;device_fingerprint\\&quot;:\\&quot;3db1a1db1ca4f052bc40fb464b0d0750\\&quot;,\\&quot;amount\\&quot;:150,\\&quot;currency\\&quot;:\\&quot;XOF\\&quot;,\\&quot;charged_amount\\&quot;:150,\\&quot;app_fee\\&quot;:2.1,\\&quot;merchant_fee\\&quot;:0,\\&quot;processor_response\\&quot;:\\&quot;Transaction Successful\\&quot;,\\&quot;auth_model\\&quot;:\\&quot;AUTH\\&quot;,\\&quot;ip\\&quot;:\\&quot;54.75.161.64\\&quot;,\\&quot;narration\\&quot;:\\&quot;Gara France\\&quot;,\\&quot;status\\&quot;:\\&quot;successful\\&quot;,\\&quot;payment_type\\&quot;:\\&quot;XXXXXXXX\\&quot;,\\&quot;created_at\\&quot;:\\&quot;2023-09-05T11:14:13.000Z\\&quot;,\\&quot;account_id\\&quot;:1851620,\\&quot;meta\\&quot;:{\\&quot;__CheckoutInitAddress\\&quot;:\\&quot;https://ravemodal-dev.herokuapp.com/v3/hosted/pay\\&quot;,\\&quot;typeRequest\\&quot;:\\&quot;PASS_SUBSCRIPTION\\&quot;},\\&quot;amount_settled\\&quot;:147.9,\\&quot;customer\\&quot;:{\\&quot;id\\&quot;:2156304,\\&quot;name\\&quot;:\\&quot;XXXXX\\&quot;,\\&quot;phone_number\\&quot;:\\&quot;221123456789\\&quot;,\\&quot;email\\&quot;:\\&quot;XXXXX\\&quot;,\\&quot;created_at\\&quot;:\\&quot;2023-07-26T00:10:17.000Z\\&quot;}}}&quot;;\n        \nFlwCashoutCallbackDto callbackDto = new Gson().fromJson(data, FlwCashoutCallbackDto.class);\n</code></pre>\n<p>With data containing the initial JSON string.</p>\n<p>What is wrong with my code?</p>\n"},{"tags":["java","jackson","tuples","jackson-modules"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1693941067,"post_id":77046649,"comment_id":135825224,"body_markdown":"This sounds like a good use case for a Java [record](https://openjdk.org/jeps/395) class.","body":"This sounds like a good use case for a Java <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">record</a> class."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1694454690,"post_id":77046649,"comment_id":135890316,"body_markdown":"Hmm, I wouldn&#39;t use this &quot;JavaTuples.&quot; It calls `Unit&lt;A&gt;` &quot;A tuple of one element&quot; but `Unit` is the tuple of zero elements. It looks like whoever wrote it doesn&#39;t really know what tuples are.","body":"Hmm, I wouldn&#39;t use this &quot;JavaTuples.&quot; It calls <code>Unit&lt;A&gt;</code> &quot;A tuple of one element&quot; but <code>Unit</code> is the tuple of zero elements. It looks like whoever wrote it doesn&#39;t really know what tuples are."}],"answers":[{"tags":[],"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693937404,"creation_date":1693937404,"answer_id":77046840,"question_id":77046649,"body_markdown":"The JSON Object seems to map to\r\n\r\n    class T {\r\n     int size;\r\n     List&lt;String&gt; value1;\r\n     List&lt;String&gt; value2;\r\n     List&lt;String&gt; value3;\r\n    }\r\n\r\nWhy not deserialize into this object ?\r\n","title":"JavaTuples API - can not deserialize as they do NOT have no args constructor","body":"<p>The JSON Object seems to map to</p>\n<pre><code>class T {\n int size;\n List&lt;String&gt; value1;\n List&lt;String&gt; value2;\n List&lt;String&gt; value3;\n}\n</code></pre>\n<p>Why not deserialize into this object ?</p>\n"},{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693937512,"creation_date":1693937512,"answer_id":77046849,"question_id":77046649,"body_markdown":"From what I have researched, you can&#39;t configure this in Jackson. In my opinion, your best solution would be to use a `Custom JsonDeserializer`, as you already know.\r\n\r\nBased on your example, I do it this way:\r\n\r\n```java\r\npublic class TripletDeserializer extends JsonDeserializer&lt;Triplet&lt;List&lt;String&gt;, List&lt;String&gt;, List&lt;String&gt;&gt;&gt; {\r\n\t@Override\r\n\tpublic Triplet&lt;List&lt;String&gt;, List&lt;String&gt;, List&lt;String&gt;&gt; deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException {\r\n\t\tJsonNode node = jsonParser.getCodec().readTree(jsonParser);\r\n\t\treturn new Triplet&lt;&gt;(getNodeList(node.get(&quot;value0&quot;)), getNodeList(node.get(&quot;value1&quot;)), getNodeList(node.get(&quot;value2&quot;)));\r\n\t}\r\n\r\n\tprivate List&lt;String&gt; getNodeList(JsonNode valueNode) {\r\n\t\tList&lt;String&gt; value = new ArrayList&lt;&gt;();\r\n\t\tif (valueNode != null &amp;&amp; valueNode.isArray()) {\r\n\t\t\tfor (JsonNode element : valueNode) {\r\n\t\t\t\tvalue.add(element.asText());\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n}\r\n```","title":"JavaTuples API - can not deserialize as they do NOT have no args constructor","body":"<p>From what I have researched, you can't configure this in Jackson. In my opinion, your best solution would be to use a <code>Custom JsonDeserializer</code>, as you already know.</p>\n<p>Based on your example, I do it this way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class TripletDeserializer extends JsonDeserializer&lt;Triplet&lt;List&lt;String&gt;, List&lt;String&gt;, List&lt;String&gt;&gt;&gt; {\n    @Override\n    public Triplet&lt;List&lt;String&gt;, List&lt;String&gt;, List&lt;String&gt;&gt; deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException {\n        JsonNode node = jsonParser.getCodec().readTree(jsonParser);\n        return new Triplet&lt;&gt;(getNodeList(node.get(&quot;value0&quot;)), getNodeList(node.get(&quot;value1&quot;)), getNodeList(node.get(&quot;value2&quot;)));\n    }\n\n    private List&lt;String&gt; getNodeList(JsonNode valueNode) {\n        List&lt;String&gt; value = new ArrayList&lt;&gt;();\n        if (valueNode != null &amp;&amp; valueNode.isArray()) {\n            for (JsonNode element : valueNode) {\n                value.add(element.asText());\n            }\n        }\n        return value;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28666351,"reputation":77,"user_id":21950267,"display_name":"CodeBot"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1693937512,"creation_date":1693935420,"question_id":77046649,"body_markdown":"I am using [javatuples][1] as I have to return multiple arguments from few of my methods calls.\r\n\r\nEverything seem good until I tried to deserialize a jsonString in to a [Triplet][2].\r\nSeems the tuples classes(Triplet etc) don&#39;t have a no-args constructor, so jackson is not able to deserialize. \r\n\r\nMy code is roughly as below - \r\n\r\n    String json = &quot;&quot;&quot;{&quot;size&quot;:3,&quot;value0&quot;:[&quot;dataPoint1&quot;, &quot;dataPoint2&quot;],&quot;value1&quot;:[&quot;dataPoint3&quot;],&quot;value2&quot;:[&quot;dataPoint2&quot;, &quot;dataPoint3&quot;]}&quot;&quot;&quot;;   \r\n    Triplet&lt;List&lt;String&gt;, List&lt;String&gt;, List&lt;String&gt;&gt; serviceResponse = objectMapper.readValue(json, new TypeReference&lt;&gt;(){});\r\n\r\nAnd the exception I am getting is - \r\n\r\n&gt; Cannot construct instance of `org.javatuples.Triplet` (no Creators,\r\n&gt; like default constructor, exist): cannot deserialize from Object value\r\n&gt; (no delegate- or property-based Creator)\r\n\r\n**DO I HAVE ANY OTHER WORK AROUNDS?** My actual data i very huge so deserilzation approach is required for my case. \r\nAre there any jackson configuration etc that can fix this issue. \r\n\r\nI am thinking a Custom JsonDeserializer might help. But other simple solutions are welcome too.\r\n\r\n  [1]: https://www.javatuples.org/\r\n  [2]: https://www.javatuples.org/apidocs/org/javatuples/Triplet.html","title":"JavaTuples API - can not deserialize as they do NOT have no args constructor","body":"<p>I am using <a href=\"https://www.javatuples.org/\" rel=\"nofollow noreferrer\">javatuples</a> as I have to return multiple arguments from few of my methods calls.</p>\n<p>Everything seem good until I tried to deserialize a jsonString in to a <a href=\"https://www.javatuples.org/apidocs/org/javatuples/Triplet.html\" rel=\"nofollow noreferrer\">Triplet</a>.\nSeems the tuples classes(Triplet etc) don't have a no-args constructor, so jackson is not able to deserialize.</p>\n<p>My code is roughly as below -</p>\n<pre><code>String json = &quot;&quot;&quot;{&quot;size&quot;:3,&quot;value0&quot;:[&quot;dataPoint1&quot;, &quot;dataPoint2&quot;],&quot;value1&quot;:[&quot;dataPoint3&quot;],&quot;value2&quot;:[&quot;dataPoint2&quot;, &quot;dataPoint3&quot;]}&quot;&quot;&quot;;   \nTriplet&lt;List&lt;String&gt;, List&lt;String&gt;, List&lt;String&gt;&gt; serviceResponse = objectMapper.readValue(json, new TypeReference&lt;&gt;(){});\n</code></pre>\n<p>And the exception I am getting is -</p>\n<blockquote>\n<p>Cannot construct instance of <code>org.javatuples.Triplet</code> (no Creators,\nlike default constructor, exist): cannot deserialize from Object value\n(no delegate- or property-based Creator)</p>\n</blockquote>\n<p><strong>DO I HAVE ANY OTHER WORK AROUNDS?</strong> My actual data i very huge so deserilzation approach is required for my case.\nAre there any jackson configuration etc that can fix this issue.</p>\n<p>I am thinking a Custom JsonDeserializer might help. But other simple solutions are welcome too.</p>\n"},{"tags":["java","apache-commons-math"],"answers":[{"tags":[],"owner":{"account_id":3439841,"reputation":14084,"user_id":2882051,"display_name":"chengpohi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1535869676,"creation_date":1535869676,"answer_id":52134539,"question_id":52134365,"body_markdown":"Seems there is no simple method to achieve that, how about generating a **ones matrix** to do the **sum**?, like:\r\n\r\n    //get the row sums\r\n    mtx.multiply(MatrixUtils.createRealMatrix(new double[][]{{1}, {1}}))\r\n    &gt; Array2DRowRealMatrix{{3.0},{7.0},{11.0}}\r\n    //get the column sums\r\n    MatrixUtils.createRealMatrix(new double[][]{{1, 1, 1}}).multiply(mtx)\r\n    &gt; Array2DRowRealMatrix{{9.0,12.0}}\r\n\r\n","title":"Apache Commons Math: how to perform sum along rows/columns?","body":"<p>Seems there is no simple method to achieve that, how about generating a <strong>ones matrix</strong> to do the <strong>sum</strong>?, like:</p>\n\n<pre><code>//get the row sums\nmtx.multiply(MatrixUtils.createRealMatrix(new double[][]{{1}, {1}}))\n&gt; Array2DRowRealMatrix{{3.0},{7.0},{11.0}}\n//get the column sums\nMatrixUtils.createRealMatrix(new double[][]{{1, 1, 1}}).multiply(mtx)\n&gt; Array2DRowRealMatrix{{9.0,12.0}}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16279555,"reputation":327,"user_id":11755895,"display_name":"Vishala Ramasamy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693937369,"creation_date":1693937369,"answer_id":77046836,"question_id":52134365,"body_markdown":"Mathod to calculate **sum of absolute squares of values in matrix** in *Java* using *Apache commons Math* Library : **getFrobeniusNorm()**\r\n\r\n      import org.apache.commons.math4.legacy.linear.*;\r\n      RealMatrix realMatrix;  //initialize with your values\r\n      RealMatrix eigenVector; //initialize with your values\r\n      RealMatrix dotProduct = realMatrix.multiply(eigenVector);\r\n      double normalizedValue = dotProduct.getFrobeniusNorm();\r\n\r\nFormula :  Frobenius norm of matrix = sqrt( Sum(|a_(ij)|^2) ) where i=0 to m and j=0 to n ","title":"Apache Commons Math: how to perform sum along rows/columns?","body":"<p>Mathod to calculate <strong>sum of absolute squares of values in matrix</strong> in <em>Java</em> using <em>Apache commons Math</em> Library : <strong>getFrobeniusNorm()</strong></p>\n<pre><code>  import org.apache.commons.math4.legacy.linear.*;\n  RealMatrix realMatrix;  //initialize with your values\n  RealMatrix eigenVector; //initialize with your values\n  RealMatrix dotProduct = realMatrix.multiply(eigenVector);\n  double normalizedValue = dotProduct.getFrobeniusNorm();\n</code></pre>\n<p>Formula :  Frobenius norm of matrix = sqrt( Sum(|a_(ij)|^2) ) where i=0 to m and j=0 to n</p>\n"}],"owner":{"account_id":7445759,"reputation":511,"user_id":5767875,"accept_rate":100,"display_name":"cwl"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":845,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":52134539,"answer_count":2,"score":0,"last_activity_date":1693937369,"creation_date":1535867655,"question_id":52134365,"body_markdown":"I&#39;m pretty new to Apache Common Math, so please pardon the trivial questions. \r\n\r\nBased on the [API doc][1], I&#39;m unable to figure out how to perform column-wise or row-wise sum. \r\n\r\n    import org.apache.commons.math3.linear.RealMatrix;\r\n    import org.apache.commons.math3.linear.MatrixUtils;\r\n\r\n\tdouble[][] values = {{1.0, 2.0}, {3.0, 4.0}, {5.0, 6.0}};\r\n    RealMatrix mtx = MatrixUtils.createRealMatrix(values);\r\n\r\nThe above code generate a matrix like the following:\r\n\r\n    [[1, 2],\r\n     [3, 4],\r\n     [5, 6]]\r\n\r\nWhat&#39;s the right syntax to perform column-wise sum? Which would give me:\r\n\r\n    [9, 12]\r\n\r\nAnd how do I perform row-wise sum? Which would give me:\r\n\r\n    [3,\r\n     7,\r\n     11\r\n    ]\r\n\r\nFor comparison, below is the syntax in Scala&#39;s Breeze library:\r\n\r\n    import breeze.linalg._\r\n    val mtx = DenseMatrix((1.0, 2.0), (3.0, 4.0), (5.0, 6.0))\r\n\r\n    // sum along the column direction\r\n    sum(mtx(::, *))\r\n    // Transpose(DenseVector(9.0, 12.0))\r\n\r\n\r\n    // sum along the row direction\r\n    sum(mtx(*, ::))\r\n    // DenseVector(3.0, 7.0, 11.0)\r\n\r\n  [1]: http://commons.apache.org/proper/commons-math/javadocs/api-3.3/org/apache/commons/math3/linear/RealMatrix.html","title":"Apache Commons Math: how to perform sum along rows/columns?","body":"<p>I'm pretty new to Apache Common Math, so please pardon the trivial questions. </p>\n\n<p>Based on the <a href=\"http://commons.apache.org/proper/commons-math/javadocs/api-3.3/org/apache/commons/math3/linear/RealMatrix.html\" rel=\"nofollow noreferrer\">API doc</a>, I'm unable to figure out how to perform column-wise or row-wise sum. </p>\n\n<pre><code>import org.apache.commons.math3.linear.RealMatrix;\nimport org.apache.commons.math3.linear.MatrixUtils;\n\ndouble[][] values = {{1.0, 2.0}, {3.0, 4.0}, {5.0, 6.0}};\nRealMatrix mtx = MatrixUtils.createRealMatrix(values);\n</code></pre>\n\n<p>The above code generate a matrix like the following:</p>\n\n<pre><code>[[1, 2],\n [3, 4],\n [5, 6]]\n</code></pre>\n\n<p>What's the right syntax to perform column-wise sum? Which would give me:</p>\n\n<pre><code>[9, 12]\n</code></pre>\n\n<p>And how do I perform row-wise sum? Which would give me:</p>\n\n<pre><code>[3,\n 7,\n 11\n]\n</code></pre>\n\n<p>For comparison, below is the syntax in Scala's Breeze library:</p>\n\n<pre><code>import breeze.linalg._\nval mtx = DenseMatrix((1.0, 2.0), (3.0, 4.0), (5.0, 6.0))\n\n// sum along the column direction\nsum(mtx(::, *))\n// Transpose(DenseVector(9.0, 12.0))\n\n\n// sum along the row direction\nsum(mtx(*, ::))\n// DenseVector(3.0, 7.0, 11.0)\n</code></pre>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1679943985,"post_id":75859503,"comment_id":133808607,"body_markdown":"Does this answer your question? [Android studio: error: incompatible types: double cannot be converted to String](https://stackoverflow.com/questions/48731777/android-studio-error-incompatible-types-double-cannot-be-converted-to-string)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/48731777/android-studio-error-incompatible-types-double-cannot-be-converted-to-string\">Android studio: error: incompatible types: double cannot be converted to String</a>"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":5,"creation_date":1679944260,"post_id":75859503,"comment_id":133808659,"body_markdown":"Look at `return bmi;` - what type is `bmi` in this statement? What type does `berekenBmi` return? Nothing in the method needs to change except this statement.","body":"Look at <code>return bmi;</code> - what type is <code>bmi</code> in this statement? What type does <code>berekenBmi</code> return? Nothing in the method needs to change except this statement."},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":4,"creation_date":1679944714,"post_id":75859503,"comment_id":133808755,"body_markdown":"You can remove the last `return` statement and replace the last `else if()` with a simple `else`, since the case `bmi &gt; 35` is the only one left and doesn&#39;t need to be checked. (And you would handle the case where `bmi == 35`).","body":"You can remove the last <code>return</code> statement and replace the last <code>else if()</code> with a simple <code>else</code>, since the case <code>bmi &gt; 35</code> is the only one left and doesn&#39;t need to be checked. (And you would handle the case where <code>bmi == 35</code>)."},{"owner":{"account_id":4803234,"reputation":721,"user_id":3879214,"display_name":"Anu Martin"},"score":0,"creation_date":1679945647,"post_id":75859503,"comment_id":133808948,"body_markdown":"@Progman he/she is right. You don&#39;t actually need that &quot;else if&quot;","body":"@Progman he/she is right. You don&#39;t actually need that &quot;else if&quot;"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":1,"creation_date":1679947345,"post_id":75859503,"comment_id":133809329,"body_markdown":"@Progman actually the behaviour of the code changes, when you remove that last return, as `bmi==35.0` is the only case that is handled by this last `return` - but I have to admit that it probably wasn&#39;t intended ... also if it was intended you could replace it with `return &quot;35&quot;;` and the problem of conversion from `double` to `String` also would be solved. ;-)","body":"@Progman actually the behaviour of the code changes, when you remove that last return, as <code>bmi==35.0</code> is the only case that is handled by this last <code>return</code> - but I have to admit that it probably wasn&#39;t intended ... also if it was intended you could replace it with <code>return &quot;35&quot;;</code> and the problem of conversion from <code>double</code> to <code>String</code> also would be solved. ;-)"}],"answers":[{"tags":[],"owner":{"account_id":4803234,"reputation":721,"user_id":3879214,"display_name":"Anu Martin"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1679946110,"creation_date":1679944470,"answer_id":75859564,"question_id":75859503,"body_markdown":"**FOR YOUR QUESTION THIS ANSWER IS WRONG, BEST AND EASIEST WAY IS JUST TO DELETE THE LAST RETURN STATEMENT AND UPDATE LAST else if TO JUST ELSE.**\r\n\r\nbecause the last `else if` condition not going to be executed.\r\n\r\nOld answer(Not that old)\r\n\r\ninstead of returning bmi(double variable), just replace it with\r\n\r\n    return String.valueOf(bmi);\r\n\r\nIt will convert double to String.\r\n\r\nYou have specifically told the compiler, The function will return a String value, but when none of the conditions work on the berekenBmi() function will return a double.   \r\n\r\n ","title":"double cannot be converted to java.lang.String","body":"<p><strong>FOR YOUR QUESTION THIS ANSWER IS WRONG, BEST AND EASIEST WAY IS JUST TO DELETE THE LAST RETURN STATEMENT AND UPDATE LAST else if TO JUST ELSE.</strong></p>\n<p>because the last <code>else if</code> condition not going to be executed.</p>\n<p>Old answer(Not that old)</p>\n<p>instead of returning bmi(double variable), just replace it with</p>\n<pre><code>return String.valueOf(bmi);\n</code></pre>\n<p>It will convert double to String.</p>\n<p>You have specifically told the compiler, The function will return a String value, but when none of the conditions work on the berekenBmi() function will return a double.</p>\n"},{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1679947364,"creation_date":1679944707,"answer_id":75859593,"question_id":75859503,"body_markdown":"Instead of `return bmi;` you can try to `return String.valueOf(bmi)`.\r\n\r\nThis way you don&#39;t have control over the form that the double value gets converted to a string (see the JavaDoc of [String.valueOf(double)](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#valueOf(double)).\r\n\r\nAn alternative would be [String.format(String, Object...)](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#format(java.lang.String,java.lang.Object...)), where the first parameter is always the format (e.g. `&quot;%f&quot;`) and the rest are the parameters to format. The format string itself could contain text as well and you can format multiple parameters. It&#39;s syntax is documented [here](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Formatter.html#syntax).\r\n\r\nWith the format string you could e.g. control the number of digits after the decimal point, etc.\r\n\r\nUPDATE:\r\nPlease note that of your nested ifs one always will return a value, so if you want to combine the BMI value with the text, you could use the string formatter like this:\r\n\r\n``` lang-java\r\nString berekenBmi(double gewicht, double lengte) {\r\n    double bmi = gewicht / (lengte * lengte);\r\n\r\n    String diagnose;\r\n\r\n    if (bmi &lt; 16) {\r\n        diagnose = &quot;Gevaarlijk Ondergewicht&quot;;\r\n    } else if (bmi &gt;= 16 &amp;&amp; bmi &lt; 18.5) {\r\n        diagnose = &quot;Ondergewicht&quot;;\r\n    } else if (bmi &gt;= 18.5 &amp;&amp; bmi &lt; 25) {\r\n        diagnose = &quot;Ideaal gewicht&quot;;\r\n    } else if (bmi &gt;= 25 &amp;&amp; bmi &lt; 30) {\r\n        diagnose = &quot;Overgewicht&quot;;\r\n    } else if (bmi &gt;= 30 &amp;&amp; bmi &lt; 35) {\r\n        diagnose = &quot;Obesitas&quot;;\r\n    } else { // bmi &gt;= 35\r\n        diagnose = &quot;Morbide obesitas&quot;;\r\n    }\r\n    return String.format(&quot;BMI: %.1f (%s)&quot;, bmi, diagnose);\r\n}\r\n```","title":"double cannot be converted to java.lang.String","body":"<p>Instead of <code>return bmi;</code> you can try to <code>return String.valueOf(bmi)</code>.</p>\n<p>This way you don't have control over the form that the double value gets converted to a string (see the JavaDoc of <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#valueOf(double)\" rel=\"nofollow noreferrer\">String.valueOf(double)</a>.</p>\n<p>An alternative would be <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#format(java.lang.String,java.lang.Object...)\" rel=\"nofollow noreferrer\">String.format(String, Object...)</a>, where the first parameter is always the format (e.g. <code>&quot;%f&quot;</code>) and the rest are the parameters to format. The format string itself could contain text as well and you can format multiple parameters. It's syntax is documented <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Formatter.html#syntax\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>With the format string you could e.g. control the number of digits after the decimal point, etc.</p>\n<p>UPDATE:\nPlease note that of your nested ifs one always will return a value, so if you want to combine the BMI value with the text, you could use the string formatter like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String berekenBmi(double gewicht, double lengte) {\n    double bmi = gewicht / (lengte * lengte);\n\n    String diagnose;\n\n    if (bmi &lt; 16) {\n        diagnose = &quot;Gevaarlijk Ondergewicht&quot;;\n    } else if (bmi &gt;= 16 &amp;&amp; bmi &lt; 18.5) {\n        diagnose = &quot;Ondergewicht&quot;;\n    } else if (bmi &gt;= 18.5 &amp;&amp; bmi &lt; 25) {\n        diagnose = &quot;Ideaal gewicht&quot;;\n    } else if (bmi &gt;= 25 &amp;&amp; bmi &lt; 30) {\n        diagnose = &quot;Overgewicht&quot;;\n    } else if (bmi &gt;= 30 &amp;&amp; bmi &lt; 35) {\n        diagnose = &quot;Obesitas&quot;;\n    } else { // bmi &gt;= 35\n        diagnose = &quot;Morbide obesitas&quot;;\n    }\n    return String.format(&quot;BMI: %.1f (%s)&quot;, bmi, diagnose);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1679946505,"creation_date":1679944823,"answer_id":75859608,"question_id":75859503,"body_markdown":"You should return `String` from the method declared to return `String`, but you returned `double`. Change your code with the following\r\n\r\n```\r\nreturn Double.valueOf(bmi).toString();\r\n```\r\n\r\nThe variable is primitive type, and you cannot use typical `toString()` type conversion. But if you box a value to `Double` then can use it&#39;s method to convert the value to `String`.\r\n\r\nAlso note, that `Double` has different conversions that depends on the current locale. If you need your code to be localized then you have to return different representation of `Double`. It is only the reason to return it as `String`. \r\nOtherwise to convert it to string you should use a `NumberFormatter`.","title":"double cannot be converted to java.lang.String","body":"<p>You should return <code>String</code> from the method declared to return <code>String</code>, but you returned <code>double</code>. Change your code with the following</p>\n<pre><code>return Double.valueOf(bmi).toString();\n</code></pre>\n<p>The variable is primitive type, and you cannot use typical <code>toString()</code> type conversion. But if you box a value to <code>Double</code> then can use it's method to convert the value to <code>String</code>.</p>\n<p>Also note, that <code>Double</code> has different conversions that depends on the current locale. If you need your code to be localized then you have to return different representation of <code>Double</code>. It is only the reason to return it as <code>String</code>.\nOtherwise to convert it to string you should use a <code>NumberFormatter</code>.</p>\n"}],"owner":{"account_id":28131277,"reputation":1,"user_id":21495776,"display_name":"Lisa Van Den Broek"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1679945940,"answer_count":3,"score":-1,"last_activity_date":1693937358,"creation_date":1679943985,"question_id":75859503,"body_markdown":"I&#39;ve tried to work with a bmi calculator but once I&#39;ve compiled all my code I keep getting the error:\r\n&gt; incompatible types `double` cannot be converted to `java.lang.String`.\r\n\r\n```\r\nstatic String berekenBmi(double gewicht, double lengte) {\r\n    double bmi = gewicht / (lengte * lengte);\r\n\r\n    if (bmi &lt; 16) {\r\n        return &quot;Gevaarlijk Ondergewicht&quot;;\r\n    } else if (bmi &gt;= 16 &amp;&amp; bmi &lt; 18.5) {\r\n        return &quot;Ondergewicht&quot;;\r\n    } else if (bmi &gt;= 18.5 &amp;&amp; bmi &lt; 25) {\r\n        return &quot;Ideaal gewicht&quot;;\r\n    } else if (bmi &gt;= 25 &amp;&amp; bmi &lt; 30) {\r\n        return &quot;Overgewicht&quot;;\r\n    } else if (bmi &gt;= 30 &amp;&amp; bmi &lt; 35) {\r\n        return &quot;Obesitas&quot;;\r\n    } else if (bmi &gt; 35) {\r\n        return &quot;Morbide obesitas&quot;;\r\n    }\r\n    return bmi;\r\n}\r\n```\r\n\r\nI&#39;ve tried changing my `double` to `String` at the opening statement but that makes things worse.","title":"double cannot be converted to java.lang.String","body":"<p>I've tried to work with a bmi calculator but once I've compiled all my code I keep getting the error:</p>\n<blockquote>\n<p>incompatible types <code>double</code> cannot be converted to <code>java.lang.String</code>.</p>\n</blockquote>\n<pre><code>static String berekenBmi(double gewicht, double lengte) {\n    double bmi = gewicht / (lengte * lengte);\n\n    if (bmi &lt; 16) {\n        return &quot;Gevaarlijk Ondergewicht&quot;;\n    } else if (bmi &gt;= 16 &amp;&amp; bmi &lt; 18.5) {\n        return &quot;Ondergewicht&quot;;\n    } else if (bmi &gt;= 18.5 &amp;&amp; bmi &lt; 25) {\n        return &quot;Ideaal gewicht&quot;;\n    } else if (bmi &gt;= 25 &amp;&amp; bmi &lt; 30) {\n        return &quot;Overgewicht&quot;;\n    } else if (bmi &gt;= 30 &amp;&amp; bmi &lt; 35) {\n        return &quot;Obesitas&quot;;\n    } else if (bmi &gt; 35) {\n        return &quot;Morbide obesitas&quot;;\n    }\n    return bmi;\n}\n</code></pre>\n<p>I've tried changing my <code>double</code> to <code>String</code> at the opening statement but that makes things worse.</p>\n"},{"tags":["java","spring","maven","spring-boot"],"comments":[{"owner":{"account_id":1235468,"reputation":31121,"user_id":1199132,"accept_rate":83,"display_name":"Aritz"},"score":0,"creation_date":1557210741,"post_id":56016409,"comment_id":98677329,"body_markdown":"You mean you want to do it in Java code instead of in the POM file?","body":"You mean you want to do it in Java code instead of in the POM file?"},{"owner":{"account_id":7565436,"reputation":1179,"user_id":5741227,"accept_rate":86,"display_name":"iamjoshua"},"score":0,"creation_date":1557211269,"post_id":56016409,"comment_id":98677532,"body_markdown":"yeap, so long as its programmatically. BTW, I already did this through the POM file but it only worked for Sonar Qubes Code Coverage and not locally. My IntelliJ still reports a very low code coverage.","body":"yeap, so long as its programmatically. BTW, I already did this through the POM file but it only worked for Sonar Qubes Code Coverage and not locally. My IntelliJ still reports a very low code coverage."},{"owner":{"account_id":7565436,"reputation":1179,"user_id":5741227,"accept_rate":86,"display_name":"iamjoshua"},"score":0,"creation_date":1557211320,"post_id":56016409,"comment_id":98677553,"body_markdown":"The reason why I want this to be done programmaticallyis that I dont want scouring the settings of the project everytime just to add exclusions.Also it seems that it won&#39;t be carried over when push on git too as there was no files tracked in my project that was added when i did an exclusion through IntelliJs Run Configuration or Exclusions in Settings. hence I wanted to do it through a POM file or programmatically so that exclusion will be track by git and could be push that will take effect to those who pull from repo.","body":"The reason why I want this to be done programmaticallyis that I dont want scouring the settings of the project everytime just to add exclusions.Also it seems that it won&#39;t be carried over when push on git too as there was no files tracked in my project that was added when i did an exclusion through IntelliJs Run Configuration or Exclusions in Settings. hence I wanted to do it through a POM file or programmatically so that exclusion will be track by git and could be push that will take effect to those who pull from repo."},{"owner":{"account_id":1235468,"reputation":31121,"user_id":1199132,"accept_rate":83,"display_name":"Aritz"},"score":0,"creation_date":1557211626,"post_id":56016409,"comment_id":98677659,"body_markdown":"`it only worked for Sonar Qubes Code Coverage and not locally`. There&#39;s no way to know (the way your question is written) if there&#39;s any difference between your local config and the server config. `Not working at all` should be a description of what you have locally. What happens locally? Do you get any code coverage? Or do you get all the code covered and the sonar exclusions ignored? Do you use maven profiles? If yes, are the selected profiles different in the server and local?","body":"<code>it only worked for Sonar Qubes Code Coverage and not locally</code>. There&#39;s no way to know (the way your question is written) if there&#39;s any difference between your local config and the server config. <code>Not working at all</code> should be a description of what you have locally. What happens locally? Do you get any code coverage? Or do you get all the code covered and the sonar exclusions ignored? Do you use maven profiles? If yes, are the selected profiles different in the server and local?"},{"owner":{"account_id":7565436,"reputation":1179,"user_id":5741227,"accept_rate":86,"display_name":"iamjoshua"},"score":0,"creation_date":1557212049,"post_id":56016409,"comment_id":98677869,"body_markdown":"i was getting almost the same code coverage with sonar and locally before I added the exclusions for sonar. However, the same it not true as now I don&#39;t have a matching code coverage report locally as my local code coverage report is still not excluding the classes I did for sonar. I don&#39;t know how to do this programmatically to exclude the same classes too locally. I don&#39;t know about the profiles you are saying, but so far that is my issue. That the classes I excluded for code coverage in sonar is not being excluded in the Local Code Coverage report with IntelliJ.","body":"i was getting almost the same code coverage with sonar and locally before I added the exclusions for sonar. However, the same it not true as now I don&#39;t have a matching code coverage report locally as my local code coverage report is still not excluding the classes I did for sonar. I don&#39;t know how to do this programmatically to exclude the same classes too locally. I don&#39;t know about the profiles you are saying, but so far that is my issue. That the classes I excluded for code coverage in sonar is not being excluded in the Local Code Coverage report with IntelliJ."},{"owner":{"account_id":7565436,"reputation":1179,"user_id":5741227,"accept_rate":86,"display_name":"iamjoshua"},"score":0,"creation_date":1557212193,"post_id":56016409,"comment_id":98677940,"body_markdown":"What I&#39;m basically trying to do is have at least a very close coverage report with sonar since I&#39;m going to exclude the same classes that I excluded with sonar.exclusion property in the pom file. As of the moment, my sonar code coverage reports 86% coverage, while locally I&#39;m gettings 40% only which is a very big discrepancy. :/","body":"What I&#39;m basically trying to do is have at least a very close coverage report with sonar since I&#39;m going to exclude the same classes that I excluded with sonar.exclusion property in the pom file. As of the moment, my sonar code coverage reports 86% coverage, while locally I&#39;m gettings 40% only which is a very big discrepancy. :/"},{"owner":{"account_id":7565436,"reputation":1179,"user_id":5741227,"accept_rate":86,"display_name":"iamjoshua"},"score":0,"creation_date":1557212389,"post_id":56016409,"comment_id":98678049,"body_markdown":"Also, Is there anyway to have this configuration done in one go?. I mean, the exclusions for sonar coverage report will also reflect on the code coverage report locally made by IntelliJ?. Because as of the moment, it seems that the exclusions I made will only work with sonar. And I might have to really have a separate configuration which is okay for me anyway so long as that the coverage of sonar and intellij is the same.","body":"Also, Is there anyway to have this configuration done in one go?. I mean, the exclusions for sonar coverage report will also reflect on the code coverage report locally made by IntelliJ?. Because as of the moment, it seems that the exclusions I made will only work with sonar. And I might have to really have a separate configuration which is okay for me anyway so long as that the coverage of sonar and intellij is the same."},{"owner":{"account_id":1235468,"reputation":31121,"user_id":1199132,"accept_rate":83,"display_name":"Aritz"},"score":0,"creation_date":1557212546,"post_id":56016409,"comment_id":98678139,"body_markdown":"Try to run the coverage test outside IntelliJ (just Maven) and check if it happens, just to discard the IDE as part of the issue","body":"Try to run the coverage test outside IntelliJ (just Maven) and check if it happens, just to discard the IDE as part of the issue"},{"owner":{"account_id":7565436,"reputation":1179,"user_id":5741227,"accept_rate":86,"display_name":"iamjoshua"},"score":0,"creation_date":1557213488,"post_id":56016409,"comment_id":98678659,"body_markdown":"I just did with mvn test. And I&#39;m getting a much lower report. The classes I want to be excluded is still on the report. :/","body":"I just did with mvn test. And I&#39;m getting a much lower report. The classes I want to be excluded is still on the report. :/"}],"answers":[{"tags":[],"owner":{"account_id":12730678,"reputation":2541,"user_id":9247465,"accept_rate":100,"display_name":"AConsumer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1557209404,"creation_date":1557209404,"answer_id":56016480,"question_id":56016409,"body_markdown":"In the `application.properties` you can do something like this: \r\n\r\n    sonar.exclusions=src/main/java/com/example/org/test/mainpackage/message/**/*, \r\n    src/main/java/com/example/org/test/mainpackage/security/jwt/**/*, \r\n    src/main/java/com/example/org/test/mainpackage/security/services/**/*,\r\n    src/main/java/com/example/org/test/mainpackage/controller/AuthRestAPIs.java,\r\n    src/main/java/com/example/org/test/mainpackage/controller/TestRestAPIs.java\r\n\r\nAlso, other way will be login as admin in sonar and go to \r\n\r\n&gt; settings&gt;Exclusions&gt; Source File Exclusions- Add your packages here.\r\n&gt; Restart the server.\r\n\r\n","title":"How to exclude certain classes from being included in the code coverage? (Java)","body":"<p>In the <code>application.properties</code> you can do something like this: </p>\n\n<pre><code>sonar.exclusions=src/main/java/com/example/org/test/mainpackage/message/**/*, \nsrc/main/java/com/example/org/test/mainpackage/security/jwt/**/*, \nsrc/main/java/com/example/org/test/mainpackage/security/services/**/*,\nsrc/main/java/com/example/org/test/mainpackage/controller/AuthRestAPIs.java,\nsrc/main/java/com/example/org/test/mainpackage/controller/TestRestAPIs.java\n</code></pre>\n\n<p>Also, other way will be login as admin in sonar and go to </p>\n\n<blockquote>\n  <p>settings>Exclusions> Source File Exclusions- Add your packages here.\n  Restart the server.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":7565436,"reputation":1179,"user_id":5741227,"accept_rate":86,"display_name":"iamjoshua"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1557275766,"creation_date":1557214798,"answer_id":56017745,"question_id":56016409,"body_markdown":"This is not the kind of answer that I was looking for really. But for now this will do for me. Still looking for a way to do this via the pom file, java or beans. thanks\r\n\r\n**Solution:**\r\n\r\nSo if you did your exclusions in the Run Configuration of you project. That is through the 2nd step I mentioned in the question which is through\r\n\r\n&gt; Edit Configuration &gt; Code Coverage.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n----------\r\n\r\n\r\nAnd then actually add your exclusions. \r\nYou would have just to tick the share text box and Click apply. \r\nThe exclusions you made will be made available in your project directory under \r\n\r\n&gt; .idea/runConfigurations/[the xml file of the exclusions you made and\r\n&gt; other run configurations].\r\n[![enter image description here][2]][2]\r\n\r\n\r\nAnd to be able to push this, just remove the \r\n\r\n&gt; .idea in your .gitignore file in git.\r\n[![enter image description here][3]][3]\r\n\r\n----------\r\n\r\n\r\nAnd then you&#39;d be able to push the run configurations files in your repository for others to use. or export so that it won&#39;t have to be manually configure in the edit configurations of intellij.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KyhpT.png\r\n  [2]: https://i.stack.imgur.com/2mPhu.png\r\n  [3]: https://i.stack.imgur.com/yzIix.png\r\n\r\n\r\nPS:\r\nThis might affect the coverage report in your Sonarqube. You have to undo this and unpush from your repo the local run configuration to be able to use your sonar qubes class exclusions. For some reason in mine, it skipped all the exclusions  I made before doing this.","title":"How to exclude certain classes from being included in the code coverage? (Java)","body":"<p>This is not the kind of answer that I was looking for really. But for now this will do for me. Still looking for a way to do this via the pom file, java or beans. thanks</p>\n\n<p><strong>Solution:</strong></p>\n\n<p>So if you did your exclusions in the Run Configuration of you project. That is through the 2nd step I mentioned in the question which is through</p>\n\n<blockquote>\n  <p>Edit Configuration > Code Coverage.\n  <a href=\"https://i.stack.imgur.com/KyhpT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KyhpT.png\" alt=\"enter image description here\"></a></p>\n</blockquote>\n\n<hr>\n\n<p>And then actually add your exclusions. \nYou would have just to tick the share text box and Click apply. \nThe exclusions you made will be made available in your project directory under </p>\n\n<blockquote>\n  <p>.idea/runConfigurations/[the xml file of the exclusions you made and\n  other run configurations].\n  <a href=\"https://i.stack.imgur.com/2mPhu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2mPhu.png\" alt=\"enter image description here\"></a></p>\n</blockquote>\n\n<p>And to be able to push this, just remove the </p>\n\n<blockquote>\n  <p>.idea in your .gitignore file in git.\n  <a href=\"https://i.stack.imgur.com/yzIix.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yzIix.png\" alt=\"enter image description here\"></a></p>\n</blockquote>\n\n<hr>\n\n<p>And then you'd be able to push the run configurations files in your repository for others to use. or export so that it won't have to be manually configure in the edit configurations of intellij.</p>\n\n<p>PS:\nThis might affect the coverage report in your Sonarqube. You have to undo this and unpush from your repo the local run configuration to be able to use your sonar qubes class exclusions. For some reason in mine, it skipped all the exclusions  I made before doing this.</p>\n"},{"tags":[],"owner":{"account_id":14540892,"reputation":1111,"user_id":10502646,"display_name":"snmaddula"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1588766870,"creation_date":1557215275,"answer_id":56017862,"question_id":56016409,"body_markdown":"As you are using Maven, you need to configure your exclusions in the jacoco plugin, which is used to capture the coverage statistics and pass it on to sonar.\r\n\r\n    &lt;plugin&gt;\r\n    &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;0.8.1&lt;/version&gt;\r\n    &lt;executions&gt;\r\n            &lt;execution&gt;\r\n                &lt;id&gt;prepare-agent&lt;/id&gt;\r\n                &lt;goals&gt;\r\n                    &lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n            &lt;/execution&gt;\r\n            &lt;execution&gt;\r\n                &lt;id&gt;report&lt;/id&gt;\r\n                &lt;phase&gt;prepare-package&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                    &lt;goal&gt;report&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;!-- Sets the path to the file which contains the execution data. --&gt;\r\n                    &lt;dataFile&gt;target/jacoco.exec&lt;/dataFile&gt;\r\n                    &lt;!-- Sets the output directory for the code coverage report. --&gt;\r\n                    &lt;outputDirectory&gt;target/jacoco-ut&lt;/outputDirectory&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/execution&gt;\r\n    &lt;/executions&gt;\r\n    &lt;configuration&gt;\r\n        &lt;systemPropertyVariables&gt;\r\n            &lt;jacoco-agent.destfile&gt;target/jacoco.exec&lt;/jacoco-agent.destfile&gt;\r\n        &lt;/systemPropertyVariables&gt;\r\n        &lt;excludes&gt;\r\n            &lt;exclude&gt;snmaddula/app/domain/*.class&lt;/exclude&gt;\r\n            &lt;exclude&gt;snmaddula/app/exception/*.class&lt;/exclude&gt;\r\n            &lt;exclude&gt;snmaddula/app/filter/*.class&lt;/exclude&gt;\r\n            &lt;exclude&gt;snmaddula/app/App.class&lt;/exclude&gt;\r\n        &lt;/excludes&gt;\r\n    &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\nReferences: \r\n\r\n - [maven-jacoco-config][1]\r\n - [gradle-jacoco-config][2]\r\n\r\n\r\n  [1]: https://snmaddula.bitbucket.io/maven-jacoco-config\r\n  [2]: https://snmaddula.bitbucket.io/gradle-jacoco-config/","title":"How to exclude certain classes from being included in the code coverage? (Java)","body":"<p>As you are using Maven, you need to configure your exclusions in the jacoco plugin, which is used to capture the coverage statistics and pass it on to sonar.</p>\n\n<pre><code>&lt;plugin&gt;\n&lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n&lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n&lt;version&gt;0.8.1&lt;/version&gt;\n&lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;prepare-agent&lt;/id&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;prepare-agent&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n        &lt;execution&gt;\n            &lt;id&gt;report&lt;/id&gt;\n            &lt;phase&gt;prepare-package&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;report&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;!-- Sets the path to the file which contains the execution data. --&gt;\n                &lt;dataFile&gt;target/jacoco.exec&lt;/dataFile&gt;\n                &lt;!-- Sets the output directory for the code coverage report. --&gt;\n                &lt;outputDirectory&gt;target/jacoco-ut&lt;/outputDirectory&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n&lt;/executions&gt;\n&lt;configuration&gt;\n    &lt;systemPropertyVariables&gt;\n        &lt;jacoco-agent.destfile&gt;target/jacoco.exec&lt;/jacoco-agent.destfile&gt;\n    &lt;/systemPropertyVariables&gt;\n    &lt;excludes&gt;\n        &lt;exclude&gt;snmaddula/app/domain/*.class&lt;/exclude&gt;\n        &lt;exclude&gt;snmaddula/app/exception/*.class&lt;/exclude&gt;\n        &lt;exclude&gt;snmaddula/app/filter/*.class&lt;/exclude&gt;\n        &lt;exclude&gt;snmaddula/app/App.class&lt;/exclude&gt;\n    &lt;/excludes&gt;\n&lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>References: </p>\n\n<ul>\n<li><a href=\"https://snmaddula.bitbucket.io/maven-jacoco-config\" rel=\"noreferrer\">maven-jacoco-config</a></li>\n<li><a href=\"https://snmaddula.bitbucket.io/gradle-jacoco-config/\" rel=\"noreferrer\">gradle-jacoco-config</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":8669713,"reputation":453,"user_id":6489022,"accept_rate":60,"display_name":"Jown"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1605269266,"creation_date":1605269266,"answer_id":64820603,"question_id":56016409,"body_markdown":"By default, Intellij is using the Intellij IDEA as the default code coverage runner.\r\n\r\nIf you are using `jacoco`, then change this option to `JaCoCo`. The details of this can be found on the `jetbrains` website.\r\nhttps://www.jetbrains.com/help/idea/configuring-code-coverage-measurement.html\r\n\r\nBy following the above, all excluded classes defined in your `&lt;sonar.coverage.exclusions&gt;` will be taken into account and would match what you have in your remote `SonarQube` server&#39;s configuration.","title":"How to exclude certain classes from being included in the code coverage? (Java)","body":"<p>By default, Intellij is using the Intellij IDEA as the default code coverage runner.</p>\n<p>If you are using <code>jacoco</code>, then change this option to <code>JaCoCo</code>. The details of this can be found on the <code>jetbrains</code> website.\n<a href=\"https://www.jetbrains.com/help/idea/configuring-code-coverage-measurement.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/idea/configuring-code-coverage-measurement.html</a></p>\n<p>By following the above, all excluded classes defined in your <code>&lt;sonar.coverage.exclusions&gt;</code> will be taken into account and would match what you have in your remote <code>SonarQube</code> server's configuration.</p>\n"},{"tags":[],"owner":{"account_id":4136535,"reputation":4099,"user_id":3393095,"display_name":"Rodrigo L&#243;pez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693937250,"creation_date":1693829167,"answer_id":77037550,"question_id":56016409,"body_markdown":"Since JaCoCo 0.8.2 you can use annotations to exclude classes or methods from coverage.\r\n\r\nThe name of the annotation should include Generated.\r\nThe retention policy of annotation should be runtime or class.\r\n\r\nIf you use project lombok, just use the annotation @Generated from package lombok.Generated.\r\n\r\nIf you don&#39;t use project lombok you can create your own annotation.\r\n\r\n    @Documented\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target( {ElementType.TYPE, ElementType.METHOD, ElementType.CONSTRUCTOR})\r\n    public @interface Generated {\r\n    }\r\n\r\nAfter creating this annotation just use it on classes or methods that you want to exclude from coverage report.\r\n\r\nsource: https://www.baeldung.com/jacoco-report-exclude","title":"How to exclude certain classes from being included in the code coverage? (Java)","body":"<p>Since JaCoCo 0.8.2 you can use annotations to exclude classes or methods from coverage.</p>\n<p>The name of the annotation should include Generated.\nThe retention policy of annotation should be runtime or class.</p>\n<p>If you use project lombok, just use the annotation @Generated from package lombok.Generated.</p>\n<p>If you don't use project lombok you can create your own annotation.</p>\n<pre><code>@Documented\n@Retention(RetentionPolicy.RUNTIME)\n@Target( {ElementType.TYPE, ElementType.METHOD, ElementType.CONSTRUCTOR})\npublic @interface Generated {\n}\n</code></pre>\n<p>After creating this annotation just use it on classes or methods that you want to exclude from coverage report.</p>\n<p>source: <a href=\"https://www.baeldung.com/jacoco-report-exclude\" rel=\"nofollow noreferrer\">https://www.baeldung.com/jacoco-report-exclude</a></p>\n"}],"owner":{"account_id":7565436,"reputation":1179,"user_id":5741227,"accept_rate":86,"display_name":"iamjoshua"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54712,"favorite_count":0,"down_vote_count":1,"up_vote_count":8,"accepted_answer_id":56017862,"answer_count":5,"score":7,"last_activity_date":1693937250,"creation_date":1557209087,"question_id":56016409,"body_markdown":"I could already exclude the classes with sonar cube report by adding this in the &lt;properties&gt; tag of my POM file.\r\n\r\n     &lt;properties&gt;\r\n            &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n            &lt;sonar.exclusions&gt; \r\n                /src/main/java/com/example/org/test/mainpackage/message/**/*\r\n                ,\r\n                /src/main/java/com/example/org/test/mainpackage/security/jwt/**/*\r\n                ,\r\n                /src/main/java/com/example/org/test/mainpackage/security/services/**/*\r\n                ,\r\n                /src/main/java/com/example/org/test/mainpackage/controller/AuthRestAPIs.java\r\n                ,\r\n                /src/main/java/com/example/org/test/mainpackage/controller/TestRestAPIs.java\r\n            &lt;/sonar.exclusions&gt;\r\n        &lt;/properties&gt;\r\n\t\r\n\t\r\n\r\nHowever the same code when run locally to test the code coverage is not working at all. \r\n\t\r\nWhere do I set this up programmatically with Maven &amp; Spring Boot ?. \r\n\t\r\nI could already exclude the classes I want via the \r\n\r\n&gt; Settings &gt; Build, Execution, Deployment &gt; Excludes &gt; [Class(es) to be\r\n&gt; excluded]\r\n\r\nor through\r\n\r\n&gt; Edit Configurations &gt; Select Code Coverage tab &gt; then adding the\r\n&gt; package or class I want to be excluded or include only in the code\r\n&gt; coverage report.\r\n\r\nWhat I want is coding the classes to be excluded i.e in the pom file like I did with exclusion of code for sonar qube.\r\n\r\nTo make it short. How do I do this programmatically?.\r\n\r\nReason why I wanted to this programmatically is that, the above two steps I did to exclude the files from being reported in the code coverage is that no files was included in all of my project that I could push in the repository so that changes i made for exclusions will reflect in all those who will pull from the git repository. With no files or configurations added that I could push and reflect to all in the repo. THis means that my exclusions will only work locally and not work on others. Right?. So here I am asking for a way to do programmatically like putting the exclusions in a POM file. \r\n\t","title":"How to exclude certain classes from being included in the code coverage? (Java)","body":"<p>I could already exclude the classes with sonar cube report by adding this in the  tag of my POM file.</p>\n\n<pre><code> &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;sonar.exclusions&gt; \n            /src/main/java/com/example/org/test/mainpackage/message/**/*\n            ,\n            /src/main/java/com/example/org/test/mainpackage/security/jwt/**/*\n            ,\n            /src/main/java/com/example/org/test/mainpackage/security/services/**/*\n            ,\n            /src/main/java/com/example/org/test/mainpackage/controller/AuthRestAPIs.java\n            ,\n            /src/main/java/com/example/org/test/mainpackage/controller/TestRestAPIs.java\n        &lt;/sonar.exclusions&gt;\n    &lt;/properties&gt;\n</code></pre>\n\n<p>However the same code when run locally to test the code coverage is not working at all. </p>\n\n<p>Where do I set this up programmatically with Maven &amp; Spring Boot ?. </p>\n\n<p>I could already exclude the classes I want via the </p>\n\n<blockquote>\n  <p>Settings > Build, Execution, Deployment > Excludes > [Class(es) to be\n  excluded]</p>\n</blockquote>\n\n<p>or through</p>\n\n<blockquote>\n  <p>Edit Configurations > Select Code Coverage tab > then adding the\n  package or class I want to be excluded or include only in the code\n  coverage report.</p>\n</blockquote>\n\n<p>What I want is coding the classes to be excluded i.e in the pom file like I did with exclusion of code for sonar qube.</p>\n\n<p>To make it short. How do I do this programmatically?.</p>\n\n<p>Reason why I wanted to this programmatically is that, the above two steps I did to exclude the files from being reported in the code coverage is that no files was included in all of my project that I could push in the repository so that changes i made for exclusions will reflect in all those who will pull from the git repository. With no files or configurations added that I could push and reflect to all in the repo. THis means that my exclusions will only work locally and not work on others. Right?. So here I am asking for a way to do programmatically like putting the exclusions in a POM file. </p>\n"},{"tags":["java","apache-poi","xwpf"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1693970165,"post_id":77046823,"comment_id":135828447,"body_markdown":"Use [XWPFDocument.nsertNewTbl](https://poi.apache.org/apidocs/dev/org/apache/poi/xwpf/usermodel/XWPFDocument.html#insertNewTbl-org.apache.xmlbeans.XmlCursor-). See https://stackoverflow.com/questions/49254987/inserting-xwpftable-in-between-contents/49261282#49261282 for how to use.","body":"Use <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/xwpf/usermodel/XWPFDocument.html#insertNewTbl-org.apache.xmlbeans.XmlCursor-\" rel=\"nofollow noreferrer\">XWPFDocument.nsertNewTbl</a>. See <a href=\"https://stackoverflow.com/questions/49254987/inserting-xwpftable-in-between-contents/49261282#49261282\" title=\"inserting xwpftable in between contents\">stackoverflow.com/questions/49254987/&hellip;</a> for how to use."}],"owner":{"account_id":29373468,"reputation":13,"user_id":22505556,"display_name":"Milos Jelic"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1693937217,"creation_date":1693937217,"question_id":77046823,"body_markdown":"Is there way with apache xwpf libary to add new table to specific place inside doc where is placeholder? \r\n\r\n\r\n```\r\n\r\n`    for (XWPFParagraph paragraph : document.getParagraphs()) {\r\n      for (XWPFRun run : paragraph.getRuns()) {\r\n        String text = run.getText(0);\r\n        if (text != null) {\r\n          for (Map.Entry&lt;String, String&gt; entry : data.entrySet()) {\r\n            if (entry.getValue() != null) {\r\n              text = text.replace(entry.getKey(), entry.getValue());\r\n            }\r\n          }\r\n          if (text.equals(placeholder)) {\r\n              //i want to add table here\r\n          } else {\r\n            String[] lines = text.split(&quot;\\n&quot;);\r\n            if (lines.length &gt; 1) {\r\n              run.setText(&quot;&quot;, 0);\r\n              run.setText(lines[0], 0);\r\n              for (int i = 1; i &lt; lines.length; i++) {\r\n                run.addBreak();\r\n                run.setText(lines[i], i);\r\n\r\n              }\r\n            } else {\r\n              run.setText(text, 0);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n    }\r\n```\r\n\r\nIts always add at end of docx when I create table.","title":"Placeholder for XWPFTable","body":"<p>Is there way with apache xwpf libary to add new table to specific place inside doc where is placeholder?</p>\n<pre><code>\n`    for (XWPFParagraph paragraph : document.getParagraphs()) {\n      for (XWPFRun run : paragraph.getRuns()) {\n        String text = run.getText(0);\n        if (text != null) {\n          for (Map.Entry&lt;String, String&gt; entry : data.entrySet()) {\n            if (entry.getValue() != null) {\n              text = text.replace(entry.getKey(), entry.getValue());\n            }\n          }\n          if (text.equals(placeholder)) {\n              //i want to add table here\n          } else {\n            String[] lines = text.split(&quot;\\n&quot;);\n            if (lines.length &gt; 1) {\n              run.setText(&quot;&quot;, 0);\n              run.setText(lines[0], 0);\n              for (int i = 1; i &lt; lines.length; i++) {\n                run.addBreak();\n                run.setText(lines[i], i);\n\n              }\n            } else {\n              run.setText(text, 0);\n            }\n          }\n        }\n      }\n\n    }\n</code></pre>\n<p>Its always add at end of docx when I create table.</p>\n"},{"tags":["java","jsp","struts2","csrf","struts"],"answers":[{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689773314,"creation_date":1689772497,"answer_id":76721712,"question_id":76721443,"body_markdown":"Old application should use a [`token`][1] or [`tokenSession`][2] interceptor.\r\n\r\nYou can find details in my previous answer: [Struts2 token interceptor: CSRF protection][3].\r\n\r\n[1]: \r\n https://struts.apache.org/core-developers/token-interceptor\r\n[2]: https://struts.apache.org/core-developers/token-session-interceptor\r\n[3]: https://stackoverflow.com/a/23518147/573032","title":"How to provide protection against Cross Site Request Forgery (CSRF) attacks for an old web application built on Java and struts2 framework","body":"<p>Old application should use a <a href=\"https://struts.apache.org/core-developers/token-interceptor\" rel=\"nofollow noreferrer\"><code>token</code></a> or <a href=\"https://struts.apache.org/core-developers/token-session-interceptor\" rel=\"nofollow noreferrer\"><code>tokenSession</code></a> interceptor.</p>\n<p>You can find details in my previous answer: <a href=\"https://stackoverflow.com/a/23518147/573032\">Struts2 token interceptor: CSRF protection</a>.</p>\n"}],"owner":{"account_id":29049305,"reputation":1,"user_id":22252474,"display_name":"Varun Pattar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1689842805,"answer_count":1,"score":0,"last_activity_date":1693937053,"creation_date":1689770666,"question_id":76721443,"body_markdown":"How to provide protection against Cross Site Request Forgery (CSRF) attacks for an old web application built on Java and struts2 framework?\r\n\r\nTried adding filter before servlet, stuck over there.","title":"How to provide protection against Cross Site Request Forgery (CSRF) attacks for an old web application built on Java and struts2 framework","body":"<p>How to provide protection against Cross Site Request Forgery (CSRF) attacks for an old web application built on Java and struts2 framework?</p>\n<p>Tried adding filter before servlet, stuck over there.</p>\n"},{"tags":["java","floating-point","double","precision"],"comments":[{"owner":{"account_id":1894536,"reputation":54819,"user_id":1711796,"accept_rate":100,"display_name":"Bernhard Barker"},"score":5,"creation_date":1519508579,"post_id":322749,"comment_id":84941375,"body_markdown":"Related: [Is floating point math broken?](https://stackoverflow.com/q/588004)","body":"Related: <a href=\"https://stackoverflow.com/q/588004\">Is floating point math broken?</a>"}],"answers":[{"tags":[],"owner":{"account_id":2397,"reputation":179869,"user_id":3333,"accept_rate":80,"display_name":"Paul Tomblin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1227750989,"creation_date":1227750989,"answer_id":322756,"question_id":322749,"body_markdown":"Multiply everything by 100 and store it in a long as cents.","title":"Retain precision with double in Java","body":"<p>Multiply everything by 100 and store it in a long as cents.</p>\n"},{"tags":[],"owner":{"account_id":17723,"reputation":89504,"user_id":39975,"accept_rate":71,"display_name":"Dustin"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1227751040,"creation_date":1227751040,"answer_id":322758,"question_id":322749,"body_markdown":"Pretty sure you could&#39;ve made that into a three line example.  :)\r\n\r\nIf you want exact precision, use BigDecimal.  Otherwise, you can use ints multiplied by 10 ^ whatever precision you want.","title":"Retain precision with double in Java","body":"<p>Pretty sure you could've made that into a three line example.  :)</p>\n\n<p>If you want exact precision, use BigDecimal.  Otherwise, you can use ints multiplied by 10 ^ whatever precision you want.</p>\n"},{"tags":[],"owner":{"account_id":6358,"reputation":386062,"user_id":10661,"accept_rate":91,"display_name":"S.Lott"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1227752569,"creation_date":1227752569,"answer_id":322790,"question_id":322749,"body_markdown":"Doubles are *approximations* of the decimal numbers in your Java source.  You&#39;re seeing the consequence of the mismatch between the double (which is a binary-coded value) and your source (which is decimal-coded).\r\n\r\nJava&#39;s producing the closest binary approximation.  You can use the java.text.DecimalFormat to display a better-looking decimal value.","title":"Retain precision with double in Java","body":"<p>Doubles are <em>approximations</em> of the decimal numbers in your Java source.  You're seeing the consequence of the mismatch between the double (which is a binary-coded value) and your source (which is decimal-coded).</p>\n\n<p>Java's producing the closest binary approximation.  You can use the java.text.DecimalFormat to display a better-looking decimal value.</p>\n"},{"tags":[],"owner":{"account_id":16298,"reputation":10964,"user_id":35322,"display_name":"Adam Jaskiewicz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1227753386,"creation_date":1227753386,"answer_id":322808,"question_id":322749,"body_markdown":"Use a BigDecimal. It even lets you specify rounding rules (like ROUND_HALF_EVEN, which will minimize statistical error by rounding to the even neighbor if both are the same distance; i.e. both 1.5 and 2.5 round to 2).","title":"Retain precision with double in Java","body":"<p>Use a BigDecimal. It even lets you specify rounding rules (like ROUND_HALF_EVEN, which will minimize statistical error by rounding to the even neighbor if both are the same distance; i.e. both 1.5 and 2.5 round to 2).</p>\n"},{"tags":[],"owner":{"account_id":7470,"reputation":274976,"user_id":13005,"accept_rate":75,"display_name":"Steve Jessop"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1227756188,"creation_date":1227755467,"answer_id":322853,"question_id":322749,"body_markdown":"Observe that you&#39;d have the same problem if you used limited-precision decimal arithmetic, and wanted to deal with 1/3: 0.333333333 * 3 is 0.999999999, not 1.00000000. \r\n\r\nUnfortunately, 5.6, 5.8 and 11.4 just aren&#39;t round numbers in binary, because they involve fifths. So the float representation of them isn&#39;t exact, just as 0.3333 isn&#39;t exactly 1/3.\r\n\r\nIf all the numbers you use are non-recurring decimals, and you want exact results, use BigDecimal. Or as others have said, if your values are like money in the sense that they&#39;re all a multiple of 0.01, or 0.001, or something, then multiply everything by a fixed power of 10 and use int or long (addition and subtraction are trivial: watch out for multiplication).\r\n\r\nHowever, if you are happy with binary for the calculation, but you just want to print things out in a slightly friendlier format, try &lt;code&gt;java.util.Formatter&lt;/code&gt; or &lt;code&gt;String.format&lt;/code&gt;. In the format string specify a precision less than the full precision of a double. To 10 significant figures, say, 11.399999999999 is 11.4, so the result will be almost as accurate and more human-readable in cases where the binary result is very close to a value requiring only a few decimal places.\r\n\r\nThe precision to specify depends a bit on how much maths you&#39;ve done with your numbers - in general the more you do, the more error will accumulate, but some algorithms accumulate it much faster than others (they&#39;re called &quot;unstable&quot; as opposed to &quot;stable&quot; with respect to rounding errors). If all you&#39;re doing is adding a few values, then I&#39;d guess that dropping just one decimal place of precision will sort things out. Experiment.","title":"Retain precision with double in Java","body":"<p>Observe that you'd have the same problem if you used limited-precision decimal arithmetic, and wanted to deal with 1/3: 0.333333333 * 3 is 0.999999999, not 1.00000000. </p>\n\n<p>Unfortunately, 5.6, 5.8 and 11.4 just aren't round numbers in binary, because they involve fifths. So the float representation of them isn't exact, just as 0.3333 isn't exactly 1/3.</p>\n\n<p>If all the numbers you use are non-recurring decimals, and you want exact results, use BigDecimal. Or as others have said, if your values are like money in the sense that they're all a multiple of 0.01, or 0.001, or something, then multiply everything by a fixed power of 10 and use int or long (addition and subtraction are trivial: watch out for multiplication).</p>\n\n<p>However, if you are happy with binary for the calculation, but you just want to print things out in a slightly friendlier format, try <code>java.util.Formatter</code> or <code>String.format</code>. In the format string specify a precision less than the full precision of a double. To 10 significant figures, say, 11.399999999999 is 11.4, so the result will be almost as accurate and more human-readable in cases where the binary result is very close to a value requiring only a few decimal places.</p>\n\n<p>The precision to specify depends a bit on how much maths you've done with your numbers - in general the more you do, the more error will accumulate, but some algorithms accumulate it much faster than others (they're called \"unstable\" as opposed to \"stable\" with respect to rounding errors). If all you're doing is adding a few values, then I'd guess that dropping just one decimal place of precision will sort things out. Experiment.</p>\n"},{"tags":[],"owner":{"account_id":9320,"reputation":159784,"user_id":17172,"display_name":"coobird"},"down_vote_count":1,"up_vote_count":182,"is_accepted":true,"score":181,"last_activity_date":1693936507,"creation_date":1227756466,"answer_id":322875,"question_id":322749,"body_markdown":"As others have mentioned, you&#39;ll probably want to use the [`BigDecimal`][1] class, if you want to have an exact representation of 11.4.\r\n\r\nNow, a little explanation into why this is happening:\r\n\r\nThe `float` and `double` primitive types in Java are [floating point][2] numbers, where the number is stored as a binary representation of a fraction and a exponent.\r\n\r\nMore specifically, a double-precision floating point value such as the `double` type is a 64-bit value, where:\r\n\r\n - 1 bit denotes the sign (positive or negative).\r\n - 11 bits for the exponent.\r\n - 52 bits for the significant digits (the fractional part as a binary).\r\n\r\nThese parts are combined to produce a `double` representation of a value.\r\n\r\n(Source: [Wikipedia: Double precision][3])\r\n\r\nFor a detailed description of how floating point values are handled in Java, see the [Section 4.2.3: Floating-Point Types, Formats, and Values][4] of the Java Language Specification.\r\n\r\nThe `byte`, `char`, `int`, `long` types are [fixed-point][6] numbers, which are exact representions of numbers. Unlike fixed point numbers, floating point numbers will some times (safe to assume &quot;most of the time&quot;) not be able to return an exact representation of a number. This is the reason why you end up with `11.399999999999` as the result of `5.6 + 5.8`.\r\n\r\nWhen requiring a value that is exact, such as 1.5 or 150.1005, you&#39;ll want to use one of the fixed-point types, which will be able to represent the number exactly.\r\n\r\nAs has been mentioned several times already, Java has a [`BigDecimal`][1] class which will handle very large numbers and very small numbers. \r\n\r\nFrom the Java API Reference for the `BigDecimal` class:\r\n\r\n&gt; Immutable,\r\n&gt; arbitrary-precision signed decimal\r\n&gt; numbers. A BigDecimal consists of an\r\n&gt; arbitrary precision integer unscaled\r\n&gt; value and a 32-bit integer scale. If\r\n&gt; zero or positive, the scale is the\r\n&gt; number of digits to the right of the\r\n&gt; decimal point. If negative, the\r\n&gt; unscaled value of the number is\r\n&gt; multiplied by ten to the power of the\r\n&gt; negation of the scale. The value of\r\n&gt; the number represented by the\r\n&gt; BigDecimal is therefore (unscaledValue\r\n&gt; &#215; 10^-scale).\r\n\r\nThere has been many questions on Stack Overflow relating to the matter of floating point numbers and its precision. Here is a list of related questions that may be of interest:\r\n\r\n - https://stackoverflow.com/questions/177506/why-do-i-see-a-double-variable-initialized-to-some-value-like-214-as-2139999961\r\n - https://stackoverflow.com/questions/240876/print-really-big-numbers\r\n - https://stackoverflow.com/questions/56947/how-is-floating-point-stored-when-does-it-matter\r\n - https://stackoverflow.com/questions/61872/use-float-or-decimal-for-accounting-application-dollar-amount\r\n\r\nIf you really want to get down to the nitty gritty details of floating point numbers, take a look at [What Every Computer Scientist Should Know About Floating-Point Arithmetic][12].\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html\r\n  [2]: http://en.wikipedia.org/wiki/Floating_point\r\n  [3]: http://en.wikipedia.org/wiki/Double_precision\r\n  [4]: http://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.2.3\r\n  \r\n  [6]: http://en.wikipedia.org/wiki/Fixed-point_arithmetic\r\n  [12]: https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html","title":"Retain precision with double in Java","body":"<p>As others have mentioned, you'll probably want to use the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\"><code>BigDecimal</code></a> class, if you want to have an exact representation of 11.4.</p>\n<p>Now, a little explanation into why this is happening:</p>\n<p>The <code>float</code> and <code>double</code> primitive types in Java are <a href=\"http://en.wikipedia.org/wiki/Floating_point\" rel=\"nofollow noreferrer\">floating point</a> numbers, where the number is stored as a binary representation of a fraction and a exponent.</p>\n<p>More specifically, a double-precision floating point value such as the <code>double</code> type is a 64-bit value, where:</p>\n<ul>\n<li>1 bit denotes the sign (positive or negative).</li>\n<li>11 bits for the exponent.</li>\n<li>52 bits for the significant digits (the fractional part as a binary).</li>\n</ul>\n<p>These parts are combined to produce a <code>double</code> representation of a value.</p>\n<p>(Source: <a href=\"http://en.wikipedia.org/wiki/Double_precision\" rel=\"nofollow noreferrer\">Wikipedia: Double precision</a>)</p>\n<p>For a detailed description of how floating point values are handled in Java, see the <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.2.3\" rel=\"nofollow noreferrer\">Section 4.2.3: Floating-Point Types, Formats, and Values</a> of the Java Language Specification.</p>\n<p>The <code>byte</code>, <code>char</code>, <code>int</code>, <code>long</code> types are <a href=\"http://en.wikipedia.org/wiki/Fixed-point_arithmetic\" rel=\"nofollow noreferrer\">fixed-point</a> numbers, which are exact representions of numbers. Unlike fixed point numbers, floating point numbers will some times (safe to assume &quot;most of the time&quot;) not be able to return an exact representation of a number. This is the reason why you end up with <code>11.399999999999</code> as the result of <code>5.6 + 5.8</code>.</p>\n<p>When requiring a value that is exact, such as 1.5 or 150.1005, you'll want to use one of the fixed-point types, which will be able to represent the number exactly.</p>\n<p>As has been mentioned several times already, Java has a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\"><code>BigDecimal</code></a> class which will handle very large numbers and very small numbers.</p>\n<p>From the Java API Reference for the <code>BigDecimal</code> class:</p>\n<blockquote>\n<p>Immutable,\narbitrary-precision signed decimal\nnumbers. A BigDecimal consists of an\narbitrary precision integer unscaled\nvalue and a 32-bit integer scale. If\nzero or positive, the scale is the\nnumber of digits to the right of the\ndecimal point. If negative, the\nunscaled value of the number is\nmultiplied by ten to the power of the\nnegation of the scale. The value of\nthe number represented by the\nBigDecimal is therefore (unscaledValue\n× 10^-scale).</p>\n</blockquote>\n<p>There has been many questions on Stack Overflow relating to the matter of floating point numbers and its precision. Here is a list of related questions that may be of interest:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/177506/why-do-i-see-a-double-variable-initialized-to-some-value-like-214-as-2139999961\">Why do I see a double variable initialized to some value like 21.4 as 21.399999618530273?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/240876/print-really-big-numbers\">How to print really big numbers in C++</a></li>\n<li><a href=\"https://stackoverflow.com/questions/56947/how-is-floating-point-stored-when-does-it-matter\">How is floating point stored? When does it matter?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/61872/use-float-or-decimal-for-accounting-application-dollar-amount\">Use float or decimal for accounting application dollar amount?</a></li>\n</ul>\n<p>If you really want to get down to the nitty gritty details of floating point numbers, take a look at <a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">What Every Computer Scientist Should Know About Floating-Point Arithmetic</a>.</p>\n"},{"tags":[],"owner":{"account_id":13185,"reputation":34155,"user_id":26334,"accept_rate":54,"display_name":"Draemon"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1227757944,"creation_date":1227757944,"answer_id":322897,"question_id":322749,"body_markdown":"As others have noted, not all decimal values can be represented as binary since decimal is based on powers of 10 and binary is based on powers of two.\r\n\r\nIf precision matters, use BigDecimal, but if you just want friendly output:\r\n\r\n    System.out.printf(&quot;%.2f\\n&quot;, total);\r\n\r\nWill give you:\r\n\r\n    11.40\r\n","title":"Retain precision with double in Java","body":"<p>As others have noted, not all decimal values can be represented as binary since decimal is based on powers of 10 and binary is based on powers of two.</p>\n\n<p>If precision matters, use BigDecimal, but if you just want friendly output:</p>\n\n<pre><code>System.out.printf(\"%.2f\\n\", total);\n</code></pre>\n\n<p>Will give you:</p>\n\n<pre><code>11.40\n</code></pre>\n"},{"tags":[],"owner":{"account_id":103489,"reputation":1299,"user_id":277160,"accept_rate":73,"display_name":"Dark Castle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1268867654,"creation_date":1268867654,"answer_id":2466584,"question_id":322749,"body_markdown":"Check out BigDecimal, it handles problems dealing with floating point arithmetic like that.\r\n\r\nThe new call would look like this:\r\n\r\n    term[number].coefficient.add(co);\r\n\r\nUse setScale() to set the number of decimal place precision to be used.","title":"Retain precision with double in Java","body":"<p>Check out BigDecimal, it handles problems dealing with floating point arithmetic like that.</p>\n\n<p>The new call would look like this:</p>\n\n<pre><code>term[number].coefficient.add(co);\n</code></pre>\n\n<p>Use setScale() to set the number of decimal place precision to be used.</p>\n"},{"tags":[],"owner":{"account_id":29913,"reputation":10102,"user_id":81193,"accept_rate":83,"display_name":"Kevin Crowell"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1268867740,"creation_date":1268867740,"answer_id":2466598,"question_id":322749,"body_markdown":"Use java.math.BigDecimal\r\n\r\nDoubles are binary fractions internally, so they sometimes cannot represent decimal fractions to the exact decimal.","title":"Retain precision with double in Java","body":"<p>Use java.math.BigDecimal</p>\n\n<p>Doubles are binary fractions internally, so they sometimes cannot represent decimal fractions to the exact decimal.</p>\n"},{"tags":[],"owner":{"account_id":108321,"reputation":88297,"user_id":287586,"accept_rate":80,"display_name":"dan04"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1268879872,"creation_date":1268872223,"answer_id":2466882,"question_id":322749,"body_markdown":"You can&#39;t, because 7.3 doesn&#39;t have a finite representation in binary.  The closest you can get is 2054767329987789/2**48 = 7.3+1/1407374883553280.\r\n\r\nTake a look at http://docs.python.org/tutorial/floatingpoint.html for a further explanation.  (It&#39;s on the Python website, but Java and C++ have the same &quot;problem&quot;.)\r\n\r\nThe solution depends on what exactly your problem is:\r\n\r\n* If it&#39;s that you just don&#39;t like seeing all those noise digits, then fix your string formatting.  Don&#39;t display more than 15 significant digits (or 7 for float).\r\n* If it&#39;s that the inexactness of your numbers is breaking things like &quot;if&quot; statements, then you should write if (abs(x - 7.3) &lt; TOLERANCE) instead of if (x == 7.3).\r\n* If you&#39;re working with money, then what you probably really want is decimal fixed point.  Store an integer number of cents or whatever the smallest unit of your currency is.\r\n* (VERY UNLIKELY) If you need more than 53 significant bits (15-16 significant digits) of precision, then use a high-precision floating-point type, like BigDecimal.\r\n","title":"Retain precision with double in Java","body":"<p>You can't, because 7.3 doesn't have a finite representation in binary.  The closest you can get is 2054767329987789/2**48 = 7.3+1/1407374883553280.</p>\n\n<p>Take a look at <a href=\"http://docs.python.org/tutorial/floatingpoint.html\" rel=\"noreferrer\">http://docs.python.org/tutorial/floatingpoint.html</a> for a further explanation.  (It's on the Python website, but Java and C++ have the same \"problem\".)</p>\n\n<p>The solution depends on what exactly your problem is:</p>\n\n<ul>\n<li>If it's that you just don't like seeing all those noise digits, then fix your string formatting.  Don't display more than 15 significant digits (or 7 for float).</li>\n<li>If it's that the inexactness of your numbers is breaking things like \"if\" statements, then you should write if (abs(x - 7.3) &lt; TOLERANCE) instead of if (x == 7.3).</li>\n<li>If you're working with money, then what you probably really want is decimal fixed point.  Store an integer number of cents or whatever the smallest unit of your currency is.</li>\n<li>(VERY UNLIKELY) If you need more than 53 significant bits (15-16 significant digits) of precision, then use a high-precision floating-point type, like BigDecimal.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":7892,"reputation":15964,"user_id":13895,"accept_rate":99,"display_name":"John"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1268872513,"creation_date":1268872513,"answer_id":2466895,"question_id":322749,"body_markdown":"You&#39;re running up against the precision limitation of type double.\r\n\r\nJava.Math has some arbitrary-precision arithmetic facilities.","title":"Retain precision with double in Java","body":"<p>You're running up against the precision limitation of type double.</p>\n\n<p>Java.Math has some arbitrary-precision arithmetic facilities.</p>\n"},{"tags":[],"owner":{"account_id":86536,"reputation":10312,"user_id":240566,"accept_rate":82,"display_name":"Jay Askren"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1268872734,"creation_date":1268872734,"answer_id":2466904,"question_id":322749,"body_markdown":"Computers store numbers in binary and can&#39;t actually represent numbers such as 33.333333333 or 100.0 exactly.  This is one of the tricky things about using doubles.  You will have to just round the answer before showing it to a user.  Luckily in most applications, you don&#39;t need that many decimal places anyhow.\r\n","title":"Retain precision with double in Java","body":"<p>Computers store numbers in binary and can't actually represent numbers such as 33.333333333 or 100.0 exactly.  This is one of the tricky things about using doubles.  You will have to just round the answer before showing it to a user.  Luckily in most applications, you don't need that many decimal places anyhow.</p>\n"},{"tags":[],"owner":{"account_id":101952,"reputation":2027,"user_id":273964,"accept_rate":100,"display_name":"Spike"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1455782667,"creation_date":1268872847,"answer_id":2466913,"question_id":322749,"body_markdown":"Floating point numbers differ from real numbers in that for any given floating point number there is a next higher floating point number. Same as integers. There&#39;s no integer between 1 and 2.\r\n\r\nThere&#39;s no way to represent 1/3 as a float. There&#39;s a float below it and there&#39;s a float above it, and there&#39;s a certain distance between them. And 1/3 is in that space.\r\n\r\nApfloat for Java claims to work with arbitrary precision floating point numbers, but I&#39;ve never used it. Probably worth a look.\r\nhttp://www.apfloat.org/apfloat_java/\r\n\r\nA similar question was asked here before\r\nhttps://stackoverflow.com/questions/277309/java-floating-point-high-precision-library","title":"Retain precision with double in Java","body":"<p>Floating point numbers differ from real numbers in that for any given floating point number there is a next higher floating point number. Same as integers. There's no integer between 1 and 2.</p>\n\n<p>There's no way to represent 1/3 as a float. There's a float below it and there's a float above it, and there's a certain distance between them. And 1/3 is in that space.</p>\n\n<p>Apfloat for Java claims to work with arbitrary precision floating point numbers, but I've never used it. Probably worth a look.\n<a href=\"http://www.apfloat.org/apfloat_java/\" rel=\"nofollow noreferrer\">http://www.apfloat.org/apfloat_java/</a></p>\n\n<p>A similar question was asked here before\n<a href=\"https://stackoverflow.com/questions/277309/java-floating-point-high-precision-library\">Java floating point high precision library</a></p>\n"},{"tags":[],"owner":{"account_id":48015,"reputation":104353,"user_id":142434,"display_name":"Stephen Canon"},"down_vote_count":3,"up_vote_count":113,"is_accepted":false,"score":110,"last_activity_date":1446072956,"creation_date":1268872916,"answer_id":2466914,"question_id":322749,"body_markdown":"When you input a double number, for example, `33.33333333333333`, the value you get is actually the closest representable double-precision value, which is exactly:\r\n\r\n    33.3333333333333285963817615993320941925048828125\r\n\r\nDividing that by 100 gives:\r\n\r\n    0.333333333333333285963817615993320941925048828125\r\n\r\nwhich also isn&#39;t representable as a double-precision number, so again it is rounded to the nearest representable value, which is exactly:\r\n\r\n    0.3333333333333332593184650249895639717578887939453125\r\n\r\nWhen you print this value out, it gets rounded *yet again* to 17 decimal digits, giving:\r\n\r\n    0.33333333333333326","title":"Retain precision with double in Java","body":"<p>When you input a double number, for example, <code>33.33333333333333</code>, the value you get is actually the closest representable double-precision value, which is exactly:</p>\n\n<pre><code>33.3333333333333285963817615993320941925048828125\n</code></pre>\n\n<p>Dividing that by 100 gives:</p>\n\n<pre><code>0.333333333333333285963817615993320941925048828125\n</code></pre>\n\n<p>which also isn't representable as a double-precision number, so again it is rounded to the nearest representable value, which is exactly:</p>\n\n<pre><code>0.3333333333333332593184650249895639717578887939453125\n</code></pre>\n\n<p>When you print this value out, it gets rounded <em>yet again</em> to 17 decimal digits, giving:</p>\n\n<pre><code>0.33333333333333326\n</code></pre>\n"},{"tags":[],"owner":{"account_id":97602,"reputation":787,"user_id":264669,"accept_rate":78,"display_name":"Vinny"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1343179112,"creation_date":1268874515,"answer_id":2467007,"question_id":322749,"body_markdown":"You may want to look into using java&#39;s java.math.BigDecimal class if you really need precision math. Here is a good article from Oracle/Sun on [the case for BigDecimal][1]. While you can never represent 1/3 as someone mentioned,  you **can** have the power to decide exactly how precise you want the result to be. setScale() is your friend.. :)\r\n\r\n\r\n  [1]: https://blogs.oracle.com/CoreJavaTechTips/entry/the_need_for_bigdecimal\r\n\r\nOk, because I have way too much time on my hands at the moment here is a code example that relates to your question:\r\n\r\n    import java.math.BigDecimal;\r\n    /**\r\n     * Created by a wonderful programmer known as:\r\n     * Vincent Stoessel\r\n     * xaymaca@gmail.com\r\n     * on Mar 17, 2010 at  11:05:16 PM\r\n     */\r\n    public class BigUp {\r\n    \r\n        public static void main(String[] args) {\r\n            BigDecimal first, second, result ;\r\n            first = new BigDecimal(&quot;33.33333333333333&quot;)  ;\r\n            second = new BigDecimal(&quot;100&quot;) ;\r\n            result = first.divide(second);\r\n            System.out.println(&quot;result is &quot; + result);\r\n           //will print : result is 0.3333333333333333\r\n    \r\n    \r\n        }\r\n    }\r\nand to plug my new favorite language, Groovy, here is a neater example of the same thing:\r\n\r\n    import java.math.BigDecimal\r\n    \r\n    def  first =   new BigDecimal(&quot;33.33333333333333&quot;)\r\n    def second = new BigDecimal(&quot;100&quot;)\r\n    \r\n    \r\n    println &quot;result is &quot; + first/second   // will print: result is 0.33333333333333\r\n\r\n","title":"Retain precision with double in Java","body":"<p>You may want to look into using java's java.math.BigDecimal class if you really need precision math. Here is a good article from Oracle/Sun on <a href=\"https://blogs.oracle.com/CoreJavaTechTips/entry/the_need_for_bigdecimal\" rel=\"noreferrer\">the case for BigDecimal</a>. While you can never represent 1/3 as someone mentioned,  you <strong>can</strong> have the power to decide exactly how precise you want the result to be. setScale() is your friend.. :)</p>\n\n<p>Ok, because I have way too much time on my hands at the moment here is a code example that relates to your question:</p>\n\n<pre><code>import java.math.BigDecimal;\n/**\n * Created by a wonderful programmer known as:\n * Vincent Stoessel\n * xaymaca@gmail.com\n * on Mar 17, 2010 at  11:05:16 PM\n */\npublic class BigUp {\n\n    public static void main(String[] args) {\n        BigDecimal first, second, result ;\n        first = new BigDecimal(\"33.33333333333333\")  ;\n        second = new BigDecimal(\"100\") ;\n        result = first.divide(second);\n        System.out.println(\"result is \" + result);\n       //will print : result is 0.3333333333333333\n\n\n    }\n}\n</code></pre>\n\n<p>and to plug my new favorite language, Groovy, here is a neater example of the same thing:</p>\n\n<pre><code>import java.math.BigDecimal\n\ndef  first =   new BigDecimal(\"33.33333333333333\")\ndef second = new BigDecimal(\"100\")\n\n\nprintln \"result is \" + first/second   // will print: result is 0.33333333333333\n</code></pre>\n"},{"tags":[],"owner":{"account_id":80823,"reputation":2908,"user_id":228276,"accept_rate":100,"display_name":"Viral Shah"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1464282894,"creation_date":1268874546,"answer_id":2467009,"question_id":322749,"body_markdown":"If you just want to process values as fractions, you can create a Fraction class which holds a numerator and denominator field.\r\n\r\nWrite methods for add, subtract, multiply and divide as well as a toDouble method. This way you can avoid floats during calculations.\r\n\r\nEDIT: Quick implementation,\r\n\r\n    public class Fraction {\r\n\r\n\tprivate int numerator;\r\n\tprivate int denominator;\r\n\t\r\n\tpublic Fraction(int n, int d){\r\n\t\tnumerator = n;\r\n\t\tdenominator = d;\r\n\t}\r\n\t\r\n\tpublic double toDouble(){\r\n\t\treturn ((double)numerator)/((double)denominator);\r\n\t}\r\n\t\r\n\t\r\n\tpublic static Fraction add(Fraction a, Fraction b){\r\n\t\tif(a.denominator != b.denominator){\r\n\t\t\tdouble aTop = b.denominator * a.numerator;\r\n\t\t\tdouble bTop = a.denominator * b.numerator;\r\n\t\t\treturn new Fraction(aTop + bTop, a.denominator * b.denominator);\r\n\t\t}\r\n\t\telse{\r\n\t\t\treturn new Fraction(a.numerator + b.numerator, a.denominator);\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static Fraction divide(Fraction a, Fraction b){\r\n\t\treturn new Fraction(a.numerator * b.denominator, a.denominator * b.numerator);\r\n\t}\r\n\t\r\n\tpublic static Fraction multiply(Fraction a, Fraction b){\r\n\t\treturn new Fraction(a.numerator * b.numerator, a.denominator * b.denominator);\r\n\t}\r\n\t\r\n\tpublic static Fraction subtract(Fraction a, Fraction b){\r\n\t\tif(a.denominator != b.denominator){\r\n\t\t\tdouble aTop = b.denominator * a.numerator;\r\n\t\t\tdouble bTop = a.denominator * b.numerator;\r\n\t\t\treturn new Fraction(aTop-bTop, a.denominator*b.denominator);\r\n\t\t}\r\n\t\telse{\r\n\t\t\treturn new Fraction(a.numerator - b.numerator, a.denominator);\r\n\t\t}\r\n\t}\r\n\t\r\n    }","title":"Retain precision with double in Java","body":"<p>If you just want to process values as fractions, you can create a Fraction class which holds a numerator and denominator field.</p>\n\n<p>Write methods for add, subtract, multiply and divide as well as a toDouble method. This way you can avoid floats during calculations.</p>\n\n<p>EDIT: Quick implementation,</p>\n\n<pre><code>public class Fraction {\n\nprivate int numerator;\nprivate int denominator;\n\npublic Fraction(int n, int d){\n    numerator = n;\n    denominator = d;\n}\n\npublic double toDouble(){\n    return ((double)numerator)/((double)denominator);\n}\n\n\npublic static Fraction add(Fraction a, Fraction b){\n    if(a.denominator != b.denominator){\n        double aTop = b.denominator * a.numerator;\n        double bTop = a.denominator * b.numerator;\n        return new Fraction(aTop + bTop, a.denominator * b.denominator);\n    }\n    else{\n        return new Fraction(a.numerator + b.numerator, a.denominator);\n    }\n}\n\npublic static Fraction divide(Fraction a, Fraction b){\n    return new Fraction(a.numerator * b.denominator, a.denominator * b.numerator);\n}\n\npublic static Fraction multiply(Fraction a, Fraction b){\n    return new Fraction(a.numerator * b.numerator, a.denominator * b.denominator);\n}\n\npublic static Fraction subtract(Fraction a, Fraction b){\n    if(a.denominator != b.denominator){\n        double aTop = b.denominator * a.numerator;\n        double bTop = a.denominator * b.numerator;\n        return new Fraction(aTop-bTop, a.denominator*b.denominator);\n    }\n    else{\n        return new Fraction(a.numerator - b.numerator, a.denominator);\n    }\n}\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":374588,"reputation":2774,"user_id":724873,"accept_rate":80,"display_name":"Maciek D."},"down_vote_count":4,"up_vote_count":2,"is_accepted":false,"score":-2,"last_activity_date":1274444174,"creation_date":1274444174,"answer_id":2881915,"question_id":322749,"body_markdown":"Do not waste your efford using BigDecimal. In 99.99999% cases you don&#39;t need it. java **double** type is of cource approximate but in almost all cases, it is sufficiently precise. Mind that your have an error at 14th significant digit. **This is really negligible!**\r\n\r\nTo get nice output use:\r\n\r\n    System.out.printf(&quot;%.2f\\n&quot;, total);\r\n\r\n","title":"Retain precision with double in Java","body":"<p>Do not waste your efford using BigDecimal. In 99.99999% cases you don't need it. java <strong>double</strong> type is of cource approximate but in almost all cases, it is sufficiently precise. Mind that your have an error at 14th significant digit. <strong>This is really negligible!</strong></p>\n\n<p>To get nice output use:</p>\n\n<pre><code>System.out.printf(\"%.2f\\n\", total);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":395843,"reputation":5303,"user_id":759012,"display_name":"sravan"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1342031296,"creation_date":1323265279,"answer_id":8416233,"question_id":322749,"body_markdown":"\tprivate void getRound() {\r\n\t\t// this is very simple and interesting \r\n\t\tdouble a = 5, b = 3, c;\r\n\t\tc = a / b;\r\n\t\tSystem.out.println(&quot; round  val is &quot; + c);\r\n\t\t\r\n\t\t//  round  val is  :  1.6666666666666667\r\n\t\t// if you want to only two precision point with double we \r\n                //  can use formate option in String \r\n               // which takes 2 parameters one is formte specifier which \r\n               // shows dicimal places another double value \r\n\t\tString s = String.format(&quot;%.2f&quot;, c);\r\n\t\tdouble val = Double.parseDouble(s);\r\n\t\tSystem.out.println(&quot; val is :&quot; + val);\r\n\t\t// now out put will be : val is :1.67\r\n\t}\r\n\r\n","title":"Retain precision with double in Java","body":"<pre><code>private void getRound() {\n    // this is very simple and interesting \n    double a = 5, b = 3, c;\n    c = a / b;\n    System.out.println(\" round  val is \" + c);\n\n    //  round  val is  :  1.6666666666666667\n    // if you want to only two precision point with double we \n            //  can use formate option in String \n           // which takes 2 parameters one is formte specifier which \n           // shows dicimal places another double value \n    String s = String.format(\"%.2f\", c);\n    double val = Double.parseDouble(s);\n    System.out.println(\" val is :\" + val);\n    // now out put will be : val is :1.67\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4377698,"reputation":161,"user_id":3570276,"display_name":"Mr.Cat"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1447518366,"creation_date":1447517134,"answer_id":33710380,"question_id":322749,"body_markdown":"Why not use the round() method from Math class?\r\n\r\n    // The number of 0s determines how many digits you want after the floating point\r\n    // (here one digit)\r\n    total = (double)Math.round(total * 10) / 10;\r\n    System.out.println(total); // prints 11.4","title":"Retain precision with double in Java","body":"<p>Why not use the round() method from Math class?</p>\n\n<pre><code>// The number of 0s determines how many digits you want after the floating point\n// (here one digit)\ntotal = (double)Math.round(total * 10) / 10;\nSystem.out.println(total); // prints 11.4\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7553937,"reputation":1,"user_id":5734382,"display_name":"user5734382"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1525690798,"creation_date":1525690798,"answer_id":50212621,"question_id":322749,"body_markdown":"If you have no choice other than using double values, can use the below code.\r\n\r\n    public static double sumDouble(double value1, double value2) {\r\n\t\tdouble sum = 0.0;\r\n\t\tString value1Str = Double.toString(value1);\r\n\t\tint decimalIndex = value1Str.indexOf(&quot;.&quot;);\r\n\t\tint value1Precision = 0;\r\n\t\tif (decimalIndex != -1) {\r\n\t\t\tvalue1Precision = (value1Str.length() - 1) - decimalIndex;\r\n\t\t}\r\n\t\t\r\n\t\tString value2Str = Double.toString(value2);\r\n\t\tdecimalIndex = value2Str.indexOf(&quot;.&quot;);\r\n\t\tint value2Precision = 0;\r\n\t\tif (decimalIndex != -1) {\r\n\t\t\tvalue2Precision = (value2Str.length() - 1) - decimalIndex;\r\n\t\t}\r\n\t\t\r\n\t\tint maxPrecision = value1Precision &gt; value2Precision ? value1Precision : value2Precision;\r\n\t\tsum = value1 + value2;\r\n\t\tString s = String.format(&quot;%.&quot; + maxPrecision + &quot;f&quot;, sum);\r\n\t\tsum = Double.parseDouble(s);\r\n\t\treturn sum;\r\n\t}\r\n","title":"Retain precision with double in Java","body":"<p>If you have no choice other than using double values, can use the below code.</p>\n\n<pre><code>public static double sumDouble(double value1, double value2) {\n    double sum = 0.0;\n    String value1Str = Double.toString(value1);\n    int decimalIndex = value1Str.indexOf(\".\");\n    int value1Precision = 0;\n    if (decimalIndex != -1) {\n        value1Precision = (value1Str.length() - 1) - decimalIndex;\n    }\n\n    String value2Str = Double.toString(value2);\n    decimalIndex = value2Str.indexOf(\".\");\n    int value2Precision = 0;\n    if (decimalIndex != -1) {\n        value2Precision = (value2Str.length() - 1) - decimalIndex;\n    }\n\n    int maxPrecision = value1Precision &gt; value2Precision ? value1Precision : value2Precision;\n    sum = value1 + value2;\n    String s = String.format(\"%.\" + maxPrecision + \"f\", sum);\n    sum = Double.parseDouble(s);\n    return sum;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6973537,"reputation":1101,"user_id":5348990,"accept_rate":36,"display_name":"jackycflau"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1591404986,"creation_date":1569253743,"answer_id":58065988,"question_id":322749,"body_markdown":"Short answer: Always use BigDecimal and make sure you are using the constructor with &lt;b&gt; String&lt;/b&gt; argument, not the double one.\r\n\r\nBack to your example, the following code will print 11.4, as you wish.\r\n\r\n    public class doublePrecision {\r\n        public static void main(String[] args) {\r\n          BigDecimal total = new BigDecimal(&quot;0&quot;);\r\n          total = total.add(new BigDecimal(&quot;5.6&quot;));\r\n          total = total.add(new BigDecimal(&quot;5.8&quot;));\r\n          System.out.println(total);\r\n        }\r\n    }\r\n\r\n","title":"Retain precision with double in Java","body":"<p>Short answer: Always use BigDecimal and make sure you are using the constructor with <b> String</b> argument, not the double one.</p>\n\n<p>Back to your example, the following code will print 11.4, as you wish.</p>\n\n<pre><code>public class doublePrecision {\n    public static void main(String[] args) {\n      BigDecimal total = new BigDecimal(\"0\");\n      total = total.add(new BigDecimal(\"5.6\"));\n      total = total.add(new BigDecimal(\"5.8\"));\n      System.out.println(total);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3387857,"reputation":809,"user_id":2843451,"display_name":"Harry Zhang"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1600424731,"creation_date":1600424731,"answer_id":63953941,"question_id":322749,"body_markdown":"            /*\r\n            0.8                     1.2\r\n            0.7                     1.3\r\n            0.7000000000000002      2.3\r\n            0.7999999999999998      4.2\r\n            */\r\n            double adjust = fToInt + 1.0 - orgV;\r\n            \r\n            // The following two lines works for me. \r\n            String s = String.format(&quot;%.2f&quot;, adjust);\r\n            double val = Double.parseDouble(s);\r\n\r\n            System.out.println(val); // output: 0.8, 0.7, 0.7, 0.8","title":"Retain precision with double in Java","body":"<pre><code>        /*\n        0.8                     1.2\n        0.7                     1.3\n        0.7000000000000002      2.3\n        0.7999999999999998      4.2\n        */\n        double adjust = fToInt + 1.0 - orgV;\n        \n        // The following two lines works for me. \n        String s = String.format(&quot;%.2f&quot;, adjust);\n        double val = Double.parseDouble(s);\n\n        System.out.println(val); // output: 0.8, 0.7, 0.7, 0.8\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8371384,"reputation":494,"user_id":6286397,"display_name":"Vimal Raj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634499945,"creation_date":1634499945,"answer_id":69608022,"question_id":322749,"body_markdown":"You can Do the Following! \r\n\r\n    System.out.println(String.format(&quot;%.12f&quot;, total));\r\n\r\nif you change the decimal value here ***%.12f***","title":"Retain precision with double in Java","body":"<p>You can Do the Following!</p>\n<pre><code>System.out.println(String.format(&quot;%.12f&quot;, total));\n</code></pre>\n<p>if you change the decimal value here <em><strong>%.12f</strong></em></p>\n"},{"tags":[],"owner":{"account_id":4342653,"reputation":66,"user_id":3545530,"display_name":"Hiro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653938713,"creation_date":1653938713,"answer_id":72439165,"question_id":322749,"body_markdown":"So far I understand it as main goal to get correct `double` from wrong `double`.\r\n\r\nLook for my solution how to get correct value from &quot;approximate&quot; wrong value - if it is real floating point it rounds last digit - counted from all digits - counting before dot and try to keep max possible digits after dot - hope that it is enough precision for most cases:\r\n\r\n    public static double roundError(double value) {\r\n        BigDecimal valueBigDecimal = new BigDecimal(Double.toString(value));\r\n        String valueString = valueBigDecimal.toPlainString();\r\n        if (!valueString.contains(&quot;.&quot;)) return value;\r\n        String[] valueArray = valueString.split(&quot;[.]&quot;);\r\n        int places = 16;\r\n        places -= valueArray[0].length();\r\n        if (&quot;56789&quot;.contains(&quot;&quot; + valueArray[0].charAt(valueArray[0].length() - 1))) places--;\r\n        //System.out.println(&quot;Rounding &quot; + value + &quot;(&quot; + valueString + &quot;) to &quot; + places + &quot; places&quot;);\r\n        return valueBigDecimal.setScale(places, RoundingMode.HALF_UP).doubleValue();\r\n    }\r\n\r\nI know it is long code, sure not best, maybe someone can fix it to be more elegant. Anyway it is working, see examples:\r\n\r\n    roundError(5.6+5.8) = 11.399999999999999 = 11.4\r\n    roundError(0.4-0.3) = 0.10000000000000003 = 0.1\r\n    roundError(37235.137567000005) = 37235.137567\r\n    roundError(1/3) 0.3333333333333333 = 0.333333333333333\r\n    roundError(3723513756.7000005) = 3.7235137567E9 (3723513756.7)\r\n    roundError(3723513756123.7000005) = 3.7235137561237E12 (3723513756123.7)\r\n    roundError(372351375612.7000005) = 3.723513756127E11 (372351375612.7)\r\n    roundError(1.7976931348623157) = 1.797693134862316\r\n\r\n","title":"Retain precision with double in Java","body":"<p>So far I understand it as main goal to get correct <code>double</code> from wrong <code>double</code>.</p>\n<p>Look for my solution how to get correct value from &quot;approximate&quot; wrong value - if it is real floating point it rounds last digit - counted from all digits - counting before dot and try to keep max possible digits after dot - hope that it is enough precision for most cases:</p>\n<pre><code>public static double roundError(double value) {\n    BigDecimal valueBigDecimal = new BigDecimal(Double.toString(value));\n    String valueString = valueBigDecimal.toPlainString();\n    if (!valueString.contains(&quot;.&quot;)) return value;\n    String[] valueArray = valueString.split(&quot;[.]&quot;);\n    int places = 16;\n    places -= valueArray[0].length();\n    if (&quot;56789&quot;.contains(&quot;&quot; + valueArray[0].charAt(valueArray[0].length() - 1))) places--;\n    //System.out.println(&quot;Rounding &quot; + value + &quot;(&quot; + valueString + &quot;) to &quot; + places + &quot; places&quot;);\n    return valueBigDecimal.setScale(places, RoundingMode.HALF_UP).doubleValue();\n}\n</code></pre>\n<p>I know it is long code, sure not best, maybe someone can fix it to be more elegant. Anyway it is working, see examples:</p>\n<pre><code>roundError(5.6+5.8) = 11.399999999999999 = 11.4\nroundError(0.4-0.3) = 0.10000000000000003 = 0.1\nroundError(37235.137567000005) = 37235.137567\nroundError(1/3) 0.3333333333333333 = 0.333333333333333\nroundError(3723513756.7000005) = 3.7235137567E9 (3723513756.7)\nroundError(3723513756123.7000005) = 3.7235137561237E12 (3723513756123.7)\nroundError(372351375612.7000005) = 3.723513756127E11 (372351375612.7)\nroundError(1.7976931348623157) = 1.797693134862316\n</code></pre>\n"}],"owner":{"account_id":3612,"reputation":3989,"user_id":5219,"display_name":"Deinumite"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":261173,"favorite_count":0,"down_vote_count":1,"up_vote_count":185,"accepted_answer_id":322875,"answer_count":24,"score":184,"last_activity_date":1693936507,"creation_date":1227750843,"question_id":322749,"body_markdown":"    public class doublePrecision {\r\n        public static void main(String[] args) {\r\n\r\n            double total = 0;\r\n            total += 5.6;\r\n            total += 5.8;\r\n            System.out.println(total);\r\n        }\r\n    }\r\n\r\nThe above code prints:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    11.399999999999\r\n\r\nHow would I get this to just print (or be able to use it as) 11.4?","title":"Retain precision with double in Java","body":"<pre><code>public class doublePrecision {\n    public static void main(String[] args) {\n\n        double total = 0;\n        total += 5.6;\n        total += 5.8;\n        System.out.println(total);\n    }\n}\n</code></pre>\n\n<p>The above code prints:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>11.399999999999\n</code></pre>\n\n<p>How would I get this to just print (or be able to use it as) 11.4?</p>\n"},{"tags":["java","android","android-notifications"],"owner":{"account_id":3212087,"reputation":600,"user_id":2711864,"accept_rate":79,"display_name":"Kidades"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693936443,"creation_date":1693936443,"question_id":77046751,"body_markdown":"```\r\nNotification.Builder notificationBuilder = new Notification.Builder(this, channelId)\r\n                .setSmallIcon(ic)\r\n                .setLargeIcon(BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher))\r\n                .setContentTitle(title)\r\n                .setContentText(body)\r\n                .setAutoCancel(true)\r\n                .setContentIntent(pendingIntent);\r\n```\r\n\r\n\r\nWhen I create a notification and give it a small and large icon, the large icon appears at the right side, while the small icon appears at the left.\r\n\r\n[![enter image description here](https://i.stack.imgur.com/WQsVw.png)](https://i.stack.imgur.com/WQsVw.png)\r\n\r\n\r\nI want to make the large icon appear on the left side too, instead of the small icon.\r\n\r\nApps like viber and some others can show the contact&#39;s picture on the left, with the small icon showing in the corner.\r\n\r\n\r\n[![enter image description here](https://i.stack.imgur.com/wUzI7.jpg)](https://i.stack.imgur.com/wUzI7.jpg)\r\n\r\nHow do I get it to show like this?","title":"How to combine small and large icon in notification drawer?","body":"<pre><code>Notification.Builder notificationBuilder = new Notification.Builder(this, channelId)\n                .setSmallIcon(ic)\n                .setLargeIcon(BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher))\n                .setContentTitle(title)\n                .setContentText(body)\n                .setAutoCancel(true)\n                .setContentIntent(pendingIntent);\n</code></pre>\n<p>When I create a notification and give it a small and large icon, the large icon appears at the right side, while the small icon appears at the left.</p>\n<p><a href=\"https://i.stack.imgur.com/WQsVw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WQsVw.png\" alt=\"enter image description here\" /></a></p>\n<p>I want to make the large icon appear on the left side too, instead of the small icon.</p>\n<p>Apps like viber and some others can show the contact's picture on the left, with the small icon showing in the corner.</p>\n<p><a href=\"https://i.stack.imgur.com/wUzI7.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wUzI7.jpg\" alt=\"enter image description here\" /></a></p>\n<p>How do I get it to show like this?</p>\n"},{"tags":["java","azure","graph"],"comments":[{"owner":{"account_id":1438222,"reputation":843,"user_id":1452528,"display_name":"Derek Gusoff"},"score":0,"creation_date":1668733697,"post_id":74480548,"comment_id":131484647,"body_markdown":"If you have an automated system credential calling `/me`, what exactly is the data you&#39;re hoping to get?","body":"If you have an automated system credential calling <code>&#47;me</code>, what exactly is the data you&#39;re hoping to get?"},{"owner":{"account_id":154850,"reputation":10221,"user_id":371077,"accept_rate":64,"display_name":"Roy Hinkley"},"score":0,"creation_date":1668779058,"post_id":74480548,"comment_id":131495395,"body_markdown":"@DerekGusoff - That is my question here - That is the example in the documentation and it makes no sense to me.  Why would Microsoft document use inappropriate example usage?","body":"@DerekGusoff - That is my question here - That is the example in the documentation and it makes no sense to me.  Why would Microsoft document use inappropriate example usage?"},{"owner":{"account_id":1438222,"reputation":843,"user_id":1452528,"display_name":"Derek Gusoff"},"score":0,"creation_date":1668783393,"post_id":74480548,"comment_id":131497047,"body_markdown":"sometimes stuff is wrong. the person putting it together was copy/pasting some code between examples.","body":"sometimes stuff is wrong. the person putting it together was copy/pasting some code between examples."},{"owner":{"account_id":154850,"reputation":10221,"user_id":371077,"accept_rate":64,"display_name":"Roy Hinkley"},"score":0,"creation_date":1668783490,"post_id":74480548,"comment_id":131497079,"body_markdown":"@DerekGusoff Thank you, I do understand the docs are wrong - that is why I am reaching out to SO to find the correct answer.  :)  I have reached out to MS, but that will take a while.","body":"@DerekGusoff Thank you, I do understand the docs are wrong - that is why I am reaching out to SO to find the correct answer.  :)  I have reached out to MS, but that will take a while."}],"answers":[{"tags":[],"owner":{"account_id":1438222,"reputation":843,"user_id":1452528,"display_name":"Derek Gusoff"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1668733456,"creation_date":1668733456,"answer_id":74483883,"question_id":74480548,"body_markdown":"It doesn&#39;t make any sense to call `/me` with a client credential flow, because there is no `/me` there. It&#39;s just an automated credential. It doesn&#39;t have any user data to fetch.","title":"Azure Client credentials provider throws error &#39;/me request is only valid with delegated authentication flow&#39;","body":"<p>It doesn't make any sense to call <code>/me</code> with a client credential flow, because there is no <code>/me</code> there. It's just an automated credential. It doesn't have any user data to fetch.</p>\n"},{"tags":[],"owner":{"account_id":154850,"reputation":10221,"user_id":371077,"accept_rate":64,"display_name":"Roy Hinkley"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693936377,"creation_date":1668807344,"answer_id":74495565,"question_id":74480548,"body_markdown":"The documentation is wrong - Omit the last line of the example altogether.  \r\n\r\nCalls made to API using `credentials provider flow` take the form:\r\n\r\n `graphClient.users(&quot;user-id&quot;)` \r\n\r\ninstead of: \r\n\r\n  `graphClient.me()`\r\n\r\nTo send an email using `credentials provider flow`:\r\n\r\n    ...\r\n    \r\n    graphClient.users(&quot;username@domain.com&quot;)\r\n                    .sendMail(UserSendMailParameterSet\r\n                            .newBuilder()\r\n                            .withMessage(message)\r\n                            .withSaveToSentItems(saveToSentItems)\r\n                            .build())\r\n                    .buildRequest()\r\n                    .post();\r\n\r\n\r\n\r\n\r\n  ","title":"Azure Client credentials provider throws error &#39;/me request is only valid with delegated authentication flow&#39;","body":"<p>The documentation is wrong - Omit the last line of the example altogether.</p>\n<p>Calls made to API using <code>credentials provider flow</code> take the form:</p>\n<p><code>graphClient.users(&quot;user-id&quot;)</code></p>\n<p>instead of:</p>\n<p><code>graphClient.me()</code></p>\n<p>To send an email using <code>credentials provider flow</code>:</p>\n<pre><code>...\n\ngraphClient.users(&quot;username@domain.com&quot;)\n                .sendMail(UserSendMailParameterSet\n                        .newBuilder()\n                        .withMessage(message)\n                        .withSaveToSentItems(saveToSentItems)\n                        .build())\n                .buildRequest()\n                .post();\n</code></pre>\n"}],"owner":{"account_id":154850,"reputation":10221,"user_id":371077,"accept_rate":64,"display_name":"Roy Hinkley"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1376,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74495565,"answer_count":2,"score":0,"last_activity_date":1693936377,"creation_date":1668710481,"question_id":74480548,"body_markdown":"I am following Microsoft documentation in obtaining credentials for Azure Graph API.  [This document][2] states that an unattended application should use `client credentials provider` when making web api calls.\r\n\r\nThe [example][1] in the documents for this is:\r\n\r\n    final ClientSecretCredential clientSecretCredential = new ClientSecretCredentialBuilder()\r\n            .clientId(clientId)\r\n            .clientSecret(clientSecret)\r\n            .tenantId(tenant)\r\n            .build();\r\n\r\n    List&lt;String&gt; scopes = Arrays.asList(&quot;https://graph.microsoft.com/.default&quot;);\r\n    \r\n    final TokenCredentialAuthProvider tokenCredentialAuthProvider = new TokenCredentialAuthProvider(scopes, clientSecretCredential);\r\n    \r\n    final GraphServiceClient graphClient =\r\n      GraphServiceClient\r\n        .builder()\r\n        .authenticationProvider(tokenCredentialAuthProvider)\r\n        .buildClient();\r\n    \r\n    final User me = graphClient.me().buildRequest().get();\r\n\r\n\r\nBut I encounter an exception on the last line:\r\n\r\n    Error message: /me request is only valid with delegated authentication flow.\r\n\r\nIn researching this error, I came across [this post][3] that explains the error further - which confuses me as to why the documentation would use what *appears to be* inappropriate example of how to consume this API. It appears to be `delegated permissions authorization code flow`.\r\n\r\n[This post][4] does not add any clarity.  \r\n  \r\n\r\n&gt; What is the correct way to make this call?  Or is this the result of incorrect configuration settings in\r\n&gt; [Azure management console][5] for the app to use Application permissions instead of Delegated permissions?\r\n\r\n\r\n\r\n- Azure identity = v1.3.1\r\n\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/graph/sdks/choose-authentication-providers?tabs=Java#client-credentials-provider\r\n  [2]: https://learn.microsoft.com/en-us/graph/sdks/choose-authentication-providers?tabs=Java#authorization-code-provider\r\n  [3]: https://learn.microsoft.com/en-us/answers/questions/852080/how-to-fix-34me-request-is-only-valid-with-delegat.html\r\n  [4]: https://stackoverflow.com/questions/70515836/code-badrequest-message-me-request-is-only-valid-with-delegated-authenticatio\r\n  [5]: https://learn.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow#application-permissions","title":"Azure Client credentials provider throws error &#39;/me request is only valid with delegated authentication flow&#39;","body":"<p>I am following Microsoft documentation in obtaining credentials for Azure Graph API.  <a href=\"https://learn.microsoft.com/en-us/graph/sdks/choose-authentication-providers?tabs=Java#authorization-code-provider\" rel=\"nofollow noreferrer\">This document</a> states that an unattended application should use <code>client credentials provider</code> when making web api calls.</p>\n<p>The <a href=\"https://learn.microsoft.com/en-us/graph/sdks/choose-authentication-providers?tabs=Java#client-credentials-provider\" rel=\"nofollow noreferrer\">example</a> in the documents for this is:</p>\n<pre><code>final ClientSecretCredential clientSecretCredential = new ClientSecretCredentialBuilder()\n        .clientId(clientId)\n        .clientSecret(clientSecret)\n        .tenantId(tenant)\n        .build();\n\nList&lt;String&gt; scopes = Arrays.asList(&quot;https://graph.microsoft.com/.default&quot;);\n\nfinal TokenCredentialAuthProvider tokenCredentialAuthProvider = new TokenCredentialAuthProvider(scopes, clientSecretCredential);\n\nfinal GraphServiceClient graphClient =\n  GraphServiceClient\n    .builder()\n    .authenticationProvider(tokenCredentialAuthProvider)\n    .buildClient();\n\nfinal User me = graphClient.me().buildRequest().get();\n</code></pre>\n<p>But I encounter an exception on the last line:</p>\n<pre><code>Error message: /me request is only valid with delegated authentication flow.\n</code></pre>\n<p>In researching this error, I came across <a href=\"https://learn.microsoft.com/en-us/answers/questions/852080/how-to-fix-34me-request-is-only-valid-with-delegat.html\" rel=\"nofollow noreferrer\">this post</a> that explains the error further - which confuses me as to why the documentation would use what <em>appears to be</em> inappropriate example of how to consume this API. It appears to be <code>delegated permissions authorization code flow</code>.</p>\n<p><a href=\"https://stackoverflow.com/questions/70515836/code-badrequest-message-me-request-is-only-valid-with-delegated-authenticatio\">This post</a> does not add any clarity.</p>\n<blockquote>\n<p>What is the correct way to make this call?  Or is this the result of incorrect configuration settings in\n<a href=\"https://learn.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow#application-permissions\" rel=\"nofollow noreferrer\">Azure management console</a> for the app to use Application permissions instead of Delegated permissions?</p>\n</blockquote>\n<ul>\n<li>Azure identity = v1.3.1</li>\n</ul>\n"},{"tags":["java","spring","spring-data-jpa"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1693852153,"post_id":77039228,"comment_id":135811753,"body_markdown":"Your expectations are wrong. The `@LastUpdatedBy` (and friends) are updated always by an entity listener regardless of what you set.","body":"Your expectations are wrong. The <code>@LastUpdatedBy</code> (and friends) are updated always by an entity listener regardless of what you set."},{"owner":{"account_id":7644383,"reputation":1,"user_id":5795538,"display_name":"Sofiane YOUSFI"},"score":0,"creation_date":1693896489,"post_id":77039228,"comment_id":135815947,"body_markdown":"So it&#39;s not possible to update lastUpdateBy with another value?","body":"So it&#39;s not possible to update lastUpdateBy with another value?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1693897170,"post_id":77039228,"comment_id":135816080,"body_markdown":"Not manually. That is the whole point of those annotations/fields that they are updated automatically.","body":"Not manually. That is the whole point of those annotations/fields that they are updated automatically."}],"owner":{"account_id":7644383,"reputation":1,"user_id":5795538,"display_name":"Sofiane YOUSFI"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693935320,"creation_date":1693843496,"question_id":77039228,"body_markdown":"I&#39;m using Spring Data JPA Auditing and it&#39;s working. The problem is when I set a custom value in the property, this value is not persisted and I still have the auditing value.\r\n\r\n**CustomAuditorAwareConfig**\r\n\r\n```\r\n@Configuration\r\npublic class CustomAuditorAwareConfig implements AuditorAware&lt;String&gt; {\r\n\r\n    @Override\r\n    public Optional&lt;String&gt; getCurrentAuditor() {\r\n        return Optional.of(&quot;ANONYMOUS&quot;);\r\n    }\r\n}\r\n```\r\n\r\n\r\n**Entity**\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@Accessors(chain = true)\r\n@MappedSuperclass\r\npublic class BaseEntity {\r\n\r\n    @id\r\n    private String id;\r\n\r\n    @LastModifiedBy\r\n    private String lastUpdateBy;\r\n\r\n}\r\n```\r\n\r\n**Service**\r\n\r\n```\r\n@Service\r\n@AllArgsConstructor\r\npublic class AvailableShipmentDatesDefaultService implements AvailableShipmentDatesService {\r\n\r\n    private final MyRepository repository;\r\n\r\n    @Transactional(rollbackFor = Exception.class)\r\n    @Override\r\n    public void patchEntity(String id) {\r\n\r\n        BaseEntity entity = \r\n\r\n        entity.setLastUpdateBy(&quot;Toto&quot;);\r\n\r\n        repository.save(entity);\r\n    }\r\n}\r\n```\r\n\r\nThe persisted value for lastUpdateBy is &quot;ANONYMOUS&quot;\r\n\r\nExpect to have &quot;Toto&quot; instead of &quot;ANONYMOUS&quot;","title":"Override spring data jpa auditing @LastModifiedBy","body":"<p>I'm using Spring Data JPA Auditing and it's working. The problem is when I set a custom value in the property, this value is not persisted and I still have the auditing value.</p>\n<p><strong>CustomAuditorAwareConfig</strong></p>\n<pre><code>@Configuration\npublic class CustomAuditorAwareConfig implements AuditorAware&lt;String&gt; {\n\n    @Override\n    public Optional&lt;String&gt; getCurrentAuditor() {\n        return Optional.of(&quot;ANONYMOUS&quot;);\n    }\n}\n</code></pre>\n<p><strong>Entity</strong></p>\n<pre><code>@Getter\n@Setter\n@Accessors(chain = true)\n@MappedSuperclass\npublic class BaseEntity {\n\n    @id\n    private String id;\n\n    @LastModifiedBy\n    private String lastUpdateBy;\n\n}\n</code></pre>\n<p><strong>Service</strong></p>\n<pre><code>@Service\n@AllArgsConstructor\npublic class AvailableShipmentDatesDefaultService implements AvailableShipmentDatesService {\n\n    private final MyRepository repository;\n\n    @Transactional(rollbackFor = Exception.class)\n    @Override\n    public void patchEntity(String id) {\n\n        BaseEntity entity = \n\n        entity.setLastUpdateBy(&quot;Toto&quot;);\n\n        repository.save(entity);\n    }\n}\n</code></pre>\n<p>The persisted value for lastUpdateBy is &quot;ANONYMOUS&quot;</p>\n<p>Expect to have &quot;Toto&quot; instead of &quot;ANONYMOUS&quot;</p>\n"},{"tags":["java","html","spring-boot","forms","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":26079635,"reputation":24,"user_id":19778028,"display_name":"Elentari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693914013,"creation_date":1693914013,"answer_id":77044194,"question_id":77040495,"body_markdown":"I suggest that in repository interface define like that \r\n\r\n`public interface CommentRepository extends JpaRepository&lt;Comment, Long&gt; {\r\n}`\r\n\r\nand in Entitiy class do that\r\n\r\n ` @Id\r\n @GeneratedValue(strategy=GenerationType.IDENTITY)\r\nLong commentid;`\r\n\r\nMaybe it is the problem because what i know that ID field should be same with your id class type.","title":"Failed to convert value of type &#39;java.lang.String&#39; to required type &#39;com.learnSphere.entities.Comment&#39;","body":"<p>I suggest that in repository interface define like that</p>\n<p><code>public interface CommentRepository extends JpaRepository&lt;Comment, Long&gt; { }</code></p>\n<p>and in Entitiy class do that</p>\n<p><code> @Id @GeneratedValue(strategy=GenerationType.IDENTITY) Long commentid;</code></p>\n<p>Maybe it is the problem because what i know that ID field should be same with your id class type.</p>\n"}],"owner":{"account_id":29366109,"reputation":1,"user_id":22499762,"display_name":"NewBie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693935194,"creation_date":1693859890,"question_id":77040495,"body_markdown":"I am trying to learn Spring therefore making small projects,here i am trying to get a simple name and comment from the front end this is my html front-end\r\n\r\n```\r\n&lt;h1&gt;add your comment here&lt;/h1&gt;\r\n&lt;form method=&quot;post&quot; action=&quot;/addComment&quot;&gt;\r\n\t\r\n\t&lt;input type=&quot;text&quot;  name=&quot;name&quot; placeholder=&quot;Enter your name&quot;&gt;\r\n    &lt;input type=&quot;text&quot; name=&quot;comment&quot;  placeholder=&quot;Enter comment here&quot;&gt;\r\n\t\r\n    &lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;\r\n&lt;/form&gt;\r\n```\r\nand i am trying to store it in my MySQL data base using SpringBoot\r\nthis is my Entity class for taking the comment\r\n\r\n```\r\n@Entity\r\npublic class Comment {\r\n\t@Id\r\n\t@GeneratedValue(strategy=GenerationType.AUTO)\r\n\tint commentid;\r\n\t\r\n\tString name;\r\n\tString comment;\r\n\t\r\n\r\n\tpublic Comment() {\r\n\t\tsuper();\r\n\t\t// TODO Auto-generated constructor stub\r\n\t}\r\n\r\n\tpublic Comment(int commentid, String name, String comment) {\r\n\t\tsuper();\r\n\t\tthis.commentid = commentid;\r\n\t\tthis.name = name;\r\n\t\tthis.comment = comment;\r\n\t}\r\n\r\n\tpublic int getCommentid() {\r\n\t\treturn commentid;\r\n\t}\r\n\r\n\tpublic void setCommentid(int commentid) {\r\n\t\tthis.commentid = commentid;\r\n\t}\r\n\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\r\n\tpublic void setName(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\r\n\tpublic String getComment() {\r\n\t\treturn comment;\r\n\t}\r\n\r\n\tpublic void setComment(String comment) {\r\n\t\tthis.comment = comment;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn &quot;Comment [commentid=&quot; + commentid + &quot;, name=&quot; + name + &quot;, comment=&quot; + comment + &quot;]&quot;;\r\n\t}\r\n}\r\n```\r\nand this is my controller class\r\n\r\n```\r\n@Controller\r\npublic class CommentController {\r\n\t\r\n\t@Autowired\r\n\tUsersService uservice;\r\n\t\r\n\t@PostMapping(&quot;/addComment&quot;)\r\n\tpublic String addComment(@ModelAttribute Comment comment) {\r\n\t\r\n\t\tSystem.out.println(&quot;Received name: &quot; + comment.getName());\r\n\t    System.out.println(&quot;Received comment: &quot; + comment.getComment());\r\n\t\tuservice.addComment(comment);\r\n\t\treturn &quot;Comments&quot;;\r\n\t}\r\n}\r\n```\r\nwhen i am trying to typein some int type data like &quot;1 &quot; &quot;2&quot; in my html input fields it gets added into my data base fine but when ever i am trying to add some String type data it gives me a error like\r\n\r\n&quot;\r\nFailed to convert value of type &#39;java.lang.String&#39; to required type &#39;com.learnSphere.entities.Comment&#39;\r\n&quot;\r\n\r\nthis is my repository\r\n```\r\npackage com.learnSphere.repositories;\r\n\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\n\r\nimport com.learnSphere.entities.Comment;\r\n\r\npublic interface CommentRepository extends JpaRepository&lt;Comment, String&gt; {\r\n\r\n}\r\n```\r\nand this is my Service code \r\n\r\n```\r\n@Override\r\n\tpublic String addComment(Comment comment) {\r\n\t\tcrepo.save(comment);\r\n\t\treturn &quot;Saved successfully!!&quot;;\r\n```\r\n\r\ni tried checking the entities again and again and the html input fields , maybe i am sending the data wrong or maybe the order of my entity class is wrong but nothings wroking\r\n\r\ni have tried everything in my knowledge to solve this but i cant find anything . you guys are pros here please solve this one for me","title":"Failed to convert value of type &#39;java.lang.String&#39; to required type &#39;com.learnSphere.entities.Comment&#39;","body":"<p>I am trying to learn Spring therefore making small projects,here i am trying to get a simple name and comment from the front end this is my html front-end</p>\n<pre><code>&lt;h1&gt;add your comment here&lt;/h1&gt;\n&lt;form method=&quot;post&quot; action=&quot;/addComment&quot;&gt;\n    \n    &lt;input type=&quot;text&quot;  name=&quot;name&quot; placeholder=&quot;Enter your name&quot;&gt;\n    &lt;input type=&quot;text&quot; name=&quot;comment&quot;  placeholder=&quot;Enter comment here&quot;&gt;\n    \n    &lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n<p>and i am trying to store it in my MySQL data base using SpringBoot\nthis is my Entity class for taking the comment</p>\n<pre><code>@Entity\npublic class Comment {\n    @Id\n    @GeneratedValue(strategy=GenerationType.AUTO)\n    int commentid;\n    \n    String name;\n    String comment;\n    \n\n    public Comment() {\n        super();\n        // TODO Auto-generated constructor stub\n    }\n\n    public Comment(int commentid, String name, String comment) {\n        super();\n        this.commentid = commentid;\n        this.name = name;\n        this.comment = comment;\n    }\n\n    public int getCommentid() {\n        return commentid;\n    }\n\n    public void setCommentid(int commentid) {\n        this.commentid = commentid;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getComment() {\n        return comment;\n    }\n\n    public void setComment(String comment) {\n        this.comment = comment;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Comment [commentid=&quot; + commentid + &quot;, name=&quot; + name + &quot;, comment=&quot; + comment + &quot;]&quot;;\n    }\n}\n</code></pre>\n<p>and this is my controller class</p>\n<pre><code>@Controller\npublic class CommentController {\n    \n    @Autowired\n    UsersService uservice;\n    \n    @PostMapping(&quot;/addComment&quot;)\n    public String addComment(@ModelAttribute Comment comment) {\n    \n        System.out.println(&quot;Received name: &quot; + comment.getName());\n        System.out.println(&quot;Received comment: &quot; + comment.getComment());\n        uservice.addComment(comment);\n        return &quot;Comments&quot;;\n    }\n}\n</code></pre>\n<p>when i am trying to typein some int type data like &quot;1 &quot; &quot;2&quot; in my html input fields it gets added into my data base fine but when ever i am trying to add some String type data it gives me a error like</p>\n<p>&quot;\nFailed to convert value of type 'java.lang.String' to required type 'com.learnSphere.entities.Comment'\n&quot;</p>\n<p>this is my repository</p>\n<pre><code>package com.learnSphere.repositories;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\n\nimport com.learnSphere.entities.Comment;\n\npublic interface CommentRepository extends JpaRepository&lt;Comment, String&gt; {\n\n}\n</code></pre>\n<p>and this is my Service code</p>\n<pre><code>@Override\n    public String addComment(Comment comment) {\n        crepo.save(comment);\n        return &quot;Saved successfully!!&quot;;\n</code></pre>\n<p>i tried checking the entities again and again and the html input fields , maybe i am sending the data wrong or maybe the order of my entity class is wrong but nothings wroking</p>\n<p>i have tried everything in my knowledge to solve this but i cant find anything . you guys are pros here please solve this one for me</p>\n"},{"tags":["java","spring-boot","docker","aws-sdk"],"answers":[{"tags":[],"owner":{"account_id":1221737,"reputation":188,"user_id":1188259,"display_name":"EMS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693934884,"creation_date":1693934884,"answer_id":77046594,"question_id":76772084,"body_markdown":"I can&#39;t explain what&#39;s going wrong, but I was having the same problem and it went away after I updated to version 1.16.0 of the AWS IoT Device SDK.\r\n\r\nI&#39;m not 100% sure it&#39;s solved. But before the update I could reliably get this issue to happen by leaving my container running overnight, and now it&#39;s been running for 6 days straight without any trouble. ","title":"AWS IoT Java SDK v2 in Docker 20 min disconnect - error core 1051","body":"<p>I can't explain what's going wrong, but I was having the same problem and it went away after I updated to version 1.16.0 of the AWS IoT Device SDK.</p>\n<p>I'm not 100% sure it's solved. But before the update I could reliably get this issue to happen by leaving my container running overnight, and now it's been running for 6 days straight without any trouble.</p>\n"}],"owner":{"account_id":7389383,"reputation":96,"user_id":5623304,"display_name":"Yaroslav Lukianenko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693934884,"creation_date":1690379901,"question_id":76772084,"body_markdown":"I am trying to run Java SDK version 2 code inside Docker. After about 20 minutes there is a disconnect with error code:\r\n\r\n&gt; 1051 &lt;[AWS_IO_SOCKET_CLOSED] socket is closed&gt;;\r\n\r\nbut no such error occurs when I run it pc locally or on an ec2 instance.\r\n\r\nMy sources and Dockerfile:\r\n\r\n    private final MqttClientConnectionEvents callbacks = new MqttClientConnectionEvents() {\r\n        public void onConnectionInterrupted(int code) {\r\n            log.warn(&quot;Interruptor &lt;{}&gt; : [{}] {}&quot;, code, CRT.awsErrorName(code), CRT.awsErrorString(code));\r\n        }\r\n\r\n        public void onConnectionResumed(boolean flag) {\r\n            log.warn(&quot;Resuming: {} [true if the session has been resumed.]&quot;, flag);\r\n            CompletableFuture.runAsync(() -&gt; subscribe());\r\n        }\r\n    };\r\n\r\n    @Value(&quot;${service.description}&quot;)\r\n    private String description;\r\n    @Value(value = &quot;${aws.iot.endpoint}&quot;)\r\n    private String endpoint;\r\n    @Value(value = &quot;${aws.iot.clientId}&quot;)\r\n    private String clientId;\r\n\r\n    @Value(value = &quot;${aws.iot.access}&quot;)\r\n    private String access;\r\n    @Value(value = &quot;${aws.iot.secret}&quot;)\r\n    private String secret;\r\n    \r\n    private CompletableFuture&lt;JSONObject&gt; async(MqttAbstract req) {\r\n        final MqttMessage message = new MqttMessage(req.getTopic(), req.bytes(), QualityOfService.AT_LEAST_ONCE);\r\n\r\n        executor.execute(() -&gt; {\r\n            log.info(&quot;Pub-ing to [{}]: {}&quot;, req.getTopic(), new String(message.getPayload()));\r\n            this.publish(message);\r\n        });\r\n\r\n        return registry.waitForMqtt(req.getBody().getPayload().getRequestId());\r\n    }\r\n\r\n    private void subscribe(InternalResponses topic) {\r\n        try {\r\n            this.connection.subscribe(topic.getTopic(), QualityOfService.AT_LEAST_ONCE, topic.getHandler()).get();\r\n        } catch (Exception exc) {\r\n            log.error(&quot;subscribe [{}]: {}&quot;, exc.getClass().getSimpleName(), exc.getMessage());\r\n        }\r\n    }\r\n\r\n    private void subscribe() {\r\n        log.info(&quot;Starting subscribing...&quot;);\r\n        try {\r\n            this.subscribe(new InternalResponses(gateways, this.registry));\r\n        } catch (Exception error) {\r\n            log.error(&quot;onApplicationEvent [{}]: {}&quot;, error.getClass().getSimpleName(), error.getMessage());\r\n        }\r\n    }\r\n\r\n    public void publish(MqttMessage message) {\r\n        try {\r\n            log.info(&quot;Publish to {}&quot;, message.getTopic());\r\n            executor.execute(() -&gt; connection.publish(message));\r\n        } catch (Throwable e) {\r\n            log.error(&quot;publish: {} - {}&quot;, e.getClass().getSimpleName(), e.getMessage());\r\n        }\r\n    }\r\n\r\n    @PostConstruct\r\n    public void construct() {\r\n        final CredentialsProvider provider = new StaticCredentialsProvider.StaticCredentialsProviderBuilder()\r\n                .withAccessKeyId(access.getBytes(StandardCharsets.UTF_8))\r\n                .withSecretAccessKey(secret.getBytes(StandardCharsets.UTF_8))\r\n                .build();\r\n\r\n        try (AwsIotMqttConnectionBuilder builder = AwsIotMqttConnectionBuilder\r\n                .newDefaultBuilder()\r\n                .withEndpoint(endpoint)\r\n                .withClientId(clientId)\r\n                .withConnectionEventCallbacks(callbacks)\r\n                .withProtocolOperationTimeoutMs(MINUTE)\r\n                .withCleanSession(true)\r\n                .withWebsockets(true)\r\n                .withWebsocketSigningRegion(&quot;eu-north-1&quot;)\r\n                .withWebsocketCredentialsProvider(provider)) {\r\n            this.connection = builder.build();\r\n            this.connection.connect()\r\n                           .whenCompleteAsync((connectResult, error) -&gt; this.subscribe());\r\n            log.info(&quot;{} to [{}] as {}&quot;, description, endpoint, clientId);\r\n        } catch (Exception e) {\r\n            log.error(&quot;postConstruct: {} - {}&quot;, e.getClass().getSimpleName(), e.getMessage());\r\n        }\r\n    }\r\n\r\n    @PreDestroy\r\n    public void destroy() {\r\n        log.info(&quot;Shutting down [{}]&quot;, description);\r\n    }\r\n\r\nIs there something wrong with the connection/timeouts config or with the Dockerfile?\r\n\r\n    FROM openjdk:11-jdk    \r\n    COPY build/libs/* /\r\n    COPY app.sh /app.sh\r\n    RUN [&quot;chmod&quot;, &quot;+x&quot;, &quot;/app.sh&quot;]\r\n    ENTRYPOINT [&quot;/app.sh&quot;]\r\n","title":"AWS IoT Java SDK v2 in Docker 20 min disconnect - error core 1051","body":"<p>I am trying to run Java SDK version 2 code inside Docker. After about 20 minutes there is a disconnect with error code:</p>\n<blockquote>\n<p>1051 &lt;[AWS_IO_SOCKET_CLOSED] socket is closed&gt;;</p>\n</blockquote>\n<p>but no such error occurs when I run it pc locally or on an ec2 instance.</p>\n<p>My sources and Dockerfile:</p>\n<pre><code>private final MqttClientConnectionEvents callbacks = new MqttClientConnectionEvents() {\n    public void onConnectionInterrupted(int code) {\n        log.warn(&quot;Interruptor &lt;{}&gt; : [{}] {}&quot;, code, CRT.awsErrorName(code), CRT.awsErrorString(code));\n    }\n\n    public void onConnectionResumed(boolean flag) {\n        log.warn(&quot;Resuming: {} [true if the session has been resumed.]&quot;, flag);\n        CompletableFuture.runAsync(() -&gt; subscribe());\n    }\n};\n\n@Value(&quot;${service.description}&quot;)\nprivate String description;\n@Value(value = &quot;${aws.iot.endpoint}&quot;)\nprivate String endpoint;\n@Value(value = &quot;${aws.iot.clientId}&quot;)\nprivate String clientId;\n\n@Value(value = &quot;${aws.iot.access}&quot;)\nprivate String access;\n@Value(value = &quot;${aws.iot.secret}&quot;)\nprivate String secret;\n\nprivate CompletableFuture&lt;JSONObject&gt; async(MqttAbstract req) {\n    final MqttMessage message = new MqttMessage(req.getTopic(), req.bytes(), QualityOfService.AT_LEAST_ONCE);\n\n    executor.execute(() -&gt; {\n        log.info(&quot;Pub-ing to [{}]: {}&quot;, req.getTopic(), new String(message.getPayload()));\n        this.publish(message);\n    });\n\n    return registry.waitForMqtt(req.getBody().getPayload().getRequestId());\n}\n\nprivate void subscribe(InternalResponses topic) {\n    try {\n        this.connection.subscribe(topic.getTopic(), QualityOfService.AT_LEAST_ONCE, topic.getHandler()).get();\n    } catch (Exception exc) {\n        log.error(&quot;subscribe [{}]: {}&quot;, exc.getClass().getSimpleName(), exc.getMessage());\n    }\n}\n\nprivate void subscribe() {\n    log.info(&quot;Starting subscribing...&quot;);\n    try {\n        this.subscribe(new InternalResponses(gateways, this.registry));\n    } catch (Exception error) {\n        log.error(&quot;onApplicationEvent [{}]: {}&quot;, error.getClass().getSimpleName(), error.getMessage());\n    }\n}\n\npublic void publish(MqttMessage message) {\n    try {\n        log.info(&quot;Publish to {}&quot;, message.getTopic());\n        executor.execute(() -&gt; connection.publish(message));\n    } catch (Throwable e) {\n        log.error(&quot;publish: {} - {}&quot;, e.getClass().getSimpleName(), e.getMessage());\n    }\n}\n\n@PostConstruct\npublic void construct() {\n    final CredentialsProvider provider = new StaticCredentialsProvider.StaticCredentialsProviderBuilder()\n            .withAccessKeyId(access.getBytes(StandardCharsets.UTF_8))\n            .withSecretAccessKey(secret.getBytes(StandardCharsets.UTF_8))\n            .build();\n\n    try (AwsIotMqttConnectionBuilder builder = AwsIotMqttConnectionBuilder\n            .newDefaultBuilder()\n            .withEndpoint(endpoint)\n            .withClientId(clientId)\n            .withConnectionEventCallbacks(callbacks)\n            .withProtocolOperationTimeoutMs(MINUTE)\n            .withCleanSession(true)\n            .withWebsockets(true)\n            .withWebsocketSigningRegion(&quot;eu-north-1&quot;)\n            .withWebsocketCredentialsProvider(provider)) {\n        this.connection = builder.build();\n        this.connection.connect()\n                       .whenCompleteAsync((connectResult, error) -&gt; this.subscribe());\n        log.info(&quot;{} to [{}] as {}&quot;, description, endpoint, clientId);\n    } catch (Exception e) {\n        log.error(&quot;postConstruct: {} - {}&quot;, e.getClass().getSimpleName(), e.getMessage());\n    }\n}\n\n@PreDestroy\npublic void destroy() {\n    log.info(&quot;Shutting down [{}]&quot;, description);\n}\n</code></pre>\n<p>Is there something wrong with the connection/timeouts config or with the Dockerfile?</p>\n<pre><code>FROM openjdk:11-jdk    \nCOPY build/libs/* /\nCOPY app.sh /app.sh\nRUN [&quot;chmod&quot;, &quot;+x&quot;, &quot;/app.sh&quot;]\nENTRYPOINT [&quot;/app.sh&quot;]\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9792,"page":200,"page_size":100}
