{"items":[{"tags":["java","android","emoticons"],"answers":[{"tags":[],"owner":{"account_id":2474748,"reputation":6549,"user_id":2155605,"accept_rate":85,"display_name":"Ogen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1390877662,"creation_date":1390875194,"answer_id":21395585,"question_id":21392969,"body_markdown":"Try this...\r\n\r\n    if (Integer.parseInt(&quot;1f600&quot;, 16) &lt;= (int)&#39;☺&#39; &amp;&amp; (int)&#39;☺&#39; &lt;= Integer.parseInt(&quot;1f64f&quot;, 16)) {\r\n        Print.d(&quot;Unicode&quot;, &quot;groovy!&quot;);\r\n    }\r\n\r\nThis might work because the hexidecimal value and the char value are both being converted to ints.","title":"Detecting if a character in a String is an emoticon (using Android)","body":"<p>Try this...</p>\n\n<pre><code>if (Integer.parseInt(\"1f600\", 16) &lt;= (int)'☺' &amp;&amp; (int)'☺' &lt;= Integer.parseInt(\"1f64f\", 16)) {\n    Print.d(\"Unicode\", \"groovy!\");\n}\n</code></pre>\n\n<p>This might work because the hexidecimal value and the char value are both being converted to ints.</p>\n"},{"tags":[],"owner":{"account_id":152573,"reputation":4027,"user_id":367204,"accept_rate":70,"display_name":"Bjorninn"},"down_vote_count":1,"up_vote_count":7,"is_accepted":true,"score":6,"last_activity_date":1390913627,"creation_date":1390910693,"answer_id":21405222,"question_id":21392969,"body_markdown":"I was in fact able to use the linked iOS code to create the following function. I didn&#39;t realize that a String that contains, for example, a single emoticon will have a length of 2. So you can check if a character is in fact a surrogate.\r\n\r\nI&#39;m not entirely sure how to handle `else if (substring.length &gt; 1)` from the iOS code but I think `Character.isHighSurrogate(myChar)` does the same job in that instance.\r\n\r\n    private boolean containsIllegalCharacters(String displayName)\r\n    {\r\n        final int nameLength = displayName.length();\r\n    \r\n        for (int i = 0; i &lt; nameLength; i++)\r\n        {\r\n            final char hs = displayName.charAt(i);\r\n    \r\n            if (0xd800 &lt;= hs &amp;&amp; hs &lt;= 0xdbff)\r\n            {\r\n                final char ls = displayName.charAt(i + 1);\r\n                final int uc = ((hs - 0xd800) * 0x400) + (ls - 0xdc00) + 0x10000;\r\n    \r\n                if (0x1d000 &lt;= uc &amp;&amp; uc &lt;= 0x1f77f)\r\n                {\r\n                    return true;\r\n                }\r\n            }\r\n            else if (Character.isHighSurrogate(hs))\r\n            {\r\n                final char ls = displayName.charAt(i + 1);\r\n    \r\n                if (ls == 0x20e3)\r\n                {\r\n                    return true;\r\n                }\r\n            }\r\n            else\r\n            {\r\n                // non surrogate\r\n                if (0x2100 &lt;= hs &amp;&amp; hs &lt;= 0x27ff)\r\n                {\r\n                    return true;\r\n                }\r\n                else if (0x2B05 &lt;= hs &amp;&amp; hs &lt;= 0x2b07)\r\n                {\r\n                    return true;\r\n                }\r\n                else if (0x2934 &lt;= hs &amp;&amp; hs &lt;= 0x2935)\r\n                {\r\n                    return true;\r\n                }\r\n                else if (0x3297 &lt;= hs &amp;&amp; hs &lt;= 0x3299)\r\n                {\r\n                    return true;\r\n                }\r\n                else if (hs == 0xa9 || hs == 0xae || hs == 0x303d || hs == 0x3030 || hs == 0x2b55 || hs == 0x2b1c || hs == 0x2b1b || hs == 0x2b50)\r\n                {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n    \r\n        return false;\r\n    }","title":"Detecting if a character in a String is an emoticon (using Android)","body":"<p>I was in fact able to use the linked iOS code to create the following function. I didn't realize that a String that contains, for example, a single emoticon will have a length of 2. So you can check if a character is in fact a surrogate.</p>\n\n<p>I'm not entirely sure how to handle <code>else if (substring.length &gt; 1)</code> from the iOS code but I think <code>Character.isHighSurrogate(myChar)</code> does the same job in that instance.</p>\n\n<pre><code>private boolean containsIllegalCharacters(String displayName)\n{\n    final int nameLength = displayName.length();\n\n    for (int i = 0; i &lt; nameLength; i++)\n    {\n        final char hs = displayName.charAt(i);\n\n        if (0xd800 &lt;= hs &amp;&amp; hs &lt;= 0xdbff)\n        {\n            final char ls = displayName.charAt(i + 1);\n            final int uc = ((hs - 0xd800) * 0x400) + (ls - 0xdc00) + 0x10000;\n\n            if (0x1d000 &lt;= uc &amp;&amp; uc &lt;= 0x1f77f)\n            {\n                return true;\n            }\n        }\n        else if (Character.isHighSurrogate(hs))\n        {\n            final char ls = displayName.charAt(i + 1);\n\n            if (ls == 0x20e3)\n            {\n                return true;\n            }\n        }\n        else\n        {\n            // non surrogate\n            if (0x2100 &lt;= hs &amp;&amp; hs &lt;= 0x27ff)\n            {\n                return true;\n            }\n            else if (0x2B05 &lt;= hs &amp;&amp; hs &lt;= 0x2b07)\n            {\n                return true;\n            }\n            else if (0x2934 &lt;= hs &amp;&amp; hs &lt;= 0x2935)\n            {\n                return true;\n            }\n            else if (0x3297 &lt;= hs &amp;&amp; hs &lt;= 0x3299)\n            {\n                return true;\n            }\n            else if (hs == 0xa9 || hs == 0xae || hs == 0x303d || hs == 0x3030 || hs == 0x2b55 || hs == 0x2b1c || hs == 0x2b1b || hs == 0x2b50)\n            {\n                return true;\n            }\n        }\n    }\n\n    return false;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":122115,"reputation":5060,"user_id":315702,"accept_rate":88,"display_name":"Mark McClelland"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1637359267,"creation_date":1523850960,"answer_id":49849418,"question_id":21392969,"body_markdown":"*Four years later...*\r\n\r\nAt this time, it might make more sense to take advantage of `EmojiCompat`. This code presumes you initialized `EmojiCompat` when your app was starting up. The basic idea here is to have `EmojiCompat` process your `CharSequence`, inserting instances of `EmojiSpan` wherever any emoji appear, and then examine the results.\r\n\r\n    public static boolean containsEmoji(CharSequence charSequence) {\r\n        boolean result = false;\r\n        CharSequence processed = EmojiCompat.get().process(charSequence, 0, charSequence.length() -1, Integer.MAX_VALUE, EmojiCompat.REPLACE_STRATEGY_ALL);\r\n        if (processed instanceof Spannable) {\r\n            Spannable spannable = (Spannable) processed;\r\n            result = spannable.getSpans(0, spannable.length() - 1, EmojiSpan.class).length &gt; 0;\r\n        }\r\n        return  result;\r\n    }\r\n\r\nIf you want to collect a list of the unique emoji that appear within a given `CharSequence`, you could do something like this, iterating over the results of `getSpans()` and finding the start and end of each span to capture the emoji discovered by `EmojiCompat`:\r\n\r\n    @NonNull\r\n    public static List&lt;String&gt; getUniqueEmoji(CharSequence charSequence) {\r\n        Set&lt;String&gt; emojiList = new HashSet&lt;&gt;();\r\n        CharSequence processed = EmojiCompat.get().process(charSequence, 0, charSequence.length() -1, Integer.MAX_VALUE, EmojiCompat.REPLACE_STRATEGY_ALL);\r\n        if (processed instanceof Spannable) {\r\n            Spannable spannable = (Spannable) processed;\r\n\r\n            EmojiSpan[] emojiSpans = spannable.getSpans(0, spannable.length() - 1, EmojiSpan.class);\r\n            for (EmojiSpan emojiSpan : emojiSpans) {\r\n                int spanStart = spannable.getSpanStart(emojiSpan);\r\n                int spanEnd = spannable.getSpanEnd(emojiSpan);\r\n                CharSequence emojiCharSequence = spannable.subSequence(spanStart, spanEnd);\r\n                emojiList.add(String.valueOf(emojiCharSequence));\r\n            }\r\n        }\r\n        return emojiList.size() &gt; 0 ? new ArrayList&lt;&gt;(emojiList) : new ArrayList&lt;String&gt;();\r\n    }\r\n\r\nUPDATE: Here&#39;s an example of EmojiCompat initialization. This static method can be called from your Application onCreate() method, passing in the Application itself as the Context param.\r\n\r\n    @JvmStatic\r\n    fun initEmojiCompat(context: Context) {\r\n        if (emojiCompatConfig != null) {\r\n            // alternatively, EmojiCompat.reset() could be called here\r\n            logger().w(LOGTAG, &quot;EmojiCompat already initialized.&quot;)\r\n            return\r\n        }\r\n\r\n        // &quot;Noto Color Emoji Compat&quot; doesn&#39;t have graphics for the following emojis:\r\n        // U+1F5E3 &quot;speaking head&quot; (required)\r\n        // U+1F441 &quot;eye&quot; (required)\r\n        // U+1F575 &quot;detective&quot; (nice to have)\r\n        val fontRequest = FontRequest(\r\n            &quot;com.google.android.gms.fonts&quot;,\r\n            &quot;com.google.android.gms&quot;,\r\n            &quot;Noto Color Emoji Compat&quot;,\r\n            R.array.com_google_android_gms_fonts_certs\r\n        )\r\n\r\n        emojiCompatConfig = FontRequestEmojiCompatConfig(context, fontRequest)\r\n            .setReplaceAll(false)\r\n            .setEmojiSpanIndicatorEnabled(false)\r\n            .registerInitCallback(initCallback)\r\n            .also {\r\n                EmojiCompat.init(it)\r\n            }\r\n    }","title":"Detecting if a character in a String is an emoticon (using Android)","body":"<p><em>Four years later...</em></p>\n<p>At this time, it might make more sense to take advantage of <code>EmojiCompat</code>. This code presumes you initialized <code>EmojiCompat</code> when your app was starting up. The basic idea here is to have <code>EmojiCompat</code> process your <code>CharSequence</code>, inserting instances of <code>EmojiSpan</code> wherever any emoji appear, and then examine the results.</p>\n<pre><code>public static boolean containsEmoji(CharSequence charSequence) {\n    boolean result = false;\n    CharSequence processed = EmojiCompat.get().process(charSequence, 0, charSequence.length() -1, Integer.MAX_VALUE, EmojiCompat.REPLACE_STRATEGY_ALL);\n    if (processed instanceof Spannable) {\n        Spannable spannable = (Spannable) processed;\n        result = spannable.getSpans(0, spannable.length() - 1, EmojiSpan.class).length &gt; 0;\n    }\n    return  result;\n}\n</code></pre>\n<p>If you want to collect a list of the unique emoji that appear within a given <code>CharSequence</code>, you could do something like this, iterating over the results of <code>getSpans()</code> and finding the start and end of each span to capture the emoji discovered by <code>EmojiCompat</code>:</p>\n<pre><code>@NonNull\npublic static List&lt;String&gt; getUniqueEmoji(CharSequence charSequence) {\n    Set&lt;String&gt; emojiList = new HashSet&lt;&gt;();\n    CharSequence processed = EmojiCompat.get().process(charSequence, 0, charSequence.length() -1, Integer.MAX_VALUE, EmojiCompat.REPLACE_STRATEGY_ALL);\n    if (processed instanceof Spannable) {\n        Spannable spannable = (Spannable) processed;\n\n        EmojiSpan[] emojiSpans = spannable.getSpans(0, spannable.length() - 1, EmojiSpan.class);\n        for (EmojiSpan emojiSpan : emojiSpans) {\n            int spanStart = spannable.getSpanStart(emojiSpan);\n            int spanEnd = spannable.getSpanEnd(emojiSpan);\n            CharSequence emojiCharSequence = spannable.subSequence(spanStart, spanEnd);\n            emojiList.add(String.valueOf(emojiCharSequence));\n        }\n    }\n    return emojiList.size() &gt; 0 ? new ArrayList&lt;&gt;(emojiList) : new ArrayList&lt;String&gt;();\n}\n</code></pre>\n<p>UPDATE: Here's an example of EmojiCompat initialization. This static method can be called from your Application onCreate() method, passing in the Application itself as the Context param.</p>\n<pre><code>@JvmStatic\nfun initEmojiCompat(context: Context) {\n    if (emojiCompatConfig != null) {\n        // alternatively, EmojiCompat.reset() could be called here\n        logger().w(LOGTAG, &quot;EmojiCompat already initialized.&quot;)\n        return\n    }\n\n    // &quot;Noto Color Emoji Compat&quot; doesn't have graphics for the following emojis:\n    // U+1F5E3 &quot;speaking head&quot; (required)\n    // U+1F441 &quot;eye&quot; (required)\n    // U+1F575 &quot;detective&quot; (nice to have)\n    val fontRequest = FontRequest(\n        &quot;com.google.android.gms.fonts&quot;,\n        &quot;com.google.android.gms&quot;,\n        &quot;Noto Color Emoji Compat&quot;,\n        R.array.com_google_android_gms_fonts_certs\n    )\n\n    emojiCompatConfig = FontRequestEmojiCompatConfig(context, fontRequest)\n        .setReplaceAll(false)\n        .setEmojiSpanIndicatorEnabled(false)\n        .registerInitCallback(initCallback)\n        .also {\n            EmojiCompat.init(it)\n        }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16914364,"reputation":1806,"user_id":12232720,"display_name":"mathematics-and-caffeine"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1654865968,"creation_date":1654865968,"answer_id":72574688,"question_id":21392969,"body_markdown":"This is how Telegram does it:\r\n\r\n```\r\nprivate static boolean isEmoji(String message){\r\n\treturn message.matches(&quot;(?:[\\uD83C\\uDF00-\\uD83D\\uDDFF]|[\\uD83E\\uDD00-\\uD83E\\uDDFF]|&quot; +\r\n\t\t&quot;[\\uD83D\\uDE00-\\uD83D\\uDE4F]|[\\uD83D\\uDE80-\\uD83D\\uDEFF]|&quot; +\r\n\t\t&quot;[\\u2600-\\u26FF]\\uFE0F?|[\\u2700-\\u27BF]\\uFE0F?|\\u24C2\\uFE0F?|&quot; +\r\n\t\t&quot;[\\uD83C\\uDDE6-\\uD83C\\uDDFF]{1,2}|&quot; +\r\n\t\t&quot;[\\uD83C\\uDD70\\uD83C\\uDD71\\uD83C\\uDD7E\\uD83C\\uDD7F\\uD83C\\uDD8E\\uD83C\\uDD91-\\uD83C\\uDD9A]\\uFE0F?|&quot; +\r\n\t\t&quot;[\\u0023\\u002A\\u0030-\\u0039]\\uFE0F?\\u20E3|[\\u2194-\\u2199\\u21A9-\\u21AA]\\uFE0F?|[\\u2B05-\\u2B07\\u2B1B\\u2B1C\\u2B50\\u2B55]\\uFE0F?|&quot; +\r\n\t\t&quot;[\\u2934\\u2935]\\uFE0F?|[\\u3030\\u303D]\\uFE0F?|[\\u3297\\u3299]\\uFE0F?|&quot; +\r\n\t\t&quot;[\\uD83C\\uDE01\\uD83C\\uDE02\\uD83C\\uDE1A\\uD83C\\uDE2F\\uD83C\\uDE32-\\uD83C\\uDE3A\\uD83C\\uDE50\\uD83C\\uDE51]\\uFE0F?|&quot; +\r\n\t\t&quot;[\\u203C\\u2049]\\uFE0F?|[\\u25AA\\u25AB\\u25B6\\u25C0\\u25FB-\\u25FE]\\uFE0F?|&quot; +\r\n\t\t&quot;[\\u00A9\\u00AE]\\uFE0F?|[\\u2122\\u2139]\\uFE0F?|\\uD83C\\uDC04\\uFE0F?|\\uD83C\\uDCCF\\uFE0F?|&quot; +\r\n\t\t&quot;[\\u231A\\u231B\\u2328\\u23CF\\u23E9-\\u23F3\\u23F8-\\u23FA]\\uFE0F?)+&quot;);\r\n}\r\n\r\n```\r\n\r\nIt is [Line 21,026][1].\r\n\r\n\r\n  [1]: https://raw.githubusercontent.com/DrKLO/Telegram/master/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java","title":"Detecting if a character in a String is an emoticon (using Android)","body":"<p>This is how Telegram does it:</p>\n<pre><code>private static boolean isEmoji(String message){\n    return message.matches(&quot;(?:[\\uD83C\\uDF00-\\uD83D\\uDDFF]|[\\uD83E\\uDD00-\\uD83E\\uDDFF]|&quot; +\n        &quot;[\\uD83D\\uDE00-\\uD83D\\uDE4F]|[\\uD83D\\uDE80-\\uD83D\\uDEFF]|&quot; +\n        &quot;[\\u2600-\\u26FF]\\uFE0F?|[\\u2700-\\u27BF]\\uFE0F?|\\u24C2\\uFE0F?|&quot; +\n        &quot;[\\uD83C\\uDDE6-\\uD83C\\uDDFF]{1,2}|&quot; +\n        &quot;[\\uD83C\\uDD70\\uD83C\\uDD71\\uD83C\\uDD7E\\uD83C\\uDD7F\\uD83C\\uDD8E\\uD83C\\uDD91-\\uD83C\\uDD9A]\\uFE0F?|&quot; +\n        &quot;[\\u0023\\u002A\\u0030-\\u0039]\\uFE0F?\\u20E3|[\\u2194-\\u2199\\u21A9-\\u21AA]\\uFE0F?|[\\u2B05-\\u2B07\\u2B1B\\u2B1C\\u2B50\\u2B55]\\uFE0F?|&quot; +\n        &quot;[\\u2934\\u2935]\\uFE0F?|[\\u3030\\u303D]\\uFE0F?|[\\u3297\\u3299]\\uFE0F?|&quot; +\n        &quot;[\\uD83C\\uDE01\\uD83C\\uDE02\\uD83C\\uDE1A\\uD83C\\uDE2F\\uD83C\\uDE32-\\uD83C\\uDE3A\\uD83C\\uDE50\\uD83C\\uDE51]\\uFE0F?|&quot; +\n        &quot;[\\u203C\\u2049]\\uFE0F?|[\\u25AA\\u25AB\\u25B6\\u25C0\\u25FB-\\u25FE]\\uFE0F?|&quot; +\n        &quot;[\\u00A9\\u00AE]\\uFE0F?|[\\u2122\\u2139]\\uFE0F?|\\uD83C\\uDC04\\uFE0F?|\\uD83C\\uDCCF\\uFE0F?|&quot; +\n        &quot;[\\u231A\\u231B\\u2328\\u23CF\\u23E9-\\u23F3\\u23F8-\\u23FA]\\uFE0F?)+&quot;);\n}\n\n</code></pre>\n<p>It is <a href=\"https://raw.githubusercontent.com/DrKLO/Telegram/master/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java\" rel=\"noreferrer\">Line 21,026</a>.</p>\n"},{"tags":[],"owner":{"account_id":3875392,"reputation":488,"user_id":3209572,"display_name":"John R. Hilles"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671030832,"creation_date":1671030446,"answer_id":74800286,"question_id":21392969,"body_markdown":"\r\n\r\nHere&#39;s some Kotlin that relies on java.lang.Character api (granted the original poster can&#39;t use this). I have found it pretty reliably tells apart an emoji from &#39;special characters&#39; and non-latin alphabets etc. Try it.\r\n\r\n    import java.lang.Character.*\r\n    import java.lang.Character.UnicodeBlock.MISCELLANEOUS_TECHNICAL\r\n    import java.lang.Character.UnicodeBlock.MISCELLANEOUS_SYMBOLS\r\n    import java.lang.Character.UnicodeBlock.VARIATION_SELECTORS\r\n    \r\n    fun isStringEmoji(someString: String): Boolean {\r\n        if (someString.isNotEmpty() &amp;&amp; someString.length &lt; 5) {\r\n            val firstCodePoint = codePointAt(someString, 0)\r\n            val lastCodePoint = codePointBefore(someString, someString.length)\r\n            if (isValidCodePoint(firstCodePoint) &amp;&amp; isValidCodePoint(lastCodePoint)) {\r\n                if (isSupplementaryCodePoint(firstCodePoint) ||\r\n                    isSupplementaryCodePoint(lastCodePoint) ||\r\n                    UnicodeBlock.of(firstCodePoint) == MISCELLANEOUS_SYMBOLS ||\r\n                    UnicodeBlock.of(firstCodePoint) == MISCELLANEOUS_TECHNICAL ||\r\n                    UnicodeBlock.of(lastCodePoint) == VARIATION_SELECTORS\r\n                ) {\r\n                    return true\r\n                }\r\n            }\r\n        }\r\n        return false\r\n    }","title":"Detecting if a character in a String is an emoticon (using Android)","body":"<p>Here's some Kotlin that relies on java.lang.Character api (granted the original poster can't use this). I have found it pretty reliably tells apart an emoji from 'special characters' and non-latin alphabets etc. Try it.</p>\n<pre><code>import java.lang.Character.*\nimport java.lang.Character.UnicodeBlock.MISCELLANEOUS_TECHNICAL\nimport java.lang.Character.UnicodeBlock.MISCELLANEOUS_SYMBOLS\nimport java.lang.Character.UnicodeBlock.VARIATION_SELECTORS\n\nfun isStringEmoji(someString: String): Boolean {\n    if (someString.isNotEmpty() &amp;&amp; someString.length &lt; 5) {\n        val firstCodePoint = codePointAt(someString, 0)\n        val lastCodePoint = codePointBefore(someString, someString.length)\n        if (isValidCodePoint(firstCodePoint) &amp;&amp; isValidCodePoint(lastCodePoint)) {\n            if (isSupplementaryCodePoint(firstCodePoint) ||\n                isSupplementaryCodePoint(lastCodePoint) ||\n                UnicodeBlock.of(firstCodePoint) == MISCELLANEOUS_SYMBOLS ||\n                UnicodeBlock.of(firstCodePoint) == MISCELLANEOUS_TECHNICAL ||\n                UnicodeBlock.of(lastCodePoint) == VARIATION_SELECTORS\n            ) {\n                return true\n            }\n        }\n    }\n    return false\n}\n</code></pre>\n"}],"owner":{"account_id":152573,"reputation":4027,"user_id":367204,"accept_rate":70,"display_name":"Bjorninn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9364,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":21405222,"answer_count":5,"score":7,"last_activity_date":1671030832,"creation_date":1390861450,"question_id":21392969,"body_markdown":"Like the title says. I want to find out if a given java String contains an emoticon.\r\n\r\nI can&#39;t use `Character.UnicodeBlock.of(char) == Character.UnicodeBlock.EMOTICONS` since that requires API level 19.\r\n\r\n[I found this code for iOS][1] but it isn&#39;t really applicable since it looks like java and objective-c handle surrogate pairs in different manners.\r\n\r\nThe documentations I&#39;ve looked through tell me that:\r\n\r\n    A char value, therefore, represents Basic Multilingual Plane (BMP) code points, including the surrogate code points, or code units of the UTF-16 encoding\r\n\r\nI&#39;m not quite sure what that means. Does that simply mean that they also include the BMP point as their first number?\r\n\r\n[According to Wikipedia][2] the emoticon set lies between 0x1f600 and 0x1f64f but I don&#39;t know how to check if the char is in that range.\r\n\r\nI had hoped that something like this would work but it didn&#39;t\r\n\r\n    if (0x1f600 &lt;= a &amp;&amp; a &lt;= 0x1f64f)\r\n    {\r\n        Print.d(&quot;Unicode&quot;, &quot;groovy!&quot;);\r\n    }\r\n\r\nSo how do I go about this?\r\n\r\n\r\n  [1]: https://gist.github.com/cihancimen/4146056\r\n  [2]: http://en.wikipedia.org/wiki/Plane_%28Unicode%29#Supplementary_Multilingual_Plane","title":"Detecting if a character in a String is an emoticon (using Android)","body":"<p>Like the title says. I want to find out if a given java String contains an emoticon.</p>\n\n<p>I can't use <code>Character.UnicodeBlock.of(char) == Character.UnicodeBlock.EMOTICONS</code> since that requires API level 19.</p>\n\n<p><a href=\"https://gist.github.com/cihancimen/4146056\" rel=\"noreferrer\">I found this code for iOS</a> but it isn't really applicable since it looks like java and objective-c handle surrogate pairs in different manners.</p>\n\n<p>The documentations I've looked through tell me that:</p>\n\n<pre><code>A char value, therefore, represents Basic Multilingual Plane (BMP) code points, including the surrogate code points, or code units of the UTF-16 encoding\n</code></pre>\n\n<p>I'm not quite sure what that means. Does that simply mean that they also include the BMP point as their first number?</p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Plane_%28Unicode%29#Supplementary_Multilingual_Plane\" rel=\"noreferrer\">According to Wikipedia</a> the emoticon set lies between 0x1f600 and 0x1f64f but I don't know how to check if the char is in that range.</p>\n\n<p>I had hoped that something like this would work but it didn't</p>\n\n<pre><code>if (0x1f600 &lt;= a &amp;&amp; a &lt;= 0x1f64f)\n{\n    Print.d(\"Unicode\", \"groovy!\");\n}\n</code></pre>\n\n<p>So how do I go about this?</p>\n"},{"tags":["java","wiremock","wiremock-standalone","wiremock-record"],"comments":[{"owner":{"account_id":152954,"reputation":16366,"user_id":367865,"accept_rate":45,"display_name":"Ouroborus"},"score":0,"creation_date":1670856516,"post_id":74771776,"comment_id":131963716,"body_markdown":"Don&#39;t know if this is the issue but, in your direct request, you use `http:` while, with your proxy, you set it up to use `https:`.","body":"Don&#39;t know if this is the issue but, in your direct request, you use <code>http:</code> while, with your proxy, you set it up to use <code>https:</code>."},{"owner":{"account_id":1783732,"reputation":11618,"user_id":1625740,"accept_rate":59,"display_name":"Haim Raman"},"score":0,"creation_date":1670856544,"post_id":74771776,"comment_id":131963730,"body_markdown":"That&#39;s should not be an issue.","body":"That&#39;s should not be an issue."},{"owner":{"account_id":152954,"reputation":16366,"user_id":367865,"accept_rate":45,"display_name":"Ouroborus"},"score":0,"creation_date":1670856763,"post_id":74771776,"comment_id":131963826,"body_markdown":"Still, it seems that the API is internally redirecting to a home page when you use the proxy. Have you verified that it&#39;s not the issue?","body":"Still, it seems that the API is internally redirecting to a home page when you use the proxy. Have you verified that it&#39;s not the issue?"},{"owner":{"account_id":1783732,"reputation":11618,"user_id":1625740,"accept_rate":59,"display_name":"Haim Raman"},"score":0,"creation_date":1670857052,"post_id":74771776,"comment_id":131963910,"body_markdown":"What do you mean API is internally redirecting to a home page?","body":"What do you mean API is internally redirecting to a home page?"},{"owner":{"account_id":152954,"reputation":16366,"user_id":367865,"accept_rate":45,"display_name":"Ouroborus"},"score":0,"creation_date":1670857164,"post_id":74771776,"comment_id":131963947,"body_markdown":"You&#39;re getting HTML rather than JSON. But there is no HTTP redirect. So it looks like the server doesn&#39;t understand your request and is choosing to serve up a page instead. Since the direct request and the proxied request that you show are different, those differences may be why that is happening.","body":"You&#39;re getting HTML rather than JSON. But there is no HTTP redirect. So it looks like the server doesn&#39;t understand your request and is choosing to serve up a page instead. Since the direct request and the proxied request that you show are different, those differences may be why that is happening."},{"owner":{"account_id":1783732,"reputation":11618,"user_id":1625740,"accept_rate":59,"display_name":"Haim Raman"},"score":0,"creation_date":1670858733,"post_id":74771776,"comment_id":131964587,"body_markdown":"@Ouroborus thank you, your answer was helping me to figure it out. I needed to point to https://api.thridparty.service.com and   https://thrdpary.service.com  is the portal so it services htmls. BTW you can use HTTP to proxy a remote https. please post an answer so I can give you credit for your help","body":"@Ouroborus thank you, your answer was helping me to figure it out. I needed to point to <a href=\"https://api.thridparty.service.com\" rel=\"nofollow noreferrer\">api.thridparty.service.com</a> and   <a href=\"https://thrdpary.service.com\" rel=\"nofollow noreferrer\">thrdpary.service.com</a>  is the portal so it services htmls. BTW you can use HTTP to proxy a remote https. please post an answer so I can give you credit for your help"}],"answers":[{"tags":[],"owner":{"account_id":1783732,"reputation":11618,"user_id":1625740,"accept_rate":59,"display_name":"Haim Raman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671030525,"creation_date":1671030525,"answer_id":74800301,"question_id":74771776,"body_markdown":"My problem was misconfiguration (thank you @Ourbotus for giving me the solution).\r\n\r\nThe messages   \r\n```\r\n&quot;We&#39;re sorry but isp-portal doesn&#39;t work properly without JavaScript enabled. Please enable it to continue.&quot;\r\n```\r\nThis is due to the fact I was proxying the portal which is a human-readable front-end and not the API.\r\n\r\nI needed to point to **api.thridparty.service.com** and not to **thrdipary.service.com**. \r\n\r\nThe correct command in my case to run Wiremock as standalone with proxy should be \r\n\r\n```\r\njava -jar ~/tools/wiremock/wiremock-jre8-standalone-2.35.0.jar --print-all-network-traffic \\\r\n --verbose \\\r\n --proxy-all https://api.thrdpary.service.com\r\n```\r\n\r\nBTW on your local machine, you can use HTTP to proxy a remote HTTPS and it works. \r\n\r\n","title":"Wiremock record apis return with &quot;We&#39;re sorry but isp-portal doesn&#39;t work properly without JavaScript enabled. Please enable it to continue&quot;","body":"<p>My problem was misconfiguration (thank you @Ourbotus for giving me the solution).</p>\n<p>The messages</p>\n<pre><code>&quot;We're sorry but isp-portal doesn't work properly without JavaScript enabled. Please enable it to continue.&quot;\n</code></pre>\n<p>This is due to the fact I was proxying the portal which is a human-readable front-end and not the API.</p>\n<p>I needed to point to <strong>api.thridparty.service.com</strong> and not to <strong>thrdipary.service.com</strong>.</p>\n<p>The correct command in my case to run Wiremock as standalone with proxy should be</p>\n<pre><code>java -jar ~/tools/wiremock/wiremock-jre8-standalone-2.35.0.jar --print-all-network-traffic \\\n --verbose \\\n --proxy-all https://api.thrdpary.service.com\n</code></pre>\n<p>BTW on your local machine, you can use HTTP to proxy a remote HTTPS and it works.</p>\n"}],"owner":{"account_id":1783732,"reputation":11618,"user_id":1625740,"accept_rate":59,"display_name":"Haim Raman"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":107,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1671030525,"creation_date":1670851326,"question_id":74771776,"body_markdown":"I try to evaluate WireMock to mock a third-party service.\r\n\r\nWhen trying to record some calls to the third-party service.\r\n\r\n1. I am issuing a call to the actual service e.g.\r\n```\r\ncurl -X GET &quot;http://thrdpary.service.com/api/v2/requests/6396ff4eae78da7b0457f283&quot; \\\r\n -H &quot;authorization: Bearer mytoken&quot; \\\r\n -H &quot;accept: application/json&quot;\r\n```\r\nI get an expected JSON response \r\n\r\n2. Then spanning wiremock and running the call via the proxy\r\n\r\n```\r\njava -jar ~/tools/wiremock/wiremock-jre8-standalone-2.35.0.jar --print-all-network-traffic \\\r\n --verbose \\\r\n --proxy-all https://thrdpary.service.com\r\n```\r\n3. Issuing a call via Wiremock proxy\r\n```\r\ncurl -X GET &quot;http://127.0.0.1:8080/api/v2/requests/6396ff4eae78da7b0457f283&quot; \\\r\n -H &quot;authorization: Bearer mytoken&quot; \\\r\n -H &quot;accept: application/json&quot;\r\n -H &quot;Content-Type: application/json&quot;\r\n```\r\n\r\nBut now I get an HTML response saying &quot;We&#39;re sorry but isp-portal doesn&#39;t work properly without JavaScript enabled. Please enable it to continue.&quot;\r\n```\r\n&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1&quot;&gt;&lt;link rel=&quot;icon&quot; href=&quot;/favicon.png&quot;&gt;&lt;title&gt;Vade Providers Dashboard&lt;/title&gt;&lt;link href=&quot;/css/chunk-035323b2.7b55ea24.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-0c985e44.c6590440.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-0f545a99.1c048926.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-27ade5d8.d39a8b0b.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-3aa2de5d.7652751d.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-53f183f4.cdd3a2dc.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-544e0368.a5ab1dfb.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-5a6fde36.e3b2c13a.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-7de726f3.7d4de787.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-7f3c0b78.dc211df5.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-83ce1a9e.f2716e48.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-8d9970a8.e5638da4.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-a7c610f8.a3ca4e48.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-f567c068.c322c04b.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-f95edb7a.39df20bf.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-035323b2.fe892de2.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-0bb2fd9a.63880c1c.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-0c985e44.226b2fc7.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-0f545a99.48adf734.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-2570f1d2.66a8fb23.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-27ade5d8.217cffc0.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-2d0be333.daaed458.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-2d0e97b4.36457cfb.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-3aa2de5d.bcd8d130.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-53f183f4.532707bc.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-544e0368.c447366e.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-5a6fde36.47c41335.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-7194670a.a360ec9e.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-7de726f3.82cb480e.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-7f3c0b78.06d21415.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-7facee04.52a8a153.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-83ce1a9e.da9aae42.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-8d9970a8.f29483ea.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-a7c610f8.51d3b72e.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-f567c068.3e0dacca.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-f95edb7a.ba5a8579.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/app.8ee4d6fd.css&quot; rel=&quot;preload&quot; as=&quot;style&quot;&gt;&lt;link href=&quot;/css/chunk-vendors.0c859e98.css&quot; rel=&quot;preload&quot; as=&quot;style&quot;&gt;&lt;link href=&quot;/js/app.6fdc482c.js&quot; rel=&quot;preload&quot; as=&quot;script&quot;&gt;&lt;link href=&quot;/js/chunk-vendors.092ff052.js&quot; rel=&quot;preload&quot; as=&quot;script&quot;&gt;&lt;link href=&quot;/css/chunk-vendors.0c859e98.css&quot; rel=&quot;stylesheet&quot;&gt;&lt;link href=&quot;/css/app.8ee4d6fd.css&quot; rel=&quot;stylesheet&quot;&gt;&lt;/head&gt;&lt;body&gt;&lt;noscript&gt;&lt;strong&gt;We&#39;re sorry but isp-portal doesn&#39;t work properly without JavaScript enabled. Please enable it to continue.&lt;/strong&gt;&lt;/noscript&gt;&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;&lt;script src=&quot;https://kit.fontawesome.com/d788c84bab.js&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/config.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/js/chunk-vendors.092ff052.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/js/app.6fdc482c.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;\r\n```\r\n\r\nThe wiremock log\r\n```\r\nResponse:\r\nHTTP/1.1 200\r\nserver: [nginx]\r\ndate: [Mon, 12 Dec 2022 13:18:40 GMT]\r\ncontent-type: [text/html]\r\ncontent-length: [3191]\r\nlast-modified: [Fri, 21 Oct 2022 13:40:12 GMT]\r\nvary: [Accept-Encoding]\r\netag: [&quot;6352a13c-c77&quot;]\r\nexpires: [Mon, 12 Dec 2022 13:18:39 GMT]\r\ncache-control: [no-cache]\r\naccept-ranges: [bytes]\r\n\r\n2022-12-12 13:18:40.341 Outgoing bytes: HTTP/1.1 200 OK\r\nServer: nginx\r\nDate: Mon, 12 Dec 2022 13:18:40 GMT\r\nContent-Type: text/html\r\nLast-Modified: Fri, 21 Oct 2022 13:40:12 GMT\r\nVary: Accept-Encoding\r\nETag: &quot;6352a13c-c77&quot;\r\nExpires: Mon, 12 Dec 2022 13:18:39 GMT\r\nCache-Control: no-cache\r\nAccept-Ranges: bytes\r\nVary: User-Agent\r\nContent-Length: 3191\r\n\r\n\r\n2022-12-12 13:18:40.341 Outgoing bytes: &lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1&quot;&gt;&lt;link rel=&quot;icon&quot; href=&quot;/favicon.png&quot;&gt;&lt;title&gt;Vade Providers Dashboard&lt;/title&gt;&lt;link href=&quot;/css/chunk-035323b2.7b55ea24.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-0c985e44.c6590440.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-0f545a99.1c048926.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-27ade5d8.d39a8b0b.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-3aa2de5d.7652751d.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-53f183f4.cdd3a2dc.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-544e0368.a5ab1dfb.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-5a6fde36.e3b2c13a.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-7de726f3.7d4de787.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-7f3c0b78.dc211df5.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-83ce1a9e.f2716e48.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-8d9970a8.e5638da4.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-a7c610f8.a3ca4e48.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-f567c068.c322c04b.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-f95edb7a.39df20bf.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-035323b2.fe892de2.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-0bb2fd9a.63880c1c.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-0c985e44.226b2fc7.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-0f545a99.48adf734.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-2570f1d2.66a8fb23.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-27ade5d8.217cffc0.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-2d0be333.daaed458.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-2d0e97b4.36457cfb.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-3aa2de5d.bcd8d130.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-53f183f4.532707bc.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-544e0368.c447366e.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-5a6fde36.47c41335.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-7194670a.a360ec9e.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-7de726f3.82cb480e.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-7f3c0b78.06d21415.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-7facee04.52a8a153.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-83ce1a9e.da9aae42.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-8d9970a8.f29483ea.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-a7c610f8.51d3b72e.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-f567c068.3e0dacca.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-f95edb7a.ba5a8579.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/app.8ee4d6fd.css&quot; rel=&quot;preload&quot; as=&quot;style&quot;&gt;&lt;link href=&quot;/css/chunk-vendors.0c859e98.css&quot; rel=&quot;preload&quot; as=&quot;style&quot;&gt;&lt;link href=&quot;/js/app.6fdc482c.js&quot; rel=&quot;preload&quot; as=&quot;script&quot;&gt;&lt;link href=&quot;/js/chunk-vendors.092ff052.js&quot; rel=&quot;preload&quot; as=&quot;script&quot;&gt;&lt;link href=&quot;/css/chunk-vendors.0c859e98.css&quot; rel=&quot;stylesheet&quot;&gt;&lt;link href=&quot;/css/app.8ee4d6fd.css&quot; rel=&quot;stylesheet&quot;&gt;&lt;/head&gt;&lt;body&gt;&lt;noscript&gt;&lt;strong&gt;We&#39;re sorry but isp-portal doesn&#39;t work properly without JavaScript enabled. Please enable it to continue.&lt;/strong&gt;&lt;/noscript&gt;&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;&lt;script src=&quot;https://kit.fontawesome.com/d788c84bab.js&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/config.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/js/chunk-vendors.092ff052.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/js/app.6fdc482c.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;\r\n2022-12-12 13:18:40.349 Closed Socket[unconnected]\r\n```\r\nAny ideas on how to solve this?","title":"Wiremock record apis return with &quot;We&#39;re sorry but isp-portal doesn&#39;t work properly without JavaScript enabled. Please enable it to continue&quot;","body":"<p>I try to evaluate WireMock to mock a third-party service.</p>\n<p>When trying to record some calls to the third-party service.</p>\n<ol>\n<li>I am issuing a call to the actual service e.g.</li>\n</ol>\n<pre><code>curl -X GET &quot;http://thrdpary.service.com/api/v2/requests/6396ff4eae78da7b0457f283&quot; \\\n -H &quot;authorization: Bearer mytoken&quot; \\\n -H &quot;accept: application/json&quot;\n</code></pre>\n<p>I get an expected JSON response</p>\n<ol start=\"2\">\n<li>Then spanning wiremock and running the call via the proxy</li>\n</ol>\n<pre><code>java -jar ~/tools/wiremock/wiremock-jre8-standalone-2.35.0.jar --print-all-network-traffic \\\n --verbose \\\n --proxy-all https://thrdpary.service.com\n</code></pre>\n<ol start=\"3\">\n<li>Issuing a call via Wiremock proxy</li>\n</ol>\n<pre><code>curl -X GET &quot;http://127.0.0.1:8080/api/v2/requests/6396ff4eae78da7b0457f283&quot; \\\n -H &quot;authorization: Bearer mytoken&quot; \\\n -H &quot;accept: application/json&quot;\n -H &quot;Content-Type: application/json&quot;\n</code></pre>\n<p>But now I get an HTML response saying &quot;We're sorry but isp-portal doesn't work properly without JavaScript enabled. Please enable it to continue.&quot;</p>\n<pre><code>&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1&quot;&gt;&lt;link rel=&quot;icon&quot; href=&quot;/favicon.png&quot;&gt;&lt;title&gt;Vade Providers Dashboard&lt;/title&gt;&lt;link href=&quot;/css/chunk-035323b2.7b55ea24.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-0c985e44.c6590440.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-0f545a99.1c048926.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-27ade5d8.d39a8b0b.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-3aa2de5d.7652751d.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-53f183f4.cdd3a2dc.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-544e0368.a5ab1dfb.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-5a6fde36.e3b2c13a.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-7de726f3.7d4de787.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-7f3c0b78.dc211df5.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-83ce1a9e.f2716e48.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-8d9970a8.e5638da4.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-a7c610f8.a3ca4e48.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-f567c068.c322c04b.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-f95edb7a.39df20bf.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-035323b2.fe892de2.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-0bb2fd9a.63880c1c.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-0c985e44.226b2fc7.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-0f545a99.48adf734.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-2570f1d2.66a8fb23.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-27ade5d8.217cffc0.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-2d0be333.daaed458.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-2d0e97b4.36457cfb.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-3aa2de5d.bcd8d130.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-53f183f4.532707bc.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-544e0368.c447366e.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-5a6fde36.47c41335.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-7194670a.a360ec9e.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-7de726f3.82cb480e.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-7f3c0b78.06d21415.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-7facee04.52a8a153.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-83ce1a9e.da9aae42.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-8d9970a8.f29483ea.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-a7c610f8.51d3b72e.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-f567c068.3e0dacca.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-f95edb7a.ba5a8579.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/app.8ee4d6fd.css&quot; rel=&quot;preload&quot; as=&quot;style&quot;&gt;&lt;link href=&quot;/css/chunk-vendors.0c859e98.css&quot; rel=&quot;preload&quot; as=&quot;style&quot;&gt;&lt;link href=&quot;/js/app.6fdc482c.js&quot; rel=&quot;preload&quot; as=&quot;script&quot;&gt;&lt;link href=&quot;/js/chunk-vendors.092ff052.js&quot; rel=&quot;preload&quot; as=&quot;script&quot;&gt;&lt;link href=&quot;/css/chunk-vendors.0c859e98.css&quot; rel=&quot;stylesheet&quot;&gt;&lt;link href=&quot;/css/app.8ee4d6fd.css&quot; rel=&quot;stylesheet&quot;&gt;&lt;/head&gt;&lt;body&gt;&lt;noscript&gt;&lt;strong&gt;We're sorry but isp-portal doesn't work properly without JavaScript enabled. Please enable it to continue.&lt;/strong&gt;&lt;/noscript&gt;&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;&lt;script src=&quot;https://kit.fontawesome.com/d788c84bab.js&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/config.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/js/chunk-vendors.092ff052.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/js/app.6fdc482c.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n<p>The wiremock log</p>\n<pre><code>Response:\nHTTP/1.1 200\nserver: [nginx]\ndate: [Mon, 12 Dec 2022 13:18:40 GMT]\ncontent-type: [text/html]\ncontent-length: [3191]\nlast-modified: [Fri, 21 Oct 2022 13:40:12 GMT]\nvary: [Accept-Encoding]\netag: [&quot;6352a13c-c77&quot;]\nexpires: [Mon, 12 Dec 2022 13:18:39 GMT]\ncache-control: [no-cache]\naccept-ranges: [bytes]\n\n2022-12-12 13:18:40.341 Outgoing bytes: HTTP/1.1 200 OK\nServer: nginx\nDate: Mon, 12 Dec 2022 13:18:40 GMT\nContent-Type: text/html\nLast-Modified: Fri, 21 Oct 2022 13:40:12 GMT\nVary: Accept-Encoding\nETag: &quot;6352a13c-c77&quot;\nExpires: Mon, 12 Dec 2022 13:18:39 GMT\nCache-Control: no-cache\nAccept-Ranges: bytes\nVary: User-Agent\nContent-Length: 3191\n\n\n2022-12-12 13:18:40.341 Outgoing bytes: &lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1&quot;&gt;&lt;link rel=&quot;icon&quot; href=&quot;/favicon.png&quot;&gt;&lt;title&gt;Vade Providers Dashboard&lt;/title&gt;&lt;link href=&quot;/css/chunk-035323b2.7b55ea24.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-0c985e44.c6590440.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-0f545a99.1c048926.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-27ade5d8.d39a8b0b.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-3aa2de5d.7652751d.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-53f183f4.cdd3a2dc.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-544e0368.a5ab1dfb.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-5a6fde36.e3b2c13a.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-7de726f3.7d4de787.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-7f3c0b78.dc211df5.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-83ce1a9e.f2716e48.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-8d9970a8.e5638da4.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-a7c610f8.a3ca4e48.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-f567c068.c322c04b.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/chunk-f95edb7a.39df20bf.css&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-035323b2.fe892de2.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-0bb2fd9a.63880c1c.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-0c985e44.226b2fc7.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-0f545a99.48adf734.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-2570f1d2.66a8fb23.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-27ade5d8.217cffc0.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-2d0be333.daaed458.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-2d0e97b4.36457cfb.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-3aa2de5d.bcd8d130.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-53f183f4.532707bc.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-544e0368.c447366e.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-5a6fde36.47c41335.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-7194670a.a360ec9e.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-7de726f3.82cb480e.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-7f3c0b78.06d21415.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-7facee04.52a8a153.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-83ce1a9e.da9aae42.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-8d9970a8.f29483ea.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-a7c610f8.51d3b72e.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-f567c068.3e0dacca.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/js/chunk-f95edb7a.ba5a8579.js&quot; rel=&quot;prefetch&quot;&gt;&lt;link href=&quot;/css/app.8ee4d6fd.css&quot; rel=&quot;preload&quot; as=&quot;style&quot;&gt;&lt;link href=&quot;/css/chunk-vendors.0c859e98.css&quot; rel=&quot;preload&quot; as=&quot;style&quot;&gt;&lt;link href=&quot;/js/app.6fdc482c.js&quot; rel=&quot;preload&quot; as=&quot;script&quot;&gt;&lt;link href=&quot;/js/chunk-vendors.092ff052.js&quot; rel=&quot;preload&quot; as=&quot;script&quot;&gt;&lt;link href=&quot;/css/chunk-vendors.0c859e98.css&quot; rel=&quot;stylesheet&quot;&gt;&lt;link href=&quot;/css/app.8ee4d6fd.css&quot; rel=&quot;stylesheet&quot;&gt;&lt;/head&gt;&lt;body&gt;&lt;noscript&gt;&lt;strong&gt;We're sorry but isp-portal doesn't work properly without JavaScript enabled. Please enable it to continue.&lt;/strong&gt;&lt;/noscript&gt;&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;&lt;script src=&quot;https://kit.fontawesome.com/d788c84bab.js&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/config.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/js/chunk-vendors.092ff052.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/js/app.6fdc482c.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;\n2022-12-12 13:18:40.349 Closed Socket[unconnected]\n</code></pre>\n<p>Any ideas on how to solve this?</p>\n"},{"tags":["java","spring-boot","maven","spring-cloud","spring-cloud-bus"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1671024592,"post_id":74798976,"comment_id":132007517,"body_markdown":"What is Spring Cloud 3.1.5 Check the compatibility matrix https://spring.io/projects/spring-cloud","body":"What is Spring Cloud 3.1.5 Check the compatibility matrix <a href=\"https://spring.io/projects/spring-cloud\" rel=\"nofollow noreferrer\">spring.io/projects/spring-cloud</a>"},{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1671028477,"post_id":74798976,"comment_id":132009051,"body_markdown":"Please show your pom or Gradle file","body":"Please show your pom or Gradle file"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1671030249,"post_id":74798976,"comment_id":132009789,"body_markdown":"please read my answer","body":"please read my answer"}],"answers":[{"tags":[],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671030219,"creation_date":1671030219,"answer_id":74800237,"question_id":74798976,"body_markdown":"this helped me   \r\n \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-cloud-context&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.5&lt;/version&gt;\r\n      &lt;/dependency&gt;","title":"NoClassDefFoundError: org/springframework/cloud/util/PropertyUtils","body":"<p>this helped me</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-context&lt;/artifactId&gt;\n    &lt;version&gt;3.1.5&lt;/version&gt;\n  &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":695,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74800237,"answer_count":1,"score":0,"last_activity_date":1671030219,"creation_date":1671024295,"question_id":74798976,"body_markdown":"I&#39;ve got a new application and I try to make it working.\r\n\r\nI upgraded version of\r\n \r\n - **spring-boot** to `2.7.6`\r\n - **spring-cloud** to `3.1.5` \r\n \r\nand after it I started to receive following error in tests:\r\n\r\n    13:08:34.679 [main] DEBUG org.springframework.boot.context.logging.ClasspathLoggingApplicationListener - Application failed to start with classpath: unknown\r\n    13:08:34.680 [main] ERROR org.springframework.boot.SpringApplication - Application run failed\r\n    java.lang.NoClassDefFoundError: org/springframework/cloud/util/PropertyUtils\r\n    \tat org.springframework.cloud.config.client.ConfigServerConfigDataMissingEnvironmentPostProcessor.shouldProcessEnvironment(ConfigServerConfigDataMissingEnvironmentPostProcessor.java:50)\r\n    \tat org.springframework.cloud.commons.ConfigDataMissingEnvironmentPostProcessor.postProcessEnvironment(ConfigDataMissingEnvironmentPostProcessor.java:77)\r\n    \tat org.springframework.boot.context.config.ConfigFileApplicationListener.onApplicationEnvironmentPreparedEvent(ConfigFileApplicationListener.java:200)\r\n    \tat org.springframework.boot.context.config.ConfigFileApplicationListener.onApplicationEvent(ConfigFileApplicationListener.java:188)\r\n    \tat org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\r\n    \tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\r\n    \tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\r\n    \tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:127)\r\n    \tat org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:80)\r\n    \tat org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:53)\r\n    \tat org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:345)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\r\n    \tat org.springframework.boot.builder.SpringApplicationBuilder.run(SpringApplicationBuilder.java:140)\r\n\r\nHow can I find dependency which contains class `org/springframework/cloud/util/PropertyUtils` ?","title":"NoClassDefFoundError: org/springframework/cloud/util/PropertyUtils","body":"<p>I've got a new application and I try to make it working.</p>\n<p>I upgraded version of</p>\n<ul>\n<li><strong>spring-boot</strong> to <code>2.7.6</code></li>\n<li><strong>spring-cloud</strong> to <code>3.1.5</code></li>\n</ul>\n<p>and after it I started to receive following error in tests:</p>\n<pre><code>13:08:34.679 [main] DEBUG org.springframework.boot.context.logging.ClasspathLoggingApplicationListener - Application failed to start with classpath: unknown\n13:08:34.680 [main] ERROR org.springframework.boot.SpringApplication - Application run failed\njava.lang.NoClassDefFoundError: org/springframework/cloud/util/PropertyUtils\n    at org.springframework.cloud.config.client.ConfigServerConfigDataMissingEnvironmentPostProcessor.shouldProcessEnvironment(ConfigServerConfigDataMissingEnvironmentPostProcessor.java:50)\n    at org.springframework.cloud.commons.ConfigDataMissingEnvironmentPostProcessor.postProcessEnvironment(ConfigDataMissingEnvironmentPostProcessor.java:77)\n    at org.springframework.boot.context.config.ConfigFileApplicationListener.onApplicationEnvironmentPreparedEvent(ConfigFileApplicationListener.java:200)\n    at org.springframework.boot.context.config.ConfigFileApplicationListener.onApplicationEvent(ConfigFileApplicationListener.java:188)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:127)\n    at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:80)\n    at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:53)\n    at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:345)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\n    at org.springframework.boot.builder.SpringApplicationBuilder.run(SpringApplicationBuilder.java:140)\n</code></pre>\n<p>How can I find dependency which contains class <code>org/springframework/cloud/util/PropertyUtils</code> ?</p>\n"},{"tags":["java","clojure","leiningen"],"answers":[{"tags":[],"owner":{"account_id":311679,"reputation":89812,"user_id":625403,"accept_rate":82,"display_name":"amalloy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1670986077,"creation_date":1670986077,"answer_id":74793069,"question_id":74792721,"body_markdown":"[Clojure requires at least Java 8](https://clojure.org/releases/downloads#_java_compatibility):\r\n\r\n&gt; Clojure depends on Java and all Clojure code is compiled to Java 8 compatible bytecode (newer versions of Java can load this as well).\r\n&gt; - Minimum runtime dependency: Java 8\r\n\r\nJava 7 is over a decade old. To use a modern language you need tools that aren&#39;t ancient. If your project requirement is to use both Clojure and  Java 7, then transitively it&#39;s a requirement that your project will fail.","title":"Leiningen 2 with java 7","body":"<p><a href=\"https://clojure.org/releases/downloads#_java_compatibility\" rel=\"nofollow noreferrer\">Clojure requires at least Java 8</a>:</p>\n<blockquote>\n<p>Clojure depends on Java and all Clojure code is compiled to Java 8 compatible bytecode (newer versions of Java can load this as well).</p>\n<ul>\n<li>Minimum runtime dependency: Java 8</li>\n</ul>\n</blockquote>\n<p>Java 7 is over a decade old. To use a modern language you need tools that aren't ancient. If your project requirement is to use both Clojure and  Java 7, then transitively it's a requirement that your project will fail.</p>\n"},{"tags":[],"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1671030140,"creation_date":1671030140,"answer_id":74800216,"question_id":74792721,"body_markdown":"Clojure [since version\r\n1.10](https://clojure.org/releases/devchangelog#_1_10_0_alpha5_june_27_2018)\r\nhas Java8 as minimum. \r\n\r\nLeiningen [since 2.9](https://codeberg.org/leiningen/leiningen/commit/9699fd7b6a4f7df56d006ae6a34526c03fd5ebec)\r\nuses Clojure 1.10.  So any version **up to 2.8.3** should work just fine\r\nwith Java7.\r\n\r\nAnd indeed it works fine for me using e.g. 2.7.1 (which I picked,\r\nbecause it is the only &lt;2.9 version still in SDKMAN):\r\n\r\n```console\r\n% java -version\r\nopenjdk version &quot;1.7.0_352&quot;\r\nOpenJDK Runtime Environment (Zulu 7.56.0.11-CA-linux64) (build 1.7.0_352-b01)\r\nOpenJDK 64-Bit Server VM (Zulu 7.56.0.11-CA-linux64) (build 24.352-b01, mixed mode)\r\n% lein -version\r\nLeiningen 2.7.1 on Java 1.7.0_352 OpenJDK 64-Bit Server VM\r\n```\r\n\r\n(with Leiningen 2.10 the `-version` call fails with the same error as in\r\nthe question)\r\n\r\nThis of course also means, that you have to stick to plugins and deps\r\nfrom before 2018 too.\r\n\r\nAll that said: Update!  At some point even Azul will end the support...\r\n","title":"Leiningen 2 with java 7","body":"<p>Clojure <a href=\"https://clojure.org/releases/devchangelog#_1_10_0_alpha5_june_27_2018\" rel=\"nofollow noreferrer\">since version\n1.10</a>\nhas Java8 as minimum.</p>\n<p>Leiningen <a href=\"https://codeberg.org/leiningen/leiningen/commit/9699fd7b6a4f7df56d006ae6a34526c03fd5ebec\" rel=\"nofollow noreferrer\">since 2.9</a>\nuses Clojure 1.10.  So any version <strong>up to 2.8.3</strong> should work just fine\nwith Java7.</p>\n<p>And indeed it works fine for me using e.g. 2.7.1 (which I picked,\nbecause it is the only &lt;2.9 version still in SDKMAN):</p>\n<pre><code>% java -version\nopenjdk version &quot;1.7.0_352&quot;\nOpenJDK Runtime Environment (Zulu 7.56.0.11-CA-linux64) (build 1.7.0_352-b01)\nOpenJDK 64-Bit Server VM (Zulu 7.56.0.11-CA-linux64) (build 24.352-b01, mixed mode)\n% lein -version\nLeiningen 2.7.1 on Java 1.7.0_352 OpenJDK 64-Bit Server VM\n</code></pre>\n<p>(with Leiningen 2.10 the <code>-version</code> call fails with the same error as in\nthe question)</p>\n<p>This of course also means, that you have to stick to plugins and deps\nfrom before 2018 too.</p>\n<p>All that said: Update!  At some point even Azul will end the support...</p>\n"}],"owner":{"account_id":14054016,"reputation":33,"user_id":10151927,"display_name":"Spiros Vardis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74800216,"answer_count":2,"score":0,"last_activity_date":1671030140,"creation_date":1670981790,"question_id":74792721,"body_markdown":"I tried to install leiningen ( 2.X.X ) and I noticed that it throws an error at execution (e.g lein version). I use java 7 on Ubuntu 20.04. Could you please provide me with some feedback on how to resolve this?\r\nThe error:\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: clojure/main : Unsupported major.minor version 52.0\r\n        at java.lang.ClassLoader.findBootstrapClass(Native Method)\r\n        at java.lang.ClassLoader.findBootstrapClassOrNull(ClassLoader.java:1070)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:414)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:412)\r\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:358)\r\n        at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:482)\r\n```\r\n\r\nI tried different version of Leiningen (always 2.X.X, I didn&#39;t try 1.X.X versions) also downgrading Ubuntu. Unfortunately I can&#39;t change the java version because it is a project requirement.","title":"Leiningen 2 with java 7","body":"<p>I tried to install leiningen ( 2.X.X ) and I noticed that it throws an error at execution (e.g lein version). I use java 7 on Ubuntu 20.04. Could you please provide me with some feedback on how to resolve this?\nThe error:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: clojure/main : Unsupported major.minor version 52.0\n        at java.lang.ClassLoader.findBootstrapClass(Native Method)\n        at java.lang.ClassLoader.findBootstrapClassOrNull(ClassLoader.java:1070)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:414)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:412)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:358)\n        at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:482)\n</code></pre>\n<p>I tried different version of Leiningen (always 2.X.X, I didn't try 1.X.X versions) also downgrading Ubuntu. Unfortunately I can't change the java version because it is a project requirement.</p>\n"},{"tags":["java","lombok"],"comments":[{"owner":{"account_id":17123397,"reputation":137,"user_id":12391137,"display_name":"Rashmi Shehana"},"score":0,"creation_date":1671029833,"post_id":74800046,"comment_id":132009620,"body_markdown":"Read this. https://rusyasoft.github.io/java,%20lombok/2020/02/14/Overriding-build-setter-lombok-builder/","body":"Read this. <a href=\"https://rusyasoft.github.io/java,%20lombok/2020/02/14/Overriding-build-setter-lombok-builder/\" rel=\"nofollow noreferrer\">rusyasoft.github.io/java,%20lombok/2020/02/14/&hellip;</a>"},{"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"score":0,"creation_date":1671029873,"post_id":74800046,"comment_id":132009633,"body_markdown":"Does this answer your question? [Use custom setter in Lombok&#39;s builder](https://stackoverflow.com/questions/42379899/use-custom-setter-in-lomboks-builder)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/42379899/use-custom-setter-in-lomboks-builder\">Use custom setter in Lombok&#39;s builder</a>"}],"answers":[{"tags":[],"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1671030009,"creation_date":1671030009,"answer_id":74800185,"question_id":74800046,"body_markdown":"The builder name you&#39;ve created must match with the default one created by Lombok.\r\n\r\nThis would work,\r\n\r\n    public static class ABuilder {\r\n        ABuilder a(int x) {\r\n            this.a = 2 * x;\r\n            return this;\r\n        }\r\n    }\r\n\r\nMore details - https://stackoverflow.com/questions/42379899/use-custom-setter-in-lomboks-builder\r\n\r\n\r\n\r\nFor some reason, if you want to name the Builder class differently, use `builderClassName` of the `Builder` annotation.\r\n\r\n    @Data\r\n    @Builder (builderClassName = &quot;MyBuilderClass&quot;)\r\n    static class A {\r\n        private int a;\r\n\r\n        static class MyBuilderClass {\r\n            MyBuilderClass a(int x) {\r\n                this.a = 2 * x;\r\n                return this;\r\n            }\r\n        }\r\n    }","title":"How to override lombok builder method","body":"<p>The builder name you've created must match with the default one created by Lombok.</p>\n<p>This would work,</p>\n<pre><code>public static class ABuilder {\n    ABuilder a(int x) {\n        this.a = 2 * x;\n        return this;\n    }\n}\n</code></pre>\n<p>More details - <a href=\"https://stackoverflow.com/questions/42379899/use-custom-setter-in-lomboks-builder\">Use custom setter in Lombok&#39;s builder</a></p>\n<p>For some reason, if you want to name the Builder class differently, use <code>builderClassName</code> of the <code>Builder</code> annotation.</p>\n<pre><code>@Data\n@Builder (builderClassName = &quot;MyBuilderClass&quot;)\nstatic class A {\n    private int a;\n\n    static class MyBuilderClass {\n        MyBuilderClass a(int x) {\n            this.a = 2 * x;\n            return this;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":215645,"reputation":103,"user_id":470403,"display_name":"Sachin "},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671030080,"creation_date":1671030080,"answer_id":74800203,"question_id":74800046,"body_markdown":"Try this\r\n\r\n    @Data\r\n    @Builder\r\n    public class A {\r\n        private int a;\r\n        private int b;\r\n    \r\n        public static class ABuilder {\r\n            A.ABuilder a(int x) {\r\n                this.a = 2 * x;\r\n                return this;\r\n            }\r\n        }\r\n    \r\n      public static void main(String[] args) {\r\n          A aObj = A.builder().a(4).b(10).build();\r\n        System.out.println(aObj);\r\n      }\r\n    }","title":"How to override lombok builder method","body":"<p>Try this</p>\n<pre><code>@Data\n@Builder\npublic class A {\n    private int a;\n    private int b;\n\n    public static class ABuilder {\n        A.ABuilder a(int x) {\n            this.a = 2 * x;\n            return this;\n        }\n    }\n\n  public static void main(String[] args) {\n      A aObj = A.builder().a(4).b(10).build();\n    System.out.println(aObj);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":27252126,"reputation":1,"user_id":20776395,"display_name":"Stepan Kryzhankov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6903,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1671030113,"creation_date":1671029364,"question_id":74800046,"body_markdown":"I want to override Lombok default builder method. I tried this piece of code, but it doesn&#39;t work.\r\n\r\nIs it even possible to do such thing?\r\n\r\n    @Data\r\n    @Builder\r\n    static class A {\r\n        private int a;\r\n\r\n        static class Builder {\r\n            A.ABuilder a(int x) {\r\n                this.a = 2 * x;\r\n                return this;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    private static void fun() {\r\n        var a = A.builder()\r\n                .a(1)\r\n                .build();\r\n    }\r\n\r\n[enter image description here](https://i.stack.imgur.com/qi6am.png)","title":"How to override lombok builder method","body":"<p>I want to override Lombok default builder method. I tried this piece of code, but it doesn't work.</p>\n<p>Is it even possible to do such thing?</p>\n<pre><code>@Data\n@Builder\nstatic class A {\n    private int a;\n\n    static class Builder {\n        A.ABuilder a(int x) {\n            this.a = 2 * x;\n            return this;\n        }\n    }\n\n}\n\nprivate static void fun() {\n    var a = A.builder()\n            .a(1)\n            .build();\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/qi6am.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","inheritance"],"comments":[{"owner":{"account_id":450931,"reputation":1641,"user_id":846535,"accept_rate":33,"display_name":"marcellorvalle"},"score":0,"creation_date":1670887442,"post_id":74778328,"comment_id":131973306,"body_markdown":"To achieve the behavior you expected you shouldto call super() on the constructor with no arguments. The  same you did on the contructor with 3 arguments.","body":"To achieve the behavior you expected you shouldto call super() on the constructor with no arguments. The  same you did on the contructor with 3 arguments."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":1,"creation_date":1670887510,"post_id":74778328,"comment_id":131973317,"body_markdown":"This looks pretty straight forward because you&#39;re explicitly calling this and super. You enter the no-arg constructor, which calls the double constructor, which calls the three arg constructor, which calls the two arg super constructor. Which prints B. Then you finish the 3arg constructor and prints E, then you finish the 2 arg constructor and print D then you print C.","body":"This looks pretty straight forward because you&#39;re explicitly calling this and super. You enter the no-arg constructor, which calls the double constructor, which calls the three arg constructor, which calls the two arg super constructor. Which prints B. Then you finish the 3arg constructor and prints E, then you finish the 2 arg constructor and print D then you print C."},{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":0,"creation_date":1670887527,"post_id":74778328,"comment_id":131973321,"body_markdown":"Please read a primer, for example https://www.baeldung.com/java-constructor-specification","body":"Please read a primer, for example <a href=\"https://www.baeldung.com/java-constructor-specification\" rel=\"nofollow noreferrer\">baeldung.com/java-constructor-specification</a>"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1670887565,"post_id":74778328,"comment_id":131973336,"body_markdown":"@marcellorvalle you cannot call `super(...)` if calling `this(...)` (and apparently the intention is to create a circle with radius 1.0 if none is given)","body":"@marcellorvalle you cannot call <code>super(...)</code> if calling <code>this(...)</code> (and apparently the intention is to create a circle with radius 1.0 if none is given)"},{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1670894681,"post_id":74778328,"comment_id":131974423,"body_markdown":"Why would A be printed?","body":"Why would A be printed?"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1670978863,"creation_date":1670887581,"answer_id":74778402,"question_id":74778328,"body_markdown":"The rule is that every class in the hierarchy __must__ run at least 1 constructor. It may run more, but only if you use `this()`.\r\n\r\nIn other words, __all__ constructors __must__ start with either a `super()` call or a `this()` call. If you fail to do this, java will inject `super();` for you. If that isn&#39;t legal (because the parent class doesn&#39;t have a visible-to-the-subclass no-args constructor) then your constructor will not compile until you add an explicit `this()` or `super()` to it on the first line&lt;sup&gt;1&lt;/sup&gt;\r\n\r\n\r\n Thus, from the top down:\r\n\r\n* You call the no-arg constructor of `Circle9` ➔ `Circle9()`.\r\n* This calls `this(1.0)` ➔ `Circle9(double)`.\r\n* This calls `this(r, &quot;w&quot;, false)` ➔ `Circle9(double, String, boolean)`.\r\n* This calls `super(c, f)` ➔ `GeometricObject(String, boolean)`\r\n* This calls `super()` (implicitly) ➔ `java.lang.Object`&#39;s `()` constructor.\r\n* `java.lang.Object`&#39;s no-arg constructor is the only one that can manage to not call `this` or `super` - and does absolutely nothing, and returns.\r\n* `GeometricObject(color, filled)` returns from its `super` and prints `B`.\r\n* `Circle9(rad, col, fil)` returns from its `super` and prints `E`.\r\n* `Circle9(rad)` returns from its `this(r, c, f)` and prints `D`.\r\n* `Circle9()` returns from its `this(r)` and prints `C`.\r\n\r\nI&#39;m not sure why you expected `A` to print. \r\n\r\nRemember that each constructor __always__ starts with exactly one `this` or `super` call. No more, no less. If it doesn&#39;t appear to have such a statement, then it does - it has `super();` - you just don&#39;t see it, because `javac` acts like that&#39;s there.\r\n\r\n\r\n\r\n1) There is some debate on the OpenJDK developer mailing lists to ease restrictions on this. It&#39;s also purely a `javac` (Java-the-lang) rule; the runtime doesn&#39;t care. You can hack your way into constructors that don&#39;t call parent constructors by modifying bytecode and this won&#39;t trigger the verifier as far as I recall. In fact, `java.lang.Object` is one such class (its constructor, naturally, doesn&#39;t invoke super; it has no superclass either, which you also can&#39;t do with `javac`, as `javac` will add `extends Object` if you don&#39;t write an `extends` yourself.","title":"Why is the output &quot;BEDC&quot; and not &quot;ABCD&quot;? Why was &quot;A&quot; completely ignored?","body":"<p>The rule is that every class in the hierarchy <strong>must</strong> run at least 1 constructor. It may run more, but only if you use <code>this()</code>.</p>\n<p>In other words, <strong>all</strong> constructors <strong>must</strong> start with either a <code>super()</code> call or a <code>this()</code> call. If you fail to do this, java will inject <code>super();</code> for you. If that isn't legal (because the parent class doesn't have a visible-to-the-subclass no-args constructor) then your constructor will not compile until you add an explicit <code>this()</code> or <code>super()</code> to it on the first line<sup>1</sup></p>\n<p>Thus, from the top down:</p>\n<ul>\n<li>You call the no-arg constructor of <code>Circle9</code> ➔ <code>Circle9()</code>.</li>\n<li>This calls <code>this(1.0)</code> ➔ <code>Circle9(double)</code>.</li>\n<li>This calls <code>this(r, &quot;w&quot;, false)</code> ➔ <code>Circle9(double, String, boolean)</code>.</li>\n<li>This calls <code>super(c, f)</code> ➔ <code>GeometricObject(String, boolean)</code></li>\n<li>This calls <code>super()</code> (implicitly) ➔ <code>java.lang.Object</code>'s <code>()</code> constructor.</li>\n<li><code>java.lang.Object</code>'s no-arg constructor is the only one that can manage to not call <code>this</code> or <code>super</code> - and does absolutely nothing, and returns.</li>\n<li><code>GeometricObject(color, filled)</code> returns from its <code>super</code> and prints <code>B</code>.</li>\n<li><code>Circle9(rad, col, fil)</code> returns from its <code>super</code> and prints <code>E</code>.</li>\n<li><code>Circle9(rad)</code> returns from its <code>this(r, c, f)</code> and prints <code>D</code>.</li>\n<li><code>Circle9()</code> returns from its <code>this(r)</code> and prints <code>C</code>.</li>\n</ul>\n<p>I'm not sure why you expected <code>A</code> to print.</p>\n<p>Remember that each constructor <strong>always</strong> starts with exactly one <code>this</code> or <code>super</code> call. No more, no less. If it doesn't appear to have such a statement, then it does - it has <code>super();</code> - you just don't see it, because <code>javac</code> acts like that's there.</p>\n<ol>\n<li>There is some debate on the OpenJDK developer mailing lists to ease restrictions on this. It's also purely a <code>javac</code> (Java-the-lang) rule; the runtime doesn't care. You can hack your way into constructors that don't call parent constructors by modifying bytecode and this won't trigger the verifier as far as I recall. In fact, <code>java.lang.Object</code> is one such class (its constructor, naturally, doesn't invoke super; it has no superclass either, which you also can't do with <code>javac</code>, as <code>javac</code> will add <code>extends Object</code> if you don't write an <code>extends</code> yourself.</li>\n</ol>\n"}],"owner":{"account_id":27233877,"reputation":11,"user_id":20761100,"display_name":"fhyyd"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1671029880,"creation_date":1670886954,"question_id":74778328,"body_markdown":"I&#39;ve read the code in order, and I am still facing trouble in how &quot;A&quot; was not printed.\r\n\r\n```\r\npublic class Test {\r\n    public static void main(String[] args) {\r\n        new Circle9();\r\n    }\r\n}\r\nclass GeometricObject {\r\n    GeometricObject() {\r\n        System.out.print(&quot;A&quot;);\r\n    }\r\n    public GeometricObject(String color, boolean filled) {\r\n        System.out.print(&quot;B&quot;);\r\n    }\r\n}\r\nclass Circle9 extends GeometricObject {\r\n    public Circle9() {\r\n        this(1.0);\r\n        System.out.print(&quot;C&quot;);\r\n    }\r\n    public Circle9(double radius) {\r\n        this(radius, &quot;white&quot;, false);\r\n        System.out.print(&quot;D&quot;);\r\n    }\r\n    public Circle9(double radius, String color, boolean filled) {\r\n        super(color, filled);\r\n        System.out.print(&quot;E&quot;);\r\n    }\r\n}\r\n\r\n```\r\n\r\nI was thinking Java is prioritizing methods that link to the super class, but I am not sure if that is the case.","title":"Why is the output &quot;BEDC&quot; and not &quot;ABCD&quot;? Why was &quot;A&quot; completely ignored?","body":"<p>I've read the code in order, and I am still facing trouble in how &quot;A&quot; was not printed.</p>\n<pre><code>public class Test {\n    public static void main(String[] args) {\n        new Circle9();\n    }\n}\nclass GeometricObject {\n    GeometricObject() {\n        System.out.print(&quot;A&quot;);\n    }\n    public GeometricObject(String color, boolean filled) {\n        System.out.print(&quot;B&quot;);\n    }\n}\nclass Circle9 extends GeometricObject {\n    public Circle9() {\n        this(1.0);\n        System.out.print(&quot;C&quot;);\n    }\n    public Circle9(double radius) {\n        this(radius, &quot;white&quot;, false);\n        System.out.print(&quot;D&quot;);\n    }\n    public Circle9(double radius, String color, boolean filled) {\n        super(color, filled);\n        System.out.print(&quot;E&quot;);\n    }\n}\n\n</code></pre>\n<p>I was thinking Java is prioritizing methods that link to the super class, but I am not sure if that is the case.</p>\n"},{"tags":["java","rest","maven","intellij-idea","jersey"],"comments":[{"owner":{"account_id":2653233,"reputation":1208,"user_id":2294429,"accept_rate":79,"display_name":"Some guy"},"score":1,"creation_date":1436976643,"post_id":31435074,"comment_id":50841245,"body_markdown":"Your `jersey-servlet` and `jersey-server` JARs are not the same version. Try using the `jersey-servlet` belonging to the `glassfish` groupId. http://mvnrepository.com/artifact/org.glassfish.jersey.containers/jersey-container-servlet-core/","body":"Your <code>jersey-servlet</code> and <code>jersey-server</code> JARs are not the same version. Try using the <code>jersey-servlet</code> belonging to the <code>glassfish</code> groupId. <a href=\"http://mvnrepository.com/artifact/org.glassfish.jersey.containers/jersey-container-servlet-core/\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.glassfish.jersey.containers/&hellip;</a>"},{"owner":{"account_id":2653233,"reputation":1208,"user_id":2294429,"accept_rate":79,"display_name":"Some guy"},"score":0,"creation_date":1436976768,"post_id":31435074,"comment_id":50841330,"body_markdown":"Also, if you want to use the URL as mentioned (`http://localhost:8080/hello`), the WAR deployed to the Tomcat server should be in the ROOT context. For that to happen, you need to clear your Tomcat&#39;s webapp folder (including the ROOT), and deploy your WAR file with the name `ROOT`.","body":"Also, if you want to use the URL as mentioned (<code>http:&#47;&#47;localhost:8080&#47;hello</code>), the WAR deployed to the Tomcat server should be in the ROOT context. For that to happen, you need to clear your Tomcat&#39;s webapp folder (including the ROOT), and deploy your WAR file with the name <code>ROOT</code>."},{"owner":{"account_id":2142017,"reputation":2275,"user_id":1900445,"accept_rate":100,"display_name":"Sajad"},"score":0,"creation_date":1436995212,"post_id":31435074,"comment_id":50851936,"body_markdown":"@Rakesh I replace the jar file with the `jersey-server` , and change the `web.xml` content to `updated section` and not displayed anything.","body":"@Rakesh I replace the jar file with the <code>jersey-server</code> , and change the <code>web.xml</code> content to <code>updated section</code> and not displayed anything."},{"owner":{"account_id":2653233,"reputation":1208,"user_id":2294429,"accept_rate":79,"display_name":"Some guy"},"score":0,"creation_date":1437002813,"post_id":31435074,"comment_id":50854887,"body_markdown":"Well, I tried deploying a simple Jersey webapp and noticed that there were 5 different dependencies that were required. `jersey-server`, `jersey-client`,`jersey-common`,`jersey-container-servlet-core` and `javax.ws.rs-api`. You could try with these and see if it works.","body":"Well, I tried deploying a simple Jersey webapp and noticed that there were 5 different dependencies that were required. <code>jersey-server</code>, <code>jersey-client</code>,<code>jersey-common</code>,<code>jersey-container-servlet-core</code> and <code>javax.ws.rs-api</code>. You could try with these and see if it works."}],"answers":[{"tags":[],"owner":{"account_id":4638441,"reputation":2839,"user_id":3758948,"accept_rate":89,"display_name":"Darshan Patel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1437018702,"creation_date":1436975530,"answer_id":31435250,"question_id":31435074,"body_markdown":"Add root context path in your url : \r\n\r\ntry `http://localhost:8080/FirstRestApp/hello`\r\n\r\nUpdate :\r\n\r\nI created small project exactly as you want with some modification and it is working fine for me..\r\n\r\nhttps://github.com/darsh9292/FirstRestApp\r\n","title":"Jersey hello world displays nothing","body":"<p>Add root context path in your url : </p>\n\n<p>try <code>http://localhost:8080/FirstRestApp/hello</code></p>\n\n<p>Update :</p>\n\n<p>I created small project exactly as you want with some modification and it is working fine for me..</p>\n\n<p><a href=\"https://github.com/darsh9292/FirstRestApp\" rel=\"nofollow\">https://github.com/darsh9292/FirstRestApp</a></p>\n"},{"tags":[],"owner":{"account_id":2142017,"reputation":2275,"user_id":1900445,"accept_rate":100,"display_name":"Sajad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671029791,"creation_date":1437071397,"answer_id":31461893,"question_id":31435074,"body_markdown":"If the IDE is `IntelliJ IDEA` the URL should be like this:\r\n\r\n    http://localhost:8080/hello\r\n\r\n(Without the project name)","title":"Jersey hello world displays nothing","body":"<p>If the IDE is <code>IntelliJ IDEA</code> the URL should be like this:</p>\n<pre><code>http://localhost:8080/hello\n</code></pre>\n<p>(Without the project name)</p>\n"}],"owner":{"account_id":2142017,"reputation":2275,"user_id":1900445,"accept_rate":100,"display_name":"Sajad"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":31461893,"answer_count":2,"score":1,"last_activity_date":1671029791,"creation_date":1436975092,"question_id":31435074,"body_markdown":"I am new in rest web service with jersey, (with `tomcat`)\r\n\r\nI have a `HelloWorld` source: (in the `RestApp` package)\r\n\r\n    package com.ss.hh;\r\n    ...\r\n\r\n    @Path(&quot;/hello&quot;)\r\n    public class HelloWorld {\r\n    \r\n        @GET\r\n        @Produces(MediaType.TEXT_PLAIN)\r\n        public String getMessage(){\r\n            return &quot;Hello jersey&quot;;\r\n        }\r\n    }\r\n\r\nAnd here is the `web.xml`:\r\n\r\n    &lt;servlet&gt;\r\n        &lt;servlet-name&gt;jersey-serlvet&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;\r\n            com.sun.jersey.spi.container.servlet.ServletContainer\r\n        &lt;/servlet-class&gt;\r\n\r\n        &lt;init-param&gt;\r\n            &lt;param-name&gt;com.sun.jersey.config.property.packages&lt;/param-name&gt;\r\n            &lt;param-value&gt;com.ss.hh&lt;/param-value&gt;\r\n        &lt;/init-param&gt;\r\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n    &lt;/servlet&gt;\r\n\r\n    &lt;servlet-mapping&gt;\r\n        &lt;servlet-name&gt;jersey-serlvet&lt;/servlet-name&gt;\r\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n    &lt;/servlet-mapping&gt;\r\n\r\nAnd in `pom.xml`:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jersey-server&lt;/artifactId&gt;\r\n        &lt;version&gt;2.19&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jersey-servlet&lt;/artifactId&gt;\r\n        &lt;version&gt;1.19&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nWhy i can&#39;t get the `Hello jersey` message in `http://localhost:8080/hello`? \r\n\r\n**UPDATE**\r\n\r\nI replace the `jersey-servlet` with `jersey-container-servlet-core` file and changed the `web.xml` configures as below:\r\n\r\n    &lt;servlet&gt;\r\n        &lt;servlet-name&gt;Jersey REST Service&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;org.glassfish.jersey.servlet.ServletContainer&lt;/servlet-class&gt;\r\n        &lt;init-param&gt;\r\n            &lt;param-name&gt;jersey.config.server.provider.packages&lt;/param-name&gt;\r\n            &lt;param-value&gt;com.ss.hh&lt;/param-value&gt;\r\n        &lt;/init-param&gt;\r\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n    &lt;/servlet&gt;\r\n    &lt;servlet-mapping&gt;\r\n        &lt;servlet-name&gt;Jersey REST Service&lt;/servlet-name&gt;\r\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n    &lt;/servlet-mapping&gt;\r\n\r\nBut it not displays anything on: [http://localhost:8080/FirstRestApp/hello][1]\r\n\r\n`FirstRestApp` is the project name.\r\n\r\n\r\n  [1]: http://localhost:8080/FirstRestApp/hello","title":"Jersey hello world displays nothing","body":"<p>I am new in rest web service with jersey, (with <code>tomcat</code>)</p>\n\n<p>I have a <code>HelloWorld</code> source: (in the <code>RestApp</code> package)</p>\n\n<pre><code>package com.ss.hh;\n...\n\n@Path(\"/hello\")\npublic class HelloWorld {\n\n    @GET\n    @Produces(MediaType.TEXT_PLAIN)\n    public String getMessage(){\n        return \"Hello jersey\";\n    }\n}\n</code></pre>\n\n<p>And here is the <code>web.xml</code>:</p>\n\n<pre><code>&lt;servlet&gt;\n    &lt;servlet-name&gt;jersey-serlvet&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;\n        com.sun.jersey.spi.container.servlet.ServletContainer\n    &lt;/servlet-class&gt;\n\n    &lt;init-param&gt;\n        &lt;param-name&gt;com.sun.jersey.config.property.packages&lt;/param-name&gt;\n        &lt;param-value&gt;com.ss.hh&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n\n&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;jersey-serlvet&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre>\n\n<p>And in <code>pom.xml</code>:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jersey-server&lt;/artifactId&gt;\n    &lt;version&gt;2.19&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\n    &lt;artifactId&gt;jersey-servlet&lt;/artifactId&gt;\n    &lt;version&gt;1.19&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Why i can't get the <code>Hello jersey</code> message in <code>http://localhost:8080/hello</code>? </p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I replace the <code>jersey-servlet</code> with <code>jersey-container-servlet-core</code> file and changed the <code>web.xml</code> configures as below:</p>\n\n<pre><code>&lt;servlet&gt;\n    &lt;servlet-name&gt;Jersey REST Service&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.glassfish.jersey.servlet.ServletContainer&lt;/servlet-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;jersey.config.server.provider.packages&lt;/param-name&gt;\n        &lt;param-value&gt;com.ss.hh&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;Jersey REST Service&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre>\n\n<p>But it not displays anything on: <a href=\"http://localhost:8080/FirstRestApp/hello\" rel=\"nofollow\">http://localhost:8080/FirstRestApp/hello</a></p>\n\n<p><code>FirstRestApp</code> is the project name.</p>\n"},{"tags":["java","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":12849899,"reputation":996,"user_id":9295125,"display_name":"Daniel Rafael Wosch"},"score":0,"creation_date":1670944225,"post_id":74786914,"comment_id":131987141,"body_markdown":"Why do you want to use mappedBy? Further: Do you need the bidirectional relationship? I currently do not fully understand what the use case is and what you want to achieve","body":"Why do you want to use mappedBy? Further: Do you need the bidirectional relationship? I currently do not fully understand what the use case is and what you want to achieve"}],"answers":[{"tags":[],"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1670946172,"creation_date":1670944281,"answer_id":74786984,"question_id":74786914,"body_markdown":"As you have two separate relationships from AircraftReport two Flight, you also have to separate relationships from Flight to AircraftReport.\r\n\r\n    @OneToOne(mappedBy = &quot;inboundFlight&quot;)\r\n    private AircraftReport aircraftReportInbound;\r\n\r\n    @OneToOne(mappedBy = &quot;outboundFlight&quot;)\r\n    private AircraftReport aircraftReportOutbound;","title":"Mapping two fields of the same class with One-to-One relationship","body":"<p>As you have two separate relationships from AircraftReport two Flight, you also have to separate relationships from Flight to AircraftReport.</p>\n<pre><code>@OneToOne(mappedBy = &quot;inboundFlight&quot;)\nprivate AircraftReport aircraftReportInbound;\n\n@OneToOne(mappedBy = &quot;outboundFlight&quot;)\nprivate AircraftReport aircraftReportOutbound;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671029710,"creation_date":1670944442,"answer_id":74787014,"question_id":74786914,"body_markdown":"IMHO you don&#39;t need to use a bidirectional relationship for a `OneToOne` mapping. If you want the `AircraftReport` just get the `AircraftReport` and the `Flight` instances will come with it. Otherwise if you&#39;re not working with a report just get the `Flight` and be happy.\r\n\r\nAlso, I don&#39;t recommend using `Cascade` operations on a `OneToOne`, or at any time for that matter. Do you really ever want the `Flight` deleted?\r\n\r\nMap to either `inboundFlight` or `outboundFlight`. You can&#39;t have one bidirectional relationship take the place of two of them. If you want two bidirectional relationships then add another to `Flight`.\r\n\r\n    @OneToOne(mappedBy = &quot;inboundFlight&quot;)\r\n    private AircraftReport aircraftReportInbound;\r\n\r\n    @OneToOne(mappedBy = &quot;outboundFlight&quot;)\r\n    private AircraftReport aircraftReportOutbound;","title":"Mapping two fields of the same class with One-to-One relationship","body":"<p>IMHO you don't need to use a bidirectional relationship for a <code>OneToOne</code> mapping. If you want the <code>AircraftReport</code> just get the <code>AircraftReport</code> and the <code>Flight</code> instances will come with it. Otherwise if you're not working with a report just get the <code>Flight</code> and be happy.</p>\n<p>Also, I don't recommend using <code>Cascade</code> operations on a <code>OneToOne</code>, or at any time for that matter. Do you really ever want the <code>Flight</code> deleted?</p>\n<p>Map to either <code>inboundFlight</code> or <code>outboundFlight</code>. You can't have one bidirectional relationship take the place of two of them. If you want two bidirectional relationships then add another to <code>Flight</code>.</p>\n<pre><code>@OneToOne(mappedBy = &quot;inboundFlight&quot;)\nprivate AircraftReport aircraftReportInbound;\n\n@OneToOne(mappedBy = &quot;outboundFlight&quot;)\nprivate AircraftReport aircraftReportOutbound;\n</code></pre>\n"}],"owner":{"account_id":23923493,"reputation":77,"user_id":17918927,"display_name":"GoingAround"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":442,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74787014,"answer_count":2,"score":0,"last_activity_date":1671029710,"creation_date":1670944023,"question_id":74786914,"body_markdown":"I have a `Flight` class and a `AircraftReport` class. The `AircraftReport` class contains an inbound flight and an outbound flight which I would both like to be mapped as a `@OneToOne`. How do I correctly define the relationship?\r\n\r\n```java\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@ToString\r\n@Entity\r\n@Table\r\npublic class Flight implements Serializable {\r\n    @Id\r\n    @GeneratedValue(\r\n            strategy = GenerationType.SEQUENCE,\r\n            generator = &quot;flight_sequence&quot;\r\n    )\r\n    @SequenceGenerator(\r\n            name = &quot;flight_sequence&quot;,\r\n            allocationSize = 1\r\n    )\r\n    @Column(nullable = false, updatable = false)\r\n    private Long id;\r\n\r\n    private String callsign;\r\n    private Date date;\r\n    private String origin;\r\n    private String destination;\r\n    private String registration;\r\n    private String aircraftType;\r\n\r\n    @OneToOne(mappedBy = &quot;--what should it be mapped by here--&quot;)\r\n    private AircraftReport aircraftReport;\r\n}\r\n```\r\n\r\n```java\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table\r\npublic class AircraftReport implements Serializable {\r\n    @Id\r\n    @GeneratedValue(\r\n            strategy = GenerationType.SEQUENCE,\r\n            generator = &quot;taxsheet_sequence&quot;\r\n    )\r\n    @SequenceGenerator(\r\n            name = &quot;taxsheet_sequence&quot;,\r\n            allocationSize = 1\r\n    )\r\n    @Column(nullable = false, updatable = false)\r\n    private Long id;\r\n    ...\r\n\r\n    @OneToOne(cascade = CascadeType.ALL)\r\n    @JoinColumn(name = &quot;inbound_flight_id&quot;)\r\n    private Flight inboundFlight;\r\n    @OneToOne(cascade = CascadeType.ALL)\r\n    @JoinColumn(name = &quot;outbound_flight_id&quot;)\r\n    private Flight outboundFlight;\r\n\r\n    ...\r\n}\r\n```","title":"Mapping two fields of the same class with One-to-One relationship","body":"<p>I have a <code>Flight</code> class and a <code>AircraftReport</code> class. The <code>AircraftReport</code> class contains an inbound flight and an outbound flight which I would both like to be mapped as a <code>@OneToOne</code>. How do I correctly define the relationship?</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\n@ToString\n@Entity\n@Table\npublic class Flight implements Serializable {\n    @Id\n    @GeneratedValue(\n            strategy = GenerationType.SEQUENCE,\n            generator = &quot;flight_sequence&quot;\n    )\n    @SequenceGenerator(\n            name = &quot;flight_sequence&quot;,\n            allocationSize = 1\n    )\n    @Column(nullable = false, updatable = false)\n    private Long id;\n\n    private String callsign;\n    private Date date;\n    private String origin;\n    private String destination;\n    private String registration;\n    private String aircraftType;\n\n    @OneToOne(mappedBy = &quot;--what should it be mapped by here--&quot;)\n    private AircraftReport aircraftReport;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table\npublic class AircraftReport implements Serializable {\n    @Id\n    @GeneratedValue(\n            strategy = GenerationType.SEQUENCE,\n            generator = &quot;taxsheet_sequence&quot;\n    )\n    @SequenceGenerator(\n            name = &quot;taxsheet_sequence&quot;,\n            allocationSize = 1\n    )\n    @Column(nullable = false, updatable = false)\n    private Long id;\n    ...\n\n    @OneToOne(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;inbound_flight_id&quot;)\n    private Flight inboundFlight;\n    @OneToOne(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;outbound_flight_id&quot;)\n    private Flight outboundFlight;\n\n    ...\n}\n</code></pre>\n"},{"tags":["java","mapstruct"],"comments":[{"owner":{"account_id":3192720,"reputation":379,"user_id":2696646,"accept_rate":60,"display_name":"Aelion"},"score":0,"creation_date":1674123161,"post_id":71171636,"comment_id":132649178,"body_markdown":"There&#39;s an issue for this on the mapstruct github https://github.com/mapstruct/mapstruct/issues/2889","body":"There&#39;s an issue for this on the mapstruct github <a href=\"https://github.com/mapstruct/mapstruct/issues/2889\" rel=\"nofollow noreferrer\">github.com/mapstruct/mapstruct/issues/2889</a>"}],"answers":[{"tags":[],"owner":{"account_id":5244521,"reputation":327,"user_id":4190682,"display_name":"Maneki"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671029696,"creation_date":1671029696,"answer_id":74800125,"question_id":71171636,"body_markdown":"Disabling implicit mapping is possible via `@BeanMapping(ignoreByDefault = true)` but this annotation must be set on each method. Look at the MapStruct reference guide in &#167; 3.1. Basic mappings :\r\n\r\n&gt; By means of the @BeanMapping(ignoreByDefault = true) the default\r\n&gt; behavior will be explicit mapping, meaning that all mappings have to\r\n&gt; be specified by means of the @Mapping and no warnings will be issued\r\n&gt; on missing target properties. This allows to ignore all fields, except\r\n&gt; the ones that are explicitly defined through @Mapping.","title":"Force explicit mapping for all target fields with Mapstruct","body":"<p>Disabling implicit mapping is possible via <code>@BeanMapping(ignoreByDefault = true)</code> but this annotation must be set on each method. Look at the MapStruct reference guide in § 3.1. Basic mappings :</p>\n<blockquote>\n<p>By means of the @BeanMapping(ignoreByDefault = true) the default\nbehavior will be explicit mapping, meaning that all mappings have to\nbe specified by means of the @Mapping and no warnings will be issued\non missing target properties. This allows to ignore all fields, except\nthe ones that are explicitly defined through @Mapping.</p>\n</blockquote>\n"}],"owner":{"account_id":3192720,"reputation":379,"user_id":2696646,"accept_rate":60,"display_name":"Aelion"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":893,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1671029696,"creation_date":1645178790,"question_id":71171636,"body_markdown":"Let&#39;s say I have the following objects\r\n\r\n    public class ClassA {\r\n      private String fieldA;\r\n      private String fieldB;\r\n    }\r\n\r\n    public class ClassB {\r\n      private String fieldA;\r\n      private String fieldBWithDifferentName;\r\n      private String fieldC;\r\n    }\r\n\r\nI want to force explicit mappings for all fields in ClassB and force a compile error when a field is not mapped.\r\n\r\nI know I can use `@Mapper(unmappedTargetPolicy = ReportingPolicy.ERROR)` for fieldC to force `@Mapping(target = &quot;id&quot;, ignore = true)` so my mapper would look like this\r\n\r\n    @Mapper(unmappedTargetPolicy = ReportingPolicy.ERROR)\r\n    public interface Mapper {\r\n    \r\n      @Mapping(target = &quot;fieldBWithDifferentName&quot;, source = &quot;fieldB&quot;)\r\n      @Mapping(target = &quot;fieldC&quot;, ignore = true)\r\n      ClassB toClassB(final ClassA classA);\r\n    }\r\n\r\nHowever, this mapper will automatically map fieldA, because it exists in both classes. And even though I do want to map fieldA, I want the developer to have to do it explicitly and have mapstruct throw an error if it has to resort to the automatic mapping functionality.\r\n\r\nBasically, I want to force a `@Mapping` for every field in the target. Is this possible?","title":"Force explicit mapping for all target fields with Mapstruct","body":"<p>Let's say I have the following objects</p>\n<pre><code>public class ClassA {\n  private String fieldA;\n  private String fieldB;\n}\n\npublic class ClassB {\n  private String fieldA;\n  private String fieldBWithDifferentName;\n  private String fieldC;\n}\n</code></pre>\n<p>I want to force explicit mappings for all fields in ClassB and force a compile error when a field is not mapped.</p>\n<p>I know I can use <code>@Mapper(unmappedTargetPolicy = ReportingPolicy.ERROR)</code> for fieldC to force <code>@Mapping(target = &quot;id&quot;, ignore = true)</code> so my mapper would look like this</p>\n<pre><code>@Mapper(unmappedTargetPolicy = ReportingPolicy.ERROR)\npublic interface Mapper {\n\n  @Mapping(target = &quot;fieldBWithDifferentName&quot;, source = &quot;fieldB&quot;)\n  @Mapping(target = &quot;fieldC&quot;, ignore = true)\n  ClassB toClassB(final ClassA classA);\n}\n</code></pre>\n<p>However, this mapper will automatically map fieldA, because it exists in both classes. And even though I do want to map fieldA, I want the developer to have to do it explicitly and have mapstruct throw an error if it has to resort to the automatic mapping functionality.</p>\n<p>Basically, I want to force a <code>@Mapping</code> for every field in the target. Is this possible?</p>\n"},{"tags":["java","soap","junit","jaxb","wsdl"],"comments":[{"owner":{"account_id":7378669,"reputation":190,"user_id":8998443,"display_name":"Hooman.AS"},"score":0,"creation_date":1671031822,"post_id":74800116,"comment_id":132010421,"body_markdown":"Clearly the com.sun.xml.bind:jaxb-impl artifact is labelled &quot;Old JAXB Runtime module&quot; in the maven repository (see link below), and yet both of these artifacts are still getting new releases:\n\nhttps://mvnrepository.com/artifact/org.glassfish.jaxb/jaxb-runtime https://mvnrepository.com/artifact/com.sun.xml.bind/jaxb-impl","body":"Clearly the com.sun.xml.bind:jaxb-impl artifact is labelled &quot;Old JAXB Runtime module&quot; in the maven repository (see link below), and yet both of these artifacts are still getting new releases:  <a href=\"https://mvnrepository.com/artifact/org.glassfish.jaxb/jaxb-runtime\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.glassfish.jaxb/jaxb-runtime</a> <a href=\"https://mvnrepository.com/artifact/com.sun.xml.bind/jaxb-impl\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/com.sun.xml.bind/jaxb-impl</a>"}],"owner":{"account_id":26478352,"reputation":1,"user_id":20117934,"display_name":"ISMAEL BOUADI"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":173,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671029668,"creation_date":1671029668,"question_id":74800116,"body_markdown":"i am trying to write some tests for some webservices based on soap protocol using junit 5 on a spring boot project , but each time it gives me this error \r\n```\r\nCannot invoke &quot;javax.xml.ws.Endpoint.stop()&quot; because &quot;endpoint&quot; is null\r\njava.lang.NullPointerException: Cannot invoke &quot;javax.xml.ws.Endpoint.stop()&quot; because &quot;endpoint&quot; is null\r\n```\r\nthis is my test class \r\n```\r\n@RunWith(SpringRunner.class)\r\n@ContextConfiguration({ &quot;classpath:/beans-test-ws.xml&quot; })\r\npublic class WebServiceTest {\r\n    @Inject\r\n    private IParametragePersonnes parametragePersonnes;\r\n    @Inject\r\n    private IGestionPersonnes gestionPersonnes;\r\n    @Inject\r\n    private IReferentielStructures referentielStructures;\r\n    @Inject\r\n    private ISynchronisationReferentielExterne synchronisationReferentielExterne;\r\n    @Test\r\n    public void testGestionPersonnesService() throws MalformedURLException {\r\n        Endpoint endpoint = null;\r\n        try {\r\n            final String address = &quot;http://localhost:9090/GestionPersonnes&quot;;\r\n            endpoint = Endpoint.publish(address, this.gestionPersonnes);\r\n            System.out.println(&quot;Server ready...&quot;);\r\n\r\n            final GestionPersonnesService service = new GestionPersonnesService(\r\n                            new URL(&quot;http://localhost:9090/GestionPersonnes?wsdl&quot;));\r\n            final IGestionPersonnes client = service.getGestionPersonnesPort();\r\n            assertTrue(true);\r\n        } finally {\r\n            endpoint.stop();\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\ni have tried to change dependecies  versions like jaxb-api and jaxb-impl but nothing changed","title":"Cannot invoke Endpoint.stop because endpoint is null","body":"<p>i am trying to write some tests for some webservices based on soap protocol using junit 5 on a spring boot project , but each time it gives me this error</p>\n<pre><code>Cannot invoke &quot;javax.xml.ws.Endpoint.stop()&quot; because &quot;endpoint&quot; is null\njava.lang.NullPointerException: Cannot invoke &quot;javax.xml.ws.Endpoint.stop()&quot; because &quot;endpoint&quot; is null\n</code></pre>\n<p>this is my test class</p>\n<pre><code>@RunWith(SpringRunner.class)\n@ContextConfiguration({ &quot;classpath:/beans-test-ws.xml&quot; })\npublic class WebServiceTest {\n    @Inject\n    private IParametragePersonnes parametragePersonnes;\n    @Inject\n    private IGestionPersonnes gestionPersonnes;\n    @Inject\n    private IReferentielStructures referentielStructures;\n    @Inject\n    private ISynchronisationReferentielExterne synchronisationReferentielExterne;\n    @Test\n    public void testGestionPersonnesService() throws MalformedURLException {\n        Endpoint endpoint = null;\n        try {\n            final String address = &quot;http://localhost:9090/GestionPersonnes&quot;;\n            endpoint = Endpoint.publish(address, this.gestionPersonnes);\n            System.out.println(&quot;Server ready...&quot;);\n\n            final GestionPersonnesService service = new GestionPersonnesService(\n                            new URL(&quot;http://localhost:9090/GestionPersonnes?wsdl&quot;));\n            final IGestionPersonnes client = service.getGestionPersonnesPort();\n            assertTrue(true);\n        } finally {\n            endpoint.stop();\n        }\n    }\n}\n\n</code></pre>\n<p>i have tried to change dependecies  versions like jaxb-api and jaxb-impl but nothing changed</p>\n"},{"tags":["java","oop"],"answers":[{"tags":[],"owner":{"account_id":5701489,"reputation":13677,"user_id":4506315,"accept_rate":50,"display_name":"Hunter Tran"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1671029636,"creation_date":1671029636,"answer_id":74800110,"question_id":74799992,"body_markdown":"Option 1: Use default method in interface\r\n```java\r\npublic interface IMap\r\n{\r\n    default void setCharAt(int x, int y, int c)\r\n    {\r\n        // logic here\r\n    }\r\n}\r\n```\r\n\r\nThen you can just implement the interface in your classes\r\n\r\nOption 2: Use abstract class and interface\r\n 1. Declare an interface with your common method for the map\r\n 2. Create an abstract class that implement the interface\r\n 3. In your classes, extend the abstract class\r\n\r\nMore info on abstract class: [Abstract Methods and Classes][1]\r\n\r\nMore info on interface with default method: [Default Methods][2]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/IandI/abstract.html\r\n  [2]: https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html","title":"How to avoid redeclaring functions in multiple classes in Java?","body":"<p>Option 1: Use default method in interface</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface IMap\n{\n    default void setCharAt(int x, int y, int c)\n    {\n        // logic here\n    }\n}\n</code></pre>\n<p>Then you can just implement the interface in your classes</p>\n<p>Option 2: Use abstract class and interface</p>\n<ol>\n<li>Declare an interface with your common method for the map</li>\n<li>Create an abstract class that implement the interface</li>\n<li>In your classes, extend the abstract class</li>\n</ol>\n<p>More info on abstract class: <a href=\"https://docs.oracle.com/javase/tutorial/java/IandI/abstract.html\" rel=\"nofollow noreferrer\">Abstract Methods and Classes</a></p>\n<p>More info on interface with default method: <a href=\"https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html\" rel=\"nofollow noreferrer\">Default Methods</a></p>\n"}],"owner":{"account_id":18645056,"reputation":31,"user_id":13589913,"display_name":"mathsymaths"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1671029636,"creation_date":1671029097,"question_id":74799992,"body_markdown":"I have a class named &#39;GameMap&#39; which holds a private char[][] named &#39;map&#39;. I created some utility functions to access/modify this &#39;map&#39; from outside the class, for example: &quot;setCharAt&quot; that takes int x, int y, char c and does map[y][x] = c. I have another class called &#39;BotPlayer&#39; which also holds a private char[][] named &#39;memorizedMap&#39;. I want to use utility functions for this char[][] as well but I do not want to redeclare them inside &#39;BotPlayer&#39;. I want to be able to call these functions in other classes and I want to be able to access the char[][] array directly inside these classes. For example:\r\n\r\n    GameMap map = new GameMap();\r\n    map.setCharAt(x,y,c);\r\nAlso, I do not want BotPlayer extending a parent Map class because it already extends another class.\r\n\r\nWhat is the best practice to approach this?","title":"How to avoid redeclaring functions in multiple classes in Java?","body":"<p>I have a class named 'GameMap' which holds a private char[][] named 'map'. I created some utility functions to access/modify this 'map' from outside the class, for example: &quot;setCharAt&quot; that takes int x, int y, char c and does map[y][x] = c. I have another class called 'BotPlayer' which also holds a private char[][] named 'memorizedMap'. I want to use utility functions for this char[][] as well but I do not want to redeclare them inside 'BotPlayer'. I want to be able to call these functions in other classes and I want to be able to access the char[][] array directly inside these classes. For example:</p>\n<pre><code>GameMap map = new GameMap();\nmap.setCharAt(x,y,c);\n</code></pre>\n<p>Also, I do not want BotPlayer extending a parent Map class because it already extends another class.</p>\n<p>What is the best practice to approach this?</p>\n"},{"tags":["java","swing","iterator"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1671027916,"post_id":74799567,"comment_id":132008815,"body_markdown":"a) read the api doc of ListIterator (note where the cursor is after adding to an empty list) b) compare the logic of your code in the next/previous handler (hint: while vs if)","body":"a) read the api doc of ListIterator (note where the cursor is after adding to an empty list) b) compare the logic of your code in the next/previous handler (hint: while vs if)"},{"owner":{"account_id":27244641,"reputation":1,"user_id":20770167,"display_name":"Brenard"},"score":0,"creation_date":1671029241,"post_id":74799567,"comment_id":132009383,"body_markdown":"Yes gave it another read there were you pointed out. I have managed to get it mostly working only issue left is it still requires multiple button clicks but I will post the solution now.","body":"Yes gave it another read there were you pointed out. I have managed to get it mostly working only issue left is it still requires multiple button clicks but I will post the solution now."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1671030468,"post_id":74799567,"comment_id":132009873,"body_markdown":"A different approach would be to keep an &quot;index&quot; variable to track which item is currently displ.ayed. Then when you go forward you can increment this variable and get the item from the ArrayList. And decrement when you go backwards. An iterator it typically used when you want to look through the entire list at one time in one direction.","body":"A different approach would be to keep an &quot;index&quot; variable to track which item is currently displ.ayed. Then when you go forward you can increment this variable and get the item from the ArrayList. And decrement when you go backwards. An iterator it typically used when you want to look through the entire list at one time in one direction."}],"answers":[{"tags":[],"owner":{"account_id":27244641,"reputation":1,"user_id":20770167,"display_name":"Brenard"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671029622,"creation_date":1671029622,"answer_id":74800105,"question_id":74799567,"body_markdown":"Managed to get it working. However still sometimes requires 2 button clicks to get next and previous but here is what I changed.\r\n\r\nAdded the Strings to the ArrayList instead of listIterator and then moved the the initialize.\r\n```\r\n list.add(&quot;Jim&quot;);\r\n\t list.add(&quot;Bob&quot;);\r\n\t list.add(&quot;Karl&quot;);\r\n\t iterator =list.listIterator();\r\n```\r\nThen simply just changed my while to an if for next\r\n```\r\n\t\t\t  if (iterator.hasNext()) {\r\n\t\t\t\t\tdisplay.setText(iterator.next());\r\n\t\t\t\t}\t\r\n```\r\nApologies for if this was a poor solution and question I had just been struggling on this for hours and was reading through the api and just couldnt figure it out till now. Though I hope if someone is stuck on a similar problem as me this helps somewhat.\r\n","title":"Display next and previous in JTextArea with JButtons using a ListIterator","body":"<p>Managed to get it working. However still sometimes requires 2 button clicks to get next and previous but here is what I changed.</p>\n<p>Added the Strings to the ArrayList instead of listIterator and then moved the the initialize.</p>\n<pre><code> list.add(&quot;Jim&quot;);\n     list.add(&quot;Bob&quot;);\n     list.add(&quot;Karl&quot;);\n     iterator =list.listIterator();\n</code></pre>\n<p>Then simply just changed my while to an if for next</p>\n<pre><code>              if (iterator.hasNext()) {\n                    display.setText(iterator.next());\n                }   \n</code></pre>\n<p>Apologies for if this was a poor solution and question I had just been struggling on this for hours and was reading through the api and just couldnt figure it out till now. Though I hope if someone is stuck on a similar problem as me this helps somewhat.</p>\n"}],"owner":{"account_id":27244641,"reputation":1,"user_id":20770167,"display_name":"Brenard"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671029622,"creation_date":1671027067,"question_id":74799567,"body_markdown":"Im creating a small GUI ArrayList programme using a ListIterator which display the Strings of the ArrayList one at a time in a TextArea using JButtons which allow the user to go next and previous. Its working in a strange way though as the previous button only works when the GUI is started and then takes multiple clicks to go between elements. Next also only works once previous has hit the last element. Any suggestions would be greatly appreciated.\r\n\r\n```\r\n\r\nimport java.awt.BorderLayout;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.util.ArrayList;\r\nimport java.util.ListIterator;\r\nimport javax.swing.*;\r\n\r\npublic class NextAndPrevious extends JFrame{\r\n\tArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(); \r\n\tListIterator&lt;String&gt; iterator = (ListIterator&lt;String&gt;) list.listIterator();\r\n\r\n\r\npublic NextAndPrevious() {\r\n\t \r\n\t JButton next,previous;\r\n\t JTextArea display;\r\n\t \r\n\t iterator.add(&quot;Jim&quot;);\r\n\t iterator.add(&quot;Bob&quot;);\r\n\t iterator.add(&quot;Karl&quot;);\r\n//GUI\r\nthis.setLayout(new BorderLayout());\r\n\r\nnext = new JButton(&quot;Next&quot;);\r\nthis.add(next,BorderLayout.EAST);\r\n\r\nprevious = new JButton(&quot;Previous&quot;);\r\nthis.add(previous,BorderLayout.WEST);\r\n\r\ndisplay = new JTextArea();\r\nthis.add(display,BorderLayout.CENTER);\r\n\r\n//Button for next in list\r\nnext.addActionListener(new ActionListener() {\r\n\tpublic void actionPerformed(ActionEvent e) {\r\n\t\twhile (iterator.hasNext()) {\r\n\t\t\tdisplay.setText(iterator.next());\r\n\t\t}\r\n\t}\r\n}\r\n);\r\n//Button for previous in list\r\nprevious.addActionListener(new ActionListener() {\r\n\tpublic void actionPerformed(ActionEvent e) {\r\n\t\tif (iterator.hasPrevious()) {\r\n\t\t\tdisplay.setText(iterator.previous());\r\n\r\n}\r\n\t}\r\n\t});\r\n}\r\n\r\n\r\npublic static void main(String[] args) {\r\n\tNextAndPrevious b = new NextAndPrevious();\r\n\tb.setSize(400, 400);\r\n\tb.setVisible(true);\r\n\tb.setDefaultCloseOperation(EXIT_ON_CLOSE);\r\n\t\r\n}\r\n}\r\n```\r\n","title":"Display next and previous in JTextArea with JButtons using a ListIterator","body":"<p>Im creating a small GUI ArrayList programme using a ListIterator which display the Strings of the ArrayList one at a time in a TextArea using JButtons which allow the user to go next and previous. Its working in a strange way though as the previous button only works when the GUI is started and then takes multiple clicks to go between elements. Next also only works once previous has hit the last element. Any suggestions would be greatly appreciated.</p>\n<pre><code>\nimport java.awt.BorderLayout;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.util.ArrayList;\nimport java.util.ListIterator;\nimport javax.swing.*;\n\npublic class NextAndPrevious extends JFrame{\n    ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(); \n    ListIterator&lt;String&gt; iterator = (ListIterator&lt;String&gt;) list.listIterator();\n\n\npublic NextAndPrevious() {\n     \n     JButton next,previous;\n     JTextArea display;\n     \n     iterator.add(&quot;Jim&quot;);\n     iterator.add(&quot;Bob&quot;);\n     iterator.add(&quot;Karl&quot;);\n//GUI\nthis.setLayout(new BorderLayout());\n\nnext = new JButton(&quot;Next&quot;);\nthis.add(next,BorderLayout.EAST);\n\nprevious = new JButton(&quot;Previous&quot;);\nthis.add(previous,BorderLayout.WEST);\n\ndisplay = new JTextArea();\nthis.add(display,BorderLayout.CENTER);\n\n//Button for next in list\nnext.addActionListener(new ActionListener() {\n    public void actionPerformed(ActionEvent e) {\n        while (iterator.hasNext()) {\n            display.setText(iterator.next());\n        }\n    }\n}\n);\n//Button for previous in list\nprevious.addActionListener(new ActionListener() {\n    public void actionPerformed(ActionEvent e) {\n        if (iterator.hasPrevious()) {\n            display.setText(iterator.previous());\n\n}\n    }\n    });\n}\n\n\npublic static void main(String[] args) {\n    NextAndPrevious b = new NextAndPrevious();\n    b.setSize(400, 400);\n    b.setVisible(true);\n    b.setDefaultCloseOperation(EXIT_ON_CLOSE);\n    \n}\n}\n</code></pre>\n"},{"tags":["java","selenium","selenium-webdriver","serenity-bdd"],"answers":[{"tags":[],"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671028916,"creation_date":1671028916,"answer_id":74799954,"question_id":74797772,"body_markdown":"You can use `serenity-junit5` to achieve this goal. JUnit5 has `@RepeatedTest(n)` to run a test in n times. Code example:\r\n\r\n```java\r\nimport net.serenitybdd.junit5.SerenityJUnit5Extension;\r\nimport net.thucydides.core.annotations.Managed;\r\nimport org.junit.jupiter.api.RepeatedTest;\r\nimport org.junit.jupiter.api.extension.ExtendWith;\r\nimport org.openqa.selenium.WebDriver;\r\n\r\n@ExtendWith(SerenityJUnit5Extension.class)\r\npublic class GoToGoogle {\r\n\r\n    @Managed\r\n    WebDriver driver;\r\n\r\n    @RepeatedTest(2)\r\n    void name() {\r\n        driver.get(&quot;https://google.com&quot;);\r\n    }\r\n}\r\n```","title":"How to loop 10 times a single test in selenium using serenity framework","body":"<p>You can use <code>serenity-junit5</code> to achieve this goal. JUnit5 has <code>@RepeatedTest(n)</code> to run a test in n times. Code example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import net.serenitybdd.junit5.SerenityJUnit5Extension;\nimport net.thucydides.core.annotations.Managed;\nimport org.junit.jupiter.api.RepeatedTest;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.openqa.selenium.WebDriver;\n\n@ExtendWith(SerenityJUnit5Extension.class)\npublic class GoToGoogle {\n\n    @Managed\n    WebDriver driver;\n\n    @RepeatedTest(2)\n    void name() {\n        driver.get(&quot;https://google.com&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":8321186,"reputation":67,"user_id":6252833,"accept_rate":50,"display_name":"Asad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":272,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74799954,"answer_count":1,"score":0,"last_activity_date":1671028916,"creation_date":1671018256,"question_id":74797772,"body_markdown":"i would like to know is there any way to run a single test of selenium for n number of times.\r\ni could do this using JMeter but my task requirement is to use selenium with serenity framework.","title":"How to loop 10 times a single test in selenium using serenity framework","body":"<p>i would like to know is there any way to run a single test of selenium for n number of times.\ni could do this using JMeter but my task requirement is to use selenium with serenity framework.</p>\n"},{"tags":["java","postgresql","amazon-web-services","spring-boot","hibernate"],"answers":[{"tags":[],"owner":{"account_id":24697085,"reputation":3,"user_id":18588910,"display_name":"Ankit Kulkarni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671028871,"creation_date":1670410963,"answer_id":74715602,"question_id":74711943,"body_markdown":"\r\nIn Postgresql DB table, we need to provide privilege (like, insert, delete update) to the user through which spring boot application will connect with DB. So that spring boot application can performed actions like read/write in table/sequence. \r\nFor example: DB user mention in application.properties file is dbuser/password, in spring boot application. Then make sure in Postgresql DB side this user, dbuser, should be owner of the the table and have access like, insert, update, delete.","title":"Spring boot application not able to find sequence in AWS Postgresql","body":"<p>In Postgresql DB table, we need to provide privilege (like, insert, delete update) to the user through which spring boot application will connect with DB. So that spring boot application can performed actions like read/write in table/sequence.\nFor example: DB user mention in application.properties file is dbuser/password, in spring boot application. Then make sure in Postgresql DB side this user, dbuser, should be owner of the the table and have access like, insert, update, delete.</p>\n"}],"owner":{"account_id":24697085,"reputation":3,"user_id":18588910,"display_name":"Ankit Kulkarni"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671028871,"creation_date":1670389022,"question_id":74711943,"body_markdown":"In existing spring boot application I have created new entity and for the primary key for this entity I have use annotation @GeneratedValue.\r\nBased on entity and annotation I have created required table and sequence in the Postgresql database.(Note, Spring boot and database are existing)\r\nHowever, while starting spring boot application I am getting error &quot;Unable to build Hibernate SessionFactory Schema-validation: missing sequence&quot;, and sequence are created in database under the required schema.\r\n\r\n\r\nSpring boot application to identify the sequence created in Postgresql and start the application.","title":"Spring boot application not able to find sequence in AWS Postgresql","body":"<p>In existing spring boot application I have created new entity and for the primary key for this entity I have use annotation @GeneratedValue.\nBased on entity and annotation I have created required table and sequence in the Postgresql database.(Note, Spring boot and database are existing)\nHowever, while starting spring boot application I am getting error &quot;Unable to build Hibernate SessionFactory Schema-validation: missing sequence&quot;, and sequence are created in database under the required schema.</p>\n<p>Spring boot application to identify the sequence created in Postgresql and start the application.</p>\n"},{"tags":["java","mongodb","mongodb-query","aggregation-framework"],"comments":[{"owner":{"account_id":3631143,"reputation":55363,"user_id":3027266,"accept_rate":75,"display_name":"Wernfried Domscheit"},"score":0,"creation_date":1670955187,"post_id":74788962,"comment_id":131991150,"body_markdown":"What is mongoBash?","body":"What is mongoBash?"},{"owner":{"account_id":16968222,"reputation":3,"user_id":12273536,"display_name":"trytocode"},"score":0,"creation_date":1670993871,"post_id":74788962,"comment_id":131998947,"body_markdown":"Query that are run in mongoDb","body":"Query that are run in mongoDb"},{"owner":{"account_id":3631143,"reputation":55363,"user_id":3027266,"accept_rate":75,"display_name":"Wernfried Domscheit"},"score":0,"creation_date":1670997238,"post_id":74788962,"comment_id":131999446,"body_markdown":"mongoBash is a query? Neuer heard about that. It seems to be rather a tool.","body":"mongoBash is a query? Neuer heard about that. It seems to be rather a tool."},{"owner":{"account_id":16968222,"reputation":3,"user_id":12273536,"display_name":"trytocode"},"score":0,"creation_date":1671003423,"post_id":74788962,"comment_id":132000742,"body_markdown":"mongoBash is not the query. Query that is run in mangoBash, can it be stored in a file and get used in a java application. I am looking for help regarding this.","body":"mongoBash is not the query. Query that is run in mangoBash, can it be stored in a file and get used in a java application. I am looking for help regarding this."},{"owner":{"account_id":3631143,"reputation":55363,"user_id":3027266,"accept_rate":75,"display_name":"Wernfried Domscheit"},"score":0,"creation_date":1671004679,"post_id":74788962,"comment_id":132001007,"body_markdown":"Again, I never heard about a tool named &quot;mongoBash&quot; - must be a brand new or very exotic tool. Since you don&#39;t provide your query either, it is difficult to help you, because nobody can know which language base is used by mongoBash.","body":"Again, I never heard about a tool named &quot;mongoBash&quot; - must be a brand new or very exotic tool. Since you don&#39;t provide your query either, it is difficult to help you, because nobody can know which language base is used by mongoBash."}],"answers":[{"tags":[],"owner":{"account_id":13141180,"reputation":4284,"user_id":9492730,"display_name":"dododo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671028824,"creation_date":1671016469,"answer_id":74797397,"question_id":74788962,"body_markdown":"Writing it as answer since it&#39;s quite big:\r\n\r\nthere is no tool like `mongoBash`, I assume you need to execute query that you took from `mongo shell` (legacy version is `mongo` or modern one which is `mongosh`). Then, there is no a build-in way in java driver to execute it since: \r\n1. Shell syntax is only supported in the shell, not in the driver.\r\n2. You can use `db.RunCommand(..)` in the java driver that allows you to provide a query in MQL (mongo query language which is completely different with the shell syntax) but it will be only one command at once.\r\n\r\nHowever, you can use a shell functionality in java without the java driver via running mongo shell binary with `--eval` [argument][1]. To make it work in java, you will need to spawn mongo process, provide appropriate js/shell code in `--eval` arguments and then read the output stream. You can read my answer about this for c# [here][2]. Java code should look similar\r\n\r\n\r\n  [1]: https://www.mongodb.com/docs/v5.0/reference/program/mongo/#std-option-mongo.--eval\r\n  [2]: https://stackoverflow.com/questions/69190997/mongo-c-how-can-i-execute-string-as-mongo-query/69200520#69200520","title":"To run mongoDb query projections in a file using java code","body":"<p>Writing it as answer since it's quite big:</p>\n<p>there is no tool like <code>mongoBash</code>, I assume you need to execute query that you took from <code>mongo shell</code> (legacy version is <code>mongo</code> or modern one which is <code>mongosh</code>). Then, there is no a build-in way in java driver to execute it since:</p>\n<ol>\n<li>Shell syntax is only supported in the shell, not in the driver.</li>\n<li>You can use <code>db.RunCommand(..)</code> in the java driver that allows you to provide a query in MQL (mongo query language which is completely different with the shell syntax) but it will be only one command at once.</li>\n</ol>\n<p>However, you can use a shell functionality in java without the java driver via running mongo shell binary with <code>--eval</code> <a href=\"https://www.mongodb.com/docs/v5.0/reference/program/mongo/#std-option-mongo.--eval\" rel=\"nofollow noreferrer\">argument</a>. To make it work in java, you will need to spawn mongo process, provide appropriate js/shell code in <code>--eval</code> arguments and then read the output stream. You can read my answer about this for c# <a href=\"https://stackoverflow.com/questions/69190997/mongo-c-how-can-i-execute-string-as-mongo-query/69200520#69200520\">here</a>. Java code should look similar</p>\n"}],"owner":{"account_id":16968222,"reputation":3,"user_id":12273536,"display_name":"trytocode"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671028824,"creation_date":1670953647,"question_id":74788962,"body_markdown":"I have a scenario where the query(aggregation one) used in mongoBash, can it be stored in a file and be executed using JAVA spring boot application.\r\nIf possible, can you please share an example.\r\nAlso is it possible to pass arguments to the query stored in file from JAVA?","title":"To run mongoDb query projections in a file using java code","body":"<p>I have a scenario where the query(aggregation one) used in mongoBash, can it be stored in a file and be executed using JAVA spring boot application.\nIf possible, can you please share an example.\nAlso is it possible to pass arguments to the query stored in file from JAVA?</p>\n"},{"tags":["java","amazon-web-services","amazon-s3","io","aws-java-sdk"],"answers":[{"tags":[],"owner":{"account_id":77067,"reputation":13489,"user_id":220219,"display_name":"jens walter"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1496750680,"creation_date":1496750680,"answer_id":44389553,"question_id":44389194,"body_markdown":"The aws-java-sdk already provides streaming functionality for your S3 objects. You have to call &quot;getObject&quot; and the result will be an InputStream.\r\n\r\n1) AmazonS3Client.getObject(GetObjectRequest getObjectRequest) -&gt; S3Object\r\n\r\n2) S3Object.getObjectContent()\r\n\r\n&gt; Note: The method is a simple getter and does not actually create a\r\n&gt; stream. If you retrieve an S3Object, you should close this input\r\n&gt; stream as soon as possible, because the object contents aren&#39;t\r\n&gt; buffered in memory and stream directly from Amazon S3. Further,\r\n&gt; failure to close this stream can cause the request pool to become\r\n&gt; blocked.\r\n\r\n[aws java docs][1]\r\n\r\n\r\n  [1]: http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/model/S3Object.html#getObjectContent--","title":"How to read file chunk by chunk from S3 using aws-java-sdk","body":"<p>The aws-java-sdk already provides streaming functionality for your S3 objects. You have to call \"getObject\" and the result will be an InputStream.</p>\n\n<p>1) AmazonS3Client.getObject(GetObjectRequest getObjectRequest) -> S3Object</p>\n\n<p>2) S3Object.getObjectContent()</p>\n\n<blockquote>\n  <p>Note: The method is a simple getter and does not actually create a\n  stream. If you retrieve an S3Object, you should close this input\n  stream as soon as possible, because the object contents aren't\n  buffered in memory and stream directly from Amazon S3. Further,\n  failure to close this stream can cause the request pool to become\n  blocked.</p>\n</blockquote>\n\n<p><a href=\"http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/model/S3Object.html#getObjectContent--\" rel=\"nofollow noreferrer\">aws java docs</a></p>\n"},{"tags":[],"owner":{"account_id":6413479,"reputation":553,"user_id":4972364,"display_name":"Rodel"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1499390661,"creation_date":1499390661,"answer_id":44961153,"question_id":44389194,"body_markdown":"&gt; 100 complete line and one incomplete\r\n\r\ndo you mean you need to read the stream line by line? If so, instead of using a an InputStream try to read the s3 object stream by using BufferedReader so that you can read the stream line by line but I think this will make a little slower than by chunk.\r\n\r\n            S3Object s3object = s3.getObject(new GetObjectRequest(bucketName, key));\r\n            BufferedReader in = new BufferedReader(new InputStreamReader(s3object.getObjectContent()));\r\n            String line;\r\n            while ((line = in.readLine()) != null)  {\r\n    \r\n    //process line here\r\n    \r\n            }","title":"How to read file chunk by chunk from S3 using aws-java-sdk","body":"<blockquote>\n  <p>100 complete line and one incomplete</p>\n</blockquote>\n\n<p>do you mean you need to read the stream line by line? If so, instead of using a an InputStream try to read the s3 object stream by using BufferedReader so that you can read the stream line by line but I think this will make a little slower than by chunk.</p>\n\n<pre><code>        S3Object s3object = s3.getObject(new GetObjectRequest(bucketName, key));\n        BufferedReader in = new BufferedReader(new InputStreamReader(s3object.getObjectContent()));\n        String line;\n        while ((line = in.readLine()) != null)  {\n\n//process line here\n\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":214520,"reputation":689,"user_id":468536,"display_name":"Stephen Harrison"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1511119319,"creation_date":1511119319,"answer_id":47381023,"question_id":44389194,"body_markdown":"My usual approach (`InputStream` -&gt; `BufferedReader.lines()` -&gt; batches of lines -&gt; `CompletableFuture`) won&#39;t work here because the underlying `S3ObjectInputStream` times out eventually for huge files.\r\n\r\nSo I created a new class `S3InputStream`, which doesn&#39;t care how long it&#39;s open for and reads byte blocks on demand using short-lived AWS SDK calls. You provide a `byte[]` that will be reused. `new byte[1 &lt;&lt; 24]` (16Mb) appears to work well.\r\n\r\n    package org.harrison;\r\n    \r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    \r\n    import com.amazonaws.services.s3.AmazonS3;\r\n    import com.amazonaws.services.s3.AmazonS3ClientBuilder;\r\n    import com.amazonaws.services.s3.model.GetObjectRequest;\r\n    \r\n    /**\r\n     * An {@link InputStream} for S3 files that does not care how big the file is.\r\n     *\r\n     * @author stephen harrison\r\n     */\r\n    public class S3InputStream extends InputStream {\r\n        private static class LazyHolder {\r\n            private static final AmazonS3 S3 = AmazonS3ClientBuilder.defaultClient();\r\n        }\r\n    \r\n        private final String bucket;\r\n        private final String file;\r\n        private final byte[] buffer;\r\n        private long lastByteOffset;\r\n    \r\n        private long offset = 0;\r\n        private int next = 0;\r\n        private int length = 0;\r\n    \r\n        public S3InputStream(final String bucket, final String file, final byte[] buffer) {\r\n            this.bucket = bucket;\r\n            this.file = file;\r\n            this.buffer = buffer;\r\n            this.lastByteOffset = LazyHolder.S3.getObjectMetadata(bucket, file).getContentLength() - 1;\r\n        }\r\n    \r\n        @Override\r\n        public int read() throws IOException {\r\n            if (next &gt;= length) {\r\n                fill();\r\n    \r\n                if (length &lt;= 0) {\r\n                    return -1;\r\n                }\r\n    \r\n                next = 0;\r\n            }\r\n    \r\n            if (next &gt;= length) {\r\n                return -1;\r\n            }\r\n    \r\n            return buffer[this.next++];\r\n        }\r\n    \r\n        public void fill() throws IOException {\r\n            if (offset &gt;= lastByteOffset) {\r\n                length = -1;\r\n            } else {\r\n                try (final InputStream inputStream = s3Object()) {\r\n                    length = 0;\r\n                    int b;\r\n    \r\n                    while ((b = inputStream.read()) != -1) {\r\n                        buffer[length++] = (byte) b;\r\n                    }\r\n    \r\n                    if (length &gt; 0) {\r\n                        offset += length;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n        private InputStream s3Object() {\r\n            final GetObjectRequest request = new GetObjectRequest(bucket, file).withRange(offset,\r\n                    offset + buffer.length - 1);\r\n    \r\n            return LazyHolder.S3.getObject(request).getObjectContent();\r\n        }\r\n    }\r\n\r\n \r\n\r\n","title":"How to read file chunk by chunk from S3 using aws-java-sdk","body":"<p>My usual approach (<code>InputStream</code> -> <code>BufferedReader.lines()</code> -> batches of lines -> <code>CompletableFuture</code>) won't work here because the underlying <code>S3ObjectInputStream</code> times out eventually for huge files.</p>\n\n<p>So I created a new class <code>S3InputStream</code>, which doesn't care how long it's open for and reads byte blocks on demand using short-lived AWS SDK calls. You provide a <code>byte[]</code> that will be reused. <code>new byte[1 &lt;&lt; 24]</code> (16Mb) appears to work well.</p>\n\n<pre><code>package org.harrison;\n\nimport java.io.IOException;\nimport java.io.InputStream;\n\nimport com.amazonaws.services.s3.AmazonS3;\nimport com.amazonaws.services.s3.AmazonS3ClientBuilder;\nimport com.amazonaws.services.s3.model.GetObjectRequest;\n\n/**\n * An {@link InputStream} for S3 files that does not care how big the file is.\n *\n * @author stephen harrison\n */\npublic class S3InputStream extends InputStream {\n    private static class LazyHolder {\n        private static final AmazonS3 S3 = AmazonS3ClientBuilder.defaultClient();\n    }\n\n    private final String bucket;\n    private final String file;\n    private final byte[] buffer;\n    private long lastByteOffset;\n\n    private long offset = 0;\n    private int next = 0;\n    private int length = 0;\n\n    public S3InputStream(final String bucket, final String file, final byte[] buffer) {\n        this.bucket = bucket;\n        this.file = file;\n        this.buffer = buffer;\n        this.lastByteOffset = LazyHolder.S3.getObjectMetadata(bucket, file).getContentLength() - 1;\n    }\n\n    @Override\n    public int read() throws IOException {\n        if (next &gt;= length) {\n            fill();\n\n            if (length &lt;= 0) {\n                return -1;\n            }\n\n            next = 0;\n        }\n\n        if (next &gt;= length) {\n            return -1;\n        }\n\n        return buffer[this.next++];\n    }\n\n    public void fill() throws IOException {\n        if (offset &gt;= lastByteOffset) {\n            length = -1;\n        } else {\n            try (final InputStream inputStream = s3Object()) {\n                length = 0;\n                int b;\n\n                while ((b = inputStream.read()) != -1) {\n                    buffer[length++] = (byte) b;\n                }\n\n                if (length &gt; 0) {\n                    offset += length;\n                }\n            }\n        }\n    }\n\n    private InputStream s3Object() {\n        final GetObjectRequest request = new GetObjectRequest(bucket, file).withRange(offset,\n                offset + buffer.length - 1);\n\n        return LazyHolder.S3.getObject(request).getObjectContent();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3657924,"reputation":1867,"user_id":3048431,"display_name":"Oguz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1537435252,"creation_date":1537435252,"answer_id":52421661,"question_id":44389194,"body_markdown":"You can read all the files in the bucket with checking the tokens. And you can read files with other java libs.. i.e. Pdf.\r\n\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.text.ParseException;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Date;\r\n    import java.util.List;\r\n    import javax.swing.JTextArea;\r\n    import java.io.FileWriter;\r\n    import org.apache.pdfbox.pdmodel.PDDocument;\r\n    import org.apache.pdfbox.text.PDFTextStripper;\r\n    import org.apache.pdfbox.text.PDFTextStripperByArea;\r\n    import org.joda.time.DateTime;\r\n    import com.amazonaws.auth.AWSCredentials;\r\n    import com.amazonaws.auth.BasicAWSCredentials;\r\n    import com.amazonaws.services.s3.AmazonS3;\r\n    import com.amazonaws.services.s3.AmazonS3Client;\r\n    import com.amazonaws.services.s3.model.AmazonS3Exception;\r\n    import com.amazonaws.services.s3.model.CopyObjectRequest;\r\n    import com.amazonaws.services.s3.model.GetObjectRequest;\r\n    import com.amazonaws.services.s3.model.ListObjectsV2Request;\r\n    import com.amazonaws.services.s3.model.ListObjectsV2Result;\r\n    import com.amazonaws.services.s3.model.S3Object;\r\n    import com.amazonaws.services.s3.model.S3ObjectSummary;\r\n    import java.io.File; \r\n       //..\r\n       // in your main class \r\n       private static AWSCredentials credentials = null;\r\n       private static AmazonS3 amazonS3Client = null;\r\n           \r\n       public static void intializeAmazonObjects() {\r\n    \t\tcredentials = new BasicAWSCredentials(ACCESS_KEY, SECRET_ACCESS_KEY);\r\n    \t\tamazonS3Client = new AmazonS3Client(credentials);\r\n    \t}\r\n       public void mainMethod() throws IOException, AmazonS3Exception{\r\n    \t\t// connect to aws\r\n    \t\tintializeAmazonObjects();\r\n        \r\n        ListObjectsV2Request req = new ListObjectsV2Request().withBucketName(bucketName);\r\n\t\tListObjectsV2Result listObjectsResult;\r\n    do {\r\n\r\n\t\t\tlistObjectsResult = amazonS3Client.listObjectsV2(req);\r\n\t\t\tint count = 0;\r\n\t\t\tfor (S3ObjectSummary objectSummary : listObjectsResult.getObjectSummaries()) {\r\n\t\t\t\tSystem.out.printf(&quot; - %s (size: %d)\\n&quot;, objectSummary.getKey(), objectSummary.getSize());\r\n\t\t\t\r\n\t\t\t\t// Date lastModifiedDate = objectSummary.getLastModified();\r\n\r\n\t\t\t\t// String bucket = objectSummary.getBucketName();\r\n\t\t\t\tString key = objectSummary.getKey();\r\n\t\t\t\tString newKey = &quot;&quot;;\r\n\t\t\t\tString newBucket = &quot;&quot;;\r\n\t\t\t\tString resultText = &quot;&quot;;\r\n\r\n\t\t\t\t// only try to read pdf files\r\n\t\t\t\tif (!key.contains(&quot;.pdf&quot;)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Read the source file as text\r\n\t\t\t\tString pdfFileInText = readAwsFile(objectSummary.getBucketName(), objectSummary.getKey());\r\n\t\t\t\tif (pdfFileInText.isEmpty())\r\n\t\t\t\t\tcontinue;\r\n\t\t\t}//end of current bulk\r\n\r\n\t\t\t// If there are more than maxKeys(in this case 999 default) keys in the bucket,\r\n\t\t\t// get a continuation token\r\n\t\t\t// and list the next objects.\r\n\t\t\tString token = listObjectsResult.getNextContinuationToken();\r\n\t\t\tSystem.out.println(&quot;Next Continuation Token: &quot; + token);\r\n\t\t\treq.setContinuationToken(token);\r\n\t\t} while (listObjectsResult.isTruncated());\r\n    }\r\n\r\n\tpublic String readAwsFile(String bucketName, String keyName) {\r\n\t\tS3Object object;\r\n\t\tString pdfFileInText = &quot;&quot;;\r\n\t\ttry {\r\n\r\n\t\t\t// AmazonS3 s3client = getAmazonS3ClientObject();\r\n\t\t\tobject = amazonS3Client.getObject(new GetObjectRequest(bucketName, keyName));\r\n\t\t\tInputStream objectData = object.getObjectContent();\r\n\r\n\t\t\tPDDocument document = PDDocument.load(objectData);\r\n\t\t\tdocument.getClass();\r\n\r\n\t\t\tif (!document.isEncrypted()) {\r\n\r\n\t\t\t\tPDFTextStripperByArea stripper = new PDFTextStripperByArea();\r\n\t\t\t\tstripper.setSortByPosition(true);\r\n\r\n\t\t\t\tPDFTextStripper tStripper = new PDFTextStripper();\r\n\r\n\t\t\t\tpdfFileInText = tStripper.getText(document);\r\n\r\n\t\t\t}\r\n\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn pdfFileInText;\r\n\t}","title":"How to read file chunk by chunk from S3 using aws-java-sdk","body":"<p>You can read all the files in the bucket with checking the tokens. And you can read files with other java libs.. i.e. Pdf.</p>\n\n<pre><code>import java.io.IOException;\nimport java.io.InputStream;\nimport java.text.ParseException;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\nimport java.util.List;\nimport javax.swing.JTextArea;\nimport java.io.FileWriter;\nimport org.apache.pdfbox.pdmodel.PDDocument;\nimport org.apache.pdfbox.text.PDFTextStripper;\nimport org.apache.pdfbox.text.PDFTextStripperByArea;\nimport org.joda.time.DateTime;\nimport com.amazonaws.auth.AWSCredentials;\nimport com.amazonaws.auth.BasicAWSCredentials;\nimport com.amazonaws.services.s3.AmazonS3;\nimport com.amazonaws.services.s3.AmazonS3Client;\nimport com.amazonaws.services.s3.model.AmazonS3Exception;\nimport com.amazonaws.services.s3.model.CopyObjectRequest;\nimport com.amazonaws.services.s3.model.GetObjectRequest;\nimport com.amazonaws.services.s3.model.ListObjectsV2Request;\nimport com.amazonaws.services.s3.model.ListObjectsV2Result;\nimport com.amazonaws.services.s3.model.S3Object;\nimport com.amazonaws.services.s3.model.S3ObjectSummary;\nimport java.io.File; \n   //..\n   // in your main class \n   private static AWSCredentials credentials = null;\n   private static AmazonS3 amazonS3Client = null;\n\n   public static void intializeAmazonObjects() {\n        credentials = new BasicAWSCredentials(ACCESS_KEY, SECRET_ACCESS_KEY);\n        amazonS3Client = new AmazonS3Client(credentials);\n    }\n   public void mainMethod() throws IOException, AmazonS3Exception{\n        // connect to aws\n        intializeAmazonObjects();\n\n    ListObjectsV2Request req = new ListObjectsV2Request().withBucketName(bucketName);\n    ListObjectsV2Result listObjectsResult;\ndo {\n\n        listObjectsResult = amazonS3Client.listObjectsV2(req);\n        int count = 0;\n        for (S3ObjectSummary objectSummary : listObjectsResult.getObjectSummaries()) {\n            System.out.printf(\" - %s (size: %d)\\n\", objectSummary.getKey(), objectSummary.getSize());\n\n            // Date lastModifiedDate = objectSummary.getLastModified();\n\n            // String bucket = objectSummary.getBucketName();\n            String key = objectSummary.getKey();\n            String newKey = \"\";\n            String newBucket = \"\";\n            String resultText = \"\";\n\n            // only try to read pdf files\n            if (!key.contains(\".pdf\")) {\n                continue;\n            }\n\n            // Read the source file as text\n            String pdfFileInText = readAwsFile(objectSummary.getBucketName(), objectSummary.getKey());\n            if (pdfFileInText.isEmpty())\n                continue;\n        }//end of current bulk\n\n        // If there are more than maxKeys(in this case 999 default) keys in the bucket,\n        // get a continuation token\n        // and list the next objects.\n        String token = listObjectsResult.getNextContinuationToken();\n        System.out.println(\"Next Continuation Token: \" + token);\n        req.setContinuationToken(token);\n    } while (listObjectsResult.isTruncated());\n}\n\npublic String readAwsFile(String bucketName, String keyName) {\n    S3Object object;\n    String pdfFileInText = \"\";\n    try {\n\n        // AmazonS3 s3client = getAmazonS3ClientObject();\n        object = amazonS3Client.getObject(new GetObjectRequest(bucketName, keyName));\n        InputStream objectData = object.getObjectContent();\n\n        PDDocument document = PDDocument.load(objectData);\n        document.getClass();\n\n        if (!document.isEncrypted()) {\n\n            PDFTextStripperByArea stripper = new PDFTextStripperByArea();\n            stripper.setSortByPosition(true);\n\n            PDFTextStripper tStripper = new PDFTextStripper();\n\n            pdfFileInText = tStripper.getText(document);\n\n        }\n\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    return pdfFileInText;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":251952,"reputation":1129,"user_id":529659,"display_name":"jomofrodo"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1637157956,"creation_date":1637157956,"answer_id":70005852,"question_id":44389194,"body_markdown":"The @stephen-harrison answer works well. I updated it for v2 of the sdk. I made a couple of tweaks: mainly the connection can now be authorized and the LazyHolder class is no longer static -- I couldn&#39;t figure out how to authorize the connection and still keep the class static.\r\n\r\nFor another approach using Scala, see https://alexwlchan.net/2019/09/streaming-large-s3-objects/\r\n    \r\n        package foo.whatever;\r\n    \r\n        import java.io.IOException;\r\n        import java.io.InputStream;\r\n    \r\n         import software.amazon.awssdk.auth.credentials.AwsBasicCredentials;\r\n         import software.amazon.awssdk.auth.credentials.StaticCredentialsProvider;\r\n         import software.amazon.awssdk.regions.Region;\r\n         import software.amazon.awssdk.services.s3.S3Client;\r\n         import software.amazon.awssdk.services.s3.model.GetObjectRequest;\r\n         import software.amazon.awssdk.services.s3.model.HeadObjectRequest;\r\n         import software.amazon.awssdk.services.s3.model.HeadObjectResponse;\r\n    \r\n        /**\r\n         * Adapted for aws Java sdk v2 by jomofrodo@gmail.com\r\n         * \r\n         * An {@link InputStream} for S3 files that does not care how big the file   is.\r\n         *\r\n         * @author stephen harrison\r\n         */\r\n       public class S3InputStreamV2 extends InputStream {\r\n    \t   private class LazyHolder {\r\n    \t  \t   String appID;\r\n    \t\t   String secretKey;\r\n    \t\t   Region region = Region.US_WEST_1;\r\n    \t\t   public S3Client S3 = null;\r\n    \r\n    \t\t   public void connect() {\r\n    \t\t\t   AwsBasicCredentials awsCreds = AwsBasicCredentials.create(appID, secretKey);\r\n    \t\t\t   S3 =  S3Client.builder().region(region).credentialsProvider(StaticCredentialsProvider.create(awsCreds))\r\n    \t\t\t\t\t.build();\r\n    \t\t   }\r\n    \r\n    \t\tprivate HeadObjectResponse getHead(String keyName, String bucketName) {\r\n    \t\t\tHeadObjectRequest objectRequest = HeadObjectRequest.builder().key(keyName).bucket(bucketName).build();\r\n    \r\n    \t\t\tHeadObjectResponse objectHead = S3.headObject(objectRequest);\r\n    \t\t\treturn objectHead;\r\n    \t\t}\r\n    \r\n    \t\t// public static final AmazonS3 S3 = AmazonS3ClientBuilder.defaultClient();\r\n    \r\n    \t}\r\n    \r\n    \tprivate LazyHolder lazyHolder = new LazyHolder();\r\n    \r\n    \tprivate final String bucket;\r\n    \tprivate final String file;\r\n    \tprivate final byte[] buffer;\r\n    \tprivate long lastByteOffset;\r\n    \r\n    \tprivate long offset = 0;\r\n    \tprivate int next = 0;\r\n    \tprivate int length = 0;\r\n    \r\n    \tpublic S3InputStreamV2(final String bucket, final String file, final byte[] buffer, String appID, String secret) {\r\n    \t\tthis.bucket = bucket;\r\n    \t\tthis.file = file;\r\n    \t\tthis.buffer = buffer;\r\n    \t\tlazyHolder.appID = appID;\r\n    \t\tlazyHolder.secretKey = secret;\r\n    \t\tlazyHolder.connect();\r\n    \t\tthis.lastByteOffset = lazyHolder.getHead(file, bucket).contentLength();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic int read() throws IOException {\r\n    \t\tif (next &gt;= length || (next == buffer.length &amp;&amp; length == buffer.length)) {\r\n    \t\t\tfill();\r\n    \r\n    \t\t\tif (length &lt;= 0) {\r\n    \t\t\t\treturn -1;\r\n    \t\t\t}\r\n    \r\n    \t\t\tnext = 0;\r\n    \t\t}\r\n    \r\n    \t\tif (next &gt;= length) {\r\n    \t\t\treturn -1;\r\n    \t\t}\r\n    \r\n    \t\treturn buffer[this.next++] &amp; 0xFF;\r\n    \t}\r\n    \r\n    \tpublic void fill() throws IOException {\r\n    \t\tif (offset &gt;= lastByteOffset) {\r\n    \t\t\tlength = -1;\r\n    \t\t} else {\r\n    \t\t\ttry (final InputStream inputStream = s3Object()) {\r\n    \t\t\t\tlength = 0;\r\n    \t\t\t\tint b;\r\n    \r\n    \t\t\t\twhile ((b = inputStream.read()) != -1) {\r\n    \t\t\t\t\tbuffer[length++] = (byte) b;\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t\tif (length &gt; 0) {\r\n    \t\t\t\t\toffset += length;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate InputStream s3Object() {\r\n    \t\tfinal Long rangeEnd = offset + buffer.length - 1;\r\n    \t\tfinal String rangeString = &quot;bytes=&quot; + offset + &quot;-&quot; + rangeEnd;\r\n    \t\tfinal GetObjectRequest getObjectRequest = GetObjectRequest.builder().bucket(bucket).key(file).range(rangeString)\r\n    \t\t\t\t.build();\r\n    \r\n    \t\treturn lazyHolder.S3.getObject(getObjectRequest);\r\n    \t}\r\n    }","title":"How to read file chunk by chunk from S3 using aws-java-sdk","body":"<p>The @stephen-harrison answer works well. I updated it for v2 of the sdk. I made a couple of tweaks: mainly the connection can now be authorized and the LazyHolder class is no longer static -- I couldn't figure out how to authorize the connection and still keep the class static.</p>\n<p>For another approach using Scala, see <a href=\"https://alexwlchan.net/2019/09/streaming-large-s3-objects/\" rel=\"nofollow noreferrer\">https://alexwlchan.net/2019/09/streaming-large-s3-objects/</a></p>\n<pre><code>    package foo.whatever;\n\n    import java.io.IOException;\n    import java.io.InputStream;\n\n     import software.amazon.awssdk.auth.credentials.AwsBasicCredentials;\n     import software.amazon.awssdk.auth.credentials.StaticCredentialsProvider;\n     import software.amazon.awssdk.regions.Region;\n     import software.amazon.awssdk.services.s3.S3Client;\n     import software.amazon.awssdk.services.s3.model.GetObjectRequest;\n     import software.amazon.awssdk.services.s3.model.HeadObjectRequest;\n     import software.amazon.awssdk.services.s3.model.HeadObjectResponse;\n\n    /**\n     * Adapted for aws Java sdk v2 by jomofrodo@gmail.com\n     * \n     * An {@link InputStream} for S3 files that does not care how big the file   is.\n     *\n     * @author stephen harrison\n     */\n   public class S3InputStreamV2 extends InputStream {\n       private class LazyHolder {\n           String appID;\n           String secretKey;\n           Region region = Region.US_WEST_1;\n           public S3Client S3 = null;\n\n           public void connect() {\n               AwsBasicCredentials awsCreds = AwsBasicCredentials.create(appID, secretKey);\n               S3 =  S3Client.builder().region(region).credentialsProvider(StaticCredentialsProvider.create(awsCreds))\n                    .build();\n           }\n\n        private HeadObjectResponse getHead(String keyName, String bucketName) {\n            HeadObjectRequest objectRequest = HeadObjectRequest.builder().key(keyName).bucket(bucketName).build();\n\n            HeadObjectResponse objectHead = S3.headObject(objectRequest);\n            return objectHead;\n        }\n\n        // public static final AmazonS3 S3 = AmazonS3ClientBuilder.defaultClient();\n\n    }\n\n    private LazyHolder lazyHolder = new LazyHolder();\n\n    private final String bucket;\n    private final String file;\n    private final byte[] buffer;\n    private long lastByteOffset;\n\n    private long offset = 0;\n    private int next = 0;\n    private int length = 0;\n\n    public S3InputStreamV2(final String bucket, final String file, final byte[] buffer, String appID, String secret) {\n        this.bucket = bucket;\n        this.file = file;\n        this.buffer = buffer;\n        lazyHolder.appID = appID;\n        lazyHolder.secretKey = secret;\n        lazyHolder.connect();\n        this.lastByteOffset = lazyHolder.getHead(file, bucket).contentLength();\n    }\n\n    @Override\n    public int read() throws IOException {\n        if (next &gt;= length || (next == buffer.length &amp;&amp; length == buffer.length)) {\n            fill();\n\n            if (length &lt;= 0) {\n                return -1;\n            }\n\n            next = 0;\n        }\n\n        if (next &gt;= length) {\n            return -1;\n        }\n\n        return buffer[this.next++] &amp; 0xFF;\n    }\n\n    public void fill() throws IOException {\n        if (offset &gt;= lastByteOffset) {\n            length = -1;\n        } else {\n            try (final InputStream inputStream = s3Object()) {\n                length = 0;\n                int b;\n\n                while ((b = inputStream.read()) != -1) {\n                    buffer[length++] = (byte) b;\n                }\n\n                if (length &gt; 0) {\n                    offset += length;\n                }\n            }\n        }\n    }\n\n    private InputStream s3Object() {\n        final Long rangeEnd = offset + buffer.length - 1;\n        final String rangeString = &quot;bytes=&quot; + offset + &quot;-&quot; + rangeEnd;\n        final GetObjectRequest getObjectRequest = GetObjectRequest.builder().bucket(bucket).key(file).range(rangeString)\n                .build();\n\n        return lazyHolder.S3.getObject(getObjectRequest);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1628102,"reputation":3602,"user_id":1503163,"display_name":"Sanjay Bharwani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671028364,"creation_date":1671028364,"answer_id":74799826,"question_id":44389194,"body_markdown":"Got puzzled while we were migrating from AWS Sdk V1 to V2 and realised in V2 SDK its not the same way to define the range\r\n\r\n\r\n**With AWS V1 SDK**\r\n\r\n     S3Object currentS3Obj  = client.getObject(new GetObjectRequest(bucket, key).withRange(start, end));\r\n        return currentS3Obj.getObjectContent();\r\n\r\n**With AWS V2 SDK**\r\n\r\n    var range = String.format(&quot;bytes=%d-%d&quot;, start, end);\r\n    ResponseBytes&lt;GetObjectResponse&gt; currentS3Obj = client.getObjectAsBytes(GetObjectRequest.builder().bucket(bucket).key(key).range(range).build());\r\n        return currentS3Obj.asInputStream();\r\n","title":"How to read file chunk by chunk from S3 using aws-java-sdk","body":"<p>Got puzzled while we were migrating from AWS Sdk V1 to V2 and realised in V2 SDK its not the same way to define the range</p>\n<p><strong>With AWS V1 SDK</strong></p>\n<pre><code> S3Object currentS3Obj  = client.getObject(new GetObjectRequest(bucket, key).withRange(start, end));\n    return currentS3Obj.getObjectContent();\n</code></pre>\n<p><strong>With AWS V2 SDK</strong></p>\n<pre><code>var range = String.format(&quot;bytes=%d-%d&quot;, start, end);\nResponseBytes&lt;GetObjectResponse&gt; currentS3Obj = client.getObjectAsBytes(GetObjectRequest.builder().bucket(bucket).key(key).range(range).build());\n    return currentS3Obj.asInputStream();\n</code></pre>\n"}],"owner":{"account_id":3971754,"reputation":2529,"user_id":3276171,"accept_rate":20,"display_name":"Sky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19442,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":6,"score":9,"last_activity_date":1671028364,"creation_date":1496749579,"question_id":44389194,"body_markdown":"I am trying to  read large file into chunks from S3  without cutting any line for parallel processing. \r\n\r\nLet me explain by example: \r\nThere is file of size 1G on S3. I want to divide this file into chucks of 64 MB. It is easy I can do it like  :\r\n\r\n    S3Object s3object = s3.getObject(new GetObjectRequest(bucketName, key));\r\n    \r\n    InputStream stream = s3object.getObjectContent();\r\n    \r\n    byte[] content = new byte[64*1024*1024];\r\n    \r\n    while (stream.read(content)  != -1) {\r\n    \r\n    //process content here \r\n    \r\n    }\r\n\r\nbut problem with chunk is it may have 100 complete line and one incomplete. but I can not process incomplete line and don&#39;t want to discard it. \r\n\r\nIs any way to handle this situations ? means all chucks have no partial line.\r\n\r\n","title":"How to read file chunk by chunk from S3 using aws-java-sdk","body":"<p>I am trying to  read large file into chunks from S3  without cutting any line for parallel processing. </p>\n\n<p>Let me explain by example: \nThere is file of size 1G on S3. I want to divide this file into chucks of 64 MB. It is easy I can do it like  :</p>\n\n<pre><code>S3Object s3object = s3.getObject(new GetObjectRequest(bucketName, key));\n\nInputStream stream = s3object.getObjectContent();\n\nbyte[] content = new byte[64*1024*1024];\n\nwhile (stream.read(content)  != -1) {\n\n//process content here \n\n}\n</code></pre>\n\n<p>but problem with chunk is it may have 100 complete line and one incomplete. but I can not process incomplete line and don't want to discard it. </p>\n\n<p>Is any way to handle this situations ? means all chucks have no partial line.</p>\n"},{"tags":["java","rabbitmq","rabbitmq-exchange"],"comments":[{"owner":{"account_id":137667,"reputation":2273,"user_id":342013,"display_name":"old_sound"},"score":1,"creation_date":1426266557,"post_id":28988440,"comment_id":46316722,"body_markdown":"If by java RabbitMQ API you mean the Java AMQP client, then no. Bindings can only be listed via the management plugin, or by running rabbitmqctl on the command line. Of course you can write a Java library for querying the HTTP API","body":"If by java RabbitMQ API you mean the Java AMQP client, then no. Bindings can only be listed via the management plugin, or by running rabbitmqctl on the command line. Of course you can write a Java library for querying the HTTP API"},{"owner":{"account_id":3854924,"reputation":345,"user_id":3194124,"accept_rate":80,"display_name":"yenox"},"score":0,"creation_date":1426524913,"post_id":28988440,"comment_id":46398072,"body_markdown":"Yes, that&#39;s what I meant, thank you.","body":"Yes, that&#39;s what I meant, thank you."}],"answers":[{"tags":[],"owner":{"account_id":10124551,"reputation":11,"user_id":7480383,"display_name":"Sugumar T"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671028049,"creation_date":1569591787,"answer_id":58135791,"question_id":28988440,"body_markdown":"`/api/definitions` is the API endpoint to get list of definitions including exchanges, queues, bindings, users, virtual hosts, permissions and parameters. \r\n\r\nhttps://pulse.mozilla.org/api/","title":"List bindings for an exchange with rabbitmq java client API","body":"<p><code>/api/definitions</code> is the API endpoint to get list of definitions including exchanges, queues, bindings, users, virtual hosts, permissions and parameters.</p>\n<p><a href=\"https://pulse.mozilla.org/api/\" rel=\"nofollow noreferrer\">https://pulse.mozilla.org/api/</a></p>\n"}],"owner":{"account_id":3854924,"reputation":345,"user_id":3194124,"accept_rate":80,"display_name":"yenox"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1732,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1671028049,"creation_date":1426081967,"question_id":28988440,"body_markdown":"I can&#39;t seem to find any information in the documentation so I was wondering if it was somehow possible to get all the bindings related to an exchange using the java RabbitMQ API.\r\n\r\nI&#39;m looking for something like the http api result when querying /api/bindings.","title":"List bindings for an exchange with rabbitmq java client API","body":"<p>I can't seem to find any information in the documentation so I was wondering if it was somehow possible to get all the bindings related to an exchange using the java RabbitMQ API.</p>\n\n<p>I'm looking for something like the http api result when querying /api/bindings.</p>\n"},{"tags":["java","object","assign"],"comments":[{"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"score":1,"creation_date":1633793920,"post_id":69507466,"comment_id":122857684,"body_markdown":"The thing gets nasty when the attributes are allowed to be something else than primitives. Ok, Strings are also not difficult, as they are immutable (and other immutable types are likely simple to handle). But for attributes of other types, it has to be decided first whether a deep copy is required or not. In case of a deep copy, the same considerations has to be made as for the original class. At the very end, only very simple classes would benefit from that &quot;clean replacement&quot; way.","body":"The thing gets nasty when the attributes are allowed to be something else than primitives. Ok, Strings are also not difficult, as they are immutable (and other immutable types are likely simple to handle). But for attributes of other types, it has to be decided first whether a deep copy is required or not. In case of a deep copy, the same considerations has to be made as for the original class. At the very end, only very simple classes would benefit from that &quot;clean replacement&quot; way."}],"answers":[{"tags":[],"owner":{"account_id":1546031,"reputation":1931,"user_id":1439560,"display_name":"Huy Nguyen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633790180,"creation_date":1633790180,"answer_id":69507692,"question_id":69507466,"body_markdown":"With traditional way, it&#39;s quite wordy but we can confident the copy attributes.\r\n\r\n    public Student copyFrom(Student student)\r\n    public void copyFrom(Student student)\r\n\r\nOther way, Use reflections to copy the values... \r\nBut we have few strange problems sometimes ... with complex objects such as Map/List and other structures.\r\nPlease carefully when using...\r\nHere is current signature which i used in my projects.\r\n\r\n\r\n  \r\n\r\n    public void copyFrom(Object src, List&lt;String&gt; excludes) {\r\n        final List&lt;String&gt; excFields = excludes;\r\n        ReflectionUtils.doWithFields(src.getClass(), fieldCallback-&gt; {});\r\n        ....\r\n      }\r\n\r\nHere is few basic methods to do with reflection. I used ReflectionUtils which is built-in in spring, you can write one or use other library...\r\n\r\n    Field field= ReflectionUtils.findField(cls, fieldName);\r\n    Method m = ReflectionUtils.findMethod(cls, fieldName);\r\n    field.set(this,value)","title":"Is there a &quot;clean&quot; way to replace all attribute values of an object in Java with values from another object of the same type?","body":"<p>With traditional way, it's quite wordy but we can confident the copy attributes.</p>\n<pre><code>public Student copyFrom(Student student)\npublic void copyFrom(Student student)\n</code></pre>\n<p>Other way, Use reflections to copy the values...\nBut we have few strange problems sometimes ... with complex objects such as Map/List and other structures.\nPlease carefully when using...\nHere is current signature which i used in my projects.</p>\n<pre><code>public void copyFrom(Object src, List&lt;String&gt; excludes) {\n    final List&lt;String&gt; excFields = excludes;\n    ReflectionUtils.doWithFields(src.getClass(), fieldCallback-&gt; {});\n    ....\n  }\n</code></pre>\n<p>Here is few basic methods to do with reflection. I used ReflectionUtils which is built-in in spring, you can write one or use other library...</p>\n<pre><code>Field field= ReflectionUtils.findField(cls, fieldName);\nMethod m = ReflectionUtils.findMethod(cls, fieldName);\nfield.set(this,value)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10389194,"reputation":14819,"user_id":7661119,"display_name":"Ervin Szilagyi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1633793271,"creation_date":1633793271,"answer_id":69508122,"question_id":69507466,"body_markdown":"For mapping between two Java objects you can use something like [MapStruct](https://mapstruct.org/) or you can write your own mappers, essentially extracting the boilerplate code into a separate class/service.\r\n\r\nIf you decide to create your own mapper, you can use [reflection](https://www.oracle.com/technical-resources/articles/java/javareflection.html) or you can do it by using `setter` methods or builder pattern (also Lombok&#39;s `@Builder` can help avoiding to write the boilerplate for  builder pattern).\r\n\r\n&gt; ...now lets hypothetically say our project grew a lot and we have to add 20 more attributes to our Student class. Suddenly we have to update this method manually as well as any other method that does a similar thing. \r\n\r\nCertainly your entities and consequently your databases can grow in the number of fields/columns, but this in general should not be as big of a deal if you extract all the mappings and transformations in different classes. In most of the cases you will have to update a subset of the fields anyway.\r\n","title":"Is there a &quot;clean&quot; way to replace all attribute values of an object in Java with values from another object of the same type?","body":"<p>For mapping between two Java objects you can use something like <a href=\"https://mapstruct.org/\" rel=\"nofollow noreferrer\">MapStruct</a> or you can write your own mappers, essentially extracting the boilerplate code into a separate class/service.</p>\n<p>If you decide to create your own mapper, you can use <a href=\"https://www.oracle.com/technical-resources/articles/java/javareflection.html\" rel=\"nofollow noreferrer\">reflection</a> or you can do it by using <code>setter</code> methods or builder pattern (also Lombok's <code>@Builder</code> can help avoiding to write the boilerplate for  builder pattern).</p>\n<blockquote>\n<p>...now lets hypothetically say our project grew a lot and we have to add 20 more attributes to our Student class. Suddenly we have to update this method manually as well as any other method that does a similar thing.</p>\n</blockquote>\n<p>Certainly your entities and consequently your databases can grow in the number of fields/columns, but this in general should not be as big of a deal if you extract all the mappings and transformations in different classes. In most of the cases you will have to update a subset of the fields anyway.</p>\n"},{"tags":[],"owner":{"account_id":3130088,"reputation":43207,"user_id":2648077,"accept_rate":80,"display_name":"Alireza Fattahi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671027838,"creation_date":1671027838,"answer_id":74799721,"question_id":69507466,"body_markdown":"I `usally` use `BeanUtils` which is found in `springframework`\r\n\r\n    public static void copyBean(Object sourceBean, Object targetBean) {\r\n    \r\n    \ttry {\r\n    \t\torg.springframework.beans.BeanUtils.copyProperties(sourceBean,\r\n    \t\t\t\ttargetBean);\r\n    \t} catch (Exception e) {\r\n    \t\tLOG.trace(&quot;exception ocurred in copying bean&quot;, e);\r\n    \t}\r\n    \r\n    }\r\n\r\n    copyBean(obj1,obg2)\r\n\r\nThere is another project in apache named `commons-beanutils` which can do this too.\r\n\r\nFor properties which have same name, these `copies` try to do their best to convert properties . But if they fail you should do it manually.\r\n\r\nSome times we you can do it like this.\r\n\r\n    //call this copy to make all same and well formed properties copied\r\n    copyBean(obj1,obj2);\r\n    \r\n    //now manually set the rest of properties which have different names or mismatch types\r\n    obj2.setFoo (  obj1.getBar() );\r\n    ....\r\n","title":"Is there a &quot;clean&quot; way to replace all attribute values of an object in Java with values from another object of the same type?","body":"<p>I <code>usally</code> use <code>BeanUtils</code> which is found in <code>springframework</code></p>\n<pre><code>public static void copyBean(Object sourceBean, Object targetBean) {\n\n    try {\n        org.springframework.beans.BeanUtils.copyProperties(sourceBean,\n                targetBean);\n    } catch (Exception e) {\n        LOG.trace(&quot;exception ocurred in copying bean&quot;, e);\n    }\n\n}\n\ncopyBean(obj1,obg2)\n</code></pre>\n<p>There is another project in apache named <code>commons-beanutils</code> which can do this too.</p>\n<p>For properties which have same name, these <code>copies</code> try to do their best to convert properties . But if they fail you should do it manually.</p>\n<p>Some times we you can do it like this.</p>\n<pre><code>//call this copy to make all same and well formed properties copied\ncopyBean(obj1,obj2);\n\n//now manually set the rest of properties which have different names or mismatch types\nobj2.setFoo (  obj1.getBar() );\n....\n</code></pre>\n"}],"owner":{"account_id":20899679,"reputation":13,"user_id":15353070,"display_name":"MegaKruk"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1231,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69508122,"answer_count":3,"score":1,"last_activity_date":1671027838,"creation_date":1633788504,"question_id":69507466,"body_markdown":"A quick explanation first.\r\nLet&#39;s say we have a method which takes a Student object and an Id as attributes and updates student with given Id with information contained in passed object. So far the easiest solution I&#39;ve found is as follows: \r\n1. We search our repository looking for student that we want to update.\r\n2. Should we find it we then use setters in order to set the new values.\r\n```\r\n    public void updateStudent(Long id, Student newStudent) {\r\n        Student studentToBeUpdated = studentRepo\r\n                .findStudentById(id)\r\n                .orElseThrow(() -&gt;\r\n                        new UserNotFoundException(&quot;Student with id &quot; + id + &quot; was not found&quot;));\r\n        studentToBeUpdated.setFirstName(newStudent.getFirstName());\r\n        studentToBeUpdated.setLastName(newStudent.getLastName());\r\n        studentToBeUpdated.setEmail(newStudent.getEmail());\r\n    }\r\n```\r\nSo, job well done, we can go home, right?\r\nWell, now lets hypothetically say our project grew a lot and we have to add 20 more attributes to our Student class. Suddenly we have to update this method manually as well as any other method that does a similar thing. Not good. Also we just created some boilerplate code which is bad. \r\n\r\nWhat I&#39;m really looking for is a way to do all this without thinking about how many attributes our Student class has or what these attributes are, even if they are themselves enums, arrays or even other objects. What I&#39;d like is something like this: \r\n```\r\nstudentToBeUpdated.replace(newStudent);\r\n```\r\nIs this possible or is it just my wishful thinking? The next best thing would probably be creating a method that would do all this by myself but it&#39;s still not a perfect solution because it would also have to be edited every time class attributes change.","title":"Is there a &quot;clean&quot; way to replace all attribute values of an object in Java with values from another object of the same type?","body":"<p>A quick explanation first.\nLet's say we have a method which takes a Student object and an Id as attributes and updates student with given Id with information contained in passed object. So far the easiest solution I've found is as follows:</p>\n<ol>\n<li>We search our repository looking for student that we want to update.</li>\n<li>Should we find it we then use setters in order to set the new values.</li>\n</ol>\n<pre><code>    public void updateStudent(Long id, Student newStudent) {\n        Student studentToBeUpdated = studentRepo\n                .findStudentById(id)\n                .orElseThrow(() -&gt;\n                        new UserNotFoundException(&quot;Student with id &quot; + id + &quot; was not found&quot;));\n        studentToBeUpdated.setFirstName(newStudent.getFirstName());\n        studentToBeUpdated.setLastName(newStudent.getLastName());\n        studentToBeUpdated.setEmail(newStudent.getEmail());\n    }\n</code></pre>\n<p>So, job well done, we can go home, right?\nWell, now lets hypothetically say our project grew a lot and we have to add 20 more attributes to our Student class. Suddenly we have to update this method manually as well as any other method that does a similar thing. Not good. Also we just created some boilerplate code which is bad.</p>\n<p>What I'm really looking for is a way to do all this without thinking about how many attributes our Student class has or what these attributes are, even if they are themselves enums, arrays or even other objects. What I'd like is something like this:</p>\n<pre><code>studentToBeUpdated.replace(newStudent);\n</code></pre>\n<p>Is this possible or is it just my wishful thinking? The next best thing would probably be creating a method that would do all this by myself but it's still not a perfect solution because it would also have to be edited every time class attributes change.</p>\n"},{"tags":["java","maven","maven-3","pom.xml","maven-plugin"],"comments":[{"owner":{"account_id":10594606,"reputation":3598,"user_id":7803797,"display_name":"Chaitanya"},"score":0,"creation_date":1671027852,"post_id":74799680,"comment_id":132008782,"body_markdown":"There is no maven classifier for POM packaging.","body":"There is no maven classifier for POM packaging."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1671033542,"post_id":74799680,"comment_id":132011152,"body_markdown":"The type is simply `pom`... why do you use classifiers?","body":"The type is simply <code>pom</code>... why do you use classifiers?"},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1671045772,"post_id":74799680,"comment_id":132015290,"body_markdown":"No. What is your use case?","body":"No. What is your use case?"}],"owner":{"account_id":6367122,"reputation":1369,"user_id":4940780,"accept_rate":86,"display_name":"Antho Christen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671027666,"creation_date":1671027666,"question_id":74799680,"body_markdown":"Today Maven allows the creations of various versions of a JAR using the classifier option of Maven JAR plugin. Just want to know if there&#39;s any plugins to do the same for POM packaging? So that I can have multiple versions of the same POM artefacts distinguished by classifiers.\r\n","title":"Add mvn classifier for POM packaging","body":"<p>Today Maven allows the creations of various versions of a JAR using the classifier option of Maven JAR plugin. Just want to know if there's any plugins to do the same for POM packaging? So that I can have multiple versions of the same POM artefacts distinguished by classifiers.</p>\n"},{"tags":["java","docker","proxy","httpsurlconnection"],"owner":{"account_id":2099421,"reputation":21,"user_id":1867460,"display_name":"ucf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671027522,"creation_date":1670952292,"question_id":74788692,"body_markdown":"I&#39;m trying to download file form AWS S3 with Java application on Docker container.\r\n\r\nThe application works perfectly without Docker but on a docker container i have error : java.io.IOException: Unable to tunnel through proxy. Proxy returns &quot;HTTP/1.1 407 authenticationrequired&quot;\r\n\r\nAll tests are done behind the same proxy with authentication\r\n\r\nif URL is Amazon S3 and running without container : it work\r\n\r\nif URL is not Amazon S3 and running without container : it work\r\n\r\nif URL is Amazon S3 and running on docker container : it doesn’t work\r\n\r\nif URL is not Amazon S3 and running on docker container : it work\r\n\r\nAll URLs arereached with WGET from the docker container without problem:\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n            System.setProperty(&quot;https.proxyHost&quot;, &quot;host&quot;);\r\n            System.setProperty(&quot;https.proxyPort&quot;, &quot;port&quot;);\r\n            System.setProperty(&quot;https.proxyUser&quot;, &quot;user&quot;);\r\n            System.setProperty(&quot;https.proxyPassword&quot;,&quot;password&quot;);\r\n\r\n            String url = &quot;https://exampl.com/url&quot;;\r\n            HttpsURLConnection cnx = (HttpsURLConnection) new URL(url).openConnection();\r\n            InputStream inputStream = cnx.getInputStream();\r\n            OutputStream outputStream = new FileOutputStream(&quot;file&quot;);\r\n\r\n            byte[] buffer = new byte[2048];\r\n\r\n            int length;\r\n\r\n            while ((length = inputStream.read(buffer)) != -1) {\r\n                outputStream.write(buffer, 0, length);\r\n            }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\ndo you have please any idea ?\r\nThank you\r\n\r\n","title":"HttpsURLConnection does not work behind proxy with docker","body":"<p>I'm trying to download file form AWS S3 with Java application on Docker container.</p>\n<p>The application works perfectly without Docker but on a docker container i have error : java.io.IOException: Unable to tunnel through proxy. Proxy returns &quot;HTTP/1.1 407 authenticationrequired&quot;</p>\n<p>All tests are done behind the same proxy with authentication</p>\n<p>if URL is Amazon S3 and running without container : it work</p>\n<p>if URL is not Amazon S3 and running without container : it work</p>\n<p>if URL is Amazon S3 and running on docker container : it doesn’t work</p>\n<p>if URL is not Amazon S3 and running on docker container : it work</p>\n<p>All URLs arereached with WGET from the docker container without problem:</p>\n<pre class=\"lang-js prettyprint-override\"><code>        System.setProperty(&quot;https.proxyHost&quot;, &quot;host&quot;);\n        System.setProperty(&quot;https.proxyPort&quot;, &quot;port&quot;);\n        System.setProperty(&quot;https.proxyUser&quot;, &quot;user&quot;);\n        System.setProperty(&quot;https.proxyPassword&quot;,&quot;password&quot;);\n\n        String url = &quot;https://exampl.com/url&quot;;\n        HttpsURLConnection cnx = (HttpsURLConnection) new URL(url).openConnection();\n        InputStream inputStream = cnx.getInputStream();\n        OutputStream outputStream = new FileOutputStream(&quot;file&quot;);\n\n        byte[] buffer = new byte[2048];\n\n        int length;\n\n        while ((length = inputStream.read(buffer)) != -1) {\n            outputStream.write(buffer, 0, length);\n        }\n</code></pre>\n\n<p>do you have please any idea ?\nThank you</p>\n"},{"tags":["java","android","android-viewpager2"],"comments":[{"owner":{"account_id":19715420,"reputation":8505,"user_id":14434976,"display_name":"MariosP"},"score":0,"creation_date":1671121287,"post_id":74799582,"comment_id":132034892,"body_markdown":"Try to remove the `android:fitsSystemWindows=&quot;true&quot;` from the ConstraintLayout in your fragment layout and check again.","body":"Try to remove the <code>android:fitsSystemWindows=&quot;true&quot;</code> from the ConstraintLayout in your fragment layout and check again."},{"owner":{"account_id":5454353,"reputation":718,"user_id":4338278,"accept_rate":67,"display_name":"Avinta"},"score":0,"creation_date":1671125041,"post_id":74799582,"comment_id":132036172,"body_markdown":"This indeed works...but if I remove this. My EditText (that is on the same fragment) will stay hidden behind the keyboard when I try to enter text. So I need the fitsSystemWindows flag for the keyboard to work properly, but with it i have the weired margin. Ideas how to remove it?","body":"This indeed works...but if I remove this. My EditText (that is on the same fragment) will stay hidden behind the keyboard when I try to enter text. So I need the fitsSystemWindows flag for the keyboard to work properly, but with it i have the weired margin. Ideas how to remove it?"},{"owner":{"account_id":955055,"reputation":3960,"user_id":980521,"display_name":"ecle"},"score":0,"creation_date":1671139746,"post_id":74799582,"comment_id":132040724,"body_markdown":"what is ***android:layout_weight*** for?","body":"what is <b><i>android:layout_weight</i></b> for?"},{"owner":{"account_id":19715420,"reputation":8505,"user_id":14434976,"display_name":"MariosP"},"score":0,"creation_date":1671174143,"post_id":74799582,"comment_id":132046252,"body_markdown":"@Avinta Try to remove the `android:fitsSystemWindows=&quot;true&quot;` from your fragment and add it into the root-LinearLayout of your Activity so to consume the window insets there. If that doesn&#39;t work try to completely remove the `android:fitsSystemWindows=&quot;true&quot;` and  declare the `android:windowSoftInputMode=&quot;adjustResize&quot;` into your Activity manifest file to solve the keyboard issue.","body":"@Avinta Try to remove the <code>android:fitsSystemWindows=&quot;true&quot;</code> from your fragment and add it into the root-LinearLayout of your Activity so to consume the window insets there. If that doesn&#39;t work try to completely remove the <code>android:fitsSystemWindows=&quot;true&quot;</code> and  declare the <code>android:windowSoftInputMode=&quot;adjustResize&quot;</code> into your Activity manifest file to solve the keyboard issue."}],"owner":{"account_id":5454353,"reputation":718,"user_id":4338278,"accept_rate":67,"display_name":"Avinta"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671027486,"creation_date":1671027139,"question_id":74799582,"body_markdown":"I have a TabLayout with a ViewPager2 attached. \r\nI attach my fragments to it like normal but I have an odd behaviour.\r\n\r\n[![To much top margin][1]][1]\r\n\r\nBetween the TabLayout and the TextView there is some kind of gap although my Textview **should be** in the very top left corner. I cannot figure out where this extra margin is coming from (It does not matter what kind of view I place into the fragment it seems the whole fragment is shifted down (But the actual background of my fragment covers the entire ViewPager area)\r\n\r\nThis is the code for the viewPager und TabLayout.\r\n\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:orientation=&quot;vertical&quot;&gt;\r\n\r\n    &lt;com.google.android.material.tabs.TabLayout\r\n        android:id=&quot;@+id/tab_layout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:background=&quot;@android:color/transparent&quot;\r\n        tools:background=&quot;?attr/colorPrimary&quot;\r\n        app:tabGravity=&quot;fill&quot;\r\n        app:tabIndicatorColor=&quot;?attr/colorSecondary&quot;\r\n        app:tabIndicatorFullWidth=&quot;false&quot;\r\n        app:tabIndicatorHeight=&quot;3dp&quot;\r\n        app:tabMinWidth=&quot;48dp&quot;\r\n        app:tabMode=&quot;fixed&quot;\r\n        app:tabSelectedTextColor=&quot;?attr/colorOnPrimary&quot;\r\n        app:tabTextAppearance=&quot;@style/App.Tab.Text&quot;\r\n        app:tabTextColor=&quot;?attr/colorPrimaryLight&quot;/&gt;\r\n\r\n    &lt;androidx.viewpager2.widget.ViewPager2\r\n        android:id=&quot;@+id/view_pager&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:background=&quot;@color/lightRed&quot;\r\n        android:layout_height=&quot;0dp&quot;\r\n        android:layout_weight=&quot;1&quot; /&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\nI only added the background color to see which view is &quot;below&quot; the margin\r\n\r\nThis is the code for the fragment.\r\n\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout \r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:background=&quot;@color/lightOrange&quot;\r\n    android:fitsSystemWindows=&quot;true&quot;&gt;\r\n\r\n    &lt;TextView\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;NO MARGIN TOP LEFT&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n\r\n\r\nWhere does my margin come from? It drives me nuts. I do not change margins inside the code whatsoever. \r\n\r\nI use a custom FragmentStateAdapter which might be the culprit? On a sidenot the first click on a tab after the app opens will not switch the page, I could not make this work yet any idea why?\r\n\r\nHere is the Adapter I use:\r\n\r\n    public class TabAdapter extends FragmentStateAdapter {\r\n    private static final String TAG = &quot;TabAdapter&quot;;\r\n    private final List&lt;TabFragment&gt; mFragments;\r\n    private final String prefix;\r\n    private final ViewPager2 mViewPager;\r\n    private final TabLayout mTabLayout;\r\n    private final OnPageChangeCallback callback;\r\n\r\n\r\n    public interface OnPageChangeCallback {\r\n        void onPageSelected(int position);\r\n    }\r\n\r\n    public TabAdapter(BaseFragment fragment, TabLayout tabLayout, ViewPager2 viewPager, TabFragment... fragments) {\r\n        this(fragment, tabLayout, viewPager, Arrays.asList(fragments), null);\r\n    }\r\n\r\n    public TabAdapter(BaseFragment fragment, TabLayout tabLayout, ViewPager2 viewPager, List&lt;TabFragment&gt; fragments) {\r\n        this(fragment, tabLayout, viewPager, fragments, null);\r\n    }\r\n\r\n    public TabAdapter(BaseFragment fragment, TabLayout tabLayout, ViewPager2 viewPager, List&lt;TabFragment&gt; fragments, OnPageChangeCallback listener) {\r\n        super(fragment);\r\n        this.mFragments = fragments;\r\n        this.prefix = fragment.TAG;\r\n        this.mViewPager = viewPager;\r\n        this.mTabLayout = tabLayout;\r\n        this.callback = listener;\r\n        initTabLayout();\r\n    \r\n    }\r\n\r\n    @Override\r\n    @NonNull\r\n    public BaseFragment&lt;?&gt; createFragment(int position) {\r\n        return mFragments.get(position).getFragment();\r\n    }\r\n\r\n    @Override\r\n    public long getItemId(int position) {\r\n        return Objects.hash(mFragments.get(position));\r\n    }\r\n\r\n    @Override\r\n    public boolean containsItem(long itemId) {\r\n        for (TabFragment fragment : mFragments) {\r\n            if (Objects.hash(fragment) == itemId) return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return mFragments.size();\r\n    }\r\n\r\n    private void initTabLayout() {\r\n        mViewPager.setAdapter(this);\r\n        mViewPager.registerOnPageChangeCallback(new ViewPager2.OnPageChangeCallback() {\r\n            @Override\r\n            public void onPageSelected(int position) {\r\n                super.onPageSelected(position);\r\n           \r\n                if (callback != null) callback.onPageSelected(position);\r\n                TabStateProvider.saveTab(prefix, position);\r\n            }\r\n        });\r\n        int startTab = TabStateProvider.getTab(prefix, false, 0);\r\n   \r\n        new TabLayoutMediator(mTabLayout, mViewPager, (tab, position) -&gt; {\r\n            tab.setText(mFragments.get(position).getTabTitle());\r\n        }).attach();\r\n\r\n        selectPage(startTab);\r\n\r\n    }\r\n\r\n    void selectPage(int pageIndex) {\r\n        mViewPager.post(() -&gt; {\r\n            mViewPager.setCurrentItem(pageIndex, false);\r\n        });\r\n    }\r\n\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vlFZP.png","title":"Unwanted top margin when using ViewPager2 with TabLayout","body":"<p>I have a TabLayout with a ViewPager2 attached.\nI attach my fragments to it like normal but I have an odd behaviour.</p>\n<p><a href=\"https://i.stack.imgur.com/vlFZP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vlFZP.png\" alt=\"To much top margin\" /></a></p>\n<p>Between the TabLayout and the TextView there is some kind of gap although my Textview <strong>should be</strong> in the very top left corner. I cannot figure out where this extra margin is coming from (It does not matter what kind of view I place into the fragment it seems the whole fragment is shifted down (But the actual background of my fragment covers the entire ViewPager area)</p>\n<p>This is the code for the viewPager und TabLayout.</p>\n<pre><code>&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;&gt;\n\n&lt;com.google.android.material.tabs.TabLayout\n    android:id=&quot;@+id/tab_layout&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:background=&quot;@android:color/transparent&quot;\n    tools:background=&quot;?attr/colorPrimary&quot;\n    app:tabGravity=&quot;fill&quot;\n    app:tabIndicatorColor=&quot;?attr/colorSecondary&quot;\n    app:tabIndicatorFullWidth=&quot;false&quot;\n    app:tabIndicatorHeight=&quot;3dp&quot;\n    app:tabMinWidth=&quot;48dp&quot;\n    app:tabMode=&quot;fixed&quot;\n    app:tabSelectedTextColor=&quot;?attr/colorOnPrimary&quot;\n    app:tabTextAppearance=&quot;@style/App.Tab.Text&quot;\n    app:tabTextColor=&quot;?attr/colorPrimaryLight&quot;/&gt;\n\n&lt;androidx.viewpager2.widget.ViewPager2\n    android:id=&quot;@+id/view_pager&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:background=&quot;@color/lightRed&quot;\n    android:layout_height=&quot;0dp&quot;\n    android:layout_weight=&quot;1&quot; /&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>I only added the background color to see which view is &quot;below&quot; the margin</p>\n<p>This is the code for the fragment.</p>\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout \nxmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;match_parent&quot;\nandroid:background=&quot;@color/lightOrange&quot;\nandroid:fitsSystemWindows=&quot;true&quot;&gt;\n\n&lt;TextView\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:text=&quot;NO MARGIN TOP LEFT&quot;\n    app:layout_constraintStart_toStartOf=&quot;parent&quot;\n    app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>Where does my margin come from? It drives me nuts. I do not change margins inside the code whatsoever.</p>\n<p>I use a custom FragmentStateAdapter which might be the culprit? On a sidenot the first click on a tab after the app opens will not switch the page, I could not make this work yet any idea why?</p>\n<p>Here is the Adapter I use:</p>\n<pre><code>public class TabAdapter extends FragmentStateAdapter {\nprivate static final String TAG = &quot;TabAdapter&quot;;\nprivate final List&lt;TabFragment&gt; mFragments;\nprivate final String prefix;\nprivate final ViewPager2 mViewPager;\nprivate final TabLayout mTabLayout;\nprivate final OnPageChangeCallback callback;\n\n\npublic interface OnPageChangeCallback {\n    void onPageSelected(int position);\n}\n\npublic TabAdapter(BaseFragment fragment, TabLayout tabLayout, ViewPager2 viewPager, TabFragment... fragments) {\n    this(fragment, tabLayout, viewPager, Arrays.asList(fragments), null);\n}\n\npublic TabAdapter(BaseFragment fragment, TabLayout tabLayout, ViewPager2 viewPager, List&lt;TabFragment&gt; fragments) {\n    this(fragment, tabLayout, viewPager, fragments, null);\n}\n\npublic TabAdapter(BaseFragment fragment, TabLayout tabLayout, ViewPager2 viewPager, List&lt;TabFragment&gt; fragments, OnPageChangeCallback listener) {\n    super(fragment);\n    this.mFragments = fragments;\n    this.prefix = fragment.TAG;\n    this.mViewPager = viewPager;\n    this.mTabLayout = tabLayout;\n    this.callback = listener;\n    initTabLayout();\n\n}\n\n@Override\n@NonNull\npublic BaseFragment&lt;?&gt; createFragment(int position) {\n    return mFragments.get(position).getFragment();\n}\n\n@Override\npublic long getItemId(int position) {\n    return Objects.hash(mFragments.get(position));\n}\n\n@Override\npublic boolean containsItem(long itemId) {\n    for (TabFragment fragment : mFragments) {\n        if (Objects.hash(fragment) == itemId) return true;\n    }\n    return false;\n}\n\n@Override\npublic int getItemCount() {\n    return mFragments.size();\n}\n\nprivate void initTabLayout() {\n    mViewPager.setAdapter(this);\n    mViewPager.registerOnPageChangeCallback(new ViewPager2.OnPageChangeCallback() {\n        @Override\n        public void onPageSelected(int position) {\n            super.onPageSelected(position);\n       \n            if (callback != null) callback.onPageSelected(position);\n            TabStateProvider.saveTab(prefix, position);\n        }\n    });\n    int startTab = TabStateProvider.getTab(prefix, false, 0);\n\n    new TabLayoutMediator(mTabLayout, mViewPager, (tab, position) -&gt; {\n        tab.setText(mFragments.get(position).getTabTitle());\n    }).attach();\n\n    selectPage(startTab);\n\n}\n\nvoid selectPage(int pageIndex) {\n    mViewPager.post(() -&gt; {\n        mViewPager.setCurrentItem(pageIndex, false);\n    });\n}\n\n}\n</code></pre>\n"},{"tags":["java","spring-boot","log4j2"],"comments":[{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":2,"creation_date":1670840566,"post_id":74769375,"comment_id":131958271,"body_markdown":"Check the [`ThreadContext` documentation](https://logging.apache.org/log4j/2.x/manual/thread-context.html).","body":"Check the <a href=\"https://logging.apache.org/log4j/2.x/manual/thread-context.html\" rel=\"nofollow noreferrer\"><code>ThreadContext</code> documentation</a>."},{"owner":{"account_id":7788702,"reputation":836,"user_id":5892518,"display_name":"Harsh"},"score":1,"creation_date":1670841324,"post_id":74769375,"comment_id":131958505,"body_markdown":"Can you try exploring Sleuth or some other logging framework ?","body":"Can you try exploring Sleuth or some other logging framework ?"}],"answers":[{"tags":[],"owner":{"account_id":2402802,"reputation":1973,"user_id":3651739,"accept_rate":90,"display_name":"Jishnu Prathap"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671027211,"creation_date":1671027211,"answer_id":74799598,"question_id":74769375,"body_markdown":"I was able to acheive this using [ThreadContext][1]. I added the tracking number to ThreadContext map with key `TID` in the beginning of controller.\r\n\r\n\t\tThreadContext.put(&quot;TID&quot;,trackingid);\r\n\r\nand just before returning response entity I am clearing ThreadContext map `ThreadContext.clear();`\r\n\r\nand used `%X{TID}` pattern in the `log4j2.xml` to look up the ThreadContext.\r\n\r\n    &lt;Property name=&quot;LOG_PATTERN&quot;&gt;\r\n       %d{yyyy-MM-dd HH:mm:ss}{GMT+3} %-5p %c{10}:%L TrackID: %X{TID} - %m%n\r\n    &lt;/Property&gt;\r\n\r\nNow all the logs have track id data.\r\n\r\nThank you [Piotr P Karwasz][2] for pointing to ThreadContext solution.\r\n\r\n\r\n  [1]: https://logging.apache.org/log4j/2.x/manual/thread-context.html?force_isolation=true\r\n  [2]: https://stackoverflow.com/users/11748454/piotr-p-karwasz?force_isolation=true","title":"How to add request header parameter as a lookup variable in log4j for spring boot microservice?","body":"<p>I was able to acheive this using <a href=\"https://logging.apache.org/log4j/2.x/manual/thread-context.html?force_isolation=true\" rel=\"nofollow noreferrer\">ThreadContext</a>. I added the tracking number to ThreadContext map with key <code>TID</code> in the beginning of controller.</p>\n<pre><code>    ThreadContext.put(&quot;TID&quot;,trackingid);\n</code></pre>\n<p>and just before returning response entity I am clearing ThreadContext map <code>ThreadContext.clear();</code></p>\n<p>and used <code>%X{TID}</code> pattern in the <code>log4j2.xml</code> to look up the ThreadContext.</p>\n<pre><code>&lt;Property name=&quot;LOG_PATTERN&quot;&gt;\n   %d{yyyy-MM-dd HH:mm:ss}{GMT+3} %-5p %c{10}:%L TrackID: %X{TID} - %m%n\n&lt;/Property&gt;\n</code></pre>\n<p>Now all the logs have track id data.</p>\n<p>Thank you <a href=\"https://stackoverflow.com/users/11748454/piotr-p-karwasz?force_isolation=true\">Piotr P Karwasz</a> for pointing to ThreadContext solution.</p>\n"}],"owner":{"account_id":2402802,"reputation":1973,"user_id":3651739,"accept_rate":90,"display_name":"Jishnu Prathap"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":536,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74799598,"answer_count":1,"score":1,"last_activity_date":1671027211,"creation_date":1670839219,"question_id":74769375,"body_markdown":"I am building a microservice using `Spring Boot` with multiple rest endpoints. Each request has a header named `track_number` with a unique value for each request. I am using log4j2.xml to set configuration of logging. and use `lombok` to initialize log in each class.\r\n\r\n**Code Flow :**&lt;BR&gt;\r\n*Controller-&gt;Service-&gt;Repo/Other*\r\n\r\nI am getting the `track_number` in controller, I would like to have `track_number` in logs of Service and other mapper class each time I log. One way to achieve this is to pass `track_number` as parameter to all the methods where I am logging. \r\n\r\nIs there a more cleaner way to achieve this? is it possible to create a log4j look up parameter for track number? Thank you in advance for your help.\r\n\r\n\r\n","title":"How to add request header parameter as a lookup variable in log4j for spring boot microservice?","body":"<p>I am building a microservice using <code>Spring Boot</code> with multiple rest endpoints. Each request has a header named <code>track_number</code> with a unique value for each request. I am using log4j2.xml to set configuration of logging. and use <code>lombok</code> to initialize log in each class.</p>\n<p><strong>Code Flow :</strong><BR>\n<em>Controller-&gt;Service-&gt;Repo/Other</em></p>\n<p>I am getting the <code>track_number</code> in controller, I would like to have <code>track_number</code> in logs of Service and other mapper class each time I log. One way to achieve this is to pass <code>track_number</code> as parameter to all the methods where I am logging.</p>\n<p>Is there a more cleaner way to achieve this? is it possible to create a log4j look up parameter for track number? Thank you in advance for your help.</p>\n"},{"tags":["java","class","methods","return","return-value"],"comments":[{"owner":{"account_id":2563377,"reputation":7174,"user_id":2224047,"display_name":"Nikolai  Shevchenko"},"score":2,"creation_date":1671014458,"post_id":74796830,"comment_id":132003904,"body_markdown":"It&#39;s not returning a class, it&#39;s returning an instance of a class. Returning a class would be `public Class&lt;Bird&gt; bird() { ... }`","body":"It&#39;s not returning a class, it&#39;s returning an instance of a class. Returning a class would be <code>public Class&lt;Bird&gt; bird() { ... }</code>"},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1671014762,"post_id":74796830,"comment_id":132004014,"body_markdown":"Well, as it&#39;s currently written, it&#39;s not going to work. You return null, i.e. nothing.","body":"Well, as it&#39;s currently written, it&#39;s not going to work. You return null, i.e. nothing."},{"owner":{"account_id":26777214,"reputation":25,"user_id":20372657,"display_name":"Lukas"},"score":0,"creation_date":1671014800,"post_id":74796830,"comment_id":132004029,"body_markdown":"Why return instance of class?","body":"Why return instance of class?"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1671014862,"post_id":74796830,"comment_id":132004048,"body_markdown":"Lets assume you have a class `Person` and that person has a child that is also a `Person`. What should `Person getChild()` do if not return the child?","body":"Lets assume you have a class <code>Person</code> and that person has a child that is also a <code>Person</code>. What should <code>Person getChild()</code> do if not return the child?"},{"owner":{"account_id":26777214,"reputation":25,"user_id":20372657,"display_name":"Lukas"},"score":0,"creation_date":1671015228,"post_id":74796830,"comment_id":132004174,"body_markdown":"some pratical use case ?","body":"some pratical use case ?"},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1671015365,"post_id":74796830,"comment_id":132004220,"body_markdown":"It&#39;s like asking &quot;why would you do addition?&quot; in math class. There are infinite problems you can solve with that, and choosing just a few that represents them all is impossible. There are so many types of operations that you perform on something of one type, that produces a result that&#39;s the same. Calling `toUpperCase` on a String returns a String.","body":"It&#39;s like asking &quot;why would you do addition?&quot; in math class. There are infinite problems you can solve with that, and choosing just a few that represents them all is impossible. There are so many types of operations that you perform on something of one type, that produces a result that&#39;s the same. Calling <code>toUpperCase</code> on a String returns a String."},{"owner":{"account_id":26777214,"reputation":25,"user_id":20372657,"display_name":"Lukas"},"score":0,"creation_date":1671015717,"post_id":74796830,"comment_id":132004342,"body_markdown":"Okay, i&#39;m hit the notion, thank you all !","body":"Okay, i&#39;m hit the notion, thank you all !"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1671016038,"post_id":74796830,"comment_id":132004453,"body_markdown":"You mean something like many methods of the `String` class like `concat()`, `replace()`, `trim()` that transform the current string into a new string? Or `BigInteger.add()` that adds a two `BigInteger`s together and returns the result as a new `BigInteger`?","body":"You mean something like many methods of the <code>String</code> class like <code>concat()</code>, <code>replace()</code>, <code>trim()</code> that transform the current string into a new string? Or <code>BigInteger.add()</code> that adds a two <code>BigInteger</code>s together and returns the result as a new <code>BigInteger</code>?"}],"answers":[{"tags":[],"owner":{"account_id":17872721,"reputation":41,"user_id":12983577,"display_name":"alphaBEE"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671027107,"creation_date":1671027107,"answer_id":74799575,"question_id":74796830,"body_markdown":"It&#39;s not a must to return class, compiler expects value in return but it does not has to be a class. It depends what you are planning to do with a method, you could return any data type be it int, String, character, Arrays, Object etc or say when you don&#39;t want to return anything that&#39;s void return type.\r\n\r\nif you were to look at method definition,\r\n\r\n``` public returnType methodName(DataType Parameter){\r\n//do whatever\r\nreturn returnType;\r\n}\r\n```\r\n\r\nit clearly has returnType in method definition, which tells compiler what to expect back from method as a return value.\r\n\r\nIn your example, i do not know the context but the way you posted your method it says Bird as returnType, which means either compiler is expecting you to return BirdType object or you could also return null.\r\n\r\nP.S. i didn&#39;t have the said reputation to add it to comments :/","title":"What is a purpose for returning class in a java method?","body":"<p>It's not a must to return class, compiler expects value in return but it does not has to be a class. It depends what you are planning to do with a method, you could return any data type be it int, String, character, Arrays, Object etc or say when you don't want to return anything that's void return type.</p>\n<p>if you were to look at method definition,</p>\n<pre><code>//do whatever\nreturn returnType;\n}\n</code></pre>\n<p>it clearly has returnType in method definition, which tells compiler what to expect back from method as a return value.</p>\n<p>In your example, i do not know the context but the way you posted your method it says Bird as returnType, which means either compiler is expecting you to return BirdType object or you could also return null.</p>\n<p>P.S. i didn't have the said reputation to add it to comments :/</p>\n"}],"owner":{"account_id":26777214,"reputation":25,"user_id":20372657,"display_name":"Lukas"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":231,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1671027107,"creation_date":1671013806,"question_id":74796830,"body_markdown":"I&#39;m working with java and have some question about methods, there is no code to correct, only a question for why is good to return into method a class?\r\n\r\n```\r\npublic class Bird { public Bird bird() {return null;} }\r\n\r\n```\r\n\r\nCan you explain when and why i should return class from method? And how this gonna work?","title":"What is a purpose for returning class in a java method?","body":"<p>I'm working with java and have some question about methods, there is no code to correct, only a question for why is good to return into method a class?</p>\n<pre><code>public class Bird { public Bird bird() {return null;} }\n\n</code></pre>\n<p>Can you explain when and why i should return class from method? And how this gonna work?</p>\n"},{"tags":["java","pdf-generation","itext"],"comments":[{"owner":{"account_id":220387,"reputation":15732,"user_id":477771,"accept_rate":100,"display_name":"Mark Storer"},"score":0,"creation_date":1302025797,"post_id":5554931,"comment_id":6317900,"body_markdown":"What version of iText are you using?  How are you setting the background color?","body":"What version of iText are you using?  How are you setting the background color?"},{"owner":{"account_id":289544,"reputation":3000,"user_id":590586,"accept_rate":61,"display_name":"user590586"},"score":0,"creation_date":1302075766,"post_id":5554931,"comment_id":6326882,"body_markdown":"@Mark Storer: I&#39;m using itext 5.0.6 , and i&#39;m not setting the background, the text i want to be created in the pdf is the text i get from from tinymce text editor.","body":"@Mark Storer: I&#39;m using itext 5.0.6 , and i&#39;m not setting the background, the text i want to be created in the pdf is the text i get from from tinymce text editor."},{"owner":{"account_id":220387,"reputation":15732,"user_id":477771,"accept_rate":100,"display_name":"Mark Storer"},"score":0,"creation_date":1302104352,"post_id":5554931,"comment_id":6334818,"body_markdown":"Okay... let me try again:  How is the background color being defined in the first place?","body":"Okay... let me try again:  How is the background color being defined in the first place?"},{"owner":{"account_id":289544,"reputation":3000,"user_id":590586,"accept_rate":61,"display_name":"user590586"},"score":0,"creation_date":1302169496,"post_id":5554931,"comment_id":6347716,"body_markdown":"@Mark Storer: The background is defined like this: &quot;background: #ff9900;&quot; . I can&#39;t control how it&#39;s defined - the text editor generates it automatically.","body":"@Mark Storer: The background is defined like this: &quot;background: #ff9900;&quot; . I can&#39;t control how it&#39;s defined - the text editor generates it automatically."}],"answers":[{"tags":[],"owner":{"account_id":220387,"reputation":15732,"user_id":477771,"accept_rate":100,"display_name":"Mark Storer"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1302197206,"creation_date":1302197206,"answer_id":5585089,"question_id":5554931,"body_markdown":"Spotty CSS Support strikes again.\r\n\r\niText doesn&#39;t currently support the `backgroundcolor` style.  It does support the `bgcolor` attribute however, and attributes and styles are mapped into the same namespace.\r\n\r\nSo if you XSLT your incoming HTML, you could add a matching bgcolor attribute, or simply change the style string to `bgcolor`.\r\n\r\nUgly, but effective.\r\n\r\n---\r\niText&#39;s HTML-&gt;PDF conversion code is supposed to get a major upgrade in the next release.  The groundwork was laid in the 5.0.6 release, though I haven&#39;t seen any code changes that will actually improve the output as yet.","title":"HTMLWorker.parseToList ignores background color","body":"<p>Spotty CSS Support strikes again.</p>\n\n<p>iText doesn't currently support the <code>backgroundcolor</code> style.  It does support the <code>bgcolor</code> attribute however, and attributes and styles are mapped into the same namespace.</p>\n\n<p>So if you XSLT your incoming HTML, you could add a matching bgcolor attribute, or simply change the style string to <code>bgcolor</code>.</p>\n\n<p>Ugly, but effective.</p>\n\n<hr>\n\n<p>iText's HTML->PDF conversion code is supposed to get a major upgrade in the next release.  The groundwork was laid in the 5.0.6 release, though I haven't seen any code changes that will actually improve the output as yet.</p>\n"},{"tags":[],"owner":{"account_id":3021380,"reputation":21,"user_id":2562351,"display_name":"Cosmin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1373318984,"creation_date":1373318984,"answer_id":17536286,"question_id":5554931,"body_markdown":"It works with bgcolor when used as a direct attribute (but not in style attribute with &quot;background-color&quot;)\r\n\r\n    &lt;table border=&quot;1&quot; cellpadding=&quot;2&quot;&gt;\r\n      &lt;tr bgcolor=&quot;#C0C0C0&quot;&gt;\r\n        &lt;td&gt;&lt;b&gt;Gray Header&lt;/b&gt;&lt;/td&gt;\r\n        &lt;td&gt;&lt;b&gt;Second header&lt;/b&gt;&lt;/td&gt;\r\n      &lt;/tr&gt;\r\n      &lt;tr&gt;\r\n        &lt;td style=&quot;color:green&quot;&gt;Green text&lt;/td&gt;\r\n        &lt;td bgcolor=&quot;#FFC0C0&quot;&gt;Red background&lt;/td&gt;\r\n      &lt;/tr&gt;\r\n    &lt;/table&gt;\r\n","title":"HTMLWorker.parseToList ignores background color","body":"<p>It works with bgcolor when used as a direct attribute (but not in style attribute with \"background-color\")</p>\n\n<pre><code>&lt;table border=\"1\" cellpadding=\"2\"&gt;\n  &lt;tr bgcolor=\"#C0C0C0\"&gt;\n    &lt;td&gt;&lt;b&gt;Gray Header&lt;/b&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;b&gt;Second header&lt;/b&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr&gt;\n    &lt;td style=\"color:green\"&gt;Green text&lt;/td&gt;\n    &lt;td bgcolor=\"#FFC0C0\"&gt;Red background&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4738700,"reputation":179,"user_id":3832254,"accept_rate":50,"display_name":"Vikram"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671026973,"creation_date":1671026973,"answer_id":74799549,"question_id":5554931,"body_markdown":"I tried the below workaround and it perfectly works for me.\r\n\r\n    .tr-bg{\r\n    \t\tbackground-color: #D3D3D3;\r\n          }\r\n\r\nAnd use this class for required dom element.","title":"HTMLWorker.parseToList ignores background color","body":"<p>I tried the below workaround and it perfectly works for me.</p>\n<pre><code>.tr-bg{\n        background-color: #D3D3D3;\n      }\n</code></pre>\n<p>And use this class for required dom element.</p>\n"}],"owner":{"account_id":289544,"reputation":3000,"user_id":590586,"accept_rate":61,"display_name":"user590586"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3449,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1671026973,"creation_date":1302019776,"question_id":5554931,"body_markdown":"I&#39;m using java i text for generating pdf. Some data in my pdf is from html. I&#39;m using `HTMLWorker.parseToList` to create it.\r\n\r\nMy problem is that it ignores the background color that is written inside the html tags. Any idea why? How can i solve this?\r\n\r\nThanks in advance.","title":"HTMLWorker.parseToList ignores background color","body":"<p>I'm using java i text for generating pdf. Some data in my pdf is from html. I'm using <code>HTMLWorker.parseToList</code> to create it.</p>\n\n<p>My problem is that it ignores the background color that is written inside the html tags. Any idea why? How can i solve this?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1671026668,"post_id":74799466,"comment_id":132008297,"body_markdown":"how did you try to add \\n ?","body":"how did you try to add \\n ?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1671026739,"post_id":74799466,"comment_id":132008319,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":27232602,"reputation":16,"user_id":20760063,"display_name":"ln0"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671026907,"creation_date":1671026868,"answer_id":74799524,"question_id":74799466,"body_markdown":"Depending on what you want to do you could use String.format.\r\nFor instance: String.format(&quot;%s *1= %s%nNew line of text&quot;, num1, num2);\r\nEverything after %n will be printed on a new line. %s will be replaced by the text in num1 and num2 variables. ","title":"How do I create a new line inside of a concatenated text in java?","body":"<p>Depending on what you want to do you could use String.format.\nFor instance: String.format(&quot;%s *1= %s%nNew line of text&quot;, num1, num2);\nEverything after %n will be printed on a new line. %s will be replaced by the text in num1 and num2 variables.</p>\n"}],"owner":{"account_id":27251687,"reputation":3,"user_id":20776029,"display_name":"Haze0"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74799524,"answer_count":1,"score":-1,"last_activity_date":1671026907,"creation_date":1671026625,"question_id":74799466,"body_markdown":"So I have made concatenated text in java:\r\n\r\n```\r\ntable.setText(num + &quot;*1= &quot; + num);\r\n```\r\n\r\nThis is my text, so now if I want to add another string like,:\r\n&quot;This is the final answer&quot;\r\nbut in a new line, how do I do it?\r\nNOTE: \\n simply doesn&#39;t work, as it just shows me an error tha it expects a semicolon.\r\n\r\nI tried inserting the escape command \\n, however it just said that it expects a semicolon at the end of the escape command, and if I enter a semicolon, It literally crashes the app.","title":"How do I create a new line inside of a concatenated text in java?","body":"<p>So I have made concatenated text in java:</p>\n<pre><code>table.setText(num + &quot;*1= &quot; + num);\n</code></pre>\n<p>This is my text, so now if I want to add another string like,:\n&quot;This is the final answer&quot;\nbut in a new line, how do I do it?\nNOTE: \\n simply doesn't work, as it just shows me an error tha it expects a semicolon.</p>\n<p>I tried inserting the escape command \\n, however it just said that it expects a semicolon at the end of the escape command, and if I enter a semicolon, It literally crashes the app.</p>\n"},{"tags":["java","spring-boot","maven","apache-dubbo"],"comments":[{"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"score":0,"creation_date":1638284933,"post_id":70171433,"comment_id":124044374,"body_markdown":"Check your `.m2` directory. Delete the `dubbo-spring-boot-starter` folder and re-resolve your dependencies.","body":"Check your <code>.m2</code> directory. Delete the <code>dubbo-spring-boot-starter</code> folder and re-resolve your dependencies."},{"owner":{"account_id":11563193,"reputation":651,"user_id":8472310,"display_name":"chaitanya guruprasad"},"score":0,"creation_date":1638289277,"post_id":70171433,"comment_id":124046474,"body_markdown":"I see no issue with your `pom.xml`.  I was able to run the exact pom on my local","body":"I see no issue with your <code>pom.xml</code>.  I was able to run the exact pom on my local"}],"answers":[{"tags":[],"owner":{"account_id":5301372,"reputation":197,"user_id":4230855,"accept_rate":83,"display_name":"xxx"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1639938849,"creation_date":1639938849,"answer_id":70414278,"question_id":70171433,"body_markdown":"Delete the `.m2` folder then try again, I just experienced this.","title":"Cannot resolve org.springframework.boot:spring-boot-autoconfigure:2.6.1 springboot | dubbo","body":"<p>Delete the <code>.m2</code> folder then try again, I just experienced this.</p>\n"}],"owner":{"account_id":22853699,"reputation":98,"user_id":16998887,"display_name":"ganlana"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14405,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70414278,"answer_count":1,"score":0,"last_activity_date":1671026884,"creation_date":1638284250,"question_id":70171433,"body_markdown":"When I used maven to import the jar package of dubbo-spring-boot-start, the following error occurred:\r\n\r\n```\r\n[INFO] Validation error:\r\n\r\n[ERROR] org.eclipse.aether.resolution.ArtifactDescriptorException: Failed to read artifact descriptor for org.apache.dubbo:dubbo-spring-boot-starter:jar:2.7.3\r\n[ERROR] Maven server structure problem\r\n\r\n[ERROR] org.eclipse.aether.resolution.ArtifactDescriptorException: Failed to read artifact descriptor for org.apache.dubbo:dubbo-spring-boot-starter:jar:2.7.3\r\nCannot resolve org.springframework.boot:spring-boot-autoconfigure:2.6.1\r\nCannot resolve jakarta.annotation:jakarta.annotation-api:1.3.5\r\nCannot resolve jline:jline:0.9.94\r\nCannot resolve org.springframework:spring-core:5.3.13\r\nCannot resolve org.ow2.asm:asm:9.1\r\nCannot resolve org.apache.curator:curator-client:2.12.0\r\nCannot resolve jakarta.xml.bind:jakarta.xml.bind-api:2.3.3\r\nCannot resolve org.apache.logging.log4j:log4j-to-slf4j:2.14.1\r\nCannot resolve org.springframework:spring-test:5.3.13\r\nCannot resolve org.junit.jupiter:junit-jupiter-api:5.8.1\r\nCannot resolve org.slf4j:slf4j-api:1.7.32\r\nCannot resolve org.opentest4j:opentest4j:1.2.0\r\nCannot resolve org.springframework.boot:spring-boot-test:2.6.1\r\nCannot resolve net.minidev:accessors-smart:2.4.7\r\n\r\n\r\n\r\n```\r\n\r\n\r\n\r\nSpringboot 2.6.1 and  the dubbo-spring-boot-starter version is 2.7.3\r\n\r\n Here is my pom.xml:\r\n```\r\n\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.6.1&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;com.kuang&lt;/groupId&gt;\r\n    &lt;artifactId&gt;springboot-11-provider-server&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;springboot-11-provider-server&lt;/name&gt;\r\n    &lt;description&gt;springboot-11-provider-server&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.dubbo&lt;/groupId&gt;\r\n            &lt;artifactId&gt;dubbo-spring-boot-starter&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.github.sgroschupf&lt;/groupId&gt;\r\n            &lt;artifactId&gt;zkclient&lt;/artifactId&gt;\r\n            &lt;version&gt;0.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n\r\n```\r\n\r\nWhat&#39;s the reason?\r\nWhen I add the dubbo-spring-boot-starter jar package, I get an error, but it can run when I downgrade to 2.7.0","title":"Cannot resolve org.springframework.boot:spring-boot-autoconfigure:2.6.1 springboot | dubbo","body":"<p>When I used maven to import the jar package of dubbo-spring-boot-start, the following error occurred:</p>\n<pre><code>[INFO] Validation error:\n\n[ERROR] org.eclipse.aether.resolution.ArtifactDescriptorException: Failed to read artifact descriptor for org.apache.dubbo:dubbo-spring-boot-starter:jar:2.7.3\n[ERROR] Maven server structure problem\n\n[ERROR] org.eclipse.aether.resolution.ArtifactDescriptorException: Failed to read artifact descriptor for org.apache.dubbo:dubbo-spring-boot-starter:jar:2.7.3\nCannot resolve org.springframework.boot:spring-boot-autoconfigure:2.6.1\nCannot resolve jakarta.annotation:jakarta.annotation-api:1.3.5\nCannot resolve jline:jline:0.9.94\nCannot resolve org.springframework:spring-core:5.3.13\nCannot resolve org.ow2.asm:asm:9.1\nCannot resolve org.apache.curator:curator-client:2.12.0\nCannot resolve jakarta.xml.bind:jakarta.xml.bind-api:2.3.3\nCannot resolve org.apache.logging.log4j:log4j-to-slf4j:2.14.1\nCannot resolve org.springframework:spring-test:5.3.13\nCannot resolve org.junit.jupiter:junit-jupiter-api:5.8.1\nCannot resolve org.slf4j:slf4j-api:1.7.32\nCannot resolve org.opentest4j:opentest4j:1.2.0\nCannot resolve org.springframework.boot:spring-boot-test:2.6.1\nCannot resolve net.minidev:accessors-smart:2.4.7\n\n\n\n</code></pre>\n<p>Springboot 2.6.1 and  the dubbo-spring-boot-starter version is 2.7.3</p>\n<p>Here is my pom.xml:</p>\n<pre><code>\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.kuang&lt;/groupId&gt;\n    &lt;artifactId&gt;springboot-11-provider-server&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;springboot-11-provider-server&lt;/name&gt;\n    &lt;description&gt;springboot-11-provider-server&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.dubbo&lt;/groupId&gt;\n            &lt;artifactId&gt;dubbo-spring-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;2.7.3&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.github.sgroschupf&lt;/groupId&gt;\n            &lt;artifactId&gt;zkclient&lt;/artifactId&gt;\n            &lt;version&gt;0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n\n</code></pre>\n<p>What's the reason?\nWhen I add the dubbo-spring-boot-starter jar package, I get an error, but it can run when I downgrade to 2.7.0</p>\n"},{"tags":["java","sql","regex","string","wildcard"],"comments":[{"owner":{"account_id":1336198,"reputation":1595,"user_id":1278899,"accept_rate":20,"display_name":"Volkan Yazıcı"},"score":1,"creation_date":1530046231,"post_id":898405,"comment_id":89093310,"body_markdown":"See [RegexUtil#sqlPatternToRegex(String)](https://github.com/apache/cayenne/blob/master/cayenne-server/src/main/java/org/apache/cayenne/util/RegexUtil.java#L76) from Apache Cayenne project.","body":"See <a href=\"https://github.com/apache/cayenne/blob/master/cayenne-server/src/main/java/org/apache/cayenne/util/RegexUtil.java#L76\" rel=\"nofollow noreferrer\">RegexUtil#sqlPatternToRegex(String)</a> from Apache Cayenne project."}],"answers":[{"tags":[],"owner":{"account_id":36,"reputation":98158,"user_id":45,"accept_rate":100,"display_name":"Bob"},"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1243005691,"creation_date":1243005375,"answer_id":898413,"question_id":898405,"body_markdown":".* will match any characters in regular expressions\r\n\r\nI think the java syntax would be\r\n\r\n    &quot;digital&quot;.matches(&quot;.*ital.*&quot;);\r\n\r\nAnd for the single character match just use a single dot.\r\n\r\n    &quot;digital&quot;.matches(&quot;.*gi.a.*&quot;);\r\n\r\nAnd to match an actual dot, escape it as slash dot\r\n    \r\n    \\.","title":"How to implement a SQL like &#39;LIKE&#39; operator in java?","body":"<p>.* will match any characters in regular expressions</p>\n\n<p>I think the java syntax would be</p>\n\n<pre><code>\"digital\".matches(\".*ital.*\");\n</code></pre>\n\n<p>And for the single character match just use a single dot.</p>\n\n<pre><code>\"digital\".matches(\".*gi.a.*\");\n</code></pre>\n\n<p>And to match an actual dot, escape it as slash dot</p>\n\n<pre><code>\\.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18859,"reputation":9033,"user_id":43665,"accept_rate":76,"display_name":"job"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1243005480,"creation_date":1243005480,"answer_id":898424,"question_id":898405,"body_markdown":"Java strings have .startsWith() and .contains() methods which will get you most of the way. For anything more complicated you&#39;d have to use regex or write your own method.","title":"How to implement a SQL like &#39;LIKE&#39; operator in java?","body":"<p>Java strings have .startsWith() and .contains() methods which will get you most of the way. For anything more complicated you'd have to use regex or write your own method.</p>\n"},{"tags":[],"owner":{"account_id":2288,"reputation":191195,"user_id":3171,"accept_rate":92,"display_name":"David Webb"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1243005996,"creation_date":1243005608,"answer_id":898429,"question_id":898405,"body_markdown":"You could turn `&#39;%string%&#39;` to [`contains()`][1], `&#39;string%&#39;` to [`startsWith()`][2] and `&#39;%string&quot;&#39;` to [`endsWith()`][3].\r\n\r\nYou should also run [`toLowerCase()`][4] on both the string and pattern as `LIKE` is case-insenstive.\r\n\r\nNot sure how you&#39;d handle `&#39;%string%other%&#39;` except with a Regular Expression though.\r\n\r\nIf you&#39;re using Regular Expressions:\r\n\r\n - [Quote the string before you replace the `%` characters][5]\r\n - [Watch out for escaped characters in the `LIKE` String][6]\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/lang/String.html#contains(java.lang.CharSequence)\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/lang/String.html#startsWith(java.lang.String)\r\n  [3]: http://java.sun.com/javase/6/docs/api/java/lang/String.html#endsWith(java.lang.String)\r\n  [4]: http://java.sun.com/javase/6/docs/api/java/lang/String.html#toLowerCase(java.lang.String)\r\n  [5]: https://stackoverflow.com/questions/60160/how-to-escape-text-for-regular-expression-in-java\r\n  [6]: http://www.techonthenet.com/sql/like.php","title":"How to implement a SQL like &#39;LIKE&#39; operator in java?","body":"<p>You could turn <code>'%string%'</code> to <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#contains(java.lang.CharSequence)\" rel=\"nofollow noreferrer\"><code>contains()</code></a>, <code>'string%'</code> to <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#startsWith(java.lang.String)\" rel=\"nofollow noreferrer\"><code>startsWith()</code></a> and <code>'%string\"'</code> to <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#endsWith(java.lang.String)\" rel=\"nofollow noreferrer\"><code>endsWith()</code></a>.</p>\n\n<p>You should also run <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#toLowerCase(java.lang.String)\" rel=\"nofollow noreferrer\"><code>toLowerCase()</code></a> on both the string and pattern as <code>LIKE</code> is case-insenstive.</p>\n\n<p>Not sure how you'd handle <code>'%string%other%'</code> except with a Regular Expression though.</p>\n\n<p>If you're using Regular Expressions:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/60160/how-to-escape-text-for-regular-expression-in-java\">Quote the string before you replace the <code>%</code> characters</a></li>\n<li><a href=\"http://www.techonthenet.com/sql/like.php\" rel=\"nofollow noreferrer\">Watch out for escaped characters in the <code>LIKE</code> String</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":7745,"reputation":189755,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1248121124,"creation_date":1243005962,"answer_id":898461,"question_id":898405,"body_markdown":"Yes, this could be done with a regular expression. Keep in mind that Java&#39;s regular expressions have different syntax from SQL&#39;s &quot;like&quot;. Instead of &quot;`%`&quot;, you would have &quot;`.*`&quot;, and instead of &quot;`?`&quot;, you would have &quot;`.`&quot;.\r\n\r\nWhat makes it somewhat tricky is that you would also have to escape any characters that Java treats as special. Since you&#39;re trying to make this analogous to SQL, I&#39;m guessing that `^$[]{}\\` shouldn&#39;t appear in the regex string. But you will have to replace &quot;`.`&quot; with &quot;`\\\\.`&quot; before doing any other replacements. (**Edit:** [`Pattern.quote(String)`][1] escapes everything by surrounding the string with &quot;`\\Q`&quot; and &quot;`\\E`&quot;, which will cause everything in the expression to be treated as a literal (no wildcards at all). So you *definitely* don&#39;t want to use it.)\r\n\r\nFurthermore, as Dave Webb says, you also need to ignore case.\r\n\r\nWith that in mind, here&#39;s a sample of what it might look like:\r\n\r\n    public static boolean like(String str, String expr) {\r\n        expr = expr.toLowerCase(); // ignoring locale for now\r\n        expr = expr.replace(&quot;.&quot;, &quot;\\\\.&quot;); // &quot;\\\\&quot; is escaped to &quot;\\&quot; (thanks, Alan M)\r\n        // ... escape any other potentially problematic characters here\r\n        expr = expr.replace(&quot;?&quot;, &quot;.&quot;);\r\n        expr = expr.replace(&quot;%&quot;, &quot;.*&quot;);\r\n        str = str.toLowerCase();\r\n        return str.matches(expr);\r\n    }\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/regex/Pattern.html#quote(java.lang.String)","title":"How to implement a SQL like &#39;LIKE&#39; operator in java?","body":"<p>Yes, this could be done with a regular expression. Keep in mind that Java's regular expressions have different syntax from SQL's \"like\". Instead of \"<code>%</code>\", you would have \"<code>.*</code>\", and instead of \"<code>?</code>\", you would have \"<code>.</code>\".</p>\n\n<p>What makes it somewhat tricky is that you would also have to escape any characters that Java treats as special. Since you're trying to make this analogous to SQL, I'm guessing that <code>^$[]{}\\</code> shouldn't appear in the regex string. But you will have to replace \"<code>.</code>\" with \"<code>\\\\.</code>\" before doing any other replacements. (<strong>Edit:</strong> <a href=\"http://java.sun.com/javase/6/docs/api/java/util/regex/Pattern.html#quote(java.lang.String)\" rel=\"noreferrer\"><code>Pattern.quote(String)</code></a> escapes everything by surrounding the string with \"<code>\\Q</code>\" and \"<code>\\E</code>\", which will cause everything in the expression to be treated as a literal (no wildcards at all). So you <em>definitely</em> don't want to use it.)</p>\n\n<p>Furthermore, as Dave Webb says, you also need to ignore case.</p>\n\n<p>With that in mind, here's a sample of what it might look like:</p>\n\n<pre><code>public static boolean like(String str, String expr) {\n    expr = expr.toLowerCase(); // ignoring locale for now\n    expr = expr.replace(\".\", \"\\\\.\"); // \"\\\\\" is escaped to \"\\\" (thanks, Alan M)\n    // ... escape any other potentially problematic characters here\n    expr = expr.replace(\"?\", \".\");\n    expr = expr.replace(\"%\", \".*\");\n    str = str.toLowerCase();\n    return str.matches(expr);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":47570,"reputation":499,"user_id":140943,"display_name":"tommyL"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1248007373,"creation_date":1248007373,"answer_id":1149819,"question_id":898405,"body_markdown":"i dont know exactly about the greedy issue, but try this if it works for you:\r\n\r\n  \r\n\r\n    public boolean like(final String str, String expr)\r\n      {\r\n        final String[] parts = expr.split(&quot;%&quot;);\r\n        final boolean traillingOp = expr.endsWith(&quot;%&quot;);\r\n        expr = &quot;&quot;;\r\n        for (int i = 0, l = parts.length; i &lt; l; ++i)\r\n        {\r\n          final String[] p = parts[i].split(&quot;\\\\\\\\\\\\?&quot;);\r\n          if (p.length &gt; 1)\r\n          {\r\n            for (int y = 0, l2 = p.length; y &lt; l2; ++y)\r\n            {\r\n              expr += p[y];\r\n              if (i + 1 &lt; l2) expr += &quot;.&quot;;\r\n            }\r\n          }\r\n          else\r\n          {\r\n            expr += parts[i];\r\n          }\r\n          if (i + 1 &lt; l) expr += &quot;%&quot;;\r\n        }\r\n        if (traillingOp) expr += &quot;%&quot;;\r\n        expr = expr.replace(&quot;?&quot;, &quot;.&quot;);\r\n        expr = expr.replace(&quot;%&quot;, &quot;.*&quot;);\r\n        return str.matches(expr);\r\n    }","title":"How to implement a SQL like &#39;LIKE&#39; operator in java?","body":"<p>i dont know exactly about the greedy issue, but try this if it works for you:</p>\n\n<pre><code>public boolean like(final String str, String expr)\n  {\n    final String[] parts = expr.split(\"%\");\n    final boolean traillingOp = expr.endsWith(\"%\");\n    expr = \"\";\n    for (int i = 0, l = parts.length; i &lt; l; ++i)\n    {\n      final String[] p = parts[i].split(\"\\\\\\\\\\\\?\");\n      if (p.length &gt; 1)\n      {\n        for (int y = 0, l2 = p.length; y &lt; l2; ++y)\n        {\n          expr += p[y];\n          if (i + 1 &lt; l2) expr += \".\";\n        }\n      }\n      else\n      {\n        expr += parts[i];\n      }\n      if (i + 1 &lt; l) expr += \"%\";\n    }\n    if (traillingOp) expr += \"%\";\n    expr = expr.replace(\"?\", \".\");\n    expr = expr.replace(\"%\", \".*\");\n    return str.matches(expr);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1248010241,"creation_date":1248010241,"answer_id":1149905,"question_id":898405,"body_markdown":"Regular expressions are the most versatile. However, some LIKE functions can be formed without regular expressions. e.g.\r\n\r\n    String text = &quot;digital&quot;;\r\n    text.startsWith(&quot;dig&quot;); // like &quot;dig%&quot;\r\n    text.endsWith(&quot;tal&quot;); // like &quot;%tal&quot;\r\n    text.contains(&quot;gita&quot;); // like &quot;%gita%&quot;\r\n\r\n","title":"How to implement a SQL like &#39;LIKE&#39; operator in java?","body":"<p>Regular expressions are the most versatile. However, some LIKE functions can be formed without regular expressions. e.g.</p>\n\n<pre><code>String text = \"digital\";\ntext.startsWith(\"dig\"); // like \"dig%\"\ntext.endsWith(\"tal\"); // like \"%tal\"\ntext.contains(\"gita\"); // like \"%gita%\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10959,"reputation":74232,"user_id":20938,"display_name":"Alan Moore"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1248089543,"creation_date":1248089543,"answer_id":1153025,"question_id":898405,"body_markdown":"Every SQL reference I can find says the &quot;any single character&quot; wildcard is the underscore (`_`), not the question mark (`?`).  That simplifies things a bit, since the underscore is not a regex metacharacter.  However, you still can&#39;t use `Pattern.quote()` for the reason given by mmyers.  I&#39;ve got another method here for escaping regexes when I might want to edit them afterward.  With that out of the way, the `like()` method becomes pretty simple:\r\n\r\n    public static boolean like(final String str, final String expr)\r\n    {\r\n      String regex = quotemeta(expr);\r\n      regex = regex.replace(&quot;_&quot;, &quot;.&quot;).replace(&quot;%&quot;, &quot;.*?&quot;);\r\n      Pattern p = Pattern.compile(regex,\r\n          Pattern.CASE_INSENSITIVE | Pattern.DOTALL);\r\n      return p.matcher(str).matches();\r\n    }\r\n  \r\n    public static String quotemeta(String s)\r\n    {\r\n      if (s == null)\r\n      {\r\n        throw new IllegalArgumentException(&quot;String cannot be null&quot;);\r\n      }\r\n  \r\n      int len = s.length();\r\n      if (len == 0)\r\n      {\r\n        return &quot;&quot;;\r\n      }\r\n  \r\n      StringBuilder sb = new StringBuilder(len * 2);\r\n      for (int i = 0; i &lt; len; i++)\r\n      {\r\n        char c = s.charAt(i);\r\n        if (&quot;[](){}.*+?$^|#\\\\&quot;.indexOf(c) != -1)\r\n        {\r\n          sb.append(&quot;\\\\&quot;);\r\n        }\r\n        sb.append(c);\r\n      }\r\n      return sb.toString();\r\n    }\r\n\r\nIf you really want to use `?` for the wildcard, your best bet would be to remove it from the list of metacharacters in the `quotemeta()` method.  Replacing its escaped form -- `replace(&quot;\\\\?&quot;, &quot;.&quot;)` -- wouldn&#39;t be safe because there might be backslashes in the original expression.\r\n\r\nAnd that brings us to the real problems: most SQL flavors seem to support character classes in the forms `[a-z]` and `[^j-m]` or `[!j-m]`, and they all provide a way to escape wildcard characters.  The latter is usually done by means of an `ESCAPE` keyword, which lets you define a different escape character every time.  As you can imagine, this complicates things quite a bit.  Converting to a regex is probably still the best option, but parsing the original expression will be much harder--in fact, the first thing you would have to do is formalize the syntax of the `LIKE`-like expressions themselves.","title":"How to implement a SQL like &#39;LIKE&#39; operator in java?","body":"<p>Every SQL reference I can find says the \"any single character\" wildcard is the underscore (<code>_</code>), not the question mark (<code>?</code>).  That simplifies things a bit, since the underscore is not a regex metacharacter.  However, you still can't use <code>Pattern.quote()</code> for the reason given by mmyers.  I've got another method here for escaping regexes when I might want to edit them afterward.  With that out of the way, the <code>like()</code> method becomes pretty simple:</p>\n\n<pre><code>public static boolean like(final String str, final String expr)\n{\n  String regex = quotemeta(expr);\n  regex = regex.replace(\"_\", \".\").replace(\"%\", \".*?\");\n  Pattern p = Pattern.compile(regex,\n      Pattern.CASE_INSENSITIVE | Pattern.DOTALL);\n  return p.matcher(str).matches();\n}\n\npublic static String quotemeta(String s)\n{\n  if (s == null)\n  {\n    throw new IllegalArgumentException(\"String cannot be null\");\n  }\n\n  int len = s.length();\n  if (len == 0)\n  {\n    return \"\";\n  }\n\n  StringBuilder sb = new StringBuilder(len * 2);\n  for (int i = 0; i &lt; len; i++)\n  {\n    char c = s.charAt(i);\n    if (\"[](){}.*+?$^|#\\\\\".indexOf(c) != -1)\n    {\n      sb.append(\"\\\\\");\n    }\n    sb.append(c);\n  }\n  return sb.toString();\n}\n</code></pre>\n\n<p>If you really want to use <code>?</code> for the wildcard, your best bet would be to remove it from the list of metacharacters in the <code>quotemeta()</code> method.  Replacing its escaped form -- <code>replace(\"\\\\?\", \".\")</code> -- wouldn't be safe because there might be backslashes in the original expression.</p>\n\n<p>And that brings us to the real problems: most SQL flavors seem to support character classes in the forms <code>[a-z]</code> and <code>[^j-m]</code> or <code>[!j-m]</code>, and they all provide a way to escape wildcard characters.  The latter is usually done by means of an <code>ESCAPE</code> keyword, which lets you define a different escape character every time.  As you can imagine, this complicates things quite a bit.  Converting to a regex is probably still the best option, but parsing the original expression will be much harder--in fact, the first thing you would have to do is formalize the syntax of the <code>LIKE</code>-like expressions themselves.</p>\n"},{"tags":[],"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1248121806,"creation_date":1248121806,"answer_id":1155795,"question_id":898405,"body_markdown":"Apache Cayanne ORM has an &quot;[In memory evaluation][1]&quot; \r\n\r\n\r\nIt may not work for unmapped object, but looks promising:\r\n\r\n\r\n    Expression exp = ExpressionFactory.likeExp(&quot;artistName&quot;, &quot;A%&quot;);   \r\n    List startWithA = exp.filterObjects(artists); \r\n\r\n\r\n  [1]: http://cayenne.apache.org/doc20/in-memory-evaluation.html","title":"How to implement a SQL like &#39;LIKE&#39; operator in java?","body":"<p>Apache Cayanne ORM has an \"<a href=\"http://cayenne.apache.org/doc20/in-memory-evaluation.html\" rel=\"nofollow noreferrer\">In memory evaluation</a>\" </p>\n\n<p>It may not work for unmapped object, but looks promising:</p>\n\n<pre><code>Expression exp = ExpressionFactory.likeExp(\"artistName\", \"A%\");   \nList startWithA = exp.filterObjects(artists); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":52561,"reputation":1633,"user_id":157080,"accept_rate":71,"display_name":"John"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1250449911,"creation_date":1250449911,"answer_id":1285095,"question_id":898405,"body_markdown":"The [Comparator][1] and [Comparable][2] interfaces are likely inapplicable here. They deal with sorting, and return integers of either sign, or 0. Your operation is about finding matches, and returning true/false. That&#39;s different.\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/Comparator.html\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/lang/Comparable.html","title":"How to implement a SQL like &#39;LIKE&#39; operator in java?","body":"<p>The <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Comparator.html\" rel=\"nofollow noreferrer\">Comparator</a> and <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/Comparable.html\" rel=\"nofollow noreferrer\">Comparable</a> interfaces are likely inapplicable here. They deal with sorting, and return integers of either sign, or 0. Your operation is about finding matches, and returning true/false. That's different.</p>\n"},{"tags":[],"owner":{"account_id":311432,"reputation":905,"user_id":625016,"display_name":"Rich MacDonald"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1299007962,"creation_date":1299007962,"answer_id":5159376,"question_id":898405,"body_markdown":"http://josql.sourceforge.net/ has what you need. Look for org.josql.expressions.LikeExpression.","title":"How to implement a SQL like &#39;LIKE&#39; operator in java?","body":"<p><a href=\"http://josql.sourceforge.net/\" rel=\"nofollow\">http://josql.sourceforge.net/</a> has what you need. Look for org.josql.expressions.LikeExpression.</p>\n"},{"tags":[],"owner":{"account_id":452840,"reputation":1309,"user_id":849497,"display_name":"Krishnendu"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1358002386,"creation_date":1358001095,"answer_id":14294292,"question_id":898405,"body_markdown":"    public static boolean like(String toBeCompare, String by){\r\n    \tif(by != null){\r\n    \t\tif(toBeCompare != null){\r\n    \t\t\tif(by.startsWith(&quot;%&quot;) &amp;&amp; by.endsWith(&quot;%&quot;)){\r\n    \t\t\t\tint index = toBeCompare.toLowerCase().indexOf(by.replace(&quot;%&quot;, &quot;&quot;).toLowerCase());\r\n    \t\t\t\tif(index &lt; 0){\r\n    \t\t\t\t\treturn false;\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\treturn true;\r\n    \t\t\t\t}\r\n    \t\t\t} else if(by.startsWith(&quot;%&quot;)){\r\n    \t\t\t\treturn toBeCompare.endsWith(by.replace(&quot;%&quot;, &quot;&quot;));\r\n    \t\t\t} else if(by.endsWith(&quot;%&quot;)){\r\n    \t\t\t\treturn toBeCompare.startsWith(by.replace(&quot;%&quot;, &quot;&quot;));\r\n    \t\t\t} else {\r\n    \t\t\t\treturn toBeCompare.equals(by.replace(&quot;%&quot;, &quot;&quot;));\r\n    \t\t\t}\r\n    \t\t} else {\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \t} else {\r\n    \t\treturn false;\r\n    \t}\r\n    }\r\n\r\nmay be help you","title":"How to implement a SQL like &#39;LIKE&#39; operator in java?","body":"<pre><code>public static boolean like(String toBeCompare, String by){\n    if(by != null){\n        if(toBeCompare != null){\n            if(by.startsWith(\"%\") &amp;&amp; by.endsWith(\"%\")){\n                int index = toBeCompare.toLowerCase().indexOf(by.replace(\"%\", \"\").toLowerCase());\n                if(index &lt; 0){\n                    return false;\n                } else {\n                    return true;\n                }\n            } else if(by.startsWith(\"%\")){\n                return toBeCompare.endsWith(by.replace(\"%\", \"\"));\n            } else if(by.endsWith(\"%\")){\n                return toBeCompare.startsWith(by.replace(\"%\", \"\"));\n            } else {\n                return toBeCompare.equals(by.replace(\"%\", \"\"));\n            }\n        } else {\n            return false;\n        }\n    } else {\n        return false;\n    }\n}\n</code></pre>\n\n<p>may be help you</p>\n"},{"tags":[],"owner":{"account_id":9058491,"reputation":531,"user_id":6745813,"accept_rate":67,"display_name":"Mithun Adhikari"},"down_vote_count":2,"up_vote_count":10,"is_accepted":false,"score":8,"last_activity_date":1498279772,"creation_date":1498279772,"answer_id":44732870,"question_id":898405,"body_markdown":"To implement  LIKE functions of sql  in java you don&#39;t need regular expression in \r\nThey can be obtained as:\r\n\r\n    String text = &quot;apple&quot;;\r\n    text.startsWith(&quot;app&quot;); // like &quot;app%&quot;\r\n    text.endsWith(&quot;le&quot;); // like &quot;%le&quot;\r\n    text.contains(&quot;ppl&quot;); // like &quot;%ppl%&quot;","title":"How to implement a SQL like &#39;LIKE&#39; operator in java?","body":"<p>To implement  LIKE functions of sql  in java you don't need regular expression in \nThey can be obtained as:</p>\n\n<pre><code>String text = \"apple\";\ntext.startsWith(\"app\"); // like \"app%\"\ntext.endsWith(\"le\"); // like \"%le\"\ntext.contains(\"ppl\"); // like \"%ppl%\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3523094,"reputation":176,"user_id":2944895,"display_name":"Kinnison84"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1526977782,"creation_date":1526977782,"answer_id":50463144,"question_id":898405,"body_markdown":"Ok this is a bit of a weird solution, but I thought it should still be mentioned.\r\n\r\nInstead of recreating the like mechanism we can utilize the existing implementation already available in any database! \r\n\r\n(Only requirement is, your application must have access to any database). \r\n\r\nJust run a very simple query each time,that returns true or false depending on the result of the like&#39;s comparison. Then execute the query, and read the answer directly from the database!\r\n\r\nFor Oracle db:\r\n\r\n    SELECT\r\n    CASE \r\n         WHEN &#39;StringToSearch&#39; LIKE &#39;LikeSequence&#39; THEN &#39;true&#39;\r\n         ELSE &#39;false&#39;\r\n     END test\r\n    FROM dual \r\n\r\nFor MS SQL Server\r\n\r\n    SELECT\r\n    CASE \r\n         WHEN &#39;StringToSearch&#39; LIKE &#39;LikeSequence&#39; THEN &#39;true&#39;\r\n         ELSE &#39;false&#39;\r\n    END test\r\n\r\nAll you have to do is replace &quot;StringToSearch&quot; and &quot;LikeSequence&quot; with bind parameters and set the values you want to check.","title":"How to implement a SQL like &#39;LIKE&#39; operator in java?","body":"<p>Ok this is a bit of a weird solution, but I thought it should still be mentioned.</p>\n\n<p>Instead of recreating the like mechanism we can utilize the existing implementation already available in any database! </p>\n\n<p>(Only requirement is, your application must have access to any database). </p>\n\n<p>Just run a very simple query each time,that returns true or false depending on the result of the like's comparison. Then execute the query, and read the answer directly from the database!</p>\n\n<p>For Oracle db:</p>\n\n<pre><code>SELECT\nCASE \n     WHEN 'StringToSearch' LIKE 'LikeSequence' THEN 'true'\n     ELSE 'false'\n END test\nFROM dual \n</code></pre>\n\n<p>For MS SQL Server</p>\n\n<pre><code>SELECT\nCASE \n     WHEN 'StringToSearch' LIKE 'LikeSequence' THEN 'true'\n     ELSE 'false'\nEND test\n</code></pre>\n\n<p>All you have to do is replace \"StringToSearch\" and \"LikeSequence\" with bind parameters and set the values you want to check.</p>\n"},{"tags":[],"owner":{"account_id":15229827,"reputation":1,"user_id":10989275,"display_name":"test love"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548843211,"creation_date":1548839882,"answer_id":54437062,"question_id":898405,"body_markdown":"```\r\npublic static boolean like(String source, String exp) {\r\n\t\tif (source == null || exp == null) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tint sourceLength = source.length();\r\n\t\tint expLength = exp.length();\r\n\r\n\t\tif (sourceLength == 0 || expLength == 0) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tboolean fuzzy = false;\r\n\t\tchar lastCharOfExp = 0;\r\n\t\tint positionOfSource = 0;\r\n\r\n\t\tfor (int i = 0; i &lt; expLength; i++) {\r\n\t\t\tchar ch = exp.charAt(i);\r\n\r\n\t\t\t// 是否转义\r\n\t\t\tboolean escape = false;\r\n\t\t\tif (lastCharOfExp == &#39;\\\\&#39;) {\r\n\t\t\t\tif (ch == &#39;%&#39; || ch == &#39;_&#39;) {\r\n\t\t\t\t\tescape = true;\r\n\t\t\t\t\t// System.out.println(&quot;escape &quot; + ch);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!escape &amp;&amp; ch == &#39;%&#39;) {\r\n\t\t\t\tfuzzy = true;\r\n\t\t\t} else if (!escape &amp;&amp; ch == &#39;_&#39;) {\r\n\t\t\t\tif (positionOfSource &gt;= sourceLength) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpositionOfSource++;// &lt;&lt;&lt;----- 往后加1\r\n\t\t\t} else if (ch != &#39;\\\\&#39;) {// 其他字符，但是排查了转义字符\r\n\t\t\t\tif (positionOfSource &gt;= sourceLength) {// 已经超过了source的长度了\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (lastCharOfExp == &#39;%&#39;) { // 上一个字符是%，要特别对待\r\n\t\t\t\t\tint tp = source.indexOf(ch);\r\n\t\t\t\t\t// System.out.println(&quot;上一个字符=%，当前字符是=&quot; + ch + &quot;，position=&quot; + position + &quot;，tp=&quot; + tp);\r\n\r\n\t\t\t\t\tif (tp == -1) { // 匹配不到这个字符，直接退出\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (tp &gt;= positionOfSource) {\r\n\t\t\t\t\t\tpositionOfSource = tp + 1;// &lt;&lt;&lt;----- 往下继续\r\n\r\n\t\t\t\t\t\tif (i == expLength - 1 &amp;&amp; positionOfSource &lt; sourceLength) { // exp已经是最后一个字符了，此刻检查source是不是最后一个字符\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (source.charAt(positionOfSource) == ch) {// 在这个位置找到了ch字符\r\n\t\t\t\t\tpositionOfSource++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlastCharOfExp = ch;// &lt;&lt;&lt;----- 赋值\r\n\t\t\t// System.out.println(&quot;当前字符是=&quot; + ch + &quot;，position=&quot; + position);\r\n\t\t}\r\n\r\n\t\t// expr的字符循环完了，如果不是模糊的，看在source里匹配的位置是否到达了source的末尾\r\n\t\tif (!fuzzy &amp;&amp; positionOfSource &lt; sourceLength) {\r\n\t\t\t// System.out.println(&quot;上一个字符=&quot; + lastChar + &quot;，position=&quot; + position );\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;// 这里返回true\r\n\t}\r\n```\r\n\r\n```\r\nAssert.assertEquals(true, like(&quot;abc_d&quot;, &quot;abc\\\\_d&quot;));\r\n\t\tAssert.assertEquals(true, like(&quot;abc%d&quot;, &quot;abc\\\\%%d&quot;));\r\n\t\tAssert.assertEquals(false, like(&quot;abcd&quot;, &quot;abc\\\\_d&quot;));\r\n\r\n\t\tString source = &quot;1abcd&quot;;\r\n\t\tAssert.assertEquals(true, like(source, &quot;_%d&quot;));\r\n\t\tAssert.assertEquals(false, like(source, &quot;%%a&quot;));\r\n\t\tAssert.assertEquals(false, like(source, &quot;1&quot;));\r\n\t\tAssert.assertEquals(true, like(source, &quot;%d&quot;));\r\n\t\tAssert.assertEquals(true, like(source, &quot;%%%%&quot;));\r\n\t\tAssert.assertEquals(true, like(source, &quot;1%_&quot;));\r\n\t\tAssert.assertEquals(false, like(source, &quot;1%_2&quot;));\r\n\t\tAssert.assertEquals(false, like(source, &quot;1abcdef&quot;));\r\n\t\tAssert.assertEquals(true, like(source, &quot;1abcd&quot;));\r\n\t\tAssert.assertEquals(false, like(source, &quot;1abcde&quot;));\r\n\r\n\t\t// 下面几个case很有代表性\r\n\t\tAssert.assertEquals(true, like(source, &quot;_%_&quot;));\r\n\t\tAssert.assertEquals(true, like(source, &quot;_%____&quot;));\r\n\t\tAssert.assertEquals(true, like(source, &quot;_____&quot;));// 5个\r\n\t\tAssert.assertEquals(false, like(source, &quot;___&quot;));// 3个\r\n\t\tAssert.assertEquals(false, like(source, &quot;__%____&quot;));// 6个\r\n\t\tAssert.assertEquals(false, like(source, &quot;1&quot;));\r\n\r\n\t\tAssert.assertEquals(false, like(source, &quot;a_%b&quot;));\r\n\t\tAssert.assertEquals(true, like(source, &quot;1%&quot;));\r\n\t\tAssert.assertEquals(false, like(source, &quot;d%&quot;));\r\n\t\tAssert.assertEquals(true, like(source, &quot;_%&quot;));\r\n\t\tAssert.assertEquals(true, like(source, &quot;_abc%&quot;));\r\n\t\tAssert.assertEquals(true, like(source, &quot;%d&quot;));\r\n\t\tAssert.assertEquals(true, like(source, &quot;%abc%&quot;));\r\n\t\tAssert.assertEquals(false, like(source, &quot;ab_%&quot;));\r\n\r\n\t\tAssert.assertEquals(true, like(source, &quot;1ab__&quot;));\r\n\t\tAssert.assertEquals(true, like(source, &quot;1ab__%&quot;));\r\n\t\tAssert.assertEquals(false, like(source, &quot;1ab___&quot;));\r\n\t\tAssert.assertEquals(true, like(source, &quot;%&quot;));\r\n\r\n\t\tAssert.assertEquals(false, like(null, &quot;1ab___&quot;));\r\n\t\tAssert.assertEquals(false, like(source, null));\r\n\t\tAssert.assertEquals(false, like(source, &quot;&quot;));\r\n```","title":"How to implement a SQL like &#39;LIKE&#39; operator in java?","body":"<pre><code>public static boolean like(String source, String exp) {\n        if (source == null || exp == null) {\n            return false;\n        }\n\n        int sourceLength = source.length();\n        int expLength = exp.length();\n\n        if (sourceLength == 0 || expLength == 0) {\n            return false;\n        }\n\n        boolean fuzzy = false;\n        char lastCharOfExp = 0;\n        int positionOfSource = 0;\n\n        for (int i = 0; i &lt; expLength; i++) {\n            char ch = exp.charAt(i);\n\n            // 是否转义\n            boolean escape = false;\n            if (lastCharOfExp == '\\\\') {\n                if (ch == '%' || ch == '_') {\n                    escape = true;\n                    // System.out.println(\"escape \" + ch);\n                }\n            }\n\n            if (!escape &amp;&amp; ch == '%') {\n                fuzzy = true;\n            } else if (!escape &amp;&amp; ch == '_') {\n                if (positionOfSource &gt;= sourceLength) {\n                    return false;\n                }\n\n                positionOfSource++;// &lt;&lt;&lt;----- 往后加1\n            } else if (ch != '\\\\') {// 其他字符，但是排查了转义字符\n                if (positionOfSource &gt;= sourceLength) {// 已经超过了source的长度了\n                    return false;\n                }\n\n                if (lastCharOfExp == '%') { // 上一个字符是%，要特别对待\n                    int tp = source.indexOf(ch);\n                    // System.out.println(\"上一个字符=%，当前字符是=\" + ch + \"，position=\" + position + \"，tp=\" + tp);\n\n                    if (tp == -1) { // 匹配不到这个字符，直接退出\n                        return false;\n                    }\n\n                    if (tp &gt;= positionOfSource) {\n                        positionOfSource = tp + 1;// &lt;&lt;&lt;----- 往下继续\n\n                        if (i == expLength - 1 &amp;&amp; positionOfSource &lt; sourceLength) { // exp已经是最后一个字符了，此刻检查source是不是最后一个字符\n                            return false;\n                        }\n                    } else {\n                        return false;\n                    }\n                } else if (source.charAt(positionOfSource) == ch) {// 在这个位置找到了ch字符\n                    positionOfSource++;\n                } else {\n                    return false;\n                }\n            }\n\n            lastCharOfExp = ch;// &lt;&lt;&lt;----- 赋值\n            // System.out.println(\"当前字符是=\" + ch + \"，position=\" + position);\n        }\n\n        // expr的字符循环完了，如果不是模糊的，看在source里匹配的位置是否到达了source的末尾\n        if (!fuzzy &amp;&amp; positionOfSource &lt; sourceLength) {\n            // System.out.println(\"上一个字符=\" + lastChar + \"，position=\" + position );\n\n            return false;\n        }\n\n        return true;// 这里返回true\n    }\n</code></pre>\n\n<pre><code>Assert.assertEquals(true, like(\"abc_d\", \"abc\\\\_d\"));\n        Assert.assertEquals(true, like(\"abc%d\", \"abc\\\\%%d\"));\n        Assert.assertEquals(false, like(\"abcd\", \"abc\\\\_d\"));\n\n        String source = \"1abcd\";\n        Assert.assertEquals(true, like(source, \"_%d\"));\n        Assert.assertEquals(false, like(source, \"%%a\"));\n        Assert.assertEquals(false, like(source, \"1\"));\n        Assert.assertEquals(true, like(source, \"%d\"));\n        Assert.assertEquals(true, like(source, \"%%%%\"));\n        Assert.assertEquals(true, like(source, \"1%_\"));\n        Assert.assertEquals(false, like(source, \"1%_2\"));\n        Assert.assertEquals(false, like(source, \"1abcdef\"));\n        Assert.assertEquals(true, like(source, \"1abcd\"));\n        Assert.assertEquals(false, like(source, \"1abcde\"));\n\n        // 下面几个case很有代表性\n        Assert.assertEquals(true, like(source, \"_%_\"));\n        Assert.assertEquals(true, like(source, \"_%____\"));\n        Assert.assertEquals(true, like(source, \"_____\"));// 5个\n        Assert.assertEquals(false, like(source, \"___\"));// 3个\n        Assert.assertEquals(false, like(source, \"__%____\"));// 6个\n        Assert.assertEquals(false, like(source, \"1\"));\n\n        Assert.assertEquals(false, like(source, \"a_%b\"));\n        Assert.assertEquals(true, like(source, \"1%\"));\n        Assert.assertEquals(false, like(source, \"d%\"));\n        Assert.assertEquals(true, like(source, \"_%\"));\n        Assert.assertEquals(true, like(source, \"_abc%\"));\n        Assert.assertEquals(true, like(source, \"%d\"));\n        Assert.assertEquals(true, like(source, \"%abc%\"));\n        Assert.assertEquals(false, like(source, \"ab_%\"));\n\n        Assert.assertEquals(true, like(source, \"1ab__\"));\n        Assert.assertEquals(true, like(source, \"1ab__%\"));\n        Assert.assertEquals(false, like(source, \"1ab___\"));\n        Assert.assertEquals(true, like(source, \"%\"));\n\n        Assert.assertEquals(false, like(null, \"1ab___\"));\n        Assert.assertEquals(false, like(source, null));\n        Assert.assertEquals(false, like(source, \"\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17416456,"reputation":1,"user_id":12622738,"display_name":"Joshua Gerth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1577681023,"creation_date":1577681023,"answer_id":59525814,"question_id":898405,"body_markdown":"Check out https://github.com/hrakaroo/glob-library-java.  \r\n\r\nIt&#39;s a zero dependency library in Java for doing glob (and sql like) type of comparisons.  Over a large data set it is faster than translating to a regular expression.\r\n\r\nBasic syntax \r\n```\r\nMatchingEngine m = GlobPattern.compile(&quot;dog%cat\\%goat_&quot;, &#39;%&#39;, &#39;_&#39;, GlobPattern.HANDLE_ESCAPES);\r\nif (m.matches(str)) { ... }\r\n```","title":"How to implement a SQL like &#39;LIKE&#39; operator in java?","body":"<p>Check out <a href=\"https://github.com/hrakaroo/glob-library-java\" rel=\"nofollow noreferrer\">https://github.com/hrakaroo/glob-library-java</a>.  </p>\n\n<p>It's a zero dependency library in Java for doing glob (and sql like) type of comparisons.  Over a large data set it is faster than translating to a regular expression.</p>\n\n<p>Basic syntax </p>\n\n<pre><code>MatchingEngine m = GlobPattern.compile(\"dog%cat\\%goat_\", '%', '_', GlobPattern.HANDLE_ESCAPES);\nif (m.matches(str)) { ... }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9267387,"reputation":193,"user_id":6882456,"display_name":"Ahmed Mourad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1613307420,"creation_date":1613307420,"answer_id":66195642,"question_id":898405,"body_markdown":"This&#39;s my take on this, it&#39;s in Kotlin but can be converted to Java with little effort:\r\n\r\n    val percentageRegex = Regex(&quot;&quot;&quot;(?&lt;!\\\\)%&quot;&quot;&quot;)\r\n    val underscoreRegex = Regex(&quot;&quot;&quot;(?&lt;!\\\\)_&quot;&quot;&quot;)\r\n    \r\n    infix fun String.like(predicate: String): Boolean {\r\n    \r\n        //Split the text by every % not preceded by a slash.\r\n        //We transform each slice before joining them with .* as a separator.\r\n        return predicate.split(percentageRegex).joinToString(&quot;.*&quot;) { percentageSlice -&gt;\r\n\r\n            //Split the text by every _ not preceded by a slash.\r\n            //We transform each slice before joining them with . as a separator.\r\n            percentageSlice.split(underscoreRegex).joinToString(&quot;.&quot;) { underscoreSlice -&gt;\r\n\r\n                //Each slice is wrapped in &quot;Regex quotes&quot; to ignore all\r\n                // the metacharacters they contain.\r\n                //We also remove the slashes from the escape sequences\r\n                // since they are now treated literally.\r\n                Pattern.quote(\r\n                    underscoreSlice.replace(&quot;\\\\_&quot;, &quot;_&quot;).replace(&quot;\\\\%&quot;, &quot;%&quot;)\r\n                )\r\n            }\r\n\r\n        }.let { &quot;^$it$&quot; }.toRegex().matches(this@like)\r\n    }\r\n\r\nIt might not be the most performant of all the solutions here, but it&#39;s probably the most accurate.\r\n\r\nIt ignores all the other Regex metacharacters other than % and _ and also supports escaping them with a slash.","title":"How to implement a SQL like &#39;LIKE&#39; operator in java?","body":"<p>This's my take on this, it's in Kotlin but can be converted to Java with little effort:</p>\n<pre><code>val percentageRegex = Regex(&quot;&quot;&quot;(?&lt;!\\\\)%&quot;&quot;&quot;)\nval underscoreRegex = Regex(&quot;&quot;&quot;(?&lt;!\\\\)_&quot;&quot;&quot;)\n\ninfix fun String.like(predicate: String): Boolean {\n\n    //Split the text by every % not preceded by a slash.\n    //We transform each slice before joining them with .* as a separator.\n    return predicate.split(percentageRegex).joinToString(&quot;.*&quot;) { percentageSlice -&gt;\n\n        //Split the text by every _ not preceded by a slash.\n        //We transform each slice before joining them with . as a separator.\n        percentageSlice.split(underscoreRegex).joinToString(&quot;.&quot;) { underscoreSlice -&gt;\n\n            //Each slice is wrapped in &quot;Regex quotes&quot; to ignore all\n            // the metacharacters they contain.\n            //We also remove the slashes from the escape sequences\n            // since they are now treated literally.\n            Pattern.quote(\n                underscoreSlice.replace(&quot;\\\\_&quot;, &quot;_&quot;).replace(&quot;\\\\%&quot;, &quot;%&quot;)\n            )\n        }\n\n    }.let { &quot;^$it$&quot; }.toRegex().matches(this@like)\n}\n</code></pre>\n<p>It might not be the most performant of all the solutions here, but it's probably the most accurate.</p>\n<p>It ignores all the other Regex metacharacters other than % and _ and also supports escaping them with a slash.</p>\n"},{"tags":[],"owner":{"account_id":3017663,"reputation":121,"user_id":2559343,"display_name":"Erick Osc&#225;tegui"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1645552409,"creation_date":1645552409,"answer_id":71226096,"question_id":898405,"body_markdown":"I have a similar requirement, which may help, with some modifications, here is the code:\r\n\r\n    package codeSamplesWithoutMaven;\r\n\r\npublic class TestLikeInJava {\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tString fromDb = &quot;erick@gmail.com&quot;;\r\n\t\tString str1 = &quot;*gmail*&quot;;\r\n\t\tString str2 = &quot;*erick&quot;;\r\n\t\tString str3 = &quot;*rick&quot;;\r\n\t\tString str4 = &quot;*.com&quot;;\r\n\t\tString str5 = &quot;erick*&quot;;\r\n\t\tString str6 = &quot;ck@gmail*&quot;;\r\n\t\tSystem.out.println(belongsToStringWithWildcards(str1, fromDb));\r\n\t\tSystem.out.println(belongsToStringWithWildcards(str2, fromDb));\r\n\t\tSystem.out.println(belongsToStringWithWildcards(str3, fromDb));\r\n\t\tSystem.out.println(belongsToStringWithWildcards(str4, fromDb));\r\n\t\tSystem.out.println(belongsToStringWithWildcards(str5, fromDb));\r\n\t\tSystem.out.println(belongsToStringWithWildcards(str6, fromDb));\r\n\t}\r\n\t\r\n\tprivate static Boolean belongsToStringWithWildcards(String strToTest, String targetStr) {\r\n\t\tBoolean result = Boolean.FALSE;\r\n\t\tint type = 0; //1:start, 2:end, 3:both\r\n\t\tif (strToTest.startsWith(&quot;*&quot;) &amp;&amp; strToTest.endsWith(&quot;*&quot;)) {\r\n\t\t\ttype = 3;\r\n\t\t} else {\r\n\t\t\tif (strToTest.startsWith(&quot;*&quot;)) {\r\n\t\t\t\ttype = 1;\r\n\t\t\t} else if (strToTest.endsWith(&quot;*&quot;)) {\r\n\t\t\t\ttype = 2;\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(&quot;strToTest &quot; + strToTest + &quot; into &quot; + targetStr + &quot; type &quot; + type);\r\n\t\tstrToTest = strToTest.replaceAll(&quot;[*]&quot;, &quot;&quot;);\r\n\t\tSystem.out.println(&quot;strToTest &quot; + strToTest + &quot; into &quot; + targetStr + &quot; type &quot; + type);\r\n\t\tswitch (type) {\r\n\t\t\tcase 1: result = targetStr.endsWith(strToTest);  \r\n\t\t\t\t\tbreak;\r\n\t\t\tcase 2: result = targetStr.startsWith(strToTest);\r\n\t\t\t\t\tbreak;\r\n\t\t\tcase 3: result = targetStr.contains(strToTest);\r\n\t\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n}\r\n","title":"How to implement a SQL like &#39;LIKE&#39; operator in java?","body":"<p>I have a similar requirement, which may help, with some modifications, here is the code:</p>\n<pre><code>package codeSamplesWithoutMaven;\n</code></pre>\n<p>public class TestLikeInJava {</p>\n<pre><code>public static void main(String[] args) {\n    String fromDb = &quot;erick@gmail.com&quot;;\n    String str1 = &quot;*gmail*&quot;;\n    String str2 = &quot;*erick&quot;;\n    String str3 = &quot;*rick&quot;;\n    String str4 = &quot;*.com&quot;;\n    String str5 = &quot;erick*&quot;;\n    String str6 = &quot;ck@gmail*&quot;;\n    System.out.println(belongsToStringWithWildcards(str1, fromDb));\n    System.out.println(belongsToStringWithWildcards(str2, fromDb));\n    System.out.println(belongsToStringWithWildcards(str3, fromDb));\n    System.out.println(belongsToStringWithWildcards(str4, fromDb));\n    System.out.println(belongsToStringWithWildcards(str5, fromDb));\n    System.out.println(belongsToStringWithWildcards(str6, fromDb));\n}\n\nprivate static Boolean belongsToStringWithWildcards(String strToTest, String targetStr) {\n    Boolean result = Boolean.FALSE;\n    int type = 0; //1:start, 2:end, 3:both\n    if (strToTest.startsWith(&quot;*&quot;) &amp;&amp; strToTest.endsWith(&quot;*&quot;)) {\n        type = 3;\n    } else {\n        if (strToTest.startsWith(&quot;*&quot;)) {\n            type = 1;\n        } else if (strToTest.endsWith(&quot;*&quot;)) {\n            type = 2;\n        }\n    }\n    System.out.println(&quot;strToTest &quot; + strToTest + &quot; into &quot; + targetStr + &quot; type &quot; + type);\n    strToTest = strToTest.replaceAll(&quot;[*]&quot;, &quot;&quot;);\n    System.out.println(&quot;strToTest &quot; + strToTest + &quot; into &quot; + targetStr + &quot; type &quot; + type);\n    switch (type) {\n        case 1: result = targetStr.endsWith(strToTest);  \n                break;\n        case 2: result = targetStr.startsWith(strToTest);\n                break;\n        case 3: result = targetStr.contains(strToTest);\n                break;\n    }\n    return result;\n}\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":27251717,"reputation":1,"user_id":20776054,"display_name":"user20776054"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1671026750,"creation_date":1671026303,"answer_id":74799394,"question_id":898405,"body_markdown":"from https://www.tutorialspoint.com/java/java_string_matches.htm\r\n\r\n```\r\nimport java.io.*;\r\npublic class Test {\r\n\r\n   public static void main(String args[]) {\r\n      String Str = new String(&quot;Welcome to Tutorialspoint.com&quot;);\r\n\r\n      System.out.print(&quot;Return Value :&quot; );\r\n      System.out.println(Str.matches(&quot;(.*)Tutorials(.*)&quot;));\r\n\r\n      System.out.print(&quot;Return Value :&quot; );\r\n      System.out.println(Str.matches(&quot;Tutorials&quot;));\r\n\r\n      System.out.print(&quot;Return Value :&quot; );\r\n      System.out.println(Str.matches(&quot;Welcome(.*)&quot;));\r\n   }\r\n}\r\n```","title":"How to implement a SQL like &#39;LIKE&#39; operator in java?","body":"<p>from <a href=\"https://www.tutorialspoint.com/java/java_string_matches.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/java/java_string_matches.htm</a></p>\n<pre><code>import java.io.*;\npublic class Test {\n\n   public static void main(String args[]) {\n      String Str = new String(&quot;Welcome to Tutorialspoint.com&quot;);\n\n      System.out.print(&quot;Return Value :&quot; );\n      System.out.println(Str.matches(&quot;(.*)Tutorials(.*)&quot;));\n\n      System.out.print(&quot;Return Value :&quot; );\n      System.out.println(Str.matches(&quot;Tutorials&quot;));\n\n      System.out.print(&quot;Return Value :&quot; );\n      System.out.println(Str.matches(&quot;Welcome(.*)&quot;));\n   }\n}\n</code></pre>\n"}],"owner":{"account_id":33225,"reputation":15469,"user_id":92813,"accept_rate":71,"display_name":"Chris"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":148244,"favorite_count":0,"down_vote_count":1,"up_vote_count":48,"answer_count":18,"score":47,"last_activity_date":1671026750,"creation_date":1243005269,"question_id":898405,"body_markdown":"I need a comparator in java which has the same semantics as the sql &#39;like&#39; operator.\r\nFor example:\r\n\r\n    myComparator.like(&quot;digital&quot;,&quot;%ital%&quot;);\r\n    myComparator.like(&quot;digital&quot;,&quot;%gi?a%&quot;);\r\n    myComparator.like(&quot;digital&quot;,&quot;digi%&quot;);\r\n\r\nshould evaluate to true, and\r\n\r\n    myComparator.like(&quot;digital&quot;,&quot;%cam%&quot;);\r\n    myComparator.like(&quot;digital&quot;,&quot;tal%&quot;);\r\n\r\nshould evaluate to false. Any ideas how to implement such a comparator or does anyone know an implementation with the same semantics? Can this be done using a regular expression?\r\n","title":"How to implement a SQL like &#39;LIKE&#39; operator in java?","body":"<p>I need a comparator in java which has the same semantics as the sql 'like' operator.\nFor example:</p>\n\n<pre><code>myComparator.like(\"digital\",\"%ital%\");\nmyComparator.like(\"digital\",\"%gi?a%\");\nmyComparator.like(\"digital\",\"digi%\");\n</code></pre>\n\n<p>should evaluate to true, and</p>\n\n<pre><code>myComparator.like(\"digital\",\"%cam%\");\nmyComparator.like(\"digital\",\"tal%\");\n</code></pre>\n\n<p>should evaluate to false. Any ideas how to implement such a comparator or does anyone know an implementation with the same semantics? Can this be done using a regular expression?</p>\n"},{"tags":["java","list","loops"],"answers":[{"tags":[],"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671026708,"creation_date":1671026708,"answer_id":74799485,"question_id":74799340,"body_markdown":"With respect to time complexity, both are quadratic, *O(n&lt;sup&gt;2&lt;/sup&gt;)*. Your second option might&lt;sup&gt;1&lt;/sup&gt; be faster in practice, but it is still considered *O(n&lt;sup&gt;2&lt;/sup&gt;)*.\r\n\r\n\r\nTo make it linear, *O(n)*, you have to be willing to spend *O(n)* extra space. \r\n\r\n\r\nThe below code, builds an auxiliary map having instances of `X` keyed by their id.\r\n\r\n    Map&lt;Long, X&gt; xObjectsById = xList.stream()\r\n            .collect(Collectors.toMap(X::getId, Function.identity())));\r\n\r\nThen, we can loop through `Y` objects and get the corresponding `X` from the map.\r\n   \r\n    for (Y y : yList) {\r\n        xObjectsById.get(y.getXId())\r\n                .setY(y);        \r\n    }\r\n\r\n\r\n---\r\n&lt;sup&gt;1&lt;/sup&gt; You have measure the performance to conclude this. Moreover, the second option does additional operations of deletion which have to be accounted for. Also how good/bad it performs depends on what sort of list you have.","title":"Is it more efficient to loop over a list each time or remove elements as I find the one I want in Java?","body":"<p>With respect to time complexity, both are quadratic, <em>O(n<sup>2</sup>)</em>. Your second option might<sup>1</sup> be faster in practice, but it is still considered <em>O(n<sup>2</sup>)</em>.</p>\n<p>To make it linear, <em>O(n)</em>, you have to be willing to spend <em>O(n)</em> extra space.</p>\n<p>The below code, builds an auxiliary map having instances of <code>X</code> keyed by their id.</p>\n<pre><code>Map&lt;Long, X&gt; xObjectsById = xList.stream()\n        .collect(Collectors.toMap(X::getId, Function.identity())));\n</code></pre>\n<p>Then, we can loop through <code>Y</code> objects and get the corresponding <code>X</code> from the map.</p>\n<pre><code>for (Y y : yList) {\n    xObjectsById.get(y.getXId())\n            .setY(y);        \n}\n</code></pre>\n<hr />\n<p><sup>1</sup> You have measure the performance to conclude this. Moreover, the second option does additional operations of deletion which have to be accounted for. Also how good/bad it performs depends on what sort of list you have.</p>\n"}],"owner":{"account_id":18044530,"reputation":23,"user_id":13115866,"display_name":"LaplacesCat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74799485,"answer_count":1,"score":0,"last_activity_date":1671026708,"creation_date":1671026042,"question_id":74799340,"body_markdown":"I have two lists of objects, say of X and Y.\r\n\r\nThere is a foreign key in objects of Y which show which object of X they are assigned to. This is a one-to-one relationship, no duplicates. As such, each time a Y object is found, it is not needed in the list anymore.\r\n\r\n```\r\nclass X {\r\n    Long id;\r\n    Y y;\r\n    ...\r\n}\r\n\r\nclass Y {\r\n    Long id;\r\n    Long xId;\r\n    ...\r\n}\r\n```\r\n\r\n---\r\n\r\n\r\nWould it be more efficient to loop through the list of Y for each object of X, or would it be quicker to remove the Y object from its list?\r\n\r\n```\r\nfor(X x: xList) {\r\n    for(Y y: yList) {\r\n        if(y.getXId() == x.getId()) {\r\n            x.setY(y);\r\n            break;\r\n        }\r\n    }\r\n}\r\n```\r\nvs\r\n```\r\nfor(X x: xList) {\r\n    for(int i = 0; i &lt; yList.size(); i++) {\r\n        Y y = yList.get(i);\r\n        if(y.getXId() == x.getId()) {\r\n            x.setY(y);\r\n            yList.remove(i);\r\n            i--;\r\n            break;\r\n        }\r\n    }\r\n}\r\n```","title":"Is it more efficient to loop over a list each time or remove elements as I find the one I want in Java?","body":"<p>I have two lists of objects, say of X and Y.</p>\n<p>There is a foreign key in objects of Y which show which object of X they are assigned to. This is a one-to-one relationship, no duplicates. As such, each time a Y object is found, it is not needed in the list anymore.</p>\n<pre><code>class X {\n    Long id;\n    Y y;\n    ...\n}\n\nclass Y {\n    Long id;\n    Long xId;\n    ...\n}\n</code></pre>\n<hr />\n<p>Would it be more efficient to loop through the list of Y for each object of X, or would it be quicker to remove the Y object from its list?</p>\n<pre><code>for(X x: xList) {\n    for(Y y: yList) {\n        if(y.getXId() == x.getId()) {\n            x.setY(y);\n            break;\n        }\n    }\n}\n</code></pre>\n<p>vs</p>\n<pre><code>for(X x: xList) {\n    for(int i = 0; i &lt; yList.size(); i++) {\n        Y y = yList.get(i);\n        if(y.getXId() == x.getId()) {\n            x.setY(y);\n            yList.remove(i);\n            i--;\n            break;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","junit5"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1671027392,"post_id":74799437,"comment_id":132008595,"body_markdown":"What does your `LegalEntityRepository` look like? The error isn&#39;t wrong so I suspect you did something like `extends LegalEntityReadOnlyRepository, CrudRepository`","body":"What does your <code>LegalEntityRepository</code> look like? The error isn&#39;t wrong so I suspect you did something like <code>extends LegalEntityReadOnlyRepository, CrudRepository</code>"},{"owner":{"account_id":355604,"reputation":421,"user_id":3506535,"accept_rate":29,"display_name":"Playing With BI"},"score":0,"creation_date":1671029009,"post_id":74799437,"comment_id":132009287,"body_markdown":"Yes, this is exactly what the article I referenced above suggests. I want to have a read-only resource &quot;LegalEntity&quot; but for unit test I want to create new LegalEntity instances, therefore a read-only repository is created in &quot;main&quot; and another repository which extends CrudRepository (to generate, i.e., the save functionality) in the &quot;test&quot; scope.","body":"Yes, this is exactly what the article I referenced above suggests. I want to have a read-only resource &quot;LegalEntity&quot; but for unit test I want to create new LegalEntity instances, therefore a read-only repository is created in &quot;main&quot; and another repository which extends CrudRepository (to generate, i.e., the save functionality) in the &quot;test&quot; scope."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1671029310,"post_id":74799437,"comment_id":132009411,"body_markdown":"Which is wrong. You shouldn&#39;t extend that readonly interface. As that will, as the error tells you, result in 2 beans implementing this interface. Instead you should **only extend `CrudRepository`**.","body":"Which is wrong. You shouldn&#39;t extend that readonly interface. As that will, as the error tells you, result in 2 beans implementing this interface. Instead you should <b>only extend <code>CrudRepository</code></b>."},{"owner":{"account_id":355604,"reputation":421,"user_id":3506535,"accept_rate":29,"display_name":"Playing With BI"},"score":0,"creation_date":1671031025,"post_id":74799437,"comment_id":132010089,"body_markdown":"@M.Deinum I remove the inheritance from LegalEntityReadOnlyRepository and extend only from CrudRepository as suggested and now is working.","body":"@M.Deinum I remove the inheritance from LegalEntityReadOnlyRepository and extend only from CrudRepository as suggested and now is working."}],"owner":{"account_id":355604,"reputation":421,"user_id":3506535,"accept_rate":29,"display_name":"Playing With BI"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":275,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671026520,"creation_date":1671026520,"question_id":74799437,"body_markdown":"I&#39;m creating a read only REST API using Spring Boot 2.7 and Java 19\r\n\r\nI followed the idea posted here: https://www.baeldung.com/spring-data-read-only-repository\r\n\r\nI&#39;ve created a read only generic repository:\r\n\r\n    package com.scope.mdm.domain;\r\n\r\n    import java.util.List;\r\n    \r\n    import org.springframework.data.repository.NoRepositoryBean;\r\n    import org.springframework.data.repository.Repository;\r\n    \r\n    @NoRepositoryBean\r\n    public interface ReadOnlyRepository&lt;T, ID&gt; extends Repository&lt;T, ID&gt; {\r\n        List&lt;T&gt; findAll();\r\n    }\r\n\r\nThis is a simplify view of the entity definition:\r\n\r\n    package com.scope.mdm.domain;\r\n    \r\n    import javax.persistence.Column;\r\n    import javax.persistence.Table;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.Id;\r\n    \r\n    import org.hibernate.annotations.Immutable;\r\n    \r\n    @Entity\r\n    @Immutable\r\n    @Table(name = &quot;v_LegalEntity&quot;, schema = &quot;entity_reference&quot;)\r\n    public class LegalEntity {\r\n        @Id\r\n        @Column(name = &quot;LegalEntityId&quot;)\r\n        Integer legalEntityId;\r\n        @Column(name = &quot;SO_Id&quot;)\r\n        String soId;\r\n        @Column(name = &quot;Source_LegalEntityId&quot;)\r\n\r\nI implemented a read only repository as follows:\r\n\r\n    package com.scope.mdm.domain;\r\n    \r\n    import java.util.List;\r\n    import java.util.Optional;\r\n    \r\n    public interface LegalEntityReadOnlyRepository extends ReadOnlyRepository&lt;LegalEntity, Integer&gt; {\r\n    \r\n        // Fetch legal entities by Scope One Id\r\n        Optional&lt;LegalEntity&gt; findBySoId(String soId);\r\n    \r\n        // Fetch legal entities by its data source provided ID\r\n        LegalEntity findByLegalEntityId(String legalEntityId);\r\n    \r\n        // Legal entities containing the name\r\n        List&lt;LegalEntity&gt; findByLegalEntityNameLike(String legalEntityName);\r\n    \r\n    }\r\n\r\nThis is the controller:\r\n\r\n    package com.scope.mdm.web;\r\n    \r\n    import org.springframework.web.bind.annotation.RestController;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RequestMethod;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    \r\n    import com.scope.mdm.domain.LegalEntity;\r\n    import com.scope.mdm.domain.LegalEntityReadOnlyRepository;\r\n    \r\n    @RestController\r\n    public class LegalEntityController {\r\n        @Autowired\r\n        private LegalEntityReadOnlyRepository repository;\r\n    \r\n        @RequestMapping(value=&quot;/legalEntities&quot;, method=RequestMethod.GET)\r\n        public Iterable&lt;LegalEntity&gt; getLegalEntity() {\r\n            return repository.findAll();\r\n        }\r\n    }\r\n\r\nI want to do a simple unit test like this:\r\n\r\n    package com.scope.mdm;\r\n    \r\n    import org.junit.jupiter.api.Test;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.test.context.SpringBootTest;\r\n    \r\n    import com.scope.mdm.domain.LegalEntityReadOnlyRepository;\r\n    import com.scope.mdm.domain.LegalEntityRepository;\r\n    \r\n    import org.junit.jupiter.api.Assertions;\r\n    \r\n    @SpringBootTest(classes = mdmWebAPIApplication.class)\r\n    public class legalEntitySearchTest {\r\n        @Autowired\r\n        private LegalEntityRepository repository;\r\n        @Autowired\r\n        private LegalEntityReadOnlyRepository repositoryReadOnly;\r\n    \r\n        @Test\r\n        public void contextLoads() {\r\n            Assertions.assertNotNull(repositoryReadOnly);\r\n            Assertions.assertNotNull(repository);\r\n        }\r\n\r\n}\r\n\r\nWhen running the test from VSCODE I get this error:\r\n\r\n&gt; org.springframework.beans.factory.NoUniqueBeanDefinitionException: No\r\n&gt; qualifying bean of type\r\n&gt; &#39;com.scope.mdm.domain.LegalEntityReadOnlyRepository&#39; available:\r\n&gt; expected single matching bean but found 2:\r\n&gt; legalEntityRepository,legalEntityReadOnlyRepository\r\n\r\nI tried with the @Qualifier annotation to explicitly specify the bean but the result is the same.","title":"Read only Spring Boot App- NoUniqueBeanDefinitionException: No qualifying bean of type available: expected single matching bean but found 2","body":"<p>I'm creating a read only REST API using Spring Boot 2.7 and Java 19</p>\n<p>I followed the idea posted here: <a href=\"https://www.baeldung.com/spring-data-read-only-repository\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-data-read-only-repository</a></p>\n<p>I've created a read only generic repository:</p>\n<pre><code>package com.scope.mdm.domain;\n\nimport java.util.List;\n\nimport org.springframework.data.repository.NoRepositoryBean;\nimport org.springframework.data.repository.Repository;\n\n@NoRepositoryBean\npublic interface ReadOnlyRepository&lt;T, ID&gt; extends Repository&lt;T, ID&gt; {\n    List&lt;T&gt; findAll();\n}\n</code></pre>\n<p>This is a simplify view of the entity definition:</p>\n<pre><code>package com.scope.mdm.domain;\n\nimport javax.persistence.Column;\nimport javax.persistence.Table;\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\n\nimport org.hibernate.annotations.Immutable;\n\n@Entity\n@Immutable\n@Table(name = &quot;v_LegalEntity&quot;, schema = &quot;entity_reference&quot;)\npublic class LegalEntity {\n    @Id\n    @Column(name = &quot;LegalEntityId&quot;)\n    Integer legalEntityId;\n    @Column(name = &quot;SO_Id&quot;)\n    String soId;\n    @Column(name = &quot;Source_LegalEntityId&quot;)\n</code></pre>\n<p>I implemented a read only repository as follows:</p>\n<pre><code>package com.scope.mdm.domain;\n\nimport java.util.List;\nimport java.util.Optional;\n\npublic interface LegalEntityReadOnlyRepository extends ReadOnlyRepository&lt;LegalEntity, Integer&gt; {\n\n    // Fetch legal entities by Scope One Id\n    Optional&lt;LegalEntity&gt; findBySoId(String soId);\n\n    // Fetch legal entities by its data source provided ID\n    LegalEntity findByLegalEntityId(String legalEntityId);\n\n    // Legal entities containing the name\n    List&lt;LegalEntity&gt; findByLegalEntityNameLike(String legalEntityName);\n\n}\n</code></pre>\n<p>This is the controller:</p>\n<pre><code>package com.scope.mdm.web;\n\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport com.scope.mdm.domain.LegalEntity;\nimport com.scope.mdm.domain.LegalEntityReadOnlyRepository;\n\n@RestController\npublic class LegalEntityController {\n    @Autowired\n    private LegalEntityReadOnlyRepository repository;\n\n    @RequestMapping(value=&quot;/legalEntities&quot;, method=RequestMethod.GET)\n    public Iterable&lt;LegalEntity&gt; getLegalEntity() {\n        return repository.findAll();\n    }\n}\n</code></pre>\n<p>I want to do a simple unit test like this:</p>\n<pre><code>package com.scope.mdm;\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\n\nimport com.scope.mdm.domain.LegalEntityReadOnlyRepository;\nimport com.scope.mdm.domain.LegalEntityRepository;\n\nimport org.junit.jupiter.api.Assertions;\n\n@SpringBootTest(classes = mdmWebAPIApplication.class)\npublic class legalEntitySearchTest {\n    @Autowired\n    private LegalEntityRepository repository;\n    @Autowired\n    private LegalEntityReadOnlyRepository repositoryReadOnly;\n\n    @Test\n    public void contextLoads() {\n        Assertions.assertNotNull(repositoryReadOnly);\n        Assertions.assertNotNull(repository);\n    }\n</code></pre>\n<p>}</p>\n<p>When running the test from VSCODE I get this error:</p>\n<blockquote>\n<p>org.springframework.beans.factory.NoUniqueBeanDefinitionException: No\nqualifying bean of type\n'com.scope.mdm.domain.LegalEntityReadOnlyRepository' available:\nexpected single matching bean but found 2:\nlegalEntityRepository,legalEntityReadOnlyRepository</p>\n</blockquote>\n<p>I tried with the @Qualifier annotation to explicitly specify the bean but the result is the same.</p>\n"},{"tags":["java","android","react-native","android-studio"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1670985892,"post_id":74792567,"comment_id":131997818,"body_markdown":"That’s a sizeable amount of code to ask us to read and try out. Can you instead create a [mre], please?","body":"That’s a sizeable amount of code to ask us to read and try out. Can you instead create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, please?"},{"owner":{"account_id":16132132,"reputation":119,"user_id":19181443,"display_name":"Vithor Carlos"},"score":1,"creation_date":1670986114,"post_id":74792567,"comment_id":131997855,"body_markdown":"I removed all the code and have been redoing everything from scratch little by little. Building every line of code. And I found out that the error is when I import and call the: private final AppUpdateManager mAppUpdateManager = AppUpdateManagerFactory.create(this);\n\nHow can I resolve this? I imported the libraries following the documentation","body":"I removed all the code and have been redoing everything from scratch little by little. Building every line of code. And I found out that the error is when I import and call the: private final AppUpdateManager mAppUpdateManager = AppUpdateManagerFactory.create(this);  How can I resolve this? I imported the libraries following the documentation"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1670986281,"post_id":74792567,"comment_id":131997883,"body_markdown":"That is very valuable information, thank you. Please put it in the question. Use the [Edit](https://stackoverflow.com/posts/74792567/edit) link.","body":"That is very valuable information, thank you. Please put it in the question. Use the <a href=\"https://stackoverflow.com/posts/74792567/edit\">Edit</a> link."},{"owner":{"account_id":16132132,"reputation":119,"user_id":19181443,"display_name":"Vithor Carlos"},"score":0,"creation_date":1670986425,"post_id":74792567,"comment_id":131997904,"body_markdown":"Right... I have edited my post...\nI&#39;m struggling to find a solution","body":"Right... I have edited my post... I&#39;m struggling to find a solution"}],"answers":[{"tags":[],"owner":{"account_id":16132132,"reputation":119,"user_id":19181443,"display_name":"Vithor Carlos"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1671026339,"creation_date":1671026339,"answer_id":74799401,"question_id":74792567,"body_markdown":"I Has resolved this question\r\nThe problem is \r\n\r\n```\r\nAppUpdateManagerFactory.create(this)\r\n```\r\n\r\nOnly Can be instancied on one time.","title":"My app is crashing after I implement In-App-Update from Play Store","body":"<p>I Has resolved this question\nThe problem is</p>\n<pre><code>AppUpdateManagerFactory.create(this)\n</code></pre>\n<p>Only Can be instancied on one time.</p>\n"}],"owner":{"account_id":16132132,"reputation":119,"user_id":19181443,"display_name":"Vithor Carlos"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":673,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74799401,"answer_count":1,"score":2,"last_activity_date":1671026339,"creation_date":1670979919,"question_id":74792567,"body_markdown":"My app is building successfully but when I open it it closes by itself... \r\n\r\nI was able to successfully implement In-App-Review! But Update is failing and crashing my app on start.\r\n\r\nI have an error in AppUpdateManager. I reproduced the code from scratch line by line... And the app crashed on its own, after build, when I called the App Update Manager:\r\n\r\n```\r\nprivate final AppUpdateManager mAppUpdateManager = AppUpdateManagerFactory.create(this);\r\n```\r\n\r\n\r\nLib to Implement: [https://developer.android.com/guide/playcore/in-app-updates][1]\r\n\r\nMy MainActivity\r\n\r\n```\r\npackage com.baraokeskina;\r\n\r\nimport com.baraokeskina.ReviewsApp.ReviewsManager;\r\nimport com.facebook.react.ReactActivity;\r\nimport com.facebook.react.ReactActivityDelegate;\r\nimport com.facebook.react.ReactRootView;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.material.snackbar.Snackbar;\r\nimport com.google.android.play.core.appupdate.AppUpdateInfo;\r\nimport com.google.android.play.core.appupdate.AppUpdateManager;\r\nimport com.google.android.play.core.appupdate.AppUpdateManagerFactory;\r\nimport com.google.android.play.core.install.InstallStateUpdatedListener;\r\nimport com.google.android.play.core.install.model.AppUpdateType;\r\nimport com.google.android.play.core.install.model.InstallStatus;\r\nimport com.google.android.play.core.install.model.UpdateAvailability;\r\nimport com.google.android.play.core.review.ReviewInfo;\r\nimport com.google.android.play.core.review.ReviewManager;\r\nimport com.google.android.play.core.review.ReviewManagerFactory;\r\nimport com.swmansion.reanimated.BuildConfig;\r\n\r\nimport android.app.Activity;\r\nimport android.content.Intent;\r\nimport android.content.IntentSender;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.os.Looper;\r\nimport android.widget.Toast;\r\n\r\n\r\n\r\npublic class MainActivity extends ReactActivity {\r\n\r\n  /**\r\n   * Returns the name of the main component registered from JavaScript. This is used to schedule\r\n   * rendering of the component.\r\n   */\r\n  @Override\r\n  protected String getMainComponentName() {\r\n    return &quot;BaraokeSkina&quot;;\r\n  }\r\n\r\n  private ReviewInfo reviewInfo;\r\n  private ReviewManager manager;\r\n  private static final int RC_APP_UPDATE = 22;\r\n\r\n  private final AppUpdateManager mAppUpdateManager = AppUpdateManagerFactory.create(this);\r\n\r\n  @Override\r\n  protected void onCreate(Bundle savedInstanceState) {\r\n    super.onCreate(null);\r\n     activateUpdate();\r\n    if (new ReviewsManager().getDaysAppInstaled(this) &gt;= 4) {\r\n      activateReviewInfo();\r\n    }\r\n\r\n  }\r\n\r\n\r\n  void activateUpdate(){\r\n    Task&lt;AppUpdateInfo&gt; appUpdateInfoTask = mAppUpdateManager.getAppUpdateInfo();\r\n\r\n    appUpdateInfoTask.addOnSuccessListener(result -&gt; {\r\n      if (result.updateAvailability() == UpdateAvailability.UPDATE_AVAILABLE\r\n              &amp;&amp; result.isUpdateTypeAllowed(AppUpdateType.FLEXIBLE)) {\r\n        try {\r\n          mAppUpdateManager.startUpdateFlowForResult(result, AppUpdateType.FLEXIBLE, MainActivity.this, RC_APP_UPDATE);\r\n        } catch (IntentSender.SendIntentException e) {\r\n          System.out.println(e.getMessage());\r\n        }\r\n\r\n      }\r\n    });\r\n    mAppUpdateManager.registerListener(installStateUpdatedListener);\r\n  }\r\n\r\n  private final InstallStateUpdatedListener installStateUpdatedListener = installState -&gt; {\r\n    if (installState.installStatus() == InstallStatus.DOWNLOADED) {\r\n      showCompleteUpdate();\r\n    }\r\n  };\r\n\r\n  @Override\r\n  protected void onStop() {\r\n    super.onStop();\r\n    if (mAppUpdateManager != null) {\r\n      mAppUpdateManager.unregisterListener(installStateUpdatedListener);\r\n    }\r\n  }\r\n\r\n  private void showCompleteUpdate() {\r\n    Snackbar snackbar = Snackbar.make(findViewById(android.R.id.content), &quot;Atualiza&#231;&#227;o pronta para ser Instalada...&quot;,\r\n            Snackbar.LENGTH_INDEFINITE);\r\n\r\n    snackbar.setAction(&quot;Instalar&quot;, view -&gt; mAppUpdateManager.completeUpdate());\r\n\r\n    snackbar.show();\r\n  }\r\n\r\n  void activateReviewInfo()\r\n  {\r\n    Activity context = this;\r\n\r\n    final Handler handler = new Handler(Looper.getMainLooper());\r\n    handler.postDelayed(() -&gt; {\r\n      manager = ReviewManagerFactory.create(context);\r\n\r\n      Task&lt;ReviewInfo&gt; request = manager.requestReviewFlow();\r\n      request.addOnCompleteListener(task -&gt; {\r\n        if (task.isSuccessful()) {\r\n          reviewInfo = task.getResult();\r\n          Task&lt;Void&gt; flow = manager.launchReviewFlow(context, reviewInfo);\r\n          flow.addOnCompleteListener(result -&gt; {\r\n          });\r\n        }\r\n      });\r\n\r\n      request.addOnFailureListener(e -&gt; System.out.println(e.getMessage()));\r\n    }, 15000);\r\n  }\r\n\r\n  @Override\r\n  public void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n    super.onActivityResult(requestCode, resultCode, data);\r\n    if (requestCode == RC_APP_UPDATE &amp;&amp; resultCode != RESULT_OK) {\r\n      Toast.makeText(this, &quot;Cancelado&quot;, Toast.LENGTH_SHORT).show();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the instance of the {@link ReactActivityDelegate}. There the RootView is created and\r\n   * you can specify the rendered you wish to use (Fabric or the older renderer).\r\n   */\r\n  @Override\r\n  protected ReactActivityDelegate createReactActivityDelegate() {\r\n    return new MainActivityDelegate(this, getMainComponentName());\r\n  }\r\n\r\n  public static class MainActivityDelegate extends ReactActivityDelegate {\r\n    public MainActivityDelegate(ReactActivity activity, String mainComponentName) {\r\n      super(activity, mainComponentName);\r\n    }\r\n\r\n    @Override\r\n    protected ReactRootView createRootView() {\r\n      ReactRootView reactRootView = new ReactRootView(getContext());\r\n      // If you opted-in for the New Architecture, we enable the Fabric Renderer.\r\n      reactRootView.setIsFabric(BuildConfig.IS_NEW_ARCHITECTURE_ENABLED);\r\n      return reactRootView;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  @Override\r\n   protected void onDestroy() {\r\n     super.onDestroy();\r\n     reviewInfo = null;\r\n     manager = null;\r\n   }\r\n}\r\n\r\n\r\n```\r\n\r\nBild.gradle implementations \r\n\r\n```\r\ndependencies {\r\n    implementation fileTree(dir: &quot;libs&quot;, include: [&quot;*.jar&quot;])\r\n    implementation &#39;com.facebook.android:facebook-android-sdk:[4,5)&#39;\r\n    implementation &#39;com.google.android.material:material:1.1.0&#39;\r\n    //noinspection GradleDynamicVersion\r\n    implementation &quot;com.facebook.react:react-native:0.68.1!!&quot;  // From node_modules\r\n\r\n    implementation &quot;androidx.swiperefreshlayout:swiperefreshlayout:1.0.0&quot;\r\n\r\n\r\n    debugImplementation(&quot;com.facebook.flipper:flipper:${FLIPPER_VERSION}&quot;) {\r\n        exclude group:&#39;com.facebook.fbjni&#39;\r\n    }\r\n\r\n    debugImplementation(&quot;com.facebook.flipper:flipper-network-plugin:${FLIPPER_VERSION}&quot;) {\r\n        exclude group:&#39;com.facebook.flipper&#39;\r\n        exclude group:&#39;com.squareup.okhttp3&#39;, module:&#39;okhttp&#39;\r\n    }\r\n\r\n    debugImplementation(&quot;com.facebook.flipper:flipper-fresco-plugin:${FLIPPER_VERSION}&quot;) {\r\n        exclude group:&#39;com.facebook.flipper&#39;\r\n    }\r\n\r\n    if (enableHermes) {\r\n        def hermesPath = &quot;../../node_modules/hermes-engine/android/&quot;;\r\n        debugImplementation files(hermesPath + &quot;hermes-debug.aar&quot;)\r\n        releaseImplementation files(hermesPath + &quot;hermes-release.aar&quot;)\r\n    } else {\r\n        implementation jscFlavor\r\n    }\r\n    implementation project(&#39;:react-native-fbsdk-next&#39;)\r\n    implementation project(&#39;:react-native-linear-gradient&#39;)\r\n    implementation project(&#39;:react-native-svg&#39;)\r\n    implementation &quot;androidx.multidex:multidex:2.0.1&quot;\r\n    implementation project(&#39;:react-native-vector-icons&#39;)\r\n    implementation project(&#39;:watermelondb&#39;)\r\n    implementation project(&#39;:watermelondb-jsi&#39;)\r\n    implementation &#39;com.google.android.gms:play-services-tasks:18.0.2&#39;\r\n    implementation project(path: &quot;:@react-native-firebase_analytics&quot;)\r\n    implementation project(path: &quot;:@react-native-firebase_inAppMessaging&quot;)\r\n    implementation &#39;com.google.android.play:review:2.0.1&#39;\r\n    implementation &#39;com.google.android.play:app-update:2.0.1&#39;\r\n    implementation &#39;com.google.android.play:asset-delivery:2.0.1&#39;\r\n    implementation &#39;com.google.android.play:feature-delivery:2.0.1&#39;\r\n}   \r\n\r\n```\r\n\r\nMy Default Config - Build.gradle: \r\n\r\n```\r\n\r\ndefaultConfig {\r\n        applicationId &quot;com.baraokeskina&quot;\r\n        minSdkVersion rootProject.ext.minSdkVersion\r\n        targetSdkVersion rootProject.ext.targetSdkVersion\r\n        versionCode 12\r\n        versionName &quot;1.0.11&quot;\r\n        multiDexEnabled true\r\n        resValue &#39;string&#39;, &quot;CODE_PUSH_APK_BUILD_TIME&quot;, String.format(&quot;\\&quot;%d\\&quot;&quot;, System.currentTimeMillis())\r\n        buildConfigField &quot;boolean&quot;, &quot;IS_NEW_ARCHITECTURE_ENABLED&quot;, isNewArchitectureEnabled().toString()\r\n        vectorDrawables.useSupportLibrary = true\r\n        if (isNewArchitectureEnabled()) {\r\n            // We configure the NDK build only if you decide to opt-in for the New Architecture.\r\n            externalNativeBuild {\r\n                ndkBuild {\r\n                    arguments &quot;APP_PLATFORM=android-21&quot;,\r\n                        &quot;APP_STL=c++_shared&quot;,\r\n                        &quot;NDK_TOOLCHAIN_VERSION=clang&quot;,\r\n                        &quot;GENERATED_SRC_DIR=$buildDir/generated/source&quot;,\r\n                        &quot;PROJECT_BUILD_DIR=$buildDir&quot;,\r\n                        &quot;REACT_ANDROID_DIR=$rootDir/../node_modules/react-native/ReactAndroid&quot;,\r\n                        &quot;REACT_ANDROID_BUILD_DIR=$rootDir/../node_modules/react-native/ReactAndroid/build&quot;\r\n                    cFlags &quot;-Wall&quot;, &quot;-Werror&quot;, &quot;-fexceptions&quot;, &quot;-frtti&quot;, &quot;-DWITH_INSPECTOR=1&quot;\r\n                    cppFlags &quot;-std=c++17&quot;\r\n                    // Make sure this target name is the same you specify inside the\r\n                    // src/main/jni/Android.mk file for the `LOCAL_MODULE` variable.\r\n                    targets &quot;baraokeskina_appmodules&quot;\r\n\r\n                    // Fix for windows limit on number of character in file paths and in command lines\r\n                    if (Os.isFamily(Os.FAMILY_WINDOWS)) {\r\n                        arguments &quot;NDK_OUT=${rootProject.projectDir.getParent()}\\\\.cxx&quot;,\r\n                            &quot;NDK_APP_SHORT_COMMANDS=true&quot;\r\n                    }\r\n                }\r\n            }\r\n            if (!enableSeparateBuildPerCPUArchitecture) {\r\n                ndk {\r\n                    abiFilters (*reactNativeArchitectures())\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n```\r\n\r\n\r\n  [1]: https://developer.android.com/guide/playcore/in-app-updates","title":"My app is crashing after I implement In-App-Update from Play Store","body":"<p>My app is building successfully but when I open it it closes by itself...</p>\n<p>I was able to successfully implement In-App-Review! But Update is failing and crashing my app on start.</p>\n<p>I have an error in AppUpdateManager. I reproduced the code from scratch line by line... And the app crashed on its own, after build, when I called the App Update Manager:</p>\n<pre><code>private final AppUpdateManager mAppUpdateManager = AppUpdateManagerFactory.create(this);\n</code></pre>\n<p>Lib to Implement: <a href=\"https://developer.android.com/guide/playcore/in-app-updates\" rel=\"nofollow noreferrer\">https://developer.android.com/guide/playcore/in-app-updates</a></p>\n<p>My MainActivity</p>\n<pre><code>package com.baraokeskina;\n\nimport com.baraokeskina.ReviewsApp.ReviewsManager;\nimport com.facebook.react.ReactActivity;\nimport com.facebook.react.ReactActivityDelegate;\nimport com.facebook.react.ReactRootView;\nimport com.google.android.gms.tasks.Task;\nimport com.google.android.material.snackbar.Snackbar;\nimport com.google.android.play.core.appupdate.AppUpdateInfo;\nimport com.google.android.play.core.appupdate.AppUpdateManager;\nimport com.google.android.play.core.appupdate.AppUpdateManagerFactory;\nimport com.google.android.play.core.install.InstallStateUpdatedListener;\nimport com.google.android.play.core.install.model.AppUpdateType;\nimport com.google.android.play.core.install.model.InstallStatus;\nimport com.google.android.play.core.install.model.UpdateAvailability;\nimport com.google.android.play.core.review.ReviewInfo;\nimport com.google.android.play.core.review.ReviewManager;\nimport com.google.android.play.core.review.ReviewManagerFactory;\nimport com.swmansion.reanimated.BuildConfig;\n\nimport android.app.Activity;\nimport android.content.Intent;\nimport android.content.IntentSender;\nimport android.os.Bundle;\nimport android.os.Handler;\nimport android.os.Looper;\nimport android.widget.Toast;\n\n\n\npublic class MainActivity extends ReactActivity {\n\n  /**\n   * Returns the name of the main component registered from JavaScript. This is used to schedule\n   * rendering of the component.\n   */\n  @Override\n  protected String getMainComponentName() {\n    return &quot;BaraokeSkina&quot;;\n  }\n\n  private ReviewInfo reviewInfo;\n  private ReviewManager manager;\n  private static final int RC_APP_UPDATE = 22;\n\n  private final AppUpdateManager mAppUpdateManager = AppUpdateManagerFactory.create(this);\n\n  @Override\n  protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(null);\n     activateUpdate();\n    if (new ReviewsManager().getDaysAppInstaled(this) &gt;= 4) {\n      activateReviewInfo();\n    }\n\n  }\n\n\n  void activateUpdate(){\n    Task&lt;AppUpdateInfo&gt; appUpdateInfoTask = mAppUpdateManager.getAppUpdateInfo();\n\n    appUpdateInfoTask.addOnSuccessListener(result -&gt; {\n      if (result.updateAvailability() == UpdateAvailability.UPDATE_AVAILABLE\n              &amp;&amp; result.isUpdateTypeAllowed(AppUpdateType.FLEXIBLE)) {\n        try {\n          mAppUpdateManager.startUpdateFlowForResult(result, AppUpdateType.FLEXIBLE, MainActivity.this, RC_APP_UPDATE);\n        } catch (IntentSender.SendIntentException e) {\n          System.out.println(e.getMessage());\n        }\n\n      }\n    });\n    mAppUpdateManager.registerListener(installStateUpdatedListener);\n  }\n\n  private final InstallStateUpdatedListener installStateUpdatedListener = installState -&gt; {\n    if (installState.installStatus() == InstallStatus.DOWNLOADED) {\n      showCompleteUpdate();\n    }\n  };\n\n  @Override\n  protected void onStop() {\n    super.onStop();\n    if (mAppUpdateManager != null) {\n      mAppUpdateManager.unregisterListener(installStateUpdatedListener);\n    }\n  }\n\n  private void showCompleteUpdate() {\n    Snackbar snackbar = Snackbar.make(findViewById(android.R.id.content), &quot;Atualização pronta para ser Instalada...&quot;,\n            Snackbar.LENGTH_INDEFINITE);\n\n    snackbar.setAction(&quot;Instalar&quot;, view -&gt; mAppUpdateManager.completeUpdate());\n\n    snackbar.show();\n  }\n\n  void activateReviewInfo()\n  {\n    Activity context = this;\n\n    final Handler handler = new Handler(Looper.getMainLooper());\n    handler.postDelayed(() -&gt; {\n      manager = ReviewManagerFactory.create(context);\n\n      Task&lt;ReviewInfo&gt; request = manager.requestReviewFlow();\n      request.addOnCompleteListener(task -&gt; {\n        if (task.isSuccessful()) {\n          reviewInfo = task.getResult();\n          Task&lt;Void&gt; flow = manager.launchReviewFlow(context, reviewInfo);\n          flow.addOnCompleteListener(result -&gt; {\n          });\n        }\n      });\n\n      request.addOnFailureListener(e -&gt; System.out.println(e.getMessage()));\n    }, 15000);\n  }\n\n  @Override\n  public void onActivityResult(int requestCode, int resultCode, Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n    if (requestCode == RC_APP_UPDATE &amp;&amp; resultCode != RESULT_OK) {\n      Toast.makeText(this, &quot;Cancelado&quot;, Toast.LENGTH_SHORT).show();\n    }\n  }\n\n  /**\n   * Returns the instance of the {@link ReactActivityDelegate}. There the RootView is created and\n   * you can specify the rendered you wish to use (Fabric or the older renderer).\n   */\n  @Override\n  protected ReactActivityDelegate createReactActivityDelegate() {\n    return new MainActivityDelegate(this, getMainComponentName());\n  }\n\n  public static class MainActivityDelegate extends ReactActivityDelegate {\n    public MainActivityDelegate(ReactActivity activity, String mainComponentName) {\n      super(activity, mainComponentName);\n    }\n\n    @Override\n    protected ReactRootView createRootView() {\n      ReactRootView reactRootView = new ReactRootView(getContext());\n      // If you opted-in for the New Architecture, we enable the Fabric Renderer.\n      reactRootView.setIsFabric(BuildConfig.IS_NEW_ARCHITECTURE_ENABLED);\n      return reactRootView;\n    }\n  }\n\n\n\n  @Override\n   protected void onDestroy() {\n     super.onDestroy();\n     reviewInfo = null;\n     manager = null;\n   }\n}\n\n\n</code></pre>\n<p>Bild.gradle implementations</p>\n<pre><code>dependencies {\n    implementation fileTree(dir: &quot;libs&quot;, include: [&quot;*.jar&quot;])\n    implementation 'com.facebook.android:facebook-android-sdk:[4,5)'\n    implementation 'com.google.android.material:material:1.1.0'\n    //noinspection GradleDynamicVersion\n    implementation &quot;com.facebook.react:react-native:0.68.1!!&quot;  // From node_modules\n\n    implementation &quot;androidx.swiperefreshlayout:swiperefreshlayout:1.0.0&quot;\n\n\n    debugImplementation(&quot;com.facebook.flipper:flipper:${FLIPPER_VERSION}&quot;) {\n        exclude group:'com.facebook.fbjni'\n    }\n\n    debugImplementation(&quot;com.facebook.flipper:flipper-network-plugin:${FLIPPER_VERSION}&quot;) {\n        exclude group:'com.facebook.flipper'\n        exclude group:'com.squareup.okhttp3', module:'okhttp'\n    }\n\n    debugImplementation(&quot;com.facebook.flipper:flipper-fresco-plugin:${FLIPPER_VERSION}&quot;) {\n        exclude group:'com.facebook.flipper'\n    }\n\n    if (enableHermes) {\n        def hermesPath = &quot;../../node_modules/hermes-engine/android/&quot;;\n        debugImplementation files(hermesPath + &quot;hermes-debug.aar&quot;)\n        releaseImplementation files(hermesPath + &quot;hermes-release.aar&quot;)\n    } else {\n        implementation jscFlavor\n    }\n    implementation project(':react-native-fbsdk-next')\n    implementation project(':react-native-linear-gradient')\n    implementation project(':react-native-svg')\n    implementation &quot;androidx.multidex:multidex:2.0.1&quot;\n    implementation project(':react-native-vector-icons')\n    implementation project(':watermelondb')\n    implementation project(':watermelondb-jsi')\n    implementation 'com.google.android.gms:play-services-tasks:18.0.2'\n    implementation project(path: &quot;:@react-native-firebase_analytics&quot;)\n    implementation project(path: &quot;:@react-native-firebase_inAppMessaging&quot;)\n    implementation 'com.google.android.play:review:2.0.1'\n    implementation 'com.google.android.play:app-update:2.0.1'\n    implementation 'com.google.android.play:asset-delivery:2.0.1'\n    implementation 'com.google.android.play:feature-delivery:2.0.1'\n}   \n\n</code></pre>\n<p>My Default Config - Build.gradle:</p>\n<pre><code>\ndefaultConfig {\n        applicationId &quot;com.baraokeskina&quot;\n        minSdkVersion rootProject.ext.minSdkVersion\n        targetSdkVersion rootProject.ext.targetSdkVersion\n        versionCode 12\n        versionName &quot;1.0.11&quot;\n        multiDexEnabled true\n        resValue 'string', &quot;CODE_PUSH_APK_BUILD_TIME&quot;, String.format(&quot;\\&quot;%d\\&quot;&quot;, System.currentTimeMillis())\n        buildConfigField &quot;boolean&quot;, &quot;IS_NEW_ARCHITECTURE_ENABLED&quot;, isNewArchitectureEnabled().toString()\n        vectorDrawables.useSupportLibrary = true\n        if (isNewArchitectureEnabled()) {\n            // We configure the NDK build only if you decide to opt-in for the New Architecture.\n            externalNativeBuild {\n                ndkBuild {\n                    arguments &quot;APP_PLATFORM=android-21&quot;,\n                        &quot;APP_STL=c++_shared&quot;,\n                        &quot;NDK_TOOLCHAIN_VERSION=clang&quot;,\n                        &quot;GENERATED_SRC_DIR=$buildDir/generated/source&quot;,\n                        &quot;PROJECT_BUILD_DIR=$buildDir&quot;,\n                        &quot;REACT_ANDROID_DIR=$rootDir/../node_modules/react-native/ReactAndroid&quot;,\n                        &quot;REACT_ANDROID_BUILD_DIR=$rootDir/../node_modules/react-native/ReactAndroid/build&quot;\n                    cFlags &quot;-Wall&quot;, &quot;-Werror&quot;, &quot;-fexceptions&quot;, &quot;-frtti&quot;, &quot;-DWITH_INSPECTOR=1&quot;\n                    cppFlags &quot;-std=c++17&quot;\n                    // Make sure this target name is the same you specify inside the\n                    // src/main/jni/Android.mk file for the `LOCAL_MODULE` variable.\n                    targets &quot;baraokeskina_appmodules&quot;\n\n                    // Fix for windows limit on number of character in file paths and in command lines\n                    if (Os.isFamily(Os.FAMILY_WINDOWS)) {\n                        arguments &quot;NDK_OUT=${rootProject.projectDir.getParent()}\\\\.cxx&quot;,\n                            &quot;NDK_APP_SHORT_COMMANDS=true&quot;\n                    }\n                }\n            }\n            if (!enableSeparateBuildPerCPUArchitecture) {\n                ndk {\n                    abiFilters (*reactNativeArchitectures())\n                }\n            }\n        }\n    }\n\n</code></pre>\n"},{"tags":["java","base64","apache-commons-email"],"answers":[{"tags":[],"owner":{"account_id":353777,"reputation":64351,"user_id":691688,"accept_rate":80,"display_name":"Femi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1334213508,"creation_date":1334213508,"answer_id":10118784,"question_id":10118348,"body_markdown":"You might try overriding the [`attach`][1] method and set the `Content-Transfer-Encoding` header in there. By default the framework doesn&#39;t set it for you or expose the MIME bodyPart cleanly.\r\n\r\n\r\n  [1]: http://commons.apache.org/email/api-release/org/apache/commons/mail/MultiPartEmail.html#attach%28%29","title":"Apache Commons Email encode attach with base64","body":"<p>You might try overriding the <a href=\"http://commons.apache.org/email/api-release/org/apache/commons/mail/MultiPartEmail.html#attach%28%29\" rel=\"nofollow\"><code>attach</code></a> method and set the <code>Content-Transfer-Encoding</code> header in there. By default the framework doesn't set it for you or expose the MIME bodyPart cleanly.</p>\n"},{"tags":[],"owner":{"account_id":26201,"reputation":24755,"user_id":67945,"accept_rate":87,"display_name":"Frankie"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1334215123,"creation_date":1334215123,"answer_id":10119140,"question_id":10118348,"body_markdown":"The easiest solution would be to do something like this:\r\n\r\n    // create a multipart leg for a specific attach\r\n    MimeMultipart part = new MimeMultipart();\r\n    BodyPart messageBodyPart = new MimeBodyPart();\r\n    messageBodyPart.setDataHandler (new DataHandler(new ByteArrayDataSource(attachFull.getBytes(), &quot;text/plain&quot;)));\r\n    messageBodyPart.removeHeader(&quot;Content-Transfer-Encoding&quot;);\r\n    messageBodyPart.addHeader(&quot;Content-Transfer-Encoding&quot;, &quot;base64&quot;);\r\n    part.addBodyPart(messageBodyPart);\r\n    email.addPart(part);\r\n\r\nAnd javax will automatically convert your file to base64.\r\n\r\nHope it helps.","title":"Apache Commons Email encode attach with base64","body":"<p>The easiest solution would be to do something like this:</p>\n\n<pre><code>// create a multipart leg for a specific attach\nMimeMultipart part = new MimeMultipart();\nBodyPart messageBodyPart = new MimeBodyPart();\nmessageBodyPart.setDataHandler (new DataHandler(new ByteArrayDataSource(attachFull.getBytes(), \"text/plain\")));\nmessageBodyPart.removeHeader(\"Content-Transfer-Encoding\");\nmessageBodyPart.addHeader(\"Content-Transfer-Encoding\", \"base64\");\npart.addBodyPart(messageBodyPart);\nemail.addPart(part);\n</code></pre>\n\n<p>And javax will automatically convert your file to base64.</p>\n\n<p>Hope it helps.</p>\n"}],"owner":{"account_id":26201,"reputation":24755,"user_id":67945,"accept_rate":87,"display_name":"Frankie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3632,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":10118784,"answer_count":2,"score":4,"last_activity_date":1671026299,"creation_date":1334211466,"question_id":10118348,"body_markdown":"I&#39;m trying to send a file base64-encoded via `apache.commons.mail` and I just can&#39;t seam to get the `Content-Transfer-Encoding: base64` header where it&#39;s supposed to go. \r\n\r\n    // Create the email\r\n    MultiPartEmail email = new MultiPartEmail();\r\n    email.setSmtpPort(587);\r\n    email.setDebug(false);\r\n    email.setHostName(&quot;smtp.gmail.com&quot;);\r\n    email.setAuthentication(&quot;from@gmail.com&quot;, &quot;password&quot;);\r\n    email.setTLS(true);\r\n\r\n    email.addTo(&quot;to@example.com&quot;);\r\n    email.setFrom(&quot;from@example.com&quot;);\r\n    email.setSubject(&quot;subject&quot;);\r\n    \r\n    email.attach(new ByteArrayDataSource(\r\n         Base64.encodeBase64(attachFull.getBytes()), &quot;text/plain&quot;), \r\n         &quot;samplefile.txt&quot;, \r\n         &quot;sample file desc&quot;, \r\n         EmailAttachment.ATTACHMENT\r\n    );\r\n\r\nAnd this is what gets to the recipient.\r\n\r\n    ------=_Part_0_614021571.1334210788719\r\n    Content-Type: text/plain; charset=Cp1252; name=texto.txt\r\n    Content-Transfer-Encoding: quoted-printable\r\n    Content-Disposition: attachment; filename=samplefile.txt\r\n    Content-Description: sample file desc\r\n\r\n**How I can specify that the file is Base64 encoded?**","title":"Apache Commons Email encode attach with base64","body":"<p>I'm trying to send a file base64-encoded via <code>apache.commons.mail</code> and I just can't seam to get the <code>Content-Transfer-Encoding: base64</code> header where it's supposed to go. </p>\n\n<pre><code>// Create the email\nMultiPartEmail email = new MultiPartEmail();\nemail.setSmtpPort(587);\nemail.setDebug(false);\nemail.setHostName(\"smtp.gmail.com\");\nemail.setAuthentication(\"from@gmail.com\", \"password\");\nemail.setTLS(true);\n\nemail.addTo(\"to@example.com\");\nemail.setFrom(\"from@example.com\");\nemail.setSubject(\"subject\");\n\nemail.attach(new ByteArrayDataSource(\n     Base64.encodeBase64(attachFull.getBytes()), \"text/plain\"), \n     \"samplefile.txt\", \n     \"sample file desc\", \n     EmailAttachment.ATTACHMENT\n);\n</code></pre>\n\n<p>And this is what gets to the recipient.</p>\n\n<pre><code>------=_Part_0_614021571.1334210788719\nContent-Type: text/plain; charset=Cp1252; name=texto.txt\nContent-Transfer-Encoding: quoted-printable\nContent-Disposition: attachment; filename=samplefile.txt\nContent-Description: sample file desc\n</code></pre>\n\n<p><strong>How I can specify that the file is Base64 encoded?</strong></p>\n"},{"tags":["java","eclipse","menu"],"comments":[{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1671026281,"post_id":74799315,"comment_id":132008158,"body_markdown":"`options != &quot;4&quot;` - that is not how you compare strings [see here](https://stackoverflow.com/q/513832/2670892)","body":"<code>options != &quot;4&quot;</code> - that is not how you compare strings <a href=\"https://stackoverflow.com/q/513832/2670892\">see here</a>"}],"owner":{"account_id":27251546,"reputation":1,"user_id":20775919,"display_name":"Ninch"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671025941,"creation_date":1671025941,"question_id":74799315,"body_markdown":"I made a program to show options in menu when you select a number.The menu should \r\nbe displayed after execution of each option prompting the user to enter value for one of \r\nthe options. The program should end only when the valid entry for exiting the program is \r\nprovided by the user. The program execute the menu, but how I can display each option, when you enter value for one of the options?\r\n\r\n```\r\n\r\nimport java.util.Scanner;\r\n\r\npublic class menu {\r\n\r\n\tprivate static String options;\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSystem.out.println(&quot;Choose from the Menu&quot;);\r\n\t\tSystem.out.println(&quot;-------------------------\\n&quot;);\r\n\t\tSystem.out.println(&quot;1 - Create class list&quot;);\r\n\t\tSystem.out.println(&quot;2 - Provide marks for a subject&quot;);\r\n\t\tSystem.out.println(&quot;3 - Get grade statistics for a subject&quot;);\r\n\t\tSystem.out.println(&quot;4 - Exit&quot;);\r\n\r\n\t\toptions = null;\r\n\t\ttry (Scanner scan = new Scanner(System.in)) { // Capturing the input\r\n\t\t\tdo {\r\n\t\t\t\toptions = scan.nextLine();\r\n\t\t\t\tswitch (options) {\r\n\r\n\t\t\t\tcase &quot;1&quot;:\r\n\t\t\t\t\t// Perform &quot;Create class list&quot; case.\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase &quot;2&quot;:\r\n\t\t\t\t\t// Perform &quot;Provide marks for a subject&quot; case.\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase &quot;3&quot;:\r\n\t\t\t\t\t// Perform &quot;Get grade statistics for a subject&quot; case.\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase &quot;4&quot;:\r\n\t\t\t\t\t// Perform &quot;Exit&quot; case.\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\t\t\t} while (options != &quot;4&quot;); // If no options Exit\r\n\t\t}\r\n\r\n\t}\r\n}\r\n```\r\n\r\n\r\n","title":"How to run menu with options?","body":"<p>I made a program to show options in menu when you select a number.The menu should\nbe displayed after execution of each option prompting the user to enter value for one of\nthe options. The program should end only when the valid entry for exiting the program is\nprovided by the user. The program execute the menu, but how I can display each option, when you enter value for one of the options?</p>\n<pre><code>\nimport java.util.Scanner;\n\npublic class menu {\n\n    private static String options;\n\n    public static void main(String[] args) {\n        System.out.println(&quot;Choose from the Menu&quot;);\n        System.out.println(&quot;-------------------------\\n&quot;);\n        System.out.println(&quot;1 - Create class list&quot;);\n        System.out.println(&quot;2 - Provide marks for a subject&quot;);\n        System.out.println(&quot;3 - Get grade statistics for a subject&quot;);\n        System.out.println(&quot;4 - Exit&quot;);\n\n        options = null;\n        try (Scanner scan = new Scanner(System.in)) { // Capturing the input\n            do {\n                options = scan.nextLine();\n                switch (options) {\n\n                case &quot;1&quot;:\n                    // Perform &quot;Create class list&quot; case.\n\n                    break;\n\n                case &quot;2&quot;:\n                    // Perform &quot;Provide marks for a subject&quot; case.\n\n                    break;\n\n                case &quot;3&quot;:\n                    // Perform &quot;Get grade statistics for a subject&quot; case.\n\n                    break;\n\n                case &quot;4&quot;:\n                    // Perform &quot;Exit&quot; case.\n\n                    break;\n\n                }\n            } while (options != &quot;4&quot;); // If no options Exit\n        }\n\n    }\n}\n</code></pre>\n"},{"tags":["java","activemq-artemis"],"answers":[{"tags":[],"owner":{"account_id":9398418,"reputation":1845,"user_id":6982270,"display_name":"Domenico Francesco Bruscino"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670943514,"creation_date":1670832565,"answer_id":74768219,"question_id":74657675,"body_markdown":"The `LEAST_CONNECTIONS` policy is good to evenly balance incoming connections but it has not been tested with HA (the replication issue due to backup brokers with connection routers should be fixed by [ARTEMIS-4113][1]).\r\n\r\nOften, it is better to partition data across brokers than to balance incoming connections to improve performances, for further details see the [symmetric-simple][2] example.\r\n\r\nTo avoid a SPOF you could use a symmetric architecture, see the [symmetric-redirect][3] and the [symmetric-simple][2] examples\r\n\r\n\r\n  [1]: https://issues.apache.org/jira/browse/ARTEMIS-4113\r\n  [2]: https://github.com/apache/activemq-artemis/tree/main/examples/features/connection-router/symmetric-simple\r\n  [3]: https://github.com/apache/activemq-artemis/tree/main/examples/features/connection-router/symmetric-redirect","title":"ActiveMQ Artemis connection-router config in a cluster","body":"<p>The <code>LEAST_CONNECTIONS</code> policy is good to evenly balance incoming connections but it has not been tested with HA (the replication issue due to backup brokers with connection routers should be fixed by <a href=\"https://issues.apache.org/jira/browse/ARTEMIS-4113\" rel=\"nofollow noreferrer\">ARTEMIS-4113</a>).</p>\n<p>Often, it is better to partition data across brokers than to balance incoming connections to improve performances, for further details see the <a href=\"https://github.com/apache/activemq-artemis/tree/main/examples/features/connection-router/symmetric-simple\" rel=\"nofollow noreferrer\">symmetric-simple</a> example.</p>\n<p>To avoid a SPOF you could use a symmetric architecture, see the <a href=\"https://github.com/apache/activemq-artemis/tree/main/examples/features/connection-router/symmetric-redirect\" rel=\"nofollow noreferrer\">symmetric-redirect</a> and the <a href=\"https://github.com/apache/activemq-artemis/tree/main/examples/features/connection-router/symmetric-simple\" rel=\"nofollow noreferrer\">symmetric-simple</a> examples</p>\n"}],"owner":{"account_id":3357804,"reputation":61,"user_id":2820344,"display_name":"will"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":361,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671025647,"creation_date":1669992994,"question_id":74657675,"body_markdown":"I need to balance incoming connections on the live nodes in my ActiveMQ Artemis cluster using connection-router.\r\n\r\nMy cluster is made of 2 masters (masterA and masterB) and 2 slaves (slaveA and slaveB) split in 2 groups (group A and group B), that&#39;s a 2 live-backup pair. I&#39;m using static cluster connections (tcp), the slave nodes are replicas of the master ones (ha-policy replication).\r\n\r\nAll works well before I try to add `connection-router`. HA cluster is okay with my base configuration (i.e. before trying to add `connection-router`).\r\n\r\nBefore I tried to add the `connection-router` config element, the slave nodes were presents in the static-connectors/connector-ref and there was no `router` parameter in the `acceptor` url.\r\n\r\nMy client app uses a `ConnectionFactory` URL containing both master nodes (slaves cannot accept connections until their master fails and failover happens so I won&#39;t put them here).\r\n\r\nI have 3 instances of my client app, each capable of handling a single consumer, so what I expect is to have 1 or 2 consumer on each master, which I&#39;m not able to achieve on every startup. Of course it happens sometimes, but that&#39;s just coincidence.\r\n\r\nThe client app uses the admin/admin username and password (for test purpose).\r\n\r\nHere are my `broker.xml` of all my 4 instances (relevant sections only):\r\n\r\n**masterA**\r\n```xml\r\n&lt;connectors&gt;\r\n    &lt;!-- Connector used to be announced through cluster connections and notifications --&gt;\r\n    &lt;connector name=&quot;masterA&quot;&gt;tcp://localhost:61616&lt;/connector&gt;\r\n    &lt;connector name=&quot;slaveA&quot;&gt;tcp://localhost:61617&lt;/connector&gt;\r\n    &lt;connector name=&quot;masterB&quot;&gt;tcp://localhost:61626&lt;/connector&gt;\r\n    &lt;connector name=&quot;slaveB&quot;&gt;tcp://localhost:61627&lt;/connector&gt;\r\n&lt;/connectors&gt;\r\n\r\n  &lt;acceptors&gt;\r\n\r\n     &lt;acceptor name=&quot;artemis&quot;&gt;tcp://localhost:61616?router=router-cluster-connection;tcpSendBufferSize=1048576;tcpReceiveBufferSize=1048576;amqpMinLargeMessageSize=102400;protocols=CORE,AMQP,STOMP,HORNETQ,MQTT,OPENWIRE;useEpoll=true;amqpCredits=1000;amqpLowCredits=300;amqpDuplicateDetection=true;supportAdvisory=false;suppressInternalManagementObjects=false&lt;/acceptor&gt;\r\n\r\n  &lt;/acceptors&gt;\r\n\r\n  &lt;cluster-user&gt;myclusteruser&lt;/cluster-user&gt;\r\n\r\n  &lt;cluster-password&gt;myclusterpsw&lt;/cluster-password&gt;\r\n\r\n  &lt;cluster-connections&gt;\r\n    &lt;cluster-connection name=&quot;my-cluster&quot;&gt;\r\n      &lt;connector-ref&gt;masterA&lt;/connector-ref&gt;\r\n      &lt;check-period&gt;25001&lt;/check-period&gt;\r\n      &lt;connection-ttl&gt;30001&lt;/connection-ttl&gt;\r\n      &lt;initial-connect-attempts&gt;-1&lt;/initial-connect-attempts&gt;\r\n      &lt;reconnect-attempts&gt;-1&lt;/reconnect-attempts&gt;\r\n      &lt;use-duplicate-detection&gt;true&lt;/use-duplicate-detection&gt;\r\n      &lt;message-load-balancing&gt;ON_DEMAND&lt;/message-load-balancing&gt;\r\n      &lt;max-hops&gt;2&lt;/max-hops&gt;\r\n      &lt;notification-interval&gt;500&lt;/notification-interval&gt;\r\n      &lt;notification-attempts&gt;100&lt;/notification-attempts&gt;\r\n      &lt;static-connectors&gt;\r\n        &lt;connector-ref&gt;masterA&lt;/connector-ref&gt;\r\n        &lt;connector-ref&gt;masterB&lt;/connector-ref&gt;\r\n&lt;!--            &lt;connector-ref&gt;slaveA&lt;/connector-ref&gt;\r\n        &lt;connector-ref&gt;slaveB&lt;/connector-ref&gt;--&gt;\r\n      &lt;/static-connectors&gt;\r\n    &lt;/cluster-connection&gt;\r\n  &lt;/cluster-connections&gt;\r\n\r\n  &lt;connection-routers&gt;\r\n    &lt;connection-router name=&quot;router-cluster-connection&quot;&gt;\r\n      &lt;key-type&gt;USER_NAME&lt;/key-type&gt;\r\n      &lt;key-filter&gt;admin&lt;/key-filter&gt;\r\n      &lt;local-target-filter&gt;admin&lt;/local-target-filter&gt;\r\n      &lt;policy name=&quot;LEAST_CONNECTIONS&quot; /&gt;\r\n      &lt;pool&gt;\r\n        &lt;username&gt;admin&lt;/username&gt;\r\n        &lt;password&gt;admin&lt;/password&gt;\r\n        &lt;quorum-size&gt;2&lt;/quorum-size&gt;\r\n        &lt;local-target-enabled&gt;true&lt;/local-target-enabled&gt;\r\n        &lt;cluster-connection&gt;my-cluster&lt;/cluster-connection&gt;\r\n      &lt;/pool&gt;\r\n    &lt;/connection-router&gt;\r\n  &lt;/connection-routers&gt;\r\n\r\n  &lt;ha-policy&gt;\r\n     &lt;replication&gt;\r\n        &lt;master&gt;\r\n          &lt;group-name&gt;grappe-a&lt;/group-name&gt;\r\n          &lt;check-for-live-server&gt;true&lt;/check-for-live-server&gt;\r\n          &lt;initial-replication-sync-timeout&gt;3600000&lt;/initial-replication-sync-timeout&gt;\r\n          &lt;vote-on-replication-failure&gt;true&lt;/vote-on-replication-failure&gt;\r\n        &lt;/master&gt;\r\n     &lt;/replication&gt;\r\n  &lt;/ha-policy&gt;\r\n``` \r\n\r\n**slaveA**\r\n```xml\r\n&lt;connectors&gt;\r\n    &lt;!-- Connector used to be announced through cluster connections and notifications --&gt;\r\n    &lt;connector name=&quot;masterA&quot;&gt;tcp://localhost:61616&lt;/connector&gt;\r\n    &lt;connector name=&quot;slaveA&quot;&gt;tcp://localhost:61617&lt;/connector&gt;\r\n    &lt;connector name=&quot;masterB&quot;&gt;tcp://localhost:61626&lt;/connector&gt;\r\n    &lt;connector name=&quot;slaveB&quot;&gt;tcp://localhost:61627&lt;/connector&gt;\r\n&lt;/connectors&gt;\r\n\r\n\r\n  &lt;acceptors&gt;\r\n\r\n     &lt;!-- Acceptor for every supported protocol --&gt;\r\n     &lt;acceptor name=&quot;artemis&quot;&gt;tcp://localhost:61617?tcpSendBufferSize=1048576;tcpReceiveBufferSize=1048576;amqpMinLargeMessageSize=102400;protocols=CORE,AMQP,STOMP,HORNETQ,MQTT,OPENWIRE;useEpoll=true;amqpCredits=1000;amqpLowCredits=300;amqpDuplicateDetection=true;supportAdvisory=false;suppressInternalManagementObjects=false&lt;/acceptor&gt;\r\n\r\n  &lt;/acceptors&gt;\r\n\r\n  &lt;cluster-user&gt;myclusteruser&lt;/cluster-user&gt;\r\n\r\n  &lt;cluster-password&gt;myclusterpsw&lt;/cluster-password&gt;\r\n\r\n  &lt;cluster-connections&gt;\r\n     &lt;cluster-connection name=&quot;my-cluster&quot;&gt;\r\n      &lt;connector-ref&gt;slaveA&lt;/connector-ref&gt;\r\n      &lt;check-period&gt;25003&lt;/check-period&gt;\r\n      &lt;connection-ttl&gt;30003&lt;/connection-ttl&gt;\r\n      &lt;initial-connect-attempts&gt;-1&lt;/initial-connect-attempts&gt;\r\n      &lt;reconnect-attempts&gt;-1&lt;/reconnect-attempts&gt;\r\n      &lt;use-duplicate-detection&gt;true&lt;/use-duplicate-detection&gt;\r\n      &lt;message-load-balancing&gt;ON_DEMAND&lt;/message-load-balancing&gt;\r\n      &lt;max-hops&gt;2&lt;/max-hops&gt;\r\n      &lt;notification-interval&gt;500&lt;/notification-interval&gt;\r\n      &lt;notification-attempts&gt;100&lt;/notification-attempts&gt;\r\n      &lt;static-connectors&gt;\r\n        &lt;connector-ref&gt;masterA&lt;/connector-ref&gt;\r\n        &lt;connector-ref&gt;masterB&lt;/connector-ref&gt;\r\n&lt;!--            &lt;connector-ref&gt;slaveA&lt;/connector-ref&gt;\r\n        &lt;connector-ref&gt;slaveB&lt;/connector-ref&gt;--&gt;\r\n      &lt;/static-connectors&gt;\r\n    &lt;/cluster-connection&gt;\r\n  &lt;/cluster-connections&gt;\r\n\r\n  &lt;ha-policy&gt;\r\n     &lt;replication&gt;\r\n        &lt;slave&gt;\r\n          &lt;group-name&gt;grappe-a&lt;/group-name&gt;\r\n  \t      &lt;allow-failback&gt;true&lt;/allow-failback&gt;\r\n          &lt;initial-replication-sync-timeout&gt;36000000&lt;/initial-replication-sync-timeout&gt;\r\n  \t\t\t&lt;/slave&gt;\r\n     &lt;/replication&gt;\r\n  &lt;/ha-policy&gt;\r\n```    \r\n\r\n**masterB**\r\n\r\n```xml \r\n&lt;connectors&gt;\r\n    &lt;!-- Connector used to be announced through cluster connections and notifications --&gt;\r\n      &lt;connector name=&quot;masterA&quot;&gt;tcp://localhost:61616&lt;/connector&gt;\r\n      &lt;connector name=&quot;slaveA&quot;&gt;tcp://localhost:61617&lt;/connector&gt;\r\n      &lt;connector name=&quot;masterB&quot;&gt;tcp://localhost:61626&lt;/connector&gt;\r\n      &lt;connector name=&quot;slaveB&quot;&gt;tcp://localhost:61627&lt;/connector&gt;\r\n&lt;/connectors&gt;\r\n\r\n  &lt;acceptors&gt;\r\n     &lt;!-- Acceptor for every supported protocol --&gt;\r\n     &lt;acceptor name=&quot;artemis&quot;&gt;tcp://localhost:61626?router=router-cluster-connection;tcpSendBufferSize=1048576;tcpReceiveBufferSize=1048576;amqpMinLargeMessageSize=102400;protocols=CORE,AMQP,STOMP,HORNETQ,MQTT,OPENWIRE;useEpoll=true;amqpCredits=1000;amqpLowCredits=300;amqpDuplicateDetection=true;supportAdvisory=false;suppressInternalManagementObjects=false&lt;/acceptor&gt;\r\n\r\n  &lt;/acceptors&gt;\r\n\r\n  &lt;cluster-user&gt;myclusteruser&lt;/cluster-user&gt;\r\n\r\n  &lt;cluster-password&gt;myclusterpsw&lt;/cluster-password&gt;\r\n\r\n  &lt;cluster-connections&gt;\r\n    &lt;cluster-connection name=&quot;my-cluster&quot;&gt;\r\n      &lt;connector-ref&gt;masterB&lt;/connector-ref&gt;\r\n      &lt;check-period&gt;25002&lt;/check-period&gt;\r\n      &lt;connection-ttl&gt;30002&lt;/connection-ttl&gt;\r\n      &lt;initial-connect-attempts&gt;-1&lt;/initial-connect-attempts&gt;\r\n      &lt;reconnect-attempts&gt;-1&lt;/reconnect-attempts&gt;\r\n      &lt;use-duplicate-detection&gt;true&lt;/use-duplicate-detection&gt;\r\n      &lt;message-load-balancing&gt;ON_DEMAND&lt;/message-load-balancing&gt;\r\n      &lt;max-hops&gt;2&lt;/max-hops&gt;\r\n      &lt;notification-interval&gt;500&lt;/notification-interval&gt;\r\n      &lt;notification-attempts&gt;100&lt;/notification-attempts&gt;\r\n      &lt;static-connectors&gt;\r\n        &lt;connector-ref&gt;masterA&lt;/connector-ref&gt;\r\n        &lt;connector-ref&gt;masterB&lt;/connector-ref&gt;\r\n&lt;!--            &lt;connector-ref&gt;slaveA&lt;/connector-ref&gt;\r\n        &lt;connector-ref&gt;slaveB&lt;/connector-ref&gt;--&gt;\r\n      &lt;/static-connectors&gt;\r\n    &lt;/cluster-connection&gt;\r\n  &lt;/cluster-connections&gt;\r\n\r\n  &lt;connection-routers&gt;\r\n    &lt;connection-router name=&quot;router-cluster-connection&quot;&gt;\r\n      &lt;key-type&gt;USER_NAME&lt;/key-type&gt;\r\n      &lt;key-filter&gt;admin|NULL&lt;/key-filter&gt;\r\n      &lt;local-target-filter&gt;admin|NULL&lt;/local-target-filter&gt;\r\n      &lt;policy name=&quot;LEAST_CONNECTIONS&quot; /&gt;\r\n      &lt;pool&gt;\r\n        &lt;username&gt;admin&lt;/username&gt;\r\n        &lt;password&gt;admin&lt;/password&gt;\r\n        &lt;quorum-size&gt;2&lt;/quorum-size&gt;\r\n        &lt;local-target-enabled&gt;true&lt;/local-target-enabled&gt;\r\n        &lt;cluster-connection&gt;my-cluster&lt;/cluster-connection&gt;\r\n      &lt;/pool&gt;\r\n    &lt;/connection-router&gt;\r\n  &lt;/connection-routers&gt;\r\n\r\n  &lt;ha-policy&gt;\r\n     &lt;replication&gt;\r\n        &lt;master&gt;\r\n          &lt;group-name&gt;grappe-b&lt;/group-name&gt;\r\n          &lt;check-for-live-server&gt;true&lt;/check-for-live-server&gt;\r\n          &lt;initial-replication-sync-timeout&gt;3600000&lt;/initial-replication-sync-timeout&gt;\r\n          &lt;vote-on-replication-failure&gt;true&lt;/vote-on-replication-failure&gt;\r\n        &lt;/master&gt;\r\n     &lt;/replication&gt;\r\n  &lt;/ha-policy&gt;\r\n```\r\n**slaveB**\r\n```xml\r\n&lt;connectors&gt;\r\n    &lt;!-- Connector used to be announced through cluster connections and notifications --&gt;\r\n    &lt;connector name=&quot;masterA&quot;&gt;tcp://localhost:61616&lt;/connector&gt;\r\n    &lt;connector name=&quot;slaveA&quot;&gt;tcp://localhost:61617&lt;/connector&gt;\r\n    &lt;connector name=&quot;masterB&quot;&gt;tcp://localhost:61626&lt;/connector&gt;\r\n    &lt;connector name=&quot;slaveB&quot;&gt;tcp://localhost:61627&lt;/connector&gt;\r\n&lt;/connectors&gt;\r\n\r\n\r\n  &lt;acceptors&gt;\r\n\r\n     &lt;!-- Acceptor for every supported protocol --&gt;\r\n     &lt;acceptor name=&quot;artemis&quot;&gt;tcp://localhost:61627?tcpSendBufferSize=1048576;tcpReceiveBufferSize=1048576;amqpMinLargeMessageSize=102400;protocols=CORE,AMQP,STOMP,HORNETQ,MQTT,OPENWIRE;useEpoll=true;amqpCredits=1000;amqpLowCredits=300;amqpDuplicateDetection=true;supportAdvisory=false;suppressInternalManagementObjects=false&lt;/acceptor&gt;\r\n\r\n  &lt;/acceptors&gt;\r\n\r\n  &lt;cluster-user&gt;myclusteruser&lt;/cluster-user&gt;\r\n\r\n  &lt;cluster-password&gt;myclusterpsw&lt;/cluster-password&gt;\r\n\r\n  &lt;cluster-connections&gt;\r\n     &lt;cluster-connection name=&quot;my-cluster&quot;&gt;\r\n      &lt;connector-ref&gt;slaveB&lt;/connector-ref&gt;\r\n      &lt;check-period&gt;25004&lt;/check-period&gt;\r\n      &lt;connection-ttl&gt;30004&lt;/connection-ttl&gt;\r\n      &lt;initial-connect-attempts&gt;-1&lt;/initial-connect-attempts&gt;\r\n      &lt;reconnect-attempts&gt;-1&lt;/reconnect-attempts&gt;\r\n      &lt;use-duplicate-detection&gt;true&lt;/use-duplicate-detection&gt;\r\n      &lt;message-load-balancing&gt;ON_DEMAND&lt;/message-load-balancing&gt;\r\n      &lt;max-hops&gt;2&lt;/max-hops&gt;\r\n      &lt;notification-interval&gt;500&lt;/notification-interval&gt;\r\n      &lt;notification-attempts&gt;100&lt;/notification-attempts&gt;\r\n      &lt;static-connectors&gt;\r\n        &lt;connector-ref&gt;masterA&lt;/connector-ref&gt;\r\n        &lt;connector-ref&gt;masterB&lt;/connector-ref&gt;\r\n&lt;!--            &lt;connector-ref&gt;slaveA&lt;/connector-ref&gt;\r\n        &lt;connector-ref&gt;slaveB&lt;/connector-ref&gt;--&gt;\r\n      &lt;/static-connectors&gt;\r\n    &lt;/cluster-connection&gt;\r\n  &lt;/cluster-connections&gt;\r\n\r\n\r\n  &lt;ha-policy&gt;\r\n     &lt;replication&gt;\r\n        &lt;slave&gt;\r\n  \t      &lt;group-name&gt;grappe-b&lt;/group-name&gt;\r\n          &lt;allow-failback&gt;true&lt;/allow-failback&gt;\r\n          &lt;initial-replication-sync-timeout&gt;36000000&lt;/initial-replication-sync-timeout&gt;\r\n  \t    &lt;/slave&gt;\r\n     &lt;/replication&gt;\r\n  &lt;/ha-policy&gt;\r\n```\r\nActiveMQ Artemis version is 2.22.0, running on java 11.\r\n\r\nHow am I supposed to configure the connection-router in my brokers to evenly balance incoming connections? \r\n\r\nIs it supported and a best practice to have HA on a broker doing connection-routing only?\r\n\r\nIf I add the connection-router element in the slave brokers, they fail to replicate. Is that expected? In case a master fails and failover happens, how can the connection-router feature still work if I can&#39;t add it on slaves if I want them to replicate?\r\n\r\nI&#39;ll provide more details if needed.\r\n\r\n**Update**\r\nThe router relevant config elements\r\n\r\n```xml\r\n&lt;connectors&gt;\r\n    &lt;connector name=&quot;masterA&quot;&gt;tcp://localhost:61616&lt;/connector&gt;\r\n    &lt;connector name=&quot;slaveA&quot;&gt;tcp://localhost:61617&lt;/connector&gt;\r\n    &lt;connector name=&quot;masterB&quot;&gt;tcp://localhost:61626&lt;/connector&gt;\r\n    &lt;connector name=&quot;slaveB&quot;&gt;tcp://localhost:61627&lt;/connector&gt;\r\n    &lt;connector name=&quot;routerA&quot;&gt;tcp://localhost:61620&lt;/connector&gt;\r\n&lt;/connectors&gt;\r\n\r\n&lt;acceptors&gt;\r\n    &lt;acceptor name=&quot;artemis&quot;&gt;tcp://127.0.0.1:61620?router=router-cluster-connection;tcpSendBufferSize=1048576;tcpReceiveBufferSize=1048576;amqpMinLargeMessageSize=102400;protocols=CORE,AMQP,STOMP,HORNETQ,MQTT,OPENWIRE;useEpoll=true;amqpCredits=1000;amqpLowCredits=300;amqpDuplicateDetection=true;supportAdvisory=false;suppressInternalManagementObjects=false&lt;/acceptor&gt;\r\n&lt;/acceptors&gt;\r\n\r\n&lt;connection-routers&gt;\r\n    &lt;connection-router name=&quot;router-cluster-connection&quot;&gt;\r\n        &lt;key-type&gt;USER_NAME&lt;/key-type&gt;\r\n        &lt;key-filter&gt;admin&lt;/key-filter&gt;\r\n        &lt;policy name=&quot;ROUND_ROBIN&quot; /&gt;\r\n        &lt;pool&gt;\r\n            &lt;username&gt;admin&lt;/username&gt;\r\n            &lt;password&gt;admin&lt;/password&gt;\r\n            &lt;quorum-size&gt;2&lt;/quorum-size&gt;\r\n            &lt;local-target-enabled&gt;false&lt;/local-target-enabled&gt;\r\n            &lt;static-connectors&gt;\r\n                &lt;connector-ref&gt;masterA&lt;/connector-ref&gt;\r\n                &lt;connector-ref&gt;masterB&lt;/connector-ref&gt;\r\n            &lt;/static-connectors&gt;\r\n        &lt;/pool&gt;\r\n    &lt;/connection-router&gt;\r\n&lt;/connection-routers&gt;\r\n\r\n```\r\n","title":"ActiveMQ Artemis connection-router config in a cluster","body":"<p>I need to balance incoming connections on the live nodes in my ActiveMQ Artemis cluster using connection-router.</p>\n<p>My cluster is made of 2 masters (masterA and masterB) and 2 slaves (slaveA and slaveB) split in 2 groups (group A and group B), that's a 2 live-backup pair. I'm using static cluster connections (tcp), the slave nodes are replicas of the master ones (ha-policy replication).</p>\n<p>All works well before I try to add <code>connection-router</code>. HA cluster is okay with my base configuration (i.e. before trying to add <code>connection-router</code>).</p>\n<p>Before I tried to add the <code>connection-router</code> config element, the slave nodes were presents in the static-connectors/connector-ref and there was no <code>router</code> parameter in the <code>acceptor</code> url.</p>\n<p>My client app uses a <code>ConnectionFactory</code> URL containing both master nodes (slaves cannot accept connections until their master fails and failover happens so I won't put them here).</p>\n<p>I have 3 instances of my client app, each capable of handling a single consumer, so what I expect is to have 1 or 2 consumer on each master, which I'm not able to achieve on every startup. Of course it happens sometimes, but that's just coincidence.</p>\n<p>The client app uses the admin/admin username and password (for test purpose).</p>\n<p>Here are my <code>broker.xml</code> of all my 4 instances (relevant sections only):</p>\n<p><strong>masterA</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;connectors&gt;\n    &lt;!-- Connector used to be announced through cluster connections and notifications --&gt;\n    &lt;connector name=&quot;masterA&quot;&gt;tcp://localhost:61616&lt;/connector&gt;\n    &lt;connector name=&quot;slaveA&quot;&gt;tcp://localhost:61617&lt;/connector&gt;\n    &lt;connector name=&quot;masterB&quot;&gt;tcp://localhost:61626&lt;/connector&gt;\n    &lt;connector name=&quot;slaveB&quot;&gt;tcp://localhost:61627&lt;/connector&gt;\n&lt;/connectors&gt;\n\n  &lt;acceptors&gt;\n\n     &lt;acceptor name=&quot;artemis&quot;&gt;tcp://localhost:61616?router=router-cluster-connection;tcpSendBufferSize=1048576;tcpReceiveBufferSize=1048576;amqpMinLargeMessageSize=102400;protocols=CORE,AMQP,STOMP,HORNETQ,MQTT,OPENWIRE;useEpoll=true;amqpCredits=1000;amqpLowCredits=300;amqpDuplicateDetection=true;supportAdvisory=false;suppressInternalManagementObjects=false&lt;/acceptor&gt;\n\n  &lt;/acceptors&gt;\n\n  &lt;cluster-user&gt;myclusteruser&lt;/cluster-user&gt;\n\n  &lt;cluster-password&gt;myclusterpsw&lt;/cluster-password&gt;\n\n  &lt;cluster-connections&gt;\n    &lt;cluster-connection name=&quot;my-cluster&quot;&gt;\n      &lt;connector-ref&gt;masterA&lt;/connector-ref&gt;\n      &lt;check-period&gt;25001&lt;/check-period&gt;\n      &lt;connection-ttl&gt;30001&lt;/connection-ttl&gt;\n      &lt;initial-connect-attempts&gt;-1&lt;/initial-connect-attempts&gt;\n      &lt;reconnect-attempts&gt;-1&lt;/reconnect-attempts&gt;\n      &lt;use-duplicate-detection&gt;true&lt;/use-duplicate-detection&gt;\n      &lt;message-load-balancing&gt;ON_DEMAND&lt;/message-load-balancing&gt;\n      &lt;max-hops&gt;2&lt;/max-hops&gt;\n      &lt;notification-interval&gt;500&lt;/notification-interval&gt;\n      &lt;notification-attempts&gt;100&lt;/notification-attempts&gt;\n      &lt;static-connectors&gt;\n        &lt;connector-ref&gt;masterA&lt;/connector-ref&gt;\n        &lt;connector-ref&gt;masterB&lt;/connector-ref&gt;\n&lt;!--            &lt;connector-ref&gt;slaveA&lt;/connector-ref&gt;\n        &lt;connector-ref&gt;slaveB&lt;/connector-ref&gt;--&gt;\n      &lt;/static-connectors&gt;\n    &lt;/cluster-connection&gt;\n  &lt;/cluster-connections&gt;\n\n  &lt;connection-routers&gt;\n    &lt;connection-router name=&quot;router-cluster-connection&quot;&gt;\n      &lt;key-type&gt;USER_NAME&lt;/key-type&gt;\n      &lt;key-filter&gt;admin&lt;/key-filter&gt;\n      &lt;local-target-filter&gt;admin&lt;/local-target-filter&gt;\n      &lt;policy name=&quot;LEAST_CONNECTIONS&quot; /&gt;\n      &lt;pool&gt;\n        &lt;username&gt;admin&lt;/username&gt;\n        &lt;password&gt;admin&lt;/password&gt;\n        &lt;quorum-size&gt;2&lt;/quorum-size&gt;\n        &lt;local-target-enabled&gt;true&lt;/local-target-enabled&gt;\n        &lt;cluster-connection&gt;my-cluster&lt;/cluster-connection&gt;\n      &lt;/pool&gt;\n    &lt;/connection-router&gt;\n  &lt;/connection-routers&gt;\n\n  &lt;ha-policy&gt;\n     &lt;replication&gt;\n        &lt;master&gt;\n          &lt;group-name&gt;grappe-a&lt;/group-name&gt;\n          &lt;check-for-live-server&gt;true&lt;/check-for-live-server&gt;\n          &lt;initial-replication-sync-timeout&gt;3600000&lt;/initial-replication-sync-timeout&gt;\n          &lt;vote-on-replication-failure&gt;true&lt;/vote-on-replication-failure&gt;\n        &lt;/master&gt;\n     &lt;/replication&gt;\n  &lt;/ha-policy&gt;\n</code></pre>\n<p><strong>slaveA</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;connectors&gt;\n    &lt;!-- Connector used to be announced through cluster connections and notifications --&gt;\n    &lt;connector name=&quot;masterA&quot;&gt;tcp://localhost:61616&lt;/connector&gt;\n    &lt;connector name=&quot;slaveA&quot;&gt;tcp://localhost:61617&lt;/connector&gt;\n    &lt;connector name=&quot;masterB&quot;&gt;tcp://localhost:61626&lt;/connector&gt;\n    &lt;connector name=&quot;slaveB&quot;&gt;tcp://localhost:61627&lt;/connector&gt;\n&lt;/connectors&gt;\n\n\n  &lt;acceptors&gt;\n\n     &lt;!-- Acceptor for every supported protocol --&gt;\n     &lt;acceptor name=&quot;artemis&quot;&gt;tcp://localhost:61617?tcpSendBufferSize=1048576;tcpReceiveBufferSize=1048576;amqpMinLargeMessageSize=102400;protocols=CORE,AMQP,STOMP,HORNETQ,MQTT,OPENWIRE;useEpoll=true;amqpCredits=1000;amqpLowCredits=300;amqpDuplicateDetection=true;supportAdvisory=false;suppressInternalManagementObjects=false&lt;/acceptor&gt;\n\n  &lt;/acceptors&gt;\n\n  &lt;cluster-user&gt;myclusteruser&lt;/cluster-user&gt;\n\n  &lt;cluster-password&gt;myclusterpsw&lt;/cluster-password&gt;\n\n  &lt;cluster-connections&gt;\n     &lt;cluster-connection name=&quot;my-cluster&quot;&gt;\n      &lt;connector-ref&gt;slaveA&lt;/connector-ref&gt;\n      &lt;check-period&gt;25003&lt;/check-period&gt;\n      &lt;connection-ttl&gt;30003&lt;/connection-ttl&gt;\n      &lt;initial-connect-attempts&gt;-1&lt;/initial-connect-attempts&gt;\n      &lt;reconnect-attempts&gt;-1&lt;/reconnect-attempts&gt;\n      &lt;use-duplicate-detection&gt;true&lt;/use-duplicate-detection&gt;\n      &lt;message-load-balancing&gt;ON_DEMAND&lt;/message-load-balancing&gt;\n      &lt;max-hops&gt;2&lt;/max-hops&gt;\n      &lt;notification-interval&gt;500&lt;/notification-interval&gt;\n      &lt;notification-attempts&gt;100&lt;/notification-attempts&gt;\n      &lt;static-connectors&gt;\n        &lt;connector-ref&gt;masterA&lt;/connector-ref&gt;\n        &lt;connector-ref&gt;masterB&lt;/connector-ref&gt;\n&lt;!--            &lt;connector-ref&gt;slaveA&lt;/connector-ref&gt;\n        &lt;connector-ref&gt;slaveB&lt;/connector-ref&gt;--&gt;\n      &lt;/static-connectors&gt;\n    &lt;/cluster-connection&gt;\n  &lt;/cluster-connections&gt;\n\n  &lt;ha-policy&gt;\n     &lt;replication&gt;\n        &lt;slave&gt;\n          &lt;group-name&gt;grappe-a&lt;/group-name&gt;\n          &lt;allow-failback&gt;true&lt;/allow-failback&gt;\n          &lt;initial-replication-sync-timeout&gt;36000000&lt;/initial-replication-sync-timeout&gt;\n            &lt;/slave&gt;\n     &lt;/replication&gt;\n  &lt;/ha-policy&gt;\n</code></pre>\n<p><strong>masterB</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;connectors&gt;\n    &lt;!-- Connector used to be announced through cluster connections and notifications --&gt;\n      &lt;connector name=&quot;masterA&quot;&gt;tcp://localhost:61616&lt;/connector&gt;\n      &lt;connector name=&quot;slaveA&quot;&gt;tcp://localhost:61617&lt;/connector&gt;\n      &lt;connector name=&quot;masterB&quot;&gt;tcp://localhost:61626&lt;/connector&gt;\n      &lt;connector name=&quot;slaveB&quot;&gt;tcp://localhost:61627&lt;/connector&gt;\n&lt;/connectors&gt;\n\n  &lt;acceptors&gt;\n     &lt;!-- Acceptor for every supported protocol --&gt;\n     &lt;acceptor name=&quot;artemis&quot;&gt;tcp://localhost:61626?router=router-cluster-connection;tcpSendBufferSize=1048576;tcpReceiveBufferSize=1048576;amqpMinLargeMessageSize=102400;protocols=CORE,AMQP,STOMP,HORNETQ,MQTT,OPENWIRE;useEpoll=true;amqpCredits=1000;amqpLowCredits=300;amqpDuplicateDetection=true;supportAdvisory=false;suppressInternalManagementObjects=false&lt;/acceptor&gt;\n\n  &lt;/acceptors&gt;\n\n  &lt;cluster-user&gt;myclusteruser&lt;/cluster-user&gt;\n\n  &lt;cluster-password&gt;myclusterpsw&lt;/cluster-password&gt;\n\n  &lt;cluster-connections&gt;\n    &lt;cluster-connection name=&quot;my-cluster&quot;&gt;\n      &lt;connector-ref&gt;masterB&lt;/connector-ref&gt;\n      &lt;check-period&gt;25002&lt;/check-period&gt;\n      &lt;connection-ttl&gt;30002&lt;/connection-ttl&gt;\n      &lt;initial-connect-attempts&gt;-1&lt;/initial-connect-attempts&gt;\n      &lt;reconnect-attempts&gt;-1&lt;/reconnect-attempts&gt;\n      &lt;use-duplicate-detection&gt;true&lt;/use-duplicate-detection&gt;\n      &lt;message-load-balancing&gt;ON_DEMAND&lt;/message-load-balancing&gt;\n      &lt;max-hops&gt;2&lt;/max-hops&gt;\n      &lt;notification-interval&gt;500&lt;/notification-interval&gt;\n      &lt;notification-attempts&gt;100&lt;/notification-attempts&gt;\n      &lt;static-connectors&gt;\n        &lt;connector-ref&gt;masterA&lt;/connector-ref&gt;\n        &lt;connector-ref&gt;masterB&lt;/connector-ref&gt;\n&lt;!--            &lt;connector-ref&gt;slaveA&lt;/connector-ref&gt;\n        &lt;connector-ref&gt;slaveB&lt;/connector-ref&gt;--&gt;\n      &lt;/static-connectors&gt;\n    &lt;/cluster-connection&gt;\n  &lt;/cluster-connections&gt;\n\n  &lt;connection-routers&gt;\n    &lt;connection-router name=&quot;router-cluster-connection&quot;&gt;\n      &lt;key-type&gt;USER_NAME&lt;/key-type&gt;\n      &lt;key-filter&gt;admin|NULL&lt;/key-filter&gt;\n      &lt;local-target-filter&gt;admin|NULL&lt;/local-target-filter&gt;\n      &lt;policy name=&quot;LEAST_CONNECTIONS&quot; /&gt;\n      &lt;pool&gt;\n        &lt;username&gt;admin&lt;/username&gt;\n        &lt;password&gt;admin&lt;/password&gt;\n        &lt;quorum-size&gt;2&lt;/quorum-size&gt;\n        &lt;local-target-enabled&gt;true&lt;/local-target-enabled&gt;\n        &lt;cluster-connection&gt;my-cluster&lt;/cluster-connection&gt;\n      &lt;/pool&gt;\n    &lt;/connection-router&gt;\n  &lt;/connection-routers&gt;\n\n  &lt;ha-policy&gt;\n     &lt;replication&gt;\n        &lt;master&gt;\n          &lt;group-name&gt;grappe-b&lt;/group-name&gt;\n          &lt;check-for-live-server&gt;true&lt;/check-for-live-server&gt;\n          &lt;initial-replication-sync-timeout&gt;3600000&lt;/initial-replication-sync-timeout&gt;\n          &lt;vote-on-replication-failure&gt;true&lt;/vote-on-replication-failure&gt;\n        &lt;/master&gt;\n     &lt;/replication&gt;\n  &lt;/ha-policy&gt;\n</code></pre>\n<p><strong>slaveB</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;connectors&gt;\n    &lt;!-- Connector used to be announced through cluster connections and notifications --&gt;\n    &lt;connector name=&quot;masterA&quot;&gt;tcp://localhost:61616&lt;/connector&gt;\n    &lt;connector name=&quot;slaveA&quot;&gt;tcp://localhost:61617&lt;/connector&gt;\n    &lt;connector name=&quot;masterB&quot;&gt;tcp://localhost:61626&lt;/connector&gt;\n    &lt;connector name=&quot;slaveB&quot;&gt;tcp://localhost:61627&lt;/connector&gt;\n&lt;/connectors&gt;\n\n\n  &lt;acceptors&gt;\n\n     &lt;!-- Acceptor for every supported protocol --&gt;\n     &lt;acceptor name=&quot;artemis&quot;&gt;tcp://localhost:61627?tcpSendBufferSize=1048576;tcpReceiveBufferSize=1048576;amqpMinLargeMessageSize=102400;protocols=CORE,AMQP,STOMP,HORNETQ,MQTT,OPENWIRE;useEpoll=true;amqpCredits=1000;amqpLowCredits=300;amqpDuplicateDetection=true;supportAdvisory=false;suppressInternalManagementObjects=false&lt;/acceptor&gt;\n\n  &lt;/acceptors&gt;\n\n  &lt;cluster-user&gt;myclusteruser&lt;/cluster-user&gt;\n\n  &lt;cluster-password&gt;myclusterpsw&lt;/cluster-password&gt;\n\n  &lt;cluster-connections&gt;\n     &lt;cluster-connection name=&quot;my-cluster&quot;&gt;\n      &lt;connector-ref&gt;slaveB&lt;/connector-ref&gt;\n      &lt;check-period&gt;25004&lt;/check-period&gt;\n      &lt;connection-ttl&gt;30004&lt;/connection-ttl&gt;\n      &lt;initial-connect-attempts&gt;-1&lt;/initial-connect-attempts&gt;\n      &lt;reconnect-attempts&gt;-1&lt;/reconnect-attempts&gt;\n      &lt;use-duplicate-detection&gt;true&lt;/use-duplicate-detection&gt;\n      &lt;message-load-balancing&gt;ON_DEMAND&lt;/message-load-balancing&gt;\n      &lt;max-hops&gt;2&lt;/max-hops&gt;\n      &lt;notification-interval&gt;500&lt;/notification-interval&gt;\n      &lt;notification-attempts&gt;100&lt;/notification-attempts&gt;\n      &lt;static-connectors&gt;\n        &lt;connector-ref&gt;masterA&lt;/connector-ref&gt;\n        &lt;connector-ref&gt;masterB&lt;/connector-ref&gt;\n&lt;!--            &lt;connector-ref&gt;slaveA&lt;/connector-ref&gt;\n        &lt;connector-ref&gt;slaveB&lt;/connector-ref&gt;--&gt;\n      &lt;/static-connectors&gt;\n    &lt;/cluster-connection&gt;\n  &lt;/cluster-connections&gt;\n\n\n  &lt;ha-policy&gt;\n     &lt;replication&gt;\n        &lt;slave&gt;\n          &lt;group-name&gt;grappe-b&lt;/group-name&gt;\n          &lt;allow-failback&gt;true&lt;/allow-failback&gt;\n          &lt;initial-replication-sync-timeout&gt;36000000&lt;/initial-replication-sync-timeout&gt;\n        &lt;/slave&gt;\n     &lt;/replication&gt;\n  &lt;/ha-policy&gt;\n</code></pre>\n<p>ActiveMQ Artemis version is 2.22.0, running on java 11.</p>\n<p>How am I supposed to configure the connection-router in my brokers to evenly balance incoming connections?</p>\n<p>Is it supported and a best practice to have HA on a broker doing connection-routing only?</p>\n<p>If I add the connection-router element in the slave brokers, they fail to replicate. Is that expected? In case a master fails and failover happens, how can the connection-router feature still work if I can't add it on slaves if I want them to replicate?</p>\n<p>I'll provide more details if needed.</p>\n<p><strong>Update</strong>\nThe router relevant config elements</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;connectors&gt;\n    &lt;connector name=&quot;masterA&quot;&gt;tcp://localhost:61616&lt;/connector&gt;\n    &lt;connector name=&quot;slaveA&quot;&gt;tcp://localhost:61617&lt;/connector&gt;\n    &lt;connector name=&quot;masterB&quot;&gt;tcp://localhost:61626&lt;/connector&gt;\n    &lt;connector name=&quot;slaveB&quot;&gt;tcp://localhost:61627&lt;/connector&gt;\n    &lt;connector name=&quot;routerA&quot;&gt;tcp://localhost:61620&lt;/connector&gt;\n&lt;/connectors&gt;\n\n&lt;acceptors&gt;\n    &lt;acceptor name=&quot;artemis&quot;&gt;tcp://127.0.0.1:61620?router=router-cluster-connection;tcpSendBufferSize=1048576;tcpReceiveBufferSize=1048576;amqpMinLargeMessageSize=102400;protocols=CORE,AMQP,STOMP,HORNETQ,MQTT,OPENWIRE;useEpoll=true;amqpCredits=1000;amqpLowCredits=300;amqpDuplicateDetection=true;supportAdvisory=false;suppressInternalManagementObjects=false&lt;/acceptor&gt;\n&lt;/acceptors&gt;\n\n&lt;connection-routers&gt;\n    &lt;connection-router name=&quot;router-cluster-connection&quot;&gt;\n        &lt;key-type&gt;USER_NAME&lt;/key-type&gt;\n        &lt;key-filter&gt;admin&lt;/key-filter&gt;\n        &lt;policy name=&quot;ROUND_ROBIN&quot; /&gt;\n        &lt;pool&gt;\n            &lt;username&gt;admin&lt;/username&gt;\n            &lt;password&gt;admin&lt;/password&gt;\n            &lt;quorum-size&gt;2&lt;/quorum-size&gt;\n            &lt;local-target-enabled&gt;false&lt;/local-target-enabled&gt;\n            &lt;static-connectors&gt;\n                &lt;connector-ref&gt;masterA&lt;/connector-ref&gt;\n                &lt;connector-ref&gt;masterB&lt;/connector-ref&gt;\n            &lt;/static-connectors&gt;\n        &lt;/pool&gt;\n    &lt;/connection-router&gt;\n&lt;/connection-routers&gt;\n\n</code></pre>\n"},{"tags":["java","android","dependencies","implementation"],"comments":[{"owner":{"account_id":9545159,"reputation":748,"user_id":7091563,"display_name":"Nilupul Sandeepa"},"score":0,"creation_date":1661504628,"post_id":73498341,"comment_id":129792949,"body_markdown":"Have you defined $lifecycle_version variable?","body":"Have you defined $lifecycle_version variable?"},{"owner":{"account_id":26164570,"reputation":13,"user_id":19850576,"display_name":"rrezz"},"score":0,"creation_date":1661508020,"post_id":73498341,"comment_id":129794033,"body_markdown":"no I haven&#39;t,I was not aware I should\\","body":"no I haven&#39;t,I was not aware I should\\"},{"owner":{"account_id":9545159,"reputation":748,"user_id":7091563,"display_name":"Nilupul Sandeepa"},"score":0,"creation_date":1661508093,"post_id":73498341,"comment_id":129794052,"body_markdown":"yes. I posted the answer with a link. check it out.","body":"yes. I posted the answer with a link. check it out."},{"owner":{"account_id":26164570,"reputation":13,"user_id":19850576,"display_name":"rrezz"},"score":1,"creation_date":1661508496,"post_id":73498341,"comment_id":129794182,"body_markdown":"found the answer,I took the code from Kotlin that&#39;s why it wan&#39;t working!thank you though","body":"found the answer,I took the code from Kotlin that&#39;s why it wan&#39;t working!thank you though"},{"owner":{"account_id":9545159,"reputation":748,"user_id":7091563,"display_name":"Nilupul Sandeepa"},"score":0,"creation_date":1661510112,"post_id":73498341,"comment_id":129794709,"body_markdown":"it is much appreciated if you could mark my answer if it is correct.","body":"it is much appreciated if you could mark my answer if it is correct."},{"owner":{"account_id":26164570,"reputation":13,"user_id":19850576,"display_name":"rrezz"},"score":1,"creation_date":1661520334,"post_id":73498341,"comment_id":129798238,"body_markdown":"I just did it now","body":"I just did it now"}],"answers":[{"tags":[],"owner":{"account_id":9545159,"reputation":748,"user_id":7091563,"display_name":"Nilupul Sandeepa"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1661509200,"creation_date":1661504933,"answer_id":73498645,"question_id":73498341,"body_markdown":"You have to define your lifecycle_version.\r\n\r\n```\r\ndependencies {\r\n        //Define your version here\r\n        def lifecycle_version = &quot;2.5.1&quot;\r\n\r\n        implementation &quot;androidx.lifecycle:lifecycle-viewmodel:$lifecycle_version&quot;\r\n        annotationProcessor &quot;androidx.lifecycle:lifecycle-compiler:$lifecycle_version&quot;\r\n    //Other Dependencies\r\n\r\n}\r\n```\r\nCheck here: https://developer.android.com/jetpack/androidx/releases/lifecycle#groovy","title":"Could not get unknown property &#39;lifecycle_version&#39; for object of type org.gradle.api.internal.artifacts.dsl.dependencies.DefaultDependencyHandler","body":"<p>You have to define your lifecycle_version.</p>\n<pre><code>dependencies {\n        //Define your version here\n        def lifecycle_version = &quot;2.5.1&quot;\n\n        implementation &quot;androidx.lifecycle:lifecycle-viewmodel:$lifecycle_version&quot;\n        annotationProcessor &quot;androidx.lifecycle:lifecycle-compiler:$lifecycle_version&quot;\n    //Other Dependencies\n\n}\n</code></pre>\n<p>Check here: <a href=\"https://developer.android.com/jetpack/androidx/releases/lifecycle#groovy\" rel=\"nofollow noreferrer\">https://developer.android.com/jetpack/androidx/releases/lifecycle#groovy</a></p>\n"},{"tags":[],"owner":{"account_id":12431801,"reputation":31,"user_id":9053890,"display_name":"王鹏宇"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671025243,"creation_date":1671025243,"answer_id":74799159,"question_id":73498341,"body_markdown":"if you use kapt, don&#39;t forget to add kapt plugin to your gradle project","title":"Could not get unknown property &#39;lifecycle_version&#39; for object of type org.gradle.api.internal.artifacts.dsl.dependencies.DefaultDependencyHandler","body":"<p>if you use kapt, don't forget to add kapt plugin to your gradle project</p>\n"}],"owner":{"account_id":26164570,"reputation":13,"user_id":19850576,"display_name":"rrezz"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3318,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73498645,"answer_count":2,"score":1,"last_activity_date":1671025243,"creation_date":1661503524,"question_id":73498341,"body_markdown":"I want to create a ViewModel for my project,I also added the dependencies but it shows this error, how can I fix it?Also I am using the latest version of Android Studio and Java\r\n\r\nCould not get unknown property &#39;lifecycle_version&#39; for object of type org.gradle.api.internal.artifacts.dsl.dependencies.DefaultDependencyHandler\r\n\r\n```\r\n dependencies {\r\n    //ViewModel\r\n    implementation &quot;androidx.lifecycle:lifecycle-viewmodel:$lifecycle_version&quot;\r\n    kapt &quot;androidx.lifecycle:lifecycle-compiler:$lifecycle_version&quot;\r\n\r\n    implementation &#39;androidx.appcompat:appcompat:1.5.0&#39;\r\n    implementation &#39;com.google.android.material:material:1.6.1&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.3&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.4.0&#39;\r\n}```","title":"Could not get unknown property &#39;lifecycle_version&#39; for object of type org.gradle.api.internal.artifacts.dsl.dependencies.DefaultDependencyHandler","body":"<p>I want to create a ViewModel for my project,I also added the dependencies but it shows this error, how can I fix it?Also I am using the latest version of Android Studio and Java</p>\n<p>Could not get unknown property 'lifecycle_version' for object of type org.gradle.api.internal.artifacts.dsl.dependencies.DefaultDependencyHandler</p>\n<pre><code> dependencies {\n    //ViewModel\n    implementation &quot;androidx.lifecycle:lifecycle-viewmodel:$lifecycle_version&quot;\n    kapt &quot;androidx.lifecycle:lifecycle-compiler:$lifecycle_version&quot;\n\n    implementation 'androidx.appcompat:appcompat:1.5.0'\n    implementation 'com.google.android.material:material:1.6.1'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.3'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\n}```\n</code></pre>\n"},{"tags":["java","bigdecimal"],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1431379128,"creation_date":1431379128,"answer_id":30177830,"question_id":30177787,"body_markdown":"To round a given `BigDecimal` to the nearest hundred, use `monthlyAmt = monthlyAmt.setScale(-2, RoundingMode.HALF_EVEN)` (or substitute the appropriate rounding mode).","title":"How to Round a BigDecimal Value to its nearest hundreths","body":"<p>To round a given <code>BigDecimal</code> to the nearest hundred, use <code>monthlyAmt = monthlyAmt.setScale(-2, RoundingMode.HALF_EVEN)</code> (or substitute the appropriate rounding mode).</p>\n"},{"tags":[],"owner":{"account_id":72538,"reputation":4658,"user_id":209406,"accept_rate":60,"display_name":"Anton K"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1431379754,"creation_date":1431379754,"answer_id":30177963,"question_id":30177787,"body_markdown":"You can try to use this rounding formula for integer calculation: \r\n\r\n        res = ((number + factor - 1) / factor) * factor;\r\n","title":"How to Round a BigDecimal Value to its nearest hundreths","body":"<p>You can try to use this rounding formula for integer calculation: </p>\n\n<pre><code>    res = ((number + factor - 1) / factor) * factor;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2842936,"reputation":2530,"user_id":2442133,"accept_rate":57,"display_name":"mkczyk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671025155,"creation_date":1671025155,"answer_id":74799139,"question_id":30177787,"body_markdown":"You can `setScale` twice. \r\n- First, `-2` to make rounding (like in [this][1] answer).\r\n- Second, `0` to set result scale you want.\r\n\r\n```\r\npublic class Round {\r\n\r\n    private static final BigDecimal TWELVE = new BigDecimal(&quot;12&quot;);\r\n    public static void main(String[] args) {\r\n\r\n        BigDecimal annualAmt = new BigDecimal(&quot;55867.59&quot;);\r\n        BigDecimal monthlyAmt = annualAmt.divide(TWELVE, 0, RoundingMode.HALF_UP);\r\n        BigDecimal monthlyAmtRounded = monthlyAmt.setScale(-2, RoundingMode.HALF_UP)\r\n            .setScale(0, RoundingMode.HALF_UP);\r\n        System.out.println(monthlyAmtRounded);\r\n    }\r\n}\r\n```\r\nResult is `4700`.\r\n\r\nSecond example:\r\n```\r\nSystem.out.println(new BigDecimal(&quot;4235&quot;)\r\n            .setScale(-2, RoundingMode.HALF_UP)\r\n            .setScale(0, RoundingMode.HALF_UP));\r\n```\r\nResult is `4200`.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/30177787/how-to-round-a-bigdecimal-value-to-its-nearest-hundreths/30177830#30177830","title":"How to Round a BigDecimal Value to its nearest hundreths","body":"<p>You can <code>setScale</code> twice.</p>\n<ul>\n<li>First, <code>-2</code> to make rounding (like in <a href=\"https://stackoverflow.com/questions/30177787/how-to-round-a-bigdecimal-value-to-its-nearest-hundreths/30177830#30177830\">this</a> answer).</li>\n<li>Second, <code>0</code> to set result scale you want.</li>\n</ul>\n<pre><code>public class Round {\n\n    private static final BigDecimal TWELVE = new BigDecimal(&quot;12&quot;);\n    public static void main(String[] args) {\n\n        BigDecimal annualAmt = new BigDecimal(&quot;55867.59&quot;);\n        BigDecimal monthlyAmt = annualAmt.divide(TWELVE, 0, RoundingMode.HALF_UP);\n        BigDecimal monthlyAmtRounded = monthlyAmt.setScale(-2, RoundingMode.HALF_UP)\n            .setScale(0, RoundingMode.HALF_UP);\n        System.out.println(monthlyAmtRounded);\n    }\n}\n</code></pre>\n<p>Result is <code>4700</code>.</p>\n<p>Second example:</p>\n<pre><code>System.out.println(new BigDecimal(&quot;4235&quot;)\n            .setScale(-2, RoundingMode.HALF_UP)\n            .setScale(0, RoundingMode.HALF_UP));\n</code></pre>\n<p>Result is <code>4200</code>.</p>\n"}],"owner":{"account_id":6291514,"reputation":81,"user_id":4889043,"display_name":"CoolSpring"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4651,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":3,"score":8,"last_activity_date":1671025155,"creation_date":1431378941,"question_id":30177787,"body_markdown":"Example:\r\n\r\n\r\n    public class Round {\r\n    \t\r\n    \tprivate static final BigDecimal TWELVE = new BigDecimal(&quot;12&quot;);\r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    \t\tBigDecimal annualAmt = new BigDecimal(&quot;55867.59&quot;);\r\n    \t\tBigDecimal monthlyAmt = null;\r\n    \t\t\r\n    \t\tmonthlyAmt = annualAmt.divide(TWELVE, 0, RoundingMode.HALF_UP);\r\n    \t\tSystem.out.println(monthlyAmt);\r\n    \t}\r\n    }\r\n\r\nThe above program output is 4656. I want to round this to the nearest hundredth as 4700.\r\n\r\nSimilarly 4235 --&gt; 4200","title":"How to Round a BigDecimal Value to its nearest hundreths","body":"<p>Example:</p>\n\n<pre><code>public class Round {\n\n    private static final BigDecimal TWELVE = new BigDecimal(\"12\");\n    public static void main(String[] args) {\n\n        BigDecimal annualAmt = new BigDecimal(\"55867.59\");\n        BigDecimal monthlyAmt = null;\n\n        monthlyAmt = annualAmt.divide(TWELVE, 0, RoundingMode.HALF_UP);\n        System.out.println(monthlyAmt);\n    }\n}\n</code></pre>\n\n<p>The above program output is 4656. I want to round this to the nearest hundredth as 4700.</p>\n\n<p>Similarly 4235 --> 4200</p>\n"},{"tags":["java","spring","spring-boot","authentication","spring-security"],"comments":[{"owner":{"account_id":7134819,"reputation":5058,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"score":0,"creation_date":1671023398,"post_id":74797682,"comment_id":132007070,"body_markdown":"Are you using Spring Boot 3?","body":"Are you using Spring Boot 3?"}],"answers":[{"tags":[],"owner":{"account_id":7134819,"reputation":5058,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671025006,"creation_date":1671025006,"answer_id":74799112,"question_id":74797682,"body_markdown":"It seems to me that since you are using the `jakarta` namespace, you are using Spring Boot 3 and Spring Security 6.\r\n\r\nIn Spring Security 6, all Spring Security’s `@Enable*` annotations had their `@Configuration` removed. \r\nThe following annotations had their `@Configuration` removed:\r\n - `@EnableGlobalAuthentication`\r\n - `@EnableGlobalMethodSecurity`\r\n - `@EnableMethodSecurity`\r\n - `@EnableReactiveMethodSecurity`\r\n - `@EnableWebSecurity`\r\n - `@EnableWebFluxSecurity`\r\n\r\nIf the class is not a `@Configuration`, Spring will not consider it as a bean and therefore will not initialize the beans inside it.\r\n\r\nYou have to add `@Configuration` to your `SecurityConfig` class or it will not be picked up by Spring. More details [on Spring Security documentation][1].\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/5.8.1/migration/servlet/config.html#_add_configuration_to_enable_annotations","title":"Spring boot security - AuthenticationManager problem","body":"<p>It seems to me that since you are using the <code>jakarta</code> namespace, you are using Spring Boot 3 and Spring Security 6.</p>\n<p>In Spring Security 6, all Spring Security’s <code>@Enable*</code> annotations had their <code>@Configuration</code> removed.\nThe following annotations had their <code>@Configuration</code> removed:</p>\n<ul>\n<li><code>@EnableGlobalAuthentication</code></li>\n<li><code>@EnableGlobalMethodSecurity</code></li>\n<li><code>@EnableMethodSecurity</code></li>\n<li><code>@EnableReactiveMethodSecurity</code></li>\n<li><code>@EnableWebSecurity</code></li>\n<li><code>@EnableWebFluxSecurity</code></li>\n</ul>\n<p>If the class is not a <code>@Configuration</code>, Spring will not consider it as a bean and therefore will not initialize the beans inside it.</p>\n<p>You have to add <code>@Configuration</code> to your <code>SecurityConfig</code> class or it will not be picked up by Spring. More details <a href=\"https://docs.spring.io/spring-security/reference/5.8.1/migration/servlet/config.html#_add_configuration_to_enable_annotations\" rel=\"nofollow noreferrer\">on Spring Security documentation</a>.</p>\n"}],"owner":{"account_id":27250105,"reputation":3,"user_id":20774717,"display_name":"dechdodin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2256,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74799112,"answer_count":1,"score":0,"last_activity_date":1671025032,"creation_date":1671017729,"question_id":74797682,"body_markdown":"I found a problem. about security at the authenticationmanager.If i add final front it.\r\n\r\n\r\n```\r\npackage com.authentication.jwt.token.controller;\r\n\r\nimport com.authentication.jwt.token.config.JwtUtils;\r\nimport com.authentication.jwt.token.entity.JwtTokenRequest;\r\nimport com.authentication.jwt.token.service.UserService;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\n@RequiredArgsConstructor\r\npublic class AuthenticationController {\r\n\r\n    private final JwtUtils jwtUtils;\r\n\r\n    private final UserService userService;\r\n\r\n    private final AuthenticationManager authenticationManager;\r\n\r\n    @PostMapping(&quot;/generate-token&quot;)\r\n    public ResponseEntity&lt;String&gt; generateToken(@RequestBody JwtTokenRequest request) throws Exception {\r\n//        JwtTokenResponse jwtToken = jwtService.createJwtToken(request);\r\n        authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(request.getUserName(), request.getUserPassword()));\r\n        UserDetails user = userService.findByUser(request.getUserName());\r\n        if (user != null) {\r\n            return ResponseEntity.ok().body(jwtUtils.generateToken(user));\r\n        }\r\n        return ResponseEntity.badRequest().build();\r\n    }\r\n\r\n}\r\n```\r\nprogram will show &gt;&gt; \r\n\r\n```\r\n&gt; Description:\r\n&gt; \r\n&gt; Parameter 2 of constructor in com.authentication.jwt.token.controller.AuthenticationController required a bean of type &#39;org.springframework.security.authentication.AuthenticationManager&#39; that could not be found.\r\n&gt; \r\n&gt; \r\n&gt; Action:\r\n&gt; \r\n&gt; Consider defining a bean of type &#39;org.springframework.security.authentication.AuthenticationManager&#39; in your configuration.\r\n&gt; \r\n&gt; \r\n&gt; Process finished with exit code 0\r\n```\r\n\r\n\r\nAnd if i remove final front it,project will run pass.\r\n\r\n\r\n\r\n```\r\npackage com.authentication.jwt.token.controller;\r\n\r\nimport com.authentication.jwt.token.config.JwtUtils;\r\nimport com.authentication.jwt.token.entity.JwtTokenRequest;\r\nimport com.authentication.jwt.token.service.UserService;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\n@RequiredArgsConstructor\r\npublic class AuthenticationController {\r\n\r\n    private final JwtUtils jwtUtils;\r\n\r\n    private final UserService userService;\r\n\r\n    private AuthenticationManager authenticationManager;\r\n\r\n    @PostMapping(&quot;/generate-token&quot;)\r\n    public ResponseEntity&lt;String&gt; generateToken(@RequestBody JwtTokenRequest request) throws Exception {\r\n//        JwtTokenResponse jwtToken = jwtService.createJwtToken(request);\r\n        authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(request.getUserName(),   request.getUserPassword()));\r\n        UserDetails user = userService.findByUser(request.getUserName());\r\n        if (user != null) {\r\n            return ResponseEntity.ok().body(jwtUtils.generateToken(user));\r\n        }\r\n        return ResponseEntity.badRequest().build();\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nbut when i sent api at postman, The program will show 500 Internal Sever Error &gt;&gt;\r\nin postman \r\n\r\n\r\n```\r\n{\r\n    &quot;timestamp&quot;: &quot;2022-12-14T10:44:06.335+00:00&quot;,\r\n    &quot;status&quot;: 500,\r\n    &quot;error&quot;: &quot;Internal Server Error&quot;,\r\n    &quot;trace&quot;: &quot;java.lang.NullPointerException: Cannot invoke \\&quot;org.springframework.security.authentication.AuthenticationManager.authenticate(org.springframework.security.core.Authentication)\\&quot; because \\&quot;this.authenticationManager\\&quot; is null\\r\\n\\tat com.authentication.jwt.token.controller.AuthenticationController.generateToken(AuthenticationController.java:33)\\r\\n\\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\\r\\n\\tat java.base/java.lang.reflect.Method.invoke(Method.java:577)\\r\\n\\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\\r\\n\\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\\r\\n\\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\\r\\n\\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\\r\\n\\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\\r\\n\\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\\r\\n\\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\\r\\n\\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\\r\\n\\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\\r\\n\\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\\r\\n\\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\\r\\n\\tat com.authentication.jwt.token.config.JwtAuthFilter.doFilterInternal(JwtAuthFilter.java:39)\\r\\n\\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\\r\\n\\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\\r\\n\\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\\r\\n\\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\\r\\n\\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\\r\\n\\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\\r\\n\\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\\r\\n\\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\\r\\n\\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\\r\\n\\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\\r\\n\\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\\r\\n\\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\\r\\n\\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\\r\\n\\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\\r\\n\\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\\r\\n\\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\\r\\n\\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\\r\\n\\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\\r\\n\\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\\r\\n\\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\\r\\n\\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\\r\\n\\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\\r\\n\\tat java.base/java.lang.Thread.run(Thread.java:833)\\r\\n&quot;,\r\n    &quot;message&quot;: &quot;Cannot invoke \\&quot;org.springframework.security.authentication.AuthenticationManager.authenticate(org.springframework.security.core.Authentication)\\&quot; because \\&quot;this.authenticationManager\\&quot; is null&quot;,\r\n    &quot;path&quot;: &quot;/generate-token&quot;\r\n}\r\n```\r\n\r\nthen in Intellij will throw message &gt;&gt;\r\n\r\n\r\n\r\n\r\n```\r\njava.lang.NullPointerException: Cannot invoke &quot;org.springframework.security.authentication.AuthenticationManager.authenticate(org.springframework.security.core.Authentication)&quot; because &quot;this.authenticationManager&quot; is null\r\n\tat com.authentication.jwt.token.controller.AuthenticationController.generateToken(AuthenticationController.java:28) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:577) ~[na:na]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207) ~[spring-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152) ~[spring-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-6.0.2.jar:6.0.2]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.2.jar:6.0.2]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.2.jar:6.0.2]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.2.jar:6.0.2]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080) ~[spring-webmvc-6.0.2.jar:6.0.2]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973) ~[spring-webmvc-6.0.2.jar:6.0.2]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003) ~[spring-webmvc-6.0.2.jar:6.0.2]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906) ~[spring-webmvc-6.0.2.jar:6.0.2]\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731) ~[tomcat-embed-core-10.1.1.jar:6.0]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880) ~[spring-webmvc-6.0.2.jar:6.0.2]\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814) ~[tomcat-embed-core-10.1.1.jar:6.0]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-10.1.1.jar:10.1.1]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat com.authentication.jwt.token.config.JwtAuthFilter.doFilterInternal(JwtAuthFilter.java:39) ~[classes/:na]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.2.jar:6.0.2]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.2.jar:6.0.2]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.2.jar:6.0.2]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.2.jar:6.0.2]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n\r\n```\r\n\r\nthis is file config me.\r\n\r\n\r\n\r\n```\r\npackage com.authentication.jwt.token.config;\r\n\r\nimport com.authentication.jwt.token.service.UserService;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.http.HttpHeaders;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.authentication.AuthenticationProvider;\r\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\r\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.http.SessionCreationPolicy;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\r\nimport org.springframework.security.crypto.password.NoOpPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\r\n\r\n@EnableWebSecurity\r\n@RequiredArgsConstructor\r\npublic class SecurityConfig {\r\n\r\n    private final JwtAuthFilter jwtAuthFilter;\r\n\r\n    private final UserService userService;\r\n\r\n    @Bean\r\n    public SecurityFilterChain configure(HttpSecurity http) throws Exception {\r\n        \r\n        http\r\n                .csrf().disable()\r\n                .authorizeHttpRequests(authorize -&gt;\r\n                        authorize.requestMatchers(&quot;/**&quot;).anonymous()\r\n                                .requestMatchers(HttpHeaders.ALLOW).anonymous()\r\n                                .anyRequest()\r\n                                .authenticated()\r\n                )\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n                .authenticationProvider(authenticationProvider())\r\n                .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class)\r\n        ;\r\n\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration config) throws Exception {\r\n        return config.getAuthenticationManager();\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationProvider authenticationProvider() {\r\n        final DaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();\r\n        authenticationProvider.setUserDetailsService(userDetailsService());\r\n        authenticationProvider.setPasswordEncoder(passwordEncoder());\r\n        return authenticationProvider;\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return NoOpPasswordEncoder.getInstance();\r\n    }\r\n\r\n    @Bean\r\n    public UserDetailsService userDetailsService() {\r\n        return new UserDetailsService() {\r\n            @Override\r\n            public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n                return userService.findByUser(username);\r\n            }\r\n        };\r\n    }\r\n\r\n\r\n}\r\n\r\n```\r\n\r\n\r\nthis is frist time of me for stackOverflow. If i do misprint or explain a problem not good. I apologize in advance and thank you to come in get hear problem me. thank you so much.\r\n\r\n\r\n\r\ni try edit it to run not error, but stuck with a problem authenticationManager.\r\ni add bean at the SecurityConfig already. but the program show message &quot;not found typt bean&quot;.\r\nplease help me.","title":"Spring boot security - AuthenticationManager problem","body":"<p>I found a problem. about security at the authenticationmanager.If i add final front it.</p>\n<pre><code>package com.authentication.jwt.token.controller;\n\nimport com.authentication.jwt.token.config.JwtUtils;\nimport com.authentication.jwt.token.entity.JwtTokenRequest;\nimport com.authentication.jwt.token.service.UserService;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequiredArgsConstructor\npublic class AuthenticationController {\n\n    private final JwtUtils jwtUtils;\n\n    private final UserService userService;\n\n    private final AuthenticationManager authenticationManager;\n\n    @PostMapping(&quot;/generate-token&quot;)\n    public ResponseEntity&lt;String&gt; generateToken(@RequestBody JwtTokenRequest request) throws Exception {\n//        JwtTokenResponse jwtToken = jwtService.createJwtToken(request);\n        authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(request.getUserName(), request.getUserPassword()));\n        UserDetails user = userService.findByUser(request.getUserName());\n        if (user != null) {\n            return ResponseEntity.ok().body(jwtUtils.generateToken(user));\n        }\n        return ResponseEntity.badRequest().build();\n    }\n\n}\n</code></pre>\n<p>program will show &gt;&gt;</p>\n<pre><code>&gt; Description:\n&gt; \n&gt; Parameter 2 of constructor in com.authentication.jwt.token.controller.AuthenticationController required a bean of type 'org.springframework.security.authentication.AuthenticationManager' that could not be found.\n&gt; \n&gt; \n&gt; Action:\n&gt; \n&gt; Consider defining a bean of type 'org.springframework.security.authentication.AuthenticationManager' in your configuration.\n&gt; \n&gt; \n&gt; Process finished with exit code 0\n</code></pre>\n<p>And if i remove final front it,project will run pass.</p>\n<pre><code>package com.authentication.jwt.token.controller;\n\nimport com.authentication.jwt.token.config.JwtUtils;\nimport com.authentication.jwt.token.entity.JwtTokenRequest;\nimport com.authentication.jwt.token.service.UserService;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequiredArgsConstructor\npublic class AuthenticationController {\n\n    private final JwtUtils jwtUtils;\n\n    private final UserService userService;\n\n    private AuthenticationManager authenticationManager;\n\n    @PostMapping(&quot;/generate-token&quot;)\n    public ResponseEntity&lt;String&gt; generateToken(@RequestBody JwtTokenRequest request) throws Exception {\n//        JwtTokenResponse jwtToken = jwtService.createJwtToken(request);\n        authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(request.getUserName(),   request.getUserPassword()));\n        UserDetails user = userService.findByUser(request.getUserName());\n        if (user != null) {\n            return ResponseEntity.ok().body(jwtUtils.generateToken(user));\n        }\n        return ResponseEntity.badRequest().build();\n    }\n\n}\n</code></pre>\n<p>but when i sent api at postman, The program will show 500 Internal Sever Error &gt;&gt;\nin postman</p>\n<pre><code>{\n    &quot;timestamp&quot;: &quot;2022-12-14T10:44:06.335+00:00&quot;,\n    &quot;status&quot;: 500,\n    &quot;error&quot;: &quot;Internal Server Error&quot;,\n    &quot;trace&quot;: &quot;java.lang.NullPointerException: Cannot invoke \\&quot;org.springframework.security.authentication.AuthenticationManager.authenticate(org.springframework.security.core.Authentication)\\&quot; because \\&quot;this.authenticationManager\\&quot; is null\\r\\n\\tat com.authentication.jwt.token.controller.AuthenticationController.generateToken(AuthenticationController.java:33)\\r\\n\\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\\r\\n\\tat java.base/java.lang.reflect.Method.invoke(Method.java:577)\\r\\n\\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\\r\\n\\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\\r\\n\\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\\r\\n\\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\\r\\n\\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\\r\\n\\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\\r\\n\\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\\r\\n\\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\\r\\n\\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\\r\\n\\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\\r\\n\\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\\r\\n\\tat com.authentication.jwt.token.config.JwtAuthFilter.doFilterInternal(JwtAuthFilter.java:39)\\r\\n\\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\\r\\n\\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\\r\\n\\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\\r\\n\\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\\r\\n\\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\\r\\n\\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\\r\\n\\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\\r\\n\\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\\r\\n\\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\\r\\n\\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\\r\\n\\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\\r\\n\\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\\r\\n\\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\\r\\n\\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\\r\\n\\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\\r\\n\\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\\r\\n\\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\\r\\n\\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\\r\\n\\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\\r\\n\\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\\r\\n\\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\\r\\n\\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\\r\\n\\tat java.base/java.lang.Thread.run(Thread.java:833)\\r\\n&quot;,\n    &quot;message&quot;: &quot;Cannot invoke \\&quot;org.springframework.security.authentication.AuthenticationManager.authenticate(org.springframework.security.core.Authentication)\\&quot; because \\&quot;this.authenticationManager\\&quot; is null&quot;,\n    &quot;path&quot;: &quot;/generate-token&quot;\n}\n</code></pre>\n<p>then in Intellij will throw message &gt;&gt;</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;org.springframework.security.authentication.AuthenticationManager.authenticate(org.springframework.security.core.Authentication)&quot; because &quot;this.authenticationManager&quot; is null\n    at com.authentication.jwt.token.controller.AuthenticationController.generateToken(AuthenticationController.java:28) ~[classes/:na]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:577) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207) ~[spring-web-6.0.2.jar:6.0.2]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152) ~[spring-web-6.0.2.jar:6.0.2]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-6.0.2.jar:6.0.2]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.2.jar:6.0.2]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.2.jar:6.0.2]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.2.jar:6.0.2]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080) ~[spring-webmvc-6.0.2.jar:6.0.2]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973) ~[spring-webmvc-6.0.2.jar:6.0.2]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003) ~[spring-webmvc-6.0.2.jar:6.0.2]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906) ~[spring-webmvc-6.0.2.jar:6.0.2]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731) ~[tomcat-embed-core-10.1.1.jar:6.0]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880) ~[spring-webmvc-6.0.2.jar:6.0.2]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814) ~[tomcat-embed-core-10.1.1.jar:6.0]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-10.1.1.jar:10.1.1]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at com.authentication.jwt.token.config.JwtAuthFilter.doFilterInternal(JwtAuthFilter.java:39) ~[classes/:na]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.2.jar:6.0.2]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.2.jar:6.0.2]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.2.jar:6.0.2]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.2.jar:6.0.2]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.2.jar:6.0.2]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.2.jar:6.0.2]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.2.jar:6.0.2]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\n\n</code></pre>\n<p>this is file config me.</p>\n<pre><code>package com.authentication.jwt.token.config;\n\nimport com.authentication.jwt.token.service.UserService;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.AuthenticationProvider;\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.security.crypto.password.NoOpPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\n\n@EnableWebSecurity\n@RequiredArgsConstructor\npublic class SecurityConfig {\n\n    private final JwtAuthFilter jwtAuthFilter;\n\n    private final UserService userService;\n\n    @Bean\n    public SecurityFilterChain configure(HttpSecurity http) throws Exception {\n        \n        http\n                .csrf().disable()\n                .authorizeHttpRequests(authorize -&gt;\n                        authorize.requestMatchers(&quot;/**&quot;).anonymous()\n                                .requestMatchers(HttpHeaders.ALLOW).anonymous()\n                                .anyRequest()\n                                .authenticated()\n                )\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n                .authenticationProvider(authenticationProvider())\n                .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class)\n        ;\n\n        return http.build();\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration config) throws Exception {\n        return config.getAuthenticationManager();\n    }\n\n    @Bean\n    public AuthenticationProvider authenticationProvider() {\n        final DaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();\n        authenticationProvider.setUserDetailsService(userDetailsService());\n        authenticationProvider.setPasswordEncoder(passwordEncoder());\n        return authenticationProvider;\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return NoOpPasswordEncoder.getInstance();\n    }\n\n    @Bean\n    public UserDetailsService userDetailsService() {\n        return new UserDetailsService() {\n            @Override\n            public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n                return userService.findByUser(username);\n            }\n        };\n    }\n\n\n}\n\n</code></pre>\n<p>this is frist time of me for stackOverflow. If i do misprint or explain a problem not good. I apologize in advance and thank you to come in get hear problem me. thank you so much.</p>\n<p>i try edit it to run not error, but stuck with a problem authenticationManager.\ni add bean at the SecurityConfig already. but the program show message &quot;not found typt bean&quot;.\nplease help me.</p>\n"},{"tags":["java","amazon-web-services","amazon-timestream"],"comments":[{"owner":{"account_id":6157899,"reputation":19791,"user_id":4800344,"display_name":"Ermiya Eskandary"},"score":0,"creation_date":1671017332,"post_id":74796829,"comment_id":132004912,"body_markdown":"`if I use 7 cols max` - `is there a way to set this number` - how did you set it? What&#39;s the actual problem here? What&#39;s the working and incorrect version?","body":"<code>if I use 7 cols max</code> - <code>is there a way to set this number</code> - how did you set it? What&#39;s the actual problem here? What&#39;s the working and incorrect version?"},{"owner":{"account_id":7392763,"reputation":3367,"user_id":5625696,"accept_rate":50,"display_name":"Borislav Stoilov"},"score":0,"creation_date":1671023910,"post_id":74796829,"comment_id":132007261,"body_markdown":"I&#39;ve updated my question. In the SELECT statement, if I select 7 or fewer columns it&#39;s working just fine. The problem is that I want to select more than 7 columns","body":"I&#39;ve updated my question. In the SELECT statement, if I select 7 or fewer columns it&#39;s working just fine. The problem is that I want to select more than 7 columns"},{"owner":{"account_id":6157899,"reputation":19791,"user_id":4800344,"display_name":"Ermiya Eskandary"},"score":0,"creation_date":1671024488,"post_id":74796829,"comment_id":132007474,"body_markdown":"How many columns do you have? Can you please show the 2 requests and (truncated) output for each request?","body":"How many columns do you have? Can you please show the 2 requests and (truncated) output for each request?"},{"owner":{"account_id":7392763,"reputation":3367,"user_id":5625696,"accept_rate":50,"display_name":"Borislav Stoilov"},"score":0,"creation_date":1671025087,"post_id":74796829,"comment_id":132007719,"body_markdown":"I have 9 columns (dimensions) in total. I&#39;ve updated my question with more details. The rows array is just empty when the selected cols &gt; 7","body":"I have 9 columns (dimensions) in total. I&#39;ve updated my question with more details. The rows array is just empty when the selected cols &gt; 7"},{"owner":{"account_id":6157899,"reputation":19791,"user_id":4800344,"display_name":"Ermiya Eskandary"},"score":0,"creation_date":1671025251,"post_id":74796829,"comment_id":132007786,"body_markdown":"Ah OK I understand. Can you try JSON serialising `queryResult` and comparing the output between the 2 other than the obvious row count difference? And just to make sure, can you please try the other column besides `TestId` just to rule out the column being an issue? (I understand it looks fine in the UI but just in case)","body":"Ah OK I understand. Can you try JSON serialising <code>queryResult</code> and comparing the output between the 2 other than the obvious row count difference? And just to make sure, can you please try the other column besides <code>TestId</code> just to rule out the column being an issue? (I understand it looks fine in the UI but just in case)"},{"owner":{"account_id":7392763,"reputation":3367,"user_id":5625696,"accept_rate":50,"display_name":"Borislav Stoilov"},"score":0,"creation_date":1671026165,"post_id":74796829,"comment_id":132008111,"body_markdown":"I did what you suggested. It wasn&#39;t JSON serializable. But I noticed that the query progress is 67% in the case with all columns and there is a &quot;nextToken&quot;. Using the next token I got all of the results. So you get 0 results until the query is 100% complete that is a bit confusing, but it worked.","body":"I did what you suggested. It wasn&#39;t JSON serializable. But I noticed that the query progress is 67% in the case with all columns and there is a &quot;nextToken&quot;. Using the next token I got all of the results. So you get 0 results until the query is 100% complete that is a bit confusing, but it worked."}],"owner":{"account_id":7392763,"reputation":3367,"user_id":5625696,"accept_rate":50,"display_name":"Borislav Stoilov"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":172,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671024896,"creation_date":1671013805,"question_id":74796829,"body_markdown":"I am using the AWS timestream Java SDK to query timestream table.\r\n\r\nMy code \r\n\r\n```java\r\nString query = &quot;&quot;&quot;\r\n            SELECT\r\n              Response,\r\n              ResponseSize,\r\n              RequestSize,\r\n              Url,\r\n              StatusCode,\r\n              time AS RequestTime,\r\n              measure_value::bigint AS RequestDuration\r\n            FROM (table name)\r\n            WHERE (clause)\r\n            &quot;&quot;&quot;;\r\nQueryRequest queryRequest = QueryRequest.builder()\r\n        .queryString(query)\r\n        .build();\r\n\r\nvar queryResult = timestreamQueryClient.query(queryRequest);\r\n\r\nSystem.out.println(queryResult.rows().size()); // 5000\r\n```\r\n\r\nThe response contains all of the columns but with 0 rows and says there are more results. In the AWS console query editor, all works fine.\r\n\r\nExperimentally I found out that if I select 7 cols max in the select statement it works. I wanted to use `SELECT *` and that&#39;s how I found out about it\r\n\r\nIn the code above if I just add one more col in the select &#39;TestId&#39; the number of rows becomes 0\r\n\r\n```java\r\nString query = &quot;&quot;&quot;\r\n            SELECT\r\n              TestId,\r\n              Response,\r\n              ResponseSize,\r\n              RequestSize,\r\n              Url,\r\n              StatusCode,\r\n              time AS RequestTime,\r\n              measure_value::bigint AS RequestDuration\r\n            FROM (table name)\r\n            WHERE (clause)\r\n            &quot;&quot;&quot;;\r\nQueryRequest queryRequest = QueryRequest.builder()\r\n        .queryString(query)\r\n        .build();\r\n\r\nvar queryResult = timestreamQueryClient.query(queryRequest);\r\n\r\nSystem.out.println(queryResult.rows().size()); // 0 Rows\r\n```\r\n\r\nBoth request are successful.\r\n\r\nSo first of all is there a way to set this number somehow in the SDK and secondly is this a bug? I would expect the response to be 400 telling me that max cols are (something) and not an empty row list.\r\n","title":"AWS TimeStream Java SDK - configure max number of columns","body":"<p>I am using the AWS timestream Java SDK to query timestream table.</p>\n<p>My code</p>\n<pre class=\"lang-java prettyprint-override\"><code>String query = &quot;&quot;&quot;\n            SELECT\n              Response,\n              ResponseSize,\n              RequestSize,\n              Url,\n              StatusCode,\n              time AS RequestTime,\n              measure_value::bigint AS RequestDuration\n            FROM (table name)\n            WHERE (clause)\n            &quot;&quot;&quot;;\nQueryRequest queryRequest = QueryRequest.builder()\n        .queryString(query)\n        .build();\n\nvar queryResult = timestreamQueryClient.query(queryRequest);\n\nSystem.out.println(queryResult.rows().size()); // 5000\n</code></pre>\n<p>The response contains all of the columns but with 0 rows and says there are more results. In the AWS console query editor, all works fine.</p>\n<p>Experimentally I found out that if I select 7 cols max in the select statement it works. I wanted to use <code>SELECT *</code> and that's how I found out about it</p>\n<p>In the code above if I just add one more col in the select 'TestId' the number of rows becomes 0</p>\n<pre class=\"lang-java prettyprint-override\"><code>String query = &quot;&quot;&quot;\n            SELECT\n              TestId,\n              Response,\n              ResponseSize,\n              RequestSize,\n              Url,\n              StatusCode,\n              time AS RequestTime,\n              measure_value::bigint AS RequestDuration\n            FROM (table name)\n            WHERE (clause)\n            &quot;&quot;&quot;;\nQueryRequest queryRequest = QueryRequest.builder()\n        .queryString(query)\n        .build();\n\nvar queryResult = timestreamQueryClient.query(queryRequest);\n\nSystem.out.println(queryResult.rows().size()); // 0 Rows\n</code></pre>\n<p>Both request are successful.</p>\n<p>So first of all is there a way to set this number somehow in the SDK and secondly is this a bug? I would expect the response to be 400 telling me that max cols are (something) and not an empty row list.</p>\n"},{"tags":["java","arrays","string","split"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1422428861,"post_id":28186437,"comment_id":44741513,"body_markdown":"YES it is an ordered array from the first to the last value of the source string.","body":"YES it is an ordered array from the first to the last value of the source string."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1422428901,"post_id":28186437,"comment_id":44741531,"body_markdown":"I don&#39;t see how that code even compiles - there&#39;s no overload for `String.split` accepting a `char`. Do you mean `aVar.split(&quot;/&quot;)`?","body":"I don&#39;t see how that code even compiles - there&#39;s no overload for <code>String.split</code> accepting a <code>char</code>. Do you mean <code>aVar.split(&quot;&#47;&quot;)</code>?"},{"owner":{"account_id":3577678,"reputation":11003,"user_id":2986537,"accept_rate":100,"display_name":"Razib"},"score":0,"creation_date":1422431721,"post_id":28186437,"comment_id":44742702,"body_markdown":"@Jon Skeet, great finding.  It was a typo (which I have fixed just now) comes from the being accustomed to java script split( ) version for char.","body":"@Jon Skeet, great finding.  It was a typo (which I have fixed just now) comes from the being accustomed to java script split( ) version for char."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1422433028,"post_id":28186437,"comment_id":44743256,"body_markdown":"This is why it&#39;s useful to create a short but complete program, compile and run it, then copy and paste *that* into the question. It avoids problems like this.","body":"This is why it&#39;s useful to create a short but complete program, compile and run it, then copy and paste <i>that</i> into the question. It avoids problems like this."}],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299858,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1422428637,"creation_date":1422428637,"answer_id":28186470,"question_id":28186437,"body_markdown":"&gt; Does the String array returned by the split() method always contain the String token in a order by which they are appeared (price--&gt;barcode--&gt;area1--&gt;true)?\r\n\r\nIn a word - yes.\r\n`String.split` maintains the order of the inputted string.","title":"String.split() method - order of token in the returned String array","body":"<blockquote>\n  <p>Does the String array returned by the split() method always contain the String token in a order by which they are appeared (price-->barcode-->area1-->true)?</p>\n</blockquote>\n\n<p>In a word - yes.\n<code>String.split</code> maintains the order of the inputted string.</p>\n"},{"tags":[],"owner":{"account_id":1275953,"reputation":26182,"user_id":1231230,"accept_rate":76,"display_name":"Ankur Singhal"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1422428899,"creation_date":1422428899,"answer_id":28186519,"question_id":28186437,"body_markdown":"as per [javadoc][1] here:\r\n\r\n    The substrings in the array are in the order in which they occur in this string.\r\n\r\n\r\nwatch for the line `The substrings in the array are in the order in which they occur in this string.` in the link.\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29","title":"String.split() method - order of token in the returned String array","body":"<p>as per <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29\" rel=\"nofollow\">javadoc</a> here:</p>\n\n<pre><code>The substrings in the array are in the order in which they occur in this string.\n</code></pre>\n\n<p>watch for the line <code>The substrings in the array are in the order in which they occur in this string.</code> in the link.</p>\n"},{"tags":[],"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1425831998,"creation_date":1422428979,"answer_id":28186542,"question_id":28186437,"body_markdown":"As you can see in the [javadoc][1] the result has an order:\r\n\r\n\r\n&gt; The substrings in the array are in the order in which they occur in\r\n&gt; this string\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split(java.lang.String,%20int)","title":"String.split() method - order of token in the returned String array","body":"<p>As you can see in the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split(java.lang.String,%20int)\" rel=\"nofollow\">javadoc</a> the result has an order:</p>\n\n<blockquote>\n  <p>The substrings in the array are in the order in which they occur in\n  this string</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1422429019,"creation_date":1422429019,"answer_id":28186550,"question_id":28186437,"body_markdown":"Assuming you&#39;re actually calling [`String.split(String)`][1], that method&#39;s documentation includes:\r\n\r\n&gt; This method works as if by invoking the two-argument [`split`][2] method with the given expression and a limit argument of zero. Trailing empty strings are therefore not included in the resulting array.\r\n\r\nThat method&#39;s documentation includes:\r\n\r\n&gt; The array returned by this method contains each substring of this string that is terminated by another substring that matches the given expression or is terminated by the end of the string. **The substrings in the array are in the order in which they occur in this string.** If the expression does not match any part of the input then the resulting array has just one element, namely this string.\r\n\r\n(Emphasis mine.)\r\n\r\nSo yes, they&#39;ll be returned in order, guaranteed.\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-int-","title":"String.split() method - order of token in the returned String array","body":"<p>Assuming you're actually calling <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-\" rel=\"noreferrer\"><code>String.split(String)</code></a>, that method's documentation includes:</p>\n\n<blockquote>\n  <p>This method works as if by invoking the two-argument <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-int-\" rel=\"noreferrer\"><code>split</code></a> method with the given expression and a limit argument of zero. Trailing empty strings are therefore not included in the resulting array.</p>\n</blockquote>\n\n<p>That method's documentation includes:</p>\n\n<blockquote>\n  <p>The array returned by this method contains each substring of this string that is terminated by another substring that matches the given expression or is terminated by the end of the string. <strong>The substrings in the array are in the order in which they occur in this string.</strong> If the expression does not match any part of the input then the resulting array has just one element, namely this string.</p>\n</blockquote>\n\n<p>(Emphasis mine.)</p>\n\n<p>So yes, they'll be returned in order, guaranteed.</p>\n"}],"owner":{"account_id":3577678,"reputation":11003,"user_id":2986537,"accept_rate":100,"display_name":"Razib"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2302,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":28186519,"answer_count":4,"score":3,"last_activity_date":1671024892,"creation_date":1422428475,"question_id":28186437,"body_markdown":"I am working on an application where I have to deal with a custom variable **`aVar`**- \r\n\r\n    String aVar = price/barcode/area1/true  // varName/varType/varScope/tracable\r\n\r\nThere may be some other attribute added to **`aVar`** seperated by a (&#39;/&#39;).\r\nTo get `varName, varType, varScope` etc I have to do the following things, please see the code below - \r\n       \r\n    String[] token = aVar.split(&quot;/&quot;);  \r\n  \r\n    String varName = token[0];\r\n    String varType = token[1];\r\n    String varScope = token[2];\r\n    String traceable = token[3];\r\n\r\nHere you can see the `varName` is taken from `token[0]` which is `price`, `varType` is taken from `token[1]` which is &#39;barcode&#39; and so on. Here I am assuming - after splitting `varName` always be in token[0], `varType` always be in token[1] and so on. \r\nNow my question is that - Does the `String` array returned by the `split()` method always contain the `String` token in a order by which they are appeared (price--&gt;barcode--&gt;area1--&gt;true)?  \r\n\r\nI have tested this several times with some few input and found the order maintained. But I am not sure will it be **ALWAYS** true for a **VERY LONG** string. ","title":"String.split() method - order of token in the returned String array","body":"<p>I am working on an application where I have to deal with a custom variable <strong><code>aVar</code></strong>-</p>\n<pre><code>String aVar = price/barcode/area1/true  // varName/varType/varScope/tracable\n</code></pre>\n<p>There may be some other attribute added to <strong><code>aVar</code></strong> seperated by a ('/').\nTo get <code>varName, varType, varScope</code> etc I have to do the following things, please see the code below -</p>\n<pre><code>String[] token = aVar.split(&quot;/&quot;);  \n\nString varName = token[0];\nString varType = token[1];\nString varScope = token[2];\nString traceable = token[3];\n</code></pre>\n<p>Here you can see the <code>varName</code> is taken from <code>token[0]</code> which is <code>price</code>, <code>varType</code> is taken from <code>token[1]</code> which is 'barcode' and so on. Here I am assuming - after splitting <code>varName</code> always be in token[0], <code>varType</code> always be in token[1] and so on.\nNow my question is that - Does the <code>String</code> array returned by the <code>split()</code> method always contain the <code>String</code> token in a order by which they are appeared (price--&gt;barcode--&gt;area1--&gt;true)?</p>\n<p>I have tested this several times with some few input and found the order maintained. But I am not sure will it be <strong>ALWAYS</strong> true for a <strong>VERY LONG</strong> string.</p>\n"},{"tags":["java","encryption","cryptography","aes","hmacsha256"],"comments":[{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":2,"creation_date":1671027402,"post_id":74798951,"comment_id":132008599,"body_markdown":"You have to Base64 decode the ciphertext before decryption and UTF-8 decode the decrypted data (and not vice versa).","body":"You have to Base64 decode the ciphertext before decryption and UTF-8 decode the decrypted data (and not vice versa)."},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1671027674,"post_id":74798951,"comment_id":132008713,"body_markdown":"...and during decryption salt and IV from encryption must be used.","body":"...and during decryption salt and IV from encryption must be used."},{"owner":{"account_id":1041234,"reputation":1441,"user_id":1047226,"accept_rate":70,"display_name":"hell_storm2004"},"score":0,"creation_date":1671028162,"post_id":74798951,"comment_id":132008920,"body_markdown":"@Topaco Are you trying to say I make `salt` and `ivBytes` as statics at the top?","body":"@Topaco Are you trying to say I make <code>salt</code> and <code>ivBytes</code> as statics at the top?"},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":3,"creation_date":1671028648,"post_id":74798951,"comment_id":132009129,"body_markdown":"No, absolutely not. Static values are insecure. IV and salt are to be generated randomly during encryption (as you do). However, after encryption they are concatenated with the ciphertext, e.g. salt|iv|ciphertext, and this is sent to the decrypting side (note that salt and IV are not secret). The decrypting side separates the 3 parts and thus has everything needed for decryption.","body":"No, absolutely not. Static values are insecure. IV and salt are to be generated randomly during encryption (as you do). However, after encryption they are concatenated with the ciphertext, e.g. salt|iv|ciphertext, and this is sent to the decrypting side (note that salt and IV are not secret). The decrypting side separates the 3 parts and thus has everything needed for decryption."},{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1671036234,"post_id":74798951,"comment_id":132012239,"body_markdown":"Just in general you have to apply de-transformations in the reverse order of the transformations, so in this case it should be plaintext -&gt; encrypt -&gt; base64 encode -&gt; transmit -&gt; receive -&gt; base-64 decode -&gt; decrypt -&gt; plaintext again.","body":"Just in general you have to apply de-transformations in the reverse order of the transformations, so in this case it should be plaintext -&gt; encrypt -&gt; base64 encode -&gt; transmit -&gt; receive -&gt; base-64 decode -&gt; decrypt -&gt; plaintext again."}],"owner":{"account_id":1041234,"reputation":1441,"user_id":1047226,"accept_rate":70,"display_name":"hell_storm2004"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":175,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671024148,"creation_date":1671024148,"question_id":74798951,"body_markdown":"I am trying to write and encrypt/decrypt program that. I am able to encrypt the String just fine, but while decrypting, I am getting the above error.\r\n\r\nMy code currently looks like this:\r\n\r\n    import java.nio.charset.StandardCharsets;\r\n    import java.security.InvalidAlgorithmParameterException;\r\n    import java.security.InvalidKeyException;\r\n    import java.security.NoSuchAlgorithmException;\r\n    import java.security.SecureRandom;\r\n    import java.security.Security;\r\n    import java.security.spec.InvalidKeySpecException;\r\n    import java.util.Base64;\r\n    \r\n    import javax.crypto.BadPaddingException;\r\n    import javax.crypto.Cipher;\r\n    import javax.crypto.IllegalBlockSizeException;\r\n    import javax.crypto.NoSuchPaddingException;\r\n    import javax.crypto.SecretKey;\r\n    import javax.crypto.SecretKeyFactory;\r\n    import javax.crypto.spec.IvParameterSpec;\r\n    import javax.crypto.spec.PBEKeySpec;\r\n    import javax.crypto.spec.PBEParameterSpec;\r\n    \r\n    public class Trial {\r\n    \r\n    \tstatic String key = &quot;USSWIF3925NJ50R&quot;;\r\n    \tstatic String userName = &quot;sam1234t&quot;;\r\n    \r\n    \tpublic static void main(String[] arg) throws IllegalBlockSizeException, BadPaddingException {\r\n    \r\n    \t\tTrial trial = new Trial();\r\n    \r\n    \t\tCipher cipher = trial.initialiseCipher(&quot;encrypt&quot;);\r\n    \r\n    \t\t// Finally generate the transient key in bytes.\r\n    \t\tbyte[] transientKey = cipher.doFinal(userName.getBytes(StandardCharsets.UTF_8));\r\n    \r\n    \t\tString encryptedPassword = Base64.getEncoder().encodeToString(transientKey);\r\n    \r\n    \t\tSystem.out.println(&quot;Encrypted Key: &quot; + encryptedPassword);\r\n    \r\n    \t\tcipher = trial.initialiseCipher(&quot;decrypt&quot;);\r\n    \r\n    \t\t// Finally decrypt the transient key in bytes.\r\n    \t\tbyte[] temp = cipher.doFinal(encryptedPassword.getBytes(StandardCharsets.UTF_8));\r\n    \t\tString decryptedKey = new String(Base64.getDecoder().decode(temp));\r\n    \r\n    \t\tSystem.out.println(&quot;Decrypted Key: &quot; + decryptedKey);\r\n    \t}\r\n    \r\n    \r\n    \tprivate Cipher initialiseCipher(String mode) {\r\n    \r\n    \t\tCipher cipher = null;\r\n    \r\n    \t\ttry {\r\n    \r\n    \t\t\tSecurity.setProperty(&quot;crypto.policy&quot;, &quot;unlimited&quot;);\r\n    \r\n    \t\t\tSecureRandom secureRandom = new SecureRandom();\r\n    \t\t\tbyte[] salt = new byte[256];\r\n    \t\t\tbyte[] ivBytes = new byte[16];\r\n    \r\n    \t\t\tsecureRandom.nextBytes(salt);\r\n    \t\t\tsecureRandom.nextBytes(ivBytes);\r\n    \r\n    \t\t\t// Generate the Key Specs.\r\n    \t\t\tIvParameterSpec ivParameterSpec = new IvParameterSpec(ivBytes);\r\n    \t\t\tPBEParameterSpec pbeParameterSpec = new PBEParameterSpec(salt, 65536, ivParameterSpec);\r\n    \t\t\tPBEKeySpec pbeKeySpec = new PBEKeySpec((key + userName).toCharArray());\r\n    \r\n    \t\t\tSecretKeyFactory secretKeyFactory = SecretKeyFactory.getInstance(&quot;PBEWITHHMACSHA512ANDAES_256&quot;);\r\n    \t\t\tSecretKey secretKey = secretKeyFactory.generateSecret(pbeKeySpec);\r\n    \r\n    \t\t\tcipher = Cipher.getInstance(&quot;PBEWITHHMACSHA512ANDAES_256&quot;);\r\n    \r\n    \t\t\tif (mode.equals(&quot;encrypt&quot;)) {\r\n    \t\t\t\tcipher.init(Cipher.ENCRYPT_MODE, secretKey, pbeParameterSpec);\r\n    \t\t\t} else if (mode.equals(&quot;decrypt&quot;)) {\r\n    \t\t\t\tcipher.init(Cipher.DECRYPT_MODE, secretKey, pbeParameterSpec);\r\n    \t\t\t}\r\n    \r\n    \t\t} catch (NoSuchAlgorithmException e) {\r\n    \r\n    \t\t\te.printStackTrace();\r\n    \r\n    \t\t} catch (InvalidKeySpecException e) {\r\n    \r\n    \t\t\te.printStackTrace();\r\n    \r\n    \t\t} catch (NoSuchPaddingException e) {\r\n    \r\n    \t\t\te.printStackTrace();\r\n    \r\n    \t\t} catch (InvalidKeyException e) {\r\n    \r\n    \t\t\te.printStackTrace();\r\n    \r\n    \t\t} catch (InvalidAlgorithmParameterException e) {\r\n    \r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \r\n    \t\treturn cipher;\r\n    \t}\r\n    }\r\n\r\n\r\n\r\nWhen I run the piece of code I get the output:\r\n\r\n    Encrypted Key: 9DfMJ/yuEFobrdGVsVkhpQ==\r\n    Exception in thread &quot;main&quot; javax.crypto.IllegalBlockSizeException: Input length must be multiple of 16 when decrypting with padded cipher\r\n    \tat com.sun.crypto.provider.CipherCore.prepareInputBuffer(CipherCore.java:1005)\r\n    \tat com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:848)\r\n    \tat com.sun.crypto.provider.PBES2Core.engineDoFinal(PBES2Core.java:323)\r\n    \tat javax.crypto.Cipher.doFinal(Cipher.java:2164)\r\n    \tat com.att.logicalprovisioning.simulators.Trial.main(Trial.java:43)\r\n\r\n\r\nAll the solutions I Googled for use the Cipher algorithm as `AES`. So I am not sure it replicates like for like, I have tried a few of them, without any luck.\r\n\r\nAny help would be helpful. Thanks.","title":"Input length must be multiple of 16 when decrypting with padded cipher (PBEWITHHMACSHA512ANDAES_256)","body":"<p>I am trying to write and encrypt/decrypt program that. I am able to encrypt the String just fine, but while decrypting, I am getting the above error.</p>\n<p>My code currently looks like this:</p>\n<pre><code>import java.nio.charset.StandardCharsets;\nimport java.security.InvalidAlgorithmParameterException;\nimport java.security.InvalidKeyException;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.SecureRandom;\nimport java.security.Security;\nimport java.security.spec.InvalidKeySpecException;\nimport java.util.Base64;\n\nimport javax.crypto.BadPaddingException;\nimport javax.crypto.Cipher;\nimport javax.crypto.IllegalBlockSizeException;\nimport javax.crypto.NoSuchPaddingException;\nimport javax.crypto.SecretKey;\nimport javax.crypto.SecretKeyFactory;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.PBEKeySpec;\nimport javax.crypto.spec.PBEParameterSpec;\n\npublic class Trial {\n\n    static String key = &quot;USSWIF3925NJ50R&quot;;\n    static String userName = &quot;sam1234t&quot;;\n\n    public static void main(String[] arg) throws IllegalBlockSizeException, BadPaddingException {\n\n        Trial trial = new Trial();\n\n        Cipher cipher = trial.initialiseCipher(&quot;encrypt&quot;);\n\n        // Finally generate the transient key in bytes.\n        byte[] transientKey = cipher.doFinal(userName.getBytes(StandardCharsets.UTF_8));\n\n        String encryptedPassword = Base64.getEncoder().encodeToString(transientKey);\n\n        System.out.println(&quot;Encrypted Key: &quot; + encryptedPassword);\n\n        cipher = trial.initialiseCipher(&quot;decrypt&quot;);\n\n        // Finally decrypt the transient key in bytes.\n        byte[] temp = cipher.doFinal(encryptedPassword.getBytes(StandardCharsets.UTF_8));\n        String decryptedKey = new String(Base64.getDecoder().decode(temp));\n\n        System.out.println(&quot;Decrypted Key: &quot; + decryptedKey);\n    }\n\n\n    private Cipher initialiseCipher(String mode) {\n\n        Cipher cipher = null;\n\n        try {\n\n            Security.setProperty(&quot;crypto.policy&quot;, &quot;unlimited&quot;);\n\n            SecureRandom secureRandom = new SecureRandom();\n            byte[] salt = new byte[256];\n            byte[] ivBytes = new byte[16];\n\n            secureRandom.nextBytes(salt);\n            secureRandom.nextBytes(ivBytes);\n\n            // Generate the Key Specs.\n            IvParameterSpec ivParameterSpec = new IvParameterSpec(ivBytes);\n            PBEParameterSpec pbeParameterSpec = new PBEParameterSpec(salt, 65536, ivParameterSpec);\n            PBEKeySpec pbeKeySpec = new PBEKeySpec((key + userName).toCharArray());\n\n            SecretKeyFactory secretKeyFactory = SecretKeyFactory.getInstance(&quot;PBEWITHHMACSHA512ANDAES_256&quot;);\n            SecretKey secretKey = secretKeyFactory.generateSecret(pbeKeySpec);\n\n            cipher = Cipher.getInstance(&quot;PBEWITHHMACSHA512ANDAES_256&quot;);\n\n            if (mode.equals(&quot;encrypt&quot;)) {\n                cipher.init(Cipher.ENCRYPT_MODE, secretKey, pbeParameterSpec);\n            } else if (mode.equals(&quot;decrypt&quot;)) {\n                cipher.init(Cipher.DECRYPT_MODE, secretKey, pbeParameterSpec);\n            }\n\n        } catch (NoSuchAlgorithmException e) {\n\n            e.printStackTrace();\n\n        } catch (InvalidKeySpecException e) {\n\n            e.printStackTrace();\n\n        } catch (NoSuchPaddingException e) {\n\n            e.printStackTrace();\n\n        } catch (InvalidKeyException e) {\n\n            e.printStackTrace();\n\n        } catch (InvalidAlgorithmParameterException e) {\n\n            e.printStackTrace();\n        }\n\n        return cipher;\n    }\n}\n</code></pre>\n<p>When I run the piece of code I get the output:</p>\n<pre><code>Encrypted Key: 9DfMJ/yuEFobrdGVsVkhpQ==\nException in thread &quot;main&quot; javax.crypto.IllegalBlockSizeException: Input length must be multiple of 16 when decrypting with padded cipher\n    at com.sun.crypto.provider.CipherCore.prepareInputBuffer(CipherCore.java:1005)\n    at com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:848)\n    at com.sun.crypto.provider.PBES2Core.engineDoFinal(PBES2Core.java:323)\n    at javax.crypto.Cipher.doFinal(Cipher.java:2164)\n    at com.att.logicalprovisioning.simulators.Trial.main(Trial.java:43)\n</code></pre>\n<p>All the solutions I Googled for use the Cipher algorithm as <code>AES</code>. So I am not sure it replicates like for like, I have tried a few of them, without any luck.</p>\n<p>Any help would be helpful. Thanks.</p>\n"},{"tags":["java","windows","eclipse","swing","builder"],"comments":[{"owner":{"account_id":13252051,"reputation":1635,"user_id":9569292,"display_name":"Thomas Timbul"},"score":0,"creation_date":1671027110,"post_id":74798865,"comment_id":132008475,"body_markdown":"It is 2022. Have you considered using the latest version of Eclipse? You can have both versions on your harddrive side by side, in case you need to go back. Make a backup copy of the project/workspace, too.","body":"It is 2022. Have you considered using the latest version of Eclipse? You can have both versions on your harddrive side by side, in case you need to go back. Make a backup copy of the project/workspace, too."},{"owner":{"account_id":27007718,"reputation":1,"user_id":20567898,"display_name":"Toan Tran"},"score":0,"creation_date":1671697975,"post_id":74798865,"comment_id":132155412,"body_markdown":"Thanks for commenting! I tried but it did not work. I installed both eclipse 2022 &amp; 2018 and it still did not work. Now I gave up and switched to another IDE","body":"Thanks for commenting! I tried but it did not work. I installed both eclipse 2022 &amp; 2018 and it still did not work. Now I gave up and switched to another IDE"}],"owner":{"account_id":27007718,"reputation":1,"user_id":20567898,"display_name":"Toan Tran"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671023777,"creation_date":1671023777,"question_id":74798865,"body_markdown":"I encounter this problem as below:\r\n&quot;Eclipse is running under 0, butthis Java project has a 1.8 Java compliance level, so WindowBuilder will not be able to load classesfrom this project. Use a lower level of Java for the project, or run Eclipse using a newer Javaversion. &quot;\r\n\r\n\r\n\r\nI tried several ways but it did not work. I installed both java 17 and java 1.8 and changed the jre to 1.8 &amp; the complier to 1.8. In the end, it still did not work. \r\nThe eclipse version I am using is 2018. I need it to start the SWING application and now I am into troubles.\r\nCan you give me some suggestions? Thanks in advance!","title":"The incompatible between windows builder versions and java versions and eclipse version","body":"<p>I encounter this problem as below:\n&quot;Eclipse is running under 0, butthis Java project has a 1.8 Java compliance level, so WindowBuilder will not be able to load classesfrom this project. Use a lower level of Java for the project, or run Eclipse using a newer Javaversion. &quot;</p>\n<p>I tried several ways but it did not work. I installed both java 17 and java 1.8 and changed the jre to 1.8 &amp; the complier to 1.8. In the end, it still did not work.\nThe eclipse version I am using is 2018. I need it to start the SWING application and now I am into troubles.\nCan you give me some suggestions? Thanks in advance!</p>\n"},{"tags":["java","hadoop","apache-spark","rdd"],"answers":[{"tags":[],"owner":{"account_id":6430407,"reputation":1114,"user_id":4983845,"accept_rate":93,"display_name":"Vale"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1467818050,"creation_date":1467818050,"answer_id":38227538,"question_id":38224132,"body_markdown":"Looks like it cannot be done, so here is the code  I used:\r\n\r\n    final hdfsNameNodePath = &quot;hdfs://quickstart.cloudera:8080&quot;;\r\n\r\n    JavaPairRDD&lt;String, PortableDataStream&gt; imageByteRDD = jsc.binaryFiles(sourcePath);\r\n\t\t    if(!imageByteRDD.isEmpty())\r\n\t\t    \timageByteRDD.foreachPartition(new VoidFunction&lt;Iterator&lt;Tuple2&lt;String,PortableDataStream&gt;&gt;&gt;() {\r\n\t\t    \t\t\r\n\t\t\t\t\t@Override\r\n\t\t\t\t\tpublic void call(Iterator&lt;Tuple2&lt;String, PortableDataStream&gt;&gt; arg0)\r\n\t\t\t\t\t\t\tthrows Exception {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tConfiguration conf = new Configuration();\r\n\t\t\t\t\t\tconf.set(&quot;fs.defaultFS&quot;, hdfsNameNodePath);\r\n\t\t\t\t\t\t//the string above should be passed as argument\r\n    SequenceFile.Writer writer = SequenceFile.createWriter(\r\n\t\t\t\t\t\t        \t\t conf, \r\n\t\t\t\t\t\t        \t\t SequenceFile.Writer.file([***ETCETERA...\r\n\r\n","title":"Use SparkContext hadoop configuration within RDD methods/closures, like foreachPartition","body":"<p>Looks like it cannot be done, so here is the code  I used:</p>\n\n<pre><code>final hdfsNameNodePath = \"hdfs://quickstart.cloudera:8080\";\n\nJavaPairRDD&lt;String, PortableDataStream&gt; imageByteRDD = jsc.binaryFiles(sourcePath);\n        if(!imageByteRDD.isEmpty())\n            imageByteRDD.foreachPartition(new VoidFunction&lt;Iterator&lt;Tuple2&lt;String,PortableDataStream&gt;&gt;&gt;() {\n\n                @Override\n                public void call(Iterator&lt;Tuple2&lt;String, PortableDataStream&gt;&gt; arg0)\n                        throws Exception {\n\n                    Configuration conf = new Configuration();\n                    conf.set(\"fs.defaultFS\", hdfsNameNodePath);\n                    //the string above should be passed as argument\nSequenceFile.Writer writer = SequenceFile.createWriter(\n                                     conf, \n                                     SequenceFile.Writer.file([***ETCETERA...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2611206,"reputation":12820,"user_id":2261274,"display_name":"stevel"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1471879400,"creation_date":1471865095,"answer_id":39078308,"question_id":38224132,"body_markdown":"The problem here is that Hadoop Configuration&#39;s aren&#39;t tagged as `Serializable`, so Spark wont pull them into RDDs. They are marked as `Writable`, so Hadoop&#39;s serialization mechanism can marshall and unmarshall them, but Spark doesn&#39;t directly work with that\r\n\r\nThe two long term fix options would be \r\n\r\n1. Add Support for serializing writables in Spark. Maybe [SPARK-2421](https://issues.apache.org/jira/browse/SPARK-2421)?\r\n1. Make Hadoop Configuration Serializable. \r\n1. Add explicit support for serializing Hadoop Configs.\r\n\r\nYou aren&#39;t going to hit any major objections to making Hadoop conf serializable; provided you implement custom ser/deser methods which delegate to the writable IO calls (and which just iterate through all key/value pairs). I say that as a Hadoop committer. \r\n\r\n**Update**: Here&#39;s the code to create a serlializable class which does marshall the contents of a Hadoop config. Create it with `val ser = new ConfSerDeser(hadoopConf)`; refer to it in your RDD as `ser.get()`.\r\n\r\n    /*\r\n     * Licensed to the Apache Software Foundation (ASF) under one or more\r\n     * contributor license agreements.  See the NOTICE file distributed with\r\n     * this work for additional information regarding copyright ownership.\r\n     * The ASF licenses this file to You under the Apache License, Version 2.0\r\n     * (the &quot;License&quot;); you may not use this file except in compliance with\r\n     * the License.  You may obtain a copy of the License at\r\n     *\r\n     *    http://www.apache.org/licenses/LICENSE-2.0\r\n     *\r\n     * Unless required by applicable law or agreed to in writing, software\r\n     * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\r\n     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n     * See the License for the specific language governing permissions and\r\n     * limitations under the License.\r\n     */\r\n  \r\n     import org.apache.hadoop.conf.Configuration\r\n    \r\n    /**\r\n     * Class to make Hadoop configurations serializable; uses the\r\n     * `Writeable` operations to do this.\r\n     * Note: this only serializes the explicitly set values, not any set\r\n     * in site/default or other XML resources.\r\n     * @param conf\r\n     */\r\n    class ConfigSerDeser(var conf: Configuration) extends Serializable {\r\n    \r\n      def this() {\r\n        this(new Configuration())\r\n      }\r\n    \r\n      def get(): Configuration = conf\r\n    \r\n      private def writeObject (out: java.io.ObjectOutputStream): Unit = {\r\n        conf.write(out)\r\n      }\r\n    \r\n      private def readObject (in: java.io.ObjectInputStream): Unit = {\r\n        conf = new Configuration()\r\n        conf.readFields(in)\r\n      }\r\n    \r\n      private def readObjectNoData(): Unit = {\r\n        conf = new Configuration()\r\n      }\r\n    }\r\n\r\nNote that it would be relatively straightforward for someone to make this generic for all Writeable classes; you&#39;d just need to provide a classname in the constructor and use that to instantiate the writeable during deserialization.\r\n","title":"Use SparkContext hadoop configuration within RDD methods/closures, like foreachPartition","body":"<p>The problem here is that Hadoop Configuration's aren't tagged as <code>Serializable</code>, so Spark wont pull them into RDDs. They are marked as <code>Writable</code>, so Hadoop's serialization mechanism can marshall and unmarshall them, but Spark doesn't directly work with that</p>\n\n<p>The two long term fix options would be </p>\n\n<ol>\n<li>Add Support for serializing writables in Spark. Maybe <a href=\"https://issues.apache.org/jira/browse/SPARK-2421\" rel=\"noreferrer\">SPARK-2421</a>?</li>\n<li>Make Hadoop Configuration Serializable. </li>\n<li>Add explicit support for serializing Hadoop Configs.</li>\n</ol>\n\n<p>You aren't going to hit any major objections to making Hadoop conf serializable; provided you implement custom ser/deser methods which delegate to the writable IO calls (and which just iterate through all key/value pairs). I say that as a Hadoop committer. </p>\n\n<p><strong>Update</strong>: Here's the code to create a serlializable class which does marshall the contents of a Hadoop config. Create it with <code>val ser = new ConfSerDeser(hadoopConf)</code>; refer to it in your RDD as <code>ser.get()</code>.</p>\n\n<pre><code>/*\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to You under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n import org.apache.hadoop.conf.Configuration\n\n/**\n * Class to make Hadoop configurations serializable; uses the\n * `Writeable` operations to do this.\n * Note: this only serializes the explicitly set values, not any set\n * in site/default or other XML resources.\n * @param conf\n */\nclass ConfigSerDeser(var conf: Configuration) extends Serializable {\n\n  def this() {\n    this(new Configuration())\n  }\n\n  def get(): Configuration = conf\n\n  private def writeObject (out: java.io.ObjectOutputStream): Unit = {\n    conf.write(out)\n  }\n\n  private def readObject (in: java.io.ObjectInputStream): Unit = {\n    conf = new Configuration()\n    conf.readFields(in)\n  }\n\n  private def readObjectNoData(): Unit = {\n    conf = new Configuration()\n  }\n}\n</code></pre>\n\n<p>Note that it would be relatively straightforward for someone to make this generic for all Writeable classes; you'd just need to provide a classname in the constructor and use that to instantiate the writeable during deserialization.</p>\n"},{"tags":[],"owner":{"account_id":1167867,"reputation":5014,"user_id":1145750,"accept_rate":69,"display_name":"Gary Gauh"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1477985850,"creation_date":1477985850,"answer_id":40355871,"question_id":38224132,"body_markdown":"This is a java implementation, according to @Steve&#39;s Answer.\r\n\r\n    import java.io.Serializable;\r\n    import java.io.IOException;\r\n    import org.apache.hadoop.conf.Configuration;\r\n\r\n\r\n    public class SerializableHadoopConfiguration implements Serializable {\r\n        Configuration conf;\r\n\r\n        public SerializableHadoopConfiguration(Configuration hadoopConf) {\r\n            this.conf = hadoopConf;\r\n\r\n            if (this.conf == null) {\r\n                this.conf = new Configuration();\r\n            }\r\n        }\r\n\r\n        public SerializableHadoopConfiguration() {\r\n            this.conf = new Configuration();\r\n        }\r\n\r\n        public Configuration get() {\r\n            return this.conf;\r\n        }\r\n\r\n        private void writeObject(java.io.ObjectOutputStream out) throws IOException {\r\n            this.conf.write(out);\r\n        }\r\n\r\n        private void readObject(java.io.ObjectInputStream in) throws IOException {\r\n            this.conf = new Configuration();\r\n            this.conf.readFields(in);\r\n        }\r\n    }","title":"Use SparkContext hadoop configuration within RDD methods/closures, like foreachPartition","body":"<p>This is a java implementation, according to @Steve's Answer.</p>\n\n<pre><code>import java.io.Serializable;\nimport java.io.IOException;\nimport org.apache.hadoop.conf.Configuration;\n\n\npublic class SerializableHadoopConfiguration implements Serializable {\n    Configuration conf;\n\n    public SerializableHadoopConfiguration(Configuration hadoopConf) {\n        this.conf = hadoopConf;\n\n        if (this.conf == null) {\n            this.conf = new Configuration();\n        }\n    }\n\n    public SerializableHadoopConfiguration() {\n        this.conf = new Configuration();\n    }\n\n    public Configuration get() {\n        return this.conf;\n    }\n\n    private void writeObject(java.io.ObjectOutputStream out) throws IOException {\n        this.conf.write(out);\n    }\n\n    private void readObject(java.io.ObjectInputStream in) throws IOException {\n        this.conf = new Configuration();\n        this.conf.readFields(in);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13905997,"reputation":141,"user_id":10813447,"display_name":"Simon Wong"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1582951610,"creation_date":1582951610,"answer_id":60462062,"question_id":38224132,"body_markdown":"You can serialize and deserialize the `org.apache.hadoop.conf.Configuration` using `org.apache.spark.SerializableWritable`.\r\n\r\nFor example:\r\n\r\n```\r\nimport org.apache.spark.SerializableWritable\r\n\r\n...\r\n\r\nval hadoopConf = spark.sparkContext.hadoopConfiguration\r\n// serialize here\r\nval serializedConf = new SerializableWritable(hadoopConf)\r\n\r\n\r\n// then access the conf by calling .value on serializedConf\r\nrdd.map(someFunction(serializedConf.value))\r\n","title":"Use SparkContext hadoop configuration within RDD methods/closures, like foreachPartition","body":"<p>You can serialize and deserialize the <code>org.apache.hadoop.conf.Configuration</code> using <code>org.apache.spark.SerializableWritable</code>.</p>\n\n<p>For example:</p>\n\n<pre><code>import org.apache.spark.SerializableWritable\n\n...\n\nval hadoopConf = spark.sparkContext.hadoopConfiguration\n// serialize here\nval serializedConf = new SerializableWritable(hadoopConf)\n\n\n// then access the conf by calling .value on serializedConf\nrdd.map(someFunction(serializedConf.value))\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3105922,"reputation":173,"user_id":2628726,"display_name":"gdforj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640710183,"creation_date":1640710183,"answer_id":70510066,"question_id":38224132,"body_markdown":"Looking at the Spark internal codebase, one should _broadcast_ a serialized version of the Hadoop configuration.\r\n\r\nhttps://github.com/apache/spark/blob/5d45a415f3a29898d92380380cfd82bfc7f579ea/sql/core/src/main/scala/org/apache/spark/sql/execution/datasources/binaryfile/BinaryFileFormat.scala#L98-L99\r\n\r\n    val spark = SparkSession.builder.master(&quot;local&quot;).getOrCreate\r\n    val broadcastedHadoopConf = spark.sparkContext.broadcast(new org.apache.spark.util.SerializableConfiguration(spark.sparkContext.hadoopConfiguration))\r\n    \r\n    val dfFiles = spark.read.format(&quot;binaryFile&quot;).load(&quot;/somepath&quot;).select(&quot;path&quot;)\r\n    \r\n    val df = dfFiles.map {row =&gt; {\r\n    &#160; val rawPath = row.getString(0)\r\n      val path = new Path(new URI(rawPath.replace(&quot; &quot;, &quot;%20&quot;)))\r\n\r\n      // get hadoop configuration in RDD method\r\n      val hadoopConf = broadcastedHadoopConf.value.value\r\n\r\n    &#160; val fs = path.getFileSystem(hadoopConfiguration)\r\n    &#160; val status = fs.getFileStatus(path)\r\n    &#160; val inputStream = fs.open(status.getPath)\r\n      // ... whatever you need to do to read data\r\n    }}\r\n    ","title":"Use SparkContext hadoop configuration within RDD methods/closures, like foreachPartition","body":"<p>Looking at the Spark internal codebase, one should <em>broadcast</em> a serialized version of the Hadoop configuration.</p>\n<p><a href=\"https://github.com/apache/spark/blob/5d45a415f3a29898d92380380cfd82bfc7f579ea/sql/core/src/main/scala/org/apache/spark/sql/execution/datasources/binaryfile/BinaryFileFormat.scala#L98-L99\" rel=\"nofollow noreferrer\">https://github.com/apache/spark/blob/5d45a415f3a29898d92380380cfd82bfc7f579ea/sql/core/src/main/scala/org/apache/spark/sql/execution/datasources/binaryfile/BinaryFileFormat.scala#L98-L99</a></p>\n<pre><code>val spark = SparkSession.builder.master(&quot;local&quot;).getOrCreate\nval broadcastedHadoopConf = spark.sparkContext.broadcast(new org.apache.spark.util.SerializableConfiguration(spark.sparkContext.hadoopConfiguration))\n\nval dfFiles = spark.read.format(&quot;binaryFile&quot;).load(&quot;/somepath&quot;).select(&quot;path&quot;)\n\nval df = dfFiles.map {row =&gt; {\n  val rawPath = row.getString(0)\n  val path = new Path(new URI(rawPath.replace(&quot; &quot;, &quot;%20&quot;)))\n\n  // get hadoop configuration in RDD method\n  val hadoopConf = broadcastedHadoopConf.value.value\n\n  val fs = path.getFileSystem(hadoopConfiguration)\n  val status = fs.getFileStatus(path)\n  val inputStream = fs.open(status.getPath)\n  // ... whatever you need to do to read data\n}}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2387621,"reputation":61,"user_id":2088250,"display_name":"user2088250"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671023616,"creation_date":1671010850,"answer_id":74796219,"question_id":38224132,"body_markdown":"SerializableConfiguration is available in spark 3.1.2\r\n\r\nval serializedConf = new org.apache.spark.util.SerializableConfiguration(spark.sparkContext.hadoopConfiguration)","title":"Use SparkContext hadoop configuration within RDD methods/closures, like foreachPartition","body":"<p>SerializableConfiguration is available in spark 3.1.2</p>\n<p>val serializedConf = new org.apache.spark.util.SerializableConfiguration(spark.sparkContext.hadoopConfiguration)</p>\n"}],"owner":{"account_id":6430407,"reputation":1114,"user_id":4983845,"accept_rate":93,"display_name":"Vale"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9550,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":38227538,"answer_count":6,"score":9,"last_activity_date":1671023616,"creation_date":1467808421,"question_id":38224132,"body_markdown":"I am using Spark to read a bunch of files, elaborating on them and then saving all of them as a Sequence file. What I wanted, was to have 1 sequence file per partition, so I did this: \r\n\r\n    SparkConf sparkConf = new SparkConf().setAppName(&quot;writingHDFS&quot;)\r\n\t\t\t\t\t.setMaster(&quot;local[2]&quot;)\r\n\t\t\t\t\t.set(&quot;spark.streaming.stopGracefullyOnShutdown&quot;, &quot;true&quot;);\r\n\t\t\tfinal JavaSparkContext jsc = new JavaSparkContext(sparkConf);\r\n\t\t\tjsc.hadoopConfiguration().addResource(hdfsConfPath + &quot;hdfs-site.xml&quot;);\r\n\t\t\tjsc.hadoopConfiguration().addResource(hdfsConfPath + &quot;core-site.xml&quot;);\r\n\t\t    //JavaStreamingContext jssc = new JavaStreamingContext(sparkConf, new Duration(5*1000));\r\n\t\t    \r\n\t\t    JavaPairRDD&lt;String, PortableDataStream&gt; imageByteRDD = jsc.binaryFiles(sourcePath);\r\n\t\t    if(!imageByteRDD.isEmpty())\r\n\t\t    \timageByteRDD.foreachPartition(new VoidFunction&lt;Iterator&lt;Tuple2&lt;String,PortableDataStream&gt;&gt;&gt;() {\r\n\r\n                    @Override\r\n\t\t\t\t\tpublic void call(Iterator&lt;Tuple2&lt;String, PortableDataStream&gt;&gt; arg0){\r\n\t\t\t\t\t\t\tthrows Exception {\r\n                      [&#176;&#176;&#176;SOME STUFF&#176;&#176;&#176;]\r\n                      SequenceFile.Writer writer = SequenceFile.createWriter(\r\n\t\t\t\t\t\t        \t\t jsc.hadoopConfiguration(), \r\n    //here lies the problem: how to pass the hadoopConfiguration I have put inside the Spark Context? \r\n    Previously, I created a Configuration for each partition, and it works, but I&#39;m sure there is a much more &quot;sparky way&quot;\r\n\r\nDoes anybody know how to use the Hadoop Configuration Object *inside* the RDD closures?\r\n\t\t    \t\t","title":"Use SparkContext hadoop configuration within RDD methods/closures, like foreachPartition","body":"<p>I am using Spark to read a bunch of files, elaborating on them and then saving all of them as a Sequence file. What I wanted, was to have 1 sequence file per partition, so I did this: </p>\n\n<pre><code>SparkConf sparkConf = new SparkConf().setAppName(\"writingHDFS\")\n                .setMaster(\"local[2]\")\n                .set(\"spark.streaming.stopGracefullyOnShutdown\", \"true\");\n        final JavaSparkContext jsc = new JavaSparkContext(sparkConf);\n        jsc.hadoopConfiguration().addResource(hdfsConfPath + \"hdfs-site.xml\");\n        jsc.hadoopConfiguration().addResource(hdfsConfPath + \"core-site.xml\");\n        //JavaStreamingContext jssc = new JavaStreamingContext(sparkConf, new Duration(5*1000));\n\n        JavaPairRDD&lt;String, PortableDataStream&gt; imageByteRDD = jsc.binaryFiles(sourcePath);\n        if(!imageByteRDD.isEmpty())\n            imageByteRDD.foreachPartition(new VoidFunction&lt;Iterator&lt;Tuple2&lt;String,PortableDataStream&gt;&gt;&gt;() {\n\n                @Override\n                public void call(Iterator&lt;Tuple2&lt;String, PortableDataStream&gt;&gt; arg0){\n                        throws Exception {\n                  [°°°SOME STUFF°°°]\n                  SequenceFile.Writer writer = SequenceFile.createWriter(\n                                     jsc.hadoopConfiguration(), \n//here lies the problem: how to pass the hadoopConfiguration I have put inside the Spark Context? \nPreviously, I created a Configuration for each partition, and it works, but I'm sure there is a much more \"sparky way\"\n</code></pre>\n\n<p>Does anybody know how to use the Hadoop Configuration Object <em>inside</em> the RDD closures?</p>\n"},{"tags":["java","java-8","predicate","functional-interface"],"comments":[{"owner":{"account_id":5122294,"reputation":11550,"user_id":4105457,"display_name":"Flown"},"score":0,"creation_date":1497361257,"post_id":44523215,"comment_id":76038410,"body_markdown":"What do you think what this `Predicate` is doing?","body":"What do you think what this <code>Predicate</code> is doing?"},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1497361315,"post_id":44523215,"comment_id":76038450,"body_markdown":"this is the `guava` predicate btw, not jdk","body":"this is the <code>guava</code> predicate btw, not jdk"},{"owner":{"account_id":5122294,"reputation":11550,"user_id":4105457,"display_name":"Flown"},"score":1,"creation_date":1497361378,"post_id":44523215,"comment_id":76038512,"body_markdown":"@Eugene Both Interfaces have the same purpose.","body":"@Eugene Both Interfaces have the same purpose."},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1497361411,"post_id":44523215,"comment_id":76038536,"body_markdown":"@Flown I know...","body":"@Flown I know..."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1497361426,"post_id":44523215,"comment_id":76038546,"body_markdown":"Predicates tell you if a condition is true or false. Sounds handy if you&#39;re filtering a collection in a functional way.","body":"Predicates tell you if a condition is true or false. Sounds handy if you&#39;re filtering a collection in a functional way."}],"answers":[{"tags":[],"owner":{"account_id":6076754,"reputation":6728,"user_id":4743869,"accept_rate":68,"display_name":"ByeBye"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1497361401,"creation_date":1497361401,"answer_id":44523329,"question_id":44523215,"body_markdown":"`Iterables.tryFind` will return first value in given list (`result.getTravellerTypes()`) which fulfills predicate given by parameter.\r\n\r\nSo for each of your travellerTypes it will run `apply` method. First which will return `true` will be returned by `tryFind` method.\r\n\r\n`.orNull()` indicates, that if none objects in your list fulfills predicate method will return null instead optional.","title":"Why we need Predicate functional interface in Java?","body":"<p><code>Iterables.tryFind</code> will return first value in given list (<code>result.getTravellerTypes()</code>) which fulfills predicate given by parameter.</p>\n\n<p>So for each of your travellerTypes it will run <code>apply</code> method. First which will return <code>true</code> will be returned by <code>tryFind</code> method.</p>\n\n<p><code>.orNull()</code> indicates, that if none objects in your list fulfills predicate method will return null instead optional.</p>\n"},{"tags":[],"owner":{"account_id":6148867,"reputation":4677,"user_id":4793951,"display_name":"Zircon"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1497361706,"creation_date":1497361706,"answer_id":44523464,"question_id":44523215,"body_markdown":"`Predicate`s are great for abstracting out entire functions into whatever type of result they produce, which increases readability and reusability. This is true for both Guava and Java versions of the interface. `Predicate`s should be well-named, so in this example it&#39;s a bit hard to understand what&#39;s going on.\r\n\r\nI have no idea what a `TravellerType` or `PassengerCode` is, but for the sake of argument let&#39;s rename the `Predicate` to whatever it does.\r\n\r\nWe can then code our iterables statement to be:\r\n\r\n    primaryPaxOutput = Iterables.tryFind(result.getTravellerTypes(), paxCodeIsCHD).orNull();\r\n\r\nWe then interpret this statement as:\r\n\r\n    Iterables.tryFind(            //Find the first instance\r\n    result.getTravellerTypes(),   //among this Iterable\r\n    paxCodeIsCHD                  //where this predicate is true\r\n    ).orNull();                   //or else set to null.\r\n\r\nIf you know what `tryFind` does, then this code becomes much more readable than injecting an anonymous class or even a lambda as a parameter.","title":"Why we need Predicate functional interface in Java?","body":"<p><code>Predicate</code>s are great for abstracting out entire functions into whatever type of result they produce, which increases readability and reusability. This is true for both Guava and Java versions of the interface. <code>Predicate</code>s should be well-named, so in this example it's a bit hard to understand what's going on.</p>\n\n<p>I have no idea what a <code>TravellerType</code> or <code>PassengerCode</code> is, but for the sake of argument let's rename the <code>Predicate</code> to whatever it does.</p>\n\n<p>We can then code our iterables statement to be:</p>\n\n<pre><code>primaryPaxOutput = Iterables.tryFind(result.getTravellerTypes(), paxCodeIsCHD).orNull();\n</code></pre>\n\n<p>We then interpret this statement as:</p>\n\n<pre><code>Iterables.tryFind(            //Find the first instance\nresult.getTravellerTypes(),   //among this Iterable\npaxCodeIsCHD                  //where this predicate is true\n).orNull();                   //or else set to null.\n</code></pre>\n\n<p>If you know what <code>tryFind</code> does, then this code becomes much more readable than injecting an anonymous class or even a lambda as a parameter.</p>\n"},{"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1497362226,"creation_date":1497361886,"answer_id":44523540,"question_id":44523215,"body_markdown":"Predicates allow to set a condition during filtering.\r\n\r\nHere your condition is :\r\n\r\n    PassengerCodeUtil.paxCodesEqual(input.getTravellerType().getCode(), &quot;CHD&quot;);\r\n\r\nIt means you want to find the first `TravellerType` instance contained in `result.getTravellerTypes()`  which the `code` value is equal to the `CHD` String.&lt;br&gt;\r\n\r\nWithout predicate usage that filters the expected element,  which interest to use `tryFind()` ? &lt;br&gt;\r\nYou may get any element in `result.getTravellerTypes()`.&lt;br&gt;\r\n\r\n","title":"Why we need Predicate functional interface in Java?","body":"<p>Predicates allow to set a condition during filtering.</p>\n\n<p>Here your condition is :</p>\n\n<pre><code>PassengerCodeUtil.paxCodesEqual(input.getTravellerType().getCode(), \"CHD\");\n</code></pre>\n\n<p>It means you want to find the first <code>TravellerType</code> instance contained in <code>result.getTravellerTypes()</code>  which the <code>code</code> value is equal to the <code>CHD</code> String.<br></p>\n\n<p>Without predicate usage that filters the expected element,  which interest to use <code>tryFind()</code> ? <br>\nYou may get any element in <code>result.getTravellerTypes()</code>.<br></p>\n"},{"tags":[],"owner":{"account_id":5376932,"reputation":159,"user_id":4283476,"display_name":"Anushka Senarathna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548856705,"creation_date":1540206807,"answer_id":52927993,"question_id":44523215,"body_markdown":"In Java 8, Predicate is a functional interface which can be used as the assignment target for a lambda expression or method reference. So, where you think, we can use these true/false returning functions in day to day programming? I will say you can use predicates anywhere where you need to evaluate a condition on group/collection of similar objects such that evaluation can result either in true or false.\r\n\r\nFor example, you can use predicates in these real-time use cases\r\n\r\n1. Find all children born after a particular date\r\n2. Employees greater than a certain age and so on..\r\n","title":"Why we need Predicate functional interface in Java?","body":"<p>In Java 8, Predicate is a functional interface which can be used as the assignment target for a lambda expression or method reference. So, where you think, we can use these true/false returning functions in day to day programming? I will say you can use predicates anywhere where you need to evaluate a condition on group/collection of similar objects such that evaluation can result either in true or false.</p>\n\n<p>For example, you can use predicates in these real-time use cases</p>\n\n<ol>\n<li>Find all children born after a particular date</li>\n<li>Employees greater than a certain age and so on..</li>\n</ol>\n"}],"owner":{"account_id":3268751,"reputation":1481,"user_id":2752615,"accept_rate":67,"display_name":"Arif Acar"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1105,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":4,"score":2,"last_activity_date":1671023486,"creation_date":1497361109,"question_id":44523215,"body_markdown":"Why we need Predicate interface? I didn&#39;t understand below code. How can I find result of primaryPaxOutput alternatively?\r\n\r\n        Predicate&lt;TravellerType&gt; predicate1 = new Predicate&lt;TravellerType&gt;() {\r\n            @Override\r\n            public boolean apply(TravellerType input) {\r\n                return PassengerCodeUtil.paxCodesEqual(input.getTravellerType().getCode(), &quot;CHD&quot;);\r\n            }\r\n        };\r\n\r\n        primaryPaxOutput = Iterables.tryFind(result.getTravellerTypes(), predicate1).orNull();","title":"Why we need Predicate functional interface in Java?","body":"<p>Why we need Predicate interface? I didn't understand below code. How can I find result of primaryPaxOutput alternatively?</p>\n\n<pre><code>    Predicate&lt;TravellerType&gt; predicate1 = new Predicate&lt;TravellerType&gt;() {\n        @Override\n        public boolean apply(TravellerType input) {\n            return PassengerCodeUtil.paxCodesEqual(input.getTravellerType().getCode(), \"CHD\");\n        }\n    };\n\n    primaryPaxOutput = Iterables.tryFind(result.getTravellerTypes(), predicate1).orNull();\n</code></pre>\n"},{"tags":["java","fonts","jasper-reports"],"comments":[{"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"score":0,"creation_date":1564189268,"post_id":57224644,"comment_id":100960894,"body_markdown":"@Alex K, don&#39;t mark it as duplicated. After 2 hours read these answers, I still cannot run success.","body":"@Alex K, don&#39;t mark it as duplicated. After 2 hours read these answers, I still cannot run success."}],"answers":[{"tags":[],"owner":{"account_id":958762,"reputation":4773,"user_id":983559,"display_name":"dada67"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1564168160,"creation_date":1564167792,"answer_id":57225739,"question_id":57224644,"body_markdown":"Try this:\r\n\r\n 1. Do not set a PDF Font Name for the font family that you created with the Arial ttf.  You don&#39;t want to use Helvetica because it doesn&#39;t include glyphs for Vietnamese characters.  Leave it empty so that the Arial ttf is used in PDF.\r\n 2. Set the PDF Encoding for the font family to Identity-H (Vietnamese uses horizontal writing).\r\n 3. The screenshot shows that the font family is called &quot;times&quot;, so you&#39;ll have to use `&lt;font fontName=&quot;times&quot;/&gt;` for the text element.\r\n\r\nThis will result in the Arial ttf being embedded in the PDF file (a subset of it actually) and used for the text.  Therefore the PDF would show the Vietnamese characters, as long as the Arial ttf includes glyphs for them (and my Arial ttf copy does).\r\n\r\nIf for some reason you don&#39;t want to embed Arial in the PDF file, you can also use the DejaVu fonts included in net.sf.jasperreports:jasperreports-fonts:6.9.0, for instance `&lt;font fontName=&quot;DejaVu Sans&quot;/&gt;`\r\n\r\nYou might also want to set the `net.sf.jasperreports.default.pdf.encoding` property to `Identity-H`, if you generally want to embed fonts in PDFs, or just leave it unset and specify the PDF encoding for each font family.","title":"How to display Vietnamese in PDF what exported by Jasper report correctly?","body":"<p>Try this:</p>\n\n<ol>\n<li>Do not set a PDF Font Name for the font family that you created with the Arial ttf.  You don't want to use Helvetica because it doesn't include glyphs for Vietnamese characters.  Leave it empty so that the Arial ttf is used in PDF.</li>\n<li>Set the PDF Encoding for the font family to Identity-H (Vietnamese uses horizontal writing).</li>\n<li>The screenshot shows that the font family is called \"times\", so you'll have to use <code>&lt;font fontName=\"times\"/&gt;</code> for the text element.</li>\n</ol>\n\n<p>This will result in the Arial ttf being embedded in the PDF file (a subset of it actually) and used for the text.  Therefore the PDF would show the Vietnamese characters, as long as the Arial ttf includes glyphs for them (and my Arial ttf copy does).</p>\n\n<p>If for some reason you don't want to embed Arial in the PDF file, you can also use the DejaVu fonts included in net.sf.jasperreports:jasperreports-fonts:6.9.0, for instance <code>&lt;font fontName=\"DejaVu Sans\"/&gt;</code></p>\n\n<p>You might also want to set the <code>net.sf.jasperreports.default.pdf.encoding</code> property to <code>Identity-H</code>, if you generally want to embed fonts in PDFs, or just leave it unset and specify the PDF encoding for each font family.</p>\n"},{"tags":[],"owner":{"account_id":13287713,"reputation":73,"user_id":9593249,"display_name":"pbloz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1564168891,"creation_date":1564168891,"answer_id":57225948,"question_id":57224644,"body_markdown":"It&#39;s a font issue. Not a PDF encoding problem. Maybe try to use **Arial Unicode MS**\r\n\r\nInside your tag add the following\r\n\r\n    &lt;font fontName=&quot;Arial Unicode MS&quot; size=&quot;11&quot; pdfFontName=&quot;Arial Unicode MS&quot; pdfEncoding=&quot;Identity-H&quot;/&gt; \r\n\r\nAlso make sure that Arial font extension jar in class path. Search internet for arial font extension jar.","title":"How to display Vietnamese in PDF what exported by Jasper report correctly?","body":"<p>It's a font issue. Not a PDF encoding problem. Maybe try to use <strong>Arial Unicode MS</strong></p>\n\n<p>Inside your tag add the following</p>\n\n<pre><code>&lt;font fontName=\"Arial Unicode MS\" size=\"11\" pdfFontName=\"Arial Unicode MS\" pdfEncoding=\"Identity-H\"/&gt; \n</code></pre>\n\n<p>Also make sure that Arial font extension jar in class path. Search internet for arial font extension jar.</p>\n"},{"tags":[],"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671023390,"creation_date":1671021130,"answer_id":74798358,"question_id":57224644,"body_markdown":"File `jasperreports.properties`\r\n\r\n```\r\nnet.sf.jasperreports.default.pdf.encoding=UTF-8\r\nnet.sf.jasperreports.export.character.encoding=UTF-8\r\n\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\nhttps://community.jaspersoft.com/wiki/custom-font-font-extension\r\n\r\nhttps://freefontsdownload.net/download/36926/arial-unicode-ms.zip\r\n\r\nhttps://learn.microsoft.com/vi-vn/typography/font-list/arial-unicode-ms\r\n\r\nhttps://stackoverflow.com/questions/43382555/what-is-the-purpose-of-the-pdf-embedded-option-of-the-static-text-element-in-i\r\n\r\n  [1]: https://i.stack.imgur.com/xqIAo.png","title":"How to display Vietnamese in PDF what exported by Jasper report correctly?","body":"<p>File <code>jasperreports.properties</code></p>\n<pre><code>net.sf.jasperreports.default.pdf.encoding=UTF-8\nnet.sf.jasperreports.export.character.encoding=UTF-8\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/xqIAo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xqIAo.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://community.jaspersoft.com/wiki/custom-font-font-extension\" rel=\"nofollow noreferrer\">https://community.jaspersoft.com/wiki/custom-font-font-extension</a></p>\n<p><a href=\"https://freefontsdownload.net/download/36926/arial-unicode-ms.zip\" rel=\"nofollow noreferrer\">https://freefontsdownload.net/download/36926/arial-unicode-ms.zip</a></p>\n<p><a href=\"https://learn.microsoft.com/vi-vn/typography/font-list/arial-unicode-ms\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/vi-vn/typography/font-list/arial-unicode-ms</a></p>\n<p><a href=\"https://stackoverflow.com/questions/43382555/what-is-the-purpose-of-the-pdf-embedded-option-of-the-static-text-element-in-i\">What is the purpose of the &#39;Pdf embedded&#39; option of the Static Text element in iReport 5.6.0?</a></p>\n"}],"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2046,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":57225948,"answer_count":3,"score":1,"last_activity_date":1671023390,"creation_date":1564162189,"question_id":57224644,"body_markdown":"I am using these dependencies\r\n\r\n    implementation (&#39;net.sf.jasperreports:jasperreports:6.9.0&#39;)\r\n    implementation (&#39;net.sf.jasperreports:jasperreports-fonts:6.9.0&#39;)\r\n    implementation (&#39;net.sf.jasperreports:jasperreports-functions:6.9.0&#39;)\r\n    implementation (&#39;net.sf.jasperreports:jasperreports-metadata:6.9.0&#39;)\r\n    implementation (&#39;net.sf.jasperreports:jasperreports-fonts:6.9.0&#39;)\r\n    implementation (&#39;net.sf.jasperreports:jasperreports-annotation-processors:6.9.0&#39;)\r\n    implementation (&#39;net.sf.jasperreports:jasperreports-chart-themes:6.9.0&#39;)\r\n    implementation (&#39;net.sf.jasperreports:jasperreports-chart-customizers:6.9.0&#39;)\r\n    implementation (&#39;net.sf.jasperreports:jasperreports-custom-visualization:6.9.0&#39;)\r\n    compile &#39;com.lowagie:itext:2.1.7.js5&#39;\r\n\r\n\r\nwith Jasper report for Eclipse 2019.6 . Vietnamese character display in error\r\n\r\nJava code\r\n\r\n    @RequestMapping(value = &quot;/ca_audit/minute_pdf&quot;, method = RequestMethod.GET)\r\n    public void generatePDFCashAuditMinute() throws JRException {\r\n        JasperReport jasperReport = JasperCompileManager.compileReport(&quot;D:/vy/template.jrxml&quot;);\r\n        Map&lt;String, Object&gt; parameters = new HashMap&lt;&gt;();\r\n        parameters.put(&quot;p1&quot;, &quot;Example joint stock company&quot;); // T&#234;n tổ chức\r\n        parameters.put(&quot;p2&quot;, &quot;EXKK002&quot;); // Số bi&#234;n bản\r\n        parameters.put(&quot;p3&quot;, 26); // Ng&#224;y\r\n        JRDataSource jrDataSource = new JREmptyDataSource();\r\n        JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, parameters, jrDataSource);\r\n        JasperExportManager.exportReportToPdfFile(jasperPrint, &quot;D:/foo/out.pdf&quot;);\r\n    }\r\n\r\nThe content of file *.jrxml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;jasperReport xmlns=&quot;http://jasperreports.sourceforge.net/jasperreports&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd&quot; name=&quot;bien_ban_kiem_ke_quy_a4&quot; pageWidth=&quot;595&quot; pageHeight=&quot;842&quot; columnWidth=&quot;555&quot; leftMargin=&quot;20&quot; rightMargin=&quot;20&quot; topMargin=&quot;20&quot; bottomMargin=&quot;20&quot; uuid=&quot;7098c966-5c92-43e3-a729-b3d486fc858b&quot;&gt;\r\n    \t&lt;parameter name=&quot;p1&quot; class=&quot;java.lang.String&quot;/&gt;\r\n    \t&lt;parameter name=&quot;p2&quot; class=&quot;java.lang.String&quot;/&gt;\r\n    \t&lt;parameter name=&quot;p3&quot; class=&quot;java.lang.Integer&quot;/&gt;\r\n    \t&lt;queryString&gt;\r\n    \t\t&lt;![CDATA[select 1 as id]]&gt;\r\n    \t&lt;/queryString&gt;\r\n    \t&lt;field name=&quot;id&quot; class=&quot;java.lang.Integer&quot;/&gt;\r\n    \t&lt;title&gt;\r\n    \t\t&lt;band height=&quot;84&quot; splitType=&quot;Stretch&quot;&gt;\r\n    \t\t\t&lt;textField&gt;\r\n    \t\t\t\t&lt;reportElement x=&quot;14&quot; y=&quot;6&quot; width=&quot;100&quot; height=&quot;30&quot; uuid=&quot;2106c35d-3d5e-4203-950a-54a87b6952ea&quot;/&gt;\r\n    \t\t\t\t&lt;textElement&gt;\r\n    \t\t\t\t\t&lt;font fontName=&quot;Arial&quot;/&gt;\r\n    \t\t\t\t&lt;/textElement&gt;\r\n    \t\t\t\t&lt;textFieldExpression&gt;&lt;![CDATA[$P{p1}]]&gt;&lt;/textFieldExpression&gt;\r\n    \t\t\t&lt;/textField&gt;\r\n    \t\t\t&lt;staticText&gt;\r\n    \t\t\t\t&lt;reportElement x=&quot;376&quot; y=&quot;23&quot; width=&quot;64&quot; height=&quot;16&quot; uuid=&quot;77d41a67-82d2-46d0-9a3e-5327ae3b450b&quot;/&gt;\r\n    \t\t\t\t&lt;text&gt;&lt;![CDATA[Số bi&#234;n bản:]]&gt;&lt;/text&gt;\r\n    \t\t\t&lt;/staticText&gt;\r\n    \t\t\t&lt;textField&gt;\r\n    \t\t\t\t&lt;reportElement x=&quot;440&quot; y=&quot;23&quot; width=&quot;50&quot; height=&quot;16&quot; uuid=&quot;a505da46-48af-4dcb-84bc-f9d27697919d&quot;/&gt;\r\n    \t\t\t\t&lt;textFieldExpression&gt;&lt;![CDATA[$P{p2}]]&gt;&lt;/textFieldExpression&gt;\r\n    \t\t\t&lt;/textField&gt;\r\n    \t\t\t&lt;staticText&gt;\r\n    \t\t\t\t&lt;reportElement x=&quot;260&quot; y=&quot;47&quot; width=&quot;34&quot; height=&quot;13&quot; uuid=&quot;541c25ed-4b29-4cc4-a19d-05f295ae0340&quot;/&gt;\r\n    \t\t\t\t&lt;text&gt;&lt;![CDATA[ng&#224;y]]&gt;&lt;/text&gt;\r\n    \t\t\t&lt;/staticText&gt;\r\n    \t\t\t&lt;textField&gt;\r\n    \t\t\t\t&lt;reportElement x=&quot;290&quot; y=&quot;47&quot; width=&quot;40&quot; height=&quot;13&quot; uuid=&quot;72e64426-d702-4694-bc25-81a2f3e43f82&quot;/&gt;\r\n    \t\t\t\t&lt;textFieldExpression&gt;&lt;![CDATA[$P{p3}]]&gt;&lt;/textFieldExpression&gt;\r\n    \t\t\t&lt;/textField&gt;\r\n    \t\t&lt;/band&gt;\r\n    \t&lt;/title&gt;\r\n    &lt;/jasperReport&gt;\r\n\r\nI create file `jasperreports.properties` in classpath\r\n[![enter image description here][2]][2]\r\n\r\nIn Eclipse IDE (with Jaspersoft module)\r\n[![enter image description here][3]][3]\r\n\r\nHow to fix it?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kneX0.png\r\n  [2]: https://i.stack.imgur.com/z5hp8.png\r\n  [3]: https://i.stack.imgur.com/Jyddc.png","title":"How to display Vietnamese in PDF what exported by Jasper report correctly?","body":"<p>I am using these dependencies</p>\n\n<pre><code>implementation ('net.sf.jasperreports:jasperreports:6.9.0')\nimplementation ('net.sf.jasperreports:jasperreports-fonts:6.9.0')\nimplementation ('net.sf.jasperreports:jasperreports-functions:6.9.0')\nimplementation ('net.sf.jasperreports:jasperreports-metadata:6.9.0')\nimplementation ('net.sf.jasperreports:jasperreports-fonts:6.9.0')\nimplementation ('net.sf.jasperreports:jasperreports-annotation-processors:6.9.0')\nimplementation ('net.sf.jasperreports:jasperreports-chart-themes:6.9.0')\nimplementation ('net.sf.jasperreports:jasperreports-chart-customizers:6.9.0')\nimplementation ('net.sf.jasperreports:jasperreports-custom-visualization:6.9.0')\ncompile 'com.lowagie:itext:2.1.7.js5'\n</code></pre>\n\n<p>with Jasper report for Eclipse 2019.6 . Vietnamese character display in error</p>\n\n<p>Java code</p>\n\n<pre><code>@RequestMapping(value = \"/ca_audit/minute_pdf\", method = RequestMethod.GET)\npublic void generatePDFCashAuditMinute() throws JRException {\n    JasperReport jasperReport = JasperCompileManager.compileReport(\"D:/vy/template.jrxml\");\n    Map&lt;String, Object&gt; parameters = new HashMap&lt;&gt;();\n    parameters.put(\"p1\", \"Example joint stock company\"); // Tên tổ chức\n    parameters.put(\"p2\", \"EXKK002\"); // Số biên bản\n    parameters.put(\"p3\", 26); // Ngày\n    JRDataSource jrDataSource = new JREmptyDataSource();\n    JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, parameters, jrDataSource);\n    JasperExportManager.exportReportToPdfFile(jasperPrint, \"D:/foo/out.pdf\");\n}\n</code></pre>\n\n<p>The content of file *.jrxml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;jasperReport xmlns=\"http://jasperreports.sourceforge.net/jasperreports\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd\" name=\"bien_ban_kiem_ke_quy_a4\" pageWidth=\"595\" pageHeight=\"842\" columnWidth=\"555\" leftMargin=\"20\" rightMargin=\"20\" topMargin=\"20\" bottomMargin=\"20\" uuid=\"7098c966-5c92-43e3-a729-b3d486fc858b\"&gt;\n    &lt;parameter name=\"p1\" class=\"java.lang.String\"/&gt;\n    &lt;parameter name=\"p2\" class=\"java.lang.String\"/&gt;\n    &lt;parameter name=\"p3\" class=\"java.lang.Integer\"/&gt;\n    &lt;queryString&gt;\n        &lt;![CDATA[select 1 as id]]&gt;\n    &lt;/queryString&gt;\n    &lt;field name=\"id\" class=\"java.lang.Integer\"/&gt;\n    &lt;title&gt;\n        &lt;band height=\"84\" splitType=\"Stretch\"&gt;\n            &lt;textField&gt;\n                &lt;reportElement x=\"14\" y=\"6\" width=\"100\" height=\"30\" uuid=\"2106c35d-3d5e-4203-950a-54a87b6952ea\"/&gt;\n                &lt;textElement&gt;\n                    &lt;font fontName=\"Arial\"/&gt;\n                &lt;/textElement&gt;\n                &lt;textFieldExpression&gt;&lt;![CDATA[$P{p1}]]&gt;&lt;/textFieldExpression&gt;\n            &lt;/textField&gt;\n            &lt;staticText&gt;\n                &lt;reportElement x=\"376\" y=\"23\" width=\"64\" height=\"16\" uuid=\"77d41a67-82d2-46d0-9a3e-5327ae3b450b\"/&gt;\n                &lt;text&gt;&lt;![CDATA[Số biên bản:]]&gt;&lt;/text&gt;\n            &lt;/staticText&gt;\n            &lt;textField&gt;\n                &lt;reportElement x=\"440\" y=\"23\" width=\"50\" height=\"16\" uuid=\"a505da46-48af-4dcb-84bc-f9d27697919d\"/&gt;\n                &lt;textFieldExpression&gt;&lt;![CDATA[$P{p2}]]&gt;&lt;/textFieldExpression&gt;\n            &lt;/textField&gt;\n            &lt;staticText&gt;\n                &lt;reportElement x=\"260\" y=\"47\" width=\"34\" height=\"13\" uuid=\"541c25ed-4b29-4cc4-a19d-05f295ae0340\"/&gt;\n                &lt;text&gt;&lt;![CDATA[ngày]]&gt;&lt;/text&gt;\n            &lt;/staticText&gt;\n            &lt;textField&gt;\n                &lt;reportElement x=\"290\" y=\"47\" width=\"40\" height=\"13\" uuid=\"72e64426-d702-4694-bc25-81a2f3e43f82\"/&gt;\n                &lt;textFieldExpression&gt;&lt;![CDATA[$P{p3}]]&gt;&lt;/textFieldExpression&gt;\n            &lt;/textField&gt;\n        &lt;/band&gt;\n    &lt;/title&gt;\n&lt;/jasperReport&gt;\n</code></pre>\n\n<p>I create file <code>jasperreports.properties</code> in classpath\n<a href=\"https://i.stack.imgur.com/z5hp8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z5hp8.png\" alt=\"enter image description here\"></a></p>\n\n<p>In Eclipse IDE (with Jaspersoft module)\n<a href=\"https://i.stack.imgur.com/Jyddc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Jyddc.png\" alt=\"enter image description here\"></a></p>\n\n<p>How to fix it?</p>\n"},{"tags":["java","amazon-web-services","aws-lambda","sdk"],"comments":[{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1670967656,"post_id":74791071,"comment_id":131994643,"body_markdown":"if you use the aws sdk within lambda you have automatic credentials once you assign an [execution role](https://docs.aws.amazon.com/lambda/latest/dg/lambda-intro-execution-role.html) to that lambda. And there&#39;s probably an invoke execute api thing that doesn&#39;t require you to manually sign requests. Running on EC2 instances you have similarly automatically the credentials of the Instance Role. And there are more ways to get credentials like from environment variables: https://docs.aws.amazon.com/sdkref/latest/guide/standardized-credentials.html","body":"if you use the aws sdk within lambda you have automatic credentials once you assign an <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/lambda-intro-execution-role.html\" rel=\"nofollow noreferrer\">execution role</a> to that lambda. And there&#39;s probably an invoke execute api thing that doesn&#39;t require you to manually sign requests. Running on EC2 instances you have similarly automatically the credentials of the Instance Role. And there are more ways to get credentials like from environment variables: <a href=\"https://docs.aws.amazon.com/sdkref/latest/guide/standardized-credentials.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/sdkref/latest/guide/&hellip;</a>"},{"owner":{"account_id":10389194,"reputation":14819,"user_id":7661119,"display_name":"Ervin Szilagyi"},"score":0,"creation_date":1670968621,"post_id":74791071,"comment_id":131994855,"body_markdown":"You don&#39;t hardcode credentials, you would want to rely on the default credential chain: https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/credentials.html","body":"You don&#39;t hardcode credentials, you would want to rely on the default credential chain: <a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/credentials.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/sdk-for-java/latest/developer-guide/&hellip;</a>"},{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1670972474,"post_id":74791071,"comment_id":131995710,"body_markdown":"WHen you use Java SDK in an AWS Lambda function, you do not needs creds, You run the Lambda function as a IAM user that has permission to invoke the given service.","body":"WHen you use Java SDK in an AWS Lambda function, you do not needs creds, You run the Lambda function as a IAM user that has permission to invoke the given service."},{"owner":{"account_id":4900033,"reputation":1579,"user_id":3948658,"accept_rate":50,"display_name":"dredbound"},"score":0,"creation_date":1671031948,"post_id":74791071,"comment_id":132010483,"body_markdown":"But what if I need to pass the access keys to another function in the code. Is there anyway to retrieve them from the lambda using java?","body":"But what if I need to pass the access keys to another function in the code. Is there anyway to retrieve them from the lambda using java?"},{"owner":{"account_id":4900033,"reputation":1579,"user_id":3948658,"accept_rate":50,"display_name":"dredbound"},"score":0,"creation_date":1671056606,"post_id":74791071,"comment_id":132018110,"body_markdown":"Nevermind, looks like I can get them from the lambda using `System.getenv(&quot;AWS_ACCESS_KEY_ID&quot;)`, `System.getenv(&quot;AWS_SECRET_ACCESS_KEY&quot;)`, `System.getenv(&quot;AWS_SESSION_TOKEN&quot;)`","body":"Nevermind, looks like I can get them from the lambda using <code>System.getenv(&quot;AWS_ACCESS_KEY_ID&quot;)</code>, <code>System.getenv(&quot;AWS_SECRET_ACCESS_KEY&quot;)</code>, <code>System.getenv(&quot;AWS_SESSION_TOKEN&quot;)</code>"}],"owner":{"account_id":4900033,"reputation":1579,"user_id":3948658,"accept_rate":50,"display_name":"dredbound"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671023321,"creation_date":1670966956,"question_id":74791071,"body_markdown":"I am writing a script in Java that calls an API Gateway endpoint. However in order for my script to work I need to it pass the AWS access keys and session token. Currently my code works but the AWS keys are hard-coded. How can I pass the keys without hardcoding them? Here is my current code:\r\n\r\n    import java.net.URL;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    import auth.AWS4SignerBase;\r\n    import auth.AWS4SignerForAuthorizationHeader;\r\n    import util.HttpUtils;\r\n    \r\n    class Main {\r\n      public static void main(String[] args) throws Exception {\r\n    \r\n        URL endpointUrl = new URL(&quot;https://lmno456.execute-api.us-east-1.amazonaws.com/prod/controlplane/model/a1&quot;);\r\n    \r\n        var regionName = &quot;us-east-1&quot;;\r\n        var awsAccessKey = &quot;abc123&quot;;\r\n        var awsSecretKey = &quot;def234&quot;;\r\n        var awsSessionToken = &quot;xyz789==&quot;;\r\n    \r\n        // for a simple GET, we have no body so supply the precomputed &#39;empty&#39; hash\r\n        Map&lt;String, String&gt; headers = new HashMap&lt;String, String&gt;();\r\n        headers.put(&quot;x-amz-content-sha256&quot;, AWS4SignerBase.EMPTY_BODY_SHA256);\r\n        headers.put(&quot;X-Amz-Security-Token&quot;, awsSessionToken);\r\n    \r\n        AWS4SignerForAuthorizationHeader signer = new AWS4SignerForAuthorizationHeader(endpointUrl, &quot;GET&quot;, &quot;execute-api&quot;, regionName);\r\n    \r\n        String authorization = signer.computeSignature(headers,\r\n                                                null, // no query parameters\r\n                                                AWS4SignerBase.EMPTY_BODY_SHA256,\r\n                                                awsAccessKey,\r\n                                                awsSecretKey);\r\n    \r\n        headers.put(&quot;Authorization&quot;, authorization);\r\n        String response = HttpUtils.invokeHttpRequest(endpointUrl, &quot;GET&quot;, headers, null);\r\n        System.out.println(&quot;--------- Response content ---------&quot;);\r\n        System.out.println(response);\r\n        System.out.println(&quot;------------------------------------&quot;);\r\n      }\r\n    }\r\n\r\n\r\nIdeally I&#39;m looking for something similar to python&#39;s boto3 `credentials = session.get_credentials()` to retrieve the access and session keys. I am doing this for an AWS lambda function.","title":"Java import AWS Access Keys from Session","body":"<p>I am writing a script in Java that calls an API Gateway endpoint. However in order for my script to work I need to it pass the AWS access keys and session token. Currently my code works but the AWS keys are hard-coded. How can I pass the keys without hardcoding them? Here is my current code:</p>\n<pre><code>import java.net.URL;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport auth.AWS4SignerBase;\nimport auth.AWS4SignerForAuthorizationHeader;\nimport util.HttpUtils;\n\nclass Main {\n  public static void main(String[] args) throws Exception {\n\n    URL endpointUrl = new URL(&quot;https://lmno456.execute-api.us-east-1.amazonaws.com/prod/controlplane/model/a1&quot;);\n\n    var regionName = &quot;us-east-1&quot;;\n    var awsAccessKey = &quot;abc123&quot;;\n    var awsSecretKey = &quot;def234&quot;;\n    var awsSessionToken = &quot;xyz789==&quot;;\n\n    // for a simple GET, we have no body so supply the precomputed 'empty' hash\n    Map&lt;String, String&gt; headers = new HashMap&lt;String, String&gt;();\n    headers.put(&quot;x-amz-content-sha256&quot;, AWS4SignerBase.EMPTY_BODY_SHA256);\n    headers.put(&quot;X-Amz-Security-Token&quot;, awsSessionToken);\n\n    AWS4SignerForAuthorizationHeader signer = new AWS4SignerForAuthorizationHeader(endpointUrl, &quot;GET&quot;, &quot;execute-api&quot;, regionName);\n\n    String authorization = signer.computeSignature(headers,\n                                            null, // no query parameters\n                                            AWS4SignerBase.EMPTY_BODY_SHA256,\n                                            awsAccessKey,\n                                            awsSecretKey);\n\n    headers.put(&quot;Authorization&quot;, authorization);\n    String response = HttpUtils.invokeHttpRequest(endpointUrl, &quot;GET&quot;, headers, null);\n    System.out.println(&quot;--------- Response content ---------&quot;);\n    System.out.println(response);\n    System.out.println(&quot;------------------------------------&quot;);\n  }\n}\n</code></pre>\n<p>Ideally I'm looking for something similar to python's boto3 <code>credentials = session.get_credentials()</code> to retrieve the access and session keys. I am doing this for an AWS lambda function.</p>\n"},{"tags":["java","mysql","spring-boot","docker","spring-data-jpa"],"comments":[{"owner":{"account_id":535778,"reputation":49549,"user_id":905093,"display_name":"Book Of Zeus"},"score":0,"creation_date":1590905476,"post_id":62111592,"comment_id":109853905,"body_markdown":"always run java with security egd and full path where the app is like: ```CMD [&quot;java&quot;,&quot;-Djava.security.egd=file:/dev/./urandom&quot;,&quot;-jar&quot;,&quot;/app/app.jar```","body":"always run java with security egd and full path where the app is like: <code>CMD [&quot;java&quot;,&quot;-Djava.security.egd=file:&#47;dev&#47;.&#47;urandom&quot;,&quot;-jar&quot;,&quot;&#47;a&zwnj;&#8203;pp&#47;app.jar</code>"}],"answers":[{"tags":[],"owner":{"account_id":4378751,"reputation":1815,"user_id":3571016,"display_name":"camba1"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1590905452,"creation_date":1590905452,"answer_id":62112299,"question_id":62111592,"body_markdown":"The error message seems to indicate the issue is failing to connect to the database. From your settings, it appears that you are trying to connect to the DB using localhost:3306. That will not work when you are running the application in a container because docker creates its own network which is separate from you machine’s network.  So, localhost in the container does not refer to your machine. \nYou need to instead setup a docker network that will allow your container to access the database in a specific IP address. \nHere is an article with the specifics:\n https://nickjanetakis.com/blog/docker-tip-35-connect-to-a-database-running-on-your-docker-host\nNote that I have assumed from your post, that the DB is installed in your host machine. If it is not and the DB is running in its own container, the you need to create a docker network and attach both containers to that network. ","title":"com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure when trying to build spring boot docker image","body":"<p>The error message seems to indicate the issue is failing to connect to the database. From your settings, it appears that you are trying to connect to the DB using localhost:3306. That will not work when you are running the application in a container because docker creates its own network which is separate from you machine’s network.  So, localhost in the container does not refer to your machine. \nYou need to instead setup a docker network that will allow your container to access the database in a specific IP address. \nHere is an article with the specifics:\n <a href=\"https://nickjanetakis.com/blog/docker-tip-35-connect-to-a-database-running-on-your-docker-host\" rel=\"nofollow noreferrer\">https://nickjanetakis.com/blog/docker-tip-35-connect-to-a-database-running-on-your-docker-host</a>\nNote that I have assumed from your post, that the DB is installed in your host machine. If it is not and the DB is running in its own container, the you need to create a docker network and attach both containers to that network. </p>\n"},{"tags":[],"owner":{"account_id":1733872,"reputation":2893,"user_id":1586864,"display_name":"Harsh"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1646286936,"creation_date":1646286936,"answer_id":71332681,"question_id":62111592,"body_markdown":"For me below solution worked\r\n\r\nchange your datasource url from \r\n\r\nThis:\r\n \r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/innodb\r\n\r\nTo:\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/innodb?useSSL=false","title":"com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure when trying to build spring boot docker image","body":"<p>For me below solution worked</p>\n<p>change your datasource url from</p>\n<p>This:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/innodb\n</code></pre>\n<p>To:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/innodb?useSSL=false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2305058,"reputation":166,"user_id":2024478,"display_name":"Nidhin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671022590,"creation_date":1671022590,"answer_id":74798651,"question_id":62111592,"body_markdown":"I had the same issue and resolved it by changing localhost to the service name on which MySQL was running.\r\n\r\nBelow is my docker-compose and application.properties files\r\n\r\n**docker-compose.yml**\r\n\r\n    version: &#39;3.8&#39;\r\n\r\n    services:\r\n     app:\r\n        container_name: tvms\r\n         build: \r\n         context: .\r\n         dockerfile: Dockerfile\r\n         tty: true\r\n        volumes:\r\n           - ../..:/workspaces:cached\r\n        ports:\r\n           - 8990:8990\r\n        networks:\r\n           - impaq\r\n        links:\r\n           - db:db\r\n    db:\r\n      image: percona:8.0\r\n      privileged: true\r\n      restart: always\r\n      container_name: standalone-mysql\r\n      environment:\r\n        MYSQL_ROOT_PASSWORD: ****\r\n      volumes:\r\n        - perconadata:/var/lib/mysql\r\n      ports:\r\n        - 3306:3306\r\n      networks:\r\n        - impaq \r\n    networks:\r\n       impaq:\r\n    volumes:\r\n      perconadata:\r\n\r\n\r\n**application.propeties**\r\n\r\n    #datasource\r\n    spring.datasource.url=jdbc:mysql://db:3306/db_name\r\n    spring.datasource.username=root\r\n    spring.datasource.password=*****\r\n","title":"com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure when trying to build spring boot docker image","body":"<p>I had the same issue and resolved it by changing localhost to the service name on which MySQL was running.</p>\n<p>Below is my docker-compose and application.properties files</p>\n<p><strong>docker-compose.yml</strong></p>\n<pre><code>version: '3.8'\n\nservices:\n app:\n    container_name: tvms\n     build: \n     context: .\n     dockerfile: Dockerfile\n     tty: true\n    volumes:\n       - ../..:/workspaces:cached\n    ports:\n       - 8990:8990\n    networks:\n       - impaq\n    links:\n       - db:db\ndb:\n  image: percona:8.0\n  privileged: true\n  restart: always\n  container_name: standalone-mysql\n  environment:\n    MYSQL_ROOT_PASSWORD: ****\n  volumes:\n    - perconadata:/var/lib/mysql\n  ports:\n    - 3306:3306\n  networks:\n    - impaq \nnetworks:\n   impaq:\nvolumes:\n  perconadata:\n</code></pre>\n<p><strong>application.propeties</strong></p>\n<pre><code>#datasource\nspring.datasource.url=jdbc:mysql://db:3306/db_name\nspring.datasource.username=root\nspring.datasource.password=*****\n</code></pre>\n"}],"owner":{"account_id":15338307,"reputation":89,"user_id":11066004,"display_name":"random12524345"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7552,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1671022590,"creation_date":1590899383,"question_id":62111592,"body_markdown":"I am trying to build my docker image for my spring boot application but keep encountering this error: \r\n\r\n     :: Spring Boot ::        (v2.2.5.RELEASE)\r\n    \r\n    2020-05-31 02:18:39.820  INFO 63 --- [           main] c.g.Apollo.ApolloApplicationTests        : Starting ApolloApplicationTests on 4b284b60945e with PID 63 (started by root in /build)\r\n    2020-05-31 02:18:39.838  INFO 63 --- [           main] c.g.Apollo.ApolloApplicationTests        : No active profile set, falling back to default profiles: default\r\n    2020-05-31 02:18:42.208  INFO 63 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n    2020-05-31 02:18:42.467  INFO 63 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 216ms. Found 3 JPA repository interfaces.\r\n    2020-05-31 02:18:44.902  INFO 63 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n    2020-05-31 02:18:46.575 ERROR 63 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Exception during pool initialization.\r\n    \r\n    com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\r\n    \r\n    The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n            at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174) ~[mysql-connector-java-8.0.20.jar:8.0.20]\r\n            at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64) ~[mysql-connector-java-8.0.20.jar:8.0.20]\r\n            at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:836) ~[mysql-connector-java-8.0.20.jar:8.0.20]\r\n            at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:456) ~[mysql-connector-java-8.0.20.jar:8.0.20]\r\n            at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:246) ~[mysql-connector-java-8.0.20.jar:8.0.20]\r\n            at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:197) ~[mysql-connector-java-8.0.20.jar:8.0.20]\r\n            at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-3.4.2.jar:na]\r\n            at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:354) ~[HikariCP-3.4.2.jar:na]\r\n            at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202) ~[HikariCP-3.4.2.jar:na]\r\n            at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:473) ~[HikariCP-3.4.2.jar:na]\r\n            at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:554) ~[HikariCP-3.4.2.jar:na]\r\n            at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115) ~[HikariCP-3.4.2.jar:na]\r\n            at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-3.4.2.jar:na]\r\n\r\nTerminal when successfully running in intellij:\r\n\r\n     :: Spring Boot ::        (v2.2.5.RELEASE)\r\n    \r\n    2020-05-31 01:04:39.322  INFO 19524 --- [  restartedMain] c.g.Apollo.ApolloApplication             : Starting ApolloApplication on asd-PC with PID 19524 (C:\\Projects\\Apollo\\target\\classes started by asd in C:\\Projects\\Apollo)\r\n    2020-05-31 01:04:39.324  INFO 19524 --- [  restartedMain] c.g.Apollo.ApolloApplication             : No active profile set, falling back to default profiles: default\r\n    2020-05-31 01:04:39.354  INFO 19524 --- [  restartedMain] o.s.b.devtools.restart.ChangeableUrls    : The Class-Path manifest attribute in C:\\Users\\asd\\.m2\\repository\\org\\glassfish\\jaxb\\jaxb-runtime\\2.3.2\\jaxb-runtime-2.3.2.jar referenced one or more files that do not exist: file:/C:/Users/asd/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.xml.bind-api-2.3.2.jar,file:/C:/Users/asd/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/txw2-2.3.2.jar,file:/C:/Users/asd/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/istack-commons-runtime-3.0.8.jar,file:/C:/Users/asd/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/stax-ex-1.8.1.jar,file:/C:/Users/asd/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/FastInfoset-1.2.16.jar,file:/C:/Users/asd/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.activation-api-1.2.1.jar\r\n    2020-05-31 01:04:39.354  INFO 19524 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set &#39;spring.devtools.add-properties&#39; to &#39;false&#39; to disable\r\n    2020-05-31 01:04:39.354  INFO 19524 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the &#39;logging.level.web&#39; property to &#39;DEBUG&#39;\r\n    2020-05-31 01:04:39.785  INFO 19524 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n    2020-05-31 01:04:39.846  INFO 19524 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 54ms. Found 3 JPA repository interfaces.\r\n    2020-05-31 01:04:40.214  INFO 19524 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n    2020-05-31 01:04:40.220  INFO 19524 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n    2020-05-31 01:04:40.221  INFO 19524 --- [  restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.31]\r\n    2020-05-31 01:04:40.293  INFO 19524 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n    2020-05-31 01:04:40.293  INFO 19524 --- [  restartedMain] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 939 ms\r\n    2020-05-31 01:04:40.365  INFO 19524 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n    2020-05-31 01:04:40.702  INFO 19524 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\r\n    2020-05-31 01:04:40.731  INFO 19524 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n    2020-05-31 01:04:40.800  INFO 19524 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.4.12.Final\r\n    2020-05-31 01:04:40.919  INFO 19524 --- [  restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\r\n    2020-05-31 01:04:41.006  INFO 19524 --- [  restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect\r\n    2020-05-31 01:04:41.407  INFO 19524 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n    2020-05-31 01:04:41.413  INFO 19524 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n    2020-05-31 01:04:41.650  WARN 19524 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\r\n    2020-05-31 01:04:41.717  INFO 19524 --- [  restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &#39;applicationTaskExecutor&#39;\r\n    2020-05-31 01:04:41.967  INFO 19524 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729\r\n    2020-05-31 01:04:41.995  INFO 19524 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;\r\n    2020-05-31 01:04:41.997  INFO 19524 --- [  restartedMain] c.g.Apollo.ApolloApplication             : Started ApolloApplication in 2.911 seconds (JVM running for 3.899)\r\n\r\n\r\nMy Dockerfile:\r\n\r\n    FROM maven:3.6.3-jdk-11-slim AS MAVEN_BUILD\r\n    \r\n    COPY pom.xml /build/\r\n    COPY src /build/src/\r\n    WORKDIR /build/\r\n    RUN mvn package\r\n    \r\n    FROM openjdk:11-jre-alpine\r\n    \r\n    WORKDIR /app\r\n    COPY --from=MAVEN_BUILD /build/target/*.war /app/app.war\r\n    ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;app.war&quot;]\r\n\r\nMy application.properties:\r\n\r\n    ## GraphQL SPQR ##\r\n    server.port=8080\r\n    graphql.spqr.gui.enabled=true\r\n    graphql.spqr.http.endpoint=/graphql\r\n    graphql.spqr.ws.endpoint=/graphql\r\n    \r\n    ## Database Properties ##\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/innodb\r\n    spring.datasource.username=root\r\n    spring.datasource.password=1234\r\n\r\nMy application works when I build and run the project in Intellij but not when I try and build my docker image. I am using MySQL and have just been connecting on localhost on port 3306.\r\n\r\n","title":"com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure when trying to build spring boot docker image","body":"<p>I am trying to build my docker image for my spring boot application but keep encountering this error:</p>\n<pre><code> :: Spring Boot ::        (v2.2.5.RELEASE)\n\n2020-05-31 02:18:39.820  INFO 63 --- [           main] c.g.Apollo.ApolloApplicationTests        : Starting ApolloApplicationTests on 4b284b60945e with PID 63 (started by root in /build)\n2020-05-31 02:18:39.838  INFO 63 --- [           main] c.g.Apollo.ApolloApplicationTests        : No active profile set, falling back to default profiles: default\n2020-05-31 02:18:42.208  INFO 63 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2020-05-31 02:18:42.467  INFO 63 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 216ms. Found 3 JPA repository interfaces.\n2020-05-31 02:18:44.902  INFO 63 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2020-05-31 02:18:46.575 ERROR 63 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Exception during pool initialization.\n\ncom.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n        at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174) ~[mysql-connector-java-8.0.20.jar:8.0.20]\n        at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64) ~[mysql-connector-java-8.0.20.jar:8.0.20]\n        at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:836) ~[mysql-connector-java-8.0.20.jar:8.0.20]\n        at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:456) ~[mysql-connector-java-8.0.20.jar:8.0.20]\n        at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:246) ~[mysql-connector-java-8.0.20.jar:8.0.20]\n        at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:197) ~[mysql-connector-java-8.0.20.jar:8.0.20]\n        at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-3.4.2.jar:na]\n        at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:354) ~[HikariCP-3.4.2.jar:na]\n        at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202) ~[HikariCP-3.4.2.jar:na]\n        at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:473) ~[HikariCP-3.4.2.jar:na]\n        at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:554) ~[HikariCP-3.4.2.jar:na]\n        at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115) ~[HikariCP-3.4.2.jar:na]\n        at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-3.4.2.jar:na]\n</code></pre>\n<p>Terminal when successfully running in intellij:</p>\n<pre><code> :: Spring Boot ::        (v2.2.5.RELEASE)\n\n2020-05-31 01:04:39.322  INFO 19524 --- [  restartedMain] c.g.Apollo.ApolloApplication             : Starting ApolloApplication on asd-PC with PID 19524 (C:\\Projects\\Apollo\\target\\classes started by asd in C:\\Projects\\Apollo)\n2020-05-31 01:04:39.324  INFO 19524 --- [  restartedMain] c.g.Apollo.ApolloApplication             : No active profile set, falling back to default profiles: default\n2020-05-31 01:04:39.354  INFO 19524 --- [  restartedMain] o.s.b.devtools.restart.ChangeableUrls    : The Class-Path manifest attribute in C:\\Users\\asd\\.m2\\repository\\org\\glassfish\\jaxb\\jaxb-runtime\\2.3.2\\jaxb-runtime-2.3.2.jar referenced one or more files that do not exist: file:/C:/Users/asd/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.xml.bind-api-2.3.2.jar,file:/C:/Users/asd/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/txw2-2.3.2.jar,file:/C:/Users/asd/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/istack-commons-runtime-3.0.8.jar,file:/C:/Users/asd/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/stax-ex-1.8.1.jar,file:/C:/Users/asd/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/FastInfoset-1.2.16.jar,file:/C:/Users/asd/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.activation-api-1.2.1.jar\n2020-05-31 01:04:39.354  INFO 19524 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable\n2020-05-31 01:04:39.354  INFO 19524 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'\n2020-05-31 01:04:39.785  INFO 19524 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2020-05-31 01:04:39.846  INFO 19524 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 54ms. Found 3 JPA repository interfaces.\n2020-05-31 01:04:40.214  INFO 19524 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2020-05-31 01:04:40.220  INFO 19524 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2020-05-31 01:04:40.221  INFO 19524 --- [  restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.31]\n2020-05-31 01:04:40.293  INFO 19524 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2020-05-31 01:04:40.293  INFO 19524 --- [  restartedMain] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 939 ms\n2020-05-31 01:04:40.365  INFO 19524 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2020-05-31 01:04:40.702  INFO 19524 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2020-05-31 01:04:40.731  INFO 19524 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\n2020-05-31 01:04:40.800  INFO 19524 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.4.12.Final\n2020-05-31 01:04:40.919  INFO 19524 --- [  restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\n2020-05-31 01:04:41.006  INFO 19524 --- [  restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect\n2020-05-31 01:04:41.407  INFO 19524 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\n2020-05-31 01:04:41.413  INFO 19524 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'\n2020-05-31 01:04:41.650  WARN 19524 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\n2020-05-31 01:04:41.717  INFO 19524 --- [  restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'\n2020-05-31 01:04:41.967  INFO 19524 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729\n2020-05-31 01:04:41.995  INFO 19524 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''\n2020-05-31 01:04:41.997  INFO 19524 --- [  restartedMain] c.g.Apollo.ApolloApplication             : Started ApolloApplication in 2.911 seconds (JVM running for 3.899)\n</code></pre>\n<p>My Dockerfile:</p>\n<pre><code>FROM maven:3.6.3-jdk-11-slim AS MAVEN_BUILD\n\nCOPY pom.xml /build/\nCOPY src /build/src/\nWORKDIR /build/\nRUN mvn package\n\nFROM openjdk:11-jre-alpine\n\nWORKDIR /app\nCOPY --from=MAVEN_BUILD /build/target/*.war /app/app.war\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;app.war&quot;]\n</code></pre>\n<p>My application.properties:</p>\n<pre><code>## GraphQL SPQR ##\nserver.port=8080\ngraphql.spqr.gui.enabled=true\ngraphql.spqr.http.endpoint=/graphql\ngraphql.spqr.ws.endpoint=/graphql\n\n## Database Properties ##\nspring.datasource.url=jdbc:mysql://localhost:3306/innodb\nspring.datasource.username=root\nspring.datasource.password=1234\n</code></pre>\n<p>My application works when I build and run the project in Intellij but not when I try and build my docker image. I am using MySQL and have just been connecting on localhost on port 3306.</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":6676840,"reputation":2917,"user_id":5151202,"display_name":"times29"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671022197,"creation_date":1671022197,"answer_id":74798575,"question_id":74798487,"body_markdown":"You&#39;re probably looking for the [Spring Cloud Config Server][1].  \r\nThe spring context is initialized with the values from `application.properties` to which your database config belongs as well. You would need to establish the database connection prior to constructing the whole application context and then reading properties from the database. This can probably be achieved by modifiying how Spring works, but I&#39;d rather recommend using a means officially supported by Spring.\r\n\r\n\r\n  [1]: https://spring.io/guides/gs/centralized-configuration/","title":"Transfer spring properties file to Database","body":"<p>You're probably looking for the <a href=\"https://spring.io/guides/gs/centralized-configuration/\" rel=\"nofollow noreferrer\">Spring Cloud Config Server</a>.<br />\nThe spring context is initialized with the values from <code>application.properties</code> to which your database config belongs as well. You would need to establish the database connection prior to constructing the whole application context and then reading properties from the database. This can probably be achieved by modifiying how Spring works, but I'd rather recommend using a means officially supported by Spring.</p>\n"}],"owner":{"account_id":13254073,"reputation":23,"user_id":9570749,"display_name":"Pawan Gorai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671022197,"creation_date":1671021736,"question_id":74798487,"body_markdown":"Can we read the property values from the DB instead of setting up it on `application.properties` ? or even can we update the property value from code if a default value is set up in the `application.properties` file","title":"Transfer spring properties file to Database","body":"<p>Can we read the property values from the DB instead of setting up it on <code>application.properties</code> ? or even can we update the property value from code if a default value is set up in the <code>application.properties</code> file</p>\n"},{"tags":["java","apache","cryptography"],"comments":[{"owner":{"account_id":8245409,"reputation":3834,"user_id":6201659,"display_name":"Jose Da Silva Gomes"},"score":0,"creation_date":1520811083,"post_id":49226231,"comment_id":85456169,"body_markdown":"How does it follow.","body":"How does it follow."},{"owner":{"account_id":1004381,"reputation":1682,"user_id":1018513,"accept_rate":59,"display_name":"user1018513"},"score":0,"creation_date":1520811404,"post_id":49226231,"comment_id":85456235,"body_markdown":"I don&#39;t understand your comment, sorry?","body":"I don&#39;t understand your comment, sorry?"},{"owner":{"account_id":8245409,"reputation":3834,"user_id":6201659,"display_name":"Jose Da Silva Gomes"},"score":0,"creation_date":1520811636,"post_id":49226231,"comment_id":85456291,"body_markdown":"You said you use the cipher as follow, but din&#39;t write any code. That of course until you edit","body":"You said you use the cipher as follow, but din&#39;t write any code. That of course until you edit"}],"answers":[{"tags":[],"owner":{"account_id":350479,"reputation":539,"user_id":686368,"display_name":"Gary Gregory"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671022149,"creation_date":1671022149,"answer_id":74798562,"question_id":49226231,"body_markdown":"You are likely running with OpenSSL 3 where ACT supports 1.0.x, 1.1.x, and 2.x.","title":"Apache Commons Crypto Linking Error","body":"<p>You are likely running with OpenSSL 3 where ACT supports 1.0.x, 1.1.x, and 2.x.</p>\n"}],"owner":{"account_id":1004381,"reputation":1682,"user_id":1018513,"accept_rate":59,"display_name":"user1018513"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":397,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1671022149,"creation_date":1520811004,"question_id":49226231,"body_markdown":"When using the OpenSSL backed cipher as follows:\r\n\r\n     Properties properties = new Properties();\r\n     properties.setProperty(CryptoCipherFactory.CLASSES_KEY,\r\n     CipherProvider.OPENSSL.getClassName());\r\n\r\nI get the following error:\r\n\r\n    java.security.GeneralSecurityException: CryptoCipher {org.apache.commons.crypto.cipher.OpenSslCipher} is not available or transformation AES/CTR/NoPadding is not supported\r\n\r\n:\r\n\r\n    Caused by: java.lang.UnsatisfiedLinkError: EVP_CIPHER_CTX_cleanup\r\n    \t    at org.apache.commons.crypto.cipher.OpenSslNative.initIDs(Native Method)\r\n    \t    at org.apache.commons.crypto.cipher.OpenSsl.&lt;clinit&gt;(OpenSsl.java:95)\r\n    \t    at org.apache.commons.crypto.cipher.OpenSslCipher.&lt;init&gt;(OpenSslCipher.java:57)\r\n\r\nThis is caused by a linking failure to OpenSSl, as far as I can tell. My t LD_LIBRARY_PATH is configured to pointing to /usr/local/lib which contains libssl and libcrypto. What am I missing?\r\n\r\nI run my code as\r\n\r\njava -cp nameofjar.jar my.package.name","title":"Apache Commons Crypto Linking Error","body":"<p>When using the OpenSSL backed cipher as follows:</p>\n\n<pre><code> Properties properties = new Properties();\n properties.setProperty(CryptoCipherFactory.CLASSES_KEY,\n CipherProvider.OPENSSL.getClassName());\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>java.security.GeneralSecurityException: CryptoCipher {org.apache.commons.crypto.cipher.OpenSslCipher} is not available or transformation AES/CTR/NoPadding is not supported\n</code></pre>\n\n<p>:</p>\n\n<pre><code>Caused by: java.lang.UnsatisfiedLinkError: EVP_CIPHER_CTX_cleanup\n        at org.apache.commons.crypto.cipher.OpenSslNative.initIDs(Native Method)\n        at org.apache.commons.crypto.cipher.OpenSsl.&lt;clinit&gt;(OpenSsl.java:95)\n        at org.apache.commons.crypto.cipher.OpenSslCipher.&lt;init&gt;(OpenSslCipher.java:57)\n</code></pre>\n\n<p>This is caused by a linking failure to OpenSSl, as far as I can tell. My t LD_LIBRARY_PATH is configured to pointing to /usr/local/lib which contains libssl and libcrypto. What am I missing?</p>\n\n<p>I run my code as</p>\n\n<p>java -cp nameofjar.jar my.package.name</p>\n"},{"tags":["java","gradle","build.gradle"],"answers":[{"tags":[],"owner":{"account_id":7719031,"reputation":2254,"user_id":5845802,"display_name":"PrasadU"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671021933,"creation_date":1671021933,"answer_id":74798523,"question_id":74796602,"body_markdown":"you can use the &#39;distribution&#39; plugin ; that would give most of your zip needs ; just need to add additional paths see https://docs.gradle.org/current/userguide/distribution_plugin.html#header ","title":"Gradle zip task: Specify destination path inside zip file individually","body":"<p>you can use the 'distribution' plugin ; that would give most of your zip needs ; just need to add additional paths see <a href=\"https://docs.gradle.org/current/userguide/distribution_plugin.html#header\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/distribution_plugin.html#header</a></p>\n"}],"owner":{"account_id":300924,"reputation":493,"user_id":608354,"accept_rate":44,"display_name":"bluearth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":498,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74798523,"answer_count":1,"score":0,"last_activity_date":1671021933,"creation_date":1671012725,"question_id":74796602,"body_markdown":"Here&#39;s my project file layout\r\n\r\n```\r\nROOT\r\n|-src\r\n| |- main\r\n|    |- java\r\n|    |   \\- [rest of java files]\r\n|    |- scripts\r\n|        \\- run.bat\r\n|-build\r\n|-build.gradle\r\n|-settings.gradle\r\n```\r\n\r\nWhat I&#39;m trying to do is to create a &#39;dist&#39; Gradle task that will create a zip file under ```dist``` folder with the following internal layout:\r\n\r\n```\r\nROOT\r\n|\r\n:\r\n|- dist\r\n    \\- myproject.zip\r\n        |-lib\r\n        | |-myapp.jar\r\n        \\-bin\r\n          |-run.bat\r\n```\r\n\r\n\r\n\r\nHere&#39;s my build.gradle\r\n\r\n```groovy\r\nplugins {\r\n  id &#39;java&#39;\r\n}\r\n\r\n/* other tasks */\r\n\r\ntasks.register(&#39;dist&#39;, Zip) {\r\n  dependsOn(&#39;build&#39;)\r\n  from &quot;build/libs/myapp.jar&quot;\r\n  into &quot;lib&quot;\r\n\r\n  from &quot;src/main/scripts/run.bat&quot;\r\n  into &quot;bin&quot;  // &lt;&lt;&lt;--- this wont work as it will overwrite &quot;lib&quot; as destination\r\n\r\n  archiveName &quot;myproject.zip&quot;\r\n  destinationDir(file(&#39;dist&#39;))\r\n}\r\n\r\n```\r\n\r\nMy problem is that [Zip](https://docs.gradle.org/current/dsl/org.gradle.api.tasks.bundling.Zip.html) task is only allow for one &#39;into&#39; destination. What I need is to specify the destination of each and every source individually. \r\n\r\nAm I doing this correctly?\r\n\r\n\r\n","title":"Gradle zip task: Specify destination path inside zip file individually","body":"<p>Here's my project file layout</p>\n<pre><code>ROOT\n|-src\n| |- main\n|    |- java\n|    |   \\- [rest of java files]\n|    |- scripts\n|        \\- run.bat\n|-build\n|-build.gradle\n|-settings.gradle\n</code></pre>\n<p>What I'm trying to do is to create a 'dist' Gradle task that will create a zip file under <code>dist</code> folder with the following internal layout:</p>\n<pre><code>ROOT\n|\n:\n|- dist\n    \\- myproject.zip\n        |-lib\n        | |-myapp.jar\n        \\-bin\n          |-run.bat\n</code></pre>\n<p>Here's my build.gradle</p>\n<pre><code>plugins {\n  id 'java'\n}\n\n/* other tasks */\n\ntasks.register('dist', Zip) {\n  dependsOn('build')\n  from &quot;build/libs/myapp.jar&quot;\n  into &quot;lib&quot;\n\n  from &quot;src/main/scripts/run.bat&quot;\n  into &quot;bin&quot;  // &lt;&lt;&lt;--- this wont work as it will overwrite &quot;lib&quot; as destination\n\n  archiveName &quot;myproject.zip&quot;\n  destinationDir(file('dist'))\n}\n\n</code></pre>\n<p>My problem is that <a href=\"https://docs.gradle.org/current/dsl/org.gradle.api.tasks.bundling.Zip.html\" rel=\"nofollow noreferrer\">Zip</a> task is only allow for one 'into' destination. What I need is to specify the destination of each and every source individually.</p>\n<p>Am I doing this correctly?</p>\n"},{"tags":["java","android","android-layout","android-linearlayout"],"answers":[{"tags":[],"owner":{"account_id":9081358,"reputation":53,"user_id":6761088,"display_name":"Niranjan Rai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671021609,"creation_date":1671021609,"answer_id":74798466,"question_id":74771275,"body_markdown":"What you can do is to create separate LinearLayout.LayoutParams for the edittext and add addTextChangedListener to that edit text and on onTextChanged\r\nwrite switch statement to increase the weight of the edittext on increase of length of the input number.\r\n\r\n\r\n\r\n","title":"How to change LinearLayout programmaticaly to fit numbers entered to EditText without moving other parts of layout?","body":"<p>What you can do is to create separate LinearLayout.LayoutParams for the edittext and add addTextChangedListener to that edit text and on onTextChanged\nwrite switch statement to increase the weight of the edittext on increase of length of the input number.</p>\n"}],"owner":{"account_id":23732435,"reputation":107,"user_id":17751489,"display_name":"Cuyer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671021609,"creation_date":1670848997,"question_id":74771275,"body_markdown":"Im trying to create LinearLayout programmaticaly and I would want to allow user to put number range.\r\nNow it looks like that:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nBut when I try to enter more digits eg. 100, 101 or 3,50 it dissapears. \r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nI guess there is not enough space for it to be shown, but I can&#39;t figure out what is wrong. Generally I don&#39;t want to move + and - buttons when the user enters some values so I guess it should be hardcoded. There would be up to 5-6 digits only, so I need space just for it, but as I said, I can&#39;t find the place, where I can change it as my changes eiter move entire layout or doesn&#39;t do anything.\r\n\r\nBelow is my code:\r\n\r\n```\r\nLinearLayout horizontalLayout = new LinearLayout(mContext);\r\n\t\t\tLinearLayout titleLayout = new LinearLayout(mContext);\r\n\t\t\tLinearLayout countLayout = new LinearLayout(mContext);\r\n\t\t\tImageButton buttonAdd = new ImageButton(mContext);\r\n\t\t\tImageButton buttonSub = new ImageButton(mContext);\r\n\t\t\tTextView titleTextView = new TextView(mContext);\r\n\t\t\tEditText countEditText = new EditText(mContext);\r\n\r\n\t\t\tfinal int[] currentCount = {defaultValue};\r\n\r\n\t\t\tLinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);\r\n\t\t\tLinearLayout.LayoutParams linearLayout = new LinearLayout.LayoutParams(0, LayoutParams.MATCH_PARENT, 1f);\r\n\t\t\tLinearLayout.LayoutParams utilParams = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);\r\n\r\n\t\t\thorizontalLayout.setOrientation(LinearLayout.HORIZONTAL);\r\n\t\t\thorizontalLayout.setLayoutParams(params);\r\n\r\n\t\t\tutilParams.gravity = Gravity.CENTER_VERTICAL;\r\n\t\t\ttitleLayout.setOrientation(LinearLayout.HORIZONTAL);\r\n\t\t\ttitleLayout.setPadding(0, pxFromDp(mContext, 16),0, pxFromDp(mContext, 16));\r\n\t\t\ttitleLayout.setLayoutParams(linearLayout);\r\n\r\n\t\t\tcountLayout.setOrientation(LinearLayout.HORIZONTAL);\r\n\t\t\tcountLayout.setPadding(0, pxFromDp(mContext, 16),0, pxFromDp(mContext, 16));\r\n\t\t\tcountLayout.setLayoutParams(linearLayout);\r\n\r\n\t\t\tutilParams.setMargins(0,0,pxFromDp(mContext, 16f),0);\r\n\t\t\ttitleTextView.setTextSize(TypedValue.COMPLEX_UNIT_SP,16);\r\n\t\t\ttitleTextView.setText(title);\r\n\t\t\ttitleTextView.setLayoutParams(utilParams);\r\n\t\t\ttitleLayout.addView(titleTextView);\r\n\r\n\t\t\tutilParams.setMargins(pxFromDp(mContext, 16f),0,pxFromDp(mContext, 16f),0);\r\n\t\t\tbuttonSub.setImageResource(R.drawable.ic_remove);\r\n\t\t\tbuttonSub.setLayoutParams(utilParams);\r\n\t\t\tbuttonSub.setBackgroundColor(mContext.getResources().getColor(R.color.fsm_survey_btn));\r\n\t\t\tbuttonSub.setColorFilter(ContextCompat.getColor(mContext, R.color.fsm_white), android.graphics.PorterDuff.Mode.SRC_IN);\r\n\t\t\tcountLayout.addView(buttonSub);\r\n\r\n\t\t\tcountEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, 16);\r\n\t\t\tcountEditText.setText(String.valueOf(defaultValue));\r\n\t\t\tcountEditText.setLayoutParams(linearLayout);\r\n\t\t\tcountEditText.setGravity(Gravity.CENTER);\r\n\t\t\tcountLayout.addView(countEditText);\r\n\r\n\t\t\tbuttonAdd.setImageResource(R.drawable.ic_add_24);\r\n\t\t\tbuttonAdd.setLayoutParams(utilParams);\r\n\t\t\tbuttonAdd.setBackgroundColor(mContext.getResources().getColor(R.color.fsm_survey_btn));\r\n\t\t\tbuttonAdd.setColorFilter(ContextCompat.getColor(mContext, R.color.fsm_white), android.graphics.PorterDuff.Mode.SRC_IN);\r\n\t\t\tcountLayout.addView(buttonAdd);\r\n\r\n\t\t\thorizontalLayout.addView(titleLayout);\r\n\t\t\thorizontalLayout.addView(countLayout);\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vKgpJ.png\r\n  [2]: https://i.stack.imgur.com/4zS47.png","title":"How to change LinearLayout programmaticaly to fit numbers entered to EditText without moving other parts of layout?","body":"<p>Im trying to create LinearLayout programmaticaly and I would want to allow user to put number range.\nNow it looks like that:</p>\n<p><a href=\"https://i.stack.imgur.com/vKgpJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vKgpJ.png\" alt=\"enter image description here\" /></a></p>\n<p>But when I try to enter more digits eg. 100, 101 or 3,50 it dissapears.</p>\n<p><a href=\"https://i.stack.imgur.com/4zS47.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4zS47.png\" alt=\"enter image description here\" /></a></p>\n<p>I guess there is not enough space for it to be shown, but I can't figure out what is wrong. Generally I don't want to move + and - buttons when the user enters some values so I guess it should be hardcoded. There would be up to 5-6 digits only, so I need space just for it, but as I said, I can't find the place, where I can change it as my changes eiter move entire layout or doesn't do anything.</p>\n<p>Below is my code:</p>\n<pre><code>LinearLayout horizontalLayout = new LinearLayout(mContext);\n            LinearLayout titleLayout = new LinearLayout(mContext);\n            LinearLayout countLayout = new LinearLayout(mContext);\n            ImageButton buttonAdd = new ImageButton(mContext);\n            ImageButton buttonSub = new ImageButton(mContext);\n            TextView titleTextView = new TextView(mContext);\n            EditText countEditText = new EditText(mContext);\n\n            final int[] currentCount = {defaultValue};\n\n            LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);\n            LinearLayout.LayoutParams linearLayout = new LinearLayout.LayoutParams(0, LayoutParams.MATCH_PARENT, 1f);\n            LinearLayout.LayoutParams utilParams = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);\n\n            horizontalLayout.setOrientation(LinearLayout.HORIZONTAL);\n            horizontalLayout.setLayoutParams(params);\n\n            utilParams.gravity = Gravity.CENTER_VERTICAL;\n            titleLayout.setOrientation(LinearLayout.HORIZONTAL);\n            titleLayout.setPadding(0, pxFromDp(mContext, 16),0, pxFromDp(mContext, 16));\n            titleLayout.setLayoutParams(linearLayout);\n\n            countLayout.setOrientation(LinearLayout.HORIZONTAL);\n            countLayout.setPadding(0, pxFromDp(mContext, 16),0, pxFromDp(mContext, 16));\n            countLayout.setLayoutParams(linearLayout);\n\n            utilParams.setMargins(0,0,pxFromDp(mContext, 16f),0);\n            titleTextView.setTextSize(TypedValue.COMPLEX_UNIT_SP,16);\n            titleTextView.setText(title);\n            titleTextView.setLayoutParams(utilParams);\n            titleLayout.addView(titleTextView);\n\n            utilParams.setMargins(pxFromDp(mContext, 16f),0,pxFromDp(mContext, 16f),0);\n            buttonSub.setImageResource(R.drawable.ic_remove);\n            buttonSub.setLayoutParams(utilParams);\n            buttonSub.setBackgroundColor(mContext.getResources().getColor(R.color.fsm_survey_btn));\n            buttonSub.setColorFilter(ContextCompat.getColor(mContext, R.color.fsm_white), android.graphics.PorterDuff.Mode.SRC_IN);\n            countLayout.addView(buttonSub);\n\n            countEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, 16);\n            countEditText.setText(String.valueOf(defaultValue));\n            countEditText.setLayoutParams(linearLayout);\n            countEditText.setGravity(Gravity.CENTER);\n            countLayout.addView(countEditText);\n\n            buttonAdd.setImageResource(R.drawable.ic_add_24);\n            buttonAdd.setLayoutParams(utilParams);\n            buttonAdd.setBackgroundColor(mContext.getResources().getColor(R.color.fsm_survey_btn));\n            buttonAdd.setColorFilter(ContextCompat.getColor(mContext, R.color.fsm_white), android.graphics.PorterDuff.Mode.SRC_IN);\n            countLayout.addView(buttonAdd);\n\n            horizontalLayout.addView(titleLayout);\n            horizontalLayout.addView(countLayout);\n</code></pre>\n"},{"tags":["java","spring-boot","unit-testing","junit","mockito"],"comments":[{"owner":{"account_id":8347952,"reputation":5186,"user_id":6271180,"display_name":"Benoit"},"score":0,"creation_date":1671011688,"post_id":74796278,"comment_id":132003024,"body_markdown":"The `userId` attribute has value 0 in the actual call, and 1 in the stub.","body":"The <code>userId</code> attribute has value 0 in the actual call, and 1 in the stub."}],"answers":[{"tags":[],"owner":{"account_id":6676840,"reputation":2917,"user_id":5151202,"display_name":"times29"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671013605,"creation_date":1671013605,"answer_id":74796795,"question_id":74796278,"body_markdown":"I guess that your `User` class has an `equals`/`hashCode` defined either on the `userID` field or on all fields. When you mock your repository in your `setUp` method, you define what the method should do when it is called with the *exact* object that you specified, comparing the given object to the object specified in the mock by calling the `equals`/`hashCode` method. \r\n\r\nYou define the `User` object in your `setUp` method to have the `userID` `1` but in your `UserServiceImpl` the `userID` is not ever set (as it is generated by the persistence layer). Therefore the `equals`/`hashCode` check to determine if Mockito should execute the stub logic will never be called because the object passed by the `UserServiceImpl` will never be equals to the one that you defined in your mock.\r\n\r\nThere are several ways how you can solve this.\r\n\r\n### 1) Integration test\r\nMy advice would be to convert your Unit-Test to a `@SpringBootTest`. There is no value in testing mocked behaviour. If this test was an integration test, you would test that the repository inserts the `User` into the database and generates an ID with your assertion.\r\n\r\n### 2) Unit test\r\nIf you want to mock the repository, you should use an `any()` matcher for the input argument and then do what the repository would do, namely set the id: \r\n```java\r\n  when(repository.save(any(User.class))).thenAnswer(invocation -&gt; {\r\n            final User entity = invocation.getArgument(0);\r\n            ReflectionTestUtils.setField(entity, &quot;userID&quot;, RandomUtils.nextLong());\r\n            return entity;\r\n        });\r\n```\r\n\r\nI would then assert, that the `userID` is not null, as the `userID` will be randomly generated as it would in production:  \r\n```java\r\n@ExtendWith(MockitoExtension.class)\r\npublic class UserServiceTest {\r\n\r\n    @Mock\r\n    private UserRepository repository;\r\n\r\n    @InjectMocks\r\n    private UserServiceImpl userServiceImpl;\r\n\r\n    @Test\r\n    void saveUser_userHasID(){\r\n        // Arrange\r\n        final UserModel inputUserModel = new UserModel();\r\n        inputUserModel.setEmail(&quot;testemail@gmail.com&quot;);\r\n        inputUserModel.setFirstName(&quot;john&quot;);\r\n        inputUserModel.setLastName(&quot;doe&quot;);\r\n        inputUserModel.setPassword(&quot;test&quot;);\r\n        inputUserModel.setMatchPassword(&quot;test&quot;);\r\n\r\n        when(repository.save(any(User.class))).thenAnswer(invocation -&gt; {\r\n            final User entity = invocation.getArgument(0);\r\n            ReflectionTestUtils.setField(entity, &quot;userID&quot;, RandomUtils.nextLong());\r\n            return entity;\r\n        });\r\n\r\n        // Act\r\n        final User user = userServiceImpl.saveUser(inputUserModel);\r\n\r\n        // Assert\r\n        assertThat(user.getUserID()).isNotNull();\r\n    }\r\n}\r\n\r\n```\r\n\r\n**I highly recommend to use AssertJ for your assertions as it offers fluent asssertions and way more assertion methods than JUnit.**\r\n","title":"Mockito mock returning Null value from repository","body":"<p>I guess that your <code>User</code> class has an <code>equals</code>/<code>hashCode</code> defined either on the <code>userID</code> field or on all fields. When you mock your repository in your <code>setUp</code> method, you define what the method should do when it is called with the <em>exact</em> object that you specified, comparing the given object to the object specified in the mock by calling the <code>equals</code>/<code>hashCode</code> method.</p>\n<p>You define the <code>User</code> object in your <code>setUp</code> method to have the <code>userID</code> <code>1</code> but in your <code>UserServiceImpl</code> the <code>userID</code> is not ever set (as it is generated by the persistence layer). Therefore the <code>equals</code>/<code>hashCode</code> check to determine if Mockito should execute the stub logic will never be called because the object passed by the <code>UserServiceImpl</code> will never be equals to the one that you defined in your mock.</p>\n<p>There are several ways how you can solve this.</p>\n<h3>1) Integration test</h3>\n<p>My advice would be to convert your Unit-Test to a <code>@SpringBootTest</code>. There is no value in testing mocked behaviour. If this test was an integration test, you would test that the repository inserts the <code>User</code> into the database and generates an ID with your assertion.</p>\n<h3>2) Unit test</h3>\n<p>If you want to mock the repository, you should use an <code>any()</code> matcher for the input argument and then do what the repository would do, namely set the id:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  when(repository.save(any(User.class))).thenAnswer(invocation -&gt; {\n            final User entity = invocation.getArgument(0);\n            ReflectionTestUtils.setField(entity, &quot;userID&quot;, RandomUtils.nextLong());\n            return entity;\n        });\n</code></pre>\n<p>I would then assert, that the <code>userID</code> is not null, as the <code>userID</code> will be randomly generated as it would in production:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(MockitoExtension.class)\npublic class UserServiceTest {\n\n    @Mock\n    private UserRepository repository;\n\n    @InjectMocks\n    private UserServiceImpl userServiceImpl;\n\n    @Test\n    void saveUser_userHasID(){\n        // Arrange\n        final UserModel inputUserModel = new UserModel();\n        inputUserModel.setEmail(&quot;testemail@gmail.com&quot;);\n        inputUserModel.setFirstName(&quot;john&quot;);\n        inputUserModel.setLastName(&quot;doe&quot;);\n        inputUserModel.setPassword(&quot;test&quot;);\n        inputUserModel.setMatchPassword(&quot;test&quot;);\n\n        when(repository.save(any(User.class))).thenAnswer(invocation -&gt; {\n            final User entity = invocation.getArgument(0);\n            ReflectionTestUtils.setField(entity, &quot;userID&quot;, RandomUtils.nextLong());\n            return entity;\n        });\n\n        // Act\n        final User user = userServiceImpl.saveUser(inputUserModel);\n\n        // Assert\n        assertThat(user.getUserID()).isNotNull();\n    }\n}\n\n</code></pre>\n<p><strong>I highly recommend to use AssertJ for your assertions as it offers fluent asssertions and way more assertion methods than JUnit.</strong></p>\n"},{"tags":[],"owner":{"account_id":3591100,"reputation":930,"user_id":2997147,"accept_rate":52,"display_name":"FrankelStein"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671021410,"creation_date":1671021410,"answer_id":74798426,"question_id":74796278,"body_markdown":"tl;dr\r\n-----\r\nSpring data can&#39;t generate a userID through a simple unit test with a mock, you will need a spring context running in an Integration test.\r\n\r\nDetails\r\n-------\r\n\r\nThere are two fields leading to the error you are having : `UserID` and `timeCreated`.\r\n\r\n - For the `timeCreated` field : in your test you create a `inputUser`\r\n   object that you use for your mock. the problem is that this object\r\n   `inputUser` is NOT the one used by your method under test\r\n   `saveUser(UserModel userModel)` you could clearly see the that the\r\n   timestamp differs in the erreor between the two objects.\r\n - For the `UserID` field : again you give your expect your mock to use\r\n   the `inputUser ` object. this object has userID = 1. but in the real\r\n   method `saveUser(UserModel userModel)` this field is not set\r\n   explicitly so the default value will be set to `0` you could see that\r\n   also in the error.\r\n\r\nNow since your test case `whenSaveUser_ThenUserHasID` is meant to verify that a saved record has an ID, you can&#39;t do it with a mock. The ID is generated by the Spring Data you are using and yo make it run, you should use and Integration test to run your spring context in your test in order for your spring data to be able to generate an ID  for your user, [here is a previous question][1] that will be helpful for you to do so. With this, you will neither need the `inputUser` in your test nor the mock. (You can use `@DataJpaTest` from JUnit 5 or `@SpringBootTest`...)\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/23435937/how-to-test-spring-data-repositories","title":"Mockito mock returning Null value from repository","body":"<h2>tl;dr</h2>\n<p>Spring data can't generate a userID through a simple unit test with a mock, you will need a spring context running in an Integration test.</p>\n<h2>Details</h2>\n<p>There are two fields leading to the error you are having : <code>UserID</code> and <code>timeCreated</code>.</p>\n<ul>\n<li>For the <code>timeCreated</code> field : in your test you create a <code>inputUser</code>\nobject that you use for your mock. the problem is that this object\n<code>inputUser</code> is NOT the one used by your method under test\n<code>saveUser(UserModel userModel)</code> you could clearly see the that the\ntimestamp differs in the erreor between the two objects.</li>\n<li>For the <code>UserID</code> field : again you give your expect your mock to use\nthe <code>inputUser </code> object. this object has userID = 1. but in the real\nmethod <code>saveUser(UserModel userModel)</code> this field is not set\nexplicitly so the default value will be set to <code>0</code> you could see that\nalso in the error.</li>\n</ul>\n<p>Now since your test case <code>whenSaveUser_ThenUserHasID</code> is meant to verify that a saved record has an ID, you can't do it with a mock. The ID is generated by the Spring Data you are using and yo make it run, you should use and Integration test to run your spring context in your test in order for your spring data to be able to generate an ID  for your user, <a href=\"https://stackoverflow.com/questions/23435937/how-to-test-spring-data-repositories\">here is a previous question</a> that will be helpful for you to do so. With this, you will neither need the <code>inputUser</code> in your test nor the mock. (You can use <code>@DataJpaTest</code> from JUnit 5 or <code>@SpringBootTest</code>...)</p>\n"}],"owner":{"account_id":22114825,"reputation":93,"user_id":16369112,"display_name":"Jschwery"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1812,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74796795,"answer_count":2,"score":0,"last_activity_date":1671021410,"creation_date":1671011192,"question_id":74796278,"body_markdown":"I&#39;m trying to test my service implementation with ``JUNIT5``. I don&#39;t quite understand whats going wrong but my ``UserRepository`` doesn&#39;t seem to be returning a value.\r\n\r\nI have tested to see if the UserRepository has been used with:\r\n``verify(repository, times(1));`` And the response was &quot;Wanted but not invoked...Actually, there were zero interactions with this mock&quot;\r\n\r\n\r\n**Here is the Test Class:**\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\npublic class UserServiceTest {\r\n\r\n    @Mock\r\n    UserRepository repository;\r\n    @InjectMocks\r\n    UserServiceImpl userServiceImpl;\r\n\r\n    UserModel inputUserModel;\r\n\r\n    @BeforeEach\r\n    public void setUp() throws Exception {\r\n        inputUserModel = new UserModel();\r\n        inputUserModel.setEmail(&quot;testemail@gmail.com&quot;);\r\n        inputUserModel.setFirstName(&quot;john&quot;);\r\n        inputUserModel.setLastName(&quot;doe&quot;);\r\n        inputUserModel.setPassword(&quot;test&quot;);\r\n        inputUserModel.setMatchPassword(&quot;test&quot;);\r\n\r\n        User inputUser = User.builder()\r\n                .email(inputUserModel.getEmail())\r\n                .firstName(inputUserModel.getFirstName())\r\n                .lastName(inputUserModel.getLastName())\r\n                .password(inputUserModel.getPassword())\r\n                .timeCreated(Timestamp.valueOf(LocalDateTime.now(ZoneId.systemDefault()))).userID(1)\r\n                .build();\r\n\r\n        User outputUser = User.builder().\r\n                email(inputUserModel.getFirstName()).\r\n                password(inputUserModel.getLastName()).\r\n                lastName(inputUserModel.getFirstName())\r\n                .firstName(inputUserModel.getFirstName())\r\n\r\n                .timeCreated(Timestamp.valueOf(LocalDateTime.now(ZoneId.systemDefault()))).userID(1).build();\r\n\r\n        Mockito.when(repository.save(inputUser)).thenReturn(outputUser);\r\n\r\n    }\r\n\r\n    @Test\r\n    public void whenSaveUser_ThenUserHasID(){\r\n\r\n        Assertions.assertEquals(1, userServiceImpl.saveUser(inputUserModel).getUserID());\r\n    }\r\n}\r\n```\r\n**The error that I am getting:**\r\n\r\n```\r\norg.mockito.exceptions.misusing.PotentialStubbingProblem: \r\nStrict stubbing argument mismatch. Please check:\r\n - this invocation of &#39;save&#39; method:\r\n    repository.save(\r\n    User(userID=0, email=testemail@gmail.com, timeCreated=2022-12-14 03:18:24.0435578, password=test, firstName=john, lastName=doe)\r\n);\r\n    -&gt; at com.jschwery.securitydemo.service.Implementations.UserServiceImpl.saveUser(UserServiceImpl.java:37)\r\n - has following stubbing(s) with different arguments:\r\n    1. repository.save(\r\n    User(userID=1, email=testemail@gmail.com, timeCreated=2022-12-14 03:18:24.0235563, password=test, firstName=john, lastName=doe)\r\n);\r\n```\r\n\r\n**My Service Class that I&#39;m creating the test for:**\r\n\r\n```@Service\r\npublic class UserServiceImpl implements UserService {\r\n\r\n    UserRepository  userRepository;\r\n\r\n    @Autowired\r\n    public UserServiceImpl(UserRepository repository){\r\n        this.userRepository = repository;\r\n    }\r\n\r\n    @Override\r\n    public User saveUser(UserModel userModel) {\r\n        if(!Objects.equals(userModel.getPassword(), userModel.getMatchPassword())){\r\n            throw new UserException(&quot;Passwords do not match&quot;);\r\n        }\r\n        User user = User.builder().\r\n                email(userModel.getEmail()).\r\n                firstName(userModel.getFirstName()).\r\n                lastName(userModel.getLastName()).\r\n                password(userModel.getPassword()).\r\n                timeCreated(Timestamp.valueOf(LocalDateTime.now(ZoneId.systemDefault()))).build();\r\n        User returnedUser = userRepository.save(user);\r\n        System.out.println(returnedUser.getEmail());\r\n        System.out.println(&quot;userID&quot; + returnedUser.getUserID());\r\n        return returnedUser;\r\n    }\r\n}\r\n```\r\nThanks for reading! :)","title":"Mockito mock returning Null value from repository","body":"<p>I'm trying to test my service implementation with <code>JUNIT5</code>. I don't quite understand whats going wrong but my <code>UserRepository</code> doesn't seem to be returning a value.</p>\n<p>I have tested to see if the UserRepository has been used with:\n<code>verify(repository, times(1));</code> And the response was &quot;Wanted but not invoked...Actually, there were zero interactions with this mock&quot;</p>\n<p><strong>Here is the Test Class:</strong></p>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class UserServiceTest {\n\n    @Mock\n    UserRepository repository;\n    @InjectMocks\n    UserServiceImpl userServiceImpl;\n\n    UserModel inputUserModel;\n\n    @BeforeEach\n    public void setUp() throws Exception {\n        inputUserModel = new UserModel();\n        inputUserModel.setEmail(&quot;testemail@gmail.com&quot;);\n        inputUserModel.setFirstName(&quot;john&quot;);\n        inputUserModel.setLastName(&quot;doe&quot;);\n        inputUserModel.setPassword(&quot;test&quot;);\n        inputUserModel.setMatchPassword(&quot;test&quot;);\n\n        User inputUser = User.builder()\n                .email(inputUserModel.getEmail())\n                .firstName(inputUserModel.getFirstName())\n                .lastName(inputUserModel.getLastName())\n                .password(inputUserModel.getPassword())\n                .timeCreated(Timestamp.valueOf(LocalDateTime.now(ZoneId.systemDefault()))).userID(1)\n                .build();\n\n        User outputUser = User.builder().\n                email(inputUserModel.getFirstName()).\n                password(inputUserModel.getLastName()).\n                lastName(inputUserModel.getFirstName())\n                .firstName(inputUserModel.getFirstName())\n\n                .timeCreated(Timestamp.valueOf(LocalDateTime.now(ZoneId.systemDefault()))).userID(1).build();\n\n        Mockito.when(repository.save(inputUser)).thenReturn(outputUser);\n\n    }\n\n    @Test\n    public void whenSaveUser_ThenUserHasID(){\n\n        Assertions.assertEquals(1, userServiceImpl.saveUser(inputUserModel).getUserID());\n    }\n}\n</code></pre>\n<p><strong>The error that I am getting:</strong></p>\n<pre><code>org.mockito.exceptions.misusing.PotentialStubbingProblem: \nStrict stubbing argument mismatch. Please check:\n - this invocation of 'save' method:\n    repository.save(\n    User(userID=0, email=testemail@gmail.com, timeCreated=2022-12-14 03:18:24.0435578, password=test, firstName=john, lastName=doe)\n);\n    -&gt; at com.jschwery.securitydemo.service.Implementations.UserServiceImpl.saveUser(UserServiceImpl.java:37)\n - has following stubbing(s) with different arguments:\n    1. repository.save(\n    User(userID=1, email=testemail@gmail.com, timeCreated=2022-12-14 03:18:24.0235563, password=test, firstName=john, lastName=doe)\n);\n</code></pre>\n<p><strong>My Service Class that I'm creating the test for:</strong></p>\n<pre><code>public class UserServiceImpl implements UserService {\n\n    UserRepository  userRepository;\n\n    @Autowired\n    public UserServiceImpl(UserRepository repository){\n        this.userRepository = repository;\n    }\n\n    @Override\n    public User saveUser(UserModel userModel) {\n        if(!Objects.equals(userModel.getPassword(), userModel.getMatchPassword())){\n            throw new UserException(&quot;Passwords do not match&quot;);\n        }\n        User user = User.builder().\n                email(userModel.getEmail()).\n                firstName(userModel.getFirstName()).\n                lastName(userModel.getLastName()).\n                password(userModel.getPassword()).\n                timeCreated(Timestamp.valueOf(LocalDateTime.now(ZoneId.systemDefault()))).build();\n        User returnedUser = userRepository.save(user);\n        System.out.println(returnedUser.getEmail());\n        System.out.println(&quot;userID&quot; + returnedUser.getUserID());\n        return returnedUser;\n    }\n}\n</code></pre>\n<p>Thanks for reading! :)</p>\n"},{"tags":["java","spring","mongodb","spring-boot"],"owner":{"account_id":27250748,"reputation":11,"user_id":20775254,"display_name":"confused_nerd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671021381,"creation_date":1671021254,"question_id":74798387,"body_markdown":"I am trying to recieve data from the front end and then passing it to my @Query annotation, if the value is null , it would skip it , else it would look for it inside the Mongo database.\r\n\r\n\r\n\r\n\r\nSo far I have tried this `@Query`\r\n\r\n```\r\n @Query(&quot;{$and: [{&quot;\r\n    \t\t+ &quot;            $or: [{&quot;\r\n    \t\t+ &quot;                $where: &#39;?0 == null&#39;&quot;\r\n    \t\t+ &quot;            }, {&quot;\r\n    \t\t+ &quot;                name: &#39;?0&#39;&quot;\r\n    \t\t+ &quot;            }]&quot;\r\n    \t\t+ &quot;        }, {&quot;\r\n    \t\t+ &quot;            $or: [{&quot;\r\n    \t\t+ &quot;                $where: &#39;?1 == null&#39;&quot;\r\n    \t\t+ &quot;            }, {&quot;\r\n    \t\t+ &quot;                batch: &#39;?1&#39;&quot;\r\n    \t\t+ &quot;            }]&quot;\r\n    \t\t+ &quot;        }, {&quot;\r\n    \t\t+ &quot;            $or: [{&quot;\r\n    \t\t+ &quot;                $where: &#39;?2 == null&#39;&quot;\r\n `   \t\t+ &quot;            }, {&quot;\r\n    \t\t+ &quot;                city: &#39;?2&#39;&quot;\r\n    \t\t+ &quot;            }]&quot;\r\n    \t\t+ &quot;        }]}&quot;)\r\n```\r\n\r\n\r\nNow for the above query i am getting the following syntax issue\r\n\r\n`SyntaxError: identifier starts immediately after numeric literal on server`\r\n\r\nNow i know the issue is how i am writing the `$where` part, but I am not really able to understand it.\r\n\r\nThanks.\r\n\r\n```\r\n","title":"Having syntax issue for Spring Mongo @Query while trying to validate null values coming from the front end","body":"<p>I am trying to recieve data from the front end and then passing it to my @Query annotation, if the value is null , it would skip it , else it would look for it inside the Mongo database.</p>\n<p>So far I have tried this <code>@Query</code></p>\n<pre><code> @Query(&quot;{$and: [{&quot;\n            + &quot;            $or: [{&quot;\n            + &quot;                $where: '?0 == null'&quot;\n            + &quot;            }, {&quot;\n            + &quot;                name: '?0'&quot;\n            + &quot;            }]&quot;\n            + &quot;        }, {&quot;\n            + &quot;            $or: [{&quot;\n            + &quot;                $where: '?1 == null'&quot;\n            + &quot;            }, {&quot;\n            + &quot;                batch: '?1'&quot;\n            + &quot;            }]&quot;\n            + &quot;        }, {&quot;\n            + &quot;            $or: [{&quot;\n            + &quot;                $where: '?2 == null'&quot;\n `          + &quot;            }, {&quot;\n            + &quot;                city: '?2'&quot;\n            + &quot;            }]&quot;\n            + &quot;        }]}&quot;)\n</code></pre>\n<p>Now for the above query i am getting the following syntax issue</p>\n<p><code>SyntaxError: identifier starts immediately after numeric literal on server</code></p>\n<p>Now i know the issue is how i am writing the <code>$where</code> part, but I am not really able to understand it.</p>\n<p>Thanks.</p>\n<pre><code></code></pre>\n"},{"tags":["java","android","firebase","google-cloud-platform","firebase-realtime-database"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1670851414,"post_id":74771781,"comment_id":131961775,"body_markdown":"what value does the String have? On what line are you trying to convert it?","body":"what value does the String have? On what line are you trying to convert it?"},{"owner":{"account_id":27220273,"reputation":23,"user_id":20749673,"display_name":"Anshul Lanjewar"},"score":0,"creation_date":1670851613,"post_id":74771781,"comment_id":131961851,"body_markdown":"User user = dataSnapshot.getValue(User.class); In this line as error on line 60 (at com.example.guided_app.fragment.exploreFragment$1.onDataChange(exploreFragment.java:60))","body":"User user = dataSnapshot.getValue(User.class); In this line as error on line 60 (at com.example.guided_app.fragment.exploreFragment$1.onDataChan&zwnj;&#8203;ge(exploreFragment.j&zwnj;&#8203;ava:60))"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1670851648,"post_id":74771781,"comment_id":131961864,"body_markdown":"so, check that line of code. It&#39;s not like we know what line that is","body":"so, check that line of code. It&#39;s not like we know what line that is"},{"owner":{"account_id":27220273,"reputation":23,"user_id":20749673,"display_name":"Anshul Lanjewar"},"score":0,"creation_date":1670851815,"post_id":74771781,"comment_id":131961905,"body_markdown":"Error for getValue","body":"Error for getValue"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":1,"creation_date":1670854754,"post_id":74771781,"comment_id":131962996,"body_markdown":"Please edit your question and add your database structure as a JSON file. You can simply get it by clicking the Export JSON in the overflow menu (⠇) in your [Firebase Console](https://console.firebase.google.com/u/0/project/_/database/data). Please respond using @AlexMamo","body":"Please edit your question and add your database structure as a JSON file. You can simply get it by clicking the Export JSON in the overflow menu (⠇) in your <a href=\"https://console.firebase.google.com/u/0/project/_/database/data\" rel=\"nofollow noreferrer\">Firebase Console</a>. Please respond using @AlexMamo"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1670860123,"post_id":74771781,"comment_id":131965158,"body_markdown":"Are you sure all users have a `guidedCount` field of type int and not String?","body":"Are you sure all users have a <code>guidedCount</code> field of type int and not String?"},{"owner":{"account_id":27220273,"reputation":23,"user_id":20749673,"display_name":"Anshul Lanjewar"},"score":0,"creation_date":1670861441,"post_id":74771781,"comment_id":131965658,"body_markdown":"@AlexMamo yes for all users","body":"@AlexMamo yes for all users"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1670915472,"post_id":74771781,"comment_id":131977363,"body_markdown":"How many users exist under `Users` node?","body":"How many users exist under <code>Users</code> node?"},{"owner":{"account_id":27220273,"reputation":23,"user_id":20749673,"display_name":"Anshul Lanjewar"},"score":0,"creation_date":1671010822,"post_id":74771781,"comment_id":132002780,"body_markdown":"@AlexMamo 6 users. All have the same datatype as above user.","body":"@AlexMamo 6 users. All have the same datatype as above user."},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1671011163,"post_id":74771781,"comment_id":132002885,"body_markdown":"Is it possible that this `DatabaseException` can be thrown from other parts of your code?","body":"Is it possible that this <code>DatabaseException</code> can be thrown from other parts of your code?"},{"owner":{"account_id":27220273,"reputation":23,"user_id":20749673,"display_name":"Anshul Lanjewar"},"score":0,"creation_date":1671011527,"post_id":74771781,"comment_id":132002976,"body_markdown":"@AlexMamo User adapter has an intent to another activity (named VActivity), is it possible that it can have error? (Vactivity is for visit activity, its use is when user go to explore and want to view profile)","body":"@AlexMamo User adapter has an intent to another activity (named VActivity), is it possible that it can have error? (Vactivity is for visit activity, its use is when user go to explore and want to view profile)"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1671012003,"post_id":74771781,"comment_id":132003119,"body_markdown":"You have to check that yourself.","body":"You have to check that yourself."},{"owner":{"account_id":27220273,"reputation":23,"user_id":20749673,"display_name":"Anshul Lanjewar"},"score":0,"creation_date":1671012688,"post_id":74771781,"comment_id":132003332,"body_markdown":"@AlexMamo Well i checked for that but its showing error in this line  User user = dataSnapshot.getValue(User.class);  App crashes when i go to this explore fragment","body":"@AlexMamo Well i checked for that but its showing error in this line  User user = dataSnapshot.getValue(User.class);  App crashes when i go to this explore fragment"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1671014715,"post_id":74771781,"comment_id":132003989,"body_markdown":"Can you show us a screenshot will all of those 6 users?","body":"Can you show us a screenshot will all of those 6 users?"},{"owner":{"account_id":27220273,"reputation":23,"user_id":20749673,"display_name":"Anshul Lanjewar"},"score":0,"creation_date":1671017490,"post_id":74771781,"comment_id":132004966,"body_markdown":"@AlexMamo Updated database of users please check","body":"@AlexMamo Updated database of users please check"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1671019969,"post_id":74771781,"comment_id":132005837,"body_markdown":"I git it. I&#39;ll provide an answer right away.","body":"I git it. I&#39;ll provide an answer right away."}],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671020181,"creation_date":1671020181,"answer_id":74798150,"question_id":74771781,"body_markdown":"As expected, the following error:\r\n\r\n&gt; com.google.firebase.database.DatabaseException: Failed to convert a value of type java.lang.String to int\r\n\r\nArrives due to the fact that an int-type field holds a value of type String. So when deserializing, the `guidedCount` field is expected to hold a value of type int and not String, hence the error. The node that is responsible for the Exception is: \r\n\r\n    &quot;guidedCount&quot;: &quot;gAzcrP1IYmQI0ht4qfH9WGt9U7F2&quot;,\r\n\r\nSee, it holds a UID rather than a number. So to solve this, change that UID with a number.\r\n","title":"Failed to convert a value of type java.lang.String to int (in explore_fragment)","body":"<p>As expected, the following error:</p>\n<blockquote>\n<p>com.google.firebase.database.DatabaseException: Failed to convert a value of type java.lang.String to int</p>\n</blockquote>\n<p>Arrives due to the fact that an int-type field holds a value of type String. So when deserializing, the <code>guidedCount</code> field is expected to hold a value of type int and not String, hence the error. The node that is responsible for the Exception is:</p>\n<pre><code>&quot;guidedCount&quot;: &quot;gAzcrP1IYmQI0ht4qfH9WGt9U7F2&quot;,\n</code></pre>\n<p>See, it holds a UID rather than a number. So to solve this, change that UID with a number.</p>\n"}],"owner":{"account_id":27220273,"reputation":23,"user_id":20749673,"display_name":"Anshul Lanjewar"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74798150,"answer_count":1,"score":0,"last_activity_date":1671020254,"creation_date":1670851364,"question_id":74771781,"body_markdown":"Showing error on getValue(User.class) in explore_fragment.\r\nMy explore_fragment is:\r\n\r\n```\r\npublic class exploreFragment extends Fragment {\r\n    FragmentExploreBinding binding;\r\n    ArrayList&lt;User&gt; list = new ArrayList&lt;&gt;();\r\n    FirebaseAuth auth;\r\n    FirebaseDatabase database;\r\n\r\n    public exploreFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        auth = FirebaseAuth.getInstance();\r\n        database= FirebaseDatabase.getInstance();\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        binding= FragmentExploreBinding.inflate(inflater, container, false);\r\n        UserAdapter adapter = new UserAdapter(getContext(),list);\r\n        LinearLayoutManager layoutManager = new LinearLayoutManager(getContext());\r\n        binding.usersRV.setLayoutManager(layoutManager);\r\n        binding.usersRV.setAdapter(adapter);\r\n\r\n        database.getReference().child(&quot;Users&quot;).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                list.clear();\r\n                for(DataSnapshot dataSnapshot : snapshot.getChildren()){\r\n                    User user = dataSnapshot.getValue(User.class);\r\n                    user.setUserID(dataSnapshot.getKey());\r\n\r\n                    if(!dataSnapshot.getKey().equals(FirebaseAuth.getInstance().getUid())){\r\n                        list.add(user);\r\n                    }\r\n                }\r\n                adapter.notifyDataSetChanged();\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n        return binding.getRoot();\r\n    }\r\n}\r\n```\r\n\r\nUser_model is:\r\n\r\n\r\n```\r\npublic class User {\r\n    private String name, profession,email,password,cname;\r\n    private String profile;\r\n    private String userReff;\r\n    private int guidedCount;\r\n    private String userID;\r\n    private  String coverPhoto;\r\n\r\n    public User() {\r\n    }\r\n\r\n    public int getGuidedCount() {\r\n        return guidedCount;\r\n    }\r\n    public void setGuidedCount(int guidedCount) {\r\n        this.guidedCount = guidedCount;\r\n    }\r\n\r\n    public String getCoverPhoto() {\r\n        return coverPhoto;\r\n    }\r\n    public void setCoverPhoto(String coverPhoto) {\r\n        this.coverPhoto = coverPhoto;\r\n    }\r\n\r\n    public User(String name, String profession, String email, String password, String cname) {\r\n        this.name = name;\r\n        this.profession = profession;\r\n        this.email = email;\r\n        this.password = password;\r\n        this.cname = cname;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getProfession() {\r\n        return profession;\r\n    }\r\n    public void setProfession(String profession) {\r\n        this.profession = profession;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n    public void setEmail(String email) {\r\n        this.email = email;\r\n    }\r\n\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n    public void setPassword(String password) {\r\n        this.password = password;\r\n    }\r\n\r\n    public String getCname() {\r\n        return cname;\r\n    }\r\n    public void setCname(String cname) {\r\n        this.cname = cname;\r\n    }\r\n\r\n    public String getProfile() {\r\n        return profile;\r\n    }\r\n    public void setProfile(String profile) {\r\n        this.profile = profile;\r\n    }\r\n\r\n    public String getUserReff() {\r\n        return userReff;\r\n    }\r\n    public void setUserReff(String userReff) {\r\n        this.userReff = userReff;\r\n    }\r\n\r\n\r\n    public String getUserID() {\r\n        return userID;\r\n    }\r\n\r\n    public void setUserID(String userID) {\r\n        this.userID = userID;\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nUser_adapter is:\r\n\r\n\r\n```\r\npublic class UserAdapter extends RecyclerView.Adapter&lt;UserAdapter.viewHolder&gt;{\r\n    Context context;\r\n    ArrayList&lt;User&gt; list;\r\n\r\n    public UserAdapter(Context context, ArrayList&lt;User&gt; list) {\r\n        this.context = context;\r\n        this.list = list;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public viewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(context).inflate(R.layout.user_sample,parent,false);\r\n        return new viewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull viewHolder holder, int position) {\r\n        User user = list.get(position);\r\n        Picasso.get().load(user.getProfile()).placeholder(R.drawable.placeholder).into(holder.binding.profileImage);\r\n        holder.binding.name.setText(user.getName());\r\n        holder.binding.profession.setText(user.getProfession());\r\n\r\n        holder.binding.viewprofilebtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view){\r\n\r\n                String visiter = list.get(holder.getAdapterPosition()).getUserID();\r\n                Intent intent= new Intent(context, VActivity.class);\r\n                intent.putExtra(&quot;usersid&quot;,visiter).toString();\r\n                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n                context.startActivity(intent);\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return list.size();\r\n    }\r\n\r\n    public class viewHolder extends RecyclerView.ViewHolder{\r\n        UserSampleBinding binding;\r\n        public viewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n\r\n            binding = UserSampleBinding.bind(itemView);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nError i am getting is:\r\n\r\n\r\n&gt; E/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.example.guided_app, PID: 2744\r\n    com.google.firebase.database.DatabaseException: Failed to convert a value of type java.lang.String to int\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.convertInteger(CustomClassMapper.java:364)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToPrimitive(CustomClassMapper.java:290)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToClass(CustomClassMapper.java:215)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToType(CustomClassMapper.java:179)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.access$100(CustomClassMapper.java:48)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper$BeanMapper.deserialize(CustomClassMapper.java:593)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper$BeanMapper.deserialize(CustomClassMapper.java:563)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.convertBean(CustomClassMapper.java:433)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToClass(CustomClassMapper.java:232)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.convertToCustomClass(CustomClassMapper.java:80)\r\n        at com.google.firebase.database.DataSnapshot.getValue(DataSnapshot.java:203)\r\n        at com.example.guided_app.fragment.exploreFragment$1.onDataChange(exploreFragment.java:60)\r\n        at com.google.firebase.database.core.ValueEventRegistration.fireEvent(ValueEventRegistration.java:75)\r\n        at com.google.firebase.database.core.view.DataEvent.fire(DataEvent.java:63)\r\n        at com.google.firebase.database.core.view.EventRaiser$1.run(EventRaiser.java:55)\r\n        at android.os.Handler.handleCallback(Handler.java:790)\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n        at android.os.Looper.loop(Looper.java:164)\r\n        at android.app.ActivityThread.main(ActivityThread.java:6494)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)\r\n\r\nThe firebase database is:\r\n```\r\n &quot;Users&quot;: {\r\n    &quot;59fLuGGNugPcgp6b725cFnKIzKC2&quot;: {\r\n      &quot;cname&quot;: &quot;LIT&quot;,\r\n      &quot;email&quot;: &quot;Stephen@gmail.com&quot;,\r\n      &quot;guidedCount&quot;: 0,\r\n      &quot;name&quot;: &quot;Stephen Wade&quot;,\r\n      &quot;password&quot;: &quot;123456&quot;,\r\n      &quot;profession&quot;: &quot;Developer @ Adobe&quot;\r\n    },\r\n    &quot;7kpNGqcHeBfNqf8GrVK2Hpew0L62&quot;: {\r\n      &quot;cname&quot;: &quot;BIT&quot;,\r\n      &quot;email&quot;: &quot;anshul@gmail.com&quot;,\r\n      &quot;guided&quot;: {\r\n        &quot;FOQEVbKRpNYjfzAJCp1XQtnvRlh2&quot;: {\r\n          &quot;guidedAt&quot;: 1670152487063,\r\n          &quot;guidedBy&quot;: &quot;FOQEVbKRpNYjfzAJCp1XQtnvRlh2&quot;\r\n        },\r\n        &quot;y3pV1GhdLqOnteMO64U2F4o8mMu2&quot;: {\r\n          &quot;guidedAt&quot;: 1670151228825,\r\n          &quot;guidedBy&quot;: &quot;y3pV1GhdLqOnteMO64U2F4o8mMu2&quot;\r\n        }\r\n      },\r\n      &quot;guidedCount&quot;: 2,\r\n      &quot;name&quot;: &quot;Anshul Lanjewar&quot;,\r\n      &quot;password&quot;: &quot;123456&quot;,\r\n      &quot;profession&quot;: &quot;SDE @ Google&quot;\r\n    },\r\n    &quot;FOQEVbKRpNYjfzAJCp1XQtnvRlh2&quot;: {\r\n      &quot;cname&quot;: &quot;SIT&quot;,\r\n      &quot;email&quot;: &quot;Tanvi@gmail.com&quot;,\r\n      &quot;guidedCount&quot;: 0,\r\n      &quot;name&quot;: &quot;Tanvi Colson&quot;,\r\n      &quot;password&quot;: &quot;123456&quot;,\r\n      &quot;profession&quot;: &quot;Analyst @ Google&quot;\r\n    },\r\n    &quot;Jj2RH3iopgdLU6AC3VKeeaMKAXx1&quot;: {\r\n      &quot;cname&quot;: &quot;PIT&quot;,\r\n      &quot;email&quot;: &quot;Shana@gmail.com&quot;,\r\n      &quot;guidedCount&quot;: 0,\r\n      &quot;name&quot;: &quot;Shana Sharma&quot;,\r\n      &quot;password&quot;: &quot;123456&quot;,\r\n      &quot;profession&quot;: &quot;FullStack @ Netflix&quot;\r\n    },\r\n    &quot;gAzcrP1IYmQI0ht4qfH9WGt9U7F2&quot;: {\r\n      &quot;cname&quot;: &quot;MIT&quot;,\r\n      &quot;email&quot;: &quot;John@gmail.com&quot;,\r\n      &quot;guided&quot;: {\r\n        &quot;7kpNGqcHeBfNqf8GrVK2Hpew0L62&quot;: {\r\n          &quot;guidedAt&quot;: 1670614050015,\r\n          &quot;guidedBy&quot;: &quot;7kpNGqcHeBfNqf8GrVK2Hpew0L62&quot;\r\n        }\r\n      },\r\n      &quot;guidedCount&quot;: &quot;gAzcrP1IYmQI0ht4qfH9WGt9U7F2&quot;,\r\n      &quot;name&quot;: &quot;John Adams&quot;,\r\n      &quot;password&quot;: &quot;123456&quot;,\r\n      &quot;profession&quot;: &quot;Developer @ Apple&quot;\r\n    },\r\n    &quot;y3pV1GhdLqOnteMO64U2F4o8mMu2&quot;: {\r\n      &quot;cname&quot;: &quot;BIT&quot;,\r\n      &quot;email&quot;: &quot;kumar@gmail.com&quot;,\r\n      &quot;guided&quot;: {\r\n        &quot;7kpNGqcHeBfNqf8GrVK2Hpew0L62&quot;: {\r\n          &quot;guidedAt&quot;: 1670154254299,\r\n          &quot;guidedBy&quot;: &quot;7kpNGqcHeBfNqf8GrVK2Hpew0L62&quot;\r\n        }\r\n      },\r\n      &quot;guidedCount&quot;: 1,\r\n      &quot;name&quot;: &quot;Kumar Mishra&quot;,\r\n      &quot;password&quot;: &quot;123456&quot;,\r\n      &quot;profession&quot;: &quot;SDE @ Microsoft&quot;\r\n    }\r\n  }\r\n```\r\n\r\n\r\nI recently started with android development, so was just stucked.\r\nI want to create an explore_fragment in which list of users is added in recyclerView and with view_profile button we can view user profile.","title":"Failed to convert a value of type java.lang.String to int (in explore_fragment)","body":"<p>Showing error on getValue(User.class) in explore_fragment.\nMy explore_fragment is:</p>\n<pre><code>public class exploreFragment extends Fragment {\n    FragmentExploreBinding binding;\n    ArrayList&lt;User&gt; list = new ArrayList&lt;&gt;();\n    FirebaseAuth auth;\n    FirebaseDatabase database;\n\n    public exploreFragment() {\n        // Required empty public constructor\n    }\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        auth = FirebaseAuth.getInstance();\n        database= FirebaseDatabase.getInstance();\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        binding= FragmentExploreBinding.inflate(inflater, container, false);\n        UserAdapter adapter = new UserAdapter(getContext(),list);\n        LinearLayoutManager layoutManager = new LinearLayoutManager(getContext());\n        binding.usersRV.setLayoutManager(layoutManager);\n        binding.usersRV.setAdapter(adapter);\n\n        database.getReference().child(&quot;Users&quot;).addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                list.clear();\n                for(DataSnapshot dataSnapshot : snapshot.getChildren()){\n                    User user = dataSnapshot.getValue(User.class);\n                    user.setUserID(dataSnapshot.getKey());\n\n                    if(!dataSnapshot.getKey().equals(FirebaseAuth.getInstance().getUid())){\n                        list.add(user);\n                    }\n                }\n                adapter.notifyDataSetChanged();\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        });\n\n        return binding.getRoot();\n    }\n}\n</code></pre>\n<p>User_model is:</p>\n<pre><code>public class User {\n    private String name, profession,email,password,cname;\n    private String profile;\n    private String userReff;\n    private int guidedCount;\n    private String userID;\n    private  String coverPhoto;\n\n    public User() {\n    }\n\n    public int getGuidedCount() {\n        return guidedCount;\n    }\n    public void setGuidedCount(int guidedCount) {\n        this.guidedCount = guidedCount;\n    }\n\n    public String getCoverPhoto() {\n        return coverPhoto;\n    }\n    public void setCoverPhoto(String coverPhoto) {\n        this.coverPhoto = coverPhoto;\n    }\n\n    public User(String name, String profession, String email, String password, String cname) {\n        this.name = name;\n        this.profession = profession;\n        this.email = email;\n        this.password = password;\n        this.cname = cname;\n    }\n\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getProfession() {\n        return profession;\n    }\n    public void setProfession(String profession) {\n        this.profession = profession;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    public String getCname() {\n        return cname;\n    }\n    public void setCname(String cname) {\n        this.cname = cname;\n    }\n\n    public String getProfile() {\n        return profile;\n    }\n    public void setProfile(String profile) {\n        this.profile = profile;\n    }\n\n    public String getUserReff() {\n        return userReff;\n    }\n    public void setUserReff(String userReff) {\n        this.userReff = userReff;\n    }\n\n\n    public String getUserID() {\n        return userID;\n    }\n\n    public void setUserID(String userID) {\n        this.userID = userID;\n    }\n}\n</code></pre>\n<p>User_adapter is:</p>\n<pre><code>public class UserAdapter extends RecyclerView.Adapter&lt;UserAdapter.viewHolder&gt;{\n    Context context;\n    ArrayList&lt;User&gt; list;\n\n    public UserAdapter(Context context, ArrayList&lt;User&gt; list) {\n        this.context = context;\n        this.list = list;\n    }\n\n    @NonNull\n    @Override\n    public viewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View view = LayoutInflater.from(context).inflate(R.layout.user_sample,parent,false);\n        return new viewHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull viewHolder holder, int position) {\n        User user = list.get(position);\n        Picasso.get().load(user.getProfile()).placeholder(R.drawable.placeholder).into(holder.binding.profileImage);\n        holder.binding.name.setText(user.getName());\n        holder.binding.profession.setText(user.getProfession());\n\n        holder.binding.viewprofilebtn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view){\n\n                String visiter = list.get(holder.getAdapterPosition()).getUserID();\n                Intent intent= new Intent(context, VActivity.class);\n                intent.putExtra(&quot;usersid&quot;,visiter).toString();\n                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n                context.startActivity(intent);\n            }\n        });\n    }\n\n    @Override\n    public int getItemCount() {\n        return list.size();\n    }\n\n    public class viewHolder extends RecyclerView.ViewHolder{\n        UserSampleBinding binding;\n        public viewHolder(@NonNull View itemView) {\n            super(itemView);\n\n            binding = UserSampleBinding.bind(itemView);\n        }\n    }\n}\n</code></pre>\n<p>Error i am getting is:</p>\n<blockquote>\n<p>E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: com.example.guided_app, PID: 2744\ncom.google.firebase.database.DatabaseException: Failed to convert a value of type java.lang.String to int\nat com.google.firebase.database.core.utilities.encoding.CustomClassMapper.convertInteger(CustomClassMapper.java:364)\nat com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToPrimitive(CustomClassMapper.java:290)\nat com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToClass(CustomClassMapper.java:215)\nat com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToType(CustomClassMapper.java:179)\nat com.google.firebase.database.core.utilities.encoding.CustomClassMapper.access$100(CustomClassMapper.java:48)\nat com.google.firebase.database.core.utilities.encoding.CustomClassMapper$BeanMapper.deserialize(CustomClassMapper.java:593)\nat com.google.firebase.database.core.utilities.encoding.CustomClassMapper$BeanMapper.deserialize(CustomClassMapper.java:563)\nat com.google.firebase.database.core.utilities.encoding.CustomClassMapper.convertBean(CustomClassMapper.java:433)\nat com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToClass(CustomClassMapper.java:232)\nat com.google.firebase.database.core.utilities.encoding.CustomClassMapper.convertToCustomClass(CustomClassMapper.java:80)\nat com.google.firebase.database.DataSnapshot.getValue(DataSnapshot.java:203)\nat com.example.guided_app.fragment.exploreFragment$1.onDataChange(exploreFragment.java:60)\nat com.google.firebase.database.core.ValueEventRegistration.fireEvent(ValueEventRegistration.java:75)\nat com.google.firebase.database.core.view.DataEvent.fire(DataEvent.java:63)\nat com.google.firebase.database.core.view.EventRaiser$1.run(EventRaiser.java:55)\nat android.os.Handler.handleCallback(Handler.java:790)\nat android.os.Handler.dispatchMessage(Handler.java:99)\nat android.os.Looper.loop(Looper.java:164)\nat android.app.ActivityThread.main(ActivityThread.java:6494)\nat java.lang.reflect.Method.invoke(Native Method)\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)</p>\n</blockquote>\n<p>The firebase database is:</p>\n<pre><code> &quot;Users&quot;: {\n    &quot;59fLuGGNugPcgp6b725cFnKIzKC2&quot;: {\n      &quot;cname&quot;: &quot;LIT&quot;,\n      &quot;email&quot;: &quot;Stephen@gmail.com&quot;,\n      &quot;guidedCount&quot;: 0,\n      &quot;name&quot;: &quot;Stephen Wade&quot;,\n      &quot;password&quot;: &quot;123456&quot;,\n      &quot;profession&quot;: &quot;Developer @ Adobe&quot;\n    },\n    &quot;7kpNGqcHeBfNqf8GrVK2Hpew0L62&quot;: {\n      &quot;cname&quot;: &quot;BIT&quot;,\n      &quot;email&quot;: &quot;anshul@gmail.com&quot;,\n      &quot;guided&quot;: {\n        &quot;FOQEVbKRpNYjfzAJCp1XQtnvRlh2&quot;: {\n          &quot;guidedAt&quot;: 1670152487063,\n          &quot;guidedBy&quot;: &quot;FOQEVbKRpNYjfzAJCp1XQtnvRlh2&quot;\n        },\n        &quot;y3pV1GhdLqOnteMO64U2F4o8mMu2&quot;: {\n          &quot;guidedAt&quot;: 1670151228825,\n          &quot;guidedBy&quot;: &quot;y3pV1GhdLqOnteMO64U2F4o8mMu2&quot;\n        }\n      },\n      &quot;guidedCount&quot;: 2,\n      &quot;name&quot;: &quot;Anshul Lanjewar&quot;,\n      &quot;password&quot;: &quot;123456&quot;,\n      &quot;profession&quot;: &quot;SDE @ Google&quot;\n    },\n    &quot;FOQEVbKRpNYjfzAJCp1XQtnvRlh2&quot;: {\n      &quot;cname&quot;: &quot;SIT&quot;,\n      &quot;email&quot;: &quot;Tanvi@gmail.com&quot;,\n      &quot;guidedCount&quot;: 0,\n      &quot;name&quot;: &quot;Tanvi Colson&quot;,\n      &quot;password&quot;: &quot;123456&quot;,\n      &quot;profession&quot;: &quot;Analyst @ Google&quot;\n    },\n    &quot;Jj2RH3iopgdLU6AC3VKeeaMKAXx1&quot;: {\n      &quot;cname&quot;: &quot;PIT&quot;,\n      &quot;email&quot;: &quot;Shana@gmail.com&quot;,\n      &quot;guidedCount&quot;: 0,\n      &quot;name&quot;: &quot;Shana Sharma&quot;,\n      &quot;password&quot;: &quot;123456&quot;,\n      &quot;profession&quot;: &quot;FullStack @ Netflix&quot;\n    },\n    &quot;gAzcrP1IYmQI0ht4qfH9WGt9U7F2&quot;: {\n      &quot;cname&quot;: &quot;MIT&quot;,\n      &quot;email&quot;: &quot;John@gmail.com&quot;,\n      &quot;guided&quot;: {\n        &quot;7kpNGqcHeBfNqf8GrVK2Hpew0L62&quot;: {\n          &quot;guidedAt&quot;: 1670614050015,\n          &quot;guidedBy&quot;: &quot;7kpNGqcHeBfNqf8GrVK2Hpew0L62&quot;\n        }\n      },\n      &quot;guidedCount&quot;: &quot;gAzcrP1IYmQI0ht4qfH9WGt9U7F2&quot;,\n      &quot;name&quot;: &quot;John Adams&quot;,\n      &quot;password&quot;: &quot;123456&quot;,\n      &quot;profession&quot;: &quot;Developer @ Apple&quot;\n    },\n    &quot;y3pV1GhdLqOnteMO64U2F4o8mMu2&quot;: {\n      &quot;cname&quot;: &quot;BIT&quot;,\n      &quot;email&quot;: &quot;kumar@gmail.com&quot;,\n      &quot;guided&quot;: {\n        &quot;7kpNGqcHeBfNqf8GrVK2Hpew0L62&quot;: {\n          &quot;guidedAt&quot;: 1670154254299,\n          &quot;guidedBy&quot;: &quot;7kpNGqcHeBfNqf8GrVK2Hpew0L62&quot;\n        }\n      },\n      &quot;guidedCount&quot;: 1,\n      &quot;name&quot;: &quot;Kumar Mishra&quot;,\n      &quot;password&quot;: &quot;123456&quot;,\n      &quot;profession&quot;: &quot;SDE @ Microsoft&quot;\n    }\n  }\n</code></pre>\n<p>I recently started with android development, so was just stucked.\nI want to create an explore_fragment in which list of users is added in recyclerView and with view_profile button we can view user profile.</p>\n"},{"tags":["java","html"],"answers":[{"tags":[],"owner":{"account_id":27229121,"reputation":451,"user_id":20757134,"display_name":"ayada"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671020154,"creation_date":1671020138,"answer_id":74798145,"question_id":74793464,"body_markdown":"You have an extra `&lt;td&gt;` close in your code. It is located before `&lt;/tr&gt;`. Try to delete it. You have to do some thing like this :\r\n\r\n         &lt;form id=&quot;config_form&quot; action=&quot;Fruits&quot; method=&quot;Post&quot; enctype=&quot;multipart/form-data&quot;&gt;\r\n            &lt;table id=&quot;myTable&quot;&gt;\r\n            &lt;c:forEach items=&quot;${fruits}&quot; var=&quot;val&quot; varStatus=&quot;count&quot;&gt;\r\n                 &lt;tbody&gt;\r\n                     &lt;tr&gt;\r\n                        &lt;td&gt;    \r\n                           &lt;input type=&quot;text&quot; name=&quot;fruit&quot; id=&quot;fruit&quot; value=&quot;${val.fruitname}&quot;&gt;\r\n                        &lt;/td&gt;\r\n                         &lt;td&gt;     \r\n                           &lt;input type=&quot;password&quot; name=&quot;passphrase&quot; id=&quot;passphrase&quot; value=&quot;${val.passphrase}&quot;&gt;\r\n                         &lt;/td&gt;\r\n                     &lt;/tr&gt;\r\n                 &lt;/tbody&gt;\r\n            &lt;/c:forEach&gt;\r\n         &lt;/table&gt;\r\n         &lt;/form&gt;","title":"getString() is reading all values from one field","body":"<p>You have an extra <code>&lt;td&gt;</code> close in your code. It is located before <code>&lt;/tr&gt;</code>. Try to delete it. You have to do some thing like this :</p>\n<pre><code>     &lt;form id=&quot;config_form&quot; action=&quot;Fruits&quot; method=&quot;Post&quot; enctype=&quot;multipart/form-data&quot;&gt;\n        &lt;table id=&quot;myTable&quot;&gt;\n        &lt;c:forEach items=&quot;${fruits}&quot; var=&quot;val&quot; varStatus=&quot;count&quot;&gt;\n             &lt;tbody&gt;\n                 &lt;tr&gt;\n                    &lt;td&gt;    \n                       &lt;input type=&quot;text&quot; name=&quot;fruit&quot; id=&quot;fruit&quot; value=&quot;${val.fruitname}&quot;&gt;\n                    &lt;/td&gt;\n                     &lt;td&gt;     \n                       &lt;input type=&quot;password&quot; name=&quot;passphrase&quot; id=&quot;passphrase&quot; value=&quot;${val.passphrase}&quot;&gt;\n                     &lt;/td&gt;\n                 &lt;/tr&gt;\n             &lt;/tbody&gt;\n        &lt;/c:forEach&gt;\n     &lt;/table&gt;\n     &lt;/form&gt;\n</code></pre>\n"}],"owner":{"account_id":27187956,"reputation":1,"user_id":20722171,"display_name":"cruzzy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671020154,"creation_date":1670990664,"question_id":74793464,"body_markdown":"I&#39;m not sure why my getString() is responding in this way. Sorry for the incomplete code, I just want to know why the problem is like that. For my HTML side, the table will generate the amount of rows according to the `${fruits}` which is a ArrayList from the doGet() method. I&#39;m using `enctype=&quot;multipart/form-data&quot;` because it actually takes in a file but i shorten my codes just to not confuse even further.\r\n\r\n\r\n             &lt;form id=&quot;config_form&quot; action=&quot;Fruits&quot; method=&quot;Post&quot; enctype=&quot;multipart/form-data&quot;&gt;\r\n                &lt;table id=&quot;myTable&quot;&gt;\r\n                &lt;c:forEach items=&quot;${fruits}&quot; var=&quot;val&quot; varStatus=&quot;count&quot;&gt;\r\n                     &lt;tbody&gt;\r\n                         &lt;tr&gt;\r\n                            &lt;td&gt;    \r\n                               &lt;input type=&quot;text&quot; name=&quot;fruit&quot; id=&quot;fruit&quot; value=&quot;${val.fruitname}&quot;&gt;\r\n                            &lt;/td&gt;\r\n                             &lt;td&gt;     \r\n                               &lt;input type=&quot;password&quot; name=&quot;passphrase&quot; id=&quot;passphrase&quot; value=&quot;${val.passphrase}&quot;&gt;\r\n                             &lt;/td&gt;\r\n                             &lt;td&gt;\r\n                         &lt;/tr&gt;\r\n                     &lt;/tbody&gt;\r\n                &lt;/c:forEach&gt;\r\n             &lt;/table&gt;\r\n             &lt;/form&gt;\r\n\r\nThis is code from the doPost() method where it will retrieve the values from the textfield from the HTML. The problem is that it will take it the values from the field accordingly until it reaches the 2nd row where it will take all of the values from one field rather than one value from a field.\r\n\r\nFor example, it starts with the &quot;fruit&quot; field and will take in `{&quot;fruitname&quot;:&quot;apple&quot;}` first and follow by `{&quot;passphrase&quot;:&quot;123&quot;}` from the first row and when it reaches the second row it starts to take in all of values `{&quot;fruitname&quot;:&quot;apple&quot;, &quot;passphrase&quot;:&quot;123&quot;}` from the &quot;fruit&quot; field. I do not know why it works for the first row but not the second \r\n\r\n        DiskFileItemFactory factory = new DiskFileItemFactory();\r\n        ServletFileUpload upload = new ServletFileUpload(factory);\r\n        List&lt;FileItem&gt; uploadItems = null;\r\n  \r\n  \r\n        uploadItems = upload.parseRequest(request);\r\n\r\n        for (FileItem uploadItem : uploadItems) {\r\n                    if (uploadItem.isFormField()) {\r\n                        String fieldName = uploadItem.getFieldName();\r\n                        if(fieldName.equals(&quot;fruit&quot;))\r\n                        {\r\n                            String fruitname= uploadItem.getString();       \r\n                            newOutput.put(&quot;port&quot;,port);  //newOutput is a JSONObject\r\n                        }\r\n                        else if(fieldName.equals(&quot;passphrase&quot;))\r\n                        {\r\n                            String passphrase = uploadItem.getString();\r\n                            newOutput.put(&quot;passphrase&quot;,passphrase);\r\n                        }\r\n                }\r\n            }\r\n            arr_Output.add(newOutput);     //arr_Output is a JSONArray Object\r\n            \r\n          ","title":"getString() is reading all values from one field","body":"<p>I'm not sure why my getString() is responding in this way. Sorry for the incomplete code, I just want to know why the problem is like that. For my HTML side, the table will generate the amount of rows according to the <code>${fruits}</code> which is a ArrayList from the doGet() method. I'm using <code>enctype=&quot;multipart/form-data&quot;</code> because it actually takes in a file but i shorten my codes just to not confuse even further.</p>\n<pre><code>         &lt;form id=&quot;config_form&quot; action=&quot;Fruits&quot; method=&quot;Post&quot; enctype=&quot;multipart/form-data&quot;&gt;\n            &lt;table id=&quot;myTable&quot;&gt;\n            &lt;c:forEach items=&quot;${fruits}&quot; var=&quot;val&quot; varStatus=&quot;count&quot;&gt;\n                 &lt;tbody&gt;\n                     &lt;tr&gt;\n                        &lt;td&gt;    \n                           &lt;input type=&quot;text&quot; name=&quot;fruit&quot; id=&quot;fruit&quot; value=&quot;${val.fruitname}&quot;&gt;\n                        &lt;/td&gt;\n                         &lt;td&gt;     \n                           &lt;input type=&quot;password&quot; name=&quot;passphrase&quot; id=&quot;passphrase&quot; value=&quot;${val.passphrase}&quot;&gt;\n                         &lt;/td&gt;\n                         &lt;td&gt;\n                     &lt;/tr&gt;\n                 &lt;/tbody&gt;\n            &lt;/c:forEach&gt;\n         &lt;/table&gt;\n         &lt;/form&gt;\n</code></pre>\n<p>This is code from the doPost() method where it will retrieve the values from the textfield from the HTML. The problem is that it will take it the values from the field accordingly until it reaches the 2nd row where it will take all of the values from one field rather than one value from a field.</p>\n<p>For example, it starts with the &quot;fruit&quot; field and will take in <code>{&quot;fruitname&quot;:&quot;apple&quot;}</code> first and follow by <code>{&quot;passphrase&quot;:&quot;123&quot;}</code> from the first row and when it reaches the second row it starts to take in all of values <code>{&quot;fruitname&quot;:&quot;apple&quot;, &quot;passphrase&quot;:&quot;123&quot;}</code> from the &quot;fruit&quot; field. I do not know why it works for the first row but not the second</p>\n<pre><code>    DiskFileItemFactory factory = new DiskFileItemFactory();\n    ServletFileUpload upload = new ServletFileUpload(factory);\n    List&lt;FileItem&gt; uploadItems = null;\n\n\n    uploadItems = upload.parseRequest(request);\n\n    for (FileItem uploadItem : uploadItems) {\n                if (uploadItem.isFormField()) {\n                    String fieldName = uploadItem.getFieldName();\n                    if(fieldName.equals(&quot;fruit&quot;))\n                    {\n                        String fruitname= uploadItem.getString();       \n                        newOutput.put(&quot;port&quot;,port);  //newOutput is a JSONObject\n                    }\n                    else if(fieldName.equals(&quot;passphrase&quot;))\n                    {\n                        String passphrase = uploadItem.getString();\n                        newOutput.put(&quot;passphrase&quot;,passphrase);\n                    }\n            }\n        }\n        arr_Output.add(newOutput);     //arr_Output is a JSONArray Object\n        \n      \n</code></pre>\n"},{"tags":["java","object"],"comments":[{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1671019772,"post_id":74798050,"comment_id":132005769,"body_markdown":"Please provide the exact compiler output in your question. In any case the error happens because the Java compiler *knows* that `m`, being an instance of `MyOwnClass`, will never be `==` to `&quot;abcd&quot;` (a `java.lang.String`), while it is possible to write an `equals` method which will consider them equal (even if that violates the &quot;contract&quot; of `equals`).","body":"Please provide the exact compiler output in your question. In any case the error happens because the Java compiler <i>knows</i> that <code>m</code>, being an instance of <code>MyOwnClass</code>, will never be <code>==</code> to <code>&quot;abcd&quot;</code> (a <code>java.lang.String</code>), while it is possible to write an <code>equals</code> method which will consider them equal (even if that violates the &quot;contract&quot; of <code>equals</code>)."},{"owner":{"account_id":8490813,"reputation":3810,"user_id":6367213,"display_name":"Janez Kuhar"},"score":0,"creation_date":1671020140,"post_id":74798050,"comment_id":132005897,"body_markdown":"I think @AndyTurner has also provided a nice answer to a similar question here: https://stackoverflow.com/a/60136054/6367213","body":"I think @AndyTurner has also provided a nice answer to a similar question here: <a href=\"https://stackoverflow.com/a/60136054/6367213\">stackoverflow.com/a/60136054/6367213</a>"}],"answers":[{"tags":[],"owner":{"account_id":4716677,"reputation":580,"user_id":3815660,"display_name":"Yurii"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671019949,"creation_date":1671019949,"answer_id":74798112,"question_id":74798050,"body_markdown":"Read here please https://docs.oracle.com/javase/specs/jls/se13/html/jls-15.html#jls-15.21.3\r\n\r\n&gt; If the operands of an equality operator are both of either reference type or the null type, then the operation is object equality.","title":"Operator &#39;==&#39; cannot be applied...(java)","body":"<p>Read here please <a href=\"https://docs.oracle.com/javase/specs/jls/se13/html/jls-15.html#jls-15.21.3\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/specs/jls/se13/html/jls-15.html#jls-15.21.3</a></p>\n<blockquote>\n<p>If the operands of an equality operator are both of either reference type or the null type, then the operation is object equality.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":23956357,"reputation":87,"user_id":17947184,"display_name":"Math.Random"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671020109,"creation_date":1671020109,"answer_id":74798138,"question_id":74798050,"body_markdown":"== is an operator to compare the reference values and objects.\r\nequals() is used to compare the actual content of the object.\r\n\r\nyou can also check this post:\r\nhttps://stackoverflow.com/questions/7520432/what-is-the-difference-between-and-equals-in-java ","title":"Operator &#39;==&#39; cannot be applied...(java)","body":"<p>== is an operator to compare the reference values and objects.\nequals() is used to compare the actual content of the object.</p>\n<p>you can also check this post:\n<a href=\"https://stackoverflow.com/questions/7520432/what-is-the-difference-between-and-equals-in-java\">What is the difference between == and equals() in Java?</a></p>\n"},{"tags":[],"owner":{"account_id":1881735,"reputation":7688,"user_id":1701776,"accept_rate":71,"display_name":"BambooleanLogic"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1671020131,"creation_date":1671020131,"answer_id":74798143,"question_id":74798050,"body_markdown":"The method `equals` exists on all `Object` instances and permits any other `Object` (or `null`)  to be passed. `m.equals(&quot;abc&quot;)` is therefore okay; it meets the (very loose) requirements of `equals`.\r\n\r\nThis is allowed because one could write an `equals` method that indeed _does_ allow an `MyOwnClass` instance to be equal to a `String` instance. (It&#39;s probably not a _good_ idea, but something _technically valid_.)\r\n\r\n`==` is different. It has a very specific meaning when dealing with reference types. It returns `true` if and only if the two arguments are the exact same instance; `false` otherwise.\r\n\r\nHowever, in this case, when comparing an `MyOwnClass` and a `String`, the compiler knows that that comparison _can never ever be true_ since the two provably don&#39;t inherit from each other. There is no situation where this comparison would make sense or even be useful; the developer must have made a mistake.\r\n\r\nIf you still _want_ to make this comparison nonetheless, you can cast one or both of the arguments to `Object`:\r\n\r\n```java\r\nout.println(m == (Object) &quot;abd&quot;);\r\n```\r\n\r\nThe comparison is now between a `MyOwnClass` and an `Object`. Since `MyOwnClass` inherits from an `Object`, a `someMyOwnClass == someObject` could sometimes be `true`, so the comparison is permitted.","title":"Operator &#39;==&#39; cannot be applied...(java)","body":"<p>The method <code>equals</code> exists on all <code>Object</code> instances and permits any other <code>Object</code> (or <code>null</code>)  to be passed. <code>m.equals(&quot;abc&quot;)</code> is therefore okay; it meets the (very loose) requirements of <code>equals</code>.</p>\n<p>This is allowed because one could write an <code>equals</code> method that indeed <em>does</em> allow an <code>MyOwnClass</code> instance to be equal to a <code>String</code> instance. (It's probably not a <em>good</em> idea, but something <em>technically valid</em>.)</p>\n<p><code>==</code> is different. It has a very specific meaning when dealing with reference types. It returns <code>true</code> if and only if the two arguments are the exact same instance; <code>false</code> otherwise.</p>\n<p>However, in this case, when comparing an <code>MyOwnClass</code> and a <code>String</code>, the compiler knows that that comparison <em>can never ever be true</em> since the two provably don't inherit from each other. There is no situation where this comparison would make sense or even be useful; the developer must have made a mistake.</p>\n<p>If you still <em>want</em> to make this comparison nonetheless, you can cast one or both of the arguments to <code>Object</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>out.println(m == (Object) &quot;abd&quot;);\n</code></pre>\n<p>The comparison is now between a <code>MyOwnClass</code> and an <code>Object</code>. Since <code>MyOwnClass</code> inherits from an <code>Object</code>, a <code>someMyOwnClass == someObject</code> could sometimes be <code>true</code>, so the comparison is permitted.</p>\n"}],"owner":{"account_id":27034747,"reputation":1,"user_id":20590552,"display_name":"Alex2000"},"comment_count":2,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"closed_date":1671021179,"accepted_answer_id":74798143,"answer_count":3,"score":-4,"last_activity_date":1671020131,"creation_date":1671019562,"question_id":74798050,"body_markdown":"I&#39;m, having a little problem understanding why I get this compiler error. This was just a way for me to understand how all reference type inherit from Object class, but I&#39;m more lost than ever :( \r\n\r\n\r\n```\r\nimport static java.lang.System.out;\r\n\r\npublic class InheritObject {\r\n\r\n    public static void main(String[] args) {\r\n        new InheritObject().program();\r\n    }\r\n\r\n    void program() {\r\n        MyOwnClass m = new MyOwnClass();\r\n\r\n        out.println(m.toString());\r\n        out.println(m.getClass());   // Get class used to create this object\r\n        out.println(m.equals(&quot;abc&quot;));  // m == &quot;abc&quot; not allowed, but equals is!\r\n        out.println(m==&quot;abd&quot;);      // ... and default equals() uses == ?!\r\n        out.println(m.equals(5));\r\n        out.println(m.hashCode());\r\n        // Etc.\r\n\r\n    }\r\n\r\n    class MyOwnClass{\r\n        // No methods here!!!\r\n    }\r\n}\r\n\r\n```\r\n","title":"Operator &#39;==&#39; cannot be applied...(java)","body":"<p>I'm, having a little problem understanding why I get this compiler error. This was just a way for me to understand how all reference type inherit from Object class, but I'm more lost than ever :(</p>\n<pre><code>import static java.lang.System.out;\n\npublic class InheritObject {\n\n    public static void main(String[] args) {\n        new InheritObject().program();\n    }\n\n    void program() {\n        MyOwnClass m = new MyOwnClass();\n\n        out.println(m.toString());\n        out.println(m.getClass());   // Get class used to create this object\n        out.println(m.equals(&quot;abc&quot;));  // m == &quot;abc&quot; not allowed, but equals is!\n        out.println(m==&quot;abd&quot;);      // ... and default equals() uses == ?!\n        out.println(m.equals(5));\n        out.println(m.hashCode());\n        // Etc.\n\n    }\n\n    class MyOwnClass{\n        // No methods here!!!\n    }\n}\n\n</code></pre>\n"},{"tags":["java","android","bitmapimage","color-detection"],"owner":{"account_id":27220360,"reputation":1,"user_id":20749747,"display_name":"Jan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671019396,"creation_date":1670776722,"question_id":74762609,"body_markdown":"I am trying to make a program in Android Studio using java, where I can determine the RGB values at the point where the user clicked on the image. The code is working so far, but it gives wrong RGB values as output. They also seem to vary, based on the location where I click, even if the color that should be put out is the same. My guess is, that there is something up with the Bitmap, that I don&#39;t know about.\r\n\r\nMy MainActivity :\r\n\r\n```\r\npackage com.example.fitme;\r\n\r\nimport android.app.Activity;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.BitmapDrawable;\r\nimport android.os.Bundle;\r\nimport android.view.MotionEvent;\r\nimport android.view.View;\r\nimport android.widget.ImageView;\r\nimport android.widget.Toast;\r\n\r\npublic class MainActivity extends Activity  {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n    }\r\n\r\n    @Override\r\n    public boolean onTouchEvent(MotionEvent ev) {\r\n        final int action = ev.getAction();\r\n        final int evX = (int) ev.getX();\r\n        final  int evY = (int) ev.getY();\r\n\r\n        switch (action) {\r\n            case MotionEvent.ACTION_DOWN :\r\n                break;\r\n            case MotionEvent.ACTION_UP :\r\n                ImageView img = (ImageView) findViewById (R.id.body_front_map);\r\n                img.setDrawingCacheEnabled(true);\r\n                Bitmap imgbmp = Bitmap.createBitmap(img.getDrawingCache());\r\n                img.setDrawingCacheEnabled(false);\r\n                int pxl = imgbmp.getPixel(evX, evY);\r\n                int redComponent = Color.red(pxl);\r\n                int greenComponent = Color.green(pxl);\r\n                int blueComponent = Color.blue(pxl);\r\n\r\n                Toast.makeText(MainActivity.this,&quot;RED: &quot;+redComponent+&quot; GREEN: &quot;+greenComponent+&quot; BLUE: &quot;+blueComponent, Toast.LENGTH_SHORT).show();\r\n                break;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n```\r\n\r\nXML:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout \r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n    &lt;ImageView\r\n        android:id=&quot;@+id/body_front_map&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:visibility=&quot;visible&quot;\r\n        android:background=&quot;@drawable/body_front_map&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;/&gt;\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\n\r\nThe Image I am trying to use\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8GH4l.png","title":"Color detection in android (java) delivers wrong RGB values","body":"<p>I am trying to make a program in Android Studio using java, where I can determine the RGB values at the point where the user clicked on the image. The code is working so far, but it gives wrong RGB values as output. They also seem to vary, based on the location where I click, even if the color that should be put out is the same. My guess is, that there is something up with the Bitmap, that I don't know about.</p>\n<p>My MainActivity :</p>\n<pre><code>package com.example.fitme;\n\nimport android.app.Activity;\nimport android.graphics.Bitmap;\nimport android.graphics.Color;\nimport android.graphics.drawable.BitmapDrawable;\nimport android.os.Bundle;\nimport android.view.MotionEvent;\nimport android.view.View;\nimport android.widget.ImageView;\nimport android.widget.Toast;\n\npublic class MainActivity extends Activity  {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n\n    @Override\n    public boolean onTouchEvent(MotionEvent ev) {\n        final int action = ev.getAction();\n        final int evX = (int) ev.getX();\n        final  int evY = (int) ev.getY();\n\n        switch (action) {\n            case MotionEvent.ACTION_DOWN :\n                break;\n            case MotionEvent.ACTION_UP :\n                ImageView img = (ImageView) findViewById (R.id.body_front_map);\n                img.setDrawingCacheEnabled(true);\n                Bitmap imgbmp = Bitmap.createBitmap(img.getDrawingCache());\n                img.setDrawingCacheEnabled(false);\n                int pxl = imgbmp.getPixel(evX, evY);\n                int redComponent = Color.red(pxl);\n                int greenComponent = Color.green(pxl);\n                int blueComponent = Color.blue(pxl);\n\n                Toast.makeText(MainActivity.this,&quot;RED: &quot;+redComponent+&quot; GREEN: &quot;+greenComponent+&quot; BLUE: &quot;+blueComponent, Toast.LENGTH_SHORT).show();\n                break;\n        }\n        return false;\n    }\n}\n</code></pre>\n<p>XML:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout \n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;ImageView\n        android:id=&quot;@+id/body_front_map&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:visibility=&quot;visible&quot;\n        android:background=&quot;@drawable/body_front_map&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;/&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>The Image I am trying to use\n<a href=\"https://i.stack.imgur.com/8GH4l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8GH4l.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","regex","replaceall"],"comments":[{"owner":{"account_id":7089168,"reputation":157118,"user_id":5424988,"display_name":"The fourth bird"},"score":0,"creation_date":1671018381,"post_id":74797777,"comment_id":132005266,"body_markdown":"You could write it like this `(?&lt;!\\\\S)0+`","body":"You could write it like this <code>(?&lt;!\\\\S)0+</code>"},{"owner":{"account_id":4739783,"reputation":612575,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":0,"creation_date":1671018492,"post_id":74797777,"comment_id":132005324,"body_markdown":"So, you want to avoid replacing `0`s in the datetime values only? Or you want to remove `0`s in the `&#39;&lt;digits&gt;&#39;` like strings? Try `query = query.replaceAll(&quot;&#39;0+(\\\\d+&#39;)&quot;,&quot;&#39;$1&quot;); `","body":"So, you want to avoid replacing <code>0</code>s in the datetime values only? Or you want to remove <code>0</code>s in the <code>&#39;&lt;digits&gt;&#39;</code> like strings? Try <code>query = query.replaceAll(&quot;&#39;0+(\\\\d+&#39;)&quot;,&quot;&#39;$1&quot;); </code>"},{"owner":{"account_id":20856183,"reputation":41,"user_id":15319442,"display_name":"nik2811"},"score":0,"creation_date":1671018753,"post_id":74797777,"comment_id":132005418,"body_markdown":"No I only want to replace preceding zeros of number present under &#39;&#39;.  problem with my regex is, it also changes preceding zero after decimal point in timestamp","body":"No I only want to replace preceding zeros of number present under &#39;&#39;.  problem with my regex is, it also changes preceding zero after decimal point in timestamp"},{"owner":{"account_id":4739783,"reputation":612575,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":0,"creation_date":1671018869,"post_id":74797777,"comment_id":132005465,"body_markdown":"Then you can use `query = query.replaceAll(&quot;\\\\b(?&lt;!\\\\d\\\\.)0+&quot;,&quot;&quot;);`. Or `query = query.replaceAll(&quot;\\\\b(?&lt;!\\\\d\\\\.)0+(?=\\\\d)&quot;,&quot;&quot;);`. You should provide expected result in the question body.","body":"Then you can use <code>query = query.replaceAll(&quot;\\\\b(?&lt;!\\\\d\\\\.)0+&quot;,&quot;&quot;);</code>. Or <code>query = query.replaceAll(&quot;\\\\b(?&lt;!\\\\d\\\\.)0+(?=\\\\d)&quot;,&quot;&quot;);</code>. You should provide expected result in the question body."}],"answers":[{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1671019243,"creation_date":1671018748,"answer_id":74797876,"question_id":74797777,"body_markdown":"You can use negative lookarounds to not remove the zero followed by or preceded by any of `-`, `:`, `.` or `T`.\r\n\r\n\r\n\r\n    class Main {\r\n    \r\n        public static void main(String args[]) {\r\n            String query = &quot;contains(costCategories.name,&#39;05.04506&#39;)ge(dateCreated,&#39;2013-01-18T09:30:00.000Z&#39;)&quot;;\r\n            query = query.replaceAll(&quot;(?&lt;![-:\\\\.T])\\\\b0+(?![-:\\\\.T])&quot;, &quot;&quot;);\r\n            System.out.println(query);\r\n        }\r\n    }\r\n\r\n**Output**:\r\n\r\n    contains(costCategories.name,&#39;5.04506&#39;)ge(dateCreated,&#39;2013-01-18T09:30:00.000Z&#39;)","title":"Trying to select preceding zeros of a number present in a RQL query using regex","body":"<p>You can use negative lookarounds to not remove the zero followed by or preceded by any of <code>-</code>, <code>:</code>, <code>.</code> or <code>T</code>.</p>\n<pre><code>class Main {\n\n    public static void main(String args[]) {\n        String query = &quot;contains(costCategories.name,'05.04506')ge(dateCreated,'2013-01-18T09:30:00.000Z')&quot;;\n        query = query.replaceAll(&quot;(?&lt;![-:\\\\.T])\\\\b0+(?![-:\\\\.T])&quot;, &quot;&quot;);\n        System.out.println(query);\n    }\n}\n</code></pre>\n<p><strong>Output</strong>:</p>\n<pre><code>contains(costCategories.name,'5.04506')ge(dateCreated,'2013-01-18T09:30:00.000Z')\n</code></pre>\n"}],"owner":{"account_id":20856183,"reputation":41,"user_id":15319442,"display_name":"nik2811"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":74797876,"answer_count":1,"score":2,"last_activity_date":1671019243,"creation_date":1671018275,"question_id":74797777,"body_markdown":"I&#39;m trying to remove the preceding zeros of numbers present in below query\r\n\r\n```\r\nString query = &quot;or(contains(number,&#39;04506&#39;),contains(name,&#39;04506&#39;),contains(vendorInfo.name,&#39;04506&#39;),contains(vendorInfo.number,&#39;04506&#39;),contains(costCategories.name,&#39;04506&#39;)&quot;;\r\n```\r\n\r\nI&#39;m using below regex\r\n\r\n``` \r\nquery = query.replaceAll(&quot;\\\\b0+&quot;,&quot;&quot;); \r\n```\r\n\r\nProblem is, it also removes zero, if we provide a query with a timestamp to it, e.g.\r\n\r\n``` \r\nquery = &quot;ge(dateCreated,&#39;2013-01-18T19:30:00.000Z&#39;)&quot;; \r\n```","title":"Trying to select preceding zeros of a number present in a RQL query using regex","body":"<p>I'm trying to remove the preceding zeros of numbers present in below query</p>\n<pre><code>String query = &quot;or(contains(number,'04506'),contains(name,'04506'),contains(vendorInfo.name,'04506'),contains(vendorInfo.number,'04506'),contains(costCategories.name,'04506')&quot;;\n</code></pre>\n<p>I'm using below regex</p>\n<pre><code>query = query.replaceAll(&quot;\\\\b0+&quot;,&quot;&quot;); \n</code></pre>\n<p>Problem is, it also removes zero, if we provide a query with a timestamp to it, e.g.</p>\n<pre><code>query = &quot;ge(dateCreated,'2013-01-18T19:30:00.000Z')&quot;; \n</code></pre>\n"},{"tags":["java","gradle","directory","noclassdeffounderror"],"comments":[{"owner":{"account_id":5896458,"reputation":5083,"user_id":4641455,"display_name":"JFPicard"},"score":0,"creation_date":1453391533,"post_id":34928096,"comment_id":57589806,"body_markdown":"Possible duplicate of [Why am I getting a NoClassDefFoundError in Java?](http://stackoverflow.com/questions/34413/why-am-i-getting-a-noclassdeffounderror-in-java)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/34413/why-am-i-getting-a-noclassdeffounderror-in-java\">Why am I getting a NoClassDefFoundError in Java?</a>"}],"answers":[{"tags":[],"owner":{"account_id":1936546,"reputation":133665,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1453391530,"creation_date":1453391317,"answer_id":34928184,"question_id":34928096,"body_markdown":"You should run the command (in Windows)\r\n\r\n    java my\\package\\HelloWorld\r\n\r\nfrom the directory `build/classes/main` and not from `build/classes/main/my/package`. This is because `HelloWorld` class declares that it resides in the package `my.package` with `package my.package;`.","title":"Java.lang.NoClassDefFoundError wrong name: how to solve this?","body":"<p>You should run the command (in Windows)</p>\n\n<pre><code>java my\\package\\HelloWorld\n</code></pre>\n\n<p>from the directory <code>build/classes/main</code> and not from <code>build/classes/main/my/package</code>. This is because <code>HelloWorld</code> class declares that it resides in the package <code>my.package</code> with <code>package my.package;</code>.</p>\n"},{"tags":[],"owner":{"account_id":27199933,"reputation":1,"user_id":20732317,"display_name":"Shlomo Alexander Perlov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671019008,"creation_date":1670582188,"answer_id":74741912,"question_id":34928096,"body_markdown":"There are two ways to run from the same folder:\r\n\r\n- First way:\r\n  - delete the `package my.package` line\r\n  - compile your code with `javac HelloWorld.java`\r\n  - run your code with `java HelloWorld`\r\n\r\n- Second way: Run straight away \r\n  - `java -cp . HelloWorld.java`","title":"Java.lang.NoClassDefFoundError wrong name: how to solve this?","body":"<p>There are two ways to run from the same folder:</p>\n<ul>\n<li><p>First way:</p>\n<ul>\n<li>delete the <code>package my.package</code> line</li>\n<li>compile your code with <code>javac HelloWorld.java</code></li>\n<li>run your code with <code>java HelloWorld</code></li>\n</ul>\n</li>\n<li><p>Second way: Run straight away</p>\n<ul>\n<li><code>java -cp . HelloWorld.java</code></li>\n</ul>\n</li>\n</ul>\n"}],"owner":{"account_id":7247220,"reputation":7104,"user_id":5528751,"accept_rate":96,"display_name":"java123999"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8064,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":34928184,"answer_count":2,"score":2,"last_activity_date":1671019008,"creation_date":1453391124,"question_id":34928096,"body_markdown":"I have created a very simple `Java` application, and built it using `Gradle`.\r\n\r\nIt is an application with just the Standard &quot;Hello World&quot; Java class (shown below).\r\n\r\nI have built it with Gradle successfully and my `.class` file has been created at the standard folder location: \r\n\r\n`build&gt;classes&gt;main&gt;my&gt;package&gt;HelloWorld.class`\r\n\r\nHowever, when I navigate to this folder and run in `cmd line`:\r\n\r\n    java HelloWorld\r\n\r\nI get the following **error:**\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: HelloWorld (wrong name: my/package/HelloWorld)\r\n            at java.lang.ClassLoader.defineClass1(Native Method)\r\n            at java.lang.ClassLoader.defineClass(ClassLoader.java:800)\r\n            at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n            at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)\r\n            at java.net.URLClassLoader.access$100(URLClassLoader.java:71)\r\n            at java.net.URLClassLoader$1.run(URLClassLoader.java:361)\r\n            at java.net.URLClassLoader$1.run(URLClassLoader.java:355)\r\n            at java.security.AccessController.doPrivileged(Native Method)\r\n            at java.net.URLClassLoader.findClass(URLClassLoader.java:354)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:425)\r\n            at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:358)\r\n            at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:482)\r\n\r\n**My HelloWorld.java**\r\n\r\n    package my.package;\r\n     \r\n    public class HelloWorld {\r\n     \r\n        public static void main(String[] args) {\r\n            System.out.println(&quot;Hello World!&quot;);\r\n        }\r\n    }\r\n\r\nWhat is the cause of this error?","title":"Java.lang.NoClassDefFoundError wrong name: how to solve this?","body":"<p>I have created a very simple <code>Java</code> application, and built it using <code>Gradle</code>.</p>\n\n<p>It is an application with just the Standard \"Hello World\" Java class (shown below).</p>\n\n<p>I have built it with Gradle successfully and my <code>.class</code> file has been created at the standard folder location: </p>\n\n<p><code>build&gt;classes&gt;main&gt;my&gt;package&gt;HelloWorld.class</code></p>\n\n<p>However, when I navigate to this folder and run in <code>cmd line</code>:</p>\n\n<pre><code>java HelloWorld\n</code></pre>\n\n<p>I get the following <strong>error:</strong></p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError: HelloWorld (wrong name: my/package/HelloWorld)\n        at java.lang.ClassLoader.defineClass1(Native Method)\n        at java.lang.ClassLoader.defineClass(ClassLoader.java:800)\n        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n        at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)\n        at java.net.URLClassLoader.access$100(URLClassLoader.java:71)\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:361)\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:425)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:358)\n        at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:482)\n</code></pre>\n\n<p><strong>My HelloWorld.java</strong></p>\n\n<pre><code>package my.package;\n\npublic class HelloWorld {\n\n    public static void main(String[] args) {\n        System.out.println(\"Hello World!\");\n    }\n}\n</code></pre>\n\n<p>What is the cause of this error?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":7777159,"reputation":1084,"user_id":6886283,"display_name":"priyanksriv"},"score":0,"creation_date":1671016412,"post_id":74797275,"comment_id":132004599,"body_markdown":"You can create a unique constraint in the `wallet` table, on the combined `userId` and `walletName` columns. If you try to add a duplicate wallet name for a given user, it&#39;ll throw an error.","body":"You can create a unique constraint in the <code>wallet</code> table, on the combined <code>userId</code> and <code>walletName</code> columns. If you try to add a duplicate wallet name for a given user, it&#39;ll throw an error."},{"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"score":0,"creation_date":1671016551,"post_id":74797275,"comment_id":132004641,"body_markdown":"You are missing an additional check for id.\nfindByWalletNameAndId\nhttps://www.baeldung.com/spring-data-derived-queries#multiple-condition-expressions","body":"You are missing an additional check for id. findByWalletNameAndId <a href=\"https://www.baeldung.com/spring-data-derived-queries#multiple-condition-expressions\" rel=\"nofollow noreferrer\">baeldung.com/&hellip;</a>"},{"owner":{"account_id":26021002,"reputation":33,"user_id":19728708,"display_name":"Stefan Jankovic"},"score":0,"creation_date":1671016590,"post_id":74797275,"comment_id":132004649,"body_markdown":"Any resource for that? I thought to create a unique column but you said `on the combined userId and walletName columns` so its confusing me.","body":"Any resource for that? I thought to create a unique column but you said <code>on the combined userId and walletName columns</code> so its confusing me."},{"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"score":0,"creation_date":1671016713,"post_id":74797275,"comment_id":132004685,"body_markdown":"https://www.baeldung.com/spring-data-derived-queries#multiple-condition-expressions","body":"<a href=\"https://www.baeldung.com/spring-data-derived-queries#multiple-condition-expressions\" rel=\"nofollow noreferrer\">baeldung.com/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6676840,"reputation":2917,"user_id":5151202,"display_name":"times29"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671017040,"creation_date":1671017040,"answer_id":74797531,"question_id":74797275,"body_markdown":"You need to include the `userId` in your query:\r\n```java\r\nfinal long userId = getUserId(); // get the currently authenticated user&#39;s id\r\nif (walletRepository.existsByUserIdAndWalletName(userId, walletRequest.getWalletName())) {\r\n    return ResponseEntity.badRequest()\r\n        .body(new MessageResponse(&quot;You already have wallet with that name, choose another!&quot;));\r\n}\r\n```","title":"How to check if one user have already column with same value","body":"<p>You need to include the <code>userId</code> in your query:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final long userId = getUserId(); // get the currently authenticated user's id\nif (walletRepository.existsByUserIdAndWalletName(userId, walletRequest.getWalletName())) {\n    return ResponseEntity.badRequest()\n        .body(new MessageResponse(&quot;You already have wallet with that name, choose another!&quot;));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671017405,"creation_date":1671017095,"answer_id":74797540,"question_id":74797275,"body_markdown":"    existsByUserIdAndWalletName(userId, walletName);\r\nor\r\n\r\n    findByUserIdAndWalletName(userId, walletName);\r\n\r\nIf id of the user and walletName is provided, it will check only for that user if it has that wallet name or not, and if in that situation returns something (true or result&gt;0), that will mean that for that specific user the wallet name is already taken.\r\n\r\nhttps://www.baeldung.com/spring-data-derived-queries#multiple-condition-expressions","title":"How to check if one user have already column with same value","body":"<pre><code>existsByUserIdAndWalletName(userId, walletName);\n</code></pre>\n<p>or</p>\n<pre><code>findByUserIdAndWalletName(userId, walletName);\n</code></pre>\n<p>If id of the user and walletName is provided, it will check only for that user if it has that wallet name or not, and if in that situation returns something (true or result&gt;0), that will mean that for that specific user the wallet name is already taken.</p>\n<p><a href=\"https://www.baeldung.com/spring-data-derived-queries#multiple-condition-expressions\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-data-derived-queries#multiple-condition-expressions</a></p>\n"}],"owner":{"account_id":26021002,"reputation":33,"user_id":19728708,"display_name":"Stefan Jankovic"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1671018797,"creation_date":1671015934,"question_id":74797275,"body_markdown":"I have a two tables: `User` and `Wallet`\r\n\r\n`User` have: `id`\r\n`Wallet` have: `userId`, `walletName`\r\n\r\nNow, I want to avoid that so user cant have two wallets with same name.\r\n\r\nI create something but it applies to all users, so if user with `id 1` create a wallet with name `walletSaving` no-one can create wallet with that name, while I want to avoid that, I want to create something to check whether the user with `id 1` have already wallet with that name.\r\n\r\nSo far I have this:\r\n\r\n    if (walletRepository.existsByWalletName(walletRequest.getWalletName())) {\r\n            return ResponseEntity.badRequest().body(new MessageResponse(&quot;You already have wallet with that name, choose another!&quot;));\r\n        }\r\n    \r\nAfter some help I tried with something like this:\r\n\r\n      @PostMapping(&quot;/user/{user_id}/wallets&quot;)\r\n    public ResponseEntity&lt;?&gt; createWallet(@PathVariable(value = &quot;user_id&quot;) Long user_id,\r\n                                          @RequestBody Wallet walletRequest, User user) {\r\n\r\n\r\n        if (walletRepository.existsByUserIdAndWalletName(user.getId(), walletRequest.getWalletName())) {\r\n            return ResponseEntity.badRequest()\r\n                    .body(new MessageResponse(&quot;You already have wallet with that name, choose another!&quot;));\r\n        }\r\n\r\nIts still creating wallets with same name.\r\n\r\nJust to provide more info.\r\n\r\n`User entity`\r\n\r\n        @Entity\r\n        @Table(name = &quot;users&quot;,\r\n           uniqueConstraints = {\r\n               @UniqueConstraint(columnNames = &quot;username&quot;),\r\n               @UniqueConstraint(columnNames = &quot;email&quot;)\r\n           })\r\n    public class User {\r\n      \r\n      @Id\r\n      @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n      private Long id;\r\n    \r\n      @NotEmpty\r\n      @Size(min = 3, max = 20)\r\n      private String username;\r\n    \r\n      @NotEmpty\r\n      @Size(max = 50)\r\n      @Email\r\n      private String email;\r\n    \r\n      @NotEmpty\r\n      @Size(min = 6)\r\n      private String password;\r\n    \r\n      @NotEmpty(message = &quot;Please, insert a first name&quot;)\r\n      private String firstName;\r\n    \r\n      @NotEmpty(message = &quot;Please, insert a last name&quot;)\r\n      private String lastName;\r\n    \r\n      @ManyToMany(fetch = FetchType.LAZY)\r\n      @JoinTable(name = &quot;user_roles&quot;, \r\n                 joinColumns = @JoinColumn(name = &quot;user_id&quot;),\r\n                 inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;))\r\n      private Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\r\n    \r\n      public User() {\r\n      }\r\n    \r\n      public User(String username, String email, String password, String firstName, String lastName) {\r\n        this.username = username;\r\n        this.email = email;\r\n        this.password = password;\r\n        this.firstName = firstName;\r\n        this.lastName = lastName;\r\n      }\r\n    \r\n      public Long getId() {\r\n        return id;\r\n      }\r\n    \r\n      public void setId(Long id) {\r\n        this.id = id;\r\n      }\r\n    \r\n      public String getUsername() {\r\n        return username;\r\n      }\r\n    \r\n      public void setUsername(String username) {\r\n        this.username = username;\r\n      }\r\n    \r\n      public String getEmail() {\r\n        return email;\r\n      }\r\n    \r\n      public void setEmail(String email) {\r\n        this.email = email;\r\n      }\r\n    \r\n      public String getPassword() {\r\n        return password;\r\n      }\r\n    \r\n      public void setPassword(String password) {\r\n        this.password = password;\r\n      }\r\n    \r\n      public String getFirstName() {\r\n        return firstName;\r\n      }\r\n    \r\n      public void setFirstName(String firstName) {\r\n        this.firstName = firstName;\r\n      }\r\n    \r\n      public String getLastName() {\r\n        return lastName;\r\n      }\r\n    \r\n      public void setLastName(String lastName) {\r\n        this.lastName = lastName;\r\n      }\r\n    \r\n      public Set&lt;Role&gt; getRoles() {\r\n        return roles;\r\n      }\r\n    \r\n      public void setRoles(Set&lt;Role&gt; roles) {\r\n        this.roles = roles;\r\n      }\r\n    }\r\n\r\n`Wallet entity`\r\n\r\n        @Entity\r\n        @Table(name = &quot;wallet&quot;)\r\n        public class Wallet {\r\n\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        @NotEmpty(message = &quot;Please, insert a wallet name&quot;)\r\n        private String walletName;\r\n    \r\n        private double initialBalance;\r\n    \r\n        @ManyToOne(fetch = FetchType.LAZY, optional = false)\r\n        @JoinColumn(name = &quot;user_id&quot;, nullable = false)\r\n        @OnDelete(action = OnDeleteAction.CASCADE)\r\n        @JsonIgnore\r\n        private User user;\r\n    \r\n        public Wallet() {\r\n        }\r\n    \r\n        public Wallet(String walletName, double initialBalance) {\r\n            this.walletName = walletName;\r\n            this.initialBalance = initialBalance;\r\n        }\r\n    \r\n        public Long getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(Long id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        public String getWalletName() {\r\n            return walletName;\r\n        }\r\n    \r\n        public void setWalletName(String walletName) {\r\n            this.walletName = walletName;\r\n        }\r\n    \r\n        public double getInitialBalance() {\r\n            return initialBalance;\r\n        }\r\n    \r\n        public void setInitialBalance(double initialBalance) {\r\n            this.initialBalance = initialBalance;\r\n        }\r\n    \r\n        public User getUser() {\r\n            return user;\r\n        }\r\n    \r\n        public void setUser(User user) {\r\n            this.user = user;\r\n        }\r\n    }\r\n\r\n\r\n`Wallet Repository`\r\n\r\n    boolean existsByUserIdAndWalletName(Long userId, String walletName);\r\n\r\n\r\n\r\n","title":"How to check if one user have already column with same value","body":"<p>I have a two tables: <code>User</code> and <code>Wallet</code></p>\n<p><code>User</code> have: <code>id</code>\n<code>Wallet</code> have: <code>userId</code>, <code>walletName</code></p>\n<p>Now, I want to avoid that so user cant have two wallets with same name.</p>\n<p>I create something but it applies to all users, so if user with <code>id 1</code> create a wallet with name <code>walletSaving</code> no-one can create wallet with that name, while I want to avoid that, I want to create something to check whether the user with <code>id 1</code> have already wallet with that name.</p>\n<p>So far I have this:</p>\n<pre><code>if (walletRepository.existsByWalletName(walletRequest.getWalletName())) {\n        return ResponseEntity.badRequest().body(new MessageResponse(&quot;You already have wallet with that name, choose another!&quot;));\n    }\n</code></pre>\n<p>After some help I tried with something like this:</p>\n<pre><code>  @PostMapping(&quot;/user/{user_id}/wallets&quot;)\npublic ResponseEntity&lt;?&gt; createWallet(@PathVariable(value = &quot;user_id&quot;) Long user_id,\n                                      @RequestBody Wallet walletRequest, User user) {\n\n\n    if (walletRepository.existsByUserIdAndWalletName(user.getId(), walletRequest.getWalletName())) {\n        return ResponseEntity.badRequest()\n                .body(new MessageResponse(&quot;You already have wallet with that name, choose another!&quot;));\n    }\n</code></pre>\n<p>Its still creating wallets with same name.</p>\n<p>Just to provide more info.</p>\n<p><code>User entity</code></p>\n<pre><code>    @Entity\n    @Table(name = &quot;users&quot;,\n       uniqueConstraints = {\n           @UniqueConstraint(columnNames = &quot;username&quot;),\n           @UniqueConstraint(columnNames = &quot;email&quot;)\n       })\npublic class User {\n  \n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  private Long id;\n\n  @NotEmpty\n  @Size(min = 3, max = 20)\n  private String username;\n\n  @NotEmpty\n  @Size(max = 50)\n  @Email\n  private String email;\n\n  @NotEmpty\n  @Size(min = 6)\n  private String password;\n\n  @NotEmpty(message = &quot;Please, insert a first name&quot;)\n  private String firstName;\n\n  @NotEmpty(message = &quot;Please, insert a last name&quot;)\n  private String lastName;\n\n  @ManyToMany(fetch = FetchType.LAZY)\n  @JoinTable(name = &quot;user_roles&quot;, \n             joinColumns = @JoinColumn(name = &quot;user_id&quot;),\n             inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;))\n  private Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\n\n  public User() {\n  }\n\n  public User(String username, String email, String password, String firstName, String lastName) {\n    this.username = username;\n    this.email = email;\n    this.password = password;\n    this.firstName = firstName;\n    this.lastName = lastName;\n  }\n\n  public Long getId() {\n    return id;\n  }\n\n  public void setId(Long id) {\n    this.id = id;\n  }\n\n  public String getUsername() {\n    return username;\n  }\n\n  public void setUsername(String username) {\n    this.username = username;\n  }\n\n  public String getEmail() {\n    return email;\n  }\n\n  public void setEmail(String email) {\n    this.email = email;\n  }\n\n  public String getPassword() {\n    return password;\n  }\n\n  public void setPassword(String password) {\n    this.password = password;\n  }\n\n  public String getFirstName() {\n    return firstName;\n  }\n\n  public void setFirstName(String firstName) {\n    this.firstName = firstName;\n  }\n\n  public String getLastName() {\n    return lastName;\n  }\n\n  public void setLastName(String lastName) {\n    this.lastName = lastName;\n  }\n\n  public Set&lt;Role&gt; getRoles() {\n    return roles;\n  }\n\n  public void setRoles(Set&lt;Role&gt; roles) {\n    this.roles = roles;\n  }\n}\n</code></pre>\n<p><code>Wallet entity</code></p>\n<pre><code>    @Entity\n    @Table(name = &quot;wallet&quot;)\n    public class Wallet {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @NotEmpty(message = &quot;Please, insert a wallet name&quot;)\n    private String walletName;\n\n    private double initialBalance;\n\n    @ManyToOne(fetch = FetchType.LAZY, optional = false)\n    @JoinColumn(name = &quot;user_id&quot;, nullable = false)\n    @OnDelete(action = OnDeleteAction.CASCADE)\n    @JsonIgnore\n    private User user;\n\n    public Wallet() {\n    }\n\n    public Wallet(String walletName, double initialBalance) {\n        this.walletName = walletName;\n        this.initialBalance = initialBalance;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getWalletName() {\n        return walletName;\n    }\n\n    public void setWalletName(String walletName) {\n        this.walletName = walletName;\n    }\n\n    public double getInitialBalance() {\n        return initialBalance;\n    }\n\n    public void setInitialBalance(double initialBalance) {\n        this.initialBalance = initialBalance;\n    }\n\n    public User getUser() {\n        return user;\n    }\n\n    public void setUser(User user) {\n        this.user = user;\n    }\n}\n</code></pre>\n<p><code>Wallet Repository</code></p>\n<pre><code>boolean existsByUserIdAndWalletName(Long userId, String walletName);\n</code></pre>\n"},{"tags":["java","caching","project-reactor","reactive","spring-mongodb"],"owner":{"account_id":20758614,"reputation":11,"user_id":15255478,"display_name":"Question_283"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671018603,"creation_date":1671018603,"question_id":74797846,"body_markdown":"My situation is:\r\n\r\n```\r\nclass Obj {\r\n  final List&lt;?&gt; section1;\r\n  final List&lt;?&gt; section2;\r\n}\r\n\r\nprivate final ReactiveRepo repository;\r\nprivate final AsyncLoadingCache&lt;UUID, Obj&gt; cache;\r\n\r\n...\r\ncache = Caffeine.newBuilder()\r\n        .expireAfterAccess(Duration.ofMinutes(15))\r\n        .&lt;UUID, Obj&gt;removalListener((uniqueId, obj, cause) -&gt; {\r\n          if (Obj!= null) {\r\n            repository.save(obj)\r\n                .timeout(Duration.ofSeconds(30))\r\n                .subscribe();\r\n          }\r\n        })\r\n        .buildAsync((uniqueId, executor) -&gt;\r\n            repository.findById(uniqueId)\r\n                .switchIfEmpty(\r\n                    Mono.just(\r\n                        ...\r\n                    ))\r\n                .toFuture()\r\n        );\r\n```\r\n\r\nSo, when REST API requests smth, I use the values from the cache and synchronized(required section). However, what is the probability that changes may occur with #save and my object will be saved incorrectly? How can I prevent this? \r\n\r\nDoes the ReactiveMongoRepository#save method make a separate copy of the object?\r\n\r\nAre there ways to do better caching in a reactive programming environment?","title":"Spring Reactive MongoDB and caching","body":"<p>My situation is:</p>\n<pre><code>class Obj {\n  final List&lt;?&gt; section1;\n  final List&lt;?&gt; section2;\n}\n\nprivate final ReactiveRepo repository;\nprivate final AsyncLoadingCache&lt;UUID, Obj&gt; cache;\n\n...\ncache = Caffeine.newBuilder()\n        .expireAfterAccess(Duration.ofMinutes(15))\n        .&lt;UUID, Obj&gt;removalListener((uniqueId, obj, cause) -&gt; {\n          if (Obj!= null) {\n            repository.save(obj)\n                .timeout(Duration.ofSeconds(30))\n                .subscribe();\n          }\n        })\n        .buildAsync((uniqueId, executor) -&gt;\n            repository.findById(uniqueId)\n                .switchIfEmpty(\n                    Mono.just(\n                        ...\n                    ))\n                .toFuture()\n        );\n</code></pre>\n<p>So, when REST API requests smth, I use the values from the cache and synchronized(required section). However, what is the probability that changes may occur with #save and my object will be saved incorrectly? How can I prevent this?</p>\n<p>Does the ReactiveMongoRepository#save method make a separate copy of the object?</p>\n<p>Are there ways to do better caching in a reactive programming environment?</p>\n"},{"tags":["java","spring-boot","jpa","spring-data-jpa","endpoint"],"comments":[{"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"score":0,"creation_date":1670916024,"post_id":74781101,"comment_id":131977503,"body_markdown":"What is the problem?","body":"What is the problem?"},{"owner":{"account_id":16245506,"reputation":11,"user_id":11930270,"display_name":"Christian jire"},"score":0,"creation_date":1670916191,"post_id":74781101,"comment_id":131977542,"body_markdown":"I&#39;m not sure on how to group the leads by the day created","body":"I&#39;m not sure on how to group the leads by the day created"},{"owner":{"account_id":16245506,"reputation":11,"user_id":11930270,"display_name":"Christian jire"},"score":0,"creation_date":1670916233,"post_id":74781101,"comment_id":131977548,"body_markdown":"so far i have grouped them by their status","body":"so far i have grouped them by their status"},{"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"score":0,"creation_date":1670917465,"post_id":74781101,"comment_id":131977841,"body_markdown":"https://stackoverflow.com/questions/13647422/check-if-the-calendar-date-is-a-sunday\n\nYou can use this link to do the **days of the week created** base comparison. PS: In the status-based comparison will there be a need to check other statuses if the status matches with any one of the expected statuses (eg; `UNQUALIFIED_OPEN`) ? If not you can go with `if and else if`.","body":"<a href=\"https://stackoverflow.com/questions/13647422/check-if-the-calendar-date-is-a-sunday\" title=\"check if the calendar date is a sunday\">stackoverflow.com/questions/13647422/&hellip;</a>  You can use this link to do the <b>days of the week created</b> base comparison. PS: In the status-based comparison will there be a need to check other statuses if the status matches with any one of the expected statuses (eg; <code>UNQUALIFIED_OPEN</code>) ? If not you can go with <code>if and else if</code>."},{"owner":{"account_id":16245506,"reputation":11,"user_id":11930270,"display_name":"Christian jire"},"score":0,"creation_date":1670921533,"post_id":74781101,"comment_id":131978965,"body_markdown":"yes there is a need to check other statuses so as to group the leads according to which status they are currently in","body":"yes there is a need to check other statuses so as to group the leads according to which status they are currently in"},{"owner":{"account_id":6676840,"reputation":2917,"user_id":5151202,"display_name":"times29"},"score":0,"creation_date":1672321612,"post_id":74781101,"comment_id":132266909,"body_markdown":"@Christianjire did you check my answer?","body":"@Christianjire did you check my answer?"}],"answers":[{"tags":[],"owner":{"account_id":6676840,"reputation":2917,"user_id":5151202,"display_name":"times29"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671018584,"creation_date":1671018584,"answer_id":74797837,"question_id":74781101,"body_markdown":"Check out the sample project I created for testing:\r\n```java\r\n public static void main(String[] args) {\r\n        final List&lt;Lead&gt; leads = Arrays.stream(Status.values()).flatMap(status -&gt;\r\n                        IntStream.range(0, 10)\r\n                                .mapToObj(i -&gt; new Lead(status, LocalDate.now().minusDays(RandomUtils.nextInt(0, 7)))))\r\n                .toList();\r\n\r\n        final Map&lt;Status, Map&lt;LocalDate, Long&gt;&gt; groupedByStatusAndDate =\r\n                leads.stream().collect(\r\n                        Collectors.groupingBy(Lead::getStatus,\r\n                                Collectors.groupingBy(Lead::getDate, Collectors.counting())));\r\n\r\n        groupedByStatusAndDate.forEach((status, map) -&gt; {\r\n            System.out.println(&quot;-- &quot; + status + &quot; --&quot;);\r\n            map.forEach((date, count) -&gt; System.out.println(date + &quot;: &quot; + count));\r\n        });\r\n    }\r\n\r\n    public static class Lead {\r\n\r\n       private final Status status;\r\n       private final LocalDate date;\r\n\r\n        public Lead(Status status, LocalDate date) {\r\n            this.status = status;\r\n            this.date = date;\r\n        }\r\n\r\n        public Status getStatus() {\r\n            return status;\r\n        }\r\n\r\n        public LocalDate getDate() {\r\n            return date;\r\n        }\r\n\r\n    }\r\n\r\n    public enum Status {\r\n        UNQUALIFIED_CLOSED,\r\n        UNQUALIFIED_OPEN,\r\n        NEW,\r\n        CLOSED,\r\n        REJECT,\r\n        APPROVED,\r\n        OPEN\r\n    }\r\n```\r\n\r\nIt outputs the following:\r\n```\r\n-- REJECT --\r\n2022-12-14: 3\r\n2022-12-12: 2\r\n2022-12-11: 2\r\n2022-12-09: 1\r\n2022-12-08: 2\r\n\r\n-- UNQUALIFIED_OPEN --\r\n2022-12-14: 2\r\n2022-12-12: 1\r\n2022-12-11: 2\r\n2022-12-10: 1\r\n2022-12-09: 2\r\n2022-12-08: 2\r\n\r\n-- CLOSED --\r\n2022-12-14: 2\r\n2022-12-13: 1\r\n2022-12-12: 1\r\n2022-12-11: 1\r\n2022-12-10: 2\r\n2022-12-09: 2\r\n2022-12-08: 1\r\n\r\n-- UNQUALIFIED_CLOSED --\r\n2022-12-13: 3\r\n2022-12-12: 2\r\n2022-12-10: 2\r\n2022-12-09: 3\r\n\r\n-- NEW --\r\n2022-12-14: 2\r\n2022-12-13: 3\r\n2022-12-12: 1\r\n2022-12-11: 1\r\n2022-12-10: 2\r\n2022-12-08: 1\r\n\r\n-- OPEN --\r\n2022-12-13: 2\r\n2022-12-12: 1\r\n2022-12-11: 3\r\n2022-12-10: 1\r\n2022-12-09: 2\r\n2022-12-08: 1\r\n\r\n-- APPROVED --\r\n2022-12-14: 1\r\n2022-12-13: 1\r\n2022-12-12: 2\r\n2022-12-11: 1\r\n2022-12-10: 2\r\n2022-12-09: 1\r\n2022-12-08: 2\r\n```\r\n\r\nMaybe a good read for you: [Baeldung guide to `groupingBy`][1]\r\n\r\n\r\n  [1]: https://www.baeldung.com/java-groupingby-collector","title":"i&#39;m trying to group the leads created by their status and group them by the days of the week created from Monday to Saturday using spring boot","body":"<p>Check out the sample project I created for testing:</p>\n<pre class=\"lang-java prettyprint-override\"><code> public static void main(String[] args) {\n        final List&lt;Lead&gt; leads = Arrays.stream(Status.values()).flatMap(status -&gt;\n                        IntStream.range(0, 10)\n                                .mapToObj(i -&gt; new Lead(status, LocalDate.now().minusDays(RandomUtils.nextInt(0, 7)))))\n                .toList();\n\n        final Map&lt;Status, Map&lt;LocalDate, Long&gt;&gt; groupedByStatusAndDate =\n                leads.stream().collect(\n                        Collectors.groupingBy(Lead::getStatus,\n                                Collectors.groupingBy(Lead::getDate, Collectors.counting())));\n\n        groupedByStatusAndDate.forEach((status, map) -&gt; {\n            System.out.println(&quot;-- &quot; + status + &quot; --&quot;);\n            map.forEach((date, count) -&gt; System.out.println(date + &quot;: &quot; + count));\n        });\n    }\n\n    public static class Lead {\n\n       private final Status status;\n       private final LocalDate date;\n\n        public Lead(Status status, LocalDate date) {\n            this.status = status;\n            this.date = date;\n        }\n\n        public Status getStatus() {\n            return status;\n        }\n\n        public LocalDate getDate() {\n            return date;\n        }\n\n    }\n\n    public enum Status {\n        UNQUALIFIED_CLOSED,\n        UNQUALIFIED_OPEN,\n        NEW,\n        CLOSED,\n        REJECT,\n        APPROVED,\n        OPEN\n    }\n</code></pre>\n<p>It outputs the following:</p>\n<pre><code>-- REJECT --\n2022-12-14: 3\n2022-12-12: 2\n2022-12-11: 2\n2022-12-09: 1\n2022-12-08: 2\n\n-- UNQUALIFIED_OPEN --\n2022-12-14: 2\n2022-12-12: 1\n2022-12-11: 2\n2022-12-10: 1\n2022-12-09: 2\n2022-12-08: 2\n\n-- CLOSED --\n2022-12-14: 2\n2022-12-13: 1\n2022-12-12: 1\n2022-12-11: 1\n2022-12-10: 2\n2022-12-09: 2\n2022-12-08: 1\n\n-- UNQUALIFIED_CLOSED --\n2022-12-13: 3\n2022-12-12: 2\n2022-12-10: 2\n2022-12-09: 3\n\n-- NEW --\n2022-12-14: 2\n2022-12-13: 3\n2022-12-12: 1\n2022-12-11: 1\n2022-12-10: 2\n2022-12-08: 1\n\n-- OPEN --\n2022-12-13: 2\n2022-12-12: 1\n2022-12-11: 3\n2022-12-10: 1\n2022-12-09: 2\n2022-12-08: 1\n\n-- APPROVED --\n2022-12-14: 1\n2022-12-13: 1\n2022-12-12: 2\n2022-12-11: 1\n2022-12-10: 2\n2022-12-09: 1\n2022-12-08: 2\n</code></pre>\n<p>Maybe a good read for you: <a href=\"https://www.baeldung.com/java-groupingby-collector\" rel=\"nofollow noreferrer\">Baeldung guide to <code>groupingBy</code></a></p>\n"}],"owner":{"account_id":16245506,"reputation":11,"user_id":11930270,"display_name":"Christian jire"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1671018584,"creation_date":1670915291,"question_id":74781101,"body_markdown":"I&#39;m supposed to get the leads created from Microsoft SQL server database by their status and the day they are created to display the information on a graph that summarizes the leads created from Monday to Saturday. below is the my code and a screenshot of the graph I&#39;m using to display the data\r\n\r\n    @Override\r\n    public Response&lt;Map&lt;String, Collection&lt;LeadsDashboard&gt;&gt;getLeadsDashboards(){\r\n    \tResponse&lt;Map&lt;String, Collection&lt;LeadsDashboard&gt;&gt;response = new Response&lt;&gt;();\r\n    \r\n        User user = userRepository.getById(auditorAware.getCurrentAuditor().get().getId());\r\n        List&lt;Leadleads = leadRepository.findAll(user.getCompany().getId());\r\n        Collection&lt;LeadsDashboardunqualifiedClosed = new ArrayList&lt;&gt;();\r\n        int[] unqualifiedClosedi = new int[6];\r\n        AtomicInteger counter = new AtomicInteger();\r\n        Collection&lt;LeadsDashboardunqualifiedOpen = new ArrayList&lt;&gt;();\r\n        int[] unqualifiedOpeni = new int[6];\r\n        AtomicInteger counter2 = new AtomicInteger();\r\n        Collection&lt;LeadsDashboardnewLeads = new ArrayList&lt;&gt;();\r\n        int[] newLeadsi = new int[6];\r\n        AtomicInteger counter3 = new AtomicInteger();\r\n        Collection&lt;LeadsDashboardclosedLeads = new ArrayList&lt;&gt;();\r\n        int[] closedLeadi = new int[6];\r\n        AtomicInteger counter4 = new AtomicInteger();\r\n        Collection&lt;LeadsDashboardrejectedLeads = new ArrayList&lt;&gt;();\r\n        int[] rejectedLeadsi = new int[6];\r\n        AtomicInteger counter5 = new AtomicInteger();\r\n        Collection&lt;LeadsDashboardapprovedLeads = new ArrayList&lt;&gt;();\r\n        int[] approvedLeadsi = new int[6];\r\n        AtomicInteger counter6 = new AtomicInteger();\r\n        Collection&lt;LeadsDashboardopenLeads = new ArrayList&lt;&gt;();\r\n        int[] openLeadsi = new int[6];\r\n        AtomicInteger counter7 = new AtomicInteger();\r\n        \r\n        leads.forEach(lead -&gt;{\r\n            LeadsDashboard leadsDashboard = new LeadsDashboard();\r\n            leadsDashboard.setStatus(lead.getStatus());\r\n            if(lead.getStatus().equals(Statuses.UNQUALIFIED_CLOSED.getStatus())){\r\n                // leadsDashboard.setCount(unqualifiedClosed.size() + 1);\r\n                unqualifiedClosedi[counter.getAndIncrement()] = unqualifiedClosedi[counter.get()] + 1;\r\n                leadsDashboard.setCount(unqualifiedClosedi);\r\n                unqualifiedClosed.add(leadsDashboard);\r\n            }\r\n            if(lead.getStatus().equals(Statuses.UNQUALIFIED_OPEN.getStatus())){\r\n\t\t\t\t// leadsDashboard.setCount(unqualifiedOpen.size() + 1);\r\n                unqualifiedOpeni[counter2.getAndIncrement()] = unqualifiedOpeni[counter2.get()] + 1;\r\n                leadsDashboard.setCount(unqualifiedOpeni);\r\n                unqualifiedOpen.add(leadsDashboard);\r\n            }\r\n            if(lead.getStatus().equals(Statuses.NEW.getStatus())){\r\n\t\t\t\t// leadsDashboard.setCount(newLeads.size() + 1);\r\n                newLeadsi[counter3.getAndIncrement()] = newLeadsi[counter3.get()] + 1;\r\n                leadsDashboard.setCount(newLeadsi);\r\n                newLeads.add(leadsDashboard);\r\n            }\r\n            if(lead.getStatus().equals(Statuses.CLOSED.getStatus())){\r\n\t\t\t\t// leadsDashboard.setCount(closedLeads.size() + 1);\r\n                closedLeadi[counter4.getAndIncrement()] = closedLeadi[counter2.get()] + 1;\r\n                leadsDashboard.setCount(closedLeadi);\r\n                closedLeads.add(leadsDashboard);\r\n            }\r\n            if(lead.getStatus().equals(Statuses.REJECT.getStatus())){\r\n\t\t\t\t//  leadsDashboard.setCount(rejectedLeads.size() + 1);\r\n                rejectedLeadsi[counter5.getAndIncrement()] = rejectedLeadsi[counter5.get()] + 1;\r\n                leadsDashboard.setCount(rejectedLeadsi);\r\n                rejectedLeads.add(leadsDashboard);\r\n            }\r\n            if(lead.getStatus().equals(Statuses.APPROVED.getStatus())){\r\n\t\t\t\t//  leadsDashboard.setCount(approvedLeads.size() + 1);\r\n                approvedLeadsi[counter6.getAndIncrement()] = approvedLeadsi[counter6.get()] + 1;\r\n                leadsDashboard.setCount(approvedLeadsi);\r\n                approvedLeads.add(leadsDashboard);\r\n            }\r\n            if(lead.getStatus().equals(Statuses.OPEN.getStatus())){\r\n\t\t\t\t//  leadsDashboard.setCount(qualifiedLeads.size() + 1);\r\n                openLeadsi[counter7.getAndIncrement()] = openLeadsi[counter7.get()] + 1;\r\n                leadsDashboard.setCount(openLeadsi);\r\n                openLeads.add(leadsDashboard);\r\n            }\r\n        });\r\n\r\n        Map&lt;String, Collection&lt;LeadsDashboard&gt;resMap = new HashMap&lt;&gt;();\r\n        resMap.put(&quot;approvedLeads&quot;, approvedLeads);\r\n        resMap.put(&quot;rejectedLeads&quot;, rejectedLeads);\r\n        resMap.put(&quot;closedLeads&quot;, closedLeads);\r\n        resMap.put(&quot;newLeads&quot;, newLeads);\r\n        resMap.put(&quot;openLeads&quot;, openLeads);\r\n        resMap.put(&quot;unqualifiedOpen&quot;, unqualifiedOpen);\r\n        resMap.put(&quot;unqualifiedClose&quot;, unqualifiedClosed);\r\n\r\n        response.setBody(resMap);\r\n\r\n        return response;\r\n    }\r\n\r\n[graph that is supposed to display the leads created weekly](https://i.stack.imgur.com/HFezb.jpg)","title":"i&#39;m trying to group the leads created by their status and group them by the days of the week created from Monday to Saturday using spring boot","body":"<p>I'm supposed to get the leads created from Microsoft SQL server database by their status and the day they are created to display the information on a graph that summarizes the leads created from Monday to Saturday. below is the my code and a screenshot of the graph I'm using to display the data</p>\n<pre><code>@Override\npublic Response&lt;Map&lt;String, Collection&lt;LeadsDashboard&gt;&gt;getLeadsDashboards(){\n    Response&lt;Map&lt;String, Collection&lt;LeadsDashboard&gt;&gt;response = new Response&lt;&gt;();\n\n    User user = userRepository.getById(auditorAware.getCurrentAuditor().get().getId());\n    List&lt;Leadleads = leadRepository.findAll(user.getCompany().getId());\n    Collection&lt;LeadsDashboardunqualifiedClosed = new ArrayList&lt;&gt;();\n    int[] unqualifiedClosedi = new int[6];\n    AtomicInteger counter = new AtomicInteger();\n    Collection&lt;LeadsDashboardunqualifiedOpen = new ArrayList&lt;&gt;();\n    int[] unqualifiedOpeni = new int[6];\n    AtomicInteger counter2 = new AtomicInteger();\n    Collection&lt;LeadsDashboardnewLeads = new ArrayList&lt;&gt;();\n    int[] newLeadsi = new int[6];\n    AtomicInteger counter3 = new AtomicInteger();\n    Collection&lt;LeadsDashboardclosedLeads = new ArrayList&lt;&gt;();\n    int[] closedLeadi = new int[6];\n    AtomicInteger counter4 = new AtomicInteger();\n    Collection&lt;LeadsDashboardrejectedLeads = new ArrayList&lt;&gt;();\n    int[] rejectedLeadsi = new int[6];\n    AtomicInteger counter5 = new AtomicInteger();\n    Collection&lt;LeadsDashboardapprovedLeads = new ArrayList&lt;&gt;();\n    int[] approvedLeadsi = new int[6];\n    AtomicInteger counter6 = new AtomicInteger();\n    Collection&lt;LeadsDashboardopenLeads = new ArrayList&lt;&gt;();\n    int[] openLeadsi = new int[6];\n    AtomicInteger counter7 = new AtomicInteger();\n    \n    leads.forEach(lead -&gt;{\n        LeadsDashboard leadsDashboard = new LeadsDashboard();\n        leadsDashboard.setStatus(lead.getStatus());\n        if(lead.getStatus().equals(Statuses.UNQUALIFIED_CLOSED.getStatus())){\n            // leadsDashboard.setCount(unqualifiedClosed.size() + 1);\n            unqualifiedClosedi[counter.getAndIncrement()] = unqualifiedClosedi[counter.get()] + 1;\n            leadsDashboard.setCount(unqualifiedClosedi);\n            unqualifiedClosed.add(leadsDashboard);\n        }\n        if(lead.getStatus().equals(Statuses.UNQUALIFIED_OPEN.getStatus())){\n            // leadsDashboard.setCount(unqualifiedOpen.size() + 1);\n            unqualifiedOpeni[counter2.getAndIncrement()] = unqualifiedOpeni[counter2.get()] + 1;\n            leadsDashboard.setCount(unqualifiedOpeni);\n            unqualifiedOpen.add(leadsDashboard);\n        }\n        if(lead.getStatus().equals(Statuses.NEW.getStatus())){\n            // leadsDashboard.setCount(newLeads.size() + 1);\n            newLeadsi[counter3.getAndIncrement()] = newLeadsi[counter3.get()] + 1;\n            leadsDashboard.setCount(newLeadsi);\n            newLeads.add(leadsDashboard);\n        }\n        if(lead.getStatus().equals(Statuses.CLOSED.getStatus())){\n            // leadsDashboard.setCount(closedLeads.size() + 1);\n            closedLeadi[counter4.getAndIncrement()] = closedLeadi[counter2.get()] + 1;\n            leadsDashboard.setCount(closedLeadi);\n            closedLeads.add(leadsDashboard);\n        }\n        if(lead.getStatus().equals(Statuses.REJECT.getStatus())){\n            //  leadsDashboard.setCount(rejectedLeads.size() + 1);\n            rejectedLeadsi[counter5.getAndIncrement()] = rejectedLeadsi[counter5.get()] + 1;\n            leadsDashboard.setCount(rejectedLeadsi);\n            rejectedLeads.add(leadsDashboard);\n        }\n        if(lead.getStatus().equals(Statuses.APPROVED.getStatus())){\n            //  leadsDashboard.setCount(approvedLeads.size() + 1);\n            approvedLeadsi[counter6.getAndIncrement()] = approvedLeadsi[counter6.get()] + 1;\n            leadsDashboard.setCount(approvedLeadsi);\n            approvedLeads.add(leadsDashboard);\n        }\n        if(lead.getStatus().equals(Statuses.OPEN.getStatus())){\n            //  leadsDashboard.setCount(qualifiedLeads.size() + 1);\n            openLeadsi[counter7.getAndIncrement()] = openLeadsi[counter7.get()] + 1;\n            leadsDashboard.setCount(openLeadsi);\n            openLeads.add(leadsDashboard);\n        }\n    });\n\n    Map&lt;String, Collection&lt;LeadsDashboard&gt;resMap = new HashMap&lt;&gt;();\n    resMap.put(&quot;approvedLeads&quot;, approvedLeads);\n    resMap.put(&quot;rejectedLeads&quot;, rejectedLeads);\n    resMap.put(&quot;closedLeads&quot;, closedLeads);\n    resMap.put(&quot;newLeads&quot;, newLeads);\n    resMap.put(&quot;openLeads&quot;, openLeads);\n    resMap.put(&quot;unqualifiedOpen&quot;, unqualifiedOpen);\n    resMap.put(&quot;unqualifiedClose&quot;, unqualifiedClosed);\n\n    response.setBody(resMap);\n\n    return response;\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/HFezb.jpg\" rel=\"nofollow noreferrer\">graph that is supposed to display the leads created weekly</a></p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":1,"creation_date":1671018673,"post_id":74797830,"comment_id":132005390,"body_markdown":"You forgot to include your attempt at solving this problem.","body":"You forgot to include your attempt at solving this problem."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1671028001,"post_id":74797830,"comment_id":132008853,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":27250402,"reputation":1,"user_id":20774975,"display_name":"Abinash SK"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671018555,"creation_date":1671018555,"question_id":74797830,"body_markdown":"I am creating an app for office purpose and I want to store the latitude and longitude into a file.\r\nSo for the user i have implemented &quot;Navigation Drawer Activity&quot; in the navigation drawer activity home fragment is present in that home fragment I have a toggle button which act as &quot;Check-In&quot; and &quot;Check-Out&quot; Button. \r\nIf the user press the check-out toggle button there should be a text file create in device or in firebase database which contain the latitude and longitude.\r\n\r\nThe problem is I cant able to create text file in fragment.\r\nplease give me some solution.\r\n\r\nI am expecting to create a file in fragment or in firebase database.","title":"How to create Text File from fragment using toggle button","body":"<p>I am creating an app for office purpose and I want to store the latitude and longitude into a file.\nSo for the user i have implemented &quot;Navigation Drawer Activity&quot; in the navigation drawer activity home fragment is present in that home fragment I have a toggle button which act as &quot;Check-In&quot; and &quot;Check-Out&quot; Button.\nIf the user press the check-out toggle button there should be a text file create in device or in firebase database which contain the latitude and longitude.</p>\n<p>The problem is I cant able to create text file in fragment.\nplease give me some solution.</p>\n<p>I am expecting to create a file in fragment or in firebase database.</p>\n"},{"tags":["java","utf-8","character-encoding","thymeleaf"],"comments":[{"owner":{"account_id":18655,"reputation":4922,"user_id":42962,"accept_rate":71,"display_name":"hooknc"},"score":1,"creation_date":1670366054,"post_id":74709361,"comment_id":131859383,"body_markdown":"Not sure this will work or not, but have you tried changing your `TemplateMode` to be xml?  `resolver.setTemplateMode(TemplateMode. XML);` or `resolver.setTemplateMode(TemplateMode. VALIDXML);`","body":"Not sure this will work or not, but have you tried changing your <code>TemplateMode</code> to be xml?  <code>resolver.setTemplateMode(TemplateMode. XML);</code> or <code>resolver.setTemplateMode(TemplateMode. VALIDXML);</code>"},{"owner":{"account_id":326318,"reputation":7188,"user_id":648026,"accept_rate":79,"display_name":"JavaSheriff"},"score":0,"creation_date":1670366288,"post_id":74709361,"comment_id":131859448,"body_markdown":"Thank you, Yes, I tried...  it doesn&#39;t matter.","body":"Thank you, Yes, I tried...  it doesn&#39;t matter."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1670381977,"post_id":74709361,"comment_id":131862083,"body_markdown":"Not an answer - just an observation: The XML at the start of the question is not valid. There is a non-breaking space in the prolog here: `&lt;?xml&#160;version`. I don&#39;t think that has anything to do with the problem, though. (I noticed when I validated the XML, copy-pasted from the question.) If there is one NBSP, there may be more.","body":"Not an answer - just an observation: The XML at the start of the question is not valid. There is a non-breaking space in the prolog here: <code>&lt;?xml version</code>. I don&#39;t think that has anything to do with the problem, though. (I noticed when I validated the XML, copy-pasted from the question.) If there is one NBSP, there may be more."},{"owner":{"account_id":5152799,"reputation":19367,"user_id":4126893,"display_name":"Metroids"},"score":1,"creation_date":1670889814,"post_id":74709361,"comment_id":131973718,"body_markdown":"I mean, that output is valid and correct XML (if you view the file in something that parses the xml like a browers or whatever), but I do agree that it&#39;s weird to encode everything like that if it doesn&#39;t have to.  Does whatever you are using the read the output not work with those encoded characters?","body":"I mean, that output is valid and correct XML (if you view the file in something that parses the xml like a browers or whatever), but I do agree that it&#39;s weird to encode everything like that if it doesn&#39;t have to.  Does whatever you are using the read the output not work with those encoded characters?"}],"answers":[{"tags":[],"owner":{"account_id":903826,"reputation":646,"user_id":939217,"display_name":"Mostafa Nazari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671018472,"creation_date":1670862761,"answer_id":74774294,"question_id":74709361,"body_markdown":"add this:\r\n\r\n    resolver.setForceTemplateMode(true);\r\n\r\nnote: there is a feature named `smart template mode resolution based on template resource name` and it is active by default","title":"thymeleaf UTF8 xml bug?","body":"<p>add this:</p>\n<pre><code>resolver.setForceTemplateMode(true);\n</code></pre>\n<p>note: there is a feature named <code>smart template mode resolution based on template resource name</code> and it is active by default</p>\n"},{"tags":[],"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1671014227,"creation_date":1670976013,"answer_id":74792219,"question_id":74709361,"body_markdown":"It is not a bug, but the programmed behavior.\r\n\r\nThe [`setTemplateMode` documentation](https://www.thymeleaf.org/apidocs/thymeleaf/3.1.0.RELEASE/org/thymeleaf/templateresolver/AbstractConfigurableTemplateResolver.html#setTemplateMode(org.thymeleaf.templatemode.TemplateMode)) indicates:\r\n\r\n&gt; Sets the template mode to be applied to templates resolved by this \r\n&gt; resolver.\r\n&gt;\r\n&gt; If template mode patterns (see `setHtmlTemplateModePatterns(Set)`, \r\n&gt; `setXmlTemplateModePatterns(Set)`, etc.) are also set, they have higher \r\n&gt; priority than the template mode set here (this would act as a default).\r\n&gt;\r\n&gt; Note that this template mode also may not be applied if the template \r\n&gt; resource name ends in a known file name suffix: `.html, .htm, .xhtml, .xml, \r\n&gt; .js, .json, .css, .rss, .atom, .txt`. If this behaviour needs to be \r\n&gt; overridden so that template name is always applied, the \r\n&gt; `setForceTemplateMode(boolean)` will need to be set.\r\n\r\nNote the note that indicates that for a well known file name suffix the template mode will be overwritten. That explains the behavior you are facing: when you use `test_template.xml` Thymeleaf will no longer use `TemplateMode.TEXT` as configured but `TemplateMode.XML` instead, and the text will be then [escaped](https://github.com/thymeleaf/thymeleaf/blob/39b945b881ffed403ddf37f2c2d022db5b1d2724/lib/thymeleaf/src/main/java/org/thymeleaf/standard/processor/StandardTextTagProcessor.java#L113-L131).\r\n\r\nAs advised in the aforementioned javadoc, you can force Thymeleaf to obbey the configured `TemplateMode` and your desired behavior using [`setForceTemplateMode`](https://www.thymeleaf.org/apidocs/thymeleaf/3.1.0.RELEASE/org/thymeleaf/templateresolver/AbstractConfigurableTemplateResolver.html#setForceTemplateMode(boolean)):\r\n\r\n```java\r\npackage com.xerox;\r\n\r\nimport java.io.BufferedWriter;\r\nimport java.io.FileOutputStream;\r\nimport java.io.OutputStreamWriter;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.time.LocalDateTime;\r\n\r\nimport org.thymeleaf.TemplateEngine;\r\nimport org.thymeleaf.context.Context;\r\nimport org.thymeleaf.templatemode.TemplateMode;\r\nimport org.thymeleaf.templateresolver.ClassLoaderTemplateResolver;\r\n\r\npublic class TestThymeleafUTF8 {\r\n  public static void main(String[] args) {\r\n    try {\r\n      TemplateEngine templateEngine = new TemplateEngine();\r\n      ClassLoaderTemplateResolver resolver = new ClassLoaderTemplateResolver();\r\n      resolver.setCharacterEncoding(&quot;UTF-8&quot;);\r\n      resolver.setTemplateMode(TemplateMode.TEXT); // TemplateMode.HTML should work as well\r\n      resolver.setForceTemplateMode(true);\r\n      templateEngine.setTemplateResolver(resolver);\r\n      Context ct = new Context();\r\n      ct.setVariable(&quot;TEST_AR&quot;, &quot;كتابة مفهومة من قبل اغل&quot;);\r\n      ct.setVariable(&quot;TEST_HE&quot;, &quot;ניסיון&quot;);\r\n      ct.setVariable(&quot;TEST_CH&quot;, &quot;王明是中国人。&quot;);\r\n      ct.setVariable(&quot;currentDate&quot;, LocalDateTime.now().toString());\r\n      BufferedWriter out = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(&quot;test_output.xml&quot;), StandardCharsets.UTF_8));\r\n\r\n      templateEngine.process(&quot;test_template.xml&quot;, ct,out);\r\n    } catch (Exception e) {\r\n      System.out.println(e);\r\n    }\r\n  }\r\n}\r\n\r\n```","title":"thymeleaf UTF8 xml bug?","body":"<p>It is not a bug, but the programmed behavior.</p>\n<p>The <a href=\"https://www.thymeleaf.org/apidocs/thymeleaf/3.1.0.RELEASE/org/thymeleaf/templateresolver/AbstractConfigurableTemplateResolver.html#setTemplateMode(org.thymeleaf.templatemode.TemplateMode)\" rel=\"nofollow noreferrer\"><code>setTemplateMode</code> documentation</a> indicates:</p>\n<blockquote>\n<p>Sets the template mode to be applied to templates resolved by this\nresolver.</p>\n<p>If template mode patterns (see <code>setHtmlTemplateModePatterns(Set)</code>,\n<code>setXmlTemplateModePatterns(Set)</code>, etc.) are also set, they have higher\npriority than the template mode set here (this would act as a default).</p>\n<p>Note that this template mode also may not be applied if the template\nresource name ends in a known file name suffix: <code>.html, .htm, .xhtml, .xml,  .js, .json, .css, .rss, .atom, .txt</code>. If this behaviour needs to be\noverridden so that template name is always applied, the\n<code>setForceTemplateMode(boolean)</code> will need to be set.</p>\n</blockquote>\n<p>Note the note that indicates that for a well known file name suffix the template mode will be overwritten. That explains the behavior you are facing: when you use <code>test_template.xml</code> Thymeleaf will no longer use <code>TemplateMode.TEXT</code> as configured but <code>TemplateMode.XML</code> instead, and the text will be then <a href=\"https://github.com/thymeleaf/thymeleaf/blob/39b945b881ffed403ddf37f2c2d022db5b1d2724/lib/thymeleaf/src/main/java/org/thymeleaf/standard/processor/StandardTextTagProcessor.java#L113-L131\" rel=\"nofollow noreferrer\">escaped</a>.</p>\n<p>As advised in the aforementioned javadoc, you can force Thymeleaf to obbey the configured <code>TemplateMode</code> and your desired behavior using <a href=\"https://www.thymeleaf.org/apidocs/thymeleaf/3.1.0.RELEASE/org/thymeleaf/templateresolver/AbstractConfigurableTemplateResolver.html#setForceTemplateMode(boolean)\" rel=\"nofollow noreferrer\"><code>setForceTemplateMode</code></a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.xerox;\n\nimport java.io.BufferedWriter;\nimport java.io.FileOutputStream;\nimport java.io.OutputStreamWriter;\nimport java.nio.charset.StandardCharsets;\nimport java.time.LocalDateTime;\n\nimport org.thymeleaf.TemplateEngine;\nimport org.thymeleaf.context.Context;\nimport org.thymeleaf.templatemode.TemplateMode;\nimport org.thymeleaf.templateresolver.ClassLoaderTemplateResolver;\n\npublic class TestThymeleafUTF8 {\n  public static void main(String[] args) {\n    try {\n      TemplateEngine templateEngine = new TemplateEngine();\n      ClassLoaderTemplateResolver resolver = new ClassLoaderTemplateResolver();\n      resolver.setCharacterEncoding(&quot;UTF-8&quot;);\n      resolver.setTemplateMode(TemplateMode.TEXT); // TemplateMode.HTML should work as well\n      resolver.setForceTemplateMode(true);\n      templateEngine.setTemplateResolver(resolver);\n      Context ct = new Context();\n      ct.setVariable(&quot;TEST_AR&quot;, &quot;كتابة مفهومة من قبل اغل&quot;);\n      ct.setVariable(&quot;TEST_HE&quot;, &quot;ניסיון&quot;);\n      ct.setVariable(&quot;TEST_CH&quot;, &quot;王明是中国人。&quot;);\n      ct.setVariable(&quot;currentDate&quot;, LocalDateTime.now().toString());\n      BufferedWriter out = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(&quot;test_output.xml&quot;), StandardCharsets.UTF_8));\n\n      templateEngine.process(&quot;test_template.xml&quot;, ct,out);\n    } catch (Exception e) {\n      System.out.println(e);\n    }\n  }\n}\n\n</code></pre>\n"}],"owner":{"account_id":326318,"reputation":7188,"user_id":648026,"accept_rate":79,"display_name":"JavaSheriff"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":374,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":74792219,"answer_count":2,"score":3,"last_activity_date":1671018472,"creation_date":1670363088,"question_id":74709361,"body_markdown":"I am doing a very simple replacement on an XML template below:\r\n\r\n    &lt;?xml&#160;version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#160;&#160;\r\n    &lt;note&gt;&#160;&#160;\r\n    \t&lt;to&gt;\r\n    \t\tARABIC: [[${TEST_AR}]]\r\n    \t\tHEBREW: [[${TEST_HE}]]\t\r\n    \t\tCHINESE (MANDARIN): [[${TEST_CH}]]\r\n    \t&lt;/to&gt;\r\n    &lt;/note&gt;\r\n\r\nBut it seems like thymeleaf has a UTF8 xml bug, Or Im missing something.  \r\nHere is what I tried so far:\r\n\r\n - Template is coded in UTF-8    \r\n - Java source code is saved in UTF-8  \r\n - encoding for OutputStreamWriter is UTF-8   \r\n - ClassLoaderTemplateResolver is set to UTF-8    Maven is set to UTF-8\r\n - project.build.sourceEncoding UTF-8    \r\n - coded the XML as UTF-8  &lt;?xml&#160;version=&quot;1.0&quot;&#160;encoding=&quot;UTF-8&quot; ?&gt;\r\n\r\n[![java encoding][1]][1]\r\n\r\nSeems like Thymeleaf wont write UTF-8 text correctly to XML.  \r\nThe code example below work faultlessly (except Chinese not sure why but its not import atm) as long as I am opening a **text** template (just the file extension) .    \r\n\r\nIf I use this line , It works ok and output UTF-8 no Issues.\r\n\r\n     templateEngine.process(&quot;test_template.txt&quot;, ct,out);\r\n\r\nworks great:\r\n\r\n    &lt;?xml&#160;version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#160;&#160;\r\n    &lt;note&gt;&#160;&#160;\r\n    \t&lt;to&gt;\r\n    \t\tARABIC: كتابة مفهومة من قبل اغل\r\n    \t\tHEBREW: ניסיון\t\r\n    \t\tCHINESE (MANDARIN): \r\n    \t&lt;/to&gt;\r\n    &lt;/note&gt;\r\n\r\nOnce I modify this line (and rename the template accordingly)  to this:\r\n\r\n    templateEngine.process(&quot;test_template.xml&quot;, ct,out);\r\nthymeleaf will crap out the Uincode fonts and export them as HEX representation.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#160;\r\n    &lt;note&gt;&#160;&#160;\r\n    \t&lt;to&gt;\r\n    \t\tARABIC: &amp;#x643;&amp;#x62a;&amp;#x627;&amp;#x628;&amp;#x629; &amp;#x645;&amp;#x641;&amp;#x647;&amp;#x648;&amp;#x645;&amp;#x629; &amp;#x645;&amp;#x646; &amp;#x642;&amp;#x628;&amp;#x644; &amp;#x627;&amp;#x63a;&amp;#x644;\r\n    \t\tHEBREW: &amp;#x5e0;&amp;#x5d9;&amp;#x5e1;&amp;#x5d9;&amp;#x5d5;&amp;#x5df;\t\r\n    \t\tCHINESE (MANDARIN): \r\n    \t&lt;/to&gt;\r\n    &lt;/note&gt;\r\n\r\n\r\n\r\n\r\nFull isolated working example just create the template (test_template.txt) and put it under src/main/resources\r\n\r\n\r\n\r\n    package com.xerox;\r\n    import java.io.BufferedWriter;\r\n    import java.io.FileOutputStream;\r\n    import java.io.OutputStreamWriter;\r\n    import java.nio.charset.StandardCharsets;\r\n    import java.time.LocalDateTime;\r\n    \r\n    import org.thymeleaf.TemplateEngine;\r\n    import org.thymeleaf.context.Context;\r\n    import org.thymeleaf.templatemode.TemplateMode;\r\n    import org.thymeleaf.templateresolver.ClassLoaderTemplateResolver;\r\n    \r\n    public class TestThymeleafUTF8 {\r\n    \tpublic static void main(String[] args) {\r\n    \t\ttry {\r\n    \t\t       TemplateEngine templateEngine = new TemplateEngine();\r\n    \t\t        ClassLoaderTemplateResolver resolver = new ClassLoaderTemplateResolver();\r\n    \t\t        resolver.setCharacterEncoding(&quot;UTF-8&quot;);     \r\n    \t\t        resolver.setTemplateMode(TemplateMode.TEXT);\r\n    \t\t        templateEngine.setTemplateResolver(resolver);\r\n    \t\t        Context ct = new Context();\t\t        \r\n    \t\t        ct.setVariable(&quot;TEST_AR&quot;, &quot;كتابة مفهومة من قبل اغل&quot;);\r\n    \t\t        ct.setVariable(&quot;TEST_HE&quot;, &quot;ניסיון&quot;);\r\n    \t\t        ct.setVariable(&quot;TEST_CN&quot;, &quot;王明是中国人。&quot;);\r\n    \t\t        ct.setVariable(&quot;currentDate&quot;, LocalDateTime.now().toString());\r\n    \t\t        BufferedWriter out = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(&quot;test_output.txt&quot;), StandardCharsets.UTF_8));\r\n    \t\t\t\r\n    \t\t        templateEngine.process(&quot;test_template.txt&quot;, ct,out);\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tSystem.out.println(e);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nPom.xml:\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;com.xerox&lt;/groupId&gt;\r\n      &lt;artifactId&gt;testUTF&lt;/artifactId&gt;\r\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n      &lt;name&gt;testUTF&lt;/name&gt;\r\n      &lt;description&gt;thymeleaf testUTF&lt;/description&gt;\r\n      \r\n      \t&lt;properties&gt;\r\n    \t\t    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n        \t\t&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n        \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t&lt;/properties&gt;\t\r\n      &lt;dependencies&gt;\r\n      \t&lt;dependency&gt;\r\n      \t\t&lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n      \t\t&lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\r\n      \t\t&lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\r\n      \t&lt;/dependency&gt;\r\n    \r\n      &lt;/dependencies&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Al3oR.png\r\n  [2]: https://i.stack.imgur.com/a8Ye2.png\r\n  [3]: https://i.stack.imgur.com/7XnKU.png","title":"thymeleaf UTF8 xml bug?","body":"<p>I am doing a very simple replacement on an XML template below:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;  \n&lt;note&gt;  \n    &lt;to&gt;\n        ARABIC: [[${TEST_AR}]]\n        HEBREW: [[${TEST_HE}]]  \n        CHINESE (MANDARIN): [[${TEST_CH}]]\n    &lt;/to&gt;\n&lt;/note&gt;\n</code></pre>\n<p>But it seems like thymeleaf has a UTF8 xml bug, Or Im missing something.<br />\nHere is what I tried so far:</p>\n<ul>\n<li>Template is coded in UTF-8</li>\n<li>Java source code is saved in UTF-8</li>\n<li>encoding for OutputStreamWriter is UTF-8</li>\n<li>ClassLoaderTemplateResolver is set to UTF-8    Maven is set to UTF-8</li>\n<li>project.build.sourceEncoding UTF-8</li>\n<li>coded the XML as UTF-8  </li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/Al3oR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Al3oR.png\" alt=\"java encoding\" /></a></p>\n<p>Seems like Thymeleaf wont write UTF-8 text correctly to XML.<br />\nThe code example below work faultlessly (except Chinese not sure why but its not import atm) as long as I am opening a <strong>text</strong> template (just the file extension) .</p>\n<p>If I use this line , It works ok and output UTF-8 no Issues.</p>\n<pre><code> templateEngine.process(&quot;test_template.txt&quot;, ct,out);\n</code></pre>\n<p>works great:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;  \n&lt;note&gt;  \n    &lt;to&gt;\n        ARABIC: كتابة مفهومة من قبل اغل\n        HEBREW: ניסיון  \n        CHINESE (MANDARIN): \n    &lt;/to&gt;\n&lt;/note&gt;\n</code></pre>\n<p>Once I modify this line (and rename the template accordingly)  to this:</p>\n<pre><code>templateEngine.process(&quot;test_template.xml&quot;, ct,out);\n</code></pre>\n<p>thymeleaf will crap out the Uincode fonts and export them as HEX representation.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; \n&lt;note&gt;  \n    &lt;to&gt;\n        ARABIC: &amp;#x643;&amp;#x62a;&amp;#x627;&amp;#x628;&amp;#x629; &amp;#x645;&amp;#x641;&amp;#x647;&amp;#x648;&amp;#x645;&amp;#x629; &amp;#x645;&amp;#x646; &amp;#x642;&amp;#x628;&amp;#x644; &amp;#x627;&amp;#x63a;&amp;#x644;\n        HEBREW: &amp;#x5e0;&amp;#x5d9;&amp;#x5e1;&amp;#x5d9;&amp;#x5d5;&amp;#x5df;  \n        CHINESE (MANDARIN): \n    &lt;/to&gt;\n&lt;/note&gt;\n</code></pre>\n<p>Full isolated working example just create the template (test_template.txt) and put it under src/main/resources</p>\n<pre><code>package com.xerox;\nimport java.io.BufferedWriter;\nimport java.io.FileOutputStream;\nimport java.io.OutputStreamWriter;\nimport java.nio.charset.StandardCharsets;\nimport java.time.LocalDateTime;\n\nimport org.thymeleaf.TemplateEngine;\nimport org.thymeleaf.context.Context;\nimport org.thymeleaf.templatemode.TemplateMode;\nimport org.thymeleaf.templateresolver.ClassLoaderTemplateResolver;\n\npublic class TestThymeleafUTF8 {\n    public static void main(String[] args) {\n        try {\n               TemplateEngine templateEngine = new TemplateEngine();\n                ClassLoaderTemplateResolver resolver = new ClassLoaderTemplateResolver();\n                resolver.setCharacterEncoding(&quot;UTF-8&quot;);     \n                resolver.setTemplateMode(TemplateMode.TEXT);\n                templateEngine.setTemplateResolver(resolver);\n                Context ct = new Context();             \n                ct.setVariable(&quot;TEST_AR&quot;, &quot;كتابة مفهومة من قبل اغل&quot;);\n                ct.setVariable(&quot;TEST_HE&quot;, &quot;ניסיון&quot;);\n                ct.setVariable(&quot;TEST_CN&quot;, &quot;王明是中国人。&quot;);\n                ct.setVariable(&quot;currentDate&quot;, LocalDateTime.now().toString());\n                BufferedWriter out = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(&quot;test_output.txt&quot;), StandardCharsets.UTF_8));\n            \n                templateEngine.process(&quot;test_template.txt&quot;, ct,out);\n        } catch (Exception e) {\n            System.out.println(e);\n        }\n    }\n}\n</code></pre>\n<p>Pom.xml:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;com.xerox&lt;/groupId&gt;\n  &lt;artifactId&gt;testUTF&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;testUTF&lt;/name&gt;\n  &lt;description&gt;thymeleaf testUTF&lt;/description&gt;\n  \n    &lt;properties&gt;\n            &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n            &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;   \n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n        &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","arrays","http","spring-restcontroller","feign"],"comments":[{"owner":{"account_id":13252051,"reputation":1635,"user_id":9569292,"display_name":"Thomas Timbul"},"score":0,"creation_date":1671019380,"post_id":74797803,"comment_id":132005636,"body_markdown":"You are using GET, so if you control both server and client side (do you?), have you considered sending (and more importantly receiving) as a String instead of byte array?","body":"You are using GET, so if you control both server and client side (do you?), have you considered sending (and more importantly receiving) as a String instead of byte array?"}],"owner":{"account_id":14488222,"reputation":71,"user_id":10465401,"display_name":"Shakesbeer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":390,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671018448,"creation_date":1671018448,"question_id":74797803,"body_markdown":"Using a **FeignClient**, I want to **send** a Base64 encoded **byte array over http to a Rest API**. \r\n\r\nFeignClient:\r\n```\r\ninterface FeignClient {\r\n    @RequestLine(&quot;GET /hello?b={b}&quot;) CompletableFuture&lt;ResponseEntity&gt; hello(@Param(&quot;b&quot;) byte[] b);\r\n}\r\n\r\nFeignClient feignClient = AsyncFeign.builder()\r\n        .decoder(new GsonDecoder())\r\n        .target(FeignClient.class, &quot;http://localhost:8080&quot;);\r\n\r\nbyte[] base64Encoded = ....\r\n\r\nfeignClient.hello(base64Encoded).get());\r\n\r\n```\r\n\r\nRestController\r\n\r\n```\r\n@Async\r\n@GetMapping(value = &quot;/hello&quot;)\r\npublic CompletableFuture&lt;ResponseEntity&gt; hello(@RequestParam(&quot;b&quot;) byte[] b){\r\n\r\n    String base64Endcode = new String(b) //&lt; -- the problem is here\r\n\r\n    return ....\r\n}\r\n```\r\n\r\n**Problem**: Calling `new String(b)` in the **RestController yields rather the object id `[B@....` than the acutal content.**\r\n\r\nMy first thought (as in https://stackoverflow.com/questions/66433120/how-to-serialize-a-byte-array-to-send-as-the-body-of-an-http-post) was to serialize the byte array. As mentioned there, this is not required. What am I doing wrong?\r\n\r\nA possible solution would be to use `newString(base64Encoded)` (instead of `base64Encoded` on the client side) and use `String valueDecoded = new String(Base64.decodeBase64(graphStr));` on the server side. But does this make sense at all?\r\n\r\nMaybe I need to configure a proper encoder within the FeignClient? Do I need streams?\r\n\r\nDisclaimer: This question might be duplicate of https://stackoverflow.com/questions/66433120/how-to-serialize-a-byte-array-to-send-as-the-body-of-an-http-post. However, I didn&#39;t solve my problem.","title":"Send byte array with FeignClient over HTTP to RestController - Receives ObjectId instead of content","body":"<p>Using a <strong>FeignClient</strong>, I want to <strong>send</strong> a Base64 encoded <strong>byte array over http to a Rest API</strong>.</p>\n<p>FeignClient:</p>\n<pre><code>interface FeignClient {\n    @RequestLine(&quot;GET /hello?b={b}&quot;) CompletableFuture&lt;ResponseEntity&gt; hello(@Param(&quot;b&quot;) byte[] b);\n}\n\nFeignClient feignClient = AsyncFeign.builder()\n        .decoder(new GsonDecoder())\n        .target(FeignClient.class, &quot;http://localhost:8080&quot;);\n\nbyte[] base64Encoded = ....\n\nfeignClient.hello(base64Encoded).get());\n\n</code></pre>\n<p>RestController</p>\n<pre><code>@Async\n@GetMapping(value = &quot;/hello&quot;)\npublic CompletableFuture&lt;ResponseEntity&gt; hello(@RequestParam(&quot;b&quot;) byte[] b){\n\n    String base64Endcode = new String(b) //&lt; -- the problem is here\n\n    return ....\n}\n</code></pre>\n<p><strong>Problem</strong>: Calling <code>new String(b)</code> in the <strong>RestController yields rather the object id <code>[B@....</code> than the acutal content.</strong></p>\n<p>My first thought (as in <a href=\"https://stackoverflow.com/questions/66433120/how-to-serialize-a-byte-array-to-send-as-the-body-of-an-http-post\">How to serialize a byte array to send as the body of an HTTP POST?</a>) was to serialize the byte array. As mentioned there, this is not required. What am I doing wrong?</p>\n<p>A possible solution would be to use <code>newString(base64Encoded)</code> (instead of <code>base64Encoded</code> on the client side) and use <code>String valueDecoded = new String(Base64.decodeBase64(graphStr));</code> on the server side. But does this make sense at all?</p>\n<p>Maybe I need to configure a proper encoder within the FeignClient? Do I need streams?</p>\n<p>Disclaimer: This question might be duplicate of <a href=\"https://stackoverflow.com/questions/66433120/how-to-serialize-a-byte-array-to-send-as-the-body-of-an-http-post\">How to serialize a byte array to send as the body of an HTTP POST?</a>. However, I didn't solve my problem.</p>\n"},{"tags":["java","azure-cosmosdb","bulk","executor"],"comments":[{"owner":{"account_id":7092116,"reputation":14337,"user_id":5641598,"accept_rate":50,"display_name":"Matias Quaranta"},"score":0,"creation_date":1670848753,"post_id":74741056,"comment_id":131960893,"body_markdown":"After the process finishes, if you check if the desired documents were processed (by querying or viewing the data), do you see the desired result (documents created/updated)?","body":"After the process finishes, if you check if the desired documents were processed (by querying or viewing the data), do you see the desired result (documents created/updated)?"},{"owner":{"account_id":1853553,"reputation":61,"user_id":1679581,"display_name":"Jan Peremsk&#253;"},"score":0,"creation_date":1671004489,"post_id":74741056,"comment_id":132000965,"body_markdown":"Yes, desired documents are there (fortunately) - it&#39;s just the messages are very confusing and it looks like if I, as a developer, forgot to properly end the bulk executors. I&#39;m still in a research/PoC phase so I need to be 100% sure, bulk processing works as advertised.","body":"Yes, desired documents are there (fortunately) - it&#39;s just the messages are very confusing and it looks like if I, as a developer, forgot to properly end the bulk executors. I&#39;m still in a research/PoC phase so I need to be 100% sure, bulk processing works as advertised."}],"answers":[{"tags":[],"owner":{"account_id":7092116,"reputation":14337,"user_id":5641598,"accept_rate":50,"display_name":"Matias Quaranta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671018197,"creation_date":1671018197,"answer_id":74797763,"question_id":74741056,"body_markdown":"This is just a noisy log that currently generates an INFO level log. Thanks for your feedback, the team is using it to reduce the log level in cases where the bulk operation completed successfully (sink was completed).\r\n\r\nReference: https://github.com/Azure/azure-sdk-for-java/pull/32601#pullrequestreview-1217306057","title":"CosmosDB Java V4 SDK executeBulkOperations - &quot;Main sink completion failed. EmitResult: FAIL_TERMINATED&quot;","body":"<p>This is just a noisy log that currently generates an INFO level log. Thanks for your feedback, the team is using it to reduce the log level in cases where the bulk operation completed successfully (sink was completed).</p>\n<p>Reference: <a href=\"https://github.com/Azure/azure-sdk-for-java/pull/32601#pullrequestreview-1217306057\" rel=\"nofollow noreferrer\">https://github.com/Azure/azure-sdk-for-java/pull/32601#pullrequestreview-1217306057</a></p>\n"}],"owner":{"account_id":1853553,"reputation":61,"user_id":1679581,"display_name":"Jan Peremsk&#253;"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671018197,"creation_date":1670577693,"question_id":74741056,"body_markdown":"If I run a simple set of document updates on the CosmosDB container using\r\n`container.executeBulkOperations(bulkOperations)` I&#39;m getting strange suspicious log messages from the underlying Cosmos DB Java SDK V4 like:\r\n```\r\n...lementation.batch.BulkExecutor:862 - Closing all sinks, Context: BulkExecutor-1[n/a]\r\n...lementation.batch.BulkExecutor:862 - Closing all sinks, Context: BulkExecutor-1[n/a]\r\n...lementation.batch.BulkExecutor:869 - Main sink completion failed. EmitResult: FAIL_TERMINATED, Context: BulkExecutor-1[n/a]\r\n...lementation.batch.BulkExecutor:862 - Closing all sinks, Context: BulkExecutor-1[n/a]\r\n...lementation.batch.BulkExecutor:869 - Main sink completion failed. EmitResult: FAIL_TERMINATED, Context: BulkExecutor-1[n/a]\r\n```\r\n\r\nShould I terminate the bulk operations somehow explicitly? What am I doing wrong?\r\nOr should I ignore such log messages as they are at `INFO` level ?\r\n\r\nSample code: \r\n```\r\n    public static final String PARTITION_ID = &quot;BULK_DATA_PARTITION&quot;;\r\n    @Inject\r\n    @CosmosBalConfiguration.BalBalancesContainer\r\n    CosmosAsyncContainer container;\r\n\r\n    record IdAndPartition(String id, String partitionId){};\r\n\r\n    void simpleDummyBulkUpdate() {\r\n\r\n        Flux&lt;CosmosItemOperation&gt; bulkOperations = Flux.range(0, 10).map(i -&gt; CosmosBulkOperations.getUpsertItemOperation(new IdAndPartition(i.toString(), PARTITION_ID), new PartitionKey(PARTITION_ID)));\r\n        container.executeBulkOperations(bulkOperations)\r\n                .blockLast();\r\n    }\r\n```","title":"CosmosDB Java V4 SDK executeBulkOperations - &quot;Main sink completion failed. EmitResult: FAIL_TERMINATED&quot;","body":"<p>If I run a simple set of document updates on the CosmosDB container using\n<code>container.executeBulkOperations(bulkOperations)</code> I'm getting strange suspicious log messages from the underlying Cosmos DB Java SDK V4 like:</p>\n<pre><code>...lementation.batch.BulkExecutor:862 - Closing all sinks, Context: BulkExecutor-1[n/a]\n...lementation.batch.BulkExecutor:862 - Closing all sinks, Context: BulkExecutor-1[n/a]\n...lementation.batch.BulkExecutor:869 - Main sink completion failed. EmitResult: FAIL_TERMINATED, Context: BulkExecutor-1[n/a]\n...lementation.batch.BulkExecutor:862 - Closing all sinks, Context: BulkExecutor-1[n/a]\n...lementation.batch.BulkExecutor:869 - Main sink completion failed. EmitResult: FAIL_TERMINATED, Context: BulkExecutor-1[n/a]\n</code></pre>\n<p>Should I terminate the bulk operations somehow explicitly? What am I doing wrong?\nOr should I ignore such log messages as they are at <code>INFO</code> level ?</p>\n<p>Sample code:</p>\n<pre><code>    public static final String PARTITION_ID = &quot;BULK_DATA_PARTITION&quot;;\n    @Inject\n    @CosmosBalConfiguration.BalBalancesContainer\n    CosmosAsyncContainer container;\n\n    record IdAndPartition(String id, String partitionId){};\n\n    void simpleDummyBulkUpdate() {\n\n        Flux&lt;CosmosItemOperation&gt; bulkOperations = Flux.range(0, 10).map(i -&gt; CosmosBulkOperations.getUpsertItemOperation(new IdAndPartition(i.toString(), PARTITION_ID), new PartitionKey(PARTITION_ID)));\n        container.executeBulkOperations(bulkOperations)\n                .blockLast();\n    }\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":4799526,"reputation":158,"user_id":3876514,"display_name":"Yury Nevinitsin"},"score":2,"creation_date":1580293650,"post_id":59964967,"comment_id":106047150,"body_markdown":"What is wrong with the output? The output consists of array of arrays of strings, which I would expect looking at the code, because `convertCSV` returns `List&lt;List&lt;String&gt;&gt;`.","body":"What is wrong with the output? The output consists of array of arrays of strings, which I would expect looking at the code, because <code>convertCSV</code> returns <code>List&lt;List&lt;String&gt;&gt;</code>."},{"owner":{"account_id":11827645,"reputation":3065,"user_id":9011164,"accept_rate":50,"display_name":"KunLun"},"score":1,"creation_date":1580293656,"post_id":59964967,"comment_id":106047151,"body_markdown":"Can you explain this `prints out the JSON response incorrectly` ? What is incorrect?","body":"Can you explain this <code>prints out the JSON response incorrectly</code> ? What is incorrect?"},{"owner":{"account_id":15478045,"reputation":317,"user_id":11166227,"display_name":"Conor Donohoe"},"score":0,"creation_date":1580293958,"post_id":59964967,"comment_id":106047327,"body_markdown":"I need it to print &quot;latD&quot;: &quot;41&quot;, &quot;LatM&quot;:&quot;5&quot;, &quot;LatS&quot;:&quot;59&quot;, &quot;NS&quot;:&quot;N&quot;, etc... do I just have to change the type from list to array, for more context I need an Angular 7 frontend to be able to loop through the arrays","body":"I need it to print &quot;latD&quot;: &quot;41&quot;, &quot;LatM&quot;:&quot;5&quot;, &quot;LatS&quot;:&quot;59&quot;, &quot;NS&quot;:&quot;N&quot;, etc... do I just have to change the type from list to array, for more context I need an Angular 7 frontend to be able to loop through the arrays"},{"owner":{"account_id":1268556,"reputation":48088,"user_id":1225328,"accept_rate":93,"display_name":"sp00m"},"score":0,"creation_date":1671019006,"post_id":59964967,"comment_id":132005515,"body_markdown":"Some of the answers parse the CSV by splitting on `\\n` and `,`: this isn&#39;t recommended because it doesn&#39;t follow the RFC (4180 in this case, for example [_&quot;Fields containing line breaks (CRLF), double quotes, and commas should be enclosed in double-quotes&quot;_](https://datatracker.ietf.org/doc/html/rfc4180#section-2)). You should rather use a 3rd-party tool which handles this for you, for example [Opencsv](https://opencsv.sourceforge.net/) (just like what the OP seems to use).","body":"Some of the answers parse the CSV by splitting on <code>\\n</code> and <code>,</code>: this isn&#39;t recommended because it doesn&#39;t follow the RFC (4180 in this case, for example <a href=\"https://datatracker.ietf.org/doc/html/rfc4180#section-2\" rel=\"nofollow noreferrer\"><i>&quot;Fields containing line breaks (CRLF), double quotes, and commas should be enclosed in double-quotes&quot;</i></a>). You should rather use a 3rd-party tool which handles this for you, for example <a href=\"https://opencsv.sourceforge.net/\" rel=\"nofollow noreferrer\">Opencsv</a> (just like what the OP seems to use)."}],"answers":[{"tags":[],"owner":{"account_id":16179189,"reputation":599,"user_id":11681150,"display_name":"Yogeen Loriya"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1580299246,"creation_date":1580299246,"answer_id":59966656,"question_id":59964967,"body_markdown":"That is because of your reading data in String and printing the List of String. If you want to map the CSV to Object ( JSON Object), You need to read the CSV as bean object please find below code snippet to print as JSON, override toString method as JSON format.\r\n\r\nUser.java \r\n\r\n    public class User {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        @NotNull\r\n        private String name;\r\n    \r\n        @NotNull\r\n        private String surname;\r\n    \r\n        //Getter and Setters\r\n    }\r\n\r\nCsvReaderUtil.java\r\n\r\n \r\n\r\n    public static List&lt;User&gt; readCsvFile() throws IOException {\r\n                List&lt;User&gt; list = null;\r\n                CSVReader reader = null;\r\n                InputStream is = null;\r\n                try {\r\n                    File initialFile = new File(&quot;C:\\\\Users\\\\ER\\\\Desktop\\\\test.csv&quot;);\r\n                    is = new FileInputStream(initialFile);\r\n                    reader = new CSVReader(new InputStreamReader(is), &#39;,&#39;, &#39;&quot;&#39;, 1);\r\n                    ColumnPositionMappingStrategy strat = new ColumnPositionMappingStrategy();\r\n                    strat.setType(User.class);\r\n                    String[] columns = new String[]{&quot;id&quot;, &quot;name&quot;, &quot;surname&quot;};\r\n                    strat.setColumnMapping(columns);\r\n                    CsvToBean csv = new CsvToBean();\r\n                    list = csv.parse(strat, reader);\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                } finally {\r\n                    is.close();\r\n                    reader.close();\r\n                }\r\n                return list;\r\n            }\r\n\r\nNow print this List Of Users as a JSON object.\r\n\r\n","title":"Convert CSV to JSON array in Java Springboot","body":"<p>That is because of your reading data in String and printing the List of String. If you want to map the CSV to Object ( JSON Object), You need to read the CSV as bean object please find below code snippet to print as JSON, override toString method as JSON format.</p>\n\n<p>User.java </p>\n\n<pre><code>public class User {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @NotNull\n    private String name;\n\n    @NotNull\n    private String surname;\n\n    //Getter and Setters\n}\n</code></pre>\n\n<p>CsvReaderUtil.java</p>\n\n<pre><code>public static List&lt;User&gt; readCsvFile() throws IOException {\n            List&lt;User&gt; list = null;\n            CSVReader reader = null;\n            InputStream is = null;\n            try {\n                File initialFile = new File(\"C:\\\\Users\\\\ER\\\\Desktop\\\\test.csv\");\n                is = new FileInputStream(initialFile);\n                reader = new CSVReader(new InputStreamReader(is), ',', '\"', 1);\n                ColumnPositionMappingStrategy strat = new ColumnPositionMappingStrategy();\n                strat.setType(User.class);\n                String[] columns = new String[]{\"id\", \"name\", \"surname\"};\n                strat.setColumnMapping(columns);\n                CsvToBean csv = new CsvToBean();\n                list = csv.parse(strat, reader);\n            } catch (Exception e) {\n                e.printStackTrace();\n            } finally {\n                is.close();\n                reader.close();\n            }\n            return list;\n        }\n</code></pre>\n\n<p>Now print this List Of Users as a JSON object.</p>\n"},{"tags":[],"owner":{"account_id":11827645,"reputation":3065,"user_id":9011164,"accept_rate":50,"display_name":"KunLun"},"down_vote_count":2,"up_vote_count":3,"is_accepted":true,"score":1,"last_activity_date":1580398780,"creation_date":1580304157,"answer_id":59968050,"question_id":59964967,"body_markdown":"Your case is not a big deal.\r\n\r\nYou can read that `csv` and build `json`. \r\n\r\nRead first row and determine columns. The rest of rows are values.\r\n\r\n```\r\npublic class Foo{\r\n\r\n\tpublic static void main(String[] args) throws Exception{\r\n\r\n\t\tList&lt;String&gt; csvRows = null;\r\n\t\ttry(var reader = Files.lines(Paths.get(&quot;dataFile.csv&quot;))){\r\n\t\t\tcsvRows = reader.collect(Collectors.toList());\r\n\t\t}catch(Exception e){\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\n\t\tif(csvRows != null){\r\n\r\n\t\t\tString json = csvToJson(csvRows);\r\n\t\t\tSystem.out.println(json);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic static String csvToJson(List&lt;String&gt; csv){\r\n\r\n\t\t//remove empty lines\r\n        //this will affect permanently the list. \r\n        //be careful if you want to use this list after executing this method\r\n\t\tcsv.removeIf(e -&gt; e.trim().isEmpty());\r\n\r\n\t\t//csv is empty or have declared only columns\r\n\t\tif(csv.size() &lt;= 1){\r\n\t\t\treturn &quot;[]&quot;;\r\n\t\t}\r\n\r\n\t\t//get first line = columns names\r\n\t\tString[] columns = csv.get(0).split(&quot;,&quot;);\r\n\r\n\t\t//get all rows\r\n\t\tStringBuilder json = new StringBuilder(&quot;[\\n&quot;);\r\n\t\tcsv.subList(1, csv.size()) //substring without first row(columns)\r\n\t\t\t.stream()\r\n\t\t\t.map(e -&gt; e.split(&quot;,&quot;))\r\n\t\t\t.filter(e -&gt; e.length == columns.length) //values size should match with columns size\r\n\t\t\t.forEach(row -&gt; {\r\n\r\n\t\t\t\tjson.append(&quot;\\t{\\n&quot;);\r\n\r\n\t\t\t\t\tfor(int i = 0; i &lt; columns.length; i++){\r\n\t\t\t\t\t\tjson.append(&quot;\\t\\t\\&quot;&quot;)\r\n\t\t\t\t\t\t\t.append(columns[i])\r\n\t\t\t\t\t\t\t.append(&quot;\\&quot; : \\&quot;&quot;)\r\n\t\t\t\t\t\t\t.append(row[i])\r\n\t\t\t\t\t\t\t.append(&quot;\\&quot;,\\n&quot;); //comma-1\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//replace comma-1 with \\n\r\n\t\t\t\t\tjson.replace(json.lastIndexOf(&quot;,&quot;), json.length(), &quot;\\n&quot;);\r\n\r\n\t\t\t\tjson.append(&quot;\\t},&quot;); //comma-2\r\n\r\n\t\t\t});\r\n\r\n\t\t//remove comma-2\r\n\t\tjson.replace(json.lastIndexOf(&quot;,&quot;), json.length(), &quot;&quot;);\r\n\r\n\t\tjson.append(&quot;\\n]&quot;);\r\n\r\n\t\treturn json.toString();\r\n\r\n\t}\r\n\r\n}\r\n```\r\n\r\nTested on:\r\n```\r\nfname,lname,note\r\nShaun,Curtis,a\r\nKirby,Beil,b\r\n\r\n-----------------------\r\n\r\n[\r\n\t{\r\n\t\t&quot;fname&quot; : &quot;Shaun&quot;,\r\n\t\t&quot;lname&quot; : &quot;Curtis&quot;,\r\n\t\t&quot;note&quot; : &quot;a&quot;\r\n\t},\t{\r\n\t\t&quot;fname&quot; : &quot;Kirby&quot;,\r\n\t\t&quot;lname&quot; : &quot;Beil&quot;,\r\n\t\t&quot;note&quot; : &quot;b&quot;\r\n\t}\r\n]\r\n```\r\nThis method work on any structure of `csv`. Don&#39;t need to map columns.","title":"Convert CSV to JSON array in Java Springboot","body":"<p>Your case is not a big deal.</p>\n\n<p>You can read that <code>csv</code> and build <code>json</code>. </p>\n\n<p>Read first row and determine columns. The rest of rows are values.</p>\n\n<pre><code>public class Foo{\n\n    public static void main(String[] args) throws Exception{\n\n        List&lt;String&gt; csvRows = null;\n        try(var reader = Files.lines(Paths.get(\"dataFile.csv\"))){\n            csvRows = reader.collect(Collectors.toList());\n        }catch(Exception e){\n            e.printStackTrace();\n        }\n\n        if(csvRows != null){\n\n            String json = csvToJson(csvRows);\n            System.out.println(json);\n\n        }\n\n    }\n\n    public static String csvToJson(List&lt;String&gt; csv){\n\n        //remove empty lines\n        //this will affect permanently the list. \n        //be careful if you want to use this list after executing this method\n        csv.removeIf(e -&gt; e.trim().isEmpty());\n\n        //csv is empty or have declared only columns\n        if(csv.size() &lt;= 1){\n            return \"[]\";\n        }\n\n        //get first line = columns names\n        String[] columns = csv.get(0).split(\",\");\n\n        //get all rows\n        StringBuilder json = new StringBuilder(\"[\\n\");\n        csv.subList(1, csv.size()) //substring without first row(columns)\n            .stream()\n            .map(e -&gt; e.split(\",\"))\n            .filter(e -&gt; e.length == columns.length) //values size should match with columns size\n            .forEach(row -&gt; {\n\n                json.append(\"\\t{\\n\");\n\n                    for(int i = 0; i &lt; columns.length; i++){\n                        json.append(\"\\t\\t\\\"\")\n                            .append(columns[i])\n                            .append(\"\\\" : \\\"\")\n                            .append(row[i])\n                            .append(\"\\\",\\n\"); //comma-1\n                    }\n\n                    //replace comma-1 with \\n\n                    json.replace(json.lastIndexOf(\",\"), json.length(), \"\\n\");\n\n                json.append(\"\\t},\"); //comma-2\n\n            });\n\n        //remove comma-2\n        json.replace(json.lastIndexOf(\",\"), json.length(), \"\");\n\n        json.append(\"\\n]\");\n\n        return json.toString();\n\n    }\n\n}\n</code></pre>\n\n<p>Tested on:</p>\n\n<pre><code>fname,lname,note\nShaun,Curtis,a\nKirby,Beil,b\n\n-----------------------\n\n[\n    {\n        \"fname\" : \"Shaun\",\n        \"lname\" : \"Curtis\",\n        \"note\" : \"a\"\n    },  {\n        \"fname\" : \"Kirby\",\n        \"lname\" : \"Beil\",\n        \"note\" : \"b\"\n    }\n]\n</code></pre>\n\n<p>This method work on any structure of <code>csv</code>. Don't need to map columns.</p>\n"},{"tags":[],"owner":{"account_id":9992410,"reputation":460,"user_id":8710383,"display_name":"Oleksandr"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1671018056,"creation_date":1671018056,"answer_id":74797738,"question_id":59964967,"body_markdown":"Here is a useful example of how to transform CSV to JSON using Java 11+:\r\n\r\n    \r\n    private String fromCsvToJson(String csvFile) {\r\n        String[] lines = file.split(&quot;\\n&quot;);\r\n\r\n        if (lines.length &lt;= 1) {\r\n            return List.of();\r\n        }\r\n\r\n        var headers = lines[0].split(&quot;,&quot;);\r\n        var jsonFormat = Arrays.stream(lines)\r\n                               .skip(1)\r\n                               .map(line -&gt; line.split(&quot;,&quot;))\r\n                               .filter(line -&gt; headers.length == line.length)\r\n                               .map(line -&gt; IntStream.range(0, headers.length).boxed().collect(toMap(i -&gt; headers[i], i -&gt; line[i], (a, b) -&gt; b)))\r\n                               .toList();\r\n    \r\n        return new ObjectMapper().writeValueAsString(jsonFormat);\r\n    }","title":"Convert CSV to JSON array in Java Springboot","body":"<p>Here is a useful example of how to transform CSV to JSON using Java 11+:</p>\n<pre><code>private String fromCsvToJson(String csvFile) {\n    String[] lines = file.split(&quot;\\n&quot;);\n\n    if (lines.length &lt;= 1) {\n        return List.of();\n    }\n\n    var headers = lines[0].split(&quot;,&quot;);\n    var jsonFormat = Arrays.stream(lines)\n                           .skip(1)\n                           .map(line -&gt; line.split(&quot;,&quot;))\n                           .filter(line -&gt; headers.length == line.length)\n                           .map(line -&gt; IntStream.range(0, headers.length).boxed().collect(toMap(i -&gt; headers[i], i -&gt; line[i], (a, b) -&gt; b)))\n                           .toList();\n\n    return new ObjectMapper().writeValueAsString(jsonFormat);\n}\n</code></pre>\n"}],"owner":{"account_id":15478045,"reputation":317,"user_id":11166227,"display_name":"Conor Donohoe"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8951,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":59968050,"answer_count":3,"score":2,"last_activity_date":1671018056,"creation_date":1580293237,"question_id":59964967,"body_markdown":"Hi I am trying to convert a CSV file into a JSON array using A dependency called csvReader, but when I run the code it prints out the JSON response incorrectly and I ament sure why would anyone be able to point me in the right direction.\r\n\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n        @GetMapping(&quot;/convert&quot;)\r\n        public List&lt;List&lt;String&gt;&gt; convertCSV() throws FileNotFoundException {\r\n            List&lt;List&lt;String&gt;&gt; records = new ArrayList&lt;List&lt;String&gt;&gt;();\r\n        try (CSVReader csvReader = new CSVReader(new FileReader(&quot;C:/Download/cities.csv&quot;));) {\r\n            String[] values = null;\r\n\r\n        while ((values = csvReader.readNext()) != null) {\r\n            records.add(Arrays.asList(values));\r\n        }\r\n\r\n    } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n            return values;\r\n        }\r\n\r\n&lt;!-- end snippet --&gt;\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zgD9L.png","title":"Convert CSV to JSON array in Java Springboot","body":"<p>Hi I am trying to convert a CSV file into a JSON array using A dependency called csvReader, but when I run the code it prints out the JSON response incorrectly and I ament sure why would anyone be able to point me in the right direction.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>    @GetMapping(\"/convert\")\r\n    public List&lt;List&lt;String&gt;&gt; convertCSV() throws FileNotFoundException {\r\n        List&lt;List&lt;String&gt;&gt; records = new ArrayList&lt;List&lt;String&gt;&gt;();\r\n    try (CSVReader csvReader = new CSVReader(new FileReader(\"C:/Download/cities.csv\"));) {\r\n        String[] values = null;\r\n\r\n    while ((values = csvReader.readNext()) != null) {\r\n        records.add(Arrays.asList(values));\r\n    }\r\n\r\n} catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return values;\r\n    }</code></pre>\r\n</div>\r\n</div>\r\n\n<a href=\"https://i.stack.imgur.com/zgD9L.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zgD9L.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","multithreading","parallel-processing","calculator"],"comments":[{"owner":{"account_id":4065050,"reputation":491,"user_id":3340316,"display_name":"mahdi_12167"},"score":0,"creation_date":1517030667,"post_id":48472819,"comment_id":83939447,"body_markdown":"You must use atomic integer for counter or locked the block in which you&#39;re using it.","body":"You must use atomic integer for counter or locked the block in which you&#39;re using it."},{"owner":{"account_id":4065050,"reputation":491,"user_id":3340316,"display_name":"mahdi_12167"},"score":0,"creation_date":1517031081,"post_id":48472819,"comment_id":83939507,"body_markdown":"Also, instead of using the while checking isAlive, you can call the join function of each thread.","body":"Also, instead of using the while checking isAlive, you can call the join function of each thread."},{"owner":{"account_id":12820084,"reputation":109,"user_id":9275308,"display_name":"Brooke"},"score":1,"creation_date":1517031092,"post_id":48472819,"comment_id":83939511,"body_markdown":"@mahdi_12167 I will try atomic integers. I am just a bit puzzled because I thought synchronization kept more than one thread from gaining access to a method at a time? I also tried locking the variable following a different stack overflow thread, however, I still had the same issue.","body":"@mahdi_12167 I will try atomic integers. I am just a bit puzzled because I thought synchronization kept more than one thread from gaining access to a method at a time? I also tried locking the variable following a different stack overflow thread, however, I still had the same issue."},{"owner":{"account_id":12820084,"reputation":109,"user_id":9275308,"display_name":"Brooke"},"score":0,"creation_date":1517031315,"post_id":48472819,"comment_id":83939549,"body_markdown":"@mahdi_12167 The atomic integer works. I appreciate the tip, i&#39;ll swap over to calling the join :).","body":"@mahdi_12167 The atomic integer works. I appreciate the tip, i&#39;ll swap over to calling the join :)."},{"owner":{"account_id":4065050,"reputation":491,"user_id":3340316,"display_name":"mahdi_12167"},"score":1,"creation_date":1517032335,"post_id":48472819,"comment_id":83939730,"body_markdown":"You right, but you should pay attention to the fact that the synchronized function only prevents multiple threads from simultaneously executing the method in the same instance.\nhttps://stackoverflow.com/questions/6214229/question-about-java-synchronized","body":"You right, but you should pay attention to the fact that the synchronized function only prevents multiple threads from simultaneously executing the method in the same instance. <a href=\"https://stackoverflow.com/questions/6214229/question-about-java-synchronized\" title=\"question about java synchronized\">stackoverflow.com/questions/6214229/&hellip;</a>"},{"owner":{"account_id":4065050,"reputation":491,"user_id":3340316,"display_name":"mahdi_12167"},"score":0,"creation_date":1517032634,"post_id":48472819,"comment_id":83939794,"body_markdown":"If you want to use a lock, you should an object as lock whose scope is analogous to the counter.","body":"If you want to use a lock, you should an object as lock whose scope is analogous to the counter."},{"owner":{"account_id":12820084,"reputation":109,"user_id":9275308,"display_name":"Brooke"},"score":0,"creation_date":1517032961,"post_id":48472819,"comment_id":83939848,"body_markdown":"@mahdi_12167 Thank you, it makes sense now.","body":"@mahdi_12167 Thank you, it makes sense now."}],"answers":[{"tags":[],"owner":{"account_id":476999,"reputation":607,"user_id":888211,"accept_rate":100,"display_name":"Caius Brindescu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1517034988,"creation_date":1517034988,"answer_id":48473293,"question_id":48472819,"body_markdown":"The `synchronized` keyword takes the _object_\r\n lock. This means that two methods that are `synchronized` cannot execute _on the same object_. They will, however, execute concurrently on invocation on 2 different objects.\r\n\r\nIn your example, your code had 8 objects of `calculator`. The `synchronized` methods do not help you. Each thread uses it&#39;s separate object. You can completely remove the `synchronized` keyword, and your code will be semantically equivalent. \r\n\r\nTo avoid this, use the atomic version of the objects (`AtomicInt`) or lock on the objects themselves: `synchronized(counter){...}` but for this to work you will have to change the type to `Integer`.","title":"Adding numbers using multiple threads in java","body":"<p>The <code>synchronized</code> keyword takes the <em>object</em>\n lock. This means that two methods that are <code>synchronized</code> cannot execute <em>on the same object</em>. They will, however, execute concurrently on invocation on 2 different objects.</p>\n\n<p>In your example, your code had 8 objects of <code>calculator</code>. The <code>synchronized</code> methods do not help you. Each thread uses it's separate object. You can completely remove the <code>synchronized</code> keyword, and your code will be semantically equivalent. </p>\n\n<p>To avoid this, use the atomic version of the objects (<code>AtomicInt</code>) or lock on the objects themselves: <code>synchronized(counter){...}</code> but for this to work you will have to change the type to <code>Integer</code>.</p>\n"},{"tags":[],"owner":{"account_id":5488244,"reputation":16,"user_id":4362393,"display_name":"alain6985"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671017741,"creation_date":1671017741,"answer_id":74797688,"question_id":48472819,"body_markdown":"I&#39;ve just tested your sample and found the addToSum method doesn&#39;t work as expected here with heavy multi-thread, even if [tag:synchronized] keyword is present.\r\n\r\nHere, as sum variable is [tag:static], the method can be made [tag:static] too. \r\n\r\nAfter adding the [tag:static] keyword, the behavior is as expected:\r\n```\r\n    private static synchronized void addToSum(int value)\r\n    {\r\n        sum += value;\r\n    }\r\n```\r\n\r\nHere a simple test (addToSum replaced by incSum for simplicity) :\r\n```\r\n    class IncrementorThread implements Runnable {\r\n        private static int sum = 0;\r\n        private static synchronized void incSum()\r\n        {\r\n            sum ++;\r\n        }\r\n        public void run() {\r\n            incSum();\r\n            Thread.yield();\r\n        }\r\n    }\r\n\r\n    void testIncrementorThread1() {\r\n        ExecutorService executorService = Executors.newCachedThreadPool();\r\n        //ExecutorService executorService = Executors.newSingleThreadExecutor() // result always ok without needing concurrency precaution\r\n        for(int i = 0; i &lt; 5000; i++)\r\n            executorService.execute(new IncrementorThread());\r\n        executorService.shutdown();\r\n        executorService.awaitTermination(4000, TimeUnit.MILLISECONDS);\r\n        System.out.println(&quot;res = &quot;+IncrementorThread.sum); // must be 5000\r\n    }\r\n```\r\n\r\nResult must be 5000, which is not the case if we remove the [tag:static] keyword from the method incSum()\r\n\r\n","title":"Adding numbers using multiple threads in java","body":"<p>I've just tested your sample and found the addToSum method doesn't work as expected here with heavy multi-thread, even if <a href=\"/questions/tagged/synchronized\" class=\"post-tag\" title=\"show questions tagged &#39;synchronized&#39;\" aria-label=\"show questions tagged &#39;synchronized&#39;\" rel=\"tag\" aria-labelledby=\"synchronized-container\">synchronized</a> keyword is present.</p>\n<p>Here, as sum variable is <a href=\"/questions/tagged/static\" class=\"post-tag\" title=\"show questions tagged &#39;static&#39;\" aria-label=\"show questions tagged &#39;static&#39;\" rel=\"tag\" aria-labelledby=\"static-container\">static</a>, the method can be made <a href=\"/questions/tagged/static\" class=\"post-tag\" title=\"show questions tagged &#39;static&#39;\" aria-label=\"show questions tagged &#39;static&#39;\" rel=\"tag\" aria-labelledby=\"static-container\">static</a> too.</p>\n<p>After adding the <a href=\"/questions/tagged/static\" class=\"post-tag\" title=\"show questions tagged &#39;static&#39;\" aria-label=\"show questions tagged &#39;static&#39;\" rel=\"tag\" aria-labelledby=\"static-container\">static</a> keyword, the behavior is as expected:</p>\n<pre><code>    private static synchronized void addToSum(int value)\n    {\n        sum += value;\n    }\n</code></pre>\n<p>Here a simple test (addToSum replaced by incSum for simplicity) :</p>\n<pre><code>    class IncrementorThread implements Runnable {\n        private static int sum = 0;\n        private static synchronized void incSum()\n        {\n            sum ++;\n        }\n        public void run() {\n            incSum();\n            Thread.yield();\n        }\n    }\n\n    void testIncrementorThread1() {\n        ExecutorService executorService = Executors.newCachedThreadPool();\n        //ExecutorService executorService = Executors.newSingleThreadExecutor() // result always ok without needing concurrency precaution\n        for(int i = 0; i &lt; 5000; i++)\n            executorService.execute(new IncrementorThread());\n        executorService.shutdown();\n        executorService.awaitTermination(4000, TimeUnit.MILLISECONDS);\n        System.out.println(&quot;res = &quot;+IncrementorThread.sum); // must be 5000\n    }\n</code></pre>\n<p>Result must be 5000, which is not the case if we remove the <a href=\"/questions/tagged/static\" class=\"post-tag\" title=\"show questions tagged &#39;static&#39;\" aria-label=\"show questions tagged &#39;static&#39;\" rel=\"tag\" aria-labelledby=\"static-container\">static</a> keyword from the method incSum()</p>\n"}],"owner":{"account_id":12820084,"reputation":109,"user_id":9275308,"display_name":"Brooke"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3434,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":48473293,"answer_count":2,"score":1,"last_activity_date":1671017741,"creation_date":1517030119,"question_id":48472819,"body_markdown":"I am having trouble figuring out what my code is doing as this is my first time coding using multiple threads. To start off, in attempt to learn this type of programming I decided to write a miniature program that uses 8 threads to sum a number. However, no matter what I do it seems as if my program never stops when count = 10, it continues onward. I am using 8 threads as I planned on expanding my program to do large calculations. However, these threads are not correlating at all. They are going way past 10. I have used a synchronized method. I have tried a lock. I have tried implementing both at the same time. No matter what, it appears as if the threads still calculate past 10. See below for my current code.\r\n\r\n    public class calculator implements Runnable {\r\n\r\n\tstatic int counter = 0;\r\n\tstatic int sum = 0;\r\n\t\r\n\tprivate synchronized static int getAndIncrement()\r\n\t{\r\n\t//\tSystem.out.println(&quot;counter is  : &quot; + counter);\r\n\r\n\t\tint temp = counter;\r\n\t\tcounter = counter + 1;\r\n\t\tSystem.out.println(&quot;counter is now : &quot; + counter);\r\n\t\treturn temp;\r\n\t}\r\n\t\r\n\tprivate synchronized void addToSum(int value)\r\n\t{\r\n\t//\tSystem.out.println(&quot;sum : &quot; + sum + &quot; value: &quot; + value);\r\n\t\tsum += value;\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void run() \r\n\t{\r\n\t\t// TODO Auto-generated method stub\r\n    \twhile(counter &lt; 10)\r\n\t\t{\r\n    \t\tint tempVal = getAndIncrement();\r\n    \t\tSystem.out.println(&quot;temp val : &quot; + tempVal);\r\n\t\t\taddToSum(tempVal);\r\n\t\t//\tSystem.out.println(&quot;sum is now : &quot; + sum);\r\n\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\r\n    }\r\n\r\n\r\nThis is my main method:\r\n\r\n    \tpublic static void main(String[] args)\r\n\t{\r\n\r\n\t\t\r\n\t\tcalculator[] calc = new calculator[8];\r\n\t\tThread[] thread = new Thread[8];\r\n\t\t\r\n\t\tfinal long startTime = System.currentTimeMillis();\r\n\r\n\t\tfor(int i = 0; i &lt; 8; i++)\r\n\t\t{\r\n\t\t\tcalc[i] = new calculator();\r\n\t\t\tthread[i] = new Thread(calc[i]);\r\n\t\t\tthread[i].start();\r\n\t\t}\r\n\t\t\r\n\t\twhile(thread[0].isAlive() ||thread[1].isAlive() || thread[2].isAlive() || thread[3].isAlive() || thread[4].isAlive() || thread[5].isAlive() || thread[6].isAlive() || thread[7].isAlive())\r\n\t\t{}\r\n\t\t\r\n\t\tfinal long endTime = System.currentTimeMillis();\r\n\t\tSystem.out.println(calculator.sum);\r\n\t\tSystem.out.println(&quot;Execution time : &quot; + (startTime - endTime));\r\n\t}\r\n\r\nI appreciate the help!","title":"Adding numbers using multiple threads in java","body":"<p>I am having trouble figuring out what my code is doing as this is my first time coding using multiple threads. To start off, in attempt to learn this type of programming I decided to write a miniature program that uses 8 threads to sum a number. However, no matter what I do it seems as if my program never stops when count = 10, it continues onward. I am using 8 threads as I planned on expanding my program to do large calculations. However, these threads are not correlating at all. They are going way past 10. I have used a synchronized method. I have tried a lock. I have tried implementing both at the same time. No matter what, it appears as if the threads still calculate past 10. See below for my current code.</p>\n\n<pre><code>public class calculator implements Runnable {\n\nstatic int counter = 0;\nstatic int sum = 0;\n\nprivate synchronized static int getAndIncrement()\n{\n//  System.out.println(\"counter is  : \" + counter);\n\n    int temp = counter;\n    counter = counter + 1;\n    System.out.println(\"counter is now : \" + counter);\n    return temp;\n}\n\nprivate synchronized void addToSum(int value)\n{\n//  System.out.println(\"sum : \" + sum + \" value: \" + value);\n    sum += value;\n}\n\n@Override\npublic void run() \n{\n    // TODO Auto-generated method stub\n    while(counter &lt; 10)\n    {\n        int tempVal = getAndIncrement();\n        System.out.println(\"temp val : \" + tempVal);\n        addToSum(tempVal);\n    //  System.out.println(\"sum is now : \" + sum);\n\n    }\n\n}\n\n\n}\n</code></pre>\n\n<p>This is my main method:</p>\n\n<pre><code>    public static void main(String[] args)\n{\n\n\n    calculator[] calc = new calculator[8];\n    Thread[] thread = new Thread[8];\n\n    final long startTime = System.currentTimeMillis();\n\n    for(int i = 0; i &lt; 8; i++)\n    {\n        calc[i] = new calculator();\n        thread[i] = new Thread(calc[i]);\n        thread[i].start();\n    }\n\n    while(thread[0].isAlive() ||thread[1].isAlive() || thread[2].isAlive() || thread[3].isAlive() || thread[4].isAlive() || thread[5].isAlive() || thread[6].isAlive() || thread[7].isAlive())\n    {}\n\n    final long endTime = System.currentTimeMillis();\n    System.out.println(calculator.sum);\n    System.out.println(\"Execution time : \" + (startTime - endTime));\n}\n</code></pre>\n\n<p>I appreciate the help!</p>\n"},{"tags":["java","multithreading","parallel-processing","executorservice","completable-future"],"comments":[{"owner":{"account_id":13252051,"reputation":1635,"user_id":9569292,"display_name":"Thomas Timbul"},"score":0,"creation_date":1670588623,"post_id":74742284,"comment_id":131914260,"body_markdown":"Remove `.join()` - you&#39;re waiting for the execution of each future to finish before submitting the next.","body":"Remove <code>.join()</code> - you&#39;re waiting for the execution of each future to finish before submitting the next."},{"owner":{"account_id":20792361,"reputation":3,"user_id":19436937,"display_name":"Fetix"},"score":0,"creation_date":1670589093,"post_id":74742284,"comment_id":131914418,"body_markdown":"Then I will not know the time of the whole task","body":"Then I will not know the time of the whole task"}],"answers":[{"tags":[],"owner":{"account_id":13252051,"reputation":1635,"user_id":9569292,"display_name":"Thomas Timbul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671017330,"creation_date":1670589073,"answer_id":74743193,"question_id":74742284,"body_markdown":"`.join()` waits for the result of each CompletableFuture before even submitting the next.\r\nHere&#39;s an alternative:\r\n\r\n        final ExecutorService executorService = Executors.newFixedThreadPool(16);\r\n        //try with resources and using a Stream over the files (`Path`s) in the directory:\r\n\t\ttry(Stream&lt;Path&gt; paths = Files.list(folderWithJson.toPath())) {\r\n\t\t\tfinal CompletableFuture&lt;?&gt;[] all = paths\r\n                   //each Path is mapped to a CompletableFuture, to be run on the ExecutorService:\r\n                   .map(path -&gt; CompletableFuture.runAsync(() -&gt; {\r\n\t                   try {\r\n\t\t                   getFineToStat(path.toFile());\r\n\t                   } catch (IOException e) {\r\n\t\t                   throw new RuntimeException(e);\r\n\t                   }\r\n                   }, executorService))\r\n                   //we collect them into a new array, so that we can use them later\r\n                   .toArray(CompletableFuture[]::new);\r\n            //this will wait for all to finish:\r\n\t\t\tCompletableFuture.allOf(all).join();\r\n\t\t\texecutorService.shutdown();\r\n\t\t}\r\n\r\nPlease be aware that `allOf` will return an exceptional result if just one of the tasks completes with an error. To handle errors, avoid throwing the RuntimeException within the task itself. That way each file can be handled separately, and the process may be allowed to continue (or not, as you wish) even if an individual file has issues.","title":"invokeAll but CompletableFuture","body":"<p><code>.join()</code> waits for the result of each CompletableFuture before even submitting the next.\nHere's an alternative:</p>\n<pre><code>    final ExecutorService executorService = Executors.newFixedThreadPool(16);\n    //try with resources and using a Stream over the files (`Path`s) in the directory:\n    try(Stream&lt;Path&gt; paths = Files.list(folderWithJson.toPath())) {\n        final CompletableFuture&lt;?&gt;[] all = paths\n               //each Path is mapped to a CompletableFuture, to be run on the ExecutorService:\n               .map(path -&gt; CompletableFuture.runAsync(() -&gt; {\n                   try {\n                       getFineToStat(path.toFile());\n                   } catch (IOException e) {\n                       throw new RuntimeException(e);\n                   }\n               }, executorService))\n               //we collect them into a new array, so that we can use them later\n               .toArray(CompletableFuture[]::new);\n        //this will wait for all to finish:\n        CompletableFuture.allOf(all).join();\n        executorService.shutdown();\n    }\n</code></pre>\n<p>Please be aware that <code>allOf</code> will return an exceptional result if just one of the tasks completes with an error. To handle errors, avoid throwing the RuntimeException within the task itself. That way each file can be handled separately, and the process may be allowed to continue (or not, as you wish) even if an individual file has issues.</p>\n"}],"owner":{"account_id":20792361,"reputation":3,"user_id":19436937,"display_name":"Fetix"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":258,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74743193,"answer_count":1,"score":0,"last_activity_date":1671017330,"creation_date":1670584237,"question_id":74742284,"body_markdown":"My task is to load file asynchronously using ExecutiveService &amp; CompletableFuture, and to measure execution time for 2, 4, 8 threads and without parallelization \r\n\r\nIt`s my first method: \r\n\r\n\r\n\r\n\r\n```\r\nFile folderWithJson = new File(pathToFolderWithJson);\r\nExecutorService executorService = Executors.newFixedThreadPool(16);\r\n\r\n\r\nSet&lt;Callable&lt;Boolean&gt;&gt; callables = new HashSet&lt;&gt;();\r\nfor(File file: Objects.requireNonNull(folderWithJson.listFiles())) {\r\n    callables.add(() -&gt; {\r\n        System.out.println(Thread.currentThread().getName());\r\n        return getFineToStat(file);\r\n    });\r\n}\r\nexecutorService.invokeAll(callables);\r\nexecutorService.shutdown();\r\n```\r\n\r\n\r\n\r\n\r\nAnd it works finem but this way, i don`t use CompletableFuture, i have tried this:\r\n\r\n\r\n\r\n\r\n```\r\nFile folderWithJson = new File(pathToFolderWithJson);\r\nExecutorService executorService = Executors.newFixedThreadPool(16);\r\n\r\nfor(File file: Objects.requireNonNull(folderWithJson.listFiles())) {\r\n    CompletableFuture.runAsync(() -&gt; {\r\n        try {\r\n            getFineToStat(file);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }, executorService).join();\r\n}\r\nexecutorService.shutdown();\r\n```\r\n\r\n\r\n\r\n\r\nBut i get almost the same time with different number of threads, although i have 31 file totaling 850mb, there should be a difference\r\n\r\nHow do i implement invokeAll but using CompletableFuture\r\n","title":"invokeAll but CompletableFuture","body":"<p>My task is to load file asynchronously using ExecutiveService &amp; CompletableFuture, and to measure execution time for 2, 4, 8 threads and without parallelization</p>\n<p>It`s my first method:</p>\n<pre><code>File folderWithJson = new File(pathToFolderWithJson);\nExecutorService executorService = Executors.newFixedThreadPool(16);\n\n\nSet&lt;Callable&lt;Boolean&gt;&gt; callables = new HashSet&lt;&gt;();\nfor(File file: Objects.requireNonNull(folderWithJson.listFiles())) {\n    callables.add(() -&gt; {\n        System.out.println(Thread.currentThread().getName());\n        return getFineToStat(file);\n    });\n}\nexecutorService.invokeAll(callables);\nexecutorService.shutdown();\n</code></pre>\n<p>And it works finem but this way, i don`t use CompletableFuture, i have tried this:</p>\n<pre><code>File folderWithJson = new File(pathToFolderWithJson);\nExecutorService executorService = Executors.newFixedThreadPool(16);\n\nfor(File file: Objects.requireNonNull(folderWithJson.listFiles())) {\n    CompletableFuture.runAsync(() -&gt; {\n        try {\n            getFineToStat(file);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }, executorService).join();\n}\nexecutorService.shutdown();\n</code></pre>\n<p>But i get almost the same time with different number of threads, although i have 31 file totaling 850mb, there should be a difference</p>\n<p>How do i implement invokeAll but using CompletableFuture</p>\n"},{"tags":["java","spring-mvc","jstl"],"answers":[{"tags":[],"owner":{"account_id":18802560,"reputation":639,"user_id":13712583,"display_name":"KUNAL HIRANI"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671017200,"creation_date":1671017200,"answer_id":74797561,"question_id":74797560,"body_markdown":"After searching about it i found out that there is some jakarta migration issue with the tomcat10 server. which is mentioned [here](https://stackoverflow.com/questions/60490478/apache-tomcat-10-0-0-m1-using-jsp-absolute-uri-http-java-sun-com-jsp-jstl-core#:~:text=Tomcat%2010%20ships%20with%20an,EE%209%20conversion%20%2F%20migration%20tool).\r\n\r\nso we can use glassfish jstl implementation:\r\n```\r\ndependency&gt;\r\n    &lt;groupId&gt;org.glassfish.web&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jakarta.servlet.jsp.jstl&lt;/artifactId&gt;\r\n    &lt;version&gt;2.0.0-M1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n``` \r\n\r\nwith addition of this dependency error was solved.","title":"java- jstl in spring mvc is giving JstlCoreTLV cast error","body":"<p>After searching about it i found out that there is some jakarta migration issue with the tomcat10 server. which is mentioned <a href=\"https://stackoverflow.com/questions/60490478/apache-tomcat-10-0-0-m1-using-jsp-absolute-uri-http-java-sun-com-jsp-jstl-core#:%7E:text=Tomcat%2010%20ships%20with%20an,EE%209%20conversion%20%2F%20migration%20tool\">here</a>.</p>\n<p>so we can use glassfish jstl implementation:</p>\n<pre><code>dependency&gt;\n    &lt;groupId&gt;org.glassfish.web&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.servlet.jsp.jstl&lt;/artifactId&gt;\n    &lt;version&gt;2.0.0-M1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>with addition of this dependency error was solved.</p>\n"}],"owner":{"account_id":18802560,"reputation":639,"user_id":13712583,"display_name":"KUNAL HIRANI"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":457,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1671025930,"answer_count":1,"score":0,"last_activity_date":1671017200,"creation_date":1671017200,"question_id":74797560,"body_markdown":"I am trying to use jstl in my java spring mvc project.\r\n\r\nhere is the dependency \r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;jstl&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n    &lt;version&gt;1.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nI have added the following line to use jstl in my jsp\r\n\r\n```\r\n&lt;%@ taglib prefix = &quot;c&quot; uri = &quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\r\n```\r\n\r\nbut when i am trying to access that page it is giving me following error.\r\n\r\n```\r\nclass org.apache.taglibs.standard.tlv.JstlCoreTLV cannot be cast to class jakarta.servlet.jsp.tagext.TagLibraryValidator\r\n```\r\n\r\ndoes anyone has any idea what could be wrong?","title":"java- jstl in spring mvc is giving JstlCoreTLV cast error","body":"<p>I am trying to use jstl in my java spring mvc project.</p>\n<p>here is the dependency</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;jstl&lt;/groupId&gt;\n    &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n    &lt;version&gt;1.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I have added the following line to use jstl in my jsp</p>\n<pre><code>&lt;%@ taglib prefix = &quot;c&quot; uri = &quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\n</code></pre>\n<p>but when i am trying to access that page it is giving me following error.</p>\n<pre><code>class org.apache.taglibs.standard.tlv.JstlCoreTLV cannot be cast to class jakarta.servlet.jsp.tagext.TagLibraryValidator\n</code></pre>\n<p>does anyone has any idea what could be wrong?</p>\n"},{"tags":["java","spring-boot","jpa"],"answers":[{"tags":[],"owner":{"account_id":6676840,"reputation":2917,"user_id":5151202,"display_name":"times29"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671017152,"creation_date":1671016341,"answer_id":74797364,"question_id":74796904,"body_markdown":"The Spring `JpaRepository` only allows one type as the ID-type, as can be seen in the [javadoc][1]. Therefore, `findById` will never accept two arguments.\r\n\r\nYou need to define your repository with your EmbeddedId-type as ID-type as follows:\r\n```java\r\n@Repository\r\npublic interface PlansRepository extends JpaRepository&lt;Plans, PlansPKId&gt; {\r\n}\r\n```\r\n\r\nYou can then call the `findById` method as follows:\r\n```java\r\nPlans plans = plansRepo.findById(new PlansPKId(planId, planDate))\r\n    .orElseThrow(PlansNotFoundException.idAndDate(planId, planDate));\r\n```\r\n\r\nIf you dont want to create a new `PlansPKId` instance for every query, you could also define a repository method as follows and let Spring derive the query based on the method name:\r\n```java\r\nOptional&lt;Plans&gt; findByPlansPKIdPlanIdAndPlansPKIdPlanDate(long planId, Date planDate);\r\n```\r\nIf you don&#39;t like to have a cumbersome method name you could as well define a JPQL query and name the method as you like:\r\n```java\r\n@Query(&quot;select p from Plans p where p.plansPKId.planId = :planId and p.plansPKId.planDate = :planDate&quot;)\r\nOptional&lt;Plans&gt; findByCompositeId(@Param(&quot;planId) long planId, @Param(&quot;planDate&quot;) Date planDate);\r\n```\r\n\r\n  \r\nOn a side note, I strongly encourage you to use `LocalDate`, `LocalDateTime` or `ZonedDateTime` (depending on your needs) instead of the legacy `Date` class.\r\n\r\nMoreover, you shouldn&#39;t call `get()` on an `Optional` without checking if it is present. I recently wrote [an answer on SO][2] describing how you can create an elegant error handling. If you stuck to my example, you had to create a `NotFoundException` and then create the `PlansNotFoundException` which extends `NotFoundException`. by this means, everytime when a `PlansNotFoundException` is thrown in thread started by a web request, the user would receive a 404 response and a useful message if you implement it like this:\r\n```java\r\npublic abstract class NotFoundException extends RuntimeException {\r\n\r\n    protected NotFoundException(final String object, final String identifierName, final Object identifier) {\r\n        super(String.format(&quot;No %s found with %s %s&quot;, object, identifierName, identifier));\r\n    }\r\n\r\n    protected NotFoundException(final String object, final Map&lt;String, Object&gt; identifiers) {\r\n        super(String.format(&quot;No %s found with %s&quot;, object,\r\n                identifiers.entrySet().stream()\r\n                        .map(entry -&gt; String.format(&quot;%s %s&quot;, entry.getKey(), entry.getValue()))\r\n                        .collect(Collectors.joining(&quot; and &quot;))));\r\n    }\r\n\r\n}\r\n```\r\n\r\n```java\r\npublic class PlansNotFoundException extends NotFoundException {\r\n\r\n    private PlansNotFoundException(final Map&lt;String, Object&gt; identifiers) {\r\n        super(&quot;plans&quot;, identifiers);\r\n    }\r\n\r\n    public static Supplier&lt;PlansNotFoundException&gt; idAndDate(final long planId, final Date planDate) {\r\n        return () -&gt; new PlansNotFoundException(Map.of(&quot;id&quot;, id, &quot;date&quot;, date));\r\n    }\r\n\r\n}\r\n```\r\nFor the `Meds` case:\r\n```java\r\npublic class MedsNotFoundException extends NotFoundException {\r\n\r\n    private MedsNotFoundException(final String identifierName, final Object identifier) {\r\n        super(&quot;meds&quot;, identifierName, identifier);\r\n    }\r\n\r\n    public static Supplier&lt;MedsNotFoundException&gt; id(final long id) {\r\n        return () -&gt; new MedsNotFoundException(&quot;id&quot;, id);\r\n    }\r\n\r\n}\r\n```\r\n\r\n```java\r\nMeds meds = medsRepo.findById(id).orElseThrow(MedsNotFoundException.id(id));\r\n```\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/docs/current/api/org/springframework/data/jpa/repository/JpaRepository.html\r\n  [2]: https://stackoverflow.com/a/74769665/5151202","title":"FindById() with a composite key","body":"<p>The Spring <code>JpaRepository</code> only allows one type as the ID-type, as can be seen in the <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/api/org/springframework/data/jpa/repository/JpaRepository.html\" rel=\"nofollow noreferrer\">javadoc</a>. Therefore, <code>findById</code> will never accept two arguments.</p>\n<p>You need to define your repository with your EmbeddedId-type as ID-type as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface PlansRepository extends JpaRepository&lt;Plans, PlansPKId&gt; {\n}\n</code></pre>\n<p>You can then call the <code>findById</code> method as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Plans plans = plansRepo.findById(new PlansPKId(planId, planDate))\n    .orElseThrow(PlansNotFoundException.idAndDate(planId, planDate));\n</code></pre>\n<p>If you dont want to create a new <code>PlansPKId</code> instance for every query, you could also define a repository method as follows and let Spring derive the query based on the method name:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Optional&lt;Plans&gt; findByPlansPKIdPlanIdAndPlansPKIdPlanDate(long planId, Date planDate);\n</code></pre>\n<p>If you don't like to have a cumbersome method name you could as well define a JPQL query and name the method as you like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(&quot;select p from Plans p where p.plansPKId.planId = :planId and p.plansPKId.planDate = :planDate&quot;)\nOptional&lt;Plans&gt; findByCompositeId(@Param(&quot;planId) long planId, @Param(&quot;planDate&quot;) Date planDate);\n</code></pre>\n<p>On a side note, I strongly encourage you to use <code>LocalDate</code>, <code>LocalDateTime</code> or <code>ZonedDateTime</code> (depending on your needs) instead of the legacy <code>Date</code> class.</p>\n<p>Moreover, you shouldn't call <code>get()</code> on an <code>Optional</code> without checking if it is present. I recently wrote <a href=\"https://stackoverflow.com/a/74769665/5151202\">an answer on SO</a> describing how you can create an elegant error handling. If you stuck to my example, you had to create a <code>NotFoundException</code> and then create the <code>PlansNotFoundException</code> which extends <code>NotFoundException</code>. by this means, everytime when a <code>PlansNotFoundException</code> is thrown in thread started by a web request, the user would receive a 404 response and a useful message if you implement it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class NotFoundException extends RuntimeException {\n\n    protected NotFoundException(final String object, final String identifierName, final Object identifier) {\n        super(String.format(&quot;No %s found with %s %s&quot;, object, identifierName, identifier));\n    }\n\n    protected NotFoundException(final String object, final Map&lt;String, Object&gt; identifiers) {\n        super(String.format(&quot;No %s found with %s&quot;, object,\n                identifiers.entrySet().stream()\n                        .map(entry -&gt; String.format(&quot;%s %s&quot;, entry.getKey(), entry.getValue()))\n                        .collect(Collectors.joining(&quot; and &quot;))));\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class PlansNotFoundException extends NotFoundException {\n\n    private PlansNotFoundException(final Map&lt;String, Object&gt; identifiers) {\n        super(&quot;plans&quot;, identifiers);\n    }\n\n    public static Supplier&lt;PlansNotFoundException&gt; idAndDate(final long planId, final Date planDate) {\n        return () -&gt; new PlansNotFoundException(Map.of(&quot;id&quot;, id, &quot;date&quot;, date));\n    }\n\n}\n</code></pre>\n<p>For the <code>Meds</code> case:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MedsNotFoundException extends NotFoundException {\n\n    private MedsNotFoundException(final String identifierName, final Object identifier) {\n        super(&quot;meds&quot;, identifierName, identifier);\n    }\n\n    public static Supplier&lt;MedsNotFoundException&gt; id(final long id) {\n        return () -&gt; new MedsNotFoundException(&quot;id&quot;, id);\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>Meds meds = medsRepo.findById(id).orElseThrow(MedsNotFoundException.id(id));\n</code></pre>\n"}],"owner":{"account_id":15650594,"reputation":43,"user_id":11292065,"display_name":"Bernardo Alves"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":420,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74797364,"answer_count":1,"score":0,"last_activity_date":1671017152,"creation_date":1671014257,"question_id":74796904,"body_markdown":"I have a composite primary key made of planId and planDate, when the user gives me both this attributes I cant find a way to retrieve it from my Repo. Should findById work like this? \r\n\r\n     public Plans assignPlansToMeds(Long id, Long planId, Date planDate) {\r\n    \r\n            Set&lt;Meds&gt; medsSet = null;\r\n            Meds meds = medsRepo.findById(id).get();\r\n            Plans plans = plansRepo.findById(planId, planDate).get();\r\n    \r\n            medsSet = plans.getAssignedMeds();\r\n    \r\n            medsSet.add(meds);\r\n            plans.setAssignedMeds(medsSet);\r\n            return plansRepo.save(plans);\r\n    \r\n        }\r\n\r\nMy Primary Key:\r\n\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @EqualsAndHashCode\r\n    @Embeddable\r\n    public class PlansPKId implements Serializable {\r\n    \r\n        private long planId;\r\n    \r\n        private Date planDate; // format: yyyy-mm-dd\r\n    }\r\n\r\nPlans entity:\r\n\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Entity\r\n    @Table(name = &quot;plans&quot;)\r\n    \r\n    public class Plans {\r\n        @EmbeddedId\r\n        private PlansPKId plansPKId;\r\n    \r\n        @Column\r\n        private String planName;\r\n    \r\n        @Column\r\n        private String weekday;\r\n    \r\n        @ManyToMany\r\n        @JoinTable(name = &quot;Plan_Meds&quot;, joinColumns = {\r\n                @JoinColumn(name = &quot;planDate&quot;, referencedColumnName = &quot;planDate&quot;),\r\n                @JoinColumn(name = &quot;planId&quot;, referencedColumnName = &quot;planId&quot;) }, inverseJoinColumns = @JoinColumn(name = &quot;id&quot;))\r\n        private Set&lt;Meds&gt; assignedMeds = new HashSet&lt;&gt;();\r\n    \r\n    }\r\n\r\nwhere I ask for the planId and planDate:\r\n\r\n    @PutMapping(&quot;/medicine/{id}/assignToPlan/{planId}/date/{plandate}&quot;)\r\n        public Plans assignMedToPlan(@PathVariable Long id, @PathVariable Long planId, @PathVariable Date planDate){\r\n    \r\n            return assignService.assignPlansToMeds(id, planId, planDate);\r\n    \r\n        }\r\n\r\n\r\n\r\n","title":"FindById() with a composite key","body":"<p>I have a composite primary key made of planId and planDate, when the user gives me both this attributes I cant find a way to retrieve it from my Repo. Should findById work like this?</p>\n<pre><code> public Plans assignPlansToMeds(Long id, Long planId, Date planDate) {\n\n        Set&lt;Meds&gt; medsSet = null;\n        Meds meds = medsRepo.findById(id).get();\n        Plans plans = plansRepo.findById(planId, planDate).get();\n\n        medsSet = plans.getAssignedMeds();\n\n        medsSet.add(meds);\n        plans.setAssignedMeds(medsSet);\n        return plansRepo.save(plans);\n\n    }\n</code></pre>\n<p>My Primary Key:</p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@EqualsAndHashCode\n@Embeddable\npublic class PlansPKId implements Serializable {\n\n    private long planId;\n\n    private Date planDate; // format: yyyy-mm-dd\n}\n</code></pre>\n<p>Plans entity:</p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\n@Table(name = &quot;plans&quot;)\n\npublic class Plans {\n    @EmbeddedId\n    private PlansPKId plansPKId;\n\n    @Column\n    private String planName;\n\n    @Column\n    private String weekday;\n\n    @ManyToMany\n    @JoinTable(name = &quot;Plan_Meds&quot;, joinColumns = {\n            @JoinColumn(name = &quot;planDate&quot;, referencedColumnName = &quot;planDate&quot;),\n            @JoinColumn(name = &quot;planId&quot;, referencedColumnName = &quot;planId&quot;) }, inverseJoinColumns = @JoinColumn(name = &quot;id&quot;))\n    private Set&lt;Meds&gt; assignedMeds = new HashSet&lt;&gt;();\n\n}\n</code></pre>\n<p>where I ask for the planId and planDate:</p>\n<pre><code>@PutMapping(&quot;/medicine/{id}/assignToPlan/{planId}/date/{plandate}&quot;)\n    public Plans assignMedToPlan(@PathVariable Long id, @PathVariable Long planId, @PathVariable Date planDate){\n\n        return assignService.assignPlansToMeds(id, planId, planDate);\n\n    }\n</code></pre>\n"},{"tags":["java","timer"],"comments":[{"owner":{"account_id":82795,"reputation":5050,"user_id":232539,"accept_rate":88,"display_name":"whiskeysierra"},"score":0,"creation_date":1266075520,"post_id":2258066,"comment_id":2217978,"body_markdown":"Do you want to wait 5 seconds and then execute something or do you want to continue doing something else in the 5 seconds?","body":"Do you want to wait 5 seconds and then execute something or do you want to continue doing something else in the 5 seconds?"},{"owner":{"account_id":29845,"reputation":31302,"user_id":80932,"accept_rate":85,"display_name":"ufk"},"score":0,"creation_date":1266075624,"post_id":2258066,"comment_id":2217992,"body_markdown":"i want to continue doing something else","body":"i want to continue doing something else"}],"answers":[{"tags":[],"owner":{"account_id":57077,"reputation":39235,"user_id":170974,"accept_rate":70,"display_name":"tangens"},"down_vote_count":1,"up_vote_count":293,"is_accepted":true,"score":292,"last_activity_date":1266094590,"creation_date":1266075498,"answer_id":2258080,"question_id":2258066,"body_markdown":"    new java.util.Timer().schedule( \r\n            new java.util.TimerTask() {\r\n                @Override\r\n                public void run() {\r\n                    // your code here\r\n                }\r\n            }, \r\n            5000 \r\n    );\r\n\r\n**EDIT:**\r\n\r\n[javadoc][1] says:\r\n\r\n&gt; After the last live reference to a Timer object goes away and all outstanding tasks have completed execution, the timer&#39;s task execution thread terminates gracefully (and becomes subject to garbage collection). However, this can take arbitrarily long to occur.\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/Timer.html","title":"Run a java function after a specific number of seconds","body":"<pre><code>new java.util.Timer().schedule( \n        new java.util.TimerTask() {\n            @Override\n            public void run() {\n                // your code here\n            }\n        }, \n        5000 \n);\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p><a href=\"http://java.sun.com/javase/6/docs/api/java/util/Timer.html\" rel=\"noreferrer\">javadoc</a> says:</p>\n\n<blockquote>\n  <p>After the last live reference to a Timer object goes away and all outstanding tasks have completed execution, the timer's task execution thread terminates gracefully (and becomes subject to garbage collection). However, this can take arbitrarily long to occur.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"down_vote_count":0,"up_vote_count":75,"is_accepted":false,"score":75,"last_activity_date":1266078696,"creation_date":1266075517,"answer_id":2258082,"question_id":2258066,"body_markdown":"Something like this:\r\n\r\n    // When your program starts up\r\n    ScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();\r\n\r\n    // then, when you want to schedule a task\r\n    Runnable task = ....    \r\n    executor.schedule(task, 5, TimeUnit.SECONDS);\r\n\r\n    // and finally, when your program wants to exit\r\n    executor.shutdown();\r\n\r\nThere are various other factory methods on `Executor` which you can use instead, if you want more threads in the pool.\r\n\r\nAnd remember, it&#39;s important to shutdown the executor when you&#39;ve finished. The `shutdown()` method will cleanly shut down the thread pool when the last task has completed, and will block until this happens. `shutdownNow()` will terminate the thread pool immediately.\r\n\r\n","title":"Run a java function after a specific number of seconds","body":"<p>Something like this:</p>\n\n<pre><code>// When your program starts up\nScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();\n\n// then, when you want to schedule a task\nRunnable task = ....    \nexecutor.schedule(task, 5, TimeUnit.SECONDS);\n\n// and finally, when your program wants to exit\nexecutor.shutdown();\n</code></pre>\n\n<p>There are various other factory methods on <code>Executor</code> which you can use instead, if you want more threads in the pool.</p>\n\n<p>And remember, it's important to shutdown the executor when you've finished. The <code>shutdown()</code> method will cleanly shut down the thread pool when the last task has completed, and will block until this happens. <code>shutdownNow()</code> will terminate the thread pool immediately.</p>\n"},{"tags":[],"owner":{"account_id":98724,"reputation":760,"user_id":267059,"accept_rate":100,"display_name":"dale"},"down_vote_count":9,"up_vote_count":14,"is_accepted":false,"score":5,"last_activity_date":1495629018,"creation_date":1266075541,"answer_id":2258084,"question_id":2258066,"body_markdown":"you could use the Thread.Sleep() function\r\n\r\n    Thread.sleep(4000);\r\n    myfunction();\r\n\r\nYour function will execute after 4 seconds. However this might pause the entire program...\r\n\r\n","title":"Run a java function after a specific number of seconds","body":"<p>you could use the Thread.Sleep() function</p>\n\n<pre><code>Thread.sleep(4000);\nmyfunction();\n</code></pre>\n\n<p>Your function will execute after 4 seconds. However this might pause the entire program...</p>\n"},{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1266077974,"creation_date":1266077974,"answer_id":2258229,"question_id":2258066,"body_markdown":"Your original question mentions the &quot;Swing Timer&quot;. If in fact your question is related to SWing, then you should be using the Swing Timer and NOT the util.Timer.\r\n\r\nRead the section from the Swing tutorial on &quot;[How to Use Timers][1]&quot; for more information. \r\n\r\n  [1]: http://java.sun.com/docs/books/tutorial/uiswing/TOC.html","title":"Run a java function after a specific number of seconds","body":"<p>Your original question mentions the \"Swing Timer\". If in fact your question is related to SWing, then you should be using the Swing Timer and NOT the util.Timer.</p>\n\n<p>Read the section from the Swing tutorial on \"<a href=\"http://java.sun.com/docs/books/tutorial/uiswing/TOC.html\" rel=\"noreferrer\">How to Use Timers</a>\" for more information. </p>\n"},{"tags":[],"owner":{"account_id":84245,"reputation":1492,"user_id":235635,"accept_rate":100,"display_name":"zpon"},"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1343050276,"creation_date":1343050276,"answer_id":11613540,"question_id":2258066,"body_markdown":"Example of using `javax.swing.Timer`\r\n\r\n    Timer timer = new Timer(3000, new ActionListener() {\r\n      @Override\r\n      public void actionPerformed(ActionEvent arg0) {\r\n        // Code to be executed\r\n      }\r\n    });\r\n    timer.setRepeats(false); // Only execute once\r\n    timer.start(); // Go go go!\r\n\r\nThis code will only be executed once, and the execution happens in 3000 ms (3 seconds).\r\n\r\nAs camickr mentions, you should lookup &quot;[How to Use Swing Timers][1]&quot; for a short introduction.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html","title":"Run a java function after a specific number of seconds","body":"<p>Example of using <code>javax.swing.Timer</code></p>\n\n<pre><code>Timer timer = new Timer(3000, new ActionListener() {\n  @Override\n  public void actionPerformed(ActionEvent arg0) {\n    // Code to be executed\n  }\n});\ntimer.setRepeats(false); // Only execute once\ntimer.start(); // Go go go!\n</code></pre>\n\n<p>This code will only be executed once, and the execution happens in 3000 ms (3 seconds).</p>\n\n<p>As camickr mentions, you should lookup \"<a href=\"http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html\">How to Use Swing Timers</a>\" for a short introduction.</p>\n"},{"tags":[],"owner":{"account_id":3444779,"reputation":91,"user_id":2885850,"display_name":"user2885850"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1381925294,"creation_date":1381924158,"answer_id":19402604,"question_id":2258066,"body_markdown":"My code is as follows:\r\n\r\n    new java.util.Timer().schedule(\r\n \r\n        new java.util.TimerTask() {\r\n            @Override\r\n            public void run() {\r\n                // your code here, and if you have to refresh UI put this code: \r\n               runOnUiThread(new   Runnable() {\r\n                      public void run() {\r\n                                //your code\r\n             \r\n                            }\r\n                       });\r\n            }\r\n        }, \r\n        5000 \r\n    );","title":"Run a java function after a specific number of seconds","body":"<p>My code is as follows:</p>\n\n<pre><code>new java.util.Timer().schedule(\n\n    new java.util.TimerTask() {\n        @Override\n        public void run() {\n            // your code here, and if you have to refresh UI put this code: \n           runOnUiThread(new   Runnable() {\n                  public void run() {\n                            //your code\n\n                        }\n                   });\n        }\n    }, \n    5000 \n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":193707,"reputation":34681,"user_id":435605,"accept_rate":45,"display_name":"AlikElzin-kilaka"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1594042963,"creation_date":1479058232,"answer_id":40576741,"question_id":2258066,"body_markdown":"[`ScheduledThreadPoolExecutor`][1] has this ability, but it&#39;s quite heavyweight.\r\n\r\n[`Timer`][2] also has this ability but opens several thread even if used only once.\r\n\r\nHere&#39;s a simple implementation with a test (signature close to Android&#39;s [Handler.postDelayed()][3]):\r\n\r\n    public class JavaUtil {\r\n    \tpublic static void postDelayed(final Runnable runnable, final long delayMillis) {\r\n    \t\tfinal long requested = System.currentTimeMillis();\r\n    \t\tnew Thread(new Runnable() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic void run() {\r\n    \t\t\t\t// The while is just to ignore interruption.\r\n    \t\t\t\twhile (true) {\r\n    \t\t\t\t\ttry {\r\n    \t\t\t\t\t\tlong leftToSleep = requested + delayMillis - System.currentTimeMillis();\r\n    \t\t\t\t\t\tif (leftToSleep &gt; 0) {\r\n    \t\t\t\t\t\t\tThread.sleep(leftToSleep);\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t\tbreak;\r\n    \t\t\t\t\t} catch (InterruptedException ignored) {\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\trunnable.run();\r\n    \t\t\t}\r\n    \t\t}).start();\r\n    \t}\r\n    }\r\n\r\nTest:\r\n\r\n    @Test\r\n    public void testRunsOnlyOnce() throws InterruptedException {\r\n    \tlong delay = 100;\r\n    \tint num = 0;\r\n    \tfinal AtomicInteger numAtomic = new AtomicInteger(num);\r\n    \tJavaUtil.postDelayed(new Runnable() {\r\n    \t\t@Override\r\n    \t\tpublic void run() {\r\n    \t\t\tnumAtomic.incrementAndGet();\r\n    \t\t}\r\n    \t}, delay);\r\n    \tAssert.assertEquals(num, numAtomic.get());\r\n    \tThread.sleep(delay + 10);\r\n    \tAssert.assertEquals(num + 1, numAtomic.get());\r\n    \tThread.sleep(delay * 2);\r\n    \tAssert.assertEquals(num + 1, numAtomic.get());\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/Timer.html\r\n  [3]: https://developer.android.com/reference/android/os/Handler.html#postDelayed(java.lang.Runnable,%20long)","title":"Run a java function after a specific number of seconds","body":"<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html\" rel=\"nofollow noreferrer\"><code>ScheduledThreadPoolExecutor</code></a> has this ability, but it's quite heavyweight.</p>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Timer.html\" rel=\"nofollow noreferrer\"><code>Timer</code></a> also has this ability but opens several thread even if used only once.</p>\n<p>Here's a simple implementation with a test (signature close to Android's <a href=\"https://developer.android.com/reference/android/os/Handler.html#postDelayed(java.lang.Runnable,%20long)\" rel=\"nofollow noreferrer\">Handler.postDelayed()</a>):</p>\n<pre><code>public class JavaUtil {\n    public static void postDelayed(final Runnable runnable, final long delayMillis) {\n        final long requested = System.currentTimeMillis();\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                // The while is just to ignore interruption.\n                while (true) {\n                    try {\n                        long leftToSleep = requested + delayMillis - System.currentTimeMillis();\n                        if (leftToSleep &gt; 0) {\n                            Thread.sleep(leftToSleep);\n                        }\n                        break;\n                    } catch (InterruptedException ignored) {\n                    }\n                }\n                runnable.run();\n            }\n        }).start();\n    }\n}\n</code></pre>\n<p>Test:</p>\n<pre><code>@Test\npublic void testRunsOnlyOnce() throws InterruptedException {\n    long delay = 100;\n    int num = 0;\n    final AtomicInteger numAtomic = new AtomicInteger(num);\n    JavaUtil.postDelayed(new Runnable() {\n        @Override\n        public void run() {\n            numAtomic.incrementAndGet();\n        }\n    }, delay);\n    Assert.assertEquals(num, numAtomic.get());\n    Thread.sleep(delay + 10);\n    Assert.assertEquals(num + 1, numAtomic.get());\n    Thread.sleep(delay * 2);\n    Assert.assertEquals(num + 1, numAtomic.get());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9118878,"reputation":165,"user_id":6785049,"accept_rate":0,"display_name":"Amol K"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1545969597,"creation_date":1501251836,"answer_id":45375917,"question_id":2258066,"body_markdown":"    public static Timer t;\r\n    \r\n    public synchronized void startPollingTimer() {\r\n            if (t == null) {\r\n                TimerTask task = new TimerTask() {\r\n                    @Override\r\n                    public void run() {\r\n                       //Do your work\r\n                    }\r\n                };\r\n                \r\n                t = new Timer();\r\n                t.scheduleAtFixedRate(task, 0, 1000);\r\n            }\r\n        }","title":"Run a java function after a specific number of seconds","body":"<pre><code>public static Timer t;\n\npublic synchronized void startPollingTimer() {\n        if (t == null) {\n            TimerTask task = new TimerTask() {\n                @Override\n                public void run() {\n                   //Do your work\n                }\n            };\n\n            t = new Timer();\n            t.scheduleAtFixedRate(task, 0, 1000);\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1451138,"reputation":2399,"user_id":1368038,"display_name":"Dandalf"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1549215442,"creation_date":1519509783,"answer_id":48968081,"question_id":2258066,"body_markdown":"As a variation of @tangens answer: if you can&#39;t wait for the garbage collector to clean up your thread, cancel the timer at the end of your run method.   \r\n\r\n    Timer t = new java.util.Timer();\r\n    t.schedule( \r\n            new java.util.TimerTask() {\r\n                @Override\r\n                public void run() {\r\n                    // your code here\r\n                    // close the thread\r\n                    t.cancel();\r\n                }\r\n            }, \r\n            5000 \r\n    );","title":"Run a java function after a specific number of seconds","body":"<p>As a variation of @tangens answer: if you can't wait for the garbage collector to clean up your thread, cancel the timer at the end of your run method.   </p>\n\n<pre><code>Timer t = new java.util.Timer();\nt.schedule( \n        new java.util.TimerTask() {\n            @Override\n            public void run() {\n                // your code here\n                // close the thread\n                t.cancel();\n            }\n        }, \n        5000 \n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3878167,"reputation":369,"user_id":3211532,"display_name":"Valchkou"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1521221897,"creation_date":1521135445,"answer_id":49305886,"question_id":2258066,"body_markdown":"All other unswers require to run your code inside a new thread. \r\nIn some simple use cases you may just want to wait a bit and continue execution within the same thread/flow.\r\n\r\nCode below demonstrates that technique. Keep in mind this is similar to what java.util.Timer does under the hood but more lightweight.\r\n\r\n    import java.util.concurrent.TimeUnit;\r\n    public class DelaySample {\r\n\t    public static void main(String[] args) {\r\n\t\t   DelayUtil d = new DelayUtil();\r\n           System.out.println(&quot;started:&quot;+ new Date());\r\n\t\t   d.delay(500);\r\n\t\t   System.out.println(&quot;half second after:&quot;+ new Date());\r\n\t\t   d.delay(1, TimeUnit.MINUTES); \r\n\t\t   System.out.println(&quot;1 minute after:&quot;+ new Date());\r\n\t    }\r\n    }\r\n\r\nDelayUtil Implementation\r\n\r\n    import java.util.concurrent.TimeUnit;\r\n    import java.util.concurrent.locks.Condition;\r\n    import java.util.concurrent.locks.ReentrantLock;\r\n\r\n    public class DelayUtil {\r\n        /** \r\n        *  Delays the current thread execution. \r\n        *  The thread loses ownership of any monitors. \r\n        *  Quits immediately if the thread is interrupted\r\n        *  \r\n        * @param duration the time duration in milliseconds\r\n        */\r\n       public void delay(final long durationInMillis) {\r\n          delay(durationInMillis, TimeUnit.MILLISECONDS);\r\n       }\r\n    \r\n       /** \r\n        * @param duration the time duration in the given {@code sourceUnit}\r\n        * @param unit\r\n        */\r\n        public void delay(final long duration, final TimeUnit unit) {\r\n            long currentTime = System.currentTimeMillis();\r\n            long deadline = currentTime+unit.toMillis(duration);\r\n            ReentrantLock lock = new ReentrantLock();\r\n            Condition waitCondition = lock.newCondition();\r\n        \r\n            while ((deadline-currentTime)&gt;0) {\r\n                try {\r\n                    lock.lockInterruptibly();    \r\n                    waitCondition.await(deadline-currentTime, TimeUnit.MILLISECONDS);\r\n                } catch (InterruptedException e) {\r\n            \t\tThread.currentThread().interrupt();\r\n            \t\treturn;\r\n                } finally {\r\n                    lock.unlock();\r\n                }\r\n                currentTime = System.currentTimeMillis();\r\n            }\r\n        }\r\n    }\r\n\r\n \r\n\r\n    \r\n","title":"Run a java function after a specific number of seconds","body":"<p>All other unswers require to run your code inside a new thread. \nIn some simple use cases you may just want to wait a bit and continue execution within the same thread/flow.</p>\n\n<p>Code below demonstrates that technique. Keep in mind this is similar to what java.util.Timer does under the hood but more lightweight.</p>\n\n<pre><code>import java.util.concurrent.TimeUnit;\npublic class DelaySample {\n    public static void main(String[] args) {\n       DelayUtil d = new DelayUtil();\n       System.out.println(\"started:\"+ new Date());\n       d.delay(500);\n       System.out.println(\"half second after:\"+ new Date());\n       d.delay(1, TimeUnit.MINUTES); \n       System.out.println(\"1 minute after:\"+ new Date());\n    }\n}\n</code></pre>\n\n<p>DelayUtil Implementation</p>\n\n<pre><code>import java.util.concurrent.TimeUnit;\nimport java.util.concurrent.locks.Condition;\nimport java.util.concurrent.locks.ReentrantLock;\n\npublic class DelayUtil {\n    /** \n    *  Delays the current thread execution. \n    *  The thread loses ownership of any monitors. \n    *  Quits immediately if the thread is interrupted\n    *  \n    * @param duration the time duration in milliseconds\n    */\n   public void delay(final long durationInMillis) {\n      delay(durationInMillis, TimeUnit.MILLISECONDS);\n   }\n\n   /** \n    * @param duration the time duration in the given {@code sourceUnit}\n    * @param unit\n    */\n    public void delay(final long duration, final TimeUnit unit) {\n        long currentTime = System.currentTimeMillis();\n        long deadline = currentTime+unit.toMillis(duration);\n        ReentrantLock lock = new ReentrantLock();\n        Condition waitCondition = lock.newCondition();\n\n        while ((deadline-currentTime)&gt;0) {\n            try {\n                lock.lockInterruptibly();    \n                waitCondition.await(deadline-currentTime, TimeUnit.MILLISECONDS);\n            } catch (InterruptedException e) {\n                Thread.currentThread().interrupt();\n                return;\n            } finally {\n                lock.unlock();\n            }\n            currentTime = System.currentTimeMillis();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22783195,"reputation":23,"user_id":16938797,"display_name":"Gergő Fazekas"},"down_vote_count":4,"up_vote_count":3,"is_accepted":false,"score":-1,"last_activity_date":1632584916,"creation_date":1632584916,"answer_id":69327736,"question_id":2258066,"body_markdown":"Perhaps the most transparent way is to use the *postDelayed* function of the *Handler* class the following way:\r\n\r\n\r\n    new Handler().postDelayed(this::function, 1000);\r\n\r\nor you can implement the function inside, for example:\r\n\r\n    new Handler().postDelayed(() -&gt; System.out.println(&quot;A second later&quot;), 1000);\r\n*Where the first argument is the function, the second argument is the delay time in milliseconds.\r\nIn the first example, the name of the called function is &quot;function&quot;.*\r\n\r\n","title":"Run a java function after a specific number of seconds","body":"<p>Perhaps the most transparent way is to use the <em>postDelayed</em> function of the <em>Handler</em> class the following way:</p>\n<pre><code>new Handler().postDelayed(this::function, 1000);\n</code></pre>\n<p>or you can implement the function inside, for example:</p>\n<pre><code>new Handler().postDelayed(() -&gt; System.out.println(&quot;A second later&quot;), 1000);\n</code></pre>\n<p><em>Where the first argument is the function, the second argument is the delay time in milliseconds.\nIn the first example, the name of the called function is &quot;function&quot;.</em></p>\n"},{"tags":[],"owner":{"account_id":10313291,"reputation":1698,"user_id":7608371,"display_name":"Noor Hossain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633886927,"creation_date":1633886927,"answer_id":69517434,"question_id":2258066,"body_markdown":"I think in this case : \r\n\r\n    import javax.swing.*;\r\n    import java.awt.event.ActionListener;\r\nis the best. When the Question is prevent Ui stack or a progress not visible before a heavy work or network call. We can use the following methods (from my experience) : \r\n\r\nRun a method after one Second : \r\n\r\n     public static void startMethodAfterOneSeconds(Runnable runnable) {\r\n            Timer timer = new Timer(1000, new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(java.awt.event.ActionEvent e) {\r\n                    runnable.run();\r\n                }\r\n    \r\n            });\r\n            timer.setRepeats(false); // Only execute once\r\n            timer.start(); \r\n        }\r\n\r\nRun a method after n second once, Non repeating : \r\n\r\n    public static void startMethodAfterNMilliseconds(Runnable runnable, int milliSeconds) {\r\n        Timer timer = new Timer(milliSeconds, new ActionListener() {\r\n            @Override\r\n            public void actionPerformed(java.awt.event.ActionEvent e) {\r\n                runnable.run();\r\n            }\r\n    \r\n        });\r\n        timer.setRepeats(false); // Only execute once\r\n        timer.start(); \r\n    }\r\n\r\nRun a method after n seconds, and repeat : \r\n\r\n   \r\n\r\n     public static void repeatMethodAfterNMilliseconds(Runnable runnable, int milliSeconds) {\r\n            Timer timer = new Timer(milliSeconds, new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(java.awt.event.ActionEvent e) {\r\n                    runnable.run();\r\n                }\r\n    \r\n            });\r\n            timer.setRepeats(true); // Only execute once\r\n            timer.start(); \r\n        }\r\n\r\nAnd the Usage : \r\n\r\n \r\n\r\n     startMethodAfterNMilliseconds(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    // myMethod(); // Your method goes here. \r\n                }\r\n            }, 1000);","title":"Run a java function after a specific number of seconds","body":"<p>I think in this case :</p>\n<pre><code>import javax.swing.*;\nimport java.awt.event.ActionListener;\n</code></pre>\n<p>is the best. When the Question is prevent Ui stack or a progress not visible before a heavy work or network call. We can use the following methods (from my experience) :</p>\n<p>Run a method after one Second :</p>\n<pre><code> public static void startMethodAfterOneSeconds(Runnable runnable) {\n        Timer timer = new Timer(1000, new ActionListener() {\n            @Override\n            public void actionPerformed(java.awt.event.ActionEvent e) {\n                runnable.run();\n            }\n\n        });\n        timer.setRepeats(false); // Only execute once\n        timer.start(); \n    }\n</code></pre>\n<p>Run a method after n second once, Non repeating :</p>\n<pre><code>public static void startMethodAfterNMilliseconds(Runnable runnable, int milliSeconds) {\n    Timer timer = new Timer(milliSeconds, new ActionListener() {\n        @Override\n        public void actionPerformed(java.awt.event.ActionEvent e) {\n            runnable.run();\n        }\n\n    });\n    timer.setRepeats(false); // Only execute once\n    timer.start(); \n}\n</code></pre>\n<p>Run a method after n seconds, and repeat :</p>\n<pre><code> public static void repeatMethodAfterNMilliseconds(Runnable runnable, int milliSeconds) {\n        Timer timer = new Timer(milliSeconds, new ActionListener() {\n            @Override\n            public void actionPerformed(java.awt.event.ActionEvent e) {\n                runnable.run();\n            }\n\n        });\n        timer.setRepeats(true); // Only execute once\n        timer.start(); \n    }\n</code></pre>\n<p>And the Usage :</p>\n<pre><code> startMethodAfterNMilliseconds(new Runnable() {\n            @Override\n            public void run() {\n                // myMethod(); // Your method goes here. \n            }\n        }, 1000);\n</code></pre>\n"}],"owner":{"account_id":29845,"reputation":31302,"user_id":80932,"accept_rate":85,"display_name":"ufk"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":324757,"favorite_count":0,"down_vote_count":1,"up_vote_count":193,"accepted_answer_id":2258080,"answer_count":12,"score":192,"last_activity_date":1671017020,"creation_date":1266075274,"question_id":2258066,"body_markdown":"I have a specific function that I want to be executed after 5 seconds.\r\nHow can I do that in Java?\r\n\r\nI found javax.swing.timer, but I can&#39;t really understand how to use it. It looks like I&#39;m looking for something way simpler then this class provides.\r\n\r\nPlease add a simple usage example.","title":"Run a java function after a specific number of seconds","body":"<p>I have a specific function that I want to be executed after 5 seconds.\nHow can I do that in Java?</p>\n<p>I found javax.swing.timer, but I can't really understand how to use it. It looks like I'm looking for something way simpler then this class provides.</p>\n<p>Please add a simple usage example.</p>\n"},{"tags":["java","spring","dto"],"answers":[{"tags":[],"owner":{"account_id":10487366,"reputation":93,"user_id":7730443,"accept_rate":0,"display_name":"Vivek Baranwal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671016967,"creation_date":1671016967,"answer_id":74797514,"question_id":74796931,"body_markdown":"Assuming you will have different APIs for create and update operation. You can use same dto and for password field you can put validation at backend side based on operation rather than in DTO itself.","title":"Should I use different DTO for Create and Update?","body":"<p>Assuming you will have different APIs for create and update operation. You can use same dto and for password field you can put validation at backend side based on operation rather than in DTO itself.</p>\n"}],"owner":{"account_id":23551117,"reputation":1,"user_id":17593813,"display_name":"Muse"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":420,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671016967,"creation_date":1671014362,"question_id":74796931,"body_markdown":"I have create and update operation for user and the following UserDto\r\n\r\n```\r\npublic class UserDto {\r\n  @NotBlank\r\n  private String username;\r\n  @NotBlank\r\n  private String password;\r\n  @NotBlank\r\n  private String mobileNo;\r\n\r\n  ... other variables, etc.\r\n\r\n}\r\n```\r\n\r\nFor update operation, I don&#39;t want to update the password, I only want to update other variables. Then the password would be received as null (hence not passing @NotBlank). \r\n\r\nBut the @NotBlank is required for create operation. What is the best approach to solve this? \r\n\r\nShould I create 2 Dtos e.g. UserCreateDto, UserUpdateDto (without password field).\r\n\r\nI&#39;m not sure if this is a good practice.","title":"Should I use different DTO for Create and Update?","body":"<p>I have create and update operation for user and the following UserDto</p>\n<pre><code>public class UserDto {\n  @NotBlank\n  private String username;\n  @NotBlank\n  private String password;\n  @NotBlank\n  private String mobileNo;\n\n  ... other variables, etc.\n\n}\n</code></pre>\n<p>For update operation, I don't want to update the password, I only want to update other variables. Then the password would be received as null (hence not passing @NotBlank).</p>\n<p>But the @NotBlank is required for create operation. What is the best approach to solve this?</p>\n<p>Should I create 2 Dtos e.g. UserCreateDto, UserUpdateDto (without password field).</p>\n<p>I'm not sure if this is a good practice.</p>\n"},{"tags":["java","excel","spring-boot"],"comments":[{"owner":{"account_id":2322328,"reputation":1012,"user_id":2037710,"display_name":"Guilherme Mussi"},"score":1,"creation_date":1528952284,"post_id":50849800,"comment_id":88702483,"body_markdown":"Use Apache Poi with XSSF part.","body":"Use Apache Poi with XSSF part."},{"owner":{"account_id":4603196,"reputation":1932,"user_id":3733369,"accept_rate":44,"display_name":"rodridevops"},"score":0,"creation_date":1528952529,"post_id":50849800,"comment_id":88702560,"body_markdown":"Do you want to store the file in the database or its contents in tables?","body":"Do you want to store the file in the database or its contents in tables?"},{"owner":{"account_id":10519181,"reputation":839,"user_id":7769315,"display_name":"Manish Bansal"},"score":0,"creation_date":1528959562,"post_id":50849800,"comment_id":88705464,"body_markdown":"i want its content in tables.","body":"i want its content in tables."}],"answers":[{"tags":[],"owner":{"account_id":6111309,"reputation":11786,"user_id":7831045,"display_name":"Rahul Mahadik"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1528960688,"creation_date":1528960688,"answer_id":50851706,"question_id":50849800,"body_markdown":"Use Apache POI library which is easily available using Maven Dependencies.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n        &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n        &lt;version&gt;3.15&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n\r\n**Code to read file**\r\n\r\n    import org.apache.poi.ss.usermodel.*;\r\n    import org.apache.poi.xssf.usermodel.XSSFWorkbook;\r\n    \r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.FileNotFoundException;\r\n    import java.io.IOException;\r\n    import java.util.Iterator;\r\n    \r\n    public class ApachePOIExcelRead {\r\n    \r\n        private static final String FILE_NAME = &quot;/tmp/MyFirstExcel.xlsx&quot;;\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            try {\r\n    \r\n                FileInputStream excelFile = new FileInputStream(new File(FILE_NAME));\r\n                Workbook workbook = new XSSFWorkbook(excelFile);\r\n                Sheet datatypeSheet = workbook.getSheetAt(0);\r\n                Iterator&lt;Row&gt; iterator = datatypeSheet.iterator();\r\n    \r\n                while (iterator.hasNext()) {\r\n    \r\n                    Row currentRow = iterator.next();\r\n                    Iterator&lt;Cell&gt; cellIterator = currentRow.iterator();\r\n    \r\n                    while (cellIterator.hasNext()) {\r\n    \r\n                        Cell currentCell = cellIterator.next();\r\n                        //getCellTypeEnum shown as deprecated for version 3.15\r\n                        //getCellTypeEnum ill be renamed to getCellType starting from version 4.0\r\n                        if (currentCell.getCellTypeEnum() == CellType.STRING) {\r\n                            System.out.print(currentCell.getStringCellValue() + &quot;--&quot;);\r\n                        } else if (currentCell.getCellTypeEnum() == CellType.NUMERIC) {\r\n                            System.out.print(currentCell.getNumericCellValue() + &quot;--&quot;);\r\n                        }\r\n    \r\n                    }\r\n                    System.out.println();\r\n    \r\n                }\r\n            } catch (FileNotFoundException e) {\r\n                e.printStackTrace();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n        }\r\n    }\r\n\r\nPlease modify above program as per your requirement.\r\nIf you know your excel file column index then you can direct row to read cell e.g.`row.getCell(0)` where `row` object like `XSSFRow row = (XSSFRow) iterator.next();`\r\n\r\nHope this will helps you\r\n\r\n[Reference][1]\r\n\r\n\r\n  [1]: https://www.mkyong.com/java/apache-poi-reading-and-writing-excel-file-in-java/","title":"How to read excel file using spring boot","body":"<p>Use Apache POI library which is easily available using Maven Dependencies.</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n    &lt;version&gt;3.15&lt;/version&gt;\n  &lt;/dependency&gt;\n</code></pre>\n\n<p><strong>Code to read file</strong></p>\n\n<pre><code>import org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\n\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.util.Iterator;\n\npublic class ApachePOIExcelRead {\n\n    private static final String FILE_NAME = \"/tmp/MyFirstExcel.xlsx\";\n\n    public static void main(String[] args) {\n\n        try {\n\n            FileInputStream excelFile = new FileInputStream(new File(FILE_NAME));\n            Workbook workbook = new XSSFWorkbook(excelFile);\n            Sheet datatypeSheet = workbook.getSheetAt(0);\n            Iterator&lt;Row&gt; iterator = datatypeSheet.iterator();\n\n            while (iterator.hasNext()) {\n\n                Row currentRow = iterator.next();\n                Iterator&lt;Cell&gt; cellIterator = currentRow.iterator();\n\n                while (cellIterator.hasNext()) {\n\n                    Cell currentCell = cellIterator.next();\n                    //getCellTypeEnum shown as deprecated for version 3.15\n                    //getCellTypeEnum ill be renamed to getCellType starting from version 4.0\n                    if (currentCell.getCellTypeEnum() == CellType.STRING) {\n                        System.out.print(currentCell.getStringCellValue() + \"--\");\n                    } else if (currentCell.getCellTypeEnum() == CellType.NUMERIC) {\n                        System.out.print(currentCell.getNumericCellValue() + \"--\");\n                    }\n\n                }\n                System.out.println();\n\n            }\n        } catch (FileNotFoundException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n    }\n}\n</code></pre>\n\n<p>Please modify above program as per your requirement.\nIf you know your excel file column index then you can direct row to read cell e.g.<code>row.getCell(0)</code> where <code>row</code> object like <code>XSSFRow row = (XSSFRow) iterator.next();</code></p>\n\n<p>Hope this will helps you</p>\n\n<p><a href=\"https://www.mkyong.com/java/apache-poi-reading-and-writing-excel-file-in-java/\" rel=\"noreferrer\">Reference</a></p>\n"},{"tags":[],"owner":{"account_id":10519181,"reputation":839,"user_id":7769315,"display_name":"Manish Bansal"},"down_vote_count":0,"up_vote_count":42,"is_accepted":true,"score":42,"last_activity_date":1594106794,"creation_date":1528978390,"answer_id":50857299,"question_id":50849800,"body_markdown":"Finally found the solution.\r\n\r\nHtml file for uploading the form is \r\n\r\n    &lt;form th:action=&quot;@{/import}&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;\r\n    \t&lt;input type=&quot;file&quot; th:name=&quot;file&quot; /&gt;\r\n        &lt;input th:type=&quot;submit&quot; value=&quot;Import&quot; /&gt;\r\n    &lt;/form&gt;\r\n\r\n\r\nController class is \r\n\r\n\r\n\t@PostMapping(&quot;/import&quot;)\r\n\tpublic void mapReapExcelDatatoDB(@RequestParam(&quot;file&quot;) MultipartFile reapExcelDataFile) throws IOException {\r\n\t\t\r\n\t    List&lt;Test&gt; tempStudentList = new ArrayList&lt;Test&gt;();\r\n\t    XSSFWorkbook workbook = new XSSFWorkbook(reapExcelDataFile.getInputStream());\r\n\t\tXSSFSheet worksheet = workbook.getSheetAt(0);\r\n\t\t\r\n\t\tfor(int i=1;i&lt;worksheet.getPhysicalNumberOfRows() ;i++) {\r\n\t\t\tTest tempStudent = new Test();\r\n\t\t\t\t\r\n\t\t\tXSSFRow row = worksheet.getRow(i);\r\n\t\t\t\t\r\n\t\t\ttempStudent.setId((int) row.getCell(0).getNumericCellValue());\r\n\t\t\ttempStudent.setContent(row.getCell(1).getStringCellValue());\r\n\t\t\ttempStudentList.add(tempStudent);\t\r\n\t\t}\r\n\t}\r\n\r\n\r\nMake sure to add the dependecy\r\n\r\n\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.12&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;!-- excel 2007 over--&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.12&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t\r\n\r\n\r\nNow it will work fine.","title":"How to read excel file using spring boot","body":"<p>Finally found the solution.</p>\n<p>Html file for uploading the form is</p>\n<pre><code>&lt;form th:action=&quot;@{/import}&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;\n    &lt;input type=&quot;file&quot; th:name=&quot;file&quot; /&gt;\n    &lt;input th:type=&quot;submit&quot; value=&quot;Import&quot; /&gt;\n&lt;/form&gt;\n</code></pre>\n<p>Controller class is</p>\n<pre><code>@PostMapping(&quot;/import&quot;)\npublic void mapReapExcelDatatoDB(@RequestParam(&quot;file&quot;) MultipartFile reapExcelDataFile) throws IOException {\n    \n    List&lt;Test&gt; tempStudentList = new ArrayList&lt;Test&gt;();\n    XSSFWorkbook workbook = new XSSFWorkbook(reapExcelDataFile.getInputStream());\n    XSSFSheet worksheet = workbook.getSheetAt(0);\n    \n    for(int i=1;i&lt;worksheet.getPhysicalNumberOfRows() ;i++) {\n        Test tempStudent = new Test();\n            \n        XSSFRow row = worksheet.getRow(i);\n            \n        tempStudent.setId((int) row.getCell(0).getNumericCellValue());\n        tempStudent.setContent(row.getCell(1).getStringCellValue());\n        tempStudentList.add(tempStudent);   \n    }\n}\n</code></pre>\n<p>Make sure to add the dependecy</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi&lt;/artifactId&gt;\n    &lt;version&gt;3.12&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;!-- excel 2007 over--&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n    &lt;version&gt;3.12&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Now it will work fine.</p>\n"},{"tags":[],"owner":{"account_id":12898503,"reputation":2596,"user_id":9328117,"display_name":"Shahid Hussain Abbasi"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1572272698,"creation_date":1556276547,"answer_id":55866227,"question_id":50849800,"body_markdown":"Works for me\r\n    \r\n```\r\n    &lt;form th:action=&quot;@{/import}&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;\r\n    \r\n        &lt;input type=&quot;file&quot; th:name=&quot;file&quot;&gt;\r\n    \r\n    &lt;input th:type=&quot;submit&quot; value=&quot;Import&quot; /&gt;\r\n```\r\n```\r\n    @PostMapping(&quot;/import&quot;)\r\n    public void mapReapExcelDatatoDB(@RequestParam(&quot;file&quot;) MultipartFile reapExcelDataFile) throws IOException {\r\n    \r\n       List&lt;Test&gt; tempStudentList = new ArrayList&lt;Test&gt;();\r\n        XSSFWorkbook workbook = new XSSFWorkbook(reapExcelDataFile.getInputStream());\r\n        XSSFSheet worksheet = workbook.getSheetAt(0);\r\n    \r\n        for(int i=1;i&lt;worksheet.getPhysicalNumberOfRows() ;i++) {\r\n            Test tempStudent = new Test();\r\n    \r\n            XSSFRow row = worksheet.getRow(i);\r\n    \r\n            tempStudent.setId((int) row.getCell(0).getNumericCellValue());\r\n            tempStudent.setContent(row.getCell(1).getStringCellValue());\r\n                tempStudentList.add(tempStudent);   \r\n        }\r\n    }\r\n```","title":"How to read excel file using spring boot","body":"<p>Works for me</p>\n\n<pre><code>    &lt;form th:action=\"@{/import}\" method=\"post\" enctype=\"multipart/form-data\"&gt;\n\n        &lt;input type=\"file\" th:name=\"file\"&gt;\n\n    &lt;input th:type=\"submit\" value=\"Import\" /&gt;\n</code></pre>\n\n<pre><code>    @PostMapping(\"/import\")\n    public void mapReapExcelDatatoDB(@RequestParam(\"file\") MultipartFile reapExcelDataFile) throws IOException {\n\n       List&lt;Test&gt; tempStudentList = new ArrayList&lt;Test&gt;();\n        XSSFWorkbook workbook = new XSSFWorkbook(reapExcelDataFile.getInputStream());\n        XSSFSheet worksheet = workbook.getSheetAt(0);\n\n        for(int i=1;i&lt;worksheet.getPhysicalNumberOfRows() ;i++) {\n            Test tempStudent = new Test();\n\n            XSSFRow row = worksheet.getRow(i);\n\n            tempStudent.setId((int) row.getCell(0).getNumericCellValue());\n            tempStudent.setContent(row.getCell(1).getStringCellValue());\n                tempStudentList.add(tempStudent);   \n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16114108,"reputation":11,"user_id":11697158,"display_name":"Vdalk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561479844,"creation_date":1561479844,"answer_id":56758341,"question_id":50849800,"body_markdown":"It&#39;s also good to add this **dependency** too: \r\n\r\n    &lt;dependency&gt;\r\n  \t\t\t&lt;groupId&gt;org.apache.xmlbeans&lt;/groupId&gt;\r\n  \t\t\t&lt;artifactId&gt;xmlbeans&lt;/artifactId&gt;\r\n  \t\t\t&lt;version&gt;3.1.0&lt;/version&gt;\r\n\t&lt;/dependency&gt;","title":"How to read excel file using spring boot","body":"<p>It's also good to add this <strong>dependency</strong> too: </p>\n\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.apache.xmlbeans&lt;/groupId&gt;\n        &lt;artifactId&gt;xmlbeans&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":10519181,"reputation":839,"user_id":7769315,"display_name":"Manish Bansal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100009,"favorite_count":0,"down_vote_count":1,"up_vote_count":21,"accepted_answer_id":50857299,"answer_count":4,"score":20,"last_activity_date":1671016321,"creation_date":1528951751,"question_id":50849800,"body_markdown":"I am making a spring boot application which will take the excel file and store its content and store it in database. I have tried many ways..but not successful. Does anyone have an idea about how to do this.\r\nI don&#39;t know how to make the controller for importing the excel file. And is there any dependency which I have to include for reading data from excel file","title":"How to read excel file using spring boot","body":"<p>I am making a spring boot application which will take the excel file and store its content and store it in database. I have tried many ways..but not successful. Does anyone have an idea about how to do this.\nI don't know how to make the controller for importing the excel file. And is there any dependency which I have to include for reading data from excel file</p>\n"},{"tags":["java","spring","spring-data-jpa"],"comments":[{"owner":{"account_id":7777159,"reputation":1084,"user_id":6886283,"display_name":"priyanksriv"},"score":0,"creation_date":1670954249,"post_id":74787215,"comment_id":131990846,"body_markdown":"Could you explain your use case - why do you want a single repository across these two entities, instead of just going the conventional route of declaring two separate `JpaRepository` interfaces for them?","body":"Could you explain your use case - why do you want a single repository across these two entities, instead of just going the conventional route of declaring two separate <code>JpaRepository</code> interfaces for them?"},{"owner":{"account_id":27241377,"reputation":1,"user_id":20767508,"display_name":"working_banana"},"score":0,"creation_date":1671001730,"post_id":74787215,"comment_id":132000349,"body_markdown":"I want to create abstract service&lt;T&gt; and call findFirstBy&#39;identifier&#39; method there that will return T object depending on the service type","body":"I want to create abstract service&lt;T&gt; and call findFirstBy&#39;identifier&#39; method there that will return T object depending on the service type"},{"owner":{"account_id":27241377,"reputation":1,"user_id":20767508,"display_name":"working_banana"},"score":0,"creation_date":1671015940,"post_id":74787215,"comment_id":132004422,"body_markdown":"@priyank-sriv just a bad way to do simple thing. Anyway thank you for your time","body":"@priyank-sriv just a bad way to do simple thing. Anyway thank you for your time"}],"answers":[{"tags":[],"owner":{"account_id":27241377,"reputation":1,"user_id":20767508,"display_name":"working_banana"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671015867,"creation_date":1671015759,"answer_id":74797228,"question_id":74787215,"body_markdown":"This was just a crappy idea.  \r\nI just created  \r\nabstract method in abstract class for finding object  \r\ntwo repositories for both classes  \r\nautowired them in abstract class implementations and used inside the abstract method mentioned above\r\n","title":"spring: change single repository method","body":"<p>This was just a crappy idea.<br />\nI just created<br />\nabstract method in abstract class for finding object<br />\ntwo repositories for both classes<br />\nautowired them in abstract class implementations and used inside the abstract method mentioned above</p>\n"}],"owner":{"account_id":27241377,"reputation":1,"user_id":20767508,"display_name":"working_banana"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671015867,"creation_date":1670945326,"question_id":74787215,"body_markdown":"to make it super simple\r\nI got base entity class with just id field\r\n1st class extends base entity and got additional field string &quot;size&quot;\r\n2nd class extends base entity and got additional field string &quot;color&quot;\r\n\r\nI want to make repository with method\r\n\r\n```\r\npublic interface myRepository&lt;T extends BaseEntity, IdT&gt; extends JpaRepository&lt;T, IdT&gt; {\r\n\r\n  Optional&lt;T&gt; findFirstByIdentifier(String identifier);\r\n}\r\n```\r\nwhere identifier is (depending on the type) size or color\r\n\r\nsomething like calling Optional&lt;T&gt; findFirstByColor(String colorName);\r\nand Optional&lt;T&gt; findFirstBySize(String sizeName);\r\ninside Optional&lt;T&gt; findFirstByIdentifier(String identifier); depending what the T type is\r\nIs there a simple way to do this?\r\n\r\nI was thinking about making class with just \r\nOptional&lt;T&gt; findFirstByIdentifier(String identifier);\r\nand instead of declaring it in &quot;myRepository&quot; doing this in another repository class like\r\nmyRepositorySearchQuery, then making myRepositorySearchQueryImpl, but then i would need another repository class with Optional&lt;T&gt; findFirstBySize(String sizeName); to call it into the implementation and decided it would be better to just ask for some tip","title":"spring: change single repository method","body":"<p>to make it super simple\nI got base entity class with just id field\n1st class extends base entity and got additional field string &quot;size&quot;\n2nd class extends base entity and got additional field string &quot;color&quot;</p>\n<p>I want to make repository with method</p>\n<pre><code>public interface myRepository&lt;T extends BaseEntity, IdT&gt; extends JpaRepository&lt;T, IdT&gt; {\n\n  Optional&lt;T&gt; findFirstByIdentifier(String identifier);\n}\n</code></pre>\n<p>where identifier is (depending on the type) size or color</p>\n<p>something like calling Optional findFirstByColor(String colorName);\nand Optional findFirstBySize(String sizeName);\ninside Optional findFirstByIdentifier(String identifier); depending what the T type is\nIs there a simple way to do this?</p>\n<p>I was thinking about making class with just\nOptional findFirstByIdentifier(String identifier);\nand instead of declaring it in &quot;myRepository&quot; doing this in another repository class like\nmyRepositorySearchQuery, then making myRepositorySearchQueryImpl, but then i would need another repository class with Optional findFirstBySize(String sizeName); to call it into the implementation and decided it would be better to just ask for some tip</p>\n"},{"tags":["java","eclipse","crash","sapjvm"],"answers":[{"tags":[],"owner":{"account_id":27248493,"reputation":1,"user_id":20773383,"display_name":"Sriganesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671015791,"creation_date":1671006460,"answer_id":74795405,"question_id":74795332,"body_markdown":"Reinstalling the JRE with all the optional Features set to Entire feature will be installed on the local drive solved this issue.\r\n[JRE Installation][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0QH8v.png","title":"Eclipse Crashing While trying to launch it with hs_err_pid****.log SAPMachine 11.0.17 JDK","body":"<p>Reinstalling the JRE with all the optional Features set to Entire feature will be installed on the local drive solved this issue.\n<a href=\"https://i.stack.imgur.com/0QH8v.png\" rel=\"nofollow noreferrer\">JRE Installation</a></p>\n"}],"owner":{"account_id":27248493,"reputation":1,"user_id":20773383,"display_name":"Sriganesh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671015791,"creation_date":1671006069,"question_id":74795332,"body_markdown":"When trying to launch the eclipse its creating a hs_err_pid****.log file and crashing. This started after I upgraded the Windows to Win11 I&#39;m using sapmachine-11.0.17 JDK\r\nThe content of the log file.\r\n```\r\n A fatal error has been detected by the Java Runtime Environment:\r\n\r\n  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x00007ffe3d789033, pid=10104, tid=18992\r\n\r\n JRE version:  (11.0.17+8) (build )\r\n Java VM: OpenJDK 64-Bit Server VM (11.0.17+8-LTS-sapmachine, mixed mode, sharing, tiered, compressed oops, g1 gc, windows-amd64)\r\n Problematic frame:\r\n V  [jvm.dll+0x1d9033]  protected: static void __cdecl ClassLoader::setup_boot_search_path(char const * __ptr64)+0x33\r\n\r\n No core dump will be written. Minidumps are not enabled by default on client versions of Windows\r\n```\r\n\r\nI was trying to launch the Eclipse IDE ( Eclipse IDE for Java Developers - 2022-06) it was crashing","title":"Eclipse Crashing While trying to launch it with hs_err_pid****.log SAPMachine 11.0.17 JDK","body":"<p>When trying to launch the eclipse its creating a hs_err_pid****.log file and crashing. This started after I upgraded the Windows to Win11 I'm using sapmachine-11.0.17 JDK\nThe content of the log file.</p>\n<pre><code> A fatal error has been detected by the Java Runtime Environment:\n\n  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x00007ffe3d789033, pid=10104, tid=18992\n\n JRE version:  (11.0.17+8) (build )\n Java VM: OpenJDK 64-Bit Server VM (11.0.17+8-LTS-sapmachine, mixed mode, sharing, tiered, compressed oops, g1 gc, windows-amd64)\n Problematic frame:\n V  [jvm.dll+0x1d9033]  protected: static void __cdecl ClassLoader::setup_boot_search_path(char const * __ptr64)+0x33\n\n No core dump will be written. Minidumps are not enabled by default on client versions of Windows\n</code></pre>\n<p>I was trying to launch the Eclipse IDE ( Eclipse IDE for Java Developers - 2022-06) it was crashing</p>\n"},{"tags":["java","mongodb","maven","junit","azure-functions"],"owner":{"account_id":27249945,"reputation":11,"user_id":20774573,"display_name":"Shaik Muzammil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":188,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671015607,"creation_date":1671015439,"question_id":74797162,"body_markdown":"Exception I am getting\r\n\r\nCannot instantiate @InjectMocks field named &#39;csoKpiBlobTriggerFunction&#39; of type &#39;class com.stellantis.cso.kpi.function.CsoKpiBlobTriggerFunction&#39;.\r\nYou haven&#39;t provided the instance at field declaration so I tried to construct the instance.\r\nHowever the constructor or the initialization block threw an exception : Cannot invoke &quot;String.startsWith(String)&quot; because &quot;connectionString&quot; is null\r\n\r\n\r\n\r\n\t@Mock\r\n    MongoCollection mockCollection;\r\n\t\r\n\t@Mock\r\n\tMongoClient mongoClient;\r\n\t\r\n\t@Mock\r\n\tMongoDatabase database;\r\n\t\r\n\t@InjectMocks\r\n\tCsoKpiBlobTriggerFunction csoKpiBlobTriggerFunction;\r\n\t\r\n\t\r\n\t@InjectMocks\r\n\tExecutionContextMock executionContext;\r\n\t\r\n\t\r\n\r\n\t\r\n\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\t@Test\r\n\tvoid TestRun() throws Exception {\r\n\t\tFile file = new File(&quot;/src/test/resources/json/10Q3EG1421896.json&quot;);\r\n\t\tbyte[] arr = new byte[(int)file.length()];\r\n\t\t\r\n\t\tMockito.when(mongoClient.getDatabase(Mockito.anyString())).thenReturn(database);\r\n\t\t\r\n\t\tMockito.when(database.getCollection(Mockito.anyString())).thenReturn(mockCollection);\r\n\t\t\r\n\r\n        csoKpiBlobTriggerFunction.run(arr,&quot;10Q3EG1421896.json&quot;,executionContext);\r\n\t\t//PowerMockito.whenNew(MongoClient.class).withArguments(Mockito.anyString()).thenReturn(mongoClient);\r\n\t\t//PowerMockito.whenNew(MongoClientURI.class).withArguments(Mockito.anyString(),Mockito.any()).thenReturn(Mockito.any());\r\n\t\t//PowerMockito.whenNew(ConnectionString.class).withArguments(&quot;mongodb://&quot;).thenReturn(Mockito.any());\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\r\n\r\n```\r\n","title":"I am working on Azure Functions and trying to test by mocking my MongoDB. Help me to run my test successfully","body":"<p>Exception I am getting</p>\n<p>Cannot instantiate @InjectMocks field named 'csoKpiBlobTriggerFunction' of type 'class com.stellantis.cso.kpi.function.CsoKpiBlobTriggerFunction'.\nYou haven't provided the instance at field declaration so I tried to construct the instance.\nHowever the constructor or the initialization block threw an exception : Cannot invoke &quot;String.startsWith(String)&quot; because &quot;connectionString&quot; is null</p>\n<pre><code>@Mock\nMongoCollection mockCollection;\n\n@Mock\nMongoClient mongoClient;\n\n@Mock\nMongoDatabase database;\n\n@InjectMocks\nCsoKpiBlobTriggerFunction csoKpiBlobTriggerFunction;\n\n\n@InjectMocks\nExecutionContextMock executionContext;\n\n\n\n\n@SuppressWarnings(&quot;unchecked&quot;)\n@Test\nvoid TestRun() throws Exception {\n    File file = new File(&quot;/src/test/resources/json/10Q3EG1421896.json&quot;);\n    byte[] arr = new byte[(int)file.length()];\n    \n    Mockito.when(mongoClient.getDatabase(Mockito.anyString())).thenReturn(database);\n    \n    Mockito.when(database.getCollection(Mockito.anyString())).thenReturn(mockCollection);\n    \n\n    csoKpiBlobTriggerFunction.run(arr,&quot;10Q3EG1421896.json&quot;,executionContext);\n    //PowerMockito.whenNew(MongoClient.class).withArguments(Mockito.anyString()).thenReturn(mongoClient);\n    //PowerMockito.whenNew(MongoClientURI.class).withArguments(Mockito.anyString(),Mockito.any()).thenReturn(Mockito.any());\n    //PowerMockito.whenNew(ConnectionString.class).withArguments(&quot;mongodb://&quot;).thenReturn(Mockito.any());\n    \n    \n}\n</code></pre>\n<pre><code></code></pre>\n"},{"tags":["java","spring-boot","hibernate"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1670860306,"post_id":74773726,"comment_id":131965220,"body_markdown":"How should this be stored in the database? Will you create a email type in the database as well","body":"How should this be stored in the database? Will you create a email type in the database as well"},{"owner":{"account_id":12695732,"reputation":3368,"user_id":9224219,"display_name":"Datz"},"score":0,"creation_date":1670959521,"post_id":74773726,"comment_id":131992518,"body_markdown":"please update your question and describe if you want to persist the `EmailAddress` class in the db or want to store just the email-string as varchar-column in the customer-table.","body":"please update your question and describe if you want to persist the <code>EmailAddress</code> class in the db or want to store just the email-string as varchar-column in the customer-table."}],"answers":[{"tags":[],"owner":{"account_id":25255912,"reputation":21,"user_id":19087646,"display_name":"Seifeldin Sabry"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1670868740,"creation_date":1670868740,"answer_id":74775537,"question_id":74773726,"body_markdown":"Here is some example of making your own custom type. \r\n\r\n```java\r\npublic class EmailAddressDescriptor extends AbstractTypeDescriptor&lt;String&gt; {\r\n\r\n\tprotected EmailAddressDescriptor() {\r\n\t\tsuper(String.class, new ImmutableMutabilityPlan&lt;&gt;());\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String toString(String value) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String fromString(String string) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic &lt;X&gt; X unwrap(String value, Class&lt;X&gt; type, WrapperOptions options) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic &lt;X&gt; String wrap(X value, WrapperOptions options) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic SqlTypeDescriptor getJdbcRecommendedSqlType(JdbcRecommendedSqlTypeMappingContext context) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\r\n}\r\n```\r\nThen you would make the Email address class with all your methods\r\n```java\r\npublic class EmailAddress extends AbstractSingleColumnStandardBasicType&lt;String&gt; {\r\n\tprivate String value;\r\n\r\n\tpublic EmailAddress() {\r\n\t\tsuper(new VarcharTypeDescriptor(), new EmailAddressDescriptor());\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String getName() {\r\n\t\treturn &quot;EmailAddress&quot;;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic Object resolve(Object value, SharedSessionContractImplementor session, Object owner, Boolean overridingEager) throws HibernateException {\r\n\t\treturn null;\r\n\t}\r\n\r\n}\r\n public String mailbox() ...\r\n   public String host() ...\r\n   public String tld() ...\r\n```\r\nHow you would use it with your entity will be something like this\r\n```java\r\n@Entity\r\n@TypeDef(name = &quot;emailAddress&quot;, typeClass = EmailAddress.class)\r\npublic class customer {\r\n    @Id\r\n    @GeneratedValue\r\n    private Long id;\r\n\r\n    private String name;\r\n\r\n    @Type (type = &quot;emailAddress&quot;)\r\n\tprivate EmailAddress emailAddress;\r\n}\r\n\r\n```\r\nHope this helps\r\n","title":"How to implement a Custom DataType in Hibernate?","body":"<p>Here is some example of making your own custom type.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class EmailAddressDescriptor extends AbstractTypeDescriptor&lt;String&gt; {\n\n    protected EmailAddressDescriptor() {\n        super(String.class, new ImmutableMutabilityPlan&lt;&gt;());\n    }\n\n    @Override\n    public String toString(String value) {\n        return null;\n    }\n\n    @Override\n    public String fromString(String string) {\n        return null;\n    }\n\n    @Override\n    public &lt;X&gt; X unwrap(String value, Class&lt;X&gt; type, WrapperOptions options) {\n        return null;\n    }\n\n    @Override\n    public &lt;X&gt; String wrap(X value, WrapperOptions options) {\n        return null;\n    }\n\n    @Override\n    public SqlTypeDescriptor getJdbcRecommendedSqlType(JdbcRecommendedSqlTypeMappingContext context) {\n        return null;\n    }\n\n\n}\n</code></pre>\n<p>Then you would make the Email address class with all your methods</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class EmailAddress extends AbstractSingleColumnStandardBasicType&lt;String&gt; {\n    private String value;\n\n    public EmailAddress() {\n        super(new VarcharTypeDescriptor(), new EmailAddressDescriptor());\n    }\n\n    @Override\n    public String getName() {\n        return &quot;EmailAddress&quot;;\n    }\n\n    @Override\n    public Object resolve(Object value, SharedSessionContractImplementor session, Object owner, Boolean overridingEager) throws HibernateException {\n        return null;\n    }\n\n}\n public String mailbox() ...\n   public String host() ...\n   public String tld() ...\n</code></pre>\n<p>How you would use it with your entity will be something like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@TypeDef(name = &quot;emailAddress&quot;, typeClass = EmailAddress.class)\npublic class customer {\n    @Id\n    @GeneratedValue\n    private Long id;\n\n    private String name;\n\n    @Type (type = &quot;emailAddress&quot;)\n    private EmailAddress emailAddress;\n}\n\n</code></pre>\n<p>Hope this helps</p>\n"},{"tags":[],"owner":{"account_id":3533737,"reputation":981,"user_id":2952564,"accept_rate":74,"display_name":"Burner"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671015104,"creation_date":1670929901,"answer_id":74783915,"question_id":74773726,"body_markdown":"it is much easier. An AttributeConverter make it very easy.\r\n\r\nhttps://thorben-janssen.com/jpa-attribute-converter/\r\n\r\nThank you very much\r\n\r\nEDIT:\r\nHere is the Code:\r\n\r\n    import javax.persistence.AttributeConverter;\r\n    import javax.persistence.Converter;\r\n    \r\n    @Converter(autoApply = true)\r\n    public class EmailAddressConverter implements AttributeConverter&lt;EmailAddress, String&gt; {\r\n    \r\n    \t@Override\r\n    \tpublic String convertToDatabaseColumn(EmailAddress emailAddress) {\r\n    \t\treturn emailAddress.value;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic EmailAddress convertToEntityAttribute(String s) {\r\n    \t\treturn new EmailAddress(s);\r\n    \t}\r\n    }\r\n\r\nAnd in the Entity:\r\n\r\n    @Convert(converter = EmailAddressConverter.class)\r\n\tprivate EmailAddress email;","title":"How to implement a Custom DataType in Hibernate?","body":"<p>it is much easier. An AttributeConverter make it very easy.</p>\n<p><a href=\"https://thorben-janssen.com/jpa-attribute-converter/\" rel=\"nofollow noreferrer\">https://thorben-janssen.com/jpa-attribute-converter/</a></p>\n<p>Thank you very much</p>\n<p>EDIT:\nHere is the Code:</p>\n<pre><code>import javax.persistence.AttributeConverter;\nimport javax.persistence.Converter;\n\n@Converter(autoApply = true)\npublic class EmailAddressConverter implements AttributeConverter&lt;EmailAddress, String&gt; {\n\n    @Override\n    public String convertToDatabaseColumn(EmailAddress emailAddress) {\n        return emailAddress.value;\n    }\n\n    @Override\n    public EmailAddress convertToEntityAttribute(String s) {\n        return new EmailAddress(s);\n    }\n}\n</code></pre>\n<p>And in the Entity:</p>\n<pre><code>@Convert(converter = EmailAddressConverter.class)\nprivate EmailAddress email;\n</code></pre>\n"}],"owner":{"account_id":3533737,"reputation":981,"user_id":2952564,"accept_rate":74,"display_name":"Burner"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74783915,"answer_count":2,"score":0,"last_activity_date":1671015232,"creation_date":1670860203,"question_id":74773726,"body_markdown":"We would like to type various properties in Java.\r\ne.g. the e-mail address\r\n\r\nBut now I get the message all the time:\r\n\r\n    Could not set field value [test@test.de] value by reflection : [class customer.email] setter of customer.email;\r\n    \r\n    Can not set dataType.EmailAddress field customer.email to java.lang.String\r\n\r\nHow should I proceed? \r\n\r\n    @Entity\r\n    public class customer {\r\n        @Id\r\n        @GeneratedValue\r\n        private Long id;\r\n    \r\n        private String name;\r\n    \r\n        private EmailAddress email;\r\n    }\r\n\r\n\r\n    public class EmailAddress {\r\n    \r\n        public String value;\r\n    \r\n        public EmailAddress(String value) {\r\n    \t\tthis.value = value;\r\n    \t}\r\n    \r\n        public String getValue() {\r\n    \t\treturn this.value;\r\n    \t}\r\n    \r\n    \tpublic boolean setValue(String s) {\r\n    \t\tthis.value = s;\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n       public String mailbox() ...\r\n       public String host() ...\r\n       public String tld() ...\r\n    }\r\n\r\nGetter and Setter from HibernateDefaultType not called.\r\n\r\nEDIT:\r\nAt the end. I want to store a String in the database with the email-Address. In Java I want the EmailAddress Object.\r\n","title":"How to implement a Custom DataType in Hibernate?","body":"<p>We would like to type various properties in Java.\ne.g. the e-mail address</p>\n<p>But now I get the message all the time:</p>\n<pre><code>Could not set field value [test@test.de] value by reflection : [class customer.email] setter of customer.email;\n\nCan not set dataType.EmailAddress field customer.email to java.lang.String\n</code></pre>\n<p>How should I proceed?</p>\n<pre><code>@Entity\npublic class customer {\n    @Id\n    @GeneratedValue\n    private Long id;\n\n    private String name;\n\n    private EmailAddress email;\n}\n\n\npublic class EmailAddress {\n\n    public String value;\n\n    public EmailAddress(String value) {\n        this.value = value;\n    }\n\n    public String getValue() {\n        return this.value;\n    }\n\n    public boolean setValue(String s) {\n        this.value = s;\n        return true;\n    }\n\n   public String mailbox() ...\n   public String host() ...\n   public String tld() ...\n}\n</code></pre>\n<p>Getter and Setter from HibernateDefaultType not called.</p>\n<p>EDIT:\nAt the end. I want to store a String in the database with the email-Address. In Java I want the EmailAddress Object.</p>\n"},{"tags":["java","jackson-databind","jackson-modules","jackson-module-scala"],"owner":{"account_id":26376781,"reputation":11,"user_id":20030606,"display_name":"Niharika Baruah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":182,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671015188,"creation_date":1671015188,"question_id":74797102,"body_markdown":"I am getting the exception &quot; Scala module 2.14.1 requires Jackson Databind version &gt;= 2.14.0 and &lt; 2.15.0 - Found jackson-databind version 2.13.2-1&quot; even though I have upgraded the Jackson Databind version tp 2.14.1 in the build.gardle file? How to resolve this issue?\r\n\r\nHow to resolve this issue?","title":"Exception: Scala module 2.14.1 requires Jackson Databind version &gt;= 2.14.0 and &lt; 2.15.0 - Found jackson-databind version 2.13.2-1","body":"<p>I am getting the exception &quot; Scala module 2.14.1 requires Jackson Databind version &gt;= 2.14.0 and &lt; 2.15.0 - Found jackson-databind version 2.13.2-1&quot; even though I have upgraded the Jackson Databind version tp 2.14.1 in the build.gardle file? How to resolve this issue?</p>\n<p>How to resolve this issue?</p>\n"},{"tags":["java","sorting","recursion","quicksort"],"comments":[{"owner":{"account_id":15396644,"reputation":25755,"user_id":11107541,"display_name":"starball"},"score":0,"creation_date":1670801217,"post_id":74764914,"comment_id":131951538,"body_markdown":"Please provide a sample input, with its expected and actual output.","body":"Please provide a sample input, with its expected and actual output."},{"owner":{"account_id":23893236,"reputation":1,"user_id":17892599,"display_name":"asporoc"},"score":0,"creation_date":1670842694,"post_id":74764914,"comment_id":131958943,"body_markdown":"Thanks for the feedback I&#39;ll try to stick to Java conventions from now on.\nI&#39;ve posted the expected and actual Output, while doing so i realized that the second Iteration does&#39;nt return the full list twice. Thanks again and all help and feedback is greatly appreciated.","body":"Thanks for the feedback I&#39;ll try to stick to Java conventions from now on. I&#39;ve posted the expected and actual Output, while doing so i realized that the second Iteration does&#39;nt return the full list twice. Thanks again and all help and feedback is greatly appreciated."}],"answers":[{"tags":[],"owner":{"account_id":23893236,"reputation":1,"user_id":17892599,"display_name":"asporoc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671015097,"creation_date":1671015097,"answer_id":74797079,"question_id":74764914,"body_markdown":"Okay so I&#39;ve solved it, the Doublylinked List sortedList was static and kept all the results from the throughout every Iteration which led to the List getting bigger. The Solution to clear the List by designating all the Nodes to null did not work because that also cleared the origin of the Pointers, so the Original List also became a null list.\r\n\r\nAfter every sort I assign a null list to the variable sortedList, maybe not the most elegant Solution because I now have a null list in my code for only this purpose, but it works...\r\n    \r\n    \r\n    dlinkedList empty = new dlinkedList();\r\n    dlinkedList sortedList = sortMenuSwitch(mainMenuInput());\r\n    dlinkedList.sortedList = empty;\r\n\r\n    ","title":"Java recursive Quicksort problem with persistent variables","body":"<p>Okay so I've solved it, the Doublylinked List sortedList was static and kept all the results from the throughout every Iteration which led to the List getting bigger. The Solution to clear the List by designating all the Nodes to null did not work because that also cleared the origin of the Pointers, so the Original List also became a null list.</p>\n<p>After every sort I assign a null list to the variable sortedList, maybe not the most elegant Solution because I now have a null list in my code for only this purpose, but it works...</p>\n<pre><code>dlinkedList empty = new dlinkedList();\ndlinkedList sortedList = sortMenuSwitch(mainMenuInput());\ndlinkedList.sortedList = empty;\n</code></pre>\n"}],"owner":{"account_id":23893236,"reputation":1,"user_id":17892599,"display_name":"asporoc"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":74797079,"answer_count":1,"score":-2,"last_activity_date":1671015097,"creation_date":1670796391,"question_id":74764914,"body_markdown":"I&#39;m trying to Sort a list of Items using a recursive Quicksort, while testing i noticed that repeated use of the Method makes the size of my list double which is not intended.\r\n\r\n        /*list is filled with four Items:\r\n        item test = new item(234, 44.2, &quot;wardrobe&quot;, &quot;Example Wardrobe&quot;);\r\n        item test1 = new item(432, 87.2, &quot;Chair&quot;, &quot;Example Table&quot;);\r\n        item test2 = new item(007, 600.666, &quot;Table&quot;, &quot;Example Table&quot;);\r\n        item test3 = new item(02,5.4,&quot;Jar&quot;,&quot;Example Jar&quot;);*/\r\n\r\n        dlinkedList dList=Operations.fillList(); \r\n        dlinkedList list = dlinkedList.quicksortPrice(dList);\r\n        dlinkedList.printAllElements(list);\r\n        System.out.println(&quot; sorted once &quot;);\r\n        list = dlinkedList.quicksortPrice(dList);\r\n        dlinkedList.printAllElements(list);\r\n        System.out.println(&quot; sorted twice &quot;);\r\n\r\nExpected Output:\r\n\r\n| Name: Jar| Price: 5.4| Category: Example Jar  \r\n| Name: wardrobe| Price: 44.2| Category: Example Wardrobe  \r\n| Name: Chair| Price: 87.2| Category: Example Table  \r\n| Name: Table| Price: 600.666| Category: Example Table  \r\n sorted once\r\n \r\n| Name: Jar| Price: 5.4| Category: Example Jar  \r\n| Name: wardrobe| Price: 44.2| Category: Example Wardrobe  \r\n| Name: Chair| Price: 87.2| Category: Example Table  \r\n| Name: Table| Price: 600.666| Category: Example Table  \r\nsorted twice\r\n\r\n\r\nActual Output:\r\n\r\n| Name: Jar| Price: 5.4| Category: Example Jar  \r\n| Name: wardrobe| Price: 44.2| Category: Example Wardrobe  \r\n| Name: Chair| Price: 87.2| Category: Example Table  \r\n| Name: Table| Price: 600.666| Category: Example Table  \r\n sorted once\r\n \r\n| Name: Jar| Price: 5.4| Category: Example Jar  \r\n| Name: wardrobe| Price: 44.2| Category: Example Wardrobe  \r\n| Name: Chair| Price: 87.2| Category: Example Table  \r\n| Name: Table| Price: 600.666| Category: Example Table  \r\n| Name: wardrobe| Price: 44.2| Category: Example Wardrobe  \r\n| Name: Chair| Price: 87.2| Category: Example Table  \r\n| Name: Table| Price: 600.666| Category: Example Table\r\nsorted twice\r\n\r\n\r\n``` \r\n\r\n    static dlinkedList sortedList = new dlinkedList();\r\n    public static dlinkedList quicksortPrice(dlinkedList list) {\r\n        dlinkedList smaller = new dlinkedList();\r\n        dlinkedList greater = new dlinkedList();\r\n        Node y = list.head;\r\n        pivot = list.tail;\r\n            if (pivot == null) {\r\n                return sortedList;\r\n            } else {\r\n                if (numberOfElements(sortedList) == 0){\r\n                    sortedList.addAtEndOfList(pivot.data);\r\n                }\r\n                while (y.next != null) {\r\n                    if (y.data.price &lt; pivot.data.price) {\r\n                        smaller.addAtEndOfList(y.data);\r\n                        y = y.next;\r\n                    } else if (y.data.price &gt; pivot.data.price) {\r\n                        greater.addAtEndOfList(y.data);\r\n                        y = y.next;\r\n                    } else {\r\n                        sortedList.insertAfterNode(sortedList.tail, y.data, sortedList);\r\n                        y = y.next;\r\n                    }\r\n                }\r\n                if(numberOfElements(greater) == 0){\r\n                }else{\r\n                    sortedList.insertAfterNode(sortedList.searchByPrice(pivot.data.price),   greater.tail.data,sortedList);\r\n                }\r\n                if (numberOfElements(smaller) == 0) {\r\n                }else{\r\n                  sortedList.insertBeforeNode(sortedList.searchByPrice(pivot.data.price),smaller.tail.data,sortedList  );\r\n                }\r\n                if(numberOfElements(smaller) == 0 &amp;&amp; numberOfElements(greater) == 0){\r\n                return sortedList;\r\n                }else{\r\n                    quicksortPrice(smaller);\r\n                    quicksortPrice(greater);}\r\n            }\r\n        return sortedList;\r\n    }\r\n\r\n\r\n```\r\n\r\n\r\n\r\nI&#39;ve narrowed my problem down to the static list I use to store the sorted Items between the recursive Iterations, but sadly I don&#39;t know how to solve the Problem. I&#39;ve tried to clear the list between every sort but that empties the whole list for some reason... \r\nAny Help would be much appreciated.","title":"Java recursive Quicksort problem with persistent variables","body":"<p>I'm trying to Sort a list of Items using a recursive Quicksort, while testing i noticed that repeated use of the Method makes the size of my list double which is not intended.</p>\n<pre><code>    /*list is filled with four Items:\n    item test = new item(234, 44.2, &quot;wardrobe&quot;, &quot;Example Wardrobe&quot;);\n    item test1 = new item(432, 87.2, &quot;Chair&quot;, &quot;Example Table&quot;);\n    item test2 = new item(007, 600.666, &quot;Table&quot;, &quot;Example Table&quot;);\n    item test3 = new item(02,5.4,&quot;Jar&quot;,&quot;Example Jar&quot;);*/\n\n    dlinkedList dList=Operations.fillList(); \n    dlinkedList list = dlinkedList.quicksortPrice(dList);\n    dlinkedList.printAllElements(list);\n    System.out.println(&quot; sorted once &quot;);\n    list = dlinkedList.quicksortPrice(dList);\n    dlinkedList.printAllElements(list);\n    System.out.println(&quot; sorted twice &quot;);\n</code></pre>\n<p>Expected Output:</p>\n<p>| Name: Jar| Price: 5.4| Category: Example Jar<br />\n| Name: wardrobe| Price: 44.2| Category: Example Wardrobe<br />\n| Name: Chair| Price: 87.2| Category: Example Table<br />\n| Name: Table| Price: 600.666| Category: Example Table<br />\nsorted once</p>\n<p>| Name: Jar| Price: 5.4| Category: Example Jar<br />\n| Name: wardrobe| Price: 44.2| Category: Example Wardrobe<br />\n| Name: Chair| Price: 87.2| Category: Example Table<br />\n| Name: Table| Price: 600.666| Category: Example Table<br />\nsorted twice</p>\n<p>Actual Output:</p>\n<p>| Name: Jar| Price: 5.4| Category: Example Jar<br />\n| Name: wardrobe| Price: 44.2| Category: Example Wardrobe<br />\n| Name: Chair| Price: 87.2| Category: Example Table<br />\n| Name: Table| Price: 600.666| Category: Example Table<br />\nsorted once</p>\n<p>| Name: Jar| Price: 5.4| Category: Example Jar<br />\n| Name: wardrobe| Price: 44.2| Category: Example Wardrobe<br />\n| Name: Chair| Price: 87.2| Category: Example Table<br />\n| Name: Table| Price: 600.666| Category: Example Table<br />\n| Name: wardrobe| Price: 44.2| Category: Example Wardrobe<br />\n| Name: Chair| Price: 87.2| Category: Example Table<br />\n| Name: Table| Price: 600.666| Category: Example Table\nsorted twice</p>\n<pre><code>\n    static dlinkedList sortedList = new dlinkedList();\n    public static dlinkedList quicksortPrice(dlinkedList list) {\n        dlinkedList smaller = new dlinkedList();\n        dlinkedList greater = new dlinkedList();\n        Node y = list.head;\n        pivot = list.tail;\n            if (pivot == null) {\n                return sortedList;\n            } else {\n                if (numberOfElements(sortedList) == 0){\n                    sortedList.addAtEndOfList(pivot.data);\n                }\n                while (y.next != null) {\n                    if (y.data.price &lt; pivot.data.price) {\n                        smaller.addAtEndOfList(y.data);\n                        y = y.next;\n                    } else if (y.data.price &gt; pivot.data.price) {\n                        greater.addAtEndOfList(y.data);\n                        y = y.next;\n                    } else {\n                        sortedList.insertAfterNode(sortedList.tail, y.data, sortedList);\n                        y = y.next;\n                    }\n                }\n                if(numberOfElements(greater) == 0){\n                }else{\n                    sortedList.insertAfterNode(sortedList.searchByPrice(pivot.data.price),   greater.tail.data,sortedList);\n                }\n                if (numberOfElements(smaller) == 0) {\n                }else{\n                  sortedList.insertBeforeNode(sortedList.searchByPrice(pivot.data.price),smaller.tail.data,sortedList  );\n                }\n                if(numberOfElements(smaller) == 0 &amp;&amp; numberOfElements(greater) == 0){\n                return sortedList;\n                }else{\n                    quicksortPrice(smaller);\n                    quicksortPrice(greater);}\n            }\n        return sortedList;\n    }\n\n\n</code></pre>\n<p>I've narrowed my problem down to the static list I use to store the sorted Items between the recursive Iterations, but sadly I don't know how to solve the Problem. I've tried to clear the list between every sort but that empties the whole list for some reason...\nAny Help would be much appreciated.</p>\n"},{"tags":["java","android","sockets","socket.io"],"answers":[{"tags":[],"owner":{"account_id":3044819,"reputation":8098,"user_id":2580791,"accept_rate":82,"display_name":"Mike Laren"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1475520603,"creation_date":1475520603,"answer_id":39838432,"question_id":39838376,"body_markdown":"You can extract the file descriptor of a socket using:\r\n\r\n    ParcelFileDescriptor.fromSocket(socket).getFileDescriptor(); \r\n\r\nSource: [android-developers][1]\r\n\r\n\r\n  [1]: https://groups.google.com/forum/#!topic/android-developers/38Y4L3Sliak","title":"File descriptor for socket.io in Java (android)?","body":"<p>You can extract the file descriptor of a socket using:</p>\n\n<pre><code>ParcelFileDescriptor.fromSocket(socket).getFileDescriptor(); \n</code></pre>\n\n<p>Source: <a href=\"https://groups.google.com/forum/#!topic/android-developers/38Y4L3Sliak\" rel=\"nofollow\">android-developers</a></p>\n"},{"tags":[],"owner":{"account_id":10963162,"reputation":61,"user_id":8055779,"display_name":"Vlad Bellegar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671015085,"creation_date":1671015085,"answer_id":74797077,"question_id":39838376,"body_markdown":"Mike Jaren&#39;s answer about using ParcelFileDescriptor is no so correct, due to this method creates new file descriptor, reflecting the original.\r\nWorking method for Java7+ (which android supports) for getting correct file descriptor of socket:\r\n\r\n    FileDescriptor fd = ((FileInputStream)socket.getInputStream()).getFD();\r\n\r\nSource: [other stackoverflow answer][1]\r\n\r\nAlso other method of getting socket&#39;s file descriptor on andorid (but complicated) with using java reflection may be seen [here][2].\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/11456019/8055779\r\n  [2]: https://stackoverflow.com/a/31885114/8055779","title":"File descriptor for socket.io in Java (android)?","body":"<p>Mike Jaren's answer about using ParcelFileDescriptor is no so correct, due to this method creates new file descriptor, reflecting the original.\nWorking method for Java7+ (which android supports) for getting correct file descriptor of socket:</p>\n<pre><code>FileDescriptor fd = ((FileInputStream)socket.getInputStream()).getFD();\n</code></pre>\n<p>Source: <a href=\"https://stackoverflow.com/a/11456019/8055779\">other stackoverflow answer</a></p>\n<p>Also other method of getting socket's file descriptor on andorid (but complicated) with using java reflection may be seen <a href=\"https://stackoverflow.com/a/31885114/8055779\">here</a>.</p>\n"}],"owner":{"account_id":2934391,"reputation":16039,"user_id":2513722,"accept_rate":50,"display_name":"mehulmpt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2684,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1671015085,"creation_date":1475520295,"question_id":39838376,"body_markdown":"I&#39;m creating a program to record the screen and use a socket to send the data over socket to server. I&#39;ve successfully implemented it on my sdcard but how do I create a socket from Socket.io library? setOutputFile asks for filedescriptor. Where is it in socket.io?\r\n\r\nSocket.io code:\r\n\r\n    try {\r\n                socket = IO.socket(&quot;http://192.168.0.105:3000&quot;);\r\n                socket.connect();\r\n    // works\r\n    \r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\nNow for mediarecorder:\r\n\r\n    mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.SURFACE);\r\n    mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);\r\n    // ... some more props...\r\n    mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);\r\n    mMediaRecorder.setOutputFile(NEED A FILE DESCRIPTOR HERE);\r\n\r\nHow do I go about this? Help!","title":"File descriptor for socket.io in Java (android)?","body":"<p>I'm creating a program to record the screen and use a socket to send the data over socket to server. I've successfully implemented it on my sdcard but how do I create a socket from Socket.io library? setOutputFile asks for filedescriptor. Where is it in socket.io?</p>\n\n<p>Socket.io code:</p>\n\n<pre><code>try {\n            socket = IO.socket(\"http://192.168.0.105:3000\");\n            socket.connect();\n// works\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n</code></pre>\n\n<p>Now for mediarecorder:</p>\n\n<pre><code>mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.SURFACE);\nmMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);\n// ... some more props...\nmMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);\nmMediaRecorder.setOutputFile(NEED A FILE DESCRIPTOR HERE);\n</code></pre>\n\n<p>How do I go about this? Help!</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":379763,"reputation":29886,"user_id":733345,"display_name":"Joe"},"score":1,"creation_date":1582025572,"post_id":60279722,"comment_id":106626560,"body_markdown":"https://stackoverflow.com/a/44033816/733345 has an example of this.","body":"<a href=\"https://stackoverflow.com/a/44033816/733345\">stackoverflow.com/a/44033816/733345</a> has an example of this."},{"owner":{"account_id":7194846,"reputation":411,"user_id":5493996,"display_name":"Gevorg Harutyunyan"},"score":0,"creation_date":1582025857,"post_id":60279722,"comment_id":106626709,"body_markdown":"Thanks @Joe it solved my problem.","body":"Thanks @Joe it solved my problem."}],"answers":[{"tags":[],"owner":{"account_id":2139333,"reputation":1649,"user_id":1898397,"accept_rate":67,"display_name":"Tarun Gupta"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1582025610,"creation_date":1582025610,"answer_id":60279963,"question_id":60279722,"body_markdown":"According to the [Javadocs](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/i18n/LocaleContextHolder.html) \r\n\r\n&gt; The LocaleContext will be inherited by any child threads spawned by the current thread if the inheritable flag is set to true.\r\n\r\nThis means locale can be set using the method  `setLocale(Locale locale, boolean inheritable)` by passing `inheritable` as true. So before spawning a new child thread you can call setLocale with `inheritable` equals to `true`.\r\n\r\n","title":"How to keep context when creating new thread in spring?","body":"<p>According to the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/i18n/LocaleContextHolder.html\" rel=\"nofollow noreferrer\">Javadocs</a> </p>\n\n<blockquote>\n  <p>The LocaleContext will be inherited by any child threads spawned by the current thread if the inheritable flag is set to true.</p>\n</blockquote>\n\n<p>This means locale can be set using the method  <code>setLocale(Locale locale, boolean inheritable)</code> by passing <code>inheritable</code> as true. So before spawning a new child thread you can call setLocale with <code>inheritable</code> equals to <code>true</code>.</p>\n"},{"tags":[],"owner":{"account_id":8855557,"reputation":745,"user_id":6613447,"accept_rate":78,"display_name":"袁文涛"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671015045,"creation_date":1671015045,"answer_id":74797070,"question_id":60279722,"body_markdown":"use `transmittable-thread-local`,add dependence to your pom.xml\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.alibaba&lt;/groupId&gt;\r\n      &lt;artifactId&gt;transmittable-thread-local&lt;/artifactId&gt;\r\n      &lt;version&gt;2.12.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nconvert you executorService like this\r\n\r\n    ExecutorService executorService = ...\r\n    executorService = TtlExecutors.getTtlExecutorService(executorService);","title":"How to keep context when creating new thread in spring?","body":"<p>use <code>transmittable-thread-local</code>,add dependence to your pom.xml</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.alibaba&lt;/groupId&gt;\n  &lt;artifactId&gt;transmittable-thread-local&lt;/artifactId&gt;\n  &lt;version&gt;2.12.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>convert you executorService like this</p>\n<pre><code>ExecutorService executorService = ...\nexecutorService = TtlExecutors.getTtlExecutorService(executorService);\n</code></pre>\n"}],"owner":{"account_id":7194846,"reputation":411,"user_id":5493996,"display_name":"Gevorg Harutyunyan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1786,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":60279963,"answer_count":2,"score":4,"last_activity_date":1671015045,"creation_date":1582024813,"question_id":60279722,"body_markdown":"    System.out.println(LocaleContextHolder.getLocale()); // zh\r\n    new Thread(() -&gt; {\r\n        System.out.println(LocaleContextHolder.getLocale()); // en_US\r\n    }).start();\r\n\r\nFrom parent thread, I see that context locale is &quot;zh&quot; from child thread, I see &quot;en_US&quot;. New thread is losing the context locale. Is there a way to pass context to new created thread?\r\n","title":"How to keep context when creating new thread in spring?","body":"<pre><code>System.out.println(LocaleContextHolder.getLocale()); // zh\nnew Thread(() -&gt; {\n    System.out.println(LocaleContextHolder.getLocale()); // en_US\n}).start();\n</code></pre>\n\n<p>From parent thread, I see that context locale is \"zh\" from child thread, I see \"en_US\". New thread is losing the context locale. Is there a way to pass context to new created thread?</p>\n"},{"tags":["java","json","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":7777159,"reputation":1084,"user_id":6886283,"display_name":"priyanksriv"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670955691,"creation_date":1670955691,"answer_id":74789334,"question_id":74788767,"body_markdown":"Based on the JSON structure, let&#39;s assume you have the following POJOs:\r\n```java\r\npublic class Report implements Serializable {\r\n    private Map&lt;String, Link&gt; links;\r\n    // getters, setters\r\n}\r\n\r\npublic class Link {\r\n    private String href;\r\n    // getters, setters\r\n}\r\n```\r\n\r\nNow instead of extracting the response body as a JSON `String`, convert it to POJO directly.\r\n```java\r\npublic Report getReportListByClientId(String clientId) {\r\n        \r\n        ResponseEntity&lt;Report&gt; responseEntity = null;\r\n        \r\n        try {\r\n            ..\r\n            responseEntity = restTemplate.exchange(uri, HttpMethod.GET, requestEntity, Report.class);\r\n            \r\n            return responseEntity.getBody();\r\n\r\n        } catch (Exception e) {\r\n           ..\r\n        }\r\n}\r\n```\r\n\r\nAssumption: the project has `Jackson` in classpath, so `MappingJacksonHttpMessageConverter` will be enabled by default with `RestTemplate` for the above method to work.","title":"How to extract data from JSON response coming from external REST API using RestTemplate in Spring Boot?","body":"<p>Based on the JSON structure, let's assume you have the following POJOs:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Report implements Serializable {\n    private Map&lt;String, Link&gt; links;\n    // getters, setters\n}\n\npublic class Link {\n    private String href;\n    // getters, setters\n}\n</code></pre>\n<p>Now instead of extracting the response body as a JSON <code>String</code>, convert it to POJO directly.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Report getReportListByClientId(String clientId) {\n        \n        ResponseEntity&lt;Report&gt; responseEntity = null;\n        \n        try {\n            ..\n            responseEntity = restTemplate.exchange(uri, HttpMethod.GET, requestEntity, Report.class);\n            \n            return responseEntity.getBody();\n\n        } catch (Exception e) {\n           ..\n        }\n}\n</code></pre>\n<p>Assumption: the project has <code>Jackson</code> in classpath, so <code>MappingJacksonHttpMessageConverter</code> will be enabled by default with <code>RestTemplate</code> for the above method to work.</p>\n"},{"tags":[],"owner":{"account_id":24626922,"reputation":59,"user_id":18526553,"display_name":"Beksultan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670955765,"creation_date":1670955765,"answer_id":74789357,"question_id":74788767,"body_markdown":"I will try to help u. You can use JsonPath to manipulate your string json.\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.jayway.jsonpath&lt;/groupId&gt;\r\n            &lt;artifactId&gt;json-path&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nadd this library to your code\r\nand then try to use this \r\n\r\n            String json = &quot;&quot;&quot;\r\n                {\r\n                    &quot;links&quot;: {\r\n                        &quot;RCDSO - Production Environment Cost&quot;: {\r\n                            &quot;href&quot;: &quot;href 1&quot;\r\n                        },\r\n                        &quot;RCDSO - Development &amp; UAT Environment Cost&quot;: {\r\n                            &quot;href&quot;: &quot;href 2&quot;\r\n                        },\r\n                        &quot;RCDSO - Total Cost for Prod - Compugen Managed&quot;: {\r\n                            &quot;href&quot;: &quot;href 3&quot;\r\n                        },\r\n                        &quot;RCDSO - Virtual Machine Cost&quot;: {\r\n                            &quot;href&quot;: &quot;href 4&quot;\r\n                        },\r\n                        &quot;RCDSO - Azure File Storage Cost&quot;: {\r\n                            &quot;href&quot;: &quot;href 5&quot;\r\n                        },\r\n                        &quot;RCDSO - Azure Backup and Site Recovery&quot;: {\r\n                            &quot;href&quot;: &quot;href 6&quot;\r\n                        },\r\n                        &quot;RCDSO - Azure App Services Cost&quot;: {\r\n                            &quot;href&quot;: &quot;href 7&quot;\r\n                        }\r\n                    }\r\n                }\r\n                &quot;&quot;&quot;;\r\n        Map&lt;String, Map&lt;String, String&gt;&gt; links = JsonPath.read(json, &quot;$.links&quot;);\r\n        links.forEach((key, value) -&gt; {\r\n            System.out.println(&quot;k = &quot; + key);\r\n            System.out.print(&quot;v = &quot;);\r\n            value.forEach((key2, value2) -&gt; {\r\n                System.out.println(&quot;key = &quot; + key2 + &quot; : value = &quot; + value2);\r\n            });\r\n        });","title":"How to extract data from JSON response coming from external REST API using RestTemplate in Spring Boot?","body":"<p>I will try to help u. You can use JsonPath to manipulate your string json.</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.jayway.jsonpath&lt;/groupId&gt;\n        &lt;artifactId&gt;json-path&lt;/artifactId&gt;\n        &lt;version&gt;2.7.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>add this library to your code\nand then try to use this</p>\n<pre><code>        String json = &quot;&quot;&quot;\n            {\n                &quot;links&quot;: {\n                    &quot;RCDSO - Production Environment Cost&quot;: {\n                        &quot;href&quot;: &quot;href 1&quot;\n                    },\n                    &quot;RCDSO - Development &amp; UAT Environment Cost&quot;: {\n                        &quot;href&quot;: &quot;href 2&quot;\n                    },\n                    &quot;RCDSO - Total Cost for Prod - Compugen Managed&quot;: {\n                        &quot;href&quot;: &quot;href 3&quot;\n                    },\n                    &quot;RCDSO - Virtual Machine Cost&quot;: {\n                        &quot;href&quot;: &quot;href 4&quot;\n                    },\n                    &quot;RCDSO - Azure File Storage Cost&quot;: {\n                        &quot;href&quot;: &quot;href 5&quot;\n                    },\n                    &quot;RCDSO - Azure Backup and Site Recovery&quot;: {\n                        &quot;href&quot;: &quot;href 6&quot;\n                    },\n                    &quot;RCDSO - Azure App Services Cost&quot;: {\n                        &quot;href&quot;: &quot;href 7&quot;\n                    }\n                }\n            }\n            &quot;&quot;&quot;;\n    Map&lt;String, Map&lt;String, String&gt;&gt; links = JsonPath.read(json, &quot;$.links&quot;);\n    links.forEach((key, value) -&gt; {\n        System.out.println(&quot;k = &quot; + key);\n        System.out.print(&quot;v = &quot;);\n        value.forEach((key2, value2) -&gt; {\n            System.out.println(&quot;key = &quot; + key2 + &quot; : value = &quot; + value2);\n        });\n    });\n</code></pre>\n"}],"owner":{"account_id":26662139,"reputation":45,"user_id":20274796,"display_name":"rsharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1314,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1671015015,"creation_date":1670952640,"question_id":74788767,"body_markdown":"I am working on spring boot application for consuming external API using RestTemplate.\r\n\r\nBelow is the service class that I have written to get response from external API:\r\n\r\n    public CustomOlapReports getReportListByClientId(String clientId) {\r\n    \t\tResponseEntity&lt;CustomOlapReports&gt; responseEntity = null;\r\n    \t\tCustomOlapReports jsonResponse = null;\r\n    \t\ttry {\r\n    \t\t\tfinal String uri = &quot;https://chapi.cloudhealthtech.com/olap_reports/custom?client_api_id=&quot;+clientId;\r\n    \t\t\tRestTemplate restTemplate = new RestTemplate();\r\n    \t\t\tHttpHeaders header = new HttpHeaders();\r\n    \t\t\theader.set(HttpHeaders.AUTHORIZATION, &quot;Bearer &quot;+apiKey);\r\n    \t\t\theader.set(HttpHeaders.ACCEPT, &quot;application/json&quot;);\r\n    \t\t\t\r\n    \t\t\tHttpEntity&lt;String&gt; requestEntity = new HttpEntity&lt;String&gt;(&quot;body&quot;,header);\r\n    \t\t\tresponseEntity = restTemplate.exchange(uri, HttpMethod.GET, requestEntity, CustomOlapReports.class);\r\n    \t\t\t\r\n    \t\t\tjsonResponse =  responseEntity.getBody();\t\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \treturn jsonResponse;\r\n    }\r\n\r\nThe following is the response that I am getting using exchange() method:\r\n\r\n    {\r\n        &quot;responseMessage&quot;: &quot;SUCCESS&quot;,\r\n        &quot;status&quot;: &quot;OK&quot;,\r\n        &quot;statusCode&quot;: 1,\r\n        &quot;response&quot;: {\r\n            &quot;links&quot;: {\r\n                &quot;RCDSO - Production Environment Cost&quot;: {\r\n                    &quot;href&quot;: &quot;href 1&quot;\r\n                },\r\n                &quot;RCDSO - Development &amp; UAT Environment Cost&quot;: {\r\n                    &quot;href&quot;: &quot;href 2&quot;\r\n                },\r\n                &quot;RCDSO - Total Cost for Prod - Compugen Managed&quot;: {\r\n                    &quot;href&quot;: &quot;href 3&quot;\r\n                },\r\n                &quot;RCDSO - Virtual Machine Cost&quot;: {\r\n                    &quot;href&quot;: &quot;href 4&quot;\r\n                },\r\n                &quot;RCDSO - Azure File Storage Cost&quot;: {\r\n                    &quot;href&quot;: &quot;href 5&quot;\r\n                },\r\n                &quot;RCDSO - Azure Backup and Site Recovery&quot;: {\r\n                    &quot;href&quot;: &quot;href 6&quot;\r\n                },\r\n                &quot;RCDSO - Azure App Services Cost&quot;: {\r\n                    &quot;href&quot;: &quot;href 7&quot;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /********************** CustomOlapReports.java *************************/\r\n    \r\n    @Getter\r\n    @Setter\r\n    public class CustomOlapReports {\r\n    \t\r\n    \t @JsonProperty(&quot;links&quot;) \r\n    \t private Links links;\r\n    }\r\n    /********************** Links.java *************************/\r\n    @Setter\r\n    @Getter\r\n    public class Links {\r\n    \t@JsonProperty(&quot;RCDSO - Production Environment Cost&quot;)\r\n    \tprivate RCDSOProductionEnvironmentCost rCDSOProductionEnvironmentCost;\r\n    \t\r\n    \t@JsonProperty(&quot;RCDSO - Development &amp; UAT Environment Cost&quot;)\r\n    \tprivate RCDSODevelopmentUATEnvironmentCost rCDSODevelopmentUATEnvironmentCost;\r\n    \t\r\n    \t@JsonProperty(&quot;RCDSO - Total Cost for Prod - Compugen Managed&quot;)\r\n    \tprivate RCDSOTotalCostForProdCompugenManaged rCDSOTotalCostForProdCompugenManaged;\r\n    \t\r\n    \t@JsonProperty(&quot;RCDSO - Virtual Machine Cost&quot;)\r\n    \tprivate RCDSOVirtualMachineCost rCDSOVirtualMachineCost;\r\n    \t\r\n    \t@JsonProperty(&quot;RCDSO - Azure File Storage Cost&quot;)\r\n    \tprivate RCDSOAzureFileStorageCost rCDSOAzureFileStorageCost;\r\n    \t\r\n    \t@JsonProperty(&quot;RCDSO - Azure Backup and Site Recovery&quot;)\r\n    \tprivate RCDSOAzureBackupAndSiteRecovery rCDSOAzureBackupAndSiteRecovery;\r\n    \t\r\n    \t@JsonProperty(&quot;RCDSO - Azure App Services Cost&quot;)\r\n    \tprivate RCDSOAzureAppServicesCost rCDSOAzureAppServicesCost;\r\n    }\r\n    /********************** RCDSOProductionEnvironmentCost.java *************************/\r\n    @Getter\r\n    @Setter\r\n    public class RCDSOProductionEnvironmentCost {\r\n    \t@JsonProperty(&quot;href&quot;)\r\n    \tprivate String href;\r\n    }\r\n    /********************** RCDSODevelopmentUATEnvironmentCost.java *************************/\r\n    @Getter\r\n    @Setter\r\n    public class RCDSODevelopmentUATEnvironmentCost {\r\n    \t@JsonProperty(&quot;href&quot;)\r\n    \tprivate String href;\r\n    }\r\n    /********************** RCDSOTotalCostForProdCompugenManaged.java *************************/\r\n    @Getter\r\n    @Setter\r\n    public class RCDSOTotalCostForProdCompugenManaged {\r\n    \t@JsonProperty(&quot;href&quot;)\r\n    \tprivate String href;\r\n    }\r\n    /********************** RCDSOVirtualMachineCost.java *************************/\r\n    @Getter\r\n    @Setter\r\n    public class RCDSOVirtualMachineCost {\r\n    \t@JsonProperty(&quot;href&quot;)\r\n    \tprivate String href;\r\n    }\r\n    /********************** RCDSOAzureFileStorageCost.java *************************/\r\n    @Getter\r\n    @Setter\r\n    public class RCDSOAzureFileStorageCost {\r\n    \t@JsonProperty(&quot;href&quot;)\r\n    \tprivate String href;\r\n    \r\n    }\r\n    /********************** RCDSOAzureBackupAndSiteRecovery.java *************************/\r\n    @Getter\r\n    @Setter\r\n    public class RCDSOAzureBackupAndSiteRecovery {\r\n    \t@JsonProperty(&quot;href&quot;)\r\n    \tprivate String href;\r\n    \r\n    }\r\n    /********************** RCDSOAzureAppServicesCost.java *************************/\r\n    @Getter\r\n    @Setter\r\n    public class RCDSOAzureAppServicesCost {\r\n    \t@JsonProperty(&quot;href&quot;)\r\n    \tprivate String href;\r\n    \r\n    }\r\n\r\nSo now, before sending response to client side in my application. I want to fetch data from this response and want to do some manipulation and convert that into custom POJO class. I tried using JSONObject but got some exceptions. \r\n\r\nI want to display this JSON data in HTML table using AJAX.\r\n\r\n**So how should I extract or get individual data from above JSON?**","title":"How to extract data from JSON response coming from external REST API using RestTemplate in Spring Boot?","body":"<p>I am working on spring boot application for consuming external API using RestTemplate.</p>\n<p>Below is the service class that I have written to get response from external API:</p>\n<pre><code>public CustomOlapReports getReportListByClientId(String clientId) {\n        ResponseEntity&lt;CustomOlapReports&gt; responseEntity = null;\n        CustomOlapReports jsonResponse = null;\n        try {\n            final String uri = &quot;https://chapi.cloudhealthtech.com/olap_reports/custom?client_api_id=&quot;+clientId;\n            RestTemplate restTemplate = new RestTemplate();\n            HttpHeaders header = new HttpHeaders();\n            header.set(HttpHeaders.AUTHORIZATION, &quot;Bearer &quot;+apiKey);\n            header.set(HttpHeaders.ACCEPT, &quot;application/json&quot;);\n            \n            HttpEntity&lt;String&gt; requestEntity = new HttpEntity&lt;String&gt;(&quot;body&quot;,header);\n            responseEntity = restTemplate.exchange(uri, HttpMethod.GET, requestEntity, CustomOlapReports.class);\n            \n            jsonResponse =  responseEntity.getBody();   \n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    return jsonResponse;\n}\n</code></pre>\n<p>The following is the response that I am getting using exchange() method:</p>\n<pre><code>{\n    &quot;responseMessage&quot;: &quot;SUCCESS&quot;,\n    &quot;status&quot;: &quot;OK&quot;,\n    &quot;statusCode&quot;: 1,\n    &quot;response&quot;: {\n        &quot;links&quot;: {\n            &quot;RCDSO - Production Environment Cost&quot;: {\n                &quot;href&quot;: &quot;href 1&quot;\n            },\n            &quot;RCDSO - Development &amp; UAT Environment Cost&quot;: {\n                &quot;href&quot;: &quot;href 2&quot;\n            },\n            &quot;RCDSO - Total Cost for Prod - Compugen Managed&quot;: {\n                &quot;href&quot;: &quot;href 3&quot;\n            },\n            &quot;RCDSO - Virtual Machine Cost&quot;: {\n                &quot;href&quot;: &quot;href 4&quot;\n            },\n            &quot;RCDSO - Azure File Storage Cost&quot;: {\n                &quot;href&quot;: &quot;href 5&quot;\n            },\n            &quot;RCDSO - Azure Backup and Site Recovery&quot;: {\n                &quot;href&quot;: &quot;href 6&quot;\n            },\n            &quot;RCDSO - Azure App Services Cost&quot;: {\n                &quot;href&quot;: &quot;href 7&quot;\n            }\n        }\n    }\n}\n\n/********************** CustomOlapReports.java *************************/\n\n@Getter\n@Setter\npublic class CustomOlapReports {\n    \n     @JsonProperty(&quot;links&quot;) \n     private Links links;\n}\n/********************** Links.java *************************/\n@Setter\n@Getter\npublic class Links {\n    @JsonProperty(&quot;RCDSO - Production Environment Cost&quot;)\n    private RCDSOProductionEnvironmentCost rCDSOProductionEnvironmentCost;\n    \n    @JsonProperty(&quot;RCDSO - Development &amp; UAT Environment Cost&quot;)\n    private RCDSODevelopmentUATEnvironmentCost rCDSODevelopmentUATEnvironmentCost;\n    \n    @JsonProperty(&quot;RCDSO - Total Cost for Prod - Compugen Managed&quot;)\n    private RCDSOTotalCostForProdCompugenManaged rCDSOTotalCostForProdCompugenManaged;\n    \n    @JsonProperty(&quot;RCDSO - Virtual Machine Cost&quot;)\n    private RCDSOVirtualMachineCost rCDSOVirtualMachineCost;\n    \n    @JsonProperty(&quot;RCDSO - Azure File Storage Cost&quot;)\n    private RCDSOAzureFileStorageCost rCDSOAzureFileStorageCost;\n    \n    @JsonProperty(&quot;RCDSO - Azure Backup and Site Recovery&quot;)\n    private RCDSOAzureBackupAndSiteRecovery rCDSOAzureBackupAndSiteRecovery;\n    \n    @JsonProperty(&quot;RCDSO - Azure App Services Cost&quot;)\n    private RCDSOAzureAppServicesCost rCDSOAzureAppServicesCost;\n}\n/********************** RCDSOProductionEnvironmentCost.java *************************/\n@Getter\n@Setter\npublic class RCDSOProductionEnvironmentCost {\n    @JsonProperty(&quot;href&quot;)\n    private String href;\n}\n/********************** RCDSODevelopmentUATEnvironmentCost.java *************************/\n@Getter\n@Setter\npublic class RCDSODevelopmentUATEnvironmentCost {\n    @JsonProperty(&quot;href&quot;)\n    private String href;\n}\n/********************** RCDSOTotalCostForProdCompugenManaged.java *************************/\n@Getter\n@Setter\npublic class RCDSOTotalCostForProdCompugenManaged {\n    @JsonProperty(&quot;href&quot;)\n    private String href;\n}\n/********************** RCDSOVirtualMachineCost.java *************************/\n@Getter\n@Setter\npublic class RCDSOVirtualMachineCost {\n    @JsonProperty(&quot;href&quot;)\n    private String href;\n}\n/********************** RCDSOAzureFileStorageCost.java *************************/\n@Getter\n@Setter\npublic class RCDSOAzureFileStorageCost {\n    @JsonProperty(&quot;href&quot;)\n    private String href;\n\n}\n/********************** RCDSOAzureBackupAndSiteRecovery.java *************************/\n@Getter\n@Setter\npublic class RCDSOAzureBackupAndSiteRecovery {\n    @JsonProperty(&quot;href&quot;)\n    private String href;\n\n}\n/********************** RCDSOAzureAppServicesCost.java *************************/\n@Getter\n@Setter\npublic class RCDSOAzureAppServicesCost {\n    @JsonProperty(&quot;href&quot;)\n    private String href;\n\n}\n</code></pre>\n<p>So now, before sending response to client side in my application. I want to fetch data from this response and want to do some manipulation and convert that into custom POJO class. I tried using JSONObject but got some exceptions.</p>\n<p>I want to display this JSON data in HTML table using AJAX.</p>\n<p><strong>So how should I extract or get individual data from above JSON?</strong></p>\n"},{"tags":["java","rest","jersey","form-submit","jersey-2.0"],"comments":[{"owner":{"account_id":1001388,"reputation":498,"user_id":1016161,"display_name":"Marek Potociar"},"score":0,"creation_date":1414166058,"post_id":26053697,"comment_id":41725401,"body_markdown":"For large entities, you need to manually buffer the entity into a temp file and then replace the entity stream to point to a stream that would read the entity from the temp file. There is no other off-the-shelf support in Jersey for this use case at this point available, I&#39;m afraid.","body":"For large entities, you need to manually buffer the entity into a temp file and then replace the entity stream to point to a stream that would read the entity from the temp file. There is no other off-the-shelf support in Jersey for this use case at this point available, I&#39;m afraid."}],"answers":[{"tags":[],"owner":{"account_id":1001388,"reputation":498,"user_id":1016161,"display_name":"Marek Potociar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1414166340,"creation_date":1414166340,"answer_id":26551708,"question_id":26053697,"body_markdown":"See my comment to your [issue opened against Jersey][1].\r\n\r\nEssentially you have already answered your question in the edited text. And, unfortunately, in case you need to deal with very large entities, you need to do the heavy lifting (buffering &amp; processing &amp; serving &amp; cleanup of the entity stream) manually at the moment.\r\n\r\n\r\n  [1]: https://java.net/jira/browse/JERSEY-2664?focusedCommentId=381362&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-381362","title":"How to get form data parameters from ContainerRequestContext","body":"<p>See my comment to your <a href=\"https://java.net/jira/browse/JERSEY-2664?focusedCommentId=381362&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-381362\" rel=\"nofollow\">issue opened against Jersey</a>.</p>\n\n<p>Essentially you have already answered your question in the edited text. And, unfortunately, in case you need to deal with very large entities, you need to do the heavy lifting (buffering &amp; processing &amp; serving &amp; cleanup of the entity stream) manually at the moment.</p>\n"}],"owner":{"account_id":2888898,"reputation":5558,"user_id":2478134,"accept_rate":42,"display_name":"HybrisHelp"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8190,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1671014721,"creation_date":1411714429,"question_id":26053697,"body_markdown":"I have used Jersey 2 to expose functionality (restful API).\r\n\r\nWhere I want to access form parameter at filter level, the way we have accessed `pathparam`,`queryparam` from `ContainerRequestContext.\r\n\r\nFilter:-\r\n\r\n    public class SecurityFilter implements ContainerRequestFilter, ContainerResponseFilter\r\n    {\r\n      private ResourceInfo ResourceInfo;\r\n    \r\n        // ignore this\r\n        public SecurityFilter(ResourceInfo ResourceInfo)\r\n        {\r\n           \r\n        }\r\n    \r\n        @Override\r\n    \tpublic void filter(ContainerRequestContext ctx) throws IOException\r\n    \t{\r\n            MultivaluedMap&lt;String, String&gt; pathparam = ctx.getUriInfo().getPathParameters();\r\n    \t\tMultivaluedMap&lt;String, String&gt; queryparam = ctx.getUriInfo().getQueryParameters();\r\n          // Here I want all form parameters \r\n        }    \r\n    \r\n        // ignore this     \r\n        @Override\r\n    \tpublic void filter(ContainerRequestContext requestContext, ContainerResponseContext responseContext) throws IOException\r\n    \t{\r\n    \r\n        }    \r\n    }\r\n\r\n\r\nSo how can I get the form parameters from `ContainerRequestContext` in above filter?\r\n\r\n---\r\n**EDIT :**\r\n\r\nI have one way to get form data is \r\n\r\n    ((ContainerRequest) context).bufferEntity();\r\n    // Read entity\r\n    FormDataMultiPart multiPart = ((ContainerRequest) context).readEntity(FormDataMultiPart.class);\r\n    String myValue =  multiPart.getField(&quot;foo&quot;).getValue();\r\n\r\nBut this won&#39;t work for large file because `((ContainerRequest) context).bufferEntity()` contain entity in memory so `Exceptionorg.glassfish.jersey.server.ContainerException: java.lang.OutOfMemoryError: Java heap space` exception occur.","title":"How to get form data parameters from ContainerRequestContext","body":"<p>I have used Jersey 2 to expose functionality (restful API).</p>\n<p>Where I want to access form parameter at filter level, the way we have accessed <code>pathparam</code>,<code>queryparam</code> from `ContainerRequestContext.</p>\n<p>Filter:-</p>\n<pre><code>public class SecurityFilter implements ContainerRequestFilter, ContainerResponseFilter\n{\n  private ResourceInfo ResourceInfo;\n\n    // ignore this\n    public SecurityFilter(ResourceInfo ResourceInfo)\n    {\n       \n    }\n\n    @Override\n    public void filter(ContainerRequestContext ctx) throws IOException\n    {\n        MultivaluedMap&lt;String, String&gt; pathparam = ctx.getUriInfo().getPathParameters();\n        MultivaluedMap&lt;String, String&gt; queryparam = ctx.getUriInfo().getQueryParameters();\n      // Here I want all form parameters \n    }    \n\n    // ignore this     \n    @Override\n    public void filter(ContainerRequestContext requestContext, ContainerResponseContext responseContext) throws IOException\n    {\n\n    }    \n}\n</code></pre>\n<p>So how can I get the form parameters from <code>ContainerRequestContext</code> in above filter?</p>\n<hr />\n<p><strong>EDIT :</strong></p>\n<p>I have one way to get form data is</p>\n<pre><code>((ContainerRequest) context).bufferEntity();\n// Read entity\nFormDataMultiPart multiPart = ((ContainerRequest) context).readEntity(FormDataMultiPart.class);\nString myValue =  multiPart.getField(&quot;foo&quot;).getValue();\n</code></pre>\n<p>But this won't work for large file because <code>((ContainerRequest) context).bufferEntity()</code> contain entity in memory so <code>Exceptionorg.glassfish.jersey.server.ContainerException: java.lang.OutOfMemoryError: Java heap space</code> exception occur.</p>\n"},{"tags":["java","popup","eclipse-rcp"],"answers":[{"tags":[],"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1671013968,"creation_date":1393520744,"answer_id":22075357,"question_id":22074499,"body_markdown":"Looking though the Eclipse source there does not seem to be a definitive way. The closest is some variant of \r\n\r\n    PlatformUI.getWorkbench().getActiveWorkbenchWindow().getShell();\r\n\r\nEven if this returns `null` that is still acceptable to `MessageDialog`.\r\n\r\n`DebugUIPlugin` has this more elaborate version:\r\n\r\n    public static Shell getShell() {\r\n      IWorkbenchWindow window = PlatformUI.getWorkbench().getActiveWorkbenchWindow();\r\n      if (window == null) {\r\n        IWorkbenchWindow[] windows = PlatformUI.getWorkbench().getWorkbenchWindows();\r\n        if (windows.length &gt; 0) {\r\n           return windows[0].getShell();\r\n        }\r\n      }\r\n      else {\r\n        return window.getShell();\r\n      }\r\n      return null;\r\n    }\r\n\r\nUse of `MessageDialog` from a `Job` is rare in the Eclipse source. As the Job runs asynchronously a popup from the Job could be rather unexpected.\r\n\r\nIn Eclipse 4 applications if you can get the `IEclipseContext` there should be an `IShellProvider` in the context. e4 apps can also use `StatusReporter` which does not need a shell.\r\n\r\nIn e4 applications you can also inject the active shell using:\r\n```java\r\n@Named(IServiceConstants.ACTIVE_SHELL) Shell shell\r\n```","title":"Eclipse RCP which shell to use for popups","body":"<p>Looking though the Eclipse source there does not seem to be a definitive way. The closest is some variant of</p>\n<pre><code>PlatformUI.getWorkbench().getActiveWorkbenchWindow().getShell();\n</code></pre>\n<p>Even if this returns <code>null</code> that is still acceptable to <code>MessageDialog</code>.</p>\n<p><code>DebugUIPlugin</code> has this more elaborate version:</p>\n<pre><code>public static Shell getShell() {\n  IWorkbenchWindow window = PlatformUI.getWorkbench().getActiveWorkbenchWindow();\n  if (window == null) {\n    IWorkbenchWindow[] windows = PlatformUI.getWorkbench().getWorkbenchWindows();\n    if (windows.length &gt; 0) {\n       return windows[0].getShell();\n    }\n  }\n  else {\n    return window.getShell();\n  }\n  return null;\n}\n</code></pre>\n<p>Use of <code>MessageDialog</code> from a <code>Job</code> is rare in the Eclipse source. As the Job runs asynchronously a popup from the Job could be rather unexpected.</p>\n<p>In Eclipse 4 applications if you can get the <code>IEclipseContext</code> there should be an <code>IShellProvider</code> in the context. e4 apps can also use <code>StatusReporter</code> which does not need a shell.</p>\n<p>In e4 applications you can also inject the active shell using:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Named(IServiceConstants.ACTIVE_SHELL) Shell shell\n</code></pre>\n"}],"owner":{"account_id":1192805,"reputation":586,"user_id":1165215,"accept_rate":59,"display_name":"Link19"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5686,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":1,"score":12,"last_activity_date":1671013968,"creation_date":1393518530,"question_id":22074499,"body_markdown":"I am trying to get hold of a shell in Eclipse RCP and bring up popups in my application and had gone through several resources/tutorials to achieve the task but without much luck.\r\n\r\nTried:\r\n--------\r\n\r\n    Display.getCurrent().getActiveShell();\r\nor\r\n\r\n    Display.getDefault().getActiveShell();\r\nor\r\n  \r\n      PlatformUI.getWorkbench().getActiveWorkbenchWindow().getShell();\r\n\r\nor sometimes even\r\n   \r\n\r\n     Display.getDefault().getShells()[0];\r\n\r\nBut different things seem to work in different situations.\r\n\r\nResources online have different views and most things I find say you shouldn&#39;t really use the `Display` class at all but I am trying to bring up a popup from within an eclipse Job. It&#39;s got to the end and failed and the popup needs to be displayed using:\r\n\r\nCode:\r\n---------\r\n\r\n\t\t\tDisplay.getCurrent().syncExec(new Runnable() {\r\n\t\t\t\t\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void run() {\r\n\r\n\t\t\t\t\t\tMessageDialog.openError(Display.getDefault().getActiveShell(), &quot;Publish&quot;, e.getMessage());\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\nThe popup is inside a Runnable being executed from a Thread started from an Eclipse Job. It&#39;s complex but necessary to provide progress bar updates whilst calling a synchronous method on a server.\r\n\r\nIt doesn&#39;t work and I don&#39;t know why. Just getting a null from the getActiveShell() call.\r\n\r\nThe real question though isn&#39;t &#39;why doesn&#39;t my code work&#39; but was is the definitively correct way to get a shell for a popup in Eclipse RCP framework, and especial in situations where you can&#39;t access a workbench?\r\n","title":"Eclipse RCP which shell to use for popups","body":"<p>I am trying to get hold of a shell in Eclipse RCP and bring up popups in my application and had gone through several resources/tutorials to achieve the task but without much luck.</p>\n\n<h2>Tried:</h2>\n\n<pre><code>Display.getCurrent().getActiveShell();\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Display.getDefault().getActiveShell();\n</code></pre>\n\n<p>or</p>\n\n<pre><code>  PlatformUI.getWorkbench().getActiveWorkbenchWindow().getShell();\n</code></pre>\n\n<p>or sometimes even</p>\n\n<pre><code> Display.getDefault().getShells()[0];\n</code></pre>\n\n<p>But different things seem to work in different situations.</p>\n\n<p>Resources online have different views and most things I find say you shouldn't really use the <code>Display</code> class at all but I am trying to bring up a popup from within an eclipse Job. It's got to the end and failed and the popup needs to be displayed using:</p>\n\n<h2>Code:</h2>\n\n<pre><code>        Display.getCurrent().syncExec(new Runnable() {\n\n            @Override\n            public void run() {\n\n                    MessageDialog.openError(Display.getDefault().getActiveShell(), \"Publish\", e.getMessage());\n\n\n            }\n        });\n    }\n</code></pre>\n\n<p>The popup is inside a Runnable being executed from a Thread started from an Eclipse Job. It's complex but necessary to provide progress bar updates whilst calling a synchronous method on a server.</p>\n\n<p>It doesn't work and I don't know why. Just getting a null from the getActiveShell() call.</p>\n\n<p>The real question though isn't 'why doesn't my code work' but was is the definitively correct way to get a shell for a popup in Eclipse RCP framework, and especial in situations where you can't access a workbench?</p>\n"},{"tags":["java","spring-boot","caching"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1671036402,"post_id":74796843,"comment_id":132012327,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":27249644,"reputation":1,"user_id":20774319,"display_name":"2Na1Ve"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671013880,"creation_date":1671013880,"question_id":74796843,"body_markdown":"Requirements:\r\nThere has a huge number of data from rabbitMq every hour, but the environment is not stable and may cause the project restart and data lack. I want to know the number of the data lack when it occure everyday. Beacuse the volume of data is huge I have to use caffine cache. The large volume of data led me to use caffine caching instead of using database record information. Now the problem is that when the project is restarted, the data in the Caffine cache is cleared and I have no way of knowing when a data miss occurs.\r\n\r\nI used to use mongodb to record the time I received data and calcute the time period ","title":"How to get the time when Caffine cache is emptied due to project restart","body":"<p>Requirements:\nThere has a huge number of data from rabbitMq every hour, but the environment is not stable and may cause the project restart and data lack. I want to know the number of the data lack when it occure everyday. Beacuse the volume of data is huge I have to use caffine cache. The large volume of data led me to use caffine caching instead of using database record information. Now the problem is that when the project is restarted, the data in the Caffine cache is cleared and I have no way of knowing when a data miss occurs.</p>\n<p>I used to use mongodb to record the time I received data and calcute the time period</p>\n"},{"tags":["java","asynchronous","grpc","nonblocking","completable-future"],"comments":[{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":1,"creation_date":1670239665,"post_id":74683791,"comment_id":131822388,"body_markdown":"For question 1, you will reduce the number of threads if you rely on asynchronous I/O, if your RPC client allows for it. For question 3 you should definitely use different thread-pools for CPU-bound and I/O-bound tasks. And if you have tasks that mix the two, you should use a thread-pool that is appropriately sized for it, depending on the percentage of time spent on each. If you are worried about the complexity of async code, maybe have a look at [ea-async](https://github.com/electronicarts/ea-async/).","body":"For question 1, you will reduce the number of threads if you rely on asynchronous I/O, if your RPC client allows for it. For question 3 you should definitely use different thread-pools for CPU-bound and I/O-bound tasks. And if you have tasks that mix the two, you should use a thread-pool that is appropriately sized for it, depending on the percentage of time spent on each. If you are worried about the complexity of async code, maybe have a look at <a href=\"https://github.com/electronicarts/ea-async/\" rel=\"nofollow noreferrer\">ea-async</a>."},{"owner":{"account_id":2860674,"reputation":2162,"user_id":2456013,"accept_rate":73,"display_name":"HLP"},"score":0,"creation_date":1670268182,"post_id":74683791,"comment_id":131832515,"body_markdown":"Thanks a lot for the response! QQ, for question 1 you are saying it leads to less thread. Looking at my Java example above, I feel like I am just moving the problem from the &quot;request thread&quot; to whatever thread CompletableFuture ends-up spawning in methodD, is that not correct? (i.e. MethodD thread need to remain alive waiting for the IO output). How can the RPC Client wait for a response without having any thread alive to listen to the response? Even if it was possible, do you feel like saving that thread is worth all the overhead of CompletableFuture and spawning multiple extra async thread?","body":"Thanks a lot for the response! QQ, for question 1 you are saying it leads to less thread. Looking at my Java example above, I feel like I am just moving the problem from the &quot;request thread&quot; to whatever thread CompletableFuture ends-up spawning in methodD, is that not correct? (i.e. MethodD thread need to remain alive waiting for the IO output). How can the RPC Client wait for a response without having any thread alive to listen to the response? Even if it was possible, do you feel like saving that thread is worth all the overhead of CompletableFuture and spawning multiple extra async thread?"},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":1,"creation_date":1670269591,"post_id":74683791,"comment_id":131832947,"body_markdown":"As with most performance issues, the best thing you can do is measure your throughput and compare between the different options. Your thoughts all sound reasonable, but performance is often counterintuitive, and definitely depends on many factors (eg your &quot;some functions are CPU-expensive&quot;).","body":"As with most performance issues, the best thing you can do is measure your throughput and compare between the different options. Your thoughts all sound reasonable, but performance is often counterintuitive, and definitely depends on many factors (eg your &quot;some functions are CPU-expensive&quot;)."},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":1,"creation_date":1670272244,"post_id":74683791,"comment_id":131833696,"body_markdown":"I’m saying it reduces thge number of threads _if you rely on asynchronous I/O_. It’s the whole point of this approach. [gRPC appears to support it](https://grpc.io/docs/languages/java/basics/#instantiating-a-stub). In that case, no thread is waiting for the response. The JVM will invoke a callback (on another thread) when data is available. Reducing the number of threads usually improves performance by reducing the amount of context switching between those threads (as well as the amount of memory used).","body":"I’m saying it reduces thge number of threads <i>if you rely on asynchronous I/O</i>. It’s the whole point of this approach. <a href=\"https://grpc.io/docs/languages/java/basics/#instantiating-a-stub\" rel=\"nofollow noreferrer\">gRPC appears to support it</a>. In that case, no thread is waiting for the response. The JVM will invoke a callback (on another thread) when data is available. Reducing the number of threads usually improves performance by reducing the amount of context switching between those threads (as well as the amount of memory used)."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1670462685,"post_id":74683791,"comment_id":131883884,"body_markdown":"I don&#39;t understand. Are you asking to run `methodB` and `methodC` in parallel? And kicking off `methodB` would then kick off `methodD` and `methodE` in parallel? Or are you asking something different? Please explain in detail the order of method execution, and specify which methods are running in parallel, and which are running sequentially.","body":"I don&#39;t understand. Are you asking to run <code>methodB</code> and <code>methodC</code> in parallel? And kicking off <code>methodB</code> would then kick off <code>methodD</code> and <code>methodE</code> in parallel? Or are you asking something different? Please explain in detail the order of method execution, and specify which methods are running in parallel, and which are running sequentially."},{"owner":{"account_id":2860674,"reputation":2162,"user_id":2456013,"accept_rate":73,"display_name":"HLP"},"score":1,"creation_date":1670465027,"post_id":74683791,"comment_id":131884195,"body_markdown":"In this example nothing is running in parallel, all methods are running sequentially as described in the Java code. My understanding is that CompletableFuture is used, in our code base, mostly to ensure that we don’t block the main thread on IO, but I’m trying to understand what’s the advantage  of not blocking the request thread. At the end of the day some thread (MethodD’s CompletableFuture) is waiting for the IO, it just happens that it’s not the initial request thread. Do you think CompletableFuture should only be used to achieve parallelism?","body":"In this example nothing is running in parallel, all methods are running sequentially as described in the Java code. My understanding is that CompletableFuture is used, in our code base, mostly to ensure that we don’t block the main thread on IO, but I’m trying to understand what’s the advantage  of not blocking the request thread. At the end of the day some thread (MethodD’s CompletableFuture) is waiting for the IO, it just happens that it’s not the initial request thread. Do you think CompletableFuture should only be used to achieve parallelism?"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1670528514,"post_id":74683791,"comment_id":131901549,"body_markdown":"@HenriLapierre Ahhhh, I understand your question much better now. I would copy and paste your comment into your question - future readers will understand your dilemma much better. I am writing up an answer for you now.","body":"@HenriLapierre Ahhhh, I understand your question much better now. I would copy and paste your comment into your question - future readers will understand your dilemma much better. I am writing up an answer for you now."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1671007769,"post_id":74683791,"comment_id":132001798,"body_markdown":"There’s a contradiction in your statement “*all methods are running sequentially*” and the fact that you are using `supplyAsync`. The operation within the supplier is *not* running sequentially.","body":"There’s a contradiction in your statement “<i>all methods are running sequentially</i>” and the fact that you are using <code>supplyAsync</code>. The operation within the supplier is <i>not</i> running sequentially."}],"answers":[{"tags":[],"owner":{"account_id":173621,"reputation":10596,"user_id":402428,"display_name":"michid"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1670443950,"creation_date":1670443950,"answer_id":74722404,"question_id":74683791,"body_markdown":"On the first question: there is no need to wrap all intermediate calls into `CompleteableFuture`s if these are all sequential. You can as well wrap the chain of sequential calls into one single `CompleteableFuture`: \r\n\r\n    public void myEndpoint() throws ExecutionException, InterruptedException {\r\n        CompletableFuture.supplyAsync(() -&gt; methodA(10))\r\n            .thenApply((response) -&gt; responseObserver.next(response));\r\n    }\r\n\r\n    public int methodA(Integer input) {\r\n        var i = methodC((methodB(input)));\r\n        System.out.println(&quot;MethodA executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + i));\r\n        return i;\r\n    }\r\n\r\n    public int methodB(Integer input) {\r\n        var i = methodE(methodD(input));\r\n        System.out.println(&quot;MethodB executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + i));\r\n        return i;\r\n    }\r\n\r\n    public int methodC(Integer input) {\r\n        var i = methodG(methodF(input));\r\n        System.out.println(&quot;MethodC executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + i));\r\n        return i;\r\n    }\r\n\r\n    public Integer methodD(Integer input) {\r\n        try {\r\n            // Assume it&#39;s a RPC call that takes 5-30ms\r\n            Thread.sleep(20);\r\n            System.out.println(&quot;MethodD executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + input));\r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        return input + 1;\r\n    }\r\n\r\n    public int methodE(Integer input) {\r\n        System.out.println(&quot;MethodE executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + input));\r\n        return input + 1;\r\n    }\r\n\r\n    public int methodF(Integer input) {\r\n        try {\r\n            // Let&#39;s assume it&#39;s a CPU intensive work that takes 2-5ms\r\n            Thread.sleep(5);\r\n            System.out.println(&quot;MethodF executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + input));\r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        return input + 1;\r\n    }\r\n\r\n    public int methodG(Integer input) {\r\n        System.out.println(&quot;MethodG executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + input));\r\n        return input + 1;\r\n    }\r\n\r\nThe result is the same and the main thread gets not blocked. Since there are far less `CompleteableFuture` instances, there is less overhead from handing calls over from one thread to another. \r\n\r\nThus for question 2, no this is not best practices the way your example code is structured. Use `CompleteableFuture` if you must, avoid it otherwise. For example you need to use `CompleteableFuture#thenCompose` when you don&#39;t have control over the API you are calling (i.e. you can&#39;t change the return type from `CompleteableFuture&lt;T&gt;` to plain `T`). Another case is when you want to take advantage of parallelism. But this is not applicable here. ","title":"Java CompletableFuture for sequential code","body":"<p>On the first question: there is no need to wrap all intermediate calls into <code>CompleteableFuture</code>s if these are all sequential. You can as well wrap the chain of sequential calls into one single <code>CompleteableFuture</code>:</p>\n<pre><code>public void myEndpoint() throws ExecutionException, InterruptedException {\n    CompletableFuture.supplyAsync(() -&gt; methodA(10))\n        .thenApply((response) -&gt; responseObserver.next(response));\n}\n\npublic int methodA(Integer input) {\n    var i = methodC((methodB(input)));\n    System.out.println(&quot;MethodA executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + i));\n    return i;\n}\n\npublic int methodB(Integer input) {\n    var i = methodE(methodD(input));\n    System.out.println(&quot;MethodB executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + i));\n    return i;\n}\n\npublic int methodC(Integer input) {\n    var i = methodG(methodF(input));\n    System.out.println(&quot;MethodC executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + i));\n    return i;\n}\n\npublic Integer methodD(Integer input) {\n    try {\n        // Assume it's a RPC call that takes 5-30ms\n        Thread.sleep(20);\n        System.out.println(&quot;MethodD executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + input));\n    } catch (InterruptedException e) {\n        throw new RuntimeException(e);\n    }\n    return input + 1;\n}\n\npublic int methodE(Integer input) {\n    System.out.println(&quot;MethodE executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + input));\n    return input + 1;\n}\n\npublic int methodF(Integer input) {\n    try {\n        // Let's assume it's a CPU intensive work that takes 2-5ms\n        Thread.sleep(5);\n        System.out.println(&quot;MethodF executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + input));\n    } catch (InterruptedException e) {\n        throw new RuntimeException(e);\n    }\n    return input + 1;\n}\n\npublic int methodG(Integer input) {\n    System.out.println(&quot;MethodG executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + input));\n    return input + 1;\n}\n</code></pre>\n<p>The result is the same and the main thread gets not blocked. Since there are far less <code>CompleteableFuture</code> instances, there is less overhead from handing calls over from one thread to another.</p>\n<p>Thus for question 2, no this is not best practices the way your example code is structured. Use <code>CompleteableFuture</code> if you must, avoid it otherwise. For example you need to use <code>CompleteableFuture#thenCompose</code> when you don't have control over the API you are calling (i.e. you can't change the return type from <code>CompleteableFuture&lt;T&gt;</code> to plain <code>T</code>). Another case is when you want to take advantage of parallelism. But this is not applicable here.</p>\n"},{"tags":[],"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1670573715,"creation_date":1670532915,"answer_id":74736229,"question_id":74683791,"body_markdown":"Your question is a little unclear, and I think your comment phrases the real question better. Copied and pasted below.\r\n\r\n&gt; In this example nothing is running in parallel, all methods are running sequentially as described in the Java code. My understanding is that CompletableFuture is used, in our code base, mostly to ensure that we don’t block the main thread on IO, but I’m trying to understand what’s the advantage of not blocking the request thread. At the end of the day some thread (MethodD’s CompletableFuture) is waiting for the IO, it just happens that it’s not the initial request thread. Do you think CompletableFuture should only be used to achieve parallelism?\r\n\r\nGreat question. \r\n\r\nWhen you write plain, sequential code with no `CompletableFuture&lt;T&gt;`, your code runs synchronously on a single thread. No new threads are made to run your code. However, when you make a `CompletableFuture&lt;T&gt;` and put a task on it, a couple of things occur.\r\n\r\n* A new thread is created\r\n* The task given to the `CompletableFuture&lt;T&gt;` is placed onto this new thread\r\n* ***Java then uses a scheduler to jump back and forth between the main thread and the new thread when doing work.***\r\n  * Now, if your computer has multiple cores, and the number of cores is larger than the number of threads, then the above may not happen. But typically, the number of threads your application uses is way more than 2/4/8, so the point I am making above is almost always true\r\n\r\nAs you can see, the 3rd bullet is the most important because this is where the biggest benefit of multithreading occurs. The Java scheduler allows you to pause and continue threads on the fly, so that every thread can make some progress over time.\r\n\r\nThis is powerful because ***some threads may be waiting on IO work to be completed.*** A thread that is waiting on IO work is essentially ***doing nothing and wasting its turn on the CPU core.*** \r\n\r\nBy using a Java scheduler, you can minimize (if not eliminate) the time wasted on a core, and quickly switch to a thread that is not waiting on IO work to continue.\r\n\r\nAnd this is probably the big benefit that your teammates are striving for. They want to ensure that all work that is being done wastes as little time as possible on the core. That is the big point.\r\n\r\n***That said***, whether or not they actually succeeded depends on a couple of different questions that I need you to answer.\r\n\r\n1. You mentioned `methodB` and `methodC`. Can any of these methods be run in parallel? Does `methodB` have to ***fully complete*** before `methodC` can be executed? Or can `methodC` ***run in parallel*** to `methodB`? The same question applies to `methodD` and `methodE`, or `methodF` and `methodG`. I understand that currently, they run sequentially and wait for each other to finish. That&#39;s not my question. I am asking if it is possible for them to run in parallel.\r\n\r\n2. Are you using rate limiting tools like `Semaphore` anywhere in your code? Ideally, I would limit the scope of your answer to explicit code that your team writes, but if you know for sure that one of your dependencies does it, then feel free to mention it too.\r\n\r\n* If your answers to question 1 is no, then 99% of the time, doing what your team is doing is a terrible idea. The only method that should be in its own separate thread is `methodA`, but it sounds like you are already doing that.\r\n* If you answer to question 1 is at least partly yes but question 2 is no, then your teammates are pretty much correct. Over time, try to get an idea about where and when it makes the most sense. But as a first pass solution? This isn&#39;t a horrible idea.\r\n    * If you said that B and C can be parallel, but D and E cannot, then wrapping B and C in `CompletableFuture&lt;T&gt;` makes sense, but not for D and E. They should just be basic sequential Java code. Unless of course, this a modular method/class that can be used in other code and might be parallel there. Nuance is required here, but starting with all of them being `CompletableFuture&lt;T&gt;` isn&#39;t a terrible first solution.\r\n* If your answer to question 1 is at least partly yes and your answer to question 2 is also yes, then you&#39;ll have to take a deep dive into your profiler to find the answer. Things like `Semaphore` are a different type of IO since they are a &quot;context-dependent&quot; tax that you pay depending on the state of your program around you. But since they are a construct that exists inside of your code, it becomes a dependable and measurable sort of IO that you can build deductions and assumptions off of. To keep my answer short, rate-limiting tools will allow you to make dependable assumptions about your code, and thus, any results from your profiler will be way more useful than they would be else where. `methodA` should definitely still be in its own separate thread.\r\n\r\nSo in short.\r\n* If 1 and 2 are yes, the answer is going to require nuance. Go into your profiler and find out.\r\n* If 1 is yes but 2 is no, your teammates are right. Change as needed, but go ahead with this solution.\r\n* If 1 is no, then your teammates are wrong. Make them change.\r\n\r\nAnd for all of these, `methodA` should be in its own separate thread no matter what.\r\n\r\n***EDIT*** - the original poster of the question has confirmed that the answer to question 1 and 2 are both no. Therefore, the team is wrong and should pull back this change. I will take this opportunity to explain in better detail why their decision is wrong.\r\n\r\nAs mentioned before, the big utility behind `CompletableFuture&lt;T&gt;` and other threading tools is that they allow you to do work on specific threads while other specific threads are waiting on some IO operation to finish. This is accomplished by switching between threads.\r\n\r\nHowever, if there is no IO operation being done, then you are not saving time because none of the threads were ever waiting. So you gain nothing by having `CompletableFuture&lt;T&gt;`. And worse yet, you actually lose performance by doing this.\r\n\r\nSee, when switching between threads like I just mentioned, you have to &quot;*page state*&quot;, which is the short way of saying &quot;*grab all the variables in scope for that thread and load them into main memory, while unloading all the data from the previous thread*&quot;. &quot;*Paging state*&quot; like this is fast, but it&#39;s not instantaneous. It costs you performance to switch threads like that.\r\n\r\nAnd to make matters worse, your teammates put this on ***every method***. So not only are they slowing down their code by a nontrivial amount just to pointlessly spin their wheels, but they are doing it extremely frequently, since this *de*optimization is occurring on every method.\r\n\r\nI would confront your team immediately and point out how damaging this is. They are explicitly in the wrong for doing this, and even if they were preparing for some inevitable future, this is still a terrible time to implement this. Wait until that time comes and build it out as the need arises. As is now, they are gutting their performance for no good reason.","title":"Java CompletableFuture for sequential code","body":"<p>Your question is a little unclear, and I think your comment phrases the real question better. Copied and pasted below.</p>\n<blockquote>\n<p>In this example nothing is running in parallel, all methods are running sequentially as described in the Java code. My understanding is that CompletableFuture is used, in our code base, mostly to ensure that we don’t block the main thread on IO, but I’m trying to understand what’s the advantage of not blocking the request thread. At the end of the day some thread (MethodD’s CompletableFuture) is waiting for the IO, it just happens that it’s not the initial request thread. Do you think CompletableFuture should only be used to achieve parallelism?</p>\n</blockquote>\n<p>Great question.</p>\n<p>When you write plain, sequential code with no <code>CompletableFuture&lt;T&gt;</code>, your code runs synchronously on a single thread. No new threads are made to run your code. However, when you make a <code>CompletableFuture&lt;T&gt;</code> and put a task on it, a couple of things occur.</p>\n<ul>\n<li>A new thread is created</li>\n<li>The task given to the <code>CompletableFuture&lt;T&gt;</code> is placed onto this new thread</li>\n<li><em><strong>Java then uses a scheduler to jump back and forth between the main thread and the new thread when doing work.</strong></em>\n<ul>\n<li>Now, if your computer has multiple cores, and the number of cores is larger than the number of threads, then the above may not happen. But typically, the number of threads your application uses is way more than 2/4/8, so the point I am making above is almost always true</li>\n</ul>\n</li>\n</ul>\n<p>As you can see, the 3rd bullet is the most important because this is where the biggest benefit of multithreading occurs. The Java scheduler allows you to pause and continue threads on the fly, so that every thread can make some progress over time.</p>\n<p>This is powerful because <em><strong>some threads may be waiting on IO work to be completed.</strong></em> A thread that is waiting on IO work is essentially <em><strong>doing nothing and wasting its turn on the CPU core.</strong></em></p>\n<p>By using a Java scheduler, you can minimize (if not eliminate) the time wasted on a core, and quickly switch to a thread that is not waiting on IO work to continue.</p>\n<p>And this is probably the big benefit that your teammates are striving for. They want to ensure that all work that is being done wastes as little time as possible on the core. That is the big point.</p>\n<p><em><strong>That said</strong></em>, whether or not they actually succeeded depends on a couple of different questions that I need you to answer.</p>\n<ol>\n<li><p>You mentioned <code>methodB</code> and <code>methodC</code>. Can any of these methods be run in parallel? Does <code>methodB</code> have to <em><strong>fully complete</strong></em> before <code>methodC</code> can be executed? Or can <code>methodC</code> <em><strong>run in parallel</strong></em> to <code>methodB</code>? The same question applies to <code>methodD</code> and <code>methodE</code>, or <code>methodF</code> and <code>methodG</code>. I understand that currently, they run sequentially and wait for each other to finish. That's not my question. I am asking if it is possible for them to run in parallel.</p>\n</li>\n<li><p>Are you using rate limiting tools like <code>Semaphore</code> anywhere in your code? Ideally, I would limit the scope of your answer to explicit code that your team writes, but if you know for sure that one of your dependencies does it, then feel free to mention it too.</p>\n</li>\n</ol>\n<ul>\n<li>If your answers to question 1 is no, then 99% of the time, doing what your team is doing is a terrible idea. The only method that should be in its own separate thread is <code>methodA</code>, but it sounds like you are already doing that.</li>\n<li>If you answer to question 1 is at least partly yes but question 2 is no, then your teammates are pretty much correct. Over time, try to get an idea about where and when it makes the most sense. But as a first pass solution? This isn't a horrible idea.\n<ul>\n<li>If you said that B and C can be parallel, but D and E cannot, then wrapping B and C in <code>CompletableFuture&lt;T&gt;</code> makes sense, but not for D and E. They should just be basic sequential Java code. Unless of course, this a modular method/class that can be used in other code and might be parallel there. Nuance is required here, but starting with all of them being <code>CompletableFuture&lt;T&gt;</code> isn't a terrible first solution.</li>\n</ul>\n</li>\n<li>If your answer to question 1 is at least partly yes and your answer to question 2 is also yes, then you'll have to take a deep dive into your profiler to find the answer. Things like <code>Semaphore</code> are a different type of IO since they are a &quot;context-dependent&quot; tax that you pay depending on the state of your program around you. But since they are a construct that exists inside of your code, it becomes a dependable and measurable sort of IO that you can build deductions and assumptions off of. To keep my answer short, rate-limiting tools will allow you to make dependable assumptions about your code, and thus, any results from your profiler will be way more useful than they would be else where. <code>methodA</code> should definitely still be in its own separate thread.</li>\n</ul>\n<p>So in short.</p>\n<ul>\n<li>If 1 and 2 are yes, the answer is going to require nuance. Go into your profiler and find out.</li>\n<li>If 1 is yes but 2 is no, your teammates are right. Change as needed, but go ahead with this solution.</li>\n<li>If 1 is no, then your teammates are wrong. Make them change.</li>\n</ul>\n<p>And for all of these, <code>methodA</code> should be in its own separate thread no matter what.</p>\n<p><em><strong>EDIT</strong></em> - the original poster of the question has confirmed that the answer to question 1 and 2 are both no. Therefore, the team is wrong and should pull back this change. I will take this opportunity to explain in better detail why their decision is wrong.</p>\n<p>As mentioned before, the big utility behind <code>CompletableFuture&lt;T&gt;</code> and other threading tools is that they allow you to do work on specific threads while other specific threads are waiting on some IO operation to finish. This is accomplished by switching between threads.</p>\n<p>However, if there is no IO operation being done, then you are not saving time because none of the threads were ever waiting. So you gain nothing by having <code>CompletableFuture&lt;T&gt;</code>. And worse yet, you actually lose performance by doing this.</p>\n<p>See, when switching between threads like I just mentioned, you have to &quot;<em>page state</em>&quot;, which is the short way of saying &quot;<em>grab all the variables in scope for that thread and load them into main memory, while unloading all the data from the previous thread</em>&quot;. &quot;<em>Paging state</em>&quot; like this is fast, but it's not instantaneous. It costs you performance to switch threads like that.</p>\n<p>And to make matters worse, your teammates put this on <em><strong>every method</strong></em>. So not only are they slowing down their code by a nontrivial amount just to pointlessly spin their wheels, but they are doing it extremely frequently, since this <em>de</em>optimization is occurring on every method.</p>\n<p>I would confront your team immediately and point out how damaging this is. They are explicitly in the wrong for doing this, and even if they were preparing for some inevitable future, this is still a terrible time to implement this. Wait until that time comes and build it out as the need arises. As is now, they are gutting their performance for no good reason.</p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1671013838,"creation_date":1671013838,"answer_id":74796834,"question_id":74683791,"body_markdown":"The premise is that threads are a scarce resource, which is not intrinsic to threads but a consequence of using a pool of threads with a configured maximum. The reason today’s frameworks use a pool is that threads, as implemented today, are expensive and creating too many of them can cause significant performance problems.\r\n\r\nYou wrote\r\n\r\n&gt; My understanding is that if we have enough memory to keep one thread per request, using a synchronous code would still probably be the most efficient implementation…\r\n\r\nwhich is going into the right direction, but it’s important to keep in mind that there might be more constraints than memory. Some operating system’s schedulers become significantly less efficient with a large number of threads, some may even have a fixed limit on how many threads a process is allowed to create.\r\n\r\nSo, when you block a thread by waiting for another, you are limiting the parallel processing capabilities of the thread pool. This applies if you are using, as you put it, a “true non-blocking” API, or just any already existing API that returns futures. Submitting your own operations via `supplyAsync` has no point as the supplier’s code still is executed by a thread, as you correctly pointed out.\r\n\r\nBut when you have an existing future returned by an operation, you should rather chain dependent processing steps instead of waiting for its result via `join` and friends. Note that calling `join()` on existing futures can make things even worse than just blocking threads:\r\n\r\nWhen you call `join()` on a `CompletableFuture`, it tries to compensate the problem. When the caller is a worker thread of a Fork/Join pool, one of two things can happen:\r\n\r\n - Instead of doing nothing, it may try to fetch pending jobs and execute them in-place, similar to [`awaitQuiescence`].\r\n   - In the best case, it will directly pick up the job you just scheduled with `supplyAsync` (if using the same pool) and execute it, almost as if you executed it without `CompletableFuture` (just consuming far more stack space).\r\n   - In the worst case, the thread will be busy executing a long running, entirely unrelated job while the job it’s actually waiting for has been completed long ago. Imagine what happens if that unrelated job also calls `join`.\r\n - It may end up actually blocking the thread but using [`ForkJoinPool.managedBlock(…)`], which may start a new worker thread to ensure that the pool’s configured parallelism is kept. Great to solve the problem of reduced parallelism, but on the other hand, reintroducing the very problem of resource consumption you actually wanted to solve with thread pools.\r\n\r\nThe worst of all is that you can’t even predict which of the two things will happen.\r\n\r\n---\r\n\r\nThere are, however, cases where not blocking a request thread by utilizing other threads has a point. Most notably when the response time for the request itself matters and the results of the background computation are delivered independent of the initial response. The most prominent example of this pattern is the event dispatch thread of GUI frameworks which must be kept free of long running operations, to be able to process subsequent user input.\r\n\r\n---\r\n\r\nNote that there is a general solution on the way, to make 99% of all future chains obsolete. [Virtual Threads], which are in preview state in JDK&#160;19, are cheap to create and allow to create one thread per request, just like you envisioned in the cite above. When a virtual thread gets blocked, it will release the underlying platform thread for the next virtual thread, so there is no reason to hesitate to call `join()` on any future, even those belonging to “true non-blocking” APIs.\r\n\r\nThe best way to interoperate with this concept and the status quo is to design methods to *not* return futures, but perform the operation in-place. It’s still possible to design a future chain when necessary, i.e. by using `.thenApplyAsync(this::inPlaceEvalMethod)` instead of `.thenCompose(this::futureReturningMethod)`. But at the same time, you can write a plain sequential version just calling these methods, which can be executed by a virtual thread. In fact, you could even add the plain sequential version today and benchmark both approaches. The results might convince your team members that “not blocking the request thread” is not necessarily an improvement.\r\n\r\n[`awaitQuiescence`]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ForkJoinPool.html#awaitQuiescence(long,java.util.concurrent.TimeUnit)\r\n[`ForkJoinPool.managedBlock(…)`]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ForkJoinPool.html#managedBlock(java.util.concurrent.ForkJoinPool.ManagedBlocker)\r\n[Virtual Threads]: https://bugs.openjdk.org/browse/JDK-8277131","title":"Java CompletableFuture for sequential code","body":"<p>The premise is that threads are a scarce resource, which is not intrinsic to threads but a consequence of using a pool of threads with a configured maximum. The reason today’s frameworks use a pool is that threads, as implemented today, are expensive and creating too many of them can cause significant performance problems.</p>\n<p>You wrote</p>\n<blockquote>\n<p>My understanding is that if we have enough memory to keep one thread per request, using a synchronous code would still probably be the most efficient implementation…</p>\n</blockquote>\n<p>which is going into the right direction, but it’s important to keep in mind that there might be more constraints than memory. Some operating system’s schedulers become significantly less efficient with a large number of threads, some may even have a fixed limit on how many threads a process is allowed to create.</p>\n<p>So, when you block a thread by waiting for another, you are limiting the parallel processing capabilities of the thread pool. This applies if you are using, as you put it, a “true non-blocking” API, or just any already existing API that returns futures. Submitting your own operations via <code>supplyAsync</code> has no point as the supplier’s code still is executed by a thread, as you correctly pointed out.</p>\n<p>But when you have an existing future returned by an operation, you should rather chain dependent processing steps instead of waiting for its result via <code>join</code> and friends. Note that calling <code>join()</code> on existing futures can make things even worse than just blocking threads:</p>\n<p>When you call <code>join()</code> on a <code>CompletableFuture</code>, it tries to compensate the problem. When the caller is a worker thread of a Fork/Join pool, one of two things can happen:</p>\n<ul>\n<li>Instead of doing nothing, it may try to fetch pending jobs and execute them in-place, similar to <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ForkJoinPool.html#awaitQuiescence(long,java.util.concurrent.TimeUnit)\" rel=\"nofollow noreferrer\"><code>awaitQuiescence</code></a>.\n<ul>\n<li>In the best case, it will directly pick up the job you just scheduled with <code>supplyAsync</code> (if using the same pool) and execute it, almost as if you executed it without <code>CompletableFuture</code> (just consuming far more stack space).</li>\n<li>In the worst case, the thread will be busy executing a long running, entirely unrelated job while the job it’s actually waiting for has been completed long ago. Imagine what happens if that unrelated job also calls <code>join</code>.</li>\n</ul>\n</li>\n<li>It may end up actually blocking the thread but using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ForkJoinPool.html#managedBlock(java.util.concurrent.ForkJoinPool.ManagedBlocker)\" rel=\"nofollow noreferrer\"><code>ForkJoinPool.managedBlock(…)</code></a>, which may start a new worker thread to ensure that the pool’s configured parallelism is kept. Great to solve the problem of reduced parallelism, but on the other hand, reintroducing the very problem of resource consumption you actually wanted to solve with thread pools.</li>\n</ul>\n<p>The worst of all is that you can’t even predict which of the two things will happen.</p>\n<hr />\n<p>There are, however, cases where not blocking a request thread by utilizing other threads has a point. Most notably when the response time for the request itself matters and the results of the background computation are delivered independent of the initial response. The most prominent example of this pattern is the event dispatch thread of GUI frameworks which must be kept free of long running operations, to be able to process subsequent user input.</p>\n<hr />\n<p>Note that there is a general solution on the way, to make 99% of all future chains obsolete. <a href=\"https://bugs.openjdk.org/browse/JDK-8277131\" rel=\"nofollow noreferrer\">Virtual Threads</a>, which are in preview state in JDK 19, are cheap to create and allow to create one thread per request, just like you envisioned in the cite above. When a virtual thread gets blocked, it will release the underlying platform thread for the next virtual thread, so there is no reason to hesitate to call <code>join()</code> on any future, even those belonging to “true non-blocking” APIs.</p>\n<p>The best way to interoperate with this concept and the status quo is to design methods to <em>not</em> return futures, but perform the operation in-place. It’s still possible to design a future chain when necessary, i.e. by using <code>.thenApplyAsync(this::inPlaceEvalMethod)</code> instead of <code>.thenCompose(this::futureReturningMethod)</code>. But at the same time, you can write a plain sequential version just calling these methods, which can be executed by a virtual thread. In fact, you could even add the plain sequential version today and benchmark both approaches. The results might convince your team members that “not blocking the request thread” is not necessarily an improvement.</p>\n"}],"owner":{"account_id":2860674,"reputation":2162,"user_id":2456013,"accept_rate":73,"display_name":"HLP"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1251,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":74796834,"answer_count":3,"score":8,"last_activity_date":1671013838,"creation_date":1670218690,"question_id":74683791,"body_markdown":"My new team is writing a Java gRPC service and to ensure that we never block the request thread we ended-up wrapping more or less ALL methods inside a [CompletableFuture][1] even if those endpoints are conceptually a sequential list of operation (no parallelism).\r\n\r\nSo the code look something like (a Java example is available at the end if needed) :\r\n\r\n      methodA()\r\n        methodB()\r\n          methodD() (let say this one is a 15ms RPC call)\r\n          methodE()\r\n        methodC()\r\n          methodF() (let say this one is a 5ms CPU intensive work)\r\n          methodG()\r\n     \r\n\r\nContext:\r\n- In practice the application is much bigger and there&#39;re many more layers of functions\r\n- Each application host need to handle 1000 QPS, so you can imagine that methodA is called at that rate\r\n- Some function (few) make a RPC call that can take 5-30ms (IO)\r\n- Some function (very few) run CPU intensive work (&lt; 5ms)\r\n\r\n**Edit 1:** After more reading online yesterday, I understand that **if, and only if, we are using true non-blocking HTTP and DB Client (and it doesn&#39;t seem like JDBC is non-blocking)**, this pattern can reduce the total number of threads required. My understanding is that if we have enough memory to keep one thread per request, using a synchronous code would still probably be the most efficient implementation (reduce the overhead of switching threads and loading data), but if we didn&#39;t have enough memory to keep that many threads alive, then this notion of making the whole code non-blocking can reduce the number of thread and thus allow the application to scale to more request.\r\n\r\n\r\n**Question 1:** \r\nI understand this unblocks the &quot;request thread&quot;, but in practice what&#39;s the advantage? Are we truly saving CPU time? In the example below, it feels like &quot;some&quot; thread will be alive the whole time anyways (in the example below, mostly the thread from CompletableFuture.supplyAsync in methodD), it just happens that it’s not the same thread as the one who received the initial request.\r\n\r\n**Question 2:**\r\nIs that pattern truly a &quot;best practice&quot; and all services should follow a similar pattern? Outside of making the code a bit harder to read I feel, per request 50+ methods gets invoked and 50+ times we call a mix of CompletableFuture `.thenCompose()` or `.supplyAsync`. It seems like it&#39;s would be adding some overhead. Was `CompletableFuture` designed to be used that way across the whole code base in every method?\r\n\r\n**Annex (java example):**\r\n\r\n\r\n      public void myEndpoint(MyRequest request, StreamObserver&lt;MyResponse&gt; responseObserver) {\r\n        methodA(10)\r\n            .thenApply((response) -&gt; responseObserver.next(response));\r\n        \r\n      }\r\n    \r\n      public CompletableFuture&lt;Integer&gt; methodA(Integer input) {\r\n        return CompletableFuture.completedFuture(input)\r\n            .thenCompose(this::methodB)\r\n            .thenCompose(this::methodC)\r\n            .thenApply((i) -&gt; {\r\n              System.out.println(&quot;MethodA executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + i));\r\n              return i;\r\n            });\r\n      }\r\n    \r\n      public CompletableFuture&lt;Integer&gt; methodB(Integer input) {\r\n        return CompletableFuture.completedFuture(input)\r\n            .thenCompose(this::methodD)\r\n            .thenCompose(this::methodE)\r\n            .thenApply((i) -&gt; {\r\n              System.out.println(&quot;MethodB executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + i));\r\n              return i;\r\n            });\r\n      }\r\n    \r\n      public CompletableFuture&lt;Integer&gt; methodC(Integer input) {\r\n        return CompletableFuture.completedFuture(input)\r\n            .thenCompose(this::methodF)\r\n            .thenCompose(this::methodG)\r\n            .thenApply((i) -&gt; {\r\n              System.out.println(&quot;MethodC executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + i));\r\n              return i;\r\n            });\r\n      }\r\n    \r\n      public CompletableFuture&lt;Integer&gt; methodD(Integer input) {\r\n        return CompletableFuture.supplyAsync(() -&gt; {\r\n          try {\r\n            // Assume it&#39;s a RPC call that takes 5-30ms\r\n            Thread.sleep(20);\r\n            System.out.println(&quot;MethodD executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + input));\r\n          } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n          }\r\n          return input + 1;\r\n        });\r\n      }\r\n    \r\n      public CompletableFuture&lt;Integer&gt; methodE(Integer input) {\r\n        return CompletableFuture.supplyAsync(() -&gt; {\r\n          System.out.println(&quot;MethodE executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + input));\r\n          return input + 1;\r\n        });\r\n      }\r\n    \r\n      public CompletableFuture&lt;Integer&gt; methodF(Integer input) {\r\n        return CompletableFuture.supplyAsync(() -&gt; {\r\n          try {\r\n            // Let&#39;s assume it&#39;s a CPU intensive work that takes 2-5ms\r\n            Thread.sleep(5);\r\n            System.out.println(&quot;MethodF executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + input));\r\n          } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n          }\r\n          return input + 1;\r\n        });\r\n      }\r\n    \r\n      public CompletableFuture&lt;Integer&gt; methodG(Integer input) {\r\n        return CompletableFuture.supplyAsync(() -&gt; {\r\n          System.out.println(&quot;MethodG executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + input));\r\n          return input + 1;\r\n        });\r\n      }\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html","title":"Java CompletableFuture for sequential code","body":"<p>My new team is writing a Java gRPC service and to ensure that we never block the request thread we ended-up wrapping more or less ALL methods inside a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\" rel=\"nofollow noreferrer\">CompletableFuture</a> even if those endpoints are conceptually a sequential list of operation (no parallelism).</p>\n<p>So the code look something like (a Java example is available at the end if needed) :</p>\n<pre><code>  methodA()\n    methodB()\n      methodD() (let say this one is a 15ms RPC call)\n      methodE()\n    methodC()\n      methodF() (let say this one is a 5ms CPU intensive work)\n      methodG()\n \n</code></pre>\n<p>Context:</p>\n<ul>\n<li>In practice the application is much bigger and there're many more layers of functions</li>\n<li>Each application host need to handle 1000 QPS, so you can imagine that methodA is called at that rate</li>\n<li>Some function (few) make a RPC call that can take 5-30ms (IO)</li>\n<li>Some function (very few) run CPU intensive work (&lt; 5ms)</li>\n</ul>\n<p><strong>Edit 1:</strong> After more reading online yesterday, I understand that <strong>if, and only if, we are using true non-blocking HTTP and DB Client (and it doesn't seem like JDBC is non-blocking)</strong>, this pattern can reduce the total number of threads required. My understanding is that if we have enough memory to keep one thread per request, using a synchronous code would still probably be the most efficient implementation (reduce the overhead of switching threads and loading data), but if we didn't have enough memory to keep that many threads alive, then this notion of making the whole code non-blocking can reduce the number of thread and thus allow the application to scale to more request.</p>\n<p><strong>Question 1:</strong>\nI understand this unblocks the &quot;request thread&quot;, but in practice what's the advantage? Are we truly saving CPU time? In the example below, it feels like &quot;some&quot; thread will be alive the whole time anyways (in the example below, mostly the thread from CompletableFuture.supplyAsync in methodD), it just happens that it’s not the same thread as the one who received the initial request.</p>\n<p><strong>Question 2:</strong>\nIs that pattern truly a &quot;best practice&quot; and all services should follow a similar pattern? Outside of making the code a bit harder to read I feel, per request 50+ methods gets invoked and 50+ times we call a mix of CompletableFuture <code>.thenCompose()</code> or <code>.supplyAsync</code>. It seems like it's would be adding some overhead. Was <code>CompletableFuture</code> designed to be used that way across the whole code base in every method?</p>\n<p><strong>Annex (java example):</strong></p>\n<pre><code>  public void myEndpoint(MyRequest request, StreamObserver&lt;MyResponse&gt; responseObserver) {\n    methodA(10)\n        .thenApply((response) -&gt; responseObserver.next(response));\n    \n  }\n\n  public CompletableFuture&lt;Integer&gt; methodA(Integer input) {\n    return CompletableFuture.completedFuture(input)\n        .thenCompose(this::methodB)\n        .thenCompose(this::methodC)\n        .thenApply((i) -&gt; {\n          System.out.println(&quot;MethodA executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + i));\n          return i;\n        });\n  }\n\n  public CompletableFuture&lt;Integer&gt; methodB(Integer input) {\n    return CompletableFuture.completedFuture(input)\n        .thenCompose(this::methodD)\n        .thenCompose(this::methodE)\n        .thenApply((i) -&gt; {\n          System.out.println(&quot;MethodB executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + i));\n          return i;\n        });\n  }\n\n  public CompletableFuture&lt;Integer&gt; methodC(Integer input) {\n    return CompletableFuture.completedFuture(input)\n        .thenCompose(this::methodF)\n        .thenCompose(this::methodG)\n        .thenApply((i) -&gt; {\n          System.out.println(&quot;MethodC executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + i));\n          return i;\n        });\n  }\n\n  public CompletableFuture&lt;Integer&gt; methodD(Integer input) {\n    return CompletableFuture.supplyAsync(() -&gt; {\n      try {\n        // Assume it's a RPC call that takes 5-30ms\n        Thread.sleep(20);\n        System.out.println(&quot;MethodD executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + input));\n      } catch (InterruptedException e) {\n        throw new RuntimeException(e);\n      }\n      return input + 1;\n    });\n  }\n\n  public CompletableFuture&lt;Integer&gt; methodE(Integer input) {\n    return CompletableFuture.supplyAsync(() -&gt; {\n      System.out.println(&quot;MethodE executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + input));\n      return input + 1;\n    });\n  }\n\n  public CompletableFuture&lt;Integer&gt; methodF(Integer input) {\n    return CompletableFuture.supplyAsync(() -&gt; {\n      try {\n        // Let's assume it's a CPU intensive work that takes 2-5ms\n        Thread.sleep(5);\n        System.out.println(&quot;MethodF executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + input));\n      } catch (InterruptedException e) {\n        throw new RuntimeException(e);\n      }\n      return input + 1;\n    });\n  }\n\n  public CompletableFuture&lt;Integer&gt; methodG(Integer input) {\n    return CompletableFuture.supplyAsync(() -&gt; {\n      System.out.println(&quot;MethodG executed by &quot;.concat(Thread.currentThread().getName() + &quot;: &quot; + input));\n      return input + 1;\n    });\n  }\n</code></pre>\n"},{"tags":["java","opengl","glsl","transparency","lwjgl"],"comments":[{"owner":{"account_id":7929209,"reputation":7801,"user_id":5987669,"display_name":"Locke"},"score":0,"creation_date":1670974997,"post_id":74791940,"comment_id":131996232,"body_markdown":"Did you enable mipmaps? When it generates the mipmaps, there is a tendency for some bleed over the edges on some textures due to the reduced pixel count. One of the easiest solutions is to just add a couple extra pixels on the edges (either in code or the image file) to avoid the problem. However, I highly doubt this is the recommended solution. The proper solution is probably to generate the mipmaps in a way that it knows where the boundaries between sprites (letters in your case) are so it can avoid bleed.","body":"Did you enable mipmaps? When it generates the mipmaps, there is a tendency for some bleed over the edges on some textures due to the reduced pixel count. One of the easiest solutions is to just add a couple extra pixels on the edges (either in code or the image file) to avoid the problem. However, I highly doubt this is the recommended solution. The proper solution is probably to generate the mipmaps in a way that it knows where the boundaries between sprites (letters in your case) are so it can avoid bleed."},{"owner":{"account_id":8892914,"reputation":241,"user_id":6638889,"accept_rate":100,"display_name":"Andreas Sandberg"},"score":0,"creation_date":1670975795,"post_id":74791940,"comment_id":131996376,"body_markdown":"@Locke I am not using mipmapping. The game is in a very early stage right now so the texture rendering is very basic and straight forward.","body":"@Locke I am not using mipmapping. The game is in a very early stage right now so the texture rendering is very basic and straight forward."}],"answers":[{"tags":[],"owner":{"account_id":3043323,"reputation":21366,"user_id":2579738,"display_name":"BDL"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1671012830,"creation_date":1671012830,"answer_id":74796635,"question_id":74791940,"body_markdown":"These artefacts seem to be caused by linear interpolation in combination with repeat wrapping. With this modes, a texture coordinate of 0 will be an interpolation of the first texel with the last texel in the row which will cause the other side to bleed in.\r\n\r\nYou can, for example, set the wrapping mode to something else where the interpolation will not take texels from the other side like `GL_CLAMP_TO_EDGE`.\r\n\r\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);\r\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);","title":"Visual artifacts in LWJGL (OpenGL) when rendering transparent 2D images","body":"<p>These artefacts seem to be caused by linear interpolation in combination with repeat wrapping. With this modes, a texture coordinate of 0 will be an interpolation of the first texel with the last texel in the row which will cause the other side to bleed in.</p>\n<p>You can, for example, set the wrapping mode to something else where the interpolation will not take texels from the other side like <code>GL_CLAMP_TO_EDGE</code>.</p>\n<pre><code>glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);\n</code></pre>\n"}],"owner":{"account_id":8892914,"reputation":241,"user_id":6638889,"accept_rate":100,"display_name":"Andreas Sandberg"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":74796635,"answer_count":1,"score":2,"last_activity_date":1671012830,"creation_date":1670973573,"question_id":74791940,"body_markdown":"I am using LWJGL to make a 2D game and my transparent textures have visual artifacts in them when rendered onto the screen.\r\n[![How it is supposed to look like][1]][1]\r\n\r\n\r\n[![What is looks like in game][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BXUC4.png\r\n  [2]: https://i.stack.imgur.com/om3jB.png\r\n\r\nThe top image is how it is supposed to look like, and the bottom one is how it looks like in game. These visual artifacts are even bigger on larger images. I have tried turning off texture wrapping and I&#39;ve tried changing the MIN and MAG filter to GL_LINEAER.\r\n\r\nThis is what my fragment shader looks like:\r\n\r\n    #version 430\r\n    \r\n    uniform sampler2D sampler;\r\n    uniform float opacities[5];\r\n    uniform int opacityIndex;\r\n\r\n    in vec2 tex_coords;\r\n\r\n    out vec4 out_Color;\r\n\r\n    void main() {\r\n\t    out_Color = texture2D(sampler, tex_coords);\r\n\t    out_Color.a *= opacities[opacityIndex];\r\n    }\r\n\r\nThe opacities are all 1f when rendering, and I&#39;ve tried removing the last line of the main method all togehter but the artifacts still appear. \r\n\r\nHow do I get rid of these visual artifacts?\r\n\r\nEDIT: I forgot to add that when I upscale or downscale some of the images, the artifacts disappear, but they shouldn&#39;t be where they are in the first place since the one shown here is not being scaled at all to begin with.","title":"Visual artifacts in LWJGL (OpenGL) when rendering transparent 2D images","body":"<p>I am using LWJGL to make a 2D game and my transparent textures have visual artifacts in them when rendered onto the screen.\n<a href=\"https://i.stack.imgur.com/BXUC4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BXUC4.png\" alt=\"How it is supposed to look like\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/om3jB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/om3jB.png\" alt=\"What is looks like in game\" /></a></p>\n<p>The top image is how it is supposed to look like, and the bottom one is how it looks like in game. These visual artifacts are even bigger on larger images. I have tried turning off texture wrapping and I've tried changing the MIN and MAG filter to GL_LINEAER.</p>\n<p>This is what my fragment shader looks like:</p>\n<pre><code>#version 430\n\nuniform sampler2D sampler;\nuniform float opacities[5];\nuniform int opacityIndex;\n\nin vec2 tex_coords;\n\nout vec4 out_Color;\n\nvoid main() {\n    out_Color = texture2D(sampler, tex_coords);\n    out_Color.a *= opacities[opacityIndex];\n}\n</code></pre>\n<p>The opacities are all 1f when rendering, and I've tried removing the last line of the main method all togehter but the artifacts still appear.</p>\n<p>How do I get rid of these visual artifacts?</p>\n<p>EDIT: I forgot to add that when I upscale or downscale some of the images, the artifacts disappear, but they shouldn't be where they are in the first place since the one shown here is not being scaled at all to begin with.</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","multiple-databases"],"owner":{"account_id":2220534,"reputation":276,"user_id":2128554,"accept_rate":62,"display_name":"learner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":309,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1671012773,"creation_date":1669191504,"question_id":74543637,"body_markdown":"In [this][1] official example of configuring 2 data sources, they have used embedded DB.\r\nSo, with the help of Spring boot&#39;s How to documentations, [Configure Two DataSources][2] and [Using Multiple EntityManagerFactories][3], I customized that to use MySQL DB.\r\n\r\nYou can find the complete code under this [Github repository][4]. Don&#39;t forget to checkout the **&quot;two_data_sources_in_separate_files&quot;** branch.\r\n\r\nBut with this modification, **&quot;secondDBTransactionManager&quot;** is not pointing second_db. Instead, it is inserting data into first_db.\r\n\r\n**FirstDataSource.java**\r\n\r\n    @Configuration\r\n    @EnableJpaRepositories(entityManagerFactoryRef = &quot;firstDBEntityManagerFactory&quot;, transactionManagerRef = &quot;firstDBTransactionManager&quot;)\r\n\r\n    public class FirstDataSource {\r\n\t@Bean\r\n\tPlatformTransactionManager firstDBTransactionManager(DataSourceProperties firstDataSourceProperties) {\r\n\t\treturn new JpaTransactionManager(firstDBEntityManagerFactory(firstDataSourceProperties).getObject());\r\n\t}\r\n\r\n\t@Bean\r\n\t@Primary\r\n\tLocalContainerEntityManagerFactoryBean firstDBEntityManagerFactory(DataSourceProperties firstDataSourceProperties) {\r\n\r\n\t\tHibernateJpaVendorAdapter jpaVendorAdapter = new HibernateJpaVendorAdapter();\r\n\t\tjpaVendorAdapter.setGenerateDdl(true);\r\n\r\n\t\tLocalContainerEntityManagerFactoryBean factoryBean = new LocalContainerEntityManagerFactoryBean();\r\n\r\n\t\tfactoryBean.setDataSource(firstDS(firstDataSourceProperties));\r\n\t\tfactoryBean.setJpaVendorAdapter(jpaVendorAdapter);\r\n\t\tfactoryBean.setPackagesToScan(FirstDataSource.class.getPackage().getName());\r\n\r\n\t\treturn factoryBean;\r\n\t}\r\n\r\n\t@Bean\r\n\t@Primary\r\n\t@ConfigurationProperties(&quot;app.datasource.first&quot;)\r\n\tpublic DataSourceProperties firstDataSourceProperties() {\r\n\t\treturn new DataSourceProperties();\r\n\t}\r\n\r\n\t@Bean\r\n\t@Primary\r\n\t@ConfigurationProperties(&quot;app.datasource.first.configuration&quot;)\r\n\tpublic HikariDataSource firstDS(DataSourceProperties firstDataSourceProperties) {\r\n\t\treturn firstDataSourceProperties.initializeDataSourceBuilder().type(HikariDataSource.class).build();\r\n\t}\r\n\r\n    }\r\n\r\n\r\n**SecondDataSource.java**\r\n\r\n    @Configuration\r\n    @EnableJpaRepositories(entityManagerFactoryRef = &quot;secondDBEntityManagerFactory&quot;, transactionManagerRef = &quot;secondDBTransactionManager&quot;)\r\n    public class SecondDataSource {\r\n\r\n\t@Bean\r\n\tPlatformTransactionManager secondDBTransactionManager(DataSourceProperties secondDataSourceProperties) {\r\n\t\treturn new JpaTransactionManager(secondDBEntityManagerFactory(secondDataSourceProperties).getObject());\r\n\t}\r\n\t\r\n\t@Bean\r\n\t@ConfigurationProperties(&quot;app.datasource.second&quot;)\r\n\tpublic DataSourceProperties secondDataSourceProperties() {\r\n\t\treturn new DataSourceProperties();\r\n\t}\r\n\r\n\t@Bean\r\n\t@ConfigurationProperties(&quot;app.datasource.second.configuration&quot;)\r\n\tpublic HikariDataSource secondDS(\r\n\t\t\t@Qualifier(&quot;secondDataSourceProperties&quot;) DataSourceProperties secondDataSourceProperties) {\r\n\t\treturn secondDataSourceProperties.initializeDataSourceBuilder().type(HikariDataSource.class).build();\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic LocalContainerEntityManagerFactoryBean secondDBEntityManagerFactory(DataSourceProperties secondDataSourceProperties) {\r\n\t\tHibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\r\n\t\tvendorAdapter.setGenerateDdl(true);\r\n\r\n\t\tLocalContainerEntityManagerFactoryBean factoryBean = new LocalContainerEntityManagerFactoryBean();\r\n\t\tfactoryBean.setDataSource(secondDS(secondDataSourceProperties));\r\n\t\tfactoryBean.setJpaVendorAdapter(vendorAdapter);\r\n\t\tfactoryBean.setPackagesToScan(SecondDataSource.class.getPackage().getName());\r\n\r\n\t\treturn factoryBean;\r\n\t}\r\n\r\n    }\r\n\r\n**FetchData.java**\r\n\r\n    @Controller // This means that this class is a Controller\r\n    @RequestMapping(path = &quot;/demo&quot;) // This means URL&#39;s start with /demo (after Application path)\r\n    public class FetchData {\r\n\t\r\n\t@Autowired\r\n\tprivate TableARepository tableARepository;\r\n\r\n\t@Autowired\r\n\tprivate TableCRepository tableCRepository;\r\n\r\n\t@GetMapping(path = &quot;/addDataToFirstDB&quot;)\r\n\tpublic @ResponseBody void addDataToFirstDB() {\r\n\t\t// This returns a JSON or XML with the users\r\n\t\tTable_A tableA = new Table_A();\r\n\t\ttableA.setTable_a_col_1(&quot;test1&quot;);\r\n\t\ttableA.setTable_a_col_2(&quot;test2&quot;);\r\n\t\ttableA.setTable_a_col_3(&quot;test3&quot;);\r\n\t\ttableA.setTable_a_col_4(&quot;test4&quot;);\r\n\t\t\r\n\t\tSystem.out.println(&quot;Inserting data into first DB.&quot;);\r\n\t\ttableARepository.save(tableA);\r\n\t\t\r\n\t}\r\n\t\r\n\t@GetMapping(path = &quot;/addDataToSecondDB&quot;)\r\n\t@Transactional(&quot;secondDBTransactionManager&quot;)\r\n\tpublic @ResponseBody void addDataToSecondDB() {\r\n\t\t// This returns a JSON or XML with the users\r\n\t\tTable_C tableC = new Table_C();\r\n\t\ttableC.setTable_c_col_1(&quot;test1&quot;);\r\n\t\ttableC.setTable_c_col_2(&quot;test2&quot;);\r\n\t\ttableC.setTable_c_col_3(&quot;test3&quot;);\r\n\t\ttableC.setTable_c_col_4(&quot;test4&quot;);\r\n\t\t\r\n\t\tSystem.out.println(&quot;Inserting data into second DB.&quot;);\r\n\t\ttableCRepository.save(tableC);\r\n\t}\r\n    }\r\n\r\nObserve that, I&#39;ve used `@Transactional(&quot;secondDBTransactionManager&quot;)` for second REST API, **&quot;addDataToSecondDB&quot;**.\r\nIt is easy to resolve issue if any Exception is thrown. There is no Exception here but the behavior is not as expected.\r\n\r\n  [1]: https://github.com/spring-projects/spring-data-examples/tree/main/jpa/multiple-datasources\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.data-access.configure-two-datasources\r\n  [3]: https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.data-access.use-multiple-entity-managers\r\n  [4]: https://github.com/Padmahas/accessing-data-mysql-multiple-datasources/tree/two_data_sources_in_separate_files","title":"Configured two data source in spring data JPA but second data source still considering first DB URL","body":"<p>In <a href=\"https://github.com/spring-projects/spring-data-examples/tree/main/jpa/multiple-datasources\" rel=\"nofollow noreferrer\">this</a> official example of configuring 2 data sources, they have used embedded DB.\nSo, with the help of Spring boot's How to documentations, <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.data-access.configure-two-datasources\" rel=\"nofollow noreferrer\">Configure Two DataSources</a> and <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.data-access.use-multiple-entity-managers\" rel=\"nofollow noreferrer\">Using Multiple EntityManagerFactories</a>, I customized that to use MySQL DB.</p>\n<p>You can find the complete code under this <a href=\"https://github.com/Padmahas/accessing-data-mysql-multiple-datasources/tree/two_data_sources_in_separate_files\" rel=\"nofollow noreferrer\">Github repository</a>. Don't forget to checkout the <strong>&quot;two_data_sources_in_separate_files&quot;</strong> branch.</p>\n<p>But with this modification, <strong>&quot;secondDBTransactionManager&quot;</strong> is not pointing second_db. Instead, it is inserting data into first_db.</p>\n<p><strong>FirstDataSource.java</strong></p>\n<pre><code>@Configuration\n@EnableJpaRepositories(entityManagerFactoryRef = &quot;firstDBEntityManagerFactory&quot;, transactionManagerRef = &quot;firstDBTransactionManager&quot;)\n\npublic class FirstDataSource {\n@Bean\nPlatformTransactionManager firstDBTransactionManager(DataSourceProperties firstDataSourceProperties) {\n    return new JpaTransactionManager(firstDBEntityManagerFactory(firstDataSourceProperties).getObject());\n}\n\n@Bean\n@Primary\nLocalContainerEntityManagerFactoryBean firstDBEntityManagerFactory(DataSourceProperties firstDataSourceProperties) {\n\n    HibernateJpaVendorAdapter jpaVendorAdapter = new HibernateJpaVendorAdapter();\n    jpaVendorAdapter.setGenerateDdl(true);\n\n    LocalContainerEntityManagerFactoryBean factoryBean = new LocalContainerEntityManagerFactoryBean();\n\n    factoryBean.setDataSource(firstDS(firstDataSourceProperties));\n    factoryBean.setJpaVendorAdapter(jpaVendorAdapter);\n    factoryBean.setPackagesToScan(FirstDataSource.class.getPackage().getName());\n\n    return factoryBean;\n}\n\n@Bean\n@Primary\n@ConfigurationProperties(&quot;app.datasource.first&quot;)\npublic DataSourceProperties firstDataSourceProperties() {\n    return new DataSourceProperties();\n}\n\n@Bean\n@Primary\n@ConfigurationProperties(&quot;app.datasource.first.configuration&quot;)\npublic HikariDataSource firstDS(DataSourceProperties firstDataSourceProperties) {\n    return firstDataSourceProperties.initializeDataSourceBuilder().type(HikariDataSource.class).build();\n}\n\n}\n</code></pre>\n<p><strong>SecondDataSource.java</strong></p>\n<pre><code>@Configuration\n@EnableJpaRepositories(entityManagerFactoryRef = &quot;secondDBEntityManagerFactory&quot;, transactionManagerRef = &quot;secondDBTransactionManager&quot;)\npublic class SecondDataSource {\n\n@Bean\nPlatformTransactionManager secondDBTransactionManager(DataSourceProperties secondDataSourceProperties) {\n    return new JpaTransactionManager(secondDBEntityManagerFactory(secondDataSourceProperties).getObject());\n}\n\n@Bean\n@ConfigurationProperties(&quot;app.datasource.second&quot;)\npublic DataSourceProperties secondDataSourceProperties() {\n    return new DataSourceProperties();\n}\n\n@Bean\n@ConfigurationProperties(&quot;app.datasource.second.configuration&quot;)\npublic HikariDataSource secondDS(\n        @Qualifier(&quot;secondDataSourceProperties&quot;) DataSourceProperties secondDataSourceProperties) {\n    return secondDataSourceProperties.initializeDataSourceBuilder().type(HikariDataSource.class).build();\n}\n\n@Bean\npublic LocalContainerEntityManagerFactoryBean secondDBEntityManagerFactory(DataSourceProperties secondDataSourceProperties) {\n    HibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\n    vendorAdapter.setGenerateDdl(true);\n\n    LocalContainerEntityManagerFactoryBean factoryBean = new LocalContainerEntityManagerFactoryBean();\n    factoryBean.setDataSource(secondDS(secondDataSourceProperties));\n    factoryBean.setJpaVendorAdapter(vendorAdapter);\n    factoryBean.setPackagesToScan(SecondDataSource.class.getPackage().getName());\n\n    return factoryBean;\n}\n\n}\n</code></pre>\n<p><strong>FetchData.java</strong></p>\n<pre><code>@Controller // This means that this class is a Controller\n@RequestMapping(path = &quot;/demo&quot;) // This means URL's start with /demo (after Application path)\npublic class FetchData {\n\n@Autowired\nprivate TableARepository tableARepository;\n\n@Autowired\nprivate TableCRepository tableCRepository;\n\n@GetMapping(path = &quot;/addDataToFirstDB&quot;)\npublic @ResponseBody void addDataToFirstDB() {\n    // This returns a JSON or XML with the users\n    Table_A tableA = new Table_A();\n    tableA.setTable_a_col_1(&quot;test1&quot;);\n    tableA.setTable_a_col_2(&quot;test2&quot;);\n    tableA.setTable_a_col_3(&quot;test3&quot;);\n    tableA.setTable_a_col_4(&quot;test4&quot;);\n    \n    System.out.println(&quot;Inserting data into first DB.&quot;);\n    tableARepository.save(tableA);\n    \n}\n\n@GetMapping(path = &quot;/addDataToSecondDB&quot;)\n@Transactional(&quot;secondDBTransactionManager&quot;)\npublic @ResponseBody void addDataToSecondDB() {\n    // This returns a JSON or XML with the users\n    Table_C tableC = new Table_C();\n    tableC.setTable_c_col_1(&quot;test1&quot;);\n    tableC.setTable_c_col_2(&quot;test2&quot;);\n    tableC.setTable_c_col_3(&quot;test3&quot;);\n    tableC.setTable_c_col_4(&quot;test4&quot;);\n    \n    System.out.println(&quot;Inserting data into second DB.&quot;);\n    tableCRepository.save(tableC);\n}\n}\n</code></pre>\n<p>Observe that, I've used <code>@Transactional(&quot;secondDBTransactionManager&quot;)</code> for second REST API, <strong>&quot;addDataToSecondDB&quot;</strong>.\nIt is easy to resolve issue if any Exception is thrown. There is no Exception here but the behavior is not as expected.</p>\n"},{"tags":["java","android","firebase-cloud-messaging"],"comments":[{"owner":{"account_id":13654747,"reputation":38532,"user_id":9851608,"display_name":"Zain"},"score":0,"creation_date":1670516556,"post_id":74733208,"comment_id":131897896,"body_markdown":"Try to use this flag `PendingIntent.FLAG_MUTABLE | PendingIntent.FLAG_ONE_SHOT`","body":"Try to use this flag <code>PendingIntent.FLAG_MUTABLE | PendingIntent.FLAG_ONE_SHOT</code>"},{"owner":{"account_id":19335838,"reputation":63,"user_id":14136448,"display_name":"Aditya Rizqi"},"score":0,"creation_date":1670516920,"post_id":74733208,"comment_id":131898026,"body_markdown":"Hello!,  thankyou for your response, in my case, normal notification (without action) is showing but if the notfication has a action, this is not working @Zain","body":"Hello!,  thankyou for your response, in my case, normal notification (without action) is showing but if the notfication has a action, this is not working @Zain"},{"owner":{"account_id":13654747,"reputation":38532,"user_id":9851608,"display_name":"Zain"},"score":1,"creation_date":1670520949,"post_id":74733208,"comment_id":131899333,"body_markdown":"Yeah I see, could you try this `PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_MUTABLE` in the boradcast PendingIntent `receiveCallPendingIntent` &amp; `cancelCallPendingIntent`","body":"Yeah I see, could you try this <code>PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_MUTABLE</code> in the boradcast PendingIntent <code>receiveCallPendingIntent</code> &amp; <code>cancelCallPendingIntent</code>"}],"answers":[{"tags":[],"owner":{"account_id":19335838,"reputation":63,"user_id":14136448,"display_name":"Aditya Rizqi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671012762,"creation_date":1671012762,"answer_id":74796618,"question_id":74733208,"body_markdown":"i solve this problem by this code\r\n\r\n     PendingIntent receiveCallPendingIntent;\r\n            PendingIntent cancelCallPendingIntent;\r\n\r\n            if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.S) {\r\n                receiveCallPendingIntent = PendingIntent.getBroadcast(this, 1200, receiveCallAction, PendingIntent.FLAG_IMMUTABLE | PendingIntent.FLAG_UPDATE_CURRENT);\r\n                cancelCallPendingIntent = PendingIntent.getBroadcast(this, 1201, cancelCallAction, PendingIntent.FLAG_IMMUTABLE | PendingIntent.FLAG_UPDATE_CURRENT);\r\n            }else{\r\n                receiveCallPendingIntent = PendingIntent.getBroadcast(this, 1200, receiveCallAction, PendingIntent.FLAG_UPDATE_CURRENT);\r\n                cancelCallPendingIntent = PendingIntent.getBroadcast(this, 1201, cancelCallAction, PendingIntent.FLAG_UPDATE_CURRENT);\r\n            }\r\n\r\nalso add this permission for force Android 12^ (AndroidManifest.xml)\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; /&gt;&lt;receiver\r\n            android:name=&quot;.receiver.CallReceiver&quot;\r\n            android:exported=&quot;false&quot;\r\n            android:enabled=&quot;true&quot;\r\n            android:permission=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; &gt;\r\n\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;","title":"Notification Builder action not working on API 31 (Android 12)","body":"<p>i solve this problem by this code</p>\n<pre><code> PendingIntent receiveCallPendingIntent;\n        PendingIntent cancelCallPendingIntent;\n\n        if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.S) {\n            receiveCallPendingIntent = PendingIntent.getBroadcast(this, 1200, receiveCallAction, PendingIntent.FLAG_IMMUTABLE | PendingIntent.FLAG_UPDATE_CURRENT);\n            cancelCallPendingIntent = PendingIntent.getBroadcast(this, 1201, cancelCallAction, PendingIntent.FLAG_IMMUTABLE | PendingIntent.FLAG_UPDATE_CURRENT);\n        }else{\n            receiveCallPendingIntent = PendingIntent.getBroadcast(this, 1200, receiveCallAction, PendingIntent.FLAG_UPDATE_CURRENT);\n            cancelCallPendingIntent = PendingIntent.getBroadcast(this, 1201, cancelCallAction, PendingIntent.FLAG_UPDATE_CURRENT);\n        }\n</code></pre>\n<p>also add this permission for force Android 12^ (AndroidManifest.xml)</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; /&gt;&lt;receiver\n        android:name=&quot;.receiver.CallReceiver&quot;\n        android:exported=&quot;false&quot;\n        android:enabled=&quot;true&quot;\n        android:permission=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; &gt;\n\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;\n            &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/receiver&gt;\n</code></pre>\n"}],"owner":{"account_id":19335838,"reputation":63,"user_id":14136448,"display_name":"Aditya Rizqi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1871,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74796618,"answer_count":1,"score":2,"last_activity_date":1671012762,"creation_date":1670515921,"question_id":74733208,"body_markdown":"I&#39;m stuck while dealing with this api 31. i made a chat app. When I create an action button to receive a phone call it works on android below API 31 or below Android 12, but it doesn&#39;t work on Android 12 (only work if the notification is not has action). maybe someone here can help me in finding a solution to this problem?\r\n\r\nFirebaseService.java\r\n\r\n    @Override\r\n    public void onMessageReceived(@NonNull RemoteMessage remoteMessage) {\r\n        super.onMessageReceived(remoteMessage);\r\n\r\n        boolean cancelNotification = false;\r\n\r\n        Intent intent = new Intent(this, MainActivity.class);\r\n        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n\r\n        Map&lt;String, String&gt; params = remoteMessage.getData();\r\n        JSONObject data = new JSONObject(params);\r\n\r\n        PendingIntent pendingIntent;\r\n        if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.S) {\r\n            pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_MUTABLE);\r\n        }\r\n        else {\r\n            pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_ONE_SHOT);\r\n        }\r\n\r\n        String channel_id = getNotificationData(data, &quot;channel&quot;);\r\n\r\n        NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(this, channel_id)\r\n                .setSmallIcon(R.mipmap.ic_launcher)\r\n                .setContentTitle(getNotificationData(data, &quot;title&quot;))\r\n                .setContentText(getNotificationData(data, &quot;body&quot;))\r\n                .setAutoCancel(true)\r\n                .setContentIntent(pendingIntent);\r\n\r\n        if(channel_id.equals(&quot;cll2&quot;) &amp;&amp; getNotificationData(data, &quot;call_action&quot;).equals(&quot;open&quot;)){\r\n            playCallSound(this);\r\n\r\n            if(WindowUtil.isAppOnBackground(this) || isScreenOff()){\r\n                ArrayList&lt;String&gt; par = new ArrayList&lt;&gt;();\r\n\r\n                par.add(&quot;call_channel&quot;);\r\n                par.add(&quot;call_type&quot;);\r\n                par.add(&quot;call_token&quot;);\r\n                par.add(&quot;call_peer&quot;);\r\n\r\n                String callType = getNotificationData(data, &quot;call_type&quot;);\r\n\r\n                if(callType.equals(&quot;3&quot;) || callType.equals(&quot;4&quot;)){\r\n                    par.add(&quot;call_group_name&quot;);\r\n                    par.add(&quot;call_group_caller&quot;);\r\n                }\r\n\r\n                Intent receiveCallAction = new Intent(this, CallReceiver.class);\r\n                receiveCallAction.putExtra(&quot;action&quot;, &quot;ANSWER&quot;);\r\n\r\n                Intent cancelCallAction = new Intent(this, CallReceiver.class);\r\n                cancelCallAction.putExtra(&quot;action&quot;, &quot;DECLINE&quot;);\r\n\r\n                for (String s : par) {\r\n                    receiveCallAction.putExtra(s, getNotificationData(data, s));\r\n                    cancelCallAction.putExtra(s, getNotificationData(data, s));\r\n                }\r\n\r\n                notificationBuilder.setOngoing(true);\r\n\r\n                receiveCallAction.setAction(&quot;RECEIVE_CALL&quot;);\r\n                cancelCallAction.setAction(&quot;CANCEL_CALL&quot;);\r\n\r\n                PendingIntent receiveCallPendingIntent = PendingIntent.getBroadcast(this, 1200, receiveCallAction, PendingIntent.FLAG_UPDATE_CURRENT);\r\n                PendingIntent cancelCallPendingIntent = PendingIntent.getBroadcast(this, 1201, cancelCallAction, PendingIntent.FLAG_UPDATE_CURRENT);\r\n\r\n                notificationBuilder\r\n                        .addAction(R.drawable.ic_baseline_call_24_green, &quot;Answer&quot;, receiveCallPendingIntent)\r\n                        .addAction(R.drawable.ic_baseline_call_red_24, &quot;Decline&quot;, cancelCallPendingIntent);\r\n            }else{\r\n                cancelNotification = true;\r\n            }\r\n        }if(channel_id.equals(&quot;cll2&quot;) &amp;&amp; getNotificationData(data, &quot;call_action&quot;).equals(&quot;end_timeout&quot;)){\r\n            stopRinging();\r\n        }else if(channel_id.equals(&quot;ntf1&quot;)){\r\n            if(UserUtil.IS_CHAT_ACTIVITY){\r\n                cancelNotification = true;\r\n            }\r\n\r\n            if(!cancelNotification){\r\n                playNotificationSound(this);\r\n            }\r\n        }\r\n\r\n        if(!cancelNotification){\r\n            NotificationManager mNotificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\r\n\r\n            if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O) {\r\n                notificationBuilder.setDefaults(Notification.DEFAULT_VIBRATE);\r\n                NotificationChannel channel = new NotificationChannel(channel_id,\r\n                        getString(R.string.app_name), NotificationManager.IMPORTANCE_HIGH);\r\n                channel.enableLights(true);\r\n                channel.enableVibration(true);\r\n                mNotificationManager.createNotificationChannel(channel);\r\n            }\r\n\r\n            mNotificationManager.notify(1000, notificationBuilder.build());\r\n        }\r\n    }\r\n\r\nCallReceiver.java (Broadcast Receiver)\r\n\r\n    @Override\r\n    public void onReceive(Context context, Intent intent) {\r\n        if (intent != null &amp;&amp; intent.getExtras() != null) {\r\n            String action = intent.getStringExtra(&quot;action&quot;);\r\n\r\n            // Perform the action\r\n            performClickAction(context, action, intent.getExtras());\r\n\r\n            // Close the notification after the click action is performed.\r\n            NotificationManager mNotificationManager = (NotificationManager)\r\n                    context.getSystemService(Context.NOTIFICATION_SERVICE);\r\n            mNotificationManager.cancel(1000);\r\n\r\n            // Stop the ringtone\r\n            stopRinging();\r\n        }\r\n    }\r\n\r\non my AndroidManifest.xml\r\n\r\n    &lt;service\r\n            android:name=&quot;.services.FirebaseService&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;com.google.firebase.MESSAGING_EVENT&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/service&gt;\r\n\r\n        &lt;receiver\r\n            android:name=&quot;.receiver.CallReceiver&quot;\r\n            android:exported=&quot;false&quot;\r\n            android:enabled=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;CALL_RECEIVER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n\r\nThank you","title":"Notification Builder action not working on API 31 (Android 12)","body":"<p>I'm stuck while dealing with this api 31. i made a chat app. When I create an action button to receive a phone call it works on android below API 31 or below Android 12, but it doesn't work on Android 12 (only work if the notification is not has action). maybe someone here can help me in finding a solution to this problem?</p>\n<p>FirebaseService.java</p>\n<pre><code>@Override\npublic void onMessageReceived(@NonNull RemoteMessage remoteMessage) {\n    super.onMessageReceived(remoteMessage);\n\n    boolean cancelNotification = false;\n\n    Intent intent = new Intent(this, MainActivity.class);\n    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n\n    Map&lt;String, String&gt; params = remoteMessage.getData();\n    JSONObject data = new JSONObject(params);\n\n    PendingIntent pendingIntent;\n    if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.S) {\n        pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_MUTABLE);\n    }\n    else {\n        pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_ONE_SHOT);\n    }\n\n    String channel_id = getNotificationData(data, &quot;channel&quot;);\n\n    NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(this, channel_id)\n            .setSmallIcon(R.mipmap.ic_launcher)\n            .setContentTitle(getNotificationData(data, &quot;title&quot;))\n            .setContentText(getNotificationData(data, &quot;body&quot;))\n            .setAutoCancel(true)\n            .setContentIntent(pendingIntent);\n\n    if(channel_id.equals(&quot;cll2&quot;) &amp;&amp; getNotificationData(data, &quot;call_action&quot;).equals(&quot;open&quot;)){\n        playCallSound(this);\n\n        if(WindowUtil.isAppOnBackground(this) || isScreenOff()){\n            ArrayList&lt;String&gt; par = new ArrayList&lt;&gt;();\n\n            par.add(&quot;call_channel&quot;);\n            par.add(&quot;call_type&quot;);\n            par.add(&quot;call_token&quot;);\n            par.add(&quot;call_peer&quot;);\n\n            String callType = getNotificationData(data, &quot;call_type&quot;);\n\n            if(callType.equals(&quot;3&quot;) || callType.equals(&quot;4&quot;)){\n                par.add(&quot;call_group_name&quot;);\n                par.add(&quot;call_group_caller&quot;);\n            }\n\n            Intent receiveCallAction = new Intent(this, CallReceiver.class);\n            receiveCallAction.putExtra(&quot;action&quot;, &quot;ANSWER&quot;);\n\n            Intent cancelCallAction = new Intent(this, CallReceiver.class);\n            cancelCallAction.putExtra(&quot;action&quot;, &quot;DECLINE&quot;);\n\n            for (String s : par) {\n                receiveCallAction.putExtra(s, getNotificationData(data, s));\n                cancelCallAction.putExtra(s, getNotificationData(data, s));\n            }\n\n            notificationBuilder.setOngoing(true);\n\n            receiveCallAction.setAction(&quot;RECEIVE_CALL&quot;);\n            cancelCallAction.setAction(&quot;CANCEL_CALL&quot;);\n\n            PendingIntent receiveCallPendingIntent = PendingIntent.getBroadcast(this, 1200, receiveCallAction, PendingIntent.FLAG_UPDATE_CURRENT);\n            PendingIntent cancelCallPendingIntent = PendingIntent.getBroadcast(this, 1201, cancelCallAction, PendingIntent.FLAG_UPDATE_CURRENT);\n\n            notificationBuilder\n                    .addAction(R.drawable.ic_baseline_call_24_green, &quot;Answer&quot;, receiveCallPendingIntent)\n                    .addAction(R.drawable.ic_baseline_call_red_24, &quot;Decline&quot;, cancelCallPendingIntent);\n        }else{\n            cancelNotification = true;\n        }\n    }if(channel_id.equals(&quot;cll2&quot;) &amp;&amp; getNotificationData(data, &quot;call_action&quot;).equals(&quot;end_timeout&quot;)){\n        stopRinging();\n    }else if(channel_id.equals(&quot;ntf1&quot;)){\n        if(UserUtil.IS_CHAT_ACTIVITY){\n            cancelNotification = true;\n        }\n\n        if(!cancelNotification){\n            playNotificationSound(this);\n        }\n    }\n\n    if(!cancelNotification){\n        NotificationManager mNotificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\n\n        if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O) {\n            notificationBuilder.setDefaults(Notification.DEFAULT_VIBRATE);\n            NotificationChannel channel = new NotificationChannel(channel_id,\n                    getString(R.string.app_name), NotificationManager.IMPORTANCE_HIGH);\n            channel.enableLights(true);\n            channel.enableVibration(true);\n            mNotificationManager.createNotificationChannel(channel);\n        }\n\n        mNotificationManager.notify(1000, notificationBuilder.build());\n    }\n}\n</code></pre>\n<p>CallReceiver.java (Broadcast Receiver)</p>\n<pre><code>@Override\npublic void onReceive(Context context, Intent intent) {\n    if (intent != null &amp;&amp; intent.getExtras() != null) {\n        String action = intent.getStringExtra(&quot;action&quot;);\n\n        // Perform the action\n        performClickAction(context, action, intent.getExtras());\n\n        // Close the notification after the click action is performed.\n        NotificationManager mNotificationManager = (NotificationManager)\n                context.getSystemService(Context.NOTIFICATION_SERVICE);\n        mNotificationManager.cancel(1000);\n\n        // Stop the ringtone\n        stopRinging();\n    }\n}\n</code></pre>\n<p>on my AndroidManifest.xml</p>\n<pre><code>&lt;service\n        android:name=&quot;.services.FirebaseService&quot;\n        android:exported=&quot;true&quot;&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;com.google.firebase.MESSAGING_EVENT&quot; /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/service&gt;\n\n    &lt;receiver\n        android:name=&quot;.receiver.CallReceiver&quot;\n        android:exported=&quot;false&quot;\n        android:enabled=&quot;true&quot;&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;CALL_RECEIVER&quot; /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/receiver&gt;\n</code></pre>\n<p>Thank you</p>\n"},{"tags":["java","hibernate"],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671012488,"creation_date":1671012488,"answer_id":74796556,"question_id":74796162,"body_markdown":"Most constraint annotations, including `@Length` and `@Pattern`, regard `null` as valid input. That&#39;s why you won&#39;t get what you want by just using these annotations.\r\n\r\nFortunately, it&#39;s really easy to do what you want by introducing a new constraint annotation:\r\n```java\r\n@Constraint(validatedBy = {}) // no validator needed, it delegates to other constraints\r\n@NotNull\r\n@Length(min = 4, max = 64)\r\n@Pattern(regexp = &quot;[A-Za-z0-9]+&quot;)\r\n@ReportAsSingleViolation // to prevent separate violations for the other constraints\r\n@Target(FIELD)\r\n@Retention(RUNTIME)\r\npublic @interface ValidUsername {\r\n\r\n    String message() default &quot;&quot;&quot;\r\n        {jakarta.validation.constraints.NotNull.message} \r\n        AND {org.hibernate.validator.constraints.Length.message} \r\n        AND {jakarta.validation.constraints.Pattern.message}&quot;&quot;&quot;;\r\n\r\n    Class&lt;?&gt;[] groups() default {};\r\n\r\n    Class&lt;? extends Payload&gt;[] payload() default {};\r\n}\r\n```\r\nThis is annotated with your constraints, which means these are applied when this annotation is checked.\r\n\r\nThe message will still contain place holders `{min}` etc., because these are not properties of this constraint itself. You can solve that in two ways:\r\n\r\n1. Don&#39;t use the templates but hard-code the message\r\n2. Add these properties to your annotation as well, and tell the Bean Validation framework to use these for the other annotations:\r\n\r\n```java\r\n    @OverridesAttribute(constraint = Length.class)\r\n    int min() default 4;\r\n\r\n    @OverridesAttribute(constraint = Length.class)\r\n    int max() default 64;\r\n\r\n    @OverridesAttribute(constraint = Pattern.class)\r\n    String regexp() default &quot;[A-Za-z0-9]+&quot;;\r\n```\r\n\r\nNow all you need to do is replace the annotations on the `username` field with `@ValidUsername`.","title":"Java @NotNull violation message to show other constraints&#39; details","body":"<p>Most constraint annotations, including <code>@Length</code> and <code>@Pattern</code>, regard <code>null</code> as valid input. That's why you won't get what you want by just using these annotations.</p>\n<p>Fortunately, it's really easy to do what you want by introducing a new constraint annotation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Constraint(validatedBy = {}) // no validator needed, it delegates to other constraints\n@NotNull\n@Length(min = 4, max = 64)\n@Pattern(regexp = &quot;[A-Za-z0-9]+&quot;)\n@ReportAsSingleViolation // to prevent separate violations for the other constraints\n@Target(FIELD)\n@Retention(RUNTIME)\npublic @interface ValidUsername {\n\n    String message() default &quot;&quot;&quot;\n        {jakarta.validation.constraints.NotNull.message} \n        AND {org.hibernate.validator.constraints.Length.message} \n        AND {jakarta.validation.constraints.Pattern.message}&quot;&quot;&quot;;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n}\n</code></pre>\n<p>This is annotated with your constraints, which means these are applied when this annotation is checked.</p>\n<p>The message will still contain place holders <code>{min}</code> etc., because these are not properties of this constraint itself. You can solve that in two ways:</p>\n<ol>\n<li>Don't use the templates but hard-code the message</li>\n<li>Add these properties to your annotation as well, and tell the Bean Validation framework to use these for the other annotations:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    @OverridesAttribute(constraint = Length.class)\n    int min() default 4;\n\n    @OverridesAttribute(constraint = Length.class)\n    int max() default 64;\n\n    @OverridesAttribute(constraint = Pattern.class)\n    String regexp() default &quot;[A-Za-z0-9]+&quot;;\n</code></pre>\n<p>Now all you need to do is replace the annotations on the <code>username</code> field with <code>@ValidUsername</code>.</p>\n"}],"owner":{"account_id":15273588,"reputation":71,"user_id":13427345,"display_name":"O1G"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":556,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74796556,"answer_count":1,"score":0,"last_activity_date":1671012488,"creation_date":1671010593,"question_id":74796162,"body_markdown":"Given a `username` field which cannot be `null`, must be between 4 and 64 characters long and match the regexp `[A-Za-z0-9]+`, when the `username` field is null, the error message is simply: `must not be null`. The desired outcome is `must not be null AND length must be between 4 and 64 characters AND must match &quot;[A-Za-z0-9]+&quot;`.\r\n\r\nInitial setup:\r\n```java\r\n@NotNull\r\n@Length(min = 4, max = 64)\r\n@Pattern(regexp = &quot;[A-Za-z0-9]+&quot;)\r\nString username;\r\n```\r\n\r\nWhat I also tried:\r\n```java\r\n@NotNull(message = &quot;&quot;&quot;\r\n        {jakarta.validation.constraints.NotNull.message} \r\n        AND {org.hibernate.validator.constraints.Length.message} \r\n        AND {jakarta.validation.constraints.Pattern.message}&quot;&quot;&quot;)\r\n@Length(min = 4, max = 64)\r\n@Pattern(regexp = &quot;[A-Za-z0-9]+&quot;)\r\nString username;\r\n```\r\n\r\nBut this latter&#39;s outcome is:\r\n```\r\nConstraintViolationImpl{\r\n  interpolatedMessage=&#39;must not be null AND length must be between {min} and {max} AND must match &quot;{regexp}&quot;&#39;,\r\n  propertyPath=username, rootBeanClass=class app.User,\r\n  messageTemplate=&#39;{jakarta.validation.constraints.NotNull.message} AND {org.hibernate.validator.constraints.Length.message} AND {jakarta.validation.constraints.Pattern.message}&#39;}\r\n```\r\nThe values for the constraints (`min`, `max`, `regexp`) are not accessed. How to render the actual values of these in the error message?","title":"Java @NotNull violation message to show other constraints&#39; details","body":"<p>Given a <code>username</code> field which cannot be <code>null</code>, must be between 4 and 64 characters long and match the regexp <code>[A-Za-z0-9]+</code>, when the <code>username</code> field is null, the error message is simply: <code>must not be null</code>. The desired outcome is <code>must not be null AND length must be between 4 and 64 characters AND must match &quot;[A-Za-z0-9]+&quot;</code>.</p>\n<p>Initial setup:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NotNull\n@Length(min = 4, max = 64)\n@Pattern(regexp = &quot;[A-Za-z0-9]+&quot;)\nString username;\n</code></pre>\n<p>What I also tried:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NotNull(message = &quot;&quot;&quot;\n        {jakarta.validation.constraints.NotNull.message} \n        AND {org.hibernate.validator.constraints.Length.message} \n        AND {jakarta.validation.constraints.Pattern.message}&quot;&quot;&quot;)\n@Length(min = 4, max = 64)\n@Pattern(regexp = &quot;[A-Za-z0-9]+&quot;)\nString username;\n</code></pre>\n<p>But this latter's outcome is:</p>\n<pre><code>ConstraintViolationImpl{\n  interpolatedMessage='must not be null AND length must be between {min} and {max} AND must match &quot;{regexp}&quot;',\n  propertyPath=username, rootBeanClass=class app.User,\n  messageTemplate='{jakarta.validation.constraints.NotNull.message} AND {org.hibernate.validator.constraints.Length.message} AND {jakarta.validation.constraints.Pattern.message}'}\n</code></pre>\n<p>The values for the constraints (<code>min</code>, <code>max</code>, <code>regexp</code>) are not accessed. How to render the actual values of these in the error message?</p>\n"},{"tags":["java","string","pagination"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1671012078,"post_id":74796300,"comment_id":132003142,"body_markdown":"So you want to check whether the url ends with a slash followed by one or more digits and get those digits?","body":"So you want to check whether the url ends with a slash followed by one or more digits and get those digits?"},{"owner":{"account_id":21938528,"reputation":59,"user_id":16219386,"display_name":"Adarsh Awasthi"},"score":0,"creation_date":1671014081,"post_id":74796300,"comment_id":132003794,"body_markdown":"yes basically i want to check url end with slash(/) followed by numberic digit but whole url is string so i cannot know it ends with numeric digit","body":"yes basically i want to check url end with slash(/) followed by numberic digit but whole url is string so i cannot know it ends with numeric digit"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1671014565,"post_id":74796300,"comment_id":132003933,"body_markdown":"Sure you can. A simple regex like `/(\\d+)$` should do the trick. If it matches you can then extract the group and parse it as a number.","body":"Sure you can. A simple regex like <code>&#47;(\\d+)$</code> should do the trick. If it matches you can then extract the group and parse it as a number."}],"owner":{"account_id":21938528,"reputation":59,"user_id":16219386,"display_name":"Adarsh Awasthi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1671012096,"creation_date":1671011312,"question_id":74796300,"body_markdown":"iam given with a some-url which may or may-not contains integer at last i want to check \r\nwhether integer is present and if present what is the value of it.\r\n\r\n\r\nex: `localhost:8200/videos`\r\n    `localhost:8200/videos/1`\r\n    `localhost:8200/videos/2` \r\n    `localhost:8200/videos/popular-entertainment`\r\n    `localhost:8200/videos/popular-entertainment/1`\r\n    `localhost:8200/videos/popular-entertainment/2`   \r\n    `localhost:8200/videos-funny/popular-entertainment`\r\n    `localhost:8200/videos-funny/popular-entertainment/1`\r\n    `localhost:8200/videos-funny/popular-entertainment/2`\r\n    `localhost:8200/videos-funny/popular-entertainment/3`\r\n    \r\ni want get the pagination id at last of url if present in java","title":"check url contains pagination id","body":"<p>iam given with a some-url which may or may-not contains integer at last i want to check\nwhether integer is present and if present what is the value of it.</p>\n<p>ex: <code>localhost:8200/videos</code>\n<code>localhost:8200/videos/1</code>\n<code>localhost:8200/videos/2</code>\n<code>localhost:8200/videos/popular-entertainment</code>\n<code>localhost:8200/videos/popular-entertainment/1</code>\n<code>localhost:8200/videos/popular-entertainment/2</code><br />\n<code>localhost:8200/videos-funny/popular-entertainment</code>\n<code>localhost:8200/videos-funny/popular-entertainment/1</code>\n<code>localhost:8200/videos-funny/popular-entertainment/2</code>\n<code>localhost:8200/videos-funny/popular-entertainment/3</code></p>\n<p>i want get the pagination id at last of url if present in java</p>\n"},{"tags":["java","html","spring","spring-boot"],"comments":[{"owner":{"account_id":5951494,"reputation":12969,"user_id":4679320,"accept_rate":67,"display_name":"prasad_"},"score":0,"creation_date":1671000075,"post_id":74794306,"comment_id":131999960,"body_markdown":"You can try using the HTML `required` attribute for the form input fields.","body":"You can try using the HTML <code>required</code> attribute for the form input fields."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1671007400,"post_id":74794306,"comment_id":132001686,"body_markdown":"Add `required` on the HTML side and add `spring-boot-starter-validation` as a dependency and add the validations uou need `@NotNUll`/`@NotBlank` and add `@Valid` on the method argument in your controller.","body":"Add <code>required</code> on the HTML side and add <code>spring-boot-starter-validation</code> as a dependency and add the validations uou need <code>@NotNUll</code>/<code>@NotBlank</code> and add <code>@Valid</code> on the method argument in your controller."}],"answers":[{"tags":[],"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671007451,"creation_date":1671007451,"answer_id":74795577,"question_id":74794306,"body_markdown":"Add `spring-boot-starter-validation` as a dependency. Add the annotations to your `Product` and use `Product` as a model object instead of requst parameters. \r\n\r\n```java\r\n@RequestMapping(&quot;/save&quot;)\r\npublic String save(@Valid @ModelAttribute Product product) {\r\n    productRepository.save(product);\r\n    return &quot;redirect:/show/&quot; + product.getId();\r\n}\r\n```\r\n\r\n```java\r\n@Document(collection = &quot;products&quot;)\r\npublic class Product {\r\n    \r\n    @Id\r\n    String id;\r\n    \r\n    @NotBlank\r\n    String prodName;\r\n    @NotBlank\r\n    String prodDesc;\r\n    @Min(0.01d)\r\n    Double prodPrice;\r\n    String prodImage;\r\n```\r\n\r\nSome of that for validation (ofcourse you would need to determine which to use based on your requirements. \r\n\r\nAdditionally use proper types and `required` keyword in your HTML templates. \r\n\r\n```html\r\n&lt;div class=&quot;form-group&quot;&gt;\r\n    &lt;label for=&quot;email&quot;&gt;Product Name:&lt;/label&gt;\r\n    &lt;input type=&quot;text&quot; class=&quot;form-control&quot; name=&quot;prodName&quot; required /&gt;\r\n&lt;/div&gt;\r\n&lt;div class=&quot;form-group&quot;&gt;\r\n    &lt;label for=&quot;prodDesc&quot;&gt;Product Description&lt;/label&gt;\r\n    &lt;textarea class=&quot;form-control&quot; name=&quot;prodDesc&quot; cols=&quot;60&quot; rows=&quot;3&quot; required&gt;&lt;/textarea&gt;\r\n&lt;/div&gt;\r\n&lt;div class=&quot;form-group&quot;&gt;\r\n    &lt;label for=&quot;prodPrice&quot;&gt;Product Price&lt;/label&gt;\r\n    &lt;input type=&quot;number&quot; class=&quot;form-control&quot; name=&quot;prodPrice&quot; /&gt;\r\n&lt;/div&gt;\r\n&lt;div class=&quot;form-group&quot;&gt;\r\n    &lt;label for=&quot;prodImage&quot;&gt;Product Image URL:&lt;/label&gt;\r\n    &lt;input type=&quot;url&quot; class=&quot;form-control&quot; name=&quot;prodImage&quot; /&gt;\r\n&lt;/div&gt;\r\n```","title":"How can I make it so that my form requires certain fields","body":"<p>Add <code>spring-boot-starter-validation</code> as a dependency. Add the annotations to your <code>Product</code> and use <code>Product</code> as a model object instead of requst parameters.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(&quot;/save&quot;)\npublic String save(@Valid @ModelAttribute Product product) {\n    productRepository.save(product);\n    return &quot;redirect:/show/&quot; + product.getId();\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Document(collection = &quot;products&quot;)\npublic class Product {\n    \n    @Id\n    String id;\n    \n    @NotBlank\n    String prodName;\n    @NotBlank\n    String prodDesc;\n    @Min(0.01d)\n    Double prodPrice;\n    String prodImage;\n</code></pre>\n<p>Some of that for validation (ofcourse you would need to determine which to use based on your requirements.</p>\n<p>Additionally use proper types and <code>required</code> keyword in your HTML templates.</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div class=&quot;form-group&quot;&gt;\n    &lt;label for=&quot;email&quot;&gt;Product Name:&lt;/label&gt;\n    &lt;input type=&quot;text&quot; class=&quot;form-control&quot; name=&quot;prodName&quot; required /&gt;\n&lt;/div&gt;\n&lt;div class=&quot;form-group&quot;&gt;\n    &lt;label for=&quot;prodDesc&quot;&gt;Product Description&lt;/label&gt;\n    &lt;textarea class=&quot;form-control&quot; name=&quot;prodDesc&quot; cols=&quot;60&quot; rows=&quot;3&quot; required&gt;&lt;/textarea&gt;\n&lt;/div&gt;\n&lt;div class=&quot;form-group&quot;&gt;\n    &lt;label for=&quot;prodPrice&quot;&gt;Product Price&lt;/label&gt;\n    &lt;input type=&quot;number&quot; class=&quot;form-control&quot; name=&quot;prodPrice&quot; /&gt;\n&lt;/div&gt;\n&lt;div class=&quot;form-group&quot;&gt;\n    &lt;label for=&quot;prodImage&quot;&gt;Product Image URL:&lt;/label&gt;\n    &lt;input type=&quot;url&quot; class=&quot;form-control&quot; name=&quot;prodImage&quot; /&gt;\n&lt;/div&gt;\n</code></pre>\n"}],"owner":{"account_id":27183059,"reputation":11,"user_id":20717961,"display_name":"Sohaib"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671012035,"creation_date":1670998989,"question_id":74794306,"body_markdown":"I am trying to make a Spring Boot project that works like an e-commerce website.\r\n\r\nIn the forms for creating and editing a product, I want to make it so that all fields are required, because if I do not input a price, then I get the &quot;Whitelabel Error Page: This application has no explicit mapping for /error, so you are seeing this as a fallback.&quot; error.\r\n\r\nMain class\r\n````java\r\n@SpringBootApplication\r\npublic class EcommerceWebsiteApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(EcommerceWebsiteApplication.class, args);\r\n\t}\r\n\r\n}\r\n````\r\n\r\nProductController\r\n````java\r\n/**This is the product controller class. It has different mappings as well as the methods that allow \r\n * the user to perform the different CRUD operations with regard to the products. */\r\n@Controller\r\npublic class ProductController {\r\n\r\n    @Autowired\r\n    ProductRepository productRepository;\r\n\r\n    @RequestMapping(&quot;/product&quot;)\r\n    public String product(Model model) {\r\n        model.addAttribute(&quot;products&quot;, productRepository.findAll());\r\n\r\n        return &quot;product&quot;;\r\n    }\r\n\r\n    @RequestMapping(&quot;/create&quot;)\r\n    public String create(Model model) {\r\n        return &quot;create&quot;;\r\n    }\r\n \r\n    @RequestMapping(&quot;/save&quot;)\r\n    public String save(@RequestParam String prodName, @RequestParam String prodDesc, @RequestParam Double prodPrice, @RequestParam String prodImage) {\r\n        Product product = new Product();\r\n        product.setProdName(prodName);\r\n        product.setProdDesc(prodDesc);\r\n        product.setProdPrice(prodPrice);\r\n        product.setProdImage(prodImage);\r\n        \r\n        productRepository.save(product);\r\n        \r\n        return &quot;redirect:/show/&quot; + product.getId();\r\n    }\r\n    \r\n    @RequestMapping(&quot;/show/{id}&quot;)\r\n    public String show(@PathVariable String id, Model model) {\r\n        model.addAttribute(&quot;product&quot;, productRepository.findById(id).get());\r\n       \r\n        return &quot;show&quot;;\r\n    }\r\n    \r\n    @RequestMapping(&quot;/delete&quot;)\r\n    public String delete(@RequestParam String id) {\r\n        Optional&lt;Product&gt; product = productRepository.findById(id);\r\n        productRepository.delete(product.get());\r\n\r\n        return &quot;redirect:/product&quot;;\r\n    }\r\n    \r\n    @RequestMapping(&quot;/edit/{id}&quot;)\r\n    public String edit(@PathVariable String id, Model model) {\r\n        model.addAttribute(&quot;product&quot;, productRepository.findById(id).get());\r\n        \r\n        return &quot;edit&quot;;\r\n    }\r\n    \r\n    @RequestMapping(&quot;/update&quot;)\r\n    public String update(@RequestParam String id, @RequestParam String prodName, @RequestParam String prodDesc, @RequestParam Double prodPrice, @RequestParam String prodImage) {\r\n    \tOptional&lt;Product&gt; product = productRepository.findById(id);\r\n    \t\r\n        product.get().setProdName(prodName);\r\n        product.get().setProdDesc(prodDesc);\r\n        product.get().setProdPrice(prodPrice);\r\n        product.get().setProdImage(prodImage);\r\n        \r\n        productRepository.save(product.get());\r\n\r\n        return &quot;redirect:/show/&quot; + product.get().getId();\r\n    }\r\n}\r\n````\r\n\r\nProduct POJO\r\n````java\r\n\r\n@Document(collection = &quot;products&quot;)\r\npublic class Product {\r\n\t\r\n    @Id\r\n    String id;\r\n    \r\n    String prodName;\r\n    String prodDesc;\r\n    Double prodPrice;\r\n    String prodImage;\r\n\r\n    public Product() {\r\n    }\r\n\r\n    public Product(String prodName, String prodDesc, Double prodPrice, String prodImage) {\r\n        this.prodName = prodName;\r\n        this.prodDesc = prodDesc;\r\n        this.prodPrice = prodPrice;\r\n        this.prodImage = prodImage;\r\n    }\r\n\r\n    public String getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(String id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getProdName() {\r\n        return prodName;\r\n    }\r\n\r\n    public void setProdName(String prodName) {\r\n        this.prodName = prodName;\r\n    }\r\n\r\n    public String getProdDesc() {\r\n        return prodDesc;\r\n    }\r\n\r\n    public void setProdDesc(String prodDesc) {\r\n        this.prodDesc = prodDesc;\r\n    }\r\n\r\n    public Double getProdPrice() {\r\n        return prodPrice;\r\n    }\r\n\r\n    public void setProdPrice(Double prodPrice) {\r\n        this.prodPrice = prodPrice;\r\n    }\r\n\r\n    public String getProdImage() {\r\n        return prodImage;\r\n    }\r\n\r\n    public void setProdImage(String prodImage) {\r\n        this.prodImage = prodImage;\r\n    }\r\n}\r\n````\r\n\r\ncreate.html form page\r\n````html\r\n&lt;!DOCTYPE HTML&gt;\r\n&lt;html lang=&quot;en&quot;\r\n      xmlns:th=&quot;http://www.thymeleaf.org&quot;\r\n      xmlns:layout=&quot;http://www.ultraq.net.nz/thymeleaf/layout&quot;\r\n      layout:decorator=&quot;default&quot;&gt;\r\n    &lt;head&gt;\r\n        &lt;title&gt;Create Product&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n        &lt;div layout:fragment=&quot;content&quot; class=&quot;row&quot;&gt;\r\n            &lt;div class=&quot;col-xs-8 col-md-8&quot;&gt;\r\n            \r\n                &lt;h3&gt;\r\n                    &lt;a href=&quot;/product&quot; class=&quot;btn btn-lg btn-primary&quot;&gt;&lt;span class=&quot;glyphicon glyphicon-list&quot;&gt;&lt;/span&gt;Product List&lt;/a&gt;\r\n                &lt;/h3&gt;\r\n                \r\n                &lt;h2&gt;Create Product&lt;/h2&gt;\r\n                \r\n                &lt;form action=&quot;/save&quot;&gt;\r\n                \r\n                    &lt;div class=&quot;form-group&quot;&gt;\r\n                        &lt;label for=&quot;email&quot;&gt;Product Name:&lt;/label&gt;\r\n                        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; name=&quot;prodName&quot; /&gt;\r\n                    &lt;/div&gt;\r\n                    &lt;div class=&quot;form-group&quot;&gt;\r\n                        &lt;label for=&quot;email&quot;&gt;Product Description&lt;/label&gt;\r\n                        &lt;textarea class=&quot;form-control&quot; name=&quot;prodDesc&quot; cols=&quot;60&quot; rows=&quot;3&quot;&gt;&lt;/textarea&gt;\r\n                    &lt;/div&gt;\r\n                    &lt;div class=&quot;form-group&quot;&gt;\r\n                        &lt;label for=&quot;email&quot;&gt;Product Price&lt;/label&gt;\r\n                        &lt;input type=&quot;number&quot; class=&quot;form-control&quot; name=&quot;prodPrice&quot; /&gt;\r\n                    &lt;/div&gt;\r\n                    &lt;div class=&quot;form-group&quot;&gt;\r\n                        &lt;label for=&quot;email&quot;&gt;Product Image URL:&lt;/label&gt;\r\n                        &lt;input type=&quot;url&quot; class=&quot;form-control&quot; name=&quot;prodImage&quot; /&gt;\r\n                    &lt;/div&gt;\r\n                    \r\n                    &lt;button type=&quot;submit&quot; class=&quot;btn btn-success&quot;&gt;Save&lt;/button&gt;\r\n                &lt;/form&gt;\r\n            &lt;/div&gt;\r\n        &lt;/div&gt;\r\n    &lt;/body&gt;\r\n&lt;/html&gt;\r\n````\r\n\r\nedit.html form page\r\n````\r\n&lt;!DOCTYPE HTML&gt;\r\n&lt;html lang=&quot;en&quot;\r\n      xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\r\n      xmlns:th=&quot;http://www.thymeleaf.org&quot;\r\n      xmlns:layout=&quot;http://www.ultraq.net.nz/thymeleaf/layout&quot;\r\n      layout:decorate=&quot;default&quot;&gt;\r\n    &lt;head&gt;\r\n        &lt;title&gt;Edit Product&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n        &lt;div layout:fragment=&quot;content&quot; class=&quot;row&quot;&gt;\r\n            &lt;div class=&quot;col-xs-8 col-md-8&quot;&gt;\r\n            \r\n                &lt;h3&gt;\r\n                    &lt;a href=&quot;/product&quot; class=&quot;btn btn-lg btn-primary&quot;&gt;&lt;span class=&quot;glyphicon glyphicon-list&quot;&gt;&lt;/span&gt;Product List&lt;/a&gt;\r\n                &lt;/h3&gt;\r\n                \r\n                &lt;h2&gt;Edit Product&lt;/h2&gt;\r\n                \r\n                &lt;form action=&quot;/update&quot;&gt;\r\n                \r\n                    &lt;div class=&quot;form-group&quot;&gt;\r\n                        &lt;label for=&quot;email&quot;&gt;Product Name:&lt;/label&gt;\r\n                        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; name=&quot;prodName&quot; th:value=&quot;${product.prodName}&quot; /&gt;\r\n                    &lt;/div&gt;\r\n                    &lt;div class=&quot;form-group&quot;&gt;\r\n                        &lt;label for=&quot;email&quot;&gt;Product Description&lt;/label&gt;\r\n                        &lt;textarea class=&quot;form-control&quot; name=&quot;prodDesc&quot; cols=&quot;60&quot; rows=&quot;3&quot; th:text=&quot;${product.prodDesc}&quot;&gt;&lt;/textarea&gt;\r\n                    &lt;/div&gt;\r\n                    &lt;div class=&quot;form-group&quot;&gt;\r\n                        &lt;label for=&quot;email&quot;&gt;Product Price&lt;/label&gt;\r\n                        &lt;input type=&quot;number&quot; class=&quot;form-control&quot; name=&quot;prodPrice&quot; th:value=&quot;${product.prodPrice}&quot; /&gt;\r\n                    &lt;/div&gt;\r\n                    &lt;div class=&quot;form-group&quot;&gt;\r\n                        &lt;label for=&quot;email&quot;&gt;Product Image URL:&lt;/label&gt;\r\n                        &lt;input type=&quot;url&quot; class=&quot;form-control&quot; name=&quot;prodImage&quot; th:value=&quot;${product.prodImage}&quot; /&gt;\r\n                    &lt;/div&gt;\r\n                    \r\n                    &lt;input type=&quot;hidden&quot; name=&quot;id&quot; th:value=&quot;${product.id}&quot; /&gt;\r\n                    \r\n                    &lt;button type=&quot;submit&quot; class=&quot;btn btn-success&quot;&gt;Save&lt;/button&gt;\r\n                &lt;/form&gt;\r\n            &lt;/div&gt;\r\n        &lt;/div&gt;\r\n    &lt;/body&gt;\r\n&lt;/html&gt;\r\n````\r\n\r\npom.xml\r\n````xml\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.ecommerce&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;ecommerce-website&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;ecommerce-website&lt;/name&gt;\r\n\t&lt;description&gt;Ecommerce website using Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n````\r\n\r\nI tried looking on different forms, and I saw answers that involved using annotations like @NotNull or creating a configuration class, but neither of those have worked for me. ","title":"How can I make it so that my form requires certain fields","body":"<p>I am trying to make a Spring Boot project that works like an e-commerce website.</p>\n<p>In the forms for creating and editing a product, I want to make it so that all fields are required, because if I do not input a price, then I get the &quot;Whitelabel Error Page: This application has no explicit mapping for /error, so you are seeing this as a fallback.&quot; error.</p>\n<p>Main class</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\npublic class EcommerceWebsiteApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(EcommerceWebsiteApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>ProductController</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**This is the product controller class. It has different mappings as well as the methods that allow \n * the user to perform the different CRUD operations with regard to the products. */\n@Controller\npublic class ProductController {\n\n    @Autowired\n    ProductRepository productRepository;\n\n    @RequestMapping(&quot;/product&quot;)\n    public String product(Model model) {\n        model.addAttribute(&quot;products&quot;, productRepository.findAll());\n\n        return &quot;product&quot;;\n    }\n\n    @RequestMapping(&quot;/create&quot;)\n    public String create(Model model) {\n        return &quot;create&quot;;\n    }\n \n    @RequestMapping(&quot;/save&quot;)\n    public String save(@RequestParam String prodName, @RequestParam String prodDesc, @RequestParam Double prodPrice, @RequestParam String prodImage) {\n        Product product = new Product();\n        product.setProdName(prodName);\n        product.setProdDesc(prodDesc);\n        product.setProdPrice(prodPrice);\n        product.setProdImage(prodImage);\n        \n        productRepository.save(product);\n        \n        return &quot;redirect:/show/&quot; + product.getId();\n    }\n    \n    @RequestMapping(&quot;/show/{id}&quot;)\n    public String show(@PathVariable String id, Model model) {\n        model.addAttribute(&quot;product&quot;, productRepository.findById(id).get());\n       \n        return &quot;show&quot;;\n    }\n    \n    @RequestMapping(&quot;/delete&quot;)\n    public String delete(@RequestParam String id) {\n        Optional&lt;Product&gt; product = productRepository.findById(id);\n        productRepository.delete(product.get());\n\n        return &quot;redirect:/product&quot;;\n    }\n    \n    @RequestMapping(&quot;/edit/{id}&quot;)\n    public String edit(@PathVariable String id, Model model) {\n        model.addAttribute(&quot;product&quot;, productRepository.findById(id).get());\n        \n        return &quot;edit&quot;;\n    }\n    \n    @RequestMapping(&quot;/update&quot;)\n    public String update(@RequestParam String id, @RequestParam String prodName, @RequestParam String prodDesc, @RequestParam Double prodPrice, @RequestParam String prodImage) {\n        Optional&lt;Product&gt; product = productRepository.findById(id);\n        \n        product.get().setProdName(prodName);\n        product.get().setProdDesc(prodDesc);\n        product.get().setProdPrice(prodPrice);\n        product.get().setProdImage(prodImage);\n        \n        productRepository.save(product.get());\n\n        return &quot;redirect:/show/&quot; + product.get().getId();\n    }\n}\n</code></pre>\n<p>Product POJO</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Document(collection = &quot;products&quot;)\npublic class Product {\n    \n    @Id\n    String id;\n    \n    String prodName;\n    String prodDesc;\n    Double prodPrice;\n    String prodImage;\n\n    public Product() {\n    }\n\n    public Product(String prodName, String prodDesc, Double prodPrice, String prodImage) {\n        this.prodName = prodName;\n        this.prodDesc = prodDesc;\n        this.prodPrice = prodPrice;\n        this.prodImage = prodImage;\n    }\n\n    public String getId() {\n        return id;\n    }\n\n    public void setId(String id) {\n        this.id = id;\n    }\n\n    public String getProdName() {\n        return prodName;\n    }\n\n    public void setProdName(String prodName) {\n        this.prodName = prodName;\n    }\n\n    public String getProdDesc() {\n        return prodDesc;\n    }\n\n    public void setProdDesc(String prodDesc) {\n        this.prodDesc = prodDesc;\n    }\n\n    public Double getProdPrice() {\n        return prodPrice;\n    }\n\n    public void setProdPrice(Double prodPrice) {\n        this.prodPrice = prodPrice;\n    }\n\n    public String getProdImage() {\n        return prodImage;\n    }\n\n    public void setProdImage(String prodImage) {\n        this.prodImage = prodImage;\n    }\n}\n</code></pre>\n<p>create.html form page</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!DOCTYPE HTML&gt;\n&lt;html lang=&quot;en&quot;\n      xmlns:th=&quot;http://www.thymeleaf.org&quot;\n      xmlns:layout=&quot;http://www.ultraq.net.nz/thymeleaf/layout&quot;\n      layout:decorator=&quot;default&quot;&gt;\n    &lt;head&gt;\n        &lt;title&gt;Create Product&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;div layout:fragment=&quot;content&quot; class=&quot;row&quot;&gt;\n            &lt;div class=&quot;col-xs-8 col-md-8&quot;&gt;\n            \n                &lt;h3&gt;\n                    &lt;a href=&quot;/product&quot; class=&quot;btn btn-lg btn-primary&quot;&gt;&lt;span class=&quot;glyphicon glyphicon-list&quot;&gt;&lt;/span&gt;Product List&lt;/a&gt;\n                &lt;/h3&gt;\n                \n                &lt;h2&gt;Create Product&lt;/h2&gt;\n                \n                &lt;form action=&quot;/save&quot;&gt;\n                \n                    &lt;div class=&quot;form-group&quot;&gt;\n                        &lt;label for=&quot;email&quot;&gt;Product Name:&lt;/label&gt;\n                        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; name=&quot;prodName&quot; /&gt;\n                    &lt;/div&gt;\n                    &lt;div class=&quot;form-group&quot;&gt;\n                        &lt;label for=&quot;email&quot;&gt;Product Description&lt;/label&gt;\n                        &lt;textarea class=&quot;form-control&quot; name=&quot;prodDesc&quot; cols=&quot;60&quot; rows=&quot;3&quot;&gt;&lt;/textarea&gt;\n                    &lt;/div&gt;\n                    &lt;div class=&quot;form-group&quot;&gt;\n                        &lt;label for=&quot;email&quot;&gt;Product Price&lt;/label&gt;\n                        &lt;input type=&quot;number&quot; class=&quot;form-control&quot; name=&quot;prodPrice&quot; /&gt;\n                    &lt;/div&gt;\n                    &lt;div class=&quot;form-group&quot;&gt;\n                        &lt;label for=&quot;email&quot;&gt;Product Image URL:&lt;/label&gt;\n                        &lt;input type=&quot;url&quot; class=&quot;form-control&quot; name=&quot;prodImage&quot; /&gt;\n                    &lt;/div&gt;\n                    \n                    &lt;button type=&quot;submit&quot; class=&quot;btn btn-success&quot;&gt;Save&lt;/button&gt;\n                &lt;/form&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>edit.html form page</p>\n<pre><code>&lt;!DOCTYPE HTML&gt;\n&lt;html lang=&quot;en&quot;\n      xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\n      xmlns:th=&quot;http://www.thymeleaf.org&quot;\n      xmlns:layout=&quot;http://www.ultraq.net.nz/thymeleaf/layout&quot;\n      layout:decorate=&quot;default&quot;&gt;\n    &lt;head&gt;\n        &lt;title&gt;Edit Product&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;div layout:fragment=&quot;content&quot; class=&quot;row&quot;&gt;\n            &lt;div class=&quot;col-xs-8 col-md-8&quot;&gt;\n            \n                &lt;h3&gt;\n                    &lt;a href=&quot;/product&quot; class=&quot;btn btn-lg btn-primary&quot;&gt;&lt;span class=&quot;glyphicon glyphicon-list&quot;&gt;&lt;/span&gt;Product List&lt;/a&gt;\n                &lt;/h3&gt;\n                \n                &lt;h2&gt;Edit Product&lt;/h2&gt;\n                \n                &lt;form action=&quot;/update&quot;&gt;\n                \n                    &lt;div class=&quot;form-group&quot;&gt;\n                        &lt;label for=&quot;email&quot;&gt;Product Name:&lt;/label&gt;\n                        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; name=&quot;prodName&quot; th:value=&quot;${product.prodName}&quot; /&gt;\n                    &lt;/div&gt;\n                    &lt;div class=&quot;form-group&quot;&gt;\n                        &lt;label for=&quot;email&quot;&gt;Product Description&lt;/label&gt;\n                        &lt;textarea class=&quot;form-control&quot; name=&quot;prodDesc&quot; cols=&quot;60&quot; rows=&quot;3&quot; th:text=&quot;${product.prodDesc}&quot;&gt;&lt;/textarea&gt;\n                    &lt;/div&gt;\n                    &lt;div class=&quot;form-group&quot;&gt;\n                        &lt;label for=&quot;email&quot;&gt;Product Price&lt;/label&gt;\n                        &lt;input type=&quot;number&quot; class=&quot;form-control&quot; name=&quot;prodPrice&quot; th:value=&quot;${product.prodPrice}&quot; /&gt;\n                    &lt;/div&gt;\n                    &lt;div class=&quot;form-group&quot;&gt;\n                        &lt;label for=&quot;email&quot;&gt;Product Image URL:&lt;/label&gt;\n                        &lt;input type=&quot;url&quot; class=&quot;form-control&quot; name=&quot;prodImage&quot; th:value=&quot;${product.prodImage}&quot; /&gt;\n                    &lt;/div&gt;\n                    \n                    &lt;input type=&quot;hidden&quot; name=&quot;id&quot; th:value=&quot;${product.id}&quot; /&gt;\n                    \n                    &lt;button type=&quot;submit&quot; class=&quot;btn btn-success&quot;&gt;Save&lt;/button&gt;\n                &lt;/form&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.ecommerce&lt;/groupId&gt;\n    &lt;artifactId&gt;ecommerce-website&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;ecommerce-website&lt;/name&gt;\n    &lt;description&gt;Ecommerce website using Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        \n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>I tried looking on different forms, and I saw answers that involved using annotations like @NotNull or creating a configuration class, but neither of those have worked for me.</p>\n"},{"tags":["java","android","xml","android-studio","android-manifest"],"comments":[{"owner":{"account_id":3820680,"reputation":14746,"user_id":3168859,"accept_rate":88,"display_name":"Lal"},"score":0,"creation_date":1441733716,"post_id":32463917,"comment_id":52789739,"body_markdown":"As the error suggests, you are missing `android:name` for the activity in your manifest.","body":"As the error suggests, you are missing <code>android:name</code> for the activity in your manifest."}],"answers":[{"tags":[],"owner":{"account_id":235103,"reputation":156444,"user_id":501696,"accept_rate":91,"display_name":"Blackbelt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1441733935,"creation_date":1441733935,"answer_id":32464015,"question_id":32463917,"body_markdown":"in the Manifest you posted in the screenshot you are using `android:title` instead of `android:name` for your `Activity`s. Change it with \r\n\r\n     android:name=&quot;.MainActivity&quot;\r\n\r\nthe property is mandatory. You can read more [here][1]\r\n\r\n\r\n  [1]: http://developer.android.com/guide/topics/manifest/activity-element.html#nm","title":"Android Studio Manifest file error","body":"<p>in the Manifest you posted in the screenshot you are using <code>android:title</code> instead of <code>android:name</code> for your <code>Activity</code>s. Change it with </p>\n\n<pre><code> android:name=\".MainActivity\"\n</code></pre>\n\n<p>the property is mandatory. You can read more <a href=\"http://developer.android.com/guide/topics/manifest/activity-element.html#nm\" rel=\"nofollow\">here</a></p>\n"},{"tags":[],"owner":{"account_id":6919785,"reputation":203,"user_id":5312823,"accept_rate":45,"display_name":"semiColon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1441734071,"creation_date":1441734071,"answer_id":32464058,"question_id":32463917,"body_markdown":"    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n\r\nTry changing your manifest file to this","title":"Android Studio Manifest file error","body":"<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n</code></pre>\n\n<p>Try changing your manifest file to this</p>\n"},{"tags":[],"owner":{"account_id":18602768,"reputation":1,"user_id":13557209,"display_name":"Adrian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589660041,"creation_date":1589660041,"answer_id":61842970,"question_id":32463917,"body_markdown":"this is the problem its not pulling from the string it should be showing the app name\r\n\r\n*android:label=&quot;@string/app_name&quot;*\r\n\r\nthe easiest solution create new app proyect open manifest copy that line make user not to press it or you will break string again paste line over your broken string if you want change name go to the strings xml change name there\r\n","title":"Android Studio Manifest file error","body":"<p>this is the problem its not pulling from the string it should be showing the app name</p>\n\n<p><em>android:label=\"@string/app_name\"</em></p>\n\n<p>the easiest solution create new app proyect open manifest copy that line make user not to press it or you will break string again paste line over your broken string if you want change name go to the strings xml change name there</p>\n"}],"owner":{"account_id":3398327,"reputation":197,"user_id":2851275,"accept_rate":54,"display_name":"Serhii Tereshchenko"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6620,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":32464015,"answer_count":3,"score":0,"last_activity_date":1671012012,"creation_date":1441733577,"question_id":32463917,"body_markdown":"Something went wrong with my AndroidManifest.xml file. I was launching tests one more time when suddenly Android Studio crashed, launched again and then next error occured (I&#39;m sorry, I don&#39;t have enough rating to upload pictures directly):\r\n[![enter image description here][1]][1]\r\n\r\nHere is the gradle console:\r\n[![enter image description here][2]][2]\r\n\r\nMy strings.xml file is ok:\r\n\r\n    &lt;resources&gt;\r\n    &lt;string title=&quot;app_name&quot;&gt;PaySpaceMagazine&lt;/string&gt;\r\n    &lt;string title=&quot;hello_world&quot;&gt;Hello world!&lt;/string&gt;\r\n    &lt;string title=&quot;action_settings&quot;&gt;Settings&lt;/string&gt;\r\n\r\n    &lt;string title=&quot;actual&quot;&gt;Актуально&lt;/string&gt;\r\n    &lt;string title=&quot;last_news&quot;&gt;Последние известия&lt;/string&gt;\r\n&lt;/resources&gt;\r\n\r\nAlso there is other manifest file without any errors:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    package=&quot;sunshine.ssidit.pp.ua.sunshineproject&quot; &gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:theme=&quot;@style/AppTheme&quot; &gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:label=&quot;@string/app_name&quot; &gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n\r\nDid anyone have same problem?\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/tw4q1.png\r\n  [2]: http://i.stack.imgur.com/sSuW6.png","title":"Android Studio Manifest file error","body":"<p>Something went wrong with my AndroidManifest.xml file. I was launching tests one more time when suddenly Android Studio crashed, launched again and then next error occured (I'm sorry, I don't have enough rating to upload pictures directly):\n<a href=\"https://i.stack.imgur.com/tw4q1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tw4q1.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is the gradle console:\n<a href=\"https://i.stack.imgur.com/sSuW6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sSuW6.png\" alt=\"enter image description here\"></a></p>\n\n<p>My strings.xml file is ok:</p>\n\n<pre><code>&lt;resources&gt;\n&lt;string title=\"app_name\"&gt;PaySpaceMagazine&lt;/string&gt;\n&lt;string title=\"hello_world\"&gt;Hello world!&lt;/string&gt;\n&lt;string title=\"action_settings\"&gt;Settings&lt;/string&gt;\n\n&lt;string title=\"actual\"&gt;Актуально&lt;/string&gt;\n&lt;string title=\"last_news\"&gt;Последние известия&lt;/string&gt;\n</code></pre>\n\n<p></p>\n\n<p>Also there is other manifest file without any errors:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n</code></pre>\n\n<p></p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n\n&lt;application\n    android:allowBackup=\"true\"\n    android:icon=\"@mipmap/ic_launcher\"\n    android:label=\"@string/app_name\"\n    android:theme=\"@style/AppTheme\" &gt;\n    &lt;activity\n        android:name=\".MainActivity\"\n        android:label=\"@string/app_name\" &gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n            &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n&lt;/application&gt;\n</code></pre>\n\n<p></p>\n\n<p>Did anyone have same problem?</p>\n"},{"tags":["java","hibernate","jpa","orm","hibernate-mapping"],"answers":[{"tags":[],"owner":{"account_id":1699755,"reputation":1,"user_id":1560185,"display_name":"user1560185"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424088061,"creation_date":1424088061,"answer_id":28540992,"question_id":28539915,"body_markdown":"Define your @SequenceGenerator at column level rather than at class level. So you can create two separate sequenceGenerator - a1_seq and b1 for two different columns.\r\n\r\n    @Data\r\n    @Table(name=&quot;a_b&quot;)\r\n    \r\n    public class ABC {\r\n\r\n      @Id\r\n      @Column(name = &quot;id&quot;)\r\n      @SequenceGenerator(name = &quot;a1_seq&quot;, sequenceName = &quot;a1_seq&quot;, allocationSize    = 1)\r\n      @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;a1_seq&quot;)\r\n      private Integer id;\r\n\r\n      @Column(name = &quot;c&quot;)\r\n      private String c;\r\n\r\n      @SequenceGenerator(name = &quot;b1_seq&quot;, sequenceName = &quot;b1_seq&quot;, allocationSize = 1)\r\n      @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;b1&quot;)\r\n      @Column(name = &quot;b)\r\n      private Integer b;\r\n\r\n}\r\n\r\nThis should work. I have not tested it but since SequenceGenerator is allowed at field level, it should work.","title":"Multiple SequenceGenerator in Hibernate Entity","body":"<p>Define your @SequenceGenerator at column level rather than at class level. So you can create two separate sequenceGenerator - a1_seq and b1 for two different columns.</p>\n\n<pre><code>@Data\n@Table(name=\"a_b\")\n\npublic class ABC {\n\n  @Id\n  @Column(name = \"id\")\n  @SequenceGenerator(name = \"a1_seq\", sequenceName = \"a1_seq\", allocationSize    = 1)\n  @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"a1_seq\")\n  private Integer id;\n\n  @Column(name = \"c\")\n  private String c;\n\n  @SequenceGenerator(name = \"b1_seq\", sequenceName = \"b1_seq\", allocationSize = 1)\n  @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"b1\")\n  @Column(name = \"b)\n  private Integer b;\n</code></pre>\n\n<p>}</p>\n\n<p>This should work. I have not tested it but since SequenceGenerator is allowed at field level, it should work.</p>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1424122219,"creation_date":1424122219,"answer_id":28550689,"question_id":28539915,"body_markdown":"You should have only one SequenceGenerator for the Primary Key:\r\n\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @SequenceGenerator(name = &quot;a1_seq&quot;, sequenceName = &quot;a1_seq&quot;, allocationSize    = 1)\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;a1_seq&quot;)\r\n    private Integer id;\r\n\r\nand for the foreign key you could have:\r\n\r\n    @Column(name = &quot;b, columnDefinition=&quot;serial&quot;)\r\n    private Integer b;\r\n\r\nwhich should work for PostgreSQL.","title":"Multiple SequenceGenerator in Hibernate Entity","body":"<p>You should have only one SequenceGenerator for the Primary Key:</p>\n\n<pre><code>@Id\n@Column(name = \"id\")\n@SequenceGenerator(name = \"a1_seq\", sequenceName = \"a1_seq\", allocationSize    = 1)\n@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"a1_seq\")\nprivate Integer id;\n</code></pre>\n\n<p>and for the foreign key you could have:</p>\n\n<pre><code>@Column(name = \"b, columnDefinition=\"serial\")\nprivate Integer b;\n</code></pre>\n\n<p>which should work for PostgreSQL.</p>\n"},{"tags":[],"owner":{"account_id":17872540,"reputation":1,"user_id":12983449,"display_name":"Gayath Halanayake"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671011795,"creation_date":1671011727,"answer_id":74796393,"question_id":28539915,"body_markdown":"Trick is to add @Id annotation to both Sequence Generators. You can achieve this by using @IdClass().\r\n\r\n    @Entity\r\n    @Table(name = &quot;table_name&quot;)\r\n    @IdClass(DBSequenceId.class)\r\n    public class DBSequence implements Serializable {\r\n    \r\n    \t@Id\r\n    \t@SequenceGenerator(name = &quot;yourName1&quot;, sequenceName = &quot;yourSeqName1&quot;, allocationSize = 1)\r\n    \t@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;yourName1&quot;)\r\n    \t@Column(name = &quot;first_seq&quot;, updatable = false)\r\n    \tprotected int firstSeq;\r\n    \r\n    \t@Id\r\n    \t@SequenceGenerator(name = &quot;yourName2&quot;, sequenceName = &quot;yourSeqName2&quot;, allocationSize = 1)\r\n    \t@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;yourName2&quot;)\r\n    \t@Column(name = &quot;second_seq&quot;, updatable = false)\r\n    \tprotected int secondSeq;\r\n    \r\n    }\r\n    \r\n    class DBSequenceId implements Serializable {\r\n    \r\n    \tprivate int firstSeq;\r\n    \tprivate int secondSeq;\r\n    \r\n    \t//Setters and getters are omitted \r\n    }\r\n\r\nTested on MariaDB","title":"Multiple SequenceGenerator in Hibernate Entity","body":"<p>Trick is to add @Id annotation to both Sequence Generators. You can achieve this by using @IdClass().</p>\n<pre><code>@Entity\n@Table(name = &quot;table_name&quot;)\n@IdClass(DBSequenceId.class)\npublic class DBSequence implements Serializable {\n\n    @Id\n    @SequenceGenerator(name = &quot;yourName1&quot;, sequenceName = &quot;yourSeqName1&quot;, allocationSize = 1)\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;yourName1&quot;)\n    @Column(name = &quot;first_seq&quot;, updatable = false)\n    protected int firstSeq;\n\n    @Id\n    @SequenceGenerator(name = &quot;yourName2&quot;, sequenceName = &quot;yourSeqName2&quot;, allocationSize = 1)\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;yourName2&quot;)\n    @Column(name = &quot;second_seq&quot;, updatable = false)\n    protected int secondSeq;\n\n}\n\nclass DBSequenceId implements Serializable {\n\n    private int firstSeq;\n    private int secondSeq;\n\n    //Setters and getters are omitted \n}\n</code></pre>\n<p>Tested on MariaDB</p>\n"}],"owner":{"account_id":1804059,"reputation":115,"user_id":1641603,"accept_rate":62,"display_name":"Siddharth Agarwal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5194,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":28550689,"answer_count":3,"score":3,"last_activity_date":1671011795,"creation_date":1424084479,"question_id":28539915,"body_markdown":"Is it possible to use 2 sequence generators in Hibernate  Entity Class. I  want to use two sequence generator for my case one for the primary key and other for a simple field. How can i achieve the same?\r\n\r\n    @Data\r\n    @Table(name=&quot;a_b&quot;)\r\n    @SequenceGenerator(name = &quot;a1_seq&quot;, sequenceName = &quot;a1_seq&quot;, allocationSize    = 1)\r\n    @SequenceGenerator(name = &quot;b1_seq&quot;, sequenceName = &quot;b1_seq&quot;, allocationSize = 1)\r\n    public class ABC {\r\n    \r\n        @Id\r\n        @Column(name = &quot;id&quot;)\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;a1_seq&quot;)\r\n        private Integer id;\r\n    \r\n        @Column(name = &quot;c&quot;)\r\n        private String c;\r\n    \r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;b1&quot;)\r\n        @Column(name = &quot;b)\r\n        private Integer b;\r\n\r\n    }","title":"Multiple SequenceGenerator in Hibernate Entity","body":"<p>Is it possible to use 2 sequence generators in Hibernate  Entity Class. I  want to use two sequence generator for my case one for the primary key and other for a simple field. How can i achieve the same?</p>\n\n<pre><code>@Data\n@Table(name=\"a_b\")\n@SequenceGenerator(name = \"a1_seq\", sequenceName = \"a1_seq\", allocationSize    = 1)\n@SequenceGenerator(name = \"b1_seq\", sequenceName = \"b1_seq\", allocationSize = 1)\npublic class ABC {\n\n    @Id\n    @Column(name = \"id\")\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"a1_seq\")\n    private Integer id;\n\n    @Column(name = \"c\")\n    private String c;\n\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"b1\")\n    @Column(name = \"b)\n    private Integer b;\n\n}\n</code></pre>\n"},{"tags":["java","android","sim-card"],"comments":[{"owner":{"account_id":9573972,"reputation":1131,"user_id":7110786,"display_name":"Saif Ahmad"},"score":0,"creation_date":1671006863,"post_id":74795202,"comment_id":132001571,"body_markdown":"You can use `getActiveSubscriptionInfoForSimSlotIndex` from `SubscriptionManager` Class https://developer.android.com/reference/android/telephony/SubscriptionManager#getActiveSubscriptionInfoForSimSlotIndex(int)","body":"You can use <code>getActiveSubscriptionInfoForSimSlotIndex</code> from <code>SubscriptionManager</code> Class <a href=\"https://developer.android.com/reference/android/telephony/SubscriptionManager#getActiveSubscriptionInfoForSimSlotIndex(int)\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/telephony/&hellip;</a>"},{"owner":{"account_id":13052782,"reputation":51,"user_id":9432542,"display_name":"Shubham Vyas"},"score":0,"creation_date":1671185456,"post_id":74795202,"comment_id":132049212,"body_markdown":"@SaifAhmad I&#39;ve tried that but it is returning empty strings.","body":"@SaifAhmad I&#39;ve tried that but it is returning empty strings."},{"owner":{"account_id":9573972,"reputation":1131,"user_id":7110786,"display_name":"Saif Ahmad"},"score":0,"creation_date":1671192037,"post_id":74795202,"comment_id":132051263,"body_markdown":"Have you added read phone state manifest? https://developer.android.com/reference/android/Manifest.permission#READ_PHONE_STATE","body":"Have you added read phone state manifest? <a href=\"https://developer.android.com/reference/android/Manifest.permission#READ_PHONE_STATE\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/&hellip;</a>"},{"owner":{"account_id":13052782,"reputation":51,"user_id":9432542,"display_name":"Shubham Vyas"},"score":0,"creation_date":1671442960,"post_id":74795202,"comment_id":132092513,"body_markdown":"Yes and requested for it too but it too didn&#39;t worked @SaifAhmad","body":"Yes and requested for it too but it too didn&#39;t worked @SaifAhmad"}],"owner":{"account_id":13052782,"reputation":51,"user_id":9432542,"display_name":"Shubham Vyas"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":540,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671011525,"creation_date":1671005269,"question_id":74795202,"body_markdown":"I want to add the functionality of login similar to UPI apps. The user will select the SIM card from his phone and I will send an SMS from that SIM and will verify his phone number using that SMS. But I have to compare the number in the back-end or in API. So, I want to acquire the phone numbers of both SIM cards or the phone number of the SIM card user selects (Get the phone number from SMS or while sending SMS).\r\n\r\nI am putting a generic class that I made for SIM selections and SMS. I have tried getting the mobile number from SubscriptionInfo, but it gives the operator name and all details right except the mobile number which returns an empty string. I have found in different blogs or my R&amp;D that it is up to the operator whether to put the number there or not. So, if I am getting the mobile number, it is not 100% guaranteed that I will get the mobile number every time.\r\n\r\nHere&#39;s my generic class: SimUtil.java\r\n\r\n```java\r\nimport android.Manifest;\r\nimport android.app.Activity;\r\nimport android.content.Context;\r\nimport android.content.pm.PackageManager;\r\nimport android.telephony.SmsManager;\r\nimport android.telephony.SubscriptionInfo;\r\nimport android.telephony.SubscriptionManager;\r\n\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Timer;\r\nimport java.util.TimerTask;\r\n\r\npublic class SimUtil {\r\n\r\n    List&lt;SimCard&gt; simCards = new ArrayList&lt;&gt;();\r\n    Context context;\r\n\r\n    public SimUtil(Context context) {\r\n        this.context = context;\r\n        if (ActivityCompat.checkSelfPermission(context, Manifest.permission.READ_PHONE_STATE) != PackageManager.PERMISSION_GRANTED) {\r\n            setupPermissions();\r\n            return;\r\n        }\r\n        List&lt;SubscriptionInfo&gt; subscriptionInfos = SubscriptionManager.from(context.getApplicationContext()).getActiveSubscriptionInfoList();\r\n        for (int i = 0; i &lt; subscriptionInfos.size(); i++) {\r\n            SubscriptionInfo currentCard = subscriptionInfos.get(i);\r\n            SimCard simCard = new SimCard(i,currentCard);\r\n            simCards.add(simCard);\r\n        }\r\n    }\r\n\r\n    public int getSimCardCount() {\r\n        return this.simCards.size();\r\n    }\r\n\r\n    public List&lt;SimCard&gt; getSimCardList() {\r\n        if(simCards.size() &gt; 0)\r\n            return simCards;\r\n        else\r\n            return null;\r\n    }\r\n\r\n    public SimCard getFirstSimCard() {\r\n        return simCards.get(0);\r\n    }\r\n\r\n    public boolean hasDualSim() {\r\n        return simCards.size() &gt; 1;\r\n    }\r\n\r\n    public SimCard getSecondSimCard() {\r\n        if(hasDualSim())\r\n            return simCards.get(1);\r\n        else\r\n            return null;\r\n    }\r\n\r\n    public static void sendSMSFromSim1(String message) {\r\n        SmsManager.getSmsManagerForSubscriptionId(0)\r\n                .sendTextMessage(AppConstant.LOGIN_MOBILE_NUMBER, null, message, null, null);\r\n    }\r\n\r\n    public static void sendSMSFromSim2(String message) {\r\n        SmsManager.getSmsManagerForSubscriptionId(1)\r\n                .sendTextMessage(AppConstant.LOGIN_MOBILE_NUMBER, null, message, null, null);\r\n    }\r\n\r\n    private void setupPermissions() {\r\n        int permission = ContextCompat.checkSelfPermission(context, Manifest.permission.SEND_SMS);\r\n        if(permission != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions((Activity)context, new String[]{Manifest.permission.SEND_SMS}, 1);\r\n        }\r\n\r\n        int permission2 = ContextCompat.checkSelfPermission(context, Manifest.permission.READ_PHONE_STATE);\r\n        if(permission2 != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions((Activity)context, new String[]{Manifest.permission.READ_PHONE_STATE}, 1);\r\n        }\r\n    }\r\n\r\n    public static class SimCard {\r\n        int index;\r\n        String operatorName;\r\n        String mobileNumber;\r\n        String countryISO;\r\n\r\n        public SimCard(int index, String operatorName, String countryISO, String mobileNumber) {\r\n            this.index = index;\r\n            this.operatorName = operatorName;\r\n            this.countryISO = countryISO;\r\n            this.mobileNumber = mobileNumber;\r\n        }\r\n\r\n        public SimCard(int index,SubscriptionInfo subscriptionInfo) {\r\n            this.index = index;\r\n            this.operatorName = subscriptionInfo.getCarrierName().toString();\r\n            this.countryISO = subscriptionInfo.getCountryIso();\r\n            this.mobileNumber = subscriptionInfo.getNumber();\r\n        }\r\n\r\n        public int getIndex() {\r\n            return index;\r\n        }\r\n\r\n        public String getOperatorName() {\r\n            return operatorName;\r\n        }\r\n\r\n        public String getCountryISO() {\r\n            return countryISO;\r\n        }\r\n\r\n        public String getMobileNumber() {\r\n            return mobileNumber;\r\n        }\r\n    }\r\n}\r\n```","title":"Is there anyway I can get mobile number of both SIM cards in android Java?","body":"<p>I want to add the functionality of login similar to UPI apps. The user will select the SIM card from his phone and I will send an SMS from that SIM and will verify his phone number using that SMS. But I have to compare the number in the back-end or in API. So, I want to acquire the phone numbers of both SIM cards or the phone number of the SIM card user selects (Get the phone number from SMS or while sending SMS).</p>\n<p>I am putting a generic class that I made for SIM selections and SMS. I have tried getting the mobile number from SubscriptionInfo, but it gives the operator name and all details right except the mobile number which returns an empty string. I have found in different blogs or my R&amp;D that it is up to the operator whether to put the number there or not. So, if I am getting the mobile number, it is not 100% guaranteed that I will get the mobile number every time.</p>\n<p>Here's my generic class: SimUtil.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>import android.Manifest;\nimport android.app.Activity;\nimport android.content.Context;\nimport android.content.pm.PackageManager;\nimport android.telephony.SmsManager;\nimport android.telephony.SubscriptionInfo;\nimport android.telephony.SubscriptionManager;\n\nimport androidx.core.app.ActivityCompat;\nimport androidx.core.content.ContextCompat;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Timer;\nimport java.util.TimerTask;\n\npublic class SimUtil {\n\n    List&lt;SimCard&gt; simCards = new ArrayList&lt;&gt;();\n    Context context;\n\n    public SimUtil(Context context) {\n        this.context = context;\n        if (ActivityCompat.checkSelfPermission(context, Manifest.permission.READ_PHONE_STATE) != PackageManager.PERMISSION_GRANTED) {\n            setupPermissions();\n            return;\n        }\n        List&lt;SubscriptionInfo&gt; subscriptionInfos = SubscriptionManager.from(context.getApplicationContext()).getActiveSubscriptionInfoList();\n        for (int i = 0; i &lt; subscriptionInfos.size(); i++) {\n            SubscriptionInfo currentCard = subscriptionInfos.get(i);\n            SimCard simCard = new SimCard(i,currentCard);\n            simCards.add(simCard);\n        }\n    }\n\n    public int getSimCardCount() {\n        return this.simCards.size();\n    }\n\n    public List&lt;SimCard&gt; getSimCardList() {\n        if(simCards.size() &gt; 0)\n            return simCards;\n        else\n            return null;\n    }\n\n    public SimCard getFirstSimCard() {\n        return simCards.get(0);\n    }\n\n    public boolean hasDualSim() {\n        return simCards.size() &gt; 1;\n    }\n\n    public SimCard getSecondSimCard() {\n        if(hasDualSim())\n            return simCards.get(1);\n        else\n            return null;\n    }\n\n    public static void sendSMSFromSim1(String message) {\n        SmsManager.getSmsManagerForSubscriptionId(0)\n                .sendTextMessage(AppConstant.LOGIN_MOBILE_NUMBER, null, message, null, null);\n    }\n\n    public static void sendSMSFromSim2(String message) {\n        SmsManager.getSmsManagerForSubscriptionId(1)\n                .sendTextMessage(AppConstant.LOGIN_MOBILE_NUMBER, null, message, null, null);\n    }\n\n    private void setupPermissions() {\n        int permission = ContextCompat.checkSelfPermission(context, Manifest.permission.SEND_SMS);\n        if(permission != PackageManager.PERMISSION_GRANTED) {\n            ActivityCompat.requestPermissions((Activity)context, new String[]{Manifest.permission.SEND_SMS}, 1);\n        }\n\n        int permission2 = ContextCompat.checkSelfPermission(context, Manifest.permission.READ_PHONE_STATE);\n        if(permission2 != PackageManager.PERMISSION_GRANTED) {\n            ActivityCompat.requestPermissions((Activity)context, new String[]{Manifest.permission.READ_PHONE_STATE}, 1);\n        }\n    }\n\n    public static class SimCard {\n        int index;\n        String operatorName;\n        String mobileNumber;\n        String countryISO;\n\n        public SimCard(int index, String operatorName, String countryISO, String mobileNumber) {\n            this.index = index;\n            this.operatorName = operatorName;\n            this.countryISO = countryISO;\n            this.mobileNumber = mobileNumber;\n        }\n\n        public SimCard(int index,SubscriptionInfo subscriptionInfo) {\n            this.index = index;\n            this.operatorName = subscriptionInfo.getCarrierName().toString();\n            this.countryISO = subscriptionInfo.getCountryIso();\n            this.mobileNumber = subscriptionInfo.getNumber();\n        }\n\n        public int getIndex() {\n            return index;\n        }\n\n        public String getOperatorName() {\n            return operatorName;\n        }\n\n        public String getCountryISO() {\n            return countryISO;\n        }\n\n        public String getMobileNumber() {\n            return mobileNumber;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-cloud","nacos"],"comments":[{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1671028616,"post_id":74795448,"comment_id":132009117,"body_markdown":"With the introduction of spring.config.import we decided bootstrap should no longer be the default. It is still available, but it&#39;s now opt in","body":"With the introduction of spring.config.import we decided bootstrap should no longer be the default. It is still available, but it&#39;s now opt in"},{"owner":{"account_id":17110868,"reputation":1,"user_id":12381716,"display_name":"Autrui"},"score":0,"creation_date":1671094718,"post_id":74795448,"comment_id":132024966,"body_markdown":"I can use spring.config.import now ,but in nacos ,the configuration in different group still cant resolve , the idea console show the order-dev.yml is empty .","body":"I can use spring.config.import now ,but in nacos ,the configuration in different group still cant resolve , the idea console show the order-dev.yml is empty ."}],"owner":{"account_id":17110868,"reputation":1,"user_id":12381716,"display_name":"Autrui"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671011419,"creation_date":1671006694,"question_id":74795448,"body_markdown":"This is my Spring Cloud test project. As the java version is 1.8, I try to build the cloud project with some new version.\r\n\r\n```xml\r\n&lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    &lt;mysql.version&gt;8.0.30&lt;/mysql.version&gt;\r\n    &lt;mybatis.version&gt;3.0.0&lt;/mybatis.version&gt;\r\n    &lt;mybatis-plus.version&gt;3.5.2&lt;/mybatis-plus.version&gt;\r\n    &lt;spring-boot.version&gt;2.6.11&lt;/spring-boot.version&gt;\r\n    &lt;spring-cloud.version&gt;2021.0.4&lt;/spring-cloud.version&gt;\r\n    &lt;spring-cloud-alibaba.version&gt;2021.0.4.0&lt;/spring-cloud-alibaba.version&gt;\r\n    &lt;alibaba.nacos.version&gt;2.0.4&lt;/alibaba.nacos.version&gt;\r\n    &lt;freemarker.version&gt;2.3.31&lt;/freemarker.version&gt;\r\n    &lt;swagger.version&gt;1.6.2&lt;/swagger.version&gt;\r\n    &lt;lombok.version&gt;1.18.8&lt;/lombok.version&gt;\r\n    &lt;openfeign.version&gt;3.1.5&lt;/openfeign.version&gt;\r\n    &lt;loadbalance.version&gt;3.1.4&lt;/loadbalance.version&gt;\r\n&lt;/properties&gt;\r\n```\r\n\r\n[enter image description here](https://i.stack.imgur.com/iAJG1.png)\r\n\r\nhttps://github.com/Autrui/cloud_test\r\n\r\nThen I get the problem. In order and user module, I use bootstrap.yml to config name and nacos, it actually worked. But in gateway module, at first, I set the port 10010 in bootstrap.yml, but the gateway still runs at port 8080. The configuration in application.yml worked. \r\n\r\nThen I Google and found that Spring Boot disabled the bootstrap.yml after 2.4.0. Then I have three problems:  \r\n\r\n1.  If the bootstrap is actually be abandoned, why my order and user modules can work as usual? \r\n\r\n2. I find we can add the bootstrap dependency in pom, then bootstrap will be loaded again, but I think this is not a elegant way to program.\r\n\r\n```yaml\r\nconfig:\r\n  import:\r\n    - optional: nacos:order-dev.yaml\r\n    - nacos: order-dev.yaml\r\n```\r\n\r\nI try to  use spring.config.import, but IDEA shows Cannot resolve property &#39;optional&#39; in java.lang.String. How can I replace bootstrap in my project?\r\n\r\n3. Why Spring disabled the bootstrap? I didn&#39;t find the reason also don&#39;t know why.","title":"Why doesn&#39;t Spring Cloud use bootstrap.yml by default anymore?","body":"<p>This is my Spring Cloud test project. As the java version is 1.8, I try to build the cloud project with some new version.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;mysql.version&gt;8.0.30&lt;/mysql.version&gt;\n    &lt;mybatis.version&gt;3.0.0&lt;/mybatis.version&gt;\n    &lt;mybatis-plus.version&gt;3.5.2&lt;/mybatis-plus.version&gt;\n    &lt;spring-boot.version&gt;2.6.11&lt;/spring-boot.version&gt;\n    &lt;spring-cloud.version&gt;2021.0.4&lt;/spring-cloud.version&gt;\n    &lt;spring-cloud-alibaba.version&gt;2021.0.4.0&lt;/spring-cloud-alibaba.version&gt;\n    &lt;alibaba.nacos.version&gt;2.0.4&lt;/alibaba.nacos.version&gt;\n    &lt;freemarker.version&gt;2.3.31&lt;/freemarker.version&gt;\n    &lt;swagger.version&gt;1.6.2&lt;/swagger.version&gt;\n    &lt;lombok.version&gt;1.18.8&lt;/lombok.version&gt;\n    &lt;openfeign.version&gt;3.1.5&lt;/openfeign.version&gt;\n    &lt;loadbalance.version&gt;3.1.4&lt;/loadbalance.version&gt;\n&lt;/properties&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/iAJG1.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p><a href=\"https://github.com/Autrui/cloud_test\" rel=\"nofollow noreferrer\">https://github.com/Autrui/cloud_test</a></p>\n<p>Then I get the problem. In order and user module, I use bootstrap.yml to config name and nacos, it actually worked. But in gateway module, at first, I set the port 10010 in bootstrap.yml, but the gateway still runs at port 8080. The configuration in application.yml worked.</p>\n<p>Then I Google and found that Spring Boot disabled the bootstrap.yml after 2.4.0. Then I have three problems:</p>\n<ol>\n<li><p>If the bootstrap is actually be abandoned, why my order and user modules can work as usual?</p>\n</li>\n<li><p>I find we can add the bootstrap dependency in pom, then bootstrap will be loaded again, but I think this is not a elegant way to program.</p>\n</li>\n</ol>\n<pre class=\"lang-yaml prettyprint-override\"><code>config:\n  import:\n    - optional: nacos:order-dev.yaml\n    - nacos: order-dev.yaml\n</code></pre>\n<p>I try to  use spring.config.import, but IDEA shows Cannot resolve property 'optional' in java.lang.String. How can I replace bootstrap in my project?</p>\n<ol start=\"3\">\n<li>Why Spring disabled the bootstrap? I didn't find the reason also don't know why.</li>\n</ol>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1671010774,"post_id":74796019,"comment_id":132002765,"body_markdown":"`SecurityConfig` depends on `JwtAuthenticate` bean, which is instantiated in `SecurityConfig`","body":"<code>SecurityConfig</code> depends on <code>JwtAuthenticate</code> bean, which is instantiated in <code>SecurityConfig</code>"}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671011340,"creation_date":1671011340,"answer_id":74796308,"question_id":74796019,"body_markdown":"The field `JwtAuthenticate jwtAuthenticate` is redundant - remove it. \r\n\r\nAnd while constructing the `SecurityFilterChain` refer to the method producing `JwtAuthenticate` Bean:\r\n\r\n```\r\n.exceptionHandling().authenticationEntryPoint(jwtAuthenticationEntryPointBean())\r\n```","title":"Circular Dependency in my SecurityConfig with Spring Boot","body":"<p>The field <code>JwtAuthenticate jwtAuthenticate</code> is redundant - remove it.</p>\n<p>And while constructing the <code>SecurityFilterChain</code> refer to the method producing <code>JwtAuthenticate</code> Bean:</p>\n<pre><code>.exceptionHandling().authenticationEntryPoint(jwtAuthenticationEntryPointBean())\n</code></pre>\n"}],"owner":{"account_id":18975870,"reputation":153,"user_id":13848366,"display_name":"John Paulo A. Geronimo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":674,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74796308,"answer_count":1,"score":2,"last_activity_date":1671011340,"creation_date":1671009856,"question_id":74796019,"body_markdown":"I tried to create a simple login module with Spring Boot and Spring Boot Security.\r\n\r\nOne of the updates happens in creating SecurityConfig is some of classes like \r\n```WebSecurityConfigurerAdapter``` is now deprecated so I try the following code to make a SecurityConfig but unfortunately, I caught in a circular dependency.\r\n\r\nActually, I used Lombok to minimize the used of @Autowired in every field injection.\r\n\r\nI tried the following approach:\r\n1. I create another class for PasswordEncoder to avoid circular dependency if I used Password Encoder in the other parts of the Application.\r\n\r\n**Error Message**.\r\n```\r\n\r\nDescription:\r\n\r\nThe dependencies of some of the beans in the application context form a cycle:\r\n\r\n┌──-&gt;──┐\r\n|  securityConfig defined in file [C:\\Users\\jgeronimo\\Documents\\jp_geronimo\\sample_projects\\spring-security-tutorial\\target\\classes\\com\\workshop\\application\\config\\SecurityConfig.class]\r\n└──&lt;-──┘\r\n\r\n\r\nAction:\r\n\r\nDespite circular references being allowed, the dependency cycle between beans could not be broken. Update your application to remove the dependency cycle.\r\n\r\n```\r\n\r\n\r\n**SecurityConfig.java**\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@RequiredArgsConstructor\r\npublic class SecurityConfig {\r\n\r\n    private final JwtAuthFilter jwtAuthFilter;\r\n\r\n    private final JwtUserDetailsService userDetailsService;\r\n\r\n    private final PasswordEncoder passwordEncoder;\r\n\r\n    private final JwtAuthenticate jwtAuthenticate;\r\n\r\n    public void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n        auth.authenticationProvider(authenticationProvider());\r\n    }\r\n\r\n    @Bean\r\n    public JwtAuthenticate jwtAuthenticationEntryPointBean() throws Exception{\r\n        return new JwtAuthenticate();\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .cors().and().csrf().disable()\r\n                .authorizeHttpRequests()\r\n                .requestMatchers(&quot;/**/auth/**&quot;)\r\n                .permitAll()\r\n                .anyRequest()\r\n                .authenticated()\r\n                .and()\r\n                .exceptionHandling().authenticationEntryPoint(jwtAuthenticate).and()\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n\r\n        http.addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class);\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationProvider authenticationProvider() {\r\n        final DaoAuthenticationProvider daoAuthenticationProvider = new DaoAuthenticationProvider();\r\n        daoAuthenticationProvider.setUserDetailsService(userDetailsService);\r\n        daoAuthenticationProvider.setPasswordEncoder(passwordEncoder);\r\n        return daoAuthenticationProvider;\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationManager authenticationManager(\r\n            AuthenticationConfiguration authenticationConfiguration) throws Exception {\r\n        return authenticationConfiguration.getAuthenticationManager();\r\n    }\r\n```\r\n\r\n**Encoder.config**\r\n```\r\n@Configuration\r\npublic class EncoderConfig {\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n}\r\n```","title":"Circular Dependency in my SecurityConfig with Spring Boot","body":"<p>I tried to create a simple login module with Spring Boot and Spring Boot Security.</p>\n<p>One of the updates happens in creating SecurityConfig is some of classes like\n<code>WebSecurityConfigurerAdapter</code> is now deprecated so I try the following code to make a SecurityConfig but unfortunately, I caught in a circular dependency.</p>\n<p>Actually, I used Lombok to minimize the used of @Autowired in every field injection.</p>\n<p>I tried the following approach:</p>\n<ol>\n<li>I create another class for PasswordEncoder to avoid circular dependency if I used Password Encoder in the other parts of the Application.</li>\n</ol>\n<p><strong>Error Message</strong>.</p>\n<pre><code>\nDescription:\n\nThe dependencies of some of the beans in the application context form a cycle:\n\n┌──-&gt;──┐\n|  securityConfig defined in file [C:\\Users\\jgeronimo\\Documents\\jp_geronimo\\sample_projects\\spring-security-tutorial\\target\\classes\\com\\workshop\\application\\config\\SecurityConfig.class]\n└──&lt;-──┘\n\n\nAction:\n\nDespite circular references being allowed, the dependency cycle between beans could not be broken. Update your application to remove the dependency cycle.\n\n</code></pre>\n<p><strong>SecurityConfig.java</strong></p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@RequiredArgsConstructor\npublic class SecurityConfig {\n\n    private final JwtAuthFilter jwtAuthFilter;\n\n    private final JwtUserDetailsService userDetailsService;\n\n    private final PasswordEncoder passwordEncoder;\n\n    private final JwtAuthenticate jwtAuthenticate;\n\n    public void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.authenticationProvider(authenticationProvider());\n    }\n\n    @Bean\n    public JwtAuthenticate jwtAuthenticationEntryPointBean() throws Exception{\n        return new JwtAuthenticate();\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n                .cors().and().csrf().disable()\n                .authorizeHttpRequests()\n                .requestMatchers(&quot;/**/auth/**&quot;)\n                .permitAll()\n                .anyRequest()\n                .authenticated()\n                .and()\n                .exceptionHandling().authenticationEntryPoint(jwtAuthenticate).and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n\n        http.addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class);\n        return http.build();\n    }\n\n    @Bean\n    public AuthenticationProvider authenticationProvider() {\n        final DaoAuthenticationProvider daoAuthenticationProvider = new DaoAuthenticationProvider();\n        daoAuthenticationProvider.setUserDetailsService(userDetailsService);\n        daoAuthenticationProvider.setPasswordEncoder(passwordEncoder);\n        return daoAuthenticationProvider;\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(\n            AuthenticationConfiguration authenticationConfiguration) throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n</code></pre>\n<p><strong>Encoder.config</strong></p>\n<pre><code>@Configuration\npublic class EncoderConfig {\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n}\n</code></pre>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":16221107,"reputation":83,"user_id":11712628,"display_name":"Ashish"},"score":1,"creation_date":1671010471,"post_id":74796043,"comment_id":132002673,"body_markdown":"Check this answer https://stackoverflow.com/a/45194502/11712628","body":"Check this answer <a href=\"https://stackoverflow.com/a/45194502/11712628\">stackoverflow.com/a/45194502/11712628</a>"}],"owner":{"account_id":19001868,"reputation":11,"user_id":13869216,"display_name":"Megha Verma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1671010667,"answer_count":0,"score":0,"last_activity_date":1671011000,"creation_date":1671009950,"question_id":74796043,"body_markdown":"I am testing a REST API. During execution, I receive below stack trace\r\n\r\n```none\r\nSEVERE: StandardWrapper.Throwable\r\njava.lang.NoSuchMethodError: javax.ws.rs.core.Application.getProperties()Ljava/util/Map;\r\n        at org.glassfish.jersey.server.ApplicationHandler.&lt;init&gt;(ApplicationHandler.java:331)\r\n        at org.glassfish.jersey.servlet.WebComponent.&lt;init&gt;(WebComponent.java:392)\r\n        at org.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:177)\r\n        at org.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:369)\r\n        at javax.servlet.GenericServlet.init(Unknown Source)\r\n        at org.apache.catalina.core.StandardWrapper.initServlet(Unknown Source)\r\n        at org.apache.catalina.core.StandardWrapper.loadServlet(Unknown Source)\r\n        at org.apache.catalina.core.StandardWrapper.allocate(Unknown Source)\r\n        at org.apache.catalina.core.StandardWrapperValve.invoke(Unknown Source)\r\n        at org.apache.catalina.core.StandardContextValve.invoke(Unknown Source)\r\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(Unknown Source)\r\n        at org.apache.catalina.core.StandardHostValve.invoke(Unknown Source)\r\n        at org.apache.catalina.valves.ErrorReportValve.invoke(Unknown Source)\r\n        at org.apache.catalina.valves.AccessLogValve.invoke(Unknown Source)\r\n        at org.apache.catalina.core.StandardEngineValve.invoke(Unknown Source)\r\n        at org.apache.catalina.connector.CoyoteAdapter.service(Unknown Source)\r\n        at org.apache.coyote.http11.AbstractHttp11Processor.process(Unknown Source)\r\n        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(Unknown Source)\r\n        at org.apache.tomcat.util.net.AprEndpoint$SocketWithOptionsProcessor.run(Unknown Source)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(Unknown Source)\r\n        at java.lang.Thread.run(Thread.java:744)\r\n```\r\n\r\nI am using javax.ws.rs-api-2.0.1.jar which contains below method but still it giving me above error\r\n\r\n```\r\npublic Map&lt;String, Object&gt; getProperties() {\r\n    return Collections.emptyMap();\r\n}\r\n```\r\n\r\n[Screenshot of uncompiled class file](https://i.stack.imgur.com/FNumZ.png)","title":"Getting NoSuchMethodError from api developed using Maven","body":"<p>I am testing a REST API. During execution, I receive below stack trace</p>\n<pre class=\"lang-none prettyprint-override\"><code>SEVERE: StandardWrapper.Throwable\njava.lang.NoSuchMethodError: javax.ws.rs.core.Application.getProperties()Ljava/util/Map;\n        at org.glassfish.jersey.server.ApplicationHandler.&lt;init&gt;(ApplicationHandler.java:331)\n        at org.glassfish.jersey.servlet.WebComponent.&lt;init&gt;(WebComponent.java:392)\n        at org.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:177)\n        at org.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:369)\n        at javax.servlet.GenericServlet.init(Unknown Source)\n        at org.apache.catalina.core.StandardWrapper.initServlet(Unknown Source)\n        at org.apache.catalina.core.StandardWrapper.loadServlet(Unknown Source)\n        at org.apache.catalina.core.StandardWrapper.allocate(Unknown Source)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(Unknown Source)\n        at org.apache.catalina.core.StandardContextValve.invoke(Unknown Source)\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(Unknown Source)\n        at org.apache.catalina.core.StandardHostValve.invoke(Unknown Source)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(Unknown Source)\n        at org.apache.catalina.valves.AccessLogValve.invoke(Unknown Source)\n        at org.apache.catalina.core.StandardEngineValve.invoke(Unknown Source)\n        at org.apache.catalina.connector.CoyoteAdapter.service(Unknown Source)\n        at org.apache.coyote.http11.AbstractHttp11Processor.process(Unknown Source)\n        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(Unknown Source)\n        at org.apache.tomcat.util.net.AprEndpoint$SocketWithOptionsProcessor.run(Unknown Source)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(Unknown Source)\n        at java.lang.Thread.run(Thread.java:744)\n</code></pre>\n<p>I am using javax.ws.rs-api-2.0.1.jar which contains below method but still it giving me above error</p>\n<pre><code>public Map&lt;String, Object&gt; getProperties() {\n    return Collections.emptyMap();\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/FNumZ.png\" rel=\"nofollow noreferrer\">Screenshot of uncompiled class file</a></p>\n"},{"tags":["java","windows-installer","jpackage"],"answers":[{"tags":[],"owner":{"account_id":26571685,"reputation":11,"user_id":20197816,"display_name":"Rafael"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670954829,"creation_date":1670954829,"answer_id":74789202,"question_id":74788949,"body_markdown":"--win-dir-chooser solves this problem.\r\n","title":"How to define path where generated output file is placed using jpackage (windows)","body":"<p>--win-dir-chooser solves this problem.</p>\n"}],"owner":{"account_id":26571685,"reputation":11,"user_id":20197816,"display_name":"Rafael"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671010539,"creation_date":1670953605,"question_id":74788949,"body_markdown":"Im trying to create an installer for my java app using jpackage.\r\nThis is what I have right now:\r\n`jpackage --type msi --app-version &quot;2.0&quot; --input . --dest . --main-jar .\\FitnessGUI.jar --main-class Main --win-shortcut --win-menu `\r\nThis works fine, but I want to be able to choose where the program will be stored when installed.\r\nWhat I have, according to [oracle](https://docs.oracle.com/en/java/javase/14/docs/specs/man/jpackage.html), defaults to the current working directory.\r\nIm not sure what this means.\r\nI have no idea where the app will be outputed on another person&#39;s computer.\r\n\r\n\r\n\r\n\r\nI tried to use `--dest &quot;C:\\ &quot;`, but i get:\r\n`Destination directory C:\\ is not writable`\r\nAlso tried `--dest &quot;C:\\Program Files&quot;`, but get the same error.","title":"How to define path where generated output file is placed using jpackage (windows)","body":"<p>Im trying to create an installer for my java app using jpackage.\nThis is what I have right now:\n<code>jpackage --type msi --app-version &quot;2.0&quot; --input . --dest . --main-jar .\\FitnessGUI.jar --main-class Main --win-shortcut --win-menu </code>\nThis works fine, but I want to be able to choose where the program will be stored when installed.\nWhat I have, according to <a href=\"https://docs.oracle.com/en/java/javase/14/docs/specs/man/jpackage.html\" rel=\"nofollow noreferrer\">oracle</a>, defaults to the current working directory.\nIm not sure what this means.\nI have no idea where the app will be outputed on another person's computer.</p>\n<p>I tried to use <code>--dest &quot;C:\\ &quot;</code>, but i get:\n<code>Destination directory C:\\ is not writable</code>\nAlso tried <code>--dest &quot;C:\\Program Files&quot;</code>, but get the same error.</p>\n"},{"tags":["java","spring-security","thymeleaf","spring-3"],"comments":[{"owner":{"account_id":1133647,"reputation":2061,"user_id":1119161,"accept_rate":31,"display_name":"dsp_user"},"score":0,"creation_date":1670933473,"post_id":74783754,"comment_id":131983153,"body_markdown":"is that a Maven project? If so, do you have &lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt; in your pom?","body":"is that a Maven project? If so, do you have &lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt; in your pom?"},{"owner":{"account_id":27226326,"reputation":43,"user_id":20754780,"display_name":"tsavaph"},"score":0,"creation_date":1670934830,"post_id":74783754,"comment_id":131983670,"body_markdown":"@dsp_user, Thank you, but I tried to add it and for some reason maven cannot find the dependency","body":"@dsp_user, Thank you, but I tried to add it and for some reason maven cannot find the dependency"},{"owner":{"account_id":1133647,"reputation":2061,"user_id":1119161,"accept_rate":31,"display_name":"dsp_user"},"score":0,"creation_date":1670934973,"post_id":74783754,"comment_id":131983729,"body_markdown":"that&#39;s another problem, and you can post a separate question for that. Still, I think you need that dependency.","body":"that&#39;s another problem, and you can post a separate question for that. Still, I think you need that dependency."}],"answers":[{"tags":[],"owner":{"account_id":27226326,"reputation":43,"user_id":20754780,"display_name":"tsavaph"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671010045,"creation_date":1671010045,"answer_id":74796065,"question_id":74783754,"body_markdown":"Thanks to [@dsp_user][1].\r\nProblem solved by adding `thymeleaf-extras-springsecurity5` dependency\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/1119161/dsp-user","title":"Unexpected error (type=Forbidden, status=403) using csrf with Spring Security v3.0.0 and Thymeleaf","body":"<p>Thanks to <a href=\"https://stackoverflow.com/users/1119161/dsp-user\">@dsp_user</a>.\nProblem solved by adding <code>thymeleaf-extras-springsecurity5</code> dependency</p>\n"}],"owner":{"account_id":27226326,"reputation":43,"user_id":20754780,"display_name":"tsavaph"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":207,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74796065,"answer_count":1,"score":0,"last_activity_date":1671010045,"creation_date":1670929113,"question_id":74783754,"body_markdown":"I try to configure security of my application but I get &quot;Unexpected error (type=Forbidden, status=403)&quot; and I don&#39;t know what is the problem. I register a user then login, do some stuff on a &quot;/design&quot; page, press submit and get the Error. As I know (from Spring in Action book) Thymeleaf automatically include hidden field with CSRF token for each html page.\r\n\r\nWhen I disable csrf in SecurityFilterChain my web application works fine. My SecurityConfig class is shown below: I only exclude H2Console path.\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig {\r\n\r\n    private UserRepository userRepository;\r\n\r\n\r\n    @Bean\r\n    public UserDetailsService userDetailsService(UserRepository userRepo) {\r\n        return username -&gt; {\r\n            User user = userRepo.findByUsername(username);\r\n\r\n            if(user != null) {\r\n                return user;\r\n            }\r\n          throw new UsernameNotFoundException(&quot;User \\&quot;&quot; + username + &quot;\\&quot; not found&quot;);\r\n        };\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder encoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .csrf().ignoringRequestMatchers(PathRequest.toH2Console())\r\n                .and()\r\n                .headers((headers) -&gt; headers.frameOptions().sameOrigin())\r\n                .authorizeHttpRequests()\r\n                .requestMatchers(&quot;/design&quot;,&quot;/orders&quot;).hasRole(&quot;USER&quot;)\r\n                .requestMatchers(&quot;/&quot;, &quot;/**&quot;).permitAll()\r\n                .and()\r\n                .formLogin(\r\n                        form -&gt; form\r\n                                .loginPage(&quot;/login&quot;)\r\n                                .loginProcessingUrl(&quot;/login&quot;)\r\n                                .defaultSuccessUrl(&quot;/design&quot;)\r\n                                .permitAll()\r\n                ).logout(\r\n                        logout -&gt; logout\r\n                                .logoutRequestMatcher(new AntPathRequestMatcher(&quot;/logout&quot;))\r\n                                .permitAll()\r\n                );\r\n        return http.build();\r\n    }\r\n}\r\n```","title":"Unexpected error (type=Forbidden, status=403) using csrf with Spring Security v3.0.0 and Thymeleaf","body":"<p>I try to configure security of my application but I get &quot;Unexpected error (type=Forbidden, status=403)&quot; and I don't know what is the problem. I register a user then login, do some stuff on a &quot;/design&quot; page, press submit and get the Error. As I know (from Spring in Action book) Thymeleaf automatically include hidden field with CSRF token for each html page.</p>\n<p>When I disable csrf in SecurityFilterChain my web application works fine. My SecurityConfig class is shown below: I only exclude H2Console path.</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n\n    private UserRepository userRepository;\n\n\n    @Bean\n    public UserDetailsService userDetailsService(UserRepository userRepo) {\n        return username -&gt; {\n            User user = userRepo.findByUsername(username);\n\n            if(user != null) {\n                return user;\n            }\n          throw new UsernameNotFoundException(&quot;User \\&quot;&quot; + username + &quot;\\&quot; not found&quot;);\n        };\n    }\n\n    @Bean\n    public PasswordEncoder encoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n                .csrf().ignoringRequestMatchers(PathRequest.toH2Console())\n                .and()\n                .headers((headers) -&gt; headers.frameOptions().sameOrigin())\n                .authorizeHttpRequests()\n                .requestMatchers(&quot;/design&quot;,&quot;/orders&quot;).hasRole(&quot;USER&quot;)\n                .requestMatchers(&quot;/&quot;, &quot;/**&quot;).permitAll()\n                .and()\n                .formLogin(\n                        form -&gt; form\n                                .loginPage(&quot;/login&quot;)\n                                .loginProcessingUrl(&quot;/login&quot;)\n                                .defaultSuccessUrl(&quot;/design&quot;)\n                                .permitAll()\n                ).logout(\n                        logout -&gt; logout\n                                .logoutRequestMatcher(new AntPathRequestMatcher(&quot;/logout&quot;))\n                                .permitAll()\n                );\n        return http.build();\n    }\n}\n</code></pre>\n"},{"tags":["java","jpa","entitymanager","persistence-unit","entitymanagerfactory"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1670507429,"post_id":74262360,"comment_id":131894424,"body_markdown":"This would rather sound like you want a [`RoutingDataSource`](https://www.baeldung.com/spring-abstract-routing-data-source). Or different profiles that you load depending on who uses the application","body":"This would rather sound like you want a <a href=\"https://www.baeldung.com/spring-abstract-routing-data-source\" rel=\"nofollow noreferrer\"><code>RoutingDataSource</code></a>. Or different profiles that you load depending on who uses the application"}],"answers":[{"tags":[],"owner":{"account_id":27200560,"reputation":86,"user_id":20732854,"display_name":"user20732854"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1670681845,"creation_date":1670681845,"answer_id":74753697,"question_id":74262360,"body_markdown":"You could achieve multitenancy by using [Hibernate&#39;s Mulit tenant facilities][1] by implementing a `MultitenantConnectionProvider` and a `CurrentTenantIdentifierResolver` that would need to have access to your Session / Transaction Context.\r\nHere&#39;s a tutorial on [Baeldung][2].\r\n\r\n\r\nDisclaimer: I&#39;m not familiar with Wildfly, so maybe there&#39;s a native way to do it, similar to Springs RoutingDataSource (refer to XtremerBaumers comment in your question)\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/core/4.3/devguide/en-US/html/ch16.html\r\n  [2]: https://www.baeldung.com/hibernate-5-multitenancy","title":"How to use same Persistence Unit to access different datasources with the same entities using EntityManager and EntityManagerFactory","body":"<p>You could achieve multitenancy by using <a href=\"https://docs.jboss.org/hibernate/core/4.3/devguide/en-US/html/ch16.html\" rel=\"nofollow noreferrer\">Hibernate's Mulit tenant facilities</a> by implementing a <code>MultitenantConnectionProvider</code> and a <code>CurrentTenantIdentifierResolver</code> that would need to have access to your Session / Transaction Context.\nHere's a tutorial on <a href=\"https://www.baeldung.com/hibernate-5-multitenancy\" rel=\"nofollow noreferrer\">Baeldung</a>.</p>\n<p>Disclaimer: I'm not familiar with Wildfly, so maybe there's a native way to do it, similar to Springs RoutingDataSource (refer to XtremerBaumers comment in your question)</p>\n"}],"owner":{"account_id":1085509,"reputation":1381,"user_id":1081313,"accept_rate":60,"display_name":"Faliorn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74753697,"answer_count":1,"score":0,"last_activity_date":1671010034,"creation_date":1667214497,"question_id":74262360,"body_markdown":"I&#39;m currently working with Java 17, Wildfly 25.0.1 and JPA over Hibernate 5.3.\r\n\r\nI have an application that uses annotations and entities mapped to access a single database. I&#39;m using a PersistenceUnit with a Datasource, and it works fine.\r\n\r\nWhat I&#39;m trying to achieve is programatically choosing different datasources, with the same PersistenceUnit, to access different copies of the same database for different customers. The number of customers can grow, so I cannot use multiple PU&#39;s.\r\n\r\nSo far, I&#39;ve worked with an injected EntityManager such as this:\r\n\r\n    @PersistenceContext(unitName = PERSISTENCE_UNIT)\r\n    protected EntityManager     em;\r\n\r\nI went in the direction of creating my own instances of EntityManager, so I tried injecting the EntityManagerFactory instead of the EntityManager itself:\r\n\r\n    @PersistenceUnit(unitName = PERSISTENCE_UNIT)\r\n    EntityManagerFactory        emf;\r\n\r\nThe originally injected EntityManager, when inspected, belongs to the class org.jboss.as.jpa.container.TransactionScopedEntityManager. \r\nHowever, when I create an EntityManager using the injected EntityManagerFactory, I receive an org.hibernate.internal.SessionImpl instead.\r\n\r\nThe point is that, though many things work fine, the behaviour in the application is somewhat different. It&#39;s a very big application with a lot of transactions, and sometimes data is not correct, etc.\r\n\r\nIs there any way to create or ask the server for a TransactionScopedEntityManager? I&#39;ve searched through Wildfly source code, but I can&#39;t find it.\r\n\r\nAlso, any other approach to achieve this goal would be appreciated.\r\n\r\nThanks and kind regards.\r\n\r\n","title":"How to use same Persistence Unit to access different datasources with the same entities using EntityManager and EntityManagerFactory","body":"<p>I'm currently working with Java 17, Wildfly 25.0.1 and JPA over Hibernate 5.3.</p>\n<p>I have an application that uses annotations and entities mapped to access a single database. I'm using a PersistenceUnit with a Datasource, and it works fine.</p>\n<p>What I'm trying to achieve is programatically choosing different datasources, with the same PersistenceUnit, to access different copies of the same database for different customers. The number of customers can grow, so I cannot use multiple PU's.</p>\n<p>So far, I've worked with an injected EntityManager such as this:</p>\n<pre><code>@PersistenceContext(unitName = PERSISTENCE_UNIT)\nprotected EntityManager     em;\n</code></pre>\n<p>I went in the direction of creating my own instances of EntityManager, so I tried injecting the EntityManagerFactory instead of the EntityManager itself:</p>\n<pre><code>@PersistenceUnit(unitName = PERSISTENCE_UNIT)\nEntityManagerFactory        emf;\n</code></pre>\n<p>The originally injected EntityManager, when inspected, belongs to the class org.jboss.as.jpa.container.TransactionScopedEntityManager.\nHowever, when I create an EntityManager using the injected EntityManagerFactory, I receive an org.hibernate.internal.SessionImpl instead.</p>\n<p>The point is that, though many things work fine, the behaviour in the application is somewhat different. It's a very big application with a lot of transactions, and sometimes data is not correct, etc.</p>\n<p>Is there any way to create or ask the server for a TransactionScopedEntityManager? I've searched through Wildfly source code, but I can't find it.</p>\n<p>Also, any other approach to achieve this goal would be appreciated.</p>\n<p>Thanks and kind regards.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9183,"page":809,"page_size":100}
