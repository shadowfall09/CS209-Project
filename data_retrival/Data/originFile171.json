{"items":[{"tags":["java","android-studio"],"answers":[{"tags":[],"owner":{"account_id":22194785,"reputation":500,"user_id":16436336,"display_name":"BobTheCat"},"down_vote_count":0,"up_vote_count":47,"is_accepted":false,"score":47,"last_activity_date":1649903934,"creation_date":1626149113,"answer_id":68356338,"question_id":67948855,"body_markdown":"in build.gradle(Project Level) try upgrade google-services in dependencies\r\n\r\n&#39;com.google.gms:google-services:4.3.8&#39;\r\n\r\nthis upgrade as mentioned in here [Firebase][1]\r\n\r\n[![google-services plugin 4.3.8][2]][2]\r\n\r\n\r\n  [1]: https://firebase.google.com/support/release-notes/android#2021-05-14\r\n  [2]: https://i.stack.imgur.com/jhS9F.png","title":"Some problems were found with the configuration of task &#39;:app:processDebugGoogleServices&#39; (type &#39;GoogleServicesTask&#39;)","body":"<p>in build.gradle(Project Level) try upgrade google-services in dependencies</p>\n<p>'com.google.gms:google-services:4.3.8'</p>\n<p>this upgrade as mentioned in here <a href=\"https://firebase.google.com/support/release-notes/android#2021-05-14\" rel=\"noreferrer\">Firebase</a></p>\n<p><a href=\"https://i.stack.imgur.com/jhS9F.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/jhS9F.png\" alt=\"google-services plugin 4.3.8\" /></a></p>\n"},{"tags":[],"owner":{"account_id":22968379,"reputation":51,"user_id":17097138,"display_name":"Danson Official"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1695275976,"creation_date":1695275976,"answer_id":77147525,"question_id":67948855,"body_markdown":"Just upgrade to the latest version of ***com.google.gms:google-services***\r\nin the **build.gradle(project..)** file.\r\n\r\nIf its not available then add the dependency\r\n[![enter image description here][1]][1]\r\n\r\nThis worked for me and you can find the latest version of ***com.google.gms:google-services*** [here][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/npnat.png\r\n  [2]: https://mvnrepository.com/artifact/com.google.gms/google-services?repo=google","title":"Some problems were found with the configuration of task &#39;:app:processDebugGoogleServices&#39; (type &#39;GoogleServicesTask&#39;)","body":"<p>Just upgrade to the latest version of <em><strong>com.google.gms:google-services</strong></em>\nin the <strong>build.gradle(project..)</strong> file.</p>\n<p>If its not available then add the dependency\n<a href=\"https://i.stack.imgur.com/npnat.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/npnat.png\" alt=\"enter image description here\" /></a></p>\n<p>This worked for me and you can find the latest version of <em><strong>com.google.gms:google-services</strong></em> <a href=\"https://mvnrepository.com/artifact/com.google.gms/google-services?repo=google\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":21923835,"reputation":201,"user_id":16206738,"display_name":"BenKratos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25326,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"answer_count":2,"score":20,"last_activity_date":1695275976,"creation_date":1623500952,"question_id":67948855,"body_markdown":"I&#39;m pretty new to android studio and I am doing my project and I am stuck because of this error and cant find a solution anywhere\r\n\r\n&gt; Some problems were found with the configuration of task &#39;:app:processDebugGoogleServices&#39; (type &#39;GoogleServicesTask&#39;).\r\n  - Type &#39;com.google.gms.googleservices.GoogleServicesTask&#39; field &#39;intermediateDir&#39; without corresponding getter has been annotated with @OutputDirectory.","title":"Some problems were found with the configuration of task &#39;:app:processDebugGoogleServices&#39; (type &#39;GoogleServicesTask&#39;)","body":"<p>I'm pretty new to android studio and I am doing my project and I am stuck because of this error and cant find a solution anywhere</p>\n<blockquote>\n<p>Some problems were found with the configuration of task ':app:processDebugGoogleServices' (type 'GoogleServicesTask').</p>\n</blockquote>\n<ul>\n<li>Type 'com.google.gms.googleservices.GoogleServicesTask' field 'intermediateDir' without corresponding getter has been annotated with @OutputDirectory.</li>\n</ul>\n"},{"tags":["java","multithreading","vector"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":3,"creation_date":1695274226,"post_id":77147394,"comment_id":136002956,"body_markdown":"and why on earth would you want to use a vector, a class that is so obsolete?","body":"and why on earth would you want to use a vector, a class that is so obsolete?"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":2,"creation_date":1695274302,"post_id":77147394,"comment_id":136002974,"body_markdown":"Please read [ask] and provide a [mcve]. Go ahead and code something, once you have a problem come back here and ask it then.","body":"Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Go ahead and code something, once you have a problem come back here and ask it then."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1695274782,"post_id":77147394,"comment_id":136003031,"body_markdown":"I tried to clean up your code formatting, but it needs more work. Take more care when posting here.","body":"I tried to clean up your code formatting, but it needs more work. Take more care when posting here."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1695275960,"creation_date":1695274395,"answer_id":77147416,"question_id":77147394,"body_markdown":"[`Vector`][1] is a [legacy][2] class, as noted in its Javadoc, invented before the [Java Collections Framework][3]. Instead use a [`SequencedCollection`][4] implementation, such as [`ArrayList`][5] or [`TreeSet`][6]. \r\n\r\nBut for your purpose, use something else. Use an [executor service][7] to manage threads on your behalf.\r\n\r\n&gt; check how many active threads\r\n\r\nYour desired work to be done (tasks) drives the use of threads, not the other way around.\r\n\r\nDefine your tasks as a `Runnable` or `Callable` object. Then submit to an executor service for execution on a background thread. \r\n\r\nIf you want to query your database repeatedly, use a [scheduled executor service][8] to repeat a `Runnable`/`Callable` task. Within that task, query the database. If you find records in the database that need to be processed, instantiate `Runnable`/`Callable` objects for that purpose, and submit to another executor service. In Java 21+, assuming your tasks are not entirely [CPU-bound][9], generally best to use an [executor service backed by virtual threads][10]. \r\n\r\n&gt; assign them to process data from database concurrently\r\n\r\nJust establish an executor service instance, submit one or more tasks (`Runnable`/`Callable` objects), and then automatically close the executor service with try-with-resources syntax. This has been shown [several times already][11] on Stack Overflow.\r\n\r\n----------\r\n\r\n\r\nBy the way, `Class.forName` has not been needed for many years now. In modern Java, all the JDBC drivers are automatically loaded by the [Java Service Provider Interface (SPI)][12]. \r\n\r\nTip: Learn to set up your database connection info (username, password, etc.) within an object implementing the [`DataSource`][13] interface.\r\n\r\nOverall, it sounds like you are working off an ancient tutorial. Find more recent materials to study. Also, you can find many existing Questions and Answers on all these topics mentioned here.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Vector.html\r\n  [2]: https://en.wikipedia.org/wiki/Legacy_system\r\n  [3]: https://en.wikipedia.org/wiki/Java_collections_framework\r\n  [4]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html\r\n  [5]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/ArrayList.html\r\n  [6]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/TreeSet.html\r\n  [7]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ExecutorService.html\r\n  [8]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ScheduledExecutorService.html\r\n  [9]: https://en.wikipedia.org/wiki/CPU-bound\r\n  [10]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Executors.html#newVirtualThreadPerTaskExecutor()\r\n  [11]: https://www.ecosia.org/search?q=site%3Astackoverflow.com%20ExecutorService%20try-with-resources%20syntax&amp;tts=st_asaf_macos\r\n  [12]: https://en.wikipedia.org/wiki/Service_provider_interface\r\n  [13]: https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/javax/sql/DataSource.html","title":"Can I create a vector of threads and use to process data concurrently from database table in Java?","body":"<p><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Vector.html\" rel=\"nofollow noreferrer\"><code>Vector</code></a> is a <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"nofollow noreferrer\">legacy</a> class, as noted in its Javadoc, invented before the <a href=\"https://en.wikipedia.org/wiki/Java_collections_framework\" rel=\"nofollow noreferrer\">Java Collections Framework</a>. Instead use a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html\" rel=\"nofollow noreferrer\"><code>SequencedCollection</code></a> implementation, such as <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/ArrayList.html\" rel=\"nofollow noreferrer\"><code>ArrayList</code></a> or <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/TreeSet.html\" rel=\"nofollow noreferrer\"><code>TreeSet</code></a>.</p>\n<p>But for your purpose, use something else. Use an <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ExecutorService.html\" rel=\"nofollow noreferrer\">executor service</a> to manage threads on your behalf.</p>\n<blockquote>\n<p>check how many active threads</p>\n</blockquote>\n<p>Your desired work to be done (tasks) drives the use of threads, not the other way around.</p>\n<p>Define your tasks as a <code>Runnable</code> or <code>Callable</code> object. Then submit to an executor service for execution on a background thread.</p>\n<p>If you want to query your database repeatedly, use a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ScheduledExecutorService.html\" rel=\"nofollow noreferrer\">scheduled executor service</a> to repeat a <code>Runnable</code>/<code>Callable</code> task. Within that task, query the database. If you find records in the database that need to be processed, instantiate <code>Runnable</code>/<code>Callable</code> objects for that purpose, and submit to another executor service. In Java 21+, assuming your tasks are not entirely <a href=\"https://en.wikipedia.org/wiki/CPU-bound\" rel=\"nofollow noreferrer\">CPU-bound</a>, generally best to use an <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Executors.html#newVirtualThreadPerTaskExecutor()\" rel=\"nofollow noreferrer\">executor service backed by virtual threads</a>.</p>\n<blockquote>\n<p>assign them to process data from database concurrently</p>\n</blockquote>\n<p>Just establish an executor service instance, submit one or more tasks (<code>Runnable</code>/<code>Callable</code> objects), and then automatically close the executor service with try-with-resources syntax. This has been shown <a href=\"https://www.ecosia.org/search?q=site%3Astackoverflow.com%20ExecutorService%20try-with-resources%20syntax&amp;tts=st_asaf_macos\" rel=\"nofollow noreferrer\">several times already</a> on Stack Overflow.</p>\n<hr />\n<p>By the way, <code>Class.forName</code> has not been needed for many years now. In modern Java, all the JDBC drivers are automatically loaded by the <a href=\"https://en.wikipedia.org/wiki/Service_provider_interface\" rel=\"nofollow noreferrer\">Java Service Provider Interface (SPI)</a>.</p>\n<p>Tip: Learn to set up your database connection info (username, password, etc.) within an object implementing the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/javax/sql/DataSource.html\" rel=\"nofollow noreferrer\"><code>DataSource</code></a> interface.</p>\n<p>Overall, it sounds like you are working off an ancient tutorial. Find more recent materials to study. Also, you can find many existing Questions and Answers on all these topics mentioned here.</p>\n"}],"owner":{"account_id":13212739,"reputation":1,"user_id":19965154,"display_name":"Polash"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"answer_count":1,"score":-4,"last_activity_date":1695275960,"creation_date":1695274019,"question_id":77147394,"body_markdown":"`Can I create a vector of threads in java \r\nVector&lt;Thread&gt; threads = new Vector&lt;&gt;(5);\r\n\r\nAnd assign them to process data from database concurrently \r\n\r\nI want to make a Java program where main method first check how many active threads are there in the vector and pull that amount of data from the database and process those data and then main thread will go to sleep for 10 seconds \r\nAfter waking up from the sleep the main thread will how many threads are free at this moment Let&#39;s say there are 3 threads are free at this moment so the main thread will pull next 3 data from the database \r\n\r\nCan someone please help me to build the logic and design to implement this in java \r\nIt would be a great help `\r\n\r\n```java\r\nClass.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n                        Connection connection = DriverManager.getConnection(DB_URL, DB_USER, DB_PASSWORD);\r\n\r\n                        String selectQuery = &quot;SELECT dataName, dataItem FROM thread&quot;;\r\n  PreparedStatement preparedStatement = connection.prepareStatement(selectQuery);                              \r\n                        ResultSet rs = preparedStatement.executeQuery();\r\n\r\n                        while (rs.next()) {\r\n                            String dataName = rs.getString(&quot;dataName&quot;);\r\n                            String dataItem = rs.getString(&quot;dataItem&quot;);\r\n                            for (DataProcessingThread thread : threadVector) {\r\n                                if (!thread.isProcessing()) {\r\n                                    thread.setData(dataName, dataItem);\r\n                                    break;\r\n                                }\r\n                            }`\r\nThis is database connection \r\n```","title":"Can I create a vector of threads and use to process data concurrently from database table in Java?","body":"<p>`Can I create a vector of threads in java\nVector threads = new Vector&lt;&gt;(5);</p>\n<p>And assign them to process data from database concurrently</p>\n<p>I want to make a Java program where main method first check how many active threads are there in the vector and pull that amount of data from the database and process those data and then main thread will go to sleep for 10 seconds\nAfter waking up from the sleep the main thread will how many threads are free at this moment Let's say there are 3 threads are free at this moment so the main thread will pull next 3 data from the database</p>\n<p>Can someone please help me to build the logic and design to implement this in java\nIt would be a great help `</p>\n<pre class=\"lang-java prettyprint-override\"><code>Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n                        Connection connection = DriverManager.getConnection(DB_URL, DB_USER, DB_PASSWORD);\n\n                        String selectQuery = &quot;SELECT dataName, dataItem FROM thread&quot;;\n  PreparedStatement preparedStatement = connection.prepareStatement(selectQuery);                              \n                        ResultSet rs = preparedStatement.executeQuery();\n\n                        while (rs.next()) {\n                            String dataName = rs.getString(&quot;dataName&quot;);\n                            String dataItem = rs.getString(&quot;dataItem&quot;);\n                            for (DataProcessingThread thread : threadVector) {\n                                if (!thread.isProcessing()) {\n                                    thread.setData(dataName, dataItem);\n                                    break;\n                                }\n                            }`\nThis is database connection \n</code></pre>\n"},{"tags":["java","windows","eclipse","ssl","certificate"],"comments":[{"owner":{"account_id":3158999,"reputation":845,"user_id":2670685,"accept_rate":14,"display_name":"V P"},"score":0,"creation_date":1604249606,"post_id":61011392,"comment_id":114283304,"body_markdown":"I also have same problem (in my case OpenJDK 11 on NetBSD 9.1)","body":"I also have same problem (in my case OpenJDK 11 on NetBSD 9.1)"},{"owner":{"account_id":1487767,"reputation":3165,"user_id":1395620,"display_name":"Daniel Santos"},"score":0,"creation_date":1675456096,"post_id":61011392,"comment_id":132940555,"body_markdown":"Same on Gentoo, OpenJDK 11.0.18. I saw somewhere it&#39;s a damned key that isn&#39;t installed. If I confirm and fix it, I&#39;ll post an answer.","body":"Same on Gentoo, OpenJDK 11.0.18. I saw somewhere it&#39;s a damned key that isn&#39;t installed. If I confirm and fix it, I&#39;ll post an answer."}],"answers":[{"tags":[],"owner":{"account_id":1487767,"reputation":3165,"user_id":1395620,"display_name":"Daniel Santos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695273022,"creation_date":1695270313,"answer_id":77147199,"question_id":61011392,"body_markdown":"### UPDATE!\r\nAll of my JDKs and JREs have bad symlinks to `/etc/ssl/certs/java/cacerts` and this appears to be the root cause. On my system, JDKs are installed into `/usr/opt` but the installer fatally expected to be able to access the symlink via a bad relative path:\r\n\r\n```\r\n# ll /usr/opt/openjdk-*/lib/security/cacerts\r\nlrwxrwxrwx 1 root root 27 Sep 20 23:48 /usr/opt/openjdk-bin-11.0.18_p10/lib/security/cacerts -&gt; /etc/ssl/certs/java/cacerts\r\nlrwxrwxrwx 1 root root 27 Sep 20 23:48 /usr/opt/openjdk-bin-11/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\r\nlrwxrwxrwx 1 root root 38 Mar  8  2023 /usr/opt/openjdk-bin-17.0.6_p10/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\r\nlrwxrwxrwx 1 root root 38 Mar  8  2023 /usr/opt/openjdk-bin-17/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\r\nlrwxrwxrwx 1 root root 38 Mar  6  2023 /usr/opt/openjdk-jre-bin-11.0.12_p7/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\r\nlrwxrwxrwx 1 root root 38 Mar  6  2023 /usr/opt/openjdk-jre-bin-11/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\r\nlrwxrwxrwx 1 root root 38 Mar  6  2023 /usr/opt/openjdk-jre-bin-8.362_p09/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\r\nlrwxrwxrwx 1 root root 38 Mar  6  2023 /usr/opt/openjdk-jre-bin-8/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\r\n```\r\n\r\nBut you&#39;ll need to figure out where your JVMs are installed. On my Debian laptop they are in `/usr/lib/jvm`.\r\n\r\nSo to fix this without having to reinstall, I would suggest the following.\r\n\r\n 1. Make sure this is really the cause first. Do a long listing and make sure you&#39;re seeing broken symlinks. (if you have `alias ls=&#39;ls --color=auto&#39;` they will be annoyingly blinking red)\r\n```\r\nls -alF /usr/opt/openjdk-*/lib/security/cacerts\r\n# or\r\nls -alF /usr/lib/jvm/*/lib/security/cacerts\r\n```\r\n\r\nIf you see those tags blinking until the end of days, then you can first test this as a normal user (you should get permission denied) and then run it as root. Change the path and pattern to what matches on your system\r\n\r\n```sh\r\nfor f in $(ls /usr/opt/openjdk-*/lib/security/cacerts); do\r\n    [[ -e $f ]] || ln -sf /etc/ssl/certs/java/cacerts $f;\r\ndone\r\n```\r\n\r\n### ORIGINAL ANSWER\r\n\r\nI&#39;m running Gentoo Linux and I finally solved this by... wait for it... reinstalling `dev-java/icedtea`! I feel like it&#39;s a super-lame answer, but it&#39;s the *only* thing that worked. A lot of people have had this problem and I hope this helps somebody. I recall reading a bug report a few years ago in OpenJDK or icedtea project about this, but I haven&#39;t been able to track that down again. I presume reinstalling worked because I somehow had the old jars with the bug and the new version has the fix, but I can&#39;t be 100% certain.\r\n\r\nSpecifically, I ran:\r\n```sh\r\nsudo emerge -1v dev-java/icedtea\r\neselect java-vm set user icedtea-8\r\nANDROID_HOME=/home/daniel/.android-sdk-update-manager /home/daniel/.android-sdk-update-manager/tools/bin/sdkmanager --list\r\n```\r\n\r\nIf you are using Ubuntu, Debian, etc. I presume you&#39;ll want to `apt install --reinstall openjdk-8-jre` or whatever your Java 8 package is called.","title":"Java: the trustAnchors parameter must be non-empty (openjdk)","body":"<h3>UPDATE!</h3>\n<p>All of my JDKs and JREs have bad symlinks to <code>/etc/ssl/certs/java/cacerts</code> and this appears to be the root cause. On my system, JDKs are installed into <code>/usr/opt</code> but the installer fatally expected to be able to access the symlink via a bad relative path:</p>\n<pre><code># ll /usr/opt/openjdk-*/lib/security/cacerts\nlrwxrwxrwx 1 root root 27 Sep 20 23:48 /usr/opt/openjdk-bin-11.0.18_p10/lib/security/cacerts -&gt; /etc/ssl/certs/java/cacerts\nlrwxrwxrwx 1 root root 27 Sep 20 23:48 /usr/opt/openjdk-bin-11/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\nlrwxrwxrwx 1 root root 38 Mar  8  2023 /usr/opt/openjdk-bin-17.0.6_p10/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\nlrwxrwxrwx 1 root root 38 Mar  8  2023 /usr/opt/openjdk-bin-17/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\nlrwxrwxrwx 1 root root 38 Mar  6  2023 /usr/opt/openjdk-jre-bin-11.0.12_p7/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\nlrwxrwxrwx 1 root root 38 Mar  6  2023 /usr/opt/openjdk-jre-bin-11/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\nlrwxrwxrwx 1 root root 38 Mar  6  2023 /usr/opt/openjdk-jre-bin-8.362_p09/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\nlrwxrwxrwx 1 root root 38 Mar  6  2023 /usr/opt/openjdk-jre-bin-8/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\n</code></pre>\n<p>But you'll need to figure out where your JVMs are installed. On my Debian laptop they are in <code>/usr/lib/jvm</code>.</p>\n<p>So to fix this without having to reinstall, I would suggest the following.</p>\n<ol>\n<li>Make sure this is really the cause first. Do a long listing and make sure you're seeing broken symlinks. (if you have <code>alias ls='ls --color=auto'</code> they will be annoyingly blinking red)</li>\n</ol>\n<pre><code>ls -alF /usr/opt/openjdk-*/lib/security/cacerts\n# or\nls -alF /usr/lib/jvm/*/lib/security/cacerts\n</code></pre>\n<p>If you see those tags blinking until the end of days, then you can first test this as a normal user (you should get permission denied) and then run it as root. Change the path and pattern to what matches on your system</p>\n<pre class=\"lang-bash prettyprint-override\"><code>for f in $(ls /usr/opt/openjdk-*/lib/security/cacerts); do\n    [[ -e $f ]] || ln -sf /etc/ssl/certs/java/cacerts $f;\ndone\n</code></pre>\n<h3>ORIGINAL ANSWER</h3>\n<p>I'm running Gentoo Linux and I finally solved this by... wait for it... reinstalling <code>dev-java/icedtea</code>! I feel like it's a super-lame answer, but it's the <em>only</em> thing that worked. A lot of people have had this problem and I hope this helps somebody. I recall reading a bug report a few years ago in OpenJDK or icedtea project about this, but I haven't been able to track that down again. I presume reinstalling worked because I somehow had the old jars with the bug and the new version has the fix, but I can't be 100% certain.</p>\n<p>Specifically, I ran:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>sudo emerge -1v dev-java/icedtea\neselect java-vm set user icedtea-8\nANDROID_HOME=/home/daniel/.android-sdk-update-manager /home/daniel/.android-sdk-update-manager/tools/bin/sdkmanager --list\n</code></pre>\n<p>If you are using Ubuntu, Debian, etc. I presume you'll want to <code>apt install --reinstall openjdk-8-jre</code> or whatever your Java 8 package is called.</p>\n"}],"owner":{"account_id":7985221,"reputation":197,"user_id":7087118,"accept_rate":100,"display_name":"Alexander Jeitler-Stehr"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":649,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695273022,"creation_date":1585915048,"question_id":61011392,"body_markdown":"I want to connect to a site via HttpURLConnection. First of all I stumbled accross *javax.net.ssl.SSLHandshakeException*, as I&#39;ve forgotten to add the carcerts via *keytool -importcert* for the site under .../lib/security. After that, the connection could have been established with ease.\r\n\r\nHowever, today it&#39;s not working anymore, without changing code nor anything else. Following exception is seemed to be thrown:\r\n\r\n     javax.net.ssl.SSLException: Unexpected error: java.security.InvalidAlgorithmParameterException: the \r\n     trustAnchors parameter must be non-empty\r\n\r\nEven though there are plenty of possible solutions on the net, none of them could me get rid off this error.\r\n\r\nMaybe there is some setup needed to be done inside eclipse?\r\n\r\n","title":"Java: the trustAnchors parameter must be non-empty (openjdk)","body":"<p>I want to connect to a site via HttpURLConnection. First of all I stumbled accross <em>javax.net.ssl.SSLHandshakeException</em>, as I've forgotten to add the carcerts via <em>keytool -importcert</em> for the site under .../lib/security. After that, the connection could have been established with ease.</p>\n\n<p>However, today it's not working anymore, without changing code nor anything else. Following exception is seemed to be thrown:</p>\n\n<pre><code> javax.net.ssl.SSLException: Unexpected error: java.security.InvalidAlgorithmParameterException: the \n trustAnchors parameter must be non-empty\n</code></pre>\n\n<p>Even though there are plenty of possible solutions on the net, none of them could me get rid off this error.</p>\n\n<p>Maybe there is some setup needed to be done inside eclipse?</p>\n"},{"tags":["java","android","navigationview"],"comments":[{"owner":{"account_id":4545435,"reputation":860,"user_id":3692177,"accept_rate":88,"display_name":"SebasSBM"},"score":0,"creation_date":1662940413,"post_id":73683267,"comment_id":130115669,"body_markdown":"Even though I do not use Kotlin, I&#39;m not too afraid of it. I could convert it to `Java` most probably anyway...","body":"Even though I do not use Kotlin, I&#39;m not too afraid of it. I could convert it to <code>Java</code> most probably anyway..."},{"owner":{"account_id":1849514,"reputation":193868,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":1,"creation_date":1662943337,"post_id":73683267,"comment_id":130115981,"body_markdown":"So if you know how to get a particular MenuItem, why aren&#39;t you using [`getActionView()`](https://developer.android.com/reference/android/view/MenuItem#getActionView())?","body":"So if you know how to get a particular MenuItem, why aren&#39;t you using <a href=\"https://developer.android.com/reference/android/view/MenuItem#getActionView()\" rel=\"nofollow noreferrer\"><code>getActionView()</code></a>?"},{"owner":{"account_id":4545435,"reputation":860,"user_id":3692177,"accept_rate":88,"display_name":"SebasSBM"},"score":0,"creation_date":1662949628,"post_id":73683267,"comment_id":130116621,"body_markdown":"@ianhanniballake because I just didn&#39;t knew it existed... let&#39;s try this out...","body":"@ianhanniballake because I just didn&#39;t knew it existed... let&#39;s try this out..."}],"answers":[{"tags":[],"owner":{"account_id":4545435,"reputation":860,"user_id":3692177,"accept_rate":88,"display_name":"SebasSBM"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662952291,"creation_date":1662951877,"answer_id":73684096,"question_id":73683267,"body_markdown":"Good! @ianhanniballake &#39;s suggested method worked like a charm. If I do this:\r\n\r\n    NavigationView nav_v = findViewById(R.id.navigation_view);\r\n    MenuItem nav_option1 = nav_v.getMenu().findItem(R.id.menu_item1);\r\n    ImageView option1_lock_icon = nav_option1.getActionView().findViewById(R.id.lockedIcon);\r\n\r\nAnd from there, I could do whatever I want with this `ImageView`:\r\n\r\n    // Toggle visibility approach\r\n    if (item_locked) {\r\n        option1_lock_icon.setVisibility(View.VISIBLE);\r\n    } else {\r\n        option1_lock_icon.setVisibility(View.INVISIBLE);\r\n    }\r\n\r\n    // Change icon approach\r\n    string uri = &quot;&quot;;\r\n    if (item_locked) {\r\n        uri = &quot;@android:drawable/ic_lock_idle_lock&quot;;\r\n    } else {\r\n        uri = &quot;@android:drawable/ic_menu_view&quot;;\r\n    }\r\n    int imageResource = getResources()\r\n          .getIdentifier(uri,\r\n                         null,\r\n                         getPackageName()\r\n          );\r\n    option1_lock_icon.setImageDrawable(\r\n           getResources().getDrawable(imageResource)\r\n    );\r\n\r\nAlso, it looks like I can do more or less the same with any object I add to those &quot;action layouts&quot;. :-)","title":"NavigationView menu items with actionLayout. How can I set those action layout&#39;s attribute for each item?","body":"<p>Good! @ianhanniballake 's suggested method worked like a charm. If I do this:</p>\n<pre><code>NavigationView nav_v = findViewById(R.id.navigation_view);\nMenuItem nav_option1 = nav_v.getMenu().findItem(R.id.menu_item1);\nImageView option1_lock_icon = nav_option1.getActionView().findViewById(R.id.lockedIcon);\n</code></pre>\n<p>And from there, I could do whatever I want with this <code>ImageView</code>:</p>\n<pre><code>// Toggle visibility approach\nif (item_locked) {\n    option1_lock_icon.setVisibility(View.VISIBLE);\n} else {\n    option1_lock_icon.setVisibility(View.INVISIBLE);\n}\n\n// Change icon approach\nstring uri = &quot;&quot;;\nif (item_locked) {\n    uri = &quot;@android:drawable/ic_lock_idle_lock&quot;;\n} else {\n    uri = &quot;@android:drawable/ic_menu_view&quot;;\n}\nint imageResource = getResources()\n      .getIdentifier(uri,\n                     null,\n                     getPackageName()\n      );\noption1_lock_icon.setImageDrawable(\n       getResources().getDrawable(imageResource)\n);\n</code></pre>\n<p>Also, it looks like I can do more or less the same with any object I add to those &quot;action layouts&quot;. :-)</p>\n"}],"owner":{"account_id":4545435,"reputation":860,"user_id":3692177,"accept_rate":88,"display_name":"SebasSBM"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":423,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73684096,"answer_count":1,"score":0,"last_activity_date":1695270346,"creation_date":1662939115,"question_id":73683267,"body_markdown":"Following [this answer][1], I learned how to add extra views to the `NavigationView`&#39;s menu items, by adding an `action layout`. My question is, essentially, how can I tweak each of those individual `actionLayout`s dynamically, through Java?\r\n\r\nIn my case, instead of adding a &quot;switch&quot; to the menu items, I used `actionLayout`s to add an extra icon that will show a state for that item. It&#39;s a boolean state, so I want to show the difference either by changing the extra icon dynamically or by toggling visibility.\r\n\r\nSo I have a `menu.xml` like this one for my `NavigationView`:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        tools:showIn=&quot;navigation_view&quot;&gt;\r\n\r\n        &lt;group android:id=&quot;@+id/menu_group&quot;\r\n            android:checkableBehavior=&quot;single&quot; &gt;\r\n            &lt;item\r\n                android:id=&quot;@+id/menu_item1&quot;\r\n                android:icon=&quot;@drawable/some_main_icon&quot;\r\n                app:actionLayout=&quot;@layout/myflag_actionlayout&quot;\r\n                android:title=&quot;OPTION 1&quot; /&gt;\r\n            &lt;item\r\n                android:id=&quot;@+id/menu_item2&quot;\r\n                android:icon=&quot;@drawable/some_main_icon&quot;\r\n                app:actionLayout=&quot;@layout/myflag_actionlayout&quot;\r\n                android:title=&quot;OPTION 2&quot; /&gt;\r\n            &lt;!-- etc. --&gt;\r\n        &lt;/group&gt;\r\n    &lt;/menu&gt;\r\n\r\n...and my `myflag_actionlayout.xml` file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:background=&quot;#444444&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/lockedIcon&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            app:srcCompat=&quot;@android:drawable/ic_lock_idle_lock&quot; /&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\nSo it looks like this more or less:\r\n\r\n[![my_new_menu_items][2]][2]\r\n\r\nNow I wonder: how can I get each of those menu items&#39; instances, access their `&lt;ImageView&gt;` instance from Java, and change each `lockedIcon`&#39;s `ImageView` depending on a boolean variable? (For instance, toggling the `ImageView`&#39;s visible attribute or changing the image for `app:srcCompat` attribute) Should I use some `findViewById(R.id.lockedIcon)` for this task, or is it a bad idea and I should do it another way?\r\n\r\n#### EDIT:\r\nJust now I recall, I already did something similar to access those &quot;`NavigationView` items&quot; by Java, and add a string to the counter editing the title:\r\n\r\n    NavigationView nav_v = findViewById(R.id.navigation_view);\r\n    MenuItem nav_option1 = nav_v.getMenu().findItem(R.id.menu_item1);\r\n    nav_option1.setTitle(getString(R.string.nav_option1_title) + &quot; -&gt; &quot; + some_counter);\r\n\r\nMaybe i can from `nav_option1` invoke some method to access its action layout?\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/51668942/3692177\r\n  [2]: https://i.stack.imgur.com/p3bbp.png","title":"NavigationView menu items with actionLayout. How can I set those action layout&#39;s attribute for each item?","body":"<p>Following <a href=\"https://stackoverflow.com/a/51668942/3692177\">this answer</a>, I learned how to add extra views to the <code>NavigationView</code>'s menu items, by adding an <code>action layout</code>. My question is, essentially, how can I tweak each of those individual <code>actionLayout</code>s dynamically, through Java?</p>\n<p>In my case, instead of adding a &quot;switch&quot; to the menu items, I used <code>actionLayout</code>s to add an extra icon that will show a state for that item. It's a boolean state, so I want to show the difference either by changing the extra icon dynamically or by toggling visibility.</p>\n<p>So I have a <code>menu.xml</code> like this one for my <code>NavigationView</code>:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    tools:showIn=&quot;navigation_view&quot;&gt;\n\n    &lt;group android:id=&quot;@+id/menu_group&quot;\n        android:checkableBehavior=&quot;single&quot; &gt;\n        &lt;item\n            android:id=&quot;@+id/menu_item1&quot;\n            android:icon=&quot;@drawable/some_main_icon&quot;\n            app:actionLayout=&quot;@layout/myflag_actionlayout&quot;\n            android:title=&quot;OPTION 1&quot; /&gt;\n        &lt;item\n            android:id=&quot;@+id/menu_item2&quot;\n            android:icon=&quot;@drawable/some_main_icon&quot;\n            app:actionLayout=&quot;@layout/myflag_actionlayout&quot;\n            android:title=&quot;OPTION 2&quot; /&gt;\n        &lt;!-- etc. --&gt;\n    &lt;/group&gt;\n&lt;/menu&gt;\n</code></pre>\n<p>...and my <code>myflag_actionlayout.xml</code> file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:orientation=&quot;vertical&quot;\n    android:background=&quot;#444444&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n    &lt;ImageView\n        android:id=&quot;@+id/lockedIcon&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;match_parent&quot;\n        app:srcCompat=&quot;@android:drawable/ic_lock_idle_lock&quot; /&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>So it looks like this more or less:</p>\n<p><a href=\"https://i.stack.imgur.com/p3bbp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p3bbp.png\" alt=\"my_new_menu_items\" /></a></p>\n<p>Now I wonder: how can I get each of those menu items' instances, access their <code>&lt;ImageView&gt;</code> instance from Java, and change each <code>lockedIcon</code>'s <code>ImageView</code> depending on a boolean variable? (For instance, toggling the <code>ImageView</code>'s visible attribute or changing the image for <code>app:srcCompat</code> attribute) Should I use some <code>findViewById(R.id.lockedIcon)</code> for this task, or is it a bad idea and I should do it another way?</p>\n<h4>EDIT:</h4>\n<p>Just now I recall, I already did something similar to access those &quot;<code>NavigationView</code> items&quot; by Java, and add a string to the counter editing the title:</p>\n<pre><code>NavigationView nav_v = findViewById(R.id.navigation_view);\nMenuItem nav_option1 = nav_v.getMenu().findItem(R.id.menu_item1);\nnav_option1.setTitle(getString(R.string.nav_option1_title) + &quot; -&gt; &quot; + some_counter);\n</code></pre>\n<p>Maybe i can from <code>nav_option1</code> invoke some method to access its action layout?</p>\n"},{"tags":["java","serialization","objectmapper"],"answers":[{"tags":[],"owner":{"account_id":11720630,"reputation":27,"user_id":8579706,"display_name":"Sharun"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1695268470,"creation_date":1695268470,"answer_id":77147092,"question_id":77146987,"body_markdown":"\r\nYou need to add import com.fasterxml.jackson.annotation.JsonInclude;\r\n\r\nand it should be ion the top of the POJO class\r\n\r\n@JsonInclude(JsonInclude.Include.NON_NULL) | @JsonInclude(JsonInclude.Include.NON_EMPTY)\r\n\r\nmaybe a duplicate issue from [https://stackoverflow.com/questions/11757487][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/11757487","title":"Why does ObjectMapper serialization with JsonInclude.NON_EMPTY also remove null fields?","body":"<p>You need to add import com.fasterxml.jackson.annotation.JsonInclude;</p>\n<p>and it should be ion the top of the POJO class</p>\n<p>@JsonInclude(JsonInclude.Include.NON_NULL) | @JsonInclude(JsonInclude.Include.NON_EMPTY)</p>\n<p>maybe a duplicate issue from <a href=\"https://stackoverflow.com/questions/11757487\">How to tell Jackson to ignore a field during serialization if its value is null?</a></p>\n"},{"tags":[],"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1695270192,"creation_date":1695270192,"answer_id":77147189,"question_id":77146987,"body_markdown":"Please check out the javadoc for [JsonInclude.NON_EMPTY](https://fasterxml.github.io/jackson-annotations/javadoc/2.9/com/fasterxml/jackson/annotation/JsonInclude.Include.html#NON_EMPTY)  it says: \r\n\r\n&gt; &quot;Value that indicates that only properties with null value, or what is\r\n&gt; considered empty, are not to be included&quot;.\r\n\r\nAlso: \r\n\r\n&gt; &quot;Default emptiness for all types includes:\r\n&gt; \r\n&gt; Null values.&quot;\r\n\r\nso i would say that NON_EMPTY is a superset of NON_NULL, so thats why the lastname which is null is not present. Also, when I was testing, I was unable to serialize your Person class. I had to add the @Value annotation from lombok before my spring application could serialize it properly","title":"Why does ObjectMapper serialization with JsonInclude.NON_EMPTY also remove null fields?","body":"<p>Please check out the javadoc for <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.9/com/fasterxml/jackson/annotation/JsonInclude.Include.html#NON_EMPTY\" rel=\"nofollow noreferrer\">JsonInclude.NON_EMPTY</a>  it says:</p>\n<blockquote>\n<p>&quot;Value that indicates that only properties with null value, or what is\nconsidered empty, are not to be included&quot;.</p>\n</blockquote>\n<p>Also:</p>\n<blockquote>\n<p>&quot;Default emptiness for all types includes:</p>\n<p>Null values.&quot;</p>\n</blockquote>\n<p>so i would say that NON_EMPTY is a superset of NON_NULL, so thats why the lastname which is null is not present. Also, when I was testing, I was unable to serialize your Person class. I had to add the @Value annotation from lombok before my spring application could serialize it properly</p>\n"}],"owner":{"account_id":6381461,"reputation":3501,"user_id":6524600,"display_name":"Drex"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77147189,"answer_count":2,"score":2,"last_activity_date":1695270192,"creation_date":1695266164,"question_id":77146987,"body_markdown":"JsonInclude.NON_EMPTY and JsonInclude.NON_NULL are two Jackson annotations that can be used to control which fields are included in the serialized JSON output.\r\n\r\n    - JsonInclude.NON_EMPTY will ignore fields whose values are empty, such as empty strings, empty collections.\r\n    - JsonInclude.NON_NULL will only ignore fields whose values are null.\r\n\r\nIf I register JsonInclude.NON_EMPTY with the ObjectMapper, then not only fields with empty but also null values will be ignored when serializing objects. Why would NON_EMPTY ignore null fields?\r\n\r\nBelow is the code\r\n```\r\n@Builder\r\nclass Person {\r\n   String firstName;\r\n   String middleName;\r\n   String lastName;\r\n}\r\n\r\n@Test\r\nvoid testSerialization() {\r\n   Person person = Person()\r\n                   .builder()\r\n                   .firstName(&quot;test&quot;)\r\n                   .middleName(&quot;&quot;)\r\n                   .lastName(null)\r\n                   .build();\r\n\r\n   ObjectMapper mapper1 = new ObjectMapper();\r\n   mapper1.setSerializationInclusion(Include.NON_EMPTY);\r\n   String deserializeStr1 = mapper1.writeValueAsString(person);\r\n   // deserializeStr1: { &quot;firstName&quot;: &quot;test&quot; }\r\n   // why does &quot;lastName&quot; not present? \r\n   // why not being: { &quot;firstName&quot;: &quot;test&quot;, &quot;lastName&quot;: null } ?\r\n}\r\n```","title":"Why does ObjectMapper serialization with JsonInclude.NON_EMPTY also remove null fields?","body":"<p>JsonInclude.NON_EMPTY and JsonInclude.NON_NULL are two Jackson annotations that can be used to control which fields are included in the serialized JSON output.</p>\n<pre><code>- JsonInclude.NON_EMPTY will ignore fields whose values are empty, such as empty strings, empty collections.\n- JsonInclude.NON_NULL will only ignore fields whose values are null.\n</code></pre>\n<p>If I register JsonInclude.NON_EMPTY with the ObjectMapper, then not only fields with empty but also null values will be ignored when serializing objects. Why would NON_EMPTY ignore null fields?</p>\n<p>Below is the code</p>\n<pre><code>@Builder\nclass Person {\n   String firstName;\n   String middleName;\n   String lastName;\n}\n\n@Test\nvoid testSerialization() {\n   Person person = Person()\n                   .builder()\n                   .firstName(&quot;test&quot;)\n                   .middleName(&quot;&quot;)\n                   .lastName(null)\n                   .build();\n\n   ObjectMapper mapper1 = new ObjectMapper();\n   mapper1.setSerializationInclusion(Include.NON_EMPTY);\n   String deserializeStr1 = mapper1.writeValueAsString(person);\n   // deserializeStr1: { &quot;firstName&quot;: &quot;test&quot; }\n   // why does &quot;lastName&quot; not present? \n   // why not being: { &quot;firstName&quot;: &quot;test&quot;, &quot;lastName&quot;: null } ?\n}\n</code></pre>\n"},{"tags":["java","mocking","mockito","apache-httpclient-4.x"],"answers":[{"tags":[],"owner":{"account_id":3451372,"reputation":1314,"user_id":2890983,"display_name":"Flying Dumpling"},"down_vote_count":5,"up_vote_count":16,"is_accepted":false,"score":11,"last_activity_date":1386848488,"creation_date":1386848488,"answer_id":20542544,"question_id":20542361,"body_markdown":"In your unit test class you need to mock `defaultHttpClient`:\r\n\r\n    @Mock\r\n    private HttpClient defaultHttpClient;\r\nThen you tell mockito (for example in `@Before` method) to actually create your mocks by:\r\n\r\n    MockitoAnnotations.initMocks(YourTestClass);\r\n\r\nThen in your test method you define what `execute()` method should return:\r\n\r\n    when(defaultHttpClient.execute(any()/* or wahtever you want here */)).thenReturn(stubbed JSON object);","title":"Mocking Apache HTTPClient using Mockito","body":"<p>In your unit test class you need to mock <code>defaultHttpClient</code>:</p>\n\n<pre><code>@Mock\nprivate HttpClient defaultHttpClient;\n</code></pre>\n\n<p>Then you tell mockito (for example in <code>@Before</code> method) to actually create your mocks by:</p>\n\n<pre><code>MockitoAnnotations.initMocks(YourTestClass);\n</code></pre>\n\n<p>Then in your test method you define what <code>execute()</code> method should return:</p>\n\n<pre><code>when(defaultHttpClient.execute(any()/* or wahtever you want here */)).thenReturn(stubbed JSON object);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":942617,"reputation":2964,"user_id":970422,"accept_rate":73,"display_name":"Hussain Mansoor"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1392100658,"creation_date":1392100658,"answer_id":21694863,"question_id":20542361,"body_markdown":"You can do this easily using PowerMockito which can also mock final/static methods, private methods and anonymous classes easily. Here&#39;s the sample code for mocking http request. JSON_STRING_DATA is any string which you want to get from execute method.    \r\n\r\n    PowerMockito.mockStatic(DefaultHttpClient.class);\r\n        HttpClient defaultHttpClientMocked =  PowerMockito.mock(DefaultHttpClient.class);        \r\n        PowerMockito.when(defaultHttpClientMocked.execute(Mockito.any(HttpPost.class))).thenReturn(createMockedHTTPResponse(JSON_STRING_DATA));","title":"Mocking Apache HTTPClient using Mockito","body":"<p>You can do this easily using PowerMockito which can also mock final/static methods, private methods and anonymous classes easily. Here's the sample code for mocking http request. JSON_STRING_DATA is any string which you want to get from execute method.    </p>\n\n<pre><code>PowerMockito.mockStatic(DefaultHttpClient.class);\n    HttpClient defaultHttpClientMocked =  PowerMockito.mock(DefaultHttpClient.class);        \n    PowerMockito.when(defaultHttpClientMocked.execute(Mockito.any(HttpPost.class))).thenReturn(createMockedHTTPResponse(JSON_STRING_DATA));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2083591,"reputation":621,"user_id":1855042,"display_name":"user1855042"},"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1448552475,"creation_date":1448552475,"answer_id":33942402,"question_id":20542361,"body_markdown":"Here is what I did to test my code using Mockito and Apache HttpBuilder:\r\n\r\n**Class under test:**\r\n\r\n\timport java.io.BufferedReader;\r\n\timport java.io.IOException;\r\n\t\r\n\timport javax.ws.rs.core.Response.Status;\r\n\t\r\n\timport org.apache.http.HttpResponse;\r\n\timport org.apache.http.client.HttpClient;\r\n\timport org.apache.http.client.methods.HttpGet;\r\n\timport org.apache.http.impl.client.HttpClientBuilder;\r\n\timport org.slf4j.Logger;\r\n\timport org.slf4j.LoggerFactory;\r\n\t\r\n\tpublic class StatusApiClient {\r\n\tprivate static final Logger LOG = LoggerFactory.getLogger(StatusApiClient.class);\r\n\t\t\r\n\t\tprivate String targetUrl = &quot;&quot;;\r\n\t\tprivate HttpClient client = null;\r\n\t\tHttpGet httpGet = null;\r\n\t\t\r\n\t\tpublic StatusApiClient(HttpClient client, HttpGet httpGet) {\r\n\t\t\tthis.client = client;\r\n\t\t\tthis.httpGet = httpGet;\r\n\t\t}\r\n\t\t\r\n\t\tpublic StatusApiClient(String targetUrl) {\r\n\t\t\tthis.targetUrl = targetUrl;\r\n\t\t\tthis.client = HttpClientBuilder.create().build();\r\n\t\t\tthis.httpGet = new HttpGet(targetUrl);\r\n\t\t}\r\n\t\t\r\n\t\tpublic boolean getStatus() {\r\n\t\t\tBufferedReader rd = null;\r\n\t\t\tboolean status = false;\r\n\t\t\ttry{\r\n\t\t\t\tLOG.debug(&quot;Requesting status: &quot; + targetUrl);\r\n\t\t    \t\r\n\t\t    \t\r\n\t\t    \tHttpResponse response = client.execute(httpGet);\r\n\t\t    \t\r\n\t\t    \tif(response.getStatusLine().getStatusCode() == Status.OK.getStatusCode()) {\r\n\t\t    \t\tLOG.debug(&quot;Is online.&quot;);\r\n\t\t    \t\tstatus = true;\r\n\t\t    \t}\r\n\t\t    \t\r\n\t    \t} catch(Exception e) {\r\n\t    \t\tLOG.error(&quot;Error getting the status&quot;, e);\r\n\t    \t} finally {\r\n\t    \t\tif (rd != null) {\r\n\t    \t\t\ttry{\r\n\t    \t\t\t\trd.close();\r\n\t    \t\t\t} catch (IOException ioe) {\r\n\t    \t\t\t\tLOG.error(&quot;Error while closing the Buffered Reader used for reading the status&quot;, ioe);\r\n\t    \t\t\t}\r\n\t    \t\t}\t\r\n\t    \t}\r\n\t\t\t\r\n\t\t\treturn status;\r\n\t\t}\r\n\t}\r\n\r\n\r\n**Test:**\r\n\r\n\timport java.io.IOException;\r\n\t\r\n\timport org.apache.http.HttpResponse;\r\n\timport org.apache.http.StatusLine;\r\n\timport org.apache.http.client.ClientProtocolException;\r\n\timport org.apache.http.client.HttpClient;\r\n\timport org.apache.http.client.methods.HttpGet;\r\n\timport org.apache.http.conn.HttpHostConnectException;\r\n\timport org.junit.Assert;\r\n\timport org.junit.Test;\r\n\timport org.mockito.Mockito;\r\n\t\r\n\tpublic class StatusApiClientTest extends Mockito {\r\n\t\r\n\t\t@Test\r\n\t\tpublic void should_return_true_if_the_status_api_works_properly() throws ClientProtocolException, IOException {\r\n\t\t\t//given:\r\n\t\t\tHttpClient httpClient = mock(HttpClient.class);\r\n\t\t\tHttpGet httpGet = mock(HttpGet.class);\r\n\t\t\tHttpResponse httpResponse = mock(HttpResponse.class);\r\n\t\t\tStatusLine statusLine = mock(StatusLine.class);\r\n\t\t\t\r\n\t\t\t//and:\r\n\t\t\twhen(statusLine.getStatusCode()).thenReturn(200);\r\n\t\t\twhen(httpResponse.getStatusLine()).thenReturn(statusLine);\r\n\t\t\twhen(httpClient.execute(httpGet)).thenReturn(httpResponse);\r\n\t\t\t\r\n\t\t\t//and:\r\n\t\t\tStatusApiClient client = new StatusApiClient(httpClient, httpGet);\r\n\t\t\t\r\n\t\t\t//when:\r\n\t\t\tboolean status = client.getStatus();\r\n\t\t\t\r\n\t\t\t//then:\r\n\t\t\tAssert.assertTrue(status);\r\n\t\t}\r\n\t\t\r\n\t\t@Test\r\n\t\tpublic void should_return_false_if_status_api_do_not_respond() throws ClientProtocolException, IOException {\r\n\t\t\t//given:\r\n\t\t\tHttpClient httpClient = mock(HttpClient.class);\r\n\t\t\tHttpGet httpGet = mock(HttpGet.class);\r\n\t\t\tHttpResponse httpResponse = mock(HttpResponse.class);\r\n\t\t\tStatusLine statusLine = mock(StatusLine.class);\r\n\t\t\t\r\n\t\t\t//and:\r\n\t\t\twhen(httpClient.execute(httpGet)).thenThrow(HttpHostConnectException.class);\r\n\t\t\t\r\n\t\t\t//and:\r\n\t\t\tStatusApiClient client = new StatusApiClient(httpClient, httpGet);\r\n\t\t\t\r\n\t\t\t//when:\r\n\t\t\tboolean status = client.getStatus();\r\n\t\t\t\r\n\t\t\t//then:\r\n\t\t\tAssert.assertFalse(status);\r\n\t\t}\r\n\t\r\n\t}\r\n\r\n\r\nWhat do you think folks, do I need to improve something? (Yeah, I know, the comments. That is something I brought from my Spock background :D)","title":"Mocking Apache HTTPClient using Mockito","body":"<p>Here is what I did to test my code using Mockito and Apache HttpBuilder:</p>\n\n<p><strong>Class under test:</strong></p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\n\nimport javax.ws.rs.core.Response.Status;\n\nimport org.apache.http.HttpResponse;\nimport org.apache.http.client.HttpClient;\nimport org.apache.http.client.methods.HttpGet;\nimport org.apache.http.impl.client.HttpClientBuilder;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\npublic class StatusApiClient {\nprivate static final Logger LOG = LoggerFactory.getLogger(StatusApiClient.class);\n\n    private String targetUrl = \"\";\n    private HttpClient client = null;\n    HttpGet httpGet = null;\n\n    public StatusApiClient(HttpClient client, HttpGet httpGet) {\n        this.client = client;\n        this.httpGet = httpGet;\n    }\n\n    public StatusApiClient(String targetUrl) {\n        this.targetUrl = targetUrl;\n        this.client = HttpClientBuilder.create().build();\n        this.httpGet = new HttpGet(targetUrl);\n    }\n\n    public boolean getStatus() {\n        BufferedReader rd = null;\n        boolean status = false;\n        try{\n            LOG.debug(\"Requesting status: \" + targetUrl);\n\n\n            HttpResponse response = client.execute(httpGet);\n\n            if(response.getStatusLine().getStatusCode() == Status.OK.getStatusCode()) {\n                LOG.debug(\"Is online.\");\n                status = true;\n            }\n\n        } catch(Exception e) {\n            LOG.error(\"Error getting the status\", e);\n        } finally {\n            if (rd != null) {\n                try{\n                    rd.close();\n                } catch (IOException ioe) {\n                    LOG.error(\"Error while closing the Buffered Reader used for reading the status\", ioe);\n                }\n            }   \n        }\n\n        return status;\n    }\n}\n</code></pre>\n\n<p><strong>Test:</strong></p>\n\n<pre><code>import java.io.IOException;\n\nimport org.apache.http.HttpResponse;\nimport org.apache.http.StatusLine;\nimport org.apache.http.client.ClientProtocolException;\nimport org.apache.http.client.HttpClient;\nimport org.apache.http.client.methods.HttpGet;\nimport org.apache.http.conn.HttpHostConnectException;\nimport org.junit.Assert;\nimport org.junit.Test;\nimport org.mockito.Mockito;\n\npublic class StatusApiClientTest extends Mockito {\n\n    @Test\n    public void should_return_true_if_the_status_api_works_properly() throws ClientProtocolException, IOException {\n        //given:\n        HttpClient httpClient = mock(HttpClient.class);\n        HttpGet httpGet = mock(HttpGet.class);\n        HttpResponse httpResponse = mock(HttpResponse.class);\n        StatusLine statusLine = mock(StatusLine.class);\n\n        //and:\n        when(statusLine.getStatusCode()).thenReturn(200);\n        when(httpResponse.getStatusLine()).thenReturn(statusLine);\n        when(httpClient.execute(httpGet)).thenReturn(httpResponse);\n\n        //and:\n        StatusApiClient client = new StatusApiClient(httpClient, httpGet);\n\n        //when:\n        boolean status = client.getStatus();\n\n        //then:\n        Assert.assertTrue(status);\n    }\n\n    @Test\n    public void should_return_false_if_status_api_do_not_respond() throws ClientProtocolException, IOException {\n        //given:\n        HttpClient httpClient = mock(HttpClient.class);\n        HttpGet httpGet = mock(HttpGet.class);\n        HttpResponse httpResponse = mock(HttpResponse.class);\n        StatusLine statusLine = mock(StatusLine.class);\n\n        //and:\n        when(httpClient.execute(httpGet)).thenThrow(HttpHostConnectException.class);\n\n        //and:\n        StatusApiClient client = new StatusApiClient(httpClient, httpGet);\n\n        //when:\n        boolean status = client.getStatus();\n\n        //then:\n        Assert.assertFalse(status);\n    }\n\n}\n</code></pre>\n\n<p>What do you think folks, do I need to improve something? (Yeah, I know, the comments. That is something I brought from my Spock background :D)</p>\n"},{"tags":[],"owner":{"account_id":1322869,"reputation":3345,"user_id":1268294,"accept_rate":81,"display_name":"Pawe Adamski"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1520169987,"creation_date":1510728438,"answer_id":47301020,"question_id":20542361,"body_markdown":"You can look at [HttpClientMock][1], I wrote it for internal project but later decided to open source. It allows you to define mock behavior with fluent API and later verify a number of made calls. Example:\r\n\r\n    HttpClientMock httpClientMock = new \r\n    HttpClientMock(&quot;http://localhost:8080&quot;);\r\n    httpClientMock.onGet(&quot;/login?user=john&quot;).doReturnJSON(&quot;{permission:1}&quot;);\r\n\r\n    httpClientMock.verify().get(&quot;/login?user=john&quot;).called();\r\n\r\n\r\n\r\n  [1]: https://github.com/PawelAdamski/HttpClientMock","title":"Mocking Apache HTTPClient using Mockito","body":"<p>You can look at <a href=\"https://github.com/PawelAdamski/HttpClientMock\" rel=\"noreferrer\">HttpClientMock</a>, I wrote it for internal project but later decided to open source. It allows you to define mock behavior with fluent API and later verify a number of made calls. Example:</p>\n\n<pre><code>HttpClientMock httpClientMock = new \nHttpClientMock(\"http://localhost:8080\");\nhttpClientMock.onGet(\"/login?user=john\").doReturnJSON(\"{permission:1}\");\n\nhttpClientMock.verify().get(\"/login?user=john\").called();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16407068,"reputation":101,"user_id":11851379,"display_name":"gnulli"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1564393988,"creation_date":1564393988,"answer_id":57251296,"question_id":20542361,"body_markdown":"There is a nicer way to do this without having to add PowerMock as yet another dependency. Here you only need an extra constructor taking HTTPClient as an argument and Mockito. In this example I&#39;m creating a custom health check (Spring Actuator) and I need to mock the HTTPClient for unit testing. \r\n\r\n*Libs: JUnit 5, Spring Boot 2.1.2 and Mockito 2.*\r\n\r\n**Component:**\r\n```java\r\n@Component\r\npublic class MyHealthCheck extends AbstractHealthIndicator {\r\n\r\n\tHttpClient httpClient;\r\n\r\n\tpublic MyHealthCheck() { \r\n\t\thttpClient = HttpClientBuilder.create().build();\r\n\t}\r\n\r\n\t/** \r\n\tAdded another constructor to the class with an HttpClient argument.\r\n    This one can be used for testing\r\n\t*/ \r\n\tpublic MyHealthCheck(HttpClient httpClient) { \r\n\t\tthis.httpClient = httpClient; \r\n\t}\r\n\r\n\t/**\r\n\tMethod to test \r\n\t*/ \r\n\t@Override\r\n\tprotected void doHealthCheck(Builder builder) throws Exception {\r\n\r\n\t\t//\r\n\t\t// Execute request and get status code\r\n\t\tHttpGet request = new HttpGet(&quot;http://www.SomeAuthEndpoint.com&quot;);\r\n\t\tHttpResponse response = httpClient.execute(request);\r\n\r\n\t\t//\r\n\t\t// Update builder according to status code\r\n\t\tint statusCode = response.getStatusLine().getStatusCode();\r\n\t\tif(statusCode == 200 || statusCode == 401) {\r\n\t\t    builder.up().withDetail(&quot;Code from service&quot;, statusCode);\r\n\t\t} else {\r\n\t\t    builder.unknown().withDetail(&quot;Code from service&quot;, statusCode);\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\n**Test method:**\r\n\r\nNote that here we use *Mockito.any(HttpGet.class)*\r\n\r\n```java\r\nprivate static HttpClient httpClient;\r\nprivate static HttpResponse httpResponse;\r\nprivate static StatusLine statusLine;\r\n\r\n@BeforeAll\r\npublic static void init() {\r\n\t//\r\n\t// Given\r\n\thttpClient = Mockito.mock(HttpClient.class);\r\n\thttpResponse = Mockito.mock(HttpResponse.class);\r\n\tstatusLine = Mockito.mock(StatusLine.class);\r\n}\r\n\r\n\r\n@Test\r\npublic void doHealthCheck_endReturns401_shouldReturnUp() throws Exception {\r\n\t\t\r\n    //\r\n    // When\r\n    when(statusLine.getStatusCode()).thenReturn(401);\r\n    when(httpResponse.getStatusLine()).thenReturn(statusLine);\r\n    when(httpClient.execute(Mockito.any(HttpGet.class))).thenReturn(httpResponse);\r\n\r\n    //\r\n    // Then\r\n\tMyHealthCheck myHealthCheck = new MyHealthCheck(httpClient);\r\n\tHealth.Builder builder = new Health.Builder();\r\n\tmyHealthCheck.doHealthCheck(builder);\r\n\tStatus status = builder.build().getStatus();\r\n\tAssertions.assertTrue(Status.UP == status);\r\n}\r\n```","title":"Mocking Apache HTTPClient using Mockito","body":"<p>There is a nicer way to do this without having to add PowerMock as yet another dependency. Here you only need an extra constructor taking HTTPClient as an argument and Mockito. In this example I'm creating a custom health check (Spring Actuator) and I need to mock the HTTPClient for unit testing. </p>\n\n<p><em>Libs: JUnit 5, Spring Boot 2.1.2 and Mockito 2.</em></p>\n\n<p><strong>Component:</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class MyHealthCheck extends AbstractHealthIndicator {\n\n    HttpClient httpClient;\n\n    public MyHealthCheck() { \n        httpClient = HttpClientBuilder.create().build();\n    }\n\n    /** \n    Added another constructor to the class with an HttpClient argument.\n    This one can be used for testing\n    */ \n    public MyHealthCheck(HttpClient httpClient) { \n        this.httpClient = httpClient; \n    }\n\n    /**\n    Method to test \n    */ \n    @Override\n    protected void doHealthCheck(Builder builder) throws Exception {\n\n        //\n        // Execute request and get status code\n        HttpGet request = new HttpGet(\"http://www.SomeAuthEndpoint.com\");\n        HttpResponse response = httpClient.execute(request);\n\n        //\n        // Update builder according to status code\n        int statusCode = response.getStatusLine().getStatusCode();\n        if(statusCode == 200 || statusCode == 401) {\n            builder.up().withDetail(\"Code from service\", statusCode);\n        } else {\n            builder.unknown().withDetail(\"Code from service\", statusCode);\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Test method:</strong></p>\n\n<p>Note that here we use <em>Mockito.any(HttpGet.class)</em></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>private static HttpClient httpClient;\nprivate static HttpResponse httpResponse;\nprivate static StatusLine statusLine;\n\n@BeforeAll\npublic static void init() {\n    //\n    // Given\n    httpClient = Mockito.mock(HttpClient.class);\n    httpResponse = Mockito.mock(HttpResponse.class);\n    statusLine = Mockito.mock(StatusLine.class);\n}\n\n\n@Test\npublic void doHealthCheck_endReturns401_shouldReturnUp() throws Exception {\n\n    //\n    // When\n    when(statusLine.getStatusCode()).thenReturn(401);\n    when(httpResponse.getStatusLine()).thenReturn(statusLine);\n    when(httpClient.execute(Mockito.any(HttpGet.class))).thenReturn(httpResponse);\n\n    //\n    // Then\n    MyHealthCheck myHealthCheck = new MyHealthCheck(httpClient);\n    Health.Builder builder = new Health.Builder();\n    myHealthCheck.doHealthCheck(builder);\n    Status status = builder.build().getStatus();\n    Assertions.assertTrue(Status.UP == status);\n}\n</code></pre>\n"}],"owner":{"account_id":155603,"reputation":1559,"user_id":372366,"accept_rate":66,"display_name":"Global Dictator"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":112712,"favorite_count":0,"down_vote_count":0,"up_vote_count":46,"answer_count":5,"score":46,"last_activity_date":1695267228,"creation_date":1386847976,"question_id":20542361,"body_markdown":"I&#39;m trying to mock Apache HttpClient Interface in order to mock one of its methods mentioned below to return a stubbed JSON object in response.\r\n\r\n    HttpResponse response = defaultHttpClient.execute(postRequest); \r\n\r\nCould somebody be able to suggest how to achieve this with some sample code? Your help would be greatly appreciated. \r\n\r\nThanks ","title":"Mocking Apache HTTPClient using Mockito","body":"<p>I'm trying to mock Apache HttpClient Interface in order to mock one of its methods mentioned below to return a stubbed JSON object in response.</p>\n\n<pre><code>HttpResponse response = defaultHttpClient.execute(postRequest); \n</code></pre>\n\n<p>Could somebody be able to suggest how to achieve this with some sample code? Your help would be greatly appreciated. </p>\n\n<p>Thanks </p>\n"},{"tags":["java","excel","csv","apache-poi"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1695276646,"post_id":77147002,"comment_id":136003280,"body_markdown":"What is the problem using your code? What Apache POI version used?","body":"What is the problem using your code? What Apache POI version used?"}],"owner":{"account_id":11064566,"reputation":19,"user_id":8124755,"display_name":"Sarthak"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1695266622,"creation_date":1695266622,"question_id":77147002,"body_markdown":"I want to convert an excel file to csv in Java using the Apache poi pkg. \r\nI have to read a specific range from the excel. Example B:G, I want to specify the starting row as well something like B3:G. \r\nIs their a clean way to do this ?\r\n\r\nCurrently tried using the AreaReference and iterate over the cells to make sure the cell is in the area.\r\n\r\nExample \r\n\r\n```\r\nSheet sheet = workbook.getSheetAt(0); \r\nAreaReference areaReference = new AreadReference(&quot;B3:G100&quot;);\r\nShort startCol = areaReference.getFirstCell().getCol();\r\nShort startRow = areadReference.getFirstCell().getRow();\r\nShort endCol = areadReference.getLastCell().getCol(); \r\nIterator&lt;Row&gt; rowIterator = sheet.iterator();\r\nwhile (rowIterator.hasNext()) {\r\n    Row row = rowIterator.next();\r\n    Iterator&lt;Cell&gt; cellIterator = row.cellIterator();\r\n    while (cellIterator.hasNext()) {\r\n        Cell cell = cellIterator.next();\r\n        int cellColIdx = cell.getAddress().getColumn();\r\n        int cellRowIdx = cell.getAddress().getRow();\r\n        if (cellColIdx &lt;= startCol &amp;&amp; cellColIdx &lt;= endCol &amp;&amp; cellRowIdx &gt;= startRow) {\r\n           // logic\r\n        }\r\n    }\r\n}\r\n```\r\n","title":"How can I read excel by specifying range, I have to use apache poi package","body":"<p>I want to convert an excel file to csv in Java using the Apache poi pkg.\nI have to read a specific range from the excel. Example B:G, I want to specify the starting row as well something like B3:G.\nIs their a clean way to do this ?</p>\n<p>Currently tried using the AreaReference and iterate over the cells to make sure the cell is in the area.</p>\n<p>Example</p>\n<pre><code>Sheet sheet = workbook.getSheetAt(0); \nAreaReference areaReference = new AreadReference(&quot;B3:G100&quot;);\nShort startCol = areaReference.getFirstCell().getCol();\nShort startRow = areadReference.getFirstCell().getRow();\nShort endCol = areadReference.getLastCell().getCol(); \nIterator&lt;Row&gt; rowIterator = sheet.iterator();\nwhile (rowIterator.hasNext()) {\n    Row row = rowIterator.next();\n    Iterator&lt;Cell&gt; cellIterator = row.cellIterator();\n    while (cellIterator.hasNext()) {\n        Cell cell = cellIterator.next();\n        int cellColIdx = cell.getAddress().getColumn();\n        int cellRowIdx = cell.getAddress().getRow();\n        if (cellColIdx &lt;= startCol &amp;&amp; cellColIdx &lt;= endCol &amp;&amp; cellRowIdx &gt;= startRow) {\n           // logic\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","mysql","spring-boot","hibernate"],"answers":[{"tags":[],"owner":{"account_id":11720630,"reputation":27,"user_id":8579706,"display_name":"Sharun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695266119,"creation_date":1695266119,"answer_id":77146983,"question_id":77056416,"body_markdown":"*The issue you&#39;re facing might be related to Hibernate&#39;s first-level cache and second-level cache. When you delete an entity using Hibernate, the changes are not immediately reflected in the first-level cache or the in-memory representation of the associated entities.*\r\n\r\nBy default, your relationship is marked as lazy-loaded (fetch = FetchType.LAZY). This means that Hibernate will load the photos collection only when you access it explicitly. If you want changes to be reflected immediately, you can change the fetch strategy to FetchType.EAGER:\r\n\r\n------\r\n\r\nEnsure that your method is annotated with `@Transactional`. This will manage the transaction and session properly, and any changes made to the entities will be reflected when the transaction is committed:\r\n\r\n    @Transactional\r\n    public UserDto deleteMeetPhoto(User user, String photoID) {\r\n        // Your delete logic here\r\n    }","title":"Hibernate delete entity OneToMany is not working","body":"<p><em>The issue you're facing might be related to Hibernate's first-level cache and second-level cache. When you delete an entity using Hibernate, the changes are not immediately reflected in the first-level cache or the in-memory representation of the associated entities.</em></p>\n<p>By default, your relationship is marked as lazy-loaded (fetch = FetchType.LAZY). This means that Hibernate will load the photos collection only when you access it explicitly. If you want changes to be reflected immediately, you can change the fetch strategy to FetchType.EAGER:</p>\n<hr />\n<p>Ensure that your method is annotated with <code>@Transactional</code>. This will manage the transaction and session properly, and any changes made to the entities will be reflected when the transaction is committed:</p>\n<pre><code>@Transactional\npublic UserDto deleteMeetPhoto(User user, String photoID) {\n    // Your delete logic here\n}\n</code></pre>\n"}],"owner":{"account_id":19589013,"reputation":47,"user_id":16129883,"display_name":"mateo cunha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695266119,"creation_date":1694056930,"question_id":77056416,"body_markdown":"I am developing an application using SpringBoot and Hibernate.\r\nThe problem: When I delete de contained entity this action is not reflected in real time on the containing entity but it is reflecting in my database.\r\n(I think that it is related with the context of hibernate or the cache of hibernate)\r\n\r\nThe Code is:\r\n\r\n        public UserDto deleteMeetPhoto(User user, String photoID) {\r\n        \r\n        PhotoMeet photoAux = photoMeetDao.selectPhotoByIdAndUser(photoID, user.getId());\r\n        photoMeetDao.deletePhoto(photoAux.getId(), user.getId());\r\n        //Refreshing the user \r\n        user = userDao.findById(user.getId()).get();\r\n\r\n        return new UserDto(user);\r\n    }\r\n\r\nThe User entity code:\r\n\r\n    @LazyCollection(LazyCollectionOption.FALSE)\r\n    @OneToMany(mappedBy = &quot;user&quot;, orphanRemoval = false, cascade = {CascadeType.PERSIST,\r\n            CascadeType.MERGE, CascadeType.REMOVE,\r\n            CascadeType.DETACH, CascadeType.REFRESH})\r\n    private List&lt;PhotoMeet&gt; photos;\r\nThe PhotoMeet code:\r\n\r\n    @ManyToOne(cascade = { CascadeType.PERSIST, CascadeType.MERGE, CascadeType.DETACH,\r\n\t\t\tCascadeType.REFRESH, CascadeType.REMOVE }, fetch = FetchType.LAZY)\r\n\t@JoinColumn(name = &quot;user_id&quot;)\r\n\tprivate User user;","title":"Hibernate delete entity OneToMany is not working","body":"<p>I am developing an application using SpringBoot and Hibernate.\nThe problem: When I delete de contained entity this action is not reflected in real time on the containing entity but it is reflecting in my database.\n(I think that it is related with the context of hibernate or the cache of hibernate)</p>\n<p>The Code is:</p>\n<pre><code>    public UserDto deleteMeetPhoto(User user, String photoID) {\n    \n    PhotoMeet photoAux = photoMeetDao.selectPhotoByIdAndUser(photoID, user.getId());\n    photoMeetDao.deletePhoto(photoAux.getId(), user.getId());\n    //Refreshing the user \n    user = userDao.findById(user.getId()).get();\n\n    return new UserDto(user);\n}\n</code></pre>\n<p>The User entity code:</p>\n<pre><code>@LazyCollection(LazyCollectionOption.FALSE)\n@OneToMany(mappedBy = &quot;user&quot;, orphanRemoval = false, cascade = {CascadeType.PERSIST,\n        CascadeType.MERGE, CascadeType.REMOVE,\n        CascadeType.DETACH, CascadeType.REFRESH})\nprivate List&lt;PhotoMeet&gt; photos;\n</code></pre>\n<p>The PhotoMeet code:</p>\n<pre><code>@ManyToOne(cascade = { CascadeType.PERSIST, CascadeType.MERGE, CascadeType.DETACH,\n        CascadeType.REFRESH, CascadeType.REMOVE }, fetch = FetchType.LAZY)\n@JoinColumn(name = &quot;user_id&quot;)\nprivate User user;\n</code></pre>\n"},{"tags":["java","image","download"],"comments":[{"owner":{"account_id":8834,"reputation":297144,"user_id":16076,"display_name":"Mitch Wheat"},"score":0,"creation_date":1328517789,"post_id":9157501,"comment_id":11516221,"body_markdown":"you mention you have problems but neglect to say what they are specifically. I also find it hard to believe that someone would vote this question up.","body":"you mention you have problems but neglect to say what they are specifically. I also find it hard to believe that someone would vote this question up."},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1328517835,"post_id":9157501,"comment_id":11516231,"body_markdown":"If this is a learning situation, you should tag your question as homework.","body":"If this is a learning situation, you should tag your question as homework."},{"owner":{"account_id":1226405,"reputation":331,"user_id":1191852,"accept_rate":38,"display_name":"Kanchan Ruia"},"score":0,"creation_date":1328517974,"post_id":9157501,"comment_id":11516262,"body_markdown":"sorry for inconvenience i have updated my problem. and problem is that it gets downloaded to servers side at c:// and not to clients side","body":"sorry for inconvenience i have updated my problem. and problem is that it gets downloaded to servers side at c:// and not to clients side"}],"answers":[{"tags":[],"owner":{"account_id":292185,"reputation":7185,"user_id":594793,"display_name":"Jon7"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1328519015,"creation_date":1328518221,"answer_id":9157586,"question_id":9157501,"body_markdown":"If the file is getting downloaded to C:\\\\, then that&#39;s what your `cpath` variable equals when you open your `FileOutputStream`. This would imply that your `name` variable is being passed in as an empty string. Try putting in some logging statements (or even better, using the netbeans debugger!) to see what values your variables are holding as your code executes.\r\n\r\nEDIT: I think I understand the problem now. You&#39;re running this as a servlet or something similar. That means that your code is executing on the server, rather than the client. If you want to download the file to a specific path on the client, you&#39;re going to have to use an `Applet` or something similar that runs on the client side. Alternatively, you can return the file in the HTTP response and the user&#39;s browser will ask them where to save the file. Although, at that point, the user could just navigate to the jpg in a browser themselves.\r\n\r\nYou might want to explain your use case in more detail if this doesn&#39;t answer your question.","title":"java code to download an image from server to client","body":"<p>If the file is getting downloaded to C:\\, then that's what your <code>cpath</code> variable equals when you open your <code>FileOutputStream</code>. This would imply that your <code>name</code> variable is being passed in as an empty string. Try putting in some logging statements (or even better, using the netbeans debugger!) to see what values your variables are holding as your code executes.</p>\n\n<p>EDIT: I think I understand the problem now. You're running this as a servlet or something similar. That means that your code is executing on the server, rather than the client. If you want to download the file to a specific path on the client, you're going to have to use an <code>Applet</code> or something similar that runs on the client side. Alternatively, you can return the file in the HTTP response and the user's browser will ask them where to save the file. Although, at that point, the user could just navigate to the jpg in a browser themselves.</p>\n\n<p>You might want to explain your use case in more detail if this doesn't answer your question.</p>\n"},{"tags":[],"owner":{"account_id":4277269,"reputation":407,"user_id":3497603,"accept_rate":80,"display_name":"Sagar Bhosale"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1399526291,"creation_date":1399526291,"answer_id":23533292,"question_id":9157501,"body_markdown":"Try this running code.It will help you.\r\n\r\n\r\n\r\n\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.OutputStream;\r\n    import java.net.Authenticator;\r\n    import java.net.PasswordAuthentication;\r\n    import java.net.URL;\r\n    \r\n    public class SaveImageFromUrl {\r\n    \r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\tString imageUrl = &quot;http://2.bp.blogspot.com/_GHaEnqqbRsE/SVsxi-gdQ2I/AAAAAAAAAAU/NS6MEejoHtE/s320/Gppfront.jpg&quot;;\r\n    \t\t\r\n    \t\t\r\n    \t\tString destinationFile = &quot;D://gpp.jpg&quot;;\r\n    \r\n    \t\tsaveImage(imageUrl, destinationFile);\r\n    \t}\r\n    \r\n    \tpublic static void saveImage(String imageUrl, String destinationFile) throws IOException {\r\n    \t\tURL url = new URL(imageUrl);\r\n    \t\tInputStream is = url.openStream();\r\n    \t\tOutputStream os = new FileOutputStream(destinationFile);\r\n    \r\n    \t\tbyte[] b = new byte[2048];\r\n    \t\tint length;\r\n    \r\n    \t\twhile ((length = is.read(b)) != -1) {\r\n    \t\t\tos.write(b, 0, length);\r\n    \t\t}\r\n    \r\n    \t\tis.close();\r\n    \t\tos.close();\r\n    \t}\r\n    \r\n    }","title":"java code to download an image from server to client","body":"<p>Try this running code.It will help you.</p>\n\n<pre><code>import java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.net.Authenticator;\nimport java.net.PasswordAuthentication;\nimport java.net.URL;\n\npublic class SaveImageFromUrl {\n\n    public static void main(String[] args) throws Exception {\n\n\n\n        String imageUrl = \"http://2.bp.blogspot.com/_GHaEnqqbRsE/SVsxi-gdQ2I/AAAAAAAAAAU/NS6MEejoHtE/s320/Gppfront.jpg\";\n\n\n        String destinationFile = \"D://gpp.jpg\";\n\n        saveImage(imageUrl, destinationFile);\n    }\n\n    public static void saveImage(String imageUrl, String destinationFile) throws IOException {\n        URL url = new URL(imageUrl);\n        InputStream is = url.openStream();\n        OutputStream os = new FileOutputStream(destinationFile);\n\n        byte[] b = new byte[2048];\n        int length;\n\n        while ((length = is.read(b)) != -1) {\n            os.write(b, 0, length);\n        }\n\n        is.close();\n        os.close();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1666657,"reputation":484,"user_id":1533909,"accept_rate":57,"display_name":"gashu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1416393091,"creation_date":1416393091,"answer_id":27014549,"question_id":9157501,"body_markdown":"Please try this working code first:\r\n\r\n    package com.ashugupt.github.stackover;\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.FileOutputStream;\r\n    import java.io.InputStream;\r\n    import java.io.InputStreamReader;\r\n    import java.io.OutputStream;\r\n    import java.net.HttpURLConnection;\r\n    import java.net.URL;\r\n\r\n    public class URLTest {\r\n\r\n      private static void sendGet() throws Exception {\r\n\r\n        String url = &quot;http://www.uni-koblenz-landau.de/images/starts-c-ko.jpg&quot;;\r\n        URL obj = new URL(url);\r\n        HttpURLConnection con = (HttpURLConnection) obj.openConnection();\r\n\r\n        // optional default is GET\r\n        con.setRequestMethod(&quot;GET&quot;);\r\n\r\n        //add request header\r\n        con.setRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/5.0&quot;);\r\n\r\n        int responseCode = con.getResponseCode();\r\n        System.out.println(&quot;\\nSending &#39;GET&#39; request to URL : &quot; + url);\r\n        System.out.println(&quot;Response Code : &quot; + responseCode);\r\n\r\n        InputStream in = con.getInputStream();\r\n        OutputStream out = new FileOutputStream(&quot;/Users/ravikiran/Desktop/abc.jpg&quot;);\r\n        try {\r\n          byte[] bytes = new byte[2048];\r\n          int length;\r\n\r\n          while ((length = in.read(bytes)) != -1) {\r\n            out.write(bytes, 0, length);\r\n          }\r\n        } finally {\r\n          in.close();\r\n          out.close();\r\n        }\r\n      }\r\n\r\n      public static void main(String[] args) throws Exception {\r\n        sendGet();\r\n      }\r\n    }\r\n","title":"java code to download an image from server to client","body":"<p>Please try this working code first:</p>\n\n<pre><code>package com.ashugupt.github.stackover;\n\nimport java.io.BufferedReader;\nimport java.io.FileOutputStream;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.io.OutputStream;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\n\npublic class URLTest {\n\n  private static void sendGet() throws Exception {\n\n    String url = \"http://www.uni-koblenz-landau.de/images/starts-c-ko.jpg\";\n    URL obj = new URL(url);\n    HttpURLConnection con = (HttpURLConnection) obj.openConnection();\n\n    // optional default is GET\n    con.setRequestMethod(\"GET\");\n\n    //add request header\n    con.setRequestProperty(\"User-Agent\", \"Mozilla/5.0\");\n\n    int responseCode = con.getResponseCode();\n    System.out.println(\"\\nSending 'GET' request to URL : \" + url);\n    System.out.println(\"Response Code : \" + responseCode);\n\n    InputStream in = con.getInputStream();\n    OutputStream out = new FileOutputStream(\"/Users/ravikiran/Desktop/abc.jpg\");\n    try {\n      byte[] bytes = new byte[2048];\n      int length;\n\n      while ((length = in.read(bytes)) != -1) {\n        out.write(bytes, 0, length);\n      }\n    } finally {\n      in.close();\n      out.close();\n    }\n  }\n\n  public static void main(String[] args) throws Exception {\n    sendGet();\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":1226405,"reputation":331,"user_id":1191852,"accept_rate":38,"display_name":"Kanchan Ruia"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8982,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1695265590,"creation_date":1328517661,"question_id":9157501,"body_markdown":"I am a new to java. I dont know much about it. I am just learning java.\r\nI am developing a web application. In which i have an option download image . If user clicks he should be able to download image from server to client side say at location c://. \r\n\r\n\r\nI have implemented this code ::\r\n\r\n        \r\n    import java.awt.Image;\r\n    import java.io.BufferedInputStream;\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.OutputStream;\r\n    \r\n    \r\n    import java.net.HttpURLConnection;\r\n    import java.net.MalformedURLException;\r\n    import java.net.URL;\r\n    import javax.imageio.ImageIO;\r\n    \r\n    \r\n    \r\n    \r\n    public class DownloadingImages{\r\n        public DownloadingImages() {}\r\n        \r\n    public void download(String name) throws MalformedURLException, IOException{\r\n    \r\n    Image image = null;\r\n    try {\r\n        //URL url = new URL(&quot;file:///E:/myproject/build/web/images/Webcam.jpg&quot;);\r\n     \r\n     String  spath=&quot;http://localhost:5051/marketpoint/images/&quot;;\r\n     \r\n     String cpath=&quot;C:\\\\&quot;;\r\n    \r\n     \r\n     spath = spath + name ;\r\n     cpath = cpath + name ;\r\n     System.out.println(&quot;FULL path::: &quot;+spath);\r\n     \r\n     \r\n     \r\n     URL url = new URL(spath);\r\n\r\n \r\n \r\n\r\n     InputStream in = new BufferedInputStream(url.openStream());\r\n    ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n    byte[] buf = new byte[1024];\r\n    int n = 0;\r\n    while (-1!=(n=in.read(buf)))\r\n    {\r\n       out.write(buf, 0, n);\r\n    }\r\n    out.close();\r\n    in.close();\r\n    byte[] response = out.toByteArray();\r\n     FileOutputStream fos = new FileOutputStream(cpath);\r\n        fos.write(response);\r\n        fos.close();  \r\n    } catch (IOException e) {\r\n        \r\n        \r\n    }\r\n    }\r\n    }\r\n\r\n\r\n    Here\r\n    name = name of image thta client wants to download.\r\n\r\nHere problem is that image gets downloaded to server&#39;s side. At c:// . can anybody please tell where  am i going wrong.\r\n\r\nFor this i am using net beans as my editor , Apache tomcat as  server.  Both client and Server gets connected through port no 5051. And image that clients want to download from server is simple jpg image.  will anybody help me to get out of this problems. ","title":"java code to download an image from server to client","body":"<p>I am a new to java. I dont know much about it. I am just learning java.\nI am developing a web application. In which i have an option download image . If user clicks he should be able to download image from server to client side say at location c://. </p>\n\n<p>I have implemented this code ::</p>\n\n<pre><code>import java.awt.Image;\nimport java.io.BufferedInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\n\n\nimport java.net.HttpURLConnection;\nimport java.net.MalformedURLException;\nimport java.net.URL;\nimport javax.imageio.ImageIO;\n\n\n\n\npublic class DownloadingImages{\n    public DownloadingImages() {}\n\npublic void download(String name) throws MalformedURLException, IOException{\n\nImage image = null;\ntry {\n    //URL url = new URL(\"file:///E:/myproject/build/web/images/Webcam.jpg\");\n\n String  spath=\"http://localhost:5051/marketpoint/images/\";\n\n String cpath=\"C:\\\\\";\n\n\n spath = spath + name ;\n cpath = cpath + name ;\n System.out.println(\"FULL path::: \"+spath);\n\n\n\n URL url = new URL(spath);\n\n\n\n\n InputStream in = new BufferedInputStream(url.openStream());\nByteArrayOutputStream out = new ByteArrayOutputStream();\nbyte[] buf = new byte[1024];\nint n = 0;\nwhile (-1!=(n=in.read(buf)))\n{\n   out.write(buf, 0, n);\n}\nout.close();\nin.close();\nbyte[] response = out.toByteArray();\n FileOutputStream fos = new FileOutputStream(cpath);\n    fos.write(response);\n    fos.close();  \n} catch (IOException e) {\n\n\n}\n}\n}\n\n\nHere\nname = name of image thta client wants to download.\n</code></pre>\n\n<p>Here problem is that image gets downloaded to server's side. At c:// . can anybody please tell where  am i going wrong.</p>\n\n<p>For this i am using net beans as my editor , Apache tomcat as  server.  Both client and Server gets connected through port no 5051. And image that clients want to download from server is simple jpg image.  will anybody help me to get out of this problems. </p>\n"},{"tags":["java","linux","spring-boot","scheduled-tasks"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1695270523,"post_id":77146950,"comment_id":136002645,"body_markdown":"well, are you having any other scheduler methods? i noticed you are calling your method `scheduleFixedDelayTask2()`. is the duplicated log coming from any `scheduleFixedDelayTask()` or something?","body":"well, are you having any other scheduler methods? i noticed you are calling your method <code>scheduleFixedDelayTask2()</code>. is the duplicated log coming from any <code>scheduleFixedDelayTask()</code> or something?"},{"owner":{"account_id":27663207,"reputation":5,"user_id":21115931,"display_name":"david_23"},"score":0,"creation_date":1695275900,"post_id":77146950,"comment_id":136003177,"body_markdown":"I have another scheduler task inside of a different controller.  other scheduler calling a different method with different logs. and scheduled time is different","body":"I have another scheduler task inside of a different controller.  other scheduler calling a different method with different logs. and scheduled time is different"}],"owner":{"account_id":27663207,"reputation":5,"user_id":21115931,"display_name":"david_23"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695265404,"creation_date":1695265404,"question_id":77146950,"body_markdown":"In my spring boot application, I have written a scheduler to sync some details at the scheduled time.\r\nI have deployed my spring boot application in a Linux server with the Tomcat server. My Linux\r\nserver is in UTC time. \r\n\r\nMy problem is I&#39;ve noticed my scheduler run two times that I scheduled time. I will mention the log details.\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Xz1ts.png\r\n\r\nAs you can see there are two &quot;ClassLink sync Starting.&quot; messages with different trace Ids. \r\nBellow, I&#39;ll mention my scheduler code also.\r\n\r\n    @Scheduled(cron = &quot;0 30 2 * * *&quot;, zone = &quot;UTC&quot;)\r\n    public void scheduleFixedDelayTask2() throws Exception {\r\n        String traceId = controllerUtil.generateTracerId();\r\n        log.info(MessageConstants.API_LOG_INFO,traceId, LocalDateTime.now(), &quot;ClassLink sync Starting.&quot; );\r\n        //classLinkService.fetchClassLinkData(traceId);\r\n        log.info(MessageConstants.API_LOG_INFO,traceId, LocalDateTime.now(), &quot;ClassLink sync finished.&quot; );\r\n    }\r\n\r\n\r\nPlease not that Linux server doesn&#39;t have docker or multiple instances. Just installed tomact server to Linux environment and deploy the soring boot WAR file in tomcat server\r\n\r\nCan you please help me with this ?\r\n","title":"why is the scheduler run in two time in scheduled time","body":"<p>In my spring boot application, I have written a scheduler to sync some details at the scheduled time.\nI have deployed my spring boot application in a Linux server with the Tomcat server. My Linux\nserver is in UTC time.</p>\n<p>My problem is I've noticed my scheduler run two times that I scheduled time. I will mention the log details.</p>\n<p><a href=\"https://i.stack.imgur.com/Xz1ts.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>As you can see there are two &quot;ClassLink sync Starting.&quot; messages with different trace Ids.\nBellow, I'll mention my scheduler code also.</p>\n<pre><code>@Scheduled(cron = &quot;0 30 2 * * *&quot;, zone = &quot;UTC&quot;)\npublic void scheduleFixedDelayTask2() throws Exception {\n    String traceId = controllerUtil.generateTracerId();\n    log.info(MessageConstants.API_LOG_INFO,traceId, LocalDateTime.now(), &quot;ClassLink sync Starting.&quot; );\n    //classLinkService.fetchClassLinkData(traceId);\n    log.info(MessageConstants.API_LOG_INFO,traceId, LocalDateTime.now(), &quot;ClassLink sync finished.&quot; );\n}\n</code></pre>\n<p>Please not that Linux server doesn't have docker or multiple instances. Just installed tomact server to Linux environment and deploy the soring boot WAR file in tomcat server</p>\n<p>Can you please help me with this ?</p>\n"},{"tags":["java","maven","docker"],"comments":[{"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1544355593,"post_id":53691781,"comment_id":94239516,"body_markdown":"I have not used this personally, but maybe Jib can help: https://github.com/GoogleContainerTools/jib","body":"I have not used this personally, but maybe Jib can help: <a href=\"https://github.com/GoogleContainerTools/jib\" rel=\"nofollow noreferrer\">github.com/GoogleContainerTools/jib</a>"},{"owner":{"account_id":161943,"reputation":22096,"user_id":383087,"accept_rate":89,"display_name":"Evgeni Dimitrov"},"score":0,"creation_date":1544355708,"post_id":53691781,"comment_id":94239547,"body_markdown":"Take a look at https://spring.io/blog/2018/11/08/spring-boot-in-a-container It&#39;s for Spring Boot, but you could use the same approach for every maven project. Basically you have to create your Docker file with multiple layers, so during the build Docker can cache the layers that are not changed.","body":"Take a look at <a href=\"https://spring.io/blog/2018/11/08/spring-boot-in-a-container\" rel=\"nofollow noreferrer\">spring.io/blog/2018/11/08/spring-boot-in-a-container</a> It&#39;s for Spring Boot, but you could use the same approach for every maven project. Basically you have to create your Docker file with multiple layers, so during the build Docker can cache the layers that are not changed."},{"owner":{"account_id":12601401,"reputation":13828,"user_id":9164010,"display_name":"ErikMD"},"score":0,"creation_date":1544456878,"post_id":53691781,"comment_id":94272591,"body_markdown":"in your edited question you introduce a command `COPY ./.m2 /root/.m2` similar to @MyTwoCents&#39;s suggestion (which could thus be viewed as an alternative to the standard solution of doing `RUN mvn dependency:go-offline -B`, even if `COPY ./.m2 /root/.m2` is less portable as it requires having maven on your host), but I am unsure this could address your main question about the ~200MB *upload* related to the push of a *fat jar* cf. my other [comment](https://stackoverflow.com/questions/53691781/how-to-cache-maven-dependencies-in-docker/#comment94269471_53694920)","body":"in your edited question you introduce a command <code>COPY .&#47;.m2 &#47;root&#47;.m2</code> similar to @MyTwoCents&#39;s suggestion (which could thus be viewed as an alternative to the standard solution of doing <code>RUN mvn dependency:go-offline -B</code>, even if <code>COPY .&#47;.m2 &#47;root&#47;.m2</code> is less portable as it requires having maven on your host), but I am unsure this could address your main question about the ~200MB <i>upload</i> related to the push of a <i>fat jar</i> cf. my other <a href=\"https://stackoverflow.com/questions/53691781/how-to-cache-maven-dependencies-in-docker/#comment94269471_53694920\">comment</a>"},{"owner":{"account_id":183306,"reputation":9428,"user_id":418599,"accept_rate":52,"display_name":"Antonio Petricca"},"score":0,"creation_date":1644502632,"post_id":53691781,"comment_id":125627974,"body_markdown":"Please look at my solution at  https://stackoverflow.com/a/71066133/418599 .","body":"Please look at my solution at  <a href=\"https://stackoverflow.com/a/71066133/418599\">stackoverflow.com/a/71066133/418599</a> ."}],"answers":[{"tags":[],"owner":{"account_id":4454424,"reputation":7384,"user_id":3625215,"accept_rate":47,"display_name":"MyTwoCents"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1544368807,"creation_date":1544358545,"answer_id":53692303,"question_id":53691781,"body_markdown":"In general Dockerfile container build, works in layers and each time you build these layers are available in catch and is used if there are no changes.\r\nIdeally it should have worked same way. \r\n\r\nMaven generally looks for dependencies by default in `.m2` folder located in Home dir of User in Ubuntu `/home/username/`\r\n\r\nIf dependent jars are not available then it downloads those jars to .m2 and uses it.\r\n\r\nNow you can zip and copy this `.m2` folder after 1 successful build and move it inside Docker Container User&#39;s Home directory.\r\n\r\nDo this before you run build command\r\n\r\n**Note:** You might need to replace existing `.m2` folder in docker\r\n\r\n\r\nSo your Docker file would be something like this \r\n\r\n    FROM maven:3.6.0-jdk-8-slim\r\n    \r\n    WORKDIR /app\r\n    \r\n    COPY .m2.zip /home/testuser/\r\n    \r\n    ADD pom.xml /app\r\n    \r\n    RUN mvn verify clean --fail-never\r\n    \r\n    COPY ./src /app/src\r\n    \r\n    RUN mvn package\r\n    ...\r\n\r\n","title":"How to cache maven dependencies in Docker","body":"<p>In general Dockerfile container build, works in layers and each time you build these layers are available in catch and is used if there are no changes.\nIdeally it should have worked same way. </p>\n\n<p>Maven generally looks for dependencies by default in <code>.m2</code> folder located in Home dir of User in Ubuntu <code>/home/username/</code></p>\n\n<p>If dependent jars are not available then it downloads those jars to .m2 and uses it.</p>\n\n<p>Now you can zip and copy this <code>.m2</code> folder after 1 successful build and move it inside Docker Container User's Home directory.</p>\n\n<p>Do this before you run build command</p>\n\n<p><strong>Note:</strong> You might need to replace existing <code>.m2</code> folder in docker</p>\n\n<p>So your Docker file would be something like this </p>\n\n<pre><code>FROM maven:3.6.0-jdk-8-slim\n\nWORKDIR /app\n\nCOPY .m2.zip /home/testuser/\n\nADD pom.xml /app\n\nRUN mvn verify clean --fail-never\n\nCOPY ./src /app/src\n\nRUN mvn package\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12601401,"reputation":13828,"user_id":9164010,"display_name":"ErikMD"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1544459580,"creation_date":1544377053,"answer_id":53694920,"question_id":53691781,"body_markdown":"If I understand correctly what you&#39;d like to achieve, the problem is to avoid creating a **fat jar** with all Maven dependencies at each Docker build (to alleviate the size of the Docker layers to be pushed after a rebuild). \r\n\r\nIf yes, you may be interested in the [*Spring Boot Thin Launcher*](https://github.com/dsyer/spring-boot-thin-launcher), which is also applicable for non-Spring-Boot projects. Some comprehensive documentation is available in the `README.md` of the corresponding GitHub repo:\r\nhttps://github.com/dsyer/spring-boot-thin-launcher#readme\r\n\r\nTo sum up, it should suffice to add the following plugin declaration in your `pom.xml`: \r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;!--&lt;version&gt;${spring-boot.version}&lt;/version&gt;--&gt;\r\n                &lt;dependencies&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;org.springframework.boot.experimental&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;spring-boot-thin-layout&lt;/artifactId&gt;\r\n                        &lt;version&gt;1.0.19.RELEASE&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                &lt;/dependencies&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\nIdeally, this solution should be combined with a standard `Dockerfile` setup to benefit from Docker&#39;s cache (see below for a typical example).\r\n\r\n## Leverage Docker&#39;s cache mechanism for a Java/Maven project\r\n\r\nThe archetype of a `Dockerfile` that avoids re-downloading all Maven dependencies at each build if only source code files (`src/*`) have been touched is given in the following reference:  \r\nhttps://whitfin.io/speeding-up-maven-docker-builds/\r\n\r\nTo be more precise, the proposed `Dockerfile` is as follows:\r\n\r\n    # our base build image\r\n    FROM maven:3.5-jdk-8 as maven\r\n    \r\n    WORKDIR /app\r\n    \r\n    # copy the Project Object Model file\r\n    COPY ./pom.xml ./pom.xml\r\n    \r\n    # fetch all dependencies\r\n    RUN mvn dependency:go-offline -B\r\n    \r\n    # copy your other files\r\n    COPY ./src ./src\r\n    \r\n    # build for release\r\n    # NOTE: my-project-* should be replaced with the proper prefix\r\n    RUN mvn package &amp;&amp; cp target/my-project-*.jar app.jar\r\n    \r\n    \r\n    # smaller, final base image\r\n    FROM openjdk:8u171-jre-alpine\r\n    # OPTIONAL: copy dependencies so the thin jar won&#39;t need to re-download them\r\n    # COPY --from=maven /root/.m2 /root/.m2\r\n\r\n    # set deployment directory\r\n    WORKDIR /app\r\n    \r\n    # copy over the built artifact from the maven image\r\n    COPY --from=maven /app/app.jar ./app.jar\r\n    \r\n    # set the startup command to run your binary\r\n    CMD [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/app.jar&quot;]\r\n\r\nNote that it relies on the so-called [**multi-stage build feature**](https://docs.docker.com/develop/develop-images/multistage-build/) of Docker (presence of two `FROM` directives), implying the final image will be much smaller than the `maven` base image itself.  \r\n(If you are not interested in that feature during the development phase, you can remove the lines `FROM openjdk:8u171-jre-alpine` and `COPY --from=maven /app/app.jar ./app.jar`.)\r\n\r\nIn this approach, the Maven dependencies are fetched with `RUN mvn dependency:go-offline -B` **before** the line `COPY ./src ./src` (to benefit from Docker&#39;s cache).\r\n\r\nNote however that the `dependency:go-offline` standard goal is not &quot;perfect&quot; as a few dynamic dependencies/plugins may still trigger some re-downloading at the `mvn package` step.\r\nIf this is an issue for you (e.g. if at some point you&#39;d really want to work offline), you could take at look at that other [SO answer](https://stackoverflow.com/a/52942964/9164010) that suggests using a dedicated plugin that provides the `de.qaware.maven:go-offline-maven-plugin:resolve-dependencies` goal.","title":"How to cache maven dependencies in Docker","body":"<p>If I understand correctly what you'd like to achieve, the problem is to avoid creating a <strong>fat jar</strong> with all Maven dependencies at each Docker build (to alleviate the size of the Docker layers to be pushed after a rebuild). </p>\n\n<p>If yes, you may be interested in the <a href=\"https://github.com/dsyer/spring-boot-thin-launcher\" rel=\"noreferrer\"><em>Spring Boot Thin Launcher</em></a>, which is also applicable for non-Spring-Boot projects. Some comprehensive documentation is available in the <code>README.md</code> of the corresponding GitHub repo:\n<a href=\"https://github.com/dsyer/spring-boot-thin-launcher#readme\" rel=\"noreferrer\">https://github.com/dsyer/spring-boot-thin-launcher#readme</a></p>\n\n<p>To sum up, it should suffice to add the following plugin declaration in your <code>pom.xml</code>: </p>\n\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;!--&lt;version&gt;${spring-boot.version}&lt;/version&gt;--&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.springframework.boot.experimental&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-thin-layout&lt;/artifactId&gt;\n                    &lt;version&gt;1.0.19.RELEASE&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>Ideally, this solution should be combined with a standard <code>Dockerfile</code> setup to benefit from Docker's cache (see below for a typical example).</p>\n\n<h2>Leverage Docker's cache mechanism for a Java/Maven project</h2>\n\n<p>The archetype of a <code>Dockerfile</code> that avoids re-downloading all Maven dependencies at each build if only source code files (<code>src/*</code>) have been touched is given in the following reference:<br>\n<a href=\"https://whitfin.io/speeding-up-maven-docker-builds/\" rel=\"noreferrer\">https://whitfin.io/speeding-up-maven-docker-builds/</a></p>\n\n<p>To be more precise, the proposed <code>Dockerfile</code> is as follows:</p>\n\n<pre><code># our base build image\nFROM maven:3.5-jdk-8 as maven\n\nWORKDIR /app\n\n# copy the Project Object Model file\nCOPY ./pom.xml ./pom.xml\n\n# fetch all dependencies\nRUN mvn dependency:go-offline -B\n\n# copy your other files\nCOPY ./src ./src\n\n# build for release\n# NOTE: my-project-* should be replaced with the proper prefix\nRUN mvn package &amp;&amp; cp target/my-project-*.jar app.jar\n\n\n# smaller, final base image\nFROM openjdk:8u171-jre-alpine\n# OPTIONAL: copy dependencies so the thin jar won't need to re-download them\n# COPY --from=maven /root/.m2 /root/.m2\n\n# set deployment directory\nWORKDIR /app\n\n# copy over the built artifact from the maven image\nCOPY --from=maven /app/app.jar ./app.jar\n\n# set the startup command to run your binary\nCMD [\"java\", \"-jar\", \"/app/app.jar\"]\n</code></pre>\n\n<p>Note that it relies on the so-called <a href=\"https://docs.docker.com/develop/develop-images/multistage-build/\" rel=\"noreferrer\"><strong>multi-stage build feature</strong></a> of Docker (presence of two <code>FROM</code> directives), implying the final image will be much smaller than the <code>maven</code> base image itself.<br>\n(If you are not interested in that feature during the development phase, you can remove the lines <code>FROM openjdk:8u171-jre-alpine</code> and <code>COPY --from=maven /app/app.jar ./app.jar</code>.)</p>\n\n<p>In this approach, the Maven dependencies are fetched with <code>RUN mvn dependency:go-offline -B</code> <strong>before</strong> the line <code>COPY ./src ./src</code> (to benefit from Docker's cache).</p>\n\n<p>Note however that the <code>dependency:go-offline</code> standard goal is not \"perfect\" as a few dynamic dependencies/plugins may still trigger some re-downloading at the <code>mvn package</code> step.\nIf this is an issue for you (e.g. if at some point you'd really want to work offline), you could take at look at that other <a href=\"https://stackoverflow.com/a/52942964/9164010\">SO answer</a> that suggests using a dedicated plugin that provides the <code>de.qaware.maven:go-offline-maven-plugin:resolve-dependencies</code> goal.</p>\n"},{"tags":[],"owner":{"account_id":4034768,"reputation":331,"user_id":3319644,"display_name":"Daniel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1576593298,"creation_date":1576593298,"answer_id":59376473,"question_id":53691781,"body_markdown":"The [documentation of the official Maven Docker images](https://hub.docker.com/_/maven) also points out different ways to achieve better caching of dependencies.\r\n\r\nBasically, they recommend to either mount the local maven repository as a volume and use it across Docker images or use a special local repository (/usr/share/maven/ref/) the contents of which will be copied on container startup. ","title":"How to cache maven dependencies in Docker","body":"<p>The <a href=\"https://hub.docker.com/_/maven\" rel=\"nofollow noreferrer\">documentation of the official Maven Docker images</a> also points out different ways to achieve better caching of dependencies.</p>\n\n<p>Basically, they recommend to either mount the local maven repository as a volume and use it across Docker images or use a special local repository (/usr/share/maven/ref/) the contents of which will be copied on container startup. </p>\n"},{"tags":[],"owner":{"account_id":2872454,"reputation":431,"user_id":2465467,"display_name":"Ashim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695264856,"creation_date":1695264856,"answer_id":77146927,"question_id":53691781,"body_markdown":"Docker has a RUN cache feature which you can use to further cache the maven&#39;s .m2 directory. Here&#39;s a sample Dockerfile for a Spring Boot application with Maven.\r\n\r\n    FROM eclipse-temurin:17-jdk-alpine AS build\r\n    WORKDIR /workspace/app\r\n    COPY mvnw .\r\n    COPY .mvn .mvn\r\n    COPY pom.xml .\r\n    RUN \\\r\n        --mount=type=cache,target=/root/.m2 \\\r\n        ./mvnw dependency:resolve-plugins dependency:resolve\r\n    COPY src src\r\n    RUN \\\r\n        --mount=type=cache,target=/root/.m2 \\\r\n        ./mvnw package\r\n    RUN mkdir -p target/dependency &amp;&amp; (cd target/dependency; jar -xf ../*.jar)\r\n    \r\n\r\n    FROM eclipse-temurin:17-jdk-alpine\r\n    VOLUME /tmp\r\n    ARG DEPENDENCY=/workspace/app/target/dependency\r\n    COPY --from=build ${DEPENDENCY}/BOOT-INF/lib /app/lib\r\n    COPY --from=build ${DEPENDENCY}/META-INF /app/META-INF\r\n    COPY --from=build ${DEPENDENCY}/BOOT-INF/classes /app\r\n    ENTRYPOINT [&quot;java&quot;,&quot;-cp&quot;,&quot;app:app/lib/*&quot;,&quot;com.example.SpringApplication&quot;]\r\n\r\n","title":"How to cache maven dependencies in Docker","body":"<p>Docker has a RUN cache feature which you can use to further cache the maven's .m2 directory. Here's a sample Dockerfile for a Spring Boot application with Maven.</p>\n<pre><code>FROM eclipse-temurin:17-jdk-alpine AS build\nWORKDIR /workspace/app\nCOPY mvnw .\nCOPY .mvn .mvn\nCOPY pom.xml .\nRUN \\\n    --mount=type=cache,target=/root/.m2 \\\n    ./mvnw dependency:resolve-plugins dependency:resolve\nCOPY src src\nRUN \\\n    --mount=type=cache,target=/root/.m2 \\\n    ./mvnw package\nRUN mkdir -p target/dependency &amp;&amp; (cd target/dependency; jar -xf ../*.jar)\n\n\nFROM eclipse-temurin:17-jdk-alpine\nVOLUME /tmp\nARG DEPENDENCY=/workspace/app/target/dependency\nCOPY --from=build ${DEPENDENCY}/BOOT-INF/lib /app/lib\nCOPY --from=build ${DEPENDENCY}/META-INF /app/META-INF\nCOPY --from=build ${DEPENDENCY}/BOOT-INF/classes /app\nENTRYPOINT [&quot;java&quot;,&quot;-cp&quot;,&quot;app:app/lib/*&quot;,&quot;com.example.SpringApplication&quot;]\n</code></pre>\n"}],"owner":{"account_id":9331535,"reputation":383,"user_id":6927126,"accept_rate":50,"display_name":"L. Don"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17600,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":4,"score":14,"last_activity_date":1695264856,"creation_date":1544354464,"question_id":53691781,"body_markdown":"I&#39;m working on a project with ~200MB dependencies and i&#39;d like to avoid useless uploads due to my limited bandwidth. \r\n\r\nWhen I push my Dockerfile (i&#39;ll attach it in a moment), I always have a ~200MB upload even if I didn&#39;t touch the pom.xml:\r\n\r\n    FROM maven:3.6.0-jdk-8-slim\r\n    \r\n    WORKDIR /app\r\n    \r\n    ADD pom.xml /app\r\n    \r\n    RUN mvn verify clean --fail-never\r\n   \r\n    COPY ./src /app/src\r\n    \r\n    RUN mvn package\r\n    \r\n    ENV CONFIG_FOLDER=/app/config\r\n    ENV DATA_FOLDER=/app/data\r\n    ENV GOLDENS_FOLDER=/app/goldens\r\n    ENV DEBUG_FOLDER=/app/debug\r\n    \r\n    WORKDIR target\r\n    \r\n    CMD [&quot;java&quot;,&quot;-jar&quot;,&quot;-Dlogs=/app/logs&quot;, &quot;myProject.jar&quot;]\r\n\r\nThis Dockerfile should make a 200MB fatJAR including all the dependencies, that&#39;s why the ~200MB upload that occurs everytime. What i would like to achieve is building a Layer with all the dependencies and &quot;tell&quot; to the packaging phase to not include the dependencies JARs into the fatJAR but to search for them inside a given directory.\r\n\r\nI was wondering to build a script that executes `mvn dependency:copy-dependencies` before the building process and then copying the directory to the container; then building a &quot;non-fat&quot;JAR that has all those dependencies only linked and not actually copied into it.\r\n\r\nIs this possible?\r\n\r\n**EDIT:** \r\nI discovered that the Maven Local Repository of the container is located under `/root/.m2`. So I ended making a very simple script like this:\r\n\r\n*BuildDocker.sh*\r\n\r\n    mvn verify -clean --fail-never\r\n    mv ~/.m2 ~/git/myProjectRepo/.m2\r\n\r\n    sudo docker build -t myName/myProject:&quot;$1&quot;\r\n\r\nAnd edited *Dockerfile* like:\r\n\r\n    # Use an official Python runtime as a parent image\r\n    FROM maven:3.6.0-jdk-8-slim\r\n    \r\n    # Copy my Mavne Local Repository into the container thus creating a new layer\r\n    COPY ./.m2 /root/.m2\r\n\r\n    # Set the working directory to /app\r\n    WORKDIR /app\r\n\r\n    # Copy the pom.xml\r\n    ADD pom.xml /app\r\n\r\n    # Resolve and Download all dependencies: this will be done only if the pom.xml has any changes\r\n    RUN mvn verify clean --fail-never\r\n\r\n    # Copy source code and configs \r\n    COPY ./src /app/src\r\n\r\n    # create a ThinJAR\r\n    RUN mvn package\r\n\r\n\r\n    # Run the jar\r\n    ...\r\n\r\nAfter the building process i stated that `/root/.m2` has all the directories I but as soon as i launch the JAR i get:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/log4j/Priority\r\n    \tat myProject.ThreeMeans.calculate(ThreeMeans.java:17)\r\n    \tat myProject.ClusteringStartup.main(ClusteringStartup.java:7)\r\n    Caused by: java.lang.ClassNotFoundException: org.apache.log4j.Priority\r\n    \tat java.net.URLClassLoader.findClass(URLClassLoader.java:382)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n    \t... 2 more\r\n\r\nMaybe i shouldn&#39;t run it through `java -jar`?","title":"How to cache maven dependencies in Docker","body":"<p>I'm working on a project with ~200MB dependencies and i'd like to avoid useless uploads due to my limited bandwidth. </p>\n\n<p>When I push my Dockerfile (i'll attach it in a moment), I always have a ~200MB upload even if I didn't touch the pom.xml:</p>\n\n<pre><code>FROM maven:3.6.0-jdk-8-slim\n\nWORKDIR /app\n\nADD pom.xml /app\n\nRUN mvn verify clean --fail-never\n\nCOPY ./src /app/src\n\nRUN mvn package\n\nENV CONFIG_FOLDER=/app/config\nENV DATA_FOLDER=/app/data\nENV GOLDENS_FOLDER=/app/goldens\nENV DEBUG_FOLDER=/app/debug\n\nWORKDIR target\n\nCMD [\"java\",\"-jar\",\"-Dlogs=/app/logs\", \"myProject.jar\"]\n</code></pre>\n\n<p>This Dockerfile should make a 200MB fatJAR including all the dependencies, that's why the ~200MB upload that occurs everytime. What i would like to achieve is building a Layer with all the dependencies and \"tell\" to the packaging phase to not include the dependencies JARs into the fatJAR but to search for them inside a given directory.</p>\n\n<p>I was wondering to build a script that executes <code>mvn dependency:copy-dependencies</code> before the building process and then copying the directory to the container; then building a \"non-fat\"JAR that has all those dependencies only linked and not actually copied into it.</p>\n\n<p>Is this possible?</p>\n\n<p><strong>EDIT:</strong> \nI discovered that the Maven Local Repository of the container is located under <code>/root/.m2</code>. So I ended making a very simple script like this:</p>\n\n<p><em>BuildDocker.sh</em></p>\n\n<pre><code>mvn verify -clean --fail-never\nmv ~/.m2 ~/git/myProjectRepo/.m2\n\nsudo docker build -t myName/myProject:\"$1\"\n</code></pre>\n\n<p>And edited <em>Dockerfile</em> like:</p>\n\n<pre><code># Use an official Python runtime as a parent image\nFROM maven:3.6.0-jdk-8-slim\n\n# Copy my Mavne Local Repository into the container thus creating a new layer\nCOPY ./.m2 /root/.m2\n\n# Set the working directory to /app\nWORKDIR /app\n\n# Copy the pom.xml\nADD pom.xml /app\n\n# Resolve and Download all dependencies: this will be done only if the pom.xml has any changes\nRUN mvn verify clean --fail-never\n\n# Copy source code and configs \nCOPY ./src /app/src\n\n# create a ThinJAR\nRUN mvn package\n\n\n# Run the jar\n...\n</code></pre>\n\n<p>After the building process i stated that <code>/root/.m2</code> has all the directories I but as soon as i launch the JAR i get:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError: org/apache/log4j/Priority\n    at myProject.ThreeMeans.calculate(ThreeMeans.java:17)\n    at myProject.ClusteringStartup.main(ClusteringStartup.java:7)\nCaused by: java.lang.ClassNotFoundException: org.apache.log4j.Priority\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    ... 2 more\n</code></pre>\n\n<p>Maybe i shouldn't run it through <code>java -jar</code>?</p>\n"},{"tags":["java","image","transparency","gif","opacity"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1695252981,"post_id":77146395,"comment_id":136001200,"body_markdown":"Seems to work fine for me","body":"Seems to work fine for me"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1695255253,"post_id":77146395,"comment_id":136001389,"body_markdown":"When I use Paint I get the same result as you. I tried to use the Color picker for both colors. However, the alpha value is not displayed, so I don&#39;t know what Paint is reading. I did try creating a simple GUI using a JLabel and the StretchIcon (from my blog) to display each image. Both showed as transparent in the frame.","body":"When I use Paint I get the same result as you. I tried to use the Color picker for both colors. However, the alpha value is not displayed, so I don&#39;t know what Paint is reading. I did try creating a simple GUI using a JLabel and the StretchIcon (from my blog) to display each image. Both showed as transparent in the frame."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1695255910,"post_id":77146395,"comment_id":136001444,"body_markdown":"Also, noticed that in Paint the &quot;transparent&quot; color for the png the color is (255, 255, 255) but for the gif it is (0, 0, 0). Don&#39;t know what it means, just an observation.","body":"Also, noticed that in Paint the &quot;transparent&quot; color for the png the color is (255, 255, 255) but for the gif it is (0, 0, 0). Don&#39;t know what it means, just an observation."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695259816,"post_id":77146395,"comment_id":136001757,"body_markdown":"@MadProgrammer Wow, could you describe your setup? I am Windows 11. Are you using something else? Do you think that this may be a bug with Java Swing?","body":"@MadProgrammer Wow, could you describe your setup? I am Windows 11. Are you using something else? Do you think that this may be a bug with Java Swing?"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695259897,"post_id":77146395,"comment_id":136001763,"body_markdown":"@camickr Thanks for checking. Glad to hear that you are able to recreate this. I don&#39;t understand it either. As a side question, could you tell me what your set up is? Are you Windows 11? Linux? Based on MadProgrammer&#39;s response, it sounds like this might be set up specific.","body":"@camickr Thanks for checking. Glad to hear that you are able to recreate this. I don&#39;t understand it either. As a side question, could you tell me what your set up is? Are you Windows 11? Linux? Based on MadProgrammer&#39;s response, it sounds like this might be set up specific."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695259976,"post_id":77146395,"comment_id":136001772,"body_markdown":"@camickr As a side note, you can get the alpha value by calling the Color::getAlpha \\method.","body":"@camickr As a side note, you can get the alpha value by calling the Color::getAlpha \\method."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695260172,"post_id":77146395,"comment_id":136001779,"body_markdown":"@camickr Using 0, 0, 0, 0 for the transparent didn&#39;t change anything, the color still came out Black","body":"@camickr Using 0, 0, 0, 0 for the transparent didn&#39;t change anything, the color still came out Black"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1695261480,"post_id":77146395,"comment_id":136001876,"body_markdown":"I&quot;m Windows 11. MadProgrammer is Mac.","body":"I&quot;m Windows 11. MadProgrammer is Mac."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695261531,"post_id":77146395,"comment_id":136001881,"body_markdown":"@camickr Interesting! Do you think this is worth submitting a bug report for?","body":"@camickr Interesting! Do you think this is worth submitting a bug report for?"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695261886,"post_id":77146395,"comment_id":136001907,"body_markdown":"Though, I should probably bounty the question first. If the bounty doesn&#39;t give an answer, then I will do it.","body":"Though, I should probably bounty the question first. If the bounty doesn&#39;t give an answer, then I will do it."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1695263008,"post_id":77146395,"comment_id":136002016,"body_markdown":"Playing more with paint and I found that it has a &quot;background transparency&quot; tool. When I used the tool the area I painted over also became black. I then retested the image in my GUi and it indeed did show as transparent. So the black you see in Paint appears to be the way it displays a transparent section since the background by default is white. Look in the &quot;Image&quot; section of paint and click on the drop down arrow of the rectangle in the left area of the image section.","body":"Playing more with paint and I found that it has a &quot;background transparency&quot; tool. When I used the tool the area I painted over also became black. I then retested the image in my GUi and it indeed did show as transparent. So the black you see in Paint appears to be the way it displays a transparent section since the background by default is white. Look in the &quot;Image&quot; section of paint and click on the drop down arrow of the rectangle in the left area of the image section."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1695263618,"post_id":77146395,"comment_id":136002075,"body_markdown":"I also tried using the &quot;Open With&quot; function of FileExplorer and opened the gif image in the &quot;Snipping Tool&quot; and I see a white background in the center of the image which matches the background of the image tool. So I don&#39;t think the is an issue with the image. Note, it would have been nice to work with a larger image in the Paint program to test the &quot;background transparency&quot; tool.","body":"I also tried using the &quot;Open With&quot; function of FileExplorer and opened the gif image in the &quot;Snipping Tool&quot; and I see a white background in the center of the image which matches the background of the image tool. So I don&#39;t think the is an issue with the image. Note, it would have been nice to work with a larger image in the Paint program to test the &quot;background transparency&quot; tool."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695264094,"post_id":77146395,"comment_id":136002116,"body_markdown":"@camickr Thank you for taking the time to test this out! I guess for me, the thing that led me to believe it was not working was because of IrfanView. I have uploaded another image that is public gif from online (hope I don&#39;t get in trouble for using it). When I open it up in IrfanView, it shows purple as the background as expected. I do not get that for my image. I followed your cue, and started checking other image viewers, and all others worked out like you said, so I think you are actually correct. I tried snipping tool, Paint, Photos, Firefox, and LibreOffice Draw. All worked.","body":"@camickr Thank you for taking the time to test this out! I guess for me, the thing that led me to believe it was not working was because of IrfanView. I have uploaded another image that is public gif from online (hope I don&#39;t get in trouble for using it). When I open it up in IrfanView, it shows purple as the background as expected. I do not get that for my image. I followed your cue, and started checking other image viewers, and all others worked out like you said, so I think you are actually correct. I tried snipping tool, Paint, Photos, Firefox, and LibreOffice Draw. All worked."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":1,"creation_date":1695264418,"post_id":77146395,"comment_id":136002134,"body_markdown":"@camickr If you throw your comment into an answer, I&#39;ll accept it. If not, I can do it.","body":"@camickr If you throw your comment into an answer, I&#39;ll accept it. If not, I can do it."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1695265497,"post_id":77146395,"comment_id":136002218,"body_markdown":"@davidalayachew Java 17.0.3.1 on MacOS Ventura 13.5.2","body":"@davidalayachew Java 17.0.3.1 on MacOS Ventura 13.5.2"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695265559,"post_id":77146395,"comment_id":136002232,"body_markdown":"@MadProgrammer Ty vm! Yeah, looks like it is not a bug at all. I am signing up on the IrfanView message boards to see if it is a bug on their side.","body":"@MadProgrammer Ty vm! Yeah, looks like it is not a bug at all. I am signing up on the IrfanView message boards to see if it is a bug on their side."}],"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695264293,"creation_date":1695252465,"question_id":77146395,"body_markdown":"I have code that creates a simple 5x5 array of [`java.awt.Color`][1], and then uses that to create a [`java.awt.image.BufferedImage`][2]. The edges of the array are an opaque color (`alpha = 255`) called `o`, while the center is a transparent color (`alpha = 0`) called `t`.\r\n\r\nFinally, I write the image out to file using [`javax.imageio.ImageIO.write()`][3].\r\n\r\nHere is the code.\r\n\r\n```\r\nimport java.awt.Color;\r\nimport java.awt.image.BufferedImage;\r\nimport java.io.File;\r\nimport javax.imageio.ImageIO;\r\n\r\nclass Irrelevant\r\n{\r\n\r\n   public static void main(String[] args) throws Exception\r\n   {\r\n   \r\n      final Color o = new Color(255, 0, 0, 255); //opaque red\r\n      final Color t = new Color(0, 255, 0, 0);   //transparent green -- clear\r\n   \r\n      final Color[][] pixels = //red edges with (ideally) a clear center\r\n         {\r\n            {o, t, t, t, o},\r\n            {o, t, t, t, o},\r\n            {o, t, t, t, o},\r\n            {o, t, t, t, o},\r\n            {o, t, t, t, o}\r\n         };\r\n   \r\n      BufferedImage image = new BufferedImage(pixels.length, pixels[0].length, BufferedImage.TYPE_INT_ARGB);\r\n   \r\n      for (int y = 0; y &lt; pixels.length; y++)\r\n      {\r\n         for (int x = 0; x &lt; pixels[y].length; x++)\r\n         {\r\n            image.setRGB(x, y, pixels[y][x].getRGB());\r\n         }\r\n      }\r\n   \r\n      ImageIO.write(image, &quot;gif&quot;, new File(&quot;abctest.gif&quot;));\r\n      ImageIO.write(image, &quot;png&quot;, new File(&quot;abctest.png&quot;));\r\n   \r\n   }\r\n\r\n}\r\n```\r\n\r\nHowever, here is the resulting gif. I am showing it with a purple background to show that the image is ***NOT*** transparent in the center, like expected. It is actually black.\r\n\r\nDon&#39;t mind the fuzziness, that&#39;s IrfanView being annoying.\r\n\r\n[![enter image description here][4]][4]\r\n\r\nAnd here is another one in Microsoft Paint. Same gif.\r\n\r\n[![enter image description here][5]][5]\r\n\r\nWhy are they not clear in the center? And I know I set the `alpha` correctly because remember, I also saved it as a png as well as a gif. When I save it as a png, it works as expected. Here are screenshots for the png.\r\n\r\n[![enter image description here][6]][6]\r\n\r\n[![enter image description here][7]][7]\r\n\r\nCan someone help point me in the right direction?\r\n\r\nEDIT - Here is an example image that I did not make.\r\n\r\n[![enter image description here][8]][8]\r\n\r\nIn IrfanView, it looks like this.\r\n\r\n[![enter image description here][9]][9]\r\n\r\nIn this gif, the purple shows up correctly, which is what threw me off.\r\n\r\nBut thanks to the help of @camickr, I am starting to think that it is actually something that only happens on IrfanView because all other image viewers I looked at it through worked. That includes, Photos, Snipping Tool, LibreOffice Draw, and Firefox. All showed a white (or background specific color) when rendering, implying that it is actually transparent.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/Color.html\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/image/BufferedImage.html\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/imageio/ImageIO.html#write(java.awt.image.RenderedImage,java.lang.String,java.io.File)\r\n  [4]: https://i.stack.imgur.com/MjfDC.png\r\n  [5]: https://i.stack.imgur.com/L0gnQ.png\r\n  [6]: https://i.stack.imgur.com/Ve5bd.png\r\n  [7]: https://i.stack.imgur.com/kq0Oq.png\r\n  [8]: https://i.stack.imgur.com/Quk0b.gif\r\n  [9]: https://i.stack.imgur.com/rB3gU.png","title":"How to create transparent pixels in a gif for BufferedImage, then save to a GIF file?","body":"<p>I have code that creates a simple 5x5 array of <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/Color.html\" rel=\"nofollow noreferrer\"><code>java.awt.Color</code></a>, and then uses that to create a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/image/BufferedImage.html\" rel=\"nofollow noreferrer\"><code>java.awt.image.BufferedImage</code></a>. The edges of the array are an opaque color (<code>alpha = 255</code>) called <code>o</code>, while the center is a transparent color (<code>alpha = 0</code>) called <code>t</code>.</p>\n<p>Finally, I write the image out to file using <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/imageio/ImageIO.html#write(java.awt.image.RenderedImage,java.lang.String,java.io.File)\" rel=\"nofollow noreferrer\"><code>javax.imageio.ImageIO.write()</code></a>.</p>\n<p>Here is the code.</p>\n<pre><code>import java.awt.Color;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport javax.imageio.ImageIO;\n\nclass Irrelevant\n{\n\n   public static void main(String[] args) throws Exception\n   {\n   \n      final Color o = new Color(255, 0, 0, 255); //opaque red\n      final Color t = new Color(0, 255, 0, 0);   //transparent green -- clear\n   \n      final Color[][] pixels = //red edges with (ideally) a clear center\n         {\n            {o, t, t, t, o},\n            {o, t, t, t, o},\n            {o, t, t, t, o},\n            {o, t, t, t, o},\n            {o, t, t, t, o}\n         };\n   \n      BufferedImage image = new BufferedImage(pixels.length, pixels[0].length, BufferedImage.TYPE_INT_ARGB);\n   \n      for (int y = 0; y &lt; pixels.length; y++)\n      {\n         for (int x = 0; x &lt; pixels[y].length; x++)\n         {\n            image.setRGB(x, y, pixels[y][x].getRGB());\n         }\n      }\n   \n      ImageIO.write(image, &quot;gif&quot;, new File(&quot;abctest.gif&quot;));\n      ImageIO.write(image, &quot;png&quot;, new File(&quot;abctest.png&quot;));\n   \n   }\n\n}\n</code></pre>\n<p>However, here is the resulting gif. I am showing it with a purple background to show that the image is <em><strong>NOT</strong></em> transparent in the center, like expected. It is actually black.</p>\n<p>Don't mind the fuzziness, that's IrfanView being annoying.</p>\n<p><a href=\"https://i.stack.imgur.com/MjfDC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MjfDC.png\" alt=\"enter image description here\" /></a></p>\n<p>And here is another one in Microsoft Paint. Same gif.</p>\n<p><a href=\"https://i.stack.imgur.com/L0gnQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/L0gnQ.png\" alt=\"enter image description here\" /></a></p>\n<p>Why are they not clear in the center? And I know I set the <code>alpha</code> correctly because remember, I also saved it as a png as well as a gif. When I save it as a png, it works as expected. Here are screenshots for the png.</p>\n<p><a href=\"https://i.stack.imgur.com/Ve5bd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ve5bd.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/kq0Oq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kq0Oq.png\" alt=\"enter image description here\" /></a></p>\n<p>Can someone help point me in the right direction?</p>\n<p>EDIT - Here is an example image that I did not make.</p>\n<p><a href=\"https://i.stack.imgur.com/Quk0b.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Quk0b.gif\" alt=\"enter image description here\" /></a></p>\n<p>In IrfanView, it looks like this.</p>\n<p><a href=\"https://i.stack.imgur.com/rB3gU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rB3gU.png\" alt=\"enter image description here\" /></a></p>\n<p>In this gif, the purple shows up correctly, which is what threw me off.</p>\n<p>But thanks to the help of @camickr, I am starting to think that it is actually something that only happens on IrfanView because all other image viewers I looked at it through worked. That includes, Photos, Snipping Tool, LibreOffice Draw, and Firefox. All showed a white (or background specific color) when rendering, implying that it is actually transparent.</p>\n"},{"tags":["java","c++","friend","accessor"],"answers":[{"tags":[],"owner":{"account_id":6875,"reputation":412,"user_id":11701,"display_name":"NR."},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1378396667,"creation_date":1223465975,"answer_id":182285,"question_id":182278,"body_markdown":"Not using a keyword or so.\r\n\r\nYou could &quot;cheat&quot; using reflection etc., but I wouldn&#39;t recommend &quot;cheating&quot;.","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>Not using a keyword or so.</p>\n\n<p>You could \"cheat\" using reflection etc., but I wouldn't recommend \"cheating\".</p>\n"},{"tags":[],"owner":{"account_id":12738,"reputation":5042,"user_id":25234,"accept_rate":83,"display_name":"Black"},"down_vote_count":6,"up_vote_count":14,"is_accepted":false,"score":8,"last_activity_date":1223466505,"creation_date":1223466505,"answer_id":182320,"question_id":182278,"body_markdown":"As far as I know, it is not possible.\r\n\r\nMaybe, You could give us some more details about Your design. Questions like these are likely the result of design flaws.\r\n\r\nJust consider\r\n  \r\n  - Why are those classes in different packages, if they are so closely related?\r\n  - Has A to access private members of B or should the operation be moved to class B and triggered by A?\r\n  - Is this really calling or is event-handling better?\r\n","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>As far as I know, it is not possible.</p>\n\n<p>Maybe, You could give us some more details about Your design. Questions like these are likely the result of design flaws.</p>\n\n<p>Just consider</p>\n\n<ul>\n<li>Why are those classes in different packages, if they are so closely related?</li>\n<li>Has A to access private members of B or should the operation be moved to class B and triggered by A?</li>\n<li>Is this really calling or is event-handling better?</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":10732,"reputation":54820,"user_id":20400,"accept_rate":72,"display_name":"Omar Kooheji"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1223466537,"creation_date":1223466537,"answer_id":182324,"question_id":182278,"body_markdown":"If you want to access protected methods you could create a subclass of the class you want to use that exposes the methods you want to use as public (or internal to the namespace to be safer), and have an instance of that class in your class (use it as a proxy).\r\n\r\nAs far as private methods are concerned (I think) you are out of luck. ","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>If you want to access protected methods you could create a subclass of the class you want to use that exposes the methods you want to use as public (or internal to the namespace to be safer), and have an instance of that class in your class (use it as a proxy).</p>\n\n<p>As far as private methods are concerned (I think) you are out of luck. </p>\n"},{"tags":[],"owner":{"account_id":2277,"reputation":6269,"user_id":3150,"accept_rate":80,"display_name":"David G"},"down_vote_count":3,"up_vote_count":66,"is_accepted":false,"score":63,"last_activity_date":1223469453,"creation_date":1223467254,"answer_id":182370,"question_id":182278,"body_markdown":"The designers of Java explicitly rejected the idea of friend as it works in C++. You put your &quot;friends&quot; in the same package.  Private, protected, and packaged security is enforced as part of the language design.  \r\n  \r\nJames Gosling wanted Java to be C++ without the mistakes. I believe he felt that friend was a mistake because it violates OOP principles. Packages provide a reasonable way to organize components without being too purist about OOP.\r\n  \r\nNR pointed out that you could cheat using reflection, but even that only works if you aren&#39;t using the SecurityManager. If you turn on Java standard security, you won&#39;t be able to cheat with reflection unless you write security policy to specifically allow it.\r\n\r\n","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>The designers of Java explicitly rejected the idea of friend as it works in C++. You put your \"friends\" in the same package.  Private, protected, and packaged security is enforced as part of the language design.  </p>\n\n<p>James Gosling wanted Java to be C++ without the mistakes. I believe he felt that friend was a mistake because it violates OOP principles. Packages provide a reasonable way to organize components without being too purist about OOP.</p>\n\n<p>NR pointed out that you could cheat using reflection, but even that only works if you aren't using the SecurityManager. If you turn on Java standard security, you won't be able to cheat with reflection unless you write security policy to specifically allow it.</p>\n"},{"tags":[],"owner":{"account_id":712,"reputation":6325,"user_id":931,"accept_rate":59,"display_name":"Ran Biron"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1223477041,"creation_date":1223477041,"answer_id":183127,"question_id":182278,"body_markdown":"I once saw a reflection based solution that did &quot;friend checking&quot; at runtime using reflection and checking the call stack to see if the class calling the method was permitted to do so. Being a runtime check, it has the obvious drawback.","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>I once saw a reflection based solution that did \"friend checking\" at runtime using reflection and checking the call stack to see if the class calling the method was permitted to do so. Being a runtime check, it has the obvious drawback.</p>\n"},{"tags":[],"owner":{"account_id":2842,"reputation":31004,"user_id":4023,"accept_rate":89,"display_name":"Matthew Murdoch"},"down_vote_count":2,"up_vote_count":50,"is_accepted":true,"score":48,"last_activity_date":1227606253,"creation_date":1227606253,"answer_id":316838,"question_id":182278,"body_markdown":"The &#39;friend&#39; concept is useful in Java, for example, to separate an API from its implementation. It is common for implementation classes to need access to API class internals but these should not be exposed to API clients. This can be achieved using the &#39;Friend Accessor&#39; pattern as detailed below:\r\n\r\nThe class exposed through the API:\r\n\r\n    package api;\r\n\r\n    public final class Exposed {\r\n        static {\r\n            // Declare classes in the implementation package as &#39;friends&#39;\r\n            Accessor.setInstance(new AccessorImpl());\r\n        }\r\n\r\n        // Only accessible by &#39;friend&#39; classes.\r\n        Exposed() {\r\n\r\n        }\r\n\r\n        // Only accessible by &#39;friend&#39; classes.\r\n        void sayHello() {\r\n            System.out.println(&quot;Hello&quot;);\r\n        }\r\n\r\n        static final class AccessorImpl extends Accessor {\r\n            protected Exposed createExposed() {\r\n                return new Exposed();\r\n            }\r\n\r\n            protected void sayHello(Exposed exposed) {\r\n                exposed.sayHello();\r\n            }\r\n        }\r\n    }\r\n\r\nThe class providing the &#39;friend&#39; functionality:\r\n\r\n    package impl;\r\n\r\n    public abstract class Accessor {\r\n\r\n        private static Accessor instance;\r\n\r\n        static Accessor getInstance() {\r\n            Accessor a = instance;\r\n            if (a != null) {\r\n                return a;\r\n            }\r\n\r\n            return createInstance();\r\n        }\r\n\r\n        private static Accessor createInstance() {\r\n            try {\r\n                Class.forName(Exposed.class.getName(), true, \r\n                    Exposed.class.getClassLoader());\r\n            } catch (ClassNotFoundException e) {\r\n                throw new IllegalStateException(e);\r\n            }\r\n\r\n            return instance;\r\n        }\r\n\r\n        public static void setInstance(Accessor accessor) {\r\n            if (instance != null) {\r\n                throw new IllegalStateException(\r\n                    &quot;Accessor instance already set&quot;);\r\n            }\r\n\r\n            instance = accessor;\r\n        }\r\n\r\n        protected abstract Exposed createExposed();\r\n\r\n        protected abstract void sayHello(Exposed exposed);\r\n    }\r\n\r\nExample access from a class in the &#39;friend&#39; implementation package:\r\n\r\n    package impl;\r\n    \r\n    public final class FriendlyAccessExample {\r\n        public static void main(String[] args) {\r\n            Accessor accessor = Accessor.getInstance();\r\n            Exposed exposed = accessor.createExposed();\r\n            accessor.sayHello(exposed);\r\n        }\r\n    }\r\n","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>The 'friend' concept is useful in Java, for example, to separate an API from its implementation. It is common for implementation classes to need access to API class internals but these should not be exposed to API clients. This can be achieved using the 'Friend Accessor' pattern as detailed below:</p>\n\n<p>The class exposed through the API:</p>\n\n<pre><code>package api;\n\npublic final class Exposed {\n    static {\n        // Declare classes in the implementation package as 'friends'\n        Accessor.setInstance(new AccessorImpl());\n    }\n\n    // Only accessible by 'friend' classes.\n    Exposed() {\n\n    }\n\n    // Only accessible by 'friend' classes.\n    void sayHello() {\n        System.out.println(\"Hello\");\n    }\n\n    static final class AccessorImpl extends Accessor {\n        protected Exposed createExposed() {\n            return new Exposed();\n        }\n\n        protected void sayHello(Exposed exposed) {\n            exposed.sayHello();\n        }\n    }\n}\n</code></pre>\n\n<p>The class providing the 'friend' functionality:</p>\n\n<pre><code>package impl;\n\npublic abstract class Accessor {\n\n    private static Accessor instance;\n\n    static Accessor getInstance() {\n        Accessor a = instance;\n        if (a != null) {\n            return a;\n        }\n\n        return createInstance();\n    }\n\n    private static Accessor createInstance() {\n        try {\n            Class.forName(Exposed.class.getName(), true, \n                Exposed.class.getClassLoader());\n        } catch (ClassNotFoundException e) {\n            throw new IllegalStateException(e);\n        }\n\n        return instance;\n    }\n\n    public static void setInstance(Accessor accessor) {\n        if (instance != null) {\n            throw new IllegalStateException(\n                \"Accessor instance already set\");\n        }\n\n        instance = accessor;\n    }\n\n    protected abstract Exposed createExposed();\n\n    protected abstract void sayHello(Exposed exposed);\n}\n</code></pre>\n\n<p>Example access from a class in the 'friend' implementation package:</p>\n\n<pre><code>package impl;\n\npublic final class FriendlyAccessExample {\n    public static void main(String[] args) {\n        Accessor accessor = Accessor.getInstance();\n        Exposed exposed = accessor.createExposed();\n        accessor.sayHello(exposed);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"Shashi Velur"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1507705973,"creation_date":1228709226,"answer_id":348637,"question_id":182278,"body_markdown":"I prefer delegation or composition or factory class (depending upon the issue that results in this problem) to avoid making it a public class. \r\n\r\nIf it is a &quot;interface/implementation classes in different packages&quot; problem, then I would use a public factory class that would in the same package as the impl package and prevent the exposure of the impl class.\r\n\r\nIf it is a &quot;I hate to make this class/method public just to provide this functionality for some other class in a different package&quot; problem, then I would use a public delegate class in the same package and expose only that part of the functionality needed by the &quot;outsider&quot; class.\r\n\r\nSome of these decisions are driven by the target server classloading architecture (OSGi bundle, WAR/EAR, etc.), deployment and package naming conventions. For example, the above proposed solution, &#39;Friend Accessor&#39; pattern is clever for normal java applications. I wonder if it gets tricky to implement it in OSGi due to the difference in classloading style.\r\n\r\n","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>I prefer delegation or composition or factory class (depending upon the issue that results in this problem) to avoid making it a public class. </p>\n\n<p>If it is a \"interface/implementation classes in different packages\" problem, then I would use a public factory class that would in the same package as the impl package and prevent the exposure of the impl class.</p>\n\n<p>If it is a \"I hate to make this class/method public just to provide this functionality for some other class in a different package\" problem, then I would use a public delegate class in the same package and expose only that part of the functionality needed by the \"outsider\" class.</p>\n\n<p>Some of these decisions are driven by the target server classloading architecture (OSGi bundle, WAR/EAR, etc.), deployment and package naming conventions. For example, the above proposed solution, 'Friend Accessor' pattern is clever for normal java applications. I wonder if it gets tricky to implement it in OSGi due to the difference in classloading style.</p>\n"},{"tags":[],"owner":{"account_id":30426,"reputation":677,"user_id":82991,"accept_rate":75,"display_name":"eirikma"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1254940660,"creation_date":1254940660,"answer_id":1533414,"question_id":182278,"body_markdown":"The provided solution was perhaps not the simplest. Another approach is based on the same idea as in C++: private members are not accessible outside the package/private scope, except for a specific class that the owner makes a friend of itself. \r\n\r\nThe class that needs friend access to a member should create a inner public abstract &quot;friend class&quot; that the class owning the hidden properties can export access to, by returning a subclass that implement the access-implementing methods. The &quot;API&quot; method of the friend class can be private so it is not accessible outside the class that needs friend access. Its only statement is a call to an abstract protected member that the exporting class implements. \r\n\r\nHere&#39;s the code:\r\n\r\nFirst the test that verifies that this actually works:\r\n\r\n    \r\n    package application;\r\n    \r\n    import application.entity.Entity;\r\n    import application.service.Service;\r\n    import junit.framework.TestCase;\r\n    \r\n    public class EntityFriendTest extends TestCase {\r\n        public void testFriendsAreOkay() {\r\n            Entity entity = new Entity();\r\n            Service service = new Service();\r\n            assertNull(&quot;entity should not be processed yet&quot;, entity.getPublicData());\r\n            service.processEntity(entity);\r\n            assertNotNull(&quot;entity should be processed now&quot;, entity.getPublicData());\r\n        }\r\n    }\r\n\r\n\r\nThen the Service that needs friend access to a package private member of Entity:\r\n\r\n    package application.service;\r\n    \r\n    import application.entity.Entity;\r\n    \r\n    public class Service {\r\n    \r\n        public void processEntity(Entity entity) {\r\n            String value = entity.getFriend().getEntityPackagePrivateData();\r\n            entity.setPublicData(value);\r\n        }\r\n    \r\n        /**\r\n         * Class that Entity explicitly can expose private aspects to subclasses of.\r\n         * Public, so the class itself is visible in Entity&#39;s package.\r\n         */\r\n        public static abstract class EntityFriend {\r\n            /**\r\n             * Access method: private not visible (a.k.a &#39;friendly&#39;) outside enclosing class.\r\n             */\r\n            private String getEntityPackagePrivateData() {\r\n                return getEntityPackagePrivateDataImpl();\r\n            }\r\n    \r\n            /** contribute access to private member by implementing this */\r\n            protected abstract String getEntityPackagePrivateDataImpl();\r\n        }\r\n    }\r\n\r\n\r\nFinally: the Entity class that provides friendly access to a package private member only to the class application.service.Service. \r\n\r\n    package application.entity;\r\n    \r\n    import application.service.Service;\r\n    \r\n    public class Entity {\r\n    \r\n        private String publicData;\r\n        private String packagePrivateData = &quot;secret&quot;;   \r\n    \r\n        public String getPublicData() {\r\n            return publicData;\r\n        }\r\n    \r\n        public void setPublicData(String publicData) {\r\n            this.publicData = publicData;\r\n        }\r\n    \r\n        String getPackagePrivateData() {\r\n            return packagePrivateData;\r\n        }\r\n    \r\n        /** provide access to proteced method for Service&#39;e helper class */\r\n        public Service.EntityFriend getFriend() {\r\n            return new Service.EntityFriend() {\r\n                protected String getEntityPackagePrivateDataImpl() {\r\n                    return getPackagePrivateData();\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\n\r\nOkay, I must admit it is a bit longer than &quot;friend service::Service;&quot; but it might be possible to shorten it while retaining compile-time checking by using annotations. \r\n\r\n","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>The provided solution was perhaps not the simplest. Another approach is based on the same idea as in C++: private members are not accessible outside the package/private scope, except for a specific class that the owner makes a friend of itself. </p>\n\n<p>The class that needs friend access to a member should create a inner public abstract \"friend class\" that the class owning the hidden properties can export access to, by returning a subclass that implement the access-implementing methods. The \"API\" method of the friend class can be private so it is not accessible outside the class that needs friend access. Its only statement is a call to an abstract protected member that the exporting class implements. </p>\n\n<p>Here's the code:</p>\n\n<p>First the test that verifies that this actually works:</p>\n\n<pre><code>package application;\n\nimport application.entity.Entity;\nimport application.service.Service;\nimport junit.framework.TestCase;\n\npublic class EntityFriendTest extends TestCase {\n    public void testFriendsAreOkay() {\n        Entity entity = new Entity();\n        Service service = new Service();\n        assertNull(\"entity should not be processed yet\", entity.getPublicData());\n        service.processEntity(entity);\n        assertNotNull(\"entity should be processed now\", entity.getPublicData());\n    }\n}\n</code></pre>\n\n<p>Then the Service that needs friend access to a package private member of Entity:</p>\n\n<pre><code>package application.service;\n\nimport application.entity.Entity;\n\npublic class Service {\n\n    public void processEntity(Entity entity) {\n        String value = entity.getFriend().getEntityPackagePrivateData();\n        entity.setPublicData(value);\n    }\n\n    /**\n     * Class that Entity explicitly can expose private aspects to subclasses of.\n     * Public, so the class itself is visible in Entity's package.\n     */\n    public static abstract class EntityFriend {\n        /**\n         * Access method: private not visible (a.k.a 'friendly') outside enclosing class.\n         */\n        private String getEntityPackagePrivateData() {\n            return getEntityPackagePrivateDataImpl();\n        }\n\n        /** contribute access to private member by implementing this */\n        protected abstract String getEntityPackagePrivateDataImpl();\n    }\n}\n</code></pre>\n\n<p>Finally: the Entity class that provides friendly access to a package private member only to the class application.service.Service. </p>\n\n<pre><code>package application.entity;\n\nimport application.service.Service;\n\npublic class Entity {\n\n    private String publicData;\n    private String packagePrivateData = \"secret\";   \n\n    public String getPublicData() {\n        return publicData;\n    }\n\n    public void setPublicData(String publicData) {\n        this.publicData = publicData;\n    }\n\n    String getPackagePrivateData() {\n        return packagePrivateData;\n    }\n\n    /** provide access to proteced method for Service'e helper class */\n    public Service.EntityFriend getFriend() {\n        return new Service.EntityFriend() {\n            protected String getEntityPackagePrivateDataImpl() {\n                return getPackagePrivateData();\n            }\n        };\n    }\n}\n</code></pre>\n\n<p>Okay, I must admit it is a bit longer than \"friend service::Service;\" but it might be possible to shorten it while retaining compile-time checking by using annotations. </p>\n"},{"tags":[],"owner":{"account_id":28307,"reputation":583,"user_id":75540,"display_name":"daitangio"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1292251143,"creation_date":1292237862,"answer_id":4428099,"question_id":182278,"body_markdown":"In Java it is possible to have a &quot;package-related friendness&quot;. \r\nThis can be userful for unit testing.\r\nIf you do not specify private/public/protected in front of a method, it will be &quot;friend in the package&quot;.\r\nA class in the same package will be able to access it, but it will be private outside the class.\r\n\r\nThis rule is not always known, and it is a good approximation of a C++ &quot;friend&quot; keyword.\r\nI find it a good replacement.","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>In Java it is possible to have a \"package-related friendness\". \nThis can be userful for unit testing.\nIf you do not specify private/public/protected in front of a method, it will be \"friend in the package\".\nA class in the same package will be able to access it, but it will be private outside the class.</p>\n\n<p>This rule is not always known, and it is a good approximation of a C++ \"friend\" keyword.\nI find it a good replacement.</p>\n"},{"tags":[],"owner":{"account_id":174227,"reputation":27776,"user_id":403455,"accept_rate":83,"display_name":"Jeff Axelrod"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1328619570,"creation_date":1306511043,"answer_id":6154633,"question_id":182278,"body_markdown":"There are two solutions to your question that don&#39;t involve keeping all classes in the same package.  \r\n\r\nThe first is to use the Friend Accessor/[Friend Package][2] pattern described in (Practical API Design, Tulach 2008).\r\n\r\nThe second is to use OSGi.  There is an article [here][1] explaining how OSGi accomplishes this.  \r\n\r\nRelated Questions: [1][3], [2][4], and [3][5].\r\n\r\n  [1]: http://www.1biznow.com/2009/02/hide-private-parts-of-your-bundle.html\r\n  [2]: http://wiki.apidesign.org/wiki/APIDesignPatterns:FriendPackages\r\n  [3]: https://stackoverflow.com/questions/5872124/how-to-hide-the-internal-structure-of-a-java-api-to-the-rest-of-the-world/6154321#6154321\r\n  [4]: https://stackoverflow.com/questions/4759692/hiding-classes-in-a-jar-file\r\n  [5]: https://stackoverflow.com/questions/4647599/why-friend-directive-is-missing-in-java\r\n  [6]: https://stackoverflow.com/questions/182278/is-there-a-way-to-simulate-the-c-friend-concept-in-java","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>There are two solutions to your question that don't involve keeping all classes in the same package.  </p>\n\n<p>The first is to use the Friend Accessor/<a href=\"http://wiki.apidesign.org/wiki/APIDesignPatterns:FriendPackages\" rel=\"nofollow noreferrer\">Friend Package</a> pattern described in (Practical API Design, Tulach 2008).</p>\n\n<p>The second is to use OSGi.  There is an article <a href=\"http://www.1biznow.com/2009/02/hide-private-parts-of-your-bundle.html\" rel=\"nofollow noreferrer\">here</a> explaining how OSGi accomplishes this.  </p>\n\n<p>Related Questions: <a href=\"https://stackoverflow.com/questions/5872124/how-to-hide-the-internal-structure-of-a-java-api-to-the-rest-of-the-world/6154321#6154321\">1</a>, <a href=\"https://stackoverflow.com/questions/4759692/hiding-classes-in-a-jar-file\">2</a>, and <a href=\"https://stackoverflow.com/questions/4647599/why-friend-directive-is-missing-in-java\">3</a>.</p>\n"},{"tags":[],"owner":{"account_id":808074,"reputation":31,"user_id":899773,"display_name":"AriG"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1313634443,"creation_date":1313634443,"answer_id":7101728,"question_id":182278,"body_markdown":"eirikma&#39;s answer is easy and excellent.  I might add one more thing:  instead of having a publicly accessible method, getFriend() to get a friend which cannot be used, you could go one step further and disallow getting the friend without a token: getFriend(Service.FriendToken).  This FriendToken would be an inner public class with a private constructor, so that only Service could instantiate one.","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>eirikma's answer is easy and excellent.  I might add one more thing:  instead of having a publicly accessible method, getFriend() to get a friend which cannot be used, you could go one step further and disallow getting the friend without a token: getFriend(Service.FriendToken).  This FriendToken would be an inner public class with a private constructor, so that only Service could instantiate one.</p>\n"},{"tags":[],"owner":{"account_id":937935,"reputation":57,"user_id":966527,"display_name":"Sephiroth"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1332788329,"creation_date":1332788329,"answer_id":9878042,"question_id":182278,"body_markdown":"I think that friend classes in C++ are like inner-class concept in Java. Using inner-classes\r\nyou can actually define an enclosing class and an enclosed one. Enclosed class has full access to the public and private members of it&#39;s enclosing class.\r\nsee the following link:\r\nhttp://docs.oracle.com/javase/tutorial/java/javaOO/nested.html","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>I think that friend classes in C++ are like inner-class concept in Java. Using inner-classes\nyou can actually define an enclosing class and an enclosed one. Enclosed class has full access to the public and private members of it's enclosing class.\nsee the following link:\n<a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html\" rel=\"nofollow\">http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html</a></p>\n"},{"tags":[],"owner":{"account_id":55284,"reputation":115595,"user_id":165495,"accept_rate":91,"display_name":"Casebash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1376385773,"creation_date":1345172220,"answer_id":11999192,"question_id":182278,"body_markdown":"I agree that in most cases the friend keyword is unnecessary.\r\n\r\n - Package-private (aka. default) is sufficient in most cases where you have a group of heavily intertwined classes\r\n - For debug classes that want access to internals, I usually make the method private and access it via reflection. Speed usually isn&#39;t important here\r\n - Sometimes, you implement a method that is a &quot;hack&quot; or otherwise which is subject to change.  I make it public, but use @Deprecated to indicate that you shouldn&#39;t rely on this method existing.\r\n\r\nAnd finally, if it really is necessary, there is the friend accessor pattern mentioned in the other answers.","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>I agree that in most cases the friend keyword is unnecessary.</p>\n\n<ul>\n<li>Package-private (aka. default) is sufficient in most cases where you have a group of heavily intertwined classes</li>\n<li>For debug classes that want access to internals, I usually make the method private and access it via reflection. Speed usually isn't important here</li>\n<li>Sometimes, you implement a method that is a \"hack\" or otherwise which is subject to change.  I make it public, but use @Deprecated to indicate that you shouldn't rely on this method existing.</li>\n</ul>\n\n<p>And finally, if it really is necessary, there is the friend accessor pattern mentioned in the other answers.</p>\n"},{"tags":[],"owner":{"account_id":1324501,"reputation":9325,"user_id":1269640,"accept_rate":59,"display_name":"Salomon BRYS"},"down_vote_count":2,"up_vote_count":603,"is_accepted":false,"score":601,"last_activity_date":1695261278,"creation_date":1378377577,"answer_id":18634125,"question_id":182278,"body_markdown":"**Here is a small trick that I use in JAVA to replicate C++ friend mechanism.**\r\n\r\nLet&#39;s say I have a class `Romeo` and another class `Juliet`. They are in different packages (family) for hatred reasons.\r\n\r\n`Romeo` wants to `cuddle` `Juliet` and `Juliet` wants to only let `Romeo` `cuddle` her.\r\n\r\nIn C++, `Juliet` would declare `Romeo` as a (lover) `friend` but there are no such things in Java.\r\n\r\nHere are the classes and the trick:\r\n\r\nLadies first:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n\tpackage capulet;\r\n\t\r\n\timport montague.Romeo;\r\n\t\r\n\tpublic class Juliet {\r\n\t\r\n\t\tpublic static void cuddle(Romeo.Love love) {\r\n            Objects.requireNonNull(love);\r\n\t\t\tSystem.out.println(&quot;O Romeo, Romeo, wherefore art thou Romeo?&quot;);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\nSo the method `Juliet.cuddle` is `public` but you need a `Romeo.Love` to call it. It uses this `Romeo.Love` as a &quot;signature security&quot; to ensure that only `Romeo` can call this method and checks that the love is real so that the runtime will throw a `NullPointerException` if it is `null`.\r\n\r\nNow boys:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n\tpackage montague;\r\n\t\r\n\timport capulet.Juliet;\r\n\t\r\n\tpublic class Romeo {\r\n\t\tpublic static final class Love { private Love() {} }\r\n\t\tprivate static final Love love = new Love();\r\n\t\t\r\n\t\tpublic static void cuddleJuliet() {\r\n\t\t\tJuliet.cuddle(love);\r\n\t\t}\r\n\t}\r\n\r\nThe class `Romeo.Love` is public, but its constructor is `private`. Therefore anyone can see it, but only `Romeo` can construct it. I use a static reference so the `Romeo.Love` that is never used is only constructed once and does not impact optimization.\r\n\r\nTherefore, `Romeo` can `cuddle` `Juliet` and only he can because only he can construct and access a `Romeo.Love` instance, which is required by `Juliet` to `cuddle` her (or else she&#39;ll slap you with a `NullPointerException`).","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p><strong>Here is a small trick that I use in JAVA to replicate C++ friend mechanism.</strong></p>\n<p>Let's say I have a class <code>Romeo</code> and another class <code>Juliet</code>. They are in different packages (family) for hatred reasons.</p>\n<p><code>Romeo</code> wants to <code>cuddle</code> <code>Juliet</code> and <code>Juliet</code> wants to only let <code>Romeo</code> <code>cuddle</code> her.</p>\n<p>In C++, <code>Juliet</code> would declare <code>Romeo</code> as a (lover) <code>friend</code> but there are no such things in Java.</p>\n<p>Here are the classes and the trick:</p>\n<p>Ladies first:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package capulet;\n\nimport montague.Romeo;\n\npublic class Juliet {\n\n    public static void cuddle(Romeo.Love love) {\n        Objects.requireNonNull(love);\n        System.out.println(&quot;O Romeo, Romeo, wherefore art thou Romeo?&quot;);\n    }\n    \n}\n</code></pre>\n<p>So the method <code>Juliet.cuddle</code> is <code>public</code> but you need a <code>Romeo.Love</code> to call it. It uses this <code>Romeo.Love</code> as a &quot;signature security&quot; to ensure that only <code>Romeo</code> can call this method and checks that the love is real so that the runtime will throw a <code>NullPointerException</code> if it is <code>null</code>.</p>\n<p>Now boys:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package montague;\n\nimport capulet.Juliet;\n\npublic class Romeo {\n    public static final class Love { private Love() {} }\n    private static final Love love = new Love();\n    \n    public static void cuddleJuliet() {\n        Juliet.cuddle(love);\n    }\n}\n</code></pre>\n<p>The class <code>Romeo.Love</code> is public, but its constructor is <code>private</code>. Therefore anyone can see it, but only <code>Romeo</code> can construct it. I use a static reference so the <code>Romeo.Love</code> that is never used is only constructed once and does not impact optimization.</p>\n<p>Therefore, <code>Romeo</code> can <code>cuddle</code> <code>Juliet</code> and only he can because only he can construct and access a <code>Romeo.Love</code> instance, which is required by <code>Juliet</code> to <code>cuddle</code> her (or else she'll slap you with a <code>NullPointerException</code>).</p>\n"},{"tags":[],"owner":{"account_id":1891087,"reputation":878,"user_id":1709144,"display_name":"jpfx1342"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1422347986,"creation_date":1396993526,"answer_id":22948824,"question_id":182278,"body_markdown":"A method I&#39;ve found for solving this problem is to create an accessor object, like so:\r\n\r\n    class Foo {\r\n        private String locked;\r\n        \r\n        /* Anyone can get locked. */\r\n        public String getLocked() { return locked; }\r\n        \r\n        /* This is the accessor. Anyone with a reference to this has special access. */\r\n        public class FooAccessor {\r\n            private FooAccessor (){};\r\n            public void setLocked(String locked) { Foo.this.locked = locked; }\r\n        }\r\n        private FooAccessor accessor;\r\n        \r\n        /** You get an accessor by calling this method. This method can only\r\n         * be called once, so calling is like claiming ownership of the accessor. */\r\n        public FooAccessor getAccessor() {\r\n            if (accessor != null)\r\n                throw new IllegalStateException(&quot;Cannot return accessor more than once!&quot;);\r\n            return accessor = new FooAccessor();\r\n        }\r\n    }\r\n\r\nThe first code to call `getAccessor()` &quot;claims ownership&quot; of the accessor. Usually, this is code that creates the object.\r\n\r\n    Foo bar = new Foo(); //This object is safe to share.\r\n    FooAccessor barAccessor = bar.getAccessor(); //This one is not.\r\n\r\nThis also has an advantage over C++&#39;s friend mechanism, because it allows you to limit access on a *per-instance* level, as opposed to a *per-class* level. By controlling the accessor reference, you control access to the object. You can also create multiple accessors, and give different access to each, which allows fine-grained control over what code can access what:\r\n\r\n    class Foo {\r\n        private String secret;\r\n        private String locked;\r\n        \r\n        /* Anyone can get locked. */\r\n        public String getLocked() { return locked; }\r\n        \r\n        /* Normal accessor. Can write to locked, but not read secret. */\r\n        public class FooAccessor {\r\n            private FooAccessor (){};\r\n            public void setLocked(String locked) { Foo.this.locked = locked; }\r\n        }\r\n        private FooAccessor accessor;\r\n        \r\n        public FooAccessor getAccessor() {\r\n            if (accessor != null)\r\n                throw new IllegalStateException(&quot;Cannot return accessor more than once!&quot;);\r\n            return accessor = new FooAccessor();\r\n        }\r\n        \r\n        /* Super accessor. Allows access to secret. */\r\n        public class FooSuperAccessor {\r\n            private FooSuperAccessor (){};\r\n            public String getSecret() { return Foo.this.secret; }\r\n        }\r\n        private FooSuperAccessor superAccessor;\r\n        \r\n        public FooSuperAccessor getAccessor() {\r\n            if (superAccessor != null)\r\n                throw new IllegalStateException(&quot;Cannot return accessor more than once!&quot;);\r\n            return superAccessor = new FooSuperAccessor();\r\n        }\r\n    }\r\n\r\nFinally, if you&#39;d like things to be a bit more organized, you can create a reference object, which holds everything together. This allows you to claim all accessors with one method call, as well as keep them together with their linked instance. Once you have the reference, you can pass the accessors out to the code that needs it:\r\n\r\n    class Foo {\r\n        private String secret;\r\n        private String locked;\r\n        \r\n        public String getLocked() { return locked; }\r\n        \r\n        public class FooAccessor {\r\n            private FooAccessor (){};\r\n            public void setLocked(String locked) { Foo.this.locked = locked; }\r\n        }\r\n        public class FooSuperAccessor {\r\n            private FooSuperAccessor (){};\r\n            public String getSecret() { return Foo.this.secret; }\r\n        }\r\n        public class FooReference {\r\n            public final Foo foo;\r\n            public final FooAccessor accessor;\r\n            public final FooSuperAccessor superAccessor;\r\n            \r\n            private FooReference() {\r\n                this.foo = Foo.this;\r\n                this.accessor = new FooAccessor();\r\n                this.superAccessor = new FooSuperAccessor();\r\n            }\r\n        }\r\n        \r\n        private FooReference reference;\r\n        \r\n        /* Beware, anyone with this object has *all* the accessors! */\r\n        public FooReference getReference() {\r\n            if (reference != null)\r\n                throw new IllegalStateException(&quot;Cannot return reference more than once!&quot;);\r\n            return reference = new FooReference();\r\n        }\r\n    }\r\n\r\nAfter much head-banging (not the good kind), this was my final solution, and I very much like it. It is flexible, simple to use, and allows very good control over class access. (The *with reference only* access is very useful.) If you use protected instead of private for the accessors/references, sub-classes of Foo can even return extended references from `getReference`. It also doesn&#39;t require any reflection, so it can be used in any environment.\r\n","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>A method I've found for solving this problem is to create an accessor object, like so:</p>\n\n<pre><code>class Foo {\n    private String locked;\n\n    /* Anyone can get locked. */\n    public String getLocked() { return locked; }\n\n    /* This is the accessor. Anyone with a reference to this has special access. */\n    public class FooAccessor {\n        private FooAccessor (){};\n        public void setLocked(String locked) { Foo.this.locked = locked; }\n    }\n    private FooAccessor accessor;\n\n    /** You get an accessor by calling this method. This method can only\n     * be called once, so calling is like claiming ownership of the accessor. */\n    public FooAccessor getAccessor() {\n        if (accessor != null)\n            throw new IllegalStateException(\"Cannot return accessor more than once!\");\n        return accessor = new FooAccessor();\n    }\n}\n</code></pre>\n\n<p>The first code to call <code>getAccessor()</code> \"claims ownership\" of the accessor. Usually, this is code that creates the object.</p>\n\n<pre><code>Foo bar = new Foo(); //This object is safe to share.\nFooAccessor barAccessor = bar.getAccessor(); //This one is not.\n</code></pre>\n\n<p>This also has an advantage over C++'s friend mechanism, because it allows you to limit access on a <em>per-instance</em> level, as opposed to a <em>per-class</em> level. By controlling the accessor reference, you control access to the object. You can also create multiple accessors, and give different access to each, which allows fine-grained control over what code can access what:</p>\n\n<pre><code>class Foo {\n    private String secret;\n    private String locked;\n\n    /* Anyone can get locked. */\n    public String getLocked() { return locked; }\n\n    /* Normal accessor. Can write to locked, but not read secret. */\n    public class FooAccessor {\n        private FooAccessor (){};\n        public void setLocked(String locked) { Foo.this.locked = locked; }\n    }\n    private FooAccessor accessor;\n\n    public FooAccessor getAccessor() {\n        if (accessor != null)\n            throw new IllegalStateException(\"Cannot return accessor more than once!\");\n        return accessor = new FooAccessor();\n    }\n\n    /* Super accessor. Allows access to secret. */\n    public class FooSuperAccessor {\n        private FooSuperAccessor (){};\n        public String getSecret() { return Foo.this.secret; }\n    }\n    private FooSuperAccessor superAccessor;\n\n    public FooSuperAccessor getAccessor() {\n        if (superAccessor != null)\n            throw new IllegalStateException(\"Cannot return accessor more than once!\");\n        return superAccessor = new FooSuperAccessor();\n    }\n}\n</code></pre>\n\n<p>Finally, if you'd like things to be a bit more organized, you can create a reference object, which holds everything together. This allows you to claim all accessors with one method call, as well as keep them together with their linked instance. Once you have the reference, you can pass the accessors out to the code that needs it:</p>\n\n<pre><code>class Foo {\n    private String secret;\n    private String locked;\n\n    public String getLocked() { return locked; }\n\n    public class FooAccessor {\n        private FooAccessor (){};\n        public void setLocked(String locked) { Foo.this.locked = locked; }\n    }\n    public class FooSuperAccessor {\n        private FooSuperAccessor (){};\n        public String getSecret() { return Foo.this.secret; }\n    }\n    public class FooReference {\n        public final Foo foo;\n        public final FooAccessor accessor;\n        public final FooSuperAccessor superAccessor;\n\n        private FooReference() {\n            this.foo = Foo.this;\n            this.accessor = new FooAccessor();\n            this.superAccessor = new FooSuperAccessor();\n        }\n    }\n\n    private FooReference reference;\n\n    /* Beware, anyone with this object has *all* the accessors! */\n    public FooReference getReference() {\n        if (reference != null)\n            throw new IllegalStateException(\"Cannot return reference more than once!\");\n        return reference = new FooReference();\n    }\n}\n</code></pre>\n\n<p>After much head-banging (not the good kind), this was my final solution, and I very much like it. It is flexible, simple to use, and allows very good control over class access. (The <em>with reference only</em> access is very useful.) If you use protected instead of private for the accessors/references, sub-classes of Foo can even return extended references from <code>getReference</code>. It also doesn't require any reflection, so it can be used in any environment.</p>\n"},{"tags":[],"owner":{"account_id":451370,"reputation":2890,"user_id":847235,"accept_rate":92,"display_name":"intrepidis"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1525516221,"creation_date":1439456258,"answer_id":31983744,"question_id":182278,"body_markdown":"Here&#39;s a clear use-case example with a reusable `Friend` class. The benefit of this mechanism is simplicity of use. Maybe good for giving unit test classes more access than the rest of the application.\r\n\r\nTo begin, here is an example of how to use the `Friend` class.\r\n\r\n    public class Owner {\r\n        private final String member = &quot;value&quot;;\r\n\r\n        public String getMember(final Friend friend) {\r\n            // Make sure only a friend is accepted.\r\n            friend.is(Other.class);\r\n            return member;\r\n        }\r\n    }\r\n\r\nThen in another package you can do this:\r\n\r\n    public class Other {\r\n        private final Friend friend = new Friend(this);\r\n\r\n        public void test() {\r\n            String s = new Owner().getMember(friend);\r\n            System.out.println(s);\r\n        }\r\n    }\r\n    \r\nThe `Friend` class is as follows.\r\n\r\n    public final class Friend {\r\n        private final Class as;\r\n    \r\n        public Friend(final Object is) {\r\n            as = is.getClass();\r\n        }\r\n    \r\n        public void is(final Class c) {\r\n            if (c == as)\r\n                return;\r\n            throw new ClassCastException(String.format(&quot;%s is not an expected friend.&quot;, as.getName()));\r\n        }\r\n    \r\n        public void is(final Class... classes) {\r\n            for (final Class c : classes)\r\n                if (c == as)\r\n                    return;\r\n            is((Class)null);\r\n        }\r\n    }\r\n\r\nHowever, the problem is that it can be abused like so:\r\n\r\n    public class Abuser {\r\n        public void doBadThings() {\r\n            Friend badFriend = new Friend(new Other());\r\n            String s = new Owner().getMember(badFriend);\r\n            System.out.println(s);\r\n        }\r\n    }\r\n\r\nNow, it may be true that the `Other` class doesn&#39;t have any public constructors, therefore making the above `Abuser` code impossible. However, if your class &lt;i&gt;does&lt;/i&gt; have a public constructor then it is probably advisable to duplicate the Friend class as an inner class. Take this `Other2` class as an example:\r\n\r\n    public class Other2 {\r\n        private final Friend friend = new Friend();\r\n\r\n        public final class Friend {\r\n            private Friend() {}\r\n            public void check() {}\r\n        }\r\n\r\n        public void test() {\r\n            String s = new Owner2().getMember(friend);\r\n            System.out.println(s);\r\n        }\r\n    }\r\n\r\nAnd then the `Owner2` class would be like this:\r\n\r\n    public class Owner2 {\r\n        private final String member = &quot;value&quot;;\r\n    \r\n        public String getMember(final Other2.Friend friend) {\r\n            friend.check();\r\n            return member;\r\n        }\r\n    }\r\n\r\nNotice that the `Other2.Friend` class has a private constructor, thus making this a much more secure way of doing it.","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>Here's a clear use-case example with a reusable <code>Friend</code> class. The benefit of this mechanism is simplicity of use. Maybe good for giving unit test classes more access than the rest of the application.</p>\n\n<p>To begin, here is an example of how to use the <code>Friend</code> class.</p>\n\n<pre><code>public class Owner {\n    private final String member = \"value\";\n\n    public String getMember(final Friend friend) {\n        // Make sure only a friend is accepted.\n        friend.is(Other.class);\n        return member;\n    }\n}\n</code></pre>\n\n<p>Then in another package you can do this:</p>\n\n<pre><code>public class Other {\n    private final Friend friend = new Friend(this);\n\n    public void test() {\n        String s = new Owner().getMember(friend);\n        System.out.println(s);\n    }\n}\n</code></pre>\n\n<p>The <code>Friend</code> class is as follows.</p>\n\n<pre><code>public final class Friend {\n    private final Class as;\n\n    public Friend(final Object is) {\n        as = is.getClass();\n    }\n\n    public void is(final Class c) {\n        if (c == as)\n            return;\n        throw new ClassCastException(String.format(\"%s is not an expected friend.\", as.getName()));\n    }\n\n    public void is(final Class... classes) {\n        for (final Class c : classes)\n            if (c == as)\n                return;\n        is((Class)null);\n    }\n}\n</code></pre>\n\n<p>However, the problem is that it can be abused like so:</p>\n\n<pre><code>public class Abuser {\n    public void doBadThings() {\n        Friend badFriend = new Friend(new Other());\n        String s = new Owner().getMember(badFriend);\n        System.out.println(s);\n    }\n}\n</code></pre>\n\n<p>Now, it may be true that the <code>Other</code> class doesn't have any public constructors, therefore making the above <code>Abuser</code> code impossible. However, if your class <i>does</i> have a public constructor then it is probably advisable to duplicate the Friend class as an inner class. Take this <code>Other2</code> class as an example:</p>\n\n<pre><code>public class Other2 {\n    private final Friend friend = new Friend();\n\n    public final class Friend {\n        private Friend() {}\n        public void check() {}\n    }\n\n    public void test() {\n        String s = new Owner2().getMember(friend);\n        System.out.println(s);\n    }\n}\n</code></pre>\n\n<p>And then the <code>Owner2</code> class would be like this:</p>\n\n<pre><code>public class Owner2 {\n    private final String member = \"value\";\n\n    public String getMember(final Other2.Friend friend) {\n        friend.check();\n        return member;\n    }\n}\n</code></pre>\n\n<p>Notice that the <code>Other2.Friend</code> class has a private constructor, thus making this a much more secure way of doing it.</p>\n"},{"tags":[],"owner":{"account_id":8480254,"reputation":11,"user_id":6360153,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1470125655,"creation_date":1470067289,"answer_id":38703299,"question_id":182278,"body_markdown":"I think, the approach of using the friend accessor pattern is way too complicated. I had to face the same problem and I solved using the good, old copy constructor, known from C++, in Java:\r\n\r\n    public class ProtectedContainer {\r\n        protected String iwantAccess;\r\n\r\n        protected ProtectedContainer() {\r\n            super();\r\n            iwantAccess = &quot;Default string&quot;;\r\n        }\r\n\r\n        protected ProtectedContainer(ProtectedContainer other) {\r\n            super();\r\n            this.iwantAccess = other.iwantAccess;\r\n        }\r\n\r\n        public int calcSquare(int x) {\r\n            iwantAccess = &quot;calculated square&quot;;\r\n            return x * x;\r\n        }\r\n    }\r\n\r\nIn your application you could write the following code:\r\n\r\n    public class MyApp {\r\n\r\n        private static class ProtectedAccessor extends ProtectedContainer {\r\n\r\n            protected ProtectedAccessor() {\r\n                super();\r\n            }\r\n\r\n            protected PrivateAccessor(ProtectedContainer prot) {\r\n                super(prot);\r\n            }\r\n\r\n            public String exposeProtected() {\r\n                return iwantAccess;\r\n            }\r\n        }\r\n    }\r\n\r\nThe advantage of this method is that only your application has access to the protected data. It&#39;s not exactly a substitution of the friend keyword. But I think it&#39;s quite suitable when you write custom libraries and you need to access protected data.\r\n\r\nWhenever you have to deal with instances of ProtectedContainer you can wrap your ProtectedAccessor around it and you gain access.\r\n\r\nIt also works with protected methods. You define them protected in your API. Later in your application you write a private wrapper class and expose the protected method as public. That&#39;s it.","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>I think, the approach of using the friend accessor pattern is way too complicated. I had to face the same problem and I solved using the good, old copy constructor, known from C++, in Java:</p>\n\n<pre><code>public class ProtectedContainer {\n    protected String iwantAccess;\n\n    protected ProtectedContainer() {\n        super();\n        iwantAccess = \"Default string\";\n    }\n\n    protected ProtectedContainer(ProtectedContainer other) {\n        super();\n        this.iwantAccess = other.iwantAccess;\n    }\n\n    public int calcSquare(int x) {\n        iwantAccess = \"calculated square\";\n        return x * x;\n    }\n}\n</code></pre>\n\n<p>In your application you could write the following code:</p>\n\n<pre><code>public class MyApp {\n\n    private static class ProtectedAccessor extends ProtectedContainer {\n\n        protected ProtectedAccessor() {\n            super();\n        }\n\n        protected PrivateAccessor(ProtectedContainer prot) {\n            super(prot);\n        }\n\n        public String exposeProtected() {\n            return iwantAccess;\n        }\n    }\n}\n</code></pre>\n\n<p>The advantage of this method is that only your application has access to the protected data. It's not exactly a substitution of the friend keyword. But I think it's quite suitable when you write custom libraries and you need to access protected data.</p>\n\n<p>Whenever you have to deal with instances of ProtectedContainer you can wrap your ProtectedAccessor around it and you gain access.</p>\n\n<p>It also works with protected methods. You define them protected in your API. Later in your application you write a private wrapper class and expose the protected method as public. That's it.</p>\n"},{"tags":[],"owner":{"account_id":257842,"reputation":9939,"user_id":539599,"accept_rate":86,"display_name":"Raphael"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1507705530,"creation_date":1507705530,"answer_id":46681855,"question_id":182278,"body_markdown":"As of Java 9, modules can be used to make this a non-issue in many cases.","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>As of Java 9, modules can be used to make this a non-issue in many cases.</p>\n"}],"owner":{"account_id":2842,"reputation":31004,"user_id":4023,"accept_rate":89,"display_name":"Matthew Murdoch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104460,"favorite_count":0,"down_vote_count":0,"up_vote_count":239,"accepted_answer_id":316838,"answer_count":18,"score":239,"last_activity_date":1695261278,"creation_date":1223465873,"question_id":182278,"body_markdown":"I would like to be able to write a Java class in one package which can access non-public methods of a class in another package without having to make it a subclass of the other class. Is this possible?","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>I would like to be able to write a Java class in one package which can access non-public methods of a class in another package without having to make it a subclass of the other class. Is this possible?</p>\n"},{"tags":["java","api-gateway","interactive-brokers"],"owner":{"account_id":19888878,"reputation":77,"user_id":14571370,"display_name":"Rodrigo Alarc&#243;n"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695261022,"creation_date":1691585146,"question_id":76867934,"body_markdown":"After installation in Ubuntu, is imposible to connecto the API Gateway of iteractive brokes through localhost. When trying to reach https://localhost:5000 (using the browser or curl) I get \r\n```\r\n2023-08-09 08:25:49.763 [SF] ERROR [JTS-SocketListener-55] - Client disconnected before version was sent.\r\njava.net.ConnectException: Connection terminated\r\n\tat jextend.bg.a(bg.java:820)\r\n\tat jextend.bg.b(bg.java:371)\r\n\tat jextend.cG.b(cG.java:379)\r\n\tat jextend.bg.q(bg.java:964)\r\n\tat jextend.eC.c(eC.java:480)\r\n\tat jextend.eC.run(eC.java:299)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n2023-08-09 08:25:49.871 [SF] WARN  [JTS-SocketListener-55] - Error\r\ntwslaunch.jutils.SLogging$Warning: API client version is missing.\r\n\tat twslaunch.jutils.au.B(au.java:287)\r\n\tat jextend.eC.run(eC.java:302)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n2023-08-09 08:25:55.322 [SF] INFO  [JTS-DeadlockMonitor-2] - Memory:total=786,432KB free=682,569KB HeapUsage: Max=786,432KB used=101,814KB committed=203,776KB NonHeapUsage: Max=0KB used=131,297KB committed=134,528KB\r\n2023-08-09 08:25:56.325 [SF] INFO  [JTS-DeadlockMonitor-2] - CPU:cur=0.10% avg=0.76% 30 min avg=0.76% 10 min avg=0.76% 5 min avg=0.61% 1 min avg=0.12%\r\nGC:called=12 times CPU used=0.03%\r\nFinalizer:cur=0.00% avg=0.00% 30 min avg=0.00% 10 min avg=0.00% 5 min avg=0.00% 1 min avg=0.00%\r\nThreads Count:curr live=62 curr daemon=28\r\n2023-08-09 08:26:06.474 [SF] INFO  [JTS-SocketListener-55] - State: STOP, IsAPI: NO\r\n2023-08-09 08:26:06.475 [SF] ERROR [JTS-SocketListener-55] - Error parsing integer value from header.\r\njava.lang.NumberFormatException: For input string: &quot;\u0016\u0003\u0001\u0002&quot;\r\n\tat java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\r\n\tat java.lang.Integer.parseInt(Integer.java:569)\r\n\tat java.lang.Integer.parseInt(Integer.java:615)\r\n\tat jextend.bg.q(bg.java:965)\r\n\tat jextend.eC.c(eC.java:480)\r\n\tat jextend.eC.run(eC.java:299)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n2023-08-09 08:26:06.475 [SF] WARN  [JTS-SocketListener-55] - Error\r\ntwslaunch.jutils.SLogging$Warning: API client version is missing.\r\n\tat twslaunch.jutils.au.B(au.java:287)\r\n\tat jextend.eC.run(eC.java:302)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n2023-08-09 08:26:06.481 [SF] INFO  [JTS-SocketListener-55] - State: STOP, IsAPI: NO\r\n2023-08-09 08:26:06.481 [SF] ERROR [JTS-SocketListener-55] - Error parsing integer value from header.\r\njava.lang.NumberFormatException: For input string: &quot;\u0016\u0003\u0001\u0002&quot;\r\n\tat java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\r\n\tat java.lang.Integer.parseInt(Integer.java:569)\r\n\tat java.lang.Integer.parseInt(Integer.java:615)\r\n\tat jextend.bg.q(bg.java:965)\r\n\tat jextend.eC.c(eC.java:480)\r\n\tat jextend.eC.run(eC.java:299)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n```\r\n\r\nIt seems to point out that a header with the API version is missing (though it not name the parameter) I tried to connect creating a python script and adding headers live `version: 1.0`, or `w: 1`, etc, but it didn&#39;t work\r\n\r\nMy config is:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/FJfnJ.png","title":"API Gateway (IB) not working in Linux (interactive brokers)","body":"<p>After installation in Ubuntu, is imposible to connecto the API Gateway of iteractive brokes through localhost. When trying to reach https://localhost:5000 (using the browser or curl) I get</p>\n<pre><code>2023-08-09 08:25:49.763 [SF] ERROR [JTS-SocketListener-55] - Client disconnected before version was sent.\njava.net.ConnectException: Connection terminated\n    at jextend.bg.a(bg.java:820)\n    at jextend.bg.b(bg.java:371)\n    at jextend.cG.b(cG.java:379)\n    at jextend.bg.q(bg.java:964)\n    at jextend.eC.c(eC.java:480)\n    at jextend.eC.run(eC.java:299)\n    at java.lang.Thread.run(Thread.java:748)\n2023-08-09 08:25:49.871 [SF] WARN  [JTS-SocketListener-55] - Error\ntwslaunch.jutils.SLogging$Warning: API client version is missing.\n    at twslaunch.jutils.au.B(au.java:287)\n    at jextend.eC.run(eC.java:302)\n    at java.lang.Thread.run(Thread.java:748)\n2023-08-09 08:25:55.322 [SF] INFO  [JTS-DeadlockMonitor-2] - Memory:total=786,432KB free=682,569KB HeapUsage: Max=786,432KB used=101,814KB committed=203,776KB NonHeapUsage: Max=0KB used=131,297KB committed=134,528KB\n2023-08-09 08:25:56.325 [SF] INFO  [JTS-DeadlockMonitor-2] - CPU:cur=0.10% avg=0.76% 30 min avg=0.76% 10 min avg=0.76% 5 min avg=0.61% 1 min avg=0.12%\nGC:called=12 times CPU used=0.03%\nFinalizer:cur=0.00% avg=0.00% 30 min avg=0.00% 10 min avg=0.00% 5 min avg=0.00% 1 min avg=0.00%\nThreads Count:curr live=62 curr daemon=28\n2023-08-09 08:26:06.474 [SF] INFO  [JTS-SocketListener-55] - State: STOP, IsAPI: NO\n2023-08-09 08:26:06.475 [SF] ERROR [JTS-SocketListener-55] - Error parsing integer value from header.\njava.lang.NumberFormatException: For input string: &quot;&quot;\n    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\n    at java.lang.Integer.parseInt(Integer.java:569)\n    at java.lang.Integer.parseInt(Integer.java:615)\n    at jextend.bg.q(bg.java:965)\n    at jextend.eC.c(eC.java:480)\n    at jextend.eC.run(eC.java:299)\n    at java.lang.Thread.run(Thread.java:748)\n2023-08-09 08:26:06.475 [SF] WARN  [JTS-SocketListener-55] - Error\ntwslaunch.jutils.SLogging$Warning: API client version is missing.\n    at twslaunch.jutils.au.B(au.java:287)\n    at jextend.eC.run(eC.java:302)\n    at java.lang.Thread.run(Thread.java:748)\n2023-08-09 08:26:06.481 [SF] INFO  [JTS-SocketListener-55] - State: STOP, IsAPI: NO\n2023-08-09 08:26:06.481 [SF] ERROR [JTS-SocketListener-55] - Error parsing integer value from header.\njava.lang.NumberFormatException: For input string: &quot;&quot;\n    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\n    at java.lang.Integer.parseInt(Integer.java:569)\n    at java.lang.Integer.parseInt(Integer.java:615)\n    at jextend.bg.q(bg.java:965)\n    at jextend.eC.c(eC.java:480)\n    at jextend.eC.run(eC.java:299)\n    at java.lang.Thread.run(Thread.java:748)\n\n</code></pre>\n<p>It seems to point out that a header with the API version is missing (though it not name the parameter) I tried to connect creating a python script and adding headers live <code>version: 1.0</code>, or <code>w: 1</code>, etc, but it didn't work</p>\n<p>My config is:\n<a href=\"https://i.stack.imgur.com/FJfnJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FJfnJ.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","unit-testing","mockito","logback","slf4j"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1649059242,"post_id":71733717,"comment_id":126770970,"body_markdown":"You probably can&#39;t ignore this line directly in code unless you wrap the statement with a `if(logger.isEnabled(Level.WARN)) { ... }` and disable this logger in your tests (either specifically or more generally on a package/severity/general level). However, if you disable the loggers in your tests the logger itself should not do much beyond this statement and the statement itself doesn&#39;t look like it could throw a NPE. Care to share some details on where exactly this happens, i.e. the stacktrace?","body":"You probably can&#39;t ignore this line directly in code unless you wrap the statement with a <code>if(logger.isEnabled(Level.WARN)) { ... }</code> and disable this logger in your tests (either specifically or more generally on a package/severity/general level). However, if you disable the loggers in your tests the logger itself should not do much beyond this statement and the statement itself doesn&#39;t look like it could throw a NPE. Care to share some details on where exactly this happens, i.e. the stacktrace?"},{"owner":{"account_id":6125530,"reputation":2720,"user_id":4777670,"accept_rate":100,"display_name":"Saif"},"score":0,"creation_date":1649059301,"post_id":71733717,"comment_id":126770983,"body_markdown":"added stack trace","body":"added stack trace"}],"answers":[{"tags":[],"owner":{"account_id":6155088,"reputation":226,"user_id":4798347,"display_name":"Zephyr"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1649063173,"creation_date":1649063173,"answer_id":71734603,"question_id":71733717,"body_markdown":"The line responsible for the error (in the version that you mentioned) looks like this (see https://github.com/qos-ch/logback/blob/v_1.2.11/logback-classic/src/main/java/ch/qos/logback/classic/spi/ThrowableProxy.java#L99):\r\n\r\n    if (throwableSuppressed.length &gt; 0) {\r\n\r\nIt&#39;s worth noting that there&#39;s a fix for your issue, although I have no idea what version of Logback might have it now or in the future. https://github.com/qos-ch/logback/commit/c34645b320d2b31ccaf0de9bb079391904352a28 contains the following relevant change:\r\nReplaced\r\n\r\n    if (throwableSuppressed.length &gt; 0) {\r\n\r\nwith\r\n\r\n    // while JDK&#39;s implementation of getSuppressed() will always return a non-null array,\r\n    // this might not be the case in mocked throwables. We are being extra defensive here.\r\n    if (OptionHelper.isNotEmtpy(throwableSuppressed)) {\r\n\r\nI&#39;m generally not super keen on mocking Exceptions, myself. But if that&#39;s what your context demands, then mocking getSuppressed() to return a non-null (probably empty is fine) array might solve the issue.","title":"How to ignore/mock Slf4j log lines?","body":"<p>The line responsible for the error (in the version that you mentioned) looks like this (see <a href=\"https://github.com/qos-ch/logback/blob/v_1.2.11/logback-classic/src/main/java/ch/qos/logback/classic/spi/ThrowableProxy.java#L99\" rel=\"nofollow noreferrer\">https://github.com/qos-ch/logback/blob/v_1.2.11/logback-classic/src/main/java/ch/qos/logback/classic/spi/ThrowableProxy.java#L99</a>):</p>\n<pre><code>if (throwableSuppressed.length &gt; 0) {\n</code></pre>\n<p>It's worth noting that there's a fix for your issue, although I have no idea what version of Logback might have it now or in the future. <a href=\"https://github.com/qos-ch/logback/commit/c34645b320d2b31ccaf0de9bb079391904352a28\" rel=\"nofollow noreferrer\">https://github.com/qos-ch/logback/commit/c34645b320d2b31ccaf0de9bb079391904352a28</a> contains the following relevant change:\nReplaced</p>\n<pre><code>if (throwableSuppressed.length &gt; 0) {\n</code></pre>\n<p>with</p>\n<pre><code>// while JDK's implementation of getSuppressed() will always return a non-null array,\n// this might not be the case in mocked throwables. We are being extra defensive here.\nif (OptionHelper.isNotEmtpy(throwableSuppressed)) {\n</code></pre>\n<p>I'm generally not super keen on mocking Exceptions, myself. But if that's what your context demands, then mocking getSuppressed() to return a non-null (probably empty is fine) array might solve the issue.</p>\n"}],"owner":{"account_id":6125530,"reputation":2720,"user_id":4777670,"accept_rate":100,"display_name":"Saif"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1096,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71734603,"answer_count":1,"score":0,"last_activity_date":1695260788,"creation_date":1649058764,"question_id":71733717,"body_markdown":"I upgraded Spring Boot from 2.5.10 to 2.5.12 and it brought a breaking change for me in logback https://github.com/spring-projects/spring-boot/releases/tag/v2.5.11\r\n\r\nA few of my unit tests (using Mockito) are breaking with NullPointerException where I am passing a mocked exception to the log lines in the main code.\r\nFor example, this is a log line that I have in my main code, and the class is annotated with lombok&#39;s @Slf4j\r\n```java\r\nlog.warn(&quot;Exception occurred while doing something&quot;, exception);\r\n```\r\nEarlier, this log line was not throwing any errors.\r\n\r\nMy intention here is to not mock the logger, but to ignore this line through whatever workaround possible (even if I have to mock it).\r\n\r\nLombok adds the following on compilation (not sure if mocking would work here):\r\n```java\r\nprivate static final org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(HelloWorld.class);\r\n```\r\nOne workaround I have is to not use mocked exceptions and pass an actual exception but that&#39;s going to take the fun out of unit tests.\r\n\r\nStack trace:\r\n```\r\njava.lang.NullPointerException\r\n    at ch.qos.logback.classic.spi.ThrowableProxy.&lt;init&gt;(ThrowableProxy.java:99)\r\n    at ch.qos.logback.classic.spi.ThrowableProxy.&lt;init&gt;(ThrowableProxy.java:62)\r\n    at ch.qos.logback.classic.spi.LoggingEvent.&lt;init&gt;(LoggingEvent.java:119)\r\n    at ch.qos.logback.classic.Logger.buildLoggingEventAndAppend(Logger.java:419)\r\n    at ch.qos.logback.classic.Logger.filterAndLog_0_Or3Plus(Logger.java:383)\r\n    at ch.qos.logback.classic.Logger.warn(Logger.java:692)\r\n    at com.example.r.e.d.s.d.t.HelloWorld.executeInternal(HelloWorld.java:74)\r\n    at com.example.r.e.d.s.d.t.HelloWorldTest.testLocksOnDomain(HelloWorldTest.java:94)\r\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\r\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\r\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n    at org.mockito.internal.runners.DefaultInternalRunner$1$1.evaluate(DefaultInternalRunner.java:54)\r\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n    at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\r\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\r\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\r\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\r\n    at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\r\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\r\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\r\n    at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\r\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\r\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:413)\r\n    at org.mockito.internal.runners.DefaultInternalRunner$1.run(DefaultInternalRunner.java:99)\r\n    at org.mockito.internal.runners.DefaultInternalRunner.run(DefaultInternalRunner.java:105)\r\n    at org.mockito.internal.runners.StrictRunner.run(StrictRunner.java:40)\r\n    at org.mockito.junit.MockitoJUnitRunner.run(MockitoJUnitRunner.java:163)\r\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)\r\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\n\r\n\r\nProcess finished with exit code 255\r\n```\r\n\r\nMoreover, with my unit tests working with the previous library version. There was a problem that during the execution of the unit tests, it used to print logs like WARN and ERROR in the console (which sometimes created a lot of confusion).\r\n","title":"How to ignore/mock Slf4j log lines?","body":"<p>I upgraded Spring Boot from 2.5.10 to 2.5.12 and it brought a breaking change for me in logback <a href=\"https://github.com/spring-projects/spring-boot/releases/tag/v2.5.11\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/releases/tag/v2.5.11</a></p>\n<p>A few of my unit tests (using Mockito) are breaking with NullPointerException where I am passing a mocked exception to the log lines in the main code.\nFor example, this is a log line that I have in my main code, and the class is annotated with lombok's @Slf4j</p>\n<pre class=\"lang-java prettyprint-override\"><code>log.warn(&quot;Exception occurred while doing something&quot;, exception);\n</code></pre>\n<p>Earlier, this log line was not throwing any errors.</p>\n<p>My intention here is to not mock the logger, but to ignore this line through whatever workaround possible (even if I have to mock it).</p>\n<p>Lombok adds the following on compilation (not sure if mocking would work here):</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(HelloWorld.class);\n</code></pre>\n<p>One workaround I have is to not use mocked exceptions and pass an actual exception but that's going to take the fun out of unit tests.</p>\n<p>Stack trace:</p>\n<pre><code>java.lang.NullPointerException\n    at ch.qos.logback.classic.spi.ThrowableProxy.&lt;init&gt;(ThrowableProxy.java:99)\n    at ch.qos.logback.classic.spi.ThrowableProxy.&lt;init&gt;(ThrowableProxy.java:62)\n    at ch.qos.logback.classic.spi.LoggingEvent.&lt;init&gt;(LoggingEvent.java:119)\n    at ch.qos.logback.classic.Logger.buildLoggingEventAndAppend(Logger.java:419)\n    at ch.qos.logback.classic.Logger.filterAndLog_0_Or3Plus(Logger.java:383)\n    at ch.qos.logback.classic.Logger.warn(Logger.java:692)\n    at com.example.r.e.d.s.d.t.HelloWorld.executeInternal(HelloWorld.java:74)\n    at com.example.r.e.d.s.d.t.HelloWorldTest.testLocksOnDomain(HelloWorldTest.java:94)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\n    at org.mockito.internal.runners.DefaultInternalRunner$1$1.evaluate(DefaultInternalRunner.java:54)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\n    at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\n    at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:413)\n    at org.mockito.internal.runners.DefaultInternalRunner$1.run(DefaultInternalRunner.java:99)\n    at org.mockito.internal.runners.DefaultInternalRunner.run(DefaultInternalRunner.java:105)\n    at org.mockito.internal.runners.StrictRunner.run(StrictRunner.java:40)\n    at org.mockito.junit.MockitoJUnitRunner.run(MockitoJUnitRunner.java:163)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\n\n\nProcess finished with exit code 255\n</code></pre>\n<p>Moreover, with my unit tests working with the previous library version. There was a problem that during the execution of the unit tests, it used to print logs like WARN and ERROR in the console (which sometimes created a lot of confusion).</p>\n"},{"tags":["java","json","hibernate","spring-mvc"],"comments":[{"owner":{"account_id":4264785,"reputation":335,"user_id":3488143,"display_name":"Iryna"},"score":0,"creation_date":1455269580,"post_id":23101260,"comment_id":58424224,"body_markdown":"What would you say about this answer? http://stackoverflow.com/a/30559076/3488143","body":"What would you say about this answer? <a href=\"http://stackoverflow.com/a/30559076/3488143\">stackoverflow.com/a/30559076/3488143</a>"},{"owner":{"account_id":6010232,"reputation":2606,"user_id":4720910,"display_name":"Musa"},"score":0,"creation_date":1462134255,"post_id":23101260,"comment_id":61498601,"body_markdown":"this information may be helpful\nhttp://stackoverflow.com/questions/12505141/only-using-jsonignore-during-serialization-but-not-deserialization/36965995#36965995","body":"this information may be helpful <a href=\"http://stackoverflow.com/questions/12505141/only-using-jsonignore-during-serialization-but-not-deserialization/36965995#36965995\" title=\"only using jsonignore during serialization but not deserialization\">stackoverflow.com/questions/12505141/&hellip;</a>"},{"owner":{"account_id":20398931,"reputation":81,"user_id":14965133,"display_name":"Edward Abattam"},"score":0,"creation_date":1631100032,"post_id":23101260,"comment_id":122130905,"body_markdown":"I answered here\n[Easy way to filter fields dynamically](https://stackoverflow.com/a/69102018/14965133)","body":"I answered here <a href=\"https://stackoverflow.com/a/69102018/14965133\">Easy way to filter fields dynamically</a>"},{"owner":{"account_id":15397479,"reputation":993,"user_id":11214377,"display_name":"Andrew Mititi"},"score":0,"creation_date":1636983389,"post_id":23101260,"comment_id":123695640,"body_markdown":"To dynamically  ignore the field in json response, before you send back your response, try setting that field to null i.e ```entityClass.setFieldToIgnore(null)```. The spring-mvc is by default set to ignore null values when deserializing, or you can configure it manually","body":"To dynamically  ignore the field in json response, before you send back your response, try setting that field to null i.e <code>entityClass.setFieldToIgnore(null)</code>. The spring-mvc is by default set to ignore null values when deserializing, or you can configure it manually"}],"answers":[{"tags":[],"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1397630577,"creation_date":1397628647,"answer_id":23101347,"question_id":23101260,"body_markdown":"Add `@JsonInclude(JsonInclude.Include.NON_NULL)` (forces Jackson to serialize null values) to the class as well as `@JsonIgnore` to the password field.\r\n\r\nYou could of course set `@JsonIgnore` on createdBy and updatedBy as well if you always want to ignore then and not just in this specific case.\r\n\r\n**UPDATE**\r\n\r\nIn the event that you do not want to add the annotation to the POJO itself, a great option is Jackson&#39;s Mixin Annotations. Check out the [documentation][1]\r\n\r\n\r\n  [1]: http://wiki.fasterxml.com/JacksonMixInAnnotations","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>Add <code>@JsonInclude(JsonInclude.Include.NON_NULL)</code> (forces Jackson to serialize null values) to the class as well as <code>@JsonIgnore</code> to the password field.</p>\n\n<p>You could of course set <code>@JsonIgnore</code> on createdBy and updatedBy as well if you always want to ignore then and not just in this specific case.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>In the event that you do not want to add the annotation to the POJO itself, a great option is Jackson's Mixin Annotations. Check out the <a href=\"http://wiki.fasterxml.com/JacksonMixInAnnotations\" rel=\"noreferrer\">documentation</a></p>\n"},{"tags":[],"owner":{"account_id":2651999,"reputation":7958,"user_id":3145373,"accept_rate":77,"display_name":"user3145373 "},"down_vote_count":8,"up_vote_count":197,"is_accepted":false,"score":189,"last_activity_date":1584965036,"creation_date":1397628777,"answer_id":23101380,"question_id":23101260,"body_markdown":"Add the `@JsonIgnoreProperties(&quot;fieldname&quot;)` annotation  to your POJO.\r\n\r\nOr you can use `@JsonIgnore` before the name of the field you want to ignore while deserializing JSON. Example:\r\n\r\n    @JsonIgnore\r\n    @JsonProperty(value = &quot;user_password&quot;)\r\n    public String getUserPassword() {\r\n        return userPassword;\r\n    }\r\n\r\n\r\n[GitHub example](https://gist.github.com/thurloat/2510887)","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>Add the <code>@JsonIgnoreProperties(\"fieldname\")</code> annotation  to your POJO.</p>\n\n<p>Or you can use <code>@JsonIgnore</code> before the name of the field you want to ignore while deserializing JSON. Example:</p>\n\n<pre><code>@JsonIgnore\n@JsonProperty(value = \"user_password\")\npublic String getUserPassword() {\n    return userPassword;\n}\n</code></pre>\n\n<p><a href=\"https://gist.github.com/thurloat/2510887\" rel=\"noreferrer\">GitHub example</a></p>\n"},{"tags":[],"owner":{"account_id":224671,"reputation":4300,"user_id":484661,"accept_rate":68,"display_name":"monitorjbl"},"down_vote_count":0,"up_vote_count":41,"is_accepted":false,"score":41,"last_activity_date":1446513238,"creation_date":1423350446,"answer_id":28388559,"question_id":23101260,"body_markdown":"I know I&#39;m a bit late to the party, but I actually ran into this as well a few months back. All of the available solutions weren&#39;t very appealing to me (mixins? ugh!), so I ended up creating a new library to make this process cleaner. It&#39;s available here if anyone would like to try it out: https://github.com/monitorjbl/spring-json-view.\r\n\r\nThe basic usage is pretty simple, you use the `JsonView` object in your controller methods like so:\r\n\r\n    import com.monitorjbl.json.JsonView;\r\n    import static com.monitorjbl.json.Match.match;\r\n\r\n\t@RequestMapping(method = RequestMethod.GET, value = &quot;/myObject&quot;)\r\n\t@ResponseBody\r\n\tpublic void getMyObjects() {\r\n\t    //get a list of the objects\r\n\t    List&lt;MyObject&gt; list = myObjectService.list();\r\n\r\n\t    //exclude expensive field\r\n\t    JsonView.with(list).onClass(MyObject.class, match().exclude(&quot;contains&quot;));\r\n\t}\r\n\r\nYou can also use it outside of Spring: \r\n\r\n\timport com.fasterxml.jackson.databind.ObjectMapper;\r\n\timport com.fasterxml.jackson.databind.module.SimpleModule;\r\n\timport static com.monitorjbl.json.Match.match;\r\n\r\n\tObjectMapper mapper = new ObjectMapper();\r\n\tSimpleModule module = new SimpleModule();\r\n\tmodule.addSerializer(JsonView.class, new JsonViewSerializer());\r\n\tmapper.registerModule(module);\r\n\r\n\tmapper.writeValueAsString(JsonView.with(list)\r\n\t      .onClass(MyObject.class, match()\r\n\t        .exclude(&quot;contains&quot;))\r\n\t      .onClass(MySmallObject.class, match()\r\n\t        .exclude(&quot;id&quot;));\r\n\t        ","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>I know I'm a bit late to the party, but I actually ran into this as well a few months back. All of the available solutions weren't very appealing to me (mixins? ugh!), so I ended up creating a new library to make this process cleaner. It's available here if anyone would like to try it out: <a href=\"https://github.com/monitorjbl/spring-json-view\" rel=\"noreferrer\">https://github.com/monitorjbl/spring-json-view</a>.</p>\n\n<p>The basic usage is pretty simple, you use the <code>JsonView</code> object in your controller methods like so:</p>\n\n<pre><code>import com.monitorjbl.json.JsonView;\nimport static com.monitorjbl.json.Match.match;\n\n@RequestMapping(method = RequestMethod.GET, value = \"/myObject\")\n@ResponseBody\npublic void getMyObjects() {\n    //get a list of the objects\n    List&lt;MyObject&gt; list = myObjectService.list();\n\n    //exclude expensive field\n    JsonView.with(list).onClass(MyObject.class, match().exclude(\"contains\"));\n}\n</code></pre>\n\n<p>You can also use it outside of Spring: </p>\n\n<pre><code>import com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.module.SimpleModule;\nimport static com.monitorjbl.json.Match.match;\n\nObjectMapper mapper = new ObjectMapper();\nSimpleModule module = new SimpleModule();\nmodule.addSerializer(JsonView.class, new JsonViewSerializer());\nmapper.registerModule(module);\n\nmapper.writeValueAsString(JsonView.with(list)\n      .onClass(MyObject.class, match()\n        .exclude(\"contains\"))\n      .onClass(MySmallObject.class, match()\n        .exclude(\"id\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":211811,"reputation":726,"user_id":464219,"accept_rate":17,"display_name":"Hamedz"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1570921480,"creation_date":1460635392,"answer_id":36622507,"question_id":23101260,"body_markdown":"If I were you and wanted to do so, I wouldn&#39;t use my User entity in Controller layer.Instead I create and use UserDto (Data transfer object) to communicate with business(Service) layer and Controller.\r\nYou can use Apache BeanUtils(copyProperties method) to copy data from User entity to UserDto.","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>If I were you and wanted to do so, I wouldn't use my User entity in Controller layer.Instead I create and use UserDto (Data transfer object) to communicate with business(Service) layer and Controller.\nYou can use Apache BeanUtils(copyProperties method) to copy data from User entity to UserDto.</p>\n"},{"tags":[],"owner":{"account_id":6695581,"reputation":149,"user_id":5163678,"display_name":"C2dric"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1462193595,"creation_date":1462193595,"answer_id":36982952,"question_id":23101260,"body_markdown":"I&#39;ve found a solution for me with Spring and jackson\r\n\r\n**First specify the filter name in the entity**\r\n\r\n    @Entity\r\n    @Table(name = &quot;SECTEUR&quot;)\r\n    @JsonFilter(ModelJsonFilters.SECTEUR_FILTER)\r\n    public class Secteur implements Serializable {\r\n\r\n\t/** Serial UID */\r\n\tprivate static final long serialVersionUID = 5697181222899184767L;\r\n\r\n\t/**\r\n\t * Unique ID\r\n\t */\r\n\t@Id\r\n\t@JsonView(View.SecteurWithoutChildrens.class)\r\n\t@Column(name = &quot;id&quot;)\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate long id;\r\n\r\n\t@JsonView(View.SecteurWithoutChildrens.class)\r\n\t@Column(name = &quot;code&quot;, nullable = false, length = 35)\r\n\tprivate String code;\r\n\r\n\t/**\r\n\t * Identifiant du secteur parent\r\n\t */\r\n\t@JsonView(View.SecteurWithoutChildrens.class)\r\n\t@Column(name = &quot;id_parent&quot;)\r\n\tprivate Long idParent;\r\n\r\n\t@OneToMany(fetch = FetchType.LAZY)\r\n\t@JoinColumn(name = &quot;id_parent&quot;)\r\n\tprivate List&lt;Secteur&gt; secteursEnfants = new ArrayList&lt;&gt;(0);\r\n\r\n    }\r\n\r\n**Then you can see the constants filters names class with the default FilterProvider used in spring configuration**\r\n\r\n    public class ModelJsonFilters {\r\n\r\n\tpublic final static String SECTEUR_FILTER = &quot;SecteurFilter&quot;;\r\n\tpublic final static String APPLICATION_FILTER = &quot;ApplicationFilter&quot;;\r\n\tpublic final static String SERVICE_FILTER = &quot;ServiceFilter&quot;;\r\n\tpublic final static String UTILISATEUR_FILTER = &quot;UtilisateurFilter&quot;;\r\n\r\n\tpublic static SimpleFilterProvider getDefaultFilters() {\r\n\t\tSimpleBeanPropertyFilter theFilter = SimpleBeanPropertyFilter.serializeAll();\r\n\t\treturn new SimpleFilterProvider().setDefaultFilter(theFilter);\r\n\t}\r\n\r\n    }\r\n\r\n**Spring configuration :**\r\n\r\n    @EnableWebMvc\r\n    @Configuration\r\n    @ComponentScan(basePackages = &quot;fr.sodebo&quot;)\r\n\r\n    public class ApiRootConfiguration extends WebMvcConfigurerAdapter {\r\n\r\n\t@Autowired\r\n\tprivate EntityManagerFactory entityManagerFactory;\r\n\r\n\r\n\t/**\r\n\t * config qui permet d&#39;&#233;viter les &quot;Lazy loading Error&quot; au moment de la\r\n\t * conversion json par jackson pour les retours des services REST&lt;br&gt;\r\n\t * on permet &#224; jackson d&#39;acceder &#224; sessionFactory pour charger ce dont il a\r\n\t * besoin\r\n\t */\r\n\t@Override\r\n\tpublic void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\r\n\r\n\t\tsuper.configureMessageConverters(converters);\r\n\t\tMappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter();\r\n\t\tObjectMapper mapper = new ObjectMapper();\r\n\r\n\t\t// config d&#39;hibernate pour la conversion json\r\n\t\tmapper.registerModule(getConfiguredHibernateModule());//\r\n\r\n\t\t// inscrit les filtres json\r\n\t\tsubscribeFiltersInMapper(mapper);\r\n\r\n\t\t// config du comportement de json views\r\n\t\tmapper.configure(MapperFeature.DEFAULT_VIEW_INCLUSION, false);\r\n\r\n\t\tconverter.setObjectMapper(mapper);\r\n\t\tconverters.add(converter);\r\n\t}\r\n\r\n\t/**\r\n\t * config d&#39;hibernate pour la conversion json\r\n\t * \r\n\t * @return Hibernate5Module\r\n\t */\r\n\tprivate Hibernate5Module getConfiguredHibernateModule() {\r\n\t\tSessionFactory sessionFactory = entityManagerFactory.unwrap(SessionFactory.class);\r\n\t\tHibernate5Module module = new Hibernate5Module(sessionFactory);\r\n\t\tmodule.configure(Hibernate5Module.Feature.FORCE_LAZY_LOADING, true);\r\n\r\n\t\treturn module;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * inscrit les filtres json\r\n\t * \r\n\t * @param mapper\r\n\t */\r\n\tprivate void subscribeFiltersInMapper(ObjectMapper mapper) {\r\n\r\n\t\tmapper.setFilterProvider(ModelJsonFilters.getDefaultFilters());\r\n\r\n\t}\r\n\r\n    }\r\n\r\n**Endly I can specify a specific filter in restConstoller when i need....**\r\n\r\n    @RequestMapping(value = &quot;/{id}/droits/&quot;, method = RequestMethod.GET)\r\n\tpublic MappingJacksonValue getListDroits(@PathVariable long id) {\r\n\r\n\t\tLOGGER.debug(&quot;Get all droits of user with id {}&quot;, id);\r\n\r\n\t\tList&lt;Droit&gt; droits = utilisateurService.findDroitsDeUtilisateur(id);\r\n\r\n\t\tMappingJacksonValue value;\r\n\r\n\t\tUtilisateurWithSecteurs utilisateurWithSecteurs = droitsUtilisateur.fillLists(droits).get(id);\r\n\r\n\t\tvalue = new MappingJacksonValue(utilisateurWithSecteurs);\r\n\r\n\t\tFilterProvider filters = ModelJsonFilters.getDefaultFilters().addFilter(ModelJsonFilters.SECTEUR_FILTER, SimpleBeanPropertyFilter.serializeAllExcept(&quot;secteursEnfants&quot;)).addFilter(ModelJsonFilters.APPLICATION_FILTER,\r\n\t\t\t\tSimpleBeanPropertyFilter.serializeAllExcept(&quot;services&quot;));\r\n\r\n\t\tvalue.setFilters(filters);\r\n\t\treturn value;\r\n\r\n\t}","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>I've found a solution for me with Spring and jackson</p>\n\n<p><strong>First specify the filter name in the entity</strong></p>\n\n<pre><code>@Entity\n@Table(name = \"SECTEUR\")\n@JsonFilter(ModelJsonFilters.SECTEUR_FILTER)\npublic class Secteur implements Serializable {\n\n/** Serial UID */\nprivate static final long serialVersionUID = 5697181222899184767L;\n\n/**\n * Unique ID\n */\n@Id\n@JsonView(View.SecteurWithoutChildrens.class)\n@Column(name = \"id\")\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate long id;\n\n@JsonView(View.SecteurWithoutChildrens.class)\n@Column(name = \"code\", nullable = false, length = 35)\nprivate String code;\n\n/**\n * Identifiant du secteur parent\n */\n@JsonView(View.SecteurWithoutChildrens.class)\n@Column(name = \"id_parent\")\nprivate Long idParent;\n\n@OneToMany(fetch = FetchType.LAZY)\n@JoinColumn(name = \"id_parent\")\nprivate List&lt;Secteur&gt; secteursEnfants = new ArrayList&lt;&gt;(0);\n\n}\n</code></pre>\n\n<p><strong>Then you can see the constants filters names class with the default FilterProvider used in spring configuration</strong></p>\n\n<pre><code>public class ModelJsonFilters {\n\npublic final static String SECTEUR_FILTER = \"SecteurFilter\";\npublic final static String APPLICATION_FILTER = \"ApplicationFilter\";\npublic final static String SERVICE_FILTER = \"ServiceFilter\";\npublic final static String UTILISATEUR_FILTER = \"UtilisateurFilter\";\n\npublic static SimpleFilterProvider getDefaultFilters() {\n    SimpleBeanPropertyFilter theFilter = SimpleBeanPropertyFilter.serializeAll();\n    return new SimpleFilterProvider().setDefaultFilter(theFilter);\n}\n\n}\n</code></pre>\n\n<p><strong>Spring configuration :</strong></p>\n\n<pre><code>@EnableWebMvc\n@Configuration\n@ComponentScan(basePackages = \"fr.sodebo\")\n\npublic class ApiRootConfiguration extends WebMvcConfigurerAdapter {\n\n@Autowired\nprivate EntityManagerFactory entityManagerFactory;\n\n\n/**\n * config qui permet d'viter les \"Lazy loading Error\" au moment de la\n * conversion json par jackson pour les retours des services REST&lt;br&gt;\n * on permet  jackson d'acceder  sessionFactory pour charger ce dont il a\n * besoin\n */\n@Override\npublic void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\n\n    super.configureMessageConverters(converters);\n    MappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter();\n    ObjectMapper mapper = new ObjectMapper();\n\n    // config d'hibernate pour la conversion json\n    mapper.registerModule(getConfiguredHibernateModule());//\n\n    // inscrit les filtres json\n    subscribeFiltersInMapper(mapper);\n\n    // config du comportement de json views\n    mapper.configure(MapperFeature.DEFAULT_VIEW_INCLUSION, false);\n\n    converter.setObjectMapper(mapper);\n    converters.add(converter);\n}\n\n/**\n * config d'hibernate pour la conversion json\n * \n * @return Hibernate5Module\n */\nprivate Hibernate5Module getConfiguredHibernateModule() {\n    SessionFactory sessionFactory = entityManagerFactory.unwrap(SessionFactory.class);\n    Hibernate5Module module = new Hibernate5Module(sessionFactory);\n    module.configure(Hibernate5Module.Feature.FORCE_LAZY_LOADING, true);\n\n    return module;\n\n}\n\n/**\n * inscrit les filtres json\n * \n * @param mapper\n */\nprivate void subscribeFiltersInMapper(ObjectMapper mapper) {\n\n    mapper.setFilterProvider(ModelJsonFilters.getDefaultFilters());\n\n}\n\n}\n</code></pre>\n\n<p><strong>Endly I can specify a specific filter in restConstoller when i need....</strong></p>\n\n<pre><code>@RequestMapping(value = \"/{id}/droits/\", method = RequestMethod.GET)\npublic MappingJacksonValue getListDroits(@PathVariable long id) {\n\n    LOGGER.debug(\"Get all droits of user with id {}\", id);\n\n    List&lt;Droit&gt; droits = utilisateurService.findDroitsDeUtilisateur(id);\n\n    MappingJacksonValue value;\n\n    UtilisateurWithSecteurs utilisateurWithSecteurs = droitsUtilisateur.fillLists(droits).get(id);\n\n    value = new MappingJacksonValue(utilisateurWithSecteurs);\n\n    FilterProvider filters = ModelJsonFilters.getDefaultFilters().addFilter(ModelJsonFilters.SECTEUR_FILTER, SimpleBeanPropertyFilter.serializeAllExcept(\"secteursEnfants\")).addFilter(ModelJsonFilters.APPLICATION_FILTER,\n            SimpleBeanPropertyFilter.serializeAllExcept(\"services\"));\n\n    value.setFilters(filters);\n    return value;\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8846170,"reputation":13,"user_id":6606839,"display_name":"Jeevan Gowda"},"down_vote_count":8,"up_vote_count":2,"is_accepted":false,"score":-6,"last_activity_date":1523991873,"creation_date":1506949752,"answer_id":46526138,"question_id":23101260,"body_markdown":"In your entity class add `@JsonInclude(JsonInclude.Include.NON_NULL)` annotation to resolve the problem\r\n\r\nit will look like\r\n\r\n\r\n    @Entity\r\n    @JsonInclude(JsonInclude.Include.NON_NULL)","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>In your entity class add <code>@JsonInclude(JsonInclude.Include.NON_NULL)</code> annotation to resolve the problem</p>\n\n<p>it will look like</p>\n\n<pre><code>@Entity\n@JsonInclude(JsonInclude.Include.NON_NULL)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6348487,"reputation":724,"user_id":4928281,"accept_rate":73,"display_name":"Leonardo Beal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1510738520,"creation_date":1510738520,"answer_id":47303816,"question_id":23101260,"body_markdown":"Would not creating a `UserJsonResponse` class and populating with the wanted fields be a cleaner solution?\r\n\r\nReturning directly a JSON seems a great solution when you want to give all the model back. Otherwise it just gets messy.\r\n\r\nIn the future, for example you might want to have a JSON field that does not match any Model field and then you&#39;re in a bigger trouble.","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>Would not creating a <code>UserJsonResponse</code> class and populating with the wanted fields be a cleaner solution?</p>\n\n<p>Returning directly a JSON seems a great solution when you want to give all the model back. Otherwise it just gets messy.</p>\n\n<p>In the future, for example you might want to have a JSON field that does not match any Model field and then you're in a bigger trouble.</p>\n"},{"tags":[],"owner":{"account_id":1612911,"reputation":3570,"user_id":1491378,"accept_rate":88,"display_name":"Hett"},"down_vote_count":0,"up_vote_count":51,"is_accepted":false,"score":51,"last_activity_date":1650952920,"creation_date":1520674573,"answer_id":49207551,"question_id":23101260,"body_markdown":"&gt; Can I do it dynamically?\r\n\r\nCreate view class:\r\n    \r\n    public class View {\r\n        static class Public { }\r\n        static class ExtendedPublic extends Public { }\r\n        static class Internal extends ExtendedPublic { }\r\n    }\r\n\r\nAnnotate you model\r\n\r\n    @Document\r\n    public class User {\r\n    \r\n        @Id\r\n        @JsonView(View.Public.class)\r\n        private String id;\r\n    \r\n        @JsonView(View.Internal.class)\r\n        private String email;\r\n    \r\n        @JsonView(View.Public.class)\r\n        private String name;\r\n    \r\n        @JsonView(View.Public.class)\r\n        private Instant createdAt = Instant.now();\r\n        // getters/setters\r\n    }\r\n\r\nSpecify the view class in your controller\r\n\r\n\r\n    @RequestMapping(&quot;/user/{email}&quot;)\r\n    public class UserController {\r\n\r\n        private final UserRepository userRepository;\r\n\r\n        @Autowired\r\n        UserController(UserRepository userRepository) {\r\n            this.userRepository = userRepository;\r\n        }\r\n\r\n        @RequestMapping(method = RequestMethod.GET)\r\n        @JsonView(View.Internal.class)\r\n        public @ResponseBody Optional&lt;User&gt; get(@PathVariable String email) {\r\n            return userRepository.findByEmail(email);\r\n        }\r\n\r\n    }\r\n\r\nData example:\r\n\r\n    {&quot;id&quot;:&quot;5aa2496df863482dc4da2067&quot;,&quot;name&quot;:&quot;test&quot;,&quot;createdAt&quot;:&quot;2018-03-10T09:35:31.050353800Z&quot;}\r\n\r\nUPD: keep in mind that it&#39;s not best practice to use entity in response. Better use different DTO for each case and fill them using `modelmapper`","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<blockquote>\n<p>Can I do it dynamically?</p>\n</blockquote>\n<p>Create view class:</p>\n<pre><code>public class View {\n    static class Public { }\n    static class ExtendedPublic extends Public { }\n    static class Internal extends ExtendedPublic { }\n}\n</code></pre>\n<p>Annotate you model</p>\n<pre><code>@Document\npublic class User {\n\n    @Id\n    @JsonView(View.Public.class)\n    private String id;\n\n    @JsonView(View.Internal.class)\n    private String email;\n\n    @JsonView(View.Public.class)\n    private String name;\n\n    @JsonView(View.Public.class)\n    private Instant createdAt = Instant.now();\n    // getters/setters\n}\n</code></pre>\n<p>Specify the view class in your controller</p>\n<pre><code>@RequestMapping(&quot;/user/{email}&quot;)\npublic class UserController {\n\n    private final UserRepository userRepository;\n\n    @Autowired\n    UserController(UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n\n    @RequestMapping(method = RequestMethod.GET)\n    @JsonView(View.Internal.class)\n    public @ResponseBody Optional&lt;User&gt; get(@PathVariable String email) {\n        return userRepository.findByEmail(email);\n    }\n\n}\n</code></pre>\n<p>Data example:</p>\n<pre><code>{&quot;id&quot;:&quot;5aa2496df863482dc4da2067&quot;,&quot;name&quot;:&quot;test&quot;,&quot;createdAt&quot;:&quot;2018-03-10T09:35:31.050353800Z&quot;}\n</code></pre>\n<p>UPD: keep in mind that it's not best practice to use entity in response. Better use different DTO for each case and fill them using <code>modelmapper</code></p>\n"},{"tags":[],"owner":{"account_id":6413292,"reputation":577,"user_id":4972235,"display_name":"Devendra Dora"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1523991849,"creation_date":1523991378,"answer_id":49885568,"question_id":23101260,"body_markdown":"I have created a JsonUtil which can be used to ignore fields at runtime while giving a response. \r\n\r\nExample Usage :\r\n     First argument should be any POJO class (Student) and ignoreFields is comma seperated fields you want to ignore in response. \r\n    \r\n     Student st = new Student();\r\n     createJsonIgnoreFields(st,&quot;firstname,age&quot;);\r\n\r\n    import java.util.logging.Logger;\r\n    \r\n    import org.codehaus.jackson.map.ObjectMapper;\r\n    import org.codehaus.jackson.map.ObjectWriter;\r\n    import org.codehaus.jackson.map.ser.FilterProvider;\r\n    import org.codehaus.jackson.map.ser.impl.SimpleBeanPropertyFilter;\r\n    import org.codehaus.jackson.map.ser.impl.SimpleFilterProvider;\r\n\r\n    public class JsonUtil {\r\n\r\n      public static String createJsonIgnoreFields(Object object, String ignoreFields) {\r\n         try {\r\n             ObjectMapper mapper = new ObjectMapper();\r\n             mapper.getSerializationConfig().addMixInAnnotations(Object.class, JsonPropertyFilterMixIn.class);\r\n             String[] ignoreFieldsArray = ignoreFields.split(&quot;,&quot;);\r\n             FilterProvider filters = new SimpleFilterProvider()\r\n                 .addFilter(&quot;filter properties by field names&quot;,\r\n                     SimpleBeanPropertyFilter.serializeAllExcept(ignoreFieldsArray));\r\n             ObjectWriter writer = mapper.writer().withFilters(filters);\r\n             return writer.writeValueAsString(object);\r\n         } catch (Exception e) {\r\n             //handle exception here\r\n         }\r\n         return &quot;&quot;;\r\n       }\r\n\r\n       public static String createJson(Object object) {\r\n            try {\r\n             ObjectMapper mapper = new ObjectMapper();\r\n             ObjectWriter writer = mapper.writer().withDefaultPrettyPrinter();\r\n             return writer.writeValueAsString(object);\r\n            }catch (Exception e) {\r\n             //handle exception here\r\n            }\r\n            return &quot;&quot;;\r\n       }\r\n     }    \r\n    \r\n    \r\n   ","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>I have created a JsonUtil which can be used to ignore fields at runtime while giving a response. </p>\n\n<p>Example Usage :\n     First argument should be any POJO class (Student) and ignoreFields is comma seperated fields you want to ignore in response. </p>\n\n<pre><code> Student st = new Student();\n createJsonIgnoreFields(st,\"firstname,age\");\n\nimport java.util.logging.Logger;\n\nimport org.codehaus.jackson.map.ObjectMapper;\nimport org.codehaus.jackson.map.ObjectWriter;\nimport org.codehaus.jackson.map.ser.FilterProvider;\nimport org.codehaus.jackson.map.ser.impl.SimpleBeanPropertyFilter;\nimport org.codehaus.jackson.map.ser.impl.SimpleFilterProvider;\n\npublic class JsonUtil {\n\n  public static String createJsonIgnoreFields(Object object, String ignoreFields) {\n     try {\n         ObjectMapper mapper = new ObjectMapper();\n         mapper.getSerializationConfig().addMixInAnnotations(Object.class, JsonPropertyFilterMixIn.class);\n         String[] ignoreFieldsArray = ignoreFields.split(\",\");\n         FilterProvider filters = new SimpleFilterProvider()\n             .addFilter(\"filter properties by field names\",\n                 SimpleBeanPropertyFilter.serializeAllExcept(ignoreFieldsArray));\n         ObjectWriter writer = mapper.writer().withFilters(filters);\n         return writer.writeValueAsString(object);\n     } catch (Exception e) {\n         //handle exception here\n     }\n     return \"\";\n   }\n\n   public static String createJson(Object object) {\n        try {\n         ObjectMapper mapper = new ObjectMapper();\n         ObjectWriter writer = mapper.writer().withDefaultPrettyPrinter();\n         return writer.writeValueAsString(object);\n        }catch (Exception e) {\n         //handle exception here\n        }\n        return \"\";\n   }\n }    \n</code></pre>\n"},{"tags":[],"owner":{"account_id":6718018,"reputation":1158,"user_id":5179190,"accept_rate":29,"display_name":"Shafqat Shafi"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1535042652,"creation_date":1535042652,"answer_id":51990626,"question_id":23101260,"body_markdown":"Yes, you can specify which fields are serialized as JSON response and which to ignore.\r\nThis is what you need to do to implement Dynamically ignore properties.\r\n\r\n1) First, you need to add @JsonFilter from com.fasterxml.jackson.annotation.JsonFilter on your entity class as.\r\n\r\n    import com.fasterxml.jackson.annotation.JsonFilter;\r\n    \r\n    @JsonFilter(&quot;SomeBeanFilter&quot;)\r\n    public class SomeBean {\r\n      \r\n      private String field1;\r\n      \r\n      private String field2;\r\n      \r\n      private String field3;\r\n    \r\n      // getters/setters\r\n    }\r\n\r\n2) Then in your controller, you have to add create the MappingJacksonValue object and set filters on it and in the end, you have to return this object.\r\n\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    \r\n    import org.springframework.http.converter.json.MappingJacksonValue;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    import com.fasterxml.jackson.databind.ser.FilterProvider;\r\n    import com.fasterxml.jackson.databind.ser.impl.SimpleBeanPropertyFilter;\r\n    import com.fasterxml.jackson.databind.ser.impl.SimpleFilterProvider;\r\n    \r\n    @RestController\r\n    public class FilteringController {\r\n    \r\n      // Here i want to ignore all properties except field1,field2.\r\n      @GetMapping(&quot;/ignoreProperties&quot;)\r\n      public MappingJacksonValue retrieveSomeBean() {\r\n        SomeBean someBean = new SomeBean(&quot;value1&quot;, &quot;value2&quot;, &quot;value3&quot;);\r\n    \r\n        SimpleBeanPropertyFilter filter = SimpleBeanPropertyFilter.filterOutAllExcept(&quot;field1&quot;, &quot;field2&quot;);\r\n    \r\n        FilterProvider filters = new SimpleFilterProvider().addFilter(&quot;SomeBeanFilter&quot;, filter);\r\n    \r\n        MappingJacksonValue mapping = new MappingJacksonValue(someBean);\r\n    \r\n        mapping.setFilters(filters);\r\n    \r\n        return mapping;\r\n      }\r\n    }\r\n\r\n\r\nThis is what you will get in response:\r\n\r\n    {\r\n      field1:&quot;value1&quot;,\r\n      field2:&quot;value2&quot;\r\n    }\r\n\r\ninstead of this:\r\n\r\n    {\r\n      field1:&quot;value1&quot;,\r\n      field2:&quot;value2&quot;,\r\n      field3:&quot;value3&quot;\r\n    }\r\n\r\nHere you can see it ignores other properties(field3 in this case) in response except for property field1 and field2.\r\n\r\nHope this helps.\r\n","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>Yes, you can specify which fields are serialized as JSON response and which to ignore.\nThis is what you need to do to implement Dynamically ignore properties.</p>\n\n<p>1) First, you need to add @JsonFilter from com.fasterxml.jackson.annotation.JsonFilter on your entity class as.</p>\n\n<pre><code>import com.fasterxml.jackson.annotation.JsonFilter;\n\n@JsonFilter(\"SomeBeanFilter\")\npublic class SomeBean {\n\n  private String field1;\n\n  private String field2;\n\n  private String field3;\n\n  // getters/setters\n}\n</code></pre>\n\n<p>2) Then in your controller, you have to add create the MappingJacksonValue object and set filters on it and in the end, you have to return this object.</p>\n\n<pre><code>import java.util.Arrays;\nimport java.util.List;\n\nimport org.springframework.http.converter.json.MappingJacksonValue;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.fasterxml.jackson.databind.ser.FilterProvider;\nimport com.fasterxml.jackson.databind.ser.impl.SimpleBeanPropertyFilter;\nimport com.fasterxml.jackson.databind.ser.impl.SimpleFilterProvider;\n\n@RestController\npublic class FilteringController {\n\n  // Here i want to ignore all properties except field1,field2.\n  @GetMapping(\"/ignoreProperties\")\n  public MappingJacksonValue retrieveSomeBean() {\n    SomeBean someBean = new SomeBean(\"value1\", \"value2\", \"value3\");\n\n    SimpleBeanPropertyFilter filter = SimpleBeanPropertyFilter.filterOutAllExcept(\"field1\", \"field2\");\n\n    FilterProvider filters = new SimpleFilterProvider().addFilter(\"SomeBeanFilter\", filter);\n\n    MappingJacksonValue mapping = new MappingJacksonValue(someBean);\n\n    mapping.setFilters(filters);\n\n    return mapping;\n  }\n}\n</code></pre>\n\n<p>This is what you will get in response:</p>\n\n<pre><code>{\n  field1:\"value1\",\n  field2:\"value2\"\n}\n</code></pre>\n\n<p>instead of this:</p>\n\n<pre><code>{\n  field1:\"value1\",\n  field2:\"value2\",\n  field3:\"value3\"\n}\n</code></pre>\n\n<p>Here you can see it ignores other properties(field3 in this case) in response except for property field1 and field2.</p>\n\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":10601072,"reputation":1176,"user_id":7807996,"display_name":"ceekay"},"down_vote_count":1,"up_vote_count":24,"is_accepted":false,"score":23,"last_activity_date":1539107897,"creation_date":1539107897,"answer_id":52726827,"question_id":23101260,"body_markdown":"We can do this by setting access to `JsonProperty.Access.WRITE_ONLY` while declaring the property.\r\n\r\n    @JsonProperty( value = &quot;password&quot;, access = JsonProperty.Access.WRITE_ONLY)\r\n    @SerializedName(&quot;password&quot;)\r\n    private String password;","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>We can do this by setting access to <code>JsonProperty.Access.WRITE_ONLY</code> while declaring the property.</p>\n\n<pre><code>@JsonProperty( value = \"password\", access = JsonProperty.Access.WRITE_ONLY)\n@SerializedName(\"password\")\nprivate String password;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2233181,"reputation":3805,"user_id":1970299,"accept_rate":72,"display_name":"Mehdi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553565278,"creation_date":1553564953,"answer_id":55348748,"question_id":23101260,"body_markdown":"This is a clean utility tool for the above [answer][1] :\r\n\r\n    @GetMapping(value = &quot;/my-url&quot;)\r\n    public @ResponseBody\r\n    MappingJacksonValue getMyBean() {\r\n        List&lt;MyBean&gt; myBeans = Service.findAll();\r\n        MappingJacksonValue mappingValue = MappingFilterUtils.applyFilter(myBeans, MappingFilterUtils.JsonFilterMode.EXCLUDE_FIELD_MODE, &quot;MyFilterName&quot;, &quot;myBiggerObject.mySmallerObject.mySmallestObject&quot;);\r\n        return mappingValue;\r\n    }\r\n\r\n    //AND THE UTILITY CLASS\r\n    public class MappingFilterUtils {\r\n\r\n        public enum JsonFilterMode {\r\n            INCLUDE_FIELD_MODE, EXCLUDE_FIELD_MODE\r\n        }\r\n        public static MappingJacksonValue applyFilter(Object object, final JsonFilterMode mode, final String filterName, final String... fields) {\r\n            if (fields == null || fields.length == 0) {\r\n                throw new IllegalArgumentException(&quot;You should pass at least one field&quot;);\r\n            }\r\n            return applyFilter(object, mode, filterName, new HashSet&lt;&gt;(Arrays.asList(fields)));\r\n        }\r\n\r\n        public static MappingJacksonValue applyFilter(Object object, final JsonFilterMode mode, final String filterName, final Set&lt;String&gt; fields) {\r\n            if (fields == null || fields.isEmpty()) {\r\n                throw new IllegalArgumentException(&quot;You should pass at least one field&quot;);\r\n            }\r\n\r\n            SimpleBeanPropertyFilter filter = null;\r\n            switch (mode) {\r\n                case EXCLUDE_FIELD_MODE:\r\n                    filter = SimpleBeanPropertyFilter.serializeAllExcept(fields);\r\n                    break;\r\n                case INCLUDE_FIELD_MODE:\r\n                    filter = SimpleBeanPropertyFilter.filterOutAllExcept(fields);\r\n                    break;\r\n            }\r\n\r\n            FilterProvider filters = new SimpleFilterProvider().addFilter(filterName, filter);\r\n            MappingJacksonValue mapping = new MappingJacksonValue(object);\r\n            mapping.setFilters(filters);\r\n            return mapping;\r\n        }\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/a/51990626/1970299","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>This is a clean utility tool for the above <a href=\"https://stackoverflow.com/a/51990626/1970299\">answer</a> :</p>\n\n<pre><code>@GetMapping(value = \"/my-url\")\npublic @ResponseBody\nMappingJacksonValue getMyBean() {\n    List&lt;MyBean&gt; myBeans = Service.findAll();\n    MappingJacksonValue mappingValue = MappingFilterUtils.applyFilter(myBeans, MappingFilterUtils.JsonFilterMode.EXCLUDE_FIELD_MODE, \"MyFilterName\", \"myBiggerObject.mySmallerObject.mySmallestObject\");\n    return mappingValue;\n}\n\n//AND THE UTILITY CLASS\npublic class MappingFilterUtils {\n\n    public enum JsonFilterMode {\n        INCLUDE_FIELD_MODE, EXCLUDE_FIELD_MODE\n    }\n    public static MappingJacksonValue applyFilter(Object object, final JsonFilterMode mode, final String filterName, final String... fields) {\n        if (fields == null || fields.length == 0) {\n            throw new IllegalArgumentException(\"You should pass at least one field\");\n        }\n        return applyFilter(object, mode, filterName, new HashSet&lt;&gt;(Arrays.asList(fields)));\n    }\n\n    public static MappingJacksonValue applyFilter(Object object, final JsonFilterMode mode, final String filterName, final Set&lt;String&gt; fields) {\n        if (fields == null || fields.isEmpty()) {\n            throw new IllegalArgumentException(\"You should pass at least one field\");\n        }\n\n        SimpleBeanPropertyFilter filter = null;\n        switch (mode) {\n            case EXCLUDE_FIELD_MODE:\n                filter = SimpleBeanPropertyFilter.serializeAllExcept(fields);\n                break;\n            case INCLUDE_FIELD_MODE:\n                filter = SimpleBeanPropertyFilter.filterOutAllExcept(fields);\n                break;\n        }\n\n        FilterProvider filters = new SimpleFilterProvider().addFilter(filterName, filter);\n        MappingJacksonValue mapping = new MappingJacksonValue(object);\n        mapping.setFilters(filters);\n        return mapping;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11134043,"reputation":241,"user_id":8173143,"display_name":"foxbit"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1560868035,"creation_date":1560864393,"answer_id":56650264,"question_id":23101260,"body_markdown":"I&#39;ve solved using only `@JsonIgnore` like @kryger has suggested.\r\nSo your getter will become:\r\n\r\n```java\r\n@JsonIgnore\r\npublic String getEncryptedPwd() {\r\n    return this.encryptedPwd;\r\n}\r\n```\r\n\r\nYou can set `@JsonIgnore` of course on field, setter or getter like described [here][1].\r\n\r\nAnd, if you want to protect encrypted password only on serialization side (e.g. when you need to login your users), add this `@JsonProperty` annotation to your **field**:\r\n\r\n```java\r\n@JsonProperty(access = Access.WRITE_ONLY)\r\nprivate String encryptedPwd;\r\n```\r\n\r\nMore info [here][2].\r\n\r\n\r\n  [1]: https://www.concretepage.com/jackson-api/jackson-jsonignore-jsonignoreproperties-and-jsonignoretype#JsonIgnore\r\n  [2]: https://stackoverflow.com/a/12505165/8173143","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>I've solved using only <code>@JsonIgnore</code> like @kryger has suggested.\nSo your getter will become:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@JsonIgnore\npublic String getEncryptedPwd() {\n    return this.encryptedPwd;\n}\n</code></pre>\n\n<p>You can set <code>@JsonIgnore</code> of course on field, setter or getter like described <a href=\"https://www.concretepage.com/jackson-api/jackson-jsonignore-jsonignoreproperties-and-jsonignoretype#JsonIgnore\" rel=\"noreferrer\">here</a>.</p>\n\n<p>And, if you want to protect encrypted password only on serialization side (e.g. when you need to login your users), add this <code>@JsonProperty</code> annotation to your <strong>field</strong>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@JsonProperty(access = Access.WRITE_ONLY)\nprivate String encryptedPwd;\n</code></pre>\n\n<p>More info <a href=\"https://stackoverflow.com/a/12505165/8173143\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":8320526,"reputation":2415,"user_id":6252399,"display_name":"Alan Sereb"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1560865802,"creation_date":1560865802,"answer_id":56650736,"question_id":23101260,"body_markdown":"Place `@JsonIgnore` on the field or its getter, or create a custom dto\r\n\r\n    @JsonIgnore\r\n    private String encryptedPwd;\r\n\r\nor as mentioned above by `ceekay` annotate it with `@JsonProperty` where access attribute is set to write only\r\n    \r\n    @JsonProperty( value = &quot;password&quot;, access = JsonProperty.Access.WRITE_ONLY)\r\n    private String encryptedPwd;","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>Place <code>@JsonIgnore</code> on the field or its getter, or create a custom dto</p>\n\n<pre><code>@JsonIgnore\nprivate String encryptedPwd;\n</code></pre>\n\n<p>or as mentioned above by <code>ceekay</code> annotate it with <code>@JsonProperty</code> where access attribute is set to write only</p>\n\n<pre><code>@JsonProperty( value = \"password\", access = JsonProperty.Access.WRITE_ONLY)\nprivate String encryptedPwd;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6380763,"reputation":9,"user_id":5255286,"display_name":"shivam mishra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1606809505,"creation_date":1606809178,"answer_id":65086591,"question_id":23101260,"body_markdown":"To acheive dynamic filtering follow the link - https://iamvickyav.medium.com/spring-boot-dynamically-ignore-fields-while-converting-java-object-to-json-e8d642088f55\r\n\r\n 1. Add the @JsonFilter(&quot;Filter name&quot;) annotation to the model class.\r\n 2. Inside the controller function add the code:-\r\n\r\n        SimpleBeanPropertyFilter simpleBeanPropertyFilter =\r\n                SimpleBeanPropertyFilter.serializeAllExcept(&quot;id&quot;, &quot;dob&quot;); \r\n\r\n        FilterProvider filterProvider = new SimpleFilterProvider()\r\n                .addFilter(&quot;Filter name&quot;, simpleBeanPropertyFilter);\r\n\r\n        List&lt;User&gt; userList = userService.getAllUsers();\r\n        MappingJacksonValue mappingJacksonValue = new MappingJacksonValue(userList);\r\n        mappingJacksonValue.setFilters(filterProvider);\r\n\r\n        return mappingJacksonValue;\r\n\r\n\r\n 3. make sure the return type is MappingJacksonValue.\n\r\n \r\n\r\n","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>To acheive dynamic filtering follow the link - <a href=\"https://iamvickyav.medium.com/spring-boot-dynamically-ignore-fields-while-converting-java-object-to-json-e8d642088f55\" rel=\"nofollow noreferrer\">https://iamvickyav.medium.com/spring-boot-dynamically-ignore-fields-while-converting-java-object-to-json-e8d642088f55</a></p>\n<ol>\n<li><p>Add the @JsonFilter(&quot;Filter name&quot;) annotation to the model class.</p>\n</li>\n<li><p>Inside the controller function add the code:-</p>\n<pre><code>SimpleBeanPropertyFilter simpleBeanPropertyFilter =\n        SimpleBeanPropertyFilter.serializeAllExcept(&quot;id&quot;, &quot;dob&quot;); \n\nFilterProvider filterProvider = new SimpleFilterProvider()\n        .addFilter(&quot;Filter name&quot;, simpleBeanPropertyFilter);\n\nList&lt;User&gt; userList = userService.getAllUsers();\nMappingJacksonValue mappingJacksonValue = new MappingJacksonValue(userList);\nmappingJacksonValue.setFilters(filterProvider);\n\nreturn mappingJacksonValue;\n</code></pre>\n</li>\n<li><p>make sure the return type is MappingJacksonValue.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":5422342,"reputation":798,"user_id":4315620,"display_name":"Serhat Oz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637270129,"creation_date":1637270129,"answer_id":70026828,"question_id":23101260,"body_markdown":"Hi I have achieved dynamic filtering by using **Gson** library like in the below:\r\n\r\n    JsonObject jsonObj = new Gson().fromJson(mapper.writeValueAsString(sampleObject), JsonObject.class);\r\n    jsonObj.remove(&quot;someProperty&quot;);\r\n    String data = new Gson().toJson(jsonObj);","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>Hi I have achieved dynamic filtering by using <strong>Gson</strong> library like in the below:</p>\n<pre><code>JsonObject jsonObj = new Gson().fromJson(mapper.writeValueAsString(sampleObject), JsonObject.class);\njsonObj.remove(&quot;someProperty&quot;);\nString data = new Gson().toJson(jsonObj);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9382894,"reputation":101,"user_id":8315708,"display_name":"Taras Shpek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669585527,"creation_date":1669585527,"answer_id":74594018,"question_id":23101260,"body_markdown":" &gt; Can I do it dynamically?\r\n\r\nYes, you can use a combination of Jackson&#39;s **PropertyFilter** and **mixins**.\r\n\r\n## Explanation\r\nJackson has a `PropertyFilter` interface to implement a filter to ignore fields dynamically. The problem is that filter has to be defined on the DTO/POJO class using the `@JsonFilter` annotation.\r\n\r\nTo avoid adding a `@JsonFilter` on class we can use `ObjectMapper`&#39;s `addMixIn` method to *&quot;dynamically&quot;* add this annotation (and leave our DTO/POJO classes as is).\r\n\r\n## Code example\r\nHere is my implementation of the idea provided above. We can call `toJson()` with two arguments: (1) object to be serialized and (2) lambda (Java&#39;s Predicate) to be used in PropertyFilter:\r\n\r\n``` lang-java\r\npublic class JsonService {\r\n\r\n    public String toJson(Object object, Predicate&lt;PropertyWriter&gt; filter) {\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        FilterProvider filterProvider = new SimpleFilterProvider()\r\n                .addFilter(&quot;DynamicFilter&quot;, new DynamicFilter(filter));\r\n        mapper.setFilterProvider(filterProvider);\r\n        mapper.addMixIn(object.getClass(), DynamicFilterMixin.class);\r\n        try {\r\n            return mapper.writeValueAsString(object);\r\n        } catch (JsonProcessingException e) {\r\n            throw new MyException(e);\r\n        }\r\n    }\r\n\r\n    private static final class DynamicFilter extends SimpleBeanPropertyFilter {\r\n\r\n        private Predicate&lt;PropertyWriter&gt; filter;\r\n\r\n        private DynamicFilter(Predicate&lt;PropertyWriter&gt; filter) {\r\n            this.filter = filter;\r\n        }\r\n\r\n        protected boolean include(BeanPropertyWriter writer) {\r\n            return include((PropertyWriter) writer);\r\n        }\r\n\r\n        protected boolean include(PropertyWriter writer) {\r\n            return filter.test(writer);\r\n        }\r\n    }\r\n\r\n    @JsonFilter(&quot;DynamicFilter&quot;)\r\n    private interface DynamicFilterMixin {\r\n    }\r\n\r\n}\r\n```\r\n\r\nNow we can call `toJson` and filter fields during a serialization:\r\n1. Filtering by name\r\n``` lang-java\r\nnew JsonService().toJson(object, w -&gt; !w.getName().equals(&quot;fieldNameToBeIgnored&quot;));\r\n```\r\n2. Filtering by annotation (on the field)\r\n``` lang-java\r\nnew JsonService().toJson(object, w -&gt; w.getAnnotation(MyAnnotation.class) == null);\r\n```\r\n\r\n## Unit tests\r\nHere are the unit tests for the class above:\r\n\r\n``` lang-java\r\npublic class JsonServiceTest {\r\n    \r\n    private JsonService jsonService = new JsonService();\r\n    \r\n    @Test\r\n    public void withoutFiltering() {\r\n        MyObject object = getObject();\r\n        String json = jsonService.toJson(object, w -&gt; true);\r\n        assertEquals(&quot;{\\&quot;myString\\&quot;:\\&quot;stringValue\\&quot;,\\&quot;myInteger\\&quot;:10,\\&quot;myBoolean\\&quot;:true}&quot;, json);\r\n    }\r\n\r\n    @Test\r\n    public void filteredByFieldName() {\r\n        MyObject object = getObject();\r\n        String json = jsonService.toJson(object, w -&gt; !w.getName().equals(&quot;myString&quot;));\r\n        assertEquals(&quot;{\\&quot;myInteger\\&quot;:10,\\&quot;myBoolean\\&quot;:true}&quot;, json);\r\n    }\r\n\r\n    @Test\r\n    public void filteredByAnnotation() {\r\n        MyObject object = getObject();\r\n        String json = jsonService.toJson(object, w -&gt; w.getAnnotation(Deprecated.class) == null);\r\n        assertEquals(&quot;{\\&quot;myString\\&quot;:\\&quot;stringValue\\&quot;,\\&quot;myInteger\\&quot;:10}&quot;, json);\r\n    }\r\n    \r\n    private MyObject getObject() {\r\n        MyObject object = new MyObject();\r\n        object.myString = &quot;stringValue&quot;;\r\n        object.myInteger = 10;\r\n        object.myBoolean = true;\r\n        return object;\r\n    }\r\n    \r\n    private static class MyObject {\r\n        private String myString;\r\n        private int myInteger;\r\n        @Deprecated\r\n        private boolean myBoolean;\r\n\r\n        public String getMyString() {\r\n            return myString;\r\n        }\r\n\r\n        public void setMyString(String myString) {\r\n            this.myString = myString;\r\n        }\r\n\r\n        public int getMyInteger() {\r\n            return myInteger;\r\n        }\r\n\r\n        public void setMyInteger(int myInteger) {\r\n            this.myInteger = myInteger;\r\n        }\r\n\r\n        public boolean isMyBoolean() {\r\n            return myBoolean;\r\n        }\r\n\r\n        public void setMyBoolean(boolean myBoolean) {\r\n            this.myBoolean = myBoolean;\r\n        }\r\n    }\r\n\r\n}\r\n```","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<blockquote>\n<p>Can I do it dynamically?</p>\n</blockquote>\n<p>Yes, you can use a combination of Jackson's <strong>PropertyFilter</strong> and <strong>mixins</strong>.</p>\n<h2>Explanation</h2>\n<p>Jackson has a <code>PropertyFilter</code> interface to implement a filter to ignore fields dynamically. The problem is that filter has to be defined on the DTO/POJO class using the <code>@JsonFilter</code> annotation.</p>\n<p>To avoid adding a <code>@JsonFilter</code> on class we can use <code>ObjectMapper</code>'s <code>addMixIn</code> method to <em>&quot;dynamically&quot;</em> add this annotation (and leave our DTO/POJO classes as is).</p>\n<h2>Code example</h2>\n<p>Here is my implementation of the idea provided above. We can call <code>toJson()</code> with two arguments: (1) object to be serialized and (2) lambda (Java's Predicate) to be used in PropertyFilter:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class JsonService {\n\n    public String toJson(Object object, Predicate&lt;PropertyWriter&gt; filter) {\n        ObjectMapper mapper = new ObjectMapper();\n        FilterProvider filterProvider = new SimpleFilterProvider()\n                .addFilter(&quot;DynamicFilter&quot;, new DynamicFilter(filter));\n        mapper.setFilterProvider(filterProvider);\n        mapper.addMixIn(object.getClass(), DynamicFilterMixin.class);\n        try {\n            return mapper.writeValueAsString(object);\n        } catch (JsonProcessingException e) {\n            throw new MyException(e);\n        }\n    }\n\n    private static final class DynamicFilter extends SimpleBeanPropertyFilter {\n\n        private Predicate&lt;PropertyWriter&gt; filter;\n\n        private DynamicFilter(Predicate&lt;PropertyWriter&gt; filter) {\n            this.filter = filter;\n        }\n\n        protected boolean include(BeanPropertyWriter writer) {\n            return include((PropertyWriter) writer);\n        }\n\n        protected boolean include(PropertyWriter writer) {\n            return filter.test(writer);\n        }\n    }\n\n    @JsonFilter(&quot;DynamicFilter&quot;)\n    private interface DynamicFilterMixin {\n    }\n\n}\n</code></pre>\n<p>Now we can call <code>toJson</code> and filter fields during a serialization:</p>\n<ol>\n<li>Filtering by name</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>new JsonService().toJson(object, w -&gt; !w.getName().equals(&quot;fieldNameToBeIgnored&quot;));\n</code></pre>\n<ol start=\"2\">\n<li>Filtering by annotation (on the field)</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>new JsonService().toJson(object, w -&gt; w.getAnnotation(MyAnnotation.class) == null);\n</code></pre>\n<h2>Unit tests</h2>\n<p>Here are the unit tests for the class above:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class JsonServiceTest {\n    \n    private JsonService jsonService = new JsonService();\n    \n    @Test\n    public void withoutFiltering() {\n        MyObject object = getObject();\n        String json = jsonService.toJson(object, w -&gt; true);\n        assertEquals(&quot;{\\&quot;myString\\&quot;:\\&quot;stringValue\\&quot;,\\&quot;myInteger\\&quot;:10,\\&quot;myBoolean\\&quot;:true}&quot;, json);\n    }\n\n    @Test\n    public void filteredByFieldName() {\n        MyObject object = getObject();\n        String json = jsonService.toJson(object, w -&gt; !w.getName().equals(&quot;myString&quot;));\n        assertEquals(&quot;{\\&quot;myInteger\\&quot;:10,\\&quot;myBoolean\\&quot;:true}&quot;, json);\n    }\n\n    @Test\n    public void filteredByAnnotation() {\n        MyObject object = getObject();\n        String json = jsonService.toJson(object, w -&gt; w.getAnnotation(Deprecated.class) == null);\n        assertEquals(&quot;{\\&quot;myString\\&quot;:\\&quot;stringValue\\&quot;,\\&quot;myInteger\\&quot;:10}&quot;, json);\n    }\n    \n    private MyObject getObject() {\n        MyObject object = new MyObject();\n        object.myString = &quot;stringValue&quot;;\n        object.myInteger = 10;\n        object.myBoolean = true;\n        return object;\n    }\n    \n    private static class MyObject {\n        private String myString;\n        private int myInteger;\n        @Deprecated\n        private boolean myBoolean;\n\n        public String getMyString() {\n            return myString;\n        }\n\n        public void setMyString(String myString) {\n            this.myString = myString;\n        }\n\n        public int getMyInteger() {\n            return myInteger;\n        }\n\n        public void setMyInteger(int myInteger) {\n            this.myInteger = myInteger;\n        }\n\n        public boolean isMyBoolean() {\n            return myBoolean;\n        }\n\n        public void setMyBoolean(boolean myBoolean) {\n            this.myBoolean = myBoolean;\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12211707,"reputation":367,"user_id":8913302,"display_name":"Johan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695260467,"creation_date":1695260467,"answer_id":77146739,"question_id":23101260,"body_markdown":"Simply create new dto class without field password.\r\n\r\n    class UserDto {\r\n          // ... your field without password field\r\n    }\r\n\r\nconvert your User.java into UserDto.java on response.\r\n\r\n","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>Simply create new dto class without field password.</p>\n<pre><code>class UserDto {\n      // ... your field without password field\n}\n</code></pre>\n<p>convert your User.java into UserDto.java on response.</p>\n"}],"owner":{"account_id":2518869,"reputation":8932,"user_id":2189617,"accept_rate":68,"display_name":"iCode"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":402882,"favorite_count":0,"down_vote_count":0,"up_vote_count":150,"answer_count":18,"score":150,"last_activity_date":1695260467,"creation_date":1397628318,"question_id":23101260,"body_markdown":"I have model class like this, for hibernate\r\n\r\n    @Entity\r\n    @Table(name = &quot;user&quot;, catalog = &quot;userdb&quot;)\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class User implements java.io.Serializable {\r\n    \r\n    \tprivate Integer userId;\r\n    \tprivate String userName;\r\n    \tprivate String emailId;\r\n    \tprivate String encryptedPwd;\r\n    \tprivate String createdBy;\r\n    \tprivate String updatedBy;\r\n    \r\n    \t@Id\r\n    \t@GeneratedValue(strategy = IDENTITY)\r\n    \t@Column(name = &quot;UserId&quot;, unique = true, nullable = false)\r\n    \tpublic Integer getUserId() {\r\n    \t\treturn this.userId;\r\n    \t}\r\n    \r\n    \tpublic void setUserId(Integer userId) {\r\n    \t\tthis.userId = userId;\r\n    \t}\r\n    \r\n    \t@Column(name = &quot;UserName&quot;, length = 100)\r\n    \tpublic String getUserName() {\r\n    \t\treturn this.userName;\r\n    \t}\r\n    \r\n    \tpublic void setUserName(String userName) {\r\n    \t\tthis.userName = userName;\r\n    \t}\r\n    \r\n    \t@Column(name = &quot;EmailId&quot;, nullable = false, length = 45)\r\n    \tpublic String getEmailId() {\r\n    \t\treturn this.emailId;\r\n    \t}\r\n    \r\n    \tpublic void setEmailId(String emailId) {\r\n    \t\tthis.emailId = emailId;\r\n    \t}\r\n    \r\n    \t@Column(name = &quot;EncryptedPwd&quot;, length = 100)\r\n    \tpublic String getEncryptedPwd() {\r\n    \t\treturn this.encryptedPwd;\r\n    \t}\r\n    \r\n    \tpublic void setEncryptedPwd(String encryptedPwd) {\r\n    \t\tthis.encryptedPwd = encryptedPwd;\r\n    \t}\r\n    \r\n    \tpublic void setCreatedBy(String createdBy) {\r\n    \t\tthis.createdBy = createdBy;\r\n    \t}\r\n    \r\n    \t@Column(name = &quot;UpdatedBy&quot;, length = 100)\r\n    \tpublic String getUpdatedBy() {\r\n    \t\treturn this.updatedBy;\r\n    \t}\r\n    \r\n    \tpublic void setUpdatedBy(String updatedBy) {\r\n    \t\tthis.updatedBy = updatedBy;\r\n    \t}\r\n    }\r\n\r\n\r\nIn Spring MVC controller, using DAO, I am able to get the object. and returning as JSON Object.\r\n\r\n    @Controller\r\n    public class UserController {\r\n    \r\n    \t@Autowired\r\n    \tprivate UserService userService;\r\n    \r\n    \t@RequestMapping(value = &quot;/getUser/{userId}&quot;, method = RequestMethod.GET)\r\n    \t@ResponseBody\r\n    \tpublic User getUser(@PathVariable Integer userId) throws Exception {\r\n    \r\n    \t\tUser user = userService.get(userId);\r\n    \t\tuser.setCreatedBy(null);\r\n    \t\tuser.setUpdatedBy(null);\r\n    \t\treturn user;\r\n    \t}\r\n    }\r\n\r\nView part is done using AngularJS, so it will get JSON like this\r\n\r\n    {\r\n      &quot;userId&quot; :2,\r\n      &quot;userName&quot; : &quot;john&quot;,\r\n      &quot;emailId&quot; : &quot;john@gmail.com&quot;,\r\n      &quot;encryptedPwd&quot; : &quot;Co7Fwd1fXYk=&quot;,\r\n      &quot;createdBy&quot; : null,\r\n      &quot;updatedBy&quot; : null\r\n    }\r\n\r\nIf I don&#39;t want to set encrypted Password, I will set that field also as null.\r\n\r\nBut I don&#39;t want like this, I dont want to send all fields to client side. If I dont want password, updatedby, createdby fields to send, My result JSON should be like\r\n\r\n    {\r\n      &quot;userId&quot; :2,\r\n      &quot;userName&quot; : &quot;john&quot;,\r\n      &quot;emailId&quot; : &quot;john@gmail.com&quot;\r\n    }\r\n\r\nThe list of fields which I don&#39;t want to send to client coming from other database table. So it will change based on the user who is logged in.  How can I do that?\r\n\r\nI hope You got my question. \r\n\r\n","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>I have model class like this, for hibernate</p>\n\n<pre><code>@Entity\n@Table(name = \"user\", catalog = \"userdb\")\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class User implements java.io.Serializable {\n\n    private Integer userId;\n    private String userName;\n    private String emailId;\n    private String encryptedPwd;\n    private String createdBy;\n    private String updatedBy;\n\n    @Id\n    @GeneratedValue(strategy = IDENTITY)\n    @Column(name = \"UserId\", unique = true, nullable = false)\n    public Integer getUserId() {\n        return this.userId;\n    }\n\n    public void setUserId(Integer userId) {\n        this.userId = userId;\n    }\n\n    @Column(name = \"UserName\", length = 100)\n    public String getUserName() {\n        return this.userName;\n    }\n\n    public void setUserName(String userName) {\n        this.userName = userName;\n    }\n\n    @Column(name = \"EmailId\", nullable = false, length = 45)\n    public String getEmailId() {\n        return this.emailId;\n    }\n\n    public void setEmailId(String emailId) {\n        this.emailId = emailId;\n    }\n\n    @Column(name = \"EncryptedPwd\", length = 100)\n    public String getEncryptedPwd() {\n        return this.encryptedPwd;\n    }\n\n    public void setEncryptedPwd(String encryptedPwd) {\n        this.encryptedPwd = encryptedPwd;\n    }\n\n    public void setCreatedBy(String createdBy) {\n        this.createdBy = createdBy;\n    }\n\n    @Column(name = \"UpdatedBy\", length = 100)\n    public String getUpdatedBy() {\n        return this.updatedBy;\n    }\n\n    public void setUpdatedBy(String updatedBy) {\n        this.updatedBy = updatedBy;\n    }\n}\n</code></pre>\n\n<p>In Spring MVC controller, using DAO, I am able to get the object. and returning as JSON Object.</p>\n\n<pre><code>@Controller\npublic class UserController {\n\n    @Autowired\n    private UserService userService;\n\n    @RequestMapping(value = \"/getUser/{userId}\", method = RequestMethod.GET)\n    @ResponseBody\n    public User getUser(@PathVariable Integer userId) throws Exception {\n\n        User user = userService.get(userId);\n        user.setCreatedBy(null);\n        user.setUpdatedBy(null);\n        return user;\n    }\n}\n</code></pre>\n\n<p>View part is done using AngularJS, so it will get JSON like this</p>\n\n<pre><code>{\n  \"userId\" :2,\n  \"userName\" : \"john\",\n  \"emailId\" : \"john@gmail.com\",\n  \"encryptedPwd\" : \"Co7Fwd1fXYk=\",\n  \"createdBy\" : null,\n  \"updatedBy\" : null\n}\n</code></pre>\n\n<p>If I don't want to set encrypted Password, I will set that field also as null.</p>\n\n<p>But I don't want like this, I dont want to send all fields to client side. If I dont want password, updatedby, createdby fields to send, My result JSON should be like</p>\n\n<pre><code>{\n  \"userId\" :2,\n  \"userName\" : \"john\",\n  \"emailId\" : \"john@gmail.com\"\n}\n</code></pre>\n\n<p>The list of fields which I don't want to send to client coming from other database table. So it will change based on the user who is logged in.  How can I do that?</p>\n\n<p>I hope You got my question. </p>\n"},{"tags":["java","jvm","jmx"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1695247181,"post_id":77146110,"comment_id":136000654,"body_markdown":"Doesn&#39;t seem so: https://stackoverflow.com/questions/4469774/how-to-change-java-properties-at-runtime","body":"Doesn&#39;t seem so: <a href=\"https://stackoverflow.com/questions/4469774/how-to-change-java-properties-at-runtime\" title=\"how to change java properties at runtime\">stackoverflow.com/questions/4469774/&hellip;</a>"},{"owner":{"account_id":5175809,"reputation":1054,"user_id":4142984,"accept_rate":83,"display_name":"Gyro Gearloose"},"score":0,"creation_date":1695247821,"post_id":77146110,"comment_id":136000726,"body_markdown":"Seeing the link that @shmosel provided, the least dirty thing you can do is to store your properties in an external file that your program reads  actively when appropriate.","body":"Seeing the link that @shmosel provided, the least dirty thing you can do is to store your properties in an external file that your program reads  actively when appropriate."},{"owner":{"account_id":1693760,"reputation":9824,"user_id":1555615,"accept_rate":62,"display_name":"Marinos An"},"score":0,"creation_date":1695247954,"post_id":77146110,"comment_id":136000739,"body_markdown":"@GyroGearloose This requires updating the application code, which is not an option as noted on my question.","body":"@GyroGearloose This requires updating the application code, which is not an option as noted on my question."},{"owner":{"account_id":5175809,"reputation":1054,"user_id":4142984,"accept_rate":83,"display_name":"Gyro Gearloose"},"score":0,"creation_date":1695248382,"post_id":77146110,"comment_id":136000795,"body_markdown":"The update of the code would be necessary only once, from then on the code could check on the property-file all for itself. But if your&#39;e not the owner of the code, then your out of luck and options. But if so, this is someone else&#39;s problem, not yours.","body":"The update of the code would be necessary only once, from then on the code could check on the property-file all for itself. But if your&#39;e not the owner of the code, then your out of luck and options. But if so, this is someone else&#39;s problem, not yours."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1695257016,"post_id":77146110,"comment_id":136001528,"body_markdown":"Does this answer your question? [How to change Java properties at runtime?](https://stackoverflow.com/questions/4469774/how-to-change-java-properties-at-runtime)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/4469774/how-to-change-java-properties-at-runtime\">How to change Java properties at runtime?</a>"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1695257049,"post_id":77146110,"comment_id":136001533,"body_markdown":"This is a duplicate question, please close it","body":"This is a duplicate question, please close it"},{"owner":{"account_id":1693760,"reputation":9824,"user_id":1555615,"accept_rate":62,"display_name":"Marinos An"},"score":1,"creation_date":1695261129,"post_id":77146110,"comment_id":136001855,"body_markdown":"@GyroGearloose &quot;But if your&#39;e not the owner of the code, then your out of luck and options&quot;. Not really. See the accepted answer.","body":"@GyroGearloose &quot;But if your&#39;e not the owner of the code, then your out of luck and options&quot;. Not really. See the accepted answer."}],"answers":[{"tags":[],"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1695258296,"creation_date":1695258296,"answer_id":77146654,"question_id":77146110,"body_markdown":"The idea is to attach an agent that calls `System.setProperty` to a running application.  \r\n**Note:** this does not require modifying application code.\r\n\r\nHere is the agent code:\r\n```\r\nimport com.sun.tools.attach.VirtualMachine;\r\n\r\npublic class SetProperty {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        String url = SetProperty.class.getProtectionDomain().getCodeSource().getLocation().toString();\r\n        if (args.length &lt; 2 || !url.startsWith(&quot;file:&quot;)) {\r\n            System.out.println(&quot;Usage: java -jar setproperty.jar pid property=value&quot;);\r\n            System.exit(1);\r\n        }\r\n\r\n        VirtualMachine vm = VirtualMachine.attach(args[0]);\r\n        try {\r\n            int startIndex = &quot;\\\\&quot;.equals(System.getProperty(&quot;file.separator&quot;)) ? 6 : 5;\r\n            vm.loadAgent(url.substring(startIndex), args[1]);\r\n        } finally {\r\n            vm.detach();\r\n        }\r\n    }\r\n\r\n    public static void agentmain(String args) {\r\n        int eq = args.indexOf(&#39;=&#39;);\r\n        System.setProperty(args.substring(0, eq), args.substring(eq + 1));\r\n    }\r\n}\r\n```\r\n\r\n1. Compile the source code:\r\n```\r\njavac -source 8 -taraget 8 SetProperty.java\r\n```\r\n2. Create `MANIFEST.MF` file with the following contents:\r\n```\r\nMain-Class: SetProperty\r\nAgent-Class: SetProperty\r\n```\r\n3. Build .jar file from the compiled sources and the manifest:\r\n```\r\njar cfm setproperty.jar MANIFEST.MF SetProperty.class \r\n```\r\n4. Launch the agent passing the target process ID and the property to set (JDK 9+):\r\n```\r\njava -jar setproperty.jar 1234 MyProperty=SomeValue\r\n```\r\nIf you are using JDK 8, you&#39;ll need to add `tools.jar` to the class path:\r\n```\r\njava -cp setproperty.jar:$JAVA_HOME/lib/tools.jar SetProperty 1234 MyProperty=SomeValue\r\n```\r\n\r\nI prepared [setproperty.jar](https://profiler.tools/misc/setproperty.jar) so you can skip steps 1-3 and proceed directly to the final command.","title":"How can I dynamically set a System property on the JVM, after it has started, without modifying my program&#39;s code?","body":"<p>The idea is to attach an agent that calls <code>System.setProperty</code> to a running application.<br />\n<strong>Note:</strong> this does not require modifying application code.</p>\n<p>Here is the agent code:</p>\n<pre><code>import com.sun.tools.attach.VirtualMachine;\n\npublic class SetProperty {\n\n    public static void main(String[] args) throws Exception {\n        String url = SetProperty.class.getProtectionDomain().getCodeSource().getLocation().toString();\n        if (args.length &lt; 2 || !url.startsWith(&quot;file:&quot;)) {\n            System.out.println(&quot;Usage: java -jar setproperty.jar pid property=value&quot;);\n            System.exit(1);\n        }\n\n        VirtualMachine vm = VirtualMachine.attach(args[0]);\n        try {\n            int startIndex = &quot;\\\\&quot;.equals(System.getProperty(&quot;file.separator&quot;)) ? 6 : 5;\n            vm.loadAgent(url.substring(startIndex), args[1]);\n        } finally {\n            vm.detach();\n        }\n    }\n\n    public static void agentmain(String args) {\n        int eq = args.indexOf('=');\n        System.setProperty(args.substring(0, eq), args.substring(eq + 1));\n    }\n}\n</code></pre>\n<ol>\n<li>Compile the source code:</li>\n</ol>\n<pre><code>javac -source 8 -taraget 8 SetProperty.java\n</code></pre>\n<ol start=\"2\">\n<li>Create <code>MANIFEST.MF</code> file with the following contents:</li>\n</ol>\n<pre><code>Main-Class: SetProperty\nAgent-Class: SetProperty\n</code></pre>\n<ol start=\"3\">\n<li>Build .jar file from the compiled sources and the manifest:</li>\n</ol>\n<pre><code>jar cfm setproperty.jar MANIFEST.MF SetProperty.class \n</code></pre>\n<ol start=\"4\">\n<li>Launch the agent passing the target process ID and the property to set (JDK 9+):</li>\n</ol>\n<pre><code>java -jar setproperty.jar 1234 MyProperty=SomeValue\n</code></pre>\n<p>If you are using JDK 8, you'll need to add <code>tools.jar</code> to the class path:</p>\n<pre><code>java -cp setproperty.jar:$JAVA_HOME/lib/tools.jar SetProperty 1234 MyProperty=SomeValue\n</code></pre>\n<p>I prepared <a href=\"https://profiler.tools/misc/setproperty.jar\" rel=\"nofollow noreferrer\">setproperty.jar</a> so you can skip steps 1-3 and proceed directly to the final command.</p>\n"}],"owner":{"account_id":1693760,"reputation":9824,"user_id":1555615,"accept_rate":62,"display_name":"Marinos An"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":210,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77146654,"answer_count":1,"score":1,"last_activity_date":1695258296,"creation_date":1695246976,"question_id":77146110,"body_markdown":"I would like to be able to change a system property while a java application is running inside an application server. I know that this can be done with `java.lang.System.setProperty` or by adding the `-DpropertyName=value` as a JVM flag. \r\n\r\nBut I want to do this at runtime and without modifying the application code.\r\n\r\nIs there a tool that can change system properties in the JVM at runtime without having to update the application-code ( e.g. just by attaching a tool the running process or by using JMX ) ?","title":"How can I dynamically set a System property on the JVM, after it has started, without modifying my program&#39;s code?","body":"<p>I would like to be able to change a system property while a java application is running inside an application server. I know that this can be done with <code>java.lang.System.setProperty</code> or by adding the <code>-DpropertyName=value</code> as a JVM flag.</p>\n<p>But I want to do this at runtime and without modifying the application code.</p>\n<p>Is there a tool that can change system properties in the JVM at runtime without having to update the application-code ( e.g. just by attaching a tool the running process or by using JMX ) ?</p>\n"},{"tags":["java","sockets","debugging","intellij-idea","virtual-machine"],"comments":[{"owner":{"account_id":2399674,"reputation":2691,"user_id":2097675,"display_name":"JJF"},"score":1,"creation_date":1457794706,"post_id":35954997,"comment_id":59573685,"body_markdown":"That&#39;s the message you would see if the debugee VM exits.","body":"That&#39;s the message you would see if the debugee VM exits."}],"answers":[{"tags":[],"owner":{"account_id":2028664,"reputation":6942,"user_id":1812993,"accept_rate":80,"display_name":"melchoir55"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1477108988,"creation_date":1477108988,"answer_id":40188187,"question_id":35954997,"body_markdown":"This is probably normal behavior. If you are experiencing an error such as an exception then you should also see a stack trace in there. If not, it is possible that you are catching and silently eating the exception.","title":"Disconnected from the target VM","body":"<p>This is probably normal behavior. If you are experiencing an error such as an exception then you should also see a stack trace in there. If not, it is possible that you are catching and silently eating the exception.</p>\n"}],"owner":{"account_id":2808137,"reputation":35550,"user_id":2414957,"accept_rate":61,"display_name":"Mona Jalal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12367,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1695258160,"creation_date":1457767827,"question_id":35954997,"body_markdown":"Sometimes when I press on the debug button in IntelliJ I receive the following and can&#39;t debug as a result. I wonder what could be wrong and how that can be fixed?\r\n\r\n    /Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/bin/java -agentlib:jdwp=transport=dt_socket,address=127.0.0.1:59089,suspend=y,server=n -Dfile.encoding=UTF-8 -classpath &quot;/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/ant-javafx.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/dt.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/javafx-doclet.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/javafx-mx.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/jconsole.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/sa-jdi.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/tools.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/charsets.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/deploy.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/htmlconverter.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/javaws.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/jce.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/jfr.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/jfxrt.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/jsse.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/management-agent.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/plugin.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/resources.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/rt.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/dnsns.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/localedata.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/sunec.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/sunjce_provider.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/sunpkcs11.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/zipfs.jar:/Users/mona/IdeaProjects/testJ/out/production/testJ:/Applications/IntelliJ IDEA 14 CE.app/Contents/lib/idea_rt.jar&quot; PeakElementLog\r\n    Connected to the target VM, address: &#39;127.0.0.1:59089&#39;, transport: &#39;socket&#39;\r\n    Disconnected from the target VM, address: &#39;127.0.0.1:59089&#39;, transport: &#39;socket&#39;","title":"Disconnected from the target VM","body":"<p>Sometimes when I press on the debug button in IntelliJ I receive the following and can't debug as a result. I wonder what could be wrong and how that can be fixed?</p>\n\n<pre><code>/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/bin/java -agentlib:jdwp=transport=dt_socket,address=127.0.0.1:59089,suspend=y,server=n -Dfile.encoding=UTF-8 -classpath \"/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/ant-javafx.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/dt.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/javafx-doclet.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/javafx-mx.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/jconsole.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/sa-jdi.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/tools.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/charsets.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/deploy.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/htmlconverter.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/javaws.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/jce.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/jfr.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/jfxrt.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/jsse.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/management-agent.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/plugin.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/resources.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/rt.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/dnsns.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/localedata.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/sunec.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/sunjce_provider.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/sunpkcs11.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/zipfs.jar:/Users/mona/IdeaProjects/testJ/out/production/testJ:/Applications/IntelliJ IDEA 14 CE.app/Contents/lib/idea_rt.jar\" PeakElementLog\nConnected to the target VM, address: '127.0.0.1:59089', transport: 'socket'\nDisconnected from the target VM, address: '127.0.0.1:59089', transport: 'socket'\n</code></pre>\n"},{"tags":["java","data-conversion","java.util.date"],"comments":[{"owner":{"account_id":198346,"reputation":20665,"user_id":442945,"accept_rate":77,"display_name":"Nathaniel Ford"},"score":2,"creation_date":1340128391,"post_id":11106532,"comment_id":14547599,"body_markdown":"Out of curiosity, does the API require any number of seconds? Or seconds from a particular epoch? Because if it will accept and work with any int of seconds, just take the seconds value from your date variable.","body":"Out of curiosity, does the API require any number of seconds? Or seconds from a particular epoch? Because if it will accept and work with any int of seconds, just take the seconds value from your date variable."},{"owner":{"account_id":97082,"reputation":375006,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"score":4,"creation_date":1340128507,"post_id":11106532,"comment_id":14547649,"body_markdown":"the `getTime()` methods returns the milliseconds since Epoch. Divide by 1000 to have seconds.","body":"the <code>getTime()</code> methods returns the milliseconds since Epoch. Divide by 1000 to have seconds."},{"owner":{"account_id":72575,"reputation":40784,"user_id":209513,"accept_rate":100,"display_name":"Subhrajyoti Majumder"},"score":0,"creation_date":1340128522,"post_id":11106532,"comment_id":14547661,"body_markdown":"check [getTime](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#getTime()) mehod in util.Date class.","body":"check <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#getTime()\" rel=\"nofollow noreferrer\">getTime</a> mehod in util.Date class."},{"owner":{"account_id":188548,"reputation":55117,"user_id":427309,"accept_rate":95,"display_name":"Richard J. Ross III"},"score":2,"creation_date":1340192957,"post_id":11106532,"comment_id":14567474,"body_markdown":"I don&#39;t understand the downvotes &amp; flags here. It&#39;s a completely readable, on-topic question, with a concrete answer!","body":"I don&#39;t understand the downvotes &amp; flags here. It&#39;s a completely readable, on-topic question, with a concrete answer!"}],"answers":[{"tags":[],"owner":{"account_id":1555969,"reputation":1786,"user_id":1447481,"display_name":"Karthik Kumar Viswanathan"},"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1695257513,"creation_date":1340128717,"answer_id":11106619,"question_id":11106532,"body_markdown":"    import java.util.Date;\r\n    \r\n    ...\r\n    long secs = (new Date().getTime())/1000;\r\n    ...\r\n\r\nPlease see:\r\nhttp://docs.oracle.com/javase/6/docs/api/java/util/Date.html#getTime().","title":"Get date representation in seconds?","body":"<pre><code>import java.util.Date;\n\n...\nlong secs = (new Date().getTime())/1000;\n...\n</code></pre>\n<p>Please see:\n<a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#getTime()\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#getTime()</a>.</p>\n"},{"tags":[],"owner":{"account_id":72575,"reputation":40784,"user_id":209513,"accept_rate":100,"display_name":"Subhrajyoti Majumder"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1695257750,"creation_date":1340128731,"answer_id":11106622,"question_id":11106532,"body_markdown":"`java.util.Date.getTime()` it returns the number of milliseconds since January 1, 1970, 00:00:00 GMT represented by this Date object:\r\n\r\n    java.util.Date date = new Date();\r\n    System.out.println(date.getTime());\r\n\r\n*Output*:\r\n1340128712111\r\n\r\nTo get seconds from milliseconds you need to divide it by `1000`:\r\n\r\n    long secs = date.getTime()/1000;\r\n    System.out.println(secs);\r\n\r\n*Output*:\r\n1340128712\r\n\r\nAlternatively `Instant.getEpochSecond()` returns the number of seconds from the Java epoch of 1970-01-01T00:00:00Z. Its available since Java v1.8 [docs][1].\r\n\r\n\r\n[1]: https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html#getEpochSecond--","title":"Get date representation in seconds?","body":"<p><code>java.util.Date.getTime()</code> it returns the number of milliseconds since January 1, 1970, 00:00:00 GMT represented by this Date object:</p>\n<pre><code>java.util.Date date = new Date();\nSystem.out.println(date.getTime());\n</code></pre>\n<p><em>Output</em>:\n1340128712111</p>\n<p>To get seconds from milliseconds you need to divide it by <code>1000</code>:</p>\n<pre><code>long secs = date.getTime()/1000;\nSystem.out.println(secs);\n</code></pre>\n<p><em>Output</em>:\n1340128712</p>\n<p>Alternatively <code>Instant.getEpochSecond()</code> returns the number of seconds from the Java epoch of 1970-01-01T00:00:00Z. Its available since Java v1.8 <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html#getEpochSecond--\" rel=\"nofollow noreferrer\">docs</a>.</p>\n"},{"tags":[],"owner":{"account_id":114991,"reputation":69738,"user_id":302139,"accept_rate":75,"display_name":"Edwin Buck"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1340128860,"creation_date":1340128860,"answer_id":11106656,"question_id":11106532,"body_markdown":"Number of seconds by itself doesn&#39;t mean much.  Number of seconds within the current minute?  Number of seconds since 0:00:00 Janurary 1st, 1970?  Number of seconds since lunch?  Could you be more specific.\r\n\r\nPut it into the API also doesn&#39;t mean much, unless you specify exactly which API you are using, and where you are attempting to put these seconds.","title":"Get date representation in seconds?","body":"<p>Number of seconds by itself doesn't mean much.  Number of seconds within the current minute?  Number of seconds since 0:00:00 Janurary 1st, 1970?  Number of seconds since lunch?  Could you be more specific.</p>\n\n<p>Put it into the API also doesn't mean much, unless you specify exactly which API you are using, and where you are attempting to put these seconds.</p>\n"},{"tags":[],"owner":{"account_id":1556012,"reputation":1838,"user_id":1447087,"accept_rate":69,"display_name":"Bigger"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1528182520,"creation_date":1528182520,"answer_id":50694094,"question_id":11106532,"body_markdown":"Since Java 8 and onwards there&#39;s this elegant method which returns the Epoch time in seconds (seconds since 0:00:0 January 1st 1970). You can then store this value as an numeric value: a &quot;long&quot; in this case.\r\n\r\n```\r\nlong timestamp = java.time.Instant.now().getEpochSecond();\r\n```","title":"Get date representation in seconds?","body":"<p>Since Java 8 and onwards there's this elegant method which returns the Epoch time in seconds (seconds since 0:00:0 January 1st 1970). You can then store this value as an numeric value: a \"long\" in this case.</p>\n\n<p><code>\nlong timestamp = java.time.Instant.now().getEpochSecond();\n</code></p>\n"}],"owner":{"account_id":1581956,"reputation":861,"user_id":1467158,"accept_rate":33,"display_name":"Sam"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54138,"favorite_count":0,"down_vote_count":3,"up_vote_count":21,"accepted_answer_id":11106619,"answer_count":4,"score":18,"last_activity_date":1695257750,"creation_date":1340128309,"question_id":11106532,"body_markdown":"I am using an API which requires a date parameter as a number of seconds, an `int`. \r\n\r\nMy problem is that I currently store this time in `java.util.date` and I was wondering if there is some way to convert the `java.util.date` variable to seconds so that I can fit it into the `int` parameter which the API requires?","title":"Get date representation in seconds?","body":"<p>I am using an API which requires a date parameter as a number of seconds, an <code>int</code>. </p>\n\n<p>My problem is that I currently store this time in <code>java.util.date</code> and I was wondering if there is some way to convert the <code>java.util.date</code> variable to seconds so that I can fit it into the <code>int</code> parameter which the API requires?</p>\n"},{"tags":["java","spring","spring-boot","aop","spring-aop"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1695103649,"post_id":77131152,"comment_id":135975510,"body_markdown":"Annotations aren&#39;t inherited (that is the way of annotations) so they aren&#39;t accessible from the actual class. This is even made a bit worse by the fact that you have an interface and use `@Validated` which woiuld lead to an interface proxy which even further would reduce the visibility of the annotations.","body":"Annotations aren&#39;t inherited (that is the way of annotations) so they aren&#39;t accessible from the actual class. This is even made a bit worse by the fact that you have an interface and use <code>@Validated</code> which woiuld lead to an interface proxy which even further would reduce the visibility of the annotations."}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695257233,"creation_date":1695175001,"answer_id":77138842,"question_id":77131152,"body_markdown":"## (Almost) no annotation inheritance in Java\r\n\r\n_M. Deinum_ is right about annotation inheritance. It basically does not exist in Java with one very special exception. For details, see [my answer here](https://stackoverflow.com/a/42607016/1082681). Other than using advanced native AspectJ, as described there, your simplest workaround is not to annotate the interface method but the implementing class&#39;s method:\r\n\r\n```java\r\n@Override\r\n@GetMapping(value = &quot;/test&quot;)\r\npublic ResponseEntity&lt;?&gt; createJsonSchemaMetadata() {\r\n  return ResponseEntity.status(HttpStatus.OK).body(&quot;Successful&quot;);\r\n}\r\n```\r\n\r\n## Targeting annotated classes\r\n\r\nYou also want to make sure that no JDK proxies are used for classes overriding interfaces but CGLIB proxies. In Spring Boot, this is the default. In plain vanilla Spring, you can use `@EnableAspectJAutoProxy(proxyTargetClass = true)`.\r\n\r\nRegarding your second pointcut, it is simply wrong:\r\n\r\n```java\r\n@Pointcut(&quot;@annotation(org.springframework.web.bind.annotation.RequestMapping)&quot;)\r\n```\r\n\r\nThis targets **annotated methods,** but you want to intercept methods in **annotated classes,** which is different and needs to be expressed like this:\r\n\r\n```java\r\n@Pointcut(&quot;@within(org.springframework.web.bind.annotation.RequestMapping)&quot;)\r\n```\r\n\r\nIf all your target classes carry a `@RequestMapping` annotation, you do not need the first pointcut at all. Otherwise, you do, but then make sure to follow my advice from the first paragraph.","title":"Spring AOP for Parent and Child relation classes","body":"<h2>(Almost) no annotation inheritance in Java</h2>\n<p><em>M. Deinum</em> is right about annotation inheritance. It basically does not exist in Java with one very special exception. For details, see <a href=\"https://stackoverflow.com/a/42607016/1082681\">my answer here</a>. Other than using advanced native AspectJ, as described there, your simplest workaround is not to annotate the interface method but the implementing class's method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n@GetMapping(value = &quot;/test&quot;)\npublic ResponseEntity&lt;?&gt; createJsonSchemaMetadata() {\n  return ResponseEntity.status(HttpStatus.OK).body(&quot;Successful&quot;);\n}\n</code></pre>\n<h2>Targeting annotated classes</h2>\n<p>You also want to make sure that no JDK proxies are used for classes overriding interfaces but CGLIB proxies. In Spring Boot, this is the default. In plain vanilla Spring, you can use <code>@EnableAspectJAutoProxy(proxyTargetClass = true)</code>.</p>\n<p>Regarding your second pointcut, it is simply wrong:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Pointcut(&quot;@annotation(org.springframework.web.bind.annotation.RequestMapping)&quot;)\n</code></pre>\n<p>This targets <strong>annotated methods,</strong> but you want to intercept methods in <strong>annotated classes,</strong> which is different and needs to be expressed like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Pointcut(&quot;@within(org.springframework.web.bind.annotation.RequestMapping)&quot;)\n</code></pre>\n<p>If all your target classes carry a <code>@RequestMapping</code> annotation, you do not need the first pointcut at all. Otherwise, you do, but then make sure to follow my advice from the first paragraph.</p>\n"}],"owner":{"account_id":3347567,"reputation":397,"user_id":2812410,"accept_rate":33,"display_name":"Prajyod Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77138842,"answer_count":1,"score":0,"last_activity_date":1695257233,"creation_date":1695085821,"question_id":77131152,"body_markdown":"I&#39;m working on existing code and I am writing some Auditing for the requests.\r\nI have tried multiple ways but my Pointcut expressions are not getting executed.\r\n\r\nI have created a separate class which has similar annotations without any parent and child hierarchy and I&#39;m able to invoke these pointcut expressions.\r\n\r\nI&#39;m not sure what Pointcut expressions should be used when there is Parent and Child relationship.\r\n```java\r\npublic interface Parent {\r\n\t  @GetMapping(value = &quot;/test&quot;)\r\n\t  ResponseEntity&lt;?&gt; createJsonSchemaMetadata();\r\n\r\n}\r\n```\r\nMy Child class\r\n\r\n```java\r\n@RestController\r\n@Validated\r\n@RequestMapping(&quot;/api&quot;)\r\npublic class Child implements Parent {\r\n\r\n\t@Override\r\n\tpublic ResponseEntity&lt;?&gt; createJsonSchemaMetadata() {\r\n\t\treturn ResponseEntity.status(HttpStatus.OK).body(&quot;Successful&quot;);\r\n\t}\r\n}\r\n```\r\nMy Pointcut expressions:\r\n```java\r\n@Aspect\r\npublic class PointcutDefinition {\r\n\r\n\t// targeting GET,POST,PUT,DELETE methods\r\n\t@Pointcut(&quot;@annotation(org.springframework.web.bind.annotation.GetMapping) || @annotation(org.springframework.web.bind.annotation.PostMapping) &quot;\r\n\t\t\t+ &quot;|| @annotation(org.springframework.web.bind.annotation.PutMapping)&quot;\r\n\t\t\t+ &quot;|| @annotation(org.springframework.web.bind.annotation.DeleteMapping)&quot;)\r\n\tpublic void httpMethodsWithAnnotation() {\r\n\t}\r\n\r\n\t// targeting methods which are defined using RequestMapping.\r\n\t@Pointcut(&quot;@annotation(org.springframework.web.bind.annotation.RequestMapping)&quot;)\r\n\tpublic void requestMappingMethodsWithHttpMethods() {\r\n\t}\r\n\r\n}\r\n```\r\nMy Advice:\r\n\r\n```java\r\n@Aspect\r\n@Component\r\npublic class AuditingAspect {\r\n\r\n\tprivate static final Logger log = LoggerFactory.getLogger(AuditingAspect.class);\r\n\r\n\t\r\n\t@Around(&quot; PointcutDefinition.httpMethodsWithAnnotation() || PointcutDefinition.requestMappingMethodsWithHttpMethods()&quot;)\r\n\tpublic Object auditAdvice(ProceedingJoinPoint joinPoint) throws Throwable {\r\n\t\tif (log.isTraceEnabled()) {\r\n\t\t\tlog.trace(&quot;Entering auditAdvice method in &quot; + this.getClass());\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Auditing triggered.&quot;);\r\n\t\tObject proceed = joinPoint.proceed();\r\n\t\treturn proceed;\r\n\t}\r\n}\r\n```\r\n\r\nI see my Advice is not getting invoked with these Pointcut expressions. Can someone help here.","title":"Spring AOP for Parent and Child relation classes","body":"<p>I'm working on existing code and I am writing some Auditing for the requests.\nI have tried multiple ways but my Pointcut expressions are not getting executed.</p>\n<p>I have created a separate class which has similar annotations without any parent and child hierarchy and I'm able to invoke these pointcut expressions.</p>\n<p>I'm not sure what Pointcut expressions should be used when there is Parent and Child relationship.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Parent {\n      @GetMapping(value = &quot;/test&quot;)\n      ResponseEntity&lt;?&gt; createJsonSchemaMetadata();\n\n}\n</code></pre>\n<p>My Child class</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@Validated\n@RequestMapping(&quot;/api&quot;)\npublic class Child implements Parent {\n\n    @Override\n    public ResponseEntity&lt;?&gt; createJsonSchemaMetadata() {\n        return ResponseEntity.status(HttpStatus.OK).body(&quot;Successful&quot;);\n    }\n}\n</code></pre>\n<p>My Pointcut expressions:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Aspect\npublic class PointcutDefinition {\n\n    // targeting GET,POST,PUT,DELETE methods\n    @Pointcut(&quot;@annotation(org.springframework.web.bind.annotation.GetMapping) || @annotation(org.springframework.web.bind.annotation.PostMapping) &quot;\n            + &quot;|| @annotation(org.springframework.web.bind.annotation.PutMapping)&quot;\n            + &quot;|| @annotation(org.springframework.web.bind.annotation.DeleteMapping)&quot;)\n    public void httpMethodsWithAnnotation() {\n    }\n\n    // targeting methods which are defined using RequestMapping.\n    @Pointcut(&quot;@annotation(org.springframework.web.bind.annotation.RequestMapping)&quot;)\n    public void requestMappingMethodsWithHttpMethods() {\n    }\n\n}\n</code></pre>\n<p>My Advice:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Aspect\n@Component\npublic class AuditingAspect {\n\n    private static final Logger log = LoggerFactory.getLogger(AuditingAspect.class);\n\n    \n    @Around(&quot; PointcutDefinition.httpMethodsWithAnnotation() || PointcutDefinition.requestMappingMethodsWithHttpMethods()&quot;)\n    public Object auditAdvice(ProceedingJoinPoint joinPoint) throws Throwable {\n        if (log.isTraceEnabled()) {\n            log.trace(&quot;Entering auditAdvice method in &quot; + this.getClass());\n        }\n        System.out.println(&quot;Auditing triggered.&quot;);\n        Object proceed = joinPoint.proceed();\n        return proceed;\n    }\n}\n</code></pre>\n<p>I see my Advice is not getting invoked with these Pointcut expressions. Can someone help here.</p>\n"},{"tags":["java","jar"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1695246317,"post_id":77146043,"comment_id":136000561,"body_markdown":"Are you using Windows?  Windows likes to lie and present a .zip file as if its a folder, but it very much is not.  Make sure you have actually extracted the .zip file (that is, right-click on the zip file and choose one the Extract items in the context menu), then try your java -jar command again.","body":"Are you using Windows?  Windows likes to lie and present a .zip file as if its a folder, but it very much is not.  Make sure you have actually extracted the .zip file (that is, right-click on the zip file and choose one the Extract items in the context menu), then try your java -jar command again."},{"owner":{"account_id":5175809,"reputation":1054,"user_id":4142984,"accept_rate":83,"display_name":"Gyro Gearloose"},"score":0,"creation_date":1695246508,"post_id":77146043,"comment_id":136000587,"body_markdown":"It is difficult to analyze from afar, but if &quot;sesam.util.whatsit*&quot; is mentioned, then at least the jar file is readable and executing. Unusual for java jar files, there is a specialized classLoader. My best guess is, that this thing tries to find other files that you have not downloaded or are not in the place it is looking for them.","body":"It is difficult to analyze from afar, but if &quot;sesam.util.whatsit*&quot; is mentioned, then at least the jar file is readable and executing. Unusual for java jar files, there is a specialized classLoader. My best guess is, that this thing tries to find other files that you have not downloaded or are not in the place it is looking for them."},{"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"score":0,"creation_date":1695255907,"post_id":77146043,"comment_id":136001443,"body_markdown":"This is a question about the specific software you&#39;re trying to run, because it&#39;s a problem in SeSAm.jar, you&#39;ll have to read the documentation for that to learn how to launch it. That error shows the java -jar command was successful and the program started, but sesam doesn&#39;t like how you opened it.","body":"This is a question about the specific software you&#39;re trying to run, because it&#39;s a problem in SeSAm.jar, you&#39;ll have to read the documentation for that to learn how to launch it. That error shows the java -jar command was successful and the program started, but sesam doesn&#39;t like how you opened it."}],"answers":[{"tags":[],"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695256496,"creation_date":1695256496,"answer_id":77146579,"question_id":77146043,"body_markdown":"Because of its use of Reflection, SeSAm only works with Java 8. \r\n\r\nMake sure you&#39;re using Java 8 to run it. You can verify what version of java you have by running \r\n\r\n`java -version` \r\nin command prompt.","title":"How do I extend my classpath to run a .jar file?","body":"<p>Because of its use of Reflection, SeSAm only works with Java 8.</p>\n<p>Make sure you're using Java 8 to run it. You can verify what version of java you have by running</p>\n<p><code>java -version</code>\nin command prompt.</p>\n"}],"owner":{"account_id":29495191,"reputation":1,"user_id":22603430,"display_name":"Dr. Primate"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1695256496,"creation_date":1695245676,"question_id":77146043,"body_markdown":"I am trying to run an executable jar file for the agent-based modeling program called SeSAm (shell for simulated agent systems... wordpress can be found [here](https://multiagentsimulation.com/)). I have downloaded the zip file and subsequently unzipped the file and I used command prompt to try and run it.\r\n\r\nI have changed my directory to the folder with the jar file in it, and when I use the command to run the file (java -jar SeSAm.jar) it throws the following error: \r\n\r\n    Exception in thread &quot;main&quot; java.lang.RuntimeException: Please extend your classpath with: null\r\n            at sesam.util.jarclassloader.ClassLoaderExtender.addToClassPath(ClassLoaderExtender.java:140)\r\n            at sesam.util.jarclassloader.ClassLoaderExtender.addToClassPath(ClassLoaderExtender.java:99)\r\n            at sesam.gui.mas.application.SeSAm.extendClasspath(SeSAm.java:157)\r\n            at sesam.gui.mas.application.SeSAm.main(SeSAm.java:141)\r\n\r\nI have no formal education or training in computer programming so please excuse me if this is a trivial question or has a very obvious fix that is alluding me. I&#39;d appreciate any help on how to fix this issue.\r\n\r\nI appreciate the help in advance.\r\n\r\n\r\n","title":"How do I extend my classpath to run a .jar file?","body":"<p>I am trying to run an executable jar file for the agent-based modeling program called SeSAm (shell for simulated agent systems... wordpress can be found <a href=\"https://multiagentsimulation.com/\" rel=\"nofollow noreferrer\">here</a>). I have downloaded the zip file and subsequently unzipped the file and I used command prompt to try and run it.</p>\n<p>I have changed my directory to the folder with the jar file in it, and when I use the command to run the file (java -jar SeSAm.jar) it throws the following error:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.RuntimeException: Please extend your classpath with: null\n        at sesam.util.jarclassloader.ClassLoaderExtender.addToClassPath(ClassLoaderExtender.java:140)\n        at sesam.util.jarclassloader.ClassLoaderExtender.addToClassPath(ClassLoaderExtender.java:99)\n        at sesam.gui.mas.application.SeSAm.extendClasspath(SeSAm.java:157)\n        at sesam.gui.mas.application.SeSAm.main(SeSAm.java:141)\n</code></pre>\n<p>I have no formal education or training in computer programming so please excuse me if this is a trivial question or has a very obvious fix that is alluding me. I'd appreciate any help on how to fix this issue.</p>\n<p>I appreciate the help in advance.</p>\n"},{"tags":["java","jpa","entitymanager"],"comments":[{"owner":{"account_id":932139,"reputation":10997,"user_id":961810,"accept_rate":69,"display_name":"Brad Peabody"},"score":0,"creation_date":1440037682,"post_id":32108491,"comment_id":52111325,"body_markdown":"Check this out, might answer: http://stackoverflow.com/questions/28392747/jpa-flush-vs-commit","body":"Check this out, might answer: <a href=\"http://stackoverflow.com/questions/28392747/jpa-flush-vs-commit\">stackoverflow.com/questions/28392747/jpa-flush-vs-commit</a>"},{"owner":{"account_id":1993980,"reputation":5458,"user_id":1787314,"accept_rate":60,"display_name":"Nick Div"},"score":0,"creation_date":1440038598,"post_id":32108491,"comment_id":52111508,"body_markdown":"@bgp Some of the answers say  &quot;flush is only for use within a transaction? It flushes (but doesn&#39;t commit), whereas commit commits data (obviously)&quot; Thats my question whats the purpose of flush in all this.","body":"@bgp Some of the answers say  &quot;flush is only for use within a transaction? It flushes (but doesn&#39;t commit), whereas commit commits data (obviously)&quot; Thats my question whats the purpose of flush in all this."}],"answers":[{"tags":[],"owner":{"account_id":5870607,"reputation":535,"user_id":4623055,"display_name":"owenrb"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1440038590,"creation_date":1440038590,"answer_id":32108730,"question_id":32108491,"body_markdown":"When the transaction commits the entity manager does that flush-ing for you. In some case, like handling optimistic locking in a container-managed transaction, you may need to manually invoke the flush method to catch and handle specific locking exception.\r\n\r\n","title":"What is exact purpose of flush in JPA","body":"<p>When the transaction commits the entity manager does that flush-ing for you. In some case, like handling optimistic locking in a container-managed transaction, you may need to manually invoke the flush method to catch and handle specific locking exception.</p>\n"},{"tags":[],"owner":{"account_id":2432741,"reputation":2413,"user_id":2123306,"accept_rate":83,"display_name":"Mathias Begert"},"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1440056958,"creation_date":1440039861,"answer_id":32108891,"question_id":32108491,"body_markdown":"In theory, you (as a user of JPA) should never (or in absolutely rare situations) get in a situation to call `flush()`.\r\n\r\n&gt; Flushing is the process of synchronizing the underlying persistent\r\n&gt; store with persistable state held in memory\r\n\r\nIn other words, on a `flush()` all the insert, update, delete or whatever statements are actually called on the database, before a `flush()` nothing happens on your database. Flushing is caused by a commit of your transaction or some kinds of database reads. For example if you execute a JPQL query, a `flush()` has to be done to get the correct results from the database. But this is just very nice to know and completely handled by your JPA implementation. \r\n\r\nThere may be some situations you want to control this flushing on your own and then you can invoke it with `flush()`.\r\n\r\n**Edit** to answer the questions in comment:\r\n\r\nNot on every read a flush is necessary, consider this scenario (one transaction):\r\n\r\n 1. Read a person `Person p = em.find(Person.class, 234)` \r\n 2. Update person `p.setAge(31)` \r\n 3. Read a building `Building b = em.find(Building.class, 123`\r\n 4. Read a building with JPQL query `select b from Building b where b.id = 123`\r\n\r\nAutomatic **flush** occurs only before 4., because Eclipselink can&#39;t determine what you are gonna read, so the person&#39;s age must be up to date on the database before this read can occur. Before 3. there is no flush needed because Eclipselink knows that the update on a person can not affect a building.\r\n\r\nTo work with optimistic locking, you have to implement it. Read about the `@Version` annotation here: https://blogs.oracle.com/carolmcdonald/entry/jpa_2_0_concurrency_and. Without that your entity will not use optimistic locking and the &quot;last update wins&quot;.\r\n","title":"What is exact purpose of flush in JPA","body":"<p>In theory, you (as a user of JPA) should never (or in absolutely rare situations) get in a situation to call <code>flush()</code>.</p>\n\n<blockquote>\n  <p>Flushing is the process of synchronizing the underlying persistent\n  store with persistable state held in memory</p>\n</blockquote>\n\n<p>In other words, on a <code>flush()</code> all the insert, update, delete or whatever statements are actually called on the database, before a <code>flush()</code> nothing happens on your database. Flushing is caused by a commit of your transaction or some kinds of database reads. For example if you execute a JPQL query, a <code>flush()</code> has to be done to get the correct results from the database. But this is just very nice to know and completely handled by your JPA implementation. </p>\n\n<p>There may be some situations you want to control this flushing on your own and then you can invoke it with <code>flush()</code>.</p>\n\n<p><strong>Edit</strong> to answer the questions in comment:</p>\n\n<p>Not on every read a flush is necessary, consider this scenario (one transaction):</p>\n\n<ol>\n<li>Read a person <code>Person p = em.find(Person.class, 234)</code> </li>\n<li>Update person <code>p.setAge(31)</code> </li>\n<li>Read a building <code>Building b = em.find(Building.class, 123</code></li>\n<li>Read a building with JPQL query <code>select b from Building b where b.id = 123</code></li>\n</ol>\n\n<p>Automatic <strong>flush</strong> occurs only before 4., because Eclipselink can't determine what you are gonna read, so the person's age must be up to date on the database before this read can occur. Before 3. there is no flush needed because Eclipselink knows that the update on a person can not affect a building.</p>\n\n<p>To work with optimistic locking, you have to implement it. Read about the <code>@Version</code> annotation here: <a href=\"https://blogs.oracle.com/carolmcdonald/entry/jpa_2_0_concurrency_and\" rel=\"noreferrer\">https://blogs.oracle.com/carolmcdonald/entry/jpa_2_0_concurrency_and</a>. Without that your entity will not use optimistic locking and the \"last update wins\".</p>\n"},{"tags":[],"owner":{"account_id":11228459,"reputation":71,"user_id":8237398,"display_name":"Roberto Messa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695255064,"creation_date":1695255064,"answer_id":77146521,"question_id":32108491,"body_markdown":"If you&#39;re persisting two entities manually, you&#39;ll need the generated id.\r\n\r\n```\r\nentityManagerInstance.persist(entity1);\r\nentityManagerInstance.flush();\r\nentity2.setForeignKeyToEntity1(entity1.getId());\r\nentity2.create();\r\n```","title":"What is exact purpose of flush in JPA","body":"<p>If you're persisting two entities manually, you'll need the generated id.</p>\n<pre><code>entityManagerInstance.persist(entity1);\nentityManagerInstance.flush();\nentity2.setForeignKeyToEntity1(entity1.getId());\nentity2.create();\n</code></pre>\n"}],"owner":{"account_id":1993980,"reputation":5458,"user_id":1787314,"accept_rate":60,"display_name":"Nick Div"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32625,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"accepted_answer_id":32108891,"answer_count":3,"score":26,"last_activity_date":1695255064,"creation_date":1440036644,"question_id":32108491,"body_markdown":"Some confusing explanation:\r\nflush(); Flushing is the process of synchronizing the underlying persistent store with persistable state held in memory.it will update or insert into your tables in the running transaction, but it may not commit those changes.\r\n\r\nIf the changes are anyways going to be persisted in the database only after the commit then why to flush in the middle of the code. \r\n\r\nAnd after running the flush if any changes are made to the managed object then will that throw an Exception or will those get synchronized and then will get perisisted. If they get synchronized then again why flush in the first place. \r\n\r\n","title":"What is exact purpose of flush in JPA","body":"<p>Some confusing explanation:\nflush(); Flushing is the process of synchronizing the underlying persistent store with persistable state held in memory.it will update or insert into your tables in the running transaction, but it may not commit those changes.</p>\n\n<p>If the changes are anyways going to be persisted in the database only after the commit then why to flush in the middle of the code. </p>\n\n<p>And after running the flush if any changes are made to the managed object then will that throw an Exception or will those get synchronized and then will get perisisted. If they get synchronized then again why flush in the first place. </p>\n"},{"tags":["java","spring","web-services","rest","cxf"],"comments":[{"owner":{"account_id":225235,"reputation":6429,"user_id":485608,"accept_rate":50,"display_name":"M. Abbas"},"score":0,"creation_date":1380201413,"post_id":19028780,"comment_id":28118321,"body_markdown":"Could you verify if you have different version of the same libray(jar) in your classpath?","body":"Could you verify if you have different version of the same libray(jar) in your classpath?"},{"owner":{"account_id":2587959,"reputation":1082,"user_id":2334391,"accept_rate":80,"display_name":"jos"},"score":0,"creation_date":1380201586,"post_id":19028780,"comment_id":28118448,"body_markdown":"in pom.xml cxf version is 2.7.5. all cxf jar versions are same","body":"in pom.xml cxf version is 2.7.5. all cxf jar versions are same"},{"owner":{"account_id":195331,"reputation":275398,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":2,"creation_date":1380202231,"post_id":19028780,"comment_id":28118889,"body_markdown":"Take a look at this: http://stackoverflow.com/questions/1980452/what-causes-java-lang-incompatibleclasschangeerror","body":"Take a look at this: <a href=\"http://stackoverflow.com/questions/1980452/what-causes-java-lang-incompatibleclasschangeerror\" title=\"what causes java lang incompatibleclasschangeerror\">stackoverflow.com/questions/1980452/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":7425398,"reputation":21,"user_id":5648070,"display_name":"donglei"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1453118362,"creation_date":1453116885,"answer_id":34853759,"question_id":19028780,"body_markdown":"I don&#39;t know what kind of conflict there is...&lt;br /&gt;\r\nYou can try to delete the `cxf-rt-ws-policy-3.1.1.jar`.&lt;br /&gt;\r\nI don&#39;t know why, but this worked for me.\r\n","title":"cxf rest spring service giving error","body":"<p>I don't know what kind of conflict there is...<br />\nYou can try to delete the <code>cxf-rt-ws-policy-3.1.1.jar</code>.<br />\nI don't know why, but this worked for me.</p>\n"},{"tags":[],"owner":{"account_id":3567133,"reputation":623,"user_id":2978362,"accept_rate":67,"display_name":"vsriram92"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671820524,"creation_date":1671817619,"answer_id":74902574,"question_id":19028780,"body_markdown":"I had similar issue where I had my Spring context available inside the lib folder of my war and its transitive dependency such as cxf-rt-ws-policy, cxf-core was kept in tomcat lib folder. &lt;br/&gt;&lt;br/&gt;\r\nMoving cxf-rt-ws-policy and cxf-core to the war&#39;s lib folder solved the issue.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n        &lt;artifactId&gt;cxf-rt-ws-policy&lt;/artifactId&gt;\r\n        &lt;version&gt;3.5.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n        &lt;artifactId&gt;cxf-core&lt;/artifactId&gt;\r\n        &lt;version&gt;3.5.2&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"cxf rest spring service giving error","body":"<p>I had similar issue where I had my Spring context available inside the lib folder of my war and its transitive dependency such as cxf-rt-ws-policy, cxf-core was kept in tomcat lib folder. <br/><br/>\nMoving cxf-rt-ws-policy and cxf-core to the war's lib folder solved the issue.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n    &lt;artifactId&gt;cxf-rt-ws-policy&lt;/artifactId&gt;\n    &lt;version&gt;3.5.2&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n    &lt;artifactId&gt;cxf-core&lt;/artifactId&gt;\n    &lt;version&gt;3.5.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":2587959,"reputation":1082,"user_id":2334391,"accept_rate":80,"display_name":"jos"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10487,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1695254575,"creation_date":1380199785,"question_id":19028780,"body_markdown":"I am trying to expose rest service using **cxf rest**. i have **cxf 2.7.5** and **spring 3.1.3.RELEASE**  when trying to use the url `http://localhost:8080/web/services/rest/getreq` its giving error.\r\n\r\n\r\n    Status Code: 500 Internal Server Error\r\n    Connection: close\r\n    Content-Language: en\r\n    Content-Type: text/html;charset=ISO-8859-1\r\n    Date: Thu, 26 Sep 2013 12:51:02 GMT\r\n    Server: Apache-Coyote/1.1\r\n    Transfer-Encoding: chunked\r\n\r\n    SEVERE: StandardWrapper.Throwable\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;cxf&#39; defined in class path resource [META-INF/cxf/cxf.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.apache.cxf.bus.spring.SpringBus]: Constructor threw exception; nested exception is org.apache.cxf.bus.extension.ExtensionException: Could not load extension class org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl.\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:997)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:943)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:605)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:925)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:472)\r\n    \tat org.apache.cxf.transport.servlet.CXFServlet.createSpringContext(CXFServlet.java:160)\r\n    \tat org.apache.cxf.transport.servlet.CXFServlet.loadBus(CXFServlet.java:74)\r\n    \tat org.apache.cxf.transport.servlet.CXFNonSpringServlet.init(CXFNonSpringServlet.java:71)\r\n    \tat org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1274)\r\n    \tat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1186)\r\n    \tat org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:858)\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)\r\n    \tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)\r\n    \tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)\r\n    \tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)\r\n    \tat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n    \tat java.lang.Thread.run(Thread.java:724)\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.apache.cxf.bus.spring.SpringBus]: Constructor threw exception; nested exception is org.apache.cxf.bus.extension.ExtensionException: Could not load extension class org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl.\r\n    \tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:162)\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:990)\r\n    \t... 30 more\r\n    Caused by: org.apache.cxf.bus.extension.ExtensionException: Could not load extension class org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl.\r\n    \tat org.apache.cxf.bus.extension.Extension.tryClass(Extension.java:173)\r\n    \tat org.apache.cxf.bus.extension.Extension.getClassObject(Extension.java:185)\r\n    \tat org.apache.cxf.bus.extension.ExtensionManagerImpl.activateAllByType(ExtensionManagerImpl.java:138)\r\n    \tat org.apache.cxf.bus.extension.ExtensionManagerBus.&lt;init&gt;(ExtensionManagerBus.java:126)\r\n    \tat org.apache.cxf.bus.extension.ExtensionManagerBus.&lt;init&gt;(ExtensionManagerBus.java:138)\r\n    \tat org.apache.cxf.bus.spring.SpringBus.&lt;init&gt;(SpringBus.java:47)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:526)\r\n    \tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)\r\n    \t... 32 more\r\n    Caused by: java.lang.IncompatibleClassChangeError: Implementing class\r\n    \tat java.lang.ClassLoader.defineClass1(Native Method)\r\n    \tat java.lang.ClassLoader.defineClass(ClassLoader.java:792)\r\n    \tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n    \tat org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2904)\r\n    \tat org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1173)\r\n    \tat org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1681)\r\n    \tat org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)\r\n    \tat java.lang.ClassLoader.defineClass1(Native Method)\r\n    \tat java.lang.ClassLoader.defineClass(ClassLoader.java:792)\r\n    \tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n    \tat org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2904)\r\n    \tat org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1173)\r\n    \tat org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1681)\r\n    \tat org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)\r\n    \tat org.apache.cxf.bus.extension.Extension.tryClass(Extension.java:169)\r\n    \t... 42 more\r\n\r\ni made my service class **@service(&quot;dimRequirementManager&quot;)** then is it necessary to create bean in cxf-servlet.xml?\r\n\r\n**cxf-servlet.xml**\r\n\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:jaxws=&quot;http://cxf.apache.org/jaxws&quot;\r\n    \txmlns:jaxrs=&quot;http://cxf.apache.org/jaxrs&quot; xmlns:cxf=&quot;http://cxf.apache.org/core&quot;\r\n    \txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\r\n                http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd\r\n                http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd\r\n                http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd&quot;&gt;    \r\n    \t&lt;import resource=&quot;classpath:META-INF/cxf/cxf.xml&quot; /&gt;\r\n    \t&lt;import resource=&quot;classpath:META-INF/cxf/cxf-servlet.xml&quot; /&gt;    \r\n    \t&lt;cxf:bus&gt;\r\n    \t\t&lt;cxf:features&gt;\r\n    \t\t\t&lt;cxf:logging /&gt;\r\n    \t\t&lt;/cxf:features&gt;\r\n    \t&lt;/cxf:bus&gt;\r\n    \t&lt;bean id=&quot;jsonProvider&quot; class=&quot;org.codehaus.jackson.jaxrs.JacksonJsonProvider&quot; /&gt;\r\n    \t&lt;bean id=&quot;dimRequirementDao&quot;\r\n    \t\tclass=&quot;com.vxl.dao.hibernate.DimRequirementDaoHibernate&quot;&gt;\r\n    \t&lt;/bean&gt;    \r\n    \t&lt;bean id=&quot;dimRequirementManager&quot;\r\n    \t\tclass=&quot;com.vxl.service.impl.DimRequirementManagerImpl&quot;&gt;\r\n    \t\t&lt;property name=&quot;dimRequirementDao&quot; ref=&quot;dimRequirementDao&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    \t&lt;!-- Add new endpoints for additional services you&#39;d like to expose --&gt;    \r\n    \t&lt;jaxrs:server address=&quot;/rest&quot;&gt;\r\n    \t\t&lt;jaxrs:serviceBeans&gt;\r\n    \t\t\t&lt;ref bean=&quot;dimRequirementManager&quot; /&gt;\r\n    \t\t&lt;/jaxrs:serviceBeans&gt;\r\n    \t\t&lt;jaxrs:providers&gt;\r\n    \t\t\t&lt;ref bean=&quot;jsonProvider&quot; /&gt;\r\n    \t\t&lt;/jaxrs:providers&gt;\r\n    \t\t&lt;jaxrs:extensionMappings&gt;\r\n    \t\t\t&lt;entry key=&quot;json&quot; value=&quot;application/json&quot; /&gt;\r\n    \t\t\t&lt;entry key=&quot;xml&quot; value=&quot;application/xml&quot; /&gt;\r\n    \t\t\t&lt;entry key=&quot;feed&quot; value=&quot;application/atom+xml&quot; /&gt;\r\n    \t\t&lt;/jaxrs:extensionMappings&gt;\r\n    \t&lt;/jaxrs:server&gt;    \r\n    &lt;/beans&gt;\r\n\r\n**web.xml**\r\n\r\n    &lt;context-param&gt;\r\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n        &lt;param-value&gt;\r\n                classpath:/applicationContext-dca.xml\r\n                classpath:/applicationContext-service.xml\r\n            &lt;/param-value&gt;\r\n      &lt;/context-param&gt;\r\n    &lt;listener&gt;\r\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\r\n      &lt;/listener&gt;\r\n    &lt;servlet&gt;\r\n        &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;org.apache.cxf.transport.servlet.CXFServlet&lt;/servlet-class&gt;\r\n      &lt;/servlet&gt;\r\n      &lt;servlet-mapping&gt;\r\n        &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;\r\n        &lt;url-pattern&gt;/services/*&lt;/url-pattern&gt;\r\n      &lt;/servlet-mapping&gt;\r\n\r\n**service class**\r\n\r\n    @Produces(&quot;application/xml&quot;)\r\n    @Consumes(&quot;application/xml&quot;)\r\n    @Service(&quot;dimRequirementManager&quot;)\r\n    public class DimRequirementManagerImpl implements DimRequirementManager {    \r\n        DimRequirementDao dimRequirementDao;    \r\n    \t@Override\r\n    \tpublic List&lt;DimRequirement&gt; getAllByClientNIsCurrent(Long clientKey) {\r\n    \t\treturn dimRequirementDao.getAllByClientNIsCurrent(clientKey);\r\n    \t}    \t\r\n    \t@GET\r\n    \t@Path(&quot;/getreq&quot;)\r\n    \tpublic DimRequirement getreq(){\r\n    \t\tDimRequirement requirement =new DimRequirement();\r\n    \t\trequirement.setClientKey(22L);\r\n    \t\trequirement.setClassification(&quot;classification&quot;);\r\n    \t\treturn requirement;    \t\t\r\n    \t}","title":"cxf rest spring service giving error","body":"<p>I am trying to expose rest service using <strong>cxf rest</strong>. i have <strong>cxf 2.7.5</strong> and <strong>spring 3.1.3.RELEASE</strong>  when trying to use the url <code>http://localhost:8080/web/services/rest/getreq</code> its giving error.</p>\n\n<pre><code>Status Code: 500 Internal Server Error\nConnection: close\nContent-Language: en\nContent-Type: text/html;charset=ISO-8859-1\nDate: Thu, 26 Sep 2013 12:51:02 GMT\nServer: Apache-Coyote/1.1\nTransfer-Encoding: chunked\n\nSEVERE: StandardWrapper.Throwable\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'cxf' defined in class path resource [META-INF/cxf/cxf.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.apache.cxf.bus.spring.SpringBus]: Constructor threw exception; nested exception is org.apache.cxf.bus.extension.ExtensionException: Could not load extension class org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl.\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:997)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:943)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:605)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:925)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:472)\n    at org.apache.cxf.transport.servlet.CXFServlet.createSpringContext(CXFServlet.java:160)\n    at org.apache.cxf.transport.servlet.CXFServlet.loadBus(CXFServlet.java:74)\n    at org.apache.cxf.transport.servlet.CXFNonSpringServlet.init(CXFNonSpringServlet.java:71)\n    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1274)\n    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1186)\n    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:858)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)\n    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)\n    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:724)\nCaused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.apache.cxf.bus.spring.SpringBus]: Constructor threw exception; nested exception is org.apache.cxf.bus.extension.ExtensionException: Could not load extension class org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl.\n    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:162)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:990)\n    ... 30 more\nCaused by: org.apache.cxf.bus.extension.ExtensionException: Could not load extension class org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl.\n    at org.apache.cxf.bus.extension.Extension.tryClass(Extension.java:173)\n    at org.apache.cxf.bus.extension.Extension.getClassObject(Extension.java:185)\n    at org.apache.cxf.bus.extension.ExtensionManagerImpl.activateAllByType(ExtensionManagerImpl.java:138)\n    at org.apache.cxf.bus.extension.ExtensionManagerBus.&lt;init&gt;(ExtensionManagerBus.java:126)\n    at org.apache.cxf.bus.extension.ExtensionManagerBus.&lt;init&gt;(ExtensionManagerBus.java:138)\n    at org.apache.cxf.bus.spring.SpringBus.&lt;init&gt;(SpringBus.java:47)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:526)\n    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)\n    ... 32 more\nCaused by: java.lang.IncompatibleClassChangeError: Implementing class\n    at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClass(ClassLoader.java:792)\n    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2904)\n    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1173)\n    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1681)\n    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)\n    at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClass(ClassLoader.java:792)\n    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2904)\n    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1173)\n    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1681)\n    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)\n    at org.apache.cxf.bus.extension.Extension.tryClass(Extension.java:169)\n    ... 42 more\n</code></pre>\n\n<p>i made my service class <strong>@service(\"dimRequirementManager\")</strong> then is it necessary to create bean in cxf-servlet.xml?</p>\n\n<p><strong>cxf-servlet.xml</strong></p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:jaxws=\"http://cxf.apache.org/jaxws\"\n    xmlns:jaxrs=\"http://cxf.apache.org/jaxrs\" xmlns:cxf=\"http://cxf.apache.org/core\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n            http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd\n            http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd\n            http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd\"&gt;    \n    &lt;import resource=\"classpath:META-INF/cxf/cxf.xml\" /&gt;\n    &lt;import resource=\"classpath:META-INF/cxf/cxf-servlet.xml\" /&gt;    \n    &lt;cxf:bus&gt;\n        &lt;cxf:features&gt;\n            &lt;cxf:logging /&gt;\n        &lt;/cxf:features&gt;\n    &lt;/cxf:bus&gt;\n    &lt;bean id=\"jsonProvider\" class=\"org.codehaus.jackson.jaxrs.JacksonJsonProvider\" /&gt;\n    &lt;bean id=\"dimRequirementDao\"\n        class=\"com.vxl.dao.hibernate.DimRequirementDaoHibernate\"&gt;\n    &lt;/bean&gt;    \n    &lt;bean id=\"dimRequirementManager\"\n        class=\"com.vxl.service.impl.DimRequirementManagerImpl\"&gt;\n        &lt;property name=\"dimRequirementDao\" ref=\"dimRequirementDao\" /&gt;\n    &lt;/bean&gt;\n    &lt;!-- Add new endpoints for additional services you'd like to expose --&gt;    \n    &lt;jaxrs:server address=\"/rest\"&gt;\n        &lt;jaxrs:serviceBeans&gt;\n            &lt;ref bean=\"dimRequirementManager\" /&gt;\n        &lt;/jaxrs:serviceBeans&gt;\n        &lt;jaxrs:providers&gt;\n            &lt;ref bean=\"jsonProvider\" /&gt;\n        &lt;/jaxrs:providers&gt;\n        &lt;jaxrs:extensionMappings&gt;\n            &lt;entry key=\"json\" value=\"application/json\" /&gt;\n            &lt;entry key=\"xml\" value=\"application/xml\" /&gt;\n            &lt;entry key=\"feed\" value=\"application/atom+xml\" /&gt;\n        &lt;/jaxrs:extensionMappings&gt;\n    &lt;/jaxrs:server&gt;    \n&lt;/beans&gt;\n</code></pre>\n\n<p><strong>web.xml</strong></p>\n\n<pre><code>&lt;context-param&gt;\n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n    &lt;param-value&gt;\n            classpath:/applicationContext-dca.xml\n            classpath:/applicationContext-service.xml\n        &lt;/param-value&gt;\n  &lt;/context-param&gt;\n&lt;listener&gt;\n    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n  &lt;/listener&gt;\n&lt;servlet&gt;\n    &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.apache.cxf.transport.servlet.CXFServlet&lt;/servlet-class&gt;\n  &lt;/servlet&gt;\n  &lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/services/*&lt;/url-pattern&gt;\n  &lt;/servlet-mapping&gt;\n</code></pre>\n\n<p><strong>service class</strong></p>\n\n<pre><code>@Produces(\"application/xml\")\n@Consumes(\"application/xml\")\n@Service(\"dimRequirementManager\")\npublic class DimRequirementManagerImpl implements DimRequirementManager {    \n    DimRequirementDao dimRequirementDao;    \n    @Override\n    public List&lt;DimRequirement&gt; getAllByClientNIsCurrent(Long clientKey) {\n        return dimRequirementDao.getAllByClientNIsCurrent(clientKey);\n    }       \n    @GET\n    @Path(\"/getreq\")\n    public DimRequirement getreq(){\n        DimRequirement requirement =new DimRequirement();\n        requirement.setClientKey(22L);\n        requirement.setClassification(\"classification\");\n        return requirement;         \n    }\n</code></pre>\n"},{"tags":["java","spring-boot","apache-kafka","spring-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1695044723,"post_id":77126102,"comment_id":135967693,"body_markdown":"There&#39;s a Kafka Connect sink to Postgres over jdbc, which doesn&#39;t require any code, by the way. Had you tried that?","body":"There&#39;s a Kafka Connect sink to Postgres over jdbc, which doesn&#39;t require any code, by the way. Had you tried that?"},{"owner":{"account_id":20833547,"reputation":1212,"user_id":15302273,"display_name":"stacktrace2234"},"score":0,"creation_date":1695044786,"post_id":77126102,"comment_id":135967719,"body_markdown":"Nope, at the moment I am just learning kafka.","body":"Nope, at the moment I am just learning kafka."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1695045135,"post_id":77126102,"comment_id":135967792,"body_markdown":"That&#39;s okay. Kafka Connect is part of Kafka. You can learn that too","body":"That&#39;s okay. Kafka Connect is part of Kafka. You can learn that too"}],"answers":[{"tags":[],"owner":{"account_id":29214968,"reputation":186,"user_id":22381995,"display_name":"cant-code"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695030933,"creation_date":1695030933,"answer_id":77126211,"question_id":77126102,"body_markdown":"&gt; The auto-offset-reset property accepts the following values: \r\n&gt;  - earliest: This value automatically resets the offset to the earliest    offset \r\n&gt;  - latest: This value automatically resets the offset to the    latest offset \r\n&gt;  - none: This value throws an exception to the consumer if    no previous offset is found for the consumers group.\r\n\r\nAs mentioned, earliest might be the safest offset setting to use if your consumer starts after a few days or so and there are some messages not consumed. This will make sure that no messages are dropped.\r\nYou can also keep a track of the message ids from queue and check whether they were already processed or not.\r\n\r\nIf all this is not part of your worries then you can also use &#39;latest&#39; to just start fetching from the latest offset.\r\n\r\nEdit: Source\r\nhttps://www.baeldung.com/java-kafka-consumer-api-read","title":"Spring Boot Kafka: How to prevent to consume the same messages if I restart the consumer?","body":"<blockquote>\n<p>The auto-offset-reset property accepts the following values:</p>\n<ul>\n<li>earliest: This value automatically resets the offset to the earliest    offset</li>\n<li>latest: This value automatically resets the offset to the    latest offset</li>\n<li>none: This value throws an exception to the consumer if    no previous offset is found for the consumers group.</li>\n</ul>\n</blockquote>\n<p>As mentioned, earliest might be the safest offset setting to use if your consumer starts after a few days or so and there are some messages not consumed. This will make sure that no messages are dropped.\nYou can also keep a track of the message ids from queue and check whether they were already processed or not.</p>\n<p>If all this is not part of your worries then you can also use 'latest' to just start fetching from the latest offset.</p>\n<p>Edit: Source\n<a href=\"https://www.baeldung.com/java-kafka-consumer-api-read\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-kafka-consumer-api-read</a></p>\n"},{"tags":[],"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695034948,"creation_date":1695034569,"answer_id":77126622,"question_id":77126102,"body_markdown":"&gt; What if I close the consumer application and then start it again?\r\n\r\nDepends on how you commit and other things. If you consume a record, auto-commit the offset to Kafka, and the environment goes down before you&#39;ve processed it, you just lost a record.\r\n\r\nIf you&#39;re not making sure that there are no duplicates with e.g. idempotent producer and all the other necessary things, you could get duplicates from various places, starting with producer retries.\r\n\r\nIf you&#39;re saving something to a transactional storage (like database), you can store the Kafka offsets in the database in the same transaction as the data, this will make the database the source of truth for Kafka offsets, and you can `seek()` to the correct position on startup to make sure there are no dropped records (it won&#39;t help against records duplicated somewhere before the consumer though).\r\n\r\n&gt; What if the consumer processes the 1000 messages, I stop the consumer, produce 1000 more messages and start the consumer?\r\n\r\nYou should know that Kafka won&#39;t drop messages even if there&#39;s no consumer to read them. I suggest reading up on Kafka internal workings, as it&#39;s pretty complicated and `spring-kafka` makes it look easier than it is.","title":"Spring Boot Kafka: How to prevent to consume the same messages if I restart the consumer?","body":"<blockquote>\n<p>What if I close the consumer application and then start it again?</p>\n</blockquote>\n<p>Depends on how you commit and other things. If you consume a record, auto-commit the offset to Kafka, and the environment goes down before you've processed it, you just lost a record.</p>\n<p>If you're not making sure that there are no duplicates with e.g. idempotent producer and all the other necessary things, you could get duplicates from various places, starting with producer retries.</p>\n<p>If you're saving something to a transactional storage (like database), you can store the Kafka offsets in the database in the same transaction as the data, this will make the database the source of truth for Kafka offsets, and you can <code>seek()</code> to the correct position on startup to make sure there are no dropped records (it won't help against records duplicated somewhere before the consumer though).</p>\n<blockquote>\n<p>What if the consumer processes the 1000 messages, I stop the consumer, produce 1000 more messages and start the consumer?</p>\n</blockquote>\n<p>You should know that Kafka won't drop messages even if there's no consumer to read them. I suggest reading up on Kafka internal workings, as it's pretty complicated and <code>spring-kafka</code> makes it look easier than it is.</p>\n"},{"tags":[],"owner":{"account_id":2491257,"reputation":351,"user_id":2168654,"accept_rate":32,"display_name":"Zahra Hosseini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695253570,"creation_date":1695253570,"answer_id":77146454,"question_id":77126102,"body_markdown":"you should set: `auto-offset-reset:latest`\r\n\r\nin this way consumer start to consumes from last offset that have been read.","title":"Spring Boot Kafka: How to prevent to consume the same messages if I restart the consumer?","body":"<p>you should set: <code>auto-offset-reset:latest</code></p>\n<p>in this way consumer start to consumes from last offset that have been read.</p>\n"}],"owner":{"account_id":20833547,"reputation":1212,"user_id":15302273,"display_name":"stacktrace2234"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1695253570,"creation_date":1695030094,"question_id":77126102,"body_markdown":"- I start the kafka and I produce 1000 messages in topic `user`\r\n- I create a Spring Boot Consumer that listens on this topic and saves the messages in the database\r\n\r\nWhat if I close the consumer application and then start it again? How to prevent to save the same messages in the database?\r\n\r\nWhat if the consumer processes the 1000 messages, I stop the consumer, produce 1000 more messages and start the consumer?\r\n\r\n\r\n```\r\nspring:\r\n  kafka:\r\n    consumer:\r\n      bootstrap-servers:\r\n        - localhost:9092\r\n      group-id: &quot;myGroup&quot;\r\n      auto-offset-reset: earliest\r\n      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer\r\n      value-deserializer: org.apache.kafka.common.serialization.StringDeserializer\r\n  datasource:\r\n    username: postgres\r\n    url: jdbc:postgresql://localhost:5432/mydatabase\r\n    password: admin\r\n```","title":"Spring Boot Kafka: How to prevent to consume the same messages if I restart the consumer?","body":"<ul>\n<li>I start the kafka and I produce 1000 messages in topic <code>user</code></li>\n<li>I create a Spring Boot Consumer that listens on this topic and saves the messages in the database</li>\n</ul>\n<p>What if I close the consumer application and then start it again? How to prevent to save the same messages in the database?</p>\n<p>What if the consumer processes the 1000 messages, I stop the consumer, produce 1000 more messages and start the consumer?</p>\n<pre><code>spring:\n  kafka:\n    consumer:\n      bootstrap-servers:\n        - localhost:9092\n      group-id: &quot;myGroup&quot;\n      auto-offset-reset: earliest\n      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer\n      value-deserializer: org.apache.kafka.common.serialization.StringDeserializer\n  datasource:\n    username: postgres\n    url: jdbc:postgresql://localhost:5432/mydatabase\n    password: admin\n</code></pre>\n"},{"tags":["java","android","flutter","razorpay"],"comments":[{"owner":{"account_id":25289565,"reputation":239,"user_id":19115931,"display_name":"Kokila"},"score":0,"creation_date":1675228858,"post_id":62853695,"comment_id":132881251,"body_markdown":"is your razorpay key is valid?","body":"is your razorpay key is valid?"},{"owner":{"account_id":12587801,"reputation":116,"user_id":9155909,"display_name":"Aman khan Roohaani"},"score":0,"creation_date":1692471842,"post_id":62853695,"comment_id":135628942,"body_markdown":"Hi Aashraya, Did u check this? https://stackoverflow.com/questions/63546926/why-do-i-get-this-error-using-razorpay-with-flutter-uncaught-typeerrorwindow","body":"Hi Aashraya, Did u check this? <a href=\"https://stackoverflow.com/questions/63546926/why-do-i-get-this-error-using-razorpay-with-flutter-uncaught-typeerrorwindow\" title=\"why do i get this error using razorpay with flutter uncaught typeerrorwindow\">stackoverflow.com/questions/63546926/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":20944889,"reputation":91,"user_id":15387997,"display_name":"Tanveer Ahmad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1688625349,"creation_date":1688625349,"answer_id":76626096,"question_id":62853695,"body_markdown":"I thing flutter WebView in which Razorpay is running doesn&#39;t have access to the getDeviceDetails function. This could be due to a number of reasons:\r\n\r\n**The function is not defined:** Ensure that the getDeviceDetails function is properly defined in your code.\r\n\r\n**The function is not in scope:** If the function is defined, make sure it&#39;s in the correct scope. JavaScript functions can only be called from within the scope they&#39;re defined in.\r\n\r\n**The WebView settings**: The settings for the WebView might be preventing the function from being called. You might need to enable JavaScript or adjust other settings.\r\n\r\n**The Razorpay library:** There might be an issue with the version of the Razorpay library you&#39;re using. Try updating to the latest version or down grade some version.","title":"window.getDeviceDetails is not a function in razorpay integration with flutter","body":"<p>I thing flutter WebView in which Razorpay is running doesn't have access to the getDeviceDetails function. This could be due to a number of reasons:</p>\n<p><strong>The function is not defined:</strong> Ensure that the getDeviceDetails function is properly defined in your code.</p>\n<p><strong>The function is not in scope:</strong> If the function is defined, make sure it's in the correct scope. JavaScript functions can only be called from within the scope they're defined in.</p>\n<p><strong>The WebView settings</strong>: The settings for the WebView might be preventing the function from being called. You might need to enable JavaScript or adjust other settings.</p>\n<p><strong>The Razorpay library:</strong> There might be an issue with the version of the Razorpay library you're using. Try updating to the latest version or down grade some version.</p>\n"},{"tags":[],"owner":{"account_id":23316766,"reputation":394,"user_id":17395277,"display_name":"Karma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695253482,"creation_date":1695253482,"answer_id":77146444,"question_id":62853695,"body_markdown":"You need to send a request to Razorpay to generate an Order ID. \r\nlike this:\r\n\r\n    curl -u &lt;YOUR_KEY_ID&gt;:&lt;YOUR_SECRET&gt; \\\r\n    -X POST https://api.razorpay.com/v1/orders \\\r\n    -H &quot;content-type: application/json&quot; \\\r\n    -d &#39;{\r\n      &quot;amount&quot;: 50000,\r\n      &quot;currency&quot;: &quot;INR&quot;,\r\n      &quot;receipt&quot;: &quot;receipt#1&quot;,\r\n      &quot;payment_capture&quot;: 1\r\n    }&#39;\r\n\r\nI have created a distinct method to produce an Order ID within my application.\r\n\r\n    import &#39;dart:convert&#39;;\r\n    import &#39;package:http/http.dart&#39; as http;\r\n    \r\n    Future&lt;String&gt; generateOrderId(String key, String secret,int amount) async{\r\n      var authn = &#39;Basic &#39; + base64Encode(utf8.encode(&#39;$key:$secret&#39;));\r\n    \r\n      var headers = {\r\n        &#39;content-type&#39;: &#39;application/json&#39;,\r\n        &#39;Authorization&#39;: authn,\r\n      };\r\n    \r\n      var data = &#39;{ &quot;amount&quot;: $amount, &quot;currency&quot;: &quot;INR&quot;, &quot;receipt&quot;: &quot;receipt#R1&quot;, &quot;payment_capture&quot;: 1 }&#39;; // as per my experience the receipt doesn&#39;t play any role in helping you generate a certain pattern in your Order ID!!\r\n    \r\n      var res = await http.post(&#39;https://api.razorpay.com/v1/orders&#39;, headers: headers, body: data);\r\n      if (res.statusCode != 200) throw Exception(&#39;http.post error: statusCode= ${res.statusCode}&#39;);\r\n      print(&#39;ORDER ID response =&gt; ${res.body}&#39;);\r\n    \r\n      return json.decode(res.body)[&#39;id&#39;].toString();\r\n    }\r\n\r\n","title":"window.getDeviceDetails is not a function in razorpay integration with flutter","body":"<p>You need to send a request to Razorpay to generate an Order ID.\nlike this:</p>\n<pre><code>curl -u &lt;YOUR_KEY_ID&gt;:&lt;YOUR_SECRET&gt; \\\n-X POST https://api.razorpay.com/v1/orders \\\n-H &quot;content-type: application/json&quot; \\\n-d '{\n  &quot;amount&quot;: 50000,\n  &quot;currency&quot;: &quot;INR&quot;,\n  &quot;receipt&quot;: &quot;receipt#1&quot;,\n  &quot;payment_capture&quot;: 1\n}'\n</code></pre>\n<p>I have created a distinct method to produce an Order ID within my application.</p>\n<pre><code>import 'dart:convert';\nimport 'package:http/http.dart' as http;\n\nFuture&lt;String&gt; generateOrderId(String key, String secret,int amount) async{\n  var authn = 'Basic ' + base64Encode(utf8.encode('$key:$secret'));\n\n  var headers = {\n    'content-type': 'application/json',\n    'Authorization': authn,\n  };\n\n  var data = '{ &quot;amount&quot;: $amount, &quot;currency&quot;: &quot;INR&quot;, &quot;receipt&quot;: &quot;receipt#R1&quot;, &quot;payment_capture&quot;: 1 }'; // as per my experience the receipt doesn't play any role in helping you generate a certain pattern in your Order ID!!\n\n  var res = await http.post('https://api.razorpay.com/v1/orders', headers: headers, body: data);\n  if (res.statusCode != 200) throw Exception('http.post error: statusCode= ${res.statusCode}');\n  print('ORDER ID response =&gt; ${res.body}');\n\n  return json.decode(res.body)['id'].toString();\n}\n</code></pre>\n"}],"owner":{"account_id":18628557,"reputation":179,"user_id":13577102,"display_name":"Aashraya Singal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1323,"favorite_count":0,"down_vote_count":1,"up_vote_count":17,"answer_count":2,"score":16,"last_activity_date":1695253482,"creation_date":1594496145,"question_id":62853695,"body_markdown":"This is the Error Message that is showing I/chromium: [INFO:CONSOLE(1)] &quot;Uncaught TypeError: window.getDeviceDetails is not a function&quot;, source: https://api.razorpay.com/v1/checkout/public?version=1.5.16&amp;library=checkoutjs&amp;platform=android (1)","title":"window.getDeviceDetails is not a function in razorpay integration with flutter","body":"<p>This is the Error Message that is showing I/chromium: [INFO:CONSOLE(1)] &quot;Uncaught TypeError: window.getDeviceDetails is not a function&quot;, source: <a href=\"https://api.razorpay.com/v1/checkout/public?version=1.5.16&amp;library=checkoutjs&amp;platform=android\" rel=\"noreferrer\">https://api.razorpay.com/v1/checkout/public?version=1.5.16&amp;library=checkoutjs&amp;platform=android</a> (1)</p>\n"},{"tags":["java","spring","generics","dependency-injection"],"owner":{"account_id":17351379,"reputation":11,"user_id":18241395,"display_name":"Sergei S."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695274135,"answer_count":0,"score":0,"last_activity_date":1695253453,"creation_date":1695253453,"question_id":77146442,"body_markdown":"I created a generic interface and several parameterized implementations for it. Then I try to inject a class implementing this interface with a concrete type via the @Autoware annotation but fail.\r\n\r\nI create an interface:\r\n\r\n\r\n```\r\npublic interface DataParser&lt;T&gt; {\r\n     T parse(List&lt;String&gt; objectList);\r\n}\r\n```\r\nand realisation :\r\n\r\n\r\n\r\n```\r\n@Component\r\npublic class DataItemParserImpl implements DataParser&lt;Item&gt; {\r\n    @Override\r\n    public Item parse(List&lt;String&gt; objectList) {\r\n```\r\n\r\nwhen I try to Autoware bean like this \r\n\r\n\r\n```\r\n    @Autowired\r\n    @Qualifier(&quot;dataItemParserImpl&quot;)\r\n    public DataParser&lt;Item&gt; itemDataParser;\r\n```\r\nI doesn&#39;t get any error, but object itemDataParser is NULL. \r\nWhat&#39;s the catch? I&#39;m thinking about type erasure. How to fix, optimize?","title":"Generic Interface autowaring in Spring","body":"<p>I created a generic interface and several parameterized implementations for it. Then I try to inject a class implementing this interface with a concrete type via the @Autoware annotation but fail.</p>\n<p>I create an interface:</p>\n<pre><code>public interface DataParser&lt;T&gt; {\n     T parse(List&lt;String&gt; objectList);\n}\n</code></pre>\n<p>and realisation :</p>\n<pre><code>@Component\npublic class DataItemParserImpl implements DataParser&lt;Item&gt; {\n    @Override\n    public Item parse(List&lt;String&gt; objectList) {\n</code></pre>\n<p>when I try to Autoware bean like this</p>\n<pre><code>    @Autowired\n    @Qualifier(&quot;dataItemParserImpl&quot;)\n    public DataParser&lt;Item&gt; itemDataParser;\n</code></pre>\n<p>I doesn't get any error, but object itemDataParser is NULL.\nWhat's the catch? I'm thinking about type erasure. How to fix, optimize?</p>\n"},{"tags":["java","compression","gzip"],"comments":[{"owner":{"account_id":1083854,"reputation":13775,"user_id":1080064,"accept_rate":43,"display_name":"tkausl"},"score":2,"creation_date":1695249587,"post_id":77146227,"comment_id":136000921,"body_markdown":"You&#39;re treating your bytes as string and then convert it to UTF-8. Don&#39;t do that.","body":"You&#39;re treating your bytes as string and then convert it to UTF-8. Don&#39;t do that."},{"owner":{"account_id":20053569,"reputation":141,"user_id":14701745,"display_name":"HelloWorld"},"score":0,"creation_date":1695250681,"post_id":77146227,"comment_id":136001006,"body_markdown":"Is there way to unzip if I have only the string?","body":"Is there way to unzip if I have only the string?"},{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":1,"creation_date":1695370122,"post_id":77146227,"comment_id":136018011,"body_markdown":"You need to receive the gzip as byte[]. A gzip byte stream isn&#39;t convertable to String reliably - whatever encoding you try, the conversion as String and back is unlikely to return the original bytes.","body":"You need to receive the gzip as byte[]. A gzip byte stream isn&#39;t convertable to String reliably - whatever encoding you try, the conversion as String and back is unlikely to return the original bytes."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695253072,"creation_date":1695253072,"answer_id":77146430,"question_id":77146227,"body_markdown":"&gt; _&quot;... What am I doing wrong? I have verified that file is in fact GZIP format and it&#39;s not corrupted. ...&quot;_\r\n\r\nReturn a _byte array_ from _readUsingFileInputStream_, and use the [_String_ constructor](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#%3Cinit%3E(byte%5B%5D,java.nio.charset.Charset)) to create a _UTF-8_ value.\r\n\r\n```java\r\n/**\r\n * Read file content into a String\r\n */\r\nprivate static byte[] readUsingFileInputStream(String fileName) throws IOException {\r\n    try (FileInputStream fis = new FileInputStream(fileName)) {\r\n        return fis.readAllBytes();\r\n    }\r\n}\r\n\r\n/**\r\n * Unzip file content\r\n */\r\npublic static String unzip(final byte[] compressed) throws IOException {\r\n    try (final GZIPInputStream gzipInput = new GZIPInputStream(new ByteArrayInputStream(compressed))) {\r\n        return new String(gzipInput.readAllBytes(), StandardCharsets.UTF_8);\r\n    }\r\n}\r\n```\r\n\r\nExample\r\n\r\n```java\r\nbyte[] compressedData = readUsingFileInputStream(&quot;/path/to/my/compressed_file_json.gz&quot;);\r\nSystem.out.println(unzip(compressedData));\r\n```","title":"Java: Unable to unzip a gzip compressed file?","body":"<blockquote>\n<p><em>&quot;... What am I doing wrong? I have verified that file is in fact GZIP format and it's not corrupted. ...&quot;</em></p>\n</blockquote>\n<p>Return a <em>byte array</em> from <em>readUsingFileInputStream</em>, and use the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#%3Cinit%3E(byte%5B%5D,java.nio.charset.Charset)\" rel=\"nofollow noreferrer\"><em>String</em> constructor</a> to create a <em>UTF-8</em> value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Read file content into a String\n */\nprivate static byte[] readUsingFileInputStream(String fileName) throws IOException {\n    try (FileInputStream fis = new FileInputStream(fileName)) {\n        return fis.readAllBytes();\n    }\n}\n\n/**\n * Unzip file content\n */\npublic static String unzip(final byte[] compressed) throws IOException {\n    try (final GZIPInputStream gzipInput = new GZIPInputStream(new ByteArrayInputStream(compressed))) {\n        return new String(gzipInput.readAllBytes(), StandardCharsets.UTF_8);\n    }\n}\n</code></pre>\n<p>Example</p>\n<pre class=\"lang-java prettyprint-override\"><code>byte[] compressedData = readUsingFileInputStream(&quot;/path/to/my/compressed_file_json.gz&quot;);\nSystem.out.println(unzip(compressedData));\n</code></pre>\n"}],"owner":{"account_id":20053569,"reputation":141,"user_id":14701745,"display_name":"HelloWorld"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695253072,"creation_date":1695248956,"question_id":77146227,"body_markdown":"I am trying to unzip a gzip file content that I have read into memory as a String. \r\n\r\n```\r\n    /**\r\n     * Read file content into a String\r\n     */\r\n    private static String readUsingFileInputStream(String fileName) {\r\n        FileInputStream fis = null;\r\n        byte[] buffer = new byte[10];\r\n        StringBuilder sb = new StringBuilder();\r\n        try {\r\n            fis = new FileInputStream(fileName);\r\n\r\n\r\n            while (fis.read(buffer) != -1) {\r\n                sb.append(new String(buffer));\r\n                buffer = new byte[10];\r\n            }\r\n            fis.close();\r\n\r\n        } catch (IOException e) {\r\n            //...\r\n        return sb.toString();\r\n    }\r\n\r\n    /**\r\n     * Unzip file content\r\n     */\r\n    public static String unzip(final byte[] compressed) {\r\n        try (final GZIPInputStream gzipInput = new GZIPInputStream(new ByteArrayInputStream(compressed));\r\n            final StringWriter stringWriter = new StringWriter()) {\r\n            IOUtils.copy(gzipInput, stringWriter, UTF_8);\r\n            return stringWriter.toString();\r\n        } catch (IOException e) {\r\n            throw new UncheckedIOException(&quot;Error while decompression!&quot;, e);\r\n        }\r\n    }\r\n```\r\nThen in my `main` method, I am doing:\r\n\r\n```\r\nString compressedData = readUsingFileInputStream(&quot;/path/to/my/compressed_file_json.gz&quot;);\r\nSystem.out.println(unzip(compressedData.getBytes(UTF_8)));\r\n```\r\n\r\nBut I am getting following error:\r\n\r\n```\r\njava.util.zip.ZipException: Not in GZIP format\r\n\tat java.base/java.util.zip.GZIPInputStream.readHeader(GZIPInputStream.java:166)\r\n\tat java.base/java.util.zip.GZIPInputStream.&lt;init&gt;(GZIPInputStream.java:80)\r\n\tat java.base/java.util.zip.GZIPInputStream.&lt;init&gt;(GZIPInputStream.java:92)\r\n```\r\n\r\nWhat am I doing wrong? I have verified that file is in fact GZIP format and it&#39;s not corrupted.\r\n\r\nNote: I am aware that I can input the FileInputStream directly in the GZIPInputStream, but for the purposes of the actual problem, I don&#39;t have access to FileInputStream, just resulting the String.","title":"Java: Unable to unzip a gzip compressed file?","body":"<p>I am trying to unzip a gzip file content that I have read into memory as a String.</p>\n<pre><code>    /**\n     * Read file content into a String\n     */\n    private static String readUsingFileInputStream(String fileName) {\n        FileInputStream fis = null;\n        byte[] buffer = new byte[10];\n        StringBuilder sb = new StringBuilder();\n        try {\n            fis = new FileInputStream(fileName);\n\n\n            while (fis.read(buffer) != -1) {\n                sb.append(new String(buffer));\n                buffer = new byte[10];\n            }\n            fis.close();\n\n        } catch (IOException e) {\n            //...\n        return sb.toString();\n    }\n\n    /**\n     * Unzip file content\n     */\n    public static String unzip(final byte[] compressed) {\n        try (final GZIPInputStream gzipInput = new GZIPInputStream(new ByteArrayInputStream(compressed));\n            final StringWriter stringWriter = new StringWriter()) {\n            IOUtils.copy(gzipInput, stringWriter, UTF_8);\n            return stringWriter.toString();\n        } catch (IOException e) {\n            throw new UncheckedIOException(&quot;Error while decompression!&quot;, e);\n        }\n    }\n</code></pre>\n<p>Then in my <code>main</code> method, I am doing:</p>\n<pre><code>String compressedData = readUsingFileInputStream(&quot;/path/to/my/compressed_file_json.gz&quot;);\nSystem.out.println(unzip(compressedData.getBytes(UTF_8)));\n</code></pre>\n<p>But I am getting following error:</p>\n<pre><code>java.util.zip.ZipException: Not in GZIP format\n    at java.base/java.util.zip.GZIPInputStream.readHeader(GZIPInputStream.java:166)\n    at java.base/java.util.zip.GZIPInputStream.&lt;init&gt;(GZIPInputStream.java:80)\n    at java.base/java.util.zip.GZIPInputStream.&lt;init&gt;(GZIPInputStream.java:92)\n</code></pre>\n<p>What am I doing wrong? I have verified that file is in fact GZIP format and it's not corrupted.</p>\n<p>Note: I am aware that I can input the FileInputStream directly in the GZIPInputStream, but for the purposes of the actual problem, I don't have access to FileInputStream, just resulting the String.</p>\n"},{"tags":["java","string","file","if-statement","text"],"comments":[{"owner":{"account_id":10795251,"reputation":5207,"user_id":7941251,"display_name":"SuperStormer"},"score":5,"creation_date":1695232000,"post_id":77144846,"comment_id":135998236,"body_markdown":"Presumably it allows for comments in the form of `# comment`. By no means is it necessary, but it is helpful for hand-written files.","body":"Presumably it allows for comments in the form of <code># comment</code>. By no means is it necessary, but it is helpful for hand-written files."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1695232357,"post_id":77144846,"comment_id":135998299,"body_markdown":"Yes, ignoring comments as @SuperStormer said. You need to make a decision on whether you&#39;re reading resources or arbitrarily-located files though, as the two means do not mix well","body":"Yes, ignoring comments as @SuperStormer said. You need to make a decision on whether you&#39;re reading resources or arbitrarily-located files though, as the two means do not mix well"},{"owner":{"account_id":200728,"reputation":3833,"user_id":446738,"accept_rate":71,"display_name":"worpet"},"score":3,"creation_date":1695232998,"post_id":77144846,"comment_id":135998441,"body_markdown":"It&#39;s your code so it&#39;s up to you. If you don&#39;t want to skip lines that begin with `#` or don&#39;t expect lines like this in your input, you don&#39;t have to do this.","body":"It&#39;s your code so it&#39;s up to you. If you don&#39;t want to skip lines that begin with <code>#</code> or don&#39;t expect lines like this in your input, you don&#39;t have to do this."},{"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"score":1,"creation_date":1695234427,"post_id":77144846,"comment_id":135998710,"body_markdown":"Its probably for commenting out lines, you can disallow for it, but if there exists somewhere files with commented out lines then you will get in trouble as your code might fail to load them.","body":"Its probably for commenting out lines, you can disallow for it, but if there exists somewhere files with commented out lines then you will get in trouble as your code might fail to load them."}],"answers":[{"tags":[],"owner":{"account_id":25647583,"reputation":122,"user_id":19415431,"display_name":"Divyansh Gemini"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695237307,"creation_date":1695237307,"answer_id":77145364,"question_id":77144846,"body_markdown":"In the `for` loop, we are checking for  `line.indexOf(&#39;#&#39;) == 0` to check if the line is a comment. So that the line will be ignored.\r\n\r\nYou can also use `line.charAt(0) == &#39;#&#39;` to check for comments, both ways are correct.\r\n\r\n**Commented the code for better explanation of each statement:**\r\n```\r\n// getting the complete path of &#39;filmovi.txt&#39; file as Path&#39;s object\r\nPath path = Paths.get(getClass().getClassLoader().getResource(&quot;filmovi.txt&quot;).toURI());\r\n         \r\n// getting all lines of the file as a List\r\nList&lt;String&gt; lines = Files.readAllLines(path, Charset.forName(&quot;UTF-8&quot;));\r\n\r\n// iterating over each line in the List of lines\r\nfor (String line : lines) {\r\n            \r\n        // removing extra spaces from beginning &amp; end of each line\r\n        line = line.trim();                                 \r\n\r\n        // if the line is empty (means it has no characters) or line&#39;s first character is &#39;#&#39; (means it is a comment)\r\n        if (line.equals(&quot;&quot;) || line.indexOf(&#39;#&#39;) == 0)\r\n \r\n                // then skipping further statements of the loop, &amp; continuing for next line\r\n                continue;\r\n\r\n        // splitting the line by delimiter &#39;;&#39; &amp; storing splitter parts into the array of String\r\n        String[] tokens = line.split(&quot;;&quot;);\r\n       \r\n        // storing the line number (which is written in starting of each line) in a Long type variable\r\n        Long id = Long.parseLong(tokens[0]);\r\n     \r\n        // storing the main text of the line in a String type variable\r\n        String naziv = tokens[1];\r\n  \r\n        // storing the number written at the end of each line in int type variable\r\n        int trajanje  = Integer.parseInt(tokens[2]);\r\n\r\n        ...\r\n}\r\n```\r\n","title":"Java - String that starts with &#39;#&#39;","body":"<p>In the <code>for</code> loop, we are checking for  <code>line.indexOf('#') == 0</code> to check if the line is a comment. So that the line will be ignored.</p>\n<p>You can also use <code>line.charAt(0) == '#'</code> to check for comments, both ways are correct.</p>\n<p><strong>Commented the code for better explanation of each statement:</strong></p>\n<pre><code>// getting the complete path of 'filmovi.txt' file as Path's object\nPath path = Paths.get(getClass().getClassLoader().getResource(&quot;filmovi.txt&quot;).toURI());\n         \n// getting all lines of the file as a List\nList&lt;String&gt; lines = Files.readAllLines(path, Charset.forName(&quot;UTF-8&quot;));\n\n// iterating over each line in the List of lines\nfor (String line : lines) {\n            \n        // removing extra spaces from beginning &amp; end of each line\n        line = line.trim();                                 \n\n        // if the line is empty (means it has no characters) or line's first character is '#' (means it is a comment)\n        if (line.equals(&quot;&quot;) || line.indexOf('#') == 0)\n \n                // then skipping further statements of the loop, &amp; continuing for next line\n                continue;\n\n        // splitting the line by delimiter ';' &amp; storing splitter parts into the array of String\n        String[] tokens = line.split(&quot;;&quot;);\n       \n        // storing the line number (which is written in starting of each line) in a Long type variable\n        Long id = Long.parseLong(tokens[0]);\n     \n        // storing the main text of the line in a String type variable\n        String naziv = tokens[1];\n  \n        // storing the number written at the end of each line in int type variable\n        int trajanje  = Integer.parseInt(tokens[2]);\n\n        ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695252640,"creation_date":1695252640,"answer_id":77146400,"question_id":77144846,"body_markdown":"If you&#39;re going to treat the input as a resource, you could do it like this:\r\n```\r\nimport java.util.Map;\r\nimport java.util.List;\r\nimport java.util.Scanner;\r\nimport java.util.stream.Collectors;\r\n\r\npublic class FilmParser {\r\n    public static void main(String[] args) throws Exception {\r\n        Map&lt;Long, List&lt;Film&gt;&gt; filmMap = null;\r\n        try (Scanner sc = new Scanner(FilmParser.class.getResourceAsStream(&quot;/films.csv&quot;), &quot;UTF-8&quot;).useDelimiter(&quot;\\\\R&quot;)) {\r\n            filmMap = sc.tokens()\r\n                .map(String::trim)\r\n                .filter(s -&gt;!s.startsWith(&quot;#&quot;))\r\n                .filter(s -&gt;!s.isEmpty())\r\n                .map(Film::valueOfColonSV)\r\n                .collect(Collectors.groupingBy(Film::getId));\r\n        }\r\n        System.out.println(filmMap);\r\n    }\r\n}\r\n```\r\nI&#39;ve given the `Film` class a convenience method to create an instance from CSV","title":"Java - String that starts with &#39;#&#39;","body":"<p>If you're going to treat the input as a resource, you could do it like this:</p>\n<pre><code>import java.util.Map;\nimport java.util.List;\nimport java.util.Scanner;\nimport java.util.stream.Collectors;\n\npublic class FilmParser {\n    public static void main(String[] args) throws Exception {\n        Map&lt;Long, List&lt;Film&gt;&gt; filmMap = null;\n        try (Scanner sc = new Scanner(FilmParser.class.getResourceAsStream(&quot;/films.csv&quot;), &quot;UTF-8&quot;).useDelimiter(&quot;\\\\R&quot;)) {\n            filmMap = sc.tokens()\n                .map(String::trim)\n                .filter(s -&gt;!s.startsWith(&quot;#&quot;))\n                .filter(s -&gt;!s.isEmpty())\n                .map(Film::valueOfColonSV)\n                .collect(Collectors.groupingBy(Film::getId));\n        }\n        System.out.println(filmMap);\n    }\n}\n</code></pre>\n<p>I've given the <code>Film</code> class a convenience method to create an instance from CSV</p>\n"}],"owner":{"account_id":22370856,"reputation":11,"user_id":16585952,"display_name":"VennaTT"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1695252640,"creation_date":1695231916,"question_id":77144846,"body_markdown":"Can someone explain to me, why we need to write &#39;line.indexOf(&#39;#&#39;) == 0&#39; in this code? I&#39;m trying to load data from a text file and create objects. \r\n\r\n             Path path = Paths.get(getClass().getClassLoader().getResource(&quot;filmovi.txt&quot;).toURI());\r\n\t         //path is content of filmovi.txt\r\n\t\t     List&lt;String&gt; lines = Files.readAllLines(path, Charset.forName(&quot;UTF-8&quot;));\r\n             //I put that content in List\r\n\r\n\t\t\tfor (String line : lines) {\r\n\t\t\t\tline = line.trim();\t\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\tif (line.equals(&quot;&quot;) || line.indexOf(&#39;#&#39;) == 0)\t//why we check &#39;#&#39;\t\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tString[] tokens = line.split(&quot;;&quot;);\r\n\t\t\t\tLong id = Long.parseLong(tokens[0]);\r\n\t\t\t\tString naziv = tokens[1];\r\n\t\t\t\tint trajanje  = Integer.parseInt(tokens[2]);\r\n\r\n\t\t\t\tfilmovi.put(Long.parseLong(tokens[0]), new Film(id, naziv, trajanje));\r\n\t\t\t\tif(nextId&lt;id)\r\n\t\t\t\t\tnextId=id;\r\n\r\n\r\nThis is the content of the file I am trying to load. I just don&#39;t understand why is this (&#39;line.indexOf(&#39;#&#39;) == 0&#39;) important to check?\r\n\r\n```\r\n1;The Shining;146\r\n2;One Flew Over the Cuckoo&#39;s Nest;133\r\n3;The Little Shop of Horrors;72\r\n```","title":"Java - String that starts with &#39;#&#39;","body":"<p>Can someone explain to me, why we need to write 'line.indexOf('#') == 0' in this code? I'm trying to load data from a text file and create objects.</p>\n<pre><code>         Path path = Paths.get(getClass().getClassLoader().getResource(&quot;filmovi.txt&quot;).toURI());\n         //path is content of filmovi.txt\n         List&lt;String&gt; lines = Files.readAllLines(path, Charset.forName(&quot;UTF-8&quot;));\n         //I put that content in List\n\n        for (String line : lines) {\n            line = line.trim();                                 \n\n            if (line.equals(&quot;&quot;) || line.indexOf('#') == 0)  //why we check '#'  \n                continue;\n            String[] tokens = line.split(&quot;;&quot;);\n            Long id = Long.parseLong(tokens[0]);\n            String naziv = tokens[1];\n            int trajanje  = Integer.parseInt(tokens[2]);\n\n            filmovi.put(Long.parseLong(tokens[0]), new Film(id, naziv, trajanje));\n            if(nextId&lt;id)\n                nextId=id;\n</code></pre>\n<p>This is the content of the file I am trying to load. I just don't understand why is this ('line.indexOf('#') == 0') important to check?</p>\n<pre><code>1;The Shining;146\n2;One Flew Over the Cuckoo's Nest;133\n3;The Little Shop of Horrors;72\n</code></pre>\n"},{"tags":["java","for-loop"],"comments":[{"owner":{"account_id":2119809,"reputation":50937,"user_id":1883316,"display_name":"Tim Roberts"},"score":0,"creation_date":1694907583,"post_id":77119986,"comment_id":135953428,"body_markdown":"You have two `in.nextDouble()` calls.  Each one of those needs to read a number.  You need to fetch the value ONCE into a variable, then test the variable.","body":"You have two <code>in.nextDouble()</code> calls.  Each one of those needs to read a number.  You need to fetch the value ONCE into a variable, then test the variable."}],"answers":[{"tags":[],"owner":{"account_id":17987542,"reputation":91,"user_id":13072453,"display_name":"Drecomposer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695252587,"creation_date":1694908282,"answer_id":77120008,"question_id":77119986,"body_markdown":"The problem you are experiencing arises from the fact that when you&#39;re using methods like `nextDouble()`, you&#39;re actually consuming input. Each time you call this method, the scanner will read from the input source.\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class CountDownByTwos {\r\n   public static void main(String[] args) {\r\n        Scanner in = new Scanner(System.in);\r\n\r\n        System.out.println(&quot;Input a positive number and I will count down by 2&quot;);\r\n\r\n        // Keep prompting the user until a valid input is provided\r\n        double num = -1; // initialized to a negative number to ensure the loop runs at least once\r\n        while (num &lt; 0) {\r\n            if (!in.hasNextDouble()) {\r\n                String input = in.next();\r\n                System.err.println(input + &quot; is not a number, try again please&quot;);\r\n            } else {\r\n                num = in.nextDouble();\r\n                if (num &lt; 0) {\r\n                    System.err.println(&quot;Please input a POSITIVE number.&quot;);\r\n                    num = -1; // reset it to a negative value so the loop will continue\r\n                }\r\n            }\r\n        }\r\n\r\n        // for statement to count down\r\n        for (double i = num; i &gt;= 0; i = i - 2) {\r\n            System.out.println(i);\r\n        }\r\n    }\r\n}\r\n```","title":"How can I fix my code to accept a basic number input the first time, not the second time?","body":"<p>The problem you are experiencing arises from the fact that when you're using methods like <code>nextDouble()</code>, you're actually consuming input. Each time you call this method, the scanner will read from the input source.</p>\n<pre><code>import java.util.Scanner;\n\npublic class CountDownByTwos {\n   public static void main(String[] args) {\n        Scanner in = new Scanner(System.in);\n\n        System.out.println(&quot;Input a positive number and I will count down by 2&quot;);\n\n        // Keep prompting the user until a valid input is provided\n        double num = -1; // initialized to a negative number to ensure the loop runs at least once\n        while (num &lt; 0) {\n            if (!in.hasNextDouble()) {\n                String input = in.next();\n                System.err.println(input + &quot; is not a number, try again please&quot;);\n            } else {\n                num = in.nextDouble();\n                if (num &lt; 0) {\n                    System.err.println(&quot;Please input a POSITIVE number.&quot;);\n                    num = -1; // reset it to a negative value so the loop will continue\n                }\n            }\n        }\n\n        // for statement to count down\n        for (double i = num; i &gt;= 0; i = i - 2) {\n            System.out.println(i);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24735826,"reputation":1,"user_id":18623206,"display_name":"Cuber6251"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694918314,"creation_date":1694918278,"answer_id":77120291,"question_id":77119986,"body_markdown":"You are getting two inputs because you are calling in.nextDouble() twice, once when checking if it is negative, and once when declaring the num variable.\r\n\r\nThis code worked for me: `\r\n    \r\n    import java.util.Scanner;\r\n    \r\n    public class CountDownByTwos {\r\n        public static void main(String[] args) {\r\n            Scanner in = new Scanner(System.in);\r\n    \r\n            System.out.println(&quot;Input a positive number and I will count down by 2&quot;);\r\n    \r\n            //our number used for input\r\n            double num = 0;\r\n    \r\n            boolean isNum = false;\r\n    \r\n            //getting input while their input is not a number\r\n            while(!isNum) {\r\n                //trying to get a double input, if not double it is caught\r\n                try {\r\n                    //getting the input\r\n                    num = in.nextDouble();\r\n                    isNum = true;\r\n                } catch (Exception e) {\r\n                    //if input was caught\r\n                    String input = in.nextLine();\r\n                    System.err.println(input + &quot; is not a number, try again please&quot;);\r\n                    //going to the start of the loop again\r\n                    continue;\r\n                }\r\n                //if the try catch succeeded\r\n                if(num &lt; 0){\r\n                    //making isNum false so we start the loop again\r\n                    isNum = false;\r\n                    System.err.println(&quot;Please input a POSITIVE number next time&quot;);\r\n                }\r\n            }\r\n    \r\n            for (double i = num; i &gt;= 0; i -= 2) {\r\n                System.out.println(i);\r\n            }\r\n        }\r\n    }\r\n`","title":"How can I fix my code to accept a basic number input the first time, not the second time?","body":"<p>You are getting two inputs because you are calling in.nextDouble() twice, once when checking if it is negative, and once when declaring the num variable.</p>\n<p>This code worked for me: `</p>\n<pre><code>import java.util.Scanner;\n\npublic class CountDownByTwos {\n    public static void main(String[] args) {\n        Scanner in = new Scanner(System.in);\n\n        System.out.println(&quot;Input a positive number and I will count down by 2&quot;);\n\n        //our number used for input\n        double num = 0;\n\n        boolean isNum = false;\n\n        //getting input while their input is not a number\n        while(!isNum) {\n            //trying to get a double input, if not double it is caught\n            try {\n                //getting the input\n                num = in.nextDouble();\n                isNum = true;\n            } catch (Exception e) {\n                //if input was caught\n                String input = in.nextLine();\n                System.err.println(input + &quot; is not a number, try again please&quot;);\n                //going to the start of the loop again\n                continue;\n            }\n            //if the try catch succeeded\n            if(num &lt; 0){\n                //making isNum false so we start the loop again\n                isNum = false;\n                System.err.println(&quot;Please input a POSITIVE number next time&quot;);\n            }\n        }\n\n        for (double i = num; i &gt;= 0; i -= 2) {\n            System.out.println(i);\n        }\n    }\n}\n</code></pre>\n<p>`</p>\n"},{"tags":[],"owner":{"account_id":26975329,"reputation":1,"user_id":20540671,"display_name":"Marcocholla01"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695210203,"creation_date":1695122058,"answer_id":77134047,"question_id":77119986,"body_markdown":"The issue you&#39;re encountering is due to the way you structured your code. The `hasNextDouble()` and `nextDouble()` methods of the Scanner class should be used together to ensure proper input reading. In your current code, you&#39;re calling `in.nextDouble()` multiple times without re-prompting the user for input.\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class CountDownByTwos {\r\n    public static void main(String[] args) {\r\n        Scanner in = new Scanner(System.in);\r\n        \r\n        double num = 0; // Initialize num\r\n        \r\n        // Get a valid positive number from the user\r\n        while (true) {\r\n            System.out.println(&quot;Input a positive number and I will count down by 2&quot;);\r\n            \r\n            if (in.hasNextDouble()) {\r\n                num = in.nextDouble();\r\n                if (num &gt;= 0) {\r\n                    break; // Break the loop if a valid positive number is provided\r\n                } else {\r\n                    System.err.println(&quot;Please input a POSITIVE number&quot;);\r\n                }\r\n            } else {\r\n                String input = in.next();\r\n                System.err.println(input + &quot; is not a number, try again please&quot;);\r\n            }\r\n        }\r\n        \r\n        // Use a for loop to count down by 2 until it reaches 0\r\n        for (double i = num; i &gt;= 0; i -= 2) {\r\n            System.out.println(i);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nIn this code:\r\n\r\n1. We initialize `num` to `0` outside the loop to ensure it&#39;s defined before being used.\r\n\r\n2. We use a `while` loop to repeatedly prompt the user for input until a valid positive number is provided.\r\n\r\n3. Inside the loop, we use `hasNextDouble()` to check if the next input is a double. If it is, we then check if it&#39;s greater than or equal to `0`. If both conditions are met, we break out of the loop. If not, we display an error message.\r\n\r\n4. If the input is not a valid double, we display an error message and continue the loop.\r\n\r\n5. Once a valid positive number is obtained, we use a `for` loop to count down by 2 until it reaches `0`.\r\n\r\n","title":"How can I fix my code to accept a basic number input the first time, not the second time?","body":"<p>The issue you're encountering is due to the way you structured your code. The <code>hasNextDouble()</code> and <code>nextDouble()</code> methods of the Scanner class should be used together to ensure proper input reading. In your current code, you're calling <code>in.nextDouble()</code> multiple times without re-prompting the user for input.</p>\n<pre><code>import java.util.Scanner;\n\npublic class CountDownByTwos {\n    public static void main(String[] args) {\n        Scanner in = new Scanner(System.in);\n        \n        double num = 0; // Initialize num\n        \n        // Get a valid positive number from the user\n        while (true) {\n            System.out.println(&quot;Input a positive number and I will count down by 2&quot;);\n            \n            if (in.hasNextDouble()) {\n                num = in.nextDouble();\n                if (num &gt;= 0) {\n                    break; // Break the loop if a valid positive number is provided\n                } else {\n                    System.err.println(&quot;Please input a POSITIVE number&quot;);\n                }\n            } else {\n                String input = in.next();\n                System.err.println(input + &quot; is not a number, try again please&quot;);\n            }\n        }\n        \n        // Use a for loop to count down by 2 until it reaches 0\n        for (double i = num; i &gt;= 0; i -= 2) {\n            System.out.println(i);\n        }\n    }\n}\n\n</code></pre>\n<p>In this code:</p>\n<ol>\n<li><p>We initialize <code>num</code> to <code>0</code> outside the loop to ensure it's defined before being used.</p>\n</li>\n<li><p>We use a <code>while</code> loop to repeatedly prompt the user for input until a valid positive number is provided.</p>\n</li>\n<li><p>Inside the loop, we use <code>hasNextDouble()</code> to check if the next input is a double. If it is, we then check if it's greater than or equal to <code>0</code>. If both conditions are met, we break out of the loop. If not, we display an error message.</p>\n</li>\n<li><p>If the input is not a valid double, we display an error message and continue the loop.</p>\n</li>\n<li><p>Once a valid positive number is obtained, we use a <code>for</code> loop to count down by 2 until it reaches <code>0</code>.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":29462540,"reputation":9,"user_id":22577001,"display_name":"Topy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77120008,"answer_count":3,"score":0,"last_activity_date":1695252587,"creation_date":1694907462,"question_id":77119986,"body_markdown":"I need to make a simple code for homework where I take some input from the user and use a for-loop to count down by 2 until it reaches 0.\r\n\r\nI could do this part, but for some reason when I input a number it wont do anything until I input another number. I don&#39;t know why the first number is ignored, and would appreciate some help\r\n\r\n(Also, I can only give a wrong input once and I don&#39;t know how to make it accept multiple wrong inputs without breaking. If anyone knows how to fix that too I would appreciate it)\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class CountDownByTwos {\r\n        public static void main(String[] args) {\r\n            Scanner in = new Scanner(System.in);\r\n                System.out.println(&quot;Input a positive number and I will count down by 2&quot;);\r\n            //validation\r\n            if(!in.hasNextDouble()) {\r\n                String input = in.next();\r\n                    System.err.println(input+&quot; is not a number, try again please&quot;);\r\n            }\r\n            if(in.nextDouble() &lt; 0) {\r\n                    System.err.println(&quot;Please input a POSITIVE number next time&quot;);\r\n            }\r\n            //catch the proper input\r\n            double num = in.nextDouble();\r\n            //for statement with all the stuff in it\r\n            for(double i = num; i &gt;= 0; i = i-2) {\r\n                    System.out.println(i);\r\n            }\r\n        }\r\n    }\r\n\r\nI tried changing the validation to while loops and if-else ones, but those just added more errors. I think the hiccup comes from the validation, but it just randomly didn&#39;t accept the first correct input and refused to stop doing that, so idk.\r\n\r\nI know this is very simple code, but I just cannot figure out how to fix this and need some help.","title":"How can I fix my code to accept a basic number input the first time, not the second time?","body":"<p>I need to make a simple code for homework where I take some input from the user and use a for-loop to count down by 2 until it reaches 0.</p>\n<p>I could do this part, but for some reason when I input a number it wont do anything until I input another number. I don't know why the first number is ignored, and would appreciate some help</p>\n<p>(Also, I can only give a wrong input once and I don't know how to make it accept multiple wrong inputs without breaking. If anyone knows how to fix that too I would appreciate it)</p>\n<pre><code>import java.util.Scanner;\n\npublic class CountDownByTwos {\n    public static void main(String[] args) {\n        Scanner in = new Scanner(System.in);\n            System.out.println(&quot;Input a positive number and I will count down by 2&quot;);\n        //validation\n        if(!in.hasNextDouble()) {\n            String input = in.next();\n                System.err.println(input+&quot; is not a number, try again please&quot;);\n        }\n        if(in.nextDouble() &lt; 0) {\n                System.err.println(&quot;Please input a POSITIVE number next time&quot;);\n        }\n        //catch the proper input\n        double num = in.nextDouble();\n        //for statement with all the stuff in it\n        for(double i = num; i &gt;= 0; i = i-2) {\n                System.out.println(i);\n        }\n    }\n}\n</code></pre>\n<p>I tried changing the validation to while loops and if-else ones, but those just added more errors. I think the hiccup comes from the validation, but it just randomly didn't accept the first correct input and refused to stop doing that, so idk.</p>\n<p>I know this is very simple code, but I just cannot figure out how to fix this and need some help.</p>\n"},{"tags":["java","android","androidx","exoplayer","android-media3"],"owner":{"account_id":29346444,"reputation":1,"user_id":22484662,"display_name":"Sb HaniF "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695252484,"creation_date":1694769761,"question_id":77111172,"body_markdown":"I Create an app for playing video with fetching folders and files from storage.\r\n\r\nI implement **Androidx.media3.exoplayer** and playing video from a folder that contains multiple videos.\r\nMy problem is Next Button is unClickable, all button are clickable by default but Next Button is not clickable.\r\n\r\n**Note**: I&#39;m not customised just play for test exoplayer and i got a problem. \r\n\r\nIf Anyone fix this issue?\r\nPlease help me...\r\n\r\n\r\n[This is problems image][1]\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wup6S.jpg\r\n  [2]: https://i.stack.imgur.com/JcSYf.jpg","title":"Why Androidx.media3.exoplayer Video Next (exo_next) button not Clickable?","body":"<p>I Create an app for playing video with fetching folders and files from storage.</p>\n<p>I implement <strong>Androidx.media3.exoplayer</strong> and playing video from a folder that contains multiple videos.\nMy problem is Next Button is unClickable, all button are clickable by default but Next Button is not clickable.</p>\n<p><strong>Note</strong>: I'm not customised just play for test exoplayer and i got a problem.</p>\n<p>If Anyone fix this issue?\nPlease help me...</p>\n<p><a href=\"https://i.stack.imgur.com/wup6S.jpg\" rel=\"nofollow noreferrer\">This is problems image</a>\n<a href=\"https://i.stack.imgur.com/JcSYf.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JcSYf.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":297814,"reputation":25314,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"score":1,"creation_date":1442390890,"post_id":9499560,"comment_id":53057960,"body_markdown":"possible duplicate of [Compare two Byte Arrays? (Java)](http://stackoverflow.com/questions/5440039/compare-two-byte-arrays-java)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/5440039/compare-two-byte-arrays-java\">Compare two Byte Arrays? (Java)</a>"},{"owner":{"account_id":2201793,"reputation":3516,"user_id":1946016,"accept_rate":83,"display_name":"karthikdivi"},"score":0,"creation_date":1604675571,"post_id":9499560,"comment_id":114427641,"body_markdown":"Arrays.equals works. Run and check online here https://onecompiler.com/java/3wc4ec2su","body":"Arrays.equals works. Run and check online here <a href=\"https://onecompiler.com/java/3wc4ec2su\" rel=\"nofollow noreferrer\">onecompiler.com/java/3wc4ec2su</a>"}],"answers":[{"tags":[],"owner":{"account_id":82188,"reputation":7572,"user_id":231290,"accept_rate":94,"display_name":"Lukasz"},"down_vote_count":0,"up_vote_count":240,"is_accepted":true,"score":240,"last_activity_date":1330520305,"creation_date":1330520305,"answer_id":9499597,"question_id":9499560,"body_markdown":"Use `Arrays.equals()` if you want to compare the actual content of arrays that contain primitive types values (like byte).\r\n\r\n    System.out.println(Arrays.equals(aa, bb));\r\n\r\nUse `Arrays.deepEquals` for comparison of arrays that contain objects.","title":"how to compare the Java Byte[] array?","body":"<p>Use <code>Arrays.equals()</code> if you want to compare the actual content of arrays that contain primitive types values (like byte).</p>\n\n<pre><code>System.out.println(Arrays.equals(aa, bb));\n</code></pre>\n\n<p>Use <code>Arrays.deepEquals</code> for comparison of arrays that contain objects.</p>\n"},{"tags":[],"owner":{"account_id":322748,"reputation":36417,"user_id":642340,"accept_rate":83,"display_name":"soulcheck"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1330520341,"creation_date":1330520341,"answer_id":9499610,"question_id":9499560,"body_markdown":"Cause they&#39;re not equal, ie: they&#39;re different arrays with equal elements inside.\r\n\r\nTry using `Arrays.equals()` or `Arrays.deepEquals()`. ","title":"how to compare the Java Byte[] array?","body":"<p>Cause they're not equal, ie: they're different arrays with equal elements inside.</p>\n\n<p>Try using <code>Arrays.equals()</code> or <code>Arrays.deepEquals()</code>. </p>\n"},{"tags":[],"owner":{"account_id":11356,"reputation":26481,"user_id":21849,"accept_rate":96,"display_name":"Dan Vinton"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1330520946,"creation_date":1330520380,"answer_id":9499615,"question_id":9499560,"body_markdown":"have you looked at [`Arrays.equals()`][1]?\r\n\r\nEdit: if, as per your comment, the issue is using a byte array as a HashMap key then see [this question][2].\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#equals%28byte%5B%5D,%20byte%5B%5D%29\r\n  [2]: https://stackoverflow.com/questions/1058149/using-a-byte-array-as-hashmap-key-java","title":"how to compare the Java Byte[] array?","body":"<p>have you looked at <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#equals%28byte%5B%5D,%20byte%5B%5D%29\" rel=\"nofollow noreferrer\"><code>Arrays.equals()</code></a>?</p>\n\n<p>Edit: if, as per your comment, the issue is using a byte array as a HashMap key then see <a href=\"https://stackoverflow.com/questions/1058149/using-a-byte-array-as-hashmap-key-java\">this question</a>.</p>\n"},{"tags":[],"owner":{"account_id":9193,"reputation":343113,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1524034466,"creation_date":1330520405,"answer_id":9499622,"question_id":9499560,"body_markdown":"Because neither `==` nor the `equals()` method of the array compare the contents; both only evaluate object identity (`==` always does, and `equals()` is not overwritten, so the version from `Object` is being used).\r\n\r\nFor comparing the contents, use [`Arrays.equals()`][1].\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#equals%28byte%5B%5D,%20byte%5B%5D%29","title":"how to compare the Java Byte[] array?","body":"<p>Because neither <code>==</code> nor the <code>equals()</code> method of the array compare the contents; both only evaluate object identity (<code>==</code> always does, and <code>equals()</code> is not overwritten, so the version from <code>Object</code> is being used).</p>\n\n<p>For comparing the contents, use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#equals%28byte%5B%5D,%20byte%5B%5D%29\" rel=\"nofollow noreferrer\"><code>Arrays.equals()</code></a>.</p>\n"},{"tags":[],"owner":{"account_id":74486,"reputation":105478,"user_id":214010,"accept_rate":83,"display_name":"mikera"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1330520455,"creation_date":1330520455,"answer_id":9499633,"question_id":9499560,"body_markdown":"They are returning false because you are testing for object identity rather than value equality. This returns false because your arrays are actually different objects in memory.\r\n\r\nIf you want to test for value equality should use the handy comparison functions in [java.util.Arrays][1]\r\n\r\ne.g.\r\n\r\n    import java.util.Arrays;\r\n\r\n    &#39;&#39;&#39;&#39;&#39;\r\n\r\n    Arrays.equals(a,b);\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html","title":"how to compare the Java Byte[] array?","body":"<p>They are returning false because you are testing for object identity rather than value equality. This returns false because your arrays are actually different objects in memory.</p>\n\n<p>If you want to test for value equality should use the handy comparison functions in <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html\" rel=\"nofollow\">java.util.Arrays</a></p>\n\n<p>e.g.</p>\n\n<pre><code>import java.util.Arrays;\n\n'''''\n\nArrays.equals(a,b);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1330520455,"creation_date":1330520455,"answer_id":9499634,"question_id":9499560,"body_markdown":"As byte[] is mutable it is treated as only being `.equals()` if its the same object.\r\n\r\nIf you want to compare the contents you have to use `Arrays.equals(a, b)`\r\n\r\nBTW: Its not the way I would design it. ;)","title":"how to compare the Java Byte[] array?","body":"<p>As byte[] is mutable it is treated as only being <code>.equals()</code> if its the same object.</p>\n\n<p>If you want to compare the contents you have to use <code>Arrays.equals(a, b)</code></p>\n\n<p>BTW: Its not the way I would design it. ;)</p>\n"},{"tags":[],"owner":{"account_id":1074732,"reputation":3309,"user_id":1073129,"accept_rate":74,"display_name":"Bhavesh Shah"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1441454332,"creation_date":1330520459,"answer_id":9499635,"question_id":9499560,"body_markdown":"Try for this:\r\n\r\n    boolean blnResult = Arrays.equals(byteArray1, byteArray2);\r\n\r\nI am also not sure about this, but try this may be it works. ","title":"how to compare the Java Byte[] array?","body":"<p>Try for this:</p>\n\n<pre><code>boolean blnResult = Arrays.equals(byteArray1, byteArray2);\n</code></pre>\n\n<p>I am also not sure about this, but try this may be it works. </p>\n"},{"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1330521767,"creation_date":1330520942,"answer_id":9499744,"question_id":9499560,"body_markdown":"If you&#39;re trying to use the array as a generic HashMap key, that&#39;s not going to work. Consider creating a custom wrapper object that holds the array, and whose `equals(...)` and `hashcode(...)` method returns the results from the java.util.Arrays methods. For example...\r\n\r\n    import java.util.Arrays;\r\n    \r\n    public class MyByteArray {\r\n       private byte[] data;\r\n    \r\n       // ... constructors, getters methods, setter methods, etc...\r\n       \r\n    \r\n       @Override\r\n       public int hashCode() {\r\n          return Arrays.hashCode(data);\r\n       }\r\n    \r\n       @Override\r\n       public boolean equals(Object obj) {\r\n          if (this == obj)\r\n             return true;\r\n          if (obj == null)\r\n             return false;\r\n          if (getClass() != obj.getClass())\r\n             return false;\r\n          MyByteArray other = (MyByteArray) obj;\r\n          if (!Arrays.equals(data, other.data))\r\n             return false;\r\n          return true;\r\n       }\r\n       \r\n       \r\n    }\r\n\r\nObjects of this wrapper class will work fine as a key for your `HashMap&lt;MyByteArray, OtherType&gt;` and will allow for clean use of `equals(...)` and `hashCode(...)` methods.","title":"how to compare the Java Byte[] array?","body":"<p>If you're trying to use the array as a generic HashMap key, that's not going to work. Consider creating a custom wrapper object that holds the array, and whose <code>equals(...)</code> and <code>hashcode(...)</code> method returns the results from the java.util.Arrays methods. For example...</p>\n\n<pre><code>import java.util.Arrays;\n\npublic class MyByteArray {\n   private byte[] data;\n\n   // ... constructors, getters methods, setter methods, etc...\n\n\n   @Override\n   public int hashCode() {\n      return Arrays.hashCode(data);\n   }\n\n   @Override\n   public boolean equals(Object obj) {\n      if (this == obj)\n         return true;\n      if (obj == null)\n         return false;\n      if (getClass() != obj.getClass())\n         return false;\n      MyByteArray other = (MyByteArray) obj;\n      if (!Arrays.equals(data, other.data))\n         return false;\n      return true;\n   }\n\n\n}\n</code></pre>\n\n<p>Objects of this wrapper class will work fine as a key for your <code>HashMap&lt;MyByteArray, OtherType&gt;</code> and will allow for clean use of <code>equals(...)</code> and <code>hashCode(...)</code> methods.</p>\n"},{"tags":[],"owner":{"account_id":1212298,"reputation":27075,"user_id":1180621,"accept_rate":100,"display_name":"Andrejs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1414937703,"creation_date":1414937703,"answer_id":26700269,"question_id":9499560,"body_markdown":"You can also use a `ByteArrayComparator` from [Apache Directory][1]. In addition to *equals* it lets you compare if one array is **greater** than the other.\r\n\r\n\r\n  [1]: http://directory.apache.org/mavibot/gen-docs/latest/apidocs/org/apache/directory/mavibot/btree/comparator/ByteArrayComparator.html","title":"how to compare the Java Byte[] array?","body":"<p>You can also use a <code>ByteArrayComparator</code> from <a href=\"http://directory.apache.org/mavibot/gen-docs/latest/apidocs/org/apache/directory/mavibot/btree/comparator/ByteArrayComparator.html\" rel=\"nofollow\">Apache Directory</a>. In addition to <em>equals</em> it lets you compare if one array is <strong>greater</strong> than the other.</p>\n"},{"tags":[],"owner":{"account_id":3489469,"reputation":1,"user_id":2919515,"display_name":"nagyatka"},"down_vote_count":5,"up_vote_count":0,"is_accepted":false,"score":-5,"last_activity_date":1451934088,"creation_date":1451934088,"answer_id":34598001,"question_id":9499560,"body_markdown":"There&#39;s a faster way to do that:\r\n\r\n    Arrays.hashCode(arr1) == Arrays.hashCode(arr2)\r\n\r\n","title":"how to compare the Java Byte[] array?","body":"<p>There's a faster way to do that:</p>\n\n<pre><code>Arrays.hashCode(arr1) == Arrays.hashCode(arr2)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7094078,"reputation":194,"user_id":5428327,"display_name":"Jack47"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1453636797,"creation_date":1453636797,"answer_id":34975487,"question_id":9499560,"body_markdown":"why a[] doesn&#39;t equals b[]?\r\nBecause `equals` function really called on `Byte[]` or `byte[]` is `Object.equals(Object obj)`. This functions only compares object identify , don&#39;t compare the contents of the array.","title":"how to compare the Java Byte[] array?","body":"<p>why a[] doesn't equals b[]?\nBecause <code>equals</code> function really called on <code>Byte[]</code> or <code>byte[]</code> is <code>Object.equals(Object obj)</code>. This functions only compares object identify , don't compare the contents of the array.</p>\n"},{"tags":[],"owner":{"account_id":138148,"reputation":5659,"user_id":342882,"accept_rate":34,"display_name":"Daniil Iaitskov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1481962442,"creation_date":1481962442,"answer_id":41196690,"question_id":9499560,"body_markdown":"I looked for an array wrapper which makes it comparable to use with guava TreeRangeMap. The class doesn&#39;t accept comparator.\r\n\r\nAfter some research I realized that ByteBuffer from JDK has this feature and it doesn&#39;t copy original array which is good.\r\nMore over you can compare faster with ByteBuffer::asLongBuffer 8 bytes at time (also doesn&#39;t copy). By default ByteBuffer::wrap(byte[]) use BigEndian so order relation is the same as comparing individual bytes.\r\n\r\n\r\n\r\n. ","title":"how to compare the Java Byte[] array?","body":"<p>I looked for an array wrapper which makes it comparable to use with guava TreeRangeMap. The class doesn't accept comparator.</p>\n\n<p>After some research I realized that ByteBuffer from JDK has this feature and it doesn't copy original array which is good.\nMore over you can compare faster with ByteBuffer::asLongBuffer 8 bytes at time (also doesn't copy). By default ByteBuffer::wrap(byte[]) use BigEndian so order relation is the same as comparing individual bytes.</p>\n\n<p>. </p>\n"},{"tags":[],"owner":{"account_id":3411471,"reputation":3358,"user_id":2861283,"accept_rate":20,"display_name":"Rakesh Chaudhari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523879102,"creation_date":1523879102,"answer_id":49856513,"question_id":9499560,"body_markdown":"Java byte compare,\r\n\r\n\t\r\n\r\n    public static boolean equals(byte[] a, byte[] a2) {\r\n    \t\tif (a == a2)\r\n    \t\t\treturn true;\r\n    \t\tif (a == null || a2 == null)\r\n    \t\t\treturn false;\r\n    \r\n    \t\tint length = a.length;\r\n    \t\tif (a2.length != length)\r\n    \t\t\treturn false;\r\n    \r\n    \t\tfor (int i = 0; i &lt; length; i++)\r\n    \t\t\tif (a[i] != a2[i])\r\n    \t\t\t\treturn false;\r\n    \r\n    \t\treturn true;\r\n    \t}","title":"how to compare the Java Byte[] array?","body":"<p>Java byte compare,</p>\n\n<pre><code>public static boolean equals(byte[] a, byte[] a2) {\n        if (a == a2)\n            return true;\n        if (a == null || a2 == null)\n            return false;\n\n        int length = a.length;\n        if (a2.length != length)\n            return false;\n\n        for (int i = 0; i &lt; length; i++)\n            if (a[i] != a2[i])\n                return false;\n\n        return true;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2384530,"reputation":1672,"user_id":2085768,"display_name":"RoutesMaps.com"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531406365,"creation_date":1531406365,"answer_id":51308502,"question_id":9499560,"body_markdown":"You can also use org.apache.commons.lang.ArrayUtils.isEquals()","title":"how to compare the Java Byte[] array?","body":"<p>You can also use org.apache.commons.lang.ArrayUtils.isEquals()</p>\n"},{"tags":[],"owner":{"account_id":2102941,"reputation":7351,"user_id":1870054,"accept_rate":72,"display_name":"wener"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1537503565,"creation_date":1537503565,"answer_id":52436549,"question_id":9499560,"body_markdown":"`Arrays.equals` is not enough for a comparator, you can not check the map contain the data. I copy the code from `Arrays.equals`, modified to build a `Comparator`.\r\n\r\n    class ByteArrays{\r\n        public static &lt;T&gt; SortedMap&lt;byte[], T&gt; newByteArrayMap() {\r\n            return new TreeMap&lt;&gt;(new ByteArrayComparator());\r\n        }\r\n    \r\n        public static SortedSet&lt;byte[]&gt; newByteArraySet() {\r\n            return new TreeSet&lt;&gt;(new ByteArrayComparator());\r\n        }\r\n    \r\n        static class ByteArrayComparator implements Comparator&lt;byte[]&gt; {\r\n            @Override\r\n            public int compare(byte[] a, byte[] b) {\r\n                if (a == b) {\r\n                    return 0;\r\n                }\r\n                if (a == null || b == null) {\r\n                    throw new NullPointerException();\r\n                }\r\n    \r\n                int length = a.length;\r\n                int cmp;\r\n                if ((cmp = Integer.compare(length, b.length)) != 0) {\r\n                    return cmp;\r\n                }\r\n\r\n                for (int i = 0; i &lt; length; i++) {\r\n                    if ((cmp = Byte.compare(a[i], b[i])) != 0) {\r\n                        return cmp;\r\n                    }\r\n                }\r\n    \r\n                return 0;\r\n            }\r\n        }\r\n    }","title":"how to compare the Java Byte[] array?","body":"<p><code>Arrays.equals</code> is not enough for a comparator, you can not check the map contain the data. I copy the code from <code>Arrays.equals</code>, modified to build a <code>Comparator</code>.</p>\n\n<pre><code>class ByteArrays{\n    public static &lt;T&gt; SortedMap&lt;byte[], T&gt; newByteArrayMap() {\n        return new TreeMap&lt;&gt;(new ByteArrayComparator());\n    }\n\n    public static SortedSet&lt;byte[]&gt; newByteArraySet() {\n        return new TreeSet&lt;&gt;(new ByteArrayComparator());\n    }\n\n    static class ByteArrayComparator implements Comparator&lt;byte[]&gt; {\n        @Override\n        public int compare(byte[] a, byte[] b) {\n            if (a == b) {\n                return 0;\n            }\n            if (a == null || b == null) {\n                throw new NullPointerException();\n            }\n\n            int length = a.length;\n            int cmp;\n            if ((cmp = Integer.compare(length, b.length)) != 0) {\n                return cmp;\n            }\n\n            for (int i = 0; i &lt; length; i++) {\n                if ((cmp = Byte.compare(a[i], b[i])) != 0) {\n                    return cmp;\n                }\n            }\n\n            return 0;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7525670,"reputation":12194,"user_id":5715934,"accept_rate":95,"display_name":"Supun Wijerathne"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695251606,"creation_date":1695251606,"answer_id":77146351,"question_id":9499560,"body_markdown":"As a newer solution, you can use\r\n\r\n    import org.junit.jupiter.api.Assertions.*\r\n\r\n    assertArrayEquals(aa,bb);\r\n","title":"how to compare the Java Byte[] array?","body":"<p>As a newer solution, you can use</p>\n<pre><code>import org.junit.jupiter.api.Assertions.*\n\nassertArrayEquals(aa,bb);\n</code></pre>\n"}],"owner":{"account_id":1059829,"reputation":1432,"user_id":1061699,"display_name":"Lazy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":156007,"favorite_count":0,"down_vote_count":0,"up_vote_count":124,"accepted_answer_id":9499597,"answer_count":16,"score":124,"last_activity_date":1695251606,"creation_date":1330520150,"question_id":9499560,"body_markdown":"    public class ByteArr {\r\n\r\n        public static void main(String[] args){\r\n\t        Byte[] a = {(byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00};\r\n\t        Byte[] b = {(byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00};\r\n\t        byte[] aa = {(byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00};\r\n\t        byte[] bb = {(byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00};\r\n\t\t\r\n\t        System.out.println(a);\r\n\t        System.out.println(b);\r\n\t        System.out.println(a == b);\r\n\t        System.out.println(a.equals(b));\r\n\t\t\r\n\t        System.out.println(aa);\r\n\t        System.out.println(bb);\r\n\t        System.out.println(aa == bb);\r\n\t        System.out.println(aa.equals(bb));\r\n\t    }\r\n    }\r\n\r\n\r\nI do not know why all of them print false.\r\n\r\nWhen I run &quot;java ByteArray&quot;, the answer is &quot;false false false false&quot;.\r\n\r\nI think the a[] equals b[] but the JVM is telling me I am wrong, why","title":"how to compare the Java Byte[] array?","body":"<pre><code>public class ByteArr {\n\n    public static void main(String[] args){\n        Byte[] a = {(byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00};\n        Byte[] b = {(byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00};\n        byte[] aa = {(byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00};\n        byte[] bb = {(byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00};\n\n        System.out.println(a);\n        System.out.println(b);\n        System.out.println(a == b);\n        System.out.println(a.equals(b));\n\n        System.out.println(aa);\n        System.out.println(bb);\n        System.out.println(aa == bb);\n        System.out.println(aa.equals(bb));\n    }\n}\n</code></pre>\n\n<p>I do not know why all of them print false.</p>\n\n<p>When I run \"java ByteArray\", the answer is \"false false false false\".</p>\n\n<p>I think the a[] equals b[] but the JVM is telling me I am wrong, why</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":318306,"reputation":541,"user_id":635460,"accept_rate":100,"display_name":"Me again"},"score":1,"creation_date":1695228336,"post_id":77144442,"comment_id":135997522,"body_markdown":"so what is the question?","body":"so what is the question?"}],"answers":[{"tags":[],"owner":{"account_id":23603435,"reputation":67,"user_id":17639531,"display_name":"zerdeshtjuan"},"down_vote_count":2,"up_vote_count":1,"is_accepted":true,"score":-1,"last_activity_date":1695230131,"creation_date":1695230131,"answer_id":77144647,"question_id":77144442,"body_markdown":"Here is sample code that does what you want: \r\n```java\r\nimport java.util.regex.Pattern;\r\n\r\nclass Main{\r\n    public static void main(String[] args) {\r\n        String s = &quot;09 Software for use in assisted driving of railway vehicles; software for electronic railway driving assistance systems; hardware for electronic railway driving assistance systems; driver assistance systems for railway vehicles. 37 Installation and replacement services for railway vehicles, railway vehicles that incorporate driver assistance systems in the detection and avoidance of excessive speed, obstacles, vehicles and people; Software installation and replacement services for railway driving assistance systems and vehicle network coordination centers 42 Supervision services for driving. assistance; systems for railway vehicles; checking railway vehicles; checking railway vehicles that incorporate driver assistance systems&quot;;\r\n\r\n        // split on numbers \r\n        Pattern p = Pattern.compile(&quot;\\\\s*(?:\\\\d+)\\\\s*&quot;);\r\n        String[] arr = p.split(s);\r\n\r\n        // capture the numbers seperately\r\n        String[] numbers = p.matcher(s).results().map(m -&gt; m.group().strip()).toArray(String[]::new);\r\n\r\n        for (int i = 1; i &lt; arr.length; i++) {\r\n            System.out.printf(&quot;%s: \\&quot;%s\\&quot;\\n&quot;, numbers[i-1], arr[i]);// first split is empty, so first string is at index 1\r\n\r\n        }\r\n\r\n    }\r\n}   \r\n```","title":"Struggling with split text with number in between 1 to 45 using regex in java","body":"<p>Here is sample code that does what you want:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.regex.Pattern;\n\nclass Main{\n    public static void main(String[] args) {\n        String s = &quot;09 Software for use in assisted driving of railway vehicles; software for electronic railway driving assistance systems; hardware for electronic railway driving assistance systems; driver assistance systems for railway vehicles. 37 Installation and replacement services for railway vehicles, railway vehicles that incorporate driver assistance systems in the detection and avoidance of excessive speed, obstacles, vehicles and people; Software installation and replacement services for railway driving assistance systems and vehicle network coordination centers 42 Supervision services for driving. assistance; systems for railway vehicles; checking railway vehicles; checking railway vehicles that incorporate driver assistance systems&quot;;\n\n        // split on numbers \n        Pattern p = Pattern.compile(&quot;\\\\s*(?:\\\\d+)\\\\s*&quot;);\n        String[] arr = p.split(s);\n\n        // capture the numbers seperately\n        String[] numbers = p.matcher(s).results().map(m -&gt; m.group().strip()).toArray(String[]::new);\n\n        for (int i = 1; i &lt; arr.length; i++) {\n            System.out.printf(&quot;%s: \\&quot;%s\\&quot;\\n&quot;, numbers[i-1], arr[i]);// first split is empty, so first string is at index 1\n\n        }\n\n    }\n}   \n</code></pre>\n"}],"owner":{"account_id":1271410,"reputation":177,"user_id":1227571,"accept_rate":64,"display_name":"meet patel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1695230169,"accepted_answer_id":77144647,"answer_count":1,"score":-3,"last_activity_date":1695251549,"creation_date":1695228103,"question_id":77144442,"body_markdown":"i am struggling with splitting the whole text starting with number and followed by it text\r\nso the number is in between 01 to 45,can be possibility with any either 04 or 4 \r\n\r\n&gt;**09** Software for use in assisted driving of railway vehicles; software for electronic railway driving assistance systems; hardware for electronic railway driving assistance systems; driver assistance systems for railway vehicles. **37** Installation and replacement services for railway vehicles, railway vehicles that incorporate driver assistance systems in the detection and avoidance of excessive speed, obstacles, vehicles and people; Software installation and replacement services for railway driving assistance systems and vehicle network coordination centers **42** Supervision services for driving. assistance; systems for railway vehicles; checking railway vehicles; checking railway vehicles that incorporate driver assistance systems\r\n\r\nRequired output as per below array list.\r\n```\r\nindex[0]=09 Software for use in assisted driving of railway vehicles; software for electronic railway driving assistance systems; hardware for electronic railway driving assistance systems; driver assistance systems for railway vehicles.\r\nindex[1]=37 Installation and replacement services for railway vehicles, railway vehicles that incorporate driver assistance systems in the detection and avoidance of excessive speed, obstacles, vehicles and people; Software installation and replacement services for railway driving assistance systems and vehicle network coordination centers\r\nindex[2]=42 Supervision services for driving. assistance; systems for railway vehicles; checking railway vehicles; checking railway vehicles that incorporate driver assistance systems\r\n```","title":"Struggling with split text with number in between 1 to 45 using regex in java","body":"<p>i am struggling with splitting the whole text starting with number and followed by it text\nso the number is in between 01 to 45,can be possibility with any either 04 or 4</p>\n<blockquote>\n<p><strong>09</strong> Software for use in assisted driving of railway vehicles; software for electronic railway driving assistance systems; hardware for electronic railway driving assistance systems; driver assistance systems for railway vehicles. <strong>37</strong> Installation and replacement services for railway vehicles, railway vehicles that incorporate driver assistance systems in the detection and avoidance of excessive speed, obstacles, vehicles and people; Software installation and replacement services for railway driving assistance systems and vehicle network coordination centers <strong>42</strong> Supervision services for driving. assistance; systems for railway vehicles; checking railway vehicles; checking railway vehicles that incorporate driver assistance systems</p>\n</blockquote>\n<p>Required output as per below array list.</p>\n<pre><code>index[0]=09 Software for use in assisted driving of railway vehicles; software for electronic railway driving assistance systems; hardware for electronic railway driving assistance systems; driver assistance systems for railway vehicles.\nindex[1]=37 Installation and replacement services for railway vehicles, railway vehicles that incorporate driver assistance systems in the detection and avoidance of excessive speed, obstacles, vehicles and people; Software installation and replacement services for railway driving assistance systems and vehicle network coordination centers\nindex[2]=42 Supervision services for driving. assistance; systems for railway vehicles; checking railway vehicles; checking railway vehicles that incorporate driver assistance systems\n</code></pre>\n"},{"tags":["java","sql","postgresql","postgresql-14"],"comments":[{"owner":{"account_id":904738,"reputation":617035,"user_id":939860,"accept_rate":100,"display_name":"Erwin Brandstetter"},"score":0,"creation_date":1695175987,"post_id":77138887,"comment_id":135987845,"body_markdown":"Why did you tag Postgres 9.3 and 9.4? What is your actual version? Something more recent I would hope? Also, show a valid `CREATE TABLE` statement. That beats all vague descriptions.","body":"Why did you tag Postgres 9.3 and 9.4? What is your actual version? Something more recent I would hope? Also, show a valid <code>CREATE TABLE</code> statement. That beats all vague descriptions."},{"owner":{"account_id":26689899,"reputation":1,"user_id":20298616,"display_name":"mss"},"score":0,"creation_date":1695176134,"post_id":77138887,"comment_id":135987858,"body_markdown":"Hello, thank you for your question. As it is my first question here, it&#39;s the only versions appeared in list. I use 14 postgres","body":"Hello, thank you for your question. As it is my first question here, it&#39;s the only versions appeared in list. I use 14 postgres"},{"owner":{"account_id":904738,"reputation":617035,"user_id":939860,"accept_rate":100,"display_name":"Erwin Brandstetter"},"score":0,"creation_date":1695176237,"post_id":77138887,"comment_id":135987866,"body_markdown":"I see. That&#39;s misleading as &quot;9&quot; sorts before &quot;10&quot; in that smart sort. All versions are there. I fixed that for you.","body":"I see. That&#39;s misleading as &quot;9&quot; sorts before &quot;10&quot; in that smart sort. All versions are there. I fixed that for you."},{"owner":{"account_id":26689899,"reputation":1,"user_id":20298616,"display_name":"mss"},"score":0,"creation_date":1695176335,"post_id":77138887,"comment_id":135987871,"body_markdown":"group:\ncreate table dm_group\n(\n    entity_type            varchar(15) not null,\n    id                     bigserial\n        primary key,\n    description            text,\n    name                   varchar(255),\n    group_type             varchar(255));\n\nuser_to_group:\n\ncreate table user_to_group\n(\n    group_id bigint\n        constraint fk_gr_to_u\n            references group,\n    user_id  bigint\n        constraint fk_us_to_gr\n            references user\n);","body":"group: create table dm_group (     entity_type            varchar(15) not null,     id                     bigserial         primary key,     description            text,     name                   varchar(255),     group_type             varchar(255));  user_to_group:  create table user_to_group (     group_id bigint         constraint fk_gr_to_u             references group,     user_id  bigint         constraint fk_us_to_gr             references user );"},{"owner":{"account_id":904738,"reputation":617035,"user_id":939860,"accept_rate":100,"display_name":"Erwin Brandstetter"},"score":0,"creation_date":1695176474,"post_id":77138887,"comment_id":135987883,"body_markdown":"Please [edit] the question to present all info there. And use a legal table name. &quot;group&quot; is a reserved word that would require double-quoting. So go with &quot;dm_group&quot;.","body":"Please <a href=\"https://stackoverflow.com/posts/77138887/edit\">edit</a> the question to present all info there. And use a legal table name. &quot;group&quot; is a reserved word that would require double-quoting. So go with &quot;dm_group&quot;."},{"owner":{"account_id":26689899,"reputation":1,"user_id":20298616,"display_name":"mss"},"score":0,"creation_date":1695176964,"post_id":77138887,"comment_id":135987925,"body_markdown":"I agree, I&#39;ve applied changes","body":"I agree, I&#39;ve applied changes"},{"owner":{"account_id":904738,"reputation":617035,"user_id":939860,"accept_rate":100,"display_name":"Erwin Brandstetter"},"score":0,"creation_date":1695177002,"post_id":77138887,"comment_id":135987928,"body_markdown":"Can&#39;t use `group` as table alias, either. :) Please show the statement you actually tried.","body":"Can&#39;t use <code>group</code> as table alias, either. :) Please show the statement you actually tried."},{"owner":{"account_id":26689899,"reputation":1,"user_id":20298616,"display_name":"mss"},"score":0,"creation_date":1695177180,"post_id":77138887,"comment_id":135987941,"body_markdown":"Yeah, exactly, I&#39;ve added my statement","body":"Yeah, exactly, I&#39;ve added my statement"},{"owner":{"account_id":904738,"reputation":617035,"user_id":939860,"accept_rate":100,"display_name":"Erwin Brandstetter"},"score":0,"creation_date":1695177404,"post_id":77138887,"comment_id":135987959,"body_markdown":"And why would you join from `dm_user.id` to `dm_group.id`. Please present a consistent question next time. Gotta go.","body":"And why would you join from <code>dm_user.id</code> to <code>dm_group.id</code>. Please present a consistent question next time. Gotta go."},{"owner":{"account_id":26689899,"reputation":1,"user_id":20298616,"display_name":"mss"},"score":0,"creation_date":1695177672,"post_id":77138887,"comment_id":135987972,"body_markdown":"Because user can present a group or can be part of it. So dm_group_id can define user&#39;s group, where other user&#39;s can be included in. Hope you will find time","body":"Because user can present a group or can be part of it. So dm_group_id can define user&#39;s group, where other user&#39;s can be included in. Hope you will find time"},{"owner":{"account_id":26689899,"reputation":1,"user_id":20298616,"display_name":"mss"},"score":0,"creation_date":1695177862,"post_id":77138887,"comment_id":135987983,"body_markdown":"So group name can have entity_type Group and its name will be user&#39;s name who conduct it. But if entity_type is Discipline it shows with what subject user is related to..","body":"So group name can have entity_type Group and its name will be user&#39;s name who conduct it. But if entity_type is Discipline it shows with what subject user is related to.."}],"answers":[{"tags":[],"owner":{"account_id":28999910,"reputation":994,"user_id":22213656,"display_name":"Maimoona Abid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695187707,"creation_date":1695187707,"answer_id":77139520,"question_id":77138887,"body_markdown":"By combining subqueries and the string_agg function, you can get the desired results. However, you must modify your SQL query in a few specific ways. Here is an illustration of how to accomplish it:\r\n\r\n    SELECT\r\n        gr.id AS group_id,\r\n        string_agg(d.name || &#39;(&#39; || COALESCE(CAST(sub.count AS text), &#39;0&#39;) || &#39;)&#39;, &#39;; &#39;) AS &quot;Discipline Counts&quot;\r\n    FROM\r\n        dm_group gr\r\n    LEFT JOIN (\r\n        SELECT\r\n            g.id AS group_id,\r\n            u.id AS user_id,\r\n            d.name AS discipline_name\r\n        FROM\r\n            dm_user_to_group utg\r\n        JOIN\r\n            dm_group g ON utg.group_id = g.id\r\n        JOIN\r\n            dm_user u ON utg.user_id = u.id\r\n        LEFT JOIN\r\n            dm_group d ON u.id = d.id AND d.entity_type = &#39;Discipline&#39;\r\n        WHERE\r\n            g.group_type = &#39;Math&#39;\r\n    ) AS sub ON gr.id = sub.group_id\r\n    GROUP BY\r\n        gr.id\r\n    ORDER BY\r\n        gr.id;\r\n\r\nThis should return a list of group_ids and the subjects they are linked with, together with the number of users for each subject related to the &#39;Math&#39; group type. Change the table and column names to correspond to your actual database schema.\r\n\r\nHope it works :)","title":"PostgreSQL Using string_agg with count","body":"<p>By combining subqueries and the string_agg function, you can get the desired results. However, you must modify your SQL query in a few specific ways. Here is an illustration of how to accomplish it:</p>\n<pre><code>SELECT\n    gr.id AS group_id,\n    string_agg(d.name || '(' || COALESCE(CAST(sub.count AS text), '0') || ')', '; ') AS &quot;Discipline Counts&quot;\nFROM\n    dm_group gr\nLEFT JOIN (\n    SELECT\n        g.id AS group_id,\n        u.id AS user_id,\n        d.name AS discipline_name\n    FROM\n        dm_user_to_group utg\n    JOIN\n        dm_group g ON utg.group_id = g.id\n    JOIN\n        dm_user u ON utg.user_id = u.id\n    LEFT JOIN\n        dm_group d ON u.id = d.id AND d.entity_type = 'Discipline'\n    WHERE\n        g.group_type = 'Math'\n) AS sub ON gr.id = sub.group_id\nGROUP BY\n    gr.id\nORDER BY\n    gr.id;\n</code></pre>\n<p>This should return a list of group_ids and the subjects they are linked with, together with the number of users for each subject related to the 'Math' group type. Change the table and column names to correspond to your actual database schema.</p>\n<p>Hope it works :)</p>\n"},{"tags":[],"owner":{"account_id":904738,"reputation":617035,"user_id":939860,"accept_rate":100,"display_name":"Erwin Brandstetter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695250795,"creation_date":1695190012,"answer_id":77139692,"question_id":77138887,"body_markdown":"Here is my guess:\r\n\r\n~~~pgsql\r\nSELECT id, string_agg(dis_ct, &#39;; &#39;) AS &quot;Discipline Counts&quot;\r\nFROM  (\r\n   SELECT tr.id, d.name || &#39;(&#39; || count(DISTINCT d.id) || &#39;)&#39; AS dis_ct\r\n   FROM   dm_group           tr\r\n   LEFT   JOIN user_to_group ug ON ug.group_id = tr.id\r\n   LEFT   JOIN dm_user       u  ON u.id = ug.user_id\r\n   LEFT   JOIN dm_group      d  ON d.id = u.id\r\n                               AND d.entity_type = &#39;Discipline&#39;\r\n   WHERE  tr.group_type = &#39;TRAINER&#39;\r\n   GROUP  BY tr.id, d.name\r\n   ORDER  BY tr.id, d.name\r\n   ) sub\r\nGROUP  BY tr.id\r\nORDER  BY tr.id;\r\n~~~\r\n\r\nAggregate counts in a subquery. Then aggregate the desired string format at the outer level.\r\n\r\nIf no matching row in `d` is found, the count would be 0. But concatenating that to `d.name` (which then is `null`, consequently) removes these noise counts anyway, so no `FILTER` needed.","title":"PostgreSQL Using string_agg with count","body":"<p>Here is my guess:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT id, string_agg(dis_ct, '; ') AS &quot;Discipline Counts&quot;\nFROM  (\n   SELECT tr.id, d.name || '(' || count(DISTINCT d.id) || ')' AS dis_ct\n   FROM   dm_group           tr\n   LEFT   JOIN user_to_group ug ON ug.group_id = tr.id\n   LEFT   JOIN dm_user       u  ON u.id = ug.user_id\n   LEFT   JOIN dm_group      d  ON d.id = u.id\n                               AND d.entity_type = 'Discipline'\n   WHERE  tr.group_type = 'TRAINER'\n   GROUP  BY tr.id, d.name\n   ORDER  BY tr.id, d.name\n   ) sub\nGROUP  BY tr.id\nORDER  BY tr.id;\n</code></pre>\n<p>Aggregate counts in a subquery. Then aggregate the desired string format at the outer level.</p>\n<p>If no matching row in <code>d</code> is found, the count would be 0. But concatenating that to <code>d.name</code> (which then is <code>null</code>, consequently) removes these noise counts anyway, so no <code>FILTER</code> needed.</p>\n"}],"owner":{"account_id":26689899,"reputation":1,"user_id":20298616,"display_name":"mss"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695250795,"creation_date":1695175778,"question_id":77138887,"body_markdown":"I have to create a query to show **group_id** and the *list with the main user&#39;s subjects and number of people from this group per subjects*.\r\n\r\nHello, I agree that it&#39;s difficult to understand. Sorry for that.\r\nThere&#39;s some steps to make it easy to understand.\r\nHere is used one table(**dm_group gr**) for **two** facts: \r\n\r\n1. To show to is discipline leader (gr.entity_type=&#39;Group&#39; and gr.group_type=&#39;TRAINER&#39;), so I can identify only teachers. \r\nIn this case gr.name will be teacher&#39;s name.\r\n\r\n2. But every user has at least one line in dm_group gr, which shows what is his the main subject/direction (gr.entity_type = &#39;Discipline&#39;). In this case gr.name will be exactly the name of the main user&#39;s subject.\r\n\r\nSo, one user, as a teacher forms a group to what students can be assigned. And generally, every user has a main subject he is also assigned to. \r\n Finally, I should identify all teacher&#39;s ids with the list of all their students subjects with number of user&#39;s.\r\n\r\n1. So, first of all we identify **all the teachers** (select gr.id where group_type=&#39;TRAINER&#39;)\r\n2. Next in **dm_user_to_group utg** we find all users assigned to each teacher(**select u.id where utg.id = gr.id**)\r\n3. So the next step is *tricky*, knowing all user_ids for each teacher, I have to find all group ids for this users to find in dm_group their main subject(**where gr.entity_type = &#39;Discipline&#39;**) and finally to get how much people have this or that subject as the main in each teacher&#39;s group.\r\n\r\nResult should be like: group_id| subject(#);subject(#);..., where subject is the number of people from group and related to concrete subject.\r\n\r\nI wrote smth like this:\r\n\r\n*But it doesn&#39;t work as expected.. \r\n\r\n```\r\nSELECT tr.id AS &quot;Trainer ID&quot;,\r\n       string_agg(info.name || &#39;(&#39; || info.number || &#39;)&#39;,\r\n                  &#39;; &#39; order by info.name\r\n           ) AS &quot;Discipline Counts&quot;\r\nFROM (\r\n         SELECT d.name, count(u.userid) as number\r\n         FROM dm_group tr\r\n                  LEFT JOIN\r\n              dm_user_to_group utg ON tr.id = utg.group_id\r\n                  LEFT JOIN\r\n              dm_user u ON utg.user_id = u.userid\r\n                  LEFT JOIN\r\n              dm_group d ON u.userid = d.id AND d.entity_type = &#39;Discipline&#39;\r\n         group by d.name, u.userid) info\r\n         full outer JOIN dm_group tr on tr.name = info.name\r\nwhere tr.group_type = &#39;TRAINER&#39;\r\nGROUP BY tr.id\r\nORDER BY tr.id;\r\n```\r\n\r\nTables used:\r\n\r\n`dm_group`:\r\n\r\n```\r\ncreate table dm_group (\r\n  entity_type  varchar(15) not null,\r\n  id           bigserial primary key,\r\n  description  text\r\n  name         varchar(255),\r\n  group_type   varchar(255)\r\n);\r\n```\r\n\r\n`dm_user_to_group`:\r\n\r\n```\r\ncreate table dm_user_to_group (\r\n  group_id bigint constraint fk_gr_to_u references dm_group,\r\n  user_id  bigint constraint fk_us_to_gr references dm_user\r\n);\r\n```","title":"PostgreSQL Using string_agg with count","body":"<p>I have to create a query to show <strong>group_id</strong> and the <em>list with the main user's subjects and number of people from this group per subjects</em>.</p>\n<p>Hello, I agree that it's difficult to understand. Sorry for that.\nThere's some steps to make it easy to understand.\nHere is used one table(<strong>dm_group gr</strong>) for <strong>two</strong> facts:</p>\n<ol>\n<li><p>To show to is discipline leader (gr.entity_type='Group' and gr.group_type='TRAINER'), so I can identify only teachers.\nIn this case gr.name will be teacher's name.</p>\n</li>\n<li><p>But every user has at least one line in dm_group gr, which shows what is his the main subject/direction (gr.entity_type = 'Discipline'). In this case gr.name will be exactly the name of the main user's subject.</p>\n</li>\n</ol>\n<p>So, one user, as a teacher forms a group to what students can be assigned. And generally, every user has a main subject he is also assigned to.\nFinally, I should identify all teacher's ids with the list of all their students subjects with number of user's.</p>\n<ol>\n<li>So, first of all we identify <strong>all the teachers</strong> (select gr.id where group_type='TRAINER')</li>\n<li>Next in <strong>dm_user_to_group utg</strong> we find all users assigned to each teacher(<strong>select u.id where utg.id = gr.id</strong>)</li>\n<li>So the next step is <em>tricky</em>, knowing all user_ids for each teacher, I have to find all group ids for this users to find in dm_group their main subject(<strong>where gr.entity_type = 'Discipline'</strong>) and finally to get how much people have this or that subject as the main in each teacher's group.</li>\n</ol>\n<p>Result should be like: group_id| subject(#);subject(#);..., where subject is the number of people from group and related to concrete subject.</p>\n<p>I wrote smth like this:</p>\n<p>*But it doesn't work as expected..</p>\n<pre><code>SELECT tr.id AS &quot;Trainer ID&quot;,\n       string_agg(info.name || '(' || info.number || ')',\n                  '; ' order by info.name\n           ) AS &quot;Discipline Counts&quot;\nFROM (\n         SELECT d.name, count(u.userid) as number\n         FROM dm_group tr\n                  LEFT JOIN\n              dm_user_to_group utg ON tr.id = utg.group_id\n                  LEFT JOIN\n              dm_user u ON utg.user_id = u.userid\n                  LEFT JOIN\n              dm_group d ON u.userid = d.id AND d.entity_type = 'Discipline'\n         group by d.name, u.userid) info\n         full outer JOIN dm_group tr on tr.name = info.name\nwhere tr.group_type = 'TRAINER'\nGROUP BY tr.id\nORDER BY tr.id;\n</code></pre>\n<p>Tables used:</p>\n<p><code>dm_group</code>:</p>\n<pre><code>create table dm_group (\n  entity_type  varchar(15) not null,\n  id           bigserial primary key,\n  description  text\n  name         varchar(255),\n  group_type   varchar(255)\n);\n</code></pre>\n<p><code>dm_user_to_group</code>:</p>\n<pre><code>create table dm_user_to_group (\n  group_id bigint constraint fk_gr_to_u references dm_group,\n  user_id  bigint constraint fk_us_to_gr references dm_user\n);\n</code></pre>\n"},{"tags":["java","switch-statement","java.util.scanner"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":0,"creation_date":1695247312,"post_id":77146120,"comment_id":136000666,"body_markdown":"As a standard sanity-debugging step: print the content of `choice` before you start switching, and print it between some brackets, to see what&#39;s actually in it. And those brackets are important, because you want to see whether there are any special whitespace characters or not.","body":"As a standard sanity-debugging step: print the content of <code>choice</code> before you start switching, and print it between some brackets, to see what&#39;s actually in it. And those brackets are important, because you want to see whether there are any special whitespace characters or not."},{"owner":{"account_id":21322273,"reputation":1,"user_id":15695231,"display_name":"Prime"},"score":0,"creation_date":1695247709,"post_id":77146120,"comment_id":136000710,"body_markdown":"@Mike&#39;Pomax&#39;Kamermans Thanks, I did it, and it didnt print out anything. Its a blank line.\nIm guessing the scanner didnt take the input, but why?","body":"@Mike&#39;Pomax&#39;Kamermans Thanks, I did it, and it didnt print out anything. Its a blank line. Im guessing the scanner didnt take the input, but why?"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1695247888,"post_id":77146120,"comment_id":136000735,"body_markdown":"`scanner.nextInt()` won&#39;t consume the new line which is in the buffer, so your next call to `String choice = scanner.nextLine();` will return an empty `String`.  Instead of calling `scanner.nextLine();` after it (which you seem to have identified as a symptom of the problem), call `scanner.nextLine();` before `String choice = scanner.nextLine();`","body":"<code>scanner.nextInt()</code> won&#39;t consume the new line which is in the buffer, so your next call to <code>String choice = scanner.nextLine();</code> will return an empty <code>String</code>.  Instead of calling <code>scanner.nextLine();</code> after it (which you seem to have identified as a symptom of the problem), call <code>scanner.nextLine();</code> before <code>String choice = scanner.nextLine();</code>"},{"owner":{"account_id":21322273,"reputation":1,"user_id":15695231,"display_name":"Prime"},"score":0,"creation_date":1695248200,"post_id":77146120,"comment_id":136000776,"body_markdown":"@MadProgrammer You&#39;re a life saver man. It works now! Thanks a lot. But could you explain again, why it didnt work and why it works now? I dont seem to understand, so maybe try explaining it like you would explain it to a 5 year old? &#128517;","body":"@MadProgrammer You&#39;re a life saver man. It works now! Thanks a lot. But could you explain again, why it didnt work and why it works now? I dont seem to understand, so maybe try explaining it like you would explain it to a 5 year old? "},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1695248454,"post_id":77146120,"comment_id":136000801,"body_markdown":"@Prime I only understand it from an observational point of view, but when you time something into the console, the `Scanner` will consume all the text, including the new line character (which is injected when you press enter). `nextInt` will only remove the characters from the buffer which form a valid `int` value, the new line character will remain.  So the next call to `nextLine` will return an empty `String`, because there&#39;s no other characters proceeding the new line character, but will &quot;wait&quot; for input at the second `nextLine`, as no new data exists yet","body":"@Prime I only understand it from an observational point of view, but when you time something into the console, the <code>Scanner</code> will consume all the text, including the new line character (which is injected when you press enter). <code>nextInt</code> will only remove the characters from the buffer which form a valid <code>int</code> value, the new line character will remain.  So the next call to <code>nextLine</code> will return an empty <code>String</code>, because there&#39;s no other characters proceeding the new line character, but will &quot;wait&quot; for input at the second <code>nextLine</code>, as no new data exists yet"},{"owner":{"account_id":21322273,"reputation":1,"user_id":15695231,"display_name":"Prime"},"score":0,"creation_date":1695249128,"post_id":77146120,"comment_id":136000871,"body_markdown":"@MadProgrammer Got it, Thanks! Have a great rest of the week.","body":"@MadProgrammer Got it, Thanks! Have a great rest of the week."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1695258100,"post_id":77146120,"comment_id":136001620,"body_markdown":"Vague title. Rewrite to summarize your specific technical issue.","body":"Vague title. Rewrite to summarize your specific technical issue."}],"owner":{"account_id":21322273,"reputation":1,"user_id":15695231,"display_name":"Prime"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695258127,"answer_count":0,"score":0,"last_activity_date":1695247268,"creation_date":1695247110,"question_id":77146120,"body_markdown":"I am writing a code to calculate the amount of crates you need depending on the amount of bottles you have.\r\n\r\n6 bottles equal 1 crate.\r\n\r\nFor example, if you&#39;d input 4 bottles, the output would be 1 crate.\r\nIf you&#39;d input 9 bottles, you&#39;d get 2 crates etc..\r\n\r\nNow I am facing some trouble trying to give the user a choice if they want to calculate again or not. \r\nHeres my code:\r\n\r\n    import java.util.*;\r\n\r\n    public class Main {\r\n      public static void main(String[] args) {\r\n        Scanner scanner = new Scanner(System.in);\r\n\r\n        boolean again = true;\r\n        boolean loop = true;\r\n\r\n        while (again) {\r\n          System.out.println(&quot;CRATE CALCULATION&quot;);\r\n          System.out.println(&quot;==================&quot;);\r\n          System.out.println(&quot;Number of bottles?: &quot;);\r\n\r\n          int bottles;\r\n          if (scanner.hasNextInt()) {\r\n            bottles = scanner.nextInt();\r\n            if (bottles &lt;= 0) {\r\n              System.out.println(&quot;You dont need any crates!&quot;);\r\n            } else {\r\n              int crates = (bottles + 5) / 6;\r\n              System.out.println(&quot;You need &quot; + crates + &quot; crates!&quot;);\r\n            }\r\n\r\n            System.out.println(&quot;Do you want to calculate again? (y/n)&quot;);\r\n            String choice = scanner.nextLine();\r\n            scanner.nextLine();\r\n\r\n            switch (choice) {\r\n            case &quot;y&quot;:\r\n              again = true;\r\n              break;\r\n            case &quot;n&quot;:\r\n              again = false;\r\n              break;\r\n            default:\r\n              System.out.println(&quot;Invalid choice. Lets try again.&quot;);\r\n              again = true;\r\n              break;\r\n            }\r\n          } else {\r\n            System.out.println(&quot;You need to tell us the amount of bottles you have in numbers.&quot;);\r\n            scanner.next();\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\nThe problem I have is that whenever i enter &quot;y&quot; to calculate again, instead of running the &quot;y&quot; case, it runs the default one. I did research, even talked to ChatGPT but nothing works. Im thinking the problem here lies within scanner, but thats just me.\r\n\r\nHelp would be much appreciated. ","title":"Scanner is giving me trouble in Java","body":"<p>I am writing a code to calculate the amount of crates you need depending on the amount of bottles you have.</p>\n<p>6 bottles equal 1 crate.</p>\n<p>For example, if you'd input 4 bottles, the output would be 1 crate.\nIf you'd input 9 bottles, you'd get 2 crates etc..</p>\n<p>Now I am facing some trouble trying to give the user a choice if they want to calculate again or not.\nHeres my code:</p>\n<pre><code>import java.util.*;\n\npublic class Main {\n  public static void main(String[] args) {\n    Scanner scanner = new Scanner(System.in);\n\n    boolean again = true;\n    boolean loop = true;\n\n    while (again) {\n      System.out.println(&quot;CRATE CALCULATION&quot;);\n      System.out.println(&quot;==================&quot;);\n      System.out.println(&quot;Number of bottles?: &quot;);\n\n      int bottles;\n      if (scanner.hasNextInt()) {\n        bottles = scanner.nextInt();\n        if (bottles &lt;= 0) {\n          System.out.println(&quot;You dont need any crates!&quot;);\n        } else {\n          int crates = (bottles + 5) / 6;\n          System.out.println(&quot;You need &quot; + crates + &quot; crates!&quot;);\n        }\n\n        System.out.println(&quot;Do you want to calculate again? (y/n)&quot;);\n        String choice = scanner.nextLine();\n        scanner.nextLine();\n\n        switch (choice) {\n        case &quot;y&quot;:\n          again = true;\n          break;\n        case &quot;n&quot;:\n          again = false;\n          break;\n        default:\n          System.out.println(&quot;Invalid choice. Lets try again.&quot;);\n          again = true;\n          break;\n        }\n      } else {\n        System.out.println(&quot;You need to tell us the amount of bottles you have in numbers.&quot;);\n        scanner.next();\n      }\n    }\n  }\n}\n</code></pre>\n<p>The problem I have is that whenever i enter &quot;y&quot; to calculate again, instead of running the &quot;y&quot; case, it runs the default one. I did research, even talked to ChatGPT but nothing works. Im thinking the problem here lies within scanner, but thats just me.</p>\n<p>Help would be much appreciated.</p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":29495283,"reputation":1,"user_id":22603505,"display_name":"Jo&#227;o Rodolpho"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695246200,"creation_date":1695246200,"answer_id":77146065,"question_id":75924030,"body_markdown":"had the same doubt, you just need to get this extension.\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wRqGd.png\r\n\r\nif you dont want to open the url the name of the extension is spring boot dashboard","title":"How do I enable hot reload in Java Spring Boot using VSCode?","body":"<p>had the same doubt, you just need to get this extension.\n<a href=\"https://i.stack.imgur.com/wRqGd.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>if you dont want to open the url the name of the extension is spring boot dashboard</p>\n"}],"owner":{"account_id":21481623,"reputation":1446,"user_id":15828895,"display_name":"plutownium"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":604,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1695246200,"creation_date":1680558763,"question_id":75924030,"body_markdown":"I am trying to hot reload, meaning auto-restart the server on code change, in Java using Spring Boot and VSCode.\r\n\r\nI expect the following steps to be enough:\r\n\r\n1. Update `pom.xml`:\r\n\r\n```\r\n\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\n\r\n[This post says its enough][1]\r\n\r\nI run again using `mvn spring-boot:run` and expect updating code to restart it\r\n\r\nMy actual result is that it stays the same as prior to the code change\r\n\r\nI also tried: [![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/46144346/hot-swapping-in-spring-boot-in-visual-studio-code\r\n  [2]: https://i.stack.imgur.com/EhfZ2.png","title":"How do I enable hot reload in Java Spring Boot using VSCode?","body":"<p>I am trying to hot reload, meaning auto-restart the server on code change, in Java using Spring Boot and VSCode.</p>\n<p>I expect the following steps to be enough:</p>\n<ol>\n<li>Update <code>pom.xml</code>:</li>\n</ol>\n<pre><code>    &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p><a href=\"https://stackoverflow.com/questions/46144346/hot-swapping-in-spring-boot-in-visual-studio-code\">This post says its enough</a></p>\n<p>I run again using <code>mvn spring-boot:run</code> and expect updating code to restart it</p>\n<p>My actual result is that it stays the same as prior to the code change</p>\n<p>I also tried: <a href=\"https://i.stack.imgur.com/EhfZ2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EhfZ2.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","tomcat","jvm","heap-memory","visualvm"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":1,"creation_date":1695246573,"post_id":77146057,"comment_id":136000594,"body_markdown":"If a GC causes the memory to go down, it&#39;s probably not an application issue. Try changing the GC settings (maybe so it is doing collections earlier or that you have a bigger region size for the young generation). My guess is that you just have a lot of objects in the old generation.","body":"If a GC causes the memory to go down, it&#39;s probably not an application issue. Try changing the GC settings (maybe so it is doing collections earlier or that you have a bigger region size for the young generation). My guess is that you just have a lot of objects in the old generation."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1695247507,"post_id":77146057,"comment_id":136000681,"body_markdown":"If the heap size gradually reaches 6G, and then falls without triggering a GC overhead limit exceeded exception, then I&#39;d say everything is okay. Do you have a symptom (e.g. some requests take much longer than expected) which makes you think something is wrong?","body":"If the heap size gradually reaches 6G, and then falls without triggering a GC overhead limit exceeded exception, then I&#39;d say everything is okay. Do you have a symptom (e.g. some requests take much longer than expected) which makes you think something is wrong?"},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1695248157,"post_id":77146057,"comment_id":136000768,"body_markdown":"jvm can do that automatically when [there&#39;s memory error](https://www.baeldung.com/java-heap-dump-capture#automatically)","body":"jvm can do that automatically when <a href=\"https://www.baeldung.com/java-heap-dump-capture#automatically\" rel=\"nofollow noreferrer\">there&#39;s memory error</a>"},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1695252519,"post_id":77146057,"comment_id":136001159,"body_markdown":"This sounds entirely, 100% normal for a JVM application.  It is normal for it to consume all the memory it is given access to, to perform a garbage collection when that threshold is reached, and for that number to go down.  If you want it to consume less memory, cap the heap size lower.","body":"This sounds entirely, 100% normal for a JVM application.  It is normal for it to consume all the memory it is given access to, to perform a garbage collection when that threshold is reached, and for that number to go down.  If you want it to consume less memory, cap the heap size lower."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1695266219,"post_id":77146057,"comment_id":136002299,"body_markdown":"According to https://stackoverflow.com/a/51448003/139985, you can use `jcmd` (without the `:live` option) to get a heap dump without running the GC first.  Try running `jcmd` in a shell on the remote machine if you can&#39;t figure out how to make VisualVM do it.","body":"According to <a href=\"https://stackoverflow.com/a/51448003/139985\">stackoverflow.com/a/51448003/139985</a>, you can use <code>jcmd</code> (without the <code>:live</code> option) to get a heap dump without running the GC first.  Try running <code>jcmd</code> in a shell on the remote machine if you can&#39;t figure out how to make VisualVM do it."}],"owner":{"account_id":21006817,"reputation":23,"user_id":15436415,"display_name":"DonBege"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695246074,"creation_date":1695246074,"question_id":77146057,"body_markdown":"I am using VisualVM to extract a Heap Dump from a tomcat that is consuming a lot of memory resources. It starts consuming around 1GB but gradually reaches 5-6GB. It has peaks where the CPU is at 100% and where the memory is close to 99%.\r\n\r\nI am trying to investigate this event by extracting heap dump, but every time I run a Heap Dump with the VisualVM software it runs a full Garbage Collection first which causes the heap memory to go from 5-6GB at the time of the request to around 1GB, and the heap dump extract that it extracts is 1GB, when I want it to extract the extract from the moment before the GC\r\n\r\nReading this thread https://stackoverflow.com/questions/1268336/how-can-i-take-a-heap-dump-on-java-5-without-garbage-collecting-first I have seen that I should use the value of &quot;live&quot; to false to prevent this from happening, but I can&#39;t find how to do it in VisualVM. I am connecting to the server using an SSH connection and tunneling, so the remote server does not have JDK installed.\r\n\r\nHow can I extract the entire heap dump remotely? Any advice to deal with this memory consumption? I am investigating the code in case there could be an error that causes consumption, but the fact that when a full GC is run the memory is restored to normal levels makes me suspicious.\r\n","title":"Execute heap dump in remote Java 8+ JVM without first executing a Garbage Collecting","body":"<p>I am using VisualVM to extract a Heap Dump from a tomcat that is consuming a lot of memory resources. It starts consuming around 1GB but gradually reaches 5-6GB. It has peaks where the CPU is at 100% and where the memory is close to 99%.</p>\n<p>I am trying to investigate this event by extracting heap dump, but every time I run a Heap Dump with the VisualVM software it runs a full Garbage Collection first which causes the heap memory to go from 5-6GB at the time of the request to around 1GB, and the heap dump extract that it extracts is 1GB, when I want it to extract the extract from the moment before the GC</p>\n<p>Reading this thread <a href=\"https://stackoverflow.com/questions/1268336/how-can-i-take-a-heap-dump-on-java-5-without-garbage-collecting-first\">How can I take a heap dump on Java 5 without garbage collecting first?</a> I have seen that I should use the value of &quot;live&quot; to false to prevent this from happening, but I can't find how to do it in VisualVM. I am connecting to the server using an SSH connection and tunneling, so the remote server does not have JDK installed.</p>\n<p>How can I extract the entire heap dump remotely? Any advice to deal with this memory consumption? I am investigating the code in case there could be an error that causes consumption, but the fact that when a full GC is run the memory is restored to normal levels makes me suspicious.</p>\n"},{"tags":["java","loops","filter","java-stream"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1694474923,"post_id":77085228,"comment_id":135893012,"body_markdown":"Strings should be compared with `equals`, not with `=`. Nothing is compared with `=`.","body":"Strings should be compared with <code>equals</code>, not with <code>=</code>. Nothing is compared with <code>=</code>."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":3,"creation_date":1694481835,"post_id":77085228,"comment_id":135893457,"body_markdown":"Why not use `HashMaps` instead of Lists? Then the lookups and removals are *O(1)* and the whole thing becomes linear.","body":"Why not use <code>HashMaps</code> instead of Lists? Then the lookups and removals are <i>O(1)</i> and the whole thing becomes linear."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1694525756,"post_id":77085228,"comment_id":135900289,"body_markdown":"`person.firstName = p.firstName` is an *assignment*; it changes the variable `person.firstName` to point to the same string as `p.firstName`. I leave as an exercise for you to find out what `Boolean.parseBoolean()` is really for and why it isnt appropriate here. As a general advice: dont insert code into your program whose purpose you dont understand.","body":"<code>person.firstName = p.firstName</code> is an <i>assignment</i>; it changes the variable <code>person.firstName</code> to point to the same string as <code>p.firstName</code>. I leave as an exercise for you to find out what <code>Boolean.parseBoolean()</code> is really for and why it isnt appropriate here. As a general advice: dont insert code into your program whose purpose you dont understand."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1694600701,"post_id":77085228,"comment_id":135911646,"body_markdown":"Step 1: count the occurrences of names in the second list (into a mutable map): `Map&lt;String,Integer&gt; counts = people2.stream() .collect(Collectors.toMap(Person::getFirstName, p -&gt; 1, Integer::sum, HashMap::new));` Step 2: remove each person from the first list if their count is still not negative after decrementing: `people1.removeIf(p -&gt; counts.merge(p.getFirstName(), -1, Integer::sum) &gt;= 0);` Thats it. This example assumes that you have a method like `public String getFirstName() { return firstName; }` in your `Person` class as the `firstName` field is `private`.","body":"Step 1: count the occurrences of names in the second list (into a mutable map): <code>Map&lt;String,Integer&gt; counts = people2.stream() .collect(Collectors.toMap(Person::getFirstName, p -&gt; 1, Integer::sum, HashMap::new));</code> Step 2: remove each person from the first list if their count is still not negative after decrementing: <code>people1.removeIf(p -&gt; counts.merge(p.getFirstName(), -1, Integer::sum) &gt;= 0);</code> Thats it. This example assumes that you have a method like <code>public String getFirstName() { return firstName; }</code> in your <code>Person</code> class as the <code>firstName</code> field is <code>private</code>."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1694601061,"post_id":77085228,"comment_id":135911720,"body_markdown":"https://ideone.com/QmqCpE","body":"<a href=\"https://ideone.com/QmqCpE\" rel=\"nofollow noreferrer\">ideone.com/QmqCpE</a>"}],"answers":[{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695245863,"creation_date":1694475728,"answer_id":77085325,"question_id":77085228,"body_markdown":"The main efficiency problem you have is 2 nested loops, resulting in O(n&lt;sup&gt;2&lt;/sup&gt;) [time complexity][1].\r\n\r\nHowever, you can do it O(n) time complexity by using a more efficient way to find the matching person from `people1` to remove.\r\n\r\n```\r\nMap&lt;String, Deque&lt;Person&gt;&gt; map = people1.stream().collect(groupingBy(Person::getFirstName, toCollection(ArrayDeque::new)));\r\n\r\nfor (Person p : people2) {\r\n    Optional.ofNullable(map.get(p.getFirstName()))\r\n      .filter(list -&gt; !list.isEmpty())\r\n      .ifPresent(Deque::remove);\r\n}\r\n\r\npeople1 = map.values().stream().flatMap(Deque::stream).toList();\r\n```\r\n\r\nThis creates a map (actually as `HashMap`, which has constant time efficiency) to find the list of people with the same first name. The lists are `LinkedList`, which has O(1) time complexity for removing the first element.\r\n\r\nThen, for each person in list 2, the list of people with the same first name is retrieved from the map and if it exists and is not empty, the first person is removed from it.\r\n\r\nAt the end of the loop, list 1 is constructed from whatever people remain in the map.\r\n\r\nThis algorithm scales linearly (both time and space).\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Time_complexity","title":"Return the difference between two lists by comparing key values, and not the entire objects in Java","body":"<p>The main efficiency problem you have is 2 nested loops, resulting in O(n<sup>2</sup>) <a href=\"https://en.wikipedia.org/wiki/Time_complexity\" rel=\"nofollow noreferrer\">time complexity</a>.</p>\n<p>However, you can do it O(n) time complexity by using a more efficient way to find the matching person from <code>people1</code> to remove.</p>\n<pre><code>Map&lt;String, Deque&lt;Person&gt;&gt; map = people1.stream().collect(groupingBy(Person::getFirstName, toCollection(ArrayDeque::new)));\n\nfor (Person p : people2) {\n    Optional.ofNullable(map.get(p.getFirstName()))\n      .filter(list -&gt; !list.isEmpty())\n      .ifPresent(Deque::remove);\n}\n\npeople1 = map.values().stream().flatMap(Deque::stream).toList();\n</code></pre>\n<p>This creates a map (actually as <code>HashMap</code>, which has constant time efficiency) to find the list of people with the same first name. The lists are <code>LinkedList</code>, which has O(1) time complexity for removing the first element.</p>\n<p>Then, for each person in list 2, the list of people with the same first name is retrieved from the map and if it exists and is not empty, the first person is removed from it.</p>\n<p>At the end of the loop, list 1 is constructed from whatever people remain in the map.</p>\n<p>This algorithm scales linearly (both time and space).</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1694550450,"creation_date":1694482545,"answer_id":77085618,"question_id":77085228,"body_markdown":"&gt; _&quot;... I want to iterate through the `people2` list, and if a person with the same name exists in the `people1` list, then find the first match and remove it (only caring about name, not age). ...&quot;_\r\n\r\nUse an _[Iterator](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Iterator.html)_ to traverse each list.\r\n\r\n```java\r\nIterator&lt;Person&gt; x = people1.iterator();\r\nIterator&lt;Person&gt; y = people2.iterator();\r\nString s;\r\nwhile (x.hasNext()) {\r\n    s = x.next().getFirstName();\r\n    while (y.hasNext()) {\r\n        if (y.next().getFirstName().equals(s)) {\r\n            x.remove();\r\n            y.remove();\r\n            break;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nOr, if you&#39;re utilizing _Stream#filter_, use a _while-loop_ for the _people2_ list, so you can remove the value.\r\n\r\n```java\r\npeople1 =\r\n    people1.stream().filter(x -&gt; {\r\n        Iterator&lt;Person&gt; i = people2.iterator();\r\n        String s = x.getFirstName();\r\n        while (i.hasNext()) {\r\n            if (i.next().getFirstName().equals(s)) {\r\n                i.remove();\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }).toList();\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n[John 61, John 13]\r\n```","title":"Return the difference between two lists by comparing key values, and not the entire objects in Java","body":"<blockquote>\n<p><em>&quot;... I want to iterate through the <code>people2</code> list, and if a person with the same name exists in the <code>people1</code> list, then find the first match and remove it (only caring about name, not age). ...&quot;</em></p>\n</blockquote>\n<p>Use an <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Iterator.html\" rel=\"nofollow noreferrer\">Iterator</a></em> to traverse each list.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Iterator&lt;Person&gt; x = people1.iterator();\nIterator&lt;Person&gt; y = people2.iterator();\nString s;\nwhile (x.hasNext()) {\n    s = x.next().getFirstName();\n    while (y.hasNext()) {\n        if (y.next().getFirstName().equals(s)) {\n            x.remove();\n            y.remove();\n            break;\n        }\n    }\n}\n</code></pre>\n<p>Or, if you're utilizing <em>Stream#filter</em>, use a <em>while-loop</em> for the <em>people2</em> list, so you can remove the value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>people1 =\n    people1.stream().filter(x -&gt; {\n        Iterator&lt;Person&gt; i = people2.iterator();\n        String s = x.getFirstName();\n        while (i.hasNext()) {\n            if (i.next().getFirstName().equals(s)) {\n                i.remove();\n                return false;\n            }\n        }\n        return true;\n    }).toList();\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>[John 61, John 13]\n</code></pre>\n"}],"owner":{"account_id":27863021,"reputation":49,"user_id":21275121,"display_name":"Sherbet Head"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1695245863,"creation_date":1694473782,"question_id":77085228,"body_markdown":"I have two lists from the same class (e.g. a Person class with a name and age property), and I am trying to come up with an efficient way to remove elements from List A, if they appear in List B, but only if the name property matches (ignoring age). I don&#39;t want to remove ALL values that have a matching name from List B, but rather remove one value from List A for every matching name in List B.\r\n\r\nHere&#39;s an example: \r\n\r\n```\r\npublic class Person {\r\n    private String firstName;\r\n    private Integer age;\r\n\r\n    public Person(String firstName, Integer age) {\r\n        this.firstName = firstName;\r\n        this.age = age;\r\n    }\r\n}\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n\r\n        Person p1 = new Person(&quot;John&quot;, 25);\r\n        Person p2 = new Person(&quot;Lisa&quot;, 54);\r\n        Person p3 = new Person(&quot;Mike&quot;, 61);\r\n        Person p4 = new Person(&quot;John&quot;, 61);\r\n        Person p5 = new Person(&quot;John&quot;, 13);\r\n        List&lt;Person&gt; people1 = new ArrayList&lt;Person&gt;();\r\n        people1.add(p1);\r\n        people1.add(p2);\r\n        people1.add(p3);\r\n        people1.add(p4);\r\n        people1.add(p5);\r\n\r\n        Person p6 = new Person(&quot;John&quot;, 88);\r\n        Person p7 = new Person(&quot;Lisa&quot;, 66);\r\n        Person p8 = new Person(&quot;Mike&quot;, 71);\r\n        List&lt;Person&gt; people2 = new ArrayList&lt;Person&gt;();\r\n        people2.add(p6);\r\n        people2.add(p7);\r\n        people2.add(p8);\r\n\r\n\r\n        for (Person p : people2) {\r\n            people1.stream()\r\n                .filter(person -&gt; Boolean.parseBoolean(person.firstName = p.firstName))\r\n                .findFirst()\r\n                .ifPresent(person -&gt; people1.remove(person));\r\n        } // This is what i&#39;ve tried, but it doesn&#39;t work and seems very inefficient\r\n\r\n        System.out.println(people1);\r\n    }\r\n```\r\nBasically, I want to iterate through the `people2` list, and if a person with the same name exists in the `people1` list, then find the first match and remove it (only caring about name, not age).\r\n\r\nDesired Result: A list containing \r\n\r\n - John, 61\r\n - John, 13","title":"Return the difference between two lists by comparing key values, and not the entire objects in Java","body":"<p>I have two lists from the same class (e.g. a Person class with a name and age property), and I am trying to come up with an efficient way to remove elements from List A, if they appear in List B, but only if the name property matches (ignoring age). I don't want to remove ALL values that have a matching name from List B, but rather remove one value from List A for every matching name in List B.</p>\n<p>Here's an example:</p>\n<pre><code>public class Person {\n    private String firstName;\n    private Integer age;\n\n    public Person(String firstName, Integer age) {\n        this.firstName = firstName;\n        this.age = age;\n    }\n}\n\npublic class Main {\n    public static void main(String[] args) {\n\n        Person p1 = new Person(&quot;John&quot;, 25);\n        Person p2 = new Person(&quot;Lisa&quot;, 54);\n        Person p3 = new Person(&quot;Mike&quot;, 61);\n        Person p4 = new Person(&quot;John&quot;, 61);\n        Person p5 = new Person(&quot;John&quot;, 13);\n        List&lt;Person&gt; people1 = new ArrayList&lt;Person&gt;();\n        people1.add(p1);\n        people1.add(p2);\n        people1.add(p3);\n        people1.add(p4);\n        people1.add(p5);\n\n        Person p6 = new Person(&quot;John&quot;, 88);\n        Person p7 = new Person(&quot;Lisa&quot;, 66);\n        Person p8 = new Person(&quot;Mike&quot;, 71);\n        List&lt;Person&gt; people2 = new ArrayList&lt;Person&gt;();\n        people2.add(p6);\n        people2.add(p7);\n        people2.add(p8);\n\n\n        for (Person p : people2) {\n            people1.stream()\n                .filter(person -&gt; Boolean.parseBoolean(person.firstName = p.firstName))\n                .findFirst()\n                .ifPresent(person -&gt; people1.remove(person));\n        } // This is what i've tried, but it doesn't work and seems very inefficient\n\n        System.out.println(people1);\n    }\n</code></pre>\n<p>Basically, I want to iterate through the <code>people2</code> list, and if a person with the same name exists in the <code>people1</code> list, then find the first match and remove it (only caring about name, not age).</p>\n<p>Desired Result: A list containing</p>\n<ul>\n<li>John, 61</li>\n<li>John, 13</li>\n</ul>\n"},{"tags":["java","regex","switch-statement"],"comments":[{"owner":{"account_id":238570,"reputation":8889,"user_id":507546,"accept_rate":88,"display_name":"gigadot"},"score":2,"creation_date":1320972297,"post_id":8088370,"comment_id":9914355,"body_markdown":"Is this something new in Java 7? switch with regex. There is no such a thing in Java 6 or under.","body":"Is this something new in Java 7? switch with regex. There is no such a thing in Java 6 or under."},{"owner":{"account_id":378721,"reputation":47508,"user_id":731620,"accept_rate":80,"display_name":"ratchet freak"},"score":1,"creation_date":1320972403,"post_id":8088370,"comment_id":9914369,"body_markdown":"there is even no string switch in 6 and below (only integrals and enums)","body":"there is even no string switch in 6 and below (only integrals and enums)"},{"owner":{"account_id":1007278,"reputation":669,"user_id":1020678,"accept_rate":21,"display_name":"jollyroger"},"score":0,"creation_date":1320972441,"post_id":8088370,"comment_id":9914373,"body_markdown":"Yes - I suspected that this was breaking the rules of switch. So over to good &#39;ol if/else if-statements then?","body":"Yes - I suspected that this was breaking the rules of switch. So over to good &#39;ol if/else if-statements then?"},{"owner":{"account_id":1007278,"reputation":669,"user_id":1020678,"accept_rate":21,"display_name":"jollyroger"},"score":0,"creation_date":1320972559,"post_id":8088370,"comment_id":9914394,"body_markdown":"Man, I love this website! Thanks.","body":"Man, I love this website! Thanks."}],"answers":[{"tags":[],"owner":{"account_id":124364,"reputation":85329,"user_id":319403,"accept_rate":75,"display_name":"cHao"},"down_vote_count":1,"up_vote_count":46,"is_accepted":true,"score":45,"last_activity_date":1320973241,"creation_date":1320972594,"answer_id":8088417,"question_id":8088370,"body_markdown":"You can&#39;t use a regex as a switch case.  (Think about it: how would Java know whether you wanted to match the string `&quot;[A-Z]{1}[a-z]{2}\\\\d{1,}&quot;` or the regex?)\r\n\r\nWhat you could do, in this case, is try to match the regex in your default case.\r\n\r\n        switch (s) {\r\n            case &quot;m&quot;: print(); continue;\r\n            case &quot;s&quot;: stat(); break;\r\n            case &quot;q&quot;: return;\r\n            default:\r\n                if (s.matches(&quot;[A-Z]{1}[a-z]{2}\\\\d{1,}&quot;)) {\r\n                    filminfo( s );\r\n                }\r\n                break;\r\n        }\r\n\r\n(BTW, this will only work with Java 7 and later.  There&#39;s no switching on strings prior to that.)","title":"Using regex for switch-statement in Java","body":"<p>You can't use a regex as a switch case.  (Think about it: how would Java know whether you wanted to match the string <code>\"[A-Z]{1}[a-z]{2}\\\\d{1,}\"</code> or the regex?)</p>\n\n<p>What you could do, in this case, is try to match the regex in your default case.</p>\n\n<pre><code>    switch (s) {\n        case \"m\": print(); continue;\n        case \"s\": stat(); break;\n        case \"q\": return;\n        default:\n            if (s.matches(\"[A-Z]{1}[a-z]{2}\\\\d{1,}\")) {\n                filminfo( s );\n            }\n            break;\n    }\n</code></pre>\n\n<p>(BTW, this will only work with Java 7 and later.  There's no switching on strings prior to that.)</p>\n"},{"tags":[],"owner":{"account_id":450337,"reputation":3828,"user_id":845607,"accept_rate":80,"display_name":"n0rmzzz"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1320972929,"creation_date":1320972929,"answer_id":8088449,"question_id":8088370,"body_markdown":"I don&#39;t think you can use regex in switch cases.\r\n\r\n&gt; The String in the switch expression is compared with the expressions\r\n&gt; associated with each case label as if the String.equals method were\r\n&gt; being used.\r\n\r\nSee [http://download.oracle.com/javase/7/docs/technotes/guides/language/strings-switch.html][1] for more info.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/7/docs/technotes/guides/language/strings-switch.html","title":"Using regex for switch-statement in Java","body":"<p>I don't think you can use regex in switch cases.</p>\n\n<blockquote>\n  <p>The String in the switch expression is compared with the expressions\n  associated with each case label as if the String.equals method were\n  being used.</p>\n</blockquote>\n\n<p>See <a href=\"http://download.oracle.com/javase/7/docs/technotes/guides/language/strings-switch.html\" rel=\"noreferrer\">http://download.oracle.com/javase/7/docs/technotes/guides/language/strings-switch.html</a> for more info.</p>\n"},{"tags":[],"owner":{"account_id":2969956,"reputation":486,"user_id":2522234,"display_name":"RMSD"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695245801,"creation_date":1695244267,"answer_id":77145946,"question_id":8088370,"body_markdown":"Finally after over 10 years, in Java 21; you should be able to do this with pattern matching for switches:\r\n\r\nhttps://openjdk.org/jeps/441\r\n\r\nThe example code should reduce to:\r\n\r\n```java\r\nvoid menu() {\r\n    print();\r\n    Scanner input = new Scanner( System.in );\r\n    var pattern = Pattern.compile(&quot;[A-Z]{1}[a-z]{2}\\\\d{1,}&quot;);\r\n    while(true) {\r\n        String inputString = input.next();\r\n        switch (inputString) {\r\n           case &quot;m&quot; -&gt; {\r\n              print();\r\n              stat();\r\n           }\r\n           case &quot;s&quot; -&gt; stat();\r\n           case &quot;Jur1&quot; -&gt; filminfo(inputString); //For debugging - this worked fine\r\n           case &quot;q&quot; -&gt; return;\r\n           case String s when pattern.matcher(s).matches() -&gt; filminfo(s);\r\n           default -&gt; {}\r\n        }\r\n    }\r\n}\r\n```","title":"Using regex for switch-statement in Java","body":"<p>Finally after over 10 years, in Java 21; you should be able to do this with pattern matching for switches:</p>\n<p><a href=\"https://openjdk.org/jeps/441\" rel=\"nofollow noreferrer\">https://openjdk.org/jeps/441</a></p>\n<p>The example code should reduce to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>void menu() {\n    print();\n    Scanner input = new Scanner( System.in );\n    var pattern = Pattern.compile(&quot;[A-Z]{1}[a-z]{2}\\\\d{1,}&quot;);\n    while(true) {\n        String inputString = input.next();\n        switch (inputString) {\n           case &quot;m&quot; -&gt; {\n              print();\n              stat();\n           }\n           case &quot;s&quot; -&gt; stat();\n           case &quot;Jur1&quot; -&gt; filminfo(inputString); //For debugging - this worked fine\n           case &quot;q&quot; -&gt; return;\n           case String s when pattern.matcher(s).matches() -&gt; filminfo(s);\n           default -&gt; {}\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1007278,"reputation":669,"user_id":1020678,"accept_rate":21,"display_name":"jollyroger"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38908,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"accepted_answer_id":8088417,"answer_count":3,"score":24,"last_activity_date":1695245801,"creation_date":1320972109,"question_id":8088370,"body_markdown":"\r\n    void menu() {\r\n\t    print();\r\n\t    Scanner input = new Scanner( System.in );\r\n\t    while(true) {\r\n\t        String s = input.next();\r\n\t        switch (s) {\r\n\t\t    case &quot;m&quot;: print(); continue;\r\n\t\t    case &quot;s&quot;: stat(); break;\r\n\t\t    case &quot;[A-Z]{1}[a-z]{2}\\\\d{1,}&quot;: filminfo( s ); break;\r\n\t\t    case &quot;Jur1&quot;: filminfo(s); break; //For debugging - this worked fine\r\n\t\t    case &quot;q&quot;: ; return;\r\n\t        }\r\n\t    }\r\n    }\r\n\r\n  \r\nIt seems like either my regex is off or that I am not using it right in the case-statement. What I want is a string that: Begins with exactly one uppercase letter and is followed by exactly two lowercase letters, which are followed by at least one digit.  \r\n  \r\nI&#39;ve checked out the regex API and tried the three variants (greedy, reluctant and possessive quantifiers) without knowing their proper use. Also checked the methods for String without finding a method that seemed pertinent to my needs.","title":"Using regex for switch-statement in Java","body":"<pre><code>void menu() {\n    print();\n    Scanner input = new Scanner( System.in );\n    while(true) {\n        String s = input.next();\n        switch (s) {\n        case \"m\": print(); continue;\n        case \"s\": stat(); break;\n        case \"[A-Z]{1}[a-z]{2}\\\\d{1,}\": filminfo( s ); break;\n        case \"Jur1\": filminfo(s); break; //For debugging - this worked fine\n        case \"q\": ; return;\n        }\n    }\n}\n</code></pre>\n\n<p>It seems like either my regex is off or that I am not using it right in the case-statement. What I want is a string that: Begins with exactly one uppercase letter and is followed by exactly two lowercase letters, which are followed by at least one digit.  </p>\n\n<p>I've checked out the regex API and tried the three variants (greedy, reluctant and possessive quantifiers) without knowing their proper use. Also checked the methods for String without finding a method that seemed pertinent to my needs.</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":3,"creation_date":1384550562,"post_id":20010809,"comment_id":29796298,"body_markdown":"Why would you want this?","body":"Why would you want this?"},{"owner":{"account_id":18250,"reputation":39302,"user_id":41655,"accept_rate":76,"display_name":"millimoose"},"score":2,"creation_date":1384550622,"post_id":20010809,"comment_id":29796322,"body_markdown":"`Map&lt;String,String&gt;.class` can&#39;t exist. A `Type` that describes that signature can though, and you can use a [super type token](http://gafter.blogspot.sk/2006/12/super-type-tokens.html) to get that type, but `Type`s don&#39;t have the reflection capabilities of a `Class`.","body":"<code>Map&lt;String,String&gt;.class</code> can&#39;t exist. A <code>Type</code> that describes that signature can though, and you can use a <a href=\"http://gafter.blogspot.sk/2006/12/super-type-tokens.html\" rel=\"nofollow noreferrer\">super type token</a> to get that type, but <code>Type</code>s don&#39;t have the reflection capabilities of a <code>Class</code>."},{"owner":{"display_name":"user2173738"},"score":0,"creation_date":1384550869,"post_id":20010809,"comment_id":29796442,"body_markdown":"How make it work or how make it joke?","body":"How make it work or how make it joke?"},{"owner":{"account_id":26938,"reputation":4932,"user_id":70551,"accept_rate":68,"display_name":"Surya"},"score":0,"creation_date":1384551070,"post_id":20010809,"comment_id":29796533,"body_markdown":"@LuiggiMendoza&#160;updated my question with use case.","body":"@LuiggiMendoza updated my question with use case."},{"owner":{"account_id":26938,"reputation":4932,"user_id":70551,"accept_rate":68,"display_name":"Surya"},"score":0,"creation_date":1384551497,"post_id":20010809,"comment_id":29796727,"body_markdown":"@nikpon what joke? I dont get what your comment means,","body":"@nikpon what joke? I dont get what your comment means,"},{"owner":{"account_id":308584,"reputation":5209,"user_id":620554,"accept_rate":40,"display_name":"Judge Mental"},"score":0,"creation_date":1384553640,"post_id":20010809,"comment_id":29797628,"body_markdown":"Have you added the class parameter to `getSectionConfig` merely because you want to indicate the return type to the compiler?\n\nDo you realize that there will be casting somewhere, probably in the implementation of `getSectionConfig` or its dependencies, because you can&#39;t implement a dynamically-typed map in static fashion?","body":"Have you added the class parameter to <code>getSectionConfig</code> merely because you want to indicate the return type to the compiler?  Do you realize that there will be casting somewhere, probably in the implementation of <code>getSectionConfig</code> or its dependencies, because you can&#39;t implement a dynamically-typed map in static fashion?"},{"owner":{"account_id":26938,"reputation":4932,"user_id":70551,"accept_rate":68,"display_name":"Surya"},"score":1,"creation_date":1384624622,"post_id":20010809,"comment_id":29814493,"body_markdown":"@JudgeMental  Yes but I want to limit casting to just one place. Not all over my code.","body":"@JudgeMental  Yes but I want to limit casting to just one place. Not all over my code."}],"answers":[{"tags":[],"owner":{"account_id":1888343,"reputation":176597,"user_id":1707091,"display_name":"rgettman"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1384550738,"creation_date":1384550738,"answer_id":20010871,"question_id":20010809,"body_markdown":"According to the [JLS, Section 15.8.2][1], you can&#39;t do that, because:\r\n\r\n&gt; The type of C.class, where C is the name of a class, interface, or array type (&#167;4.3), is Class&amp;lt;C&amp;gt;.\r\n\r\nThe closest you can come is\r\n\r\n    Class&lt;Map&gt; food = Map.class;\r\n\r\n[1]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.2","title":"java generics: getting class of a class with generic parameters","body":"<p>According to the <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.2\" rel=\"nofollow\">JLS, Section 15.8.2</a>, you can't do that, because:</p>\n\n<blockquote>\n  <p>The type of C.class, where C is the name of a class, interface, or array type (4.3), is Class&lt;C&gt;.</p>\n</blockquote>\n\n<p>The closest you can come is</p>\n\n<pre><code>Class&lt;Map&gt; food = Map.class;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2478127,"reputation":19514,"user_id":2158288,"display_name":"ZhongYu"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1384553116,"creation_date":1384553116,"answer_id":20011452,"question_id":20010809,"body_markdown":"Do a brute cast\r\n\r\n        Class&lt;Map&lt;String,String&gt;&gt; clazz = \r\n                 (Class&lt;Map&lt;String,String&gt;&gt;)(Class)Map.class;\r\n\r\nthis is not theoretically correct, but it is not our fault. We need such hacks some times.","title":"java generics: getting class of a class with generic parameters","body":"<p>Do a brute cast</p>\n\n<pre><code>    Class&lt;Map&lt;String,String&gt;&gt; clazz = \n             (Class&lt;Map&lt;String,String&gt;&gt;)(Class)Map.class;\n</code></pre>\n\n<p>this is not theoretically correct, but it is not our fault. We need such hacks some times.</p>\n"},{"tags":[],"owner":{"account_id":17951171,"reputation":9,"user_id":13044257,"display_name":"Andrei Hryshanovich"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695245334,"creation_date":1695245334,"answer_id":77146020,"question_id":20010809,"body_markdown":"Not sure but may be ParameterizedTypeReference class can help you?\r\n\r\n    private static final ParameterizedTypeReference&lt;Map&lt;String, Object&gt;&gt; YOUR_TYPE_NAME = new ParameterizedTypeReference&lt;Map&lt;String, Object&gt;&gt;() {};","title":"java generics: getting class of a class with generic parameters","body":"<p>Not sure but may be ParameterizedTypeReference class can help you?</p>\n<pre><code>private static final ParameterizedTypeReference&lt;Map&lt;String, Object&gt;&gt; YOUR_TYPE_NAME = new ParameterizedTypeReference&lt;Map&lt;String, Object&gt;&gt;() {};\n</code></pre>\n"}],"owner":{"account_id":26938,"reputation":4932,"user_id":70551,"accept_rate":68,"display_name":"Surya"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13141,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"answer_count":3,"score":19,"last_activity_date":1695245334,"creation_date":1384550464,"question_id":20010809,"body_markdown":"I am curious how to make this work \r\n\r\n     Class&lt;Map&lt;String,String&gt;&gt; food = Map.class;\r\n\r\nThat obviously doesn&#39;t work. I would want something like this \r\n\r\n     Class&lt;Map&lt;String,String&gt;&gt; food = Map&lt;String,String&gt;.class;\r\n\r\nbut this seems like not a valid java sytax.\r\n\r\nHow can make this work? \r\n\r\n**EDIT**: \r\nThe reason I want this is because I have a method like this\r\n \r\n\r\n       protected &lt;ConfigType&gt; ConfigValue&lt;ConfigType&gt; getSectionConfig(String name, Class&lt;ConfigType&gt; configType) {\r\n    \t\treturn config.getConfig(name);\r\n    \t}\r\n\r\nI would like to call this as so \r\n\r\n\r\n\r\n    ConfigValue&lt;Map&lt;String,Object&gt;&gt; config = getSectionConfig(&quot;blah&quot;, Map&lt;String,Object&gt;.class&gt;);\r\n    Map&lt;String,Value&gt; val = config.value();\r\n\r\n","title":"java generics: getting class of a class with generic parameters","body":"<p>I am curious how to make this work </p>\n\n<pre><code> Class&lt;Map&lt;String,String&gt;&gt; food = Map.class;\n</code></pre>\n\n<p>That obviously doesn't work. I would want something like this </p>\n\n<pre><code> Class&lt;Map&lt;String,String&gt;&gt; food = Map&lt;String,String&gt;.class;\n</code></pre>\n\n<p>but this seems like not a valid java sytax.</p>\n\n<p>How can make this work? </p>\n\n<p><strong>EDIT</strong>: \nThe reason I want this is because I have a method like this</p>\n\n<pre><code>   protected &lt;ConfigType&gt; ConfigValue&lt;ConfigType&gt; getSectionConfig(String name, Class&lt;ConfigType&gt; configType) {\n        return config.getConfig(name);\n    }\n</code></pre>\n\n<p>I would like to call this as so </p>\n\n<pre><code>ConfigValue&lt;Map&lt;String,Object&gt;&gt; config = getSectionConfig(\"blah\", Map&lt;String,Object&gt;.class&gt;);\nMap&lt;String,Value&gt; val = config.value();\n</code></pre>\n"},{"tags":["java","html","junit","jsoup"],"answers":[{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695244656,"creation_date":1695244656,"answer_id":77145972,"question_id":77145688,"body_markdown":"Use `wholeText` instead of `text`\r\n\r\n    String sp1 = testDoc.getElementById(&quot;sp1&quot;).wholeText();\r\n    assertThat(sp1).isEqualTo(&quot;ABC  123&quot;);\r\n\r\nSide note: For your simple sample html it may make no difference but your select is not correct. Instead of \r\n\r\n    String sp1 = testDoc.select(&quot;span#sp1&quot;).text();\r\n\r\nuse `selectFirst` or `getElementById` since you want to get an `Element`. Select returns `Elements` (i.e a list of elements). So something like \r\n\r\n    String sp1 = testDoc.selectFirst(&quot;span#sp1&quot;).wholeText();\r\n    String sp1 = testDoc.getElementById(&quot;sp1&quot;).wholeText();\r\n","title":"Disable JSoup whitespace removal","body":"<p>Use <code>wholeText</code> instead of <code>text</code></p>\n<pre><code>String sp1 = testDoc.getElementById(&quot;sp1&quot;).wholeText();\nassertThat(sp1).isEqualTo(&quot;ABC  123&quot;);\n</code></pre>\n<p>Side note: For your simple sample html it may make no difference but your select is not correct. Instead of</p>\n<pre><code>String sp1 = testDoc.select(&quot;span#sp1&quot;).text();\n</code></pre>\n<p>use <code>selectFirst</code> or <code>getElementById</code> since you want to get an <code>Element</code>. Select returns <code>Elements</code> (i.e a list of elements). So something like</p>\n<pre><code>String sp1 = testDoc.selectFirst(&quot;span#sp1&quot;).wholeText();\nString sp1 = testDoc.getElementById(&quot;sp1&quot;).wholeText();\n</code></pre>\n"}],"owner":{"account_id":2090213,"reputation":1431,"user_id":1860222,"accept_rate":52,"display_name":"pbuchheit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77145972,"answer_count":1,"score":0,"last_activity_date":1695244656,"creation_date":1695240939,"question_id":77145688,"body_markdown":"I&#39;m working on a project where I need to test some html output. To do this, I am using JSoup to extract the elements I want to test against and running assertions on the output. The problem I&#39;m running into is that JSoup &#39;cleans&#39; the output before returning it, so my outputs do not match my inputs, even if the original html was correct. All the suggestions I have run across suggest disabling pretty print via the output settings. Unfortunately, so far that solution has not worked. I&#39;m not sure whether I am simply not disabling the output formatting correctly or if there is something else going on. Any suggestions would be appreciated.\r\n\r\n\r\n    @Test\r\n    public void testJsoupParse()\r\n    {\r\n        Document testDoc = Jsoup.parse(&quot;&lt;html&gt; &lt;span id=&#39;sp1&#39;&gt;&lt;strong&gt;ABC  123&lt;/strong&gt;&lt;/span&gt; &lt;span id=&#39;sp2&#39;&gt;XYZ 098&lt;/span&gt; &lt;/html&gt;&quot;);\r\n        testDoc.outputSettings().prettyPrint(false);\r\n    \r\n        String sp1 = testDoc.select(&quot;span#sp1&quot;).text();\r\n        System.out.println(sp1);\r\n        String spHtml = testDoc.select(&quot;span#sp1&quot;).html();\r\n        System.out.println(spHtml);\r\n        //this should pass, but fails due to the extra space being stripped out\r\n        assertThat(sp1).isEqualTo(&quot;ABC  123&quot;);\r\n        //this will also fail since .html() will include the &lt;strong&gt; tags in the output\r\n        assertThat(spHtml).isEqualTo(&quot;ABC  123&quot;);\r\n        //this will pass\r\n        assertThat(testDoc.select(&quot;span#sp2&quot;).text()).isEqualTo(&quot;XYZ 098&quot;);\r\n    }","title":"Disable JSoup whitespace removal","body":"<p>I'm working on a project where I need to test some html output. To do this, I am using JSoup to extract the elements I want to test against and running assertions on the output. The problem I'm running into is that JSoup 'cleans' the output before returning it, so my outputs do not match my inputs, even if the original html was correct. All the suggestions I have run across suggest disabling pretty print via the output settings. Unfortunately, so far that solution has not worked. I'm not sure whether I am simply not disabling the output formatting correctly or if there is something else going on. Any suggestions would be appreciated.</p>\n<pre><code>@Test\npublic void testJsoupParse()\n{\n    Document testDoc = Jsoup.parse(&quot;&lt;html&gt; &lt;span id='sp1'&gt;&lt;strong&gt;ABC  123&lt;/strong&gt;&lt;/span&gt; &lt;span id='sp2'&gt;XYZ 098&lt;/span&gt; &lt;/html&gt;&quot;);\n    testDoc.outputSettings().prettyPrint(false);\n\n    String sp1 = testDoc.select(&quot;span#sp1&quot;).text();\n    System.out.println(sp1);\n    String spHtml = testDoc.select(&quot;span#sp1&quot;).html();\n    System.out.println(spHtml);\n    //this should pass, but fails due to the extra space being stripped out\n    assertThat(sp1).isEqualTo(&quot;ABC  123&quot;);\n    //this will also fail since .html() will include the &lt;strong&gt; tags in the output\n    assertThat(spHtml).isEqualTo(&quot;ABC  123&quot;);\n    //this will pass\n    assertThat(testDoc.select(&quot;span#sp2&quot;).text()).isEqualTo(&quot;XYZ 098&quot;);\n}\n</code></pre>\n"},{"tags":["java","saxon"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1535911615,"post_id":52138213,"comment_id":91229114,"body_markdown":"You need to escape the quotes within the string","body":"You need to escape the quotes within the string"},{"owner":{"account_id":2493093,"reputation":26492,"user_id":2170192,"accept_rate":100,"display_name":"Alex Shesterov"},"score":0,"creation_date":1535911820,"post_id":52138213,"comment_id":91229159,"body_markdown":"Possible duplicate of [How to enter quotes in a Java string?](https://stackoverflow.com/questions/3559063/how-to-enter-quotes-in-a-java-string)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/3559063/how-to-enter-quotes-in-a-java-string\">How to enter quotes in a Java string?</a>"}],"answers":[{"tags":[],"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1535961564,"creation_date":1535961564,"answer_id":52145487,"question_id":52138213,"body_markdown":"Firstly, I&#39;m puzzled by your Java snippet because it won&#39;t compile (because of the nested quotes), so I don&#39;t see how you get as far as Saxon reporting an XQuery syntax error. Also I imagine that the &#39;/n&#39; should really be &#39;\\n&#39;. So let&#39;s suppose the Java actually says:\r\n\r\n    comp.compile(&quot;return \\n&quot;+\r\n        &quot;if ( funcJavaDict:CheckString(&#39;em andamento&#39;,&#39;EM Andamento&#39;) ) then \\n&quot; +\r\n        &quot;  String(&#39;s&#227;o iguais&#39;) \\n&quot;\r\n        &quot;else  \\n&quot;+\r\n       &quot;  String(&#39;s&#227;o diferente&#39;) &quot;);\r\n\r\nXQuery keywords are recognized only if they appear in the right context. &quot;return&quot; at the start of an expression is not recognized as a keyword, so it is interpreted as a path expression meaning `child::element(return)`. \r\n\r\n(In fact recent Saxon releases will often report a warning if you use a keyword incorrectly like this, but it&#39;s not catching this particular case).\r\n\r\nSo &quot;return&quot; is a complete expression that selects child elements named `return`, and the only thing that can come after a complete expression is either the end of the input, or an infix operator such as `and` or `union`. The keyword `if` is not either of these things, so the compiler reports a syntax error. The solution is to remove the `return` keyword.\r\n\r\nBut that&#39;s not the only thing wrong with your query. There is no function named `String`. You could change it to `string` and the query would work, but writing `string(&#39;xyz&#39;)` is just a long-winded way of writing `&#39;xyz&#39;`, so better to drop the function call entirely.","title":"&quot;XPST0003: XQuery syntax error&quot; when declaring namespace in Saxon","body":"<p>Firstly, I'm puzzled by your Java snippet because it won't compile (because of the nested quotes), so I don't see how you get as far as Saxon reporting an XQuery syntax error. Also I imagine that the '/n' should really be '\\n'. So let's suppose the Java actually says:</p>\n\n<pre><code>comp.compile(\"return \\n\"+\n    \"if ( funcJavaDict:CheckString('em andamento','EM Andamento') ) then \\n\" +\n    \"  String('so iguais') \\n\"\n    \"else  \\n\"+\n   \"  String('so diferente') \");\n</code></pre>\n\n<p>XQuery keywords are recognized only if they appear in the right context. \"return\" at the start of an expression is not recognized as a keyword, so it is interpreted as a path expression meaning <code>child::element(return)</code>. </p>\n\n<p>(In fact recent Saxon releases will often report a warning if you use a keyword incorrectly like this, but it's not catching this particular case).</p>\n\n<p>So \"return\" is a complete expression that selects child elements named <code>return</code>, and the only thing that can come after a complete expression is either the end of the input, or an infix operator such as <code>and</code> or <code>union</code>. The keyword <code>if</code> is not either of these things, so the compiler reports a syntax error. The solution is to remove the <code>return</code> keyword.</p>\n\n<p>But that's not the only thing wrong with your query. There is no function named <code>String</code>. You could change it to <code>string</code> and the query would work, but writing <code>string('xyz')</code> is just a long-winded way of writing <code>'xyz'</code>, so better to drop the function call entirely.</p>\n"}],"owner":{"account_id":14268527,"reputation":11,"user_id":10306832,"display_name":"Artulanez Souza"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":1,"score":-2,"last_activity_date":1695244169,"creation_date":1535900511,"question_id":52138213,"body_markdown":"I&#39;m trying to use the xQuery API for java s9api, however when I try to declare a namespace and run a simple rule to test it I restore the error &quot;XPST0003: XQuery syntax error in \r\n\r\n    # ... if (funcJavaDict: CheckString #\r\n    Unexpected token &quot;if (&quot; beyond end of query &quot;\r\n\r\nAcretido is an easy error to solve, but I&#39;m not getting to the solution,\r\n\r\nThe Java code snippet is:\r\n\r\n    //Declara namespace de fun&#231;&#245;es java para usar nas regras\r\n\tcomp.declareNamespace (&quot;funcJavaDict&quot;, &quot;java:Rastreamento.retratos.DictionaryTerms&quot;);\r\n\tcomp.declareNamespace (&quot;xmi&quot;, &quot;http://www.omg.org/XMI&quot;);\r\n\t\r\n\t//compila regra do arquivo\r\n    XQueryExecutable exp = null;\r\n    try {\r\n\t\texp = comp.compile(&quot;return  /n&quot;+\r\n\t\t\t\t\t\t   &quot;if ( funcJavaDict:CheckString(&quot;em andamento&quot;,&quot;EM Andamento&quot;) ) then /n&quot; +\r\n\t\t\t\t\t\t   &quot;  String(&quot;s&#227;o iguais&quot;) /n&quot;\r\n\t\t\t\t\t\t   &quot;else  /n&quot;+\r\n\t\t\t\t\t\t   &quot;  String(&quot;s&#227;o diferente&quot;) &quot;);\r\n    }catch (SaxonApiException e) {\r\n\t\te.printStackTrace();\r\n\t}\r\n    \r\n    //carrega e executa regra\r\n    XQueryEvaluator Eval = exp.load();\r\n    \r\n    XdmValue rs = null;\r\n\ttry {\r\n\t\trs = Eval.evaluate();\r\n\t} catch (SaxonApiException e) {\r\n\t\te.printStackTrace();\r\n\t}\r\n\t\t\r\n\r\n  \r\n\r\nthe code is very simple is just to check if two string&#39;s are equivalent.","title":"&quot;XPST0003: XQuery syntax error&quot; when declaring namespace in Saxon","body":"<p>I'm trying to use the xQuery API for java s9api, however when I try to declare a namespace and run a simple rule to test it I restore the error \"XPST0003: XQuery syntax error in </p>\n\n<pre><code># ... if (funcJavaDict: CheckString #\nUnexpected token \"if (\" beyond end of query \"\n</code></pre>\n\n<p>Acretido is an easy error to solve, but I'm not getting to the solution,</p>\n\n<p>The Java code snippet is:</p>\n\n<pre><code>//Declara namespace de funes java para usar nas regras\ncomp.declareNamespace (\"funcJavaDict\", \"java:Rastreamento.retratos.DictionaryTerms\");\ncomp.declareNamespace (\"xmi\", \"http://www.omg.org/XMI\");\n\n//compila regra do arquivo\nXQueryExecutable exp = null;\ntry {\n    exp = comp.compile(\"return  /n\"+\n                       \"if ( funcJavaDict:CheckString(\"em andamento\",\"EM Andamento\") ) then /n\" +\n                       \"  String(\"so iguais\") /n\"\n                       \"else  /n\"+\n                       \"  String(\"so diferente\") \");\n}catch (SaxonApiException e) {\n    e.printStackTrace();\n}\n\n//carrega e executa regra\nXQueryEvaluator Eval = exp.load();\n\nXdmValue rs = null;\ntry {\n    rs = Eval.evaluate();\n} catch (SaxonApiException e) {\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>the code is very simple is just to check if two string's are equivalent.</p>\n"},{"tags":["java","eclipse","file-io","fileinputstream"],"comments":[{"owner":{"account_id":16878,"reputation":306133,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1412945614,"post_id":26299842,"comment_id":41268658,"body_markdown":"Use the Eclipse debugger.  Set a breakpoint and step through the code to see where behavior fails to meet your assumptions about what&#39;s happening.","body":"Use the Eclipse debugger.  Set a breakpoint and step through the code to see where behavior fails to meet your assumptions about what&#39;s happening."},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1412945712,"post_id":26299842,"comment_id":41268718,"body_markdown":"Possible [duplicate](http://stackoverflow.com/q/19871955/2587435)","body":"Possible <a href=\"http://stackoverflow.com/q/19871955/2587435\">duplicate</a>"},{"owner":{"account_id":2524075,"reputation":36076,"user_id":2193767,"accept_rate":78,"display_name":"TheLostMind"},"score":0,"creation_date":1412945784,"post_id":26299842,"comment_id":41268769,"body_markdown":"Keep it at the same level as your source / bin directory and try.","body":"Keep it at the same level as your source / bin directory and try."},{"owner":{"account_id":997513,"reputation":12945,"user_id":3893496,"accept_rate":54,"display_name":"arcy"},"score":0,"creation_date":1412949398,"post_id":26299842,"comment_id":41270963,"body_markdown":"Any time you have an exception thrown, post the stacktrace.  Any time you have a problem that can be illustrated with a small example that can be compiled and run, post the example.  &quot;Tried all the suggestions&quot; and &quot;Nothing is working&quot; are not substitutes for giving explicit information on what happens and when.","body":"Any time you have an exception thrown, post the stacktrace.  Any time you have a problem that can be illustrated with a small example that can be compiled and run, post the example.  &quot;Tried all the suggestions&quot; and &quot;Nothing is working&quot; are not substitutes for giving explicit information on what happens and when."}],"answers":[{"tags":[],"owner":{"account_id":240659,"reputation":16549,"user_id":2003986,"accept_rate":75,"display_name":"ToYonos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1412946410,"creation_date":1412945885,"answer_id":26300028,"question_id":26299842,"body_markdown":"Creating `File` with a relative path is always kind of risky. Either use an absolute path like /my/absolute/path or use a different method to get your file.\r\n\r\nAlso, why not using this constructor : `Scanner(File source)`\r\n\r\nhttp://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#Scanner(java.io.File)\r\n\r\nOr better, use this one : `Scanner(InputStream source)`\r\n\r\nAnd then, use getResourceAsStream to properly retrieve your file\r\n\r\n\r\n    InputStream is = getClass().getClassLoader().getResourceAsStream(&quot;PhoneRecords.txt&quot;);\r\n    Scanner sc = new Scanner(is);\r\n ","title":"Can&#39;t find files with eclipse","body":"<p>Creating <code>File</code> with a relative path is always kind of risky. Either use an absolute path like /my/absolute/path or use a different method to get your file.</p>\n\n<p>Also, why not using this constructor : <code>Scanner(File source)</code></p>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#Scanner(java.io.File)\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#Scanner(java.io.File)</a></p>\n\n<p>Or better, use this one : <code>Scanner(InputStream source)</code></p>\n\n<p>And then, use getResourceAsStream to properly retrieve your file</p>\n\n<pre><code>InputStream is = getClass().getClassLoader().getResourceAsStream(\"PhoneRecords.txt\");\nScanner sc = new Scanner(is);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4775222,"reputation":137,"user_id":3858598,"accept_rate":40,"display_name":"cozla"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1412946220,"creation_date":1412945896,"answer_id":26300032,"question_id":26299842,"body_markdown":"Try to put your file here.\r\n\r\n    ---&gt;bin\r\n    ---&gt;src\r\n    ---&gt;PhoneRecords.txt\r\n\r\nor specify the location of the file. For instance, \r\n\r\n    String path = &quot;C:\\\\MyFiles\\\\PhoneRecords.txt&quot;;\r\n    File inFile = new File(path);\r\n\r\n","title":"Can&#39;t find files with eclipse","body":"<p>Try to put your file here.</p>\n\n<pre><code>---&gt;bin\n---&gt;src\n---&gt;PhoneRecords.txt\n</code></pre>\n\n<p>or specify the location of the file. For instance, </p>\n\n<pre><code>String path = \"C:\\\\MyFiles\\\\PhoneRecords.txt\";\nFile inFile = new File(path);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":197685,"reputation":4628,"user_id":441907,"accept_rate":100,"display_name":"Nick Russler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1412946498,"creation_date":1412946498,"answer_id":26300224,"question_id":26299842,"body_markdown":"Did you enable the input in the eclipse console? Scanner caused me some problems when used from the eclipse console before..\r\n\r\n![enter image description here][1]\r\n\r\nSource: https://stackoverflow.com/a/22471175/441907\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/3wfUb.png","title":"Can&#39;t find files with eclipse","body":"<p>Did you enable the input in the eclipse console? Scanner caused me some problems when used from the eclipse console before..</p>\n\n<p><img src=\"https://i.stack.imgur.com/3wfUb.png\" alt=\"enter image description here\"></p>\n\n<p>Source: <a href=\"https://stackoverflow.com/a/22471175/441907\">https://stackoverflow.com/a/22471175/441907</a></p>\n"},{"tags":[],"owner":{"account_id":896371,"reputation":827,"user_id":933537,"display_name":"Anand Rajasekar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1412946504,"creation_date":1412946504,"answer_id":26300226,"question_id":26299842,"body_markdown":"If the files are put under src try loading from class path\r\n\r\n    Scanner scanner=new Scanner(YourClass.class.getResourceAsStream(&quot;/package/...pathtofile&quot;);","title":"Can&#39;t find files with eclipse","body":"<p>If the files are put under src try loading from class path</p>\n\n<pre><code>Scanner scanner=new Scanner(YourClass.class.getResourceAsStream(\"/package/...pathtofile\");\n</code></pre>\n"}],"owner":{"account_id":5156255,"reputation":43,"user_id":4129422,"accept_rate":60,"display_name":"NIcholas Tremblay"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8891,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1695244031,"creation_date":1412945344,"question_id":26299842,"body_markdown":"Okay so I scoured this site and a few others looking for the answer to this problem and tried all of the suggestions. Nothing is working and it keeps throwing the `File not found exception`.\r\n\r\n    File inFile = new File(&quot;PhoneRecords.txt&quot;);\r\n\tString path = inFile.getAbsolutePath();\r\n\t try {\r\n\t\tSystem.setIn(new FileInputStream(path));\r\n\t} catch (FileNotFoundException e) {\r\n\t\te.printStackTrace();\r\n\t}\r\n    Scanner sc = new Scanner(System.in);\r\n\r\nAfter this it tries to use the Scanner in a method below.\r\n\r\n    public static PhoneCall readNextPhoneCall(Scanner sc){\r\n\t  return new PhoneCall (sc.nextDouble(), sc.nextInt());\r\n    }\r\n\r\nThe text file is in the same directory that I am working in and I double made sure that I name it correctly in my code. Please Help.","title":"Can&#39;t find files with eclipse","body":"<p>Okay so I scoured this site and a few others looking for the answer to this problem and tried all of the suggestions. Nothing is working and it keeps throwing the <code>File not found exception</code>.</p>\n\n<pre><code>File inFile = new File(\"PhoneRecords.txt\");\nString path = inFile.getAbsolutePath();\n try {\n    System.setIn(new FileInputStream(path));\n} catch (FileNotFoundException e) {\n    e.printStackTrace();\n}\nScanner sc = new Scanner(System.in);\n</code></pre>\n\n<p>After this it tries to use the Scanner in a method below.</p>\n\n<pre><code>public static PhoneCall readNextPhoneCall(Scanner sc){\n  return new PhoneCall (sc.nextDouble(), sc.nextInt());\n}\n</code></pre>\n\n<p>The text file is in the same directory that I am working in and I double made sure that I name it correctly in my code. Please Help.</p>\n"},{"tags":["java","spring","spring-boot","unit-testing"],"comments":[{"owner":{"account_id":16744354,"reputation":504,"user_id":12103109,"display_name":"CaptainAye"},"score":0,"creation_date":1695242630,"post_id":77145639,"comment_id":136000085,"body_markdown":"How did you verify that real implementation was injected? There were no significant changes in @MockBean behaviour in Spring Boot 3 that I know of, so your example looks correct and should work just fine.","body":"How did you verify that real implementation was injected? There were no significant changes in @MockBean behaviour in Spring Boot 3 that I know of, so your example looks correct and should work just fine."},{"owner":{"account_id":2270180,"reputation":619,"user_id":1997828,"accept_rate":6,"display_name":"Deibys"},"score":0,"creation_date":1695243558,"post_id":77145639,"comment_id":136000231,"body_markdown":"I added a debug point","body":"I added a debug point"},{"owner":{"account_id":16744354,"reputation":504,"user_id":12103109,"display_name":"CaptainAye"},"score":0,"creation_date":1695245343,"post_id":77145639,"comment_id":136000459,"body_markdown":"can you try to write your test in such a way that it tests AuditService2? i,e, put assertEquals(4, auditEventService2.sumar(2,2); in your test. I predict that it will fail as sumar will return null, as the object is mocked in reality. Then, you will be able to use Mockito.when to mock the behaviour of the sumar() method.","body":"can you try to write your test in such a way that it tests AuditService2? i,e, put assertEquals(4, auditEventService2.sumar(2,2); in your test. I predict that it will fail as sumar will return null, as the object is mocked in reality. Then, you will be able to use Mockito.when to mock the behaviour of the sumar() method."}],"answers":[{"tags":[],"owner":{"account_id":1229861,"reputation":605,"user_id":1194678,"display_name":"Marko Medojevi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695243700,"creation_date":1695243700,"answer_id":77145916,"question_id":77145639,"body_markdown":"You injected a mocked object using this code:\r\n\r\n    @MockBean private AuditService2 auditEventService2;\r\n\r\nHowever, you can also alter a method behavior of the mocked object by utilizing Mockito when. Example:\r\n\r\n    when(auditEventService2.someMethod(any())).thenReturn(&quot;mocked result&quot;);\r\n\r\nTry to change an output of some methods from mocked beans and check if actually works. ","title":"MockBean does not work with classes in Spring boot 3.1","body":"<p>You injected a mocked object using this code:</p>\n<pre><code>@MockBean private AuditService2 auditEventService2;\n</code></pre>\n<p>However, you can also alter a method behavior of the mocked object by utilizing Mockito when. Example:</p>\n<pre><code>when(auditEventService2.someMethod(any())).thenReturn(&quot;mocked result&quot;);\n</code></pre>\n<p>Try to change an output of some methods from mocked beans and check if actually works.</p>\n"}],"owner":{"account_id":2270180,"reputation":619,"user_id":1997828,"accept_rate":6,"display_name":"Deibys"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695243700,"creation_date":1695240352,"question_id":77145639,"body_markdown":"This is  my setup:\r\n- Spring boot 3.1\r\n- JDK 17\r\n\r\nI have this simple junit test\r\n\r\n``` \r\n@ExtendWith(SpringExtension.class)\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n//@AutoConfigureMockMvc(addFilters = false)\r\n@ActiveProfiles(&quot;test&quot;)\r\npublic class ATestClass {\r\n\r\n\r\n    @MockBean private AuditService2 auditEventService2;\r\n\r\n    @MockBean private AuthorizationManager authorizationManager;\r\n\r\n    @Test\r\n    void getEvents() throws Exception {\r\n        assertTrue(true);\r\n    }\r\n}\r\n``` \r\n\r\n\r\n``` \r\n@Service\r\npublic class AuditService2 {\r\n\r\n    public int sumar(int a, int b) {\r\n        return a + b;\r\n    }\r\n}\r\n``` \r\n\r\nThe framework (Spring) is not mocking AuditService2 which is a class. This is injecting the actual bean\r\n\r\nThe framework does mock AuthorizationManager\r\n\r\nThe only difference between two AuditService2 is a class , AuthorizationManager an interface\r\n\r\nThis used to work in Spring boot 2.X, what is the issue here ?\r\n","title":"MockBean does not work with classes in Spring boot 3.1","body":"<p>This is  my setup:</p>\n<ul>\n<li>Spring boot 3.1</li>\n<li>JDK 17</li>\n</ul>\n<p>I have this simple junit test</p>\n<pre><code>@ExtendWith(SpringExtension.class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n//@AutoConfigureMockMvc(addFilters = false)\n@ActiveProfiles(&quot;test&quot;)\npublic class ATestClass {\n\n\n    @MockBean private AuditService2 auditEventService2;\n\n    @MockBean private AuthorizationManager authorizationManager;\n\n    @Test\n    void getEvents() throws Exception {\n        assertTrue(true);\n    }\n}\n</code></pre>\n<pre><code>@Service\npublic class AuditService2 {\n\n    public int sumar(int a, int b) {\n        return a + b;\n    }\n}\n</code></pre>\n<p>The framework (Spring) is not mocking AuditService2 which is a class. This is injecting the actual bean</p>\n<p>The framework does mock AuthorizationManager</p>\n<p>The only difference between two AuditService2 is a class , AuthorizationManager an interface</p>\n<p>This used to work in Spring boot 2.X, what is the issue here ?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":4870108,"reputation":3891,"user_id":3926930,"accept_rate":60,"display_name":"Shafin Mahmud"},"score":0,"creation_date":1544585742,"post_id":53735448,"comment_id":94324555,"body_markdown":"`abstract=&quot;true&quot; ` is meant to inherit common properties in XML bean definitions, thus it reduces duplicate lines in XML. Abstract beans in Spring are somewhat different from abstract classes.","body":"<code>abstract=&quot;true&quot; </code> is meant to inherit common properties in XML bean definitions, thus it reduces duplicate lines in XML. Abstract beans in Spring are somewhat different from abstract classes."},{"owner":{"account_id":14928734,"reputation":23,"user_id":10778707,"display_name":"Ojama Tang"},"score":0,"creation_date":1544591505,"post_id":53735448,"comment_id":94325807,"body_markdown":"could you tell me how to create An abstract bean at spring boot? I want to code reuse.","body":"could you tell me how to create An abstract bean at spring boot? I want to code reuse."},{"owner":{"account_id":4870108,"reputation":3891,"user_id":3926930,"accept_rate":60,"display_name":"Shafin Mahmud"},"score":0,"creation_date":1544592412,"post_id":53735448,"comment_id":94326069,"body_markdown":"do you have any concrete class for `AbstractProcessTask` abstract class ?","body":"do you have any concrete class for <code>AbstractProcessTask</code> abstract class ?"},{"owner":{"account_id":14928734,"reputation":23,"user_id":10778707,"display_name":"Ojama Tang"},"score":0,"creation_date":1544593125,"post_id":53735448,"comment_id":94326273,"body_markdown":"Of course,They need the same attributes and methods.","body":"Of course,They need the same attributes and methods."}],"answers":[{"tags":[],"owner":{"account_id":4870108,"reputation":3891,"user_id":3926930,"accept_rate":60,"display_name":"Shafin Mahmud"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1544610654,"creation_date":1544594259,"answer_id":53736885,"question_id":53735448,"body_markdown":"Using `@Component` over an abstract class would not help Spring to create a bean from that (As of course, you know, you can not instantiate an object from an abstract class). Use `@Component` annotation over the concrete classes.\r\n\r\n    @Component\r\n    public class MyProcessTask extends AbstractProcessTask {\r\n    ...\r\n    }\r\n\r\nAnd the rest are okay. If spring finds the concrete classes in the scan path, the associated beans will be created automatically.\r\n\r\nDon&#39;t confuse with attribute &#39;abstract=true&#39;\r\n--------------------------------------------\r\nWhen you mention the attribute `abstract=true` in a bean declaration, you are just abstracting the bean. Abstract beans in Spring are somewhat different from abstract classes. In fact, the abstract bean in Spring doesn&#39;t even have to be mapped to any class.\r\n\r\nSee this nice answer for more about [What is meant by abstract=true in spring?\r\n][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/9397532/what-is-meant-by-abstract-true-in-spring","title":"How to use abstract classes in Spring Boot?","body":"<p>Using <code>@Component</code> over an abstract class would not help Spring to create a bean from that (As of course, you know, you can not instantiate an object from an abstract class). Use <code>@Component</code> annotation over the concrete classes.</p>\n\n<pre><code>@Component\npublic class MyProcessTask extends AbstractProcessTask {\n...\n}\n</code></pre>\n\n<p>And the rest are okay. If spring finds the concrete classes in the scan path, the associated beans will be created automatically.</p>\n\n<h2>Don't confuse with attribute 'abstract=true'</h2>\n\n<p>When you mention the attribute <code>abstract=true</code> in a bean declaration, you are just abstracting the bean. Abstract beans in Spring are somewhat different from abstract classes. In fact, the abstract bean in Spring doesn't even have to be mapped to any class.</p>\n\n<p>See this nice answer for more about <a href=\"https://stackoverflow.com/questions/9397532/what-is-meant-by-abstract-true-in-spring\">What is meant by abstract=true in spring?\n</a></p>\n"},{"tags":[],"owner":{"account_id":9343731,"reputation":513,"user_id":6935577,"display_name":"Shariq"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1544594679,"creation_date":1544594679,"answer_id":53736979,"question_id":53735448,"body_markdown":"You can simply extend the abstract class with another class, and use  `@Component` in the subclass.  You may also need to implement any methods in the superclass. \r\n\r\n    @Component\r\n    public class AbstractChild extends AbstractProcessTask {\r\n    }","title":"How to use abstract classes in Spring Boot?","body":"<p>You can simply extend the abstract class with another class, and use  <code>@Component</code> in the subclass.  You may also need to implement any methods in the superclass. </p>\n\n<pre><code>@Component\npublic class AbstractChild extends AbstractProcessTask {\n}\n</code></pre>\n"}],"owner":{"account_id":14928734,"reputation":23,"user_id":10778707,"display_name":"Ojama Tang"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15634,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":53736885,"answer_count":2,"score":2,"last_activity_date":1695243640,"creation_date":1544583752,"question_id":53735448,"body_markdown":"    @Component\r\n    public abstract class AbstractProcessTask implements Task {\r\n\r\n      @Resource\r\n      protected WorkOrderEventService workOrderEventService;\r\n      @Resource\r\n      protected NodeService nodeService;\r\n      @Resource\r\n      protected ConfigReader configReader;\r\n\r\n      protected void updateStatus(WorkOrderEvent workOrderEvent, String status, String description) {\r\n        workOrderEvent.setStatus(status);\r\n        workOrderEvent.setComments(description);\r\n        workOrderEventService.saveWorkOrderEvent(workOrderEvent);\r\n      }\r\n    }\r\n\r\nI write a abstract class for use,But I don&#39;t know how to use.\r\nAt Old spring version,We can write abstract=&quot;true&quot; in xml.\r\nfor example:\r\n\r\n    &lt;bean id=&quot;BaseEventAction&quot; class=&quot;com.sinosig.evaluation.fcff.web.event.BasicEventAction&quot;\r\n            abstract=&quot;true&quot; parent=&quot;BaseAction&quot;&gt;\r\n            &lt;property name=&quot;rowFactory&quot; ref=&quot;FcffCacheAdapter&quot; /&gt;\r\n            &lt;property name=&quot;caculate&quot; ref=&quot;CaculateService&quot; /&gt;\r\n            &lt;property name=&quot;diffusion&quot; ref=&quot;DeffusionService&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\nWhat should I do?","title":"How to use abstract classes in Spring Boot?","body":"<pre><code>@Component\npublic abstract class AbstractProcessTask implements Task {\n\n  @Resource\n  protected WorkOrderEventService workOrderEventService;\n  @Resource\n  protected NodeService nodeService;\n  @Resource\n  protected ConfigReader configReader;\n\n  protected void updateStatus(WorkOrderEvent workOrderEvent, String status, String description) {\n    workOrderEvent.setStatus(status);\n    workOrderEvent.setComments(description);\n    workOrderEventService.saveWorkOrderEvent(workOrderEvent);\n  }\n}\n</code></pre>\n<p>I write a abstract class for use,But I don't know how to use.\nAt Old spring version,We can write abstract=&quot;true&quot; in xml.\nfor example:</p>\n<pre><code>&lt;bean id=&quot;BaseEventAction&quot; class=&quot;com.sinosig.evaluation.fcff.web.event.BasicEventAction&quot;\n        abstract=&quot;true&quot; parent=&quot;BaseAction&quot;&gt;\n        &lt;property name=&quot;rowFactory&quot; ref=&quot;FcffCacheAdapter&quot; /&gt;\n        &lt;property name=&quot;caculate&quot; ref=&quot;CaculateService&quot; /&gt;\n        &lt;property name=&quot;diffusion&quot; ref=&quot;DeffusionService&quot; /&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>What should I do?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1695226241,"post_id":77140232,"comment_id":135997113,"body_markdown":" this compatibility issue  *what* compatibility issue? You have not explained exactly what problem you have.","body":" this compatibility issue  <i>what</i> compatibility issue? You have not explained exactly what problem you have."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695243567,"creation_date":1695196107,"answer_id":77140350,"question_id":77140232,"body_markdown":"You neglected to detail the nature of your specific problem. I am guessing your problem is either or both of these issues: \r\n\r\n - The current version of [Jakarta EE][1] requires the use of `jakarta.*` package naming, a break from the past use of `javax.*` namespace. \r\n - The current version of the [Jakarta Servlet][2] spec drops some deprecated features. \r\n\r\nIn any case, your Servlet appears to be [this project](https://github.com/ceefour/webdav-servlet). Unfortunately, that project seems to show no activity in over nine years. So I assume that rules out any possibility of an update. \r\n\r\nIf you want to move to modern Jakarta technology, replace that Servlet with another providing your needed functionality. \r\n\r\nIf you need help in selecting an implementation of a [WebDAV][3] server, post on the sister site: https://softwarerecs.stackexchange.com/\r\n\r\n\r\n  [1]: https://jakarta.ee/\r\n  [2]: https://projects.eclipse.org/projects/ee4j.servlet\r\n  [3]: https://en.wikipedia.org/wiki/WebDAV","title":"How to upgrade from Java EE to Jakarta with webdav-servlet compatibility?","body":"<p>You neglected to detail the nature of your specific problem. I am guessing your problem is either or both of these issues:</p>\n<ul>\n<li>The current version of <a href=\"https://jakarta.ee/\" rel=\"nofollow noreferrer\">Jakarta EE</a> requires the use of <code>jakarta.*</code> package naming, a break from the past use of <code>javax.*</code> namespace.</li>\n<li>The current version of the <a href=\"https://projects.eclipse.org/projects/ee4j.servlet\" rel=\"nofollow noreferrer\">Jakarta Servlet</a> spec drops some deprecated features.</li>\n</ul>\n<p>In any case, your Servlet appears to be <a href=\"https://github.com/ceefour/webdav-servlet\" rel=\"nofollow noreferrer\">this project</a>. Unfortunately, that project seems to show no activity in over nine years. So I assume that rules out any possibility of an update.</p>\n<p>If you want to move to modern Jakarta technology, replace that Servlet with another providing your needed functionality.</p>\n<p>If you need help in selecting an implementation of a <a href=\"https://en.wikipedia.org/wiki/WebDAV\" rel=\"nofollow noreferrer\">WebDAV</a> server, post on the sister site: <a href=\"https://softwarerecs.stackexchange.com/\">https://softwarerecs.stackexchange.com/</a></p>\n"}],"owner":{"account_id":7057423,"reputation":1095,"user_id":5404157,"accept_rate":100,"display_name":"Dasma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695243567,"creation_date":1695195090,"question_id":77140232,"body_markdown":"I am facing issues while upgrading from Java EE to Jakarta, specifically with the webdav-servlet. It appears that the current version of webdav-servlet does not support Jakarta. Currently, I am using OpenJdk 11.\r\n\r\nThe problem arises in the servlet-class section of the web.xml file:\r\n\r\n```xml\r\n&lt;servlet&gt;\r\n...\r\n\t\t&lt;servlet-name&gt;webdav&lt;/servlet-name&gt;\r\n\t\t&lt;servlet-class&gt;\r\n\t\t\tnet.sf.webdav.WebdavServlet\r\n\t\t&lt;/servlet-class&gt;\r\n..\r\n&lt;/servlet&gt;\r\n```\r\n\r\nAny suggestions or workarounds on how to resolve this compatibility issue would be greatly appreciated.","title":"How to upgrade from Java EE to Jakarta with webdav-servlet compatibility?","body":"<p>I am facing issues while upgrading from Java EE to Jakarta, specifically with the webdav-servlet. It appears that the current version of webdav-servlet does not support Jakarta. Currently, I am using OpenJdk 11.</p>\n<p>The problem arises in the servlet-class section of the web.xml file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;servlet&gt;\n...\n        &lt;servlet-name&gt;webdav&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;\n            net.sf.webdav.WebdavServlet\n        &lt;/servlet-class&gt;\n..\n&lt;/servlet&gt;\n</code></pre>\n<p>Any suggestions or workarounds on how to resolve this compatibility issue would be greatly appreciated.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":10,"creation_date":1516876396,"post_id":48440669,"comment_id":83872595,"body_markdown":"You don&#39;t. You only declare the beans which have a concrete subclass of that abstract class.","body":"You don&#39;t. You only declare the beans which have a concrete subclass of that abstract class."},{"owner":{"account_id":10639687,"reputation":121,"user_id":7835214,"display_name":"Diego Krupitza"},"score":0,"creation_date":1517836193,"post_id":48440669,"comment_id":84243129,"body_markdown":"This [link](https://docs.spring.io/spring-javaconfig/docs/1.0.0.m3/reference/html/creating-bean-definitions.html) of the spring documentation could help you! It shows the old xml and the new Java way!","body":"This <a href=\"https://docs.spring.io/spring-javaconfig/docs/1.0.0.m3/reference/html/creating-bean-definitions.html\" rel=\"nofollow noreferrer\">link</a> of the spring documentation could help you! It shows the old xml and the new Java way!"},{"owner":{"account_id":2358514,"reputation":9644,"user_id":2065796,"accept_rate":62,"display_name":"Sasha Shpota"},"score":0,"creation_date":1518363209,"post_id":48440669,"comment_id":84465378,"body_markdown":"Possible duplicate of [Bean definition inheritance with annotations?](https://stackoverflow.com/questions/23266175/bean-definition-inheritance-with-annotations)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/23266175/bean-definition-inheritance-with-annotations\">Bean definition inheritance with annotations?</a>"}],"answers":[{"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1517385759,"creation_date":1516876729,"answer_id":48440850,"question_id":48440669,"body_markdown":"Write your abstract base class in plain Java (without any Spring coupling) :\r\n\r\n    public abstract class AbstractClass{   \r\n        private Sample1 sample1;\r\n        private Sample2 sample2;\r\n       \r\n        public AbstractClass(Sample1 sample1, Sample1 sample2){\r\n           this.sample1 = sample1;\r\n           this.sample2 = sample2;\r\n       }\r\n       ... \r\n    }\r\n\r\nNote that adding a constructor with parameters (both for the abstract class and the concrete class) makes injection easier and dependencies clearer.&lt;br&gt;\r\n\r\nThen you have two ways :\r\n\r\n1) Annotate the concrete class(es) with `@Component`.  \r\nSuch as :  \r\n\r\n    @Component\r\n    public class MyClass extends AbstractClass{   \r\n        public MyClass (Sample1 sample1, Sample1 sample2){\r\n            super(sample1, sample2);\r\n        }\r\n    }\r\n\r\nThis first way has the advantage to be short : just an annotation to add.  \r\nBut it makes de facto the subclass as a bean that may potentially be loaded by the Spring context.\r\n\r\n\r\n2) Alternatively, declare the bean in a `Configuration` class.  \r\nSuch as :\r\n   \r\n\r\n    @Configuration\r\n    public class MyConfig{\r\n      @Bean\r\n       public MyClass myClass(Sample1 sample1, Sample1 sample2){\r\n          return new MyClass(sample1, sample1);\r\n       }\r\n    }\r\n\r\nThis second way is more verbose but has the advantage to not modify the subclass code and also let clients of the class to decide whether the class should be a bean.\r\n\r\nEach approach has its advantages and its drawbacks.  \r\nSo to use according to the concrete requirement.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/46502450/interfaces-are-annotated-with-component-annotation-in-spring-ioc-di-what-could\r\n\r\n","title":"How to create a bean using @Bean annotation in Spring Boot for abstract class","body":"<p>Write your abstract base class in plain Java (without any Spring coupling) :</p>\n\n<pre><code>public abstract class AbstractClass{   \n    private Sample1 sample1;\n    private Sample2 sample2;\n\n    public AbstractClass(Sample1 sample1, Sample1 sample2){\n       this.sample1 = sample1;\n       this.sample2 = sample2;\n   }\n   ... \n}\n</code></pre>\n\n<p>Note that adding a constructor with parameters (both for the abstract class and the concrete class) makes injection easier and dependencies clearer.<br></p>\n\n<p>Then you have two ways :</p>\n\n<p>1) Annotate the concrete class(es) with <code>@Component</code>.<br>\nSuch as :  </p>\n\n<pre><code>@Component\npublic class MyClass extends AbstractClass{   \n    public MyClass (Sample1 sample1, Sample1 sample2){\n        super(sample1, sample2);\n    }\n}\n</code></pre>\n\n<p>This first way has the advantage to be short : just an annotation to add.<br>\nBut it makes de facto the subclass as a bean that may potentially be loaded by the Spring context.</p>\n\n<p>2) Alternatively, declare the bean in a <code>Configuration</code> class.<br>\nSuch as :</p>\n\n<pre><code>@Configuration\npublic class MyConfig{\n  @Bean\n   public MyClass myClass(Sample1 sample1, Sample1 sample2){\n      return new MyClass(sample1, sample1);\n   }\n}\n</code></pre>\n\n<p>This second way is more verbose but has the advantage to not modify the subclass code and also let clients of the class to decide whether the class should be a bean.</p>\n\n<p>Each approach has its advantages and its drawbacks.<br>\nSo to use according to the concrete requirement.</p>\n"},{"tags":[],"owner":{"account_id":2358514,"reputation":9644,"user_id":2065796,"accept_rate":62,"display_name":"Sasha Shpota"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1517318927,"creation_date":1517318454,"answer_id":48522462,"question_id":48440669,"body_markdown":"There is no need in converting this code. You only need to make the classes that extend `com.test.core.common.AbstractClass` declared as spring managed beans by either annotating them with `@Component` or `@Service` or declaring a method annotated with `@Bean` in your configuration class.\r\n\r\nGenerally **&quot;abstract bean&quot; is not needed in Java Configuration**, there is even no equivalent. It was needed in xml configuration for parameter inheritance which is now achievable with plain java methods. Find [example from Stephane Nicoll][1] who is Spring Core developer.\r\n\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/23266686/2065796","title":"How to create a bean using @Bean annotation in Spring Boot for abstract class","body":"<p>There is no need in converting this code. You only need to make the classes that extend <code>com.test.core.common.AbstractClass</code> declared as spring managed beans by either annotating them with <code>@Component</code> or <code>@Service</code> or declaring a method annotated with <code>@Bean</code> in your configuration class.</p>\n\n<p>Generally <strong>\"abstract bean\" is not needed in Java Configuration</strong>, there is even no equivalent. It was needed in xml configuration for parameter inheritance which is now achievable with plain java methods. Find <a href=\"https://stackoverflow.com/a/23266686/2065796\">example from Stephane Nicoll</a> who is Spring Core developer.</p>\n"},{"tags":[],"owner":{"account_id":2864238,"reputation":10897,"user_id":2458858,"accept_rate":85,"display_name":"tryingToLearn"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1517677515,"creation_date":1517677515,"answer_id":48599816,"question_id":48440669,"body_markdown":"Since Java has it&#39;s own mechanism of abstract classes and inheritance in place, you don&#39;t need to do the coupling of following code in your spring coupling.\r\n\r\n    &lt;bean id=&quot;sample&quot; class=&quot;com.test.core.common.AbstractClass&quot; abstract=&quot;true&quot;&gt;\r\n        &lt;property name=&quot;sample1&quot; ref=&quot;sample1&quot; /&gt;\r\n         &lt;property name=&quot;sample2&quot; ref=&quot;sample2&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\nIn XML config, you needed to do this to specify the template for inheritance of child beans. But since Springboot uses Java configuration, this part is handled directly with Java inheritance.\r\n\r\nWhat it means is that you can declare this abstract class as a normal Java abstract class and treat only the child classes as beans without worrying about the abstract parent class.","title":"How to create a bean using @Bean annotation in Spring Boot for abstract class","body":"<p>Since Java has it's own mechanism of abstract classes and inheritance in place, you don't need to do the coupling of following code in your spring coupling.</p>\n\n<pre><code>&lt;bean id=\"sample\" class=\"com.test.core.common.AbstractClass\" abstract=\"true\"&gt;\n    &lt;property name=\"sample1\" ref=\"sample1\" /&gt;\n     &lt;property name=\"sample2\" ref=\"sample2\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>In XML config, you needed to do this to specify the template for inheritance of child beans. But since Springboot uses Java configuration, this part is handled directly with Java inheritance.</p>\n\n<p>What it means is that you can declare this abstract class as a normal Java abstract class and treat only the child classes as beans without worrying about the abstract parent class.</p>\n"},{"tags":[],"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638568807,"creation_date":1638568499,"answer_id":70221074,"question_id":48440669,"body_markdown":"When we *want to* instantiate an `abstract class` or an `interface` as a `@Bean` (*with [tag:spring-java-config]*), we can generally:\r\n\r\n1. Instantiate an [anonymous inner class][1].\r\n\r\n2. Override all abstract methods! ;(\r\n\r\nSo for a [Method injection][2], it would look like:\r\n\r\n    @Configuration\r\n    class FreakyConfig {\r\n      @Bean\r\n      @RequestScope // !! (stateful)\r\n      public MyFooBarDelegate delegate() {\r\n        return MyFooBarDelegate.of(...);\r\n      }\r\n      @Bean // singleton, stateless, abstract (no spring deps.)! ;)\r\n      public MyFooBarAbstractSingletonBean() {\r\n        return new MyFooBarAbstractSingletonBean() { // anonymous inner class!\r\n          @Override\r\n          protected MyFooBarDelegate fooBarDelegate() { // ...and override the (injected)/prescribed methods.\r\n            return delegate();\r\n          }\r\n        };\r\n      }\r\n    } // (stress) tested ;)\r\n\r\n----------\r\n\r\n\r\nAnother good(?) question: Where is that latest (&quot;current&quot;) [&quot;spring-javaconfig/docs&quot;][3]???\r\n\r\nsee also:\r\n\r\n- [1.4.6. Method Injection][5]\r\n- [Method Injection Article][6]\r\n- [1.5.3. Singleton Beans with Prototype-bean Dependencies][4]\r\n\r\n\r\n----------\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html\r\n  [2]: https://docs.spring.io/spring-javaconfig/docs/1.0.0.M4/reference/htmlsingle/spring-javaconfig-reference.html#method-injection\r\n  [3]: https://docs.spring.io/spring-javaconfig/docs/\r\n  [4]: https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-sing-prot-interaction\r\n  [5]: https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-method-injection\r\n  [6]: https://spring.io/blog/2004/08/06/method-injection/","title":"How to create a bean using @Bean annotation in Spring Boot for abstract class","body":"<p>When we <em>want to</em> instantiate an <code>abstract class</code> or an <code>interface</code> as a <code>@Bean</code> (<em>with <a href=\"/questions/tagged/spring-java-config\" class=\"post-tag\" title=\"show questions tagged &#39;spring-java-config&#39;\" rel=\"tag\">spring-java-config</a></em>), we can generally:</p>\n<ol>\n<li><p>Instantiate an <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html\" rel=\"nofollow noreferrer\">anonymous inner class</a>.</p>\n</li>\n<li><p>Override all abstract methods! ;(</p>\n</li>\n</ol>\n<p>So for a <a href=\"https://docs.spring.io/spring-javaconfig/docs/1.0.0.M4/reference/htmlsingle/spring-javaconfig-reference.html#method-injection\" rel=\"nofollow noreferrer\">Method injection</a>, it would look like:</p>\n<pre><code>@Configuration\nclass FreakyConfig {\n  @Bean\n  @RequestScope // !! (stateful)\n  public MyFooBarDelegate delegate() {\n    return MyFooBarDelegate.of(...);\n  }\n  @Bean // singleton, stateless, abstract (no spring deps.)! ;)\n  public MyFooBarAbstractSingletonBean() {\n    return new MyFooBarAbstractSingletonBean() { // anonymous inner class!\n      @Override\n      protected MyFooBarDelegate fooBarDelegate() { // ...and override the (injected)/prescribed methods.\n        return delegate();\n      }\n    };\n  }\n} // (stress) tested ;)\n</code></pre>\n<hr />\n<p>Another good(?) question: Where is that latest (&quot;current&quot;) <a href=\"https://docs.spring.io/spring-javaconfig/docs/\" rel=\"nofollow noreferrer\">&quot;spring-javaconfig/docs&quot;</a>???</p>\n<p>see also:</p>\n<ul>\n<li><a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-method-injection\" rel=\"nofollow noreferrer\">1.4.6. Method Injection</a></li>\n<li><a href=\"https://spring.io/blog/2004/08/06/method-injection/\" rel=\"nofollow noreferrer\">Method Injection Article</a></li>\n<li><a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-sing-prot-interaction\" rel=\"nofollow noreferrer\">1.5.3. Singleton Beans with Prototype-bean Dependencies</a></li>\n</ul>\n<hr />\n"}],"owner":{"account_id":1827567,"reputation":1054,"user_id":1659875,"display_name":"spandey"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33620,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"answer_count":4,"score":23,"last_activity_date":1695243497,"creation_date":1516876163,"question_id":48440669,"body_markdown":"I have requirement to migrate old style Spring project to Spring Boot.  Assume below code snippet I have to migrate to Spring Boot style.\r\n\r\nHere my ask , how to convert below abstract bean to `@Bean` ?  \r\n\r\n    &lt;bean id=&quot;sample&quot; class=&quot;com.test.core.common.AbstractClass&quot; abstract=&quot;true&quot;&gt;\r\n        &lt;property name=&quot;sample1&quot; ref=&quot;sample1&quot; /&gt;\r\n        &lt;property name=&quot;sample2&quot; ref=&quot;sample2&quot; /&gt;\r\n    &lt;/bean&gt;\r\n     ","title":"How to create a bean using @Bean annotation in Spring Boot for abstract class","body":"<p>I have requirement to migrate old style Spring project to Spring Boot.  Assume below code snippet I have to migrate to Spring Boot style.</p>\n<p>Here my ask , how to convert below abstract bean to <code>@Bean</code> ?</p>\n<pre><code>&lt;bean id=&quot;sample&quot; class=&quot;com.test.core.common.AbstractClass&quot; abstract=&quot;true&quot;&gt;\n    &lt;property name=&quot;sample1&quot; ref=&quot;sample1&quot; /&gt;\n    &lt;property name=&quot;sample2&quot; ref=&quot;sample2&quot; /&gt;\n&lt;/bean&gt;\n \n</code></pre>\n"},{"tags":["java","flutter","macos","android-studio","java-runtime-compiler"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1695210722,"post_id":77142127,"comment_id":135993192,"body_markdown":"install a second jdk and configure your ide to use that","body":"install a second jdk and configure your ide to use that"},{"owner":{"account_id":29397161,"reputation":21,"user_id":22524251,"display_name":"Jaimin Modi"},"score":0,"creation_date":1695211839,"post_id":77142127,"comment_id":135993425,"body_markdown":"@Stultuske How to install, can you please guide? I need to use it inside Android Studio.","body":"@Stultuske How to install, can you please guide? I need to use it inside Android Studio."},{"owner":{"account_id":25676050,"reputation":64,"user_id":19439460,"display_name":"nickklon"},"score":0,"creation_date":1695218344,"post_id":77142127,"comment_id":135995168,"body_markdown":"If you need Java 17 for other projects, jenv works great to manage multiple java versions https://github.com/jenv/jenv","body":"If you need Java 17 for other projects, jenv works great to manage multiple java versions <a href=\"https://github.com/jenv/jenv\" rel=\"nofollow noreferrer\">github.com/jenv/jenv</a>"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695241936,"creation_date":1695241271,"answer_id":77145720,"question_id":77142127,"body_markdown":"## Install another JDK\r\n\r\nYou can install multiple JDKs on your Mac. You can have a [JDK][1] for [Java 11][2] as well as a JDK for [Java 17][3]. And perhaps you might want another JDK for the new [Java 21][4] that arrived yesterday. These can all live together, side-by-side.\r\n\r\nEach JDK is just a folder full of files. **You can add JDKs, and delete JDKs, at will.** \r\n\r\nThe [environment variable][5] `JAVA_HOME` is a hint various software as to which JDK you would like to use by default.\r\n\r\nYou might find a feature within [*Android Studio*][6] to install another JDK. (At least the sibling product, IntelliJ, offers such a feature.)\r\n\r\n### Configure project\r\n\r\nWithin your project in *Android Studio*, you need to set some settings to indicate which of your installed JDKs should be used for compiling, building, and executing your app. See the *Android Studio* [documentation][7]. \r\n\r\n### *SDKMAN!*\r\n\r\nPersonally, I find it easiest to install [SDKMAN!][8], a bunch of [shell scripts][9] that manage installing/uninstalling JDKs (and other such kits). This works well on [macOS][10]. \r\n\r\nSDKMAN! is designed to be utterly simple to use.\r\n\r\nOn a console such as [*Terminal.app*][11], execute:\r\n\r\n - `sdk list java`&lt;br/&gt;See a list of all JDK products from vendors who chose to submit their data to the SDKMAN! database. From this list you copy the exact name of the JDK product you want to install. The list of products indicates any you have currently installed.\r\n - `sdk install java product_name_goes_here`&lt;br/&gt;Install the JDK product of your choosing. Takes a moment to download and install. At the end, SDKMAN! prompts you to specify whether you want to make this newly installed JDK the default.\r\n - `sdk uninstall java product_name_goes_here`&lt;br/&gt;Removes that particular JDK product from your Mac.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_Development_Kit\r\n  [2]: https://en.wikipedia.org/wiki/Java_version_history#Java_11\r\n  [3]: https://en.wikipedia.org/wiki/Java_version_history#Java_17\r\n  [4]: https://en.wikipedia.org/wiki/Java_version_history#Java_21\r\n  [5]: https://en.wikipedia.org/wiki/Environment_variable\r\n  [6]: https://en.wikipedia.org/wiki/Android_Studio\r\n  [7]: https://developer.android.com/studio\r\n  [8]: https://sdkman.io/\r\n  [9]: https://en.wikipedia.org/wiki/Shell_script\r\n  [10]: https://en.wikipedia.org/wiki/MacOS\r\n  [11]: https://en.wikipedia.org/wiki/Terminal_(macOS)","title":"How to downgrade Java version in Mac system?","body":"<h2>Install another JDK</h2>\n<p>You can install multiple JDKs on your Mac. You can have a <a href=\"https://en.wikipedia.org/wiki/Java_Development_Kit\" rel=\"nofollow noreferrer\">JDK</a> for <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_11\" rel=\"nofollow noreferrer\">Java 11</a> as well as a JDK for <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_17\" rel=\"nofollow noreferrer\">Java 17</a>. And perhaps you might want another JDK for the new <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_21\" rel=\"nofollow noreferrer\">Java 21</a> that arrived yesterday. These can all live together, side-by-side.</p>\n<p>Each JDK is just a folder full of files. <strong>You can add JDKs, and delete JDKs, at will.</strong></p>\n<p>The <a href=\"https://en.wikipedia.org/wiki/Environment_variable\" rel=\"nofollow noreferrer\">environment variable</a> <code>JAVA_HOME</code> is a hint various software as to which JDK you would like to use by default.</p>\n<p>You might find a feature within <a href=\"https://en.wikipedia.org/wiki/Android_Studio\" rel=\"nofollow noreferrer\"><em>Android Studio</em></a> to install another JDK. (At least the sibling product, IntelliJ, offers such a feature.)</p>\n<h3>Configure project</h3>\n<p>Within your project in <em>Android Studio</em>, you need to set some settings to indicate which of your installed JDKs should be used for compiling, building, and executing your app. See the <em>Android Studio</em> <a href=\"https://developer.android.com/studio\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n<h3><em>SDKMAN!</em></h3>\n<p>Personally, I find it easiest to install <a href=\"https://sdkman.io/\" rel=\"nofollow noreferrer\">SDKMAN!</a>, a bunch of <a href=\"https://en.wikipedia.org/wiki/Shell_script\" rel=\"nofollow noreferrer\">shell scripts</a> that manage installing/uninstalling JDKs (and other such kits). This works well on <a href=\"https://en.wikipedia.org/wiki/MacOS\" rel=\"nofollow noreferrer\">macOS</a>.</p>\n<p>SDKMAN! is designed to be utterly simple to use.</p>\n<p>On a console such as <a href=\"https://en.wikipedia.org/wiki/Terminal_(macOS)\" rel=\"nofollow noreferrer\"><em>Terminal.app</em></a>, execute:</p>\n<ul>\n<li><code>sdk list java</code><br/>See a list of all JDK products from vendors who chose to submit their data to the SDKMAN! database. From this list you copy the exact name of the JDK product you want to install. The list of products indicates any you have currently installed.</li>\n<li><code>sdk install java product_name_goes_here</code><br/>Install the JDK product of your choosing. Takes a moment to download and install. At the end, SDKMAN! prompts you to specify whether you want to make this newly installed JDK the default.</li>\n<li><code>sdk uninstall java product_name_goes_here</code><br/>Removes that particular JDK product from your Mac.</li>\n</ul>\n"}],"owner":{"account_id":29397161,"reputation":21,"user_id":22524251,"display_name":"Jaimin Modi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":321,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1695241936,"creation_date":1695210663,"question_id":77142127,"body_markdown":"I am using mac and inside mac using Android Stuidio, I have done all setup and now My project requires Java version 11 but currently I have Java version 17.\r\n\r\nI have checked Java version with this command as : **java --version** and it gives me below output in terminal : \r\n&gt; \r\n&gt; openjdk 17.0.6 2023-01-17\r\n&gt; OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b829.9-10027231)\r\n&gt; OpenJDK 64-Bit Server VM (build 17.0.6+0-17.0.6b829.9-10027231, mixed mode)\r\n\r\nHow can I change this to:\r\n\r\n**openjdk 11.0.20.1 2023-08-24**\r\n\r\n\r\n\r\nI have tried explain my issue and expecting the solution for that.","title":"How to downgrade Java version in Mac system?","body":"<p>I am using mac and inside mac using Android Stuidio, I have done all setup and now My project requires Java version 11 but currently I have Java version 17.</p>\n<p>I have checked Java version with this command as : <strong>java --version</strong> and it gives me below output in terminal :</p>\n<blockquote>\n<p>openjdk 17.0.6 2023-01-17\nOpenJDK Runtime Environment (build 17.0.6+0-17.0.6b829.9-10027231)\nOpenJDK 64-Bit Server VM (build 17.0.6+0-17.0.6b829.9-10027231, mixed mode)</p>\n</blockquote>\n<p>How can I change this to:</p>\n<p><strong>openjdk 11.0.20.1 2023-08-24</strong></p>\n<p>I have tried explain my issue and expecting the solution for that.</p>\n"},{"tags":["java","automation","cucumber"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1694571998,"post_id":77088942,"comment_id":135907594,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":29422577,"reputation":1,"user_id":22543998,"display_name":"Gabriel Dias"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695241910,"creation_date":1694520340,"question_id":77088942,"body_markdown":"I&#39;m running WEB automation with the maven command, Ex: mvn clean install .... tag and etc..\r\n\r\nSo far ok, no problems, but when I run the Allure server to see the report, it is doubling the test values.\r\n\r\n1. It is the feature file with the scenarios.\r\n\r\nThe 2. It&#39;s the surefire suite.\r\n\r\nHow can I prevent surefire suite from being generated?\r\n\r\nRemove the maven sufire","title":"Allure server is generating 2 reports - Cucumber and Surefire Suite","body":"<p>I'm running WEB automation with the maven command, Ex: mvn clean install .... tag and etc..</p>\n<p>So far ok, no problems, but when I run the Allure server to see the report, it is doubling the test values.</p>\n<ol>\n<li>It is the feature file with the scenarios.</li>\n</ol>\n<p>The 2. It's the surefire suite.</p>\n<p>How can I prevent surefire suite from being generated?</p>\n<p>Remove the maven sufire</p>\n"},{"tags":["java","android","gradle"],"answers":[{"tags":[],"owner":{"account_id":3766160,"reputation":2568,"user_id":3129644,"accept_rate":83,"display_name":"Andrew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695241462,"creation_date":1695241462,"answer_id":77145737,"question_id":77145736,"body_markdown":"This error arises due to a version mismatch between the JDK used by the Android Gradle Plugin (AGP) and the JDK that compiled certain classes in your project. Here&#39;s a breakdown of the issue and two potential solutions:\r\n\r\n## **Solution 1: Update JDK Version in Android Studio**\r\n\r\nIn Android Studio, go to &quot;Project Structure&quot;  &quot;Project&quot;  &quot;Gradle&quot;  &quot;Gradle JDK&quot; and choose or add a newer JDK version (like 17) that matches the requirements of the AGP version you are using.[![enter image description here][1]][1]\r\n\r\n\r\nBTW this solution may cause another issue. \r\n\r\n    The project is using an incompatible version (AGP 8.1.1) of the Android Gradle plugin. Latest supported version is AGP 7.3.0\r\n    See Android Studio &amp; AGP compatibility options.\r\nWhich means that Android Studio doesn&#39;t match the newest AGPT. This link [enter link description here][2] shows you that matching table Android Studio to AGP version.\r\n\r\nPlease note that modifying the JDK settings in Android Studio would only affect the current project, and it won&#39;t interfere with other projects that might be using different JDK versions.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/95VrX.png\r\n  [2]: https://developer.android.com/studio/releases#android_gradle_plugin_and_android_studio_compatibility\r\n\r\n## **Solution 2: Downgrade AGP and Related Plugins**\r\n\r\nModify your gradle-wrapper.properties file to specify a compatible Gradle distribution:\r\n\r\nBefore Change:\r\n\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-8.0-bin.zip\r\n\r\nAfter Change:\r\n\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-7.0.2-all.zip\r\n\r\nAdjust the versions of AGP and other plugins in your project-level build.gradle file:\r\n\r\nBefore Change:\r\n\r\n    plugins {\r\n        id &#39;com.android.application&#39; version &#39;8.1.1&#39; apply false\r\n        id &#39;com.android.library&#39; version &#39;8.1.1&#39; apply false\r\n        id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.6.0&#39; apply false\r\n    }\r\n\r\nAfter Change: \r\n\r\n    plugins {\r\n            id &#39;com.android.application&#39; version &#39;7.0.4&#39; apply false\r\n            id &#39;com.android.library&#39; version &#39;7.0.4&#39; apply false\r\n            id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.8.20&#39; apply false\r\n        }\r\n\r\nBy downgrading, you align the AGP version with the currently set default JDK version for your project, circumventing the compatibility issues without necessitating changes to the JDK setup.\r\n\r\n## **Understanding the Issue:**\r\n\r\nUnderstanding the Issue\r\nIn Android development, it&#39;s vital to recognize the distinction between the Java version used at the application level and the JDK version that the Android Gradle Plugin (AGP) utilizes during the build process. These two entities, though related, serve different purposes:\r\n\r\nJava Version at Application Level:\r\n\r\nThis version is specified in the build.gradle file at the app module level. It dictates the version of Java used to compile the code that will run on the Android device. This version doesn&#39;t have a direct correlation with the issue at hand. Here is an example of where you might specify the Java version in the app-level build.gradle file:\r\n\r\n    android {\r\n        compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_1_8\r\n            targetCompatibility JavaVersion.VERSION_1_8\r\n        }\r\n    }\r\n\r\nJDK Version Required by AGP:\r\n\r\nThe AGP, which runs on your development machine, requires a specific version of the JDK to function. This version is not necessarily the same as the Java version used to compile your application code. The error message you encountered pertains to this JDK version, which was incompatible with the AGP version you were using. Here is an example of where you might specify the AGP version in the project-level build.gradle file:\r\n\r\n    plugins {\r\n        id &#39;com.android.application&#39; version &#39;8.1.1&#39; apply false\r\n        id &#39;com.android.library&#39; version &#39;8.1.1&#39; apply false\r\n        id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.8.20&#39; apply false\r\n    }\r\n\r\nManaging JDK Versions in Android Studio:\r\n\r\nAGP versions have specific JDK version requirements. For instance, AGP version 8.0 mandates the use of JDK 17. However, you don&#39;t necessarily need to alter the global JAVA_HOME setting on your machine to meet this requirement. Android Studio allows you to specify the JDK version at the project level, meaning changes will only affect the current project and not interfere with others. You can adjust this in the Android Studio project structure settings, thereby preventing conflicts with other projects that may require different JDK versions.\r\n","title":"Android Studio Error: Incompatible Java Runtime Version while Using Android Gradle Plugin","body":"<p>This error arises due to a version mismatch between the JDK used by the Android Gradle Plugin (AGP) and the JDK that compiled certain classes in your project. Here's a breakdown of the issue and two potential solutions:</p>\n<h2><strong>Solution 1: Update JDK Version in Android Studio</strong></h2>\n<p>In Android Studio, go to &quot;Project Structure&quot;  &quot;Project&quot;  &quot;Gradle&quot;  &quot;Gradle JDK&quot; and choose or add a newer JDK version (like 17) that matches the requirements of the AGP version you are using.<a href=\"https://i.stack.imgur.com/95VrX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/95VrX.png\" alt=\"enter image description here\" /></a></p>\n<p>BTW this solution may cause another issue.</p>\n<pre><code>The project is using an incompatible version (AGP 8.1.1) of the Android Gradle plugin. Latest supported version is AGP 7.3.0\nSee Android Studio &amp; AGP compatibility options.\n</code></pre>\n<p>Which means that Android Studio doesn't match the newest AGPT. This link <a href=\"https://developer.android.com/studio/releases#android_gradle_plugin_and_android_studio_compatibility\" rel=\"nofollow noreferrer\">enter link description here</a> shows you that matching table Android Studio to AGP version.</p>\n<p>Please note that modifying the JDK settings in Android Studio would only affect the current project, and it won't interfere with other projects that might be using different JDK versions.</p>\n<h2><strong>Solution 2: Downgrade AGP and Related Plugins</strong></h2>\n<p>Modify your gradle-wrapper.properties file to specify a compatible Gradle distribution:</p>\n<p>Before Change:</p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-8.0-bin.zip\n</code></pre>\n<p>After Change:</p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-7.0.2-all.zip\n</code></pre>\n<p>Adjust the versions of AGP and other plugins in your project-level build.gradle file:</p>\n<p>Before Change:</p>\n<pre><code>plugins {\n    id 'com.android.application' version '8.1.1' apply false\n    id 'com.android.library' version '8.1.1' apply false\n    id 'org.jetbrains.kotlin.android' version '1.6.0' apply false\n}\n</code></pre>\n<p>After Change:</p>\n<pre><code>plugins {\n        id 'com.android.application' version '7.0.4' apply false\n        id 'com.android.library' version '7.0.4' apply false\n        id 'org.jetbrains.kotlin.android' version '1.8.20' apply false\n    }\n</code></pre>\n<p>By downgrading, you align the AGP version with the currently set default JDK version for your project, circumventing the compatibility issues without necessitating changes to the JDK setup.</p>\n<h2><strong>Understanding the Issue:</strong></h2>\n<p>Understanding the Issue\nIn Android development, it's vital to recognize the distinction between the Java version used at the application level and the JDK version that the Android Gradle Plugin (AGP) utilizes during the build process. These two entities, though related, serve different purposes:</p>\n<p>Java Version at Application Level:</p>\n<p>This version is specified in the build.gradle file at the app module level. It dictates the version of Java used to compile the code that will run on the Android device. This version doesn't have a direct correlation with the issue at hand. Here is an example of where you might specify the Java version in the app-level build.gradle file:</p>\n<pre><code>android {\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n</code></pre>\n<p>JDK Version Required by AGP:</p>\n<p>The AGP, which runs on your development machine, requires a specific version of the JDK to function. This version is not necessarily the same as the Java version used to compile your application code. The error message you encountered pertains to this JDK version, which was incompatible with the AGP version you were using. Here is an example of where you might specify the AGP version in the project-level build.gradle file:</p>\n<pre><code>plugins {\n    id 'com.android.application' version '8.1.1' apply false\n    id 'com.android.library' version '8.1.1' apply false\n    id 'org.jetbrains.kotlin.android' version '1.8.20' apply false\n}\n</code></pre>\n<p>Managing JDK Versions in Android Studio:</p>\n<p>AGP versions have specific JDK version requirements. For instance, AGP version 8.0 mandates the use of JDK 17. However, you don't necessarily need to alter the global JAVA_HOME setting on your machine to meet this requirement. Android Studio allows you to specify the JDK version at the project level, meaning changes will only affect the current project and not interfere with others. You can adjust this in the Android Studio project structure settings, thereby preventing conflicts with other projects that may require different JDK versions.</p>\n"}],"owner":{"account_id":3766160,"reputation":2568,"user_id":3129644,"accept_rate":83,"display_name":"Andrew"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":502,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695241462,"creation_date":1695241462,"question_id":77145736,"body_markdown":"I encountered an issue while working on my Android project. During the build process, Android Studio threw the following error:\r\n\r\n    An exception occurred applying plugin request [id: &#39;com.android.application&#39;]\r\n    &gt; Failed to apply plugin &#39;com.android.internal.application&#39;.\r\n       &gt; Could not create an instance of type com.android.build.gradle.internal.dsl.ApplicationExtensionImpl$AgpDecorated.\r\n          &gt; Could not create an instance of type com.android.build.gradle.internal.dsl.LintImpl$AgpDecorated.\r\n             &gt; Could not generate a decorated class for type LintImpl$AgpDecorated.\r\n                &gt; com/android/tools/lint/model/LintModelSeverity has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 55.0\r\n\r\n\r\n**gradle-wrapper.properties**\r\n\r\n    distributionBase=GRADLE_USER_HOME\r\n    distributionPath=wrapper/dists\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-8.0-bin.zip\r\n    zipStoreBase=GRADLE_USER_HOME\r\n    zipStorePath=wrapper/dists\r\n\r\n**Project Level build.gradle**\r\n\r\n    plugins {\r\n        id &#39;com.android.application&#39; version &#39;8.1.1&#39; apply false\r\n        id &#39;com.android.library&#39; version &#39;8.1.1&#39; apply false\r\n        id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.8.20&#39; apply false\r\n    }\r\n\r\n**Java Version in Use**\r\nJDK 11.0.13 (as indicated in the project structure; accessible via &quot;Project Structure&quot; &gt; &quot;Project&quot; &gt; &quot;Gradle JDK&quot;)\r\n\r\nHow to fix this compatibility issue.\r\n","title":"Android Studio Error: Incompatible Java Runtime Version while Using Android Gradle Plugin","body":"<p>I encountered an issue while working on my Android project. During the build process, Android Studio threw the following error:</p>\n<pre><code>An exception occurred applying plugin request [id: 'com.android.application']\n&gt; Failed to apply plugin 'com.android.internal.application'.\n   &gt; Could not create an instance of type com.android.build.gradle.internal.dsl.ApplicationExtensionImpl$AgpDecorated.\n      &gt; Could not create an instance of type com.android.build.gradle.internal.dsl.LintImpl$AgpDecorated.\n         &gt; Could not generate a decorated class for type LintImpl$AgpDecorated.\n            &gt; com/android/tools/lint/model/LintModelSeverity has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 55.0\n</code></pre>\n<p><strong>gradle-wrapper.properties</strong></p>\n<pre><code>distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-8.0-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n</code></pre>\n<p><strong>Project Level build.gradle</strong></p>\n<pre><code>plugins {\n    id 'com.android.application' version '8.1.1' apply false\n    id 'com.android.library' version '8.1.1' apply false\n    id 'org.jetbrains.kotlin.android' version '1.8.20' apply false\n}\n</code></pre>\n<p><strong>Java Version in Use</strong>\nJDK 11.0.13 (as indicated in the project structure; accessible via &quot;Project Structure&quot; &gt; &quot;Project&quot; &gt; &quot;Gradle JDK&quot;)</p>\n<p>How to fix this compatibility issue.</p>\n"},{"tags":["java","android","android-studio","telephony"],"owner":{"account_id":15182528,"reputation":1,"user_id":10955467,"display_name":"asbbafb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695241255,"creation_date":1695241255,"question_id":77145716,"body_markdown":"I am working on an android app using the Telephony library built into the android SDK to test emergency alerts. I have a bunch of import statements.\r\n\r\nSuch as\r\n\r\n```\r\nimport com.android.cellbroadcastservice.CbGeoUtils;\r\nimport com.android.cellbroadcastservice.GsmAlphabet;\r\nimport com.android.cellbroadcastservice.SmsCbHeader;\r\nimport com.android.cellbroadcastservice.SmsCbHeader.DataCodingScheme;\r\nimport com.android.internal.telephony.SmsConstants;\r\nimport android.telephony.CbGeoUtils.Circle;\r\nimport android.telephony.CbGeoUtils.Geometry;\r\nimport android.telephony.CbGeoUtils.LatLng;\r\nimport android.telephony.CbGeoUtils.Polygon;\r\nimport android.telephony.Rlog;\r\nimport android.telephony.SmsCbLocation;\r\nimport android.telephony.SmsCbMessage;\r\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_EARTHQUAKE;\r\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_EARTHQUAKE_AND_TSUNAMI;\r\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_OTHER_EMERGENCY;\r\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_TEST_MESSAGE;\r\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_TSUNAMI;\r\n\r\n```\r\n\r\nHowever, these all show up as red and say that they cannot find the symbol after the telephony import. Some modules do exist, such as \r\n\r\n`import android.telephony.SubscriptionManager;`\r\n\r\n\r\nwhich works without problem.\r\n\r\n\r\nBuilding also gives me the error \r\n\r\n\r\n```\r\nerror: cannot find symbol\r\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_EARTHQUAKE;\r\n                               ^\r\n  symbol:   class SmsCbEtwsInfo\r\n  location: package android.telephony\r\n```\r\n\r\nSo I am rather stuck. I went into my SDK folder and files such as SmsCbEtwsInfo.java were in the telephony folder, along with other modules I could access. So I have no idea why I can&#39;t seem to import these specific modules. I have tried researching for similar instances of this but to no avail\r\n\r\n\r\n\r\n\r\nI also tried Invalidating and restarting the cache","title":"Android Studio - Cannot resolve symbol SmsCbEtwsInfo among others","body":"<p>I am working on an android app using the Telephony library built into the android SDK to test emergency alerts. I have a bunch of import statements.</p>\n<p>Such as</p>\n<pre><code>import com.android.cellbroadcastservice.CbGeoUtils;\nimport com.android.cellbroadcastservice.GsmAlphabet;\nimport com.android.cellbroadcastservice.SmsCbHeader;\nimport com.android.cellbroadcastservice.SmsCbHeader.DataCodingScheme;\nimport com.android.internal.telephony.SmsConstants;\nimport android.telephony.CbGeoUtils.Circle;\nimport android.telephony.CbGeoUtils.Geometry;\nimport android.telephony.CbGeoUtils.LatLng;\nimport android.telephony.CbGeoUtils.Polygon;\nimport android.telephony.Rlog;\nimport android.telephony.SmsCbLocation;\nimport android.telephony.SmsCbMessage;\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_EARTHQUAKE;\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_EARTHQUAKE_AND_TSUNAMI;\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_OTHER_EMERGENCY;\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_TEST_MESSAGE;\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_TSUNAMI;\n\n</code></pre>\n<p>However, these all show up as red and say that they cannot find the symbol after the telephony import. Some modules do exist, such as</p>\n<p><code>import android.telephony.SubscriptionManager;</code></p>\n<p>which works without problem.</p>\n<p>Building also gives me the error</p>\n<pre><code>error: cannot find symbol\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_EARTHQUAKE;\n                               ^\n  symbol:   class SmsCbEtwsInfo\n  location: package android.telephony\n</code></pre>\n<p>So I am rather stuck. I went into my SDK folder and files such as SmsCbEtwsInfo.java were in the telephony folder, along with other modules I could access. So I have no idea why I can't seem to import these specific modules. I have tried researching for similar instances of this but to no avail</p>\n<p>I also tried Invalidating and restarting the cache</p>\n"},{"tags":["java","class","parameters","constructor","properties"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1695240274,"post_id":77145611,"comment_id":135999714,"body_markdown":"Does it make a _technical_ difference? No. Does it make _any_ difference? Yes. Naming the constructor parameter `color` makes it clear what that parameter means. Readability is always important.","body":"Does it make a <i>technical</i> difference? No. Does it make <i>any</i> difference? Yes. Naming the constructor parameter <code>color</code> makes it clear what that parameter means. Readability is always important."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1695240475,"post_id":77145611,"comment_id":135999759,"body_markdown":"Technically it makes no difference, but if you have a class `Car` with properties `color`, `maxSpeed`  and `brand` and a constructor of that class with parameters `param1`, `param2` and `param3`:  do you know what parameter sets which property? Is `param1` the `color`, the `maxSpeed` or the `brand`? If one parameter is a distinct type that may help, but for the other parameters you are lost.","body":"Technically it makes no difference, but if you have a class <code>Car</code> with properties <code>color</code>, <code>maxSpeed</code>  and <code>brand</code> and a constructor of that class with parameters <code>param1</code>, <code>param2</code> and <code>param3</code>:  do you know what parameter sets which property? Is <code>param1</code> the <code>color</code>, the <code>maxSpeed</code> or the <code>brand</code>? If one parameter is a distinct type that may help, but for the other parameters you are lost."},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1695240702,"post_id":77145611,"comment_id":135999791,"body_markdown":"In general I hate having constructors with parameters and prefer using POJOs instead. IMO if you&#39;ve already got getter and setter methods, constructors with parameters are unnecessary.","body":"In general I hate having constructors with parameters and prefer using POJOs instead. IMO if you&#39;ve already got getter and setter methods, constructors with parameters are unnecessary."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1695244484,"post_id":77145611,"comment_id":136000346,"body_markdown":"Who the heck has setter methods?","body":"Who the heck has setter methods?"}],"answers":[{"tags":[],"owner":{"account_id":3588984,"reputation":115,"user_id":2995460,"display_name":"anteastra"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695240754,"creation_date":1695240754,"answer_id":77145675,"question_id":77145611,"body_markdown":"If class has field and there is parameter in a method with same name then happens &quot;shadowing&quot;, meaning that in that part of code you can access field of the class with &quot;this.&quot; reference. Your code will work. For better readability and better code culture you should have same names for constructor parameters and fields.","title":"Do the parameters of a constructor in Java have any connection with the properties of the class?","body":"<p>If class has field and there is parameter in a method with same name then happens &quot;shadowing&quot;, meaning that in that part of code you can access field of the class with &quot;this.&quot; reference. Your code will work. For better readability and better code culture you should have same names for constructor parameters and fields.</p>\n"},{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1695241028,"creation_date":1695241028,"answer_id":77145698,"question_id":77145611,"body_markdown":"**No, the parameters dont have any connection with the properties of the class**. \r\n\r\nBut, *does it make a difference*? Well, **yes and no**. Let me explain:\r\n\r\n```java\r\nprivate String color;\r\nprivate int maxSpeed;\r\nprivate String brand;\r\n\r\npublic Car(String somevar, int somevar2, String somevar3) {\r\n\tthis.color = somevar;\r\n\tthis.maxSpeed = somevar2;\r\n\tthis.brand = somevar3;\r\n}\r\n```\r\n\r\n**Technically** code this way doesn&#39;t make difference, it will works fine.\r\n\r\nBut, imagine that someone - *not you* - created the `Car` class, and you will use it:\r\n\r\n[![weird IDE suggestions][1]][1]\r\n\r\nReading the IDE suggestions, **can you understood what each parameter means**? Probably no.\r\n\r\nSo, you don&#39;t need to use the same name of the fields in the parameters, **but it will make your code be more readable and understandable**.\r\n\r\n  [1]: https://i.stack.imgur.com/6fmzf.png","title":"Do the parameters of a constructor in Java have any connection with the properties of the class?","body":"<p><strong>No, the parameters dont have any connection with the properties of the class</strong>.</p>\n<p>But, <em>does it make a difference</em>? Well, <strong>yes and no</strong>. Let me explain:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private String color;\nprivate int maxSpeed;\nprivate String brand;\n\npublic Car(String somevar, int somevar2, String somevar3) {\n    this.color = somevar;\n    this.maxSpeed = somevar2;\n    this.brand = somevar3;\n}\n</code></pre>\n<p><strong>Technically</strong> code this way doesn't make difference, it will works fine.</p>\n<p>But, imagine that someone - <em>not you</em> - created the <code>Car</code> class, and you will use it:</p>\n<p><a href=\"https://i.stack.imgur.com/6fmzf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6fmzf.png\" alt=\"weird IDE suggestions\" /></a></p>\n<p>Reading the IDE suggestions, <strong>can you understood what each parameter means</strong>? Probably no.</p>\n<p>So, you don't need to use the same name of the fields in the parameters, <strong>but it will make your code be more readable and understandable</strong>.</p>\n"}],"owner":{"account_id":19961607,"reputation":5,"user_id":14629073,"display_name":"Ruben Virtic"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77145698,"answer_count":2,"score":0,"last_activity_date":1695241028,"creation_date":1695240055,"question_id":77145611,"body_markdown":"I&#39;m confused...\r\n\r\n```\r\npackage car;\r\n\r\npublic class Car {\r\n\r\n    private String color;\r\n    private int maxSpeed;\r\n    private String brand;\r\n\r\n    public Car(String somethingElse, int maxSpeed, String brand) {\r\n       this.color = somethingElse;\r\n       this.maxSpeed = maxSpeed;\r\n       this.brand = brand;\r\n    }\r\n\r\n    public String getColor() {\r\n        return color;\r\n    }\r\n\r\n    public void setColor(String color) {\r\n        this.color = color;\r\n    }\r\n\r\n    public int getMaxSpeed() {\r\n        return maxSpeed;\r\n    }\r\n\r\n    public void setMaxSpeed(int maxSpeed) {\r\n        this.maxSpeed = maxSpeed;\r\n    }\r\n\r\n    public String getBrand() {\r\n        return brand;\r\n    }\r\n\r\n    public void setBrand(String brand) {\r\n        this.brand = brand;\r\n    }\r\n\r\n}\r\n```\r\n\r\nI&#39;ve got this class right here and my question is do the parameters of the constructor have any connection with the properties of the class? Someone tried to convince me that the parameter of the constructor must have the same name as the property of the class. So I tried to change the name of the parameter from &quot;color&quot; to &quot;somethingElse&quot; and it seems to work... Why?\r\n\r\nWhat I know is that the &quot;this&quot; keyword is used to make it clear to the compiler that with &quot;this.color&quot; I&#39;m refering to the property &quot;color&quot; of the class. And with &quot;= color&quot; I&#39;m assigning the constructor&#39;s parameter color to the object&#39;s property color. But what should I do now? Should I name the constructor&#39;s parameter to &quot;color&quot; instead of &quot;somethingElse&quot;? And does it make a difference?\r\n\r\n**I&#39;m a beginner!** I know professionals might think my question is &quot;stupid&quot;.","title":"Do the parameters of a constructor in Java have any connection with the properties of the class?","body":"<p>I'm confused...</p>\n<pre><code>package car;\n\npublic class Car {\n\n    private String color;\n    private int maxSpeed;\n    private String brand;\n\n    public Car(String somethingElse, int maxSpeed, String brand) {\n       this.color = somethingElse;\n       this.maxSpeed = maxSpeed;\n       this.brand = brand;\n    }\n\n    public String getColor() {\n        return color;\n    }\n\n    public void setColor(String color) {\n        this.color = color;\n    }\n\n    public int getMaxSpeed() {\n        return maxSpeed;\n    }\n\n    public void setMaxSpeed(int maxSpeed) {\n        this.maxSpeed = maxSpeed;\n    }\n\n    public String getBrand() {\n        return brand;\n    }\n\n    public void setBrand(String brand) {\n        this.brand = brand;\n    }\n\n}\n</code></pre>\n<p>I've got this class right here and my question is do the parameters of the constructor have any connection with the properties of the class? Someone tried to convince me that the parameter of the constructor must have the same name as the property of the class. So I tried to change the name of the parameter from &quot;color&quot; to &quot;somethingElse&quot; and it seems to work... Why?</p>\n<p>What I know is that the &quot;this&quot; keyword is used to make it clear to the compiler that with &quot;this.color&quot; I'm refering to the property &quot;color&quot; of the class. And with &quot;= color&quot; I'm assigning the constructor's parameter color to the object's property color. But what should I do now? Should I name the constructor's parameter to &quot;color&quot; instead of &quot;somethingElse&quot;? And does it make a difference?</p>\n<p><strong>I'm a beginner!</strong> I know professionals might think my question is &quot;stupid&quot;.</p>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":2,"creation_date":1488526462,"post_id":42573120,"comment_id":72279488,"body_markdown":"Valid JSON doesn&#39;t have duplicate keys, so a parsing library shouldn&#39;t work the way you&#39;re asking","body":"Valid JSON doesn&#39;t have duplicate keys, so a parsing library shouldn&#39;t work the way you&#39;re asking"},{"owner":{"account_id":1223725,"reputation":5602,"user_id":1189800,"display_name":"Chetan Joshi"},"score":0,"creation_date":1488528134,"post_id":42573120,"comment_id":72280277,"body_markdown":"SyntaxError: Duplicate key &#39;a&#39; on line 3","body":"SyntaxError: Duplicate key &#39;a&#39; on line 3"},{"owner":{"account_id":222337,"reputation":176,"user_id":480857,"display_name":"Justin Dennahower"},"score":2,"creation_date":1581972135,"post_id":42573120,"comment_id":106608515,"body_markdown":"duplicate keys is valid json. https://tools.ietf.org/html/rfc7159 &quot;The names within an object SHOULD be unique&quot;, not required to be unique.","body":"duplicate keys is valid json. <a href=\"https://tools.ietf.org/html/rfc7159\" rel=\"nofollow noreferrer\">tools.ietf.org/html/rfc7159</a> &quot;The names within an object SHOULD be unique&quot;, not required to be unique."},{"owner":{"account_id":466379,"reputation":17103,"user_id":871096,"accept_rate":52,"display_name":"Robert Dodier"},"score":1,"creation_date":1611560807,"post_id":42573120,"comment_id":116480934,"body_markdown":"@OneCricketeer I dunno. ECMA-404 (linked from json.org) says: &quot;The JSON syntax does not impose any restrictions on the strings used as names, does not require that name strings be unique, and does not assign any significance to the ordering of name/value pairs. These are all semantic considerations that may be defined by JSON processors or in specifications defining specific uses of JSON for data interchange.&quot;","body":"@OneCricketeer I dunno. ECMA-404 (linked from json.org) says: &quot;The JSON syntax does not impose any restrictions on the strings used as names, does not require that name strings be unique, and does not assign any significance to the ordering of name/value pairs. These are all semantic considerations that may be defined by JSON processors or in specifications defining specific uses of JSON for data interchange.&quot;"}],"answers":[{"tags":[],"owner":{"account_id":5953740,"reputation":6324,"user_id":4681060,"accept_rate":75,"display_name":"Krzysztof Cichocki"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1695240843,"creation_date":1488527800,"answer_id":42573515,"question_id":42573120,"body_markdown":"In the Jackson library you can read the JSON message token by token in a streaming way, then it would not eat anything from the message.","title":"Parsing a json which contains duplicate keys","body":"<p>In the Jackson library you can read the JSON message token by token in a streaming way, then it would not eat anything from the message.</p>\n"},{"tags":[],"owner":{"account_id":1735752,"reputation":2511,"user_id":1588361,"accept_rate":54,"display_name":"Ravi MCA"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1611560065,"creation_date":1488531774,"answer_id":42574594,"question_id":42573120,"body_markdown":"If you are flexible with json library you can make use of `net.sf.json.JSONObject`.\r\n\r\nThis library will retain the duplicated values by storing them into arrays. If multiple same keys are available it will create one key with all the values as Array.\r\n\r\nAnd also the coding part is just a single line. Once you parsed the json using net.sf.json.JSONObject then you can supply this to jackson library.\r\n    \r\n    JSONObject jsonObject = JSONObject.fromObject( &quot;{ \\&quot;a\\&quot;: \\&quot;a\\&quot;, \\&quot;a\\&quot;: { \\&quot;b\\&quot;: {},\\&quot;b\\&quot;: true}}&quot; );\r\n    \r\n    System.out.println( &quot;net.sf.json.JSONObject: &quot; + jsonObject );\r\n    \r\n    JsonNode jsonNode = new ObjectMapper().readTree( jsonObject.toString() );\r\n    \r\n    System.out.println( &quot;com.fasterxml.jackson.databind.JsonNode&quot; + jsonNode );\r\n\r\n\r\n**Output:** \r\n\r\n    net.sf.json.JSONObject: {&quot;a&quot;:[&quot;a&quot;,{&quot;b&quot;:[{},true]}]}\r\n    com.fasterxml.jackson.databind.JsonNode{&quot;a&quot;:[&quot;a&quot;,{&quot;b&quot;:[{},true]}]}\r\n\r\n\r\n**Maven dependency of `net.sf.json`**\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;net.sf.json-lib&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;json-lib&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.4&lt;/version&gt;\r\n    \t&lt;classifier&gt;jdk15&lt;/classifier&gt;\r\n    &lt;/dependency&gt;","title":"Parsing a json which contains duplicate keys","body":"<p>If you are flexible with json library you can make use of <code>net.sf.json.JSONObject</code>.</p>\n<p>This library will retain the duplicated values by storing them into arrays. If multiple same keys are available it will create one key with all the values as Array.</p>\n<p>And also the coding part is just a single line. Once you parsed the json using net.sf.json.JSONObject then you can supply this to jackson library.</p>\n<pre><code>JSONObject jsonObject = JSONObject.fromObject( &quot;{ \\&quot;a\\&quot;: \\&quot;a\\&quot;, \\&quot;a\\&quot;: { \\&quot;b\\&quot;: {},\\&quot;b\\&quot;: true}}&quot; );\n\nSystem.out.println( &quot;net.sf.json.JSONObject: &quot; + jsonObject );\n\nJsonNode jsonNode = new ObjectMapper().readTree( jsonObject.toString() );\n\nSystem.out.println( &quot;com.fasterxml.jackson.databind.JsonNode&quot; + jsonNode );\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>net.sf.json.JSONObject: {&quot;a&quot;:[&quot;a&quot;,{&quot;b&quot;:[{},true]}]}\ncom.fasterxml.jackson.databind.JsonNode{&quot;a&quot;:[&quot;a&quot;,{&quot;b&quot;:[{},true]}]}\n</code></pre>\n<p><strong>Maven dependency of <code>net.sf.json</code></strong></p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;net.sf.json-lib&lt;/groupId&gt;\n    &lt;artifactId&gt;json-lib&lt;/artifactId&gt;\n    &lt;version&gt;2.4&lt;/version&gt;\n    &lt;classifier&gt;jdk15&lt;/classifier&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":3970188,"reputation":1992,"user_id":3274974,"accept_rate":85,"display_name":"Edd"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12568,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":42574594,"answer_count":2,"score":8,"last_activity_date":1695240843,"creation_date":1488526320,"question_id":42573120,"body_markdown":"I&#39;m trying to parse json with invalid structure which has duplicate keys using `Jackson` library. If a json has duplicate keys, I would like to extract them as a `Collection`. \r\n\r\nExample of what I&#39;m trying to parse (the actual json that I&#39;m trying to parse comes from `Wireshark` json export):\r\n\r\n    {\r\n        &quot;a&quot;: &quot;a&quot;,\r\n        &quot;a&quot;: {\r\n            &quot;b&quot;: {\r\n            \r\n            },\r\n            &quot;b&quot;: true\r\n        }\r\n    }\r\n\r\nHowever, since this json has duplicate keys, only the last value is retained:\r\n\r\n    JsonNode tree = new ObjectMapper().readTree(json);\r\n    System.out.println(tree); // {&quot;a&quot;:{&quot;b&quot;:true}}\r\n\r\nI&#39;ve also tried the `Guava` module which has `Multimap` support, however it doesn&#39;t work as expected for nested json objects. \r\n\r\nExample using Guava module for the json that I have shown before:\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    mapper.registerModule(new GuavaModule());\r\n    mapper.configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true);\r\n\r\n    Multimap read = mapper.readValue(json, Multimap.class);\r\n    System.out.println(read); // {a=[a, {b=true}]}\r\n\r\nHow should I tackle this problem using `Jackson` library? Are there any other libraries which would support parsing of such json structure for java?","title":"Parsing a json which contains duplicate keys","body":"<p>I'm trying to parse json with invalid structure which has duplicate keys using <code>Jackson</code> library. If a json has duplicate keys, I would like to extract them as a <code>Collection</code>. </p>\n\n<p>Example of what I'm trying to parse (the actual json that I'm trying to parse comes from <code>Wireshark</code> json export):</p>\n\n<pre><code>{\n    \"a\": \"a\",\n    \"a\": {\n        \"b\": {\n\n        },\n        \"b\": true\n    }\n}\n</code></pre>\n\n<p>However, since this json has duplicate keys, only the last value is retained:</p>\n\n<pre><code>JsonNode tree = new ObjectMapper().readTree(json);\nSystem.out.println(tree); // {\"a\":{\"b\":true}}\n</code></pre>\n\n<p>I've also tried the <code>Guava</code> module which has <code>Multimap</code> support, however it doesn't work as expected for nested json objects. </p>\n\n<p>Example using Guava module for the json that I have shown before:</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nmapper.registerModule(new GuavaModule());\nmapper.configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true);\n\nMultimap read = mapper.readValue(json, Multimap.class);\nSystem.out.println(read); // {a=[a, {b=true}]}\n</code></pre>\n\n<p>How should I tackle this problem using <code>Jackson</code> library? Are there any other libraries which would support parsing of such json structure for java?</p>\n"},{"tags":["java","json"],"answers":[{"tags":[],"owner":{"account_id":8305547,"reputation":140,"user_id":6242707,"accept_rate":50,"display_name":"higz555"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527591888,"creation_date":1527591888,"answer_id":50582793,"question_id":50582743,"body_markdown":"You need to stringify your JSON object\r\n\r\n    a.toString()","title":"Parsing json with duplicate keys","body":"<p>You need to stringify your JSON object</p>\n\n<pre><code>a.toString()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2510547,"reputation":395,"user_id":2183141,"display_name":"Ravi Sapariya"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1527593673,"creation_date":1527593673,"answer_id":50583370,"question_id":50582743,"body_markdown":"If you do not have a constraint to use external JSON library than you can use `net.sf.json.JSONObject` to parse your JSON string, It will accept JSON with the duplicate key. It will retain the duplicated values by storing them into arrays.\r\n\r\n    JSONObject jsonObject = JSONObject.fromObject( &quot;{\\&quot;Data\\&quot;: {\\&quot;A\\&quot;: {\\&quot;B\\&quot;: {\\&quot;C\\&quot;: \\&quot;c\\&quot;,\\&quot;D\\&quot;: {}},\\&quot;E\\&quot;: {\\&quot;F\\&quot;: \\&quot;f\\&quot;},\\&quot;G\\&quot;: {\\&quot;H\\&quot;: \\&quot;h\\&quot;}},\\&quot;A\\&quot;: {\\&quot;B\\&quot;: {\\&quot;C\\&quot;: \\&quot;x\\&quot;,\\&quot;D\\&quot;: {}},\\&quot;E\\&quot;: {\\&quot;F\\&quot;: \\&quot;y\\&quot;},\\&quot;G\\&quot;: {\\&quot;H\\&quot;: \\&quot;z\\&quot;}}}}&quot; );\r\n    System.out.println( &quot;net.sf.json.JSONObject: &quot; + jsonObject );\r\n\r\n","title":"Parsing json with duplicate keys","body":"<p>If you do not have a constraint to use external JSON library than you can use <code>net.sf.json.JSONObject</code> to parse your JSON string, It will accept JSON with the duplicate key. It will retain the duplicated values by storing them into arrays.</p>\n\n<pre><code>JSONObject jsonObject = JSONObject.fromObject( \"{\\\"Data\\\": {\\\"A\\\": {\\\"B\\\": {\\\"C\\\": \\\"c\\\",\\\"D\\\": {}},\\\"E\\\": {\\\"F\\\": \\\"f\\\"},\\\"G\\\": {\\\"H\\\": \\\"h\\\"}},\\\"A\\\": {\\\"B\\\": {\\\"C\\\": \\\"x\\\",\\\"D\\\": {}},\\\"E\\\": {\\\"F\\\": \\\"y\\\"},\\\"G\\\": {\\\"H\\\": \\\"z\\\"}}}}\" );\nSystem.out.println( \"net.sf.json.JSONObject: \" + jsonObject );\n</code></pre>\n"}],"owner":{"account_id":13671230,"reputation":21,"user_id":9863842,"display_name":"sman001"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1925,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1695240786,"creation_date":1527591717,"question_id":50582743,"body_markdown":"I am trying to parse JSON file which contains duplicate keys in Java. I am using the method suggested in this answer https://stackoverflow.com/questions/42573120/parsing-a-json-which-contains-duplicate-keys.\r\n\r\nThe approach works fine if I hard-code the JSON but if I read it from a file,only the last duplicate key is read.\r\n\r\nCode:\r\n\r\n\r\n    public class am {\r\n        public static  void main(String args[]) throws Exception\r\n        {\r\n            JSONParser parser = new JSONParser();\r\n    \r\n    \r\n            Object obj = parser.parse(new FileReader(&quot;sample.json&quot;));\r\n    \r\n            JSONObject a=JSONObject.fromObject(obj);\r\n            JSONObject jsonObject=JSONObject.fromObject(&quot;{\\n&quot; +\r\n                    &quot;  \\&quot;Data\\&quot;: {\\n&quot; +\r\n                    &quot;    \\&quot;A\\&quot;: {\\n&quot; +\r\n                    &quot;      \\&quot;B\\&quot;: {\\n&quot; +\r\n                    &quot;        \\&quot;C\\&quot;: \\&quot;c\\&quot;,\\n&quot; +\r\n                    &quot;        \\&quot;D\\&quot;: {}\\n&quot; +\r\n                    &quot;      },\\n&quot; +\r\n                    &quot;      \\&quot;E\\&quot;: {\\n&quot; +\r\n                    &quot;        \\&quot;F\\&quot;: \\&quot;f\\&quot;\\n&quot; +\r\n                    &quot;      },\\n&quot; +\r\n                    &quot;      \\&quot;G\\&quot;: {\\n&quot; +\r\n                    &quot;        \\&quot;H\\&quot;: \\&quot;h\\&quot;\\n&quot; +\r\n                    &quot;      }\\n&quot; +\r\n                    &quot;    },\\&quot;A\\&quot;: {\\n&quot; +\r\n                    &quot;      \\&quot;B\\&quot;: {\\n&quot; +\r\n                    &quot;        \\&quot;C\\&quot;: \\&quot;x\\&quot;,\\n&quot; +\r\n                    &quot;        \\&quot;D\\&quot;: {}\\n&quot; +\r\n                    &quot;      },\\n&quot; +\r\n                    &quot;      \\&quot;E\\&quot;: {\\n&quot; +\r\n                    &quot;        \\&quot;F\\&quot;: \\&quot;y\\&quot;\\n&quot; +\r\n                    &quot;      },\\n&quot; +\r\n                    &quot;      \\&quot;G\\&quot;: {\\n&quot; +\r\n                    &quot;        \\&quot;H\\&quot;: \\&quot;z\\&quot;\\n&quot; +\r\n                    &quot;      }\\n&quot; +\r\n                    &quot;    },\\n&quot; +\r\n                    &quot;    \r\n                    &quot;\\n&quot; +\r\n                    &quot;  }\\n&quot; +\r\n                    &quot;}&quot;);\r\n            System.out.println(&quot;Json objects are:::&quot;+a);\r\n            System.out.println(&quot;Json objects are:::&quot;+jsonObject);\r\n           \r\n        }\r\n    }\r\n\r\nJson File:\r\n\r\n    {\r\n      &quot;Data&quot;: {\r\n        &quot;A&quot;: {\r\n          &quot;B&quot;: {\r\n            &quot;C&quot;: &quot;c&quot;,\r\n            &quot;D&quot;: {}\r\n          },\r\n          &quot;E&quot;: {\r\n            &quot;F&quot;: &quot;f&quot;\r\n          },\r\n          &quot;G&quot;: {\r\n            &quot;H&quot;: &quot;h&quot;\r\n          }\r\n        },&quot;A&quot;: {\r\n          &quot;B&quot;: {\r\n            &quot;C&quot;: &quot;x&quot;,\r\n            &quot;D&quot;: {}\r\n          },\r\n          &quot;E&quot;: {\r\n            &quot;F&quot;: &quot;y&quot;\r\n          },\r\n          &quot;G&quot;: {\r\n            &quot;H&quot;: &quot;z&quot;\r\n          }\r\n        },\r\n        \r\n      }\r\n    }\r\n\r\nOutput:\r\n\r\n    Json objects are:::{&quot;Data&quot;:{&quot;A&quot;:{&quot;B&quot;:{&quot;C&quot;:&quot;x&quot;,&quot;D&quot;:{}},&quot;E&quot;:{&quot;F&quot;:&quot;y&quot;},&quot;G&quot;:{&quot;H&quot;:&quot;z&quot;}}}}\r\n    Json objects are:::{&quot;Data&quot;:{&quot;A&quot;:[{&quot;B&quot;:{&quot;C&quot;:&quot;c&quot;,&quot;D&quot;:{}},&quot;E&quot;:{&quot;F&quot;:&quot;f&quot;},&quot;G&quot;:{&quot;H&quot;:&quot;h&quot;}},{&quot;B&quot;:{&quot;C&quot;:&quot;x&quot;,&quot;D&quot;:{}},&quot;E&quot;:{&quot;F&quot;:&quot;y&quot;},&quot;G&quot;:{&quot;H&quot;:&quot;z&quot;}}]}}","title":"Parsing json with duplicate keys","body":"<p>I am trying to parse JSON file which contains duplicate keys in Java. I am using the method suggested in this answer <a href=\"https://stackoverflow.com/questions/42573120/parsing-a-json-which-contains-duplicate-keys\">Parsing a json which contains duplicate keys</a>.</p>\n<p>The approach works fine if I hard-code the JSON but if I read it from a file,only the last duplicate key is read.</p>\n<p>Code:</p>\n<pre><code>public class am {\n    public static  void main(String args[]) throws Exception\n    {\n        JSONParser parser = new JSONParser();\n\n\n        Object obj = parser.parse(new FileReader(&quot;sample.json&quot;));\n\n        JSONObject a=JSONObject.fromObject(obj);\n        JSONObject jsonObject=JSONObject.fromObject(&quot;{\\n&quot; +\n                &quot;  \\&quot;Data\\&quot;: {\\n&quot; +\n                &quot;    \\&quot;A\\&quot;: {\\n&quot; +\n                &quot;      \\&quot;B\\&quot;: {\\n&quot; +\n                &quot;        \\&quot;C\\&quot;: \\&quot;c\\&quot;,\\n&quot; +\n                &quot;        \\&quot;D\\&quot;: {}\\n&quot; +\n                &quot;      },\\n&quot; +\n                &quot;      \\&quot;E\\&quot;: {\\n&quot; +\n                &quot;        \\&quot;F\\&quot;: \\&quot;f\\&quot;\\n&quot; +\n                &quot;      },\\n&quot; +\n                &quot;      \\&quot;G\\&quot;: {\\n&quot; +\n                &quot;        \\&quot;H\\&quot;: \\&quot;h\\&quot;\\n&quot; +\n                &quot;      }\\n&quot; +\n                &quot;    },\\&quot;A\\&quot;: {\\n&quot; +\n                &quot;      \\&quot;B\\&quot;: {\\n&quot; +\n                &quot;        \\&quot;C\\&quot;: \\&quot;x\\&quot;,\\n&quot; +\n                &quot;        \\&quot;D\\&quot;: {}\\n&quot; +\n                &quot;      },\\n&quot; +\n                &quot;      \\&quot;E\\&quot;: {\\n&quot; +\n                &quot;        \\&quot;F\\&quot;: \\&quot;y\\&quot;\\n&quot; +\n                &quot;      },\\n&quot; +\n                &quot;      \\&quot;G\\&quot;: {\\n&quot; +\n                &quot;        \\&quot;H\\&quot;: \\&quot;z\\&quot;\\n&quot; +\n                &quot;      }\\n&quot; +\n                &quot;    },\\n&quot; +\n                &quot;    \n                &quot;\\n&quot; +\n                &quot;  }\\n&quot; +\n                &quot;}&quot;);\n        System.out.println(&quot;Json objects are:::&quot;+a);\n        System.out.println(&quot;Json objects are:::&quot;+jsonObject);\n       \n    }\n}\n</code></pre>\n<p>Json File:</p>\n<pre><code>{\n  &quot;Data&quot;: {\n    &quot;A&quot;: {\n      &quot;B&quot;: {\n        &quot;C&quot;: &quot;c&quot;,\n        &quot;D&quot;: {}\n      },\n      &quot;E&quot;: {\n        &quot;F&quot;: &quot;f&quot;\n      },\n      &quot;G&quot;: {\n        &quot;H&quot;: &quot;h&quot;\n      }\n    },&quot;A&quot;: {\n      &quot;B&quot;: {\n        &quot;C&quot;: &quot;x&quot;,\n        &quot;D&quot;: {}\n      },\n      &quot;E&quot;: {\n        &quot;F&quot;: &quot;y&quot;\n      },\n      &quot;G&quot;: {\n        &quot;H&quot;: &quot;z&quot;\n      }\n    },\n    \n  }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>Json objects are:::{&quot;Data&quot;:{&quot;A&quot;:{&quot;B&quot;:{&quot;C&quot;:&quot;x&quot;,&quot;D&quot;:{}},&quot;E&quot;:{&quot;F&quot;:&quot;y&quot;},&quot;G&quot;:{&quot;H&quot;:&quot;z&quot;}}}}\nJson objects are:::{&quot;Data&quot;:{&quot;A&quot;:[{&quot;B&quot;:{&quot;C&quot;:&quot;c&quot;,&quot;D&quot;:{}},&quot;E&quot;:{&quot;F&quot;:&quot;f&quot;},&quot;G&quot;:{&quot;H&quot;:&quot;h&quot;}},{&quot;B&quot;:{&quot;C&quot;:&quot;x&quot;,&quot;D&quot;:{}},&quot;E&quot;:{&quot;F&quot;:&quot;y&quot;},&quot;G&quot;:{&quot;H&quot;:&quot;z&quot;}}]}}\n</code></pre>\n"},{"tags":["java","static","treemap","symbol-table"],"comments":[{"owner":{"account_id":11683,"reputation":1438169,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1695241041,"post_id":77145677,"comment_id":135999832,"body_markdown":"The problem is you&#39;re trying to make a reference to `STTM` itself (which is an instance field) within a static `main` method. Why use a field at all? Just declare it as a local variable in `main`...","body":"The problem is you&#39;re trying to make a reference to <code>STTM</code> itself (which is an instance field) within a static <code>main</code> method. Why use a field at all? Just declare it as a local variable in <code>main</code>..."},{"owner":{"account_id":29494776,"reputation":1,"user_id":22603097,"display_name":"DomV_04"},"score":0,"creation_date":1695241385,"post_id":77145677,"comment_id":135999879,"body_markdown":"@JonSkeet How would I declare it as a local variable in &#39;main&#39; as opposed to creating an instance field while still creating a SymbolTableTM object?","body":"@JonSkeet How would I declare it as a local variable in &#39;main&#39; as opposed to creating an instance field while still creating a SymbolTableTM object?"},{"owner":{"account_id":11683,"reputation":1438169,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1695241879,"post_id":77145677,"comment_id":135999951,"body_markdown":"Just move the declaration into the `main` method. (And provide some suitable type arguments.... you probably want `DriverTM` to be non-generic, as a generic entry point is a bit odd... Note that if you create a `SymbolTable&lt;Integer, Integer&gt;` I suspect you don&#39;t need the casts in `STTM.put`...","body":"Just move the declaration into the <code>main</code> method. (And provide some suitable type arguments.... you probably want <code>DriverTM</code> to be non-generic, as a generic entry point is a bit odd... Note that if you create a <code>SymbolTable&lt;Integer, Integer&gt;</code> I suspect you don&#39;t need the casts in <code>STTM.put</code>..."},{"owner":{"account_id":29494776,"reputation":1,"user_id":22603097,"display_name":"DomV_04"},"score":0,"creation_date":1695242280,"post_id":77145677,"comment_id":136000016,"body_markdown":"@JonSkeet I see now. That was pretty obvious in retrospect. Thanks for the help!","body":"@JonSkeet I see now. That was pretty obvious in retrospect. Thanks for the help!"}],"owner":{"account_id":29494776,"reputation":1,"user_id":22603097,"display_name":"DomV_04"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695240759,"creation_date":1695240759,"question_id":77145677,"body_markdown":"I&#39;m currently trying to create a symbol table using the Map and treeMap packages, but when I try to add an item into the table, I get this error: &quot;Cannot make a static reference to the non-static field STTM&quot;.\r\n\r\nSymbolTableTM class:\r\n\r\n\r\n```\r\nimport java.util.Map;\r\nimport java.util.TreeMap;\r\n\r\npublic class SymbolTableTM&lt;Key extends Comparable&lt;Key&gt;, Value&gt; {\r\n\t\r\n\tMap&lt;Key, Value&gt; treeMap = new TreeMap&lt;&gt;();\r\n\t\r\n\tpublic SymbolTableTM() {\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic int[] min() {\r\n\t\tint min = Integer.MAX_VALUE;\r\n\t\tint[] min_arr = new int[2];\r\n\t\tfor(Map.Entry&lt;Key, Value&gt; entry: treeMap.entrySet()) {\r\n\t\t\tif((Integer) entry.getValue() &lt; min) {\r\n\t\t\t\tmin = (Integer) entry.getValue();\r\n\t\t\t\tmin_arr[0] = (Integer) entry.getKey();\r\n\t\t\t\tmin_arr[1] = min;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn min_arr;\r\n\t}\r\n\t\r\n\tpublic int[] max() {\r\n\t\tint max = Integer.MIN_VALUE;\r\n\t\tint[] max_arr = new int[2];\r\n\t\tfor(Map.Entry&lt;Key, Value&gt; entry: treeMap.entrySet()) {\r\n\t\t\tif((Integer) entry.getValue() &gt; max) {\r\n\t\t\t\tmax = (Integer) entry.getValue();\r\n\t\t\t\tmax_arr[0] = (Integer) entry.getKey();\r\n\t\t\t\tmax_arr[1] = max;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn max_arr;\r\n\t}\r\n\t\r\n\tpublic void delete(Key key) {\r\n\t\ttreeMap.remove(key);\r\n\t}\r\n\t\r\n\tpublic Value get(Key key) {\r\n\t\treturn treeMap.get(key);\r\n\t}\r\n\t\r\n\tpublic void put(Key key, Value val) {\r\n\t\ttreeMap.put(key, val);\r\n\t}\t\r\n}\r\n```\r\n\r\nDriverTM class:\r\n\r\n\r\n```\r\nimport java.io.File;\r\nimport java.io.FileNotFoundException;\r\nimport java.util.Scanner;\r\n\r\npublic class DriverTM&lt;Key extends Comparable&lt;Key&gt;, Value&gt; {\r\n\t\r\n\tSymbolTableTM&lt;Key, Value&gt; STTM = new SymbolTableTM&lt;&gt;();\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\ttry {\r\n\t\t\tFile myFile = new File(&quot;lab3in.txt&quot;);\r\n\t\t\tScanner scanner = new Scanner(myFile);\r\n\t\t\twhile(scanner.hasNext()) {\r\n\t\t\t\t\r\n\t\t\t\tSTTM.put((Integer) scanner.nextInt(), (Integer) scanner.nextInt());\r\n\t\t\t}\r\n\t\t\tscanner.close();\r\n\t\t}\r\n\t\tcatch(FileNotFoundException e){\r\n\t\t\tSystem.out.println(&quot;An error occurred&quot;);\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nMy issue is on line 16 of the DriverTM class.\r\n\r\nI thought using an object (STTM) to refer to a non static field wouldn&#39;t be an issue, but obviously I&#39;m missing something. Any help appreciated.","title":"How can I avoid making this static reference to a non-static field?","body":"<p>I'm currently trying to create a symbol table using the Map and treeMap packages, but when I try to add an item into the table, I get this error: &quot;Cannot make a static reference to the non-static field STTM&quot;.</p>\n<p>SymbolTableTM class:</p>\n<pre><code>import java.util.Map;\nimport java.util.TreeMap;\n\npublic class SymbolTableTM&lt;Key extends Comparable&lt;Key&gt;, Value&gt; {\n    \n    Map&lt;Key, Value&gt; treeMap = new TreeMap&lt;&gt;();\n    \n    public SymbolTableTM() {\n        \n    }\n    \n    public int[] min() {\n        int min = Integer.MAX_VALUE;\n        int[] min_arr = new int[2];\n        for(Map.Entry&lt;Key, Value&gt; entry: treeMap.entrySet()) {\n            if((Integer) entry.getValue() &lt; min) {\n                min = (Integer) entry.getValue();\n                min_arr[0] = (Integer) entry.getKey();\n                min_arr[1] = min;\n            }\n        }\n        return min_arr;\n    }\n    \n    public int[] max() {\n        int max = Integer.MIN_VALUE;\n        int[] max_arr = new int[2];\n        for(Map.Entry&lt;Key, Value&gt; entry: treeMap.entrySet()) {\n            if((Integer) entry.getValue() &gt; max) {\n                max = (Integer) entry.getValue();\n                max_arr[0] = (Integer) entry.getKey();\n                max_arr[1] = max;\n            }\n        }\n        return max_arr;\n    }\n    \n    public void delete(Key key) {\n        treeMap.remove(key);\n    }\n    \n    public Value get(Key key) {\n        return treeMap.get(key);\n    }\n    \n    public void put(Key key, Value val) {\n        treeMap.put(key, val);\n    }   \n}\n</code></pre>\n<p>DriverTM class:</p>\n<pre><code>import java.io.File;\nimport java.io.FileNotFoundException;\nimport java.util.Scanner;\n\npublic class DriverTM&lt;Key extends Comparable&lt;Key&gt;, Value&gt; {\n    \n    SymbolTableTM&lt;Key, Value&gt; STTM = new SymbolTableTM&lt;&gt;();\n    \n    public static void main(String[] args) {\n        \n        try {\n            File myFile = new File(&quot;lab3in.txt&quot;);\n            Scanner scanner = new Scanner(myFile);\n            while(scanner.hasNext()) {\n                \n                STTM.put((Integer) scanner.nextInt(), (Integer) scanner.nextInt());\n            }\n            scanner.close();\n        }\n        catch(FileNotFoundException e){\n            System.out.println(&quot;An error occurred&quot;);\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>My issue is on line 16 of the DriverTM class.</p>\n<p>I thought using an object (STTM) to refer to a non static field wouldn't be an issue, but obviously I'm missing something. Any help appreciated.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1447676478,"post_id":33735218,"comment_id":55238885,"body_markdown":"using try catch statements and Exception handling","body":"using try catch statements and Exception handling"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1447676660,"post_id":33735218,"comment_id":55238999,"body_markdown":"Your `Exeption` populates through the `main` method and therefore your program aborts. You need to `catch` the exception and act accordingly. If an `Exception` occurs, execution is stopped immediately and the first matching `catch` block is entered. For more information you may want to look at the [Oracle trail about Exceptions](https://docs.oracle.com/javase/tutorial/essential/exceptions/).","body":"Your <code>Exeption</code> populates through the <code>main</code> method and therefore your program aborts. You need to <code>catch</code> the exception and act accordingly. If an <code>Exception</code> occurs, execution is stopped immediately and the first matching <code>catch</code> block is entered. For more information you may want to look at the <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/\" rel=\"nofollow noreferrer\">Oracle trail about Exceptions</a>."}],"answers":[{"tags":[],"owner":{"account_id":2988754,"reputation":5716,"user_id":2536842,"accept_rate":64,"display_name":"Dylan Meeus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1447677070,"creation_date":1447676475,"answer_id":33735268,"question_id":33735218,"body_markdown":"You have to catch the exception as well. Wrap it in a try-catch. Furthermore you will also need to use a loop to run the code again. Such as..\r\n\r\n    while(true){\r\n        try{\r\n           // Code you want to execute that can throw an error&#163;\r\n          SquareEquation();\r\n\r\n          // Exit loop if execution ended without an exception\r\n          break;\r\n        }\r\n        catch(SquareEquationException ex){\r\n            // Exception logic (such as showing a message) or just printing the trace (but this doesn&#39;t help a user)\r\n            ex.printStackTrace();\r\n     \r\n        }\r\n    }","title":"keep program running after throwing exception in java","body":"<p>You have to catch the exception as well. Wrap it in a try-catch. Furthermore you will also need to use a loop to run the code again. Such as..</p>\n\n<pre><code>while(true){\n    try{\n       // Code you want to execute that can throw an error\n      SquareEquation();\n\n      // Exit loop if execution ended without an exception\n      break;\n    }\n    catch(SquareEquationException ex){\n        // Exception logic (such as showing a message) or just printing the trace (but this doesn't help a user)\n        ex.printStackTrace();\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4326511,"reputation":8441,"user_id":3533191,"accept_rate":62,"display_name":"Syam S"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1447687547,"creation_date":1447687547,"answer_id":33738835,"question_id":33735218,"body_markdown":"You can wrap that in a try catch. Also you could avoid repeated codes and should close the scanner once done. Example\r\n\r\n\timport java.util.Scanner;\r\n\r\n\tpublic class SquareEquationException extends Exception {\r\n\t\tpublic SquareEquationException() {\r\n\t\t\tsuper(&quot;roots are not real numbers&quot;);\r\n\t\t}\r\n\r\n\t\tpublic static void SquareEquation() throws SquareEquationException {\r\n\t\t\tdouble a, b, c, sqr;\r\n\t\t\tint flag = 1;\r\n\t\t\tScanner in = new Scanner(System.in);\r\n\t\t\twhile (flag == 1) {\r\n\t\t\t\ttry{\r\n\t\t\t\t\tSystem.out.println(&quot;enter ax^2:&quot;);\r\n\t\t\t\t\ta = in.nextDouble();\r\n\t\t\t\t\tSystem.out.println(&quot;enter bx:&quot;);\r\n\t\t\t\t\tb = in.nextDouble();\r\n\t\t\t\t\tSystem.out.println(&quot;enter c:&quot;);\r\n\t\t\t\t\tc = in.nextDouble();\r\n\t\t\t\t\tsqr = ((b * b) - (4 * a * c));\r\n\t\t\t\t\tif (sqr &lt; 0)\r\n\t\t\t\t\t\tthrow new SquareEquationException();\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tsqr = Math.sqrt(sqr);\r\n\t\t\t\t\t\tdouble x1 = (-b + sqr) / (2 * a);\r\n\t\t\t\t\t\tdouble x2 = (-b - sqr) / (2 * a);\r\n\t\t\t\t\t\tif (x1 == x2)\r\n\t\t\t\t\t\t\tSystem.out.println(&quot;root is:&quot; + x1);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tSystem.out.println(&quot;x1 is:&quot; + x1 + &quot;\\n&quot; + &quot;x2 is:&quot; + x2);\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch(SquareEquationException e){\r\n\t\t\t\t\tSystem.out.println(e.getMessage());\r\n\t\t\t\t}\r\n\t\t\t\tSystem.out.println(&quot;enter 1 to continue or any key to exit&quot;);\r\n\t\t\t\tflag = in.nextInt();\r\n\t\t\t}\r\n\t\t\tin.close();\r\n\t\t}\r\n\r\n\t\tpublic static void main(String[] args) throws SquareEquationException {\r\n\t\t\tSquareEquation();\r\n\t\t}\r\n\t}","title":"keep program running after throwing exception in java","body":"<p>You can wrap that in a try catch. Also you could avoid repeated codes and should close the scanner once done. Example</p>\n\n<pre><code>import java.util.Scanner;\n\npublic class SquareEquationException extends Exception {\n    public SquareEquationException() {\n        super(\"roots are not real numbers\");\n    }\n\n    public static void SquareEquation() throws SquareEquationException {\n        double a, b, c, sqr;\n        int flag = 1;\n        Scanner in = new Scanner(System.in);\n        while (flag == 1) {\n            try{\n                System.out.println(\"enter ax^2:\");\n                a = in.nextDouble();\n                System.out.println(\"enter bx:\");\n                b = in.nextDouble();\n                System.out.println(\"enter c:\");\n                c = in.nextDouble();\n                sqr = ((b * b) - (4 * a * c));\n                if (sqr &lt; 0)\n                    throw new SquareEquationException();\n                else {\n                    sqr = Math.sqrt(sqr);\n                    double x1 = (-b + sqr) / (2 * a);\n                    double x2 = (-b - sqr) / (2 * a);\n                    if (x1 == x2)\n                        System.out.println(\"root is:\" + x1);\n                    else\n                        System.out.println(\"x1 is:\" + x1 + \"\\n\" + \"x2 is:\" + x2);\n\n                }\n            } catch(SquareEquationException e){\n                System.out.println(e.getMessage());\n            }\n            System.out.println(\"enter 1 to continue or any key to exit\");\n            flag = in.nextInt();\n        }\n        in.close();\n    }\n\n    public static void main(String[] args) throws SquareEquationException {\n        SquareEquation();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":6577690,"reputation":2466,"user_id":5083043,"accept_rate":48,"display_name":"gil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8584,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695240561,"creation_date":1447676335,"question_id":33735218,"body_markdown":"i&#39;ve wrote a code which i want to keep running after throwing an exception.\r\nhere&#39;s my code:\r\n\r\n        public class SquareEquationException extends Exception{\r\n         public SquareEquationException(){\r\n            super(&quot;roots are not real numbers&quot;);\r\n        }\r\n         public static void SquareEquation() throws SquareEquationException{\r\n             double a,b,c,sqr;\r\n             int flag;\r\n             Scanner in = new Scanner(System.in);\r\n             System.out.println(&quot;enter ax^2:&quot;);\r\n             a=in.nextDouble();\r\n             System.out.println(&quot;enter bx:&quot;);\r\n             b=in.nextDouble();\r\n             System.out.println(&quot;enter c:&quot;);\r\n             c=in.nextDouble();\r\n             sqr=((b*b)-(4*a*c));\r\n             if(sqr&lt;0)\r\n                 throw new SquareEquationException();\r\n             else{\r\n              sqr=Math.sqrt(sqr);\r\n              double x1=(-b+sqr)/(2*a);\r\n              double x2 = (-b-sqr)/(2*a);\r\n              if(x1==x2)\r\n                     System.out.println(&quot;root is:&quot; + x1);\r\n              else\r\n                     System.out.println(&quot;x1 is:&quot;+x1 +&quot;\\n&quot;+ &quot;x2 is:&quot;+x2 );\r\n              \r\n             }\r\n             System.out.println(&quot;enter 1 to continue or any key to exit&quot;);\r\n             flag = in.nextInt();\r\n             while(flag==1){\r\n                 System.out.println(&quot;enter ax^2:&quot;);\r\n             a=in.nextDouble();\r\n             System.out.println(&quot;enter bx:&quot;);\r\n             b=in.nextDouble();\r\n             System.out.println(&quot;enter c:&quot;);\r\n             c=in.nextDouble();\r\n             sqr=((b*b)-(4*a*c));\r\n             if(sqr&lt;0){\r\n                 throw new SquareEquationException();\r\n             }\r\n             else{\r\n              sqr=Math.sqrt(sqr);\r\n              double x1=(-b+sqr)/(2*a);\r\n              double x2 = (-b-sqr)/(2*a);\r\n              if(x1==x2)\r\n                     System.out.println(&quot;root is:&quot; + x1);\r\n              else\r\n                     System.out.println(&quot;x1 is:&quot;+x1 +&quot;\\n&quot;+ &quot;x2 is:&quot;+x2 );\r\n             }\r\n             System.out.println(&quot;enter 1 to continue or any key to exit&quot;);\r\n             flag=in.nextInt();\r\n         }\r\n         }\r\n         public static void main(String[] args) throws SquareEquationException{\r\n             SquareEquation();\r\n         }\r\n    }\r\n\r\n\r\nhow can i keep the menu/program running after throwing an exception?\r\nmenu&#39;s work: if 1 inserted by user program keeps on running, else program exits.\r\n\r\nEDIT:\r\n[i want to get the message in red and keep it running, so the menu will show right after/before and offer to continue][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7iZcU.png","title":"keep program running after throwing exception in java","body":"<p>i've wrote a code which i want to keep running after throwing an exception.\nhere's my code:</p>\n\n<pre><code>    public class SquareEquationException extends Exception{\n     public SquareEquationException(){\n        super(\"roots are not real numbers\");\n    }\n     public static void SquareEquation() throws SquareEquationException{\n         double a,b,c,sqr;\n         int flag;\n         Scanner in = new Scanner(System.in);\n         System.out.println(\"enter ax^2:\");\n         a=in.nextDouble();\n         System.out.println(\"enter bx:\");\n         b=in.nextDouble();\n         System.out.println(\"enter c:\");\n         c=in.nextDouble();\n         sqr=((b*b)-(4*a*c));\n         if(sqr&lt;0)\n             throw new SquareEquationException();\n         else{\n          sqr=Math.sqrt(sqr);\n          double x1=(-b+sqr)/(2*a);\n          double x2 = (-b-sqr)/(2*a);\n          if(x1==x2)\n                 System.out.println(\"root is:\" + x1);\n          else\n                 System.out.println(\"x1 is:\"+x1 +\"\\n\"+ \"x2 is:\"+x2 );\n\n         }\n         System.out.println(\"enter 1 to continue or any key to exit\");\n         flag = in.nextInt();\n         while(flag==1){\n             System.out.println(\"enter ax^2:\");\n         a=in.nextDouble();\n         System.out.println(\"enter bx:\");\n         b=in.nextDouble();\n         System.out.println(\"enter c:\");\n         c=in.nextDouble();\n         sqr=((b*b)-(4*a*c));\n         if(sqr&lt;0){\n             throw new SquareEquationException();\n         }\n         else{\n          sqr=Math.sqrt(sqr);\n          double x1=(-b+sqr)/(2*a);\n          double x2 = (-b-sqr)/(2*a);\n          if(x1==x2)\n                 System.out.println(\"root is:\" + x1);\n          else\n                 System.out.println(\"x1 is:\"+x1 +\"\\n\"+ \"x2 is:\"+x2 );\n         }\n         System.out.println(\"enter 1 to continue or any key to exit\");\n         flag=in.nextInt();\n     }\n     }\n     public static void main(String[] args) throws SquareEquationException{\n         SquareEquation();\n     }\n}\n</code></pre>\n\n<p>how can i keep the menu/program running after throwing an exception?\nmenu's work: if 1 inserted by user program keeps on running, else program exits.</p>\n\n<p>EDIT:\n<a href=\"https://i.stack.imgur.com/7iZcU.png\" rel=\"nofollow\">i want to get the message in red and keep it running, so the menu will show right after/before and offer to continue</a></p>\n"},{"tags":["java","menu","switch-statement"],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695240473,"creation_date":1695229349,"answer_id":77144574,"question_id":77144543,"body_markdown":"## Dont close `System.out`\r\n\r\nThe try-with-resources in `outputEmployees` closes [`System.out`][1], at least it probably does if [`Formatter`][2] forwards [`close()`][3] correctly. That&#39;s probably why you&#39;re not seeing any more output.\r\n\r\n    // Closing the `Formatter` also closes `System.out` (a `PrintStream`). \r\n    try(Formatter formatter = new Formatter(System.out)) {} \r\n\r\nTo quote the Javadoc for [`Formatter#close`][3]:\r\n\r\n&gt;Closes this formatter. If the destination implements the `Closeable` interface, its `close` method will be invoked.\r\n\r\nOne way to fix it would be by using a single `Formatter` instance, just like you&#39;ve done with your `Scanner`.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/System.html#out\r\n  [2]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Formatter.html\r\n  [3]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Formatter.html#close()","title":"How do I revert back to menu after switch case selection Java","body":"<h2>Dont close <code>System.out</code></h2>\n<p>The try-with-resources in <code>outputEmployees</code> closes <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/System.html#out\" rel=\"nofollow noreferrer\"><code>System.out</code></a>, at least it probably does if <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Formatter.html\" rel=\"nofollow noreferrer\"><code>Formatter</code></a> forwards <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Formatter.html#close()\" rel=\"nofollow noreferrer\"><code>close()</code></a> correctly. That's probably why you're not seeing any more output.</p>\n<pre><code>// Closing the `Formatter` also closes `System.out` (a `PrintStream`). \ntry(Formatter formatter = new Formatter(System.out)) {} \n</code></pre>\n<p>To quote the Javadoc for <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Formatter.html#close()\" rel=\"nofollow noreferrer\"><code>Formatter#close</code></a>:</p>\n<blockquote>\n<p>Closes this formatter. If the destination implements the <code>Closeable</code> interface, its <code>close</code> method will be invoked.</p>\n</blockquote>\n<p>One way to fix it would be by using a single <code>Formatter</code> instance, just like you've done with your <code>Scanner</code>.</p>\n"}],"owner":{"account_id":16689862,"reputation":457,"user_id":12062753,"display_name":"Noods"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77144574,"answer_count":1,"score":1,"last_activity_date":1695240473,"creation_date":1695229073,"question_id":77144543,"body_markdown":"Im creating a management program where I need to display a menu with options for the user to select. When the user select case 1 for example, I want to display some output, then automatically return to the main menu to complete more cases. However, every time I select a case, the output is printed but the menu never gets printed again. The program also never terminates unless I manually do so. I thought maybe there was an infinite loop bug so I put a debugging statement &quot;End of list&quot; under the method that runs when the user select 1. In the output, this line never appears either.\r\n\r\nHere is my code: \r\n\r\nTrip Management class: \r\n\r\n    public static void main(String[] args) {\r\n\t    TripManagement tm = new TripManagement();\r\n\r\n\t    // Load data into containers\r\n\t    tm.loadEmployees();\r\n\t    tm.loadTrucks();\r\n\t    tm.loadTrips();\r\n\r\n\t    Scanner scanner = new Scanner(System.in);\r\n\t    \r\n\t    boolean more = true;\r\n\t    int choice = -1;\r\n\t    \r\n\t\twhile(more) {\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\t// Display the main menu\r\n\t\t\t\tSystem.out.println(&quot;-----------------------------------------&quot;);\r\n\t\t\t\tSystem.out.println(&quot;1. Display all employees&quot;);\r\n\t\t\t\tSystem.out.println(&quot;2. Display all trucks&quot;);\r\n\t\t\t\tSystem.out.println(&quot;3. Display all trips&quot;);\r\n\t\t\t\tSystem.out.println(&quot;4. Find an employee&quot;);\r\n\t\t\t\tSystem.out.println(&quot;5. Find a truck&quot;);\r\n\t\t\t\tSystem.out.println(&quot;6. Find a trip&quot;);\r\n\t\t\t\tSystem.out.println(&quot;7. Add a new employee&quot;);\r\n\t\t\t\tSystem.out.println(&quot;8. Add a new truck&quot;);\r\n\t\t\t\tSystem.out.println(&quot;9. Add a new trip&quot;);\r\n\t\t\t\tSystem.out.println(&quot;10. Save all data into files&quot;);\r\n\t\t\t\tSystem.out.println(&quot;0. Exit&quot;);\r\n\t\t\t\tSystem.out.println(&quot;Enter a choice: &quot;);\r\n\t\t        \r\n\t\t\t\t// Get user choice\r\n\t\t        if (scanner.hasNextInt()) {\r\n\t\t            choice = scanner.nextInt();\r\n\t\t            scanner.nextLine(); // Consume the newline character\r\n\t\t        } else {\r\n\t\t            // Clear the input buffer\r\n\t\t            scanner.nextLine();\r\n\t\t            System.out.println(&quot;Wrong input. Please enter a valid number.&quot;);\r\n\t\t            continue;\r\n\t\t        }\r\n\t\t \r\n\t\t        // Handle user choice\r\n\t\t        switch (choice) {\r\n\t\t        \tcase 0: \r\n\t\t\t        \tSystem.out.println(&quot;Bye!&quot;);\r\n\t\t\t        \tmore = false;\r\n\t\t\t        \tbreak;\r\n\t\t            case 1:\r\n\t\t                tm.outputEmployees();\r\n\t\t                System.out.println(&quot;End of list&quot;);\r\n\t\t                break;\r\n\t\t            case 2:\r\n\t\t                tm.outputTrucks();\r\n\t\t                break;\r\n\t\t            case 3:\r\n\t\t                tm.outputTrips();\r\n\t\t                break;\r\n\t\t            case 4:\r\n\t\t                // Implement logic for finding an employee\r\n\t\t                break;\r\n\t\t            case 5:\r\n\t\t                // Implement logic for finding a truck\r\n\t\t                break;\r\n\t\t            case 6:\r\n\t\t                // Implement logic for finding a trip\r\n\t\t                break;\r\n\t\t            case 7:\r\n\t\t                // Implement logic for adding a new employee\r\n\t\t                break;\r\n\t\t            case 8:\r\n\t\t                // Implement logic for adding a new truck\r\n\t\t                break;\r\n\t\t            case 9:\r\n\t\t                // Implement logic for adding a new trip\r\n\t\t                break;\r\n\t\t            case 10:\r\n\t\t                // Implement logic for saving data into files\r\n\t\t                break;\r\n\t\t            default:\r\n\t\t                System.out.println(&quot;Invalid choice. Please select a valid option.&quot;);\r\n\t\t                break;\r\n\t\t        }\r\n\t\t\t\t\r\n\t\t\t} catch(InputMismatchException e) {\r\n\t\t\t\tSystem.out.println(&quot;Wrong input type.&quot; + e);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t        \r\n\t    } \r\n\t}\r\n\r\n    public void outputEmployees() {\r\n\t\ttry(Formatter formatter = new Formatter(System.out)) {\r\n\t\t\tfor(Employee employee : employees) {\r\n\t\t\t\temployee.outputFormatter(formatter);\r\n\t\t\t\tformatter.format(&quot;%n&quot;);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\nEmployee class: \r\n\r\n\r\n    public void outputFormatter(Formatter output) {\r\n\t\toutput.format(&quot;Employee Number: %d%n&quot;, getNumber());\r\n\t    output.format(&quot;Name: %s%n&quot;, name);\r\n\t    output.format(&quot;Date of Birth: %s%n&quot;, dob);\r\n\t    output.format(&quot;Address: %s%n&quot;, address); \r\n\t}\r\n\r\nHere is my output when selecting case 1: \r\n\r\n    -----------------------------------------\r\n    1. Display all employees\r\n    2. Display all trucks\r\n    3. Display all trips\r\n    4. Find an employee\r\n    5. Find a truck\r\n    6. Find a trip\r\n    7. Add a new employee\r\n    8. Add a new truck\r\n    9. Add a new trip\r\n    10. Save all data into files\r\n    0. Exit\r\n    Enter a choice: \r\n    1\r\n    Employee Number 1\r\n    Employee Number 2\r\n    Employee Number 3\r\n    ...\r\n\r\n\r\n","title":"How do I revert back to menu after switch case selection Java","body":"<p>Im creating a management program where I need to display a menu with options for the user to select. When the user select case 1 for example, I want to display some output, then automatically return to the main menu to complete more cases. However, every time I select a case, the output is printed but the menu never gets printed again. The program also never terminates unless I manually do so. I thought maybe there was an infinite loop bug so I put a debugging statement &quot;End of list&quot; under the method that runs when the user select 1. In the output, this line never appears either.</p>\n<p>Here is my code:</p>\n<p>Trip Management class:</p>\n<pre><code>public static void main(String[] args) {\n    TripManagement tm = new TripManagement();\n\n    // Load data into containers\n    tm.loadEmployees();\n    tm.loadTrucks();\n    tm.loadTrips();\n\n    Scanner scanner = new Scanner(System.in);\n    \n    boolean more = true;\n    int choice = -1;\n    \n    while(more) {\n        \n        try {\n            // Display the main menu\n            System.out.println(&quot;-----------------------------------------&quot;);\n            System.out.println(&quot;1. Display all employees&quot;);\n            System.out.println(&quot;2. Display all trucks&quot;);\n            System.out.println(&quot;3. Display all trips&quot;);\n            System.out.println(&quot;4. Find an employee&quot;);\n            System.out.println(&quot;5. Find a truck&quot;);\n            System.out.println(&quot;6. Find a trip&quot;);\n            System.out.println(&quot;7. Add a new employee&quot;);\n            System.out.println(&quot;8. Add a new truck&quot;);\n            System.out.println(&quot;9. Add a new trip&quot;);\n            System.out.println(&quot;10. Save all data into files&quot;);\n            System.out.println(&quot;0. Exit&quot;);\n            System.out.println(&quot;Enter a choice: &quot;);\n            \n            // Get user choice\n            if (scanner.hasNextInt()) {\n                choice = scanner.nextInt();\n                scanner.nextLine(); // Consume the newline character\n            } else {\n                // Clear the input buffer\n                scanner.nextLine();\n                System.out.println(&quot;Wrong input. Please enter a valid number.&quot;);\n                continue;\n            }\n     \n            // Handle user choice\n            switch (choice) {\n                case 0: \n                    System.out.println(&quot;Bye!&quot;);\n                    more = false;\n                    break;\n                case 1:\n                    tm.outputEmployees();\n                    System.out.println(&quot;End of list&quot;);\n                    break;\n                case 2:\n                    tm.outputTrucks();\n                    break;\n                case 3:\n                    tm.outputTrips();\n                    break;\n                case 4:\n                    // Implement logic for finding an employee\n                    break;\n                case 5:\n                    // Implement logic for finding a truck\n                    break;\n                case 6:\n                    // Implement logic for finding a trip\n                    break;\n                case 7:\n                    // Implement logic for adding a new employee\n                    break;\n                case 8:\n                    // Implement logic for adding a new truck\n                    break;\n                case 9:\n                    // Implement logic for adding a new trip\n                    break;\n                case 10:\n                    // Implement logic for saving data into files\n                    break;\n                default:\n                    System.out.println(&quot;Invalid choice. Please select a valid option.&quot;);\n                    break;\n            }\n            \n        } catch(InputMismatchException e) {\n            System.out.println(&quot;Wrong input type.&quot; + e);\n            \n        }\n        \n    } \n}\n\npublic void outputEmployees() {\n    try(Formatter formatter = new Formatter(System.out)) {\n        for(Employee employee : employees) {\n            employee.outputFormatter(formatter);\n            formatter.format(&quot;%n&quot;);\n        }\n    }\n}\n</code></pre>\n<p>Employee class:</p>\n<pre><code>public void outputFormatter(Formatter output) {\n    output.format(&quot;Employee Number: %d%n&quot;, getNumber());\n    output.format(&quot;Name: %s%n&quot;, name);\n    output.format(&quot;Date of Birth: %s%n&quot;, dob);\n    output.format(&quot;Address: %s%n&quot;, address); \n}\n</code></pre>\n<p>Here is my output when selecting case 1:</p>\n<pre><code>-----------------------------------------\n1. Display all employees\n2. Display all trucks\n3. Display all trips\n4. Find an employee\n5. Find a truck\n6. Find a trip\n7. Add a new employee\n8. Add a new truck\n9. Add a new trip\n10. Save all data into files\n0. Exit\nEnter a choice: \n1\nEmployee Number 1\nEmployee Number 2\nEmployee Number 3\n...\n</code></pre>\n"},{"tags":["java","state","single-sign-on","mismatch","msal"],"owner":{"account_id":7087354,"reputation":3,"user_id":5423757,"display_name":"ken edward"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695240462,"creation_date":1695240373,"question_id":77145641,"body_markdown":"We modified the servlet authentication example into a tomcat SSO valve using MSALJ 1.13.10. Works fine for all chrome browsers. However, our enterprise rolled out Edge browser &quot;account sync&quot; across devices,but then stopped due to license issues. So now, I have a user who has 4 computers each with edge browsers, and 2 of his 4 computers/devices show up in his Edge Account -&gt; settings -&gt; Manage Account -&gt; Device list, which are the Edge clients that DO NOT work with SSO (we get session/state mismatch errors from MSAL). The other edge browser clients are not in the device lilst, and DO work with MSAL SSO.\r\n\r\nSo I guess my question becomes how does MSALJ play with MS Edge browser account syncing with multiple devices?\r\n\r\nWe tried to have each edge browser peform SSO for a servlet based web app, but it seems if the edge browser account has multiple devices then SSO won&#39;t work due to MSAL reporting state mismatch errors.","title":"How does MSAL for java play with Edge browser accounts with multiple devices?","body":"<p>We modified the servlet authentication example into a tomcat SSO valve using MSALJ 1.13.10. Works fine for all chrome browsers. However, our enterprise rolled out Edge browser &quot;account sync&quot; across devices,but then stopped due to license issues. So now, I have a user who has 4 computers each with edge browsers, and 2 of his 4 computers/devices show up in his Edge Account -&gt; settings -&gt; Manage Account -&gt; Device list, which are the Edge clients that DO NOT work with SSO (we get session/state mismatch errors from MSAL). The other edge browser clients are not in the device lilst, and DO work with MSAL SSO.</p>\n<p>So I guess my question becomes how does MSALJ play with MS Edge browser account syncing with multiple devices?</p>\n<p>We tried to have each edge browser peform SSO for a servlet based web app, but it seems if the edge browser account has multiple devices then SSO won't work due to MSAL reporting state mismatch errors.</p>\n"},{"tags":["java","netbeans","input"],"answers":[{"tags":[],"owner":{"account_id":70,"reputation":63620,"user_id":85,"accept_rate":71,"display_name":"Paul Wicks"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1256981479,"creation_date":1256981479,"answer_id":1653888,"question_id":1653871,"body_markdown":"If you just want a small window to type some input into, then the easiest way is to use JOptionPane. For example:\r\n\r\n    import javax.swing.JOptionPane;\r\n    \r\n    public class TestClass {\r\n        public static void main(String[] args) {\r\n            String answer;\r\n            answer = JOptionPane.showInputDialog(null, &quot;What number to multiply by 3?&quot;);\r\n            int num = Integer.parseInt(answer);\r\n            num = num * 3;\r\n            JOptionPane.showMessageDialog(null, &quot;The answer is &quot; + num);\r\n        }\r\n    }\r\n\r\nNote that showInputDialog returns a String, so you&#39;ll have to convert the data to whatever format you need. If you have something more involved, then JOptionPane may not be the way to go.\r\n","title":"How do I get input from System.in (Java) in Netbeans?","body":"<p>If you just want a small window to type some input into, then the easiest way is to use JOptionPane. For example:</p>\n\n<pre><code>import javax.swing.JOptionPane;\n\npublic class TestClass {\n    public static void main(String[] args) {\n        String answer;\n        answer = JOptionPane.showInputDialog(null, \"What number to multiply by 3?\");\n        int num = Integer.parseInt(answer);\n        num = num * 3;\n        JOptionPane.showMessageDialog(null, \"The answer is \" + num);\n    }\n}\n</code></pre>\n\n<p>Note that showInputDialog returns a String, so you'll have to convert the data to whatever format you need. If you have something more involved, then JOptionPane may not be the way to go.</p>\n"},{"tags":[],"owner":{"account_id":19729,"reputation":404,"user_id":46475,"accept_rate":88,"display_name":"jercra"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1256982059,"creation_date":1256982059,"answer_id":1653902,"question_id":1653871,"body_markdown":"It may not be obvious but in Netbeans the Output tab at the bottom also takes input if your main thread is waiting for input.  Just type under the last output line and hit enter.  In other words, the Output tab is the same as a console window.","title":"How do I get input from System.in (Java) in Netbeans?","body":"<p>It may not be obvious but in Netbeans the Output tab at the bottom also takes input if your main thread is waiting for input.  Just type under the last output line and hit enter.  In other words, the Output tab is the same as a console window.</p>\n"},{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1256982086,"creation_date":1256982086,"answer_id":1653903,"question_id":1653871,"body_markdown":"In Eclipse, you can just type in your console window. I suppose Netbeans would have a similar option.","title":"How do I get input from System.in (Java) in Netbeans?","body":"<p>In Eclipse, you can just type in your console window. I suppose Netbeans would have a similar option.</p>\n"},{"tags":[],"owner":{"account_id":42065,"reputation":53627,"user_id":122428,"display_name":"jitter"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1256982123,"creation_date":1256982123,"answer_id":1653905,"question_id":1653871,"body_markdown":"I&#39;m pretty confident the following worked in NB 6.5 Just type into the output window which happens to accept input\r\n\r\n    InputStreamReader inputStreamReader = new InputStreamReader(System.in);\r\n    BufferedReader reader = new BufferedReader(inputStreamReader);\r\n    System.out.println(&quot;Type name:&quot;);\r\n    String name = reader.readLine();\r\n    System.out.println(&quot;Hello &quot;+name);","title":"How do I get input from System.in (Java) in Netbeans?","body":"<p>I'm pretty confident the following worked in NB 6.5 Just type into the output window which happens to accept input</p>\n\n<pre><code>InputStreamReader inputStreamReader = new InputStreamReader(System.in);\nBufferedReader reader = new BufferedReader(inputStreamReader);\nSystem.out.println(\"Type name:\");\nString name = reader.readLine();\nSystem.out.println(\"Hello \"+name);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":45699,"reputation":19649,"user_id":134824,"accept_rate":93,"display_name":"evilReiko"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1256985268,"creation_date":1256985268,"answer_id":1654002,"question_id":1653871,"body_markdown":"if you are asking for a visual input, NetBeans provides a very easy way to manage visual components, as easy as drag-and-drop\r\n\r\nhow to do it:\r\n\r\n- Create a JFrame by right-click on your package &gt; New &gt; JFrame form\r\n- you can see a &quot;source&quot; tab and a &quot;design&quot; tab on top of the frame.\r\n- drag and drop your visual components (like Text Field from the Swing Control on the right menu)\r\n- after placing your component(s) on the Frame, right-click &gt; Events &gt; (then choose the type of event you want to handle for each component)\r\n\r\nit may look difficult and scary for first-timers, but once you start playing with it, few minutes and you will enjoy your experiments ;)","title":"How do I get input from System.in (Java) in Netbeans?","body":"<p>if you are asking for a visual input, NetBeans provides a very easy way to manage visual components, as easy as drag-and-drop</p>\n\n<p>how to do it:</p>\n\n<ul>\n<li>Create a JFrame by right-click on your package > New > JFrame form</li>\n<li>you can see a \"source\" tab and a \"design\" tab on top of the frame.</li>\n<li>drag and drop your visual components (like Text Field from the Swing Control on the right menu)</li>\n<li>after placing your component(s) on the Frame, right-click > Events > (then choose the type of event you want to handle for each component)</li>\n</ul>\n\n<p>it may look difficult and scary for first-timers, but once you start playing with it, few minutes and you will enjoy your experiments ;)</p>\n"},{"tags":[],"owner":{"account_id":29470569,"reputation":1,"user_id":22583248,"display_name":"Mariel Alejandra Suarez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695238964,"creation_date":1695018269,"answer_id":77124939,"question_id":1653871,"body_markdown":"```\r\npublic static void main(String[] args) {\r\n        // Mostrar un mensaje de bienvenida y pedir al usuario su nombre\r\n        System.out.print(&quot;Por favor, introduce tu nombre: &quot;);\r\n        Scanner scanner = new Scanner(System.in);\r\n        String nombre = scanner.nextLine();// luego definir otras variables\r\n\r\n```","title":"How do I get input from System.in (Java) in Netbeans?","body":"<pre><code>public static void main(String[] args) {\n        // Mostrar un mensaje de bienvenida y pedir al usuario su nombre\n        System.out.print(&quot;Por favor, introduce tu nombre: &quot;);\n        Scanner scanner = new Scanner(System.in);\n        String nombre = scanner.nextLine();// luego definir otras variables\n\n</code></pre>\n"}],"owner":{"account_id":44586,"reputation":37547,"user_id":130964,"accept_rate":95,"display_name":"peter.murray.rust"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59291,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":1653902,"answer_count":6,"score":5,"last_activity_date":1695238964,"creation_date":1256980828,"question_id":1653871,"body_markdown":"I have a small Java test app in Netbeans where the `main()` class reads input from `System.in`. How can I open a window into which I can type input? (I am using NB 6.7.1 on Windows 7).","title":"How do I get input from System.in (Java) in Netbeans?","body":"<p>I have a small Java test app in Netbeans where the <code>main()</code> class reads input from <code>System.in</code>. How can I open a window into which I can type input? (I am using NB 6.7.1 on Windows 7).</p>\n"},{"tags":["java","datetime","jpa","timestamp","playframework"],"comments":[{"owner":{"account_id":558023,"reputation":17978,"user_id":920607,"accept_rate":89,"display_name":"Piotr Nowicki"},"score":0,"creation_date":1321799821,"post_id":8202154,"comment_id":10080426,"body_markdown":"Do you have any requirement saying that the database is supposed to set &#39;now&#39; date value or can the JPA do that?","body":"Do you have any requirement saying that the database is supposed to set &#39;now&#39; date value or can the JPA do that?"},{"owner":{"account_id":6636,"reputation":224522,"user_id":11236,"accept_rate":76,"display_name":"ripper234"},"score":0,"creation_date":1321800197,"post_id":8202154,"comment_id":10080481,"body_markdown":"@PiotrNowicki - it can be done by JPA. Currently I&#39;m doing it inside my application code.","body":"@PiotrNowicki - it can be done by JPA. Currently I&#39;m doing it inside my application code."}],"answers":[{"tags":[],"owner":{"account_id":558023,"reputation":17978,"user_id":920607,"accept_rate":89,"display_name":"Piotr Nowicki"},"down_vote_count":1,"up_vote_count":26,"is_accepted":false,"score":25,"last_activity_date":1695238957,"creation_date":1321800710,"answer_id":8202324,"question_id":8202154,"body_markdown":"I think you can achieve it in at least two ways.\r\n\r\n**Database default value**\r\n\r\nI think the easiest way would be to mark the column as `updatable=false, insertable=false` by using @Column (this will give you immutability - the JPA will not include this column into `INSERT` and `UPDATE` statements) and setting the database column to have a default value of NOW.\r\n\r\n**JPA Lifecycle callback methods**\r\n\r\nOther way would be to provide a `@PrePersist` lifecycle callback method which would set your date object to the actual date `new Date()`. Then you would need to make sure no one will edit this value, so you shouldn&#39;t provide any setters for this property.\r\n\r\nIf you want the date to be updated when entity is modified you could, similarly, implement `@PreUpdate` lifecycle callback method which would set the actual modification date.\r\n\r\nJust remember that if you&#39;re working with Date objects you should do a **defensive copy** of your Date object (so you should return something like `new Date(oldDate.getTime());` instead of plain `return oldDate`).  \r\nThis will prevent users from using getter of your Date and modifying its state.","title":"How to create an auto-generated Date/timestamp field in a Play! / JPA?","body":"<p>I think you can achieve it in at least two ways.</p>\n<p><strong>Database default value</strong></p>\n<p>I think the easiest way would be to mark the column as <code>updatable=false, insertable=false</code> by using @Column (this will give you immutability - the JPA will not include this column into <code>INSERT</code> and <code>UPDATE</code> statements) and setting the database column to have a default value of NOW.</p>\n<p><strong>JPA Lifecycle callback methods</strong></p>\n<p>Other way would be to provide a <code>@PrePersist</code> lifecycle callback method which would set your date object to the actual date <code>new Date()</code>. Then you would need to make sure no one will edit this value, so you shouldn't provide any setters for this property.</p>\n<p>If you want the date to be updated when entity is modified you could, similarly, implement <code>@PreUpdate</code> lifecycle callback method which would set the actual modification date.</p>\n<p>Just remember that if you're working with Date objects you should do a <strong>defensive copy</strong> of your Date object (so you should return something like <code>new Date(oldDate.getTime());</code> instead of plain <code>return oldDate</code>).<br />\nThis will prevent users from using getter of your Date and modifying its state.</p>\n"},{"tags":[],"owner":{"account_id":3216,"reputation":12095,"user_id":4600,"display_name":"marcospereira"},"down_vote_count":0,"up_vote_count":41,"is_accepted":true,"score":41,"last_activity_date":1598642434,"creation_date":1321853295,"answer_id":8207652,"question_id":8202154,"body_markdown":"There is a code snippet that you can adapt to achieve what you want. Take a look:\r\n\r\n\r\n    \r\n    // Timestampable.java\r\n\r\n    package models;\r\n\r\n    import java.util.Date;\r\n\r\n    import javax.persistence.Column;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.MappedSuperclass;\r\n    import javax.persistence.PrePersist;\r\n    import javax.persistence.PreUpdate;\r\n    import javax.persistence.Version;\r\n\r\n    import play.db.ebean.Model;\r\n\r\n    @MappedSuperclass\r\n    public class Timestampable extends Model {\r\n\r\n      @Id\r\n      @GeneratedValue\r\n      public Long id;\r\n\r\n      @Column(name = &quot;created_at&quot;)\r\n      public Date createdAt;\r\n\r\n      @Column(name = &quot;updated_at&quot;)\r\n      public Date updatedAt;\r\n\r\n      @Version\r\n      public int version;\r\n\r\n      @Override\r\n      public void save() {\r\n        createdAt();\r\n        super.save();\r\n      }\r\n\r\n      @Override\r\n      public void update() {\r\n        updatedAt();\r\n        super.update();\r\n      }\r\n\r\n      @PrePersist\r\n      void createdAt() {\r\n        this.createdAt = this.updatedAt = new Date();\r\n      }\r\n\r\n      @PreUpdate\r\n      void updatedAt() {\r\n        this.updatedAt = new Date();\r\n      }\r\n    }\r\n\r\n\r\n","title":"How to create an auto-generated Date/timestamp field in a Play! / JPA?","body":"<p>There is a code snippet that you can adapt to achieve what you want. Take a look:</p>\n<pre><code>// Timestampable.java\n\npackage models;\n\nimport java.util.Date;\n\nimport javax.persistence.Column;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.Id;\nimport javax.persistence.MappedSuperclass;\nimport javax.persistence.PrePersist;\nimport javax.persistence.PreUpdate;\nimport javax.persistence.Version;\n\nimport play.db.ebean.Model;\n\n@MappedSuperclass\npublic class Timestampable extends Model {\n\n  @Id\n  @GeneratedValue\n  public Long id;\n\n  @Column(name = &quot;created_at&quot;)\n  public Date createdAt;\n\n  @Column(name = &quot;updated_at&quot;)\n  public Date updatedAt;\n\n  @Version\n  public int version;\n\n  @Override\n  public void save() {\n    createdAt();\n    super.save();\n  }\n\n  @Override\n  public void update() {\n    updatedAt();\n    super.update();\n  }\n\n  @PrePersist\n  void createdAt() {\n    this.createdAt = this.updatedAt = new Date();\n  }\n\n  @PreUpdate\n  void updatedAt() {\n    this.updatedAt = new Date();\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11262226,"reputation":61,"user_id":8260191,"display_name":"lirugo"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1575277791,"creation_date":1575277791,"answer_id":59135627,"question_id":8202154,"body_markdown":"I think it&#39;s a little bit clearly\r\n\r\n        @Column(name = &quot;created_at&quot;)\r\n        @CreationTimestamp\r\n        private LocalDateTime createdAt;\r\n    \r\n        @Column(name = &quot;updated_at&quot;)\r\n        @UpdateTimestamp\r\n        private LocalDateTime updatedAt;","title":"How to create an auto-generated Date/timestamp field in a Play! / JPA?","body":"<p>I think it's a little bit clearly</p>\n\n<pre><code>    @Column(name = \"created_at\")\n    @CreationTimestamp\n    private LocalDateTime createdAt;\n\n    @Column(name = \"updated_at\")\n    @UpdateTimestamp\n    private LocalDateTime updatedAt;\n</code></pre>\n"}],"owner":{"account_id":6636,"reputation":224522,"user_id":11236,"accept_rate":76,"display_name":"ripper234"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56502,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":8207652,"answer_count":3,"score":19,"last_activity_date":1695238957,"creation_date":1321799127,"question_id":8202154,"body_markdown":"I&#39;d like to add a Date/DateTime/Timestamp field on an entity object, that will be automatically created when the entity is created/persisted and set to &quot;now&quot;, never to be updated again.\r\n\r\nOther use cases included fields that were always updated to contain the last modification date of the entity.\r\n\r\nI used to achieve such requirements [in the mysql schema][1].\r\n\r\nWhat&#39;s the best way to do this in Play! / JPA?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/168736/how-do-you-set-a-default-value-for-a-mysql-datetime-column","title":"How to create an auto-generated Date/timestamp field in a Play! / JPA?","body":"<p>I'd like to add a Date/DateTime/Timestamp field on an entity object, that will be automatically created when the entity is created/persisted and set to \"now\", never to be updated again.</p>\n\n<p>Other use cases included fields that were always updated to contain the last modification date of the entity.</p>\n\n<p>I used to achieve such requirements <a href=\"https://stackoverflow.com/questions/168736/how-do-you-set-a-default-value-for-a-mysql-datetime-column\">in the mysql schema</a>.</p>\n\n<p>What's the best way to do this in Play! / JPA?</p>\n"},{"tags":["java","spring","spring-data","mongodb-java"],"comments":[{"owner":{"account_id":211811,"reputation":726,"user_id":464219,"accept_rate":17,"display_name":"Hamedz"},"score":0,"creation_date":1471469988,"post_id":10311061,"comment_id":65365083,"body_markdown":"When you put filedName (eg. startDate) more than once you get **InvalidMongoDbApiUsageException** ....you can&#39;t add a second &#39;startDate&#39;...","body":"When you put filedName (eg. startDate) more than once you get <b>InvalidMongoDbApiUsageException</b> ....you can&#39;t add a second &#39;startDate&#39;..."},{"owner":{"account_id":450009,"reputation":1499,"user_id":845117,"display_name":"Dirk Schumacher"},"score":1,"creation_date":1676930090,"post_id":10311061,"comment_id":133232754,"body_markdown":"What is the type of __startDate__ and __endDate__?","body":"What is the type of <b>startDate</b> and <b>endDate</b>?"}],"answers":[{"tags":[],"owner":{"account_id":1450175,"reputation":102,"user_id":1367351,"display_name":"user1367351"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1335863687,"creation_date":1335863687,"answer_id":10395715,"question_id":10311061,"body_markdown":"This works on version 2.7.2 of the Java driver\r\n\r\n    DBCollection coll = db.getCollection(&quot;posts&quot;);\t\r\n    \r\n    BasicDBObject date = new BasicDBObject();\r\n    date.append(&quot;$gte&quot;, new Date(startDate));\r\n    date.append(&quot;$lte&quot;, new Date(endDate));\r\n    \t\t\t\r\n    DBObject query = new BasicDBObject();\r\n    query.put(&quot;date&quot;, date);\r\n    \t\t\t\r\n    DBCursor cursor = coll.find(query);\r\n\r\nAlso, for the record you have &quot;startDate&quot; for both the gte and the lte parameters.","title":"Spring Data MongoDB Date Between","body":"<p>This works on version 2.7.2 of the Java driver</p>\n\n<pre><code>DBCollection coll = db.getCollection(\"posts\");  \n\nBasicDBObject date = new BasicDBObject();\ndate.append(\"$gte\", new Date(startDate));\ndate.append(\"$lte\", new Date(endDate));\n\nDBObject query = new BasicDBObject();\nquery.put(\"date\", date);\n\nDBCursor cursor = coll.find(query);\n</code></pre>\n\n<p>Also, for the record you have \"startDate\" for both the gte and the lte parameters.</p>\n"},{"tags":[],"owner":{"account_id":104480,"reputation":6890,"user_id":279320,"accept_rate":76,"display_name":"Yohan Liyanage"},"down_vote_count":0,"up_vote_count":114,"is_accepted":false,"score":114,"last_activity_date":1351528939,"creation_date":1351528939,"answer_id":13125964,"question_id":10311061,"body_markdown":"Do not include the &#39;**and(&quot;startDate&quot;)**&#39; part in your criteria. \r\n\r\nInstead of :\r\n\r\n    query.addCriteria(Criteria.where(&quot;startDate&quot;).gte(startDate).and(&quot;startDate&quot;).lt(endDate));\r\n\r\nYou should use:\r\n\r\n    query.addCriteria(Criteria.where(&quot;startDate&quot;).gte(startDate).lt(endDate));\r\n\r\nWhen you include the &#39;and(&quot;startDate&quot;)&#39; part, Mongo see&#39;s it as two different entries on the same property. ","title":"Spring Data MongoDB Date Between","body":"<p>Do not include the '<strong>and(\"startDate\")</strong>' part in your criteria. </p>\n\n<p>Instead of :</p>\n\n<pre><code>query.addCriteria(Criteria.where(\"startDate\").gte(startDate).and(\"startDate\").lt(endDate));\n</code></pre>\n\n<p>You should use:</p>\n\n<pre><code>query.addCriteria(Criteria.where(\"startDate\").gte(startDate).lt(endDate));\n</code></pre>\n\n<p>When you include the 'and(\"startDate\")' part, Mongo see's it as two different entries on the same property. </p>\n"},{"tags":[],"owner":{"account_id":3243161,"reputation":41,"user_id":2735611,"display_name":"user2735611"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1433784557,"creation_date":1377956392,"answer_id":18548772,"question_id":10311061,"body_markdown":"It works, he is some sample code:\r\n\r\n    Criteria criteria = Criteria.where(&quot;pt&quot;).gte(startDate)\r\n           .andOperator(Criteria.where(&quot;pt&quot;).lt(endDate));","title":"Spring Data MongoDB Date Between","body":"<p>It works, he is some sample code:</p>\n\n<pre><code>Criteria criteria = Criteria.where(\"pt\").gte(startDate)\n       .andOperator(Criteria.where(\"pt\").lt(endDate));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":285638,"reputation":10283,"user_id":584420,"accept_rate":60,"display_name":"James Jithin"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1443369933,"creation_date":1443346772,"answer_id":32806508,"question_id":10311061,"body_markdown":"I had to find dates between on field `publishedDate` and here is how I did it:\r\n\r\n        Criteria publishedDateCriteria = Criteria\r\n\t\t\t\t\t\t\t.where(&quot;publishedDateObject&quot;).gte(psDate)\r\n\t\t\t\t\t\t\t.lte(peDate);\r\n        Query query = new Query(publishedDateCriteria);\r\n        mongoTemplate.find(query,\r\n    \t\t\t\t\t\tMyDocumentObject.class));","title":"Spring Data MongoDB Date Between","body":"<p>I had to find dates between on field <code>publishedDate</code> and here is how I did it:</p>\n\n<pre><code>    Criteria publishedDateCriteria = Criteria\n                        .where(\"publishedDateObject\").gte(psDate)\n                        .lte(peDate);\n    Query query = new Query(publishedDateCriteria);\n    mongoTemplate.find(query,\n                        MyDocumentObject.class));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3855506,"reputation":354,"user_id":3194555,"display_name":"DarwinFernandez"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1485811489,"creation_date":1485803922,"answer_id":41943785,"question_id":10311061,"body_markdown":"[Reference here][1]\r\n\r\n    Query query = new Query(\r\n\t  Criteria.where(&quot;ip&quot;).is(ip)\r\n\t  .andOperator(\r\n\t\tCriteria.where(&quot;createdDate&quot;).lt(endDate),\r\n\t\tCriteria.where(&quot;createdDate&quot;).gte(startDate)\r\n\t  )\r\n    );\r\n\r\n\r\n  [1]: https://www.mkyong.com/java/due-to-limitations-of-the-basicdbobject-you-cant-add-a-second-and/","title":"Spring Data MongoDB Date Between","body":"<p><a href=\"https://www.mkyong.com/java/due-to-limitations-of-the-basicdbobject-you-cant-add-a-second-and/\" rel=\"noreferrer\">Reference here</a></p>\n\n<pre><code>Query query = new Query(\n  Criteria.where(\"ip\").is(ip)\n  .andOperator(\n    Criteria.where(\"createdDate\").lt(endDate),\n    Criteria.where(\"createdDate\").gte(startDate)\n  )\n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13265395,"reputation":1820,"user_id":9578419,"display_name":"S.Daineko"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1545653373,"creation_date":1545653373,"answer_id":53913269,"question_id":10311061,"body_markdown":"You also can add query annotaion: \r\n\r\n    @Query(&quot;{&#39;date&#39; : { $gte: ?0, $lte: ?1 } }&quot;)                 \r\n    public List&lt;AnyYourObj&gt; getObjectByDate(Date from, Date to); \r\n\r\nOr proper spring data method signature:\r\n\r\n    public List&lt;AnyYourObj&gt; findByDateBetween(Date from, Date to);\r\n\r\nBoth of these approaches give the same result.\r\nYou can read more here https://www.baeldung.com/queries-in-spring-data-mongodb\r\nand here https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/\r\n\r\n","title":"Spring Data MongoDB Date Between","body":"<p>You also can add query annotaion: </p>\n\n<pre><code>@Query(\"{'date' : { $gte: ?0, $lte: ?1 } }\")                 \npublic List&lt;AnyYourObj&gt; getObjectByDate(Date from, Date to); \n</code></pre>\n\n<p>Or proper spring data method signature:</p>\n\n<pre><code>public List&lt;AnyYourObj&gt; findByDateBetween(Date from, Date to);\n</code></pre>\n\n<p>Both of these approaches give the same result.\nYou can read more here <a href=\"https://www.baeldung.com/queries-in-spring-data-mongodb\" rel=\"noreferrer\">https://www.baeldung.com/queries-in-spring-data-mongodb</a>\nand here <a href=\"https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/\" rel=\"noreferrer\">https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/</a></p>\n"},{"tags":[],"owner":{"account_id":7487914,"reputation":115,"user_id":5690551,"display_name":"SVK PETO"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1620420553,"creation_date":1565968377,"answer_id":57527093,"question_id":10311061,"body_markdown":"    public interface MyRepository extends MongoRepository&lt;MyObject, MyObjectId&gt; {\r\n    \tList&lt;MyObject&gt; findByMydatefieldBetween(DateTime startDate, DateTime endDate);\r\n    }\r\n\r\nhttps://docs.spring.io/spring-data/mongodb/docs/2.2.x-SNAPSHOT/reference/html/#mongodb.repositories.queries","title":"Spring Data MongoDB Date Between","body":"<pre><code>public interface MyRepository extends MongoRepository&lt;MyObject, MyObjectId&gt; {\n    List&lt;MyObject&gt; findByMydatefieldBetween(DateTime startDate, DateTime endDate);\n}\n</code></pre>\n<p><a href=\"https://docs.spring.io/spring-data/mongodb/docs/2.2.x-SNAPSHOT/reference/html/#mongodb.repositories.queries\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/mongodb/docs/2.2.x-SNAPSHOT/reference/html/#mongodb.repositories.queries</a></p>\n"},{"tags":[],"owner":{"account_id":6611458,"reputation":378,"user_id":5106413,"display_name":"Pradeep Sreeram"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1581318631,"creation_date":1567070974,"answer_id":57707143,"question_id":10311061,"body_markdown":"I did like this\r\n\r\n    public interface PolicyRepository extends MongoRepository&lt;Policy, String&gt; {\r\n        @Query(&quot;{&#39;lastDate&#39;:{$gt:?0,$lt:?1}}&quot;)\r\n        \tpublic List&lt;Policy&gt; findAllPolicies(Date today,Date somedate);\r\n    }","title":"Spring Data MongoDB Date Between","body":"<p>I did like this</p>\n\n<pre><code>public interface PolicyRepository extends MongoRepository&lt;Policy, String&gt; {\n    @Query(\"{'lastDate':{$gt:?0,$lt:?1}}\")\n        public List&lt;Policy&gt; findAllPolicies(Date today,Date somedate);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16062883,"reputation":1058,"user_id":11593292,"display_name":"Sandun Susantha"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1583322401,"creation_date":1583322401,"answer_id":60525339,"question_id":10311061,"body_markdown":"    if (metaData.getToValue() == null){\r\n    dynamicCriteria = Criteria.where(&quot;metaData.key&quot;).is(metaData.getKey()).andOperator(Criteria.where(&quot;metaData.value&quot;).is(metaData.getFromValue()));\r\n    }else {\r\n    dynamicCriteria = Criteria.where(&quot;metaData.key&quot;).is(metaData.getKey()).orOperator(Criteria.where(&quot;metaData.value&quot;).gte(metaData.getFromValue()).lt(metaData.getToValue()));\r\n    }","title":"Spring Data MongoDB Date Between","body":"<pre><code>if (metaData.getToValue() == null){\ndynamicCriteria = Criteria.where(\"metaData.key\").is(metaData.getKey()).andOperator(Criteria.where(\"metaData.value\").is(metaData.getFromValue()));\n}else {\ndynamicCriteria = Criteria.where(\"metaData.key\").is(metaData.getKey()).orOperator(Criteria.where(\"metaData.value\").gte(metaData.getFromValue()).lt(metaData.getToValue()));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1790177,"reputation":166,"user_id":1630783,"display_name":"JianrongChen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637140870,"creation_date":1637140870,"answer_id":70001739,"question_id":10311061,"body_markdown":"Use MongoRepository Query method like this:\r\n\r\n    List&lt;T&gt; findByStartDateBetween(Range&lt;Integer&gt; dataRange);\r\n\r\nuse Range for detail range settings.\r\n\r\n[simliar question][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/63848428/spring-data-mongodb-between-change-from-gt-lt-to-gte-lte/70001649#70001649","title":"Spring Data MongoDB Date Between","body":"<p>Use MongoRepository Query method like this:</p>\n<pre><code>List&lt;T&gt; findByStartDateBetween(Range&lt;Integer&gt; dataRange);\n</code></pre>\n<p>use Range for detail range settings.</p>\n<p><a href=\"https://stackoverflow.com/questions/63848428/spring-data-mongodb-between-change-from-gt-lt-to-gte-lte/70001649#70001649\">simliar question</a></p>\n"},{"tags":[],"owner":{"account_id":4507006,"reputation":1,"user_id":3664081,"display_name":"user3664081"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1653827562,"creation_date":1653827303,"answer_id":72423629,"question_id":10311061,"body_markdown":"[Search By Date Column in spring boot mongo db using criteria(Complex Query)][1][Search by date column in spring boot mongodb using criteria[\\]\\[1\\]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nL6W2.png\r\n  [2]: https://i.stack.imgur.com/qoWlv.png","title":"Spring Data MongoDB Date Between","body":"<p><a href=\"https://i.stack.imgur.com/nL6W2.png\" rel=\"nofollow noreferrer\">Search By Date Column in spring boot mongo db using criteria(Complex Query)</a>[Search by date column in spring boot mongodb using criteria<a href=\"https://i.stack.imgur.com/qoWlv.png\" rel=\"nofollow noreferrer\">][1]</a></p>\n"},{"tags":[],"owner":{"account_id":18327511,"reputation":1,"user_id":13346821,"display_name":"DoanTuyet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662458368,"creation_date":1662370848,"answer_id":73607388,"question_id":10311061,"body_markdown":"Can you try this below query. This should work for your case.\r\n\r\n    Query query = new Query(\r\n    \t\tCriteria.andOperator(\r\n    \t\t\tCriteria.where(&quot;startDate&quot;).gte(startDate),\r\n    \t\t\tCriteria.where(&quot;startDate&quot;).lt(endDate)\r\n    \t\t)\r\n    \t);","title":"Spring Data MongoDB Date Between","body":"<p>Can you try this below query. This should work for your case.</p>\n<pre><code>Query query = new Query(\n        Criteria.andOperator(\n            Criteria.where(&quot;startDate&quot;).gte(startDate),\n            Criteria.where(&quot;startDate&quot;).lt(endDate)\n        )\n    );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29483046,"reputation":11,"user_id":22593545,"display_name":"Balraj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695238882,"creation_date":1695136085,"answer_id":77135787,"question_id":10311061,"body_markdown":"Another approach to this could be create a DateUtility class to get `LocalDateTime` from input `LocalDate`:\r\n    \r\n```java\r\npublic class DateUtility {\r\n    public static LocalDateTime toStartOfDay(LocalDate date) {\r\n        return Optional.ofNullable(date).map(LocalDate::atStartOfDay).orElse(null);\r\n    }\r\n\r\n    public static LocalDateTime toEndOfDay(LocalDate date) {\r\n        return Optional.ofNullable(date).map((localDate) -&gt;\r\n                localDate.atTime(LocalTime.MAX)).orElse(null);\r\n    }\r\n}\r\n```\r\n    \r\nThen use it in the query criteria:\r\n\r\n```java\r\nQuery query = new Query();  query.addCriteria(Criteria.where(&quot;startDate&quot;).gt(CommonUtils.toStartOfDay(startDate)).lt(CommonUtils.toEndOfDay(startDate)));\r\n```\r\n\r\n    \r\nThis query will give result from whole day for a given date.                        ","title":"Spring Data MongoDB Date Between","body":"<p>Another approach to this could be create a DateUtility class to get <code>LocalDateTime</code> from input <code>LocalDate</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DateUtility {\n    public static LocalDateTime toStartOfDay(LocalDate date) {\n        return Optional.ofNullable(date).map(LocalDate::atStartOfDay).orElse(null);\n    }\n\n    public static LocalDateTime toEndOfDay(LocalDate date) {\n        return Optional.ofNullable(date).map((localDate) -&gt;\n                localDate.atTime(LocalTime.MAX)).orElse(null);\n    }\n}\n</code></pre>\n<p>Then use it in the query criteria:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Query query = new Query();  query.addCriteria(Criteria.where(&quot;startDate&quot;).gt(CommonUtils.toStartOfDay(startDate)).lt(CommonUtils.toEndOfDay(startDate)));\n</code></pre>\n<p>This query will give result from whole day for a given date.</p>\n"}],"owner":{"account_id":56295,"reputation":1856,"user_id":168621,"accept_rate":0,"display_name":"ujava"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102584,"favorite_count":0,"down_vote_count":0,"up_vote_count":53,"answer_count":13,"score":53,"last_activity_date":1695238882,"creation_date":1335338303,"question_id":10311061,"body_markdown":"I use spring data mongodb.\r\n\r\nI want the records between two dates. The following MongoDB Query works:\r\n    \r\n    db.posts.find({startDate: {$gte: start, $lt: end}});\r\n\r\nMy attempted Spring data query object code translation does not work:\r\n\r\n    Query query = new Query();\r\n    query.addCriteria(Criteria.where(&quot;startDate&quot;).gte(startDate)\r\n                                .and(&quot;startDate&quot;).lt(endDate));\r\n\r\nWhat is the correct order of method calls to build the Mongo query I need?\r\n\t","title":"Spring Data MongoDB Date Between","body":"<p>I use spring data mongodb.</p>\n\n<p>I want the records between two dates. The following MongoDB Query works:</p>\n\n<pre><code>db.posts.find({startDate: {$gte: start, $lt: end}});\n</code></pre>\n\n<p>My attempted Spring data query object code translation does not work:</p>\n\n<pre><code>Query query = new Query();\nquery.addCriteria(Criteria.where(\"startDate\").gte(startDate)\n                            .and(\"startDate\").lt(endDate));\n</code></pre>\n\n<p>What is the correct order of method calls to build the Mongo query I need?</p>\n"},{"tags":["java","turtle-graphics"],"comments":[{"owner":{"account_id":8306545,"reputation":47686,"user_id":6243352,"display_name":"ggorlen"},"score":2,"creation_date":1694836107,"post_id":77116148,"comment_id":135947097,"body_markdown":"See [Turtle Java squares Pyramid](https://stackoverflow.com/questions/73698122/turtle-java-squares-pyramid/73707326#73707326)","body":"See <a href=\"https://stackoverflow.com/questions/73698122/turtle-java-squares-pyramid/73707326#73707326\">Turtle Java squares Pyramid</a>"},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1694860391,"post_id":77116148,"comment_id":135948725,"body_markdown":"Welcome to Stack Overflow.\nPlease take the [tour] to learn how Stack Overflow works and read [ask] on how to improve the quality of your question.\nPlease see: [Why is Can someone help me? not an actual question?](https://meta.stackoverflow.com/q/284236).","body":"Welcome to Stack Overflow. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> to learn how Stack Overflow works and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> on how to improve the quality of your question. Please see: <a href=\"https://meta.stackoverflow.com/q/284236\">Why is Can someone help me? not an actual question?</a>."}],"answers":[{"tags":[],"owner":{"account_id":7610133,"reputation":40891,"user_id":5771269,"display_name":"cdlane"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695230287,"creation_date":1695230287,"answer_id":77144669,"question_id":77116148,"body_markdown":"This has the look of a problem that can be programmed recursively with less complication:\r\n\r\n    class Pyramid extends Turtle {\r\n    \tpublic void construct(double base, int levels) {\r\n    \t\tint blocks_per_base = levels * 2 - 1;\r\n    \t\t\r\n    \t\tthis.construct_recursive(blocks_per_base, 1, base / blocks_per_base, levels);\r\n    \t}\r\n    \r\n    \tpublic void construct_recursive(int width, int height, double block, int levels) {\r\n    \t\tif (levels &gt; 0) {\r\n    \t\t\tthis.rectangle(width, height, block);\r\n    \t\t\tthis.forward(block);\r\n    \t\t\tthis.construct_recursive(width - 2, height + 1, block, levels - 1);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic void rectangle(int width, int height, double block) {\r\n    \t\tfor (int i=0; i&lt;2; i++) {\r\n    \t\t\tthis.forward(width * block);\r\n    \t\t\tthis.left(90);\r\n    \t\t\tthis.forward(height * block);\r\n    \t\t\tthis.left(90);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tPyramid pyramid = new Pyramid();\r\n    \t\tpyramid.construct(200, 5);\r\n    \t}\r\n    }\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Jt52p.png","title":"Im trying to create a square pyramid using turtle graphics, but the turtle doesn&#39;t position itself correctly to start the next row","body":"<p>This has the look of a problem that can be programmed recursively with less complication:</p>\n<pre><code>class Pyramid extends Turtle {\n    public void construct(double base, int levels) {\n        int blocks_per_base = levels * 2 - 1;\n        \n        this.construct_recursive(blocks_per_base, 1, base / blocks_per_base, levels);\n    }\n\n    public void construct_recursive(int width, int height, double block, int levels) {\n        if (levels &gt; 0) {\n            this.rectangle(width, height, block);\n            this.forward(block);\n            this.construct_recursive(width - 2, height + 1, block, levels - 1);\n        }\n    }\n\n    public void rectangle(int width, int height, double block) {\n        for (int i=0; i&lt;2; i++) {\n            this.forward(width * block);\n            this.left(90);\n            this.forward(height * block);\n            this.left(90);\n        }\n    }\n\n    public static void main(String[] args) {\n        Pyramid pyramid = new Pyramid();\n        pyramid.construct(200, 5);\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Jt52p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Jt52p.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":29456934,"reputation":1,"user_id":22572596,"display_name":"Josh _"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695238741,"creation_date":1694831888,"question_id":77116148,"body_markdown":"I&#39;m trying to create a square pyramid (pictured below):\r\n\r\n[![enter image description here][1]][1]\r\n\r\nBut with the following code this is the result:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nAny help would be appreciated! (note: I can&#39;t use the &quot;goTo&quot; command)\r\n\r\nMy code:\r\n\r\n    class Pyramid {\r\n        public static void main(String[] args) {\r\n            Turtle t = new Turtle();\r\n            t.delay(100);\r\n            pyramid(t, 200, 5);\r\n        }\r\n    \r\n        public static void pyramid(Turtle t, double base, int levels) {\r\n            for (int j=0; j&lt;levels; j++) {\r\n                for (int i=0; i&lt;((levels) * 2) - 1 - (j * 2); i++) {\r\n                    square(t, base, levels);\r\n                    t.forward(base / ((levels * 2) - 1));\r\n                }\r\n    \r\n                t.penup();\r\n                t.backward(base - ((base / ((levels * 2) - 1)) * (j * 2)));\r\n                t.left(90);\r\n                t.forward(base / ((levels * 2) - 1));\r\n                t.right(90);\r\n                t.pendown();\r\n            }\r\n        }\r\n    \r\n        public static void square(Turtle t, double base, int levels) {\r\n            for (int i=0; i&lt;4; i++) {\r\n                t.forward(base / ((levels * 2) - 1));\r\n                t.left(90);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/c4Ejt.png\r\n  [2]: https://i.stack.imgur.com/GoOgN.png","title":"Im trying to create a square pyramid using turtle graphics, but the turtle doesn&#39;t position itself correctly to start the next row","body":"<p>I'm trying to create a square pyramid (pictured below):</p>\n<p><a href=\"https://i.stack.imgur.com/c4Ejt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c4Ejt.png\" alt=\"enter image description here\" /></a></p>\n<p>But with the following code this is the result:</p>\n<p><a href=\"https://i.stack.imgur.com/GoOgN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GoOgN.png\" alt=\"enter image description here\" /></a></p>\n<p>Any help would be appreciated! (note: I can't use the &quot;goTo&quot; command)</p>\n<p>My code:</p>\n<pre><code>class Pyramid {\n    public static void main(String[] args) {\n        Turtle t = new Turtle();\n        t.delay(100);\n        pyramid(t, 200, 5);\n    }\n\n    public static void pyramid(Turtle t, double base, int levels) {\n        for (int j=0; j&lt;levels; j++) {\n            for (int i=0; i&lt;((levels) * 2) - 1 - (j * 2); i++) {\n                square(t, base, levels);\n                t.forward(base / ((levels * 2) - 1));\n            }\n\n            t.penup();\n            t.backward(base - ((base / ((levels * 2) - 1)) * (j * 2)));\n            t.left(90);\n            t.forward(base / ((levels * 2) - 1));\n            t.right(90);\n            t.pendown();\n        }\n    }\n\n    public static void square(Turtle t, double base, int levels) {\n        for (int i=0; i&lt;4; i++) {\n            t.forward(base / ((levels * 2) - 1));\n            t.left(90);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","android","onclick","screenshot","android-button"],"owner":{"account_id":18331583,"reputation":39,"user_id":13349991,"display_name":"Mirek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695238475,"creation_date":1695238475,"question_id":77145465,"body_markdown":"I have two programs which are working. But I need to implement screenshot function into floating button (second) code.\r\n&lt;br&gt;&lt;br&gt;\r\nIn the first there is made screenshot after button click:&lt;br&gt;\r\n*MainActivity.java*\r\n\r\n```\r\npackage com.example.screenshotapp;\r\n\r\nimport android.Manifest;\r\nimport android.content.pm.PackageManager;\r\nimport android.graphics.Bitmap;\r\nimport android.os.Bundle;\r\nimport android.os.Environment;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\n\r\nimport java.io.File;\r\nimport java.io.FileOutputStream;\r\nimport java.util.Date;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private static final int REQUEST_CODE_PERMISSION = 101;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        Button screenshotButton = findViewById(R.id.screenshotButton);\r\n        screenshotButton.setOnClickListener(v -&gt; {\r\n            if (checkPermission()) {\r\n                takeScreenshot();\r\n            } else {\r\n                requestPermission();\r\n            }\r\n        });\r\n    }\r\n\r\n    private boolean checkPermission() {\r\n        int permission = ContextCompat.checkSelfPermission(this, Manifest.permission.WRITE_EXTERNAL_STORAGE);\r\n        return permission == PackageManager.PERMISSION_GRANTED;\r\n    }\r\n\r\n    private void requestPermission() {\r\n        ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, REQUEST_CODE_PERMISSION);\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        if (requestCode == REQUEST_CODE_PERMISSION) {\r\n            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                takeScreenshot();\r\n            } else {\r\n                Toast.makeText(this, &quot;Permission denied. Unable to take screenshot.&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    }\r\n\r\n    private void takeScreenshot() {\r\n        try {\r\n            View rootView = getWindow().getDecorView().getRootView();\r\n            rootView.setDrawingCacheEnabled(true);\r\n            Bitmap bitmap = Bitmap.createBitmap(rootView.getDrawingCache());\r\n            rootView.setDrawingCacheEnabled(false);\r\n\r\n            String fileName = &quot;screenshot_&quot; + new Date().getTime() + &quot;.png&quot;;\r\n            File screenshotFile = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), fileName);\r\n\r\n            FileOutputStream outputStream = new FileOutputStream(screenshotFile);\r\n            bitmap.compress(Bitmap.CompressFormat.PNG, 100, outputStream);\r\n            outputStream.flush();\r\n            outputStream.close();\r\n\r\n            Toast.makeText(this, &quot;Screenshot saved: &quot; + screenshotFile.getAbsolutePath(), Toast.LENGTH_SHORT).show();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(this, &quot;Error taking screenshot.&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n*AndroidManifest.xml*\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    package=&quot;com.example.screenshotapp&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;&gt;\r\n        &lt;activity android:name=&quot;com.example.screenshotapp.MainActivity&quot;\r\n            android:exported=&quot;true&quot;\r\n            android:theme=&quot;@style/Theme.AppCompat&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\n*activity_main.xml*\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:padding=&quot;16dp&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/screenshotButton&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;Udlat screenshot&quot;\r\n        android:layout_centerInParent=&quot;true&quot; /&gt;\r\n\r\n&lt;/RelativeLayout&gt;\r\n```\r\n\r\nAnd there is second code - floating button widget which is visible also through other apps:\r\n*MainAcivity.java*\r\n\r\n```\r\npackage com.example.mywidget2;\r\n\r\nimport android.app.Activity;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\n\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n\r\n        super.onCreate(savedInstanceState);\r\n\r\n        setContentView(R.layout.activity_main);\r\n\r\n        startFloatingWidgetService();\r\n    }\r\n    private void startFloatingWidgetService() {\r\n        Intent intent = new Intent(this, FloatingWidgetService.class);\r\n        startService(intent);\r\n    }\r\n}\r\n```\r\n\r\n*FloatingWidgetService.java*\r\n\r\n``` \r\npackage com.example.mywidget2;\r\n\r\nimport android.app.Service;\r\nimport android.content.Intent;\r\nimport android.graphics.PixelFormat;\r\nimport android.net.Uri;\r\nimport android.os.Build;\r\nimport android.os.IBinder;\r\nimport android.provider.Settings;\r\nimport android.view.Gravity;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.WindowManager;\r\nimport android.widget.Button;\r\n\r\nimport com.example.mywidget2.R;\r\n\r\npublic class FloatingWidgetService extends Service {\r\n\r\n\r\n    private WindowManager mWindowManager;\r\n    private View mFloatingWidgetView;\r\n    @Override\r\n    public IBinder onBind(Intent intent) {\r\n\r\n        return null;\r\n    }\r\n\r\n    // Method to request the SYSTEM_ALERT_WINDOW permission\r\n    private void requestOverlayPermission() {\r\n\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n            Intent intent = new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION);\r\n            intent.setData(Uri.parse(&quot;package:&quot; + getPackageName()));\r\n            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n            startActivity(intent);\r\n        }\r\n    }\r\n\r\n    // Method to create the floating widget\r\n    private void createFloatingWidget() {\r\n\r\n        // Inflate the layout for the floating widget\r\n        mFloatingWidgetView = LayoutInflater.from(this).inflate(R.layout.floating_widget_layout,\r\n                null);\r\n\r\n        // Initialize the button on the floating widget\r\n        Button button = mFloatingWidgetView.findViewById(R.id.floating_button);\r\n        button.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                // Handle the button click event\r\n                showTextDialog();\r\n                // You can perform other actions here as needed\r\n            }\r\n        });\r\n\r\n        // Initialize the WindowManager\r\n        mWindowManager = (WindowManager) getSystemService(WINDOW_SERVICE);\r\n\r\n        // Set up WindowManager.LayoutParams for the floating widget\r\n        WindowManager.LayoutParams params = new WindowManager.LayoutParams(\r\n                WindowManager.LayoutParams.WRAP_CONTENT,\r\n                WindowManager.LayoutParams.WRAP_CONTENT,\r\n                WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY,\r\n                WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,\r\n                PixelFormat.TRANSLUCENT\r\n        );\r\n\r\n        // Set the gravity of the floating widget (position on the screen)\r\n        params.gravity = Gravity.BOTTOM | Gravity.END;\r\n\r\n        // Add the floating widget to the WindowManager\r\n        mWindowManager.addView(mFloatingWidgetView, params);\r\n    }\r\n\r\n    @Override\r\n    public void onCreate() {\r\n        super.onCreate();\r\n\r\n        // Check if the permission is granted (only for API level 23 and higher)\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M &amp;&amp; !Settings.canDrawOverlays(this)) {\r\n            // You don&#39;t have permission to draw overlays, so request it\r\n            requestOverlayPermission();\r\n        } else {\r\n            // Permission is granted, proceed with creating the floating widget\r\n            createFloatingWidget();\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onDestroy() {\r\n        super.onDestroy();\r\n        if (mFloatingWidgetView != null &amp;&amp; mWindowManager != null) {\r\n            mWindowManager.removeView(mFloatingWidgetView);\r\n        }\r\n    }\r\n\r\n    private void showTextDialog() {\r\n\r\n    }\r\n}\r\n``` \r\n\r\n*AndroidManifest.xml*\r\n``` \r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.Mywidget2&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n\r\n        &lt;service\r\n            android:name=&quot;.FloatingWidgetService&quot;\r\n            android:enabled=&quot;true&quot;\r\n            android:exported=&quot;true&quot; /&gt;\r\n\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n``` \r\n*floating_widget_layout.xml*\r\n``` \r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;wrap_content&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:orientation=&quot;vertical&quot;&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/floating_button&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_gravity=&quot;end&quot;\r\n        android:background=&quot;@android:color/holo_red_light&quot;\r\n        android:text=&quot;asdasda&quot;\r\n        android:textColor=&quot;#212121&quot; /&gt;\r\n\r\n&lt;/LinearLayout&gt;\r\n``` ","title":"Android: Java - implement Screenshot code to floating button","body":"<p>I have two programs which are working. But I need to implement screenshot function into floating button (second) code.\n<br><br>\nIn the first there is made screenshot after button click:<br>\n<em>MainActivity.java</em></p>\n<pre><code>package com.example.screenshotapp;\n\nimport android.Manifest;\nimport android.content.pm.PackageManager;\nimport android.graphics.Bitmap;\nimport android.os.Bundle;\nimport android.os.Environment;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.Toast;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\nimport androidx.core.content.ContextCompat;\n\nimport java.io.File;\nimport java.io.FileOutputStream;\nimport java.util.Date;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private static final int REQUEST_CODE_PERMISSION = 101;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        Button screenshotButton = findViewById(R.id.screenshotButton);\n        screenshotButton.setOnClickListener(v -&gt; {\n            if (checkPermission()) {\n                takeScreenshot();\n            } else {\n                requestPermission();\n            }\n        });\n    }\n\n    private boolean checkPermission() {\n        int permission = ContextCompat.checkSelfPermission(this, Manifest.permission.WRITE_EXTERNAL_STORAGE);\n        return permission == PackageManager.PERMISSION_GRANTED;\n    }\n\n    private void requestPermission() {\n        ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, REQUEST_CODE_PERMISSION);\n    }\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n        if (requestCode == REQUEST_CODE_PERMISSION) {\n            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                takeScreenshot();\n            } else {\n                Toast.makeText(this, &quot;Permission denied. Unable to take screenshot.&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    }\n\n    private void takeScreenshot() {\n        try {\n            View rootView = getWindow().getDecorView().getRootView();\n            rootView.setDrawingCacheEnabled(true);\n            Bitmap bitmap = Bitmap.createBitmap(rootView.getDrawingCache());\n            rootView.setDrawingCacheEnabled(false);\n\n            String fileName = &quot;screenshot_&quot; + new Date().getTime() + &quot;.png&quot;;\n            File screenshotFile = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), fileName);\n\n            FileOutputStream outputStream = new FileOutputStream(screenshotFile);\n            bitmap.compress(Bitmap.CompressFormat.PNG, 100, outputStream);\n            outputStream.flush();\n            outputStream.close();\n\n            Toast.makeText(this, &quot;Screenshot saved: &quot; + screenshotFile.getAbsolutePath(), Toast.LENGTH_SHORT).show();\n        } catch (Exception e) {\n            e.printStackTrace();\n            Toast.makeText(this, &quot;Error taking screenshot.&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n}\n\n</code></pre>\n<p><em>AndroidManifest.xml</em></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    package=&quot;com.example.screenshotapp&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;&gt;\n        &lt;activity android:name=&quot;com.example.screenshotapp.MainActivity&quot;\n            android:exported=&quot;true&quot;\n            android:theme=&quot;@style/Theme.AppCompat&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p><em>activity_main.xml</em></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:padding=&quot;16dp&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/screenshotButton&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Udlat screenshot&quot;\n        android:layout_centerInParent=&quot;true&quot; /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>And there is second code - floating button widget which is visible also through other apps:\n<em>MainAcivity.java</em></p>\n<pre><code>package com.example.mywidget2;\n\nimport android.app.Activity;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.view.View;\nimport androidx.appcompat.app.AppCompatActivity;\n\n\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n\n        super.onCreate(savedInstanceState);\n\n        setContentView(R.layout.activity_main);\n\n        startFloatingWidgetService();\n    }\n    private void startFloatingWidgetService() {\n        Intent intent = new Intent(this, FloatingWidgetService.class);\n        startService(intent);\n    }\n}\n</code></pre>\n<p><em>FloatingWidgetService.java</em></p>\n<pre><code>package com.example.mywidget2;\n\nimport android.app.Service;\nimport android.content.Intent;\nimport android.graphics.PixelFormat;\nimport android.net.Uri;\nimport android.os.Build;\nimport android.os.IBinder;\nimport android.provider.Settings;\nimport android.view.Gravity;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.WindowManager;\nimport android.widget.Button;\n\nimport com.example.mywidget2.R;\n\npublic class FloatingWidgetService extends Service {\n\n\n    private WindowManager mWindowManager;\n    private View mFloatingWidgetView;\n    @Override\n    public IBinder onBind(Intent intent) {\n\n        return null;\n    }\n\n    // Method to request the SYSTEM_ALERT_WINDOW permission\n    private void requestOverlayPermission() {\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            Intent intent = new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION);\n            intent.setData(Uri.parse(&quot;package:&quot; + getPackageName()));\n            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n            startActivity(intent);\n        }\n    }\n\n    // Method to create the floating widget\n    private void createFloatingWidget() {\n\n        // Inflate the layout for the floating widget\n        mFloatingWidgetView = LayoutInflater.from(this).inflate(R.layout.floating_widget_layout,\n                null);\n\n        // Initialize the button on the floating widget\n        Button button = mFloatingWidgetView.findViewById(R.id.floating_button);\n        button.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                // Handle the button click event\n                showTextDialog();\n                // You can perform other actions here as needed\n            }\n        });\n\n        // Initialize the WindowManager\n        mWindowManager = (WindowManager) getSystemService(WINDOW_SERVICE);\n\n        // Set up WindowManager.LayoutParams for the floating widget\n        WindowManager.LayoutParams params = new WindowManager.LayoutParams(\n                WindowManager.LayoutParams.WRAP_CONTENT,\n                WindowManager.LayoutParams.WRAP_CONTENT,\n                WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY,\n                WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,\n                PixelFormat.TRANSLUCENT\n        );\n\n        // Set the gravity of the floating widget (position on the screen)\n        params.gravity = Gravity.BOTTOM | Gravity.END;\n\n        // Add the floating widget to the WindowManager\n        mWindowManager.addView(mFloatingWidgetView, params);\n    }\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n\n        // Check if the permission is granted (only for API level 23 and higher)\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M &amp;&amp; !Settings.canDrawOverlays(this)) {\n            // You don't have permission to draw overlays, so request it\n            requestOverlayPermission();\n        } else {\n            // Permission is granted, proceed with creating the floating widget\n            createFloatingWidget();\n        }\n\n\n\n    }\n\n    @Override\n    public void onDestroy() {\n        super.onDestroy();\n        if (mFloatingWidgetView != null &amp;&amp; mWindowManager != null) {\n            mWindowManager.removeView(mFloatingWidgetView);\n        }\n    }\n\n    private void showTextDialog() {\n\n    }\n}\n</code></pre>\n<p><em>AndroidManifest.xml</em></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.Mywidget2&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n\n        &lt;service\n            android:name=&quot;.FloatingWidgetService&quot;\n            android:enabled=&quot;true&quot;\n            android:exported=&quot;true&quot; /&gt;\n\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p><em>floating_widget_layout.xml</em></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:orientation=&quot;vertical&quot;&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/floating_button&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_gravity=&quot;end&quot;\n        android:background=&quot;@android:color/holo_red_light&quot;\n        android:text=&quot;asdasda&quot;\n        android:textColor=&quot;#212121&quot; /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n"},{"tags":["java","android","xml","android-studio"],"owner":{"account_id":24435711,"reputation":1,"user_id":18360024,"display_name":"beanz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695238275,"creation_date":1695238275,"question_id":77145447,"body_markdown":"To give a backstory, I am building an android app in android studio using java. This app serves as a digital RC controller for an RC airplane. My goal is to be able to connect to the airplane via bluetooth and controll the airplane from my android phone. Ive worked with android studio and java for a long time but I never worked with bluetooth connections/permissions before. I get the app to run and function but however my bluetooth functionality is janky. I have a button already created labeled as bluetooth but right now it does nothing. I tried to make it where when you click the bluetooth button and menu would pop up with bluetooths that are available to connect, however when doing so the app just crashes. Below is my MainActivity.Java code and my AndroidManifest.xml\r\n\r\n\r\n```\r\npackage com.example.rcair;\r\n\r\nimport android.Manifest;\r\nimport android.bluetooth.BluetoothAdapter;\r\nimport android.bluetooth.BluetoothDevice;\r\nimport android.bluetooth.BluetoothSocket;\r\nimport android.content.BroadcastReceiver;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.IntentFilter;\r\nimport android.content.pm.PackageManager;\r\nimport android.os.BatteryManager;\r\nimport android.os.Bundle;\r\nimport android.view.MotionEvent;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\nimport java.io.IOException;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private Button dragLeftButton;\r\n    private Button dragRightButton;\r\n    private ImageView batteryIcon;\r\n    private Button bluetoothButton;\r\n\r\n    private int throttle = 0;\r\n    private int bodyRoll = 0;\r\n    private int yaw = 0;\r\n    private int pitch = 0;\r\n\r\n    // Bluetooth variables\r\n    private BluetoothAdapter bluetoothAdapter;\r\n    private BluetoothSocket bluetoothSocket;\r\n    private BluetoothDevice bluetoothDevice;\r\n\r\n    private static final int REQUEST_ENABLE_BT = 1;\r\n    private static final int REQUEST_PERMISSION_BLUETOOTH = 2;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        // Initialize views\r\n        dragLeftButton = findViewById(R.id.dragLeft);\r\n        dragRightButton = findViewById(R.id.dragRight);\r\n        batteryIcon = findViewById(R.id.batteryIcon);\r\n        bluetoothButton = findViewById(R.id.bluetoothButton);\r\n\r\n        // Initialize Bluetooth\r\n        initBluetooth();\r\n\r\n        // Set onTouchListener for the dragRightButton\r\n        dragRightButton.setOnTouchListener(new View.OnTouchListener() {\r\n            @Override\r\n            public boolean onTouch(View v, MotionEvent event) {\r\n                int action = event.getAction();\r\n\r\n                switch (action) {\r\n                    case MotionEvent.ACTION_DOWN:\r\n                        // Top part of the cross - Increase pitch\r\n                        if (event.getY() &lt; (float) v.getHeight() / 2) {\r\n                            pitch += 10; // Increase the pitch\r\n                            if (pitch &gt; 100) pitch = 100;\r\n                        }\r\n                        // Bottom part of the cross - Decrease pitch\r\n                        else {\r\n                            pitch -= 10; // Decrease pitch\r\n                            if (pitch &lt; 0) pitch = 0;\r\n                        }\r\n\r\n                        // Left part of the cross - Send power to the right (yaw right)\r\n                        if (event.getX() &lt; (float) v.getWidth() / 2) {\r\n                            yaw -= 10; // Yaw right\r\n                            if (yaw &lt; -100) yaw = -100;\r\n                        }\r\n                        // Right part of the cross - Send power to the left (yaw left)\r\n                        else {\r\n                            yaw += 10; // Yaw left\r\n                            if (yaw &gt; 100) yaw = 100;\r\n                        }\r\n\r\n                        // Update airplane control based on new values\r\n                        updateAirplaneControl(throttle, bodyRoll, yaw, pitch);\r\n                        break;\r\n\r\n                    case MotionEvent.ACTION_UP:\r\n                        // Stop applying pitch and yaw when the button is released\r\n                        pitch = 0;\r\n                        yaw = 0;\r\n                        updateAirplaneControl(throttle, bodyRoll, yaw, pitch);\r\n                        break;\r\n                }\r\n\r\n                return true;\r\n            }\r\n        });\r\n\r\n        // Registers a BroadcastReceiver to monitor battery level changes\r\n        registerBatteryLevelReceiver();\r\n\r\n        // Set onClickListener for the Bluetooth button\r\n        bluetoothButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                // Implement Bluetooth device discovery, pairing, and connection here\r\n                discoverBluetoothDevices();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void initBluetooth() {\r\n        bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();\r\n        if (bluetoothAdapter == null) {\r\n            // Device doesn&#39;t support Bluetooth\r\n            // Handle this case\r\n            return;\r\n        }\r\n\r\n        if (!bluetoothAdapter.isEnabled()) {\r\n            // Bluetooth is not enabled, request the user to enable it\r\n            Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);\r\n            startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);\r\n            return;\r\n        }\r\n    }\r\n\r\n    private void discoverBluetoothDevices() {\r\n        // Check if Bluetooth is supported and if the necessary permission is granted\r\n        int permissionCheck = ContextCompat.checkSelfPermission(this,\r\n                Manifest.permission.BLUETOOTH);\r\n\r\n        if (permissionCheck != PackageManager.PERMISSION_GRANTED) {\r\n            // Bluetooth permission not granted, request it\r\n            ActivityCompat.requestPermissions(this,\r\n                    new String[]{Manifest.permission.BLUETOOTH},\r\n                    REQUEST_PERMISSION_BLUETOOTH);\r\n            return;\r\n        }\r\n\r\n        // Check if Bluetooth is available and enabled\r\n        if (bluetoothAdapter == null || !bluetoothAdapter.isEnabled()) {\r\n            System.out.println(&quot;Bluetooth is not available or not enabled.&quot;);\r\n            return;\r\n        }\r\n\r\n        // Start device discovery\r\n        if (bluetoothAdapter.startDiscovery()) {\r\n            // Register a BroadcastReceiver for discovery\r\n            IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);\r\n            registerReceiver(new BroadcastReceiver() {\r\n                @Override\r\n                public void onReceive(Context context, Intent intent) {\r\n                    String action = intent.getAction();\r\n                    if (BluetoothDevice.ACTION_FOUND.equals(action)) {\r\n                        BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);\r\n                        // Handle the discovered device\r\n                        System.out.println(&quot;Discovered device: &quot; + device.getName() + &quot; (&quot; + device.getAddress() + &quot;)&quot;);\r\n                    }\r\n                }\r\n            }, filter);\r\n        } else {\r\n            System.out.println(&quot;Failed to start Bluetooth device discovery.&quot;);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions,\r\n                                           @NonNull int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n\r\n        if (requestCode == REQUEST_PERMISSION_BLUETOOTH) {\r\n            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                // Permission granted, initialize Bluetooth\r\n                initBluetooth();\r\n            } else {\r\n                // Permission denied, handle accordingly (e.g., show a message)\r\n            }\r\n        }\r\n    }\r\n\r\n    private void updateAirplaneControl(int throttle, int bodyRoll, int yaw, int pitch) {\r\n        System.out.println(&quot;Throttle: &quot; + throttle + &quot;%&quot;);\r\n        System.out.println(&quot;Body Roll: &quot; + bodyRoll + &quot;%&quot;);\r\n        System.out.println(&quot;Yaw: &quot; + yaw + &quot;%&quot;);\r\n        System.out.println(&quot;Pitch: &quot; + pitch + &quot;%&quot;);\r\n    }\r\n\r\n    private void registerBatteryLevelReceiver() {\r\n        IntentFilter filter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);\r\n        BroadcastReceiver batteryLevelReceiver = new BroadcastReceiver() {\r\n            @Override\r\n            public void onReceive(Context context, Intent intent) {\r\n                int level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);\r\n                int scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);\r\n                int batteryLevel = (int) ((level / (float) scale) * 100);\r\n\r\n                updateBatteryIcon(batteryLevel);\r\n            }\r\n        };\r\n        registerReceiver(batteryLevelReceiver, filter);\r\n    }\r\n\r\n    private void updateBatteryIcon(int batteryLevel) {\r\n        if (batteryLevel &gt;= 90) {\r\n            batteryIcon.setImageResource(R.drawable.ic_battery_full);\r\n        } else if (batteryLevel &gt;= 50) {\r\n            batteryIcon.setImageResource(R.drawable.ic_battery_50);\r\n        } else if (batteryLevel &gt;= 20) {\r\n            batteryIcon.setImageResource(R.drawable.ic_battery_20);\r\n        } else {\r\n            batteryIcon.setImageResource(R.drawable.ic_battery_dead);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n```\r\nand here is my AndroidManifest.xml\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_CONNECT&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_SCAN&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot;/&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@drawable/left_dpad&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.RcAir&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;\r\n            android:screenOrientation=&quot;landscape&quot;&gt;\r\n\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\n\r\nIve been playing around with it, I already added permissions in my XML file and imported them to my java file. But no matter what I do, i constanly recieve Call requires permission which may be rejected by user: code should explicitly check to see if permission is available (with `checkPermission`) or explicitly handle a potential `SecurityException` and Call requires permission which may be rejected by user: code should explicitly check to see if permission is available (with `checkPermission`) or explicitly handle a potential `SecurityException`. As stated before the app runs as should but when clicking the bluetooth button it will crash the app entirely.","title":"Issue with Bluetooth Connection in Android Studio","body":"<p>To give a backstory, I am building an android app in android studio using java. This app serves as a digital RC controller for an RC airplane. My goal is to be able to connect to the airplane via bluetooth and controll the airplane from my android phone. Ive worked with android studio and java for a long time but I never worked with bluetooth connections/permissions before. I get the app to run and function but however my bluetooth functionality is janky. I have a button already created labeled as bluetooth but right now it does nothing. I tried to make it where when you click the bluetooth button and menu would pop up with bluetooths that are available to connect, however when doing so the app just crashes. Below is my MainActivity.Java code and my AndroidManifest.xml</p>\n<pre><code>package com.example.rcair;\n\nimport android.Manifest;\nimport android.bluetooth.BluetoothAdapter;\nimport android.bluetooth.BluetoothDevice;\nimport android.bluetooth.BluetoothSocket;\nimport android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.IntentFilter;\nimport android.content.pm.PackageManager;\nimport android.os.BatteryManager;\nimport android.os.Bundle;\nimport android.view.MotionEvent;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.ImageView;\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\nimport androidx.core.content.ContextCompat;\nimport java.io.IOException;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private Button dragLeftButton;\n    private Button dragRightButton;\n    private ImageView batteryIcon;\n    private Button bluetoothButton;\n\n    private int throttle = 0;\n    private int bodyRoll = 0;\n    private int yaw = 0;\n    private int pitch = 0;\n\n    // Bluetooth variables\n    private BluetoothAdapter bluetoothAdapter;\n    private BluetoothSocket bluetoothSocket;\n    private BluetoothDevice bluetoothDevice;\n\n    private static final int REQUEST_ENABLE_BT = 1;\n    private static final int REQUEST_PERMISSION_BLUETOOTH = 2;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        // Initialize views\n        dragLeftButton = findViewById(R.id.dragLeft);\n        dragRightButton = findViewById(R.id.dragRight);\n        batteryIcon = findViewById(R.id.batteryIcon);\n        bluetoothButton = findViewById(R.id.bluetoothButton);\n\n        // Initialize Bluetooth\n        initBluetooth();\n\n        // Set onTouchListener for the dragRightButton\n        dragRightButton.setOnTouchListener(new View.OnTouchListener() {\n            @Override\n            public boolean onTouch(View v, MotionEvent event) {\n                int action = event.getAction();\n\n                switch (action) {\n                    case MotionEvent.ACTION_DOWN:\n                        // Top part of the cross - Increase pitch\n                        if (event.getY() &lt; (float) v.getHeight() / 2) {\n                            pitch += 10; // Increase the pitch\n                            if (pitch &gt; 100) pitch = 100;\n                        }\n                        // Bottom part of the cross - Decrease pitch\n                        else {\n                            pitch -= 10; // Decrease pitch\n                            if (pitch &lt; 0) pitch = 0;\n                        }\n\n                        // Left part of the cross - Send power to the right (yaw right)\n                        if (event.getX() &lt; (float) v.getWidth() / 2) {\n                            yaw -= 10; // Yaw right\n                            if (yaw &lt; -100) yaw = -100;\n                        }\n                        // Right part of the cross - Send power to the left (yaw left)\n                        else {\n                            yaw += 10; // Yaw left\n                            if (yaw &gt; 100) yaw = 100;\n                        }\n\n                        // Update airplane control based on new values\n                        updateAirplaneControl(throttle, bodyRoll, yaw, pitch);\n                        break;\n\n                    case MotionEvent.ACTION_UP:\n                        // Stop applying pitch and yaw when the button is released\n                        pitch = 0;\n                        yaw = 0;\n                        updateAirplaneControl(throttle, bodyRoll, yaw, pitch);\n                        break;\n                }\n\n                return true;\n            }\n        });\n\n        // Registers a BroadcastReceiver to monitor battery level changes\n        registerBatteryLevelReceiver();\n\n        // Set onClickListener for the Bluetooth button\n        bluetoothButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                // Implement Bluetooth device discovery, pairing, and connection here\n                discoverBluetoothDevices();\n            }\n        });\n    }\n\n    private void initBluetooth() {\n        bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();\n        if (bluetoothAdapter == null) {\n            // Device doesn't support Bluetooth\n            // Handle this case\n            return;\n        }\n\n        if (!bluetoothAdapter.isEnabled()) {\n            // Bluetooth is not enabled, request the user to enable it\n            Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);\n            startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);\n            return;\n        }\n    }\n\n    private void discoverBluetoothDevices() {\n        // Check if Bluetooth is supported and if the necessary permission is granted\n        int permissionCheck = ContextCompat.checkSelfPermission(this,\n                Manifest.permission.BLUETOOTH);\n\n        if (permissionCheck != PackageManager.PERMISSION_GRANTED) {\n            // Bluetooth permission not granted, request it\n            ActivityCompat.requestPermissions(this,\n                    new String[]{Manifest.permission.BLUETOOTH},\n                    REQUEST_PERMISSION_BLUETOOTH);\n            return;\n        }\n\n        // Check if Bluetooth is available and enabled\n        if (bluetoothAdapter == null || !bluetoothAdapter.isEnabled()) {\n            System.out.println(&quot;Bluetooth is not available or not enabled.&quot;);\n            return;\n        }\n\n        // Start device discovery\n        if (bluetoothAdapter.startDiscovery()) {\n            // Register a BroadcastReceiver for discovery\n            IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);\n            registerReceiver(new BroadcastReceiver() {\n                @Override\n                public void onReceive(Context context, Intent intent) {\n                    String action = intent.getAction();\n                    if (BluetoothDevice.ACTION_FOUND.equals(action)) {\n                        BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);\n                        // Handle the discovered device\n                        System.out.println(&quot;Discovered device: &quot; + device.getName() + &quot; (&quot; + device.getAddress() + &quot;)&quot;);\n                    }\n                }\n            }, filter);\n        } else {\n            System.out.println(&quot;Failed to start Bluetooth device discovery.&quot;);\n        }\n    }\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions,\n                                           @NonNull int[] grantResults) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n\n        if (requestCode == REQUEST_PERMISSION_BLUETOOTH) {\n            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                // Permission granted, initialize Bluetooth\n                initBluetooth();\n            } else {\n                // Permission denied, handle accordingly (e.g., show a message)\n            }\n        }\n    }\n\n    private void updateAirplaneControl(int throttle, int bodyRoll, int yaw, int pitch) {\n        System.out.println(&quot;Throttle: &quot; + throttle + &quot;%&quot;);\n        System.out.println(&quot;Body Roll: &quot; + bodyRoll + &quot;%&quot;);\n        System.out.println(&quot;Yaw: &quot; + yaw + &quot;%&quot;);\n        System.out.println(&quot;Pitch: &quot; + pitch + &quot;%&quot;);\n    }\n\n    private void registerBatteryLevelReceiver() {\n        IntentFilter filter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);\n        BroadcastReceiver batteryLevelReceiver = new BroadcastReceiver() {\n            @Override\n            public void onReceive(Context context, Intent intent) {\n                int level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);\n                int scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);\n                int batteryLevel = (int) ((level / (float) scale) * 100);\n\n                updateBatteryIcon(batteryLevel);\n            }\n        };\n        registerReceiver(batteryLevelReceiver, filter);\n    }\n\n    private void updateBatteryIcon(int batteryLevel) {\n        if (batteryLevel &gt;= 90) {\n            batteryIcon.setImageResource(R.drawable.ic_battery_full);\n        } else if (batteryLevel &gt;= 50) {\n            batteryIcon.setImageResource(R.drawable.ic_battery_50);\n        } else if (batteryLevel &gt;= 20) {\n            batteryIcon.setImageResource(R.drawable.ic_battery_20);\n        } else {\n            batteryIcon.setImageResource(R.drawable.ic_battery_dead);\n        }\n    }\n}\n\n\n</code></pre>\n<p>and here is my AndroidManifest.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_CONNECT&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_SCAN&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot;/&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@drawable/left_dpad&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.RcAir&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;\n            android:screenOrientation=&quot;landscape&quot;&gt;\n\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>Ive been playing around with it, I already added permissions in my XML file and imported them to my java file. But no matter what I do, i constanly recieve Call requires permission which may be rejected by user: code should explicitly check to see if permission is available (with <code>checkPermission</code>) or explicitly handle a potential <code>SecurityException</code> and Call requires permission which may be rejected by user: code should explicitly check to see if permission is available (with <code>checkPermission</code>) or explicitly handle a potential <code>SecurityException</code>. As stated before the app runs as should but when clicking the bluetooth button it will crash the app entirely.</p>\n"},{"tags":["python","java","email","smtp","telegram-bot"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1695238579,"post_id":77145423,"comment_id":135999461,"body_markdown":"No, that&#39;s not allowed. You can&#39;t just send email from any random address the user enters. At least, not if you want it to arrive and not be blocked by all kinds of spam filters.","body":"No, that&#39;s not allowed. You can&#39;t just send email from any random address the user enters. At least, not if you want it to arrive and not be blocked by all kinds of spam filters."},{"owner":{"account_id":5582693,"reputation":587,"user_id":4424117,"display_name":"newuserua_ext"},"score":0,"creation_date":1695279658,"post_id":77145423,"comment_id":136003750,"body_markdown":"with your common credentials you may use his/her email string. i mean when you send email you may change sender name but not credentials.","body":"with your common credentials you may use his/her email string. i mean when you send email you may change sender name but not credentials."}],"owner":{"account_id":22993687,"reputation":1,"user_id":21972345,"display_name":"Andrey"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695237970,"creation_date":1695237970,"question_id":77145423,"body_markdown":"I want to implement this logic. The user enters his email, email subject, and email description into the bot. Then the bot processes this letter and sends it to Example@platform.gov.ru. The problem arises that to send a letter you need smtp_password, which is different from the regular mail password, maybe there are ways to get this password without requiring too much from the user?  \r\nMaybe there is a ready-made solution on Python or Java?\r\n\r\n```\r\nTried different code like this\r\n```\r\n\r\n    import smtplib\r\n    from email.mime.text import MIMEText\r\n    \r\n    def send_email(sender_email, recipient_email, subject, message):\r\n        smtp_server = &#39;smtp.google.com&#39;\r\n        smtp_port = 587\r\n        smtp_username = User_name\r\n        smtp_password = User_password\r\n    \r\n        msg = MIMEText(message)\r\n        msg[&#39;Subject&#39;] = subject\r\n        msg[&#39;From&#39;] = sender_email\r\n        msg[&#39;To&#39;] = recipient_email\r\n    \r\n        try:\r\n            with smtplib.SMTP(smtp_server, smtp_port) as server:\r\n                server.starttls()\r\n                server.login(smtp_username, smtp_password)\r\n                server.send_message(msg)\r\n            print(&#39;Email sent successfully.&#39;)\r\n        except Exception as e:\r\n            print(f&#39;Failed to send email. Error: {str(e)}&#39;)\r\n    \r\n    \r\n    sender_email = input(&#39;Enter your sender email: &#39;)\r\n    recipient_email = input(&#39;Enter recipients address: &#39;)\r\n    subject = input(&#39;Enter the subject of the message: &#39;)\r\n    message = input(&#39;Enter message text: &#39;)\r\n    \r\n    send_email(sender_email, recipient_email, subject, message)","title":"I want to send an email to an email address that will send users via Telegram bot","body":"<p>I want to implement this logic. The user enters his email, email subject, and email description into the bot. Then the bot processes this letter and sends it to Example@platform.gov.ru. The problem arises that to send a letter you need smtp_password, which is different from the regular mail password, maybe there are ways to get this password without requiring too much from the user?<br />\nMaybe there is a ready-made solution on Python or Java?</p>\n<pre><code>Tried different code like this\n</code></pre>\n<pre><code>import smtplib\nfrom email.mime.text import MIMEText\n\ndef send_email(sender_email, recipient_email, subject, message):\n    smtp_server = 'smtp.google.com'\n    smtp_port = 587\n    smtp_username = User_name\n    smtp_password = User_password\n\n    msg = MIMEText(message)\n    msg['Subject'] = subject\n    msg['From'] = sender_email\n    msg['To'] = recipient_email\n\n    try:\n        with smtplib.SMTP(smtp_server, smtp_port) as server:\n            server.starttls()\n            server.login(smtp_username, smtp_password)\n            server.send_message(msg)\n        print('Email sent successfully.')\n    except Exception as e:\n        print(f'Failed to send email. Error: {str(e)}')\n\n\nsender_email = input('Enter your sender email: ')\nrecipient_email = input('Enter recipients address: ')\nsubject = input('Enter the subject of the message: ')\nmessage = input('Enter message text: ')\n\nsend_email(sender_email, recipient_email, subject, message)\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":157346,"reputation":54254,"user_id":375232,"accept_rate":100,"display_name":"Landei"},"score":1,"creation_date":1283170453,"post_id":3590677,"comment_id":3779416,"body_markdown":"Again, you&#39;re talking about set functions, but you use lists. So your insert function is already wrong: You&#39;re not testing for duplicates.","body":"Again, you&#39;re talking about set functions, but you use lists. So your insert function is already wrong: You&#39;re not testing for duplicates."},{"owner":{"account_id":1671693,"reputation":2724,"user_id":1538041,"accept_rate":57,"display_name":"Martin H&#246;ller"},"score":0,"creation_date":1621504597,"post_id":3590677,"comment_id":119518215,"body_markdown":"Just for the records, there is also https://stackoverflow.com/questions/5283047, which handles the same topic and also has a lot of answers.","body":"Just for the records, there is also <a href=\"https://stackoverflow.com/questions/5283047\">stackoverflow.com/questions/5283047</a>, which handles the same topic and also has a lot of answers."},{"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1695237860,"post_id":3590677,"comment_id":135999328,"body_markdown":"I notice that you ask for an implementation of the reverse operation, but your template to implement doesn&#39;t actually have a &quot;reverse&quot; method.","body":"I notice that you ask for an implementation of the reverse operation, but your template to implement doesn&#39;t actually have a &quot;reverse&quot; method."}],"answers":[{"tags":[],"owner":{"account_id":157346,"reputation":54254,"user_id":375232,"accept_rate":100,"display_name":"Landei"},"down_vote_count":0,"up_vote_count":81,"is_accepted":false,"score":81,"last_activity_date":1283082803,"creation_date":1282998011,"answer_id":3590718,"question_id":3590677,"body_markdown":"First, the operations you describe (except reverse) are set operations, not list operations, so use HashSet or (if you need an ordering) TreeSet.\r\n\r\n        Set&lt;Integer&gt; a = new TreeSet&lt;Integer&gt;(Arrays.asList(new Integer[]{0,2,4,5,6,8,10}));\r\n        Set&lt;Integer&gt; b = new TreeSet&lt;Integer&gt;(Arrays.asList(new Integer[]{5,6,7,8,9,10}));\r\n\r\n        //union\r\n        Set&lt;Integer&gt; c = new TreeSet&lt;Integer&gt;(a);\r\n        c.addAll(b);\r\n        System.out.println(c);\r\n\r\n        //intersection\r\n        Set&lt;Integer&gt; d = new TreeSet&lt;Integer&gt;(a);\r\n        d.retainAll(b);\r\n        System.out.println(d);\r\n\r\n        //difference\r\n        Set&lt;Integer&gt; e = new TreeSet&lt;Integer&gt;(a);\r\n        e.removeAll(b);\r\n        System.out.println(e);\r\n\r\n        //reverse\r\n        List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;(a);\r\n        java.util.Collections.reverse(list);\r\n        System.out.println(list);\r\n\r\n\r\n\r\n","title":"How to do union, intersect, difference and reverse data in java","body":"<p>First, the operations you describe (except reverse) are set operations, not list operations, so use HashSet or (if you need an ordering) TreeSet.</p>\n\n<pre><code>    Set&lt;Integer&gt; a = new TreeSet&lt;Integer&gt;(Arrays.asList(new Integer[]{0,2,4,5,6,8,10}));\n    Set&lt;Integer&gt; b = new TreeSet&lt;Integer&gt;(Arrays.asList(new Integer[]{5,6,7,8,9,10}));\n\n    //union\n    Set&lt;Integer&gt; c = new TreeSet&lt;Integer&gt;(a);\n    c.addAll(b);\n    System.out.println(c);\n\n    //intersection\n    Set&lt;Integer&gt; d = new TreeSet&lt;Integer&gt;(a);\n    d.retainAll(b);\n    System.out.println(d);\n\n    //difference\n    Set&lt;Integer&gt; e = new TreeSet&lt;Integer&gt;(a);\n    e.removeAll(b);\n    System.out.println(e);\n\n    //reverse\n    List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;(a);\n    java.util.Collections.reverse(list);\n    System.out.println(list);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":645588,"reputation":482,"user_id":433683,"display_name":"anand"},"down_vote_count":2,"up_vote_count":47,"is_accepted":true,"score":45,"last_activity_date":1282998414,"creation_date":1282998112,"answer_id":3590725,"question_id":3590677,"body_markdown":"    //Union \r\n    List&lt;Integer&gt; c = new ArrayList&lt;Integer&gt;(a.size() + b.size());\r\n    addNoDups(c,a);\r\n    addNoDups(c,b);\r\n    \r\n    private void addNoDups(List&lt;Integer&gt; toAddTo,List&lt;Integer&gt; iterateOver) {\r\n        for(Integer num:iterateOver){\r\n            if(toAddTo.indexOf(num) == -1) {\r\n                toAddTo.add(num);\r\n            }\r\n        }\r\n    }\r\n    \r\n    //intersection\r\n    List&lt;Integer&gt; c = new ArrayList&lt;Integer&gt; (a.size() &gt; b.size() ?a.size():b.size());\r\n    c.addAll(a);\r\n    c.retainAll(b);\r\n    \r\n    //difference a-b\r\n    List&lt;Integer&gt; c = new ArrayList&lt;Integer&gt; (a.size());\r\n    c.addAll(a);\r\n    c.removeAll(b);\r\n\r\n","title":"How to do union, intersect, difference and reverse data in java","body":"<pre><code>//Union \nList&lt;Integer&gt; c = new ArrayList&lt;Integer&gt;(a.size() + b.size());\naddNoDups(c,a);\naddNoDups(c,b);\n\nprivate void addNoDups(List&lt;Integer&gt; toAddTo,List&lt;Integer&gt; iterateOver) {\n    for(Integer num:iterateOver){\n        if(toAddTo.indexOf(num) == -1) {\n            toAddTo.add(num);\n        }\n    }\n}\n\n//intersection\nList&lt;Integer&gt; c = new ArrayList&lt;Integer&gt; (a.size() &gt; b.size() ?a.size():b.size());\nc.addAll(a);\nc.retainAll(b);\n\n//difference a-b\nList&lt;Integer&gt; c = new ArrayList&lt;Integer&gt; (a.size());\nc.addAll(a);\nc.removeAll(b);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":49683,"reputation":9264,"user_id":148059,"display_name":"atk"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1506789736,"creation_date":1283088308,"answer_id":3594918,"question_id":3590677,"body_markdown":"A lot of the answers tell you to use libraries that will do the work for you.  While this is the right solution for the real world, keep in mind hat you&#39;re doing homework, and your teacher probably wants you to understand how the functions are written, not just how to find libraries to do the work for you.\r\n\r\nThat said, you&#39;ve got a good start with the code you&#39;ve shown.  Let&#39;s take the problem one step at a time.\r\n\r\nFirst, do you know where the Java documentation is located? http://download.oracle.com/javase/1.4.2/docs/api/ this is critical, as this is how you find out what functions do what.  Here&#39;s the link to Java 1.4.  I didn&#39;t notice what version you&#39;re using, but Java is backward compatible, so this should be sufficient.\r\n\r\nIn the docs, find the ArrayList entry.\r\n\r\n\r\nNow that we&#39;ve got the API docs, we need to break down your question.  you&#39;ve posted code, so I&#39;ll address it function by function.\r\n\r\ninsert() : do you have to have an ordered list, or does order not matter?  Or are you guaranteed that values will be provided to you in order?  Have you learned sorting algorithms yet?\r\n\r\nremove() : this function doesn&#39;t work.  take a look at the ArrayList API and see how to remove an item from the list.  Use that method.\r\n\r\nmember() : your member method doesn&#39;t work. You need to check every entry of the list and determine if the current member matches the function argument.  Have you learned about for loops?\r\n\r\nintersect() : ok, tell me in English what intersect is supposed to do.  Don&#39;t use the teacher&#39;s description if you can help it - use your own words (note to others, this is an exercise for the OP to learn to program, so please don&#39;t go answering it for him)\r\n\r\ndifference() : again, tell me in English what it&#39;s supposed to do.\r\n\r\nreverse() : again, give me the English description of what this is supposed to do.\r\n\r\n\r\nOnce you have english descriptions, describe an algorithm that can do the work. don&#39;t write it in Java yet.  just write an algorithm, in english, describing how you would do the work manaully, with pen and paper.\r\n\r\nat this point, try and convert the algorithm to Java code.\r\n\r\n\r\n\r\n\r\n\r\n\r\n ","title":"How to do union, intersect, difference and reverse data in java","body":"<p>A lot of the answers tell you to use libraries that will do the work for you.  While this is the right solution for the real world, keep in mind hat you're doing homework, and your teacher probably wants you to understand how the functions are written, not just how to find libraries to do the work for you.</p>\n\n<p>That said, you've got a good start with the code you've shown.  Let's take the problem one step at a time.</p>\n\n<p>First, do you know where the Java documentation is located? <a href=\"http://download.oracle.com/javase/1.4.2/docs/api/\" rel=\"nofollow noreferrer\">http://download.oracle.com/javase/1.4.2/docs/api/</a> this is critical, as this is how you find out what functions do what.  Here's the link to Java 1.4.  I didn't notice what version you're using, but Java is backward compatible, so this should be sufficient.</p>\n\n<p>In the docs, find the ArrayList entry.</p>\n\n<p>Now that we've got the API docs, we need to break down your question.  you've posted code, so I'll address it function by function.</p>\n\n<p>insert() : do you have to have an ordered list, or does order not matter?  Or are you guaranteed that values will be provided to you in order?  Have you learned sorting algorithms yet?</p>\n\n<p>remove() : this function doesn't work.  take a look at the ArrayList API and see how to remove an item from the list.  Use that method.</p>\n\n<p>member() : your member method doesn't work. You need to check every entry of the list and determine if the current member matches the function argument.  Have you learned about for loops?</p>\n\n<p>intersect() : ok, tell me in English what intersect is supposed to do.  Don't use the teacher's description if you can help it - use your own words (note to others, this is an exercise for the OP to learn to program, so please don't go answering it for him)</p>\n\n<p>difference() : again, tell me in English what it's supposed to do.</p>\n\n<p>reverse() : again, give me the English description of what this is supposed to do.</p>\n\n<p>Once you have english descriptions, describe an algorithm that can do the work. don't write it in Java yet.  just write an algorithm, in english, describing how you would do the work manaully, with pen and paper.</p>\n\n<p>at this point, try and convert the algorithm to Java code.</p>\n"},{"tags":[],"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1470319353,"creation_date":1470319353,"answer_id":38769561,"question_id":3590677,"body_markdown":"If you are using Sets (as you should, for all of those except reverse are Set operations), [**Guava**][1] provides these operations in it&#39;s [**`Sets`**][2] class.\r\n\r\n\r\n    Set&lt;Integer&gt; union = Sets.union(set1, set2);\r\n    Set&lt;Integer&gt; intersection = Sets.intersection(set1, set2);\r\n    Set&lt;Integer&gt; difference = Sets.difference(set1, set2);\r\n\r\nAll of these return unmodifiable views, backed by the original Sets.\r\n\r\nSee [**Guava Explained** -&gt; **Collection Utilities** -&gt; **Sets**][3]\r\n\r\nIf Lists are what you have, you can convert them to a Set by using the copy constructor present in all standard collections:\r\n\r\n    List&lt;X&gt; list = new ArrayList&lt;&gt;();\r\n    // fill up list here\r\n    Set&lt;X&gt; set = new HashSet&lt;&gt;(list);\r\n\r\n  [1]: https://github.com/google/guava\r\n  [2]: https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Sets.html\r\n  [3]: https://github.com/google/guava/wiki/CollectionUtilitiesExplained#sets\r\n","title":"How to do union, intersect, difference and reverse data in java","body":"<p>If you are using Sets (as you should, for all of those except reverse are Set operations), <a href=\"https://github.com/google/guava\" rel=\"noreferrer\"><strong>Guava</strong></a> provides these operations in it's <a href=\"https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Sets.html\" rel=\"noreferrer\"><strong><code>Sets</code></strong></a> class.</p>\n\n<pre><code>Set&lt;Integer&gt; union = Sets.union(set1, set2);\nSet&lt;Integer&gt; intersection = Sets.intersection(set1, set2);\nSet&lt;Integer&gt; difference = Sets.difference(set1, set2);\n</code></pre>\n\n<p>All of these return unmodifiable views, backed by the original Sets.</p>\n\n<p>See <a href=\"https://github.com/google/guava/wiki/CollectionUtilitiesExplained#sets\" rel=\"noreferrer\"><strong>Guava Explained</strong> -> <strong>Collection Utilities</strong> -> <strong>Sets</strong></a></p>\n\n<p>If Lists are what you have, you can convert them to a Set by using the copy constructor present in all standard collections:</p>\n\n<pre><code>List&lt;X&gt; list = new ArrayList&lt;&gt;();\n// fill up list here\nSet&lt;X&gt; set = new HashSet&lt;&gt;(list);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5376903,"reputation":770,"user_id":4283455,"accept_rate":80,"display_name":"An Nguyen"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1487736119,"creation_date":1487736119,"answer_id":42382480,"question_id":3590677,"body_markdown":"This snippet will find the union of two collections using apache commons CollectionUtils.union method\r\n\r\n    Collection&lt;String&gt; totalFriends = CollectionUtils.union(yourFriends, myFriends);","title":"How to do union, intersect, difference and reverse data in java","body":"<p>This snippet will find the union of two collections using apache commons CollectionUtils.union method</p>\n\n<pre><code>Collection&lt;String&gt; totalFriends = CollectionUtils.union(yourFriends, myFriends);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8598286,"reputation":11087,"user_id":6440704,"display_name":"Anton Balaniuc"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1509971698,"creation_date":1509971698,"answer_id":47137182,"question_id":3590677,"body_markdown":"I just will leave it here. There is a new way with `java-8` and `streams`\r\n\r\n    List&lt;Integer&gt; listA = Arrays.asList(0, 2, 4, 5, 6, 8, 10);\r\n    List&lt;Integer&gt; listB = Arrays.asList(5, 6, 7, 8, 9, 10);\r\n    \r\n    List&lt;Integer&gt; intersection = listA.stream()\r\n            .filter(listB::contains)\r\n            .collect(Collectors.toList());\r\n    \r\n    List&lt;Integer&gt; union = Stream.concat(listA.stream(), listB.stream())\r\n            .distinct().sorted()\r\n            .collect(Collectors.toList());\r\n    \r\n    List&lt;Integer&gt; aDiffB = listA.stream()\r\n            .filter(i -&gt; !listB.contains(i))\r\n            .collect(Collectors.toList());\r\n    \r\n    System.out.println(intersection); // [5, 6, 8, 10]\r\n    System.out.println(union); // [0, 2, 4, 5, 6, 7, 8, 9, 10]\r\n    System.out.println(aDiffB); // [0, 2, 4]","title":"How to do union, intersect, difference and reverse data in java","body":"<p>I just will leave it here. There is a new way with <code>java-8</code> and <code>streams</code></p>\n\n<pre><code>List&lt;Integer&gt; listA = Arrays.asList(0, 2, 4, 5, 6, 8, 10);\nList&lt;Integer&gt; listB = Arrays.asList(5, 6, 7, 8, 9, 10);\n\nList&lt;Integer&gt; intersection = listA.stream()\n        .filter(listB::contains)\n        .collect(Collectors.toList());\n\nList&lt;Integer&gt; union = Stream.concat(listA.stream(), listB.stream())\n        .distinct().sorted()\n        .collect(Collectors.toList());\n\nList&lt;Integer&gt; aDiffB = listA.stream()\n        .filter(i -&gt; !listB.contains(i))\n        .collect(Collectors.toList());\n\nSystem.out.println(intersection); // [5, 6, 8, 10]\nSystem.out.println(union); // [0, 2, 4, 5, 6, 7, 8, 9, 10]\nSystem.out.println(aDiffB); // [0, 2, 4]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1712726,"reputation":6528,"user_id":1570415,"display_name":"Donald Raab"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1606519445,"creation_date":1606518888,"answer_id":65044839,"question_id":3590677,"body_markdown":"The methods `addAll`, `retainAll` and `removeAll` are the methods most commonly used to implement `union`, `intersect` and `difference` in Java. With Streams in Java 8+, you do have some more options for `intersect` and `difference` using `filter` as pointed out in a previous answer.  \r\n\r\nIf you&#39;re open to using a third-party library, the following code will work with primitive collections using [Eclipse Collections][1] when version 11.0 of the library is released.\r\n\r\n    @Test\r\n    public void unionIntersectDifferenceReverse()\r\n    {\r\n        IntList list1 = IntLists.immutable.with(0, 2, 4, 5, 6, 8, 10);\r\n        IntList list2 = IntLists.immutable.with(5, 6, 7, 8, 9, 10);\r\n    \r\n        MutableIntSet set1 = list1.toSet();\r\n        MutableIntSet set2 = list2.toSet();\r\n    \r\n        IntSet union = set1.union(set2);\r\n        IntSet intersection = set1.intersect(set2);\r\n        IntSet difference = set1.difference(set2);\r\n    \r\n        IntList reversed = list1.toReversed();\r\n    \r\n        Assert.assertEquals(IntSets.mutable.with(0, 2, 4, 5, 6, 7, 8, 9, 10), union);\r\n        Assert.assertEquals(IntSets.mutable.with(5, 6, 8, 10), intersection);\r\n        Assert.assertEquals(IntSets.mutable.with(0, 2, 4), difference);\r\n        Assert.assertEquals(IntLists.mutable.with(10, 8, 6, 5, 4, 2, 0), reversed);\r\n    }\r\n\r\nThis functionality was [recently contributed to primitive Sets in Eclipse Collections][2]. The linked blog describes how these methods are implemented on primitive sets.\r\n\r\nThe following code uses object collections with boxed Integers. This code will work with Eclipse Collections releases available today.\r\n\r\n    @Test\r\n    public void unionIntersectDifferenceReverseWithBoxedIntegers()\r\n    {\r\n        ImmutableList&lt;Integer&gt; list1 = Lists.immutable.with(0, 2, 4, 5, 6, 8, 10);\r\n        ImmutableList&lt;Integer&gt; list2 = Lists.immutable.with(5, 6, 7, 8, 9, 10);\r\n    \r\n        MutableSet&lt;Integer&gt; set1 = list1.toSet();\r\n        MutableSet&lt;Integer&gt; set2 = list2.toSet();\r\n    \r\n        MutableSet&lt;Integer&gt; union = set1.union(set2);\r\n        MutableSet&lt;Integer&gt; intersection = set1.intersect(set2);\r\n        MutableSet&lt;Integer&gt; difference = set1.difference(set2);\r\n    \r\n        ImmutableList reversed = list1.toReversed();\r\n    \r\n        Assert.assertEquals(Sets.mutable.with(0, 2, 4, 5, 6, 7, 8, 9, 10), union);\r\n        Assert.assertEquals(Sets.mutable.with(5, 6, 8, 10), intersection);\r\n        Assert.assertEquals(Sets.mutable.with(0, 2, 4), difference);\r\n        Assert.assertEquals(Lists.mutable.with(10, 8, 6, 5, 4, 2, 0), reversed);\r\n    }\r\n\r\nNote: I am a committer for Eclipse Collections.\r\n\r\n\r\n  [1]: https://github.com/eclipse/eclipse-collections\r\n  [2]: https://pratha-sirisha.medium.com/primitive-set-operations-in-eclipse-collections-b126c9121d15","title":"How to do union, intersect, difference and reverse data in java","body":"<p>The methods <code>addAll</code>, <code>retainAll</code> and <code>removeAll</code> are the methods most commonly used to implement <code>union</code>, <code>intersect</code> and <code>difference</code> in Java. With Streams in Java 8+, you do have some more options for <code>intersect</code> and <code>difference</code> using <code>filter</code> as pointed out in a previous answer.</p>\n<p>If you're open to using a third-party library, the following code will work with primitive collections using <a href=\"https://github.com/eclipse/eclipse-collections\" rel=\"nofollow noreferrer\">Eclipse Collections</a> when version 11.0 of the library is released.</p>\n<pre><code>@Test\npublic void unionIntersectDifferenceReverse()\n{\n    IntList list1 = IntLists.immutable.with(0, 2, 4, 5, 6, 8, 10);\n    IntList list2 = IntLists.immutable.with(5, 6, 7, 8, 9, 10);\n\n    MutableIntSet set1 = list1.toSet();\n    MutableIntSet set2 = list2.toSet();\n\n    IntSet union = set1.union(set2);\n    IntSet intersection = set1.intersect(set2);\n    IntSet difference = set1.difference(set2);\n\n    IntList reversed = list1.toReversed();\n\n    Assert.assertEquals(IntSets.mutable.with(0, 2, 4, 5, 6, 7, 8, 9, 10), union);\n    Assert.assertEquals(IntSets.mutable.with(5, 6, 8, 10), intersection);\n    Assert.assertEquals(IntSets.mutable.with(0, 2, 4), difference);\n    Assert.assertEquals(IntLists.mutable.with(10, 8, 6, 5, 4, 2, 0), reversed);\n}\n</code></pre>\n<p>This functionality was <a href=\"https://pratha-sirisha.medium.com/primitive-set-operations-in-eclipse-collections-b126c9121d15\" rel=\"nofollow noreferrer\">recently contributed to primitive Sets in Eclipse Collections</a>. The linked blog describes how these methods are implemented on primitive sets.</p>\n<p>The following code uses object collections with boxed Integers. This code will work with Eclipse Collections releases available today.</p>\n<pre><code>@Test\npublic void unionIntersectDifferenceReverseWithBoxedIntegers()\n{\n    ImmutableList&lt;Integer&gt; list1 = Lists.immutable.with(0, 2, 4, 5, 6, 8, 10);\n    ImmutableList&lt;Integer&gt; list2 = Lists.immutable.with(5, 6, 7, 8, 9, 10);\n\n    MutableSet&lt;Integer&gt; set1 = list1.toSet();\n    MutableSet&lt;Integer&gt; set2 = list2.toSet();\n\n    MutableSet&lt;Integer&gt; union = set1.union(set2);\n    MutableSet&lt;Integer&gt; intersection = set1.intersect(set2);\n    MutableSet&lt;Integer&gt; difference = set1.difference(set2);\n\n    ImmutableList reversed = list1.toReversed();\n\n    Assert.assertEquals(Sets.mutable.with(0, 2, 4, 5, 6, 7, 8, 9, 10), union);\n    Assert.assertEquals(Sets.mutable.with(5, 6, 8, 10), intersection);\n    Assert.assertEquals(Sets.mutable.with(0, 2, 4), difference);\n    Assert.assertEquals(Lists.mutable.with(10, 8, 6, 5, 4, 2, 0), reversed);\n}\n</code></pre>\n<p>Note: I am a committer for Eclipse Collections.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695237761,"creation_date":1695237761,"answer_id":77145399,"question_id":3590677,"body_markdown":"For reversed, Java 21 added the [`reversed`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()) method, which returns a reversed view of the list.\r\n\r\n```\r\nList&lt;Integer&gt; reversed = mySet.reversed();\r\n```\r\n\r\nNote that this is a view of the underlying list, such that changes to the view will change the original list, and vice versa.  If a separate copy of the data with no relation to the original is needed, copy the reversed view into the list.\r\n\r\n```lang-java\r\nList&lt;Integer&gt; reversed = new ArrayList&lt;&gt;(mySet.reversed());\r\n```","title":"How to do union, intersect, difference and reverse data in java","body":"<p>For reversed, Java 21 added the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed</code></a> method, which returns a reversed view of the list.</p>\n<pre><code>List&lt;Integer&gt; reversed = mySet.reversed();\n</code></pre>\n<p>Note that this is a view of the underlying list, such that changes to the view will change the original list, and vice versa.  If a separate copy of the data with no relation to the original is needed, copy the reversed view into the list.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Integer&gt; reversed = new ArrayList&lt;&gt;(mySet.reversed());\n</code></pre>\n"}],"owner":{"account_id":107626,"reputation":3090,"user_id":286090,"accept_rate":51,"display_name":"Giffary"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100436,"favorite_count":0,"down_vote_count":2,"up_vote_count":56,"accepted_answer_id":3590725,"answer_count":8,"score":54,"last_activity_date":1695237761,"creation_date":1282997121,"question_id":3590677,"body_markdown":"I want to implement the union, intersect, difference and reverse operations in Java.\r\n\r\nFirst I have 2 instances of `ArrayList&lt;Integer&gt;`\r\n\r\n```lang-none\r\na = [0,2,4,5,6,8,10]\r\nb = [5,6,7,8,9,10]\r\n```\r\n\r\na union b should return `c = [0,2,4,5,6,7,8,9,10]`\r\n\r\na intersect b should return `c = [5,8,10]`\r\n\r\na difference b should return `c = [0,2,4]`\r\n\r\nreverse `a = [10,8,6,5,4,2,0]`\r\n\r\nSomething like this.\r\n\r\nHow to implement that method in Java?\r\n\r\n---\r\n\r\nNote that I have to start with the following template:\r\n\r\n```lang-java\r\npackage IntSet;\r\nimport java.util.ArrayList;\r\nimport java.util.Collection;\r\n\r\n\r\npublic class IntSet {\r\n\t\r\n\tprivate ArrayList&lt;Integer&gt; intset;\r\n\t\r\n\tpublic IntSet(){\r\n\t\tintset = new ArrayList&lt;Integer&gt;();\r\n\t}\r\n\t\r\n\tpublic void insert(int x){\r\n\t\tintset.add(x);\r\n\t}\r\n\t\r\n\tpublic void remove(int x){\r\n\t\t//implement here\r\n\t\tintset.indexOf(x);\r\n\t}\r\n\t\r\n\tpublic boolean member(int x){\r\n\t\t//implement here\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\tpublic IntSet intersect(IntSet a){\r\n\t\t//implement here\r\n\t\treturn a;\r\n\t}\r\n\t\r\n\tpublic IntSet union(IntSet a){\r\n\t\t//implement here\r\n\t\treturn a;\r\n\t}\r\n\t\r\n\tpublic IntSet difference(IntSet a){\r\n\t\t//implement here\r\n\t\tIntSet b = new IntSet();\r\n\t\treturn b; \r\n\t}\r\n}\r\n```","title":"How to do union, intersect, difference and reverse data in java","body":"<p>I want to implement the union, intersect, difference and reverse operations in Java.</p>\n<p>First I have 2 instances of <code>ArrayList&lt;Integer&gt;</code></p>\n<pre class=\"lang-none prettyprint-override\"><code>a = [0,2,4,5,6,8,10]\nb = [5,6,7,8,9,10]\n</code></pre>\n<p>a union b should return <code>c = [0,2,4,5,6,7,8,9,10]</code></p>\n<p>a intersect b should return <code>c = [5,8,10]</code></p>\n<p>a difference b should return <code>c = [0,2,4]</code></p>\n<p>reverse <code>a = [10,8,6,5,4,2,0]</code></p>\n<p>Something like this.</p>\n<p>How to implement that method in Java?</p>\n<hr />\n<p>Note that I have to start with the following template:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package IntSet;\nimport java.util.ArrayList;\nimport java.util.Collection;\n\n\npublic class IntSet {\n    \n    private ArrayList&lt;Integer&gt; intset;\n    \n    public IntSet(){\n        intset = new ArrayList&lt;Integer&gt;();\n    }\n    \n    public void insert(int x){\n        intset.add(x);\n    }\n    \n    public void remove(int x){\n        //implement here\n        intset.indexOf(x);\n    }\n    \n    public boolean member(int x){\n        //implement here\n        return true;\n    }\n    \n    public IntSet intersect(IntSet a){\n        //implement here\n        return a;\n    }\n    \n    public IntSet union(IntSet a){\n        //implement here\n        return a;\n    }\n    \n    public IntSet difference(IntSet a){\n        //implement here\n        IntSet b = new IntSet();\n        return b; \n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","swagger","swagger-ui","springdoc"],"comments":[{"owner":{"account_id":4240367,"reputation":422,"user_id":3470438,"accept_rate":75,"display_name":"wimdetr"},"score":0,"creation_date":1675166964,"post_id":75296631,"comment_id":132866086,"body_markdown":"The code sample you posted is just an interface to configure OpenAPI. The documentation talks about providing server(s) but does not seem to provide the option you are looking after: https://swagger.io/docs/specification/api-host-and-base-path/","body":"The code sample you posted is just an interface to configure OpenAPI. The documentation talks about providing server(s) but does not seem to provide the option you are looking after: <a href=\"https://swagger.io/docs/specification/api-host-and-base-path/\" rel=\"nofollow noreferrer\">swagger.io/docs/specification/api-host-and-base-path</a>"}],"answers":[{"tags":[],"owner":{"account_id":6381445,"reputation":2031,"user_id":4950746,"accept_rate":0,"display_name":"shahidfoy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695237562,"creation_date":1695237562,"answer_id":77145385,"question_id":75296631,"body_markdown":"You could try replacing the `localUrl` variable and instead use the one generated by swagger open api.\r\n\r\n    @Bean\r\n    public OpenApiCustomiser openApiCustomiser() {\r\n        Server generatedServer = openApi.getServers().get(0);\r\n        return openApi -&gt; openApi\r\n            .servers(List.of(\r\n                    new Server()\r\n                            .url(generatedServer.getUrl())\r\n                            .description(&quot;Generated URL&quot;),\r\n                    new Server()\r\n                            .url(dsoUrl)\r\n                            .description(&quot;DSO&quot;),\r\n                    new Server()\r\n                            .url(iftUrl)\r\n                            .description(&quot;IFT&quot;),\r\n                    new Server()\r\n                            .url(prodUrl)\r\n                            .description(&quot;PROD&quot;)));\r\n    }\r\n\r\n\r\nAnother thing you can do is have your server list come from your properties file instead. ","title":"How to pre-select a server in a list of server in Swagger-ui?","body":"<p>You could try replacing the <code>localUrl</code> variable and instead use the one generated by swagger open api.</p>\n<pre><code>@Bean\npublic OpenApiCustomiser openApiCustomiser() {\n    Server generatedServer = openApi.getServers().get(0);\n    return openApi -&gt; openApi\n        .servers(List.of(\n                new Server()\n                        .url(generatedServer.getUrl())\n                        .description(&quot;Generated URL&quot;),\n                new Server()\n                        .url(dsoUrl)\n                        .description(&quot;DSO&quot;),\n                new Server()\n                        .url(iftUrl)\n                        .description(&quot;IFT&quot;),\n                new Server()\n                        .url(prodUrl)\n                        .description(&quot;PROD&quot;)));\n}\n</code></pre>\n<p>Another thing you can do is have your server list come from your properties file instead.</p>\n"}],"owner":{"account_id":4792887,"reputation":1023,"user_id":4003272,"accept_rate":88,"display_name":"Mikhail Geyer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":868,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695237562,"creation_date":1675165454,"question_id":75296631,"body_markdown":"How to pre-select a chosen server in a list of servers when visiting the swagger-ui page?\r\n\r\nI use Spring boot, and Springdoc to generate the swagger-ui. I have the following bean to add server list to swagger-ui:\r\n\r\n    @Bean\r\n    public OpenApiCustomiser openApiCustomiser() {\r\n        return openApi -&gt; openApi\r\n                .servers(List.of(\r\n                        new Server()\r\n                                .url(localUrl)\r\n                                .description(&quot;localhost&quot;),\r\n                        new Server()\r\n                                .url(dsoUrl)\r\n                                .description(&quot;DSO&quot;),\r\n                        new Server()\r\n                                .url(iftUrl)\r\n                                .description(&quot;IFT&quot;),\r\n                        new Server()\r\n                                .url(prodUrl)\r\n                                .description(&quot;PROD&quot;)));\r\n    }\r\n\r\nOn all environment hosts it will start by default from `localhost` option:\r\n\r\n[![Swagger-ui section for list of servers][1]][1]\r\n\r\nI want that on every environment host the swagger-ui shows the right url preselected. Is it possible? (The solution with list ordering differently on different environment hosts is not interesting for me, I want the list to keep one order on all envs). \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aBUvd.png","title":"How to pre-select a server in a list of server in Swagger-ui?","body":"<p>How to pre-select a chosen server in a list of servers when visiting the swagger-ui page?</p>\n<p>I use Spring boot, and Springdoc to generate the swagger-ui. I have the following bean to add server list to swagger-ui:</p>\n<pre><code>@Bean\npublic OpenApiCustomiser openApiCustomiser() {\n    return openApi -&gt; openApi\n            .servers(List.of(\n                    new Server()\n                            .url(localUrl)\n                            .description(&quot;localhost&quot;),\n                    new Server()\n                            .url(dsoUrl)\n                            .description(&quot;DSO&quot;),\n                    new Server()\n                            .url(iftUrl)\n                            .description(&quot;IFT&quot;),\n                    new Server()\n                            .url(prodUrl)\n                            .description(&quot;PROD&quot;)));\n}\n</code></pre>\n<p>On all environment hosts it will start by default from <code>localhost</code> option:</p>\n<p><a href=\"https://i.stack.imgur.com/aBUvd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aBUvd.png\" alt=\"Swagger-ui section for list of servers\" /></a></p>\n<p>I want that on every environment host the swagger-ui shows the right url preselected. Is it possible? (The solution with list ordering differently on different environment hosts is not interesting for me, I want the list to keep one order on all envs).</p>\n"},{"tags":["java","spring","docker","tomcat","dockerfile"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695274278,"post_id":77145308,"comment_id":136002970,"body_markdown":"Why? Just ditch the tomcat deployment and run the embedded server that comes with Spring Boot. This is a lot easier for your docker container. Anyway apparently your cloudsuite configuration is wrong (or the files that it needs aren&#39;t in your container). This doesn&#39;t really have anything to do with your spring boot application.","body":"Why? Just ditch the tomcat deployment and run the embedded server that comes with Spring Boot. This is a lot easier for your docker container. Anyway apparently your cloudsuite configuration is wrong (or the files that it needs aren&#39;t in your container). This doesn&#39;t really have anything to do with your spring boot application."},{"owner":{"account_id":29471196,"reputation":1,"user_id":22583788,"display_name":"StefanoSKAL"},"score":0,"creation_date":1698754660,"post_id":77145308,"comment_id":136442969,"body_markdown":"how can I put the file in /home/vcap/cloudsuite/config, that is the path that docker wants?","body":"how can I put the file in /home/vcap/cloudsuite/config, that is the path that docker wants?"}],"owner":{"account_id":29471196,"reputation":1,"user_id":22583788,"display_name":"StefanoSKAL"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695237167,"creation_date":1695236598,"question_id":77145308,"body_markdown":"I have a Spring application as a war file deployed in Tomcat. All is done with a docker file. While running the app, I get an exception for this missing file `Script resource ste/SteCommon.groovy: not found at scripts/ste/SteCommon.groovy` and Script `resource ste/SteCommon.groovy: not found at /home/vcap/cloudsuite/config/scripts/ste/SteCommon.groovy`. \r\n\r\nI see in docker file there is an env variable with the path `/home/vcap/cloudsuite/config`, how can I put a file in it?\r\n\r\nBelow the dockerfile:\r\n\r\n    # Use the official Tomcat image as the base image\r\n    FROM tomcat:9-jdk17\r\n\r\n    # Set environment variables\r\n    ENV JBP_CONFIG_OPEN_JDK_JRE=&#39;{jre: {version: 1.17+}}&#39; \\\r\n    JBP_CONFIG_TOMCAT=&#39;{ tomcat: { version: 9.0.+ }, context_path: /cloudsuite-car/maker }&#39; \\\r\n    CLOUDSUITE_BASE_DIR=&#39;/home/vcap/cloudsuite/config&#39; \\\r\n    CLOUDSUITE_PROFILE_DIR=&#39;/home/vcap/cloudsuite/config&#39; \\\r\n    CLOUDSUITE_DATA_DIR=&#39;/home/vcap/cloudsuite/data&#39; \\\r\n    CLOUDSUITE_LOG_DIR=&#39;/home/vcap/cloudsuite/log&#39; \\\r\n    CLOUDSUITE_DATA_SHARED=&#39;/home/vcap/cloudsuite/data&#39; \\\r\n    JDBC_DRIVERCLASSNAME=&#39;org.postgresql.Driver&#39; \\\r\n    JDBC_URL=&#39;jdbc:postgresql://car-postgres:5432/car&#39; \\\r\n    JDBC_USERNAME=&#39;postgres&#39; \\\r\n    JDBC_PASSWORD=&#39;postgres&#39; \\\r\n    CLOUDSUITE_LOG_LEVEL=&#39;TRACE&#39; \\\r\n    AUTHENTICATION_ACTIVE=&#39;false&#39; \\\r\n    digsig.validation.validationContext.qualificationSeverity=&#39;info&#39;\r\n\r\n    # Set Java options\r\n    ENV JAVA_OPTS=&#39;-Duser.timezone=UTC -Djava.rmi.server.hostname=127.0.0.1 -    Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.port=5000 -Dcom.sun.management.jmxremote.rmi.port=5000&#39;\r\n\r\n    # Remove the default Tomcat webapps (optional)\r\n    RUN rm -rf /usr/local/tomcat/webapps/*\r\n\r\n    # Copy your WAR file to the webapps folder of the Tomcat container\r\n    COPY cloudsuite-car#maker.war /usr/local/tomcat/webapps/ROOT.war\r\n\r\n    # Expose the default Tomcat port (optional, as the base image already does this)\r\n    EXPOSE 8080\r\n\r\n\r\nI am not sure I can provide it.","title":"Provide dependency file to a Spring app deployed with Docker","body":"<p>I have a Spring application as a war file deployed in Tomcat. All is done with a docker file. While running the app, I get an exception for this missing file <code>Script resource ste/SteCommon.groovy: not found at scripts/ste/SteCommon.groovy</code> and Script <code>resource ste/SteCommon.groovy: not found at /home/vcap/cloudsuite/config/scripts/ste/SteCommon.groovy</code>.</p>\n<p>I see in docker file there is an env variable with the path <code>/home/vcap/cloudsuite/config</code>, how can I put a file in it?</p>\n<p>Below the dockerfile:</p>\n<pre><code># Use the official Tomcat image as the base image\nFROM tomcat:9-jdk17\n\n# Set environment variables\nENV JBP_CONFIG_OPEN_JDK_JRE='{jre: {version: 1.17+}}' \\\nJBP_CONFIG_TOMCAT='{ tomcat: { version: 9.0.+ }, context_path: /cloudsuite-car/maker }' \\\nCLOUDSUITE_BASE_DIR='/home/vcap/cloudsuite/config' \\\nCLOUDSUITE_PROFILE_DIR='/home/vcap/cloudsuite/config' \\\nCLOUDSUITE_DATA_DIR='/home/vcap/cloudsuite/data' \\\nCLOUDSUITE_LOG_DIR='/home/vcap/cloudsuite/log' \\\nCLOUDSUITE_DATA_SHARED='/home/vcap/cloudsuite/data' \\\nJDBC_DRIVERCLASSNAME='org.postgresql.Driver' \\\nJDBC_URL='jdbc:postgresql://car-postgres:5432/car' \\\nJDBC_USERNAME='postgres' \\\nJDBC_PASSWORD='postgres' \\\nCLOUDSUITE_LOG_LEVEL='TRACE' \\\nAUTHENTICATION_ACTIVE='false' \\\ndigsig.validation.validationContext.qualificationSeverity='info'\n\n# Set Java options\nENV JAVA_OPTS='-Duser.timezone=UTC -Djava.rmi.server.hostname=127.0.0.1 -    Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.port=5000 -Dcom.sun.management.jmxremote.rmi.port=5000'\n\n# Remove the default Tomcat webapps (optional)\nRUN rm -rf /usr/local/tomcat/webapps/*\n\n# Copy your WAR file to the webapps folder of the Tomcat container\nCOPY cloudsuite-car#maker.war /usr/local/tomcat/webapps/ROOT.war\n\n# Expose the default Tomcat port (optional, as the base image already does this)\nEXPOSE 8080\n</code></pre>\n<p>I am not sure I can provide it.</p>\n"},{"tags":["java","jython"],"owner":{"account_id":5880864,"reputation":111,"user_id":4630284,"display_name":"magicmq"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695236638,"creation_date":1695236638,"question_id":77145313,"body_markdown":"Suppose I have a list of Python scripts, &#39;script1.py&#39;, &#39;script2.py&#39;, &#39;script3.py&#39;, etc. Using Jython (which is embedded into my Java application), my goal is to run each script when the Java program is started. Additionally, each script should run within its own environment (I.E. have its own global scope). Scripts may or may not implement multithreading, event logic, etc., so I cannot guarantee that a script terminates prior to running another script.\r\n\r\nMy understanding is that I should use Jython&#39;s [PythonInterpreter](https://www.javadoc.io/static/org.python/jython-standalone/2.7.3/org/python/util/PythonInterpreter.html), but all examples I can find on the usage of PythonInterpreter do not cover my specific use case. My understanding is that all code that is run through a single PythonInterpreter shares the same global scope. \r\n\r\nMy current methodology is to create a new PythonInterpreter for each script, to ensure each script is isolated. Additionally, I defer handling of the [PySystemState](https://www.javadoc.io/static/org.python/jython-standalone/2.7.3/org/python/core/PySystemState.html) (Jython&#39;s implementation of the `sys` module) to Jython, and it seems that Jython creates a &quot;default&quot; PySystemState that is being used for all of the PythonInterpreters I create. Is this sufficient, or should I also be initializing a new PySystemState for each PythonIntepreter?\r\n\r\nI am also unsure of the proper usage of the `PythonInterpreter#close()` method in my specific case, since this method appears to close the associated PySystemState as well. If Jython assigns a single PySystemState to each separate PythonInterpreter in my program, this could be problematic if I close the PythonInterpreter for one script (if it finished execution) while other scripts are still running.\r\n\r\nMy approach works as expected, so long as I do not close the PythonInterpreter once a script finishes execution; however, I am unsure if my approach is the correct/most efficient way.","title":"Proper usage of Jython&#39;s PythonInterpreter for multiple scripts","body":"<p>Suppose I have a list of Python scripts, 'script1.py', 'script2.py', 'script3.py', etc. Using Jython (which is embedded into my Java application), my goal is to run each script when the Java program is started. Additionally, each script should run within its own environment (I.E. have its own global scope). Scripts may or may not implement multithreading, event logic, etc., so I cannot guarantee that a script terminates prior to running another script.</p>\n<p>My understanding is that I should use Jython's <a href=\"https://www.javadoc.io/static/org.python/jython-standalone/2.7.3/org/python/util/PythonInterpreter.html\" rel=\"nofollow noreferrer\">PythonInterpreter</a>, but all examples I can find on the usage of PythonInterpreter do not cover my specific use case. My understanding is that all code that is run through a single PythonInterpreter shares the same global scope.</p>\n<p>My current methodology is to create a new PythonInterpreter for each script, to ensure each script is isolated. Additionally, I defer handling of the <a href=\"https://www.javadoc.io/static/org.python/jython-standalone/2.7.3/org/python/core/PySystemState.html\" rel=\"nofollow noreferrer\">PySystemState</a> (Jython's implementation of the <code>sys</code> module) to Jython, and it seems that Jython creates a &quot;default&quot; PySystemState that is being used for all of the PythonInterpreters I create. Is this sufficient, or should I also be initializing a new PySystemState for each PythonIntepreter?</p>\n<p>I am also unsure of the proper usage of the <code>PythonInterpreter#close()</code> method in my specific case, since this method appears to close the associated PySystemState as well. If Jython assigns a single PySystemState to each separate PythonInterpreter in my program, this could be problematic if I close the PythonInterpreter for one script (if it finished execution) while other scripts are still running.</p>\n<p>My approach works as expected, so long as I do not close the PythonInterpreter once a script finishes execution; however, I am unsure if my approach is the correct/most efficient way.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":483049,"reputation":6296,"user_id":897868,"accept_rate":90,"display_name":"onit"},"score":6,"creation_date":1320938516,"post_id":8081827,"comment_id":9904863,"body_markdown":"This is because doubles and floats cannot express every numerical value. They are really using approximations to represent the value.","body":"This is because doubles and floats cannot express every numerical value. They are really using approximations to represent the value."},{"owner":{"account_id":3658600,"reputation":417,"user_id":3048996,"display_name":"judovana"},"score":1,"creation_date":1596724877,"post_id":8081827,"comment_id":111908501,"body_markdown":"The title of question is very misleading. The Author of question is actually asking, how to do precise math operations on double typ. Answer is you cant. If you have to, use BigDecimalr or similar. Those have .... at least theoretically, unlimited precision.","body":"The title of question is very misleading. The Author of question is actually asking, how to do precise math operations on double typ. Answer is you cant. If you have to, use BigDecimalr or similar. Those have .... at least theoretically, unlimited precision."},{"owner":{"account_id":3457181,"reputation":762,"user_id":2895411,"display_name":"nikolai.serdiuk"},"score":2,"creation_date":1613580742,"post_id":8081827,"comment_id":117120562,"body_markdown":"Here is good article: https://www.baeldung.com/java-comparing-doubles","body":"Here is good article: <a href=\"https://www.baeldung.com/java-comparing-doubles\" rel=\"nofollow noreferrer\">baeldung.com/java-comparing-doubles</a>"}],"answers":[{"tags":[],"owner":{"account_id":120998,"reputation":642,"user_id":313766,"display_name":"Zaki Saadeh"},"down_vote_count":2,"up_vote_count":16,"is_accepted":false,"score":14,"last_activity_date":1320938695,"creation_date":1320938695,"answer_id":8081897,"question_id":8081827,"body_markdown":"Instead of using doubles for decimal arithemetic, please use  java.math.BigDecimal. It would produce the expected results.\r\n\r\nFor reference take a look at this [stackoverflow question][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/179427/how-to-resolve-a-java-rounding-double-issue","title":"How to compare two double values in Java?","body":"<p>Instead of using doubles for decimal arithemetic, please use  java.math.BigDecimal. It would produce the expected results.</p>\n\n<p>For reference take a look at this <a href=\"https://stackoverflow.com/questions/179427/how-to-resolve-a-java-rounding-double-issue\">stackoverflow question</a></p>\n"},{"tags":[],"owner":{"account_id":297024,"reputation":25001,"user_id":602323,"accept_rate":80,"display_name":"Kevin"},"down_vote_count":0,"up_vote_count":109,"is_accepted":true,"score":109,"last_activity_date":1360853392,"creation_date":1320938760,"answer_id":8081911,"question_id":8081827,"body_markdown":"Basically you shouldn&#39;t do exact comparisons, you should do something like this:\r\n\r\n    double a = 1.000001;\r\n    double b = 0.000001;\r\n    double c = a-b;\r\n    if (Math.abs(c-1.0) &lt;= 0.000001) {...}","title":"How to compare two double values in Java?","body":"<p>Basically you shouldn't do exact comparisons, you should do something like this:</p>\n\n<pre><code>double a = 1.000001;\ndouble b = 0.000001;\ndouble c = a-b;\nif (Math.abs(c-1.0) &lt;= 0.000001) {...}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2895395,"reputation":489,"user_id":2483289,"display_name":"Anand"},"down_vote_count":5,"up_vote_count":17,"is_accepted":false,"score":12,"last_activity_date":1516808622,"creation_date":1516808622,"answer_id":48426347,"question_id":8081827,"body_markdown":"You can use [Double.compare][1]; It compares the two specified double values.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/Double.html#compare-double-double-","title":"How to compare two double values in Java?","body":"<p>You can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Double.html#compare-double-double-\" rel=\"noreferrer\">Double.compare</a>; It compares the two specified double values.</p>\n"},{"tags":[],"owner":{"account_id":1055952,"reputation":106,"user_id":1058668,"display_name":"Splash"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1530880410,"creation_date":1530880410,"answer_id":51210595,"question_id":8081827,"body_markdown":"            int mid = 10;\r\n            for (double j = 2 * mid; j &gt;= 0; j = j - 0.1) {\r\n                if (j == mid) {\r\n                \tSystem.out.println(&quot;Never happens&quot;); // is NOT printed\r\n                }\r\n             \r\n                if (Double.compare(j, mid) == 0) {\r\n                \tSystem.out.println(&quot;No way!&quot;); // is NOT printed\r\n                }\r\n                \r\n                if (Math.abs(j - mid) &lt; 1e-6) {\r\n                \tSystem.out.println(&quot;Ha!&quot;); // printed\r\n                }\r\n            }\r\n            System.out.println(&quot;Gotcha!&quot;);\r\n\r\n","title":"How to compare two double values in Java?","body":"<pre><code>        int mid = 10;\n        for (double j = 2 * mid; j &gt;= 0; j = j - 0.1) {\n            if (j == mid) {\n                System.out.println(\"Never happens\"); // is NOT printed\n            }\n\n            if (Double.compare(j, mid) == 0) {\n                System.out.println(\"No way!\"); // is NOT printed\n            }\n\n            if (Math.abs(j - mid) &lt; 1e-6) {\n                System.out.println(\"Ha!\"); // printed\n            }\n        }\n        System.out.println(\"Gotcha!\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10038536,"reputation":2175,"user_id":7422255,"accept_rate":40,"display_name":"Chanaka Fernando"},"down_vote_count":5,"up_vote_count":1,"is_accepted":false,"score":-4,"last_activity_date":1540406504,"creation_date":1540406504,"answer_id":52975932,"question_id":8081827,"body_markdown":"Just use Double.compare() method to compare double values.  \r\n**Double.compare((d1,d2) == 0)**  \r\n\r\n    double d1 = 0.0;\r\n    double d2 = 0.0;\r\n\r\n    System.out.println(Double.compare((d1,d2) == 0))  // true","title":"How to compare two double values in Java?","body":"<p>Just use Double.compare() method to compare double values.<br>\n<strong>Double.compare((d1,d2) == 0)</strong>  </p>\n\n<pre><code>double d1 = 0.0;\ndouble d2 = 0.0;\n\nSystem.out.println(Double.compare((d1,d2) == 0))  // true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9575021,"reputation":37,"user_id":7111743,"display_name":"Ibrahim"},"down_vote_count":5,"up_vote_count":1,"is_accepted":false,"score":-4,"last_activity_date":1558484408,"creation_date":1558475289,"answer_id":56246782,"question_id":8081827,"body_markdown":"    double a = 1.000001;\r\n    double b = 0.000001;\r\n    \r\n    System.out.println( a.compareTo(b) );\r\n\r\n**Returns**:&lt;br&gt;\r\n\r\n - -1 : &#39;a&#39; is numerically less than &#39;b&#39;.\r\n\r\n - 0 : &#39;a&#39; is equal to &#39;b&#39;.\r\n\r\n - 1 : &#39;a&#39; is greater than &#39;b&#39;.","title":"How to compare two double values in Java?","body":"<pre><code>double a = 1.000001;\ndouble b = 0.000001;\n\nSystem.out.println( a.compareTo(b) );\n</code></pre>\n\n<p><strong>Returns</strong>:<br></p>\n\n<ul>\n<li><p>-1 : 'a' is numerically less than 'b'.</p></li>\n<li><p>0 : 'a' is equal to 'b'.</p></li>\n<li><p>1 : 'a' is greater than 'b'.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":9323818,"reputation":51,"user_id":8386988,"display_name":"ThePC007"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1559598934,"creation_date":1559598934,"answer_id":56435011,"question_id":8081827,"body_markdown":"Consider this line of code:\r\n\r\n    Math.abs(firstDouble - secondDouble) &lt; Double.MIN_NORMAL\r\n\r\nIt returns whether firstDouble is equal to secondDouble. I&#39;m unsure as to whether or not this would work in your exact case (as Kevin pointed out, performing any math on floating points can lead to imprecise results) however I was having difficulties with comparing two double which were, indeed, equal, and yet using the &#39;compareTo&#39; method didn&#39;t return 0.\r\n\r\nI&#39;m just leaving this there in case anyone needs to compare to check if they are indeed equal, and not just similar. ","title":"How to compare two double values in Java?","body":"<p>Consider this line of code:</p>\n\n<pre><code>Math.abs(firstDouble - secondDouble) &lt; Double.MIN_NORMAL\n</code></pre>\n\n<p>It returns whether firstDouble is equal to secondDouble. I'm unsure as to whether or not this would work in your exact case (as Kevin pointed out, performing any math on floating points can lead to imprecise results) however I was having difficulties with comparing two double which were, indeed, equal, and yet using the 'compareTo' method didn't return 0.</p>\n\n<p>I'm just leaving this there in case anyone needs to compare to check if they are indeed equal, and not just similar. </p>\n"},{"tags":[],"owner":{"account_id":357362,"reputation":2080,"user_id":697480,"display_name":"Adam Wise"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680614542,"creation_date":1680614542,"answer_id":75929896,"question_id":8081827,"body_markdown":"This should be built into Java. There are a couple libraries that do a good job of safely comparing doubles, with a third &#39;epsilon&#39; value:\r\n\r\n* Guava&#39;s DoubleMath:\r\n```\r\n// this returns true if roughlyOne is very close to 1\r\nDoubleMath.fuzzyEquals(1.0, roughlyOne, 0.0001d)\r\n```\r\n* Apache Common&#39;s has a very similar method, Precision.equals\r\n\r\nAnd for what its worth, JUnit recently deprecated the equality assert methods that involve doubles that don&#39;t also include an epsilon threshold.","title":"How to compare two double values in Java?","body":"<p>This should be built into Java. There are a couple libraries that do a good job of safely comparing doubles, with a third 'epsilon' value:</p>\n<ul>\n<li>Guava's DoubleMath:</li>\n</ul>\n<pre><code>// this returns true if roughlyOne is very close to 1\nDoubleMath.fuzzyEquals(1.0, roughlyOne, 0.0001d)\n</code></pre>\n<ul>\n<li>Apache Common's has a very similar method, Precision.equals</li>\n</ul>\n<p>And for what its worth, JUnit recently deprecated the equality assert methods that involve doubles that don't also include an epsilon threshold.</p>\n"},{"tags":[],"owner":{"account_id":29433965,"reputation":1,"user_id":22553146,"display_name":"Kevin Zhu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695236260,"creation_date":1695236260,"answer_id":77145274,"question_id":8081827,"body_markdown":"if you don&#39;t use Double.compare(), you may consider use the following:\r\n\r\n    double n1 = 0.1234567890123450;\r\n    double n2 = 0.1234567890123449;\r\n    boolean res = (Math.abs(n1 - n2) &lt;= 1e-16 * Math.max(Math.abs(n1), \r\n    Math.abs(n2)));\r\n    System.out.println(res);\r\n\r\nhowever, if you just compare |n1 - n2|, you may get True for the following comparison result:\r\n\r\n    boolean res = (Math.abs(n1 - n2) &lt;= 1e-16);\r\n    System.out.println(res);","title":"How to compare two double values in Java?","body":"<p>if you don't use Double.compare(), you may consider use the following:</p>\n<pre><code>double n1 = 0.1234567890123450;\ndouble n2 = 0.1234567890123449;\nboolean res = (Math.abs(n1 - n2) &lt;= 1e-16 * Math.max(Math.abs(n1), \nMath.abs(n2)));\nSystem.out.println(res);\n</code></pre>\n<p>however, if you just compare |n1 - n2|, you may get True for the following comparison result:</p>\n<pre><code>boolean res = (Math.abs(n1 - n2) &lt;= 1e-16);\nSystem.out.println(res);\n</code></pre>\n"}],"owner":{"account_id":1028420,"reputation":18799,"user_id":1037210,"accept_rate":100,"display_name":"Lion"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":267607,"favorite_count":0,"down_vote_count":0,"up_vote_count":82,"accepted_answer_id":8081911,"answer_count":9,"score":82,"last_activity_date":1695236260,"creation_date":1320938373,"question_id":8081827,"body_markdown":"A simple comparison of two double values in Java creates some problems. Let&#39;s consider the following simple code snippet in Java.\r\n\r\n    package doublecomparision;\r\n\r\n    final public class DoubleComparision \r\n    {\r\n        public static void main(String[] args) \r\n        {\r\n            double a = 1.000001;\r\n            double b = 0.000001;\r\n\r\n            System.out.println(&quot;\\n&quot;+((a-b)==1.0));\r\n        }\r\n    }\r\n\r\n\r\n----------\r\nThe above code appears to return `true`, the evaluation of the expression `((a-b)==1.0)` but it doesn&#39;t. It returns `false` instead because the evaluation of this expression is `0.9999999999999999` which was actually expected to be `1.0` which is not equal to `1.0` hence, the condition evaluates to boolean `false`. What is the best and suggested way to overcome such a situation?","title":"How to compare two double values in Java?","body":"<p>A simple comparison of two double values in Java creates some problems. Let's consider the following simple code snippet in Java.</p>\n\n<pre><code>package doublecomparision;\n\nfinal public class DoubleComparision \n{\n    public static void main(String[] args) \n    {\n        double a = 1.000001;\n        double b = 0.000001;\n\n        System.out.println(\"\\n\"+((a-b)==1.0));\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>The above code appears to return <code>true</code>, the evaluation of the expression <code>((a-b)==1.0)</code> but it doesn't. It returns <code>false</code> instead because the evaluation of this expression is <code>0.9999999999999999</code> which was actually expected to be <code>1.0</code> which is not equal to <code>1.0</code> hence, the condition evaluates to boolean <code>false</code>. What is the best and suggested way to overcome such a situation?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3435599,"reputation":4037,"user_id":2878796,"display_name":"UnholySheep"},"score":0,"creation_date":1479647553,"post_id":40704349,"comment_id":68636734,"body_markdown":"Define *&quot;results are incorrect&quot;*. What are the inputs and (incorrect) outputs. Also you should first try to step through it using a debugger. Finally I would recommend you to try to change the flow a bit - isolate the check of input from the check of `nbooksPurchased`","body":"Define <i>&quot;results are incorrect&quot;</i>. What are the inputs and (incorrect) outputs. Also you should first try to step through it using a debugger. Finally I would recommend you to try to change the flow a bit - isolate the check of input from the check of <code>nbooksPurchased</code>"},{"owner":{"account_id":6795544,"reputation":1900,"user_id":5231001,"accept_rate":75,"display_name":"n247s"},"score":1,"creation_date":1479647564,"post_id":40704349,"comment_id":68636736,"body_markdown":"Have you tried to debug your code to see where things go different from what you expected?","body":"Have you tried to debug your code to see where things go different from what you expected?"},{"owner":{"account_id":7793470,"reputation":203,"user_id":5895536,"accept_rate":40,"display_name":"Faraz Sultan"},"score":1,"creation_date":1479647914,"post_id":40704349,"comment_id":68636818,"body_markdown":"What is the result you expected? and What is the result you get?","body":"What is the result you expected? and What is the result you get?"},{"owner":{"account_id":9670029,"reputation":1,"user_id":7175291,"display_name":"Danny "},"score":0,"creation_date":1479648060,"post_id":40704349,"comment_id":68636858,"body_markdown":"Sorry guys like I said very new....not covered debugging on courses yet! An example input/ouput:    Input - &quot;24&quot; and &quot;Y&quot;   the expected output should be &quot;2&quot; but its comes back as &quot;1&quot;","body":"Sorry guys like I said very new....not covered debugging on courses yet! An example input/ouput:    Input - &quot;24&quot; and &quot;Y&quot;   the expected output should be &quot;2&quot; but its comes back as &quot;1&quot;"},{"owner":{"account_id":6082869,"reputation":638,"user_id":4748017,"display_name":"Herb"},"score":0,"creation_date":1479648073,"post_id":40704349,"comment_id":68636864,"body_markdown":"You should separate the code that assigns the isPremiumCustomer variable from the code assigning to the freebooks variable. It&#39;s muddling up you logic","body":"You should separate the code that assigns the isPremiumCustomer variable from the code assigning to the freebooks variable. It&#39;s muddling up you logic"},{"owner":{"account_id":7793470,"reputation":203,"user_id":5895536,"accept_rate":40,"display_name":"Faraz Sultan"},"score":1,"creation_date":1479649000,"post_id":40704349,"comment_id":68637146,"body_markdown":"((ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;))  use parenthesis on every OR condition.","body":"((ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;))  use parenthesis on every OR condition."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1479650594,"post_id":40704349,"comment_id":68637688,"body_markdown":"Try not to do everything in one long if-else construct, that gets more complicated than needed. Try one if statement to set `isPremiumCustomer` to true if this is a premium customer. Next do one if-else with just `if (isPremiumCustomer) {`  Inside each part of this if-else put a new but shorter if-else construct to set `freeBooks` to the correct value. Yes, you can put if-else inside another if-else; if only you keep your indentation nice, it shouldnt be too hard to grasp.","body":"Try not to do everything in one long if-else construct, that gets more complicated than needed. Try one if statement to set <code>isPremiumCustomer</code> to true if this is a premium customer. Next do one if-else with just <code>if (isPremiumCustomer) {</code>  Inside each part of this if-else put a new but shorter if-else construct to set <code>freeBooks</code> to the correct value. Yes, you can put if-else inside another if-else; if only you keep your indentation nice, it shouldnt be too hard to grasp."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1479650876,"post_id":40704349,"comment_id":68637787,"body_markdown":"@FarazSultan is correct: `ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;) &amp;&amp; (nbooksPurchased &gt;4 &amp;&amp; (nbooksPurchased &lt;8))` will be evaluated the same as `ans.equals(&quot;y&quot;) || (ans.equals(&quot;Y&quot;) &amp;&amp; nbooksPurchased &gt;4 &amp;&amp; nbooksPurchased &lt; 8)`.","body":"@FarazSultan is correct: <code>ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;) &amp;&amp; (nbooksPurchased &gt;4 &amp;&amp; (nbooksPurchased &lt;8))</code> will be evaluated the same as <code>ans.equals(&quot;y&quot;) || (ans.equals(&quot;Y&quot;) &amp;&amp; nbooksPurchased &gt;4 &amp;&amp; nbooksPurchased &lt; 8)</code>."},{"owner":{"account_id":9165235,"reputation":15414,"user_id":6815131,"display_name":"Joe C"},"score":0,"creation_date":1479653107,"post_id":40704349,"comment_id":68638473,"body_markdown":"Welcome to Stack Overflow! It looks like you need to learn to use a debugger.  Please help yourself to some [complementary debugging techniques](https://ericlippert.com/2014/03/05/how-to-debug-small-programs/).  If you still have issues afterwards, please feel free to come back with more details.","body":"Welcome to Stack Overflow! It looks like you need to learn to use a debugger.  Please help yourself to some <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">complementary debugging techniques</a>.  If you still have issues afterwards, please feel free to come back with more details."},{"owner":{"account_id":9670029,"reputation":1,"user_id":7175291,"display_name":"Danny "},"score":0,"creation_date":1479654353,"post_id":40704349,"comment_id":68638949,"body_markdown":"This is driving me nuts...`if (ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;)) {\n            isPremiumCustomer = true;\n        }\n        if (nbooksPurchased &gt;= 3 &amp;&amp; (nbooksPurchased &lt;= 7)) {\n            freeBooks = 1;\n        } else if (nbooksPurchased &gt;= 8) {\n            freeBooks = 2;\n        }\n        if (ans.equals(&quot;n&quot;) || ans.equals(&quot;N&quot;)) {\n            if ((nbooksPurchased &gt;= 7 &amp;&amp; (nbooksPurchased &lt;= 11))) {\n                freeBooks = 1;\n            } else if (nbooksPurchased &gt;= 12) {\n                freeBooks = 2;`","body":"This is driving me nuts...<code>if (ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;)) {             isPremiumCustomer = true;         }         if (nbooksPurchased &gt;= 3 &amp;&amp; (nbooksPurchased &lt;= 7)) {             freeBooks = 1;         } else if (nbooksPurchased &gt;= 8) {             freeBooks = 2;         }         if (ans.equals(&quot;n&quot;) || ans.equals(&quot;N&quot;)) {             if ((nbooksPurchased &gt;= 7 &amp;&amp; (nbooksPurchased &lt;= 11))) {                 freeBooks = 1;             } else if (nbooksPurchased &gt;= 12) {                 freeBooks = 2;</code>"}],"answers":[{"tags":[],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695235881,"creation_date":1479669943,"answer_id":40708411,"question_id":40704349,"body_markdown":"Reading your code in the comment is hardly possible. So I formatted it and got:\r\n\r\n\t\tif (ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;)) {\r\n\t\t\tisPremiumCustomer = true;\r\n\t\t}\r\n\t\tif (nbooksPurchased &gt;= 3 &amp;&amp; (nbooksPurchased &lt;= 7)) {\r\n\t\t\tfreeBooks = 1;\r\n\t\t} else if (nbooksPurchased &gt;= 8) {\r\n\t\t\tfreeBooks = 2;\r\n\t\t}\r\n\t\tif (ans.equals(&quot;n&quot;) || ans.equals(&quot;N&quot;)) {\r\n\t\t\tif ((nbooksPurchased &gt;= 7 &amp;&amp; (nbooksPurchased &lt;= 11))) {\r\n\t\t\t\tfreeBooks = 1;\r\n\t\t\t} else if (nbooksPurchased &gt;= 12) {\r\n\t\t\t\tfreeBooks = 2;\r\n\t\t\t}\r\n\t\t}\r\n\r\nNow youre clearly on the way compared to your code in the question. The main problem with this is that the middle if-else construct `if (nbooksPurchased &gt;= 3 &amp;&amp; (nbooksPurchased &lt;= 7)) {` is executed for all customers, not only premium customers. So regular customers that buy 3 or 6 books get the 1 free book that only premium customers should have had on such a purchase. If they buy 7 or more, the execution gets into `if (ans.equals(&quot;n&quot;) || ans.equals(&quot;N&quot;)) {`, and youre saved. \r\n\r\nThe other problem is just a typo, `nbooksPurchased &gt;= 3` should have been 5 for premium customers.\r\n\r\nSo I believe most cases work correctly.\r\n\r\nI think that this would be clearer (and hence easier for yourself to correct errors in):\r\n\r\n\t\tif (isPremiumCustomer) {\r\n\t\t\t// put if-else for premium customers here\r\n\t\t} else {\r\n\t\t\t// put if-else for regular customers here\r\n\t\t}\r\n\r\nAlso I think this will better fulfil the requirement:\r\n\r\n&gt; Write the block of code that assigns freeBooks the appropriate value\r\n&gt; *based on* the values of the boolean variable isPremiumCustomer and \r\n\r\n(my emphasis).","title":"Incorrect results from code written for basic Java exercise","body":"<p>Reading your code in the comment is hardly possible. So I formatted it and got:</p>\n<pre><code>    if (ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;)) {\n        isPremiumCustomer = true;\n    }\n    if (nbooksPurchased &gt;= 3 &amp;&amp; (nbooksPurchased &lt;= 7)) {\n        freeBooks = 1;\n    } else if (nbooksPurchased &gt;= 8) {\n        freeBooks = 2;\n    }\n    if (ans.equals(&quot;n&quot;) || ans.equals(&quot;N&quot;)) {\n        if ((nbooksPurchased &gt;= 7 &amp;&amp; (nbooksPurchased &lt;= 11))) {\n            freeBooks = 1;\n        } else if (nbooksPurchased &gt;= 12) {\n            freeBooks = 2;\n        }\n    }\n</code></pre>\n<p>Now youre clearly on the way compared to your code in the question. The main problem with this is that the middle if-else construct <code>if (nbooksPurchased &gt;= 3 &amp;&amp; (nbooksPurchased &lt;= 7)) {</code> is executed for all customers, not only premium customers. So regular customers that buy 3 or 6 books get the 1 free book that only premium customers should have had on such a purchase. If they buy 7 or more, the execution gets into <code>if (ans.equals(&quot;n&quot;) || ans.equals(&quot;N&quot;)) {</code>, and youre saved.</p>\n<p>The other problem is just a typo, <code>nbooksPurchased &gt;= 3</code> should have been 5 for premium customers.</p>\n<p>So I believe most cases work correctly.</p>\n<p>I think that this would be clearer (and hence easier for yourself to correct errors in):</p>\n<pre><code>    if (isPremiumCustomer) {\n        // put if-else for premium customers here\n    } else {\n        // put if-else for regular customers here\n    }\n</code></pre>\n<p>Also I think this will better fulfil the requirement:</p>\n<blockquote>\n<p>Write the block of code that assigns freeBooks the appropriate value\n<em>based on</em> the values of the boolean variable isPremiumCustomer and </p>\n</blockquote>\n<p>(my emphasis).</p>\n"}],"owner":{"account_id":9670029,"reputation":1,"user_id":7175291,"display_name":"Danny "},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":191,"favorite_count":0,"down_vote_count":6,"up_vote_count":0,"answer_count":1,"score":-6,"last_activity_date":1695235993,"creation_date":1479647280,"question_id":40704349,"body_markdown":"Here are the instructions\r\n\r\n&gt;Online Book Depot offers premium customers 1 free book with every purchase of 5 or more books and offers 2 free books with every purchase of 8 or more books.  \r\n&gt;\r\n&gt;It offers regular customers 1 free book with every purchase of 7 or more books, and offers 2 free books with every purchase of 12 or more books.   \r\n&gt;\r\n&gt;Write the block of code that assigns freeBooks the appropriate value based on the values of the boolean variable isPremiumCustomer and the int variable nbooksPurchased\r\n\r\nThe code compiles without error but results are incorrect:\r\n\r\n    boolean isPremiumCustomer = false;\r\n        int freeBooks = 0;\r\n        Scanner scanner = new Scanner(System.in);\r\n        System.out.println(&quot;Enter the no of books:&quot;);\r\n        int nbooksPurchased = scanner.nextInt();\r\n        System.out.println(&quot;is Premium customer?(y/n):&quot;);\r\n        String ans = scanner.next();\r\n        if (ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;) &amp;&amp; (nbooksPurchased &gt;4 &amp;&amp; (nbooksPurchased &lt;8))) {\r\n            isPremiumCustomer = true;\r\n            freeBooks = 1;\r\n        }else if (ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;) &amp;&amp; (nbooksPurchased &gt;=8 )) {\r\n            isPremiumCustomer = true;\r\n            freeBooks = 2;\r\n        }else if (ans.equals(&quot;n&quot;) || ans.equals(&quot;N&quot;) &amp;&amp; (nbooksPurchased &gt;=7 &amp;&amp; (nbooksPurchased &lt;=11))) {\r\n            freeBooks = 1;\r\n        }else if (ans.equals(&quot;n&quot;) || ans.equals(&quot;N&quot;) &amp;&amp; (nbooksPurchased &gt;=12 )){\r\n            freeBooks = 2;\r\n            }\r\n            System.out.println(&quot;Free Books:&quot; + freeBooks);","title":"Incorrect results from code written for basic Java exercise","body":"<p>Here are the instructions</p>\n<blockquote>\n<p>Online Book Depot offers premium customers 1 free book with every purchase of 5 or more books and offers 2 free books with every purchase of 8 or more books.</p>\n<p>It offers regular customers 1 free book with every purchase of 7 or more books, and offers 2 free books with every purchase of 12 or more books.</p>\n<p>Write the block of code that assigns freeBooks the appropriate value based on the values of the boolean variable isPremiumCustomer and the int variable nbooksPurchased</p>\n</blockquote>\n<p>The code compiles without error but results are incorrect:</p>\n<pre><code>boolean isPremiumCustomer = false;\n    int freeBooks = 0;\n    Scanner scanner = new Scanner(System.in);\n    System.out.println(&quot;Enter the no of books:&quot;);\n    int nbooksPurchased = scanner.nextInt();\n    System.out.println(&quot;is Premium customer?(y/n):&quot;);\n    String ans = scanner.next();\n    if (ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;) &amp;&amp; (nbooksPurchased &gt;4 &amp;&amp; (nbooksPurchased &lt;8))) {\n        isPremiumCustomer = true;\n        freeBooks = 1;\n    }else if (ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;) &amp;&amp; (nbooksPurchased &gt;=8 )) {\n        isPremiumCustomer = true;\n        freeBooks = 2;\n    }else if (ans.equals(&quot;n&quot;) || ans.equals(&quot;N&quot;) &amp;&amp; (nbooksPurchased &gt;=7 &amp;&amp; (nbooksPurchased &lt;=11))) {\n        freeBooks = 1;\n    }else if (ans.equals(&quot;n&quot;) || ans.equals(&quot;N&quot;) &amp;&amp; (nbooksPurchased &gt;=12 )){\n        freeBooks = 2;\n        }\n        System.out.println(&quot;Free Books:&quot; + freeBooks);\n</code></pre>\n"},{"tags":["java","spring-boot","graalvm","graalvm-native-image","spring-native"],"comments":[{"owner":{"account_id":6821181,"reputation":3354,"user_id":5248299,"accept_rate":89,"display_name":"Kihats"},"score":0,"creation_date":1695288841,"post_id":77145242,"comment_id":136005584,"body_markdown":"Hey @Cesar Angiolucci\nI am facing the same issue with the same version of Spring Boot (3.1.3)","body":"Hey @Cesar Angiolucci I am facing the same issue with the same version of Spring Boot (3.1.3)"},{"owner":{"account_id":6821181,"reputation":3354,"user_id":5248299,"accept_rate":89,"display_name":"Kihats"},"score":0,"creation_date":1695299937,"post_id":77145242,"comment_id":136007862,"body_markdown":"It&#39;s trying to invoke a method `list()` on this line `at io.github.classgraph.ModuleReaderProxy.list(ModuleReaderProxy.java:107)`\n\n`final Object /* Stream&lt;String&gt; */ resourcesStream = ReflectionUtils\n                .invokeMethod(/* throwException = */ true, moduleReader, &quot;list&quot;);`\n\nThe `moduleReader` is of type `java.lang.AutoCloseable` an interface and I have no idea the specific concrete class the `moduleReader` is","body":"It&#39;s trying to invoke a method <code>list()</code> on this line <code>at io.github.classgraph.ModuleReaderProxy.list(ModuleReaderProx&zwnj;&#8203;y.java:107)</code>  <code>final Object &#47;* Stream&lt;String&gt; *&#47; resourcesStream = ReflectionUtils                 .invokeMethod(&#47;* throwException = *&#47; true, moduleReader, &quot;list&quot;);</code>  The <code>moduleReader</code> is of type <code>java.lang.AutoCloseable</code> an interface and I have no idea the specific concrete class the <code>moduleReader</code> is"},{"owner":{"account_id":13302065,"reputation":164,"user_id":9603261,"display_name":"Cesar Angiolucci"},"score":0,"creation_date":1695388566,"post_id":77145242,"comment_id":136021654,"body_markdown":"@Kihats i suspect it could be something to do with the springdoc-openapi, although im using its latest version (that supposedly should work fine). Are you using it also? Ill try to remove its dependency and code from the app and try again.","body":"@Kihats i suspect it could be something to do with the springdoc-openapi, although im using its latest version (that supposedly should work fine). Are you using it also? Ill try to remove its dependency and code from the app and try again."},{"owner":{"account_id":6821181,"reputation":3354,"user_id":5248299,"accept_rate":89,"display_name":"Kihats"},"score":0,"creation_date":1695484381,"post_id":77145242,"comment_id":136031903,"body_markdown":"Yeah, I have it as a dependency but I don&#39;t really have to use it. Let me try removing it","body":"Yeah, I have it as a dependency but I don&#39;t really have to use it. Let me try removing it"},{"owner":{"account_id":6821181,"reputation":3354,"user_id":5248299,"accept_rate":89,"display_name":"Kihats"},"score":0,"creation_date":1695914318,"post_id":77145242,"comment_id":136090148,"body_markdown":"Hey @Cesar, did you find a solution for this issue? I removed the dependency but still the error persists.","body":"Hey @Cesar, did you find a solution for this issue? I removed the dependency but still the error persists."},{"owner":{"account_id":13302065,"reputation":164,"user_id":9603261,"display_name":"Cesar Angiolucci"},"score":0,"creation_date":1695996409,"post_id":77145242,"comment_id":136101291,"body_markdown":"Hi @Kihats, yes actually i did resolve this specific issue (but now another one appeared). In my case, i had an internal dependency that was using and older version of a swagger dependency, in my case &quot;io.springfox.springfox-swagger-ui&quot;. I updated that project, changing that dependenc to the springdoc-openapi. Now, im facing another issue with the ModelMapper that im trying to resolve.","body":"Hi @Kihats, yes actually i did resolve this specific issue (but now another one appeared). In my case, i had an internal dependency that was using and older version of a swagger dependency, in my case &quot;io.springfox.springfox-swagger-ui&quot;. I updated that project, changing that dependenc to the springdoc-openapi. Now, im facing another issue with the ModelMapper that im trying to resolve."}],"owner":{"account_id":13302065,"reputation":164,"user_id":9603261,"display_name":"Cesar Angiolucci"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695235957,"creation_date":1695235957,"question_id":77145242,"body_markdown":"I&#180;m trying to convert a spring boot 2.x project to spring boot 3.1.3 and compile it with the native profile for the graalvm.\r\n\r\nI have followed this guide so far: https://softwaremill.com/how-to-migrate-a-spring-boot-app-to-a-native-image/#before-migration\r\n\r\nI was able compile and run the project with spring AOT enabled, generating the reachability metadata and after that successfully built the native image. My current env is: W10 22H2 x64 | openJDK 17.0.8 | graalVM CE 22.3.3 | MSVC 14.16.27023.\r\n\r\nWhen i run the executable it starts very quickly, but when i try to make any requests to the http endpoints of the application i get the following error:\r\n\r\n```\r\n15:36:01.330 [ERROR] o.a.c.c.C.[.[localhost] - Exception Processing ErrorPage[errorCode=0, location=/error]\r\njakarta.servlet.ServletException: Servlet.init() for servlet [dispatcherServlet] threw exception\r\n        at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:960)\r\n        at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:662)\r\n        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:621)\r\n        at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:410)\r\n        at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:340)\r\n        at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:277)\r\n        at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:359)\r\n        at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:222)\r\n        at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:305)\r\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:149)\r\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)\r\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)\r\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)\r\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n        at java.base@17.0.8/java.lang.Thread.run(Thread.java:833)\r\n        at org.graalvm.nativeimage.builder/com.oracle.svm.core.thread.PlatformThreads.threadStartRoutine(PlatformThreads.java:775)\r\n        at org.graalvm.nativeimage.builder/com.oracle.svm.core.windows.WindowsPlatformThreads.osThreadStartRoutine(WindowsPlatformThreads.java:178)\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;resourceHandlerMapping&#39;: Instantiation of supplied bean failed\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.obtainFromSupplier(AbstractAutowireCapableBeanFactory.java:1220)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1158)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:663)\r\n        at org.springframework.context.support.AbstractApplicationContext.getBeansOfType(AbstractApplicationContext.java:1309)\r\n        at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:368)\r\n        at org.springframework.web.servlet.DispatcherServlet.initHandlerMappings(DispatcherServlet.java:602)\r\n        at org.springframework.web.servlet.DispatcherServlet.initStrategies(DispatcherServlet.java:508)\r\n        at org.springframework.web.servlet.DispatcherServlet.onRefresh(DispatcherServlet.java:497)\r\n        at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:603)\r\n        at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:537)\r\n        at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:169)\r\n        at jakarta.servlet.GenericServlet.init(GenericServlet.java:143)\r\n        at jakarta.servlet.http.HttpServlet.init(HttpServlet.java:121)\r\n        at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:944)\r\n        ... 23 common frames omitted\r\nCaused by: io.github.classgraph.ClassGraphException: Uncaught exception during scan\r\n        at io.github.classgraph.ClassGraph.scan(ClassGraph.java:1570)\r\n        at io.github.classgraph.ClassGraph.scan(ClassGraph.java:1587)\r\n        at io.github.classgraph.ClassGraph.scan(ClassGraph.java:1600)\r\n        at org.webjars.WebJarAssetLocator.scanForWebJars(WebJarAssetLocator.java:188)\r\n        at org.webjars.WebJarAssetLocator.&lt;init&gt;(WebJarAssetLocator.java:210)\r\n        at org.webjars.WebJarAssetLocator.&lt;init&gt;(WebJarAssetLocator.java:194)\r\n        at org.springframework.web.servlet.resource.WebJarsResourceResolver.&lt;init&gt;(WebJarsResourceResolver.java:63)\r\n        at org.springframework.web.servlet.config.annotation.ResourceChainRegistration.getResourceResolvers(ResourceChainRegistration.java:114)\r\n        at org.springframework.web.servlet.config.annotation.ResourceHandlerRegistration.getRequestHandler(ResourceHandlerRegistration.java:215)\r\n        at org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry.getRequestHandler(ResourceHandlerRegistry.java:178)\r\n        at org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry.getHandlerMapping(ResourceHandlerRegistry.java:168)\r\n        at org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport.resourceHandlerMapping(WebMvcConfigurationSupport.java:589)\r\n        at org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport__BeanDefinitions.lambda$getResourceHandlerMappingInstanceSupplier$7(WebMvcConfigurationSupport__BeanDefinitions.java:172)\r\n        at org.springframework.util.function.ThrowingBiFunction.apply(ThrowingBiFunction.java:68)\r\n        at org.springframework.util.function.ThrowingBiFunction.apply(ThrowingBiFunction.java:54)\r\n        at org.springframework.beans.factory.aot.BeanInstanceSupplier.lambda$get$2(BeanInstanceSupplier.java:202)\r\n        at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)\r\n        at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)\r\n        at org.springframework.beans.factory.aot.BeanInstanceSupplier.invokeBeanSupplier(BeanInstanceSupplier.java:214)\r\n        at org.springframework.beans.factory.aot.BeanInstanceSupplier.get(BeanInstanceSupplier.java:202)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.obtainInstanceFromSupplier(DefaultListableBeanFactory.java:947)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.obtainFromSupplier(AbstractAutowireCapableBeanFactory.java:1214)\r\n        ... 42 common frames omitted\r\nCaused by: java.lang.IllegalArgumentException: Exception while invoking method &quot;list&quot;\r\n        at nonapi.io.github.classgraph.utils.ReflectionUtils.invokeMethod(ReflectionUtils.java:268)\r\n        at nonapi.io.github.classgraph.utils.ReflectionUtils.invokeMethod(ReflectionUtils.java:301)\r\n        at io.github.classgraph.ModuleReaderProxy.list(ModuleReaderProxy.java:107)\r\n        at io.github.classgraph.ClasspathElementModule.scanPaths(ClasspathElementModule.java:286)\r\n        at io.github.classgraph.Scanner$5.processWorkUnit(Scanner.java:1095)\r\n        at io.github.classgraph.Scanner$5.processWorkUnit(Scanner.java:1089)\r\n        at nonapi.io.github.classgraph.concurrency.WorkQueue.runWorkLoop(WorkQueue.java:246)\r\n        at nonapi.io.github.classgraph.concurrency.WorkQueue.access$000(WorkQueue.java:50)\r\n        at nonapi.io.github.classgraph.concurrency.WorkQueue$1.call(WorkQueue.java:201)\r\n        at nonapi.io.github.classgraph.concurrency.WorkQueue$1.call(WorkQueue.java:198)\r\n        at java.base@17.0.8/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n        at java.base@17.0.8/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n        at java.base@17.0.8/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n        ... 3 common frames omitted\r\nCaused by: java.lang.reflect.InvocationTargetException: null\r\n        at java.base@17.0.8/java.lang.reflect.Method.invoke(Method.java:568)\r\n        at nonapi.io.github.classgraph.utils.ReflectionUtils.invokeMethod(ReflectionUtils.java:260)\r\n        ... 15 common frames omitted\r\nCaused by: com.oracle.svm.core.jdk.UnsupportedFeatureError: JRT file system is disabled\r\n        at org.graalvm.nativeimage.builder/com.oracle.svm.core.util.VMError.unsupportedFeature(VMError.java:89)\r\n        at java.base@17.0.8/jdk.internal.module.SystemModuleFinders$SystemImage.reader(SystemModuleFinders.java:139)\r\n        at java.base@17.0.8/jdk.internal.module.SystemModuleFinders$ModuleContentSpliterator.&lt;init&gt;(SystemModuleFinders.java:527)\r\n        at java.base@17.0.8/jdk.internal.module.SystemModuleFinders$SystemModuleReader.list(SystemModuleFinders.java:502)\r\n        ... 17 common frames omitted\r\n```","title":"Spring Boot GraalVM Native Image JRT File System is Disabled Error","body":"<p>Im trying to convert a spring boot 2.x project to spring boot 3.1.3 and compile it with the native profile for the graalvm.</p>\n<p>I have followed this guide so far: <a href=\"https://softwaremill.com/how-to-migrate-a-spring-boot-app-to-a-native-image/#before-migration\" rel=\"nofollow noreferrer\">https://softwaremill.com/how-to-migrate-a-spring-boot-app-to-a-native-image/#before-migration</a></p>\n<p>I was able compile and run the project with spring AOT enabled, generating the reachability metadata and after that successfully built the native image. My current env is: W10 22H2 x64 | openJDK 17.0.8 | graalVM CE 22.3.3 | MSVC 14.16.27023.</p>\n<p>When i run the executable it starts very quickly, but when i try to make any requests to the http endpoints of the application i get the following error:</p>\n<pre><code>15:36:01.330 [ERROR] o.a.c.c.C.[.[localhost] - Exception Processing ErrorPage[errorCode=0, location=/error]\njakarta.servlet.ServletException: Servlet.init() for servlet [dispatcherServlet] threw exception\n        at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:960)\n        at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:662)\n        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:621)\n        at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:410)\n        at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:340)\n        at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:277)\n        at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:359)\n        at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:222)\n        at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:305)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:149)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n        at java.base@17.0.8/java.lang.Thread.run(Thread.java:833)\n        at org.graalvm.nativeimage.builder/com.oracle.svm.core.thread.PlatformThreads.threadStartRoutine(PlatformThreads.java:775)\n        at org.graalvm.nativeimage.builder/com.oracle.svm.core.windows.WindowsPlatformThreads.osThreadStartRoutine(WindowsPlatformThreads.java:178)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'resourceHandlerMapping': Instantiation of supplied bean failed\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.obtainFromSupplier(AbstractAutowireCapableBeanFactory.java:1220)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1158)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:663)\n        at org.springframework.context.support.AbstractApplicationContext.getBeansOfType(AbstractApplicationContext.java:1309)\n        at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:368)\n        at org.springframework.web.servlet.DispatcherServlet.initHandlerMappings(DispatcherServlet.java:602)\n        at org.springframework.web.servlet.DispatcherServlet.initStrategies(DispatcherServlet.java:508)\n        at org.springframework.web.servlet.DispatcherServlet.onRefresh(DispatcherServlet.java:497)\n        at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:603)\n        at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:537)\n        at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:169)\n        at jakarta.servlet.GenericServlet.init(GenericServlet.java:143)\n        at jakarta.servlet.http.HttpServlet.init(HttpServlet.java:121)\n        at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:944)\n        ... 23 common frames omitted\nCaused by: io.github.classgraph.ClassGraphException: Uncaught exception during scan\n        at io.github.classgraph.ClassGraph.scan(ClassGraph.java:1570)\n        at io.github.classgraph.ClassGraph.scan(ClassGraph.java:1587)\n        at io.github.classgraph.ClassGraph.scan(ClassGraph.java:1600)\n        at org.webjars.WebJarAssetLocator.scanForWebJars(WebJarAssetLocator.java:188)\n        at org.webjars.WebJarAssetLocator.&lt;init&gt;(WebJarAssetLocator.java:210)\n        at org.webjars.WebJarAssetLocator.&lt;init&gt;(WebJarAssetLocator.java:194)\n        at org.springframework.web.servlet.resource.WebJarsResourceResolver.&lt;init&gt;(WebJarsResourceResolver.java:63)\n        at org.springframework.web.servlet.config.annotation.ResourceChainRegistration.getResourceResolvers(ResourceChainRegistration.java:114)\n        at org.springframework.web.servlet.config.annotation.ResourceHandlerRegistration.getRequestHandler(ResourceHandlerRegistration.java:215)\n        at org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry.getRequestHandler(ResourceHandlerRegistry.java:178)\n        at org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry.getHandlerMapping(ResourceHandlerRegistry.java:168)\n        at org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport.resourceHandlerMapping(WebMvcConfigurationSupport.java:589)\n        at org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport__BeanDefinitions.lambda$getResourceHandlerMappingInstanceSupplier$7(WebMvcConfigurationSupport__BeanDefinitions.java:172)\n        at org.springframework.util.function.ThrowingBiFunction.apply(ThrowingBiFunction.java:68)\n        at org.springframework.util.function.ThrowingBiFunction.apply(ThrowingBiFunction.java:54)\n        at org.springframework.beans.factory.aot.BeanInstanceSupplier.lambda$get$2(BeanInstanceSupplier.java:202)\n        at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)\n        at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)\n        at org.springframework.beans.factory.aot.BeanInstanceSupplier.invokeBeanSupplier(BeanInstanceSupplier.java:214)\n        at org.springframework.beans.factory.aot.BeanInstanceSupplier.get(BeanInstanceSupplier.java:202)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.obtainInstanceFromSupplier(DefaultListableBeanFactory.java:947)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.obtainFromSupplier(AbstractAutowireCapableBeanFactory.java:1214)\n        ... 42 common frames omitted\nCaused by: java.lang.IllegalArgumentException: Exception while invoking method &quot;list&quot;\n        at nonapi.io.github.classgraph.utils.ReflectionUtils.invokeMethod(ReflectionUtils.java:268)\n        at nonapi.io.github.classgraph.utils.ReflectionUtils.invokeMethod(ReflectionUtils.java:301)\n        at io.github.classgraph.ModuleReaderProxy.list(ModuleReaderProxy.java:107)\n        at io.github.classgraph.ClasspathElementModule.scanPaths(ClasspathElementModule.java:286)\n        at io.github.classgraph.Scanner$5.processWorkUnit(Scanner.java:1095)\n        at io.github.classgraph.Scanner$5.processWorkUnit(Scanner.java:1089)\n        at nonapi.io.github.classgraph.concurrency.WorkQueue.runWorkLoop(WorkQueue.java:246)\n        at nonapi.io.github.classgraph.concurrency.WorkQueue.access$000(WorkQueue.java:50)\n        at nonapi.io.github.classgraph.concurrency.WorkQueue$1.call(WorkQueue.java:201)\n        at nonapi.io.github.classgraph.concurrency.WorkQueue$1.call(WorkQueue.java:198)\n        at java.base@17.0.8/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n        at java.base@17.0.8/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n        at java.base@17.0.8/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n        ... 3 common frames omitted\nCaused by: java.lang.reflect.InvocationTargetException: null\n        at java.base@17.0.8/java.lang.reflect.Method.invoke(Method.java:568)\n        at nonapi.io.github.classgraph.utils.ReflectionUtils.invokeMethod(ReflectionUtils.java:260)\n        ... 15 common frames omitted\nCaused by: com.oracle.svm.core.jdk.UnsupportedFeatureError: JRT file system is disabled\n        at org.graalvm.nativeimage.builder/com.oracle.svm.core.util.VMError.unsupportedFeature(VMError.java:89)\n        at java.base@17.0.8/jdk.internal.module.SystemModuleFinders$SystemImage.reader(SystemModuleFinders.java:139)\n        at java.base@17.0.8/jdk.internal.module.SystemModuleFinders$ModuleContentSpliterator.&lt;init&gt;(SystemModuleFinders.java:527)\n        at java.base@17.0.8/jdk.internal.module.SystemModuleFinders$SystemModuleReader.list(SystemModuleFinders.java:502)\n        ... 17 common frames omitted\n</code></pre>\n"},{"tags":["java","recursion"],"comments":[{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":0,"creation_date":1695234270,"post_id":77145096,"comment_id":135998684,"body_markdown":"What if instead of using `scan`, you just assign `&quot;Hello World&quot;` to `input6`?","body":"What if instead of using <code>scan</code>, you just assign <code>&quot;Hello World&quot;</code> to <code>input6</code>?"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1695234645,"post_id":77145096,"comment_id":135998759,"body_markdown":"because `next()` reads only one word&#185;.... try printing the input just to check (is often helpful anyway) || **&#185;** `next()` actually returns the next token and, by default, whitespaces are used as delimiter || you can use `nextLine()` if you want to read the whole line (or change the delimiter)","body":"because <code>next()</code> reads only one word&#185;.... try printing the input just to check (is often helpful anyway) || <b>&#185;</b> <code>next()</code> actually returns the next token and, by default, whitespaces are used as delimiter || you can use <code>nextLine()</code> if you want to read the whole line (or change the delimiter)"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":1,"creation_date":1695234736,"post_id":77145096,"comment_id":135998779,"body_markdown":"Why is your method recursive. Isn&#39;t it easier to traverse back the string? Where did you get `InputMismatchException`? Post a stacktrace.","body":"Why is your method recursive. Isn&#39;t it easier to traverse back the string? Where did you get <code>InputMismatchException</code>? Post a stacktrace."},{"owner":{"account_id":29494191,"reputation":13,"user_id":22602620,"display_name":"Robert Beletsky"},"score":0,"creation_date":1695235755,"post_id":77145096,"comment_id":135998960,"body_markdown":"Exception in thread &quot;main&quot; java.util.InputMismatchException\n\tat java.base/java.util.Scanner.throwFor(Scanner.java:939)\n\tat java.base/java.util.Scanner.next(Scanner.java:1594)\n\tat java.base/java.util.Scanner.nextInt(Scanner.java:2258)\n\tat java.base/java.util.Scanner.nextInt(Scanner.java:2212)\n\tat CSDS233/csds233.Palindrome.main(Palindrome.java:137) //I made a new scanner because this scanner was also being used to control the switch statement I think.","body":"Exception in thread &quot;main&quot; java.util.InputMismatchException \tat java.base/java.util.Scanner.throwFor(Scanner.java:939) \tat java.base/java.util.Scanner.next(Scanner.java:1594) \tat java.base/java.util.Scanner.nextInt(Scanner.java:2258) \tat java.base/java.util.Scanner.nextInt(Scanner.java:2212) \tat CSDS233/csds233.Palindrome.main(Palindrome.java:137) //I made a new scanner because this scanner was also being used to control the switch statement I think."}],"answers":[{"tags":[],"owner":{"account_id":25647583,"reputation":122,"user_id":19415431,"display_name":"Divyansh Gemini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695235516,"creation_date":1695235091,"answer_id":77145180,"question_id":77145096,"body_markdown":"**Solution:**\r\nUse `nextLine()` method instead of `next()` method.\r\n\r\n**Reason:**\r\n`next()` method is used to input String containing only 1 word whereas `nextLine()` method is used to input String containing multiple words. This is the reason your code is returning &#39;Hello&#39; instead of &#39;World Hello&#39; because it is taking only &#39;Hello&#39; as the input and ignoring &#39; World&#39;\r\n\r\n**Your updated code:**\r\n```\r\ncase 6:\r\n        System.out.println(&quot;Enter a string to reverse:&quot;);\r\n        String input6 = scan.nextLine();\r\n        System.out.println(sentenceReversal(input6));\r\n        break;\r\n```\r\n\r\nRefer more methods of Scanner class at the below page:\r\nhttps://docs.oracle.com/javase%2F7%2Fdocs%2Fapi%2F%2F/java/util/Scanner.html#method_summary","title":"Why does my method not work when I input a variable vs. inputting a string directly?","body":"<p><strong>Solution:</strong>\nUse <code>nextLine()</code> method instead of <code>next()</code> method.</p>\n<p><strong>Reason:</strong>\n<code>next()</code> method is used to input String containing only 1 word whereas <code>nextLine()</code> method is used to input String containing multiple words. This is the reason your code is returning 'Hello' instead of 'World Hello' because it is taking only 'Hello' as the input and ignoring ' World'</p>\n<p><strong>Your updated code:</strong></p>\n<pre><code>case 6:\n        System.out.println(&quot;Enter a string to reverse:&quot;);\n        String input6 = scan.nextLine();\n        System.out.println(sentenceReversal(input6));\n        break;\n</code></pre>\n<p>Refer more methods of Scanner class at the below page:\n<a href=\"https://docs.oracle.com/javase%2F7%2Fdocs%2Fapi%2F%2F/java/util/Scanner.html#method_summary\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase%2F7%2Fdocs%2Fapi%2F%2F/java/util/Scanner.html#method_summary</a></p>\n"}],"owner":{"account_id":29494191,"reputation":13,"user_id":22602620,"display_name":"Robert Beletsky"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77145180,"answer_count":1,"score":1,"last_activity_date":1695235516,"creation_date":1695234125,"question_id":77145096,"body_markdown":"```\r\n//method I&#39;m trying to call\r\nstatic String sentenceReversal(String input) {\r\n\t\t\r\n\t\t\tint x = input.indexOf(&quot; &quot;);\r\n\t\t    \r\n\t\t    //Base Case\r\n\t\t    if(x == -1)\r\n\t\t      return input;\r\n\t\t      \r\n\t\t     //Recursive Method\r\n\t\t    return sentenceReversal(input.substring(x+1)) +&quot; &quot;+ input.substring(0, x);\r\n```\r\n\r\n```\r\ncase 6:\r\n\t\t\tSystem.out.println(&quot;Enter a string to reverse:&quot;);\r\n\t\t\tString input6 = scan.next();\r\n\t\t\tSystem.out.println(sentenceReversal(input6));\r\n\t\t\tbreak;\r\n```\r\n\r\n\r\n\r\nCalling the method as `sentenceReversal(&quot;Hello World&quot;)`\r\n\r\nreturns `World Hello`, but calling it with `input6` returns `Hello` and nothing else, any ideas?\r\n\r\nI made a specific scanner only for this case as well because I was previously getting a `InputMismatchException`\r\n\r\nAlso when after inputting a number after the switch the next part of the string appears.","title":"Why does my method not work when I input a variable vs. inputting a string directly?","body":"<pre><code>//method I'm trying to call\nstatic String sentenceReversal(String input) {\n        \n            int x = input.indexOf(&quot; &quot;);\n            \n            //Base Case\n            if(x == -1)\n              return input;\n              \n             //Recursive Method\n            return sentenceReversal(input.substring(x+1)) +&quot; &quot;+ input.substring(0, x);\n</code></pre>\n<pre><code>case 6:\n            System.out.println(&quot;Enter a string to reverse:&quot;);\n            String input6 = scan.next();\n            System.out.println(sentenceReversal(input6));\n            break;\n</code></pre>\n<p>Calling the method as <code>sentenceReversal(&quot;Hello World&quot;)</code></p>\n<p>returns <code>World Hello</code>, but calling it with <code>input6</code> returns <code>Hello</code> and nothing else, any ideas?</p>\n<p>I made a specific scanner only for this case as well because I was previously getting a <code>InputMismatchException</code></p>\n<p>Also when after inputting a number after the switch the next part of the string appears.</p>\n"},{"tags":["java","json","serialization","enums","jackson"],"comments":[{"owner":{"account_id":8011176,"reputation":3990,"user_id":6042824,"accept_rate":94,"display_name":"Bilesh Ganguly"},"score":0,"creation_date":1465990183,"post_id":37833557,"comment_id":63129426,"body_markdown":"My jab at an annotation free implementation. Do reply. http://pastebin.com/raw/Mvf9Ygq1","body":"My jab at an annotation free implementation. Do reply. <a href=\"http://pastebin.com/raw/Mvf9Ygq1\" rel=\"nofollow noreferrer\">pastebin.com/raw/Mvf9Ygq1</a>"},{"owner":{"account_id":135385,"reputation":1785,"user_id":457589,"display_name":"Julien"},"score":8,"creation_date":1492677364,"post_id":37833557,"comment_id":74082023,"body_markdown":"`ON = 0`, `OFF = 1`, does NOT look like a friendly thing IMHO ... just saying ;-)","body":"<code>ON = 0</code>, <code>OFF = 1</code>, does NOT look like a friendly thing IMHO ... just saying ;-)"},{"owner":{"account_id":4038832,"reputation":11673,"user_id":3322273,"accept_rate":73,"display_name":"SomethingSomething"},"score":3,"creation_date":1619519703,"post_id":37833557,"comment_id":118924369,"body_markdown":"@Julien it took me 4 years, but I&#39;ve finally taken your advice and fixed it :P","body":"@Julien it took me 4 years, but I&#39;ve finally taken your advice and fixed it :P"}],"answers":[{"tags":[],"owner":{"account_id":3495915,"reputation":804,"user_id":2924138,"accept_rate":92,"display_name":"Tom C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1619519841,"creation_date":1465988888,"answer_id":37833695,"question_id":37833557,"body_markdown":"If you want to print the ordinal of the enum you can change your constructor to accept an `int` instead of `State` and then in your call to `Machine` you can structure it in the following way:\r\n\r\n`Machine m = new Machine(&quot;Machine 1&quot;, 8, State.OFF.ordinal());`\r\n\r\nThis will get the enum ordinal value of the passed in state and print the following\r\n\r\n`{name=&#39;Machine 1&#39;, numCores=8, state=0}`\r\n","title":"Jackson: Serialize and deserialize enum values as integers","body":"<p>If you want to print the ordinal of the enum you can change your constructor to accept an <code>int</code> instead of <code>State</code> and then in your call to <code>Machine</code> you can structure it in the following way:</p>\n<p><code>Machine m = new Machine(&quot;Machine 1&quot;, 8, State.OFF.ordinal());</code></p>\n<p>This will get the enum ordinal value of the passed in state and print the following</p>\n<p><code>{name='Machine 1', numCores=8, state=0}</code></p>\n"},{"tags":[],"owner":{"account_id":3063445,"reputation":3948,"user_id":2595658,"accept_rate":64,"display_name":"Paco Abato"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1465989548,"creation_date":1465989041,"answer_id":37833755,"question_id":37833557,"body_markdown":"For completion I post another way: custom serializer:\r\n\r\n    public class StateSerializer extends JsonSerializer&lt;State&gt; {  \r\n        public void serialize(State value, JsonGenerator generator, SerializerProvider provider) throws IOException, JsonProcessingException {\r\n            generator.writeStartObject();\r\n            generator.writeFieldName(&quot;id&quot;);\r\n            generator.writeNumber(value.getId());\r\n            generator.writeEndObject();\r\n        }\r\n    }\r\n\r\n    @JsonSerialize(using = StateSerializer.class)\r\n    public enum State { \r\n        ...\r\n        public int getId(){...}\r\n    }","title":"Jackson: Serialize and deserialize enum values as integers","body":"<p>For completion I post another way: custom serializer:</p>\n\n<pre><code>public class StateSerializer extends JsonSerializer&lt;State&gt; {  \n    public void serialize(State value, JsonGenerator generator, SerializerProvider provider) throws IOException, JsonProcessingException {\n        generator.writeStartObject();\n        generator.writeFieldName(\"id\");\n        generator.writeNumber(value.getId());\n        generator.writeEndObject();\n    }\n}\n\n@JsonSerialize(using = StateSerializer.class)\npublic enum State { \n    ...\n    public int getId(){...}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":460481,"reputation":5813,"user_id":861594,"display_name":"user861594"},"down_vote_count":1,"up_vote_count":91,"is_accepted":true,"score":90,"last_activity_date":1619519789,"creation_date":1465989401,"answer_id":37833901,"question_id":37833557,"body_markdown":"It should work by specifying `JsonValue` mapper. \r\n\r\n    public enum State {\r\n        OFF,\r\n        ON,\r\n        UNKNOWN;\r\n\r\n        @JsonValue\r\n        public int toValue() {\r\n            return ordinal();\r\n        }\r\n    }  \r\n\r\nThis works for deserialization also, as noted in Javadoc of `@JsonValue` annotation:\r\n\r\n&gt; NOTE: when use for Java enums, one additional feature is that value\r\n&gt; returned by annotated method is also considered to be the value to\r\n&gt; deserialize from, not just JSON String to serialize as. This is\r\n&gt; possible since set of Enum values is constant and it is possible to\r\n&gt; define mapping, but can not be done in general for POJO types; as\r\n&gt; such, this is not used for POJO deserialization","title":"Jackson: Serialize and deserialize enum values as integers","body":"<p>It should work by specifying <code>JsonValue</code> mapper.</p>\n<pre><code>public enum State {\n    OFF,\n    ON,\n    UNKNOWN;\n\n    @JsonValue\n    public int toValue() {\n        return ordinal();\n    }\n}  \n</code></pre>\n<p>This works for deserialization also, as noted in Javadoc of <code>@JsonValue</code> annotation:</p>\n<blockquote>\n<p>NOTE: when use for Java enums, one additional feature is that value\nreturned by annotated method is also considered to be the value to\ndeserialize from, not just JSON String to serialize as. This is\npossible since set of Enum values is constant and it is possible to\ndefine mapping, but can not be done in general for POJO types; as\nsuch, this is not used for POJO deserialization</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1408651,"reputation":1395,"user_id":1335717,"accept_rate":70,"display_name":"Martin"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1493896972,"creation_date":1493896682,"answer_id":43781406,"question_id":37833557,"body_markdown":"You can use setting \r\n\r\n    objectMapper.enable(SerializationFeature.WRITE_ENUMS_USING_INDEX);\r\n\r\nSee https://github.com/FasterXML/jackson-databind/blob/master/src/test/java/com/fasterxml/jackson/databind/ser/TestEnumSerialization.java for complete test cases\r\n\r\nThanks to tip at https://righele.it/2016/01/30/jackson-deserialization-from-json-to-java-enums/","title":"Jackson: Serialize and deserialize enum values as integers","body":"<p>You can use setting </p>\n\n<pre><code>objectMapper.enable(SerializationFeature.WRITE_ENUMS_USING_INDEX);\n</code></pre>\n\n<p>See <a href=\"https://github.com/FasterXML/jackson-databind/blob/master/src/test/java/com/fasterxml/jackson/databind/ser/TestEnumSerialization.java\" rel=\"noreferrer\">https://github.com/FasterXML/jackson-databind/blob/master/src/test/java/com/fasterxml/jackson/databind/ser/TestEnumSerialization.java</a> for complete test cases</p>\n\n<p>Thanks to tip at <a href=\"https://righele.it/2016/01/30/jackson-deserialization-from-json-to-java-enums/\" rel=\"noreferrer\">https://righele.it/2016/01/30/jackson-deserialization-from-json-to-java-enums/</a></p>\n"},{"tags":[],"owner":{"account_id":2563377,"reputation":7174,"user_id":2224047,"display_name":"Nikolai  Shevchenko"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1619519822,"creation_date":1536228290,"answer_id":52201603,"question_id":37833557,"body_markdown":"Yet another way: \r\n\r\n    public enum State {\r\n    \r\n        @JsonProperty(&quot;0&quot;)\r\n        OFF,\r\n\r\n        @JsonProperty(&quot;1&quot;)\r\n        ON,\r\n\r\n        @JsonProperty(&quot;2&quot;)\r\n        UNKNOWN\r\n    }\r\n\r\nHowever, this will produce `{&quot;state&quot; : &quot;1&quot;}` instead of `{&quot;state&quot; : 1}` (string, not numeric). In most cases it&#39;s OK","title":"Jackson: Serialize and deserialize enum values as integers","body":"<p>Yet another way:</p>\n<pre><code>public enum State {\n\n    @JsonProperty(&quot;0&quot;)\n    OFF,\n\n    @JsonProperty(&quot;1&quot;)\n    ON,\n\n    @JsonProperty(&quot;2&quot;)\n    UNKNOWN\n}\n</code></pre>\n<p>However, this will produce <code>{&quot;state&quot; : &quot;1&quot;}</code> instead of <code>{&quot;state&quot; : 1}</code> (string, not numeric). In most cases it's OK</p>\n"},{"tags":[],"owner":{"account_id":13045395,"reputation":2899,"user_id":9427395,"display_name":"dasunse"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1619519802,"creation_date":1558668645,"answer_id":56285491,"question_id":37833557,"body_markdown":"You can use in this way\r\n\r\n    import com.fasterxml.jackson.annotation.JsonFormat;\r\n\r\n    @JsonFormat(shape = JsonFormat.Shape.NUMBER)\r\n    public enum State {\r\n           OFF,\r\n           ON,\r\n           UNKNOWN\r\n    }\r\n\r\n","title":"Jackson: Serialize and deserialize enum values as integers","body":"<p>You can use in this way</p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonFormat;\n\n@JsonFormat(shape = JsonFormat.Shape.NUMBER)\npublic enum State {\n       OFF,\n       ON,\n       UNKNOWN\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":148507,"reputation":1161,"user_id":360327,"accept_rate":67,"display_name":"Udayaditya Barua"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658162788,"creation_date":1658162788,"answer_id":73025842,"question_id":37833557,"body_markdown":"    \r\nFor integer enums, in kotlin, this works well. In java as well. If you don&#39;t want to use ordinals. \r\n\r\n    enum class State(@get:JsonValue val state: Int) {\r\n              OFF(0),\r\n              ON(1),\r\n              UNKNOWN(-1)\r\n    }\r\n\r\nByte code generated is:\r\n\r\n    @JsonValue\r\n    public final int getState() {\r\n      return this.state;\r\n   }","title":"Jackson: Serialize and deserialize enum values as integers","body":"<p>For integer enums, in kotlin, this works well. In java as well. If you don't want to use ordinals.</p>\n<pre><code>enum class State(@get:JsonValue val state: Int) {\n          OFF(0),\n          ON(1),\n          UNKNOWN(-1)\n}\n</code></pre>\n<p>Byte code generated is:</p>\n<pre><code>@JsonValue\npublic final int getState() {\n  return this.state;\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":28445630,"reputation":1,"user_id":21764376,"display_name":"J&#252;ri Raidma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695235351,"creation_date":1695126925,"answer_id":77134610,"question_id":37833557,"body_markdown":"I had autogenerated enum classes, and could not add `@JsonValue` (or `@XmlValue`).\r\nI resolved this with custom serialize method, where I added:\r\n\r\n```\r\nobjectMapper.enable(SerializationFeature.WRITE_ENUMS_USING_TO_STRING);\r\n```\r\n\r\nComplete method was like this, for example:\r\n```\r\nprivate static ObjectMapper createXmlMapper() {\r\n  ObjectMapper objectMapper = new XmlMapper();\r\n  objectMapper.registerModule(new JaxbAnnotationModule());\r\n  JacksonXmlModule xmlModule = new JacksonXmlModule();\r\n  xmlModule.setDefaultUseWrapper(false);\r\n  objectMapper.registerModule(xmlModule);\r\n  objectMapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);\r\n  objectMapper.enable(SerializationFeature.WRITE_ENUMS_USING_TO_STRING);  // to overcome jackson enum serialization issue, where enum name is returned instead of value\r\n  objectMapper.registerModule(new JavaTimeModule());\r\n  return objectMapper;\r\n}\r\n\r\n// Method to serialize object to XML using XmlMapper\r\npublic static String serializeToXml(Object object) throws JsonProcessingException {\r\n  ObjectMapper objectMapper = createXmlMapper();\r\n  return objectMapper.writeValueAsString(object);\r\n}\r\n```","title":"Jackson: Serialize and deserialize enum values as integers","body":"<p>I had autogenerated enum classes, and could not add <code>@JsonValue</code> (or <code>@XmlValue</code>).\nI resolved this with custom serialize method, where I added:</p>\n<pre><code>objectMapper.enable(SerializationFeature.WRITE_ENUMS_USING_TO_STRING);\n</code></pre>\n<p>Complete method was like this, for example:</p>\n<pre><code>private static ObjectMapper createXmlMapper() {\n  ObjectMapper objectMapper = new XmlMapper();\n  objectMapper.registerModule(new JaxbAnnotationModule());\n  JacksonXmlModule xmlModule = new JacksonXmlModule();\n  xmlModule.setDefaultUseWrapper(false);\n  objectMapper.registerModule(xmlModule);\n  objectMapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);\n  objectMapper.enable(SerializationFeature.WRITE_ENUMS_USING_TO_STRING);  // to overcome jackson enum serialization issue, where enum name is returned instead of value\n  objectMapper.registerModule(new JavaTimeModule());\n  return objectMapper;\n}\n\n// Method to serialize object to XML using XmlMapper\npublic static String serializeToXml(Object object) throws JsonProcessingException {\n  ObjectMapper objectMapper = createXmlMapper();\n  return objectMapper.writeValueAsString(object);\n}\n</code></pre>\n"}],"owner":{"account_id":4038832,"reputation":11673,"user_id":3322273,"accept_rate":73,"display_name":"SomethingSomething"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58269,"favorite_count":0,"down_vote_count":0,"up_vote_count":49,"accepted_answer_id":37833901,"answer_count":8,"score":49,"last_activity_date":1695235351,"creation_date":1465988499,"question_id":37833557,"body_markdown":"Consider the following enum and class:\r\n\r\n    public enum State {\r\n        OFF,\r\n        ON,\r\n        UNKNOWN\r\n    }\r\n\r\n    public class Machine {\r\n        String name;\r\n        int numCores;\r\n        State state;\r\n\r\n        public Machine(String name, int numCores, State state) {\r\n            this.name = name;\r\n            this.numCores = numCores;\r\n            this.state = state;\r\n        }\r\n    }\r\n\r\n\r\nAnd consider the following main function:\r\n\r\n\r\n    public static void main(String args[]) {\r\n        Machine m = new Machine(&quot;Machine 1&quot;, 8, State.OFF);\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        String machineAsJsonString = mapper.writeValueAsString(m);\r\n        System.out.println(machineAsJsonString);\r\n    }\r\n\r\nCurrently, the output of this main is:\r\n\r\n    {&quot;name&quot; : &quot;Machine 1&quot;, &quot;numCores&quot; : 8, &quot;state&quot; : &quot;OFF&quot;}\r\n\r\n\r\nThis output is not good for me, as instead of the string `&quot;OFF&quot;` for `state`, I would like it to be `0`, which is the ordinal value of `OFF` in the enum `State`. \r\n\r\n**So the actual result I want to get is:**\r\n\r\n    {&quot;name&quot; : &quot;Machine 1&quot;, &quot;numCores&quot; : 8, &quot;state&quot; : 0}\r\n\r\n\r\n\r\nIs there some elegant way to make it behave this way?","title":"Jackson: Serialize and deserialize enum values as integers","body":"<p>Consider the following enum and class:</p>\n<pre><code>public enum State {\n    OFF,\n    ON,\n    UNKNOWN\n}\n\npublic class Machine {\n    String name;\n    int numCores;\n    State state;\n\n    public Machine(String name, int numCores, State state) {\n        this.name = name;\n        this.numCores = numCores;\n        this.state = state;\n    }\n}\n</code></pre>\n<p>And consider the following main function:</p>\n<pre><code>public static void main(String args[]) {\n    Machine m = new Machine(&quot;Machine 1&quot;, 8, State.OFF);\n    ObjectMapper mapper = new ObjectMapper();\n    String machineAsJsonString = mapper.writeValueAsString(m);\n    System.out.println(machineAsJsonString);\n}\n</code></pre>\n<p>Currently, the output of this main is:</p>\n<pre><code>{&quot;name&quot; : &quot;Machine 1&quot;, &quot;numCores&quot; : 8, &quot;state&quot; : &quot;OFF&quot;}\n</code></pre>\n<p>This output is not good for me, as instead of the string <code>&quot;OFF&quot;</code> for <code>state</code>, I would like it to be <code>0</code>, which is the ordinal value of <code>OFF</code> in the enum <code>State</code>.</p>\n<p><strong>So the actual result I want to get is:</strong></p>\n<pre><code>{&quot;name&quot; : &quot;Machine 1&quot;, &quot;numCores&quot; : 8, &quot;state&quot; : 0}\n</code></pre>\n<p>Is there some elegant way to make it behave this way?</p>\n"},{"tags":["javascript","java","android","react-native"],"owner":{"account_id":20859297,"reputation":1,"user_id":15321895,"display_name":"Pablo Cabrera"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695234709,"creation_date":1695234642,"question_id":77145149,"body_markdown":"I am launching a native intent from Java and I need to catch if the user saves or cancel  a configuration made before inside the java code so I could send back the corresponding response to my React Native module.\r\n\r\nI am running the native intent `ACTION_WIFI_ADD_NETWORKS` but I don&#39;t know how to catch if the user press the `save` or `cancel` button in this code.\r\n\r\nmy module code:\r\n\r\n```java\r\npublic class MyConnection extends ReactContextBaseJavaModule {\r\n    private Context reactContext;\r\n\r\n    public MYConnection(ReactApplicationContext reactContext) {\r\n            super(reactContext);\r\n        this.reactContext = reactContext;\r\n        reactContext.startActivityForResult(intent, REQUEST_CODE);\r\n        this.connectivityManager = (ConnectivityManager)reactContext.getSystemService(reactContext.CONNECTIVITY_SERVICE);\r\n    }\r\n\r\n    @Override\r\n    public String getName() {\r\n        return &quot;AndroidConnection&quot;;\r\n    }\r\n\r\n    @ReactMethod\r\n    public void connect(String ssid,String userName, String passWord, boolean isHidden, Promise promise) {\r\n        try\r\n        {\r\n          // I Config a Wifi network to save the this code\r\n          \r\n          int status = wifiManager.addNetworkSuggestions(suggestionsList);\r\n          if (status == WifiManager.STATUS_NETWORK_SUGGESTIONS_SUCCESS) {\r\n            Bundle bundle = new Bundle();\r\n            bundle.putParcelableArrayList(EXTRA_WIFI_NETWORK_LIST,(ArrayList&lt;? extends\r\n              Parcelable&gt;) suggestionsList);\r\n            final Intent intent = new Intent(ACTION_WIFI_ADD_NETWORKS);\r\n            intent.putExtras(bundle);\r\n            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n            // I have try startActivityForResult but is not working cause reactContext does not have hat function\r\n            // this.reactContext.startActivityForResult(intent, REQUEST_CODE);\r\n            this.reactContext.startActivity(intent);\r\n\r\n            // here is where i want to check if user save or cancel to do different actions on my react native module\r\n            promise.resolve(&quot;success&quot;);\r\n          } else {\r\n            promise.reject(&quot;Error creating&quot;, &quot;Failed to add network suggestion&quot;);\r\n          }\r\n        } catch(e) {\r\n          promise.reject(&quot;Error creating&quot;, e.message);\r\n        }\r\n}\r\n```","title":"How to get user response from a native java module on react native?","body":"<p>I am launching a native intent from Java and I need to catch if the user saves or cancel  a configuration made before inside the java code so I could send back the corresponding response to my React Native module.</p>\n<p>I am running the native intent <code>ACTION_WIFI_ADD_NETWORKS</code> but I don't know how to catch if the user press the <code>save</code> or <code>cancel</code> button in this code.</p>\n<p>my module code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyConnection extends ReactContextBaseJavaModule {\n    private Context reactContext;\n\n    public MYConnection(ReactApplicationContext reactContext) {\n            super(reactContext);\n        this.reactContext = reactContext;\n        reactContext.startActivityForResult(intent, REQUEST_CODE);\n        this.connectivityManager = (ConnectivityManager)reactContext.getSystemService(reactContext.CONNECTIVITY_SERVICE);\n    }\n\n    @Override\n    public String getName() {\n        return &quot;AndroidConnection&quot;;\n    }\n\n    @ReactMethod\n    public void connect(String ssid,String userName, String passWord, boolean isHidden, Promise promise) {\n        try\n        {\n          // I Config a Wifi network to save the this code\n          \n          int status = wifiManager.addNetworkSuggestions(suggestionsList);\n          if (status == WifiManager.STATUS_NETWORK_SUGGESTIONS_SUCCESS) {\n            Bundle bundle = new Bundle();\n            bundle.putParcelableArrayList(EXTRA_WIFI_NETWORK_LIST,(ArrayList&lt;? extends\n              Parcelable&gt;) suggestionsList);\n            final Intent intent = new Intent(ACTION_WIFI_ADD_NETWORKS);\n            intent.putExtras(bundle);\n            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n            // I have try startActivityForResult but is not working cause reactContext does not have hat function\n            // this.reactContext.startActivityForResult(intent, REQUEST_CODE);\n            this.reactContext.startActivity(intent);\n\n            // here is where i want to check if user save or cancel to do different actions on my react native module\n            promise.resolve(&quot;success&quot;);\n          } else {\n            promise.reject(&quot;Error creating&quot;, &quot;Failed to add network suggestion&quot;);\n          }\n        } catch(e) {\n          promise.reject(&quot;Error creating&quot;, e.message);\n        }\n}\n</code></pre>\n"},{"tags":["java","spring","maven","querydsl"],"answers":[{"tags":[],"owner":{"account_id":7602721,"reputation":410,"user_id":5766691,"display_name":"Zaphod Beeblebrox"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695233539,"creation_date":1695233539,"answer_id":77145033,"question_id":74945512,"body_markdown":"Maybe my reply comes a bit late, but your post is still unanswered, so hopefully we may help someone else.\r\n\r\nWhile researching exactly the same problem I found the solution here: https://github.com/querydsl/querydsl/issues/3422\r\n\r\n=&gt; delete the apt-maven-plugin from your pom.xml","title":"Querydsl Spring 3 compilation problems","body":"<p>Maybe my reply comes a bit late, but your post is still unanswered, so hopefully we may help someone else.</p>\n<p>While researching exactly the same problem I found the solution here: <a href=\"https://github.com/querydsl/querydsl/issues/3422\" rel=\"nofollow noreferrer\">https://github.com/querydsl/querydsl/issues/3422</a></p>\n<p>=&gt; delete the apt-maven-plugin from your pom.xml</p>\n"}],"owner":{"account_id":27377714,"reputation":41,"user_id":20882776,"display_name":"pwaw"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":379,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":1,"score":3,"last_activity_date":1695233539,"creation_date":1672266105,"question_id":74945512,"body_markdown":"When I am trying to build my project I get &quot;Compilation failure\r\n[ERROR] Attempt to recreate a file for type NoteApp.Repository.Entities.QNote\r\n&quot; error. My code is generating Qclass as expected, but I can&#39;t make it work past it. \r\n\r\nMy pom file \r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n   xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n   &lt;parent&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n      &lt;version&gt;3.0.1&lt;/version&gt;\r\n      &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n   &lt;/parent&gt;\r\n\r\n   &lt;groupId&gt;pl.wawrzyniak&lt;/groupId&gt;\r\n   &lt;artifactId&gt;NoteApp&lt;/artifactId&gt;\r\n   &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n   &lt;name&gt;NoteApp&lt;/name&gt;\r\n   &lt;description&gt;Simple note app for CV&lt;/description&gt;\r\n   &lt;properties&gt;\r\n      &lt;java.version&gt;17&lt;/java.version&gt;\r\n   &lt;/properties&gt;\r\n   &lt;dependencies&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n         &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n         &lt;scope&gt;runtime&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;com.querydsl&lt;/groupId&gt;\r\n         &lt;artifactId&gt;querydsl-apt&lt;/artifactId&gt;\r\n         &lt;version&gt;5.0.0&lt;/version&gt;\r\n         &lt;scope&gt;provided&lt;/scope&gt;\r\n         &lt;classifier&gt;jakarta&lt;/classifier&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;com.querydsl&lt;/groupId&gt;\r\n         &lt;artifactId&gt;querydsl-jpa&lt;/artifactId&gt;\r\n         &lt;version&gt;5.0.0&lt;/version&gt;\r\n         &lt;classifier&gt;jakarta&lt;/classifier&gt;\r\n      &lt;/dependency&gt;\r\n\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\r\n         &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\r\n         &lt;version&gt;3.1.1&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n         &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n         &lt;optional&gt;true&lt;/optional&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n         &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n   &lt;/dependencies&gt;\r\n\r\n   &lt;build&gt;\r\n      &lt;plugins&gt;\r\n         &lt;plugin&gt;\r\n            &lt;groupId&gt;com.mysema.maven&lt;/groupId&gt;\r\n            &lt;artifactId&gt;apt-maven-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;1.1.3&lt;/version&gt;\r\n            &lt;executions&gt;\r\n               &lt;execution&gt;\r\n                  &lt;goals&gt;\r\n                     &lt;goal&gt;process&lt;/goal&gt;\r\n                  &lt;/goals&gt;\r\n                  &lt;configuration&gt;\r\n                     &lt;outputDirectory&gt;target/generated-sources/java&lt;/outputDirectory&gt;\r\n                     &lt;processor&gt;com.querydsl.apt.jpa.JPAAnnotationProcessor&lt;/processor&gt;\r\n                  &lt;/configuration&gt;\r\n               &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n         &lt;/plugin&gt;\r\n\r\n         &lt;plugin&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;configuration&gt;\r\n               &lt;excludes&gt;\r\n                  &lt;exclude&gt;\r\n                     &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                     &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                  &lt;/exclude&gt;\r\n               &lt;/excludes&gt;\r\n            &lt;/configuration&gt;\r\n         &lt;/plugin&gt;\r\n\r\n      &lt;/plugins&gt;\r\n   &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n\r\nIs it something with my code? Or just problems with Spring 3 working with Querydsl?\r\n\r\nI don&#39;t know what else i can try, sometimes my project is building and compiling till the end, but only when QClasses are not generated at all (which is to expect when there is some problem with recreating them).","title":"Querydsl Spring 3 compilation problems","body":"<p>When I am trying to build my project I get &quot;Compilation failure\n[ERROR] Attempt to recreate a file for type NoteApp.Repository.Entities.QNote\n&quot; error. My code is generating Qclass as expected, but I can't make it work past it.</p>\n<p>My pom file</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n   xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n   &lt;parent&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n      &lt;version&gt;3.0.1&lt;/version&gt;\n      &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n   &lt;/parent&gt;\n\n   &lt;groupId&gt;pl.wawrzyniak&lt;/groupId&gt;\n   &lt;artifactId&gt;NoteApp&lt;/artifactId&gt;\n   &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n   &lt;name&gt;NoteApp&lt;/name&gt;\n   &lt;description&gt;Simple note app for CV&lt;/description&gt;\n   &lt;properties&gt;\n      &lt;java.version&gt;17&lt;/java.version&gt;\n   &lt;/properties&gt;\n   &lt;dependencies&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n      &lt;/dependency&gt;\n\n      &lt;dependency&gt;\n         &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n         &lt;artifactId&gt;h2&lt;/artifactId&gt;\n         &lt;scope&gt;runtime&lt;/scope&gt;\n      &lt;/dependency&gt;\n\n      &lt;dependency&gt;\n         &lt;groupId&gt;com.querydsl&lt;/groupId&gt;\n         &lt;artifactId&gt;querydsl-apt&lt;/artifactId&gt;\n         &lt;version&gt;5.0.0&lt;/version&gt;\n         &lt;scope&gt;provided&lt;/scope&gt;\n         &lt;classifier&gt;jakarta&lt;/classifier&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;com.querydsl&lt;/groupId&gt;\n         &lt;artifactId&gt;querydsl-jpa&lt;/artifactId&gt;\n         &lt;version&gt;5.0.0&lt;/version&gt;\n         &lt;classifier&gt;jakarta&lt;/classifier&gt;\n      &lt;/dependency&gt;\n\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\n         &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\n         &lt;version&gt;3.1.1&lt;/version&gt;\n      &lt;/dependency&gt;\n\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n         &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n         &lt;optional&gt;true&lt;/optional&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n         &lt;scope&gt;test&lt;/scope&gt;\n      &lt;/dependency&gt;\n   &lt;/dependencies&gt;\n\n   &lt;build&gt;\n      &lt;plugins&gt;\n         &lt;plugin&gt;\n            &lt;groupId&gt;com.mysema.maven&lt;/groupId&gt;\n            &lt;artifactId&gt;apt-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.1.3&lt;/version&gt;\n            &lt;executions&gt;\n               &lt;execution&gt;\n                  &lt;goals&gt;\n                     &lt;goal&gt;process&lt;/goal&gt;\n                  &lt;/goals&gt;\n                  &lt;configuration&gt;\n                     &lt;outputDirectory&gt;target/generated-sources/java&lt;/outputDirectory&gt;\n                     &lt;processor&gt;com.querydsl.apt.jpa.JPAAnnotationProcessor&lt;/processor&gt;\n                  &lt;/configuration&gt;\n               &lt;/execution&gt;\n            &lt;/executions&gt;\n         &lt;/plugin&gt;\n\n         &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n               &lt;excludes&gt;\n                  &lt;exclude&gt;\n                     &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                     &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                  &lt;/exclude&gt;\n               &lt;/excludes&gt;\n            &lt;/configuration&gt;\n         &lt;/plugin&gt;\n\n      &lt;/plugins&gt;\n   &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>Is it something with my code? Or just problems with Spring 3 working with Querydsl?</p>\n<p>I don't know what else i can try, sometimes my project is building and compiling till the end, but only when QClasses are not generated at all (which is to expect when there is some problem with recreating them).</p>\n"},{"tags":["java","arrays","arraylist","stack"],"comments":[{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1350546870,"post_id":12949690,"comment_id":17553902,"body_markdown":"Do you mean like `remove` and `add`?","body":"Do you mean like <code>remove</code> and <code>add</code>?"},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1350546960,"post_id":12949690,"comment_id":17553932,"body_markdown":"What are you using your `arraylist stack queue whatever` for as adding to the start of an array is best avoided and it sounds like you should be using a different collection.","body":"What are you using your <code>arraylist stack queue whatever</code> for as adding to the start of an array is best avoided and it sounds like you should be using a different collection."},{"owner":{"account_id":1054452,"reputation":882,"user_id":1057474,"accept_rate":90,"display_name":"Yegoshin Maxim"},"score":0,"creation_date":1350547498,"post_id":12949690,"comment_id":17554171,"body_markdown":"First, you should make something yourself.\nWhat have you done so far?","body":"First, you should make something yourself. What have you done so far?"}],"answers":[{"tags":[],"owner":{"account_id":1558798,"reputation":36540,"user_id":1449199,"accept_rate":95,"display_name":"Baz"},"down_vote_count":2,"up_vote_count":421,"is_accepted":true,"score":419,"last_activity_date":1476431548,"creation_date":1350546868,"answer_id":12949719,"question_id":12949690,"body_markdown":"`List` has the method [`add(int, E)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html), so you can use:\r\n\r\n    list.add(0, yourObject);\r\n\r\nAfterwards you can delete the last element with:\r\n\r\n    if(list.size() &gt; 10)\r\n        list.remove(list.size() - 1);\r\n\r\nHowever, you might want to rethink your requirements or use a different data structure, like a [`Queue`](http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html)\r\n\r\n**EDIT**\r\n\r\nMaybe have a look at Apache&#39;s [`CircularFifoQueue`](https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/queue/CircularFifoQueue.html):\r\n\r\n&gt;`CircularFifoQueue` is a first-in first-out queue with a fixed size that replaces its oldest element if full. \r\n\r\nJust initialize it with you maximum size:\r\n\r\n    CircularFifoQueue queue = new CircularFifoQueue(10);\r\n","title":"Java ArrayList how to add elements at the beginning","body":"<p><code>List</code> has the method <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/List.html\"><code>add(int, E)</code></a>, so you can use:</p>\n\n<pre><code>list.add(0, yourObject);\n</code></pre>\n\n<p>Afterwards you can delete the last element with:</p>\n\n<pre><code>if(list.size() &gt; 10)\n    list.remove(list.size() - 1);\n</code></pre>\n\n<p>However, you might want to rethink your requirements or use a different data structure, like a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html\"><code>Queue</code></a></p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Maybe have a look at Apache's <a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/queue/CircularFifoQueue.html\"><code>CircularFifoQueue</code></a>:</p>\n\n<blockquote>\n  <p><code>CircularFifoQueue</code> is a first-in first-out queue with a fixed size that replaces its oldest element if full. </p>\n</blockquote>\n\n<p>Just initialize it with you maximum size:</p>\n\n<pre><code>CircularFifoQueue queue = new CircularFifoQueue(10);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":88112,"reputation":51921,"user_id":243943,"accept_rate":89,"display_name":"npinti"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1350547038,"creation_date":1350547038,"answer_id":12949766,"question_id":12949690,"body_markdown":"You can take a look at the [add(int index, E element)][1]:\r\n\r\n&gt; Inserts the specified element at the specified position in this list.\r\n&gt; Shifts the element currently at that position (if any) and any\r\n&gt; subsequent elements to the right (adds one to their indices).\r\n\r\n\r\nOnce you add you can then check the size of the ArrayList and remove the ones at the end.\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#add%28int,%20E%29","title":"Java ArrayList how to add elements at the beginning","body":"<p>You can take a look at the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#add%28int,%20E%29\" rel=\"noreferrer\">add(int index, E element)</a>:</p>\n\n<blockquote>\n  <p>Inserts the specified element at the specified position in this list.\n  Shifts the element currently at that position (if any) and any\n  subsequent elements to the right (adds one to their indices).</p>\n</blockquote>\n\n<p>Once you add you can then check the size of the ArrayList and remove the ones at the end.</p>\n"},{"tags":[],"owner":{"account_id":1853886,"reputation":210597,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1350548299,"creation_date":1350547238,"answer_id":12949816,"question_id":12949690,"body_markdown":"What you are describing, is an appropriate situation to use [`Queue`](http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html).\r\n\r\nSince you want to `add` new element, and `remove` the old one. You can add at the end, and remove from the beginning. That will not make much of a difference.\r\n\r\nQueue has methods `add(e)` and `remove()` which adds at the end the new element, and removes from the beginning the old element, respectively.\r\n\r\n    Queue&lt;Integer&gt; queue = new LinkedList&lt;Integer&gt;();\r\n    queue.add(5);\r\n    queue.add(6);\r\n    queue.remove();  // Remove 5\r\n\r\nSo, every time you add an element to the `queue` you can back it up with a `remove` method call.\r\n\r\n\r\n----------\r\n\r\n**UPDATE**: -\r\n\r\nAnd if you want **to fix the size of the `Queue`**, then you can take a look at: - [`ApacheCommons#CircularFifoBuffer`](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/buffer/CircularFifoBuffer.html)\r\n\r\nFrom the [`documentation`](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/buffer/CircularFifoBuffer.html): -\r\n\r\n&gt; CircularFifoBuffer is a first in first out buffer with a fixed size\r\n&gt; that replaces its oldest element if full.\r\n\r\n\r\n    Buffer queue = new CircularFifoBuffer(2); // Max size\r\n    \r\n    queue.add(5);\r\n    queue.add(6);\r\n    queue.add(7);  // Automatically removes the first element `5`\r\n\r\nAs you can see, when the maximum size is reached, then adding new element automatically removes the first element inserted.\r\n","title":"Java ArrayList how to add elements at the beginning","body":"<p>What you are describing, is an appropriate situation to use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html\" rel=\"nofollow\"><code>Queue</code></a>.</p>\n\n<p>Since you want to <code>add</code> new element, and <code>remove</code> the old one. You can add at the end, and remove from the beginning. That will not make much of a difference.</p>\n\n<p>Queue has methods <code>add(e)</code> and <code>remove()</code> which adds at the end the new element, and removes from the beginning the old element, respectively.</p>\n\n<pre><code>Queue&lt;Integer&gt; queue = new LinkedList&lt;Integer&gt;();\nqueue.add(5);\nqueue.add(6);\nqueue.remove();  // Remove 5\n</code></pre>\n\n<p>So, every time you add an element to the <code>queue</code> you can back it up with a <code>remove</code> method call.</p>\n\n<hr>\n\n<p><strong>UPDATE</strong>: -</p>\n\n<p>And if you want <strong>to fix the size of the <code>Queue</code></strong>, then you can take a look at: - <a href=\"http://commons.apache.org/collections/apidocs/org/apache/commons/collections/buffer/CircularFifoBuffer.html\" rel=\"nofollow\"><code>ApacheCommons#CircularFifoBuffer</code></a></p>\n\n<p>From the <a href=\"http://commons.apache.org/collections/apidocs/org/apache/commons/collections/buffer/CircularFifoBuffer.html\" rel=\"nofollow\"><code>documentation</code></a>: -</p>\n\n<blockquote>\n  <p>CircularFifoBuffer is a first in first out buffer with a fixed size\n  that replaces its oldest element if full.</p>\n</blockquote>\n\n<pre><code>Buffer queue = new CircularFifoBuffer(2); // Max size\n\nqueue.add(5);\nqueue.add(6);\nqueue.add(7);  // Automatically removes the first element `5`\n</code></pre>\n\n<p>As you can see, when the maximum size is reached, then adding new element automatically removes the first element inserted.</p>\n"},{"tags":[],"owner":{"account_id":1476987,"reputation":17785,"user_id":1387157,"accept_rate":94,"display_name":"MaVRoSCy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1350547260,"creation_date":1350547260,"answer_id":12949821,"question_id":12949690,"body_markdown":"you can use this code\r\n\r\n    private List myList = new ArrayList();\r\n    private void addItemToList(Object obj){\r\n        if(myList.size()&lt;10){\r\n          myList.add(0,obj);\r\n        }else{\r\n          myList.add(0,obj);\r\n          myList.remove(10);\r\n        }\r\n    }\r\n\r\n","title":"Java ArrayList how to add elements at the beginning","body":"<p>you can use this code</p>\n\n<pre><code>private List myList = new ArrayList();\nprivate void addItemToList(Object obj){\n    if(myList.size()&lt;10){\n      myList.add(0,obj);\n    }else{\n      myList.add(0,obj);\n      myList.remove(10);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":910157,"reputation":4964,"user_id":944190,"accept_rate":54,"display_name":"a Learner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1350548138,"creation_date":1350547825,"answer_id":12949970,"question_id":12949690,"body_markdown":"You can use\r\n\r\n    public List&lt;E&gt; addToListStart(List&lt;E&gt; list, E obj){\r\n    list.add(0,obj);\r\n    return (List&lt;E&gt;)list;\r\n    \r\n    }\r\nChange E with your datatype\r\n\r\nIf  deleting the oldest element is necessary then you can add:\r\n\r\n    list.remove(list.size()-1); \r\n\r\nbefore return statement. Otherwise list will add your object at beginning and also retain oldest element.\r\n\r\n\r\nThis will delete last element in list.","title":"Java ArrayList how to add elements at the beginning","body":"<p>You can use</p>\n\n<pre><code>public List&lt;E&gt; addToListStart(List&lt;E&gt; list, E obj){\nlist.add(0,obj);\nreturn (List&lt;E&gt;)list;\n\n}\n</code></pre>\n\n<p>Change E with your datatype</p>\n\n<p>If  deleting the oldest element is necessary then you can add:</p>\n\n<pre><code>list.remove(list.size()-1); \n</code></pre>\n\n<p>before return statement. Otherwise list will add your object at beginning and also retain oldest element.</p>\n\n<p>This will delete last element in list.</p>\n"},{"tags":[],"owner":{"account_id":1213813,"reputation":344,"user_id":1181814,"accept_rate":89,"display_name":"feikiss"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1378893934,"creation_date":1350548594,"answer_id":12950161,"question_id":12949690,"body_markdown":"I think the implement should be easy, but considering about the efficiency, you should use LinkedList but not ArrayList as the container. You can refer to the following code:\r\n\r\n    import java.util.LinkedList;\r\n    import java.util.List;\r\n    \r\n    public class DataContainer {\r\n    \r\n        private List&lt;Integer&gt; list;\r\n        \r\n        int length = 10;\r\n        public void addDataToArrayList(int data){\r\n            list.add(0, data);\r\n            if(list.size()&gt;10){\r\n                list.remove(length);\r\n            }\r\n        }\r\n        \r\n        public static void main(String[] args) {\r\n            DataContainer comp = new DataContainer();\r\n            comp.list = new LinkedList&lt;Integer&gt;();\r\n            \r\n            int cycleCount = 100000000;\r\n            \r\n            for(int i = 0; i &lt; cycleCount; i ++){\r\n                comp.addDataToArrayList(i);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n","title":"Java ArrayList how to add elements at the beginning","body":"<p>I think the implement should be easy, but considering about the efficiency, you should use LinkedList but not ArrayList as the container. You can refer to the following code:</p>\n\n<pre><code>import java.util.LinkedList;\nimport java.util.List;\n\npublic class DataContainer {\n\n    private List&lt;Integer&gt; list;\n\n    int length = 10;\n    public void addDataToArrayList(int data){\n        list.add(0, data);\n        if(list.size()&gt;10){\n            list.remove(length);\n        }\n    }\n\n    public static void main(String[] args) {\n        DataContainer comp = new DataContainer();\n        comp.list = new LinkedList&lt;Integer&gt;();\n\n        int cycleCount = 100000000;\n\n        for(int i = 0; i &lt; cycleCount; i ++){\n            comp.addDataToArrayList(i);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":405484,"reputation":34324,"user_id":774398,"accept_rate":83,"display_name":"Patrick"},"down_vote_count":1,"up_vote_count":40,"is_accepted":false,"score":39,"last_activity_date":1512316027,"creation_date":1424442169,"answer_id":28631202,"question_id":12949690,"body_markdown":"## Using Specific Datastructures\r\n\r\nThere are various data structures which are optimized for adding elements at the first index. Mind though, that if you convert your collection to one of these, the conversation will probably need a time and space complexity of `O(n)` \r\n\r\n### Deque\r\n\r\nThe JDK includes the [`Deque`][1] structure which offers methods like [`addFirst(e)`][2] and [`offerFirst(e)`][3]\r\n\r\n    Deque&lt;String&gt; deque = new LinkedList&lt;&gt;();\r\n    deque.add(&quot;two&quot;);\r\n    deque.add(&quot;one&quot;);\r\n    deque.addFirst(&quot;three&quot;);\r\n    //prints &quot;three&quot;, &quot;two&quot;, &quot;one&quot;\r\n\r\n### Analysis\r\n\r\nSpace and time complexity of insertion is with `LinkedList` constant (`O(1)`). See the [Big-O cheatsheet][4].\r\n\r\n## Reversing the List\r\n\r\nA very easy but inefficient method is to use reverse:\r\n\r\n     Collections.reverse(list);\r\n     list.add(elementForTop);\r\n     Collections.reverse(list);\r\n\r\n[If you use Java 8 streams, this answer might interest you.][5]\r\n\r\n### Analysis\r\n\r\n* Time Complexity: `O(n)`\r\n* Space Complexity: `O(1)`\r\n\r\nLooking at the [JDK implementation][6] this has a `O(n)` time complexity so only suitable for very small lists.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/Deque.html\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/util/Deque.html#addFirst(E)\r\n  [3]: http://offerFirst(e)\r\n  [4]: http://bigocheatsheet.com/\r\n  [5]: https://stackoverflow.com/a/24011264/774398\r\n  [6]: http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Collections.java#Collections.reverse%28java.util.List%29","title":"Java ArrayList how to add elements at the beginning","body":"<h2>Using Specific Datastructures</h2>\n\n<p>There are various data structures which are optimized for adding elements at the first index. Mind though, that if you convert your collection to one of these, the conversation will probably need a time and space complexity of <code>O(n)</code> </p>\n\n<h3>Deque</h3>\n\n<p>The JDK includes the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Deque.html\" rel=\"noreferrer\"><code>Deque</code></a> structure which offers methods like <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Deque.html#addFirst(E)\" rel=\"noreferrer\"><code>addFirst(e)</code></a> and <a href=\"http://offerFirst(e)\" rel=\"noreferrer\"><code>offerFirst(e)</code></a></p>\n\n<pre><code>Deque&lt;String&gt; deque = new LinkedList&lt;&gt;();\ndeque.add(\"two\");\ndeque.add(\"one\");\ndeque.addFirst(\"three\");\n//prints \"three\", \"two\", \"one\"\n</code></pre>\n\n<h3>Analysis</h3>\n\n<p>Space and time complexity of insertion is with <code>LinkedList</code> constant (<code>O(1)</code>). See the <a href=\"http://bigocheatsheet.com/\" rel=\"noreferrer\">Big-O cheatsheet</a>.</p>\n\n<h2>Reversing the List</h2>\n\n<p>A very easy but inefficient method is to use reverse:</p>\n\n<pre><code> Collections.reverse(list);\n list.add(elementForTop);\n Collections.reverse(list);\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/24011264/774398\">If you use Java 8 streams, this answer might interest you.</a></p>\n\n<h3>Analysis</h3>\n\n<ul>\n<li>Time Complexity: <code>O(n)</code></li>\n<li>Space Complexity: <code>O(1)</code></li>\n</ul>\n\n<p>Looking at the <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Collections.java#Collections.reverse%28java.util.List%29\" rel=\"noreferrer\">JDK implementation</a> this has a <code>O(n)</code> time complexity so only suitable for very small lists.</p>\n"},{"tags":[],"owner":{"account_id":3961498,"reputation":2173,"user_id":3268354,"display_name":"Mizuki"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1458318295,"creation_date":1458316912,"answer_id":36089004,"question_id":12949690,"body_markdown":"You can use list methods, remove and add\r\n\r\n    list.add(lowestIndex, element);\r\n    list.remove(highestIndex, element);","title":"Java ArrayList how to add elements at the beginning","body":"<p>You can use list methods, remove and add</p>\n\n<pre><code>list.add(lowestIndex, element);\nlist.remove(highestIndex, element);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":107117,"reputation":480,"user_id":973085,"display_name":"Evvo"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1467292247,"creation_date":1467292247,"answer_id":38124157,"question_id":12949690,"body_markdown":"You may want to look at Deque. it gives you direct access to both the first and last items in the list.","title":"Java ArrayList how to add elements at the beginning","body":"<p>You may want to look at Deque. it gives you direct access to both the first and last items in the list.</p>\n"},{"tags":[],"owner":{"account_id":1582132,"reputation":71,"user_id":1467279,"display_name":"thegman121"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1487053094,"creation_date":1487053094,"answer_id":42219171,"question_id":12949690,"body_markdown":"Java LinkedList provides both the addFirst(E e) and the push(E e) method that add an element to the front of the list.\r\n\r\nhttps://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html#addFirst(E)","title":"Java ArrayList how to add elements at the beginning","body":"<p>Java LinkedList provides both the addFirst(E e) and the push(E e) method that add an element to the front of the list.</p>\n\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html#addFirst(E)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html#addFirst(E)</a></p>\n"},{"tags":[],"owner":{"account_id":5478630,"reputation":30,"user_id":4355871,"display_name":"FabianUx"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1502300281,"creation_date":1502300281,"answer_id":45597286,"question_id":12949690,"body_markdown":"I had a similar problem, trying to add an element at the beginning of an existing array, shift the existing elements to the right and discard the oldest one (array[length-1]).\r\nMy solution might not be very performant but it works for my purposes.\r\n\r\n     Method:\r\n\r\n       updateArray (Element to insert)\r\n\r\n         - for all the elements of the Array\r\n           - start from the end and replace with the one on the left; \r\n         - Array [0] &lt;- Element\r\n\r\nGood luck","title":"Java ArrayList how to add elements at the beginning","body":"<p>I had a similar problem, trying to add an element at the beginning of an existing array, shift the existing elements to the right and discard the oldest one (array[length-1]).\nMy solution might not be very performant but it works for my purposes.</p>\n\n<pre><code> Method:\n\n   updateArray (Element to insert)\n\n     - for all the elements of the Array\n       - start from the end and replace with the one on the left; \n     - Array [0] &lt;- Element\n</code></pre>\n\n<p>Good luck</p>\n"},{"tags":[],"owner":{"account_id":7416245,"reputation":679,"user_id":5641961,"display_name":"Machhindra Neupane"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1537852938,"creation_date":1537852938,"answer_id":52491082,"question_id":12949690,"body_markdown":"    import java.util.*:\r\n    public class Logic {\r\n      List&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n      public static void main(String...args) {\r\n      Scanner input = new Scanner(System.in);\r\n        Logic obj = new Logic();\r\n          for (int i=0;i&lt;=20;i++) {\r\n            String string = input.nextLine();\r\n            obj.myLogic(string);\r\n            obj.printList();\r\n          }\r\n     }\r\n     public void myLogic(String strObj) {\r\n       if (this.list.size()&gt;=10) {\r\n          this.list.remove(this.list.size()-1);\r\n       } else {\r\n         list.add(strObj); \r\n       }\r\n     }\r\n     public void printList() {\r\n     System.out.print(this.list);\r\n     }\r\n    }","title":"Java ArrayList how to add elements at the beginning","body":"<pre><code>import java.util.*:\npublic class Logic {\n  List&lt;String&gt; list = new ArrayList&lt;String&gt;();\n  public static void main(String...args) {\n  Scanner input = new Scanner(System.in);\n    Logic obj = new Logic();\n      for (int i=0;i&lt;=20;i++) {\n        String string = input.nextLine();\n        obj.myLogic(string);\n        obj.printList();\n      }\n }\n public void myLogic(String strObj) {\n   if (this.list.size()&gt;=10) {\n      this.list.remove(this.list.size()-1);\n   } else {\n     list.add(strObj); \n   }\n }\n public void printList() {\n System.out.print(this.list);\n }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15378912,"reputation":158,"user_id":11094859,"display_name":"Ashish Mehta"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1591790716,"creation_date":1591790716,"answer_id":62303161,"question_id":12949690,"body_markdown":"Take this example :-\r\n\r\n    List&lt;String&gt; element1 = new ArrayList&lt;&gt;();\r\n    element1.add(&quot;two&quot;);\r\n    element1.add(&quot;three&quot;);\r\n    List&lt;String&gt; element2 = new ArrayList&lt;&gt;();\r\n    element2.add(&quot;one&quot;);\r\n    element2.addAll(element1);","title":"Java ArrayList how to add elements at the beginning","body":"<p>Take this example :-</p>\n\n<pre><code>List&lt;String&gt; element1 = new ArrayList&lt;&gt;();\nelement1.add(\"two\");\nelement1.add(\"three\");\nList&lt;String&gt; element2 = new ArrayList&lt;&gt;();\nelement2.add(\"one\");\nelement2.addAll(element1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17659919,"reputation":608,"user_id":12818585,"display_name":"Andrea Ciccotta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604924426,"creation_date":1604924426,"answer_id":64751552,"question_id":12949690,"body_markdown":"```\r\nimport com.google.common.collect.Lists;\r\n\r\nimport java.util.List;\r\n\r\n/**\r\n * @author Ciccotta Andrea on 06/11/2020.\r\n */\r\npublic class CollectionUtils {\r\n\r\n    /**\r\n     * It models the prepend O(1), used against the common append/add O(n)\r\n     * @param head first element of the list\r\n     * @param body rest of the elements of the list\r\n     * @return new list (with different memory-reference) made by [head, ...body]\r\n     */\r\n    public static &lt;E&gt; List&lt;Object&gt; prepend(final E head, List&lt;E&gt; final body){\r\n        return Lists.asList(head, body.toArray());\r\n    }\r\n\r\n    /**\r\n     * it models the typed version of prepend(E head, List&lt;E&gt; body)\r\n     * @param type the array into which the elements of this list are to be stored\r\n     */\r\n    public static &lt;E&gt; List&lt;E&gt; prepend(final E head, List&lt;E&gt; body, final E[] type){\r\n        return Lists.asList(head, body.toArray(type));\r\n    }\r\n}\r\n```","title":"Java ArrayList how to add elements at the beginning","body":"<pre><code>import com.google.common.collect.Lists;\n\nimport java.util.List;\n\n/**\n * @author Ciccotta Andrea on 06/11/2020.\n */\npublic class CollectionUtils {\n\n    /**\n     * It models the prepend O(1), used against the common append/add O(n)\n     * @param head first element of the list\n     * @param body rest of the elements of the list\n     * @return new list (with different memory-reference) made by [head, ...body]\n     */\n    public static &lt;E&gt; List&lt;Object&gt; prepend(final E head, List&lt;E&gt; final body){\n        return Lists.asList(head, body.toArray());\n    }\n\n    /**\n     * it models the typed version of prepend(E head, List&lt;E&gt; body)\n     * @param type the array into which the elements of this list are to be stored\n     */\n    public static &lt;E&gt; List&lt;E&gt; prepend(final E head, List&lt;E&gt; body, final E[] type){\n        return Lists.asList(head, body.toArray(type));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25153425,"reputation":41,"user_id":18998510,"display_name":"wromma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666207979,"creation_date":1651307431,"answer_id":72066879,"question_id":12949690,"body_markdown":"Bounded Circular Buffer With FIFO Discipline\r\n============================================\r\nIt seems that you need a circular buffer with limited capacity.\r\nYou prefer an array like behavior and you dislike a linked queue.\r\nAm I right?\r\nYou appear to need a capacity set to &#39;10&#39;.\r\nThis can achieved with a bounded structure.\r\nYou seem also to need a FIFO discipline.\r\n\r\nSolution with an ArrayBlockingQueue\r\n-----------------------------------\r\nFrom the docs: A [bounded blocking queue][1] backed by an array... orders elements FIFO (first-in-first-out). The head of the queue is that element that has been on the queue the longest time. The tail of the queue is that element that has been on the queue the shortest time. New elements are inserted at the tail of the queue, and the queue retrieval operations obtain elements at the head of the queue.\r\nPut, take are blocking . Offer, poll do not block.\r\n\r\nPriorityBlockingQueue\r\n---------------------\r\nYou can have a look at docs for [PriorityBlockingQueue][2]. There is an example of a class &quot;that applies first-in-first-out tie-breaking to comparable elements&quot;.  \r\n\r\n\r\nExample with an ArrayBlockingQueue\r\n-----------------------------------\r\n\r\n\tArrayBlockingQueue&lt;Integer&gt; queue = new ArrayBlockingQueue&lt;&gt;(10);\r\n\r\n\tfor (int i = 10; i &lt; 30; i++) {\r\n\t\tif (queue.remainingCapacity() &gt; 0) {\r\n\t\t\tqueue.offer(i);\r\n\t\t} else {\r\n\t\t\tqueue.poll();\r\n\t\t\tqueue.offer(i);\r\n\t\t}\r\n\t\tif (queue.size() &gt; 9) {\r\n\t\t\tSystem.out.println(queue);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ArrayBlockingQueue.html\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/PriorityBlockingQueue.html","title":"Java ArrayList how to add elements at the beginning","body":"<h1>Bounded Circular Buffer With FIFO Discipline</h1>\n<p>It seems that you need a circular buffer with limited capacity.\nYou prefer an array like behavior and you dislike a linked queue.\nAm I right?\nYou appear to need a capacity set to '10'.\nThis can achieved with a bounded structure.\nYou seem also to need a FIFO discipline.</p>\n<h2>Solution with an ArrayBlockingQueue</h2>\n<p>From the docs: A <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ArrayBlockingQueue.html\" rel=\"nofollow noreferrer\">bounded blocking queue</a> backed by an array... orders elements FIFO (first-in-first-out). The head of the queue is that element that has been on the queue the longest time. The tail of the queue is that element that has been on the queue the shortest time. New elements are inserted at the tail of the queue, and the queue retrieval operations obtain elements at the head of the queue.\nPut, take are blocking . Offer, poll do not block.</p>\n<h2>PriorityBlockingQueue</h2>\n<p>You can have a look at docs for <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/PriorityBlockingQueue.html\" rel=\"nofollow noreferrer\">PriorityBlockingQueue</a>. There is an example of a class &quot;that applies first-in-first-out tie-breaking to comparable elements&quot;.</p>\n<h2>Example with an ArrayBlockingQueue</h2>\n<pre><code>ArrayBlockingQueue&lt;Integer&gt; queue = new ArrayBlockingQueue&lt;&gt;(10);\n\nfor (int i = 10; i &lt; 30; i++) {\n    if (queue.remainingCapacity() &gt; 0) {\n        queue.offer(i);\n    } else {\n        queue.poll();\n        queue.offer(i);\n    }\n    if (queue.size() &gt; 9) {\n        System.out.println(queue);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3155790,"reputation":14985,"user_id":2668232,"accept_rate":100,"display_name":"Oleksandr Pyrohov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695233471,"creation_date":1693781895,"answer_id":77034417,"question_id":12949690,"body_markdown":"Starting from Java 21, `List` extends [`SequencedCollection`][1] interface, which has the following methods:\r\n```\r\ninterface SequencedCollection&lt;E&gt; extends Collection&lt;E&gt; {\r\n  SequencedCollection&lt;E&gt; reversed();\r\n  void addFirst(E);\r\n  void addLast(E);\r\n  E getFirst();\r\n  E getLast();\r\n  E removeFirst();\r\n  E removeLast();\r\n}\r\n\r\n```\r\nAdditional details in [JEP 431: Sequenced Collections][2].\r\n\r\nSo, working with the first/last element becomes simpler:\r\n```\r\nlist.addFirst(new Object());\r\n\r\n...\r\n\r\nif (list.size() &gt; 10) {\r\n  list.removeLast();\r\n}\r\n```\r\n**Notes:**\r\n- Keep in mind that while the time complexity of removing the last element from `ArrayList` is O(1), adding an element to beginning of `ArrayList` is O(n), as it would require shifting all the existing elements by one position. So, might be worth checking [`ArrayDeque`][3] as suggested by others.\r\n- `List.removeLast` throws `NoSuchElementException` if the list is empty.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html\r\n  [2]: https://openjdk.org/jeps/431\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/util/ArrayDeque.html","title":"Java ArrayList how to add elements at the beginning","body":"<p>Starting from Java 21, <code>List</code> extends <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html\" rel=\"nofollow noreferrer\"><code>SequencedCollection</code></a> interface, which has the following methods:</p>\n<pre><code>interface SequencedCollection&lt;E&gt; extends Collection&lt;E&gt; {\n  SequencedCollection&lt;E&gt; reversed();\n  void addFirst(E);\n  void addLast(E);\n  E getFirst();\n  E getLast();\n  E removeFirst();\n  E removeLast();\n}\n\n</code></pre>\n<p>Additional details in <a href=\"https://openjdk.org/jeps/431\" rel=\"nofollow noreferrer\">JEP 431: Sequenced Collections</a>.</p>\n<p>So, working with the first/last element becomes simpler:</p>\n<pre><code>list.addFirst(new Object());\n\n...\n\nif (list.size() &gt; 10) {\n  list.removeLast();\n}\n</code></pre>\n<p><strong>Notes:</strong></p>\n<ul>\n<li>Keep in mind that while the time complexity of removing the last element from <code>ArrayList</code> is O(1), adding an element to beginning of <code>ArrayList</code> is O(n), as it would require shifting all the existing elements by one position. So, might be worth checking <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/ArrayDeque.html\" rel=\"nofollow noreferrer\"><code>ArrayDeque</code></a> as suggested by others.</li>\n<li><code>List.removeLast</code> throws <code>NoSuchElementException</code> if the list is empty.</li>\n</ul>\n"}],"owner":{"account_id":1940712,"reputation":5132,"user_id":1746975,"accept_rate":42,"display_name":"ZeDonDino"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":470807,"favorite_count":0,"down_vote_count":5,"up_vote_count":269,"accepted_answer_id":12949719,"answer_count":16,"score":264,"last_activity_date":1695233471,"creation_date":1350546763,"question_id":12949690,"body_markdown":"I need to add elements to an `ArrayList` queue whatever, but when I call the function to add an element, I want it to add the element at the beginning of the array (so it has the lowest index) and if the array has 10 elements adding a new results in deleting the oldest element (the one with the highest index).\r\n\r\nDoes anyone have any suggestions?\r\n","title":"Java ArrayList how to add elements at the beginning","body":"<p>I need to add elements to an <code>ArrayList</code> queue whatever, but when I call the function to add an element, I want it to add the element at the beginning of the array (so it has the lowest index) and if the array has 10 elements adding a new results in deleting the oldest element (the one with the highest index).</p>\n\n<p>Does anyone have any suggestions?</p>\n"},{"tags":["java","data-structures","collections","guava"],"comments":[{"owner":{"account_id":1126136,"reputation":17393,"user_id":1113392,"display_name":"A4L"},"score":0,"creation_date":1396458578,"post_id":22818319,"comment_id":34800790,"body_markdown":"Did you take at look a [LinkedHashSet](http://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashSet.html) ?","body":"Did you take at look a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashSet.html\" rel=\"nofollow noreferrer\">LinkedHashSet</a> ?"},{"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"score":0,"creation_date":1396458622,"post_id":22818319,"comment_id":34800814,"body_markdown":"extend LinkedHashSet and maintain reverse order","body":"extend LinkedHashSet and maintain reverse order"},{"owner":{"account_id":3244487,"reputation":19947,"user_id":2736496,"accept_rate":74,"display_name":"aliteralmind"},"score":0,"creation_date":1396458627,"post_id":22818319,"comment_id":34800817,"body_markdown":"What collection should I use flow chart, by @TimB: http://stackoverflow.com/questions/21974361/what-java-collection-should-i-use","body":"What collection should I use flow chart, by @TimB: <a href=\"http://stackoverflow.com/questions/21974361/what-java-collection-should-i-use\" title=\"what java collection should i use\">stackoverflow.com/questions/21974361/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1398557,"reputation":9636,"user_id":1327788,"accept_rate":84,"display_name":"Giovanni Botta"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1396461702,"creation_date":1396458617,"answer_id":22818399,"question_id":22818319,"body_markdown":"How about using a [LinkedHashSet](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html) and whenever you detect that the item is in there you remove it and reinsert it? That&#39;s the only way to guarantee the insertion order is what you expect (or the inverse thereof).\r\n\r\nYou can [`iterate over the LinkedHashSet`](https://stackoverflow.com/questions/10741902/java-linkedhashset-backwards-iteration) by creating a `LinkedList` over the `LinkedHashSet` and reversing over it in any way you like, e.g. by using Guava&#39;s [`Lists.reverse`](https://code.google.com/p/guava-libraries/wiki/CollectionUtilitiesExplained#Lists) method.","title":"Collection that prevents duplicates but preserves reversible duplicate insertion order?","body":"<p>How about using a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html\" rel=\"nofollow noreferrer\">LinkedHashSet</a> and whenever you detect that the item is in there you remove it and reinsert it? That's the only way to guarantee the insertion order is what you expect (or the inverse thereof).</p>\n\n<p>You can <a href=\"https://stackoverflow.com/questions/10741902/java-linkedhashset-backwards-iteration\"><code>iterate over the LinkedHashSet</code></a> by creating a <code>LinkedList</code> over the <code>LinkedHashSet</code> and reversing over it in any way you like, e.g. by using Guava's <a href=\"https://code.google.com/p/guava-libraries/wiki/CollectionUtilitiesExplained#Lists\" rel=\"nofollow noreferrer\"><code>Lists.reverse</code></a> method.</p>\n"},{"tags":[],"owner":{"account_id":2519746,"reputation":8347,"user_id":2190336,"display_name":"Prabhaker A"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1396458944,"creation_date":1396458944,"answer_id":22818503,"question_id":22818319,"body_markdown":"Try [ListOrderedSet](http://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/set/ListOrderedSet.html) class of `org.apache.commons.collections4.set`.  \r\n\r\nFor example:\r\n\r\n    listOrderedSet.add(1,1);\r\n    listOrderedSet.add(1,2);\r\n    listOrderedSet.add(1,3);\r\n    listOrderedSet.add(1,1);  \r\nThis will give you the expected out put.\r\n","title":"Collection that prevents duplicates but preserves reversible duplicate insertion order?","body":"<p>Try <a href=\"http://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/set/ListOrderedSet.html\" rel=\"nofollow\">ListOrderedSet</a> class of <code>org.apache.commons.collections4.set</code>.  </p>\n\n<p>For example:</p>\n\n<pre><code>listOrderedSet.add(1,1);\nlistOrderedSet.add(1,2);\nlistOrderedSet.add(1,3);\nlistOrderedSet.add(1,1);  \n</code></pre>\n\n<p>This will give you the expected out put.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695233311,"creation_date":1668573890,"answer_id":74455291,"question_id":22818319,"body_markdown":"As of Java 21, the [`addFirst(E e)`](https://download.java.net/java/early_access/jdk21/docs/api/java.base/java/util/LinkedHashSet.html#addFirst(E)) method can be used to add an element to the front of a `LinkedHashSet`, relocating it if it already exists in the set.  Using this results in exactly the requested behavior.\r\n\r\n```lang-java\r\nSequencedSet&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;();\r\nset.addFirst(1);\r\nset.addFirst(2);\r\nset.addFirst(3);\r\nset.addFirst(1);\r\n\r\n// 1 then 3 then 2\r\nfor (Integer i : set) {\r\n  System.out.println(i);\r\n}\r\n```\r\n\r\n---\r\n\r\nNote: Java 21 also has the [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#reversed()) method on `LinkedHashSet`.  However, the [`add(E e)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/HashSet.html#add(E)) method [doesn&#39;t change the order of existing elements](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html), so it won&#39;t quite work to solve the problem as described. \r\n\r\n&gt; Note that encounter order is _not_ affected if an element is _re-inserted_ into the set with the add method.\r\n\r\n```lang-java\r\nSequencedSet&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;().reversed();\r\nset.add(1);\r\nset.add(2);\r\nset.add(3);\r\nset.add(1);\r\n\r\n// 3 then 2 then 1\r\nfor (Integer i : set) {\r\n  System.out.println(i);\r\n}\r\n```","title":"Collection that prevents duplicates but preserves reversible duplicate insertion order?","body":"<p>As of Java 21, the <a href=\"https://download.java.net/java/early_access/jdk21/docs/api/java.base/java/util/LinkedHashSet.html#addFirst(E)\" rel=\"nofollow noreferrer\"><code>addFirst(E e)</code></a> method can be used to add an element to the front of a <code>LinkedHashSet</code>, relocating it if it already exists in the set.  Using this results in exactly the requested behavior.</p>\n<pre class=\"lang-java prettyprint-override\"><code>SequencedSet&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;();\nset.addFirst(1);\nset.addFirst(2);\nset.addFirst(3);\nset.addFirst(1);\n\n// 1 then 3 then 2\nfor (Integer i : set) {\n  System.out.println(i);\n}\n</code></pre>\n<hr />\n<p>Note: Java 21 also has the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method on <code>LinkedHashSet</code>.  However, the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/HashSet.html#add(E)\" rel=\"nofollow noreferrer\"><code>add(E e)</code></a> method <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html\" rel=\"nofollow noreferrer\">doesn't change the order of existing elements</a>, so it won't quite work to solve the problem as described.</p>\n<blockquote>\n<p>Note that encounter order is <em>not</em> affected if an element is <em>re-inserted</em> into the set with the add method.</p>\n</blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>SequencedSet&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;().reversed();\nset.add(1);\nset.add(2);\nset.add(3);\nset.add(1);\n\n// 3 then 2 then 1\nfor (Integer i : set) {\n  System.out.println(i);\n}\n</code></pre>\n"}],"owner":{"account_id":5864,"reputation":31258,"user_id":9636,"accept_rate":81,"display_name":"Heath Borders"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":304,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":22818503,"answer_count":3,"score":2,"last_activity_date":1695233311,"creation_date":1396458393,"question_id":22818319,"body_markdown":"Is there a collection that preserves reversible duplicate insertion order?\r\n\r\nSpecifically, if I insert the following items:\r\n\r\n    1\r\n    2\r\n    3\r\n    1\r\n\r\nI want to be able to iterate over them and receive them in the following order:\r\n\r\n    1\r\n    3\r\n    2\r\n\r\nThat is, I want them in descending insertion order with duplicate insertions causing a reorder. [Guava&#39;s LinkedListMultimap][1] is the closest I&#39;ve found, but it doesn&#39;t support descending traversal.\r\n\r\n[Java&#39;s LinkedHashSet][2] doesn&#39;t work because it doesn&#39;t allow descending traversal.\r\n\r\nI could also use an LRU cache, but most LRU libraries I&#39;ve found don&#39;t support retrieving objects in LRU order.\r\n\r\nDoes this thing have a standard name?\r\n\r\n\r\n  [1]: http://guava-libraries.googlecode.com/svn-history/r14/trunk/javadoc/com/google/common/collect/LinkedListMultimap.html\r\n  [2]: http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html","title":"Collection that prevents duplicates but preserves reversible duplicate insertion order?","body":"<p>Is there a collection that preserves reversible duplicate insertion order?</p>\n\n<p>Specifically, if I insert the following items:</p>\n\n<pre><code>1\n2\n3\n1\n</code></pre>\n\n<p>I want to be able to iterate over them and receive them in the following order:</p>\n\n<pre><code>1\n3\n2\n</code></pre>\n\n<p>That is, I want them in descending insertion order with duplicate insertions causing a reorder. <a href=\"http://guava-libraries.googlecode.com/svn-history/r14/trunk/javadoc/com/google/common/collect/LinkedListMultimap.html\" rel=\"nofollow\">Guava's LinkedListMultimap</a> is the closest I've found, but it doesn't support descending traversal.</p>\n\n<p><a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html\" rel=\"nofollow\">Java's LinkedHashSet</a> doesn't work because it doesn't allow descending traversal.</p>\n\n<p>I could also use an LRU cache, but most LRU libraries I've found don't support retrieving objects in LRU order.</p>\n\n<p>Does this thing have a standard name?</p>\n"},{"tags":["java","list","sorting","java-8","java-stream"],"comments":[{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":2,"creation_date":1401783831,"post_id":24010109,"comment_id":37006195,"body_markdown":"An `IntStream` has no `.sorted(Comparator)` method; you have to go through a `Stream&lt;Integer&gt;` first and reverse there before yielding an `IntStream`","body":"An <code>IntStream</code> has no <code>.sorted(Comparator)</code> method; you have to go through a <code>Stream&lt;Integer&gt;</code> first and reverse there before yielding an <code>IntStream</code>"},{"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"score":0,"creation_date":1401783884,"post_id":24010109,"comment_id":37006217,"body_markdown":"Ok, I&#39;ve found it, you need to use .boxed() and then .sorted()","body":"Ok, I&#39;ve found it, you need to use .boxed() and then .sorted()"},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":5,"creation_date":1401784778,"post_id":24010109,"comment_id":37006672,"body_markdown":"To generate an `IntStream.range(0, n)` in reverse order, do something like `map(i -&gt; n - i - 1)`. No need to do boxing and sorting.","body":"To generate an <code>IntStream.range(0, n)</code> in reverse order, do something like <code>map(i -&gt; n - i - 1)</code>. No need to do boxing and sorting."},{"owner":{"account_id":22563,"reputation":14457,"user_id":55787,"accept_rate":78,"display_name":"chiccodoro"},"score":3,"creation_date":1401785651,"post_id":24010109,"comment_id":37007119,"body_markdown":"Your gerneral question and your specific question read like two completele different questions to me. The general speaks of reversing the *stream*, while the specific speaks of ordering numbers in descending order. If the stream produces the numbers in an unordered manner like `1, 3, 2`, what is your expected outcome? Do you want the reversed stream like `2, 3, 1` or the sorted stream like `3, 2, 1`?","body":"Your gerneral question and your specific question read like two completele different questions to me. The general speaks of reversing the <i>stream</i>, while the specific speaks of ordering numbers in descending order. If the stream produces the numbers in an unordered manner like <code>1, 3, 2</code>, what is your expected outcome? Do you want the reversed stream like <code>2, 3, 1</code> or the sorted stream like <code>3, 2, 1</code>?"},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":10,"creation_date":1401786070,"post_id":24010109,"comment_id":37007343,"body_markdown":"You can&#39;t reverse a stream in general - for example a stream may be inifinite.","body":"You can&#39;t reverse a stream in general - for example a stream may be inifinite."},{"owner":{"account_id":22563,"reputation":14457,"user_id":55787,"accept_rate":78,"display_name":"chiccodoro"},"score":0,"creation_date":1401786180,"post_id":24010109,"comment_id":37007398,"body_markdown":"To &quot;reverse the stream&quot; you will first need to collect all items. You might try to use a stack because its LIFO nature will reverse the items after pushing and pulling back, something like: `stream.collect(Collectors.toCollection(Stack::new)).stream()`. (As assylias commented, you can&#39;t do that on an infinite stream. But that holds for sorting, too.","body":"To &quot;reverse the stream&quot; you will first need to collect all items. You might try to use a stack because its LIFO nature will reverse the items after pushing and pulling back, something like: <code>stream.collect(Collectors.toCollection(Stack::new)).stream()</code>&zwnj;&#8203;. (As assylias commented, you can&#39;t do that on an infinite stream. But that holds for sorting, too."},{"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"score":0,"creation_date":1401786512,"post_id":24010109,"comment_id":37007567,"body_markdown":"Yes I&#39;ve come up with this, but I tought there will be a &quot;cleaner&quot; way to do that. I think you can put it as an answer, and guys above are right my questions are different indeed, one about reversing the other one about ordering. Anyway I think others who might search and navigate to this question will looking for reversing part of this discussion. So please post it as an answer.","body":"Yes I&#39;ve come up with this, but I tought there will be a &quot;cleaner&quot; way to do that. I think you can put it as an answer, and guys above are right my questions are different indeed, one about reversing the other one about ordering. Anyway I think others who might search and navigate to this question will looking for reversing part of this discussion. So please post it as an answer."},{"owner":{"account_id":231391,"reputation":6221,"user_id":495598,"display_name":"Manu Manjunath"},"score":1,"creation_date":1449752193,"post_id":24010109,"comment_id":56149526,"body_markdown":"You may want to rephrase the question as &quot;Iterate a collection in reverse order in Java 8 way&quot;. Answer may be beyond streams. Below answer from @venkata-raju solves the problem, but takes extra space. I&#39;m still waiting to see a good answer on this question.","body":"You may want to rephrase the question as &quot;Iterate a collection in reverse order in Java 8 way&quot;. Answer may be beyond streams. Below answer from @venkata-raju solves the problem, but takes extra space. I&#39;m still waiting to see a good answer on this question."},{"owner":{"account_id":8134250,"reputation":1092,"user_id":6126446,"accept_rate":100,"display_name":"tur11ng"},"score":0,"creation_date":1538231500,"post_id":24010109,"comment_id":92075575,"body_markdown":"@assylias This doesn&#39;t make sense. For the same reason there is no point on collecting a stream or using loops in general (cause we may run into the halting problem), but we can do both.","body":"@assylias This doesn&#39;t make sense. For the same reason there is no point on collecting a stream or using loops in general (cause we may run into the halting problem), but we can do both."},{"owner":{"account_id":1060118,"reputation":497,"user_id":1061929,"display_name":"bjmi"},"score":0,"creation_date":1632239435,"post_id":24010109,"comment_id":122436338,"body_markdown":"`IntStream.rangeClosed(-n, 0).map(i -&gt; -i)` will produce elements in reversed order i.e. `n, n-1, n-2, ... , 0`.","body":"<code>IntStream.rangeClosed(-n, 0).map(i -&gt; -i)</code> will produce elements in reversed order i.e. <code>n, n-1, n-2, ... , 0</code>."}],"answers":[{"tags":[],"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1401784414,"creation_date":1401784414,"answer_id":24010541,"question_id":24010109,"body_markdown":"Here&#39;s the solution I&#39;ve come up with:\r\n\r\n    private static final Comparator&lt;Integer&gt; BY_ASCENDING_ORDER = Integer::compare;\r\n    private static final Comparator&lt;Integer&gt; BY_DESCENDING_ORDER = BY_ASCENDING_ORDER.reversed();\r\n\r\nthen using those comparators:\r\n\r\n    IntStream.range(-range, 0).boxed().sorted(BY_DESCENDING_ORDER).forEach(// etc...","title":"Java 8 stream reverse order","body":"<p>Here's the solution I've come up with:</p>\n\n<pre><code>private static final Comparator&lt;Integer&gt; BY_ASCENDING_ORDER = Integer::compare;\nprivate static final Comparator&lt;Integer&gt; BY_DESCENDING_ORDER = BY_ASCENDING_ORDER.reversed();\n</code></pre>\n\n<p>then using those comparators:</p>\n\n<pre><code>IntStream.range(-range, 0).boxed().sorted(BY_DESCENDING_ORDER).forEach(// etc...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"down_vote_count":0,"up_vote_count":112,"is_accepted":true,"score":112,"last_activity_date":1454092308,"creation_date":1401786782,"answer_id":24011264,"question_id":24010109,"body_markdown":"For the specific question of generating a reverse `IntStream`, try something like this:\r\n\r\n    static IntStream revRange(int from, int to) {\r\n        return IntStream.range(from, to)\r\n                        .map(i -&gt; to - i + from - 1);\r\n    }\r\n\r\nThis avoids boxing and sorting.\r\n\r\nFor the general question of how to reverse a stream of any type, I don&#39;t know of there&#39;s a &quot;proper&quot; way. There are a couple ways I can think of. Both end up storing the stream elements. I don&#39;t know of a way to reverse a stream without storing the elements.\r\n\r\nThis first way stores the elements into an array and reads them out to a stream in reverse order. Note that since we don&#39;t know the runtime type of the stream elements, we can&#39;t type the array properly, requiring an unchecked cast.\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    static &lt;T&gt; Stream&lt;T&gt; reverse(Stream&lt;T&gt; input) {\r\n        Object[] temp = input.toArray();\r\n        return (Stream&lt;T&gt;) IntStream.range(0, temp.length)\r\n                                    .mapToObj(i -&gt; temp[temp.length - i - 1]);\r\n    }\r\n\r\nAnother technique uses collectors to accumulate the items into a reversed list. This does lots of insertions at the front of `ArrayList` objects, so there&#39;s lots of copying going on.\r\n\r\n    Stream&lt;T&gt; input = ... ;\r\n    List&lt;T&gt; output =\r\n        input.collect(ArrayList::new,\r\n                      (list, e) -&gt; list.add(0, e),\r\n                      (list1, list2) -&gt; list1.addAll(0, list2));\r\n\r\nIt&#39;s probably possible to write a much more efficient reversing collector using some kind of customized data structure.\r\n\r\n**UPDATE 2016-01-29**\r\n\r\nSince this question has gotten a bit of attention recently, I figure I should update my answer to solve the problem with inserting at the front of `ArrayList`. This will be horribly inefficient with a large number of elements, requiring O(N^2) copying.\r\n\r\nIt&#39;s preferable to use an `ArrayDeque` instead, which efficiently supports insertion at the front. A small wrinkle is that we can&#39;t use the three-arg form of `Stream.collect()`; it requires the contents of the second arg be merged into the first arg, and there&#39;s no &quot;add-all-at-front&quot; bulk operation on `Deque`. Instead, we use `addAll()` to append the contents of the first arg to the end of the second, and then we return the second. This requires using the `Collector.of()` factory method.\r\n\r\nThe complete code is this:\r\n\r\n    Deque&lt;String&gt; output =\r\n        input.collect(Collector.of(\r\n            ArrayDeque::new,\r\n            (deq, t) -&gt; deq.addFirst(t),\r\n            (d1, d2) -&gt; { d2.addAll(d1); return d2; }));\r\n\r\nThe result is a `Deque` instead of a `List`, but that shouldn&#39;t be much of an issue, as it can easily be iterated or streamed in the now-reversed order.\r\n","title":"Java 8 stream reverse order","body":"<p>For the specific question of generating a reverse <code>IntStream</code>, try something like this:</p>\n\n<pre><code>static IntStream revRange(int from, int to) {\n    return IntStream.range(from, to)\n                    .map(i -&gt; to - i + from - 1);\n}\n</code></pre>\n\n<p>This avoids boxing and sorting.</p>\n\n<p>For the general question of how to reverse a stream of any type, I don't know of there's a \"proper\" way. There are a couple ways I can think of. Both end up storing the stream elements. I don't know of a way to reverse a stream without storing the elements.</p>\n\n<p>This first way stores the elements into an array and reads them out to a stream in reverse order. Note that since we don't know the runtime type of the stream elements, we can't type the array properly, requiring an unchecked cast.</p>\n\n<pre><code>@SuppressWarnings(\"unchecked\")\nstatic &lt;T&gt; Stream&lt;T&gt; reverse(Stream&lt;T&gt; input) {\n    Object[] temp = input.toArray();\n    return (Stream&lt;T&gt;) IntStream.range(0, temp.length)\n                                .mapToObj(i -&gt; temp[temp.length - i - 1]);\n}\n</code></pre>\n\n<p>Another technique uses collectors to accumulate the items into a reversed list. This does lots of insertions at the front of <code>ArrayList</code> objects, so there's lots of copying going on.</p>\n\n<pre><code>Stream&lt;T&gt; input = ... ;\nList&lt;T&gt; output =\n    input.collect(ArrayList::new,\n                  (list, e) -&gt; list.add(0, e),\n                  (list1, list2) -&gt; list1.addAll(0, list2));\n</code></pre>\n\n<p>It's probably possible to write a much more efficient reversing collector using some kind of customized data structure.</p>\n\n<p><strong>UPDATE 2016-01-29</strong></p>\n\n<p>Since this question has gotten a bit of attention recently, I figure I should update my answer to solve the problem with inserting at the front of <code>ArrayList</code>. This will be horribly inefficient with a large number of elements, requiring O(N^2) copying.</p>\n\n<p>It's preferable to use an <code>ArrayDeque</code> instead, which efficiently supports insertion at the front. A small wrinkle is that we can't use the three-arg form of <code>Stream.collect()</code>; it requires the contents of the second arg be merged into the first arg, and there's no \"add-all-at-front\" bulk operation on <code>Deque</code>. Instead, we use <code>addAll()</code> to append the contents of the first arg to the end of the second, and then we return the second. This requires using the <code>Collector.of()</code> factory method.</p>\n\n<p>The complete code is this:</p>\n\n<pre><code>Deque&lt;String&gt; output =\n    input.collect(Collector.of(\n        ArrayDeque::new,\n        (deq, t) -&gt; deq.addFirst(t),\n        (d1, d2) -&gt; { d2.addAll(d1); return d2; }));\n</code></pre>\n\n<p>The result is a <code>Deque</code> instead of a <code>List</code>, but that shouldn't be much of an issue, as it can easily be iterated or streamed in the now-reversed order.</p>\n"},{"tags":[],"owner":{"account_id":2027945,"reputation":4954,"user_id":1812434,"accept_rate":57,"display_name":"Venkata Raju"},"down_vote_count":1,"up_vote_count":59,"is_accepted":false,"score":58,"last_activity_date":1570108041,"creation_date":1402573258,"answer_id":24183443,"question_id":24010109,"body_markdown":"General Question:\r\n\r\nStream does not store any elements.\r\n\r\nSo iterating elements in the reverse order is not possible without storing the elements in some intermediate collection.\r\n\r\n    Stream.of(&quot;1&quot;, &quot;2&quot;, &quot;20&quot;, &quot;3&quot;)\r\n          .collect(Collectors.toCollection(ArrayDeque::new)) // or LinkedList\r\n          .descendingIterator()\r\n\t      .forEachRemaining(System.out::println);\r\n\r\nUpdate: Changed LinkedList to ArrayDeque (better) [see here for details](https://stackoverflow.com/questions/6163166/why-is-arraydeque-better-than-linkedlist)\r\n\r\nPrints:\r\n\r\n    3\r\n\r\n    20\r\n\r\n    2\r\n\r\n    1\r\n\r\nBy the way, using `sort` method is not correct as it sorts, NOT reverses (assuming stream may have unordered elements)\r\n\r\nSpecific Question: \r\n\r\nI found this simple, easier and intuitive(Copied @Holger [comment](https://stackoverflow.com/questions/24010109/java-8-stream-reverse-order/24183443#comment37013255_24011264))\r\n\r\n    IntStream.iterate(to - 1, i -&gt; i - 1).limit(to - from)\r\n","title":"Java 8 stream reverse order","body":"<p>General Question:</p>\n\n<p>Stream does not store any elements.</p>\n\n<p>So iterating elements in the reverse order is not possible without storing the elements in some intermediate collection.</p>\n\n<pre><code>Stream.of(\"1\", \"2\", \"20\", \"3\")\n      .collect(Collectors.toCollection(ArrayDeque::new)) // or LinkedList\n      .descendingIterator()\n      .forEachRemaining(System.out::println);\n</code></pre>\n\n<p>Update: Changed LinkedList to ArrayDeque (better) <a href=\"https://stackoverflow.com/questions/6163166/why-is-arraydeque-better-than-linkedlist\">see here for details</a></p>\n\n<p>Prints:</p>\n\n<pre><code>3\n\n20\n\n2\n\n1\n</code></pre>\n\n<p>By the way, using <code>sort</code> method is not correct as it sorts, NOT reverses (assuming stream may have unordered elements)</p>\n\n<p>Specific Question: </p>\n\n<p>I found this simple, easier and intuitive(Copied @Holger <a href=\"https://stackoverflow.com/questions/24010109/java-8-stream-reverse-order/24183443#comment37013255_24011264\">comment</a>)</p>\n\n<pre><code>IntStream.iterate(to - 1, i -&gt; i - 1).limit(to - from)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27543,"reputation":7198,"user_id":72810,"accept_rate":61,"display_name":"lexicalscope"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1405199982,"creation_date":1405199982,"answer_id":24717422,"question_id":24010109,"body_markdown":"You could define your own collector that collects the elements in reverse order:\r\n\r\n    public static &lt;T&gt; Collector&lt;T, List&lt;T&gt;, List&lt;T&gt;&gt; inReverse() {\r\n        return Collector.of(\r\n            ArrayList::new,\r\n            (l, t) -&gt; l.add(t),\r\n            (l, r) -&gt; {l.addAll(r); return l;},\r\n            Lists::&lt;T&gt;reverse);\r\n    }\r\n\r\nAnd use it like:\r\n\r\n    stream.collect(inReverse()).forEach(t -&gt; ...)\r\n\r\nI use an ArrayList in forward order to efficiently insert collect the items (at the end of the list), and Guava Lists.reverse to efficiently give a reversed view of the list without making another copy of it.\r\n\r\nHere are some test cases for the custom collector:\r\n\r\n    import static org.hamcrest.MatcherAssert.assertThat;\r\n    import static org.hamcrest.Matchers.*;\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.function.BiConsumer;\r\n    import java.util.function.BinaryOperator;\r\n    import java.util.function.Function;\r\n    import java.util.function.Supplier;\r\n    import java.util.stream.Collector;\r\n\r\n    import org.hamcrest.Matchers;\r\n    import org.junit.Test;\r\n\r\n    import com.google.common.collect.Lists;\r\n\r\n    public class TestReverseCollector {\r\n        private final Object t1 = new Object();\r\n        private final Object t2 = new Object();\r\n        private final Object t3 = new Object();\r\n        private final Object t4 = new Object();\r\n\r\n        private final Collector&lt;Object, List&lt;Object&gt;, List&lt;Object&gt;&gt; inReverse = inReverse();\r\n        private final Supplier&lt;List&lt;Object&gt;&gt; supplier = inReverse.supplier();\r\n        private final BiConsumer&lt;List&lt;Object&gt;, Object&gt; accumulator = inReverse.accumulator();\r\n        private final Function&lt;List&lt;Object&gt;, List&lt;Object&gt;&gt; finisher = inReverse.finisher();\r\n        private final BinaryOperator&lt;List&lt;Object&gt;&gt; combiner = inReverse.combiner();\r\n\r\n        @Test public void associative() {\r\n            final List&lt;Object&gt; a1 = supplier.get();\r\n            accumulator.accept(a1, t1);\r\n            accumulator.accept(a1, t2);\r\n            final List&lt;Object&gt; r1 = finisher.apply(a1);\r\n\r\n            final List&lt;Object&gt; a2 = supplier.get();\r\n            accumulator.accept(a2, t1);\r\n            final List&lt;Object&gt; a3 = supplier.get();\r\n            accumulator.accept(a3, t2);\r\n            final List&lt;Object&gt; r2 = finisher.apply(combiner.apply(a2, a3));\r\n\r\n            assertThat(r1, Matchers.equalTo(r2));\r\n        }\r\n\r\n        @Test public void identity() {\r\n            final List&lt;Object&gt; a1 = supplier.get();\r\n            accumulator.accept(a1, t1);\r\n            accumulator.accept(a1, t2);\r\n            final List&lt;Object&gt; r1 = finisher.apply(a1);\r\n\r\n            final List&lt;Object&gt; a2 = supplier.get();\r\n            accumulator.accept(a2, t1);\r\n            accumulator.accept(a2, t2);\r\n            final List&lt;Object&gt; r2 = finisher.apply(combiner.apply(a2, supplier.get()));\r\n\r\n            assertThat(r1, equalTo(r2));\r\n        }\r\n\r\n        @Test public void reversing() throws Exception {\r\n            final List&lt;Object&gt; a2 = supplier.get();\r\n            accumulator.accept(a2, t1);\r\n            accumulator.accept(a2, t2);\r\n\r\n            final List&lt;Object&gt; a3 = supplier.get();\r\n            accumulator.accept(a3, t3);\r\n            accumulator.accept(a3, t4);\r\n\r\n            final List&lt;Object&gt; r2 = finisher.apply(combiner.apply(a2, a3));\r\n\r\n            assertThat(r2, contains(t4, t3, t2, t1));\r\n        }\r\n\r\n        public static &lt;T&gt; Collector&lt;T, List&lt;T&gt;, List&lt;T&gt;&gt; inReverse() {\r\n            return Collector.of(\r\n                ArrayList::new,\r\n                (l, t) -&gt; l.add(t),\r\n                (l, r) -&gt; {l.addAll(r); return l;},\r\n                Lists::&lt;T&gt;reverse);\r\n        }\r\n    }\r\n","title":"Java 8 stream reverse order","body":"<p>You could define your own collector that collects the elements in reverse order:</p>\n\n<pre><code>public static &lt;T&gt; Collector&lt;T, List&lt;T&gt;, List&lt;T&gt;&gt; inReverse() {\n    return Collector.of(\n        ArrayList::new,\n        (l, t) -&gt; l.add(t),\n        (l, r) -&gt; {l.addAll(r); return l;},\n        Lists::&lt;T&gt;reverse);\n}\n</code></pre>\n\n<p>And use it like:</p>\n\n<pre><code>stream.collect(inReverse()).forEach(t -&gt; ...)\n</code></pre>\n\n<p>I use an ArrayList in forward order to efficiently insert collect the items (at the end of the list), and Guava Lists.reverse to efficiently give a reversed view of the list without making another copy of it.</p>\n\n<p>Here are some test cases for the custom collector:</p>\n\n<pre><code>import static org.hamcrest.MatcherAssert.assertThat;\nimport static org.hamcrest.Matchers.*;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.BiConsumer;\nimport java.util.function.BinaryOperator;\nimport java.util.function.Function;\nimport java.util.function.Supplier;\nimport java.util.stream.Collector;\n\nimport org.hamcrest.Matchers;\nimport org.junit.Test;\n\nimport com.google.common.collect.Lists;\n\npublic class TestReverseCollector {\n    private final Object t1 = new Object();\n    private final Object t2 = new Object();\n    private final Object t3 = new Object();\n    private final Object t4 = new Object();\n\n    private final Collector&lt;Object, List&lt;Object&gt;, List&lt;Object&gt;&gt; inReverse = inReverse();\n    private final Supplier&lt;List&lt;Object&gt;&gt; supplier = inReverse.supplier();\n    private final BiConsumer&lt;List&lt;Object&gt;, Object&gt; accumulator = inReverse.accumulator();\n    private final Function&lt;List&lt;Object&gt;, List&lt;Object&gt;&gt; finisher = inReverse.finisher();\n    private final BinaryOperator&lt;List&lt;Object&gt;&gt; combiner = inReverse.combiner();\n\n    @Test public void associative() {\n        final List&lt;Object&gt; a1 = supplier.get();\n        accumulator.accept(a1, t1);\n        accumulator.accept(a1, t2);\n        final List&lt;Object&gt; r1 = finisher.apply(a1);\n\n        final List&lt;Object&gt; a2 = supplier.get();\n        accumulator.accept(a2, t1);\n        final List&lt;Object&gt; a3 = supplier.get();\n        accumulator.accept(a3, t2);\n        final List&lt;Object&gt; r2 = finisher.apply(combiner.apply(a2, a3));\n\n        assertThat(r1, Matchers.equalTo(r2));\n    }\n\n    @Test public void identity() {\n        final List&lt;Object&gt; a1 = supplier.get();\n        accumulator.accept(a1, t1);\n        accumulator.accept(a1, t2);\n        final List&lt;Object&gt; r1 = finisher.apply(a1);\n\n        final List&lt;Object&gt; a2 = supplier.get();\n        accumulator.accept(a2, t1);\n        accumulator.accept(a2, t2);\n        final List&lt;Object&gt; r2 = finisher.apply(combiner.apply(a2, supplier.get()));\n\n        assertThat(r1, equalTo(r2));\n    }\n\n    @Test public void reversing() throws Exception {\n        final List&lt;Object&gt; a2 = supplier.get();\n        accumulator.accept(a2, t1);\n        accumulator.accept(a2, t2);\n\n        final List&lt;Object&gt; a3 = supplier.get();\n        accumulator.accept(a3, t3);\n        accumulator.accept(a3, t4);\n\n        final List&lt;Object&gt; r2 = finisher.apply(combiner.apply(a2, a3));\n\n        assertThat(r2, contains(t4, t3, t2, t1));\n    }\n\n    public static &lt;T&gt; Collector&lt;T, List&lt;T&gt;, List&lt;T&gt;&gt; inReverse() {\n        return Collector.of(\n            ArrayList::new,\n            (l, t) -&gt; l.add(t),\n            (l, r) -&gt; {l.addAll(r); return l;},\n            Lists::&lt;T&gt;reverse);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":209251,"reputation":5134,"user_id":460175,"display_name":"comonad"},"down_vote_count":1,"up_vote_count":23,"is_accepted":false,"score":22,"last_activity_date":1418223761,"creation_date":1418223761,"answer_id":27404228,"question_id":24010109,"body_markdown":"without external lib...\r\n\r\n    import java.util.List;\r\n    import java.util.Collections;\r\n    import java.util.stream.Collector;\r\n\r\n    public class MyCollectors {\r\n     \r\n        public static &lt;T&gt; Collector&lt;T, ?, List&lt;T&gt;&gt; toListReversed() {\r\n            return Collectors.collectingAndThen(Collectors.toList(), l -&gt; {\r\n                Collections.reverse(l);\r\n                return l;\r\n            });\r\n        }\r\n     \r\n    }\r\n","title":"Java 8 stream reverse order","body":"<p>without external lib...</p>\n\n<pre><code>import java.util.List;\nimport java.util.Collections;\nimport java.util.stream.Collector;\n\npublic class MyCollectors {\n\n    public static &lt;T&gt; Collector&lt;T, ?, List&lt;T&gt;&gt; toListReversed() {\n        return Collectors.collectingAndThen(Collectors.toList(), l -&gt; {\n            Collections.reverse(l);\n            return l;\n        });\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5914036,"reputation":5245,"user_id":4653367,"display_name":"John McClean"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1456744542,"creation_date":1434041900,"answer_id":30786975,"question_id":24010109,"body_markdown":"[cyclops-react][1] StreamUtils has a reverse Stream method ([javadoc][2]). \r\n   \r\n      StreamUtils.reverse(Stream.of(&quot;1&quot;, &quot;2&quot;, &quot;20&quot;, &quot;3&quot;))\r\n                 .forEach(System.out::println);\r\n\r\nIt works by collecting to an ArrayList and then making use of the ListIterator class which can iterate in either direction, to iterate backwards over the list. \r\n\r\nIf you already have a List, it will be more efficient\r\n\r\n      StreamUtils.reversedStream(Arrays.asList(&quot;1&quot;, &quot;2&quot;, &quot;20&quot;, &quot;3&quot;))\r\n                 .forEach(System.out::println);\r\n\r\n\r\n  [1]: https://github.com/aol/cyclops-react\r\n  [2]: http://static.javadoc.io/com.aol.simplereact/cyclops-react/1.0.0-RC1/com/aol/cyclops/util/stream/StreamUtils.html","title":"Java 8 stream reverse order","body":"<p><a href=\"https://github.com/aol/cyclops-react\" rel=\"nofollow\">cyclops-react</a> StreamUtils has a reverse Stream method (<a href=\"http://static.javadoc.io/com.aol.simplereact/cyclops-react/1.0.0-RC1/com/aol/cyclops/util/stream/StreamUtils.html\" rel=\"nofollow\">javadoc</a>). </p>\n\n<pre><code>  StreamUtils.reverse(Stream.of(\"1\", \"2\", \"20\", \"3\"))\n             .forEach(System.out::println);\n</code></pre>\n\n<p>It works by collecting to an ArrayList and then making use of the ListIterator class which can iterate in either direction, to iterate backwards over the list. </p>\n\n<p>If you already have a List, it will be more efficient</p>\n\n<pre><code>  StreamUtils.reversedStream(Arrays.asList(\"1\", \"2\", \"20\", \"3\"))\n             .forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1888725,"reputation":1493,"user_id":1707382,"display_name":"SlavaSt"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1469507635,"creation_date":1440960562,"answer_id":32299976,"question_id":24010109,"body_markdown":"One could write a collector that collects elements in reversed order:\r\n\r\n    public static &lt;T&gt; Collector&lt;T, ?, Stream&lt;T&gt;&gt; reversed() {\r\n        return Collectors.collectingAndThen(Collectors.toList(), list -&gt; {\r\n            Collections.reverse(list);\r\n            return list.stream();\r\n        });\r\n    }\r\n\r\nAnd use it like this:\r\n\r\n    Stream.of(1, 2, 3, 4, 5).collect(reversed()).forEach(System.out::println);\r\n\r\n**Original answer** (contains a bug - it does not work correctly for parallel streams):\r\n\r\nA general purpose stream reverse method could look like:\r\n\r\n    public static &lt;T&gt; Stream&lt;T&gt; reverse(Stream&lt;T&gt; stream) {\r\n        LinkedList&lt;T&gt; stack = new LinkedList&lt;&gt;();\r\n        stream.forEach(stack::push);\r\n        return stack.stream();\r\n    }","title":"Java 8 stream reverse order","body":"<p>One could write a collector that collects elements in reversed order:</p>\n\n<pre><code>public static &lt;T&gt; Collector&lt;T, ?, Stream&lt;T&gt;&gt; reversed() {\n    return Collectors.collectingAndThen(Collectors.toList(), list -&gt; {\n        Collections.reverse(list);\n        return list.stream();\n    });\n}\n</code></pre>\n\n<p>And use it like this:</p>\n\n<pre><code>Stream.of(1, 2, 3, 4, 5).collect(reversed()).forEach(System.out::println);\n</code></pre>\n\n<p><strong>Original answer</strong> (contains a bug - it does not work correctly for parallel streams):</p>\n\n<p>A general purpose stream reverse method could look like:</p>\n\n<pre><code>public static &lt;T&gt; Stream&lt;T&gt; reverse(Stream&lt;T&gt; stream) {\n    LinkedList&lt;T&gt; stack = new LinkedList&lt;&gt;();\n    stream.forEach(stack::push);\n    return stack.stream();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3847093,"reputation":71,"user_id":3188270,"display_name":"parmeshwor11"},"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1445395593,"creation_date":1445394260,"answer_id":33249912,"question_id":24010109,"body_markdown":"The most generic and the easiest way to reverse a list will be :\r\n\r\n    public static &lt;T&gt; void reverseHelper(List&lt;T&gt; li){\r\n\t\t\r\n\t li.stream()\r\n    .sorted((x,y)-&gt; -1)\r\n    .collect(Collectors.toList())\r\n    .forEach(System.out::println);\r\n\t\t\r\n    \t}","title":"Java 8 stream reverse order","body":"<p>The most generic and the easiest way to reverse a list will be :</p>\n\n<pre><code>public static &lt;T&gt; void reverseHelper(List&lt;T&gt; li){\n\n li.stream()\n.sorted((x,y)-&gt; -1)\n.collect(Collectors.toList())\n.forEach(System.out::println);\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1283505,"reputation":2377,"user_id":1237044,"accept_rate":100,"display_name":"Brandon"},"down_vote_count":1,"up_vote_count":42,"is_accepted":false,"score":41,"last_activity_date":1454024828,"creation_date":1452029114,"answer_id":34621495,"question_id":24010109,"body_markdown":"Many of the solutions here sort or reverse the `IntStream`, but that unnecessarily requires intermediate storage. [Stuart Marks&#39;s solution](https://stackoverflow.com/a/24011264/2711488) is the way to go:\r\n\r\n    static IntStream revRange(int from, int to) {\r\n        return IntStream.range(from, to).map(i -&gt; to - i + from - 1);\r\n    }\r\n\r\nIt correctly handles overflow as well, passing this test:\r\n\r\n    @Test\r\n    public void testRevRange() {\r\n        assertArrayEquals(revRange(0, 5).toArray(), new int[]{4, 3, 2, 1, 0});\r\n        assertArrayEquals(revRange(-5, 0).toArray(), new int[]{-1, -2, -3, -4, -5});\r\n        assertArrayEquals(revRange(1, 4).toArray(), new int[]{3, 2, 1});\r\n        assertArrayEquals(revRange(0, 0).toArray(), new int[0]);\r\n        assertArrayEquals(revRange(0, -1).toArray(), new int[0]);\r\n        assertArrayEquals(revRange(MIN_VALUE, MIN_VALUE).toArray(), new int[0]);\r\n        assertArrayEquals(revRange(MAX_VALUE, MAX_VALUE).toArray(), new int[0]);\r\n        assertArrayEquals(revRange(MIN_VALUE, MIN_VALUE + 1).toArray(), new int[]{MIN_VALUE});\r\n        assertArrayEquals(revRange(MAX_VALUE - 1, MAX_VALUE).toArray(), new int[]{MAX_VALUE - 1});\r\n    }","title":"Java 8 stream reverse order","body":"<p>Many of the solutions here sort or reverse the <code>IntStream</code>, but that unnecessarily requires intermediate storage. <a href=\"https://stackoverflow.com/a/24011264/2711488\">Stuart Marks's solution</a> is the way to go:</p>\n\n<pre><code>static IntStream revRange(int from, int to) {\n    return IntStream.range(from, to).map(i -&gt; to - i + from - 1);\n}\n</code></pre>\n\n<p>It correctly handles overflow as well, passing this test:</p>\n\n<pre><code>@Test\npublic void testRevRange() {\n    assertArrayEquals(revRange(0, 5).toArray(), new int[]{4, 3, 2, 1, 0});\n    assertArrayEquals(revRange(-5, 0).toArray(), new int[]{-1, -2, -3, -4, -5});\n    assertArrayEquals(revRange(1, 4).toArray(), new int[]{3, 2, 1});\n    assertArrayEquals(revRange(0, 0).toArray(), new int[0]);\n    assertArrayEquals(revRange(0, -1).toArray(), new int[0]);\n    assertArrayEquals(revRange(MIN_VALUE, MIN_VALUE).toArray(), new int[0]);\n    assertArrayEquals(revRange(MAX_VALUE, MAX_VALUE).toArray(), new int[0]);\n    assertArrayEquals(revRange(MIN_VALUE, MIN_VALUE + 1).toArray(), new int[]{MIN_VALUE});\n    assertArrayEquals(revRange(MAX_VALUE - 1, MAX_VALUE).toArray(), new int[]{MAX_VALUE - 1});\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":69926,"reputation":12519,"user_id":203204,"accept_rate":72,"display_name":"Anthony"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1454085532,"creation_date":1454085532,"answer_id":35089581,"question_id":24010109,"body_markdown":"Java 8 way to do this:\r\n\r\n\t\tList&lt;Integer&gt; list = Arrays.asList(1,2,3,4);\r\n\t\tComparator&lt;Integer&gt; comparator = Integer::compare;\r\n\t\tlist.stream().sorted(comparator.reversed()).forEach(System.out::println);\r\n","title":"Java 8 stream reverse order","body":"<p>Java 8 way to do this:</p>\n\n<pre><code>    List&lt;Integer&gt; list = Arrays.asList(1,2,3,4);\n    Comparator&lt;Integer&gt; comparator = Integer::compare;\n    list.stream().sorted(comparator.reversed()).forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4029140,"reputation":4897,"user_id":3316017,"display_name":"Kishan B"},"down_vote_count":41,"up_vote_count":114,"is_accepted":false,"score":73,"last_activity_date":1641834710,"creation_date":1458786757,"answer_id":36192274,"question_id":24010109,"body_markdown":"Elegant solution \r\n\r\n    List&lt;Integer&gt; list = Arrays.asList(1,2,3,4);\r\n    list.stream()\r\n        .sorted(Collections.reverseOrder()) // Method on Stream&lt;Integer&gt;\r\n        .forEach(System.out::println);","title":"Java 8 stream reverse order","body":"<p>Elegant solution</p>\n<pre><code>List&lt;Integer&gt; list = Arrays.asList(1,2,3,4);\nlist.stream()\n    .sorted(Collections.reverseOrder()) // Method on Stream&lt;Integer&gt;\n    .forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":346470,"reputation":481,"user_id":680021,"display_name":"lukens"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1458845950,"creation_date":1458845950,"answer_id":36208024,"question_id":24010109,"body_markdown":"I would suggest using [jOO][1], it&#39;s a great library that adds lots of useful functionality to Java 8 streams and lambdas.\r\n\r\nYou can then do the following:\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    List&lt;Integer&gt; list = Arrays.asList(1,2,3,4);    \r\n    Seq.seq(list).reverse().forEach(System.out::println)\r\n\r\nSimple as that. It&#39;s a pretty lightweight library, and well worth adding to any Java 8 project.\r\n\r\n  [1]: https://github.com/jOOQ/jOOL","title":"Java 8 stream reverse order","body":"<p>I would suggest using <a href=\"https://github.com/jOOQ/jOOL\" rel=\"noreferrer\">jOO</a>, it's a great library that adds lots of useful functionality to Java 8 streams and lambdas.</p>\n\n<p>You can then do the following:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>List&lt;Integer&gt; list = Arrays.asList(1,2,3,4);    \nSeq.seq(list).reverse().forEach(System.out::println)\n</code></pre>\n\n<p>Simple as that. It's a pretty lightweight library, and well worth adding to any Java 8 project.</p>\n"},{"tags":[],"owner":{"account_id":2182945,"reputation":1298,"user_id":1932017,"display_name":"YujiSoftware"},"down_vote_count":11,"up_vote_count":22,"is_accepted":false,"score":11,"last_activity_date":1549834489,"creation_date":1485619053,"answer_id":41911784,"question_id":24010109,"body_markdown":"If implemented `Comparable&lt;T&gt;` (ex. `Integer`, `String`, `Date`), you can do it using `Comparator.reverseOrder()`.\r\n\r\n    List&lt;Integer&gt; list = Arrays.asList(1, 2, 3, 4);\r\n    list.stream()\r\n         .sorted(Comparator.reverseOrder())\r\n         .forEach(System.out::println);","title":"Java 8 stream reverse order","body":"<p>If implemented <code>Comparable&lt;T&gt;</code> (ex. <code>Integer</code>, <code>String</code>, <code>Date</code>), you can do it using <code>Comparator.reverseOrder()</code>.</p>\n\n<pre><code>List&lt;Integer&gt; list = Arrays.asList(1, 2, 3, 4);\nlist.stream()\n     .sorted(Comparator.reverseOrder())\n     .forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1503406712,"creation_date":1503406712,"answer_id":45818350,"question_id":24010109,"body_markdown":"For reference I was looking at the same problem, I wanted to join the string value of stream elements in the reverse order.\r\n\r\nitemList = { last, middle, first } =&gt; first,middle,last\r\n\r\nI started to use an intermediate collection with `collectingAndThen` from _comonad_ or the `ArrayDeque` collector of _Stuart Marks_, although I wasn&#39;t happy with intermediate collection, and streaming again\r\n\r\n    itemList.stream()\r\n            .map(TheObject::toString)\r\n            .collect(Collectors.collectingAndThen(Collectors.toList(),\r\n                                                  strings -&gt; {\r\n                                                          Collections.reverse(strings);\r\n                                                          return strings;\r\n                                                  }))\r\n            .stream()\r\n            .collect(Collector.joining());\r\n\r\nSo I iterated over Stuart Marks answer that was using the `Collector.of` factory, that has the interesting _finisher_ lambda.\r\n\r\n    itemList.stream()\r\n            .collect(Collector.of(StringBuilder::new,\r\n                                 (sb, o) -&gt; sb.insert(0, o),\r\n                                 (r1, r2) -&gt; { r1.insert(0, r2); return r1; },\r\n                                 StringBuilder::toString));\r\n\r\nSince in this case the stream is not parallel, the combiner is not relevant that much, I&#39;m using `insert` anyway for the sake of code consistency but it does not matter as it would depend of which stringbuilder is built first.\r\n\r\nI looked at the StringJoiner, however it does not have an `insert` method.","title":"Java 8 stream reverse order","body":"<p>For reference I was looking at the same problem, I wanted to join the string value of stream elements in the reverse order.</p>\n\n<p>itemList = { last, middle, first } => first,middle,last</p>\n\n<p>I started to use an intermediate collection with <code>collectingAndThen</code> from <em>comonad</em> or the <code>ArrayDeque</code> collector of <em>Stuart Marks</em>, although I wasn't happy with intermediate collection, and streaming again</p>\n\n<pre><code>itemList.stream()\n        .map(TheObject::toString)\n        .collect(Collectors.collectingAndThen(Collectors.toList(),\n                                              strings -&gt; {\n                                                      Collections.reverse(strings);\n                                                      return strings;\n                                              }))\n        .stream()\n        .collect(Collector.joining());\n</code></pre>\n\n<p>So I iterated over Stuart Marks answer that was using the <code>Collector.of</code> factory, that has the interesting <em>finisher</em> lambda.</p>\n\n<pre><code>itemList.stream()\n        .collect(Collector.of(StringBuilder::new,\n                             (sb, o) -&gt; sb.insert(0, o),\n                             (r1, r2) -&gt; { r1.insert(0, r2); return r1; },\n                             StringBuilder::toString));\n</code></pre>\n\n<p>Since in this case the stream is not parallel, the combiner is not relevant that much, I'm using <code>insert</code> anyway for the sake of code consistency but it does not matter as it would depend of which stringbuilder is built first.</p>\n\n<p>I looked at the StringJoiner, however it does not have an <code>insert</code> method.</p>\n"},{"tags":[],"owner":{"account_id":189283,"reputation":625,"user_id":428532,"accept_rate":75,"display_name":"Girish Jain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1506025741,"creation_date":1506025741,"answer_id":46352674,"question_id":24010109,"body_markdown":"Answering specific question of reversing with IntStream, below worked for me:\r\n\r\n    IntStream.range(0, 10)\r\n      .map(x -&gt; x * -1)\r\n      .sorted()\r\n      .map(Math::abs)\r\n      .forEach(System.out::println);","title":"Java 8 stream reverse order","body":"<p>Answering specific question of reversing with IntStream, below worked for me:</p>\n\n<pre><code>IntStream.range(0, 10)\n  .map(x -&gt; x * -1)\n  .sorted()\n  .map(Math::abs)\n  .forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11914266,"reputation":1155,"user_id":8718583,"accept_rate":75,"display_name":"Tet"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1508500048,"creation_date":1508488773,"answer_id":46845327,"question_id":24010109,"body_markdown":"**Simplest way** (simple collect - supports parallel streams):\r\n\r\n    public static &lt;T&gt; Stream&lt;T&gt; reverse(Stream&lt;T&gt; stream) {\r\n        return stream\r\n                .collect(Collector.of(\r\n                        () -&gt; new ArrayDeque&lt;T&gt;(),\r\n                        ArrayDeque::addFirst,\r\n                        (q1, q2) -&gt; { q2.addAll(q1); return q2; })\r\n                )\r\n                .stream();\r\n    }\r\n\r\n**Advanced way** (supports parallel streams in an ongoing way):\r\n\r\n    public static &lt;T&gt; Stream&lt;T&gt; reverse(Stream&lt;T&gt; stream) {\r\n        Objects.requireNonNull(stream, &quot;stream&quot;);\r\n\r\n        class ReverseSpliterator implements Spliterator&lt;T&gt; {\r\n            private Spliterator&lt;T&gt; spliterator;\r\n            private final Deque&lt;T&gt; deque = new ArrayDeque&lt;&gt;();\r\n\r\n            private ReverseSpliterator(Spliterator&lt;T&gt; spliterator) {\r\n                this.spliterator = spliterator;\r\n            }\r\n\r\n            @Override\r\n            @SuppressWarnings({&quot;StatementWithEmptyBody&quot;})\r\n            public boolean tryAdvance(Consumer&lt;? super T&gt; action) {\r\n                while(spliterator.tryAdvance(deque::addFirst));\r\n                if(!deque.isEmpty()) {\r\n                    action.accept(deque.remove());\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n\r\n            @Override\r\n            public Spliterator&lt;T&gt; trySplit() {\r\n                // After traveling started the spliterator don&#39;t contain elements!\r\n                Spliterator&lt;T&gt; prev = spliterator.trySplit();\r\n                if(prev == null) {\r\n                    return null;\r\n                }\r\n\r\n                Spliterator&lt;T&gt; me = spliterator;\r\n                spliterator = prev;\r\n                return new ReverseSpliterator(me);\r\n            }\r\n\r\n            @Override\r\n            public long estimateSize() {\r\n                return spliterator.estimateSize();\r\n            }\r\n\r\n            @Override\r\n            public int characteristics() {\r\n                return spliterator.characteristics();\r\n            }\r\n\r\n            @Override\r\n            public Comparator&lt;? super T&gt; getComparator() {\r\n                Comparator&lt;? super T&gt; comparator = spliterator.getComparator();\r\n                return (comparator != null) ? comparator.reversed() : null;\r\n            }\r\n\r\n            @Override\r\n            public void forEachRemaining(Consumer&lt;? super T&gt; action) {\r\n                // Ensure that tryAdvance is called at least once\r\n                if(!deque.isEmpty() || tryAdvance(action)) {\r\n                    deque.forEach(action);\r\n                }\r\n            }\r\n        }\r\n\r\n        return StreamSupport.stream(new ReverseSpliterator(stream.spliterator()), stream.isParallel());\r\n    }\r\n\r\nNote you can quickly extends to other type of streams (IntStream, ...).\r\n\r\n**Testing:**\r\n\r\n    // Use parallel if you wish only\r\n    revert(Stream.of(&quot;One&quot;, &quot;Two&quot;, &quot;Three&quot;, &quot;Four&quot;, &quot;Five&quot;, &quot;Six&quot;).parallel())\r\n        .forEachOrdered(System.out::println);\r\n\r\n**Results:**\r\n\r\n    Six\r\n    Five\r\n    Four\r\n    Three\r\n    Two\r\n    One\r\n\r\n**Additional notes:** The `simplest way` it isn&#39;t so useful when used with other stream operations (the collect join breaks the parallelism). The `advance way` doesn&#39;t have that issue, and it keeps also the initial characteristics of the stream, for example `SORTED`, and so, it&#39;s the way to go to use with other stream operations after the reverse.","title":"Java 8 stream reverse order","body":"<p><strong>Simplest way</strong> (simple collect - supports parallel streams):</p>\n\n<pre><code>public static &lt;T&gt; Stream&lt;T&gt; reverse(Stream&lt;T&gt; stream) {\n    return stream\n            .collect(Collector.of(\n                    () -&gt; new ArrayDeque&lt;T&gt;(),\n                    ArrayDeque::addFirst,\n                    (q1, q2) -&gt; { q2.addAll(q1); return q2; })\n            )\n            .stream();\n}\n</code></pre>\n\n<p><strong>Advanced way</strong> (supports parallel streams in an ongoing way):</p>\n\n<pre><code>public static &lt;T&gt; Stream&lt;T&gt; reverse(Stream&lt;T&gt; stream) {\n    Objects.requireNonNull(stream, \"stream\");\n\n    class ReverseSpliterator implements Spliterator&lt;T&gt; {\n        private Spliterator&lt;T&gt; spliterator;\n        private final Deque&lt;T&gt; deque = new ArrayDeque&lt;&gt;();\n\n        private ReverseSpliterator(Spliterator&lt;T&gt; spliterator) {\n            this.spliterator = spliterator;\n        }\n\n        @Override\n        @SuppressWarnings({\"StatementWithEmptyBody\"})\n        public boolean tryAdvance(Consumer&lt;? super T&gt; action) {\n            while(spliterator.tryAdvance(deque::addFirst));\n            if(!deque.isEmpty()) {\n                action.accept(deque.remove());\n                return true;\n            }\n            return false;\n        }\n\n        @Override\n        public Spliterator&lt;T&gt; trySplit() {\n            // After traveling started the spliterator don't contain elements!\n            Spliterator&lt;T&gt; prev = spliterator.trySplit();\n            if(prev == null) {\n                return null;\n            }\n\n            Spliterator&lt;T&gt; me = spliterator;\n            spliterator = prev;\n            return new ReverseSpliterator(me);\n        }\n\n        @Override\n        public long estimateSize() {\n            return spliterator.estimateSize();\n        }\n\n        @Override\n        public int characteristics() {\n            return spliterator.characteristics();\n        }\n\n        @Override\n        public Comparator&lt;? super T&gt; getComparator() {\n            Comparator&lt;? super T&gt; comparator = spliterator.getComparator();\n            return (comparator != null) ? comparator.reversed() : null;\n        }\n\n        @Override\n        public void forEachRemaining(Consumer&lt;? super T&gt; action) {\n            // Ensure that tryAdvance is called at least once\n            if(!deque.isEmpty() || tryAdvance(action)) {\n                deque.forEach(action);\n            }\n        }\n    }\n\n    return StreamSupport.stream(new ReverseSpliterator(stream.spliterator()), stream.isParallel());\n}\n</code></pre>\n\n<p>Note you can quickly extends to other type of streams (IntStream, ...).</p>\n\n<p><strong>Testing:</strong></p>\n\n<pre><code>// Use parallel if you wish only\nrevert(Stream.of(\"One\", \"Two\", \"Three\", \"Four\", \"Five\", \"Six\").parallel())\n    .forEachOrdered(System.out::println);\n</code></pre>\n\n<p><strong>Results:</strong></p>\n\n<pre><code>Six\nFive\nFour\nThree\nTwo\nOne\n</code></pre>\n\n<p><strong>Additional notes:</strong> The <code>simplest way</code> it isn't so useful when used with other stream operations (the collect join breaks the parallelism). The <code>advance way</code> doesn't have that issue, and it keeps also the initial characteristics of the stream, for example <code>SORTED</code>, and so, it's the way to go to use with other stream operations after the reverse.</p>\n"},{"tags":[],"owner":{"account_id":8241122,"reputation":391,"user_id":6198746,"display_name":"Brixomatic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1515325658,"creation_date":1515325658,"answer_id":48136802,"question_id":24010109,"body_markdown":"This is how I do it.\r\n\r\nI don&#39;t like the idea of creating a new collection and reverse iterating it.\r\n\r\nThe IntStream#map idea is pretty neat, but I prefer the IntStream#iterate method, for I think the idea of a countdown to Zero better expressed with the iterate method and easier to understand in terms of walking the array from back to front.\r\n\r\n    import static java.lang.Math.max;\r\n\r\n    private static final double EXACT_MATCH = 0d;\r\n\r\n\tpublic static IntStream reverseStream(final int[] array) {\r\n\t\treturn countdownFrom(array.length - 1).map(index -&gt; array[index]);\r\n\t}\r\n\r\n\tpublic static DoubleStream reverseStream(final double[] array) {\r\n\t\treturn countdownFrom(array.length - 1).mapToDouble(index -&gt; array[index]);\r\n\t}\r\n\r\n\tpublic static &lt;T&gt; Stream&lt;T&gt; reverseStream(final T[] array) {\r\n\t\treturn countdownFrom(array.length - 1).mapToObj(index -&gt; array[index]);\r\n\t}\r\n\r\n\tpublic static IntStream countdownFrom(final int top) {\r\n\t\treturn IntStream.iterate(top, t -&gt; t - 1).limit(max(0, (long) top + 1));\r\n\t}\r\n\r\nHere are some tests to prove it works:\r\n\r\n    import static java.lang.Integer.MAX_VALUE;\r\n    import static org.junit.Assert.*;\r\n\r\n    @Test\r\n\tpublic void testReverseStream_emptyArrayCreatesEmptyStream() {\r\n\t\tAssert.assertEquals(0, reverseStream(new double[0]).count());\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void testReverseStream_singleElementCreatesSingleElementStream() {\r\n\t\tAssert.assertEquals(1, reverseStream(new double[1]).count());\r\n        final double[] singleElementArray = new double[] { 123.4 };\r\n\t\tassertArrayEquals(singleElementArray, reverseStream(singleElementArray).toArray(), EXACT_MATCH);\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void testReverseStream_multipleElementsAreStreamedInReversedOrder() {\r\n\t\tfinal double[] arr = new double[] { 1d, 2d, 3d };\r\n\t\tfinal double[] revArr = new double[] { 3d, 2d, 1d };\r\n\t\tAssert.assertEquals(arr.length, reverseStream(arr).count());\r\n\t\tAssert.assertArrayEquals(revArr, reverseStream(arr).toArray(), EXACT_MATCH);\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void testCountdownFrom_returnsAllElementsFromTopToZeroInReverseOrder() {\r\n\t\tassertArrayEquals(new int[] { 4, 3, 2, 1, 0 }, countdownFrom(4).toArray());\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void testCountdownFrom_countingDownStartingWithZeroOutputsTheNumberZero() {\r\n\t\tassertArrayEquals(new int[] { 0 }, countdownFrom(0).toArray());\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void testCountdownFrom_doesNotChokeOnIntegerMaxValue() {\r\n\t\tassertEquals(true, countdownFrom(MAX_VALUE).anyMatch(x -&gt; x == MAX_VALUE));\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void testCountdownFrom_givesZeroLengthCountForNegativeValues() {\r\n\t\tassertArrayEquals(new int[0], countdownFrom(-1).toArray());\r\n\t\tassertArrayEquals(new int[0], countdownFrom(-4).toArray());\r\n\t}\r\n","title":"Java 8 stream reverse order","body":"<p>This is how I do it.</p>\n\n<p>I don't like the idea of creating a new collection and reverse iterating it.</p>\n\n<p>The IntStream#map idea is pretty neat, but I prefer the IntStream#iterate method, for I think the idea of a countdown to Zero better expressed with the iterate method and easier to understand in terms of walking the array from back to front.</p>\n\n<pre><code>import static java.lang.Math.max;\n\nprivate static final double EXACT_MATCH = 0d;\n\npublic static IntStream reverseStream(final int[] array) {\n    return countdownFrom(array.length - 1).map(index -&gt; array[index]);\n}\n\npublic static DoubleStream reverseStream(final double[] array) {\n    return countdownFrom(array.length - 1).mapToDouble(index -&gt; array[index]);\n}\n\npublic static &lt;T&gt; Stream&lt;T&gt; reverseStream(final T[] array) {\n    return countdownFrom(array.length - 1).mapToObj(index -&gt; array[index]);\n}\n\npublic static IntStream countdownFrom(final int top) {\n    return IntStream.iterate(top, t -&gt; t - 1).limit(max(0, (long) top + 1));\n}\n</code></pre>\n\n<p>Here are some tests to prove it works:</p>\n\n<pre><code>import static java.lang.Integer.MAX_VALUE;\nimport static org.junit.Assert.*;\n\n@Test\npublic void testReverseStream_emptyArrayCreatesEmptyStream() {\n    Assert.assertEquals(0, reverseStream(new double[0]).count());\n}\n\n@Test\npublic void testReverseStream_singleElementCreatesSingleElementStream() {\n    Assert.assertEquals(1, reverseStream(new double[1]).count());\n    final double[] singleElementArray = new double[] { 123.4 };\n    assertArrayEquals(singleElementArray, reverseStream(singleElementArray).toArray(), EXACT_MATCH);\n}\n\n@Test\npublic void testReverseStream_multipleElementsAreStreamedInReversedOrder() {\n    final double[] arr = new double[] { 1d, 2d, 3d };\n    final double[] revArr = new double[] { 3d, 2d, 1d };\n    Assert.assertEquals(arr.length, reverseStream(arr).count());\n    Assert.assertArrayEquals(revArr, reverseStream(arr).toArray(), EXACT_MATCH);\n}\n\n@Test\npublic void testCountdownFrom_returnsAllElementsFromTopToZeroInReverseOrder() {\n    assertArrayEquals(new int[] { 4, 3, 2, 1, 0 }, countdownFrom(4).toArray());\n}\n\n@Test\npublic void testCountdownFrom_countingDownStartingWithZeroOutputsTheNumberZero() {\n    assertArrayEquals(new int[] { 0 }, countdownFrom(0).toArray());\n}\n\n@Test\npublic void testCountdownFrom_doesNotChokeOnIntegerMaxValue() {\n    assertEquals(true, countdownFrom(MAX_VALUE).anyMatch(x -&gt; x == MAX_VALUE));\n}\n\n@Test\npublic void testCountdownFrom_givesZeroLengthCountForNegativeValues() {\n    assertArrayEquals(new int[0], countdownFrom(-1).toArray());\n    assertArrayEquals(new int[0], countdownFrom(-4).toArray());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2228321,"reputation":1225,"user_id":1966569,"accept_rate":82,"display_name":"Jerome"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1518456520,"creation_date":1518456520,"answer_id":48752167,"question_id":24010109,"body_markdown":"How about this utility method?\r\n\r\n    public static &lt;T&gt; Stream&lt;T&gt; getReverseStream(List&lt;T&gt; list) {\r\n\t\tfinal ListIterator&lt;T&gt; listIt = list.listIterator(list.size());\r\n\t\tfinal Iterator&lt;T&gt; reverseIterator = new Iterator&lt;T&gt;() {\r\n            @Override\r\n            public boolean hasNext() {\r\n                return listIt.hasPrevious();\r\n            }\r\n\r\n            @Override\r\n            public T next() {\r\n                return listIt.previous();\r\n            }\r\n        };\r\n        return StreamSupport.stream(Spliterators.spliteratorUnknownSize(\r\n                reverseIterator,\r\n                Spliterator.ORDERED | Spliterator.IMMUTABLE), false);\r\n\t}\r\n\r\nSeems to work with all cases without duplication.","title":"Java 8 stream reverse order","body":"<p>How about this utility method?</p>\n\n<pre><code>public static &lt;T&gt; Stream&lt;T&gt; getReverseStream(List&lt;T&gt; list) {\n    final ListIterator&lt;T&gt; listIt = list.listIterator(list.size());\n    final Iterator&lt;T&gt; reverseIterator = new Iterator&lt;T&gt;() {\n        @Override\n        public boolean hasNext() {\n            return listIt.hasPrevious();\n        }\n\n        @Override\n        public T next() {\n            return listIt.previous();\n        }\n    };\n    return StreamSupport.stream(Spliterators.spliteratorUnknownSize(\n            reverseIterator,\n            Spliterator.ORDERED | Spliterator.IMMUTABLE), false);\n}\n</code></pre>\n\n<p>Seems to work with all cases without duplication.</p>\n"},{"tags":[],"owner":{"account_id":3155790,"reputation":14985,"user_id":2668232,"accept_rate":100,"display_name":"Oleksandr Pyrohov"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1559515740,"creation_date":1523825334,"answer_id":49846647,"question_id":24010109,"body_markdown":"With regard to the specific question of generating a reverse `IntStream`:\r\n\r\nstarting from **Java 9** you can use the three-argument version of the [`IntStream.iterate(...)`][1]:\r\n\r\n    IntStream.iterate(10, x -&gt; x &gt;= 0, x -&gt; x - 1).forEach(System.out::println);\r\n\r\n    // Out: 10 9 8 7 6 5 4 3 2 1 0\r\n\r\nwhere:\r\n\r\n`IntStream.iterate(int seed, IntPredicate hasNext, IntUnaryOperator next);`\r\n\r\n - `seed` - the initial element;\r\n - `hasNext` - a predicate to apply to elements to determine when the\r\n   stream must terminate;\r\n - `next` - a function to be applied to the previous element to produce a\r\n   new element.\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/util/stream/IntStream.html#iterate-int-java.util.function.IntPredicate-java.util.function.IntUnaryOperator-","title":"Java 8 stream reverse order","body":"<p>With regard to the specific question of generating a reverse <code>IntStream</code>:</p>\n\n<p>starting from <strong>Java 9</strong> you can use the three-argument version of the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/stream/IntStream.html#iterate-int-java.util.function.IntPredicate-java.util.function.IntUnaryOperator-\" rel=\"nofollow noreferrer\"><code>IntStream.iterate(...)</code></a>:</p>\n\n<pre><code>IntStream.iterate(10, x -&gt; x &gt;= 0, x -&gt; x - 1).forEach(System.out::println);\n\n// Out: 10 9 8 7 6 5 4 3 2 1 0\n</code></pre>\n\n<p>where:</p>\n\n<p><code>IntStream.iterate(int seed, IntPredicate hasNext, IntUnaryOperator next);</code></p>\n\n<ul>\n<li><code>seed</code> - the initial element;</li>\n<li><code>hasNext</code> - a predicate to apply to elements to determine when the\nstream must terminate;</li>\n<li><code>next</code> - a function to be applied to the previous element to produce a\nnew element.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":37500,"reputation":1068,"user_id":107216,"accept_rate":18,"display_name":"Jeffrey"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1526488893,"creation_date":1526488893,"answer_id":50376064,"question_id":24010109,"body_markdown":"Not purely Java8 but if you use guava&#39;s Lists.reverse() method in conjunction, you can easily achieve this:\r\n\r\n    List&lt;Integer&gt; list = Arrays.asList(1,2,3,4);\r\n    Lists.reverse(list).stream().forEach(System.out::println);","title":"Java 8 stream reverse order","body":"<p>Not purely Java8 but if you use guava's Lists.reverse() method in conjunction, you can easily achieve this:</p>\n\n<pre><code>List&lt;Integer&gt; list = Arrays.asList(1,2,3,4);\nLists.reverse(list).stream().forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1543516842,"creation_date":1543516842,"answer_id":53545594,"question_id":24010109,"body_markdown":"In all this I don&#39;t see the answer I would go to first.\r\n\r\nThis isn&#39;t exactly a direct answer to the question, but it&#39;s a potential solution to the problem.\r\n\r\nJust build the list backwards in the first place.  If you can, use a LinkedList instead of an ArrayList and when you add items use &quot;Push&quot; instead of add.  The list will be built in the reverse order and will then stream correctly without any manipulation.\r\n\r\nThis won&#39;t fit cases where you are dealing with primitive arrays or lists that are already used in various ways but does work well in a surprising number of cases.","title":"Java 8 stream reverse order","body":"<p>In all this I don't see the answer I would go to first.</p>\n\n<p>This isn't exactly a direct answer to the question, but it's a potential solution to the problem.</p>\n\n<p>Just build the list backwards in the first place.  If you can, use a LinkedList instead of an ArrayList and when you add items use \"Push\" instead of add.  The list will be built in the reverse order and will then stream correctly without any manipulation.</p>\n\n<p>This won't fit cases where you are dealing with primitive arrays or lists that are already used in various ways but does work well in a surprising number of cases.</p>\n"},{"tags":[],"owner":{"account_id":5369552,"reputation":403,"user_id":4278474,"display_name":"Dotista"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1545305553,"creation_date":1545301957,"answer_id":53866886,"question_id":24010109,"body_markdown":"`ArrayDeque` are faster in the stack than a Stack or LinkedList. &quot;push()&quot; inserts elements at the front of the Deque\r\n\r\n     protected &lt;T&gt; Stream&lt;T&gt; reverse(Stream&lt;T&gt; stream) {\r\n        ArrayDeque&lt;T&gt; stack = new ArrayDeque&lt;&gt;();\r\n        stream.forEach(stack::push);\r\n        return stack.stream();\r\n    }","title":"Java 8 stream reverse order","body":"<p><code>ArrayDeque</code> are faster in the stack than a Stack or LinkedList. \"push()\" inserts elements at the front of the Deque</p>\n\n<pre><code> protected &lt;T&gt; Stream&lt;T&gt; reverse(Stream&lt;T&gt; stream) {\n    ArrayDeque&lt;T&gt; stack = new ArrayDeque&lt;&gt;();\n    stream.forEach(stack::push);\n    return stack.stream();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15849762,"reputation":21,"user_id":11435928,"display_name":"sai manoj"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1556699328,"creation_date":1556694446,"answer_id":55932731,"question_id":24010109,"body_markdown":"Reversing string or any Array\r\n```\r\n(Stream.of(&quot;abcdefghijklm 1234567&quot;.split(&quot;&quot;)).collect(Collectors.collectingAndThen(Collectors.toList(),list -&gt; {Collections.reverse(list);return list;}))).stream().forEach(System.out::println);\r\n```\r\n\r\nsplit can be modified based on the delimiter or space","title":"Java 8 stream reverse order","body":"<p>Reversing string or any Array</p>\n\n<pre><code>(Stream.of(\"abcdefghijklm 1234567\".split(\"\")).collect(Collectors.collectingAndThen(Collectors.toList(),list -&gt; {Collections.reverse(list);return list;}))).stream().forEach(System.out::println);\n</code></pre>\n\n<p>split can be modified based on the delimiter or space</p>\n"},{"tags":[],"owner":{"account_id":11171121,"reputation":2994,"user_id":8198056,"display_name":"Adrian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1558691084,"creation_date":1558691084,"answer_id":56289986,"question_id":24010109,"body_markdown":"the simplest solution is using `List::listIterator` and `Stream::generate`\r\n\r\n    List&lt;Integer&gt; list = Arrays.asList(1, 2, 3, 4, 5);\r\n    ListIterator&lt;Integer&gt; listIterator = list.listIterator(list.size());\r\n\r\n    Stream.generate(listIterator::previous)\r\n          .limit(list.size())\r\n          .forEach(System.out::println);","title":"Java 8 stream reverse order","body":"<p>the simplest solution is using <code>List::listIterator</code> and <code>Stream::generate</code></p>\n\n<pre><code>List&lt;Integer&gt; list = Arrays.asList(1, 2, 3, 4, 5);\nListIterator&lt;Integer&gt; listIterator = list.listIterator(list.size());\n\nStream.generate(listIterator::previous)\n      .limit(list.size())\n      .forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1816815,"reputation":178,"user_id":1651744,"display_name":"siddmuk2005"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1581923771,"creation_date":1574612301,"answer_id":59019747,"question_id":24010109,"body_markdown":"  \r\n\r\n    List newStream = list.stream().sorted(Collections.reverseOrder()).collect(Collectors.toList());\r\n            newStream.forEach(System.out::println);","title":"Java 8 stream reverse order","body":"<pre><code>List newStream = list.stream().sorted(Collections.reverseOrder()).collect(Collectors.toList());\n        newStream.forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":59435,"reputation":1210,"user_id":177832,"display_name":"David Larochette"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1584546161,"creation_date":1583857600,"answer_id":60621923,"question_id":24010109,"body_markdown":"This method works with any Stream and is Java 8 compliant:\r\n\r\n    Stream&lt;Integer&gt; myStream = Stream.of(1, 2, 3, 4, 5);\r\n    myStream.reduce(Stream.empty(),\r\n    \t\t(Stream&lt;Integer&gt; a, Integer b) -&gt; Stream.concat(Stream.of(b), a),\r\n    \t\t(a, b) -&gt; Stream.concat(b, a))\r\n    \t\t.forEach(System.out::println);","title":"Java 8 stream reverse order","body":"<p>This method works with any Stream and is Java 8 compliant:</p>\n\n<pre><code>Stream&lt;Integer&gt; myStream = Stream.of(1, 2, 3, 4, 5);\nmyStream.reduce(Stream.empty(),\n        (Stream&lt;Integer&gt; a, Integer b) -&gt; Stream.concat(Stream.of(b), a),\n        (a, b) -&gt; Stream.concat(b, a))\n        .forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1845327,"reputation":3625,"user_id":1673775,"display_name":"luke"},"down_vote_count":0,"up_vote_count":41,"is_accepted":false,"score":41,"last_activity_date":1606733477,"creation_date":1599636599,"answer_id":63806719,"question_id":24010109,"body_markdown":"**How NOT to do it:**\r\n - Don&#39;t use `.sorted(Comparator.reverseOrder())` or `.sorted(Collections.reverseOrder())`, because it will just sort elements in the descending order.   \r\nUsing it for given Integer input:  \r\n`[1, 4, 2, 5, 3]`  \r\nthe output would be as follows:    \r\n`[5, 4, 3, 2, 1]`  \r\nFor String input:   \r\n`[&quot;A&quot;, &quot;D&quot;, &quot;B&quot;, &quot;E&quot;, &quot;C&quot;]`  \r\nthe output would be as follows:   \r\n`[E, D, C, B, A]`\r\n - Don&#39;t use `.sorted((a, b) -&gt; -1)` (explanation at the end)\r\n\r\n**The easiest way to do it properly:**  \r\n```\r\nList&lt;Integer&gt; list = Arrays.asList(1, 4, 2, 5, 3);\r\nCollections.reverse(list);\r\nSystem.out.println(list);\r\n```\r\nOutput:  \r\n`[3, 5, 2, 4, 1]`\r\n\r\nThe same for `String`:\r\n```\r\nList&lt;String&gt; stringList = Arrays.asList(&quot;A&quot;, &quot;D&quot;, &quot;B&quot;, &quot;E&quot;, &quot;C&quot;);\r\nCollections.reverse(stringList);\r\nSystem.out.println(stringList);\r\n```\r\nOutput:  \r\n`[C, E, B, D, A]`\r\n\r\n**Don&#39;t use `.sorted((a, b) -&gt; -1)`!**  \r\nIt breaks comparator contract and might work only for some cases ie. only on single thread but not in parallel.  \r\nyankee explanation:\r\n&gt; `(a, b) -&gt; -1` breaks the contract for `Comparator`. Whether this works depends on the implementation of the sort algorithm. The next release of the JVM might break this. Actually I can already break this reproduciblly on my machine using `IntStream.range(0, 10000).parallel().boxed().sorted((a, b) -&gt; -1).forEachOrdered(System.out::println);`\r\n\r\n```\r\n//Don&#39;t use this!!!\r\nList&lt;Integer&gt; list = Arrays.asList(1, 4, 2, 5, 3);\r\nList&lt;Integer&gt; reversedList = list.stream()\r\n        .sorted((a, b) -&gt; -1)\r\n        .collect(Collectors.toList());\r\nSystem.out.println(reversedList);\r\n```\r\nOutput in positive case:  \r\n`[3, 5, 2, 4, 1]`\r\n\r\nPossible output in parallel stream or with other JVM implementation:  \r\n`[4, 1, 2, 3, 5]`\r\n\r\nThe same for `String`:\r\n```\r\n//Don&#39;t use this!!!\r\nList&lt;String&gt; stringList = Arrays.asList(&quot;A&quot;, &quot;D&quot;, &quot;B&quot;, &quot;E&quot;, &quot;C&quot;);\r\nList&lt;String&gt; reversedStringList = stringList.stream()\r\n        .sorted((a, b) -&gt; -1)\r\n        .collect(Collectors.toList());\r\nSystem.out.println(reversedStringList);\r\n```\r\nOutput in positive case:  \r\n`[C, E, B, D, A]`  \r\n\r\nPossible output in parallel stream or with other JVM implementation:  \r\n`[A, E, B, D, C]`     ","title":"Java 8 stream reverse order","body":"<p><strong>How NOT to do it:</strong></p>\n<ul>\n<li>Don't use <code>.sorted(Comparator.reverseOrder())</code> or <code>.sorted(Collections.reverseOrder())</code>, because it will just sort elements in the descending order.<br />\nUsing it for given Integer input:<br />\n<code>[1, 4, 2, 5, 3]</code><br />\nthe output would be as follows:<br />\n<code>[5, 4, 3, 2, 1]</code><br />\nFor String input:<br />\n<code>[&quot;A&quot;, &quot;D&quot;, &quot;B&quot;, &quot;E&quot;, &quot;C&quot;]</code><br />\nthe output would be as follows:<br />\n<code>[E, D, C, B, A]</code></li>\n<li>Don't use <code>.sorted((a, b) -&gt; -1)</code> (explanation at the end)</li>\n</ul>\n<p><strong>The easiest way to do it properly:</strong></p>\n<pre><code>List&lt;Integer&gt; list = Arrays.asList(1, 4, 2, 5, 3);\nCollections.reverse(list);\nSystem.out.println(list);\n</code></pre>\n<p>Output:<br />\n<code>[3, 5, 2, 4, 1]</code></p>\n<p>The same for <code>String</code>:</p>\n<pre><code>List&lt;String&gt; stringList = Arrays.asList(&quot;A&quot;, &quot;D&quot;, &quot;B&quot;, &quot;E&quot;, &quot;C&quot;);\nCollections.reverse(stringList);\nSystem.out.println(stringList);\n</code></pre>\n<p>Output:<br />\n<code>[C, E, B, D, A]</code></p>\n<p><strong>Don't use <code>.sorted((a, b) -&gt; -1)</code>!</strong><br />\nIt breaks comparator contract and might work only for some cases ie. only on single thread but not in parallel.<br />\nyankee explanation:</p>\n<blockquote>\n<p><code>(a, b) -&gt; -1</code> breaks the contract for <code>Comparator</code>. Whether this works depends on the implementation of the sort algorithm. The next release of the JVM might break this. Actually I can already break this reproduciblly on my machine using <code>IntStream.range(0, 10000).parallel().boxed().sorted((a, b) -&gt; -1).forEachOrdered(System.out::println);</code></p>\n</blockquote>\n<pre><code>//Don't use this!!!\nList&lt;Integer&gt; list = Arrays.asList(1, 4, 2, 5, 3);\nList&lt;Integer&gt; reversedList = list.stream()\n        .sorted((a, b) -&gt; -1)\n        .collect(Collectors.toList());\nSystem.out.println(reversedList);\n</code></pre>\n<p>Output in positive case:<br />\n<code>[3, 5, 2, 4, 1]</code></p>\n<p>Possible output in parallel stream or with other JVM implementation:<br />\n<code>[4, 1, 2, 3, 5]</code></p>\n<p>The same for <code>String</code>:</p>\n<pre><code>//Don't use this!!!\nList&lt;String&gt; stringList = Arrays.asList(&quot;A&quot;, &quot;D&quot;, &quot;B&quot;, &quot;E&quot;, &quot;C&quot;);\nList&lt;String&gt; reversedStringList = stringList.stream()\n        .sorted((a, b) -&gt; -1)\n        .collect(Collectors.toList());\nSystem.out.println(reversedStringList);\n</code></pre>\n<p>Output in positive case:<br />\n<code>[C, E, B, D, A]</code></p>\n<p>Possible output in parallel stream or with other JVM implementation:<br />\n<code>[A, E, B, D, C]</code></p>\n"},{"tags":[],"owner":{"account_id":8460659,"reputation":2301,"user_id":6346531,"display_name":"aksh1618"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1603087714,"creation_date":1603087714,"answer_id":64421976,"question_id":24010109,"body_markdown":"Based on [@stuart-marks&#39;s answer](https://stackoverflow.com/a/24011264/6346531), but without casting, function returning stream of list elements starting from end:\r\n\r\n```java\r\npublic static &lt;T&gt; Stream&lt;T&gt; reversedStream(List&lt;T&gt; tList) {\r\n    final int size = tList.size();\r\n    return IntStream.range(0, size)\r\n            .mapToObj(i -&gt; tList.get(size - 1 - i));\r\n}\r\n\r\n// usage\r\nreversedStream(list).forEach(System.out::println);\r\n```","title":"Java 8 stream reverse order","body":"<p>Based on <a href=\"https://stackoverflow.com/a/24011264/6346531\">@stuart-marks's answer</a>, but without casting, function returning stream of list elements starting from end:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;T&gt; Stream&lt;T&gt; reversedStream(List&lt;T&gt; tList) {\n    final int size = tList.size();\n    return IntStream.range(0, size)\n            .mapToObj(i -&gt; tList.get(size - 1 - i));\n}\n\n// usage\nreversedStream(list).forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12837682,"reputation":949,"user_id":9286715,"display_name":"levenshtein"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677705274,"creation_date":1610268062,"answer_id":65651454,"question_id":24010109,"body_markdown":"How about reversing the Collection backing the stream prior?\r\n\r\n    import java.util.Collections;\r\n    import java.util.List;\r\n    \r\n    public void reverseTest(List&lt;Integer&gt; sampleCollection) {\r\n        Collections.reverse(sampleCollection); // remember this reverses the elements in the list, so if you want the original input collection to remain untouched clone it first.\r\n    \r\n        sampleCollection.stream().forEach(item -&gt; {\r\n          // you op here\r\n        });\r\n    }","title":"Java 8 stream reverse order","body":"<p>How about reversing the Collection backing the stream prior?</p>\n<pre><code>import java.util.Collections;\nimport java.util.List;\n\npublic void reverseTest(List&lt;Integer&gt; sampleCollection) {\n    Collections.reverse(sampleCollection); // remember this reverses the elements in the list, so if you want the original input collection to remain untouched clone it first.\n\n    sampleCollection.stream().forEach(item -&gt; {\n      // you op here\n    });\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641809702,"creation_date":1641809702,"answer_id":70650767,"question_id":24010109,"body_markdown":"`What&#39;s the proper generic way to reverse a stream?`  \r\n\r\nIf the stream does not specify an [*encounter order*](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Spliterator.html#ORDERED), don&#39;t.\r\n(`!s.spliterator().hasCharacteristics(java.util.Spliterator.ORDERED)`)","title":"Java 8 stream reverse order","body":"<p><code>What's the proper generic way to reverse a stream?</code></p>\n<p>If the stream does not specify an <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Spliterator.html#ORDERED\" rel=\"nofollow noreferrer\"><em>encounter order</em></a>, don't.\n(<code>!s.spliterator().hasCharacteristics(java.util.Spliterator.ORDERED)</code>)</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695233068,"creation_date":1677774006,"answer_id":75618153,"question_id":24010109,"body_markdown":"The only way to reverse any general stream is to read through the stream, capturing all values, and then stream through the captured values in reverse order.  This means that at minimum, a full copy of the stream data must be stored in order to stream through it in reverse order.\r\n\r\nAs of Java 21, the [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()) method on `List` makes reversing a general `Stream` a one-liner:\r\n\r\n```lang-java\r\nStream&lt;T&gt; reversed = myStream.stream().toList().reversed().toStream();\r\n```\r\n\r\nAccomplishing the same thing with Java version 20 without using a customized collection type is more verbose, typically requiring an extra step of reversing the resulting list.  The following Java 20 implementation streams to a `List`, reverses the list, and then return a stream using `.toStream()`.\r\n\r\n```lang-java\r\nList&lt;T&gt; list = myStream.stream().collect(Collectors.toCollection(ArrayList::new));\r\nCollections.reverse(list);\r\nStream&lt;T&gt; reversed = list.stream();\r\n```","title":"Java 8 stream reverse order","body":"<p>The only way to reverse any general stream is to read through the stream, capturing all values, and then stream through the captured values in reverse order.  This means that at minimum, a full copy of the stream data must be stored in order to stream through it in reverse order.</p>\n<p>As of Java 21, the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method on <code>List</code> makes reversing a general <code>Stream</code> a one-liner:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Stream&lt;T&gt; reversed = myStream.stream().toList().reversed().toStream();\n</code></pre>\n<p>Accomplishing the same thing with Java version 20 without using a customized collection type is more verbose, typically requiring an extra step of reversing the resulting list.  The following Java 20 implementation streams to a <code>List</code>, reverses the list, and then return a stream using <code>.toStream()</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;T&gt; list = myStream.stream().collect(Collectors.toCollection(ArrayList::new));\nCollections.reverse(list);\nStream&lt;T&gt; reversed = list.stream();\n</code></pre>\n"}],"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":333900,"favorite_count":0,"down_vote_count":0,"up_vote_count":233,"accepted_answer_id":24011264,"answer_count":31,"score":233,"last_activity_date":1695233068,"creation_date":1401782985,"question_id":24010109,"body_markdown":"General question: What&#39;s the proper way to reverse a stream? Assuming that we don&#39;t know what type of elements that stream consists of, what&#39;s the generic way to reverse any stream?\r\n\r\nSpecific question: \r\n\r\n`IntStream` provides range method to generate Integers in specific range `IntStream.range(-range, 0)`, now that I want to reverse it switching range from 0 to negative won&#39;t work, also I can&#39;t use `Integer::compare`\r\n\r\n\r\n    List&lt;Integer&gt; list = Arrays.asList(1,2,3,4);\r\n    list.stream().sorted(Integer::compare).forEach(System.out::println);\r\n\r\nwith `IntStream` I&#39;ll get this compiler error\r\n\r\n&gt; Error:(191, 0) ajc: The method `sorted()` in the type `IntStream` is not applicable for the arguments (`Integer::compare`)\r\n\r\nwhat am I missing here?","title":"Java 8 stream reverse order","body":"<p>General question: What's the proper way to reverse a stream? Assuming that we don't know what type of elements that stream consists of, what's the generic way to reverse any stream?</p>\n\n<p>Specific question: </p>\n\n<p><code>IntStream</code> provides range method to generate Integers in specific range <code>IntStream.range(-range, 0)</code>, now that I want to reverse it switching range from 0 to negative won't work, also I can't use <code>Integer::compare</code></p>\n\n<pre><code>List&lt;Integer&gt; list = Arrays.asList(1,2,3,4);\nlist.stream().sorted(Integer::compare).forEach(System.out::println);\n</code></pre>\n\n<p>with <code>IntStream</code> I'll get this compiler error</p>\n\n<blockquote>\n  <p>Error:(191, 0) ajc: The method <code>sorted()</code> in the type <code>IntStream</code> is not applicable for the arguments (<code>Integer::compare</code>)</p>\n</blockquote>\n\n<p>what am I missing here?</p>\n"},{"tags":["java","set","iteration","linkedhashset"],"comments":[{"owner":{"account_id":268135,"reputation":519,"user_id":556712,"accept_rate":42,"display_name":"Bhavesh"},"score":2,"creation_date":1396527351,"post_id":10741902,"comment_id":34834378,"body_markdown":"Why in Java Collection Framework it is not included. LinkedHashSet maintains FIFO order so an utility to convert the order into LIFO should be there which seems to be vary handy when requirement is to maintain insertion order at the same time we may need to iterate in reverse order. In my project there were couple time I needed this already. Unfortunately, I have to use List as intermediary to take advantage of Collections.reverse() utility. This is dirty isn&#39;t it!","body":"Why in Java Collection Framework it is not included. LinkedHashSet maintains FIFO order so an utility to convert the order into LIFO should be there which seems to be vary handy when requirement is to maintain insertion order at the same time we may need to iterate in reverse order. In my project there were couple time I needed this already. Unfortunately, I have to use List as intermediary to take advantage of Collections.reverse() utility. This is dirty isn&#39;t it!"},{"owner":{"account_id":37062,"reputation":1079,"user_id":105863,"accept_rate":67,"display_name":"Hollis Waite"},"score":0,"creation_date":1618627151,"post_id":10741902,"comment_id":118666165,"body_markdown":"This has been a problem since forever. There are [proposals](http://mail.openjdk.java.net/pipermail/core-libs-dev/2021-April/076461.html) floating around to address it.","body":"This has been a problem since forever. There are <a href=\"http://mail.openjdk.java.net/pipermail/core-libs-dev/2021-April/076461.html\" rel=\"nofollow noreferrer\">proposals</a> floating around to address it."}],"answers":[{"tags":[],"owner":{"account_id":116580,"reputation":118703,"user_id":305644,"accept_rate":75,"display_name":"hvgotcodes"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1655747533,"creation_date":1337878432,"answer_id":10741952,"question_id":10741902,"body_markdown":"er, assuming you mean LinkedHashSet...\r\n\r\nI would use [toArray][1] and just use a reverse for loop.\r\n\r\nThere might be a better way to do it, but that should work.  `toArray` guarantees any order is preserved\r\n\r\n&gt; If this set makes any guarantees as to what order its elements are\r\n&gt; returned by its iterator, this method must return the elements in the\r\n&gt; same order.\r\n\r\nSomething like\r\n\r\n    Set&lt;MyType&gt; mySet = new LinkedHashSet();\r\n    ...\r\n    MyType[] asArray = mySet.toArray(new MyType[0]);\r\n    \r\n    for (int i = asArray.length - 1; i&gt;=0; i--){\r\n    ..\r\n    }\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#toArray%28T%5B%5D%29","title":"Java LinkedHashSet backwards iteration","body":"<p>er, assuming you mean LinkedHashSet...</p>\n<p>I would use <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#toArray%28T%5B%5D%29\" rel=\"nofollow noreferrer\">toArray</a> and just use a reverse for loop.</p>\n<p>There might be a better way to do it, but that should work.  <code>toArray</code> guarantees any order is preserved</p>\n<blockquote>\n<p>If this set makes any guarantees as to what order its elements are\nreturned by its iterator, this method must return the elements in the\nsame order.</p>\n</blockquote>\n<p>Something like</p>\n<pre><code>Set&lt;MyType&gt; mySet = new LinkedHashSet();\n...\nMyType[] asArray = mySet.toArray(new MyType[0]);\n\nfor (int i = asArray.length - 1; i&gt;=0; i--){\n..\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":110681,"reputation":112,"user_id":292795,"display_name":"sysoutnull"},"down_vote_count":11,"up_vote_count":1,"is_accepted":false,"score":-10,"last_activity_date":1337878645,"creation_date":1337878645,"answer_id":10742016,"question_id":10741902,"body_markdown":"From the javadoc: &quot;This linked list defines the iteration ordering, which is the order in which elements were inserted into the set (insertion-order).&quot;\r\n\r\nSo you can simply:\r\n\r\n    LinkedHashSet&lt;Integer&gt; numbers = new LinkedHashSet&lt;Integer&gt;();\r\n    numbers.add(1);\r\n    numbers.add(2);\r\n    numbers.add(33);\r\n    numbers.add(44);\r\n    numbers.add(108);\r\n    \r\n    for (Integer i : numbers) {\r\n        System.out.println(i);\r\n    }","title":"Java LinkedHashSet backwards iteration","body":"<p>From the javadoc: \"This linked list defines the iteration ordering, which is the order in which elements were inserted into the set (insertion-order).\"</p>\n\n<p>So you can simply:</p>\n\n<pre><code>LinkedHashSet&lt;Integer&gt; numbers = new LinkedHashSet&lt;Integer&gt;();\nnumbers.add(1);\nnumbers.add(2);\nnumbers.add(33);\nnumbers.add(44);\nnumbers.add(108);\n\nfor (Integer i : numbers) {\n    System.out.println(i);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":395357,"reputation":44547,"user_id":758280,"accept_rate":100,"display_name":"Jeffrey"},"down_vote_count":0,"up_vote_count":29,"is_accepted":true,"score":29,"last_activity_date":1337878701,"creation_date":1337878701,"answer_id":10742031,"question_id":10741902,"body_markdown":"If you want to continue to use collections, you could use the following:\r\n\r\n    LinkedHashSet&lt;T&gt; set = ...\r\n\r\n    LinkedList&lt;T&gt; list = new LinkedList&lt;&gt;(set);\r\n    Iterator&lt;T&gt; itr = list.descendingIterator();\r\n    while(itr.hasNext()) {\r\n        T item = itr.next();\r\n        // do something\r\n    }\r\n\r\nIf you&#39;re fine with using an array instead, you could take a look at [hvgotcodes&#39; answer](https://stackoverflow.com/a/10741952/758280).","title":"Java LinkedHashSet backwards iteration","body":"<p>If you want to continue to use collections, you could use the following:</p>\n\n<pre><code>LinkedHashSet&lt;T&gt; set = ...\n\nLinkedList&lt;T&gt; list = new LinkedList&lt;&gt;(set);\nIterator&lt;T&gt; itr = list.descendingIterator();\nwhile(itr.hasNext()) {\n    T item = itr.next();\n    // do something\n}\n</code></pre>\n\n<p>If you're fine with using an array instead, you could take a look at <a href=\"https://stackoverflow.com/a/10741952/758280\">hvgotcodes' answer</a>.</p>\n"},{"tags":[],"owner":{"account_id":403847,"reputation":23234,"user_id":771837,"display_name":"trutheality"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1337878918,"creation_date":1337878918,"answer_id":10742080,"question_id":10741902,"body_markdown":"This is another way:\r\n\r\n    LinkedHashSet&lt;T&gt; set = ...\r\n    \r\n    List&lt;T&gt; list = new ArrayList&lt;&gt;(set);\r\n    Collections.reverse(list);\r\n    \r\n    for( T item : list ){\r\n       ...\r\n    }\r\n\r\n","title":"Java LinkedHashSet backwards iteration","body":"<p>This is another way:</p>\n\n<pre><code>LinkedHashSet&lt;T&gt; set = ...\n\nList&lt;T&gt; list = new ArrayList&lt;&gt;(set);\nCollections.reverse(list);\n\nfor( T item : list ){\n   ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":217708,"reputation":23000,"user_id":473637,"accept_rate":88,"display_name":"Jeshurun"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1337879239,"creation_date":1337879239,"answer_id":10742159,"question_id":10741902,"body_markdown":"If you really meant LinkedHashSet, you could put the elements into an ArrayList and then use the ArrayList&#39;s ListIterator.\r\n\r\n    ListIterator&lt;T&gt; l = new ArrayList&lt;T&gt;(yourLinkedHashList).listIterator();\r\n    // ListIterator can iterate in reverse\r\n    while(l.hasPrevious()) {\r\n    \tT obj = l.previous();\r\n    }","title":"Java LinkedHashSet backwards iteration","body":"<p>If you really meant LinkedHashSet, you could put the elements into an ArrayList and then use the ArrayList's ListIterator.</p>\n\n<pre><code>ListIterator&lt;T&gt; l = new ArrayList&lt;T&gt;(yourLinkedHashList).listIterator();\n// ListIterator can iterate in reverse\nwhile(l.hasPrevious()) {\n    T obj = l.previous();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695232983,"creation_date":1682843455,"answer_id":76140253,"question_id":10741902,"body_markdown":"As of Java 21, the [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#reversed()) method on `LinkedHashSet` can be used.  This reversed view of the set can be used to iterate in reverse order.\r\n\r\n```lang-java\r\nfor (Object o : myLinkedHashSet.reversed()) {\r\n  System.out.println(o);\r\n}","title":"Java LinkedHashSet backwards iteration","body":"<p>As of Java 21, the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method on <code>LinkedHashSet</code> can be used.  This reversed view of the set can be used to iterate in reverse order.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (Object o : myLinkedHashSet.reversed()) {\n  System.out.println(o);\n}\n</code></pre>\n"}],"owner":{"account_id":176550,"reputation":4165,"user_id":407315,"accept_rate":59,"display_name":"David Weng"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27515,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"accepted_answer_id":10742031,"answer_count":6,"score":29,"last_activity_date":1695232983,"creation_date":1337878268,"question_id":10741902,"body_markdown":"How can I iterate through items of a `LinkedHashSet` from the last item to the first one?","title":"Java LinkedHashSet backwards iteration","body":"<p>How can I iterate through items of a <code>LinkedHashSet</code> from the last item to the first one?</p>\n"},{"tags":["java","apache-spark","data-binding","version"],"answers":[{"tags":[],"owner":{"account_id":16426356,"reputation":1936,"user_id":11866308,"display_name":"Allen D. Ball"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1623086335,"creation_date":1622487567,"answer_id":67779035,"question_id":67769492,"body_markdown":"Are you sure of the error?  Scala 2.12 requires Jackson 2.10.x.\r\n\r\nTo debug, run `mvn dependency:tree` to see what dependencies/versions are actually being dragged in.  You are probably getting other Jackson JARs that are not 2.10.x.\r\n\r\nIf you are building a Spring project (with parent POM spring-boot-dependencies), set:\r\n\r\n```xml\r\n&lt;jackson-bom.version&gt;2.10.5.20201202&lt;/jackson-bom.version&gt;\r\n```\r\n\r\nfor the latest Jackson that satisfies the Scala requirement.  Otherwise, you&#39;ll need to add the following to your `&lt;dependencyManagement/&gt;`:\r\n\r\n```xml\r\n  &lt;dependencyManagement&gt;                                                        \r\n    &lt;dependencies&gt;\r\n      ...\r\n      &lt;dependency&gt;                                                              \r\n        &lt;groupId&gt;com.fasterxml.jackson&lt;/groupId&gt;                                \r\n        &lt;artifactId&gt;jackson-bom&lt;/artifactId&gt;                                    \r\n        &lt;version&gt;${jackson-bom.version}&lt;/version&gt;                               \r\n        &lt;type&gt;pom&lt;/type&gt;                                                        \r\n        &lt;scope&gt;import&lt;/scope&gt;                                                   \r\n      &lt;/dependency&gt;\r\n      ...\r\n    &lt;/dependencies&gt;                                                             \r\n  &lt;/dependencyManagement&gt; \r\n```\r\n\r\nand remove the `&lt;version&gt;` from you Jackson dependencies.","title":"Scala module 2.12.3 requires Jackson Databind version &gt;= 2.12.0 and &lt; 2.13.0 but I have databind 2.12.3","body":"<p>Are you sure of the error?  Scala 2.12 requires Jackson 2.10.x.</p>\n<p>To debug, run <code>mvn dependency:tree</code> to see what dependencies/versions are actually being dragged in.  You are probably getting other Jackson JARs that are not 2.10.x.</p>\n<p>If you are building a Spring project (with parent POM spring-boot-dependencies), set:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;jackson-bom.version&gt;2.10.5.20201202&lt;/jackson-bom.version&gt;\n</code></pre>\n<p>for the latest Jackson that satisfies the Scala requirement.  Otherwise, you'll need to add the following to your <code>&lt;dependencyManagement/&gt;</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;dependencyManagement&gt;                                                        \n    &lt;dependencies&gt;\n      ...\n      &lt;dependency&gt;                                                              \n        &lt;groupId&gt;com.fasterxml.jackson&lt;/groupId&gt;                                \n        &lt;artifactId&gt;jackson-bom&lt;/artifactId&gt;                                    \n        &lt;version&gt;${jackson-bom.version}&lt;/version&gt;                               \n        &lt;type&gt;pom&lt;/type&gt;                                                        \n        &lt;scope&gt;import&lt;/scope&gt;                                                   \n      &lt;/dependency&gt;\n      ...\n    &lt;/dependencies&gt;                                                             \n  &lt;/dependencyManagement&gt; \n</code></pre>\n<p>and remove the <code>&lt;version&gt;</code> from you Jackson dependencies.</p>\n"},{"tags":[],"owner":{"account_id":21781141,"reputation":81,"user_id":16082828,"display_name":"Mathieu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622620518,"creation_date":1622620518,"answer_id":67801058,"question_id":67769492,"body_markdown":"Allen D.Ball, my answer is too long for comment. So,\r\npom.xml : \r\n\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;fr.cnp.kfk&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;jee&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;artifactId&gt;kfk-spark-structured-streams&lt;/artifactId&gt;\r\n\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n\t&lt;name&gt;Spark Structured Streams&lt;/name&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;spark.version&gt;3.1.1&lt;/spark.version&gt;\r\n\t\t&lt;slf4j.version&gt;1.7.7&lt;/slf4j.version&gt;\r\n\t\t&lt;log4j.version&gt;1.2.17&lt;/log4j.version&gt;\r\n\t\t&lt;scala.version&gt;2.12&lt;/scala.version&gt;\r\n\t\t&lt;jackson-bom.version&gt;2.12.3&lt;/jackson-bom.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n\t\t\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;shade&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;artifactSet&gt;\r\n\t\t\t\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;exclude&gt;org.apache.flink:force-shading&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;exclude&gt;com.google.code.findbugs:jsr305&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t\t\t\t&lt;/artifactSet&gt;\r\n\t\t\t\t\t\t\t&lt;filters&gt;\r\n\t\t\t\t\t\t\t\t&lt;filter&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;artifact&gt;*:*&lt;/artifact&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t\t\t\t\t&lt;/filter&gt;\r\n\t\t\t\t\t\t\t&lt;/filters&gt;\r\n\t\t\t\t\t\t\t&lt;transformers&gt;\r\n\t\t\t\t\t\t\t\t&lt;transformer\r\n\t\t\t\t\t\t\t\t\timplementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;mainClass&gt;fr.cnp.kfk.streams.Application&lt;/mainClass&gt;\r\n\t\t\t\t\t\t\t\t&lt;/transformer&gt;\r\n\t\t\t\t\t\t\t&lt;/transformers&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\r\n\t\t&lt;pluginManagement&gt;\r\n\t\t\t&lt;plugins&gt;\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n\t\t\t\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n\t\t\t\t\t\t&lt;compilerId&gt;jdt&lt;/compilerId&gt;\r\n\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;dependencies&gt;\r\n\t\t\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.eclipse.tycho&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;tycho-compiler-jdt&lt;/artifactId&gt;\r\n\t\t\t\t\t\t\t&lt;version&gt;0.21.0&lt;/version&gt;\r\n\t\t\t\t\t\t&lt;/dependency&gt;\r\n\t\t\t\t\t&lt;/dependencies&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.eclipse.m2e&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;lifecycle-mapping&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;1.0.0&lt;/version&gt;\r\n\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t&lt;lifecycleMappingMetadata&gt;\r\n\t\t\t\t\t\t\t&lt;pluginExecutions&gt;\r\n\t\t\t\t\t\t\t\t&lt;pluginExecution&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;pluginExecutionFilter&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;versionRange&gt;[2.4,)&lt;/versionRange&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;goal&gt;single&lt;/goal&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/pluginExecutionFilter&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;action&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;ignore /&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/action&gt;\r\n\t\t\t\t\t\t\t\t&lt;/pluginExecution&gt;\r\n\t\t\t\t\t\t\t\t&lt;pluginExecution&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;pluginExecutionFilter&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;versionRange&gt;[3.1,)&lt;/versionRange&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;goal&gt;testCompile&lt;/goal&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;goal&gt;compile&lt;/goal&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/pluginExecutionFilter&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;action&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;ignore /&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/action&gt;\r\n\t\t\t\t\t\t\t\t&lt;/pluginExecution&gt;\r\n\t\t\t\t\t\t\t&lt;/pluginExecutions&gt;\r\n\t\t\t\t\t\t&lt;/lifecycleMappingMetadata&gt;\r\n\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;/plugins&gt;\r\n\t\t&lt;/pluginManagement&gt;\r\n\t&lt;/build&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;fr.cnp.kfk&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;kfk-commons&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spark-sql_${scala.version}&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${spark.version}&lt;/version&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;janino&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;commons-compiler&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spark-sql-kafka-0-10_2.12&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.1.1&lt;/version&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;commons-pool2&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spark-streaming_${scala.version}&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${spark.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.opencsv&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;opencsv&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-dataformat-yaml&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-module-scala_${scala.version}&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- D&#233;pendences pour RecksDB --&gt;\r\n\t\t&lt;!-- &lt;dependency&gt; &lt;groupId&gt;org.apache.flink&lt;/groupId&gt; &lt;artifactId&gt;flink-statebackend-rocksdb_2.12&lt;/artifactId&gt; \r\n\t\t\t&lt;version&gt;${flink.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; --&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;artifactId&gt;janino&lt;/artifactId&gt;\r\n\t\t\t&lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\r\n\t\t\t&lt;version&gt;3.0.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;artifactId&gt;commons-compiler&lt;/artifactId&gt;\r\n\t\t\t&lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\r\n\t\t\t&lt;version&gt;3.0.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-pool2&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.9.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;com.fasterxml.jackson&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;jackson-bom&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${jackson-bom.version}&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n&lt;/project&gt;\r\n\r\ndependency.tree : \r\n\r\n    [INFO] --- maven-dependency-plugin:3.0.2:tree (default-cli) @ kfk-spark-structured-streams --- \r\n    [INFO] fr.cnp.kfk:kfk-spark-structured-streams:jar:0.0.1-SNAPSHOT \r\n    [INFO] +- fr.cnp.kfk:kfk-commons:jar:0.0.1-SNAPSHOT:compile \r\n    [INFO] +- org.apache.spark:spark-sql_2.12:jar:3.1.1:compile \r\n    [INFO] |  +- com.univocity:univocity-parsers:jar:2.9.1:compile \r\n    [INFO] |  +- org.apache.spark:spark-sketch_2.12:jar:3.1.1:compile \r\n    [INFO] |  +- org.apache.spark:spark-core_2.12:jar:3.1.1:compile \r\n    [INFO] |  |  +- org.apache.avro:avro:jar:1.8.2:compile \r\n    [INFO] |  |  |  +- org.apache.commons:commons-compress:jar:1.8.1:compile \r\n    [INFO] |  |  |  \\- org.tukaani:xz:jar:1.5:compile \r\n    [INFO] |  |  +- org.apache.avro:avro-mapred:jar:hadoop2:1.8.2:compile \r\n    [INFO] |  |  |  \\- org.apache.avro:avro-ipc:jar:1.8.2:compile \r\n    [INFO] |  |  +- com.twitter:chill_2.12:jar:0.9.5:compile \r\n    [INFO] |  |  |  \\- com.esotericsoftware:kryo-shaded:jar:4.0.2:compile \r\n    [INFO] |  |  |        +- com.esotericsoftware:minlog:jar:1.3.0:compile \r\n    [INFO] |  |  |     \\- org.objenesis:objenesis:jar:2.6:compile \r\n    [INFO] |  |  +- com.twitter:chill-java:jar:0.9.5:compile \r\n    [INFO] |  |  +- org.apache.hadoop:hadoop-client:jar:3.2.0:compile \r\n    [INFO] |  |  |  +- org.apache.hadoop:hadoop-common:jar:3.2.0:compile \r\n    [INFO] |  |  |  |     +- com.google.guava:guava:jar:23.0:compile \r\n    [INFO] |  |  |  |  |  +- com.google.errorprone:error_prone_annotations:jar:2.0.18:compile\r\n    [INFO] |  |  |  |  |  +- com.google.j2objc:j2objc-annotations:jar:1.1:compile \r\n    [INFO] |  |  |  | |  \\- org.codehaus.mojo:animal-sniffer-annotations:jar:1.14:compile [INFO] |  |  |  |  +- commons-cli:commons-cli:jar:1.3.1:compile \r\n    [INFO] |  |  |  |  +- org.apache.httpcomponents:httpclient:jar:4.5.5:compile \r\n    [INFO] |  |  |  |  |  \\- org.apache.httpcomponents:httpcore:jar:4.4.9:compile \r\n    [INFO] |  |  |  |    +- commons-io:commons-io:jar:2.5:compile \r\n    [INFO] |  |  |  |  +- org.eclipse.jetty:jetty-servlet:jar:9.4.8.v20171121:compile \r\n    [INFO] |  |  |  |  +- javax.servlet.jsp:jsp-api:jar:2.2:provided \r\n    [INFO] |  |  |  |  +- org.apache.commons:commons-configuration2:jar:2.1.1:compile \r\n    [INFO] |  |  |  |  +- com.google.re2j:re2j:jar:1.1:compile \r\n    [INFO] |  | |  |  +- com.google.code.gson:gson:jar:2.8.2:compile \r\n    [INFO] |  |  |  |    +- org.apache.hadoop:hadoop-auth:jar:3.2.0:compile \r\n    [INFO] |  |  |  |  |  +- com.nimbusds:nimbus-jose-jwt:jar:4.41.1:compile \r\n    [INFO] |  |  |  |  |  |  \\- com.github.stephenc.jcip:jcip-annotations:jar:1.0-1:compile [INFO] |  |  |  |  |  \\- net.minidev:json-smart:jar:2.3:compile \r\n    [INFO] |  |  |  |  |     \\- net.minidev:accessors-smart:jar:1.2:compile \r\n    [INFO] |  |  | |  +- org.apache.curator:curator-client:jar:2.12.0:compile \r\n    [INFO] |  | |  |  +- org.apache.htrace:htrace-core4:jar:4.1.0-incubating:compile \r\n    [INFO] |  |  |  |  +- org.apache.kerby:kerb-simplekdc:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  |    +- org.apache.kerby:kerb-client:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  |  |  +- org.apache.kerby:kerby-config:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  |  |  +- org.apache.kerby:kerb-core:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  |  |  |  \\- org.apache.kerby:kerby-pkix:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  |  |  |     +- org.apache.kerby:kerby-asn1:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  |  |  |     \\- org.apache.kerby:kerby-util:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  |  |  +- org.apache.kerby:kerb-common:jar:1.0.1:compile \r\n    [INFO] |  | |  |  |  |  |  \\- org.apache.kerby:kerb-crypto:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  |  |  +- org.apache.kerby:kerb-util:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  |  |  \\- org.apache.kerby:token-provider:jar:1.0.1:compile \r\n    [INFO] |  |  |  | |  \\- org.apache.kerby:kerb-admin:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  |     +- org.apache.kerby:kerb-server:jar:1.0.1:compile \r\n    [INFO] |  |  | |  |     |  \\- org.apache.kerby:kerb-identity:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  |     \\- org.apache.kerby:kerby-xdr:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  +- org.codehaus.woodstox:stax2-api:jar:3.1.4:compile \r\n    [INFO] |  |  |  |     +- com.fasterxml.woodstox:woodstox-core:jar:5.0.3:compile \r\n    [INFO] |  |  |  |  \\- dnsjava:dnsjava:jar:2.1.7:compile \r\n    [INFO] |  |  |  +- org.apache.hadoop:hadoop-hdfs-client:jar:3.2.0:compile \r\n    [INFO] |  |  |  |  \\- com.squareup.okhttp:okhttp:jar:2.7.5:compile \r\n    [INFO] |  |  |  |   \\- com.squareup.okio:okio:jar:1.6.0:compile \r\n    [INFO] |  |  |  +- org.apache.hadoop:hadoop-yarn-api:jar:3.2.0:compile \r\n    [INFO] |  |  |  |  \\- javax.xml.bind:jaxb-api:jar:2.3.0:provided \r\n    [INFO] |  |  |  +- org.apache.hadoop:hadoop-yarn-client:jar:3.2.0:compile \r\n    [INFO] |  |  |     +- org.apache.hadoop:hadoop-mapreduce-client-core:jar:3.2.0:compile \r\n    [INFO] |  |  |  |  \\- org.apache.hadoop:hadoop-yarn-common:jar:3.2.0:compile \r\n    [INFO] |  |  |  |     +- com.fasterxml.jackson.module:jackson-module-jaxb-annotations:jar:2.12.3:compile \r\n    [INFO] |  |  |  |     |  +- jakarta.xml.bind:jakarta.xml.bind-api:jar:2.3.2:compile \r\n    [INFO] |  |  | |     |  \\- jakarta.activation:jakarta.activation-api:jar:1.2.1:compile [INFO] |  |  |  |     \\- com.fasterxml.jackson.jaxrs:jackson-jaxrs-json-provider:jar:2.12.3:compile \r\n    [INFO] |  |  |  |        \\- com.fasterxml.jackson.jaxrs:jackson-jaxrs-base:jar:2.12.3:compile \r\n    [INFO] |  |  |  +- org.apache.hadoop:hadoop-mapreduce-client-jobclient:jar:3.2.0:compile [INFO] |  |  |  |  \\- org.apache.hadoop:hadoop-mapreduce-client-common:jar:3.2.0:compile [INFO] |  |  |  \\- org.apache.hadoop:hadoop-annotations:jar:3.2.0:compile \r\n    [INFO] |  |  +- org.apache.spark:spark-launcher_2.12:jar:3.1.1:compile \r\n    [INFO] |  |  +- org.apache.spark:spark-kvstore_2.12:jar:3.1.1:compile \r\n    [INFO] |  |  |  \\- org.fusesource.leveldbjni:leveldbjni-all:jar:1.8:compile \r\n    [INFO] |  |  +- org.apache.spark:spark-network-common_2.12:jar:3.1.1:compile \r\n    [INFO] |  |  +- org.apache.spark:spark-network-shuffle_2.12:jar:3.1.1:compile \r\n    [INFO] | |  +- org.apache.spark:spark-unsafe_2.12:jar:3.1.1:compile \r\n    [INFO] |  |    +- javax.activation:activation:jar:1.1.1:provided \r\n    [INFO] |  |  +- org.apache.curator:curator-recipes:jar:2.13.0:compile \r\n    [INFO] |  |  |  \\- org.apache.curator:curator-framework:jar:2.13.0:compile \r\n    [INFO] |  |    +- org.apache.zookeeper:zookeeper:jar:3.4.14:compile \r\n    [INFO] |  |  |  \\- org.apache.yetus:audience-annotations:jar:0.5.0:compile \r\n    [INFO] |  |    +- jakarta.servlet:jakarta.servlet-api:jar:4.0.3:compile \r\n    [INFO] |  |  +- org.apache.commons:commons-math3:jar:3.4.1:compile \r\n    [INFO] |  |  +- com.google.code.findbugs:jsr305:jar:3.0.0:compile \r\n    [INFO] |  |  +- org.slf4j:slf4j-api:jar:1.7.25:compile \r\n    [INFO] |  |  +- org.slf4j:jul-to-slf4j:jar:1.7.25:compile \r\n    [INFO] |  |  +- org.slf4j:jcl-over-slf4j:jar:1.7.25:compile \r\n    [INFO] |  |  +- log4j:log4j:jar:1.2.17:compile \r\n    [INFO] |  |  +- org.slf4j:slf4j-log4j12:jar:1.7.25:compile \r\n    [INFO] |  |  +- com.ning:compress-lzf:jar:1.0.3:compile \r\n    [INFO] |  |  +- org.xerial.snappy:snappy-java:jar:1.1.8.2:compile \r\n    [INFO] |  |  +- org.lz4:lz4-java:jar:1.7.1:compile \r\n    [INFO] |  |  +- com.github.luben:zstd-jni:jar:1.4.8-1:compile \r\n    [INFO] |  |  +- org.roaringbitmap:RoaringBitmap:jar:0.9.0:compile \r\n    [INFO] |  |  |  \\- org.roaringbitmap:shims:jar:0.9.0:runtime \r\n    [INFO] |  |  +- commons-net:commons-net:jar:3.1:compile \r\n    [INFO] |  |  +- org.scala-lang.modules:scala-xml_2.12:jar:1.2.0:compile \r\n    [INFO] |  |     +- org.scala-lang:scala-reflect:jar:2.12.10:compile \r\n    [INFO] |  |  +- org.json4s:json4s-jackson_2.12:jar:3.7.0-M5:compile \r\n    [INFO] |  |  |  \\- org.json4s:json4s-core_2.12:jar:3.7.0-M5:compile \r\n    [INFO] |  |  |     +- org.json4s:json4s-ast_2.12:jar:3.7.0-M5:compile \r\n    [INFO] |  |  |     \\- org.json4s:json4s-scalap_2.12:jar:3.7.0-M5:compile \r\n    [INFO] |  |  +- org.glassfish.jersey.core:jersey-client:jar:2.25.1:compile \r\n    [INFO] |  | |  +- javax.ws.rs:javax.ws.rs-api:jar:2.1:provided \r\n    [INFO] |  |  |  +- org.glassfish.hk2:hk2-api:jar:2.5.0-b32:compile \r\n    [INFO] |  |  |  |  +- org.glassfish.hk2:hk2-utils:jar:2.5.0-b32:compile \r\n    [INFO] |  |  |  |  \\- org.glassfish.hk2.external:aopalliance-repackaged:jar:2.5.0-b32:compile \r\n    [INFO] |  |  |  +- org.glassfish.hk2.external:javax.inject:jar:2.5.0-b32:compile \r\n    [INFO] | |  |  \\- org.glassfish.hk2:hk2-locator:jar:2.5.0-b32:compile \r\n    [INFO] |  |  +- org.glassfish.jersey.core:jersey-common:jar:2.25.1:compile \r\n    [INFO] |  |  |  +- javax.annotation:javax.annotation-api:jar:1.2:compile \r\n    [INFO] |  |  |     +- org.glassfish.jersey.bundles.repackaged:jersey-guava:jar:2.25.1:compile \r\n    [INFO] |  |  |  \\- org.glassfish.hk2:osgi-resource-locator:jar:1.0.1:compile \r\n    [INFO] |  |     +- org.glassfish.jersey.core:jersey-server:jar:2.25.1:compile\r\n    [INFO] |  |  |  +- org.glassfish.jersey.media:jersey-media-jaxb:jar:2.25.1:compile \r\n    [INFO] |  |  |  \\- javax.validation:validation-api:jar:1.1.0.Final:compile \r\n    [INFO] |  |  +- org.glassfish.jersey.containers:jersey-container-servlet:jar:2.25.1:compile \r\n    [INFO] |  |  +- org.glassfish.jersey.containers:jersey-container-servlet-core:jar:2.25.1:compile \r\n    [INFO] |  |  +- org.glassfish.jersey.inject:jersey-hk2:jar:2.30:compile \r\n    [INFO] |  |  | \\- org.javassist:javassist:jar:3.21.0-GA:compile \r\n    [INFO] |  |  +- io.netty:netty-all:jar:4.1.51.Final:compile \r\n    [INFO] |  |  +- com.clearspring.analytics:stream:jar:2.9.6:compile \r\n    [INFO] |  |  +- io.dropwizard.metrics:metrics-core:jar:3.1.5:compile \r\n    [INFO] |  |  +- io.dropwizard.metrics:metrics-jvm:jar:3.1.5:compile \r\n    [INFO] |  |  +- io.dropwizard.metrics:metrics-json:jar:3.1.5:compile \r\n    [INFO] |  |  +- io.dropwizard.metrics:metrics-graphite:jar:3.1.5:compile \r\n    [INFO] |  |     +- io.dropwizard.metrics:metrics-jmx:jar:4.1.1:compile \r\n    [INFO] |  |  +- org.apache.ivy:ivy:jar:2.4.0:compile \r\n    [INFO] |  |  +- oro:oro:jar:2.0.8:compile \r\n    [INFO] |  |  +- net.razorvine:pyrolite:jar:4.30:compile \r\n    [INFO] |  |  +- net.sf.py4j:py4j:jar:0.10.9:compile \r\n    [INFO] |  |  \\- org.apache.commons:commons-crypto:jar:1.1.0:compile \r\n    [INFO] |  +- org.apache.spark:spark-catalyst_2.12:jar:3.1.1:compile \r\n    [INFO] |  |  +- org.scala-lang.modules:scala-parser-combinators_2.12:jar:1.1.2:compile [INFO] |  |  +- org.antlr:antlr4-runtime:jar:4.8-1:compile \r\n    [INFO] |  |    +- commons-codec:commons-codec:jar:1.10:compile \r\n    [INFO] |  |  +- org.apache.arrow:arrow-vector:jar:2.0.0:compile \r\n    [INFO] |  |  |  +- org.apache.arrow:arrow-format:jar:2.0.0:compile \r\n    [INFO] |  |  |  +- org.apache.arrow:arrow-memory-core:jar:2.0.0:compile \r\n    [INFO] |  |  |  \\- com.google.flatbuffers:flatbuffers-java:jar:1.9.0:compile \r\n    [INFO] |  |  \\- org.apache.arrow:arrow-memory-netty:jar:2.0.0:compile \r\n    [INFO] |     +- org.apache.spark:spark-tags_2.12:jar:3.1.1:compile \r\n    [INFO] |  +- org.apache.orc:orc-core:jar:1.5.12:compile \r\n    [INFO] |  |  +- org.apache.orc:orc-shims:jar:1.5.12:compile \r\n    [INFO] |  |  +- com.google.protobuf:protobuf-java:jar:2.5.0:compile \r\n    [INFO] |  |  +- commons-lang:commons-lang:jar:2.6:compile \r\n    [INFO] |  |  +- io.airlift:aircompressor:jar:0.10:compile \r\n    [INFO] |  |  \\- org.threeten:threeten-extra:jar:1.5.0:compile \r\n    [INFO] |  +- org.apache.orc:orc-mapreduce:jar:1.5.12:compile \r\n    [INFO] |  +- org.apache.hive:hive-storage-api:jar:2.7.2:compile \r\n    [INFO] |  +- org.apache.parquet:parquet-column:jar:1.10.1:compile \r\n    [INFO] |  |  +- org.apache.parquet:parquet-common:jar:1.10.1:compile \r\n    [INFO] |  |  \\- org.apache.parquet:parquet-encoding:jar:1.10.1:compile \r\n    [INFO] |  +- org.apache.parquet:parquet-hadoop:jar:1.10.1:compile \r\n    [INFO] |  |  +- org.apache.parquet:parquet-format:jar:2.4.0:compile \r\n    [INFO] |  |  +- org.apache.parquet:parquet-jackson:jar:1.10.1:compile \r\n    [INFO] |  |  +- org.codehaus.jackson:jackson-mapper-asl:jar:1.9.13:compile \r\n    [INFO] |  | \\- org.codehaus.jackson:jackson-core-asl:jar:1.9.13:compile \r\n    [INFO] |     +- org.apache.xbean:xbean-asm7-shaded:jar:4.15:compile \r\n    [INFO] |  \\- org.spark-project.spark:unused:jar:1.0.0:compile \r\n    [INFO] +- org.apache.spark:spark-sql-kafka-0-10_2.12:jar:3.1.1:compile \r\n    [INFO] |     +- org.apache.spark:spark-token-provider-kafka-0-10_2.12:jar:3.1.1:compile \r\n    [INFO] |  \\- org.apache.kafka:kafka-clients:jar:2.6.0:compile \r\n    [INFO]    +- org.apache.spark:spark-streaming_2.12:jar:3.1.1:compile \r\n    [INFO] |  \\- org.scala-lang:scala-library:jar:2.12.10:compile \r\n    [INFO] +- com.opencsv:opencsv:jar:4.1:compile \r\n    [INFO] |  +- org.apache.commons:commons-lang3:jar:3.5:compile \r\n    [INFO] |  +- org.apache.commons:commons-text:jar:1.1:compile \r\n    [INFO] |  \\- commons-beanutils:commons-beanutils:jar:1.9.3:compile \r\n    [INFO] |     \\- commons-collections:commons-collections:jar:3.2.2:compile \r\n    [INFO] +- com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:jar:2.12.3:compile [INFO] |  +- org.yaml:snakeyaml:jar:1.17:compile \r\n    [INFO] |  \\- com.fasterxml.jackson.core:jackson-core:jar:2.12.3:compile \r\n    [INFO] +- com.fasterxml.jackson.module:jackson-module-scala_2.12:jar:2.12.3:runtime \r\n    [INFO] |  +- com.fasterxml.jackson.core:jackson-annotations:jar:2.12.3:compile \r\n    [INFO] |  \\- com.thoughtworks.paranamer:paranamer:jar:2.8:compile \r\n    [INFO] +- com.fasterxml.jackson.core:jackson-databind:jar:2.12.3:compile \r\n    [INFO]    +- org.codehaus.janino:janino:jar:3.0.8:compile \r\n    [INFO] +- org.codehaus.janino:commons-compiler:jar:3.0.8:compile \r\n    [INFO] \\- org.apache.commons:commons-pool2:jar:2.9.0:compile \r\n    [INFO]    ------------------------------------------------------------------------ \r\n    [INFO] BUILD SUCCESS \r\n    [INFO]    ------------------------------------------------------------------------ \r\n    [INFO] Total time:  7.334 s [INFO] Finished at: 2021-06-02T09:19:26+02:00 \r\n    [INFO]    ------------------------------------------------------------------------\r\n\r\nThe error :\r\n\r\n    Error: Bad target:null\r\n    java.lang.reflect.InvocationTargetException\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat fr.cnp.kfk.streams.Application.main(Application.java:14)\r\n    Caused by: org.apache.spark.sql.streaming.StreamingQueryException: null\r\n\r\n    [...]\r\n    \r\n    \tat org.apache.spark.sql.execution.streaming.StreamExecution.org$apache$spark$sql$execution$streaming$StreamExecution$$runStream(StreamExecution.scala:354)\r\n    \tat org.apache.spark.sql.execution.streaming.StreamExecution$$anon$1.run(StreamExecution.scala:244)\r\n    Caused by: java.lang.ExceptionInInitializerError\r\n    \tat org.apache.spark.sql.execution.SparkPlan.executeQuery(SparkPlan.scala:215)\r\n    \tat org.apache.spark.sql.execution.SparkPlan.execute(SparkPlan.scala:176)\r\n    \tat org.apache.spark.sql.execution.datasources.v2.V2TableWriteExec.writeWithV2(WriteToDataSourceV2Exec.scala:338)\r\n    \tat org.apache.spark.sql.execution.datasources.v2.V2TableWriteExec.writeWithV2$(WriteToDataSourceV2Exec.scala:336)\r\n    \tat org.apache.spark.sql.execution.datasources.v2.WriteToDataSourceV2Exec.writeWithV2(WriteToDataSourceV2Exec.scala:297)\r\n    \tat org.apache.spark.sql.execution.datasources.v2.WriteToDataSourceV2Exec.run(WriteToDataSourceV2Exec.scala:304)\r\n    \tat org.apache.spark.sql.execution.datasources.v2.V2CommandExec.result$lzycompute(V2CommandExec.scala:40)\r\n    \tat org.apache.spark.sql.execution.datasources.v2.V2CommandExec.result(V2CommandExec.scala:40)\r\n    \tat org.apache.spark.sql.execution.datasources.v2.V2CommandExec.executeCollect(V2CommandExec.scala:46)\r\n    \tat org.apache.spark.sql.Dataset.collectFromPlan(Dataset.scala:3696)\r\n    \tat org.apache.spark.sql.Dataset.$anonfun$collect$1(Dataset.scala:2965)\r\n    \tat org.apache.spark.sql.Dataset.$anonfun$withAction$1(Dataset.scala:3687)\r\n    \tat org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$5(SQLExecution.scala:103)\r\n    \tat org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:163)\r\n    \tat org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$1(SQLExecution.scala:90)\r\n    \tat org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:772)\r\n    \tat org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:64)\r\n    \tat org.apache.spark.sql.Dataset.withAction(Dataset.scala:3685)\r\n    \tat org.apache.spark.sql.Dataset.collect(Dataset.scala:2965)\r\n    \tat org.apache.spark.sql.execution.streaming.MicroBatchExecution.$anonfun$runBatch$16(MicroBatchExecution.scala:589)\r\n    \tat org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$5(SQLExecution.scala:103)\r\n    \tat org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:163)\r\n    \tat org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$1(SQLExecution.scala:90)\r\n    \tat org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:772)\r\n    \tat org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:64)\r\n    \tat org.apache.spark.sql.execution.streaming.MicroBatchExecution.$anonfun$runBatch$15(MicroBatchExecution.scala:584)\r\n    \tat org.apache.spark.sql.execution.streaming.ProgressReporter.reportTimeTaken(ProgressReporter.scala:357)\r\n    \tat org.apache.spark.sql.execution.streaming.ProgressReporter.reportTimeTaken$(ProgressReporter.scala:355)\r\n    \tat org.apache.spark.sql.execution.streaming.StreamExecution.reportTimeTaken(StreamExecution.scala:68)\r\n    \tat org.apache.spark.sql.execution.streaming.MicroBatchExecution.runBatch(MicroBatchExecution.scala:584)\r\n    \tat org.apache.spark.sql.execution.streaming.MicroBatchExecution.$anonfun$runActivatedStream$2(MicroBatchExecution.scala:226)\r\n    \tat scala.runtime.java8.JFunction0$mcV$sp.apply(JFunction0$mcV$sp.java:23)\r\n    \tat org.apache.spark.sql.execution.streaming.ProgressReporter.reportTimeTaken(ProgressReporter.scala:357)\r\n    \tat org.apache.spark.sql.execution.streaming.ProgressReporter.reportTimeTaken$(ProgressReporter.scala:355)\r\n    \tat org.apache.spark.sql.execution.streaming.StreamExecution.reportTimeTaken(StreamExecution.scala:68)\r\n    \tat org.apache.spark.sql.execution.streaming.MicroBatchExecution.$anonfun$runActivatedStream$1(MicroBatchExecution.scala:194)\r\n    \tat org.apache.spark.sql.execution.streaming.ProcessingTimeExecutor.execute(TriggerExecutor.scala:57)\r\n    \tat org.apache.spark.sql.execution.streaming.MicroBatchExecution.runActivatedStream(MicroBatchExecution.scala:188)\r\n    \tat org.apache.spark.sql.execution.streaming.StreamExecution.org$apache$spark$sql$execution$streaming$StreamExecution$$runStream(StreamExecution.scala:333)\r\n    \t... 1 more\r\n    Caused by: com.fasterxml.jackson.databind.JsonMappingException: Scala module 2.10.5 requires Jackson Databind version &gt;= 2.10.0 and &lt; 2.11.0\r\n    \tat com.fasterxml.jackson.module.scala.JacksonModule.setupModule(JacksonModule.scala:61)\r\n    \tat com.fasterxml.jackson.module.scala.JacksonModule.setupModule$(JacksonModule.scala:46)\r\n    \tat com.fasterxml.jackson.module.scala.DefaultScalaModule.setupModule(DefaultScalaModule.scala:17)\r\n    \tat com.fasterxml.jackson.databind.ObjectMapper.registerModule(ObjectMapper.java:747)\r\n    \tat org.apache.spark.rdd.RDDOperationScope$.&lt;init&gt;(RDDOperationScope.scala:82)\r\n    \tat org.apache.spark.rdd.RDDOperationScope$.&lt;clinit&gt;(RDDOperationScope.scala)\r\n    \t... 40 more","title":"Scala module 2.12.3 requires Jackson Databind version &gt;= 2.12.0 and &lt; 2.13.0 but I have databind 2.12.3","body":"<p>Allen D.Ball, my answer is too long for comment. So,\npom.xml :</p>\n<p>\n4.0.0</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;fr.cnp.kfk&lt;/groupId&gt;\n    &lt;artifactId&gt;jee&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;/parent&gt;\n\n&lt;artifactId&gt;kfk-spark-structured-streams&lt;/artifactId&gt;\n&lt;packaging&gt;jar&lt;/packaging&gt;\n\n&lt;name&gt;Spark Structured Streams&lt;/name&gt;\n\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;spark.version&gt;3.1.1&lt;/spark.version&gt;\n    &lt;slf4j.version&gt;1.7.7&lt;/slf4j.version&gt;\n    &lt;log4j.version&gt;1.2.17&lt;/log4j.version&gt;\n    &lt;scala.version&gt;2.12&lt;/scala.version&gt;\n    &lt;jackson-bom.version&gt;2.12.3&lt;/jackson-bom.version&gt;\n&lt;/properties&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;shade&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;artifactSet&gt;\n                            &lt;excludes&gt;\n                                &lt;exclude&gt;org.apache.flink:force-shading&lt;/exclude&gt;\n                                &lt;exclude&gt;com.google.code.findbugs:jsr305&lt;/exclude&gt;\n                            &lt;/excludes&gt;\n                        &lt;/artifactSet&gt;\n                        &lt;filters&gt;\n                            &lt;filter&gt;\n                                &lt;artifact&gt;*:*&lt;/artifact&gt;\n                                &lt;excludes&gt;\n                                    &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n                                    &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n                                    &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n                                &lt;/excludes&gt;\n                            &lt;/filter&gt;\n                        &lt;/filters&gt;\n                        &lt;transformers&gt;\n                            &lt;transformer\n                                implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                                &lt;mainClass&gt;fr.cnp.kfk.streams.Application&lt;/mainClass&gt;\n                            &lt;/transformer&gt;\n                        &lt;/transformers&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n\n    &lt;pluginManagement&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                    &lt;compilerId&gt;jdt&lt;/compilerId&gt;\n                &lt;/configuration&gt;\n                &lt;dependencies&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.eclipse.tycho&lt;/groupId&gt;\n                        &lt;artifactId&gt;tycho-compiler-jdt&lt;/artifactId&gt;\n                        &lt;version&gt;0.21.0&lt;/version&gt;\n                    &lt;/dependency&gt;\n                &lt;/dependencies&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.eclipse.m2e&lt;/groupId&gt;\n                &lt;artifactId&gt;lifecycle-mapping&lt;/artifactId&gt;\n                &lt;version&gt;1.0.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;lifecycleMappingMetadata&gt;\n                        &lt;pluginExecutions&gt;\n                            &lt;pluginExecution&gt;\n                                &lt;pluginExecutionFilter&gt;\n                                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                                    &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n                                    &lt;versionRange&gt;[2.4,)&lt;/versionRange&gt;\n                                    &lt;goals&gt;\n                                        &lt;goal&gt;single&lt;/goal&gt;\n                                    &lt;/goals&gt;\n                                &lt;/pluginExecutionFilter&gt;\n                                &lt;action&gt;\n                                    &lt;ignore /&gt;\n                                &lt;/action&gt;\n                            &lt;/pluginExecution&gt;\n                            &lt;pluginExecution&gt;\n                                &lt;pluginExecutionFilter&gt;\n                                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                                    &lt;versionRange&gt;[3.1,)&lt;/versionRange&gt;\n                                    &lt;goals&gt;\n                                        &lt;goal&gt;testCompile&lt;/goal&gt;\n                                        &lt;goal&gt;compile&lt;/goal&gt;\n                                    &lt;/goals&gt;\n                                &lt;/pluginExecutionFilter&gt;\n                                &lt;action&gt;\n                                    &lt;ignore /&gt;\n                                &lt;/action&gt;\n                            &lt;/pluginExecution&gt;\n                        &lt;/pluginExecutions&gt;\n                    &lt;/lifecycleMappingMetadata&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n&lt;/build&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;fr.cnp.kfk&lt;/groupId&gt;\n        &lt;artifactId&gt;kfk-commons&lt;/artifactId&gt;\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n        &lt;artifactId&gt;spark-sql_${scala.version}&lt;/artifactId&gt;\n        &lt;version&gt;${spark.version}&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\n                &lt;artifactId&gt;janino&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\n                &lt;artifactId&gt;commons-compiler&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n        &lt;artifactId&gt;spark-sql-kafka-0-10_2.12&lt;/artifactId&gt;\n        &lt;version&gt;3.1.1&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n                &lt;artifactId&gt;commons-pool2&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n        &lt;artifactId&gt;spark-streaming_${scala.version}&lt;/artifactId&gt;\n        &lt;version&gt;${spark.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.opencsv&lt;/groupId&gt;\n        &lt;artifactId&gt;opencsv&lt;/artifactId&gt;\n        &lt;version&gt;4.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-dataformat-yaml&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-module-scala_${scala.version}&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Dpendences pour RecksDB --&gt;\n    &lt;!-- &lt;dependency&gt; &lt;groupId&gt;org.apache.flink&lt;/groupId&gt; &lt;artifactId&gt;flink-statebackend-rocksdb_2.12&lt;/artifactId&gt; \n        &lt;version&gt;${flink.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; --&gt;\n\n    &lt;dependency&gt;\n        &lt;artifactId&gt;janino&lt;/artifactId&gt;\n        &lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\n        &lt;version&gt;3.0.8&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;artifactId&gt;commons-compiler&lt;/artifactId&gt;\n        &lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\n        &lt;version&gt;3.0.8&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-pool2&lt;/artifactId&gt;\n        &lt;version&gt;2.9.0&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-bom&lt;/artifactId&gt;\n            &lt;version&gt;${jackson-bom.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n</code></pre>\n\n<p>dependency.tree :</p>\n<pre><code>[INFO] --- maven-dependency-plugin:3.0.2:tree (default-cli) @ kfk-spark-structured-streams --- \n[INFO] fr.cnp.kfk:kfk-spark-structured-streams:jar:0.0.1-SNAPSHOT \n[INFO] +- fr.cnp.kfk:kfk-commons:jar:0.0.1-SNAPSHOT:compile \n[INFO] +- org.apache.spark:spark-sql_2.12:jar:3.1.1:compile \n[INFO] |  +- com.univocity:univocity-parsers:jar:2.9.1:compile \n[INFO] |  +- org.apache.spark:spark-sketch_2.12:jar:3.1.1:compile \n[INFO] |  +- org.apache.spark:spark-core_2.12:jar:3.1.1:compile \n[INFO] |  |  +- org.apache.avro:avro:jar:1.8.2:compile \n[INFO] |  |  |  +- org.apache.commons:commons-compress:jar:1.8.1:compile \n[INFO] |  |  |  \\- org.tukaani:xz:jar:1.5:compile \n[INFO] |  |  +- org.apache.avro:avro-mapred:jar:hadoop2:1.8.2:compile \n[INFO] |  |  |  \\- org.apache.avro:avro-ipc:jar:1.8.2:compile \n[INFO] |  |  +- com.twitter:chill_2.12:jar:0.9.5:compile \n[INFO] |  |  |  \\- com.esotericsoftware:kryo-shaded:jar:4.0.2:compile \n[INFO] |  |  |        +- com.esotericsoftware:minlog:jar:1.3.0:compile \n[INFO] |  |  |     \\- org.objenesis:objenesis:jar:2.6:compile \n[INFO] |  |  +- com.twitter:chill-java:jar:0.9.5:compile \n[INFO] |  |  +- org.apache.hadoop:hadoop-client:jar:3.2.0:compile \n[INFO] |  |  |  +- org.apache.hadoop:hadoop-common:jar:3.2.0:compile \n[INFO] |  |  |  |     +- com.google.guava:guava:jar:23.0:compile \n[INFO] |  |  |  |  |  +- com.google.errorprone:error_prone_annotations:jar:2.0.18:compile\n[INFO] |  |  |  |  |  +- com.google.j2objc:j2objc-annotations:jar:1.1:compile \n[INFO] |  |  |  | |  \\- org.codehaus.mojo:animal-sniffer-annotations:jar:1.14:compile [INFO] |  |  |  |  +- commons-cli:commons-cli:jar:1.3.1:compile \n[INFO] |  |  |  |  +- org.apache.httpcomponents:httpclient:jar:4.5.5:compile \n[INFO] |  |  |  |  |  \\- org.apache.httpcomponents:httpcore:jar:4.4.9:compile \n[INFO] |  |  |  |    +- commons-io:commons-io:jar:2.5:compile \n[INFO] |  |  |  |  +- org.eclipse.jetty:jetty-servlet:jar:9.4.8.v20171121:compile \n[INFO] |  |  |  |  +- javax.servlet.jsp:jsp-api:jar:2.2:provided \n[INFO] |  |  |  |  +- org.apache.commons:commons-configuration2:jar:2.1.1:compile \n[INFO] |  |  |  |  +- com.google.re2j:re2j:jar:1.1:compile \n[INFO] |  | |  |  +- com.google.code.gson:gson:jar:2.8.2:compile \n[INFO] |  |  |  |    +- org.apache.hadoop:hadoop-auth:jar:3.2.0:compile \n[INFO] |  |  |  |  |  +- com.nimbusds:nimbus-jose-jwt:jar:4.41.1:compile \n[INFO] |  |  |  |  |  |  \\- com.github.stephenc.jcip:jcip-annotations:jar:1.0-1:compile [INFO] |  |  |  |  |  \\- net.minidev:json-smart:jar:2.3:compile \n[INFO] |  |  |  |  |     \\- net.minidev:accessors-smart:jar:1.2:compile \n[INFO] |  |  | |  +- org.apache.curator:curator-client:jar:2.12.0:compile \n[INFO] |  | |  |  +- org.apache.htrace:htrace-core4:jar:4.1.0-incubating:compile \n[INFO] |  |  |  |  +- org.apache.kerby:kerb-simplekdc:jar:1.0.1:compile \n[INFO] |  |  |  |  |    +- org.apache.kerby:kerb-client:jar:1.0.1:compile \n[INFO] |  |  |  |  |  |  +- org.apache.kerby:kerby-config:jar:1.0.1:compile \n[INFO] |  |  |  |  |  |  +- org.apache.kerby:kerb-core:jar:1.0.1:compile \n[INFO] |  |  |  |  |  |  |  \\- org.apache.kerby:kerby-pkix:jar:1.0.1:compile \n[INFO] |  |  |  |  |  |  |     +- org.apache.kerby:kerby-asn1:jar:1.0.1:compile \n[INFO] |  |  |  |  |  |  |     \\- org.apache.kerby:kerby-util:jar:1.0.1:compile \n[INFO] |  |  |  |  |  |  +- org.apache.kerby:kerb-common:jar:1.0.1:compile \n[INFO] |  | |  |  |  |  |  \\- org.apache.kerby:kerb-crypto:jar:1.0.1:compile \n[INFO] |  |  |  |  |  |  +- org.apache.kerby:kerb-util:jar:1.0.1:compile \n[INFO] |  |  |  |  |  |  \\- org.apache.kerby:token-provider:jar:1.0.1:compile \n[INFO] |  |  |  | |  \\- org.apache.kerby:kerb-admin:jar:1.0.1:compile \n[INFO] |  |  |  |  |     +- org.apache.kerby:kerb-server:jar:1.0.1:compile \n[INFO] |  |  | |  |     |  \\- org.apache.kerby:kerb-identity:jar:1.0.1:compile \n[INFO] |  |  |  |  |     \\- org.apache.kerby:kerby-xdr:jar:1.0.1:compile \n[INFO] |  |  |  |  +- org.codehaus.woodstox:stax2-api:jar:3.1.4:compile \n[INFO] |  |  |  |     +- com.fasterxml.woodstox:woodstox-core:jar:5.0.3:compile \n[INFO] |  |  |  |  \\- dnsjava:dnsjava:jar:2.1.7:compile \n[INFO] |  |  |  +- org.apache.hadoop:hadoop-hdfs-client:jar:3.2.0:compile \n[INFO] |  |  |  |  \\- com.squareup.okhttp:okhttp:jar:2.7.5:compile \n[INFO] |  |  |  |   \\- com.squareup.okio:okio:jar:1.6.0:compile \n[INFO] |  |  |  +- org.apache.hadoop:hadoop-yarn-api:jar:3.2.0:compile \n[INFO] |  |  |  |  \\- javax.xml.bind:jaxb-api:jar:2.3.0:provided \n[INFO] |  |  |  +- org.apache.hadoop:hadoop-yarn-client:jar:3.2.0:compile \n[INFO] |  |  |     +- org.apache.hadoop:hadoop-mapreduce-client-core:jar:3.2.0:compile \n[INFO] |  |  |  |  \\- org.apache.hadoop:hadoop-yarn-common:jar:3.2.0:compile \n[INFO] |  |  |  |     +- com.fasterxml.jackson.module:jackson-module-jaxb-annotations:jar:2.12.3:compile \n[INFO] |  |  |  |     |  +- jakarta.xml.bind:jakarta.xml.bind-api:jar:2.3.2:compile \n[INFO] |  |  | |     |  \\- jakarta.activation:jakarta.activation-api:jar:1.2.1:compile [INFO] |  |  |  |     \\- com.fasterxml.jackson.jaxrs:jackson-jaxrs-json-provider:jar:2.12.3:compile \n[INFO] |  |  |  |        \\- com.fasterxml.jackson.jaxrs:jackson-jaxrs-base:jar:2.12.3:compile \n[INFO] |  |  |  +- org.apache.hadoop:hadoop-mapreduce-client-jobclient:jar:3.2.0:compile [INFO] |  |  |  |  \\- org.apache.hadoop:hadoop-mapreduce-client-common:jar:3.2.0:compile [INFO] |  |  |  \\- org.apache.hadoop:hadoop-annotations:jar:3.2.0:compile \n[INFO] |  |  +- org.apache.spark:spark-launcher_2.12:jar:3.1.1:compile \n[INFO] |  |  +- org.apache.spark:spark-kvstore_2.12:jar:3.1.1:compile \n[INFO] |  |  |  \\- org.fusesource.leveldbjni:leveldbjni-all:jar:1.8:compile \n[INFO] |  |  +- org.apache.spark:spark-network-common_2.12:jar:3.1.1:compile \n[INFO] |  |  +- org.apache.spark:spark-network-shuffle_2.12:jar:3.1.1:compile \n[INFO] | |  +- org.apache.spark:spark-unsafe_2.12:jar:3.1.1:compile \n[INFO] |  |    +- javax.activation:activation:jar:1.1.1:provided \n[INFO] |  |  +- org.apache.curator:curator-recipes:jar:2.13.0:compile \n[INFO] |  |  |  \\- org.apache.curator:curator-framework:jar:2.13.0:compile \n[INFO] |  |    +- org.apache.zookeeper:zookeeper:jar:3.4.14:compile \n[INFO] |  |  |  \\- org.apache.yetus:audience-annotations:jar:0.5.0:compile \n[INFO] |  |    +- jakarta.servlet:jakarta.servlet-api:jar:4.0.3:compile \n[INFO] |  |  +- org.apache.commons:commons-math3:jar:3.4.1:compile \n[INFO] |  |  +- com.google.code.findbugs:jsr305:jar:3.0.0:compile \n[INFO] |  |  +- org.slf4j:slf4j-api:jar:1.7.25:compile \n[INFO] |  |  +- org.slf4j:jul-to-slf4j:jar:1.7.25:compile \n[INFO] |  |  +- org.slf4j:jcl-over-slf4j:jar:1.7.25:compile \n[INFO] |  |  +- log4j:log4j:jar:1.2.17:compile \n[INFO] |  |  +- org.slf4j:slf4j-log4j12:jar:1.7.25:compile \n[INFO] |  |  +- com.ning:compress-lzf:jar:1.0.3:compile \n[INFO] |  |  +- org.xerial.snappy:snappy-java:jar:1.1.8.2:compile \n[INFO] |  |  +- org.lz4:lz4-java:jar:1.7.1:compile \n[INFO] |  |  +- com.github.luben:zstd-jni:jar:1.4.8-1:compile \n[INFO] |  |  +- org.roaringbitmap:RoaringBitmap:jar:0.9.0:compile \n[INFO] |  |  |  \\- org.roaringbitmap:shims:jar:0.9.0:runtime \n[INFO] |  |  +- commons-net:commons-net:jar:3.1:compile \n[INFO] |  |  +- org.scala-lang.modules:scala-xml_2.12:jar:1.2.0:compile \n[INFO] |  |     +- org.scala-lang:scala-reflect:jar:2.12.10:compile \n[INFO] |  |  +- org.json4s:json4s-jackson_2.12:jar:3.7.0-M5:compile \n[INFO] |  |  |  \\- org.json4s:json4s-core_2.12:jar:3.7.0-M5:compile \n[INFO] |  |  |     +- org.json4s:json4s-ast_2.12:jar:3.7.0-M5:compile \n[INFO] |  |  |     \\- org.json4s:json4s-scalap_2.12:jar:3.7.0-M5:compile \n[INFO] |  |  +- org.glassfish.jersey.core:jersey-client:jar:2.25.1:compile \n[INFO] |  | |  +- javax.ws.rs:javax.ws.rs-api:jar:2.1:provided \n[INFO] |  |  |  +- org.glassfish.hk2:hk2-api:jar:2.5.0-b32:compile \n[INFO] |  |  |  |  +- org.glassfish.hk2:hk2-utils:jar:2.5.0-b32:compile \n[INFO] |  |  |  |  \\- org.glassfish.hk2.external:aopalliance-repackaged:jar:2.5.0-b32:compile \n[INFO] |  |  |  +- org.glassfish.hk2.external:javax.inject:jar:2.5.0-b32:compile \n[INFO] | |  |  \\- org.glassfish.hk2:hk2-locator:jar:2.5.0-b32:compile \n[INFO] |  |  +- org.glassfish.jersey.core:jersey-common:jar:2.25.1:compile \n[INFO] |  |  |  +- javax.annotation:javax.annotation-api:jar:1.2:compile \n[INFO] |  |  |     +- org.glassfish.jersey.bundles.repackaged:jersey-guava:jar:2.25.1:compile \n[INFO] |  |  |  \\- org.glassfish.hk2:osgi-resource-locator:jar:1.0.1:compile \n[INFO] |  |     +- org.glassfish.jersey.core:jersey-server:jar:2.25.1:compile\n[INFO] |  |  |  +- org.glassfish.jersey.media:jersey-media-jaxb:jar:2.25.1:compile \n[INFO] |  |  |  \\- javax.validation:validation-api:jar:1.1.0.Final:compile \n[INFO] |  |  +- org.glassfish.jersey.containers:jersey-container-servlet:jar:2.25.1:compile \n[INFO] |  |  +- org.glassfish.jersey.containers:jersey-container-servlet-core:jar:2.25.1:compile \n[INFO] |  |  +- org.glassfish.jersey.inject:jersey-hk2:jar:2.30:compile \n[INFO] |  |  | \\- org.javassist:javassist:jar:3.21.0-GA:compile \n[INFO] |  |  +- io.netty:netty-all:jar:4.1.51.Final:compile \n[INFO] |  |  +- com.clearspring.analytics:stream:jar:2.9.6:compile \n[INFO] |  |  +- io.dropwizard.metrics:metrics-core:jar:3.1.5:compile \n[INFO] |  |  +- io.dropwizard.metrics:metrics-jvm:jar:3.1.5:compile \n[INFO] |  |  +- io.dropwizard.metrics:metrics-json:jar:3.1.5:compile \n[INFO] |  |  +- io.dropwizard.metrics:metrics-graphite:jar:3.1.5:compile \n[INFO] |  |     +- io.dropwizard.metrics:metrics-jmx:jar:4.1.1:compile \n[INFO] |  |  +- org.apache.ivy:ivy:jar:2.4.0:compile \n[INFO] |  |  +- oro:oro:jar:2.0.8:compile \n[INFO] |  |  +- net.razorvine:pyrolite:jar:4.30:compile \n[INFO] |  |  +- net.sf.py4j:py4j:jar:0.10.9:compile \n[INFO] |  |  \\- org.apache.commons:commons-crypto:jar:1.1.0:compile \n[INFO] |  +- org.apache.spark:spark-catalyst_2.12:jar:3.1.1:compile \n[INFO] |  |  +- org.scala-lang.modules:scala-parser-combinators_2.12:jar:1.1.2:compile [INFO] |  |  +- org.antlr:antlr4-runtime:jar:4.8-1:compile \n[INFO] |  |    +- commons-codec:commons-codec:jar:1.10:compile \n[INFO] |  |  +- org.apache.arrow:arrow-vector:jar:2.0.0:compile \n[INFO] |  |  |  +- org.apache.arrow:arrow-format:jar:2.0.0:compile \n[INFO] |  |  |  +- org.apache.arrow:arrow-memory-core:jar:2.0.0:compile \n[INFO] |  |  |  \\- com.google.flatbuffers:flatbuffers-java:jar:1.9.0:compile \n[INFO] |  |  \\- org.apache.arrow:arrow-memory-netty:jar:2.0.0:compile \n[INFO] |     +- org.apache.spark:spark-tags_2.12:jar:3.1.1:compile \n[INFO] |  +- org.apache.orc:orc-core:jar:1.5.12:compile \n[INFO] |  |  +- org.apache.orc:orc-shims:jar:1.5.12:compile \n[INFO] |  |  +- com.google.protobuf:protobuf-java:jar:2.5.0:compile \n[INFO] |  |  +- commons-lang:commons-lang:jar:2.6:compile \n[INFO] |  |  +- io.airlift:aircompressor:jar:0.10:compile \n[INFO] |  |  \\- org.threeten:threeten-extra:jar:1.5.0:compile \n[INFO] |  +- org.apache.orc:orc-mapreduce:jar:1.5.12:compile \n[INFO] |  +- org.apache.hive:hive-storage-api:jar:2.7.2:compile \n[INFO] |  +- org.apache.parquet:parquet-column:jar:1.10.1:compile \n[INFO] |  |  +- org.apache.parquet:parquet-common:jar:1.10.1:compile \n[INFO] |  |  \\- org.apache.parquet:parquet-encoding:jar:1.10.1:compile \n[INFO] |  +- org.apache.parquet:parquet-hadoop:jar:1.10.1:compile \n[INFO] |  |  +- org.apache.parquet:parquet-format:jar:2.4.0:compile \n[INFO] |  |  +- org.apache.parquet:parquet-jackson:jar:1.10.1:compile \n[INFO] |  |  +- org.codehaus.jackson:jackson-mapper-asl:jar:1.9.13:compile \n[INFO] |  | \\- org.codehaus.jackson:jackson-core-asl:jar:1.9.13:compile \n[INFO] |     +- org.apache.xbean:xbean-asm7-shaded:jar:4.15:compile \n[INFO] |  \\- org.spark-project.spark:unused:jar:1.0.0:compile \n[INFO] +- org.apache.spark:spark-sql-kafka-0-10_2.12:jar:3.1.1:compile \n[INFO] |     +- org.apache.spark:spark-token-provider-kafka-0-10_2.12:jar:3.1.1:compile \n[INFO] |  \\- org.apache.kafka:kafka-clients:jar:2.6.0:compile \n[INFO]    +- org.apache.spark:spark-streaming_2.12:jar:3.1.1:compile \n[INFO] |  \\- org.scala-lang:scala-library:jar:2.12.10:compile \n[INFO] +- com.opencsv:opencsv:jar:4.1:compile \n[INFO] |  +- org.apache.commons:commons-lang3:jar:3.5:compile \n[INFO] |  +- org.apache.commons:commons-text:jar:1.1:compile \n[INFO] |  \\- commons-beanutils:commons-beanutils:jar:1.9.3:compile \n[INFO] |     \\- commons-collections:commons-collections:jar:3.2.2:compile \n[INFO] +- com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:jar:2.12.3:compile [INFO] |  +- org.yaml:snakeyaml:jar:1.17:compile \n[INFO] |  \\- com.fasterxml.jackson.core:jackson-core:jar:2.12.3:compile \n[INFO] +- com.fasterxml.jackson.module:jackson-module-scala_2.12:jar:2.12.3:runtime \n[INFO] |  +- com.fasterxml.jackson.core:jackson-annotations:jar:2.12.3:compile \n[INFO] |  \\- com.thoughtworks.paranamer:paranamer:jar:2.8:compile \n[INFO] +- com.fasterxml.jackson.core:jackson-databind:jar:2.12.3:compile \n[INFO]    +- org.codehaus.janino:janino:jar:3.0.8:compile \n[INFO] +- org.codehaus.janino:commons-compiler:jar:3.0.8:compile \n[INFO] \\- org.apache.commons:commons-pool2:jar:2.9.0:compile \n[INFO]    ------------------------------------------------------------------------ \n[INFO] BUILD SUCCESS \n[INFO]    ------------------------------------------------------------------------ \n[INFO] Total time:  7.334 s [INFO] Finished at: 2021-06-02T09:19:26+02:00 \n[INFO]    ------------------------------------------------------------------------\n</code></pre>\n<p>The error :</p>\n<pre><code>Error: Bad target:null\njava.lang.reflect.InvocationTargetException\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at fr.cnp.kfk.streams.Application.main(Application.java:14)\nCaused by: org.apache.spark.sql.streaming.StreamingQueryException: null\n\n[...]\n\n    at org.apache.spark.sql.execution.streaming.StreamExecution.org$apache$spark$sql$execution$streaming$StreamExecution$$runStream(StreamExecution.scala:354)\n    at org.apache.spark.sql.execution.streaming.StreamExecution$$anon$1.run(StreamExecution.scala:244)\nCaused by: java.lang.ExceptionInInitializerError\n    at org.apache.spark.sql.execution.SparkPlan.executeQuery(SparkPlan.scala:215)\n    at org.apache.spark.sql.execution.SparkPlan.execute(SparkPlan.scala:176)\n    at org.apache.spark.sql.execution.datasources.v2.V2TableWriteExec.writeWithV2(WriteToDataSourceV2Exec.scala:338)\n    at org.apache.spark.sql.execution.datasources.v2.V2TableWriteExec.writeWithV2$(WriteToDataSourceV2Exec.scala:336)\n    at org.apache.spark.sql.execution.datasources.v2.WriteToDataSourceV2Exec.writeWithV2(WriteToDataSourceV2Exec.scala:297)\n    at org.apache.spark.sql.execution.datasources.v2.WriteToDataSourceV2Exec.run(WriteToDataSourceV2Exec.scala:304)\n    at org.apache.spark.sql.execution.datasources.v2.V2CommandExec.result$lzycompute(V2CommandExec.scala:40)\n    at org.apache.spark.sql.execution.datasources.v2.V2CommandExec.result(V2CommandExec.scala:40)\n    at org.apache.spark.sql.execution.datasources.v2.V2CommandExec.executeCollect(V2CommandExec.scala:46)\n    at org.apache.spark.sql.Dataset.collectFromPlan(Dataset.scala:3696)\n    at org.apache.spark.sql.Dataset.$anonfun$collect$1(Dataset.scala:2965)\n    at org.apache.spark.sql.Dataset.$anonfun$withAction$1(Dataset.scala:3687)\n    at org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$5(SQLExecution.scala:103)\n    at org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:163)\n    at org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$1(SQLExecution.scala:90)\n    at org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:772)\n    at org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:64)\n    at org.apache.spark.sql.Dataset.withAction(Dataset.scala:3685)\n    at org.apache.spark.sql.Dataset.collect(Dataset.scala:2965)\n    at org.apache.spark.sql.execution.streaming.MicroBatchExecution.$anonfun$runBatch$16(MicroBatchExecution.scala:589)\n    at org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$5(SQLExecution.scala:103)\n    at org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:163)\n    at org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$1(SQLExecution.scala:90)\n    at org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:772)\n    at org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:64)\n    at org.apache.spark.sql.execution.streaming.MicroBatchExecution.$anonfun$runBatch$15(MicroBatchExecution.scala:584)\n    at org.apache.spark.sql.execution.streaming.ProgressReporter.reportTimeTaken(ProgressReporter.scala:357)\n    at org.apache.spark.sql.execution.streaming.ProgressReporter.reportTimeTaken$(ProgressReporter.scala:355)\n    at org.apache.spark.sql.execution.streaming.StreamExecution.reportTimeTaken(StreamExecution.scala:68)\n    at org.apache.spark.sql.execution.streaming.MicroBatchExecution.runBatch(MicroBatchExecution.scala:584)\n    at org.apache.spark.sql.execution.streaming.MicroBatchExecution.$anonfun$runActivatedStream$2(MicroBatchExecution.scala:226)\n    at scala.runtime.java8.JFunction0$mcV$sp.apply(JFunction0$mcV$sp.java:23)\n    at org.apache.spark.sql.execution.streaming.ProgressReporter.reportTimeTaken(ProgressReporter.scala:357)\n    at org.apache.spark.sql.execution.streaming.ProgressReporter.reportTimeTaken$(ProgressReporter.scala:355)\n    at org.apache.spark.sql.execution.streaming.StreamExecution.reportTimeTaken(StreamExecution.scala:68)\n    at org.apache.spark.sql.execution.streaming.MicroBatchExecution.$anonfun$runActivatedStream$1(MicroBatchExecution.scala:194)\n    at org.apache.spark.sql.execution.streaming.ProcessingTimeExecutor.execute(TriggerExecutor.scala:57)\n    at org.apache.spark.sql.execution.streaming.MicroBatchExecution.runActivatedStream(MicroBatchExecution.scala:188)\n    at org.apache.spark.sql.execution.streaming.StreamExecution.org$apache$spark$sql$execution$streaming$StreamExecution$$runStream(StreamExecution.scala:333)\n    ... 1 more\nCaused by: com.fasterxml.jackson.databind.JsonMappingException: Scala module 2.10.5 requires Jackson Databind version &gt;= 2.10.0 and &lt; 2.11.0\n    at com.fasterxml.jackson.module.scala.JacksonModule.setupModule(JacksonModule.scala:61)\n    at com.fasterxml.jackson.module.scala.JacksonModule.setupModule$(JacksonModule.scala:46)\n    at com.fasterxml.jackson.module.scala.DefaultScalaModule.setupModule(DefaultScalaModule.scala:17)\n    at com.fasterxml.jackson.databind.ObjectMapper.registerModule(ObjectMapper.java:747)\n    at org.apache.spark.rdd.RDDOperationScope$.&lt;init&gt;(RDDOperationScope.scala:82)\n    at org.apache.spark.rdd.RDDOperationScope$.&lt;clinit&gt;(RDDOperationScope.scala)\n    ... 40 more\n</code></pre>\n"}],"owner":{"account_id":21781141,"reputation":81,"user_id":16082828,"display_name":"Mathieu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18457,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":2,"score":8,"last_activity_date":1695232895,"creation_date":1622446038,"question_id":67769492,"body_markdown":"For a project, I&#39;m using spark structured streaming with kafka.\r\n\r\nI have this conf :\r\n\r\n\t\t&lt;spark.version&gt;3.1.1&lt;/spark.version&gt;\r\n\t\t&lt;slf4j.version&gt;1.7.7&lt;/slf4j.version&gt;\r\n\t\t&lt;log4j.version&gt;1.2.17&lt;/log4j.version&gt;\r\n\t\t&lt;scala.version&gt;2.12&lt;/scala.version&gt;\r\n\r\nBut when I run, I have this error :\r\n\r\nCaused by: com.fasterxml.jackson.databind.JsonMappingException: Scala module 2.12.3 requires Jackson Databind version &gt;= 2.12.0 and &lt; 2.13.0\r\n\r\nI&#39;m confused because I alrady import databind in 2.12.3.\r\nJust here, an extract of my pom.xml :\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-dataformat-yaml&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-module-scala_${scala.version}&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.12.3&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.12.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nthank you in advance for helping","title":"Scala module 2.12.3 requires Jackson Databind version &gt;= 2.12.0 and &lt; 2.13.0 but I have databind 2.12.3","body":"<p>For a project, I'm using spark structured streaming with kafka.</p>\n<p>I have this conf :</p>\n<pre><code>    &lt;spark.version&gt;3.1.1&lt;/spark.version&gt;\n    &lt;slf4j.version&gt;1.7.7&lt;/slf4j.version&gt;\n    &lt;log4j.version&gt;1.2.17&lt;/log4j.version&gt;\n    &lt;scala.version&gt;2.12&lt;/scala.version&gt;\n</code></pre>\n<p>But when I run, I have this error :</p>\n<p>Caused by: com.fasterxml.jackson.databind.JsonMappingException: Scala module 2.12.3 requires Jackson Databind version &gt;= 2.12.0 and &lt; 2.13.0</p>\n<p>I'm confused because I alrady import databind in 2.12.3.\nJust here, an extract of my pom.xml :</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-dataformat-yaml&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-module-scala_${scala.version}&lt;/artifactId&gt;\n        &lt;version&gt;2.12.3&lt;/version&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;version&gt;2.12.3&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>thank you in advance for helping</p>\n"},{"tags":["java","android","hashmap","linkedhashmap"],"comments":[{"owner":{"account_id":12975459,"reputation":1665,"user_id":9379617,"display_name":"Ben"},"score":1,"creation_date":1531134950,"post_id":51244219,"comment_id":89466900,"body_markdown":"Do you actually need the reversed `LinkedHashMap`? Wouldn&#39;t it be simpler to just iterate over it in reverse order where needed?","body":"Do you actually need the reversed <code>LinkedHashMap</code>? Wouldn&#39;t it be simpler to just iterate over it in reverse order where needed?"},{"owner":{"account_id":1710326,"reputation":10640,"user_id":1568530,"accept_rate":60,"display_name":"Vladyslav Matviienko"},"score":2,"creation_date":1531135171,"post_id":51244219,"comment_id":89467021,"body_markdown":"Any map is non-ordered structure. You can&#39;t expect **any** order from the map. It&#39;s only purpose is to store key-value pairs. The order of keys in a set can easily change in runtime, and you should never expect any order from the map","body":"Any map is non-ordered structure. You can&#39;t expect <b>any</b> order from the map. It&#39;s only purpose is to store key-value pairs. The order of keys in a set can easily change in runtime, and you should never expect any order from the map"},{"owner":{"account_id":12975459,"reputation":1665,"user_id":9379617,"display_name":"Ben"},"score":2,"creation_date":1531135251,"post_id":51244219,"comment_id":89467071,"body_markdown":"@VladyslavMatviienko well that&#39;s exactly why you use a `LinkedHashMap` which has a predictable iteration order...","body":"@VladyslavMatviienko well that&#39;s exactly why you use a <code>LinkedHashMap</code> which has a predictable iteration order..."},{"owner":{"account_id":6959911,"reputation":108,"user_id":7447629,"display_name":"Tiago Vitorino"},"score":0,"creation_date":1531135563,"post_id":51244219,"comment_id":89467260,"body_markdown":"@VladyslavMatviienko That&#39;s why I used a LinkedHasMap as Ben explained it","body":"@VladyslavMatviienko That&#39;s why I used a LinkedHasMap as Ben explained it"}],"answers":[{"tags":[],"owner":{"account_id":3801583,"reputation":523,"user_id":3155082,"display_name":"Jawad Zeb"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1531136575,"creation_date":1531135521,"answer_id":51244421,"question_id":51244219,"body_markdown":"Here Is My Own Written Logic for you. without using any built in functions to reverse:\r\n\r\n\r\n \r\n\r\n  \r\n\r\n     LinkedHashMap&lt;String, String&gt; map = new LinkedHashMap&lt;&gt;();\r\n        map.put(&quot;10/10/2010 10:10:10&quot;, &quot;SomeText1&quot;);\r\n        map.put(&quot;10/10/2019 10:10:19&quot;, &quot;SomeText2&quot;);\r\n        map.put(&quot;10/10/2020 10:10:20&quot;, &quot;SomeText3&quot;);\r\n        map.put(&quot;10/10/2021 10:10:21&quot;, &quot;SomeText4&quot;);\r\n    \r\n        LinkedHashMap&lt;String, String&gt; reversed = new LinkedHashMap&lt;&gt;();\r\n    \r\n        String[] keys = map.keySet().toArray(new String[map.size()]);\r\n    \r\n        for (int i = keys.length - 1; i &gt;= 0; i--) {\r\n            reversed.put(keys[i], map.get(keys[i]));\r\n        }\r\n\r\n\r\n","title":"Reverse order of LinkedHashMap to LinkedHashMap or ArrayList","body":"<p>Here Is My Own Written Logic for you. without using any built in functions to reverse:</p>\n\n<pre><code> LinkedHashMap&lt;String, String&gt; map = new LinkedHashMap&lt;&gt;();\n    map.put(\"10/10/2010 10:10:10\", \"SomeText1\");\n    map.put(\"10/10/2019 10:10:19\", \"SomeText2\");\n    map.put(\"10/10/2020 10:10:20\", \"SomeText3\");\n    map.put(\"10/10/2021 10:10:21\", \"SomeText4\");\n\n    LinkedHashMap&lt;String, String&gt; reversed = new LinkedHashMap&lt;&gt;();\n\n    String[] keys = map.keySet().toArray(new String[map.size()]);\n\n    for (int i = keys.length - 1; i &gt;= 0; i--) {\n        reversed.put(keys[i], map.get(keys[i]));\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1531136094,"creation_date":1531135926,"answer_id":51244564,"question_id":51244219,"body_markdown":"A LinkedHashMap orders by insertion; it would be more logical to sort on the associated date time:\r\n\r\n    private SortedMap&lt;LocalDateTime, String&gt; map = new TreeMap&lt;&gt;(Comparator.naturalOrder()\r\n                                                                           .reversed());\r\n\r\n    LocalDateTimeFormatter formatter = LocalDateTimeFormatter.ofPattern(&quot;MM/dd/uuuu HH:mm:ss&quot;);\r\n    map.put(LocalDateTime.parse(&quot;10/10/2010 10:10:10&quot;, formatter), &quot;...&quot;);\r\n\r\nTo specify that the map is sorted, there is the interface SortedMap. Better use an interface, which is more versatile. The implementation class for a sorted map is the TreeMap. However you want a reversed comparison.\r\n\r\nYou could use a Local specific pattern. Mind that above I chose Month/Day and not the British Day/Month.","title":"Reverse order of LinkedHashMap to LinkedHashMap or ArrayList","body":"<p>A LinkedHashMap orders by insertion; it would be more logical to sort on the associated date time:</p>\n\n<pre><code>private SortedMap&lt;LocalDateTime, String&gt; map = new TreeMap&lt;&gt;(Comparator.naturalOrder()\n                                                                       .reversed());\n\nLocalDateTimeFormatter formatter = LocalDateTimeFormatter.ofPattern(\"MM/dd/uuuu HH:mm:ss\");\nmap.put(LocalDateTime.parse(\"10/10/2010 10:10:10\", formatter), \"...\");\n</code></pre>\n\n<p>To specify that the map is sorted, there is the interface SortedMap. Better use an interface, which is more versatile. The implementation class for a sorted map is the TreeMap. However you want a reversed comparison.</p>\n\n<p>You could use a Local specific pattern. Mind that above I chose Month/Day and not the British Day/Month.</p>\n"},{"tags":[],"owner":{"account_id":12975459,"reputation":1665,"user_id":9379617,"display_name":"Ben"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531137057,"creation_date":1531136677,"answer_id":51244812,"question_id":51244219,"body_markdown":"If you want to keep using a `LinkedHashMap` reversing it while keeping it somewhat efficient is not as easy. This is a solution that reverses a given `LinkedHashMap` using the iterator order (which is predictable for a `LinkedHashMap` and therefore probably what you are looking for).\r\n\r\nNote that other solutions like using a `SortedMap` or a `TreeMap` are probably still better. Yet, for the sake of sticking to your original question, here is a solution:\r\n\r\n\tpublic static &lt;K, V&gt; LinkedHashMap&lt;K, V&gt; reverse(LinkedHashMap&lt;K, V&gt; map)\r\n\t{\r\n\t\tLinkedHashMap&lt;K, V&gt; reversedMap = new LinkedHashMap&lt;K, V&gt;();\r\n\t\t\r\n\t\tListIterator&lt;Entry&lt;K, V&gt;&gt; it = new ArrayList&lt;&gt;(map.entrySet()).listIterator(map.entrySet().size());\r\n\t\t\r\n\t\twhile (it.hasPrevious())\r\n\t\t{\r\n\t\t\tEntry&lt;K, V&gt; el = it.previous();\r\n\t\t\treversedMap.put(el.getKey(), el.getValue());\r\n\t\t}\r\n\t\t\r\n\t\treturn reversedMap;\r\n\t}\r\n\r\nNote that you won&#39;t get around wrapping the entry set into an `ArrayList` sadly as only that provides you with an `ListIterator` which can be initialized to any point other than the first element. Having something like a `reverseIterator()` method would simplify life a lot - sadly there is none available.\r\n\r\nComplexity wise you iterate the list twice with this approach, first for the `listIterator` call from start to the last element and then once more from the back to the front when using `previous`. So you are looking at **O(2n)** here.","title":"Reverse order of LinkedHashMap to LinkedHashMap or ArrayList","body":"<p>If you want to keep using a <code>LinkedHashMap</code> reversing it while keeping it somewhat efficient is not as easy. This is a solution that reverses a given <code>LinkedHashMap</code> using the iterator order (which is predictable for a <code>LinkedHashMap</code> and therefore probably what you are looking for).</p>\n\n<p>Note that other solutions like using a <code>SortedMap</code> or a <code>TreeMap</code> are probably still better. Yet, for the sake of sticking to your original question, here is a solution:</p>\n\n<pre><code>public static &lt;K, V&gt; LinkedHashMap&lt;K, V&gt; reverse(LinkedHashMap&lt;K, V&gt; map)\n{\n    LinkedHashMap&lt;K, V&gt; reversedMap = new LinkedHashMap&lt;K, V&gt;();\n\n    ListIterator&lt;Entry&lt;K, V&gt;&gt; it = new ArrayList&lt;&gt;(map.entrySet()).listIterator(map.entrySet().size());\n\n    while (it.hasPrevious())\n    {\n        Entry&lt;K, V&gt; el = it.previous();\n        reversedMap.put(el.getKey(), el.getValue());\n    }\n\n    return reversedMap;\n}\n</code></pre>\n\n<p>Note that you won't get around wrapping the entry set into an <code>ArrayList</code> sadly as only that provides you with an <code>ListIterator</code> which can be initialized to any point other than the first element. Having something like a <code>reverseIterator()</code> method would simplify life a lot - sadly there is none available.</p>\n\n<p>Complexity wise you iterate the list twice with this approach, first for the <code>listIterator</code> call from start to the last element and then once more from the back to the front when using <code>previous</code>. So you are looking at <strong>O(2n)</strong> here.</p>\n"},{"tags":[],"owner":{"account_id":13704384,"reputation":401,"user_id":9888491,"display_name":"vb.stack"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1531140745,"creation_date":1531140745,"answer_id":51246073,"question_id":51244219,"body_markdown":"If your motive is just to reverse the map ( show in descending order ) you can use \r\n**Java.util.TreeMap.descendingMap() :**  It returns a reverse order view of the mappings contained in the map`\r\n\r\n    LinkedHashMap&lt;String,String&gt; map = .... //this is your intial hashmap\r\n    TreeMap&lt;String,String&gt; tmap = new TreeMap&lt;&gt;(map);\r\n    map.clear();\r\n    map.putAll(tmap.descendingMap());\r\n\r\n*This will do the trick.*\r\n\r\n\r\n","title":"Reverse order of LinkedHashMap to LinkedHashMap or ArrayList","body":"<p>If your motive is just to reverse the map ( show in descending order ) you can use \n<strong>Java.util.TreeMap.descendingMap() :</strong>  It returns a reverse order view of the mappings contained in the map`</p>\n\n<pre><code>LinkedHashMap&lt;String,String&gt; map = .... //this is your intial hashmap\nTreeMap&lt;String,String&gt; tmap = new TreeMap&lt;&gt;(map);\nmap.clear();\nmap.putAll(tmap.descendingMap());\n</code></pre>\n\n<p><em>This will do the trick.</em></p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695232893,"creation_date":1683001785,"answer_id":76151732,"question_id":51244219,"body_markdown":"As of Java 21, the [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashMap.html#reversed()) method on `LinkedHashMap` can be used to a reversed view of the map.\r\n\r\n```lang-java\r\nLinkedHashMap&lt;String, String&gt; map = ...;\r\nLinkedHashMap&lt;String, String&gt; reversed = map.reversed();\r\n```\r\n\r\nThis reversed view will be a `SequencedMap`.  While it won&#39;t be a `LinkedHashMap`, it shares most characteristics with it (e.g. it is mutable, ordered, allows null).\r\n\r\nIf an `ArrayList` or `LinkedHashMap` are specifically needed, this reversed map can be converted to them in one of the many standard manners of converting a `Map` to one of those types.","title":"Reverse order of LinkedHashMap to LinkedHashMap or ArrayList","body":"<p>As of Java 21, the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashMap.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method on <code>LinkedHashMap</code> can be used to a reversed view of the map.</p>\n<pre class=\"lang-java prettyprint-override\"><code>LinkedHashMap&lt;String, String&gt; map = ...;\nLinkedHashMap&lt;String, String&gt; reversed = map.reversed();\n</code></pre>\n<p>This reversed view will be a <code>SequencedMap</code>.  While it won't be a <code>LinkedHashMap</code>, it shares most characteristics with it (e.g. it is mutable, ordered, allows null).</p>\n<p>If an <code>ArrayList</code> or <code>LinkedHashMap</code> are specifically needed, this reversed map can be converted to them in one of the many standard manners of converting a <code>Map</code> to one of those types.</p>\n"}],"owner":{"account_id":6959911,"reputation":108,"user_id":7447629,"display_name":"Tiago Vitorino"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4110,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":51244564,"answer_count":5,"score":2,"last_activity_date":1695232893,"creation_date":1531134845,"question_id":51244219,"body_markdown":"I have a `LinkedHashMap&lt;String,String&gt;` which looks something like this (don&#39;t really know how to illustrate a HashMap):\r\n\r\n    {\r\n      &quot;10/10/2010 10:10:10&quot; =&gt; &quot;SomeText1&quot;,\r\n      &quot;10/10/2019 10:10:19&quot; =&gt; &quot;SomeText2&quot;,\r\n      &quot;10/10/2020 10:10:20&quot; =&gt; &quot;SomeText3&quot;,\r\n      &quot;10/10/2021 10:10:21&quot; =&gt; &quot;SomeText4&quot;\r\n    }\r\n\r\nAnd I want to put it like this:\r\n\r\n    {\r\n      &quot;10/10/2021 10:10:21&quot; =&gt; &quot;SomeText4&quot;,\r\n      &quot;10/10/2020 10:10:20&quot; =&gt; &quot;SomeText3&quot;,\r\n      &quot;10/10/2019 10:10:19&quot; =&gt; &quot;SomeText2&quot;,\r\n      &quot;10/10/2010 10:10:10&quot; =&gt; &quot;SomeText1&quot;\r\n    }\r\nI have written this solution which works because the result I want is an ArrayList, but i was thinking if there was an easier way to reverse the LinkedHashMap maintaining the same type using a tool like **sort** for example.\r\n\r\n    private LinkedHashMap&lt;String, String&gt; map = new LinkedHashMap&lt;&gt;();\r\n    int sizeOfHashMap = map.size();\r\n    ArrayList reversedHashToArrayList = new ArrayList(map.size());\r\n       for (Map.Entry&lt;String,String&gt; entry : map.entrySet()) {\r\n       String key = entry.getKey();\r\n       String value = entry.getValue();\r\n    \r\n       reversedHashToArrayList.add(0,entry);\r\n    }\r\n\r\n","title":"Reverse order of LinkedHashMap to LinkedHashMap or ArrayList","body":"<p>I have a <code>LinkedHashMap&lt;String,String&gt;</code> which looks something like this (don't really know how to illustrate a HashMap):</p>\n\n<pre><code>{\n  \"10/10/2010 10:10:10\" =&gt; \"SomeText1\",\n  \"10/10/2019 10:10:19\" =&gt; \"SomeText2\",\n  \"10/10/2020 10:10:20\" =&gt; \"SomeText3\",\n  \"10/10/2021 10:10:21\" =&gt; \"SomeText4\"\n}\n</code></pre>\n\n<p>And I want to put it like this:</p>\n\n<pre><code>{\n  \"10/10/2021 10:10:21\" =&gt; \"SomeText4\",\n  \"10/10/2020 10:10:20\" =&gt; \"SomeText3\",\n  \"10/10/2019 10:10:19\" =&gt; \"SomeText2\",\n  \"10/10/2010 10:10:10\" =&gt; \"SomeText1\"\n}\n</code></pre>\n\n<p>I have written this solution which works because the result I want is an ArrayList, but i was thinking if there was an easier way to reverse the LinkedHashMap maintaining the same type using a tool like <strong>sort</strong> for example.</p>\n\n<pre><code>private LinkedHashMap&lt;String, String&gt; map = new LinkedHashMap&lt;&gt;();\nint sizeOfHashMap = map.size();\nArrayList reversedHashToArrayList = new ArrayList(map.size());\n   for (Map.Entry&lt;String,String&gt; entry : map.entrySet()) {\n   String key = entry.getKey();\n   String value = entry.getValue();\n\n   reversedHashToArrayList.add(0,entry);\n}\n</code></pre>\n"},{"tags":["java","hazelcast","payara"],"answers":[{"tags":[],"owner":{"account_id":29494088,"reputation":1,"user_id":22602542,"display_name":"raman77"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695232874,"creation_date":1695232874,"answer_id":77144960,"question_id":76927067,"body_markdown":"The same here with Payara 5.2022.5. JCache fails nearly all the time when requesting (more precisely, when performing then get opration of hazelcast). As of my research it, it was introduced into Payara when they switched to Hazelcast 4.2.* implementation after Payara 5.2021.2.","title":"Hazelcast and Payara 5 - Tries to close entityManager if hazelcast is used in a transactional context","body":"<p>The same here with Payara 5.2022.5. JCache fails nearly all the time when requesting (more precisely, when performing then get opration of hazelcast). As of my research it, it was introduced into Payara when they switched to Hazelcast 4.2.* implementation after Payara 5.2021.2.</p>\n"}],"owner":{"account_id":447540,"reputation":445,"user_id":841210,"accept_rate":33,"display_name":"drame"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1695232874,"creation_date":1692341849,"question_id":76927067,"body_markdown":"we are currently trying to use Hazelcast in our Jakarta EE 8 Application running on Payara 5.2022.x.\r\nWe have huge problems when trying to access IMap instances when using hazelcast in any method that is even remotely in a transactional context. \r\nThe problem seems to be that the Payara Tenant that is user in combination with Hazelcast tries to tear down everything after each and every access to the Hazelcast Map. \r\nThis fails nearly 100% of the time resulting in this Stack:\r\n\r\n ```\r\n  [2023-08-18T08:42:24.310+0200] [Payara 5.2022.2] [SCHWERWIEGEND] [] [com.hazelcast.spi.impl.operationexecutor.impl.OperationExecutorImpl] [tid: _ThreadID=72 _ThreadName=hz.priceless_meitner.partition-operation.thread-9] [timeMillis: 1692340944310] [levelValue: 1000] [[\r\n  [192.168.100.70]:4900 [development] [4.2] Failed to process: com.hazelcast.map.impl.operation.PutOperation{serviceName=&#39;hz:impl:mapService&#39;, identityHash=353117872, partitionId=105, replicaIndex=0, callId=-1914, invocationTime=1692340944309 (2023-08-18 08:42:24.309), waitTimeout=-1, callTimeout=60000, tenantControl=fish.payara.nucleus.hazelcast.PayaraHazelcastTenant@30695580, name=statefulRoomSOSChangeListenerMap} on: hz.priceless_meitner.partition-operation.thread-9\r\njava.lang.IllegalStateException: Attempting to execute an operation on a closed EntityManager.\r\n\tat org.eclipse.persistence.internal.jpa.EntityManagerImpl.verifyOpen(EntityManagerImpl.java:2067)\r\n\tat org.eclipse.persistence.internal.jpa.EntityManagerImpl.close(EntityManagerImpl.java:1908)\r\n\tat com.sun.enterprise.container.common.impl.EntityManagerWrapper$NonTxEMCleaner.beforePostInvoke(EntityManagerWrapper.java:1241)\r\n\tat org.glassfish.api.invocation.InvocationManagerImpl$ListComponentInvocationHandler.lambda$beforePostInvoke$2(InvocationManagerImpl.java:430)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.glassfish.api.invocation.InvocationManagerImpl$ListComponentInvocationHandler.beforePostInvoke(InvocationManagerImpl.java:430)\r\n\tat org.glassfish.api.invocation.InvocationManagerImpl.postInvoke(InvocationManagerImpl.java:198)\r\n\tat fish.payara.appserver.context.ContextImpl$Context.close(ContextImpl.java:61)\r\n\tat fish.payara.appserver.context.ContextImpl$RequestContext.close(ContextImpl.java:126)\r\n\tat com.hazelcast.spi.impl.operationservice.Operation.popThreadContext(Operation.java:822)\r\n\tat com.hazelcast.spi.impl.operationservice.impl.OperationRunnerImpl.run(OperationRunnerImpl.java:258)\r\n\tat com.hazelcast.spi.impl.operationservice.impl.OperationRunnerImpl.run(OperationRunnerImpl.java:213)\r\n\tat com.hazelcast.spi.impl.operationexecutor.impl.OperationThread.process(OperationThread.java:175)\r\n\tat com.hazelcast.spi.impl.operationexecutor.impl.OperationThread.process(OperationThread.java:139)\r\n\tat com.hazelcast.spi.impl.operationexecutor.impl.OperationThread.executeRun(OperationThread.java:123)\r\n\tat com.hazelcast.internal.util.executor.HazelcastManagedThread.run(HazelcastManagedThread.java:102)\r\n]]\r\n```\r\n\r\nIn many instances I was able to mitigate the problem by switching from \r\n`javax.enterprise.concurrent.ManagedScheduledExecutorService` to using regular `Executors.newSingleThreadScheduledExecutor()`.\r\nSometimes I was able to annotate the enclosing method with `@Transactional(TxType.NOT_SUPPORTED)`. \r\n\r\nBut this can&#39;t be the correct way. There must be a way to use Hazelcast in Payara without avoiding every bit of transactional container magic.\r\n\r\nEvery bit of help would be appreciated.\r\n\r\n","title":"Hazelcast and Payara 5 - Tries to close entityManager if hazelcast is used in a transactional context","body":"<p>we are currently trying to use Hazelcast in our Jakarta EE 8 Application running on Payara 5.2022.x.\nWe have huge problems when trying to access IMap instances when using hazelcast in any method that is even remotely in a transactional context.\nThe problem seems to be that the Payara Tenant that is user in combination with Hazelcast tries to tear down everything after each and every access to the Hazelcast Map.\nThis fails nearly 100% of the time resulting in this Stack:</p>\n<pre><code> [2023-08-18T08:42:24.310+0200] [Payara 5.2022.2] [SCHWERWIEGEND] [] [com.hazelcast.spi.impl.operationexecutor.impl.OperationExecutorImpl] [tid: _ThreadID=72 _ThreadName=hz.priceless_meitner.partition-operation.thread-9] [timeMillis: 1692340944310] [levelValue: 1000] [[\n [192.168.100.70]:4900 [development] [4.2] Failed to process: com.hazelcast.map.impl.operation.PutOperation{serviceName='hz:impl:mapService', identityHash=353117872, partitionId=105, replicaIndex=0, callId=-1914, invocationTime=1692340944309 (2023-08-18 08:42:24.309), waitTimeout=-1, callTimeout=60000, tenantControl=fish.payara.nucleus.hazelcast.PayaraHazelcastTenant@30695580, name=statefulRoomSOSChangeListenerMap} on: hz.priceless_meitner.partition-operation.thread-9\njava.lang.IllegalStateException: Attempting to execute an operation on a closed EntityManager.\n   at org.eclipse.persistence.internal.jpa.EntityManagerImpl.verifyOpen(EntityManagerImpl.java:2067)\n   at org.eclipse.persistence.internal.jpa.EntityManagerImpl.close(EntityManagerImpl.java:1908)\n   at com.sun.enterprise.container.common.impl.EntityManagerWrapper$NonTxEMCleaner.beforePostInvoke(EntityManagerWrapper.java:1241)\n   at org.glassfish.api.invocation.InvocationManagerImpl$ListComponentInvocationHandler.lambda$beforePostInvoke$2(InvocationManagerImpl.java:430)\n   at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n   at org.glassfish.api.invocation.InvocationManagerImpl$ListComponentInvocationHandler.beforePostInvoke(InvocationManagerImpl.java:430)\n   at org.glassfish.api.invocation.InvocationManagerImpl.postInvoke(InvocationManagerImpl.java:198)\n   at fish.payara.appserver.context.ContextImpl$Context.close(ContextImpl.java:61)\n   at fish.payara.appserver.context.ContextImpl$RequestContext.close(ContextImpl.java:126)\n   at com.hazelcast.spi.impl.operationservice.Operation.popThreadContext(Operation.java:822)\n   at com.hazelcast.spi.impl.operationservice.impl.OperationRunnerImpl.run(OperationRunnerImpl.java:258)\n   at com.hazelcast.spi.impl.operationservice.impl.OperationRunnerImpl.run(OperationRunnerImpl.java:213)\n   at com.hazelcast.spi.impl.operationexecutor.impl.OperationThread.process(OperationThread.java:175)\n   at com.hazelcast.spi.impl.operationexecutor.impl.OperationThread.process(OperationThread.java:139)\n   at com.hazelcast.spi.impl.operationexecutor.impl.OperationThread.executeRun(OperationThread.java:123)\n   at com.hazelcast.internal.util.executor.HazelcastManagedThread.run(HazelcastManagedThread.java:102)\n]]\n</code></pre>\n<p>In many instances I was able to mitigate the problem by switching from\n<code>javax.enterprise.concurrent.ManagedScheduledExecutorService</code> to using regular <code>Executors.newSingleThreadScheduledExecutor()</code>.\nSometimes I was able to annotate the enclosing method with <code>@Transactional(TxType.NOT_SUPPORTED)</code>.</p>\n<p>But this can't be the correct way. There must be a way to use Hazelcast in Payara without avoiding every bit of transactional container magic.</p>\n<p>Every bit of help would be appreciated.</p>\n"},{"tags":["java","android","android-edittext"],"answers":[{"tags":[],"owner":{"account_id":91056,"reputation":124854,"user_id":250260,"accept_rate":80,"display_name":"Jorgesys"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695232807,"creation_date":1695232807,"answer_id":77144949,"question_id":76495996,"body_markdown":"The problem indicates that there is no text to play when the user uses the wizard, you need to add a description of the content so that the user can learn information about the view.\r\n\r\nIn addition to adding\r\n\r\n    android:hint=&quot;@string/password&quot;\r\n\r\nAlso add your &quot;Content description&quot;:\r\n\r\n    android:contentDescription=&quot;@string/view_description&quot;","title":"Error &quot;No speakable text present&quot; although having android:hint","body":"<p>The problem indicates that there is no text to play when the user uses the wizard, you need to add a description of the content so that the user can learn information about the view.</p>\n<p>In addition to adding</p>\n<pre><code>android:hint=&quot;@string/password&quot;\n</code></pre>\n<p>Also add your &quot;Content description&quot;:</p>\n<pre><code>android:contentDescription=&quot;@string/view_description&quot;\n</code></pre>\n"}],"owner":{"account_id":22788336,"reputation":65,"user_id":16943070,"display_name":"HaNgocHieu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1253,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695232807,"creation_date":1687001648,"question_id":76495996,"body_markdown":"Even though I already have the android:hint field but still got the error message &quot;No speakable text present. This item may not have a label readable by screen readers.&quot;\r\n\r\n[![enter image description here](https://i.stack.imgur.com/3li8J.png)](https://i.stack.imgur.com/3li8J.png)\r\n[![enter image description here](https://i.stack.imgur.com/tOqst.png)](https://i.stack.imgur.com/tOqst.png)\r\n\r\nI want to a few solutions for this problem. Thank you.","title":"Error &quot;No speakable text present&quot; although having android:hint","body":"<p>Even though I already have the android:hint field but still got the error message &quot;No speakable text present. This item may not have a label readable by screen readers.&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/3li8J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3li8J.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/tOqst.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tOqst.png\" alt=\"enter image description here\" /></a></p>\n<p>I want to a few solutions for this problem. Thank you.</p>\n"},{"tags":["java","groovy","jvm"],"answers":[{"tags":[],"owner":{"account_id":4358,"reputation":168410,"user_id":6509,"display_name":"tim_yates"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695122771,"creation_date":1695122771,"answer_id":77134133,"question_id":77133499,"body_markdown":"The `groovy` cli app runs groovy scripts\r\n\r\nThe `groovyc` cli app compiles groovy scripts to JVM bytecode\r\n\r\nYou can&#39;t run JVM bytecode directly with the `groovy` cli app.\r\n\r\nTo run it, use the `java` command:\r\n\r\n```\r\njava -cp ~/path/to/groovy/lib/groovy-4.0.11.jar:. Hello\r\n```","title":"Groovy Class Files not working with `groovy` command","body":"<p>The <code>groovy</code> cli app runs groovy scripts</p>\n<p>The <code>groovyc</code> cli app compiles groovy scripts to JVM bytecode</p>\n<p>You can't run JVM bytecode directly with the <code>groovy</code> cli app.</p>\n<p>To run it, use the <code>java</code> command:</p>\n<pre><code>java -cp ~/path/to/groovy/lib/groovy-4.0.11.jar:. Hello\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15474021,"reputation":1,"user_id":11194469,"display_name":"Luke McCartney"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695232759,"creation_date":1695232759,"answer_id":77144945,"question_id":77133499,"body_markdown":"[dagget&#39;s][1] response the answer above works flawlessly and is exactly what I was looking for. As far as I am aware, `groovy` does not create jar files.  \r\n\r\n  [1]: https://stackoverflow.com/users/1276664/daggett","title":"Groovy Class Files not working with `groovy` command","body":"<p><a href=\"https://stackoverflow.com/users/1276664/daggett\">dagget's</a> response the answer above works flawlessly and is exactly what I was looking for. As far as I am aware, <code>groovy</code> does not create jar files.</p>\n"}],"owner":{"account_id":15474021,"reputation":1,"user_id":11194469,"display_name":"Luke McCartney"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695232759,"creation_date":1695117099,"question_id":77133499,"body_markdown":"I am currently struggling with installation/getting started with Groovy.\r\n\r\nWith a file called `Hello.groovy` I have written:\r\n``println &quot;Hello, Groovy!&quot;``\r\nWhen I use `groovyc Hello.groovy` to create the class file, the compilation works. However, when I try to run the class file using `groovy Hello.class` I get the following error:\r\n``\r\norg.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:\r\n/Users/lukemccartney/Desktop/apache-groovy-course/getting-started/groovyc/Hello.class: 1: Unexpected character: &#39;&#39; @ line 1, column 1.\r\n   @YHellogroovy/lang/Script\r\n                                Hello.groovy$staticClassInfo*Lorg/codehaus/groovy/reflection/ClassInfo;__$stMCZ&lt;init&gt;()V\r\n\r\n   ^\r\n\r\n1 error\r\n``\r\n\r\nI tried installing groovy via `sudo apt-get install groovy` on my Ubuntu VM and I get the same problem when I run `groovyc Hello.groovy` and `groovy Hello.class`.","title":"Groovy Class Files not working with `groovy` command","body":"<p>I am currently struggling with installation/getting started with Groovy.</p>\n<p>With a file called <code>Hello.groovy</code> I have written:\n<code>println &quot;Hello, Groovy!&quot;</code>\nWhen I use <code>groovyc Hello.groovy</code> to create the class file, the compilation works. However, when I try to run the class file using <code>groovy Hello.class</code> I get the following error:\n``\norg.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:\n/Users/lukemccartney/Desktop/apache-groovy-course/getting-started/groovyc/Hello.class: 1: Unexpected character: '' @ line 1, column 1.\n@YHellogroovy/lang/Script\nHello.groovy$staticClassInfo*Lorg/codehaus/groovy/reflection/ClassInfo;__$stMCZ()V</p>\n<p>^</p>\n<p>1 error\n``</p>\n<p>I tried installing groovy via <code>sudo apt-get install groovy</code> on my Ubuntu VM and I get the same problem when I run <code>groovyc Hello.groovy</code> and <code>groovy Hello.class</code>.</p>\n"},{"tags":["java","hashmap","linkedhashmap"],"comments":[{"owner":{"account_id":460525,"reputation":18289,"user_id":861679,"accept_rate":68,"display_name":"Android Killer"},"score":0,"creation_date":1314164158,"post_id":7170871,"comment_id":8606830,"body_markdown":"Do you know the keys of all items or not ?","body":"Do you know the keys of all items or not ?"},{"owner":{"account_id":48946,"reputation":14899,"user_id":145567,"accept_rate":78,"display_name":"Dominic Bou-Samra"},"score":0,"creation_date":1314164270,"post_id":7170871,"comment_id":8606837,"body_markdown":"I do. Suggesting I iterate through once, add to a list, then iterate that backwards using them as keys? Suppose that would work","body":"I do. Suggesting I iterate through once, add to a list, then iterate that backwards using them as keys? Suppose that would work"},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":1,"creation_date":1449679126,"post_id":7170871,"comment_id":56114553,"body_markdown":"I assume you just want to iterate in reverse in &quot;order of insertion&quot; here, or do you want real ordering based on some natural ordering? See also http://stackoverflow.com/a/1936472/32453","body":"I assume you just want to iterate in reverse in &quot;order of insertion&quot; here, or do you want real ordering based on some natural ordering? See also <a href=\"http://stackoverflow.com/a/1936472/32453\">stackoverflow.com/a/1936472/32453</a>"}],"answers":[{"tags":[],"owner":{"account_id":373975,"reputation":24834,"user_id":723920,"accept_rate":60,"display_name":"Kal"},"down_vote_count":2,"up_vote_count":11,"is_accepted":true,"score":9,"last_activity_date":1314164855,"creation_date":1314164855,"answer_id":7170975,"question_id":7170871,"body_markdown":"You don&#39;t have to iterate through it. But it would be handy to pull the keys off and store it in a list. Thats the only way you can do indexOf() type operations.\r\n\r\n    List&lt;String&gt; keyList = new ArrayList&lt;String&gt;(map.keySet());\r\n    // Given 10th element&#39;s key\r\n    String key = &quot;aKey&quot;;\r\n    int idx = keyList.indexOf(key);\r\n    for ( int i = idx ; i &gt;= 0 ; i-- ) \r\n     System.out.println(map.get(keyList.get(i)));","title":"Iterating through a LinkedHashMap in reverse order","body":"<p>You don't have to iterate through it. But it would be handy to pull the keys off and store it in a list. Thats the only way you can do indexOf() type operations.</p>\n\n<pre><code>List&lt;String&gt; keyList = new ArrayList&lt;String&gt;(map.keySet());\n// Given 10th element's key\nString key = \"aKey\";\nint idx = keyList.indexOf(key);\nfor ( int i = idx ; i &gt;= 0 ; i-- ) \n System.out.println(map.get(keyList.get(i)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":480291,"reputation":21721,"user_id":893432,"accept_rate":66,"display_name":"Ali"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1595857576,"creation_date":1407832730,"answer_id":25259730,"question_id":7170871,"body_markdown":"The HashMap:\r\n\r\n    HashMap&lt;Integer, String&gt; map = new HashMap&lt;Integer, String&gt;();\r\n\r\nReverse iterating over values:\r\n\r\n    ListIterator&lt;Sprite&gt; iterator = new ArrayList&lt;String&gt;(map.values()).listIterator(map.size());\r\n    while (iterator.hasPrevious()) String value = iterator.previous();\r\n\r\nReverse iterating over keys:\r\n\r\n    ListIterator&lt;Integer&gt; iterator = new ArrayList(map.keySet()).listIterator(map.size());\r\n    while (iterator.hasPrevious()) Integer key = iterator.previous();\r\n\r\nReverse iterating over both:\r\n\r\n    ListIterator&lt;Map.Entry&lt;Integer, String&gt;&gt; iterator = new ArrayList&lt;Map.Entry&lt;Integer, String&gt;&gt;(map.entrySet()).listIterator(map.size());\r\n    while (iterator.hasPrevious()) Map.Entry&lt;Integer, String&gt; entry = iterator.previous();\r\n\r\n","title":"Iterating through a LinkedHashMap in reverse order","body":"<p>The HashMap:</p>\n<pre><code>HashMap&lt;Integer, String&gt; map = new HashMap&lt;Integer, String&gt;();\n</code></pre>\n<p>Reverse iterating over values:</p>\n<pre><code>ListIterator&lt;Sprite&gt; iterator = new ArrayList&lt;String&gt;(map.values()).listIterator(map.size());\nwhile (iterator.hasPrevious()) String value = iterator.previous();\n</code></pre>\n<p>Reverse iterating over keys:</p>\n<pre><code>ListIterator&lt;Integer&gt; iterator = new ArrayList(map.keySet()).listIterator(map.size());\nwhile (iterator.hasPrevious()) Integer key = iterator.previous();\n</code></pre>\n<p>Reverse iterating over both:</p>\n<pre><code>ListIterator&lt;Map.Entry&lt;Integer, String&gt;&gt; iterator = new ArrayList&lt;Map.Entry&lt;Integer, String&gt;&gt;(map.entrySet()).listIterator(map.size());\nwhile (iterator.hasPrevious()) Map.Entry&lt;Integer, String&gt; entry = iterator.previous();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2627844,"reputation":263,"user_id":2274508,"display_name":"user2274508"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1455702180,"creation_date":1455702180,"answer_id":35452967,"question_id":7170871,"body_markdown":"The question requires a LinkedHashMap in reverse order, some answers suggesting using a TreeSet but this will reorder the map based upon the key.\r\n\r\nThis solution allows the iteration over the original LinkedHashMap not the new ArrayList as has also been proposed:\r\n\r\n    List&lt;String&gt; reverseOrderedKeys = new ArrayList&lt;String&gt;(linkedHashMap.keySet());\r\n    Collections.reverse(reverseOrderedKeys);\r\n    for (String key : reverseOrderedKeys) {\r\n    \tRecordItemElement line = linkedHashMap.get(key);\r\n    }","title":"Iterating through a LinkedHashMap in reverse order","body":"<p>The question requires a LinkedHashMap in reverse order, some answers suggesting using a TreeSet but this will reorder the map based upon the key.</p>\n\n<p>This solution allows the iteration over the original LinkedHashMap not the new ArrayList as has also been proposed:</p>\n\n<pre><code>List&lt;String&gt; reverseOrderedKeys = new ArrayList&lt;String&gt;(linkedHashMap.keySet());\nCollections.reverse(reverseOrderedKeys);\nfor (String key : reverseOrderedKeys) {\n    RecordItemElement line = linkedHashMap.get(key);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3980453,"reputation":98,"user_id":3282474,"display_name":"Hernanibus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1487044922,"creation_date":1487044922,"answer_id":42217651,"question_id":7170871,"body_markdown":"Using &quot;user22745008&quot; solution and labdas with some generics you can have a very neat solution as a method:\r\n\r\n      public static &lt;T, Q&gt; LinkedHashMap&lt;T, Q&gt; reverseMap(LinkedHashMap&lt;T, Q&gt; toReverse)\r\n      {\r\n          LinkedHashMap&lt;T, Q&gt; reversedMap = new LinkedHashMap&lt;&gt;();\r\n          List&lt;T&gt; reverseOrderedKeys = new ArrayList&lt;&gt;(toReverse.keySet());\r\n          Collections.reverse(reverseOrderedKeys);\r\n          reverseOrderedKeys.forEach((key)-&gt;reversedMap.put(key,toReverse.get(key)));\r\n          return reversedMap;\r\n        }","title":"Iterating through a LinkedHashMap in reverse order","body":"<p>Using \"user22745008\" solution and labdas with some generics you can have a very neat solution as a method:</p>\n\n<pre><code>  public static &lt;T, Q&gt; LinkedHashMap&lt;T, Q&gt; reverseMap(LinkedHashMap&lt;T, Q&gt; toReverse)\n  {\n      LinkedHashMap&lt;T, Q&gt; reversedMap = new LinkedHashMap&lt;&gt;();\n      List&lt;T&gt; reverseOrderedKeys = new ArrayList&lt;&gt;(toReverse.keySet());\n      Collections.reverse(reverseOrderedKeys);\n      reverseOrderedKeys.forEach((key)-&gt;reversedMap.put(key,toReverse.get(key)));\n      return reversedMap;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2111403,"reputation":33698,"user_id":1876620,"accept_rate":94,"display_name":"fps"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1516567024,"creation_date":1516564881,"answer_id":48371131,"question_id":7170871,"body_markdown":"This is an old question, but I think it&#39;s lacking an answer that takes a newer approach. The following uses Java 9 features:\r\n\r\n    Deque&lt;Map.Entry&lt;String, RecordItemElement&gt;&gt; top = map.entrySet().stream()\r\n            .takeWhile(e -&gt; !givenKey.equals(e.getKey()))\r\n            .collect(Collectors.toCollection(ArrayDeque::new));\r\n\r\nThe code above streams the map&#39;s entryset, keeping entries until a key equal to the given key is found. Then, the entries are collected to an `ArrayDeque`.\r\n\r\nOne detail is missing, though. Depending on whether you need the entry that matches the given key to also be included in the result or not, you might need to manually add it to the deque. If you don&#39;t want it added, then you&#39;re done. Otherwise, simply do:\r\n\r\n    top.add(Map.entry(givenKey, map.get(givenKey)));\r\n\r\nNow, to iterate the `Deque` in reverse order, simply use its `descendingIterator()`:\r\n\r\n    Iterator&lt;Map.Entry&lt;String, RecordItemElement&gt;&gt; descIt = top.descendingIterator();\r\n\r\n*It&#39;s worth mentioning that this approach only works if the stream is **sequential**.* Anyways, we wouldn&#39;t have gained anything using a parallel stream here.","title":"Iterating through a LinkedHashMap in reverse order","body":"<p>This is an old question, but I think it's lacking an answer that takes a newer approach. The following uses Java 9 features:</p>\n\n<pre><code>Deque&lt;Map.Entry&lt;String, RecordItemElement&gt;&gt; top = map.entrySet().stream()\n        .takeWhile(e -&gt; !givenKey.equals(e.getKey()))\n        .collect(Collectors.toCollection(ArrayDeque::new));\n</code></pre>\n\n<p>The code above streams the map's entryset, keeping entries until a key equal to the given key is found. Then, the entries are collected to an <code>ArrayDeque</code>.</p>\n\n<p>One detail is missing, though. Depending on whether you need the entry that matches the given key to also be included in the result or not, you might need to manually add it to the deque. If you don't want it added, then you're done. Otherwise, simply do:</p>\n\n<pre><code>top.add(Map.entry(givenKey, map.get(givenKey)));\n</code></pre>\n\n<p>Now, to iterate the <code>Deque</code> in reverse order, simply use its <code>descendingIterator()</code>:</p>\n\n<pre><code>Iterator&lt;Map.Entry&lt;String, RecordItemElement&gt;&gt; descIt = top.descendingIterator();\n</code></pre>\n\n<p><em>It's worth mentioning that this approach only works if the stream is <strong>sequential</strong>.</em> Anyways, we wouldn't have gained anything using a parallel stream here.</p>\n"},{"tags":[],"owner":{"account_id":44321,"reputation":9248,"user_id":130028,"accept_rate":79,"display_name":"marcolopes"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1572560340,"creation_date":1572560340,"answer_id":58651855,"question_id":7170871,"body_markdown":"    new LinkedList(linkedHashMap.keySet()).descendingIterator();","title":"Iterating through a LinkedHashMap in reverse order","body":"<pre><code>new LinkedList(linkedHashMap.keySet()).descendingIterator();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695232603,"creation_date":1683002242,"answer_id":76151763,"question_id":7170871,"body_markdown":"As of Java 21, `LinkedHashMap` has the [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashMap.html#reversed()) method, which returns a reversed view of the map.  This can be iterated over in the standard manner.\r\n\r\n```lang-java\r\nmyLinkedHashMap.reversed().forEach(key, value -&gt; {\r\n  // Do something with the key and/or value\r\n});\r\n```\r\n\r\nTo specifically start with a given key as requested, a `Stream` over the reversed map&#39;s entry set could be used, using the [`dropWhile`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#dropWhile(java.util.function.Predicate)) method to skip all elements encountered prior to that key:\r\n\r\n```lang-java\r\nString matchingKey = &quot;someKey&quot;;\r\nmyLinkedHashMap.entrySet().stream()\r\n        .dropWhile(e -&gt; !matchingKey.equals(e.getKey()))\r\n        .forEach(e -&gt; {\r\n            String key = e.getKey();\r\n            RecordItemElement value = e.getValue();\r\n            // Do something with key &amp; value\r\n        });\r\n```","title":"Iterating through a LinkedHashMap in reverse order","body":"<p>As of Java 21, <code>LinkedHashMap</code> has the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashMap.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method, which returns a reversed view of the map.  This can be iterated over in the standard manner.</p>\n<pre class=\"lang-java prettyprint-override\"><code>myLinkedHashMap.reversed().forEach(key, value -&gt; {\n  // Do something with the key and/or value\n});\n</code></pre>\n<p>To specifically start with a given key as requested, a <code>Stream</code> over the reversed map's entry set could be used, using the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#dropWhile(java.util.function.Predicate)\" rel=\"nofollow noreferrer\"><code>dropWhile</code></a> method to skip all elements encountered prior to that key:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String matchingKey = &quot;someKey&quot;;\nmyLinkedHashMap.entrySet().stream()\n        .dropWhile(e -&gt; !matchingKey.equals(e.getKey()))\n        .forEach(e -&gt; {\n            String key = e.getKey();\n            RecordItemElement value = e.getValue();\n            // Do something with key &amp; value\n        });\n</code></pre>\n"}],"owner":{"account_id":48946,"reputation":14899,"user_id":145567,"accept_rate":78,"display_name":"Dominic Bou-Samra"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32200,"favorite_count":0,"down_vote_count":0,"up_vote_count":44,"accepted_answer_id":7170975,"answer_count":7,"score":44,"last_activity_date":1695232603,"creation_date":1314163999,"question_id":7170871,"body_markdown":"I have a LinkedHashMap:\r\n\r\n    LinkedHashMap&lt;String, RecordItemElement&gt;\r\n\r\nthat I need to iterate through from a given key&#39;s position, backwards. So if I was given the 10th item&#39;s key, I&#39;d need iterate backwards through the hashmap 9, 8, 7 etc.\r\n","title":"Iterating through a LinkedHashMap in reverse order","body":"<p>I have a LinkedHashMap:</p>\n\n<pre><code>LinkedHashMap&lt;String, RecordItemElement&gt;\n</code></pre>\n\n<p>that I need to iterate through from a given key's position, backwards. So if I was given the 10th item's key, I'd need iterate backwards through the hashmap 9, 8, 7 etc.</p>\n"},{"tags":["java","kotlin","frp","device-policy-manager","android-device-owner"],"owner":{"account_id":15370579,"reputation":3,"user_id":11088721,"display_name":"Udit Sharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":192,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695231934,"creation_date":1674450184,"question_id":75205812,"body_markdown":"How to add extra protection in my device owner application so that if someone tries bypassing the FRP they can&#39;t use the phone.\r\nI have seen this in some devices. they show a notification &#39;Device managed by admin automatically resetting soon&#39; like this:\r\n[screenshot1](https://i.stack.imgur.com/WrIlP.jpg)\r\n\r\n[screenshot2](https://i.stack.imgur.com/4bGAT.jpg)\r\n\r\nThe app that showed this was using &#39;Android Management API&#39;. I read about this but what I understood is that I think they install their own app as device owner in the device to add the FRP policy. In that case I think I will not be able to install my device owner app (or is it possible?).\r\n\r\n\r\nI am using this code and it adds FRP (asks for the required gMail address during device setup) but it can be easily bypassed by following some YouTube videos and after that device does not show above notification.\r\n\r\n```\r\ntry {\r\n\tBundle bundle = new Bundle();\r\n\tbundle.putString(&quot;factoryResetProtectionAdmin&quot;, 432112340987654321234);//google Id\r\n\tdevicePolicyManager.setApplicationRestrictions(adminComponentName, &quot;com.google.android.gms&quot;, bundle);\r\n\r\n\t// send broadcast\r\n\tIntent broadcastIntent = new Intent(&quot;com.google.android.gms.auth.FRP_CONFIG_CHANGED&quot;);\r\n\tbroadcastIntent.setPackage(&quot;com.google.android.gms&quot;);\r\n\tbroadcastIntent.addFlags(Intent.FLAG_RECEIVER_FOREGROUND);\r\n\tgetApplicationContext().sendBroadcast(broadcastIntent);\r\n} catch (Exception e) {\r\n\tLog.d(&quot;FRP&quot;, e.getLocalizedMessage());\r\n\te.printStackTrace();\r\n}\r\n```\r\n","title":"Android - Protection from FRP bybass","body":"<p>How to add extra protection in my device owner application so that if someone tries bypassing the FRP they can't use the phone.\nI have seen this in some devices. they show a notification 'Device managed by admin automatically resetting soon' like this:\n<a href=\"https://i.stack.imgur.com/WrIlP.jpg\" rel=\"nofollow noreferrer\">screenshot1</a></p>\n<p><a href=\"https://i.stack.imgur.com/4bGAT.jpg\" rel=\"nofollow noreferrer\">screenshot2</a></p>\n<p>The app that showed this was using 'Android Management API'. I read about this but what I understood is that I think they install their own app as device owner in the device to add the FRP policy. In that case I think I will not be able to install my device owner app (or is it possible?).</p>\n<p>I am using this code and it adds FRP (asks for the required gMail address during device setup) but it can be easily bypassed by following some YouTube videos and after that device does not show above notification.</p>\n<pre><code>try {\n    Bundle bundle = new Bundle();\n    bundle.putString(&quot;factoryResetProtectionAdmin&quot;, 432112340987654321234);//google Id\n    devicePolicyManager.setApplicationRestrictions(adminComponentName, &quot;com.google.android.gms&quot;, bundle);\n\n    // send broadcast\n    Intent broadcastIntent = new Intent(&quot;com.google.android.gms.auth.FRP_CONFIG_CHANGED&quot;);\n    broadcastIntent.setPackage(&quot;com.google.android.gms&quot;);\n    broadcastIntent.addFlags(Intent.FLAG_RECEIVER_FOREGROUND);\n    getApplicationContext().sendBroadcast(broadcastIntent);\n} catch (Exception e) {\n    Log.d(&quot;FRP&quot;, e.getLocalizedMessage());\n    e.printStackTrace();\n}\n</code></pre>\n"},{"tags":["java","collections","linked-list","iteration","hashset"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1585770466,"post_id":60979085,"comment_id":107883596,"body_markdown":"No. Just a regular forward-going iterator.","body":"No. Just a regular forward-going iterator."}],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299828,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1585770698,"creation_date":1585770698,"answer_id":60979204,"question_id":60979085,"body_markdown":"`LinkedHashSet` doesn&#39;t expose any API to iterate over it backwards. Although this would have a really bad performance impact, you could copy the `LinkedHashSet` to a `List` (retaining its order) and then iterate backwards on it:\r\n\r\n```java\r\nLinkedHashSet&lt;SomeClass&gt; myLinkedHashSet = ...;\r\nList&lt;SomeClass&gt; myList = new ArrayList&lt;&gt;(myLinkedHashSet); // Order is retained\r\nListIterator&lt;SomeClass&gt; myIter = myList.listIterator(myList.size());\r\nwhile (myIter.hasPrevious()) {\r\n    System.out.println(myIter.previous());\r\n}\r\n```","title":"The Java LinkedHashSet uses a doubly-linked list. Can it also be iterated backwards?","body":"<p><code>LinkedHashSet</code> doesn't expose any API to iterate over it backwards. Although this would have a really bad performance impact, you could copy the <code>LinkedHashSet</code> to a <code>List</code> (retaining its order) and then iterate backwards on it:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>LinkedHashSet&lt;SomeClass&gt; myLinkedHashSet = ...;\nList&lt;SomeClass&gt; myList = new ArrayList&lt;&gt;(myLinkedHashSet); // Order is retained\nListIterator&lt;SomeClass&gt; myIter = myList.listIterator(myList.size());\nwhile (myIter.hasPrevious()) {\n    System.out.println(myIter.previous());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":123958,"reputation":109285,"user_id":318758,"accept_rate":100,"display_name":"Joni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1585771535,"creation_date":1585771535,"answer_id":60979384,"question_id":60979085,"body_markdown":"The LinkedHashMap iterator only supports going forward. You can read its implementation in [OpenJDK in the github mirror](https://github.com/openjdk/jdk/blob/9d764ee48ee7c2e7be7a25aee2ed7bed2fcd2000/src/java.base/share/classes/java/util/LinkedHashMap.java#L740). It&#39;s not like the implementation privately implemented `ListIterator` and secretly supported iterating backwards.\r\n\r\nThe hash table lookup gives you a pointer to an entry that&#39;s somewhere in the list.  To remove it, you need a reference to the previous list entry. That&#39;s why LinkedHashMap needs to use a doubly linked list.","title":"The Java LinkedHashSet uses a doubly-linked list. Can it also be iterated backwards?","body":"<p>The LinkedHashMap iterator only supports going forward. You can read its implementation in <a href=\"https://github.com/openjdk/jdk/blob/9d764ee48ee7c2e7be7a25aee2ed7bed2fcd2000/src/java.base/share/classes/java/util/LinkedHashMap.java#L740\" rel=\"nofollow noreferrer\">OpenJDK in the github mirror</a>. It's not like the implementation privately implemented <code>ListIterator</code> and secretly supported iterating backwards.</p>\n\n<p>The hash table lookup gives you a pointer to an entry that's somewhere in the list.  To remove it, you need a reference to the previous list entry. That's why LinkedHashMap needs to use a doubly linked list.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695231841,"creation_date":1683003250,"answer_id":76151822,"question_id":60979085,"body_markdown":"Starting with Java 21, `LinkedHashSet` has the [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#reversed()) method, which returns a reversed view of the set.\r\n\r\nAn iterator can be retrieved from this reversed view, same as for any collection:\r\n\r\n```lang-java\r\nIterator&lt;Object&gt; iterator = myLinkedHashSet.reversed().iterator();\r\n```\r\n\r\nAdditionally, as with any `Iterable`, there are various ways to iterate over this reversed view, including the [`forEach`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html#forEach(java.util.function.Consumer)) method:\r\n\r\n```lang-java\r\nmyLinkedHashSet.reversed().forEach(element -&gt; {\r\n  // Do something with the element\r\n});\r\n```","title":"The Java LinkedHashSet uses a doubly-linked list. Can it also be iterated backwards?","body":"<p>Starting with Java 21, <code>LinkedHashSet</code> has the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method, which returns a reversed view of the set.</p>\n<p>An iterator can be retrieved from this reversed view, same as for any collection:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Iterator&lt;Object&gt; iterator = myLinkedHashSet.reversed().iterator();\n</code></pre>\n<p>Additionally, as with any <code>Iterable</code>, there are various ways to iterate over this reversed view, including the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html#forEach(java.util.function.Consumer)\" rel=\"nofollow noreferrer\"><code>forEach</code></a> method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>myLinkedHashSet.reversed().forEach(element -&gt; {\n  // Do something with the element\n});\n</code></pre>\n"}],"owner":{"account_id":13482973,"reputation":1362,"user_id":9727674,"display_name":"Moritz Gro&#223;"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":549,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":60979204,"answer_count":3,"score":2,"last_activity_date":1695231841,"creation_date":1585770231,"question_id":60979085,"body_markdown":"Oracle-Documentation says following about LinkedHashSet: &quot;Hash table and linked list implementation of the Set interface, with predictable iteration order. This implementation differs from HashSet in that it maintains a doubly-linked list running through all of its entries.&quot;\r\n\r\nThe iterator you can get is in insertion order. Iteration in reverse-insertion order would also be technicially feasable thought, as it&#39;s a **doubly**-linked. \r\n\r\nCan such a reverse-Iterator be created (or even a ListIterator which does both)?","title":"The Java LinkedHashSet uses a doubly-linked list. Can it also be iterated backwards?","body":"<p>Oracle-Documentation says following about LinkedHashSet: \"Hash table and linked list implementation of the Set interface, with predictable iteration order. This implementation differs from HashSet in that it maintains a doubly-linked list running through all of its entries.\"</p>\n\n<p>The iterator you can get is in insertion order. Iteration in reverse-insertion order would also be technicially feasable thought, as it's a <strong>doubly</strong>-linked. </p>\n\n<p>Can such a reverse-Iterator be created (or even a ListIterator which does both)?</p>\n"},{"tags":["java","linked-list","deque","linkedhashset"],"comments":[{"owner":{"account_id":6606163,"reputation":494,"user_id":5102932,"display_name":"Roy Shahaf"},"score":0,"creation_date":1545353812,"post_id":53877927,"comment_id":94603175,"body_markdown":"adding to a linked hash set has the same meaning as addFirst would","body":"adding to a linked hash set has the same meaning as addFirst would"},{"owner":{"account_id":13546471,"reputation":3498,"user_id":9772691,"display_name":"John McClane"},"score":1,"creation_date":1545354065,"post_id":53877927,"comment_id":94603212,"body_markdown":"@RoyShahaf Are you sure? `add` for `LinkedList` is equivalent to `addLast`. `addFirst` has different meaning.","body":"@RoyShahaf Are you sure? <code>add</code> for <code>LinkedList</code> is equivalent to <code>addLast</code>. <code>addFirst</code> has different meaning."},{"owner":{"account_id":2141010,"reputation":118229,"user_id":1899640,"display_name":"that other guy"},"score":2,"creation_date":1545354103,"post_id":53877927,"comment_id":94603217,"body_markdown":"When would an `addFirst` function be useful?","body":"When would an <code>addFirst</code> function be useful?"},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":4,"creation_date":1545354134,"post_id":53877927,"comment_id":94603224,"body_markdown":"Because `LinkedHashSet` preserves insertion order. That&#39;s it. There isn&#39;t a way to manipulate that order. Also, if you add methods not in the interface, then you can&#39;t program to the common interface anymore.","body":"Because <code>LinkedHashSet</code> preserves insertion order. That&#39;s it. There isn&#39;t a way to manipulate that order. Also, if you add methods not in the interface, then you can&#39;t program to the common interface anymore."},{"owner":{"account_id":13546471,"reputation":3498,"user_id":9772691,"display_name":"John McClane"},"score":0,"creation_date":1545354422,"post_id":53877927,"comment_id":94603275,"body_markdown":"@thatotherguy In the same cases when it is useful with `LinkedList`. For example, to create LIFO queue.","body":"@thatotherguy In the same cases when it is useful with <code>LinkedList</code>. For example, to create LIFO queue."},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":1,"creation_date":1545354493,"post_id":53877927,"comment_id":94603285,"body_markdown":"@ElliottFrisch If traversal order matters, you&#39;re usually already using a more specific type.","body":"@ElliottFrisch If traversal order matters, you&#39;re usually already using a more specific type."},{"owner":{"account_id":13546471,"reputation":3498,"user_id":9772691,"display_name":"John McClane"},"score":0,"creation_date":1545354604,"post_id":53877927,"comment_id":94603306,"body_markdown":"@ElliottFrisch `TreeSet` contains a bunch of methods not present in `Set`.","body":"@ElliottFrisch <code>TreeSet</code> contains a bunch of methods not present in <code>Set</code>."},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":2,"creation_date":1545354786,"post_id":53877927,"comment_id":94603346,"body_markdown":"[Javadoc](https://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html) says (in part) *This linked list defines the iteration ordering, which is the order in which elements were inserted into the set (insertion-order).* Did you want a [`ArrayDeque`](https://docs.oracle.com/javase/7/docs/api/java/util/ArrayDeque.html)?","body":"<a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html\" rel=\"nofollow noreferrer\">Javadoc</a> says (in part) <i>This linked list defines the iteration ordering, which is the order in which elements were inserted into the set (insertion-order).</i> Did you want a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/ArrayDeque.html\" rel=\"nofollow noreferrer\"><code>ArrayDeque</code></a>?"},{"owner":{"account_id":6606163,"reputation":494,"user_id":5102932,"display_name":"Roy Shahaf"},"score":0,"creation_date":1545355226,"post_id":53877927,"comment_id":94603439,"body_markdown":"@JohnMcClane my bad :)","body":"@JohnMcClane my bad :)"},{"owner":{"account_id":13546471,"reputation":3498,"user_id":9772691,"display_name":"John McClane"},"score":0,"creation_date":1545355702,"post_id":53877927,"comment_id":94603534,"body_markdown":"@ElliottFrisch This sentence concerns ordinary insertion, via `Set.add` method. They could have added to it that `addFirst` changes this order. By the way, this phrase is not completely correct. Try to add 1, then 2 to `LinkedHashSet&lt;Integer&gt;`, then remove 1, then add it again, and you&#39;ll see that the iteration order is now `2, 1` that contradicts the fact that 1 was inserted **earlier** than 2.","body":"@ElliottFrisch This sentence concerns ordinary insertion, via <code>Set.add</code> method. They could have added to it that <code>addFirst</code> changes this order. By the way, this phrase is not completely correct. Try to add 1, then 2 to <code>LinkedHashSet&lt;Integer&gt;</code>, then remove 1, then add it again, and you&#39;ll see that the iteration order is now <code>2, 1</code> that contradicts the fact that 1 was inserted <b>earlier</b> than 2."},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":2,"creation_date":1545355773,"post_id":53877927,"comment_id":94603555,"body_markdown":"You removed an element in the middle. Should it have infinite memory to store all of the values that you have removed? Regardless, what problem are you trying solve?","body":"You removed an element in the middle. Should it have infinite memory to store all of the values that you have removed? Regardless, what problem are you trying solve?"},{"owner":{"account_id":5860066,"reputation":13475,"user_id":4616087,"display_name":"Marvin"},"score":1,"creation_date":1545355878,"post_id":53877927,"comment_id":94603576,"body_markdown":"I don&#39;t think anyone except the original authors can answer this. We cannot even tell for sure whether it was a deliberate decision, let alone any potential reasons.","body":"I don&#39;t think anyone except the original authors can answer this. We cannot even tell for sure whether it was a deliberate decision, let alone any potential reasons."},{"owner":{"account_id":13546471,"reputation":3498,"user_id":9772691,"display_name":"John McClane"},"score":0,"creation_date":1545356616,"post_id":53877927,"comment_id":94603704,"body_markdown":"@Marvin I think such decisions are always considered. Even if it was overlooked at the earlier versions of Java, nothing prevents from adding this method, as it was with `String.isBlank()` in Java 11. For me, it seems natural to include it. But maybe there was some reason not to do this?","body":"@Marvin I think such decisions are always considered. Even if it was overlooked at the earlier versions of Java, nothing prevents from adding this method, as it was with <code>String.isBlank()</code> in Java 11. For me, it seems natural to include it. But maybe there was some reason not to do this?"},{"owner":{"account_id":6606163,"reputation":494,"user_id":5102932,"display_name":"Roy Shahaf"},"score":0,"creation_date":1545356694,"post_id":53877927,"comment_id":94603721,"body_markdown":"a general rule is to keep interfaces as thin as possible","body":"a general rule is to keep interfaces as thin as possible"},{"owner":{"account_id":13546471,"reputation":3498,"user_id":9772691,"display_name":"John McClane"},"score":0,"creation_date":1545356906,"post_id":53877927,"comment_id":94603752,"body_markdown":"@RoyShahaf I agree with this, but here we&#39;re not expanding the `Set` interface, but only adding one class-specific method.","body":"@RoyShahaf I agree with this, but here we&#39;re not expanding the <code>Set</code> interface, but only adding one class-specific method."},{"owner":{"account_id":6606163,"reputation":494,"user_id":5102932,"display_name":"Roy Shahaf"},"score":0,"creation_date":1545357659,"post_id":53877927,"comment_id":94603866,"body_markdown":"When you write a library, any API you make available must be supported (pretty much) forever.\nThis is even more so when writing a language and its base libraries.\nThe use-case for a LinkedHashSet is obvious, the use-case for addFirst in a LinkedHashSet is not.","body":"When you write a library, any API you make available must be supported (pretty much) forever. This is even more so when writing a language and its base libraries. The use-case for a LinkedHashSet is obvious, the use-case for addFirst in a LinkedHashSet is not."}],"answers":[{"tags":[],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1545362078,"creation_date":1545361374,"answer_id":53878661,"question_id":53877927,"body_markdown":"As Eliott Frisch said, the answer is in the next sentence of the paragraph you quoted:\r\n\r\n&gt;  This linked list defines the iteration ordering, which is the order\r\n&gt; in which elements were inserted into the set (*insertion-order*). \r\n\r\nAn `addFirst` method would break the insertion order and thereby the design idea of `LinkedHashSet`.\r\n\r\nIf I may add a bit of guesswork too, other possible reasons might include:\r\n\r\n - Its not so simple to implement as it appears since a `LinkedHashSet` is really implemented as a `LinkedHasMap` where the values mapped to are not used. At least you would have to change that class too (which in turn would also break *its* insertion order and thereby its design idea).\r\n - As that other guy may have intended in a comment, they didnt find it useful.\r\n\r\nThat said, you are asking the question the wrong way around. They designed a class with a functionality for which they saw a need. They moved on to implement it using a hash table and a linked list. You are starting out from the implementation and using it as a basis for a design discussion. While that may occasionally add something useful, generally its not the way to good designs.\r\n\r\nWhile I can in theory follow your point that there might be a situation where you want a double-ended queue with set property (duplicates are ignored/eliminated), I have a hard time imagining when a `Deque` would not fulfil your needs in this case (Eliott Frisch mentioned the under-used `ArrayDeque`). You need pretty large amounts of data and/or pretty strict performance requirements before the linear complexity of `contains` and `remove` would be prohibitive. And in that case you may already be better off custom designing your own data structure.","title":"Why doesn&#39;t LinkedHashSet have addFirst method?","body":"<p>As Eliott Frisch said, the answer is in the next sentence of the paragraph you quoted:</p>\n\n<blockquote>\n  <p> This linked list defines the iteration ordering, which is the order\n  in which elements were inserted into the set (<em>insertion-order</em>). </p>\n</blockquote>\n\n<p>An <code>addFirst</code> method would break the insertion order and thereby the design idea of <code>LinkedHashSet</code>.</p>\n\n<p>If I may add a bit of guesswork too, other possible reasons might include:</p>\n\n<ul>\n<li>Its not so simple to implement as it appears since a <code>LinkedHashSet</code> is really implemented as a <code>LinkedHasMap</code> where the values mapped to are not used. At least you would have to change that class too (which in turn would also break <em>its</em> insertion order and thereby its design idea).</li>\n<li>As that other guy may have intended in a comment, they didnt find it useful.</li>\n</ul>\n\n<p>That said, you are asking the question the wrong way around. They designed a class with a functionality for which they saw a need. They moved on to implement it using a hash table and a linked list. You are starting out from the implementation and using it as a basis for a design discussion. While that may occasionally add something useful, generally its not the way to good designs.</p>\n\n<p>While I can in theory follow your point that there might be a situation where you want a double-ended queue with set property (duplicates are ignored/eliminated), I have a hard time imagining when a <code>Deque</code> would not fulfil your needs in this case (Eliott Frisch mentioned the under-used <code>ArrayDeque</code>). You need pretty large amounts of data and/or pretty strict performance requirements before the linear complexity of <code>contains</code> and <code>remove</code> would be prohibitive. And in that case you may already be better off custom designing your own data structure.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695231488,"creation_date":1683005496,"answer_id":76151958,"question_id":53877927,"body_markdown":"As of Java 21, `LinkedHashSet` does have an [`addFirst`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#addFirst(E)) method.\r\n\r\n&gt; `public void addFirst(E e)`\r\n&gt;\r\n&gt; Adds an element as the first element of this collection (optional operation). After this operation completes normally, the given element will be a member of this collection, and it will be the first element in encounter order.\r\n&gt;\r\n&gt; If this set already contains the element, it is relocated if necessary so that it is first in encounter order.\r\n&gt;\r\n&gt; **Specified by:**  \r\n&gt; [`addFirst`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addFirst(E)) in interface [`SequencedCollection&lt;E&gt;`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html)`\r\n&gt;\r\n&gt; **Parameters:**  \r\n&gt; `e` - the element to be added  \r\n&gt;\r\n&gt; **Since:**  \r\n&gt; 21\r\n\r\nThe `addFirst` method was added as part of the [JEP 431: Sequenced Collections](https://openjdk.org/jeps/431) feature added in Java 21.\r\n\r\nThe sequenced collections feature adds three new interfaces: [`SequencedCollection`](https://download.java.net/java/early_access/jdk21/docs/api/java.base/java/util/SequencedCollection.html), [`SequencedSet`](https://download.java.net/java/early_access/jdk21/docs/api/java.base/java/util/SequencedCollection.html) (which extends `SequencedCollection`), and [`SequencedMap`](https://download.java.net/java/early_access/jdk21/docs/api/java.base/java/util/SequencedCollection.html).  Existing classes and interfaces have been retrofitted to used the new interfaces: `SortedSet` &amp; `LinkedHashSet` implement `SequencedSet`, `List` and `Deque` implement `SequencedCollection`, and `SortedMap` and `LinkedHashMap` implement `SequencedMap`.\r\n\r\nThe `addFirst` method on `LinkedHashSet` is defined in `SequencedCollection`.\r\n\r\nThe JDK enhancement proposal does not explain why `LinkedHashSet` didn&#39;t have an `addFirst` method before.  But in its [motivation](https://openjdk.org/jeps/431#Motivation) section, it explains why it and the other sequence-related methods were added by the feature.\r\n\r\n&gt; Javas [collections framework](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/doc-files/coll-index.html) lacks a collection type that represents a sequence of elements with a defined encounter order. It also lacks a uniform set of operations that apply across such collections. These gaps have been a repeated source of problems and complaints.\r\n&gt;\r\n&gt; []\r\n&gt; \r\n&gt; This is an unfortunate state of affairs. The concept of a collection with defined encounter order exists in multiple places in the collections framework, but there is no single type that represents it. As a result, some operations on such collections are inconsistent or missing, and processing elements in reverse order ranges from inconvenient to impossible. We should fill these gaps.","title":"Why doesn&#39;t LinkedHashSet have addFirst method?","body":"<p>As of Java 21, <code>LinkedHashSet</code> does have an <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#addFirst(E)\" rel=\"nofollow noreferrer\"><code>addFirst</code></a> method.</p>\n<blockquote>\n<p><code>public void addFirst(E e)</code></p>\n<p>Adds an element as the first element of this collection (optional operation). After this operation completes normally, the given element will be a member of this collection, and it will be the first element in encounter order.</p>\n<p>If this set already contains the element, it is relocated if necessary so that it is first in encounter order.</p>\n<p><strong>Specified by:</strong><br />\n<a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addFirst(E)\" rel=\"nofollow noreferrer\"><code>addFirst</code></a> in interface <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html\" rel=\"nofollow noreferrer\"><code>SequencedCollection&lt;E&gt;</code></a>`</p>\n<p><strong>Parameters:</strong><br />\n<code>e</code> - the element to be added</p>\n<p><strong>Since:</strong><br />\n21</p>\n</blockquote>\n<p>The <code>addFirst</code> method was added as part of the <a href=\"https://openjdk.org/jeps/431\" rel=\"nofollow noreferrer\">JEP 431: Sequenced Collections</a> feature added in Java 21.</p>\n<p>The sequenced collections feature adds three new interfaces: <a href=\"https://download.java.net/java/early_access/jdk21/docs/api/java.base/java/util/SequencedCollection.html\" rel=\"nofollow noreferrer\"><code>SequencedCollection</code></a>, <a href=\"https://download.java.net/java/early_access/jdk21/docs/api/java.base/java/util/SequencedCollection.html\" rel=\"nofollow noreferrer\"><code>SequencedSet</code></a> (which extends <code>SequencedCollection</code>), and <a href=\"https://download.java.net/java/early_access/jdk21/docs/api/java.base/java/util/SequencedCollection.html\" rel=\"nofollow noreferrer\"><code>SequencedMap</code></a>.  Existing classes and interfaces have been retrofitted to used the new interfaces: <code>SortedSet</code> &amp; <code>LinkedHashSet</code> implement <code>SequencedSet</code>, <code>List</code> and <code>Deque</code> implement <code>SequencedCollection</code>, and <code>SortedMap</code> and <code>LinkedHashMap</code> implement <code>SequencedMap</code>.</p>\n<p>The <code>addFirst</code> method on <code>LinkedHashSet</code> is defined in <code>SequencedCollection</code>.</p>\n<p>The JDK enhancement proposal does not explain why <code>LinkedHashSet</code> didn't have an <code>addFirst</code> method before.  But in its <a href=\"https://openjdk.org/jeps/431#Motivation\" rel=\"nofollow noreferrer\">motivation</a> section, it explains why it and the other sequence-related methods were added by the feature.</p>\n<blockquote>\n<p>Javas <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/doc-files/coll-index.html\" rel=\"nofollow noreferrer\">collections framework</a> lacks a collection type that represents a sequence of elements with a defined encounter order. It also lacks a uniform set of operations that apply across such collections. These gaps have been a repeated source of problems and complaints.</p>\n<p>[]</p>\n<p>This is an unfortunate state of affairs. The concept of a collection with defined encounter order exists in multiple places in the collections framework, but there is no single type that represents it. As a result, some operations on such collections are inconsistent or missing, and processing elements in reverse order ranges from inconvenient to impossible. We should fill these gaps.</p>\n</blockquote>\n"}],"owner":{"account_id":13546471,"reputation":3498,"user_id":9772691,"display_name":"John McClane"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1269,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":53878661,"answer_count":2,"score":1,"last_activity_date":1695231488,"creation_date":1545353598,"question_id":53877927,"body_markdown":"As the documentation of `LinkedHashSet` states, it is\r\n\r\n&gt; Hash table and linked list implementation of the Set interface, with\r\n&gt; predictable iteration order. This implementation differs from HashSet\r\n&gt; in that it maintains a doubly-linked list running through all of its\r\n&gt; entries.\r\n\r\nSo it&#39;s essentially a `HashSet` with FIFO queue of keys implemented by a linked list. Considering that `LinkedList` is `Deque` and permits, in particular, insertion at the beginning, I wonder why doesn&#39;t `LinkedHashSet` have the `addFirst(E e)` method in addition to the methods present in the `Set` interface. It seems not hard to implement this.","title":"Why doesn&#39;t LinkedHashSet have addFirst method?","body":"<p>As the documentation of <code>LinkedHashSet</code> states, it is</p>\n\n<blockquote>\n  <p>Hash table and linked list implementation of the Set interface, with\n  predictable iteration order. This implementation differs from HashSet\n  in that it maintains a doubly-linked list running through all of its\n  entries.</p>\n</blockquote>\n\n<p>So it's essentially a <code>HashSet</code> with FIFO queue of keys implemented by a linked list. Considering that <code>LinkedList</code> is <code>Deque</code> and permits, in particular, insertion at the beginning, I wonder why doesn't <code>LinkedHashSet</code> have the <code>addFirst(E e)</code> method in addition to the methods present in the <code>Set</code> interface. It seems not hard to implement this.</p>\n"},{"tags":["java","spring-boot","spring-test"],"answers":[{"tags":[],"owner":{"account_id":27816216,"reputation":286,"user_id":21237557,"display_name":"Ruslan Zinovyev"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695231389,"creation_date":1695231389,"answer_id":77144784,"question_id":77144500,"body_markdown":"From my perspective, your understanding is quite close to how **@SpringBootTest** works in the Spring Framework, especially when focusing on how the application context is loaded and what beans are initialized. \r\nThis annotation is often used for integration tests and ensures that the Spring context is loaded, mimicking the behavior of an actual running Spring Boot application. \r\n\r\nIf you provide an explicit **@Configuration** class using the classes attribute of **@SpringBootTest**, then only that configuration is used, and no scanning occurs. \r\nAll the required beans must be defined within that configuration class.\r\n\r\n    @SpringBootTest(classes = CustomConfiguration.class)\r\n\r\nIf you don&#39;t specify any **@Configuration** or **@TestConfiguration**, Spring will look for the primary configuration. It will scan upwards in the package structure starting from the package where your test class is defined until it finds a class annotated with **@SpringBootApplication**\r\n\r\n    @SpringBootTest\r\n\r\nOnce it locates the primary configuration, it will scan downwards from that point for all classes annotated with **@Configuration**, **@Component**, **@Service**, etc. and initialize the corresponding beans.\r\n\r\n\r\nIf you use **@TestConfiguration**, this is a special case. This annotation is used in conjunction with **@SpringBootTest** to define additional beans or to override existing beans for the test context only.\r\n\r\n\r\n    @TestConfiguration\r\n    public static class TestConfig {\r\n     &#160;&#160; // some beans\r\n    }\r\n\r\nWhen you use **@TestConfiguration**, Spring Boot still scans for the primary configuration in the manner described above. But the beans defined in **@TestConfiguration** will take precedence overriding any similarly named beans in the primary configuration.\r\n","title":"When and how exactly does @SpringBootTest scan?","body":"<p>From my perspective, your understanding is quite close to how <strong>@SpringBootTest</strong> works in the Spring Framework, especially when focusing on how the application context is loaded and what beans are initialized.\nThis annotation is often used for integration tests and ensures that the Spring context is loaded, mimicking the behavior of an actual running Spring Boot application.</p>\n<p>If you provide an explicit <strong>@Configuration</strong> class using the classes attribute of <strong>@SpringBootTest</strong>, then only that configuration is used, and no scanning occurs.\nAll the required beans must be defined within that configuration class.</p>\n<pre><code>@SpringBootTest(classes = CustomConfiguration.class)\n</code></pre>\n<p>If you don't specify any <strong>@Configuration</strong> or <strong>@TestConfiguration</strong>, Spring will look for the primary configuration. It will scan upwards in the package structure starting from the package where your test class is defined until it finds a class annotated with <strong>@SpringBootApplication</strong></p>\n<pre><code>@SpringBootTest\n</code></pre>\n<p>Once it locates the primary configuration, it will scan downwards from that point for all classes annotated with <strong>@Configuration</strong>, <strong>@Component</strong>, <strong>@Service</strong>, etc. and initialize the corresponding beans.</p>\n<p>If you use <strong>@TestConfiguration</strong>, this is a special case. This annotation is used in conjunction with <strong>@SpringBootTest</strong> to define additional beans or to override existing beans for the test context only.</p>\n<pre><code>@TestConfiguration\npublic static class TestConfig {\n  // some beans\n}\n</code></pre>\n<p>When you use <strong>@TestConfiguration</strong>, Spring Boot still scans for the primary configuration in the manner described above. But the beans defined in <strong>@TestConfiguration</strong> will take precedence overriding any similarly named beans in the primary configuration.</p>\n"}],"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1695231389,"creation_date":1695228771,"question_id":77144500,"body_markdown":"How exactly does `@SpringBootTest` scan? My current understanding is this:\r\n\r\n1. **If you pass a `@Configuration`**, it doesn&#39;t scan at all and is happy with that configuration class&#39;s beans\r\n\r\n2. **If you don&#39;t pass any configuration or pass a `@TestConfiguration`**, it scans down (the test root) and then up (the source root) until it finds a `@SpringBootConfiguration` class (or `@SpringBootApplication` that incorporates it) and then scans down for &quot;real&quot; configuration classes (those marked with `@Configuration`) and takes their beans (both declared and scanned)\r\n\r\nWhat actually happens?","title":"When and how exactly does @SpringBootTest scan?","body":"<p>How exactly does <code>@SpringBootTest</code> scan? My current understanding is this:</p>\n<ol>\n<li><p><strong>If you pass a <code>@Configuration</code></strong>, it doesn't scan at all and is happy with that configuration class's beans</p>\n</li>\n<li><p><strong>If you don't pass any configuration or pass a <code>@TestConfiguration</code></strong>, it scans down (the test root) and then up (the source root) until it finds a <code>@SpringBootConfiguration</code> class (or <code>@SpringBootApplication</code> that incorporates it) and then scans down for &quot;real&quot; configuration classes (those marked with <code>@Configuration</code>) and takes their beans (both declared and scanned)</p>\n</li>\n</ol>\n<p>What actually happens?</p>\n"},{"tags":["java","elasticsearch","spring-data-elasticsearch"],"answers":[{"tags":[],"owner":{"account_id":5534873,"reputation":18496,"user_id":4393565,"accept_rate":67,"display_name":"P.J.Meisch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695231357,"creation_date":1695231357,"answer_id":77144781,"question_id":77103134,"body_markdown":"You need to use `ReactiveElasticsearchIndicesClient.stats(IndicesStatsRequest)` to get the information about index statistics.\r\n\r\nbtw, using Spring Data Elasticsearch 5.1 against Elasticsearch is not tested.","title":"Spring data elasticsearch document count info using built in reactive client","body":"<p>You need to use <code>ReactiveElasticsearchIndicesClient.stats(IndicesStatsRequest)</code> to get the information about index statistics.</p>\n<p>btw, using Spring Data Elasticsearch 5.1 against Elasticsearch is not tested.</p>\n"}],"owner":{"account_id":7307904,"reputation":37,"user_id":6295841,"display_name":"User1254"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77144781,"answer_count":1,"score":0,"last_activity_date":1695231357,"creation_date":1694680653,"question_id":77103134,"body_markdown":"My problem:\r\n\r\nI am trying to get indices information:\r\n\r\n```\r\nIndexName\r\nIndexCreationDate\r\nIndexAlias\r\nIndexDocumentCount\r\nIndexSize\r\n```\r\nI am able to get some of that information via ```GetIndexResponse``` mentioned below. Which holds alias, mapping and setting objects. However none of them have ```IndexDocumentCount``` and ```IndexSize```. How to get that info using ```ReactiveElasticSearchClient```? \r\n\r\nI know there is a curl call which holds everything I need, but I thought there are posibilities using spring boot elastic built in java objects? \r\n```\r\n{{elastic-search-url}}/_cat/indices?v\r\n```\r\n\r\nI am using: \r\n\r\n```\r\nELK : 7.17\r\nSpring boot: spring-data-elasticsearch 5.1.3\r\n```\r\n```\r\nReactiveElasticsearchIndicesClient indices = reactiveElasticsearchClient.indices();\r\n\r\nMono&lt;GetIndexResponse&gt; getIndexResponseMono = indices.get(new GetIndexRequest.Builder().index(&quot;*&quot;).build());\r\nGetIndexResponse block = getIndexResponseMono.block();\r\n```\r\n\r\n","title":"Spring data elasticsearch document count info using built in reactive client","body":"<p>My problem:</p>\n<p>I am trying to get indices information:</p>\n<pre><code>IndexName\nIndexCreationDate\nIndexAlias\nIndexDocumentCount\nIndexSize\n</code></pre>\n<p>I am able to get some of that information via <code>GetIndexResponse</code> mentioned below. Which holds alias, mapping and setting objects. However none of them have <code>IndexDocumentCount</code> and <code>IndexSize</code>. How to get that info using <code>ReactiveElasticSearchClient</code>?</p>\n<p>I know there is a curl call which holds everything I need, but I thought there are posibilities using spring boot elastic built in java objects?</p>\n<pre><code>{{elastic-search-url}}/_cat/indices?v\n</code></pre>\n<p>I am using:</p>\n<pre><code>ELK : 7.17\nSpring boot: spring-data-elasticsearch 5.1.3\n</code></pre>\n<pre><code>ReactiveElasticsearchIndicesClient indices = reactiveElasticsearchClient.indices();\n\nMono&lt;GetIndexResponse&gt; getIndexResponseMono = indices.get(new GetIndexRequest.Builder().index(&quot;*&quot;).build());\nGetIndexResponse block = getIndexResponseMono.block();\n</code></pre>\n"},{"tags":["java","sorting","set"],"comments":[{"owner":{"account_id":324610,"reputation":18889,"user_id":645270,"accept_rate":100,"display_name":"keyser"},"score":4,"creation_date":1337941781,"post_id":10752753,"comment_id":13973986,"body_markdown":"&quot;The elements are returned in no particular order (unless this set is an instance of some class that provides a guarantee).&quot; is what the iterator method for a set says. found [here](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Set.html)","body":"&quot;The elements are returned in no particular order (unless this set is an instance of some class that provides a guarantee).&quot; is what the iterator method for a set says. found <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Set.html\" rel=\"nofollow noreferrer\">here</a>"}],"answers":[{"tags":[],"owner":{"account_id":317159,"reputation":8327,"user_id":633684,"display_name":"xiaofeng.li"},"down_vote_count":1,"up_vote_count":148,"is_accepted":false,"score":147,"last_activity_date":1463163309,"creation_date":1337941760,"answer_id":10752792,"question_id":10752753,"body_markdown":"[LinkedHashSet][1] is what you need.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html","title":"Java Set retain order?","body":"<p><a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html\">LinkedHashSet</a> is what you need.</p>\n"},{"tags":[],"owner":{"account_id":1469954,"reputation":1916,"user_id":1381767,"accept_rate":75,"display_name":"javatutorial"},"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1337941785,"creation_date":1337941785,"answer_id":10752796,"question_id":10752753,"body_markdown":"Set is just an interface. In order to retain order, you have to use a specific implementation of that interface and the sub-interface SortedSet, for example TreeSet or LinkedHashSet. You can wrap your Set this way:\r\n\r\n    Set myOrderedSet = new LinkedHashSet(mySet);","title":"Java Set retain order?","body":"<p>Set is just an interface. In order to retain order, you have to use a specific implementation of that interface and the sub-interface SortedSet, for example TreeSet or LinkedHashSet. You can wrap your Set this way:</p>\n\n<pre><code>Set myOrderedSet = new LinkedHashSet(mySet);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1024230,"reputation":120585,"user_id":1033896,"accept_rate":71,"display_name":"hmjd"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1337941811,"creation_date":1337941811,"answer_id":10752803,"question_id":10752753,"body_markdown":"From the javadoc for `Set.iterator()`:\r\n\r\n&gt;Returns an iterator over the elements in this set. The elements are returned in no particular order (unless this set is an instance of some class that provides a guarantee). \r\n\r\nAnd, as already stated by [shuuchan](https://stackoverflow.com/users/1381767/shuuchan), a `TreeSet` is an implemention of `Set` that has a guaranteed order:\r\n\r\n&gt;The elements are ordered using their natural ordering, or by a Comparator provided at set creation time, depending on which constructor is used. \r\n\r\n","title":"Java Set retain order?","body":"<p>From the javadoc for <code>Set.iterator()</code>:</p>\n\n<blockquote>\n  <p>Returns an iterator over the elements in this set. The elements are returned in no particular order (unless this set is an instance of some class that provides a guarantee). </p>\n</blockquote>\n\n<p>And, as already stated by <a href=\"https://stackoverflow.com/users/1381767/shuuchan\">shuuchan</a>, a <code>TreeSet</code> is an implemention of <code>Set</code> that has a guaranteed order:</p>\n\n<blockquote>\n  <p>The elements are ordered using their natural ordering, or by a Comparator provided at set creation time, depending on which constructor is used. </p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":152622,"reputation":490044,"user_id":367273,"accept_rate":96,"display_name":"NPE"},"down_vote_count":0,"up_vote_count":357,"is_accepted":true,"score":357,"last_activity_date":1537696576,"creation_date":1337941812,"answer_id":10752804,"question_id":10752753,"body_markdown":"The [`Set`][1] interface does not provide any ordering guarantees.\r\n\r\nIts sub-interface [`SortedSet`][2] represents a set that is sorted according to some criterion. In Java 6, there are two standard containers that implement `SortedSet`. They are [`TreeSet`][3] and [`ConcurrentSkipListSet`][4].\r\n\r\nIn addition to the `SortedSet` interface, there is also the [`LinkedHashSet`][5] class. It remembers the order in which the elements were inserted into the set, and returns its elements in that order.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/Set.html\r\n  [2]: http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html\r\n  [3]: http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html\r\n  [4]: http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListSet.html\r\n  [5]: http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html","title":"Java Set retain order?","body":"<p>The <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Set.html\" rel=\"noreferrer\"><code>Set</code></a> interface does not provide any ordering guarantees.</p>\n\n<p>Its sub-interface <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html\" rel=\"noreferrer\"><code>SortedSet</code></a> represents a set that is sorted according to some criterion. In Java 6, there are two standard containers that implement <code>SortedSet</code>. They are <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html\" rel=\"noreferrer\"><code>TreeSet</code></a> and <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListSet.html\" rel=\"noreferrer\"><code>ConcurrentSkipListSet</code></a>.</p>\n\n<p>In addition to the <code>SortedSet</code> interface, there is also the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html\" rel=\"noreferrer\"><code>LinkedHashSet</code></a> class. It remembers the order in which the elements were inserted into the set, and returns its elements in that order.</p>\n"},{"tags":[],"owner":{"account_id":1408752,"reputation":1082,"user_id":1335794,"accept_rate":17,"display_name":"user1335794"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1337941844,"creation_date":1337941844,"answer_id":10752813,"question_id":10752753,"body_markdown":"Normally set does not keep the order, such as HashSet in order to quickly find a emelent, but you can try LinkedHashSet it will keep the order which you put in.","title":"Java Set retain order?","body":"<p>Normally set does not keep the order, such as HashSet in order to quickly find a emelent, but you can try LinkedHashSet it will keep the order which you put in.</p>\n"},{"tags":[],"owner":{"account_id":71958,"reputation":753,"user_id":207935,"display_name":"Jens Borgland"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1337941858,"creation_date":1337941858,"answer_id":10752818,"question_id":10752753,"body_markdown":"The Set interface itself does not stipulate any particular order. The [SortedSet][1] does however. \r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html","title":"Java Set retain order?","body":"<p>The Set interface itself does not stipulate any particular order. The <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html\" rel=\"nofollow\">SortedSet</a> does however. </p>\n"},{"tags":[],"owner":{"account_id":1458820,"reputation":7821,"user_id":1373711,"accept_rate":83,"display_name":"JHS"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1337943211,"creation_date":1337941864,"answer_id":10752821,"question_id":10752753,"body_markdown":"To retain the order use `List` or a `LinkedHashSet`.","title":"Java Set retain order?","body":"<p>To retain the order use <code>List</code> or a <code>LinkedHashSet</code>.</p>\n"},{"tags":[],"owner":{"account_id":1503465,"reputation":1125,"user_id":1407398,"display_name":"ejb_guy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1337941906,"creation_date":1337941906,"answer_id":10752826,"question_id":10752753,"body_markdown":"Iterator returned by Set is not suppose to return data in Ordered way. \r\nSee this https://stackoverflow.com/questions/10734953/two-java-util-iterators-to-the-same-collection-do-they-have-to-return-elements/10735036#10735036","title":"Java Set retain order?","body":"<p>Iterator returned by Set is not suppose to return data in Ordered way. \nSee this <a href=\"https://stackoverflow.com/questions/10734953/two-java-util-iterators-to-the-same-collection-do-they-have-to-return-elements/10735036#10735036\">Two java.util.Iterators to the same collection: do they have to return elements in the same order?</a></p>\n"},{"tags":[],"owner":{"display_name":"user1417163"},"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1337941995,"creation_date":1337941995,"answer_id":10752848,"question_id":10752753,"body_markdown":"Only `SortedSet` can do the ordering of the `Set`","title":"Java Set retain order?","body":"<p>Only <code>SortedSet</code> can do the ordering of the <code>Set</code></p>\n"},{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1337942478,"creation_date":1337942160,"answer_id":10752900,"question_id":10752753,"body_markdown":"Here is a quick summary of the order characteristics of the standard `Set` implementations available in Java:\r\n\r\n1. keep the insertion order: [LinkedHashSet][1] and [CopyOnWriteArraySet][4] (thread-safe)\r\n2. keep the items sorted within the set: [TreeSet][2], [EnumSet][5] (specific to enums) and [ConcurrentSkipListSet][3] (thread-safe)\r\n3. does not keep the items in any specific order: [HashSet][6] (the one you tried)\r\n\r\nFor your specific case, you can either sort the items first and then use any of 1 or 2 (most likely `LinkedHashSet` or `TreeSet`). Or alternatively and **more efficiently**, you can just add unsorted data to a `TreeSet` which will take care of the sorting automatically for you.\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html\r\n  [3]: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentSkipListSet.html\r\n  [4]: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArraySet.html\r\n  [5]: http://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html\r\n  [6]: http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html","title":"Java Set retain order?","body":"<p>Here is a quick summary of the order characteristics of the standard <code>Set</code> implementations available in Java:</p>\n\n<ol>\n<li>keep the insertion order: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html\" rel=\"noreferrer\">LinkedHashSet</a> and <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArraySet.html\" rel=\"noreferrer\">CopyOnWriteArraySet</a> (thread-safe)</li>\n<li>keep the items sorted within the set: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html\" rel=\"noreferrer\">TreeSet</a>, <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html\" rel=\"noreferrer\">EnumSet</a> (specific to enums) and <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentSkipListSet.html\" rel=\"noreferrer\">ConcurrentSkipListSet</a> (thread-safe)</li>\n<li>does not keep the items in any specific order: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html\" rel=\"noreferrer\">HashSet</a> (the one you tried)</li>\n</ol>\n\n<p>For your specific case, you can either sort the items first and then use any of 1 or 2 (most likely <code>LinkedHashSet</code> or <code>TreeSet</code>). Or alternatively and <strong>more efficiently</strong>, you can just add unsorted data to a <code>TreeSet</code> which will take care of the sorting automatically for you.</p>\n"},{"tags":[],"owner":{"account_id":2036969,"reputation":300,"user_id":1819092,"display_name":"Lakshman"},"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1511547806,"creation_date":1354865430,"answer_id":13758779,"question_id":10752753,"body_markdown":"As many of the members suggested use **LinkedHashSet** to retain the order of the collection.\r\nU can wrap your set using this implementation.\r\n\r\n**SortedSet** implementation can be used for sorted order but for your purpose use **LinkedHashSet**.\r\n\r\nAlso from the docs, \r\n\r\n&quot;This implementation spares its clients from the unspecified, generally chaotic ordering provided by HashSet, without incurring the increased cost associated with TreeSet. It can be used to produce a copy of a set that has the same order as the original, regardless of the original set&#39;s implementation:&quot;\r\n\r\nSource : http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html","title":"Java Set retain order?","body":"<p>As many of the members suggested use <strong>LinkedHashSet</strong> to retain the order of the collection.\nU can wrap your set using this implementation.</p>\n\n<p><strong>SortedSet</strong> implementation can be used for sorted order but for your purpose use <strong>LinkedHashSet</strong>.</p>\n\n<p>Also from the docs, </p>\n\n<p>\"This implementation spares its clients from the unspecified, generally chaotic ordering provided by HashSet, without incurring the increased cost associated with TreeSet. It can be used to produce a copy of a set that has the same order as the original, regardless of the original set's implementation:\"</p>\n\n<p>Source : <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html</a></p>\n"},{"tags":[],"owner":{"account_id":7406733,"reputation":633,"user_id":5635466,"display_name":"Danail Tsvetanov"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1522843092,"creation_date":1522843092,"answer_id":49650415,"question_id":10752753,"body_markdown":"A LinkedHashSet is an ordered version of HashSet that maintains a doubly-linked List across all elements. Use this class instead of HashSet when you care about the iteration order.","title":"Java Set retain order?","body":"<p>A LinkedHashSet is an ordered version of HashSet that maintains a doubly-linked List across all elements. Use this class instead of HashSet when you care about the iteration order.</p>\n"},{"tags":[],"owner":{"account_id":3349506,"reputation":76,"user_id":2813820,"display_name":"Aruna"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1572464295,"creation_date":1570031058,"answer_id":58204944,"question_id":10752753,"body_markdown":"There are 2 different things.\r\n\r\n1. Sort the elements in a set. For which we have SortedSet and similar implementations. \r\n2. Maintain insertion order in a set. For which LinkedHashSet and CopyOnWriteArraySet (thread-safe) can be used.","title":"Java Set retain order?","body":"<p>There are 2 different things.</p>\n\n<ol>\n<li>Sort the elements in a set. For which we have SortedSet and similar implementations. </li>\n<li>Maintain insertion order in a set. For which LinkedHashSet and CopyOnWriteArraySet (thread-safe) can be used.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695231079,"creation_date":1686602973,"answer_id":76460236,"question_id":10752753,"body_markdown":"The `Set` interface does not require a well-defined encounter order, a fact which is explicitly called out in the Javadocs for its [`iterator`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html#iterator()) method:\r\n\r\n&gt; Returns an iterator over the elements in this set. The elements are returned in no particular order (unless this set is an instance of some class that provides a guarantee).\r\n\r\nJava 21 introduced the [`SequencedSet`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html) interface, which is a subinterface of `Set` that also requires that the implementation have a well-defined encounter order.  Both `LinkedHashSet` and `SortedSet` implement/extend this new interface.\r\n\r\nIf both encounter order and `Set` semantics are important, an implementation of `SequencedSet` can be used to achieve the desired behavior.","title":"Java Set retain order?","body":"<p>The <code>Set</code> interface does not require a well-defined encounter order, a fact which is explicitly called out in the Javadocs for its <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html#iterator()\" rel=\"nofollow noreferrer\"><code>iterator</code></a> method:</p>\n<blockquote>\n<p>Returns an iterator over the elements in this set. The elements are returned in no particular order (unless this set is an instance of some class that provides a guarantee).</p>\n</blockquote>\n<p>Java 21 introduced the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html\" rel=\"nofollow noreferrer\"><code>SequencedSet</code></a> interface, which is a subinterface of <code>Set</code> that also requires that the implementation have a well-defined encounter order.  Both <code>LinkedHashSet</code> and <code>SortedSet</code> implement/extend this new interface.</p>\n<p>If both encounter order and <code>Set</code> semantics are important, an implementation of <code>SequencedSet</code> can be used to achieve the desired behavior.</p>\n"}],"owner":{"account_id":447352,"reputation":5292,"user_id":840930,"accept_rate":82,"display_name":"user840930"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":287926,"favorite_count":0,"down_vote_count":4,"up_vote_count":247,"accepted_answer_id":10752804,"answer_count":14,"score":243,"last_activity_date":1695231079,"creation_date":1337941621,"question_id":10752753,"body_markdown":"Does a Java Set retain order?  A method is returning a Set to me and supposedly the data is ordered but iterating over the Set, the data is unordered.  Is there a better way to manage this? Does the method need to be changed to return something other than a Set?","title":"Java Set retain order?","body":"<p>Does a Java Set retain order?  A method is returning a Set to me and supposedly the data is ordered but iterating over the Set, the data is unordered.  Is there a better way to manage this? Does the method need to be changed to return something other than a Set?</p>\n"},{"tags":["java","eclipse","fonts"],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299828,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":1,"up_vote_count":16,"is_accepted":true,"score":15,"last_activity_date":1419102693,"creation_date":1419102693,"answer_id":27583444,"question_id":27583403,"body_markdown":"The default font Eclipse uses for (Java) code is Monospace.","title":"Eclipse Default Font name","body":"<p>The default font Eclipse uses for (Java) code is Monospace.</p>\n"},{"tags":[],"owner":{"account_id":5851030,"reputation":526,"user_id":4609700,"display_name":"Crenguta S"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1457503172,"creation_date":1457503172,"answer_id":35884068,"question_id":27583403,"body_markdown":"Depending on your Eclipse version, the font might differ. Go to Window-&gt; Preferences-&gt;General-&gt;Appearance-&gt;Color and Fonts. Choose Basic-&gt;Text Font and you can hit the Edit button to change font type and font size. It will be used by several other properties below that default to this font.","title":"Eclipse Default Font name","body":"<p>Depending on your Eclipse version, the font might differ. Go to Window-> Preferences->General->Appearance->Color and Fonts. Choose Basic->Text Font and you can hit the Edit button to change font type and font size. It will be used by several other properties below that default to this font.</p>\n"},{"tags":[],"owner":{"account_id":11913918,"reputation":183,"user_id":8718319,"display_name":"Rajiv"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1513773127,"creation_date":1513768910,"answer_id":47904863,"question_id":27583403,"body_markdown":"The default font style eclipse is using is `Consolas` however `Courier New` is also a good option to go with.","title":"Eclipse Default Font name","body":"<p>The default font style eclipse is using is <code>Consolas</code> however <code>Courier New</code> is also a good option to go with.</p>\n"},{"tags":[],"owner":{"account_id":10490756,"reputation":1,"user_id":7732729,"display_name":"Vishal Sharma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695231048,"creation_date":1695231048,"answer_id":77144756,"question_id":27583403,"body_markdown":"For the Code, we see It&#39;s Menlo with font size as 14","title":"Eclipse Default Font name","body":"<p>For the Code, we see It's Menlo with font size as 14</p>\n"}],"owner":{"display_name":"user3265784"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28886,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":27583444,"answer_count":4,"score":19,"last_activity_date":1695231048,"creation_date":1419102287,"question_id":27583403,"body_markdown":"What&#39;s the default font that Eclipse uses for Java code?","title":"Eclipse Default Font name","body":"<p>What's the default font that Eclipse uses for Java code?</p>\n"},{"tags":["java","hashset","sublist","linkedhashset"],"answers":[{"tags":[],"owner":{"account_id":6130581,"reputation":511,"user_id":4780910,"display_name":"grebesche"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1460268292,"creation_date":1460268292,"answer_id":36526438,"question_id":36526324,"body_markdown":"If you use Java 8 and you are ok to get back a `HashSet` (instead of a `LinkedHashSet`), you can use the Stream API:\r\n\r\n    Set&lt;String&gt; newSet = set.stream()\r\n                            .skip(set.size() - 5)\r\n                            .collect(Collectors.&lt;String&gt;toSet());","title":"Get a sublist last 5 elements of LinkedHashSet?","body":"<p>If you use Java 8 and you are ok to get back a <code>HashSet</code> (instead of a <code>LinkedHashSet</code>), you can use the Stream API:</p>\n\n<pre><code>Set&lt;String&gt; newSet = set.stream()\n                        .skip(set.size() - 5)\n                        .collect(Collectors.&lt;String&gt;toSet());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1646146,"reputation":253,"user_id":1517668,"display_name":"muzahidbechara"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1460269969,"creation_date":1460269437,"answer_id":36526566,"question_id":36526324,"body_markdown":"Using ``ArrayList`` you could get a better performance:\r\n\r\n\tlong s1 = System.nanoTime();\r\n\tLinkedHashSet&lt;String&gt; last5 = new LinkedHashSet&lt;String&gt;(new LinkedList&lt;String&gt;(set)\r\n\t\t\t.subList(Math.max(0, set.size() - 5), set.size()));\r\n\tSystem.out.println(System.nanoTime() - s1);\r\n\t\r\n\ts1 = System.nanoTime();\r\n\tLinkedHashSet&lt;String&gt; usingArrayList = new LinkedHashSet&lt;String&gt;(new ArrayList&lt;String&gt;(set)\r\n\t\t\t.subList(Math.max(0, set.size() - 5), set.size()));\r\n\tSystem.out.println(System.nanoTime() - s1);","title":"Get a sublist last 5 elements of LinkedHashSet?","body":"<p>Using <code>ArrayList</code> you could get a better performance:</p>\n\n<pre><code>long s1 = System.nanoTime();\nLinkedHashSet&lt;String&gt; last5 = new LinkedHashSet&lt;String&gt;(new LinkedList&lt;String&gt;(set)\n        .subList(Math.max(0, set.size() - 5), set.size()));\nSystem.out.println(System.nanoTime() - s1);\n\ns1 = System.nanoTime();\nLinkedHashSet&lt;String&gt; usingArrayList = new LinkedHashSet&lt;String&gt;(new ArrayList&lt;String&gt;(set)\n        .subList(Math.max(0, set.size() - 5), set.size()));\nSystem.out.println(System.nanoTime() - s1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1460272060,"creation_date":1460271660,"answer_id":36526891,"question_id":36526324,"body_markdown":"Here&#39;s the problem.  The iterators for a `LinkedHashSet` are unidirectional; i.e. you can&#39;t iterate backwards, even though the underlying data structure has a doubly-linked list.  That means to get the last N you need to iterate to the end of the list.  That is `O(N)`.\r\n\r\nIn your algorithm, the `LinkedList` constructor is copying the set into a new data structure using (probably) the iterator.\r\n\r\nBy contrast, the `TreeSet` API has an `descendingIterator()` method that returns an `Iterator` that iterates backwards through the list.  If you use that correctly, you can get the last 5 elements of the set in `O(1)`.  The downside is that adding elements to the set will be `O(logN)` instead of `O(1)` for a hash-based set.","title":"Get a sublist last 5 elements of LinkedHashSet?","body":"<p>Here's the problem.  The iterators for a <code>LinkedHashSet</code> are unidirectional; i.e. you can't iterate backwards, even though the underlying data structure has a doubly-linked list.  That means to get the last N you need to iterate to the end of the list.  That is <code>O(N)</code>.</p>\n\n<p>In your algorithm, the <code>LinkedList</code> constructor is copying the set into a new data structure using (probably) the iterator.</p>\n\n<p>By contrast, the <code>TreeSet</code> API has an <code>descendingIterator()</code> method that returns an <code>Iterator</code> that iterates backwards through the list.  If you use that correctly, you can get the last 5 elements of the set in <code>O(1)</code>.  The downside is that adding elements to the set will be <code>O(logN)</code> instead of <code>O(1)</code> for a hash-based set.</p>\n"},{"tags":[],"owner":{"account_id":3536268,"reputation":1201,"user_id":2954496,"accept_rate":88,"display_name":"Bob"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1460281682,"creation_date":1460281682,"answer_id":36528221,"question_id":36526324,"body_markdown":"I ended up using this:\r\n\r\n    com.google.common.collect.EvictingQueue&lt;E&gt;\r\n    \r\n\r\nwith this you get to keep only the **last x elements**.\r\n\r\n    EvictingQueue&lt;String&gt; queue = EvictingQueue.create(5);","title":"Get a sublist last 5 elements of LinkedHashSet?","body":"<p>I ended up using this:</p>\n\n<pre><code>com.google.common.collect.EvictingQueue&lt;E&gt;\n</code></pre>\n\n<p>with this you get to keep only the <strong>last x elements</strong>.</p>\n\n<pre><code>EvictingQueue&lt;String&gt; queue = EvictingQueue.create(5);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695230983,"creation_date":1686603698,"answer_id":76460309,"question_id":36526324,"body_markdown":"This can be efficiently achieved using the [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#reversed()) method added to `LinkedHashSet` in Java 21 as part of the [`SequencedSet`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html) interface.\r\n\r\n```lang-java\r\nLinkedHashSet&lt;String&gt; lastFive = new LinkedHashSet&lt;&gt;(set.reversed().stream()\r\n        .limit(5).toCollection(LinkedHashSet::new).reversed());\r\n```\r\n\r\nThis can be simplified to use the `reversed` `Set` directly if the returned set doesn&#39;t need to be a `LinkedHashSet`, but just a mutable `Set` with a well-defined iteration order and near-identical characteristics of a `LinkedHashSet`:\r\n\r\n```lang-java\r\nSequencedSet&lt;String&gt; lastFive = set.reversed().stream()\r\n        .limit(5).toCollection(LinkedHashSet::new).reversed();\r\n```","title":"Get a sublist last 5 elements of LinkedHashSet?","body":"<p>This can be efficiently achieved using the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method added to <code>LinkedHashSet</code> in Java 21 as part of the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html\" rel=\"nofollow noreferrer\"><code>SequencedSet</code></a> interface.</p>\n<pre class=\"lang-java prettyprint-override\"><code>LinkedHashSet&lt;String&gt; lastFive = new LinkedHashSet&lt;&gt;(set.reversed().stream()\n        .limit(5).toCollection(LinkedHashSet::new).reversed());\n</code></pre>\n<p>This can be simplified to use the <code>reversed</code> <code>Set</code> directly if the returned set doesn't need to be a <code>LinkedHashSet</code>, but just a mutable <code>Set</code> with a well-defined iteration order and near-identical characteristics of a <code>LinkedHashSet</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SequencedSet&lt;String&gt; lastFive = set.reversed().stream()\n        .limit(5).toCollection(LinkedHashSet::new).reversed();\n</code></pre>\n"}],"owner":{"account_id":3536268,"reputation":1201,"user_id":2954496,"accept_rate":88,"display_name":"Bob"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1399,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":36528221,"answer_count":5,"score":1,"last_activity_date":1695230983,"creation_date":1460267315,"question_id":36526324,"body_markdown":"Is there a one liner to get the last 5 elements of a LinkedHashSet in a new LinkedHashSet?\r\n\r\nThis is what I currently have, but it&#39;s not very efficient:\r\n\r\n    new LinkedHashSet&lt;String&gt;(new LinkedList&lt;String&gt;(set)\r\n    .subList(Math.max(0, set.size() - 5), set.size());\r\n\r\nOr should I use for this case a TreeSet, SortedSet, HashSet ?","title":"Get a sublist last 5 elements of LinkedHashSet?","body":"<p>Is there a one liner to get the last 5 elements of a LinkedHashSet in a new LinkedHashSet?</p>\n\n<p>This is what I currently have, but it's not very efficient:</p>\n\n<pre><code>new LinkedHashSet&lt;String&gt;(new LinkedList&lt;String&gt;(set)\n.subList(Math.max(0, set.size() - 5), set.size());\n</code></pre>\n\n<p>Or should I use for this case a TreeSet, SortedSet, HashSet ?</p>\n"},{"tags":["java","oop","collections"],"comments":[{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1324041985,"post_id":8534763,"comment_id":10570963,"body_markdown":"Ordered or sorted? Ordered, you&#39;re probably best off with a `List`.","body":"Ordered or sorted? Ordered, you&#39;re probably best off with a <code>List</code>."},{"owner":{"account_id":23699,"reputation":5769,"user_id":59572,"display_name":"Fredrik"},"score":0,"creation_date":1324042033,"post_id":8534763,"comment_id":10570981,"body_markdown":"Because I cannot imagine why it would matter it is hard to answer but another alternative is to return a Set and write in the javadoc that it is ordered. The caller wouldn&#39;t typically care, would he? It is the same interface.","body":"Because I cannot imagine why it would matter it is hard to answer but another alternative is to return a Set and write in the javadoc that it is ordered. The caller wouldn&#39;t typically care, would he? It is the same interface."}],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1324042769,"creation_date":1324041904,"answer_id":8534803,"question_id":8534763,"body_markdown":"You can return `SortedSet` - it means the items are sorted, and are unique.\r\n\r\nYou can also use `SetUniqueList` (from commons-collection) and return `List` (indicating in the javadoc that the elements are unique), or any set and return `Set` (and indicate the ordered property in javadoc)\r\n\r\n`LinkedHashSet` retains the insertion order, but since your object is likely doing the inserts, it means nothing to the client.","title":"LinkedHashSet as a returning type of API public method","body":"<p>You can return <code>SortedSet</code> - it means the items are sorted, and are unique.</p>\n\n<p>You can also use <code>SetUniqueList</code> (from commons-collection) and return <code>List</code> (indicating in the javadoc that the elements are unique), or any set and return <code>Set</code> (and indicate the ordered property in javadoc)</p>\n\n<p><code>LinkedHashSet</code> retains the insertion order, but since your object is likely doing the inserts, it means nothing to the client.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1324041967,"creation_date":1324041967,"answer_id":8534817,"question_id":8534763,"body_markdown":"It you want to make it clear they are unique and are ordered purely based on the order of insertion, you could return `LinkedHashSet` However, `Set` is usually the better choice.","title":"LinkedHashSet as a returning type of API public method","body":"<p>It you want to make it clear they are unique and are ordered purely based on the order of insertion, you could return <code>LinkedHashSet</code> However, <code>Set</code> is usually the better choice.</p>\n"},{"tags":[],"owner":{"account_id":347037,"reputation":79658,"user_id":680925,"display_name":"Perception"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1324041978,"creation_date":1324041978,"answer_id":8534822,"question_id":8534763,"body_markdown":"If you&#39;re items are unique then I would return a Set. Then include in the Javadoc for the method that the items are guaranteed to be in sorted order.","title":"LinkedHashSet as a returning type of API public method","body":"<p>If you're items are unique then I would return a Set. Then include in the Javadoc for the method that the items are guaranteed to be in sorted order.</p>\n"},{"tags":[],"owner":{"account_id":953149,"reputation":177293,"user_id":978917,"accept_rate":86,"display_name":"ruakh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1324042095,"creation_date":1324042095,"answer_id":8534845,"question_id":8534763,"body_markdown":"I would only give a method the return type `LinkedHashSet&lt;...&gt;` if it&#39;s part of the method&#39;s *contract* that its return-value is a `Set&lt;...&gt;` with a consistent ordering. And even then I&#39;d be a bit wary of doing that unless it&#39;s *also* part of the method&#39;s contract that its return-value is modifiable, since otherwise `LinkedHashSet&lt;...&gt;` also precludes the use of `Collections.unmodifiableSet(...)`.\r\n\r\nIn most cases, I think `Set&lt;...&gt;` is a better return-type. Alternatively, if the consistent ordering is particularly important, then you can use `SortedSet&lt;...&gt;` and switch to one of the implementations of that (such as `TreeSet&lt;...&gt;`); that still allows `Collections.unmodifiableSortedSet(...)`.","title":"LinkedHashSet as a returning type of API public method","body":"<p>I would only give a method the return type <code>LinkedHashSet&lt;...&gt;</code> if it's part of the method's <em>contract</em> that its return-value is a <code>Set&lt;...&gt;</code> with a consistent ordering. And even then I'd be a bit wary of doing that unless it's <em>also</em> part of the method's contract that its return-value is modifiable, since otherwise <code>LinkedHashSet&lt;...&gt;</code> also precludes the use of <code>Collections.unmodifiableSet(...)</code>.</p>\n\n<p>In most cases, I think <code>Set&lt;...&gt;</code> is a better return-type. Alternatively, if the consistent ordering is particularly important, then you can use <code>SortedSet&lt;...&gt;</code> and switch to one of the implementations of that (such as <code>TreeSet&lt;...&gt;</code>); that still allows <code>Collections.unmodifiableSortedSet(...)</code>.</p>\n"},{"tags":[],"owner":{"account_id":50396,"reputation":37361,"user_id":150339,"accept_rate":71,"display_name":"Bruno Reis"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1324042484,"creation_date":1324042154,"answer_id":8534862,"question_id":8534763,"body_markdown":"To answer your question, you should ask yourself: **&quot;What is the most generic type that specifies the characteristcs of what this method returns?&quot;**\r\n\r\nIf the characteristic of the method is to return a a handful of *unique* objects, *sorted* in some way, then the most generic standard class that represents this is `SortedSet`.\r\n\r\nIf you return a `TreeSet`, then the method is giving details on the implementation of what it returns (ie, TreeSet is a concrete class, not an interface), which often you want to avoid in OOP.\r\n\r\nIf you return a `Collection`, you are not stating that the objects are unique, nor that they are sorted in some way.\r\n\r\nIf you return a `LinkedHashSet`, not only you fail to state that the returned collection is somehow sorted, but you also fail in the abstraction aspect of OOP (this is a concrete class, so you are leaking implementation details; always try to return interfaces, unless you have a good reason).","title":"LinkedHashSet as a returning type of API public method","body":"<p>To answer your question, you should ask yourself: <strong>\"What is the most generic type that specifies the characteristcs of what this method returns?\"</strong></p>\n\n<p>If the characteristic of the method is to return a a handful of <em>unique</em> objects, <em>sorted</em> in some way, then the most generic standard class that represents this is <code>SortedSet</code>.</p>\n\n<p>If you return a <code>TreeSet</code>, then the method is giving details on the implementation of what it returns (ie, TreeSet is a concrete class, not an interface), which often you want to avoid in OOP.</p>\n\n<p>If you return a <code>Collection</code>, you are not stating that the objects are unique, nor that they are sorted in some way.</p>\n\n<p>If you return a <code>LinkedHashSet</code>, not only you fail to state that the returned collection is somehow sorted, but you also fail in the abstraction aspect of OOP (this is a concrete class, so you are leaking implementation details; always try to return interfaces, unless you have a good reason).</p>\n"},{"tags":[],"owner":{"account_id":220781,"reputation":2881,"user_id":478380,"accept_rate":89,"display_name":"Gnat"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1324043076,"creation_date":1324042166,"answer_id":8534866,"question_id":8534763,"body_markdown":"I&#39;d recommend against returning `LinkedHashSet` (unless you have a very good justification for it). If you return `Set`, you can change the `Set` implementation as you see fit, e.g. `HashSet`, `TreeSet` etc\r\n\r\nIn this case, I think your suggestion of returning `Set` is a good one as it does indicate that the items are unique. This also indicates that `contains` will generally be fast (O(1) or O(log n)).\r\n\r\nOn the other hand, `Collection` is very generic, but all it tells the caller is that it is a plain old group of somethings without any special constraints on ordering or uniqueness. Specifying `Set` means that there isn&#39;t any confusion about uniqueness, and you can use it anywhere where a `Collection` can be used anyway.","title":"LinkedHashSet as a returning type of API public method","body":"<p>I'd recommend against returning <code>LinkedHashSet</code> (unless you have a very good justification for it). If you return <code>Set</code>, you can change the <code>Set</code> implementation as you see fit, e.g. <code>HashSet</code>, <code>TreeSet</code> etc</p>\n\n<p>In this case, I think your suggestion of returning <code>Set</code> is a good one as it does indicate that the items are unique. This also indicates that <code>contains</code> will generally be fast (O(1) or O(log n)).</p>\n\n<p>On the other hand, <code>Collection</code> is very generic, but all it tells the caller is that it is a plain old group of somethings without any special constraints on ordering or uniqueness. Specifying <code>Set</code> means that there isn't any confusion about uniqueness, and you can use it anywhere where a <code>Collection</code> can be used anyway.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695230939,"creation_date":1686606653,"answer_id":76460533,"question_id":8534763,"body_markdown":"Starting with Java 21 you could return a [`SequencedSet`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html).  This would indicate that the result is both a `Set` with unique elements, and a [`SequencedCollection`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html) with a well-defined encounter order.\r\n\r\nThis has the additional benefits involved with having method signatures defined in terms of interfaces rather than concrete classes.  For instance, by not declaring the specific implementation type returned gives latitude to future changes to the method to return a different type of collection that may make more sense to the future implementation, while still guaranteeing that be a `Set` with a well-defined ordering.","title":"LinkedHashSet as a returning type of API public method","body":"<p>Starting with Java 21 you could return a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html\" rel=\"nofollow noreferrer\"><code>SequencedSet</code></a>.  This would indicate that the result is both a <code>Set</code> with unique elements, and a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html\" rel=\"nofollow noreferrer\"><code>SequencedCollection</code></a> with a well-defined encounter order.</p>\n<p>This has the additional benefits involved with having method signatures defined in terms of interfaces rather than concrete classes.  For instance, by not declaring the specific implementation type returned gives latitude to future changes to the method to return a different type of collection that may make more sense to the future implementation, while still guaranteeing that be a <code>Set</code> with a well-defined ordering.</p>\n"}],"owner":{"account_id":1047162,"reputation":4175,"user_id":1051927,"accept_rate":77,"display_name":"narek.gevorgyan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":530,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":8534866,"answer_count":7,"score":3,"last_activity_date":1695230939,"creation_date":1324041673,"question_id":8534763,"body_markdown":"Let&#39;s consider the following example.\r\n\r\nWriting API which has public method which returns Collection of unique Objects.\r\nI believe that is is good to write return type of that method `Set` to show to user that the items are unique. \r\nIn case when these items are unique and ordered is it a right idea to write return type `LinkedHashSet` or it is good to be `Collection`?\r\n\r\nI know collections which are unique and sorted. I what to know it is a good idea to set public method&#39;s return type class(TreeSet,SortedSet,LinkedHashSet). In in terms of oop.","title":"LinkedHashSet as a returning type of API public method","body":"<p>Let's consider the following example.</p>\n\n<p>Writing API which has public method which returns Collection of unique Objects.\nI believe that is is good to write return type of that method <code>Set</code> to show to user that the items are unique. \nIn case when these items are unique and ordered is it a right idea to write return type <code>LinkedHashSet</code> or it is good to be <code>Collection</code>?</p>\n\n<p>I know collections which are unique and sorted. I what to know it is a good idea to set public method's return type class(TreeSet,SortedSet,LinkedHashSet). In in terms of oop.</p>\n"},{"tags":["java","arrays","sorting","arraylist","set"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1567870402,"post_id":57835045,"comment_id":102098776,"body_markdown":"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/AbstractCollection.html#toArray(), specifically regarding iteration order.","body":"<a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/AbstractCollection.html#toArray()\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/11/docs/api/java.base/java/ut&zwnj;&#8203;il/&hellip;</a>, specifically regarding iteration order."}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1567869860,"creation_date":1567869860,"answer_id":57835075,"question_id":57835045,"body_markdown":"Not sorted. `LinkedHashSet` preserves insertion order; `HashSet` is going to be ordered by the `hashCode()` internally. If you want a sorted `Set`, use a `TreeSet` (which implements `SortedSet`).\r\n\r\n\tSortedSet&lt;Object&gt; objectsSet = new TreeSet&lt;&gt;();\r\n\tObjects[] objectsArray = (Objects[]) objectsSet.toArray();\r\n\r\nAs for changing the order (ascending or descending), you can use [`TreeSet(Comparator&lt;? super E&gt; comparator)`](https://docs.oracle.com/javase/8/docs/api/java/util/TreeSet.html#TreeSet-java.util.Comparator-) when constructing the `Set`. For example, to sort integers in reverse order;\r\n\r\n    SortedSet&lt;Integer&gt; intSet = new TreeSet&lt;&gt;(Comparator.reverseOrder());\r\n","title":"In what order Set items are sorted when converting to Array","body":"<p>Not sorted. <code>LinkedHashSet</code> preserves insertion order; <code>HashSet</code> is going to be ordered by the <code>hashCode()</code> internally. If you want a sorted <code>Set</code>, use a <code>TreeSet</code> (which implements <code>SortedSet</code>).</p>\n\n<pre><code>SortedSet&lt;Object&gt; objectsSet = new TreeSet&lt;&gt;();\nObjects[] objectsArray = (Objects[]) objectsSet.toArray();\n</code></pre>\n\n<p>As for changing the order (ascending or descending), you can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/TreeSet.html#TreeSet-java.util.Comparator-\" rel=\"nofollow noreferrer\"><code>TreeSet(Comparator&lt;? super E&gt; comparator)</code></a> when constructing the <code>Set</code>. For example, to sort integers in reverse order;</p>\n\n<pre><code>SortedSet&lt;Integer&gt; intSet = new TreeSet&lt;&gt;(Comparator.reverseOrder());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695230890,"creation_date":1686610142,"answer_id":76460749,"question_id":57835045,"body_markdown":"The [`Set.toArray` method Javadocs](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html#toArray()) specify the iteration behavior of a given `Set`:\r\n\r\n&gt; If this set makes any guarantees as to what order its elements are returned by its iterator, this method must return the elements in the same order.\r\n\r\nOne thing that is specifically left undefined is the order of elements in the array if the set does not guarantee the order of elements returned by the iterator.\r\n\r\nIf the set has a well-defined encounter order (e.g. it implements the [`SequencedSet`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html) interface added in Java 21), then the order of the elements in the array will match the encounter order of that type of set.","title":"In what order Set items are sorted when converting to Array","body":"<p>The <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html#toArray()\" rel=\"nofollow noreferrer\"><code>Set.toArray</code> method Javadocs</a> specify the iteration behavior of a given <code>Set</code>:</p>\n<blockquote>\n<p>If this set makes any guarantees as to what order its elements are returned by its iterator, this method must return the elements in the same order.</p>\n</blockquote>\n<p>One thing that is specifically left undefined is the order of elements in the array if the set does not guarantee the order of elements returned by the iterator.</p>\n<p>If the set has a well-defined encounter order (e.g. it implements the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html\" rel=\"nofollow noreferrer\"><code>SequencedSet</code></a> interface added in Java 21), then the order of the elements in the array will match the encounter order of that type of set.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686610254,"creation_date":1686610254,"answer_id":76460753,"question_id":57835045,"body_markdown":"Regarding the second part of the question, the ordering could be overridden by sorting as part of a [stream](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Collection.html#stream()) operation that constructs the array:\r\n\r\n```lang-java\r\nComparator&lt;Object&gt; myComparator = // ... Something that sorts this type of value\r\nobjectsSet.stream().sorted(someComparator).toArray();\r\n```","title":"In what order Set items are sorted when converting to Array","body":"<p>Regarding the second part of the question, the ordering could be overridden by sorting as part of a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Collection.html#stream()\" rel=\"nofollow noreferrer\">stream</a> operation that constructs the array:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Comparator&lt;Object&gt; myComparator = // ... Something that sorts this type of value\nobjectsSet.stream().sorted(someComparator).toArray();\n</code></pre>\n"}],"owner":{"account_id":6681896,"reputation":113,"user_id":6366608,"display_name":"Dines"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":577,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1695230890,"creation_date":1567869665,"question_id":57835045,"body_markdown":"I&#39;m interested in what criteria are used to sort Set when converting? And how can this be overridden? Because, as I understand it, Set does not store sorting information. An example of the conversion I&#39;m talking about:\r\n\r\n```java\r\n    Set&lt;Object&gt; objectsSet = new HashSet&lt;&gt;();\r\n    Objects[] objectsArray = (Objects[]) objectsSet.toArray();\r\n\r\n```","title":"In what order Set items are sorted when converting to Array","body":"<p>I'm interested in what criteria are used to sort Set when converting? And how can this be overridden? Because, as I understand it, Set does not store sorting information. An example of the conversion I'm talking about:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    Set&lt;Object&gt; objectsSet = new HashSet&lt;&gt;();\n    Objects[] objectsArray = (Objects[]) objectsSet.toArray();\n\n</code></pre>\n"},{"tags":["java","dictionary","linkedhashmap"],"comments":[{"owner":{"account_id":69527,"reputation":40466,"user_id":202214,"display_name":"Kevin Bourrillion"},"score":6,"creation_date":1261444272,"post_id":1936462,"comment_id":7781524,"body_markdown":"The situation is indeed unfortunate. Here is the (low-priority) feature request that would provide what you need: http://bugs.sun.com/view_bug.do?bug_id=6266354","body":"The situation is indeed unfortunate. Here is the (low-priority) feature request that would provide what you need: <a href=\"http://bugs.sun.com/view_bug.do?bug_id=6266354\" rel=\"nofollow noreferrer\">bugs.sun.com/view_bug.do?bug_id=6266354</a>"},{"owner":{"account_id":2023117,"reputation":8402,"user_id":1808829,"accept_rate":80,"display_name":"Ayaz Alifov"},"score":1,"creation_date":1525108569,"post_id":1936462,"comment_id":87227594,"body_markdown":"https://stackoverflow.com/a/30984049/1808829 could help you","body":"<a href=\"https://stackoverflow.com/a/30984049/1808829\">stackoverflow.com/a/30984049/1808829</a> could help you"},{"owner":{"account_id":2256125,"reputation":1387,"user_id":2172566,"display_name":"forresthopkinsa"},"score":0,"creation_date":1642621859,"post_id":1936462,"comment_id":125122971,"body_markdown":"I don&#39;t understand why `LinkedHashMap` doesn&#39;t implement `Deque`. It might as well.","body":"I don&#39;t understand why <code>LinkedHashMap</code> doesn&#39;t implement <code>Deque</code>. It might as well."},{"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":3,"creation_date":1686630505,"post_id":1936462,"comment_id":134821582,"body_markdown":"To follow up on @KevinBourrillion&#39;s comment from 13 years ago, this is finally being added in Java 21 by the [sequenced collections](https://openjdk.org/jeps/431) feature ([JDK-8280836](https://bugs.openjdk.org/browse/JDK-8280836)).  I&#39;ve added this as an answer (https://stackoverflow.com/a/76461679/1108305).","body":"To follow up on @KevinBourrillion&#39;s comment from 13 years ago, this is finally being added in Java 21 by the <a href=\"https://openjdk.org/jeps/431\" rel=\"nofollow noreferrer\">sequenced collections</a> feature (<a href=\"https://bugs.openjdk.org/browse/JDK-8280836\" rel=\"nofollow noreferrer\">JDK-8280836</a>).  I&#39;ve added this as an answer (<a href=\"https://stackoverflow.com/a/76461679/1108305\">stackoverflow.com/a/76461679/1108305</a>)."}],"answers":[{"tags":[],"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"down_vote_count":0,"up_vote_count":196,"is_accepted":true,"score":196,"last_activity_date":1570012914,"creation_date":1261331881,"answer_id":1936472,"question_id":1936462,"body_markdown":"The semantics of `LinkedHashMap` are still those of a Map, rather than that of a `LinkedList`. It retains insertion order, yes, but that&#39;s an implementation detail, rather than an aspect of its interface.\r\n\r\nThe quickest way to get the &quot;first&quot; entry is still `entrySet().iterator().next()`. Getting the &quot;last&quot; entry is possible, but will entail iterating over the whole entry set by calling `.next()` until you reach the last.  `while (iterator.hasNext()) { lastElement = iterator.next() }`\r\n\r\n**edit**: However, if you&#39;re willing to go beyond the JavaSE API, [Apache Commons Collections][1] has its own [`LinkedMap`][2] implementation, which has methods like [`firstKey`][3] and [`lastKey`][4], which do what you&#39;re looking for. The interface is considerably richer.  \r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-collections/apidocs/\r\n  [2]: https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/map/LinkedMap.html\r\n  [3]: https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/map/AbstractLinkedMap.html#firstKey--\r\n  [4]: https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/map/AbstractLinkedMap.html#lastKey--","title":"Java LinkedHashMap get first or last entry","body":"<p>The semantics of <code>LinkedHashMap</code> are still those of a Map, rather than that of a <code>LinkedList</code>. It retains insertion order, yes, but that's an implementation detail, rather than an aspect of its interface.</p>\n\n<p>The quickest way to get the \"first\" entry is still <code>entrySet().iterator().next()</code>. Getting the \"last\" entry is possible, but will entail iterating over the whole entry set by calling <code>.next()</code> until you reach the last.  <code>while (iterator.hasNext()) { lastElement = iterator.next() }</code></p>\n\n<p><strong>edit</strong>: However, if you're willing to go beyond the JavaSE API, <a href=\"https://commons.apache.org/proper/commons-collections/apidocs/\" rel=\"noreferrer\">Apache Commons Collections</a> has its own <a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/map/LinkedMap.html\" rel=\"noreferrer\"><code>LinkedMap</code></a> implementation, which has methods like <a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/map/AbstractLinkedMap.html#firstKey--\" rel=\"noreferrer\"><code>firstKey</code></a> and <a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/map/AbstractLinkedMap.html#lastKey--\" rel=\"noreferrer\"><code>lastKey</code></a>, which do what you're looking for. The interface is considerably richer.  </p>\n"},{"tags":[],"owner":{"account_id":23282,"reputation":28065,"user_id":58220,"accept_rate":75,"display_name":"sateesh"},"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1599511019,"creation_date":1261372339,"answer_id":1938327,"question_id":1936462,"body_markdown":"One more way to get first and last entry of a LinkedHashMap is to use `toArray()` method of Set interface.\r\n\r\nBut I think iterating over the entries in the entry set and getting the first and last entry is a better approach. \r\n\r\nThe usage of array methods leads to warning of the form &lt;i&gt;&quot; ...needs unchecked conversion to conform to ...&quot; &lt;/i&gt; which cannot be fixed [but can be only be suppressed by using the annotation `@SuppressWarnings(&quot;unchecked&quot;)`].\r\n\r\nHere is a small example to demonstrate the usage of `toArray()` method:\r\n\r\n```\r\n    public static void main(final String[] args) {\r\n        final Map&lt;Integer,String&gt; orderMap = new LinkedHashMap&lt;Integer,String&gt;();\r\n        orderMap.put(6, &quot;Six&quot;);\r\n        orderMap.put(7, &quot;Seven&quot;);\r\n        orderMap.put(3, &quot;Three&quot;);\r\n        orderMap.put(100, &quot;Hundered&quot;);\r\n        orderMap.put(10, &quot;Ten&quot;);\r\n\r\n        final Set&lt;Entry&lt;Integer, String&gt;&gt; mapValues = orderMap.entrySet();\r\n        final int maplength = mapValues.size();\r\n        final Entry&lt;Integer,String&gt;[] test = new Entry[maplength];\r\n        mapValues.toArray(test);\r\n\r\n        System.out.print(&quot;First Key:&quot;+test[0].getKey());\r\n        System.out.println(&quot; First Value:&quot;+test[0].getValue());\r\n\r\n        System.out.print(&quot;Last Key:&quot;+test[maplength-1].getKey());\r\n        System.out.println(&quot; Last Value:&quot;+test[maplength-1].getValue());\r\n    }\r\n\r\n    // the output geneated is :\r\n    First Key:6 First Value:Six\r\n    Last Key:10 Last Value:Ten\r\n```","title":"Java LinkedHashMap get first or last entry","body":"<p>One more way to get first and last entry of a LinkedHashMap is to use <code>toArray()</code> method of Set interface.</p>\n<p>But I think iterating over the entries in the entry set and getting the first and last entry is a better approach.</p>\n<p>The usage of array methods leads to warning of the form <i>&quot; ...needs unchecked conversion to conform to ...&quot; </i> which cannot be fixed [but can be only be suppressed by using the annotation <code>@SuppressWarnings(&quot;unchecked&quot;)</code>].</p>\n<p>Here is a small example to demonstrate the usage of <code>toArray()</code> method:</p>\n<pre><code>    public static void main(final String[] args) {\n        final Map&lt;Integer,String&gt; orderMap = new LinkedHashMap&lt;Integer,String&gt;();\n        orderMap.put(6, &quot;Six&quot;);\n        orderMap.put(7, &quot;Seven&quot;);\n        orderMap.put(3, &quot;Three&quot;);\n        orderMap.put(100, &quot;Hundered&quot;);\n        orderMap.put(10, &quot;Ten&quot;);\n\n        final Set&lt;Entry&lt;Integer, String&gt;&gt; mapValues = orderMap.entrySet();\n        final int maplength = mapValues.size();\n        final Entry&lt;Integer,String&gt;[] test = new Entry[maplength];\n        mapValues.toArray(test);\n\n        System.out.print(&quot;First Key:&quot;+test[0].getKey());\n        System.out.println(&quot; First Value:&quot;+test[0].getValue());\n\n        System.out.print(&quot;Last Key:&quot;+test[maplength-1].getKey());\n        System.out.println(&quot; Last Value:&quot;+test[maplength-1].getValue());\n    }\n\n    // the output geneated is :\n    First Key:6 First Value:Six\n    Last Key:10 Last Value:Ten\n</code></pre>\n"},{"tags":[],"owner":{"account_id":367804,"reputation":10671,"user_id":714211,"accept_rate":72,"display_name":"Doua Beri"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1348094635,"creation_date":1348094635,"answer_id":12503916,"question_id":1936462,"body_markdown":"I would recommend using [ConcurrentSkipListMap][1] which has `firstKey()` and `lastKey()` methods\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListMap.html","title":"Java LinkedHashMap get first or last entry","body":"<p>I would recommend using <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListMap.html\" rel=\"nofollow\">ConcurrentSkipListMap</a> which has <code>firstKey()</code> and <code>lastKey()</code> methods</p>\n"},{"tags":[],"owner":{"account_id":1923293,"reputation":10359,"user_id":1734279,"accept_rate":75,"display_name":"rai.skumar"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1599550026,"creation_date":1352272482,"answer_id":13264863,"question_id":1936462,"body_markdown":"Though linkedHashMap doesn&#39;t provide any method to get first, last or any specific object. \r\n\r\nBut its pretty trivial to get :\r\n\r\n```\r\nMap&lt;Integer,String&gt; orderMap = new LinkedHashMap&lt;Integer,String&gt;();  \r\nSet&lt;Integer&gt; al =   orderMap.keySet();\r\n```\r\n\r\nnow using iterator on `al` object ; you can get any object.","title":"Java LinkedHashMap get first or last entry","body":"<p>Though linkedHashMap doesn't provide any method to get first, last or any specific object.</p>\n<p>But its pretty trivial to get :</p>\n<pre><code>Map&lt;Integer,String&gt; orderMap = new LinkedHashMap&lt;Integer,String&gt;();  \nSet&lt;Integer&gt; al =   orderMap.keySet();\n</code></pre>\n<p>now using iterator on <code>al</code> object ; you can get any object.</p>\n"},{"tags":[],"owner":{"account_id":2438391,"reputation":51,"user_id":2127649,"display_name":"user2127649"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1363910622,"creation_date":1363910622,"answer_id":15560408,"question_id":1936462,"body_markdown":"Perhaps something like this :\r\n\r\n    LinkedHashMap&lt;Integer, String&gt; myMap;\r\n\r\n    public String getFirstKey() {\r\n      String out = null;\r\n      for (int key : myMap.keySet()) {\r\n        out = myMap.get(key);\r\n        break;\r\n      }\r\n      return out;\r\n    }\r\n\r\n    public String getLastKey() {\r\n      String out = null;\r\n      for (int key : myMap.keySet()) {\r\n        out = myMap.get(key);\r\n      }\r\n      return out;\r\n    }","title":"Java LinkedHashMap get first or last entry","body":"<p>Perhaps something like this :</p>\n\n<pre><code>LinkedHashMap&lt;Integer, String&gt; myMap;\n\npublic String getFirstKey() {\n  String out = null;\n  for (int key : myMap.keySet()) {\n    out = myMap.get(key);\n    break;\n  }\n  return out;\n}\n\npublic String getLastKey() {\n  String out = null;\n  for (int key : myMap.keySet()) {\n    out = myMap.get(key);\n  }\n  return out;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1353343,"reputation":1238,"user_id":1292233,"accept_rate":77,"display_name":"shecodesthings"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1374851096,"creation_date":1374851096,"answer_id":17884883,"question_id":1936462,"body_markdown":"Yea I came across the same problem, but luckily I only need the first element... - This is what I did for it.\r\n\r\n    private String getDefaultPlayerType()\r\n\t{\r\n\t\tString defaultPlayerType = &quot;&quot;;\r\n\t\tfor(LinkedHashMap.Entry&lt;String,Integer&gt; entry : getLeagueByName(currentLeague).getStatisticsOrder().entrySet())\r\n\t\t{\r\n\t\t\tdefaultPlayerType = entry.getKey();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\treturn defaultPlayerType;\r\n\t}\r\nIf you need the last element as well - I&#39;d look into how to reverse the order of your map - store it in a temp variable, access the first element in the reversed map(therefore it would be your last element), kill the temp variable. \r\n\r\nHere&#39;s some good answers on how to reverse order a hashmap: \r\n\r\nhttps://stackoverflow.com/questions/10596132/how-to-iterate-hashmap-in-reverse-order-in-java\r\n\r\nIf you use help from the above link, please give them up-votes :)\r\nHope this can help someone.","title":"Java LinkedHashMap get first or last entry","body":"<p>Yea I came across the same problem, but luckily I only need the first element... - This is what I did for it.</p>\n\n<pre><code>private String getDefaultPlayerType()\n{\n    String defaultPlayerType = \"\";\n    for(LinkedHashMap.Entry&lt;String,Integer&gt; entry : getLeagueByName(currentLeague).getStatisticsOrder().entrySet())\n    {\n        defaultPlayerType = entry.getKey();\n        break;\n    }\n    return defaultPlayerType;\n}\n</code></pre>\n\n<p>If you need the last element as well - I'd look into how to reverse the order of your map - store it in a temp variable, access the first element in the reversed map(therefore it would be your last element), kill the temp variable. </p>\n\n<p>Here's some good answers on how to reverse order a hashmap: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/10596132/how-to-iterate-hashmap-in-reverse-order-in-java\">How to iterate hashmap in reverse order in Java</a></p>\n\n<p>If you use help from the above link, please give them up-votes :)\nHope this can help someone.</p>\n"},{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1448637706,"creation_date":1448636709,"answer_id":33960155,"question_id":1936462,"body_markdown":"`LinkedHashMap` current implementation (Java 8) keeps track of its tail. If performance is a concern and/or the map is large in size, you could access that field via reflection.\r\n\r\nBecause the implementation may change it is probably a good idea to have a fallback strategy too. You may want to log something if an exception is thrown so you know that the implementation has changed.\r\n\r\nIt could look like:\r\n\r\n    public static &lt;K, V&gt; Entry&lt;K, V&gt; getFirst(Map&lt;K, V&gt; map) {\r\n      if (map.isEmpty()) return null;\r\n      return map.entrySet().iterator().next();\r\n    }\r\n\r\n    public static &lt;K, V&gt; Entry&lt;K, V&gt; getLast(Map&lt;K, V&gt; map) {\r\n      try {\r\n        if (map instanceof LinkedHashMap) return getLastViaReflection(map);\r\n      } catch (Exception ignore) { }\r\n      return getLastByIterating(map);\r\n    }\r\n\r\n    private static &lt;K, V&gt; Entry&lt;K, V&gt; getLastByIterating(Map&lt;K, V&gt; map) {\r\n      Entry&lt;K, V&gt; last = null;\r\n      for (Entry&lt;K, V&gt; e : map.entrySet()) last = e;\r\n      return last;\r\n    }\r\n\r\n    private static &lt;K, V&gt; Entry&lt;K, V&gt; getLastViaReflection(Map&lt;K, V&gt; map) throws NoSuchFieldException, IllegalAccessException {\r\n      Field tail = map.getClass().getDeclaredField(&quot;tail&quot;);\r\n      tail.setAccessible(true);\r\n      return (Entry&lt;K, V&gt;) tail.get(map);\r\n    }\r\n","title":"Java LinkedHashMap get first or last entry","body":"<p><code>LinkedHashMap</code> current implementation (Java 8) keeps track of its tail. If performance is a concern and/or the map is large in size, you could access that field via reflection.</p>\n\n<p>Because the implementation may change it is probably a good idea to have a fallback strategy too. You may want to log something if an exception is thrown so you know that the implementation has changed.</p>\n\n<p>It could look like:</p>\n\n<pre><code>public static &lt;K, V&gt; Entry&lt;K, V&gt; getFirst(Map&lt;K, V&gt; map) {\n  if (map.isEmpty()) return null;\n  return map.entrySet().iterator().next();\n}\n\npublic static &lt;K, V&gt; Entry&lt;K, V&gt; getLast(Map&lt;K, V&gt; map) {\n  try {\n    if (map instanceof LinkedHashMap) return getLastViaReflection(map);\n  } catch (Exception ignore) { }\n  return getLastByIterating(map);\n}\n\nprivate static &lt;K, V&gt; Entry&lt;K, V&gt; getLastByIterating(Map&lt;K, V&gt; map) {\n  Entry&lt;K, V&gt; last = null;\n  for (Entry&lt;K, V&gt; e : map.entrySet()) last = e;\n  return last;\n}\n\nprivate static &lt;K, V&gt; Entry&lt;K, V&gt; getLastViaReflection(Map&lt;K, V&gt; map) throws NoSuchFieldException, IllegalAccessException {\n  Field tail = map.getClass().getDeclaredField(\"tail\");\n  tail.setAccessible(true);\n  return (Entry&lt;K, V&gt;) tail.get(map);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":177955,"reputation":4667,"user_id":409638,"accept_rate":78,"display_name":"robert"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1455103197,"creation_date":1455039986,"answer_id":35298683,"question_id":1936462,"body_markdown":"It&#39;s a bit dirty, but you can override the `removeEldestEntry` method of LinkedHashMap, which it might suit you to do as a private anonymous member:\r\n\r\n\tprivate Splat eldest = null;\r\n\tprivate LinkedHashMap&lt;Integer, Splat&gt; pastFutures = new LinkedHashMap&lt;Integer, Splat&gt;() {\r\n\r\n\t\t@Override\r\n\t\tprotected boolean removeEldestEntry(Map.Entry&lt;Integer, Splat&gt; eldest) {\r\n\r\n\t\t\teldest = eldest.getValue();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\nSo you will always be able to get the first entry at your `eldest` member. It will be updated every time you perform a `put`.\r\n\r\nIt should also be easy to override `put` and set `youngest` ...\r\n\r\n\t\t@Override\r\n\t\tpublic Splat put(Integer key, Splat value) {\r\n\r\n\t\t\tyoungest = value;\r\n\t\t\treturn super.put(key, value);\r\n\t\t}\r\n\r\nIt all breaks down when you start removing entries though; haven&#39;t figured out a way to kludge that.\r\n\r\nIt&#39;s very annoying that you can&#39;t otherwise get access to head or tail in a sensible way ...\r\n\r\n","title":"Java LinkedHashMap get first or last entry","body":"<p>It's a bit dirty, but you can override the <code>removeEldestEntry</code> method of LinkedHashMap, which it might suit you to do as a private anonymous member:</p>\n\n<pre><code>private Splat eldest = null;\nprivate LinkedHashMap&lt;Integer, Splat&gt; pastFutures = new LinkedHashMap&lt;Integer, Splat&gt;() {\n\n    @Override\n    protected boolean removeEldestEntry(Map.Entry&lt;Integer, Splat&gt; eldest) {\n\n        eldest = eldest.getValue();\n        return false;\n    }\n};\n</code></pre>\n\n<p>So you will always be able to get the first entry at your <code>eldest</code> member. It will be updated every time you perform a <code>put</code>.</p>\n\n<p>It should also be easy to override <code>put</code> and set <code>youngest</code> ...</p>\n\n<pre><code>    @Override\n    public Splat put(Integer key, Splat value) {\n\n        youngest = value;\n        return super.put(key, value);\n    }\n</code></pre>\n\n<p>It all breaks down when you start removing entries though; haven't figured out a way to kludge that.</p>\n\n<p>It's very annoying that you can't otherwise get access to head or tail in a sensible way ...</p>\n"},{"tags":[],"owner":{"account_id":3002414,"reputation":361,"user_id":2547647,"display_name":"Tadeu Jr."},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1459438061,"creation_date":1459438061,"answer_id":36337639,"question_id":1936462,"body_markdown":"Suggestion:\r\n\r\n    map.remove(map.keySet().iterator().next());","title":"Java LinkedHashMap get first or last entry","body":"<p>Suggestion:</p>\n\n<pre><code>map.remove(map.keySet().iterator().next());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2206457,"reputation":13823,"user_id":1949554,"accept_rate":74,"display_name":"frankelot"},"down_vote_count":1,"up_vote_count":31,"is_accepted":false,"score":30,"last_activity_date":1586271340,"creation_date":1461050757,"answer_id":36711368,"question_id":1936462,"body_markdown":"Can you try doing something like (to get the last entry):\r\n\r\n    linkedHashMap.entrySet().toArray()[linkedHashMap.size() -1];","title":"Java LinkedHashMap get first or last entry","body":"<p>Can you try doing something like (to get the last entry):</p>\n\n<pre><code>linkedHashMap.entrySet().toArray()[linkedHashMap.size() -1];\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3813919,"reputation":2989,"user_id":3163824,"accept_rate":62,"display_name":"Panagiotis Drakatos"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1523889488,"creation_date":1523889488,"answer_id":49859972,"question_id":1936462,"body_markdown":"&lt;p&gt;I know that I came too late but I would like to offer some alternatives, not something extraordinary but some cases that none mentioned here. In case that someone doesn&#39;t care so much for efficiency but he wants something with more simplicity(perhaps find the last entry value with one line of code), all this will get quite simplified with the arrival of\r\n &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/&quot;&gt; Java 8 &lt;/a&gt;. I provide some useful scenarios. &lt;/p&gt;\r\n&lt;p&gt;For the sake of the completeness, I compare these alternatives with the solution of arrays that already mentioned in this post by others users. I sum up all the cases and i think they would be useful(when performance does matter or no) especially for new developers, always depends on the matter of each problem&lt;/p&gt;\r\n\r\n&lt;h2&gt;Possible Alternatives&lt;/h2&gt;\r\n\r\n&lt;h3&gt;Usage of Array Method&lt;/h3&gt;\r\n&lt;p&gt;I took it from the previous answer to to make the follow comparisons. This solution belongs @feresr.&lt;/p&gt;\r\n\r\n      public static String FindLasstEntryWithArrayMethod() {\r\n            return String.valueOf(linkedmap.entrySet().toArray()[linkedmap.size() - 1]);\r\n        }\r\n\r\n&lt;h3&gt;Usage of ArrayList Method&lt;/h3&gt;\r\n&lt;p&gt;Similar to the first solution with a little bit different performance&lt;/p&gt;\r\n\r\n    public static String FindLasstEntryWithArrayListMethod() {\r\n            List&lt;Entry&lt;Integer, String&gt;&gt; entryList = new ArrayList&lt;Map.Entry&lt;Integer, String&gt;&gt;(linkedmap.entrySet());\r\n            return entryList.get(entryList.size() - 1).getValue();\r\n        }\r\n\r\n&lt;h3&gt;Reduce Method&lt;/h3&gt;\r\n&lt;p&gt;This method will reduce the set of elements until getting the last element of stream. In addition, it will  return only deterministic results &lt;/p&gt;\r\n\r\n \r\n\r\n    public static String FindLasstEntryWithReduceMethod() {\r\n            return linkedmap.entrySet().stream().reduce((first, second) -&gt; second).orElse(null).getValue();\r\n        }\r\n\r\n&lt;h3&gt;SkipFunction Method&lt;/h3&gt;\r\n&lt;p&gt;This method will get the last element of the stream  by simply skipping all the elements before it&lt;/p&gt;\r\n\r\n \r\n\r\n    public static String FindLasstEntryWithSkipFunctionMethod() {\r\n            final long count = linkedmap.entrySet().stream().count();\r\n            return linkedmap.entrySet().stream().skip(count - 1).findFirst().get().getValue();\r\n        }\r\n\r\n&lt;h3&gt;Iterable Alternative&lt;/h3&gt;\r\n\r\n&gt; Iterables.getLast from Google Guava. It has some optimization for\r\n&gt; Lists and SortedSets too\r\n\r\n&lt;p&gt;&lt;/p&gt;\r\n\r\n    public static String FindLasstEntryWithGuavaIterable() {\r\n            return Iterables.getLast(linkedmap.entrySet()).getValue();\r\n        }\r\n\r\n\r\n&lt;p&gt;Here is the full source code&lt;/p&gt; \r\n\r\n    import com.google.common.collect.Iterables;\r\n    import java.math.BigDecimal;\r\n    import java.math.RoundingMode;\r\n    import java.util.ArrayList;\r\n    import java.util.LinkedHashMap;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import java.util.Map.Entry;\r\n    \r\n    public class PerformanceTest {\r\n    \r\n        private static long startTime;\r\n        private static long endTime;\r\n        private static LinkedHashMap&lt;Integer, String&gt; linkedmap;\r\n    \r\n        public static void main(String[] args) {\r\n            linkedmap = new LinkedHashMap&lt;Integer, String&gt;();\r\n          \r\n            linkedmap.put(12, &quot;Chaitanya&quot;);\r\n            linkedmap.put(2, &quot;Rahul&quot;);\r\n            linkedmap.put(7, &quot;Singh&quot;);\r\n            linkedmap.put(49, &quot;Ajeet&quot;);\r\n            linkedmap.put(76, &quot;Anuj&quot;);\r\n    \r\n            //call a useless action  so that the caching occurs before the jobs starts.\r\n            linkedmap.entrySet().forEach(x -&gt; {});\r\n    \r\n           \r\n            \r\n            startTime = System.nanoTime();\r\n            FindLasstEntryWithArrayListMethod();\r\n            endTime = System.nanoTime();\r\n            System.out.println(&quot;FindLasstEntryWithArrayListMethod : &quot; + &quot;took &quot; + new BigDecimal((endTime - startTime) / 1000000.000).setScale(3, RoundingMode.CEILING) + &quot; milliseconds&quot;);\r\n           \r\n            \r\n             startTime = System.nanoTime();\r\n            FindLasstEntryWithArrayMethod();\r\n            endTime = System.nanoTime();\r\n            System.out.println(&quot;FindLasstEntryWithArrayMethod : &quot; + &quot;took &quot; + new BigDecimal((endTime - startTime) / 1000000.000).setScale(3, RoundingMode.CEILING) + &quot; milliseconds&quot;);\r\n            \r\n            startTime = System.nanoTime();\r\n            FindLasstEntryWithReduceMethod();\r\n            endTime = System.nanoTime();\r\n    \r\n            System.out.println(&quot;FindLasstEntryWithReduceMethod : &quot; + &quot;took &quot; + new BigDecimal((endTime - startTime) / 1000000.000).setScale(3, RoundingMode.CEILING) + &quot; milliseconds&quot;);\r\n            \r\n            startTime = System.nanoTime();\r\n            FindLasstEntryWithSkipFunctionMethod();\r\n            endTime = System.nanoTime();\r\n    \r\n            System.out.println(&quot;FindLasstEntryWithSkipFunctionMethod : &quot; + &quot;took &quot; + new BigDecimal((endTime - startTime) / 1000000.000).setScale(3, RoundingMode.CEILING) + &quot; milliseconds&quot;);\r\n            \r\n            startTime = System.currentTimeMillis();\r\n            FindLasstEntryWithGuavaIterable();\r\n            endTime = System.currentTimeMillis();\r\n            System.out.println(&quot;FindLasstEntryWithGuavaIterable : &quot; + &quot;took &quot; + (endTime - startTime) + &quot; milliseconds&quot;);\r\n    \r\n            \r\n        }\r\n    \r\n        public static String FindLasstEntryWithReduceMethod() {\r\n            return linkedmap.entrySet().stream().reduce((first, second) -&gt; second).orElse(null).getValue();\r\n        }\r\n    \r\n        public static String FindLasstEntryWithSkipFunctionMethod() {\r\n            final long count = linkedmap.entrySet().stream().count();\r\n            return linkedmap.entrySet().stream().skip(count - 1).findFirst().get().getValue();\r\n        }\r\n    \r\n        public static String FindLasstEntryWithGuavaIterable() {\r\n            return Iterables.getLast(linkedmap.entrySet()).getValue();\r\n        }\r\n    \r\n        public static String FindLasstEntryWithArrayListMethod() {\r\n            List&lt;Entry&lt;Integer, String&gt;&gt; entryList = new ArrayList&lt;Map.Entry&lt;Integer, String&gt;&gt;(linkedmap.entrySet());\r\n            return entryList.get(entryList.size() - 1).getValue();\r\n        }\r\n    \r\n        public static String FindLasstEntryWithArrayMethod() {\r\n            return String.valueOf(linkedmap.entrySet().toArray()[linkedmap.size() - 1]);\r\n        }\r\n    }\r\n\r\n&lt;p&gt;Here is the output with performance of each method&lt;/p&gt; \r\n\r\n    FindLasstEntryWithArrayListMethod : took 0.162 milliseconds\r\n    FindLasstEntryWithArrayMethod : took 0.025 milliseconds\r\n    FindLasstEntryWithReduceMethod : took 2.776 milliseconds\r\n    FindLasstEntryWithSkipFunctionMethod : took 3.396 milliseconds\r\n    FindLasstEntryWithGuavaIterable : took 11 milliseconds","title":"Java LinkedHashMap get first or last entry","body":"<p>I know that I came too late but I would like to offer some alternatives, not something extraordinary but some cases that none mentioned here. In case that someone doesn't care so much for efficiency but he wants something with more simplicity(perhaps find the last entry value with one line of code), all this will get quite simplified with the arrival of\n <a href=\"https://docs.oracle.com/javase/8/docs/api/\" rel=\"noreferrer\"> Java 8 </a>. I provide some useful scenarios. </p>\n\n<p>For the sake of the completeness, I compare these alternatives with the solution of arrays that already mentioned in this post by others users. I sum up all the cases and i think they would be useful(when performance does matter or no) especially for new developers, always depends on the matter of each problem</p>\n\n<h2>Possible Alternatives</h2>\n\n<h3>Usage of Array Method</h3>\n\n<p>I took it from the previous answer to to make the follow comparisons. This solution belongs @feresr.</p>\n\n<pre><code>  public static String FindLasstEntryWithArrayMethod() {\n        return String.valueOf(linkedmap.entrySet().toArray()[linkedmap.size() - 1]);\n    }\n</code></pre>\n\n<h3>Usage of ArrayList Method</h3>\n\n<p>Similar to the first solution with a little bit different performance</p>\n\n<pre><code>public static String FindLasstEntryWithArrayListMethod() {\n        List&lt;Entry&lt;Integer, String&gt;&gt; entryList = new ArrayList&lt;Map.Entry&lt;Integer, String&gt;&gt;(linkedmap.entrySet());\n        return entryList.get(entryList.size() - 1).getValue();\n    }\n</code></pre>\n\n<h3>Reduce Method</h3>\n\n<p>This method will reduce the set of elements until getting the last element of stream. In addition, it will  return only deterministic results </p>\n\n<pre><code>public static String FindLasstEntryWithReduceMethod() {\n        return linkedmap.entrySet().stream().reduce((first, second) -&gt; second).orElse(null).getValue();\n    }\n</code></pre>\n\n<h3>SkipFunction Method</h3>\n\n<p>This method will get the last element of the stream  by simply skipping all the elements before it</p>\n\n<pre><code>public static String FindLasstEntryWithSkipFunctionMethod() {\n        final long count = linkedmap.entrySet().stream().count();\n        return linkedmap.entrySet().stream().skip(count - 1).findFirst().get().getValue();\n    }\n</code></pre>\n\n<h3>Iterable Alternative</h3>\n\n<blockquote>\n  <p>Iterables.getLast from Google Guava. It has some optimization for\n  Lists and SortedSets too</p>\n</blockquote>\n\n<p></p>\n\n<pre><code>public static String FindLasstEntryWithGuavaIterable() {\n        return Iterables.getLast(linkedmap.entrySet()).getValue();\n    }\n</code></pre>\n\n<p>Here is the full source code</p> \n\n<pre><code>import com.google.common.collect.Iterables;\nimport java.math.BigDecimal;\nimport java.math.RoundingMode;\nimport java.util.ArrayList;\nimport java.util.LinkedHashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Map.Entry;\n\npublic class PerformanceTest {\n\n    private static long startTime;\n    private static long endTime;\n    private static LinkedHashMap&lt;Integer, String&gt; linkedmap;\n\n    public static void main(String[] args) {\n        linkedmap = new LinkedHashMap&lt;Integer, String&gt;();\n\n        linkedmap.put(12, \"Chaitanya\");\n        linkedmap.put(2, \"Rahul\");\n        linkedmap.put(7, \"Singh\");\n        linkedmap.put(49, \"Ajeet\");\n        linkedmap.put(76, \"Anuj\");\n\n        //call a useless action  so that the caching occurs before the jobs starts.\n        linkedmap.entrySet().forEach(x -&gt; {});\n\n\n\n        startTime = System.nanoTime();\n        FindLasstEntryWithArrayListMethod();\n        endTime = System.nanoTime();\n        System.out.println(\"FindLasstEntryWithArrayListMethod : \" + \"took \" + new BigDecimal((endTime - startTime) / 1000000.000).setScale(3, RoundingMode.CEILING) + \" milliseconds\");\n\n\n         startTime = System.nanoTime();\n        FindLasstEntryWithArrayMethod();\n        endTime = System.nanoTime();\n        System.out.println(\"FindLasstEntryWithArrayMethod : \" + \"took \" + new BigDecimal((endTime - startTime) / 1000000.000).setScale(3, RoundingMode.CEILING) + \" milliseconds\");\n\n        startTime = System.nanoTime();\n        FindLasstEntryWithReduceMethod();\n        endTime = System.nanoTime();\n\n        System.out.println(\"FindLasstEntryWithReduceMethod : \" + \"took \" + new BigDecimal((endTime - startTime) / 1000000.000).setScale(3, RoundingMode.CEILING) + \" milliseconds\");\n\n        startTime = System.nanoTime();\n        FindLasstEntryWithSkipFunctionMethod();\n        endTime = System.nanoTime();\n\n        System.out.println(\"FindLasstEntryWithSkipFunctionMethod : \" + \"took \" + new BigDecimal((endTime - startTime) / 1000000.000).setScale(3, RoundingMode.CEILING) + \" milliseconds\");\n\n        startTime = System.currentTimeMillis();\n        FindLasstEntryWithGuavaIterable();\n        endTime = System.currentTimeMillis();\n        System.out.println(\"FindLasstEntryWithGuavaIterable : \" + \"took \" + (endTime - startTime) + \" milliseconds\");\n\n\n    }\n\n    public static String FindLasstEntryWithReduceMethod() {\n        return linkedmap.entrySet().stream().reduce((first, second) -&gt; second).orElse(null).getValue();\n    }\n\n    public static String FindLasstEntryWithSkipFunctionMethod() {\n        final long count = linkedmap.entrySet().stream().count();\n        return linkedmap.entrySet().stream().skip(count - 1).findFirst().get().getValue();\n    }\n\n    public static String FindLasstEntryWithGuavaIterable() {\n        return Iterables.getLast(linkedmap.entrySet()).getValue();\n    }\n\n    public static String FindLasstEntryWithArrayListMethod() {\n        List&lt;Entry&lt;Integer, String&gt;&gt; entryList = new ArrayList&lt;Map.Entry&lt;Integer, String&gt;&gt;(linkedmap.entrySet());\n        return entryList.get(entryList.size() - 1).getValue();\n    }\n\n    public static String FindLasstEntryWithArrayMethod() {\n        return String.valueOf(linkedmap.entrySet().toArray()[linkedmap.size() - 1]);\n    }\n}\n</code></pre>\n\n<p>Here is the output with performance of each method</p> \n\n<pre><code>FindLasstEntryWithArrayListMethod : took 0.162 milliseconds\nFindLasstEntryWithArrayMethod : took 0.025 milliseconds\nFindLasstEntryWithReduceMethod : took 2.776 milliseconds\nFindLasstEntryWithSkipFunctionMethod : took 3.396 milliseconds\nFindLasstEntryWithGuavaIterable : took 11 milliseconds\n</code></pre>\n"},{"tags":[],"owner":{"account_id":336321,"reputation":11,"user_id":1348441,"display_name":"unknownwill"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1534570214,"creation_date":1534570214,"answer_id":51905569,"question_id":1936462,"body_markdown":"right, you have to manually enumerate keyset till the end of the linkedlist, then retrieve the entry by key and return this entry.","title":"Java LinkedHashMap get first or last entry","body":"<p>right, you have to manually enumerate keyset till the end of the linkedlist, then retrieve the entry by key and return this entry.</p>\n"},{"tags":[],"owner":{"account_id":17396429,"reputation":31,"user_id":12606069,"display_name":" "},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589746350,"creation_date":1589746350,"answer_id":61858157,"question_id":1936462,"body_markdown":"    public static List&lt;Fragment&gt; pullToBackStack() {\r\n        List&lt;Fragment&gt; fragments = new ArrayList&lt;&gt;();\r\n        List&lt;Map.Entry&lt;String, Fragment&gt;&gt; entryList = new ArrayList&lt;&gt;(backMap.entrySet());\r\n        int size = entryList.size();\r\n        if (size &gt; 0) {\r\n            for (int i = size - 1; i &gt;= 0; i--) {// last Fragments\r\n                fragments.add(entryList.get(i).getValue());\r\n                backMap.remove(entryList.get(i).getKey());\r\n            }\r\n            return fragments;\r\n        }\r\n        return null;\r\n    }","title":"Java LinkedHashMap get first or last entry","body":"<pre><code>public static List&lt;Fragment&gt; pullToBackStack() {\n    List&lt;Fragment&gt; fragments = new ArrayList&lt;&gt;();\n    List&lt;Map.Entry&lt;String, Fragment&gt;&gt; entryList = new ArrayList&lt;&gt;(backMap.entrySet());\n    int size = entryList.size();\n    if (size &gt; 0) {\n        for (int i = size - 1; i &gt;= 0; i--) {// last Fragments\n            fragments.add(entryList.get(i).getValue());\n            backMap.remove(entryList.get(i).getKey());\n        }\n        return fragments;\n    }\n    return null;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18973488,"reputation":41,"user_id":13846462,"display_name":"Arnab"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1593598686,"creation_date":1593598686,"answer_id":62674620,"question_id":1936462,"body_markdown":"For first element use `entrySet().iterator().next()` and stop iterating after 1 iteration.\r\nFor last one the easiest way is to preserve the key in a variable whenever you do a map.put.","title":"Java LinkedHashMap get first or last entry","body":"<p>For first element use <code>entrySet().iterator().next()</code> and stop iterating after 1 iteration.\nFor last one the easiest way is to preserve the key in a variable whenever you do a map.put.</p>\n"},{"tags":[],"owner":{"account_id":4756599,"reputation":11,"user_id":3845213,"display_name":"Atlilo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604996208,"creation_date":1604996208,"answer_id":64765141,"question_id":1936462,"body_markdown":"            import java.util.Arrays;\r\n\t\t\timport java.util.LinkedHashMap;\r\n\t\t\timport java.util.List;\r\n\t\t\timport java.util.Map;\r\n\r\n\t\t\tpublic class Scratch {\r\n\t\t\t   public static void main(String[] args) {\r\n\r\n\t\t\t      // Plain java version\r\n\r\n\t\t\t      Map&lt;String, List&lt;Integer&gt;&gt; linked = new LinkedHashMap&lt;&gt;();\r\n\t\t\t      linked.put(&quot;a&quot;, Arrays.asList(1, 2, 3));\r\n\t\t\t      linked.put(&quot;aa&quot;, Arrays.asList(1, 2, 3, 4));\r\n\t\t\t      linked.put(&quot;b&quot;, Arrays.asList(1, 2, 3, 4, 5));\r\n\t\t\t      linked.put(&quot;bb&quot;, Arrays.asList(1, 2, 3, 4, 5, 6));\r\n\r\n\t\t\t      System.out.println(&quot;linked = &quot; + linked);\r\n\r\n\t\t\t      String firstKey = getFirstKey(linked);\r\n\t\t\t      System.out.println(&quot;firstKey = &quot; + firstKey);\r\n\t\t\t      List&lt;Integer&gt; firstEntry = linked.get(firstKey);\r\n\t\t\t      System.out.println(&quot;firstEntry = &quot; + firstEntry);\r\n\r\n\t\t\t      String lastKey = getLastKey(linked);\r\n\t\t\t      System.out.println(&quot;lastKey = &quot; + lastKey);\r\n\t\t\t      List&lt;Integer&gt; lastEntry = linked.get(lastKey);\r\n\t\t\t      System.out.println(&quot;lastEntry = &quot; + lastEntry);\r\n\r\n\r\n\r\n\t\t\t   }\r\n\r\n\t\t\t   private static String getLastKey(Map&lt;String, List&lt;Integer&gt;&gt; linked) {\r\n\t\t\t      int index = 0;\r\n\t\t\t      for (String key : linked.keySet()) {\r\n\t\t\t\t index++;\r\n\t\t\t\t if (index == linked.size()) {\r\n\t\t\t\t    return key;\r\n\t\t\t\t }\r\n\t\t\t      }\r\n\t\t\t      return null;\r\n\t\t\t   }\r\n\r\n\t\t\t   private static String getFirstKey(Map&lt;String, List&lt;Integer&gt;&gt; linked) {\r\n\t\t\t      for (String key : linked.keySet()) {\r\n\t\t\t\t return key;\r\n\t\t\t      }\r\n\t\t\t      return null;\r\n\t\t\t   }\r\n\t\t\t}","title":"Java LinkedHashMap get first or last entry","body":"<pre><code>        import java.util.Arrays;\n        import java.util.LinkedHashMap;\n        import java.util.List;\n        import java.util.Map;\n\n        public class Scratch {\n           public static void main(String[] args) {\n\n              // Plain java version\n\n              Map&lt;String, List&lt;Integer&gt;&gt; linked = new LinkedHashMap&lt;&gt;();\n              linked.put(&quot;a&quot;, Arrays.asList(1, 2, 3));\n              linked.put(&quot;aa&quot;, Arrays.asList(1, 2, 3, 4));\n              linked.put(&quot;b&quot;, Arrays.asList(1, 2, 3, 4, 5));\n              linked.put(&quot;bb&quot;, Arrays.asList(1, 2, 3, 4, 5, 6));\n\n              System.out.println(&quot;linked = &quot; + linked);\n\n              String firstKey = getFirstKey(linked);\n              System.out.println(&quot;firstKey = &quot; + firstKey);\n              List&lt;Integer&gt; firstEntry = linked.get(firstKey);\n              System.out.println(&quot;firstEntry = &quot; + firstEntry);\n\n              String lastKey = getLastKey(linked);\n              System.out.println(&quot;lastKey = &quot; + lastKey);\n              List&lt;Integer&gt; lastEntry = linked.get(lastKey);\n              System.out.println(&quot;lastEntry = &quot; + lastEntry);\n\n\n\n           }\n\n           private static String getLastKey(Map&lt;String, List&lt;Integer&gt;&gt; linked) {\n              int index = 0;\n              for (String key : linked.keySet()) {\n             index++;\n             if (index == linked.size()) {\n                return key;\n             }\n              }\n              return null;\n           }\n\n           private static String getFirstKey(Map&lt;String, List&lt;Integer&gt;&gt; linked) {\n              for (String key : linked.keySet()) {\n             return key;\n              }\n              return null;\n           }\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3030480,"reputation":727,"user_id":2569613,"display_name":"Neetesh Dadwariya"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1641574133,"creation_date":1641574133,"answer_id":70624549,"question_id":1936462,"body_markdown":"Using [Java8 stream][1] this can be done very easily:\r\n\r\n    LinkedHashMap&lt;String, Integer&gt; linkedHashMap = new LinkedHashMap&lt;&gt;();\r\n    linkedHashMap.put(&quot;A&quot;, 1);\r\n    linkedHashMap.put(&quot;B&quot;, 2);\r\n    linkedHashMap.put(&quot;C&quot;, 3);\r\n    linkedHashMap.put(&quot;D&quot;, 4);\r\n\r\n    //First entry\r\n    Map.Entry&lt;String, Integer&gt; firstEntry = linkedHashMap.entrySet().stream().findFirst().get();\r\n\r\n    //Last entry\r\n    Map.Entry&lt;String, Integer&gt; lastEntry = linkedHashMap.entrySet().stream().skip(linkedHashMap.size() - 1).findFirst().get();\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html","title":"Java LinkedHashMap get first or last entry","body":"<p>Using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html\" rel=\"nofollow noreferrer\">Java8 stream</a> this can be done very easily:</p>\n<pre><code>LinkedHashMap&lt;String, Integer&gt; linkedHashMap = new LinkedHashMap&lt;&gt;();\nlinkedHashMap.put(&quot;A&quot;, 1);\nlinkedHashMap.put(&quot;B&quot;, 2);\nlinkedHashMap.put(&quot;C&quot;, 3);\nlinkedHashMap.put(&quot;D&quot;, 4);\n\n//First entry\nMap.Entry&lt;String, Integer&gt; firstEntry = linkedHashMap.entrySet().stream().findFirst().get();\n\n//Last entry\nMap.Entry&lt;String, Integer&gt; lastEntry = linkedHashMap.entrySet().stream().skip(linkedHashMap.size() - 1).findFirst().get();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1695230818,"creation_date":1686630219,"answer_id":76461679,"question_id":1936462,"body_markdown":"As of Java 21, the first and last entry can be easily accessed using the [`firstEntry()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#firstEntry()) and [`lastEntry()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#lastEntry()) methods on `LinkedHashMap`:\r\n\r\n```lang-java\r\nLinkedHashMap&lt;Integer, String&gt; linkedHashMap = // ...\r\n\r\nEntry&lt;Integer, String&gt; firstEntry = linkedHashMap.firstEntry();\r\nEntry&lt;Integer, String&gt; lastValue = linkedHashMap.lastEntry();\r\n\r\nInteger firstKey = firstEntry.getKey();\r\nInteger lastKey = lastEntry.getKey();\r\nString firstValue = firstEntry.getValue();\r\nString lastValue = lastEntry.getValue();\r\n```\r\n","title":"Java LinkedHashMap get first or last entry","body":"<p>As of Java 21, the first and last entry can be easily accessed using the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#firstEntry()\" rel=\"nofollow noreferrer\"><code>firstEntry()</code></a> and <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#lastEntry()\" rel=\"nofollow noreferrer\"><code>lastEntry()</code></a> methods on <code>LinkedHashMap</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>LinkedHashMap&lt;Integer, String&gt; linkedHashMap = // ...\n\nEntry&lt;Integer, String&gt; firstEntry = linkedHashMap.firstEntry();\nEntry&lt;Integer, String&gt; lastValue = linkedHashMap.lastEntry();\n\nInteger firstKey = firstEntry.getKey();\nInteger lastKey = lastEntry.getKey();\nString firstValue = firstEntry.getValue();\nString lastValue = lastEntry.getValue();\n</code></pre>\n"}],"owner":{"account_id":59543,"reputation":3523,"user_id":178132,"accept_rate":58,"display_name":"maiky"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":182552,"favorite_count":0,"down_vote_count":0,"up_vote_count":184,"accepted_answer_id":1936472,"answer_count":17,"score":184,"last_activity_date":1695230818,"creation_date":1261331642,"question_id":1936462,"body_markdown":"I have used [`LinkedHashMap`][1] because it is important the order in which keys entered in the map.\r\n\r\nBut now I want to get the value of key in the first place (the first entered entry) or the last.\r\n\r\nShould there be a method like `first()` and `last()` or something like that?\r\n\r\nDo I need to have an iterator to just get the first key entry? That is why I used [`LinkedHashMap`][1]! \r\n\r\nThanks!\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/util/LinkedHashMap.html","title":"Java LinkedHashMap get first or last entry","body":"<p>I have used <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/LinkedHashMap.html\" rel=\"noreferrer\"><code>LinkedHashMap</code></a> because it is important the order in which keys entered in the map.</p>\n\n<p>But now I want to get the value of key in the first place (the first entered entry) or the last.</p>\n\n<p>Should there be a method like <code>first()</code> and <code>last()</code> or something like that?</p>\n\n<p>Do I need to have an iterator to just get the first key entry? That is why I used <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/LinkedHashMap.html\" rel=\"noreferrer\"><code>LinkedHashMap</code></a>! </p>\n\n<p>Thanks!</p>\n"},{"tags":["java","cucumber"],"comments":[{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1694797185,"post_id":77114128,"comment_id":135943119,"body_markdown":"This doesn&#39;t look like a real use case. If a business user was tasked to create a BDD test case, how is this user supposed to know that `Given a employee is created` actually means `Given no employee is created`? While I think I get what you are trying to do, the over complication seems to be pointless. Creating an employee should have a 1-many result.","body":"This doesn&#39;t look like a real use case. If a business user was tasked to create a BDD test case, how is this user supposed to know that <code>Given a employee is created</code> actually means <code>Given no employee is created</code>? While I think I get what you are trying to do, the over complication seems to be pointless. Creating an employee should have a 1-many result."},{"owner":{"account_id":11088478,"reputation":53,"user_id":8141279,"display_name":"Pruthvi Lalji"},"score":0,"creation_date":1694799897,"post_id":77114128,"comment_id":135943578,"body_markdown":"`Given a employee is created` will always create an employee, if would use the default values if not presented in the dataTable","body":"<code>Given a employee is created</code> will always create an employee, if would use the default values if not presented in the dataTable"},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1694800891,"post_id":77114128,"comment_id":135943752,"body_markdown":"I stand corrected. I missed that detail in your code example.","body":"I stand corrected. I missed that detail in your code example."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1694802136,"post_id":77114128,"comment_id":135943963,"body_markdown":"By the way, what happens when you run your code?","body":"By the way, what happens when you run your code?"},{"owner":{"account_id":11088478,"reputation":53,"user_id":8141279,"display_name":"Pruthvi Lalji"},"score":0,"creation_date":1695022097,"post_id":77114128,"comment_id":135963216,"body_markdown":"io.cucumber.core.exception.CucumberException: Step [Given a employee is created] is defined with 1 parameters at &#39;com. createEmployee.steps. employeeStep. createEmployee(io.cucumber.datatable.DataTable)&#39;.\nHowever, the gherkin step has 0 arguments.","body":"io.cucumber.core.exception.CucumberException: Step [Given a employee is created] is defined with 1 parameters at &#39;com. createEmployee.steps. employeeStep. createEmployee(io.cucumber.datatable.DataTable)&#39;. However, the gherkin step has 0 arguments."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1695039089,"post_id":77114128,"comment_id":135966440,"body_markdown":"I took the liberty to edit your question and put the exception as part of it. For future reference, this is relevant part of the issue and should always be included in the description of your problem so that other people have the complete picture before attempting to answer your questions.","body":"I took the liberty to edit your question and put the exception as part of it. For future reference, this is relevant part of the issue and should always be included in the description of your problem so that other people have the complete picture before attempting to answer your questions."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":1,"creation_date":1695042700,"post_id":77114128,"comment_id":135967230,"body_markdown":"I hope my answer is clear enough. I would appreciate an upvote if the answer is helpful and to select it as the answer if it fully addressed your issue.","body":"I hope my answer is clear enough. I would appreciate an upvote if the answer is helpful and to select it as the answer if it fully addressed your issue."},{"owner":{"account_id":11088478,"reputation":53,"user_id":8141279,"display_name":"Pruthvi Lalji"},"score":1,"creation_date":1695234934,"post_id":77114128,"comment_id":135998820,"body_markdown":"Yh, its the Gherkin issue, I&#39;ve decided to go ahead with multiple step","body":"Yh, its the Gherkin issue, I&#39;ve decided to go ahead with multiple step"}],"answers":[{"tags":[],"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695230800,"creation_date":1695038862,"answer_id":77127072,"question_id":77114128,"body_markdown":"You defined a step definition that takes a `DataTable` argument but your example to use a default employee uses a step with zero arguments. That is not valid in Gherkins. In fact, this is not valid in Java!\r\n\r\nWhen you create a function in Java\r\n\r\n```\r\npublic void myMethod(String arg) {\r\n...\r\n}\r\n```\r\n\r\nEven if the method accept a `null` value, I must pass a reference to something when I call that method, even if the value is `null`. This\r\n\r\n```\r\nmyObj.myMethod();\r\n```\r\nis not the same as\r\n```\r\nmyObj.myMethod(null);\r\n```\r\nThose are two different methods. Don&#39;t you agree? **Passing no arguments to a function is not the same as passing null arguments.** To make it more relevant to your specific issue, passing no `DataTable` is not the same as passing a null `DataTable`, or passing no `DataTable` rows is not the same as passing empty or null rows. This is what the exception is telling you. You are passing nothing to a function that expects something to be passed to it.\r\n\r\nAlthough I have never taken this approach, I believe you MUST add an empty row to your `DataTable` for your default case to work and I am not even sure if that would work either. Try something like this\r\n\r\n```\r\nGiven a employee is created\r\n| employeeName | employeeNumber |\r\n|              |                |\r\n| John         | 123.           | \r\n```\r\nNow it is up to Gherkin to see if the above case is supported. But the above is the equivalent (in Java) of passing **null** or empty arguments rather than **no** arguments. That said, the above, if it works, I am not sure if it will create a null map. For starters, I don&#39;t know what version of Cucumber you are using. I think newer versions replace empty cells with `null` but I am not certain how this will work, even if you use a newer version, since the key value is null in the above example. This solution may not fully work, but it should get you close.","title":"Java Cucumber with optional Datatable parameter","body":"<p>You defined a step definition that takes a <code>DataTable</code> argument but your example to use a default employee uses a step with zero arguments. That is not valid in Gherkins. In fact, this is not valid in Java!</p>\n<p>When you create a function in Java</p>\n<pre><code>public void myMethod(String arg) {\n...\n}\n</code></pre>\n<p>Even if the method accept a <code>null</code> value, I must pass a reference to something when I call that method, even if the value is <code>null</code>. This</p>\n<pre><code>myObj.myMethod();\n</code></pre>\n<p>is not the same as</p>\n<pre><code>myObj.myMethod(null);\n</code></pre>\n<p>Those are two different methods. Don't you agree? <strong>Passing no arguments to a function is not the same as passing null arguments.</strong> To make it more relevant to your specific issue, passing no <code>DataTable</code> is not the same as passing a null <code>DataTable</code>, or passing no <code>DataTable</code> rows is not the same as passing empty or null rows. This is what the exception is telling you. You are passing nothing to a function that expects something to be passed to it.</p>\n<p>Although I have never taken this approach, I believe you MUST add an empty row to your <code>DataTable</code> for your default case to work and I am not even sure if that would work either. Try something like this</p>\n<pre><code>Given a employee is created\n| employeeName | employeeNumber |\n|              |                |\n| John         | 123.           | \n</code></pre>\n<p>Now it is up to Gherkin to see if the above case is supported. But the above is the equivalent (in Java) of passing <strong>null</strong> or empty arguments rather than <strong>no</strong> arguments. That said, the above, if it works, I am not sure if it will create a null map. For starters, I don't know what version of Cucumber you are using. I think newer versions replace empty cells with <code>null</code> but I am not certain how this will work, even if you use a newer version, since the key value is null in the above example. This solution may not fully work, but it should get you close.</p>\n"}],"owner":{"account_id":11088478,"reputation":53,"user_id":8141279,"display_name":"Pruthvi Lalji"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77127072,"answer_count":1,"score":0,"last_activity_date":1695230800,"creation_date":1694796646,"question_id":77114128,"body_markdown":"I am trying to write a component test were it would be ideal where I can either pass in the values if needed to configure or else use a default values. \r\n\r\nEmployee.class\r\n\r\n    public class Employee {\r\n    public static final Employee DEFAULT_EMPLOYEE = Employee.builder()\r\n    .employeName(&quot;Jack&quot;)\r\n    .employeNumber(01)\r\n    .build();\r\n\r\n \r\n      String employeeName;\r\n      Integer employeeNumber;\r\n    ....\r\n    }\r\n\r\nemployee.feature\r\n\r\n    Given a employee is created\r\n    or\r\n    Given a employee is created\r\n    | employeeName | employeeNumber | \r\n    | John         | 123.           | \r\n\r\nemployeeStep.java\r\n\r\n    @When(&quot;a/the employee is created&quot;)\r\n      public void createEmployee(Employee employee){\r\n      service.createEmpoyee(employee);\r\n    }\r\n\r\nEmployeeTransformer.java\r\n\r\n    public class EmployeeTransformer {\r\n    \r\n    @DataTableType\r\n    public Employee transform(Map&lt;String, String&gt; data) {\r\n      EmployeeBuilder eb = DEFAULT_EMPLOYEE.toBuilder();\r\n    \r\n      Optional.ofNullable(data.get(EMPLOYEEE_NAME))\r\n      .map(String::valueOf)\r\n      .ifPresent(eb::employeeName);\r\n    \r\n      ....\r\n    \r\n      return eb.build();\r\n     }\r\n    }\r\n\r\nAbove transformer handles the step when dataTable parameters is passed in the step. The problem is that when a step with no data table is added to a scenario, it throws the following exception:\r\n\r\n```\r\nio.cucumber.core.exception.CucumberException: Step [Given a employee is created] is defined with 1 parameters at &#39;com. createEmployee.steps. employeeStep. createEmployee(io.cucumber.datatable.DataTable)&#39;. However, the gherkin step has 0 arguments.\r\n```\r\n","title":"Java Cucumber with optional Datatable parameter","body":"<p>I am trying to write a component test were it would be ideal where I can either pass in the values if needed to configure or else use a default values.</p>\n<p>Employee.class</p>\n<pre><code>public class Employee {\npublic static final Employee DEFAULT_EMPLOYEE = Employee.builder()\n.employeName(&quot;Jack&quot;)\n.employeNumber(01)\n.build();\n\n\n  String employeeName;\n  Integer employeeNumber;\n....\n}\n</code></pre>\n<p>employee.feature</p>\n<pre><code>Given a employee is created\nor\nGiven a employee is created\n| employeeName | employeeNumber | \n| John         | 123.           | \n</code></pre>\n<p>employeeStep.java</p>\n<pre><code>@When(&quot;a/the employee is created&quot;)\n  public void createEmployee(Employee employee){\n  service.createEmpoyee(employee);\n}\n</code></pre>\n<p>EmployeeTransformer.java</p>\n<pre><code>public class EmployeeTransformer {\n\n@DataTableType\npublic Employee transform(Map&lt;String, String&gt; data) {\n  EmployeeBuilder eb = DEFAULT_EMPLOYEE.toBuilder();\n\n  Optional.ofNullable(data.get(EMPLOYEEE_NAME))\n  .map(String::valueOf)\n  .ifPresent(eb::employeeName);\n\n  ....\n\n  return eb.build();\n }\n}\n</code></pre>\n<p>Above transformer handles the step when dataTable parameters is passed in the step. The problem is that when a step with no data table is added to a scenario, it throws the following exception:</p>\n<pre><code>io.cucumber.core.exception.CucumberException: Step [Given a employee is created] is defined with 1 parameters at 'com. createEmployee.steps. employeeStep. createEmployee(io.cucumber.datatable.DataTable)'. However, the gherkin step has 0 arguments.\n</code></pre>\n"},{"tags":["java","arrays","loops","arraylist","nested-loops"],"comments":[{"owner":{"account_id":17773243,"reputation":1720,"user_id":12906246,"display_name":"rootkonda"},"score":1,"creation_date":1597699326,"post_id":63458798,"comment_id":112214183,"body_markdown":"You want to return only unique values ?","body":"You want to return only unique values ?"},{"owner":{"account_id":17827664,"reputation":63,"user_id":12949744,"display_name":"eldlit"},"score":0,"creation_date":1597699545,"post_id":63458798,"comment_id":112214259,"body_markdown":"I want to remove all the duplicates before the last one. For example  - 7,7,4,5,7,2,7( input)  and 4,5,2,7( output). As you see last &#39;7&#39; stays","body":"I want to remove all the duplicates before the last one. For example  - 7,7,4,5,7,2,7( input)  and 4,5,2,7( output). As you see last &#39;7&#39; stays"},{"owner":{"account_id":17773243,"reputation":1720,"user_id":12906246,"display_name":"rootkonda"},"score":0,"creation_date":1597699747,"post_id":63458798,"comment_id":112214332,"body_markdown":"Well, its nothing but returning unique elements in the given array right? The position of any last duplicate element means after which there are unique elements only. Or do you want to remove only the duplicate elements of the last duplicate and leave other duplicate elements before last duplicate element unchanged. Which one is it ?","body":"Well, its nothing but returning unique elements in the given array right? The position of any last duplicate element means after which there are unique elements only. Or do you want to remove only the duplicate elements of the last duplicate and leave other duplicate elements before last duplicate element unchanged. Which one is it ?"},{"owner":{"account_id":17827664,"reputation":63,"user_id":12949744,"display_name":"eldlit"},"score":0,"creation_date":1597699917,"post_id":63458798,"comment_id":112214380,"body_markdown":"Yes, i think you get it right","body":"Yes, i think you get it right"},{"owner":{"account_id":17773243,"reputation":1720,"user_id":12906246,"display_name":"rootkonda"},"score":0,"creation_date":1597700030,"post_id":63458798,"comment_id":112214415,"body_markdown":"I said 2 options. If you say my 2nd explanation is right then the output you showed is working as expected right. or for my 1st option if you just want unique elements just use HashSet","body":"I said 2 options. If you say my 2nd explanation is right then the output you showed is working as expected right. or for my 1st option if you just want unique elements just use HashSet"}],"answers":[{"tags":[],"owner":{"account_id":19254723,"reputation":2061,"user_id":14071914,"display_name":"JustAnotherDeveloper"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1597699782,"creation_date":1597699782,"answer_id":63458899,"question_id":63458798,"body_markdown":"You can create a second list, iterate through your input list and for each element of your input list check if the second list contains it. If it doesn&#39;t, add it to the second list. This passes the test case that you mention in your original post:\r\n\r\n```\r\nimport java.util.*;\r\n\r\npublic class MyClass {\r\n    public static void main(String args[]) {\r\n      List&lt;Integer&gt; test = new ArrayList&lt;&gt;();\r\n      List&lt;Integer&gt; noduplicates = new ArrayList&lt;&gt;();\r\n      test.add(1);\r\n      test.add(2);\r\n      test.add(1);\r\n      test.add(2);\r\n      test.add(1);\r\n      test.add(2);\r\n      test.add(3);\r\n      \r\n      for (Integer i : test) {\r\n          if (!noduplicates.contains(i)) {\r\n              noduplicates.add(i);\r\n          }\r\n      }\r\n      System.out.println(noduplicates);\r\n    }\r\n}\r\n```","title":"Removing left sided duplicates from array","body":"<p>You can create a second list, iterate through your input list and for each element of your input list check if the second list contains it. If it doesn't, add it to the second list. This passes the test case that you mention in your original post:</p>\n<pre><code>import java.util.*;\n\npublic class MyClass {\n    public static void main(String args[]) {\n      List&lt;Integer&gt; test = new ArrayList&lt;&gt;();\n      List&lt;Integer&gt; noduplicates = new ArrayList&lt;&gt;();\n      test.add(1);\n      test.add(2);\n      test.add(1);\n      test.add(2);\n      test.add(1);\n      test.add(2);\n      test.add(3);\n      \n      for (Integer i : test) {\n          if (!noduplicates.contains(i)) {\n              noduplicates.add(i);\n          }\n      }\n      System.out.println(noduplicates);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6936824,"reputation":41,"user_id":5324463,"display_name":"Muhammet Kele"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1597699876,"creation_date":1597699876,"answer_id":63458913,"question_id":63458798,"body_markdown":"[HashSet][1] can do this since you cant put duplicate elements to [HashSet][1], all you need to do is put your array into [HashSet][1].\r\n\r\n    List&lt;Integer&gt; arr2 = new ArrayList&lt;&gt;(new HashSet&lt;&gt;(arr));\r\n\r\n[1]: https://www.w3schools.com/java/java_hashset.asp","title":"Removing left sided duplicates from array","body":"<p><a href=\"https://www.w3schools.com/java/java_hashset.asp\" rel=\"nofollow noreferrer\">HashSet</a> can do this since you cant put duplicate elements to <a href=\"https://www.w3schools.com/java/java_hashset.asp\" rel=\"nofollow noreferrer\">HashSet</a>, all you need to do is put your array into <a href=\"https://www.w3schools.com/java/java_hashset.asp\" rel=\"nofollow noreferrer\">HashSet</a>.</p>\n<pre><code>List&lt;Integer&gt; arr2 = new ArrayList&lt;&gt;(new HashSet&lt;&gt;(arr));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1597700948,"creation_date":1597700540,"answer_id":63459023,"question_id":63458798,"body_markdown":"A simple way will be to\r\n\r\n 1. Add the numbers of the array in reverse order to a `LinkedHashSet` in order to keep only unique numbers as well as to preserve the last entry of each unique number.\r\n 2. Create a `List` out of the `LinkedHashSet`.\r\n 3. Reverse the `List` using `Collections#reverse`.\r\n\r\n\r\n\t\timport java.util.ArrayList;\r\n\t\timport java.util.Collections;\r\n\t\timport java.util.LinkedHashSet;\r\n\t\timport java.util.List;\r\n\t\timport java.util.Set;\r\n\r\n\t\tpublic class Main {\r\n\t\t\tpublic static void main(String[] args) {\r\n\t\t\t\tSet&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;();\r\n\t\t\t\tint[] arr = { 7, 7, 4, 5, 7, 2, 7 };\r\n\r\n\t\t\t\t// Add the numbers of the array in reverse order to a LinkedHashSet in order to remove\r\n\t\t\t\t// duplicates as well as to preserve the last entry of each unique number.\r\n\t\t\t\tfor (int i = arr.length - 1; i &gt;= 0; i--) {\r\n\t\t\t\t\tset.add(arr[i]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Create a List out of the LinkedHashSet\r\n\t\t\t\tList&lt;Integer&gt; list = new ArrayList&lt;&gt;(set);\r\n\r\n\t\t\t\t// Reverse the List\r\n\t\t\t\tCollections.reverse(list);\r\n\r\n\t\t\t\t// Display the result\r\n\t\t\t\tSystem.out.println(list);\r\n\t\t\t}\r\n\t\t}\r\n\r\n**Output:**\r\n\r\n    [4, 5, 2, 7]\r\n\r\n","title":"Removing left sided duplicates from array","body":"<p>A simple way will be to</p>\n<ol>\n<li><p>Add the numbers of the array in reverse order to a <code>LinkedHashSet</code> in order to keep only unique numbers as well as to preserve the last entry of each unique number.</p>\n</li>\n<li><p>Create a <code>List</code> out of the <code>LinkedHashSet</code>.</p>\n</li>\n<li><p>Reverse the <code>List</code> using <code>Collections#reverse</code>.</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.LinkedHashSet;\nimport java.util.List;\nimport java.util.Set;\n\npublic class Main {\n    public static void main(String[] args) {\n        Set&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;();\n        int[] arr = { 7, 7, 4, 5, 7, 2, 7 };\n\n        // Add the numbers of the array in reverse order to a LinkedHashSet in order to remove\n        // duplicates as well as to preserve the last entry of each unique number.\n        for (int i = arr.length - 1; i &gt;= 0; i--) {\n            set.add(arr[i]);\n        }\n\n        // Create a List out of the LinkedHashSet\n        List&lt;Integer&gt; list = new ArrayList&lt;&gt;(set);\n\n        // Reverse the List\n        Collections.reverse(list);\n\n        // Display the result\n        System.out.println(list);\n    }\n}\n</code></pre>\n</li>\n</ol>\n<p><strong>Output:</strong></p>\n<pre><code>[4, 5, 2, 7]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695230771,"creation_date":1686636829,"answer_id":76462109,"question_id":63458798,"body_markdown":"As of Java 21, a [`LinkedHashSet`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html) can be used with its [`addLast(e)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#addLast(E)) method.\r\n\r\n```lang-java\r\npublic static int[] solve(int[] arr) {\r\n    SequencedSet&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;();\r\n    for (int i : arr) {\r\n        set.addLast(i);\r\n    }\r\n    return set.stream().mapToInt(Integer::intValue).toArray();\r\n}\r\n```\r\n\r\n`LinkedHashSet` is a collection class which disallows duplicates (due to being a [`Set`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html)) while preserving order (due to being a [`SequencedCollection`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html)).  The `addLast` method adds the given item to the end of the set if it isn&#39;t already present, or moves it to the end if it is.","title":"Removing left sided duplicates from array","body":"<p>As of Java 21, a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html\" rel=\"nofollow noreferrer\"><code>LinkedHashSet</code></a> can be used with its <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#addLast(E)\" rel=\"nofollow noreferrer\"><code>addLast(e)</code></a> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static int[] solve(int[] arr) {\n    SequencedSet&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;();\n    for (int i : arr) {\n        set.addLast(i);\n    }\n    return set.stream().mapToInt(Integer::intValue).toArray();\n}\n</code></pre>\n<p><code>LinkedHashSet</code> is a collection class which disallows duplicates (due to being a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html\" rel=\"nofollow noreferrer\"><code>Set</code></a>) while preserving order (due to being a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html\" rel=\"nofollow noreferrer\"><code>SequencedCollection</code></a>).  The <code>addLast</code> method adds the given item to the end of the set if it isn't already present, or moves it to the end if it is.</p>\n"}],"owner":{"account_id":17827664,"reputation":63,"user_id":12949744,"display_name":"eldlit"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":430,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":63459023,"answer_count":4,"score":2,"last_activity_date":1695230771,"creation_date":1597699113,"question_id":63458798,"body_markdown":"I&#39;m trying to find mistakes in my code and i wonder if you could help me. My task is to write a method that would take an array as an input and return this array without left duplicates(last numbers stay). My code doesn&#39;t work in case when input is( 1,2,1,2,1,2,3 ) It returns (1, 1, 2, 3) instead of 1,2,3. Here is the code \r\n```\r\n     public static int [] solve(int [] arr){\r\n          boolean check=false;\r\n        ArrayList&lt;Integer&gt; test = new ArrayList&lt;&gt;(); // idk how to compete this task without ArrayList\r\n          for (int i = 0; i &lt; arr.length; i++) { // Here i pass my array to ArrayList\r\n             test.add(arr[i]);\r\n             }\r\n             \r\n            while(check==false) {\r\n                for (int i = 0; i &lt; test.size(); i++) {\r\n                   for (int j = i + 1; j &lt; test.size(); j++) { // Somewhere here must be my mistake that i can&#39;t find \r\n                       check=true;\r\n                       if (test.get(i) == test.get(j)) {\r\n                           test.remove(i);\r\n                          check=false;\r\n                       }\r\n                   }\r\n               }\r\n           }\r\n      // i created second array to return array without duplcates. \r\n           int arr2[];\r\n             arr2=new int[test.size()];\r\n             for(int i=0;i&lt;arr2.length;i++){\r\n                 arr2[i]=test.get(i);\r\n             }\r\n        \r\n        return arr2;\r\n    \r\n       }\r\n     }\r\n```\r\nI tried to complete this task on my own, so i didnt use Google to get help until now. If you know how to improve my code feel free to change everything you want to. Thank you in advance! ","title":"Removing left sided duplicates from array","body":"<p>I'm trying to find mistakes in my code and i wonder if you could help me. My task is to write a method that would take an array as an input and return this array without left duplicates(last numbers stay). My code doesn't work in case when input is( 1,2,1,2,1,2,3 ) It returns (1, 1, 2, 3) instead of 1,2,3. Here is the code</p>\n<pre><code>     public static int [] solve(int [] arr){\n          boolean check=false;\n        ArrayList&lt;Integer&gt; test = new ArrayList&lt;&gt;(); // idk how to compete this task without ArrayList\n          for (int i = 0; i &lt; arr.length; i++) { // Here i pass my array to ArrayList\n             test.add(arr[i]);\n             }\n             \n            while(check==false) {\n                for (int i = 0; i &lt; test.size(); i++) {\n                   for (int j = i + 1; j &lt; test.size(); j++) { // Somewhere here must be my mistake that i can't find \n                       check=true;\n                       if (test.get(i) == test.get(j)) {\n                           test.remove(i);\n                          check=false;\n                       }\n                   }\n               }\n           }\n      // i created second array to return array without duplcates. \n           int arr2[];\n             arr2=new int[test.size()];\n             for(int i=0;i&lt;arr2.length;i++){\n                 arr2[i]=test.get(i);\n             }\n        \n        return arr2;\n    \n       }\n     }\n</code></pre>\n<p>I tried to complete this task on my own, so i didnt use Google to get help until now. If you know how to improve my code feel free to change everything you want to. Thank you in advance!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":195331,"reputation":275398,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":5,"creation_date":1394065711,"post_id":22212412,"comment_id":33724243,"body_markdown":"A `Set` doesn&#39;t have an order. Can you clarify? Also, `reverse` takes a `List`.","body":"A <code>Set</code> doesn&#39;t have an order. Can you clarify? Also, <code>reverse</code> takes a <code>List</code>."},{"owner":{"account_id":405356,"reputation":31601,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"score":1,"creation_date":1394065900,"post_id":22212412,"comment_id":33724310,"body_markdown":"Okay... I mean a `LinkedHashSet` (which is ordered). What&#39;s the best way to reverse it? Do I need to get the iterator and just iterate over it, or is there a smarter way?","body":"Okay... I mean a <code>LinkedHashSet</code> (which is ordered). What&#39;s the best way to reverse it? Do I need to get the iterator and just iterate over it, or is there a smarter way?"},{"owner":{"account_id":343645,"reputation":48152,"user_id":675502,"display_name":"dlev"},"score":3,"creation_date":1394065900,"post_id":22212412,"comment_id":33724311,"body_markdown":"@SotiriosDelimanolis In Java, `TreeSet`s keep their items in sorted order. To get at the elements in reverse order, you can use the `descendingSet()` method. For `LinkedHashSet`, see this answer: http://stackoverflow.com/questions/10741902/java-linkedhashset-backwards-iteration","body":"@SotiriosDelimanolis In Java, <code>TreeSet</code>s keep their items in sorted order. To get at the elements in reverse order, you can use the <code>descendingSet()</code> method. For <code>LinkedHashSet</code>, see this answer: <a href=\"http://stackoverflow.com/questions/10741902/java-linkedhashset-backwards-iteration\" title=\"java linkedhashset backwards iteration\">stackoverflow.com/questions/10741902/&hellip;</a>"},{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":4,"creation_date":1394065965,"post_id":22212412,"comment_id":33724333,"body_markdown":"A `LinkedHashSet` is not _ordered_ it is `Linked`. If you want to loop over the items in reverse order of insertion use an `Iterator`.","body":"A <code>LinkedHashSet</code> is not <i>ordered</i> it is <code>Linked</code>. If you want to loop over the items in reverse order of insertion use an <code>Iterator</code>."},{"owner":{"account_id":343645,"reputation":48152,"user_id":675502,"display_name":"dlev"},"score":2,"creation_date":1394066025,"post_id":22212412,"comment_id":33724362,"body_markdown":"@BoristheSpider It&#39;s really dependent on what you mean by &quot;ordered&quot;. `TreeSet` maintains a &quot;sorted&quot; order, whereas `LinkedHashSet` maintains the insertion order (and thus does have a predictable iteration order.)","body":"@BoristheSpider It&#39;s really dependent on what you mean by &quot;ordered&quot;. <code>TreeSet</code> maintains a &quot;sorted&quot; order, whereas <code>LinkedHashSet</code> maintains the insertion order (and thus does have a predictable iteration order.)"},{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":1,"creation_date":1394066226,"post_id":22212412,"comment_id":33724439,"body_markdown":"@dlev you&#39;re right - it&#39;s mainly semantics.","body":"@dlev you&#39;re right - it&#39;s mainly semantics."}],"answers":[{"tags":[],"owner":{"account_id":1878140,"reputation":8733,"user_id":1698887,"accept_rate":50,"display_name":"Daniel Williams"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1394066002,"creation_date":1394066002,"answer_id":22212472,"question_id":22212412,"body_markdown":"Check this out\r\n\r\nhttp://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html#descendingSet()\r\n\r\nIf you use a TreeSet you can get reverse order by calling descendingSet.","title":"Sort a Set in reverse order","body":"<p>Check this out</p>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html#descendingSet()\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html#descendingSet()</a></p>\n\n<p>If you use a TreeSet you can get reverse order by calling descendingSet.</p>\n"},{"tags":[],"owner":{"account_id":320410,"reputation":982,"user_id":638674,"display_name":"Peter"},"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1394066020,"creation_date":1394066020,"answer_id":22212477,"question_id":22212412,"body_markdown":"Sets are not ordered in general, so to preserve the sorting, after sorting the set as a list, you would need to use a known iteration order implementation of Set, such as LinkedHashSet\r\n\r\n    List list = new ArrayList(set);\r\n    Collections.sort(list, Collections.reverseOrder());\r\n    Set resultSet = new LinkedHashSet(list);\r\n\r\nYou could also use TreeSet with a comparator, but that is not as fast as the ArrayList method above.","title":"Sort a Set in reverse order","body":"<p>Sets are not ordered in general, so to preserve the sorting, after sorting the set as a list, you would need to use a known iteration order implementation of Set, such as LinkedHashSet</p>\n\n<pre><code>List list = new ArrayList(set);\nCollections.sort(list, Collections.reverseOrder());\nSet resultSet = new LinkedHashSet(list);\n</code></pre>\n\n<p>You could also use TreeSet with a comparator, but that is not as fast as the ArrayList method above.</p>\n"},{"tags":[],"owner":{"account_id":7363021,"reputation":1618,"user_id":5605687,"accept_rate":100,"display_name":"Onic Team"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1486632337,"creation_date":1486631536,"answer_id":42132413,"question_id":22212412,"body_markdown":"    public class LargestArray {\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tArrayList&lt;Integer&gt; al = new ArrayList&lt;&gt;();\r\n\t\tSet&lt;Integer&gt; set = new TreeSet&lt;&gt;();\r\n\t\tset.add(10);\r\n\t\tset.add(20);\r\n\t\tset.add(7);\r\n\t\tset.add(4);\r\n\t\tset.add(1);\r\n\t\tset.add(2);\r\n\t\tset.add(3);\r\n\t\tset.add(4);\r\n\t\tSystem.out.println(&quot;after Sorting&quot;);\r\n\t\tfor(int i : set) {\r\n\t\t\tSystem.out.print(&quot;  &quot; + i);\r\n\t\t}\r\n\t\tal.addAll(set);\r\n\t\tset.clear();\r\n\t\tCollections.reverse(al);\r\n\t\tSystem.out.println();\r\n\t\tSystem.out.println(&quot;After Reverse&quot;);\r\n\t\tfor (int i : al) {\r\n\t\t\tSystem.out.print(&quot; &quot; + i);\r\n\t\t}\r\n\r\n\t}\r\n\r\n    }\r\n&gt;output = after Sorting \r\n  1  2  3  4  7  10  20\r\nAfter Reverse\r\n 20 10 7 4 3 2 1","title":"Sort a Set in reverse order","body":"<pre><code>public class LargestArray {\npublic static void main(String[] args) {\n\n    ArrayList&lt;Integer&gt; al = new ArrayList&lt;&gt;();\n    Set&lt;Integer&gt; set = new TreeSet&lt;&gt;();\n    set.add(10);\n    set.add(20);\n    set.add(7);\n    set.add(4);\n    set.add(1);\n    set.add(2);\n    set.add(3);\n    set.add(4);\n    System.out.println(\"after Sorting\");\n    for(int i : set) {\n        System.out.print(\"  \" + i);\n    }\n    al.addAll(set);\n    set.clear();\n    Collections.reverse(al);\n    System.out.println();\n    System.out.println(\"After Reverse\");\n    for (int i : al) {\n        System.out.print(\" \" + i);\n    }\n\n}\n\n}\n</code></pre>\n\n<blockquote>\n  <p>output = after Sorting \n    1  2  3  4  7  10  20\n  After Reverse\n   20 10 7 4 3 2 1</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":4850593,"reputation":276,"user_id":3912972,"display_name":"Manjunatha B"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1512567674,"creation_date":1512567521,"answer_id":47675708,"question_id":22212412,"body_markdown":"I will explain you with an example. Comments are added in mid of the code for better understanding.\r\n\r\n    public class ReverseLinkedHashSet {\r\n     \r\n        public static void main(String[] args) {\r\n     \r\n            // creating a LinkedHashSet object which is\r\n            // of type String or any. Will take a example of String.\r\n            HashSet&lt;String&gt; cars = new LinkedHashSet&lt;String&gt;();\r\n     \r\n            // adding car elements to LinkedHashSet object as below\r\n            cars.add(&quot;Toyato&quot;);\r\n            cars.add(&quot;Hundai&quot;);\r\n            cars.add(&quot;Porshe&quot;);\r\n            cars.add(&quot;BMW&quot;);\r\n     \r\n            // Iterating using enhanced for-loop to see the order.\r\n            System.out.println(&quot;Insertion Order: Iterating LinkedHashSet\\n&quot;);\r\n            for(String car : cars) {\r\n                System.out.println(car);\r\n    \t\t\t\r\n    \t\t// Output will be as below\t\r\n    \t\t//Toyato\r\n            //Hundai\r\n            //Porshe\r\n            //BMW\r\n            }\r\n     \r\n            // Now convert to ArrayList to rearrange to reverse\r\n            // the linkedHashset\r\n            List&lt;String&gt; listOfCars = new ArrayList&lt;String&gt;(cars);\r\n     \r\n            // to reverse LinkedHashSet contents\r\n            Collections.reverse(listOfCars);\r\n     \r\n            // reverse order of LinkedHashSet contents\r\n            // can be done as below\r\n            System.out.println(&quot;\\n\\n\\nReverse Order of LinkedHashSet\\n&quot;);\r\n            for(String car : listOfCars) {\r\n                System.out.println(car);\r\n    \t\t\t\r\n    \t\t// Output will be as below\t\r\n    \t\t//BMW\r\n            //Porshe\r\n            //Hundai\r\n            //Toyato\t\r\n            }\r\n        }\r\n    }\r\n\r\nAlso, I suggest not to use `LinkedhashSet` without a strong reason. For a complex application, it will reduce the performance. Use `HashSet` instead.\r\n","title":"Sort a Set in reverse order","body":"<p>I will explain you with an example. Comments are added in mid of the code for better understanding.</p>\n\n<pre><code>public class ReverseLinkedHashSet {\n\n    public static void main(String[] args) {\n\n        // creating a LinkedHashSet object which is\n        // of type String or any. Will take a example of String.\n        HashSet&lt;String&gt; cars = new LinkedHashSet&lt;String&gt;();\n\n        // adding car elements to LinkedHashSet object as below\n        cars.add(\"Toyato\");\n        cars.add(\"Hundai\");\n        cars.add(\"Porshe\");\n        cars.add(\"BMW\");\n\n        // Iterating using enhanced for-loop to see the order.\n        System.out.println(\"Insertion Order: Iterating LinkedHashSet\\n\");\n        for(String car : cars) {\n            System.out.println(car);\n\n        // Output will be as below  \n        //Toyato\n        //Hundai\n        //Porshe\n        //BMW\n        }\n\n        // Now convert to ArrayList to rearrange to reverse\n        // the linkedHashset\n        List&lt;String&gt; listOfCars = new ArrayList&lt;String&gt;(cars);\n\n        // to reverse LinkedHashSet contents\n        Collections.reverse(listOfCars);\n\n        // reverse order of LinkedHashSet contents\n        // can be done as below\n        System.out.println(\"\\n\\n\\nReverse Order of LinkedHashSet\\n\");\n        for(String car : listOfCars) {\n            System.out.println(car);\n\n        // Output will be as below  \n        //BMW\n        //Porshe\n        //Hundai\n        //Toyato    \n        }\n    }\n}\n</code></pre>\n\n<p>Also, I suggest not to use <code>LinkedhashSet</code> without a strong reason. For a complex application, it will reduce the performance. Use <code>HashSet</code> instead.</p>\n"},{"tags":[],"owner":{"account_id":4781484,"reputation":3736,"user_id":3863070,"display_name":"bamossza"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544282985,"creation_date":1544282985,"answer_id":53683999,"question_id":22212412,"body_markdown":"Java 8, I using solution below,\r\n\r\n    Set&lt;String&gt; setTest = new HashSet&lt;&gt;();\r\n    \r\n    setTest.add(&quot;1&quot;);\r\n    setTest.add(&quot;2&quot;);\r\n    setTest.add(&quot;3&quot;);\r\n    \r\n    List&lt;String&gt; list = new ArrayList&lt;&gt;(setTest);\r\n    list.sort(Collections.reverseOrder());\r\n    Set&lt;String&gt; result = new LinkedHashSet&lt;&gt;(list);\r\n    \r\n    for (String item: result) {\r\n        System.out.println(&quot;---&gt; &quot; + item);\r\n    }\r\n    \r\n    Result:\r\n    \r\n    ---&gt; 3\r\n    ---&gt; 2\r\n    ---&gt; 1\r\n\r\nWork for me.","title":"Sort a Set in reverse order","body":"<p>Java 8, I using solution below,</p>\n\n<pre><code>Set&lt;String&gt; setTest = new HashSet&lt;&gt;();\n\nsetTest.add(\"1\");\nsetTest.add(\"2\");\nsetTest.add(\"3\");\n\nList&lt;String&gt; list = new ArrayList&lt;&gt;(setTest);\nlist.sort(Collections.reverseOrder());\nSet&lt;String&gt; result = new LinkedHashSet&lt;&gt;(list);\n\nfor (String item: result) {\n    System.out.println(\"---&gt; \" + item);\n}\n\nResult:\n\n---&gt; 3\n---&gt; 2\n---&gt; 1\n</code></pre>\n\n<p>Work for me.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695230692,"creation_date":1686711632,"answer_id":76469868,"question_id":22212412,"body_markdown":"Java 21 introduced the [`SequencedSet`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html) interface for reversible sets which have a well defined insertion order.  `LinkedHashSet` implements the interface and `SortedSet` extends it.  For such a set, the [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html#reversed()) method will return a reversed view of it.\r\n\r\n```lang-java\r\nSequencedSet&lt;String&gt; set = new LinkedHashSet&lt;&gt;(List.of(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;));\r\nSequencedSet&lt;String&gt; reversedSet = set.reversed();\r\nSystem.out.println(reversedSet); // [C, B, A]\r\n```","title":"Sort a Set in reverse order","body":"<p>Java 21 introduced the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html\" rel=\"nofollow noreferrer\"><code>SequencedSet</code></a> interface for reversible sets which have a well defined insertion order.  <code>LinkedHashSet</code> implements the interface and <code>SortedSet</code> extends it.  For such a set, the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method will return a reversed view of it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>SequencedSet&lt;String&gt; set = new LinkedHashSet&lt;&gt;(List.of(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;));\nSequencedSet&lt;String&gt; reversedSet = set.reversed();\nSystem.out.println(reversedSet); // [C, B, A]\n</code></pre>\n"}],"owner":{"account_id":405356,"reputation":31601,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46682,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":22212477,"answer_count":6,"score":6,"last_activity_date":1695230692,"creation_date":1394065685,"question_id":22212412,"body_markdown":"Apologies for the newbie question, but what&#39;s the proper way to get a `Set` (say `LinkedHashSet`) in reverse order? For `Collection`s there&#39;s `Collections.reverse(Collection c)`, but how does one do it for a `Set` with ordered elements (like a `LinkedHashSet`)?","title":"Sort a Set in reverse order","body":"<p>Apologies for the newbie question, but what's the proper way to get a <code>Set</code> (say <code>LinkedHashSet</code>) in reverse order? For <code>Collection</code>s there's <code>Collections.reverse(Collection c)</code>, but how does one do it for a <code>Set</code> with ordered elements (like a <code>LinkedHashSet</code>)?</p>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":77782,"reputation":4807,"user_id":221781,"accept_rate":100,"display_name":"izilotti"},"score":1,"creation_date":1427943295,"post_id":29403614,"comment_id":46983550,"body_markdown":"This article covers several possibilities: http://www.leveluplunch.com/java/tutorials/028-reverse-order-stream-elements-java8/","body":"This article covers several possibilities: <a href=\"http://www.leveluplunch.com/java/tutorials/028-reverse-order-stream-elements-java8/\" rel=\"nofollow noreferrer\">leveluplunch.com/java/tutorials/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":395375,"reputation":7111,"user_id":3591528,"display_name":"teppic"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1488830635,"creation_date":1427941148,"answer_id":29403969,"question_id":29403614,"body_markdown":"Google&#39;s Guava library provides a reverse view of a list ([`Lists#reverse(List)`][1]). There&#39;s a [`ReverseListIterator`][2] in the Apache Commons Collection library, too. \r\n\r\n\r\n  [1]: https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/Lists.html#reverse-java.util.List-\r\n  [2]: https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/iterators/ReverseListIterator.html","title":"How to get ordered stream from a list in reverse order in Java 8","body":"<p>Google's Guava library provides a reverse view of a list (<a href=\"https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/Lists.html#reverse-java.util.List-\" rel=\"nofollow noreferrer\"><code>Lists#reverse(List)</code></a>). There's a <a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/iterators/ReverseListIterator.html\" rel=\"nofollow noreferrer\"><code>ReverseListIterator</code></a> in the Apache Commons Collection library, too. </p>\n"},{"tags":[],"owner":{"account_id":20061,"reputation":20239,"user_id":47552,"accept_rate":91,"display_name":"Matt McHenry"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1427942886,"creation_date":1427942000,"answer_id":29404098,"question_id":29403614,"body_markdown":"I tend to like @teppic&#39;s answer of using a third-party library to do this.  However, it&#39;s an interesting exercise to try to come up with a solution using only the Java 8 APIs.  Delegating to a `ListIterator` is the cleanest thing I could come up with, but it&#39;s not really much cleaner than implementing your own `Iterator` from scratch.\r\n\r\n    public static void main(String[] args){\r\n        List&lt;String&gt; l = Arrays.asList(&quot;first&quot;, &quot;second&quot;, &quot;third&quot;);\r\n\r\n        StreamSupport.stream(Spliterators.spliterator(revit(l), l.size(), 0), false)\r\n                     .forEachOrdered(System.out::println);\r\n    }\r\n\r\n    private static final &lt;T&gt; Iterator&lt;T&gt; revit(List&lt;T&gt; l){\r\n        ListIterator&lt;T&gt; li = l.listIterator(l.size());\r\n\r\n        return new Iterator&lt;T&gt;(){\r\n            @Override\r\n            public boolean hasNext(){\r\n                return li.hasPrevious();\r\n            }\r\n\r\n            @Override\r\n            public T next(){\r\n                return li.previous();\r\n            }\r\n        };\r\n    }\r\n","title":"How to get ordered stream from a list in reverse order in Java 8","body":"<p>I tend to like @teppic's answer of using a third-party library to do this.  However, it's an interesting exercise to try to come up with a solution using only the Java 8 APIs.  Delegating to a <code>ListIterator</code> is the cleanest thing I could come up with, but it's not really much cleaner than implementing your own <code>Iterator</code> from scratch.</p>\n\n<pre><code>public static void main(String[] args){\n    List&lt;String&gt; l = Arrays.asList(\"first\", \"second\", \"third\");\n\n    StreamSupport.stream(Spliterators.spliterator(revit(l), l.size(), 0), false)\n                 .forEachOrdered(System.out::println);\n}\n\nprivate static final &lt;T&gt; Iterator&lt;T&gt; revit(List&lt;T&gt; l){\n    ListIterator&lt;T&gt; li = l.listIterator(l.size());\n\n    return new Iterator&lt;T&gt;(){\n        @Override\n        public boolean hasNext(){\n            return li.hasPrevious();\n        }\n\n        @Override\n        public T next(){\n            return li.previous();\n        }\n    };\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1427987403,"creation_date":1427950243,"answer_id":29405174,"question_id":29403614,"body_markdown":"**NOTE:** If you have an `ArrayList` or other list that allows random-access retrieval by index (`get(i)`) then [Holger&#39;s approach][1] is preferable. The approach below is only necessary if you have a data structure that allows reverse traversal but not indexed access.\r\n\r\n----------\r\n\r\nUnfortunately there doesn&#39;t seem to be a really simple (i.e., a one-liner) way to do this. But getting a reversed stream using `AbstractSpliterator` isn&#39;t too difficult, given that `List` already has the ability to iterate in reverse. Here&#39;s a utility method to do that:\r\n\r\n    static &lt;T&gt; Stream&lt;T&gt; reversedStream(List&lt;? extends T&gt; input) {\r\n        ListIterator&lt;? extends T&gt; li = input.listIterator(input.size());\r\n        return StreamSupport.stream(\r\n            new Spliterators.AbstractSpliterator&lt;T&gt;(input.size(), Spliterator.ORDERED) {\r\n                @Override public boolean tryAdvance(Consumer&lt;? super T&gt; action) {\r\n                    if (li.hasPrevious()) {\r\n                        action.accept(li.previous());\r\n                        return true;\r\n                    } else {\r\n                        return false;\r\n                    }\r\n                }\r\n            },\r\n            false);\r\n    }\r\n\r\n(I suppose the Spliterator could be `SIZED`, but that&#39;s mostly pointless because this is an [unsplittable spliterator][2].)\r\n\r\nAs it stands, this can afford a limited degree of parallelism, as `AbstractSpliterator` will call `tryAdvance` multiple times and batch up work to hand off to fork-join tasks. But it&#39;s not as efficient as being able to split.\r\n\r\nIf parallel efficiency is a great concern, one could write a spliterator that can actually split, where the splits are traversed in reverse order. \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/29409584/1441122\r\n  [2]: https://stackoverflow.com/questions/28869111/unsplittable-spliterators","title":"How to get ordered stream from a list in reverse order in Java 8","body":"<p><strong>NOTE:</strong> If you have an <code>ArrayList</code> or other list that allows random-access retrieval by index (<code>get(i)</code>) then <a href=\"https://stackoverflow.com/a/29409584/1441122\">Holger's approach</a> is preferable. The approach below is only necessary if you have a data structure that allows reverse traversal but not indexed access.</p>\n\n<hr>\n\n<p>Unfortunately there doesn't seem to be a really simple (i.e., a one-liner) way to do this. But getting a reversed stream using <code>AbstractSpliterator</code> isn't too difficult, given that <code>List</code> already has the ability to iterate in reverse. Here's a utility method to do that:</p>\n\n<pre><code>static &lt;T&gt; Stream&lt;T&gt; reversedStream(List&lt;? extends T&gt; input) {\n    ListIterator&lt;? extends T&gt; li = input.listIterator(input.size());\n    return StreamSupport.stream(\n        new Spliterators.AbstractSpliterator&lt;T&gt;(input.size(), Spliterator.ORDERED) {\n            @Override public boolean tryAdvance(Consumer&lt;? super T&gt; action) {\n                if (li.hasPrevious()) {\n                    action.accept(li.previous());\n                    return true;\n                } else {\n                    return false;\n                }\n            }\n        },\n        false);\n}\n</code></pre>\n\n<p>(I suppose the Spliterator could be <code>SIZED</code>, but that's mostly pointless because this is an <a href=\"https://stackoverflow.com/questions/28869111/unsplittable-spliterators\">unsplittable spliterator</a>.)</p>\n\n<p>As it stands, this can afford a limited degree of parallelism, as <code>AbstractSpliterator</code> will call <code>tryAdvance</code> multiple times and batch up work to hand off to fork-join tasks. But it's not as efficient as being able to split.</p>\n\n<p>If parallel efficiency is a great concern, one could write a spliterator that can actually split, where the splits are traversed in reverse order. </p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1427967266,"creation_date":1427967266,"answer_id":29409584,"question_id":29403614,"body_markdown":"If your `List` is a random access list, you may simply use\r\n\r\n    int num=list.size()-1;\r\n    IntStream.rangeClosed(0, num).mapToObj(i-&gt;list.get(num-i))\r\n\r\nto create a `Stream` which has the characteristics `ORDERED | SIZED | SUBSIZED` and offers full splitting support.\r\n\r\nFor a non-random access list like `LinkedList` it would be a performance disaster, however, who uses `LinkedList` anyway?\r\n\r\nYou may also check via `list instanceof`[`RandomAccess`](http://docs.oracle.com/javase/8/docs/api/java/util/RandomAccess.html) first\r\n","title":"How to get ordered stream from a list in reverse order in Java 8","body":"<p>If your <code>List</code> is a random access list, you may simply use</p>\n\n<pre><code>int num=list.size()-1;\nIntStream.rangeClosed(0, num).mapToObj(i-&gt;list.get(num-i))\n</code></pre>\n\n<p>to create a <code>Stream</code> which has the characteristics <code>ORDERED | SIZED | SUBSIZED</code> and offers full splitting support.</p>\n\n<p>For a non-random access list like <code>LinkedList</code> it would be a performance disaster, however, who uses <code>LinkedList</code> anyway?</p>\n\n<p>You may also check via <code>list instanceof</code><a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/RandomAccess.html\" rel=\"noreferrer\"><code>RandomAccess</code></a> first</p>\n"},{"tags":[],"owner":{"account_id":28748928,"reputation":51,"user_id":22017415,"display_name":"Karl Karlson"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1685875932,"creation_date":1685875932,"answer_id":76400019,"question_id":29403614,"body_markdown":"I found this solution quite recently.\r\n\r\n    public &lt;T&gt; Stream&lt;T&gt; toReverseStream(List&lt;T&gt; list) {\r\n\t\tListIterator&lt;T&gt; listIterator = list.listIterator(list.size());\r\n\t\treturn Stream.generate(listIterator::previous)\r\n\t\t\t\t.limit(list.size());\r\n\t}","title":"How to get ordered stream from a list in reverse order in Java 8","body":"<p>I found this solution quite recently.</p>\n<pre><code>public &lt;T&gt; Stream&lt;T&gt; toReverseStream(List&lt;T&gt; list) {\n    ListIterator&lt;T&gt; listIterator = list.listIterator(list.size());\n    return Stream.generate(listIterator::previous)\n            .limit(list.size());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1695230648,"creation_date":1686713388,"answer_id":76469975,"question_id":29403614,"body_markdown":"Starting with Java 21, the [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()) method can be used to return a reversed view on the list, which can then be streamed over:\r\n\r\n```lang-java\r\nStream&lt;Object&gt; reversedStream = list.reversed().stream();\r\n```\r\n\r\nAs requested, this doesn&#39;t buffer or copy the data, as this is merely a reversed view of the original list.","title":"How to get ordered stream from a list in reverse order in Java 8","body":"<p>Starting with Java 21, the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method can be used to return a reversed view on the list, which can then be streamed over:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Stream&lt;Object&gt; reversedStream = list.reversed().stream();\n</code></pre>\n<p>As requested, this doesn't buffer or copy the data, as this is merely a reversed view of the original list.</p>\n"}],"owner":{"account_id":309680,"reputation":4046,"user_id":622266,"accept_rate":60,"display_name":"Pawel Veselov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20307,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":29405174,"answer_count":6,"score":22,"last_activity_date":1695230648,"creation_date":1427938460,"question_id":29403614,"body_markdown":"Is there a sane way to get an ordered stream from a list (array list specifically, but it shouldn&#39;t matter) that streams elements in reverse of how they are in the original list?\r\n\r\nI&#39;m looking for a solution that doesn&#39;t involve buffering data in anything (collector, another list, array, etc, because they copy the container which is wasteful), or uses `Collections.reverse` (because it modifies the list).\r\n\r\nSo far, the cleanest ways that I see here is to implement my own version of `Spliterator` that&#39;s `ORDERED` and advances through the list in reverse, or implement an `Iterator` that iterates in reverse, and use `Spliterators.spliteratorUnknownSize(iterator,ORDERED)` on it.\r\n\r\nNote this question is different from https://stackoverflow.com/questions/24010109/java-8-stream-reverse-order : that other question asks on how to reverse a stream (which is impossible in general case), and answers offer to reverse the source somehow (which I don&#39;t want to do), and then stream that reversed source. The cost of reversing the source is O(N), and I want to avoid it at all if possible.","title":"How to get ordered stream from a list in reverse order in Java 8","body":"<p>Is there a sane way to get an ordered stream from a list (array list specifically, but it shouldn't matter) that streams elements in reverse of how they are in the original list?</p>\n\n<p>I'm looking for a solution that doesn't involve buffering data in anything (collector, another list, array, etc, because they copy the container which is wasteful), or uses <code>Collections.reverse</code> (because it modifies the list).</p>\n\n<p>So far, the cleanest ways that I see here is to implement my own version of <code>Spliterator</code> that's <code>ORDERED</code> and advances through the list in reverse, or implement an <code>Iterator</code> that iterates in reverse, and use <code>Spliterators.spliteratorUnknownSize(iterator,ORDERED)</code> on it.</p>\n\n<p>Note this question is different from <a href=\"https://stackoverflow.com/questions/24010109/java-8-stream-reverse-order\">Java 8 stream reverse order</a> : that other question asks on how to reverse a stream (which is impossible in general case), and answers offer to reverse the source somehow (which I don't want to do), and then stream that reversed source. The cost of reversing the source is O(N), and I want to avoid it at all if possible.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9821,"page":171,"page_size":100}
