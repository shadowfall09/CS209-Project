{"items":[{"tags":["java","android","linear-programming","scpsolver"],"comments":[{"owner":{"account_id":111736,"reputation":11811,"user_id":295004,"display_name":"Morrison Chang"},"score":0,"creation_date":1676697021,"post_id":75491100,"comment_id":133194286,"body_markdown":"1) You have missing dependency. 2) Checking the README.md on https://bitbucket.org/hplanatscher/scpsolver/src/master/ states &quot;3 steps to start (works for Windows, Linux and Mac) Download the SCPSolver.jar and a solver pack:&quot; 3) As the README states different architectures, a look in the `externaltools` directory shows various C files. So you&#39;ll have to port it to Android if you want to use that library.","body":"1) You have missing dependency. 2) Checking the README.md on <a href=\"https://bitbucket.org/hplanatscher/scpsolver/src/master/\" rel=\"nofollow noreferrer\">bitbucket.org/hplanatscher/scpsolver/src/master</a> states &quot;3 steps to start (works for Windows, Linux and Mac) Download the SCPSolver.jar and a solver pack:&quot; 3) As the README states different architectures, a look in the <code>externaltools</code> directory shows various C files. So you&#39;ll have to port it to Android if you want to use that library."},{"owner":{"account_id":5162157,"reputation":109,"user_id":10217723,"display_name":"Abdalnassir Ghzawi  "},"score":0,"creation_date":1676704014,"post_id":75491100,"comment_id":133194896,"body_markdown":"I did that now I am getting :Installation failed due to: &#39;INSTALL_FAILED_NO_MATCHING_ABIS: Failed to extract native libraries, res=-113&#39;","body":"I did that now I am getting :Installation failed due to: &#39;INSTALL_FAILED_NO_MATCHING_ABIS: Failed to extract native libraries, res=-113&#39;"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676706707,"creation_date":1676706396,"answer_id":75491914,"question_id":75491100,"body_markdown":"&gt; I did that now I am getting :\r\n&gt;\r\n&gt;      Installation failed due to: &#39;INSTALL_FAILED_NO_MATCHING_ABIS: \r\n&gt;      Failed to extract native libraries, res=-113&#39;\r\n\r\nThe standard SCPSolver JARs do not contain native libraries for Android platforms.  The [Website][1] says that the downloadables support &quot;Linux, Mac Os X and Windows&quot;.  Android is not listed.\r\n\r\nYou could attempt to port SCPSolver to Android:\r\n\r\n  - fetch the source code from BitBucket (https://bitbucket.org/hplanatscher/scpsolver.git) \r\n  - modify one of the existing solver build script to work with Android\r\n  - run it.\r\n\r\nYou would also need to deal with any Java(TM) vs Android incompatibilities that affect the codebase.\r\n\r\nHowever ... my Googling didn&#39;t reveal any evidence that anyone has *succeeded* in doing that, so there could be technical problems that need to be overcome.  \r\n\r\nThe other possibility would be to **pay** someone to do the porting work for you.  Note that you / they would need to comply with the terms of the applicable copyright licenses.  See the Website for details.\r\n\r\n\r\n  [1]: http://scpsolver.org/","title":"Using SCPSolver in Android","body":"<blockquote>\n<p>I did that now I am getting :</p>\n<pre><code> Installation failed due to: 'INSTALL_FAILED_NO_MATCHING_ABIS: \n Failed to extract native libraries, res=-113'\n</code></pre>\n</blockquote>\n<p>The standard SCPSolver JARs do not contain native libraries for Android platforms.  The <a href=\"http://scpsolver.org/\" rel=\"nofollow noreferrer\">Website</a> says that the downloadables support &quot;Linux, Mac Os X and Windows&quot;.  Android is not listed.</p>\n<p>You could attempt to port SCPSolver to Android:</p>\n<ul>\n<li>fetch the source code from BitBucket (<a href=\"https://bitbucket.org/hplanatscher/scpsolver.git\" rel=\"nofollow noreferrer\">https://bitbucket.org/hplanatscher/scpsolver.git</a>)</li>\n<li>modify one of the existing solver build script to work with Android</li>\n<li>run it.</li>\n</ul>\n<p>You would also need to deal with any Java(TM) vs Android incompatibilities that affect the codebase.</p>\n<p>However ... my Googling didn't reveal any evidence that anyone has <em>succeeded</em> in doing that, so there could be technical problems that need to be overcome.</p>\n<p>The other possibility would be to <strong>pay</strong> someone to do the porting work for you.  Note that you / they would need to comply with the terms of the applicable copyright licenses.  See the Website for details.</p>\n"}],"owner":{"account_id":5162157,"reputation":109,"user_id":10217723,"display_name":"Abdalnassir Ghzawi  "},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676706707,"creation_date":1676693029,"question_id":75491100,"body_markdown":"I am trying to use [SCPSolver][1] in Android project to solve linear programming problem.\r\nI have downloaded the Jar file and added it to the lib folder. Everything works seemingly fine until I invodel the solve method; I get a null pointer exception.\r\nThis is my code:\r\n\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    \r\n    import android.os.Bundle;\r\n    import android.widget.Toast;\r\n    \r\n    import scpsolver.constraints.LinearBiggerThanEqualsConstraint;\r\n    import scpsolver.constraints.LinearSmallerThanEqualsConstraint;\r\n    import scpsolver.lpsolver.LinearProgramSolver;\r\n    import scpsolver.lpsolver.SolverFactory;\r\n    import scpsolver.problems.LinearProgram;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            LinearProgram lp = new LinearProgram(new double[]{5.0,10.0});\r\n            lp.addConstraint(new LinearBiggerThanEqualsConstraint(new double[]{3.0,1.0}, 8.0, &quot;c1&quot;));\r\n            lp.addConstraint(new LinearBiggerThanEqualsConstraint(new double[]{0.0,4.0}, 4.0, &quot;c2&quot;));\r\n            lp.addConstraint(new LinearSmallerThanEqualsConstraint(new double[]{2.0,0.0}, 2.0, &quot;c3&quot;));\r\n            lp.setMinProblem(true);\r\n            LinearProgramSolver solver  = SolverFactory.newDefault();\r\n            double[] sol = solver.solve(lp);\r\n    \r\n    \r\n        }\r\n    }\r\n\r\nThis is the error I get:\r\n\r\n                                                                                                \r\n\r\n        java.lang.RuntimeException: Unable to start activity \r\n    Attempt to invoke interface method &#39;double[] scpsolver.lpsolver.LinearProgramSolver.solve(scpsolver.problems.LinearProgram)&#39; on a null object reference\r\n    ....\r\n    Caused by: java.lang.NullPointerException: Attempt to invoke interface method &#39;double[] scpsolver.lpsolver.LinearProgramSolver.solve(scpsolver.problems.LinearProgram)&#39; on a null object reference\r\n\r\n\r\n\r\n  [1]: http://scpsolver.org/","title":"Using SCPSolver in Android","body":"<p>I am trying to use <a href=\"http://scpsolver.org/\" rel=\"nofollow noreferrer\">SCPSolver</a> in Android project to solve linear programming problem.\nI have downloaded the Jar file and added it to the lib folder. Everything works seemingly fine until I invodel the solve method; I get a null pointer exception.\nThis is my code:</p>\n<pre><code>import androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.widget.Toast;\n\nimport scpsolver.constraints.LinearBiggerThanEqualsConstraint;\nimport scpsolver.constraints.LinearSmallerThanEqualsConstraint;\nimport scpsolver.lpsolver.LinearProgramSolver;\nimport scpsolver.lpsolver.SolverFactory;\nimport scpsolver.problems.LinearProgram;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        LinearProgram lp = new LinearProgram(new double[]{5.0,10.0});\n        lp.addConstraint(new LinearBiggerThanEqualsConstraint(new double[]{3.0,1.0}, 8.0, &quot;c1&quot;));\n        lp.addConstraint(new LinearBiggerThanEqualsConstraint(new double[]{0.0,4.0}, 4.0, &quot;c2&quot;));\n        lp.addConstraint(new LinearSmallerThanEqualsConstraint(new double[]{2.0,0.0}, 2.0, &quot;c3&quot;));\n        lp.setMinProblem(true);\n        LinearProgramSolver solver  = SolverFactory.newDefault();\n        double[] sol = solver.solve(lp);\n\n\n    }\n}\n</code></pre>\n<p>This is the error I get:</p>\n<pre><code>    java.lang.RuntimeException: Unable to start activity \nAttempt to invoke interface method 'double[] scpsolver.lpsolver.LinearProgramSolver.solve(scpsolver.problems.LinearProgram)' on a null object reference\n....\nCaused by: java.lang.NullPointerException: Attempt to invoke interface method 'double[] scpsolver.lpsolver.LinearProgramSolver.solve(scpsolver.problems.LinearProgram)' on a null object reference\n</code></pre>\n"},{"tags":["java","json","jolt"],"answers":[{"tags":[],"owner":{"account_id":11500422,"reputation":2541,"user_id":8428397,"display_name":"Mohammadreza Khedri"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675689135,"creation_date":1675689135,"answer_id":75361763,"question_id":75361703,"body_markdown":"You can use this spec:\r\n\r\n```json\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: {\r\n        &quot;@&quot;: &quot;&amp;1&quot;,\r\n        &quot;0&quot;: {\r\n          &quot;#startDate&quot;: &quot;date[0].name&quot;,\r\n          &quot;start&quot;: &quot;date[0].value&quot;,\r\n          &quot;#endDate&quot;: &quot;date[1].name&quot;,\r\n          &quot;end&quot;: &quot;date[1].value&quot;\r\n        }\r\n      }\r\n    }\r\n  }\r\n]\r\n```\r\n\r\nYou can use `@` to get the `steps` array and put it into the `steps` key with `&amp;1`.","title":"Jolt transform array into multiple Objects","body":"<p>You can use this spec:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: {\n        &quot;@&quot;: &quot;&amp;1&quot;,\n        &quot;0&quot;: {\n          &quot;#startDate&quot;: &quot;date[0].name&quot;,\n          &quot;start&quot;: &quot;date[0].value&quot;,\n          &quot;#endDate&quot;: &quot;date[1].name&quot;,\n          &quot;end&quot;: &quot;date[1].value&quot;\n        }\n      }\n    }\n  }\n]\n</code></pre>\n<p>You can use <code>@</code> to get the <code>steps</code> array and put it into the <code>steps</code> key with <code>&amp;1</code>.</p>\n"},{"tags":[],"owner":{"account_id":7712415,"reputation":60542,"user_id":5841306,"display_name":"Barbaros &#214;zhan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675691135,"creation_date":1675691135,"answer_id":75362116,"question_id":75361703,"body_markdown":"One option is to conditionally pick by the existing(`steps`) array&#39;s indexes  while walking through it such as\r\n\r\n```json \r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;steps&quot;: {\r\n        &quot;@1&quot;: &quot;&quot;,// derive the whole value from the upper level, eg. replicate it  \r\n        &quot;0&quot;: {// the first index\r\n          &quot;#startDate&quot;: &quot;date[&amp;1].name&quot;,\r\n          &quot;start&quot;: &quot;date[&amp;1].value&quot;\r\n        },\r\n        &quot;*&quot;: {// the other index(this case there&#39;s only one)\r\n          &quot;#endDate&quot;: &quot;date[&amp;1].name&quot;,// bring the value of the wrapper object&#39;S index by using &amp;1(going up one level the tree) \r\n          &quot;end&quot;: &quot;date[&amp;1].value&quot;\r\n        }\r\n      }\r\n    }\r\n  }\r\n]\r\n```\r\n\r\nthe ***demo*** on the site http://jolt-demo.appspot.com/ is\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/C8p5h.jpg","title":"Jolt transform array into multiple Objects","body":"<p>One option is to conditionally pick by the existing(<code>steps</code>) array's indexes  while walking through it such as</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;steps&quot;: {\n        &quot;@1&quot;: &quot;&quot;,// derive the whole value from the upper level, eg. replicate it  \n        &quot;0&quot;: {// the first index\n          &quot;#startDate&quot;: &quot;date[&amp;1].name&quot;,\n          &quot;start&quot;: &quot;date[&amp;1].value&quot;\n        },\n        &quot;*&quot;: {// the other index(this case there's only one)\n          &quot;#endDate&quot;: &quot;date[&amp;1].name&quot;,// bring the value of the wrapper object'S index by using &amp;1(going up one level the tree) \n          &quot;end&quot;: &quot;date[&amp;1].value&quot;\n        }\n      }\n    }\n  }\n]\n</code></pre>\n<p>the <em><strong>demo</strong></em> on the site <a href=\"http://jolt-demo.appspot.com/\" rel=\"nofollow noreferrer\">http://jolt-demo.appspot.com/</a> is</p>\n<p><a href=\"https://i.stack.imgur.com/C8p5h.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C8p5h.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":9939406,"reputation":33,"user_id":7356532,"display_name":"Akshay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1676706580,"creation_date":1675688768,"question_id":75361703,"body_markdown":"I am trying to transform the below JSON:\r\n\r\n**Input:**\r\n\r\n```json\r\n{\r\n  &quot;steps&quot;: [\r\n    {\r\n      &quot;end&quot;: &quot;2023-01-27T09:19:29.849298Z&quot;,\r\n      &quot;id&quot;: &quot;1&quot;,\r\n      &quot;start&quot;: &quot;2023-01-27T09:18:24.59325Z&quot;,\r\n      &quot;name&quot;: &quot;foo&quot;\r\n    },\r\n    {\r\n      &quot;end&quot;: &quot;2023-01-28T09:19:29.849298Z&quot;,\r\n      &quot;id&quot;: &quot;2&quot;,\r\n      &quot;start&quot;: &quot;2023-01-28T09:18:24.59325Z&quot;,\r\n      &quot;name&quot;: &quot;bar&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n**Output:**\r\n\r\n```json\r\n{\r\n  &quot;steps&quot;: [\r\n    {\r\n      &quot;end&quot;: &quot;2023-01-27T09:19:29.849298Z&quot;,\r\n      &quot;id&quot;: &quot;1&quot;,\r\n      &quot;name&quot;: &quot;foo&quot;,\r\n      &quot;start&quot;: &quot;2023-01-27T09:18:24.59325Z&quot;\r\n    },\r\n    {\r\n      &quot;end&quot;: &quot;2023-01-28T09:19:29.849298Z&quot;,\r\n      &quot;id&quot;: &quot;2&quot;,\r\n      &quot;name&quot;: &quot;bar&quot;,\r\n      &quot;start&quot;: &quot;2023-01-28T09:18:24.59325Z&quot;\r\n    }\r\n  ],\r\n  &quot;date&quot;: [\r\n    {\r\n      &quot;name&quot;: &quot;startDate&quot;,\r\n      &quot;value&quot;: &quot;2023-01-27T09:18:24.59325Z&quot; //steps[0].start\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;endDate&quot;,\r\n      &quot;value&quot;: &quot;2023-01-27T09:19:29.849298Z&quot; //steps[0].end\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n\r\nI **tried** using the below spec: \r\n\r\n```json \r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;steps&quot;: {\r\n        &quot;*&quot;: &quot;steps[]&quot;,\r\n        &quot;0&quot;: {\r\n          &quot;#startDate&quot;: &quot;date[0].name&quot;,\r\n          &quot;start&quot;: &quot;date[0].value&quot;,\r\n          &quot;end&quot;: &quot;date[1].value&quot;,\r\n          &quot;#endDate&quot;: &quot;date[1].name&quot;\r\n        }\r\n      }\r\n    }\r\n  }\r\n]\r\n```\r\n\r\nBut **`&quot;*&quot;: &quot;steps[]&quot;`** only transforms the last element of the array steps. Please guide me as to what is wrong with the above spec, as I am new to jolt. Also, any pointers to the correct operations needed to achieve the above output will be greatly appreciated.","title":"Jolt transform array into multiple Objects","body":"<p>I am trying to transform the below JSON:</p>\n<p><strong>Input:</strong></p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;steps&quot;: [\n    {\n      &quot;end&quot;: &quot;2023-01-27T09:19:29.849298Z&quot;,\n      &quot;id&quot;: &quot;1&quot;,\n      &quot;start&quot;: &quot;2023-01-27T09:18:24.59325Z&quot;,\n      &quot;name&quot;: &quot;foo&quot;\n    },\n    {\n      &quot;end&quot;: &quot;2023-01-28T09:19:29.849298Z&quot;,\n      &quot;id&quot;: &quot;2&quot;,\n      &quot;start&quot;: &quot;2023-01-28T09:18:24.59325Z&quot;,\n      &quot;name&quot;: &quot;bar&quot;\n    }\n  ]\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;steps&quot;: [\n    {\n      &quot;end&quot;: &quot;2023-01-27T09:19:29.849298Z&quot;,\n      &quot;id&quot;: &quot;1&quot;,\n      &quot;name&quot;: &quot;foo&quot;,\n      &quot;start&quot;: &quot;2023-01-27T09:18:24.59325Z&quot;\n    },\n    {\n      &quot;end&quot;: &quot;2023-01-28T09:19:29.849298Z&quot;,\n      &quot;id&quot;: &quot;2&quot;,\n      &quot;name&quot;: &quot;bar&quot;,\n      &quot;start&quot;: &quot;2023-01-28T09:18:24.59325Z&quot;\n    }\n  ],\n  &quot;date&quot;: [\n    {\n      &quot;name&quot;: &quot;startDate&quot;,\n      &quot;value&quot;: &quot;2023-01-27T09:18:24.59325Z&quot; //steps[0].start\n    },\n    {\n      &quot;name&quot;: &quot;endDate&quot;,\n      &quot;value&quot;: &quot;2023-01-27T09:19:29.849298Z&quot; //steps[0].end\n    }\n  ]\n}\n</code></pre>\n<p>I <strong>tried</strong> using the below spec:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;steps&quot;: {\n        &quot;*&quot;: &quot;steps[]&quot;,\n        &quot;0&quot;: {\n          &quot;#startDate&quot;: &quot;date[0].name&quot;,\n          &quot;start&quot;: &quot;date[0].value&quot;,\n          &quot;end&quot;: &quot;date[1].value&quot;,\n          &quot;#endDate&quot;: &quot;date[1].name&quot;\n        }\n      }\n    }\n  }\n]\n</code></pre>\n<p>But <strong><code>&quot;*&quot;: &quot;steps[]&quot;</code></strong> only transforms the last element of the array steps. Please guide me as to what is wrong with the above spec, as I am new to jolt. Also, any pointers to the correct operations needed to achieve the above output will be greatly appreciated.</p>\n"},{"tags":["java","android","android-livedata","lint"],"comments":[{"owner":{"account_id":11439016,"reputation":1,"user_id":21238498,"display_name":"Guy Ferguson"},"score":0,"creation_date":1682725215,"post_id":75491923,"comment_id":134266093,"body_markdown":"My first SO question - was it too hard - or too dull - or too long?","body":"My first SO question - was it too hard - or too dull - or too long?"}],"owner":{"account_id":11439016,"reputation":1,"user_id":21238498,"display_name":"Guy Ferguson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676706471,"creation_date":1676706471,"question_id":75491923,"body_markdown":"I have built an Android Java MVVM app, based on some google codelabs no longer published. \r\nBut to demonstrate my issue, I found that Google currently has &#39;Room With a View&#39; app [https://github.com/googlecodelabs/android-room-with-a-view](https://www.stackoverflow.com/), so I cloned it and it exhibits the issue I am experiencing.\r\n\r\nIn the Activity or Fragment, google suggest to Observe Livedata with a construct like:\r\n    \r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n...\r\n  protected void onCreate(Bundle savedInstanceState) {\r\n...\r\n    mWordViewModel.getAllWords().observe(this, words -&gt; {\r\n            // Update the cached copy of the words in the adapter.\r\n            adapter.submitList(words);\r\n        });\r\n    }\r\n}\r\n```\r\nWhich is communicating with a ViewModel :\r\n\r\n```\r\npublic class WordViewModel extends AndroidViewModel {\r\n  ....\r\n    LiveData&lt;List&lt;Word&gt;&gt; getAllWords() {\r\n        return mAllWords;\r\n    }\r\n}\r\n```\r\n\r\nAnd all works nicely.\r\nHowever, if I annotate the Activity with @UiThread, and the ViewModel with @WorkerThread, **most** of my observe methods, asuch as the one above in MainAvtivity, I am told (by lint):\r\n\r\n&gt; Method getAllWords must be called from the worker thread, currently inferred thread is main thread \r\n&gt; Inspection info:Ensures that a method which expects to be called on a specific thread, is actually called from that thread. For example, calls on methods in widgets should always be made on the UI thread.\r\n\r\nI see three options:\r\n- My Observes and VM are badly constructed and need re-work\r\n- I can ignore Lint&#39;s warning in this case\r\n- I have erred in useing @UiThread on MainActivity and @WorkerThread on ViewModel?\r\n\r\nHappy to hear which it is. First SO question, so apologies if I have fumbled in my submission.\r\n\r\nI tried an Observe on Livedata as listed above, and I annotated MainActivity @UiThread and ViewModel @WorkerThread. I expected to not see a lint warning on the Observes.","title":"Should I be worried about lint Warnings &quot;Method X must be called from the worker thread..&quot; on LiveData?","body":"<p>I have built an Android Java MVVM app, based on some google codelabs no longer published.\nBut to demonstrate my issue, I found that Google currently has 'Room With a View' app <a href=\"https://www.stackoverflow.com/\">https://github.com/googlecodelabs/android-room-with-a-view</a>, so I cloned it and it exhibits the issue I am experiencing.</p>\n<p>In the Activity or Fragment, google suggest to Observe Livedata with a construct like:</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n...\n  protected void onCreate(Bundle savedInstanceState) {\n...\n    mWordViewModel.getAllWords().observe(this, words -&gt; {\n            // Update the cached copy of the words in the adapter.\n            adapter.submitList(words);\n        });\n    }\n}\n</code></pre>\n<p>Which is communicating with a ViewModel :</p>\n<pre><code>public class WordViewModel extends AndroidViewModel {\n  ....\n    LiveData&lt;List&lt;Word&gt;&gt; getAllWords() {\n        return mAllWords;\n    }\n}\n</code></pre>\n<p>And all works nicely.\nHowever, if I annotate the Activity with @UiThread, and the ViewModel with @WorkerThread, <strong>most</strong> of my observe methods, asuch as the one above in MainAvtivity, I am told (by lint):</p>\n<blockquote>\n<p>Method getAllWords must be called from the worker thread, currently inferred thread is main thread\nInspection info:Ensures that a method which expects to be called on a specific thread, is actually called from that thread. For example, calls on methods in widgets should always be made on the UI thread.</p>\n</blockquote>\n<p>I see three options:</p>\n<ul>\n<li>My Observes and VM are badly constructed and need re-work</li>\n<li>I can ignore Lint's warning in this case</li>\n<li>I have erred in useing @UiThread on MainActivity and @WorkerThread on ViewModel?</li>\n</ul>\n<p>Happy to hear which it is. First SO question, so apologies if I have fumbled in my submission.</p>\n<p>I tried an Observe on Livedata as listed above, and I annotated MainActivity @UiThread and ViewModel @WorkerThread. I expected to not see a lint warning on the Observes.</p>\n"},{"tags":["java","spring","spring-boot","rabbitmq","spring-amqp"],"answers":[{"tags":[],"owner":{"account_id":13866737,"reputation":654,"user_id":10540846,"display_name":"Thanos M"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1605526840,"creation_date":1605526840,"answer_id":64857322,"question_id":64857283,"body_markdown":"After some digging, I have found out that I was missing the actuator dependency.\r\nSo adding this dependency solved my issue\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIt is weird that the connection is not opened on application startup unless the actuator dependency is present.","title":"Spring AMQP - RabbitMQ connection is not created on application startup","body":"<p>After some digging, I have found out that I was missing the actuator dependency.\nSo adding this dependency solved my issue</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>It is weird that the connection is not opened on application startup unless the actuator dependency is present.</p>\n"},{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1605624019,"creation_date":1605624019,"answer_id":64877380,"question_id":64857283,"body_markdown":"If you want to force declaration during app startup and don&#39;t have any consumers, you can either add the actuator starter to the classpath, or simply create the shared connection yourself.\r\n\r\n```java\r\n@Bean\r\nApplicationRunner runner(ConnectionFactory cf) {\r\n    return args -&gt; cf.createConnection().close();\r\n}\r\n```\r\n\r\nThis won&#39;t close the connection; if you want to do that, call `cf.resetConnection()`.\r\n\r\nIf you want the app to start if the broker is down, do something like this.\r\n\r\n```java\r\n@Bean\r\nApplicationRunner runner(ConnectionFactory cf) {\r\n    return args -&gt; {\r\n        boolean open = false;\r\n        while(!open) {\r\n            try {\r\n                cf.createConnection().close();\r\n                open = true;\r\n            }\r\n            catch (Exception e) {\r\n                Thread.sleep(5000);\r\n            }\r\n        }\r\n    };\r\n}\r\n```\r\n","title":"Spring AMQP - RabbitMQ connection is not created on application startup","body":"<p>If you want to force declaration during app startup and don't have any consumers, you can either add the actuator starter to the classpath, or simply create the shared connection yourself.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\nApplicationRunner runner(ConnectionFactory cf) {\n    return args -&gt; cf.createConnection().close();\n}\n</code></pre>\n<p>This won't close the connection; if you want to do that, call <code>cf.resetConnection()</code>.</p>\n<p>If you want the app to start if the broker is down, do something like this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\nApplicationRunner runner(ConnectionFactory cf) {\n    return args -&gt; {\n        boolean open = false;\n        while(!open) {\n            try {\n                cf.createConnection().close();\n                open = true;\n            }\n            catch (Exception e) {\n                Thread.sleep(5000);\n            }\n        }\n    };\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9124665,"reputation":29,"user_id":6788917,"display_name":"walkwolf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650512404,"creation_date":1650512404,"answer_id":71948661,"question_id":64857283,"body_markdown":"You can use\r\n```\r\n@Component\r\npublic class QueueConfig {\r\n\r\n    private AmqpAdmin amqpAdmin;\r\n\r\n    public QueueConfig(AmqpAdmin amqpAdmin) {\r\n        this.amqpAdmin = amqpAdmin;\r\n    }\r\n\r\n    @PostConstruct\r\n    public void createQueues() {\r\n        amqpAdmin.declareQueue(new Queue(&quot;q1&quot;, true));\r\n        amqpAdmin.declareQueue(new Queue(&quot;q2&quot;, true));\r\n    }\r\n}\r\n```","title":"Spring AMQP - RabbitMQ connection is not created on application startup","body":"<p>You can use</p>\n<pre><code>@Component\npublic class QueueConfig {\n\n    private AmqpAdmin amqpAdmin;\n\n    public QueueConfig(AmqpAdmin amqpAdmin) {\n        this.amqpAdmin = amqpAdmin;\n    }\n\n    @PostConstruct\n    public void createQueues() {\n        amqpAdmin.declareQueue(new Queue(&quot;q1&quot;, true));\n        amqpAdmin.declareQueue(new Queue(&quot;q2&quot;, true));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":13866737,"reputation":654,"user_id":10540846,"display_name":"Thanos M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6023,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":64877380,"answer_count":3,"score":2,"last_activity_date":1676705261,"creation_date":1605526692,"question_id":64857283,"body_markdown":"I have a Spring Boot application and my goal is to declare queues, exchanges, and bindings on application startup. The application will produce messages to various queues there will be no consumers on the application.\r\n\r\nI have included those dependencies on my `pom.xml`\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.5.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.amqp&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-rabbit&lt;/artifactId&gt;\r\n        &lt;version&gt;2.2.12.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nmy configuration class\r\n\r\n    @Configuration\r\n    public class RabbitConfiguration {\r\n    \r\n        @Bean\r\n        public ConnectionFactory connectionFactory() {\r\n            CachingConnectionFactory connectionFactory = new CachingConnectionFactory(&quot;myhost&quot;, 5672);\r\n            connectionFactory.setUsername(&quot;example_name&quot;);\r\n            connectionFactory.setPassword(&quot;example_pass&quot;);\r\n            return connectionFactory;\r\n        }\r\n    \r\n        @Bean\r\n        public AmqpAdmin rabbitAdmin(ConnectionFactory connectionFactory) {\r\n            return new RabbitAdmin(connectionFactory);\r\n        }\r\n    \r\n        @Bean\r\n        public Queue declareQueue() {\r\n            return new Queue(&quot;test_queue&quot;, true, false, false);\r\n        }\r\n    \r\n        @Bean\r\n        public DirectExchange declareDirectExchange() {\r\n            return new DirectExchange(&quot;test_direct_exchange&quot;, true, false);\r\n        }\r\n    \r\n        @Bean\r\n        public Declarables declareBindings() {\r\n            return new Declarables(\r\n                new Binding(&quot;test_queue&quot;, DestinationType.QUEUE, &quot;test_direct_exchange&quot;, &quot;test_routing_key&quot;, null)\r\n            );\r\n        }\r\n    }\r\n\r\nMy problem is that queues, exchanges, and bindings are not created on the application startup. Spring boot does not even open the connection. The connection, queues, etc are created only when I produce messages to the queues.\r\n","title":"Spring AMQP - RabbitMQ connection is not created on application startup","body":"<p>I have a Spring Boot application and my goal is to declare queues, exchanges, and bindings on application startup. The application will produce messages to various queues there will be no consumers on the application.</p>\n<p>I have included those dependencies on my <code>pom.xml</code></p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;version&gt;2.3.5.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.amqp&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-rabbit&lt;/artifactId&gt;\n    &lt;version&gt;2.2.12.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>my configuration class</p>\n<pre><code>@Configuration\npublic class RabbitConfiguration {\n\n    @Bean\n    public ConnectionFactory connectionFactory() {\n        CachingConnectionFactory connectionFactory = new CachingConnectionFactory(&quot;myhost&quot;, 5672);\n        connectionFactory.setUsername(&quot;example_name&quot;);\n        connectionFactory.setPassword(&quot;example_pass&quot;);\n        return connectionFactory;\n    }\n\n    @Bean\n    public AmqpAdmin rabbitAdmin(ConnectionFactory connectionFactory) {\n        return new RabbitAdmin(connectionFactory);\n    }\n\n    @Bean\n    public Queue declareQueue() {\n        return new Queue(&quot;test_queue&quot;, true, false, false);\n    }\n\n    @Bean\n    public DirectExchange declareDirectExchange() {\n        return new DirectExchange(&quot;test_direct_exchange&quot;, true, false);\n    }\n\n    @Bean\n    public Declarables declareBindings() {\n        return new Declarables(\n            new Binding(&quot;test_queue&quot;, DestinationType.QUEUE, &quot;test_direct_exchange&quot;, &quot;test_routing_key&quot;, null)\n        );\n    }\n}\n</code></pre>\n<p>My problem is that queues, exchanges, and bindings are not created on the application startup. Spring boot does not even open the connection. The connection, queues, etc are created only when I produce messages to the queues.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3187884,"reputation":3146,"user_id":2693006,"accept_rate":43,"display_name":"Ceiling Gecko"},"score":9,"creation_date":1437726219,"post_id":31605536,"comment_id":51161559,"body_markdown":"We have a different site for this [Code Review SE](http://codereview.stackexchange.com)","body":"We have a different site for this <a href=\"http://codereview.stackexchange.com\">Code Review SE</a>"},{"owner":{"account_id":6525428,"reputation":1,"user_id":5048334,"display_name":"Alex Wormbs"},"score":0,"creation_date":1437726337,"post_id":31605536,"comment_id":51161641,"body_markdown":"Oh, should I just re-post or could anyone move this over to the appropriate forum?","body":"Oh, should I just re-post or could anyone move this over to the appropriate forum?"},{"owner":{"account_id":6102174,"reputation":1735,"user_id":4760884,"accept_rate":80,"display_name":"Horatio"},"score":0,"creation_date":1437726459,"post_id":31605536,"comment_id":51161706,"body_markdown":"switch statements https://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html","body":"switch statements <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.htm&zwnj;&#8203;l</a>"},{"owner":{"account_id":5955901,"reputation":10524,"user_id":4682610,"accept_rate":29,"display_name":"Florian Schaetz"},"score":0,"creation_date":1437726482,"post_id":31605536,"comment_id":51161718,"body_markdown":"Personally, I would probably refactor most of the ifs als enum constants, one for each possible config value. Enum constants are real objects, they can have methods, members, etc. so they can do stuff, for example set variables in another object. But of course reading should be separated from that, parsing, too, etc.","body":"Personally, I would probably refactor most of the ifs als enum constants, one for each possible config value. Enum constants are real objects, they can have methods, members, etc. so they can do stuff, for example set variables in another object. But of course reading should be separated from that, parsing, too, etc."},{"owner":{"account_id":1521272,"reputation":1659,"user_id":1420839,"accept_rate":80,"display_name":"Dragondraikk"},"score":0,"creation_date":1437727556,"post_id":31605536,"comment_id":51162377,"body_markdown":"@Horatio String switch checks for `equals`, not `contains`","body":"@Horatio String switch checks for <code>equals</code>, not <code>contains</code>"}],"answers":[{"tags":[],"owner":{"display_name":"user4948585"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1437726889,"creation_date":1437726889,"answer_id":31605793,"question_id":31605536,"body_markdown":"As i see most of your code is doing repetitive work ( check if like has some text and perform some action on it.) \r\nI suggest you create pluggable matchAndPerform methods. i.e. encapsulate string matching and related method calls into a class (strategy pattern) and have some class where you can dynamically register and remove these matcher objects. \r\n\r\nexample of strategy pattern:\r\n\r\n    public class Context {\r\n       private Strategy strategy;\r\n       public Context(Strategy strategy){\r\n          this.strategy = strategy;\r\n       }\r\n       public int executeStrategy(int num1, int num2){\r\n          return strategy.doOperation(num1, num2);\r\n       }\r\n    }\r\n    public class OperationMultiply implements Strategy{\r\n       @Override\r\n       public int doOperation(int num1, int num2) {\r\n          return num1 * num2;\r\n       }\r\n    }","title":"How to refactor this messy code","body":"<p>As i see most of your code is doing repetitive work ( check if like has some text and perform some action on it.) \nI suggest you create pluggable matchAndPerform methods. i.e. encapsulate string matching and related method calls into a class (strategy pattern) and have some class where you can dynamically register and remove these matcher objects. </p>\n\n<p>example of strategy pattern:</p>\n\n<pre><code>public class Context {\n   private Strategy strategy;\n   public Context(Strategy strategy){\n      this.strategy = strategy;\n   }\n   public int executeStrategy(int num1, int num2){\n      return strategy.doOperation(num1, num2);\n   }\n}\npublic class OperationMultiply implements Strategy{\n   @Override\n   public int doOperation(int num1, int num2) {\n      return num1 * num2;\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27817308,"reputation":1,"user_id":21238431,"display_name":"Refractor boss"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1676704676,"creation_date":1676704676,"answer_id":75491789,"question_id":31605536,"body_markdown":"    well, I hope this helps\r\n    \r\n        try (BufferedReader reader = new BufferedReader(new FileReader(pathToConfig))) {\r\n        String line;\r\n        while ((line = reader.readLine()) != null) {\r\n            if (line.contains(&quot;//&quot;) || line.isEmpty()) {\r\n                continue;\r\n            }\r\n            String[] parts = line.split(&quot;=&quot;, 2);\r\n            String key = parts[0].trim();\r\n            String value = parts[1].trim();\r\n            switch (key) {\r\n                case &quot;inputFolderPath&quot;:\r\n                    pathToFolder = value;\r\n                    break;\r\n                case &quot;defaultOutputPath&quot;:\r\n                    defaultOutputPath = value;\r\n                    break;\r\n                case &quot;checkStyleAttribute&quot;:\r\n                    if (!value.contains(&quot;Path&quot;)) {\r\n                        checkStyle = Boolean.parseBoolean(value);\r\n                        errorListStyleAttribute = new ArrayList&lt;&gt;();\r\n                    }\r\n                    break;\r\n                case &quot;checkXrefAndNormalLinks&quot;:\r\n                    if (!value.contains(&quot;Path&quot;)) {\r\n                        checkXref = Boolean.parseBoolean(value);\r\n                        errorListXref = new ArrayList&lt;&gt;();\r\n                    }\r\n                    break;\r\n                case &quot;checkThatAllTopicsHaveConceptKeywords&quot;:\r\n                    if (!value.contains(&quot;Path&quot;)) {\r\n                        checkThatAllTopicsHaveConceptKeywords = Boolean.parseBoolean(value);\r\n                        errorListConceptKeywords = new ArrayList&lt;&gt;();\r\n                    }\r\n                    break;\r\n                case &quot;checkThatAllTopicsHaveIndexKeywords&quot;:\r\n                    if (!value.contains(&quot;Path&quot;)) {\r\n                        checkThatAllTopicsHaveIndexKeywords = Boolean.parseBoolean(value);\r\n                        errorListIndexKeywords = new ArrayList&lt;&gt;();\r\n                    }\r\n                    break;\r\n                case &quot;checkForNoUIElementsInHeadings&quot;:\r\n                    if (!value.contains(&quot;Path&quot;)) {\r\n                        checkForNoUIElementsInHeadings = Boolean.parseBoolean(value);\r\n                        errorListUiElements = new ArrayList&lt;&gt;();\r\n                    }\r\n                    break;\r\n                case &quot;whatElementToCheckForStyle&quot;:\r\n                    tag = value;\r\n                    if (tag.charAt(0) == &#39;[&#39;) {\r\n                        tag = tag.substring(1, tag.length() - 1);\r\n                        String[] tags = tag.split(&quot;,&quot;);\r\n                        for (String t : tags) {\r\n                            tagsToCheck.add(t.trim());\r\n                        }\r\n                    } else if (tag.equals(&quot;all&quot;)) {\r\n                        checkEveryTag = true;\r\n                    } else {\r\n                        tagsToCheck.add(tag);\r\n                    }\r\n                    break;\r\n                case &quot;checkForProductNamesWithoutDNTTag&quot;:\r\n                    if (!value.contains(&quot;Path&quot;)) {\r\n                        checkForProductNamesWithoutDNTTag = Boolean.parseBoolean(value);\r\n                        errorProductNamesWithoutDNTTag = new ArrayList&lt;&gt;();\r\n                    }\r\n                    break;\r\n                default:\r\n                    // ignore unrecognized keys\r\n                    break;\r\n            }\r\n        }\r\n    } catch (IOException e) {\r\n        // handle exception\r\n    }\r\n\r\n","title":"How to refactor this messy code","body":"<pre><code>well, I hope this helps\n\n    try (BufferedReader reader = new BufferedReader(new FileReader(pathToConfig))) {\n    String line;\n    while ((line = reader.readLine()) != null) {\n        if (line.contains(&quot;//&quot;) || line.isEmpty()) {\n            continue;\n        }\n        String[] parts = line.split(&quot;=&quot;, 2);\n        String key = parts[0].trim();\n        String value = parts[1].trim();\n        switch (key) {\n            case &quot;inputFolderPath&quot;:\n                pathToFolder = value;\n                break;\n            case &quot;defaultOutputPath&quot;:\n                defaultOutputPath = value;\n                break;\n            case &quot;checkStyleAttribute&quot;:\n                if (!value.contains(&quot;Path&quot;)) {\n                    checkStyle = Boolean.parseBoolean(value);\n                    errorListStyleAttribute = new ArrayList&lt;&gt;();\n                }\n                break;\n            case &quot;checkXrefAndNormalLinks&quot;:\n                if (!value.contains(&quot;Path&quot;)) {\n                    checkXref = Boolean.parseBoolean(value);\n                    errorListXref = new ArrayList&lt;&gt;();\n                }\n                break;\n            case &quot;checkThatAllTopicsHaveConceptKeywords&quot;:\n                if (!value.contains(&quot;Path&quot;)) {\n                    checkThatAllTopicsHaveConceptKeywords = Boolean.parseBoolean(value);\n                    errorListConceptKeywords = new ArrayList&lt;&gt;();\n                }\n                break;\n            case &quot;checkThatAllTopicsHaveIndexKeywords&quot;:\n                if (!value.contains(&quot;Path&quot;)) {\n                    checkThatAllTopicsHaveIndexKeywords = Boolean.parseBoolean(value);\n                    errorListIndexKeywords = new ArrayList&lt;&gt;();\n                }\n                break;\n            case &quot;checkForNoUIElementsInHeadings&quot;:\n                if (!value.contains(&quot;Path&quot;)) {\n                    checkForNoUIElementsInHeadings = Boolean.parseBoolean(value);\n                    errorListUiElements = new ArrayList&lt;&gt;();\n                }\n                break;\n            case &quot;whatElementToCheckForStyle&quot;:\n                tag = value;\n                if (tag.charAt(0) == '[') {\n                    tag = tag.substring(1, tag.length() - 1);\n                    String[] tags = tag.split(&quot;,&quot;);\n                    for (String t : tags) {\n                        tagsToCheck.add(t.trim());\n                    }\n                } else if (tag.equals(&quot;all&quot;)) {\n                    checkEveryTag = true;\n                } else {\n                    tagsToCheck.add(tag);\n                }\n                break;\n            case &quot;checkForProductNamesWithoutDNTTag&quot;:\n                if (!value.contains(&quot;Path&quot;)) {\n                    checkForProductNamesWithoutDNTTag = Boolean.parseBoolean(value);\n                    errorProductNamesWithoutDNTTag = new ArrayList&lt;&gt;();\n                }\n                break;\n            default:\n                // ignore unrecognized keys\n                break;\n        }\n    }\n} catch (IOException e) {\n    // handle exception\n}\n</code></pre>\n"}],"owner":{"account_id":6525428,"reputation":1,"user_id":5048334,"display_name":"Alex Wormbs"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":552,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":31605793,"answer_count":2,"score":-2,"last_activity_date":1676704676,"creation_date":1437726022,"question_id":31605536,"body_markdown":"I have this code that I need to re-write and make a little prettier. It reads lines from a config.txt file and sets variables based on the contents of the file. As you can see, the code is ugly in many ways. There is a lot of duplicated code and the way the program checks the contents of the file is not very elegant (it should probably iterate over the lines instead of checking if the file contains a specific text). Overall, I think it would be nice to avoid having a huge wall of if/else blocks, which actually continues further down but I felt no need to include all of it.\r\n\r\nAll the program code is written in one main method and I would like to create some classes. I was thinking of a Config class that should handle reading from a config file, and it would have a list of lines (Line objects maybe?) and handle them in order. I&#39;ve been reading about things like [Strategy pattern](https://en.wikipedia.org/wiki/Strategy_pattern) and [Command pattern](https://en.wikipedia.org/wiki/Command_pattern) recently and would like to apply something like that to this case, but I&#39;m unsure any of that is appropriate here. If anyone experienced has any input on this I would greatly appreciate it!\r\n\r\n        ...\r\n\t\ttry {\r\n\t\t\treader = new BufferedReader(new FileReader(pathToConfig));\r\n\t\t\tline = reader.readLine();\r\n\t\t\twhile(line!=null){\r\n\t\t\t\tif(line.contains(&quot;//&quot;)|| line.equals(&quot;&quot;));\r\n\t\t\t\telse{\r\n\t\t\t\t\tif(line.contains(&quot;inputFolderPath&quot;))\t{\r\n\t\t\t\t\t\tpathToFolder=line.split(&quot;=&quot;)[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(line.contains(&quot;defaultOutputPath&quot;)){\r\n\t\t\t\t\t\tdefaultOutputPath=line.split(&quot;=&quot;)[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(line.contains(&quot;checkStyleAttribute&quot;)&amp;&amp;!line.contains(&quot;Path&quot;)){\r\n\t\t\t\t\t\tlineAfterSplit=line.split(&quot;=&quot;)[1];\r\n\t\t\t\t\t\tcheckStyle=Boolean.parseBoolean(lineAfterSplit);\r\n\t\t\t\t\t\terrorListStyleAttribute=new ArrayList&lt;String&gt;();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(line.contains(&quot;checkXrefAndNormalLinks&quot;)&amp;&amp;!line.contains(&quot;Path&quot;)){\r\n\t\t\t\t\t\tlineAfterSplit=line.split(&quot;=&quot;)[1];\r\n\t\t\t\t\t\tcheckXref=Boolean.parseBoolean(lineAfterSplit);\r\n\t\t\t\t\t\terrorListXref = new ArrayList&lt;String&gt;();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(line.contains(&quot;checkThatAllTopicsHaveConceptKeywords&quot;)&amp;&amp;!line.contains(&quot;Path&quot;)){\r\n\t\t\t\t\t\tlineAfterSplit=line.split(&quot;=&quot;)[1];\r\n\t\t\t\t\t\tcheckThatAllTopicsHaveConceptKeywords=Boolean.parseBoolean(lineAfterSplit);\r\n\t\t\t\t\t\terrorListConceptKeywords=new ArrayList&lt;String&gt;();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(line.contains(&quot;checkThatAllTopicsHaveIndexKeywords&quot;)&amp;&amp;!line.contains(&quot;Path&quot;)){\r\n\t\t\t\t\t\tlineAfterSplit=line.split(&quot;=&quot;)[1];\r\n\t\t\t\t\t\tcheckThatAllTopicsHaveIndexKeywords=Boolean.parseBoolean(lineAfterSplit);\r\n\t\t\t\t\t\terrorListIndexKeywords=new ArrayList&lt;String&gt;();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(line.contains(&quot;checkForNoUIElementsInHeadings&quot;)&amp;&amp;!line.contains(&quot;Path&quot;)){\r\n\r\n\t\t\t\t\t\tlineAfterSplit=line.split(&quot;=&quot;)[1];\r\n\t\t\t\t\t\tcheckForNoUIElementsInHeadings=Boolean.parseBoolean(lineAfterSplit);\r\n\t\t\t\t\t\terrorListUiElements=new ArrayList&lt;String&gt;();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(line.contains(&quot;whatElementToCheckForStyle&quot;)){\r\n\t\t\t\t\t\ttag=line.split(&quot;=&quot;)[1];\r\n\t\t\t\t\t\tif(tag.charAt(0)==&#39;[&#39;){\r\n\t\t\t\t\t\t\ttag=tag.substring(1, tag.length()-1);\r\n\t\t\t\t\t\t\tString[] tags = tag.split(&quot;,&quot;);\r\n\t\t\t\t\t\t\tfor(int i=0;i&lt;tags.length;i++){\r\n\t\t\t\t\t\t\t\ttagsToCheck.add(tags[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\telse if(tag.equals(&quot;all&quot;)){\r\n\t\t\t\t\t\t\tcheckEveryTag=true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\ttagsToCheck.add(tag);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(line.contains(&quot;checkForProductNamesWithoutDNTTag&quot;)&amp;&amp;!line.contains(&quot;Path&quot;)){\r\n\t\t\t\t\t\tlineAfterSplit=line.split(&quot;=&quot;)[1];\r\n\t\t\t\t\t\tcheckForProductNamesWithoutDNTTag=Boolean.parseBoolean(lineAfterSplit);\r\n\t\t\t\t\t\terrorProductNamesWithoutDNTTag=new ArrayList&lt;String&gt;();\r\n\t\t\t\t\t}\r\n         ... and it just goes on","title":"How to refactor this messy code","body":"<p>I have this code that I need to re-write and make a little prettier. It reads lines from a config.txt file and sets variables based on the contents of the file. As you can see, the code is ugly in many ways. There is a lot of duplicated code and the way the program checks the contents of the file is not very elegant (it should probably iterate over the lines instead of checking if the file contains a specific text). Overall, I think it would be nice to avoid having a huge wall of if/else blocks, which actually continues further down but I felt no need to include all of it.</p>\n\n<p>All the program code is written in one main method and I would like to create some classes. I was thinking of a Config class that should handle reading from a config file, and it would have a list of lines (Line objects maybe?) and handle them in order. I've been reading about things like <a href=\"https://en.wikipedia.org/wiki/Strategy_pattern\" rel=\"nofollow\">Strategy pattern</a> and <a href=\"https://en.wikipedia.org/wiki/Command_pattern\" rel=\"nofollow\">Command pattern</a> recently and would like to apply something like that to this case, but I'm unsure any of that is appropriate here. If anyone experienced has any input on this I would greatly appreciate it!</p>\n\n<pre><code>    ...\n    try {\n        reader = new BufferedReader(new FileReader(pathToConfig));\n        line = reader.readLine();\n        while(line!=null){\n            if(line.contains(\"//\")|| line.equals(\"\"));\n            else{\n                if(line.contains(\"inputFolderPath\"))    {\n                    pathToFolder=line.split(\"=\")[1];\n                }\n                else if(line.contains(\"defaultOutputPath\")){\n                    defaultOutputPath=line.split(\"=\")[1];\n                }\n                else if(line.contains(\"checkStyleAttribute\")&amp;&amp;!line.contains(\"Path\")){\n                    lineAfterSplit=line.split(\"=\")[1];\n                    checkStyle=Boolean.parseBoolean(lineAfterSplit);\n                    errorListStyleAttribute=new ArrayList&lt;String&gt;();\n                }\n                else if(line.contains(\"checkXrefAndNormalLinks\")&amp;&amp;!line.contains(\"Path\")){\n                    lineAfterSplit=line.split(\"=\")[1];\n                    checkXref=Boolean.parseBoolean(lineAfterSplit);\n                    errorListXref = new ArrayList&lt;String&gt;();\n                }\n                else if(line.contains(\"checkThatAllTopicsHaveConceptKeywords\")&amp;&amp;!line.contains(\"Path\")){\n                    lineAfterSplit=line.split(\"=\")[1];\n                    checkThatAllTopicsHaveConceptKeywords=Boolean.parseBoolean(lineAfterSplit);\n                    errorListConceptKeywords=new ArrayList&lt;String&gt;();\n                }\n                else if(line.contains(\"checkThatAllTopicsHaveIndexKeywords\")&amp;&amp;!line.contains(\"Path\")){\n                    lineAfterSplit=line.split(\"=\")[1];\n                    checkThatAllTopicsHaveIndexKeywords=Boolean.parseBoolean(lineAfterSplit);\n                    errorListIndexKeywords=new ArrayList&lt;String&gt;();\n                }\n                else if(line.contains(\"checkForNoUIElementsInHeadings\")&amp;&amp;!line.contains(\"Path\")){\n\n                    lineAfterSplit=line.split(\"=\")[1];\n                    checkForNoUIElementsInHeadings=Boolean.parseBoolean(lineAfterSplit);\n                    errorListUiElements=new ArrayList&lt;String&gt;();\n                }\n                else if(line.contains(\"whatElementToCheckForStyle\")){\n                    tag=line.split(\"=\")[1];\n                    if(tag.charAt(0)=='['){\n                        tag=tag.substring(1, tag.length()-1);\n                        String[] tags = tag.split(\",\");\n                        for(int i=0;i&lt;tags.length;i++){\n                            tagsToCheck.add(tags[i]);\n                        }\n                    }\n\n\n                    else if(tag.equals(\"all\")){\n                        checkEveryTag=true;\n                    }\n                    else{\n                        tagsToCheck.add(tag);\n                    }\n                }\n                else if(line.contains(\"checkForProductNamesWithoutDNTTag\")&amp;&amp;!line.contains(\"Path\")){\n                    lineAfterSplit=line.split(\"=\")[1];\n                    checkForProductNamesWithoutDNTTag=Boolean.parseBoolean(lineAfterSplit);\n                    errorProductNamesWithoutDNTTag=new ArrayList&lt;String&gt;();\n                }\n     ... and it just goes on\n</code></pre>\n"},{"tags":["java","spring","jsp","spring-mvc"],"comments":[{"owner":{"account_id":1566138,"reputation":192,"user_id":1454898,"display_name":"Xenson"},"score":0,"creation_date":1571350694,"post_id":42198050,"comment_id":103222379,"body_markdown":"You can run into the same problem if you have the ModelAttribute all setup then are silly enough to call model.clear() without adding the attribute manually. In my case I say the name of my ModelAttribute rather than &#39;command&#39; in the exception message.","body":"You can run into the same problem if you have the ModelAttribute all setup then are silly enough to call model.clear() without adding the attribute manually. In my case I say the name of my ModelAttribute rather than &#39;command&#39; in the exception message."}],"answers":[{"tags":[],"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"down_vote_count":0,"up_vote_count":48,"is_accepted":true,"score":48,"last_activity_date":1624550007,"creation_date":1486968199,"answer_id":42198051,"question_id":42198050,"body_markdown":"You&#39;re trying to use [Spring MVC&#39;s form tag][1].\r\n\r\n&gt; This tag renders an HTML `form` tag and exposes a binding path to\r\n&gt; inner tags for binding. It puts the command object in the `PageContext`\r\n&gt; so that the command object can be accessed by inner tags.  [..]\r\n&gt; \r\n&gt; Let’s assume we have a domain object called `User`. It is a JavaBean\r\n&gt; with properties such as `firstName` and `lastName`. We will use it as the\r\n&gt; **form backing object** of our form controller which returns `form.jsp`.\r\n\r\nIn other words, Spring MVC will extract a _command object_ and use its type as a blueprint for binding `path` expressions for `form`&#39;s inner tags, like [`input`][2] or [`checkbox`][3], to render an HTML `form` element. \r\n\r\nThis _command object_ is also called a model attribute and its name is specified in the `form` tag&#39;s `modelAttribute` or `commandName` attributes. You&#39;ve omitted it in your JSP\r\n\r\n    &lt;form:form&gt; \r\n\r\nYou could&#39;ve specified a name explicitly. Both of these are equivalent.\r\n\r\n    &lt;form:form modelAttribute=&quot;some-example-name&quot;&gt;\r\n    &lt;form:form commandName=&quot;some-example-name&quot;&gt;\r\n\r\n**NOTE**: Spring 5 has removed the `commandName` attribute, see the upgrade notes, [here][4].\r\n\r\nThe [default attribute name is `command`][5] (what you see in error message). A model attribute is an object, typically a POJO or collection of POJOs, that your application supplies to the Spring MVC stack and which the Spring MVC stack exposes to your view (ie. the M to the V in MVC). \r\n\r\nSpring MVC collects all model attributes in a [`ModelMap`][6] (they all have names) and, in the case of JSPs, transfers them to the [`HttpServletRequest`][7] attributes, where JSP tags and EL expressions have access to them.\r\n\r\nIn your example, your `@Controller` handler method which handles a `GET` to the path `/movies` adds a single model attribute\r\n\r\n    model.addAttribute(&quot;movies&quot;, movies); // not named &#39;command&#39;\r\n\r\nand then forwards to the `index.jsp`. This JSP then tries to render\r\n \r\n    &lt;form:form&gt;\r\n        ...\r\n        &lt;form:input path=&quot;name&quot; type=&quot;text&quot; id=&quot;name&quot; /&gt;\r\n        ...\r\n    &lt;/form:form&gt;\r\n\r\nWhile rendering this, [`FormTag`][8] (in reality, the [`InputTag`][9]) tries to find a model attribute named `command` (the default attribute name) so that it can produce an HTML `&lt;input&gt;` element with a `name` attribute constructed from the `path` expression and the corresponding property value, ie. the result of `Movie#getFilmName()`.\r\n\r\nSince it cannot find it, it throws the exception you see\r\n\r\n    java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;command&#39; available as request attribute\r\n\r\nThe JSP engine catches it and responds with a 500 status code. If you want to take advantage of a `Movie` POJO to simply construct your form correctly, you can add a model attribute explicitly with\r\n\r\n    model.addAttribute(&quot;movie&quot;, new Movie());\r\n\r\nor have Spring MVC create and add one for you (must have an accessible parameterless constructor)\r\n\r\n    @RequestMapping(path = &quot;/movies&quot;, method = RequestMethod.GET)\r\n    public String homePage(@ModelAttribute(&quot;command&quot;) Movie movie, Model model) {...}\r\n   \r\nAlternatively, include a `@ModelAttribute` annotated method in your `@Controller` class\r\n\r\n    @ModelAttribute(&quot;command&quot;)\r\n    public Movie defaultInstance() {\r\n        Movie movie = new Movie();\r\n        movie.setFilmName(&quot;Rocky II&quot;);\r\n        return movie;\r\n    }\r\n\r\nNote that Spring MVC will call this method and implicitly add the object returned to its model attributes for each request handled by the enclosing `@Controller`.\r\n\r\nYou may have guessed from this description that Spring&#39;s `form` tag is more suited for rendering an HTML `&lt;form&gt;` from an existing object, with actual values. If you want to simply create a blank `&lt;form&gt;`, it may be more appropriate to construct it yourself and not rely on any model attributes.\r\n\r\n\t&lt;form method=&quot;post&quot; action=&quot;${pageContext.request.contextPath}/movies&quot;&gt;\r\n\t\t&lt;input name=&quot;filmName&quot; type=&quot;text&quot; /&gt;\r\n\t\t&lt;input type=&quot;submit&quot; value=&quot;Upload&quot; /&gt;\r\n\t&lt;/form&gt;\r\n\r\nOn the receiving side, your `POST` handler method, will still be able to extract the `filmName` input value and use it to initialize a `Movie` object.\r\n\r\n## Common Errors\r\n\r\nAs we&#39;ve seen, `FormTag` looks for a model attribute named `command` by default or with the name specified in either `modelAttribute` or `commandName`. Make sure you&#39;re using the right name.\r\n\r\n`ModelMap` has a [`addAttribute(Object)`][10] method which adds\r\n\r\n&gt; the supplied attribute to this `Map` using a [generated][11] name. \r\n\r\nwhere the general convention is to\r\n\r\n&gt; return the uncapitalized short name of the [attribute&#39;s] `Class`, according to\r\n&gt; JavaBeans property naming rules: So, `com.myapp.Product` becomes\r\n&gt; `product`; `com.myapp.MyProduct` becomes `myProduct`; `com.myapp.UKProduct`\r\n&gt; becomes `UKProduct`\r\n\r\nIf you&#39;re using this (or a similar) method or if you&#39;re using one of the `@RequestMapping` [supported return types][12] that represents a model attribute, make sure the generated name is what you expect.\r\n\r\nAnother common error is to bypass your `@Controller` method altogether. A typical Spring MVC application follows this pattern:\r\n\r\n 1. Send HTTP GET request\r\n 2. `DispatcherServlet` selects `@RequestMapping` method to handle request\r\n 3. Handler method generates some model attributes and returns view name\r\n 4. `DispatcherServlet` adds model attributes to `HttpServletRequest` and forwards request to JSP corresponding to view name\r\n 5. JSP renders response\r\n\r\nIf, by some misconfiguration, you skip the `@RequestMapping` method altogether, the attributes will not have been added. This can happen \r\n\r\n- if your HTTP request URI accesses your JSP resources directly, eg. because they are accessible, ie. outside `WEB-INF`, or\r\n- if the `welcome-list` of your `web.xml` contains your JSP resource, the Servlet container will render it directly, bypassing the Spring MVC stack entirely\r\n\r\nOne way or another, you want your `@Controller` to be invoked so that the model attributes are added appropriately.\r\n\r\n## What does `BindingResult` have to do with this?\r\n\r\nA [`BindingResult`][13] is a container for initialization or validation of model attributes. The [Spring MVC documentation][14] states\r\n\r\n&gt; The `Errors` or `BindingResult` parameters have to follow the model object\r\n&gt; that is being bound immediately as the method signature might have\r\n&gt; more than one model object and Spring will create a separate\r\n&gt; `BindingResult` instance for each of them [...]\r\n\r\nIn other words, if you want to use `BindingResult`, it has to follow the corresponding model attribute parameter in a `@RequestMapping` method\r\n\r\n    @RequestMapping(path = &quot;/movies&quot;, method = RequestMethod.POST)\r\n    public String upload(@ModelAttribute(&quot;movie&quot;) Movie movie, BindingResult errors) {\r\n\r\n`BindingResult` objects are also considered model attributes. Spring MVC uses a simple naming convention to manage them, making it easy to find a corresponding regular model attribute. Since the `BindingResult` contains more data about the model attribute (eg. validation errors), the `FormTag` attempts to bind to it first. However, since they go hand in hand, it&#39;s unlikely one will exist without the other.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-view-jsp-formtaglib-formtag\r\n  [2]: https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-view-jsp-formtaglib-inputtag\r\n  [3]: https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-view-jsp-formtaglib-checkboxtag\r\n  [4]: https://github.com/spring-projects/spring-framework/wiki/Upgrading-to-Spring-Framework-5.x#removed-packages-classes-and-methods\r\n  [5]: http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/tags/form/FormTag.html#DEFAULT_COMMAND_NAME\r\n  [6]: http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/ui/ModelMap.html\r\n  [7]: http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html\r\n  [8]: http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/tags/form/FormTag.html\r\n  [9]: http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/tags/form/InputTag.html\r\n  [10]: http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/ui/ModelMap.html#addAttribute-java.lang.Object-\r\n  [11]: http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/Conventions.html#getVariableName-java.lang.Object-\r\n  [12]: http://docs.spring.io/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-return-types\r\n  [13]: http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/validation/BindingResult.html\r\n  [14]: http://docs.spring.io/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-arguments","title":"What causes &quot;java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;command&#39; available as request attribute&quot;?","body":"<p>You're trying to use <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-view-jsp-formtaglib-formtag\" rel=\"noreferrer\">Spring MVC's form tag</a>.</p>\n<blockquote>\n<p>This tag renders an HTML <code>form</code> tag and exposes a binding path to\ninner tags for binding. It puts the command object in the <code>PageContext</code>\nso that the command object can be accessed by inner tags.  [..]</p>\n<p>Let’s assume we have a domain object called <code>User</code>. It is a JavaBean\nwith properties such as <code>firstName</code> and <code>lastName</code>. We will use it as the\n<strong>form backing object</strong> of our form controller which returns <code>form.jsp</code>.</p>\n</blockquote>\n<p>In other words, Spring MVC will extract a <em>command object</em> and use its type as a blueprint for binding <code>path</code> expressions for <code>form</code>'s inner tags, like <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-view-jsp-formtaglib-inputtag\" rel=\"noreferrer\"><code>input</code></a> or <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-view-jsp-formtaglib-checkboxtag\" rel=\"noreferrer\"><code>checkbox</code></a>, to render an HTML <code>form</code> element.</p>\n<p>This <em>command object</em> is also called a model attribute and its name is specified in the <code>form</code> tag's <code>modelAttribute</code> or <code>commandName</code> attributes. You've omitted it in your JSP</p>\n<pre><code>&lt;form:form&gt; \n</code></pre>\n<p>You could've specified a name explicitly. Both of these are equivalent.</p>\n<pre><code>&lt;form:form modelAttribute=&quot;some-example-name&quot;&gt;\n&lt;form:form commandName=&quot;some-example-name&quot;&gt;\n</code></pre>\n<p><strong>NOTE</strong>: Spring 5 has removed the <code>commandName</code> attribute, see the upgrade notes, <a href=\"https://github.com/spring-projects/spring-framework/wiki/Upgrading-to-Spring-Framework-5.x#removed-packages-classes-and-methods\" rel=\"noreferrer\">here</a>.</p>\n<p>The <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/tags/form/FormTag.html#DEFAULT_COMMAND_NAME\" rel=\"noreferrer\">default attribute name is <code>command</code></a> (what you see in error message). A model attribute is an object, typically a POJO or collection of POJOs, that your application supplies to the Spring MVC stack and which the Spring MVC stack exposes to your view (ie. the M to the V in MVC).</p>\n<p>Spring MVC collects all model attributes in a <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/ui/ModelMap.html\" rel=\"noreferrer\"><code>ModelMap</code></a> (they all have names) and, in the case of JSPs, transfers them to the <a href=\"http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html\" rel=\"noreferrer\"><code>HttpServletRequest</code></a> attributes, where JSP tags and EL expressions have access to them.</p>\n<p>In your example, your <code>@Controller</code> handler method which handles a <code>GET</code> to the path <code>/movies</code> adds a single model attribute</p>\n<pre><code>model.addAttribute(&quot;movies&quot;, movies); // not named 'command'\n</code></pre>\n<p>and then forwards to the <code>index.jsp</code>. This JSP then tries to render</p>\n<pre><code>&lt;form:form&gt;\n    ...\n    &lt;form:input path=&quot;name&quot; type=&quot;text&quot; id=&quot;name&quot; /&gt;\n    ...\n&lt;/form:form&gt;\n</code></pre>\n<p>While rendering this, <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/tags/form/FormTag.html\" rel=\"noreferrer\"><code>FormTag</code></a> (in reality, the <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/tags/form/InputTag.html\" rel=\"noreferrer\"><code>InputTag</code></a>) tries to find a model attribute named <code>command</code> (the default attribute name) so that it can produce an HTML <code>&lt;input&gt;</code> element with a <code>name</code> attribute constructed from the <code>path</code> expression and the corresponding property value, ie. the result of <code>Movie#getFilmName()</code>.</p>\n<p>Since it cannot find it, it throws the exception you see</p>\n<pre><code>java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'command' available as request attribute\n</code></pre>\n<p>The JSP engine catches it and responds with a 500 status code. If you want to take advantage of a <code>Movie</code> POJO to simply construct your form correctly, you can add a model attribute explicitly with</p>\n<pre><code>model.addAttribute(&quot;movie&quot;, new Movie());\n</code></pre>\n<p>or have Spring MVC create and add one for you (must have an accessible parameterless constructor)</p>\n<pre><code>@RequestMapping(path = &quot;/movies&quot;, method = RequestMethod.GET)\npublic String homePage(@ModelAttribute(&quot;command&quot;) Movie movie, Model model) {...}\n</code></pre>\n<p>Alternatively, include a <code>@ModelAttribute</code> annotated method in your <code>@Controller</code> class</p>\n<pre><code>@ModelAttribute(&quot;command&quot;)\npublic Movie defaultInstance() {\n    Movie movie = new Movie();\n    movie.setFilmName(&quot;Rocky II&quot;);\n    return movie;\n}\n</code></pre>\n<p>Note that Spring MVC will call this method and implicitly add the object returned to its model attributes for each request handled by the enclosing <code>@Controller</code>.</p>\n<p>You may have guessed from this description that Spring's <code>form</code> tag is more suited for rendering an HTML <code>&lt;form&gt;</code> from an existing object, with actual values. If you want to simply create a blank <code>&lt;form&gt;</code>, it may be more appropriate to construct it yourself and not rely on any model attributes.</p>\n<pre><code>&lt;form method=&quot;post&quot; action=&quot;${pageContext.request.contextPath}/movies&quot;&gt;\n    &lt;input name=&quot;filmName&quot; type=&quot;text&quot; /&gt;\n    &lt;input type=&quot;submit&quot; value=&quot;Upload&quot; /&gt;\n&lt;/form&gt;\n</code></pre>\n<p>On the receiving side, your <code>POST</code> handler method, will still be able to extract the <code>filmName</code> input value and use it to initialize a <code>Movie</code> object.</p>\n<h2>Common Errors</h2>\n<p>As we've seen, <code>FormTag</code> looks for a model attribute named <code>command</code> by default or with the name specified in either <code>modelAttribute</code> or <code>commandName</code>. Make sure you're using the right name.</p>\n<p><code>ModelMap</code> has a <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/ui/ModelMap.html#addAttribute-java.lang.Object-\" rel=\"noreferrer\"><code>addAttribute(Object)</code></a> method which adds</p>\n<blockquote>\n<p>the supplied attribute to this <code>Map</code> using a <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/Conventions.html#getVariableName-java.lang.Object-\" rel=\"noreferrer\">generated</a> name.</p>\n</blockquote>\n<p>where the general convention is to</p>\n<blockquote>\n<p>return the uncapitalized short name of the [attribute's] <code>Class</code>, according to\nJavaBeans property naming rules: So, <code>com.myapp.Product</code> becomes\n<code>product</code>; <code>com.myapp.MyProduct</code> becomes <code>myProduct</code>; <code>com.myapp.UKProduct</code>\nbecomes <code>UKProduct</code></p>\n</blockquote>\n<p>If you're using this (or a similar) method or if you're using one of the <code>@RequestMapping</code> <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-return-types\" rel=\"noreferrer\">supported return types</a> that represents a model attribute, make sure the generated name is what you expect.</p>\n<p>Another common error is to bypass your <code>@Controller</code> method altogether. A typical Spring MVC application follows this pattern:</p>\n<ol>\n<li>Send HTTP GET request</li>\n<li><code>DispatcherServlet</code> selects <code>@RequestMapping</code> method to handle request</li>\n<li>Handler method generates some model attributes and returns view name</li>\n<li><code>DispatcherServlet</code> adds model attributes to <code>HttpServletRequest</code> and forwards request to JSP corresponding to view name</li>\n<li>JSP renders response</li>\n</ol>\n<p>If, by some misconfiguration, you skip the <code>@RequestMapping</code> method altogether, the attributes will not have been added. This can happen</p>\n<ul>\n<li>if your HTTP request URI accesses your JSP resources directly, eg. because they are accessible, ie. outside <code>WEB-INF</code>, or</li>\n<li>if the <code>welcome-list</code> of your <code>web.xml</code> contains your JSP resource, the Servlet container will render it directly, bypassing the Spring MVC stack entirely</li>\n</ul>\n<p>One way or another, you want your <code>@Controller</code> to be invoked so that the model attributes are added appropriately.</p>\n<h2>What does <code>BindingResult</code> have to do with this?</h2>\n<p>A <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/validation/BindingResult.html\" rel=\"noreferrer\"><code>BindingResult</code></a> is a container for initialization or validation of model attributes. The <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-arguments\" rel=\"noreferrer\">Spring MVC documentation</a> states</p>\n<blockquote>\n<p>The <code>Errors</code> or <code>BindingResult</code> parameters have to follow the model object\nthat is being bound immediately as the method signature might have\nmore than one model object and Spring will create a separate\n<code>BindingResult</code> instance for each of them [...]</p>\n</blockquote>\n<p>In other words, if you want to use <code>BindingResult</code>, it has to follow the corresponding model attribute parameter in a <code>@RequestMapping</code> method</p>\n<pre><code>@RequestMapping(path = &quot;/movies&quot;, method = RequestMethod.POST)\npublic String upload(@ModelAttribute(&quot;movie&quot;) Movie movie, BindingResult errors) {\n</code></pre>\n<p><code>BindingResult</code> objects are also considered model attributes. Spring MVC uses a simple naming convention to manage them, making it easy to find a corresponding regular model attribute. Since the <code>BindingResult</code> contains more data about the model attribute (eg. validation errors), the <code>FormTag</code> attempts to bind to it first. However, since they go hand in hand, it's unlikely one will exist without the other.</p>\n"},{"tags":[],"owner":{"account_id":410311,"reputation":41,"user_id":782084,"display_name":"Pasha Utt"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1514900536,"creation_date":1514900536,"answer_id":48062093,"question_id":42198050,"body_markdown":"To make things simple with the form tag just add a &quot;commandName&quot; which is a horrible name for what it is actually looking for...it wants the object you named in the MdelAttribute annotation. So in this case commandName=&quot;movie&quot;.\r\n\r\nThat&#39;ll save you reading long winded explanations friend. ","title":"What causes &quot;java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;command&#39; available as request attribute&quot;?","body":"<p>To make things simple with the form tag just add a \"commandName\" which is a horrible name for what it is actually looking for...it wants the object you named in the MdelAttribute annotation. So in this case commandName=\"movie\".</p>\n\n<p>That'll save you reading long winded explanations friend. </p>\n"},{"tags":[],"owner":{"account_id":3737292,"reputation":1907,"user_id":3107952,"display_name":"Pedro Madrid"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536083021,"creation_date":1536083021,"answer_id":52171528,"question_id":42198050,"body_markdown":"In my case, it worked by adding `modelAttribute=&quot;movie&quot;` to the form tag, and prepending the model name to the attribute, something like `&lt;form:input path=&quot;filmName&quot; type=&quot;text&quot; id=&quot;movie.name&quot; /&gt;`","title":"What causes &quot;java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;command&#39; available as request attribute&quot;?","body":"<p>In my case, it worked by adding <code>modelAttribute=\"movie\"</code> to the form tag, and prepending the model name to the attribute, something like <code>&lt;form:input path=\"filmName\" type=\"text\" id=\"movie.name\" /&gt;</code></p>\n"},{"tags":[],"owner":{"account_id":14217417,"reputation":1,"user_id":10270901,"display_name":"shaqer74"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1543604023,"creation_date":1543601188,"answer_id":53562692,"question_id":42198050,"body_markdown":"Updating from Spring version 3 to Spring version 5, produces the same error. All answers were satisfied already in my code. Adding the annotation `@ControllerAdvice` solved the problem for me.","title":"What causes &quot;java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;command&#39; available as request attribute&quot;?","body":"<p>Updating from Spring version 3 to Spring version 5, produces the same error. All answers were satisfied already in my code. Adding the annotation <code>@ControllerAdvice</code> solved the problem for me.</p>\n"},{"tags":[],"owner":{"account_id":12429820,"reputation":21,"user_id":9052869,"display_name":"Dotard"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1553867586,"creation_date":1553824881,"answer_id":55409498,"question_id":42198050,"body_markdown":"I had this error on a screen with multiple forms that do a search. Each form posts to its own controller method with results shown on same screen.\r\n\r\nProblem: I missed adding the other two forms as model attributes in each controller method causing that error when screen renders with results.\r\n\r\n    Form1 -&gt; bound to Bean1 (bean1) -&gt; Posting to /action1\r\n    Form2 -&gt; bound to Bean2 (bean2) -&gt; Posting to /action2\r\n    Form3 -&gt; bound to Bean3 (bean2) -&gt; Posting to /action3\r\n\r\n```\r\n@PostMapping\r\npublic String blah(@ModelAttribute(&quot;bean1&quot;) Bean1 bean, Model model){\r\n// do something with bean object\r\n\r\n// do not miss adding other 2 beans as model attributes like below. \r\nmodel.addAttribute(&quot;bean2&quot;, new Bean2()); \r\nmodel.addAttribute(&quot;bean3&quot;, new Bean3());\r\nreturn &quot;screen&quot;;\r\n}\r\n\r\n@PostMapping\r\npublic String blahBlah(@ModelAttribute(&quot;bean2&quot;) Bean2 bean, Model model){\r\n// do something with bean object\r\n// do not miss adding other 2 beans as model attributes like below. \r\nmodel.addAttribute(&quot;bean1&quot;, new Bean1()); \r\nmodel.addAttribute(&quot;bean3&quot;, new Bean3());\r\nreturn &quot;screen&quot;;\r\n}\r\n\r\n@PostMapping\r\npublic String blahBlahBlah(@ModelAttribute(&quot;bean3&quot;) Bean3 bean, Model model){\r\n// do something with bean object\r\n// do not miss adding other 2 beans as model attributes like below. \r\nmodel.addAttribute(&quot;bean1&quot;, new Bean1()); \r\nmodel.addAttribute(&quot;bean2&quot;, new Bean2());\r\nreturn &quot;screen&quot;;\r\n}\r\n```","title":"What causes &quot;java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;command&#39; available as request attribute&quot;?","body":"<p>I had this error on a screen with multiple forms that do a search. Each form posts to its own controller method with results shown on same screen.</p>\n\n<p>Problem: I missed adding the other two forms as model attributes in each controller method causing that error when screen renders with results.</p>\n\n<pre><code>Form1 -&gt; bound to Bean1 (bean1) -&gt; Posting to /action1\nForm2 -&gt; bound to Bean2 (bean2) -&gt; Posting to /action2\nForm3 -&gt; bound to Bean3 (bean2) -&gt; Posting to /action3\n</code></pre>\n\n<pre><code>@PostMapping\npublic String blah(@ModelAttribute(\"bean1\") Bean1 bean, Model model){\n// do something with bean object\n\n// do not miss adding other 2 beans as model attributes like below. \nmodel.addAttribute(\"bean2\", new Bean2()); \nmodel.addAttribute(\"bean3\", new Bean3());\nreturn \"screen\";\n}\n\n@PostMapping\npublic String blahBlah(@ModelAttribute(\"bean2\") Bean2 bean, Model model){\n// do something with bean object\n// do not miss adding other 2 beans as model attributes like below. \nmodel.addAttribute(\"bean1\", new Bean1()); \nmodel.addAttribute(\"bean3\", new Bean3());\nreturn \"screen\";\n}\n\n@PostMapping\npublic String blahBlahBlah(@ModelAttribute(\"bean3\") Bean3 bean, Model model){\n// do something with bean object\n// do not miss adding other 2 beans as model attributes like below. \nmodel.addAttribute(\"bean1\", new Bean1()); \nmodel.addAttribute(\"bean2\", new Bean2());\nreturn \"screen\";\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7480597,"reputation":304,"user_id":5685534,"display_name":"Kanaris007"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1624520341,"creation_date":1624519952,"answer_id":68111380,"question_id":42198050,"body_markdown":"I tried to migrate my application to Spring5 and noticed the same issue. It was caused by the moment that the &#39;commandName&#39; attribute is not supported anymore and I had to use &#39;modelAttribute&#39; instead.","title":"What causes &quot;java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;command&#39; available as request attribute&quot;?","body":"<p>I tried to migrate my application to Spring5 and noticed the same issue. It was caused by the moment that the 'commandName' attribute is not supported anymore and I had to use 'modelAttribute' instead.</p>\n"},{"tags":[],"owner":{"account_id":14393876,"reputation":167,"user_id":10397782,"display_name":"Aman_Bhala"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1676703288,"creation_date":1676703288,"answer_id":75491705,"question_id":42198050,"body_markdown":"If your Model object is correctly being passed to the GET API call but still have this error, you may look at the html or jsp page also to check whether correct variables names are provided and tags are used correctly. In my case, I forgot to include the objects under the closing ```&lt;form&gt;``` tag.","title":"What causes &quot;java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;command&#39; available as request attribute&quot;?","body":"<p>If your Model object is correctly being passed to the GET API call but still have this error, you may look at the html or jsp page also to check whether correct variables names are provided and tags are used correctly. In my case, I forgot to include the objects under the closing <code>&lt;form&gt;</code> tag.</p>\n"}],"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23628,"favorite_count":0,"down_vote_count":6,"up_vote_count":43,"accepted_answer_id":42198051,"answer_count":7,"score":37,"last_activity_date":1676703288,"creation_date":1486968199,"question_id":42198050,"body_markdown":"&lt;sub&gt;This is meant to be an extensive canonical question &amp; answer post for these types of questions.&lt;/sub&gt; \r\n\r\n\r\n---\r\n\r\nI&#39;m trying to write a Spring MVC web application where users can add movie names to an in-memory collection. It&#39;s configured like so\r\n\r\n    public class Application extends AbstractAnnotationConfigDispatcherServletInitializer {\r\n        protected Class&lt;?&gt;[] getRootConfigClasses() {\r\n            return new Class&lt;?&gt;[] {};\r\n        }\r\n        protected Class&lt;?&gt;[] getServletConfigClasses() {\r\n            return new Class&lt;?&gt;[] { SpringServletConfig.class };\r\n        }\r\n        protected String[] getServletMappings() {\r\n            return new String[] { &quot;/&quot; };\r\n        }\r\n    }\r\n\r\nand\r\n\r\n    @Configuration\r\n    @ComponentScan(&quot;com.example&quot;)\r\n    public class SpringServletConfig extends WebMvcConfigurationSupport {\r\n        @Bean\r\n        public InternalResourceViewResolver resolver() {\r\n            InternalResourceViewResolver vr = new InternalResourceViewResolver();\r\n            vr.setPrefix(&quot;WEB-INF/jsps/&quot;);\r\n            vr.setSuffix(&quot;.jsp&quot;);\r\n            return vr;\r\n        }\r\n    }\r\n\r\nThere&#39;s a single `@Controller` class in the `com.example` package\r\n\r\n    @Controller\r\n    public class MovieController {\r\n        private final CopyOnWriteArrayList&lt;Movie&gt; movies = new CopyOnWriteArrayList&lt;&gt;();\r\n        @RequestMapping(path = &quot;/movies&quot;, method = RequestMethod.GET)\r\n        public String homePage(Model model) {\r\n            model.addAttribute(&quot;movies&quot;, movies);\r\n            return &quot;index&quot;;\r\n        }\r\n        @RequestMapping(path = &quot;/movies&quot;, method = RequestMethod.POST)\r\n        public String upload(@ModelAttribute(&quot;movie&quot;) Movie movie, BindingResult errors) {\r\n            if (!errors.hasErrors()) {\r\n                movies.add(movie);\r\n            }\r\n            return &quot;redirect:/movies&quot;;\r\n        }\r\n        public static class Movie {\r\n            private String filmName;\r\n            public String getFilmName() {\r\n                return filmName;\r\n            }\r\n            public void setFilmName(String filmName) {\r\n                this.filmName = filmName;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n`WEB-INF/jsps/index.jsp` contains\r\n\r\n    &lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot;%&gt;\r\n    &lt;%@ taglib prefix=&quot;form&quot; uri=&quot;http://www.springframework.org/tags/form&quot;%&gt;\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;\r\n    &lt;title&gt;Movies&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    \tCurrent Movies:\r\n    \t&lt;c:forEach items=&quot;${movies}&quot; var=&quot;movieItem&quot;&gt;\r\n    \t\t&lt;ul&gt;\r\n    \t\t\t&lt;li&gt;${movieItem.filmName}&lt;/li&gt;\r\n    \t\t&lt;/ul&gt;\r\n    \t&lt;/c:forEach&gt;\r\n    \t&lt;form:form&gt;\r\n    \t\t&lt;div&gt;Movie name:&lt;/div&gt;\r\n    \t\t&lt;form:input path=&quot;filmName&quot; type=&quot;text&quot; id=&quot;name&quot; /&gt;\r\n    \t\t&lt;input type=&quot;submit&quot; value=&quot;Upload&quot;&gt;\r\n    \t&lt;/form:form&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nThe application is configured with context path `/Example`. When I send a GET request to\r\n\r\n    http://localhost:8080/Example/movies\r\n\r\nthe request fails, Spring MVC responds with a 500 status code, and reports the following exception and stack trace\r\n\r\n    java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;command&#39; available as request attribute\r\n    \torg.springframework.web.servlet.support.BindStatus.&lt;init&gt;(BindStatus.java:144)\r\n    \torg.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:168)\r\n    \torg.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:188)\r\n    \torg.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getName(AbstractDataBoundFormElementTag.java:154)\r\n    \torg.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.writeDefaultAttributes(AbstractDataBoundFormElementTag.java:117)\r\n    \torg.springframework.web.servlet.tags.form.AbstractHtmlElementTag.writeDefaultAttributes(AbstractHtmlElementTag.java:422)\r\n    \torg.springframework.web.servlet.tags.form.InputTag.writeTagContent(InputTag.java:142)\r\n    \torg.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:84)\r\n    \torg.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:80)\r\n    \torg.apache.jsp.WEB_002dINF.jsps.index_jsp._jspx_meth_form_005finput_005f0(index_jsp.java:267)\r\n    \torg.apache.jsp.WEB_002dINF.jsps.index_jsp._jspx_meth_form_005fform_005f0(index_jsp.java:227)\r\n    \torg.apache.jsp.WEB_002dINF.jsps.index_jsp._jspService(index_jsp.java:142)\r\n    \torg.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n    \torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:438)\r\n    \torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:396)\r\n    \torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:340)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n    \torg.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n    \torg.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:168)\r\n    \torg.springframework.web.servlet.view.AbstractView.render(AbstractView.java:303)\r\n    \torg.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1257)\r\n    \torg.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1037)\r\n    \torg.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:980)\r\n    \torg.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:897)\r\n    \torg.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)\r\n    \torg.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:861)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:622)\r\n    \torg.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n    \torg.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n\r\nI expected the JSP to generate an HTML `&lt;form&gt;` with a single text input, for a `Movie` name, and a submit button, that I can use to send a POST request with a new `Movie`. Why does the JSP servlet instead fail to render Spring&#39;s `&lt;form:form&gt;` tag?","title":"What causes &quot;java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;command&#39; available as request attribute&quot;?","body":"<p><sub>This is meant to be an extensive canonical question &amp; answer post for these types of questions.</sub></p>\n<hr />\n<p>I'm trying to write a Spring MVC web application where users can add movie names to an in-memory collection. It's configured like so</p>\n<pre><code>public class Application extends AbstractAnnotationConfigDispatcherServletInitializer {\n    protected Class&lt;?&gt;[] getRootConfigClasses() {\n        return new Class&lt;?&gt;[] {};\n    }\n    protected Class&lt;?&gt;[] getServletConfigClasses() {\n        return new Class&lt;?&gt;[] { SpringServletConfig.class };\n    }\n    protected String[] getServletMappings() {\n        return new String[] { &quot;/&quot; };\n    }\n}\n</code></pre>\n<p>and</p>\n<pre><code>@Configuration\n@ComponentScan(&quot;com.example&quot;)\npublic class SpringServletConfig extends WebMvcConfigurationSupport {\n    @Bean\n    public InternalResourceViewResolver resolver() {\n        InternalResourceViewResolver vr = new InternalResourceViewResolver();\n        vr.setPrefix(&quot;WEB-INF/jsps/&quot;);\n        vr.setSuffix(&quot;.jsp&quot;);\n        return vr;\n    }\n}\n</code></pre>\n<p>There's a single <code>@Controller</code> class in the <code>com.example</code> package</p>\n<pre><code>@Controller\npublic class MovieController {\n    private final CopyOnWriteArrayList&lt;Movie&gt; movies = new CopyOnWriteArrayList&lt;&gt;();\n    @RequestMapping(path = &quot;/movies&quot;, method = RequestMethod.GET)\n    public String homePage(Model model) {\n        model.addAttribute(&quot;movies&quot;, movies);\n        return &quot;index&quot;;\n    }\n    @RequestMapping(path = &quot;/movies&quot;, method = RequestMethod.POST)\n    public String upload(@ModelAttribute(&quot;movie&quot;) Movie movie, BindingResult errors) {\n        if (!errors.hasErrors()) {\n            movies.add(movie);\n        }\n        return &quot;redirect:/movies&quot;;\n    }\n    public static class Movie {\n        private String filmName;\n        public String getFilmName() {\n            return filmName;\n        }\n        public void setFilmName(String filmName) {\n            this.filmName = filmName;\n        }\n    }\n}\n</code></pre>\n<p><code>WEB-INF/jsps/index.jsp</code> contains</p>\n<pre><code>&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot;%&gt;\n&lt;%@ taglib prefix=&quot;form&quot; uri=&quot;http://www.springframework.org/tags/form&quot;%&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;\n&lt;title&gt;Movies&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    Current Movies:\n    &lt;c:forEach items=&quot;${movies}&quot; var=&quot;movieItem&quot;&gt;\n        &lt;ul&gt;\n            &lt;li&gt;${movieItem.filmName}&lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/c:forEach&gt;\n    &lt;form:form&gt;\n        &lt;div&gt;Movie name:&lt;/div&gt;\n        &lt;form:input path=&quot;filmName&quot; type=&quot;text&quot; id=&quot;name&quot; /&gt;\n        &lt;input type=&quot;submit&quot; value=&quot;Upload&quot;&gt;\n    &lt;/form:form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>The application is configured with context path <code>/Example</code>. When I send a GET request to</p>\n<pre><code>http://localhost:8080/Example/movies\n</code></pre>\n<p>the request fails, Spring MVC responds with a 500 status code, and reports the following exception and stack trace</p>\n<pre><code>java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'command' available as request attribute\n    org.springframework.web.servlet.support.BindStatus.&lt;init&gt;(BindStatus.java:144)\n    org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:168)\n    org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:188)\n    org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getName(AbstractDataBoundFormElementTag.java:154)\n    org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.writeDefaultAttributes(AbstractDataBoundFormElementTag.java:117)\n    org.springframework.web.servlet.tags.form.AbstractHtmlElementTag.writeDefaultAttributes(AbstractHtmlElementTag.java:422)\n    org.springframework.web.servlet.tags.form.InputTag.writeTagContent(InputTag.java:142)\n    org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:84)\n    org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:80)\n    org.apache.jsp.WEB_002dINF.jsps.index_jsp._jspx_meth_form_005finput_005f0(index_jsp.java:267)\n    org.apache.jsp.WEB_002dINF.jsps.index_jsp._jspx_meth_form_005fform_005f0(index_jsp.java:227)\n    org.apache.jsp.WEB_002dINF.jsps.index_jsp._jspService(index_jsp.java:142)\n    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:438)\n    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:396)\n    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:340)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n    org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n    org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:168)\n    org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:303)\n    org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1257)\n    org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1037)\n    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:980)\n    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:897)\n    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)\n    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:861)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:622)\n    org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n    org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n</code></pre>\n<p>I expected the JSP to generate an HTML <code>&lt;form&gt;</code> with a single text input, for a <code>Movie</code> name, and a submit button, that I can use to send a POST request with a new <code>Movie</code>. Why does the JSP servlet instead fail to render Spring's <code>&lt;form:form&gt;</code> tag?</p>\n"},{"tags":["java","spring","database","oracle","datapump"],"comments":[{"owner":{"account_id":27814361,"reputation":1,"user_id":21236107,"display_name":"Ram"},"score":0,"creation_date":1676750894,"post_id":75488389,"comment_id":133201751,"body_markdown":"Data from the Mutiples tables are required and size of these tables is very big","body":"Data from the Mutiples tables are required and size of these tables is very big"}],"answers":[{"tags":[],"owner":{"account_id":26978029,"reputation":6997,"user_id":20542862,"display_name":"Paul W"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676661778,"creation_date":1676661778,"answer_id":75488481,"question_id":75488389,"body_markdown":"There are numerous ways to do this, but the most straightforward is to use **materialized views** with queries that involve dblinks, which you can schedule refreshes for by using **dbms_scheduler**. There are a lot of docs online to help you. Here&#39;s one:\r\n\r\n[Working with Materialized Views][1]\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/database/oracle/oracle-database/19/dwhsg/part-optimizing-dw.html#GUID-9A97B601-4BD2-40B6-81F5-44F679F82C6F","title":"Data refresh from one oracle db to another oracle db","body":"<p>There are numerous ways to do this, but the most straightforward is to use <strong>materialized views</strong> with queries that involve dblinks, which you can schedule refreshes for by using <strong>dbms_scheduler</strong>. There are a lot of docs online to help you. Here's one:</p>\n<p><a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/19/dwhsg/part-optimizing-dw.html#GUID-9A97B601-4BD2-40B6-81F5-44F679F82C6F\" rel=\"nofollow noreferrer\">Working with Materialized Views</a></p>\n"},{"tags":[],"owner":{"account_id":12498833,"reputation":135387,"user_id":9097906,"display_name":"Littlefoot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676661800,"creation_date":1676661800,"answer_id":75488484,"question_id":75488389,"body_markdown":"I don&#39;t know Java so I can&#39;t comment it.\r\n\r\nAs far as database is concerned, one option is to create database link between these two databases and a **materialized view** in one of them which *fetches* data over the database link from another database.\r\n\r\nYou can schedule refresh; there are various options. Read documentation to pick the right one for your situation. Have a *quick* look at Tim Hall&#39;s &lt;a href=&quot;https://oracle-base.com/articles/misc/materialized-views&quot;&gt;materialized views&lt;/a&gt; article; if you find it interesting, search Oracle documentation (related to version you use) for more info.\r\n","title":"Data refresh from one oracle db to another oracle db","body":"<p>I don't know Java so I can't comment it.</p>\n<p>As far as database is concerned, one option is to create database link between these two databases and a <strong>materialized view</strong> in one of them which <em>fetches</em> data over the database link from another database.</p>\n<p>You can schedule refresh; there are various options. Read documentation to pick the right one for your situation. Have a <em>quick</em> look at Tim Hall's <a href=\"https://oracle-base.com/articles/misc/materialized-views\" rel=\"nofollow noreferrer\">materialized views</a> article; if you find it interesting, search Oracle documentation (related to version you use) for more info.</p>\n"},{"tags":[],"owner":{"account_id":27816988,"reputation":1,"user_id":21238173,"display_name":"Lokesh Gurram"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676700310,"creation_date":1676700310,"answer_id":75491519,"question_id":75488389,"body_markdown":"create a database link between source and target databases and follow any of these native tool options.\r\n1. Create a materialized view using query that points to source database.\r\n2. Write a procedure in target site using select queries to read data from source site and update/insert the target tables accordingly.Later schedule those procedures using scheduler jobs.\r\n3. Use the Golden gate provided if table you chosen should have primary key or unique key.\r\n4. you can write your own Java or python code which works like PUB and SUB mode to publish the data into target site.\r\n","title":"Data refresh from one oracle db to another oracle db","body":"<p>create a database link between source and target databases and follow any of these native tool options.</p>\n<ol>\n<li>Create a materialized view using query that points to source database.</li>\n<li>Write a procedure in target site using select queries to read data from source site and update/insert the target tables accordingly.Later schedule those procedures using scheduler jobs.</li>\n<li>Use the Golden gate provided if table you chosen should have primary key or unique key.</li>\n<li>you can write your own Java or python code which works like PUB and SUB mode to publish the data into target site.</li>\n</ol>\n"}],"owner":{"account_id":27814361,"reputation":1,"user_id":21236107,"display_name":"Ram"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1676700310,"creation_date":1676661100,"question_id":75488389,"body_markdown":"I want to get some filtered data from one oracle db and refresh tables in other oracle db and this refresh needs to be done frequently. So what are best possible ways to do it? \r\n\r\nPlease suggest the optimal way to do it. \r\nUsing db links or using oracle schedule jobs or write java code.","title":"Data refresh from one oracle db to another oracle db","body":"<p>I want to get some filtered data from one oracle db and refresh tables in other oracle db and this refresh needs to be done frequently. So what are best possible ways to do it?</p>\n<p>Please suggest the optimal way to do it.\nUsing db links or using oracle schedule jobs or write java code.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":14429279,"reputation":130,"user_id":10423076,"display_name":"Govil Kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676700271,"creation_date":1676700271,"answer_id":75491514,"question_id":75491144,"body_markdown":"I would suggest to use QueryDSL for filter based search as it&#39;s much more readable than Spring data Specifications or Criteria API.\r\n1) Add dependencies\r\n\r\n    &lt;querydsl.version&gt;5.0.0&lt;/querydsl.version&gt;\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.querydsl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;querydsl-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${querydsl.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.querydsl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;querydsl-jpa&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${querydsl.version}&lt;/version&gt;\r\n\t\t\t&lt;classifier&gt;jakarta&lt;/classifier&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.querydsl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;querydsl-sql&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${querydsl.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.querydsl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;querydsl-sql-spring&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${querydsl.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.querydsl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;querydsl-apt&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${querydsl.version}&lt;/version&gt;\r\n\t\t\t&lt;classifier&gt;jakarta&lt;/classifier&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\n\r\nRun mvn clean install - it will generate querydsl model classes. \r\n\r\n2) Create a search param pojo\r\nBelow example is using **record**\r\n\r\n```java\r\n@Builder(toBuilder = true)\r\npublic record UserProfileFilterParam(String city, String country, String state, Integer pincode) {}\r\n```\r\n\r\n3) Create a search repository interface\r\n\r\n```java\r\npublic interface UserProfileFilterRepository {\r\n\r\n    List&lt;UserProfile&gt; fetchAll(UserProfileFilterParam filter);\r\n\r\n    //Add methods if needed\r\n}\r\n```\r\n\r\n4) Create an implementation of repo in step 3\r\n\r\n```java\r\n@Repository\r\npublic class UserProfileFilterRepositoryImpl extends QuerydslRepositorySupport implements UserProfileFilterRepository {\r\n\r\n    public UserProfileFilterRepositoryImpl() {\r\n        super(UserProfile.class);\r\n    }\r\n\r\n    @Override\r\n    public List&lt;UserProfile&gt; fetchAll(UserProfileFilterParam filter) {\r\n        //Classes started with &#39;Q&#39; are autogenerated by QueryDSL when executed maven build command.\r\n        QUserProfile userProfile = QUserProfile.userProfile; //root\r\n        QAddress address = QAddress.address; //foreign keys\r\n        JPQLQuery&lt;UserProfile&gt; query = from(userProfile)\r\n                .join(address).on(userProfile.address.id.eq(address.id));\r\n\r\n        if(filter.city() != null) {\r\n            query = query.where(address.city.likeIgnoreCase(filter.city()));\r\n        }\r\n\r\n        if(filter.country() != null) {\r\n            query = query.where(address.country.likeIgnoreCase(filter.country()));\r\n        }\r\n\r\n        if(filter.state() != null) {\r\n            query = query.where(address.state.likeIgnoreCase(filter.state()));\r\n        }\r\n\r\n        if(filter.pincode() != null) {\r\n            query = query.where(address.pinCode.likeIgnoreCase(Integer.toString(filter.pincode())));\r\n        }\r\n        return query.orderBy(userProfile.id.asc()).fetch();\r\n    }\r\n}\r\n```\r\n\r\nMore details: https://spring.io/blog/2011/04/26/advanced-spring-data-jpa-specifications-and-querydsl\r\nhttps://www.baeldung.com/rest-api-search-language-spring-data-querydsl","title":"searching related entity columns for matching keyword with Spring JPA","body":"<p>I would suggest to use QueryDSL for filter based search as it's much more readable than Spring data Specifications or Criteria API.</p>\n<ol>\n<li><p>Add dependencies</p>\n<p>&lt;querydsl.version&gt;5.0.0&lt;/querydsl.version&gt;</p>\n</li>\n</ol>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n            &lt;groupId&gt;com.querydsl&lt;/groupId&gt;\n            &lt;artifactId&gt;querydsl-core&lt;/artifactId&gt;\n            &lt;version&gt;${querydsl.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.querydsl&lt;/groupId&gt;\n            &lt;artifactId&gt;querydsl-jpa&lt;/artifactId&gt;\n            &lt;version&gt;${querydsl.version}&lt;/version&gt;\n            &lt;classifier&gt;jakarta&lt;/classifier&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.querydsl&lt;/groupId&gt;\n            &lt;artifactId&gt;querydsl-sql&lt;/artifactId&gt;\n            &lt;version&gt;${querydsl.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.querydsl&lt;/groupId&gt;\n            &lt;artifactId&gt;querydsl-sql-spring&lt;/artifactId&gt;\n            &lt;version&gt;${querydsl.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.querydsl&lt;/groupId&gt;\n            &lt;artifactId&gt;querydsl-apt&lt;/artifactId&gt;\n            &lt;version&gt;${querydsl.version}&lt;/version&gt;\n            &lt;classifier&gt;jakarta&lt;/classifier&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Run mvn clean install - it will generate querydsl model classes.</p>\n<ol start=\"2\">\n<li>Create a search param pojo\nBelow example is using <strong>record</strong></li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@Builder(toBuilder = true)\npublic record UserProfileFilterParam(String city, String country, String state, Integer pincode) {}\n</code></pre>\n<ol start=\"3\">\n<li>Create a search repository interface</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>public interface UserProfileFilterRepository {\n\n    List&lt;UserProfile&gt; fetchAll(UserProfileFilterParam filter);\n\n    //Add methods if needed\n}\n</code></pre>\n<ol start=\"4\">\n<li>Create an implementation of repo in step 3</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic class UserProfileFilterRepositoryImpl extends QuerydslRepositorySupport implements UserProfileFilterRepository {\n\n    public UserProfileFilterRepositoryImpl() {\n        super(UserProfile.class);\n    }\n\n    @Override\n    public List&lt;UserProfile&gt; fetchAll(UserProfileFilterParam filter) {\n        //Classes started with 'Q' are autogenerated by QueryDSL when executed maven build command.\n        QUserProfile userProfile = QUserProfile.userProfile; //root\n        QAddress address = QAddress.address; //foreign keys\n        JPQLQuery&lt;UserProfile&gt; query = from(userProfile)\n                .join(address).on(userProfile.address.id.eq(address.id));\n\n        if(filter.city() != null) {\n            query = query.where(address.city.likeIgnoreCase(filter.city()));\n        }\n\n        if(filter.country() != null) {\n            query = query.where(address.country.likeIgnoreCase(filter.country()));\n        }\n\n        if(filter.state() != null) {\n            query = query.where(address.state.likeIgnoreCase(filter.state()));\n        }\n\n        if(filter.pincode() != null) {\n            query = query.where(address.pinCode.likeIgnoreCase(Integer.toString(filter.pincode())));\n        }\n        return query.orderBy(userProfile.id.asc()).fetch();\n    }\n}\n</code></pre>\n<p>More details: <a href=\"https://spring.io/blog/2011/04/26/advanced-spring-data-jpa-specifications-and-querydsl\" rel=\"nofollow noreferrer\">https://spring.io/blog/2011/04/26/advanced-spring-data-jpa-specifications-and-querydsl</a>\n<a href=\"https://www.baeldung.com/rest-api-search-language-spring-data-querydsl\" rel=\"nofollow noreferrer\">https://www.baeldung.com/rest-api-search-language-spring-data-querydsl</a></p>\n"}],"owner":{"account_id":362188,"reputation":29,"user_id":705249,"display_name":"ebilly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75491514,"answer_count":1,"score":0,"last_activity_date":1676700271,"creation_date":1676693672,"question_id":75491144,"body_markdown":"I&#39;ve used the following previously asked [question](https://stackoverflow.com/questions/58691666/search-all-columns-for-matching-keyword-with-spring-jpa) to develop a nice enough solution to search across most of my columns by keyword.  My issue is I have columns that are foreign keys to other entities and I&#39;d like to include them in the search.  \r\n\r\nNeither of the following work:\r\n\r\n`SearchSpecification byBedroom = \r\n              new SearchSpecification(new SearchCriteria(&quot;masterBedroom&quot;, &quot;:&quot;, &quot;searchVal&quot;));\r\n`\r\nExecutes but returns only non-foreign entities OR \r\n\r\n`SearchSpecification byBedroom = \r\n              new SearchSpecification(new SearchCriteria(&quot;masterBedroom.roomName&quot;, &quot;:&quot;, &quot;searchVal&quot;));\r\n`\r\nthrows an exception - org.springframework.dao.InvalidDataAccessApiUsageException: Unable to locate Attribute  with the the given name [masterBedroom.roomName] on this ManagedType.\r\n\r\nWhat am I missing here?","title":"searching related entity columns for matching keyword with Spring JPA","body":"<p>I've used the following previously asked <a href=\"https://stackoverflow.com/questions/58691666/search-all-columns-for-matching-keyword-with-spring-jpa\">question</a> to develop a nice enough solution to search across most of my columns by keyword.  My issue is I have columns that are foreign keys to other entities and I'd like to include them in the search.</p>\n<p>Neither of the following work:</p>\n<p><code>SearchSpecification byBedroom =  new SearchSpecification(new SearchCriteria(&quot;masterBedroom&quot;, &quot;:&quot;, &quot;searchVal&quot;)); </code>\nExecutes but returns only non-foreign entities OR</p>\n<p><code>SearchSpecification byBedroom =  new SearchSpecification(new SearchCriteria(&quot;masterBedroom.roomName&quot;, &quot;:&quot;, &quot;searchVal&quot;)); </code>\nthrows an exception - org.springframework.dao.InvalidDataAccessApiUsageException: Unable to locate Attribute  with the the given name [masterBedroom.roomName] on this ManagedType.</p>\n<p>What am I missing here?</p>\n"},{"tags":["java","jar","minecraft-forge"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1676641132,"post_id":75484943,"comment_id":133183389,"body_markdown":"Looks like you&#39;ve got a space in the path of the command. That&#39;s not going to fly without quoting it `javaw -jar &quot;D:\\foo\\bar\\path with space\\x.jar&quot;`","body":"Looks like you&#39;ve got a space in the path of the command. That&#39;s not going to fly without quoting it <code>javaw -jar &quot;D:\\foo\\bar\\path with space\\x.jar&quot;</code>"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1676641671,"post_id":75484943,"comment_id":133183574,"body_markdown":"What happens when you run that command without the &quot;start&quot; at the beginning?","body":"What happens when you run that command without the &quot;start&quot; at the beginning?"},{"owner":{"account_id":27811947,"reputation":1,"user_id":21234176,"display_name":"somerandomperson "},"score":0,"creation_date":1676646208,"post_id":75484943,"comment_id":133184862,"body_markdown":"@g00se I quoted the path, but it still doesn’t work and doesn’t run the jar.","body":"@g00se I quoted the path, but it still doesn’t work and doesn’t run the jar."},{"owner":{"account_id":27811947,"reputation":1,"user_id":21234176,"display_name":"somerandomperson "},"score":0,"creation_date":1676646229,"post_id":75484943,"comment_id":133184872,"body_markdown":"@f1sh it still doesn’t load the jar","body":"@f1sh it still doesn’t load the jar"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1676646333,"post_id":75484943,"comment_id":133184903,"body_markdown":"Start by executing the command on its own, *manually* at the command line. Let us know what happens","body":"Start by executing the command on its own, <i>manually</i> at the command line. Let us know what happens"},{"owner":{"account_id":27811947,"reputation":1,"user_id":21234176,"display_name":"somerandomperson "},"score":0,"creation_date":1676647262,"post_id":75484943,"comment_id":133185198,"body_markdown":"Still the same issue. I press enter and it moves to the next command line without opening the ui.","body":"Still the same issue. I press enter and it moves to the next command line without opening the ui."},{"owner":{"account_id":27811947,"reputation":1,"user_id":21234176,"display_name":"somerandomperson "},"score":0,"creation_date":1676647435,"post_id":75484943,"comment_id":133185250,"body_markdown":"When I run the same command in powershell, it returns “a parameter cannot be found that matches parameter name ‘jar’.","body":"When I run the same command in powershell, it returns “a parameter cannot be found that matches parameter name ‘jar’."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1676648741,"post_id":75484943,"comment_id":133185669,"body_markdown":"Sounds like a problem with `javaw`. Is it even installed? You might start with `java -jar`","body":"Sounds like a problem with <code>javaw</code>. Is it even installed? You might start with <code>java -jar</code>"},{"owner":{"account_id":27811947,"reputation":1,"user_id":21234176,"display_name":"somerandomperson "},"score":0,"creation_date":1676684951,"post_id":75484943,"comment_id":133193382,"body_markdown":"It is installed. I set a path to the jre\\bin folder","body":"It is installed. I set a path to the jre\\bin folder"},{"owner":{"account_id":27811947,"reputation":1,"user_id":21234176,"display_name":"somerandomperson "},"score":0,"creation_date":1676686263,"post_id":75484943,"comment_id":133193468,"body_markdown":"Is it probably because of a duplicate javaw installation?","body":"Is it probably because of a duplicate javaw installation?"}],"answers":[{"tags":[],"owner":{"account_id":27811947,"reputation":1,"user_id":21234176,"display_name":"somerandomperson "},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676700258,"creation_date":1676700258,"answer_id":75491513,"question_id":75484943,"body_markdown":"Problem solved. There was a duplicate java folder in Oracle-&gt;Java, which I promptly deleted.","title":"My batch file isn’t executing the .jar file like it’s supposed to","body":"<p>Problem solved. There was a duplicate java folder in Oracle-&gt;Java, which I promptly deleted.</p>\n"}],"owner":{"account_id":27811947,"reputation":1,"user_id":21234176,"display_name":"somerandomperson "},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1676700258,"creation_date":1676640688,"question_id":75484943,"body_markdown":"[enter image description here](https://i.stack.imgur.com/mFbmn.jpg)I tried to run a jar file through a batch file, but it closes without opening the UI that is meant to run with the file.\r\n\r\nI tried downloading Jarfix, but could not double-click to run the jar file in question. Instead, it did nothing. I also tried opening with javaw, but it also did nothing. I’ve done the same thing a year ago and it ran fine. I also tried updating the Java version to the latest one. The jar file was expected to run and open a UI. Please help","title":"My batch file isn’t executing the .jar file like it’s supposed to","body":"<p><a href=\"https://i.stack.imgur.com/mFbmn.jpg\" rel=\"nofollow noreferrer\">enter image description here</a>I tried to run a jar file through a batch file, but it closes without opening the UI that is meant to run with the file.</p>\n<p>I tried downloading Jarfix, but could not double-click to run the jar file in question. Instead, it did nothing. I also tried opening with javaw, but it also did nothing. I’ve done the same thing a year ago and it ran fine. I also tried updating the Java version to the latest one. The jar file was expected to run and open a UI. Please help</p>\n"},{"tags":["java","binary-tree"],"comments":[{"owner":{"account_id":2513781,"reputation":1109,"user_id":2185630,"display_name":"dbl"},"score":5,"creation_date":1600935631,"post_id":64042143,"comment_id":113247768,"body_markdown":"The problem you are facing is that you are replacing left with right and then replacing right with the new left(current right). Same problem as swapping `x` and `y` values without using a temp variable.","body":"The problem you are facing is that you are replacing left with right and then replacing right with the new left(current right). Same problem as swapping <code>x</code> and <code>y</code> values without using a temp variable."}],"answers":[{"tags":[],"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1600936868,"creation_date":1600935792,"answer_id":64042341,"question_id":64042143,"body_markdown":"`newTree = root` means that if you now change `newTree.left` you change `root.left` as well, you do not have an actual new tree, you just manipulate one tree in place. If you want to do that you must be careful not to overwrite stuff that you need later on. If you want to swap two numbers you cannot write `a=b; b=a;` since at the second assignment `a` would have already been changed. But you do just that with `left` and `right`.  \r\nBasically you should write:\r\n\r\n    public void invertTree(TreeNode node) {\r\n       if (node == null)\r\n           return; \r\n        TreeNode tmp = node.left;\r\n        node.left = node.right\r\n        node.right = tmp;\r\n        invertTree(node.left);\r\n        invertTree(node.right);\r\n    }\r\n\r\nAlternatively you can actually create a new tree and then you do not need to worry about the `tmp` part but you would need quite a few `new TreeNode` statements at the right places, then you must not use a node in both the original and the new tree.","title":"Inverse A Tree LeetCode","body":"<p><code>newTree = root</code> means that if you now change <code>newTree.left</code> you change <code>root.left</code> as well, you do not have an actual new tree, you just manipulate one tree in place. If you want to do that you must be careful not to overwrite stuff that you need later on. If you want to swap two numbers you cannot write <code>a=b; b=a;</code> since at the second assignment <code>a</code> would have already been changed. But you do just that with <code>left</code> and <code>right</code>.<br />\nBasically you should write:</p>\n<pre><code>public void invertTree(TreeNode node) {\n   if (node == null)\n       return; \n    TreeNode tmp = node.left;\n    node.left = node.right\n    node.right = tmp;\n    invertTree(node.left);\n    invertTree(node.right);\n}\n</code></pre>\n<p>Alternatively you can actually create a new tree and then you do not need to worry about the <code>tmp</code> part but you would need quite a few <code>new TreeNode</code> statements at the right places, then you must not use a node in both the original and the new tree.</p>\n"},{"tags":[],"owner":{"account_id":27810006,"reputation":1,"user_id":21232579,"display_name":"Sumit Balani"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1676700053,"creation_date":1676700053,"answer_id":75491498,"question_id":64042143,"body_markdown":"Heres my solution from leetcode. Its a simple recursion problem with a postorder traversal. Soln is 0(n) and it ranks top 1% in runtime and top 3% in memory on leetcode\r\n\r\n```\r\n/**\r\n * Definition for a binary tree node.\r\n * public class TreeNode {\r\n *     int val;\r\n *     TreeNode left;\r\n *     TreeNode right;\r\n *     TreeNode() {}\r\n *     TreeNode(int val) { this.val = val; }\r\n *     TreeNode(int val, TreeNode left, TreeNode right) {\r\n *         this.val = val;\r\n *         this.left = left;\r\n *         this.right = right;\r\n *     }\r\n * }\r\n */\r\n //recursion problem, swap every left with the right node in postorder \r\nclass Solution {\r\n    public TreeNode invertTree(TreeNode root) {\r\n        if (root == null) return null;\r\n        if(root.left == null &amp;&amp; root.right == null) {\r\n            return root;\r\n        }\r\n        invertTree(root.left);\r\n        invertTree(root.right);\r\n        TreeNode temp = root.left;\r\n        root.left = root.right;\r\n        root.right = temp;\r\n        return root;\r\n    }\r\n}","title":"Inverse A Tree LeetCode","body":"<p>Heres my solution from leetcode. Its a simple recursion problem with a postorder traversal. Soln is 0(n) and it ranks top 1% in runtime and top 3% in memory on leetcode</p>\n<pre><code>/**\n * Definition for a binary tree node.\n * public class TreeNode {\n *     int val;\n *     TreeNode left;\n *     TreeNode right;\n *     TreeNode() {}\n *     TreeNode(int val) { this.val = val; }\n *     TreeNode(int val, TreeNode left, TreeNode right) {\n *         this.val = val;\n *         this.left = left;\n *         this.right = right;\n *     }\n * }\n */\n //recursion problem, swap every left with the right node in postorder \nclass Solution {\n    public TreeNode invertTree(TreeNode root) {\n        if (root == null) return null;\n        if(root.left == null &amp;&amp; root.right == null) {\n            return root;\n        }\n        invertTree(root.left);\n        invertTree(root.right);\n        TreeNode temp = root.left;\n        root.left = root.right;\n        root.right = temp;\n        return root;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":14428029,"reputation":37,"user_id":11178048,"display_name":"Av&#233;-Maria Nlandou"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":64042341,"answer_count":2,"score":2,"last_activity_date":1676700053,"creation_date":1600935063,"question_id":64042143,"body_markdown":"So I am working on a problem on LeetCode where I must invert a binary tree. \r\n\r\nProblem: \r\n\r\n[![image of the problem][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5uDYe.png\r\n\r\nand here&#39;s my solution: \r\n```\r\nclass Solution {\r\n    public TreeNode invertTree(TreeNode root) {\r\n        TreeNode newTree = root;\r\n        return invertTreeHelper(root, newTree);\r\n    }\r\n\r\n    public TreeNode invertTreeHelper(TreeNode root, TreeNode newTree)\r\n    {\r\n       if(root == null)\r\n           return null; \r\n        \r\n       newTree.val = root.val;         \r\n       newTree.left = invertTreeHelper(root.right, newTree.left); \r\n       newTree.right = invertTreeHelper(root.left, newTree.right); \r\n       return newTree; \r\n    }\r\n}\r\n```\r\nThe given input is:\r\n\r\n    [4,2,7,1,3,6,9]\r\n\r\nMy expected output is:\r\n\r\n    [4,7,2,9,6,3,1]\r\n\r\nHowever, my output is: \r\n\r\n    [4,7,7,9,6,6,9]\r\n \r\nSo clearly, my output does not work for the left side of the tree. I want to know where I went wrong. Is anyone please able to help me with this? \r\n","title":"Inverse A Tree LeetCode","body":"<p>So I am working on a problem on LeetCode where I must invert a binary tree.</p>\n<p>Problem:</p>\n<p><a href=\"https://i.stack.imgur.com/5uDYe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5uDYe.png\" alt=\"image of the problem\" /></a></p>\n<p>and here's my solution:</p>\n<pre><code>class Solution {\n    public TreeNode invertTree(TreeNode root) {\n        TreeNode newTree = root;\n        return invertTreeHelper(root, newTree);\n    }\n\n    public TreeNode invertTreeHelper(TreeNode root, TreeNode newTree)\n    {\n       if(root == null)\n           return null; \n        \n       newTree.val = root.val;         \n       newTree.left = invertTreeHelper(root.right, newTree.left); \n       newTree.right = invertTreeHelper(root.left, newTree.right); \n       return newTree; \n    }\n}\n</code></pre>\n<p>The given input is:</p>\n<pre><code>[4,2,7,1,3,6,9]\n</code></pre>\n<p>My expected output is:</p>\n<pre><code>[4,7,2,9,6,3,1]\n</code></pre>\n<p>However, my output is:</p>\n<pre><code>[4,7,7,9,6,6,9]\n</code></pre>\n<p>So clearly, my output does not work for the left side of the tree. I want to know where I went wrong. Is anyone please able to help me with this?</p>\n"},{"tags":["java","android","react-native","kotlin","gradle"],"answers":[{"tags":[],"owner":{"display_name":"user18899735"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1664766749,"creation_date":1664766749,"answer_id":73930787,"question_id":73912390,"body_markdown":"Apparently, the current version of expo-modules are incompatible with the latest version of React Native (0.70.0) and how it compiles Android Builds. I downgraded react-native to 0.69.5. This ultimately led **me** to other issues but hopefully this can help somebody else.","title":"The Android Gradle plugin supports only kotlin-android-extensions Gradle plugin version 1.6.20 and higher","body":"<p>Apparently, the current version of expo-modules are incompatible with the latest version of React Native (0.70.0) and how it compiles Android Builds. I downgraded react-native to 0.69.5. This ultimately led <strong>me</strong> to other issues but hopefully this can help somebody else.</p>\n"}],"owner":{"display_name":"user18899735"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2689,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73930787,"answer_count":1,"score":2,"last_activity_date":1676698706,"creation_date":1664560726,"question_id":73912390,"body_markdown":"I am trying tog get my React Native app (with expo modules, but not built on expo) deployed to the Google Play Store, and I keep getting this error when I try to build...\r\n```\r\nThe Android Gradle plugin supports only kotlin-android-extensions Gradle plugin version 1.6.20 and higher.\r\nThe following dependencies do not satisfy the required version:\r\nproject &#39;:expo&#39; -&gt; org.jetbrains.kotlin:kotlin-gradle-plugin:1.6.10\r\n```\r\n\r\nMy issue us, the line that it seems to be referencing, `project &#39;:expo&#39; -&gt; org.jetbrains.kotlin:kotlin-gradle-plugin:1.6.10` doesn&#39;t exist anywhere in my code, maybe in the node modules but I have no way of knowing. \r\nI have absolutely no idea what kotlin is and never heard of it before this. I tried looking around for where to upgrade by kotlin-gradle-plugin, but thats nowhere in my app.json or package.json or any other config files. I saw some message boards with similar issues telling me to change this line inside of build.gradle \r\n```\r\nclasspath(&#39;com.android.tools.build:gradle:7.3.0&#39;)\r\n```\r\nto make `7.3.0` match the version I need, but I firmly believe 7.3.0 is greater than 1.6.20, so I highly doubt that solution has any actual merits","title":"The Android Gradle plugin supports only kotlin-android-extensions Gradle plugin version 1.6.20 and higher","body":"<p>I am trying tog get my React Native app (with expo modules, but not built on expo) deployed to the Google Play Store, and I keep getting this error when I try to build...</p>\n<pre><code>The Android Gradle plugin supports only kotlin-android-extensions Gradle plugin version 1.6.20 and higher.\nThe following dependencies do not satisfy the required version:\nproject ':expo' -&gt; org.jetbrains.kotlin:kotlin-gradle-plugin:1.6.10\n</code></pre>\n<p>My issue us, the line that it seems to be referencing, <code>project ':expo' -&gt; org.jetbrains.kotlin:kotlin-gradle-plugin:1.6.10</code> doesn't exist anywhere in my code, maybe in the node modules but I have no way of knowing.\nI have absolutely no idea what kotlin is and never heard of it before this. I tried looking around for where to upgrade by kotlin-gradle-plugin, but thats nowhere in my app.json or package.json or any other config files. I saw some message boards with similar issues telling me to change this line inside of build.gradle</p>\n<pre><code>classpath('com.android.tools.build:gradle:7.3.0')\n</code></pre>\n<p>to make <code>7.3.0</code> match the version I need, but I firmly believe 7.3.0 is greater than 1.6.20, so I highly doubt that solution has any actual merits</p>\n"},{"tags":["java","android","calendarview"],"owner":{"account_id":16114085,"reputation":563,"user_id":13452141,"display_name":"JP711"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676697534,"creation_date":1676689409,"question_id":75490919,"body_markdown":"I am using CalendarView, I enable a range of dates but the date closest to the current day is always selected. I don&#39;t want any date selected, is it possible to disable date selection? In other words I don&#39;t want any date highlighted\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThis is what I have: Currently it is February 17 and when I enable the range from 22 to 28 it selects me 22\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8a4vb.jpg","title":"I need to disable date selection from CalendarView in Android","body":"<p>I am using CalendarView, I enable a range of dates but the date closest to the current day is always selected. I don't want any date selected, is it possible to disable date selection? In other words I don't want any date highlighted</p>\n<p><a href=\"https://i.stack.imgur.com/8a4vb.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8a4vb.jpg\" alt=\"enter image description here\" /></a></p>\n<p>This is what I have: Currently it is February 17 and when I enable the range from 22 to 28 it selects me 22</p>\n"},{"tags":["java","dependencies","repository","maven-3"],"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1676696706,"post_id":75491065,"comment_id":133194263,"body_markdown":"boot 2.3 was released back in 2020. Why trying to use a release-candidate? Why using such an old version at all?","body":"boot 2.3 was released back in 2020. Why trying to use a release-candidate? Why using such an old version at all?"},{"owner":{"account_id":208136,"reputation":850,"user_id":458437,"accept_rate":75,"display_name":"oortcloud_domicile"},"score":0,"creation_date":1676713335,"post_id":75491065,"comment_id":133195849,"body_markdown":"yes i just noticed, i downloaded a reactive project from online and working through it for my own project. thank you","body":"yes i just noticed, i downloaded a reactive project from online and working through it for my own project. thank you"}],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676696978,"creation_date":1676696978,"answer_id":75491333,"question_id":75491065,"body_markdown":"If you are trying to pull a dependency (not a plugin), define an entry in `repositories` (not `pluginRepositories`). That easy.\r\n```xml\r\n\t&lt;repositories&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;spring-snapshots&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t\t&lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t\t&lt;releases&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t\t&lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\r\n\t\t\t&lt;/releases&gt;\r\n\t\t&lt;/repository&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;spring-milestones&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring Milestones&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t\t&lt;releases&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t&lt;/releases&gt;\r\n\t\t&lt;/repository&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;repository.spring.release&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring GA Repository&lt;/name&gt;\r\n\t\t\t&lt;url&gt;http://repo.spring.io/release&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t\t&lt;releases&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t\t&lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\r\n\t\t\t&lt;/releases&gt;\r\n\t\t&lt;/repository&gt;\r\n\t&lt;/repositories&gt;\r\n\t&lt;pluginRepositories&gt;\r\n\t\t&lt;pluginRepository&gt;\r\n\t\t\t&lt;id&gt;spring-snapshots&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/plugins-snapshot&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t\t&lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t\t&lt;releases&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t\t&lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\r\n\t\t\t&lt;/releases&gt;\r\n\t\t&lt;/pluginRepository&gt;\r\n\t\t&lt;pluginRepository&gt;\r\n\t\t\t&lt;id&gt;spring-milestones&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring Milestones&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/plugins-milestone&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t\t&lt;releases&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t&lt;/releases&gt;\r\n\t\t&lt;/pluginRepository&gt;\r\n\t\t&lt;pluginRepository&gt;\r\n\t\t\t&lt;id&gt;repository.spring.release&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring GA Repository&lt;/name&gt;\r\n\t\t\t&lt;url&gt;http://repo.spring.io/plugins-release&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t\t&lt;releases&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t\t&lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\r\n\t\t\t&lt;/releases&gt;\r\n\t\t&lt;/pluginRepository&gt;\r\n\t&lt;/pluginRepositories&gt;\r\n```","title":"unabel to resolve dependencies using maven","body":"<p>If you are trying to pull a dependency (not a plugin), define an entry in <code>repositories</code> (not <code>pluginRepositories</code>). That easy.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n                &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\n            &lt;/snapshots&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n                &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\n            &lt;/releases&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/releases&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;repository.spring.release&lt;/id&gt;\n            &lt;name&gt;Spring GA Repository&lt;/name&gt;\n            &lt;url&gt;http://repo.spring.io/release&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n                &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\n            &lt;/releases&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n    &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/plugins-snapshot&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n                &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\n            &lt;/snapshots&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n                &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\n            &lt;/releases&gt;\n        &lt;/pluginRepository&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/plugins-milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/releases&gt;\n        &lt;/pluginRepository&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;repository.spring.release&lt;/id&gt;\n            &lt;name&gt;Spring GA Repository&lt;/name&gt;\n            &lt;url&gt;http://repo.spring.io/plugins-release&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n                &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\n            &lt;/releases&gt;\n        &lt;/pluginRepository&gt;\n    &lt;/pluginRepositories&gt;\n</code></pre>\n"}],"owner":{"account_id":208136,"reputation":850,"user_id":458437,"accept_rate":75,"display_name":"oortcloud_domicile"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75491333,"answer_count":1,"score":0,"last_activity_date":1676696978,"creation_date":1676692406,"question_id":75491065,"body_markdown":"I am running maven 3.8.9 and this is what i have in pom.xml\r\n\r\n     &lt;repositories&gt;\r\n            &lt;repository&gt;\r\n                &lt;id&gt;central&lt;/id&gt;\r\n                &lt;name&gt;Maven Repository Switchboard&lt;/name&gt;\r\n                &lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt;\r\n            &lt;/repository&gt;\r\n        &lt;/repositories&gt;\r\n        &lt;pluginRepositories&gt;\r\n            &lt;pluginRepository&gt;\r\n                &lt;id&gt;spring-milestones&lt;/id&gt;\r\n                &lt;name&gt;Spring Milestones&lt;/name&gt;\r\n                &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n            &lt;/pluginRepository&gt;\r\n        &lt;/pluginRepositories&gt;\r\n\r\n\r\nThis is what i have in settings.xml\r\n\r\n       &lt;mirror&gt;\r\n          &lt;id&gt;maven-default-http-blocker&lt;/id&gt;\r\n          &lt;mirrorOf&gt;external:http:*&lt;/mirrorOf&gt;\r\n          &lt;name&gt;Pseudo repository to mirror external repositories initially using HTTP.&lt;/name&gt;\r\n          &lt;url&gt;http://0.0.0.0/&lt;/url&gt;\r\n          &lt;blocked&gt;true&lt;/blocked&gt;\r\n        &lt;/mirror&gt;\r\n\r\nI get Below error not sure what i am missing\r\n\r\n            Failed to collect dependencies at org.springframework.boot:spring-boot-starter-oauth2-client:jar:2.3.0.RC1\r\n         -&gt; org.springframework.security:spring-security-oauth2-client:jar:5.3.1.RELEASE \r\n    -&gt; com.nimbusds:oauth2-oidc-sdk:jar:7.1.1 -&gt; com.nimbusds:nimbus-jose-jwt:jar:8.8\r\n     -&gt; net.minidev:json-smart:jar:[1.3.1,2.3]: No versions available for net.minidev:json-smart:jar:[1.3.1,2.3] within specified range -&gt; [Help 1]\r\n\r\n","title":"unabel to resolve dependencies using maven","body":"<p>I am running maven 3.8.9 and this is what i have in pom.xml</p>\n<pre><code> &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;central&lt;/id&gt;\n            &lt;name&gt;Maven Repository Switchboard&lt;/name&gt;\n            &lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n    &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n        &lt;/pluginRepository&gt;\n    &lt;/pluginRepositories&gt;\n</code></pre>\n<p>This is what i have in settings.xml</p>\n<pre><code>   &lt;mirror&gt;\n      &lt;id&gt;maven-default-http-blocker&lt;/id&gt;\n      &lt;mirrorOf&gt;external:http:*&lt;/mirrorOf&gt;\n      &lt;name&gt;Pseudo repository to mirror external repositories initially using HTTP.&lt;/name&gt;\n      &lt;url&gt;http://0.0.0.0/&lt;/url&gt;\n      &lt;blocked&gt;true&lt;/blocked&gt;\n    &lt;/mirror&gt;\n</code></pre>\n<p>I get Below error not sure what i am missing</p>\n<pre><code>        Failed to collect dependencies at org.springframework.boot:spring-boot-starter-oauth2-client:jar:2.3.0.RC1\n     -&gt; org.springframework.security:spring-security-oauth2-client:jar:5.3.1.RELEASE \n-&gt; com.nimbusds:oauth2-oidc-sdk:jar:7.1.1 -&gt; com.nimbusds:nimbus-jose-jwt:jar:8.8\n -&gt; net.minidev:json-smart:jar:[1.3.1,2.3]: No versions available for net.minidev:json-smart:jar:[1.3.1,2.3] within specified range -&gt; [Help 1]\n</code></pre>\n"},{"tags":["java","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1676663146,"post_id":75488497,"comment_id":133189841,"body_markdown":"You might be able to inject a reference to the JPA `EntityManager` and call `flush()` on it in between saving the two entities. I&#39;m not positive that will resolve the identity conflict, but it might.","body":"You might be able to inject a reference to the JPA <code>EntityManager</code> and call <code>flush()</code> on it in between saving the two entities. I&#39;m not positive that will resolve the identity conflict, but it might."},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1676663667,"post_id":75488497,"comment_id":133189983,"body_markdown":"@Andrei, what DB are you on? would you mind providing corresponding table DDL?","body":"@Andrei, what DB are you on? would you mind providing corresponding table DDL?"},{"owner":{"account_id":2991960,"reputation":51,"user_id":2539361,"display_name":"Andrei"},"score":0,"creation_date":1676664026,"post_id":75488497,"comment_id":133190069,"body_markdown":"Injecting EntityManager and flush() doesn&#39;t help. Database will generate new ID&#39;s only on transaction end. I use the MSSQL.","body":"Injecting EntityManager and flush() doesn&#39;t help. Database will generate new ID&#39;s only on transaction end. I use the MSSQL."},{"owner":{"account_id":2991960,"reputation":51,"user_id":2539361,"display_name":"Andrei"},"score":0,"creation_date":1676664367,"post_id":75488497,"comment_id":133190173,"body_markdown":"CREATE TABLE [dbo].[Customer]\n(\n    [id] [int] IDENTITY (1,1) NOT NULL,\n    ...\n    CONSTRAINT  [PK_Customer] PRIMARY KEY CLUSTERED ([id] ASC) \n        WITH (PAD_INDEX = OFF\n                , STATISTICS_NORECOMPUTE = OFF\n                , IGNORE_DUP_KEY = OFF\n                , ALLOW_ROW_LOCKS = ON\n                , ALLOW_PAGE_LOCKS = ON\n                , OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [DATA]\n)","body":"CREATE TABLE [dbo].[Customer] (     [id] [int] IDENTITY (1,1) NOT NULL,     ...     CONSTRAINT  [PK_Customer] PRIMARY KEY CLUSTERED ([id] ASC)          WITH (PAD_INDEX = OFF                 , STATISTICS_NORECOMPUTE = OFF                 , IGNORE_DUP_KEY = OFF                 , ALLOW_ROW_LOCKS = ON                 , ALLOW_PAGE_LOCKS = ON                 , OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [DATA] )"},{"owner":{"account_id":13737609,"reputation":50,"user_id":12114118,"display_name":"Vikram"},"score":0,"creation_date":1676665666,"post_id":75488497,"comment_id":133190471,"body_markdown":"This might be the answer for your question, it basically discard the possibility what you want to achieve https://stackoverflow.com/questions/27697810/why-does-hibernate-disable-insert-batching-when-using-an-identity-identifier-gen","body":"This might be the answer for your question, it basically discard the possibility what you want to achieve <a href=\"https://stackoverflow.com/questions/27697810/why-does-hibernate-disable-insert-batching-when-using-an-identity-identifier-gen\" title=\"why does hibernate disable insert batching when using an identity identifier gen\">stackoverflow.com/questions/27697810/&hellip;</a>"},{"owner":{"account_id":2991960,"reputation":51,"user_id":2539361,"display_name":"Andrei"},"score":0,"creation_date":1676666478,"post_id":75488497,"comment_id":133190630,"body_markdown":"@Vikram, thanks, But in the statement log I can see the insert, so insert not batched. But the zero identifier is returned from DB and I got an exception. Maybe I have to tune something in application.properties?","body":"@Vikram, thanks, But in the statement log I can see the insert, so insert not batched. But the zero identifier is returned from DB and I got an exception. Maybe I have to tune something in application.properties?"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1676667176,"post_id":75488497,"comment_id":133190787,"body_markdown":"The database should not be generating new IDs only when the transaction ends - it must generate IDs after each insert statement, and your JPA provider will have to check with the database after each insert statement to determine what that ID was: a huge performance weakness of identity when compared to sequences or other strategies that allow pre-allocation. But it does work; if you are getting 0 or other issues, show the exception and SQL logged too. I&#39;m not a DBA who understands the settings you&#39;ve used on your table, but try simplifying it","body":"The database should not be generating new IDs only when the transaction ends - it must generate IDs after each insert statement, and your JPA provider will have to check with the database after each insert statement to determine what that ID was: a huge performance weakness of identity when compared to sequences or other strategies that allow pre-allocation. But it does work; if you are getting 0 or other issues, show the exception and SQL logged too. I&#39;m not a DBA who understands the settings you&#39;ve used on your table, but try simplifying it"},{"owner":{"account_id":13737609,"reputation":50,"user_id":12114118,"display_name":"Vikram"},"score":0,"creation_date":1676667333,"post_id":75488497,"comment_id":133190820,"body_markdown":"@Andrei did you try removing Transactional annotation from your brokenCode method? i think it should work, since save method is also Transactional method and default propagation for Transactional is REQUIRED which mean same transaction (declared by brokenCode method ) will be used for two consecutive save method calls, let me know if it works","body":"@Andrei did you try removing Transactional annotation from your brokenCode method? i think it should work, since save method is also Transactional method and default propagation for Transactional is REQUIRED which mean same transaction (declared by brokenCode method ) will be used for two consecutive save method calls, let me know if it works"},{"owner":{"account_id":2991960,"reputation":51,"user_id":2539361,"display_name":"Andrei"},"score":0,"creation_date":1676668090,"post_id":75488497,"comment_id":133190974,"body_markdown":"Seems like my problem in one concrete table, guys, need time to research more. Thanks you all, especially @Vikram. Love you! Tomorrow i will write the update for this topic!","body":"Seems like my problem in one concrete table, guys, need time to research more. Thanks you all, especially @Vikram. Love you! Tomorrow i will write the update for this topic!"},{"owner":{"account_id":2991960,"reputation":51,"user_id":2539361,"display_name":"Andrei"},"score":0,"creation_date":1676693523,"post_id":75488497,"comment_id":133193978,"body_markdown":"updated, the reason is - trigger","body":"updated, the reason is - trigger"}],"owner":{"account_id":2991960,"reputation":51,"user_id":2539361,"display_name":"Andrei"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676693472,"creation_date":1676661886,"question_id":75488497,"body_markdown":"Is it possible to use GenerationType.IDENTITY with Transaction in Hibernate/Spring data?\r\n\r\nI have an existing database, with an identity column in all tables. So, I have to use GenerationType.IDENTITY for it. But, when I create a new entity instance and change its state to managed with someRepository.save(...) method, the persistence provider can&#39;t acquire a new ID for that entity, because it must happen on flush time, at the end of the transaction.\r\n\r\nIf I create one entity, all works as expected. After save(), the entity goes to the managed state, the id is changed from NULL to 0 (zero), and at the flush time, the new ID for the row is generated by the database.\r\n\r\nBut what if we create two instances of the same entity class inside one transaction? The exception will be thrown, and this is justly because we have two different objects with same ID = 0. So, is there a way to deal with it without change strategy from IDENTITY to something else?\r\n\r\n    @Entity\r\n    public class Customer {\r\n        @Id \r\n        @GeneratedValue(strategy=GenerationType.IDENTITY)\r\n        Long id;\r\n        ...\r\n    }\r\n\r\n    @Transactional\r\n    public void brokenCode() {\r\n        Customer one = new Customer();\r\n        Customer two = new Customer();\r\n        someRepository.save(one);\r\n        someRepository.save(two); &lt;--- org.springframework.dao.DataIntegrityViolationException: A different object with the same identifier value was already associated with the session\r\n   \r\n    }\r\n\r\n    CREATE TABLE [dbo].[Customer] \r\n    (\r\n        [id] [int] IDENTITY (1,1) NOT NULL,\r\n        ...\r\n        CONSTRAINT  [PK_Customer] PRIMARY KEY CLUSTERED ([id] ASC) \r\n            WITH (PAD_INDEX = OFF\r\n                    , STATISTICS_NORECOMPUTE = OFF\r\n                    , IGNORE_DUP_KEY = OFF\r\n                    , ALLOW_ROW_LOCKS = ON\r\n                    , ALLOW_PAGE_LOCKS = ON\r\n                    , OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [DATA]\r\n    )\r\n\r\n\r\n**UPD!**\r\n\r\nThe reason is the table has &quot;trigger instead of insert&quot;. In that trigger some fields are calculated based on other fields. And the identity doesn&#39;t return to Hibernate.\r\n\r\n    ALTER trigger [dbo].[Customer] on [dbo].[Customer]\r\n    instead of insert\r\n    as\r\n    if @@rowcount = 0 return\r\n\r\n    set nocount on\r\n    Set dateformat dmy\r\n\r\n    Insert into dbo.Customer\r\n    (f1, f2, ....)\r\n    Select \r\n           I.f1,\r\n           isnull(f2,newid()),\r\n           ...\r\n    from Inserted I\r\n\r\nSo. Is there a way to somehow return identity to Hibernate from that trigger?\r\n\r\nThanks in advance!\r\n","title":"GenerationType.IDENTITY with transaction","body":"<p>Is it possible to use GenerationType.IDENTITY with Transaction in Hibernate/Spring data?</p>\n<p>I have an existing database, with an identity column in all tables. So, I have to use GenerationType.IDENTITY for it. But, when I create a new entity instance and change its state to managed with someRepository.save(...) method, the persistence provider can't acquire a new ID for that entity, because it must happen on flush time, at the end of the transaction.</p>\n<p>If I create one entity, all works as expected. After save(), the entity goes to the managed state, the id is changed from NULL to 0 (zero), and at the flush time, the new ID for the row is generated by the database.</p>\n<p>But what if we create two instances of the same entity class inside one transaction? The exception will be thrown, and this is justly because we have two different objects with same ID = 0. So, is there a way to deal with it without change strategy from IDENTITY to something else?</p>\n<pre><code>@Entity\npublic class Customer {\n    @Id \n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    Long id;\n    ...\n}\n\n@Transactional\npublic void brokenCode() {\n    Customer one = new Customer();\n    Customer two = new Customer();\n    someRepository.save(one);\n    someRepository.save(two); &lt;--- org.springframework.dao.DataIntegrityViolationException: A different object with the same identifier value was already associated with the session\n\n}\n\nCREATE TABLE [dbo].[Customer] \n(\n    [id] [int] IDENTITY (1,1) NOT NULL,\n    ...\n    CONSTRAINT  [PK_Customer] PRIMARY KEY CLUSTERED ([id] ASC) \n        WITH (PAD_INDEX = OFF\n                , STATISTICS_NORECOMPUTE = OFF\n                , IGNORE_DUP_KEY = OFF\n                , ALLOW_ROW_LOCKS = ON\n                , ALLOW_PAGE_LOCKS = ON\n                , OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [DATA]\n)\n</code></pre>\n<p><strong>UPD!</strong></p>\n<p>The reason is the table has &quot;trigger instead of insert&quot;. In that trigger some fields are calculated based on other fields. And the identity doesn't return to Hibernate.</p>\n<pre><code>ALTER trigger [dbo].[Customer] on [dbo].[Customer]\ninstead of insert\nas\nif @@rowcount = 0 return\n\nset nocount on\nSet dateformat dmy\n\nInsert into dbo.Customer\n(f1, f2, ....)\nSelect \n       I.f1,\n       isnull(f2,newid()),\n       ...\nfrom Inserted I\n</code></pre>\n<p>So. Is there a way to somehow return identity to Hibernate from that trigger?</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","android"],"owner":{"account_id":27816469,"reputation":11,"user_id":21237750,"display_name":"developer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1676692220,"creation_date":1676692142,"question_id":75491054,"body_markdown":"    E/dalvikvm: Could not find class &#39;android.view.WindowInsets&#39;, referenced from method androidx.core.view.WindowInsetsCompat.toWindowInsetsCompat\r\n    E/dalvikvm: Could not find class &#39;android.os.LocaleList&#39;, referenced from method androidx.core.os.LocaleListCompat.wrap\r\n\r\ni want to socket connect and sendmsg in android java \r\n\r\n\r\n\r\nthis is error name what can i do?\r\n","title":"How to android java socket connect?","body":"<pre><code>E/dalvikvm: Could not find class 'android.view.WindowInsets', referenced from method androidx.core.view.WindowInsetsCompat.toWindowInsetsCompat\nE/dalvikvm: Could not find class 'android.os.LocaleList', referenced from method androidx.core.os.LocaleListCompat.wrap\n</code></pre>\n<p>i want to socket connect and sendmsg in android java</p>\n<p>this is error name what can i do?</p>\n"},{"tags":["java","android","kotlin","base64"],"owner":{"account_id":27816269,"reputation":11,"user_id":21237593,"display_name":"Loonk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1676691940,"creation_date":1676691940,"question_id":75491040,"body_markdown":"I can&#39;t convert picture taken to readable base64, while starts the same as online converters, it&#39;s shorter and about half-way through becomes different.\r\n\r\n\r\nCode\r\n```\r\nimageReader = ImageReader.newInstance(600,600, ImageFormat.JPEG, 1)\r\n        //Was switched to lambda\r\n        //imageReader.setOnImageAvailableListener(object: ImageReader.OnImageAvailableListener{\r\n        //            override fun onImageAvailable(reader: ImageReader?) {\r\n        imageReader.setOnImageAvailableListener({ reader -&gt;\r\n            val image = reader?.acquireLatestImage()\r\n\r\n            val buffer = image!!.planes[0].buffer\r\n            val bytes = ByteArray(buffer.remaining())\r\n            buffer.get(bytes)\r\n\r\n            var file = File(requireActivity().getExternalFilesDir(Environment.DIRECTORY_PICTURES),&quot;img.jpeg&quot;)\r\n            var output = FileOutputStream(file)\r\n            output.write(bytes)\r\n            output.close()\r\n            image.close()\r\n            val encodedString: String = Base64.encodeToString(bytes, Base64.DEFAULT);\r\n            println(encodedString)\r\n\r\n            pictures.add(encodedString)\r\n\r\n            val sound = MediaActionSound()\r\n            sound.play(MediaActionSound.SHUTTER_CLICK)\r\n        }, handler)\r\n```\r\n","title":"Can&#39;t convert ByteArray from Camera2 to Base64","body":"<p>I can't convert picture taken to readable base64, while starts the same as online converters, it's shorter and about half-way through becomes different.</p>\n<p>Code</p>\n<pre><code>imageReader = ImageReader.newInstance(600,600, ImageFormat.JPEG, 1)\n        //Was switched to lambda\n        //imageReader.setOnImageAvailableListener(object: ImageReader.OnImageAvailableListener{\n        //            override fun onImageAvailable(reader: ImageReader?) {\n        imageReader.setOnImageAvailableListener({ reader -&gt;\n            val image = reader?.acquireLatestImage()\n\n            val buffer = image!!.planes[0].buffer\n            val bytes = ByteArray(buffer.remaining())\n            buffer.get(bytes)\n\n            var file = File(requireActivity().getExternalFilesDir(Environment.DIRECTORY_PICTURES),&quot;img.jpeg&quot;)\n            var output = FileOutputStream(file)\n            output.write(bytes)\n            output.close()\n            image.close()\n            val encodedString: String = Base64.encodeToString(bytes, Base64.DEFAULT);\n            println(encodedString)\n\n            pictures.add(encodedString)\n\n            val sound = MediaActionSound()\n            sound.play(MediaActionSound.SHUTTER_CLICK)\n        }, handler)\n</code></pre>\n"},{"tags":["java","loops","break"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1676680711,"post_id":75490336,"comment_id":133192974,"body_markdown":"You need to use curly braces around a multi-line if statement in Java. Indentation is not significant. This code will unconditionally break at the end of the first iteration.","body":"You need to use curly braces around a multi-line if statement in Java. Indentation is not significant. This code will unconditionally break at the end of the first iteration."}],"answers":[{"tags":[],"owner":{"account_id":9144834,"reputation":4430,"user_id":6801443,"display_name":"Sean F"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676681107,"creation_date":1676680766,"answer_id":75490421,"question_id":75490336,"body_markdown":"Yes, there is a way to tell if the loop ends up completing without finding the String being searched.\r\n```java\r\nString x = &quot;Hello&quot;;\r\nString searchForThis = &quot;e&quot;; // Something to search for\r\nint i = 0;\r\nfor (; i &lt; x.length(); i++) {\r\n  if (x.startsWith(searchForThis, i) {\r\n    System.out.println(&quot;I found it&quot;);\r\n    break;\r\n   }\r\n}\r\nif(i == x.length()) {\r\n   System.out.println(&quot;I couldn&#39;t find it&quot;);\r\n}\r\n```\r\nHowever, the search condition is all wrong, I changed it to make sense, but all you really need is no loop at all with a single call to &quot;contains&quot;.","title":"Java, detect whether loop stopped because of an unmet condition or break","body":"<p>Yes, there is a way to tell if the loop ends up completing without finding the String being searched.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String x = &quot;Hello&quot;;\nString searchForThis = &quot;e&quot;; // Something to search for\nint i = 0;\nfor (; i &lt; x.length(); i++) {\n  if (x.startsWith(searchForThis, i) {\n    System.out.println(&quot;I found it&quot;);\n    break;\n   }\n}\nif(i == x.length()) {\n   System.out.println(&quot;I couldn't find it&quot;);\n}\n</code></pre>\n<p>However, the search condition is all wrong, I changed it to make sense, but all you really need is no loop at all with a single call to &quot;contains&quot;.</p>\n"},{"tags":[],"owner":{"account_id":4433743,"reputation":2585,"user_id":3610183,"accept_rate":87,"display_name":"rainman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676691669,"creation_date":1676691669,"answer_id":75491023,"question_id":75490336,"body_markdown":"I would add a boolean and initialize it to false, and change it to true only if the \r\n\r\n    searchForThis \r\nis found.\r\n\r\nSomething like this:\r\n\r\n    String x = &quot;Hello&quot;;\r\n    \t\tString searchForThis = &quot;i&quot;; // Something to search for\r\n    \t\tboolean found = false;\r\n    \t\tfor (int i = 0; i &lt; x.length(); i++) {\r\n    \t\t\tif (x.contains(searchForThis)) {\r\n    \t\t\t\tSystem.out.println(&quot;I found it&quot;);\r\n    \t\t\t\tfound = true;\r\n    \t\t\t\tbreak;\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\tif (found) {\r\n    \t\t\t// Do something\r\n\r\n    \t\t}\r\n    \r\n    \t\telse {\r\n              //Do something else\r\n    \t\t}","title":"Java, detect whether loop stopped because of an unmet condition or break","body":"<p>I would add a boolean and initialize it to false, and change it to true only if the</p>\n<pre><code>searchForThis \n</code></pre>\n<p>is found.</p>\n<p>Something like this:</p>\n<pre><code>String x = &quot;Hello&quot;;\n        String searchForThis = &quot;i&quot;; // Something to search for\n        boolean found = false;\n        for (int i = 0; i &lt; x.length(); i++) {\n            if (x.contains(searchForThis)) {\n                System.out.println(&quot;I found it&quot;);\n                found = true;\n                break;\n            }\n        }\n\n        if (found) {\n            // Do something\n\n        }\n\n        else {\n          //Do something else\n        }\n</code></pre>\n"}],"owner":{"account_id":27660478,"reputation":1,"user_id":21113418,"display_name":"AlxV05"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1676691669,"creation_date":1676679621,"question_id":75490336,"body_markdown":"I have a `for` loop that iterates through a `String`, `x`, that if `x` contains a specified `String`. If `x` does contain that `String`, the loop will `break`. It looks something like this:\r\n```\r\nString x = &quot;Hello&quot;;\r\nString searchForThis = &quot;e&quot;; // Something to search for\r\nfor (int i = 0; i &lt; x.length(); i++) {\r\n  if (x.contains(searchForThis)\r\n    System.out.println(&quot;I found it&quot;);\r\n    break;\r\n}\r\n```\r\nNow, what I want to do is if the loop ends up completing without finding the `String` to search for, it prints out that the `String` was not found.\r\n\r\nI came up with this solution; to check if the loop was iterating for the last time (`i+1 == x.length()`), but it seemed a bit inefficient to me.\r\n```\r\nfor (int i = 0; i &lt; x.length(); i++) {\r\n  if (i+1 == x.length() &amp;&amp; !x.contains(searchForThis))\r\n    System.out.println(&quot;I couldn&#39;t find it)&quot;;\r\n  else if (x.contains(searchForThis) {\r\n    System.out.println(&quot;I found it&quot;);\r\n    break;\r\n  }\r\n}\r\n```\r\nI was wondering if there was a way to tell, when a looped stopped, whether it had exited because its condition was no longer `true`, or if it had been stopped because of a `break`; maybe something like this:\r\n```\r\nif (loopStoppedDueToUnmetCondition)\r\n  // Do something\r\nelse if (loopStoppedDueToBreakStatement)\r\n  // Do something else\r\nelse\r\n  // Do yet another something\r\n```\r\nIf there isn&#39;t such as thing as this, then I would still greatly appreciate any suggestions on how I could &quot;better&quot; solve my problem mentioned above.\r\nThanks!","title":"Java, detect whether loop stopped because of an unmet condition or break","body":"<p>I have a <code>for</code> loop that iterates through a <code>String</code>, <code>x</code>, that if <code>x</code> contains a specified <code>String</code>. If <code>x</code> does contain that <code>String</code>, the loop will <code>break</code>. It looks something like this:</p>\n<pre><code>String x = &quot;Hello&quot;;\nString searchForThis = &quot;e&quot;; // Something to search for\nfor (int i = 0; i &lt; x.length(); i++) {\n  if (x.contains(searchForThis)\n    System.out.println(&quot;I found it&quot;);\n    break;\n}\n</code></pre>\n<p>Now, what I want to do is if the loop ends up completing without finding the <code>String</code> to search for, it prints out that the <code>String</code> was not found.</p>\n<p>I came up with this solution; to check if the loop was iterating for the last time (<code>i+1 == x.length()</code>), but it seemed a bit inefficient to me.</p>\n<pre><code>for (int i = 0; i &lt; x.length(); i++) {\n  if (i+1 == x.length() &amp;&amp; !x.contains(searchForThis))\n    System.out.println(&quot;I couldn't find it)&quot;;\n  else if (x.contains(searchForThis) {\n    System.out.println(&quot;I found it&quot;);\n    break;\n  }\n}\n</code></pre>\n<p>I was wondering if there was a way to tell, when a looped stopped, whether it had exited because its condition was no longer <code>true</code>, or if it had been stopped because of a <code>break</code>; maybe something like this:</p>\n<pre><code>if (loopStoppedDueToUnmetCondition)\n  // Do something\nelse if (loopStoppedDueToBreakStatement)\n  // Do something else\nelse\n  // Do yet another something\n</code></pre>\n<p>If there isn't such as thing as this, then I would still greatly appreciate any suggestions on how I could &quot;better&quot; solve my problem mentioned above.\nThanks!</p>\n"},{"tags":["java","android","security","payment","upi"],"owner":{"account_id":18118213,"reputation":1,"user_id":13174621,"display_name":"Ratnadeep Parya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":242,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676691287,"creation_date":1676691287,"question_id":75491007,"body_markdown":"UPI payment failed in PhonePe while testing my android application.\r\nThe error it is showing is - For security reasons, you are not allowed to send money from your bank account for this payment. You don&#39;t have to enter UPI PIN to receive money/cashback.\r\n\r\nMainActivity.java contains - \r\n\r\n```\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.net.ConnectivityManager;\r\nimport android.net.NetworkInfo;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.Toast;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private Button pay_btn;\r\n\r\n    final int UPI_PAYMENT = 0;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        pay_btn = (Button) findViewById(R.id.pay_btn);\r\n\r\n        pay_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                payUsingUpi(&quot;1&quot;,&quot;Test Payment&quot;,&quot;Ratnadeep Parya&quot;,&quot;parya.ratnadeep125@okaxis&quot;);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void payUsingUpi(String amounttxt, String notetxt, String nametxt, String upitxt) {\r\n\r\n        Uri uri = Uri.parse(&quot;upi://pay&quot;).buildUpon()\r\n                .appendQueryParameter(&quot;pa&quot;,upitxt)\r\n                .appendQueryParameter(&quot;pn&quot;,nametxt)\r\n                .appendQueryParameter(&quot;tn&quot;,notetxt)\r\n                .appendQueryParameter(&quot;am&quot;,amounttxt)\r\n                .appendQueryParameter(&quot;cu&quot;,&quot;INR&quot;)\r\n                .build();\r\n\r\n        Intent upi_payment = new Intent(Intent.ACTION_VIEW);\r\n        upi_payment.setData(uri);\r\n        Intent chooser = Intent.createChooser(upi_payment,&quot;Pay with&quot;);\r\n        if (null!=chooser.resolveActivity(getPackageManager())){\r\n            startActivityForResult(chooser,UPI_PAYMENT);\r\n        }\r\n        else {\r\n            Toast.makeText(this, &quot;No UPI app found!&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n\r\n        switch (requestCode){\r\n            case UPI_PAYMENT:\r\n                if ((RESULT_OK==resultCode|| (resultCode==11))){\r\n                    if (data!=null){\r\n                        String txt = data.getStringExtra(&quot;response&quot;);\r\n                        Log.d(&quot;UPI&quot;, &quot;onActivityResult: &quot;+ txt);\r\n                        ArrayList&lt;String&gt;dataLst=new ArrayList&lt;&gt;();\r\n                        dataLst.add(&quot;Nothing&quot;);\r\n                        upipaymentdataoperation(dataLst);\r\n                    }\r\n                    else {\r\n                        Log.d(&quot;UPI&quot;, &quot;onActivityResult: &quot;+ &quot;Return data is null!&quot;);\r\n                        ArrayList&lt;String&gt;dataLst=new ArrayList&lt;&gt;();\r\n                        dataLst.add(&quot;Nothing&quot;);\r\n                        upipaymentdataoperation(dataLst);\r\n                    }\r\n                }\r\n                else {\r\n                    Log.d(&quot;UPI&quot;, &quot;onActivityResult: &quot;+ &quot;Return data is null!&quot;);\r\n                    ArrayList&lt;String&gt;dataLst=new ArrayList&lt;&gt;();\r\n                    dataLst.add(&quot;Nothing&quot;);\r\n                    upipaymentdataoperation(dataLst);\r\n                }\r\n                break;\r\n        }\r\n\r\n    }\r\n\r\n    private void upipaymentdataoperation(ArrayList&lt;String&gt; data) {\r\n\r\n        if (isConnectionAvailable(MainActivity.this)){\r\n            String str = data.get(0);\r\n            Log.d(&quot;UPIPAY&quot;, &quot;upipaymentdataoperation: &quot;+str);\r\n            String paymentCancel=&quot;&quot;;\r\n            if (str==null)str=&quot;discard&quot;;\r\n            String status = &quot;&quot;;\r\n            String approvalref = &quot;&quot;;\r\n            String response[]=str.split(&quot;&amp;&quot;);\r\n            for (int i=0;i&lt;response.length;i++){\r\n                String equalStr[]=response[i].split(&quot;=&quot;);\r\n                if (equalStr.length&gt;=2){\r\n                    if (equalStr[0].toLowerCase().equals(&quot;Status&quot;.toLowerCase())){\r\n                        status=equalStr[1].toLowerCase();\r\n                    }\r\n                    else if(equalStr[0].toLowerCase().equals(&quot;approval Ref&quot;.toLowerCase())||\r\n                        equalStr[0].toLowerCase().equals(&quot;txnRef&quot;.toLowerCase()))\r\n                    {\r\n                        approvalref=equalStr[1];\r\n                    }\r\n                }\r\n                else {\r\n                    paymentCancel=&quot;Payment cancelled by user&quot;;\r\n                    if (status.equals(&quot;success&quot;)){\r\n                        Toast.makeText(this, &quot;Transaction success&quot;, Toast.LENGTH_SHORT).show();\r\n                        Log.d(&quot;UPI&quot;, &quot;responsestr: &quot;+approvalref);\r\n                    }\r\n                    else if (&quot;Payment cancelled by user&quot;.equals(paymentCancel)){\r\n                        Toast.makeText(this, &quot;Payment cancelled by user&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n                    else {\r\n                        Toast.makeText(this, &quot;Transaction failed&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            Toast.makeText(this, &quot;No internet&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n\r\n    }\r\n\r\n    private boolean isConnectionAvailable(Context context) {\r\n        ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        if (connectivityManager!=null){\r\n            NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\r\n            if (networkInfo!=null &amp;&amp; networkInfo.isConnected() &amp;&amp; networkInfo.isConnectedOrConnecting() &amp;&amp; networkInfo.isAvailable()){\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nAndroidManifest.xml contains -\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.CHANGE_WIFI_STATE&quot;/&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.UpiTesting&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\n\r\n\r\nactivity_main.xml contains -\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:background=&quot;@color/white&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/pay_btn&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;@string/pay_with_upi&quot;\r\n        android:backgroundTint=&quot;@android:color/holo_green_dark&quot;\r\n        android:layout_centerInParent=&quot;true&quot;\r\n        android:textSize=&quot;20sp&quot;/&gt;\r\n\r\n&lt;/RelativeLayout&gt;\r\n```\r\n\r\n\r\n\r\nPlease assist me to get rid of this issue.\r\n\r\nI was trying to test UPI payment by sending request in UPI application.\r\n\r\nIn PhonePe it is showing that - For security reasons, you are not allowed to send money from your bank account for this payment. You don&#39;t have to enter UPI PIN to receive money/cashback.","title":"Issue in making UPI payment request from android","body":"<p>UPI payment failed in PhonePe while testing my android application.\nThe error it is showing is - For security reasons, you are not allowed to send money from your bank account for this payment. You don't have to enter UPI PIN to receive money/cashback.</p>\n<p>MainActivity.java contains -</p>\n<pre><code>import androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Context;\nimport android.content.Intent;\nimport android.net.ConnectivityManager;\nimport android.net.NetworkInfo;\nimport android.net.Uri;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.Toast;\n\nimport java.util.ArrayList;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private Button pay_btn;\n\n    final int UPI_PAYMENT = 0;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        pay_btn = (Button) findViewById(R.id.pay_btn);\n\n        pay_btn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                payUsingUpi(&quot;1&quot;,&quot;Test Payment&quot;,&quot;Ratnadeep Parya&quot;,&quot;parya.ratnadeep125@okaxis&quot;);\n            }\n        });\n    }\n\n    private void payUsingUpi(String amounttxt, String notetxt, String nametxt, String upitxt) {\n\n        Uri uri = Uri.parse(&quot;upi://pay&quot;).buildUpon()\n                .appendQueryParameter(&quot;pa&quot;,upitxt)\n                .appendQueryParameter(&quot;pn&quot;,nametxt)\n                .appendQueryParameter(&quot;tn&quot;,notetxt)\n                .appendQueryParameter(&quot;am&quot;,amounttxt)\n                .appendQueryParameter(&quot;cu&quot;,&quot;INR&quot;)\n                .build();\n\n        Intent upi_payment = new Intent(Intent.ACTION_VIEW);\n        upi_payment.setData(uri);\n        Intent chooser = Intent.createChooser(upi_payment,&quot;Pay with&quot;);\n        if (null!=chooser.resolveActivity(getPackageManager())){\n            startActivityForResult(chooser,UPI_PAYMENT);\n        }\n        else {\n            Toast.makeText(this, &quot;No UPI app found!&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n\n        switch (requestCode){\n            case UPI_PAYMENT:\n                if ((RESULT_OK==resultCode|| (resultCode==11))){\n                    if (data!=null){\n                        String txt = data.getStringExtra(&quot;response&quot;);\n                        Log.d(&quot;UPI&quot;, &quot;onActivityResult: &quot;+ txt);\n                        ArrayList&lt;String&gt;dataLst=new ArrayList&lt;&gt;();\n                        dataLst.add(&quot;Nothing&quot;);\n                        upipaymentdataoperation(dataLst);\n                    }\n                    else {\n                        Log.d(&quot;UPI&quot;, &quot;onActivityResult: &quot;+ &quot;Return data is null!&quot;);\n                        ArrayList&lt;String&gt;dataLst=new ArrayList&lt;&gt;();\n                        dataLst.add(&quot;Nothing&quot;);\n                        upipaymentdataoperation(dataLst);\n                    }\n                }\n                else {\n                    Log.d(&quot;UPI&quot;, &quot;onActivityResult: &quot;+ &quot;Return data is null!&quot;);\n                    ArrayList&lt;String&gt;dataLst=new ArrayList&lt;&gt;();\n                    dataLst.add(&quot;Nothing&quot;);\n                    upipaymentdataoperation(dataLst);\n                }\n                break;\n        }\n\n    }\n\n    private void upipaymentdataoperation(ArrayList&lt;String&gt; data) {\n\n        if (isConnectionAvailable(MainActivity.this)){\n            String str = data.get(0);\n            Log.d(&quot;UPIPAY&quot;, &quot;upipaymentdataoperation: &quot;+str);\n            String paymentCancel=&quot;&quot;;\n            if (str==null)str=&quot;discard&quot;;\n            String status = &quot;&quot;;\n            String approvalref = &quot;&quot;;\n            String response[]=str.split(&quot;&amp;&quot;);\n            for (int i=0;i&lt;response.length;i++){\n                String equalStr[]=response[i].split(&quot;=&quot;);\n                if (equalStr.length&gt;=2){\n                    if (equalStr[0].toLowerCase().equals(&quot;Status&quot;.toLowerCase())){\n                        status=equalStr[1].toLowerCase();\n                    }\n                    else if(equalStr[0].toLowerCase().equals(&quot;approval Ref&quot;.toLowerCase())||\n                        equalStr[0].toLowerCase().equals(&quot;txnRef&quot;.toLowerCase()))\n                    {\n                        approvalref=equalStr[1];\n                    }\n                }\n                else {\n                    paymentCancel=&quot;Payment cancelled by user&quot;;\n                    if (status.equals(&quot;success&quot;)){\n                        Toast.makeText(this, &quot;Transaction success&quot;, Toast.LENGTH_SHORT).show();\n                        Log.d(&quot;UPI&quot;, &quot;responsestr: &quot;+approvalref);\n                    }\n                    else if (&quot;Payment cancelled by user&quot;.equals(paymentCancel)){\n                        Toast.makeText(this, &quot;Payment cancelled by user&quot;, Toast.LENGTH_SHORT).show();\n                    }\n                    else {\n                        Toast.makeText(this, &quot;Transaction failed&quot;, Toast.LENGTH_SHORT).show();\n                    }\n                }\n            }\n        }\n        else {\n            Toast.makeText(this, &quot;No internet&quot;, Toast.LENGTH_SHORT).show();\n        }\n\n    }\n\n    private boolean isConnectionAvailable(Context context) {\n        ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n        if (connectivityManager!=null){\n            NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\n            if (networkInfo!=null &amp;&amp; networkInfo.isConnected() &amp;&amp; networkInfo.isConnectedOrConnecting() &amp;&amp; networkInfo.isAvailable()){\n                return true;\n            }\n        }\n        return false;\n    }\n}\n</code></pre>\n<p>AndroidManifest.xml contains -</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.CHANGE_WIFI_STATE&quot;/&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.UpiTesting&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>activity_main.xml contains -</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:background=&quot;@color/white&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/pay_btn&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/pay_with_upi&quot;\n        android:backgroundTint=&quot;@android:color/holo_green_dark&quot;\n        android:layout_centerInParent=&quot;true&quot;\n        android:textSize=&quot;20sp&quot;/&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>Please assist me to get rid of this issue.</p>\n<p>I was trying to test UPI payment by sending request in UPI application.</p>\n<p>In PhonePe it is showing that - For security reasons, you are not allowed to send money from your bank account for this payment. You don't have to enter UPI PIN to receive money/cashback.</p>\n"},{"tags":["java","maven","kotlin","okhttp","snyk"],"answers":[{"tags":[],"owner":{"account_id":3808391,"reputation":4885,"user_id":3160089,"accept_rate":77,"display_name":"Endzeit"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1676690737,"creation_date":1676686226,"answer_id":75490754,"question_id":75486505,"body_markdown":"As with all vulnerable software libraries, you need to assess whether or not you&#39;re actually affected by the vulnerability that is included.\r\n\r\nDetails on the vulnerability are listed in your Snyk report.\r\nThe problematic functions are `createTempDir` and `createTempFile` from the package `kotlin.io`. As outlined in your report as well as [the Kotlin documentation](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/create-temp-dir.html), these functions are a possible source of leaking information, due to the created file / directory having having too wide permissions; that is, everyone with access to the file system can read the files.\r\n\r\nIs this a problem?  \r\nIf you (and any dependencies you&#39;re including in your software) is NOT using one of the aforementioned functions, you&#39;re not vulnerable.  \r\nAlso, if you (or the dependency) is adjusting the file permissions after calling one of these functions and before inserting any information, you&#39;re not affected.  \r\nIn case the functions are used and the permissions are not adjusted, still that might not pose a problem, as long as the data stored in the files do not need to be protected, e.g. are NOT secrets or personal information.\r\n\r\nTo address your questions directly:\r\n1. Unfortunately, there is not easy way to fix this. You either would have to use a version of `kotlin-stdlib` where the function was not introduced yet, exclude the `kotlin-stdlib` from your classpath entirely or use a version where the functions are no longer included; which is not released yet. However, options 1 and 2 do not make any sense, because if the software keeps working, that means noone is using the functions and you&#39;re not affected anyway. \r\n2. No and yes. Everyone relying on the `kotlin-stdlib` in one of the affected versions, has the function on its classpath. However, as long as it is not used, or the usage does not pose a problem as explained above, the software is not vulnerable.\r\n\r\nThe OkHttp project [seems to know](https://github.com/square/okhttp/issues/7423) of the vulnerability, but seems not to be affected.","title":"Is it possible to solve org.jetbrains.kotlin:kotlin-stdlib vulnerability from OkHttp?","body":"<p>As with all vulnerable software libraries, you need to assess whether or not you're actually affected by the vulnerability that is included.</p>\n<p>Details on the vulnerability are listed in your Snyk report.\nThe problematic functions are <code>createTempDir</code> and <code>createTempFile</code> from the package <code>kotlin.io</code>. As outlined in your report as well as <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/create-temp-dir.html\" rel=\"nofollow noreferrer\">the Kotlin documentation</a>, these functions are a possible source of leaking information, due to the created file / directory having having too wide permissions; that is, everyone with access to the file system can read the files.</p>\n<p>Is this a problem?<br />\nIf you (and any dependencies you're including in your software) is NOT using one of the aforementioned functions, you're not vulnerable.<br />\nAlso, if you (or the dependency) is adjusting the file permissions after calling one of these functions and before inserting any information, you're not affected.<br />\nIn case the functions are used and the permissions are not adjusted, still that might not pose a problem, as long as the data stored in the files do not need to be protected, e.g. are NOT secrets or personal information.</p>\n<p>To address your questions directly:</p>\n<ol>\n<li>Unfortunately, there is not easy way to fix this. You either would have to use a version of <code>kotlin-stdlib</code> where the function was not introduced yet, exclude the <code>kotlin-stdlib</code> from your classpath entirely or use a version where the functions are no longer included; which is not released yet. However, options 1 and 2 do not make any sense, because if the software keeps working, that means noone is using the functions and you're not affected anyway.</li>\n<li>No and yes. Everyone relying on the <code>kotlin-stdlib</code> in one of the affected versions, has the function on its classpath. However, as long as it is not used, or the usage does not pose a problem as explained above, the software is not vulnerable.</li>\n</ol>\n<p>The OkHttp project <a href=\"https://github.com/square/okhttp/issues/7423\" rel=\"nofollow noreferrer\">seems to know</a> of the vulnerability, but seems not to be affected.</p>\n"}],"owner":{"account_id":27812898,"reputation":65,"user_id":21234935,"display_name":"Yevhen Vasyliev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":396,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":75490754,"answer_count":1,"score":5,"last_activity_date":1676690737,"creation_date":1676649197,"question_id":75486505,"body_markdown":"I&#39;m using `Snyk` service to check my projects for vulnerabilities.\r\n\r\nProjects with `OkHttp` dependency have one common vulnerability:\r\n```\r\nVulnerable module: org.jetbrains.kotlin:kotlin-stdlib\r\nIntroduced through: com.squareup.okhttp3:okhttp@4.10.0\r\n```\r\n\r\nYou can check the full report here: https://snyk.io/test/github/yvasyliev/deezer-api\r\n\r\nIn **Overview** section there is a note:\r\n&gt; Note: As of version 1.4.21, the vulnerable functions have been marked as deprecated. Due to still being useable, this advisory is kept as &quot;unfixed&quot;.\r\n\r\nI have two questions:\r\n\r\n1. Can I fix this vulnerability in Maven project and how?\r\n2. If vulnerability cannot be fixed, then does it mean that every signle Kotlin application has this vulnerability by default (since it&#39;s comming from kotlin-stdlib)?\r\n\r\nThe latest stable version of `OkHttp` is added to project by `Maven`:\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt;\r\n    &lt;artifactId&gt;okhttp&lt;/artifactId&gt;\r\n    &lt;version&gt;4.10.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Is it possible to solve org.jetbrains.kotlin:kotlin-stdlib vulnerability from OkHttp?","body":"<p>I'm using <code>Snyk</code> service to check my projects for vulnerabilities.</p>\n<p>Projects with <code>OkHttp</code> dependency have one common vulnerability:</p>\n<pre><code>Vulnerable module: org.jetbrains.kotlin:kotlin-stdlib\nIntroduced through: com.squareup.okhttp3:okhttp@4.10.0\n</code></pre>\n<p>You can check the full report here: <a href=\"https://snyk.io/test/github/yvasyliev/deezer-api\" rel=\"noreferrer\">https://snyk.io/test/github/yvasyliev/deezer-api</a></p>\n<p>In <strong>Overview</strong> section there is a note:</p>\n<blockquote>\n<p>Note: As of version 1.4.21, the vulnerable functions have been marked as deprecated. Due to still being useable, this advisory is kept as &quot;unfixed&quot;.</p>\n</blockquote>\n<p>I have two questions:</p>\n<ol>\n<li>Can I fix this vulnerability in Maven project and how?</li>\n<li>If vulnerability cannot be fixed, then does it mean that every signle Kotlin application has this vulnerability by default (since it's comming from kotlin-stdlib)?</li>\n</ol>\n<p>The latest stable version of <code>OkHttp</code> is added to project by <code>Maven</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt;\n    &lt;artifactId&gt;okhttp&lt;/artifactId&gt;\n    &lt;version&gt;4.10.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","gradle","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":27560193,"reputation":491,"user_id":21033369,"display_name":"LJ replica"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676607424,"creation_date":1676607424,"answer_id":75480192,"question_id":75479185,"body_markdown":"&gt; An exception occurred applying plugin request [id: &#39;org.jetbrains.intellij&#39;, version: &#39;1.12.0&#39;] Failed to apply plugin &#39;org.jetbrains.intellij&#39;. Gradle IntelliJ Plugin requires Gradle 7.3 and higher\r\n\r\nPlease open the gradle/wrapper/gradle-wrapper.properties, and check what version is there. \r\nYou could change the old Gradle version to any version new than 7.3 in that file&#39;s `distributionUrl` part to fix this problem and click the Gradle reload button to reload this project.\r\n\r\nOr run something like `gradle wrapper --gradle-version 8.0` from the command line to update the Gradle version.","title":"How to deal with &quot;Failed to apply plugin &#39;org.jetbrains.intellij&#39;. Gradle IntelliJ Plugin requires Gradle X.X and higher&quot; error","body":"<blockquote>\n<p>An exception occurred applying plugin request [id: 'org.jetbrains.intellij', version: '1.12.0'] Failed to apply plugin 'org.jetbrains.intellij'. Gradle IntelliJ Plugin requires Gradle 7.3 and higher</p>\n</blockquote>\n<p>Please open the gradle/wrapper/gradle-wrapper.properties, and check what version is there.\nYou could change the old Gradle version to any version new than 7.3 in that file's <code>distributionUrl</code> part to fix this problem and click the Gradle reload button to reload this project.</p>\n<p>Or run something like <code>gradle wrapper --gradle-version 8.0</code> from the command line to update the Gradle version.</p>\n"}],"owner":{"account_id":2816973,"reputation":648,"user_id":4818123,"accept_rate":61,"display_name":"Takeshi Tokugawa YD"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75480192,"answer_count":1,"score":0,"last_activity_date":1676689774,"creation_date":1676593296,"question_id":75479185,"body_markdown":"My plugin is based on official Jet Brains template, however Java one, not Kotlin.\r\n\r\nWhen I opened my project, I got the error\r\n\r\n&gt; An exception occurred applying plugin request [id:\r\n&gt; &#39;org.jetbrains.intellij&#39;, version: &#39;1.12.0&#39;]\r\n&gt; Failed to apply plugin &#39;org.jetbrains.intellij&#39;.\r\n&gt; Gradle IntelliJ Plugin requires Gradle 7.3 and higher\r\n\r\nThe dependencies in build.gradle.kts are\r\n\r\n    plugins {\r\n        // Java support\r\n        id(&quot;java&quot;)\r\n        // Kotlin support\r\n        id(&quot;org.jetbrains.kotlin.jvm&quot;) version &quot;1.7.10&quot;\r\n        // gradle-intellij-plugin - read more: https://github.com/JetBrains/gradle-intellij-plugin\r\n        id(&quot;org.jetbrains.intellij&quot;) version &quot;1.12.0&quot;\r\n        // gradle-changelog-plugin - read more: https://github.com/JetBrains/gradle-changelog-plugin\r\n        id(&quot;org.jetbrains.changelog&quot;) version &quot;1.3.0&quot;\r\n        // detekt linter - read more: https://detekt.github.io/detekt/gradle.html\r\n        id(&quot;io.gitlab.arturbosch.detekt&quot;) version &quot;1.17.1&quot;\r\n        // ktlint linter - read more: https://github.com/JLLeitschuh/ktlint-gradle\r\n        id(&quot;org.jlleitschuh.gradle.ktlint&quot;) version &quot;10.0.0&quot;\r\n    }\r\n\r\nWould you please no teach me how to deal with this error? I understand that I need to update the Grade, however how to do it with IntelliJ IDEA for current project?\r\n\r\nMy Project configuration is:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\n  [1]: https://i.stack.imgur.com/Z9p0b.png\r\n  [2]: https://i.stack.imgur.com/wkVvY.png","title":"How to deal with &quot;Failed to apply plugin &#39;org.jetbrains.intellij&#39;. Gradle IntelliJ Plugin requires Gradle X.X and higher&quot; error","body":"<p>My plugin is based on official Jet Brains template, however Java one, not Kotlin.</p>\n<p>When I opened my project, I got the error</p>\n<blockquote>\n<p>An exception occurred applying plugin request [id:\n'org.jetbrains.intellij', version: '1.12.0']\nFailed to apply plugin 'org.jetbrains.intellij'.\nGradle IntelliJ Plugin requires Gradle 7.3 and higher</p>\n</blockquote>\n<p>The dependencies in build.gradle.kts are</p>\n<pre><code>plugins {\n    // Java support\n    id(&quot;java&quot;)\n    // Kotlin support\n    id(&quot;org.jetbrains.kotlin.jvm&quot;) version &quot;1.7.10&quot;\n    // gradle-intellij-plugin - read more: https://github.com/JetBrains/gradle-intellij-plugin\n    id(&quot;org.jetbrains.intellij&quot;) version &quot;1.12.0&quot;\n    // gradle-changelog-plugin - read more: https://github.com/JetBrains/gradle-changelog-plugin\n    id(&quot;org.jetbrains.changelog&quot;) version &quot;1.3.0&quot;\n    // detekt linter - read more: https://detekt.github.io/detekt/gradle.html\n    id(&quot;io.gitlab.arturbosch.detekt&quot;) version &quot;1.17.1&quot;\n    // ktlint linter - read more: https://github.com/JLLeitschuh/ktlint-gradle\n    id(&quot;org.jlleitschuh.gradle.ktlint&quot;) version &quot;10.0.0&quot;\n}\n</code></pre>\n<p>Would you please no teach me how to deal with this error? I understand that I need to update the Grade, however how to do it with IntelliJ IDEA for current project?</p>\n<p>My Project configuration is:</p>\n<p><a href=\"https://i.stack.imgur.com/Z9p0b.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Z9p0b.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/wkVvY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wkVvY.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","spring-boot","security","spring-security"],"answers":[{"tags":[],"owner":{"account_id":3010530,"reputation":1,"user_id":2554175,"display_name":"sunjing21"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1676606514,"creation_date":1676606514,"answer_id":75480146,"question_id":75479807,"body_markdown":"you should look spring-security-lambda-dsl,add filter,add auth provider","title":"Spring Security Custom Auth Manager approach","body":"<p>you should look spring-security-lambda-dsl,add filter,add auth provider</p>\n"},{"tags":[],"owner":{"account_id":15272916,"reputation":630,"user_id":13018875,"display_name":"neofelis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676685976,"creation_date":1676685976,"answer_id":75490739,"question_id":75479807,"body_markdown":"You&#39;re right, this isn&#39;t a good way to do it. (It&#39;s great you noticed -- too few people care whether their code is idiomatic.)\r\n\r\nA better way would be to start by writing your own filter that actually just... does the authentication. You can extend `OncePerRequestFilter` rather than something more specific. That&#39;s what Spring Security itself does, both for basic authentication ([BasicAuthenticationFilter](https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/authentication/www/BasicAuthenticationFilter.html)) and for OAuth bearer tokens ([BearerTokenAuthenticationFilter](https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/oauth2/server/resource/web/BearerTokenAuthenticationFilter.html)). You may want to take a careful look at the [code](https://github.com/spring-projects/spring-security/blob/625a1cdca2a34b6de1154ceda52e0e1d893993da/oauth2/oauth2-resource-server/src/main/java/org/springframework/security/oauth2/server/resource/web/authentication/BearerTokenAuthenticationFilter.java) for `BearerTokenAuthenticationFilter` since the problem it solves is very similar to yours. (I wouldn&#39;t extend it, though, since it&#39;s very clearly intended to do OAuth specifically. I wouldn&#39;t straight up copy the code either -- it&#39;s fairly simple as Spring Security filters go but probably still does more than you need. Try to understand the code instead; that will help a lot with your understanding of Spring Security in general.)\r\n\r\nOkay, so you have a filter which looks a lot like `BearerTokenAuthenticationFilter`. That is, it contains an `AuthenticationManager` and its `doFilter` method consists of extracting the token from the request, passing that into the `AuthenticationManager` and then doing some `SecurityContext`-related stuff. Except, problem: `AuthenticationManager.authenticate()` expects an `Authentication`, not a String, and the token is a String.\r\n\r\nThe solution is to write a wrapper object for your token which implements `Authentication`. You can do this a couple of ways. Personally, what I&#39;d do is use two classes: one which you pass into `AuthenticationManager.authenticate()`, and one which you get back. So we have, say, `CustomTokenAuthenticationRequest implements Authentication` and `CustomTokenAuthentication implements Authentication`. Both are immutable. \r\n\r\n`CustomTokenAuthenticationRequest` basically just contains the token; its `isAuthenticated()` is `return false`, its `getPrincipal()` returns the token and its `getCredentials()` also returns the token. This is essentially what Spring Security itself does with [BearerTokenAuthenticationToken](https://github.com/spring-projects/spring-security/blob/625a1cdca2a34b6de1154ceda52e0e1d893993da/oauth2/oauth2-resource-server/src/main/java/org/springframework/security/oauth2/server/resource/authentication/BearerTokenAuthenticationToken.java).\r\n\r\n`CustomTokenAuthentication`, on the other hand, probably contains a `UserDetails` of some sort; its `isAuthenticated()` is `return true`, its `getName()` is a username or user id or something, etc.\r\n\r\nNow you need to teach the `AuthenticationManager` to authenticate `CustomTokenAuthenticationRequest`s. The way to do this isn&#39;t to implement `AuthenticationManager`, it&#39;s to implement `AuthenticationProvider`. So you write a class that looks roughly like\r\n\r\n```java\r\npublic class CustomTokenAuthenticationProvider implements AuthenticationProvider {\r\n  @Override\r\n  public Authentication authenticate(Authentication a) {\r\n    String token = ((CustomTokenAuthenticationRequest) a).getToken();\r\n    if (/* the token is valid */) {\r\n      CustomTokenAuthentication returnValue = // whatever you want it to be\r\n      return returnValue;\r\n    }\r\n    throw new BadCredentialsException(&quot;Invalid token&quot;);\r\n  }\r\n\r\n  @Override\r\n  public boolean supports(Class&lt;?&gt; authClass) {\r\n    return authClass == CustomTokenAuthenticationRequest.class;\r\n  }\r\n}\r\n```\r\n\r\nFinally, wire it all up. Add the authentication provider to your `HttpSecurity` using its `authenticationProvider()` method. (If you do this, and you don&#39;t change the default authentication manager configuration, `authenticationProvider()` results in your authentication provider getting added to an `AuthenticationManager` which Spring Security configures _for you_ -- an instance of `ProviderManager`.) Add the filter using `addFilterAt(BasicAuthenticationFilter.class)`. Also, don&#39;t call `httpBasic()` because this adds a `BasicAuthenticationFilter` which I am guessing you don&#39;t want. Or maybe you want basic authentication _and also_ your custom token authentication? But you didn&#39;t say that. If you do want both, you&#39;ll want to add your filter with `addFilterBefore` or `addFilterAfter`, and you need to think about ordering. Generally filter ordering is important in Spring Security.\r\n\r\nI glossed over a _lot_ of stuff here, barely gave you any code, and still wrote something of blog post length. Spring Security is very complex, and the thing you&#39;re trying to do isn&#39;t easily done in an idiomatic manner if you don&#39;t have much experience. I highly recommend just reading the Spring Security reference documentation from start to finish before you try implementing any of my suggestions. You&#39;ll also need to read quite a lot of Javadoc and tutorials and/or framework code. If there&#39;s something specific you want to follow up on I might respond to a comment, but I don&#39;t promise it; I had to do some research for this answer and have already spent more time on it than I planned to.","title":"Spring Security Custom Auth Manager approach","body":"<p>You're right, this isn't a good way to do it. (It's great you noticed -- too few people care whether their code is idiomatic.)</p>\n<p>A better way would be to start by writing your own filter that actually just... does the authentication. You can extend <code>OncePerRequestFilter</code> rather than something more specific. That's what Spring Security itself does, both for basic authentication (<a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/authentication/www/BasicAuthenticationFilter.html\" rel=\"nofollow noreferrer\">BasicAuthenticationFilter</a>) and for OAuth bearer tokens (<a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/oauth2/server/resource/web/BearerTokenAuthenticationFilter.html\" rel=\"nofollow noreferrer\">BearerTokenAuthenticationFilter</a>). You may want to take a careful look at the <a href=\"https://github.com/spring-projects/spring-security/blob/625a1cdca2a34b6de1154ceda52e0e1d893993da/oauth2/oauth2-resource-server/src/main/java/org/springframework/security/oauth2/server/resource/web/authentication/BearerTokenAuthenticationFilter.java\" rel=\"nofollow noreferrer\">code</a> for <code>BearerTokenAuthenticationFilter</code> since the problem it solves is very similar to yours. (I wouldn't extend it, though, since it's very clearly intended to do OAuth specifically. I wouldn't straight up copy the code either -- it's fairly simple as Spring Security filters go but probably still does more than you need. Try to understand the code instead; that will help a lot with your understanding of Spring Security in general.)</p>\n<p>Okay, so you have a filter which looks a lot like <code>BearerTokenAuthenticationFilter</code>. That is, it contains an <code>AuthenticationManager</code> and its <code>doFilter</code> method consists of extracting the token from the request, passing that into the <code>AuthenticationManager</code> and then doing some <code>SecurityContext</code>-related stuff. Except, problem: <code>AuthenticationManager.authenticate()</code> expects an <code>Authentication</code>, not a String, and the token is a String.</p>\n<p>The solution is to write a wrapper object for your token which implements <code>Authentication</code>. You can do this a couple of ways. Personally, what I'd do is use two classes: one which you pass into <code>AuthenticationManager.authenticate()</code>, and one which you get back. So we have, say, <code>CustomTokenAuthenticationRequest implements Authentication</code> and <code>CustomTokenAuthentication implements Authentication</code>. Both are immutable.</p>\n<p><code>CustomTokenAuthenticationRequest</code> basically just contains the token; its <code>isAuthenticated()</code> is <code>return false</code>, its <code>getPrincipal()</code> returns the token and its <code>getCredentials()</code> also returns the token. This is essentially what Spring Security itself does with <a href=\"https://github.com/spring-projects/spring-security/blob/625a1cdca2a34b6de1154ceda52e0e1d893993da/oauth2/oauth2-resource-server/src/main/java/org/springframework/security/oauth2/server/resource/authentication/BearerTokenAuthenticationToken.java\" rel=\"nofollow noreferrer\">BearerTokenAuthenticationToken</a>.</p>\n<p><code>CustomTokenAuthentication</code>, on the other hand, probably contains a <code>UserDetails</code> of some sort; its <code>isAuthenticated()</code> is <code>return true</code>, its <code>getName()</code> is a username or user id or something, etc.</p>\n<p>Now you need to teach the <code>AuthenticationManager</code> to authenticate <code>CustomTokenAuthenticationRequest</code>s. The way to do this isn't to implement <code>AuthenticationManager</code>, it's to implement <code>AuthenticationProvider</code>. So you write a class that looks roughly like</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CustomTokenAuthenticationProvider implements AuthenticationProvider {\n  @Override\n  public Authentication authenticate(Authentication a) {\n    String token = ((CustomTokenAuthenticationRequest) a).getToken();\n    if (/* the token is valid */) {\n      CustomTokenAuthentication returnValue = // whatever you want it to be\n      return returnValue;\n    }\n    throw new BadCredentialsException(&quot;Invalid token&quot;);\n  }\n\n  @Override\n  public boolean supports(Class&lt;?&gt; authClass) {\n    return authClass == CustomTokenAuthenticationRequest.class;\n  }\n}\n</code></pre>\n<p>Finally, wire it all up. Add the authentication provider to your <code>HttpSecurity</code> using its <code>authenticationProvider()</code> method. (If you do this, and you don't change the default authentication manager configuration, <code>authenticationProvider()</code> results in your authentication provider getting added to an <code>AuthenticationManager</code> which Spring Security configures <em>for you</em> -- an instance of <code>ProviderManager</code>.) Add the filter using <code>addFilterAt(BasicAuthenticationFilter.class)</code>. Also, don't call <code>httpBasic()</code> because this adds a <code>BasicAuthenticationFilter</code> which I am guessing you don't want. Or maybe you want basic authentication <em>and also</em> your custom token authentication? But you didn't say that. If you do want both, you'll want to add your filter with <code>addFilterBefore</code> or <code>addFilterAfter</code>, and you need to think about ordering. Generally filter ordering is important in Spring Security.</p>\n<p>I glossed over a <em>lot</em> of stuff here, barely gave you any code, and still wrote something of blog post length. Spring Security is very complex, and the thing you're trying to do isn't easily done in an idiomatic manner if you don't have much experience. I highly recommend just reading the Spring Security reference documentation from start to finish before you try implementing any of my suggestions. You'll also need to read quite a lot of Javadoc and tutorials and/or framework code. If there's something specific you want to follow up on I might respond to a comment, but I don't promise it; I had to do some research for this answer and have already spent more time on it than I planned to.</p>\n"}],"owner":{"account_id":27803235,"reputation":21,"user_id":21227277,"display_name":"univ27all"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":956,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":75490739,"answer_count":2,"score":1,"last_activity_date":1676685976,"creation_date":1676601761,"question_id":75479807,"body_markdown":"I would like to access the http request, specifically auth header in AuthenticationManager.authenticate() context. \r\n\r\nRequirement is to authenticate a custom token. There is an external library which does that and so I don&#39;t have the luxury to read out principal from the token. Hence, in the custom filter, I am returning the full token in the getPreAuthenticatedPrincipal() method. This seems borderline incorrect and I would like to not pass the token pretending it to be principal.\r\n\r\nIs there any way I can get it without violating any framework constraints? \r\nOr is there a better way to handle the scenario which I&#39;m trying to achieve?\r\n\r\nHere&#39;s the config class:\r\n\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity(debug = true)\r\n@EnableGlobalMethodSecurity(securedEnabled = true)\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    protected void configure(HttpSecurity httpSecurity) throws Exception{\r\n\r\n        CustomTokenFilter customTokenFilter = new CustomTokenFilter();\r\n        customTokenFilter.setAuthenticationManager(new CustomAuthenticationMgr());\r\n\r\n        httpSecurity\r\n                 // csrf etc etc\r\n                .addFilter(customTokenFilter)\r\n                .authorizeRequests()\r\n                .mvcMatchers(&quot;/users/**&quot;)\r\n                .authenticated()\r\n                .and()\r\n                .authorizeRequests()\r\n                .mvcMatchers(&quot;/other-api/**&quot;)\r\n                .permitAll()\r\n                .and()\r\n                .httpBasic();\r\n    }\r\n```\r\n\r\nHere&#39;s the custom token filter class:\r\n\r\n\r\n```\r\npublic class CustomTokenFilter extends AbstractPreAuthenticatedProcessingFilter {\r\n    @Override\r\n    protected Object getPreAuthenticatedPrincipal(HttpServletRequest request) {\r\n        String authorization = request.getHeader(&quot;authorization&quot;);\r\n\r\n        if(authorization.indexOf(&quot;Custom&quot;) == 0){\r\n            return Map.of(&quot;Custom&quot;,authorization.split(&quot; &quot;)[1]);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    protected Object getPreAuthenticatedCredentials(HttpServletRequest request) {\r\n        return &quot;&quot;;\r\n    }\r\n}\r\n```\r\nAnd finally, the custom authentication manager class:\r\n\r\n\r\n```\r\npublic class CustomAuthenticationMgr implements AuthenticationManager {\r\n    @Override\r\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\r\n\r\n        Map&lt;String,String&gt; map = (Map) authentication.getPrincipal();\r\n        String token = map.get(&quot;Custom&quot;);\r\n\r\n        // Custom validation - checking length here just to simplify\r\n        if(token.length() &gt; 0)\r\n            authentication.setAuthenticated(true);\r\n\r\n        return authentication;\r\n    }\r\n}\r\n```\r\n\r\n**Version**: Spring Boot 2.6.7 (transitive: spring-core 5.3.19)\r\n\r\n**Constraints**: Cannot upgrade to other versions at the moment\r\n\r\nThanks in advance!\r\n","title":"Spring Security Custom Auth Manager approach","body":"<p>I would like to access the http request, specifically auth header in AuthenticationManager.authenticate() context.</p>\n<p>Requirement is to authenticate a custom token. There is an external library which does that and so I don't have the luxury to read out principal from the token. Hence, in the custom filter, I am returning the full token in the getPreAuthenticatedPrincipal() method. This seems borderline incorrect and I would like to not pass the token pretending it to be principal.</p>\n<p>Is there any way I can get it without violating any framework constraints?\nOr is there a better way to handle the scenario which I'm trying to achieve?</p>\n<p>Here's the config class:</p>\n<pre><code>@Configuration\n@EnableWebSecurity(debug = true)\n@EnableGlobalMethodSecurity(securedEnabled = true)\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    protected void configure(HttpSecurity httpSecurity) throws Exception{\n\n        CustomTokenFilter customTokenFilter = new CustomTokenFilter();\n        customTokenFilter.setAuthenticationManager(new CustomAuthenticationMgr());\n\n        httpSecurity\n                 // csrf etc etc\n                .addFilter(customTokenFilter)\n                .authorizeRequests()\n                .mvcMatchers(&quot;/users/**&quot;)\n                .authenticated()\n                .and()\n                .authorizeRequests()\n                .mvcMatchers(&quot;/other-api/**&quot;)\n                .permitAll()\n                .and()\n                .httpBasic();\n    }\n</code></pre>\n<p>Here's the custom token filter class:</p>\n<pre><code>public class CustomTokenFilter extends AbstractPreAuthenticatedProcessingFilter {\n    @Override\n    protected Object getPreAuthenticatedPrincipal(HttpServletRequest request) {\n        String authorization = request.getHeader(&quot;authorization&quot;);\n\n        if(authorization.indexOf(&quot;Custom&quot;) == 0){\n            return Map.of(&quot;Custom&quot;,authorization.split(&quot; &quot;)[1]);\n        }\n        return null;\n    }\n\n    @Override\n    protected Object getPreAuthenticatedCredentials(HttpServletRequest request) {\n        return &quot;&quot;;\n    }\n}\n</code></pre>\n<p>And finally, the custom authentication manager class:</p>\n<pre><code>public class CustomAuthenticationMgr implements AuthenticationManager {\n    @Override\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\n\n        Map&lt;String,String&gt; map = (Map) authentication.getPrincipal();\n        String token = map.get(&quot;Custom&quot;);\n\n        // Custom validation - checking length here just to simplify\n        if(token.length() &gt; 0)\n            authentication.setAuthenticated(true);\n\n        return authentication;\n    }\n}\n</code></pre>\n<p><strong>Version</strong>: Spring Boot 2.6.7 (transitive: spring-core 5.3.19)</p>\n<p><strong>Constraints</strong>: Cannot upgrade to other versions at the moment</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","json"],"owner":{"account_id":25041781,"reputation":1,"user_id":18898581,"display_name":"Taras"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676685804,"creation_date":1676685463,"question_id":75490716,"body_markdown":"Im trying to add jsonObject to an existing JSON file in &quot;raw&quot; folder. \r\n\r\nEvery time the button pressed it should add to the JSON file two new variables from the plainText input. I cant figure out how to do that because I cant properly get the path of the &quot;raw&quot; folder. \r\n\r\nthe code that I wrote without the &quot;adding to JSON&quot; part\r\n\r\n     public void submit(View view) {\r\n        EditText editAmount;\r\n        EditText editReason;\r\n\r\n        Log.d(&quot;Smth&quot;, &quot;Submit!&quot;);\r\n\r\n        editAmount = (EditText)findViewById(R.id.editAmount);\r\n        editReason = (EditText)findViewById(R.id.editReason);\r\n\r\n        String amount = editAmount.getText().toString();\r\n        String date = &quot;18.02.2023&quot;;\r\n        String reason = editReason.getText().toString();\r\n\r\n        Log.d(&quot;Smth&quot;, amount);\r\n        Log.d(&quot;Smth&quot;, reason);\r\n\r\n        try {\r\n            JSONObject jsonObject = new JSONObject();\r\n\r\n            jsonObject.put(&quot;amount&quot;, amount);\r\n            jsonObject.put(&quot;reason&quot;, reason);\r\n            jsonObject.put(&quot;date&quot;, &quot;18.02.2023&quot;);\r\n\r\n        } catch (JSONException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n\r\nI have tried a lot of other solutions on StackOverFlow, but all of them give me errors.\r\n\r\nI hope you will help me with this problem of editing JSON file) Thank you","title":"How to add jsonObject to an existing JSON file in the &quot;raw&quot; folder Android Studio? (Java)","body":"<p>Im trying to add jsonObject to an existing JSON file in &quot;raw&quot; folder.</p>\n<p>Every time the button pressed it should add to the JSON file two new variables from the plainText input. I cant figure out how to do that because I cant properly get the path of the &quot;raw&quot; folder.</p>\n<p>the code that I wrote without the &quot;adding to JSON&quot; part</p>\n<pre><code> public void submit(View view) {\n    EditText editAmount;\n    EditText editReason;\n\n    Log.d(&quot;Smth&quot;, &quot;Submit!&quot;);\n\n    editAmount = (EditText)findViewById(R.id.editAmount);\n    editReason = (EditText)findViewById(R.id.editReason);\n\n    String amount = editAmount.getText().toString();\n    String date = &quot;18.02.2023&quot;;\n    String reason = editReason.getText().toString();\n\n    Log.d(&quot;Smth&quot;, amount);\n    Log.d(&quot;Smth&quot;, reason);\n\n    try {\n        JSONObject jsonObject = new JSONObject();\n\n        jsonObject.put(&quot;amount&quot;, amount);\n        jsonObject.put(&quot;reason&quot;, reason);\n        jsonObject.put(&quot;date&quot;, &quot;18.02.2023&quot;);\n\n    } catch (JSONException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<p>I have tried a lot of other solutions on StackOverFlow, but all of them give me errors.</p>\n<p>I hope you will help me with this problem of editing JSON file) Thank you</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1676683585,"post_id":75490570,"comment_id":133193269,"body_markdown":"I don&#39;t think you want to use `startsWith` here.  For example, `&quot;1.11.0&quot;` starts with `&quot;1.1&quot;`, but I don&#39;t think you want to mark `&quot;1.11.0&quot;` as accepted when `&quot;1.1&quot;` is in the list.  A better algorithm might be to check separately whether the provided value is in the list, and then check whether everything up to the last decimal point is in the list.  I&#39;m happy to provide an answer if you can&#39;t work this out for yourself.","body":"I don&#39;t think you want to use <code>startsWith</code> here.  For example, <code>&quot;1.11.0&quot;</code> starts with <code>&quot;1.1&quot;</code>, but I don&#39;t think you want to mark <code>&quot;1.11.0&quot;</code> as accepted when <code>&quot;1.1&quot;</code> is in the list.  A better algorithm might be to check separately whether the provided value is in the list, and then check whether everything up to the last decimal point is in the list.  I&#39;m happy to provide an answer if you can&#39;t work this out for yourself."}],"answers":[{"tags":[],"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1676683020,"creation_date":1676683020,"answer_id":75490573,"question_id":75490570,"body_markdown":"You can use `Stream#anyMatch` to check if the input starts with any of the values in the `List`.\r\n\r\n```java\r\nreturn acceptedVersions.stream().anyMatch(version::startsWith);\r\n```","title":"How to use startsWith and contains within a List of String","body":"<p>You can use <code>Stream#anyMatch</code> to check if the input starts with any of the values in the <code>List</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>return acceptedVersions.stream().anyMatch(version::startsWith);\n</code></pre>\n"}],"owner":{"account_id":27438952,"reputation":43,"user_id":20934246,"display_name":"Repins Star"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75490573,"answer_count":1,"score":0,"last_activity_date":1676683020,"creation_date":1676682886,"question_id":75490570,"body_markdown":"i have this implementation that I need to check whether the version with x.x.x format is accepted based on accepted version in the list with just a format of x.x.\r\n\r\nFor example, if 1.3 is in the accepted version list. then 1.3.1, 1.3.2 or simply 1.3.x is accepted. As if 1.2 is not in the list then 1.2.x is not accepted.\r\n\r\n     @Test \r\n     public test() {\r\n         Assert.assertTrue(isVersionAccepted(&quot;1.3.2&quot;));\r\n         Assert.assertFalse(isVersionAccepted(&quot;1.2.1&quot;));\r\n     }\r\n    \r\n     public static boolean isVersionAccepted(String version) {\r\n            List&lt;String&gt; acceptedVersions = Arrays.asList(&quot;1.1&quot;, &quot;1.3&quot;, &quot;1.5&quot;, &quot;2.5&quot;, &quot;2.7&quot;, &quot;3.1&quot;, &quot;3.2&quot;);\r\n             \r\n           // process\r\n            \r\n     }","title":"How to use startsWith and contains within a List of String","body":"<p>i have this implementation that I need to check whether the version with x.x.x format is accepted based on accepted version in the list with just a format of x.x.</p>\n<p>For example, if 1.3 is in the accepted version list. then 1.3.1, 1.3.2 or simply 1.3.x is accepted. As if 1.2 is not in the list then 1.2.x is not accepted.</p>\n<pre><code> @Test \n public test() {\n     Assert.assertTrue(isVersionAccepted(&quot;1.3.2&quot;));\n     Assert.assertFalse(isVersionAccepted(&quot;1.2.1&quot;));\n }\n\n public static boolean isVersionAccepted(String version) {\n        List&lt;String&gt; acceptedVersions = Arrays.asList(&quot;1.1&quot;, &quot;1.3&quot;, &quot;1.5&quot;, &quot;2.5&quot;, &quot;2.7&quot;, &quot;3.1&quot;, &quot;3.2&quot;);\n         \n       // process\n        \n }\n</code></pre>\n"},{"tags":["java","arrays","for-loop","local-variables","private-methods"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1676681491,"creation_date":1676681491,"answer_id":75490473,"question_id":75490388,"body_markdown":"&gt; ```java\r\n&gt; for (int i : valueArr) {\r\n&gt;  .... CODE HERE ...\r\n&gt; }\r\n&gt; ```\r\n\r\nThis sets up a loop which will run `CODE HERE` a certain number of times. Inside this loop, at the start of every loop, an entirely new variable is created named `i`, containing one of the values in `valueArr`. _Once the loop ends this variable __is destroyed___. Notably, `i` is _not_ directly the value in `valueArr` - modifying it __does nothing__ - other than affect this one loop if you use `i` later in within the block. It _does not_ modify the contents of `valueArr`.\r\n\r\nHence why you get the warning: `i = -1` does nothing - you change what `i` is, and then the loop ends, which means `i` __goes away__ and your code hasn&#39;t changed anything or done anything, which surely you didn&#39;t intend. Hence, warning.\r\n\r\nIt&#39;s not entirely clear what you want to do here. If you intend to set all values in `valueArr` to -1, you want:\r\n\r\n```\r\nfor (int i = 0; i &lt; valueArr.length; i++) valueArr[i] = -1;\r\n```\r\n\r\nOr, actually, you can do that more simply:\r\n\r\n```\r\nArrays.fill(valueArr, -1);\r\n```\r\n\r\n`valueArr[i] = -1` changes the value of the `i`-th value in the `valueArr` array to `-1`. `for (int i : valueArr) i = -1;` does _nothing_.\r\n","title":"Variable in for loop is giving a message that &quot;The value of the local variable i is not used&quot;","body":"<blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i : valueArr) {\n .... CODE HERE ...\n}\n</code></pre>\n</blockquote>\n<p>This sets up a loop which will run <code>CODE HERE</code> a certain number of times. Inside this loop, at the start of every loop, an entirely new variable is created named <code>i</code>, containing one of the values in <code>valueArr</code>. <em>Once the loop ends this variable <strong>is destroyed</strong></em>. Notably, <code>i</code> is <em>not</em> directly the value in <code>valueArr</code> - modifying it <strong>does nothing</strong> - other than affect this one loop if you use <code>i</code> later in within the block. It <em>does not</em> modify the contents of <code>valueArr</code>.</p>\n<p>Hence why you get the warning: <code>i = -1</code> does nothing - you change what <code>i</code> is, and then the loop ends, which means <code>i</code> <strong>goes away</strong> and your code hasn't changed anything or done anything, which surely you didn't intend. Hence, warning.</p>\n<p>It's not entirely clear what you want to do here. If you intend to set all values in <code>valueArr</code> to -1, you want:</p>\n<pre><code>for (int i = 0; i &lt; valueArr.length; i++) valueArr[i] = -1;\n</code></pre>\n<p>Or, actually, you can do that more simply:</p>\n<pre><code>Arrays.fill(valueArr, -1);\n</code></pre>\n<p><code>valueArr[i] = -1</code> changes the value of the <code>i</code>-th value in the <code>valueArr</code> array to <code>-1</code>. <code>for (int i : valueArr) i = -1;</code> does <em>nothing</em>.</p>\n"}],"owner":{"account_id":16929446,"reputation":7,"user_id":12244159,"display_name":"Ozakriid"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":75490473,"answer_count":1,"score":-2,"last_activity_date":1676681491,"creation_date":1676680348,"question_id":75490388,"body_markdown":"I wrote a for loop that is supposed to determine if there is user input. If there is, it sets the 6 elements of `int[] valueArr` to the input, a vararg `int[] statValue`. If there is no input, it sets all elements equal to -1.\r\n\r\n```\r\nif (statValue.length == 6) {\r\n    for (int i = 0; i &lt; 6; i++) {\r\n        valueArr[i] = statValue[i];\r\n    }\r\n\r\n} else {\r\n    for (int i : valueArr) {\r\n        i = -1;\r\n    }\r\n}\r\n```\r\n\r\nI am using Visual Studio Code, and it is giving me a message in `for (int i : valueArr)` :\r\n\r\n&gt; &quot;The value of the local variable i is not used.&quot;\r\n\r\nThat particular for loop syntax is still new to me, so I may be very well blind, but it was working in another file:\r\n\r\n```\r\nfor(int i : rollResults) {\r\n    sum = sum + i;\r\n}\r\n```\r\n\r\nI feel that I should also mention that the for loop giving me trouble is in a `private void` method. I&#39;m still fairly new and just recently started using private methods. I noticed the method would give the same message when not used elsewhere, but I do not see why it would appear here.\r\n\r\nI tried closing and reopening Visual Studio Code, deleting and retyping the code, and other forms of that. In my short experience, I&#39;ve had times where I received errors and messages that should not be there and fixed them with what I mentioned, but none of that worked here.","title":"Variable in for loop is giving a message that &quot;The value of the local variable i is not used&quot;","body":"<p>I wrote a for loop that is supposed to determine if there is user input. If there is, it sets the 6 elements of <code>int[] valueArr</code> to the input, a vararg <code>int[] statValue</code>. If there is no input, it sets all elements equal to -1.</p>\n<pre><code>if (statValue.length == 6) {\n    for (int i = 0; i &lt; 6; i++) {\n        valueArr[i] = statValue[i];\n    }\n\n} else {\n    for (int i : valueArr) {\n        i = -1;\n    }\n}\n</code></pre>\n<p>I am using Visual Studio Code, and it is giving me a message in <code>for (int i : valueArr)</code> :</p>\n<blockquote>\n<p>&quot;The value of the local variable i is not used.&quot;</p>\n</blockquote>\n<p>That particular for loop syntax is still new to me, so I may be very well blind, but it was working in another file:</p>\n<pre><code>for(int i : rollResults) {\n    sum = sum + i;\n}\n</code></pre>\n<p>I feel that I should also mention that the for loop giving me trouble is in a <code>private void</code> method. I'm still fairly new and just recently started using private methods. I noticed the method would give the same message when not used elsewhere, but I do not see why it would appear here.</p>\n<p>I tried closing and reopening Visual Studio Code, deleting and retyping the code, and other forms of that. In my short experience, I've had times where I received errors and messages that should not be there and fixed them with what I mentioned, but none of that worked here.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1676679580,"post_id":75490311,"comment_id":133192866,"body_markdown":"I fixed your example code formatting. In the future, either indent all lines by 4 spaces, *or* wrap in a pair of triple back-ticks.","body":"I fixed your example code formatting. In the future, either indent all lines by 4 spaces, <i>or</i> wrap in a pair of triple back-ticks."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676680529,"creation_date":1676680529,"answer_id":75490403,"question_id":75490311,"body_markdown":"By calling `str.split(` inside your `for` loop, you are needlessly splitting the entire string over and over again. This is awkward. \r\n\r\nFirst [split][1] on spaces. \r\n\r\n    String[] words = input.split( &quot; &quot; ) ;\r\n    int countWords = words.length ;\r\n\r\nLoop that array to do your analysis. Start by [stripping][2] away [whitespace][3].\r\n\r\n    for( String word : words ) \r\n    {\r\n        String w = word.strip() ;\r\n        …\r\n    }\r\n\r\nTo work with individual characters, avoid `char`. That 16-bit value is physically incapable of representing most characters. Instead, use [code point][4] integer numbers. \r\n\r\nFor each word, get the code point integers assigned by the Unicode Consortium to each of the characters in your string. \r\n\r\n    int[] codePoints = w.codePoints().toArray();\r\n\r\nLoop those code points. Ask if the code point is a digit or a letter. If neither, let&#39;s count that too.\r\n\r\n```java\r\n{\r\n    if ( Character.isLetter( codePoint ) ) { countLetters++; }\r\n    else if ( Character.isDigit( codePoint ) ) { countDigits++; }\r\n    else countOther++ ;\r\n}\r\n```\r\n\r\nPull all that code together.\r\n\r\n```java\r\npackage work.basil.example.text;\r\n\r\nimport java.util.Arrays;\r\n\r\npublic class Words\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        Words app = new Words();\r\n        app.demo();\r\n    }\r\n\r\n    private void demo ( )\r\n    {\r\n        String input = &quot;Testing, testing, 1, 2, 3.&quot;;\r\n\r\n        String[] words = input.split( &quot; &quot; );\r\n        int countWords = words.length;\r\n        System.out.println( &quot;Arrays.toString( words ) = &quot; + Arrays.toString( words ) );\r\n\r\n        int countLetters = 0;\r\n        int countDigits = 0;\r\n        int countOther = 0;  // Punctuation, etc.\r\n        for ( String word : words )\r\n        {\r\n            String w = word.strip();\r\n            int[] codePoints = w.codePoints().toArray();\r\n            for ( int codePoint : codePoints )\r\n            {\r\n                if ( Character.isLetter( codePoint ) ) { countLetters++; }\r\n                else if ( Character.isDigit( codePoint ) ) { countDigits++; }\r\n                else { countOther++; }\r\n            }\r\n        }\r\n\r\n        System.out.println( &quot;countWords = &quot; + countWords );\r\n        System.out.println( &quot;countLetters = &quot; + countLetters );\r\n        System.out.println( &quot;countDigits = &quot; + countDigits );\r\n        System.out.println( &quot;countOther = &quot; + countOther );\r\n    }\r\n}\r\n```\r\n\r\nWhen run.\r\n\r\n```none\r\nArrays.toString( words ) = [Testing,, testing,, 1,, 2,, 3.]\r\ncountWords = 5\r\ncountLetters = 14\r\ncountDigits = 3\r\ncountOther = 5\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/String.html#split(java.lang.String)\r\n  [2]: https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/String.html#strip()\r\n  [3]: https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Character.html#isWhitespace(int)\r\n  [4]: https://en.wikipedia.org/wiki/Code_point","title":"how do i count words of an String input if i have already counted letters and numbers using Charact method, also count characters i have com this far?","body":"<p>By calling <code>str.split(</code> inside your <code>for</code> loop, you are needlessly splitting the entire string over and over again. This is awkward.</p>\n<p>First <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/String.html#split(java.lang.String)\" rel=\"nofollow noreferrer\">split</a> on spaces.</p>\n<pre><code>String[] words = input.split( &quot; &quot; ) ;\nint countWords = words.length ;\n</code></pre>\n<p>Loop that array to do your analysis. Start by <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/String.html#strip()\" rel=\"nofollow noreferrer\">stripping</a> away <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Character.html#isWhitespace(int)\" rel=\"nofollow noreferrer\">whitespace</a>.</p>\n<pre><code>for( String word : words ) \n{\n    String w = word.strip() ;\n    …\n}\n</code></pre>\n<p>To work with individual characters, avoid <code>char</code>. That 16-bit value is physically incapable of representing most characters. Instead, use <a href=\"https://en.wikipedia.org/wiki/Code_point\" rel=\"nofollow noreferrer\">code point</a> integer numbers.</p>\n<p>For each word, get the code point integers assigned by the Unicode Consortium to each of the characters in your string.</p>\n<pre><code>int[] codePoints = w.codePoints().toArray();\n</code></pre>\n<p>Loop those code points. Ask if the code point is a digit or a letter. If neither, let's count that too.</p>\n<pre class=\"lang-java prettyprint-override\"><code>{\n    if ( Character.isLetter( codePoint ) ) { countLetters++; }\n    else if ( Character.isDigit( codePoint ) ) { countDigits++; }\n    else countOther++ ;\n}\n</code></pre>\n<p>Pull all that code together.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.text;\n\nimport java.util.Arrays;\n\npublic class Words\n{\n    public static void main ( String[] args )\n    {\n        Words app = new Words();\n        app.demo();\n    }\n\n    private void demo ( )\n    {\n        String input = &quot;Testing, testing, 1, 2, 3.&quot;;\n\n        String[] words = input.split( &quot; &quot; );\n        int countWords = words.length;\n        System.out.println( &quot;Arrays.toString( words ) = &quot; + Arrays.toString( words ) );\n\n        int countLetters = 0;\n        int countDigits = 0;\n        int countOther = 0;  // Punctuation, etc.\n        for ( String word : words )\n        {\n            String w = word.strip();\n            int[] codePoints = w.codePoints().toArray();\n            for ( int codePoint : codePoints )\n            {\n                if ( Character.isLetter( codePoint ) ) { countLetters++; }\n                else if ( Character.isDigit( codePoint ) ) { countDigits++; }\n                else { countOther++; }\n            }\n        }\n\n        System.out.println( &quot;countWords = &quot; + countWords );\n        System.out.println( &quot;countLetters = &quot; + countLetters );\n        System.out.println( &quot;countDigits = &quot; + countDigits );\n        System.out.println( &quot;countOther = &quot; + countOther );\n    }\n}\n</code></pre>\n<p>When run.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Arrays.toString( words ) = [Testing,, testing,, 1,, 2,, 3.]\ncountWords = 5\ncountLetters = 14\ncountDigits = 3\ncountOther = 5\n</code></pre>\n"}],"owner":{"account_id":27716543,"reputation":1,"user_id":21158127,"display_name":"gone4-1000"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676680529,"creation_date":1676679090,"question_id":75490311,"body_markdown":"```java\r\npackage Shak;\r\n\r\nimport java.util.Iterator;\r\nimport java.util.Scanner;\r\n\r\npublic class Lesseon {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\tString str = sc.nextLine();\r\n\r\n\t\tSystem.out.println(str.length());\r\n\t\tint charc = 0;\r\n\t\tint numbers = 0;\r\n\t\tint alphabets = 0;\r\n\t\tint words = 0;\r\n\t\tfor (int i = 0; i &lt; str.length(); i++) {\r\n\t\t\tif (Character.isLetter(str.charAt(i))) {\r\n\t\t\t\talphabets++;\r\n\r\n\t\t\t}\r\n\t\t\tif (Character.isDigit(str.charAt(i))) {\r\n\t\t\t\tnumbers++;\r\n\r\n\t\t\t}\r\n\t\t\tstr.split(&quot;\\\\s++&quot;); //trying to split to remove the white space and then `your text`count the characters \r\n\t\t\tif (str.length()&lt;0) {\r\n\t\t\t\tcharc= (alphabets+numbers)-str.length();\r\n\t\t\t}\r\n\t\t\telse {\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tSystem.out.println(alphabets);\r\n\t\tSystem.out.println(numbers);\r\n\t\tSystem.out.println(charc);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nI thought spliting would remove the white spaces and then i coud use my alphabet counter and number together minus the lenght and would get the odd characters, i have no idea how to count the words","title":"how do i count words of an String input if i have already counted letters and numbers using Charact method, also count characters i have com this far?","body":"<pre class=\"lang-java prettyprint-override\"><code>package Shak;\n\nimport java.util.Iterator;\nimport java.util.Scanner;\n\npublic class Lesseon {\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        String str = sc.nextLine();\n\n        System.out.println(str.length());\n        int charc = 0;\n        int numbers = 0;\n        int alphabets = 0;\n        int words = 0;\n        for (int i = 0; i &lt; str.length(); i++) {\n            if (Character.isLetter(str.charAt(i))) {\n                alphabets++;\n\n            }\n            if (Character.isDigit(str.charAt(i))) {\n                numbers++;\n\n            }\n            str.split(&quot;\\\\s++&quot;); //trying to split to remove the white space and then `your text`count the characters \n            if (str.length()&lt;0) {\n                charc= (alphabets+numbers)-str.length();\n            }\n            else {\n\n            }\n\n        }\n\n        System.out.println(alphabets);\n        System.out.println(numbers);\n        System.out.println(charc);\n    }\n\n}\n</code></pre>\n<p>I thought spliting would remove the white spaces and then i coud use my alphabet counter and number together minus the lenght and would get the odd characters, i have no idea how to count the words</p>\n"},{"tags":["java","file"],"comments":[{"owner":{"account_id":5120989,"reputation":6044,"user_id":4104555,"display_name":"ProgrammersBlock"},"score":0,"creation_date":1676680125,"post_id":75490310,"comment_id":133192917,"body_markdown":"Could you try adding System.out.println(&quot;Position:&quot; + i + &quot; Line &#39;&quot; + line.charAt(i) + &quot;&#39; LineToAdd &#39;&quot; + lineToAdd.charAt(i) + &quot;&#39;&quot;);  above the &quot;variable changed&quot;?","body":"Could you try adding System.out.println(&quot;Position:&quot; + i + &quot; Line &#39;&quot; + line.charAt(i) + &quot;&#39; LineToAdd &#39;&quot; + lineToAdd.charAt(i) + &quot;&#39;&quot;);  above the &quot;variable changed&quot;?"},{"owner":{"account_id":26162526,"reputation":11,"user_id":19848808,"display_name":"Abriel "},"score":0,"creation_date":1676681326,"post_id":75490310,"comment_id":133193036,"body_markdown":"@ProgrammersBlock Thank you, using that console log actually helped me find the error. My approach for this method was bad because after each line of the txt file got scanned it would check if that individual line is the duplicate, and if it was, it would still move on to check to the next line. Then since the next line was not a duplicate, the SongAlreadyExists variable was changed to false, completely disregarding the previous lines.","body":"@ProgrammersBlock Thank you, using that console log actually helped me find the error. My approach for this method was bad because after each line of the txt file got scanned it would check if that individual line is the duplicate, and if it was, it would still move on to check to the next line. Then since the next line was not a duplicate, the SongAlreadyExists variable was changed to false, completely disregarding the previous lines."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1676712034,"post_id":75490310,"comment_id":133195692,"body_markdown":"Watch your [naming](https://technojeeves.com/index.php/aliasjava1/106-java-style-conventions)\n- your code is hard to read as a result","body":"Watch your <a href=\"https://technojeeves.com/index.php/aliasjava1/106-java-style-conventions\" rel=\"nofollow noreferrer\">naming</a> - your code is hard to read as a result"}],"owner":{"account_id":26162526,"reputation":11,"user_id":19848808,"display_name":"Abriel "},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676679078,"creation_date":1676679078,"question_id":75490310,"body_markdown":"This method is supposed to add a song&#39;s information to a txt file, but first it needs to check if a song with the same name and artist already exists. \r\n\r\n```\r\nstatic void addSong(Song song){\r\n        Boolean SongAlreadyExists = true;\r\n\r\n        // variable is to compare if song already exists char by char up to artist\r\n        String lineToAdd = &quot;NAME:&quot; + song.name + &quot;|ARTIST:&quot; + song.artist;\r\n        \r\n        try {\r\n            FileReader fReader = new FileReader(&quot;songs.txt&quot;);\r\n            BufferedReader bReader = new BufferedReader(fReader);\r\n            String line;             \r\n\r\n            while((line = bReader.readLine()) != null){\r\n                for (int i=0; i &lt; lineToAdd.length(); i++){\r\n                    if (line.charAt(i) != lineToAdd.charAt(i)){\r\n                        SongAlreadyExists = false;\r\n                        System.out.println(&quot;variable changed&quot;);\r\n                    }\r\n                }\r\n            }\r\n            bReader.close();\r\n            fReader.close();\r\n\r\n        } catch (IOException exception){\r\n            System.out.println(&quot;file not found&quot;);\r\n        }\r\n\r\n        //add song to the text file with all songs if song doesnt exist        \r\n        if (! (SongAlreadyExists)){\r\n           System.out.println(&quot;Adding song&quot;);\r\n            try {\r\n                FileWriter fileWriter = new FileWriter(&quot;songs.txt&quot;, true);\r\n                fileWriter.write(&quot;\\nNAME:&quot; + song.name + &quot;|ARTIST:&quot; + song.artist + &quot;|ALBUM:&quot; + song.album + &quot;|YEAR:&quot; + song.year + &quot;|&quot;);\r\n                fileWriter.close();\r\n            } catch (Exception exception){\r\n                System.out.println(&quot;error&quot;);\r\n            }\r\n        }\r\n\r\n```\r\n\r\nAnd this is the data in the txt file using the same data from the object I am testing\r\n```\r\nNAME:TestName|ARTIST:TestArtist|ALBUM:TestAlbum|YEAR:2005|\r\n```\r\n\r\nFor some reason I keep running the code with the same test song object and it keeps saying that a duplicate does not exist, but in the text file I clearly see the duplicates being added. In the console, the &quot;variable changed&quot; keeps getting outputted multiple times every time even though it is the same test object being used. How can I check if the information of an object is already stored in a txt file?","title":"Having trouble comparing a Java string with a line from a txt file","body":"<p>This method is supposed to add a song's information to a txt file, but first it needs to check if a song with the same name and artist already exists.</p>\n<pre><code>static void addSong(Song song){\n        Boolean SongAlreadyExists = true;\n\n        // variable is to compare if song already exists char by char up to artist\n        String lineToAdd = &quot;NAME:&quot; + song.name + &quot;|ARTIST:&quot; + song.artist;\n        \n        try {\n            FileReader fReader = new FileReader(&quot;songs.txt&quot;);\n            BufferedReader bReader = new BufferedReader(fReader);\n            String line;             \n\n            while((line = bReader.readLine()) != null){\n                for (int i=0; i &lt; lineToAdd.length(); i++){\n                    if (line.charAt(i) != lineToAdd.charAt(i)){\n                        SongAlreadyExists = false;\n                        System.out.println(&quot;variable changed&quot;);\n                    }\n                }\n            }\n            bReader.close();\n            fReader.close();\n\n        } catch (IOException exception){\n            System.out.println(&quot;file not found&quot;);\n        }\n\n        //add song to the text file with all songs if song doesnt exist        \n        if (! (SongAlreadyExists)){\n           System.out.println(&quot;Adding song&quot;);\n            try {\n                FileWriter fileWriter = new FileWriter(&quot;songs.txt&quot;, true);\n                fileWriter.write(&quot;\\nNAME:&quot; + song.name + &quot;|ARTIST:&quot; + song.artist + &quot;|ALBUM:&quot; + song.album + &quot;|YEAR:&quot; + song.year + &quot;|&quot;);\n                fileWriter.close();\n            } catch (Exception exception){\n                System.out.println(&quot;error&quot;);\n            }\n        }\n\n</code></pre>\n<p>And this is the data in the txt file using the same data from the object I am testing</p>\n<pre><code>NAME:TestName|ARTIST:TestArtist|ALBUM:TestAlbum|YEAR:2005|\n</code></pre>\n<p>For some reason I keep running the code with the same test song object and it keeps saying that a duplicate does not exist, but in the text file I clearly see the duplicates being added. In the console, the &quot;variable changed&quot; keeps getting outputted multiple times every time even though it is the same test object being used. How can I check if the information of an object is already stored in a txt file?</p>\n"},{"tags":["java","android","string","textview"],"comments":[{"owner":{"account_id":7006298,"reputation":2021,"user_id":5370550,"accept_rate":22,"display_name":"Nik"},"score":0,"creation_date":1521106650,"post_id":49295758,"comment_id":85593795,"body_markdown":"You can take two different textview and set first textview gravity to center","body":"You can take two different textview and set first textview gravity to center"},{"owner":{"account_id":5212777,"reputation":20542,"user_id":4168607,"accept_rate":28,"display_name":"ADM"},"score":0,"creation_date":1521106798,"post_id":49295758,"comment_id":85593906,"body_markdown":"If this is the only case then you can use Two `TextView` for it . If this can multiple times like a paragraph then you should go with `HTML` text . Or you can directly use HTML for this scenario too .","body":"If this is the only case then you can use Two <code>TextView</code> for it . If this can multiple times like a paragraph then you should go with <code>HTML</code> text . Or you can directly use HTML for this scenario too ."},{"owner":{"account_id":10753028,"reputation":80,"user_id":7911746,"display_name":"Manpreet Matharu"},"score":0,"creation_date":1521106840,"post_id":49295758,"comment_id":85593936,"body_markdown":"You can refer this [link](https://stackoverflow.com/questions/432037/how-do-i-center-text-horizontally-and-vertically-in-a-textview-on-android) for making text align center in a textview.","body":"You can refer this <a href=\"https://stackoverflow.com/questions/432037/how-do-i-center-text-horizontally-and-vertically-in-a-textview-on-android\">link</a> for making text align center in a textview."},{"owner":{"display_name":"user9458976"},"score":0,"creation_date":1521110852,"post_id":49295758,"comment_id":85596655,"body_markdown":"I have long paragraph actually and some text of the paragraph needs to be aligned center only. Multiple TextView makes the whole purpose more complicated in my case.","body":"I have long paragraph actually and some text of the paragraph needs to be aligned center only. Multiple TextView makes the whole purpose more complicated in my case."}],"answers":[{"tags":[],"owner":{"account_id":10895208,"reputation":5019,"user_id":8009433,"display_name":"Navneet Krishna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1521110915,"creation_date":1521106747,"answer_id":49295909,"question_id":49295758,"body_markdown":"You can use `Html.fromHtml`.Using this you only need single `textview`. Just do this, it should work perfectly\r\n    \r\n     your_textview.setText(Html.fromHtml(&quot;&lt;h&gt;&lt;center&gt;&lt;b&gt;&lt;u&gt;SYRIA&lt;/u&gt;&lt;/b&gt;&lt;/center&gt;&lt;/h&gt;\\n&quot; +\r\n                &quot;    &lt;p&gt;Syria oh Syria why do you bleed?&lt;/p&gt; &lt;/br&gt;\\n&quot; +\r\n                &quot;    &lt;p&gt;Brother fights brother without thought or need&lt;/p&gt; &lt;/br&gt;\\n&quot; +\r\n                &quot;    &lt;p&gt;Ruled by a tyrant for so many years&lt;/p&gt; &lt;/br&gt;\\n&quot; +\r\n                &quot;    &lt;p&gt;And now the split blood is washed away by tears&lt;/p&gt; &lt;/br&gt;&quot;));\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Xikku.png","title":"set some text of a string at the center of a TextView","body":"<p>You can use <code>Html.fromHtml</code>.Using this you only need single <code>textview</code>. Just do this, it should work perfectly</p>\n\n<pre><code> your_textview.setText(Html.fromHtml(\"&lt;h&gt;&lt;center&gt;&lt;b&gt;&lt;u&gt;SYRIA&lt;/u&gt;&lt;/b&gt;&lt;/center&gt;&lt;/h&gt;\\n\" +\n            \"    &lt;p&gt;Syria oh Syria why do you bleed?&lt;/p&gt; &lt;/br&gt;\\n\" +\n            \"    &lt;p&gt;Brother fights brother without thought or need&lt;/p&gt; &lt;/br&gt;\\n\" +\n            \"    &lt;p&gt;Ruled by a tyrant for so many years&lt;/p&gt; &lt;/br&gt;\\n\" +\n            \"    &lt;p&gt;And now the split blood is washed away by tears&lt;/p&gt; &lt;/br&gt;\"));\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Xikku.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Xikku.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":7006298,"reputation":2021,"user_id":5370550,"accept_rate":22,"display_name":"Nik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1521106905,"creation_date":1521106905,"answer_id":49295965,"question_id":49295758,"body_markdown":"    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:orientation=&quot;vertical&quot;&gt;\r\n    \r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/textView1&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:text=&quot;seria&quot;\r\n            android:textSize=&quot;20sp&quot;\r\n            /&gt;\r\n    \r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/textView2&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:text=&quot;Syria oh Syria why do you bleed?\r\n            \\nBrother fights brother without thought or need\r\n        \\nRuled by a tyrant for so many years\r\n        \\nAnd now the spilt blood is washed away by tears&quot;\r\n            /&gt;\r\n    \r\n    &lt;/LinearLayout&gt;","title":"set some text of a string at the center of a TextView","body":"<pre><code>&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_height=\"match_parent\"\n    android:layout_width=\"match_parent\"\n    android:orientation=\"vertical\"&gt;\n\n\n    &lt;TextView\n        android:id=\"@+id/textView1\"\n        android:layout_height=\"wrap_content\"\n        android:layout_width=\"wrap_content\"\n        android:layout_gravity=\"center\"\n        android:text=\"seria\"\n        android:textSize=\"20sp\"\n        /&gt;\n\n\n    &lt;TextView\n        android:id=\"@+id/textView2\"\n        android:layout_height=\"match_parent\"\n        android:layout_width=\"wrap_content\"\n        android:text=\"Syria oh Syria why do you bleed?\n        \\nBrother fights brother without thought or need\n    \\nRuled by a tyrant for so many years\n    \\nAnd now the spilt blood is washed away by tears\"\n        /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6349133,"reputation":934,"user_id":4928762,"accept_rate":31,"display_name":"Siraj Sumra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676678634,"creation_date":1521107905,"answer_id":49296355,"question_id":49295758,"body_markdown":"You can wither use 2 different Textviews or If there is single textview, you can use HTML or Spannable String for that. Spannable can be used as follows:\r\n\r\n\r\n    TextView resultView = new TextView(this);\r\n    final String SyriaText = &quot;Syria&quot;;\r\n    final String OtherText = &quot;Other Text&quot;;\r\n    final String result = SyriaText + &quot;  &quot; + OtherText;\r\n    final SpannableString finalResult = new SpannableString(result);\r\n    finalResult.setSpan(new AlignmentSpan.Standard(Alignment.ALIGN_CENTER), 0, SyriaText.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);\r\n    resultView.setText(finalResult);\r\n\r\nAlso you can style it with Spannable. You can learn more from : https://developer.android.com/reference/android/text/Spannable.html","title":"set some text of a string at the center of a TextView","body":"<p>You can wither use 2 different Textviews or If there is single textview, you can use HTML or Spannable String for that. Spannable can be used as follows:</p>\n<pre><code>TextView resultView = new TextView(this);\nfinal String SyriaText = &quot;Syria&quot;;\nfinal String OtherText = &quot;Other Text&quot;;\nfinal String result = SyriaText + &quot;  &quot; + OtherText;\nfinal SpannableString finalResult = new SpannableString(result);\nfinalResult.setSpan(new AlignmentSpan.Standard(Alignment.ALIGN_CENTER), 0, SyriaText.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);\nresultView.setText(finalResult);\n</code></pre>\n<p>Also you can style it with Spannable. You can learn more from : <a href=\"https://developer.android.com/reference/android/text/Spannable.html\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/text/Spannable.html</a></p>\n"}],"owner":{"display_name":"user9458976"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2431,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":49296355,"answer_count":3,"score":1,"last_activity_date":1676678634,"creation_date":1521106364,"question_id":49295758,"body_markdown":"I want to fix some text of string in the center. How can I do that? \r\nFor example, take a look on this photo\r\n\r\n[![Heading at the center][1]][1]\r\n\r\nI have a string like that. Now I want some words (Heading) of my string to be shown in a `TextView` at the center horizontally but others word will remain as usual. How can I do that?\r\n\r\nI have tried the following code but it doesn&#39;t work for various dimension&#39;s devices.\r\n\r\n              String string= &quot;                 SYRIA\r\n    \\n\\nSyria oh Syria why do you bleed?\r\n            \\nBrother fights brother without thought or need\r\n        \\nRuled by a tyrant for so many years\r\n        \\nAnd now the split blood is washed away by tears\\n&quot;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/EE5R1.jpg","title":"set some text of a string at the center of a TextView","body":"<p>I want to fix some text of string in the center. How can I do that? \nFor example, take a look on this photo</p>\n\n<p><a href=\"https://i.stack.imgur.com/EE5R1.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EE5R1.jpg\" alt=\"Heading at the center\"></a></p>\n\n<p>I have a string like that. Now I want some words (Heading) of my string to be shown in a <code>TextView</code> at the center horizontally but others word will remain as usual. How can I do that?</p>\n\n<p>I have tried the following code but it doesn't work for various dimension's devices.</p>\n\n<pre><code>          String string= \"                 SYRIA\n\\n\\nSyria oh Syria why do you bleed?\n        \\nBrother fights brother without thought or need\n    \\nRuled by a tyrant for so many years\n    \\nAnd now the split blood is washed away by tears\\n\"\n</code></pre>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":6,"creation_date":1676675499,"post_id":75489880,"comment_id":133192326,"body_markdown":"`getChildren().clear(); // Clear the pane` - this clears all the hard work done to get the numbers to display - followed by the adding of the clock and hands which are displayed.  Move the clear to just prior to the &quot;Draw hour markers&quot;.  Couldn&#39;t help myself and I verified your math on the hour markers - looks good!","body":"<code>getChildren().clear(); &#47;&#47; Clear the pane</code> - this clears all the hard work done to get the numbers to display - followed by the adding of the clock and hands which are displayed.  Move the clear to just prior to the &quot;Draw hour markers&quot;.  Couldn&#39;t help myself and I verified your math on the hour markers - looks good!"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":6,"creation_date":1676675905,"post_id":75489880,"comment_id":133192396,"body_markdown":"You don&#39;t have to clear, recreate and add all new nodes to the clock every time you want to update it.  You can just add everything once and update the properties of the things that need to change when they need to change. [sample clock code](https://gist.github.com/jewelsea/3388637) (the sample is a bit outdated and would need to be updated slightly to work in a modern JavaFX version).","body":"You don&#39;t have to clear, recreate and add all new nodes to the clock every time you want to update it.  You can just add everything once and update the properties of the things that need to change when they need to change. <a href=\"https://gist.github.com/jewelsea/3388637\" rel=\"nofollow noreferrer\">sample clock code</a> (the sample is a bit outdated and would need to be updated slightly to work in a modern JavaFX version)."}],"owner":{"account_id":26744898,"reputation":1,"user_id":20345094,"display_name":"annie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676675641,"creation_date":1676673831,"question_id":75489880,"body_markdown":"I am trying to add numbers around the clock from 1 to 12. The clock is not drawing the numbers. I have the clock drawn and the hour, minute, and second hands drawn. \r\n\r\n    import java.util.Calendar;\r\n    import java.util.GregorianCalendar;\r\n    import javafx.scene.layout.Pane;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.scene.shape.Circle;\r\n    import javafx.scene.shape.Line;\r\n    import javafx.scene.text.Text;\r\n    \r\n    public class ClockPane extends Pane {\r\n        private int hour;\r\n        private int minute;\r\n        private int second;\r\n    \r\n        /** Construct a default clock with the current time */\r\n        public ClockPane() {\r\n            setCurrentTime();\r\n        }\r\n    \r\n        /** Construct a clock with specified hour, minute, and second */\r\n        public ClockPane(int hour, int minute, int second) {\r\n            this.hour = hour;\r\n            this.minute = minute;\r\n            this.second = second;\r\n        }\r\n    \r\n        /** Return hour */\r\n        public int getHour() {\r\n            return hour;\r\n        }\r\n    \r\n        /** Set a new hour */\r\n        public void setHour(int hour) {\r\n            this.hour = hour;\r\n            paintClock();\r\n        }\r\n    \r\n        /** Return minute */\r\n        public int getMinute() {\r\n            return minute;\r\n        }\r\n    \r\n        /** Set a new minute */\r\n        public void setMinute(int minute) {\r\n            this.minute = minute;\r\n            paintClock();\r\n        }\r\n    \r\n        /** Return second */\r\n        public int getSecond() {\r\n            return second;\r\n        }\r\n    \r\n        /** Set a new second */\r\n        public void setSecond(int second) {\r\n            this.second = second;\r\n            paintClock();\r\n        }\r\n    \r\n        /* Set the current time for the clock */\r\n        public void setCurrentTime() {\r\n            // Construct a calendar for the current date and time\r\n            Calendar calendar = new GregorianCalendar();\r\n    \r\n            // Set current hour, minute and second\r\n            this.hour = calendar.get(Calendar.HOUR_OF_DAY);\r\n            this.minute = calendar.get(Calendar.MINUTE);\r\n            this.second = calendar.get(Calendar.SECOND);\r\n    \r\n            paintClock(); // Repaint the clock\r\n        }\r\n    \r\n        private void paintClock() {\r\n            // Initialize clock parameters\r\n            double clockRadius = Math.min(getWidth(), getHeight()) * 0.8 * 0.5;\r\n            double centerX = getWidth() / 2;\r\n            double centerY = getHeight() / 2;\r\n        \r\n            // Draw circle\r\n            Circle circle = new Circle(centerX, centerY, clockRadius);\r\n            circle.setFill(Color.WHITE);\r\n            circle.setStroke(Color.BLACK);\r\n        \r\n            // Draw hour markers\r\n            double numberRadius = clockRadius * 0.85;  \r\n            for (int i = 1; i &lt;= 12; i++) {\r\n                double numberX = centerX + numberRadius * Math.sin(i * 2 * Math.PI / 12);\r\n                double numberY = centerY - numberRadius * Math.cos(i * 2 * Math.PI / 12);\r\n                Text number = new Text(numberX - 5, numberY + 5, &quot;&quot; + i);\r\n                number.setFill(Color.BLACK);\r\n                getChildren().addAll(number);\r\n            }\r\n        \r\n            // Draw second hand\r\n            double sLength = clockRadius * 0.8;\r\n            double secondX = centerX + sLength * Math.sin(second * (2 * Math.PI / 60));\r\n            double secondY = centerY - sLength * Math.cos(second * (2 * Math.PI / 60));\r\n            Line sLine = new Line(centerX, centerY, secondX, secondY);\r\n            sLine.setStroke(Color.RED);\r\n        \r\n            // Draw minute hand\r\n            double mLength = clockRadius * 0.65;\r\n            double xMinute = centerX + mLength * Math.sin(minute * (2 * Math.PI / 60));\r\n            double minuteY = centerY - mLength * Math.cos(minute * (2 * Math.PI / 60));\r\n            Line mLine = new Line(centerX, centerY, xMinute, minuteY);\r\n            mLine.setStroke(Color.BLUE);\r\n        \r\n            // Draw hour hand\r\n            double hLength = clockRadius * 0.5;\r\n            double hourX =\r\n                    centerX + hLength * Math.sin((hour % 12 + minute / 60.0) * (2 * Math.PI / 12));\r\n            double hourY =\r\n                    centerY - hLength * Math.cos((hour % 12 + minute / 60.0) * (2 * Math.PI / 12));\r\n            Line hLine = new Line(centerX, centerY, hourX, hourY);\r\n            hLine.setStroke(Color.GREEN);\r\n        \r\n            getChildren().clear(); // Clear the pane\r\n            getChildren().addAll(circle, sLine, mLine, hLine);\r\n        }\r\n        \r\n        \r\n    \r\n        @Override\r\n        public void setWidth(double width) {\r\n            super.setWidth(width);\r\n            paintClock();\r\n        }\r\n    \r\n        @Override\r\n        public void setHeight(double height) {\r\n            super.setHeight(height);\r\n            paintClock();\r\n        }\r\n    }\r\n\r\n```\r\nimport javafx.application.Application;\r\nimport javafx.geometry.Pos;\r\nimport javafx.stage.Stage;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.Label;\r\nimport javafx.scene.layout.BorderPane;\r\n\r\npublic class DisplayClock extends Application {\r\n\r\n    @Override // Override the start method in the Application class\r\n    public void start(Stage primaryStage) {\r\n\r\n        // Create a clock and a label\r\n        ClockPane clock = new ClockPane();\r\n        String timeString = clock.getHour() + &quot;:&quot; + clock.getMinute() + &quot;:&quot; + clock.getSecond();\r\n        Label lblCurrentTime = new Label(timeString);\r\n\r\n        // Place clock and label in border pane\r\n        BorderPane pane = new BorderPane();\r\n        pane.setCenter(clock);\r\n        pane.setBottom(lblCurrentTime);\r\n        BorderPane.setAlignment(lblCurrentTime, Pos.TOP_CENTER);\r\n\r\n        // Create a scene and place it in the stage\r\n        Scene scene = new Scene(pane, 250, 250);\r\n        primaryStage.setTitle(&quot;DisplayClock&quot;); // Set the stage title\r\n        primaryStage.setScene(scene); // Place the scene in the stage\r\n        primaryStage.show(); // Display the stage\r\n    }\r\n\r\n    /**\r\n     * The main method is only needed for the IDE with limited\r\n     * JavaFX support. Not needed for running from the command line.\r\n     */\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n}\r\n```\r\n\r\nWhen I run the program the numbers are not showing on the clock. I check the imports. It&#39;s correct. The code is also correct. I don&#39;t know why it&#39;s not showing. What should I do to fix it?","title":"the clock not displaying the numbers 1 to 12 around the clock","body":"<p>I am trying to add numbers around the clock from 1 to 12. The clock is not drawing the numbers. I have the clock drawn and the hour, minute, and second hands drawn.</p>\n<pre><code>import java.util.Calendar;\nimport java.util.GregorianCalendar;\nimport javafx.scene.layout.Pane;\nimport javafx.scene.paint.Color;\nimport javafx.scene.shape.Circle;\nimport javafx.scene.shape.Line;\nimport javafx.scene.text.Text;\n\npublic class ClockPane extends Pane {\n    private int hour;\n    private int minute;\n    private int second;\n\n    /** Construct a default clock with the current time */\n    public ClockPane() {\n        setCurrentTime();\n    }\n\n    /** Construct a clock with specified hour, minute, and second */\n    public ClockPane(int hour, int minute, int second) {\n        this.hour = hour;\n        this.minute = minute;\n        this.second = second;\n    }\n\n    /** Return hour */\n    public int getHour() {\n        return hour;\n    }\n\n    /** Set a new hour */\n    public void setHour(int hour) {\n        this.hour = hour;\n        paintClock();\n    }\n\n    /** Return minute */\n    public int getMinute() {\n        return minute;\n    }\n\n    /** Set a new minute */\n    public void setMinute(int minute) {\n        this.minute = minute;\n        paintClock();\n    }\n\n    /** Return second */\n    public int getSecond() {\n        return second;\n    }\n\n    /** Set a new second */\n    public void setSecond(int second) {\n        this.second = second;\n        paintClock();\n    }\n\n    /* Set the current time for the clock */\n    public void setCurrentTime() {\n        // Construct a calendar for the current date and time\n        Calendar calendar = new GregorianCalendar();\n\n        // Set current hour, minute and second\n        this.hour = calendar.get(Calendar.HOUR_OF_DAY);\n        this.minute = calendar.get(Calendar.MINUTE);\n        this.second = calendar.get(Calendar.SECOND);\n\n        paintClock(); // Repaint the clock\n    }\n\n    private void paintClock() {\n        // Initialize clock parameters\n        double clockRadius = Math.min(getWidth(), getHeight()) * 0.8 * 0.5;\n        double centerX = getWidth() / 2;\n        double centerY = getHeight() / 2;\n    \n        // Draw circle\n        Circle circle = new Circle(centerX, centerY, clockRadius);\n        circle.setFill(Color.WHITE);\n        circle.setStroke(Color.BLACK);\n    \n        // Draw hour markers\n        double numberRadius = clockRadius * 0.85;  \n        for (int i = 1; i &lt;= 12; i++) {\n            double numberX = centerX + numberRadius * Math.sin(i * 2 * Math.PI / 12);\n            double numberY = centerY - numberRadius * Math.cos(i * 2 * Math.PI / 12);\n            Text number = new Text(numberX - 5, numberY + 5, &quot;&quot; + i);\n            number.setFill(Color.BLACK);\n            getChildren().addAll(number);\n        }\n    \n        // Draw second hand\n        double sLength = clockRadius * 0.8;\n        double secondX = centerX + sLength * Math.sin(second * (2 * Math.PI / 60));\n        double secondY = centerY - sLength * Math.cos(second * (2 * Math.PI / 60));\n        Line sLine = new Line(centerX, centerY, secondX, secondY);\n        sLine.setStroke(Color.RED);\n    \n        // Draw minute hand\n        double mLength = clockRadius * 0.65;\n        double xMinute = centerX + mLength * Math.sin(minute * (2 * Math.PI / 60));\n        double minuteY = centerY - mLength * Math.cos(minute * (2 * Math.PI / 60));\n        Line mLine = new Line(centerX, centerY, xMinute, minuteY);\n        mLine.setStroke(Color.BLUE);\n    \n        // Draw hour hand\n        double hLength = clockRadius * 0.5;\n        double hourX =\n                centerX + hLength * Math.sin((hour % 12 + minute / 60.0) * (2 * Math.PI / 12));\n        double hourY =\n                centerY - hLength * Math.cos((hour % 12 + minute / 60.0) * (2 * Math.PI / 12));\n        Line hLine = new Line(centerX, centerY, hourX, hourY);\n        hLine.setStroke(Color.GREEN);\n    \n        getChildren().clear(); // Clear the pane\n        getChildren().addAll(circle, sLine, mLine, hLine);\n    }\n    \n    \n\n    @Override\n    public void setWidth(double width) {\n        super.setWidth(width);\n        paintClock();\n    }\n\n    @Override\n    public void setHeight(double height) {\n        super.setHeight(height);\n        paintClock();\n    }\n}\n</code></pre>\n<pre><code>import javafx.application.Application;\nimport javafx.geometry.Pos;\nimport javafx.stage.Stage;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Label;\nimport javafx.scene.layout.BorderPane;\n\npublic class DisplayClock extends Application {\n\n    @Override // Override the start method in the Application class\n    public void start(Stage primaryStage) {\n\n        // Create a clock and a label\n        ClockPane clock = new ClockPane();\n        String timeString = clock.getHour() + &quot;:&quot; + clock.getMinute() + &quot;:&quot; + clock.getSecond();\n        Label lblCurrentTime = new Label(timeString);\n\n        // Place clock and label in border pane\n        BorderPane pane = new BorderPane();\n        pane.setCenter(clock);\n        pane.setBottom(lblCurrentTime);\n        BorderPane.setAlignment(lblCurrentTime, Pos.TOP_CENTER);\n\n        // Create a scene and place it in the stage\n        Scene scene = new Scene(pane, 250, 250);\n        primaryStage.setTitle(&quot;DisplayClock&quot;); // Set the stage title\n        primaryStage.setScene(scene); // Place the scene in the stage\n        primaryStage.show(); // Display the stage\n    }\n\n    /**\n     * The main method is only needed for the IDE with limited\n     * JavaFX support. Not needed for running from the command line.\n     */\n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n</code></pre>\n<p>When I run the program the numbers are not showing on the clock. I check the imports. It's correct. The code is also correct. I don't know why it's not showing. What should I do to fix it?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":7512472,"reputation":687,"user_id":5706996,"display_name":"KoalaKoalified"},"score":0,"creation_date":1628014883,"post_id":68641037,"comment_id":121307885,"body_markdown":"When an image / video goes into the documents folder is it doomed to remain however it is named for all time?","body":"When an image / video goes into the documents folder is it doomed to remain however it is named for all time?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1628015217,"post_id":68641037,"comment_id":121307984,"body_markdown":"First tell how you created that file. The code you posted mixes File and MediaStore class and can never work certainly where you also use a FileProvider. All makes no sense.","body":"First tell how you created that file. The code you posted mixes File and MediaStore class and can never work certainly where you also use a FileProvider. All makes no sense."},{"owner":{"account_id":7512472,"reputation":687,"user_id":5706996,"display_name":"KoalaKoalified"},"score":0,"creation_date":1628015265,"post_id":68641037,"comment_id":121308009,"body_markdown":"The old code works fine and the file creation has no issues. The problem occurs when renaming the file. Also the videos are dropped into the documents folder","body":"The old code works fine and the file creation has no issues. The problem occurs when renaming the file. Also the videos are dropped into the documents folder"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1628016491,"post_id":68641037,"comment_id":121308432,"body_markdown":"Your code dies not make sense. And you did not even show how you called renameVideoFile.","body":"Your code dies not make sense. And you did not even show how you called renameVideoFile."},{"owner":{"account_id":7512472,"reputation":687,"user_id":5706996,"display_name":"KoalaKoalified"},"score":0,"creation_date":1628016594,"post_id":68641037,"comment_id":121308470,"body_markdown":"contentValues.put(MediaStore.Files.FileColumns.DISPLAY_NAME, to.getName());\nrenames the video","body":"contentValues.put(MediaStore.Files.FileColumns.DISPLAY_NAME, to.getName()); renames the video"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1628020882,"post_id":68641037,"comment_id":121309759,"body_markdown":"That code makes no sense and you did not give the info i asked for.","body":"That code makes no sense and you did not give the info i asked for."}],"answers":[{"tags":[],"owner":{"account_id":7512472,"reputation":687,"user_id":5706996,"display_name":"KoalaKoalified"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1628031832,"creation_date":1628030719,"answer_id":68643545,"question_id":68641037,"body_markdown":"EDIT: The external folder I chose was the documents folder FYI\r\n\r\nSo I did finally get it working. Here is the code to rename a video (it may not be the best but it does the trick!)\r\n\r\n    private static void tryAddVideosToMediaStore(Activity context) {\r\n        List&lt;File&gt; files = MediaUtils.getVideoFilesFromDirectory();\r\n        for (File file : files) {\r\n            try {\r\n                Uri fromUri = FileProvider.getUriForFile(context, context.getPackageName() + &quot;.provider&quot;, file);\r\n\r\n                if (getRealPathFromURI(context, fromUri) == null) {\r\n\r\n                    String nameWoExtension = MediaUtils.getNameWithoutStatus(file.getAbsolutePath());\r\n                    ContentValues values = new ContentValues(3);\r\n                    values.put(MediaStore.Video.Media.TITLE, nameWoExtension);\r\n                    values.put(MediaStore.Video.Media.MIME_TYPE, &quot;video/mp4&quot;);\r\n                    values.put(MediaStore.Video.Media.DATA, file.getAbsolutePath());\r\n                    context.getContentResolver().insert(MediaStore.Video.Media.EXTERNAL_CONTENT_URI, values);\r\n                }\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    public static String getRealPathFromURI(Context context, Uri contentUri) {\r\n        Cursor cursor = null;\r\n        try {\r\n            String[] proj = {MediaStore.Images.Media.DATA};\r\n            cursor = context.getContentResolver().query(contentUri, proj, null, null, null);\r\n            int column_index = cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DATA);\r\n            cursor.moveToFirst();\r\n            return cursor.getString(column_index);\r\n        } catch(Exception e) {\r\n            return null;\r\n        }finally {\r\n            if (cursor != null) {\r\n                cursor.close();\r\n            }\r\n        }\r\n    }\r\n\r\nAnd then the calling methods\r\n\r\n    \r\n    public static String getVideoNameFromPath(String path) {\r\n        return path.substring(path.lastIndexOf(&quot;/&quot;) + 1, path.indexOf(&quot;.mp4&quot;));\r\n    }\r\n\r\n    public static boolean renameVideoFile(MainActivityViewModel viewModel, SharedPreferenceHelper sharedPreferenceHelper, Activity c, File from, File to) {\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\r\n            tryAddVideosToMediaStore(c);\r\n            Uri fromUri = MediaUtils.getVideoUriFromFS(c, from);\r\n            try {\r\n                ContentResolver contentResolver = c.getContentResolver();\r\n                ContentValues contentValues = new ContentValues();\r\n\r\n                contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 1);\r\n                contentResolver.update(fromUri, contentValues, null, null);\r\n                contentValues.clear();\r\n                contentValues.put(MediaStore.Files.FileColumns.DISPLAY_NAME, to.getName());\r\n                contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 0);\r\n                contentResolver.update(fromUri, contentValues, null, null);\r\n                return true;\r\n            } catch (Exception securityException) {\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n                    sharedPreferenceHelper.get().edit().putString(&quot;from&quot;, from.getAbsolutePath()).putString(&quot;to&quot;, to.getAbsolutePath()).apply();\r\n                    RecoverableSecurityException recoverableSecurityException;\r\n                    viewModel.setContentUri(fromUri);\r\n\r\n                    if (securityException instanceof RecoverableSecurityException) {\r\n                        recoverableSecurityException =\r\n                                (RecoverableSecurityException) securityException;\r\n                    } else {\r\n                        requestVideoWritePermissions(c, Uri.parse(MediaStore.Video.Media.EXTERNAL_CONTENT_URI + &quot;/&quot; + MediaUtils.getVideoId(c, from)));\r\n                        return false;\r\n                    }\r\n                    IntentSender intentSender = recoverableSecurityException.getUserAction()\r\n                            .getActionIntent().getIntentSender();\r\n\r\n                    try {\r\n                        c.startIntentSenderForResult(intentSender, 55,\r\n                                null, 0, 0, 0);\r\n                    } catch (Exception e) {\r\n                        e.printStackTrace();\r\n                        return false;\r\n                    }\r\n                } else {\r\n                    throw new RuntimeException(\r\n                            securityException.getMessage(), securityException);\r\n                }\r\n            }\r\n            return false;\r\n        } else {\r\n            if (from.renameTo(to)) {\r\n                removeMedia(c, from);\r\n                addMedia(c, to);\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n    \r\n    public static Uri getVideoUriFromFS(Context c, File file) {\r\n        long id = getFilePathToMediaID(file, c);\r\n        Uri fromUri = ContentUris.withAppendedId( MediaStore.Video.Media.EXTERNAL_CONTENT_URI,id);\r\n        return fromUri;\r\n    }\r\n\r\n\r\n    \r\n    public static long getFilePathToMediaID(File videoPath, Context context)\r\n    {\r\n        Uri mainUri;\r\n        Cursor cursor1 = context.getContentResolver().query(\r\n                MediaStore.Video.Media.EXTERNAL_CONTENT_URI,\r\n                new String[]{MediaStore.Video.Media._ID},\r\n                MediaStore.Video.Media.DATA + &quot;=? &quot;,\r\n                new String[]{videoPath.getAbsolutePath()}, null);\r\n        long id = 0;\r\n        if (cursor1 != null &amp;&amp; cursor1.moveToFirst()) {\r\n\r\n            id = cursor1.getLong(cursor1.getColumnIndex(MediaStore.MediaColumns._ID));\r\n            cursor1.close();\r\n        }\r\n        return id;\r\n    }\r\n\r\n    \r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n    if (requestCode == 55) { //rename video request code\r\n            if (resultCode == RESULT_OK) {\r\n                //update UI\r\n                String from = presenter.getFromFilePath();\r\n                String to = presenter.getToFilePath();\r\n                if (from != null &amp;&amp; to != null) {\r\n                    Uri fromUri = MediaUtils.getVideoUriFromFS(this, new File(from));\r\n                    ContentResolver contentResolver = getContentResolver();\r\n                        ContentValues contentValues = new ContentValues();\r\n\r\n                        contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 1);\r\n                        contentResolver.update(fromUri, contentValues, null, null);\r\n                        contentValues.clear();\r\n                        contentValues.put(MediaStore.Files.FileColumns.DISPLAY_NAME, new File(to).getName());\r\n                        contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 0);\r\n                        contentResolver.update(fromUri, contentValues, null, null);\r\n                        //update UI\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nIf I forgot something please let me know and I will post it here. It took literally hours of searching to find this solution. I&#39;m quite upset at the simplicity vs the complexity that google has introduced.\r\n\r\nEDIT: I Think I forgot this method which was very important\r\n\r\n    \r\n    public static boolean requestVideoWritePermissions(Activity activity, Uri fromUri) {\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\r\n\r\n            boolean hasPermission = true;\r\n            if (activity.checkUriPermission(fromUri, Binder.getCallingPid(), Binder.getCallingUid(),\r\n                    Intent.FLAG_GRANT_WRITE_URI_PERMISSION) != PackageManager.PERMISSION_GRANTED) {\r\n                hasPermission = false;\r\n            }\r\n\r\n            List&lt;Uri&gt; uriList = new ArrayList&lt;&gt;();\r\n            uriList.add(fromUri);\r\n\r\n            if (!hasPermission) {\r\n                PendingIntent pi = MediaStore.createWriteRequest(activity.getContentResolver(), uriList);\r\n                try {\r\n                    activity.startIntentSenderForResult(pi.getIntentSender(), 55, null, 0, 0, 0);\r\n                } catch (IntentSender.SendIntentException e) {\r\n                    e.printStackTrace();\r\n                }\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n        return true;\r\n    }\r\n\r\nI should also mention each video is a prompt this way. The user chooses whether or not to allow you to overwrite each video which was less than optimal. I wish I could just do a whole folder of external access but I&#39;m guessing that&#39;s not going to happen with scoped storage changes.","title":"Renaming Video / Image While Targeting Android 11 (Api 30)","body":"<p>EDIT: The external folder I chose was the documents folder FYI</p>\n<p>So I did finally get it working. Here is the code to rename a video (it may not be the best but it does the trick!)</p>\n<pre><code>private static void tryAddVideosToMediaStore(Activity context) {\n    List&lt;File&gt; files = MediaUtils.getVideoFilesFromDirectory();\n    for (File file : files) {\n        try {\n            Uri fromUri = FileProvider.getUriForFile(context, context.getPackageName() + &quot;.provider&quot;, file);\n\n            if (getRealPathFromURI(context, fromUri) == null) {\n\n                String nameWoExtension = MediaUtils.getNameWithoutStatus(file.getAbsolutePath());\n                ContentValues values = new ContentValues(3);\n                values.put(MediaStore.Video.Media.TITLE, nameWoExtension);\n                values.put(MediaStore.Video.Media.MIME_TYPE, &quot;video/mp4&quot;);\n                values.put(MediaStore.Video.Media.DATA, file.getAbsolutePath());\n                context.getContentResolver().insert(MediaStore.Video.Media.EXTERNAL_CONTENT_URI, values);\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n}\n\npublic static String getRealPathFromURI(Context context, Uri contentUri) {\n    Cursor cursor = null;\n    try {\n        String[] proj = {MediaStore.Images.Media.DATA};\n        cursor = context.getContentResolver().query(contentUri, proj, null, null, null);\n        int column_index = cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DATA);\n        cursor.moveToFirst();\n        return cursor.getString(column_index);\n    } catch(Exception e) {\n        return null;\n    }finally {\n        if (cursor != null) {\n            cursor.close();\n        }\n    }\n}\n</code></pre>\n<p>And then the calling methods</p>\n<pre><code>public static String getVideoNameFromPath(String path) {\n    return path.substring(path.lastIndexOf(&quot;/&quot;) + 1, path.indexOf(&quot;.mp4&quot;));\n}\n\npublic static boolean renameVideoFile(MainActivityViewModel viewModel, SharedPreferenceHelper sharedPreferenceHelper, Activity c, File from, File to) {\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\n        tryAddVideosToMediaStore(c);\n        Uri fromUri = MediaUtils.getVideoUriFromFS(c, from);\n        try {\n            ContentResolver contentResolver = c.getContentResolver();\n            ContentValues contentValues = new ContentValues();\n\n            contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 1);\n            contentResolver.update(fromUri, contentValues, null, null);\n            contentValues.clear();\n            contentValues.put(MediaStore.Files.FileColumns.DISPLAY_NAME, to.getName());\n            contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 0);\n            contentResolver.update(fromUri, contentValues, null, null);\n            return true;\n        } catch (Exception securityException) {\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n                sharedPreferenceHelper.get().edit().putString(&quot;from&quot;, from.getAbsolutePath()).putString(&quot;to&quot;, to.getAbsolutePath()).apply();\n                RecoverableSecurityException recoverableSecurityException;\n                viewModel.setContentUri(fromUri);\n\n                if (securityException instanceof RecoverableSecurityException) {\n                    recoverableSecurityException =\n                            (RecoverableSecurityException) securityException;\n                } else {\n                    requestVideoWritePermissions(c, Uri.parse(MediaStore.Video.Media.EXTERNAL_CONTENT_URI + &quot;/&quot; + MediaUtils.getVideoId(c, from)));\n                    return false;\n                }\n                IntentSender intentSender = recoverableSecurityException.getUserAction()\n                        .getActionIntent().getIntentSender();\n\n                try {\n                    c.startIntentSenderForResult(intentSender, 55,\n                            null, 0, 0, 0);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                    return false;\n                }\n            } else {\n                throw new RuntimeException(\n                        securityException.getMessage(), securityException);\n            }\n        }\n        return false;\n    } else {\n        if (from.renameTo(to)) {\n            removeMedia(c, from);\n            addMedia(c, to);\n            return true;\n        } else {\n            return false;\n        }\n    }\n}\n\n\npublic static Uri getVideoUriFromFS(Context c, File file) {\n    long id = getFilePathToMediaID(file, c);\n    Uri fromUri = ContentUris.withAppendedId( MediaStore.Video.Media.EXTERNAL_CONTENT_URI,id);\n    return fromUri;\n}\n\n\n\npublic static long getFilePathToMediaID(File videoPath, Context context)\n{\n    Uri mainUri;\n    Cursor cursor1 = context.getContentResolver().query(\n            MediaStore.Video.Media.EXTERNAL_CONTENT_URI,\n            new String[]{MediaStore.Video.Media._ID},\n            MediaStore.Video.Media.DATA + &quot;=? &quot;,\n            new String[]{videoPath.getAbsolutePath()}, null);\n    long id = 0;\n    if (cursor1 != null &amp;&amp; cursor1.moveToFirst()) {\n\n        id = cursor1.getLong(cursor1.getColumnIndex(MediaStore.MediaColumns._ID));\n        cursor1.close();\n    }\n    return id;\n}\n\n\n@Override\nprotected void onActivityResult(int requestCode, int resultCode, Intent data) {\nif (requestCode == 55) { //rename video request code\n        if (resultCode == RESULT_OK) {\n            //update UI\n            String from = presenter.getFromFilePath();\n            String to = presenter.getToFilePath();\n            if (from != null &amp;&amp; to != null) {\n                Uri fromUri = MediaUtils.getVideoUriFromFS(this, new File(from));\n                ContentResolver contentResolver = getContentResolver();\n                    ContentValues contentValues = new ContentValues();\n\n                    contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 1);\n                    contentResolver.update(fromUri, contentValues, null, null);\n                    contentValues.clear();\n                    contentValues.put(MediaStore.Files.FileColumns.DISPLAY_NAME, new File(to).getName());\n                    contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 0);\n                    contentResolver.update(fromUri, contentValues, null, null);\n                    //update UI\n            }\n        }\n    }\n}\n</code></pre>\n<p>If I forgot something please let me know and I will post it here. It took literally hours of searching to find this solution. I'm quite upset at the simplicity vs the complexity that google has introduced.</p>\n<p>EDIT: I Think I forgot this method which was very important</p>\n<pre><code>public static boolean requestVideoWritePermissions(Activity activity, Uri fromUri) {\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\n\n        boolean hasPermission = true;\n        if (activity.checkUriPermission(fromUri, Binder.getCallingPid(), Binder.getCallingUid(),\n                Intent.FLAG_GRANT_WRITE_URI_PERMISSION) != PackageManager.PERMISSION_GRANTED) {\n            hasPermission = false;\n        }\n\n        List&lt;Uri&gt; uriList = new ArrayList&lt;&gt;();\n        uriList.add(fromUri);\n\n        if (!hasPermission) {\n            PendingIntent pi = MediaStore.createWriteRequest(activity.getContentResolver(), uriList);\n            try {\n                activity.startIntentSenderForResult(pi.getIntentSender(), 55, null, 0, 0, 0);\n            } catch (IntentSender.SendIntentException e) {\n                e.printStackTrace();\n            }\n            return false;\n        }\n        return true;\n    }\n    return true;\n}\n</code></pre>\n<p>I should also mention each video is a prompt this way. The user chooses whether or not to allow you to overwrite each video which was less than optimal. I wish I could just do a whole folder of external access but I'm guessing that's not going to happen with scoped storage changes.</p>\n"},{"tags":[],"owner":{"account_id":7512472,"reputation":687,"user_id":5706996,"display_name":"KoalaKoalified"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676674710,"creation_date":1676671399,"answer_id":75489613,"question_id":68641037,"body_markdown":"Since I see this is a very popular question, I&#39;m going to go ahead and update what I changed to be doing since some of this code is deprecated or not working.\r\n\r\nFirst In Your build.gradle file, implement the SAF framework&#39;s DocumentFile class:\r\n\r\n    implementation &#39;androidx.documentfile:documentfile:1.0.1&#39;\r\n\r\nNext Call this method which request permissions for the SAF to operate (You will only need to do this once on user install):\r\n\r\n     private void requestDocumentTreePermissions() {\r\n        // Choose a directory using the system&#39;s file picker.\r\n        new AlertDialog.Builder(this)\r\n                .setMessage(&quot;*Please Select A Folder For The App To Organize The Videos*&quot;)\r\n                .setPositiveButton(&quot;Ok&quot;, new DialogInterface.OnClickListener() {\r\n                    @RequiresApi(api = Build.VERSION_CODES.Q)\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n                        StorageManager sm = (StorageManager) getSystemService(Context.STORAGE_SERVICE);\r\n                        Intent intent = sm.getPrimaryStorageVolume().createOpenDocumentTreeIntent();\r\n\r\n                        String startDir = &quot;Documents&quot;;\r\n                        Uri uri = intent.getParcelableExtra(&quot;android.provider.extra.INITIAL_URI&quot;);\r\n\r\n                        String scheme = uri.toString();\r\n\r\n\r\n                        scheme = scheme.replace(&quot;/root/&quot;, &quot;/document/&quot;);\r\n                        scheme += &quot;%3A&quot; + startDir;\r\n\r\n                        uri = Uri.parse(scheme);\r\n                        Uri rootUri = DocumentsContract.buildDocumentUri(\r\n                                EXTERNAL_STORAGE_PROVIDER_AUTHORITY,\r\n                                uri.toString()\r\n                        );\r\n                        Uri treeUri = DocumentsContract.buildTreeDocumentUri(\r\n                                EXTERNAL_STORAGE_PROVIDER_AUTHORITY,\r\n                                uri.toString()\r\n                        );\r\n                        uri = Uri.parse(scheme);\r\n                        Uri treeUri2 = DocumentsContract.buildTreeDocumentUri(\r\n                                EXTERNAL_STORAGE_PROVIDER_AUTHORITY,\r\n                                uri.toString()\r\n                        );\r\n                        List&lt;Uri&gt; uriTreeList = new ArrayList&lt;&gt;();\r\n                        uriTreeList.add(treeUri);\r\n                        uriTreeList.add(treeUri2);\r\n                        getPrimaryVolume().createOpenDocumentTreeIntent()\r\n                                .putExtra(EXTRA_INITIAL_URI, rootUri);\r\n                        Intent intent2 = new Intent(Intent.ACTION_OPEN_DOCUMENT_TREE);\r\n                        // Optionally, specify a URI for the directory that should be opened in\r\n                        // the system file picker when it loads.\r\n                        intent2.addFlags(\r\n                                Intent.FLAG_GRANT_READ_URI_PERMISSION\r\n                                        | Intent.FLAG_GRANT_WRITE_URI_PERMISSION\r\n                                        | Intent.FLAG_GRANT_PERSISTABLE_URI_PERMISSION\r\n                                        | Intent.FLAG_GRANT_PREFIX_URI_PERMISSION);\r\n                        intent2.putExtra(EXTRA_INITIAL_URI, rootUri);\r\n                        startActivityForResult(intent2, 99);\r\n                    }\r\n                })\r\n                .setCancelable(false)\r\n                .show();\r\n\r\n\r\n    }\r\n\r\nNext Store some Persistant Permissions:\r\n\r\n        @Override\r\n    public void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (requestCode == 99 &amp;&amp; resultCode == RESULT_OK) {\r\n            //get back the document tree URI (in this case we expect the documents root directory)\r\n            Uri uri = data.getData();\r\n            //now we grant permanent persistant permissions to our contentResolver and we are free to open up sub directory Uris as we please until the app is uninstalled\r\n            getSharedPreferences().edit().putString(ACCESS_FOLDER, uri.toString()).apply();\r\n            final int takeFlags = (Intent.FLAG_GRANT_READ_URI_PERMISSION | Intent.FLAG_GRANT_WRITE_URI_PERMISSION);\r\n            getApplicationContext().getContentResolver().takePersistableUriPermission(uri, takeFlags);\r\n            //simply recreate the activity although you could call some function at this point\r\n            recreate();\r\n        }\r\n    }\r\n\r\nFinally call the documentFile&#39;s rename method on the correct file\r\n\r\n    DocumentFile df = DocumentFile.fromTreeUri(MainActivity.this, uri);\r\n    df = df.findFile(&quot;CurrentName&quot;)\r\n    df.renameTo(&quot;NewName&quot;);\r\n\r\nYou Can also open InputStreams and OutputStreams using your content resolver because of the persistant URI permissions granted to your content resolver for that DocumentFile using the following snippet:\r\n\r\n    getContentResolver().openInputStream(df.getUri());\r\n    getContentResolver().openOutputStream(df.getUri());\r\n\r\nYou can list files using\r\n\r\n    df.listFiles();\r\n\r\nOr You can list out files using:\r\n\r\n    \r\n    public static DocumentFile findFileInDirectoryMatchingName(Context mContext, Uri mUri, String name) {\r\n        final ContentResolver resolver = mContext.getContentResolver();\r\n        final Uri childrenUri = DocumentsContract.buildChildDocumentsUriUsingTree(mUri,\r\n                DocumentsContract.getDocumentId(mUri));\r\n        Cursor c = null;\r\n        try {\r\n            c = resolver.query(childrenUri, new String[]{\r\n                    DocumentsContract.Document.COLUMN_DOCUMENT_ID,\r\n                    DocumentsContract.Document.COLUMN_DISPLAY_NAME,\r\n                    DocumentsContract.Document.COLUMN_MIME_TYPE,\r\n                    DocumentsContract.Document.COLUMN_LAST_MODIFIED\r\n\r\n            }, DocumentsContract.Document.COLUMN_DISPLAY_NAME + &quot; LIKE &#39;?%&#39;&quot;, new String[]{name}, null);\r\n            c.moveToFirst();\r\n            while (!c.isAfterLast()) {\r\n                final String filename = c.getString(1);\r\n                final String mimeType = c.getString(2);\r\n                final Long lastModified = c.getLong(3);\r\n                if (filename.contains(name)) {\r\n                    final String documentId = c.getString(0);\r\n                    final Uri documentUri = DocumentsContract.buildDocumentUriUsingTree(mUri,\r\n                            documentId);\r\n\r\n                    return DocumentFile.fromTreeUri(mContext, documentUri);\r\n                }\r\n                c.moveToNext();\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            if (c != null) {\r\n                c.close();\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\nWhich will run faster than the df.listFiles() method\r\n\r\n","title":"Renaming Video / Image While Targeting Android 11 (Api 30)","body":"<p>Since I see this is a very popular question, I'm going to go ahead and update what I changed to be doing since some of this code is deprecated or not working.</p>\n<p>First In Your build.gradle file, implement the SAF framework's DocumentFile class:</p>\n<pre><code>implementation 'androidx.documentfile:documentfile:1.0.1'\n</code></pre>\n<p>Next Call this method which request permissions for the SAF to operate (You will only need to do this once on user install):</p>\n<pre><code> private void requestDocumentTreePermissions() {\n    // Choose a directory using the system's file picker.\n    new AlertDialog.Builder(this)\n            .setMessage(&quot;*Please Select A Folder For The App To Organize The Videos*&quot;)\n            .setPositiveButton(&quot;Ok&quot;, new DialogInterface.OnClickListener() {\n                @RequiresApi(api = Build.VERSION_CODES.Q)\n                @Override\n                public void onClick(DialogInterface dialog, int which) {\n                    StorageManager sm = (StorageManager) getSystemService(Context.STORAGE_SERVICE);\n                    Intent intent = sm.getPrimaryStorageVolume().createOpenDocumentTreeIntent();\n\n                    String startDir = &quot;Documents&quot;;\n                    Uri uri = intent.getParcelableExtra(&quot;android.provider.extra.INITIAL_URI&quot;);\n\n                    String scheme = uri.toString();\n\n\n                    scheme = scheme.replace(&quot;/root/&quot;, &quot;/document/&quot;);\n                    scheme += &quot;%3A&quot; + startDir;\n\n                    uri = Uri.parse(scheme);\n                    Uri rootUri = DocumentsContract.buildDocumentUri(\n                            EXTERNAL_STORAGE_PROVIDER_AUTHORITY,\n                            uri.toString()\n                    );\n                    Uri treeUri = DocumentsContract.buildTreeDocumentUri(\n                            EXTERNAL_STORAGE_PROVIDER_AUTHORITY,\n                            uri.toString()\n                    );\n                    uri = Uri.parse(scheme);\n                    Uri treeUri2 = DocumentsContract.buildTreeDocumentUri(\n                            EXTERNAL_STORAGE_PROVIDER_AUTHORITY,\n                            uri.toString()\n                    );\n                    List&lt;Uri&gt; uriTreeList = new ArrayList&lt;&gt;();\n                    uriTreeList.add(treeUri);\n                    uriTreeList.add(treeUri2);\n                    getPrimaryVolume().createOpenDocumentTreeIntent()\n                            .putExtra(EXTRA_INITIAL_URI, rootUri);\n                    Intent intent2 = new Intent(Intent.ACTION_OPEN_DOCUMENT_TREE);\n                    // Optionally, specify a URI for the directory that should be opened in\n                    // the system file picker when it loads.\n                    intent2.addFlags(\n                            Intent.FLAG_GRANT_READ_URI_PERMISSION\n                                    | Intent.FLAG_GRANT_WRITE_URI_PERMISSION\n                                    | Intent.FLAG_GRANT_PERSISTABLE_URI_PERMISSION\n                                    | Intent.FLAG_GRANT_PREFIX_URI_PERMISSION);\n                    intent2.putExtra(EXTRA_INITIAL_URI, rootUri);\n                    startActivityForResult(intent2, 99);\n                }\n            })\n            .setCancelable(false)\n            .show();\n\n\n}\n</code></pre>\n<p>Next Store some Persistant Permissions:</p>\n<pre><code>    @Override\npublic void onActivityResult(int requestCode, int resultCode, Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n    if (requestCode == 99 &amp;&amp; resultCode == RESULT_OK) {\n        //get back the document tree URI (in this case we expect the documents root directory)\n        Uri uri = data.getData();\n        //now we grant permanent persistant permissions to our contentResolver and we are free to open up sub directory Uris as we please until the app is uninstalled\n        getSharedPreferences().edit().putString(ACCESS_FOLDER, uri.toString()).apply();\n        final int takeFlags = (Intent.FLAG_GRANT_READ_URI_PERMISSION | Intent.FLAG_GRANT_WRITE_URI_PERMISSION);\n        getApplicationContext().getContentResolver().takePersistableUriPermission(uri, takeFlags);\n        //simply recreate the activity although you could call some function at this point\n        recreate();\n    }\n}\n</code></pre>\n<p>Finally call the documentFile's rename method on the correct file</p>\n<pre><code>DocumentFile df = DocumentFile.fromTreeUri(MainActivity.this, uri);\ndf = df.findFile(&quot;CurrentName&quot;)\ndf.renameTo(&quot;NewName&quot;);\n</code></pre>\n<p>You Can also open InputStreams and OutputStreams using your content resolver because of the persistant URI permissions granted to your content resolver for that DocumentFile using the following snippet:</p>\n<pre><code>getContentResolver().openInputStream(df.getUri());\ngetContentResolver().openOutputStream(df.getUri());\n</code></pre>\n<p>You can list files using</p>\n<pre><code>df.listFiles();\n</code></pre>\n<p>Or You can list out files using:</p>\n<pre><code>public static DocumentFile findFileInDirectoryMatchingName(Context mContext, Uri mUri, String name) {\n    final ContentResolver resolver = mContext.getContentResolver();\n    final Uri childrenUri = DocumentsContract.buildChildDocumentsUriUsingTree(mUri,\n            DocumentsContract.getDocumentId(mUri));\n    Cursor c = null;\n    try {\n        c = resolver.query(childrenUri, new String[]{\n                DocumentsContract.Document.COLUMN_DOCUMENT_ID,\n                DocumentsContract.Document.COLUMN_DISPLAY_NAME,\n                DocumentsContract.Document.COLUMN_MIME_TYPE,\n                DocumentsContract.Document.COLUMN_LAST_MODIFIED\n\n        }, DocumentsContract.Document.COLUMN_DISPLAY_NAME + &quot; LIKE '?%'&quot;, new String[]{name}, null);\n        c.moveToFirst();\n        while (!c.isAfterLast()) {\n            final String filename = c.getString(1);\n            final String mimeType = c.getString(2);\n            final Long lastModified = c.getLong(3);\n            if (filename.contains(name)) {\n                final String documentId = c.getString(0);\n                final Uri documentUri = DocumentsContract.buildDocumentUriUsingTree(mUri,\n                        documentId);\n\n                return DocumentFile.fromTreeUri(mContext, documentUri);\n            }\n            c.moveToNext();\n        }\n    } catch (Exception e) {\n        e.printStackTrace();\n    } finally {\n        if (c != null) {\n            c.close();\n        }\n    }\n\n    return null;\n}\n</code></pre>\n<p>Which will run faster than the df.listFiles() method</p>\n"}],"owner":{"account_id":7512472,"reputation":687,"user_id":5706996,"display_name":"KoalaKoalified"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1927,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":75489613,"answer_count":2,"score":4,"last_activity_date":1676674710,"creation_date":1628014837,"question_id":68641037,"body_markdown":"I&#39;m having difficulty simply renaming a file created by the app but was put into the documents folder.\r\n\r\nEDIT:\r\n\r\nAs it so happens the videos are not created by the application but are expected to be renamed by the application. The user drops the videos into the documents folder manually at the start. My mistake.\r\n\r\nHere is my code:\r\n\r\n    public static boolean renameVideoFile(Context c, File from, File to) {\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\r\n            try {\r\n                Uri fromUri = FileProvider.getUriForFile(c, c.getPackageName() + &quot;.provider&quot;, new File(FileUtils.getVideosDir(), from.getName()));\r\n                ContentResolver contentResolver = c.getContentResolver();\r\n                ContentValues contentValues = new ContentValues();\r\n\r\n                contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 1);\r\n                contentResolver.update(fromUri, contentValues, null, null);\r\n                contentValues.clear();\r\n                contentValues.put(MediaStore.Files.FileColumns.DISPLAY_NAME, to.getName());\r\n                contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 0);\r\n                contentResolver.update(fromUri, contentValues, null, null);\r\n                return true;\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n            return false;\r\n        } else {\r\n            if (from.renameTo(to)) {\r\n                removeMedia(c, from);\r\n                addMedia(c, to);\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\nI progressed through a few errors but my final error is:\r\n\r\njava.lang.UnsupportedOperationException: No external updates\r\n\r\nWhich is an internal problem with the FileProvider at\r\n\r\nat androidx.core.content.FileProvider.update(FileProvider.java:523)\r\n\r\nEDIT #2\r\nAlso here are my provider declarations in the manifest:\r\n\r\n     &lt;provider\r\n            android:name=&quot;androidx.core.content.FileProvider&quot;\r\n            android:authorities=&quot;${applicationId}.provider&quot;\r\n            android:exported=&quot;false&quot;\r\n            android:grantUriPermissions=&quot;true&quot;&gt;\r\n            &lt;meta-data\r\n                android:name=&quot;android.support.FILE_PROVIDER_PATHS&quot;\r\n                android:resource=&quot;@xml/file_paths&quot;&gt;\r\n            &lt;/meta-data&gt;\r\n        &lt;/provider&gt;\r\n\r\nAnd here is my pathing declarations. Again this is causing no issues for saving: \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;paths xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n    &lt;external-files-path\r\n        name=&quot;internal_images&quot;\r\n        path=&quot;files/Pictures&quot; /&gt;\r\n    &lt;external-files-path\r\n        name=&quot;internal_images_alternate&quot;\r\n        path=&quot;Pictures&quot; /&gt;\r\n    &lt;external-path\r\n        name=&quot;external&quot;\r\n        path=&quot;.&quot; /&gt;\r\n    &lt;external-files-path\r\n        name=&quot;external_files&quot;\r\n        path=&quot;.&quot; /&gt;\r\n    &lt;cache-path\r\n        name=&quot;cache&quot;\r\n        path=&quot;.&quot; /&gt;\r\n    &lt;external-cache-path\r\n        name=&quot;external_cache&quot;\r\n        path=&quot;.&quot; /&gt;\r\n    &lt;files-path\r\n        name=&quot;files&quot;\r\n        path=&quot;.&quot; /&gt;\r\n    &lt;/paths&gt;\r\n\r\n","title":"Renaming Video / Image While Targeting Android 11 (Api 30)","body":"<p>I'm having difficulty simply renaming a file created by the app but was put into the documents folder.</p>\n<p>EDIT:</p>\n<p>As it so happens the videos are not created by the application but are expected to be renamed by the application. The user drops the videos into the documents folder manually at the start. My mistake.</p>\n<p>Here is my code:</p>\n<pre><code>public static boolean renameVideoFile(Context c, File from, File to) {\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\n        try {\n            Uri fromUri = FileProvider.getUriForFile(c, c.getPackageName() + &quot;.provider&quot;, new File(FileUtils.getVideosDir(), from.getName()));\n            ContentResolver contentResolver = c.getContentResolver();\n            ContentValues contentValues = new ContentValues();\n\n            contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 1);\n            contentResolver.update(fromUri, contentValues, null, null);\n            contentValues.clear();\n            contentValues.put(MediaStore.Files.FileColumns.DISPLAY_NAME, to.getName());\n            contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 0);\n            contentResolver.update(fromUri, contentValues, null, null);\n            return true;\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return false;\n    } else {\n        if (from.renameTo(to)) {\n            removeMedia(c, from);\n            addMedia(c, to);\n            return true;\n        } else {\n            return false;\n        }\n    }\n}\n</code></pre>\n<p>I progressed through a few errors but my final error is:</p>\n<p>java.lang.UnsupportedOperationException: No external updates</p>\n<p>Which is an internal problem with the FileProvider at</p>\n<p>at androidx.core.content.FileProvider.update(FileProvider.java:523)</p>\n<p>EDIT #2\nAlso here are my provider declarations in the manifest:</p>\n<pre><code> &lt;provider\n        android:name=&quot;androidx.core.content.FileProvider&quot;\n        android:authorities=&quot;${applicationId}.provider&quot;\n        android:exported=&quot;false&quot;\n        android:grantUriPermissions=&quot;true&quot;&gt;\n        &lt;meta-data\n            android:name=&quot;android.support.FILE_PROVIDER_PATHS&quot;\n            android:resource=&quot;@xml/file_paths&quot;&gt;\n        &lt;/meta-data&gt;\n    &lt;/provider&gt;\n</code></pre>\n<p>And here is my pathing declarations. Again this is causing no issues for saving:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;paths xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n&lt;external-files-path\n    name=&quot;internal_images&quot;\n    path=&quot;files/Pictures&quot; /&gt;\n&lt;external-files-path\n    name=&quot;internal_images_alternate&quot;\n    path=&quot;Pictures&quot; /&gt;\n&lt;external-path\n    name=&quot;external&quot;\n    path=&quot;.&quot; /&gt;\n&lt;external-files-path\n    name=&quot;external_files&quot;\n    path=&quot;.&quot; /&gt;\n&lt;cache-path\n    name=&quot;cache&quot;\n    path=&quot;.&quot; /&gt;\n&lt;external-cache-path\n    name=&quot;external_cache&quot;\n    path=&quot;.&quot; /&gt;\n&lt;files-path\n    name=&quot;files&quot;\n    path=&quot;.&quot; /&gt;\n&lt;/paths&gt;\n</code></pre>\n"},{"tags":["java","android","android-11"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1615837657,"post_id":66642726,"comment_id":117811067,"body_markdown":"`path2 = path2.replaceAll(&quot;/&quot; + nome, &quot;&quot;);` You are messing around with building up a path. Nobody can follow you and i think you lost sight too. Further check the return value of mkdirs and if false handle accordingly. Remove the .createNewFile call. Rewrite your code please. Also here.","body":"<code>path2 = path2.replaceAll(&quot;&#47;&quot; + nome, &quot;&quot;);</code> You are messing around with building up a path. Nobody can follow you and i think you lost sight too. Further check the return value of mkdirs and if false handle accordingly. Remove the .createNewFile call. Rewrite your code please. Also here."},{"owner":{"account_id":6850340,"reputation":6801,"user_id":6021469,"accept_rate":29,"display_name":"Shweta Chauhan"},"score":0,"creation_date":1620390389,"post_id":66642726,"comment_id":119193505,"body_markdown":"did you get solution?? I don&#39;t want to use android:requestLegacyExternalStorage","body":"did you get solution?? I don&#39;t want to use android:requestLegacyExternalStorage"}],"answers":[{"tags":[],"owner":{"account_id":19615181,"reputation":732,"user_id":15394019,"display_name":"mindoverflow"},"down_vote_count":1,"up_vote_count":14,"is_accepted":true,"score":13,"last_activity_date":1615843532,"creation_date":1615843034,"answer_id":66645800,"question_id":66642726,"body_markdown":"In Android 11 ```android:requestLegacyExternalStorage=&quot;true&quot;``` will simply be ignored, since it was an ad-hoc solution for Android &lt; 11 to not break old apps.\r\nNow, you must use\r\n```\r\n&lt;uses-permission android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot;/&gt;\r\n```\r\nAlso you could just use SAF to avoid all this &#39;permissions&#39; hassle. This is what Google recommends for apps that do not need to manage most internal storage data. Refer to:\r\nhttps://developer.android.com/guide/topics/providers/document-provider\r\n\r\nHowever, if you don&#39;t want to break you app and lose all your hard work, consider\r\n```\r\nif(Environment.isExternalStorageManager())\r\n{\r\n\tinternal = new File(&quot;/sdcard&quot;);\r\n\tinternalContents = internal.listFiles();\r\n}\r\nelse\r\n{\r\n\tIntent permissionIntent = new Intent(Settings.ACTION_MANAGE_ALL_FILES_ACCESS_PERMISSION);\r\n\tstartActivity(permissionIntent);\r\n}\r\n```\r\nThis will bring up a settings page where you will be able to give storage access to your app. If the app already has permission, then you will be able to access the directory. Place this at the very beginning of ```onCreate()``` method *after* setting layout resource.\r\n\r\nIt&#39;s best not to do this for any future apps you build.","title":"java.io.FileNotFoundException open failed: EEXIST (File exists) Android 11","body":"<p>In Android 11 <code>android:requestLegacyExternalStorage=&quot;true&quot;</code> will simply be ignored, since it was an ad-hoc solution for Android &lt; 11 to not break old apps.\nNow, you must use</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot;/&gt;\n</code></pre>\n<p>Also you could just use SAF to avoid all this 'permissions' hassle. This is what Google recommends for apps that do not need to manage most internal storage data. Refer to:\n<a href=\"https://developer.android.com/guide/topics/providers/document-provider\" rel=\"noreferrer\">https://developer.android.com/guide/topics/providers/document-provider</a></p>\n<p>However, if you don't want to break you app and lose all your hard work, consider</p>\n<pre><code>if(Environment.isExternalStorageManager())\n{\n    internal = new File(&quot;/sdcard&quot;);\n    internalContents = internal.listFiles();\n}\nelse\n{\n    Intent permissionIntent = new Intent(Settings.ACTION_MANAGE_ALL_FILES_ACCESS_PERMISSION);\n    startActivity(permissionIntent);\n}\n</code></pre>\n<p>This will bring up a settings page where you will be able to give storage access to your app. If the app already has permission, then you will be able to access the directory. Place this at the very beginning of <code>onCreate()</code> method <em>after</em> setting layout resource.</p>\n<p>It's best not to do this for any future apps you build.</p>\n"},{"tags":[],"owner":{"account_id":21576422,"reputation":39,"user_id":15908471,"display_name":"Getenet Adamneh"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1620834441,"creation_date":1620834441,"answer_id":67506932,"question_id":66642726,"body_markdown":"Go to your mobile setting -&gt; apps -&gt; select your app -&gt; permissions -&gt; storage -&gt; select Allow managment of all files\r\n\r\nIt works for me.","title":"java.io.FileNotFoundException open failed: EEXIST (File exists) Android 11","body":"<p>Go to your mobile setting -&gt; apps -&gt; select your app -&gt; permissions -&gt; storage -&gt; select Allow managment of all files</p>\n<p>It works for me.</p>\n"},{"tags":[],"owner":{"account_id":5736115,"reputation":632,"user_id":4530241,"display_name":"Carlos Leonardo Camilo Vargas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676674527,"creation_date":1676674527,"answer_id":75489942,"question_id":66642726,"body_markdown":"Android has become too complex when it comes to creating folders.\r\n\r\nIf you want to avoid so many problems and not use things like `android:requestLegacyExternalStorage=&quot;true&quot;` and adding many permissions like `MANAGE_EXTERNAL_STORAGE`, `READ_EXTERNAL_STORAGE`, `WRITE_EXTERNAL_STORAGE` which can be a nightmare, even when it comes to publishing your app to the marketplace.\r\n\r\nIn addition to that, from Android version 30 onwards, you ca **NOT** extend `android:requestLegacyExternalStorage=&quot;true&quot;`. So you will have problems again.\r\n\r\nWhat is recommended is to start to save your recordings inside applications dedicated folder, because *in the future Android will no longer let you create folders anymore*, even with legacy methods. You can use **standard directories** in which to place any file like ***DIRECTORY_MUSIC***, ***DIRECTORY_PICTURES***, etc.\r\n\r\nFor instance, I created my own method for saving audio recording in **Android 33** and it works perfectly. I don&#39;t need to add anything to my `Manifest`.\r\n\r\n    override fun startRecording(): Boolean {\r\n        try {\r\n            val recordingStoragePath = &quot;${app.getExternalFilesDir(Environment.DIRECTORY_MUSIC)}&quot;\r\n            recordingFilePath = &quot;$recordingStoragePath/${fileRecordingUtils.generateFileName()}&quot;\r\n            mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC)\r\n            mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP)\r\n            // Audio Quality Normal\r\n            mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB)\r\n            mediaRecorder.setAudioSamplingRate(8000)\r\n            // Set path\r\n            mediaRecorder.setOutputFile(recordingFilePath)\r\n            mediaRecorder.prepare()\r\n            mediaRecorder.start()\r\n            Toast.makeText(app, &quot;Recording Started&quot;, Toast.LENGTH_SHORT).show()\r\n        } catch (e: IOException) {\r\n            Toast.makeText(app, &quot;Recording Failed. Problem accessing storage.&quot;, Toast.LENGTH_SHORT).show()\r\n            mediaRecorder.reset()\r\n            return false\r\n        } catch (e: Exception) {\r\n            mediaRecorder.reset()\r\n            return false\r\n        }\r\n        return true\r\n    }\r\n\r\n","title":"java.io.FileNotFoundException open failed: EEXIST (File exists) Android 11","body":"<p>Android has become too complex when it comes to creating folders.</p>\n<p>If you want to avoid so many problems and not use things like <code>android:requestLegacyExternalStorage=&quot;true&quot;</code> and adding many permissions like <code>MANAGE_EXTERNAL_STORAGE</code>, <code>READ_EXTERNAL_STORAGE</code>, <code>WRITE_EXTERNAL_STORAGE</code> which can be a nightmare, even when it comes to publishing your app to the marketplace.</p>\n<p>In addition to that, from Android version 30 onwards, you ca <strong>NOT</strong> extend <code>android:requestLegacyExternalStorage=&quot;true&quot;</code>. So you will have problems again.</p>\n<p>What is recommended is to start to save your recordings inside applications dedicated folder, because <em>in the future Android will no longer let you create folders anymore</em>, even with legacy methods. You can use <strong>standard directories</strong> in which to place any file like <em><strong>DIRECTORY_MUSIC</strong></em>, <em><strong>DIRECTORY_PICTURES</strong></em>, etc.</p>\n<p>For instance, I created my own method for saving audio recording in <strong>Android 33</strong> and it works perfectly. I don't need to add anything to my <code>Manifest</code>.</p>\n<pre><code>override fun startRecording(): Boolean {\n    try {\n        val recordingStoragePath = &quot;${app.getExternalFilesDir(Environment.DIRECTORY_MUSIC)}&quot;\n        recordingFilePath = &quot;$recordingStoragePath/${fileRecordingUtils.generateFileName()}&quot;\n        mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC)\n        mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP)\n        // Audio Quality Normal\n        mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB)\n        mediaRecorder.setAudioSamplingRate(8000)\n        // Set path\n        mediaRecorder.setOutputFile(recordingFilePath)\n        mediaRecorder.prepare()\n        mediaRecorder.start()\n        Toast.makeText(app, &quot;Recording Started&quot;, Toast.LENGTH_SHORT).show()\n    } catch (e: IOException) {\n        Toast.makeText(app, &quot;Recording Failed. Problem accessing storage.&quot;, Toast.LENGTH_SHORT).show()\n        mediaRecorder.reset()\n        return false\n    } catch (e: Exception) {\n        mediaRecorder.reset()\n        return false\n    }\n    return true\n}\n</code></pre>\n"}],"owner":{"account_id":20142209,"reputation":139,"user_id":14771662,"display_name":"TheAppleGeeK"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17083,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":66645800,"answer_count":3,"score":10,"last_activity_date":1676674527,"creation_date":1615829203,"question_id":66642726,"body_markdown":"I was trying to download an image from a server and save it in the external memory, but in Android 11 it gives me an error when I try to create the file.\r\nI have granted permission to access the external storage.\r\n\r\ni searched a bit on the internet and they suggested me to put this code in the manifest, but it didn&#39;t work for android 11\r\n\r\n```\r\nandroid:requestLegacyExternalStorage=&quot;true&quot;\r\n```\r\n\r\nmanifest\r\n```\r\n&lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:requestLegacyExternalStorage=&quot;true&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.TestDwonloadImgApp&quot;\r\n        android:usesCleartextTraffic=&quot;true&quot;&gt;\r\n        &lt;activity android:name=&quot;.MainActivity2&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n        &lt;activity android:name=&quot;.MainActivity&quot;&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n```\r\n\r\nMainActivity\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        ImageView img = findViewById(R.id.img);\r\n\r\n        ImmagineInterface ii = RetrofitManager.retrofit.create(ImmagineInterface.class);\r\n        Call&lt;ResponseBody&gt; call = ii.downloadFile(&quot;/immaginimusei/arte-scienza.jpg&quot;);\r\n        call.enqueue(new Callback&lt;ResponseBody&gt;() {\r\n            @Override\r\n            public void onResponse(Call&lt;ResponseBody&gt; call, Response&lt;ResponseBody&gt; response) {\r\n                if (response.code() == 200) {\r\n                    boolean result = writeResponseBody(response.body(), &quot;/immaginimusei/arte-scienza.jpg&quot;);\r\n                    if(result) {\r\n                        Bitmap bitmap = BitmapFactory.decodeFile(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).toString() + &quot;/ArtHunter/immaginimusei/arte-scienza.jpg&quot;);\r\n                        img.setImageBitmap(bitmap);\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onFailure(Call&lt;ResponseBody&gt; call, Throwable t) {\r\n                Bitmap bitmap = BitmapFactory.decodeFile(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).toString() + &quot;/ArtHunter/immaginimusei/arte-scienza.jpg&quot;);\r\n                img.setImageBitmap(bitmap);\r\n            }\r\n        });\r\n    }\r\n}\r\n```\r\n\r\nwriteResponseBody\r\n```\r\npublic static boolean writeResponseBody(ResponseBody body, String dir1) {\r\n        try {\r\n            String state = Environment.getExternalStorageState();\r\n            if (Environment.MEDIA_MOUNTED.equals(state)) {\r\n                // todo change the file location/name according to your needs\r\n\r\n                String path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).toString() + &quot;/ArtHunter&quot;;\r\n\r\n                String path1 = path + dir1;\r\n                File f = new File(path1);\r\n                String path2 = f.getPath();\r\n                String nome = f.getName();\r\n                path2 = path2.replaceAll(&quot;/&quot; + nome, &quot;&quot;);\r\n\r\n                File directory = new File(path2);\r\n                if (!directory.exists())\r\n                    directory.mkdirs();\r\n\r\n                File img = new File(path2, nome);\r\n                if (img.exists())\r\n                    return true;\r\n                img.createNewFile();\r\n\r\n                InputStream inputStream = null;\r\n                FileOutputStream outputStream = null;\r\n\r\n                try {\r\n                    byte[] fileReader = new byte[4096];\r\n\r\n                    inputStream = body.byteStream();\r\n                    outputStream = new FileOutputStream(img); //error here!\r\n\r\n                    while (true) {\r\n                        int read = inputStream.read(fileReader);\r\n\r\n                        if (read == -1) {\r\n                            break;\r\n                        }\r\n\r\n                        outputStream.write(fileReader, 0, read);\r\n\r\n                    }\r\n\r\n                    outputStream.flush();\r\n\r\n                    return true;\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                    return false;\r\n                } finally {\r\n                    if (inputStream != null) {\r\n                        inputStream.close();\r\n                    }\r\n\r\n                    if (outputStream != null) {\r\n                        outputStream.close();\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            return false;\r\n        }\r\n    }\r\n```\r\n\r\nerror\r\n```\r\n/System.err: java.io.FileNotFoundException: /storage/emulated/0/Download/ArtHunter/immaginimusei/arte-scienza.jpg: open failed: EEXIST (File exists)\r\nW/System.err:     at libcore.io.IoBridge.open(IoBridge.java:492)\r\n        at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:236)\r\n        at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:186)\r\n        at com.theapplegeek.testdwonloadimgapp.MainActivity.writeResponseBody(MainActivity.java:93)\r\n        at com.theapplegeek.testdwonloadimgapp.MainActivity$1.onResponse(MainActivity.java:47)\r\n        at retrofit2.DefaultCallAdapterFactory$ExecutorCallbackCall$1.lambda$onResponse$0$DefaultCallAdapterFactory$ExecutorCallbackCall$1(DefaultCallAdapterFactory.java:89)\r\n        at retrofit2.-$$Lambda$DefaultCallAdapterFactory$ExecutorCallbackCall$1$hVGjmafRi6VitDIrPNdoFizVAdk.run(Unknown Source:6)\r\n        at android.os.Handler.handleCallback(Handler.java:938)\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n        at android.os.Looper.loop(Looper.java:245)\r\n        at android.app.ActivityThread.main(ActivityThread.java:8004)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:631)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:978)\r\n    Caused by: android.system.ErrnoException: open failed: EEXIST (File exists)\r\n        at libcore.io.Linux.open(Native Method)\r\n        at libcore.io.ForwardingOs.open(ForwardingOs.java:166)\r\n        at libcore.io.BlockGuardOs.open(BlockGuardOs.java:254)\r\nW/System.err:     at libcore.io.ForwardingOs.open(ForwardingOs.java:166)\r\n        at android.app.ActivityThread$AndroidOs.open(ActivityThread.java:7865)\r\n        at libcore.io.IoBridge.open(IoBridge.java:478)\r\n    \t... 13 more\r\n```","title":"java.io.FileNotFoundException open failed: EEXIST (File exists) Android 11","body":"<p>I was trying to download an image from a server and save it in the external memory, but in Android 11 it gives me an error when I try to create the file.\nI have granted permission to access the external storage.</p>\n<p>i searched a bit on the internet and they suggested me to put this code in the manifest, but it didn't work for android 11</p>\n<pre><code>android:requestLegacyExternalStorage=&quot;true&quot;\n</code></pre>\n<p>manifest</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:requestLegacyExternalStorage=&quot;true&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.TestDwonloadImgApp&quot;\n        android:usesCleartextTraffic=&quot;true&quot;&gt;\n        &lt;activity android:name=&quot;.MainActivity2&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n        &lt;activity android:name=&quot;.MainActivity&quot;&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n</code></pre>\n<p>MainActivity</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        ImageView img = findViewById(R.id.img);\n\n        ImmagineInterface ii = RetrofitManager.retrofit.create(ImmagineInterface.class);\n        Call&lt;ResponseBody&gt; call = ii.downloadFile(&quot;/immaginimusei/arte-scienza.jpg&quot;);\n        call.enqueue(new Callback&lt;ResponseBody&gt;() {\n            @Override\n            public void onResponse(Call&lt;ResponseBody&gt; call, Response&lt;ResponseBody&gt; response) {\n                if (response.code() == 200) {\n                    boolean result = writeResponseBody(response.body(), &quot;/immaginimusei/arte-scienza.jpg&quot;);\n                    if(result) {\n                        Bitmap bitmap = BitmapFactory.decodeFile(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).toString() + &quot;/ArtHunter/immaginimusei/arte-scienza.jpg&quot;);\n                        img.setImageBitmap(bitmap);\n                    }\n                }\n            }\n\n            @Override\n            public void onFailure(Call&lt;ResponseBody&gt; call, Throwable t) {\n                Bitmap bitmap = BitmapFactory.decodeFile(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).toString() + &quot;/ArtHunter/immaginimusei/arte-scienza.jpg&quot;);\n                img.setImageBitmap(bitmap);\n            }\n        });\n    }\n}\n</code></pre>\n<p>writeResponseBody</p>\n<pre><code>public static boolean writeResponseBody(ResponseBody body, String dir1) {\n        try {\n            String state = Environment.getExternalStorageState();\n            if (Environment.MEDIA_MOUNTED.equals(state)) {\n                // todo change the file location/name according to your needs\n\n                String path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).toString() + &quot;/ArtHunter&quot;;\n\n                String path1 = path + dir1;\n                File f = new File(path1);\n                String path2 = f.getPath();\n                String nome = f.getName();\n                path2 = path2.replaceAll(&quot;/&quot; + nome, &quot;&quot;);\n\n                File directory = new File(path2);\n                if (!directory.exists())\n                    directory.mkdirs();\n\n                File img = new File(path2, nome);\n                if (img.exists())\n                    return true;\n                img.createNewFile();\n\n                InputStream inputStream = null;\n                FileOutputStream outputStream = null;\n\n                try {\n                    byte[] fileReader = new byte[4096];\n\n                    inputStream = body.byteStream();\n                    outputStream = new FileOutputStream(img); //error here!\n\n                    while (true) {\n                        int read = inputStream.read(fileReader);\n\n                        if (read == -1) {\n                            break;\n                        }\n\n                        outputStream.write(fileReader, 0, read);\n\n                    }\n\n                    outputStream.flush();\n\n                    return true;\n                } catch (IOException e) {\n                    e.printStackTrace();\n                    return false;\n                } finally {\n                    if (inputStream != null) {\n                        inputStream.close();\n                    }\n\n                    if (outputStream != null) {\n                        outputStream.close();\n                    }\n                }\n            }\n            return false;\n        } catch (IOException e) {\n            e.printStackTrace();\n            return false;\n        }\n    }\n</code></pre>\n<p>error</p>\n<pre><code>/System.err: java.io.FileNotFoundException: /storage/emulated/0/Download/ArtHunter/immaginimusei/arte-scienza.jpg: open failed: EEXIST (File exists)\nW/System.err:     at libcore.io.IoBridge.open(IoBridge.java:492)\n        at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:236)\n        at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:186)\n        at com.theapplegeek.testdwonloadimgapp.MainActivity.writeResponseBody(MainActivity.java:93)\n        at com.theapplegeek.testdwonloadimgapp.MainActivity$1.onResponse(MainActivity.java:47)\n        at retrofit2.DefaultCallAdapterFactory$ExecutorCallbackCall$1.lambda$onResponse$0$DefaultCallAdapterFactory$ExecutorCallbackCall$1(DefaultCallAdapterFactory.java:89)\n        at retrofit2.-$$Lambda$DefaultCallAdapterFactory$ExecutorCallbackCall$1$hVGjmafRi6VitDIrPNdoFizVAdk.run(Unknown Source:6)\n        at android.os.Handler.handleCallback(Handler.java:938)\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n        at android.os.Looper.loop(Looper.java:245)\n        at android.app.ActivityThread.main(ActivityThread.java:8004)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:631)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:978)\n    Caused by: android.system.ErrnoException: open failed: EEXIST (File exists)\n        at libcore.io.Linux.open(Native Method)\n        at libcore.io.ForwardingOs.open(ForwardingOs.java:166)\n        at libcore.io.BlockGuardOs.open(BlockGuardOs.java:254)\nW/System.err:     at libcore.io.ForwardingOs.open(ForwardingOs.java:166)\n        at android.app.ActivityThread$AndroidOs.open(ActivityThread.java:7865)\n        at libcore.io.IoBridge.open(IoBridge.java:478)\n        ... 13 more\n</code></pre>\n"},{"tags":["java","logging","slf4j","dropwizard","datadog"],"owner":{"account_id":2546573,"reputation":1284,"user_id":2211267,"accept_rate":58,"display_name":"Whizzil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676673474,"creation_date":1676673474,"question_id":75489837,"body_markdown":"I&#39;m trying to integrate my Dropwizard Kotlin app with DataDog, and DataDog requires JSON logs for JVM apps: https://docs.datadoghq.com/logs/log_collection/java/?tab=log4j\r\n\r\nNow this is how currently my `config.yml` looks like:\r\n```\r\nlogging:\r\n  level: INFO\r\n  loggers:\r\n    &quot;org.eclipse.jetty&quot;: INFO\r\n    &quot;io.swagger&quot;: INFO\r\n  appenders:\r\n    - type: console\r\n      logFormat: &quot;%-6level [%d{HH:mm:ss.SSS}] [%t] %logger{5} - %X{code} %msg %n&quot;\r\n\r\nserver:\r\n  requestLog:\r\n    appenders:\r\n      - type: console\r\n        layout:\r\n          type: access-json\r\n          timestampFormat: &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&#39;Z&#39;&quot;\r\n```\r\n\r\nAnd in the app, I use this logger:\r\n```\r\nimport mu.KotlinLogging\r\n\r\nprivate val logger = KotlinLogging.logger { }\r\n```\r\n\r\nand this is the logging dependencies that I have:\r\n```\r\n    api &quot;io.github.microutils:kotlin-logging-jvm:$kotlinLoggingVersion&quot;\r\n    api &quot;org.apache.logging.log4j:log4j-core:$apacheLoggingVersion&quot;\r\n    api &quot;org.slf4j:slf4j-api:$slf4jVersion&quot;\r\n```\r\n\r\nHowever, this still doesn&#39;t log as JSON. Any ideas how to fix that?","title":"Dropwizard Kotlin JSON logging","body":"<p>I'm trying to integrate my Dropwizard Kotlin app with DataDog, and DataDog requires JSON logs for JVM apps: <a href=\"https://docs.datadoghq.com/logs/log_collection/java/?tab=log4j\" rel=\"nofollow noreferrer\">https://docs.datadoghq.com/logs/log_collection/java/?tab=log4j</a></p>\n<p>Now this is how currently my <code>config.yml</code> looks like:</p>\n<pre><code>logging:\n  level: INFO\n  loggers:\n    &quot;org.eclipse.jetty&quot;: INFO\n    &quot;io.swagger&quot;: INFO\n  appenders:\n    - type: console\n      logFormat: &quot;%-6level [%d{HH:mm:ss.SSS}] [%t] %logger{5} - %X{code} %msg %n&quot;\n\nserver:\n  requestLog:\n    appenders:\n      - type: console\n        layout:\n          type: access-json\n          timestampFormat: &quot;yyyy-MM-dd'T'HH:mm:ss.SSS'Z'&quot;\n</code></pre>\n<p>And in the app, I use this logger:</p>\n<pre><code>import mu.KotlinLogging\n\nprivate val logger = KotlinLogging.logger { }\n</code></pre>\n<p>and this is the logging dependencies that I have:</p>\n<pre><code>    api &quot;io.github.microutils:kotlin-logging-jvm:$kotlinLoggingVersion&quot;\n    api &quot;org.apache.logging.log4j:log4j-core:$apacheLoggingVersion&quot;\n    api &quot;org.slf4j:slf4j-api:$slf4jVersion&quot;\n</code></pre>\n<p>However, this still doesn't log as JSON. Any ideas how to fix that?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","oauth-2.0"],"answers":[{"tags":[],"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676672751,"creation_date":1676672751,"answer_id":75489777,"question_id":75489659,"body_markdown":"If you look at it from another perspective, anyone able to modify your service will also have access to the key that you use to decode your encrypted database entries.\r\n\r\nIt doesn&#39;t matter where you get your keys from, Hashicorp Vault, Kubernetes etcd (as a Secret), your service still has to have access to some kind of secret (private key, password, keytab) to access the rest of the data\r\n\r\nA best practice is to use files to store the secrets and not to use environment variables, don&#39;t do something like evn DB_DECODE_PASSWORD=verySecret. Put ot in a file that you can read.\r\n\r\nSo, you either trust your runtime environment or you don&#39;t, it really is that simple.","title":"Does using Spring&#39;s Oauth2 InMemoryClientRegistrationRepository represent a security risk?","body":"<p>If you look at it from another perspective, anyone able to modify your service will also have access to the key that you use to decode your encrypted database entries.</p>\n<p>It doesn't matter where you get your keys from, Hashicorp Vault, Kubernetes etcd (as a Secret), your service still has to have access to some kind of secret (private key, password, keytab) to access the rest of the data</p>\n<p>A best practice is to use files to store the secrets and not to use environment variables, don't do something like evn DB_DECODE_PASSWORD=verySecret. Put ot in a file that you can read.</p>\n<p>So, you either trust your runtime environment or you don't, it really is that simple.</p>\n"}],"owner":{"account_id":4423351,"reputation":314,"user_id":3602557,"display_name":"franky duke"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":173,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75489777,"answer_count":1,"score":0,"last_activity_date":1676672751,"creation_date":1676671787,"question_id":75489659,"body_markdown":"***TL;DR:*** \r\nIs it ok (..against potential attacks / secured-enough) for a backend application to store sensible information in-memory in clear text (such as oauth2 token uri+credentials of external authz servers), for caching / performance optimization?\r\n\r\n----\r\n\r\n***My setup:***\r\nI am using Spring Boot 3 with Spring Security 6, and Spring Webflux for its webclient in order to call external web services.\r\n\r\nI have configured my Spring Security configuration to inject an OAuth2 filter into the spring webflux.webclient in order to authenticate against external authorization servers. So far so good, everything was tested and working as expected.\r\n\r\n***My concern:***\r\nWhen looking at my setup from a security standpoint, under the hood, Spring defaults to using &quot;InMemoryClientRegistrationRepository&quot; for all &quot;[web] client [oauth2 configuration] registrations&quot;, which means that it stores in-memory all my configured oauth2 client configurations, that I ensure in the first place to be well secured when persisted, e.g. all my oauth2 credentials are strongly encrypted strings using AES/GCM in my database.\r\n\r\nBut once I read those oauth2 configs from my db (and decrypt), and send that over to Spring Webclient (through for instance ServletOAuth2AuthorizedClientExchangeFilterFunction), those oauth2 configs end up being stored by Spring in-memory, in clear text; it is easy to inject spring&#39;s &quot;OAuth2AuthorizedClientRepository&quot; instance in any other app bean such as any of my controller/service, to debug and see all my oauth2 credentials cached in-memory by spring (clientId, clientSecret, tokenUri, etc) in clear text, and that info. actually points to many external systems that will eventually end up be all customers&#39;/external systems&#39; authz servers:S ..so I absolutely need to take some good care of those credentials.\r\n\r\nAm I right to be concerned by such in-memory caching of that oauth2 sensitive information, and should I work toward replacing it with perhaps a custom client repository that also does caching like spring for performance optimization, but at the same time encrypts at least the oauth2 client secrets before storing in-memory, to prevent some very unlikely in-memory attacks (perhaps an attack that would force app. to do some kind of thread+memory dump, to then access the memory dump on disk and get those oauth2 credentials..), or am I way over-thinking all this, and if we can&#39;t even store sensisble information in application cache/memory (which is very different than storing on disk), then it might be just better to never go out and just stay home?..!\r\n\r\nI would appreciate some feedback from folks considering themselves great at dealing with application security in general:) What do you think?!\r\n\r\nthanks!","title":"Does using Spring&#39;s Oauth2 InMemoryClientRegistrationRepository represent a security risk?","body":"<p><em><strong>TL;DR:</strong></em>\nIs it ok (..against potential attacks / secured-enough) for a backend application to store sensible information in-memory in clear text (such as oauth2 token uri+credentials of external authz servers), for caching / performance optimization?</p>\n<hr />\n<p><em><strong>My setup:</strong></em>\nI am using Spring Boot 3 with Spring Security 6, and Spring Webflux for its webclient in order to call external web services.</p>\n<p>I have configured my Spring Security configuration to inject an OAuth2 filter into the spring webflux.webclient in order to authenticate against external authorization servers. So far so good, everything was tested and working as expected.</p>\n<p><em><strong>My concern:</strong></em>\nWhen looking at my setup from a security standpoint, under the hood, Spring defaults to using &quot;InMemoryClientRegistrationRepository&quot; for all &quot;[web] client [oauth2 configuration] registrations&quot;, which means that it stores in-memory all my configured oauth2 client configurations, that I ensure in the first place to be well secured when persisted, e.g. all my oauth2 credentials are strongly encrypted strings using AES/GCM in my database.</p>\n<p>But once I read those oauth2 configs from my db (and decrypt), and send that over to Spring Webclient (through for instance ServletOAuth2AuthorizedClientExchangeFilterFunction), those oauth2 configs end up being stored by Spring in-memory, in clear text; it is easy to inject spring's &quot;OAuth2AuthorizedClientRepository&quot; instance in any other app bean such as any of my controller/service, to debug and see all my oauth2 credentials cached in-memory by spring (clientId, clientSecret, tokenUri, etc) in clear text, and that info. actually points to many external systems that will eventually end up be all customers'/external systems' authz servers:S ..so I absolutely need to take some good care of those credentials.</p>\n<p>Am I right to be concerned by such in-memory caching of that oauth2 sensitive information, and should I work toward replacing it with perhaps a custom client repository that also does caching like spring for performance optimization, but at the same time encrypts at least the oauth2 client secrets before storing in-memory, to prevent some very unlikely in-memory attacks (perhaps an attack that would force app. to do some kind of thread+memory dump, to then access the memory dump on disk and get those oauth2 credentials..), or am I way over-thinking all this, and if we can't even store sensisble information in application cache/memory (which is very different than storing on disk), then it might be just better to never go out and just stay home?..!</p>\n<p>I would appreciate some feedback from folks considering themselves great at dealing with application security in general:) What do you think?!</p>\n<p>thanks!</p>\n"},{"tags":["java","spring","spring-mvc","junit","integration-testing"],"answers":[{"tags":[],"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"down_vote_count":0,"up_vote_count":61,"is_accepted":false,"score":61,"last_activity_date":1676672573,"creation_date":1410997447,"answer_id":25902063,"question_id":25901985,"body_markdown":"With `MockMvc`, you&#39;re typically setting up a whole web application context and mocking the HTTP requests and responses. So, although a fake `DispatcherServlet` is up and running, simulating how your MVC stack will function, there are no real network connections made.\r\n\r\n`RestTemplate` can conveniently be [initialized][1] with a custom [`ClientHttpRequestFactory`][2]. Implementations usually create `ClientHttpRequest` objects that open actual TCP/HTTP(s) connections. But you don&#39;t have to. You can provide a mock implementation where you can do whatever you want. In fact, this is how the [`MockRestServiceServer`][3] utility operates, you could use that.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html#%3Cinit%3E(org.springframework.http.client.ClientHttpRequestFactory)\r\n  [2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/client/ClientHttpRequestFactory.html\r\n  [3]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/client/MockRestServiceServer.html","title":"Difference between MockMvc and RestTemplate in integration tests","body":"<p>With <code>MockMvc</code>, you're typically setting up a whole web application context and mocking the HTTP requests and responses. So, although a fake <code>DispatcherServlet</code> is up and running, simulating how your MVC stack will function, there are no real network connections made.</p>\n<p><code>RestTemplate</code> can conveniently be <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html#%3Cinit%3E(org.springframework.http.client.ClientHttpRequestFactory)\" rel=\"nofollow noreferrer\">initialized</a> with a custom <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/client/ClientHttpRequestFactory.html\" rel=\"nofollow noreferrer\"><code>ClientHttpRequestFactory</code></a>. Implementations usually create <code>ClientHttpRequest</code> objects that open actual TCP/HTTP(s) connections. But you don't have to. You can provide a mock implementation where you can do whatever you want. In fact, this is how the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/client/MockRestServiceServer.html\" rel=\"nofollow noreferrer\"><code>MockRestServiceServer</code></a> utility operates, you could use that.</p>\n"},{"tags":[],"owner":{"account_id":4188794,"reputation":951,"user_id":3431849,"display_name":"nivash"},"down_vote_count":0,"up_vote_count":69,"is_accepted":true,"score":69,"last_activity_date":1647924375,"creation_date":1456320276,"answer_id":35603473,"question_id":25901985,"body_markdown":"As said in [this][1] \r\narticle you should use `MockMvc` when you want to test **Server-side** of application:\r\n\r\n\r\n&gt; Spring MVC Test builds on the mock request and response from `spring-test` and does not require a running servlet container. The main difference is that actual Spring MVC configuration is loaded through the TestContext framework and that the request is performed by actually invoking the `DispatcherServlet` and all the same Spring MVC infrastructure that is used at runtime.\r\n\r\nfor example:\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @WebAppConfiguration\r\n    @ContextConfiguration(&quot;servlet-context.xml&quot;)\r\n    public class SampleTests {\r\n    \r\n      @Autowired\r\n      private WebApplicationContext wac;\r\n    \r\n      private MockMvc mockMvc;\r\n    \r\n      @Before\r\n      public void setup() {\r\n        this.mockMvc = webAppContextSetup(this.wac).build();\r\n      }\r\n    \r\n      @Test\r\n      public void getFoo() throws Exception {\r\n        this.mockMvc.perform(get(&quot;/foo&quot;).accept(&quot;application/json&quot;))\r\n            .andExpect(status().isOk())\r\n            .andExpect(content().contentType(&quot;application/json&quot;))\r\n            .andExpect(jsonPath(&quot;$.name&quot;).value(&quot;Lee&quot;));\r\n      }}\r\n\r\n And `RestTemplate` you should use when you want to test **Rest Client-side** application:\r\n\r\n&gt; If you have code using the `RestTemplate`, you’ll probably want to test it and to that you can target a running server or mock the RestTemplate. The client-side REST test support offers a third alternative, which is to use the actual `RestTemplate` but configure it with a custom `ClientHttpRequestFactory` that checks expectations against actual requests and returns stub responses.\r\n\r\nexample:\r\n\r\n    RestTemplate restTemplate = new RestTemplate();\r\n    MockRestServiceServer mockServer = MockRestServiceServer.createServer(restTemplate);\r\n    \r\n    mockServer.expect(requestTo(&quot;/greeting&quot;))\r\n      .andRespond(withSuccess(&quot;Hello world&quot;, &quot;text/plain&quot;));\r\n    \r\n    // use RestTemplate ...\r\n    \r\n    mockServer.verify();\r\n\r\nalso read [this example][2]\r\n\r\n\r\n  [1]: https://spring.io/blog/2012/11/12/spring-framework-3-2-rc1-spring-mvc-test-framework\r\n  [2]: http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/client/MockRestServiceServer.html","title":"Difference between MockMvc and RestTemplate in integration tests","body":"<p>As said in <a href=\"https://spring.io/blog/2012/11/12/spring-framework-3-2-rc1-spring-mvc-test-framework\" rel=\"noreferrer\">this</a>\narticle you should use <code>MockMvc</code> when you want to test <strong>Server-side</strong> of application:</p>\n<blockquote>\n<p>Spring MVC Test builds on the mock request and response from <code>spring-test</code> and does not require a running servlet container. The main difference is that actual Spring MVC configuration is loaded through the TestContext framework and that the request is performed by actually invoking the <code>DispatcherServlet</code> and all the same Spring MVC infrastructure that is used at runtime.</p>\n</blockquote>\n<p>for example:</p>\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@WebAppConfiguration\n@ContextConfiguration(&quot;servlet-context.xml&quot;)\npublic class SampleTests {\n\n  @Autowired\n  private WebApplicationContext wac;\n\n  private MockMvc mockMvc;\n\n  @Before\n  public void setup() {\n    this.mockMvc = webAppContextSetup(this.wac).build();\n  }\n\n  @Test\n  public void getFoo() throws Exception {\n    this.mockMvc.perform(get(&quot;/foo&quot;).accept(&quot;application/json&quot;))\n        .andExpect(status().isOk())\n        .andExpect(content().contentType(&quot;application/json&quot;))\n        .andExpect(jsonPath(&quot;$.name&quot;).value(&quot;Lee&quot;));\n  }}\n</code></pre>\n<p>And <code>RestTemplate</code> you should use when you want to test <strong>Rest Client-side</strong> application:</p>\n<blockquote>\n<p>If you have code using the <code>RestTemplate</code>, you’ll probably want to test it and to that you can target a running server or mock the RestTemplate. The client-side REST test support offers a third alternative, which is to use the actual <code>RestTemplate</code> but configure it with a custom <code>ClientHttpRequestFactory</code> that checks expectations against actual requests and returns stub responses.</p>\n</blockquote>\n<p>example:</p>\n<pre><code>RestTemplate restTemplate = new RestTemplate();\nMockRestServiceServer mockServer = MockRestServiceServer.createServer(restTemplate);\n\nmockServer.expect(requestTo(&quot;/greeting&quot;))\n  .andRespond(withSuccess(&quot;Hello world&quot;, &quot;text/plain&quot;));\n\n// use RestTemplate ...\n\nmockServer.verify();\n</code></pre>\n<p>also read <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/client/MockRestServiceServer.html\" rel=\"noreferrer\">this example</a></p>\n"},{"tags":[],"owner":{"account_id":23506,"reputation":7505,"user_id":58962,"accept_rate":65,"display_name":"Michael B&#246;ckling"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1487694882,"creation_date":1487694882,"answer_id":42372950,"question_id":25901985,"body_markdown":"It is possible to use both RestTemplate and MockMvc!\r\n\r\nThis is useful if you have a separate client where you already do the tedious mapping of Java objects to URLs and converting to and from Json, and you want to reuse that for your MockMVC tests. \r\n\r\nHere is how to do it:\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @ActiveProfiles(&quot;integration&quot;)\r\n    @WebMvcTest(ControllerUnderTest.class)\r\n    public class MyTestShould {\r\n\r\n        @Autowired\r\n        private MockMvc mockMvc;\r\n\r\n        @Test\r\n        public void verify_some_condition() throws Exception {\r\n\r\n            MockMvcClientHttpRequestFactory requestFactory = new MockMvcClientHttpRequestFactory(mockMvc);\r\n            RestTemplate restTemplate = new RestTemplate(requestFactory);\r\n\r\n            ResponseEntity&lt;SomeClass&gt; result = restTemplate.getForEntity(&quot;/my/url&quot;, SomeClass.class);\r\n        \r\n            [...]\r\n        }\r\n\r\n    }\r\n","title":"Difference between MockMvc and RestTemplate in integration tests","body":"<p>It is possible to use both RestTemplate and MockMvc!</p>\n\n<p>This is useful if you have a separate client where you already do the tedious mapping of Java objects to URLs and converting to and from Json, and you want to reuse that for your MockMVC tests. </p>\n\n<p>Here is how to do it:</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@ActiveProfiles(\"integration\")\n@WebMvcTest(ControllerUnderTest.class)\npublic class MyTestShould {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @Test\n    public void verify_some_condition() throws Exception {\n\n        MockMvcClientHttpRequestFactory requestFactory = new MockMvcClientHttpRequestFactory(mockMvc);\n        RestTemplate restTemplate = new RestTemplate(requestFactory);\n\n        ResponseEntity&lt;SomeClass&gt; result = restTemplate.getForEntity(\"/my/url\", SomeClass.class);\n\n        [...]\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":250567,"reputation":6295,"user_id":2056394,"accept_rate":50,"display_name":"Denis C de Azevedo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40745,"favorite_count":0,"down_vote_count":1,"up_vote_count":90,"accepted_answer_id":35603473,"answer_count":3,"score":89,"last_activity_date":1676672573,"creation_date":1410996891,"question_id":25901985,"body_markdown":"Both [MockMvc](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/client/MockRestServiceServer.html) and [RestTemplate](http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html) are used for integration tests with Spring and JUnit.\r\n\r\nQuestion is: what&#39;s the difference between them and when we should choose one over another?\r\n\r\nHere are just examples of both options:\r\n\r\n    //MockMVC example\r\n    mockMvc.perform(get(&quot;/api/users&quot;))\r\n                .andExpect(status().isOk())\r\n                (...)\r\n\r\n    //RestTemplate example\r\n    ResponseEntity&lt;User&gt; entity = restTemplate.exchange(&quot;/api/users&quot;,\r\n                HttpMethod.GET,\r\n                new HttpEntity&lt;String&gt;(...),\r\n                User.class);\r\n    assertEquals(HttpStatus.OK, entity.getStatusCode());\r\n","title":"Difference between MockMvc and RestTemplate in integration tests","body":"<p>Both <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/client/MockRestServiceServer.html\" rel=\"noreferrer\">MockMvc</a> and <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html\" rel=\"noreferrer\">RestTemplate</a> are used for integration tests with Spring and JUnit.</p>\n<p>Question is: what's the difference between them and when we should choose one over another?</p>\n<p>Here are just examples of both options:</p>\n<pre><code>//MockMVC example\nmockMvc.perform(get(&quot;/api/users&quot;))\n            .andExpect(status().isOk())\n            (...)\n\n//RestTemplate example\nResponseEntity&lt;User&gt; entity = restTemplate.exchange(&quot;/api/users&quot;,\n            HttpMethod.GET,\n            new HttpEntity&lt;String&gt;(...),\n            User.class);\nassertEquals(HttpStatus.OK, entity.getStatusCode());\n</code></pre>\n"},{"tags":["java","sql","spring","database","namedparameterjdbctemplate"],"comments":[{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1676666926,"post_id":75489105,"comment_id":133190721,"body_markdown":"I don&#39;t think you can use named parameters as column name placeholders (as opposed, for example, to values in a `where` clause). But, regardless, in this case, why can&#39;t you just change `:joiningDate as EMP_FIRST_DATE` to `EMP_JOINING_DATE as EMP_FIRST_DATE`?","body":"I don&#39;t think you can use named parameters as column name placeholders (as opposed, for example, to values in a <code>where</code> clause). But, regardless, in this case, why can&#39;t you just change <code>:joiningDate as EMP_FIRST_DATE</code> to <code>EMP_JOINING_DATE as EMP_FIRST_DATE</code>?"},{"owner":{"account_id":14921587,"reputation":277,"user_id":10773697,"display_name":"San4musa"},"score":0,"creation_date":1676671651,"post_id":75489105,"comment_id":133191662,"body_markdown":"Actually I simplied the query just to give the example but I have a complex query where I&#39;m using the named parameter in multiple places in WHERE clause, INNER/OUTER join to compare (greater/less than equal) with different column so no specific column I can use in place of the named parameter.","body":"Actually I simplied the query just to give the example but I have a complex query where I&#39;m using the named parameter in multiple places in WHERE clause, INNER/OUTER join to compare (greater/less than equal) with different column so no specific column I can use in place of the named parameter."}],"owner":{"account_id":14921587,"reputation":277,"user_id":10773697,"display_name":"San4musa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676672400,"creation_date":1676666659,"question_id":75489105,"body_markdown":"Here is the query-\r\n\r\n    sql = &quot;SELECT EMP_NAME, EMP_NUMBER, EMP_JOINING_DATE, :joiningDate as NAMED_PARAM_DATE from EMP_TABLE where EMP_JOINING_DATE&gt;:joiningDate&quot;\r\n\r\ncode:\r\n\r\n    NamedParameterJdbcTemplate jdbcTemplate;\r\n    .....\r\n    MapSqlParameterSource sqlParams = new MapSqlParameterSource();\r\n    sqlParams.addValue(&quot;joiningDate&quot;, System.getenv(&quot;JOIN_DATE&quot;), Types.DATE);\r\n    results = this.jdbcTemplate.query(sql, sqlParams, new BeanPropertyRowMapper&lt;Employee.class&gt;(Employee.class))\r\n\r\nThis gives me below error\r\n\r\n&gt; nested exception is com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2\r\n&gt; SQL Error: SQLCODE=-418, SQLSTATE=42610, SQLERRMC=unresolved untyped\r\n&gt; expression, DRIVER=4.25.1301\r\n\r\nIs it possible to do that? I can do it alternate way but just wanted to check from Query perspective as we can select any hard-coded value in SQL query using any DB client.\r\n\r\nNote: Updated the query for more clarity, also this code works fine when I take out joiningDate from SELECT statement.\r\n","title":"How to use named paramater in SELECT query statement in NamedParameterJdbcTemplate","body":"<p>Here is the query-</p>\n<pre><code>sql = &quot;SELECT EMP_NAME, EMP_NUMBER, EMP_JOINING_DATE, :joiningDate as NAMED_PARAM_DATE from EMP_TABLE where EMP_JOINING_DATE&gt;:joiningDate&quot;\n</code></pre>\n<p>code:</p>\n<pre><code>NamedParameterJdbcTemplate jdbcTemplate;\n.....\nMapSqlParameterSource sqlParams = new MapSqlParameterSource();\nsqlParams.addValue(&quot;joiningDate&quot;, System.getenv(&quot;JOIN_DATE&quot;), Types.DATE);\nresults = this.jdbcTemplate.query(sql, sqlParams, new BeanPropertyRowMapper&lt;Employee.class&gt;(Employee.class))\n</code></pre>\n<p>This gives me below error</p>\n<blockquote>\n<p>nested exception is com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2\nSQL Error: SQLCODE=-418, SQLSTATE=42610, SQLERRMC=unresolved untyped\nexpression, DRIVER=4.25.1301</p>\n</blockquote>\n<p>Is it possible to do that? I can do it alternate way but just wanted to check from Query perspective as we can select any hard-coded value in SQL query using any DB client.</p>\n<p>Note: Updated the query for more clarity, also this code works fine when I take out joiningDate from SELECT statement.</p>\n"},{"tags":["java","lombok"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1651331156,"post_id":72061139,"comment_id":127341915,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."},{"owner":{"account_id":16139017,"reputation":129,"user_id":15817444,"display_name":"Mazhar Ibna Zahur"},"score":0,"creation_date":1651341096,"post_id":72061139,"comment_id":127349547,"body_markdown":"I have used Lombok 1.18.22 for jdk17 and spring boot 2.6.2. it works fine for me. can you please share your Lombok version?","body":"I have used Lombok 1.18.22 for jdk17 and spring boot 2.6.2. it works fine for me. can you please share your Lombok version?"}],"answers":[{"tags":[],"owner":{"account_id":27815181,"reputation":11,"user_id":21236733,"display_name":"MRoose"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676672342,"creation_date":1676672283,"answer_id":75489721,"question_id":72061139,"body_markdown":"Liberica JDK is only JDK like OpenJDK and so on.\r\nLombok support Java 17.\r\nAccordingly, it will work with Liberica JDK.\r\nI myself use Liberica JDK 17 full (with JavaFX) on home development with Spring Boot and Lombok ;)","title":"Lombok works on Liberica JDK 17?","body":"<p>Liberica JDK is only JDK like OpenJDK and so on.\nLombok support Java 17.\nAccordingly, it will work with Liberica JDK.\nI myself use Liberica JDK 17 full (with JavaFX) on home development with Spring Boot and Lombok ;)</p>\n"}],"owner":{"account_id":25144480,"reputation":11,"user_id":18990456,"display_name":"jonatan.bermudezgbl"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3284,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1676672342,"creation_date":1651250389,"question_id":72061139,"body_markdown":"I&#39;ve been working on a project using BellSoft Liberica JDK v17, IntelliJ 2022.1 and SpringBoot 2.6.7. I have noticed that he has not recognized my entries from Lombok. I have searched for information and it seems that in version 16 of this JDK with external libraries such as Lombok. But I can&#39;t find anything for 17.\r\n\r\nCould you tell me if the incompatibility exists and if I should use another version? Thanks to everyone for your support.","title":"Lombok works on Liberica JDK 17?","body":"<p>I've been working on a project using BellSoft Liberica JDK v17, IntelliJ 2022.1 and SpringBoot 2.6.7. I have noticed that he has not recognized my entries from Lombok. I have searched for information and it seems that in version 16 of this JDK with external libraries such as Lombok. But I can't find anything for 17.</p>\n<p>Could you tell me if the incompatibility exists and if I should use another version? Thanks to everyone for your support.</p>\n"},{"tags":["java","android","google-play","amazon-in-app-purchase"],"comments":[{"owner":{"account_id":1781636,"reputation":7670,"user_id":1624202,"accept_rate":61,"display_name":"Cruncher"},"score":0,"creation_date":1382712770,"post_id":19592927,"comment_id":29080287,"body_markdown":"Do you have a problem with using two separate binaries? It&#39;s literally a matter of changing a SINGLE line of code.","body":"Do you have a problem with using two separate binaries? It&#39;s literally a matter of changing a SINGLE line of code."},{"owner":{"account_id":1776934,"reputation":2275,"user_id":1620542,"display_name":"Eluvatar"},"score":0,"creation_date":1382712772,"post_id":19592927,"comment_id":29080290,"body_markdown":"consider how you would detect the source store on a device with both? remember you can install the amazon store on any device and therefore you would have no way of knowing where it came from.","body":"consider how you would detect the source store on a device with both? remember you can install the amazon store on any device and therefore you would have no way of knowing where it came from."},{"owner":{"account_id":560010,"reputation":17004,"user_id":922200,"accept_rate":58,"display_name":"Alfie Hanssen"},"score":0,"creation_date":1382714569,"post_id":19592927,"comment_id":29081460,"body_markdown":"@Cruncher, I can go the two separate binaries approach but it&#39;s a unique setup where a single binary is preferred.","body":"@Cruncher, I can go the two separate binaries approach but it&#39;s a unique setup where a single binary is preferred."},{"owner":{"account_id":560010,"reputation":17004,"user_id":922200,"accept_rate":58,"display_name":"Alfie Hanssen"},"score":0,"creation_date":1382714657,"post_id":19592927,"comment_id":29081521,"body_markdown":"@Eluvatar, if two stores were installed on the same device, I&#39;d still need to know which store installed the App so that I can communicate with that store for IAP, no?","body":"@Eluvatar, if two stores were installed on the same device, I&#39;d still need to know which store installed the App so that I can communicate with that store for IAP, no?"},{"owner":{"account_id":1776934,"reputation":2275,"user_id":1620542,"display_name":"Eluvatar"},"score":0,"creation_date":1382738249,"post_id":19592927,"comment_id":29092992,"body_markdown":"yes you would, I&#39;d say if you want something reliable use separate builds, I suppose you could try to figure out the installer, but what if someone side loads the app (takes the apk from another device)? then what store would you use if you were trying to figure it out at runtime?","body":"yes you would, I&#39;d say if you want something reliable use separate builds, I suppose you could try to figure out the installer, but what if someone side loads the app (takes the apk from another device)? then what store would you use if you were trying to figure it out at runtime?"},{"owner":{"account_id":560010,"reputation":17004,"user_id":922200,"accept_rate":58,"display_name":"Alfie Hanssen"},"score":0,"creation_date":1382797823,"post_id":19592927,"comment_id":29105498,"body_markdown":"Gotcha, that makes a lot of sense (I&#39;m relatively new to the Android world, coming from iOS). Do you want to post some version of this an the answer so I can accept it?","body":"Gotcha, that makes a lot of sense (I&#39;m relatively new to the Android world, coming from iOS). Do you want to post some version of this an the answer so I can accept it?"}],"answers":[{"tags":[],"owner":{"account_id":501891,"reputation":8060,"user_id":1569675,"display_name":"Offbeatmammal"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1414822361,"creation_date":1382989808,"answer_id":19643816,"question_id":19592927,"body_markdown":"two binaries would be the most robust method but checking both the Build.MANUFACTURER and the installerName should get you pretty close (though assuming yo want to check for the Amazon AppStore if the user has installed an old version of the installer on their non-Kindle device and not updated the installerName might report null)\r\n\r\n    boolean isAmazonDevice = Build.MANUFACTURER.equalsIgnoreCase(&quot;amazon&quot;);\r\n\r\n    final Application application = getApplication();\r\n    String installerName = application.getPackageManager().getInstallerPackageName(application.getPackageName());\r\n    boolean fromAmazonStore = installerName != null &amp;&amp; installerName.equalsIgnoreCase(&quot;com.amazon.venezia&quot;);\r\n\r\nand then checking the value for:\r\n\r\n    isAmazonDevice || fromAmazonStore\r\n\r\nshould get you what you need for a significant amount of the time.\r\n\r\nOne scenario where this can confuse matters is if you are sideloading your apk for testing - in that case it wouldn&#39;t have the correct InstallerPackageName. You can fake that by sideloading the apk using:\r\n\r\n    adb install -i com.amazon.venezia APK_NAME","title":"Is it possible to reliably detect at runtime which store installed an Android App (Google Play or Amazon Market)?","body":"<p>two binaries would be the most robust method but checking both the Build.MANUFACTURER and the installerName should get you pretty close (though assuming yo want to check for the Amazon AppStore if the user has installed an old version of the installer on their non-Kindle device and not updated the installerName might report null)</p>\n\n<pre><code>boolean isAmazonDevice = Build.MANUFACTURER.equalsIgnoreCase(\"amazon\");\n\nfinal Application application = getApplication();\nString installerName = application.getPackageManager().getInstallerPackageName(application.getPackageName());\nboolean fromAmazonStore = installerName != null &amp;&amp; installerName.equalsIgnoreCase(\"com.amazon.venezia\");\n</code></pre>\n\n<p>and then checking the value for:</p>\n\n<pre><code>isAmazonDevice || fromAmazonStore\n</code></pre>\n\n<p>should get you what you need for a significant amount of the time.</p>\n\n<p>One scenario where this can confuse matters is if you are sideloading your apk for testing - in that case it wouldn't have the correct InstallerPackageName. You can fake that by sideloading the apk using:</p>\n\n<pre><code>adb install -i com.amazon.venezia APK_NAME\n</code></pre>\n"}],"owner":{"account_id":560010,"reputation":17004,"user_id":922200,"accept_rate":58,"display_name":"Alfie Hanssen"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1525,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":19643816,"answer_count":1,"score":8,"last_activity_date":1676672130,"creation_date":1382712285,"question_id":19592927,"body_markdown":"I need to know which store is the App&#39;s installer so that I know which store to communicate with for in-App purchase functionality.\r\n\r\nIs the definitive *100% reliable* approach to generate two separate binaries? Or is there a *100% reliable* code-based runtime approach?\r\n\r\nThere are many similar Stackoverflow questions. All have answers that suggest using methods like `getInstallerPackageName` on the `PackageManager` class. All also have comments or conflicting answers saying that this is not a reliable approach, suggesting that the only way to reliably check which store installed a given App is to generate two separate binaries, each with a `storeFlag` set, and upload one binary to Amazon and one to Google Play.","title":"Is it possible to reliably detect at runtime which store installed an Android App (Google Play or Amazon Market)?","body":"<p>I need to know which store is the App's installer so that I know which store to communicate with for in-App purchase functionality.</p>\n<p>Is the definitive <em>100% reliable</em> approach to generate two separate binaries? Or is there a <em>100% reliable</em> code-based runtime approach?</p>\n<p>There are many similar Stackoverflow questions. All have answers that suggest using methods like <code>getInstallerPackageName</code> on the <code>PackageManager</code> class. All also have comments or conflicting answers saying that this is not a reliable approach, suggesting that the only way to reliably check which store installed a given App is to generate two separate binaries, each with a <code>storeFlag</code> set, and upload one binary to Amazon and one to Google Play.</p>\n"},{"tags":["java","arrays","oop","object","arraylist"],"comments":[{"owner":{"account_id":4471477,"reputation":407,"user_id":3637689,"display_name":"mark"},"score":1,"creation_date":1612117129,"post_id":65982518,"comment_id":116660620,"body_markdown":"First of all, did you try to debug the code? is that reading file contents? and where exactly you are trying to print values","body":"First of all, did you try to debug the code? is that reading file contents? and where exactly you are trying to print values"},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":3,"creation_date":1612117380,"post_id":65982518,"comment_id":116660709,"body_markdown":"You have a method `toString()` where the comment clearly tells you you have to complete the implementation using `String.format` instead of just returning `&quot;&quot;`. Do that.","body":"You have a method <code>toString()</code> where the comment clearly tells you you have to complete the implementation using <code>String.format</code> instead of just returning <code>&quot;&quot;</code>. Do that."},{"owner":{"account_id":18394167,"reputation":19,"user_id":13399090,"display_name":"RideTheLightning343"},"score":0,"creation_date":1612117553,"post_id":65982518,"comment_id":116660746,"body_markdown":"Yes, i`m able to print the data from the arrays in the while loop. Im just trying to print the data(The objects i`m still trying to create) to the screen now.(I will format later). I just need to create an arraylist of Hurricane objects then display the objects and thier attributes.","body":"Yes, i<code>m able to print the data from the arrays in the while loop. Im just trying to print the data(The objects i</code>m still trying to create) to the screen now.(I will format later). I just need to create an arraylist of Hurricane objects then display the objects and thier attributes."},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":1,"creation_date":1612117676,"post_id":65982518,"comment_id":116660778,"body_markdown":"You will be able to print them as soon as you have a proper implementation of the `toString` method.","body":"You will be able to print them as soon as you have a proper implementation of the <code>toString</code> method."},{"owner":{"account_id":18394167,"reputation":19,"user_id":13399090,"display_name":"RideTheLightning343"},"score":0,"creation_date":1612118568,"post_id":65982518,"comment_id":116661040,"body_markdown":"@RealSkeptic, I need to create the objects beforehand then use my getter methods to display the output from there right? (I&#39;m completing the method you suggested now.)","body":"@RealSkeptic, I need to create the objects beforehand then use my getter methods to display the output from there right? (I&#39;m completing the method you suggested now.)"},{"owner":{"account_id":18394167,"reputation":19,"user_id":13399090,"display_name":"RideTheLightning343"},"score":0,"creation_date":1612118880,"post_id":65982518,"comment_id":116661143,"body_markdown":"Thanks, @RealSkeptic, I&#39;m just working out some bugs now","body":"Thanks, @RealSkeptic, I&#39;m just working out some bugs now"},{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":0,"creation_date":1612169981,"post_id":65982518,"comment_id":116672781,"body_markdown":"Why do you need all those temporary arrays if you have defined `Hurricane` class?  You can create instances of `Hurricane` while you are reading the file and add them to ArrayList.  It&#39;s a bit redundant to read the file just to count the lines to define the size of temporary arrays, then populate the arrays (which is likely to fail because `hasNext` is not called before each `next()/nextInt()`), then loop through arrays (and fail on `ArrayOutOfBoundsException` because of condition `i &lt;= numValues`) and add `Hurricane` instances in the third round.","body":"Why do you need all those temporary arrays if you have defined <code>Hurricane</code> class?  You can create instances of <code>Hurricane</code> while you are reading the file and add them to ArrayList.  It&#39;s a bit redundant to read the file just to count the lines to define the size of temporary arrays, then populate the arrays (which is likely to fail because <code>hasNext</code> is not called before each <code>next()&#47;nextInt()</code>), then loop through arrays (and fail on <code>ArrayOutOfBoundsException</code> because of condition <code>i &lt;= numValues</code>) and add <code>Hurricane</code> instances in the third round."}],"owner":{"account_id":18394167,"reputation":19,"user_id":13399090,"display_name":"RideTheLightning343"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":213,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676671447,"creation_date":1612116246,"question_id":65982518,"body_markdown":"```\r\npublic class Hurricane\r\n{\r\n   private String name, month;\r\n   private int year;\r\n   private int cat;\r\n   private int pressure;\r\n   private double windspeed;\r\n\r\n     \r\n   \r\n   //constructor - all private instance variables initialized\r\n   public Hurricane(int y, String n, String m, int c, int p, double w) {\r\n      this.year = y;\r\n      this.name = n;\r\n      this.month = m;\r\n      this.cat = c;\r\n      this.pressure = p;\r\n      this.windspeed = w;\r\n   }\r\n\r\n   //accessor for year\r\n   public int getYear() {\r\n      return year; \r\n   }\r\n\r\n   //accessor for name\r\n   public String getName() {\r\n      return name; \r\n   }\r\n   \r\n   //accessor for month\r\n   public String getMonth() {\r\n      return month;  \r\n   }\r\n   \r\n   //accessor for category\r\n   public int getCat() {\r\n      return cat;  \r\n   }\r\n   \r\n   //accessor for pressure\r\n   public int getPressure() {\r\n      return pressure;\r\n   }\r\n   \r\n   //accessor for windspeed\r\n   public double getWindspeed() {\r\n      return windspeed;\r\n   }\r\n   \r\n   //mutator for year\r\n   public void setYear(int y) {\r\n      year = y;\r\n   }\r\n   \r\n   //mutator for name\r\n   public void setName(String n) {\r\n      name = n;\r\n   }\r\n   \r\n   //mutator for month\r\n   public void setMonth(String m) {\r\n      month = m;\r\n   }\r\n   \r\n   //mutator for category\r\n   public void setCat(int c) {\r\n      cat = c;\r\n   }\r\n   \r\n   //mutator for pressure\r\n   public void setPressure(int p) {\r\n      pressure = p;\r\n   }\r\n   \r\n   //mutator for windspeed\r\n   public void setWindspeed (double w) {\r\n      windspeed = w;\r\n   }\r\n\r\n\r\n   public String toString() {\r\n       return &quot;&quot;;\r\n      // complete the toString method using String.format()  \r\n   }\r\n    \r\n}\r\n```\r\nAnd Here is my Main method: \r\n```\r\nimport java.io.IOException;\r\nimport java.io.PrintWriter;\r\nimport java.io.File;\r\nimport java.util.Scanner;\r\nimport java.util.ArrayList;\r\npublic class HurricaneTester\r\n\r\n{\r\n\r\n    public static void main(String[] args) throws IOException\r\n    {\r\n        //read data from text file &amp; put in an array\r\n        File fileName = new File(&quot;hurricanedata.txt&quot;);\r\n        Scanner inFile = new Scanner(fileName);\r\n        int numValues = 0;\r\n        \r\n        //count number of lines in text file\r\n        while (inFile.hasNextLine() )\r\n        {\r\n            inFile.nextLine();\r\n            numValues++;\r\n        }\r\n        inFile.close();\r\n        \r\n        \r\n        //initialize arrays based on lines counted in text file\r\n        int [] years = new int[numValues];\r\n        String [] months = new String[numValues];\r\n        int [] pressures = new int[numValues];\r\n        double [] windSpeeds = new double[numValues];\r\n        String [] names = new String[numValues];\r\n        \r\n        //read and assign data from text file to the arrays\r\n        inFile = new Scanner(fileName);\r\n        int index = 0;\r\n        while(inFile.hasNext() )\r\n        {\r\n            years[index] = inFile.nextInt();\r\n            months[index] = inFile.next();\r\n            pressures[index] = inFile.nextInt();\r\n            windSpeeds[index] = inFile.nextDouble();\r\n            names[index] = inFile.next();\r\n            index++;\r\n        }\r\n        inFile.close();\r\n        //convert the windspeed, determine categories, calculate sums\r\n        int [] cat = new int [numValues];\r\n        int f = 0;\r\n        for(double y : windSpeeds){// converts windspeed to mph\r\n        y = y * 1.15078;\r\n            if ((y &gt;=74) &amp;&amp; (y &lt;= 98)){//Finds category of hurricane\r\n            cat[f] = 1;\r\n        }\r\n        else if ((y &gt;=99) &amp;&amp; (y &lt;= 110)){\r\n            cat[f] = 2;\r\n        }\r\n        else if ((y &gt;=111) &amp;&amp; (y &lt;= 129)){\r\n            cat[f] = 3;\r\n        }\r\n        else if ((y &gt;=130) &amp;&amp; (y &lt;= 156)){\r\n            cat[f] = 4;\r\n        }\r\n        else if (y &gt;=157){\r\n            cat[f] =5;\r\n        }\r\n        else{\r\n        System.out.println(&quot;Errors =&quot;);\r\n        System.out.print(y);\r\n        System.out.println(&quot;=&quot;);\r\n        }\r\n        f++;\r\n        }\r\n        //create a Hurricane ArrayList using the data above\r\n        //Need to create Arraylist of obejcts \r\n        ArrayList&lt;Hurricane&gt; list = new ArrayList();\r\n        for (int i = 0;i &lt;= numValues; i++){\r\n        list.add(new Hurricane(years[i],names[i],months[i],cat[i],pressures[i],windSpeeds[i]));\r\n        //System.out.println(list);\r\n        i++;\r\n        }\r\n        for (Hurricane ef: list) {//Prints Items from list\r\n            System.out.println(ef);\r\n        }\r\n        //user prompted for range of years - not completed yet\r\n        \r\n        \r\n        //print the data - not completed yet\r\n     }\r\n}\r\n```\r\nI`ve searched around on stack overflow and looked over many tutorials, my code just returns nothing after I try to print objects from it. The overall program goal is to take information from a file about hurricanes and depending on the year, display output from that time period. Thanks for any help! If you need clarification or more info, just let me know!","title":"How to create and print objects(with several attributes) from arraylist in java?","body":"<pre><code>public class Hurricane\n{\n   private String name, month;\n   private int year;\n   private int cat;\n   private int pressure;\n   private double windspeed;\n\n     \n   \n   //constructor - all private instance variables initialized\n   public Hurricane(int y, String n, String m, int c, int p, double w) {\n      this.year = y;\n      this.name = n;\n      this.month = m;\n      this.cat = c;\n      this.pressure = p;\n      this.windspeed = w;\n   }\n\n   //accessor for year\n   public int getYear() {\n      return year; \n   }\n\n   //accessor for name\n   public String getName() {\n      return name; \n   }\n   \n   //accessor for month\n   public String getMonth() {\n      return month;  \n   }\n   \n   //accessor for category\n   public int getCat() {\n      return cat;  \n   }\n   \n   //accessor for pressure\n   public int getPressure() {\n      return pressure;\n   }\n   \n   //accessor for windspeed\n   public double getWindspeed() {\n      return windspeed;\n   }\n   \n   //mutator for year\n   public void setYear(int y) {\n      year = y;\n   }\n   \n   //mutator for name\n   public void setName(String n) {\n      name = n;\n   }\n   \n   //mutator for month\n   public void setMonth(String m) {\n      month = m;\n   }\n   \n   //mutator for category\n   public void setCat(int c) {\n      cat = c;\n   }\n   \n   //mutator for pressure\n   public void setPressure(int p) {\n      pressure = p;\n   }\n   \n   //mutator for windspeed\n   public void setWindspeed (double w) {\n      windspeed = w;\n   }\n\n\n   public String toString() {\n       return &quot;&quot;;\n      // complete the toString method using String.format()  \n   }\n    \n}\n</code></pre>\n<p>And Here is my Main method:</p>\n<pre><code>import java.io.IOException;\nimport java.io.PrintWriter;\nimport java.io.File;\nimport java.util.Scanner;\nimport java.util.ArrayList;\npublic class HurricaneTester\n\n{\n\n    public static void main(String[] args) throws IOException\n    {\n        //read data from text file &amp; put in an array\n        File fileName = new File(&quot;hurricanedata.txt&quot;);\n        Scanner inFile = new Scanner(fileName);\n        int numValues = 0;\n        \n        //count number of lines in text file\n        while (inFile.hasNextLine() )\n        {\n            inFile.nextLine();\n            numValues++;\n        }\n        inFile.close();\n        \n        \n        //initialize arrays based on lines counted in text file\n        int [] years = new int[numValues];\n        String [] months = new String[numValues];\n        int [] pressures = new int[numValues];\n        double [] windSpeeds = new double[numValues];\n        String [] names = new String[numValues];\n        \n        //read and assign data from text file to the arrays\n        inFile = new Scanner(fileName);\n        int index = 0;\n        while(inFile.hasNext() )\n        {\n            years[index] = inFile.nextInt();\n            months[index] = inFile.next();\n            pressures[index] = inFile.nextInt();\n            windSpeeds[index] = inFile.nextDouble();\n            names[index] = inFile.next();\n            index++;\n        }\n        inFile.close();\n        //convert the windspeed, determine categories, calculate sums\n        int [] cat = new int [numValues];\n        int f = 0;\n        for(double y : windSpeeds){// converts windspeed to mph\n        y = y * 1.15078;\n            if ((y &gt;=74) &amp;&amp; (y &lt;= 98)){//Finds category of hurricane\n            cat[f] = 1;\n        }\n        else if ((y &gt;=99) &amp;&amp; (y &lt;= 110)){\n            cat[f] = 2;\n        }\n        else if ((y &gt;=111) &amp;&amp; (y &lt;= 129)){\n            cat[f] = 3;\n        }\n        else if ((y &gt;=130) &amp;&amp; (y &lt;= 156)){\n            cat[f] = 4;\n        }\n        else if (y &gt;=157){\n            cat[f] =5;\n        }\n        else{\n        System.out.println(&quot;Errors =&quot;);\n        System.out.print(y);\n        System.out.println(&quot;=&quot;);\n        }\n        f++;\n        }\n        //create a Hurricane ArrayList using the data above\n        //Need to create Arraylist of obejcts \n        ArrayList&lt;Hurricane&gt; list = new ArrayList();\n        for (int i = 0;i &lt;= numValues; i++){\n        list.add(new Hurricane(years[i],names[i],months[i],cat[i],pressures[i],windSpeeds[i]));\n        //System.out.println(list);\n        i++;\n        }\n        for (Hurricane ef: list) {//Prints Items from list\n            System.out.println(ef);\n        }\n        //user prompted for range of years - not completed yet\n        \n        \n        //print the data - not completed yet\n     }\n}\n</code></pre>\n<p>I`ve searched around on stack overflow and looked over many tutorials, my code just returns nothing after I try to print objects from it. The overall program goal is to take information from a file about hurricanes and depending on the year, display output from that time period. Thanks for any help! If you need clarification or more info, just let me know!</p>\n"},{"tags":["java","aeron"],"comments":[{"owner":{"account_id":4276,"reputation":14213,"user_id":6365,"accept_rate":65,"display_name":"Michael Barker"},"score":0,"creation_date":1677142815,"post_id":75489604,"comment_id":133280484,"body_markdown":"I think these should be presented as two separate questions as they are unrelated.  For the first one it would be useful if you could narrow it down to a simple example.  For the 2nd part, providing the JDK version would also be useful (along with the command line used to set the javaagent).","body":"I think these should be presented as two separate questions as they are unrelated.  For the first one it would be useful if you could narrow it down to a simple example.  For the 2nd part, providing the JDK version would also be useful (along with the command line used to set the javaagent)."}],"owner":{"account_id":62847,"reputation":5047,"user_id":186429,"accept_rate":62,"display_name":"Galder Zamarre&#241;o"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676671345,"creation_date":1676671345,"question_id":75489604,"body_markdown":"I&#39;m toying with a websocket server that sends messages to an aeron publication. These get consumed by a subscription and this normally works fine. Published messages are consumed by an Agent backed subscription. However, when 2 messages are sent concurrently to the publication, I can see one of the messages consumed twice while the other is not. Any ideas what could be causing this?\r\n\r\nI&#39;ve tried to enable the Aeron Agent but setting it up with the same 1.40 version as the dependencies the project has, it throws this error:\r\n\r\n```\r\nException in thread &quot;[sender,receiver,driver-conductor]&quot; java.lang.LinkageError: loader constraint violation: when resolving method &#39;void io.aeron.agent.DriverEventLogger.log(io.aeron.agent.DriverEventCode, org.agrona.DirectBuffer, int, int)&#39; the class loader io.quarkus.bootstrap.classloading.QuarkusClassLoader @3e6f3bae of the current class, io/aeron/driver/ClientCommandAdapter, and the class loader &#39;app&#39; for the method&#39;s defining class, io/aeron/agent/DriverEventLogger, have different Class objects for the type org/agrona/DirectBuffer used in the signature (io.aeron.driver.ClientCommandAdapter is in unnamed module of loader io.quarkus.bootstrap.classloading.QuarkusClassLoader @3e6f3bae, parent loader &#39;app&#39;; io.aeron.agent.DriverEventLogger is in unnamed module of loader &#39;app&#39;)\r\n\tat io.aeron.driver.ClientCommandAdapter.onMessage(ClientCommandAdapter.java:75)\r\n\tat org.agrona.concurrent.ringbuffer.ManyToOneRingBuffer.read(ManyToOneRingBuffer.java:201)\r\n\tat io.aeron.driver.ClientCommandAdapter.receive(ClientCommandAdapter.java:66)\r\n\tat io.aeron.driver.DriverConductor.doWork(DriverConductor.java:216)\r\n\tat org.agrona.concurrent.CompositeAgent.doWork(CompositeAgent.java:120)\r\n\tat org.agrona.concurrent.AgentRunner.doWork(AgentRunner.java:304)\r\n\tat org.agrona.concurrent.AgentRunner.workLoop(AgentRunner.java:296)\r\n\tat org.agrona.concurrent.AgentRunner.run(AgentRunner.java:162)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1589)\r\n```\r\n\r\nI&#39;ve also tried to hook to a running process using the instructions [here](https://aeroncookbook.com/aeron/aeron-agent/) but it fails saying dynamic agent cannot be found:\r\n\r\n```\r\n$ java -cp ./aeron-all-1.40.0.jar io.aeron.agent.DynamicLoggingAgent ./aeron-agent-1.40.0.jar 61616 start\r\nError: Could not find or load main class io.aeron.agent.DynamicLoggingAgent\r\n```\r\n\r\nThanks","title":"Aeron messaged consumed twice when concurrent messages published","body":"<p>I'm toying with a websocket server that sends messages to an aeron publication. These get consumed by a subscription and this normally works fine. Published messages are consumed by an Agent backed subscription. However, when 2 messages are sent concurrently to the publication, I can see one of the messages consumed twice while the other is not. Any ideas what could be causing this?</p>\n<p>I've tried to enable the Aeron Agent but setting it up with the same 1.40 version as the dependencies the project has, it throws this error:</p>\n<pre><code>Exception in thread &quot;[sender,receiver,driver-conductor]&quot; java.lang.LinkageError: loader constraint violation: when resolving method 'void io.aeron.agent.DriverEventLogger.log(io.aeron.agent.DriverEventCode, org.agrona.DirectBuffer, int, int)' the class loader io.quarkus.bootstrap.classloading.QuarkusClassLoader @3e6f3bae of the current class, io/aeron/driver/ClientCommandAdapter, and the class loader 'app' for the method's defining class, io/aeron/agent/DriverEventLogger, have different Class objects for the type org/agrona/DirectBuffer used in the signature (io.aeron.driver.ClientCommandAdapter is in unnamed module of loader io.quarkus.bootstrap.classloading.QuarkusClassLoader @3e6f3bae, parent loader 'app'; io.aeron.agent.DriverEventLogger is in unnamed module of loader 'app')\n    at io.aeron.driver.ClientCommandAdapter.onMessage(ClientCommandAdapter.java:75)\n    at org.agrona.concurrent.ringbuffer.ManyToOneRingBuffer.read(ManyToOneRingBuffer.java:201)\n    at io.aeron.driver.ClientCommandAdapter.receive(ClientCommandAdapter.java:66)\n    at io.aeron.driver.DriverConductor.doWork(DriverConductor.java:216)\n    at org.agrona.concurrent.CompositeAgent.doWork(CompositeAgent.java:120)\n    at org.agrona.concurrent.AgentRunner.doWork(AgentRunner.java:304)\n    at org.agrona.concurrent.AgentRunner.workLoop(AgentRunner.java:296)\n    at org.agrona.concurrent.AgentRunner.run(AgentRunner.java:162)\n    at java.base/java.lang.Thread.run(Thread.java:1589)\n</code></pre>\n<p>I've also tried to hook to a running process using the instructions <a href=\"https://aeroncookbook.com/aeron/aeron-agent/\" rel=\"nofollow noreferrer\">here</a> but it fails saying dynamic agent cannot be found:</p>\n<pre><code>$ java -cp ./aeron-all-1.40.0.jar io.aeron.agent.DynamicLoggingAgent ./aeron-agent-1.40.0.jar 61616 start\nError: Could not find or load main class io.aeron.agent.DynamicLoggingAgent\n</code></pre>\n<p>Thanks</p>\n"},{"tags":["java","database","multithreading"],"comments":[{"owner":{"account_id":20782878,"reputation":894,"user_id":15982771,"display_name":"Blue Robin"},"score":0,"creation_date":1676657234,"post_id":75487831,"comment_id":133188307,"body_markdown":"Asking what the common approach for something may be seen as subjective.","body":"Asking what the common approach for something may be seen as subjective."},{"owner":{"account_id":21601781,"reputation":55,"user_id":15929801,"display_name":"Neran"},"score":0,"creation_date":1676657422,"post_id":75487831,"comment_id":133188367,"body_markdown":"@BlueRobin well I am just looking for a solution, but probably this title sounds better now?","body":"@BlueRobin well I am just looking for a solution, but probably this title sounds better now?"},{"owner":{"account_id":20782878,"reputation":894,"user_id":15982771,"display_name":"Blue Robin"},"score":0,"creation_date":1676657472,"post_id":75487831,"comment_id":133188383,"body_markdown":"Just to be cautious, as some may not read the post fully. Thanks!","body":"Just to be cautious, as some may not read the post fully. Thanks!"},{"owner":{"account_id":7123163,"reputation":359,"user_id":5447035,"display_name":"Diego Ferruchelli"},"score":1,"creation_date":1676659968,"post_id":75487831,"comment_id":133189033,"body_markdown":"About &quot;database is locked&quot;, how many concurrent transactions do you have? SQLite is not designed for heavy use. Have you seen [this thread](https://stackoverflow.com/questions/3172929/operationalerror-database-is-locked) and [this documentation](https://www.sqlite.org/lockingv3.html])?","body":"About &quot;database is locked&quot;, how many concurrent transactions do you have? SQLite is not designed for heavy use. Have you seen <a href=\"https://stackoverflow.com/questions/3172929/operationalerror-database-is-locked\">this thread</a> and <a href=\"https://www.sqlite.org/lockingv3.html%5D\" rel=\"nofollow noreferrer\">this documentation</a>?"},{"owner":{"account_id":21601781,"reputation":55,"user_id":15929801,"display_name":"Neran"},"score":0,"creation_date":1676660193,"post_id":75487831,"comment_id":133189081,"body_markdown":"@DiegoFerruchelli in my test program there are 10 client threads","body":"@DiegoFerruchelli in my test program there are 10 client threads"},{"owner":{"account_id":7123163,"reputation":359,"user_id":5447035,"display_name":"Diego Ferruchelli"},"score":0,"creation_date":1676660493,"post_id":75487831,"comment_id":133189151,"body_markdown":"That&#39;s not too many, but we should see what are they doing on the DB. Anyway, the &quot;unique constraint failed&quot; says you&#39;re trying to insert an already existing ID, which is related to the logic of your code. Could you post something more?","body":"That&#39;s not too many, but we should see what are they doing on the DB. Anyway, the &quot;unique constraint failed&quot; says you&#39;re trying to insert an already existing ID, which is related to the logic of your code. Could you post something more?"},{"owner":{"account_id":21601781,"reputation":55,"user_id":15929801,"display_name":"Neran"},"score":0,"creation_date":1676660831,"post_id":75487831,"comment_id":133189239,"body_markdown":"@DiegoFerruchelli added some snippets that are executed by the server threads","body":"@DiegoFerruchelli added some snippets that are executed by the server threads"},{"owner":{"account_id":7123163,"reputation":359,"user_id":5447035,"display_name":"Diego Ferruchelli"},"score":0,"creation_date":1676668121,"post_id":75487831,"comment_id":133190982,"body_markdown":"The code seems ok. There may be a problem with the `ObjectInputStream`. Are you writing the file (or whatever it is) from several threads at the same time? Does it look ok when you open it from the operating system? Try dumping the content of the variables (`userName`, etc) before looking for each record in the DB. If it&#39;s not much trouble, also show some ID for the running thread.","body":"The code seems ok. There may be a problem with the <code>ObjectInputStream</code>. Are you writing the file (or whatever it is) from several threads at the same time? Does it look ok when you open it from the operating system? Try dumping the content of the variables (<code>userName</code>, etc) before looking for each record in the DB. If it&#39;s not much trouble, also show some ID for the running thread."},{"owner":{"account_id":21601781,"reputation":55,"user_id":15929801,"display_name":"Neran"},"score":0,"creation_date":1676670265,"post_id":75487831,"comment_id":133191409,"body_markdown":"@DiegoFerruchelli The server has a run method. In the run method it accepts connections from clients with accept method using its server socket obeject. A new thread is then created on the server with this socket object + a new connection object to the database. The run method of those threads then process the client requests (the snippets i posted here). I get the OIS also from that socket.","body":"@DiegoFerruchelli The server has a run method. In the run method it accepts connections from clients with accept method using its server socket obeject. A new thread is then created on the server with this socket object + a new connection object to the database. The run method of those threads then process the client requests (the snippets i posted here). I get the OIS also from that socket."},{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":0,"creation_date":1676726284,"post_id":75487831,"comment_id":133197418,"body_markdown":"SQLite is a **single client** database and will have trouble with concurrency. If you need concurrency then change to another database that supports this natively. There are easy to install, free options out there, such as PostgreSQL, MariaDB, MySQL. If you don&#39;t want to install a remote datbase, you can use H2 &quot;persistence mode&quot;.","body":"SQLite is a <b>single client</b> database and will have trouble with concurrency. If you need concurrency then change to another database that supports this natively. There are easy to install, free options out there, such as PostgreSQL, MariaDB, MySQL. If you don&#39;t want to install a remote datbase, you can use H2 &quot;persistence mode&quot;."},{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":0,"creation_date":1676726441,"post_id":75487831,"comment_id":133197447,"body_markdown":"Also, in this day and age, you should be using connection pool. SpringBoot implements them by default.","body":"Also, in this day and age, you should be using connection pool. SpringBoot implements them by default."}],"answers":[{"tags":[],"owner":{"account_id":200481,"reputation":5195,"user_id":446357,"accept_rate":64,"display_name":"MTilsted"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1676658424,"creation_date":1676657761,"answer_id":75487933,"question_id":75487831,"body_markdown":"No you should not thread synchronization for this. There are many reasons this will newer work.\r\n\r\nDo you explicit start and commit each transactions with begin() and commit()?\r\n\r\nBut it sounds to me like you have transactions running for to long. You should newer have a transaction open, while communication with the client over the network. So what you should do is: \r\n\r\nGet all the data you need from the client. Call Begin() on the database. \r\nDo all needed sql on the database. \r\nThen commit() \r\nand then send the reply back to the client so the transaction is open as little time as possible.\r\n\r\nUpdated:\r\nThis also depend on the transaction isolation level. There is description of these is sqllite here:\r\n\r\nBtw: You can set sqllite to work in exclusive mode, which might be a good test for you. If you do that and transactions begin to hang, then your problem is that you have open transactions which you don&#39;t close.\r\n\r\nsee: \r\nhttps://dba.stackexchange.com/questions/258003/what-standard-sql-isolation-levels-do-the-sqlite-isolation-levels-correspond-to","title":"How to handle concurrent operations on relational databases?","body":"<p>No you should not thread synchronization for this. There are many reasons this will newer work.</p>\n<p>Do you explicit start and commit each transactions with begin() and commit()?</p>\n<p>But it sounds to me like you have transactions running for to long. You should newer have a transaction open, while communication with the client over the network. So what you should do is:</p>\n<p>Get all the data you need from the client. Call Begin() on the database.\nDo all needed sql on the database.\nThen commit()\nand then send the reply back to the client so the transaction is open as little time as possible.</p>\n<p>Updated:\nThis also depend on the transaction isolation level. There is description of these is sqllite here:</p>\n<p>Btw: You can set sqllite to work in exclusive mode, which might be a good test for you. If you do that and transactions begin to hang, then your problem is that you have open transactions which you don't close.</p>\n<p>see:\n<a href=\"https://dba.stackexchange.com/questions/258003/what-standard-sql-isolation-levels-do-the-sqlite-isolation-levels-correspond-to\">https://dba.stackexchange.com/questions/258003/what-standard-sql-isolation-levels-do-the-sqlite-isolation-levels-correspond-to</a></p>\n"}],"owner":{"account_id":21601781,"reputation":55,"user_id":15929801,"display_name":"Neran"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1676670755,"creation_date":1676657129,"question_id":75487831,"body_markdown":"I have a client / server application (local) where several clients perform operations concurrently on the server. The server creates a separate thread for each client in which the desired operations (register/login) are then processed. Each thread has its own connection to the database and communicates with the client via its own socket that i get from ServerSocket.accept(). The operations from the client require read and write access to a database (sqlite) on the server. The register op checks whether the entry already exists, if not it gets added. And the login op is just checking passwords. The thread will then tell the client whether the operation was successful or not.\r\nWhen a client is finished, it sends a message to the server to close the connection. The thread on the server interrupts its loop and then closes its socket and its connection to the database.\r\n\r\nWhen there is just one client, there are no problems with the program. If There are multiple clients concurrently, then i get 2 types of SQLExceptions, &quot;database is locked&quot; and &quot;unique constraint failed&quot;. The former might happen, because there are concurrent transactions being performed on the database. And this is prevented, because of ACID. The latter might happen, because of concurrency (before inserting a new entry into the DB I check whether the primary key is already used, the primary key is a username). Correct me if im wrong.\r\nRight now I am not using thread synchronization or disabling auto commit when doing the operations on the database.\r\n\r\nI thought that the transactions on ACID DBs are automatically queued up if new ones are invoked while the current one has not finished yet. But this does not seem to be the case. So am I supposed to actively prevent these exceptions by using thread synchronization (e.g. by using Locks) when executing queries/updates or perhaps just retry until the operations succeed? What are common approaches to handle the exceptions? I know that its problematic that the thread wait for a message to end but this is another topic. This is just a program to learn about working with databases.\r\n\r\nHere are some snippets of code that runs on the server&#39;s threads. When a thread using this runnable is created I create a new Socket from ServerSocket.accept() and a new Connection object from the driver and pass both to it.\r\n\r\n    public class ConnectionHandler implements Runnable {\r\n    \r\n        private final Socket socket;\r\n        private final Connection dbConnection;\r\n    \r\n        public ConnectionHandler(Socket socket, Connection databaseConnection) {\r\n            this.socket = socket;\r\n            this.dbConnection = databaseConnection;\r\n        }\r\n    \r\n        @Override\r\n        public void run() {\r\n            try (socket; dbConnection;\r\n                 ObjectInputStream ois = new ObjectInputStream(socket.getInputStream());\r\n                 ObjectOutputStream oos = new ObjectOutputStream(socket.getOutputStream()); )\r\n            {\r\n                boolean shouldClose = false;\r\n                while (!shouldClose)\r\n                {\r\n                    Actions action = (Actions) ois.readObject();\r\n    \r\n                    boolean success = false;\r\n                    if (action == Actions.REGISTER)\r\n                    {\r\n                        success = performClientRegistration(ois, dbConnection);\r\n                    }\r\n                    else if (action == Actions.LOGIN)\r\n                    {\r\n                        success = performClientLogin(ois, dbConnection);\r\n                    }\r\n                    else if(action == Actions.SHUTDOWN)\r\n                    {\r\n                        shouldClose = true;\r\n                    }\r\n    \r\n                    if (success) {\r\n                        oos.writeObject(Response.SUCCESS);\r\n                    } else {\r\n                        oos.writeObject(Response.FAILURE);\r\n                    }\r\n                }\r\n            }\r\n            catch (ClassNotFoundException | IOException | SQLException e) {\r\n                e.printStackTrace();\r\n            }\r\n            System.out.println(&quot;Socket to &quot; + socket + &quot; closed.&quot;);\r\n        }\r\n\r\n    private boolean performClientRegistration(ObjectInputStream ois, Connection dbConnection) throws IOException, ClassNotFoundException {\r\n            String userName = (String)ois.readObject();\r\n            String pwd = (String)ois.readObject();\r\n            String firstName = (String)ois.readObject();\r\n            String lastName = (String)ois.readObject();\r\n    \r\n            try\r\n            {\r\n                boolean isClientRegistrationPossible = !DBHelper.existsEntry(dbConnection, userName);\r\n                if(isClientRegistrationPossible) {\r\n                    DBHelper.addEntry(dbConnection, userName, pwd, firstName, lastName);\r\n                    return true;\r\n                }\r\n            }\r\n            catch (SQLException e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n            return false;\r\n        }\r\n    } // END OF CLASS\r\n\r\n\r\n    public static void addEntry(Connection connection, String userName, String pwd, String firstName, String lastName) throws SQLException {\r\n        PreparedStatement statement = connection.prepareStatement(&quot;INSERT INTO users &quot; +\r\n            &quot;(userName, pwd, lastName, firstName) VALUES (?, ?, ?, ?)&quot;);\r\n        statement.setString(1, userName);\r\n        statement.setString(2, pwd);\r\n        statement.setString(3, lastName);\r\n        statement.setString(4, firstName);\r\n        statement.executeUpdate();\r\n    }\r\n\r\n    public static boolean existsEntry(Connection connection, String userName) throws SQLException {\r\n        PreparedStatement statement = connection.prepareStatement(&quot;SELECT 1 FROM users WHERE userName = ?&quot;);\r\n        statement.setString(1, userName);\r\n        ResultSet result = statement.executeQuery();\r\n\r\n        if(result.next()) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }","title":"How to handle concurrent operations on relational databases?","body":"<p>I have a client / server application (local) where several clients perform operations concurrently on the server. The server creates a separate thread for each client in which the desired operations (register/login) are then processed. Each thread has its own connection to the database and communicates with the client via its own socket that i get from ServerSocket.accept(). The operations from the client require read and write access to a database (sqlite) on the server. The register op checks whether the entry already exists, if not it gets added. And the login op is just checking passwords. The thread will then tell the client whether the operation was successful or not.\nWhen a client is finished, it sends a message to the server to close the connection. The thread on the server interrupts its loop and then closes its socket and its connection to the database.</p>\n<p>When there is just one client, there are no problems with the program. If There are multiple clients concurrently, then i get 2 types of SQLExceptions, &quot;database is locked&quot; and &quot;unique constraint failed&quot;. The former might happen, because there are concurrent transactions being performed on the database. And this is prevented, because of ACID. The latter might happen, because of concurrency (before inserting a new entry into the DB I check whether the primary key is already used, the primary key is a username). Correct me if im wrong.\nRight now I am not using thread synchronization or disabling auto commit when doing the operations on the database.</p>\n<p>I thought that the transactions on ACID DBs are automatically queued up if new ones are invoked while the current one has not finished yet. But this does not seem to be the case. So am I supposed to actively prevent these exceptions by using thread synchronization (e.g. by using Locks) when executing queries/updates or perhaps just retry until the operations succeed? What are common approaches to handle the exceptions? I know that its problematic that the thread wait for a message to end but this is another topic. This is just a program to learn about working with databases.</p>\n<p>Here are some snippets of code that runs on the server's threads. When a thread using this runnable is created I create a new Socket from ServerSocket.accept() and a new Connection object from the driver and pass both to it.</p>\n<pre><code>public class ConnectionHandler implements Runnable {\n\n    private final Socket socket;\n    private final Connection dbConnection;\n\n    public ConnectionHandler(Socket socket, Connection databaseConnection) {\n        this.socket = socket;\n        this.dbConnection = databaseConnection;\n    }\n\n    @Override\n    public void run() {\n        try (socket; dbConnection;\n             ObjectInputStream ois = new ObjectInputStream(socket.getInputStream());\n             ObjectOutputStream oos = new ObjectOutputStream(socket.getOutputStream()); )\n        {\n            boolean shouldClose = false;\n            while (!shouldClose)\n            {\n                Actions action = (Actions) ois.readObject();\n\n                boolean success = false;\n                if (action == Actions.REGISTER)\n                {\n                    success = performClientRegistration(ois, dbConnection);\n                }\n                else if (action == Actions.LOGIN)\n                {\n                    success = performClientLogin(ois, dbConnection);\n                }\n                else if(action == Actions.SHUTDOWN)\n                {\n                    shouldClose = true;\n                }\n\n                if (success) {\n                    oos.writeObject(Response.SUCCESS);\n                } else {\n                    oos.writeObject(Response.FAILURE);\n                }\n            }\n        }\n        catch (ClassNotFoundException | IOException | SQLException e) {\n            e.printStackTrace();\n        }\n        System.out.println(&quot;Socket to &quot; + socket + &quot; closed.&quot;);\n    }\n\nprivate boolean performClientRegistration(ObjectInputStream ois, Connection dbConnection) throws IOException, ClassNotFoundException {\n        String userName = (String)ois.readObject();\n        String pwd = (String)ois.readObject();\n        String firstName = (String)ois.readObject();\n        String lastName = (String)ois.readObject();\n\n        try\n        {\n            boolean isClientRegistrationPossible = !DBHelper.existsEntry(dbConnection, userName);\n            if(isClientRegistrationPossible) {\n                DBHelper.addEntry(dbConnection, userName, pwd, firstName, lastName);\n                return true;\n            }\n        }\n        catch (SQLException e) {\n            e.printStackTrace();\n        }\n\n        return false;\n    }\n} // END OF CLASS\n\n\npublic static void addEntry(Connection connection, String userName, String pwd, String firstName, String lastName) throws SQLException {\n    PreparedStatement statement = connection.prepareStatement(&quot;INSERT INTO users &quot; +\n        &quot;(userName, pwd, lastName, firstName) VALUES (?, ?, ?, ?)&quot;);\n    statement.setString(1, userName);\n    statement.setString(2, pwd);\n    statement.setString(3, lastName);\n    statement.setString(4, firstName);\n    statement.executeUpdate();\n}\n\npublic static boolean existsEntry(Connection connection, String userName) throws SQLException {\n    PreparedStatement statement = connection.prepareStatement(&quot;SELECT 1 FROM users WHERE userName = ?&quot;);\n    statement.setString(1, userName);\n    ResultSet result = statement.executeQuery();\n\n    if(result.next()) {\n        return true;\n    }\n\n    return false;\n}\n</code></pre>\n"},{"tags":["java","sql","sql-server","mybatis","mybatis-mapper"],"comments":[{"owner":{"account_id":1314580,"reputation":3289,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1676668043,"post_id":75488941,"comment_id":133190965,"body_markdown":"With [`&lt;foreach&gt;`](https://mybatis.org/mybatis-3/dynamic-sql.html#foreach), you can iterate the parameter (e.g. `List&lt;Entry&lt;String, String&gt;&gt;`) to build the condition.","body":"With <a href=\"https://mybatis.org/mybatis-3/dynamic-sql.html#foreach\" rel=\"nofollow noreferrer\"><code>&lt;foreach&gt;</code></a>, you can iterate the parameter (e.g. <code>List&lt;Entry&lt;String, String&gt;&gt;</code>) to build the condition."},{"owner":{"account_id":873828,"reputation":19233,"user_id":924077,"display_name":"Bogdan Sahlean"},"score":0,"creation_date":1676767374,"post_id":75488941,"comment_id":133203990,"body_markdown":"Clause WHERE Col1 = # AND Col2 = #","body":"Clause WHERE Col1 = # AND Col2 = #"}],"answers":[{"tags":[],"owner":{"account_id":17433686,"reputation":5225,"user_id":12637193,"display_name":"T N"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676670584,"creation_date":1676670070,"answer_id":75489472,"question_id":75488941,"body_markdown":"If your calling application can combine the keys into a single delimited string, the query can split the values back out into individual search values. Since your use case involves multiple key columns, you will need two different delimiters - one to separate tuples, and one to separate keys within a tuple.\r\n\r\nFor example, if you can build a parameter like:\r\n```\r\nDECLARE @SearchIDs VARCHAR(MAX) = &#39;1a,1b;2a,2b;3a,3b&#39;\r\n```\r\n\r\nThe following will separate the keys and perform an efficient key lookup:\r\n```\r\nSELECT *\r\nFROM (\r\n    SELECT\r\n        MAX(CASE WHEN S2.ordinal = 1 THEN S2.value END) AS search_id_1,\r\n        MAX(CASE WHEN S2.ordinal = 2 THEN S2.value END) AS search_id_2\r\n    FROM STRING_SPLIT(@SearchIDs, &#39;;&#39;, 1) S1\r\n    CROSS APPLY STRING_SPLIT(S1.value, &#39;,&#39;, 1) S2\r\n    GROUP BY S1.ordinal\r\n) P\r\nJOIN foo f\r\n    ON f.foo_id_1 = P.search_id_1 and f.foo_id_2 = P.search_id_2\r\n```\r\n\r\nSample results:\r\n\r\n| search_id_1 | search_id_2 | foo_id_1 | foo_id_2 | foo_name |\r\n| - | - | - | - | - |\r\n| 1a | 1b | 1a | 1b | A |\r\n| 2a | 2b | 2a | 2b | CCC |\r\n| 3a | 3b | 3a | 3b | EEEEE |\r\n\r\nIn you actual code, you should cast the `search_id_1` and `search_id_2` values to the proper data type.\r\n\r\n```\r\n        CAST(MAX(...) AS UNIQUEIDENTIFIER) AS search_id_1,\r\n        CAST(MAX(...) AS UNIQUEIDENTIFIER) AS search_id_2\r\n```\r\n\r\nSee [this db&lt;&gt;fiddle](https://dbfiddle.uk/_kwSWsLU).\r\n\r\nOther more formal ways to pass multiple repeating values in a parameter  involve constructing XML or JSON, but sometimes a plain string is the simplest as long as you can guarantee that the values cannot themselves contain any delimiters.","title":"Querying multiple records using composite key in the mybatis","body":"<p>If your calling application can combine the keys into a single delimited string, the query can split the values back out into individual search values. Since your use case involves multiple key columns, you will need two different delimiters - one to separate tuples, and one to separate keys within a tuple.</p>\n<p>For example, if you can build a parameter like:</p>\n<pre><code>DECLARE @SearchIDs VARCHAR(MAX) = '1a,1b;2a,2b;3a,3b'\n</code></pre>\n<p>The following will separate the keys and perform an efficient key lookup:</p>\n<pre><code>SELECT *\nFROM (\n    SELECT\n        MAX(CASE WHEN S2.ordinal = 1 THEN S2.value END) AS search_id_1,\n        MAX(CASE WHEN S2.ordinal = 2 THEN S2.value END) AS search_id_2\n    FROM STRING_SPLIT(@SearchIDs, ';', 1) S1\n    CROSS APPLY STRING_SPLIT(S1.value, ',', 1) S2\n    GROUP BY S1.ordinal\n) P\nJOIN foo f\n    ON f.foo_id_1 = P.search_id_1 and f.foo_id_2 = P.search_id_2\n</code></pre>\n<p>Sample results:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>search_id_1</th>\n<th>search_id_2</th>\n<th>foo_id_1</th>\n<th>foo_id_2</th>\n<th>foo_name</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1a</td>\n<td>1b</td>\n<td>1a</td>\n<td>1b</td>\n<td>A</td>\n</tr>\n<tr>\n<td>2a</td>\n<td>2b</td>\n<td>2a</td>\n<td>2b</td>\n<td>CCC</td>\n</tr>\n<tr>\n<td>3a</td>\n<td>3b</td>\n<td>3a</td>\n<td>3b</td>\n<td>EEEEE</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>In you actual code, you should cast the <code>search_id_1</code> and <code>search_id_2</code> values to the proper data type.</p>\n<pre><code>        CAST(MAX(...) AS UNIQUEIDENTIFIER) AS search_id_1,\n        CAST(MAX(...) AS UNIQUEIDENTIFIER) AS search_id_2\n</code></pre>\n<p>See <a href=\"https://dbfiddle.uk/_kwSWsLU\" rel=\"nofollow noreferrer\">this db&lt;&gt;fiddle</a>.</p>\n<p>Other more formal ways to pass multiple repeating values in a parameter  involve constructing XML or JSON, but sometimes a plain string is the simplest as long as you can guarantee that the values cannot themselves contain any delimiters.</p>\n"}],"owner":{"account_id":13048203,"reputation":113,"user_id":9429422,"display_name":"Anmol Garg"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676670584,"creation_date":1676665320,"question_id":75488941,"body_markdown":"I have a table with composite key. I want to query it in bulk in mybatis. Is it possible? if yes, how?\r\n\r\nTable structure of table Foo with foo_id_1 and foo_id_2 as composite primary key.\r\n\r\n```\r\n{\r\n foo_id_1 uniqueIdentifier,\r\n foo_id_2 uniqueIdentifier,\r\n foo_name nvarchar\r\n}\r\n```\r\n\r\nI will have a list of foo POJOs and I want to query them to check if they exist or not.\r\nBelow is for getting a single object \r\n\r\n```\r\n&lt;select id=&quot;getFooList&quot; resultMap=&quot;foo&quot;&gt;\r\n        SELECT\r\n            f.foo_id_1,\r\n            f.foo_id_2,\r\n            f.foo_name\r\n        FROM foo f\r\n        WHERE f.foo_id_1 = #{foo_id_1} and f.foo_id_2 = #{foo_id_2}\r\n    &lt;/select&gt;\r\n\r\n    &lt;resultMap id=&quot;foo&quot; type=&quot;Foo&quot;&gt;\r\n        &lt;id property=&quot;fooId1&quot; column=&quot;foo_id_1&quot;/&gt;\r\n        &lt;id property=&quot;fooId2&quot; column=&quot;foo_id_2&quot;/&gt;\r\n        &lt;result property=&quot;fooName&quot; column=&quot;foo_name&quot;/&gt;\r\n    &lt;/resultMap&gt;\r\n```\r\n\r\nBut I want to fetch in bulk.\r\nCorresponding SQL query would be\r\n\r\n```\r\nSelect *\r\nFrom foo\r\nWhere (foo_id_1 = &#39;1a&#39; and foo_id_2 = &#39;1b&#39;) or\r\n      (foo_id_1 = &#39;2a&#39; and foo_id_2 = &#39;2b&#39;) or\r\n      (foo_id_1 = &#39;3a&#39; and foo_id_2 = &#39;3b&#39;);\r\n \r\n```\r\n\r\n","title":"Querying multiple records using composite key in the mybatis","body":"<p>I have a table with composite key. I want to query it in bulk in mybatis. Is it possible? if yes, how?</p>\n<p>Table structure of table Foo with foo_id_1 and foo_id_2 as composite primary key.</p>\n<pre><code>{\n foo_id_1 uniqueIdentifier,\n foo_id_2 uniqueIdentifier,\n foo_name nvarchar\n}\n</code></pre>\n<p>I will have a list of foo POJOs and I want to query them to check if they exist or not.\nBelow is for getting a single object</p>\n<pre><code>&lt;select id=&quot;getFooList&quot; resultMap=&quot;foo&quot;&gt;\n        SELECT\n            f.foo_id_1,\n            f.foo_id_2,\n            f.foo_name\n        FROM foo f\n        WHERE f.foo_id_1 = #{foo_id_1} and f.foo_id_2 = #{foo_id_2}\n    &lt;/select&gt;\n\n    &lt;resultMap id=&quot;foo&quot; type=&quot;Foo&quot;&gt;\n        &lt;id property=&quot;fooId1&quot; column=&quot;foo_id_1&quot;/&gt;\n        &lt;id property=&quot;fooId2&quot; column=&quot;foo_id_2&quot;/&gt;\n        &lt;result property=&quot;fooName&quot; column=&quot;foo_name&quot;/&gt;\n    &lt;/resultMap&gt;\n</code></pre>\n<p>But I want to fetch in bulk.\nCorresponding SQL query would be</p>\n<pre><code>Select *\nFrom foo\nWhere (foo_id_1 = '1a' and foo_id_2 = '1b') or\n      (foo_id_1 = '2a' and foo_id_2 = '2b') or\n      (foo_id_1 = '3a' and foo_id_2 = '3b');\n \n</code></pre>\n"},{"tags":["java","reactjs","postgresql","axios","derived"],"answers":[{"tags":[],"owner":{"account_id":15035959,"reputation":307,"user_id":10852370,"display_name":"Hao Zhang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676670224,"creation_date":1676667038,"answer_id":75489140,"question_id":75489049,"body_markdown":"Try this:\r\n\r\n    SELECT pprecord FROM YourTable WHERE id =\r\n    (SELECT MAX(id) FROM YourTable WHERE asms = &#39;188660&#39;)\r\n\r\nExplanation:\r\n\r\nFirst line select pprecord, second line select the id\r\n\r\nI&#39;ll improve the answer if any additional question. Upvotes and acceptions are appreciated~","title":"Simple SQL query on highest ID","body":"<p>Try this:</p>\n<pre><code>SELECT pprecord FROM YourTable WHERE id =\n(SELECT MAX(id) FROM YourTable WHERE asms = '188660')\n</code></pre>\n<p>Explanation:</p>\n<p>First line select pprecord, second line select the id</p>\n<p>I'll improve the answer if any additional question. Upvotes and acceptions are appreciated~</p>\n"}],"owner":{"account_id":27814774,"reputation":3,"user_id":21236413,"display_name":"Bester"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75489140,"answer_count":1,"score":0,"last_activity_date":1676670224,"creation_date":1676666178,"question_id":75489049,"body_markdown":"I unsuccessfully attempted to leverage Java&#39;s DerivedQueries but cannot accomplish the required result so I have to manually write a SELECT Statement.\r\n\r\nI want to display one single record in my UI. This should be the most recently generated record (which means it has the highest ID Number) associated with a category that we call &quot;ASMS&quot;. In other words, look through all the rows that have ASMS#123, find the one that has the highest ID and then return the contents of one column cell. \r\n\r\nASMS: Entries are classified by 11 specific ASMS numbers.\r\nID: AutoGenerated\r\nPPRECORD: New entries being inserted each day\r\n\r\nI hope the image makes more sense.\r\n\r\n```java\r\n//RETURN ONLY THE LATEST RECORD\r\n//https://besterdev-api.apps.pcfepg3mi.gm.com/api/v1/pprecords/latest/{asmsnumber}\r\n@RequestMapping(&quot;/pprecords/latest/{asmsNumber}&quot;)\r\npublic List&lt;Optional&lt;PriorityProgressEntity&gt;&gt; getLatestRecord(@PathVariable(value = &quot;asmsNumber&quot;) String asmsNumber) {\r\n    List&lt;Optional&lt;PriorityProgressEntity&gt;&gt; asms_number = priorityprogressrepo.findFirst1ByAsmsNumber(asmsNumber);\r\n    return asms_number;}\r\n```\r\nThe ReactJS FE makes an AXIOS.get and I can retrieve all the records associated with the ASMS, but I do not have the skill to display only JSON object that has the highest ID value. I&#39;m happy to do this in the FE also.\r\n\r\n![Requirement](https://i.stack.imgur.com/r4XYq.png)\r\n\r\nI tried Derived Queries. `.findFirst1ByAsmsNumber(asmsNumber)` does not consider the highest ID number.","title":"Simple SQL query on highest ID","body":"<p>I unsuccessfully attempted to leverage Java's DerivedQueries but cannot accomplish the required result so I have to manually write a SELECT Statement.</p>\n<p>I want to display one single record in my UI. This should be the most recently generated record (which means it has the highest ID Number) associated with a category that we call &quot;ASMS&quot;. In other words, look through all the rows that have ASMS#123, find the one that has the highest ID and then return the contents of one column cell.</p>\n<p>ASMS: Entries are classified by 11 specific ASMS numbers.\nID: AutoGenerated\nPPRECORD: New entries being inserted each day</p>\n<p>I hope the image makes more sense.</p>\n<pre class=\"lang-java prettyprint-override\"><code>//RETURN ONLY THE LATEST RECORD\n//https://besterdev-api.apps.pcfepg3mi.gm.com/api/v1/pprecords/latest/{asmsnumber}\n@RequestMapping(&quot;/pprecords/latest/{asmsNumber}&quot;)\npublic List&lt;Optional&lt;PriorityProgressEntity&gt;&gt; getLatestRecord(@PathVariable(value = &quot;asmsNumber&quot;) String asmsNumber) {\n    List&lt;Optional&lt;PriorityProgressEntity&gt;&gt; asms_number = priorityprogressrepo.findFirst1ByAsmsNumber(asmsNumber);\n    return asms_number;}\n</code></pre>\n<p>The ReactJS FE makes an AXIOS.get and I can retrieve all the records associated with the ASMS, but I do not have the skill to display only JSON object that has the highest ID value. I'm happy to do this in the FE also.</p>\n<p><img src=\"https://i.stack.imgur.com/r4XYq.png\" alt=\"Requirement\" /></p>\n<p>I tried Derived Queries. <code>.findFirst1ByAsmsNumber(asmsNumber)</code> does not consider the highest ID number.</p>\n"},{"tags":["java","amazon-web-services","amazon-s3","consistency"],"comments":[{"owner":{"account_id":1845098,"reputation":171667,"user_id":1695906,"display_name":"Michael - sqlbot"},"score":0,"creation_date":1500584220,"post_id":45222819,"comment_id":77416437,"body_markdown":"Good answer, below, from @stdunbar.  For locking the **name** of an S3 object key (or the name of anything, really... basically a named semaphore), consider the possibility of using [consistent conditional writes](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/WorkingWithItems.html#WorkingWithItems.ConditionalUpdate) to a DynamoDB table created for the purpose of lock management.","body":"Good answer, below, from @stdunbar.  For locking the <b>name</b> of an S3 object key (or the name of anything, really... basically a named semaphore), consider the possibility of using <a href=\"http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/WorkingWithItems.html#WorkingWithItems.ConditionalUpdate\" rel=\"nofollow noreferrer\">consistent conditional writes</a> to a DynamoDB table created for the purpose of lock management."}],"answers":[{"tags":[],"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1500576944,"creation_date":1500576944,"answer_id":45223108,"question_id":45222819,"body_markdown":"No, unfortunately it won&#39;t.  From the S3 &lt;a href=&quot;http://docs.aws.amazon.com/AmazonS3/latest/dev/Introduction.html#ConsistencyModel&quot;&gt;consistency model&lt;/a&gt;:\r\n\r\n&gt; A process writes a new object to Amazon S3 and immediately lists keys\r\n&gt; within its bucket. Until the change is fully propagated, the object\r\n&gt; might not appear in the list.\r\n\r\nand:\r\n\r\n&gt; Amazon S3 does not currently support object locking. If two PUT\r\n&gt; requests are simultaneously made to the same key, the request with the\r\n&gt; latest time stamp wins. If this is an issue, you will need to build an\r\n&gt; object-locking mechanism into your application.\r\n\r\nSo if both of your threads or processes try to create the lock in S3 they will be allowed to but last write wins so you haven&#39;t really locked anything.  Something else needs to happen for your locking to work\r\n","title":"Can pseudo &quot;lock&quot; objects be used in the Amazon S3 API?","body":"<p>No, unfortunately it won't.  From the S3 <a href=\"http://docs.aws.amazon.com/AmazonS3/latest/dev/Introduction.html#ConsistencyModel\" rel=\"nofollow noreferrer\">consistency model</a>:</p>\n\n<blockquote>\n  <p>A process writes a new object to Amazon S3 and immediately lists keys\n  within its bucket. Until the change is fully propagated, the object\n  might not appear in the list.</p>\n</blockquote>\n\n<p>and:</p>\n\n<blockquote>\n  <p>Amazon S3 does not currently support object locking. If two PUT\n  requests are simultaneously made to the same key, the request with the\n  latest time stamp wins. If this is an issue, you will need to build an\n  object-locking mechanism into your application.</p>\n</blockquote>\n\n<p>So if both of your threads or processes try to create the lock in S3 they will be allowed to but last write wins so you haven't really locked anything.  Something else needs to happen for your locking to work</p>\n"},{"tags":[],"owner":{"account_id":25563016,"reputation":106,"user_id":19345335,"display_name":"Keyless"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1655305928,"creation_date":1655305928,"answer_id":72633822,"question_id":45222819,"body_markdown":"Normally, I would recommend a database, but you mention that is not an option in this case.\r\n\r\nAs an alternative, you can use something like [lockable](https://lockable.dev). They provide advisory locks which can be used to control e.g. resource access like in your case.\r\n\r\nThe solution would have to use their HTTPS endpoints (as far as I can&#39;t tell they only have a Python client):\r\n\r\n```\r\n1. Acquire lock by making a request to https://lockable.dev/api/acquire/my-lock-name\r\n2. Work on your object (read, edit, write)\r\n3. Release the lock by making a request to https://lockable.dev/api/release/my-lock-name\r\n```","title":"Can pseudo &quot;lock&quot; objects be used in the Amazon S3 API?","body":"<p>Normally, I would recommend a database, but you mention that is not an option in this case.</p>\n<p>As an alternative, you can use something like <a href=\"https://lockable.dev\" rel=\"nofollow noreferrer\">lockable</a>. They provide advisory locks which can be used to control e.g. resource access like in your case.</p>\n<p>The solution would have to use their HTTPS endpoints (as far as I can't tell they only have a Python client):</p>\n<pre><code>1. Acquire lock by making a request to https://lockable.dev/api/acquire/my-lock-name\n2. Work on your object (read, edit, write)\n3. Release the lock by making a request to https://lockable.dev/api/release/my-lock-name\n</code></pre>\n"},{"tags":[],"owner":{"account_id":99935,"reputation":501,"user_id":1128790,"accept_rate":86,"display_name":"John Stephenson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665101700,"creation_date":1660139665,"answer_id":73307585,"question_id":45222819,"body_markdown":"This bit me too, and it wasn&#39;t feasible to use a database at that time, so we came up with https://github.com/jfstephe/aws-s3-lock. This is a javascript implementation, but perhaps could inspire a java version if needed.","title":"Can pseudo &quot;lock&quot; objects be used in the Amazon S3 API?","body":"<p>This bit me too, and it wasn't feasible to use a database at that time, so we came up with <a href=\"https://github.com/jfstephe/aws-s3-lock\" rel=\"nofollow noreferrer\">https://github.com/jfstephe/aws-s3-lock</a>. This is a javascript implementation, but perhaps could inspire a java version if needed.</p>\n"},{"tags":[],"owner":{"account_id":1026503,"reputation":3508,"user_id":1035698,"display_name":"misberner"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1675532963,"creation_date":1675532963,"answer_id":75347123,"question_id":45222819,"body_markdown":"If you come here in 2023 and still think it&#39;s a good idea to use S3 for locks, this _is_ possible in a guaranteed race-condition free way thanks to the strengthened consistency model, and without any forced waiting periods during lock acquisition.\r\n\r\n1. Determine basename for the lock (e.g., `some-dir/interesting-object.lock`)\r\n2. Writer creates empty object `some-dir/interesting-object.lock.&lt;uuid&gt;` in bucket. The `&lt;uuid&gt;` can either be generated for each lock, or once for each writer (we assume a writer doesn&#39;t write concurrently), it doesn&#39;t matter.\r\n3. List objects with prefix `some-dir/interesting-object.lock.`\r\n4. Check if file with &quot;our&quot; UUID is the oldest per `ModifiedTime`. In the extremely unlikely scenario that two `ModifiedTime`s are equal, break ties based on lexicographical ordering of UUIDs.\r\n5. If aforementioned check succeeds, you have acquired the lock. You can now do the work. Otherwise, someone beat you to it.\r\n6. Remove lock file (note: this means that if the acquisition failed, you should remove the lock file immediately).\r\n\r\nThis works because it&#39;s guaranteed that once a put succeeds, it will immediately show up in list calls, and each worker does list after put. If another writer even writes the object one nanosecond after us, they are still 100% guaranteed to see in their list call that our object was there first.\r\n\r\nIn order to allow removing stale/expired locks (those should be excluded in the check in step 4, and the files be deleted), this requires placing an upper bound on the duration of the critical section, although it&#39;s possible to arbitrary extend the lock time by creating new lock files with different UUIDs (some limits apply on when you can remove the old ones, but I&#39;m too lazy to think this through right now). Also, for determining whether a lock is stale/expired, do not rely on the local machine&#39;s time, instead, use the `ModifiedTime` of the newly created lock object as a calibrated clock source.\r\n\r\n\r\nI&#39;m not saying it&#39;s a good idea to use lockfiles in S3, but that doesn&#39;t change the fact that it is possible.\r\n","title":"Can pseudo &quot;lock&quot; objects be used in the Amazon S3 API?","body":"<p>If you come here in 2023 and still think it's a good idea to use S3 for locks, this <em>is</em> possible in a guaranteed race-condition free way thanks to the strengthened consistency model, and without any forced waiting periods during lock acquisition.</p>\n<ol>\n<li>Determine basename for the lock (e.g., <code>some-dir/interesting-object.lock</code>)</li>\n<li>Writer creates empty object <code>some-dir/interesting-object.lock.&lt;uuid&gt;</code> in bucket. The <code>&lt;uuid&gt;</code> can either be generated for each lock, or once for each writer (we assume a writer doesn't write concurrently), it doesn't matter.</li>\n<li>List objects with prefix <code>some-dir/interesting-object.lock.</code></li>\n<li>Check if file with &quot;our&quot; UUID is the oldest per <code>ModifiedTime</code>. In the extremely unlikely scenario that two <code>ModifiedTime</code>s are equal, break ties based on lexicographical ordering of UUIDs.</li>\n<li>If aforementioned check succeeds, you have acquired the lock. You can now do the work. Otherwise, someone beat you to it.</li>\n<li>Remove lock file (note: this means that if the acquisition failed, you should remove the lock file immediately).</li>\n</ol>\n<p>This works because it's guaranteed that once a put succeeds, it will immediately show up in list calls, and each worker does list after put. If another writer even writes the object one nanosecond after us, they are still 100% guaranteed to see in their list call that our object was there first.</p>\n<p>In order to allow removing stale/expired locks (those should be excluded in the check in step 4, and the files be deleted), this requires placing an upper bound on the duration of the critical section, although it's possible to arbitrary extend the lock time by creating new lock files with different UUIDs (some limits apply on when you can remove the old ones, but I'm too lazy to think this through right now). Also, for determining whether a lock is stale/expired, do not rely on the local machine's time, instead, use the <code>ModifiedTime</code> of the newly created lock object as a calibrated clock source.</p>\n<p>I'm not saying it's a good idea to use lockfiles in S3, but that doesn't change the fact that it is possible.</p>\n"}],"owner":{"account_id":4666627,"reputation":132,"user_id":3779543,"accept_rate":0,"display_name":"Azzip"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2317,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":4,"score":7,"last_activity_date":1676669966,"creation_date":1500576050,"question_id":45222819,"body_markdown":"I&#39;m thinking about using &quot;lock&quot; S3 objects in order to prevent simultaneous identical operations on a given S3 object. But I have great doubts about the validity of this technical solution.\r\n\r\nMore precisely, at the beginning of an operation on an object, a lock file corresponding to the name of the object and the type of operation being done would be created. \r\n\r\nExample: at the beginning of myOperation on myObject, lck/myObject/myOperation object would be looked for and created if it does not exist.\r\n\r\nThis &quot;lock&quot; object would be destroyed at the end of the operation, whether it is successful or not.\r\n\r\nI know the standard solution would be to use a database, but the application currently does not have one. Thus, if I could handle consistency with S3 only, this would be sufficient.\r\n\r\nMy concern is that this lock object system will run in a multi-threaded / and possibly multi-nodes architecture. Now, I&#39;ve read that Amazon S3 support &quot;read after write consistency&quot;.\r\n\r\nDoes it mean that if my application 1 (node 1) / thread 2 puts a lock object on a given bucket through the Java Amazon S3 API, this lock object will be instantaneously visible to other threads and other applications using the same API?","title":"Can pseudo &quot;lock&quot; objects be used in the Amazon S3 API?","body":"<p>I'm thinking about using &quot;lock&quot; S3 objects in order to prevent simultaneous identical operations on a given S3 object. But I have great doubts about the validity of this technical solution.</p>\n<p>More precisely, at the beginning of an operation on an object, a lock file corresponding to the name of the object and the type of operation being done would be created.</p>\n<p>Example: at the beginning of myOperation on myObject, lck/myObject/myOperation object would be looked for and created if it does not exist.</p>\n<p>This &quot;lock&quot; object would be destroyed at the end of the operation, whether it is successful or not.</p>\n<p>I know the standard solution would be to use a database, but the application currently does not have one. Thus, if I could handle consistency with S3 only, this would be sufficient.</p>\n<p>My concern is that this lock object system will run in a multi-threaded / and possibly multi-nodes architecture. Now, I've read that Amazon S3 support &quot;read after write consistency&quot;.</p>\n<p>Does it mean that if my application 1 (node 1) / thread 2 puts a lock object on a given bucket through the Java Amazon S3 API, this lock object will be instantaneously visible to other threads and other applications using the same API?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":7547772,"reputation":8583,"user_id":5730279,"display_name":"hc_dev"},"score":0,"creation_date":1676664324,"post_id":75488400,"comment_id":133190156,"body_markdown":"Please post the complete error-output (including stack trace) for &quot;resulting in null pointer exception&quot;, also show what did not work when filtering with Java&#39;s Streaming API.","body":"Please post the complete error-output (including stack trace) for &quot;resulting in null pointer exception&quot;, also show what did not work when filtering with Java&#39;s Streaming API."}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676669896,"creation_date":1676665015,"answer_id":75488890,"question_id":75488400,"body_markdown":"&gt; I want to remove the null value of company ID.\r\n\r\nI presume you mean remove the list element if the Id is null. So It&#39;s not the bean that is null, it is the `companyId`.  Assuming you have getters, try it like this.  If the Id is not null, let it pass thru.\r\n```\r\n\r\nList&lt;NewSRMAPIResponseBean&gt; finalList=newSRMAPIResponseBeanList.parallelStream()\r\n        .filter(bean-&gt;bean.getCompanyId() != null)\r\n        .collect(Collectors.toList());\r\n```\r\nYou can also do it in a simple loop.\r\nTo avoid a `ConurrentModificationException`, use an iterator.\r\n```\r\nIterator&lt;NewSRMAPIResponseBean&gt; iter =  newSRMAPIResponseBeanList.iterator();\r\nwhile (iter.hasNext()) {\r\n    if (iter.next().getCompanyId() == null) {\r\n        iter.remove();\r\n    }\r\n}","title":"Not able to remove null from a list in Java","body":"<blockquote>\n<p>I want to remove the null value of company ID.</p>\n</blockquote>\n<p>I presume you mean remove the list element if the Id is null. So It's not the bean that is null, it is the <code>companyId</code>.  Assuming you have getters, try it like this.  If the Id is not null, let it pass thru.</p>\n<pre><code>\nList&lt;NewSRMAPIResponseBean&gt; finalList=newSRMAPIResponseBeanList.parallelStream()\n        .filter(bean-&gt;bean.getCompanyId() != null)\n        .collect(Collectors.toList());\n</code></pre>\n<p>You can also do it in a simple loop.\nTo avoid a <code>ConurrentModificationException</code>, use an iterator.</p>\n<pre><code>Iterator&lt;NewSRMAPIResponseBean&gt; iter =  newSRMAPIResponseBeanList.iterator();\nwhile (iter.hasNext()) {\n    if (iter.next().getCompanyId() == null) {\n        iter.remove();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":27528457,"reputation":39,"user_id":21007380,"display_name":"Pratik"},"comment_count":1,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1676666008,"accepted_answer_id":75488890,"answer_count":1,"score":0,"last_activity_date":1676669896,"creation_date":1676661169,"question_id":75488400,"body_markdown":"I have a list of a bean class newSRMAPIResponseBeanList wherein I am always getting a null object at last which I am trying to remove but it is resulting in null pointer exception if I handle the exception, it is not removing that null value. Below is my code.\r\n\r\n    for (int i = 0; i &lt; newSRMAPIResponseBeanList.size(); i++) {\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tif (newSRMAPIResponseBeanList.get(i).getCompanyId().equals(null)) {\r\n    \t\t\t\t\t\tnewSRMAPIResponseBeanList.remove(i);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}catch(Exception e) {\r\n    \t\t\t\t\te.printStackTrace();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n\r\nIn the if condition itself it is failing. I want to remove the null value of company ID. Actually newSRMAPIResponseBeanList is a list of `List&lt;NewSRMAPIResponseBean&gt; newSRMAPIResponseBeanList = new ArrayList&lt;&gt;();` and the bean class is as follows.\r\n\r\n    public class NewSRMAPIResponseBean {\r\n    \tprivate String companyId;\r\n    \tprivate String investmentId;\r\n    \tprivate String performanceId;\r\n    \tprivate List&lt;String&gt; values;\r\n    }\r\n\r\nIs there any way I can remove that null value? I also tried using Java streams as follows.\r\n\r\n    List&lt;NewSRMAPIResponseBean&gt; finalList=newSRMAPIResponseBeanList.parallelStream()\r\n    \t\t\t      .filter(Objects::nonNull)\r\n    \t\t\t      .collect(Collectors.toList());\r\n\r\nThis too did not work.","title":"Not able to remove null from a list in Java","body":"<p>I have a list of a bean class newSRMAPIResponseBeanList wherein I am always getting a null object at last which I am trying to remove but it is resulting in null pointer exception if I handle the exception, it is not removing that null value. Below is my code.</p>\n<pre><code>for (int i = 0; i &lt; newSRMAPIResponseBeanList.size(); i++) {\n                try {\n                    if (newSRMAPIResponseBeanList.get(i).getCompanyId().equals(null)) {\n                        newSRMAPIResponseBeanList.remove(i);\n                    }\n                }catch(Exception e) {\n                    e.printStackTrace();\n                }\n            }\n</code></pre>\n<p>In the if condition itself it is failing. I want to remove the null value of company ID. Actually newSRMAPIResponseBeanList is a list of <code>List&lt;NewSRMAPIResponseBean&gt; newSRMAPIResponseBeanList = new ArrayList&lt;&gt;();</code> and the bean class is as follows.</p>\n<pre><code>public class NewSRMAPIResponseBean {\n    private String companyId;\n    private String investmentId;\n    private String performanceId;\n    private List&lt;String&gt; values;\n}\n</code></pre>\n<p>Is there any way I can remove that null value? I also tried using Java streams as follows.</p>\n<pre><code>List&lt;NewSRMAPIResponseBean&gt; finalList=newSRMAPIResponseBeanList.parallelStream()\n                  .filter(Objects::nonNull)\n                  .collect(Collectors.toList());\n</code></pre>\n<p>This too did not work.</p>\n"},{"tags":["java","amazon-web-services","amazon-s3","sdk"],"answers":[{"tags":[],"owner":{"account_id":3963723,"reputation":1327,"user_id":3270254,"accept_rate":62,"display_name":"scalauser"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1417502460,"creation_date":1417502460,"answer_id":27243350,"question_id":27242297,"body_markdown":"Only thing I can see is getting connection to your S3 bucket.Try the following and it may help\r\n\r\n    AWSCredentials credentials = new BasicAWSCredentials(accessKeyId,secretAccessKey);\r\n    \t\tAmazonS3 s3Client = new AmazonS3Client(credentials);\r\n    \r\n    ObjectListing objects = s3Client.listObjects(listobjectrequest);\r\n\r\n","title":"List all the zip files recursively within S3 bucket using Java API","body":"<p>Only thing I can see is getting connection to your S3 bucket.Try the following and it may help</p>\n\n<pre><code>AWSCredentials credentials = new BasicAWSCredentials(accessKeyId,secretAccessKey);\n        AmazonS3 s3Client = new AmazonS3Client(credentials);\n\nObjectListing objects = s3Client.listObjects(listobjectrequest);\n</code></pre>\n"}],"owner":{"account_id":69592,"reputation":53841,"user_id":202375,"accept_rate":62,"display_name":"Saurabh Gokhale"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1276,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1676669729,"creation_date":1417497164,"question_id":27242297,"body_markdown":"I&#39;ve a S3 bucket on the Amazon and trying to get the list of all the zip files located within folders under the bucket recursively.\r\n\r\nFor e.g, my zip files are located as shown below :\r\n\r\n    bucket1/${user1}/${date1}/abc.zip\r\n    bucket1/${user2}/${date2}/xyz.zip\r\n    bucket1/${user3}/${date3}/mno.zip\r\n\r\n    bucketName=bucket1\r\n    prefix=bucket1/\r\n\r\nBelow is my code : \r\n\r\n    final AmazonS3 amazonS3 = AmazonS3Utils.getAmazonS3Client();\r\n    final ListObjectsRequest listObjectsRequest = new ListObjectsRequest().withBucketName(&quot;bucket1&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.withPrefix(&quot;bucket1/&quot;);\r\n    \t\t\r\n    ObjectListing current = amazonS3.listObjects(listObjectsRequest);\r\n    final List&lt;S3ObjectSummary&gt; keyList = current.getObjectSummaries();\r\n    \r\n    while (current.isTruncated()) \r\n    {\r\n       keyList.addAll(current.getObjectSummaries());\r\n       current = amazonS3.listNextBatchOfObjects(current);\r\n    }\r\n    \t\r\n    keyList.addAll(current.getObjectSummaries());\r\n    for(S3ObjectSummary summary : keyList)\r\n    {\r\n    \tSystem.out.println(summary.getKey());\r\n    }\r\n\r\nBut I get back an empty list.\r\n\r\nAm I doing anything wrong? Is there any way to recursively get list of zip files from the bucket?","title":"List all the zip files recursively within S3 bucket using Java API","body":"<p>I've a S3 bucket on the Amazon and trying to get the list of all the zip files located within folders under the bucket recursively.</p>\n<p>For e.g, my zip files are located as shown below :</p>\n<pre><code>bucket1/${user1}/${date1}/abc.zip\nbucket1/${user2}/${date2}/xyz.zip\nbucket1/${user3}/${date3}/mno.zip\n\nbucketName=bucket1\nprefix=bucket1/\n</code></pre>\n<p>Below is my code :</p>\n<pre><code>final AmazonS3 amazonS3 = AmazonS3Utils.getAmazonS3Client();\nfinal ListObjectsRequest listObjectsRequest = new ListObjectsRequest().withBucketName(&quot;bucket1&quot;)\n                                                                            .withPrefix(&quot;bucket1/&quot;);\n        \nObjectListing current = amazonS3.listObjects(listObjectsRequest);\nfinal List&lt;S3ObjectSummary&gt; keyList = current.getObjectSummaries();\n\nwhile (current.isTruncated()) \n{\n   keyList.addAll(current.getObjectSummaries());\n   current = amazonS3.listNextBatchOfObjects(current);\n}\n    \nkeyList.addAll(current.getObjectSummaries());\nfor(S3ObjectSummary summary : keyList)\n{\n    System.out.println(summary.getKey());\n}\n</code></pre>\n<p>But I get back an empty list.</p>\n<p>Am I doing anything wrong? Is there any way to recursively get list of zip files from the bucket?</p>\n"},{"tags":["java","arrays","loops"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1676648179,"post_id":75486282,"comment_id":133185478,"body_markdown":"Please [edit] your question to include a [example]. It would be helpful to also see your inputs, expected output and actual output.","body":"Please <a href=\"https://stackoverflow.com/posts/75486282/edit\">edit</a> your question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. It would be helpful to also see your inputs, expected output and actual output."}],"answers":[{"tags":[],"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676669464,"creation_date":1676669464,"answer_id":75489398,"question_id":75486282,"body_markdown":"We can&#39;t tell what&#39;s wrong with your code as we can&#39;t see all those supporting functions and whether they are implemented correctly, as well as how you&#39;re testing the results to see if they are correct.\r\n\r\nI&#39;d start, though, with re-writing your `getAdjacent()` function so it&#39;s easier to read and understand:\r\n\r\n    public ArrayList&lt;GridCell&gt; getAdjacent() {\r\n        ArrayList&lt;GridCell&gt; results = new ArrayList&lt;GridCell&gt;();\r\n\r\n        int curRow = this.getRow();\r\n        int r1 = Math.Max(0, curRow-1);\r\n        int r2 = Math.Min(grid.getHeight()-1, curRow+1);\r\n      \r\n        int curCol = this.getColumn();\r\n        int c1 = Math.Max(0, curCol-1);\r\n        int c2 = Math.Min(grid.getWidth()-1, curCol+1);\r\n      \r\n        for (int r = r1; r &lt;= r2; r++) {\r\n            for(int c = c1; c &lt;= c2; c++) {\r\n                if ( !(r == curRow &amp;&amp; c == curCol) ) {\r\n                    results.add(grid.get(r,c));\r\n                }\r\n            }\r\n        }\r\n      \r\n        return results;\r\n    }\r\n\r\nIf `getRow()` or `getColumn()` give coordinates that are NOT within the bounds of the array, should it return an empty ArrayList? What if those coords are just outside the bounds and some the adjacent neighbors are within bounds? Should those coords within the bounds still be returned even when the starting coords are outside bounds?\r\n\r\nThis version has the benefit that you can now inspect `curRow`, `curCol`, `r1`, `r2`, `c1`, and `c2` to see if those values are what you&#39;re expecting. This will tell you if those supporting functions are working correctly.","title":"Trying to output all the adjacent elements in a 2d array but only output is the size of the array","body":"<p>We can't tell what's wrong with your code as we can't see all those supporting functions and whether they are implemented correctly, as well as how you're testing the results to see if they are correct.</p>\n<p>I'd start, though, with re-writing your <code>getAdjacent()</code> function so it's easier to read and understand:</p>\n<pre><code>public ArrayList&lt;GridCell&gt; getAdjacent() {\n    ArrayList&lt;GridCell&gt; results = new ArrayList&lt;GridCell&gt;();\n\n    int curRow = this.getRow();\n    int r1 = Math.Max(0, curRow-1);\n    int r2 = Math.Min(grid.getHeight()-1, curRow+1);\n  \n    int curCol = this.getColumn();\n    int c1 = Math.Max(0, curCol-1);\n    int c2 = Math.Min(grid.getWidth()-1, curCol+1);\n  \n    for (int r = r1; r &lt;= r2; r++) {\n        for(int c = c1; c &lt;= c2; c++) {\n            if ( !(r == curRow &amp;&amp; c == curCol) ) {\n                results.add(grid.get(r,c));\n            }\n        }\n    }\n  \n    return results;\n}\n</code></pre>\n<p>If <code>getRow()</code> or <code>getColumn()</code> give coordinates that are NOT within the bounds of the array, should it return an empty ArrayList? What if those coords are just outside the bounds and some the adjacent neighbors are within bounds? Should those coords within the bounds still be returned even when the starting coords are outside bounds?</p>\n<p>This version has the benefit that you can now inspect <code>curRow</code>, <code>curCol</code>, <code>r1</code>, <code>r2</code>, <code>c1</code>, and <code>c2</code> to see if those values are what you're expecting. This will tell you if those supporting functions are working correctly.</p>\n"}],"owner":{"account_id":19699900,"reputation":13,"user_id":14422938,"display_name":"Jojo Fan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676669464,"creation_date":1676648018,"question_id":75486282,"body_markdown":"```\r\n\tpublic ArrayList&lt;GridCell&gt; getAdjacent() {\r\n\t\tArrayList&lt;GridCell&gt; results = new ArrayList&lt;GridCell&gt;();\r\n\t\t\r\n\t\tfor (int r = this.getRow()-1; r&lt;= this.getRow()+1; r++ ) {\r\n\t\t\tfor(int c = this.getColumn() -1 ; c&lt;= this.getColumn() +1 ;c++) {\r\n\t\t\t\tif (r == this.getRow()  &amp;&amp;  c == this.getColumn()) {\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\telse if (r &lt; 0 ||  r &gt; grid.getHeight() - 1 || c &lt; 0 || c &gt; grid.getWidth() - 1) {\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tresults.add(grid.get(r,c));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn results;\r\n\t}\r\n```\r\n\r\n\r\nI tried to create a nested for loop to go on the adjacent rows and columns of the element and see if they are not out of bound or the actual element. It should output the locations of the elements but just output the size of the 2d array e.g 4x3. \r\n\r\nthis.getRows() and this.getColumns() repesents the coorditnated of the location of the element in the array that i want to find the adjacent elements of. for example (3,1) is the element to find the adjacent and the size of the array is 4 rows by 3 colunms and currenlty  the ouput is currently an arraylist with 1 value of (4,3) but i expect it to be an arraylist with the values (3,0)(3,2)(2,0)(2,1)(2,2).","title":"Trying to output all the adjacent elements in a 2d array but only output is the size of the array","body":"<pre><code>    public ArrayList&lt;GridCell&gt; getAdjacent() {\n        ArrayList&lt;GridCell&gt; results = new ArrayList&lt;GridCell&gt;();\n        \n        for (int r = this.getRow()-1; r&lt;= this.getRow()+1; r++ ) {\n            for(int c = this.getColumn() -1 ; c&lt;= this.getColumn() +1 ;c++) {\n                if (r == this.getRow()  &amp;&amp;  c == this.getColumn()) {\n                    \n                }\n                else if (r &lt; 0 ||  r &gt; grid.getHeight() - 1 || c &lt; 0 || c &gt; grid.getWidth() - 1) {\n                    \n                }\n                else {\n                    results.add(grid.get(r,c));\n                }\n            }\n        }\n        return results;\n    }\n</code></pre>\n<p>I tried to create a nested for loop to go on the adjacent rows and columns of the element and see if they are not out of bound or the actual element. It should output the locations of the elements but just output the size of the 2d array e.g 4x3.</p>\n<p>this.getRows() and this.getColumns() repesents the coorditnated of the location of the element in the array that i want to find the adjacent elements of. for example (3,1) is the element to find the adjacent and the size of the array is 4 rows by 3 colunms and currenlty  the ouput is currently an arraylist with 1 value of (4,3) but i expect it to be an arraylist with the values (3,0)(3,2)(2,0)(2,1)(2,2).</p>\n"},{"tags":["java","spring","mongodb","mongo-shell","mongotemplate"],"answers":[{"tags":[],"owner":{"account_id":18482495,"reputation":14167,"user_id":13464279,"display_name":"J.F."},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676669000,"creation_date":1676669000,"answer_id":75489355,"question_id":75487361,"body_markdown":"According to [docs](https://docs.spring.io/spring-data/data-document/docs/jdiff-mongo-m2-m3/mongo-report/Version%201.0.0%20M3/org/springframework/data/document/mongodb/MongoTemplate.html) you can call `executeCommand` using `DBObject` or `String` as a parameter.\r\n\r\nSo one option is simply get the JSON as String:\r\n\r\n```java\r\nString jsonCommand = &quot;{compact: &quot; + collectionName + &quot;}&quot;;\r\nmongoTemplate.executeCommand(jsonCommand);\r\n```\r\n\r\nOr create the `DBObject`:\r\n\r\n```java\r\nDBObject dbObject = new BasicDBObject(&quot;compact&quot;, collectionName );\r\nmongoTemplate.executeCommand(dbObject);\r\n```\r\n\r\nOr even, according to [this answer](https://stackoverflow.com/a/60717743/13464279) you can create the `DBObject` from a JSON:\r\n\r\n```java\r\nBasicDBObject dbObject = com.mongodb.BasicDBObject.parse(jsonCommand)\r\nmongoTemplate.executeCommand(dbObject);\r\n```","title":"MongoDb compact command using spring boot MongoTemplate","body":"<p>According to <a href=\"https://docs.spring.io/spring-data/data-document/docs/jdiff-mongo-m2-m3/mongo-report/Version%201.0.0%20M3/org/springframework/data/document/mongodb/MongoTemplate.html\" rel=\"nofollow noreferrer\">docs</a> you can call <code>executeCommand</code> using <code>DBObject</code> or <code>String</code> as a parameter.</p>\n<p>So one option is simply get the JSON as String:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String jsonCommand = &quot;{compact: &quot; + collectionName + &quot;}&quot;;\nmongoTemplate.executeCommand(jsonCommand);\n</code></pre>\n<p>Or create the <code>DBObject</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>DBObject dbObject = new BasicDBObject(&quot;compact&quot;, collectionName );\nmongoTemplate.executeCommand(dbObject);\n</code></pre>\n<p>Or even, according to <a href=\"https://stackoverflow.com/a/60717743/13464279\">this answer</a> you can create the <code>DBObject</code> from a JSON:</p>\n<pre class=\"lang-java prettyprint-override\"><code>BasicDBObject dbObject = com.mongodb.BasicDBObject.parse(jsonCommand)\nmongoTemplate.executeCommand(dbObject);\n</code></pre>\n"}],"owner":{"account_id":27813606,"reputation":13,"user_id":21235505,"display_name":"LuMa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":250,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75489355,"answer_count":1,"score":1,"last_activity_date":1676669000,"creation_date":1676654148,"question_id":75487361,"body_markdown":"Mongo shell command:\r\n\r\n    db.runCommand({compact: &lt;collection name&gt;})\r\n\r\n**How can I run same command using `MongoTemplate `in Spring Boot project?**\r\n\r\nI tried with:\r\n\r\n    @Autowired\r\n    private MongoTemplate mongoTemplate;\r\n    ...\r\n    mongoTemplate.executeCommand(jsonCommand);\r\n    ...\r\n\r\nbut it supports only commands in json.","title":"MongoDb compact command using spring boot MongoTemplate","body":"<p>Mongo shell command:</p>\n<pre><code>db.runCommand({compact: &lt;collection name&gt;})\n</code></pre>\n<p><strong>How can I run same command using <code>MongoTemplate </code>in Spring Boot project?</strong></p>\n<p>I tried with:</p>\n<pre><code>@Autowired\nprivate MongoTemplate mongoTemplate;\n...\nmongoTemplate.executeCommand(jsonCommand);\n...\n</code></pre>\n<p>but it supports only commands in json.</p>\n"},{"tags":["java","spring","apache-kafka","apache-kafka-streams","spring-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1600721109,"post_id":63994444,"comment_id":113171676,"body_markdown":"Similar: https://stackoverflow.com/q/63992538/2308683","body":"Similar: <a href=\"https://stackoverflow.com/q/63992538/2308683\">stackoverflow.com/q/63992538/2308683</a>"},{"owner":{"account_id":10400131,"reputation":343,"user_id":7668695,"display_name":"Vinicius Santos"},"score":0,"creation_date":1600732998,"post_id":63994444,"comment_id":113174703,"body_markdown":"@OneCricketeer It is not so similar because in my case I have a chain of microservices, I don&#39;t just need the consumer&#39;s processing time, but anyway it was useful knowledge thanks","body":"@OneCricketeer It is not so similar because in my case I have a chain of microservices, I don&#39;t just need the consumer&#39;s processing time, but anyway it was useful knowledge thanks"}],"answers":[{"tags":[],"owner":{"account_id":10400131,"reputation":343,"user_id":7668695,"display_name":"Vinicius Santos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676668891,"creation_date":1676668891,"answer_id":75489343,"question_id":63994444,"body_markdown":"In this case I solved it using [opentelemetry](https://opentelemetry.io/)","title":"How to measure the total time of an asynchronous process using Kafka topics?","body":"<p>In this case I solved it using <a href=\"https://opentelemetry.io/\" rel=\"nofollow noreferrer\">opentelemetry</a></p>\n"}],"owner":{"account_id":10400131,"reputation":343,"user_id":7668695,"display_name":"Vinicius Santos"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":327,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75489343,"answer_count":1,"score":0,"last_activity_date":1676668891,"creation_date":1600698857,"question_id":63994444,"body_markdown":"\r\nI have the following microservices scenario\r\n\r\nMicroservice 1\r\n\r\n1 - Collect a `System.getCurrentTimeMillis`\r\n\r\n2 - Generate an id after an operation in the DB\r\n\r\n3 - Send an object in json in the format below to the topic INICIO_PROCESSAMENTO\r\n\r\n```json\r\n{\r\n   &quot;uuid&quot;: &quot;b45ebe6f-d59a-4e37-9706-f546b32c68c3&quot;,\r\n   &quot;milliSeconds&quot;: 1600258507450\r\n}\r\n```\r\n\r\nMicroservice 7\r\n\r\n1 - Finish processing the message with the ID generated in the first microservice\r\n\r\n2 - Collect a `System.getCurrentTimeMillis`\r\n\r\n3 - Send Json below for the topic FIM_PROCESSAMENTO\r\n\r\n```json\r\n{\r\n   &quot;uuid&quot;: &quot;b45ebe6f-d59a-4e37-9706-f546b32c68c3&quot;,\r\n   &quot;milliSeconds&quot;: 1600258508980\r\n}\r\n\r\n```\r\n\r\nIn this case, how can I measure the total time of the asynchronous transaction? One suggestion was to use Kafka Streams and maybe KTables, but I didn&#39;t understand how that would work.\r\n\r\nAn important point the message ID in Kafka is a long generated by Kafka / Driver. The ID of my operation exists only within the body of messages sent to topics.\r\n\r\nThe final objective is to be able to collect the total time of the process for analysis, initially we would use opentracing for this, but as we have an integration with third parties in the middle of the process and we depend on their return that comes without the transaction id we were unable to follow that way.","title":"How to measure the total time of an asynchronous process using Kafka topics?","body":"<p>I have the following microservices scenario</p>\n<p>Microservice 1</p>\n<p>1 - Collect a <code>System.getCurrentTimeMillis</code></p>\n<p>2 - Generate an id after an operation in the DB</p>\n<p>3 - Send an object in json in the format below to the topic INICIO_PROCESSAMENTO</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n   &quot;uuid&quot;: &quot;b45ebe6f-d59a-4e37-9706-f546b32c68c3&quot;,\n   &quot;milliSeconds&quot;: 1600258507450\n}\n</code></pre>\n<p>Microservice 7</p>\n<p>1 - Finish processing the message with the ID generated in the first microservice</p>\n<p>2 - Collect a <code>System.getCurrentTimeMillis</code></p>\n<p>3 - Send Json below for the topic FIM_PROCESSAMENTO</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n   &quot;uuid&quot;: &quot;b45ebe6f-d59a-4e37-9706-f546b32c68c3&quot;,\n   &quot;milliSeconds&quot;: 1600258508980\n}\n\n</code></pre>\n<p>In this case, how can I measure the total time of the asynchronous transaction? One suggestion was to use Kafka Streams and maybe KTables, but I didn't understand how that would work.</p>\n<p>An important point the message ID in Kafka is a long generated by Kafka / Driver. The ID of my operation exists only within the body of messages sent to topics.</p>\n<p>The final objective is to be able to collect the total time of the process for analysis, initially we would use opentracing for this, but as we have an integration with third parties in the middle of the process and we depend on their return that comes without the transaction id we were unable to follow that way.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1586709486,"post_id":61174769,"comment_id":108222200,"body_markdown":"The best way to do this would be to get a library that specifically does OAuth.  Why do you want to use `HTTPClient`?","body":"The best way to do this would be to get a library that specifically does OAuth.  Why do you want to use <code>HTTPClient</code>?"},{"owner":{"account_id":10400131,"reputation":343,"user_id":7668695,"display_name":"Vinicius Santos"},"score":0,"creation_date":1586710002,"post_id":61174769,"comment_id":108222428,"body_markdown":"Because it is already the standard implementation of java, I would just like to decorate this class and use it, theoretically just add an Authorization header with the token, I don&#39;t think an extra lib is necessary for this.","body":"Because it is already the standard implementation of java, I would just like to decorate this class and use it, theoretically just add an Authorization header with the token, I don&#39;t think an extra lib is necessary for this."},{"owner":{"account_id":10400131,"reputation":343,"user_id":7668695,"display_name":"Vinicius Santos"},"score":0,"creation_date":1586787764,"post_id":61174769,"comment_id":108248517,"body_markdown":"I researched some more and I think the best way to solve the authentication problem is to create an Authentication and add it to the http client through the builder, the problem is that I have no idea how to set up Authentication using token.","body":"I researched some more and I think the best way to solve the authentication problem is to create an Authentication and add it to the http client through the builder, the problem is that I have no idea how to set up Authentication using token."}],"answers":[{"tags":[],"owner":{"account_id":10400131,"reputation":343,"user_id":7668695,"display_name":"Vinicius Santos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676668738,"creation_date":1676668738,"answer_id":75489316,"question_id":61174769,"body_markdown":"Instead of creating a decorator for the class, I created another class responsible for managing the access token, so when I do a getAccessToken() this method already performs the necessary validations and refreshes the token if necessary, so I only have than adding the Authorization header to the requests I want and calling my method to get an updated token.","title":"How to decorate the httpclient to send requests with oauth authentication?","body":"<p>Instead of creating a decorator for the class, I created another class responsible for managing the access token, so when I do a getAccessToken() this method already performs the necessary validations and refreshes the token if necessary, so I only have than adding the Authorization header to the requests I want and calling my method to get an updated token.</p>\n"}],"owner":{"account_id":10400131,"reputation":343,"user_id":7668695,"display_name":"Vinicius Santos"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":301,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75489316,"answer_count":1,"score":0,"last_activity_date":1676668738,"creation_date":1586709384,"question_id":61174769,"body_markdown":"I&#39;m creating a HttpClient bean (Java 11 - httpclient) using a new class that decorates HttpClient, so that I can solve\r\n&#160;the following two problems:\r\n\r\n1- Add a standard timeout on request (resolved)\r\n\r\n2 - Add authorization headers automatically in the request to use Oauth tokens (The problem to be solved)\r\n\r\nWe can see the status of the code below:\r\n\r\n    @ToString\r\n    @AllArgsConstructor\r\n    public class HttpRequest extends java.net.http.HttpRequest {\r\n    \r\n        protected final java.net.http.HttpRequest delegate;\r\n    \r\n        private final HttpClientConfig config;\r\n    \r\n        @Override\r\n        public Optional&lt;BodyPublisher&gt; bodyPublisher() {\r\n            return delegate.bodyPublisher();\r\n        }\r\n    \r\n        @Override\r\n        public String method() {\r\n            return delegate.method();\r\n        }\r\n    \r\n        @Override\r\n        public Optional&lt;Duration&gt; timeout() {\r\n            return delegate.timeout().isEmpty() ?\r\n                    Optional.of(config.getDefaultTimeout()) : delegate.timeout();\r\n        }\r\n    \r\n        @Override\r\n        public boolean expectContinue() {\r\n            return delegate.expectContinue();\r\n        }\r\n    \r\n        @Override\r\n        public URI uri() {\r\n            return delegate.uri();\r\n        }\r\n    \r\n        @Override\r\n        public Optional&lt;HttpClient.Version&gt; version() {\r\n            return delegate.version();\r\n        }\r\n    \r\n        @Override\r\n        public HttpHeaders headers() {\r\n            //TODO How to return an HttpHeaders with new headers if it is built during Request and Response and is immutable?\r\n            return delegate.headers();\r\n        }\r\n    }\r\n\r\nThe big problem is how can I return HttpHeaders with the addition of the header authorization, it is an immutable object and is only created during the resquest and resonse build?","title":"How to decorate the httpclient to send requests with oauth authentication?","body":"<p>I'm creating a HttpClient bean (Java 11 - httpclient) using a new class that decorates HttpClient, so that I can solve\n the following two problems:</p>\n\n<p>1- Add a standard timeout on request (resolved)</p>\n\n<p>2 - Add authorization headers automatically in the request to use Oauth tokens (The problem to be solved)</p>\n\n<p>We can see the status of the code below:</p>\n\n<pre><code>@ToString\n@AllArgsConstructor\npublic class HttpRequest extends java.net.http.HttpRequest {\n\n    protected final java.net.http.HttpRequest delegate;\n\n    private final HttpClientConfig config;\n\n    @Override\n    public Optional&lt;BodyPublisher&gt; bodyPublisher() {\n        return delegate.bodyPublisher();\n    }\n\n    @Override\n    public String method() {\n        return delegate.method();\n    }\n\n    @Override\n    public Optional&lt;Duration&gt; timeout() {\n        return delegate.timeout().isEmpty() ?\n                Optional.of(config.getDefaultTimeout()) : delegate.timeout();\n    }\n\n    @Override\n    public boolean expectContinue() {\n        return delegate.expectContinue();\n    }\n\n    @Override\n    public URI uri() {\n        return delegate.uri();\n    }\n\n    @Override\n    public Optional&lt;HttpClient.Version&gt; version() {\n        return delegate.version();\n    }\n\n    @Override\n    public HttpHeaders headers() {\n        //TODO How to return an HttpHeaders with new headers if it is built during Request and Response and is immutable?\n        return delegate.headers();\n    }\n}\n</code></pre>\n\n<p>The big problem is how can I return HttpHeaders with the addition of the header authorization, it is an immutable object and is only created during the resquest and resonse build?</p>\n"},{"tags":["java","jsf-2","java-ee-6","cdi","weld"],"answers":[{"tags":[],"owner":{"account_id":1031744,"reputation":27054,"user_id":1039952,"accept_rate":81,"display_name":"Petr Mensik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380805688,"creation_date":1380805688,"answer_id":19160052,"question_id":19159918,"body_markdown":"I am really not aware that this kind of configuration can be made in `beans.xml` (this probably works just in Spring but maybe somebody will correct me). The CDI way of initializing the values is the method annotated with `@PostConstruct`, so try this\r\n\r\n    public class Sample {\r\n\r\n        private String text;\r\n\r\n        @PostConstruct\r\n        public void init() {\r\n             this.text = &quot;aaa&quot;;\r\n        }\r\n    }","title":"CDI bean configuration using beans.xml file","body":"<p>I am really not aware that this kind of configuration can be made in <code>beans.xml</code> (this probably works just in Spring but maybe somebody will correct me). The CDI way of initializing the values is the method annotated with <code>@PostConstruct</code>, so try this</p>\n\n<pre><code>public class Sample {\n\n    private String text;\n\n    @PostConstruct\n    public void init() {\n         this.text = \"aaa\";\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3402640,"reputation":91,"user_id":2854470,"display_name":"jboz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1381217861,"creation_date":1381217861,"answer_id":19241812,"question_id":19159918,"body_markdown":"Have you try to implement a javax.enterprise.inject.spi.Extension that @Observes ProcessInjectionTarget like this [Wrapping an InjectionTarget][1] ?\r\n\r\n\r\n  [1]: http://docs.jboss.org/weld/reference/latest/en-US/html/extend.html#d0e5267\r\n\r\nThis example inject bean values from resource bundle.","title":"CDI bean configuration using beans.xml file","body":"<p>Have you try to implement a javax.enterprise.inject.spi.Extension that @Observes ProcessInjectionTarget like this <a href=\"http://docs.jboss.org/weld/reference/latest/en-US/html/extend.html#d0e5267\" rel=\"nofollow\">Wrapping an InjectionTarget</a> ?</p>\n\n<p>This example inject bean values from resource bundle.</p>\n"},{"tags":[],"owner":{"account_id":1072308,"reputation":1659,"user_id":1071289,"accept_rate":70,"display_name":"pWoz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1382011854,"creation_date":1382011854,"answer_id":19426399,"question_id":19159918,"body_markdown":"There is no built-in solution for this problem. You can use some third party solutions like Apache DeltaSpike http://deltaspike.apache.org/ or implement it by Your own using CDI extensions for example.","title":"CDI bean configuration using beans.xml file","body":"<p>There is no built-in solution for this problem. You can use some third party solutions like Apache DeltaSpike <a href=\"http://deltaspike.apache.org/\" rel=\"nofollow\">http://deltaspike.apache.org/</a> or implement it by Your own using CDI extensions for example.</p>\n"},{"tags":[],"owner":{"account_id":3791308,"reputation":1,"user_id":3147769,"display_name":"Dimitris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1388442500,"creation_date":1388442500,"answer_id":20848593,"question_id":19159918,"body_markdown":"In the sample link that you posted if you see the .xml file it uses the package name and then the class name so if you try to change from `&lt;ress:Sample&gt;` to `&lt;ress:net.resourceAuth.Sample&gt;` it might work.","title":"CDI bean configuration using beans.xml file","body":"<p>In the sample link that you posted if you see the .xml file it uses the package name and then the class name so if you try to change from <code>&lt;ress:Sample&gt;</code> to <code>&lt;ress:net.resourceAuth.Sample&gt;</code> it might work.</p>\n"},{"tags":[],"owner":{"account_id":2324029,"reputation":172,"user_id":2038948,"display_name":"Andr&#233;"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676668642,"creation_date":1676668642,"answer_id":75489303,"question_id":19159918,"body_markdown":"EJB&#180;s can be configured via XML ..it is the ejb-jar.xml","title":"CDI bean configuration using beans.xml file","body":"<p>EJB´s can be configured via XML ..it is the ejb-jar.xml</p>\n"}],"owner":{"account_id":1072308,"reputation":1659,"user_id":1071289,"accept_rate":70,"display_name":"pWoz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14994,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":19426399,"answer_count":5,"score":1,"last_activity_date":1676668642,"creation_date":1380805315,"question_id":19159918,"body_markdown":"I have very simple CDI bean:\r\n\r\n    package net.resourceAuth;\r\n\r\n    public class Sample {\r\n\r\n\t   private String text;\r\n\t\r\n\t   public String getText() {\r\n\t\treturn text;\r\n\t   }\r\n\t\r\n\t   public void setText(String text) {\r\n\t\tthis.text = text;\r\n\t   }\r\n    }\r\n\r\nAnd now I would like to initialize `text` variable using `beans.xml`. I&#39;m trying with `beans.xml` file like this one:\r\n\r\n    &lt;beans xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n        xmlns:res=&quot;urn:java:net.resourceAuth&quot;\r\n        xsi:schemaLocation=&quot;\r\n        http://java.sun.com/xml/ns/javaee \r\n        http://java.sun.com/xml/ns/javaee/beans_1_0.xsd&quot;&gt;\r\n\r\n\t    &lt;res:Sample&gt;\r\n\t\t  &lt;res:text&gt;test123&lt;/res:text&gt;\r\n  \t    &lt;/res:Sample&gt;\r\n\t\r\n    &lt;/beans&gt;\r\n\r\nBut it does not work. `text` is always null. Can You help me figure out what is wrong here?\r\n\r\nIn other words: I am looking for a similar solution as it is used in the JSF  faces-config.xml described for example here: http://www.mkyong.com/jsf2/configure-managed-beans-in-jsf-2-0/","title":"CDI bean configuration using beans.xml file","body":"<p>I have very simple CDI bean:</p>\n\n<pre><code>package net.resourceAuth;\n\npublic class Sample {\n\n   private String text;\n\n   public String getText() {\n    return text;\n   }\n\n   public void setText(String text) {\n    this.text = text;\n   }\n}\n</code></pre>\n\n<p>And now I would like to initialize <code>text</code> variable using <code>beans.xml</code>. I'm trying with <code>beans.xml</code> file like this one:</p>\n\n<pre><code>&lt;beans xmlns=\"http://java.sun.com/xml/ns/javaee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:res=\"urn:java:net.resourceAuth\"\n    xsi:schemaLocation=\"\n    http://java.sun.com/xml/ns/javaee \n    http://java.sun.com/xml/ns/javaee/beans_1_0.xsd\"&gt;\n\n    &lt;res:Sample&gt;\n      &lt;res:text&gt;test123&lt;/res:text&gt;\n    &lt;/res:Sample&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>But it does not work. <code>text</code> is always null. Can You help me figure out what is wrong here?</p>\n\n<p>In other words: I am looking for a similar solution as it is used in the JSF  faces-config.xml described for example here: <a href=\"http://www.mkyong.com/jsf2/configure-managed-beans-in-jsf-2-0/\" rel=\"nofollow\">http://www.mkyong.com/jsf2/configure-managed-beans-in-jsf-2-0/</a></p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":18657561,"reputation":1,"user_id":13599591,"display_name":"k0rd"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676665121,"creation_date":1676665072,"answer_id":75488899,"question_id":73093116,"body_markdown":"I had this same problem when I tried to deploy my program to Glassfish. You need to specify a location on the file system like ```~``` and place your .env file there.\r\n\r\nHere is an example on how to do this:\r\n```java\r\nDotenv env = Dotenv.configure().directory(System.getProperty(&quot;user.home&quot;)).load();\r\n```\r\n\r\nDotenv should now be able to find the file if you&#39;ve placed it at ~/.env.","title":"How do I build my maven project that includes my environment variables","body":"<p>I had this same problem when I tried to deploy my program to Glassfish. You need to specify a location on the file system like <code>~</code> and place your .env file there.</p>\n<p>Here is an example on how to do this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Dotenv env = Dotenv.configure().directory(System.getProperty(&quot;user.home&quot;)).load();\n</code></pre>\n<p>Dotenv should now be able to find the file if you've placed it at ~/.env.</p>\n"}],"owner":{"account_id":25878822,"reputation":1,"user_id":19608301,"display_name":"ArcaliteGames"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":363,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676668373,"creation_date":1658599583,"question_id":73093116,"body_markdown":"please I need help. I&#39;m trying to package my maven build and also include environment variables but my program cannot find the .env file. How can I resolve this issue? I have been using eclipse, but I don&#39;t know where I can configure the path to the .env file. I used io.github.cdimascio to read environment variables. The program works fine on my IDE. The trouble starts when I run the program outside the IDE. What should I do?\r\n\r\n    Exception in thread &quot;Thread-1&quot; Exception in thread &quot;Thread-0&quot; java.lang.ExceptionInInitializerError\r\n            at com.arcalitegames.Main$2.run(Main.java:29)\r\n            at java.lang.Thread.run(Unknown Source)\r\n    Caused by: io.github.cdimascio.dotenv.DotEnvException: Could not find ./.env on the classpath\r\n            at io.github.cdimascio.dotenv.internal.ClasspathHelper.loadFileFromClasspath(ClassPathHelper.kt:37)\r\n            at io.github.cdimascio.dotenv.internal.DotenvReader.read(DotenvReader.kt:36)\r\n            at io.github.cdimascio.dotenv.internal.DotenvParser.parse(DotenvParser.kt:26)\r\n            at io.github.cdimascio.dotenv.DotenvBuilder.load(Dotenv.kt:119)\r\n            at com.arcalitegames.connector.Devs.getDotenv(Devs.java:10)\r\n            at com.arcalitegames.connector.Connector.&lt;clinit&gt;(Connector.java:14)\r\n            ... 2 more","title":"How do I build my maven project that includes my environment variables","body":"<p>please I need help. I'm trying to package my maven build and also include environment variables but my program cannot find the .env file. How can I resolve this issue? I have been using eclipse, but I don't know where I can configure the path to the .env file. I used io.github.cdimascio to read environment variables. The program works fine on my IDE. The trouble starts when I run the program outside the IDE. What should I do?</p>\n<pre><code>Exception in thread &quot;Thread-1&quot; Exception in thread &quot;Thread-0&quot; java.lang.ExceptionInInitializerError\n        at com.arcalitegames.Main$2.run(Main.java:29)\n        at java.lang.Thread.run(Unknown Source)\nCaused by: io.github.cdimascio.dotenv.DotEnvException: Could not find ./.env on the classpath\n        at io.github.cdimascio.dotenv.internal.ClasspathHelper.loadFileFromClasspath(ClassPathHelper.kt:37)\n        at io.github.cdimascio.dotenv.internal.DotenvReader.read(DotenvReader.kt:36)\n        at io.github.cdimascio.dotenv.internal.DotenvParser.parse(DotenvParser.kt:26)\n        at io.github.cdimascio.dotenv.DotenvBuilder.load(Dotenv.kt:119)\n        at com.arcalitegames.connector.Devs.getDotenv(Devs.java:10)\n        at com.arcalitegames.connector.Connector.&lt;clinit&gt;(Connector.java:14)\n        ... 2 more\n</code></pre>\n"},{"tags":["java","spring","spring-boot","generics"],"comments":[{"owner":{"account_id":4561654,"reputation":3050,"user_id":3703819,"display_name":"dey"},"score":0,"creation_date":1676671867,"post_id":75489250,"comment_id":133191697,"body_markdown":"did you tried to generify the `MovieService.get()` method? `public &lt;A extends Genre&gt;  MovieData get( GenreType type, A genre)`. Hmm... but there might be still the problem with return type of `movieRegistry.get`","body":"did you tried to generify the <code>MovieService.get()</code> method? <code>public &lt;A extends Genre&gt;  MovieData get( GenreType type, A genre)</code>. Hmm... but there might be still the problem with return type of <code>movieRegistry.get</code>"},{"owner":{"account_id":27794495,"reputation":31,"user_id":21226282,"display_name":"TheSQLGoat"},"score":0,"creation_date":1676715228,"post_id":75489250,"comment_id":133196068,"body_markdown":"Yes, makes no difference.","body":"Yes, makes no difference."}],"owner":{"account_id":27794495,"reputation":31,"user_id":21226282,"display_name":"TheSQLGoat"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676668285,"creation_date":1676668285,"question_id":75489250,"body_markdown":"I&#39;m trying to create a service similiar to this example that fetches data. Since the `GenreType` can be anything I created a `Registry` that maps each `GenreType` to a specific class. \r\n\r\nIgnore the obvious flaw on this example of not being possible to have movies with the same type and the naming not being the most correct but it&#39;s just a example to show my problem.\r\n\r\nThen I&#39;m levaring `Spring` to fill this registry but the issues comes when I call the method `getData()`. It&#39;s expecting `A extends Genre` and I&#39;m passing a `Genre` so it fails to compile.\r\n\r\n\r\nIs there a better approach to this?\r\n\r\nThanks\r\n\r\n\r\n```\r\npubic enum GenreType \r\n{\r\n    ACTION,\r\n    COMEDY\r\n}\r\n\r\npublic interface Genre \r\n{\r\n}\r\n\r\npublic class ActionMovie implements Genre\r\n{\r\n}\r\n\r\npublic class ComedyMovie implements Genre\r\n{\r\n}\r\n\r\npublic interface Movie&lt;A extends Genre&gt;\r\n{\r\n    MovieData getData( A genre );\r\n\r\n    GenreType getType();\r\n}\r\n\r\n@Service\r\npublic class Borat implements Movie&lt;ComedyMovie&gt;\r\n{\r\n    public MovieData getData( ComedyMovie genre )\r\n    {\r\n         //...\r\n    }\r\n\r\n\r\n    @Override\r\n    public GenreType getType() \r\n    {\r\n        return GenreType.COMEDY;\r\n    }\r\n}\r\n\r\n@Service\r\npublic class MovieRegistry\r\n{\r\n    private final Map&lt;GenreType, Movie&lt;?&gt;&gt; movies = new EnumMap&lt;&gt;( GenreType.class );\r\n\r\n    public MovieRegistry( List&lt;Movie&lt;?&gt;&gt; movies )\r\n    {\r\n        movies .forEach( movie -&gt; this.movies.putIfAbsent( movie.getType(), movie ) );\r\n    }\r\n\r\n    public Movie&lt;?&gt; get( GenreType genreType )\r\n    {\r\n        return movies.get( genreType );\r\n    }\r\n}\r\n\r\n@Service\r\n@RequiredArgsConstructor\r\npublic class MovieService\r\n{\r\n    private final MovieRegistry movieRegistry;\r\n\r\n    public MovieData get( GenreType type, Genre genre)\r\n    {\r\n         Movie&lt;?&gt; movie = movieRegistry.get(type);\r\n         return movie.getData( genre ); //Problem here\r\n    }\r\n}\r\n```","title":"Java - Spring - Call method with generic parameter","body":"<p>I'm trying to create a service similiar to this example that fetches data. Since the <code>GenreType</code> can be anything I created a <code>Registry</code> that maps each <code>GenreType</code> to a specific class.</p>\n<p>Ignore the obvious flaw on this example of not being possible to have movies with the same type and the naming not being the most correct but it's just a example to show my problem.</p>\n<p>Then I'm levaring <code>Spring</code> to fill this registry but the issues comes when I call the method <code>getData()</code>. It's expecting <code>A extends Genre</code> and I'm passing a <code>Genre</code> so it fails to compile.</p>\n<p>Is there a better approach to this?</p>\n<p>Thanks</p>\n<pre><code>pubic enum GenreType \n{\n    ACTION,\n    COMEDY\n}\n\npublic interface Genre \n{\n}\n\npublic class ActionMovie implements Genre\n{\n}\n\npublic class ComedyMovie implements Genre\n{\n}\n\npublic interface Movie&lt;A extends Genre&gt;\n{\n    MovieData getData( A genre );\n\n    GenreType getType();\n}\n\n@Service\npublic class Borat implements Movie&lt;ComedyMovie&gt;\n{\n    public MovieData getData( ComedyMovie genre )\n    {\n         //...\n    }\n\n\n    @Override\n    public GenreType getType() \n    {\n        return GenreType.COMEDY;\n    }\n}\n\n@Service\npublic class MovieRegistry\n{\n    private final Map&lt;GenreType, Movie&lt;?&gt;&gt; movies = new EnumMap&lt;&gt;( GenreType.class );\n\n    public MovieRegistry( List&lt;Movie&lt;?&gt;&gt; movies )\n    {\n        movies .forEach( movie -&gt; this.movies.putIfAbsent( movie.getType(), movie ) );\n    }\n\n    public Movie&lt;?&gt; get( GenreType genreType )\n    {\n        return movies.get( genreType );\n    }\n}\n\n@Service\n@RequiredArgsConstructor\npublic class MovieService\n{\n    private final MovieRegistry movieRegistry;\n\n    public MovieData get( GenreType type, Genre genre)\n    {\n         Movie&lt;?&gt; movie = movieRegistry.get(type);\n         return movie.getData( genre ); //Problem here\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","freemarker"],"comments":[{"owner":{"account_id":24400,"reputation":2982,"user_id":62032,"accept_rate":93,"display_name":"tinkertime"},"score":0,"creation_date":1259179790,"post_id":1799614,"comment_id":1687514,"body_markdown":"how are you setting the &#39;configuration&#39; object?","body":"how are you setting the &#39;configuration&#39; object?"},{"owner":{"account_id":566059,"reputation":165,"user_id":201213,"display_name":"brock"},"score":0,"creation_date":1259197415,"post_id":1799614,"comment_id":1689054,"body_markdown":"I&#39;m getting the configuration object from Spring.There is a getConfiguration method from the FreeMarkerConfigurer","body":"I&#39;m getting the configuration object from Spring.There is a getConfiguration method from the FreeMarkerConfigurer"}],"answers":[{"tags":[],"owner":{"account_id":44712,"reputation":99786,"user_id":131368,"accept_rate":78,"display_name":"ChssPly76"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1259186109,"creation_date":1259186109,"answer_id":1800222,"question_id":1799614,"body_markdown":"First of all, `/WEB-INF/freemarker` would only work as a path from within `WebApplicationContext`; otherwise Spring would attempt to resolve it as file system path rather than servlet context path. Is the excerpt you&#39;ve posted above from the context being loaded by `DispatcherServlet`?\r\n\r\nSecondly, is there any reason why are you using `configuration` directly instead of using Spring&#39;s `ViewResolver`?\r\n\r\nFinally, `IOException` can mean many different things. Can you post a full stack trace?","title":"Freemarker template not found","body":"<p>First of all, <code>/WEB-INF/freemarker</code> would only work as a path from within <code>WebApplicationContext</code>; otherwise Spring would attempt to resolve it as file system path rather than servlet context path. Is the excerpt you've posted above from the context being loaded by <code>DispatcherServlet</code>?</p>\n\n<p>Secondly, is there any reason why are you using <code>configuration</code> directly instead of using Spring's <code>ViewResolver</code>?</p>\n\n<p>Finally, <code>IOException</code> can mean many different things. Can you post a full stack trace?</p>\n"},{"tags":[],"owner":{"account_id":610881,"reputation":41,"user_id":336097,"display_name":"Luismy"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1345455334,"creation_date":1273311985,"answer_id":2793579,"question_id":1799614,"body_markdown":"I&#39;ve just had the same kind of problem and, at the end, I decide to use the approach below:\r\n\r\n    Configuration configuration = new Configuration();\r\n    FileTemplateLoader templateLoader = new FileTemplateLoader(new File(YOUR_BASE_TEMPLATE_DIR));\r\n    configuration.setTemplateLoader(templateLoader);\r\n    freemarker.template.Template template = configuration.getTemplate(YOUR_TEMPLATE_NAME);\r\n    template.process(datamodel, writer);","title":"Freemarker template not found","body":"<p>I've just had the same kind of problem and, at the end, I decide to use the approach below:</p>\n\n<pre><code>Configuration configuration = new Configuration();\nFileTemplateLoader templateLoader = new FileTemplateLoader(new File(YOUR_BASE_TEMPLATE_DIR));\nconfiguration.setTemplateLoader(templateLoader);\nfreemarker.template.Template template = configuration.getTemplate(YOUR_TEMPLATE_NAME);\ntemplate.process(datamodel, writer);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1765349,"reputation":1,"user_id":1611342,"display_name":"Sunset Fun"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1348991374,"creation_date":1345454108,"answer_id":12035007,"question_id":1799614,"body_markdown":"I think you must make sure that the file &quot;testTemplate.ftl&quot; is in the folder &quot;/WEB-INF/freemarker/&quot;\r\n","title":"Freemarker template not found","body":"<p>I think you must make sure that the file \"testTemplate.ftl\" is in the folder \"/WEB-INF/freemarker/\"</p>\n"},{"tags":[],"owner":{"account_id":941858,"reputation":2136,"user_id":969812,"accept_rate":90,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1552046297,"creation_date":1552046297,"answer_id":55062794,"question_id":1799614,"body_markdown":"you can also set it like \r\n\r\n```\r\n    @Bean\r\n    public FreeMarkerConfigurationFactoryBean freemarkerConfiguration() {\r\n        FreeMarkerConfigurationFactoryBean bean = new FreeMarkerConfigurationFactoryBean();\r\n        bean.setTemplateLoaderPath(&quot;classpath:/templates/&quot;);\r\n        return bean;\r\n    }\r\n```\r\n\r\nIn your case: \r\n```\r\n    &lt;property name=&quot;templateLoaderPath&quot; value=&quot;classpath:/WEB-INF/freemarker/&quot;/&gt;\r\n```","title":"Freemarker template not found","body":"<p>you can also set it like </p>\n\n<pre><code>    @Bean\n    public FreeMarkerConfigurationFactoryBean freemarkerConfiguration() {\n        FreeMarkerConfigurationFactoryBean bean = new FreeMarkerConfigurationFactoryBean();\n        bean.setTemplateLoaderPath(\"classpath:/templates/\");\n        return bean;\n    }\n</code></pre>\n\n<p>In your case: </p>\n\n<pre><code>    &lt;property name=\"templateLoaderPath\" value=\"classpath:/WEB-INF/freemarker/\"/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3737292,"reputation":1907,"user_id":3107952,"display_name":"Pedro Madrid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676668108,"creation_date":1676668108,"answer_id":75489230,"question_id":1799614,"body_markdown":"This worked for me:\r\n\r\n    configuration.setClassLoaderForTemplateLoading(this.getClass().getClassLoader(), &quot;/templates&quot;);","title":"Freemarker template not found","body":"<p>This worked for me:</p>\n<pre><code>configuration.setClassLoaderForTemplateLoading(this.getClass().getClassLoader(), &quot;/templates&quot;);\n</code></pre>\n"}],"owner":{"account_id":566059,"reputation":165,"user_id":201213,"display_name":"brock"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20796,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":1800222,"answer_count":5,"score":4,"last_activity_date":1676668108,"creation_date":1259179453,"question_id":1799614,"body_markdown":"I&#39;m currently trying to get Freemarker to work with my application using Spring.  No matter what I try I keep getting template not found.  I am not sure if I have the configuration set up properly, but it never finds my template.  Here is my spring bean config:\r\n\r\n\t&lt;bean id=&quot;freemarkerConfig&quot; class=&quot;org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer&quot;&gt;\r\n  \t\t&lt;property name=&quot;templateLoaderPath&quot; value=&quot;/WEB-INF/freemarker/&quot;/&gt;\r\n\t&lt;/bean&gt;\r\n\r\nWhenever I try to call getTemplate on the freemaker configuration it always sends back a template not found error.  So if I do \r\n\r\n    configuration.getTemplate(&quot;testTemplate.ftl&quot;) \r\n\r\nit always throws an IOException.  \r\n\r\nI&#39;m not sure if anyone has an idea of what I&#39;m doing wrong.\r\n\r\nThanks for all your help!","title":"Freemarker template not found","body":"<p>I'm currently trying to get Freemarker to work with my application using Spring.  No matter what I try I keep getting template not found.  I am not sure if I have the configuration set up properly, but it never finds my template.  Here is my spring bean config:</p>\n\n<pre><code>&lt;bean id=\"freemarkerConfig\" class=\"org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer\"&gt;\n    &lt;property name=\"templateLoaderPath\" value=\"/WEB-INF/freemarker/\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Whenever I try to call getTemplate on the freemaker configuration it always sends back a template not found error.  So if I do </p>\n\n<pre><code>configuration.getTemplate(\"testTemplate.ftl\") \n</code></pre>\n\n<p>it always throws an IOException.  </p>\n\n<p>I'm not sure if anyone has an idea of what I'm doing wrong.</p>\n\n<p>Thanks for all your help!</p>\n"},{"tags":["java","gluon-mobile"],"comments":[{"owner":{"account_id":4910667,"reputation":44671,"user_id":3956070,"display_name":"Jos&#233; Pereda"},"score":0,"creation_date":1676662814,"post_id":75488291,"comment_id":133189754,"body_markdown":"Maybe you can try AudioService and moving the [volume handler](https://github.com/gluonhq/attach/blob/master/modules/video/src/main/native/android/dalvik/DalvikVideoService.java#L725) in VideoService to the [MainActivity](https://github.com/gluonhq/substrate/blob/master/src/main/resources/native/android/android_project/app/src/main/java/com/gluonhq/helloandroid/MainActivity.java#L466)? You can give it a try (manually packing the apk after modifying it, as explained [here](https://stackoverflow.com/a/68685263/3956070)).","body":"Maybe you can try AudioService and moving the <a href=\"https://github.com/gluonhq/attach/blob/master/modules/video/src/main/native/android/dalvik/DalvikVideoService.java#L725\" rel=\"nofollow noreferrer\">volume handler</a> in VideoService to the <a href=\"https://github.com/gluonhq/substrate/blob/master/src/main/resources/native/android/android_project/app/src/main/java/com/gluonhq/helloandroid/MainActivity.java#L466\" rel=\"nofollow noreferrer\">MainActivity</a>? You can give it a try (manually packing the apk after modifying it, as explained <a href=\"https://stackoverflow.com/a/68685263/3956070\">here</a>)."},{"owner":{"account_id":2016330,"reputation":13111,"user_id":1803551,"accept_rate":67,"display_name":"user1803551"},"score":0,"creation_date":1676667938,"post_id":75488291,"comment_id":133190943,"body_markdown":"@Jos&#233;Pereda At this point it&#39;s easier to add a custom volume controller to the [`volume`](https://docs.gluonhq.com/attach/javadoc/4.0.16/com.gluonhq.attach.audio/com/gluonhq/attach/audio/Audio.html#setVolume(double)) setting.","body":"@Jos&#233;Pereda At this point it&#39;s easier to add a custom volume controller to the <a href=\"https://docs.gluonhq.com/attach/javadoc/4.0.16/com.gluonhq.attach.audio/com/gluonhq/attach/audio/Audio.html#setVolume(double)\" rel=\"nofollow noreferrer\"><code>volume</code></a> setting."},{"owner":{"account_id":4910667,"reputation":44671,"user_id":3956070,"display_name":"Jos&#233; Pereda"},"score":0,"creation_date":1676668399,"post_id":75488291,"comment_id":133191026,"body_markdown":"Not really, since the keyEvents are dispatched by the TextureView (video) or the SurfaceView (mainActivity), while AudioService doesn&#39;t have access to any of those in order to override `dispatchKeyEvent`.","body":"Not really, since the keyEvents are dispatched by the TextureView (video) or the SurfaceView (mainActivity), while AudioService doesn&#39;t have access to any of those in order to override <code>dispatchKeyEvent</code>."},{"owner":{"account_id":2016330,"reputation":13111,"user_id":1803551,"accept_rate":67,"display_name":"user1803551"},"score":0,"creation_date":1676671360,"post_id":75488291,"comment_id":133191604,"body_markdown":"@Jos&#233;Pereda I mean a custom controller as an in-app one, like a slider, without using the volume buttons. It&#39;s not as convenient, but it&#39;s a fraction of the hassle.","body":"@Jos&#233;Pereda I mean a custom controller as an in-app one, like a slider, without using the volume buttons. It&#39;s not as convenient, but it&#39;s a fraction of the hassle."}],"owner":{"account_id":2016330,"reputation":13111,"user_id":1803551,"accept_rate":67,"display_name":"user1803551"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676667959,"creation_date":1676660194,"question_id":75488291,"body_markdown":"The class that uses the `VideoService`:\r\n\r\n\tprivate final class MobileNotifier {\r\n\r\n\t    private static final String SHORT_BEEP_PATH = &quot;/sounds/ShortBeep.wav&quot;;\r\n\t    private static final String LONG_BEEP_PATH = &quot;/sounds/LongBeep.wav&quot;;\r\n\r\n\t\tVideoService service;\r\n\r\n\t\tMobileNotifier() {\r\n\t\t\tthis.service = VideoService.create().get();\r\n\t\t\tservice.getPlaylist().add(SHORT_BEEP_PATH);\r\n\t\t}\r\n\r\n\t\tpublic void alert(Alert alert) {\r\n\t\t\tswitch (alert) {\r\n\t\t\t\tcase NONE -&gt; {\r\n\t\t\t\t\tSystem.out.println(&quot;NONE: stopping&quot;);\r\n\t\t\t\t\tservice.stop();\r\n\t\t\t\t\tSystem.out.println(&quot;NONE: stopped&quot;);\r\n\t\t\t\t}\r\n\t\t\t\tcase ORANGE -&gt; play(alert, SHORT_BEEP_PATH);\r\n\t\t\t\tcase RED -&gt; play(alert, LONG_BEEP_PATH);\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tprivate void play(Alert alert, String audioPath) {\r\n\t\t\tSystem.out.println(alert);\r\n\t\t\tif (!audioPath.equals(service.getPlaylist().get(0))) {\r\n\t\t\t\tif (service.statusProperty().get() != Status.PLAYING) {\r\n\t\t\t\t\tSystem.out.println(alert + &quot;: not being played - stopping&quot;);\r\n\t\t\t\t\tservice.stop();\r\n\t\t\t\t\tSystem.out.println(alert + &quot;: not being played - stopped&quot;);\r\n\t\t\t\t}\r\n\t\t\t\tSystem.out.println(alert + &quot;: setting&quot;);\r\n\t\t\t\tservice.getPlaylist().set(0, audioPath);\r\n\t\t\t\tSystem.out.println(alert + &quot;: set&quot;);\r\n\t\t\t}\r\n\t\t\tSystem.out.println(alert + &quot;: playing&quot;);\r\n\t\t\tservice.play();\r\n\t\t\tSystem.out.println(alert + &quot;: played&quot;);\r\n\t\t}\r\n\t}\r\n\r\nThe code switches between audio files to play based on the input it gets. `void alert(Alert alert)` is called about once per second. After a while, the app crashes on Android.\r\n\r\nOne time the crash produced this output with `adb logcat -v brief -v color GraalCompiled:V GraalActivity:V GraalGluon:V GluonAttach:V AndroidRuntime:E ActivityManager:W *:S`:\r\n```\r\nE/AndroidRuntime(29381): FATAL EXCEPTION: main\r\nE/AndroidRuntime(29381): Process: com.gps.demo, PID: 29381\r\nE/AndroidRuntime(29381): java.lang.NullPointerException: Attempt to invoke virtual method &#39;void android.media.MediaPlayer.setSurface(android.view.Surface)&#39; on a null object reference\r\nE/AndroidRuntime(29381):        at com.gluonhq.helloandroid.DalvikVideoService.onSurfaceTextureAvailable(DalvikVideoService.java:381)\r\nE/AndroidRuntime(29381):        at android.view.TextureView.getHardwareLayer(TextureView.java:390)\r\nE/AndroidRuntime(29381):        at android.view.TextureView.draw(TextureView.java:339)\r\nE/AndroidRuntime(29381):        at android.view.View.updateDisplayListIfDirty(View.java:19315)\r\nE/AndroidRuntime(29381):        at android.view.View.draw(View.java:20093)\r\nE/AndroidRuntime(29381):        at android.view.ViewGroup.drawChild(ViewGroup.java:4421)\r\nE/AndroidRuntime(29381):        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:4207)\r\nE/AndroidRuntime(29381):        at android.view.View.draw(View.java:20373)\r\nE/AndroidRuntime(29381):        at android.view.View.updateDisplayListIfDirty(View.java:19315)\r\nE/AndroidRuntime(29381):        at android.view.View.draw(View.java:20093)\r\nE/AndroidRuntime(29381):        at android.view.ViewGroup.drawChild(ViewGroup.java:4421)\r\nE/AndroidRuntime(29381):        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:4207)\r\nE/AndroidRuntime(29381):        at android.view.View.draw(View.java:20373)\r\nE/AndroidRuntime(29381):        at com.android.internal.policy.DecorView.draw(DecorView.java:980)\r\nE/AndroidRuntime(29381):        at android.view.View.updateDisplayListIfDirty(View.java:19315)\r\nE/AndroidRuntime(29381):        at android.view.ThreadedRenderer.updateViewTreeDisplayList(ThreadedRenderer.java:686)\r\nE/AndroidRuntime(29381):        at android.view.ThreadedRenderer.updateRootDisplayList(ThreadedRenderer.java:692)\r\nE/AndroidRuntime(29381):        at android.view.ThreadedRenderer.draw(ThreadedRenderer.java:800)\r\nE/AndroidRuntime(29381):        at android.view.ViewRootImpl.draw(ViewRootImpl.java:3496)\r\nE/AndroidRuntime(29381):        at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:3283)\r\nE/AndroidRuntime(29381):        at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:2818)\r\nE/AndroidRuntime(29381):        at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1780)\r\nE/AndroidRuntime(29381):        at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:7827)\r\nE/AndroidRuntime(29381):        at android.view.Choreographer$CallbackRecord.run(Choreographer.java:911)\r\nE/AndroidRuntime(29381):        at android.view.Choreographer.doCallbacks(Choreographer.java:723)\r\nE/AndroidRuntime(29381):        at android.view.Choreographer.doFrame(Choreographer.java:658)\r\nE/AndroidRuntime(29381):        at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:897)\r\nE/AndroidRuntime(29381):        at android.os.Handler.handleCallback(Handler.java:789)\r\nE/AndroidRuntime(29381):        at android.os.Handler.dispatchMessage(Handler.java:98)\r\nE/AndroidRuntime(29381):        at android.os.Looper.loop(Looper.java:164)\r\nE/AndroidRuntime(29381):        at android.app.ActivityThread.main(ActivityThread.java:6944)\r\nE/AndroidRuntime(29381):        at java.lang.reflect.Method.invoke(Native Method)\r\nE/AndroidRuntime(29381):        at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:327)\r\nE/AndroidRuntime(29381):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1374)\r\nW/ActivityManager( 1525): crash : com.gps.demo,0\r\nW/ActivityManager( 1525):   Force finishing activity com.gps.demo/com.gluonhq.helloandroid.MainActivity\r\n```\r\n\r\nWhen trying to look deeper with `adb logcat -v color` a couple of times, I got the crash detailed here: https://pastebin.com/2dLmHaQX (the log is too long to post here).\r\n\r\nIt seems that at some point the video service enters an illegal state. I did not get a crash when using `AudioService`, but that service does not allow changing the volume with the volume keys.\r\n\r\nUsing\r\n```\r\n\t\t&lt;gluonfx-maven-plugin-version&gt;1.0.15&lt;/gluonfx-maven-plugin-version&gt;\r\n\t\t&lt;java-version&gt;17&lt;/java-version&gt;\r\n\t\t&lt;javafx-version&gt;19&lt;/javafx-version&gt;\r\n\t\t&lt;charm-version&gt;6.2.2&lt;/charm-version&gt;\r\n\t\t&lt;attach-version&gt;4.0.15&lt;/attach-version&gt;\r\n```\r\nWith `javafxStaticSdkVersion` 19 and using graalvm-svm-java17-linux-gluon-22.1.0.1-Final.\r\nRunning on Android 8 through 12.","title":"Crash with Gluon Attach Video Service","body":"<p>The class that uses the <code>VideoService</code>:</p>\n<pre><code>private final class MobileNotifier {\n\n    private static final String SHORT_BEEP_PATH = &quot;/sounds/ShortBeep.wav&quot;;\n    private static final String LONG_BEEP_PATH = &quot;/sounds/LongBeep.wav&quot;;\n\n    VideoService service;\n\n    MobileNotifier() {\n        this.service = VideoService.create().get();\n        service.getPlaylist().add(SHORT_BEEP_PATH);\n    }\n\n    public void alert(Alert alert) {\n        switch (alert) {\n            case NONE -&gt; {\n                System.out.println(&quot;NONE: stopping&quot;);\n                service.stop();\n                System.out.println(&quot;NONE: stopped&quot;);\n            }\n            case ORANGE -&gt; play(alert, SHORT_BEEP_PATH);\n            case RED -&gt; play(alert, LONG_BEEP_PATH);\n        };\n    }\n\n    private void play(Alert alert, String audioPath) {\n        System.out.println(alert);\n        if (!audioPath.equals(service.getPlaylist().get(0))) {\n            if (service.statusProperty().get() != Status.PLAYING) {\n                System.out.println(alert + &quot;: not being played - stopping&quot;);\n                service.stop();\n                System.out.println(alert + &quot;: not being played - stopped&quot;);\n            }\n            System.out.println(alert + &quot;: setting&quot;);\n            service.getPlaylist().set(0, audioPath);\n            System.out.println(alert + &quot;: set&quot;);\n        }\n        System.out.println(alert + &quot;: playing&quot;);\n        service.play();\n        System.out.println(alert + &quot;: played&quot;);\n    }\n}\n</code></pre>\n<p>The code switches between audio files to play based on the input it gets. <code>void alert(Alert alert)</code> is called about once per second. After a while, the app crashes on Android.</p>\n<p>One time the crash produced this output with <code>adb logcat -v brief -v color GraalCompiled:V GraalActivity:V GraalGluon:V GluonAttach:V AndroidRuntime:E ActivityManager:W *:S</code>:</p>\n<pre><code>E/AndroidRuntime(29381): FATAL EXCEPTION: main\nE/AndroidRuntime(29381): Process: com.gps.demo, PID: 29381\nE/AndroidRuntime(29381): java.lang.NullPointerException: Attempt to invoke virtual method 'void android.media.MediaPlayer.setSurface(android.view.Surface)' on a null object reference\nE/AndroidRuntime(29381):        at com.gluonhq.helloandroid.DalvikVideoService.onSurfaceTextureAvailable(DalvikVideoService.java:381)\nE/AndroidRuntime(29381):        at android.view.TextureView.getHardwareLayer(TextureView.java:390)\nE/AndroidRuntime(29381):        at android.view.TextureView.draw(TextureView.java:339)\nE/AndroidRuntime(29381):        at android.view.View.updateDisplayListIfDirty(View.java:19315)\nE/AndroidRuntime(29381):        at android.view.View.draw(View.java:20093)\nE/AndroidRuntime(29381):        at android.view.ViewGroup.drawChild(ViewGroup.java:4421)\nE/AndroidRuntime(29381):        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:4207)\nE/AndroidRuntime(29381):        at android.view.View.draw(View.java:20373)\nE/AndroidRuntime(29381):        at android.view.View.updateDisplayListIfDirty(View.java:19315)\nE/AndroidRuntime(29381):        at android.view.View.draw(View.java:20093)\nE/AndroidRuntime(29381):        at android.view.ViewGroup.drawChild(ViewGroup.java:4421)\nE/AndroidRuntime(29381):        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:4207)\nE/AndroidRuntime(29381):        at android.view.View.draw(View.java:20373)\nE/AndroidRuntime(29381):        at com.android.internal.policy.DecorView.draw(DecorView.java:980)\nE/AndroidRuntime(29381):        at android.view.View.updateDisplayListIfDirty(View.java:19315)\nE/AndroidRuntime(29381):        at android.view.ThreadedRenderer.updateViewTreeDisplayList(ThreadedRenderer.java:686)\nE/AndroidRuntime(29381):        at android.view.ThreadedRenderer.updateRootDisplayList(ThreadedRenderer.java:692)\nE/AndroidRuntime(29381):        at android.view.ThreadedRenderer.draw(ThreadedRenderer.java:800)\nE/AndroidRuntime(29381):        at android.view.ViewRootImpl.draw(ViewRootImpl.java:3496)\nE/AndroidRuntime(29381):        at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:3283)\nE/AndroidRuntime(29381):        at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:2818)\nE/AndroidRuntime(29381):        at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1780)\nE/AndroidRuntime(29381):        at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:7827)\nE/AndroidRuntime(29381):        at android.view.Choreographer$CallbackRecord.run(Choreographer.java:911)\nE/AndroidRuntime(29381):        at android.view.Choreographer.doCallbacks(Choreographer.java:723)\nE/AndroidRuntime(29381):        at android.view.Choreographer.doFrame(Choreographer.java:658)\nE/AndroidRuntime(29381):        at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:897)\nE/AndroidRuntime(29381):        at android.os.Handler.handleCallback(Handler.java:789)\nE/AndroidRuntime(29381):        at android.os.Handler.dispatchMessage(Handler.java:98)\nE/AndroidRuntime(29381):        at android.os.Looper.loop(Looper.java:164)\nE/AndroidRuntime(29381):        at android.app.ActivityThread.main(ActivityThread.java:6944)\nE/AndroidRuntime(29381):        at java.lang.reflect.Method.invoke(Native Method)\nE/AndroidRuntime(29381):        at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:327)\nE/AndroidRuntime(29381):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1374)\nW/ActivityManager( 1525): crash : com.gps.demo,0\nW/ActivityManager( 1525):   Force finishing activity com.gps.demo/com.gluonhq.helloandroid.MainActivity\n</code></pre>\n<p>When trying to look deeper with <code>adb logcat -v color</code> a couple of times, I got the crash detailed here: <a href=\"https://pastebin.com/2dLmHaQX\" rel=\"nofollow noreferrer\">https://pastebin.com/2dLmHaQX</a> (the log is too long to post here).</p>\n<p>It seems that at some point the video service enters an illegal state. I did not get a crash when using <code>AudioService</code>, but that service does not allow changing the volume with the volume keys.</p>\n<p>Using</p>\n<pre><code>        &lt;gluonfx-maven-plugin-version&gt;1.0.15&lt;/gluonfx-maven-plugin-version&gt;\n        &lt;java-version&gt;17&lt;/java-version&gt;\n        &lt;javafx-version&gt;19&lt;/javafx-version&gt;\n        &lt;charm-version&gt;6.2.2&lt;/charm-version&gt;\n        &lt;attach-version&gt;4.0.15&lt;/attach-version&gt;\n</code></pre>\n<p>With <code>javafxStaticSdkVersion</code> 19 and using graalvm-svm-java17-linux-gluon-22.1.0.1-Final.\nRunning on Android 8 through 12.</p>\n"},{"tags":["java","android","xml","android-layout","android-constraintlayout"],"comments":[{"owner":{"account_id":20029443,"reputation":297,"user_id":14682570,"display_name":"Dev007"},"score":0,"creation_date":1675925506,"post_id":75394974,"comment_id":133033365,"body_markdown":"Hi, you need to add AdView as a last item right? For example if you have 20 items in list and the 21st item is adview? If yea, you can do with list or recycler adapter add the last item as null or empty value and you have to add all ads related logic in adapter class.","body":"Hi, you need to add AdView as a last item right? For example if you have 20 items in list and the 21st item is adview? If yea, you can do with list or recycler adapter add the last item as null or empty value and you have to add all ads related logic in adapter class."},{"owner":{"account_id":4526516,"reputation":208,"user_id":4013399,"accept_rate":39,"display_name":"Zac1"},"score":0,"creation_date":1675925853,"post_id":75394974,"comment_id":133033446,"body_markdown":"Thanks, but I don&#39;t want that. I actually want the adView in the container activity (activity_results, which contains that listView) - so one adView per page regardless of whether the listView has items or not.","body":"Thanks, but I don&#39;t want that. I actually want the adView in the container activity (activity_results, which contains that listView) - so one adView per page regardless of whether the listView has items or not."},{"owner":{"account_id":20029443,"reputation":297,"user_id":14682570,"display_name":"Dev007"},"score":0,"creation_date":1675939237,"post_id":75394974,"comment_id":133037187,"body_markdown":"In that case, the adview won’t show after the last time. It will show once the activity open…. You can your linear layout or constraint layout.","body":"In that case, the adview won’t show after the last time. It will show once the activity open…. You can your linear layout or constraint layout."},{"owner":{"account_id":26359116,"reputation":585,"user_id":20015640,"display_name":"Urvish Shiroya"},"score":0,"creation_date":1676299653,"post_id":75394974,"comment_id":133104054,"body_markdown":"Is your &quot;adView&quot; covered by &quot;listView&quot;?","body":"Is your &quot;adView&quot; covered by &quot;listView&quot;?"},{"owner":{"account_id":4526516,"reputation":208,"user_id":4013399,"accept_rate":39,"display_name":"Zac1"},"score":0,"creation_date":1676343628,"post_id":75394974,"comment_id":133113997,"body_markdown":"@UrvishShiroya I&#39;d say the adView is on top of the last item of the listView.","body":"@UrvishShiroya I&#39;d say the adView is on top of the last item of the listView."}],"answers":[{"tags":[],"owner":{"account_id":16418059,"reputation":84,"user_id":12038445,"display_name":"Claudio Galv&#227;o"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1676328082,"creation_date":1676328082,"answer_id":75441864,"question_id":75394974,"body_markdown":"I have two pieces of advice for you:\r\n\r\n 1. **Avoid using ListView** (unless you have a fixed amount and few items). Prefer RecyclerView which is so much more performative. Basically, if you have so many items, with RecyclerView, just a certain amount of items will have the layout rendered. With ListView, even the hundredth item will have the layout rendered (even if you can see just the first four items on your screen at a certain moment).\r\n\r\n 2. **Take care about using several nested view groups**. It impacts the performance to render the layout on the device. In general, just a root ConstraintLayout solves all the problems you can face to align the elements.\r\nFor the first layout, because the AppBarLayout needs the CoordinatorLayout to work properly, you can keep the CoordinatorLayout as root and use ConstraintLayout after the AppBarLayout. For the second layout, the same thing. Here is an example:\r\n```\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    android:padding=&quot;10dp&quot;&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/abc&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        android:paddingBottom=&quot;10dp&quot;\r\n        android:textColor=&quot;@color/design_default_color_primary&quot;\r\n        android:textSize=&quot;14sp&quot;\r\n        android:textStyle=&quot;bold&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/def&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@id/abc&quot;\r\n        android:textColor=&quot;@color/design_default_color_primary&quot;\r\n        android:textSize=&quot;14sp&quot;\r\n        android:textStyle=&quot;bold&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/ghi&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@id/def&quot;\r\n        android:text=&quot;&quot;\r\n        android:textColor=&quot;@color/design_default_color_primary&quot;\r\n        android:textSize=&quot;14sp&quot;\r\n        android:textStyle=&quot;bold&quot; /&gt;\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\nAbout your problem with the AdView position, try something like this:\r\n```\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;fill_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    android:padding=&quot;10dp&quot;&gt;\r\n\r\n    &lt;androidx.recyclerview.widget.RecyclerView\r\n        android:id=&quot;@+id/recyclerview&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        tools:itemCount=&quot;@integer/material_motion_duration_long_2&quot;\r\n        tools:layout_editor_absoluteX=&quot;3dp&quot; /&gt;\r\n\r\n    &lt;com.google.android.gms.ads.AdView\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@+id/recyclerview&quot;/&gt;\r\n\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\nLet me know if it worked. If you need some more help, contact me.","title":"How to ensure that the Android adView is always displayed after the bottom of the last item in my Android listView?","body":"<p>I have two pieces of advice for you:</p>\n<ol>\n<li><p><strong>Avoid using ListView</strong> (unless you have a fixed amount and few items). Prefer RecyclerView which is so much more performative. Basically, if you have so many items, with RecyclerView, just a certain amount of items will have the layout rendered. With ListView, even the hundredth item will have the layout rendered (even if you can see just the first four items on your screen at a certain moment).</p>\n</li>\n<li><p><strong>Take care about using several nested view groups</strong>. It impacts the performance to render the layout on the device. In general, just a root ConstraintLayout solves all the problems you can face to align the elements.\nFor the first layout, because the AppBarLayout needs the CoordinatorLayout to work properly, you can keep the CoordinatorLayout as root and use ConstraintLayout after the AppBarLayout. For the second layout, the same thing. Here is an example:</p>\n</li>\n</ol>\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:padding=&quot;10dp&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/abc&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        android:paddingBottom=&quot;10dp&quot;\n        android:textColor=&quot;@color/design_default_color_primary&quot;\n        android:textSize=&quot;14sp&quot;\n        android:textStyle=&quot;bold&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/def&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@id/abc&quot;\n        android:textColor=&quot;@color/design_default_color_primary&quot;\n        android:textSize=&quot;14sp&quot;\n        android:textStyle=&quot;bold&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/ghi&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@id/def&quot;\n        android:text=&quot;&quot;\n        android:textColor=&quot;@color/design_default_color_primary&quot;\n        android:textSize=&quot;14sp&quot;\n        android:textStyle=&quot;bold&quot; /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>About your problem with the AdView position, try something like this:</p>\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;fill_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:orientation=&quot;vertical&quot;\n    android:padding=&quot;10dp&quot;&gt;\n\n    &lt;androidx.recyclerview.widget.RecyclerView\n        android:id=&quot;@+id/recyclerview&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        tools:itemCount=&quot;@integer/material_motion_duration_long_2&quot;\n        tools:layout_editor_absoluteX=&quot;3dp&quot; /&gt;\n\n    &lt;com.google.android.gms.ads.AdView\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/recyclerview&quot;/&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>Let me know if it worked. If you need some more help, contact me.</p>\n"},{"tags":[],"owner":{"account_id":21390158,"reputation":801,"user_id":15754377,"display_name":"Vivek Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676570089,"creation_date":1676570089,"answer_id":75476191,"question_id":75394974,"body_markdown":"How about wrapping up co-ordinator view group with constraintLayout and putting adview outside of this co-ordinator viewgroup and constrain adview to bottom to the activity layout so that ad view is independent of list view&#39;s data. \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;com.test.test.ResultsActivity&quot;&gt;\r\n    \r\n        &lt;androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n            xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n            xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            app:layout_constraintBottom_toTopOf=&quot;@+id/adView&quot;\r\n            android:layout_height=&quot;wrap_content&quot;&gt;\r\n    \r\n            &lt;com.google.android.material.appbar.AppBarLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:theme=&quot;@style/AppTheme.AppBarOverlay&quot;&gt;\r\n    \r\n                &lt;androidx.appcompat.widget.Toolbar\r\n                    android:id=&quot;@+id/toolbar&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;?attr/actionBarSize&quot;\r\n                    android:background=&quot;?attr/colorPrimary&quot;\r\n                    app:popupTheme=&quot;@style/AppTheme.PopupOverlay&quot;\r\n                    app:titleTextAppearance=&quot;@style/ToolbarTitle&quot; /&gt;\r\n    \r\n                &lt;com.google.android.material.tabs.TabLayout\r\n                    android:id=&quot;@+id/tabs&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_centerHorizontal=&quot;true&quot;\r\n                    android:layout_gravity=&quot;center_horizontal&quot;\r\n                    app:tabMaxWidth=&quot;0dp&quot;&gt;\r\n    \r\n                    &lt;com.google.android.material.tabs.TabItem\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:text=&quot;@string/tab_text_1&quot; /&gt;\r\n    \r\n                    &lt;com.google.android.material.tabs.TabItem\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:text=&quot;@string/tab_text_2&quot; /&gt;\r\n                &lt;/com.google.android.material.tabs.TabLayout&gt;\r\n    \r\n            &lt;/com.google.android.material.appbar.AppBarLayout&gt;\r\n    \r\n            &lt;androidx.viewpager.widget.ViewPager\r\n                android:id=&quot;@+id/container&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot; /&gt;\r\n    \r\n            &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n                xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n                xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;\r\n                tools:context=&quot;com.test.test.ResultsActivity&quot;&gt;\r\n    \r\n                &lt;ListView\r\n                    android:id=&quot;@+id/listView&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    app:layout_constraintBottom_toTopOf=&quot;@+id/adView&quot;&gt;&lt;/ListView&gt;\r\n    \r\n                \r\n            &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n        &lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\r\n    &lt;com.google.android.gms.ads.AdView \r\n                    android:id=&quot;@+id/adView&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    ads:adSize=&quot;SMART_BANNER&quot;\r\n                    ads:adUnitId=&quot;@string/banner_ad_unit_id&quot;\r\n                    app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt;\r\n    &lt;/ConstraintLayout&gt;","title":"How to ensure that the Android adView is always displayed after the bottom of the last item in my Android listView?","body":"<p>How about wrapping up co-ordinator view group with constraintLayout and putting adview outside of this co-ordinator viewgroup and constrain adview to bottom to the activity layout so that ad view is independent of list view's data.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;com.test.test.ResultsActivity&quot;&gt;\n\n    &lt;androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n        android:layout_width=&quot;match_parent&quot;\n        app:layout_constraintBottom_toTopOf=&quot;@+id/adView&quot;\n        android:layout_height=&quot;wrap_content&quot;&gt;\n\n        &lt;com.google.android.material.appbar.AppBarLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:theme=&quot;@style/AppTheme.AppBarOverlay&quot;&gt;\n\n            &lt;androidx.appcompat.widget.Toolbar\n                android:id=&quot;@+id/toolbar&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;?attr/actionBarSize&quot;\n                android:background=&quot;?attr/colorPrimary&quot;\n                app:popupTheme=&quot;@style/AppTheme.PopupOverlay&quot;\n                app:titleTextAppearance=&quot;@style/ToolbarTitle&quot; /&gt;\n\n            &lt;com.google.android.material.tabs.TabLayout\n                android:id=&quot;@+id/tabs&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_centerHorizontal=&quot;true&quot;\n                android:layout_gravity=&quot;center_horizontal&quot;\n                app:tabMaxWidth=&quot;0dp&quot;&gt;\n\n                &lt;com.google.android.material.tabs.TabItem\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:text=&quot;@string/tab_text_1&quot; /&gt;\n\n                &lt;com.google.android.material.tabs.TabItem\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:text=&quot;@string/tab_text_2&quot; /&gt;\n            &lt;/com.google.android.material.tabs.TabLayout&gt;\n\n        &lt;/com.google.android.material.appbar.AppBarLayout&gt;\n\n        &lt;androidx.viewpager.widget.ViewPager\n            android:id=&quot;@+id/container&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot; /&gt;\n\n        &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n            xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n            xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;\n            tools:context=&quot;com.test.test.ResultsActivity&quot;&gt;\n\n            &lt;ListView\n                android:id=&quot;@+id/listView&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                app:layout_constraintBottom_toTopOf=&quot;@+id/adView&quot;&gt;&lt;/ListView&gt;\n\n            \n        &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n    &lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\n&lt;com.google.android.gms.ads.AdView \n                android:id=&quot;@+id/adView&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                ads:adSize=&quot;SMART_BANNER&quot;\n                ads:adUnitId=&quot;@string/banner_ad_unit_id&quot;\n                app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt;\n&lt;/ConstraintLayout&gt;\n</code></pre>\n"}],"owner":{"account_id":4526516,"reputation":208,"user_id":4013399,"accept_rate":39,"display_name":"Zac1"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1676667747,"creation_date":1675924068,"question_id":75394974,"body_markdown":"Here&#39;s the `activity_results` XML layout:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;com.test.test.ResultsActivity&quot;&gt;\r\n    \r\n        &lt;androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n            xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n            xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n            &lt;com.google.android.material.appbar.AppBarLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:theme=&quot;@style/AppTheme.AppBarOverlay&quot;&gt;\r\n    \r\n                &lt;androidx.appcompat.widget.Toolbar\r\n                    android:id=&quot;@+id/toolbar&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;?attr/actionBarSize&quot;\r\n                    android:background=&quot;?attr/colorPrimary&quot;\r\n                    app:popupTheme=&quot;@style/AppTheme.PopupOverlay&quot;\r\n                    app:titleTextAppearance=&quot;@style/ToolbarTitle&quot; /&gt;\r\n    \r\n                &lt;com.google.android.material.tabs.TabLayout\r\n                    android:id=&quot;@+id/tabs&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_centerHorizontal=&quot;true&quot;\r\n                    android:layout_gravity=&quot;center_horizontal&quot;\r\n                    app:tabMaxWidth=&quot;0dp&quot;&gt;\r\n    \r\n                    &lt;com.google.android.material.tabs.TabItem\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:text=&quot;@string/tab_text_1&quot; /&gt;\r\n    \r\n                    &lt;com.google.android.material.tabs.TabItem\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:text=&quot;@string/tab_text_2&quot; /&gt;\r\n                &lt;/com.google.android.material.tabs.TabLayout&gt;\r\n    \r\n            &lt;/com.google.android.material.appbar.AppBarLayout&gt;\r\n    \r\n            &lt;androidx.viewpager.widget.ViewPager\r\n                android:id=&quot;@+id/container&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot; /&gt;\r\n    \r\n            &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n                xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n                xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;\r\n                tools:context=&quot;com.test.test.ResultsActivity&quot;&gt;\r\n    \r\n                &lt;ListView\r\n                    android:id=&quot;@+id/listView&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    app:layout_constraintBottom_toTopOf=&quot;@+id/adView&quot;&gt;&lt;/ListView&gt;\r\n    \r\n                &lt;com.google.android.gms.ads.AdView xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n                    android:id=&quot;@+id/adView&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_alignParentBottom=&quot;true&quot;\r\n                    android:layout_gravity=&quot;center|bottom&quot;\r\n                    ads:adSize=&quot;SMART_BANNER&quot;\r\n                    ads:adUnitId=&quot;@string/banner_ad_unit_id&quot;\r\n                    app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt;\r\n            &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n        &lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\r\n    \r\n    &lt;/RelativeLayout&gt;\r\n\r\nAnd, here&#39;s the `content_results.xml` layout:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:layout_width=&quot;fill_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:padding=&quot;@dimen/activity_horizontal_margin&quot;&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/abc&quot;\r\n            android:layout_width=&quot;fill_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:paddingBottom=&quot;10dip&quot;\r\n            android:textColor=&quot;@color/colorAccent&quot;\r\n            android:textSize=&quot;14sp&quot;\r\n            android:textStyle=&quot;bold&quot; /&gt;\r\n    \r\n        &lt;RelativeLayout\r\n            android:layout_width=&quot;fill_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;&gt;\r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/def&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;&quot;\r\n                android:textColor=&quot;@color/colorPrimary&quot;\r\n                android:textSize=&quot;14sp&quot;\r\n                android:textStyle=&quot;bold&quot; /&gt;\r\n        &lt;/RelativeLayout&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/ghi&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;&quot;\r\n            android:textColor=&quot;@color/colorPrimary&quot;\r\n            android:textSize=&quot;14sp&quot;\r\n            android:textStyle=&quot;bold&quot; /&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\n\r\nI want to have the `adView` item at the bottom of the last element of the `listView`. Is this possible with the layouts I currently have? Because it looks like the `adView` in the `activity_results` has no relation to the list items in the `content_results` file?\r\n\r\nI&#39;ve also tried `app:layout_constraintBottom_toTopOf` attribute to position the `adView` below the `ListView`, but there seems to be no change.\r\n\r\nPlease let me know if you can catch any other basic errors in these layouts? ","title":"How to ensure that the Android adView is always displayed after the bottom of the last item in my Android listView?","body":"<p>Here's the <code>activity_results</code> XML layout:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;com.test.test.ResultsActivity&quot;&gt;\n\n    &lt;androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;&gt;\n\n        &lt;com.google.android.material.appbar.AppBarLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:theme=&quot;@style/AppTheme.AppBarOverlay&quot;&gt;\n\n            &lt;androidx.appcompat.widget.Toolbar\n                android:id=&quot;@+id/toolbar&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;?attr/actionBarSize&quot;\n                android:background=&quot;?attr/colorPrimary&quot;\n                app:popupTheme=&quot;@style/AppTheme.PopupOverlay&quot;\n                app:titleTextAppearance=&quot;@style/ToolbarTitle&quot; /&gt;\n\n            &lt;com.google.android.material.tabs.TabLayout\n                android:id=&quot;@+id/tabs&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_centerHorizontal=&quot;true&quot;\n                android:layout_gravity=&quot;center_horizontal&quot;\n                app:tabMaxWidth=&quot;0dp&quot;&gt;\n\n                &lt;com.google.android.material.tabs.TabItem\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:text=&quot;@string/tab_text_1&quot; /&gt;\n\n                &lt;com.google.android.material.tabs.TabItem\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:text=&quot;@string/tab_text_2&quot; /&gt;\n            &lt;/com.google.android.material.tabs.TabLayout&gt;\n\n        &lt;/com.google.android.material.appbar.AppBarLayout&gt;\n\n        &lt;androidx.viewpager.widget.ViewPager\n            android:id=&quot;@+id/container&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot; /&gt;\n\n        &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n            xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n            xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;\n            tools:context=&quot;com.test.test.ResultsActivity&quot;&gt;\n\n            &lt;ListView\n                android:id=&quot;@+id/listView&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                app:layout_constraintBottom_toTopOf=&quot;@+id/adView&quot;&gt;&lt;/ListView&gt;\n\n            &lt;com.google.android.gms.ads.AdView xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\n                android:id=&quot;@+id/adView&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_alignParentBottom=&quot;true&quot;\n                android:layout_gravity=&quot;center|bottom&quot;\n                ads:adSize=&quot;SMART_BANNER&quot;\n                ads:adUnitId=&quot;@string/banner_ad_unit_id&quot;\n                app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt;\n        &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n    &lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>And, here's the <code>content_results.xml</code> layout:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:layout_width=&quot;fill_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:orientation=&quot;vertical&quot;\n    android:padding=&quot;@dimen/activity_horizontal_margin&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/abc&quot;\n        android:layout_width=&quot;fill_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:paddingBottom=&quot;10dip&quot;\n        android:textColor=&quot;@color/colorAccent&quot;\n        android:textSize=&quot;14sp&quot;\n        android:textStyle=&quot;bold&quot; /&gt;\n\n    &lt;RelativeLayout\n        android:layout_width=&quot;fill_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/def&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;&quot;\n            android:textColor=&quot;@color/colorPrimary&quot;\n            android:textSize=&quot;14sp&quot;\n            android:textStyle=&quot;bold&quot; /&gt;\n    &lt;/RelativeLayout&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/ghi&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;&quot;\n        android:textColor=&quot;@color/colorPrimary&quot;\n        android:textSize=&quot;14sp&quot;\n        android:textStyle=&quot;bold&quot; /&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>I want to have the <code>adView</code> item at the bottom of the last element of the <code>listView</code>. Is this possible with the layouts I currently have? Because it looks like the <code>adView</code> in the <code>activity_results</code> has no relation to the list items in the <code>content_results</code> file?</p>\n<p>I've also tried <code>app:layout_constraintBottom_toTopOf</code> attribute to position the <code>adView</code> below the <code>ListView</code>, but there seems to be no change.</p>\n<p>Please let me know if you can catch any other basic errors in these layouts?</p>\n"},{"tags":["java","selenium-webdriver","action"],"comments":[{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1676666180,"post_id":75489020,"comment_id":133190573,"body_markdown":"I don&#39;t find the element with text as **Tickets** in the spashot. Additionally, please read why a [screenshot of HTML or code or error is a bad idea](https://meta.stackoverflow.com/questions/303812/discourage-screenshots-of-code-and-or-errors). You may like to consider updating the Question with formatted text based relevant HTML, code trials and error stack trace.","body":"I don&#39;t find the element with text as <b>Tickets</b> in the spashot. Additionally, please read why a <a href=\"https://meta.stackoverflow.com/questions/303812/discourage-screenshots-of-code-and-or-errors\">screenshot of HTML or code or error is a bad idea</a>. You may like to consider updating the Question with formatted text based relevant HTML, code trials and error stack trace."},{"owner":{"account_id":9014912,"reputation":398,"user_id":6718145,"accept_rate":33,"display_name":"RAHUL"},"score":0,"creation_date":1676666339,"post_id":75489020,"comment_id":133190603,"body_markdown":"added the html for &quot;tickets&quot;","body":"added the html for &quot;tickets&quot;"}],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676667580,"creation_date":1676667050,"answer_id":75489141,"question_id":75489020,"body_markdown":"To [_**Mouse Hover**_](https://stackoverflow.com/a/47261894/7429447) over the element with text as _**Tickets**_ and then to click on the element with text as _**Statuses**_ you can use the following [_locator strategies_](https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver):\r\n\r\n\tWebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(5));\r\n\tWebElement tickets = wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;//span[@title=&#39;Tickets&#39;]&quot;)));\r\n\tActions actions = new Actions(driver);\r\n\tactions.moveToElement(tickets).build().perform();\r\n\twait.until(ExpectedConditions.elementToBeClickable(By.linkText(&quot;Statuses&quot;))).click();\r\n\r\nOptimizing the code you can use:\r\n\r\n\tnew Actions(driver).moveToElement(new WebDriverWait(driver, Duration.ofSeconds(5)).until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;//span[@title=&#39;Tickets&#39;]&quot;)))).build().perform();\r\n\tnew WebDriverWait(driver, Duration.ofSeconds(5)).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[@class=&#39;ember-view&#39; and text()=&#39;Statuses&#39;]&quot;))).click();","title":"Selenium Webriver:- How to click on this link?","body":"<p>To <a href=\"https://stackoverflow.com/a/47261894/7429447\"><em><strong>Mouse Hover</strong></em></a> over the element with text as <em><strong>Tickets</strong></em> and then to click on the element with text as <em><strong>Statuses</strong></em> you can use the following <a href=\"https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver\"><em>locator strategies</em></a>:</p>\n<pre><code>WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(5));\nWebElement tickets = wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;//span[@title='Tickets']&quot;)));\nActions actions = new Actions(driver);\nactions.moveToElement(tickets).build().perform();\nwait.until(ExpectedConditions.elementToBeClickable(By.linkText(&quot;Statuses&quot;))).click();\n</code></pre>\n<p>Optimizing the code you can use:</p>\n<pre><code>new Actions(driver).moveToElement(new WebDriverWait(driver, Duration.ofSeconds(5)).until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;//span[@title='Tickets']&quot;)))).build().perform();\nnew WebDriverWait(driver, Duration.ofSeconds(5)).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[@class='ember-view' and text()='Statuses']&quot;))).click();\n</code></pre>\n"}],"owner":{"account_id":9014912,"reputation":398,"user_id":6718145,"accept_rate":33,"display_name":"RAHUL"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676667580,"creation_date":1676665962,"question_id":75489020,"body_markdown":"[![enter image description here][1]][1]\r\n\r\nI have to take cursor on &quot;Tickets&quot; link and then click on the &quot;Statuses&quot;.\r\nAs soon as i take cursor outside this window/frame this screen gets closes and i again have to take cursor on &quot;Tickets&quot; link.\r\n\r\nHTML is:-\r\n[![enter image description here][2]][2]\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2i1rg.png\r\n  [2]: https://i.stack.imgur.com/yXqVB.png\r\n  [3]: https://i.stack.imgur.com/AbdRy.png","title":"Selenium Webriver:- How to click on this link?","body":"<p><a href=\"https://i.stack.imgur.com/2i1rg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2i1rg.png\" alt=\"enter image description here\" /></a></p>\n<p>I have to take cursor on &quot;Tickets&quot; link and then click on the &quot;Statuses&quot;.\nAs soon as i take cursor outside this window/frame this screen gets closes and i again have to take cursor on &quot;Tickets&quot; link.</p>\n<p>HTML is:-\n<a href=\"https://i.stack.imgur.com/yXqVB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yXqVB.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/AbdRy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AbdRy.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","mediastore"],"comments":[{"owner":{"account_id":1155018,"reputation":573,"user_id":1135866,"accept_rate":92,"display_name":"VCODE"},"score":0,"creation_date":1676668744,"post_id":75489153,"comment_id":133191091,"body_markdown":"I don&#39;t think there&#39;s a way around it, i.e: without asking for permission from the user. Also, check this answer: https://stackoverflow.com/a/28183933/1135866","body":"I don&#39;t think there&#39;s a way around it, i.e: without asking for permission from the user. Also, check this answer: <a href=\"https://stackoverflow.com/a/28183933/1135866\">stackoverflow.com/a/28183933/1135866</a>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1676672544,"post_id":75489153,"comment_id":133191815,"body_markdown":"`However, on Android &lt; 10, the download URI is not avaiable in the MediaStore API,` ? Which uri?  What do you mean? Where are you talking about?","body":"<code>However, on Android &lt; 10, the download URI is not avaiable in the MediaStore API,</code> ? Which uri?  What do you mean? Where are you talking about?"},{"owner":{"account_id":15206457,"reputation":133,"user_id":10972726,"display_name":"MichiBros"},"score":0,"creation_date":1676673143,"post_id":75489153,"comment_id":133191918,"body_markdown":"The entire MediaStore.Downloads class was added only in API 29. Check this out: https://developer.android.com/reference/android/provider/MediaStore.Downloads","body":"The entire MediaStore.Downloads class was added only in API 29. Check this out: <a href=\"https://developer.android.com/reference/android/provider/MediaStore.Downloads\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/provider/&hellip;</a>"}],"owner":{"account_id":15206457,"reputation":133,"user_id":10972726,"display_name":"MichiBros"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":447,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1676667201,"creation_date":1676667201,"question_id":75489153,"body_markdown":"I have a file transfer app that needs to save the files it received in the Download folder.\r\nOn Android &gt;= 10, MediaStore makes this extremely easy, since it provides a direct method for creating entries in the download folder, without any special permission.\r\n\r\nHowever, on Android &lt; 10, the download URI is not avaiable in the MediaStore API, and I have to rely on the old method for saving files, which requires the WRITE_EXTERNAL_STORAGE permission with consequent popup for asking it.\r\n\r\nIs there any way around this? Maybe some kind of support library that brings the Download URI back to older versions of Android?","title":"Save file in Downloads folder without WRITE_STORAGE permission on Android &lt; 10","body":"<p>I have a file transfer app that needs to save the files it received in the Download folder.\nOn Android &gt;= 10, MediaStore makes this extremely easy, since it provides a direct method for creating entries in the download folder, without any special permission.</p>\n<p>However, on Android &lt; 10, the download URI is not avaiable in the MediaStore API, and I have to rely on the old method for saving files, which requires the WRITE_EXTERNAL_STORAGE permission with consequent popup for asking it.</p>\n<p>Is there any way around this? Maybe some kind of support library that brings the Download URI back to older versions of Android?</p>\n"},{"tags":["java","debugging","intellij-idea"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1320875530,"post_id":8072189,"comment_id":9891185,"body_markdown":"Haven&#39;t seen that behavior; have you tried a complete clean &amp; rebuild?","body":"Haven&#39;t seen that behavior; have you tried a complete clean &amp; rebuild?"},{"owner":{"account_id":242066,"reputation":17256,"user_id":513342,"accept_rate":85,"display_name":"Oleg Mikheev"},"score":3,"creation_date":1320875867,"post_id":8072189,"comment_id":9891270,"body_markdown":"are you tracing your own source, or the sources of some library? the problem could be several versions of the same library in the classpath","body":"are you tracing your own source, or the sources of some library? the problem could be several versions of the same library in the classpath"},{"owner":{"account_id":6121142,"reputation":1811,"user_id":7338454,"accept_rate":88,"display_name":"johnny_mac"},"score":0,"creation_date":1570330197,"post_id":8072189,"comment_id":102877549,"body_markdown":"Have you confirmed it is actually not linking to the correct source, or is it linking but skipping over certain code you are trying to debug? I ask as I experienced the same due to intellij not stepping into lambda functions. Some code refactoring made stepping through easier. If however, you do not see any changes reflected at all, feel free to disregard this comment.","body":"Have you confirmed it is actually not linking to the correct source, or is it linking but skipping over certain code you are trying to debug? I ask as I experienced the same due to intellij not stepping into lambda functions. Some code refactoring made stepping through easier. If however, you do not see any changes reflected at all, feel free to disregard this comment."}],"answers":[{"tags":[],"owner":{"account_id":191938,"reputation":15835,"user_id":432806,"accept_rate":100,"display_name":"pcalcao"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1320875509,"creation_date":1320875509,"answer_id":8072224,"question_id":8072189,"body_markdown":"The only thing I can think of is that the current compiled classes don&#39;t match the Source you&#39;re using to debug.\r\nWhat happens in this circumstances is that IntelliJ (or any other IDE), gets the debug information from the classes, regarding things like line numbers, and then maps it to the current source you&#39;re viewing, to show you what code is being executed. \r\n\r\nIf the code is outdated, or the versions (the source code and the compiled class) mismatch in any way, it can happen that the debugged is giving the IDE information to show a certain line, but that information is not correct giving the current source code, which might cause what appears to be the debugged &quot;jumping&quot; lines or simply stopping in places that don&#39;t make much sense. \r\n\r\nHave you rebuilt your project? Are those sources from classes in a Jar, and are you sure the versions match?\r\n\r\nHope it helps!","title":"Why does IntelliJ debugger skip lines when debugging?","body":"<p>The only thing I can think of is that the current compiled classes don't match the Source you're using to debug.\nWhat happens in this circumstances is that IntelliJ (or any other IDE), gets the debug information from the classes, regarding things like line numbers, and then maps it to the current source you're viewing, to show you what code is being executed. </p>\n\n<p>If the code is outdated, or the versions (the source code and the compiled class) mismatch in any way, it can happen that the debugged is giving the IDE information to show a certain line, but that information is not correct giving the current source code, which might cause what appears to be the debugged \"jumping\" lines or simply stopping in places that don't make much sense. </p>\n\n<p>Have you rebuilt your project? Are those sources from classes in a Jar, and are you sure the versions match?</p>\n\n<p>Hope it helps!</p>\n"},{"tags":[],"owner":{"account_id":3801282,"reputation":4355,"user_id":3154872,"accept_rate":25,"display_name":"mancini0"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1468338139,"creation_date":1468337721,"answer_id":38333291,"question_id":8072189,"body_markdown":"You can configure IntelliJ to use the Eclipse java compiler, which may solve your issue. From the below link:\r\n\r\nhttps://youtrack.jetbrains.com/issue/IDEA-8021\r\n\r\n&quot;\r\nThis is not the first report about well-known old javac problem: for some try/catch and if/else structures it generates several bytecode instructions, which are wrongly associated with line numbers. So when stepping, debugger encounters jump instruction with the different line number and decides to stop at it (because the line number has changed). The javac shouldn&#39;t have assigned the different line number to that instruction. \r\n\r\nYou see different behaviour in Eclipse only because it uses its own compiler which is free from this problem. You&#39;ll see exactly the described behavour if you configure Eclipse to use javac for compilation. Alternatively, you can set IDEA to use eclipse compiler to workaround the problem (applicable only to current EAP version - builds 5xxx - which has integration with eclipse compiler)&quot;\r\n\r\nAlso see this Q regarding configuring Maven to use the Eclipse compiler:\r\n\r\nhttps://stackoverflow.com/questions/33164976/using-eclipse-java-compiler-ecj-in-maven-builds\r\n\r\n","title":"Why does IntelliJ debugger skip lines when debugging?","body":"<p>You can configure IntelliJ to use the Eclipse java compiler, which may solve your issue. From the below link:</p>\n\n<p><a href=\"https://youtrack.jetbrains.com/issue/IDEA-8021\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/IDEA-8021</a></p>\n\n<p>\"\nThis is not the first report about well-known old javac problem: for some try/catch and if/else structures it generates several bytecode instructions, which are wrongly associated with line numbers. So when stepping, debugger encounters jump instruction with the different line number and decides to stop at it (because the line number has changed). The javac shouldn't have assigned the different line number to that instruction. </p>\n\n<p>You see different behaviour in Eclipse only because it uses its own compiler which is free from this problem. You'll see exactly the described behavour if you configure Eclipse to use javac for compilation. Alternatively, you can set IDEA to use eclipse compiler to workaround the problem (applicable only to current EAP version - builds 5xxx - which has integration with eclipse compiler)\"</p>\n\n<p>Also see this Q regarding configuring Maven to use the Eclipse compiler:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/33164976/using-eclipse-java-compiler-ecj-in-maven-builds\">Using Eclipse Java Compiler (ecj) in maven builds</a></p>\n"},{"tags":[],"owner":{"account_id":192101,"reputation":1554,"user_id":433061,"accept_rate":100,"display_name":"bdetweiler"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1549906625,"creation_date":1546533121,"answer_id":54026264,"question_id":8072189,"body_markdown":"I&#39;ve been fighting with a similar issue with a Gradle-based project. I have tried every combination of File -&gt; Synchronize, Build -&gt; Clean project, `gradle clean build`, etc. Deleted the .gradle cache. Decompiled the .class file and it looked like the correct version.\r\n\r\nUltimately, I just ended up removing all the `build` and `out` directories in the project, tried running the test again and finally picked up the current source version.\r\n\r\nI remember in Eclipse I always had to deal with the [Eclipse Dance](http://underlap.blogspot.com/2011/10/eclipse-dance-steps.html). I guess this is IntelliJ&#39;s version of that.\r\n\r\nUPDATE: I&#39;ve found this to be a randomly recurring issue so I created an alias to do the deletes if you&#39;re running a Bash-equivalent. Just set the alias in your `.bashrc` or `.zshrc` and run `deletebuilds` within your project directory:\r\n\r\n```\r\nalias deletebuilds=&#39;find . | egrep &quot;\\.class$&quot; | sed -e &quot;s/\\/build\\/.*/\\/build\\//&quot; | sort | uniq | xargs rm -rf&#39;\r\n```\r\n\r\nThis assumes your compiled class files are going into a `build` directory. Modify the `sed` part if they&#39;re going somewhere else.","title":"Why does IntelliJ debugger skip lines when debugging?","body":"<p>I've been fighting with a similar issue with a Gradle-based project. I have tried every combination of File -> Synchronize, Build -> Clean project, <code>gradle clean build</code>, etc. Deleted the .gradle cache. Decompiled the .class file and it looked like the correct version.</p>\n\n<p>Ultimately, I just ended up removing all the <code>build</code> and <code>out</code> directories in the project, tried running the test again and finally picked up the current source version.</p>\n\n<p>I remember in Eclipse I always had to deal with the <a href=\"http://underlap.blogspot.com/2011/10/eclipse-dance-steps.html\" rel=\"nofollow noreferrer\">Eclipse Dance</a>. I guess this is IntelliJ's version of that.</p>\n\n<p>UPDATE: I've found this to be a randomly recurring issue so I created an alias to do the deletes if you're running a Bash-equivalent. Just set the alias in your <code>.bashrc</code> or <code>.zshrc</code> and run <code>deletebuilds</code> within your project directory:</p>\n\n<pre><code>alias deletebuilds='find . | egrep \"\\.class$\" | sed -e \"s/\\/build\\/.*/\\/build\\//\" | sort | uniq | xargs rm -rf'\n</code></pre>\n\n<p>This assumes your compiled class files are going into a <code>build</code> directory. Modify the <code>sed</code> part if they're going somewhere else.</p>\n"},{"tags":[],"owner":{"account_id":3210182,"reputation":535,"user_id":2710335,"display_name":"Northnroro"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1552896444,"creation_date":1552896444,"answer_id":55216946,"question_id":8072189,"body_markdown":"This problem could be similar to this issue [https://intellij-support.jetbrains.com/hc/en-us/community/posts/206170749-IDEA-14-1-1-debugger-using-decompiled-code-instead-of-source-code][1].\r\n\r\nIn `Project Structure (Ctrl+Alt+Shift+S) &gt; Modules`, if you have added any jar of the debugged module to any another module&#39;s dependencies, Intellij might use the decompiled version of that jar instead of the latest source code, so the execution will pause at a breakpoint in the decompiled version instead. This problem can occur even when the debugged module is called from other modules that do not depend on the debugged one.\r\n\r\nTo solve this, simply remove the jar of the debugged module from all modules&#39; dependencies in the Project Structure. If you do not know which modules have the debugged module jar as dependencies, you can use some tools (Eg. Sublime Text, bash, ...) to search for the module name which is stored in Intellij `*.iml` file in each module. Once removing, you may need to `Sync the project` and do `Maven &gt; Reimport`.\r\n\r\n\r\n  [1]: https://intellij-support.jetbrains.com/hc/en-us/community/posts/206170749-IDEA-14-1-1-debugger-using-decompiled-code-instead-of-source-code","title":"Why does IntelliJ debugger skip lines when debugging?","body":"<p>This problem could be similar to this issue <a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/206170749-IDEA-14-1-1-debugger-using-decompiled-code-instead-of-source-code\" rel=\"nofollow noreferrer\">https://intellij-support.jetbrains.com/hc/en-us/community/posts/206170749-IDEA-14-1-1-debugger-using-decompiled-code-instead-of-source-code</a>.</p>\n\n<p>In <code>Project Structure (Ctrl+Alt+Shift+S) &gt; Modules</code>, if you have added any jar of the debugged module to any another module's dependencies, Intellij might use the decompiled version of that jar instead of the latest source code, so the execution will pause at a breakpoint in the decompiled version instead. This problem can occur even when the debugged module is called from other modules that do not depend on the debugged one.</p>\n\n<p>To solve this, simply remove the jar of the debugged module from all modules' dependencies in the Project Structure. If you do not know which modules have the debugged module jar as dependencies, you can use some tools (Eg. Sublime Text, bash, ...) to search for the module name which is stored in Intellij <code>*.iml</code> file in each module. Once removing, you may need to <code>Sync the project</code> and do <code>Maven &gt; Reimport</code>.</p>\n"},{"tags":[],"owner":{"account_id":3691447,"reputation":6845,"user_id":3073945,"accept_rate":90,"display_name":"Md. Sajedul Karim"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1595227185,"creation_date":1595227185,"answer_id":62989865,"question_id":8072189,"body_markdown":"I fetched same problem. You can follow bellow steps:\r\n\r\n 1. Delete Build/Target folder\r\n 2. Close project from file and \r\n 3. Open project from Recent projects.\r\n 4. Debug again. Now debugger will hit your debug pointer location\r\n\r\nThanks :)","title":"Why does IntelliJ debugger skip lines when debugging?","body":"<p>I fetched same problem. You can follow bellow steps:</p>\n<ol>\n<li>Delete Build/Target folder</li>\n<li>Close project from file and</li>\n<li>Open project from Recent projects.</li>\n<li>Debug again. Now debugger will hit your debug pointer location</li>\n</ol>\n<p>Thanks :)</p>\n"},{"tags":[],"owner":{"account_id":8607564,"reputation":912,"user_id":6447189,"display_name":"Melissa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667429099,"creation_date":1667429099,"answer_id":74296380,"question_id":8072189,"body_markdown":"In my case, breakpoint/debugger wasn&#39;t working for Foo.java only. Turns out Foo.java was mocked in my test (`@MockBean`).","title":"Why does IntelliJ debugger skip lines when debugging?","body":"<p>In my case, breakpoint/debugger wasn't working for Foo.java only. Turns out Foo.java was mocked in my test (<code>@MockBean</code>).</p>\n"},{"tags":[],"owner":{"account_id":4234133,"reputation":323,"user_id":3465795,"display_name":"Steve T"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676067926,"creation_date":1676052786,"answer_id":75414724,"question_id":8072189,"body_markdown":"I am working on a project that has multiple modules. The test class in module B is used to run a test, during which code found in module A is invoked. My problem was that when I added new code to a class in module A, and I tried to debug the new code, the debugger would instead use a .class file, and my changes were ignored by the debugger. I tried many things, but it turned out to be a rather simple resolution. First, I went to File &gt; Project Structure &gt; Project Settings &gt; Modules. In the list of modules, I selected module B. Then I selected the Dependencies tab. There is a list of dependencies in this tab. In order for the test class in module B to see the class under test in module A, I had to click the plus sign (+), to add a new dependency to the list. A list of modules and submodules were shown. I selected the submodule in module A that contained the class I wanted to debug, and I clicked ok. Now the submodule that I selected was shown in the dependencies list. I moved this submodule to just below where it says &quot;module source&quot;, then I clicked apply and ok to close the Project Settings. When I reran the debugger, now the test in module B could &quot;see&quot; the code changes in module A, and after the debug action did a rebuild, I could proceed to debug as normal. ","title":"Why does IntelliJ debugger skip lines when debugging?","body":"<p>I am working on a project that has multiple modules. The test class in module B is used to run a test, during which code found in module A is invoked. My problem was that when I added new code to a class in module A, and I tried to debug the new code, the debugger would instead use a .class file, and my changes were ignored by the debugger. I tried many things, but it turned out to be a rather simple resolution. First, I went to File &gt; Project Structure &gt; Project Settings &gt; Modules. In the list of modules, I selected module B. Then I selected the Dependencies tab. There is a list of dependencies in this tab. In order for the test class in module B to see the class under test in module A, I had to click the plus sign (+), to add a new dependency to the list. A list of modules and submodules were shown. I selected the submodule in module A that contained the class I wanted to debug, and I clicked ok. Now the submodule that I selected was shown in the dependencies list. I moved this submodule to just below where it says &quot;module source&quot;, then I clicked apply and ok to close the Project Settings. When I reran the debugger, now the test in module B could &quot;see&quot; the code changes in module A, and after the debug action did a rebuild, I could proceed to debug as normal.</p>\n"}],"owner":{"account_id":951375,"reputation":391,"user_id":977463,"display_name":"jkarm"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43309,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":7,"score":14,"last_activity_date":1676666086,"creation_date":1320875336,"question_id":8072189,"body_markdown":"I am trying to switch to over to IntelliJ but when I load up my projects the debugger appear to be skipping lines and not tracking the actual source when I try to step through. I know this is a vague problem but does anyone know about issues that cause IntelliJ to link improperly to source code when debugging?","title":"Why does IntelliJ debugger skip lines when debugging?","body":"<p>I am trying to switch to over to IntelliJ but when I load up my projects the debugger appear to be skipping lines and not tracking the actual source when I try to step through. I know this is a vague problem but does anyone know about issues that cause IntelliJ to link improperly to source code when debugging?</p>\n"},{"tags":["java","spring","spring-boot","gradle","spring-test"],"answers":[{"tags":[],"owner":{"account_id":16812688,"reputation":142,"user_id":12155325,"display_name":"dilbert2219"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676665730,"creation_date":1676665730,"answer_id":75488998,"question_id":75479290,"body_markdown":"So, I added ```testImplementation &#39;com.h2database:h2&#39; ``` and everything came to order.\r\n\r\nI was getting datasource dependency issue before.","title":"Spring Boot Actuators and CORS Configuration test failing because DB Props are not provided","body":"<p>So, I added <code>testImplementation 'com.h2database:h2' </code> and everything came to order.</p>\n<p>I was getting datasource dependency issue before.</p>\n"}],"owner":{"account_id":16812688,"reputation":142,"user_id":12155325,"display_name":"dilbert2219"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676665730,"creation_date":1676594675,"question_id":75479290,"body_markdown":"My Spring Boot application is configured with a Datasource and I have implemented CORS Configs and HttpSecurity .antMatchers for authorizing request.\r\n\r\nThe application seemed to have been working fine - i.e building and testing and launching when I put plain text db passwords in the props file.\r\n\r\nEver since I moved the creds into a [CREDHUB][1] service - the builds fail locally (```I remediated that by adding a test active profile in my gradle file which uses an uncommited props file - which actually has the plain text db user and pwd```) which uses  on Jenkins because the actuator and CORS tests started failing, as Jenkins is not configured to access CREDHUB.\r\n\r\nSo, my question is:\r\n\r\nWith this setup, the test seems to bring up the whole application, thus trying to connect to a running database - whose credentials are unavailable locally.\r\nThe test won&#39;t start properly because the datasource properties prefixed with db are not provided.\r\nHow can I start this test without bringing up the database connection?\r\n\r\n\r\n```app.yml ```\r\n```\r\nspring:\r\n  datasource:\r\n    driver-class-name: org.abc.jdbc.Driver\r\n    username: ${db.username}\r\n    password: ${db.password}\r\n    url: jdbc:abc://${db.host}:${db.port}/${db.schema}\r\n```\r\n\r\n```ActuatorSecurityTest.Java```\r\n\r\n```\r\n@ExtendWith(SpringExtension.class)\r\n@SpringBootTest(webEnvironment = RANDOM_PORT)\r\n@Import(ExceptionHandlerConfiguration.class)\r\n@AutoConfigureWebTestClient(timeout = &quot;30000&quot;)\r\nclass ActuatorsSecurityTest {\r\n    @Autowired\r\n    private WebTestClient webClient;\r\n\r\n    /***********************************************************************************************\r\n     * ENDPOINTS: Actuator\r\n     ***********************************************************************************************/\r\n\r\n    @Test\r\n    void should_allowActuatorInfoEndpoint_withoutAuthentication() {\r\n        webClient.get().uri(&quot;/actuator/info&quot;).exchange().expectStatus().is2xxSuccessful();\r\n    }\r\n\r\n    @Test\r\n    void should_notAllowSensitiveActuatorEndpoints_withInValidAuthentication() {\r\n        webClient.get().uri(&quot;/actuator/env&quot;).header(&quot;Authorization&quot;, &quot;Basic xxx&quot;).exchange().expectStatus().is4xxClientError();\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.cloudfoundry.org/credhub/","title":"Spring Boot Actuators and CORS Configuration test failing because DB Props are not provided","body":"<p>My Spring Boot application is configured with a Datasource and I have implemented CORS Configs and HttpSecurity .antMatchers for authorizing request.</p>\n<p>The application seemed to have been working fine - i.e building and testing and launching when I put plain text db passwords in the props file.</p>\n<p>Ever since I moved the creds into a <a href=\"https://docs.cloudfoundry.org/credhub/\" rel=\"nofollow noreferrer\">CREDHUB</a> service - the builds fail locally (<code>I remediated that by adding a test active profile in my gradle file which uses an uncommited props file - which actually has the plain text db user and pwd</code>) which uses  on Jenkins because the actuator and CORS tests started failing, as Jenkins is not configured to access CREDHUB.</p>\n<p>So, my question is:</p>\n<p>With this setup, the test seems to bring up the whole application, thus trying to connect to a running database - whose credentials are unavailable locally.\nThe test won't start properly because the datasource properties prefixed with db are not provided.\nHow can I start this test without bringing up the database connection?</p>\n<p><code>app.yml </code></p>\n<pre><code>spring:\n  datasource:\n    driver-class-name: org.abc.jdbc.Driver\n    username: ${db.username}\n    password: ${db.password}\n    url: jdbc:abc://${db.host}:${db.port}/${db.schema}\n</code></pre>\n<p><code>ActuatorSecurityTest.Java</code></p>\n<pre><code>@ExtendWith(SpringExtension.class)\n@SpringBootTest(webEnvironment = RANDOM_PORT)\n@Import(ExceptionHandlerConfiguration.class)\n@AutoConfigureWebTestClient(timeout = &quot;30000&quot;)\nclass ActuatorsSecurityTest {\n    @Autowired\n    private WebTestClient webClient;\n\n    /***********************************************************************************************\n     * ENDPOINTS: Actuator\n     ***********************************************************************************************/\n\n    @Test\n    void should_allowActuatorInfoEndpoint_withoutAuthentication() {\n        webClient.get().uri(&quot;/actuator/info&quot;).exchange().expectStatus().is2xxSuccessful();\n    }\n\n    @Test\n    void should_notAllowSensitiveActuatorEndpoints_withInValidAuthentication() {\n        webClient.get().uri(&quot;/actuator/env&quot;).header(&quot;Authorization&quot;, &quot;Basic xxx&quot;).exchange().expectStatus().is4xxClientError();\n    }\n}\n</code></pre>\n"},{"tags":["java","sql","database","random","h2"],"comments":[{"owner":{"account_id":161745,"reputation":49235,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"score":1,"creation_date":1358167129,"post_id":14316500,"comment_id":19894599,"body_markdown":"H2 does support row ids (`select _rowid_ from sample`, same as SQLite). But using the ID column works with all databases, so this is the preferred solution.","body":"H2 does support row ids (<code>select _rowid_ from sample</code>, same as SQLite). But using the ID column works with all databases, so this is the preferred solution."}],"answers":[{"tags":[],"owner":{"account_id":67756,"reputation":5083,"user_id":198087,"accept_rate":70,"display_name":"Archer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1358158846,"creation_date":1358158846,"answer_id":14316597,"question_id":14316500,"body_markdown":"You should use column `id` instead of `rowid`. Column `id` exists in your table and is `auto_increment`.","title":"Selecting random rows from a big table in H2 database","body":"<p>You should use column <code>id</code> instead of <code>rowid</code>. Column <code>id</code> exists in your table and is <code>auto_increment</code>.</p>\n"},{"tags":[],"owner":{"account_id":161745,"reputation":49235,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1358168135,"creation_date":1358168135,"answer_id":14318824,"question_id":14316500,"body_markdown":"The following script selects every nth row quite efficiently. It assumes there are no gaps in the ids. If gaps are possible, then you might want to increase the range(1, 100) to range(1, 200) or so. To get random rows, the formula at the very end would need to be changed a bit:\r\n\r\n    drop table test;\r\n\r\n    create table test(\r\n      id bigint auto_increment primary key, \r\n      name varchar(255));\r\n\r\n    insert into test \r\n    select x, &#39;Hello &#39; || x from system_range(50, 1200);\r\n\r\n    select * from test t, system_range(1, 100) range\r\n    where t.id = x * (select max(id)-min(id) from test) / 100 + \r\n    (select min(id) from test);\r\n","title":"Selecting random rows from a big table in H2 database","body":"<p>The following script selects every nth row quite efficiently. It assumes there are no gaps in the ids. If gaps are possible, then you might want to increase the range(1, 100) to range(1, 200) or so. To get random rows, the formula at the very end would need to be changed a bit:</p>\n\n<pre><code>drop table test;\n\ncreate table test(\n  id bigint auto_increment primary key, \n  name varchar(255));\n\ninsert into test \nselect x, 'Hello ' || x from system_range(50, 1200);\n\nselect * from test t, system_range(1, 100) range\nwhere t.id = x * (select max(id)-min(id) from test) / 100 + \n(select min(id) from test);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7442150,"reputation":1,"user_id":5659595,"display_name":"Aviral Sawani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1449670601,"creation_date":1449670601,"answer_id":34181025,"question_id":14316500,"body_markdown":"You can Rank your table and select Random 50 ranks out of it, avoid sorting or grouping in any way to keep it optimized.","title":"Selecting random rows from a big table in H2 database","body":"<p>You can Rank your table and select Random 50 ranks out of it, avoid sorting or grouping in any way to keep it optimized.</p>\n"},{"tags":[],"owner":{"account_id":9002055,"reputation":1135,"user_id":6710305,"display_name":"M T Head"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1499808161,"creation_date":1499807565,"answer_id":45044546,"question_id":14316500,"body_markdown":"What I do for this is create a temp table.  Generate random numbers from 1 to greatest identity value in the table.  Then select from the table where their identity value is in the temp table.\r\n\r\n&quot;Single query way of doing this&quot;\r\n\r\nCreate temp table (I don&#39;t know the h2 syntax for this but it supports temp tables with a field name of DesiredIdentity)\r\n\r\nSelect max identity value from the table.\r\n\r\nLoop through with the rand command to insert random numbers into a temp table from 1 to the number of random rows you want.  Set the range for random from 1 to max row count.  Insure the same random number is not selected.\r\n\r\nThen select from the table where the identity value is in the identity temp table.\r\n","title":"Selecting random rows from a big table in H2 database","body":"<p>What I do for this is create a temp table.  Generate random numbers from 1 to greatest identity value in the table.  Then select from the table where their identity value is in the temp table.</p>\n\n<p>\"Single query way of doing this\"</p>\n\n<p>Create temp table (I don't know the h2 syntax for this but it supports temp tables with a field name of DesiredIdentity)</p>\n\n<p>Select max identity value from the table.</p>\n\n<p>Loop through with the rand command to insert random numbers into a temp table from 1 to the number of random rows you want.  Set the range for random from 1 to max row count.  Insure the same random number is not selected.</p>\n\n<p>Then select from the table where the identity value is in the identity temp table.</p>\n"},{"tags":[],"owner":{"account_id":27785438,"reputation":1,"user_id":21212995,"display_name":"yelgazin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676665594,"creation_date":1676391582,"answer_id":75450574,"question_id":14316500,"body_markdown":"I use following approach:\r\n\r\n 1. `SELECT COUNT(*) FROM TABLE1...` then calculate **random value** from 1 to\r\n    `COUNT` (inclusive). \r\n \r\n 2. `SELECT * \r\n    FROM (SELECT ROWNUM() AS NUM, ID AS ID FROM TABLE1) AS T1 WHERE T1.NUM =` **random value**","title":"Selecting random rows from a big table in H2 database","body":"<p>I use following approach:</p>\n<ol>\n<li><p><code>SELECT COUNT(*) FROM TABLE1...</code> then calculate <strong>random value</strong> from 1 to\n<code>COUNT</code> (inclusive).</p>\n</li>\n<li><p><code>SELECT *  FROM (SELECT ROWNUM() AS NUM, ID AS ID FROM TABLE1) AS T1 WHERE T1.NUM =</code> <strong>random value</strong></p>\n</li>\n</ol>\n"}],"owner":{"account_id":94649,"reputation":8697,"user_id":258289,"accept_rate":95,"display_name":"Luigi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3844,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":14318824,"answer_count":5,"score":2,"last_activity_date":1676665594,"creation_date":1358158512,"question_id":14316500,"body_markdown":"I have a big table in my database (potentially millions of records) and I need to select #X random rows (let&#39;s say #X between 10 and 50) , but I need this query to be as optimal as possible.\r\n\r\nThe table looks like this:\r\n\r\n    CREATE TABLE sample (\r\n        id bigint auto_increment PRIMARY KEY,\r\n        user_id bigint NOT NULL,\r\n        screen_name VARCHAR NOT NULL,\r\n        ...\r\n    );\r\n\r\nI&#39;ve searched around and I found answers like this:\r\n\r\n    SELECT * FROM sample ORDER BY RAND() limit X.\r\n\r\nBut It looks to me that this will fetch the full table then sort it, isn&#39;t it?\r\n\r\nI think it would be best to generate 10 or 50 random integers and do a `select * from sample where rowid in (&lt;random integer list&gt;)`. But afaik, rowid concept is missing in H2, so I may opt for using the ID column in my table. \r\n\r\nIt would be awesome if I can do this task with a single SQL query.\r\n\r\nAny better advice?","title":"Selecting random rows from a big table in H2 database","body":"<p>I have a big table in my database (potentially millions of records) and I need to select #X random rows (let's say #X between 10 and 50) , but I need this query to be as optimal as possible.</p>\n\n<p>The table looks like this:</p>\n\n<pre><code>CREATE TABLE sample (\n    id bigint auto_increment PRIMARY KEY,\n    user_id bigint NOT NULL,\n    screen_name VARCHAR NOT NULL,\n    ...\n);\n</code></pre>\n\n<p>I've searched around and I found answers like this:</p>\n\n<pre><code>SELECT * FROM sample ORDER BY RAND() limit X.\n</code></pre>\n\n<p>But It looks to me that this will fetch the full table then sort it, isn't it?</p>\n\n<p>I think it would be best to generate 10 or 50 random integers and do a <code>select * from sample where rowid in (&lt;random integer list&gt;)</code>. But afaik, rowid concept is missing in H2, so I may opt for using the ID column in my table. </p>\n\n<p>It would be awesome if I can do this task with a single SQL query.</p>\n\n<p>Any better advice?</p>\n"},{"tags":["java","android","android-package-managers","android-12"],"answers":[{"tags":[],"owner":{"account_id":27250627,"reputation":1,"user_id":20775159,"display_name":"Max Devtec"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676665328,"creation_date":1676665328,"answer_id":75488946,"question_id":72689812,"body_markdown":"I suggest you try adding QUERY_ALL_PACKAGES permission to manifest.\r\nThis issue might be related to packagemanager changes in newer android versions for privacy improvements. Im onto a similar issue for quite a while.","title":"Android PackageManager getChangedPackages - Android 12","body":"<p>I suggest you try adding QUERY_ALL_PACKAGES permission to manifest.\nThis issue might be related to packagemanager changes in newer android versions for privacy improvements. Im onto a similar issue for quite a while.</p>\n"}],"owner":{"account_id":11493879,"reputation":11,"user_id":8423874,"display_name":"S_B_S"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":541,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1676665328,"creation_date":1655740533,"question_id":72689812,"body_markdown":"We are trying to get a list of all updated packages using Android Package Manager [getChangedPackages](https://developer.android.google.cn/reference/android/content/pm/PackageManager#getChangedPackages(int)) function. \r\n\r\nThis is the code we use:\r\n\r\n```\r\nimport android.content.pm.PackageManager;\r\nimport android.content.pm.ChangedPackages;\r\nPackageManager pm;\r\npm = getApplicationContext().getPackageManager();\r\nChangedPackages changedPackages = pm.getChangedPackages(0);\r\n```\r\nThis code works well on Android 10 &amp; 11 and is detecting installed / updated / deleted packages.\r\n\r\nHowever, the same code detects **only** deleted packages when running on Android 12 devices. We&#39;ve installed some applications and those were not detected at all by the getChangedPackages application. Only after deleting the applications then the package names appeared in the list of changed packages returned from function. \r\n\r\nWe&#39;ve also tried to use `changedPackages.getSequenceNumber();` or even `Settings.Global.getInt(getApplicationContext().getContentResolver(), Settings.Global.BOOT_COUNT);` as the *from* parameter sent to getChangedPackages but with no success. \r\n\r\nWe couldn&#39;t find any documented changes that can explain this behavioral change.\r\n[Android12 changes](https://developer.android.com/about/versions/12/behavior-changes-12)\r\n\r\nHave you experienced similar thing or have any idea how it can be solved? \r\nWe will appreciate every piece of data or advice.\r\n\r\nThank you!","title":"Android PackageManager getChangedPackages - Android 12","body":"<p>We are trying to get a list of all updated packages using Android Package Manager <a href=\"https://developer.android.google.cn/reference/android/content/pm/PackageManager#getChangedPackages(int)\" rel=\"nofollow noreferrer\">getChangedPackages</a> function.</p>\n<p>This is the code we use:</p>\n<pre><code>import android.content.pm.PackageManager;\nimport android.content.pm.ChangedPackages;\nPackageManager pm;\npm = getApplicationContext().getPackageManager();\nChangedPackages changedPackages = pm.getChangedPackages(0);\n</code></pre>\n<p>This code works well on Android 10 &amp; 11 and is detecting installed / updated / deleted packages.</p>\n<p>However, the same code detects <strong>only</strong> deleted packages when running on Android 12 devices. We've installed some applications and those were not detected at all by the getChangedPackages application. Only after deleting the applications then the package names appeared in the list of changed packages returned from function.</p>\n<p>We've also tried to use <code>changedPackages.getSequenceNumber();</code> or even <code>Settings.Global.getInt(getApplicationContext().getContentResolver(), Settings.Global.BOOT_COUNT);</code> as the <em>from</em> parameter sent to getChangedPackages but with no success.</p>\n<p>We couldn't find any documented changes that can explain this behavioral change.\n<a href=\"https://developer.android.com/about/versions/12/behavior-changes-12\" rel=\"nofollow noreferrer\">Android12 changes</a></p>\n<p>Have you experienced similar thing or have any idea how it can be solved?\nWe will appreciate every piece of data or advice.</p>\n<p>Thank you!</p>\n"},{"tags":["java","hashmap","java-stream","grouping","collectors"],"comments":[{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1553151141,"post_id":55275129,"comment_id":97280519,"body_markdown":"Use concrete objects! Another way, try and share the type of your output and look at the complexity driven there.","body":"Use concrete objects! Another way, try and share the type of your output and look at the complexity driven there."},{"owner":{"account_id":15452950,"reputation":4661,"user_id":11147851,"display_name":"Pavel Smirnov"},"score":0,"creation_date":1553151472,"post_id":55275129,"comment_id":97280624,"body_markdown":"Could you use nested Maps? Map&lt;String, Map&lt;String, Map&lt;String, String&gt;&gt;&gt; where the first Map&#39;s key is a country, second Map&#39;s is a company and the last one stores models?","body":"Could you use nested Maps? Map&lt;String, Map&lt;String, Map&lt;String, String&gt;&gt;&gt; where the first Map&#39;s key is a country, second Map&#39;s is a company and the last one stores models?"},{"owner":{"account_id":314561,"reputation":6333,"user_id":629804,"accept_rate":70,"display_name":"Pradeep"},"score":0,"creation_date":1553151548,"post_id":55275129,"comment_id":97280651,"body_markdown":"yeah I can,  Can I derive it based on the nature of keys automatically, the nesting will increase based on number of grouping keys,  I can&#39;t  assume it&#39;s just two levels of nesting","body":"yeah I can,  Can I derive it based on the nature of keys automatically, the nesting will increase based on number of grouping keys,  I can&#39;t  assume it&#39;s just two levels of nesting"},{"owner":{"account_id":314561,"reputation":6333,"user_id":629804,"accept_rate":70,"display_name":"Pradeep"},"score":0,"creation_date":1553151651,"post_id":55275129,"comment_id":97280683,"body_markdown":"@Naman,  the input is of type Map&lt;String, String&gt; , I can not make assumptions about data, creating concrete class would require me to specify field names?","body":"@Naman,  the input is of type Map&lt;String, String&gt; , I can not make assumptions about data, creating concrete class would require me to specify field names?"}],"answers":[{"tags":[],"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1553151946,"creation_date":1553151946,"answer_id":55275307,"question_id":55275129,"body_markdown":"Just to double click on the representation of the input as concrete class. It would look much simpler and clean as :\r\n\r\n    Map&lt;String, Map&lt;String, List&lt;ThrowAway&gt;&gt;&gt; multipleGrouping(List&lt;ThrowAway&gt; inputData) {\r\n        return inputData.stream()\r\n                .collect(Collectors.groupingBy(ThrowAway::getA,\r\n                        Collectors.groupingBy(ThrowAway::getB)));\r\n    }\r\n\r\n\r\nwhere I just created a sample class same as your map representation:\r\n\r\n\r\n    class ThrowAway {\r\n        String a;\r\n        String b;\r\n        String c;\r\n\r\n        String getA() {\r\n            return a;\r\n        }\r\n\r\n        String getB() {\r\n            return b;\r\n        }\r\n    }","title":"Group List of Map Data into Nested HashMap in Java","body":"<p>Just to double click on the representation of the input as concrete class. It would look much simpler and clean as :</p>\n\n<pre><code>Map&lt;String, Map&lt;String, List&lt;ThrowAway&gt;&gt;&gt; multipleGrouping(List&lt;ThrowAway&gt; inputData) {\n    return inputData.stream()\n            .collect(Collectors.groupingBy(ThrowAway::getA,\n                    Collectors.groupingBy(ThrowAway::getB)));\n}\n</code></pre>\n\n<p>where I just created a sample class same as your map representation:</p>\n\n<pre><code>class ThrowAway {\n    String a;\n    String b;\n    String c;\n\n    String getA() {\n        return a;\n    }\n\n    String getB() {\n        return b;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13389989,"reputation":10689,"user_id":9662601,"display_name":"Samuel Philipp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553388563,"creation_date":1553388563,"answer_id":55319760,"question_id":55275129,"body_markdown":"Since you are looking for a dynamic solution, here is another approach:\r\n\r\nYou can use the following grouping method to pass two keys for:\r\n\r\n    public Map&lt;String, Map&lt;String, List&lt;Map&lt;String, String&gt;&gt;&gt;&gt; group(List&lt;Map&lt;String, String&gt;&gt; list, String key1, String key2) {\r\n        return list.stream().collect(\r\n                Collectors.groupingBy(m -&gt; m.get(key1),\r\n                        Collectors.groupingBy(m -&gt; m.get(key2))\r\n                )\r\n        );\r\n    }\r\n\r\nThe problem here is if the key does not exist in the map you are getting a `NullPointerException`. To prevent this you can use `map.getOrDefault()` with a default key:\r\n\r\n    public Map&lt;String, Map&lt;String, List&lt;Map&lt;String, String&gt;&gt;&gt;&gt; group(List&lt;Map&lt;String, String&gt;&gt; list, String key1, String key2, String noneKey) {\r\n        return list.stream().collect(\r\n                Collectors.groupingBy(m -&gt; m.getOrDefault(key1, noneKey),\r\n                        Collectors.groupingBy(m -&gt; m.getOrDefault(key2, noneKey))\r\n                )\r\n        );\r\n    }\r\n\r\nCall one of the methods with the following options:\r\n\r\n    Map&lt;String, Map&lt;String, List&lt;Map&lt;String, String&gt;&gt;&gt;&gt; result = group(list, &quot;a&quot;, &quot;b&quot;);\r\n\r\nOr\r\n\r\n    Map&lt;String, Map&lt;String, List&lt;Map&lt;String, String&gt;&gt;&gt;&gt; result = group(list, &quot;a&quot;, &quot;b&quot;, &quot;none&quot;);","title":"Group List of Map Data into Nested HashMap in Java","body":"<p>Since you are looking for a dynamic solution, here is another approach:</p>\n\n<p>You can use the following grouping method to pass two keys for:</p>\n\n<pre><code>public Map&lt;String, Map&lt;String, List&lt;Map&lt;String, String&gt;&gt;&gt;&gt; group(List&lt;Map&lt;String, String&gt;&gt; list, String key1, String key2) {\n    return list.stream().collect(\n            Collectors.groupingBy(m -&gt; m.get(key1),\n                    Collectors.groupingBy(m -&gt; m.get(key2))\n            )\n    );\n}\n</code></pre>\n\n<p>The problem here is if the key does not exist in the map you are getting a <code>NullPointerException</code>. To prevent this you can use <code>map.getOrDefault()</code> with a default key:</p>\n\n<pre><code>public Map&lt;String, Map&lt;String, List&lt;Map&lt;String, String&gt;&gt;&gt;&gt; group(List&lt;Map&lt;String, String&gt;&gt; list, String key1, String key2, String noneKey) {\n    return list.stream().collect(\n            Collectors.groupingBy(m -&gt; m.getOrDefault(key1, noneKey),\n                    Collectors.groupingBy(m -&gt; m.getOrDefault(key2, noneKey))\n            )\n    );\n}\n</code></pre>\n\n<p>Call one of the methods with the following options:</p>\n\n<pre><code>Map&lt;String, Map&lt;String, List&lt;Map&lt;String, String&gt;&gt;&gt;&gt; result = group(list, \"a\", \"b\");\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>Map&lt;String, Map&lt;String, List&lt;Map&lt;String, String&gt;&gt;&gt;&gt; result = group(list, \"a\", \"b\", \"none\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676665045,"creation_date":1676665045,"answer_id":75488892,"question_id":55275129,"body_markdown":"You can use JSON library such as _Josson_ to do the transformation.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n    Josson josson = Josson.fromJsonString(\r\n        &quot;[&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;        \\&quot;a\\&quot;: \\&quot;German\\&quot;,&quot; +\r\n        &quot;        \\&quot;b\\&quot;: \\&quot;Audi\\&quot;,&quot; +\r\n        &quot;        \\&quot;e\\&quot;: \\&quot;T3\\&quot;&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;        \\&quot;a\\&quot;: \\&quot;German\\&quot;,&quot; +\r\n        &quot;        \\&quot;b\\&quot;: \\&quot;BMW\\&quot;,&quot; +\r\n        &quot;        \\&quot;c\\&quot;: \\&quot;T6\\&quot;&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;        \\&quot;a\\&quot;: \\&quot;American\\&quot;,&quot; +\r\n        &quot;        \\&quot;b\\&quot;: \\&quot;Tesla\\&quot;,&quot; +\r\n        &quot;        \\&quot;c\\&quot;: \\&quot;T6\\&quot;&quot; +\r\n        &quot;    }&quot; +\r\n        &quot;]&quot;);\r\n    JsonNode node = josson.getNode(\r\n        &quot;group(a).map(a::elements.group(b).map(b::elements).mergeObjects()).mergeObjects()&quot;);\r\n    System.out.println(node.toPrettyString());\r\n\r\n__Output__\r\n        \r\n    {\r\n      &quot;German&quot; : {\r\n        &quot;Audi&quot; : [ {\r\n          &quot;a&quot; : &quot;German&quot;,\r\n          &quot;b&quot; : &quot;Audi&quot;,\r\n          &quot;e&quot; : &quot;T3&quot;\r\n        } ],\r\n        &quot;BMW&quot; : [ {\r\n          &quot;a&quot; : &quot;German&quot;,\r\n          &quot;b&quot; : &quot;BMW&quot;,\r\n          &quot;c&quot; : &quot;T6&quot;\r\n        } ]\r\n      },\r\n      &quot;American&quot; : {\r\n        &quot;Tesla&quot; : [ {\r\n          &quot;a&quot; : &quot;American&quot;,\r\n          &quot;b&quot; : &quot;Tesla&quot;,\r\n          &quot;c&quot; : &quot;T6&quot;\r\n        } ]\r\n      }\r\n    }","title":"Group List of Map Data into Nested HashMap in Java","body":"<p>You can use JSON library such as <em>Josson</em> to do the transformation.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<pre><code>Josson josson = Josson.fromJsonString(\n    &quot;[&quot; +\n    &quot;    {&quot; +\n    &quot;        \\&quot;a\\&quot;: \\&quot;German\\&quot;,&quot; +\n    &quot;        \\&quot;b\\&quot;: \\&quot;Audi\\&quot;,&quot; +\n    &quot;        \\&quot;e\\&quot;: \\&quot;T3\\&quot;&quot; +\n    &quot;    },&quot; +\n    &quot;    {&quot; +\n    &quot;        \\&quot;a\\&quot;: \\&quot;German\\&quot;,&quot; +\n    &quot;        \\&quot;b\\&quot;: \\&quot;BMW\\&quot;,&quot; +\n    &quot;        \\&quot;c\\&quot;: \\&quot;T6\\&quot;&quot; +\n    &quot;    },&quot; +\n    &quot;    {&quot; +\n    &quot;        \\&quot;a\\&quot;: \\&quot;American\\&quot;,&quot; +\n    &quot;        \\&quot;b\\&quot;: \\&quot;Tesla\\&quot;,&quot; +\n    &quot;        \\&quot;c\\&quot;: \\&quot;T6\\&quot;&quot; +\n    &quot;    }&quot; +\n    &quot;]&quot;);\nJsonNode node = josson.getNode(\n    &quot;group(a).map(a::elements.group(b).map(b::elements).mergeObjects()).mergeObjects()&quot;);\nSystem.out.println(node.toPrettyString());\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>{\n  &quot;German&quot; : {\n    &quot;Audi&quot; : [ {\n      &quot;a&quot; : &quot;German&quot;,\n      &quot;b&quot; : &quot;Audi&quot;,\n      &quot;e&quot; : &quot;T3&quot;\n    } ],\n    &quot;BMW&quot; : [ {\n      &quot;a&quot; : &quot;German&quot;,\n      &quot;b&quot; : &quot;BMW&quot;,\n      &quot;c&quot; : &quot;T6&quot;\n    } ]\n  },\n  &quot;American&quot; : {\n    &quot;Tesla&quot; : [ {\n      &quot;a&quot; : &quot;American&quot;,\n      &quot;b&quot; : &quot;Tesla&quot;,\n      &quot;c&quot; : &quot;T6&quot;\n    } ]\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":314561,"reputation":6333,"user_id":629804,"accept_rate":70,"display_name":"Pradeep"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":812,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1676665045,"creation_date":1553150982,"question_id":55275129,"body_markdown":"Input: I have a list of Map (Key - Value pairs) and grouping keys\r\n\r\ne.g.`List&lt;Map&lt;String,String&gt;&gt; inputData` json\r\n\r\n    [\r\n     {\r\n        &#39;a&#39;: &#39;German&#39;,\r\n        &#39;b&#39;: &#39;Audi&#39;,\r\n        &#39;e&#39;: &#39;T3&#39;\r\n     },\r\n     {\r\n        &#39;a&#39;: &#39;German&#39;,\r\n        &#39;b&#39;: &#39;BMW&#39;,\r\n        &#39;c&#39;: &#39;T6&#39;\r\n     },\r\n     {\r\n        &#39;a&#39;: &#39;American&#39;,\r\n        &#39;b&#39;: &#39;Tesla&#39;,\r\n        &#39;c&#39;: &#39;T6&#39;\r\n     }\r\n    ]\r\n\r\nand groupingKeys= `a and b`\r\n\r\nFor Grouping key a -&gt; I will create two buckets, one for German and other American and in each bucket I will again create bucket for value of b, check following\r\n\r\nI want to produce following:  `Map&lt;String, Map&lt;String, List&lt;Map&gt;&gt;` - the nesting of maps  == number of grouping keys, here it&#39;s 2\r\n\r\n\r\n    {\r\n       German: {\r\n           Audi: [\r\n                {\r\n                   &#39;a&#39;: &#39;German&#39;,\r\n                   &#39;b&#39;: &#39;Audi&#39;,\r\n                   &#39;e&#39;: &#39;T3&#39;\r\n                }\r\n           ],\r\n           BMW: [\r\n                {\r\n                   &#39;a&#39;: &#39;German&#39;,\r\n                   &#39;b&#39;: &#39;BMW&#39;,\r\n                   &#39;c&#39;: &#39;T6&#39;\r\n                }\r\n           ]\r\n       },\r\n       American: {\r\n          Tesla: [\r\n              {\r\n                &#39;a&#39;: &#39;American&#39;,\r\n                &#39;b&#39;: &#39;Tesla&#39;,\r\n                &#39;c&#39;: &#39;T6&#39;\r\n              }\r\n          ]\r\n       }\r\n    }\r\n\r\nThings I tried:\r\n\r\n    inputData.stream().collect(Collectors.groupingBy(mapItem -&gt; this.constructGroupingKey(groupingKeys, mapItem)));\r\n\r\n    //constructGroupingKey - this joins the values of of given grouping keys\r\n\r\nThis way I can construct concatenated key e.g German-Audi OR German-BMW  and save the matching item against it but it&#39;s not what I want exactly.\r\n\r\nAs @Naman said here about concrete class - following makes it one liner but I can&#39;t make assumptions about data, it&#39;s of type Map&lt;String,String&gt;\r\n\r\n```Map&lt;String, Map&lt;String, List&lt;ConcreteClass&gt;&gt;&gt; output = inputData.stream().collect(Collectors.groupingBy(ConcreteClass::getCountry, Collectors.groupingBy(ConcreteClass::getCarType)));```\r\n\r\n\r\nWould appreciate other ideas, thanks. I am also curious if I can derive grouping based on given data without specification of grouping keys.\r\n\r\nInput is of dynamic nature, key and value are defined by the input","title":"Group List of Map Data into Nested HashMap in Java","body":"<p>Input: I have a list of Map (Key - Value pairs) and grouping keys</p>\n\n<p>e.g.<code>List&lt;Map&lt;String,String&gt;&gt; inputData</code> json</p>\n\n<pre><code>[\n {\n    'a': 'German',\n    'b': 'Audi',\n    'e': 'T3'\n },\n {\n    'a': 'German',\n    'b': 'BMW',\n    'c': 'T6'\n },\n {\n    'a': 'American',\n    'b': 'Tesla',\n    'c': 'T6'\n }\n]\n</code></pre>\n\n<p>and groupingKeys= <code>a and b</code></p>\n\n<p>For Grouping key a -> I will create two buckets, one for German and other American and in each bucket I will again create bucket for value of b, check following</p>\n\n<p>I want to produce following:  <code>Map&lt;String, Map&lt;String, List&lt;Map&gt;&gt;</code> - the nesting of maps  == number of grouping keys, here it's 2</p>\n\n<pre><code>{\n   German: {\n       Audi: [\n            {\n               'a': 'German',\n               'b': 'Audi',\n               'e': 'T3'\n            }\n       ],\n       BMW: [\n            {\n               'a': 'German',\n               'b': 'BMW',\n               'c': 'T6'\n            }\n       ]\n   },\n   American: {\n      Tesla: [\n          {\n            'a': 'American',\n            'b': 'Tesla',\n            'c': 'T6'\n          }\n      ]\n   }\n}\n</code></pre>\n\n<p>Things I tried:</p>\n\n<pre><code>inputData.stream().collect(Collectors.groupingBy(mapItem -&gt; this.constructGroupingKey(groupingKeys, mapItem)));\n\n//constructGroupingKey - this joins the values of of given grouping keys\n</code></pre>\n\n<p>This way I can construct concatenated key e.g German-Audi OR German-BMW  and save the matching item against it but it's not what I want exactly.</p>\n\n<p>As @Naman said here about concrete class - following makes it one liner but I can't make assumptions about data, it's of type Map</p>\n\n<p><code>Map&lt;String, Map&lt;String, List&lt;ConcreteClass&gt;&gt;&gt; output = inputData.stream().collect(Collectors.groupingBy(ConcreteClass::getCountry, Collectors.groupingBy(ConcreteClass::getCarType)));</code></p>\n\n<p>Would appreciate other ideas, thanks. I am also curious if I can derive grouping based on given data without specification of grouping keys.</p>\n\n<p>Input is of dynamic nature, key and value are defined by the input</p>\n"},{"tags":["java","c#","c++","last.fm"],"answers":[{"tags":[],"owner":{"account_id":10369,"reputation":42194,"user_id":19540,"display_name":"Lazarus"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1292945369,"creation_date":1292945369,"answer_id":4500883,"question_id":4500804,"body_markdown":"[Here&#39;s the Amazon API samples for C# SOAP/REST][1].\r\n\r\n\r\n  [1]: http://aws.amazon.com/code/Product-Advertising-API/2480","title":"Fetching album art, as JPEG, PNG etc","body":"<p><a href=\"http://aws.amazon.com/code/Product-Advertising-API/2480\" rel=\"nofollow\">Here's the Amazon API samples for C# SOAP/REST</a>.</p>\n"},{"tags":[],"owner":{"account_id":48334,"reputation":19092,"user_id":143585,"accept_rate":67,"display_name":"Denis Tulskiy"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1292946122,"creation_date":1292946122,"answer_id":4501009,"question_id":4500804,"body_markdown":"It shouldn&#39;t be very hard to do by hand. The last.fm api spec for [Album.getInfo][1] method is pretty straightforward and the fact that it is a REST api makes it even simpler. Just get the xml response from the server, parse it and get a url of the image. I wrote this code a while ago but it should still be working:\r\n\r\n                String request = &quot;http://ws.audioscrobbler.com/2.0/?method=&quot; + method +\r\n                        &quot;&amp;api_key=&quot;+apiKey;\r\n                request += &quot;&amp;artist=&quot; + artist.replaceAll(&quot; &quot;, &quot;%20&quot;);\r\n                if (method.equals(&quot;album.getinfo&quot;)) request += &quot;&amp;album=&quot; + album.replaceAll(&quot; &quot;, &quot;%20&quot;);\r\n                URL url = new URL(request);\r\n                InputStream is = url.openStream();\r\n                DocumentBuilder db = DocumentBuilderFactory.newInstance().newDocumentBuilder();\r\n                Document doc = db.parse(is);\r\n\r\n                NodeList nl = doc.getElementsByTagName(&quot;image&quot;);\r\n                for (int i = 0; i &lt; nl.getLength(); i++) {\r\n                    Node n = nl.item(i);\r\n                    if (n.getAttributes().item(0).getNodeValue().equals(imageSize)) {\r\n                        Node fc = n.getFirstChild();\r\n                        if (fc == null) return null;\r\n                        String imgUrl = fc.getNodeValue();\r\n                        if (imgUrl.trim().length() == 0) return null;\r\n                        return new ImageIcon(new URL(imgUrl));\r\n                    }\r\n                }\r\n\r\n\r\n  [1]: http://www.last.fm/api/show?service=290","title":"Fetching album art, as JPEG, PNG etc","body":"<p>It shouldn't be very hard to do by hand. The last.fm api spec for <a href=\"http://www.last.fm/api/show?service=290\" rel=\"nofollow\">Album.getInfo</a> method is pretty straightforward and the fact that it is a REST api makes it even simpler. Just get the xml response from the server, parse it and get a url of the image. I wrote this code a while ago but it should still be working:</p>\n\n<pre><code>            String request = \"http://ws.audioscrobbler.com/2.0/?method=\" + method +\n                    \"&amp;api_key=\"+apiKey;\n            request += \"&amp;artist=\" + artist.replaceAll(\" \", \"%20\");\n            if (method.equals(\"album.getinfo\")) request += \"&amp;album=\" + album.replaceAll(\" \", \"%20\");\n            URL url = new URL(request);\n            InputStream is = url.openStream();\n            DocumentBuilder db = DocumentBuilderFactory.newInstance().newDocumentBuilder();\n            Document doc = db.parse(is);\n\n            NodeList nl = doc.getElementsByTagName(\"image\");\n            for (int i = 0; i &lt; nl.getLength(); i++) {\n                Node n = nl.item(i);\n                if (n.getAttributes().item(0).getNodeValue().equals(imageSize)) {\n                    Node fc = n.getFirstChild();\n                    if (fc == null) return null;\n                    String imgUrl = fc.getNodeValue();\n                    if (imgUrl.trim().length() == 0) return null;\n                    return new ImageIcon(new URL(imgUrl));\n                }\n            }\n</code></pre>\n"}],"owner":{"account_id":59451,"reputation":4613,"user_id":177890,"accept_rate":53,"display_name":"Codevalley"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3744,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":4501009,"answer_count":2,"score":4,"last_activity_date":1676664975,"creation_date":1292944991,"question_id":4500804,"body_markdown":"Is there any simple Web API which returns album art as an image, just like the Google Static Map API ([Google Static Map API][1]? I have heard about Amazon&#39;s and Last.fm&#39;s APIs for this, but can&#39;t find any code for that (other than in web languages like PHP/Perl/Ruby etc). Moreover they are REST APIs.\r\nAny help would be appreciated.\r\n\r\nIs there a simple URL(GET) queries or are there only REST/XML methods?\r\n\r\n  [1]: http://code.google.com/apis/maps/documentation/staticmaps/","title":"Fetching album art, as JPEG, PNG etc","body":"<p>Is there any simple Web API which returns album art as an image, just like the Google Static Map API (<a href=\"http://code.google.com/apis/maps/documentation/staticmaps/\" rel=\"nofollow noreferrer\">Google Static Map API</a>? I have heard about Amazon's and Last.fm's APIs for this, but can't find any code for that (other than in web languages like PHP/Perl/Ruby etc). Moreover they are REST APIs.\nAny help would be appreciated.</p>\n<p>Is there a simple URL(GET) queries or are there only REST/XML methods?</p>\n"},{"tags":["java","google-app-engine","google-cloud-platform","google-cloud-firestore","google-cloud-datastore"],"answers":[{"tags":[],"owner":{"account_id":127461,"reputation":2848,"user_id":7644371,"display_name":"Jim Morrison"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676664354,"creation_date":1676664354,"answer_id":75488804,"question_id":75482851,"body_markdown":"You&#39;ll want to issue follow-up queries that pass a startCursor by using the endCursor from the previous query run (https://cloud.google.com/datastore/docs/samples/datastore-cursor-paging#datastore_cursor_paging-java).","title":"Can not query more than 1000 entities from datastore from my java application in google appengine","body":"<p>You'll want to issue follow-up queries that pass a startCursor by using the endCursor from the previous query run (<a href=\"https://cloud.google.com/datastore/docs/samples/datastore-cursor-paging#datastore_cursor_paging-java\" rel=\"nofollow noreferrer\">https://cloud.google.com/datastore/docs/samples/datastore-cursor-paging#datastore_cursor_paging-java</a>).</p>\n"}],"owner":{"account_id":27109900,"reputation":1,"user_id":20655199,"display_name":"Surya Sikha Rej"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676664607,"creation_date":1676628637,"question_id":75482851,"body_markdown":"I have a java8 appengine project and I need to query the datastore to get all the entities. But there is a limitation that I can only query 1000 entities at a time. My application need is that i need to get all the entities at once. I can not find any suitable way to do that.","title":"Can not query more than 1000 entities from datastore from my java application in google appengine","body":"<p>I have a java8 appengine project and I need to query the datastore to get all the entities. But there is a limitation that I can only query 1000 entities at a time. My application need is that i need to get all the entities at once. I can not find any suitable way to do that.</p>\n"},{"tags":["java","activemq-artemis","jmstemplate"],"comments":[{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1676561190,"post_id":75472477,"comment_id":133165290,"body_markdown":"What exactly is the problem you&#39;re trying to solve? Why is it a problem for the temporary addresses to show up in the web console?","body":"What exactly is the problem you&#39;re trying to solve? Why is it a problem for the temporary addresses to show up in the web console?"},{"owner":{"account_id":4165403,"reputation":878,"user_id":3414468,"accept_rate":50,"display_name":"Man&#231;aux Pierre-Alexandre"},"score":0,"creation_date":1676626243,"post_id":75472477,"comment_id":133179097,"body_markdown":"@JustinBertram My application work with about 30-40 queues, and possibly 1000 or more temp queues by day. Activemq standard don&#39;t show temp queue in web console so its easy to administer durable queue. We plan to migrate to Artemis, and during my simple test case i see that temp queue are by default showed in jolokia next to all other queue. And if i have 1000 or more temp queue, i need to scroll down very lont time to show queue that i want to see, after each refresh if scroll is  reinit. So i want to find a solution to regroup all temp queue in one folder like namespace or other solution.","body":"@JustinBertram My application work with about 30-40 queues, and possibly 1000 or more temp queues by day. Activemq standard don&#39;t show temp queue in web console so its easy to administer durable queue. We plan to migrate to Artemis, and during my simple test case i see that temp queue are by default showed in jolokia next to all other queue. And if i have 1000 or more temp queue, i need to scroll down very lont time to show queue that i want to see, after each refresh if scroll is  reinit. So i want to find a solution to regroup all temp queue in one folder like namespace or other solution."}],"answers":[{"tags":[],"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676652631,"creation_date":1676652631,"answer_id":75487092,"question_id":75472477,"body_markdown":"There are two main ways to deal with a large number of queues and problems with refreshing the JMX &quot;tree&quot; view.\r\n\r\n - Use the &quot;Queues&quot; tab to view the queues you&#39;re interested in rather than the JMX &quot;tree&quot; view. You can even filter out temporary queues, e.g.:\r\n[![enter image description here][1]][1]\r\n - Disable refresh of the JMX &quot;tree&quot; view via the &quot;Preferences&quot; available by clicking on the user icon in the top right of the web console, e.g.:\r\n[![enter image description here][2]][2]\r\n\r\nIt&#39;s worth noting that the `enable-metrics` only deals with [metrics as they are related to metrics plugins][3]. Setting this to `false` does _not_ disable their MBeans.\r\n\r\nIn the future the JMX &quot;tree&quot; like likely be removed from the web console due, in part, to the issues you&#39;re observing.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/cnpds.png\r\n  [2]: https://i.stack.imgur.com/CScQG.png\r\n  [3]: https://activemq.apache.org/components/artemis/documentation/latest/metrics.html","title":"ActiveMQ Artemis temp queue","body":"<p>There are two main ways to deal with a large number of queues and problems with refreshing the JMX &quot;tree&quot; view.</p>\n<ul>\n<li>Use the &quot;Queues&quot; tab to view the queues you're interested in rather than the JMX &quot;tree&quot; view. You can even filter out temporary queues, e.g.:\n<a href=\"https://i.stack.imgur.com/cnpds.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cnpds.png\" alt=\"enter image description here\" /></a></li>\n<li>Disable refresh of the JMX &quot;tree&quot; view via the &quot;Preferences&quot; available by clicking on the user icon in the top right of the web console, e.g.:\n<a href=\"https://i.stack.imgur.com/CScQG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CScQG.png\" alt=\"enter image description here\" /></a></li>\n</ul>\n<p>It's worth noting that the <code>enable-metrics</code> only deals with <a href=\"https://activemq.apache.org/components/artemis/documentation/latest/metrics.html\" rel=\"nofollow noreferrer\">metrics as they are related to metrics plugins</a>. Setting this to <code>false</code> does <em>not</em> disable their MBeans.</p>\n<p>In the future the JMX &quot;tree&quot; like likely be removed from the web console due, in part, to the issues you're observing.</p>\n"}],"owner":{"account_id":4165403,"reputation":878,"user_id":3414468,"accept_rate":50,"display_name":"Man&#231;aux Pierre-Alexandre"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75487092,"answer_count":1,"score":0,"last_activity_date":1676664405,"creation_date":1676551466,"question_id":75472477,"body_markdown":"I&#39;m using simple test project with Spring&#39;s JmsTemplate that sends synchronous messages with:\r\n```\r\njmsTemplate.sendAndReceive(...)\r\n```\r\nCode snippet of JmsTemplate to do this:\r\n```java\r\nMessage requestMessage = messageCreator.createMessage(session);\r\nresponseQueue = session.createTemporaryQueue();\r\nproducer = session.createProducer(destination);\r\nconsumer = session.createConsumer(responseQueue);\r\nrequestMessage.setJMSReplyTo(responseQueue);\r\nif (logger.isDebugEnabled()) {\r\n\tlogger.debug(&quot;Sending created message: &quot; + requestMessage);\r\n}\r\ndoSend(producer, requestMessage);\r\nreturn receiveFromConsumer(consumer, getReceiveTimeout());\r\n```\r\nAll work fine but when I&#39;m going to Jolokia console I can see all my temp queues at address level:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIn standard ActiveMQ console temporary queues are not shown (deleted?).\r\n\r\nBecause of my application use many synchronous message, list can grow up rapidly.\r\n\r\nI try to use  \r\n```xml\r\n&lt;temporary-queue-namespace&gt;temp&lt;/temporary-queue-namespace&gt; \r\n```\r\nwith \r\n```\r\n&lt;address-setting match=&quot;temp.#&quot;&gt;\r\n   &lt;enable-metrics&gt;false&lt;/enable-metrics&gt;\r\n&lt;/address-setting&gt;\r\n```\r\nBut my temp-queue are not under temp addresses...\r\n\r\nDoes it possible to don&#39;t show temp queue in console? (because when JmsTemplate has received response or time-out, consumer is closed and temp queue is marked as deleted).\r\n\r\nIf not, how can I regroup them into one addresses folder?\r\n\r\nor something else useful to achieve this.\r\n\r\nMy application work with about 30-40 queues, and possibly 1000 or more temp queues by day. ActiveMQ &quot;Classic&quot; doesn&#39;t show temp queue in web console so its easy to administer durable queue. We plan to migrate to Artemis, and during my simple test case I see that temp queue are by default shown in the web console next to all other queues, and if I have 1000 or more temp queues I need to scroll down a very long time to show the queues that I want to see. After each refresh the scroll is reinitialized. So i want to find a solution to regroup all temp queue in one folder like namespace or other solution.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vFq0o.png","title":"ActiveMQ Artemis temp queue","body":"<p>I'm using simple test project with Spring's JmsTemplate that sends synchronous messages with:</p>\n<pre><code>jmsTemplate.sendAndReceive(...)\n</code></pre>\n<p>Code snippet of JmsTemplate to do this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Message requestMessage = messageCreator.createMessage(session);\nresponseQueue = session.createTemporaryQueue();\nproducer = session.createProducer(destination);\nconsumer = session.createConsumer(responseQueue);\nrequestMessage.setJMSReplyTo(responseQueue);\nif (logger.isDebugEnabled()) {\n    logger.debug(&quot;Sending created message: &quot; + requestMessage);\n}\ndoSend(producer, requestMessage);\nreturn receiveFromConsumer(consumer, getReceiveTimeout());\n</code></pre>\n<p>All work fine but when I'm going to Jolokia console I can see all my temp queues at address level:</p>\n<p><a href=\"https://i.stack.imgur.com/vFq0o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vFq0o.png\" alt=\"enter image description here\" /></a></p>\n<p>In standard ActiveMQ console temporary queues are not shown (deleted?).</p>\n<p>Because of my application use many synchronous message, list can grow up rapidly.</p>\n<p>I try to use</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;temporary-queue-namespace&gt;temp&lt;/temporary-queue-namespace&gt; \n</code></pre>\n<p>with</p>\n<pre><code>&lt;address-setting match=&quot;temp.#&quot;&gt;\n   &lt;enable-metrics&gt;false&lt;/enable-metrics&gt;\n&lt;/address-setting&gt;\n</code></pre>\n<p>But my temp-queue are not under temp addresses...</p>\n<p>Does it possible to don't show temp queue in console? (because when JmsTemplate has received response or time-out, consumer is closed and temp queue is marked as deleted).</p>\n<p>If not, how can I regroup them into one addresses folder?</p>\n<p>or something else useful to achieve this.</p>\n<p>My application work with about 30-40 queues, and possibly 1000 or more temp queues by day. ActiveMQ &quot;Classic&quot; doesn't show temp queue in web console so its easy to administer durable queue. We plan to migrate to Artemis, and during my simple test case I see that temp queue are by default shown in the web console next to all other queues, and if I have 1000 or more temp queues I need to scroll down a very long time to show the queues that I want to see. After each refresh the scroll is reinitialized. So i want to find a solution to regroup all temp queue in one folder like namespace or other solution.</p>\n"},{"tags":["java","mongodb","datanucleus"],"comments":[{"owner":{"display_name":"user3973283"},"score":0,"creation_date":1523348615,"post_id":49741053,"comment_id":86511975,"body_markdown":"&quot;application defined identity&quot; is where you define your own &quot;objectIdClass&quot; that represents the defined primary key fields in the class. That is not what you are trying to do.","body":"&quot;application defined identity&quot; is where you define your own &quot;objectIdClass&quot; that represents the defined primary key fields in the class. That is not what you are trying to do."},{"owner":{"account_id":2633541,"reputation":11,"user_id":2278847,"display_name":"Nachintoch"},"score":0,"creation_date":1523403801,"post_id":49741053,"comment_id":86544224,"body_markdown":"Well its kinda weird, since Datanuclues recognizes the Key class as application identity; but indeed defining objectIdClass seems to have solved the problem around inheritance. I&#39;m doing some final tests to check if the system is succesfully reading and writting these classes into mongo. So far, we haven&#39;t had to define the objectIdClass in any class which doesn&#39;t involve inheritance, defining it on the Ticket (and other super classes) class was enough.","body":"Well its kinda weird, since Datanuclues recognizes the Key class as application identity; but indeed defining objectIdClass seems to have solved the problem around inheritance. I&#39;m doing some final tests to check if the system is succesfully reading and writting these classes into mongo. So far, we haven&#39;t had to define the objectIdClass in any class which doesn&#39;t involve inheritance, defining it on the Ticket (and other super classes) class was enough."},{"owner":{"display_name":"user3973283"},"score":0,"creation_date":1523432714,"post_id":49741053,"comment_id":86553635,"body_markdown":"If the only thing of value in `Key` is &quot;String id&quot; then you would be best served by using STANDARD JDO practice and just using that directly in the class that uses it. Hacking in some artificial class, for no obvious purpose, makes little sense (to me).","body":"If the only thing of value in <code>Key</code> is &quot;String id&quot; then you would be best served by using STANDARD JDO practice and just using that directly in the class that uses it. Hacking in some artificial class, for no obvious purpose, makes little sense (to me)."},{"owner":{"account_id":2633541,"reputation":11,"user_id":2278847,"display_name":"Nachintoch"},"score":0,"creation_date":1523514471,"post_id":49741053,"comment_id":86593744,"body_markdown":"@BillyFrost yes it does to me too; but this system has been in production for several years by now and we need to keep compatibility with previous versions of models and data. We need the &quot;overly complicated Key class&quot; because database keys are not constructed by the ID itself, it needs other components that don&#39;t need to be persisted but are easly manipulated on the Key class. That key class is not the original; its simplified. I&#39;m not posting my company&#39;s software code publicy. That makes little sense to me.","body":"@BillyFrost yes it does to me too; but this system has been in production for several years by now and we need to keep compatibility with previous versions of models and data. We need the &quot;overly complicated Key class&quot; because database keys are not constructed by the ID itself, it needs other components that don&#39;t need to be persisted but are easly manipulated on the Key class. That key class is not the original; its simplified. I&#39;m not posting my company&#39;s software code publicy. That makes little sense to me."}],"answers":[{"tags":[],"owner":{"account_id":2633541,"reputation":11,"user_id":2278847,"display_name":"Nachintoch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1523515284,"creation_date":1523515284,"answer_id":49789676,"question_id":49741053,"body_markdown":"I was not putting much attention to the settings around the objectIdClass metadata; since from the docs I got that they were intended for composed keys only. It results that if you define an objectId class with only one attribute; then it behaves as a custom SingleFieldId; which is what we wanted.\r\n\r\nI found &quot;funny&quot; the fact that non annotated (or non declared metadata for objectIdClass) classes will work fine and the custom key used will be threated just fine; but once you make any of them a super class, then you are obligated to add the objectIdClass metadata.\r\n\r\nBeside annotating the Ticket class (and all other super classes) with objectIdClass, we:\r\n\r\n - Removed the toString and hashCode attributes from the Key class (@NotPersistent and transient keyword won&#39;t make Datanucleus ignore them; so I guess there is no performance improvement for toString() and hashCode() methods on custom keys right now).\r\n - Removed all the *final* qualifiers from the Key class attributes (Datanucleus docs don&#39;t say that custom key fields cannot be final; but guess what, they can&#39;t be)\r\n - Changed the *Key key* class member from all superclass for *String id* (as in the key class). We also had to change the implementation of the getters and setters for the id member; using the required string constructor of the key class to build the key when calling the method. Of course, the &quot;key&quot; field declared in the package-mongo.orm was changed to *id* in the super classes.\r\n \r\nAnd that was it! with those little changes our system is working great; no other changed were required on other persistable classes nor DAOs.","title":"Exception when retrieving items modeled by inheritance classes from MongoDB using Datanucleus","body":"<p>I was not putting much attention to the settings around the objectIdClass metadata; since from the docs I got that they were intended for composed keys only. It results that if you define an objectId class with only one attribute; then it behaves as a custom SingleFieldId; which is what we wanted.</p>\n\n<p>I found \"funny\" the fact that non annotated (or non declared metadata for objectIdClass) classes will work fine and the custom key used will be threated just fine; but once you make any of them a super class, then you are obligated to add the objectIdClass metadata.</p>\n\n<p>Beside annotating the Ticket class (and all other super classes) with objectIdClass, we:</p>\n\n<ul>\n<li>Removed the toString and hashCode attributes from the Key class (@NotPersistent and transient keyword won't make Datanucleus ignore them; so I guess there is no performance improvement for toString() and hashCode() methods on custom keys right now).</li>\n<li>Removed all the <em>final</em> qualifiers from the Key class attributes (Datanucleus docs don't say that custom key fields cannot be final; but guess what, they can't be)</li>\n<li>Changed the <em>Key key</em> class member from all superclass for <em>String id</em> (as in the key class). We also had to change the implementation of the getters and setters for the id member; using the required string constructor of the key class to build the key when calling the method. Of course, the \"key\" field declared in the package-mongo.orm was changed to <em>id</em> in the super classes.</li>\n</ul>\n\n<p>And that was it! with those little changes our system is working great; no other changed were required on other persistable classes nor DAOs.</p>\n"}],"owner":{"account_id":2633541,"reputation":11,"user_id":2278847,"display_name":"Nachintoch"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":455,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":49789676,"answer_count":1,"score":1,"last_activity_date":1676664131,"creation_date":1523305069,"question_id":49741053,"body_markdown":"me and my team are working on an upgrade of our company&#39;s system which as getting kind of forgotten and was running old versions of everything it uses; so developing newer features was becoming a pain with newer and unsupported technologies.\r\n\r\nSo far we have managed to produce an almost fully working version of the system; but we got stuck at a feature which involves Datanucleus-JDO, MongoDB and inheritance.\r\n\r\nWe have some models which are tremendously similar (from the code&#39;s perspective). In the current in-production version, to apply a change to it usually involves to rewrite the same piece of code in all classes, so we thought that inheritance would make the job easier and better. So we have two interfaces at the top hierarchy level (which as far we know, Datanuclues nor MongoDB doesn&#39;t care about them at all); which go like this:\r\n\r\n    public interface Entity extends Serializable {\r\n    \r\n    \tString getDate();\r\n    \tdouble getQty();\r\n    \tvoid setQty(double qty);\r\n    \tvoid setDate(String date);\r\n    \tvoid setKey(Key key);\r\n    \t\r\n    }\r\n\r\nAnd\r\n\r\n    public interface HourEntity extends Entity {\r\n    \r\n    \tString getHour();\r\n    \t\r\n    }\r\n\r\nWe use application defined keys, we use this unique class to build different kind of keys. We only want the toString representation of this class to store and retrieve data in Mongo.\r\n\r\n    public final class Key implements Serializable {\r\n\t    static final long serialVersionUID = -448150158203091507L;\r\n        public final String targetClassName;\r\n        public final String id;\r\n        public final String toString;\r\n        public final int hashCode;\r\n\t\r\n        public Key() {\r\n\t\t    targetClassName = null;\r\n\t\t    id = null;\r\n    \t\ttoString = null;\r\n    \t\thashCode = -1;\r\n    \t}\r\n\t\r\n        public Key(String str) {\r\n\t    \tString[] parts = str.split(&quot;\\\\(&quot;);\r\n\t    \tparts[1] = parts[1].replaceAll(&quot;\\\\)&quot;, &quot; &quot;);\r\n\t    \tparts[1] = parts[1].replace(&quot;\\&quot;&quot;, &quot; &quot;);\r\n\t    \tparts[1] = parts[1].trim();\r\n\t    \tthis.targetClassName = parts[0];\r\n\t    \tthis.id = parts[1];\r\n\t    \ttoString = this.toString();\r\n\t    \thashCode = this.hashCode();\r\n\t    }\r\n\r\n        public Key(String classCollectionName, String id) {\r\n\t\t    if (StringUtils.isEmpty(classCollectionName)) {\r\n    \t\t\tthrow new IllegalArgumentException(&quot;No collection/class name specified.&quot;);\r\n\t    \t}\r\n\t    \tif (id == null) {\r\n\t    \t\tthrow new IllegalArgumentException(&quot;ID cannot be null&quot;);\r\n\t\t    }\r\n\t    \ttargetClassName = classCollectionName;\r\n\t    \tthis.id = id;\r\n\t    \ttoString = this.toString();\r\n\t    \thashCode = this.hashCode();\r\n\t    }\r\n\r\n        public String getTargetClassName() {\r\n\t\t    return targetClassName;\r\n\t    }\r\n\r\n        public int hashCode() {\r\n\t    \tif(hashCode != -1) return hashCode; \r\n\t    \tint prime = 31;\r\n\t\t    int result = 1;\r\n\t\t    result = prime * result + (id != null ? id.hashCode() : 0);\r\n\t\t    result = prime * result + (targetClassName != null ? targetClassName.hashCode() : 0);\r\n\t\t    return result;\r\n\t    }\r\n\r\n        public boolean equals(Object object) {\r\n\t\tif (object instanceof Key) {\r\n\t\t\tKey key = (Key) object;\r\n\t\t\tif (this == key)\r\n\t\t\t\treturn true;\r\n\t\t\treturn targetClassName.equals(key.targetClassName) &amp;&amp; Objects.equals(id, key.id);\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n        public String toString() {\r\n\t\t    if(toString != null) return toString;\r\n\t\t    StringBuilder buffer = new StringBuilder();\r\n\t\t    buffer.append(targetClassName);\r\n\t\t     buffer.append(&quot;(&quot;);\r\n\t\t    if (id != null) {\r\n\t\t    \tbuffer.append((new StringBuilder()).append(&quot;\\&quot;&quot;).append(id)\r\n\t\t    \t\t\t.append(&quot;\\&quot;&quot;).toString());\r\n\t\t    } else {\r\n\t\t     \tbuffer.append(&quot;no-id-yet&quot;);\r\n\t    \t}\r\n\t    \tbuffer.append(&quot;)&quot;);\r\n\t\t    return buffer.toString();\r\n\t    }\r\n\r\n    }\r\n\r\nThis application defined identity is working fine on all other models which does not involve inheritance.\r\n\r\nThis is one of the actual models that we intend to store in our datastore:\r\n\r\n    @PersistenceCapable(detachable=&quot;true&quot;)\r\n    @Inheritance(strategy=InheritanceStrategy.COMPLETE_TABLE)\r\n    public class Ticket implements Entity {\r\n    \r\n    \t@PrimaryKey\r\n        @Persistent(valueStrategy = IdGeneratorStrategy.UNSPECIFIED, column=&quot;_id&quot;)\r\n    \tprotected Key key;\r\n    \r\n    \tprotected String date;\r\n    \tprotected int qty;\r\n    \t\r\n    \tpublic Ticket() {\r\n    \t\tthis.qty = 0;\r\n    \t}\r\n    \t\r\n    \tpublic Key getKey() {\r\n    \t\treturn key;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void setKey(Key key) {\r\n    \t\tthis.key = key;\r\n    \t}\r\n    \r\n    \tpublic double getQty() {\r\n    \t\treturn qty;\r\n    \t}\r\n    \r\n    \tpublic void setQty(double qty) {\r\n    \t\tthis.qty = (int) qty;\r\n    \t}\r\n    \r\n    \tpublic String getDate() {\r\n    \t\treturn date;\r\n    \t}\r\n    \r\n    \tpublic void setDate(String date) {\r\n    \t\tthis.date = date;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic int hashCode() {\r\n    \t\tfinal int prime = 31;\r\n    \t\tint result = 1;\r\n    \t\tresult = prime * result + ((key == null) ? 0 : key.hashCode());\r\n    \t\treturn result;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean equals(Object obj) {\r\n    \t\tif (this == obj)\r\n    \t\t\treturn true;\r\n    \t\tif (obj == null)\r\n    \t\t\treturn false;\r\n    \t\tif (getClass() != obj.getClass())\r\n    \t\t\treturn false;\r\n    \t\tTicket other = (Ticket) obj;\r\n    \t\tif (key == null) {\r\n    \t\t\tif (other.key != null)\r\n    \t\t\t\treturn false;\r\n    \t\t} else if (!key.equals(other.key))\r\n    \t\t\treturn false;\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn &quot;Ticket [key=&quot; + key + &quot;, date=&quot; + date + &quot;, qty=&quot;\r\n    \t\t\t\t+ qty + &quot;]&quot;;\r\n    \t}\r\n    \r\n    }\r\n\r\nAnd this is its subclass (all models which involve this problem just involve one super class and only one children per every super class):\r\n\r\n    @PersistenceCapable(detachable=&quot;true&quot;)\r\n    @Inheritance(strategy=InheritanceStrategy.COMPLETE_TABLE)\r\n    public class HourTicket extends Ticket implements HourEntity {\r\n    \r\n    \tprivate String hour;\r\n    \t\r\n    \tpublic HourTicket() {\r\n    \t\tsuper();\r\n    \t}\r\n    \t\r\n    \tpublic Key getKey() {\r\n    \t\treturn key;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void setKey(Key key) {\r\n    \t\tthis.key = key;\r\n    \t}\r\n    \r\n    \tpublic String getHour() {\r\n    \t\treturn hour;\r\n    \t}\r\n    \r\n    \tpublic void setHour(String hour) {\r\n    \t\tthis.hour = hour;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic int hashCode() {\r\n    \t\tfinal int prime = 31;\r\n    \t\tint result = 1;\r\n    \t\tresult = prime * result + ((key == null) ? 0 : key.hashCode());\r\n    \t\treturn result;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean equals(Object obj) {\r\n    \t\tif (this == obj)\r\n    \t\t\treturn true;\r\n    \t\tif (obj == null)\r\n    \t\t\treturn false;\r\n    \t\tif (getClass() != obj.getClass())\r\n    \t\t\treturn false;\r\n    \t\tHourTicket other = (HourTicket) obj;\r\n    \t\tif (key == null) {\r\n    \t\t\tif (other.key != null)\r\n    \t\t\t\treturn false;\r\n    \t\t} else if (!key.equals(other.key))\r\n    \t\t\treturn false;\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn &quot;HourTicket [key=&quot; + key + &quot;, date=&quot; + date\r\n    \t\t\t\t+ &quot;, hour=&quot; + hour + &quot;, qty=&quot; + qty + &quot;]&quot;;\r\n    \t}\r\n    \r\n    }\r\n\r\nFinally, the persisntance.xml is like this\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n    &lt;persistence xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot;\r\n        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n        xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence\r\n            http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot; version=&quot;2.0&quot;&gt;\r\n    \r\n        &lt;!-- JOSAdmin &quot;unit&quot; --&gt;\r\n        &lt;persistence-unit name=&quot;ourdatastore&quot;&gt;\r\n            &lt;class&gt;mx.ourdomain.Ticket&lt;/class&gt;\r\n            &lt;class&gt;mx.ourdomain.HourTicket&lt;/class&gt;\r\n            &lt;exclude-unlisted-classes/&gt;\r\n    \r\n        &lt;/persistence-unit&gt;\r\n    &lt;/persistence&gt;\r\n\r\nAnd package-mongo.orm\r\n\r\n    &lt;?xml version=&quot;1.0&quot;?&gt;\r\n    &lt;!DOCTYPE orm SYSTEM &quot;file:/javax/jdo/orm.dtd&quot;&gt;\r\n    &lt;orm&gt;\r\n        &lt;package name=&quot;mx.ourdomain&quot; &gt;\r\n            &lt;class name=&quot;Ticket&quot; table=&quot;Ticket&quot;&gt;\r\n                &lt;field name=&quot;key&quot; primary-key=&quot;true&quot; &gt;\r\n                \t&lt;column name=&quot;_id&quot; length=&quot;100&quot; /&gt;\r\n                &lt;/field &gt;\r\n            &lt;/class&gt;\r\n    \r\n            &lt;class name=&quot;HourTicket&quot; table=&quot;HourTicket&quot;&gt;\r\n                &lt;primary-key &gt;\r\n                    &lt;column name=&quot;_id&quot; target=&quot;_id&quot; /&gt;\r\n                &lt;/primary-key&gt;\r\n            &lt;/class&gt;\r\n         &lt;/package&gt;\r\n    &lt;/orm&gt;\r\n\r\nSo, the problems comes when trying to perform any read or write operations using either the super class or the subclass. This has happened with the same exact results in several (all possible as far we know) scenarios, but the test scenario we are study begins with this call:\r\n\r\n    Ticket ticket = persistenceManager.getObjectById(Ticket.class, key);\r\n\r\nThe key is generated with an standard procedure which is used by other models which do store and read successfully; and of course, it is of the previously shown key class.\r\n\r\nWe have gone as far as debugging the datanucleus tasks beyond this. And we have found that as expected:\r\n\r\n 1. The metadata shows that its the super class of others.\r\n 2. Its using application managed keys.\r\n\r\nBut when trying to get the class name to determine which is the correct Mongo collection to query, datanucleus-mongodb tries to query both classes (Ticket and HourTicket); but then it handles to the mongo driver the **key** object *perse*, and then a **CodecConfigurationException** is thrown since mongo does not know how to work with the key class (when building the query, datanucleus-mongo creates a BasicDBObject which has the structure {_id:key}, which cannot be constructed without the codec because of the **key** entry. This happens at the MongoDBUtils class in the datanucleus-mongodb project v5.1.0; class MongoDBUtils, method getClassNameForIdentity(Object, AbstractClassMetaData, ExecutionContext, ClassLoaderResolver)).\r\n\r\nSo, we suppose that we have some configuration missing to tell datanucleus that it should use the toString() form of the key; since the Monogo driver handles String just fine (datanuclues docs actually states that when using custom classes as datastore keys it will use the toString() form of the key; so I&#39;m unsure if this could be a bug).\r\n\r\nWe have tried to use a KeyTraslator plugin and making the key class a DatastoreId and wrapping in a StringId with no success: the same exception is fired, except when wrapping the Key class in a StringId: the mongo lecture is sucessful but then when trying to build the model object, an ClassCastException is thrown since String cannot be casted into Key, and refactoring the code to use a String key will badly break data already in database; since it has a special format the key class can read and produce.\r\n\r\nIs there something we are missing using inheritance with datanucleus JDO w/mongoDB?","title":"Exception when retrieving items modeled by inheritance classes from MongoDB using Datanucleus","body":"<p>me and my team are working on an upgrade of our company's system which as getting kind of forgotten and was running old versions of everything it uses; so developing newer features was becoming a pain with newer and unsupported technologies.</p>\n<p>So far we have managed to produce an almost fully working version of the system; but we got stuck at a feature which involves Datanucleus-JDO, MongoDB and inheritance.</p>\n<p>We have some models which are tremendously similar (from the code's perspective). In the current in-production version, to apply a change to it usually involves to rewrite the same piece of code in all classes, so we thought that inheritance would make the job easier and better. So we have two interfaces at the top hierarchy level (which as far we know, Datanuclues nor MongoDB doesn't care about them at all); which go like this:</p>\n<pre><code>public interface Entity extends Serializable {\n\n    String getDate();\n    double getQty();\n    void setQty(double qty);\n    void setDate(String date);\n    void setKey(Key key);\n    \n}\n</code></pre>\n<p>And</p>\n<pre><code>public interface HourEntity extends Entity {\n\n    String getHour();\n    \n}\n</code></pre>\n<p>We use application defined keys, we use this unique class to build different kind of keys. We only want the toString representation of this class to store and retrieve data in Mongo.</p>\n<pre><code>public final class Key implements Serializable {\n    static final long serialVersionUID = -448150158203091507L;\n    public final String targetClassName;\n    public final String id;\n    public final String toString;\n    public final int hashCode;\n\n    public Key() {\n        targetClassName = null;\n        id = null;\n        toString = null;\n        hashCode = -1;\n    }\n\n    public Key(String str) {\n        String[] parts = str.split(&quot;\\\\(&quot;);\n        parts[1] = parts[1].replaceAll(&quot;\\\\)&quot;, &quot; &quot;);\n        parts[1] = parts[1].replace(&quot;\\&quot;&quot;, &quot; &quot;);\n        parts[1] = parts[1].trim();\n        this.targetClassName = parts[0];\n        this.id = parts[1];\n        toString = this.toString();\n        hashCode = this.hashCode();\n    }\n\n    public Key(String classCollectionName, String id) {\n        if (StringUtils.isEmpty(classCollectionName)) {\n            throw new IllegalArgumentException(&quot;No collection/class name specified.&quot;);\n        }\n        if (id == null) {\n            throw new IllegalArgumentException(&quot;ID cannot be null&quot;);\n        }\n        targetClassName = classCollectionName;\n        this.id = id;\n        toString = this.toString();\n        hashCode = this.hashCode();\n    }\n\n    public String getTargetClassName() {\n        return targetClassName;\n    }\n\n    public int hashCode() {\n        if(hashCode != -1) return hashCode; \n        int prime = 31;\n        int result = 1;\n        result = prime * result + (id != null ? id.hashCode() : 0);\n        result = prime * result + (targetClassName != null ? targetClassName.hashCode() : 0);\n        return result;\n    }\n\n    public boolean equals(Object object) {\n    if (object instanceof Key) {\n        Key key = (Key) object;\n        if (this == key)\n            return true;\n        return targetClassName.equals(key.targetClassName) &amp;&amp; Objects.equals(id, key.id);\n    } else {\n        return false;\n    }\n}\n\n    public String toString() {\n        if(toString != null) return toString;\n        StringBuilder buffer = new StringBuilder();\n        buffer.append(targetClassName);\n         buffer.append(&quot;(&quot;);\n        if (id != null) {\n            buffer.append((new StringBuilder()).append(&quot;\\&quot;&quot;).append(id)\n                    .append(&quot;\\&quot;&quot;).toString());\n        } else {\n            buffer.append(&quot;no-id-yet&quot;);\n        }\n        buffer.append(&quot;)&quot;);\n        return buffer.toString();\n    }\n\n}\n</code></pre>\n<p>This application defined identity is working fine on all other models which does not involve inheritance.</p>\n<p>This is one of the actual models that we intend to store in our datastore:</p>\n<pre><code>@PersistenceCapable(detachable=&quot;true&quot;)\n@Inheritance(strategy=InheritanceStrategy.COMPLETE_TABLE)\npublic class Ticket implements Entity {\n\n    @PrimaryKey\n    @Persistent(valueStrategy = IdGeneratorStrategy.UNSPECIFIED, column=&quot;_id&quot;)\n    protected Key key;\n\n    protected String date;\n    protected int qty;\n    \n    public Ticket() {\n        this.qty = 0;\n    }\n    \n    public Key getKey() {\n        return key;\n    }\n\n    @Override\n    public void setKey(Key key) {\n        this.key = key;\n    }\n\n    public double getQty() {\n        return qty;\n    }\n\n    public void setQty(double qty) {\n        this.qty = (int) qty;\n    }\n\n    public String getDate() {\n        return date;\n    }\n\n    public void setDate(String date) {\n        this.date = date;\n    }\n\n    @Override\n    public int hashCode() {\n        final int prime = 31;\n        int result = 1;\n        result = prime * result + ((key == null) ? 0 : key.hashCode());\n        return result;\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        if (this == obj)\n            return true;\n        if (obj == null)\n            return false;\n        if (getClass() != obj.getClass())\n            return false;\n        Ticket other = (Ticket) obj;\n        if (key == null) {\n            if (other.key != null)\n                return false;\n        } else if (!key.equals(other.key))\n            return false;\n        return true;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Ticket [key=&quot; + key + &quot;, date=&quot; + date + &quot;, qty=&quot;\n                + qty + &quot;]&quot;;\n    }\n\n}\n</code></pre>\n<p>And this is its subclass (all models which involve this problem just involve one super class and only one children per every super class):</p>\n<pre><code>@PersistenceCapable(detachable=&quot;true&quot;)\n@Inheritance(strategy=InheritanceStrategy.COMPLETE_TABLE)\npublic class HourTicket extends Ticket implements HourEntity {\n\n    private String hour;\n    \n    public HourTicket() {\n        super();\n    }\n    \n    public Key getKey() {\n        return key;\n    }\n\n    @Override\n    public void setKey(Key key) {\n        this.key = key;\n    }\n\n    public String getHour() {\n        return hour;\n    }\n\n    public void setHour(String hour) {\n        this.hour = hour;\n    }\n\n    @Override\n    public int hashCode() {\n        final int prime = 31;\n        int result = 1;\n        result = prime * result + ((key == null) ? 0 : key.hashCode());\n        return result;\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        if (this == obj)\n            return true;\n        if (obj == null)\n            return false;\n        if (getClass() != obj.getClass())\n            return false;\n        HourTicket other = (HourTicket) obj;\n        if (key == null) {\n            if (other.key != null)\n                return false;\n        } else if (!key.equals(other.key))\n            return false;\n        return true;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;HourTicket [key=&quot; + key + &quot;, date=&quot; + date\n                + &quot;, hour=&quot; + hour + &quot;, qty=&quot; + qty + &quot;]&quot;;\n    }\n\n}\n</code></pre>\n<p>Finally, the persisntance.xml is like this</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\n&lt;persistence xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence\n        http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot; version=&quot;2.0&quot;&gt;\n\n    &lt;!-- JOSAdmin &quot;unit&quot; --&gt;\n    &lt;persistence-unit name=&quot;ourdatastore&quot;&gt;\n        &lt;class&gt;mx.ourdomain.Ticket&lt;/class&gt;\n        &lt;class&gt;mx.ourdomain.HourTicket&lt;/class&gt;\n        &lt;exclude-unlisted-classes/&gt;\n\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<p>And package-mongo.orm</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;\n&lt;!DOCTYPE orm SYSTEM &quot;file:/javax/jdo/orm.dtd&quot;&gt;\n&lt;orm&gt;\n    &lt;package name=&quot;mx.ourdomain&quot; &gt;\n        &lt;class name=&quot;Ticket&quot; table=&quot;Ticket&quot;&gt;\n            &lt;field name=&quot;key&quot; primary-key=&quot;true&quot; &gt;\n                &lt;column name=&quot;_id&quot; length=&quot;100&quot; /&gt;\n            &lt;/field &gt;\n        &lt;/class&gt;\n\n        &lt;class name=&quot;HourTicket&quot; table=&quot;HourTicket&quot;&gt;\n            &lt;primary-key &gt;\n                &lt;column name=&quot;_id&quot; target=&quot;_id&quot; /&gt;\n            &lt;/primary-key&gt;\n        &lt;/class&gt;\n     &lt;/package&gt;\n&lt;/orm&gt;\n</code></pre>\n<p>So, the problems comes when trying to perform any read or write operations using either the super class or the subclass. This has happened with the same exact results in several (all possible as far we know) scenarios, but the test scenario we are study begins with this call:</p>\n<pre><code>Ticket ticket = persistenceManager.getObjectById(Ticket.class, key);\n</code></pre>\n<p>The key is generated with an standard procedure which is used by other models which do store and read successfully; and of course, it is of the previously shown key class.</p>\n<p>We have gone as far as debugging the datanucleus tasks beyond this. And we have found that as expected:</p>\n<ol>\n<li>The metadata shows that its the super class of others.</li>\n<li>Its using application managed keys.</li>\n</ol>\n<p>But when trying to get the class name to determine which is the correct Mongo collection to query, datanucleus-mongodb tries to query both classes (Ticket and HourTicket); but then it handles to the mongo driver the <strong>key</strong> object <em>perse</em>, and then a <strong>CodecConfigurationException</strong> is thrown since mongo does not know how to work with the key class (when building the query, datanucleus-mongo creates a BasicDBObject which has the structure {_id:key}, which cannot be constructed without the codec because of the <strong>key</strong> entry. This happens at the MongoDBUtils class in the datanucleus-mongodb project v5.1.0; class MongoDBUtils, method getClassNameForIdentity(Object, AbstractClassMetaData, ExecutionContext, ClassLoaderResolver)).</p>\n<p>So, we suppose that we have some configuration missing to tell datanucleus that it should use the toString() form of the key; since the Monogo driver handles String just fine (datanuclues docs actually states that when using custom classes as datastore keys it will use the toString() form of the key; so I'm unsure if this could be a bug).</p>\n<p>We have tried to use a KeyTraslator plugin and making the key class a DatastoreId and wrapping in a StringId with no success: the same exception is fired, except when wrapping the Key class in a StringId: the mongo lecture is sucessful but then when trying to build the model object, an ClassCastException is thrown since String cannot be casted into Key, and refactoring the code to use a String key will badly break data already in database; since it has a special format the key class can read and produce.</p>\n<p>Is there something we are missing using inheritance with datanucleus JDO w/mongoDB?</p>\n"},{"tags":["java","xml","xml-namespaces","canonicalization"],"comments":[{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1667257841,"post_id":74269085,"comment_id":131122958,"body_markdown":"Should `CanonicalizationMethod.EXCLUSIVE_WITH_COMMENTS` be used instead of prefix rewriting?","body":"Should <code>CanonicalizationMethod.EXCLUSIVE_WITH_COMMENTS</code> be used instead of prefix rewriting?"},{"owner":{"account_id":25663694,"reputation":1,"user_id":20382574,"display_name":"Boris"},"score":0,"creation_date":1667430512,"post_id":74269085,"comment_id":131168497,"body_markdown":"Unfortunately, that option doesn&#39;t preserve namespace prefixes.","body":"Unfortunately, that option doesn&#39;t preserve namespace prefixes."}],"answers":[{"tags":[],"owner":{"account_id":2246934,"reputation":11,"user_id":1980074,"display_name":"Asdef"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676664071,"creation_date":1676664071,"answer_id":75488762,"question_id":74269085,"body_markdown":"That python library c14n2py was written from sources of Java library, that lies nearby: `https://github.com/dept2/c14n2`\r\nYou could try to use it","title":"Namespace prefix rewriting for XML cononicalization in Java?","body":"<p>That python library c14n2py was written from sources of Java library, that lies nearby: <code>https://github.com/dept2/c14n2</code>\nYou could try to use it</p>\n"}],"owner":{"account_id":25663694,"reputation":1,"user_id":20382574,"display_name":"Boris"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676664071,"creation_date":1667250155,"question_id":74269085,"body_markdown":"I&#39;m trying to 1) compute the digital signature for an XML string, 2) unmarshall the XML string to a Java object, 3) marshall the object back to an XML string, and 4) re-compute signature, and verify against the signature from step 1.\r\n\r\nProblem is that the namespace prefixes usually get changed during the round trip (steps 2-3), so I need a way to standardize them before and after the round trip. Otherwise, the digital signatures (steps 1 and 4) obviously won&#39;t match.\r\n\r\nI figured I need something like **PrefixRewrite=&quot;sequential&quot;** in section 2.5.4 of `https://www.w3.org/TR/xml-c14n2/Overview_diff.html#sec-Example-PrefixRewriteSeq`. I found a Python library that supposedly does that (`https://github.com/dept2/c14n2py`), but I can&#39;t seem to find a Java library with that option (org.apache.xml.security.c14n.Canonicalizer doesn&#39;t have it). I&#39;ve also been able to hard-code the namespace prefixes in my marshaller, but that&#39;s not an acceptable solution for me.\r\n\r\nCan anybody recommend a Java library for XML canonicalization with the PrefixRewrite=&quot;sequential&quot; option?\r\n\r\nThanks!!\r\n\r\n","title":"Namespace prefix rewriting for XML cononicalization in Java?","body":"<p>I'm trying to 1) compute the digital signature for an XML string, 2) unmarshall the XML string to a Java object, 3) marshall the object back to an XML string, and 4) re-compute signature, and verify against the signature from step 1.</p>\n<p>Problem is that the namespace prefixes usually get changed during the round trip (steps 2-3), so I need a way to standardize them before and after the round trip. Otherwise, the digital signatures (steps 1 and 4) obviously won't match.</p>\n<p>I figured I need something like <strong>PrefixRewrite=&quot;sequential&quot;</strong> in section 2.5.4 of <code>https://www.w3.org/TR/xml-c14n2/Overview_diff.html#sec-Example-PrefixRewriteSeq</code>. I found a Python library that supposedly does that (<code>https://github.com/dept2/c14n2py</code>), but I can't seem to find a Java library with that option (org.apache.xml.security.c14n.Canonicalizer doesn't have it). I've also been able to hard-code the namespace prefixes in my marshaller, but that's not an acceptable solution for me.</p>\n<p>Can anybody recommend a Java library for XML canonicalization with the PrefixRewrite=&quot;sequential&quot; option?</p>\n<p>Thanks!!</p>\n"},{"tags":["java","syntax","protocol-buffers"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1676534239,"post_id":75469231,"comment_id":133156907,"body_markdown":"Why can&#39;t you use a for loop? You might have to split your statement but I don&#39;t see anything that prevents you from using a loop (I&#39;m no expert on protobuf though, so I might miss something)","body":"Why can&#39;t you use a for loop? You might have to split your statement but I don&#39;t see anything that prevents you from using a loop (I&#39;m no expert on protobuf though, so I might miss something)"},{"owner":{"account_id":16482287,"reputation":558,"user_id":11908728,"display_name":"8bit"},"score":0,"creation_date":1676534592,"post_id":75469231,"comment_id":133156990,"body_markdown":"Is there a request.foreach() Method? Teen you could use request.foreach().getTextDataFields(0)","body":"Is there a request.foreach() Method? Teen you could use request.foreach().getTextDataFields(0)"}],"answers":[{"tags":[],"owner":{"account_id":10088138,"reputation":55,"user_id":7533628,"display_name":"Erin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676663820,"creation_date":1676663820,"answer_id":75488738,"question_id":75469231,"body_markdown":"As it turned out, I can simply use the &quot;add all&quot; function from Protobuf\r\n\r\n```\r\nrequest.getTextData(0)\r\n       .toBuilder()\r\n       .addAllTextDataFields(request.getTextDataFieldsList())\r\n       .build()\r\n```","title":"Java - How to assign a list of values to a repeated protobuf field without for loop?","body":"<p>As it turned out, I can simply use the &quot;add all&quot; function from Protobuf</p>\n<pre><code>request.getTextData(0)\n       .toBuilder()\n       .addAllTextDataFields(request.getTextDataFieldsList())\n       .build()\n</code></pre>\n"}],"owner":{"account_id":10088138,"reputation":55,"user_id":7533628,"display_name":"Erin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":569,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75488738,"answer_count":1,"score":1,"last_activity_date":1676663820,"creation_date":1676533849,"question_id":75469231,"body_markdown":"Suppose `TextData` and `TextDataFields` are two protobuf messages, but `TextDataFields` is also a repeated field interleaved in `TextData`[^1]\r\n\r\nThis current code can compile:\r\n\r\n```java\r\nrequest.getTextData(0)\r\n       .toBuilder()\r\n       .setTextDataFields(0, request.getTextDataFields(0))\r\n       .build()\r\n```\r\n\r\nHowever, on the 3rd line, since `TextDataFields` is repeated, there can be more than one or zero values. Currently the code only gets the first `TextDataFields` value and ignores the rest (And if there&#39;s none, it would have an index out of bound error)\r\n\r\nMy question is, how to modify the 3rd line to capture all the `TextDataFields`? So it would be something like\r\n\r\n```java\r\nrequest.getTextData(0)\r\n       .toBuilder()\r\n       .setTextDataFields(i, request.getTextDataFields(i) for i in range(0, request.getTextDataFieldsCount)))\r\n       .build()\r\n```\r\n\r\nMaybe use `stream()` or `intstream()`?\r\n\r\nThanks!\r\n\r\n---\r\n\r\n[^1]: An example would be like:\r\n\r\n```\r\nmessage TextData {\r\n  optional string id = 1;\r\n  repeated TextDataField text_data_fields = 2;\r\n}\r\n\r\nmessage TextDataField {\r\n  optional string id = 1\r\n  ... # other fields\r\n}\r\n```","title":"Java - How to assign a list of values to a repeated protobuf field without for loop?","body":"<p>Suppose <code>TextData</code> and <code>TextDataFields</code> are two protobuf messages, but <code>TextDataFields</code> is also a repeated field interleaved in <code>TextData</code>[^1]</p>\n<p>This current code can compile:</p>\n<pre class=\"lang-java prettyprint-override\"><code>request.getTextData(0)\n       .toBuilder()\n       .setTextDataFields(0, request.getTextDataFields(0))\n       .build()\n</code></pre>\n<p>However, on the 3rd line, since <code>TextDataFields</code> is repeated, there can be more than one or zero values. Currently the code only gets the first <code>TextDataFields</code> value and ignores the rest (And if there's none, it would have an index out of bound error)</p>\n<p>My question is, how to modify the 3rd line to capture all the <code>TextDataFields</code>? So it would be something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>request.getTextData(0)\n       .toBuilder()\n       .setTextDataFields(i, request.getTextDataFields(i) for i in range(0, request.getTextDataFieldsCount)))\n       .build()\n</code></pre>\n<p>Maybe use <code>stream()</code> or <code>intstream()</code>?</p>\n<p>Thanks!</p>\n<hr />\n<p>[^1]: An example would be like:</p>\n<pre><code>message TextData {\n  optional string id = 1;\n  repeated TextDataField text_data_fields = 2;\n}\n\nmessage TextDataField {\n  optional string id = 1\n  ... # other fields\n}\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","backend"],"owner":{"account_id":27290286,"reputation":11,"user_id":20808810,"display_name":"Melo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676663541,"creation_date":1676663389,"question_id":75488661,"body_markdown":"I created the following code to receive the id of the field and change the string array that is there by removing the fields passed in the parameter, or if the fields received by the parameter have everything that was passed, delete that field in the given id.\r\n\r\nThe structure is something like:\r\n\r\n    { 110: [ &#39;abc&#39;, &#39;def&#39;}\r\n\r\nWhen I pass the id of the field 110, and the array I want the elements that have in common in the array that I passed and what is in the field id 110 to be removed, using the postgres database\r\n\r\n\r\n\r\n    `    @Modifying\r\n        @Query(\r\n            value = &quot;WITH fields AS &quot; +\r\n                &quot;(SELECT ( &quot; +\r\n                &quot;CASE &quot; +\r\n                &quot;WHEN (  ( CAST( array_to_json(  ARRAY [ ?2 ] ) AS JSONB) ) @&gt; ( fields -&gt; ?1 ) ) IS TRUE &quot; +\r\n                &quot;THEN fields - ?1 &quot; +\r\n                &quot;ELSE jsonb_set(fields, &#39;{?1}&#39;, jsonb_delete(fields -&gt; ?1, ?2 )) &quot; +\r\n                &quot;END &quot; +\r\n                &quot;) AS current &quot; +\r\n                &quot;FROM customer &quot; +\r\n                &quot;WHERE jsonb_exists_any( fields -&gt; ?1, ( CAST( ARRAY[ ?2 ] as TEXT[] ) ) )&quot; +\r\n                &quot;) &quot; +\r\n                &quot;UPDATE customer SET fields = fields.current FROM fields WHERE jsonb_exists_any( fields -&gt; ?1, ( CAST( ARRAY[ ?2 ] as TEXT[] ) ) )&quot;,\r\n            nativeQuery = true\r\n        )\r\n        void remove( String fieldId, Set&lt; String &gt; values );`\r\n\r\n\r\n\r\nThe structure is something like:\r\n\r\n    { 110: [ &#39;abc&#39;, &#39;def&#39;}\r\n\r\nWhen I pass the id of the field 110, and the array I want the elements that have in common in the array that I passed and what is in the field id 110 to be removed, using the postgres database\r\n","title":"Spring Boot how to receive in the Jpa Repository String[] and search in the postgres database the fields that contain the similar array and change it","body":"<p>I created the following code to receive the id of the field and change the string array that is there by removing the fields passed in the parameter, or if the fields received by the parameter have everything that was passed, delete that field in the given id.</p>\n<p>The structure is something like:</p>\n<pre><code>{ 110: [ 'abc', 'def'}\n</code></pre>\n<p>When I pass the id of the field 110, and the array I want the elements that have in common in the array that I passed and what is in the field id 110 to be removed, using the postgres database</p>\n<pre><code>`    @Modifying\n    @Query(\n        value = &quot;WITH fields AS &quot; +\n            &quot;(SELECT ( &quot; +\n            &quot;CASE &quot; +\n            &quot;WHEN (  ( CAST( array_to_json(  ARRAY [ ?2 ] ) AS JSONB) ) @&gt; ( fields -&gt; ?1 ) ) IS TRUE &quot; +\n            &quot;THEN fields - ?1 &quot; +\n            &quot;ELSE jsonb_set(fields, '{?1}', jsonb_delete(fields -&gt; ?1, ?2 )) &quot; +\n            &quot;END &quot; +\n            &quot;) AS current &quot; +\n            &quot;FROM customer &quot; +\n            &quot;WHERE jsonb_exists_any( fields -&gt; ?1, ( CAST( ARRAY[ ?2 ] as TEXT[] ) ) )&quot; +\n            &quot;) &quot; +\n            &quot;UPDATE customer SET fields = fields.current FROM fields WHERE jsonb_exists_any( fields -&gt; ?1, ( CAST( ARRAY[ ?2 ] as TEXT[] ) ) )&quot;,\n        nativeQuery = true\n    )\n    void remove( String fieldId, Set&lt; String &gt; values );`\n</code></pre>\n<p>The structure is something like:</p>\n<pre><code>{ 110: [ 'abc', 'def'}\n</code></pre>\n<p>When I pass the id of the field 110, and the array I want the elements that have in common in the array that I passed and what is in the field id 110 to be removed, using the postgres database</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":287756,"reputation":3499,"user_id":587772,"accept_rate":80,"display_name":"Sasha Goldshtein"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1318847918,"creation_date":1318847918,"answer_id":7792535,"question_id":7792523,"body_markdown":"You need to use `SortedMap` instead of `HashMap`. It will guarantee order.","title":"HashMap gives an unordered list of values?","body":"<p>You need to use <code>SortedMap</code> instead of <code>HashMap</code>. It will guarantee order.</p>\n"},{"tags":[],"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1318847986,"creation_date":1318847986,"answer_id":7792547,"question_id":7792523,"body_markdown":"Use [`LinkedHashMap`][1] instead\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/1.6/docs/api/java/util/LinkedHashMap.html","title":"HashMap gives an unordered list of values?","body":"<p>Use <a href=\"http://download.oracle.com/javase/1.6/docs/api/java/util/LinkedHashMap.html\" rel=\"nofollow\"><code>LinkedHashMap</code></a> instead</p>\n"},{"tags":[],"owner":{"account_id":102965,"reputation":415230,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"down_vote_count":0,"up_vote_count":33,"is_accepted":true,"score":33,"last_activity_date":1676663429,"creation_date":1318847998,"answer_id":7792550,"question_id":7792523,"body_markdown":"That&#39;s right. The `HashMap` implementation of `Map` does not guarantee any order during iteration.\r\n\r\n### If you want ordering based on insertion...\r\n\r\n...have a look at [`LinkedHashMap`](http://download.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html):\r\n\r\n    Map&lt;String, String&gt; sample = new LinkedHashMap&lt;String, String&gt;();\r\n    \r\n    sample.put(&quot;ifi1&quot;, &quot;video1&quot;);\r\n    sample.put(&quot;ifi2&quot;, &quot;video2&quot;);\r\n    sample.put(&quot;ifi3&quot;, &quot;video3&quot;);\r\n    sample.put(&quot;ifi4&quot;, &quot;video4&quot;);\r\n    sample.put(&quot;ifi5&quot;, &quot;video5&quot;);\r\n    sample.put(&quot;ifi6&quot;, &quot;video6&quot;);\r\n    sample.put(&quot;ifi7&quot;, &quot;video7&quot;);\r\n    sample.put(&quot;ifi8&quot;, &quot;video8&quot;);\r\n    sample.put(&quot;ifi9&quot;, &quot;video9&quot;);\r\n    \r\n    for (String video : sample.values())\r\n        System.out.println(video);\r\n\r\n    // Prints\r\n    video1\r\n    video2\r\n    video3\r\n    video4\r\n    video5\r\n    video6\r\n    video7\r\n    video8\r\n    video9\r\n\r\n\r\n### If you want ordering based on the keys...\r\n\r\nUse a `NavigableMap` or [`SortedMap`](http://download.oracle.com/javase/6/docs/api/java/util/SortedMap.html) implementation such as a [`TreeMap`](http://download.oracle.com/javase/6/docs/api/java/util/TreeMap.html).","title":"HashMap gives an unordered list of values?","body":"<p>That's right. The <code>HashMap</code> implementation of <code>Map</code> does not guarantee any order during iteration.</p>\n<h3>If you want ordering based on insertion...</h3>\n<p>...have a look at <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html\" rel=\"nofollow noreferrer\"><code>LinkedHashMap</code></a>:</p>\n<pre><code>Map&lt;String, String&gt; sample = new LinkedHashMap&lt;String, String&gt;();\n\nsample.put(&quot;ifi1&quot;, &quot;video1&quot;);\nsample.put(&quot;ifi2&quot;, &quot;video2&quot;);\nsample.put(&quot;ifi3&quot;, &quot;video3&quot;);\nsample.put(&quot;ifi4&quot;, &quot;video4&quot;);\nsample.put(&quot;ifi5&quot;, &quot;video5&quot;);\nsample.put(&quot;ifi6&quot;, &quot;video6&quot;);\nsample.put(&quot;ifi7&quot;, &quot;video7&quot;);\nsample.put(&quot;ifi8&quot;, &quot;video8&quot;);\nsample.put(&quot;ifi9&quot;, &quot;video9&quot;);\n\nfor (String video : sample.values())\n    System.out.println(video);\n\n// Prints\nvideo1\nvideo2\nvideo3\nvideo4\nvideo5\nvideo6\nvideo7\nvideo8\nvideo9\n</code></pre>\n<h3>If you want ordering based on the keys...</h3>\n<p>Use a <code>NavigableMap</code> or <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/SortedMap.html\" rel=\"nofollow noreferrer\"><code>SortedMap</code></a> implementation such as a <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/TreeMap.html\" rel=\"nofollow noreferrer\"><code>TreeMap</code></a>.</p>\n"},{"tags":[],"owner":{"account_id":454315,"reputation":27651,"user_id":851811,"accept_rate":100,"display_name":"Xavi L&#243;pez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1318848004,"creation_date":1318848004,"answer_id":7792551,"question_id":7792523,"body_markdown":"You can also use a [`LinkedHashMap`](http://download.oracle.com/javase/1.6/docs/api/java/util/LinkedHashMap.html) in order to obtain the collection of entries in the same order they were inserted in.","title":"HashMap gives an unordered list of values?","body":"<p>You can also use a <a href=\"http://download.oracle.com/javase/1.6/docs/api/java/util/LinkedHashMap.html\" rel=\"nofollow\"><code>LinkedHashMap</code></a> in order to obtain the collection of entries in the same order they were inserted in.</p>\n"},{"tags":[],"owner":{"account_id":261786,"reputation":13726,"user_id":546205,"accept_rate":60,"display_name":"Miguel Prz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1318848108,"creation_date":1318848108,"answer_id":7792573,"question_id":7792523,"body_markdown":"look for a class that implements SortedMap interface. Or for print purposes only, you can order de Set returned from your Map with Collections.sort","title":"HashMap gives an unordered list of values?","body":"<p>look for a class that implements SortedMap interface. Or for print purposes only, you can order de Set returned from your Map with Collections.sort</p>\n"},{"tags":[],"owner":{"account_id":231589,"reputation":6295,"user_id":495906,"accept_rate":73,"display_name":"anujprashar"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1318848194,"creation_date":1318848194,"answer_id":7792587,"question_id":7792523,"body_markdown":"In HashMap order is not there. Try using [LinkedHashMap][1] instead. `LinkedHashMap` keeps track of the keys based on insertion order, so that when you do a call to `getKeySet()`, you will get the keys back in the order you put them in.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/1.4.2/docs/api/java/util/LinkedHashMap.html","title":"HashMap gives an unordered list of values?","body":"<p>In HashMap order is not there. Try using <a href=\"http://download.oracle.com/javase/1.4.2/docs/api/java/util/LinkedHashMap.html\" rel=\"nofollow\">LinkedHashMap</a> instead. <code>LinkedHashMap</code> keeps track of the keys based on insertion order, so that when you do a call to <code>getKeySet()</code>, you will get the keys back in the order you put them in.</p>\n"},{"tags":[],"owner":{"account_id":211423,"reputation":4694,"user_id":463586,"accept_rate":93,"display_name":"neeraj t"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1318848355,"creation_date":1318848355,"answer_id":7792618,"question_id":7792523,"body_markdown":"If you use Simple HashMap then  this class use some hashing technique to store the value ,at the time of extracting the data from list its use same hash technique. And Hash function are not ordered. that&#39;s why result is  coming unordered.\r\nIn Placed  of HashMap  you have to use LinkedHashMap to make it ordered List. ","title":"HashMap gives an unordered list of values?","body":"<p>If you use Simple HashMap then  this class use some hashing technique to store the value ,at the time of extracting the data from list its use same hash technique. And Hash function are not ordered. that's why result is  coming unordered.\nIn Placed  of HashMap  you have to use LinkedHashMap to make it ordered List. </p>\n"},{"tags":[],"owner":{"account_id":456637,"reputation":2173,"user_id":855503,"accept_rate":60,"display_name":"mihail"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1318849788,"creation_date":1318849788,"answer_id":7792881,"question_id":7792523,"body_markdown":"    LinkedHashMap&lt;T, T&gt;\r\n\r\nkeep the insert order","title":"HashMap gives an unordered list of values?","body":"<pre><code>LinkedHashMap&lt;T, T&gt;\n</code></pre>\n\n<p>keep the insert order</p>\n"}],"owner":{"account_id":938768,"reputation":3476,"user_id":967232,"accept_rate":56,"display_name":"bytebiscuit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20774,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":7792550,"answer_count":8,"score":10,"last_activity_date":1676663429,"creation_date":1318847843,"question_id":7792523,"body_markdown":"I&#39;m having a weird problem with HashMap in Android. I&#39;m putting values into the hashmap which is of the form\r\n\r\n    HashMap &lt;String,String&gt; sample = new HashMap&lt;String,String&gt;();\r\n\r\nHowever let&#39;s say I&#39;m putting the following values in the following order:\r\n\r\n    sample.put(&quot;ifi1&quot;, &quot;video1&quot;);\r\n    sample.put(&quot;ifi2&quot;, &quot;video2&quot;);\r\n    sample.put(&quot;ifi3&quot;, &quot;video3&quot;);\r\n    sample.put(&quot;ifi4&quot;, &quot;video4&quot;);\r\n    sample.put(&quot;ifi5&quot;, &quot;video5&quot;);\r\n    sample.put(&quot;ifi6&quot;, &quot;video6&quot;);\r\n    sample.put(&quot;ifi7&quot;, &quot;video7&quot;);\r\n    sample.put(&quot;ifi8&quot;, &quot;video8&quot;);\r\n    sample.put(&quot;ifi9&quot;, &quot;video9&quot;);\r\n\t\t\r\n\r\nThis is just a simple example that is similar to what i have. I only have a bigger list in my actual code. However when I now try to print only the values, I get an unordered list as follows:\r\n\r\n    VIDEOS: video1\r\n    VIDEOS: video3\r\n    VIDEOS: video2\r\n    VIDEOS: video5\r\n    VIDEOS: video4\r\n    VIDEOS: video7\r\n    VIDEOS: video6\r\n    VIDEOS: video9\r\n    VIDEOS: video8\r\n\r\nwhere in fact I&#39;m expecting it to produces the following list:\r\n \r\n\r\n    VIDEOS: video1\r\n    VIDEOS: video2\r\n    VIDEOS: video3\r\n    VIDEOS: video4\r\n    VIDEOS: video5\r\n    VIDEOS: video6\r\n    VIDEOS: video7\r\n    VIDEOS: video8\r\n    VIDEOS: video9\r\n\r\nWhy is this, any idea?","title":"HashMap gives an unordered list of values?","body":"<p>I'm having a weird problem with HashMap in Android. I'm putting values into the hashmap which is of the form</p>\n\n<pre><code>HashMap &lt;String,String&gt; sample = new HashMap&lt;String,String&gt;();\n</code></pre>\n\n<p>However let's say I'm putting the following values in the following order:</p>\n\n<pre><code>sample.put(\"ifi1\", \"video1\");\nsample.put(\"ifi2\", \"video2\");\nsample.put(\"ifi3\", \"video3\");\nsample.put(\"ifi4\", \"video4\");\nsample.put(\"ifi5\", \"video5\");\nsample.put(\"ifi6\", \"video6\");\nsample.put(\"ifi7\", \"video7\");\nsample.put(\"ifi8\", \"video8\");\nsample.put(\"ifi9\", \"video9\");\n</code></pre>\n\n<p>This is just a simple example that is similar to what i have. I only have a bigger list in my actual code. However when I now try to print only the values, I get an unordered list as follows:</p>\n\n<pre><code>VIDEOS: video1\nVIDEOS: video3\nVIDEOS: video2\nVIDEOS: video5\nVIDEOS: video4\nVIDEOS: video7\nVIDEOS: video6\nVIDEOS: video9\nVIDEOS: video8\n</code></pre>\n\n<p>where in fact I'm expecting it to produces the following list:</p>\n\n<pre><code>VIDEOS: video1\nVIDEOS: video2\nVIDEOS: video3\nVIDEOS: video4\nVIDEOS: video5\nVIDEOS: video6\nVIDEOS: video7\nVIDEOS: video8\nVIDEOS: video9\n</code></pre>\n\n<p>Why is this, any idea?</p>\n"},{"tags":["java","json"],"answers":[{"tags":[],"owner":{"account_id":1390639,"reputation":23879,"user_id":1321564,"accept_rate":71,"display_name":"Benjamin M"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1465045319,"creation_date":1465044654,"answer_id":37630434,"question_id":37630350,"body_markdown":"What kind of JSON mapper do you use? Jackson, GSON, ...?\r\n\r\nAnd please provide some code. So we can see what you&#39;re doing.\r\n\r\n---\r\n\r\nIf you created the JSON object using Java, you should have a Java Object structure, right?\r\n\r\nSomething like this:\r\n\r\n    class Data {\r\n      int id;\r\n      int age;\r\n      LocalDate date;\r\n      ...\r\n    }\r\n\r\nAnd somewhere an Array / List of your data:\r\n\r\n    List&lt;Data&gt; result = new ArrayList&lt;&gt;();\r\n    result.add(data1);\r\n    result.add(data2);\r\n    result.add(data3);\r\n\r\nThen you can use Java8 Stream API to group your data:\r\n\r\n    Map&lt;LocalDate, Data&gt; grouped = result\r\n        .stream()\r\n        .collect(\r\n            Collectors.groupingBy(Data::getDate)\r\n        );\r\n\r\nThe result will be a `Map`. Your result should be a `List`. \r\n\r\nSo you should be able to simply iterate over the `Map` and insert it into a new `List`.","title":"Grouping same date JSON data together Using java","body":"<p>What kind of JSON mapper do you use? Jackson, GSON, ...?</p>\n\n<p>And please provide some code. So we can see what you're doing.</p>\n\n<hr>\n\n<p>If you created the JSON object using Java, you should have a Java Object structure, right?</p>\n\n<p>Something like this:</p>\n\n<pre><code>class Data {\n  int id;\n  int age;\n  LocalDate date;\n  ...\n}\n</code></pre>\n\n<p>And somewhere an Array / List of your data:</p>\n\n<pre><code>List&lt;Data&gt; result = new ArrayList&lt;&gt;();\nresult.add(data1);\nresult.add(data2);\nresult.add(data3);\n</code></pre>\n\n<p>Then you can use Java8 Stream API to group your data:</p>\n\n<pre><code>Map&lt;LocalDate, Data&gt; grouped = result\n    .stream()\n    .collect(\n        Collectors.groupingBy(Data::getDate)\n    );\n</code></pre>\n\n<p>The result will be a <code>Map</code>. Your result should be a <code>List</code>. </p>\n\n<p>So you should be able to simply iterate over the <code>Map</code> and insert it into a new <code>List</code>.</p>\n"},{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676662938,"creation_date":1676662938,"answer_id":75488618,"question_id":37630350,"body_markdown":"You can use JSON library such as _Josson_ to do the transformation.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n    Josson josson = Josson.fromJsonString(\r\n        &quot;{&quot; +\r\n        &quot;  \\&quot;result\\&quot;:[&quot; +\r\n        &quot;    {\\&quot;ID\\&quot;:7252,\\&quot;Age\\&quot;:52,\\&quot;Date\\&quot;:\\&quot;2015-11-25\\&quot;,\\&quot;DAY\\&quot;:\\&quot;Wednesday\\&quot;,\\&quot;Gender\\&quot;:\\&quot;M\\&quot;},&quot; +\r\n        &quot;    {\\&quot;ID\\&quot;:7252,\\&quot;Age\\&quot;:52,\\&quot;Date\\&quot;:\\&quot;2015-12-05\\&quot;,\\&quot;DAY\\&quot;:\\&quot;Saturday\\&quot;,\\&quot;Gender\\&quot;:\\&quot;M\\&quot;},&quot; +\r\n        &quot;    {\\&quot;ID\\&quot;:7252,\\&quot;Age\\&quot;:52,\\&quot;Date\\&quot;:\\&quot;2015-11-25\\&quot;,\\&quot;DAY\\&quot;:\\&quot;Wednesday\\&quot;,\\&quot;Gender\\&quot;:\\&quot;F\\&quot;},&quot; +\r\n        &quot;    {\\&quot;ID\\&quot;:7252,\\&quot;Age\\&quot;:52,\\&quot;Date\\&quot;:\\&quot;2015-12-05\\&quot;,\\&quot;DAY\\&quot;:\\&quot;Saturday\\&quot;,\\&quot;Gender\\&quot;:\\&quot;F\\&quot;}&quot; +\r\n        &quot;  ],&quot; +\r\n        &quot;  \\&quot;status\\&quot;:\\&quot;ok\\&quot;&quot; +\r\n        &quot;}&quot;);\r\n    JsonNode node = josson.getNode(&quot;field(result.group(Date).map(Date::elements))&quot;);\r\n    System.out.println(node.toPrettyString());\r\n\r\n__Output__\r\n        \r\n    {\r\n      &quot;result&quot; : [ {\r\n        &quot;2015-11-25&quot; : [ {\r\n          &quot;ID&quot; : 7252,\r\n          &quot;Age&quot; : 52,\r\n          &quot;Date&quot; : &quot;2015-11-25&quot;,\r\n          &quot;DAY&quot; : &quot;Wednesday&quot;,\r\n          &quot;Gender&quot; : &quot;M&quot;\r\n        }, {\r\n          &quot;ID&quot; : 7252,\r\n          &quot;Age&quot; : 52,\r\n          &quot;Date&quot; : &quot;2015-11-25&quot;,\r\n          &quot;DAY&quot; : &quot;Wednesday&quot;,\r\n          &quot;Gender&quot; : &quot;F&quot;\r\n        } ]\r\n      }, {\r\n        &quot;2015-12-05&quot; : [ {\r\n          &quot;ID&quot; : 7252,\r\n          &quot;Age&quot; : 52,\r\n          &quot;Date&quot; : &quot;2015-12-05&quot;,\r\n          &quot;DAY&quot; : &quot;Saturday&quot;,\r\n          &quot;Gender&quot; : &quot;M&quot;\r\n        }, {\r\n          &quot;ID&quot; : 7252,\r\n          &quot;Age&quot; : 52,\r\n          &quot;Date&quot; : &quot;2015-12-05&quot;,\r\n          &quot;DAY&quot; : &quot;Saturday&quot;,\r\n          &quot;Gender&quot; : &quot;F&quot;\r\n        } ]\r\n      } ],\r\n      &quot;status&quot; : &quot;ok&quot;\r\n    }  ","title":"Grouping same date JSON data together Using java","body":"<p>You can use JSON library such as <em>Josson</em> to do the transformation.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<pre><code>Josson josson = Josson.fromJsonString(\n    &quot;{&quot; +\n    &quot;  \\&quot;result\\&quot;:[&quot; +\n    &quot;    {\\&quot;ID\\&quot;:7252,\\&quot;Age\\&quot;:52,\\&quot;Date\\&quot;:\\&quot;2015-11-25\\&quot;,\\&quot;DAY\\&quot;:\\&quot;Wednesday\\&quot;,\\&quot;Gender\\&quot;:\\&quot;M\\&quot;},&quot; +\n    &quot;    {\\&quot;ID\\&quot;:7252,\\&quot;Age\\&quot;:52,\\&quot;Date\\&quot;:\\&quot;2015-12-05\\&quot;,\\&quot;DAY\\&quot;:\\&quot;Saturday\\&quot;,\\&quot;Gender\\&quot;:\\&quot;M\\&quot;},&quot; +\n    &quot;    {\\&quot;ID\\&quot;:7252,\\&quot;Age\\&quot;:52,\\&quot;Date\\&quot;:\\&quot;2015-11-25\\&quot;,\\&quot;DAY\\&quot;:\\&quot;Wednesday\\&quot;,\\&quot;Gender\\&quot;:\\&quot;F\\&quot;},&quot; +\n    &quot;    {\\&quot;ID\\&quot;:7252,\\&quot;Age\\&quot;:52,\\&quot;Date\\&quot;:\\&quot;2015-12-05\\&quot;,\\&quot;DAY\\&quot;:\\&quot;Saturday\\&quot;,\\&quot;Gender\\&quot;:\\&quot;F\\&quot;}&quot; +\n    &quot;  ],&quot; +\n    &quot;  \\&quot;status\\&quot;:\\&quot;ok\\&quot;&quot; +\n    &quot;}&quot;);\nJsonNode node = josson.getNode(&quot;field(result.group(Date).map(Date::elements))&quot;);\nSystem.out.println(node.toPrettyString());\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>{\n  &quot;result&quot; : [ {\n    &quot;2015-11-25&quot; : [ {\n      &quot;ID&quot; : 7252,\n      &quot;Age&quot; : 52,\n      &quot;Date&quot; : &quot;2015-11-25&quot;,\n      &quot;DAY&quot; : &quot;Wednesday&quot;,\n      &quot;Gender&quot; : &quot;M&quot;\n    }, {\n      &quot;ID&quot; : 7252,\n      &quot;Age&quot; : 52,\n      &quot;Date&quot; : &quot;2015-11-25&quot;,\n      &quot;DAY&quot; : &quot;Wednesday&quot;,\n      &quot;Gender&quot; : &quot;F&quot;\n    } ]\n  }, {\n    &quot;2015-12-05&quot; : [ {\n      &quot;ID&quot; : 7252,\n      &quot;Age&quot; : 52,\n      &quot;Date&quot; : &quot;2015-12-05&quot;,\n      &quot;DAY&quot; : &quot;Saturday&quot;,\n      &quot;Gender&quot; : &quot;M&quot;\n    }, {\n      &quot;ID&quot; : 7252,\n      &quot;Age&quot; : 52,\n      &quot;Date&quot; : &quot;2015-12-05&quot;,\n      &quot;DAY&quot; : &quot;Saturday&quot;,\n      &quot;Gender&quot; : &quot;F&quot;\n    } ]\n  } ],\n  &quot;status&quot; : &quot;ok&quot;\n}  \n</code></pre>\n"}],"owner":{"account_id":4992052,"reputation":328,"user_id":4013940,"accept_rate":19,"display_name":"NIKHIL K A"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2843,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1676662938,"creation_date":1465044019,"question_id":37630350,"body_markdown":"I have created one json Object Using java and it&#39;s values are given below \r\n\r\n    {\r\n      &quot;result&quot;:[\r\n        {&quot;ID&quot;:7252,&quot;Age&quot;:52,&quot;Date&quot;:&quot;2015-11-25&quot;,&quot;DAY&quot;:&quot;Wednesday&quot;,&quot;Gender&quot;:&quot;M&quot;},\r\n        {&quot;ID&quot;:7252,&quot;Age&quot;:52,&quot;Date&quot;:&quot;2015-12-05&quot;,&quot;DAY&quot;:&quot;Saturday&quot;,&quot;Gender&quot;:&quot;M&quot;},\r\n        ....\r\n      ],\r\n      &quot;status&quot;:&quot;ok&quot;\r\n    }\r\n\r\nI need to group data as per date,required format is given below\r\n\r\n    {\r\n      &quot;result&quot;:[\r\n        {&quot;2015-11-25&quot;:[\r\n          {&quot;ID&quot;:7252,&quot;Age&quot;:52,&quot;Date&quot;:&quot;2015-11-25&quot;,&quot;DAY&quot;:&quot;Wednesday&quot;,&quot;Gender&quot;:&quot;F&quot;},\r\n          {&quot;ID&quot;:7252,&quot;Age&quot;:52,&quot;Date&quot;:&quot;2015-11-25&quot;,&quot;DAY&quot;:&quot;Wednesday&quot;,&quot;Gender&quot;:&quot;M&quot;}\r\n        ]},\r\n        {&quot;2015-10-25&quot;:[\r\n          {&quot;ID&quot;:7252,&quot;Age&quot;:52,&quot;Date&quot;:&quot;2015-10-25&quot;,&quot;DAY&quot;:&quot;Tuesday&quot;,&quot;Gender&quot;:&quot;F&quot;},\r\n          {&quot;ID&quot;:7252,&quot;Age&quot;:52,&quot;Date&quot;:&quot;2015-10-25&quot;,&quot;DAY&quot;:&quot;Tuesday&quot;,&quot;Gender&quot;:&quot;M&quot;}\r\n        ]},\r\n      ],\r\n      &quot;status&quot;:&quot;ok&quot;\r\n    }\r\n \r\nBasically i need group all same date data together inside JSON\r\nwith date as key \r\nHow can i achieve this JSON format using java  ","title":"Grouping same date JSON data together Using java","body":"<p>I have created one json Object Using java and it's values are given below </p>\n\n<pre><code>{\n  \"result\":[\n    {\"ID\":7252,\"Age\":52,\"Date\":\"2015-11-25\",\"DAY\":\"Wednesday\",\"Gender\":\"M\"},\n    {\"ID\":7252,\"Age\":52,\"Date\":\"2015-12-05\",\"DAY\":\"Saturday\",\"Gender\":\"M\"},\n    ....\n  ],\n  \"status\":\"ok\"\n}\n</code></pre>\n\n<p>I need to group data as per date,required format is given below</p>\n\n<pre><code>{\n  \"result\":[\n    {\"2015-11-25\":[\n      {\"ID\":7252,\"Age\":52,\"Date\":\"2015-11-25\",\"DAY\":\"Wednesday\",\"Gender\":\"F\"},\n      {\"ID\":7252,\"Age\":52,\"Date\":\"2015-11-25\",\"DAY\":\"Wednesday\",\"Gender\":\"M\"}\n    ]},\n    {\"2015-10-25\":[\n      {\"ID\":7252,\"Age\":52,\"Date\":\"2015-10-25\",\"DAY\":\"Tuesday\",\"Gender\":\"F\"},\n      {\"ID\":7252,\"Age\":52,\"Date\":\"2015-10-25\",\"DAY\":\"Tuesday\",\"Gender\":\"M\"}\n    ]},\n  ],\n  \"status\":\"ok\"\n}\n</code></pre>\n\n<p>Basically i need group all same date data together inside JSON\nwith date as key \nHow can i achieve this JSON format using java  </p>\n"},{"tags":["java","macos","homebrew","java-11","macos-ventura"],"answers":[{"tags":[],"owner":{"account_id":343146,"reputation":11083,"user_id":674669,"accept_rate":58,"display_name":"user674669"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669304166,"creation_date":1669304166,"answer_id":74563141,"question_id":74547190,"body_markdown":"I deleted all openjdk 11 directories using rm\r\n\r\n    /Library/Java/JavaVirtualMachines/\r\n\r\n&amp;\r\n\r\n    /usr/local/Cellar/\r\n\r\nand reinstalled openjdk11 using:\r\n\r\n     brew install openjdk@11\r\n\r\nNow, no more popup errors.","title":"Popup error: &quot;openjdk-11.0.2 is damaged and can&#39;t be opened&quot; on mac os ventura","body":"<p>I deleted all openjdk 11 directories using rm</p>\n<pre><code>/Library/Java/JavaVirtualMachines/\n</code></pre>\n<p>&amp;</p>\n<pre><code>/usr/local/Cellar/\n</code></pre>\n<p>and reinstalled openjdk11 using:</p>\n<pre><code> brew install openjdk@11\n</code></pre>\n<p>Now, no more popup errors.</p>\n"},{"tags":[],"owner":{"account_id":416303,"reputation":9226,"user_id":791609,"display_name":"chenrui"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669840715,"creation_date":1669840715,"answer_id":74633894,"question_id":74547190,"body_markdown":"Reinstallation is always your best bet. I have run into such issues couple of times before as well.","title":"Popup error: &quot;openjdk-11.0.2 is damaged and can&#39;t be opened&quot; on mac os ventura","body":"<p>Reinstallation is always your best bet. I have run into such issues couple of times before as well.</p>\n"},{"tags":[],"owner":{"account_id":3032231,"reputation":21,"user_id":2571006,"display_name":"ashcradr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676662801,"creation_date":1676662491,"answer_id":75488564,"question_id":74547190,"body_markdown":"For recent MacOS releases (I believe Catalina and newer), the key is the following command (note you may have to adjust the path for your flavor of JDK - this one is for GraalVM):\r\n\r\n    xattr -r -d com.apple.quarantine /Library/Java/JavaVirtualMachines/graalvm-ce-javaV-XX.Y.Z\r\n\r\nIt&#39;s outlined nicely on the [graalvm/homebrew-tap install instructions][1].\r\n\r\n\r\n  [1]: https://github.com/graalvm/homebrew-tap","title":"Popup error: &quot;openjdk-11.0.2 is damaged and can&#39;t be opened&quot; on mac os ventura","body":"<p>For recent MacOS releases (I believe Catalina and newer), the key is the following command (note you may have to adjust the path for your flavor of JDK - this one is for GraalVM):</p>\n<pre><code>xattr -r -d com.apple.quarantine /Library/Java/JavaVirtualMachines/graalvm-ce-javaV-XX.Y.Z\n</code></pre>\n<p>It's outlined nicely on the <a href=\"https://github.com/graalvm/homebrew-tap\" rel=\"nofollow noreferrer\">graalvm/homebrew-tap install instructions</a>.</p>\n"}],"owner":{"account_id":343146,"reputation":11083,"user_id":674669,"accept_rate":58,"display_name":"user674669"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2449,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":3,"score":-1,"last_activity_date":1676662801,"creation_date":1669208306,"question_id":74547190,"body_markdown":"jdk 11 was fine on my mac os Mojave. On upgrading to Mac OS Ventura, I started seeing this popup error:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yoPkq.png\r\n\r\nopenjdk-11.0.2 is damaged and can&#39;t be opened.I uninstalled and reinstalled openjdk11 using brew but still get the same error:\r\n\r\n    $ brew uninstall openjdk@11\r\n    Uninstalling /usr/local/Cellar/openjdk@11/11.0.16.1_1... (678 files, 298.8MB)\r\n\r\n    $ /usr/libexec/java_home -V\r\n    Matching Java Virtual Machines (2):\r\n        1.8.261.12 (x86_64) &quot;Oracle Corporation&quot; - &quot;Java&quot; /Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home\r\n        1.8.0_191 (x86_64) &quot;Oracle Corporation&quot; - &quot;Java SE 8&quot; /Library/Java/JavaVirtualMachines/jdk1.8.0_191.jdk/Contents/Home\r\n    /Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home\r\n\r\n    $ brew install openjdk@11\r\n    ==&gt; Downloading https://ghcr.io/v2/homebrew/core/openjdk/11/manifests/11.0.16.1_1\r\n    Already downloaded: /Users/user/Library/Caches/Homebrew/downloads/66d77b9adc57a7f85fca1b4c90e6187f64aa336a0777d7dc1014151d925df3d8--openjdk@11-11.0.16.1_1.bottle_manifest.json\r\n    ==&gt; Downloading https://ghcr.io/v2/homebrew/core/openjdk/11/blobs/sha256:4157114f6dd128b93d0732559787f191678d2d496476e19855a03d0f226aa50c\r\n    Already downloaded: /Users/user/Library/Caches/Homebrew/downloads/853c10b19f8f8cd779b49261c60a74abf52e9fea1067d934c45549bea2b8ed3e--openjdk@11--11.0.16.1_1.ventura.bottle.tar.gz\r\n    ==&gt; Pouring openjdk@11--11.0.16.1_1.ventura.bottle.tar.gz\r\n\r\n    ==&gt; Caveats\r\n    For the system Java wrappers to find this JDK, symlink it with\r\n      sudo ln -sfn /usr/local/opt/openjdk@11/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk-11.jdk\r\n\r\n    openjdk@11 is keg-only, which means it was not symlinked into /usr/local,\r\n    because this is an alternate version of another formula.\r\n\r\n    If you need to have openjdk@11 first in your PATH, run:\r\n      echo &#39;export PATH=&quot;/usr/local/opt/openjdk@11/bin:$PATH&quot;&#39; &gt;&gt; /Users/user/.bash_profile\r\n\r\n    For compilers to find openjdk@11 you may need to set:\r\n      export CPPFLAGS=&quot;-I/usr/local/opt/openjdk@11/include&quot;\r\n\r\n    ==&gt; Summary\r\n    �  /usr/local/Cellar/openjdk@11/11.0.16.1_1: 678 files, 298.8MB\r\n    ==&gt; Running `brew cleanup openjdk@11`...\r\n    Disable this behaviour by setting HOMEBREW_NO_INSTALL_CLEANUP.\r\n    Hide these hints with HOMEBREW_NO_ENV_HINTS (see `man brew`).\r\n\r\n","title":"Popup error: &quot;openjdk-11.0.2 is damaged and can&#39;t be opened&quot; on mac os ventura","body":"<p>jdk 11 was fine on my mac os Mojave. On upgrading to Mac OS Ventura, I started seeing this popup error:</p>\n<p><a href=\"https://i.stack.imgur.com/yoPkq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yoPkq.png\" alt=\"enter image description here\" /></a></p>\n<p>openjdk-11.0.2 is damaged and can't be opened.I uninstalled and reinstalled openjdk11 using brew but still get the same error:</p>\n<pre><code>$ brew uninstall openjdk@11\nUninstalling /usr/local/Cellar/openjdk@11/11.0.16.1_1... (678 files, 298.8MB)\n\n$ /usr/libexec/java_home -V\nMatching Java Virtual Machines (2):\n    1.8.261.12 (x86_64) &quot;Oracle Corporation&quot; - &quot;Java&quot; /Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home\n    1.8.0_191 (x86_64) &quot;Oracle Corporation&quot; - &quot;Java SE 8&quot; /Library/Java/JavaVirtualMachines/jdk1.8.0_191.jdk/Contents/Home\n/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home\n\n$ brew install openjdk@11\n==&gt; Downloading https://ghcr.io/v2/homebrew/core/openjdk/11/manifests/11.0.16.1_1\nAlready downloaded: /Users/user/Library/Caches/Homebrew/downloads/66d77b9adc57a7f85fca1b4c90e6187f64aa336a0777d7dc1014151d925df3d8--openjdk@11-11.0.16.1_1.bottle_manifest.json\n==&gt; Downloading https://ghcr.io/v2/homebrew/core/openjdk/11/blobs/sha256:4157114f6dd128b93d0732559787f191678d2d496476e19855a03d0f226aa50c\nAlready downloaded: /Users/user/Library/Caches/Homebrew/downloads/853c10b19f8f8cd779b49261c60a74abf52e9fea1067d934c45549bea2b8ed3e--openjdk@11--11.0.16.1_1.ventura.bottle.tar.gz\n==&gt; Pouring openjdk@11--11.0.16.1_1.ventura.bottle.tar.gz\n\n==&gt; Caveats\nFor the system Java wrappers to find this JDK, symlink it with\n  sudo ln -sfn /usr/local/opt/openjdk@11/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk-11.jdk\n\nopenjdk@11 is keg-only, which means it was not symlinked into /usr/local,\nbecause this is an alternate version of another formula.\n\nIf you need to have openjdk@11 first in your PATH, run:\n  echo 'export PATH=&quot;/usr/local/opt/openjdk@11/bin:$PATH&quot;' &gt;&gt; /Users/user/.bash_profile\n\nFor compilers to find openjdk@11 you may need to set:\n  export CPPFLAGS=&quot;-I/usr/local/opt/openjdk@11/include&quot;\n\n==&gt; Summary\n�  /usr/local/Cellar/openjdk@11/11.0.16.1_1: 678 files, 298.8MB\n==&gt; Running `brew cleanup openjdk@11`...\nDisable this behaviour by setting HOMEBREW_NO_INSTALL_CLEANUP.\nHide these hints with HOMEBREW_NO_ENV_HINTS (see `man brew`).\n</code></pre>\n"},{"tags":["java","reflection","avro"],"comments":[{"owner":{"account_id":13033096,"reputation":775,"user_id":9418902,"display_name":"Csisanyi"},"score":0,"creation_date":1673390559,"post_id":75076310,"comment_id":132487376,"body_markdown":"Have you tried getRecordSchema(Object o) instead of getSchema(Type t)? This alphabetical ordering seems very strange though.","body":"Have you tried getRecordSchema(Object o) instead of getSchema(Type t)? This alphabetical ordering seems very strange though."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1673392224,"post_id":75076310,"comment_id":132487736,"body_markdown":"Fields do not have an ordering. `Class.getFields()` may return fields in any arbitrary order.","body":"Fields do not have an ordering. <code>Class.getFields()</code> may return fields in any arbitrary order."},{"owner":{"account_id":23128,"reputation":13127,"user_id":57719,"display_name":"Chin Huang"},"score":1,"creation_date":1673392888,"post_id":75076310,"comment_id":132487866,"body_markdown":"Avro version 1.10.0 changed ReflectData to [sort fields into alphabetical order](https://issues.apache.org/jira/browse/AVRO-2579). Some people [complained that was a breaking change](https://issues.apache.org/jira/browse/AVRO-3138).","body":"Avro version 1.10.0 changed ReflectData to <a href=\"https://issues.apache.org/jira/browse/AVRO-2579\" rel=\"nofollow noreferrer\">sort fields into alphabetical order</a>. Some people <a href=\"https://issues.apache.org/jira/browse/AVRO-3138\" rel=\"nofollow noreferrer\">complained that was a breaking change</a>."},{"owner":{"account_id":8454076,"reputation":907,"user_id":6341982,"accept_rate":85,"display_name":"Luiz Henrique"},"score":0,"creation_date":1673406766,"post_id":75076310,"comment_id":132489967,"body_markdown":"@ChinHuang does it still have this behavior on 1.11.0? If so, how can I properly convert N array of bytes to this schema in an order that was not expected?","body":"@ChinHuang does it still have this behavior on 1.11.0? If so, how can I properly convert N array of bytes to this schema in an order that was not expected?"},{"owner":{"account_id":8454076,"reputation":907,"user_id":6341982,"accept_rate":85,"display_name":"Luiz Henrique"},"score":0,"creation_date":1673406889,"post_id":75076310,"comment_id":132489987,"body_markdown":"@Csisanyi It is not the case. I have an array of bytes and need to convert to an Object. I do not have the Object o, just the schema of the Object.class","body":"@Csisanyi It is not the case. I have an array of bytes and need to convert to an Object. I do not have the Object o, just the schema of the Object.class"},{"owner":{"account_id":8454076,"reputation":907,"user_id":6341982,"accept_rate":85,"display_name":"Luiz Henrique"},"score":0,"creation_date":1676659123,"post_id":75076310,"comment_id":133188817,"body_markdown":"@ChinHuang, the version was the issue. Would you mind writting the answer so I can accept it?","body":"@ChinHuang, the version was the issue. Would you mind writting the answer so I can accept it?"}],"answers":[{"tags":[],"owner":{"account_id":23128,"reputation":13127,"user_id":57719,"display_name":"Chin Huang"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676662778,"creation_date":1676662778,"answer_id":75488598,"question_id":75076310,"body_markdown":"Avro version 1.10.0 changed ReflectData to [sort fields into alphabetical order](https://issues.apache.org/jira/browse/AVRO-2579) because the Class.getDeclaredFields() method API specification does not mandate a specific order of the fields that get returned. Some Java implementations return the fields in the order they appear in the Java source file. Some people [complained that was a breaking change](https://issues.apache.org/jira/browse/AVRO-3138).\r\n\r\nIf you don&#39;t want the fields sorted into alphabetical order, then you must stay at Avro version 1.9.2 or lower.","title":"Avro Schema is being generated in wrong field order (alphabetical)","body":"<p>Avro version 1.10.0 changed ReflectData to <a href=\"https://issues.apache.org/jira/browse/AVRO-2579\" rel=\"nofollow noreferrer\">sort fields into alphabetical order</a> because the Class.getDeclaredFields() method API specification does not mandate a specific order of the fields that get returned. Some Java implementations return the fields in the order they appear in the Java source file. Some people <a href=\"https://issues.apache.org/jira/browse/AVRO-3138\" rel=\"nofollow noreferrer\">complained that was a breaking change</a>.</p>\n<p>If you don't want the fields sorted into alphabetical order, then you must stay at Avro version 1.9.2 or lower.</p>\n"}],"owner":{"account_id":8454076,"reputation":907,"user_id":6341982,"accept_rate":85,"display_name":"Luiz Henrique"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":440,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75488598,"answer_count":1,"score":2,"last_activity_date":1676662778,"creation_date":1673388105,"question_id":75076310,"body_markdown":"I have a class the I need to converto to an avro schema:\r\n\r\n    public class MonitorStateSchema {\r\n        private MetaResponse c;\r\n        private Header a;\r\n        private MonitorStateEnvelope b;\r\n    \r\n        public MonitorStateSchema(MetaResponse c, Header a, MonitorStateEnvelope b) {\r\n            this.c = c;\r\n            this.a = a;\r\n            this.b = b;\r\n        }\r\n    }\r\n\r\nI use a generic method to get the schema from it\r\n\r\n    public static &lt;D&gt; void getFromAvro(Class&lt;D&gt; schemaType) {\r\n        Schema schema = ReflectData.get().getSchema(schemaType);\r\n    \r\n       // other stuff\r\n    }\r\n\r\nAfter doing it, I got a different order in the result than the expected:\r\n\r\nEXPECTED:\r\n\r\n    {\r\n      &quot;type&quot;: &quot;record&quot;,\r\n      &quot;name&quot;: &quot;MonitorSchema&quot;,\r\n      &quot;namespace&quot;: &quot;mypackage.monitor&quot;,\r\n      &quot;fields&quot;: [\r\n        {\r\n          &quot;name&quot;: &quot;c&quot;,\r\n          &quot;type&quot;: {\r\n            &quot;type&quot;: &quot;record&quot;,\r\n            &quot;name&quot;: &quot;MetaResponse&quot;,\r\n            &quot;namespace&quot;: &quot;mypackage.monitor&quot;,\r\n            &quot;fields&quot;: [\r\n              {\r\n                &quot;name&quot;: &quot;uuid&quot;,\r\n                &quot;type&quot;: &quot;string&quot;\r\n              },\r\n              {\r\n                &quot;name&quot;: &quot;code&quot;,\r\n                &quot;type&quot;: &quot;int&quot;\r\n              },\r\n              {\r\n                &quot;name&quot;: &quot;message&quot;,\r\n                &quot;type&quot;: &quot;string&quot;\r\n              }\r\n            ]\r\n          }\r\n        },\r\n        {\r\n          &quot;name&quot;: &quot;a&quot;,\r\n          &quot;type&quot;: {\r\n            &quot;type&quot;: &quot;record&quot;,\r\n            &quot;name&quot;: &quot;Header&quot;,\r\n            &quot;namespace&quot;: &quot;mypackage.monitor&quot;,\r\n            &quot;fields&quot;: [\r\n              {\r\n                &quot;name&quot;: &quot;apiKey&quot;,\r\n                &quot;type&quot;: &quot;string&quot;\r\n              },\r\n              {\r\n                &quot;name&quot;: &quot;signature&quot;,\r\n                &quot;type&quot;: &quot;string&quot;\r\n              },\r\n              {\r\n                &quot;name&quot;: &quot;nonce&quot;,\r\n                &quot;type&quot;: &quot;int&quot;\r\n              }\r\n            ]\r\n          }\r\n        },\r\n        {\r\n          &quot;name&quot;: &quot;b&quot;,\r\n          &quot;type&quot;: {\r\n            &quot;type&quot;: &quot;record&quot;,\r\n            &quot;name&quot;: &quot;MonitorEnvelope&quot;,\r\n            &quot;fields&quot;: [\r\n              {\r\n                &quot;name&quot;: &quot;fields&quot;,\r\n                &quot;type&quot;: {\r\n                  &quot;type&quot;: &quot;array&quot;,\r\n                  &quot;items&quot;: {\r\n                    &quot;type&quot;: &quot;record&quot;,\r\n                    &quot;name&quot;: &quot;Field&quot;,\r\n                    &quot;fields&quot;: [\r\n                      {\r\n                        &quot;name&quot;: &quot;name&quot;,\r\n                        &quot;type&quot;: &quot;string&quot;\r\n                      },\r\n                      {\r\n                        &quot;name&quot;: &quot;value&quot;,\r\n                        &quot;type&quot;: &quot;string&quot;\r\n                      }\r\n                    ]\r\n                  },\r\n                  &quot;java-class&quot;: &quot;[Lmypackage.monitor.Field;&quot;\r\n                }\r\n              }\r\n            ]\r\n          }\r\n        }\r\n      ]\r\n    }\r\n\r\nACTUAL RESULT:\r\n\r\n    {\r\n      &quot;type&quot;: &quot;record&quot;,\r\n      &quot;name&quot;: &quot;MonitorStateSchema&quot;,\r\n      &quot;namespace&quot;: &quot;mypackage.monitor&quot;,\r\n      &quot;fields&quot;: [\r\n        {\r\n          &quot;name&quot;: &quot;a&quot;,\r\n          &quot;type&quot;: {\r\n            &quot;type&quot;: &quot;record&quot;,\r\n            &quot;name&quot;: &quot;Header&quot;,\r\n            &quot;namespace&quot;: &quot;mypackage.monitor&quot;,\r\n            &quot;fields&quot;: [\r\n              {\r\n                &quot;name&quot;: &quot;apiKey&quot;,\r\n                &quot;type&quot;: &quot;string&quot;\r\n              },\r\n              {\r\n                &quot;name&quot;: &quot;nonce&quot;,\r\n                &quot;type&quot;: &quot;int&quot;\r\n              },\r\n              {\r\n                &quot;name&quot;: &quot;signature&quot;,\r\n                &quot;type&quot;: &quot;string&quot;\r\n              }\r\n            ]\r\n          }\r\n        },\r\n        {\r\n          &quot;name&quot;: &quot;b&quot;,\r\n          &quot;type&quot;: {\r\n            &quot;type&quot;: &quot;record&quot;,\r\n            &quot;name&quot;: &quot;MonitorStateEnvelope&quot;,\r\n            &quot;fields&quot;: [\r\n              {\r\n                &quot;name&quot;: &quot;fields&quot;,\r\n                &quot;type&quot;: {\r\n                  &quot;type&quot;: &quot;array&quot;,\r\n                  &quot;items&quot;: {\r\n                    &quot;type&quot;: &quot;record&quot;,\r\n                    &quot;name&quot;: &quot;Field&quot;,\r\n                    &quot;namespace&quot;: &quot;mypackage.monitor&quot;,\r\n                    &quot;fields&quot;: [\r\n                      {\r\n                        &quot;name&quot;: &quot;name&quot;,\r\n                        &quot;type&quot;: &quot;string&quot;\r\n                      },\r\n                      {\r\n                        &quot;name&quot;: &quot;value&quot;,\r\n                        &quot;type&quot;: &quot;string&quot;\r\n                      }\r\n                    ]\r\n                  },\r\n                  &quot;java-class&quot;: &quot;[Lmypackage.monitor.Field;&quot;\r\n                }\r\n              }\r\n            ]\r\n          }\r\n        },\r\n        {\r\n          &quot;name&quot;: &quot;c&quot;,\r\n          &quot;type&quot;: {\r\n            &quot;type&quot;: &quot;record&quot;,\r\n            &quot;name&quot;: &quot;MetaResponse&quot;,\r\n            &quot;namespace&quot;: &quot;mypackage.monitor&quot;,\r\n            &quot;fields&quot;: [\r\n              {\r\n                &quot;name&quot;: &quot;code&quot;,\r\n                &quot;type&quot;: &quot;int&quot;\r\n              },\r\n              {\r\n                &quot;name&quot;: &quot;message&quot;,\r\n                &quot;type&quot;: &quot;string&quot;\r\n              },\r\n              {\r\n                &quot;name&quot;: &quot;uuid&quot;,\r\n                &quot;type&quot;: &quot;string&quot;\r\n              }\r\n            ]\r\n          }\r\n        }\r\n      ]\r\n    }\r\n\r\nSeems that it is ordering by alphabetical order on the name of the field and it is breaking the application when deserializing the byte array. Is there any reason for this to happen?","title":"Avro Schema is being generated in wrong field order (alphabetical)","body":"<p>I have a class the I need to converto to an avro schema:</p>\n<pre><code>public class MonitorStateSchema {\n    private MetaResponse c;\n    private Header a;\n    private MonitorStateEnvelope b;\n\n    public MonitorStateSchema(MetaResponse c, Header a, MonitorStateEnvelope b) {\n        this.c = c;\n        this.a = a;\n        this.b = b;\n    }\n}\n</code></pre>\n<p>I use a generic method to get the schema from it</p>\n<pre><code>public static &lt;D&gt; void getFromAvro(Class&lt;D&gt; schemaType) {\n    Schema schema = ReflectData.get().getSchema(schemaType);\n\n   // other stuff\n}\n</code></pre>\n<p>After doing it, I got a different order in the result than the expected:</p>\n<p>EXPECTED:</p>\n<pre><code>{\n  &quot;type&quot;: &quot;record&quot;,\n  &quot;name&quot;: &quot;MonitorSchema&quot;,\n  &quot;namespace&quot;: &quot;mypackage.monitor&quot;,\n  &quot;fields&quot;: [\n    {\n      &quot;name&quot;: &quot;c&quot;,\n      &quot;type&quot;: {\n        &quot;type&quot;: &quot;record&quot;,\n        &quot;name&quot;: &quot;MetaResponse&quot;,\n        &quot;namespace&quot;: &quot;mypackage.monitor&quot;,\n        &quot;fields&quot;: [\n          {\n            &quot;name&quot;: &quot;uuid&quot;,\n            &quot;type&quot;: &quot;string&quot;\n          },\n          {\n            &quot;name&quot;: &quot;code&quot;,\n            &quot;type&quot;: &quot;int&quot;\n          },\n          {\n            &quot;name&quot;: &quot;message&quot;,\n            &quot;type&quot;: &quot;string&quot;\n          }\n        ]\n      }\n    },\n    {\n      &quot;name&quot;: &quot;a&quot;,\n      &quot;type&quot;: {\n        &quot;type&quot;: &quot;record&quot;,\n        &quot;name&quot;: &quot;Header&quot;,\n        &quot;namespace&quot;: &quot;mypackage.monitor&quot;,\n        &quot;fields&quot;: [\n          {\n            &quot;name&quot;: &quot;apiKey&quot;,\n            &quot;type&quot;: &quot;string&quot;\n          },\n          {\n            &quot;name&quot;: &quot;signature&quot;,\n            &quot;type&quot;: &quot;string&quot;\n          },\n          {\n            &quot;name&quot;: &quot;nonce&quot;,\n            &quot;type&quot;: &quot;int&quot;\n          }\n        ]\n      }\n    },\n    {\n      &quot;name&quot;: &quot;b&quot;,\n      &quot;type&quot;: {\n        &quot;type&quot;: &quot;record&quot;,\n        &quot;name&quot;: &quot;MonitorEnvelope&quot;,\n        &quot;fields&quot;: [\n          {\n            &quot;name&quot;: &quot;fields&quot;,\n            &quot;type&quot;: {\n              &quot;type&quot;: &quot;array&quot;,\n              &quot;items&quot;: {\n                &quot;type&quot;: &quot;record&quot;,\n                &quot;name&quot;: &quot;Field&quot;,\n                &quot;fields&quot;: [\n                  {\n                    &quot;name&quot;: &quot;name&quot;,\n                    &quot;type&quot;: &quot;string&quot;\n                  },\n                  {\n                    &quot;name&quot;: &quot;value&quot;,\n                    &quot;type&quot;: &quot;string&quot;\n                  }\n                ]\n              },\n              &quot;java-class&quot;: &quot;[Lmypackage.monitor.Field;&quot;\n            }\n          }\n        ]\n      }\n    }\n  ]\n}\n</code></pre>\n<p>ACTUAL RESULT:</p>\n<pre><code>{\n  &quot;type&quot;: &quot;record&quot;,\n  &quot;name&quot;: &quot;MonitorStateSchema&quot;,\n  &quot;namespace&quot;: &quot;mypackage.monitor&quot;,\n  &quot;fields&quot;: [\n    {\n      &quot;name&quot;: &quot;a&quot;,\n      &quot;type&quot;: {\n        &quot;type&quot;: &quot;record&quot;,\n        &quot;name&quot;: &quot;Header&quot;,\n        &quot;namespace&quot;: &quot;mypackage.monitor&quot;,\n        &quot;fields&quot;: [\n          {\n            &quot;name&quot;: &quot;apiKey&quot;,\n            &quot;type&quot;: &quot;string&quot;\n          },\n          {\n            &quot;name&quot;: &quot;nonce&quot;,\n            &quot;type&quot;: &quot;int&quot;\n          },\n          {\n            &quot;name&quot;: &quot;signature&quot;,\n            &quot;type&quot;: &quot;string&quot;\n          }\n        ]\n      }\n    },\n    {\n      &quot;name&quot;: &quot;b&quot;,\n      &quot;type&quot;: {\n        &quot;type&quot;: &quot;record&quot;,\n        &quot;name&quot;: &quot;MonitorStateEnvelope&quot;,\n        &quot;fields&quot;: [\n          {\n            &quot;name&quot;: &quot;fields&quot;,\n            &quot;type&quot;: {\n              &quot;type&quot;: &quot;array&quot;,\n              &quot;items&quot;: {\n                &quot;type&quot;: &quot;record&quot;,\n                &quot;name&quot;: &quot;Field&quot;,\n                &quot;namespace&quot;: &quot;mypackage.monitor&quot;,\n                &quot;fields&quot;: [\n                  {\n                    &quot;name&quot;: &quot;name&quot;,\n                    &quot;type&quot;: &quot;string&quot;\n                  },\n                  {\n                    &quot;name&quot;: &quot;value&quot;,\n                    &quot;type&quot;: &quot;string&quot;\n                  }\n                ]\n              },\n              &quot;java-class&quot;: &quot;[Lmypackage.monitor.Field;&quot;\n            }\n          }\n        ]\n      }\n    },\n    {\n      &quot;name&quot;: &quot;c&quot;,\n      &quot;type&quot;: {\n        &quot;type&quot;: &quot;record&quot;,\n        &quot;name&quot;: &quot;MetaResponse&quot;,\n        &quot;namespace&quot;: &quot;mypackage.monitor&quot;,\n        &quot;fields&quot;: [\n          {\n            &quot;name&quot;: &quot;code&quot;,\n            &quot;type&quot;: &quot;int&quot;\n          },\n          {\n            &quot;name&quot;: &quot;message&quot;,\n            &quot;type&quot;: &quot;string&quot;\n          },\n          {\n            &quot;name&quot;: &quot;uuid&quot;,\n            &quot;type&quot;: &quot;string&quot;\n          }\n        ]\n      }\n    }\n  ]\n}\n</code></pre>\n<p>Seems that it is ordering by alphabetical order on the name of the field and it is breaking the application when deserializing the byte array. Is there any reason for this to happen?</p>\n"},{"tags":["java","tomcat","cookies"],"comments":[{"owner":{"account_id":593875,"reputation":20383,"user_id":276232,"accept_rate":50,"display_name":"Christopher Schultz"},"score":0,"creation_date":1478368552,"post_id":40399811,"comment_id":68129532,"body_markdown":"I&#39;m not reading that. Where&#39;s the character `0x44` in all that? Basically, you can&#39;t put that character into a cookie value: you need to encode it somehow. So, either figure out why `0x44` is ending up in your cookie value and fix that (because it&#39;s an error?) or encode your binary data using e.g. base64 before dropping it into a cookie.","body":"I&#39;m not reading that. Where&#39;s the character <code>0x44</code> in all that? Basically, you can&#39;t put that character into a cookie value: you need to encode it somehow. So, either figure out why <code>0x44</code> is ending up in your cookie value and fix that (because it&#39;s an error?) or encode your binary data using e.g. base64 before dropping it into a cookie."}],"answers":[{"tags":[],"owner":{"account_id":450557,"reputation":16963,"user_id":845948,"display_name":"ryanbraganza"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1482358398,"creation_date":1482358398,"answer_id":41272800,"question_id":40399811,"body_markdown":"Character `44` (comma) is not valid in a cookie value.\r\n\r\nSee https://www.rfc-editor.org/rfc/rfc6265 for more details.","title":"Java, Tomcat : AN invalid character was present in the cookie value","body":"<p>Character <code>44</code> (comma) is not valid in a cookie value.</p>\n<p>See <a href=\"https://www.rfc-editor.org/rfc/rfc6265\" rel=\"nofollow noreferrer\">https://www.rfc-editor.org/rfc/rfc6265</a> for more details.</p>\n"},{"tags":[],"owner":{"account_id":27806320,"reputation":1,"user_id":21229644,"display_name":"Yerko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676662683,"creation_date":1676662683,"answer_id":75488592,"question_id":40399811,"body_markdown":"The solution for me was to change the version of Tomcat, I was working with 8.5 and I was getting the character error in cookie value, I changed to Tomcat 9 and the problem continued, finally with Tomcat 7 it was solved. The most logical option is to replace the commas in the cookie values, but if you want to quickly fix the problem locally and keep working you might consider switching from Tomcat.","title":"Java, Tomcat : AN invalid character was present in the cookie value","body":"<p>The solution for me was to change the version of Tomcat, I was working with 8.5 and I was getting the character error in cookie value, I changed to Tomcat 9 and the problem continued, finally with Tomcat 7 it was solved. The most logical option is to replace the commas in the cookie values, but if you want to quickly fix the problem locally and keep working you might consider switching from Tomcat.</p>\n"}],"owner":{"account_id":1637644,"reputation":5167,"user_id":1510701,"accept_rate":60,"display_name":"We are Borg"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5856,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1676662683,"creation_date":1478170831,"question_id":40399811,"body_markdown":"I am working a SPring-MVC project where I am trying to set the cookie. I am using Tomcat7, And I have already set the cookie processor in context.xml to `Rfc6265CookieProcessor`. Currently I am getting the following error.\r\n\r\nError log :\r\n\r\n    HTTP Status 500 - Request processing failed; nested exception is java.lang.IllegalArgumentException: An invalid character [44] was present in the Cookie value\r\n    \r\n    type Exception report\r\n    \r\n    message Request processing failed; nested exception is java.lang.IllegalArgumentException: An invalid character [44] was present in the Cookie value\r\n    \r\n    description The server encountered an internal error that prevented it from fulfilling this request.\r\n    \r\n    exception\r\n    \r\n    org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalArgumentException: An invalid character [44] was present in the Cookie value\r\n    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:979)\r\n    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)\r\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:648)\r\n    org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)\r\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n\r\n\r\nCookie values to be set : The spaces are not actually there, got them while reformatting in IntelliJ to get them in one paragraph :\r\n\r\n      s.d774b7c6eabba92fce3edbed8a9b003b,\r\n    s.bdf5f951e4ab858aac87fb182439f57f,\r\n    s.e77bd0cd86b4af86c4a550ec11d71d4c,\r\n                            s.431334e112350c9d545f7a44cbcc530d,\r\n                            s.6e6057e5483b538cf9c6daf2934fd825,\r\n                            s.ea2438094c8631123fab3bf3efb7ec17,\r\n                            s.e17b1d9dd1b9702ca8c9e95d30906dd5, s .3f 3 c8f3fc19597025ef87dafc0fb277a, s .5531\r\n                    b742d6e12717f4071818b5861bd2, s .420811998d\r\n                    b14d0a68dd9e3d3c04849f, s.d8ed1aa3b0a2e513d449a96182898160, s.f3b5784d6e777032c6b7576e7d824af0, s .69\r\n                    bc19557e43fcfa83816f427b60a09d, s .5677087e bc57003436c55f49fceff5cb, s .5f\r\n                    a872b3e84fd69618534940034e1adb, s.fe4184c9b925ddf04def79c0c55392ca, s .74e4438d 05f 267\r\n                    c48297a0c66a7dbeba, s .95e c071a356cf1998d809267006725db, s .9 b72a01cfda4509833c1f0c7bf2afdac, s .5240f\r\n                    10897d 2f 96f 49d 0328 a2521519c, s .518 cd1d749fbba6540424874d64c5443","title":"Java, Tomcat : AN invalid character was present in the cookie value","body":"<p>I am working a SPring-MVC project where I am trying to set the cookie. I am using Tomcat7, And I have already set the cookie processor in context.xml to <code>Rfc6265CookieProcessor</code>. Currently I am getting the following error.</p>\n\n<p>Error log :</p>\n\n<pre><code>HTTP Status 500 - Request processing failed; nested exception is java.lang.IllegalArgumentException: An invalid character [44] was present in the Cookie value\n\ntype Exception report\n\nmessage Request processing failed; nested exception is java.lang.IllegalArgumentException: An invalid character [44] was present in the Cookie value\n\ndescription The server encountered an internal error that prevented it from fulfilling this request.\n\nexception\n\norg.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalArgumentException: An invalid character [44] was present in the Cookie value\norg.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:979)\norg.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:648)\norg.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n</code></pre>\n\n<p>Cookie values to be set : The spaces are not actually there, got them while reformatting in IntelliJ to get them in one paragraph :</p>\n\n<pre><code>  s.d774b7c6eabba92fce3edbed8a9b003b,\ns.bdf5f951e4ab858aac87fb182439f57f,\ns.e77bd0cd86b4af86c4a550ec11d71d4c,\n                        s.431334e112350c9d545f7a44cbcc530d,\n                        s.6e6057e5483b538cf9c6daf2934fd825,\n                        s.ea2438094c8631123fab3bf3efb7ec17,\n                        s.e17b1d9dd1b9702ca8c9e95d30906dd5, s .3f 3 c8f3fc19597025ef87dafc0fb277a, s .5531\n                b742d6e12717f4071818b5861bd2, s .420811998d\n                b14d0a68dd9e3d3c04849f, s.d8ed1aa3b0a2e513d449a96182898160, s.f3b5784d6e777032c6b7576e7d824af0, s .69\n                bc19557e43fcfa83816f427b60a09d, s .5677087e bc57003436c55f49fceff5cb, s .5f\n                a872b3e84fd69618534940034e1adb, s.fe4184c9b925ddf04def79c0c55392ca, s .74e4438d 05f 267\n                c48297a0c66a7dbeba, s .95e c071a356cf1998d809267006725db, s .9 b72a01cfda4509833c1f0c7bf2afdac, s .5240f\n                10897d 2f 96f 49d 0328 a2521519c, s .518 cd1d749fbba6540424874d64c5443\n</code></pre>\n"},{"tags":["java","hibernate","jpa","spring-data-jpa","hibernate-mapping"],"answers":[{"tags":[],"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676662654,"creation_date":1676662654,"answer_id":75488588,"question_id":75488429,"body_markdown":"According to [the JPA WikiBook][1], you might need to use `@MapKeyJoinColumn` to specify the column that&#39;s used to join two entities. I also don&#39;t think you want both `@OneToMany` and `@ElementCollection` for the same relationship.\r\n\r\nFor example, this should work:\r\n```java\r\n@Entity\r\npublic class SecondClass extends DomainObject {\r\n    \r\n    @Id\r\n    @GeneratedValue\r\n    private Long id;\r\n\r\n    @ElementCollection\r\n    @MapKeyJoinColumn(name = &quot;MY_ENTITY_ID&quot;)\r\n    private final Map&lt;MyEntityClass, Integer&gt; myMap;\r\n}\r\n```\r\n\r\n  [1]: https://en.wikibooks.org/wiki/Java_Persistence/Relationships#Map_Key_Columns_(JPA_2.0)","title":"Persisting a Map where the Key is an Entity with Hibernate and Spring","body":"<p>According to <a href=\"https://en.wikibooks.org/wiki/Java_Persistence/Relationships#Map_Key_Columns_(JPA_2.0)\" rel=\"nofollow noreferrer\">the JPA WikiBook</a>, you might need to use <code>@MapKeyJoinColumn</code> to specify the column that's used to join two entities. I also don't think you want both <code>@OneToMany</code> and <code>@ElementCollection</code> for the same relationship.</p>\n<p>For example, this should work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class SecondClass extends DomainObject {\n    \n    @Id\n    @GeneratedValue\n    private Long id;\n\n    @ElementCollection\n    @MapKeyJoinColumn(name = &quot;MY_ENTITY_ID&quot;)\n    private final Map&lt;MyEntityClass, Integer&gt; myMap;\n}\n</code></pre>\n"}],"owner":{"account_id":26272722,"reputation":3,"user_id":19942409,"display_name":"rmayo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":269,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676662654,"creation_date":1676661348,"question_id":75488429,"body_markdown":"New to Hibernate and I want to persist a hashmap where the key is another entity. I&#39;ve gone through a number of online articles and similar questions and all of them produce some form of IllegalStateException.\r\n\r\nHere is what I have currently:\r\n\r\n```java\r\n@Entity\r\npublic class SecondClass extends DomainObject {\r\n    \r\n    @Id\r\n    @GeneratedValue\r\n    private Long id;\r\n\r\n    @OneToMany ( cascade = CascadeType.ALL, fetch = FetchType.EAGER )\r\n    @ElementCollection\r\n    @MapKeyClass ( MyEntity.class )\r\n    private final Map&lt;MyEntityClass, Integer&gt; myMap;\r\n}\r\n```\r\n\r\nI am too inexperienced at Hibernate to know what the problem is or how to fix it. Any help would be appreciated.","title":"Persisting a Map where the Key is an Entity with Hibernate and Spring","body":"<p>New to Hibernate and I want to persist a hashmap where the key is another entity. I've gone through a number of online articles and similar questions and all of them produce some form of IllegalStateException.</p>\n<p>Here is what I have currently:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class SecondClass extends DomainObject {\n    \n    @Id\n    @GeneratedValue\n    private Long id;\n\n    @OneToMany ( cascade = CascadeType.ALL, fetch = FetchType.EAGER )\n    @ElementCollection\n    @MapKeyClass ( MyEntity.class )\n    private final Map&lt;MyEntityClass, Integer&gt; myMap;\n}\n</code></pre>\n<p>I am too inexperienced at Hibernate to know what the problem is or how to fix it. Any help would be appreciated.</p>\n"},{"tags":["java","arrays","json","android-studio"],"answers":[{"tags":[],"owner":{"account_id":4397202,"reputation":1432,"user_id":3583831,"accept_rate":78,"display_name":"Kruti Patel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1472469627,"creation_date":1472469627,"answer_id":39205030,"question_id":39204438,"body_markdown":"**Here is the code:**\r\n\r\n    JsonParser parser =  new JsonParser();\r\n\r\n    JsonElement jsonElement = parser.parse(json);\r\n    JsonObject jsonObj = jsonElement.getAsJsonObject();\r\n\r\n    JsonArray data = new JsonArray();\r\n    data = jsonObj.getAsJsonArray(&quot;data&quot;);\r\n\r\n    JsonArray developer = new JsonArray();\r\n    JsonArray tester = new JsonArray();\r\n    JsonArray analyst = new JsonArray();\r\n\r\n    for (int i=0; i &lt; data.size; i++){\r\n    JsonObject itemArr = (JsonObject)data.get(i);\r\n    JsonObject temp = new JsonObject();\r\n\r\n    if(itemArr.get(&quot;chrDesigName&quot;).getAsString().equals(&quot;Developer&quot;)){\r\n       temp.addProperty(&quot;chrempName&quot;,itemArr.get(&quot;chrempName&quot;).getAsString());\r\n       developer.add(temp);\r\n    }else if(itemArr.get(&quot;chrDesigName&quot;).getAsString().equals(&quot;Tester&quot;)){\r\n       temp.addProperty(&quot;chrempName&quot;,itemArr.get(&quot;chrempName&quot;).getAsString());\r\n       tester.add(temp);\r\n    }else if(itemArr.get(&quot;chrDesigName&quot;).getAsString().equals(&quot;Analyst&quot;)){\r\n       temp.addProperty(&quot;chrempName&quot;,itemArr.get(&quot;chrempName&quot;).getAsString());\r\n       analyst.add(temp);\r\n    }\r\n    }\r\n\r\n    JsonObject resultObject = new JsonObject();\r\n    resultObject.add(&quot;Developer&quot;,developer);\r\n    resultObject.add(&quot;Tester&quot;,tester);\r\n    resultObject.add(&quot;Analyst&quot;,analyst);\r\n\r\nThis way you can make a new `resultObject` object according to your need. This is a static way. You can take it to dynamic way further. You will need to add `com.google.gson` library to compile this code.","title":"Grouping Json response with keys in java - android studio","body":"<p><strong>Here is the code:</strong></p>\n\n<pre><code>JsonParser parser =  new JsonParser();\n\nJsonElement jsonElement = parser.parse(json);\nJsonObject jsonObj = jsonElement.getAsJsonObject();\n\nJsonArray data = new JsonArray();\ndata = jsonObj.getAsJsonArray(\"data\");\n\nJsonArray developer = new JsonArray();\nJsonArray tester = new JsonArray();\nJsonArray analyst = new JsonArray();\n\nfor (int i=0; i &lt; data.size; i++){\nJsonObject itemArr = (JsonObject)data.get(i);\nJsonObject temp = new JsonObject();\n\nif(itemArr.get(\"chrDesigName\").getAsString().equals(\"Developer\")){\n   temp.addProperty(\"chrempName\",itemArr.get(\"chrempName\").getAsString());\n   developer.add(temp);\n}else if(itemArr.get(\"chrDesigName\").getAsString().equals(\"Tester\")){\n   temp.addProperty(\"chrempName\",itemArr.get(\"chrempName\").getAsString());\n   tester.add(temp);\n}else if(itemArr.get(\"chrDesigName\").getAsString().equals(\"Analyst\")){\n   temp.addProperty(\"chrempName\",itemArr.get(\"chrempName\").getAsString());\n   analyst.add(temp);\n}\n}\n\nJsonObject resultObject = new JsonObject();\nresultObject.add(\"Developer\",developer);\nresultObject.add(\"Tester\",tester);\nresultObject.add(\"Analyst\",analyst);\n</code></pre>\n\n<p>This way you can make a new <code>resultObject</code> object according to your need. This is a static way. You can take it to dynamic way further. You will need to add <code>com.google.gson</code> library to compile this code.</p>\n"},{"tags":[],"owner":{"account_id":8860912,"reputation":4843,"user_id":6617152,"display_name":"Ramachandran.A.G"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1472538099,"creation_date":1472470165,"answer_id":39205211,"question_id":39204438,"body_markdown":"As a quick hack , i have used 2 different libraries to do it. You can &quot;uniformize&quot; using Jackson as well.\r\n\r\n\r\n    import java.io.StringWriter;\r\n    import java.util.ArrayList;\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    \r\n    import org.codehaus.jackson.map.ObjectMapper;\r\n    \r\n    import com.google.gson.JsonArray;\r\n    import com.google.gson.JsonElement;\r\n    import com.google.gson.JsonParser;\r\n    \r\n    public class JsonReformatter {\r\n    \r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\tString jsonString = &quot;{\\&quot;code\\&quot;: \\&quot;0\\&quot;,\\&quot;data\\&quot;: [{\\&quot;chrDesigName\\&quot;: \\&quot;Developer\\&quot;,\\&quot;chrempName\\&quot;: \\&quot;Test Employee1\\&quot;},{\\&quot;chrDesigName\\&quot;: \\&quot;Developer\\&quot;,\\&quot;chrempName\\&quot;: \\&quot;Test Employee2\\&quot;},{\\&quot;chrDesigName\\&quot;: \\&quot;Tester\\&quot;,\\&quot;chrempName\\&quot;: \\&quot;Test Employee3\\&quot;},{\\&quot;chrDesigName\\&quot;: \\&quot;Analyst\\&quot;,\\&quot;chrempName\\&quot;: \\&quot;Test Employee4\\&quot;},{\\&quot;chrDesigName\\&quot;: \\&quot;Developer\\&quot;,\\&quot;chrempName\\&quot;: \\&quot;Test Employee5\\&quot;},{\\&quot;chrDesigName\\&quot;: \\&quot;Tester\\&quot;,\\&quot;chrempName\\&quot;: \\&quot;Test Employee6\\&quot;}]}&quot;;\r\n    \r\n    \t\tObjectMapper mapper = new ObjectMapper();\r\n    \r\n    \t\t// Map&lt;String, Object&gt; dataMap = mapper.readValue(jsonString,\r\n    \t\t// new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {\r\n    \t\t// });\r\n    \t\t//\r\n    \t\t// System.out.println(dataMap.get(&quot;data&quot;) +\r\n    \t\t// ((ArrayList)dataMap.get(&quot;data&quot;)).get(0).getClass().getName()) ;\r\n    \r\n    \t\tJsonArray dataArray = new JsonParser().parse(jsonString).getAsJsonObject().getAsJsonArray(&quot;data&quot;);\r\n    \r\n    \t\tHashMap&lt;String, List&lt;String&gt;&gt; designationsMap = new HashMap&lt;String, List&lt;String&gt;&gt;();\r\n    \r\n    \t\tfor (JsonElement element : dataArray) {\r\n    \t\t\tString designation = element.getAsJsonObject().get(&quot;chrDesigName&quot;).getAsString();\r\n    \t\t\tString empName = element.getAsJsonObject().get(&quot;chrempName&quot;).getAsString();\r\n    \t\t\tif (designationsMap.containsKey(designation)) {\r\n    \t\t\t\tdesignationsMap.get(designation).add(empName);\r\n    \t\t\t} else {\r\n    \t\t\t\tArrayList&lt;String&gt; emptyList = new ArrayList&lt;String&gt;();\r\n    \t\t\t\temptyList.add(empName);\r\n    \t\t\t\tdesignationsMap.put(designation, emptyList);\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\tStringWriter result = new StringWriter();\r\n    \t\tmapper.writeValue(result, designationsMap);\r\n    \t\tSystem.out.println(result);\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\nThis prints\r\n\r\n`{&quot;Analyst&quot;:[&quot;Test Employee4&quot;],&quot;Tester&quot;:[&quot;Test Employee3&quot;,&quot;Test` `Employee6&quot;],&quot;Developer&quot;:[&quot;Test Employee1&quot;,&quot;Test Employee2&quot;,&quot;Test Employee5&quot;]}`\r\n\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.8.1&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n\r\n","title":"Grouping Json response with keys in java - android studio","body":"<p>As a quick hack , i have used 2 different libraries to do it. You can \"uniformize\" using Jackson as well.</p>\n\n<pre><code>import java.io.StringWriter;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\n\nimport org.codehaus.jackson.map.ObjectMapper;\n\nimport com.google.gson.JsonArray;\nimport com.google.gson.JsonElement;\nimport com.google.gson.JsonParser;\n\npublic class JsonReformatter {\n\n    public static void main(String[] args) throws Exception {\n        String jsonString = \"{\\\"code\\\": \\\"0\\\",\\\"data\\\": [{\\\"chrDesigName\\\": \\\"Developer\\\",\\\"chrempName\\\": \\\"Test Employee1\\\"},{\\\"chrDesigName\\\": \\\"Developer\\\",\\\"chrempName\\\": \\\"Test Employee2\\\"},{\\\"chrDesigName\\\": \\\"Tester\\\",\\\"chrempName\\\": \\\"Test Employee3\\\"},{\\\"chrDesigName\\\": \\\"Analyst\\\",\\\"chrempName\\\": \\\"Test Employee4\\\"},{\\\"chrDesigName\\\": \\\"Developer\\\",\\\"chrempName\\\": \\\"Test Employee5\\\"},{\\\"chrDesigName\\\": \\\"Tester\\\",\\\"chrempName\\\": \\\"Test Employee6\\\"}]}\";\n\n        ObjectMapper mapper = new ObjectMapper();\n\n        // Map&lt;String, Object&gt; dataMap = mapper.readValue(jsonString,\n        // new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {\n        // });\n        //\n        // System.out.println(dataMap.get(\"data\") +\n        // ((ArrayList)dataMap.get(\"data\")).get(0).getClass().getName()) ;\n\n        JsonArray dataArray = new JsonParser().parse(jsonString).getAsJsonObject().getAsJsonArray(\"data\");\n\n        HashMap&lt;String, List&lt;String&gt;&gt; designationsMap = new HashMap&lt;String, List&lt;String&gt;&gt;();\n\n        for (JsonElement element : dataArray) {\n            String designation = element.getAsJsonObject().get(\"chrDesigName\").getAsString();\n            String empName = element.getAsJsonObject().get(\"chrempName\").getAsString();\n            if (designationsMap.containsKey(designation)) {\n                designationsMap.get(designation).add(empName);\n            } else {\n                ArrayList&lt;String&gt; emptyList = new ArrayList&lt;String&gt;();\n                emptyList.add(empName);\n                designationsMap.put(designation, emptyList);\n            }\n        }\n\n        StringWriter result = new StringWriter();\n        mapper.writeValue(result, designationsMap);\n        System.out.println(result);\n\n    }\n\n}\n</code></pre>\n\n<p>This prints</p>\n\n<p><code>{\"Analyst\":[\"Test Employee4\"],\"Tester\":[\"Test Employee3\",\"Test</code> <code>Employee6\"],\"Developer\":[\"Test Employee1\",\"Test Employee2\",\"Test Employee5\"]}</code></p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;version&gt;2.8.1&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n    &lt;artifactId&gt;gson&lt;/artifactId&gt;\n    &lt;version&gt;2.7&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6018494,"reputation":3005,"user_id":4726452,"accept_rate":83,"display_name":"Ra Ka"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1472471013,"creation_date":1472471013,"answer_id":39205512,"question_id":39204438,"body_markdown":"You can simply achieve this by: first storing all the &#39;chrDesigName&#39; value in an array and then loop through each element of this array to create your desired JSON object.\r\n\r\n    e.g. //using JSON.simple module for decode/encode into JSON object.\r\n    JSONObject obj1 = {&quot;code&quot;:&quot;0&quot;,&quot;data&quot;:    \r\n    [ {&quot;chrDesigName&quot;:&quot;Developer&quot;,&quot;chrempName&quot;:&quot;Test Employee1&quot;},\r\n      {&quot;chrDesigName&quot;:&quot;Developer&quot;,&quot;chrempName&quot;:&quot;Test Employee2&quot;}, \r\n      {&quot;chrDesigName&quot;:&quot;Tester&quot;,&quot;chrempName&quot;:&quot;Test Employee3&quot;},\r\n      {&quot;chrDesigName&quot;:&quot;Analyst&quot;,&quot;chrempName&quot;:&quot;Test Employee4&quot;},\r\n      {&quot;chrDesigName&quot;:&quot;Developer&quot;,&quot;chrempName&quot;:&quot;Test Employee5&quot;},\r\n      {&quot;chrDesigName&quot;:&quot;Tester&quot;,&quot;chrempName&quot;:&quot;Test Employee6&quot;}]};\r\n    \r\n    //Now, store all &#39;chrDesigName&#39; in a local arrray.\r\n    List&lt;String&gt; arr = new ArrayList&lt;String&gt;();\r\n    for(JSONObject json : obj1.get(&quot;data&quot;)){\r\n       //avoid to add duplicate entry. e.g. there are multiple Developer so avoid adding more than 1 times.\r\n       boolean isDuplicate = false; \r\n       for(int i=0; i&lt;arr.size();i++){        \r\n           if(arr[i]==json.get(&quot;chrDesigName&quot;)){\r\n               isDuplicate = true;\r\n           }\r\n        }\r\n        if(isDuplicate==false){\r\n            arr.add(json.get(&quot;chrDesigName&quot;));\r\n        }\r\n    }\r\n    \r\n    //Now finally create your desired parsed JSON object.\r\n    JSONObject result= new JSONObject(); //final Result JSON object.\r\n    for(String chrDesigName : arr){\r\n        //first adding empty list.\r\n        result.put(chrDesigName, new ArrayList&lt;JSONObject&gt;());\r\n    \r\n        //now, checking on each data obj1 if it has chrDesigName and if yes then getting its chrEmpName and adding in list.\r\n        for(JSONObject json : obj1.get(&quot;data&quot;)){\r\n            if(chrDesigName==json.get(&quot;chrDesigName&quot;){\r\n                JSONObject sub_json = new JSONObject();\r\n                sub_json.put(&quot;chrempName&quot;,json.get(&quot;chrempName&quot;);\r\n                result.get(chrDesigName).add(sub_json);\r\n            }\r\n        }    \r\n    }","title":"Grouping Json response with keys in java - android studio","body":"<p>You can simply achieve this by: first storing all the 'chrDesigName' value in an array and then loop through each element of this array to create your desired JSON object.</p>\n\n<pre><code>e.g. //using JSON.simple module for decode/encode into JSON object.\nJSONObject obj1 = {\"code\":\"0\",\"data\":    \n[ {\"chrDesigName\":\"Developer\",\"chrempName\":\"Test Employee1\"},\n  {\"chrDesigName\":\"Developer\",\"chrempName\":\"Test Employee2\"}, \n  {\"chrDesigName\":\"Tester\",\"chrempName\":\"Test Employee3\"},\n  {\"chrDesigName\":\"Analyst\",\"chrempName\":\"Test Employee4\"},\n  {\"chrDesigName\":\"Developer\",\"chrempName\":\"Test Employee5\"},\n  {\"chrDesigName\":\"Tester\",\"chrempName\":\"Test Employee6\"}]};\n\n//Now, store all 'chrDesigName' in a local arrray.\nList&lt;String&gt; arr = new ArrayList&lt;String&gt;();\nfor(JSONObject json : obj1.get(\"data\")){\n   //avoid to add duplicate entry. e.g. there are multiple Developer so avoid adding more than 1 times.\n   boolean isDuplicate = false; \n   for(int i=0; i&lt;arr.size();i++){        \n       if(arr[i]==json.get(\"chrDesigName\")){\n           isDuplicate = true;\n       }\n    }\n    if(isDuplicate==false){\n        arr.add(json.get(\"chrDesigName\"));\n    }\n}\n\n//Now finally create your desired parsed JSON object.\nJSONObject result= new JSONObject(); //final Result JSON object.\nfor(String chrDesigName : arr){\n    //first adding empty list.\n    result.put(chrDesigName, new ArrayList&lt;JSONObject&gt;());\n\n    //now, checking on each data obj1 if it has chrDesigName and if yes then getting its chrEmpName and adding in list.\n    for(JSONObject json : obj1.get(\"data\")){\n        if(chrDesigName==json.get(\"chrDesigName\"){\n            JSONObject sub_json = new JSONObject();\n            sub_json.put(\"chrempName\",json.get(\"chrempName\");\n            result.get(chrDesigName).add(sub_json);\n        }\n    }    \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9273401,"reputation":1,"user_id":6886689,"display_name":"didik.haryadi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630632362,"creation_date":1630632362,"answer_id":69038541,"question_id":39204438,"body_markdown":"Here is the code:\r\n\r\n\r\n\r\n    public class TestJSONGroup {\r\n        public static void main(String[] args) throws ParseException {\r\n            \r\n            JSONParser parser = new JSONParser();\r\n            String jsonString = &quot;{\\&quot;code\\&quot;:\\&quot;0\\&quot;,\\&quot;data\\&quot;:&quot;\r\n            + &quot;[ {\\&quot;chrDesigName\\&quot;:\\&quot;Developer\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee1\\&quot;},&quot;\r\n            + &quot;  {\\&quot;chrDesigName\\&quot;:\\&quot;Developer\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee2\\&quot;},&quot;\r\n            + &quot;  {\\&quot;chrDesigName\\&quot;:\\&quot;Tester\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee3\\&quot;},&quot;\r\n            + &quot;  {\\&quot;chrDesigName\\&quot;:\\&quot;Analyst\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee4\\&quot;},&quot;\r\n            + &quot;  {\\&quot;chrDesigName\\&quot;:\\&quot;Developer\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee5\\&quot;},&quot;\r\n            + &quot;  {\\&quot;chrDesigName\\&quot;:\\&quot;Tester\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee6\\&quot;}]}&quot;;\r\n            \r\n            //JSONObject obj1 =  (JSONObject) parser.parse( jsonString );\r\n            JSONObject obj1 = new JSONObject(jsonString);\r\n    \r\n            //Now, store all &#39;chrDesigName&#39; in a local arrray.\r\n            List&lt;String&gt; arr = new ArrayList&lt;String&gt;();\r\n            \r\n            JSONArray json = obj1.getJSONArray(&quot;data&quot;);\r\n            for (int j = 0; j &lt; json.length(); j++) {\r\n               //avoid to add duplicate entry. e.g. there are multiple Developer so avoid adding more than 1 times.\r\n               boolean isDuplicate = false; \r\n               String chrDesigName = new String();\r\n               for(int i=0; i&lt;arr.size();i++){\r\n                   JSONObject jsonObject1 = json.getJSONObject(j);\r\n                   chrDesigName = jsonObject1.optString(&quot;chrDesigName&quot;); \r\n                   if(arr.get(i).equalsIgnoreCase(chrDesigName.trim())){\r\n                       isDuplicate = true;\r\n                   }\r\n                }\r\n                if(isDuplicate==false){\r\n                    arr.add(chrDesigName);\r\n                }\r\n            }\r\n            arr.remove(0);\r\n    \r\n            //Now finally create your desired parsed JSON object.\r\n            JSONObject result= new JSONObject(); //final Result JSON object.\r\n            for(String chrDesigName : arr){\r\n                //first adding empty list.\r\n                result.put(chrDesigName, new ArrayList&lt;JSONObject&gt;());\r\n                //now, checking on each data obj1 if it has chrDesigName and if yes then getting its chrEmpName and adding in list.\r\n                String chrDesigName2 = new String();\r\n                JSONArray array = new JSONArray();\r\n                for (int j = 0; j &lt; json.length(); j++) {\r\n                    JSONObject jsonObject1 = json.getJSONObject(j);\r\n                    chrDesigName2 = jsonObject1.optString(&quot;chrDesigName&quot;);\r\n                    if(chrDesigName.equalsIgnoreCase(chrDesigName2.trim())){\r\n                        JSONObject sub_json = new JSONObject();\r\n                        sub_json.put(&quot;chrempName&quot;,json.get(j));\r\n                        array.put(json.get(j));\r\n                    }\r\n                } \r\n                result.put(chrDesigName, array);\r\n            }\r\n            System.out.println(&quot;result: &quot;+ result.toString());\r\n        }\r\n\r\n\r\nand the result  will be, just modify in some other \r\n\r\n    {\r\n       &quot;Analyst&quot;: [\r\n          {\r\n             &quot;chrDesigName&quot;: &quot;Analyst&quot;,\r\n             &quot;chrempName&quot;: &quot;Test Employee4&quot;\r\n          }\r\n       ],\r\n       &quot;Tester&quot;: [\r\n          {\r\n             &quot;chrDesigName&quot;: &quot;Tester&quot;,\r\n             &quot;chrempName&quot;: &quot;Test Employee3&quot;\r\n          },\r\n          {\r\n             &quot;chrDesigName&quot;: &quot;Tester&quot;,\r\n             &quot;chrempName&quot;: &quot;Test Employee6&quot;\r\n          }\r\n       ],\r\n       &quot;Developer&quot;: [\r\n          {\r\n             &quot;chrDesigName&quot;: &quot;Developer&quot;,\r\n             &quot;chrempName&quot;: &quot;Test Employee1&quot;\r\n          },\r\n          {\r\n             &quot;chrDesigName&quot;: &quot;Developer&quot;,\r\n             &quot;chrempName&quot;: &quot;Test Employee2&quot;\r\n          },\r\n          {\r\n             &quot;chrDesigName&quot;: &quot;Developer&quot;,\r\n             &quot;chrempName&quot;: &quot;Test Employee5&quot;\r\n          }\r\n       ]\r\n    }","title":"Grouping Json response with keys in java - android studio","body":"<p>Here is the code:</p>\n<pre><code>public class TestJSONGroup {\n    public static void main(String[] args) throws ParseException {\n        \n        JSONParser parser = new JSONParser();\n        String jsonString = &quot;{\\&quot;code\\&quot;:\\&quot;0\\&quot;,\\&quot;data\\&quot;:&quot;\n        + &quot;[ {\\&quot;chrDesigName\\&quot;:\\&quot;Developer\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee1\\&quot;},&quot;\n        + &quot;  {\\&quot;chrDesigName\\&quot;:\\&quot;Developer\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee2\\&quot;},&quot;\n        + &quot;  {\\&quot;chrDesigName\\&quot;:\\&quot;Tester\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee3\\&quot;},&quot;\n        + &quot;  {\\&quot;chrDesigName\\&quot;:\\&quot;Analyst\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee4\\&quot;},&quot;\n        + &quot;  {\\&quot;chrDesigName\\&quot;:\\&quot;Developer\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee5\\&quot;},&quot;\n        + &quot;  {\\&quot;chrDesigName\\&quot;:\\&quot;Tester\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee6\\&quot;}]}&quot;;\n        \n        //JSONObject obj1 =  (JSONObject) parser.parse( jsonString );\n        JSONObject obj1 = new JSONObject(jsonString);\n\n        //Now, store all 'chrDesigName' in a local arrray.\n        List&lt;String&gt; arr = new ArrayList&lt;String&gt;();\n        \n        JSONArray json = obj1.getJSONArray(&quot;data&quot;);\n        for (int j = 0; j &lt; json.length(); j++) {\n           //avoid to add duplicate entry. e.g. there are multiple Developer so avoid adding more than 1 times.\n           boolean isDuplicate = false; \n           String chrDesigName = new String();\n           for(int i=0; i&lt;arr.size();i++){\n               JSONObject jsonObject1 = json.getJSONObject(j);\n               chrDesigName = jsonObject1.optString(&quot;chrDesigName&quot;); \n               if(arr.get(i).equalsIgnoreCase(chrDesigName.trim())){\n                   isDuplicate = true;\n               }\n            }\n            if(isDuplicate==false){\n                arr.add(chrDesigName);\n            }\n        }\n        arr.remove(0);\n\n        //Now finally create your desired parsed JSON object.\n        JSONObject result= new JSONObject(); //final Result JSON object.\n        for(String chrDesigName : arr){\n            //first adding empty list.\n            result.put(chrDesigName, new ArrayList&lt;JSONObject&gt;());\n            //now, checking on each data obj1 if it has chrDesigName and if yes then getting its chrEmpName and adding in list.\n            String chrDesigName2 = new String();\n            JSONArray array = new JSONArray();\n            for (int j = 0; j &lt; json.length(); j++) {\n                JSONObject jsonObject1 = json.getJSONObject(j);\n                chrDesigName2 = jsonObject1.optString(&quot;chrDesigName&quot;);\n                if(chrDesigName.equalsIgnoreCase(chrDesigName2.trim())){\n                    JSONObject sub_json = new JSONObject();\n                    sub_json.put(&quot;chrempName&quot;,json.get(j));\n                    array.put(json.get(j));\n                }\n            } \n            result.put(chrDesigName, array);\n        }\n        System.out.println(&quot;result: &quot;+ result.toString());\n    }\n</code></pre>\n<p>and the result  will be, just modify in some other</p>\n<pre><code>{\n   &quot;Analyst&quot;: [\n      {\n         &quot;chrDesigName&quot;: &quot;Analyst&quot;,\n         &quot;chrempName&quot;: &quot;Test Employee4&quot;\n      }\n   ],\n   &quot;Tester&quot;: [\n      {\n         &quot;chrDesigName&quot;: &quot;Tester&quot;,\n         &quot;chrempName&quot;: &quot;Test Employee3&quot;\n      },\n      {\n         &quot;chrDesigName&quot;: &quot;Tester&quot;,\n         &quot;chrempName&quot;: &quot;Test Employee6&quot;\n      }\n   ],\n   &quot;Developer&quot;: [\n      {\n         &quot;chrDesigName&quot;: &quot;Developer&quot;,\n         &quot;chrempName&quot;: &quot;Test Employee1&quot;\n      },\n      {\n         &quot;chrDesigName&quot;: &quot;Developer&quot;,\n         &quot;chrempName&quot;: &quot;Test Employee2&quot;\n      },\n      {\n         &quot;chrDesigName&quot;: &quot;Developer&quot;,\n         &quot;chrempName&quot;: &quot;Test Employee5&quot;\n      }\n   ]\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676662475,"creation_date":1676662475,"answer_id":75488562,"question_id":39204438,"body_markdown":"You can use JSON library such as _Josson_ to do the transformation.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n    Josson josson = Josson.fromJsonString(\r\n        &quot;{\\&quot;code\\&quot;:\\&quot;0\\&quot;,\\&quot;data\\&quot;:&quot; +\r\n        &quot;[ {\\&quot;chrDesigName\\&quot;:\\&quot;Developer\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee1\\&quot;},&quot; +\r\n        &quot;  {\\&quot;chrDesigName\\&quot;:\\&quot;Developer\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee2\\&quot;}, &quot; +\r\n        &quot;  {\\&quot;chrDesigName\\&quot;:\\&quot;Tester\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee3\\&quot;},&quot; +\r\n        &quot;  {\\&quot;chrDesigName\\&quot;:\\&quot;Analyst\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee4\\&quot;},&quot; +\r\n        &quot;  {\\&quot;chrDesigName\\&quot;:\\&quot;Developer\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee5\\&quot;},&quot; +\r\n        &quot;  {\\&quot;chrDesigName\\&quot;:\\&quot;Tester\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee6\\&quot;}]&quot; +\r\n        &quot;}&quot;);\r\n    JsonNode node = josson.getNode(\r\n        &quot;data.group(chrDesigName).map(chrDesigName::elements.map(chrempName)).mergeObjects()&quot;);\r\n    System.out.println(node.toPrettyString());\r\n\r\n__Output__\r\n\r\n    {\r\n      &quot;Developer&quot; : [ {\r\n        &quot;chrempName&quot; : &quot;Test Employee1&quot;\r\n      }, {\r\n        &quot;chrempName&quot; : &quot;Test Employee2&quot;\r\n      }, {\r\n        &quot;chrempName&quot; : &quot;Test Employee5&quot;\r\n      } ],\r\n      &quot;Tester&quot; : [ {\r\n        &quot;chrempName&quot; : &quot;Test Employee3&quot;\r\n      }, {\r\n        &quot;chrempName&quot; : &quot;Test Employee6&quot;\r\n      } ],\r\n      &quot;Analyst&quot; : [ {\r\n        &quot;chrempName&quot; : &quot;Test Employee4&quot;\r\n      } ]\r\n    }\r\n","title":"Grouping Json response with keys in java - android studio","body":"<p>You can use JSON library such as <em>Josson</em> to do the transformation.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<pre><code>Josson josson = Josson.fromJsonString(\n    &quot;{\\&quot;code\\&quot;:\\&quot;0\\&quot;,\\&quot;data\\&quot;:&quot; +\n    &quot;[ {\\&quot;chrDesigName\\&quot;:\\&quot;Developer\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee1\\&quot;},&quot; +\n    &quot;  {\\&quot;chrDesigName\\&quot;:\\&quot;Developer\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee2\\&quot;}, &quot; +\n    &quot;  {\\&quot;chrDesigName\\&quot;:\\&quot;Tester\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee3\\&quot;},&quot; +\n    &quot;  {\\&quot;chrDesigName\\&quot;:\\&quot;Analyst\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee4\\&quot;},&quot; +\n    &quot;  {\\&quot;chrDesigName\\&quot;:\\&quot;Developer\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee5\\&quot;},&quot; +\n    &quot;  {\\&quot;chrDesigName\\&quot;:\\&quot;Tester\\&quot;,\\&quot;chrempName\\&quot;:\\&quot;Test Employee6\\&quot;}]&quot; +\n    &quot;}&quot;);\nJsonNode node = josson.getNode(\n    &quot;data.group(chrDesigName).map(chrDesigName::elements.map(chrempName)).mergeObjects()&quot;);\nSystem.out.println(node.toPrettyString());\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>{\n  &quot;Developer&quot; : [ {\n    &quot;chrempName&quot; : &quot;Test Employee1&quot;\n  }, {\n    &quot;chrempName&quot; : &quot;Test Employee2&quot;\n  }, {\n    &quot;chrempName&quot; : &quot;Test Employee5&quot;\n  } ],\n  &quot;Tester&quot; : [ {\n    &quot;chrempName&quot; : &quot;Test Employee3&quot;\n  }, {\n    &quot;chrempName&quot; : &quot;Test Employee6&quot;\n  } ],\n  &quot;Analyst&quot; : [ {\n    &quot;chrempName&quot; : &quot;Test Employee4&quot;\n  } ]\n}\n</code></pre>\n"}],"owner":{"account_id":8352421,"reputation":46,"user_id":6274040,"accept_rate":40,"display_name":"iOSMAn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4918,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":39205211,"answer_count":5,"score":0,"last_activity_date":1676662475,"creation_date":1472467830,"question_id":39204438,"body_markdown":"I am new to java and android development. I am learning json parsing. I got json response something like this.\r\n\r\n    {&quot;code&quot;:&quot;0&quot;,&quot;data&quot;:    \r\n    [ {&quot;chrDesigName&quot;:&quot;Developer&quot;,&quot;chrempName&quot;:&quot;Test Employee1&quot;},\r\n      {&quot;chrDesigName&quot;:&quot;Developer&quot;,&quot;chrempName&quot;:&quot;Test Employee2&quot;}, \r\n      {&quot;chrDesigName&quot;:&quot;Tester&quot;,&quot;chrempName&quot;:&quot;Test Employee3&quot;},\r\n      {&quot;chrDesigName&quot;:&quot;Analyst&quot;,&quot;chrempName&quot;:&quot;Test Employee4&quot;},\r\n      {&quot;chrDesigName&quot;:&quot;Developer&quot;,&quot;chrempName&quot;:&quot;Test Employee5&quot;},\r\n      {&quot;chrDesigName&quot;:&quot;Tester&quot;,&quot;chrempName&quot;:&quot;Test Employee6&quot;}]\r\n\r\nI want to parse this Json into something like this.\r\n\r\n    {&quot;Developer&quot; : [{&quot;chrempName&quot; : &quot;Test Employee1&quot;},\r\n                        {&quot;chrempName&quot; : &quot;Test Employee2&quot;},\r\n                        {&quot;chrempName&quot; : &quot;Test Employee5&quot;}],\r\n    &quot;Tester&quot; : [{&quot;chrempName&quot; : &quot;Test Employee3&quot;},\r\n                        {&quot;chrempName&quot; : &quot;Test Employee6&quot;}],\r\n    &quot;Analyst&quot; : [{&quot;chrempName&quot; : &quot;Test Employee4&quot;}]}  \r\nHow can I acheive this?   My motive is to group all the employees according to their designations.  ","title":"Grouping Json response with keys in java - android studio","body":"<p>I am new to java and android development. I am learning json parsing. I got json response something like this.</p>\n\n<pre><code>{\"code\":\"0\",\"data\":    \n[ {\"chrDesigName\":\"Developer\",\"chrempName\":\"Test Employee1\"},\n  {\"chrDesigName\":\"Developer\",\"chrempName\":\"Test Employee2\"}, \n  {\"chrDesigName\":\"Tester\",\"chrempName\":\"Test Employee3\"},\n  {\"chrDesigName\":\"Analyst\",\"chrempName\":\"Test Employee4\"},\n  {\"chrDesigName\":\"Developer\",\"chrempName\":\"Test Employee5\"},\n  {\"chrDesigName\":\"Tester\",\"chrempName\":\"Test Employee6\"}]\n</code></pre>\n\n<p>I want to parse this Json into something like this.</p>\n\n<pre><code>{\"Developer\" : [{\"chrempName\" : \"Test Employee1\"},\n                    {\"chrempName\" : \"Test Employee2\"},\n                    {\"chrempName\" : \"Test Employee5\"}],\n\"Tester\" : [{\"chrempName\" : \"Test Employee3\"},\n                    {\"chrempName\" : \"Test Employee6\"}],\n\"Analyst\" : [{\"chrempName\" : \"Test Employee4\"}]}  \n</code></pre>\n\n<p>How can I acheive this?   My motive is to group all the employees according to their designations.  </p>\n"},{"tags":["java","amazon-web-services","amazon-s3","aws-java-sdk"],"comments":[{"owner":{"account_id":113769,"reputation":12692,"user_id":299462,"accept_rate":61,"display_name":"Kannaiyan"},"score":0,"creation_date":1506236613,"post_id":46383669,"comment_id":79732640,"body_markdown":"What is the fomat of the name for those objects?","body":"What is the fomat of the name for those objects?"},{"owner":{"account_id":4510957,"reputation":303,"user_id":3667083,"accept_rate":33,"display_name":"Kapil"},"score":0,"creation_date":1518138294,"post_id":46383669,"comment_id":84393234,"body_markdown":"Its weird, people just have habit of down grading questions as not useful even if they don&#39;t have answer :-)","body":"Its weird, people just have habit of down grading questions as not useful even if they don&#39;t have answer :-)"}],"answers":[{"tags":[],"owner":{"account_id":113769,"reputation":12692,"user_id":299462,"accept_rate":61,"display_name":"Kannaiyan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1506237178,"creation_date":1506237178,"answer_id":46387558,"question_id":46383669,"body_markdown":"We had the same issue with a large number of objects.\r\n\r\nWe followed a pattern timestamp in 10 increments in their object name. It looks like this,\r\n\r\n    s3://bucket-name/timestamp/actualobject.extension\r\n    \r\n    Eg.,\r\n    s3://mys3bucket/1506237300/datafile001.json\r\n\r\n\r\nWhen you iterate through I have parallel threads running for each timestamp for 15-minute increments and everything was read very fast.\r\n\r\nThe key way to solve is to find out the pattern you have used in storing those objects and list the object names based on those patterns.\r\n\r\nHope it helps.","title":"How to change AWS S3 V2 Java api&#39;s limit of 1000 while listing objects [For Bucket having more than 1 Billion objects]?","body":"<p>We had the same issue with a large number of objects.</p>\n\n<p>We followed a pattern timestamp in 10 increments in their object name. It looks like this,</p>\n\n<pre><code>s3://bucket-name/timestamp/actualobject.extension\n\nEg.,\ns3://mys3bucket/1506237300/datafile001.json\n</code></pre>\n\n<p>When you iterate through I have parallel threads running for each timestamp for 15-minute increments and everything was read very fast.</p>\n\n<p>The key way to solve is to find out the pattern you have used in storing those objects and list the object names based on those patterns.</p>\n\n<p>Hope it helps.</p>\n"}],"owner":{"account_id":4510957,"reputation":303,"user_id":3667083,"accept_rate":33,"display_name":"Kapil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":377,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":46387558,"answer_count":1,"score":-2,"last_activity_date":1676662149,"creation_date":1506196168,"question_id":46383669,"body_markdown":"I am working on project where I need to download keys from Amazon S3 bucket, which has more than 1 Billion objects. I wrote a code using Java V2 API but it doesn&#39;t help as it downloads only 1000 keys at a time. Its takes days to get list of all keys from this bucket. Is there any faster way to get all list of keys. \r\n\r\nI have checked other answers related to this topic and it didn&#39;t help. ","title":"How to change AWS S3 V2 Java api&#39;s limit of 1000 while listing objects [For Bucket having more than 1 Billion objects]?","body":"<p>I am working on project where I need to download keys from Amazon S3 bucket, which has more than 1 Billion objects. I wrote a code using Java V2 API but it doesn't help as it downloads only 1000 keys at a time. Its takes days to get list of all keys from this bucket. Is there any faster way to get all list of keys.</p>\n<p>I have checked other answers related to this topic and it didn't help.</p>\n"},{"tags":["java","absolute-path"],"comments":[{"owner":{"account_id":1136217,"reputation":14336,"user_id":1121249,"accept_rate":86,"display_name":"rkosegi"},"score":1,"creation_date":1585815290,"post_id":60986967,"comment_id":107896751,"body_markdown":"It has to work with absolute path too. What issue are you facing when absolute path is used?","body":"It has to work with absolute path too. What issue are you facing when absolute path is used?"},{"owner":{"account_id":188003,"reputation":1064,"user_id":426463,"display_name":"trappski"},"score":1,"creation_date":1585815311,"post_id":60986967,"comment_id":107896763,"body_markdown":"What errors do you run into when you use an absolute path? File should be able to take an absolute path without issues.","body":"What errors do you run into when you use an absolute path? File should be able to take an absolute path without issues."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1585815317,"post_id":60986967,"comment_id":107896766,"body_markdown":"Can you show us the value of `path` that fails for you? Absolute paths should work just fine. Keep in mind that Java strings might need you to escape the `\\` (i.e. double it) to work correctly.","body":"Can you show us the value of <code>path</code> that fails for you? Absolute paths should work just fine. Keep in mind that Java strings might need you to escape the `` (i.e. double it) to work correctly."}],"answers":[{"tags":[],"owner":{"account_id":15561237,"reputation":1596,"user_id":11226302,"display_name":"Shivam Puri"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1585815445,"creation_date":1585815445,"answer_id":60987059,"question_id":60986967,"body_markdown":"In your code here;\r\n```\r\nFile file = new File(path);\r\n```\r\n\r\nYour ```path``` String variable just needs to be absolute instead of relative.\r\n\r\nI don&#39;t see why it would not work. Did you try to update the path variable to absolute path of your file?","title":"Open file with absolute path in java","body":"<p>In your code here;</p>\n\n<pre><code>File file = new File(path);\n</code></pre>\n\n<p>Your <code>path</code> String variable just needs to be absolute instead of relative.</p>\n\n<p>I don't see why it would not work. Did you try to update the path variable to absolute path of your file?</p>\n"},{"tags":[],"owner":{"account_id":27432737,"reputation":1,"user_id":21236134,"display_name":"Leo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676662020,"creation_date":1676662020,"answer_id":75488511,"question_id":60986967,"body_markdown":"I think you can create an object from the Path interface using a relative path and getting that path using the Paths class using the static get method. once done you can get the absolute path from the created object and use it as a string if you prefer. \r\n\r\nI hope I have helped you.\r\n\r\n```java\r\nPath path1 = Paths.get(&quot;res/ficheroPrueba.txt&quot;);\r\nFile file = new File(path1.toAbsolutePath().toString());\r\n```\r\n\r\n","title":"Open file with absolute path in java","body":"<p>I think you can create an object from the Path interface using a relative path and getting that path using the Paths class using the static get method. once done you can get the absolute path from the created object and use it as a string if you prefer.</p>\n<p>I hope I have helped you.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Path path1 = Paths.get(&quot;res/ficheroPrueba.txt&quot;);\nFile file = new File(path1.toAbsolutePath().toString());\n</code></pre>\n"}],"owner":{"account_id":13204799,"reputation":155,"user_id":9943255,"display_name":"chendoy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12210,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60987059,"answer_count":2,"score":0,"last_activity_date":1676662020,"creation_date":1585815103,"question_id":60986967,"body_markdown":"I wrote this code to read the content of a file to a bytes array.\r\nIt works fine when `path` (given in the constructor) is relative. But I would like it to work in an absolute path instead. I looked up in java `File` class docs but got confused. How can I changed it to work with absolute path?\r\n\r\n            File file = new File(path);\r\n            byte[] bytesArray = new byte[(int) file.length()];\r\n            FileInputStream fis = new FileInputStream(file);\r\n            fis.read(bytesArray);\r\n            fis.close();","title":"Open file with absolute path in java","body":"<p>I wrote this code to read the content of a file to a bytes array.\nIt works fine when <code>path</code> (given in the constructor) is relative. But I would like it to work in an absolute path instead. I looked up in java <code>File</code> class docs but got confused. How can I changed it to work with absolute path?</p>\n\n<pre><code>        File file = new File(path);\n        byte[] bytesArray = new byte[(int) file.length()];\n        FileInputStream fis = new FileInputStream(file);\n        fis.read(bytesArray);\n        fis.close();\n</code></pre>\n"},{"tags":["java","arrays","json"],"answers":[{"tags":[],"owner":{"account_id":4563475,"reputation":27298,"user_id":3705127,"accept_rate":52,"display_name":"sprinter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580881938,"creation_date":1580881938,"answer_id":60069717,"question_id":60069496,"body_markdown":"You are really asking 2 questions here:\r\n 1. how do I parse the JSON into Java objects and, later, convert back to JSON\r\n 2. once I have the data in Java objects, how do I group by price\r\n\r\nOn question 1, there are several good quality JSON parsers available, such as https://github.com/google/gson It is fairly straightforward to parse the JSON and construct the appropriate objects. But if you read the tutorials, try to use the parser and then have problems, come back to SO and ask a specific question.\r\n\r\nOn question 2, here is a suggestion:\r\n\r\n    enum Size { S, M, L, XL, XXL, XXL }\r\n\r\n    class SizePrice {\r\n        private final double price;\r\n        private final Size size;\r\n        private final int number;\r\n    }\r\n\r\n    List&lt;SizePrice&gt; sizePrices = &lt;read from JSON&gt;\r\n\r\n    Map&lt;Double,List&lt;SizePrice&gt;&gt; sizePricesGroupedByPrice = sizePrices.stream()\r\n        .collect(Collectors.groupingBy(sp -&gt; sp.price));\r\n\r\nThe `Size` enum is deliberately in a size order so you can get the smallest and largest (by ordinal()) size is generating the range.","title":"Grouping Json response with keys in java","body":"<p>You are really asking 2 questions here:\n 1. how do I parse the JSON into Java objects and, later, convert back to JSON\n 2. once I have the data in Java objects, how do I group by price</p>\n\n<p>On question 1, there are several good quality JSON parsers available, such as <a href=\"https://github.com/google/gson\" rel=\"nofollow noreferrer\">https://github.com/google/gson</a> It is fairly straightforward to parse the JSON and construct the appropriate objects. But if you read the tutorials, try to use the parser and then have problems, come back to SO and ask a specific question.</p>\n\n<p>On question 2, here is a suggestion:</p>\n\n<pre><code>enum Size { S, M, L, XL, XXL, XXL }\n\nclass SizePrice {\n    private final double price;\n    private final Size size;\n    private final int number;\n}\n\nList&lt;SizePrice&gt; sizePrices = &lt;read from JSON&gt;\n\nMap&lt;Double,List&lt;SizePrice&gt;&gt; sizePricesGroupedByPrice = sizePrices.stream()\n    .collect(Collectors.groupingBy(sp -&gt; sp.price));\n</code></pre>\n\n<p>The <code>Size</code> enum is deliberately in a size order so you can get the smallest and largest (by ordinal()) size is generating the range.</p>\n"},{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676661347,"creation_date":1676661347,"answer_id":75488428,"question_id":60069496,"body_markdown":"You can use JSON library such as _Josson_ to do the transformation.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n__Deserialization__\r\n\r\n    Josson josson = Josson.fromJsonString(\r\n        &quot;{&quot; +\r\n        &quot;    \\&quot;sizePrices\\&quot;: [&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;            \\&quot;cargoHandoverPrice\\&quot;: 0.0,&quot; +\r\n        &quot;            \\&quot;sizeCode\\&quot;: \\&quot;S\\&quot;,&quot; +\r\n        &quot;            \\&quot;sizeNumber\\&quot;: 100&quot; +\r\n        &quot;        },&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;            \\&quot;cargoHandoverPrice\\&quot;: 1.66,&quot; +\r\n        &quot;            \\&quot;sizeCode\\&quot;: \\&quot;M\\&quot;,&quot; +\r\n        &quot;            \\&quot;sizeNumber\\&quot;: 110&quot; +\r\n        &quot;        },&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;            \\&quot;cargoHandoverPrice\\&quot;: 0.0,&quot; +\r\n        &quot;            \\&quot;sizeCode\\&quot;: \\&quot;L\\&quot;,&quot; +\r\n        &quot;            \\&quot;sizeNumber\\&quot;: 120&quot; +\r\n        &quot;        },&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;            \\&quot;cargoHandoverPrice\\&quot;: 0.0,&quot; +\r\n        &quot;            \\&quot;sizeCode\\&quot;: \\&quot;XL\\&quot;,&quot; +\r\n        &quot;            \\&quot;sizeNumber\\&quot;: 130&quot; +\r\n        &quot;        },&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;            \\&quot;cargoHandoverPrice\\&quot;: 0.0,&quot; +\r\n        &quot;            \\&quot;sizeCode\\&quot;: \\&quot;XXL\\&quot;,&quot; +\r\n        &quot;            \\&quot;sizeNumber\\&quot;: 140&quot; +\r\n        &quot;        },&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;            \\&quot;cargoHandoverPrice\\&quot;: 1.66,&quot; +\r\n        &quot;            \\&quot;sizeCode\\&quot;: \\&quot;XXXL\\&quot;,&quot; +\r\n        &quot;            \\&quot;sizeNumber\\&quot;: 150&quot; +\r\n        &quot;        }&quot; +\r\n        &quot;    ]&quot; +\r\n        &quot;}&quot;);\r\n\r\n__Transformation__\r\n\r\n    JsonNode node = josson.getNode(\r\n        &quot;sizePrices&quot; +\r\n        &quot;.group(cargoHandoverPrice)&quot; +\r\n        &quot;.field(SizeRange: concat(elements.findByMin(sizeNumber).sizeCode,&quot; +\r\n        &quot;                         &#39;-&#39;,&quot; +\r\n        &quot;                         elements.findByMax(sizeNumber).sizeCode),&quot; +\r\n        &quot;       elements:)&quot;);\r\n    System.out.println(node.toPrettyString());\r\n\r\n__Output__\r\n\r\n    [ {\r\n      &quot;cargoHandoverPrice&quot; : 0.0,\r\n      &quot;SizeRange&quot; : &quot;S-XXL&quot;\r\n    }, {\r\n      &quot;cargoHandoverPrice&quot; : 1.66,\r\n      &quot;SizeRange&quot; : &quot;M-XXXL&quot;\r\n    } ]","title":"Grouping Json response with keys in java","body":"<p>You can use JSON library such as <em>Josson</em> to do the transformation.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<p><strong>Deserialization</strong></p>\n<pre><code>Josson josson = Josson.fromJsonString(\n    &quot;{&quot; +\n    &quot;    \\&quot;sizePrices\\&quot;: [&quot; +\n    &quot;        {&quot; +\n    &quot;            \\&quot;cargoHandoverPrice\\&quot;: 0.0,&quot; +\n    &quot;            \\&quot;sizeCode\\&quot;: \\&quot;S\\&quot;,&quot; +\n    &quot;            \\&quot;sizeNumber\\&quot;: 100&quot; +\n    &quot;        },&quot; +\n    &quot;        {&quot; +\n    &quot;            \\&quot;cargoHandoverPrice\\&quot;: 1.66,&quot; +\n    &quot;            \\&quot;sizeCode\\&quot;: \\&quot;M\\&quot;,&quot; +\n    &quot;            \\&quot;sizeNumber\\&quot;: 110&quot; +\n    &quot;        },&quot; +\n    &quot;        {&quot; +\n    &quot;            \\&quot;cargoHandoverPrice\\&quot;: 0.0,&quot; +\n    &quot;            \\&quot;sizeCode\\&quot;: \\&quot;L\\&quot;,&quot; +\n    &quot;            \\&quot;sizeNumber\\&quot;: 120&quot; +\n    &quot;        },&quot; +\n    &quot;        {&quot; +\n    &quot;            \\&quot;cargoHandoverPrice\\&quot;: 0.0,&quot; +\n    &quot;            \\&quot;sizeCode\\&quot;: \\&quot;XL\\&quot;,&quot; +\n    &quot;            \\&quot;sizeNumber\\&quot;: 130&quot; +\n    &quot;        },&quot; +\n    &quot;        {&quot; +\n    &quot;            \\&quot;cargoHandoverPrice\\&quot;: 0.0,&quot; +\n    &quot;            \\&quot;sizeCode\\&quot;: \\&quot;XXL\\&quot;,&quot; +\n    &quot;            \\&quot;sizeNumber\\&quot;: 140&quot; +\n    &quot;        },&quot; +\n    &quot;        {&quot; +\n    &quot;            \\&quot;cargoHandoverPrice\\&quot;: 1.66,&quot; +\n    &quot;            \\&quot;sizeCode\\&quot;: \\&quot;XXXL\\&quot;,&quot; +\n    &quot;            \\&quot;sizeNumber\\&quot;: 150&quot; +\n    &quot;        }&quot; +\n    &quot;    ]&quot; +\n    &quot;}&quot;);\n</code></pre>\n<p><strong>Transformation</strong></p>\n<pre><code>JsonNode node = josson.getNode(\n    &quot;sizePrices&quot; +\n    &quot;.group(cargoHandoverPrice)&quot; +\n    &quot;.field(SizeRange: concat(elements.findByMin(sizeNumber).sizeCode,&quot; +\n    &quot;                         '-',&quot; +\n    &quot;                         elements.findByMax(sizeNumber).sizeCode),&quot; +\n    &quot;       elements:)&quot;);\nSystem.out.println(node.toPrettyString());\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>[ {\n  &quot;cargoHandoverPrice&quot; : 0.0,\n  &quot;SizeRange&quot; : &quot;S-XXL&quot;\n}, {\n  &quot;cargoHandoverPrice&quot; : 1.66,\n  &quot;SizeRange&quot; : &quot;M-XXXL&quot;\n} ]\n</code></pre>\n"}],"owner":{"account_id":17691556,"reputation":1,"user_id":12843207,"display_name":"sushobhan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":411,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1676661347,"creation_date":1580880565,"question_id":60069496,"body_markdown":"I am new to java development. I am learning json parsing. I got json response something like this.\r\n\r\n   \r\n\r\n    \r\n        &quot;sizePrices&quot;: [\r\n            {\r\n           \r\n                &quot;cargoHandoverPrice&quot;: 0.00,\r\n                &quot;sizeCode&quot;: &quot;S&quot;,\r\n                &quot;sizeNumber&quot;: 100\r\n            },\r\n            {\r\n                &quot;cargoHandoverPrice&quot;: 1.66,\r\n                &quot;sizeCode&quot;: &quot;M&quot;,\r\n                &quot;sizeNumber&quot;: 110\r\n\t\t\t\t\r\n            },   \r\n            {\r\n                \r\n                &quot;cargoHandoverPrice&quot;: 0.00,\r\n                &quot;sizeCode&quot;: &quot;L&quot;,\r\n                &quot;sizeNumber&quot;: 120\r\n               \r\n            }\r\n\t\t\t,   \r\n            {\r\n                \r\n                &quot;cargoHandoverPrice&quot;: 0.00,\r\n                &quot;sizeCode&quot;: &quot;XL&quot;,\r\n                &quot;sizeNumber&quot;: 130\r\n               \r\n            },   \r\n            {\r\n                \r\n                &quot;cargoHandoverPrice&quot;: 0.00,\r\n                &quot;sizeCode&quot;: &quot;XXL&quot;,\r\n                &quot;sizeNumber&quot;: 140\r\n               \r\n            },   \r\n            {\r\n                \r\n                &quot;cargoHandoverPrice&quot;: 1.66,\r\n                &quot;sizeCode&quot;: &quot;XXXL&quot;,\r\n                &quot;sizeNumber&quot;: 150\r\n               \r\n            }\r\n        ]\r\n\r\nif price match it should give me sizerange back\r\nlike below\r\n\r\nI want to parse this Json into something like this.\r\n\r\n    \r\n        [\r\n            {\r\n           \r\n                &quot;cargoHandoverPrice&quot;: 0.00,\r\n                &quot;SizeRange&quot;: &quot;S-XXL&quot;,\r\n                \r\n            },\r\n            {\r\n                &quot;cargoHandoverPrice&quot;: 1.66,\r\n                &quot;SizeRange&quot;: &quot;M-XXXL&quot;,\r\n               \r\n\t\t\t\t\r\n            }\r\n        ]\r\nHow can I achieve this? My motive is to group all the sizeranges according to their prices.\r\n\r\n","title":"Grouping Json response with keys in java","body":"<p>I am new to java development. I am learning json parsing. I got json response something like this.</p>\n\n<pre><code>    \"sizePrices\": [\n        {\n\n            \"cargoHandoverPrice\": 0.00,\n            \"sizeCode\": \"S\",\n            \"sizeNumber\": 100\n        },\n        {\n            \"cargoHandoverPrice\": 1.66,\n            \"sizeCode\": \"M\",\n            \"sizeNumber\": 110\n\n        },   \n        {\n\n            \"cargoHandoverPrice\": 0.00,\n            \"sizeCode\": \"L\",\n            \"sizeNumber\": 120\n\n        }\n        ,   \n        {\n\n            \"cargoHandoverPrice\": 0.00,\n            \"sizeCode\": \"XL\",\n            \"sizeNumber\": 130\n\n        },   \n        {\n\n            \"cargoHandoverPrice\": 0.00,\n            \"sizeCode\": \"XXL\",\n            \"sizeNumber\": 140\n\n        },   \n        {\n\n            \"cargoHandoverPrice\": 1.66,\n            \"sizeCode\": \"XXXL\",\n            \"sizeNumber\": 150\n\n        }\n    ]\n</code></pre>\n\n<p>if price match it should give me sizerange back\nlike below</p>\n\n<p>I want to parse this Json into something like this.</p>\n\n<pre><code>    [\n        {\n\n            \"cargoHandoverPrice\": 0.00,\n            \"SizeRange\": \"S-XXL\",\n\n        },\n        {\n            \"cargoHandoverPrice\": 1.66,\n            \"SizeRange\": \"M-XXXL\",\n\n\n        }\n    ]\n</code></pre>\n\n<p>How can I achieve this? My motive is to group all the sizeranges according to their prices.</p>\n"},{"tags":["java","arrays","swing"],"comments":[{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":1,"creation_date":1676643748,"post_id":75485395,"comment_id":133184176,"body_markdown":"`for (int pos = 0; pos &lt; 1; pos++) {` will only iterate once. Did you mean `for (int pos = 0; pos &lt; VB.PosCount; pos++) {` ?","body":"<code>for (int pos = 0; pos &lt; 1; pos++) {</code> will only iterate once. Did you mean <code>for (int pos = 0; pos &lt; VB.PosCount; pos++) {</code> ?"},{"owner":{"account_id":25745101,"reputation":3,"user_id":21227774,"display_name":"MaxChip 101"},"score":0,"creation_date":1676645269,"post_id":75485395,"comment_id":133184603,"body_markdown":"yea i spotted that and i fixed it but it only shows one of the lines","body":"yea i spotted that and i fixed it but it only shows one of the lines"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1676646567,"post_id":75485395,"comment_id":133184989,"body_markdown":"1) You should NOT be suing static data and methods.  Any data needed to paint the lines should be defined in the class that does the painting. You will then also needs methods in this class to update the data. 2) Painting is NOT cumulative. If you want to paint multiple lines then you need to store the data for each line in the class that does the painting. Check out [Custom Painting Approaches](https://tips4java.wordpress.com/2009/05/08/custom-painting-approaches/) for the two common ways to do this type of painting.","body":"1) You should NOT be suing static data and methods.  Any data needed to paint the lines should be defined in the class that does the painting. You will then also needs methods in this class to update the data. 2) Painting is NOT cumulative. If you want to paint multiple lines then you need to store the data for each line in the class that does the painting. Check out <a href=\"https://tips4java.wordpress.com/2009/05/08/custom-painting-approaches/\" rel=\"nofollow noreferrer\">Custom Painting Approaches</a> for the two common ways to do this type of painting."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1676646680,"post_id":75485395,"comment_id":133185027,"body_markdown":"3) Don&#39;t call you class &quot;Panel&quot;. There is an AWT component with the class name so it gets confusing. Class names should be more descriptive.","body":"3) Don&#39;t call you class &quot;Panel&quot;. There is an AWT component with the class name so it gets confusing. Class names should be more descriptive."}],"answers":[{"tags":[],"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676661329,"creation_date":1676661329,"answer_id":75488422,"question_id":75485395,"body_markdown":"You should not be using the `static` keyword anywhere but the `static` `main` method.\r\n\r\nHere&#39;s a GUI that draws two lines.  You can add additional lines if you wish.\r\n\r\n[![Drawing Lines][1]][1]\r\n\r\nI created a Swing model using plain Java getter/setter classes.\r\n\r\nI created a `LineSegment` class to hold all the parameters to draw a line.  I created a `DrawingLinesModel` class to hold a `List` of `LineSegment` instances.  You can use an array, but a `List` is more flexible.\r\n\r\nI created a `JFrame` and a drawing `JPanel`.\r\n\r\nOracle has a helpful tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Learning Swing with the NetBeans IDE section. Pay particular attention to the [Performing Custom Painting](https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html) section.\r\n\r\nAll Swing applications must start with a call to the `SwingUtilities` `invokeLater` method.  This method ensures that the Swing components are created and executed on the [Event Dispatch Thread](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html).\r\n\r\nHere&#39;s the complete runnable code.  I made all the additional classes inner classes so I could post the code as one block.\r\n\r\n    import java.awt.BasicStroke;\r\n    import java.awt.BorderLayout;\r\n    import java.awt.Color;\r\n    import java.awt.Dimension;\r\n    import java.awt.Graphics;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.Point;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    import javax.swing.JFrame;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.SwingUtilities;\r\n    import javax.swing.WindowConstants;\r\n    \r\n    public class DrawingLinesExample implements Runnable {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSwingUtilities.invokeLater(new DrawingLinesExample());\r\n    \t}\r\n    \r\n    \tprivate final DrawingLinesModel model;\r\n    \r\n    \tprivate final DrawingPanel drawingPanel;\r\n    \r\n    \tpublic DrawingLinesExample() {\r\n    \t\tthis.model = new DrawingLinesModel();\r\n    \t\tthis.drawingPanel = new DrawingPanel(model);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\tJFrame frame = new JFrame(&quot;Drawing Lines&quot;);\r\n    \t\tframe.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\r\n    \r\n    \t\tframe.add(drawingPanel, BorderLayout.CENTER);\r\n    \r\n    \t\tframe.pack();\r\n    \t\tframe.setLocationByPlatform(true);\r\n    \t\tframe.setVisible(true);\r\n    \t}\r\n    \r\n    \tpublic class DrawingPanel extends JPanel {\r\n    \r\n    \t\tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \t\tprivate final DrawingLinesModel model;\r\n    \r\n    \t\tpublic DrawingPanel(DrawingLinesModel model) {\r\n    \t\t\tthis.model = model;\r\n    \t\t\tthis.setPreferredSize(new Dimension(600, 640));\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tprotected void paintComponent(Graphics g) {\r\n    \t\t\tsuper.paintComponent(g);\r\n    \r\n    \t\t\tGraphics2D g2d = (Graphics2D) g;\r\n    \t\t\tfor (LineSegment line : model.getLines()) {\r\n    \t\t\t\tg2d.setColor(line.getColor());\r\n    \t\t\t\tg2d.setStroke(new BasicStroke(line.getThickness()));\r\n    \t\t\t\tPoint sp = line.getStartPoint();\r\n    \t\t\t\tPoint ep = line.getEndPoint();\r\n    \t\t\t\tg2d.drawLine(sp.x, sp.y, ep.x, ep.y);\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \tpublic class DrawingLinesModel {\r\n    \r\n    \t\tprivate final List&lt;LineSegment&gt; lines;\r\n    \r\n    \t\tpublic DrawingLinesModel() {\r\n    \t\t\tthis.lines = new ArrayList&lt;&gt;();\r\n    \t\t\tthis.lines.add(new LineSegment(new Point(10, 10),\r\n    \t\t\t\t\tnew Point(400, 400), Color.BLUE, 9));\r\n    \t\t\tthis.lines.add(new LineSegment(new Point(10, 400),\r\n    \t\t\t\t\tnew Point(400, 10), Color.MAGENTA, 11));\r\n    \t\t}\r\n    \r\n    \t\tpublic List&lt;LineSegment&gt; getLines() {\r\n    \t\t\treturn lines;\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \tpublic class LineSegment {\r\n    \r\n    \t\tprivate final int thickness;\r\n    \r\n    \t\tprivate final Color color;\r\n    \r\n    \t\tprivate final Point startPoint, endPoint;\r\n    \r\n    \t\tpublic LineSegment(Point startPoint, Point endPoint, Color color,\r\n    \t\t\t\tint thickness) {\r\n    \t\t\tthis.startPoint = startPoint;\r\n    \t\t\tthis.endPoint = endPoint;\r\n    \t\t\tthis.color = color;\r\n    \t\t\tthis.thickness = thickness;\r\n    \t\t}\r\n    \r\n    \t\tpublic Point getStartPoint() {\r\n    \t\t\treturn startPoint;\r\n    \t\t}\r\n    \r\n    \t\tpublic Point getEndPoint() {\r\n    \t\t\treturn endPoint;\r\n    \t\t}\r\n    \r\n    \t\tpublic Color getColor() {\r\n    \t\t\treturn color;\r\n    \t\t}\r\n    \r\n    \t\tpublic int getThickness() {\r\n    \t\t\treturn thickness;\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/n19Te.png\r\n","title":"How to draw two lines in java with swing and arrays","body":"<p>You should not be using the <code>static</code> keyword anywhere but the <code>static</code> <code>main</code> method.</p>\n<p>Here's a GUI that draws two lines.  You can add additional lines if you wish.</p>\n<p><a href=\"https://i.stack.imgur.com/n19Te.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n19Te.png\" alt=\"Drawing Lines\" /></a></p>\n<p>I created a Swing model using plain Java getter/setter classes.</p>\n<p>I created a <code>LineSegment</code> class to hold all the parameters to draw a line.  I created a <code>DrawingLinesModel</code> class to hold a <code>List</code> of <code>LineSegment</code> instances.  You can use an array, but a <code>List</code> is more flexible.</p>\n<p>I created a <code>JFrame</code> and a drawing <code>JPanel</code>.</p>\n<p>Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section. Pay particular attention to the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Performing Custom Painting</a> section.</p>\n<p>All Swing applications must start with a call to the <code>SwingUtilities</code> <code>invokeLater</code> method.  This method ensures that the Swing components are created and executed on the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html\" rel=\"nofollow noreferrer\">Event Dispatch Thread</a>.</p>\n<p>Here's the complete runnable code.  I made all the additional classes inner classes so I could post the code as one block.</p>\n<pre><code>import java.awt.BasicStroke;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.Point;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.SwingUtilities;\nimport javax.swing.WindowConstants;\n\npublic class DrawingLinesExample implements Runnable {\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new DrawingLinesExample());\n    }\n\n    private final DrawingLinesModel model;\n\n    private final DrawingPanel drawingPanel;\n\n    public DrawingLinesExample() {\n        this.model = new DrawingLinesModel();\n        this.drawingPanel = new DrawingPanel(model);\n    }\n\n    @Override\n    public void run() {\n        JFrame frame = new JFrame(&quot;Drawing Lines&quot;);\n        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n\n        frame.add(drawingPanel, BorderLayout.CENTER);\n\n        frame.pack();\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n\n    public class DrawingPanel extends JPanel {\n\n        private static final long serialVersionUID = 1L;\n\n        private final DrawingLinesModel model;\n\n        public DrawingPanel(DrawingLinesModel model) {\n            this.model = model;\n            this.setPreferredSize(new Dimension(600, 640));\n        }\n\n        @Override\n        protected void paintComponent(Graphics g) {\n            super.paintComponent(g);\n\n            Graphics2D g2d = (Graphics2D) g;\n            for (LineSegment line : model.getLines()) {\n                g2d.setColor(line.getColor());\n                g2d.setStroke(new BasicStroke(line.getThickness()));\n                Point sp = line.getStartPoint();\n                Point ep = line.getEndPoint();\n                g2d.drawLine(sp.x, sp.y, ep.x, ep.y);\n            }\n        }\n\n    }\n\n    public class DrawingLinesModel {\n\n        private final List&lt;LineSegment&gt; lines;\n\n        public DrawingLinesModel() {\n            this.lines = new ArrayList&lt;&gt;();\n            this.lines.add(new LineSegment(new Point(10, 10),\n                    new Point(400, 400), Color.BLUE, 9));\n            this.lines.add(new LineSegment(new Point(10, 400),\n                    new Point(400, 10), Color.MAGENTA, 11));\n        }\n\n        public List&lt;LineSegment&gt; getLines() {\n            return lines;\n        }\n\n    }\n\n    public class LineSegment {\n\n        private final int thickness;\n\n        private final Color color;\n\n        private final Point startPoint, endPoint;\n\n        public LineSegment(Point startPoint, Point endPoint, Color color,\n                int thickness) {\n            this.startPoint = startPoint;\n            this.endPoint = endPoint;\n            this.color = color;\n            this.thickness = thickness;\n        }\n\n        public Point getStartPoint() {\n            return startPoint;\n        }\n\n        public Point getEndPoint() {\n            return endPoint;\n        }\n\n        public Color getColor() {\n            return color;\n        }\n\n        public int getThickness() {\n            return thickness;\n        }\n\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":25745101,"reputation":3,"user_id":21227774,"display_name":"MaxChip 101"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75488422,"answer_count":1,"score":-1,"last_activity_date":1676661329,"creation_date":1676643352,"question_id":75485395,"body_markdown":"so i am trying to make a program that will draw a line when you call the static void and it will send the coordinates of the line into an array to draw it in the panel class when i call it once it draws a line but when i call it twice it does not draw the first line only the second.\r\n\r\nmain class\r\n```\r\npackage main;\r\n\r\nimport javax.swing.*;\r\n\r\npublic class VB {\r\n\t\r\n\tpublic static int[] POS_x1;\r\n\tpublic static int[] POS_y1;\r\n\tpublic static int[] POS_x2;\r\n\tpublic static int[] POS_y2;\r\n\t\r\n\tpublic static int PosCount;\r\n\t\r\n\t\r\n\tVB(){\r\n\r\n\t}\r\n\t\r\n\tpublic static void NewWindow(String Title, String LogoPath, int x, int y, int Width, int Height){\r\n\t\t\r\n\t\tPanel panel = new Panel();\r\n\t\t\r\n\t\tImageIcon image = new ImageIcon(LogoPath); \r\n\t\t\r\n\t\tJFrame frame = new JFrame();\r\n\t\tframe.setIconImage(image.getImage());\r\n\t\tframe.setTitle(Title);\r\n\t\tframe.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\r\n\t\tframe.add(panel);\r\n\t\tframe.setBounds(x, y, Width, Height);\r\n\t\tframe.setResizable(false);\r\n\t\tframe.setVisible(true);\t\r\n\t}\r\n\t\r\n\tpublic static void DrawLine(int x1, int y1, int x2, int y2) {\r\n\r\n\t\tPOS_x1 = new int[256];\r\n\t\tPOS_y1 = new int[256];\r\n\t\tPOS_x2 = new int[256];\r\n\t\tPOS_y2 = new int[256];\r\n\t\t\r\n\t\tPOS_x1[PosCount] = x1;\r\n\t\tPOS_y1[PosCount] = y1;\r\n\t\tPOS_x2[PosCount] = x2;\r\n\t\tPOS_y2[PosCount] = y2;\r\n\t\tPosCount++;\r\n\t\tSystem.out.println(PosCount);\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tVB.NewWindow(&quot;window&quot;, &quot;res/img/saullularphone.PNG&quot;, 100, 100, 500, 500);\r\n\t\tVB.DrawLine(0, 0, 100, 50);\r\n\t\tVB.DrawLine(0, 50, 100, 50);\r\n\t}\r\n}\r\n\r\n\r\n```\r\n\r\nPanel class\r\n\r\n```\r\npackage main;\r\n\r\nimport java.awt.Color;\r\nimport java.awt.Dimension;\r\nimport java.awt.Graphics;\r\nimport java.awt.Graphics2D;\r\n\r\nimport javax.swing.JPanel;\r\n\r\npublic class Panel extends JPanel {\r\n\t\r\n\tPanel(){\r\n\t\trepaint();\r\n\t}\r\n\t\r\n\tprotected void paintComponent(Graphics g) {\r\n    \tsuper.paintComponent(g);\r\n        Graphics2D g2 = (Graphics2D) g;\r\n        for (int pos = 0; pos &lt; VB.PosCount; pos++) {\r\n            g2.setColor(Color.black);\r\n            g2.drawLine(VB.POS_x1[pos], VB.POS_y1[pos], VB.POS_x2[pos], VB.POS_y2[pos]);\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n\r\ni tried drawing the first line then redrawing then drawing the second line but it didn&#39;t work and drew the second line ","title":"How to draw two lines in java with swing and arrays","body":"<p>so i am trying to make a program that will draw a line when you call the static void and it will send the coordinates of the line into an array to draw it in the panel class when i call it once it draws a line but when i call it twice it does not draw the first line only the second.</p>\n<p>main class</p>\n<pre><code>package main;\n\nimport javax.swing.*;\n\npublic class VB {\n    \n    public static int[] POS_x1;\n    public static int[] POS_y1;\n    public static int[] POS_x2;\n    public static int[] POS_y2;\n    \n    public static int PosCount;\n    \n    \n    VB(){\n\n    }\n    \n    public static void NewWindow(String Title, String LogoPath, int x, int y, int Width, int Height){\n        \n        Panel panel = new Panel();\n        \n        ImageIcon image = new ImageIcon(LogoPath); \n        \n        JFrame frame = new JFrame();\n        frame.setIconImage(image.getImage());\n        frame.setTitle(Title);\n        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n        frame.add(panel);\n        frame.setBounds(x, y, Width, Height);\n        frame.setResizable(false);\n        frame.setVisible(true); \n    }\n    \n    public static void DrawLine(int x1, int y1, int x2, int y2) {\n\n        POS_x1 = new int[256];\n        POS_y1 = new int[256];\n        POS_x2 = new int[256];\n        POS_y2 = new int[256];\n        \n        POS_x1[PosCount] = x1;\n        POS_y1[PosCount] = y1;\n        POS_x2[PosCount] = x2;\n        POS_y2[PosCount] = y2;\n        PosCount++;\n        System.out.println(PosCount);\n        \n    }\n    \n    public static void main(String[] args) {\n        VB.NewWindow(&quot;window&quot;, &quot;res/img/saullularphone.PNG&quot;, 100, 100, 500, 500);\n        VB.DrawLine(0, 0, 100, 50);\n        VB.DrawLine(0, 50, 100, 50);\n    }\n}\n\n\n</code></pre>\n<p>Panel class</p>\n<pre><code>package main;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\n\nimport javax.swing.JPanel;\n\npublic class Panel extends JPanel {\n    \n    Panel(){\n        repaint();\n    }\n    \n    protected void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        Graphics2D g2 = (Graphics2D) g;\n        for (int pos = 0; pos &lt; VB.PosCount; pos++) {\n            g2.setColor(Color.black);\n            g2.drawLine(VB.POS_x1[pos], VB.POS_y1[pos], VB.POS_x2[pos], VB.POS_y2[pos]);\n        }\n    }\n\n}\n</code></pre>\n<p>i tried drawing the first line then redrawing then drawing the second line but it didn't work and drew the second line</p>\n"},{"tags":["java","bytecode","java-bytecode-asm"],"comments":[{"owner":{"account_id":27812348,"reputation":23,"user_id":21234503,"display_name":"Andrey Tarasov"},"score":0,"creation_date":1676649997,"post_id":75485622,"comment_id":133186055,"body_markdown":"I parsing already compiled class file.","body":"I parsing already compiled class file."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1676651688,"post_id":75485622,"comment_id":133186599,"body_markdown":"It sounds like you &quot;simply&quot; must read and apply the rules in [&#167; 8.4.8.1 of the JLS](https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.4.8.1) and read especially [&#167; 8.4.2](https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.4.2). Note that the *return type* of the overriding method is irrelevant: as long as name, type parameters and parameters match, it&#39;s overridden.","body":"It sounds like you &quot;simply&quot; must read and apply the rules in <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.4.8.1\" rel=\"nofollow noreferrer\">&#167; 8.4.8.1 of the JLS</a> and read especially <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.4.2\" rel=\"nofollow noreferrer\">&#167; 8.4.2</a>. Note that the <i>return type</i> of the overriding method is irrelevant: as long as name, type parameters and parameters match, it&#39;s overridden."}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1676660529,"creation_date":1676659661,"answer_id":75488233,"question_id":75485622,"body_markdown":"Note that your issue does not only apply to generic supertype. You can also override a method with a more specific return type, with no Generics involved, e.g.\r\n\r\n```java\r\ninterface SomeInterface {\r\n\tObject method();\r\n}\r\nclass SomeImplementation implements SomeInterface {\r\n\t@Override\r\n\tpublic Integer method() {\r\n\t\treturn null;\r\n\t}\r\n}\r\n```\r\n\r\nYou have to understand the concept of [bridge methods].\r\n\r\nA bridge method performs the task of overriding a method on the byte code level, having exactly the same parameter types and return type as the overridden method, and delegates to the actual implementation method.\r\n\r\nSince the bridge method only consists of this invocation instruction, some type casts if required, and the return instruction, it is easy to parse such a method to find the actual method it belongs to, without dealing with the complex rules of the Generic type system.\r\n\r\nUsing, the following helper classes\r\n\r\n```java\r\nrecord MethodSignature(String name, String desc) {}\r\n\r\nrecord MethodInfo(int access, String owner, String name, String desc) {\r\n    MethodSignature signature() {\r\n        return new MethodSignature(name, desc);\r\n    }\r\n}\r\n\r\nfinal class MethodAndBridges {\r\n    MethodInfo actual;\r\n    final List&lt;MethodInfo&gt; bridges = new ArrayList&lt;&gt;();\r\n\r\n    MethodAndBridges(MethodSignature sig) {}\r\n\r\n    void set(MethodInfo mi) {\r\n        if(actual != null) throw new IllegalStateException();\r\n        actual = mi;\r\n    }\r\n\r\n    void addBridge(MethodInfo mi) {\r\n        bridges.add(mi);\r\n    }\r\n}\r\n```\r\n\r\nWe can gather the information in a form ready for checking override relations with [the ASM library] as follows:\r\n\r\n```java\r\nclass MethodCollector extends ClassVisitor {\r\n    static Map&lt;MethodSignature, MethodAndBridges&gt; getMethods(ClassReader cr) {\r\n        MethodCollector mc = new MethodCollector();\r\n        cr.accept(mc, ClassReader.SKIP_DEBUG | ClassReader.SKIP_FRAMES);\r\n        return mc.found;\r\n    }\r\n\r\n    final Map&lt;MethodSignature, MethodAndBridges&gt; found = new HashMap&lt;&gt;();\r\n    String owner, superClass;\r\n    List&lt;String&gt; interfaces;\r\n\r\n    protected MethodCollector() {\r\n        super(Opcodes.ASM9);\r\n    }\r\n\r\n    @Override\r\n    public void visit(int version, int acc,\r\n            String name, String sig, String superName, String[] ifNames) {\r\n        owner = name;\r\n        superClass = superName;\r\n        this.interfaces = ifNames == null? List.of(): List.of(ifNames);\r\n    }\r\n\r\n    @Override\r\n    public MethodVisitor visitMethod(\r\n        int acc, String name, String desc, String sig, String[] exceptions) {\r\n\r\n        MethodInfo mi = new MethodInfo(acc, owner, name, desc);\r\n        if((acc &amp; Opcodes.ACC_BRIDGE) == 0) {\r\n            found.computeIfAbsent(mi.signature(), MethodAndBridges::new).set(mi);\r\n            return null;\r\n        }\r\n        return new MethodVisitor(Opcodes.ASM9) {\r\n            @Override public void visitMethodInsn(\r\n                    int op, String owner, String name, String tDesc, boolean i) {\r\n                found.computeIfAbsent(new MethodSignature(name, tDesc),\r\n                    MethodAndBridges::new).addBridge(mi);\r\n            }\r\n        };\r\n    }\r\n}\r\n```\r\n\r\n---\r\n\r\nTo demonstrate how this work, let’s enhance your example, to address more cases\r\n\r\n```java\r\ninterface SupplierOfSerializable {\r\n    Serializable get();\r\n}\r\n\r\ninterface ISetting&lt;T extends CharSequence&gt; extends Supplier&lt;T&gt;, Consumer&lt;T&gt; {\r\n    T get();\r\n    @Override void accept(T t);\r\n    Number method(int i);\r\n    static void method(Object o) {}\r\n    private void method(Number n) {}\r\n}\r\n\r\nclass Setting implements ISetting&lt;String&gt;, SupplierOfSerializable {\r\n    public String get() {\r\n        return &quot;&quot;;\r\n    }\r\n    @Override\r\n    public void accept(String t) {}\r\n    public Integer method(int i) {\r\n        return i;\r\n    }\r\n    static void method(Object o) {}\r\n    void method(Number n) {}\r\n}\r\n```\r\n\r\nand check the override relations (only considering the direct interfaces, without recursion)\r\n```java\r\npublic class CheckOverride {\r\n    public static void main(String[] args) throws IOException {\r\n        MethodCollector mc = new MethodCollector();\r\n        new ClassReader(Setting.class.getName())\r\n            .accept(mc, ClassReader.SKIP_DEBUG | ClassReader.SKIP_FRAMES);\r\n\r\n        Map&lt;MethodSignature, MethodAndBridges&gt; implMethods = mc.found;\r\n        Map&lt;MethodInfo, Set&lt;MethodInfo&gt;&gt; overrides = new HashMap&lt;&gt;();\r\n\r\n        for(String ifType: mc.interfaces) {\r\n            Map&lt;MethodSignature, MethodAndBridges&gt; ifMethods\r\n                = MethodCollector.getMethods(new ClassReader(ifType));\r\n\r\n            System.out.println(&quot;interface &quot; + ifType.replace(&#39;/&#39;, &#39;.&#39;));\r\n            printMethods(ifMethods);\r\n            System.out.println();\r\n            ifMethods.values().removeIf(CheckOverride::nonOverridable);\r\n\r\n            implMethods.forEach((sig, method) -&gt; {\r\n                if(nonOverridable(method)) {\r\n                    overrides.putIfAbsent(method.actual, Set.of());\r\n                    return;\r\n                }\r\n                var overridden = ifMethods.get(sig);\r\n                if(overridden == null &amp;&amp; method.bridges.isEmpty()) {\r\n                    overrides.putIfAbsent(method.actual, Set.of());\r\n                    return;\r\n                }\r\n                Set&lt;MethodInfo&gt; set = overrides.compute(method.actual,\r\n                    (k, s) -&gt; s == null || s.isEmpty()? new HashSet&lt;&gt;(): s);\r\n                if(overridden != null) set.add(overridden.actual);\r\n                for(var mi: method.bridges) {\r\n                    overridden = ifMethods.get(mi.signature());\r\n                    if(overridden != null) set.add(overridden.actual);\r\n                }\r\n            });\r\n        }\r\n\r\n        System.out.println(&quot;class &quot; + mc.owner.replace(&#39;/&#39;, &#39;.&#39;));\r\n        printMethods(implMethods);\r\n        System.out.println();\r\n\r\n        System.out.println(&quot;Final result&quot;);\r\n        System.out.println(&quot;class &quot; + mc.owner.replace(&#39;/&#39;, &#39;.&#39;));\r\n        overrides.forEach((m,overridden) -&gt; {\r\n            System.out.println(&quot;  &quot; + toDeclaration(m, false));\r\n            if(!overridden.isEmpty()) {\r\n                System.out.println(&quot;    overrides&quot;);\r\n                overridden.forEach(o -&gt;\r\n                    System.out.println(&quot;      &quot; + toDeclaration(o, true)));\r\n            }\r\n        });\r\n    }\r\n\r\n    static boolean nonOverridable(MethodAndBridges m) {\r\n        return (m.actual.access() &amp; (Opcodes.ACC_PRIVATE|Opcodes.ACC_STATIC)) != 0\r\n             || m.actual.name().startsWith(&quot;&lt;&quot;);\r\n    }\r\n\r\n    static void printMethods(Map&lt;MethodSignature, MethodAndBridges&gt; methods) {\r\n        methods.forEach((sig, methodAndBridges) -&gt; {\r\n            System.out.println(&quot;  &quot;+toDeclaration(methodAndBridges.actual,false));\r\n            if(!methodAndBridges.bridges.isEmpty()) {\r\n                System.out.println(&quot;    bridges&quot;);\r\n                for(MethodInfo mi: methodAndBridges.bridges) {\r\n                    System.out.println(&quot;      &quot; + toDeclaration(mi, false));\r\n                }\r\n            };\r\n        });\r\n    }\r\n\r\n    private static String toDeclaration(MethodInfo mi, boolean withType) {\r\n        StringBuilder sb = new StringBuilder();\r\n        sb.append(Modifier.toString(mi.access() &amp; Modifier.methodModifiers()));\r\n        if(sb.length() &gt; 0) sb.append(&#39; &#39;);\r\n        String clName = mi.owner();\r\n        var mt = MethodTypeDesc.ofDescriptor(mi.desc());\r\n        if(mi.name().equals(&quot;&lt;init&gt;&quot;))\r\n            sb.append(clName, clName.lastIndexOf(&#39;/&#39;) + 1, clName.length());\r\n        else {\r\n            sb.append(mt.returnType().displayName()).append(&#39; &#39;);\r\n            if(withType) sb.append(clName.replace(&#39;/&#39;, &#39;.&#39;)).append(&#39;.&#39;);\r\n            sb.append(mi.name());\r\n        }\r\n        if(mt.parameterCount() == 0) sb.append(&quot;()&quot;);\r\n        else {\r\n            String sep = &quot;(&quot;;\r\n            for(ClassDesc cd: mt.parameterList()) {\r\n                sb.append(sep).append(cd.displayName());\r\n                sep = &quot;, &quot;;\r\n            }\r\n            sb.append(&#39;)&#39;);\r\n        }\r\n        return sb.toString();\r\n    }\r\n}\r\n```\r\n\r\n```lang-none\r\ninterface ISetting\r\n  public static void method(Object)\r\n  public abstract void accept(CharSequence)\r\n    bridges\r\n      public void accept(Object)\r\n  public abstract Number method(int)\r\n  private void method(Number)\r\n  public abstract CharSequence get()\r\n    bridges\r\n      public Object get()\r\n\r\ninterface SupplierOfSerializable\r\n  public abstract Serializable get()\r\n\r\nclass Setting\r\n  Setting()\r\n  public Integer method(int)\r\n    bridges\r\n      public Number method(int)\r\n  public void accept(String)\r\n    bridges\r\n      public void accept(Object)\r\n      public void accept(CharSequence)\r\n  static void method(Object)\r\n  public String get()\r\n    bridges\r\n      public Object get()\r\n      public CharSequence get()\r\n      public Serializable get()\r\n  void method(Number)\r\n\r\nFinal result\r\nclass Setting\r\n  public String get()\r\n    overrides\r\n      public abstract Serializable SupplierOfSerializable.get()\r\n      public abstract CharSequence ISetting.get()\r\n  Setting()\r\n  public Integer method(int)\r\n    overrides\r\n      public abstract Number ISetting.method(int)\r\n  public void accept(String)\r\n    overrides\r\n      public abstract void ISetting.accept(CharSequence)\r\n  void method(Number)\r\n  static void method(Object)\r\n```\r\n\r\nThe code uses newer Java features, like `var`, `record`, and the [constant API], but I think, the result is straight-forward enough for converting it to older Java versions, if really required.\r\n\r\n[bridge methods]: https://docs.oracle.com/javase/tutorial/java/generics/bridgeMethods.html\r\n[constant API]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/constant/package-summary.html\r\n[the ASM library]: https://asm.ow2.io/javadoc/org/objectweb/asm/package-summary.html","title":"Java ASM method override check","body":"<p>Note that your issue does not only apply to generic supertype. You can also override a method with a more specific return type, with no Generics involved, e.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface SomeInterface {\n    Object method();\n}\nclass SomeImplementation implements SomeInterface {\n    @Override\n    public Integer method() {\n        return null;\n    }\n}\n</code></pre>\n<p>You have to understand the concept of <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/bridgeMethods.html\" rel=\"nofollow noreferrer\">bridge methods</a>.</p>\n<p>A bridge method performs the task of overriding a method on the byte code level, having exactly the same parameter types and return type as the overridden method, and delegates to the actual implementation method.</p>\n<p>Since the bridge method only consists of this invocation instruction, some type casts if required, and the return instruction, it is easy to parse such a method to find the actual method it belongs to, without dealing with the complex rules of the Generic type system.</p>\n<p>Using, the following helper classes</p>\n<pre class=\"lang-java prettyprint-override\"><code>record MethodSignature(String name, String desc) {}\n\nrecord MethodInfo(int access, String owner, String name, String desc) {\n    MethodSignature signature() {\n        return new MethodSignature(name, desc);\n    }\n}\n\nfinal class MethodAndBridges {\n    MethodInfo actual;\n    final List&lt;MethodInfo&gt; bridges = new ArrayList&lt;&gt;();\n\n    MethodAndBridges(MethodSignature sig) {}\n\n    void set(MethodInfo mi) {\n        if(actual != null) throw new IllegalStateException();\n        actual = mi;\n    }\n\n    void addBridge(MethodInfo mi) {\n        bridges.add(mi);\n    }\n}\n</code></pre>\n<p>We can gather the information in a form ready for checking override relations with <a href=\"https://asm.ow2.io/javadoc/org/objectweb/asm/package-summary.html\" rel=\"nofollow noreferrer\">the ASM library</a> as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class MethodCollector extends ClassVisitor {\n    static Map&lt;MethodSignature, MethodAndBridges&gt; getMethods(ClassReader cr) {\n        MethodCollector mc = new MethodCollector();\n        cr.accept(mc, ClassReader.SKIP_DEBUG | ClassReader.SKIP_FRAMES);\n        return mc.found;\n    }\n\n    final Map&lt;MethodSignature, MethodAndBridges&gt; found = new HashMap&lt;&gt;();\n    String owner, superClass;\n    List&lt;String&gt; interfaces;\n\n    protected MethodCollector() {\n        super(Opcodes.ASM9);\n    }\n\n    @Override\n    public void visit(int version, int acc,\n            String name, String sig, String superName, String[] ifNames) {\n        owner = name;\n        superClass = superName;\n        this.interfaces = ifNames == null? List.of(): List.of(ifNames);\n    }\n\n    @Override\n    public MethodVisitor visitMethod(\n        int acc, String name, String desc, String sig, String[] exceptions) {\n\n        MethodInfo mi = new MethodInfo(acc, owner, name, desc);\n        if((acc &amp; Opcodes.ACC_BRIDGE) == 0) {\n            found.computeIfAbsent(mi.signature(), MethodAndBridges::new).set(mi);\n            return null;\n        }\n        return new MethodVisitor(Opcodes.ASM9) {\n            @Override public void visitMethodInsn(\n                    int op, String owner, String name, String tDesc, boolean i) {\n                found.computeIfAbsent(new MethodSignature(name, tDesc),\n                    MethodAndBridges::new).addBridge(mi);\n            }\n        };\n    }\n}\n</code></pre>\n<hr />\n<p>To demonstrate how this work, let’s enhance your example, to address more cases</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface SupplierOfSerializable {\n    Serializable get();\n}\n\ninterface ISetting&lt;T extends CharSequence&gt; extends Supplier&lt;T&gt;, Consumer&lt;T&gt; {\n    T get();\n    @Override void accept(T t);\n    Number method(int i);\n    static void method(Object o) {}\n    private void method(Number n) {}\n}\n\nclass Setting implements ISetting&lt;String&gt;, SupplierOfSerializable {\n    public String get() {\n        return &quot;&quot;;\n    }\n    @Override\n    public void accept(String t) {}\n    public Integer method(int i) {\n        return i;\n    }\n    static void method(Object o) {}\n    void method(Number n) {}\n}\n</code></pre>\n<p>and check the override relations (only considering the direct interfaces, without recursion)</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CheckOverride {\n    public static void main(String[] args) throws IOException {\n        MethodCollector mc = new MethodCollector();\n        new ClassReader(Setting.class.getName())\n            .accept(mc, ClassReader.SKIP_DEBUG | ClassReader.SKIP_FRAMES);\n\n        Map&lt;MethodSignature, MethodAndBridges&gt; implMethods = mc.found;\n        Map&lt;MethodInfo, Set&lt;MethodInfo&gt;&gt; overrides = new HashMap&lt;&gt;();\n\n        for(String ifType: mc.interfaces) {\n            Map&lt;MethodSignature, MethodAndBridges&gt; ifMethods\n                = MethodCollector.getMethods(new ClassReader(ifType));\n\n            System.out.println(&quot;interface &quot; + ifType.replace('/', '.'));\n            printMethods(ifMethods);\n            System.out.println();\n            ifMethods.values().removeIf(CheckOverride::nonOverridable);\n\n            implMethods.forEach((sig, method) -&gt; {\n                if(nonOverridable(method)) {\n                    overrides.putIfAbsent(method.actual, Set.of());\n                    return;\n                }\n                var overridden = ifMethods.get(sig);\n                if(overridden == null &amp;&amp; method.bridges.isEmpty()) {\n                    overrides.putIfAbsent(method.actual, Set.of());\n                    return;\n                }\n                Set&lt;MethodInfo&gt; set = overrides.compute(method.actual,\n                    (k, s) -&gt; s == null || s.isEmpty()? new HashSet&lt;&gt;(): s);\n                if(overridden != null) set.add(overridden.actual);\n                for(var mi: method.bridges) {\n                    overridden = ifMethods.get(mi.signature());\n                    if(overridden != null) set.add(overridden.actual);\n                }\n            });\n        }\n\n        System.out.println(&quot;class &quot; + mc.owner.replace('/', '.'));\n        printMethods(implMethods);\n        System.out.println();\n\n        System.out.println(&quot;Final result&quot;);\n        System.out.println(&quot;class &quot; + mc.owner.replace('/', '.'));\n        overrides.forEach((m,overridden) -&gt; {\n            System.out.println(&quot;  &quot; + toDeclaration(m, false));\n            if(!overridden.isEmpty()) {\n                System.out.println(&quot;    overrides&quot;);\n                overridden.forEach(o -&gt;\n                    System.out.println(&quot;      &quot; + toDeclaration(o, true)));\n            }\n        });\n    }\n\n    static boolean nonOverridable(MethodAndBridges m) {\n        return (m.actual.access() &amp; (Opcodes.ACC_PRIVATE|Opcodes.ACC_STATIC)) != 0\n             || m.actual.name().startsWith(&quot;&lt;&quot;);\n    }\n\n    static void printMethods(Map&lt;MethodSignature, MethodAndBridges&gt; methods) {\n        methods.forEach((sig, methodAndBridges) -&gt; {\n            System.out.println(&quot;  &quot;+toDeclaration(methodAndBridges.actual,false));\n            if(!methodAndBridges.bridges.isEmpty()) {\n                System.out.println(&quot;    bridges&quot;);\n                for(MethodInfo mi: methodAndBridges.bridges) {\n                    System.out.println(&quot;      &quot; + toDeclaration(mi, false));\n                }\n            };\n        });\n    }\n\n    private static String toDeclaration(MethodInfo mi, boolean withType) {\n        StringBuilder sb = new StringBuilder();\n        sb.append(Modifier.toString(mi.access() &amp; Modifier.methodModifiers()));\n        if(sb.length() &gt; 0) sb.append(' ');\n        String clName = mi.owner();\n        var mt = MethodTypeDesc.ofDescriptor(mi.desc());\n        if(mi.name().equals(&quot;&lt;init&gt;&quot;))\n            sb.append(clName, clName.lastIndexOf('/') + 1, clName.length());\n        else {\n            sb.append(mt.returnType().displayName()).append(' ');\n            if(withType) sb.append(clName.replace('/', '.')).append('.');\n            sb.append(mi.name());\n        }\n        if(mt.parameterCount() == 0) sb.append(&quot;()&quot;);\n        else {\n            String sep = &quot;(&quot;;\n            for(ClassDesc cd: mt.parameterList()) {\n                sb.append(sep).append(cd.displayName());\n                sep = &quot;, &quot;;\n            }\n            sb.append(')');\n        }\n        return sb.toString();\n    }\n}\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>interface ISetting\n  public static void method(Object)\n  public abstract void accept(CharSequence)\n    bridges\n      public void accept(Object)\n  public abstract Number method(int)\n  private void method(Number)\n  public abstract CharSequence get()\n    bridges\n      public Object get()\n\ninterface SupplierOfSerializable\n  public abstract Serializable get()\n\nclass Setting\n  Setting()\n  public Integer method(int)\n    bridges\n      public Number method(int)\n  public void accept(String)\n    bridges\n      public void accept(Object)\n      public void accept(CharSequence)\n  static void method(Object)\n  public String get()\n    bridges\n      public Object get()\n      public CharSequence get()\n      public Serializable get()\n  void method(Number)\n\nFinal result\nclass Setting\n  public String get()\n    overrides\n      public abstract Serializable SupplierOfSerializable.get()\n      public abstract CharSequence ISetting.get()\n  Setting()\n  public Integer method(int)\n    overrides\n      public abstract Number ISetting.method(int)\n  public void accept(String)\n    overrides\n      public abstract void ISetting.accept(CharSequence)\n  void method(Number)\n  static void method(Object)\n</code></pre>\n<p>The code uses newer Java features, like <code>var</code>, <code>record</code>, and the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/constant/package-summary.html\" rel=\"nofollow noreferrer\">constant API</a>, but I think, the result is straight-forward enough for converting it to older Java versions, if really required.</p>\n"}],"owner":{"account_id":27812348,"reputation":23,"user_id":21234503,"display_name":"Andrey Tarasov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75488233,"answer_count":1,"score":2,"last_activity_date":1676660529,"creation_date":1676644527,"question_id":75485622,"body_markdown":"I have a problem with method override checks. I can detect simple override relations, but if the parent class has generics and the abstract method uses type parameters (return value/args), my code breaks down because the method description is not equal to the checked method.\r\n\r\nExample:\r\n\r\n```\r\npublic interface ISetting&lt;T&gt; {\r\n\r\npublic T method();\r\n\r\n}\r\n```\r\n\r\n\r\n```\r\npublic class Setting implements ISetting&lt;Integer&gt; {\r\n\r\npublic Integer method() {\r\n//Something\r\n}\r\n\r\n}\r\n```\r\n\r\nIn `ISetting`, the method description is `()Ljava/lang/Object;`\r\nand in `Setting`, the method description is `()Ljava/lang/Integer;`\r\n\r\nHow I can check this Override ?\r\n\r\nOn my head no thoughts come, how I can make this &gt;~&lt; All ideas which come to my head are bad (example: ignore check on desc, but overload method just break this idea)","title":"Java ASM method override check","body":"<p>I have a problem with method override checks. I can detect simple override relations, but if the parent class has generics and the abstract method uses type parameters (return value/args), my code breaks down because the method description is not equal to the checked method.</p>\n<p>Example:</p>\n<pre><code>public interface ISetting&lt;T&gt; {\n\npublic T method();\n\n}\n</code></pre>\n<pre><code>public class Setting implements ISetting&lt;Integer&gt; {\n\npublic Integer method() {\n//Something\n}\n\n}\n</code></pre>\n<p>In <code>ISetting</code>, the method description is <code>()Ljava/lang/Object;</code>\nand in <code>Setting</code>, the method description is <code>()Ljava/lang/Integer;</code></p>\n<p>How I can check this Override ?</p>\n<p>On my head no thoughts come, how I can make this &gt;~&lt; All ideas which come to my head are bad (example: ignore check on desc, but overload method just break this idea)</p>\n"},{"tags":["java","multidimensional-array","dynamic-arrays"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1676661075,"post_id":75488317,"comment_id":133189297,"body_markdown":"Well, if you don&#39;t  know the size of the array in advance, a `Collection`, such as a `List`, is normally used. If you refuse to do that, then you might try an array  set to a size that will be larger than realistically needed. After the inputs are finished, the unused part of the array is trimmed by copying it to an array of the correct length.","body":"Well, if you don&#39;t  know the size of the array in advance, a <code>Collection</code>, such as a <code>List</code>, is normally used. If you refuse to do that, then you might try an array  set to a size that will be larger than realistically needed. After the inputs are finished, the unused part of the array is trimmed by copying it to an array of the correct length."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1676661439,"post_id":75488317,"comment_id":133189394,"body_markdown":"Stack Overflow is not a code writing service. Questions are generally expected to show an attempt to solve the problem. Please see the [Tour](https://www.google.com/search?channel=fs&amp;client=ubuntu&amp;q=stackoverflow.com+tour), [How to Ask](https://stackoverflow.com/help/how-to-ask) and other links in the [Help Center](https://stackoverflow.com/help).  It might also help to search StackOverflow for similar questions.","body":"Stack Overflow is not a code writing service. Questions are generally expected to show an attempt to solve the problem. Please see the <a href=\"https://www.google.com/search?channel=fs&amp;client=ubuntu&amp;q=stackoverflow.com+tour\" rel=\"nofollow noreferrer\">Tour</a>, <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask</a> and other links in the <a href=\"https://stackoverflow.com/help\">Help Center</a>.  It might also help to search StackOverflow for similar questions."},{"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"score":0,"creation_date":1676661739,"post_id":75488317,"comment_id":133189476,"body_markdown":"Or in the case of a fixed sized array, you keep a separate counter that is used to determine what portion of the fixed array is actually holding values. You just ignore the rest of the unused array.","body":"Or in the case of a fixed sized array, you keep a separate counter that is used to determine what portion of the fixed array is actually holding values. You just ignore the rest of the unused array."}],"owner":{"account_id":27814310,"reputation":1,"user_id":21236067,"display_name":"Jay-23"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676660422,"creation_date":1676660422,"question_id":75488317,"body_markdown":"I want to create a 2D array with the help of user input but the user do not specifies the length of the array. The input taken from the user should be saved in a 2D array. until the user inputs &quot;FINISH&quot;.\r\n\r\n\r\nI tried using ArrayList but thats too compliciated. Any simple logic to make things work?","title":"How to take input from user and store it in array until the user enters a specific word","body":"<p>I want to create a 2D array with the help of user input but the user do not specifies the length of the array. The input taken from the user should be saved in a 2D array. until the user inputs &quot;FINISH&quot;.</p>\n<p>I tried using ArrayList but thats too compliciated. Any simple logic to make things work?</p>\n"},{"tags":["java","apache-kafka","mockito","spring-kafka"],"comments":[{"owner":{"account_id":10432483,"reputation":2673,"user_id":7691891,"display_name":"Smaillns"},"score":0,"creation_date":1659288501,"post_id":52783066,"comment_id":129254073,"body_markdown":"Here a very helpful article\n\n\nhttps://www.geekyhacker.com/2020/10/03/test-spring-kafka-consumer-and-producer-with-embeddedkafka/","body":"Here a very helpful article   <a href=\"https://www.geekyhacker.com/2020/10/03/test-spring-kafka-consumer-and-producer-with-embeddedkafka/\" rel=\"nofollow noreferrer\">geekyhacker.com/2020/10/03/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1539364001,"creation_date":1539364001,"answer_id":52784115,"question_id":52783066,"body_markdown":"&gt;  how do I ensure @KafkaListener is invoked when a new message is arrived in Kafka.\r\n\r\nWell, this is essentially a Framework responsibility to test such a functionality. In your case you need just concentrate on the business logic and unit test exactly your custom code, but not that one compiled in the Framework. In addition there is not goo point to test the `@KafkaListener` method which just logs incoming messages. It is definitely going to be too hard to find the hook for test-case verification.\r\n\r\nOn the other hand I really believe that business logic in your `@KafkaListener` method is much complicated than you show. So, it might be really better to verify your custom code (e.g. DB insert, some other service call etc.) called from that method rather than try to figure out the hook exactly for the `myMessageListener()`.\r\n\r\nWhat you do with the `mock(MyMessageProcessor.class)` is really a good way for business logic verification. Only what is wrong in your code is about that duplication for the `EmbeddedKafka`: you use an annotation and you also declare a `@Bean` in the config. You should think about removing one of them. Although it isn&#39;t clear where is your production code, which is really free from the embedded Kafka. Otherwise, if everything is in the test scope, I don&#39;t see any problems with your consumer and producer factories configuration. You definitely have a minimal possible config for the `@KafkaListener` and `KafkaTemplate`. Only what you need is to remove a `@EmbeddedKafka` do not start the broker twice.","title":"How to write Unit test for @KafkaListener?","body":"<blockquote>\n  <p>how do I ensure @KafkaListener is invoked when a new message is arrived in Kafka.</p>\n</blockquote>\n\n<p>Well, this is essentially a Framework responsibility to test such a functionality. In your case you need just concentrate on the business logic and unit test exactly your custom code, but not that one compiled in the Framework. In addition there is not goo point to test the <code>@KafkaListener</code> method which just logs incoming messages. It is definitely going to be too hard to find the hook for test-case verification.</p>\n\n<p>On the other hand I really believe that business logic in your <code>@KafkaListener</code> method is much complicated than you show. So, it might be really better to verify your custom code (e.g. DB insert, some other service call etc.) called from that method rather than try to figure out the hook exactly for the <code>myMessageListener()</code>.</p>\n\n<p>What you do with the <code>mock(MyMessageProcessor.class)</code> is really a good way for business logic verification. Only what is wrong in your code is about that duplication for the <code>EmbeddedKafka</code>: you use an annotation and you also declare a <code>@Bean</code> in the config. You should think about removing one of them. Although it isn't clear where is your production code, which is really free from the embedded Kafka. Otherwise, if everything is in the test scope, I don't see any problems with your consumer and producer factories configuration. You definitely have a minimal possible config for the <code>@KafkaListener</code> and <code>KafkaTemplate</code>. Only what you need is to remove a <code>@EmbeddedKafka</code> do not start the broker twice.</p>\n"},{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1590072020,"creation_date":1539364125,"answer_id":52784139,"question_id":52783066,"body_markdown":"You can wrap the listener in your test case.\r\n\r\nGiven\r\n\r\n&lt;!-- language-all: lang-java --&gt;\r\n\r\n    @SpringBootApplication\r\n    public class So52783066Application {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(So52783066Application.class, args);\r\n    \t}\r\n    \r\n    \t@KafkaListener(id = &quot;so52783066&quot;, topics = &quot;so52783066&quot;)\r\n    \tpublic void listen(String in) {\r\n    \t\tSystem.out.println(in);\r\n    \t}\r\n    \r\n    }\r\n\r\nthen\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest\r\n    public class So52783066ApplicationTests {\r\n    \r\n    \t@ClassRule\r\n    \tpublic static KafkaEmbedded embeddedKafka = new KafkaEmbedded(1, true, &quot;so52783066&quot;);\r\n    \r\n    \t@Autowired\r\n    \tprivate KafkaListenerEndpointRegistry registry;\r\n    \r\n    \t@Autowired\r\n    \tprivate KafkaTemplate&lt;String, String&gt; template;\r\n    \r\n    \t@Before\r\n    \tpublic void setup() {\r\n    \t\tSystem.setProperty(&quot;spring.kafka.bootstrap-servers&quot;, embeddedKafka.getBrokersAsString());\r\n    \t}\r\n    \r\n    \t@Test\r\n    \tpublic void test() throws Exception {\r\n    \t\tConcurrentMessageListenerContainer&lt;?, ?&gt; container = (ConcurrentMessageListenerContainer&lt;?, ?&gt;) registry\r\n    \t\t\t\t.getListenerContainer(&quot;so52783066&quot;);\r\n    \t\tcontainer.stop();\r\n    \t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n    \t\tAcknowledgingConsumerAwareMessageListener&lt;String, String&gt; messageListener = (AcknowledgingConsumerAwareMessageListener&lt;String, String&gt;) container\r\n    \t\t\t\t.getContainerProperties().getMessageListener();\r\n    \t\tCountDownLatch latch = new CountDownLatch(1);\r\n    \t\tcontainer.getContainerProperties()\r\n    \t\t\t\t.setMessageListener(new AcknowledgingConsumerAwareMessageListener&lt;String, String&gt;() {\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic void onMessage(ConsumerRecord&lt;String, String&gt; data, Acknowledgment acknowledgment,\r\n    \t\t\t\t\t\t\tConsumer&lt;?, ?&gt; consumer) {\r\n    \t\t\t\t\t\tmessageListener.onMessage(data, acknowledgment, consumer);\r\n    \t\t\t\t\t\tlatch.countDown();\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t});\r\n    \t\tcontainer.start();\r\n    \t\ttemplate.send(&quot;so52783066&quot;, &quot;foo&quot;);\r\n    \t\tassertThat(latch.await(10, TimeUnit.SECONDS)).isTrue();\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"How to write Unit test for @KafkaListener?","body":"<p>You can wrap the listener in your test case.</p>\n\n<p>Given</p>\n\n\n\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\npublic class So52783066Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(So52783066Application.class, args);\n    }\n\n    @KafkaListener(id = \"so52783066\", topics = \"so52783066\")\n    public void listen(String in) {\n        System.out.println(in);\n    }\n\n}\n</code></pre>\n\n<p>then</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@RunWith(SpringRunner.class)\n@SpringBootTest\npublic class So52783066ApplicationTests {\n\n    @ClassRule\n    public static KafkaEmbedded embeddedKafka = new KafkaEmbedded(1, true, \"so52783066\");\n\n    @Autowired\n    private KafkaListenerEndpointRegistry registry;\n\n    @Autowired\n    private KafkaTemplate&lt;String, String&gt; template;\n\n    @Before\n    public void setup() {\n        System.setProperty(\"spring.kafka.bootstrap-servers\", embeddedKafka.getBrokersAsString());\n    }\n\n    @Test\n    public void test() throws Exception {\n        ConcurrentMessageListenerContainer&lt;?, ?&gt; container = (ConcurrentMessageListenerContainer&lt;?, ?&gt;) registry\n                .getListenerContainer(\"so52783066\");\n        container.stop();\n        @SuppressWarnings(\"unchecked\")\n        AcknowledgingConsumerAwareMessageListener&lt;String, String&gt; messageListener = (AcknowledgingConsumerAwareMessageListener&lt;String, String&gt;) container\n                .getContainerProperties().getMessageListener();\n        CountDownLatch latch = new CountDownLatch(1);\n        container.getContainerProperties()\n                .setMessageListener(new AcknowledgingConsumerAwareMessageListener&lt;String, String&gt;() {\n\n                    @Override\n                    public void onMessage(ConsumerRecord&lt;String, String&gt; data, Acknowledgment acknowledgment,\n                            Consumer&lt;?, ?&gt; consumer) {\n                        messageListener.onMessage(data, acknowledgment, consumer);\n                        latch.countDown();\n                    }\n\n                });\n        container.start();\n        template.send(\"so52783066\", \"foo\");\n        assertThat(latch.await(10, TimeUnit.SECONDS)).isTrue();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2324653,"reputation":2869,"user_id":2039455,"display_name":"Laura Liparulo"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1590124710,"creation_date":1550328871,"answer_id":54724319,"question_id":52783066,"body_markdown":"Here is my working solution for the Consumer, based on your code. Thank you :-) \r\n\r\nThe Configuration is the following:\r\n\r\n```java\r\n@TestConfiguration\r\n@EnableKafka\r\n@Profile(&quot;kafka_test&quot;)\r\npublic class KafkaTestConfig {\r\n\r\n    private static Logger log = LoggerFactory.getLogger(KafkaTestConfig.class);\r\n\r\n    @Value(&quot;${spring.kafka.bootstrap-servers}&quot;)\r\n    private String bootstrapServers;\r\n\r\n    @Bean\r\n    @Primary\r\n    public Map&lt;String, Object&gt; consumerConfigs() {\r\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\r\n        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\r\n        props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\r\n        props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, JsonDeserializer.class);\r\n        props.put(ConsumerConfig.GROUP_ID_CONFIG, &quot;group-id&quot;);\r\n        props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, false);\r\n        props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\r\n        props.put(ConsumerConfig.SESSION_TIMEOUT_MS_CONFIG, 15000);\r\n\r\n        log.info(&quot;Consumer TEST config = {}&quot;, props);\r\n        return props;\r\n    }\r\n\r\n    @Bean\r\n    public Map&lt;String, Object&gt; producerConfigs() {\r\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\r\n        props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\r\n        props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\r\n        props.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, JsonSerializer.class);\r\n\r\n        log.info(&quot;Producer TEST config = {}&quot;, props);\r\n        return props;\r\n    }\r\n\r\n    @Bean\r\n    public ConsumerFactory&lt;String, String&gt; consumerFactory() {\r\n        return new DefaultKafkaConsumerFactory&lt;&gt;(consumerConfigs(), new StringDeserializer(),\r\n                new JsonDeserializer&lt;String&gt;());\r\n    }\r\n\r\n    @Bean\r\n    public ProducerFactory&lt;String, String&gt; producerFactory() {\r\n        DefaultKafkaProducerFactory&lt;String, String&gt; pf = new DefaultKafkaProducerFactory&lt;&gt;(producerConfigs());\r\n        return pf;\r\n    }\r\n\r\n    @Bean\r\n    public ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; kafkaListenerContainerFactory(\r\n            ConsumerFactory&lt;String, String&gt; kafkaConsumerFactory) {\r\n        ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n        factory.setConsumerFactory(consumerFactory());\r\n        factory.getContainerProperties().setAckOnError(false);\r\n        factory.setConcurrency(2);\r\n        return factory;\r\n    }\r\n\r\n    @Bean\r\n    public KafkaTemplate&lt;String, String&gt; kafkaTemplate() {\r\n        KafkaTemplate&lt;String, String&gt; kafkaTemplate = new KafkaTemplate&lt;&gt;(producerFactory());\r\n        return kafkaTemplate;\r\n    }\r\n\r\n    @Bean\r\n    public KafkaListenerEndpointRegistry kafkaListenerEndpointRegistry() {\r\n        KafkaListenerEndpointRegistry kafkaListenerEndpointRegistry = new KafkaListenerEndpointRegistry();\r\n        return kafkaListenerEndpointRegistry;\r\n    }\r\n}\r\n```\r\n\r\nPlace all the beans you need to include in the test in a different class:\r\n```java\r\n@TestConfiguration\r\n@Profile(&quot;kafka_test&quot;)\r\n@EnableKafka\r\npublic class KafkaBeansConfig {\r\n\r\n    @Bean\r\n    public MyProducer myProducer() {\r\n        return new MyProducer();\r\n    }\r\n\r\n    // more beans\r\n}\r\n```\r\n\t  \r\nI created a BaseKafkaConsumerTest class to reuse it :\r\n```java\r\n@ExtendWith(SpringExtension.class)\r\n@TestPropertySource(properties = { &quot;spring.kafka.bootstrap-servers=${spring.embedded.kafka.brokers}&quot; })\r\n@TestInstance(Lifecycle.PER_CLASS)\r\n@DirtiesContext\r\n@ContextConfiguration(classes = KafkaTestConfig.class)\r\n@ActiveProfiles(&quot;kafka_test&quot;)\r\npublic class BaseKafkaConsumerTest {\r\n\r\n    @Autowired\r\n    protected EmbeddedKafkaBroker embeddedKafka;\r\n\r\n    @Value(&quot;${spring.embedded.kafka.brokers}&quot;)\r\n    private String brokerAddresses;\r\n\r\n    @Autowired\r\n    protected KafkaListenerEndpointRegistry kafkaListenerEndpointRegistry;\r\n\r\n    @Autowired\r\n    protected KafkaTemplate&lt;String, String&gt; senderTemplate;\r\n\r\n    public void setUp() {\r\n        embeddedKafka.brokerProperty(&quot;controlled.shutdown.enable&quot;, true);\r\n\r\n        for (MessageListenerContainer messageListenerContainer : kafkaListenerEndpointRegistry\r\n                .getListenerContainers()) {\r\n            System.err.println(messageListenerContainer.getContainerProperties().toString());\r\n            ContainerTestUtils.waitForAssignment(messageListenerContainer, embeddedKafka.getPartitionsPerTopic());\r\n        }\r\n    }\r\n\r\n    @AfterAll\r\n    public void tearDown() {\r\n        for (MessageListenerContainer messageListenerContainer : kafkaListenerEndpointRegistry\r\n                .getListenerContainers()) {\r\n            messageListenerContainer.stop();\r\n        }\r\n\r\n        embeddedKafka.getKafkaServers().forEach(b -&gt; b.shutdown());\r\n        embeddedKafka.getKafkaServers().forEach(b -&gt; b.awaitShutdown());\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nExtend the base class to stest your consumer:\r\n```java\r\n@EmbeddedKafka(topics = MyConsumer.TOPIC_NAME)\r\n@Import(KafkaBeansConfig.class)\r\npublic class MYKafkaConsumerTest extends BaseKafkaConsumerTest {\r\n\r\n    private static Logger log = LoggerFactory.getLogger(PaymentMethodsKafkaConsumerTest.class);\r\n\r\n    @Autowired\r\n    private MyConsumer myConsumer;\r\n\r\n    // mocks with @MockBean\r\n\r\n    @Configuration\r\n    @ComponentScan({ &quot;com.myfirm.kafka&quot; })\r\n    static class KafkaLocalTestConfig {\r\n    }\r\n\r\n    @BeforeAll\r\n    public void setUp() {\r\n        super.setUp();\r\n    }\r\n\r\n    @Test\r\n    public void testMessageIsReceived() throws Exception {\r\n\r\n    //mocks\r\n\r\n    String jsonPayload = &quot;{\\&quot;id\\&quot;:\\&quot;12345\\&quot;,&quot;cookieDomain\\&quot;:&quot;helloworld&quot;}&quot;;\r\n    ListenableFuture&lt;SendResult&lt;String, String&gt;&gt; future =\r\n        senderTemplate.send(MyConsumer.TOPIC_NAME, jsonPayload);\r\n\r\n    Thread.sleep(10000);\r\n    future.addCallback(new ListenableFutureCallback&lt;SendResult&lt;String, String&gt;&gt;() {\r\n\r\n        @Override\r\n        public void onSuccess(SendResult&lt;String, String&gt; result) {\r\n            log.info(&quot;successfully sent message=&#39;{}&#39; with offset={}&quot;, jsonPayload,\r\n                result.getRecordMetadata().offset());\r\n        }\r\n\r\n        @Override\r\n        public void onFailure(Throwable ex) {\r\n            log.error(&quot;unable to send message=&#39;{}&#39;&quot;, jsonPayload, ex);\r\n        }\r\n    });\r\n\r\n    Mockito.verify(myService, Mockito.times(1))\r\n    .update(Mockito.any(MyDetails.class));\r\n}\r\n```  \r\n  \r\nAs I read in other posts, don&#180;t test the business logic this way. Just that the calls are made.\r\n  \r\n","title":"How to write Unit test for @KafkaListener?","body":"<p>Here is my working solution for the Consumer, based on your code. Thank you :-) </p>\n\n<p>The Configuration is the following:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@TestConfiguration\n@EnableKafka\n@Profile(\"kafka_test\")\npublic class KafkaTestConfig {\n\n    private static Logger log = LoggerFactory.getLogger(KafkaTestConfig.class);\n\n    @Value(\"${spring.kafka.bootstrap-servers}\")\n    private String bootstrapServers;\n\n    @Bean\n    @Primary\n    public Map&lt;String, Object&gt; consumerConfigs() {\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\n        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\n        props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\n        props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, JsonDeserializer.class);\n        props.put(ConsumerConfig.GROUP_ID_CONFIG, \"group-id\");\n        props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, false);\n        props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, \"earliest\");\n        props.put(ConsumerConfig.SESSION_TIMEOUT_MS_CONFIG, 15000);\n\n        log.info(\"Consumer TEST config = {}\", props);\n        return props;\n    }\n\n    @Bean\n    public Map&lt;String, Object&gt; producerConfigs() {\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\n        props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\n        props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\n        props.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, JsonSerializer.class);\n\n        log.info(\"Producer TEST config = {}\", props);\n        return props;\n    }\n\n    @Bean\n    public ConsumerFactory&lt;String, String&gt; consumerFactory() {\n        return new DefaultKafkaConsumerFactory&lt;&gt;(consumerConfigs(), new StringDeserializer(),\n                new JsonDeserializer&lt;String&gt;());\n    }\n\n    @Bean\n    public ProducerFactory&lt;String, String&gt; producerFactory() {\n        DefaultKafkaProducerFactory&lt;String, String&gt; pf = new DefaultKafkaProducerFactory&lt;&gt;(producerConfigs());\n        return pf;\n    }\n\n    @Bean\n    public ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; kafkaListenerContainerFactory(\n            ConsumerFactory&lt;String, String&gt; kafkaConsumerFactory) {\n        ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n        factory.setConsumerFactory(consumerFactory());\n        factory.getContainerProperties().setAckOnError(false);\n        factory.setConcurrency(2);\n        return factory;\n    }\n\n    @Bean\n    public KafkaTemplate&lt;String, String&gt; kafkaTemplate() {\n        KafkaTemplate&lt;String, String&gt; kafkaTemplate = new KafkaTemplate&lt;&gt;(producerFactory());\n        return kafkaTemplate;\n    }\n\n    @Bean\n    public KafkaListenerEndpointRegistry kafkaListenerEndpointRegistry() {\n        KafkaListenerEndpointRegistry kafkaListenerEndpointRegistry = new KafkaListenerEndpointRegistry();\n        return kafkaListenerEndpointRegistry;\n    }\n}\n</code></pre>\n\n<p>Place all the beans you need to include in the test in a different class:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@TestConfiguration\n@Profile(\"kafka_test\")\n@EnableKafka\npublic class KafkaBeansConfig {\n\n    @Bean\n    public MyProducer myProducer() {\n        return new MyProducer();\n    }\n\n    // more beans\n}\n</code></pre>\n\n<p>I created a BaseKafkaConsumerTest class to reuse it :</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@TestPropertySource(properties = { \"spring.kafka.bootstrap-servers=${spring.embedded.kafka.brokers}\" })\n@TestInstance(Lifecycle.PER_CLASS)\n@DirtiesContext\n@ContextConfiguration(classes = KafkaTestConfig.class)\n@ActiveProfiles(\"kafka_test\")\npublic class BaseKafkaConsumerTest {\n\n    @Autowired\n    protected EmbeddedKafkaBroker embeddedKafka;\n\n    @Value(\"${spring.embedded.kafka.brokers}\")\n    private String brokerAddresses;\n\n    @Autowired\n    protected KafkaListenerEndpointRegistry kafkaListenerEndpointRegistry;\n\n    @Autowired\n    protected KafkaTemplate&lt;String, String&gt; senderTemplate;\n\n    public void setUp() {\n        embeddedKafka.brokerProperty(\"controlled.shutdown.enable\", true);\n\n        for (MessageListenerContainer messageListenerContainer : kafkaListenerEndpointRegistry\n                .getListenerContainers()) {\n            System.err.println(messageListenerContainer.getContainerProperties().toString());\n            ContainerTestUtils.waitForAssignment(messageListenerContainer, embeddedKafka.getPartitionsPerTopic());\n        }\n    }\n\n    @AfterAll\n    public void tearDown() {\n        for (MessageListenerContainer messageListenerContainer : kafkaListenerEndpointRegistry\n                .getListenerContainers()) {\n            messageListenerContainer.stop();\n        }\n\n        embeddedKafka.getKafkaServers().forEach(b -&gt; b.shutdown());\n        embeddedKafka.getKafkaServers().forEach(b -&gt; b.awaitShutdown());\n    }\n\n}\n</code></pre>\n\n<p>Extend the base class to stest your consumer:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@EmbeddedKafka(topics = MyConsumer.TOPIC_NAME)\n@Import(KafkaBeansConfig.class)\npublic class MYKafkaConsumerTest extends BaseKafkaConsumerTest {\n\n    private static Logger log = LoggerFactory.getLogger(PaymentMethodsKafkaConsumerTest.class);\n\n    @Autowired\n    private MyConsumer myConsumer;\n\n    // mocks with @MockBean\n\n    @Configuration\n    @ComponentScan({ \"com.myfirm.kafka\" })\n    static class KafkaLocalTestConfig {\n    }\n\n    @BeforeAll\n    public void setUp() {\n        super.setUp();\n    }\n\n    @Test\n    public void testMessageIsReceived() throws Exception {\n\n    //mocks\n\n    String jsonPayload = \"{\\\"id\\\":\\\"12345\\\",\"cookieDomain\\\":\"helloworld\"}\";\n    ListenableFuture&lt;SendResult&lt;String, String&gt;&gt; future =\n        senderTemplate.send(MyConsumer.TOPIC_NAME, jsonPayload);\n\n    Thread.sleep(10000);\n    future.addCallback(new ListenableFutureCallback&lt;SendResult&lt;String, String&gt;&gt;() {\n\n        @Override\n        public void onSuccess(SendResult&lt;String, String&gt; result) {\n            log.info(\"successfully sent message='{}' with offset={}\", jsonPayload,\n                result.getRecordMetadata().offset());\n        }\n\n        @Override\n        public void onFailure(Throwable ex) {\n            log.error(\"unable to send message='{}'\", jsonPayload, ex);\n        }\n    });\n\n    Mockito.verify(myService, Mockito.times(1))\n    .update(Mockito.any(MyDetails.class));\n}\n</code></pre>\n\n<p>As I read in other posts, don´t test the business logic this way. Just that the calls are made.</p>\n"},{"tags":[],"owner":{"account_id":18795083,"reputation":97,"user_id":15248265,"display_name":"Kalich"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1655657649,"creation_date":1655657649,"answer_id":72678739,"question_id":52783066,"body_markdown":"If you want to write integration tests using `EmbeddedKafka`, then you can do something like this.\r\nAssume we have some `KafkaListener`, which accepts a `RequestDto` as a `Payload`.\r\n\r\nIn your test class you should create a `TestConfiguration` in order to create producer beans and to autowire `KafkaTemplate` into your test. Also notice, that instead of autowiring consumer, we inject a consumer `SpyBean`.\r\n\r\nIn `someTest` method we are creating a latch, and setting up the consumer listener method so that when it is called, the latch will be opened and assertions will take place only after the listener have received the Payload.\r\n\r\nAlso notice `any() ?: RequestDto()` line. You should use elvis operator with `any()` only if you are using Mockito&#39;s `any()` with non-null Kotlin method arguments, because `any()` firstly returns null.\r\n\r\n\r\n```kotlin\r\n@EnableKafka\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n@EmbeddedKafka(partitions = 10, brokerProperties = [&quot;listeners=PLAINTEXT://localhost:9092&quot;, &quot;port=9092&quot;])\r\nclass KafkaIgniteApplicationTests {\r\n\r\n    @SpyBean\r\n    private lateinit var consumer: Consumer\r\n\r\n    @TestConfiguration\r\n    class Config {\r\n\r\n        @Value(&quot;\\${spring.kafka.consumer.bootstrap-servers}&quot;)\r\n        private lateinit var servers: String\r\n\r\n        fun producerConfig(): Map&lt;String, Any&gt; {\r\n            val props = mutableMapOf&lt;String, Any&gt;()\r\n            props[ProducerConfig.BOOTSTRAP_SERVERS_CONFIG] = servers\r\n            props[ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG] = StringSerializer::class.java\r\n            props[ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG] = StringSerializer::class.java\r\n            return props\r\n        }\r\n\r\n        @Bean\r\n        fun producerFactory(): ProducerFactory&lt;String, String&gt; {\r\n            return DefaultKafkaProducerFactory(producerConfig())\r\n        }\r\n\r\n        @Bean\r\n        fun kafkaTemplate(producerFactory: ProducerFactory&lt;String, String&gt;): KafkaTemplate&lt;String, String&gt; {\r\n            return KafkaTemplate(producerFactory)\r\n        }\r\n    }\r\n\r\n    @Autowired\r\n    private lateinit var kafkaTemplate: KafkaTemplate&lt;String, String&gt;\r\n\r\n    @Test\r\n    fun someTest() {\r\n        val lock = CountDownLatch(1)\r\n        `when`(consumer.receive(any() ?: RequestDto())).thenAnswer {\r\n            it.callRealMethod()\r\n            lock.countDown()\r\n        }\r\n        val request = &quot;{\\&quot;value\\&quot;:\\&quot;1\\&quot;}&quot;\r\n        kafkaTemplate.send(TOPIC, request)\r\n        lock.await(1000, TimeUnit.MILLISECONDS)\r\n        verify(consumer).receive(RequestDto().apply { value = BigDecimal.ONE })\r\n    }\r\n}\r\n```","title":"How to write Unit test for @KafkaListener?","body":"<p>If you want to write integration tests using <code>EmbeddedKafka</code>, then you can do something like this.\nAssume we have some <code>KafkaListener</code>, which accepts a <code>RequestDto</code> as a <code>Payload</code>.</p>\n<p>In your test class you should create a <code>TestConfiguration</code> in order to create producer beans and to autowire <code>KafkaTemplate</code> into your test. Also notice, that instead of autowiring consumer, we inject a consumer <code>SpyBean</code>.</p>\n<p>In <code>someTest</code> method we are creating a latch, and setting up the consumer listener method so that when it is called, the latch will be opened and assertions will take place only after the listener have received the Payload.</p>\n<p>Also notice <code>any() ?: RequestDto()</code> line. You should use elvis operator with <code>any()</code> only if you are using Mockito's <code>any()</code> with non-null Kotlin method arguments, because <code>any()</code> firstly returns null.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@EnableKafka\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@EmbeddedKafka(partitions = 10, brokerProperties = [&quot;listeners=PLAINTEXT://localhost:9092&quot;, &quot;port=9092&quot;])\nclass KafkaIgniteApplicationTests {\n\n    @SpyBean\n    private lateinit var consumer: Consumer\n\n    @TestConfiguration\n    class Config {\n\n        @Value(&quot;\\${spring.kafka.consumer.bootstrap-servers}&quot;)\n        private lateinit var servers: String\n\n        fun producerConfig(): Map&lt;String, Any&gt; {\n            val props = mutableMapOf&lt;String, Any&gt;()\n            props[ProducerConfig.BOOTSTRAP_SERVERS_CONFIG] = servers\n            props[ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG] = StringSerializer::class.java\n            props[ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG] = StringSerializer::class.java\n            return props\n        }\n\n        @Bean\n        fun producerFactory(): ProducerFactory&lt;String, String&gt; {\n            return DefaultKafkaProducerFactory(producerConfig())\n        }\n\n        @Bean\n        fun kafkaTemplate(producerFactory: ProducerFactory&lt;String, String&gt;): KafkaTemplate&lt;String, String&gt; {\n            return KafkaTemplate(producerFactory)\n        }\n    }\n\n    @Autowired\n    private lateinit var kafkaTemplate: KafkaTemplate&lt;String, String&gt;\n\n    @Test\n    fun someTest() {\n        val lock = CountDownLatch(1)\n        `when`(consumer.receive(any() ?: RequestDto())).thenAnswer {\n            it.callRealMethod()\n            lock.countDown()\n        }\n        val request = &quot;{\\&quot;value\\&quot;:\\&quot;1\\&quot;}&quot;\n        kafkaTemplate.send(TOPIC, request)\n        lock.await(1000, TimeUnit.MILLISECONDS)\n        verify(consumer).receive(RequestDto().apply { value = BigDecimal.ONE })\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676660079,"creation_date":1676660079,"answer_id":75488276,"question_id":52783066,"body_markdown":"&gt; In unit test, how do I ensure @KafkaListener is invoked when a new message is arrived in Kafka.\r\n\r\nInstead of using `Awaitility` or `CountDownLatch` approach , a more easy way is to make the actual `@KafkaListener` bean as the mockito spy using `@SpyBean`. Spy basically allows you to record all interactions made on an actual bean instance such that you can verify its interactions later. Together with the timeout verify feature of the mockito , you can ensure that the verification will be done over and over until certain timeout after the producer send out the message. \r\n\r\nSomething like :\r\n\r\n``` java\r\n@SpringBootTest(properties = {&quot;spring.kafka.bootstrap-servers=${spring.embedded.kafka.brokers}&quot;})\r\n@EmbeddedKafka(topics = {&quot;fooTopic&quot;})\r\npublic class MyMessageConsumersTest {\r\n\r\n   @SpyBean\r\n   private MyKafkaListener myKafkaListener;\r\n\r\n   @Captor\r\n   private ArgumentCaptor&lt;MyMessage&gt; myMessageCaptor;\r\n\r\n   @Test\r\n   public void test(){\r\n\r\n      //create KafkaTemplate to send some message to the topic...\r\n\r\n       verify(myKafkaListener, timeout(5000)). myMessageListener(myMessageCaptor.capture());\r\n       \r\n      //assert the KafkaListener is configured correctly such that it is invoked with the expected parameter\r\n       assertThat(myMessageCaptor.getValue()).isEqualTo(xxxxx);\r\n      \r\n   }\r\n```\r\n","title":"How to write Unit test for @KafkaListener?","body":"<blockquote>\n<p>In unit test, how do I ensure @KafkaListener is invoked when a new message is arrived in Kafka.</p>\n</blockquote>\n<p>Instead of using <code>Awaitility</code> or <code>CountDownLatch</code> approach , a more easy way is to make the actual <code>@KafkaListener</code> bean as the mockito spy using <code>@SpyBean</code>. Spy basically allows you to record all interactions made on an actual bean instance such that you can verify its interactions later. Together with the timeout verify feature of the mockito , you can ensure that the verification will be done over and over until certain timeout after the producer send out the message.</p>\n<p>Something like :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(properties = {&quot;spring.kafka.bootstrap-servers=${spring.embedded.kafka.brokers}&quot;})\n@EmbeddedKafka(topics = {&quot;fooTopic&quot;})\npublic class MyMessageConsumersTest {\n\n   @SpyBean\n   private MyKafkaListener myKafkaListener;\n\n   @Captor\n   private ArgumentCaptor&lt;MyMessage&gt; myMessageCaptor;\n\n   @Test\n   public void test(){\n\n      //create KafkaTemplate to send some message to the topic...\n\n       verify(myKafkaListener, timeout(5000)). myMessageListener(myMessageCaptor.capture());\n       \n      //assert the KafkaListener is configured correctly such that it is invoked with the expected parameter\n       assertThat(myMessageCaptor.getValue()).isEqualTo(xxxxx);\n      \n   }\n</code></pre>\n"}],"owner":{"account_id":2734023,"reputation":2572,"user_id":2357083,"display_name":"Abbin Varghese"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38766,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"answer_count":5,"score":21,"last_activity_date":1676660263,"creation_date":1539359640,"question_id":52783066,"body_markdown":"Trying to figure out if I can write unit test for @KafkaListener using spring-kafka and spring-kafka-test. \r\n\r\nMy Listener class. \r\n  \r\n```java\r\n    public class MyKafkaListener {\r\n    @Autowired\r\n    private MyMessageProcessor myMessageProcessor;\r\n\r\n    @KafkaListener(topics = &quot;${kafka.topic.01}&quot;, groupId = &quot;SF.CLIENT&quot;, clientIdPrefix = &quot;SF.01&quot;, containerFactory = &quot;myMessageListenerContainerFactory&quot;)\r\n    public void myMessageListener(MyMessage message) {\r\n        myMessageProcessor.process(message);\r\n        log.info(&quot;MyMessage processed&quot;);\r\n    }}\r\n```\r\n\r\nMy Test class :\r\n\r\n  \r\n```java\r\n    @RunWith(SpringRunner.class)\r\n    @DirtiesContext\r\n    @EmbeddedKafka(partitions = 1, topics = {&quot;I1.Topic.json.001&quot;})\r\n    @ContextConfiguration(classes = {TestKafkaConfig.class})\r\n    public class MyMessageConsumersTest {\r\n\r\n    @Autowired\r\n    private MyMessageProcessor myMessageProcessor;\r\n\r\n    @Value(&quot;${kafka.topic.01}&quot;)\r\n    private String TOPIC_01;\r\n\r\n    @Autowired\r\n    private KafkaTemplate&lt;String, MyMessage&gt; messageProducer;\r\n\r\n    @Test\r\n    public void testSalesforceMessageListner() {\r\n        MyMessageConsumers myMessageConsumers = new MyMessageConsumers(mockService);\r\n        messageProducer.send(TOPIC_01, &quot;MessageID&quot;, new MyMessage());\r\n        verify(myMessageProcessor, times(1)).process(any(MyMessage.class));\r\n    }}\r\n```\r\nMy Test config class :\r\n```java\r\n    @Configuration\r\n    @EnableKafka\r\n    public class TestKafkaConfig {\r\n    @Bean\r\n    public MyMessageProcessor myMessageProcessor() {\r\n        return mock(MyMessageProcessor.class);\r\n    }\r\n    @Bean\r\n    public KafkaEmbedded kafkaEmbedded() {\r\n        return new KafkaEmbedded(1, true, 1, &quot;I1.Topic.json.001&quot;);\r\n    }\r\n\r\n    //Consumer\r\n    @Bean\r\n    public ConsumerFactory&lt;String, MyMessage&gt; myMessageConsumerFactory() {\r\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\r\n        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaEmbedded().getBrokersAsString());\r\n        props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, false);\r\n        props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\r\n        return new DefaultKafkaConsumerFactory&lt;&gt;(props, new StringDeserializer(), new JsonDeserializer&lt;&gt;(MyMessage.class));\r\n    }\r\n    @Bean\r\n    public ConcurrentKafkaListenerContainerFactory&lt;String, MyMessage&gt; myMessageListenerContainerFactory() {\r\n        ConcurrentKafkaListenerContainerFactory&lt;String, MyMessage&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n        factory.setConsumerFactory(myMessageConsumerFactory());\r\n        return factory;\r\n    }\r\n    \r\n    //Producer\r\n    @Bean\r\n    public ProducerFactory&lt;String, MyMessage&gt; producerFactory() {\r\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\r\n        props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaEmbedded().getBrokersAsString());\r\n        props.put(ProducerConfig.RETRIES_CONFIG, 0);\r\n        props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\r\n        props.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, KafkaMessageSerializer.class);\r\n        return new DefaultKafkaProducerFactory&lt;&gt;(props);\r\n    }\r\n    @Bean\r\n    public KafkaTemplate&lt;String, MyMessage&gt; messageProducer() {\r\n        return new KafkaTemplate&lt;&gt;(producerFactory());\r\n    }\r\n    }\r\n\r\n```  \r\nIs there any simple way to make this work ?\r\n\r\nOr should I do the testing of @KafkaListener in some other way ? In unit test, how do I ensure @KafkaListener is invoked when a new message is arrived in Kafka.","title":"How to write Unit test for @KafkaListener?","body":"<p>Trying to figure out if I can write unit test for @KafkaListener using spring-kafka and spring-kafka-test. </p>\n\n<p>My Listener class. </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    public class MyKafkaListener {\n    @Autowired\n    private MyMessageProcessor myMessageProcessor;\n\n    @KafkaListener(topics = \"${kafka.topic.01}\", groupId = \"SF.CLIENT\", clientIdPrefix = \"SF.01\", containerFactory = \"myMessageListenerContainerFactory\")\n    public void myMessageListener(MyMessage message) {\n        myMessageProcessor.process(message);\n        log.info(\"MyMessage processed\");\n    }}\n</code></pre>\n\n<p>My Test class :</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    @RunWith(SpringRunner.class)\n    @DirtiesContext\n    @EmbeddedKafka(partitions = 1, topics = {\"I1.Topic.json.001\"})\n    @ContextConfiguration(classes = {TestKafkaConfig.class})\n    public class MyMessageConsumersTest {\n\n    @Autowired\n    private MyMessageProcessor myMessageProcessor;\n\n    @Value(\"${kafka.topic.01}\")\n    private String TOPIC_01;\n\n    @Autowired\n    private KafkaTemplate&lt;String, MyMessage&gt; messageProducer;\n\n    @Test\n    public void testSalesforceMessageListner() {\n        MyMessageConsumers myMessageConsumers = new MyMessageConsumers(mockService);\n        messageProducer.send(TOPIC_01, \"MessageID\", new MyMessage());\n        verify(myMessageProcessor, times(1)).process(any(MyMessage.class));\n    }}\n</code></pre>\n\n<p>My Test config class :</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    @Configuration\n    @EnableKafka\n    public class TestKafkaConfig {\n    @Bean\n    public MyMessageProcessor myMessageProcessor() {\n        return mock(MyMessageProcessor.class);\n    }\n    @Bean\n    public KafkaEmbedded kafkaEmbedded() {\n        return new KafkaEmbedded(1, true, 1, \"I1.Topic.json.001\");\n    }\n\n    //Consumer\n    @Bean\n    public ConsumerFactory&lt;String, MyMessage&gt; myMessageConsumerFactory() {\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\n        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaEmbedded().getBrokersAsString());\n        props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, false);\n        props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, \"earliest\");\n        return new DefaultKafkaConsumerFactory&lt;&gt;(props, new StringDeserializer(), new JsonDeserializer&lt;&gt;(MyMessage.class));\n    }\n    @Bean\n    public ConcurrentKafkaListenerContainerFactory&lt;String, MyMessage&gt; myMessageListenerContainerFactory() {\n        ConcurrentKafkaListenerContainerFactory&lt;String, MyMessage&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n        factory.setConsumerFactory(myMessageConsumerFactory());\n        return factory;\n    }\n\n    //Producer\n    @Bean\n    public ProducerFactory&lt;String, MyMessage&gt; producerFactory() {\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\n        props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaEmbedded().getBrokersAsString());\n        props.put(ProducerConfig.RETRIES_CONFIG, 0);\n        props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\n        props.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, KafkaMessageSerializer.class);\n        return new DefaultKafkaProducerFactory&lt;&gt;(props);\n    }\n    @Bean\n    public KafkaTemplate&lt;String, MyMessage&gt; messageProducer() {\n        return new KafkaTemplate&lt;&gt;(producerFactory());\n    }\n    }\n\n</code></pre>\n\n<p>Is there any simple way to make this work ?</p>\n\n<p>Or should I do the testing of @KafkaListener in some other way ? In unit test, how do I ensure @KafkaListener is invoked when a new message is arrived in Kafka.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1676654673,"creation_date":1676654314,"answer_id":75487381,"question_id":75487327,"body_markdown":"The documentation for the method you&#39;re calling ([`Duration.between(Temporal, Temporal)`](https://docs.oracle.com/javase/10/docs/api/java/time/Duration.html#between(java.time.temporal.Temporal,java.time.temporal.Temporal))) states:\r\n\r\n&gt; The specified temporal objects must support the `SECONDS` unit. For full accuracy, either the `NANOS` unit or the `NANO_OF_SECOND` field should be supported.\r\n\r\nBut [`LocalDate.isSupported`](https://docs.oracle.com/javase/10/docs/api/java/time/LocalDate.html#isSupported(java.time.temporal.TemporalUnit)) is documented with:\r\n\r\n&gt; If the unit is a ChronoUnit then the query is implemented here. The supported units are: DAYS, WEEKS, MONTHS, YEARS, DECADES, CENTURIES, MILLENNIA, ERAS\r\n&gt;\r\n&gt; All other ChronoUnit instances will return false.\r\n\r\nSo no, `LocalDate` doesn&#39;t support seconds, which is required for the method you&#39;re calling.\r\n\r\nIt may be worth considering that a `Duration` is intended to be an *elapsed* time - a fixed number of seconds etc. The elapsed time between two dates may depend on the time zone involved - because a day doesn&#39;t always have 24 hours when there are time zones involved.\r\n\r\nIf you&#39;re happy *assuming* a 24-hour day, you could use `Duration.ofDays(DAYS.between(firstDate, secondDate))`.","title":"java.time.temporal.UnsupportedTemporalTypeException: Unsupported unit: Seconds","body":"<p>The documentation for the method you're calling (<a href=\"https://docs.oracle.com/javase/10/docs/api/java/time/Duration.html#between(java.time.temporal.Temporal,java.time.temporal.Temporal)\" rel=\"nofollow noreferrer\"><code>Duration.between(Temporal, Temporal)</code></a>) states:</p>\n<blockquote>\n<p>The specified temporal objects must support the <code>SECONDS</code> unit. For full accuracy, either the <code>NANOS</code> unit or the <code>NANO_OF_SECOND</code> field should be supported.</p>\n</blockquote>\n<p>But <a href=\"https://docs.oracle.com/javase/10/docs/api/java/time/LocalDate.html#isSupported(java.time.temporal.TemporalUnit)\" rel=\"nofollow noreferrer\"><code>LocalDate.isSupported</code></a> is documented with:</p>\n<blockquote>\n<p>If the unit is a ChronoUnit then the query is implemented here. The supported units are: DAYS, WEEKS, MONTHS, YEARS, DECADES, CENTURIES, MILLENNIA, ERAS</p>\n<p>All other ChronoUnit instances will return false.</p>\n</blockquote>\n<p>So no, <code>LocalDate</code> doesn't support seconds, which is required for the method you're calling.</p>\n<p>It may be worth considering that a <code>Duration</code> is intended to be an <em>elapsed</em> time - a fixed number of seconds etc. The elapsed time between two dates may depend on the time zone involved - because a day doesn't always have 24 hours when there are time zones involved.</p>\n<p>If you're happy <em>assuming</em> a 24-hour day, you could use <code>Duration.ofDays(DAYS.between(firstDate, secondDate))</code>.</p>\n"},{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1676655260,"creation_date":1676655260,"answer_id":75487518,"question_id":75487327,"body_markdown":"You specify your dates with time information. That makes `LocalDate` a suboptimal choice. `LocalDateTime` is a better option. That already lets you create a duration.\r\n\r\nResults may be off because of DST. Adding the right time zone should solve that:\r\n```\r\nZoneId zone = ZoneId.systemDefault(); // or an explicit one\r\nZonedDateTime firstDateTime = LocalDateTime.parse(dateStart, formatter).atZone(zone);\r\nZonedDateTime secondDateTime = LocalDateTime.parse(dateStop, formatter).atZone(zone);\r\nDuration d1 = Duration.between(firstDateTime, secondDateTime);\r\nlong min = d1.toMinutes();\r\n```\r\n","title":"java.time.temporal.UnsupportedTemporalTypeException: Unsupported unit: Seconds","body":"<p>You specify your dates with time information. That makes <code>LocalDate</code> a suboptimal choice. <code>LocalDateTime</code> is a better option. That already lets you create a duration.</p>\n<p>Results may be off because of DST. Adding the right time zone should solve that:</p>\n<pre><code>ZoneId zone = ZoneId.systemDefault(); // or an explicit one\nZonedDateTime firstDateTime = LocalDateTime.parse(dateStart, formatter).atZone(zone);\nZonedDateTime secondDateTime = LocalDateTime.parse(dateStop, formatter).atZone(zone);\nDuration d1 = Duration.between(firstDateTime, secondDateTime);\nlong min = d1.toMinutes();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676659907,"creation_date":1676659907,"answer_id":75488262,"question_id":75487327,"body_markdown":"For differences between *dates,* `Period` is a better representation.\r\n\r\nBecause your format string contains time, however, it looks like you want to be parsing to `LocalDateTime` instead of `LocalDate`. This way, the minutes (and seconds) you care about are not discarded:\r\n\r\n```java\r\nprivate static final DateTimeFormatter parser = \r\n    DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n\r\npublic long datetimeDiffInMinutes(String dateStop, String dateStart) {\r\n    LocalDateTime firstDate = parser.parse(dateStart, LocalDateTime::from);\r\n    LocalDateTime secondDate = parser.parse(dateStop, LocalDateTime::from);\r\n    return firstDate.until(secondDate, ChronoUnit.MINUTES);\r\n}\r\n```\r\n\r\nNote that because you don&#39;t have information about the time zone and any daylight-saving transitions that may occur, the results might not match what people expect in every case. You should clarify the use case, and get more information about the zone if necessary.","title":"java.time.temporal.UnsupportedTemporalTypeException: Unsupported unit: Seconds","body":"<p>For differences between <em>dates,</em> <code>Period</code> is a better representation.</p>\n<p>Because your format string contains time, however, it looks like you want to be parsing to <code>LocalDateTime</code> instead of <code>LocalDate</code>. This way, the minutes (and seconds) you care about are not discarded:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final DateTimeFormatter parser = \n    DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n\npublic long datetimeDiffInMinutes(String dateStop, String dateStart) {\n    LocalDateTime firstDate = parser.parse(dateStart, LocalDateTime::from);\n    LocalDateTime secondDate = parser.parse(dateStop, LocalDateTime::from);\n    return firstDate.until(secondDate, ChronoUnit.MINUTES);\n}\n</code></pre>\n<p>Note that because you don't have information about the time zone and any daylight-saving transitions that may occur, the results might not match what people expect in every case. You should clarify the use case, and get more information about the zone if necessary.</p>\n"}],"owner":{"account_id":8872127,"reputation":173,"user_id":6625547,"display_name":"user6625547"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2987,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1676659907,"creation_date":1676653980,"question_id":75487327,"body_markdown":"i like to get the duration between to datetime values in minutes. \r\n\r\n    public long datetimeDiffInMinutes(String dateStop, String dateStart) {\r\n    \t\tDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n            LocalDate firstDate = LocalDate.parse(dateStart, formatter);\r\n            LocalDate secondDate = LocalDate.parse(dateStop, formatter);\r\n            Duration d1 = Duration.between(firstDate, secondDate);\r\n            long min = d1.toMinutes();\r\n            \r\n            return min;\r\n    \t}\r\n\r\nThere will be thrown an exception: java.time.temporal.UnsupportedTemporalTypeException: Unsupported unit: Seconds\r\n\r\nBut i dont use &quot;Seconds&quot; in this function. This line throws the exception: Duration d1 = Duration.between(firstDate, secondDate);","title":"java.time.temporal.UnsupportedTemporalTypeException: Unsupported unit: Seconds","body":"<p>i like to get the duration between to datetime values in minutes.</p>\n<pre><code>public long datetimeDiffInMinutes(String dateStop, String dateStart) {\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n        LocalDate firstDate = LocalDate.parse(dateStart, formatter);\n        LocalDate secondDate = LocalDate.parse(dateStop, formatter);\n        Duration d1 = Duration.between(firstDate, secondDate);\n        long min = d1.toMinutes();\n        \n        return min;\n    }\n</code></pre>\n<p>There will be thrown an exception: java.time.temporal.UnsupportedTemporalTypeException: Unsupported unit: Seconds</p>\n<p>But i dont use &quot;Seconds&quot; in this function. This line throws the exception: Duration d1 = Duration.between(firstDate, secondDate);</p>\n"},{"tags":["java","amazon-web-services"],"answers":[{"tags":[],"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1676659842,"creation_date":1676650018,"answer_id":75486645,"question_id":75486547,"body_markdown":"I am working on this use case now. To get a very similiar example working, I created a user pool with an App that lets me use these Authentication flows. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nWhen I execute my  AWS SDK for Java V2 code that uses **identityProviderClient.adminInitiateAuth()** - I successfully get an Access Token - as shown here.  \r\n\r\n[![enter image description here][2]][2]\r\n\r\nWHen i speicfy an incorrect password, I get exception as expected. \r\n\r\nHere is a Java code example. To run this Java code example, create a new user in the specified user pool with a temporary password. You will get back a challenge type value of NEW_PASSWORD_REQUIRED in the response. \r\n\r\nYou cannot read the access token. This code then changes the temporary password to a permanent password. Now the user can log in with the permanent password and you can read the access token.\r\n  \r\n \r\n\r\n    public class GetAccessToken {\r\n    \r\n        public static void main(String[]args) {\r\n            final String usage = &quot;\\n&quot; +\r\n                &quot;Usage:\\n&quot; +\r\n                &quot;    &lt;clientId&gt; &lt;poolId&gt; &lt;username&gt; &lt;tempPassword&gt; &lt;permanentPassword&gt;\\n\\n&quot; +\r\n                &quot;Where:\\n&quot; +\r\n                &quot;    clientId - The app client Id value that you can get from the AWS CDK script.\\n\\n&quot; +\r\n                &quot;    poolId - The pool Id that has the user. \\n\\n&quot; +\r\n                &quot;    username - The new user name with a temp password. \\n\\n&quot; +\r\n                &quot;    tempPassword - The temp password. \\n\\n&quot; +\r\n                &quot;    permanentPassword - The permanent password. \\n\\n&quot; ;\r\n    \r\n            if (args.length != 5) {\r\n                System.out.println(usage);\r\n                System.exit(1);\r\n            }\r\n            \r\n            String clientId = args[0];\r\n            String poolId = args[1];\r\n            String username = args[2];\r\n            String tempPassword = args[3];\r\n            String permanentPassword = args[4];\r\n    \r\n            CognitoIdentityProviderClient identityProviderClient = CognitoIdentityProviderClient.builder()\r\n                .region(Region.US_EAST_1)\r\n                .credentialsProvider(ProfileCredentialsProvider.create())\r\n                .build();\r\n    \r\n            boolean wasLoggedIn = getToken(identityProviderClient, clientId, username, tempPassword, poolId);\r\n            if (wasLoggedIn)\r\n                System.out.println(username +&quot; successfully authenticated&quot;);\r\n            else {\r\n                // Change the temp password to a permanent one and then call getToken() again. Now you will\r\n                // get access tokens.\r\n                changeTempPassword(identityProviderClient, username, permanentPassword, poolId);\r\n                getToken(identityProviderClient, clientId, username, permanentPassword, poolId);\r\n                System.out.println(username +&quot; successfully authenticated&quot;);\r\n            }\r\n        }\r\n    \r\n        public static boolean getToken(CognitoIdentityProviderClient identityProviderClient, String clientId, String username, String password, String poolId) {\r\n            final Map&lt;String, String&gt; authParams = new HashMap&lt;&gt;();\r\n            authParams.put(&quot;USERNAME&quot;, username);\r\n            authParams.put(&quot;PASSWORD&quot;, password);\r\n    \r\n            AdminInitiateAuthRequest authRequest = AdminInitiateAuthRequest.builder()\r\n                .clientId(clientId)\r\n                .userPoolId(poolId)\r\n                .authParameters(authParams)\r\n                .authFlow(AuthFlowType.ADMIN_USER_PASSWORD_AUTH)\r\n                .build();\r\n    \r\n            try {\r\n                // If you specify an incorrect username/password, an exception is thrown.\r\n                AdminInitiateAuthResponse response = identityProviderClient.adminInitiateAuth(authRequest);\r\n    \r\n                // Get the Challenge type\r\n                if (response.challengeNameAsString() == null) {\r\n                    System.out.println(&quot;Access Token Type : &quot; + response.authenticationResult().tokenType());\r\n                    System.out.println(&quot;Access Token : &quot; + response.authenticationResult().accessToken());\r\n                    return true;\r\n                } else if (response.challengeNameAsString().compareTo(&quot;NEW_PASSWORD_REQUIRED&quot;) == 0) {\r\n                    System.out.println(&quot;The User must change their password. &quot;);\r\n                }\r\n    \r\n            } catch(CognitoIdentityProviderException e) {\r\n                System.err.println(e.awsErrorDetails().errorMessage());\r\n                System.exit(1);\r\n            }\r\n            return false;\r\n        }\r\n    \r\n        public static void changeTempPassword(CognitoIdentityProviderClient identityProviderClient, String username, String newPassword, String poolId){\r\n            try {\r\n                AdminSetUserPasswordRequest passwordRequest = AdminSetUserPasswordRequest.builder()\r\n                    .username(username)\r\n                    .userPoolId(poolId)\r\n                    .password(newPassword)\r\n                    .permanent(true)\r\n                    .build();\r\n    \r\n                identityProviderClient.adminSetUserPassword(passwordRequest);\r\n                System.out.println(&quot;The password was successfully changed&quot;);\r\n    \r\n            } catch(CognitoIdentityProviderException e) {\r\n                System.err.println(e.awsErrorDetails().errorMessage());\r\n                System.exit(1);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n***SO the reason why you get this NULL Exception is because you need to set the permanent password for the user. If the challengeName=NEW_PASSWORD_REQUIRED, you cannot read the access token.*** \r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/E1xso.png\r\n  [2]: https://i.stack.imgur.com/zrfxr.png\r\n  [3]: https://i.stack.imgur.com/4zmne.png","title":"AWS Cognito, why InititiateAuthResponse is null?","body":"<p>I am working on this use case now. To get a very similiar example working, I created a user pool with an App that lets me use these Authentication flows.</p>\n<p><a href=\"https://i.stack.imgur.com/E1xso.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/E1xso.png\" alt=\"enter image description here\" /></a></p>\n<p>When I execute my  AWS SDK for Java V2 code that uses <strong>identityProviderClient.adminInitiateAuth()</strong> - I successfully get an Access Token - as shown here.</p>\n<p><a href=\"https://i.stack.imgur.com/zrfxr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zrfxr.png\" alt=\"enter image description here\" /></a></p>\n<p>WHen i speicfy an incorrect password, I get exception as expected.</p>\n<p>Here is a Java code example. To run this Java code example, create a new user in the specified user pool with a temporary password. You will get back a challenge type value of NEW_PASSWORD_REQUIRED in the response.</p>\n<p>You cannot read the access token. This code then changes the temporary password to a permanent password. Now the user can log in with the permanent password and you can read the access token.</p>\n<pre><code>public class GetAccessToken {\n\n    public static void main(String[]args) {\n        final String usage = &quot;\\n&quot; +\n            &quot;Usage:\\n&quot; +\n            &quot;    &lt;clientId&gt; &lt;poolId&gt; &lt;username&gt; &lt;tempPassword&gt; &lt;permanentPassword&gt;\\n\\n&quot; +\n            &quot;Where:\\n&quot; +\n            &quot;    clientId - The app client Id value that you can get from the AWS CDK script.\\n\\n&quot; +\n            &quot;    poolId - The pool Id that has the user. \\n\\n&quot; +\n            &quot;    username - The new user name with a temp password. \\n\\n&quot; +\n            &quot;    tempPassword - The temp password. \\n\\n&quot; +\n            &quot;    permanentPassword - The permanent password. \\n\\n&quot; ;\n\n        if (args.length != 5) {\n            System.out.println(usage);\n            System.exit(1);\n        }\n        \n        String clientId = args[0];\n        String poolId = args[1];\n        String username = args[2];\n        String tempPassword = args[3];\n        String permanentPassword = args[4];\n\n        CognitoIdentityProviderClient identityProviderClient = CognitoIdentityProviderClient.builder()\n            .region(Region.US_EAST_1)\n            .credentialsProvider(ProfileCredentialsProvider.create())\n            .build();\n\n        boolean wasLoggedIn = getToken(identityProviderClient, clientId, username, tempPassword, poolId);\n        if (wasLoggedIn)\n            System.out.println(username +&quot; successfully authenticated&quot;);\n        else {\n            // Change the temp password to a permanent one and then call getToken() again. Now you will\n            // get access tokens.\n            changeTempPassword(identityProviderClient, username, permanentPassword, poolId);\n            getToken(identityProviderClient, clientId, username, permanentPassword, poolId);\n            System.out.println(username +&quot; successfully authenticated&quot;);\n        }\n    }\n\n    public static boolean getToken(CognitoIdentityProviderClient identityProviderClient, String clientId, String username, String password, String poolId) {\n        final Map&lt;String, String&gt; authParams = new HashMap&lt;&gt;();\n        authParams.put(&quot;USERNAME&quot;, username);\n        authParams.put(&quot;PASSWORD&quot;, password);\n\n        AdminInitiateAuthRequest authRequest = AdminInitiateAuthRequest.builder()\n            .clientId(clientId)\n            .userPoolId(poolId)\n            .authParameters(authParams)\n            .authFlow(AuthFlowType.ADMIN_USER_PASSWORD_AUTH)\n            .build();\n\n        try {\n            // If you specify an incorrect username/password, an exception is thrown.\n            AdminInitiateAuthResponse response = identityProviderClient.adminInitiateAuth(authRequest);\n\n            // Get the Challenge type\n            if (response.challengeNameAsString() == null) {\n                System.out.println(&quot;Access Token Type : &quot; + response.authenticationResult().tokenType());\n                System.out.println(&quot;Access Token : &quot; + response.authenticationResult().accessToken());\n                return true;\n            } else if (response.challengeNameAsString().compareTo(&quot;NEW_PASSWORD_REQUIRED&quot;) == 0) {\n                System.out.println(&quot;The User must change their password. &quot;);\n            }\n\n        } catch(CognitoIdentityProviderException e) {\n            System.err.println(e.awsErrorDetails().errorMessage());\n            System.exit(1);\n        }\n        return false;\n    }\n\n    public static void changeTempPassword(CognitoIdentityProviderClient identityProviderClient, String username, String newPassword, String poolId){\n        try {\n            AdminSetUserPasswordRequest passwordRequest = AdminSetUserPasswordRequest.builder()\n                .username(username)\n                .userPoolId(poolId)\n                .password(newPassword)\n                .permanent(true)\n                .build();\n\n            identityProviderClient.adminSetUserPassword(passwordRequest);\n            System.out.println(&quot;The password was successfully changed&quot;);\n\n        } catch(CognitoIdentityProviderException e) {\n            System.err.println(e.awsErrorDetails().errorMessage());\n            System.exit(1);\n        }\n    }\n}\n</code></pre>\n<p><em><strong>SO the reason why you get this NULL Exception is because you need to set the permanent password for the user. If the challengeName=NEW_PASSWORD_REQUIRED, you cannot read the access token.</strong></em></p>\n"}],"owner":{"account_id":26380586,"reputation":109,"user_id":20033905,"display_name":"Ric97"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":540,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75486645,"answer_count":1,"score":1,"last_activity_date":1676659842,"creation_date":1676649425,"question_id":75486547,"body_markdown":"i&#39;m developing for the first time using AWS Cognito in Java.\r\n\r\nI created a code for an Admin to create a User. The user will be automatically created with the status FORCE_CHANGE_PASSWORD. What i was going to do now is a simple login, but if the system return a CHANGE_PASSWORD challenge, then it will open another window where the user should input old password and new password, then submit them to cognito.\r\n\r\nThe code i used to create a user through AdminCreateUser is the following:\r\n\r\n```\r\n // Creating instance of client CognitoIdentityProvider\r\n        CognitoIdentityProviderClient cognitoClient = CognitoIdentityProviderClient.builder().region(Region.EU_CENTRAL_1).build();\r\n\r\n        AdminCreateUserRequest requestUserCreation = AdminCreateUserRequest.builder()\r\n                .username(usernameTextField.getText())\r\n                .desiredDeliveryMediums(DeliveryMediumType.EMAIL)\r\n                .userAttributes(AttributeType.builder()\r\n                        .name(&quot;email&quot;)\r\n                        .value(emailTextField.getText())\r\n                        .build())\r\n                .userPoolId(&quot;xxxxx&quot;)\r\n                .build();\r\n\r\n        // Sending sign up request\r\n        AdminCreateUserResponse responseUserCreation = cognitoClient.adminCreateUser(requestUserCreation);\r\n\r\n        // Saving the group we want to put the user in through a combobox\r\n        String groupname = (String) groupComboBox.getValue();\r\n\r\n        UserType newUser = responseUserCreation.user();\r\n        GroupType group = GroupType.builder().groupName(groupname).build();\r\n\r\n        AdminAddUserToGroupRequest addUserToGroupRequest = AdminAddUserToGroupRequest.builder()\r\n                .userPoolId(&quot;xxxxx&quot;)\r\n                .username(newUser.username())\r\n                .groupName(groupname)\r\n                .build();\r\n\r\n        AdminAddUserToGroupResponse addUserToGroupResult = cognitoClient.adminAddUserToGroup(addUserToGroupRequest);\r\n```\r\n\r\nThis code works. When i submit this through a button, an email arrives to the user i created, and it also shows in my Amazon Cognito console.\r\n\r\nNow the login part is giving me trouble.\r\n\r\nAs i said, i want to open another windows which has the right form for resetting the password. I still haven&#39;t thought about the implementation for resetting the password because my login doesnt&#39; work, so i will implement this later.\r\n\r\nThis is my login code:\r\n```\r\npublic void Login(ActionEvent event) {\r\n\r\n            final String CLIENT_ID = cs.getAppClientId();\r\n            final String USER_NAME = userNameTextField.getText();\r\n            final String PASSWORD = passwordTextField.getText();\r\n            final Region region = cs.getRegion();\r\n\r\n            CognitoIdentityProviderClient cognitoClient = CognitoIdentityProviderClient.builder()\r\n                    .credentialsProvider(DefaultCredentialsProvider.create())\r\n                    .region(region)\r\n                    .build();\r\n\r\n\r\n            InitiateAuthRequest authRequest = InitiateAuthRequest.builder()\r\n                    .clientId(CLIENT_ID)\r\n                    .authFlow(&quot;USER_PASSWORD_AUTH&quot;)\r\n                    .authParameters(createAuthParameters(USER_NAME, PASSWORD))\r\n                    .build();\r\n\r\n            try {\r\n                InitiateAuthResponse authResult = cognitoClient.initiateAuth(authRequest);\r\n\r\n                if (authResult.challengeName() != null) {\r\n                    if (authResult.challengeName().equals(ChallengeNameType.NEW_PASSWORD_REQUIRED.toString())) {\r\n                        try {\r\n                            reimpostaPassword.apriSchermataReimpostaPassword(event);\r\n                        } catch (IOException e) {\r\n                            throw new RuntimeException(e);\r\n                        }\r\n                    } else {\r\n                        // The authentication was successful\r\n                        AuthenticationResultType authenticationResult = authResult.authenticationResult();\r\n                        System.out.println(&quot;Access token: &quot; + authenticationResult.accessToken());\r\n                    }\r\n                }\r\n            } catch (NotAuthorizedException e) {\r\n                System.out.println(&quot;Incorrect username or password&quot;);\r\n            } catch (PasswordResetRequiredException e) {\r\n                System.out.println(&quot;Password reset is required for the user&quot;);\r\n            }\r\n\r\n```\r\n\r\nWhen i fill my form with the right username and password, it gives me this error:\r\n```\r\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;software.amazon.awssdk.services.cognitoidentityprovider.model.AuthenticationResultType.accessToken()&quot; because &quot;authenticationResult&quot; is null\r\n\tat com.example.ratatouille23/com.example.ratatouille23.Login.LoginController.Login(LoginController.java:101)\r\n\tat com.example.ratatouille23/com.example.ratatouille23.Login.LoginController.clickPulsanteLogin(LoginController.java:66)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n\t... 51 more\r\n``` \r\n\r\nThe line that gives me error is this:\r\n```\r\nSystem.out.println(&quot;Access token: &quot; + authenticationResult.accessToken());\r\n```\r\n\r\nThis is an odd behaviour, because this means that the &#39;if the challenge is new password required&#39; control fails, so i&#39;m a little stuck here.\r\n\r\nAny help?\r\n","title":"AWS Cognito, why InititiateAuthResponse is null?","body":"<p>i'm developing for the first time using AWS Cognito in Java.</p>\n<p>I created a code for an Admin to create a User. The user will be automatically created with the status FORCE_CHANGE_PASSWORD. What i was going to do now is a simple login, but if the system return a CHANGE_PASSWORD challenge, then it will open another window where the user should input old password and new password, then submit them to cognito.</p>\n<p>The code i used to create a user through AdminCreateUser is the following:</p>\n<pre><code> // Creating instance of client CognitoIdentityProvider\n        CognitoIdentityProviderClient cognitoClient = CognitoIdentityProviderClient.builder().region(Region.EU_CENTRAL_1).build();\n\n        AdminCreateUserRequest requestUserCreation = AdminCreateUserRequest.builder()\n                .username(usernameTextField.getText())\n                .desiredDeliveryMediums(DeliveryMediumType.EMAIL)\n                .userAttributes(AttributeType.builder()\n                        .name(&quot;email&quot;)\n                        .value(emailTextField.getText())\n                        .build())\n                .userPoolId(&quot;xxxxx&quot;)\n                .build();\n\n        // Sending sign up request\n        AdminCreateUserResponse responseUserCreation = cognitoClient.adminCreateUser(requestUserCreation);\n\n        // Saving the group we want to put the user in through a combobox\n        String groupname = (String) groupComboBox.getValue();\n\n        UserType newUser = responseUserCreation.user();\n        GroupType group = GroupType.builder().groupName(groupname).build();\n\n        AdminAddUserToGroupRequest addUserToGroupRequest = AdminAddUserToGroupRequest.builder()\n                .userPoolId(&quot;xxxxx&quot;)\n                .username(newUser.username())\n                .groupName(groupname)\n                .build();\n\n        AdminAddUserToGroupResponse addUserToGroupResult = cognitoClient.adminAddUserToGroup(addUserToGroupRequest);\n</code></pre>\n<p>This code works. When i submit this through a button, an email arrives to the user i created, and it also shows in my Amazon Cognito console.</p>\n<p>Now the login part is giving me trouble.</p>\n<p>As i said, i want to open another windows which has the right form for resetting the password. I still haven't thought about the implementation for resetting the password because my login doesnt' work, so i will implement this later.</p>\n<p>This is my login code:</p>\n<pre><code>public void Login(ActionEvent event) {\n\n            final String CLIENT_ID = cs.getAppClientId();\n            final String USER_NAME = userNameTextField.getText();\n            final String PASSWORD = passwordTextField.getText();\n            final Region region = cs.getRegion();\n\n            CognitoIdentityProviderClient cognitoClient = CognitoIdentityProviderClient.builder()\n                    .credentialsProvider(DefaultCredentialsProvider.create())\n                    .region(region)\n                    .build();\n\n\n            InitiateAuthRequest authRequest = InitiateAuthRequest.builder()\n                    .clientId(CLIENT_ID)\n                    .authFlow(&quot;USER_PASSWORD_AUTH&quot;)\n                    .authParameters(createAuthParameters(USER_NAME, PASSWORD))\n                    .build();\n\n            try {\n                InitiateAuthResponse authResult = cognitoClient.initiateAuth(authRequest);\n\n                if (authResult.challengeName() != null) {\n                    if (authResult.challengeName().equals(ChallengeNameType.NEW_PASSWORD_REQUIRED.toString())) {\n                        try {\n                            reimpostaPassword.apriSchermataReimpostaPassword(event);\n                        } catch (IOException e) {\n                            throw new RuntimeException(e);\n                        }\n                    } else {\n                        // The authentication was successful\n                        AuthenticationResultType authenticationResult = authResult.authenticationResult();\n                        System.out.println(&quot;Access token: &quot; + authenticationResult.accessToken());\n                    }\n                }\n            } catch (NotAuthorizedException e) {\n                System.out.println(&quot;Incorrect username or password&quot;);\n            } catch (PasswordResetRequiredException e) {\n                System.out.println(&quot;Password reset is required for the user&quot;);\n            }\n\n</code></pre>\n<p>When i fill my form with the right username and password, it gives me this error:</p>\n<pre><code>Caused by: java.lang.NullPointerException: Cannot invoke &quot;software.amazon.awssdk.services.cognitoidentityprovider.model.AuthenticationResultType.accessToken()&quot; because &quot;authenticationResult&quot; is null\n    at com.example.ratatouille23/com.example.ratatouille23.Login.LoginController.Login(LoginController.java:101)\n    at com.example.ratatouille23/com.example.ratatouille23.Login.LoginController.clickPulsanteLogin(LoginController.java:66)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n    ... 51 more\n</code></pre>\n<p>The line that gives me error is this:</p>\n<pre><code>System.out.println(&quot;Access token: &quot; + authenticationResult.accessToken());\n</code></pre>\n<p>This is an odd behaviour, because this means that the 'if the challenge is new password required' control fails, so i'm a little stuck here.</p>\n<p>Any help?</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":12714208,"reputation":49,"user_id":9236852,"display_name":"hani"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637439148,"creation_date":1637400608,"answer_id":70044718,"question_id":70044037,"body_markdown":"First you must create `DedupeDetail` class:\r\n\r\n```java\r\npublic class DedupeDetail {\r\n\r\n    String CustomerType;\r\n    String CustomerName;\r\n    String DedupeFound;\r\n\r\n    public DedupeDetail(String customerType, String customerName, String dedupeFound) {\r\n        CustomerType = customerType;\r\n        CustomerName = customerName;\r\n        DedupeFound = dedupeFound;\r\n    }\r\n}\r\n```\r\n\r\nThen create `DedupeResultFinal` with converter:\r\n\r\n```java\r\npublic class DedupeResultFinal {\r\n\r\n    String ID;\r\n    String CustomerName;\r\n    String BranchName;\r\n    String SchemeName;\r\n    String MobileNumber;\r\n    List&lt;DedupeDetail&gt; DedupeDetails;\r\n\r\n    public DedupeResultFinal() {\r\n    }\r\n\r\n    public DedupeResultFinal(List&lt;DedupeDetail&gt; dedupeDetails) {\r\n        DedupeDetails = dedupeDetails;\r\n    }// ... other constructor and getter and setter\r\n\r\n    public static DedupeResultFinal convertToFinal(HashMap&lt;String, String&gt; dedupeRes){\r\n        DedupeResultFinal dedupeResultFinal = new DedupeResultFinal();\r\n\r\n        dedupeResultFinal.setBranchName(dedupeRes.get(&quot;BranchName&quot;));\r\n        dedupeResultFinal.setCustomerName(dedupeRes.get(&quot;CustomerName&quot;));\r\n        dedupeResultFinal.setID(dedupeRes.get(&quot;ID&quot;));\r\n        dedupeResultFinal.setMobileNumber(dedupeRes.get(&quot;MobileNumber&quot;));\r\n        dedupeResultFinal.setSchemeName(dedupeRes.get(&quot;SchemeName&quot;));\r\n\r\n        return dedupeResultFinal;\r\n\r\n    }\r\n}\r\n```\r\n\r\nAnd then your method must be like this:\r\n\r\n```java\r\n   public static void main(String[] args) {\r\n        try {\r\n\r\n            String responseString = {Input mentioned in post};\r\n            ObjectMapper mapper = new ObjectMapper();\r\n            mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n            List&lt;HashMap&lt;String, String&gt;&gt; dedupe = mapper.readValue(responseString, new ArrayList&lt;String&gt;().getClass());\r\n            Map&lt;String, DedupeResultFinal&gt; map = new HashMap&lt;&gt;();\r\n\r\n            for (HashMap&lt;String, String&gt; dedupeRes : dedupe) {\r\n                if (map.get(dedupeRes.get(&quot;ID&quot;)) != null){\r\n                    DedupeDetail dedupeDetail = new DedupeDetail(dedupeRes.get(&quot;CustomerType&quot;), dedupeRes.get(&quot;CustomerName&quot;), dedupeRes.get(&quot;DedupeFound&quot;));\r\n                    map.get(dedupeRes.get(&quot;ID&quot;)).getDedupeDetails().add(dedupeDetail);\r\n                }else {\r\n                    DedupeDetail dedupeDetail =  new DedupeDetail(dedupeRes.get(&quot;CustomerType&quot;), dedupeRes.get(&quot;CustomerName&quot;), dedupeRes.get(&quot;DedupeFound&quot;));\r\n                    DedupeResultFinal dedupeResultFinal = DedupeResultFinal.convertToFinal(dedupeRes);\r\n                    List&lt;DedupeDetail&gt; dedupeDetails = new ArrayList&lt;&gt;();\r\n                    dedupeDetails.add(dedupeDetail);\r\n                    dedupeResultFinal.setDedupeDetails(dedupeDetails);\r\n\r\n                    map.put(dedupeRes.get(&quot;ID&quot;), dedupeResultFinal);\r\n                }\r\n            }\r\n\r\n           List&lt;DedupeResultFinal&gt; finalDedup = map.values().stream().collect(Collectors.toList());\r\n\r\n            System.out.println(finalDedup);\r\n        }\r\n        catch(Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```","title":"Grouping by Unique ID for JSON Array","body":"<p>First you must create <code>DedupeDetail</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DedupeDetail {\n\n    String CustomerType;\n    String CustomerName;\n    String DedupeFound;\n\n    public DedupeDetail(String customerType, String customerName, String dedupeFound) {\n        CustomerType = customerType;\n        CustomerName = customerName;\n        DedupeFound = dedupeFound;\n    }\n}\n</code></pre>\n<p>Then create <code>DedupeResultFinal</code> with converter:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DedupeResultFinal {\n\n    String ID;\n    String CustomerName;\n    String BranchName;\n    String SchemeName;\n    String MobileNumber;\n    List&lt;DedupeDetail&gt; DedupeDetails;\n\n    public DedupeResultFinal() {\n    }\n\n    public DedupeResultFinal(List&lt;DedupeDetail&gt; dedupeDetails) {\n        DedupeDetails = dedupeDetails;\n    }// ... other constructor and getter and setter\n\n    public static DedupeResultFinal convertToFinal(HashMap&lt;String, String&gt; dedupeRes){\n        DedupeResultFinal dedupeResultFinal = new DedupeResultFinal();\n\n        dedupeResultFinal.setBranchName(dedupeRes.get(&quot;BranchName&quot;));\n        dedupeResultFinal.setCustomerName(dedupeRes.get(&quot;CustomerName&quot;));\n        dedupeResultFinal.setID(dedupeRes.get(&quot;ID&quot;));\n        dedupeResultFinal.setMobileNumber(dedupeRes.get(&quot;MobileNumber&quot;));\n        dedupeResultFinal.setSchemeName(dedupeRes.get(&quot;SchemeName&quot;));\n\n        return dedupeResultFinal;\n\n    }\n}\n</code></pre>\n<p>And then your method must be like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>   public static void main(String[] args) {\n        try {\n\n            String responseString = {Input mentioned in post};\n            ObjectMapper mapper = new ObjectMapper();\n            mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n            List&lt;HashMap&lt;String, String&gt;&gt; dedupe = mapper.readValue(responseString, new ArrayList&lt;String&gt;().getClass());\n            Map&lt;String, DedupeResultFinal&gt; map = new HashMap&lt;&gt;();\n\n            for (HashMap&lt;String, String&gt; dedupeRes : dedupe) {\n                if (map.get(dedupeRes.get(&quot;ID&quot;)) != null){\n                    DedupeDetail dedupeDetail = new DedupeDetail(dedupeRes.get(&quot;CustomerType&quot;), dedupeRes.get(&quot;CustomerName&quot;), dedupeRes.get(&quot;DedupeFound&quot;));\n                    map.get(dedupeRes.get(&quot;ID&quot;)).getDedupeDetails().add(dedupeDetail);\n                }else {\n                    DedupeDetail dedupeDetail =  new DedupeDetail(dedupeRes.get(&quot;CustomerType&quot;), dedupeRes.get(&quot;CustomerName&quot;), dedupeRes.get(&quot;DedupeFound&quot;));\n                    DedupeResultFinal dedupeResultFinal = DedupeResultFinal.convertToFinal(dedupeRes);\n                    List&lt;DedupeDetail&gt; dedupeDetails = new ArrayList&lt;&gt;();\n                    dedupeDetails.add(dedupeDetail);\n                    dedupeResultFinal.setDedupeDetails(dedupeDetails);\n\n                    map.put(dedupeRes.get(&quot;ID&quot;), dedupeResultFinal);\n                }\n            }\n\n           List&lt;DedupeResultFinal&gt; finalDedup = map.values().stream().collect(Collectors.toList());\n\n            System.out.println(finalDedup);\n        }\n        catch(Exception e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23366081,"reputation":129,"user_id":17437705,"display_name":"rongfeiyue"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637400626,"creation_date":1637400626,"answer_id":70044721,"question_id":70044037,"body_markdown":"Complete code implementation, try it.\r\n```\r\npublic class T {\r\n\r\n    private static final ObjectMapper mapper = new ObjectMapper();\r\n\r\n    static {\r\n        mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n    }\r\n\r\n    public static &lt;T&gt; List&lt;T&gt; parseObjectList(String json, Class&lt;T&gt; clazz) {\r\n        try {\r\n            return mapper.readValue(\r\n                    json,\r\n                    TypeFactory.defaultInstance().constructParametricType(ArrayList.class, clazz)\r\n            );\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    public static &lt;T&gt; String toJsonString(T t) {\r\n        try {\r\n            return mapper.writeValueAsString(t);\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        try {\r\n            String responseString = &quot;[{\\&quot;ID\\&quot;:\\&quot;1234\\&quot;,\\&quot;CustomerName\\&quot;:\\&quot;KUMAR\\&quot;,\\&quot;BranchName\\&quot;:\\&quot;HARBOUR\\&quot;,\\&quot;SchemeName\\&quot;:\\&quot;GOLD\\&quot;,\\&quot;MobileNumber\\&quot;:\\&quot;123456789\\&quot;,\\&quot;CustomerType\\&quot;:\\&quot;PRIMARY\\&quot;,\\&quot;DedupeFound\\&quot;:\\&quot;NO\\&quot;},{\\&quot;ID\\&quot;:\\&quot;1234\\&quot;,\\&quot;CustomerName\\&quot;:\\&quot;SEAN\\&quot;,\\&quot;BranchName\\&quot;:\\&quot;HARBOUR\\&quot;,\\&quot;SchemeName\\&quot;:\\&quot;GOLD\\&quot;,\\&quot;MobileNumber\\&quot;:\\&quot;123456789\\&quot;,\\&quot;CustomerType\\&quot;:\\&quot;SECONDARY\\&quot;,\\&quot;DedupeFound\\&quot;:\\&quot;YES\\&quot;},{\\&quot;ID\\&quot;:\\&quot;5678\\&quot;,\\&quot;CustomerName\\&quot;:\\&quot;MARK\\&quot;,\\&quot;BranchName\\&quot;:\\&quot;CANTONMENT\\&quot;,\\&quot;SchemeName\\&quot;:\\&quot;DIAMOND\\&quot;,\\&quot;MobileNumber\\&quot;:\\&quot;123456789\\&quot;,\\&quot;CustomerType\\&quot;:\\&quot;PRIMARY\\&quot;,\\&quot;DedupeFound\\&quot;:\\&quot;NO\\&quot;},{\\&quot;ID\\&quot;:\\&quot;5678\\&quot;,\\&quot;CustomerName\\&quot;:\\&quot;STEVE\\&quot;,\\&quot;BranchName\\&quot;:\\&quot;CANTONMENT\\&quot;,\\&quot;SchemeName\\&quot;:\\&quot;DIAMOND\\&quot;,\\&quot;MobileNumber\\&quot;:\\&quot;123456789\\&quot;,\\&quot;CustomerType\\&quot;:\\&quot;SECONDARY\\&quot;,\\&quot;DedupeFound\\&quot;:\\&quot;YES\\&quot;}]&quot;;\r\n            List&lt;DedupeRes&gt; list = parseObjectList(responseString, DedupeRes.class);\r\n            if (list != null &amp;&amp; !list.isEmpty()) {\r\n                Map&lt;String, List&lt;DedupeRes&gt;&gt; map = list.stream().collect(Collectors.groupingBy(DedupeRes::getID));\r\n                List&lt;Res&gt; resList = new ArrayList&lt;&gt;();\r\n                map.forEach((k, v) -&gt; resList.add(listToRes(v)));\r\n                responseString = toJsonString(resList);\r\n                System.out.println(responseString);\r\n            }\r\n        } catch (Exception e) {\r\n            // xx\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private static Res listToRes(List&lt;DedupeRes&gt; list) {\r\n        Res res = new Res();\r\n        res.setDedupeDetails(new ArrayList&lt;&gt;());\r\n        for (DedupeRes dedupeRes : list) {\r\n            if (Objects.equals(&quot;PRIMARY&quot;, dedupeRes.getCustomerType())) {\r\n                // if you used spring -&gt; BeanUtils.copyProperties(dedupeRes, res);\r\n                res.setID(dedupeRes.getID());\r\n                res.setBranchName(dedupeRes.getBranchName());\r\n                res.setCustomerName(dedupeRes.getCustomerName());\r\n                res.setMobileNumber(dedupeRes.getMobileNumber());\r\n                res.setSchemeName(dedupeRes.getSchemeName());\r\n            }\r\n            DedupeDetails details = new DedupeDetails();\r\n            //\r\n            BeanUtils.copyProperties(dedupeRes, details);\r\n            res.getDedupeDetails().add(details);\r\n        }\r\n        return res;\r\n    }\r\n\r\n    @Data\r\n    private static class DedupeRes {\r\n        @JsonProperty(&quot;ID&quot;)\r\n        private String ID;\r\n        @JsonProperty(&quot;CustomerName&quot;)\r\n        private String CustomerName;\r\n        @JsonProperty(&quot;BranchName&quot;)\r\n        private String BranchName;\r\n        @JsonProperty(&quot;SchemeName&quot;)\r\n        private String SchemeName;\r\n        @JsonProperty(&quot;MobileNumber&quot;)\r\n        private String MobileNumber;\r\n        @JsonProperty(&quot;CustomerType&quot;)\r\n        private String CustomerType;\r\n        @JsonProperty(&quot;DedupeFound&quot;)\r\n        private String DedupeFound;\r\n    }\r\n\r\n    @Data\r\n    private static class Res {\r\n        @JsonProperty(&quot;ID&quot;)\r\n        private String ID;\r\n        @JsonProperty(&quot;CustomerName&quot;)\r\n        private String CustomerName;\r\n        @JsonProperty(&quot;BranchName&quot;)\r\n        private String BranchName;\r\n        @JsonProperty(&quot;SchemeName&quot;)\r\n        private String SchemeName;\r\n        @JsonProperty(&quot;MobileNumber&quot;)\r\n        private String MobileNumber;\r\n        @JsonProperty(&quot;dedupeDetails&quot;)\r\n        private List&lt;DedupeDetails&gt; dedupeDetails;\r\n    }\r\n\r\n    @Data\r\n    private static class DedupeDetails {\r\n        @JsonProperty(&quot;CustomerType&quot;)\r\n        private String CustomerType;\r\n        @JsonProperty(&quot;CustomerName&quot;)\r\n        private String CustomerName;\r\n        @JsonProperty(&quot;DedupeFound&quot;)\r\n        private String DedupeFound;\r\n    }\r\n}\r\n\r\n```\r\nconsule.\r\n```\r\n[{&quot;ID&quot;:&quot;1234&quot;,&quot;CustomerName&quot;:&quot;KUMAR&quot;,&quot;BranchName&quot;:&quot;HARBOUR&quot;,&quot;SchemeName&quot;:&quot;GOLD&quot;,&quot;MobileNumber&quot;:&quot;123456789&quot;,&quot;dedupeDetails&quot;:[{&quot;CustomerType&quot;:&quot;PRIMARY&quot;,&quot;CustomerName&quot;:&quot;KUMAR&quot;,&quot;DedupeFound&quot;:&quot;NO&quot;},{&quot;CustomerType&quot;:&quot;SECONDARY&quot;,&quot;CustomerName&quot;:&quot;SEAN&quot;,&quot;DedupeFound&quot;:&quot;YES&quot;}]},{&quot;ID&quot;:&quot;5678&quot;,&quot;CustomerName&quot;:&quot;MARK&quot;,&quot;BranchName&quot;:&quot;CANTONMENT&quot;,&quot;SchemeName&quot;:&quot;DIAMOND&quot;,&quot;MobileNumber&quot;:&quot;123456789&quot;,&quot;dedupeDetails&quot;:[{&quot;CustomerType&quot;:&quot;PRIMARY&quot;,&quot;CustomerName&quot;:&quot;MARK&quot;,&quot;DedupeFound&quot;:&quot;NO&quot;},{&quot;CustomerType&quot;:&quot;SECONDARY&quot;,&quot;CustomerName&quot;:&quot;STEVE&quot;,&quot;DedupeFound&quot;:&quot;YES&quot;}]}]\r\n```","title":"Grouping by Unique ID for JSON Array","body":"<p>Complete code implementation, try it.</p>\n<pre><code>public class T {\n\n    private static final ObjectMapper mapper = new ObjectMapper();\n\n    static {\n        mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n    }\n\n    public static &lt;T&gt; List&lt;T&gt; parseObjectList(String json, Class&lt;T&gt; clazz) {\n        try {\n            return mapper.readValue(\n                    json,\n                    TypeFactory.defaultInstance().constructParametricType(ArrayList.class, clazz)\n            );\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    public static &lt;T&gt; String toJsonString(T t) {\n        try {\n            return mapper.writeValueAsString(t);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    public static void main(String[] args) {\n        try {\n            String responseString = &quot;[{\\&quot;ID\\&quot;:\\&quot;1234\\&quot;,\\&quot;CustomerName\\&quot;:\\&quot;KUMAR\\&quot;,\\&quot;BranchName\\&quot;:\\&quot;HARBOUR\\&quot;,\\&quot;SchemeName\\&quot;:\\&quot;GOLD\\&quot;,\\&quot;MobileNumber\\&quot;:\\&quot;123456789\\&quot;,\\&quot;CustomerType\\&quot;:\\&quot;PRIMARY\\&quot;,\\&quot;DedupeFound\\&quot;:\\&quot;NO\\&quot;},{\\&quot;ID\\&quot;:\\&quot;1234\\&quot;,\\&quot;CustomerName\\&quot;:\\&quot;SEAN\\&quot;,\\&quot;BranchName\\&quot;:\\&quot;HARBOUR\\&quot;,\\&quot;SchemeName\\&quot;:\\&quot;GOLD\\&quot;,\\&quot;MobileNumber\\&quot;:\\&quot;123456789\\&quot;,\\&quot;CustomerType\\&quot;:\\&quot;SECONDARY\\&quot;,\\&quot;DedupeFound\\&quot;:\\&quot;YES\\&quot;},{\\&quot;ID\\&quot;:\\&quot;5678\\&quot;,\\&quot;CustomerName\\&quot;:\\&quot;MARK\\&quot;,\\&quot;BranchName\\&quot;:\\&quot;CANTONMENT\\&quot;,\\&quot;SchemeName\\&quot;:\\&quot;DIAMOND\\&quot;,\\&quot;MobileNumber\\&quot;:\\&quot;123456789\\&quot;,\\&quot;CustomerType\\&quot;:\\&quot;PRIMARY\\&quot;,\\&quot;DedupeFound\\&quot;:\\&quot;NO\\&quot;},{\\&quot;ID\\&quot;:\\&quot;5678\\&quot;,\\&quot;CustomerName\\&quot;:\\&quot;STEVE\\&quot;,\\&quot;BranchName\\&quot;:\\&quot;CANTONMENT\\&quot;,\\&quot;SchemeName\\&quot;:\\&quot;DIAMOND\\&quot;,\\&quot;MobileNumber\\&quot;:\\&quot;123456789\\&quot;,\\&quot;CustomerType\\&quot;:\\&quot;SECONDARY\\&quot;,\\&quot;DedupeFound\\&quot;:\\&quot;YES\\&quot;}]&quot;;\n            List&lt;DedupeRes&gt; list = parseObjectList(responseString, DedupeRes.class);\n            if (list != null &amp;&amp; !list.isEmpty()) {\n                Map&lt;String, List&lt;DedupeRes&gt;&gt; map = list.stream().collect(Collectors.groupingBy(DedupeRes::getID));\n                List&lt;Res&gt; resList = new ArrayList&lt;&gt;();\n                map.forEach((k, v) -&gt; resList.add(listToRes(v)));\n                responseString = toJsonString(resList);\n                System.out.println(responseString);\n            }\n        } catch (Exception e) {\n            // xx\n            e.printStackTrace();\n        }\n    }\n\n    private static Res listToRes(List&lt;DedupeRes&gt; list) {\n        Res res = new Res();\n        res.setDedupeDetails(new ArrayList&lt;&gt;());\n        for (DedupeRes dedupeRes : list) {\n            if (Objects.equals(&quot;PRIMARY&quot;, dedupeRes.getCustomerType())) {\n                // if you used spring -&gt; BeanUtils.copyProperties(dedupeRes, res);\n                res.setID(dedupeRes.getID());\n                res.setBranchName(dedupeRes.getBranchName());\n                res.setCustomerName(dedupeRes.getCustomerName());\n                res.setMobileNumber(dedupeRes.getMobileNumber());\n                res.setSchemeName(dedupeRes.getSchemeName());\n            }\n            DedupeDetails details = new DedupeDetails();\n            //\n            BeanUtils.copyProperties(dedupeRes, details);\n            res.getDedupeDetails().add(details);\n        }\n        return res;\n    }\n\n    @Data\n    private static class DedupeRes {\n        @JsonProperty(&quot;ID&quot;)\n        private String ID;\n        @JsonProperty(&quot;CustomerName&quot;)\n        private String CustomerName;\n        @JsonProperty(&quot;BranchName&quot;)\n        private String BranchName;\n        @JsonProperty(&quot;SchemeName&quot;)\n        private String SchemeName;\n        @JsonProperty(&quot;MobileNumber&quot;)\n        private String MobileNumber;\n        @JsonProperty(&quot;CustomerType&quot;)\n        private String CustomerType;\n        @JsonProperty(&quot;DedupeFound&quot;)\n        private String DedupeFound;\n    }\n\n    @Data\n    private static class Res {\n        @JsonProperty(&quot;ID&quot;)\n        private String ID;\n        @JsonProperty(&quot;CustomerName&quot;)\n        private String CustomerName;\n        @JsonProperty(&quot;BranchName&quot;)\n        private String BranchName;\n        @JsonProperty(&quot;SchemeName&quot;)\n        private String SchemeName;\n        @JsonProperty(&quot;MobileNumber&quot;)\n        private String MobileNumber;\n        @JsonProperty(&quot;dedupeDetails&quot;)\n        private List&lt;DedupeDetails&gt; dedupeDetails;\n    }\n\n    @Data\n    private static class DedupeDetails {\n        @JsonProperty(&quot;CustomerType&quot;)\n        private String CustomerType;\n        @JsonProperty(&quot;CustomerName&quot;)\n        private String CustomerName;\n        @JsonProperty(&quot;DedupeFound&quot;)\n        private String DedupeFound;\n    }\n}\n\n</code></pre>\n<p>consule.</p>\n<pre><code>[{&quot;ID&quot;:&quot;1234&quot;,&quot;CustomerName&quot;:&quot;KUMAR&quot;,&quot;BranchName&quot;:&quot;HARBOUR&quot;,&quot;SchemeName&quot;:&quot;GOLD&quot;,&quot;MobileNumber&quot;:&quot;123456789&quot;,&quot;dedupeDetails&quot;:[{&quot;CustomerType&quot;:&quot;PRIMARY&quot;,&quot;CustomerName&quot;:&quot;KUMAR&quot;,&quot;DedupeFound&quot;:&quot;NO&quot;},{&quot;CustomerType&quot;:&quot;SECONDARY&quot;,&quot;CustomerName&quot;:&quot;SEAN&quot;,&quot;DedupeFound&quot;:&quot;YES&quot;}]},{&quot;ID&quot;:&quot;5678&quot;,&quot;CustomerName&quot;:&quot;MARK&quot;,&quot;BranchName&quot;:&quot;CANTONMENT&quot;,&quot;SchemeName&quot;:&quot;DIAMOND&quot;,&quot;MobileNumber&quot;:&quot;123456789&quot;,&quot;dedupeDetails&quot;:[{&quot;CustomerType&quot;:&quot;PRIMARY&quot;,&quot;CustomerName&quot;:&quot;MARK&quot;,&quot;DedupeFound&quot;:&quot;NO&quot;},{&quot;CustomerType&quot;:&quot;SECONDARY&quot;,&quot;CustomerName&quot;:&quot;STEVE&quot;,&quot;DedupeFound&quot;:&quot;YES&quot;}]}]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676659661,"creation_date":1676659661,"answer_id":75488234,"question_id":70044037,"body_markdown":"You can use JSON library such as _Josson_ to do the transformation.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n__Deserialization__\r\n\r\n    Josson josson = Josson.fromJsonString(yourJsonString);\r\n\r\n__Method 1__\r\n\r\nFind the primary record of each group from the root node.\r\n\r\n    JsonNode node = josson.getNode(\r\n        &quot;group(ID, DedupeDetails:map(CustomerType, CustomerName, DedupeFound))@&quot; +\r\n        &quot;.let($id:ID, $pri:$.[ID=$id &amp; CustomerType=&#39;PRIMARY&#39;])&quot; +\r\n        &quot;.field($pri.CustomerName, $pri.BranchName, $pri.SchemeName, $pri.MobileNumber)&quot;);\r\n\r\n    System.out.println(node.toPrettyString());\r\n\r\n__Method 2__\r\n\r\nFind the primary record within each group.\r\n\r\n    JsonNode node = josson.getNode(\r\n        &quot;group(ID)@&quot; +\r\n        &quot;.let($pri: elements[CustomerType=&#39;PRIMARY&#39;])&quot; +\r\n        &quot;.field($pri.CustomerName, $pri.BranchName, $pri.SchemeName, $pri.MobileNumber,&quot; +\r\n        &quot;       elements:, DedupeDetails:elements.map(CustomerType, CustomerName, DedupeFound))&quot;);\r\n\r\n    System.out.println(node.toPrettyString());\r\n\r\n__Method 3__\r\n\r\nUse `mergeObjects()` instead of `let()` to do the task.\r\n\r\n    JsonNode node = josson.getNode(\r\n        &quot;group(ID)@&quot; +\r\n        &quot;.mergeObjects(&quot; +\r\n        &quot;  elements[CustomerType=&#39;PRIMARY&#39;].map(ID, CustomerName, BranchName, SchemeName, MobileNumber),&quot; +\r\n        &quot;  map(DedupeDetails:elements.map(CustomerType, CustomerName, DedupeFound))&quot; +\r\n        &quot;)&quot;);\r\n\r\n    System.out.println(node.toPrettyString());\r\n","title":"Grouping by Unique ID for JSON Array","body":"<p>You can use JSON library such as <em>Josson</em> to do the transformation.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<p><strong>Deserialization</strong></p>\n<pre><code>Josson josson = Josson.fromJsonString(yourJsonString);\n</code></pre>\n<p><strong>Method 1</strong></p>\n<p>Find the primary record of each group from the root node.</p>\n<pre><code>JsonNode node = josson.getNode(\n    &quot;group(ID, DedupeDetails:map(CustomerType, CustomerName, DedupeFound))@&quot; +\n    &quot;.let($id:ID, $pri:$.[ID=$id &amp; CustomerType='PRIMARY'])&quot; +\n    &quot;.field($pri.CustomerName, $pri.BranchName, $pri.SchemeName, $pri.MobileNumber)&quot;);\n\nSystem.out.println(node.toPrettyString());\n</code></pre>\n<p><strong>Method 2</strong></p>\n<p>Find the primary record within each group.</p>\n<pre><code>JsonNode node = josson.getNode(\n    &quot;group(ID)@&quot; +\n    &quot;.let($pri: elements[CustomerType='PRIMARY'])&quot; +\n    &quot;.field($pri.CustomerName, $pri.BranchName, $pri.SchemeName, $pri.MobileNumber,&quot; +\n    &quot;       elements:, DedupeDetails:elements.map(CustomerType, CustomerName, DedupeFound))&quot;);\n\nSystem.out.println(node.toPrettyString());\n</code></pre>\n<p><strong>Method 3</strong></p>\n<p>Use <code>mergeObjects()</code> instead of <code>let()</code> to do the task.</p>\n<pre><code>JsonNode node = josson.getNode(\n    &quot;group(ID)@&quot; +\n    &quot;.mergeObjects(&quot; +\n    &quot;  elements[CustomerType='PRIMARY'].map(ID, CustomerName, BranchName, SchemeName, MobileNumber),&quot; +\n    &quot;  map(DedupeDetails:elements.map(CustomerType, CustomerName, DedupeFound))&quot; +\n    &quot;)&quot;);\n\nSystem.out.println(node.toPrettyString());\n</code></pre>\n"}],"owner":{"account_id":19313733,"reputation":355,"user_id":14118943,"display_name":"Chennai Cheetah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":472,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1676659661,"creation_date":1637393393,"question_id":70044037,"body_markdown":"&gt; Blockquote\r\n\r\nI have below JSON Input Request which has to be group by **ID** parameter.\r\n\r\n**Input :**\r\n```\r\n[\r\n    {\r\n        &quot;ID&quot;: &quot;1234&quot;,\r\n        &quot;CustomerName&quot;: &quot;KUMAR&quot;,\r\n        &quot;BranchName&quot;: &quot;HARBOUR&quot;,\r\n        &quot;SchemeName&quot;: &quot;GOLD&quot;,\r\n        &quot;MobileNumber&quot;: &quot;123456789&quot;,\r\n\t\t&quot;CustomerType&quot;: &quot;PRIMARY&quot;,\r\n\t\t&quot;DedupeFound&quot; : &quot;NO&quot;\r\n\t\t\r\n    },\r\n    {\r\n        &quot;ID&quot;: &quot;1234&quot;,\r\n        &quot;CustomerName&quot;: &quot;SEAN&quot;,\r\n        &quot;BranchName&quot;: &quot;HARBOUR&quot;,\r\n        &quot;SchemeName&quot;: &quot;GOLD&quot;,\r\n        &quot;MobileNumber&quot;: &quot;123456789&quot;,\r\n\t\t&quot;CustomerType&quot;: &quot;SECONDARY&quot;,\r\n\t\t&quot;DedupeFound&quot; : &quot;YES&quot;\r\n    },\r\n    {\r\n        &quot;ID&quot;: &quot;5678&quot;,\r\n        &quot;CustomerName&quot;: &quot;MARK&quot;,\r\n        &quot;BranchName&quot;: &quot;CANTONMENT&quot;,\r\n        &quot;SchemeName&quot;: &quot;DIAMOND&quot;,\r\n        &quot;MobileNumber&quot;: &quot;123456789&quot;,\r\n\t\t&quot;CustomerType&quot;: &quot;PRIMARY&quot;,\r\n\t\t&quot;DedupeFound&quot; : &quot;NO&quot;\r\n    },\r\n    {\r\n        &quot;ID&quot;: &quot;5678&quot;,\r\n        &quot;CustomerName&quot;: &quot;STEVE&quot;,\r\n        &quot;BranchName&quot;: &quot;CANTONMENT&quot;,\r\n        &quot;SchemeName&quot;: &quot;DIAMOND&quot;,\r\n        &quot;MobileNumber&quot;: &quot;123456789&quot;,\r\n\t\t&quot;CustomerType&quot;: &quot;SECONDARY&quot;,\r\n\t\t&quot;DedupeFound&quot; : &quot;YES&quot;\r\n    }\r\n]\r\n``` \r\nThe above request needs to be transformed in the below way\r\n\r\n1. First records to be grouped based on ID Tag and only primary ID&#39;s details needs to be displayed\r\n2. Inside the ID Record details . I have an DedupeDetails Array for both the customers.\r\n\r\n**Output**\r\n```\r\n[\r\n\t{\r\n\t\t&quot;ID&quot;: &quot;1234&quot;,\r\n        &quot;CustomerName&quot;: &quot;KUMAR&quot;,           // Only Primary Customer Details for the \r\n        &quot;BranchName&quot;: &quot;HARBOUR&quot;,           //  ID Tag to be displayed here\r\n        &quot;SchemeName&quot;: &quot;GOLD&quot;,\r\n        &quot;MobileNumber&quot;: &quot;123456789&quot;\r\n\t\t&quot;DedupeDetails&quot;: [\r\n\t\t\t{\r\n\t\t\t\t&quot;CustomerType&quot;: &quot;PRIMARY&quot;\r\n\t\t\t\t&quot;CustomerName&quot;: &quot;KUMAR&quot;,\r\n\t\t\t\t&quot;DedupeFound&quot; : &quot;NO&quot;\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t&quot;CustomerType&quot;: &quot;SECONDARY&quot;\r\n\t\t\t\t&quot;CustomerName&quot;: &quot;SEAN&quot;,\r\n\t\t\t\t&quot;DedupeFound&quot; : &quot;YES&quot;\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t&quot;ID&quot;: &quot;5678&quot;,\r\n        &quot;CustomerName&quot;: &quot;MARK&quot;,\r\n        &quot;BranchName&quot;: &quot;CANTONMENT&quot;,\r\n        &quot;SchemeName&quot;: &quot;DIAMOND&quot;,\r\n        &quot;MobileNumber&quot;: &quot;123456789&quot;\r\n\t\t&quot;DedupeDetails&quot;: [\r\n\t\t\t{\r\n\t\t\t\t&quot;CustomerType&quot;: &quot;PRIMARY&quot;\r\n\t\t\t\t&quot;CustomerName&quot;: &quot;MARK&quot;,\r\n\t\t\t\t&quot;DedupeFound&quot; : &quot;NO&quot;\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t&quot;CustomerType&quot;: &quot;SECONDARY&quot;\r\n\t\t\t\t&quot;CustomerName&quot;: &quot;STEVE&quot;,\r\n\t\t\t\t&quot;DedupeFound&quot; : &quot;YES&quot;\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n]\r\n```\r\n\r\nI have started with the java code in apache camel . where I am able to map json string to Object List successfully. I am still clueless on how to do grouping to achieve the output. \r\n\r\nNote : I am a newbie to java . Any Suggestions / Corrections are highly recommended.\r\n\r\n**Java** \r\n```\r\npackage com.mycompany.Login;\r\n\r\nimport java.util.List;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.sql.Timestamp;\r\nimport java.io.File;\r\nimport java.io.PrintWriter;\r\nimport java.sql.Time;\r\nimport com.mycompany.Login.*;\r\nimport org.apache.camel.Exchange;\r\nimport org.apache.camel.Processor;\r\nimport com.fasterxml.jackson.databind.DeserializationFeature;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.mycompany.Dedupe.DedupeRoot.DedupeRes;\r\n\r\n\r\n\r\n\r\npublic class LoginMapping implements Processor{\r\n\tpublic void process(Exchange ex)throws Exception{ \r\n\t\r\n\t\ttry {\t\r\n\t\t\r\n\t\t   \r\n\t\t\tString responseString = {Input mentioned in post};\t\t\t\r\n\t\t\tObjectMapper mapper = new ObjectMapper();\r\n\t\t\tmapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\t\t\t\r\n\t\t\tList&lt;DedupeRes&gt; dedupe = Arrays.asList(mapper.readValue(responseString, DedupeRes[].class));  \r\n\t\t\tint total = dedupe.size();\t\t\t\r\n\t\t\tif (total &gt; 0)\r\n\t\t\t{\t\t\t\t\r\n\t\t\t\tfor (int i = 0; i &lt; total; i++) {\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t}\r\n\t\r\n\t ex.getIn().setBody(responseString);\r\n\t\t}\t\t\r\n\t\tcatch(Exception e) {\r\n\t\t\tex.getIn().setHeader(&quot;ExpMsg&quot;, &quot;Undefined&quot;);\r\n\t\t\tthrow e;\r\n\t\t}\t\r\n\t\r\n}\r\n}\r\n\r\n```\r\n","title":"Grouping by Unique ID for JSON Array","body":"<blockquote>\n<p>Blockquote</p>\n</blockquote>\n<p>I have below JSON Input Request which has to be group by <strong>ID</strong> parameter.</p>\n<p><strong>Input :</strong></p>\n<pre><code>[\n    {\n        &quot;ID&quot;: &quot;1234&quot;,\n        &quot;CustomerName&quot;: &quot;KUMAR&quot;,\n        &quot;BranchName&quot;: &quot;HARBOUR&quot;,\n        &quot;SchemeName&quot;: &quot;GOLD&quot;,\n        &quot;MobileNumber&quot;: &quot;123456789&quot;,\n        &quot;CustomerType&quot;: &quot;PRIMARY&quot;,\n        &quot;DedupeFound&quot; : &quot;NO&quot;\n        \n    },\n    {\n        &quot;ID&quot;: &quot;1234&quot;,\n        &quot;CustomerName&quot;: &quot;SEAN&quot;,\n        &quot;BranchName&quot;: &quot;HARBOUR&quot;,\n        &quot;SchemeName&quot;: &quot;GOLD&quot;,\n        &quot;MobileNumber&quot;: &quot;123456789&quot;,\n        &quot;CustomerType&quot;: &quot;SECONDARY&quot;,\n        &quot;DedupeFound&quot; : &quot;YES&quot;\n    },\n    {\n        &quot;ID&quot;: &quot;5678&quot;,\n        &quot;CustomerName&quot;: &quot;MARK&quot;,\n        &quot;BranchName&quot;: &quot;CANTONMENT&quot;,\n        &quot;SchemeName&quot;: &quot;DIAMOND&quot;,\n        &quot;MobileNumber&quot;: &quot;123456789&quot;,\n        &quot;CustomerType&quot;: &quot;PRIMARY&quot;,\n        &quot;DedupeFound&quot; : &quot;NO&quot;\n    },\n    {\n        &quot;ID&quot;: &quot;5678&quot;,\n        &quot;CustomerName&quot;: &quot;STEVE&quot;,\n        &quot;BranchName&quot;: &quot;CANTONMENT&quot;,\n        &quot;SchemeName&quot;: &quot;DIAMOND&quot;,\n        &quot;MobileNumber&quot;: &quot;123456789&quot;,\n        &quot;CustomerType&quot;: &quot;SECONDARY&quot;,\n        &quot;DedupeFound&quot; : &quot;YES&quot;\n    }\n]\n</code></pre>\n<p>The above request needs to be transformed in the below way</p>\n<ol>\n<li>First records to be grouped based on ID Tag and only primary ID's details needs to be displayed</li>\n<li>Inside the ID Record details . I have an DedupeDetails Array for both the customers.</li>\n</ol>\n<p><strong>Output</strong></p>\n<pre><code>[\n    {\n        &quot;ID&quot;: &quot;1234&quot;,\n        &quot;CustomerName&quot;: &quot;KUMAR&quot;,           // Only Primary Customer Details for the \n        &quot;BranchName&quot;: &quot;HARBOUR&quot;,           //  ID Tag to be displayed here\n        &quot;SchemeName&quot;: &quot;GOLD&quot;,\n        &quot;MobileNumber&quot;: &quot;123456789&quot;\n        &quot;DedupeDetails&quot;: [\n            {\n                &quot;CustomerType&quot;: &quot;PRIMARY&quot;\n                &quot;CustomerName&quot;: &quot;KUMAR&quot;,\n                &quot;DedupeFound&quot; : &quot;NO&quot;\n            },\n            {\n                &quot;CustomerType&quot;: &quot;SECONDARY&quot;\n                &quot;CustomerName&quot;: &quot;SEAN&quot;,\n                &quot;DedupeFound&quot; : &quot;YES&quot;\n            }\n        ]\n    },\n    {\n        &quot;ID&quot;: &quot;5678&quot;,\n        &quot;CustomerName&quot;: &quot;MARK&quot;,\n        &quot;BranchName&quot;: &quot;CANTONMENT&quot;,\n        &quot;SchemeName&quot;: &quot;DIAMOND&quot;,\n        &quot;MobileNumber&quot;: &quot;123456789&quot;\n        &quot;DedupeDetails&quot;: [\n            {\n                &quot;CustomerType&quot;: &quot;PRIMARY&quot;\n                &quot;CustomerName&quot;: &quot;MARK&quot;,\n                &quot;DedupeFound&quot; : &quot;NO&quot;\n            },\n            {\n                &quot;CustomerType&quot;: &quot;SECONDARY&quot;\n                &quot;CustomerName&quot;: &quot;STEVE&quot;,\n                &quot;DedupeFound&quot; : &quot;YES&quot;\n            }\n        ]\n    }\n]\n</code></pre>\n<p>I have started with the java code in apache camel . where I am able to map json string to Object List successfully. I am still clueless on how to do grouping to achieve the output.</p>\n<p>Note : I am a newbie to java . Any Suggestions / Corrections are highly recommended.</p>\n<p><strong>Java</strong></p>\n<pre><code>package com.mycompany.Login;\n\nimport java.util.List;\nimport java.text.SimpleDateFormat;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.sql.Timestamp;\nimport java.io.File;\nimport java.io.PrintWriter;\nimport java.sql.Time;\nimport com.mycompany.Login.*;\nimport org.apache.camel.Exchange;\nimport org.apache.camel.Processor;\nimport com.fasterxml.jackson.databind.DeserializationFeature;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.mycompany.Dedupe.DedupeRoot.DedupeRes;\n\n\n\n\npublic class LoginMapping implements Processor{\n    public void process(Exchange ex)throws Exception{ \n    \n        try {   \n        \n           \n            String responseString = {Input mentioned in post};          \n            ObjectMapper mapper = new ObjectMapper();\n            mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);         \n            List&lt;DedupeRes&gt; dedupe = Arrays.asList(mapper.readValue(responseString, DedupeRes[].class));  \n            int total = dedupe.size();          \n            if (total &gt; 0)\n            {               \n                for (int i = 0; i &lt; total; i++) {                   \n                    \n                }               \n            }\n    \n     ex.getIn().setBody(responseString);\n        }       \n        catch(Exception e) {\n            ex.getIn().setHeader(&quot;ExpMsg&quot;, &quot;Undefined&quot;);\n            throw e;\n        }   \n    \n}\n}\n\n</code></pre>\n"},{"tags":["java","spring-boot","unicode","arabic","openpdf"],"answers":[{"tags":[],"owner":{"account_id":27229121,"reputation":451,"user_id":20757134,"display_name":"ayada"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676659513,"creation_date":1676643622,"answer_id":75485445,"question_id":75447605,"body_markdown":"[This example of writing Arabic text to a PDF using OpenPDF](https://github.com/LibrePDF/OpenPDF/blob/bff6520a368fe0a35b443740a36cba108f4ed1a4/pdf-toolbox/src/test/java/com/lowagie/examples/fonts/styles/RightToLeft.java) solves my problem. (_RightToLeft.java_ in the OpenPDF documentation.) \r\n\r\nThe main idea is to create a `BaseFont` that supports Arabic text, as shown on line 51:\r\n\r\n    BaseFont bf = BaseFont.createFont(&quot;c:\\\\windows\\\\fonts\\\\times.ttf&quot;, BaseFont.IDENTITY_H, true);\r\n\r\nYou can replace that **.ttf** file supporting Arabic text with your own file. You put it in the _resources_ folder, and name it like this: _src/main/resources/youTtfFile.ttf_.\r\n\r\nYou also need to specify right to left (RTL) directionality, as shown on line 61:\r\n\r\n    ct.setRunDirection(PdfWriter.RUN_DIRECTION_RTL);\r\n","title":"How to write Arabic text in a PDF using OpenPDF and Java","body":"<p><a href=\"https://github.com/LibrePDF/OpenPDF/blob/bff6520a368fe0a35b443740a36cba108f4ed1a4/pdf-toolbox/src/test/java/com/lowagie/examples/fonts/styles/RightToLeft.java\" rel=\"nofollow noreferrer\">This example of writing Arabic text to a PDF using OpenPDF</a> solves my problem. (<em>RightToLeft.java</em> in the OpenPDF documentation.)</p>\n<p>The main idea is to create a <code>BaseFont</code> that supports Arabic text, as shown on line 51:</p>\n<pre><code>BaseFont bf = BaseFont.createFont(&quot;c:\\\\windows\\\\fonts\\\\times.ttf&quot;, BaseFont.IDENTITY_H, true);\n</code></pre>\n<p>You can replace that <strong>.ttf</strong> file supporting Arabic text with your own file. You put it in the <em>resources</em> folder, and name it like this: <em>src/main/resources/youTtfFile.ttf</em>.</p>\n<p>You also need to specify right to left (RTL) directionality, as shown on line 61:</p>\n<pre><code>ct.setRunDirection(PdfWriter.RUN_DIRECTION_RTL);\n</code></pre>\n"}],"owner":{"account_id":27229121,"reputation":451,"user_id":20757134,"display_name":"ayada"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":544,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75485445,"answer_count":1,"score":1,"last_activity_date":1676659513,"creation_date":1676376340,"question_id":75447605,"body_markdown":"I use OpenPDF to generate a PDF from a Spring Boot application. Everything works fine when I use French or English alphabets, but when I write in Arabic nothing is displayed.\r\n\r\nI read that I have to use the Unicode form for the Arabic words. For example, the Arabic word **الاسم** converted to its Unicode form gives the following string:\r\n\r\n`\\u0627\\u0644\\u0627\\u0633\\u0645`\r\n\r\nSo I am wondering whether there is any way to convert Arabic words to Unicode in Java, and could I use that approach with OpenPDF? Or is there any alternative way to write Arabic in a PDF using OpenPDF and Java 17/Spring Boot? ","title":"How to write Arabic text in a PDF using OpenPDF and Java","body":"<p>I use OpenPDF to generate a PDF from a Spring Boot application. Everything works fine when I use French or English alphabets, but when I write in Arabic nothing is displayed.</p>\n<p>I read that I have to use the Unicode form for the Arabic words. For example, the Arabic word <strong>الاسم</strong> converted to its Unicode form gives the following string:</p>\n<p><code>\\u0627\\u0644\\u0627\\u0633\\u0645</code></p>\n<p>So I am wondering whether there is any way to convert Arabic words to Unicode in Java, and could I use that approach with OpenPDF? Or is there any alternative way to write Arabic in a PDF using OpenPDF and Java 17/Spring Boot?</p>\n"},{"tags":["java","postgresql","spring-boot","java-17"],"comments":[{"owner":{"account_id":6274682,"reputation":191,"user_id":4877698,"display_name":"agulowaty"},"score":0,"creation_date":1676367598,"post_id":75445893,"comment_id":133118121,"body_markdown":"It seems like you&#39;re trying to reference non-existent &quot;booking_details&quot; table when you ALTER booking to ADD CONSTRAINT. You can move that command after &quot;booking_details&quot; table have been created.","body":"It seems like you&#39;re trying to reference non-existent &quot;booking_details&quot; table when you ALTER booking to ADD CONSTRAINT. You can move that command after &quot;booking_details&quot; table have been created."}],"answers":[{"tags":[],"owner":{"account_id":6274682,"reputation":191,"user_id":4877698,"display_name":"agulowaty"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676367913,"creation_date":1676367913,"answer_id":75446003,"question_id":75445893,"body_markdown":"Just out of interest - how you&#39;re planning to insert new entries given the schema? In order to create booking you&#39;d need to have booking_details created and vice versa. ","title":"One to one relationship Error on Postgresql","body":"<p>Just out of interest - how you're planning to insert new entries given the schema? In order to create booking you'd need to have booking_details created and vice versa.</p>\n"},{"tags":[],"owner":{"account_id":27275195,"reputation":1,"user_id":20795925,"display_name":"Practice Tech"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676659511,"creation_date":1676659511,"answer_id":75488209,"question_id":75445893,"body_markdown":"Solution: put this command on the last part of the sql so that the two tables must be created first before it can be altered.\r\n\r\n&quot;ALTER TABLE booking ADD CONSTRAINT FK_BOOKING_ON_BOOKING_DETAILS FOREIGN KEY (booking_details_id) REFERENCES booking_details (booking_entity_id);&quot;\r\n\r\n","title":"One to one relationship Error on Postgresql","body":"<p>Solution: put this command on the last part of the sql so that the two tables must be created first before it can be altered.</p>\n<p>&quot;ALTER TABLE booking ADD CONSTRAINT FK_BOOKING_ON_BOOKING_DETAILS FOREIGN KEY (booking_details_id) REFERENCES booking_details (booking_entity_id);&quot;</p>\n"}],"owner":{"account_id":27275195,"reputation":1,"user_id":20795925,"display_name":"Practice Tech"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1676659511,"creation_date":1676367352,"question_id":75445893,"body_markdown":"I would like to seek your insights regarding the error I&#39;m encountering with my postgresql commands.\r\n\r\nBasically, what I want to achieve is to create a &quot;booking&quot; entity with one to one relationship to another table called &quot;booking details&quot;. But flyway won&#39;t migrate my schema with the following error:\r\n\r\n\r\n    Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException:\r\n    Migration V0__Initial.sql failed\r\n    --------------------------------\r\n    SQL State  : 42S02\r\n    Error Code : 42102\r\n    Message    : Table &quot;BOOKING_DETAILS&quot; not found; SQL statement:\r\n    ALTER TABLE booking ADD CONSTRAINT FK_BOOKING_ON_BOOKING_DETAILS FOREIGN KEY (booking_details_id) REFERENCES booking_details (booking_entity_id) [42102-214]\r\n    Line       : 16\r\n    Statement  : ALTER TABLE booking ADD CONSTRAINT FK_BOOKING_ON_BOOKING_DETAILS FOREIGN KEY (booking_details_id) REFERENCES booking_details (booking_entity_id)\r\n\r\n\r\nHere is my postgresql commands:\r\n\r\n```\r\nDROP SEQUENCE IF EXISTS booking_transaction_sequence;\r\nDROP TABLE IF EXISTS booking;\r\n\r\nCREATE SEQUENCE  IF NOT EXISTS booking_transaction_sequence START WITH 1000 INCREMENT BY 100;\r\n\r\nCREATE TABLE booking (\r\n  id BIGINT NOT NULL,\r\n   booking_number VARCHAR(255),\r\n   booking_status VARCHAR(255),\r\n   processed_by VARCHAR(255),\r\n   created_at TIMESTAMP WITHOUT TIME ZONE,\r\n   booking_details_id BIGINT,\r\n   CONSTRAINT pk_booking PRIMARY KEY (id)\r\n);\r\n\r\nALTER TABLE booking ADD CONSTRAINT FK_BOOKING_ON_BOOKING_DETAILS FOREIGN KEY (booking_details_id) REFERENCES booking_details (booking_entity_id);\r\n\r\nDROP SEQUENCE IF EXISTS booking_details_transaction_sequence;\r\nDROP TABLE IF EXISTS booking_details;\r\nCREATE SEQUENCE  IF NOT EXISTS booking_details_transaction_sequence START WITH 1000 INCREMENT BY 100;\r\n\r\nCREATE TABLE booking_details (\r\n  booking_entity_id BIGINT NOT NULL,\r\n   sender_name VARCHAR(255),\r\n   item_details VARCHAR(255),\r\n   pickup_address VARCHAR(255),\r\n   rider_name VARCHAR(255),\r\n   delivery_address VARCHAR(255),\r\n   cancellation_reason VARCHAR(255),\r\n   CONSTRAINT pk_booking_details PRIMARY KEY (booking_entity_id)\r\n);\r\n\r\nALTER TABLE booking_details ADD CONSTRAINT FK_BOOKING_DETAILS_ON_BOOKINGENTITY FOREIGN KEY (booking_entity_id) REFERENCES booking (id);\r\n```\r\n\r\nI would highly appreciate any inputs regarding this. Thank you.\r\n\r\nI tried using the &quot;extend&quot; method on my BookingDetails entity to BookingEntity. This run my java springboot application but for some reason I can&#39;t fetch data with internal error 500 in postman. So I change my sql commands with the one-to-one relationship mapping but I got the above errors.","title":"One to one relationship Error on Postgresql","body":"<p>I would like to seek your insights regarding the error I'm encountering with my postgresql commands.</p>\n<p>Basically, what I want to achieve is to create a &quot;booking&quot; entity with one to one relationship to another table called &quot;booking details&quot;. But flyway won't migrate my schema with the following error:</p>\n<pre><code>Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException:\nMigration V0__Initial.sql failed\n--------------------------------\nSQL State  : 42S02\nError Code : 42102\nMessage    : Table &quot;BOOKING_DETAILS&quot; not found; SQL statement:\nALTER TABLE booking ADD CONSTRAINT FK_BOOKING_ON_BOOKING_DETAILS FOREIGN KEY (booking_details_id) REFERENCES booking_details (booking_entity_id) [42102-214]\nLine       : 16\nStatement  : ALTER TABLE booking ADD CONSTRAINT FK_BOOKING_ON_BOOKING_DETAILS FOREIGN KEY (booking_details_id) REFERENCES booking_details (booking_entity_id)\n</code></pre>\n<p>Here is my postgresql commands:</p>\n<pre><code>DROP SEQUENCE IF EXISTS booking_transaction_sequence;\nDROP TABLE IF EXISTS booking;\n\nCREATE SEQUENCE  IF NOT EXISTS booking_transaction_sequence START WITH 1000 INCREMENT BY 100;\n\nCREATE TABLE booking (\n  id BIGINT NOT NULL,\n   booking_number VARCHAR(255),\n   booking_status VARCHAR(255),\n   processed_by VARCHAR(255),\n   created_at TIMESTAMP WITHOUT TIME ZONE,\n   booking_details_id BIGINT,\n   CONSTRAINT pk_booking PRIMARY KEY (id)\n);\n\nALTER TABLE booking ADD CONSTRAINT FK_BOOKING_ON_BOOKING_DETAILS FOREIGN KEY (booking_details_id) REFERENCES booking_details (booking_entity_id);\n\nDROP SEQUENCE IF EXISTS booking_details_transaction_sequence;\nDROP TABLE IF EXISTS booking_details;\nCREATE SEQUENCE  IF NOT EXISTS booking_details_transaction_sequence START WITH 1000 INCREMENT BY 100;\n\nCREATE TABLE booking_details (\n  booking_entity_id BIGINT NOT NULL,\n   sender_name VARCHAR(255),\n   item_details VARCHAR(255),\n   pickup_address VARCHAR(255),\n   rider_name VARCHAR(255),\n   delivery_address VARCHAR(255),\n   cancellation_reason VARCHAR(255),\n   CONSTRAINT pk_booking_details PRIMARY KEY (booking_entity_id)\n);\n\nALTER TABLE booking_details ADD CONSTRAINT FK_BOOKING_DETAILS_ON_BOOKINGENTITY FOREIGN KEY (booking_entity_id) REFERENCES booking (id);\n</code></pre>\n<p>I would highly appreciate any inputs regarding this. Thank you.</p>\n<p>I tried using the &quot;extend&quot; method on my BookingDetails entity to BookingEntity. This run my java springboot application but for some reason I can't fetch data with internal error 500 in postman. So I change my sql commands with the one-to-one relationship mapping but I got the above errors.</p>\n"},{"tags":["java","mongodb","spring-boot","junit5","java-17"],"comments":[{"owner":{"account_id":19296,"reputation":17862,"user_id":45112,"accept_rate":71,"display_name":"armandino"},"score":0,"creation_date":1676675705,"post_id":75488173,"comment_id":133192358,"body_markdown":"Can you provide the exact code you&#39;re running? Looking at the snippet you posted, it seems it will not even compile.","body":"Can you provide the exact code you&#39;re running? Looking at the snippet you posted, it seems it will not even compile."}],"owner":{"account_id":27275195,"reputation":1,"user_id":20795925,"display_name":"Practice Tech"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676659299,"creation_date":1676659299,"question_id":75488173,"body_markdown":"I am new in unit testing and I am stuck with this error. I wonder if anyone here got an insight as to how I can resolve this issue.\r\n\r\nSo this is a snippet of my unit test.\r\n\r\n```\r\n@Test\r\nvoid shouldFindByStatus() {\r\n    when(repository.findByBookingStatus(anyString(),Sort.by(&quot;id&quot;).descending())).thenReturn(getBookingEntityForFilterByStatus());\r\n    when(mapper.toDomain(any(List&lt;BookingEntity.class))).thenReturn(getBookingFilterResponseDTO());\r\n    \r\n    List&lt;BookingFilterResponseDTO&gt; underTest = adapter.findByBookingStatus(&quot;CANCELLED&quot;);\r\n\r\n    assertNotNull(underTest);\r\n}\r\n```\r\n\r\nThe error I encountered is this part:\r\n\r\n```\r\n(any(List&lt;BookingEntity.class)))\r\n```\r\n\r\nIt says that &quot;List&quot; is an expected expression. Now the problem is if I remove the List, it will throw a different error since I declared it as List on my mapper class.\r\n\r\nThis is my mapper class.\r\n\r\n```\r\nList&lt;BookingFilterResponseDTO&gt; toDomain(List&lt;BookingEntity&gt; bookingEntity);\r\n```\r\n\r\nIf anyone here got an idea as to how I can resolve the said issue. I would highly and sincerely appreciate it. Thanks!","title":"Expression Expected Error encountered in JUnit5 Test","body":"<p>I am new in unit testing and I am stuck with this error. I wonder if anyone here got an insight as to how I can resolve this issue.</p>\n<p>So this is a snippet of my unit test.</p>\n<pre><code>@Test\nvoid shouldFindByStatus() {\n    when(repository.findByBookingStatus(anyString(),Sort.by(&quot;id&quot;).descending())).thenReturn(getBookingEntityForFilterByStatus());\n    when(mapper.toDomain(any(List&lt;BookingEntity.class))).thenReturn(getBookingFilterResponseDTO());\n    \n    List&lt;BookingFilterResponseDTO&gt; underTest = adapter.findByBookingStatus(&quot;CANCELLED&quot;);\n\n    assertNotNull(underTest);\n}\n</code></pre>\n<p>The error I encountered is this part:</p>\n<pre><code>(any(List&lt;BookingEntity.class)))\n</code></pre>\n<p>It says that &quot;List&quot; is an expected expression. Now the problem is if I remove the List, it will throw a different error since I declared it as List on my mapper class.</p>\n<p>This is my mapper class.</p>\n<pre><code>List&lt;BookingFilterResponseDTO&gt; toDomain(List&lt;BookingEntity&gt; bookingEntity);\n</code></pre>\n<p>If anyone here got an idea as to how I can resolve the said issue. I would highly and sincerely appreciate it. Thanks!</p>\n"},{"tags":["java","spring-boot","reactive-programming"],"comments":[{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1645575981,"post_id":71228397,"comment_id":125907333,"body_markdown":"Please add your code to the question instead of describing it. Thanks!","body":"Please add your code to the question instead of describing it. Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":9729816,"reputation":99,"user_id":7215277,"display_name":"Pankaj Chouhan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1651069388,"creation_date":1651069388,"answer_id":72030484,"question_id":71228397,"body_markdown":"So here is what I did to accomplish the above ask:\r\n\r\n```\r\nfinal Flux&lt;Document&gt; returnDoc = &lt;Reference of what I received from the Service layer&gt;;\r\n\r\nreturn returnDoc.hasElements()\r\n                .map(isNotEmpty -&gt; {\r\n                    if (isNotEmpty) \r\n                        return ResponseEntity.ok().body(returnDoc);\r\n                    else {\r\n                        return ResponseEntity.noContent().build();\r\n                    }\r\n                });\r\n```\r\n\r\nThis worked for me. Let me know if there is any other solution which is better.","title":"How to use Mono&lt;Boolean&gt; in if else conditional statement?","body":"<p>So here is what I did to accomplish the above ask:</p>\n<pre><code>final Flux&lt;Document&gt; returnDoc = &lt;Reference of what I received from the Service layer&gt;;\n\nreturn returnDoc.hasElements()\n                .map(isNotEmpty -&gt; {\n                    if (isNotEmpty) \n                        return ResponseEntity.ok().body(returnDoc);\n                    else {\n                        return ResponseEntity.noContent().build();\n                    }\n                });\n</code></pre>\n<p>This worked for me. Let me know if there is any other solution which is better.</p>\n"},{"tags":[],"owner":{"account_id":3918931,"reputation":620,"user_id":3242022,"display_name":"downvoteit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676659013,"creation_date":1676659013,"answer_id":75488118,"question_id":71228397,"body_markdown":"The trick with reactive conditionals is to utilize a couple of operators to achieve the `if / else` behaviour.\r\n\r\nSome operators I learnt from using Webflux over the years:\r\n  - `filter()`: filters the stream by some predicate (e.g. `if (2 &gt; 1)`)\r\n  - `map()`: maps the response to some type if `filter()` emits `true`\r\n  - `flatMap()`: maps the response to a `Publisher` (i.e. `Mono/Flux`)\r\n  - `switchIfEmpty()`: emits a default `Publisher` if `filter()` emits `false`\r\n  - `defaultIfEmpty()` emits a default type \r\n\r\nI will share my redisson cache &amp; r2dbc code as an example.\r\n\r\nHere is our scenario in pseudocode:\r\n\r\n```pseudocode\r\nIf a key is found in cache\r\n  return value\r\nElse \r\n  call database\r\n  set key &amp; value pair in cache\r\n  return value\r\n```\r\n\r\nIn either case, the value is wrapped into a `ResponseEntity` distinguished by status and the body.\r\n\r\n```java\r\n@Override\r\npublic Mono&lt;ResponseEntity&lt;Res&lt;UserSettings&gt;&gt;&gt; getUserSetting(String username) {\r\n  Mono&lt;UserSettings&gt; queryAndSet =\r\n      userSettingsRepository\r\n          .findByUsername(username)\r\n          .flatMap(v1 -&gt; cacheRepository.set(&quot;user_settings&quot;, username, v1).thenReturn(v1));\r\n\r\n  return cacheRepository\r\n      .get(&quot;user_settings&quot;, username, new TypeReference&lt;UserSettings&gt;() {}) // if then\r\n      .switchIfEmpty(queryAndSet) // else\r\n      .map(ResponseUtil::success) // if then\r\n      .defaultIfEmpty(singleError(UserMsg.USER_SETTINGS_NOT_FOUND.getCode())) // else\r\n      .map(v1 -&gt; ResponseEntity.status(elseNotFound(v1)).body(v1)); // finally\r\n}      \r\n```\r\n\r\n`CacheRepository` interface specs:\r\n\r\n```java\r\npublic interface CacheRepository {\r\n  Mono&lt;Void&gt; set(String table, String key, Object value);\r\n\r\n  Mono&lt;Void&gt; set(String table, String key, Object value, Long ttl, TimeUnit timeUnit);\r\n\r\n  &lt;T&gt; Mono&lt;T&gt; get(String table, String key, TypeReference&lt;T&gt; type);\r\n\r\n  Mono&lt;Boolean&gt; delete(String table, String key);\r\n}\r\n```\r\n\r\n`ResponseUtil` that helps with `ResponseEntity` wrapper:\r\n\r\n```java\r\npublic class ResponseUtil {\r\n  private ResponseUtil() {}\r\n\r\n  public static &lt;T&gt; Response&lt;T&gt; success(T data) {\r\n    return Response.&lt;T&gt;builder().success(true).data(data).build();\r\n  }\r\n\r\n  public static &lt;T&gt; Response&lt;T&gt; singleError(String error) {\r\n    return Response.&lt;T&gt;builder().success(false).errors(List.of(error)).build();\r\n  }\r\n\r\n  public static &lt;T&gt; Response&lt;T&gt; multipleErrors(List&lt;String&gt; errors) {\r\n    return Response.&lt;T&gt;builder().success(false).errors(errors).build();\r\n  }\r\n\r\n  public static HttpStatus elseBadRequest(Response&lt;?&gt; res) {\r\n    return Boolean.TRUE.equals(res.isSuccess()) ? HttpStatus.OK : HttpStatus.BAD_REQUEST;\r\n  }\r\n\r\n  public static HttpStatus elseNotFound(Response&lt;?&gt; res) {\r\n    return Boolean.TRUE.equals(res.isSuccess()) ? HttpStatus.OK : HttpStatus.NOT_FOUND;\r\n  }\r\n}\r\n```\r\n\r\nAnd the `Response`:\r\n\r\n```java\r\n// Idiotic wrapper\r\n@Data\r\n@Builder\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class Response&lt;T&gt; {\r\n  private T data;\r\n  private boolean success;\r\n  private List&lt;String&gt; errors;\r\n}\r\n```","title":"How to use Mono&lt;Boolean&gt; in if else conditional statement?","body":"<p>The trick with reactive conditionals is to utilize a couple of operators to achieve the <code>if / else</code> behaviour.</p>\n<p>Some operators I learnt from using Webflux over the years:</p>\n<ul>\n<li><code>filter()</code>: filters the stream by some predicate (e.g. <code>if (2 &gt; 1)</code>)</li>\n<li><code>map()</code>: maps the response to some type if <code>filter()</code> emits <code>true</code></li>\n<li><code>flatMap()</code>: maps the response to a <code>Publisher</code> (i.e. <code>Mono/Flux</code>)</li>\n<li><code>switchIfEmpty()</code>: emits a default <code>Publisher</code> if <code>filter()</code> emits <code>false</code></li>\n<li><code>defaultIfEmpty()</code> emits a default type</li>\n</ul>\n<p>I will share my redisson cache &amp; r2dbc code as an example.</p>\n<p>Here is our scenario in pseudocode:</p>\n<pre><code>If a key is found in cache\n  return value\nElse \n  call database\n  set key &amp; value pair in cache\n  return value\n</code></pre>\n<p>In either case, the value is wrapped into a <code>ResponseEntity</code> distinguished by status and the body.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic Mono&lt;ResponseEntity&lt;Res&lt;UserSettings&gt;&gt;&gt; getUserSetting(String username) {\n  Mono&lt;UserSettings&gt; queryAndSet =\n      userSettingsRepository\n          .findByUsername(username)\n          .flatMap(v1 -&gt; cacheRepository.set(&quot;user_settings&quot;, username, v1).thenReturn(v1));\n\n  return cacheRepository\n      .get(&quot;user_settings&quot;, username, new TypeReference&lt;UserSettings&gt;() {}) // if then\n      .switchIfEmpty(queryAndSet) // else\n      .map(ResponseUtil::success) // if then\n      .defaultIfEmpty(singleError(UserMsg.USER_SETTINGS_NOT_FOUND.getCode())) // else\n      .map(v1 -&gt; ResponseEntity.status(elseNotFound(v1)).body(v1)); // finally\n}      \n</code></pre>\n<p><code>CacheRepository</code> interface specs:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface CacheRepository {\n  Mono&lt;Void&gt; set(String table, String key, Object value);\n\n  Mono&lt;Void&gt; set(String table, String key, Object value, Long ttl, TimeUnit timeUnit);\n\n  &lt;T&gt; Mono&lt;T&gt; get(String table, String key, TypeReference&lt;T&gt; type);\n\n  Mono&lt;Boolean&gt; delete(String table, String key);\n}\n</code></pre>\n<p><code>ResponseUtil</code> that helps with <code>ResponseEntity</code> wrapper:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ResponseUtil {\n  private ResponseUtil() {}\n\n  public static &lt;T&gt; Response&lt;T&gt; success(T data) {\n    return Response.&lt;T&gt;builder().success(true).data(data).build();\n  }\n\n  public static &lt;T&gt; Response&lt;T&gt; singleError(String error) {\n    return Response.&lt;T&gt;builder().success(false).errors(List.of(error)).build();\n  }\n\n  public static &lt;T&gt; Response&lt;T&gt; multipleErrors(List&lt;String&gt; errors) {\n    return Response.&lt;T&gt;builder().success(false).errors(errors).build();\n  }\n\n  public static HttpStatus elseBadRequest(Response&lt;?&gt; res) {\n    return Boolean.TRUE.equals(res.isSuccess()) ? HttpStatus.OK : HttpStatus.BAD_REQUEST;\n  }\n\n  public static HttpStatus elseNotFound(Response&lt;?&gt; res) {\n    return Boolean.TRUE.equals(res.isSuccess()) ? HttpStatus.OK : HttpStatus.NOT_FOUND;\n  }\n}\n</code></pre>\n<p>And the <code>Response</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Idiotic wrapper\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Response&lt;T&gt; {\n  private T data;\n  private boolean success;\n  private List&lt;String&gt; errors;\n}\n</code></pre>\n"}],"owner":{"account_id":9729816,"reputation":99,"user_id":7215277,"display_name":"Pankaj Chouhan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4681,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":72030484,"answer_count":2,"score":2,"last_activity_date":1676659013,"creation_date":1645564566,"question_id":71228397,"body_markdown":"I am using `Flux&lt;Document&gt;` in reactive, so as to make my Rest Service reactive. I am returning `ResponseEntity&lt;Flux&lt;Document&gt;&gt;` as response to my rest service. Right now my service is always returning `HttpStatus.ok()`, but I want to enhance it to return `HttpStatus.noContent()` in case of no content is found. \r\nTo achieve this am trying to check the size of Flux&lt;Document&gt;. I figured out that this can be achieved either by `.count()` or `.hasElements()`. \r\n\r\nIF I consider `.hasElements()` then it returns `Mono&lt;Boolean&gt;`.\r\nI am trying to understand as a newbie that how can I use this in making decisions between `HttpStatus.ok()` and `HttpStatus.noContent()`.\r\n\r\nAlso is this the right way to use conditional statements in reactive or is there any other way to achieve it.\r\n\r\nRequest you to please help.","title":"How to use Mono&lt;Boolean&gt; in if else conditional statement?","body":"<p>I am using <code>Flux&lt;Document&gt;</code> in reactive, so as to make my Rest Service reactive. I am returning <code>ResponseEntity&lt;Flux&lt;Document&gt;&gt;</code> as response to my rest service. Right now my service is always returning <code>HttpStatus.ok()</code>, but I want to enhance it to return <code>HttpStatus.noContent()</code> in case of no content is found.\nTo achieve this am trying to check the size of Flux. I figured out that this can be achieved either by <code>.count()</code> or <code>.hasElements()</code>.</p>\n<p>IF I consider <code>.hasElements()</code> then it returns <code>Mono&lt;Boolean&gt;</code>.\nI am trying to understand as a newbie that how can I use this in making decisions between <code>HttpStatus.ok()</code> and <code>HttpStatus.noContent()</code>.</p>\n<p>Also is this the right way to use conditional statements in reactive or is there any other way to achieve it.</p>\n<p>Request you to please help.</p>\n"},{"tags":["java","maven","microservices","gitlab-ci","maven-module"],"comments":[{"owner":{"account_id":10798342,"reputation":318,"user_id":7943248,"display_name":"Zeuzif"},"score":0,"creation_date":1676650020,"post_id":75486613,"comment_id":133186067,"body_markdown":"can You post the parent module pom and the childs poms","body":"can You post the parent module pom and the childs poms"}],"answers":[{"tags":[],"owner":{"account_id":480617,"reputation":2495,"user_id":893952,"accept_rate":57,"display_name":"Harry Coder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676658867,"creation_date":1676658867,"answer_id":75488095,"question_id":75486613,"body_markdown":"First, try this [link][1] for your error.\r\n\r\nAlso, for your project unless it represents a whole microservice, it is fine. But, it seems like you have implemented many microservices in one project. Every microservice should be an isolated project with its own dependencies and release process.\r\nEach microservice project should be:\r\n\r\n - Independent \r\n - Autonomous\r\n - Easy to deploy individually\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/7612309/maven-non-resolvable-parent-pom","title":"Microservice architecture design (spring maven multi-module project) to create a working ci/cd flow","body":"<p>First, try this <a href=\"https://stackoverflow.com/questions/7612309/maven-non-resolvable-parent-pom\">link</a> for your error.</p>\n<p>Also, for your project unless it represents a whole microservice, it is fine. But, it seems like you have implemented many microservices in one project. Every microservice should be an isolated project with its own dependencies and release process.\nEach microservice project should be:</p>\n<ul>\n<li>Independent</li>\n<li>Autonomous</li>\n<li>Easy to deploy individually</li>\n</ul>\n"}],"owner":{"account_id":20972956,"reputation":9,"user_id":15409697,"display_name":"Limbo1111"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":188,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676658867,"creation_date":1676649792,"question_id":75486613,"body_markdown":"I&#39;m currently learning `gitlab` *ci/cd* and ran into a problem.\r\nI am a java developer and I have written a multi-module `maven` project with microservice architecture.\r\nAt the root of the project, I have a `BOM` file in which the heir modules are declared and dependencies are declared in the `dependencyManagment` tag so that all microservices use the same versions of `spring-cloud`. Each module has its own repository. Logically, each module has its own database and pom refers to the parent (bom) to import dependency versions.\r\nThe question is that when writing gitlab pipelines, I get an error: Non-resolvable parent `POM` for (module name) ... It is logical that he has nowhere to get dependency versions, etc., but in this case, how to control the versions of the libraries of all modules or can maybe it&#39;s not needed at all?\r\nHelp me come up with a work plan.\r\nAt the moment the diagram looks like this:\r\nroot(bom) -&gt; childModule(pom)\r\n                    alsoRoot -&gt; childModule(pom)","title":"Microservice architecture design (spring maven multi-module project) to create a working ci/cd flow","body":"<p>I'm currently learning <code>gitlab</code> <em>ci/cd</em> and ran into a problem.\nI am a java developer and I have written a multi-module <code>maven</code> project with microservice architecture.\nAt the root of the project, I have a <code>BOM</code> file in which the heir modules are declared and dependencies are declared in the <code>dependencyManagment</code> tag so that all microservices use the same versions of <code>spring-cloud</code>. Each module has its own repository. Logically, each module has its own database and pom refers to the parent (bom) to import dependency versions.\nThe question is that when writing gitlab pipelines, I get an error: Non-resolvable parent <code>POM</code> for (module name) ... It is logical that he has nowhere to get dependency versions, etc., but in this case, how to control the versions of the libraries of all modules or can maybe it's not needed at all?\nHelp me come up with a work plan.\nAt the moment the diagram looks like this:\nroot(bom) -&gt; childModule(pom)\nalsoRoot -&gt; childModule(pom)</p>\n"},{"tags":["java","mysql","ssl"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1676659041,"post_id":75446292,"comment_id":133188791,"body_markdown":"Did you try updating the MySQL JDBC driver and your Java version?","body":"Did you try updating the MySQL JDBC driver and your Java version?"}],"owner":{"account_id":27782164,"reputation":1,"user_id":21210318,"display_name":"Ming"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676658817,"creation_date":1676369380,"question_id":75446292,"body_markdown":"Mysql JDBC driver throws following exceptions with useSSL=true Properties in fips enables ENV.\r\n\r\nThe follwing is code for get connection:\r\n\r\n        Properties props = new Properties();\r\n        props.setProperty(&quot;user&quot;, user_);\r\n        props.setProperty(&quot;password&quot;, password_);\r\n        \r\n        if (dbUurl_.contains(&quot;mysql&quot;)) {\r\n            props.put(&quot;useSSL&quot;, &quot;true&quot;);\r\n            props.put(&quot;verifyServerCertificate&quot;, &quot;false&quot;);\r\n        }\r\n        return DriverManager.getConnection(dbUurl_, props);\r\n\r\nI get the following exception:\r\n```\r\njava.sql.SQLNonTransientConnectionException: Default algorithm definitions for TrustManager and/or KeyManager are invalid.  Check java security properties file.\r\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)\r\n\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:70)\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828)\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:448)\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)\r\n\tat com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)\r\n\tat java.sql/java.sql.DriverManager.getConnection(DriverManager.java:677)\r\n\tat java.sql/java.sql.DriverManager.getConnection(DriverManager.java:189)\r\n\tat com.hp.usage.db.migration.DBMigrator.getConnection(DBMigrator.java:235)\r\n\tat com.hp.usage.db.migration.DBMigrator.connect(DBMigrator.java:76)\r\n\tat com.hp.usage.db.migration.DBMigratorHandler.doConnect(DBMigratorHandler.java:410)\r\n\tat com.hp.usage.db.migration.DBMigratorHandler.execute(DBMigratorHandler.java:71)\r\n\tat com.hp.usage.console.framework.CommandContextImpl.executeInternal(CommandContextImpl.java:274)\r\n\tat com.hp.usage.console.framework.ApplicationContextImpl.executeBatch(ApplicationContextImpl.java:409)\r\n\tat com.hp.usage.console.framework.ApplicationContextImpl.executeInternal(ApplicationContextImpl.java:310)\r\n\tat com.hp.usage.console.framework.ApplicationContextImpl.executeInteractive(ApplicationContextImpl.java:227)\r\n\tat com.hp.usage.console.spring.Main.executeInteractive(Main.java:96)\r\n\tat com.hp.usage.console.spring.Main.executeCli(Main.java:69)\r\n\tat com.hp.siu.loader.Command.executeCLI(Command.java:159)\r\n\tat com.hp.siu.loader.Command.execute(Command.java:103)\r\n\tat com.hp.siu.loader.CommandLaunch.run(CommandLaunch.java:64)\r\n\tat com.hp.siu.loader.CommandLaunch.run(CommandLaunch.java:102)\r\n\tat com.hp.siu.loader.CommandLaunch.main(CommandLaunch.java:108)\r\nCaused by: com.mysql.cj.exceptions.SSLParamsException: Default algorithm definitions for TrustManager and/or KeyManager are invalid.  Check java security properties file.\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)\r\n\tat com.mysql.cj.protocol.ExportControlled.getSSLContext(ExportControlled.java:546)\r\n\tat com.mysql.cj.protocol.ExportControlled.performTlsHandshake(ExportControlled.java:333)\r\n\tat com.mysql.cj.protocol.StandardSocketFactory.performTlsHandshake(StandardSocketFactory.java:191)\r\n\tat com.mysql.cj.protocol.a.NativeSocketConnection.performTlsHandshake(NativeSocketConnection.java:101)\r\n\tat com.mysql.cj.protocol.a.NativeProtocol.negotiateSSLConnection(NativeProtocol.java:369)\r\n\tat com.mysql.cj.protocol.a.NativeAuthenticationProvider.connect(NativeAuthenticationProvider.java:205)\r\n\tat com.mysql.cj.protocol.a.NativeProtocol.connect(NativeProtocol.java:1433)\r\n\tat com.mysql.cj.NativeSession.connect(NativeSession.java:133)\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:948)\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:818)\r\n\t... 20 more\r\n**Caused by: java.security.NoSuchAlgorithmException: SunX509 KeyManagerFactory not available**\r\n\tat java.base/sun.security.jca.GetInstance.getInstance(GetInstance.java:159)\r\n\tat java.base/javax.net.ssl.KeyManagerFactory.getInstance(KeyManagerFactory.java:148)\r\n\tat com.mysql.cj.protocol.ExportControlled.getSSLContext(ExportControlled.java:544)\r\n\t... 29 more\r\n```\r\nHow can I fix this exception?","title":"MYSQL JDBC throws ava.sql.SQLNonTransientConnectionException: Default algorithm definitions for TrustManager and/or KeyManager are invalid","body":"<p>Mysql JDBC driver throws following exceptions with useSSL=true Properties in fips enables ENV.</p>\n<p>The follwing is code for get connection:</p>\n<pre><code>    Properties props = new Properties();\n    props.setProperty(&quot;user&quot;, user_);\n    props.setProperty(&quot;password&quot;, password_);\n    \n    if (dbUurl_.contains(&quot;mysql&quot;)) {\n        props.put(&quot;useSSL&quot;, &quot;true&quot;);\n        props.put(&quot;verifyServerCertificate&quot;, &quot;false&quot;);\n    }\n    return DriverManager.getConnection(dbUurl_, props);\n</code></pre>\n<p>I get the following exception:</p>\n<pre><code>java.sql.SQLNonTransientConnectionException: Default algorithm definitions for TrustManager and/or KeyManager are invalid.  Check java security properties file.\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:70)\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828)\n    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:448)\n    at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)\n    at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)\n    at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:677)\n    at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:189)\n    at com.hp.usage.db.migration.DBMigrator.getConnection(DBMigrator.java:235)\n    at com.hp.usage.db.migration.DBMigrator.connect(DBMigrator.java:76)\n    at com.hp.usage.db.migration.DBMigratorHandler.doConnect(DBMigratorHandler.java:410)\n    at com.hp.usage.db.migration.DBMigratorHandler.execute(DBMigratorHandler.java:71)\n    at com.hp.usage.console.framework.CommandContextImpl.executeInternal(CommandContextImpl.java:274)\n    at com.hp.usage.console.framework.ApplicationContextImpl.executeBatch(ApplicationContextImpl.java:409)\n    at com.hp.usage.console.framework.ApplicationContextImpl.executeInternal(ApplicationContextImpl.java:310)\n    at com.hp.usage.console.framework.ApplicationContextImpl.executeInteractive(ApplicationContextImpl.java:227)\n    at com.hp.usage.console.spring.Main.executeInteractive(Main.java:96)\n    at com.hp.usage.console.spring.Main.executeCli(Main.java:69)\n    at com.hp.siu.loader.Command.executeCLI(Command.java:159)\n    at com.hp.siu.loader.Command.execute(Command.java:103)\n    at com.hp.siu.loader.CommandLaunch.run(CommandLaunch.java:64)\n    at com.hp.siu.loader.CommandLaunch.run(CommandLaunch.java:102)\n    at com.hp.siu.loader.CommandLaunch.main(CommandLaunch.java:108)\nCaused by: com.mysql.cj.exceptions.SSLParamsException: Default algorithm definitions for TrustManager and/or KeyManager are invalid.  Check java security properties file.\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)\n    at com.mysql.cj.protocol.ExportControlled.getSSLContext(ExportControlled.java:546)\n    at com.mysql.cj.protocol.ExportControlled.performTlsHandshake(ExportControlled.java:333)\n    at com.mysql.cj.protocol.StandardSocketFactory.performTlsHandshake(StandardSocketFactory.java:191)\n    at com.mysql.cj.protocol.a.NativeSocketConnection.performTlsHandshake(NativeSocketConnection.java:101)\n    at com.mysql.cj.protocol.a.NativeProtocol.negotiateSSLConnection(NativeProtocol.java:369)\n    at com.mysql.cj.protocol.a.NativeAuthenticationProvider.connect(NativeAuthenticationProvider.java:205)\n    at com.mysql.cj.protocol.a.NativeProtocol.connect(NativeProtocol.java:1433)\n    at com.mysql.cj.NativeSession.connect(NativeSession.java:133)\n    at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:948)\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:818)\n    ... 20 more\n**Caused by: java.security.NoSuchAlgorithmException: SunX509 KeyManagerFactory not available**\n    at java.base/sun.security.jca.GetInstance.getInstance(GetInstance.java:159)\n    at java.base/javax.net.ssl.KeyManagerFactory.getInstance(KeyManagerFactory.java:148)\n    at com.mysql.cj.protocol.ExportControlled.getSSLContext(ExportControlled.java:544)\n    ... 29 more\n</code></pre>\n<p>How can I fix this exception?</p>\n"},{"tags":["java","android","firebase","android-gradle-plugin","firebase-performance"],"comments":[{"owner":{"account_id":426109,"reputation":302012,"user_id":807126,"display_name":"Doug Stevenson"},"score":1,"creation_date":1511132961,"post_id":47380524,"comment_id":81718728,"body_markdown":"There is a post-compilation phase when using Firebase Performance on Android.  It has to look at all of your app&#39;s class files.  This is normal.","body":"There is a post-compilation phase when using Firebase Performance on Android.  It has to look at all of your app&#39;s class files.  This is normal."},{"owner":{"account_id":460737,"reputation":640,"user_id":862024,"accept_rate":67,"display_name":"Martin Rajniak"},"score":0,"creation_date":1524060172,"post_id":47380524,"comment_id":86818837,"body_markdown":"@DougStevenson is it possible to not do this and use no-op variant in some builds? e.g. debug build used during development?","body":"@DougStevenson is it possible to not do this and use no-op variant in some builds? e.g. debug build used during development?"}],"answers":[{"tags":[],"owner":{"account_id":2345743,"reputation":966,"user_id":2056054,"display_name":"Ivan Kravchenko"},"down_vote_count":0,"up_vote_count":60,"is_accepted":true,"score":60,"last_activity_date":1571650169,"creation_date":1514388368,"answer_id":47994657,"question_id":47380524,"body_markdown":"Firebase in our project caused 40% build time increase. To speed up debug builds we added a possibility to switch it on/off using build parameters in app/build.gradle and root build.gradle files:\r\n\r\napp:\r\n\r\n    if (!project.hasProperty(&quot;disable-performance-plugin&quot;))  {\r\n        apply plugin: &#39;com.google.firebase.firebase-perf&#39; \r\n    }\r\n\r\nroot/buildscript/dependencies:\r\n\r\n    if (!project.hasProperty(&quot;disable-performance-plugin&quot;)) {\r\n        classpath(&#39;com.google.firebase:firebase-plugins:1.1.5&#39;) {\r\n            exclude group: &#39;com.google.guava&#39;, module: &#39;guava-jdk5&#39;\r\n        }\r\n    }\r\n\r\n\r\nwhen running from the command line use\r\n\r\n    ./gradlew your-task  -Pdisable-performance-plugin\r\n\r\nwhen working from Android Studio, add the flag to compiler options:\r\n\r\n[![Android Studio compiler options][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lH3w2.png","title":"Firebase Performance Plugin causing slow build time","body":"<p>Firebase in our project caused 40% build time increase. To speed up debug builds we added a possibility to switch it on/off using build parameters in app/build.gradle and root build.gradle files:</p>\n\n<p>app:</p>\n\n<pre><code>if (!project.hasProperty(\"disable-performance-plugin\"))  {\n    apply plugin: 'com.google.firebase.firebase-perf' \n}\n</code></pre>\n\n<p>root/buildscript/dependencies:</p>\n\n<pre><code>if (!project.hasProperty(\"disable-performance-plugin\")) {\n    classpath('com.google.firebase:firebase-plugins:1.1.5') {\n        exclude group: 'com.google.guava', module: 'guava-jdk5'\n    }\n}\n</code></pre>\n\n<p>when running from the command line use</p>\n\n<pre><code>./gradlew your-task  -Pdisable-performance-plugin\n</code></pre>\n\n<p>when working from Android Studio, add the flag to compiler options:</p>\n\n<p><a href=\"https://i.stack.imgur.com/lH3w2.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/lH3w2.png\" alt=\"Android Studio compiler options\"></a></p>\n"},{"tags":[],"owner":{"account_id":8696509,"reputation":20080,"user_id":6507689,"accept_rate":86,"display_name":"R. Zag&#243;rski"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1530880967,"creation_date":1530874035,"answer_id":51208713,"question_id":47380524,"body_markdown":"Just to give another option to disable `transformClassesWithFirebasePerformancePluginForDebug`, here&#39;s my recipe:\r\n\r\nIn main build.gradle folder:\r\n\r\n    if (!project.gradle.startParameter.taskNames.any { taskName -&gt;\r\n         taskName.toLowerCase().contains(&#39;assemble&#39;) &amp;&amp; taskName.toLowerCase().contains(&#39;debug&#39;) }) {\r\n         classpath(&quot;com.google.firebase:firebase-plugins:$firebasePluginVersion&quot;) {\r\n             exclude group: &#39;com.google.guava&#39;, module: &#39;guava-jdk5&#39;\r\n         }\r\n    }\r\n\r\n\r\nIn the build.gradle app file:\r\n\r\n    if (!project.gradle.startParameter.taskNames.any { taskName -&gt;\r\n        taskName.toLowerCase().contains(&#39;assemble&#39;) &amp;&amp; taskName.toLowerCase().contains(&#39;debug&#39;) }) {\r\n        apply plugin: &#39;com.google.firebase.firebase-perf&#39;\r\n    }\r\n\r\n","title":"Firebase Performance Plugin causing slow build time","body":"<p>Just to give another option to disable <code>transformClassesWithFirebasePerformancePluginForDebug</code>, here's my recipe:</p>\n\n<p>In main build.gradle folder:</p>\n\n<pre><code>if (!project.gradle.startParameter.taskNames.any { taskName -&gt;\n     taskName.toLowerCase().contains('assemble') &amp;&amp; taskName.toLowerCase().contains('debug') }) {\n     classpath(\"com.google.firebase:firebase-plugins:$firebasePluginVersion\") {\n         exclude group: 'com.google.guava', module: 'guava-jdk5'\n     }\n}\n</code></pre>\n\n<p>In the build.gradle app file:</p>\n\n<pre><code>if (!project.gradle.startParameter.taskNames.any { taskName -&gt;\n    taskName.toLowerCase().contains('assemble') &amp;&amp; taskName.toLowerCase().contains('debug') }) {\n    apply plugin: 'com.google.firebase.firebase-perf'\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10992503,"reputation":61,"user_id":8075929,"display_name":"Inirit"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1539628747,"creation_date":1539628747,"answer_id":52822876,"question_id":47380524,"body_markdown":"I ran into this problem as well. Originally we had been using a variant of the answer provided by R. Zag&#243;rski, but based on a [similar thread](https://discuss.gradle.org/t/how-to-apply-plugin-based-on-build-type-android/15265/2?u=jffiorillo) from the Gradle forums it seems like conditionally applying a plugin to a project isn&#39;t the right way to go:\r\n\r\n&gt; Plugins can’t be applied to only “part of your project”. They are either applied or not.\r\n\r\nConditionally applying plugins does seem to work if you can do it right, but it&#39;s not an officially supported feature. Further down the same thread, another point is made:\r\n\r\n&gt; But the plugin should allow you to configure it at a finer grained level.\r\n\r\nSure enough, there actually is a property exposed by the Firebase plugin that lets you toggle instrumentation on or off (therefore toggling the increased build time). Using this property is tricky, though, since you have to apply it at exactly the right time during the building process, but once you&#39;ve got that then you can essentially pivot it on whatever you want.\r\n\r\nThe following code snippet is how we&#39;re pivoting instrumentation based on Debug vs. Non-Debug build variants. It&#39;s written in Kotlin, but I imagine it would translate to Groovy just as well:\r\n\r\n\r\n    plugins {\r\n        ...\r\n    \tid (&quot;com.google.firebase.firebase-perf&quot;)\r\n    }\r\n    \r\n    ...\r\n    \r\n    android {\r\n        ...\r\n\r\n        applicationVariants.all {\r\n\t\t    val variant = this\r\n\t\t    val isFirebaseEnabled = !variant.javaCompiler.name.contains(&quot;Debug&quot;, true)\r\n\r\n    \t\tgradle.taskGraph.whenReady {\r\n\t    \t\tif (this.hasTask(variant.javaCompiler))\r\n\t\t    \t{\r\n    \t\t\t\tproject.FirebasePerformance.isInstrumentationEnabled = isFirebaseEnabled\r\n\t    \t\t}\r\n\t    \t}\r\n\t    }\r\n\r\n        ...\r\n    }\r\n\r\nNote that with this in place, the `transformClassesWithFirebasePerformancePluginFor*` task will still always run for every build variant, but it will complete almost immediately for a variant that doesn&#39;t have instrumentation enabled.","title":"Firebase Performance Plugin causing slow build time","body":"<p>I ran into this problem as well. Originally we had been using a variant of the answer provided by R. Zagórski, but based on a <a href=\"https://discuss.gradle.org/t/how-to-apply-plugin-based-on-build-type-android/15265/2?u=jffiorillo\" rel=\"noreferrer\">similar thread</a> from the Gradle forums it seems like conditionally applying a plugin to a project isn't the right way to go:</p>\n\n<blockquote>\n  <p>Plugins can’t be applied to only “part of your project”. They are either applied or not.</p>\n</blockquote>\n\n<p>Conditionally applying plugins does seem to work if you can do it right, but it's not an officially supported feature. Further down the same thread, another point is made:</p>\n\n<blockquote>\n  <p>But the plugin should allow you to configure it at a finer grained level.</p>\n</blockquote>\n\n<p>Sure enough, there actually is a property exposed by the Firebase plugin that lets you toggle instrumentation on or off (therefore toggling the increased build time). Using this property is tricky, though, since you have to apply it at exactly the right time during the building process, but once you've got that then you can essentially pivot it on whatever you want.</p>\n\n<p>The following code snippet is how we're pivoting instrumentation based on Debug vs. Non-Debug build variants. It's written in Kotlin, but I imagine it would translate to Groovy just as well:</p>\n\n<pre><code>plugins {\n    ...\n    id (\"com.google.firebase.firebase-perf\")\n}\n\n...\n\nandroid {\n    ...\n\n    applicationVariants.all {\n        val variant = this\n        val isFirebaseEnabled = !variant.javaCompiler.name.contains(\"Debug\", true)\n\n        gradle.taskGraph.whenReady {\n            if (this.hasTask(variant.javaCompiler))\n            {\n                project.FirebasePerformance.isInstrumentationEnabled = isFirebaseEnabled\n            }\n        }\n    }\n\n    ...\n}\n</code></pre>\n\n<p>Note that with this in place, the <code>transformClassesWithFirebasePerformancePluginFor*</code> task will still always run for every build variant, but it will complete almost immediately for a variant that doesn't have instrumentation enabled.</p>\n"},{"tags":[],"owner":{"account_id":4371874,"reputation":634,"user_id":3566013,"display_name":"qwertyfinger"},"down_vote_count":0,"up_vote_count":41,"is_accepted":false,"score":41,"last_activity_date":1553775001,"creation_date":1542058998,"answer_id":53270530,"question_id":47380524,"body_markdown":"All of the existing answers are valid, but they all miss something.\r\n\r\nTo deal with this issue, you have 2 major options to choose from.\r\n\r\n&lt;h3&gt;1.  Use &lt;code&gt;firebasePerformanceInstrumentationEnabled&lt;/code&gt; property&lt;/h3&gt;\r\n\r\nThis is [the official way provided by the SDK][1] itself to disable it during the build process.\r\n\r\n**What this does:**\r\n\r\n- Reduces `transformClassesWithFirebasePerformancePluginFor*` task execution time to **~5-10s**.\r\n- Disables **automatic** traces and request monitoring, but leaves **custom** traces enabled. You can control the latter with AndroidManifest `&lt;meta-data&gt;` tags and calls to `FirebasePerformance.getInstance().setPerformanceCollectionEnabled()`. More info in [the docs][2].\r\n\r\n**How to do this:**\r\n\r\nI think it&#39;s much easier to **only enable** plugin in those rare cases **when we need it** (usually it will be only when we publish the app) rather than disable it in all other cases. \r\n \r\n*Note: Of course, with manual builds you **might forget** to enable it. So if you don&#39;t have CI, it might be worth adding some other automatic scripting in Gradle, or sticking to the opposite approach that is used in other answers.*\r\n\r\nIn general though, we only need two steps:\r\n\r\n 1. Add the following line to `gradle.properties` file:  \r\n\r\n        firebasePerformanceInstrumentationEnabled=false\r\n\r\n 2. Use the following command in your CI config or manual builds:\r\n\r\n    &gt; ./gradlew assembleRelease -PfirebasePerformanceInstrumentationEnabled=true\r\n\r\n**Pros:**\r\n\r\n- Only one property to set up.\r\n\r\n**Cons:**\r\n\r\n- Plugin still adds additional ~5-15s to the build time.\r\n\r\n&lt;h3&gt;2. Use custom Gradle project property to avoid applying &lt;code&gt;firebase-perf&lt;/code&gt; Gradle plugin&lt;/h3&gt;\r\n\r\n**What this does:**\r\n\r\n- transformClassesWithFirebasePerformancePluginFor* task is **not executed at all**. Also we save some additional ~5–10s overhead that is present when using the first solution.\r\n- Same as the first method – disables **automatic** traces and request monitoring, but leaves **custom** traces enabled. You can control the latter with AndroidManifest `&lt;meta-data&gt;` tags and calls to `FirebasePerformance.getInstance().setPerformanceCollectionEnabled()`. More info in [the docs][2].\r\n\r\n**How to do this:**\r\n\r\nThis approach has similar points and warnings, and also includes two steps:\r\n\r\n 1. Modify your app module&#39;s `build.gradle` file:\r\n\r\n        if (project.hasProperty(&#39;useFirebasePerf&#39;)) {\r\n          apply plugin: &#39;com.google.firebase.firebase-perf&#39;\r\n        }\r\n    ***Note:*** you **don&#39;t need** to apply the same check to your project-level `build.gradle`:\r\n\r\n        classpath &quot;com.google.firebase:firebase-plugins:$firebase_plugins_version&quot;\r\n    This declaration won&#39;t be used in any way by Gradle when the plugin itself is not enabled.\r\n\r\n    And you **don&#39;t need** to exclude `guava-jdk5` dependency there, if you&#39;re using firebase-plugins v1.1.1 or later as [stated in the docs][3].\r\n 2. Use the following command in your CI config or manual builds:\r\n\r\n    &gt; ./gradlew assembleRelease -PuseFirebasePerf\r\n\r\n**Pros:**\r\n\r\n- **Completely** eliminates time expenses associated with Firebase Performance Gradle plugin.\r\n\r\n**Cons:**\r\n\r\n- Introduces conditional check for applying plugin in your Gradle script, [some might argue][4] that it&#39;s not an idiomatic approach.\r\n\r\n&lt;h3&gt;* (Bonus option) Use custom Gradle project property to exclude &lt;code&gt;firebase-perf&lt;/code&gt; SDK&lt;/h3&gt;\r\n\r\nIf you don&#39;t use custom traces or any other features from Firebase Performance SDK and only rely on automatic monitoring (that is, you don&#39;t have any dependencies on SDK in your code), then you can exclude this dependency for non-production builds.\r\n\r\n**How to do this:**\r\n\r\nAll you need to do is update your app module&#39;s `build.gradle` file:\r\n\r\n- If you chose to use the first option, then change your dependency like this:\r\n\r\n        if (project.property(&#39;firebasePerformanceInstrumentationEnabled&#39;) == &#39;true&#39;) {\r\n          implementation &quot;com.google.firebase:firebase-perf:${firebase_perf_version}&quot;\r\n        }\r\n\r\n- If you chose the second one:\r\n\r\n        if (project.hasProperty(&#39;useFirebasePerf&#39;)) {\r\n          implementation &quot;com.google.firebase:firebase-perf:${firebase_perf_version}&quot;\r\n        }\r\n\r\n**Advantage:**\r\n\r\n - This might save you some additional **~5-10s**, spent on configuring dependency and \r\n&quot;ProGuarding&quot; it.\r\n\r\n**Drawbacks:**\r\n\r\n- Your production APK size will be larger than debug one by ~0.5mb. This might disrupt your reports or predictions, so you need to be aware of it.\r\n- If you were close to surpassing 64K method count limit, you might suddenly step over it on production builds and find yourself in the MultiDex zone. And that means extra work to do and tests to run. All because Firebase Performance brings a formidable number of almost 5K method references (after applying ProGuard with optimizations). \r\n\r\nYou can also check out [my article][5] where I expand a bit more on this topic.\r\n\r\n\r\n  [1]: https://firebase.google.com/docs/perf-mon/disable-sdk#android\r\n  [2]: https://firebase.google.com/docs/reference/android/com/google/firebase/perf/FirebasePerformance.html#setPerformanceCollectionEnabled(boolean)\r\n  [3]: https://firebase.google.com/docs/perf-mon/get-started-android#known_issues\r\n  [4]: https://stackoverflow.com/a/52822876/3566013\r\n  [5]: https://proandroiddev.com/hidden-costs-of-firebase-performance-and-how-to-avoid-them-a54f96bafcb1","title":"Firebase Performance Plugin causing slow build time","body":"<p>All of the existing answers are valid, but they all miss something.</p>\n\n<p>To deal with this issue, you have 2 major options to choose from.</p>\n\n<h3>1.  Use <code>firebasePerformanceInstrumentationEnabled</code> property</h3>\n\n<p>This is <a href=\"https://firebase.google.com/docs/perf-mon/disable-sdk#android\" rel=\"noreferrer\">the official way provided by the SDK</a> itself to disable it during the build process.</p>\n\n<p><strong>What this does:</strong></p>\n\n<ul>\n<li>Reduces <code>transformClassesWithFirebasePerformancePluginFor*</code> task execution time to <strong>~5-10s</strong>.</li>\n<li>Disables <strong>automatic</strong> traces and request monitoring, but leaves <strong>custom</strong> traces enabled. You can control the latter with AndroidManifest <code>&lt;meta-data&gt;</code> tags and calls to <code>FirebasePerformance.getInstance().setPerformanceCollectionEnabled()</code>. More info in <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/perf/FirebasePerformance.html#setPerformanceCollectionEnabled(boolean)\" rel=\"noreferrer\">the docs</a>.</li>\n</ul>\n\n<p><strong>How to do this:</strong></p>\n\n<p>I think it's much easier to <strong>only enable</strong> plugin in those rare cases <strong>when we need it</strong> (usually it will be only when we publish the app) rather than disable it in all other cases. </p>\n\n<p><em>Note: Of course, with manual builds you <strong>might forget</strong> to enable it. So if you don't have CI, it might be worth adding some other automatic scripting in Gradle, or sticking to the opposite approach that is used in other answers.</em></p>\n\n<p>In general though, we only need two steps:</p>\n\n<ol>\n<li><p>Add the following line to <code>gradle.properties</code> file:  </p>\n\n<pre><code>firebasePerformanceInstrumentationEnabled=false\n</code></pre></li>\n<li><p>Use the following command in your CI config or manual builds:</p>\n\n<blockquote>\n  <p>./gradlew assembleRelease -PfirebasePerformanceInstrumentationEnabled=true</p>\n</blockquote></li>\n</ol>\n\n<p><strong>Pros:</strong></p>\n\n<ul>\n<li>Only one property to set up.</li>\n</ul>\n\n<p><strong>Cons:</strong></p>\n\n<ul>\n<li>Plugin still adds additional ~5-15s to the build time.</li>\n</ul>\n\n<h3>2. Use custom Gradle project property to avoid applying <code>firebase-perf</code> Gradle plugin</h3>\n\n<p><strong>What this does:</strong></p>\n\n<ul>\n<li>transformClassesWithFirebasePerformancePluginFor* task is <strong>not executed at all</strong>. Also we save some additional ~5–10s overhead that is present when using the first solution.</li>\n<li>Same as the first method – disables <strong>automatic</strong> traces and request monitoring, but leaves <strong>custom</strong> traces enabled. You can control the latter with AndroidManifest <code>&lt;meta-data&gt;</code> tags and calls to <code>FirebasePerformance.getInstance().setPerformanceCollectionEnabled()</code>. More info in <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/perf/FirebasePerformance.html#setPerformanceCollectionEnabled(boolean)\" rel=\"noreferrer\">the docs</a>.</li>\n</ul>\n\n<p><strong>How to do this:</strong></p>\n\n<p>This approach has similar points and warnings, and also includes two steps:</p>\n\n<ol>\n<li><p>Modify your app module's <code>build.gradle</code> file:</p>\n\n<pre><code>if (project.hasProperty('useFirebasePerf')) {\n  apply plugin: 'com.google.firebase.firebase-perf'\n}\n</code></pre>\n\n<p><strong><em>Note:</em></strong> you <strong>don't need</strong> to apply the same check to your project-level <code>build.gradle</code>:</p>\n\n<pre><code>classpath \"com.google.firebase:firebase-plugins:$firebase_plugins_version\"\n</code></pre>\n\n<p>This declaration won't be used in any way by Gradle when the plugin itself is not enabled.</p>\n\n<p>And you <strong>don't need</strong> to exclude <code>guava-jdk5</code> dependency there, if you're using firebase-plugins v1.1.1 or later as <a href=\"https://firebase.google.com/docs/perf-mon/get-started-android#known_issues\" rel=\"noreferrer\">stated in the docs</a>.</p></li>\n<li><p>Use the following command in your CI config or manual builds:</p>\n\n<blockquote>\n  <p>./gradlew assembleRelease -PuseFirebasePerf</p>\n</blockquote></li>\n</ol>\n\n<p><strong>Pros:</strong></p>\n\n<ul>\n<li><strong>Completely</strong> eliminates time expenses associated with Firebase Performance Gradle plugin.</li>\n</ul>\n\n<p><strong>Cons:</strong></p>\n\n<ul>\n<li>Introduces conditional check for applying plugin in your Gradle script, <a href=\"https://stackoverflow.com/a/52822876/3566013\">some might argue</a> that it's not an idiomatic approach.</li>\n</ul>\n\n<h3>* (Bonus option) Use custom Gradle project property to exclude <code>firebase-perf</code> SDK</h3>\n\n<p>If you don't use custom traces or any other features from Firebase Performance SDK and only rely on automatic monitoring (that is, you don't have any dependencies on SDK in your code), then you can exclude this dependency for non-production builds.</p>\n\n<p><strong>How to do this:</strong></p>\n\n<p>All you need to do is update your app module's <code>build.gradle</code> file:</p>\n\n<ul>\n<li><p>If you chose to use the first option, then change your dependency like this:</p>\n\n<pre><code>if (project.property('firebasePerformanceInstrumentationEnabled') == 'true') {\n  implementation \"com.google.firebase:firebase-perf:${firebase_perf_version}\"\n}\n</code></pre></li>\n<li><p>If you chose the second one:</p>\n\n<pre><code>if (project.hasProperty('useFirebasePerf')) {\n  implementation \"com.google.firebase:firebase-perf:${firebase_perf_version}\"\n}\n</code></pre></li>\n</ul>\n\n<p><strong>Advantage:</strong></p>\n\n<ul>\n<li>This might save you some additional <strong>~5-10s</strong>, spent on configuring dependency and \n\"ProGuarding\" it.</li>\n</ul>\n\n<p><strong>Drawbacks:</strong></p>\n\n<ul>\n<li>Your production APK size will be larger than debug one by ~0.5mb. This might disrupt your reports or predictions, so you need to be aware of it.</li>\n<li>If you were close to surpassing 64K method count limit, you might suddenly step over it on production builds and find yourself in the MultiDex zone. And that means extra work to do and tests to run. All because Firebase Performance brings a formidable number of almost 5K method references (after applying ProGuard with optimizations). </li>\n</ul>\n\n<p>You can also check out <a href=\"https://proandroiddev.com/hidden-costs-of-firebase-performance-and-how-to-avoid-them-a54f96bafcb1\" rel=\"noreferrer\">my article</a> where I expand a bit more on this topic.</p>\n"},{"tags":[],"owner":{"account_id":133099,"reputation":11077,"user_id":334209,"accept_rate":82,"display_name":"Romain Piel"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1547478950,"creation_date":1547478950,"answer_id":54184202,"question_id":47380524,"body_markdown":"All comments in this thread are valid. I want to suggest a very simple way to disable that for debug builds:\r\n\r\n    if (getGradle().getStartParameter().getTaskRequests().toString().contains(&quot;Release&quot;)) {\r\n        apply plugin: &#39;com.google.firebase.firebase-perf&#39;\r\n    }","title":"Firebase Performance Plugin causing slow build time","body":"<p>All comments in this thread are valid. I want to suggest a very simple way to disable that for debug builds:</p>\n\n<pre><code>if (getGradle().getStartParameter().getTaskRequests().toString().contains(\"Release\")) {\n    apply plugin: 'com.google.firebase.firebase-perf'\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1796123,"reputation":3966,"user_id":1635488,"accept_rate":40,"display_name":"android_dev"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1553838723,"creation_date":1553838723,"answer_id":55411240,"question_id":47380524,"body_markdown":"I have simplified option 2 of this answer https://stackoverflow.com/a/53270530/1635488\r\n\r\n\r\n - Define a property in `gradle.properties`\r\n\r\n    **useFirebasePerf=false**\r\n\r\n - Disable perf plugin\r\n\r\n    **if (useFirebasePerf.toBoolean()) {\r\n        apply plugin: &#39;com.google.firebase.firebase-perf&#39;\r\n    }**\r\n\r\n - Remove dependency \r\n\r\n    **if (useFirebasePerf.toBoolean()) {\r\n        implementation &#39;com.google.firebase:firebase-perf:16.2.3&#39;\r\n    }**\r\n\r\n - Enable Performance Monitoring only for CI builds (i would recommend only for release builds)\r\n\r\n    **gradlew assembleRelease -PuseFirebasePerf=true**","title":"Firebase Performance Plugin causing slow build time","body":"<p>I have simplified option 2 of this answer <a href=\"https://stackoverflow.com/a/53270530/1635488\">https://stackoverflow.com/a/53270530/1635488</a></p>\n\n<ul>\n<li><p>Define a property in <code>gradle.properties</code></p>\n\n<p><strong>useFirebasePerf=false</strong></p></li>\n<li><p>Disable perf plugin</p>\n\n<p><strong>if (useFirebasePerf.toBoolean()) {\n    apply plugin: 'com.google.firebase.firebase-perf'\n}</strong></p></li>\n<li><p>Remove dependency </p>\n\n<p><strong>if (useFirebasePerf.toBoolean()) {\n    implementation 'com.google.firebase:firebase-perf:16.2.3'\n}</strong></p></li>\n<li><p>Enable Performance Monitoring only for CI builds (i would recommend only for release builds)</p>\n\n<p><strong>gradlew assembleRelease -PuseFirebasePerf=true</strong></p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":7790718,"reputation":341,"user_id":5893767,"display_name":"Ramanpreet Singh Khinda"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1618569547,"creation_date":1562870102,"answer_id":56995410,"question_id":47380524,"body_markdown":"**Firebase Performance** has released a new version of `perf-plugin` (**v1.3.0**). This would enable **disabling** the Firebase Performance Monitoring Gradle plugin **for a specific build variant** (including *buildTypes* or *productFlavors*).\r\n\r\nAn example below:\r\n\r\n   \r\n\r\n     android {\r\n          // ...\r\n        \r\n          debug {\r\n            FirebasePerformance {\r\n              // Set this flag to &#39;false&#39; to disable @AddTrace annotation processing and\r\n              // automatic HTTP/S network request monitoring\r\n              // for a specific build variant at compile time.\r\n              instrumentationEnabled false\r\n            }\r\n          }\r\n        }\r\n\r\n**Reference to release notes:**\r\n\r\nhttps://firebase.google.com/support/release-notes/android#2019-07-10","title":"Firebase Performance Plugin causing slow build time","body":"<p><strong>Firebase Performance</strong> has released a new version of <code>perf-plugin</code> (<strong>v1.3.0</strong>). This would enable <strong>disabling</strong> the Firebase Performance Monitoring Gradle plugin <strong>for a specific build variant</strong> (including <em>buildTypes</em> or <em>productFlavors</em>).</p>\n<p>An example below:</p>\n<pre><code> android {\n      // ...\n    \n      debug {\n        FirebasePerformance {\n          // Set this flag to 'false' to disable @AddTrace annotation processing and\n          // automatic HTTP/S network request monitoring\n          // for a specific build variant at compile time.\n          instrumentationEnabled false\n        }\n      }\n    }\n</code></pre>\n<p><strong>Reference to release notes:</strong></p>\n<p><a href=\"https://firebase.google.com/support/release-notes/android#2019-07-10\" rel=\"noreferrer\">https://firebase.google.com/support/release-notes/android#2019-07-10</a></p>\n"},{"tags":[],"owner":{"account_id":3575346,"reputation":1330,"user_id":2984747,"display_name":"codeWhisperer"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1565616883,"creation_date":1565535762,"answer_id":57451108,"question_id":47380524,"body_markdown":"For newer versions of the Firebase perf plugin (`1.3.0` and up) with Kotlin DSL you&#39;ll need to add the following:\r\n```\r\nandroid {\r\n  ...\r\n  buildTypes {\r\n    ...\r\n    all {   \r\n      with((this as ExtensionAware).extensions[&quot;FirebasePerformance&quot;] as FirebasePerfExtension) {\r\n        setInstrumentationEnabled(!isDebuggable)\r\n      }     \r\n    }\r\n    ...\r\n  }\r\n\r\n}\r\n```\r\n\r\nFor the Groovy version you can check out the [Firebase documentation](https://firebase.google.com/docs/perf-mon/disable-sdk).\r\n\r\n\r\n","title":"Firebase Performance Plugin causing slow build time","body":"<p>For newer versions of the Firebase perf plugin (<code>1.3.0</code> and up) with Kotlin DSL you'll need to add the following:</p>\n\n<pre><code>android {\n  ...\n  buildTypes {\n    ...\n    all {   \n      with((this as ExtensionAware).extensions[\"FirebasePerformance\"] as FirebasePerfExtension) {\n        setInstrumentationEnabled(!isDebuggable)\n      }     \n    }\n    ...\n  }\n\n}\n</code></pre>\n\n<p>For the Groovy version you can check out the <a href=\"https://firebase.google.com/docs/perf-mon/disable-sdk\" rel=\"noreferrer\">Firebase documentation</a>.</p>\n"},{"tags":[],"owner":{"account_id":4908823,"reputation":21,"user_id":3954714,"display_name":"洪彥彬"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1592817476,"creation_date":1592817476,"answer_id":62511102,"question_id":47380524,"body_markdown":"A much cleaner way in kotlin DSL\r\n```\r\nbuildTypes {\r\n   //My custom extension\r\n   forName(&quot;debug&quot;) {\r\n      roject.ext.set(&quot;firebasePerformanceInstrumentationEnabled&quot;, &quot;false&quot;)\r\n   }\r\n}\r\n```\r\n\r\nImplementation of forName\r\n```\r\nfun &lt;T&gt; NamedDomainObjectContainer&lt;T&gt;.forName(name: String, action: T.() -&gt; Unit) {\r\n    this.maybeCreate(name)\r\n    this.getByName(name, object: Action&lt;T&gt;{\r\n        override fun execute(t: T) {\r\n            t.action()\r\n        }\r\n    })\r\n}\r\n\r\n```","title":"Firebase Performance Plugin causing slow build time","body":"<p>A much cleaner way in kotlin DSL</p>\n<pre><code>buildTypes {\n   //My custom extension\n   forName(&quot;debug&quot;) {\n      roject.ext.set(&quot;firebasePerformanceInstrumentationEnabled&quot;, &quot;false&quot;)\n   }\n}\n</code></pre>\n<p>Implementation of forName</p>\n<pre><code>fun &lt;T&gt; NamedDomainObjectContainer&lt;T&gt;.forName(name: String, action: T.() -&gt; Unit) {\n    this.maybeCreate(name)\n    this.getByName(name, object: Action&lt;T&gt;{\n        override fun execute(t: T) {\n            t.action()\n        }\n    })\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17861811,"reputation":1847,"user_id":12975134,"display_name":"ycannot"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1676658050,"creation_date":1676658050,"answer_id":75487976,"question_id":47380524,"body_markdown":"I think the clearest way is this with kotlin DSL gradle &#128071;\r\n\r\nin app level build.gradle\r\n\r\n```\r\nbuildTypes {\r\n        getByName(BuildType.DEBUG) {\r\n            extensions.configure&lt;com.google.firebase.perf.plugin.FirebasePerfExtension&gt;{\r\n                setInstrumentationEnabled(false)\r\n            }\r\n        }\r\n}\r\n```\r\n\r\nin dependendencies part:\r\n```\r\ndependencies {\r\n    releaseImplementation(Dependencies.FIREBASE_PERFORMANCE) //implementation for only release mode (you can vary for other variants)\r\n}\r\n```","title":"Firebase Performance Plugin causing slow build time","body":"<p>I think the clearest way is this with kotlin DSL gradle 👇</p>\n<p>in app level build.gradle</p>\n<pre><code>buildTypes {\n        getByName(BuildType.DEBUG) {\n            extensions.configure&lt;com.google.firebase.perf.plugin.FirebasePerfExtension&gt;{\n                setInstrumentationEnabled(false)\n            }\n        }\n}\n</code></pre>\n<p>in dependendencies part:</p>\n<pre><code>dependencies {\n    releaseImplementation(Dependencies.FIREBASE_PERFORMANCE) //implementation for only release mode (you can vary for other variants)\n}\n</code></pre>\n"}],"owner":{"account_id":8536561,"reputation":633,"user_id":6398145,"display_name":"Ian White"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14697,"favorite_count":0,"down_vote_count":0,"up_vote_count":41,"accepted_answer_id":47994657,"answer_count":10,"score":41,"last_activity_date":1676658050,"creation_date":1511116559,"question_id":47380524,"body_markdown":"When using Firebase Performance in Android Studio the gradle task `app:transformClassesWithFirebasePerformancePluginForDebug` is taking significantly longer than any other task and is therefore dramatically slowing down my gradle build times.\r\n\r\n[Slow Build shown in Profiler][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Riqid.png","title":"Firebase Performance Plugin causing slow build time","body":"<p>When using Firebase Performance in Android Studio the gradle task <code>app:transformClassesWithFirebasePerformancePluginForDebug</code> is taking significantly longer than any other task and is therefore dramatically slowing down my gradle build times.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Riqid.png\" rel=\"noreferrer\">Slow Build shown in Profiler</a></p>\n"},{"tags":["java","binary-tree"],"comments":[{"owner":{"account_id":7991,"reputation":205509,"user_id":14104,"display_name":"epascarello"},"score":0,"creation_date":1676657810,"post_id":75487896,"comment_id":133188475,"body_markdown":"That is some weird looking JavaScript. Java is not JavaScirpt.","body":"That is some weird looking JavaScript. Java is not JavaScirpt."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1676660516,"post_id":75487896,"comment_id":133189157,"body_markdown":"Line 81 in the `Main` class seems to be the line `output.setText(inputTree.inOrder());`. There are two possible cases for a NullPointerException there: either `output` is null or `inputTree` is null. Since you initialize `output` when you declare it the problem must be `inputTree`. This field is only initialized when you press &quot;Make Tree&quot; first. Did you do that?","body":"Line 81 in the <code>Main</code> class seems to be the line <code>output.setText(inputTree.inOrder());</code>. There are two possible cases for a NullPointerException there: either <code>output</code> is null or <code>inputTree</code> is null. Since you initialize <code>output</code> when you declare it the problem must be <code>inputTree</code>. This field is only initialized when you press &quot;Make Tree&quot; first. Did you do that?"}],"owner":{"account_id":27710677,"reputation":1,"user_id":21153449,"display_name":"Polina Norman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1676660566,"answer_count":0,"score":0,"last_activity_date":1676657833,"creation_date":1676657520,"question_id":75487896,"body_markdown":"Here is my code, there are three classes and they are separated by the code blocks.\r\nThere is a: Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NullPointerException\r\n        at project3.Main.lambda$0(Main.java:81)\r\n\r\nerror in my code and I am not sure how to fix it.\r\n```\r\npackage project3;\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.awt.event.ActionListener;\r\n\r\npublic class Main extends JFrame {\r\n\r\n    private JTextField input = new JTextField(20), output = new JTextField(30);\r\n        private static BinaryTree inputTree;\r\n\r\n    //main here\r\n    public static void main(String[] args) {\r\n        Main frame = new Main();\r\n        frame.setVisible(true);\r\n    }\r\n\r\n    //===================================================================================\r\n    // Class constructor creates GUI with three panels (input, buttons, and output)\r\n    //===================================================================================\r\n    public Main() {\r\n        super(&quot;Binary Tree Categorizer&quot;);\r\n        setSize(715, 175);\r\n        setLocationRelativeTo(null);\r\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        setLayout(new GridLayout(3, 1));\r\n        JComponent[] inputComponents = {new JLabel(&quot;Enter Expression&quot;), input};\r\n        JComponent[] outputComponents = {new JLabel(&quot;Output&quot;), output};\r\n        JButton[] buttonComponents = {new JButton(&quot;Make Tree&quot;), new JButton(&quot;Is Balanced?&quot;),\r\n                new JButton(&quot;Is Full?&quot;), new JButton(&quot;Is Proper?&quot;), new JButton(&quot;Height&quot;),\r\n                new JButton(&quot;Nodes&quot;), new JButton(&quot;Inorder&quot;)};\r\n        makeFlowPanel(inputComponents);\r\n        makeFlowPanel(buttonComponents);\r\n        makeFlowPanel(outputComponents);\r\n        addActionListeners(buttonComponents);\r\n        output.setEditable(false);\r\n        setResizable(false);\r\n    }\r\n\r\n    //================================================================================================\r\n    // Creates a flow panel from array of components. Borrowed the idea for this method from Prof Jarc\r\n    //================================================================================================\r\n    private void makeFlowPanel(JComponent[] components) {\r\n        JPanel panel = new JPanel(new FlowLayout());\r\n        for (Component component: components) { panel.add(component); }\r\n        add(panel);\r\n    }\r\n    //================================================================================================\r\n    // Adds the ActionListener to the array of buttons passed to it, similar to previous\r\n    //================================================================================================\r\n    private void addActionListeners (JButton[] buttons){\r\n        for (JButton button: buttons){\r\n            button.addActionListener(treeListener);\r\n        }\r\n    }\r\n    //========================================================================================================\r\n    // ActionListener uses switch statement to set output text based on String returned from getActionCommand\r\n    //========================================================================================================\r\n    private final ActionListener treeListener = event -&gt; {\r\n        try {\r\n            switch ((event.getActionCommand())){\r\n                case &quot;Make Tree&quot;:\r\n                    inputTree = new BinaryTree(input.getText());\r\n                    output.setText(inputTree.toString());\r\n                    break;\r\n                case &quot;Is Balanced?&quot;:\r\n                    output.setText(String.valueOf(inputTree.isBalanced()));\r\n                    break;\r\n                case &quot;Is Full?&quot;:\r\n                    output.setText(String.valueOf(inputTree.isFull()));\r\n                    break;\r\n                case &quot;Is Proper?&quot;:\r\n                    output.setText(String.valueOf(inputTree.isProper()));\r\n                    break;\r\n                case &quot;Height&quot;:\r\n                    output.setText(String.valueOf(inputTree.height()));\r\n                    break;\r\n                case &quot;Nodes&quot;:\r\n                    output.setText(String.valueOf(inputTree.nodes()));\r\n                    break;\r\n                case &quot;Inorder&quot;:\r\n                    output.setText(inputTree.inOrder());\r\n                    break;\r\n            }\r\n        } catch (InvalidTreeSyntax except) {\r\n            JOptionPane.showMessageDialog(getParent(),except.getMessage());\r\n        }catch (IndexOutOfBoundsException indexExcept) {\r\n            JOptionPane.showMessageDialog(getParent(),&quot;No input given!&quot;);\r\n        }\r\n    };\r\n}\r\n```\r\n\r\n```\r\npackage project3;\r\n\r\npublic class Node {\r\n    private String info;\r\n    private Node left;\r\n    private Node right;\r\n\r\n    public Node(String info) {this.info = info;}\r\n\r\n    private void addChild(Node child) throws InvalidTreeSyntax{\r\n        if(this.left == null){this.setLeft(child); }\r\n        else if(this.right == null){this.setRight(child);}\r\n        else{throw new InvalidTreeSyntax(&quot;Nodes can only have 2 children!&quot;);}}\r\n        \r\n        //setters for the nodes\r\n        private void setLeft(Node newLeft){left = newLeft;}\r\n        private void setRight(Node newRight){right = newRight;}\r\n\r\n        @Override //calls the recursive method\r\n        public String toString(){ return toString(this);}\r\n        //recursivley printing out the nodes\r\n        private static String toString(Node root){\r\n            return(root == null) ? &quot;&quot; : &quot;(&quot;+ root.info + toString(root.left) + toString(root.right)+ &quot;)&quot;;\r\n        }\r\n    }\r\n```\r\n\r\n\r\n```\r\npackage project3;\r\n\r\npublic class InvalidTreeSyntax extends Exception{\r\n    public InvalidTreeSyntax(){\r\n        super();\r\n    }\r\n    public InvalidTreeSyntax(String message){\r\n        super(message);\r\n    }\r\n}\r\n\r\n```\r\n\r\n```\r\npackage project3;\r\n\r\nimport java.util.EmptyStackException;\r\nimport java.util.Stack;\r\n\r\npublic class BinaryTree {\r\n    Node parent, child; //parent is now synonymous with root\r\n\r\n    //===================================================================================================\r\n    //BianaryTree constructor: Takes the input string and stores it as an array based on the parenthesis\r\n    // loops through using a stack and adds children that fall within the parental parenthesis\r\n    //===================================================================================================\r\n    public BinaryTree(String input) throws InvalidTreeSyntax{\r\n        Stack&lt;Node&gt; nodeStack = new Stack&lt;&gt;();\r\n        String[] inputArray = input.substring(1, input.length()-1) \r\n                .split(&quot;(?&lt;=\\\\()|(?=\\\\()|(?&lt;=\\\\))|(?=\\\\))&quot;);\r\n        parent = new Node(inputArray[0]);\r\n        for(int i= 1;i&lt;inputArray.length-1;i++){\r\n            if(inputArray[i].equals(&quot;(&quot;)){nodeStack.push(parent);\r\n                if(child != null){parent = child;}\r\n            }else if(inputArray[i].equals(&quot;)&quot;)){\r\n                try{child = parent; parent = nodeStack.pop();\r\n                }catch(EmptyStackException emptyStack){throw new InvalidTreeSyntax(&quot;Incorrect parenthesis!&quot;);}\r\n            }else{child = new Node(inputArray[i]);\r\n                if(parent != null){parent.addChild(child);}\r\n            }\r\n        }\r\n        if(this.recNodes(parent)* 3 != input.length()) throw new InvalidTreeSyntax(&quot;Incorrect Syntax!&quot;);\r\n    }\r\n    //===================================================================================================    \r\n    //checkBalanced: must determine that the absolute difference between the branches is max at 1\r\n    //will call the recursive method and will also cal recursive height method\r\n    //===================================================================================================\r\n    public boolean isBalanced(){return recIsBalanced(this.parent);}\r\n\r\n    private boolean recIsBalanced(Node root){\r\n        //base case\r\n        if(root == null){\r\n            return true;\r\n        }\r\n        return (Math.abs(recHeight(root.left)- recHeight(root.right)) &lt;=1) &amp;&amp; \r\n                (recIsBalanced(root.left) &amp;&amp; recIsBalanced(root.right));\r\n    }\r\n    //===================================================================================================    \r\n    //checkFull: determines if height has the maximum nodes\r\n    //calls recursive and recursive height method\r\n    //===================================================================================================\r\n    public boolean isFull() {return recIsFull(this.parent, recHeight(this.parent), 0);}\r\n    private boolean recIsFull(Node root, int height, int index){\r\n        if(root == null){return true;}\r\n        if(root.left == null &amp;&amp; root.right == null){return (height == index +1);}\r\n        if(root.left == null || root.right == null){return false;}\r\n        return recIsFull(root.left, height, index+1) &amp;&amp; recIsFull(root.right, height, index+1);\r\n    }\r\n    //===================================================================================================    \r\n    //isProper: determines if each node has 2 or zero childern in the tree\r\n    //just calls the recursive method\r\n    //===================================================================================================\r\n    public boolean isProper(){return recIsProper(this.parent);}\r\n    private boolean recIsProper(Node root){\r\n        if(root == null){return true;}\r\n        return((root.left != null || root.right ==null)&amp;&amp;(root.left == null|| root.right != null))\r\n                &amp;&amp;(recIsProper(root.left)&amp;&amp; recIsProper(root.right));\r\n    }\r\n    //===================================================================================================    \r\n    //height: finds the height of bianary trees which have a root node of 0\r\n    //calls the recursive method\r\n    //===================================================================================================\r\n    public int height(){return recHeight(this.parent)-1;}\r\n\r\n    private int recHeight(Node root){\r\n        return(root == null)? 0: 1 +Math.max(recHeight(root.left), recHeight(root.right));\r\n    }\r\n    //===================================================================================================    \r\n    //nodes: finds the amount of nodes in a bianary tree\r\n    //uses the recursive method that will add one for every node of the left and right subtree, \r\n    //it will be 0 if null\r\n    //===================================================================================================\r\n    public int nodes(){return recNodes(this.parent);}\r\n\r\n    private int recNodes(Node root){\r\n        return (root == null)? 0 : 1+ recNodes(root.left)+ recNodes(root.right);\r\n\r\n    }\r\n    //===================================================================================================    \r\n    //inOrder: onfo of nodes is written in bianary tree order\r\n    //recursive method called, uses algorithm: left to root to right\r\n    //===================================================================================================\r\n   public String inOrder(){\r\n    return recInOrder(this.parent);\r\n   } \r\n   private String recInOrder(Node root){\r\n    return(root == null)? &quot;&quot; : &quot;(&quot; + recInOrder(root.left) + root.info + recInOrder(root.right)+ &quot;)&quot;;\r\n   }\r\n   @Override\r\n   public String toString(){ return parent.toString(); }\r\n    \r\n   //===================================================================================================    \r\n    //Nested node class/ arguments: \r\n    //\r\n    //===================================================================================================\r\n   public static class Node{\r\n    private String info;\r\n    private Node left;\r\n    private Node right;\r\n\r\n    public Node(String info){ this.info = info;}\r\n    private void addChild(Node child) throws InvalidTreeSyntax{\r\n        if(this.left == null){this.setLeft(child);}\r\n        else if(this.right == null){ this.setRight(child);}\r\n        else{throw new InvalidTreeSyntax(&quot;Nodes can only have 2 childern!&quot;);}}\r\n    \r\n    private void setLeft(Node newLeft){left = newLeft;}\r\n    private void setRight(Node newRight){right = newRight;}\r\n\r\n    @Override\r\n    public String toString(){return toString(this);}\r\n\r\n    private static String toString(Node root){\r\n        return(root == null) ? &quot;&quot; : &quot;(&quot; + root.info + toString(root.left) + toString(root.right) + &quot;)&quot;;\r\n    }\r\n}\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\nIn addition, the program should allow the user to request that each of the following features of the tree be \r\ndisplayed:\r\n1. The height of the tree. The height of a tree is the maximum level of all of its nodes. The root node \r\ncontaining A is at the level 0. Because all three leaf nodes in the above tree are at level 2, its height is 2.\r\n2. The number of nodes in the tree. As previously mentioned, the above tree has 6 nodes.\r\n3. An fully parenthesized inorder traversal of the tree. The following should be displayed as the inorder \r\ntraversal of the above tree: ((( j ) G ( 1 )) A (( 5 ) z ))\r\nThe third programming project involves writing a program that allows the user to enter a binary tree in a \r\nparenthesized prefix format and then allows it to be categorized and allows various features of that tree to be \r\ndisplayed. An example of a tree written in the input format is the following:\r\n(A(G(j)(1))(z(5)))\r\nIn the above example, data in each node of the tree contains a single alphanumeric character. No spaces are \r\npermitted. Each tree is enclosed in parentheses. Inside those parentheses, after the single character are either \r\nzero, one or two subtrees also enclosed in parentheses. When only one subtree is present, it is the left subtree \r\nand when two are present, they represent the left and right subtrees. \r\n\r\n\r\nThis project consist of three classes. The main class should create a GUI that allows the user to input a \r\ntree in the above described format and then construct the tree once the Make Tree button is clicked. The GUI \r\nshould look as follows: \r\nThe GUI must be generated by code that you write. You may not use a drag-and-drop GUI generator.\r\nThe second class should be the BinaryTree class, which should contain a static nested class to define the \r\nnodes of the binary tree, together with a constructor that is called when the Make Tree button is clicked and is \r\nsupplied the string representation of the tree and constructs the actual tree from that string. In addition, it should \r\nhave public methods that are called when each of the remaining six buttons are clicked. All of those public \r\nmethods should have corresponding private methods that accomplish their tasks using recursion.\r\nThe third class should be named InvalidTreeSyntax, which defines a checked exception. It should be \r\nthrown when a invalid string is supplied and the Make Tree button is clicked. It should be caught in the main \r\nclass and a JOptionPane window should be displayed that describes the reason for the invalid syntax.\r\n\r\nWhat the GUI looks like: [My code creates the GUI but does not let a response appear] (https://i.stack.imgur.com/UcC58.png)\r\n","title":"Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NullPointerException &lt;=== this error occurs in the main program of my code","body":"<p>Here is my code, there are three classes and they are separated by the code blocks.\nThere is a: Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NullPointerException\nat project3.Main.lambda$0(Main.java:81)</p>\n<p>error in my code and I am not sure how to fix it.</p>\n<pre><code>package project3;\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionListener;\n\npublic class Main extends JFrame {\n\n    private JTextField input = new JTextField(20), output = new JTextField(30);\n        private static BinaryTree inputTree;\n\n    //main here\n    public static void main(String[] args) {\n        Main frame = new Main();\n        frame.setVisible(true);\n    }\n\n    //===================================================================================\n    // Class constructor creates GUI with three panels (input, buttons, and output)\n    //===================================================================================\n    public Main() {\n        super(&quot;Binary Tree Categorizer&quot;);\n        setSize(715, 175);\n        setLocationRelativeTo(null);\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        setLayout(new GridLayout(3, 1));\n        JComponent[] inputComponents = {new JLabel(&quot;Enter Expression&quot;), input};\n        JComponent[] outputComponents = {new JLabel(&quot;Output&quot;), output};\n        JButton[] buttonComponents = {new JButton(&quot;Make Tree&quot;), new JButton(&quot;Is Balanced?&quot;),\n                new JButton(&quot;Is Full?&quot;), new JButton(&quot;Is Proper?&quot;), new JButton(&quot;Height&quot;),\n                new JButton(&quot;Nodes&quot;), new JButton(&quot;Inorder&quot;)};\n        makeFlowPanel(inputComponents);\n        makeFlowPanel(buttonComponents);\n        makeFlowPanel(outputComponents);\n        addActionListeners(buttonComponents);\n        output.setEditable(false);\n        setResizable(false);\n    }\n\n    //================================================================================================\n    // Creates a flow panel from array of components. Borrowed the idea for this method from Prof Jarc\n    //================================================================================================\n    private void makeFlowPanel(JComponent[] components) {\n        JPanel panel = new JPanel(new FlowLayout());\n        for (Component component: components) { panel.add(component); }\n        add(panel);\n    }\n    //================================================================================================\n    // Adds the ActionListener to the array of buttons passed to it, similar to previous\n    //================================================================================================\n    private void addActionListeners (JButton[] buttons){\n        for (JButton button: buttons){\n            button.addActionListener(treeListener);\n        }\n    }\n    //========================================================================================================\n    // ActionListener uses switch statement to set output text based on String returned from getActionCommand\n    //========================================================================================================\n    private final ActionListener treeListener = event -&gt; {\n        try {\n            switch ((event.getActionCommand())){\n                case &quot;Make Tree&quot;:\n                    inputTree = new BinaryTree(input.getText());\n                    output.setText(inputTree.toString());\n                    break;\n                case &quot;Is Balanced?&quot;:\n                    output.setText(String.valueOf(inputTree.isBalanced()));\n                    break;\n                case &quot;Is Full?&quot;:\n                    output.setText(String.valueOf(inputTree.isFull()));\n                    break;\n                case &quot;Is Proper?&quot;:\n                    output.setText(String.valueOf(inputTree.isProper()));\n                    break;\n                case &quot;Height&quot;:\n                    output.setText(String.valueOf(inputTree.height()));\n                    break;\n                case &quot;Nodes&quot;:\n                    output.setText(String.valueOf(inputTree.nodes()));\n                    break;\n                case &quot;Inorder&quot;:\n                    output.setText(inputTree.inOrder());\n                    break;\n            }\n        } catch (InvalidTreeSyntax except) {\n            JOptionPane.showMessageDialog(getParent(),except.getMessage());\n        }catch (IndexOutOfBoundsException indexExcept) {\n            JOptionPane.showMessageDialog(getParent(),&quot;No input given!&quot;);\n        }\n    };\n}\n</code></pre>\n<pre><code>package project3;\n\npublic class Node {\n    private String info;\n    private Node left;\n    private Node right;\n\n    public Node(String info) {this.info = info;}\n\n    private void addChild(Node child) throws InvalidTreeSyntax{\n        if(this.left == null){this.setLeft(child); }\n        else if(this.right == null){this.setRight(child);}\n        else{throw new InvalidTreeSyntax(&quot;Nodes can only have 2 children!&quot;);}}\n        \n        //setters for the nodes\n        private void setLeft(Node newLeft){left = newLeft;}\n        private void setRight(Node newRight){right = newRight;}\n\n        @Override //calls the recursive method\n        public String toString(){ return toString(this);}\n        //recursivley printing out the nodes\n        private static String toString(Node root){\n            return(root == null) ? &quot;&quot; : &quot;(&quot;+ root.info + toString(root.left) + toString(root.right)+ &quot;)&quot;;\n        }\n    }\n</code></pre>\n<pre><code>package project3;\n\npublic class InvalidTreeSyntax extends Exception{\n    public InvalidTreeSyntax(){\n        super();\n    }\n    public InvalidTreeSyntax(String message){\n        super(message);\n    }\n}\n\n</code></pre>\n<pre><code>package project3;\n\nimport java.util.EmptyStackException;\nimport java.util.Stack;\n\npublic class BinaryTree {\n    Node parent, child; //parent is now synonymous with root\n\n    //===================================================================================================\n    //BianaryTree constructor: Takes the input string and stores it as an array based on the parenthesis\n    // loops through using a stack and adds children that fall within the parental parenthesis\n    //===================================================================================================\n    public BinaryTree(String input) throws InvalidTreeSyntax{\n        Stack&lt;Node&gt; nodeStack = new Stack&lt;&gt;();\n        String[] inputArray = input.substring(1, input.length()-1) \n                .split(&quot;(?&lt;=\\\\()|(?=\\\\()|(?&lt;=\\\\))|(?=\\\\))&quot;);\n        parent = new Node(inputArray[0]);\n        for(int i= 1;i&lt;inputArray.length-1;i++){\n            if(inputArray[i].equals(&quot;(&quot;)){nodeStack.push(parent);\n                if(child != null){parent = child;}\n            }else if(inputArray[i].equals(&quot;)&quot;)){\n                try{child = parent; parent = nodeStack.pop();\n                }catch(EmptyStackException emptyStack){throw new InvalidTreeSyntax(&quot;Incorrect parenthesis!&quot;);}\n            }else{child = new Node(inputArray[i]);\n                if(parent != null){parent.addChild(child);}\n            }\n        }\n        if(this.recNodes(parent)* 3 != input.length()) throw new InvalidTreeSyntax(&quot;Incorrect Syntax!&quot;);\n    }\n    //===================================================================================================    \n    //checkBalanced: must determine that the absolute difference between the branches is max at 1\n    //will call the recursive method and will also cal recursive height method\n    //===================================================================================================\n    public boolean isBalanced(){return recIsBalanced(this.parent);}\n\n    private boolean recIsBalanced(Node root){\n        //base case\n        if(root == null){\n            return true;\n        }\n        return (Math.abs(recHeight(root.left)- recHeight(root.right)) &lt;=1) &amp;&amp; \n                (recIsBalanced(root.left) &amp;&amp; recIsBalanced(root.right));\n    }\n    //===================================================================================================    \n    //checkFull: determines if height has the maximum nodes\n    //calls recursive and recursive height method\n    //===================================================================================================\n    public boolean isFull() {return recIsFull(this.parent, recHeight(this.parent), 0);}\n    private boolean recIsFull(Node root, int height, int index){\n        if(root == null){return true;}\n        if(root.left == null &amp;&amp; root.right == null){return (height == index +1);}\n        if(root.left == null || root.right == null){return false;}\n        return recIsFull(root.left, height, index+1) &amp;&amp; recIsFull(root.right, height, index+1);\n    }\n    //===================================================================================================    \n    //isProper: determines if each node has 2 or zero childern in the tree\n    //just calls the recursive method\n    //===================================================================================================\n    public boolean isProper(){return recIsProper(this.parent);}\n    private boolean recIsProper(Node root){\n        if(root == null){return true;}\n        return((root.left != null || root.right ==null)&amp;&amp;(root.left == null|| root.right != null))\n                &amp;&amp;(recIsProper(root.left)&amp;&amp; recIsProper(root.right));\n    }\n    //===================================================================================================    \n    //height: finds the height of bianary trees which have a root node of 0\n    //calls the recursive method\n    //===================================================================================================\n    public int height(){return recHeight(this.parent)-1;}\n\n    private int recHeight(Node root){\n        return(root == null)? 0: 1 +Math.max(recHeight(root.left), recHeight(root.right));\n    }\n    //===================================================================================================    \n    //nodes: finds the amount of nodes in a bianary tree\n    //uses the recursive method that will add one for every node of the left and right subtree, \n    //it will be 0 if null\n    //===================================================================================================\n    public int nodes(){return recNodes(this.parent);}\n\n    private int recNodes(Node root){\n        return (root == null)? 0 : 1+ recNodes(root.left)+ recNodes(root.right);\n\n    }\n    //===================================================================================================    \n    //inOrder: onfo of nodes is written in bianary tree order\n    //recursive method called, uses algorithm: left to root to right\n    //===================================================================================================\n   public String inOrder(){\n    return recInOrder(this.parent);\n   } \n   private String recInOrder(Node root){\n    return(root == null)? &quot;&quot; : &quot;(&quot; + recInOrder(root.left) + root.info + recInOrder(root.right)+ &quot;)&quot;;\n   }\n   @Override\n   public String toString(){ return parent.toString(); }\n    \n   //===================================================================================================    \n    //Nested node class/ arguments: \n    //\n    //===================================================================================================\n   public static class Node{\n    private String info;\n    private Node left;\n    private Node right;\n\n    public Node(String info){ this.info = info;}\n    private void addChild(Node child) throws InvalidTreeSyntax{\n        if(this.left == null){this.setLeft(child);}\n        else if(this.right == null){ this.setRight(child);}\n        else{throw new InvalidTreeSyntax(&quot;Nodes can only have 2 childern!&quot;);}}\n    \n    private void setLeft(Node newLeft){left = newLeft;}\n    private void setRight(Node newRight){right = newRight;}\n\n    @Override\n    public String toString(){return toString(this);}\n\n    private static String toString(Node root){\n        return(root == null) ? &quot;&quot; : &quot;(&quot; + root.info + toString(root.left) + toString(root.right) + &quot;)&quot;;\n    }\n}\n}\n\n</code></pre>\n<p>In addition, the program should allow the user to request that each of the following features of the tree be\ndisplayed:</p>\n<ol>\n<li>The height of the tree. The height of a tree is the maximum level of all of its nodes. The root node\ncontaining A is at the level 0. Because all three leaf nodes in the above tree are at level 2, its height is 2.</li>\n<li>The number of nodes in the tree. As previously mentioned, the above tree has 6 nodes.</li>\n<li>An fully parenthesized inorder traversal of the tree. The following should be displayed as the inorder\ntraversal of the above tree: ((( j ) G ( 1 )) A (( 5 ) z ))\nThe third programming project involves writing a program that allows the user to enter a binary tree in a\nparenthesized prefix format and then allows it to be categorized and allows various features of that tree to be\ndisplayed. An example of a tree written in the input format is the following:\n(A(G(j)(1))(z(5)))\nIn the above example, data in each node of the tree contains a single alphanumeric character. No spaces are\npermitted. Each tree is enclosed in parentheses. Inside those parentheses, after the single character are either\nzero, one or two subtrees also enclosed in parentheses. When only one subtree is present, it is the left subtree\nand when two are present, they represent the left and right subtrees.</li>\n</ol>\n<p>This project consist of three classes. The main class should create a GUI that allows the user to input a\ntree in the above described format and then construct the tree once the Make Tree button is clicked. The GUI\nshould look as follows:\nThe GUI must be generated by code that you write. You may not use a drag-and-drop GUI generator.\nThe second class should be the BinaryTree class, which should contain a static nested class to define the\nnodes of the binary tree, together with a constructor that is called when the Make Tree button is clicked and is\nsupplied the string representation of the tree and constructs the actual tree from that string. In addition, it should\nhave public methods that are called when each of the remaining six buttons are clicked. All of those public\nmethods should have corresponding private methods that accomplish their tasks using recursion.\nThe third class should be named InvalidTreeSyntax, which defines a checked exception. It should be\nthrown when a invalid string is supplied and the Make Tree button is clicked. It should be caught in the main\nclass and a JOptionPane window should be displayed that describes the reason for the invalid syntax.</p>\n<p>What the GUI looks like: [My code creates the GUI but does not let a response appear] (<a href=\"https://i.stack.imgur.com/UcC58.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/UcC58.png</a>)</p>\n"},{"tags":["java","java-8","sonarqube"],"comments":[{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":0,"creation_date":1676657057,"post_id":75487420,"comment_id":133188264,"body_markdown":"Add `since` and/or `forRemoval` arguments to the `@Deprecated` anotation. Example `@Deprecated(since=&quot;4.2&quot;, forRemoval=true)`","body":"Add <code>since</code> and/or <code>forRemoval</code> arguments to the <code>@Deprecated</code> anotation. Example <code>@Deprecated(since=&quot;4.2&quot;, forRemoval=true)</code>"},{"owner":{"account_id":1756015,"reputation":11409,"user_id":1604048,"accept_rate":71,"display_name":"Murat Yıldız"},"score":0,"creation_date":1676657381,"post_id":75487420,"comment_id":133188357,"body_markdown":"Could you try the suggestion in my answer and let me know if it works?","body":"Could you try the suggestion in my answer and let me know if it works?"},{"owner":{"account_id":4598459,"reputation":35,"user_id":3729873,"display_name":"luv-yzag"},"score":0,"creation_date":1676747353,"post_id":75487420,"comment_id":133201152,"body_markdown":"@Eritrean - &quot;since&quot; and &quot;forRemoval&quot; are required for java &gt;= 9.0","body":"@Eritrean - &quot;since&quot; and &quot;forRemoval&quot; are required for java &gt;= 9.0"}],"answers":[{"tags":[],"owner":{"account_id":1756015,"reputation":11409,"user_id":1604048,"accept_rate":71,"display_name":"Murat Yıldız"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676657786,"creation_date":1676657264,"answer_id":75487856,"question_id":75487420,"body_markdown":"Try this: \r\n\r\n```\r\n/**\r\n * @deprecated (when, why, refactoring advice...)\r\n */\r\n@Deprecated\r\n@Data\r\n@AllArgsConstructor\r\n@Builder\r\n@NoArgsConstructor\r\npublic class SomeClass {\r\n\r\n}\r\n```\r\n\r\nFor more information: https://rules.sonarsource.com/java/RSPEC-1123","title":"SonarQube throws CodeSmell &quot;Add the missing @deprecated Javadoc tag.&quot;","body":"<p>Try this:</p>\n<pre><code>/**\n * @deprecated (when, why, refactoring advice...)\n */\n@Deprecated\n@Data\n@AllArgsConstructor\n@Builder\n@NoArgsConstructor\npublic class SomeClass {\n\n}\n</code></pre>\n<p>For more information: <a href=\"https://rules.sonarsource.com/java/RSPEC-1123\" rel=\"nofollow noreferrer\">https://rules.sonarsource.com/java/RSPEC-1123</a></p>\n"}],"owner":{"account_id":4598459,"reputation":35,"user_id":3729873,"display_name":"luv-yzag"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":544,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75487856,"answer_count":1,"score":1,"last_activity_date":1676657786,"creation_date":1676654592,"question_id":75487420,"body_markdown":"I use Java 8 and the existing code just had @Deprecated and it was tagged by SonarQube. I tried adding @deprecated Javadoc tag to fix this issue. But, it still throws the same error. Here&#39;s what I have added:\r\n\r\n```\r\n@Data\r\n@AllArgsConstructor\r\n@Builder\r\n@NoArgsConstructor\r\n/**\r\n * @deprecated (Not using this now)\r\n */\r\n@Deprecated\r\npublic class SomeClass {\r\n```\r\n\r\nCan someone please point out what the mistake is in the above code? Or, provide me the correct way to solve this issue.\r\n","title":"SonarQube throws CodeSmell &quot;Add the missing @deprecated Javadoc tag.&quot;","body":"<p>I use Java 8 and the existing code just had @Deprecated and it was tagged by SonarQube. I tried adding @deprecated Javadoc tag to fix this issue. But, it still throws the same error. Here's what I have added:</p>\n<pre><code>@Data\n@AllArgsConstructor\n@Builder\n@NoArgsConstructor\n/**\n * @deprecated (Not using this now)\n */\n@Deprecated\npublic class SomeClass {\n</code></pre>\n<p>Can someone please point out what the mistake is in the above code? Or, provide me the correct way to solve this issue.</p>\n"},{"tags":["java","eclipse","time","webdriver"],"comments":[{"owner":{"account_id":4629221,"reputation":2621,"user_id":3752185,"display_name":"Janar"},"score":0,"creation_date":1433406124,"post_id":30638539,"comment_id":49341695,"body_markdown":"Are you sure you are creating a new date object every time?","body":"Are you sure you are creating a new date object every time?"},{"owner":{"account_id":5036884,"reputation":647,"user_id":4239121,"accept_rate":80,"display_name":"slarge"},"score":0,"creation_date":1433406182,"post_id":30638539,"comment_id":49341728,"body_markdown":"You need to supply more information to be able to help you otherwise we are just guessing.","body":"You need to supply more information to be able to help you otherwise we are just guessing."},{"owner":{"account_id":6194489,"reputation":155,"user_id":4826243,"accept_rate":73,"display_name":"Keliimek"},"score":0,"creation_date":1433406702,"post_id":30638539,"comment_id":49342025,"body_markdown":"and what do you need? i can give you full code test","body":"and what do you need? i can give you full code test"},{"owner":{"account_id":4629221,"reputation":2621,"user_id":3752185,"display_name":"Janar"},"score":0,"creation_date":1433406992,"post_id":30638539,"comment_id":49342207,"body_markdown":"Show the code that outputs text (is it a method, what arguments does it take, how it is called)","body":"Show the code that outputs text (is it a method, what arguments does it take, how it is called)"},{"owner":{"account_id":6194489,"reputation":155,"user_id":4826243,"accept_rate":73,"display_name":"Keliimek"},"score":0,"creation_date":1433407688,"post_id":30638539,"comment_id":49342673,"body_markdown":"i added code of test","body":"i added code of test"}],"answers":[{"tags":[],"owner":{"account_id":4282603,"reputation":1705,"user_id":3501502,"display_name":"Anton Angelov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1433406321,"creation_date":1433406321,"answer_id":30638682,"question_id":30638539,"body_markdown":"Instead of Date dNow = new Date( ); you should use:\r\n\r\n    java.time.LocalDateTime.now()\r\nIt is going to return the current datetime.","title":"How to get current date in Java","body":"<p>Instead of Date dNow = new Date( ); you should use:</p>\n\n<pre><code>java.time.LocalDateTime.now()\n</code></pre>\n\n<p>It is going to return the current datetime.</p>\n"},{"tags":[],"owner":{"account_id":5210905,"reputation":1910,"user_id":4167384,"accept_rate":62,"display_name":"Akah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1433406617,"creation_date":1433406617,"answer_id":30638788,"question_id":30638539,"body_markdown":"You can use \r\n\r\n    Calendar.getInstance().getTime()\r\n\r\nas well.","title":"How to get current date in Java","body":"<p>You can use </p>\n\n<pre><code>Calendar.getInstance().getTime()\n</code></pre>\n\n<p>as well.</p>\n"},{"tags":[],"owner":{"account_id":4629221,"reputation":2621,"user_id":3752185,"display_name":"Janar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1433408394,"creation_date":1433407774,"answer_id":30639186,"question_id":30638539,"body_markdown":"You aren&#39;t creating a new Date object.\r\nInstead of \r\n\r\n    System.out.println(ft.format(dNow) +...)\r\n\r\nYou have to create a new Date object\r\n\r\nTry changing all the dNow objects into\r\n\r\n    System.out.println(ft.format(new Date()) +...)","title":"How to get current date in Java","body":"<p>You aren't creating a new Date object.\nInstead of </p>\n\n<pre><code>System.out.println(ft.format(dNow) +...)\n</code></pre>\n\n<p>You have to create a new Date object</p>\n\n<p>Try changing all the dNow objects into</p>\n\n<pre><code>System.out.println(ft.format(new Date()) +...)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5036884,"reputation":647,"user_id":4239121,"accept_rate":80,"display_name":"slarge"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1433408142,"creation_date":1433407814,"answer_id":30639203,"question_id":30638539,"body_markdown":"You&#39;re not creating a new Date object before running each test.\r\n\r\nAdd \r\n\r\n    dNow = new Date( ); \r\n\r\nto the setUp method.\r\n\r\nSeparate your test into different test methods.\r\n\r\nYou could also create a new method to do the output\r\n\r\n    private void log(final String message) {\r\n        System.out.println(MessageFormat.format(&quot;{0} - {1}&quot;, ft.format(new Date(), message);\r\n    }\r\n\r\n\r\nand use that instead of\r\n    \r\n    System.out.println(ft.format(dNow) + &quot;:&quot; + &quot; ***********ZAČ&#193;TEK TESTU HELP***********&quot;);\r\n\r\nlike this\r\n\r\n    log(&quot; ***********ZAČ&#193;TEK TESTU HELP***********&quot;);\r\n","title":"How to get current date in Java","body":"<p>You're not creating a new Date object before running each test.</p>\n\n<p>Add </p>\n\n<pre><code>dNow = new Date( ); \n</code></pre>\n\n<p>to the setUp method.</p>\n\n<p>Separate your test into different test methods.</p>\n\n<p>You could also create a new method to do the output</p>\n\n<pre><code>private void log(final String message) {\n    System.out.println(MessageFormat.format(\"{0} - {1}\", ft.format(new Date(), message);\n}\n</code></pre>\n\n<p>and use that instead of</p>\n\n<pre><code>System.out.println(ft.format(dNow) + \":\" + \" ***********ZAČÁTEK TESTU HELP***********\");\n</code></pre>\n\n<p>like this</p>\n\n<pre><code>log(\" ***********ZAČÁTEK TESTU HELP***********\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5021253,"reputation":657,"user_id":4390503,"accept_rate":60,"display_name":"Jerry Chin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1433410187,"creation_date":1433410187,"answer_id":30640108,"question_id":30638539,"body_markdown":"Try to delete *dNow* declaration statement, and replace all *dNow* with *new Date()*\r\n","title":"How to get current date in Java","body":"<p>Try to delete <em>dNow</em> declaration statement, and replace all <em>dNow</em> with <em>new Date()</em></p>\n"}],"owner":{"account_id":6194489,"reputation":155,"user_id":4826243,"accept_rate":73,"display_name":"Keliimek"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":148,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":30639186,"answer_count":5,"score":-1,"last_activity_date":1676657628,"creation_date":1433405921,"question_id":30638539,"body_markdown":"I am creating an automatic test for some webs and I&#39;m using WebDriver, TestNG and code that is written in Java. Every output from the console should display time, when a step is performed. A week ago everything was OK, every step had a different time set. However, now the time stays still the same.\r\n\r\n    09:50:48: ***********start***********\r\n    09:50:48: ***********PART 1***********\r\n    09:50:48: 1.1 home: OK xxxx\r\n    09:50:48: ***********PART 2***********\r\n    09:50:48: 2.1 home: OK xxxx\r\n    09:50:48: 2.2 home: OK xxxx\r\n    09:50:48: 2.3 home: OK URL xxxx\r\n    09:50:48: 2.4 home: OK xxxx\r\n    09:50:48: ***********PART 3***********\r\n    ....\r\n\r\nI have used this code:\r\n\r\n    Date dNow = new Date( );\r\n    SimpleDateFormat ft = new SimpleDateFormat (&quot;yyyy-MM-dd hh:mm:ss&quot;);\r\n    \r\n    System.out.println(ft.format(dNow) + &quot;:&quot; + &quot; xxxx&quot;);\r\n\r\nHow can I get again the current time for every step?\r\n\r\nCode of test:\r\n\r\n    package exDrazby;\r\n    \r\n    import java.text.SimpleDateFormat;\r\n    import java.util.concurrent.TimeUnit;\r\n    import static org.junit.Assert.*;\r\n    import org.openqa.selenium.*;\r\n    import org.openqa.selenium.firefox.FirefoxDriver;\r\n    import org.testng.annotations.AfterMethod;\r\n    import org.testng.annotations.BeforeMethod;\r\n    import org.testng.annotations.Test;\r\n    import java.util.*;\r\n    import java.util.NoSuchElementException;\r\n    \r\n    \r\n    public class Help {\r\n    \tprivate WebDriver driver;\r\n    \tprivate String baseUrl;\r\n    \tprivate StringBuffer verificationErrors = new StringBuffer();\r\n    \t Date dNow = new Date( );\r\n         SimpleDateFormat ft = new SimpleDateFormat (&quot;yyyy-MM-dd hh:mm:ss&quot;);\r\n\t\r\n\t@BeforeMethod\r\n\tpublic void setUp() throws Exception {\r\n\t\tdriver = new FirefoxDriver();\r\n\t\t//driver.manage().window().maximize();\r\n\t\tbaseUrl = &quot;http://www.labmultis.info&quot;;\r\n\t\tdriver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\r\n\t\t \r\n\t}\r\n\t@Test\r\n\tpublic void testHelpStep1WD() throws Exception {\r\n\t\tSystem.out.println(&quot; **************************************&quot;);\r\n\t\tSystem.out.println(&quot; * Test projektu: exdrazby.cz –admin verze 3.3s&quot;);\r\n\t\tSystem.out.println(&quot; * Test: HELP verze 1.0&quot;);\r\n\t\tSystem.out.println(&quot; **************************************&quot;);\r\n\t\tSystem.out.println(&quot; &quot;);\r\n\t\tSystem.out.println(ft.format(dNow) + &quot;:&quot; + &quot; ***********ZAČ&#193;TEK TESTU HELP***********&quot;);\r\n\t\tSystem.out.println(ft.format(dNow) + &quot;:&quot; + &quot; ***********PART 1***********&quot;);\r\n\t\tdriver.get(baseUrl + &quot;/jpecka.portal-exdrazby/index.php?a=mujucet&amp;aa=resetheslo&quot;);\r\n\t\tdriver.findElement(By.linkText(&quot;N&#225;pověda&quot;)).click();\r\n\t\ttry {\r\n\t\t\tassertEquals(&quot;&#218;vod &gt; N&#225;pověda&quot;, driver.findElement(By.cssSelector(&quot;p.breadcrumb&quot;)).getText());\r\n\t\t\tSystem.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 1.1 help: OK str&#225;nka n&#225;pověda dostupn&#225;&quot;);\r\n\t\t} catch (Error e) {\r\n\t\t\tverificationErrors.append(e.toString());\r\n\t\t\tSystem.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 1.1 help: str&#225;nku n&#225;pověda se nepodařilo zobrazit!!!&quot;);\r\n\t\t}\r\n\t\tassertTrue(isElementPresent(By.cssSelector(&quot;div.box.box-inner&quot;)));\r\n\t\tSystem.out.println(ft.format(dNow) + &quot;:&quot; + &quot; ***********PART 2***********&quot;);\r\n\t\ttry {\r\n\t\t\tassertEquals(&quot;Obsah&quot;, driver.findElement(By.cssSelector(&quot;h3&quot;)).getText());\r\n\t\t\tSystem.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 2.1 help: OK box s n&#225;povědou vlevo je zobrazen&quot;);\r\n\t\t} catch (Error e) {\r\n\t\t\tverificationErrors.append(e.toString());\r\n\t\t\tSystem.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 2.1 help: box s n&#225;povědou vlevo je chyb&#237;!!!&quot;);\r\n\t\t}\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Registrace na port&#225;lu&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Jak splnit podm&#237;nky &#250;časti v dražbě&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Jak dražit&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Jak hledat dražby&quot;)));\r\n\t\ttry {\r\n\t\t\tassertTrue(isElementPresent(By.linkText(&quot;Pojmy&quot;)));\r\n\t\t\tSystem.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 2.2 help: OK box s n&#225;povědou vlevo obsahuje funkčn&#237; linky: registrace na port&#225;lu, jak splnit podm&#237;nky &#250;časti v dražbě, jak dražit, jak hledat dražby a pojmy&quot;);\r\n\t\t} catch (Error e) {\r\n\t\t\tverificationErrors.append(e.toString());\r\n\t\t\tSystem.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 2.2 help: box s n&#225;povědou vlevo obsahuje chybu, někter&#253; z n&#225;sleduj&#237;ch linků nen&#237; funkčn&#237;: registrace na port&#225;lu, jak splnit podm&#237;nky &#250;časti v dražbě, jak dražit, jak hledat dražby a pojmy!!!&quot;);\r\n\t\t}\r\n\t\tSystem.out.println(ft.format(dNow) + &quot;:&quot; + &quot; ***********PART 3***********&quot;);\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Jak se registrovat&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Co je z&#225;kladn&#237; registrace&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Registrace dražitele&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Co je registrace ostatn&#237;ch &#250;častn&#237;ků dražby&quot;)));\r\n\t\tdriver.findElement(By.xpath(&quot;//a[contains(text(),&#39;Co v př&#237;padě, že se nemůžete  registrovat nebo přihl&#225;sit?&#39;)]&quot;)).click();\r\n\r\n\t\ttry {\r\n\t\t\tassertTrue(driver.findElement(By.xpath(&quot;/html/body/div[1]/div/section/div/div[2]/ol/h2&quot;)).getText().matches(&quot;^Co v př&#237;padě, že se nemůžete registrovat nebo přihl&#225;sit[\\\\s\\\\S]$&quot;));\r\n\t\t\tSystem.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 3.1 help: OK N&#225;pověda &gt; 1. registrace na port&#225;lu obsahuje funkčn&#237; n&#225;sleduj&#237;c&#237; linky: jak se registrovat, co je z&#225;kladn&#237; registrace, co je registrace dražitele, Co je registrace ostatn&#237;ch &#250;častn&#237;ků dražby, Co v př&#237;padě, že se nemůžete registrovat nebo přihl&#225;sit.&quot;);\r\n\t\t} catch (Error e) {\r\n\t\t\tverificationErrors.append(e.toString());\r\n\t\t\tSystem.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 3.1 help: N&#225;pověda &gt; 1. registrace na port&#225;lu obsahuje chybu, někter&#253; z n&#225;sleduj&#237;ch linků nen&#237; funkčn&#237;: jak se registrovat, co je z&#225;kladn&#237; registrace, co je registrace dražitele, Co je registrace ostatn&#237;ch &#250;častn&#237;ků dražby, Co v př&#237;padě, že se nemůžete registrovat nebo přihl&#225;sit.!!!&quot;);\r\n\t\t}\r\n\t\tdriver.findElement(By.linkText(&quot;Pojmy&quot;)).click();\r\n\t\ttry {\r\n\t\t\tassertEquals(&quot;Pojmy&quot;, driver.findElement(By.xpath(&quot;//li[5]/div&quot;)).getText());\r\n\t\t} catch (Error e) {\r\n\t\t\tverificationErrors.append(e.toString());\r\n\t\t}\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Jak prok&#225;zat totožnost&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Ověřen&#237; totožnosti u exekutora&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Doložen&#237; ověřen&#233; totožnosti doklady zaslan&#253;mi poštou&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Doložen&#237; ověřen&#233; totožnosti kvalifikovan&#253;m certifik&#225;tem&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Doložen&#237; ověřen&#233; totožnosti datovou schr&#225;nkou&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Doložen&#237; ověřen&#233; totožnosti doklady konvertovan&#253;mi na poště&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Jak složit dražebn&#237; jistotu&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Pr&#225;ce s konvertovan&#253;m dokladem v č&#225;sti Můj &#250;čet&quot;)));\r\n\t\tdriver.findElement(By.xpath(&quot;(//a[contains(text(),&#39;Jak splnit podm&#237;nky &#250;časti v dražbě&#39;)])[2]&quot;)).click();\r\n\t\ttry {\r\n\t\t\tassertEquals(&quot;Jak splnit podm&#237;nky &#250;časti v dražbě&quot;, driver.findElement(By.cssSelector(&quot;h2&quot;)).getText());\r\n\t\t\tSystem.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 3.2 help: OK N&#225;pověda &gt; 2. Jak splnit podm&#237;nky &#250;časti v dražbě obsahuje funkčn&#237; n&#225;sleduj&#237;c&#237; linky:Jak splnit podm&#237;nky &#250;časti v dražbě, Jak prok&#225;zat totožnost, ověřen&#237; totožnosti u exekutora, Doložen&#237; ověřen&#233; totožnosti doklady zaslan&#253;mi poštou, Doložen&#237; ověřen&#233; totožnosti kvalifikovan&#253;m certifik&#225;tem, Doložen&#237; ověřen&#233; totožnosti datovou schr&#225;nkou, Doložen&#237; ověřen&#233; totožnosti doklady konvertovan&#253;mi na poště, Jak složit dražebn&#237; jistotu, Pr&#225;ce s konvertovan&#253;m dokladem v č&#225;sti Můj &#250;čet&quot;);\r\n\t\t} catch (Error e) {\r\n\t\t\tverificationErrors.append(e.toString());\r\n\t\t\tSystem.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 3.2 help: N&#225;pověda &gt; 2. Jak splnit podm&#237;nky &#250;časti v dražbě obsahuje chybu, někter z n&#225;sleduj&#237;c&#237;ch linků nen&#237; funkčn&#237;:Jak splnit podm&#237;nky &#250;časti v dražbě, Jak prok&#225;zat totožnost, ověřen&#237; totožnosti u exekutora, Doložen&#237; ověřen&#233; totožnosti doklady zaslan&#253;mi poštou, Doložen&#237; ověřen&#233; totožnosti kvalifikovan&#253;m certifik&#225;tem, Doložen&#237; ověřen&#233; totožnosti datovou schr&#225;nkou, Doložen&#237; ověřen&#233; totožnosti doklady konvertovan&#253;mi na poště, Jak složit dražebn&#237; jistotu, Pr&#225;ce s konvertovan&#253;m dokladem v č&#225;sti Můj &#250;čet!!!&quot;);\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tassertTrue(isElementPresent(By.cssSelector(&quot;img&quot;)));\r\n\t\t} catch (Error e) {\r\n\t\t\tverificationErrors.append(e.toString());\r\n\t\t}\r\n\t\tdriver.findElement(By.cssSelector(&quot;a[title=\\&quot;N&#225;pov&#233;da\\&quot;]&quot;)).click();\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Kdy začne dražba&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Jak přihazovat&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Kdy dražba konč&#237;&quot;)));\r\n\t\tdriver.findElement(By.linkText(&quot;Jak podat n&#225;mitky&quot;)).click();\r\n\t\ttry {\r\n\t\t\tassertEquals(&quot;Jak podat n&#225;mitky&quot;, driver.findElement(By.cssSelector(&quot;h2&quot;)).getText());\r\n\t\t\tSystem.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 3.3 help: OK N&#225;pověda &gt; 3. Jak dražit obsahuje funkčn&#237; n&#225;sleduj&#237;c&#237; linky: Kdy začne dražba, jak přihazovat, kdy dražba konč&#237;, jak podat n&#225;mitky&quot;);\r\n\t\t} catch (Error e) {\r\n\t\t\tverificationErrors.append(e.toString());\r\n\t\t\tSystem.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 3.3 help: N&#225;pověda &gt; 3. Jak dražit obsahuje chybu, někter&#253; z n&#225;sleduj&#237;c&#237;ch linků je nefunkčn&#237;: Kdy začne dražba, jak přihazovat, kdy dražba konč&#237;, jak podat n&#225;mitky!!!&quot;);\r\n\t\t}\r\n\t\tdriver.findElement(By.cssSelector(&quot;a[title=\\&quot;N&#225;pov&#233;da\\&quot;]&quot;)).click();\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Jak hledat dražbu&quot;)));\r\n\t\tdriver.findElement(By.linkText(&quot;Jak nastavit emailov&#233; upozorněn&#237;&quot;)).click();\r\n\t\ttry {\r\n\t\t\tassertEquals(&quot;Jak nastavit emailov&#233; upozorněn&#237;&quot;, driver.findElement(By.cssSelector(&quot;h2&quot;)).getText());\r\n\t\t\tSystem.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 3.4 help: OK N&#225;pověda &gt; 4. Jak hledat dražby obsahuje funkčn&#237; n&#225;sleduj&#237;c&#237; linky: Jak hledat dražbu, jak nastavit emailov&#233; upozorněn&#237;&quot;);\r\n\t\t} catch (Error e) {\r\n\t\t\tverificationErrors.append(e.toString());\r\n\t\t\tSystem.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 3.4 help: N&#225;pověda &gt; 4. Jak hledat dražby obsahuje chybu,  někter&#253; z n&#225;sleduj&#237;c&#237;ch linků nen&#237; funkčn&#237;: Jak hledat dražbu, jak nastavit emailov&#233; upozorněn&#237;!!!&quot;);\r\n\t\t}\r\n\t\tdriver.findElement(By.cssSelector(&quot;a[title=\\&quot;N&#225;pov&#233;da\\&quot;]&quot;)).click();\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Předkupn&#237; pr&#225;vo&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Př&#237;hoz&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Pod&#225;n&#237;&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Prvn&#237; př&#237;hoz&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Povinn&#253;&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Opr&#225;vněn&#253;&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Dražba&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Vydražitel&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Dražebn&#237; vyhl&#225;ška&quot;)));\r\n\t\tassertTrue(isElementPresent(By.linkText(&quot;Dražebn&#237; jistota&quot;)));\r\n\t\tdriver.findElement(By.linkText(&quot;Nejnižš&#237; pod&#225;n&#237;&quot;)).click();\r\n\t\ttry {\r\n\t\t\tassertEquals(&quot;Nejnižš&#237; pod&#225;n&#237;&quot;, driver.findElement(By.cssSelector(&quot;h2&quot;)).getText());\r\n\t\t\tSystem.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 3.5 help: OK N&#225;pověda &gt; 5. Pojmy obsahuje funkčn&#237; n&#225;sleduj&#237;c&#237; linky: Předkupn&#237; pr&#225;vo, př&#237;hoz, pod&#225;n&#237;, prvn&#237; př&#237;hoz, povinn&#253;, opravněn&#253;, dražba, vydražitel, dražebn&#237; vyhl&#225;ška, dražebn&#237; jistota, nejnižš&#237; pod&#225;n&#237;&quot;);\r\n\t\t} catch (Error e) {\r\n\t\t\tverificationErrors.append(e.toString());\r\n\t\t\tSystem.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 3.5 help: N&#225;pověda &gt; 5. Pojmy obsahuje chybu, někter&#253; z n&#225;sleduj&#237;ch linků je chybn&#253;: Předkupn&#237; pr&#225;vo, př&#237;hoz, pod&#225;n&#237;, prvn&#237; př&#237;hoz, povinn&#253;, opravněn&#253;, dražba, vydražitel, dražebn&#237; vyhl&#225;ška, dražebn&#237; jistota, nejnižš&#237; pod&#225;n&#237;!!!&quot;);\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t@AfterMethod\r\n\tpublic void tearDown() throws Exception {\r\n\t\tdriver.close();\r\n\t\ttry\r\n\t\t{\r\n\t\t\tThread.sleep(5000);\r\n\t\t\tdriver.quit();\r\n\t\t}\r\n\t\tcatch(Exception e)\r\n\t\t{\r\n\t\t}\r\n\t}\r\n\tprivate boolean isElementPresent(By by) {\r\n\t\ttry {\r\n\t\t\tdriver.findElement(by);\r\n\t\t\treturn true;\r\n\t\t} catch (NoSuchElementException e) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n    }","title":"How to get current date in Java","body":"<p>I am creating an automatic test for some webs and I'm using WebDriver, TestNG and code that is written in Java. Every output from the console should display time, when a step is performed. A week ago everything was OK, every step had a different time set. However, now the time stays still the same.</p>\n<pre><code>09:50:48: ***********start***********\n09:50:48: ***********PART 1***********\n09:50:48: 1.1 home: OK xxxx\n09:50:48: ***********PART 2***********\n09:50:48: 2.1 home: OK xxxx\n09:50:48: 2.2 home: OK xxxx\n09:50:48: 2.3 home: OK URL xxxx\n09:50:48: 2.4 home: OK xxxx\n09:50:48: ***********PART 3***********\n....\n</code></pre>\n<p>I have used this code:</p>\n<pre><code>Date dNow = new Date( );\nSimpleDateFormat ft = new SimpleDateFormat (&quot;yyyy-MM-dd hh:mm:ss&quot;);\n\nSystem.out.println(ft.format(dNow) + &quot;:&quot; + &quot; xxxx&quot;);\n</code></pre>\n<p>How can I get again the current time for every step?</p>\n<p>Code of test:</p>\n<pre><code>package exDrazby;\n\nimport java.text.SimpleDateFormat;\nimport java.util.concurrent.TimeUnit;\nimport static org.junit.Assert.*;\nimport org.openqa.selenium.*;\nimport org.openqa.selenium.firefox.FirefoxDriver;\nimport org.testng.annotations.AfterMethod;\nimport org.testng.annotations.BeforeMethod;\nimport org.testng.annotations.Test;\nimport java.util.*;\nimport java.util.NoSuchElementException;\n\n\npublic class Help {\n    private WebDriver driver;\n    private String baseUrl;\n    private StringBuffer verificationErrors = new StringBuffer();\n     Date dNow = new Date( );\n     SimpleDateFormat ft = new SimpleDateFormat (&quot;yyyy-MM-dd hh:mm:ss&quot;);\n\n@BeforeMethod\npublic void setUp() throws Exception {\n    driver = new FirefoxDriver();\n    //driver.manage().window().maximize();\n    baseUrl = &quot;http://www.labmultis.info&quot;;\n    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\n     \n}\n@Test\npublic void testHelpStep1WD() throws Exception {\n    System.out.println(&quot; **************************************&quot;);\n    System.out.println(&quot; * Test projektu: exdrazby.cz –admin verze 3.3s&quot;);\n    System.out.println(&quot; * Test: HELP verze 1.0&quot;);\n    System.out.println(&quot; **************************************&quot;);\n    System.out.println(&quot; &quot;);\n    System.out.println(ft.format(dNow) + &quot;:&quot; + &quot; ***********ZAČÁTEK TESTU HELP***********&quot;);\n    System.out.println(ft.format(dNow) + &quot;:&quot; + &quot; ***********PART 1***********&quot;);\n    driver.get(baseUrl + &quot;/jpecka.portal-exdrazby/index.php?a=mujucet&amp;aa=resetheslo&quot;);\n    driver.findElement(By.linkText(&quot;Nápověda&quot;)).click();\n    try {\n        assertEquals(&quot;Úvod &gt; Nápověda&quot;, driver.findElement(By.cssSelector(&quot;p.breadcrumb&quot;)).getText());\n        System.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 1.1 help: OK stránka nápověda dostupná&quot;);\n    } catch (Error e) {\n        verificationErrors.append(e.toString());\n        System.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 1.1 help: stránku nápověda se nepodařilo zobrazit!!!&quot;);\n    }\n    assertTrue(isElementPresent(By.cssSelector(&quot;div.box.box-inner&quot;)));\n    System.out.println(ft.format(dNow) + &quot;:&quot; + &quot; ***********PART 2***********&quot;);\n    try {\n        assertEquals(&quot;Obsah&quot;, driver.findElement(By.cssSelector(&quot;h3&quot;)).getText());\n        System.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 2.1 help: OK box s nápovědou vlevo je zobrazen&quot;);\n    } catch (Error e) {\n        verificationErrors.append(e.toString());\n        System.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 2.1 help: box s nápovědou vlevo je chybí!!!&quot;);\n    }\n    assertTrue(isElementPresent(By.linkText(&quot;Registrace na portálu&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;Jak splnit podmínky účasti v dražbě&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;Jak dražit&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;Jak hledat dražby&quot;)));\n    try {\n        assertTrue(isElementPresent(By.linkText(&quot;Pojmy&quot;)));\n        System.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 2.2 help: OK box s nápovědou vlevo obsahuje funkční linky: registrace na portálu, jak splnit podmínky účasti v dražbě, jak dražit, jak hledat dražby a pojmy&quot;);\n    } catch (Error e) {\n        verificationErrors.append(e.toString());\n        System.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 2.2 help: box s nápovědou vlevo obsahuje chybu, některý z následujích linků není funkční: registrace na portálu, jak splnit podmínky účasti v dražbě, jak dražit, jak hledat dražby a pojmy!!!&quot;);\n    }\n    System.out.println(ft.format(dNow) + &quot;:&quot; + &quot; ***********PART 3***********&quot;);\n    assertTrue(isElementPresent(By.linkText(&quot;Jak se registrovat&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;Co je základní registrace&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;Registrace dražitele&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;Co je registrace ostatních účastníků dražby&quot;)));\n    driver.findElement(By.xpath(&quot;//a[contains(text(),'Co v případě, že se nemůžete  registrovat nebo přihlásit?')]&quot;)).click();\n\n    try {\n        assertTrue(driver.findElement(By.xpath(&quot;/html/body/div[1]/div/section/div/div[2]/ol/h2&quot;)).getText().matches(&quot;^Co v případě, že se nemůžete registrovat nebo přihlásit[\\\\s\\\\S]$&quot;));\n        System.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 3.1 help: OK Nápověda &gt; 1. registrace na portálu obsahuje funkční následující linky: jak se registrovat, co je základní registrace, co je registrace dražitele, Co je registrace ostatních účastníků dražby, Co v případě, že se nemůžete registrovat nebo přihlásit.&quot;);\n    } catch (Error e) {\n        verificationErrors.append(e.toString());\n        System.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 3.1 help: Nápověda &gt; 1. registrace na portálu obsahuje chybu, některý z následujích linků není funkční: jak se registrovat, co je základní registrace, co je registrace dražitele, Co je registrace ostatních účastníků dražby, Co v případě, že se nemůžete registrovat nebo přihlásit.!!!&quot;);\n    }\n    driver.findElement(By.linkText(&quot;Pojmy&quot;)).click();\n    try {\n        assertEquals(&quot;Pojmy&quot;, driver.findElement(By.xpath(&quot;//li[5]/div&quot;)).getText());\n    } catch (Error e) {\n        verificationErrors.append(e.toString());\n    }\n    assertTrue(isElementPresent(By.linkText(&quot;Jak prokázat totožnost&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;Ověření totožnosti u exekutora&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;Doložení ověřené totožnosti doklady zaslanými poštou&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;Doložení ověřené totožnosti kvalifikovaným certifikátem&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;Doložení ověřené totožnosti datovou schránkou&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;Doložení ověřené totožnosti doklady konvertovanými na poště&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;Jak složit dražební jistotu&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;Práce s konvertovaným dokladem v části Můj účet&quot;)));\n    driver.findElement(By.xpath(&quot;(//a[contains(text(),'Jak splnit podmínky účasti v dražbě')])[2]&quot;)).click();\n    try {\n        assertEquals(&quot;Jak splnit podmínky účasti v dražbě&quot;, driver.findElement(By.cssSelector(&quot;h2&quot;)).getText());\n        System.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 3.2 help: OK Nápověda &gt; 2. Jak splnit podmínky účasti v dražbě obsahuje funkční následující linky:Jak splnit podmínky účasti v dražbě, Jak prokázat totožnost, ověření totožnosti u exekutora, Doložení ověřené totožnosti doklady zaslanými poštou, Doložení ověřené totožnosti kvalifikovaným certifikátem, Doložení ověřené totožnosti datovou schránkou, Doložení ověřené totožnosti doklady konvertovanými na poště, Jak složit dražební jistotu, Práce s konvertovaným dokladem v části Můj účet&quot;);\n    } catch (Error e) {\n        verificationErrors.append(e.toString());\n        System.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 3.2 help: Nápověda &gt; 2. Jak splnit podmínky účasti v dražbě obsahuje chybu, někter z následujících linků není funkční:Jak splnit podmínky účasti v dražbě, Jak prokázat totožnost, ověření totožnosti u exekutora, Doložení ověřené totožnosti doklady zaslanými poštou, Doložení ověřené totožnosti kvalifikovaným certifikátem, Doložení ověřené totožnosti datovou schránkou, Doložení ověřené totožnosti doklady konvertovanými na poště, Jak složit dražební jistotu, Práce s konvertovaným dokladem v části Můj účet!!!&quot;);\n    }\n    try {\n        assertTrue(isElementPresent(By.cssSelector(&quot;img&quot;)));\n    } catch (Error e) {\n        verificationErrors.append(e.toString());\n    }\n    driver.findElement(By.cssSelector(&quot;a[title=\\&quot;Nápovéda\\&quot;]&quot;)).click();\n    assertTrue(isElementPresent(By.linkText(&quot;Kdy začne dražba&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;Jak přihazovat&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;Kdy dražba končí&quot;)));\n    driver.findElement(By.linkText(&quot;Jak podat námitky&quot;)).click();\n    try {\n        assertEquals(&quot;Jak podat námitky&quot;, driver.findElement(By.cssSelector(&quot;h2&quot;)).getText());\n        System.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 3.3 help: OK Nápověda &gt; 3. Jak dražit obsahuje funkční následující linky: Kdy začne dražba, jak přihazovat, kdy dražba končí, jak podat námitky&quot;);\n    } catch (Error e) {\n        verificationErrors.append(e.toString());\n        System.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 3.3 help: Nápověda &gt; 3. Jak dražit obsahuje chybu, některý z následujících linků je nefunkční: Kdy začne dražba, jak přihazovat, kdy dražba končí, jak podat námitky!!!&quot;);\n    }\n    driver.findElement(By.cssSelector(&quot;a[title=\\&quot;Nápovéda\\&quot;]&quot;)).click();\n    assertTrue(isElementPresent(By.linkText(&quot;Jak hledat dražbu&quot;)));\n    driver.findElement(By.linkText(&quot;Jak nastavit emailové upozornění&quot;)).click();\n    try {\n        assertEquals(&quot;Jak nastavit emailové upozornění&quot;, driver.findElement(By.cssSelector(&quot;h2&quot;)).getText());\n        System.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 3.4 help: OK Nápověda &gt; 4. Jak hledat dražby obsahuje funkční následující linky: Jak hledat dražbu, jak nastavit emailové upozornění&quot;);\n    } catch (Error e) {\n        verificationErrors.append(e.toString());\n        System.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 3.4 help: Nápověda &gt; 4. Jak hledat dražby obsahuje chybu,  některý z následujících linků není funkční: Jak hledat dražbu, jak nastavit emailové upozornění!!!&quot;);\n    }\n    driver.findElement(By.cssSelector(&quot;a[title=\\&quot;Nápovéda\\&quot;]&quot;)).click();\n    assertTrue(isElementPresent(By.linkText(&quot;Předkupní právo&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;Příhoz&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;Podání&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;První příhoz&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;Povinný&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;Oprávněný&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;Dražba&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;Vydražitel&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;Dražební vyhláška&quot;)));\n    assertTrue(isElementPresent(By.linkText(&quot;Dražební jistota&quot;)));\n    driver.findElement(By.linkText(&quot;Nejnižší podání&quot;)).click();\n    try {\n        assertEquals(&quot;Nejnižší podání&quot;, driver.findElement(By.cssSelector(&quot;h2&quot;)).getText());\n        System.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 3.5 help: OK Nápověda &gt; 5. Pojmy obsahuje funkční následující linky: Předkupní právo, příhoz, podání, první příhoz, povinný, opravněný, dražba, vydražitel, dražební vyhláška, dražební jistota, nejnižší podání&quot;);\n    } catch (Error e) {\n        verificationErrors.append(e.toString());\n        System.out.println(ft.format(dNow) + &quot;:&quot; + &quot; 3.5 help: Nápověda &gt; 5. Pojmy obsahuje chybu, některý z následujích linků je chybný: Předkupní právo, příhoz, podání, první příhoz, povinný, opravněný, dražba, vydražitel, dražební vyhláška, dražební jistota, nejnižší podání!!!&quot;);\n    }\n}\n\n\n@AfterMethod\npublic void tearDown() throws Exception {\n    driver.close();\n    try\n    {\n        Thread.sleep(5000);\n        driver.quit();\n    }\n    catch(Exception e)\n    {\n    }\n}\nprivate boolean isElementPresent(By by) {\n    try {\n        driver.findElement(by);\n        return true;\n    } catch (NoSuchElementException e) {\n        return false;\n    }\n}\n}\n</code></pre>\n"},{"tags":["java","artificial-intelligence","tic-tac-toe","minmax"],"comments":[{"owner":{"account_id":3317226,"reputation":2153,"user_id":2789300,"accept_rate":88,"display_name":"Alejandro Cumpa"},"score":0,"creation_date":1676646284,"post_id":75485682,"comment_id":133184885,"body_markdown":"What&#39;s the error you&#39;re getting and what should be the accepted answer?  Also you don&#39;t need to use &quot;else if&quot; if you&#39;re returning a value in the previous step, cause it would never be an else.","body":"What&#39;s the error you&#39;re getting and what should be the accepted answer?  Also you don&#39;t need to use &quot;else if&quot; if you&#39;re returning a value in the previous step, cause it would never be an else."},{"owner":{"account_id":18373590,"reputation":173,"user_id":13383185,"display_name":"readJohn"},"score":0,"creation_date":1676647514,"post_id":75485682,"comment_id":133185270,"body_markdown":"@AlejandroCumpa  if i am going to win, the ai is not trying to occupy the case , so it&#39;s ignoring my winning cases","body":"@AlejandroCumpa  if i am going to win, the ai is not trying to occupy the case , so it&#39;s ignoring my winning cases"},{"owner":{"account_id":3317226,"reputation":2153,"user_id":2789300,"accept_rate":88,"display_name":"Alejandro Cumpa"},"score":0,"creation_date":1676647820,"post_id":75485682,"comment_id":133185362,"body_markdown":"Can you post your Tableu class ?","body":"Can you post your Tableu class ?"}],"answers":[{"tags":[],"owner":{"account_id":3317226,"reputation":2153,"user_id":2789300,"accept_rate":88,"display_name":"Alejandro Cumpa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676657441,"creation_date":1676657441,"answer_id":75487882,"question_id":75485682,"body_markdown":"The problem relies on the `ChooseCase` function, because it is just evaluating where the board is empty, so it would choose the first or the last empy space ( depending on minimizing or maximizing). You need to adjust your `Evaluation Function` to be aware of the board state so it can makes a better choice, taking this exmple: \r\nhttps://kartikkukreja.wordpress.com/2013/03/30/heuristic-function-for-tic-tac-toe/\r\n\r\nIn Java should look like this: \r\n\r\n    private final int possibleWins = 8;\r\n    private final int[][] threeInARow = {\r\n            { 0, 1, 2 },\r\n            { 3, 4, 5 },\r\n            { 6, 7, 8 },\r\n            { 0, 3, 6 },\r\n            { 1, 4, 7 },\r\n            { 2, 5, 8 },\r\n            { 0, 4, 8 },\r\n            { 2, 4, 6 }\r\n    };\r\n    private final int[][] heuristicArray = {\r\n            { 0, -10, -100, -1000 },\r\n            { 10, 0, 0, 0 },\r\n            { 100, 0, 0, 0 },\r\n            { 1000, 0, 0, 0 }\r\n    };\r\n\r\n    public int evaluatePosition(char[] board, char player) {\r\n        char opponent = (player == &#39;X&#39;) ? &#39;O&#39; : &#39;X&#39;, piece;\r\n        int players, others, t = 0, i, j;\r\n\r\n        for (i = 0; i &lt; 8; i++)  {\r\n            players = others = 0;\r\n            for (j = 0; j &lt; 3; j++)  {\r\n                piece = board[threeInARow[i][j]];\r\n                if (piece == player)\r\n                    players++;\r\n                else if (piece == opponent)\r\n                    others++;\r\n            }\r\n            t += heuristicArray[players][others];\r\n        }\r\n        return t;\r\n    }\r\n  \r\n\r\n   \r\n\r\n\r\n\r\n\r\nAlso check the previous question: https://stackoverflow.com/questions/20872330/how-to-create-an-evaluation-function-for-a-tic-tac-toe-variant-game\r\n\r\n\r\n","title":"MinMax algorithm is not counting the human player","body":"<p>The problem relies on the <code>ChooseCase</code> function, because it is just evaluating where the board is empty, so it would choose the first or the last empy space ( depending on minimizing or maximizing). You need to adjust your <code>Evaluation Function</code> to be aware of the board state so it can makes a better choice, taking this exmple:\n<a href=\"https://kartikkukreja.wordpress.com/2013/03/30/heuristic-function-for-tic-tac-toe/\" rel=\"nofollow noreferrer\">https://kartikkukreja.wordpress.com/2013/03/30/heuristic-function-for-tic-tac-toe/</a></p>\n<p>In Java should look like this:</p>\n<pre><code>private final int possibleWins = 8;\nprivate final int[][] threeInARow = {\n        { 0, 1, 2 },\n        { 3, 4, 5 },\n        { 6, 7, 8 },\n        { 0, 3, 6 },\n        { 1, 4, 7 },\n        { 2, 5, 8 },\n        { 0, 4, 8 },\n        { 2, 4, 6 }\n};\nprivate final int[][] heuristicArray = {\n        { 0, -10, -100, -1000 },\n        { 10, 0, 0, 0 },\n        { 100, 0, 0, 0 },\n        { 1000, 0, 0, 0 }\n};\n\npublic int evaluatePosition(char[] board, char player) {\n    char opponent = (player == 'X') ? 'O' : 'X', piece;\n    int players, others, t = 0, i, j;\n\n    for (i = 0; i &lt; 8; i++)  {\n        players = others = 0;\n        for (j = 0; j &lt; 3; j++)  {\n            piece = board[threeInARow[i][j]];\n            if (piece == player)\n                players++;\n            else if (piece == opponent)\n                others++;\n        }\n        t += heuristicArray[players][others];\n    }\n    return t;\n}\n</code></pre>\n<p>Also check the previous question: <a href=\"https://stackoverflow.com/questions/20872330/how-to-create-an-evaluation-function-for-a-tic-tac-toe-variant-game\">How to create an evaluation function for a TIC-TAC-TOE variant game</a></p>\n"}],"owner":{"account_id":18373590,"reputation":173,"user_id":13383185,"display_name":"readJohn"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75487882,"answer_count":1,"score":0,"last_activity_date":1676657441,"creation_date":1676644827,"question_id":75485682,"body_markdown":"I am using MinMax algorithm for Tictactoe, and it works correctly, but it&#39;s trying to win, without blocking my turns, so it&#39;s very easy to win the AI.\r\nI added the depth parameter, but the result is the same.\r\nHere you can see my code:\r\n\r\n\r\n    public int playMiniMax(Tableau t, char maximizingPlayer,int depth) {\r\n        int bestMove = 0;\r\n        if (t.getWinner() == &#39;x&#39;) {\r\n            return 1;\r\n        } else if (t.getWinner() == &#39;d&#39;) {\r\n            return 0;\r\n        } else if (t.getWinner() == &#39;o&#39;) {\r\n            return -1;\r\n        }\r\n        else if (depth == 0) {\r\n            return 0;\r\n        }\r\n        else {\r\n            int bestValue;\r\n            int i;\r\n            if (maximizingPlayer == &#39;x&#39;) {\r\n                bestValue = Integer.MIN_VALUE;\r\n\r\n                for(i = 1; i &lt;= 9; ++i) {\r\n                    if (t.chooseCase(i, &#39;x&#39;)) {\r\n                        bestValue = Math.max(bestValue, this.playMiniMax(t, &#39;o&#39;,depth-1));\r\n                        bestMove = i;\r\n                        t.resetCase(i);\r\n                    }\r\n                }\r\n            } else {\r\n                bestValue = Integer.MAX_VALUE;\r\n\r\n                for(i = 1; i &lt;= 9; ++i) {\r\n                    if (t.chooseCase(i, &#39;o&#39;)) {\r\n                        bestValue = Math.min(bestValue, this.playMiniMax(t, &#39;x&#39;,depth-1));\r\n                        bestMove = i;\r\n                        t.resetCase(i);\r\n                    }\r\n                }\r\n            }\r\n\r\n            return bestMove;\r\n        }\r\n    }\r\nThe &quot;bestMove&quot; is the best case(from 1 to 9) proposed by minmax, and in my main I am calling it like this:\r\n\r\n     int movei = playerAI.playMiniMax(t, &#39;x&#39;,3);\r\n                correctCase = t.chooseCase(movei, &#39;x&#39;);\r\n\r\n\r\n\r\n    public class Tableau {\r\n        private char[][] charArray;\r\n        private boolean gameIsOver = false;\r\n        private char winner = &#39;n&#39;;\r\n\r\n    Tableau(char[][] _charArray) {\r\n        this.charArray = _charArray;\r\n        this.moves = new Stack();\r\n        this.ceateTable();\r\n    }\r\n\r\n    public void ceateTable() {\r\n        for(int i = 0; i &lt; this.charArray.length; ++i) {\r\n            for(int j = 0; j &lt; this.charArray.length; ++j) {\r\n                if (j != 2 &amp;&amp; j != 5) {\r\n                    System.out.print(this.charArray[i][j] + &quot;|&quot;);\r\n                } else {\r\n                    System.out.println(this.charArray[i][j] + &quot;|&quot;);\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    public boolean chooseCase(int number, char player) {\r\n        int c = 1;\r\n\r\n        for(int i = 0; i &lt; this.charArray.length; ++i) {\r\n            for(int j = 0; j &lt; this.charArray.length; ++j) {\r\n                if (c == number &amp;&amp; this.charArray[i][j] == &#39;-&#39;) {\r\n                    this.charArray[i][j] = player;\r\n                    return true;\r\n                }\r\n\r\n                ++c;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public void resetCase(int number) {\r\n        int c = 1;\r\n\r\n        for(int i = 0; i &lt; this.charArray.length; ++i) {\r\n            for(int j = 0; j &lt; this.charArray.length; ++j) {\r\n                if (c == number) {\r\n                    this.charArray[i][j] = &#39;-&#39;;\r\n                }\r\n\r\n                ++c;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    public boolean checkWin(char player) {\r\n        if ((this.charArray[0][0] != player || this.charArray[0][1] != player || this.charArray[0][2] != player) &amp;&amp; (this.charArray[1][0] != player || this.charArray[1][1] != player || this.charArray[1][2] != player) &amp;&amp; (this.charArray[2][0] != player || this.charArray[2][1] != player || this.charArray[2][2] != player) &amp;&amp; (this.charArray[0][0] != player || this.charArray[1][0] != player || this.charArray[2][0] != player) &amp;&amp; (this.charArray[0][1] != player || this.charArray[1][1] != player || this.charArray[2][1] != player) &amp;&amp; (this.charArray[0][2] != player || this.charArray[1][2] != player || this.charArray[2][2] != player) &amp;&amp; (this.charArray[0][0] != player || this.charArray[1][1] != player || this.charArray[2][2] != player) &amp;&amp; (this.charArray[0][2] != player || this.charArray[1][1] != player || this.charArray[2][0] != player)) {\r\n            return false;\r\n        } else {\r\n            System.out.println(&quot;Dear &quot; + player + &quot; you won!&quot;);\r\n            this.gameIsOver = true;\r\n            this.winner = player;\r\n            return true;\r\n        }\r\n    }\r\n\r\n    public boolean isFull() {\r\n        for(int i = 0; i &lt; this.charArray.length; ++i) {\r\n            for(int j = 0; j &lt; this.charArray.length; ++j) {\r\n                if (this.charArray[i][j] == &#39;-&#39;) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    public boolean checkDraw(char player) {\r\n        if (!this.checkWin(player) &amp;&amp; this.isFull()) {\r\n            System.out.println(&quot;It&#39;s a draw!!!&quot;);\r\n            this.winner = &#39;d&#39;;\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public boolean checkLoose(char player) {\r\n        return player == &#39;x&#39; ? this.checkWin(&#39;o&#39;) : false;\r\n    }\r\n\r\n    public boolean isGameIsOver() {\r\n        return this.gameIsOver;\r\n    }\r\n\r\n    public void setGameIsOver(boolean gameIsOver) {\r\n        this.gameIsOver = gameIsOver;\r\n    }\r\n\r\n    public char getWinner() {\r\n        return this.winner;\r\n    }\r\n\r\n    public void setWinner(char winner) {\r\n        this.winner = winner;\r\n    }\r\n}\r\n\r\n","title":"MinMax algorithm is not counting the human player","body":"<p>I am using MinMax algorithm for Tictactoe, and it works correctly, but it's trying to win, without blocking my turns, so it's very easy to win the AI.\nI added the depth parameter, but the result is the same.\nHere you can see my code:</p>\n<pre><code>public int playMiniMax(Tableau t, char maximizingPlayer,int depth) {\n    int bestMove = 0;\n    if (t.getWinner() == 'x') {\n        return 1;\n    } else if (t.getWinner() == 'd') {\n        return 0;\n    } else if (t.getWinner() == 'o') {\n        return -1;\n    }\n    else if (depth == 0) {\n        return 0;\n    }\n    else {\n        int bestValue;\n        int i;\n        if (maximizingPlayer == 'x') {\n            bestValue = Integer.MIN_VALUE;\n\n            for(i = 1; i &lt;= 9; ++i) {\n                if (t.chooseCase(i, 'x')) {\n                    bestValue = Math.max(bestValue, this.playMiniMax(t, 'o',depth-1));\n                    bestMove = i;\n                    t.resetCase(i);\n                }\n            }\n        } else {\n            bestValue = Integer.MAX_VALUE;\n\n            for(i = 1; i &lt;= 9; ++i) {\n                if (t.chooseCase(i, 'o')) {\n                    bestValue = Math.min(bestValue, this.playMiniMax(t, 'x',depth-1));\n                    bestMove = i;\n                    t.resetCase(i);\n                }\n            }\n        }\n\n        return bestMove;\n    }\n}\n</code></pre>\n<p>The &quot;bestMove&quot; is the best case(from 1 to 9) proposed by minmax, and in my main I am calling it like this:</p>\n<pre><code> int movei = playerAI.playMiniMax(t, 'x',3);\n            correctCase = t.chooseCase(movei, 'x');\n\n\n\npublic class Tableau {\n    private char[][] charArray;\n    private boolean gameIsOver = false;\n    private char winner = 'n';\n\nTableau(char[][] _charArray) {\n    this.charArray = _charArray;\n    this.moves = new Stack();\n    this.ceateTable();\n}\n\npublic void ceateTable() {\n    for(int i = 0; i &lt; this.charArray.length; ++i) {\n        for(int j = 0; j &lt; this.charArray.length; ++j) {\n            if (j != 2 &amp;&amp; j != 5) {\n                System.out.print(this.charArray[i][j] + &quot;|&quot;);\n            } else {\n                System.out.println(this.charArray[i][j] + &quot;|&quot;);\n            }\n        }\n    }\n\n}\n\npublic boolean chooseCase(int number, char player) {\n    int c = 1;\n\n    for(int i = 0; i &lt; this.charArray.length; ++i) {\n        for(int j = 0; j &lt; this.charArray.length; ++j) {\n            if (c == number &amp;&amp; this.charArray[i][j] == '-') {\n                this.charArray[i][j] = player;\n                return true;\n            }\n\n            ++c;\n        }\n    }\n\n    return false;\n}\n\npublic void resetCase(int number) {\n    int c = 1;\n\n    for(int i = 0; i &lt; this.charArray.length; ++i) {\n        for(int j = 0; j &lt; this.charArray.length; ++j) {\n            if (c == number) {\n                this.charArray[i][j] = '-';\n            }\n\n            ++c;\n        }\n    }\n\n}\n\npublic boolean checkWin(char player) {\n    if ((this.charArray[0][0] != player || this.charArray[0][1] != player || this.charArray[0][2] != player) &amp;&amp; (this.charArray[1][0] != player || this.charArray[1][1] != player || this.charArray[1][2] != player) &amp;&amp; (this.charArray[2][0] != player || this.charArray[2][1] != player || this.charArray[2][2] != player) &amp;&amp; (this.charArray[0][0] != player || this.charArray[1][0] != player || this.charArray[2][0] != player) &amp;&amp; (this.charArray[0][1] != player || this.charArray[1][1] != player || this.charArray[2][1] != player) &amp;&amp; (this.charArray[0][2] != player || this.charArray[1][2] != player || this.charArray[2][2] != player) &amp;&amp; (this.charArray[0][0] != player || this.charArray[1][1] != player || this.charArray[2][2] != player) &amp;&amp; (this.charArray[0][2] != player || this.charArray[1][1] != player || this.charArray[2][0] != player)) {\n        return false;\n    } else {\n        System.out.println(&quot;Dear &quot; + player + &quot; you won!&quot;);\n        this.gameIsOver = true;\n        this.winner = player;\n        return true;\n    }\n}\n\npublic boolean isFull() {\n    for(int i = 0; i &lt; this.charArray.length; ++i) {\n        for(int j = 0; j &lt; this.charArray.length; ++j) {\n            if (this.charArray[i][j] == '-') {\n                return false;\n            }\n        }\n    }\n\n    return true;\n}\n\npublic boolean checkDraw(char player) {\n    if (!this.checkWin(player) &amp;&amp; this.isFull()) {\n        System.out.println(&quot;It's a draw!!!&quot;);\n        this.winner = 'd';\n        return true;\n    } else {\n        return false;\n    }\n}\n\npublic boolean checkLoose(char player) {\n    return player == 'x' ? this.checkWin('o') : false;\n}\n\npublic boolean isGameIsOver() {\n    return this.gameIsOver;\n}\n\npublic void setGameIsOver(boolean gameIsOver) {\n    this.gameIsOver = gameIsOver;\n}\n\npublic char getWinner() {\n    return this.winner;\n}\n\npublic void setWinner(char winner) {\n    this.winner = winner;\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","spring","spring-data-jpa"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1676572432,"post_id":75476522,"comment_id":133168917,"body_markdown":"Your Java fields are of type `Instant`. And instant doesn&#39;t *have* a time zone (or even a UTC offset, which isn&#39;t the same thing) - it&#39;s just an instant in time. (It doesn&#39;t help that we don&#39;t know what kind of database you&#39;re using, or what the field types in the database are...)","body":"Your Java fields are of type <code>Instant</code>. And instant doesn&#39;t <i>have</i> a time zone (or even a UTC offset, which isn&#39;t the same thing) - it&#39;s just an instant in time. (It doesn&#39;t help that we don&#39;t know what kind of database you&#39;re using, or what the field types in the database are...)"},{"owner":{"account_id":7770850,"reputation":502,"user_id":5880486,"display_name":"erondem"},"score":0,"creation_date":1676572597,"post_id":75476522,"comment_id":133168971,"body_markdown":"I am using Postgres and types of fields are timestamp in database.","body":"I am using Postgres and types of fields are timestamp in database."},{"owner":{"account_id":7770850,"reputation":502,"user_id":5880486,"display_name":"erondem"},"score":0,"creation_date":1676572802,"post_id":75476522,"comment_id":133169031,"body_markdown":"@JonSkeet Can you have a look at edit I have made?","body":"@JonSkeet Can you have a look at edit I have made?"},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1676572965,"post_id":75476522,"comment_id":133169105,"body_markdown":"&quot;foundCase returned with GMT+3 again.&quot; seems pretty unclear to me, and you haven&#39;t addressed anything in my comment within the question. (All relevant information should be in the question.) As far as I&#39;m aware, the timestamp field in Postgres doesn&#39;t store UTC offset information either - again, it&#39;s just an instant in time. It might be *displayed* with respect to some time zone, but that&#39;s not the same as the value itself having a UTC offset.","body":"&quot;foundCase returned with GMT+3 again.&quot; seems pretty unclear to me, and you haven&#39;t addressed anything in my comment within the question. (All relevant information should be in the question.) As far as I&#39;m aware, the timestamp field in Postgres doesn&#39;t store UTC offset information either - again, it&#39;s just an instant in time. It might be <i>displayed</i> with respect to some time zone, but that&#39;s not the same as the value itself having a UTC offset."},{"owner":{"account_id":7770850,"reputation":502,"user_id":5880486,"display_name":"erondem"},"score":0,"creation_date":1676573081,"post_id":75476522,"comment_id":133169140,"body_markdown":"findByID() method returns those two fields with GMT+3 as they are appear in database on the contrary save() method saves entity to database with those fields are in GMT+3 but returns GMT+0","body":"findByID() method returns those two fields with GMT+3 as they are appear in database on the contrary save() method saves entity to database with those fields are in GMT+3 but returns GMT+0"},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1676573129,"post_id":75476522,"comment_id":133169155,"body_markdown":"&quot;findByID() method returns those two fields with GMT+3&quot; - in what way? What&#39;s the return type in Java? How *exactly* are you observing &quot;with GMT+3&quot;? Again, you should *edit your question* to make all of this much, much clearer.","body":"&quot;findByID() method returns those two fields with GMT+3&quot; - in what way? What&#39;s the return type in Java? How <i>exactly</i> are you observing &quot;with GMT+3&quot;? Again, you should <i>edit your question</i> to make all of this much, much clearer."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1676629798,"post_id":75476522,"comment_id":133180133,"body_markdown":"&quot;This is the database when I use save() method.&quot; You&#39;re showing a UI representation of the values. (We can&#39;t tell which UI.) If it&#39;s deciding to display the values in UTC+3, then so be it. That doesn&#39;t mean the value inherently &quot;knows&quot; that it&#39;s UTC+3. It looks like the same instant in time is being represented - in other words, there&#39;s no actual bug.","body":"&quot;This is the database when I use save() method.&quot; You&#39;re showing a UI representation of the values. (We can&#39;t tell which UI.) If it&#39;s deciding to display the values in UTC+3, then so be it. That doesn&#39;t mean the value inherently &quot;knows&quot; that it&#39;s UTC+3. It looks like the same instant in time is being represented - in other words, there&#39;s no actual bug."}],"answers":[{"tags":[],"owner":{"account_id":25866694,"reputation":191,"user_id":19598245,"display_name":"Phil Ku"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1676657146,"creation_date":1676657146,"answer_id":75487836,"question_id":75476522,"body_markdown":"It looks more likely a database timezone issue than a jpa issue.\r\n\r\nPlease first try executing `now()` in Postgresql and check the timezone of the database.\r\n\r\nMy guess is:\r\n\r\nAs both `lastModifiedDate` and `createdDate` are set `nullable = false`, when **saving** null values, timestamps of the db timezone were generated to the fields.\r\n\r\nWhen **finding** the entities, the timestamps are being treated as UTC, and since your application is in +3 timezone, it adds 3 hours to both fields.\r\n\r\nPersonally I would suggest using `j.u.Date` instead of `Instant` when saving entities to db.","title":"JPA saves entity to database with correct timezone but returns wrong timezone","body":"<p>It looks more likely a database timezone issue than a jpa issue.</p>\n<p>Please first try executing <code>now()</code> in Postgresql and check the timezone of the database.</p>\n<p>My guess is:</p>\n<p>As both <code>lastModifiedDate</code> and <code>createdDate</code> are set <code>nullable = false</code>, when <strong>saving</strong> null values, timestamps of the db timezone were generated to the fields.</p>\n<p>When <strong>finding</strong> the entities, the timestamps are being treated as UTC, and since your application is in +3 timezone, it adds 3 hours to both fields.</p>\n<p>Personally I would suggest using <code>j.u.Date</code> instead of <code>Instant</code> when saving entities to db.</p>\n"}],"owner":{"account_id":7770850,"reputation":502,"user_id":5880486,"display_name":"erondem"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":556,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1676657146,"creation_date":1676572322,"question_id":75476522,"body_markdown":"Hi I have problem with JPA timezone. My model has two field\r\n\r\n    @Data\r\n    @Builder\r\n    @Entity\r\n    @Table(name = &quot;cases&quot;)\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @EntityListeners(AuditingEntityListener.class)\r\n    @SequenceGenerator(name = &quot;seq_cases&quot;, sequenceName = &quot;seq_cases&quot;, allocationSize = 1)\r\n    public class Cases implements Serializable {\r\n    \r\n        @LastModifiedDate\r\n        @Column(nullable = false)\r\n        private Instant lastModifiedDate;\r\n    \r\n        @CreatedDate\r\n        @Column(nullable = false, updatable = false)\r\n        private Instant createdDate;\r\n    }\r\n\r\n I am using JPA repository as following.\r\n\r\n    @Repository\r\n    public interface CaseRepository extends JpaRepository&lt;Cases, UUID&gt; {\r\n    }\r\n\r\n\r\nIn Service, \r\n\r\n    var savedCase = caseRepository.save(caseDTO)\r\n\r\nI am saving Case entity with `caseRepository.save()` method without `lastModifiedDate` and `createdDate` in `caseDTO`. I am not sure when they are generated but those two fields are saved to database with timezone GMT+3. The response of `caseRepository.save()` which is `savedCase` has those two fields with timezone GMT+0.\r\n\r\nSo as summary response of caseRepository.save() method and record in database has different time zones. \r\n\r\nAlso this is my application.yml file and I am using `spring-boot-starter-data-jpa`\r\n\r\n    spring:\r\n      jackson:\r\n        time-zone: Asia/Istanbul\r\n    \r\n      jpa:\r\n        properties:\r\n          hibernate:\r\n            jdbc:\r\n              time_zone: Asia/Istanbul\r\n\r\n\r\n\r\nEdit: \r\n\r\n\r\nWhen I add this method to repository\r\n\r\n    @Repository\r\n    public interface CaseRepository extends JpaRepository&lt;Cases, UUID&gt; {\r\n        Optional&lt;Cases&gt; findById(UUID id);\r\n    }\r\n\r\n\r\n\r\nAnd use it like this:\r\n\r\n    var foundCase =  caseRepository.findById(UUID.fromString(id)).orElseThrow(() -&gt; new NotFoundException(&quot;Case not found.&quot;));\r\n\r\n\r\n\r\nfoundCase returned with GMT+3 again. So problem only occurs in save method.\r\n\r\nEdit 2:\r\n\r\nThis is the database when I use save() method.\r\n[![Database][1]][1]\r\n\r\nThis is the debug mode. You are seeing response of save() method. As you can see there is difference.  :\r\n\r\n[![Debug][2]][2]\r\n\r\nAnd this is response of findById method\r\n[![findById][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QrfB5.png\r\n  [2]: https://i.stack.imgur.com/DkG7W.png\r\n  [3]: https://i.stack.imgur.com/3fzoX.png","title":"JPA saves entity to database with correct timezone but returns wrong timezone","body":"<p>Hi I have problem with JPA timezone. My model has two field</p>\n<pre><code>@Data\n@Builder\n@Entity\n@Table(name = &quot;cases&quot;)\n@NoArgsConstructor\n@AllArgsConstructor\n@EntityListeners(AuditingEntityListener.class)\n@SequenceGenerator(name = &quot;seq_cases&quot;, sequenceName = &quot;seq_cases&quot;, allocationSize = 1)\npublic class Cases implements Serializable {\n\n    @LastModifiedDate\n    @Column(nullable = false)\n    private Instant lastModifiedDate;\n\n    @CreatedDate\n    @Column(nullable = false, updatable = false)\n    private Instant createdDate;\n}\n</code></pre>\n<p>I am using JPA repository as following.</p>\n<pre><code>@Repository\npublic interface CaseRepository extends JpaRepository&lt;Cases, UUID&gt; {\n}\n</code></pre>\n<p>In Service,</p>\n<pre><code>var savedCase = caseRepository.save(caseDTO)\n</code></pre>\n<p>I am saving Case entity with <code>caseRepository.save()</code> method without <code>lastModifiedDate</code> and <code>createdDate</code> in <code>caseDTO</code>. I am not sure when they are generated but those two fields are saved to database with timezone GMT+3. The response of <code>caseRepository.save()</code> which is <code>savedCase</code> has those two fields with timezone GMT+0.</p>\n<p>So as summary response of caseRepository.save() method and record in database has different time zones.</p>\n<p>Also this is my application.yml file and I am using <code>spring-boot-starter-data-jpa</code></p>\n<pre><code>spring:\n  jackson:\n    time-zone: Asia/Istanbul\n\n  jpa:\n    properties:\n      hibernate:\n        jdbc:\n          time_zone: Asia/Istanbul\n</code></pre>\n<p>Edit:</p>\n<p>When I add this method to repository</p>\n<pre><code>@Repository\npublic interface CaseRepository extends JpaRepository&lt;Cases, UUID&gt; {\n    Optional&lt;Cases&gt; findById(UUID id);\n}\n</code></pre>\n<p>And use it like this:</p>\n<pre><code>var foundCase =  caseRepository.findById(UUID.fromString(id)).orElseThrow(() -&gt; new NotFoundException(&quot;Case not found.&quot;));\n</code></pre>\n<p>foundCase returned with GMT+3 again. So problem only occurs in save method.</p>\n<p>Edit 2:</p>\n<p>This is the database when I use save() method.\n<a href=\"https://i.stack.imgur.com/QrfB5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QrfB5.png\" alt=\"Database\" /></a></p>\n<p>This is the debug mode. You are seeing response of save() method. As you can see there is difference.  :</p>\n<p><a href=\"https://i.stack.imgur.com/DkG7W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DkG7W.png\" alt=\"Debug\" /></a></p>\n<p>And this is response of findById method\n<a href=\"https://i.stack.imgur.com/3fzoX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3fzoX.png\" alt=\"findById\" /></a></p>\n"},{"tags":["java","android","android-imageview"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1676659238,"post_id":75487829,"comment_id":133188848,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":27757539,"reputation":9,"user_id":21190638,"display_name":"onwuegbuchi eric"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676657118,"creation_date":1676657118,"question_id":75487829,"body_markdown":"I have been trying to display multiple images with a image holder in a textview like in notes app but the solutions I have seen only support one image and the image view where just hidden and shows when you add images.\r\n\r\nExample \r\n\r\n[enter image description here](https://i.stack.imgur.com/ACLMY.jpg)\r\n\r\nIt could be images, audio or links\r\n\r\nI have taught of you creating multiple image view and hide and show them but I can&#39;t predict a user amount of image and that just inefficient ","title":"Display multiple images in android studio in textview","body":"<p>I have been trying to display multiple images with a image holder in a textview like in notes app but the solutions I have seen only support one image and the image view where just hidden and shows when you add images.</p>\n<p>Example</p>\n<p><a href=\"https://i.stack.imgur.com/ACLMY.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>It could be images, audio or links</p>\n<p>I have taught of you creating multiple image view and hide and show them but I can't predict a user amount of image and that just inefficient</p>\n"},{"tags":["java","maven","travis-ci"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1545073989,"post_id":53821519,"comment_id":94491827,"body_markdown":"Can you give more details cause it sounds a little bit weird to me using maven-verifier for integration tests ?","body":"Can you give more details cause it sounds a little bit weird to me using maven-verifier for integration tests ?"},{"owner":{"account_id":8235,"reputation":87010,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1545089866,"post_id":53821519,"comment_id":94497986,"body_markdown":"@khmarbaise What&#39;s weird about it? The title of [this section](https://maven.apache.org/plugin-developers/plugin-testing.html#maven-verifier) seems to imply this is precisely what maven-verifier is designed for. See https://github.com/cmake-maven-project/cmake-maven-project/blob/master/cmake-maven-plugin/src/test/java/com/googlecode/cmakemavenproject/CompileMojoIntegrationTest.java for a concrete example of how we use it.","body":"@khmarbaise What&#39;s weird about it? The title of <a href=\"https://maven.apache.org/plugin-developers/plugin-testing.html#maven-verifier\" rel=\"nofollow noreferrer\">this section</a> seems to imply this is precisely what maven-verifier is designed for. See <a href=\"https://github.com/cmake-maven-project/cmake-maven-project/blob/master/cmake-maven-plugin/src/test/java/com/googlecode/cmakemavenproject/CompileMojoIntegrationTest.java\" rel=\"nofollow noreferrer\">github.com/cmake-maven-project/cmake-maven-project/blob/mast&zwnj;&#8203;er/&hellip;</a> for a concrete example of how we use it."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1545113310,"post_id":53821519,"comment_id":94502972,"body_markdown":"Ah...you are doing a maven plugin. Than it is not weird of course...For such purposes I would suggest to use the maven-invoker-plugin...furthermore I would suggest to use maven-failsafe-plugin for integration tests instead of maven-surefire-plugin....Apart from that you can set the maven version used by running via `maven.home` environment  variable. But that might be point for improving the docs...(May be you can create an JIRA issue for that).","body":"Ah...you are doing a maven plugin. Than it is not weird of course...For such purposes I would suggest to use the maven-invoker-plugin...furthermore I would suggest to use maven-failsafe-plugin for integration tests instead of maven-surefire-plugin....Apart from that you can set the maven version used by running via <code>maven.home</code> environment  variable. But that might be point for improving the docs...(May be you can create an JIRA issue for that)."}],"answers":[{"tags":[],"owner":{"account_id":2510282,"reputation":12462,"user_id":2182928,"accept_rate":97,"display_name":"Rudi Kershaw"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676656621,"creation_date":1676503328,"answer_id":75466342,"question_id":53821519,"body_markdown":"According to the implementation of `org.apache.maven.it.Verifier#getMavenLauncher` (at version 1.7.2 when checked), it will attempt to use a Maven wrapper if that wrapper is present in the repository that you are running the test **on** (not in the project repository that is _running_ the test).\r\n\r\n    boolean useWrapper = Files.exists(Paths.get(getBasedir(), &quot;mvnw&quot;));\r\n\r\n\r\n`getBasedir()` is the root of the project folder being tested here. I had the same issue and I copied the `mvnw` and `.mvn` folders into the project I was testing, and it did indeed find the appropriate version of Maven.\r\n\r\nMy new *projects to be tested* look like this\r\n\r\n\r\n    default-test-project\r\n        |_ .mvn/\r\n        |_ mvnw\r\n        |_ pom.xml\r\n\r\nIt&#39;s worth mentioning that `Verifier#getMavenLauncher` doesn&#39;t appear to check for a `mvnw.cmd` so this may not work on a Windows machine.","title":"How to point maven-verifier at right version of Maven?","body":"<p>According to the implementation of <code>org.apache.maven.it.Verifier#getMavenLauncher</code> (at version 1.7.2 when checked), it will attempt to use a Maven wrapper if that wrapper is present in the repository that you are running the test <strong>on</strong> (not in the project repository that is <em>running</em> the test).</p>\n<pre><code>boolean useWrapper = Files.exists(Paths.get(getBasedir(), &quot;mvnw&quot;));\n</code></pre>\n<p><code>getBasedir()</code> is the root of the project folder being tested here. I had the same issue and I copied the <code>mvnw</code> and <code>.mvn</code> folders into the project I was testing, and it did indeed find the appropriate version of Maven.</p>\n<p>My new <em>projects to be tested</em> look like this</p>\n<pre><code>default-test-project\n    |_ .mvn/\n    |_ mvnw\n    |_ pom.xml\n</code></pre>\n<p>It's worth mentioning that <code>Verifier#getMavenLauncher</code> doesn't appear to check for a <code>mvnw.cmd</code> so this may not work on a Windows machine.</p>\n"}],"owner":{"account_id":8235,"reputation":87010,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75466342,"answer_count":1,"score":1,"last_activity_date":1676656621,"creation_date":1545073332,"question_id":53821519,"body_markdown":"I am using [Maven Wrapper](https://github.com/takari/maven-wrapper) on Travis because it ships with a super-old version of Maven by default.\r\n\r\nThe library being built runs integration tests using [maven-verifier](https://maven.apache.org/plugin-developers/plugin-testing.html#maven-verifier). The latter forks a JVM to run each integration test using the (outdated) Maven instance installed on the system.\r\n\r\nIs there a way to get maven-verifier to use the Maven version provided by Maven Wrapper?","title":"How to point maven-verifier at right version of Maven?","body":"<p>I am using <a href=\"https://github.com/takari/maven-wrapper\" rel=\"nofollow noreferrer\">Maven Wrapper</a> on Travis because it ships with a super-old version of Maven by default.</p>\n\n<p>The library being built runs integration tests using <a href=\"https://maven.apache.org/plugin-developers/plugin-testing.html#maven-verifier\" rel=\"nofollow noreferrer\">maven-verifier</a>. The latter forks a JVM to run each integration test using the (outdated) Maven instance installed on the system.</p>\n\n<p>Is there a way to get maven-verifier to use the Maven version provided by Maven Wrapper?</p>\n"},{"tags":["java","parsing","integer"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1676532373,"post_id":75468996,"comment_id":133156438,"body_markdown":"a String is not a numerical format, so you can&#39;t &quot;increment&quot; a String. What you can do, is parse a String to a numerical format (which is what you&#39;re doing, and where it fails), augment it, and parse it back to a String. &quot;foo3&quot; or similar, are not numerical values, and can&#39;t be parsed to a numerical type. put a breakpoint on the line where the error occurs, or add a print statement to see the String values you&#39;re trying to parse","body":"a String is not a numerical format, so you can&#39;t &quot;increment&quot; a String. What you can do, is parse a String to a numerical format (which is what you&#39;re doing, and where it fails), augment it, and parse it back to a String. &quot;foo3&quot; or similar, are not numerical values, and can&#39;t be parsed to a numerical type. put a breakpoint on the line where the error occurs, or add a print statement to see the String values you&#39;re trying to parse"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":2,"creation_date":1676532482,"post_id":75468996,"comment_id":133156455,"body_markdown":"`if(str == &quot;&quot;)` is wrong already as I&#39;d doubt `str` would ever be the same instance as the empty string literal. You need `if(str.equals(&quot;&quot;))` or `if(str.isEmpty())` instead.","body":"<code>if(str == &quot;&quot;)</code> is wrong already as I&#39;d doubt <code>str</code> would ever be the same instance as the empty string literal. You need <code>if(str.equals(&quot;&quot;))</code> or <code>if(str.isEmpty())</code> instead."},{"owner":{"account_id":9725613,"reputation":53334,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"score":1,"creation_date":1676532624,"post_id":75468996,"comment_id":133156489,"body_markdown":"@Stultuske that is already what the OP does","body":"@Stultuske that is already what the OP does"},{"owner":{"account_id":9725613,"reputation":53334,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"score":1,"creation_date":1676532670,"post_id":75468996,"comment_id":133156504,"body_markdown":"Can you share the full staktrace ? [edit] and add it","body":"Can you share the full staktrace ? <a href=\"https://stackoverflow.com/posts/75468996/edit\">edit</a> and add it"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1676532762,"post_id":75468996,"comment_id":133156525,"body_markdown":"The number is to big for an integer","body":"The number is to big for an integer"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1676532874,"post_id":75468996,"comment_id":133156546,"body_markdown":"You&#39;re using `BigInteger` for numeric strings already, which is correct as those could be large. But is there anything that let&#39;s you assume the numbers in a alpha-numeric string all fit into the `int` range? Why don&#39;t you use `BigInteger` there as well?","body":"You&#39;re using <code>BigInteger</code> for numeric strings already, which is correct as those could be large. But is there anything that let&#39;s you assume the numbers in a alpha-numeric string all fit into the <code>int</code> range? Why don&#39;t you use <code>BigInteger</code> there as well?"},{"owner":{"account_id":27800111,"reputation":1,"user_id":21224708,"display_name":"lvvl"},"score":0,"creation_date":1676533110,"post_id":75468996,"comment_id":133156605,"body_markdown":"input data can be like\n\n`fooboo2212031362069931272877416699`\nand out \n`fooboo2212031362069931272877416700`","body":"input data can be like  <code>fooboo2212031362069931272877416699</code> and out  <code>fooboo2212031362069931272877416700</code>"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1676533340,"post_id":75468996,"comment_id":133156669,"body_markdown":"That&#39;s exactly what I mean. Try using `Integer.parseInt(&quot;2212031362069931272877416699&quot;)` and see the result - that&#39;s what you&#39;re doing in the bottom portion of your code. (Hint: those numbers don&#39;t fit into the `Integer` range).","body":"That&#39;s exactly what I mean. Try using <code>Integer.parseInt(&quot;2212031362069931272877416699&quot;)</code> and see the result - that&#39;s what you&#39;re doing in the bottom portion of your code. (Hint: those numbers don&#39;t fit into the <code>Integer</code> range)."},{"owner":{"account_id":27800111,"reputation":1,"user_id":21224708,"display_name":"lvvl"},"score":0,"creation_date":1676534211,"post_id":75468996,"comment_id":133156900,"body_markdown":"all `Integer.parseInt(***)` needs to be replaced with\n `BigInteger a = new BigInteger(***)`","body":"all <code>Integer.parseInt(***)</code> needs to be replaced with  <code>BigInteger a = new BigInteger(***)</code>"}],"answers":[{"tags":[],"owner":{"account_id":9725613,"reputation":53334,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1676533834,"creation_date":1676533834,"answer_id":75469229,"question_id":75468996,"body_markdown":"The issue is with `Integer.parseInt(sec)` when trying to parse a value too long to fix in a int (max is 2 billion)\r\n\r\nYou need to use `BigInteger` everywhere, also there is much useless code. You can also capture the zeros in the first group of the regex, so you don&#39;t have leading zeros to take care\r\n\r\n    public static String incrementString(String str) {\r\n        boolean isNumeric = str.chars().allMatch(Character::isDigit);\r\n        if (str.isEmpty()) {\r\n            return &quot;1&quot;;\r\n        } else if (isNumeric) {\r\n            BigInteger b = new BigInteger(str);\r\n            return String.format(&quot;%0&quot; + str.length() + &quot;d&quot;, b.add(BigInteger.ONE));\r\n        }\r\n\r\n        String timeRegex = &quot;(.*\\\\D0*)([1-9][0-9]*)&quot;;\r\n        Matcher matcher = Pattern.compile(timeRegex).matcher(str);\r\n        if (matcher.matches()) {\r\n            String sec = matcher.group(2);\r\n            if (sec.isEmpty()) {\r\n                return str + 1;\r\n            } else {\r\n                BigInteger new_value = new BigInteger(sec).add(BigInteger.ONE);\r\n                return matcher.group(1) + new_value;\r\n            }\r\n        }\r\n        return &quot;&quot;;\r\n    }\r\n\r\n","title":"A function which increments a string, to create a new string","body":"<p>The issue is with <code>Integer.parseInt(sec)</code> when trying to parse a value too long to fix in a int (max is 2 billion)</p>\n<p>You need to use <code>BigInteger</code> everywhere, also there is much useless code. You can also capture the zeros in the first group of the regex, so you don't have leading zeros to take care</p>\n<pre><code>public static String incrementString(String str) {\n    boolean isNumeric = str.chars().allMatch(Character::isDigit);\n    if (str.isEmpty()) {\n        return &quot;1&quot;;\n    } else if (isNumeric) {\n        BigInteger b = new BigInteger(str);\n        return String.format(&quot;%0&quot; + str.length() + &quot;d&quot;, b.add(BigInteger.ONE));\n    }\n\n    String timeRegex = &quot;(.*\\\\D0*)([1-9][0-9]*)&quot;;\n    Matcher matcher = Pattern.compile(timeRegex).matcher(str);\n    if (matcher.matches()) {\n        String sec = matcher.group(2);\n        if (sec.isEmpty()) {\n            return str + 1;\n        } else {\n            BigInteger new_value = new BigInteger(sec).add(BigInteger.ONE);\n            return matcher.group(1) + new_value;\n        }\n    }\n    return &quot;&quot;;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1707439,"reputation":236096,"user_id":1566221,"accept_rate":86,"display_name":"rici"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676656606,"creation_date":1676656606,"answer_id":75487752,"question_id":75468996,"body_markdown":"How would you solve this problem by hand? I&#39;ll bet you wouldn&#39;t require a calculator.\r\n\r\nThe way I would do would be to just look at the last character in the string:\r\n1. If the string is empty or the last character is not a digit, append the character `1`.\r\n2. If the last character is one of the digits `0` to `8`, change it to the next digit.\r\n3. If the last character is the digit `9`:\r\n    + Remove all the trailing `9`s\r\n    + Apply whichever of (1) or (2) above is appropriate.\r\n    + Append the same number of `0`s as the number of `9`s you removed.\r\n\r\nYou can implement that simple algorithm in a few lines, without BigInteger and without regexes.\r\n\r\nThis seems to work, although I didn&#39;t test it thoroughly with different Unicode scripts (and I&#39;m really not a Java programmer):\r\n```java\r\n    public static String incrementString(String str) {\r\n        if (str.isEmpty())\r\n            return &quot;1&quot;;\r\n        char lastChar = str.charAt(str.length()-1);\r\n        if (!Character.isDigit(lastChar)) \r\n            return str + &quot;1&quot;;\r\n        String prefix = str.substring(0, str.length()-1);\r\n        if (Character.digit(lastChar, 10) != 9)\r\n            return prefix + (char)(lastChar + 1);\r\n        return incrementString(prefix) + (char)(lastChar - 9);\r\n    }\r\n```","title":"A function which increments a string, to create a new string","body":"<p>How would you solve this problem by hand? I'll bet you wouldn't require a calculator.</p>\n<p>The way I would do would be to just look at the last character in the string:</p>\n<ol>\n<li>If the string is empty or the last character is not a digit, append the character <code>1</code>.</li>\n<li>If the last character is one of the digits <code>0</code> to <code>8</code>, change it to the next digit.</li>\n<li>If the last character is the digit <code>9</code>:\n<ul>\n<li>Remove all the trailing <code>9</code>s</li>\n<li>Apply whichever of (1) or (2) above is appropriate.</li>\n<li>Append the same number of <code>0</code>s as the number of <code>9</code>s you removed.</li>\n</ul>\n</li>\n</ol>\n<p>You can implement that simple algorithm in a few lines, without BigInteger and without regexes.</p>\n<p>This seems to work, although I didn't test it thoroughly with different Unicode scripts (and I'm really not a Java programmer):</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static String incrementString(String str) {\n        if (str.isEmpty())\n            return &quot;1&quot;;\n        char lastChar = str.charAt(str.length()-1);\n        if (!Character.isDigit(lastChar)) \n            return str + &quot;1&quot;;\n        String prefix = str.substring(0, str.length()-1);\n        if (Character.digit(lastChar, 10) != 9)\n            return prefix + (char)(lastChar + 1);\n        return incrementString(prefix) + (char)(lastChar - 9);\n    }\n</code></pre>\n"}],"owner":{"account_id":27800111,"reputation":1,"user_id":21224708,"display_name":"lvvl"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1676656606,"creation_date":1676532258,"question_id":75468996,"body_markdown":"write a function which increments a string, to create a new string.\r\n\r\n- If the string already ends with a number, the number should be incremented by 1.\r\n- If the string does not end with a number. the number 1 should be appended to the new string.\r\n\r\nExamples: \r\n\r\n```\r\nfoo - foo1 \r\nfoobar23 - foobar24 \r\nfoo0042 - foo0043 \r\nfoo9 - foo10 \r\nfoo099 - foo100 \r\n```\r\n\r\nAttention: If the number has leading zeros the amount of digits should be considered.\r\n\r\nThe program passed tests on the CodeWars platform, except for one\r\nFor input string: &quot;1712031362069931272877416673&quot;\r\nshe falls on it\r\n\r\n```\r\nat java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67)\r\n```\r\n\r\nbut in IJ it works correctly ...\r\nAny idea why?\r\n\r\n```\r\nimport java.math.BigInteger;\r\nimport java.util.regex.Matcher;\r\nimport java.util.regex.Pattern;\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n\r\n        System.out.println(incrementString(&quot;foo001&quot;));\r\n        System.out.println(incrementString(&quot;33275375531813209960&quot;));\r\n        System.out.println(incrementString(&quot;0000004617702678077138438340108&quot;));\r\n    }\r\n\r\n    public static String incrementString(String str) {\r\n        boolean isNumeric = str.chars().allMatch( Character::isDigit );\r\n        if(str.isEmpty())\r\n            return &quot;1&quot;;\r\n\r\n        else if (isNumeric) {\r\n            BigInteger b = new BigInteger(str);\r\n            return String.format(&quot;%0&quot;+str.length() + &quot;d&quot;,b.add(BigInteger.valueOf(1)));\r\n        }\r\n        String timeRegex = &quot;(.*)(\\\\D)([0-9]*)&quot;;\r\n        Pattern pattern = Pattern.compile(timeRegex);\r\n        Matcher matcher = pattern.matcher(str);\r\n        if (matcher.matches()) {\r\n            String sec = matcher.group(3);\r\n            StringBuilder sb = new StringBuilder();\r\n            if (sec.isEmpty()) {\r\n                sec = &quot;0&quot;;\r\n                return str + sb+(Integer.parseInt(sec) + 1);\r\n            } else {\r\n                int length = String.valueOf(Integer.parseInt(sec) + 1).length();\r\n                if (sec.length() &gt; length) {\r\n\r\n                    for (int i = length; i &lt; sec.length(); i++) {\r\n                        sb.append(&quot;0&quot;);\r\n                    }\r\n                }\r\n                return str.substring(0,str.length() - sec.length()) + String.format(&quot;%0&quot;+sec.length() + &quot;d&quot;,Integer.parseInt(sec)+1);\r\n            }\r\n        }\r\n      else\r\n        return &quot;&quot;;\r\n    }\r\n}\r\n```","title":"A function which increments a string, to create a new string","body":"<p>write a function which increments a string, to create a new string.</p>\n<ul>\n<li>If the string already ends with a number, the number should be incremented by 1.</li>\n<li>If the string does not end with a number. the number 1 should be appended to the new string.</li>\n</ul>\n<p>Examples:</p>\n<pre><code>foo - foo1 \nfoobar23 - foobar24 \nfoo0042 - foo0043 \nfoo9 - foo10 \nfoo099 - foo100 \n</code></pre>\n<p>Attention: If the number has leading zeros the amount of digits should be considered.</p>\n<p>The program passed tests on the CodeWars platform, except for one\nFor input string: &quot;1712031362069931272877416673&quot;\nshe falls on it</p>\n<pre><code>at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67)\n</code></pre>\n<p>but in IJ it works correctly ...\nAny idea why?</p>\n<pre><code>import java.math.BigInteger;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\npublic class Main {\n    public static void main(String[] args) {\n\n        System.out.println(incrementString(&quot;foo001&quot;));\n        System.out.println(incrementString(&quot;33275375531813209960&quot;));\n        System.out.println(incrementString(&quot;0000004617702678077138438340108&quot;));\n    }\n\n    public static String incrementString(String str) {\n        boolean isNumeric = str.chars().allMatch( Character::isDigit );\n        if(str.isEmpty())\n            return &quot;1&quot;;\n\n        else if (isNumeric) {\n            BigInteger b = new BigInteger(str);\n            return String.format(&quot;%0&quot;+str.length() + &quot;d&quot;,b.add(BigInteger.valueOf(1)));\n        }\n        String timeRegex = &quot;(.*)(\\\\D)([0-9]*)&quot;;\n        Pattern pattern = Pattern.compile(timeRegex);\n        Matcher matcher = pattern.matcher(str);\n        if (matcher.matches()) {\n            String sec = matcher.group(3);\n            StringBuilder sb = new StringBuilder();\n            if (sec.isEmpty()) {\n                sec = &quot;0&quot;;\n                return str + sb+(Integer.parseInt(sec) + 1);\n            } else {\n                int length = String.valueOf(Integer.parseInt(sec) + 1).length();\n                if (sec.length() &gt; length) {\n\n                    for (int i = length; i &lt; sec.length(); i++) {\n                        sb.append(&quot;0&quot;);\n                    }\n                }\n                return str.substring(0,str.length() - sec.length()) + String.format(&quot;%0&quot;+sec.length() + &quot;d&quot;,Integer.parseInt(sec)+1);\n            }\n        }\n      else\n        return &quot;&quot;;\n    }\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9354,"page":638,"page_size":100}
