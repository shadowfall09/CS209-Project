{"items":[{"tags":["java","android","xml","eclipse"],"answers":[{"tags":[],"owner":{"account_id":12041373,"reputation":2837,"user_id":8808193,"display_name":"Joshua Wolff"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1595201075,"creation_date":1595200742,"answer_id":62986695,"question_id":22427816,"body_markdown":"Spontit can do this. \r\n\r\nSpontit is somewhat similar to Pushover, but is free, you can have unlimited followers, and enable unlimited devices, plus a few more things. ([web-app][1], [API][2])\r\n\r\nTo get started with what you want to do, check out [Spontit on IFTTT][3]. Spontit has a trigger for when a notification is sent.\r\n\r\nBoth Pushover and Spontit offer an *action* on IFTTT (send a push notification), but only Spontit offers a trigger (push was sent), which might help you. Feel free to add more details about your use case.\n\r\n\r\n  [1]: https://spontit.com/\r\n  [2]: https://api.spontit.com/\r\n  [3]: https://ifttt.com/spontit","title":"Trigger my app when Pushover app receives notification","body":"<p>Spontit can do this.</p>\n<p>Spontit is somewhat similar to Pushover, but is free, you can have unlimited followers, and enable unlimited devices, plus a few more things. (<a href=\"https://spontit.com/\" rel=\"nofollow noreferrer\">web-app</a>, <a href=\"https://api.spontit.com/\" rel=\"nofollow noreferrer\">API</a>)</p>\n<p>To get started with what you want to do, check out <a href=\"https://ifttt.com/spontit\" rel=\"nofollow noreferrer\">Spontit on IFTTT</a>. Spontit has a trigger for when a notification is sent.</p>\n<p>Both Pushover and Spontit offer an <em>action</em> on IFTTT (send a push notification), but only Spontit offers a trigger (push was sent), which might help you. Feel free to add more details about your use case.</p>\n"}],"owner":{"account_id":3433130,"reputation":11,"user_id":2876937,"display_name":"Turki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1635985054,"creation_date":1394907323,"question_id":22427816,"body_markdown":"Most of you know Pushover app. So what I want is when the pushover app receives message or notification, my app will be triggered. That&#39;s all in Android.\r\n\r\nSo Can any one help me to find a solution for that?","title":"Trigger my app when Pushover app receives notification","body":"<p>Most of you know Pushover app. So what I want is when the pushover app receives message or notification, my app will be triggered. That's all in Android.</p>\n<p>So Can any one help me to find a solution for that?</p>\n"},{"tags":["java","xml","spring","spring-boot","maven"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":2,"creation_date":1635972964,"post_id":69831018,"comment_id":123437908,"body_markdown":"&quot;*`@ComponentScan(&quot;com.opus.app&quot;)`*&quot; - The `@RestController` is not &quot;under&quot; this package (it is in `com.opus.restApi.implementations`). Could you try setting `@ComponentScan(&quot;com.opus&quot;)` instead?","body":"&quot;<i><code>@ComponentScan(&quot;com.opus.app&quot;)</code></i>&quot; - The <code>@RestController</code> is not &quot;under&quot; this package (it is in <code>com.opus.restApi.implementations</code>). Could you try setting <code>@ComponentScan(&quot;com.opus&quot;)</code> instead?"}],"answers":[{"tags":[],"owner":{"account_id":3068754,"reputation":2677,"user_id":2599899,"display_name":"Arthur Klezovich"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635969994,"creation_date":1635969994,"answer_id":69831119,"question_id":69831018,"body_markdown":"You need to get a list of all of your active endpoints by using one of these [methods][1].\r\n\r\nThis will enable you to see the full list of endpoints your app exposes. Then, you either see the target endpoints in the list or you don&#39;t. If you do see them, this means you were previously using a wrong URI. \r\n\r\nIf not, it means the controller beans have not been added to the application context ... this is probably due to the `@ComponentScan` annotation pointing at the wrong package ... \r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-boot-get-all-endpoints","title":"Getting 404 error with Spring Boot + REST application","body":"<p>You need to get a list of all of your active endpoints by using one of these <a href=\"https://www.baeldung.com/spring-boot-get-all-endpoints\" rel=\"nofollow noreferrer\">methods</a>.</p>\n<p>This will enable you to see the full list of endpoints your app exposes. Then, you either see the target endpoints in the list or you don't. If you do see them, this means you were previously using a wrong URI.</p>\n<p>If not, it means the controller beans have not been added to the application context ... this is probably due to the <code>@ComponentScan</code> annotation pointing at the wrong package ...</p>\n"},{"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1635984940,"creation_date":1635984940,"answer_id":69833158,"question_id":69831018,"body_markdown":"Remove `@ComponentScan` from your main `RestApiApplication` class. `@SpringBootApplication` encapsulates `@Configuration`, `@EnableAutoConfiguration`, and `@ComponentScan` annotations with their default attributes. The default value for `@ComponentScan` means that all the sub packages on the package the `@ComponentScan` is used are scanned. That is why it is usually a good practice to include the main class in the base package of the project.\r\n```java\r\npackage com.opus.restApi;\r\n\r\n@SpringBootApplication\r\n@EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class, XADataSourceAutoConfiguration.class})\r\npublic class RestApiApplication {\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(RestApiApplication.class, args);\r\n    }\r\n}\r\n```\r\n\r\nThis should fix the issue that seems to be related to your `ClientRestController` class not being scanned and thus no corresponding Spring-managed bean is created.","title":"Getting 404 error with Spring Boot + REST application","body":"<p>Remove <code>@ComponentScan</code> from your main <code>RestApiApplication</code> class. <code>@SpringBootApplication</code> encapsulates <code>@Configuration</code>, <code>@EnableAutoConfiguration</code>, and <code>@ComponentScan</code> annotations with their default attributes. The default value for <code>@ComponentScan</code> means that all the sub packages on the package the <code>@ComponentScan</code> is used are scanned. That is why it is usually a good practice to include the main class in the base package of the project.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.opus.restApi;\n\n@SpringBootApplication\n@EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class, XADataSourceAutoConfiguration.class})\npublic class RestApiApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(RestApiApplication.class, args);\n    }\n}\n</code></pre>\n<p>This should fix the issue that seems to be related to your <code>ClientRestController</code> class not being scanned and thus no corresponding Spring-managed bean is created.</p>\n"}],"owner":{"account_id":19653119,"reputation":56,"user_id":14386420,"display_name":"Brik000"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1432,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1635984940,"creation_date":1635969383,"question_id":69831018,"body_markdown":"basically I&#39;ve been working in this multi module app using spring, but when I try to consume the services from my Rest controllers I keep getting this 404 error.\r\n```\r\n{\r\n    &quot;timestamp&quot;: &quot;2021-11-03T18:54:23.230+00:00&quot;,\r\n    &quot;status&quot;: 404,\r\n    &quot;error&quot;: &quot;Not Found&quot;,\r\n    &quot;message&quot;: &quot;No message available&quot;,\r\n    &quot;path&quot;: &quot;/api/opus/auth/client&quot;\r\n}\r\n```\r\n\r\n\r\nHere is my app properties:\r\n```\r\nserver.port=8080\r\nspring.jackson.serialization.FAIL_ON_EMPTY_BEANS=false\r\nspring.jackson.serialization.fail-on-self-references=false\r\nserver.servlet.context-path=/api/opus\r\n```\r\nHere is an example of one of the rest controllers:\r\n```\r\npackage com.opus.restApi.implementations;\r\n\r\n@RequestMapping(&quot;/auth/client&quot;)\r\n@RestController\r\n@CrossOrigin(origins = &quot;*&quot;)\r\npublic class ClientRestController implements IClientRestController{\r\n\r\n @Autowired\r\n    private IClientService service;\r\n\r\n @GetMapping(&quot;&quot;)\r\n    public Iterable&lt;Client&gt; findAll() {\r\n        return service.findAll();\r\n    }\r\n\r\n}\r\n```\r\n\r\nHere is my main class:\r\n\r\n```\r\npackage com.opus.restApi;\r\n\r\n@SpringBootApplication\r\n@ComponentScan(&quot;com.opus.app&quot;)\r\n@EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class, XADataSourceAutoConfiguration.class})\r\npublic class RestApiApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(RestApiApplication.class, args);\r\n\t}\r\n}\r\n```\r\n\r\nI can also share the master pom I&#39;m using :\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;groupId&gt;com.opus&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;app&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;OpusApp&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\r\n\t&lt;packaging&gt;pom&lt;/packaging&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.18.22&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.mockito/mockito-all --&gt;\r\n\t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;mockito-all&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.10.19&lt;/version&gt;\r\n    \t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n&lt;!-- https://mvnrepository.com/artifact/org.testng/testng --&gt;\r\n\t\t&lt;dependency&gt;\r\n  \t\t  &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;7.4.0&lt;/version&gt;\r\n    \t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter --&gt;\r\n\t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.5.6&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-devtools --&gt;\r\n\t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.5.6&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-test --&gt;\r\n\t\t&lt;dependency&gt;\r\n   \t\t &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.5.6&lt;/version&gt;\r\n    \t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n&lt;!-- https://mvnrepository.com/artifact/junit/junit --&gt;\r\n\t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;4.13.2&lt;/version&gt;\r\n    \t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;modules&gt;\r\n\t\t&lt;module&gt;logic&lt;/module&gt;\r\n\t\t&lt;module&gt;model&lt;/module&gt;\r\n\t\t&lt;module&gt;persistence&lt;/module&gt;\r\n\t\t&lt;module&gt;restApi&lt;/module&gt;\r\n\t&lt;/modules&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nHere I can show you the pom I&#39;m using for the rest module:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;com.opus&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;app&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;/parent&gt;\r\n\t\r\n\t&lt;artifactId&gt;restApi&lt;/artifactId&gt;\r\n\t&lt;version&gt;${parent.version}&lt;/version&gt;\r\n\t&lt;name&gt;restApi&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\r\n\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.opus&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;logic&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-web --&gt;\r\n\t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.5.6&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-websocket --&gt;\r\n\t\t&lt;dependency&gt;\r\n   \t\t \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n   \t\t \t&lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;\r\n   \t\t \t&lt;version&gt;2.5.6&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;!-- https://mvnrepository.com/artifact/org.webjars/webjars-locator-core --&gt;\r\n\t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;webjars-locator-core&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;0.48&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;!-- https://mvnrepository.com/artifact/org.webjars/sockjs-client --&gt;\r\n\t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;sockjs-client&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.5.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;!-- https://mvnrepository.com/artifact/org.webjars/stomp-websocket --&gt;\r\n\t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;stomp-websocket&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.3.4&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;!-- https://mvnrepository.com/artifact/org.webjars/bootstrap --&gt;\r\n\t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;bootstrap&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;5.1.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;!-- https://mvnrepository.com/artifact/org.webjars.bower/jquery --&gt;\r\n\t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.webjars.bower&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;jquery&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.6.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;!-- https://mvnrepository.com/artifact/io.jsonwebtoken/jjwt --&gt;\r\n\t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;jjwt&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;0.9.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;!-- https://mvnrepository.com/artifact/javax.xml.bind/jaxb-api --&gt;\r\n\t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n   \t\t \t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n   \t\t \t&lt;version&gt;2.3.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;!-- https://mvnrepository.com/artifact/com.google.firebase/firebase-admin --&gt;\r\n\t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;com.google.firebase&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;firebase-admin&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;8.1.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\t\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zwYRG.png","title":"Getting 404 error with Spring Boot + REST application","body":"<p>basically I've been working in this multi module app using spring, but when I try to consume the services from my Rest controllers I keep getting this 404 error.</p>\n<pre><code>{\n    &quot;timestamp&quot;: &quot;2021-11-03T18:54:23.230+00:00&quot;,\n    &quot;status&quot;: 404,\n    &quot;error&quot;: &quot;Not Found&quot;,\n    &quot;message&quot;: &quot;No message available&quot;,\n    &quot;path&quot;: &quot;/api/opus/auth/client&quot;\n}\n</code></pre>\n<p>Here is my app properties:</p>\n<pre><code>server.port=8080\nspring.jackson.serialization.FAIL_ON_EMPTY_BEANS=false\nspring.jackson.serialization.fail-on-self-references=false\nserver.servlet.context-path=/api/opus\n</code></pre>\n<p>Here is an example of one of the rest controllers:</p>\n<pre><code>package com.opus.restApi.implementations;\n\n@RequestMapping(&quot;/auth/client&quot;)\n@RestController\n@CrossOrigin(origins = &quot;*&quot;)\npublic class ClientRestController implements IClientRestController{\n\n @Autowired\n    private IClientService service;\n\n @GetMapping(&quot;&quot;)\n    public Iterable&lt;Client&gt; findAll() {\n        return service.findAll();\n    }\n\n}\n</code></pre>\n<p>Here is my main class:</p>\n<pre><code>package com.opus.restApi;\n\n@SpringBootApplication\n@ComponentScan(&quot;com.opus.app&quot;)\n@EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class, XADataSourceAutoConfiguration.class})\npublic class RestApiApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(RestApiApplication.class, args);\n    }\n}\n</code></pre>\n<p>I can also share the master pom I'm using :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n    &lt;groupId&gt;com.opus&lt;/groupId&gt;\n    &lt;artifactId&gt;app&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;OpusApp&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.22&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.mockito/mockito-all --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n            &lt;artifactId&gt;mockito-all&lt;/artifactId&gt;\n            &lt;version&gt;1.10.19&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n&lt;!-- https://mvnrepository.com/artifact/org.testng/testng --&gt;\n        &lt;dependency&gt;\n          &lt;groupId&gt;org.testng&lt;/groupId&gt;\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\n            &lt;version&gt;7.4.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;2.5.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-devtools --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;version&gt;2.5.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-test --&gt;\n        &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;version&gt;2.5.6&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n&lt;!-- https://mvnrepository.com/artifact/junit/junit --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.13.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;modules&gt;\n        &lt;module&gt;logic&lt;/module&gt;\n        &lt;module&gt;model&lt;/module&gt;\n        &lt;module&gt;persistence&lt;/module&gt;\n        &lt;module&gt;restApi&lt;/module&gt;\n    &lt;/modules&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Here I can show you the pom I'm using for the rest module:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;com.opus&lt;/groupId&gt;\n        &lt;artifactId&gt;app&lt;/artifactId&gt;\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n    \n    &lt;artifactId&gt;restApi&lt;/artifactId&gt;\n    &lt;version&gt;${parent.version}&lt;/version&gt;\n    &lt;name&gt;restApi&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.opus&lt;/groupId&gt;\n            &lt;artifactId&gt;logic&lt;/artifactId&gt;\n            &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-web --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;version&gt;2.5.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-websocket --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;\n            &lt;version&gt;2.5.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.webjars/webjars-locator-core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n            &lt;artifactId&gt;webjars-locator-core&lt;/artifactId&gt;\n            &lt;version&gt;0.48&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.webjars/sockjs-client --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n            &lt;artifactId&gt;sockjs-client&lt;/artifactId&gt;\n            &lt;version&gt;1.5.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.webjars/stomp-websocket --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n            &lt;artifactId&gt;stomp-websocket&lt;/artifactId&gt;\n            &lt;version&gt;2.3.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.webjars/bootstrap --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n            &lt;artifactId&gt;bootstrap&lt;/artifactId&gt;\n            &lt;version&gt;5.1.3&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.webjars.bower/jquery --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars.bower&lt;/groupId&gt;\n            &lt;artifactId&gt;jquery&lt;/artifactId&gt;\n            &lt;version&gt;3.6.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/io.jsonwebtoken/jjwt --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\n            &lt;version&gt;0.9.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/javax.xml.bind/jaxb-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/com.google.firebase/firebase-admin --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.firebase&lt;/groupId&gt;\n            &lt;artifactId&gt;firebase-admin&lt;/artifactId&gt;\n            &lt;version&gt;8.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n    \n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n\n</code></pre>\n"},{"tags":["java","project-loom"],"comments":[{"owner":{"account_id":8490813,"reputation":3810,"user_id":6367213,"display_name":"Janez Kuhar"},"score":1,"creation_date":1635981426,"post_id":69832291,"comment_id":123440154,"body_markdown":"IIUC, the real benefit of a virtual thread is when you have a blocking I/O operation. With Loom, the underlying *carrier thread* will continue executing other tasks while your virtual thread blocks. Before Loom, this distinction was not made - there was only one type of threads - and the blocking I/O was not a feasible option for high throughput applications, like web servers. You might find [this presentation](https://www.youtube.com/watch?v=fOEPEXTpbJA) helpful.","body":"IIUC, the real benefit of a virtual thread is when you have a blocking I/O operation. With Loom, the underlying <i>carrier thread</i> will continue executing other tasks while your virtual thread blocks. Before Loom, this distinction was not made - there was only one type of threads - and the blocking I/O was not a feasible option for high throughput applications, like web servers. You might find <a href=\"https://www.youtube.com/watch?v=fOEPEXTpbJA\" rel=\"nofollow noreferrer\">this presentation</a> helpful."},{"owner":{"account_id":8490813,"reputation":3810,"user_id":6367213,"display_name":"Janez Kuhar"},"score":1,"creation_date":1635982237,"post_id":69832291,"comment_id":123440312,"body_markdown":"This question is 90% similar to [this one](https://stackoverflow.com/q/69830934/6367213). Try to avoid asking the same question twice. You can always edit your questions to dispute the closure.","body":"This question is 90% similar to <a href=\"https://stackoverflow.com/q/69830934/6367213\">this one</a>. Try to avoid asking the same question twice. You can always edit your questions to dispute the closure."},{"owner":{"account_id":4008983,"reputation":2115,"user_id":3302921,"accept_rate":22,"display_name":"Eric Kolotyluk"},"score":0,"creation_date":1635983119,"post_id":69832291,"comment_id":123440468,"body_markdown":"I have never had a question closed by someone else before, so I was confused by the process... will checkout the presentation...","body":"I have never had a question closed by someone else before, so I was confused by the process... will checkout the presentation..."},{"owner":{"account_id":5998820,"reputation":12666,"user_id":4712734,"display_name":"DuncG"},"score":1,"creation_date":1636032175,"post_id":69832291,"comment_id":123452932,"body_markdown":"LOOM will allow better scaling for multi-threaded app servers with blocking I/O and simplify coding. Unfortunately some examples of using LOOM virtual threads suggest dramatic performance improvements - that is until you spot that the benchmarks use `Thread.sleep()` in the `Runnable` task so are not real-world cases.","body":"LOOM will allow better scaling for multi-threaded app servers with blocking I/O and simplify coding. Unfortunately some examples of using LOOM virtual threads suggest dramatic performance improvements - that is until you spot that the benchmarks use <code>Thread.sleep()</code> in the <code>Runnable</code> task so are not real-world cases."},{"owner":{"account_id":5998820,"reputation":12666,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1636040706,"post_id":69832291,"comment_id":123456877,"body_markdown":"Do several warmup runs. Your candidates stream `LongStream.iterate(3, x -&gt; x &lt; count, x -&gt; x + 2)` isn&#39;t suitable for parallelisation - each value depends on the previous so it must be evaluated sequentially? Perhaps `Arrays.stream(LongStream.iterate(3, x -&gt; x &lt; count, x -&gt; x + 2).toArray())` would be better, so that every input value is pre-computed before your tests begin.","body":"Do several warmup runs. Your candidates stream <code>LongStream.iterate(3, x -&gt; x &lt; count, x -&gt; x + 2)</code> isn&#39;t suitable for parallelisation - each value depends on the previous so it must be evaluated sequentially? Perhaps <code>Arrays.stream(LongStream.iterate(3, x -&gt; x &lt; count, x -&gt; x + 2).toArray())</code> would be better, so that every input value is pre-computed before your tests begin."},{"owner":{"account_id":4008983,"reputation":2115,"user_id":3302921,"accept_rate":22,"display_name":"Eric Kolotyluk"},"score":0,"creation_date":1636042271,"post_id":69832291,"comment_id":123457579,"body_markdown":"@DuncG thanks for the `Array` idea, but in testing, it makes no difference. Whoever implemented Java Streams must be pretty smart because it sure seems to do the right thing with so little effort.","body":"@DuncG thanks for the <code>Array</code> idea, but in testing, it makes no difference. Whoever implemented Java Streams must be pretty smart because it sure seems to do the right thing with so little effort."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1638362037,"post_id":69832291,"comment_id":124066750,"body_markdown":"Besides the fact that virtual threads can’t accelerate a CPU bound computation in general, this test is pointless, it incorrectly assumes that the parallel stream will use the `executorService`. The parallel Stream will still use the default ForkJoin pool. The caller thread is the only virtual thread involved.","body":"Besides the fact that virtual threads can’t accelerate a CPU bound computation in general, this test is pointless, it incorrectly assumes that the parallel stream will use the <code>executorService</code>. The parallel Stream will still use the default ForkJoin pool. The caller thread is the only virtual thread involved."}],"answers":[{"tags":[],"owner":{"account_id":4008983,"reputation":2115,"user_id":3302921,"accept_rate":22,"display_name":"Eric Kolotyluk"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1635984516,"creation_date":1635984516,"answer_id":69833125,"question_id":69832291,"body_markdown":"Okay, my sense of things is that\r\n\r\n&gt; IIUC, the real benefit of a virtual thread is when you have a blocking I/O operation. With Loom, the underlying carrier thread will continue executing other tasks while your virtual thread blocks. Before Loom, this distinction was not made - there was only one type of threads - and the blocking I/O was not a feasible option for high throughput applications, like web servers.\r\n\r\nmeans that Virtual Threads are not going to give me the performance boost I was hoping for in this use case...\r\n\r\nIn my experiment, I was computing prime numbers with\r\n\r\n 1. 7397 ms - sequential stream\r\n 1. 1316 ms - parallel stream\r\n 1. 1392 ms - parallel stream in the context of an Execution Service with Virtual Threads\r\n 1. 4472 ms - Virtual Threads with `executorService.invokeAll(tasks)`\r\n 1. 4338 ms - Virtual Threads created from a Stream\r\n\r\nCases 2 &amp; 3 are so close in performance, they are within the margin of error.\r\n\r\nThis is not I/O bound, it is purely compute bound. Parallel Streams work exceptionally well in this case, and it&#39;s hard (impossible?) to do better. My expectation I could speed things up with Virtual Threads was a misunderstanding of how Virtual Threads are optimized. Now I know better.\r\n\r\nIf I want to demonstrate the performance advantage of Virtual Threads over Platform Threads, I need to find a better use case.\r\n\r\nMy code is posted on [loom-lab][1] in case other people want to verify my conclusions. This is a learning project, and I am learning...\r\n\r\n\r\n  [1]: https://github.com/kolotyluk/loom-lab","title":"Will Project Loom Virtual Threads improve the perfomance of parallel Streams?","body":"<p>Okay, my sense of things is that</p>\n<blockquote>\n<p>IIUC, the real benefit of a virtual thread is when you have a blocking I/O operation. With Loom, the underlying carrier thread will continue executing other tasks while your virtual thread blocks. Before Loom, this distinction was not made - there was only one type of threads - and the blocking I/O was not a feasible option for high throughput applications, like web servers.</p>\n</blockquote>\n<p>means that Virtual Threads are not going to give me the performance boost I was hoping for in this use case...</p>\n<p>In my experiment, I was computing prime numbers with</p>\n<ol>\n<li>7397 ms - sequential stream</li>\n<li>1316 ms - parallel stream</li>\n<li>1392 ms - parallel stream in the context of an Execution Service with Virtual Threads</li>\n<li>4472 ms - Virtual Threads with <code>executorService.invokeAll(tasks)</code></li>\n<li>4338 ms - Virtual Threads created from a Stream</li>\n</ol>\n<p>Cases 2 &amp; 3 are so close in performance, they are within the margin of error.</p>\n<p>This is not I/O bound, it is purely compute bound. Parallel Streams work exceptionally well in this case, and it's hard (impossible?) to do better. My expectation I could speed things up with Virtual Threads was a misunderstanding of how Virtual Threads are optimized. Now I know better.</p>\n<p>If I want to demonstrate the performance advantage of Virtual Threads over Platform Threads, I need to find a better use case.</p>\n<p>My code is posted on <a href=\"https://github.com/kolotyluk/loom-lab\" rel=\"nofollow noreferrer\">loom-lab</a> in case other people want to verify my conclusions. This is a learning project, and I am learning...</p>\n"}],"owner":{"account_id":4008983,"reputation":2115,"user_id":3302921,"accept_rate":22,"display_name":"Eric Kolotyluk"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1122,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1635984516,"creation_date":1635977229,"question_id":69832291,"body_markdown":"This is not a duplicate of https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java\r\n\r\nThe question goes to the heart of Project Loom design and implementation, and whether the project has been able to speed up the performance of Java Parallel Streams or not. The question is not about bench-marking, it is about intent of Project Loom.\r\n\r\n----------\r\n\r\nI am experimenting with Virtual Threads in my [loom-lab][1] project, and wanted to see if Virtual Threads are faster than Platform Threads when doing a parallel stream, but it actually seems slower.\r\n\r\n    try (var executorService = Executors.newThreadPerTaskExecutor(virtualThreadFactory)) {\r\n        var candidates3 = LongStream.iterate(3, x -&gt; x &lt; count, x -&gt; x + 2);\r\n        time4 = System.currentTimeMillis();\r\n        var primes3 = executorService.submit(() -&gt;\r\n            candidates3.parallel()\r\n                .filter(candidate -&gt; isPrime(candidate)).toArray()\r\n        ).get();\r\n        time5 = System.currentTimeMillis();\r\n    }\r\n\r\nwhere ultimately I get the output (in milliseconds)\r\n\r\n    sequential time = 7546\r\n    parallel   time = 1289\r\n    virtual    time = 1388\r\n\r\nand in general using Virtual Threads is slower than the common ForkJoinPool. Am I making some basic mistake or misunderstanding somewhere, or has Project Loom not been integrated with Java Streams yet?\r\n\r\n  [1]: https://github.com/kolotyluk/loom-lab","title":"Will Project Loom Virtual Threads improve the perfomance of parallel Streams?","body":"<p>This is not a duplicate of <a href=\"https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java\">How do I write a correct micro-benchmark in Java?</a></p>\n<p>The question goes to the heart of Project Loom design and implementation, and whether the project has been able to speed up the performance of Java Parallel Streams or not. The question is not about bench-marking, it is about intent of Project Loom.</p>\n<hr />\n<p>I am experimenting with Virtual Threads in my <a href=\"https://github.com/kolotyluk/loom-lab\" rel=\"nofollow noreferrer\">loom-lab</a> project, and wanted to see if Virtual Threads are faster than Platform Threads when doing a parallel stream, but it actually seems slower.</p>\n<pre><code>try (var executorService = Executors.newThreadPerTaskExecutor(virtualThreadFactory)) {\n    var candidates3 = LongStream.iterate(3, x -&gt; x &lt; count, x -&gt; x + 2);\n    time4 = System.currentTimeMillis();\n    var primes3 = executorService.submit(() -&gt;\n        candidates3.parallel()\n            .filter(candidate -&gt; isPrime(candidate)).toArray()\n    ).get();\n    time5 = System.currentTimeMillis();\n}\n</code></pre>\n<p>where ultimately I get the output (in milliseconds)</p>\n<pre><code>sequential time = 7546\nparallel   time = 1289\nvirtual    time = 1388\n</code></pre>\n<p>and in general using Virtual Threads is slower than the common ForkJoinPool. Am I making some basic mistake or misunderstanding somewhere, or has Project Loom not been integrated with Java Streams yet?</p>\n"},{"tags":["java","finalize","finalization"],"answers":[{"tags":[],"owner":{"account_id":97818,"reputation":114824,"user_id":265143,"accept_rate":72,"display_name":"P&#233;ter T&#246;r&#246;k"},"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1268688546,"creation_date":1268688219,"answer_id":2450597,"question_id":2450580,"body_markdown":"The garbage collector is working automatically in the background (although it can be explicitly invoked, but the need for this should be rare). It basically cleans up only objects which are not referenced by other objects (granted, the full picture is more complicated, but this is the basic idea). So it does not change any references in any live objects. If an object can not be accessed from any live object, this means that it can be safely garbage collected.\r\n\r\nFinalization _was_ meant to clean up resources acquired by the object (not memory, but other resources, e.g. file handles, ports, DB connections etc.). However, it did not really work out :-(\r\n\r\n- it is unpredictable when `finalize()` will be called\r\n- in fact, there is no guarantee that `finalize()` will be called ever!\r\n\r\nSo even if it were guaranteed to be called, it would not be a good place to release resources: by the time it is called to free up all the DB connections you have opened, the system may have run out of free connections completely, and your app does not work anymore.\r\n","title":"What is the purpose of finalization in Java?","body":"<p>The garbage collector is working automatically in the background (although it can be explicitly invoked, but the need for this should be rare). It basically cleans up only objects which are not referenced by other objects (granted, the full picture is more complicated, but this is the basic idea). So it does not change any references in any live objects. If an object can not be accessed from any live object, this means that it can be safely garbage collected.</p>\n\n<p>Finalization <em>was</em> meant to clean up resources acquired by the object (not memory, but other resources, e.g. file handles, ports, DB connections etc.). However, it did not really work out :-(</p>\n\n<ul>\n<li>it is unpredictable when <code>finalize()</code> will be called</li>\n<li>in fact, there is no guarantee that <code>finalize()</code> will be called ever!</li>\n</ul>\n\n<p>So even if it were guaranteed to be called, it would not be a good place to release resources: by the time it is called to free up all the DB connections you have opened, the system may have run out of free connections completely, and your app does not work anymore.</p>\n"},{"tags":[],"owner":{"account_id":57484,"reputation":66727,"user_id":172211,"accept_rate":89,"display_name":"Carl Smotricz"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1268688833,"creation_date":1268688283,"answer_id":2450606,"question_id":2450580,"body_markdown":"Nope. The `finalize()` method is run only if the garbage collector attempts to reclaim your object.\r\n\r\nAny memory used by your object will (usually, I can&#39;t think of an exception) automatically be connected to your object and cleaned up along with it. Finalization, therefore, isn&#39;t meant for freeing *memory*, but rather any other resources your object may be associated with. For example, this could be used to close open files or database connections, or perhaps run some low-level code interfacing with the operating system to release some system-level resources.","title":"What is the purpose of finalization in Java?","body":"<p>Nope. The <code>finalize()</code> method is run only if the garbage collector attempts to reclaim your object.</p>\n\n<p>Any memory used by your object will (usually, I can't think of an exception) automatically be connected to your object and cleaned up along with it. Finalization, therefore, isn't meant for freeing <em>memory</em>, but rather any other resources your object may be associated with. For example, this could be used to close open files or database connections, or perhaps run some low-level code interfacing with the operating system to release some system-level resources.</p>\n"},{"tags":[],"owner":{"account_id":75807,"reputation":81445,"user_id":217332,"accept_rate":100,"display_name":"danben"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1268688382,"creation_date":1268688382,"answer_id":2450615,"question_id":2450580,"body_markdown":"From [this article][1]:\r\n\r\n&gt; Any instances of classes that\r\n&gt; implement the finalize() method are\r\n&gt; often called finalizable objects. They\r\n&gt; will not be immediately reclaimed by\r\n&gt; the Java garbage collector when they\r\n&gt; are no longer referenced. Instead, the\r\n&gt; Java garbage collector appends the\r\n&gt; objects to a special queue for the\r\n&gt; finalization process. Usually it&#39;s\r\n&gt; performed by a special thread called a\r\n&gt; &quot;Reference Handler&quot; on some Java\r\n&gt; Virtual Machines. During this\r\n&gt; finalization process, the &quot;Finalizer&quot;\r\n&gt; thread will execute each finalize()\r\n&gt; method of the objects. Only after\r\n&gt; successful completion of the\r\n&gt; finalize() method will an object be\r\n&gt; handed over for Java garbage\r\n&gt; collection to get its space reclaimed\r\n&gt; by &quot;future&quot; garbage collection.\r\n&gt; \r\n&gt; You are free to do virtually anything\r\n&gt; in the finalize() method of your\r\n&gt; class. When you do that, please do not\r\n&gt; expect the memory space occupied by\r\n&gt; each and every object to be reclaimed\r\n&gt; by the Java garbage collector when the\r\n&gt; object is no longer referenced or no\r\n&gt; longer needed. Why? It is not\r\n&gt; guaranteed that the finalize() method\r\n&gt; will complete the execution in timely\r\n&gt; manner. Worst case, it may not be even\r\n&gt; invoked even when there are no more\r\n&gt; references to the object. That means\r\n&gt; it&#39;s not guaranteed that any objects\r\n&gt; that have a finalize() method are\r\n&gt; garbage collected.\r\n\r\nAlso, [this article][2] from Sun has some nice diagrams explaining the process.\r\n\r\n\r\n  [1]: http://java.sys-con.com/node/995699\r\n  [2]: http://java.sun.com/developer/technicalArticles/javase/finalization/","title":"What is the purpose of finalization in Java?","body":"<p>From <a href=\"http://java.sys-con.com/node/995699\" rel=\"noreferrer\">this article</a>:</p>\n\n<blockquote>\n  <p>Any instances of classes that\n  implement the finalize() method are\n  often called finalizable objects. They\n  will not be immediately reclaimed by\n  the Java garbage collector when they\n  are no longer referenced. Instead, the\n  Java garbage collector appends the\n  objects to a special queue for the\n  finalization process. Usually it's\n  performed by a special thread called a\n  \"Reference Handler\" on some Java\n  Virtual Machines. During this\n  finalization process, the \"Finalizer\"\n  thread will execute each finalize()\n  method of the objects. Only after\n  successful completion of the\n  finalize() method will an object be\n  handed over for Java garbage\n  collection to get its space reclaimed\n  by \"future\" garbage collection.</p>\n  \n  <p>You are free to do virtually anything\n  in the finalize() method of your\n  class. When you do that, please do not\n  expect the memory space occupied by\n  each and every object to be reclaimed\n  by the Java garbage collector when the\n  object is no longer referenced or no\n  longer needed. Why? It is not\n  guaranteed that the finalize() method\n  will complete the execution in timely\n  manner. Worst case, it may not be even\n  invoked even when there are no more\n  references to the object. That means\n  it's not guaranteed that any objects\n  that have a finalize() method are\n  garbage collected.</p>\n</blockquote>\n\n<p>Also, <a href=\"http://java.sun.com/developer/technicalArticles/javase/finalization/\" rel=\"noreferrer\">this article</a> from Sun has some nice diagrams explaining the process.</p>\n"},{"tags":[],"owner":{"account_id":287076,"reputation":1916,"user_id":586682,"display_name":"pnt"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1268688484,"creation_date":1268688484,"answer_id":2450626,"question_id":2450580,"body_markdown":"Actually, here&#39;s the behavior of the finalize() method:\r\n\r\nOnce the Garbage collector runs (the VM decides it needs to free up memory, you cannot force it to run) and decided to collect the memory from this object (which means there are NO references pointing to it anymore, from reachable objects at least), just before it deletes the memory occupied by it, it runs the method finalize() on the object. You can be sure that if garbage collected, the object will run finalize() just before it disappears, but you cannot be sure that it will get GC&#39;ed at all so you shouldn&#39;t rely on the method to do any sanitizing at all. You should run sanitizing statements inside finally {} blocks and not use finalize() as it is not guaranteed to run. \r\n\r\nFurthermore, some people have done performance tests and showed that the finalize method somewhat slows down creation/destruction of the object. I cannot remember the source so treat this info as not very reliable. :)","title":"What is the purpose of finalization in Java?","body":"<p>Actually, here's the behavior of the finalize() method:</p>\n\n<p>Once the Garbage collector runs (the VM decides it needs to free up memory, you cannot force it to run) and decided to collect the memory from this object (which means there are NO references pointing to it anymore, from reachable objects at least), just before it deletes the memory occupied by it, it runs the method finalize() on the object. You can be sure that if garbage collected, the object will run finalize() just before it disappears, but you cannot be sure that it will get GC'ed at all so you shouldn't rely on the method to do any sanitizing at all. You should run sanitizing statements inside finally {} blocks and not use finalize() as it is not guaranteed to run. </p>\n\n<p>Furthermore, some people have done performance tests and showed that the finalize method somewhat slows down creation/destruction of the object. I cannot remember the source so treat this info as not very reliable. :)</p>\n"},{"tags":[],"owner":{"account_id":47598,"reputation":30707,"user_id":141081,"display_name":"Dirk"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1268689038,"creation_date":1268689038,"answer_id":2450674,"question_id":2450580,"body_markdown":"Finalization is used to clean up resources, which cannot be freed by the garbage collector. For example, consider a program which allocates (via some `native` API) resources directly from the OS. This usually yields some kind of &quot;handle&quot; (a UNIX file descriptor or Windows HANDLE, or something similar):\r\n\r\n    class Wrapper {\r\n        private long handle;\r\n\r\n        private Handle(long h) {\r\n            handle = h;\r\n        }\r\n\r\n        private static native long getHandleFromOS();\r\n\r\n        static Wrapper allocate() {\r\n            return new Handle(getHandleFromOS());\r\n        }\r\n    }\r\n\r\nSo, what happens, if your code allocates an instance of class `Wrapper`? Well the class allocates some kind of OS specific resource and keeps a reference to it (the handle) in a member variable. But what happens, when the last Java reference to a wrapper instance is lost? Now, the garbage collector will (at some point) reclaim the space of the now defunct wrapper instance. But what happens to the OS resource allocated by the wrapper? It will be leaked in the above scenario, which is a bad thing, if it is a costly resource, such as a file descriptor.\r\n\r\nIn order to allow your code to clean up in such a scenario, there is the `finalize` method.\r\n\r\n    class Wrapper {\r\n        private long handle;\r\n\r\n        private Handle(long h) {\r\n            handle = h;\r\n        }\r\n\r\n        protected void finalize() {\r\n            returnHandleToOS(handle);\r\n        }\r\n\r\n        private static native long getHandleFromOS();\r\n        private static native void returnHandleToOS(long handle);\r\n\r\n        static Wrapper allocate() {\r\n            return new Handle(getHandleFromOS());\r\n        }\r\n    }\r\n\r\nNow, when the GC reclaims the space of a wrapper instance, the finalizer makes sure, that the resource is properly returned to the OS.\r\n\r\nThis sounds all nice, but as others have already pointed out, the downside is, that finalization is inherently unreliable: you do not know when the finalizer will be run. Worse: there are no guarantees that it will be run at all. So ist best to provide an `dispose` mechanism and use finalization only as safety-net in case, the clients of your class forget to properly dispose their references:\r\n\r\n\r\n    class Wrapper {\r\n        private long handle;\r\n\r\n        private Handle(long h) {\r\n            handle = h;\r\n        }\r\n\r\n        protected void finalize() {\r\n            if( handle != 0 ) returnHandleToOS(handle);\r\n        }\r\n\r\n        public void dispose() {\r\n            returnHandleToOS(handle);\r\n            handle = 0;\r\n        }\r\n\r\n        private static native long getHandleFromOS();\r\n        private static native void returnHandleToOS(long handle);\r\n\r\n        static Wrapper allocate() {\r\n            return new Handle(getHandleFromOS());\r\n        }\r\n    }","title":"What is the purpose of finalization in Java?","body":"<p>Finalization is used to clean up resources, which cannot be freed by the garbage collector. For example, consider a program which allocates (via some <code>native</code> API) resources directly from the OS. This usually yields some kind of \"handle\" (a UNIX file descriptor or Windows HANDLE, or something similar):</p>\n\n<pre><code>class Wrapper {\n    private long handle;\n\n    private Handle(long h) {\n        handle = h;\n    }\n\n    private static native long getHandleFromOS();\n\n    static Wrapper allocate() {\n        return new Handle(getHandleFromOS());\n    }\n}\n</code></pre>\n\n<p>So, what happens, if your code allocates an instance of class <code>Wrapper</code>? Well the class allocates some kind of OS specific resource and keeps a reference to it (the handle) in a member variable. But what happens, when the last Java reference to a wrapper instance is lost? Now, the garbage collector will (at some point) reclaim the space of the now defunct wrapper instance. But what happens to the OS resource allocated by the wrapper? It will be leaked in the above scenario, which is a bad thing, if it is a costly resource, such as a file descriptor.</p>\n\n<p>In order to allow your code to clean up in such a scenario, there is the <code>finalize</code> method.</p>\n\n<pre><code>class Wrapper {\n    private long handle;\n\n    private Handle(long h) {\n        handle = h;\n    }\n\n    protected void finalize() {\n        returnHandleToOS(handle);\n    }\n\n    private static native long getHandleFromOS();\n    private static native void returnHandleToOS(long handle);\n\n    static Wrapper allocate() {\n        return new Handle(getHandleFromOS());\n    }\n}\n</code></pre>\n\n<p>Now, when the GC reclaims the space of a wrapper instance, the finalizer makes sure, that the resource is properly returned to the OS.</p>\n\n<p>This sounds all nice, but as others have already pointed out, the downside is, that finalization is inherently unreliable: you do not know when the finalizer will be run. Worse: there are no guarantees that it will be run at all. So ist best to provide an <code>dispose</code> mechanism and use finalization only as safety-net in case, the clients of your class forget to properly dispose their references:</p>\n\n<pre><code>class Wrapper {\n    private long handle;\n\n    private Handle(long h) {\n        handle = h;\n    }\n\n    protected void finalize() {\n        if( handle != 0 ) returnHandleToOS(handle);\n    }\n\n    public void dispose() {\n        returnHandleToOS(handle);\n        handle = 0;\n    }\n\n    private static native long getHandleFromOS();\n    private static native void returnHandleToOS(long handle);\n\n    static Wrapper allocate() {\n        return new Handle(getHandleFromOS());\n    }\n}\n</code></pre>\n"}],"owner":{"display_name":"user244333"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25703,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":2450597,"answer_count":5,"score":12,"last_activity_date":1635984034,"creation_date":1268687967,"question_id":2450580,"body_markdown":"My understanding of finalization is this:\r\n\r\nTo clean up or reclaim the memory that an object occupies, the Garbage collector comes into action. (automatically is invoked?)\r\n\r\nThe garbage collector then dereferences the object. Sometimes, there is no way for the garbage collector to access the object. Then finalize is invoked to do a final clean up processing after which the garbage collector can be invoked.\r\n\r\nIs this an accurate description of finalization?","title":"What is the purpose of finalization in Java?","body":"<p>My understanding of finalization is this:</p>\n\n<p>To clean up or reclaim the memory that an object occupies, the Garbage collector comes into action. (automatically is invoked?)</p>\n\n<p>The garbage collector then dereferences the object. Sometimes, there is no way for the garbage collector to access the object. Then finalize is invoked to do a final clean up processing after which the garbage collector can be invoked.</p>\n\n<p>Is this an accurate description of finalization?</p>\n"},{"tags":["java","orm","finalize","finalization"],"answers":[{"tags":[],"owner":{"account_id":336090,"reputation":3018,"user_id":663551,"accept_rate":42,"display_name":"Jakob Alexander Eichler"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1300498688,"creation_date":1300498688,"answer_id":5359428,"question_id":5359367,"body_markdown":"Use the Observer Pattern do build a ClearanceManager and some Destroyables. \r\nIDestroyable is an interface, which is used for the observers it contains the method public void destroy()\r\nThe ClearanceManager is the Subject of the Observerpattern. Maybe use Singleton here to ensure you have just one ClearanceManager object in your application.\r\n\r\nUse a Set&lt;IDestroyable&gt; internaly inside the ClearanceManager (not a List to ensure Objects can just be added once)\r\n\r\nsupport an addDestroyable(IDestroyable destoryable) method (and maybe a removeDestroyable one).\r\n\r\nDuring Runtime the Classes for which you need some destructor emulation, can register them self at the ClearenceManager. ClearenceManager.getInstance().addDestroyable(this);\r\n\r\nThe ClearanceManager has an doClearance() method, which should just be called at the end of the Main method. It iterates threw the private Set&lt;IDestroyable&gt; and calls destroy() on every IDestroyable object.\r\n\r\nDoing it this way you can emulate destructors, without using them, because using destructors you are losing control about the existance of myabe needed object. \r\nYou do not know when overwriting finalize, when it is called. \r\n\r\nMaybe, if you do not want to call doClearance() in your Main method you can use here, but just here, a real destructor finalize(). Because there are references in the ClearenceManager to the needed Objects, they will not be destroyed first. But maybe mhh, if there are cross references .... better do not use finalize, use doClearance() and have fun with it :) ","title":"I&#39;m pretty sure finalize is still bad news on later JVMs--is there an alternative?","body":"<p>Use the Observer Pattern do build a ClearanceManager and some Destroyables. \nIDestroyable is an interface, which is used for the observers it contains the method public void destroy()\nThe ClearanceManager is the Subject of the Observerpattern. Maybe use Singleton here to ensure you have just one ClearanceManager object in your application.</p>\n\n<p>Use a Set internaly inside the ClearanceManager (not a List to ensure Objects can just be added once)</p>\n\n<p>support an addDestroyable(IDestroyable destoryable) method (and maybe a removeDestroyable one).</p>\n\n<p>During Runtime the Classes for which you need some destructor emulation, can register them self at the ClearenceManager. ClearenceManager.getInstance().addDestroyable(this);</p>\n\n<p>The ClearanceManager has an doClearance() method, which should just be called at the end of the Main method. It iterates threw the private Set and calls destroy() on every IDestroyable object.</p>\n\n<p>Doing it this way you can emulate destructors, without using them, because using destructors you are losing control about the existance of myabe needed object. \nYou do not know when overwriting finalize, when it is called. </p>\n\n<p>Maybe, if you do not want to call doClearance() in your Main method you can use here, but just here, a real destructor finalize(). Because there are references in the ClearenceManager to the needed Objects, they will not be destroyed first. But maybe mhh, if there are cross references .... better do not use finalize, use doClearance() and have fun with it :) </p>\n"},{"tags":[],"owner":{"account_id":76511,"reputation":44893,"user_id":218978,"accept_rate":100,"display_name":"irreputable"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1300499735,"creation_date":1300499735,"answer_id":5359497,"question_id":5359367,"body_markdown":"maybe you can subclass PhantomReference, and store necessary data in it for final actions.","title":"I&#39;m pretty sure finalize is still bad news on later JVMs--is there an alternative?","body":"<p>maybe you can subclass PhantomReference, and store necessary data in it for final actions.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1300502692,"creation_date":1300502239,"answer_id":5359663,"question_id":5359367,"body_markdown":"I think you are barking up the wrong tree here.\r\n\r\nAll of Java&#39;s finalizer and Reference mechanisms based on reachability depend on the garbage collector to determine whether the respective objects are reachable.  So if you use any of the Reference mechanisms for some kind of finalization, you run into much the same issues that make `finalize` a bad idea.\r\n\r\nIt is technically possible to implement your own mechanisms for doing reachability; e.g. by implementing your own application-specific reference counting.  However, it is likely to be expensive, fragile, and make your code look horrible.  (Reference counting in Java is likely to be messier and more fragile than in C++, because you can&#39;t overload reference assignment operators to ensure that reference counts are adjusted transparently.  So every reference assignment needs to be wrapped in a method call.)  So I&#39;d say that doing your own reachability analysis is a **bad idea**.\r\n\r\nSo, to be practical you need to either:\r\n\r\n  - rethink your design so that you don&#39;t do things based on reachability, or\r\n  - live with the consequences of using finalize.\r\n\r\nThe first option is clearly the best, IMO.\r\n\r\n\r\n\r\n","title":"I&#39;m pretty sure finalize is still bad news on later JVMs--is there an alternative?","body":"<p>I think you are barking up the wrong tree here.</p>\n\n<p>All of Java's finalizer and Reference mechanisms based on reachability depend on the garbage collector to determine whether the respective objects are reachable.  So if you use any of the Reference mechanisms for some kind of finalization, you run into much the same issues that make <code>finalize</code> a bad idea.</p>\n\n<p>It is technically possible to implement your own mechanisms for doing reachability; e.g. by implementing your own application-specific reference counting.  However, it is likely to be expensive, fragile, and make your code look horrible.  (Reference counting in Java is likely to be messier and more fragile than in C++, because you can't overload reference assignment operators to ensure that reference counts are adjusted transparently.  So every reference assignment needs to be wrapped in a method call.)  So I'd say that doing your own reachability analysis is a <strong>bad idea</strong>.</p>\n\n<p>So, to be practical you need to either:</p>\n\n<ul>\n<li>rethink your design so that you don't do things based on reachability, or</li>\n<li>live with the consequences of using finalize.</li>\n</ul>\n\n<p>The first option is clearly the best, IMO.</p>\n"},{"tags":[],"owner":{"account_id":15102,"reputation":45656,"user_id":31563,"accept_rate":70,"display_name":"Joe Daley"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1426537639,"creation_date":1300507006,"answer_id":5359949,"question_id":5359367,"body_markdown":"Are you just trying to avoid having to call `save()` on every POJO that you modify?\r\n\r\nThis can be done reliably using a persistence session object, like this:\r\n\r\n1. Open a new session object.\r\n1. Load objects via the session object. The session object maintains references to all the objects it loads.\r\n1. Make any changes to the loaded objects. It is not necessary to call a save method on updated objects.\r\n1. Close the session object. The session saves all of its objects. It might even be fancy enough to keep a copy of clean loaded data, compare all of its objects to the clean data, and save only the ones that have been modified.\r\n\r\nAnd if you don&#39;t want to pass session objects through your code, you can take things a step further with the Unit of Work pattern, associating a session object to the current thread:\r\n\r\n1. Start a unit of work. This creates a session object behind the scenes and associates it with the current thread.\r\n1. Load objects. Whenever an object is loaded, your ORM automatically associates it with a session object based on the current thread.\r\n1. Make any changes to the loaded objects. It is not necessary to call a save method on updated objects.\r\n1. Complete the unit of work. This closes the session object, saving all the objects.\r\n\r\nThis fixes several problems with a reachability based solution:\r\n\r\n * You are not relying on nondeterministic garbage collections, which may have a long time between runs, or not run at all.\r\n * All objects modified in one operation are saved together. If you rely on reachability, different objects modified in the same operation can become unreachable at different times, meaning your modifications can be saved to the database in bits-and-pieces.\r\n * Rollback is much easier - just give your session object a rollback() method. With a reachability solution, you would need to remember to call rollback() on every modified POJO if an operation fails, which is really the same as your original problem.\r\n\r\nPerhaps see http://nhibernate.info/doc/patternsandpractices/nhibernate-and-the-unit-of-work-pattern.html or research the Unit of Work pattern and emulate some of those ideas.","title":"I&#39;m pretty sure finalize is still bad news on later JVMs--is there an alternative?","body":"<p>Are you just trying to avoid having to call <code>save()</code> on every POJO that you modify?</p>\n\n<p>This can be done reliably using a persistence session object, like this:</p>\n\n<ol>\n<li>Open a new session object.</li>\n<li>Load objects via the session object. The session object maintains references to all the objects it loads.</li>\n<li>Make any changes to the loaded objects. It is not necessary to call a save method on updated objects.</li>\n<li>Close the session object. The session saves all of its objects. It might even be fancy enough to keep a copy of clean loaded data, compare all of its objects to the clean data, and save only the ones that have been modified.</li>\n</ol>\n\n<p>And if you don't want to pass session objects through your code, you can take things a step further with the Unit of Work pattern, associating a session object to the current thread:</p>\n\n<ol>\n<li>Start a unit of work. This creates a session object behind the scenes and associates it with the current thread.</li>\n<li>Load objects. Whenever an object is loaded, your ORM automatically associates it with a session object based on the current thread.</li>\n<li>Make any changes to the loaded objects. It is not necessary to call a save method on updated objects.</li>\n<li>Complete the unit of work. This closes the session object, saving all the objects.</li>\n</ol>\n\n<p>This fixes several problems with a reachability based solution:</p>\n\n<ul>\n<li>You are not relying on nondeterministic garbage collections, which may have a long time between runs, or not run at all.</li>\n<li>All objects modified in one operation are saved together. If you rely on reachability, different objects modified in the same operation can become unreachable at different times, meaning your modifications can be saved to the database in bits-and-pieces.</li>\n<li>Rollback is much easier - just give your session object a rollback() method. With a reachability solution, you would need to remember to call rollback() on every modified POJO if an operation fails, which is really the same as your original problem.</li>\n</ul>\n\n<p>Perhaps see <a href=\"http://nhibernate.info/doc/patternsandpractices/nhibernate-and-the-unit-of-work-pattern.html\" rel=\"nofollow\">http://nhibernate.info/doc/patternsandpractices/nhibernate-and-the-unit-of-work-pattern.html</a> or research the Unit of Work pattern and emulate some of those ideas.</p>\n"}],"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":315,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":5359949,"answer_count":4,"score":0,"last_activity_date":1635984024,"creation_date":1300497719,"question_id":5359367,"body_markdown":"I would like to implement a ORM-style system that can save updates to POJOs when they are no longer reachable by the caller.\r\n\r\nI thought the reference classes could do it, but they seem to only enqueue the reference after the object has been cleared (I was hoping it was when they were able to be collected), so once enqueued the .get() method will always return null.\r\n\r\nI could use a finalizer but last time I checked those were questionable (Not guaranteed to run promptly or run at all)--I believe a combination of finalizers and runShutdownHook() would work but that&#39;s getting into fairly swampy territory.\r\n\r\nIs there another path I&#39;m not thinking besides the obligatory &quot;Just have the caller call .save() when he&#39;s done&quot;?\r\n","title":"I&#39;m pretty sure finalize is still bad news on later JVMs--is there an alternative?","body":"<p>I would like to implement a ORM-style system that can save updates to POJOs when they are no longer reachable by the caller.</p>\n\n<p>I thought the reference classes could do it, but they seem to only enqueue the reference after the object has been cleared (I was hoping it was when they were able to be collected), so once enqueued the .get() method will always return null.</p>\n\n<p>I could use a finalizer but last time I checked those were questionable (Not guaranteed to run promptly or run at all)--I believe a combination of finalizers and runShutdownHook() would work but that's getting into fairly swampy territory.</p>\n\n<p>Is there another path I'm not thinking besides the obligatory \"Just have the caller call .save() when he's done\"?</p>\n"},{"tags":["java","garbage-collection","specifications","finalize","finalization"],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1308154413,"creation_date":1308154413,"answer_id":6360859,"question_id":6360742,"body_markdown":"The difference between an unfinalized and a finalizable object is that the finalizer on the second one **could** be automatically invoked at any time in the future, while the finalizer on the unfinalized object **can&#39;t** be automatically invoked, unless the object first becomes finalizable.\r\n\r\n - a unfinalized object **will not** get its finalizer automatically invoked by the JVM in this state\r\n - a finalizable object **can eventually** get its finalizer automatically invoked by the JVM","title":"Definition: Unfinalized versus finalizable object","body":"<p>The difference between an unfinalized and a finalizable object is that the finalizer on the second one <strong>could</strong> be automatically invoked at any time in the future, while the finalizer on the unfinalized object <strong>can't</strong> be automatically invoked, unless the object first becomes finalizable.</p>\n\n<ul>\n<li>a unfinalized object <strong>will not</strong> get its finalizer automatically invoked by the JVM in this state</li>\n<li>a finalizable object <strong>can eventually</strong> get its finalizer automatically invoked by the JVM</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":28947,"reputation":90759,"user_id":77779,"accept_rate":89,"display_name":"Yishai"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1308154563,"creation_date":1308154446,"answer_id":6360863,"question_id":6360742,"body_markdown":"The answer seems to lie in this line:\r\n\r\n&gt; If the Java virtual machine detects that an unfinalized object has become finalizer-reachable or unreachable, it may label the object finalizable (G, H);\r\n\r\nUnfinalized objects are not eligible for finalization yet. They are reachable. Finalizable objects are eligible to be finalized, so the JVM may do that when it chooses. In other words, &quot;may&quot; in the sense of &quot;has permission to&quot; not just in the sense of &quot;it might happen.&quot;","title":"Definition: Unfinalized versus finalizable object","body":"<p>The answer seems to lie in this line:</p>\n\n<blockquote>\n  <p>If the Java virtual machine detects that an unfinalized object has become finalizer-reachable or unreachable, it may label the object finalizable (G, H);</p>\n</blockquote>\n\n<p>Unfinalized objects are not eligible for finalization yet. They are reachable. Finalizable objects are eligible to be finalized, so the JVM may do that when it chooses. In other words, \"may\" in the sense of \"has permission to\" not just in the sense of \"it might happen.\"</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1527695794,"creation_date":1308154470,"answer_id":6360870,"question_id":6360742,"body_markdown":"There is no guarantee that a GC will ever be performed or that `finalize()` will ever be called. It is highly likely that it will happen at some point.\r\n\r\nWhen an object no longer has a strong reference to it, it can be garbage collected.  Some time later a GC can be performed and the object is added to a finalization queue to have its `finalize()` method called. Once the method has been called it can be removed if there still is not strong reference to it.","title":"Definition: Unfinalized versus finalizable object","body":"<p>There is no guarantee that a GC will ever be performed or that <code>finalize()</code> will ever be called. It is highly likely that it will happen at some point.</p>\n\n<p>When an object no longer has a strong reference to it, it can be garbage collected.  Some time later a GC can be performed and the object is added to a finalization queue to have its <code>finalize()</code> method called. Once the method has been called it can be removed if there still is not strong reference to it.</p>\n"}],"owner":{"account_id":421621,"reputation":33,"user_id":799956,"display_name":"Alto Nordica"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2377,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":6360859,"answer_count":3,"score":3,"last_activity_date":1635984012,"creation_date":1308153740,"question_id":6360742,"body_markdown":"In order to understand weak references in Java, I have had to consult the Java Language Specification. The following part, from section 12.6, puzzles me: \r\n&gt;   An unfinalized object has never had its finalizer automatically invoked;\r\n    a finalized object has had its finalizer automatically invoked. A finalizable \r\n    object has never had its finalizer automatically invoked, but the Java virtual \r\n    machine may eventually automatically invoke its finalizer.\r\n\r\nSo what is the formal difference between an unfinalized and a finalizable object ? From the quote it seems that if unfinalized and finalizable are to be different, then for an unfinalized object it must be the case that it is *not* true that the JVM may eventually invoke its finalizer. A little confusing or I still have some English semantics to study ;)\r\n\r\nLink to the section in the Java spec: [Implementing Finalization][1]\r\n\r\n\r\n  [1]: http://192.9.162.55/docs/books/jls/second_edition/html/execution.doc.html#44760","title":"Definition: Unfinalized versus finalizable object","body":"<p>In order to understand weak references in Java, I have had to consult the Java Language Specification. The following part, from section 12.6, puzzles me: </p>\n\n<blockquote>\n  <p>An unfinalized object has never had its finalizer automatically invoked;\n      a finalized object has had its finalizer automatically invoked. A finalizable \n      object has never had its finalizer automatically invoked, but the Java virtual \n      machine may eventually automatically invoke its finalizer.</p>\n</blockquote>\n\n<p>So what is the formal difference between an unfinalized and a finalizable object ? From the quote it seems that if unfinalized and finalizable are to be different, then for an unfinalized object it must be the case that it is <em>not</em> true that the JVM may eventually invoke its finalizer. A little confusing or I still have some English semantics to study ;)</p>\n\n<p>Link to the section in the Java spec: <a href=\"http://192.9.162.55/docs/books/jls/second_edition/html/execution.doc.html#44760\" rel=\"nofollow\">Implementing Finalization</a></p>\n"},{"tags":["java","reference","weak-references","finalize","finalization"],"answers":[{"tags":[],"owner":{"account_id":3659411,"reputation":40844,"user_id":3049628,"accept_rate":78,"display_name":"Tim B"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1388741070,"creation_date":1388741070,"answer_id":20900344,"question_id":20899990,"body_markdown":"&gt; &quot;Weak reference objects, which do not prevent their referents from being made **finalizable**, **finalized**, and then **reclaimed**.&quot;\r\n\r\nThese are all stages in the Garbage Collection process. Objects first get marked as finalizable to say that there are no strong references to them. Then finalize() is called and they are marked as finalized, and then finally the memory is reclaimed.\r\n\r\n&gt; public void clear(): &quot;This method is invoked only by Java code; when the garbage collector clears references it does so directly, without invoking this method.&quot;\r\n\r\nThis is saying that when you as a programmer decide to clear a reference then the `clear()` method is used to do that, however if you were to subclass `WeakReference` and override the `clear` method you would NOT see the JVM calling that method when the object was removed.\r\n\r\nThe quote for `enqueue` is essentially saying the same thing. It is a warning that you cannot interact with the workings of the GC by overriding these methods.\r\n","title":"Java: Clarification needed on API doc for Reference Objects","body":"<blockquote>\n  <p>\"Weak reference objects, which do not prevent their referents from being made <strong>finalizable</strong>, <strong>finalized</strong>, and then <strong>reclaimed</strong>.\"</p>\n</blockquote>\n\n<p>These are all stages in the Garbage Collection process. Objects first get marked as finalizable to say that there are no strong references to them. Then finalize() is called and they are marked as finalized, and then finally the memory is reclaimed.</p>\n\n<blockquote>\n  <p>public void clear(): \"This method is invoked only by Java code; when the garbage collector clears references it does so directly, without invoking this method.\"</p>\n</blockquote>\n\n<p>This is saying that when you as a programmer decide to clear a reference then the <code>clear()</code> method is used to do that, however if you were to subclass <code>WeakReference</code> and override the <code>clear</code> method you would NOT see the JVM calling that method when the object was removed.</p>\n\n<p>The quote for <code>enqueue</code> is essentially saying the same thing. It is a warning that you cannot interact with the workings of the GC by overriding these methods.</p>\n"},{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1388741091,"creation_date":1388741091,"answer_id":20900351,"question_id":20899990,"body_markdown":"- &quot;*finalizable, finalized, and then reclaimed.*&quot; means garbage collected.\r\n- &quot;*only by java code*&quot; means called from your program itself (including the JDK) - i.e. you may have some code somewhere that calls `ref.clear();`. It also explains that the GC (i.e. the JVM) does effectively clear the reference but with a different mechanism that does not call the `clear` method. For example, if you override `clear` to be a no-op, the GC will still be able to &quot;nullify&quot; the reference.\r\n","title":"Java: Clarification needed on API doc for Reference Objects","body":"<ul>\n<li>\"<em>finalizable, finalized, and then reclaimed.</em>\" means garbage collected.</li>\n<li>\"<em>only by java code</em>\" means called from your program itself (including the JDK) - i.e. you may have some code somewhere that calls <code>ref.clear();</code>. It also explains that the GC (i.e. the JVM) does effectively clear the reference but with a different mechanism that does not call the <code>clear</code> method. For example, if you override <code>clear</code> to be a no-op, the GC will still be able to \"nullify\" the reference.</li>\n</ul>\n"}],"owner":{"account_id":43015,"reputation":3712,"user_id":125540,"accept_rate":75,"display_name":"Harry"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":20900344,"answer_count":2,"score":3,"last_activity_date":1635984001,"creation_date":1388739824,"question_id":20899990,"body_markdown":"I get the gist of reference objects in Java, and the basic differences between soft, weak, and phantom reference objects.\r\n\r\nHowever, I don&#39;t fully understand the following points from the API docs\r\n\r\n1. From the API doc for [WeakReference&amp;lt;T&amp;gt;][1]: \r\n\r\n  *&quot;Weak reference objects, which do not prevent their referents from being made **finalizable**, **finalized**, and then **reclaimed**.&quot;*\r\n\r\n  Now, the terms in **bold** haven&#39;t been explained anywhere in the API docs, so I wonder what they precisely mean, especially in relation to the more or less deprecated `Object.finalize()` method&#39;s notion of finalization.\r\n\r\n2. From the API doc for [Reference&amp;lt;T&amp;gt;][2]: \r\n\r\n    `public void clear()`: *&quot;This method is invoked **only by Java code**; when the garbage collector clears references it does so **directly, without invoking this method**.&quot;*\r\n\r\n   `public boolean enqueue()`: *&quot;This method is invoked **only by Java code**; when the garbage collector enqueues references it does so **directly, without invoking this method**.&quot;*\r\n\r\n    Again, I don&#39;t know what is meant by **&quot;Java code&quot;** in above 2 quotes: The JVM internal code to which I have no access? Or, the JDK code to which I have readonly/browsing access? Or, the end-user&#39;s own Java code?\r\n\r\n    The **&quot;directly, without invoking this method&quot;** part tells me that JVM has no need to call these methods. On the other hand, the **&quot;only by Java code&quot;** part tells me that it is not the end-user&#39;s Java code but rather the JVM&#39;s (if it meant end-user code, then we&#39;d be finding this phrase littered in all of the API doc for almost every method of every Java class!). So which interpretation is right and who can call this function?\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/ref/WeakReference.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/lang/ref/Reference.html","title":"Java: Clarification needed on API doc for Reference Objects","body":"<p>I get the gist of reference objects in Java, and the basic differences between soft, weak, and phantom reference objects.</p>\n\n<p>However, I don't fully understand the following points from the API docs</p>\n\n<ol>\n<li><p>From the API doc for <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/ref/WeakReference.html\" rel=\"nofollow\">WeakReference&lt;T&gt;</a>: </p>\n\n<p><em>\"Weak reference objects, which do not prevent their referents from being made <strong>finalizable</strong>, <strong>finalized</strong>, and then <strong>reclaimed</strong>.\"</em></p>\n\n<p>Now, the terms in <strong>bold</strong> haven't been explained anywhere in the API docs, so I wonder what they precisely mean, especially in relation to the more or less deprecated <code>Object.finalize()</code> method's notion of finalization.</p></li>\n<li><p>From the API doc for <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/ref/Reference.html\" rel=\"nofollow\">Reference&lt;T&gt;</a>: </p>\n\n<p><code>public void clear()</code>: <em>\"This method is invoked <strong>only by Java code</strong>; when the garbage collector clears references it does so <strong>directly, without invoking this method</strong>.\"</em></p>\n\n<p><code>public boolean enqueue()</code>: <em>\"This method is invoked <strong>only by Java code</strong>; when the garbage collector enqueues references it does so <strong>directly, without invoking this method</strong>.\"</em></p>\n\n<p>Again, I don't know what is meant by <strong>\"Java code\"</strong> in above 2 quotes: The JVM internal code to which I have no access? Or, the JDK code to which I have readonly/browsing access? Or, the end-user's own Java code?</p>\n\n<p>The <strong>\"directly, without invoking this method\"</strong> part tells me that JVM has no need to call these methods. On the other hand, the <strong>\"only by Java code\"</strong> part tells me that it is not the end-user's Java code but rather the JVM's (if it meant end-user code, then we'd be finding this phrase littered in all of the API doc for almost every method of every Java class!). So which interpretation is right and who can call this function?</p></li>\n</ol>\n"},{"tags":["java","reflection","finalize","finalization","phantom-reference"],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1396902195,"creation_date":1396902195,"answer_id":22922334,"question_id":22922170,"body_markdown":"You can&#39;t do something like this with phantom references, and not even reflection will help.  You only get the reference in the `ReferenceQueue` after GC has already occurred, so there&#39;s no more object to call `close()` on.\r\n\r\nOne thing you can do -- a good idea, in point of fact -- is to use the `PhantomReference` to throw an error saying you should have called `close()` directly and didn&#39;t.  For example, you might have the referent object have a reference to your `CustomPhantom`, and call a `CustomPhantom.setCleanedUp(true)` method.  Then in your `CustomPhantom`, if you&#39;re in a `ReferenceQueue` and it&#39;s not cleaned up, you can display a warning.","title":"Will I avoid using Reflection during finalization with PhantomReferences?","body":"<p>You can't do something like this with phantom references, and not even reflection will help.  You only get the reference in the <code>ReferenceQueue</code> after GC has already occurred, so there's no more object to call <code>close()</code> on.</p>\n\n<p>One thing you can do -- a good idea, in point of fact -- is to use the <code>PhantomReference</code> to throw an error saying you should have called <code>close()</code> directly and didn't.  For example, you might have the referent object have a reference to your <code>CustomPhantom</code>, and call a <code>CustomPhantom.setCleanedUp(true)</code> method.  Then in your <code>CustomPhantom</code>, if you're in a <code>ReferenceQueue</code> and it's not cleaned up, you can display a warning.</p>\n"},{"tags":[],"owner":{"account_id":1100931,"reputation":2096,"user_id":1093344,"accept_rate":67,"display_name":"cmoaciopm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1515475420,"creation_date":1515475420,"answer_id":48161877,"question_id":22922170,"body_markdown":"Since there was accepted answer, I just add more information.\r\n\r\nWhen using Java reflection APIs to examine class **PantomReferences**, you will not get the field **referent**.  **NoSuchFieldException** will be thrown.\r\n\r\n\r\n","title":"Will I avoid using Reflection during finalization with PhantomReferences?","body":"<p>Since there was accepted answer, I just add more information.</p>\n\n<p>When using Java reflection APIs to examine class <strong>PantomReferences</strong>, you will not get the field <strong>referent</strong>.  <strong>NoSuchFieldException</strong> will be thrown.</p>\n"}],"owner":{"account_id":1369572,"reputation":1197,"user_id":1305193,"accept_rate":48,"display_name":"Anton Kasianchuk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":22922334,"answer_count":2,"score":0,"last_activity_date":1635983981,"creation_date":1396901702,"question_id":22922170,"body_markdown":"Let&#39;s say that I created a class MyClass that implements Closable. So in the close() method I am going to free some very important recources. Well since it is very important recources I created some kind of safety network (as recommended in Effective Java). Here it is:\r\n\r\n    protected void finalize(){\r\n    if (/*user didn&#39;t call close() method by himself*/){\r\n        close();\r\n    }\r\n    }\r\n\r\nFirst I was very happy but later I read that finalizer are not so cool and that there is such a cool tool like PhantomReference. So I decided to change my code to use PhantomReference instead of finalize() method. I created CustomPantom extends PhantomRefernce. Here it is:\r\n\r\n    public class CustomPhantom extends PhantomReference {\r\n\r\n\t//Object cobj;\r\n\t\r\n\tpublic CustomPhantom(Object referent, ReferenceQueue q) {\r\n\t\tsuper(referent, q);\r\n\t\t//this.cobj = referent;   can&#39;t save the refference to my object in a class field,\r\n                            // because it will become strongly rechable \r\n                            //and PhantomReference won&#39;t be put to the reference queue  \r\n\t}\r\n\t\r\n\tpublic void cleanup(){\r\n\t\t//here I want to call close method from my object, \r\n                //but I don&#39;t have a reference to my object\r\n\t}\r\n    }\r\n\r\nSo as I see the only way I can get a reference to my object is to use reflection and get if from the referent field which is in the Reference class. Is this the only way to call MyClass.close() from clean up method?\r\n\r\nP.S. I haven&#39;t posted all the code here but I tested it and all works fine. ReferenceQueue is filled by PhantomReferences, and then I can get them one by one and call cleanup method. But I fail to see how to resolve the above problem without using reflection.","title":"Will I avoid using Reflection during finalization with PhantomReferences?","body":"<p>Let's say that I created a class MyClass that implements Closable. So in the close() method I am going to free some very important recources. Well since it is very important recources I created some kind of safety network (as recommended in Effective Java). Here it is:</p>\n\n<pre><code>protected void finalize(){\nif (/*user didn't call close() method by himself*/){\n    close();\n}\n}\n</code></pre>\n\n<p>First I was very happy but later I read that finalizer are not so cool and that there is such a cool tool like PhantomReference. So I decided to change my code to use PhantomReference instead of finalize() method. I created CustomPantom extends PhantomRefernce. Here it is:</p>\n\n<pre><code>public class CustomPhantom extends PhantomReference {\n\n//Object cobj;\n\npublic CustomPhantom(Object referent, ReferenceQueue q) {\n    super(referent, q);\n    //this.cobj = referent;   can't save the refference to my object in a class field,\n                        // because it will become strongly rechable \n                        //and PhantomReference won't be put to the reference queue  \n}\n\npublic void cleanup(){\n    //here I want to call close method from my object, \n            //but I don't have a reference to my object\n}\n}\n</code></pre>\n\n<p>So as I see the only way I can get a reference to my object is to use reflection and get if from the referent field which is in the Reference class. Is this the only way to call MyClass.close() from clean up method?</p>\n\n<p>P.S. I haven't posted all the code here but I tested it and all works fine. ReferenceQueue is filled by PhantomReferences, and then I can get them one by one and call cleanup method. But I fail to see how to resolve the above problem without using reflection.</p>\n"},{"tags":["java","jvm","finalize","finalization"],"comments":[{"owner":{"account_id":2264130,"reputation":38897,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":0,"creation_date":1431111727,"post_id":30131021,"comment_id":48372095,"body_markdown":"Isn&#39;t it bad practise to rely on finalization of objects? i mean, it&#39;s never guarantee `finalize()` will be called - or?","body":"Isn&#39;t it bad practise to rely on finalization of objects? i mean, it&#39;s never guarantee <code>finalize()</code> will be called - or?"},{"owner":{"account_id":255665,"reputation":232816,"user_id":535871,"accept_rate":84,"display_name":"Ted Hopp"},"score":0,"creation_date":1431111966,"post_id":30131021,"comment_id":48372223,"body_markdown":"You might want to manage your own object pool rather than leaning on the JVM. Depending on how many objects you need _simultaneously_, you may find a huge performance gain by completely avoiding the allocation/garbage collection/finalization overhead.","body":"You might want to manage your own object pool rather than leaning on the JVM. Depending on how many objects you need <i>simultaneously</i>, you may find a huge performance gain by completely avoiding the allocation/garbage collection/finalization overhead."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1431112070,"post_id":30131021,"comment_id":48372268,"body_markdown":"You should never be creating so many finalizable objects that this should be a concern.  You should only use it as a last resort or you will see a serious performance / stability problem when the objects are cleaned.  You might not be concerned about it not, but use this a lot and you will be.","body":"You should never be creating so many finalizable objects that this should be a concern.  You should only use it as a last resort or you will see a serious performance / stability problem when the objects are cleaned.  You might not be concerned about it not, but use this a lot and you will be."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1431112137,"post_id":30131021,"comment_id":48372301,"body_markdown":"Can you use a reference queue instead of finalization?  See e.g. http://stackoverflow.com/questions/14450538/using-javas-referencequeue for how this might work.","body":"Can you use a reference queue instead of finalization?  See e.g. <a href=\"http://stackoverflow.com/questions/14450538/using-javas-referencequeue\" title=\"using javas referencequeue\">stackoverflow.com/questions/14450538/using-javas-referencequ&zwnj;&#8203;eue</a> for how this might work."},{"owner":{"account_id":1051720,"reputation":1538,"user_id":1055489,"accept_rate":40,"display_name":"Theodore Murdock"},"score":0,"creation_date":1431113612,"post_id":30131021,"comment_id":48373075,"body_markdown":"@LouisWasserman I could, but I&#39;m fairly certain that allocating another object to keep track of whether one of my lightweight objects has been deleted will be as high or higher cost than using finalizable in terms of memory.  Doing so with phantom references would be better in terms of not blocking garbage collection, if finalization is too slow, and my own queue running at a higher priority might work faster, but allocating another object that requires similar note taking by the JVM likely has an even higher up-front cost than being finalizable.","body":"@LouisWasserman I could, but I&#39;m fairly certain that allocating another object to keep track of whether one of my lightweight objects has been deleted will be as high or higher cost than using finalizable in terms of memory.  Doing so with phantom references would be better in terms of not blocking garbage collection, if finalization is too slow, and my own queue running at a higher priority might work faster, but allocating another object that requires similar note taking by the JVM likely has an even higher up-front cost than being finalizable."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1431113709,"post_id":30131021,"comment_id":48373125,"body_markdown":"@TheodoreMurdock: Generally you have one reference queue for the entire application.  Reference queues are generally considered significantly safer and more efficient than finalization.","body":"@TheodoreMurdock: Generally you have one reference queue for the entire application.  Reference queues are generally considered significantly safer and more efficient than finalization."},{"owner":{"account_id":1051720,"reputation":1538,"user_id":1055489,"accept_rate":40,"display_name":"Theodore Murdock"},"score":0,"creation_date":1431114263,"post_id":30131021,"comment_id":48373387,"body_markdown":"@PeterLawrey I imagine that might be the case. However, these objects tend to have very long lifetimes (measured in hours). Usage patterns may vary, a user can ask for the entire database of around 20 million objects to be rebuilt, but more commonly only a few thousand would be lost and rebuilt at a time. Since a few references to a small percentage of the deleted objects might be retained, we&#39;d like for their properties to also remain retrievable.","body":"@PeterLawrey I imagine that might be the case. However, these objects tend to have very long lifetimes (measured in hours). Usage patterns may vary, a user can ask for the entire database of around 20 million objects to be rebuilt, but more commonly only a few thousand would be lost and rebuilt at a time. Since a few references to a small percentage of the deleted objects might be retained, we&#39;d like for their properties to also remain retrievable."},{"owner":{"account_id":1051720,"reputation":1538,"user_id":1055489,"accept_rate":40,"display_name":"Theodore Murdock"},"score":0,"creation_date":1431114441,"post_id":30131021,"comment_id":48373475,"body_markdown":"@LouisWasserman Sure, there&#39;s just one queue, but there are `n` weak or transient reference objects if there are `n` objects to do cleanup for, and the JVM must take notes on each such weak reference so they can be enqueued when the corresponding object is garbage collected.","body":"@LouisWasserman Sure, there&#39;s just one queue, but there are <code>n</code> weak or transient reference objects if there are <code>n</code> objects to do cleanup for, and the JVM must take notes on each such weak reference so they can be enqueued when the corresponding object is garbage collected."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1431114491,"post_id":30131021,"comment_id":48373499,"body_markdown":"Usually what you&#39;ll do is make one of your classes extend `WeakReference`, so you don&#39;t have any extra objects.  But even so, that extra information is generally considered significantly cheaper than finalization.","body":"Usually what you&#39;ll do is make one of your classes extend <code>WeakReference</code>, so you don&#39;t have any extra objects.  But even so, that extra information is generally considered significantly cheaper than finalization."},{"owner":{"account_id":1051720,"reputation":1538,"user_id":1055489,"accept_rate":40,"display_name":"Theodore Murdock"},"score":0,"creation_date":1431115111,"post_id":30131021,"comment_id":48373787,"body_markdown":"@LouisWasserman ...because people are concerned with the potential for memory retention due to finalization not happening quickly. I&#39;ve just run a quick test, it appears that, in my case, all 20 million objects are finalized and garbage collected very quickly with no fuss when the database must be rebuilt. So the only real concern I have is the upfront cost.","body":"@LouisWasserman ...because people are concerned with the potential for memory retention due to finalization not happening quickly. I&#39;ve just run a quick test, it appears that, in my case, all 20 million objects are finalized and garbage collected very quickly with no fuss when the database must be rebuilt. So the only real concern I have is the upfront cost."},{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1431115506,"post_id":30131021,"comment_id":48373979,"body_markdown":"@TheodoreMurdock Quite the opposite. Finalizers are more expensive than PhantomReferences. They are also backed by an instance of `java.lang.ref.Reference` (FinalReference), so they can&#39;t be cheaper, but their behavior is more complicated. Moreover, HotSpot JVM does not inline allocation of objects that have a non-trivial finalizer.","body":"@TheodoreMurdock Quite the opposite. Finalizers are more expensive than PhantomReferences. They are also backed by an instance of <code>java.lang.ref.Reference</code> (FinalReference), so they can&#39;t be cheaper, but their behavior is more complicated. Moreover, HotSpot JVM does not inline allocation of objects that have a non-trivial finalizer."},{"owner":{"account_id":1051720,"reputation":1538,"user_id":1055489,"accept_rate":40,"display_name":"Theodore Murdock"},"score":0,"creation_date":1431116081,"post_id":30131021,"comment_id":48374241,"body_markdown":"@apangin If you know the answer, would you consider answering my question?","body":"@apangin If you know the answer, would you consider answering my question?"},{"owner":{"account_id":1051720,"reputation":1538,"user_id":1055489,"accept_rate":40,"display_name":"Theodore Murdock"},"score":0,"creation_date":1431116435,"post_id":30131021,"comment_id":48374408,"body_markdown":"@apangin Also, is the implementation really lighter weight for PhantomReferences? The PhantomReference must be placed into a specific queue so the JVM must know a triplet of information: (the phantom reference, the queue to place it in, the object that signals that the phantom reference should be placed in the queue). Is that triplet of information really retained at a lower memory cost than the simple knowledge that the finalize method of an object must be run before it can be garbage collected? If so, how?","body":"@apangin Also, is the implementation really lighter weight for PhantomReferences? The PhantomReference must be placed into a specific queue so the JVM must know a triplet of information: (the phantom reference, the queue to place it in, the object that signals that the phantom reference should be placed in the queue). Is that triplet of information really retained at a lower memory cost than the simple knowledge that the finalize method of an object must be run before it can be garbage collected? If so, how?"},{"owner":{"account_id":1051720,"reputation":1538,"user_id":1055489,"accept_rate":40,"display_name":"Theodore Murdock"},"score":0,"creation_date":1432682502,"post_id":30131021,"comment_id":49021522,"body_markdown":"Actually, I should modify my reply to @LouisWasserman...after rebuilding the database a few times the memory did seem to build up due to lack of finalization; it appears I had overestimated how much of the memory was due to these small objects (and not their contents) so my initial testing underestimated the effects.  At any rate, with the answer being that a much larger object must be allocated to keep track of a simple finalizable object, the up-front memory cost is too high for my application regardless of the performance of finalization, as I suspected it might be.","body":"Actually, I should modify my reply to @LouisWasserman...after rebuilding the database a few times the memory did seem to build up due to lack of finalization; it appears I had overestimated how much of the memory was due to these small objects (and not their contents) so my initial testing underestimated the effects.  At any rate, with the answer being that a much larger object must be allocated to keep track of a simple finalizable object, the up-front memory cost is too high for my application regardless of the performance of finalization, as I suspected it might be."}],"answers":[{"tags":[],"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1431119563,"creation_date":1431119563,"answer_id":30132934,"question_id":30131021,"body_markdown":"Finalizers are **awful**  not only because of retention issues, but from performance perspective, too.\r\n\r\nIn Oracle JDK / OpenJDK the objects with `finalize` method are backed by the instances of [Finalizer](http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/a006fa0a9e8f/src/share/classes/java/lang/ref/Finalizer.java), the subclass of `java.lang.ref.Reference`.\r\n\r\nAll Finalizers are registered at the end of object&#39;s contructor in two steps: a call [from Java to VM](http://hg.openjdk.java.net/jdk8u/jdk8u/hotspot/file/ade5be2b1758/src/share/vm/opto/parse1.cpp#l1938) followed by the invocation of [Finalizer.register()](http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/a006fa0a9e8f/src/share/classes/java/lang/ref/Finalizer.java#l85). This double transition Java-&gt;VM-&gt;Java cannot be inlined by JIT compiler. But the worst thing is that Finalizer&#39;s constructor makes a linked list under the [global lock](http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/a006fa0a9e8f/src/share/classes/java/lang/ref/Finalizer.java#l50)! (facepalm)\r\n\r\nFinalizers are also bad in terms of memory footprint: in addition to all Reference fields they have [two extra fields](http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/a006fa0a9e8f/src/share/classes/java/lang/ref/Finalizer.java#l42): `next` and `prev`.\r\n\r\nPhantomReferences are much better than finalizers:\r\n\r\n - their construction does not require transition to VM and back and can be inlined;\r\n - they do not have extra fields besides inherited from `java.lang.ref.Reference`;\r\n - no global synchronization is made.\r\n\r\n[This benchmark](http://pastebin.com/X3C2MMCx) compares the allocation speed of finalizable objects and the objects backed by PhantomReference:\r\n\r\n    Benchmark               Mode  Cnt       Score      Error   Units\r\n    Finalizer.finalizable  thrpt    5    2171,312 &#177; 1469,705  ops/ms\r\n    Finalizer.phantom      thrpt    5   61280,612 &#177;  692,922  ops/ms\r\n    Finalizer.plain        thrpt    5  225752,307 &#177; 7618,304  ops/ms\r\n","title":"What is the up-front cost of an object being finalizable?","body":"<p>Finalizers are <strong>awful</strong>  not only because of retention issues, but from performance perspective, too.</p>\n\n<p>In Oracle JDK / OpenJDK the objects with <code>finalize</code> method are backed by the instances of <a href=\"http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/a006fa0a9e8f/src/share/classes/java/lang/ref/Finalizer.java\">Finalizer</a>, the subclass of <code>java.lang.ref.Reference</code>.</p>\n\n<p>All Finalizers are registered at the end of object's contructor in two steps: a call <a href=\"http://hg.openjdk.java.net/jdk8u/jdk8u/hotspot/file/ade5be2b1758/src/share/vm/opto/parse1.cpp#l1938\">from Java to VM</a> followed by the invocation of <a href=\"http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/a006fa0a9e8f/src/share/classes/java/lang/ref/Finalizer.java#l85\">Finalizer.register()</a>. This double transition Java->VM->Java cannot be inlined by JIT compiler. But the worst thing is that Finalizer's constructor makes a linked list under the <a href=\"http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/a006fa0a9e8f/src/share/classes/java/lang/ref/Finalizer.java#l50\">global lock</a>! (facepalm)</p>\n\n<p>Finalizers are also bad in terms of memory footprint: in addition to all Reference fields they have <a href=\"http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/a006fa0a9e8f/src/share/classes/java/lang/ref/Finalizer.java#l42\">two extra fields</a>: <code>next</code> and <code>prev</code>.</p>\n\n<p>PhantomReferences are much better than finalizers:</p>\n\n<ul>\n<li>their construction does not require transition to VM and back and can be inlined;</li>\n<li>they do not have extra fields besides inherited from <code>java.lang.ref.Reference</code>;</li>\n<li>no global synchronization is made.</li>\n</ul>\n\n<p><a href=\"http://pastebin.com/X3C2MMCx\">This benchmark</a> compares the allocation speed of finalizable objects and the objects backed by PhantomReference:</p>\n\n<pre><code>Benchmark               Mode  Cnt       Score      Error   Units\nFinalizer.finalizable  thrpt    5    2171,312 ± 1469,705  ops/ms\nFinalizer.phantom      thrpt    5   61280,612 ±  692,922  ops/ms\nFinalizer.plain        thrpt    5  225752,307 ± 7618,304  ops/ms\n</code></pre>\n"}],"owner":{"account_id":1051720,"reputation":1538,"user_id":1055489,"accept_rate":40,"display_name":"Theodore Murdock"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":316,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":30132934,"answer_count":1,"score":9,"last_activity_date":1635983947,"creation_date":1431111635,"question_id":30131021,"body_markdown":"Discussions of finalizable objects in Java typically discuss the common indirect costs that happen when finalizable objects (and their associated resources) cannot be quickly garbage collected.\r\n\r\nI&#39;m more interested, at the moment, in what the actual direct cost of being finalizable is, both in memory terms, and in object allocation time. I&#39;ve seen oblique references to the existence of such a cost in a number of places, for example, [Oracle&#39;s article on finalization memory retention issues](http://www.oracle.com/technetwork/java/javamail/finalization-137655.html) notes:\r\n\r\n&gt;When `obj` is allocated, the JVM internally records that `obj` is finalizable. This typically slows down the otherwise fast allocation path that modern JVMs have.\r\n\r\n**How does the JVM record that an object instance is finalizable, and what are the memory and performance costs of doing so?**\r\n\r\nFor those interested in my specific application:\r\n\r\nWe produce and retain millions of incredibly lightweight objects; adding a single pointer to these objects is incredibly costly, so we&#39;ve done a fair bit of work to remove pointers from them, instead using smaller numeric ids packed into a subset of the bits of a field. Unpacking the number allows the shared immutable property with that id to be retrieved from a Pool that stores them using a Map&lt;Integer, property-type&gt;.\r\n\r\nThe remaining question is how to handle the garbage collection of property values that are no longer used.\r\n\r\nOne strategy that has been considered is using reference counting; when objects are created and retrieve the pooled id for a value, the reference count for that value is incremented; when it is no longer used, it must be decremented.\r\n\r\nOne option to ensure this decrement happens is to add the following finalize method:\r\n\r\n    public void finalize() {\r\n        Pool.release(getPropertyId());\r\n    }\r\n\r\nHowever, if the very act of being finalizable means that an additional pointer to the object must be kept, the up-front cost of being finalizable would be considered high for this application. If it means additional objects must be allocated, it would almost certainly be too high...hence, my question: what is the direct up-front cost of being finalizable?","title":"What is the up-front cost of an object being finalizable?","body":"<p>Discussions of finalizable objects in Java typically discuss the common indirect costs that happen when finalizable objects (and their associated resources) cannot be quickly garbage collected.</p>\n\n<p>I'm more interested, at the moment, in what the actual direct cost of being finalizable is, both in memory terms, and in object allocation time. I've seen oblique references to the existence of such a cost in a number of places, for example, <a href=\"http://www.oracle.com/technetwork/java/javamail/finalization-137655.html\">Oracle's article on finalization memory retention issues</a> notes:</p>\n\n<blockquote>\n  <p>When <code>obj</code> is allocated, the JVM internally records that <code>obj</code> is finalizable. This typically slows down the otherwise fast allocation path that modern JVMs have.</p>\n</blockquote>\n\n<p><strong>How does the JVM record that an object instance is finalizable, and what are the memory and performance costs of doing so?</strong></p>\n\n<p>For those interested in my specific application:</p>\n\n<p>We produce and retain millions of incredibly lightweight objects; adding a single pointer to these objects is incredibly costly, so we've done a fair bit of work to remove pointers from them, instead using smaller numeric ids packed into a subset of the bits of a field. Unpacking the number allows the shared immutable property with that id to be retrieved from a Pool that stores them using a Map.</p>\n\n<p>The remaining question is how to handle the garbage collection of property values that are no longer used.</p>\n\n<p>One strategy that has been considered is using reference counting; when objects are created and retrieve the pooled id for a value, the reference count for that value is incremented; when it is no longer used, it must be decremented.</p>\n\n<p>One option to ensure this decrement happens is to add the following finalize method:</p>\n\n<pre><code>public void finalize() {\n    Pool.release(getPropertyId());\n}\n</code></pre>\n\n<p>However, if the very act of being finalizable means that an additional pointer to the object must be kept, the up-front cost of being finalizable would be considered high for this application. If it means additional objects must be allocated, it would almost certainly be too high...hence, my question: what is the direct up-front cost of being finalizable?</p>\n"},{"tags":["java","garbage-collection","java-memory-model","finalize","finalization"],"comments":[{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1483010900,"post_id":41378606,"comment_id":69959196,"body_markdown":"I would first do some research on that topic; and check if you find *anything* about this ... written after the year 2000 or so. Keep in mind that the most famous thinks Block worked ... are like 15 years in the past. **A lot** has happened on the java platform since then.","body":"I would first do some research on that topic; and check if you find <i>anything</i> about this ... written after the year 2000 or so. Keep in mind that the most famous thinks Block worked ... are like 15 years in the past. <b>A lot</b> has happened on the java platform since then."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1483011109,"post_id":41378606,"comment_id":69959342,"body_markdown":"I don&#39;t see why the allocation would be any more expensive.  The clean up creates objects to add the object to the finalization queue.","body":"I don&#39;t see why the allocation would be any more expensive.  The clean up creates objects to add the object to the finalization queue."},{"owner":{"account_id":535619,"reputation":3374,"user_id":905033,"display_name":"Lew Bloch"},"score":0,"creation_date":1483044472,"post_id":41378606,"comment_id":69976230,"body_markdown":"Allocation could take longer because it would be more likely to have to wait for GC cycles induced by the non-trivial `finalize()` overrides.","body":"Allocation could take longer because it would be more likely to have to wait for GC cycles induced by the non-trivial <code>finalize()</code> overrides."},{"owner":{"account_id":535619,"reputation":3374,"user_id":905033,"display_name":"Lew Bloch"},"score":0,"creation_date":1483044530,"post_id":41378606,"comment_id":69976254,"body_markdown":"@GhostCat It&#39;s &quot;Bloch&quot;, not &quot;Block&quot;.","body":"@GhostCat It&#39;s &quot;Bloch&quot;, not &quot;Block&quot;."},{"owner":{"account_id":535619,"reputation":3374,"user_id":905033,"display_name":"Lew Bloch"},"score":0,"creation_date":1483044854,"post_id":41378606,"comment_id":69976396,"body_markdown":"Also, _Effective Java_ is, &quot;like&quot;, eight years old, not that that matters because _the advice is valid_! Why do you consider old as bad, let alone exaggerate the age?","body":"Also, <i>Effective Java</i> is, &quot;like&quot;, eight years old, not that that matters because <i>the advice is valid</i>! Why do you consider old as bad, let alone exaggerate the age?"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1483084387,"post_id":41378606,"comment_id":69987220,"body_markdown":"@LewBloch &quot;Block&quot; was my smart phone doing auto correction without me noticing. It is not always that easy to use the same &quot;keyboard assistant&quot; when regularly posting in two languages. Then: the first edition of Effective Java was published in 2001. That is 15 years. I remembered because I bought that book in 2002. Thing is: I have seen other advise from that book that can be regarded as outdated today. All I am saying is: do not blindly believe in rules and especially **numbers** that are 15 or maybe 8 years old. A lot of things were 100 times slower with Java back then; compared to today.","body":"@LewBloch &quot;Block&quot; was my smart phone doing auto correction without me noticing. It is not always that easy to use the same &quot;keyboard assistant&quot; when regularly posting in two languages. Then: the first edition of Effective Java was published in 2001. That is 15 years. I remembered because I bought that book in 2002. Thing is: I have seen other advise from that book that can be regarded as outdated today. All I am saying is: do not blindly believe in rules and especially <b>numbers</b> that are 15 or maybe 8 years old. A lot of things were 100 times slower with Java back then; compared to today."}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1484152936,"creation_date":1484152936,"answer_id":41596185,"question_id":41378606,"body_markdown":"I have searched for the original statement:\r\n\r\n&gt;  On my machine, the time to create and destroy a simple object is about\r\n5.6 ns. Adding a finalizer increases the time to 2,400 ns. In other words, it is about\r\n430 times slower to create and destroy objects with finalizers.\r\n\r\nSo this isn’t a general statement, but just a report of evidence that suggests that there is a pattern behind it, not that the number is reproducible. This factor is likely to change when using not-so-trivial objects or just a lot more of them.\r\n\r\nOf course, these costs depend on how finalization is actually implemented. In HotSpot, an instance of [`Finalizer`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/lang/ref/Finalizer.java) will be created by calling the [`Finalizer.register`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/lang/ref/Finalizer.java#85) method every time an object with a non-trivial `finalize()` method is created.\r\n\r\nThis might imply much more costs than just allocating two objects instead of one. These `Finalizer` instances will be strongly linked, which is necessary to prevent the collection of the `Finalizer` instances themselves, and they have a reference to the constructed object. In other words, regardless of how local the object allocation initially was, the new object will *escape*, hindering lots of subsequent optimizations.\r\n\r\nWhen it comes to “destruction”, reclaiming an ordinary object is a no-op. No action will be taken and, in&#160;fact, it is impossible to do anything with the unreachable object, as it is *unreachable*. Special reachability states can only be encountered by having a reachable `Reference` object, like the `Finalizer` object mentioned above, which holds a reference to the particular object (while the object wasn’t encountered through any other ordinary reference. Then, the `Reference` object can be enqueued, after which (one of) the finalizer thread(s) can take the appropriate action.\r\n\r\nOf course, comparing “no action” with any other action can lead to arbitrary factors. The absolute number was 2,400ns, which is reasonable for an action that involves enqueuing an object and notifying another thread to poll the queue.\r\n","title":"why allocation phase can be increased if we override finalize method?","body":"<p>I have searched for the original statement:</p>\n\n<blockquote>\n  <p>On my machine, the time to create and destroy a simple object is about\n  5.6 ns. Adding a finalizer increases the time to 2,400 ns. In other words, it is about\n  430 times slower to create and destroy objects with finalizers.</p>\n</blockquote>\n\n<p>So this isn’t a general statement, but just a report of evidence that suggests that there is a pattern behind it, not that the number is reproducible. This factor is likely to change when using not-so-trivial objects or just a lot more of them.</p>\n\n<p>Of course, these costs depend on how finalization is actually implemented. In HotSpot, an instance of <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/lang/ref/Finalizer.java\" rel=\"nofollow noreferrer\"><code>Finalizer</code></a> will be created by calling the <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/lang/ref/Finalizer.java#85\" rel=\"nofollow noreferrer\"><code>Finalizer.register</code></a> method every time an object with a non-trivial <code>finalize()</code> method is created.</p>\n\n<p>This might imply much more costs than just allocating two objects instead of one. These <code>Finalizer</code> instances will be strongly linked, which is necessary to prevent the collection of the <code>Finalizer</code> instances themselves, and they have a reference to the constructed object. In other words, regardless of how local the object allocation initially was, the new object will <em>escape</em>, hindering lots of subsequent optimizations.</p>\n\n<p>When it comes to “destruction”, reclaiming an ordinary object is a no-op. No action will be taken and, in fact, it is impossible to do anything with the unreachable object, as it is <em>unreachable</em>. Special reachability states can only be encountered by having a reachable <code>Reference</code> object, like the <code>Finalizer</code> object mentioned above, which holds a reference to the particular object (while the object wasn’t encountered through any other ordinary reference. Then, the <code>Reference</code> object can be enqueued, after which (one of) the finalizer thread(s) can take the appropriate action.</p>\n\n<p>Of course, comparing “no action” with any other action can lead to arbitrary factors. The absolute number was 2,400ns, which is reasonable for an action that involves enqueuing an object and notifying another thread to poll the queue.</p>\n"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":41596185,"answer_count":1,"score":2,"last_activity_date":1635983935,"creation_date":1483010110,"question_id":41378606,"body_markdown":"I have heard that in Joshua Bloch book written that allocation and memory collection might be increased to 430 times if we override finalize method.\r\n\r\nIt is clear for me that memory collection can work slower because additional iteration requred for gc to free memory.\r\n\r\nBut why allocation phase can be increased?\r\n","title":"why allocation phase can be increased if we override finalize method?","body":"<p>I have heard that in Joshua Bloch book written that allocation and memory collection might be increased to 430 times if we override finalize method.</p>\n\n<p>It is clear for me that memory collection can work slower because additional iteration requred for gc to free memory.</p>\n\n<p>But why allocation phase can be increased?</p>\n"},{"tags":["java","garbage-collection","finalize","finalization","phantom-reference"],"comments":[{"owner":{"account_id":5363406,"reputation":420,"user_id":4274023,"accept_rate":50,"display_name":"UNIQUEorn"},"score":1,"creation_date":1483100209,"post_id":41396051,"comment_id":69993886,"body_markdown":"What is your actual question here? Can you explain your problem more clearly?","body":"What is your actual question here? Can you explain your problem more clearly?"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1483100247,"post_id":41396051,"comment_id":69993905,"body_markdown":"Have you looked at this http://stackoverflow.com/questions/1599069/have-you-ever-used-phantom-reference-in-any-project for example?","body":"Have you looked at this <a href=\"http://stackoverflow.com/questions/1599069/have-you-ever-used-phantom-reference-in-any-project\" title=\"have you ever used phantom reference in any project\">stackoverflow.com/questions/1599069/&hellip;</a> for example?"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1483100267,"post_id":41396051,"comment_id":69993923,"body_markdown":"And the javadoc for that PhantomReference ctor clearly says: *It is possible to create a phantom reference with a null queue, but such a reference is completely useless: Its get method will always return null and, since it does not have a queue, it will never be enqueued.* So, yes, that newly created Object is thus subject to garbage collection.","body":"And the javadoc for that PhantomReference ctor clearly says: <i>It is possible to create a phantom reference with a null queue, but such a reference is completely useless: Its get method will always return null and, since it does not have a queue, it will never be enqueued.</i> So, yes, that newly created Object is thus subject to garbage collection."},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1483101040,"post_id":41396051,"comment_id":69994278,"body_markdown":"@GhostCat, Why do you think so? how can we check this? I don&#39;t see causal relationship","body":"@GhostCat, Why do you think so? how can we check this? I don&#39;t see causal relationship"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1483101919,"post_id":41396051,"comment_id":69994665,"body_markdown":"Passing that newly created object X into a PhantomReference ... should not make X a &quot;live&quot; object. There is no reason why the GC should be prevented from collecting it. And as the PhantomReference doesnt have a queue for X either ... I assume the only thing that can happen to X is: being garbage collected the next time the GC runs. And I agree with UNIQUEorn - no idea where you want to go with this question. What is the problem you intend to solve?","body":"Passing that newly created object X into a PhantomReference ... should not make X a &quot;live&quot; object. There is no reason why the GC should be prevented from collecting it. And as the PhantomReference doesnt have a queue for X either ... I assume the only thing that can happen to X is: being garbage collected the next time the GC runs. And I agree with UNIQUEorn - no idea where you want to go with this question. What is the problem you intend to solve?"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1483102053,"post_id":41396051,"comment_id":69994720,"body_markdown":"@GhostCat but if we pass queue to constructor, queue hold the reference and it prevent for object to be collected?","body":"@GhostCat but if we pass queue to constructor, queue hold the reference and it prevent for object to be collected?"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1483102524,"post_id":41396051,"comment_id":69994922,"body_markdown":"Not at all. The links clearly explain that: PhantomRefernces do not prevent gargabe collection. They are simply a mechanism to **understand** when the GC does its work. You can say: &quot;give me a shoulder tap when X goes away&quot;. And then you get a shoulder tap; and decide what to do about that. Thats it.","body":"Not at all. The links clearly explain that: PhantomRefernces do not prevent gargabe collection. They are simply a mechanism to <b>understand</b> when the GC does its work. You can say: &quot;give me a shoulder tap when X goes away&quot;. And then you get a shoulder tap; and decide what to do about that. Thats it."},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1483102674,"post_id":41396051,"comment_id":69995008,"body_markdown":"@GhostCat looks like it is correct for weak/soft references nut incorect for phantom reference","body":"@GhostCat looks like it is correct for weak/soft references nut incorect for phantom reference"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1483102904,"post_id":41396051,"comment_id":69995114,"body_markdown":"And what makes you think so?","body":"And what makes you think so?"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1483103458,"post_id":41396051,"comment_id":69995363,"body_markdown":"@GhostCat https://docs.oracle.com/javase/7/docs/api/java/lang/ref/PhantomReference.html","body":"@GhostCat <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/ref/PhantomReference.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/lang/ref/&hellip;</a>"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1483103463,"post_id":41396051,"comment_id":69995367,"body_markdown":"@GhostCat **Unlike soft and weak references, phantom references are not automatically cleared by the garbage collector as they are enqueued. An object that is reachable via phantom references will remain so until all such references are cleared or themselves become unreachable.**","body":"@GhostCat <b>Unlike soft and weak references, phantom references are not automatically cleared by the garbage collector as they are enqueued. An object that is reachable via phantom references will remain so until all such references are cleared or themselves become unreachable.</b>"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1483104690,"post_id":41396051,"comment_id":69995886,"body_markdown":"@UNIQUEorn, I merely learn/investigate java deeper","body":"@UNIQUEorn, I merely learn/investigate java deeper"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1483105053,"post_id":41396051,"comment_id":69996056,"body_markdown":"https://www.ibm.com/developerworks/library/j-refs/","body":"<a href=\"https://www.ibm.com/developerworks/library/j-refs/\" rel=\"nofollow noreferrer\">ibm.com/developerworks/library/j-refs</a>"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1484160469,"post_id":41396051,"comment_id":70399649,"body_markdown":"@gstackoverflow: that IBM article contradicts the documentation and actual implementation behavior of Oracle’s JRE in several aspects. Don’t count on it…","body":"@gstackoverflow: that IBM article contradicts the documentation and actual implementation behavior of Oracle’s JRE in several aspects. Don’t count on it…"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1485970469,"post_id":41396051,"comment_id":71149807,"body_markdown":"@gstackoverflow: I noted that you have several gc related questions that are still open, i.e. [q1](http://stackoverflow.com/q/41378933), [q2](http://stackoverflow.com/q/41366036), [q3](http://stackoverflow.com/q/41378606) and [q4](http://stackoverflow.com/q/41919394). So it would be great to know whether there are still things unclear or whether these issues aren’t relevant to you anymore. I’m thinking about adding an answer here, especially as it might contradict the most of the comments, but if you don’t need it anymore, you may remove the question instead.","body":"@gstackoverflow: I noted that you have several gc related questions that are still open, i.e. <a href=\"http://stackoverflow.com/q/41378933\">q1</a>, <a href=\"http://stackoverflow.com/q/41366036\">q2</a>, <a href=\"http://stackoverflow.com/q/41378606\">q3</a> and <a href=\"http://stackoverflow.com/q/41919394\">q4</a>. So it would be great to know whether there are still things unclear or whether these issues aren’t relevant to you anymore. I’m thinking about adding an answer here, especially as it might contradict the most of the comments, but if you don’t need it anymore, you may remove the question instead."},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1485971276,"post_id":41396051,"comment_id":71150300,"body_markdown":"@Holger I will be happy if you answer these questions","body":"@Holger I will be happy if you answer these questions"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1485976080,"post_id":41396051,"comment_id":71152950,"body_markdown":"@gstackoverflow: the other questions have answers, two of them even have an answer of mine. If they are not satisfying, you should add clarifying comments to address what’s missing. Otherwise, you may accept an answer (doesn’t need to be mine ;-). I added an answer to this question; it became a bit bigger than I thought, but that’s a *really interesting* topic…","body":"@gstackoverflow: the other questions have answers, two of them even have an answer of mine. If they are not satisfying, you should add clarifying comments to address what’s missing. Otherwise, you may accept an answer (doesn’t need to be mine ;-). I added an answer to this question; it became a bit bigger than I thought, but that’s a <i>really interesting</i> topic…"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1485982164,"post_id":41396051,"comment_id":71156221,"body_markdown":"@Holger I will see all answers tomorrow.","body":"@Holger I will see all answers tomorrow."}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1485975777,"creation_date":1485975777,"answer_id":41987600,"question_id":41396051,"body_markdown":"Well, as you noticed yourself, a `PhantomReference` is not automatically cleared. This implies that as long as you keep a strong reference to the `PhantomReference`, the referent will stay phantom reachable. As the [documentation](https://docs.oracle.com/javase/8/docs/api/?java/lang/ref/PhantomReference.html) says: “*An object that is reachable via phantom references will remain so until all such references are cleared or themselves become unreachable.*”\r\n\r\nHowever, considering when an object is unreachable (now I’m talking about the “phantom references themselves”) can lead to many surprises. Especially as it’s very likely that the reference object, not providing useful operations, will not be subsequently touched anymore.\r\n\r\nSince the `PhantomReference` without a queue will never be enqueued and its `get()` method will always return `null`, it is indeed not useful.\r\n\r\nSo why does the constructor allows to construct such a useless object? Well, [the documentation of the very first version (1.2)](https://web.archive.org/web/20010414031740/http://java.sun.com/products/jdk/1.2/docs/api/java/lang/ref/PhantomReference.html#PhantomReference(java.lang.Object,%20java.lang.ref.ReferenceQueue)) states that it will throw a `NullPointerException` if the queue is `null`. This statement persists until 1.4, then [Java&#160;5](https://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ref/PhantomReference.html#PhantomReference(T,%20java.lang.ref.ReferenceQueue)) is the first version containing the statement that you *can* construct a `PhantomReference` without a queue, despite being useless. My guess is, that it always inherited the super class’ behavior of allowing a `null` queue, contradicting the documentation, and it was noticed so late, that the decision was made to stay compatible and adapt the documentation rather than changing the behavior.\r\n\r\n---\r\n\r\nThe question, even harder to answer, is why a `PhantomReference` isn’t automatically cleared. The documentation only says that a phantom reachable object will remain so, which is the consequence of not being cleared, but doesn’t explain why this has any relevance.\r\n\r\nThis question has been [brought up on SO](https://stackoverflow.com/q/7048767/2711488), but the answer isn’t really satisfying. It says “to allow performing cleanup **before** an object is garbage collected”, which might even match the mindset of whoever made that design decision, but since the cleanup code can’t access the object, it has no relevance whether it is executed before or after the object is reclaimed. As said above, since this rule depends on the reachability of the `PhantomReference` object, which is subject to optimizing code transformations, it might be even the case that the object is reclaimed together with the `PhantomReference` instance before the cleanup code completes, without anyone noticing.\r\n\r\nI also found a similar [question on the HotSpot developer mailing list](http://mail.openjdk.java.net/pipermail/hotspot-gc-dev/2013-May/007384.html) back in 2013 which also lacks an answer.\r\n\r\nThere is the enhancement request [JDK-8071507](https://bugs.openjdk.java.net/browse/JDK-8071507) to change that behavior and clear `PhantomReference`s just like the others, which has the status “fixed” for Java&#160;9, and indeed, [its documentation](http://download.java.net/java/jdk9/docs/api/java/lang/ref/PhantomReference.html) now states that they are cleared like any other reference.\r\n\r\nThis, unfortunately implies that the answer at the beginning of my post will be wrong starting with Java&#160;9. Then, `new PhantomReference(new Object(), null)` will make the newly created `Object` instance immediately eligible for garbage collection, regardless of whether you keep a strong reference to the `PhantomReference` instance or not.\r\n","title":"PhantomReference with null queue","body":"<p>Well, as you noticed yourself, a <code>PhantomReference</code> is not automatically cleared. This implies that as long as you keep a strong reference to the <code>PhantomReference</code>, the referent will stay phantom reachable. As the <a href=\"https://docs.oracle.com/javase/8/docs/api/?java/lang/ref/PhantomReference.html\" rel=\"noreferrer\">documentation</a> says: “<em>An object that is reachable via phantom references will remain so until all such references are cleared or themselves become unreachable.</em>”</p>\n\n<p>However, considering when an object is unreachable (now I’m talking about the “phantom references themselves”) can lead to many surprises. Especially as it’s very likely that the reference object, not providing useful operations, will not be subsequently touched anymore.</p>\n\n<p>Since the <code>PhantomReference</code> without a queue will never be enqueued and its <code>get()</code> method will always return <code>null</code>, it is indeed not useful.</p>\n\n<p>So why does the constructor allows to construct such a useless object? Well, <a href=\"https://web.archive.org/web/20010414031740/http://java.sun.com/products/jdk/1.2/docs/api/java/lang/ref/PhantomReference.html#PhantomReference(java.lang.Object,%20java.lang.ref.ReferenceQueue)\" rel=\"noreferrer\">the documentation of the very first version (1.2)</a> states that it will throw a <code>NullPointerException</code> if the queue is <code>null</code>. This statement persists until 1.4, then <a href=\"https://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ref/PhantomReference.html#PhantomReference(T,%20java.lang.ref.ReferenceQueue)\" rel=\"noreferrer\">Java 5</a> is the first version containing the statement that you <em>can</em> construct a <code>PhantomReference</code> without a queue, despite being useless. My guess is, that it always inherited the super class’ behavior of allowing a <code>null</code> queue, contradicting the documentation, and it was noticed so late, that the decision was made to stay compatible and adapt the documentation rather than changing the behavior.</p>\n\n<hr>\n\n<p>The question, even harder to answer, is why a <code>PhantomReference</code> isn’t automatically cleared. The documentation only says that a phantom reachable object will remain so, which is the consequence of not being cleared, but doesn’t explain why this has any relevance.</p>\n\n<p>This question has been <a href=\"https://stackoverflow.com/q/7048767/2711488\">brought up on SO</a>, but the answer isn’t really satisfying. It says “to allow performing cleanup <strong>before</strong> an object is garbage collected”, which might even match the mindset of whoever made that design decision, but since the cleanup code can’t access the object, it has no relevance whether it is executed before or after the object is reclaimed. As said above, since this rule depends on the reachability of the <code>PhantomReference</code> object, which is subject to optimizing code transformations, it might be even the case that the object is reclaimed together with the <code>PhantomReference</code> instance before the cleanup code completes, without anyone noticing.</p>\n\n<p>I also found a similar <a href=\"http://mail.openjdk.java.net/pipermail/hotspot-gc-dev/2013-May/007384.html\" rel=\"noreferrer\">question on the HotSpot developer mailing list</a> back in 2013 which also lacks an answer.</p>\n\n<p>There is the enhancement request <a href=\"https://bugs.openjdk.java.net/browse/JDK-8071507\" rel=\"noreferrer\">JDK-8071507</a> to change that behavior and clear <code>PhantomReference</code>s just like the others, which has the status “fixed” for Java 9, and indeed, <a href=\"http://download.java.net/java/jdk9/docs/api/java/lang/ref/PhantomReference.html\" rel=\"noreferrer\">its documentation</a> now states that they are cleared like any other reference.</p>\n\n<p>This, unfortunately implies that the answer at the beginning of my post will be wrong starting with Java 9. Then, <code>new PhantomReference(new Object(), null)</code> will make the newly created <code>Object</code> instance immediately eligible for garbage collection, regardless of whether you keep a strong reference to the <code>PhantomReference</code> instance or not.</p>\n"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":18,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":549,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":41987600,"answer_count":1,"score":5,"last_activity_date":1635983872,"creation_date":1483099816,"question_id":41396051,"body_markdown":"Java allow to write:\r\n\r\n    new PhantomReference(new Object(), null)\r\n\r\nAt this case `new Object()` will be collected?\r\n\r\n\r\nAs I understand, phantom reference is alternative of `finalize()`  method usage.\r\n\r\nAnd after appearing reference in queue, I need to do some additional actions and then run `clear()`\r\n\r\njava doc stays:\r\n\r\n&gt; It is possible to create a phantom reference with a null queue, but\r\n&gt; such a reference is completely useless: Its get method will always\r\n&gt; return null and, since it does not have a queue, it will never be\r\n&gt; enqueued\r\n\r\n\r\nWhat does mean if it will never be enqueued? \r\n\r\nAs I understand it means that after finalize method invocation rerference will not be added to the referenceQueue. Thus it may lead to:  \r\n1. object memory will be cleared at once  \r\n2. Object memory will not be cleared  \r\n\r\n\r\nwhich case correct?","title":"PhantomReference with null queue","body":"<p>Java allow to write:</p>\n\n<pre><code>new PhantomReference(new Object(), null)\n</code></pre>\n\n<p>At this case <code>new Object()</code> will be collected?</p>\n\n<p>As I understand, phantom reference is alternative of <code>finalize()</code>  method usage.</p>\n\n<p>And after appearing reference in queue, I need to do some additional actions and then run <code>clear()</code></p>\n\n<p>java doc stays:</p>\n\n<blockquote>\n  <p>It is possible to create a phantom reference with a null queue, but\n  such a reference is completely useless: Its get method will always\n  return null and, since it does not have a queue, it will never be\n  enqueued</p>\n</blockquote>\n\n<p>What does mean if it will never be enqueued? </p>\n\n<p>As I understand it means that after finalize method invocation rerference will not be added to the referenceQueue. Thus it may lead to:<br>\n1. object memory will be cleared at once<br>\n2. Object memory will not be cleared  </p>\n\n<p>which case correct?</p>\n"},{"tags":["java","android","java-native-interface","finalize","finalization"],"comments":[{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":1,"creation_date":1495359081,"post_id":44095247,"comment_id":75211484,"body_markdown":"Generally, finalizers are considered a fallback option to invoke `dispose()` (or whatever) if the managing code fails to do so--and often printing log warnings.","body":"Generally, finalizers are considered a fallback option to invoke <code>dispose()</code> (or whatever) if the managing code fails to do so--and often printing log warnings."},{"owner":{"account_id":43022,"reputation":22842,"user_id":125562,"accept_rate":64,"display_name":"Basilevs"},"score":2,"creation_date":1495360908,"post_id":44095247,"comment_id":75211949,"body_markdown":"Please, read both questions before voting for duplicate.","body":"Please, read both questions before voting for duplicate."},{"owner":{"account_id":1183031,"reputation":1281,"user_id":1157531,"accept_rate":62,"display_name":"athos"},"score":7,"creation_date":1495385288,"post_id":44095247,"comment_id":75219205,"body_markdown":"I believe this should be not marked as duplicate. The original question asks &quot;how should I delete a native peer object automatically?&quot; and the answer is &quot;use a finalizer&quot;. My question is specifically about a talk that suggests **not** to use a finalizer ever (even contradicting the accepted answer in the original question!), and I am asking more insights and other informed opinions to understand the reasons of such suggestion.","body":"I believe this should be not marked as duplicate. The original question asks &quot;how should I delete a native peer object automatically?&quot; and the answer is &quot;use a finalizer&quot;. My question is specifically about a talk that suggests <b>not</b> to use a finalizer ever (even contradicting the accepted answer in the original question!), and I am asking more insights and other informed opinions to understand the reasons of such suggestion."},{"owner":{"account_id":65347,"reputation":56309,"user_id":192373,"accept_rate":74,"display_name":"Alex Cohn"},"score":1,"creation_date":1495425157,"post_id":44095247,"comment_id":75228688,"body_markdown":"Thank you for starting this discussion. Unfortunately, such open discussions do not fit the format of SO very well, but I think that this is the best place for this topic. To begin with, in my book, `private BinaryPoly(long nativeHandle)` should not exist, and this whole example is hugely artificial.","body":"Thank you for starting this discussion. Unfortunately, such open discussions do not fit the format of SO very well, but I think that this is the best place for this topic. To begin with, in my book, <code>private BinaryPoly(long nativeHandle)</code> should not exist, and this whole example is hugely artificial."},{"owner":{"account_id":1252022,"reputation":19996,"user_id":6730571,"display_name":"Hugues M."},"score":4,"creation_date":1496606742,"post_id":44095247,"comment_id":75718463,"body_markdown":"That might not concern Android in the foreseeable future (if ever), but please note [Object.finalize()](http://download.java.net/java/jdk9/docs/api/java/lang/Object.html#finalize--) is [deprecated](https://bugs.openjdk.java.net/browse/JDK-8165641) in Java 9, although there is no `forRemoval=true` attribute in the annotation, so at this stage there is no defined plan to actually remove it. It does not remove any merit to arguments in favor of using `finalize()`, but I think it deserves a mention (question does have `java` tag after all).","body":"That might not concern Android in the foreseeable future (if ever), but please note <a href=\"http://download.java.net/java/jdk9/docs/api/java/lang/Object.html#finalize--\" rel=\"nofollow noreferrer\">Object.finalize()</a> is <a href=\"https://bugs.openjdk.java.net/browse/JDK-8165641\" rel=\"nofollow noreferrer\">deprecated</a> in Java 9, although there is no <code>forRemoval=true</code> attribute in the annotation, so at this stage there is no defined plan to actually remove it. It does not remove any merit to arguments in favor of using <code>finalize()</code>, but I think it deserves a mention (question does have <code>java</code> tag after all)."}],"answers":[{"tags":[],"owner":{"account_id":952262,"reputation":403,"user_id":978156,"display_name":"cineam mispelt"},"down_vote_count":4,"up_vote_count":9,"is_accepted":false,"score":5,"last_activity_date":1496658923,"creation_date":1496658923,"answer_id":44367054,"question_id":44095247,"body_markdown":"My own take is that one should release native objects as soon as you are done with them, in a deterministic fashion. As such, using scope to manage them is preferable to relying on the finalizer.  You can use the finalizer to cleanup as a last resort, but, i would not use solely to manage the actual lifetime for the reasons you actually pointed out in your own question.\r\n\r\nAs such, let the finalizer be the final attempt, but not the first.","title":"Should Java finalizer really be avoided also for native peer objects lifecycle management?","body":"<p>My own take is that one should release native objects as soon as you are done with them, in a deterministic fashion. As such, using scope to manage them is preferable to relying on the finalizer.  You can use the finalizer to cleanup as a last resort, but, i would not use solely to manage the actual lifetime for the reasons you actually pointed out in your own question.</p>\n\n<p>As such, let the finalizer be the final attempt, but not the first.</p>\n"},{"tags":[],"owner":{"account_id":1062413,"reputation":406,"user_id":6507704,"display_name":"wanpen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1497075467,"creation_date":1497075467,"answer_id":44470234,"question_id":44095247,"body_markdown":"see https://github.com/android/platform_frameworks_base/blob/master/graphics/java/android/graphics/Bitmap.java#L135 \r\nuse phantomreference instead of finalizer","title":"Should Java finalizer really be avoided also for native peer objects lifecycle management?","body":"<p>see <a href=\"https://github.com/android/platform_frameworks_base/blob/master/graphics/java/android/graphics/Bitmap.java#L135\" rel=\"nofollow noreferrer\">https://github.com/android/platform_frameworks_base/blob/master/graphics/java/android/graphics/Bitmap.java#L135</a> \nuse phantomreference instead of finalizer</p>\n"},{"tags":[],"owner":{"account_id":10068428,"reputation":86,"user_id":7442837,"display_name":"Scott"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1497371997,"creation_date":1497122479,"answer_id":44477200,"question_id":44095247,"body_markdown":"I think most of this debate stems from the legacy status of finalize(). It was introduced in Java to address things that garbage collection didn&#39;t cover, but not necessarily things like system resources (files, network connections, etc.) so it always felt kind of half baked. I don&#39;t necessarily agree with using something like phantomreference, which professes to be a better finalizer than finalize() when the pattern itself is problematic.\r\n\r\n[Hugues Moreau](https://stackoverflow.com/users/6730571/hugues-moreau) pointed out that finalize() will be deprecated in Java 9. The preferred pattern of the Java team appears to be treating things like native peers as a system resource and cleaning them up via try-with-resources. Implementing [AutoCloseable](https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html) allows you to do this. Note that try-with-resources and AutoCloseable post-date both Josh Bloch&#39;s direct involvement with Java and Effective Java 2nd edition.","title":"Should Java finalizer really be avoided also for native peer objects lifecycle management?","body":"<p>I think most of this debate stems from the legacy status of finalize(). It was introduced in Java to address things that garbage collection didn't cover, but not necessarily things like system resources (files, network connections, etc.) so it always felt kind of half baked. I don't necessarily agree with using something like phantomreference, which professes to be a better finalizer than finalize() when the pattern itself is problematic.</p>\n\n<p><a href=\"https://stackoverflow.com/users/6730571/hugues-moreau\">Hugues Moreau</a> pointed out that finalize() will be deprecated in Java 9. The preferred pattern of the Java team appears to be treating things like native peers as a system resource and cleaning them up via try-with-resources. Implementing <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html\" rel=\"nofollow noreferrer\">AutoCloseable</a> allows you to do this. Note that try-with-resources and AutoCloseable post-date both Josh Bloch's direct involvement with Java and Effective Java 2nd edition.</p>\n"},{"tags":[],"owner":{"account_id":65347,"reputation":56309,"user_id":192373,"accept_rate":74,"display_name":"Alex Cohn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1497216323,"creation_date":1497216323,"answer_id":44488922,"question_id":44095247,"body_markdown":"Let me come up with a provocative proposal. If your C++ side of a managed Java object can be allocated in contiguous memory, then instead of the traditional **long** native pointer, you can use a **DirectByteBuffer**. This may really be a game changer: now GC can be smart enough about these small Java wrappers around huge native data structures (e.g. decide to collect it earlier).\r\n\r\nUnfortunately, most real life C++ objects don&#39;t fall into this category...","title":"Should Java finalizer really be avoided also for native peer objects lifecycle management?","body":"<p>Let me come up with a provocative proposal. If your C++ side of a managed Java object can be allocated in contiguous memory, then instead of the traditional <strong>long</strong> native pointer, you can use a <strong>DirectByteBuffer</strong>. This may really be a game changer: now GC can be smart enough about these small Java wrappers around huge native data structures (e.g. decide to collect it earlier).</p>\n\n<p>Unfortunately, most real life C++ objects don't fall into this category...</p>\n"},{"tags":[],"owner":{"account_id":2001172,"reputation":329,"user_id":1792188,"display_name":"Dmitry Timofeev"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1601919120,"creation_date":1498645649,"answer_id":44799935,"question_id":44095247,"body_markdown":"`finalize` and other approaches that use GC knowledge of objects lifetime have a couple of nuances:\r\n\r\n - **visibility**: do you guarantee that all the  writes methods of object _o_ made are visible to the finalizer (i.e., there is a _happens-before_ relationship between the last action on object _o_ and the code performing finalization)?\r\n - **reachability**: how do you guarantee, that an object _o_ isn&#39;t destroyed prematurely (e.g., whilst one of its methods is running), which is allowed by the JLS? It _does_ [happen](https://github.com/facebook/rocksdb/issues/2384#issuecomment-310514343) and cause crashes.\r\n - **ordering**: can you enforce a certain order in which objects are finalized?\r\n - **termination**: do you need to destroy all the objects when your app terminates?\r\n - **throughput**: GC-based approaches offer significantly smaller deallocation throughput than the deterministic approach.\r\n\r\n\r\nIt is possible to solve all of these issues with finalizers, but it requires a decent amount of code. Hans-J. Boehm has [a great presentation](http://www.hboehm.info/misc_slides/java_finalizers.pdf) which shows these issues and possible solutions.\r\n\r\nTo guarantee _visibility_, you have to synchronize your code, i.e., put operations with _Release_ semantics in your regular methods, and an operation with _Acquire_ semantics in your finalizer. For example:\r\n\r\n - A store in a `volatile` at the end of each method **+** read of the same `volatile` in  a finalizer.\r\n - Release lock on the object at the end of each method **+** acquire the lock at the beginning of a finalizer (see `keepAlive` implementation in Boehm&#39;s slides).\r\n\r\n\r\nTo guarantee _reachability_ (when it&#39;s not already guaranteed by the language specification), you may use:\r\n  \r\n - Synchronization approaches described above also ensure reachability.\r\n - Pass references to the objects that _must_ remain reachable (= [non-finalizable](https://docs.oracle.com/javase/specs/jls/se8/html/jls-12.html#jls-12.6.2)) as arguments to native methods. In [the talk you reference](https://www.youtube.com/watch?v=7_caITSjk1k), `nativeMultiply` is `static`, therefore `this` _may be_ garbage-collected.\r\n - [`Reference#reachabilityFence`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/ref/Reference.html#reachabilityFence(java.lang.Object)) from Java 9+.\r\n\r\n---\r\n\r\nThe difference between plain `finalize` and `PhantomReferences` is that the latter gives you way more control over the various aspects of finalization:\r\n\r\n  - Can have multiple queues receiving phantom refs **and** pick a thread performing finalization for each of them.\r\n  - Can finalize in the same thread that did allocation (e.g., thread local `ReferenceQueues`).\r\n  - Easier to enforce ordering: keep a strong reference to an object `B` that must remain alive when `A` is finalized as a field of `PhantomReference` to `A`;\r\n  - Easier to implement safe termination, as you _must_ keep `PhantomRefereces` strongly reachable until they are enqueued by GC.","title":"Should Java finalizer really be avoided also for native peer objects lifecycle management?","body":"<p><code>finalize</code> and other approaches that use GC knowledge of objects lifetime have a couple of nuances:</p>\n<ul>\n<li><strong>visibility</strong>: do you guarantee that all the  writes methods of object <em>o</em> made are visible to the finalizer (i.e., there is a <em>happens-before</em> relationship between the last action on object <em>o</em> and the code performing finalization)?</li>\n<li><strong>reachability</strong>: how do you guarantee, that an object <em>o</em> isn't destroyed prematurely (e.g., whilst one of its methods is running), which is allowed by the JLS? It <em>does</em> <a href=\"https://github.com/facebook/rocksdb/issues/2384#issuecomment-310514343\" rel=\"nofollow noreferrer\">happen</a> and cause crashes.</li>\n<li><strong>ordering</strong>: can you enforce a certain order in which objects are finalized?</li>\n<li><strong>termination</strong>: do you need to destroy all the objects when your app terminates?</li>\n<li><strong>throughput</strong>: GC-based approaches offer significantly smaller deallocation throughput than the deterministic approach.</li>\n</ul>\n<p>It is possible to solve all of these issues with finalizers, but it requires a decent amount of code. Hans-J. Boehm has <a href=\"http://www.hboehm.info/misc_slides/java_finalizers.pdf\" rel=\"nofollow noreferrer\">a great presentation</a> which shows these issues and possible solutions.</p>\n<p>To guarantee <em>visibility</em>, you have to synchronize your code, i.e., put operations with <em>Release</em> semantics in your regular methods, and an operation with <em>Acquire</em> semantics in your finalizer. For example:</p>\n<ul>\n<li>A store in a <code>volatile</code> at the end of each method <strong>+</strong> read of the same <code>volatile</code> in  a finalizer.</li>\n<li>Release lock on the object at the end of each method <strong>+</strong> acquire the lock at the beginning of a finalizer (see <code>keepAlive</code> implementation in Boehm's slides).</li>\n</ul>\n<p>To guarantee <em>reachability</em> (when it's not already guaranteed by the language specification), you may use:</p>\n<ul>\n<li>Synchronization approaches described above also ensure reachability.</li>\n<li>Pass references to the objects that <em>must</em> remain reachable (= <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-12.html#jls-12.6.2\" rel=\"nofollow noreferrer\">non-finalizable</a>) as arguments to native methods. In <a href=\"https://www.youtube.com/watch?v=7_caITSjk1k\" rel=\"nofollow noreferrer\">the talk you reference</a>, <code>nativeMultiply</code> is <code>static</code>, therefore <code>this</code> <em>may be</em> garbage-collected.</li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/ref/Reference.html#reachabilityFence(java.lang.Object)\" rel=\"nofollow noreferrer\"><code>Reference#reachabilityFence</code></a> from Java 9+.</li>\n</ul>\n<hr />\n<p>The difference between plain <code>finalize</code> and <code>PhantomReferences</code> is that the latter gives you way more control over the various aspects of finalization:</p>\n<ul>\n<li>Can have multiple queues receiving phantom refs <strong>and</strong> pick a thread performing finalization for each of them.</li>\n<li>Can finalize in the same thread that did allocation (e.g., thread local <code>ReferenceQueues</code>).</li>\n<li>Easier to enforce ordering: keep a strong reference to an object <code>B</code> that must remain alive when <code>A</code> is finalized as a field of <code>PhantomReference</code> to <code>A</code>;</li>\n<li>Easier to implement safe termination, as you <em>must</em> keep <code>PhantomRefereces</code> strongly reachable until they are enqueued by GC.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1807173,"reputation":1928,"user_id":1644053,"display_name":"ferini"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1515400913,"creation_date":1515400913,"answer_id":48146727,"question_id":44095247,"body_markdown":"&gt; How can this be possibly garbage collected?\r\n\r\nBecause function `nativeMultiply(long xCppPtr, long yCppPtr)` is static. If a native function is static, its second parameter is `jclass` pointing to its class instead of `jobject` pointing to `this`. So in this case `this` is not one of the arguments. \r\n\r\nIf it had not been static there would be only issue with the `other` object.\r\n\r\n","title":"Should Java finalizer really be avoided also for native peer objects lifecycle management?","body":"<blockquote>\n  <p>How can this be possibly garbage collected?</p>\n</blockquote>\n\n<p>Because function <code>nativeMultiply(long xCppPtr, long yCppPtr)</code> is static. If a native function is static, its second parameter is <code>jclass</code> pointing to its class instead of <code>jobject</code> pointing to <code>this</code>. So in this case <code>this</code> is not one of the arguments. </p>\n\n<p>If it had not been static there would be only issue with the <code>other</code> object.</p>\n"}],"owner":{"account_id":1183031,"reputation":1281,"user_id":1157531,"accept_rate":62,"display_name":"athos"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2768,"favorite_count":0,"down_vote_count":0,"up_vote_count":41,"answer_count":6,"score":41,"last_activity_date":1635983858,"creation_date":1495358981,"question_id":44095247,"body_markdown":"In my experience as a C++/Java/Android developer, I have come to learn that finalizers are almost always a bad idea, the only exception being the management of a &quot;native peer&quot; object needed by the java one to call C/C++ code through JNI. \r\n\r\nI am aware of the [JNI: Properly manage the lifetime of a java object question][1], but this question addresses the reasons **not to use a finalizer anyway, neither for native peers**. So it&#39;s a question/discussion on a confutation of the answers in the aforementioned question.\r\n\r\nJoshua Bloch in his [Effective Java][2] explicitly lists this case as an exception to his famous advice on not using finalizers:\r\n\r\n&gt; A second legitimate use of finalizers concerns objects with native peers. A native peer is a native object to which a normal object delegates via native methods. Because a native peer is not a normal object, the garbage collector doesn&#39;t know about it and can’t reclaim it when its Java peer is reclaimed. A finalizer is an appropriate vehicle for performing this task, assuming the native peer holds no critical resources. If the native peer holds resources that must be terminated promptly, the class should have an explicit termination method, as described above. The termination method should do whatever is required to free the critical resource. The termination method can be a native method, or it can invoke one. \r\n\r\n(Also see [&quot;Why is the finalized method included in Java?&quot;][3] question on stackexchange)\r\n\r\nThen I watched the really interesting [How to manage native memory in Android][4] talk at the Google I/O &#39;17, where Hans Boehm actually advocates **against using finalizers to manage native peers of a java object**, also citing Effective Java as a reference. After quickly mentioning why explicit delete of the native peer or automatic closing based on scope might not be a viable alternative, he advises using `java.lang.ref.PhantomReference` instead.\r\n\r\nHe makes some interesting points, but I am not completely convinced. I will try to run through some of them and state my doubts, hoping someone can shed further light on them.\r\n\r\nStarting from this example:\r\n&lt;!-- language: java --&gt;\r\n\r\n    class BinaryPoly {\r\n    \r\n    \tlong mNativeHandle; // holds a c++ raw pointer\r\n    \r\n    \tprivate BinaryPoly(long nativeHandle) {\r\n    \t\tmNativeHandle = nativeHandle;\r\n    \t}\r\n    \r\n    \tprivate static native long nativeMultiply(long xCppPtr, long yCppPtr);\r\n    \r\n    \tBinaryPoly multiply(BinaryPoly other) {\r\n    \t\treturn new BinaryPoly ( nativeMultiply(mNativeHandle, other.mNativeHandler) );\r\n    \t}\r\n    \t\r\n    \t// …\r\n    \r\n    \tstatic native void nativeDelete (long cppPtr);\r\n    \r\n    \tprotected void finalize() {\r\n    \t\tnativeDelete(mNativeHandle);\r\n    \t}\r\n    }\r\n\r\nWhere a java class holds a reference to a native peer that gets deleted in the finalizer method, Bloch lists the shortcomings of such an approach.\r\n\r\n**Finalizers can run in arbitrary order**\r\n\r\n&gt; If two objects become unreachable, the finalizers actually run in arbitrary order, that includes the case when two objects who point to each others become unreachable at the same time they can be finalized in the wrong order, meaning that the second one to be finalized actually tries to access an object that’s already been finalized. [...] As a result of that you can get dangling pointers and see deallocated c++ objects [...]\r\n\r\nAnd as an example:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    class SomeClass {\r\n    \tBinaryPoly mMyBinaryPoly:\r\n    \t…\r\n    \t// DEFINITELY DON’T DO THIS WITH CURRENT BinaryPoly!\r\n    \tprotected void finalize() {\r\n    \t\tLog.v(“BPC”, “Dropped + … + myBinaryPoly.toString());\t\r\n    \t}\r\n    }\r\n\r\nOk, but isn&#39;t this true also if myBinaryPoly is a pure Java object? As I understand it , the problem comes from operating on a possibly finalized object  inside its owner&#39;s finalizer. In case we are only using the finalizer of an object to delete its own private native peer and not doing anything else, we should be fine, right?\r\n\r\n**Finalizer may be invoked while the native method is till running**\r\n\r\n&gt; By Java rules, but not currently on Android:  \r\n&gt; Object x’s finalizer may be invoked while one of x’s methods is still running, and accessing the native object.\r\n\r\nPseudo-code of what `multiply()` gets compiled to is shown to explain this:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    BinaryPoly multiply(BinaryPoly other) {\r\n    \tlong tmpx = this.mNativeHandle; // last use of “this”\r\n    \tlong tmpy = other.mNativeHandle; // last use of other\r\n    \tBinaryPoly result = new BinaryPoly();\r\n    \t// GC happens here. “this” and “other” can be reclaimed and finalized.\r\n    \t// tmpx and tmpy are still needed. But finalizer can delete tmpx and tmpy here!\r\n    \tresult.mNativeHandle = nativeMultiply(tmpx, tmpy)\r\n    \treturn result;\r\n    }\r\n\r\nThis is scary, and I am actually relieved this doesn&#39;t happen on android, because what I understand is that `this` and `other` get garbage collected before they go out of scope! This is even weirder considering that `this` is the object the method is called on, and that `other` is the argument of the method, so they both should already &quot;be alive&quot; in the scope where the method is being called.\r\n\r\nA quick workaround to this would be to call some dummy methods on both `this` and `other` (ugly!), or passing them to the native method (where we can then retrieve the `mNativeHandle` and operate on it). And wait... `this` is already by default one of the arguments of the native method!\r\n\r\n    JNIEXPORT void JNICALL Java_package_BinaryPoly_multiply\r\n    (JNIEnv* env, jobject thiz, jlong xPtr, jlong yPtr) {}\r\n\r\nHow can `this` be possibly garbage collected?\r\n\r\n**Finalizers can be deferred for too long**\r\n\r\n&gt; “For this to work correctly, if you run an application that allocates lots of native memory and relatively little java memory it may actually not be the case that the garbage collector runs promptly enough to actually invoke finalizers [...] so you actually may have to invoke System.gc() and System.runFinalization() occasionally, which is tricky to do [...]”\r\n\r\nIf the native peer is only seen by a single java object which it is tied to, isn’t this fact transparent to the rest of the system, and thus the GC should just have to manage the lifecycle of the Java object as it was a pure java one? There&#39;s clearly something I fail to see here.\r\n\r\n**Finalizers can actually extend the lifetime of the java object**\r\n\r\n&gt; [...] Sometimes finalizers actually extend the lifetime of the java object for another garbage collection cycle, which means for generational garbage collectors they may actually cause it to survive into the old generation and the lifetime may be greatly extended as a result of just having a finalizer.\r\n\r\nI admit I don&#39;t really get what&#39;s the issue here and how it relates to having a native peer, I will make some research and possibly update the question :)\r\n\r\n**In conclusion**\r\n\r\nFor now, I still believe that using a sort of RAII approach were the native peer is created in the java object&#39;s constructor and deleted in the finalize method is not actually dangerous, provided that:\r\n\r\n - the native peer doesn&#39;t hold any critical resource (in that case there should be a separate method to release the resource, the native peer must only act as the the java object &quot;counterpart&quot; in the native realm)\r\n - the native peer doesn&#39;t span threads or do weird concurrent stuff in its destructor (who would want to do that?!?)\r\n - the native peer pointer is never shared outside the java object, only belongs to a single instance, and only accessed inside the java object&#39;s methods. On Android, a java object may access the native peer of another instance of the same class, right before calling a jni method accepting different native peers or, better, just passing the java objects to the native method itself\r\n - the java object&#39;s finalizer only deletes its own native peer, and does nothing else\r\n\r\nIs there any other restriction that should be added, or there&#39;s really no way to ensure that a finalizer is safe even with all restrictions being respected?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/13041158/jni-properly-manage-lifetime-of-a-java-object\r\n  [2]: http://www.informit.com/articles/article.aspx?p=1216151&amp;seqNum=7\r\n  [3]: https://softwareengineering.stackexchange.com/questions/246070/why-is-the-finalize-method-included-in-java\r\n  [4]: https://www.youtube.com/watch?v=7_caITSjk1k","title":"Should Java finalizer really be avoided also for native peer objects lifecycle management?","body":"<p>In my experience as a C++/Java/Android developer, I have come to learn that finalizers are almost always a bad idea, the only exception being the management of a &quot;native peer&quot; object needed by the java one to call C/C++ code through JNI.</p>\n<p>I am aware of the <a href=\"https://stackoverflow.com/questions/13041158/jni-properly-manage-lifetime-of-a-java-object\">JNI: Properly manage the lifetime of a java object question</a>, but this question addresses the reasons <strong>not to use a finalizer anyway, neither for native peers</strong>. So it's a question/discussion on a confutation of the answers in the aforementioned question.</p>\n<p>Joshua Bloch in his <a href=\"http://www.informit.com/articles/article.aspx?p=1216151&amp;seqNum=7\" rel=\"nofollow noreferrer\">Effective Java</a> explicitly lists this case as an exception to his famous advice on not using finalizers:</p>\n<blockquote>\n<p>A second legitimate use of finalizers concerns objects with native peers. A native peer is a native object to which a normal object delegates via native methods. Because a native peer is not a normal object, the garbage collector doesn't know about it and can’t reclaim it when its Java peer is reclaimed. A finalizer is an appropriate vehicle for performing this task, assuming the native peer holds no critical resources. If the native peer holds resources that must be terminated promptly, the class should have an explicit termination method, as described above. The termination method should do whatever is required to free the critical resource. The termination method can be a native method, or it can invoke one.</p>\n</blockquote>\n<p>(Also see <a href=\"https://softwareengineering.stackexchange.com/questions/246070/why-is-the-finalize-method-included-in-java\">&quot;Why is the finalized method included in Java?&quot;</a> question on stackexchange)</p>\n<p>Then I watched the really interesting <a href=\"https://www.youtube.com/watch?v=7_caITSjk1k\" rel=\"nofollow noreferrer\">How to manage native memory in Android</a> talk at the Google I/O '17, where Hans Boehm actually advocates <strong>against using finalizers to manage native peers of a java object</strong>, also citing Effective Java as a reference. After quickly mentioning why explicit delete of the native peer or automatic closing based on scope might not be a viable alternative, he advises using <code>java.lang.ref.PhantomReference</code> instead.</p>\n<p>He makes some interesting points, but I am not completely convinced. I will try to run through some of them and state my doubts, hoping someone can shed further light on them.</p>\n<p>Starting from this example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class BinaryPoly {\n\n    long mNativeHandle; // holds a c++ raw pointer\n\n    private BinaryPoly(long nativeHandle) {\n        mNativeHandle = nativeHandle;\n    }\n\n    private static native long nativeMultiply(long xCppPtr, long yCppPtr);\n\n    BinaryPoly multiply(BinaryPoly other) {\n        return new BinaryPoly ( nativeMultiply(mNativeHandle, other.mNativeHandler) );\n    }\n    \n    // …\n\n    static native void nativeDelete (long cppPtr);\n\n    protected void finalize() {\n        nativeDelete(mNativeHandle);\n    }\n}\n</code></pre>\n<p>Where a java class holds a reference to a native peer that gets deleted in the finalizer method, Bloch lists the shortcomings of such an approach.</p>\n<p><strong>Finalizers can run in arbitrary order</strong></p>\n<blockquote>\n<p>If two objects become unreachable, the finalizers actually run in arbitrary order, that includes the case when two objects who point to each others become unreachable at the same time they can be finalized in the wrong order, meaning that the second one to be finalized actually tries to access an object that’s already been finalized. [...] As a result of that you can get dangling pointers and see deallocated c++ objects [...]</p>\n</blockquote>\n<p>And as an example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class SomeClass {\n    BinaryPoly mMyBinaryPoly:\n    …\n    // DEFINITELY DON’T DO THIS WITH CURRENT BinaryPoly!\n    protected void finalize() {\n        Log.v(“BPC”, “Dropped + … + myBinaryPoly.toString());   \n    }\n}\n</code></pre>\n<p>Ok, but isn't this true also if myBinaryPoly is a pure Java object? As I understand it , the problem comes from operating on a possibly finalized object  inside its owner's finalizer. In case we are only using the finalizer of an object to delete its own private native peer and not doing anything else, we should be fine, right?</p>\n<p><strong>Finalizer may be invoked while the native method is till running</strong></p>\n<blockquote>\n<p>By Java rules, but not currently on Android:<br />\nObject x’s finalizer may be invoked while one of x’s methods is still running, and accessing the native object.</p>\n</blockquote>\n<p>Pseudo-code of what <code>multiply()</code> gets compiled to is shown to explain this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>BinaryPoly multiply(BinaryPoly other) {\n    long tmpx = this.mNativeHandle; // last use of “this”\n    long tmpy = other.mNativeHandle; // last use of other\n    BinaryPoly result = new BinaryPoly();\n    // GC happens here. “this” and “other” can be reclaimed and finalized.\n    // tmpx and tmpy are still needed. But finalizer can delete tmpx and tmpy here!\n    result.mNativeHandle = nativeMultiply(tmpx, tmpy)\n    return result;\n}\n</code></pre>\n<p>This is scary, and I am actually relieved this doesn't happen on android, because what I understand is that <code>this</code> and <code>other</code> get garbage collected before they go out of scope! This is even weirder considering that <code>this</code> is the object the method is called on, and that <code>other</code> is the argument of the method, so they both should already &quot;be alive&quot; in the scope where the method is being called.</p>\n<p>A quick workaround to this would be to call some dummy methods on both <code>this</code> and <code>other</code> (ugly!), or passing them to the native method (where we can then retrieve the <code>mNativeHandle</code> and operate on it). And wait... <code>this</code> is already by default one of the arguments of the native method!</p>\n<pre><code>JNIEXPORT void JNICALL Java_package_BinaryPoly_multiply\n(JNIEnv* env, jobject thiz, jlong xPtr, jlong yPtr) {}\n</code></pre>\n<p>How can <code>this</code> be possibly garbage collected?</p>\n<p><strong>Finalizers can be deferred for too long</strong></p>\n<blockquote>\n<p>“For this to work correctly, if you run an application that allocates lots of native memory and relatively little java memory it may actually not be the case that the garbage collector runs promptly enough to actually invoke finalizers [...] so you actually may have to invoke System.gc() and System.runFinalization() occasionally, which is tricky to do [...]”</p>\n</blockquote>\n<p>If the native peer is only seen by a single java object which it is tied to, isn’t this fact transparent to the rest of the system, and thus the GC should just have to manage the lifecycle of the Java object as it was a pure java one? There's clearly something I fail to see here.</p>\n<p><strong>Finalizers can actually extend the lifetime of the java object</strong></p>\n<blockquote>\n<p>[...] Sometimes finalizers actually extend the lifetime of the java object for another garbage collection cycle, which means for generational garbage collectors they may actually cause it to survive into the old generation and the lifetime may be greatly extended as a result of just having a finalizer.</p>\n</blockquote>\n<p>I admit I don't really get what's the issue here and how it relates to having a native peer, I will make some research and possibly update the question :)</p>\n<p><strong>In conclusion</strong></p>\n<p>For now, I still believe that using a sort of RAII approach were the native peer is created in the java object's constructor and deleted in the finalize method is not actually dangerous, provided that:</p>\n<ul>\n<li>the native peer doesn't hold any critical resource (in that case there should be a separate method to release the resource, the native peer must only act as the the java object &quot;counterpart&quot; in the native realm)</li>\n<li>the native peer doesn't span threads or do weird concurrent stuff in its destructor (who would want to do that?!?)</li>\n<li>the native peer pointer is never shared outside the java object, only belongs to a single instance, and only accessed inside the java object's methods. On Android, a java object may access the native peer of another instance of the same class, right before calling a jni method accepting different native peers or, better, just passing the java objects to the native method itself</li>\n<li>the java object's finalizer only deletes its own native peer, and does nothing else</li>\n</ul>\n<p>Is there any other restriction that should be added, or there's really no way to ensure that a finalizer is safe even with all restrictions being respected?</p>\n"},{"tags":["java","shortcut","finalize","finalization","java-console"],"comments":[{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1507924167,"post_id":46737028,"comment_id":80420941,"body_markdown":"Do you know what finalization is?","body":"Do you know what finalization is?"},{"owner":{"account_id":4030991,"reputation":24462,"user_id":3357935,"accept_rate":82,"display_name":"Stevoisiak"},"score":0,"creation_date":1507924350,"post_id":46737028,"comment_id":80421041,"body_markdown":"@chrylis I do not, no","body":"@chrylis I do not, no"},{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1507924510,"post_id":46737028,"comment_id":80421121,"body_markdown":"It&#39;s discouraged and rarely used, which is why it doesn&#39;t seem to affect your application, but read up on it, and the command should be self-explanatory once you have the concept.","body":"It&#39;s discouraged and rarely used, which is why it doesn&#39;t seem to affect your application, but read up on it, and the command should be self-explanatory once you have the concept."}],"owner":{"account_id":4030991,"reputation":24462,"user_id":3357935,"accept_rate":82,"display_name":"Stevoisiak"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1508084955,"answer_count":0,"score":0,"last_activity_date":1635983798,"creation_date":1507923890,"question_id":46737028,"body_markdown":"When I open the Java Console in Java SE 7 Update 76, I&#39;m shown a list of keyboard shortcuts I can use for debugging. The shortcut for F is labeled `finalize objects on finalization queue`.\r\n\r\n[![Java Console Help Window][1]][1]\r\n\r\nWhen I run this shortcut, it prints the following information in the console:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    Finalize objects on finalization queue ... completed.\r\n    Memory: 63,328K  Free: 20,627K  (32%) ... completed.\r\n\r\nI&#39;m not entirely sure what this command does, or what the information it gives means. The command doesn&#39;t seem to have had any noticeable impact on my active Java applications.\r\n\r\n**What does the &quot;finalize objects on finalization queue&quot; shortcut do in the Java Console?**\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7DZvJ.png","title":"What does &quot;finalize objects on finalization queue&quot; do?","body":"<p>When I open the Java Console in Java SE 7 Update 76, I'm shown a list of keyboard shortcuts I can use for debugging. The shortcut for F is labeled <code>finalize objects on finalization queue</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/7DZvJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7DZvJ.png\" alt=\"Java Console Help Window\"></a></p>\n\n<p>When I run this shortcut, it prints the following information in the console:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Finalize objects on finalization queue ... completed.\nMemory: 63,328K  Free: 20,627K  (32%) ... completed.\n</code></pre>\n\n<p>I'm not entirely sure what this command does, or what the information it gives means. The command doesn't seem to have had any noticeable impact on my active Java applications.</p>\n\n<p><strong>What does the \"finalize objects on finalization queue\" shortcut do in the Java Console?</strong></p>\n"},{"tags":["java","finalize","finalization"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1560995562,"post_id":56677976,"comment_id":99922583,"body_markdown":"maybe `super.close` is closing stdout ?","body":"maybe <code>super.close</code> is closing stdout ?"},{"owner":{"account_id":7831234,"reputation":497,"user_id":5921170,"accept_rate":100,"display_name":"Kr&#246;w"},"score":0,"creation_date":1560995799,"post_id":56677976,"comment_id":99922624,"body_markdown":"Hmm, I tried printing `&quot;Test&quot;` *after* calling `System.gc()`, and the output was `Test`, and then `Closing...`. All of the code I tested in my question was in a `main` method. Maybe the `stdout` is just closing before the finalization method finishes? Garbage collection does run on a separate thread, right?","body":"Hmm, I tried printing <code>&quot;Test&quot;</code> <i>after</i> calling <code>System.gc()</code>, and the output was <code>Test</code>, and then <code>Closing...</code>. All of the code I tested in my question was in a <code>main</code> method. Maybe the <code>stdout</code> is just closing before the finalization method finishes? Garbage collection does run on a separate thread, right?"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1560995916,"post_id":56677976,"comment_id":99922647,"body_markdown":"try writing to a file rather than stdout?","body":"try writing to a file rather than stdout?"},{"owner":{"account_id":255665,"reputation":232816,"user_id":535871,"accept_rate":84,"display_name":"Ted Hopp"},"score":2,"creation_date":1561007687,"post_id":56677976,"comment_id":99924853,"body_markdown":"It definitely could be a timing issue. The garbage collector does run asynchronously, so if `main` exits too soon, you may not see all the output. Try sleeping on the main thread for a bit before exiting `main` to test this theory. It probably wouldn&#39;t hurt to call `flush()` on `System.out` as well after sleeping is over.","body":"It definitely could be a timing issue. The garbage collector does run asynchronously, so if <code>main</code> exits too soon, you may not see all the output. Try sleeping on the main thread for a bit before exiting <code>main</code> to test this theory. It probably wouldn&#39;t hurt to call <code>flush()</code> on <code>System.out</code> as well after sleeping is over."},{"owner":{"account_id":87845,"reputation":15821,"user_id":243373,"accept_rate":100,"display_name":"TT."},"score":3,"creation_date":1561015306,"post_id":56677976,"comment_id":99927742,"body_markdown":"Don&#39;t use finalize, it is a failure of the way the Java language was designed. It has been [deprecated in OpenJDK 11](https://cr.openjdk.java.net/~iris/se/11/latestSpec/api/java.base/java/io/FileInputStream.html#finalize()) (see the note) and for good reason.","body":"Don&#39;t use finalize, it is a failure of the way the Java language was designed. It has been <a href=\"https://cr.openjdk.java.net/~iris/se/11/latestSpec/api/java.base/java/io/FileInputStream.html#finalize()\" rel=\"nofollow noreferrer\">deprecated in OpenJDK 11</a> (see the note) and for good reason."},{"owner":{"account_id":7831234,"reputation":497,"user_id":5921170,"accept_rate":100,"display_name":"Kr&#246;w"},"score":0,"creation_date":1561029519,"post_id":56677976,"comment_id":99935184,"body_markdown":"@TT. Even if I was using Java 9+, what would you expect me to do instead? Neither cleanup using `PhantomReference`s nor using `Cleaner`s will allow me to directly refer to my `URLClassLoader` object. `finalize()` seems perfect for this scenario. Could you elaborate on &quot;`it is a failure of the way the Java language was designed`&quot;? I don&#39;t really see how that is.","body":"@TT. Even if I was using Java 9+, what would you expect me to do instead? Neither cleanup using <code>PhantomReference</code>s nor using <code>Cleaner</code>s will allow me to directly refer to my <code>URLClassLoader</code> object. <code>finalize()</code> seems perfect for this scenario. Could you elaborate on &quot;<code>it is a failure of the way the Java language was designed</code>&quot;? I don&#39;t really see how that is."},{"owner":{"account_id":7831234,"reputation":497,"user_id":5921170,"accept_rate":100,"display_name":"Kr&#246;w"},"score":0,"creation_date":1561029642,"post_id":56677976,"comment_id":99935244,"body_markdown":"@TedHopp I tried using a 200 millisecond delay after my `gc()` call but before printing `&quot;Test&quot;` and everything got printed in order.","body":"@TedHopp I tried using a 200 millisecond delay after my <code>gc()</code> call but before printing <code>&quot;Test&quot;</code> and everything got printed in order."},{"owner":{"account_id":87845,"reputation":15821,"user_id":243373,"accept_rate":100,"display_name":"TT."},"score":0,"creation_date":1561037742,"post_id":56677976,"comment_id":99939863,"body_markdown":"The people that drew up the language made a mistake in thinking that finalize would ever be a good idea to clean up resources. It isn&#39;t. The deprecation is an acknowledgement of that. Some research into why should reveal some background on that. Next, consider what you should be doing once finalize is removed (it probably won&#39;t real soon, but that&#39;s besides the point). That is the way you should be cleaning it up. Hint: URLClassLoader implements AutoCloseable (If you&#39;re in Java 7+).","body":"The people that drew up the language made a mistake in thinking that finalize would ever be a good idea to clean up resources. It isn&#39;t. The deprecation is an acknowledgement of that. Some research into why should reveal some background on that. Next, consider what you should be doing once finalize is removed (it probably won&#39;t real soon, but that&#39;s besides the point). That is the way you should be cleaning it up. Hint: URLClassLoader implements AutoCloseable (If you&#39;re in Java 7+)."},{"owner":{"account_id":7831234,"reputation":497,"user_id":5921170,"accept_rate":100,"display_name":"Kr&#246;w"},"score":0,"creation_date":1561043509,"post_id":56677976,"comment_id":99943441,"body_markdown":"@TT. Well, finalization likely won’t ever be removed; that would be a massive backwards compatibility issue. (It’s `Deprecated` annotation declares that there aren’t plans to remove it, I believe). Could you tell me where you were told that it was a “mistake in the language”? I’d looked in to why finalization is “inherently bad” (i.e. in the docs for Java 11) and the only reason relevant to me that I found was that once you give an object a finalizer, you can’t revoke it. Regardless, if `finalize()` were to be removed then I wouldn’t be able to close the loader how I need to.","body":"@TT. Well, finalization likely won’t ever be removed; that would be a massive backwards compatibility issue. (It’s <code>Deprecated</code> annotation declares that there aren’t plans to remove it, I believe). Could you tell me where you were told that it was a “mistake in the language”? I’d looked in to why finalization is “inherently bad” (i.e. in the docs for Java 11) and the only reason relevant to me that I found was that once you give an object a finalizer, you can’t revoke it. Regardless, if <code>finalize()</code> were to be removed then I wouldn’t be able to close the loader how I need to."},{"owner":{"account_id":7831234,"reputation":497,"user_id":5921170,"accept_rate":100,"display_name":"Kr&#246;w"},"score":0,"creation_date":1561043946,"post_id":56677976,"comment_id":99943711,"body_markdown":"@TT. `finalize()` is necessary in my case, because I need to close my object exactly when it happens to need to be garbage collected, if ever. I just don’t get how it would be possible for me at all (much less beneficial for me) to switch to any other form of cleanup in this case. (I forgot to mention that I’m in Java 8.)","body":"@TT. <code>finalize()</code> is necessary in my case, because I need to close my object exactly when it happens to need to be garbage collected, if ever. I just don’t get how it would be possible for me at all (much less beneficial for me) to switch to any other form of cleanup in this case. (I forgot to mention that I’m in Java 8.)"},{"owner":{"account_id":87845,"reputation":15821,"user_id":243373,"accept_rate":100,"display_name":"TT."},"score":0,"creation_date":1561043998,"post_id":56677976,"comment_id":99943744,"body_markdown":"I don&#39;t really need to be told to know something Kr&#246;w :-). In any case, the space of a comment section is too small to go in a discussion that is really irrelevant. Notice that the deprecation has `forRemoval=true` in the annotation. As I said before, I don&#39;t suspect it will be removed any time soon. To your problem, I do not know how you use URLClassLoader in your code, but for an AutoCloseable you can use try-with-resources to guarantee closing. Also: [Is overriding Object.finalize() bad](https://softwareengineering.stackexchange.com/questions/288715/is-overriding-object-finalize-really-bad)","body":"I don&#39;t really need to be told to know something Kr&#246;w :-). In any case, the space of a comment section is too small to go in a discussion that is really irrelevant. Notice that the deprecation has <code>forRemoval=true</code> in the annotation. As I said before, I don&#39;t suspect it will be removed any time soon. To your problem, I do not know how you use URLClassLoader in your code, but for an AutoCloseable you can use try-with-resources to guarantee closing. Also: <a href=\"https://softwareengineering.stackexchange.com/questions/288715/is-overriding-object-finalize-really-bad\">Is overriding Object.finalize() bad</a>"},{"owner":{"account_id":7831234,"reputation":497,"user_id":5921170,"accept_rate":100,"display_name":"Kr&#246;w"},"score":0,"creation_date":1561044827,"post_id":56677976,"comment_id":99944257,"body_markdown":"@TT. Thanks for the link to that question. The deprecation annotation on the docs page that you&#39;d referred to earlier doesn&#39;t specify a `forRemoval` value, which defaults to `false` for the `Deprecated` annotation. As for my use case, I&#39;m keeping a `WeakReference` to my class loader and regenerating it whenever I need to use it, if it has been garbage collected. Because of this, I&#39;ve been having to use `finalize()` to perform `close()` so that if my loader has been GCed, the resources it opened will close until the class loader is re-created.","body":"@TT. Thanks for the link to that question. The deprecation annotation on the docs page that you&#39;d referred to earlier doesn&#39;t specify a <code>forRemoval</code> value, which defaults to <code>false</code> for the <code>Deprecated</code> annotation. As for my use case, I&#39;m keeping a <code>WeakReference</code> to my class loader and regenerating it whenever I need to use it, if it has been garbage collected. Because of this, I&#39;ve been having to use <code>finalize()</code> to perform <code>close()</code> so that if my loader has been GCed, the resources it opened will close until the class loader is re-created."},{"owner":{"account_id":87845,"reputation":15821,"user_id":243373,"accept_rate":100,"display_name":"TT."},"score":0,"creation_date":1561045159,"post_id":56677976,"comment_id":99944442,"body_markdown":"Ah yes, `Object.finalize` doesn&#39;t specify for removal, it&#39;s in all the classes that ever overrode that method (which is also a hint). In any case, don&#39;t count on finalize ever doing what it is supposed to do. There are no guarantees on finalize, and the deprecation note tells you that you should be steering away from using it. Use at your own risk I&#39;d say :-).","body":"Ah yes, <code>Object.finalize</code> doesn&#39;t specify for removal, it&#39;s in all the classes that ever overrode that method (which is also a hint). In any case, don&#39;t count on finalize ever doing what it is supposed to do. There are no guarantees on finalize, and the deprecation note tells you that you should be steering away from using it. Use at your own risk I&#39;d say :-)."},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":1,"creation_date":1561187349,"post_id":56677976,"comment_id":99989217,"body_markdown":"@TT., Kr&#246;w: See also [this answer](https://stackoverflow.com/a/56454348/1441122).","body":"@TT., Kr&#246;w: See also <a href=\"https://stackoverflow.com/a/56454348/1441122\">this answer</a>."},{"owner":{"account_id":87845,"reputation":15821,"user_id":243373,"accept_rate":100,"display_name":"TT."},"score":0,"creation_date":1561200133,"post_id":56677976,"comment_id":99991723,"body_markdown":"@StuartMarks Hi Stuart, I had already read (and +&#39;d) your answer and it confirmed my experience with finalizers (in the sense, that they just don&#39;t work to clean stuff up). Good read!","body":"@StuartMarks Hi Stuart, I had already read (and +&#39;d) your answer and it confirmed my experience with finalizers (in the sense, that they just don&#39;t work to clean stuff up). Good read!"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1574179629,"post_id":56677976,"comment_id":104135057,"body_markdown":"What does &quot;a `URLClassLoader` anonymous class&quot; mean? Do you mean a subclass of `URLClassLoader` or a class loaded via a `URLClassLoader`? And in what regard is the anonymous nature of the class relevant?","body":"What does &quot;a <code>URLClassLoader</code> anonymous class&quot; mean? Do you mean a subclass of <code>URLClassLoader</code> or a class loaded via a <code>URLClassLoader</code>? And in what regard is the anonymous nature of the class relevant?"},{"owner":{"account_id":7831234,"reputation":497,"user_id":5921170,"accept_rate":100,"display_name":"Kr&#246;w"},"score":0,"creation_date":1574278570,"post_id":56677976,"comment_id":104179308,"body_markdown":"@Holger I just meant an anonymous class directly extending `URLClassLoader`. It would be a subclass of `URLClassLoader`.","body":"@Holger I just meant an anonymous class directly extending <code>URLClassLoader</code>. It would be a subclass of <code>URLClassLoader</code>."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1574343696,"post_id":56677976,"comment_id":104205735,"body_markdown":"Is this reliably reproducible? I see a lot of potential for problems here, I could even contrive scenarios with similar behavior, but I’m quiet sure that those do not match your scenario. Besides a standalone program capable of reproducing the issue, some information would help, Java version, number of CPU cores, number and type (jar:, file:, etc) of the URLs added to this class loader…","body":"Is this reliably reproducible? I see a lot of potential for problems here, I could even contrive scenarios with similar behavior, but I’m quiet sure that those do not match your scenario. Besides a standalone program capable of reproducing the issue, some information would help, Java version, number of CPU cores, number and type (jar:, file:, etc) of the URLs added to this class loader…"}],"owner":{"account_id":7831234,"reputation":497,"user_id":5921170,"accept_rate":100,"display_name":"Kr&#246;w"},"comment_count":18,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1635983788,"creation_date":1560995439,"question_id":56677976,"body_markdown":"# Question\r\nI have a `URLClassLoader` anonymous class. In it, I&#39;ve overridden the `finalize()` method so that the object will automatically close itself when garbage collected:\r\n\r\n\tprotected void finalize() throws Throwable {\r\n\t\tclose();\r\n\t}\r\n\r\nand I&#39;ve overridden the `close()` method to print some information:\r\n\r\n\tpublic void close() throws IOException {\r\n\t\tSystem.out.println(&quot;Closing...&quot;);\r\n\t\tsuper.close();\r\n\t\tSystem.out.println(&quot;Closed.&quot;);\r\n\t}\r\n\r\nImmediately after creating this object, I call `System.gc()` to destroy it. As expected, the `finalize()` method gets called, and then the `close()` method gets called, but I only see `Closing...` get printed to the console.\r\n\r\n**Why does execution never reach my second print statement?**\r\n&lt;br&gt;&lt;br&gt;&lt;br&gt;\r\n# Notes\r\nThe first thing that I suspected was happening was that `super.close()` was throwing an exception, and whatever prepares an object for garbage collection was swallowing the exception, so I tried catching any `Throwable` and printing it:\r\n\r\n\tpublic void close() throws IOException {\r\n\t\tSystem.out.println(&quot;Closing...&quot;);\r\n\t\ttry {\r\n\t\t\tsuper.close();\r\n\t\t\tSystem.out.println(&quot;Closed.&quot;);\r\n\t\t} catch (Throwable e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\nBut I got the same exact output as before: `Closing...`. The next thing I did was test what would happen if I closed the class loader manually, so I just called `.close()` on my class loader, immediately after constructing it, instead of running System.gc(); In this case, both of my print statements were run:\r\n\r\n    Closing...\r\n    Closed.\r\n","title":"finalize() method breaks mid-execution?","body":"<h1>Question</h1>\n\n<p>I have a <code>URLClassLoader</code> anonymous class. In it, I've overridden the <code>finalize()</code> method so that the object will automatically close itself when garbage collected:</p>\n\n<pre><code>protected void finalize() throws Throwable {\n    close();\n}\n</code></pre>\n\n<p>and I've overridden the <code>close()</code> method to print some information:</p>\n\n<pre><code>public void close() throws IOException {\n    System.out.println(\"Closing...\");\n    super.close();\n    System.out.println(\"Closed.\");\n}\n</code></pre>\n\n<p>Immediately after creating this object, I call <code>System.gc()</code> to destroy it. As expected, the <code>finalize()</code> method gets called, and then the <code>close()</code> method gets called, but I only see <code>Closing...</code> get printed to the console.</p>\n\n<p><strong>Why does execution never reach my second print statement?</strong>\n<br><br><br></p>\n\n<h1>Notes</h1>\n\n<p>The first thing that I suspected was happening was that <code>super.close()</code> was throwing an exception, and whatever prepares an object for garbage collection was swallowing the exception, so I tried catching any <code>Throwable</code> and printing it:</p>\n\n<pre><code>public void close() throws IOException {\n    System.out.println(\"Closing...\");\n    try {\n        super.close();\n        System.out.println(\"Closed.\");\n    } catch (Throwable e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>But I got the same exact output as before: <code>Closing...</code>. The next thing I did was test what would happen if I closed the class loader manually, so I just called <code>.close()</code> on my class loader, immediately after constructing it, instead of running System.gc(); In this case, both of my print statements were run:</p>\n\n<pre><code>Closing...\nClosed.\n</code></pre>\n"},{"tags":["java","garbage-collection","finalize","finalization"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1582932922,"post_id":60458757,"comment_id":106959524,"body_markdown":"A heap field is sufficient to keep an object alive if its collection would have an observable effect, whether the field is used or not. This is addressed in [JLS, &amp;12.6.1](https://docs.oracle.com/javase/specs/jls/se13/html/jls-12.html#jls-12.6.1-410): *Note that this sort of optimization is only allowed if references are on the stack, not stored in the heap.* You can add `@SuppressWarnings(&quot;unused&quot;)` to it.","body":"A heap field is sufficient to keep an object alive if its collection would have an observable effect, whether the field is used or not. This is addressed in <a href=\"https://docs.oracle.com/javase/specs/jls/se13/html/jls-12.html#jls-12.6.1-410\" rel=\"nofollow noreferrer\">JLS, &amp;12.6.1</a>: <i>Note that this sort of optimization is only allowed if references are on the stack, not stored in the heap.</i> You can add <code>@SuppressWarnings(&quot;unused&quot;)</code> to it."}],"answers":[{"tags":[],"owner":{"account_id":69443,"reputation":85343,"user_id":202009,"accept_rate":79,"display_name":"Andy Thomas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1583163183,"creation_date":1582922584,"answer_id":60458979,"question_id":60458757,"body_markdown":"Here are a couple of ideas.\r\n\r\nIf you control the Bar class, and each instance is referenced by no more than one array, you could add a reference from a Bar instance to the array. Reachable Bar instances will prevent the array from being collected.\r\n\r\nAlternatively, you could:\r\n\r\n1. Construct a reference queue for weak references to Bar instances.\r\n\r\n        ReferenceQueue&lt;Bar&gt; m_refQueue = new ReferenceQueue&lt;&gt;();\r\n\r\n2. Construct each WeakReference&lt;Bar&gt; with a reference to that queue.\r\n\r\n        new WeakReference&lt;Bar&gt;( myBar, m_refQueue );\r\n\r\n3. Periodically poll that queue for available collectable instances, and remove them from your collection. \r\n\r\n4. You could make the collection itself a resizable data structure, avoiding the need to collect it.\r\n\r\n        public class Foo {\r\n           final @Nonnull List&lt;WeakReference&lt;Bar&gt;&gt; cache = new ArrayList&lt;&gt;();\r\n\r\n           // Or you could use an IdentityHashSet from a third-party library.\r\n        }\r\n\r\n**EDIT**\r\n\r\nAs suggested by @Holger below, if an ordered list of references is not needed, your collection of WeakReference&lt;Bar&gt; can be a [java.util.WeakHashMap][1], used as a set. The keys are weak references; the values can be null. The map is a resizable data structure, so you can simply hold an ordinary reference to the map.\r\n\r\n        public class Foo {\r\n           final @Nonnull WeakHashMap&lt;WeakReference&lt;Bar&gt;,Object&gt; cache\r\n              = new WeakHashMap&lt;&gt;();\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/WeakHashMap.html","title":"Prevent object garbage collection before other objects","body":"<p>Here are a couple of ideas.</p>\n\n<p>If you control the Bar class, and each instance is referenced by no more than one array, you could add a reference from a Bar instance to the array. Reachable Bar instances will prevent the array from being collected.</p>\n\n<p>Alternatively, you could:</p>\n\n<ol>\n<li><p>Construct a reference queue for weak references to Bar instances.</p>\n\n<pre><code>ReferenceQueue&lt;Bar&gt; m_refQueue = new ReferenceQueue&lt;&gt;();\n</code></pre></li>\n<li><p>Construct each WeakReference with a reference to that queue.</p>\n\n<pre><code>new WeakReference&lt;Bar&gt;( myBar, m_refQueue );\n</code></pre></li>\n<li><p>Periodically poll that queue for available collectable instances, and remove them from your collection. </p></li>\n<li><p>You could make the collection itself a resizable data structure, avoiding the need to collect it.</p>\n\n<pre><code>public class Foo {\n   final @Nonnull List&lt;WeakReference&lt;Bar&gt;&gt; cache = new ArrayList&lt;&gt;();\n\n   // Or you could use an IdentityHashSet from a third-party library.\n}\n</code></pre></li>\n</ol>\n\n<p><strong>EDIT</strong></p>\n\n<p>As suggested by @Holger below, if an ordered list of references is not needed, your collection of WeakReference can be a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/WeakHashMap.html\" rel=\"nofollow noreferrer\">java.util.WeakHashMap</a>, used as a set. The keys are weak references; the values can be null. The map is a resizable data structure, so you can simply hold an ordinary reference to the map.</p>\n\n<pre><code>    public class Foo {\n       final @Nonnull WeakHashMap&lt;WeakReference&lt;Bar&gt;,Object&gt; cache\n          = new WeakHashMap&lt;&gt;();\n</code></pre>\n"}],"owner":{"account_id":7980699,"reputation":158,"user_id":6022167,"accept_rate":88,"display_name":"Gergely"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":435,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":60458979,"answer_count":1,"score":1,"last_activity_date":1635983776,"creation_date":1582921310,"question_id":60458757,"body_markdown":"I have a weakly-referenced array of weak references to further objects like so:\r\n\r\n````\r\npublic class Foo{\r\n    WeakReference&lt;WeakReference&lt;Bar&gt;[]&gt; cache;\r\n}\r\npublic class Bar{\r\n    private final WeakReference&lt;Bar&gt;[] ownerCache;\r\n}\r\n````\r\nThe array itself is weakly referred for reasons I will not go into right now. I want to make sure it is not garbage collected before ANY of the Bar objects reachable from it. In other words, it must exist in memory as long as any Bar object exists that can be reached from it. Then, if no Bar objects exist any more, I am better off if the array is also garbage collected. (Bar objects may or may not be strongly reachable from elsewhere.) I did this by referring to the cache array in a field inside all Bar objects. If the field is sufficient in making the array strongly reachable, it is not garbage collected. However, my code never actually uses that field and I can not make it public. (I get the &quot;unused&quot; warning on it.) I am afraid that the existence of such field is terminated either during compile time or run time, or it could get special treatment from the garbage collector that I am unaware of.\r\n\r\nIs this the right solution? Does this solution achieve what I want regardless of the garbage collector or JVM implementation? If not, what would be a better method?","title":"Prevent object garbage collection before other objects","body":"<p>I have a weakly-referenced array of weak references to further objects like so:</p>\n\n<pre><code>public class Foo{\n    WeakReference&lt;WeakReference&lt;Bar&gt;[]&gt; cache;\n}\npublic class Bar{\n    private final WeakReference&lt;Bar&gt;[] ownerCache;\n}\n</code></pre>\n\n<p>The array itself is weakly referred for reasons I will not go into right now. I want to make sure it is not garbage collected before ANY of the Bar objects reachable from it. In other words, it must exist in memory as long as any Bar object exists that can be reached from it. Then, if no Bar objects exist any more, I am better off if the array is also garbage collected. (Bar objects may or may not be strongly reachable from elsewhere.) I did this by referring to the cache array in a field inside all Bar objects. If the field is sufficient in making the array strongly reachable, it is not garbage collected. However, my code never actually uses that field and I can not make it public. (I get the \"unused\" warning on it.) I am afraid that the existence of such field is terminated either during compile time or run time, or it could get special treatment from the garbage collector that I am unaware of.</p>\n\n<p>Is this the right solution? Does this solution achieve what I want regardless of the garbage collector or JVM implementation? If not, what would be a better method?</p>\n"},{"tags":["java","filereader"],"comments":[{"owner":{"account_id":75807,"reputation":81445,"user_id":217332,"accept_rate":100,"display_name":"danben"},"score":0,"creation_date":1265689180,"post_id":2226699,"comment_id":2181498,"body_markdown":"Ok - I did the spelling and the grammar, I&#39;m not doing the formatting.","body":"Ok - I did the spelling and the grammar, I&#39;m not doing the formatting."},{"owner":{"account_id":106165,"reputation":42979,"user_id":282912,"accept_rate":100,"display_name":"msw"},"score":0,"creation_date":1269029841,"post_id":2226699,"comment_id":2472097,"body_markdown":"I suspect the original poster may be mis-interpreting the assignment and what was actually asked for was a degenerate `diff`. This guess is based on prior questions by the OP and the comparative difficulty of the solutions.","body":"I suspect the original poster may be mis-interpreting the assignment and what was actually asked for was a degenerate <code>diff</code>. This guess is based on prior questions by the OP and the comparative difficulty of the solutions."}],"answers":[{"tags":[],"owner":{"account_id":75807,"reputation":81445,"user_id":217332,"accept_rate":100,"display_name":"danben"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1265689363,"creation_date":1265689363,"answer_id":2226725,"question_id":2226699,"body_markdown":"I think the best thing to do would be to put each line from file 1 into a `HashMap`; then you could check each line of file 2 for membership in your `HashMap` rather than reading through the entire file once for each line of file 1.\r\n\r\nBut to answer your question of how to go back to the beginning of the file, the easiest thing to do is to open another `InputStream`/`Reader`.","title":"How Can I Reset The File Pointer to the Beginning of the File in Java?","body":"<p>I think the best thing to do would be to put each line from file 1 into a <code>HashMap</code>; then you could check each line of file 2 for membership in your <code>HashMap</code> rather than reading through the entire file once for each line of file 1.</p>\n\n<p>But to answer your question of how to go back to the beginning of the file, the easiest thing to do is to open another <code>InputStream</code>/<code>Reader</code>.</p>\n"},{"tags":[],"owner":{"account_id":18523,"reputation":5667,"user_id":42512,"accept_rate":73,"display_name":"Gennady Shumakher"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1349169310,"creation_date":1265689638,"answer_id":2226746,"question_id":2226699,"body_markdown":"I believe [`RandomAccessFile`][1] is what you need. It contains: `RandomAccessFile#seek` and `RandomAccessFile#getFilePointer`.\r\n\r\n`rewind()` is `seek(0)`\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/io/RandomAccessFile.html","title":"How Can I Reset The File Pointer to the Beginning of the File in Java?","body":"<p>I believe <a href=\"http://java.sun.com/javase/6/docs/api/java/io/RandomAccessFile.html\" rel=\"noreferrer\"><code>RandomAccessFile</code></a> is what you need. It contains: <code>RandomAccessFile#seek</code> and <code>RandomAccessFile#getFilePointer</code>.</p>\n\n<p><code>rewind()</code> is <code>seek(0)</code></p>\n"},{"tags":[],"owner":{"account_id":38908,"reputation":8308,"user_id":111991,"accept_rate":76,"display_name":"Ryan Fernandes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1265692409,"creation_date":1265692409,"answer_id":2226895,"question_id":2226699,"body_markdown":"well, Gennady S. answer is what I would use to solve your problem. \r\n\r\n&gt; I am writing a program in Java that requires me to compare the data in 2 files\r\n\r\nhowever, I would rather not code this up again.. I would rather use something like http://code.google.com/p/java-diff-utils/","title":"How Can I Reset The File Pointer to the Beginning of the File in Java?","body":"<p>well, Gennady S. answer is what I would use to solve your problem. </p>\n\n<blockquote>\n  <p>I am writing a program in Java that requires me to compare the data in 2 files</p>\n</blockquote>\n\n<p>however, I would rather not code this up again.. I would rather use something like <a href=\"http://code.google.com/p/java-diff-utils/\" rel=\"nofollow noreferrer\">http://code.google.com/p/java-diff-utils/</a></p>\n"},{"tags":[],"owner":{"account_id":20439,"reputation":4580,"user_id":48839,"display_name":"Chad Okere"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1265693890,"creation_date":1265693890,"answer_id":2227004,"question_id":2226699,"body_markdown":"Obviously you could just close and reopen the file like this: \r\n\r\n         while((s1=file1.data.readLine())!=null){\r\n             System.out.println(&quot;s1: &quot;+s1);\r\n             FileReader file2=new FileReader(&quot;d:\\\\testfiles\\\\FILE2.txt&quot;);\r\n             while((s2=file2.data.readLine())!=null){\r\n                 System.out.println(&quot;s2: &quot;+s2);\r\n                 //compare s1 and s2;\r\n             }\r\n             file2.closeFile()\r\n         }\r\n\r\n\r\nBut you really don&#39;t want to do it that way, since this algorithm&#39;s running time is O(n&lt;sup&gt;2&lt;/sup&gt;). if there were 1000 lines in file A, and 10000 lines in file B, your inner loop would run 1,000,000 times.\r\n\r\nWhat you should do is read each line and store it in a collection that allows quick checks to see if an item is already contained(probably a HashSet). \r\n\r\nIf you only need to check to see that every line in file 2 is in file 1, then you just add each line in file one to a HashSet, and then check to see that every line in file 2 is in that set. \r\n\r\nIf you need to do a cross comparison where you find every string that&#39;s in one but not the other, then you&#39;ll need two hash sets, one for each file. (Although there&#39;s a trick you could do to use just one) \r\n\r\nIf the files are so large that you don&#39;t have enough memory, then your original n&lt;sup&gt;2&lt;/sup&gt; method would never have worked anyway. ","title":"How Can I Reset The File Pointer to the Beginning of the File in Java?","body":"<p>Obviously you could just close and reopen the file like this: </p>\n\n<pre><code>     while((s1=file1.data.readLine())!=null){\n         System.out.println(\"s1: \"+s1);\n         FileReader file2=new FileReader(\"d:\\\\testfiles\\\\FILE2.txt\");\n         while((s2=file2.data.readLine())!=null){\n             System.out.println(\"s2: \"+s2);\n             //compare s1 and s2;\n         }\n         file2.closeFile()\n     }\n</code></pre>\n\n<p>But you really don't want to do it that way, since this algorithm's running time is O(n<sup>2</sup>). if there were 1000 lines in file A, and 10000 lines in file B, your inner loop would run 1,000,000 times.</p>\n\n<p>What you should do is read each line and store it in a collection that allows quick checks to see if an item is already contained(probably a HashSet). </p>\n\n<p>If you only need to check to see that every line in file 2 is in file 1, then you just add each line in file one to a HashSet, and then check to see that every line in file 2 is in that set. </p>\n\n<p>If you need to do a cross comparison where you find every string that's in one but not the other, then you'll need two hash sets, one for each file. (Although there's a trick you could do to use just one) </p>\n\n<p>If the files are so large that you don't have enough memory, then your original n<sup>2</sup> method would never have worked anyway. </p>\n"},{"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635983665,"creation_date":1265696641,"answer_id":2227197,"question_id":2226699,"body_markdown":"As others have suggested, you should consider other approaches to the problem. For the specific question of returning to a previous point in a file, [`java.io.FileReader`][1] would appear to inherit [`mark()`][2] and [`reset()`][3] methods that address this goal. Unfortunately, `markSupported()` returns `false`. \r\n\r\nAlternatively, [`BufferedReader`][4]  _does_ support `mark()`. The program below prints `true`, illustrating the effect.\r\n\r\n```\r\npackage cli;\r\n\r\nimport java.io.BufferedReader;\r\nimport java.io.FileInputStream;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\n\r\npublic class FileReaderTest {\r\n\r\n    public static void main(String[] args) {\r\n        try {\r\n            BufferedReader in = new BufferedReader(new InputStreamReader(\r\n                new FileInputStream(&quot;src/cli/FileReaderTest.java&quot;)));\r\n            in.mark(1);\r\n            int i1 = in.read(); in.read(); in.read();\r\n            in.reset();\r\n            int i2 = in.read();\r\n            System.out.println(i1 == i2);\r\n        } catch (IOException e) {\r\n            e.printStackTrace(System.err);\r\n        }\r\n    }\r\n}\r\n```\r\n  [1]:http://java.sun.com/javase/6/docs/api/java/io/FileReader.html\r\n  [2]:http://java.sun.com/javase/6/docs/api/java/io/Reader.html#mark%28int%29\r\n  [3]:http://java.sun.com/javase/6/docs/api/java/io/Reader.html#reset%28%29\r\n  [4]: https://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html","title":"How Can I Reset The File Pointer to the Beginning of the File in Java?","body":"<p>As others have suggested, you should consider other approaches to the problem. For the specific question of returning to a previous point in a file, <a href=\"http://java.sun.com/javase/6/docs/api/java/io/FileReader.html\" rel=\"nofollow noreferrer\"><code>java.io.FileReader</code></a> would appear to inherit <a href=\"http://java.sun.com/javase/6/docs/api/java/io/Reader.html#mark%28int%29\" rel=\"nofollow noreferrer\"><code>mark()</code></a> and <a href=\"http://java.sun.com/javase/6/docs/api/java/io/Reader.html#reset%28%29\" rel=\"nofollow noreferrer\"><code>reset()</code></a> methods that address this goal. Unfortunately, <code>markSupported()</code> returns <code>false</code>.</p>\n<p>Alternatively, <a href=\"https://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html\" rel=\"nofollow noreferrer\"><code>BufferedReader</code></a>  <em>does</em> support <code>mark()</code>. The program below prints <code>true</code>, illustrating the effect.</p>\n<pre><code>package cli;\n\nimport java.io.BufferedReader;\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\n\npublic class FileReaderTest {\n\n    public static void main(String[] args) {\n        try {\n            BufferedReader in = new BufferedReader(new InputStreamReader(\n                new FileInputStream(&quot;src/cli/FileReaderTest.java&quot;)));\n            in.mark(1);\n            int i1 = in.read(); in.read(); in.read();\n            in.reset();\n            int i2 = in.read();\n            System.out.println(i1 == i2);\n        } catch (IOException e) {\n            e.printStackTrace(System.err);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":106190,"reputation":9362,"user_id":282968,"accept_rate":73,"display_name":"MJB"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1269028262,"creation_date":1269028262,"answer_id":2480172,"question_id":2226699,"body_markdown":"As noted, there are better algorithms - investigate these\r\n\r\naside: \r\n\r\nFileReader doesn&#39;t implement mark and reset, so trashgod&#39;s comments are inaccurate.\r\nYou&#39;d either have to implement a version of this (using RandomAccessFile or what not) or wrap in a BufferedReader. However, the latter will load the whole thing in memory if you mark it\r\n\r\n","title":"How Can I Reset The File Pointer to the Beginning of the File in Java?","body":"<p>As noted, there are better algorithms - investigate these</p>\n\n<p>aside: </p>\n\n<p>FileReader doesn't implement mark and reset, so trashgod's comments are inaccurate.\nYou'd either have to implement a version of this (using RandomAccessFile or what not) or wrap in a BufferedReader. However, the latter will load the whole thing in memory if you mark it</p>\n"},{"tags":[],"owner":{"account_id":37524,"reputation":7056,"user_id":107301,"accept_rate":96,"display_name":"Dark Star1"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1269029046,"creation_date":1269029046,"answer_id":2480251,"question_id":2226699,"body_markdown":"Just a quick Question. can&#39;t you keep one object pointed at the start of the file and traverse through the file with another object? Then when you get to the end just point it to the object at the beginning of the file(stream). I believe C++ has such mechanisms with file I/O ( or is it stream I/O)","title":"How Can I Reset The File Pointer to the Beginning of the File in Java?","body":"<p>Just a quick Question. can't you keep one object pointed at the start of the file and traverse through the file with another object? Then when you get to the end just point it to the object at the beginning of the file(stream). I believe C++ has such mechanisms with file I/O ( or is it stream I/O)</p>\n"},{"tags":[],"owner":{"account_id":3897946,"reputation":1,"user_id":3226444,"display_name":"GuitarGuruGaming"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1390494015,"creation_date":1390494015,"answer_id":21313741,"question_id":2226699,"body_markdown":"I believe that you could just re-initialize the file 2 file reader and that should reset it.","title":"How Can I Reset The File Pointer to the Beginning of the File in Java?","body":"<p>I believe that you could just re-initialize the file 2 file reader and that should reset it.</p>\n"},{"tags":[],"owner":{"account_id":5145091,"reputation":499,"user_id":4121314,"accept_rate":100,"display_name":"Niles"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1459500772,"creation_date":1459499999,"answer_id":36351726,"question_id":2226699,"body_markdown":"If you can clearly indentify the **dimension** of your file you can use *mark(int readAheadLimit)* and *reset()* from the class *BufferedReader*.\r\nThe method *mark(int readAhedLimit)* add a marker to the current position of your BufferedReader and you can go back to the marker using *reset()*.\r\n\r\nUsing them you have to **be careful** to the number of characters to read until the *reset()*, you have to specify them as the argument of the function *mark(int readAhedLimit)*.\r\n\r\nAssuming a limit of 100 characters your code should look like:\r\n\r\n    class MyFileReader {\r\n        BufferedReader data;\r\n        int maxNumberOfCharacters = 100;\r\n    \r\n        public MyFileReader(String fileName)\r\n        {\r\n            try{\r\n                FileInputStream fstream = new FileInputStream(fileName);\r\n                data = new BufferedReader(new InputStreamReader(fstream));\r\n                //mark the current position, in this case the beginning of the file\r\n                data.mark(maxNumberOfCharacters);\r\n            }\r\n            catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n        public void resetFile(){\r\n            data.reset();\r\n        }\r\n    \r\n        public void closeFile()\r\n        {\r\n            try{\r\n                in.close();\r\n            }\r\n            catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }","title":"How Can I Reset The File Pointer to the Beginning of the File in Java?","body":"<p>If you can clearly indentify the <strong>dimension</strong> of your file you can use <em>mark(int readAheadLimit)</em> and <em>reset()</em> from the class <em>BufferedReader</em>.\nThe method <em>mark(int readAhedLimit)</em> add a marker to the current position of your BufferedReader and you can go back to the marker using <em>reset()</em>.</p>\n\n<p>Using them you have to <strong>be careful</strong> to the number of characters to read until the <em>reset()</em>, you have to specify them as the argument of the function <em>mark(int readAhedLimit)</em>.</p>\n\n<p>Assuming a limit of 100 characters your code should look like:</p>\n\n<pre><code>class MyFileReader {\n    BufferedReader data;\n    int maxNumberOfCharacters = 100;\n\n    public MyFileReader(String fileName)\n    {\n        try{\n            FileInputStream fstream = new FileInputStream(fileName);\n            data = new BufferedReader(new InputStreamReader(fstream));\n            //mark the current position, in this case the beginning of the file\n            data.mark(maxNumberOfCharacters);\n        }\n        catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public void resetFile(){\n        data.reset();\n    }\n\n    public void closeFile()\n    {\n        try{\n            in.close();\n        }\n        catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6247770,"reputation":56,"user_id":4859003,"display_name":"Parth Shah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1469685985,"creation_date":1469685985,"answer_id":38628280,"question_id":2226699,"body_markdown":"If you just want to reset the file pointer to the top of the file, reinitialize your buffer reader. I assume that you are also using the try and catch block to check for end of the file. \r\n\r\n    `//To read from a file. \r\n          BufferedReader read_data_file = new BufferedReader(new FileReader(&quot;Datafile.dat&quot;));&#39;\r\nLet&#39;s say this is how you have your buffer reader defined. Now, this is how you can check for end of file=null.\r\n\r\n    boolean has_data= true;\r\n\r\n    while(has_data)\r\n         {    \r\n          try\r\n         {\r\n         record = read_data_file.readLine();\r\n         delimit = new StringTokenizer(record, &quot;,&quot;);\r\n         //Reading the input in STRING format. \r\n         cus_ID = delimit.nextToken();\r\n         cus_name = delimit.nextToken();&#39;\r\n          //And keep grabbing the data and save it in appropriate fields. \r\n         }\r\n    catch (NullPointerException e)\r\n         {\r\n          System.out.println(&quot;\\nEnd of Data File... Total &quot;+ num_of_records \r\n                           + &quot; records were printed. \\n \\n&quot;);\r\n          has_data = false; //To exit the loop. \r\n          /*\r\n            ------&gt; This point is the trouble maker. Your file pointer is pointing at the end of the line. \r\n         --&gt;If you want to again read all the data FROM THE TOP WITHOUT   RECOMPILING: \r\n          Do this--&gt; Reset the buffer reader to the top of the file.\r\n          */                      \r\n          read_data_file = new BufferedReader(new FileReader(new File(&quot;datafile.dat&quot;)));\r\n    }\r\nBy reinitializing the buffer reader you will reset the file reader mark/pointer to the top of the file and you won&#39;t have to recompile the file to set the file reader marker/pointer to beginning/top of the file. \r\nYou need to reinitialize the buffer reader only if you don&#39;t want to recompile and pull off the same stunt in the same run. But if you wish to just run loop one time then you don&#39;t have to all this, by simply recompiling the file, the file reader marker will be set to the top/beginning of the file. \r\n         \r\n\r\n\r\n\r\n\r\n","title":"How Can I Reset The File Pointer to the Beginning of the File in Java?","body":"<p>If you just want to reset the file pointer to the top of the file, reinitialize your buffer reader. I assume that you are also using the try and catch block to check for end of the file. </p>\n\n<pre><code>`//To read from a file. \n      BufferedReader read_data_file = new BufferedReader(new FileReader(\"Datafile.dat\"));'\n</code></pre>\n\n<p>Let's say this is how you have your buffer reader defined. Now, this is how you can check for end of file=null.</p>\n\n<pre><code>boolean has_data= true;\n\nwhile(has_data)\n     {    \n      try\n     {\n     record = read_data_file.readLine();\n     delimit = new StringTokenizer(record, \",\");\n     //Reading the input in STRING format. \n     cus_ID = delimit.nextToken();\n     cus_name = delimit.nextToken();'\n      //And keep grabbing the data and save it in appropriate fields. \n     }\ncatch (NullPointerException e)\n     {\n      System.out.println(\"\\nEnd of Data File... Total \"+ num_of_records \n                       + \" records were printed. \\n \\n\");\n      has_data = false; //To exit the loop. \n      /*\n        ------&gt; This point is the trouble maker. Your file pointer is pointing at the end of the line. \n     --&gt;If you want to again read all the data FROM THE TOP WITHOUT   RECOMPILING: \n      Do this--&gt; Reset the buffer reader to the top of the file.\n      */                      \n      read_data_file = new BufferedReader(new FileReader(new File(\"datafile.dat\")));\n}\n</code></pre>\n\n<p>By reinitializing the buffer reader you will reset the file reader mark/pointer to the top of the file and you won't have to recompile the file to set the file reader marker/pointer to beginning/top of the file. \nYou need to reinitialize the buffer reader only if you don't want to recompile and pull off the same stunt in the same run. But if you wish to just run loop one time then you don't have to all this, by simply recompiling the file, the file reader marker will be set to the top/beginning of the file. </p>\n"}],"owner":{"account_id":588463,"reputation":193,"user_id":269050,"display_name":"Shaz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62335,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":10,"score":14,"last_activity_date":1635983665,"creation_date":1265688860,"question_id":2226699,"body_markdown":"I am writing a program in Java that requires me to compare the data in 2 files. I have to check each line from file 1 against each line of file 2 and if I find a match write them to a third file. After I read to the end of file 2, how do I reset the pointer to the beginning of the file? \r\n\r\n    public class FiFo {\r\n        public static void main(String[] args) \r\n        {\r\n            FileReader file1=new FileReader(&quot;d:\\\\testfiles\\\\FILE1.txt&quot;);\r\n            FileReader file2=new FileReader(&quot;d:\\\\testfiles\\\\FILE2.txt&quot;);\r\n            try{\r\n                String s1,s2;\r\n                while((s1=file1.data.readLine())!=null){\r\n                    System.out.println(&quot;s1: &quot;+s1);\r\n                    while((s2=file2.data.readLine())!=null){\r\n                        System.out.println(&quot;s2: &quot;+s2);\r\n                    }\r\n                }\r\n                file1.closeFile();\r\n                file2.closeFile();\r\n            }catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n    class FileReader {\r\n        BufferedReader data;\r\n        DataInputStream in;\r\n        \r\n        public FileReader(String fileName)\r\n        {\r\n            try{\r\n                FileInputStream fstream = new FileInputStream(fileName);\r\n                data = new BufferedReader(new InputStreamReader(fstream));\r\n            }\r\n            catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        } \r\n            \r\n        public void closeFile()\r\n        {\r\n            try{\r\n                in.close();\r\n            }\r\n            catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }","title":"How Can I Reset The File Pointer to the Beginning of the File in Java?","body":"<p>I am writing a program in Java that requires me to compare the data in 2 files. I have to check each line from file 1 against each line of file 2 and if I find a match write them to a third file. After I read to the end of file 2, how do I reset the pointer to the beginning of the file? </p>\n\n<pre><code>public class FiFo {\n    public static void main(String[] args) \n    {\n        FileReader file1=new FileReader(\"d:\\\\testfiles\\\\FILE1.txt\");\n        FileReader file2=new FileReader(\"d:\\\\testfiles\\\\FILE2.txt\");\n        try{\n            String s1,s2;\n            while((s1=file1.data.readLine())!=null){\n                System.out.println(\"s1: \"+s1);\n                while((s2=file2.data.readLine())!=null){\n                    System.out.println(\"s2: \"+s2);\n                }\n            }\n            file1.closeFile();\n            file2.closeFile();\n        }catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n\nclass FileReader {\n    BufferedReader data;\n    DataInputStream in;\n\n    public FileReader(String fileName)\n    {\n        try{\n            FileInputStream fstream = new FileInputStream(fileName);\n            data = new BufferedReader(new InputStreamReader(fstream));\n        }\n        catch (IOException e) {\n            e.printStackTrace();\n        }\n    } \n\n    public void closeFile()\n    {\n        try{\n            in.close();\n        }\n        catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","jvm","finalize"],"comments":[{"owner":{"account_id":2137644,"reputation":17159,"user_id":1897010,"display_name":"Sameer Kazi"},"score":0,"creation_date":1397467803,"post_id":158174,"comment_id":35230784,"body_markdown":"HI finalize () method very well explained here  http://howtodoinjava.com/2012/10/31/why-not-to-use-finalize-method-in-java/","body":"HI finalize () method very well explained here  <a href=\"http://howtodoinjava.com/2012/10/31/why-not-to-use-finalize-method-in-java/\" rel=\"nofollow noreferrer\">howtodoinjava.com/2012/10/31/&hellip;</a>"},{"owner":{"account_id":1416522,"reputation":91354,"user_id":3553087,"display_name":"Brian Goetz"},"score":5,"creation_date":1539738683,"post_id":158174,"comment_id":92607916,"body_markdown":"Most application and library code will never use `finalize()`.  However, _platform library code_, such as `SocketInputStream`, which manages native resources on behalf of the caller, does so to try to minimize the risk of resource leaks (or uses equivalent mechanisms, such as `PhantomReference`, that were added later.)  So the ecosystem needs them, even though 99.9999% of developers will never write one.","body":"Most application and library code will never use <code>finalize()</code>.  However, <i>platform library code</i>, such as <code>SocketInputStream</code>, which manages native resources on behalf of the caller, does so to try to minimize the risk of resource leaks (or uses equivalent mechanisms, such as <code>PhantomReference</code>, that were added later.)  So the ecosystem needs them, even though 99.9999% of developers will never write one."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":4,"creation_date":1612586314,"post_id":158174,"comment_id":116819425,"body_markdown":"**Update:** `finalize` is now deprecated, as of [Java 9](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9). See the Question, [*Why is the finalize() method deprecated in Java 9?*](https://stackoverflow.com/q/56139760/642706).","body":"<b>Update:</b> <code>finalize</code> is now deprecated, as of <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"nofollow noreferrer\">Java 9</a>. See the Question, <a href=\"https://stackoverflow.com/q/56139760/642706\"><i>Why is the finalize() method deprecated in Java 9?</i></a>."}],"answers":[{"tags":[],"owner":{"account_id":2397,"reputation":179869,"user_id":3333,"accept_rate":80,"display_name":"Paul Tomblin"},"down_vote_count":3,"up_vote_count":42,"is_accepted":false,"score":39,"last_activity_date":1553328161,"creation_date":1222874663,"answer_id":158196,"question_id":158174,"body_markdown":"I&#39;ve been doing Java professionally since 1998, and I&#39;ve never implemented `finalize()`.  Not once.","title":"Why would you ever implement finalize()?","body":"<p>I've been doing Java professionally since 1998, and I've never implemented <code>finalize()</code>.  Not once.</p>\n"},{"tags":[],"owner":{"account_id":2536,"reputation":22948,"user_id":3535,"accept_rate":100,"display_name":"John Meagher"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1222874707,"creation_date":1222874707,"answer_id":158202,"question_id":158174,"body_markdown":"When writing code that will be used by other developers that requires some sort of &quot;cleanup&quot; method to be called to free up resources.  Sometimes those other developers forget to call your cleanup (or close, or destroy, or whatever) method.  To avoid possible resource leaks you can check in the finalize method to ensure that the method was called and if it wasn&#39;t you can call it yourself.  \r\n\r\nMany database drivers do this in their Statement and Connection implementations to provide a little safety against developers who forget to call close on them.","title":"Why would you ever implement finalize()?","body":"<p>When writing code that will be used by other developers that requires some sort of \"cleanup\" method to be called to free up resources.  Sometimes those other developers forget to call your cleanup (or close, or destroy, or whatever) method.  To avoid possible resource leaks you can check in the finalize method to ensure that the method was called and if it wasn't you can call it yourself.  </p>\n\n<p>Many database drivers do this in their Statement and Connection implementations to provide a little safety against developers who forget to call close on them.</p>\n"},{"tags":[],"owner":{"account_id":970,"reputation":399857,"user_id":1288,"accept_rate":93,"display_name":"Bill the Lizard"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1222874869,"creation_date":1222874869,"answer_id":158215,"question_id":158174,"body_markdown":"You shouldn&#39;t depend on finalize() to clean up your resources for you.  finalize() won&#39;t run until the class is garbage collected, if then.  It&#39;s much better to explicitly free resources when you&#39;re done using them.","title":"Why would you ever implement finalize()?","body":"<p>You shouldn't depend on finalize() to clean up your resources for you.  finalize() won't run until the class is garbage collected, if then.  It's much better to explicitly free resources when you're done using them.</p>\n"},{"tags":[],"owner":{"account_id":10874,"reputation":13103,"user_id":20734,"display_name":"John M"},"down_vote_count":6,"up_vote_count":250,"is_accepted":true,"score":244,"last_activity_date":1553327297,"creation_date":1222874870,"answer_id":158216,"question_id":158174,"body_markdown":"You could use it as a backstop for an object holding an external resource (socket, file, etc).  Implement a `close()` method and document that it needs to be called.\r\n\r\nImplement `finalize()` to do the `close()` processing if you detect it hasn&#39;t been done. Maybe with something dumped to `stderr` to point out that you&#39;re cleaning up after a buggy caller.\r\n\r\nIt provides extra safety in an exceptional/buggy situation.  Not every caller is going to do the correct `try {} finally {}` stuff every time.  Unfortunate, but true in most environments.\r\n\r\nI agree that it&#39;s rarely needed.  And as commenters point out, it comes with GC overhead.  Only use if you need that &quot;belt and suspenders&quot; safety in a long-running app.\r\n\r\nI see that as of Java 9, [`Object.finalize()`][1] is deprecated! They point us to [`java.lang.ref.Cleaner`][2] and [`java.lang.ref.PhantomReference`][3] as alternatives.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/lang/Object.html#finalize--\r\n  [2]: https://docs.oracle.com/javase/9/docs/api/java/lang/ref/Cleaner.html\r\n  [3]: https://docs.oracle.com/javase/9/docs/api/java/lang/ref/PhantomReference.html","title":"Why would you ever implement finalize()?","body":"<p>You could use it as a backstop for an object holding an external resource (socket, file, etc).  Implement a <code>close()</code> method and document that it needs to be called.</p>\n\n<p>Implement <code>finalize()</code> to do the <code>close()</code> processing if you detect it hasn't been done. Maybe with something dumped to <code>stderr</code> to point out that you're cleaning up after a buggy caller.</p>\n\n<p>It provides extra safety in an exceptional/buggy situation.  Not every caller is going to do the correct <code>try {} finally {}</code> stuff every time.  Unfortunate, but true in most environments.</p>\n\n<p>I agree that it's rarely needed.  And as commenters point out, it comes with GC overhead.  Only use if you need that \"belt and suspenders\" safety in a long-running app.</p>\n\n<p>I see that as of Java 9, <a href=\"https://docs.oracle.com/javase/9/docs/api/java/lang/Object.html#finalize--\" rel=\"noreferrer\"><code>Object.finalize()</code></a> is deprecated! They point us to <a href=\"https://docs.oracle.com/javase/9/docs/api/java/lang/ref/Cleaner.html\" rel=\"noreferrer\"><code>java.lang.ref.Cleaner</code></a> and <a href=\"https://docs.oracle.com/javase/9/docs/api/java/lang/ref/PhantomReference.html\" rel=\"noreferrer\"><code>java.lang.ref.PhantomReference</code></a> as alternatives.</p>\n"},{"tags":[],"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"down_vote_count":0,"up_vote_count":50,"is_accepted":false,"score":50,"last_activity_date":1222875858,"creation_date":1222875858,"answer_id":158289,"question_id":158174,"body_markdown":"The only time I&#39;ve used finalize in production code was to implement a check that a given object&#39;s resources had been cleaned up, and if not, then log a very vocal message. It didn&#39;t actually try and do it itself, it just shouted a lot if it wasn&#39;t done properly. Turned out to be quite useful.","title":"Why would you ever implement finalize()?","body":"<p>The only time I've used finalize in production code was to implement a check that a given object's resources had been cleaned up, and if not, then log a very vocal message. It didn't actually try and do it itself, it just shouted a lot if it wasn't done properly. Turned out to be quite useful.</p>\n"},{"tags":[],"owner":{"account_id":12323,"reputation":1365,"user_id":24193,"display_name":"Steven M. Cherry"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1553328097,"creation_date":1222876822,"answer_id":158353,"question_id":158174,"body_markdown":"Be careful about what you do in a `finalize()`.  Especially if you are using it for things like calling close() to ensure that resources are cleaned up.  We ran into several situations where we had JNI libraries linked in to the running java code, and in any circumstances where we used finalize() to invoke JNI methods, we would get very bad java heap corruption.  The corruption was not caused by the underlying JNI code itself, all of the memory traces were fine in the native libraries.  It was just the fact that we were calling JNI methods from the finalize() at all.\r\n\r\nThis was with a JDK 1.5 which is still in widespread use.\r\n\r\nWe wouldn&#39;t find out that something went wrong until much later, but in the end the culprit was always the finalize() method making use of JNI calls.","title":"Why would you ever implement finalize()?","body":"<p>Be careful about what you do in a <code>finalize()</code>.  Especially if you are using it for things like calling close() to ensure that resources are cleaned up.  We ran into several situations where we had JNI libraries linked in to the running java code, and in any circumstances where we used finalize() to invoke JNI methods, we would get very bad java heap corruption.  The corruption was not caused by the underlying JNI code itself, all of the memory traces were fine in the native libraries.  It was just the fact that we were calling JNI methods from the finalize() at all.</p>\n\n<p>This was with a JDK 1.5 which is still in widespread use.</p>\n\n<p>We wouldn't find out that something went wrong until much later, but in the end the culprit was always the finalize() method making use of JNI calls.</p>\n"},{"tags":[],"owner":{"account_id":7470,"reputation":274976,"user_id":13005,"accept_rate":75,"display_name":"Steve Jessop"},"down_vote_count":7,"up_vote_count":193,"is_accepted":false,"score":186,"last_activity_date":1553327693,"creation_date":1222877123,"answer_id":158370,"question_id":158174,"body_markdown":"`finalize()` is a hint to the JVM that it might be nice to execute your code at an unspecified time. This is good when you want code to mysteriously fail to run.\r\n\r\nDoing anything significant in finalizers (basically anything except logging) is also good in three situations:\r\n\r\n* you want to gamble that other finalized objects will still be in a state that the rest of your program considers valid.\r\n* you want to add lots of checking code to all the methods of all your classes that have a finalizer, to make sure they behave correctly after finalization.\r\n* you want to accidentally resurrect finalized objects, and spend a lot of time trying to figure out why they don&#39;t work, and/or why they don&#39;t get finalized when they are eventually released.\r\n\r\nIf you think you need finalize(), sometimes what you really want is a **phantom reference** (which in the example given could hold a hard reference to a connection used by its referand, and close it after the phantom reference has been queued). This also has the property that it may mysteriously never run, but at least it can&#39;t call methods on or resurrect finalized objects. So it&#39;s just right for situations where you don&#39;t absolutely need to close that connection cleanly, but you&#39;d quite like to, and the clients of your class can&#39;t or won&#39;t call close themselves (which is actually fair enough - what&#39;s the point of having a garbage collector at all if you design interfaces that *require* a specific action be taken prior to collection? That just puts us back in the days of malloc/free.)\r\n\r\nOther times you need the resource you think you&#39;re managing to be more robust. For example, why do you need to close that connection? It must ultimately be based on some kind of I/O provided by the system (socket, file, whatever), so why can&#39;t you rely on the system to close it for you when the lowest level of resource is gced? If the server at the other end absolutely requires you to close the connection cleanly rather than just dropping the socket, then what&#39;s going to happen when someone trips over the power cable of the machine your code is running on, or the intervening network goes out?\r\n\r\nDisclaimer: I&#39;ve worked on a JVM implementation in the past. I hate finalizers.\r\n","title":"Why would you ever implement finalize()?","body":"<p><code>finalize()</code> is a hint to the JVM that it might be nice to execute your code at an unspecified time. This is good when you want code to mysteriously fail to run.</p>\n\n<p>Doing anything significant in finalizers (basically anything except logging) is also good in three situations:</p>\n\n<ul>\n<li>you want to gamble that other finalized objects will still be in a state that the rest of your program considers valid.</li>\n<li>you want to add lots of checking code to all the methods of all your classes that have a finalizer, to make sure they behave correctly after finalization.</li>\n<li>you want to accidentally resurrect finalized objects, and spend a lot of time trying to figure out why they don't work, and/or why they don't get finalized when they are eventually released.</li>\n</ul>\n\n<p>If you think you need finalize(), sometimes what you really want is a <strong>phantom reference</strong> (which in the example given could hold a hard reference to a connection used by its referand, and close it after the phantom reference has been queued). This also has the property that it may mysteriously never run, but at least it can't call methods on or resurrect finalized objects. So it's just right for situations where you don't absolutely need to close that connection cleanly, but you'd quite like to, and the clients of your class can't or won't call close themselves (which is actually fair enough - what's the point of having a garbage collector at all if you design interfaces that <em>require</em> a specific action be taken prior to collection? That just puts us back in the days of malloc/free.)</p>\n\n<p>Other times you need the resource you think you're managing to be more robust. For example, why do you need to close that connection? It must ultimately be based on some kind of I/O provided by the system (socket, file, whatever), so why can't you rely on the system to close it for you when the lowest level of resource is gced? If the server at the other end absolutely requires you to close the connection cleanly rather than just dropping the socket, then what's going to happen when someone trips over the power cable of the machine your code is running on, or the intervening network goes out?</p>\n\n<p>Disclaimer: I've worked on a JVM implementation in the past. I hate finalizers.</p>\n"},{"tags":[],"owner":{"display_name":"patros"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1553328085,"creation_date":1222877739,"answer_id":158434,"question_id":158174,"body_markdown":"Hmmm, I once used it to clean up objects that weren&#39;t being returned to an existing pool. \r\n\r\nThey were passed around a lot, so it was impossible to tell when they could safely be returned to the pool. The problem was that it introduced a huge penalty during garbage collection that was far greater than any savings from pooling the objects. It was in production for about a month before I ripped out the whole pool, made everything dynamic and was done with it.","title":"Why would you ever implement finalize()?","body":"<p>Hmmm, I once used it to clean up objects that weren't being returned to an existing pool. </p>\n\n<p>They were passed around a lot, so it was impossible to tell when they could safely be returned to the pool. The problem was that it introduced a huge penalty during garbage collection that was far greater than any savings from pooling the objects. It was in production for about a month before I ripped out the whole pool, made everything dynamic and was done with it.</p>\n"},{"tags":[],"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1553548150,"creation_date":1222880163,"answer_id":158624,"question_id":158174,"body_markdown":"The accepted answer is good, I just wanted to add that there is now a way to have the functionality of finalize without actually using it at all.\r\n\r\nLook at the &quot;Reference&quot; classes.  Weak reference, Phantom Reference &amp; Soft Reference.\r\n\r\nYou can use them to keep a reference to all your objects, but this reference ALONE will not stop GC.  The neat thing about this is you can have it call a method when it will be deleted, and this method can be **guaranteed** to be called.\r\n\r\nAs for finalize:\r\nI used finalize once to understand what objects were being freed.  You can play some neat games with statics, reference counting and such--but it was only for analysis, but watch out for code like this (not just in finalize, but that&#39;s where you are most likely to see it):\r\n\r\n    public void finalize() {\r\n      ref1 = null;\r\n      ref2 = null;\r\n      othercrap = null;\r\n    }\r\n\r\nIt is a sign that somebody didn&#39;t know what they were doing. &quot;Cleaning up&quot; like this is virtually never needed.  When the class is GC&#39;d, this is done automatically.\r\n\r\nIf you find code like that in a finalize it&#39;s guaranteed that the person who wrote it was confused.  \r\n\r\nIf it&#39;s elsewhere, it could be that the code is a valid patch to a bad model (a class stays around for a long time and for some reason things it referenced had to be manually freed before the object is GC&#39;d).  Generally it&#39;s because someone forgot to remove a listener or something and can&#39;t figure out why their object isn&#39;t being GC&#39;d so they just delete things it refers to and shrug their shoulders and walk away.\r\n\r\nIt should never be used to clean things up &quot;Quicker&quot;. ","title":"Why would you ever implement finalize()?","body":"<p>The accepted answer is good, I just wanted to add that there is now a way to have the functionality of finalize without actually using it at all.</p>\n\n<p>Look at the \"Reference\" classes.  Weak reference, Phantom Reference &amp; Soft Reference.</p>\n\n<p>You can use them to keep a reference to all your objects, but this reference ALONE will not stop GC.  The neat thing about this is you can have it call a method when it will be deleted, and this method can be <strong>guaranteed</strong> to be called.</p>\n\n<p>As for finalize:\nI used finalize once to understand what objects were being freed.  You can play some neat games with statics, reference counting and such--but it was only for analysis, but watch out for code like this (not just in finalize, but that's where you are most likely to see it):</p>\n\n<pre><code>public void finalize() {\n  ref1 = null;\n  ref2 = null;\n  othercrap = null;\n}\n</code></pre>\n\n<p>It is a sign that somebody didn't know what they were doing. \"Cleaning up\" like this is virtually never needed.  When the class is GC'd, this is done automatically.</p>\n\n<p>If you find code like that in a finalize it's guaranteed that the person who wrote it was confused.  </p>\n\n<p>If it's elsewhere, it could be that the code is a valid patch to a bad model (a class stays around for a long time and for some reason things it referenced had to be manually freed before the object is GC'd).  Generally it's because someone forgot to remove a listener or something and can't figure out why their object isn't being GC'd so they just delete things it refers to and shrug their shoulders and walk away.</p>\n\n<p>It should never be used to clean things up \"Quicker\". </p>\n"},{"tags":[],"owner":{"account_id":11769,"reputation":55893,"user_id":22850,"accept_rate":60,"display_name":"Tom"},"down_vote_count":4,"up_vote_count":60,"is_accepted":false,"score":56,"last_activity_date":1553328015,"creation_date":1222882712,"answer_id":158791,"question_id":158174,"body_markdown":"A simple rule: never use finalizers. \r\n\r\nThe fact alone that an object has a finalizer (regardless what code it executes) is enough to cause considerable overhead for garbage collection.\r\n\r\nFrom an [article][1] by Brian Goetz:\r\n&gt; Objects with finalizers (those that\r\n&gt; have a non-trivial finalize() method)\r\n&gt; have significant overhead compared to\r\n&gt; objects without finalizers, and should\r\n&gt; be used sparingly. Finalizeable\r\n&gt; objects are both slower to allocate\r\n&gt; and slower to collect. At allocation\r\n&gt; time, the JVM must register any\r\n&gt; finalizeable objects with the garbage\r\n&gt; collector, and (at least in the\r\n&gt; HotSpot JVM implementation)\r\n&gt; finalizeable objects must follow a\r\n&gt; slower allocation path than most other\r\n&gt; objects. Similarly, finalizeable\r\n&gt; objects are slower to collect, too. It\r\n&gt; takes at least two garbage collection\r\n&gt; cycles (in the best case) before a\r\n&gt; finalizeable object can be reclaimed,\r\n&gt; and the garbage collector has to do\r\n&gt; extra work to invoke the finalizer.\r\n&gt; The result is more time spent\r\n&gt; allocating and collecting objects and\r\n&gt; more pressure on the garbage\r\n&gt; collector, because the memory used by\r\n&gt; unreachable finalizeable objects is\r\n&gt; retained longer. Combine that with the\r\n&gt; fact that finalizers are not\r\n&gt; guaranteed to run in any predictable\r\n&gt; timeframe, or even at all, and you can\r\n&gt; see that there are relatively few\r\n&gt; situations for which finalization is\r\n&gt; the right tool to use.\r\n\r\n\r\n  [1]: http://www.ibm.com/developerworks/java/library/j-jtp01274.html","title":"Why would you ever implement finalize()?","body":"<p>A simple rule: never use finalizers. </p>\n\n<p>The fact alone that an object has a finalizer (regardless what code it executes) is enough to cause considerable overhead for garbage collection.</p>\n\n<p>From an <a href=\"http://www.ibm.com/developerworks/java/library/j-jtp01274.html\" rel=\"nofollow noreferrer\">article</a> by Brian Goetz:</p>\n\n<blockquote>\n  <p>Objects with finalizers (those that\n  have a non-trivial finalize() method)\n  have significant overhead compared to\n  objects without finalizers, and should\n  be used sparingly. Finalizeable\n  objects are both slower to allocate\n  and slower to collect. At allocation\n  time, the JVM must register any\n  finalizeable objects with the garbage\n  collector, and (at least in the\n  HotSpot JVM implementation)\n  finalizeable objects must follow a\n  slower allocation path than most other\n  objects. Similarly, finalizeable\n  objects are slower to collect, too. It\n  takes at least two garbage collection\n  cycles (in the best case) before a\n  finalizeable object can be reclaimed,\n  and the garbage collector has to do\n  extra work to invoke the finalizer.\n  The result is more time spent\n  allocating and collecting objects and\n  more pressure on the garbage\n  collector, because the memory used by\n  unreachable finalizeable objects is\n  retained longer. Combine that with the\n  fact that finalizers are not\n  guaranteed to run in any predictable\n  timeframe, or even at all, and you can\n  see that there are relatively few\n  situations for which finalization is\n  the right tool to use.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":7332,"reputation":23983,"user_id":12704,"accept_rate":75,"display_name":"Michael Easter"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1222882992,"creation_date":1222882992,"answer_id":158822,"question_id":158174,"body_markdown":"\r\nTo highlight a point in the above answers: finalizers will be executed on the lone GC thread. I have heard of a major Sun demo where the developers added a small sleep to some finalizers and intentionally brought an otherwise fancy 3D demo to its knees.\r\n\r\nBest to avoid, with possible exception of test-env diagnostics.\r\n\r\nEckel&#39;s Thinking in Java has [a good section][1] on this.\r\n\r\n\r\n  [1]: http://www.codeguru.com/java/tij/tij0051.shtml","title":"Why would you ever implement finalize()?","body":"<p>To highlight a point in the above answers: finalizers will be executed on the lone GC thread. I have heard of a major Sun demo where the developers added a small sleep to some finalizers and intentionally brought an otherwise fancy 3D demo to its knees.</p>\n\n<p>Best to avoid, with possible exception of test-env diagnostics.</p>\n\n<p>Eckel's Thinking in Java has <a href=\"http://www.codeguru.com/java/tij/tij0051.shtml\" rel=\"noreferrer\">a good section</a> on this.</p>\n"},{"tags":[],"owner":{"account_id":4892,"reputation":28982,"user_id":7581,"accept_rate":84,"display_name":"itsadok"},"down_vote_count":2,"up_vote_count":30,"is_accepted":false,"score":28,"last_activity_date":1553327979,"creation_date":1223217776,"answer_id":172079,"question_id":158174,"body_markdown":"I&#39;m not sure what you can make of this, but...\r\n\r\n    itsadok@laptop ~/jdk1.6.0_02/src/\r\n    $ find . -name &quot;*.java&quot; | xargs grep &quot;void finalize()&quot; | wc -l\r\n    41\r\n\r\nSo I guess the Sun found **some** cases where (they think) it should be used. \r\n","title":"Why would you ever implement finalize()?","body":"<p>I'm not sure what you can make of this, but...</p>\n\n<pre><code>itsadok@laptop ~/jdk1.6.0_02/src/\n$ find . -name \"*.java\" | xargs grep \"void finalize()\" | wc -l\n41\n</code></pre>\n\n<p>So I guess the Sun found <strong>some</strong> cases where (they think) it should be used. </p>\n"},{"tags":[],"owner":{"account_id":25591,"reputation":61024,"user_id":65868,"accept_rate":68,"display_name":"TofuBeer"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1553327907,"creation_date":1234548578,"answer_id":547035,"question_id":158174,"body_markdown":"`finalize()` can be useful to catch resource leaks.  If the resource should be closed but is not write the fact that it wasn&#39;t closed to a log file and close it.  That way you remove the resource leak and give yourself a way to know that it has happened so you can fix it.\r\n\r\nI have been programming in Java since 1.0 alpha 3 (1995) and I have yet to override finalize for anything...","title":"Why would you ever implement finalize()?","body":"<p><code>finalize()</code> can be useful to catch resource leaks.  If the resource should be closed but is not write the fact that it wasn't closed to a log file and close it.  That way you remove the resource leak and give yourself a way to know that it has happened so you can fix it.</p>\n\n<p>I have been programming in Java since 1.0 alpha 3 (1995) and I have yet to override finalize for anything...</p>\n"},{"tags":[],"owner":{"account_id":876970,"reputation":209,"user_id":115313,"display_name":"Kiki"},"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1553327885,"creation_date":1243907724,"answer_id":937630,"question_id":158174,"body_markdown":"    class MyObject {\r\n        Test main;\r\n     \r\n        public MyObject(Test t) {\t \r\n    \t    main = t; \r\n        }\r\n    \r\n        protected void finalize() {\r\n    \t    main.ref = this; // let instance become reachable again\r\n    \t    System.out.println(&quot;This is finalize&quot;); //test finalize run only once\r\n        }\r\n    }\r\n    \r\n    class Test {\r\n    \tMyObject ref;\r\n    \r\n     \tpublic static void main(String[] args) {\r\n     \t\tTest test = new Test();\r\n     \t\ttest.ref = new MyObject(test);\r\n     \t\ttest.ref = null; //MyObject become unreachable，finalize will be invoked\r\n     \t\tSystem.gc(); \r\n     \t\tif (test.ref != null) System.out.println(&quot;MyObject still alive!&quot;);\t\r\n    \t}\r\n    }\r\n\r\n====================================\r\n\r\nresult:\r\n\r\n    This is finalize\r\n    \r\n    MyObject still alive!\r\n\r\n=====================================\r\n\r\nSo you may make an unreachable instance reachable in finalize method.\r\n","title":"Why would you ever implement finalize()?","body":"<pre><code>class MyObject {\n    Test main;\n\n    public MyObject(Test t) {    \n        main = t; \n    }\n\n    protected void finalize() {\n        main.ref = this; // let instance become reachable again\n        System.out.println(\"This is finalize\"); //test finalize run only once\n    }\n}\n\nclass Test {\n    MyObject ref;\n\n    public static void main(String[] args) {\n        Test test = new Test();\n        test.ref = new MyObject(test);\n        test.ref = null; //MyObject become unreachable，finalize will be invoked\n        System.gc(); \n        if (test.ref != null) System.out.println(\"MyObject still alive!\");  \n    }\n}\n</code></pre>\n\n<p>====================================</p>\n\n<p>result:</p>\n\n<pre><code>This is finalize\n\nMyObject still alive!\n</code></pre>\n\n<p>=====================================</p>\n\n<p>So you may make an unreachable instance reachable in finalize method.</p>\n"},{"tags":[],"owner":{"account_id":97863,"reputation":21,"user_id":265243,"display_name":"user265243"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1265199885,"creation_date":1265199059,"answer_id":2191713,"question_id":158174,"body_markdown":"Edit: Okay, it really doesn&#39;t work. I implemented it and thought if it fails sometimes that&#39;s ok for me but it did not even call the finalize method a single time.\r\n\r\nI am not a professional programmer but in my program I have a case that I think to be an example of a good case of using finalize(), that is a cache that writes its content to disk before it is destroyed. Because it is not necessary that it is executed every time on destruction, it does only speed up my program, I hope that it i didn&#39;t do it wrong.\r\n\r\n\t@Override\r\n\tpublic void finalize()\r\n\t{\r\n\t\ttry\t{saveCache();} catch (Exception e)\t{e.printStackTrace();}\r\n\t}\r\n\t\r\n\tpublic void saveCache() throws FileNotFoundException, IOException\r\n\t{\r\n\t\tObjectOutputStream out = new ObjectOutputStream(new FileOutputStream(&quot;temp/cache.tmp&quot;));\r\n\t\tout.writeObject(cache);\r\n\t}","title":"Why would you ever implement finalize()?","body":"<p>Edit: Okay, it really doesn't work. I implemented it and thought if it fails sometimes that's ok for me but it did not even call the finalize method a single time.</p>\n\n<p>I am not a professional programmer but in my program I have a case that I think to be an example of a good case of using finalize(), that is a cache that writes its content to disk before it is destroyed. Because it is not necessary that it is executed every time on destruction, it does only speed up my program, I hope that it i didn't do it wrong.</p>\n\n<pre><code>@Override\npublic void finalize()\n{\n    try {saveCache();} catch (Exception e)  {e.printStackTrace();}\n}\n\npublic void saveCache() throws FileNotFoundException, IOException\n{\n    ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream(\"temp/cache.tmp\"));\n    out.writeObject(cache);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13600,"reputation":2691,"user_id":27449,"accept_rate":86,"display_name":"Alexander Malfait"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1302163900,"creation_date":1302163900,"answer_id":5577912,"question_id":158174,"body_markdown":"It can be handy to remove things that have been added to a global/static place (out of need), and need to be removed when the object is removed. For instance:\r\n\r\n&lt;pre&gt;\r\n    private void addGlobalClickListener() {\r\n        weakAwtEventListener = new WeakAWTEventListener(this);\r\n\r\n        Toolkit.getDefaultToolkit().addAWTEventListener(weakAwtEventListener, AWTEvent.MOUSE_EVENT_MASK);\r\n    }\r\n\r\n    @Override\r\n    protected void finalize() throws Throwable {\r\n        super.finalize();\r\n\r\n        if(weakAwtEventListener != null) {\r\n            Toolkit.getDefaultToolkit().removeAWTEventListener(weakAwtEventListener);\r\n        }\r\n    }\r\n&lt;/pre&gt;","title":"Why would you ever implement finalize()?","body":"<p>It can be handy to remove things that have been added to a global/static place (out of need), and need to be removed when the object is removed. For instance:</p>\n\n<pre>\n    private void addGlobalClickListener() {\n        weakAwtEventListener = new WeakAWTEventListener(this);\n\n        Toolkit.getDefaultToolkit().addAWTEventListener(weakAwtEventListener, AWTEvent.MOUSE_EVENT_MASK);\n    }\n\n    @Override\n    protected void finalize() throws Throwable {\n        super.finalize();\n\n        if(weakAwtEventListener != null) {\n            Toolkit.getDefaultToolkit().removeAWTEventListener(weakAwtEventListener);\n        }\n    }\n</pre>\n"},{"tags":[],"owner":{"account_id":231117,"reputation":8541,"user_id":495157,"accept_rate":40,"display_name":"JGFMK"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1379610118,"creation_date":1379610118,"answer_id":18900828,"question_id":158174,"body_markdown":"iirc - you can use finalize method as a means of implementing a pooling mechanism for expensive resources - so they don&#39;t get GC&#39;s too.","title":"Why would you ever implement finalize()?","body":"<p>iirc - you can use finalize method as a means of implementing a pooling mechanism for expensive resources - so they don't get GC's too.</p>\n"},{"tags":[],"owner":{"account_id":1232799,"reputation":1734,"user_id":1197030,"display_name":"Joeblade"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1553327484,"creation_date":1417611386,"answer_id":27272335,"question_id":158174,"body_markdown":"The accepted answer lists that closing a resource during finalize can be done.\r\n\r\nHowever [this answer][1] shows that at least in java8 with the JIT compiler, you run into unexpected issues where sometimes the finalizer is called even before you finish reading from a stream maintained by your object.\r\n\r\nSo even in that situation calling finalize would **not** be recommended.\r\n\r\n  [1]: https://stackoverflow.com/a/26645534/1197030","title":"Why would you ever implement finalize()?","body":"<p>The accepted answer lists that closing a resource during finalize can be done.</p>\n\n<p>However <a href=\"https://stackoverflow.com/a/26645534/1197030\">this answer</a> shows that at least in java8 with the JIT compiler, you run into unexpected issues where sometimes the finalizer is called even before you finish reading from a stream maintained by your object.</p>\n\n<p>So even in that situation calling finalize would <strong>not</strong> be recommended.</p>\n"},{"tags":[],"owner":{"account_id":204938,"reputation":31067,"user_id":453435,"accept_rate":83,"display_name":"Ky -"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553327449,"creation_date":1426523812,"answer_id":29082211,"question_id":158174,"body_markdown":"Personally, I almost never used `finalize()` except in one rare circumstance: I made a custom generic-type collection, and I wrote a custom `finalize()` method that does the following:\r\n\r\n\tpublic void finalize() throws Throwable {\r\n\t\tsuper.finalize();\r\n\t\tif (destructiveFinalize) {\r\n\t\t\tT item;\r\n\t\t\tfor (int i = 0, l = length(); i &lt; l; i++) {\r\n\t\t\t\titem = get(i);\r\n\t\t\t\tif (item == null) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (item instanceof Window) {\r\n\t\t\t\t\t((Window) get(i)).dispose();\r\n\t\t\t\t}\r\n\t\t\t\tif (item instanceof CompleteObject) {\r\n\t\t\t\t\t((CompleteObject) get(i)).finalize();\r\n\t\t\t\t}\r\n\t\t\t\tset(i, null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n&lt;sup&gt;(`CompleteObject` is an interface I made that lets you specify that you&#39;ve implemented rarely-implemented `Object` methods like `#finalize()`, `#hashCode()`, and `#clone()`)&lt;/sup&gt;\r\n\r\nSo, using a sister `#setDestructivelyFinalizes(boolean)` method, the program using my collection can (help) guarantee that destroying a reference to this collection also destroys references to its contents and disposes any windows that might keep the JVM alive unintentionally. I considered also stopping any threads, but that opened a whole new can of worms.","title":"Why would you ever implement finalize()?","body":"<p>Personally, I almost never used <code>finalize()</code> except in one rare circumstance: I made a custom generic-type collection, and I wrote a custom <code>finalize()</code> method that does the following:</p>\n\n<pre><code>public void finalize() throws Throwable {\n    super.finalize();\n    if (destructiveFinalize) {\n        T item;\n        for (int i = 0, l = length(); i &lt; l; i++) {\n            item = get(i);\n            if (item == null) {\n                continue;\n            }\n            if (item instanceof Window) {\n                ((Window) get(i)).dispose();\n            }\n            if (item instanceof CompleteObject) {\n                ((CompleteObject) get(i)).finalize();\n            }\n            set(i, null);\n        }\n    }\n}\n</code></pre>\n\n<p><sup>(<code>CompleteObject</code> is an interface I made that lets you specify that you've implemented rarely-implemented <code>Object</code> methods like <code>#finalize()</code>, <code>#hashCode()</code>, and <code>#clone()</code>)</sup></p>\n\n<p>So, using a sister <code>#setDestructivelyFinalizes(boolean)</code> method, the program using my collection can (help) guarantee that destroying a reference to this collection also destroys references to its contents and disposes any windows that might keep the JVM alive unintentionally. I considered also stopping any threads, but that opened a whole new can of worms.</p>\n"},{"tags":[],"owner":{"account_id":1257650,"reputation":23479,"user_id":1216775,"accept_rate":54,"display_name":"akhil_mittal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553327433,"creation_date":1435118066,"answer_id":31017317,"question_id":158174,"body_markdown":"The resources (File, Socket, Stream etc.) need to be closed once we are done with them. They generally have `close()` method which we generally call in `finally` section of `try-catch` statements. Sometimes `finalize()` can also be used by few developers but IMO that is not a suitable way as there is no guarantee that finalize will be called always.\r\n\r\nIn Java 7 we have got [try-with-resources][1] statement which can be used like:\r\n\r\n    try (BufferedReader br = new BufferedReader(new FileReader(path))) {\r\n      // Processing and other logic here.\r\n    } catch (Exception e) {\r\n      // log exception\r\n    } finally {\r\n      // Just in case we need to do some stuff here.\r\n    }\r\nIn the above example try-with-resource will automatically close the resource `BufferedReader` by invoking `close()` method. If we want we can also implement [Closeable][2] in our own classes and use it in similar way. IMO it seems more neat and simple to understand.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/io/Closeable.html","title":"Why would you ever implement finalize()?","body":"<p>The resources (File, Socket, Stream etc.) need to be closed once we are done with them. They generally have <code>close()</code> method which we generally call in <code>finally</code> section of <code>try-catch</code> statements. Sometimes <code>finalize()</code> can also be used by few developers but IMO that is not a suitable way as there is no guarantee that finalize will be called always.</p>\n\n<p>In Java 7 we have got <a href=\"http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">try-with-resources</a> statement which can be used like:</p>\n\n<pre><code>try (BufferedReader br = new BufferedReader(new FileReader(path))) {\n  // Processing and other logic here.\n} catch (Exception e) {\n  // log exception\n} finally {\n  // Just in case we need to do some stuff here.\n}\n</code></pre>\n\n<p>In the above example try-with-resource will automatically close the resource <code>BufferedReader</code> by invoking <code>close()</code> method. If we want we can also implement <a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/Closeable.html\" rel=\"nofollow noreferrer\">Closeable</a> in our own classes and use it in similar way. IMO it seems more neat and simple to understand.</p>\n"},{"tags":[],"owner":{"account_id":4803880,"reputation":2185,"user_id":4589003,"accept_rate":57,"display_name":"Sudip Bhandari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553327412,"creation_date":1528096837,"answer_id":50675231,"question_id":158174,"body_markdown":"As a side note:\r\n\r\n&gt; An object that overrides finalize() is treated specially by the garbage collector. Usually, an object is immediately destroyed during the collection cycle after the object is no longer in scope. However, finalizable objects are instead moved to a queue, where separate finalization threads will drain the queue and run the finalize() method on each object. Once the finalize() method terminates, the object will at last be ready for garbage collection in the next cycle.\r\n\r\nSource: [finalize() deprecated on java-9][1]\r\n\r\n\r\n  [1]: https://www.infoq.com/news/2017/03/Java-Finalize-Deprecated#mainLogin","title":"Why would you ever implement finalize()?","body":"<p>As a side note:</p>\n\n<blockquote>\n  <p>An object that overrides finalize() is treated specially by the garbage collector. Usually, an object is immediately destroyed during the collection cycle after the object is no longer in scope. However, finalizable objects are instead moved to a queue, where separate finalization threads will drain the queue and run the finalize() method on each object. Once the finalize() method terminates, the object will at last be ready for garbage collection in the next cycle.</p>\n</blockquote>\n\n<p>Source: <a href=\"https://www.infoq.com/news/2017/03/Java-Finalize-Deprecated#mainLogin\" rel=\"nofollow noreferrer\">finalize() deprecated on java-9</a></p>\n"}],"owner":{"account_id":5334,"reputation":8391,"user_id":8528,"accept_rate":81,"display_name":"Spencer Kormos"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107287,"favorite_count":0,"down_vote_count":0,"up_vote_count":394,"accepted_answer_id":158216,"answer_count":21,"score":394,"last_activity_date":1635983631,"creation_date":1222874529,"question_id":158174,"body_markdown":"I&#39;ve been reading through a lot of the rookie Java questions on `finalize()` and find it kind of bewildering that no one has really made it plain that finalize() is an unreliable way to clean up resources.  I saw someone comment that they use it to clean up Connections, which is really scary since the only way to come as close to a guarantee that a Connection is closed is to implement try (catch) finally.  \r\n\r\nI was not schooled in CS, but I have been programming in Java professionally for close to a decade now and I have never seen anyone implement `finalize()` in a production system ever.  This still doesn&#39;t mean that it doesn&#39;t have its uses, or that people I&#39;ve worked with have been doing it right.\r\n\r\nSo my question is, what use cases are there for implementing `finalize()` that cannot be handled more reliably via another process or syntax within the language?  \r\n\r\nPlease provide specific scenarios or your experience, simply repeating a Java text book, or finalize&#39;s intended use is not enough, as is not the intent of this question.","title":"Why would you ever implement finalize()?","body":"<p>I've been reading through a lot of the rookie Java questions on <code>finalize()</code> and find it kind of bewildering that no one has really made it plain that finalize() is an unreliable way to clean up resources.  I saw someone comment that they use it to clean up Connections, which is really scary since the only way to come as close to a guarantee that a Connection is closed is to implement try (catch) finally.  </p>\n\n<p>I was not schooled in CS, but I have been programming in Java professionally for close to a decade now and I have never seen anyone implement <code>finalize()</code> in a production system ever.  This still doesn't mean that it doesn't have its uses, or that people I've worked with have been doing it right.</p>\n\n<p>So my question is, what use cases are there for implementing <code>finalize()</code> that cannot be handled more reliably via another process or syntax within the language?  </p>\n\n<p>Please provide specific scenarios or your experience, simply repeating a Java text book, or finalize's intended use is not enough, as is not the intent of this question.</p>\n"},{"tags":["java","android","gradle","jar","aar"],"answers":[{"tags":[],"owner":{"account_id":3629749,"reputation":24734,"user_id":3026283,"accept_rate":90,"display_name":"H&#233;ctor"},"down_vote_count":0,"up_vote_count":53,"is_accepted":true,"score":53,"last_activity_date":1446712954,"creation_date":1446712954,"answer_id":33539941,"question_id":33445270,"body_markdown":"You can add this task:\r\n\r\n    task copyLibs(type: Copy) {\r\n        from configurations.compile\r\n        into &#39;libs&#39;\r\n    }\r\n\r\nDependencies will be downloaded from your Nexus, but when you need package the library, execute this task first and `jar` files will be copied and included inside final `aar`.","title":"How to include JAR dependency into an AAR library","body":"<p>You can add this task:</p>\n\n<pre><code>task copyLibs(type: Copy) {\n    from configurations.compile\n    into 'libs'\n}\n</code></pre>\n\n<p>Dependencies will be downloaded from your Nexus, but when you need package the library, execute this task first and <code>jar</code> files will be copied and included inside final <code>aar</code>.</p>\n"},{"tags":[],"owner":{"account_id":1070582,"reputation":181,"user_id":1069978,"display_name":"nayan"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1526963551,"creation_date":1526962239,"answer_id":50459656,"question_id":33445270,"body_markdown":"By default, AAR does not include any dependencies. Solution mentioned by @Hector should work for gradle plugin &lt; 3.0. For Gradle plugin 3.0+, try custom config as mentioned [here][1].\r\n\r\n\r\n    android { ... }\r\n\r\n    // Add a new configuration to hold your dependencies\r\n    configurations {\r\n        myConfig\r\n    }\r\n\r\n    dependencies {\r\n        ....\r\n        myConfig &#39;com.android.support:appcompat-v7:26.1.0&#39;\r\n        myConfig &#39;com.android.support:support-v4:26.1.0&#39;\r\n        ...\r\n    }\r\n\r\n    task copyLibs(type: Copy) {\r\n        from configurations.myConfig \r\n        into &quot;libs&quot;\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/50186687/1069978","title":"How to include JAR dependency into an AAR library","body":"<p>By default, AAR does not include any dependencies. Solution mentioned by @Hector should work for gradle plugin &lt; 3.0. For Gradle plugin 3.0+, try custom config as mentioned <a href=\"https://stackoverflow.com/a/50186687/1069978\">here</a>.</p>\n\n<pre><code>android { ... }\n\n// Add a new configuration to hold your dependencies\nconfigurations {\n    myConfig\n}\n\ndependencies {\n    ....\n    myConfig 'com.android.support:appcompat-v7:26.1.0'\n    myConfig 'com.android.support:support-v4:26.1.0'\n    ...\n}\n\ntask copyLibs(type: Copy) {\n    from configurations.myConfig \n    into \"libs\"\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4024867,"reputation":875,"user_id":3313614,"accept_rate":50,"display_name":"stepio"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1542894409,"creation_date":1541710294,"answer_id":53215936,"question_id":33445270,"body_markdown":"None of the suggestions helped me for Gradle 4.6, so I wasted the whole day inventing my own.\r\n\r\nEventually I found a good Gist and modified it for my version of Gradle:\r\nhttps://gist.github.com/stepio/824ef073447eb8d8d654f22d73f9f30b","title":"How to include JAR dependency into an AAR library","body":"<p>None of the suggestions helped me for Gradle 4.6, so I wasted the whole day inventing my own.</p>\n\n<p>Eventually I found a good Gist and modified it for my version of Gradle:\n<a href=\"https://gist.github.com/stepio/824ef073447eb8d8d654f22d73f9f30b\" rel=\"noreferrer\">https://gist.github.com/stepio/824ef073447eb8d8d654f22d73f9f30b</a></p>\n"},{"tags":[],"owner":{"account_id":15921623,"reputation":592,"user_id":11488462,"display_name":"Dirk Bolte"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1591641397,"creation_date":1591641397,"answer_id":62268991,"question_id":33445270,"body_markdown":"The upper ones didn&#39;t work for me in android tools 3.6.2 with Gradle. 5.6.1 . For anyone having the same issue, using https://github.com/kezong/fat-aar-android in the end worked fine for me.","title":"How to include JAR dependency into an AAR library","body":"<p>The upper ones didn't work for me in android tools 3.6.2 with Gradle. 5.6.1 . For anyone having the same issue, using <a href=\"https://github.com/kezong/fat-aar-android\" rel=\"nofollow noreferrer\">https://github.com/kezong/fat-aar-android</a> in the end worked fine for me.</p>\n"}],"owner":{"account_id":2235894,"reputation":1035,"user_id":1972296,"display_name":"rastadrian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35246,"favorite_count":0,"down_vote_count":0,"up_vote_count":38,"accepted_answer_id":33539941,"answer_count":4,"score":38,"last_activity_date":1635982393,"creation_date":1446240941,"question_id":33445270,"body_markdown":"**Summary:**\r\n\r\nI have an AAR file that depends on a JAR file, when I build the AAR project, it doesn&#39;t contain the JAR code.\r\n\r\n**Details:**\r\n\r\nI have a Java SDK library project that contains code that we use for Java web projects and such, this library is created using `Gradle` and resides in an internal nexus server (as a JAR).\r\n\r\nThe goal is to provide an &quot;Android configured&quot; version of this JAR library through an AAR library that multiple Android Applications can use and minimize the effort (and boilerplate code) to implement it. This AAR file is also uploaded to the nexus server to be used by the Android Application projects.\r\n\r\n**My AAR project includes a gradle dependency for my Java SDK library (the JAR) but when built, the AAR doesn&#39;t include any classes from it.**\r\n\r\n**Code:**\r\n\r\nThis is the Java SDK project&#39;s gradle file:\r\n\r\n    apply plugin: &#39;java&#39;\r\n    \r\n    //noinspection GroovyUnusedAssignment\r\n    sourceCompatibility = 1.7\r\n    version = &#39;1.1.1&#39;\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    jar {\r\n        from {\r\n            configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n        testCompile group: &#39;junit&#39;, name: &#39;junit&#39;, version: &#39;4.11&#39;\r\n        testCompile &#39;org.apache.directory.studio:org.apache.commons.io:2.4&#39;\r\n        compile &#39;org.springframework:spring-web:3.1.1.RELEASE&#39;\r\n        compile &#39;com.google.code.gson:gson:2.3&#39;\r\n    }\r\n\r\nThis is the gradle file for my AAR Project, note that I removed the Maven repository declarations to my nexus server from it. I guess it shouldn&#39;t matter for the sake of this question.\r\n\r\n    apply plugin: &#39;com.android.library&#39;\r\n    \r\n    android {\r\n        compileSdkVersion 23\r\n        buildToolsVersion &quot;23.0.1&quot;\r\n    \r\n        defaultConfig {\r\n            minSdkVersion 16\r\n            targetSdkVersion 23\r\n            versionCode 1\r\n            versionName &quot;2.2.2&quot;\r\n        }\r\n        buildTypes {\r\n            release {\r\n                minifyEnabled false\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n        }\r\n        lintOptions {\r\n            abortOnError false\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n        compile fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n        testCompile &#39;junit:junit:4.12&#39;\r\n        compile &#39;com.android.support:appcompat-v7:23.1.0&#39;\r\n    \r\n        compile (&#39;com.mycompany:javasdk:1.1.1&#39;)\r\n    }\r\n\r\nThis is the gradle file for my Android Project, again I removed the nexus server references:\r\n\r\n    apply plugin: &#39;com.android.application&#39;\r\n    \r\n    android {\r\n        compileSdkVersion 23\r\n        buildToolsVersion &quot;23.0.1&quot;\r\n    \r\n        defaultConfig {\r\n            applicationId &quot;com.mycompany.application1&quot;\r\n            minSdkVersion 16\r\n            targetSdkVersion 23\r\n            versionCode 1\r\n            versionName &quot;1.0&quot;\r\n        }\r\n        buildTypes {\r\n            release {\r\n                minifyEnabled false\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n        compile fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n        testCompile &#39;junit:junit:4.12&#39;\r\n        compile &#39;com.android.support:appcompat-v7:23.1.0&#39;\r\n\r\n        compile (&#39;com.mycompany:androidsdk:2.2.2@aar&#39;)\r\n    }\r\n\r\n**NOTE:** I initially solved the issue by adding the JAR in the lib directory of the AAR project, but this is undesired. It makes having a nexus server useless. It would be good that we can just bump the JAR&#39;s version number in the AAR project&#39;s gradle file and the update happens automatically at compile time.\r\n\r\n**NOTE2:** I tried adding `transitive=true` to my AAR dependency in the Android Project but it didn&#39;t solved anything, the real issue is that when building the AAR project, the JAR project code doesn&#39;t get bundled.\r\n","title":"How to include JAR dependency into an AAR library","body":"<p><strong>Summary:</strong></p>\n\n<p>I have an AAR file that depends on a JAR file, when I build the AAR project, it doesn't contain the JAR code.</p>\n\n<p><strong>Details:</strong></p>\n\n<p>I have a Java SDK library project that contains code that we use for Java web projects and such, this library is created using <code>Gradle</code> and resides in an internal nexus server (as a JAR).</p>\n\n<p>The goal is to provide an \"Android configured\" version of this JAR library through an AAR library that multiple Android Applications can use and minimize the effort (and boilerplate code) to implement it. This AAR file is also uploaded to the nexus server to be used by the Android Application projects.</p>\n\n<p><strong>My AAR project includes a gradle dependency for my Java SDK library (the JAR) but when built, the AAR doesn't include any classes from it.</strong></p>\n\n<p><strong>Code:</strong></p>\n\n<p>This is the Java SDK project's gradle file:</p>\n\n<pre><code>apply plugin: 'java'\n\n//noinspection GroovyUnusedAssignment\nsourceCompatibility = 1.7\nversion = '1.1.1'\n\nrepositories {\n    mavenCentral()\n}\n\njar {\n    from {\n        configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }\n    }\n}\n\ndependencies {\n    testCompile group: 'junit', name: 'junit', version: '4.11'\n    testCompile 'org.apache.directory.studio:org.apache.commons.io:2.4'\n    compile 'org.springframework:spring-web:3.1.1.RELEASE'\n    compile 'com.google.code.gson:gson:2.3'\n}\n</code></pre>\n\n<p>This is the gradle file for my AAR Project, note that I removed the Maven repository declarations to my nexus server from it. I guess it shouldn't matter for the sake of this question.</p>\n\n<pre><code>apply plugin: 'com.android.library'\n\nandroid {\n    compileSdkVersion 23\n    buildToolsVersion \"23.0.1\"\n\n    defaultConfig {\n        minSdkVersion 16\n        targetSdkVersion 23\n        versionCode 1\n        versionName \"2.2.2\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n    lintOptions {\n        abortOnError false\n    }\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    testCompile 'junit:junit:4.12'\n    compile 'com.android.support:appcompat-v7:23.1.0'\n\n    compile ('com.mycompany:javasdk:1.1.1')\n}\n</code></pre>\n\n<p>This is the gradle file for my Android Project, again I removed the nexus server references:</p>\n\n<pre><code>apply plugin: 'com.android.application'\n\nandroid {\n    compileSdkVersion 23\n    buildToolsVersion \"23.0.1\"\n\n    defaultConfig {\n        applicationId \"com.mycompany.application1\"\n        minSdkVersion 16\n        targetSdkVersion 23\n        versionCode 1\n        versionName \"1.0\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    testCompile 'junit:junit:4.12'\n    compile 'com.android.support:appcompat-v7:23.1.0'\n\n    compile ('com.mycompany:androidsdk:2.2.2@aar')\n}\n</code></pre>\n\n<p><strong>NOTE:</strong> I initially solved the issue by adding the JAR in the lib directory of the AAR project, but this is undesired. It makes having a nexus server useless. It would be good that we can just bump the JAR's version number in the AAR project's gradle file and the update happens automatically at compile time.</p>\n\n<p><strong>NOTE2:</strong> I tried adding <code>transitive=true</code> to my AAR dependency in the Android Project but it didn't solved anything, the real issue is that when building the AAR project, the JAR project code doesn't get bundled.</p>\n"},{"tags":["java","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"down_vote_count":0,"up_vote_count":89,"is_accepted":true,"score":89,"last_activity_date":1635980798,"creation_date":1238488266,"answer_id":700571,"question_id":700558,"body_markdown":"Quite the opposite.\r\n\r\nHibernate is an implementation of the Java Persistence API, and where possible, you should use the standard annotations (in javax.persistence). This way, you could theoretically run your code on other JPA implementations.\r\n\r\nOnly when you need Hibernate-specific functionality should you use the Hibernate annotations.\r\n\r\nThe extra dependency is only on the JPA interface/annotation jar files and very light.","title":"org.hibernate.annotations vs. javax.persistence","body":"<p>Quite the opposite.</p>\n<p>Hibernate is an implementation of the Java Persistence API, and where possible, you should use the standard annotations (in javax.persistence). This way, you could theoretically run your code on other JPA implementations.</p>\n<p>Only when you need Hibernate-specific functionality should you use the Hibernate annotations.</p>\n<p>The extra dependency is only on the JPA interface/annotation jar files and very light.</p>\n"},{"tags":[],"owner":{"account_id":880591,"reputation":123,"user_id":169209,"accept_rate":20,"display_name":"Mr Cold"},"down_vote_count":4,"up_vote_count":5,"is_accepted":false,"score":1,"last_activity_date":1364416131,"creation_date":1260781826,"answer_id":1899809,"question_id":700558,"body_markdown":"I used `javax.persistence` annotation, and when I replaced Tomcat 6.0 with my Glass Fish, then Tomcat 6.0 included another javax.persistence package that messed everything. I don&#39;t think it&#39;s a good idea to use `javax.persistence` annotation. God know what the hell happened with Tomcat and `javax.persistence`!","title":"org.hibernate.annotations vs. javax.persistence","body":"<p>I used <code>javax.persistence</code> annotation, and when I replaced Tomcat 6.0 with my Glass Fish, then Tomcat 6.0 included another javax.persistence package that messed everything. I don't think it's a good idea to use <code>javax.persistence</code> annotation. God know what the hell happened with Tomcat and <code>javax.persistence</code>!</p>\n"},{"tags":[],"owner":{"account_id":57788,"reputation":46110,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1552249652,"creation_date":1374076622,"answer_id":17704634,"question_id":700558,"body_markdown":"Another cons in:\r\n\r\n  http://www.mkyong.com/hibernate/cascade-jpa-hibernate-annotation-common-mistake/\r\n\r\nwhere this:\r\n\r\n    @OneToMany(fetch = FetchType.LAZY, \r\n      cascade = {CascadeType.PERSIST,CascadeType.MERGE }, \r\n      mappedBy = &quot;stock&quot;)\r\n    public Set&lt;StockDailyRecord&gt; getStockDailyRecords() {\r\n\t    return this.stockDailyRecords;\r\n    }\r\n\r\nwith this:\r\n\r\n    stockDailyRecords.setStock(stock);        \r\n    stock.getStockDailyRecords().add(stockDailyRecords);\r\n \r\n    session.save(stock);\r\n    session.getTransaction().commit();\r\n\r\nwon&#39;t work as `@OneToMany` is from JPA, it expects a JPA cascade – `javax.persistence.CascadeType`. However when you save it with Hibernate session, `org.hibernate.engine.Cascade` will do the following check:\r\n\r\n    if ( style.doCascade( action ) ) {\r\n\r\nand Hibernate save process will causing a `ACTION_SAVE_UPDATE` action, but the JPA will pass a `ACTION_PERSIST` and `ACTION_MERGE`, it will not match and cause the cascade to fail to execute.","title":"org.hibernate.annotations vs. javax.persistence","body":"<p>Another cons in:</p>\n\n<p><a href=\"http://www.mkyong.com/hibernate/cascade-jpa-hibernate-annotation-common-mistake/\" rel=\"nofollow noreferrer\">http://www.mkyong.com/hibernate/cascade-jpa-hibernate-annotation-common-mistake/</a></p>\n\n<p>where this:</p>\n\n<pre><code>@OneToMany(fetch = FetchType.LAZY, \n  cascade = {CascadeType.PERSIST,CascadeType.MERGE }, \n  mappedBy = \"stock\")\npublic Set&lt;StockDailyRecord&gt; getStockDailyRecords() {\n    return this.stockDailyRecords;\n}\n</code></pre>\n\n<p>with this:</p>\n\n<pre><code>stockDailyRecords.setStock(stock);        \nstock.getStockDailyRecords().add(stockDailyRecords);\n\nsession.save(stock);\nsession.getTransaction().commit();\n</code></pre>\n\n<p>won't work as <code>@OneToMany</code> is from JPA, it expects a JPA cascade – <code>javax.persistence.CascadeType</code>. However when you save it with Hibernate session, <code>org.hibernate.engine.Cascade</code> will do the following check:</p>\n\n<pre><code>if ( style.doCascade( action ) ) {\n</code></pre>\n\n<p>and Hibernate save process will causing a <code>ACTION_SAVE_UPDATE</code> action, but the JPA will pass a <code>ACTION_PERSIST</code> and <code>ACTION_MERGE</code>, it will not match and cause the cascade to fail to execute.</p>\n"},{"tags":[],"owner":{"account_id":1192085,"reputation":576,"user_id":1164614,"display_name":"Lord"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1378471416,"creation_date":1378469786,"answer_id":18657691,"question_id":700558,"body_markdown":"Officially recommended to mix JPA and Hibernate annotations in the case of setting cascading options, see\r\n[Hibernate docs. 2.4.7. Cascade][1]. If you using only JPA annotations, in case of unidirectional mapping (no field of Foo type in Employer.java) you still getting &quot;cannot save transient object Employer&quot; in the call session.SaveOrUpdate. Cure is using hibernate-style @Cascade together with cascade={...}:\r\n\r\n    class Foo {\r\n         @OneToMany( cascade = {CascadeType.PERSIST, CascadeType.MERGE} )\r\n         @Cascade(org.hibernate.annotations.CascadeType.REPLICATE)\r\n         public Collection&lt;Employer&gt; getEmployers()\r\n    ...\r\n    }\r\n\r\n  [1]: http://docs.jboss.org/hibernate/stable/annotations/reference/en/html/entity.html#entity-hibspec-cascade &quot;Hibernate docs. 2.4.7. Cascade&quot;","title":"org.hibernate.annotations vs. javax.persistence","body":"<p>Officially recommended to mix JPA and Hibernate annotations in the case of setting cascading options, see\n<a href=\"http://docs.jboss.org/hibernate/stable/annotations/reference/en/html/entity.html#entity-hibspec-cascade\" rel=\"nofollow\" title=\"Hibernate docs. 2.4.7. Cascade\">Hibernate docs. 2.4.7. Cascade</a>. If you using only JPA annotations, in case of unidirectional mapping (no field of Foo type in Employer.java) you still getting \"cannot save transient object Employer\" in the call session.SaveOrUpdate. Cure is using hibernate-style @Cascade together with cascade={...}:</p>\n\n<pre><code>class Foo {\n     @OneToMany( cascade = {CascadeType.PERSIST, CascadeType.MERGE} )\n     @Cascade(org.hibernate.annotations.CascadeType.REPLICATE)\n     public Collection&lt;Employer&gt; getEmployers()\n...\n}\n</code></pre>\n"}],"owner":{"display_name":"anon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31060,"favorite_count":0,"down_vote_count":0,"up_vote_count":62,"accepted_answer_id":700571,"answer_count":4,"score":62,"last_activity_date":1635980798,"creation_date":1238488000,"question_id":700558,"body_markdown":"Is it a bad idea to use the annotations from the \r\n\r\n&gt; javax.persistence package\r\n\r\ninstead of using the \r\n\r\n&gt; org.hibernate.annotations annotations\r\n\r\nI know that using `javax.peristence` does introduce yet another dependency. But if I ignore that, what are the pros/cons?","title":"org.hibernate.annotations vs. javax.persistence","body":"<p>Is it a bad idea to use the annotations from the </p>\n\n<blockquote>\n  <p>javax.persistence package</p>\n</blockquote>\n\n<p>instead of using the </p>\n\n<blockquote>\n  <p>org.hibernate.annotations annotations</p>\n</blockquote>\n\n<p>I know that using <code>javax.peristence</code> does introduce yet another dependency. But if I ignore that, what are the pros/cons?</p>\n"},{"tags":["java","operator-overloading"],"answers":[{"tags":[],"owner":{"account_id":339701,"reputation":4025,"user_id":669337,"accept_rate":64,"display_name":"M S"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1323001713,"creation_date":1323001207,"answer_id":8375241,"question_id":8375229,"body_markdown":"You cannot do this in Java because there is no operator overloading in Java. \r\n\r\nYou have to use the second option you have mentioned:\r\n\r\n\r\nEdit: You can add the `Add` method in the Point class itself\r\n\r\n    public Point Add(Point other){\r\n        return new Point(this.x + other.x, this.y + other.y);\r\n    }\r\n","title":"Is it possible to overload operators in Java?","body":"<p>You cannot do this in Java because there is no operator overloading in Java. </p>\n\n<p>You have to use the second option you have mentioned:</p>\n\n<p>Edit: You can add the <code>Add</code> method in the Point class itself</p>\n\n<pre><code>public Point Add(Point other){\n    return new Point(this.x + other.x, this.y + other.y);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":62061,"reputation":76774,"user_id":184600,"accept_rate":89,"display_name":"maček"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1323001928,"creation_date":1323001324,"answer_id":8375257,"question_id":8375229,"body_markdown":"You cannot do this in Java. You&#39;d have to implement a `plus` or `add` method in your `Point` class.\r\n\r\n    class Point{\r\n        public double x;\r\n        public double y;\r\n    \r\n        public Point(int x, int y){\r\n            this.x = x;\r\n            this.y = y;\r\n        }\r\n    \r\n        public Point add(Point other){\r\n            this.x += other.x;\r\n            this.y += other.y;\r\n            return this;\r\n        }\r\n    }\r\n\r\nusage\r\n\r\n    Point a = new Point(1,1);\r\n    Point b = new Point(2,2);\r\n    a.add(b);  //=&gt; (3,3)\r\n\r\n    // because method returns point, you can chain `add` calls\r\n    // e.g., a.add(b).add(c)\r\n  ","title":"Is it possible to overload operators in Java?","body":"<p>You cannot do this in Java. You'd have to implement a <code>plus</code> or <code>add</code> method in your <code>Point</code> class.</p>\n\n<pre><code>class Point{\n    public double x;\n    public double y;\n\n    public Point(int x, int y){\n        this.x = x;\n        this.y = y;\n    }\n\n    public Point add(Point other){\n        this.x += other.x;\n        this.y += other.y;\n        return this;\n    }\n}\n</code></pre>\n\n<p>usage</p>\n\n<pre><code>Point a = new Point(1,1);\nPoint b = new Point(2,2);\na.add(b);  //=&gt; (3,3)\n\n// because method returns point, you can chain `add` calls\n// e.g., a.add(b).add(c)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":177240,"reputation":1954,"user_id":408440,"display_name":"Maxim Manco"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1323003934,"creation_date":1323002060,"answer_id":8375315,"question_id":8375229,"body_markdown":"You cannot overload operators in java. You will need handle this in `Point` class.","title":"Is it possible to overload operators in Java?","body":"<p>You cannot overload operators in java. You will need handle this in <code>Point</code> class.</p>\n"},{"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1323004062,"creation_date":1323004062,"answer_id":8375501,"question_id":8375229,"body_markdown":"There is no operator overloading in Java. Apparently for reasons of taste. Pity really.\r\n\r\n(Some people will claim that Java does have overloading, because of `+` with `String` and perhaps autoboxing/unboxing.)\r\n\r\nLet&#39;s talk about value types.\r\n\r\nMany early classes (and some later ones) make a right mess of this. Particularly in AWT. In AWT you should be explicitly making copies of simple values all over the place. Almost certainly you want to make value types immutable - the class should be final and it should never change state (generally all `final` fields pointing to effective immutables).\r\n\r\nSo:\r\n\r\n    public final class Point {\r\n        private final int x;\r\n        private final int y;\r\n\r\n        private Point(int x, int y) {\r\n            this.x = x;\r\n            this.y = y;\r\n        }\r\n\r\n        public static of(int x, int y) {\r\n            return new Point(x, y);\r\n        }\r\n\r\n        public int x() {\r\n            return x;\r\n        }\r\n        public int y() {\r\n            return y;\r\n        }\r\n        public Point add(Point other) {\r\n            return of(x+other.x, y+other.y);\r\n        }\r\n\r\n        // Standard fluffy bits:\r\n        @Override public int hashCode() {\r\n            return x + 37*y;\r\n        }\r\n        @Override public boolean equals(Object obj) {\r\n            if (!(obj instanceof Point)) {\r\n                return false;\r\n            }\r\n            Point other = (Point)obj;\r\n            return x==other.x &amp;&amp; y==other.y;\r\n        }\r\n        @Override public String toString() {\r\n            return &quot;(&quot;+x+&quot;, &quot;+y+&quot;)&quot;;\r\n        }\r\n    }\r\n\r\nThe original code was confused between  `int` and `double`, so I&#39;ve chosen one. If you used `double` you should exclude `NaN`. &quot;Point&quot; tends to imply an absolute point, which doesn&#39;t make sense to add. &quot;Vector&quot; or &quot;dimension&quot; would probably be more appropriate, depending upon what you intend.\r\n\r\nI&#39;ve hidden the constructor, as identity is not important. Possibly values could be cached. Possibly it is, say, common to add a point to a zero point, so no points need to be created.\r\n\r\nIt&#39;s possible you might want a mutable version, for example to use as an accumulator. This should be a separate class without an inheritance relationship. Probably not in simple cases, but I&#39;ll show it anyway:\r\n\r\n    public final class PointBuilder {\r\n        private int x;\r\n        private int y;\r\n\r\n        public PointBuilder() {\r\n        }\r\n        public PointBuilder(Point point) {\r\n            this.x = point.x;\r\n            this.y = point.y;\r\n        }\r\n        public Point toPoint() {\r\n            return new Point(x, y);\r\n        }\r\n\r\n        public PointBuilder x(int x) {\r\n            this.x = x;\r\n            return this;\r\n        }\r\n        public PointBuilder y(int y) {\r\n            this.y = y;\r\n            return this;\r\n        }\r\n        public PointBuilder add(Point other) {\r\n            this.x += other.x;\r\n            this.y += other.y;\r\n            return this;\r\n        }\r\n    }\r\n","title":"Is it possible to overload operators in Java?","body":"<p>There is no operator overloading in Java. Apparently for reasons of taste. Pity really.</p>\n\n<p>(Some people will claim that Java does have overloading, because of <code>+</code> with <code>String</code> and perhaps autoboxing/unboxing.)</p>\n\n<p>Let's talk about value types.</p>\n\n<p>Many early classes (and some later ones) make a right mess of this. Particularly in AWT. In AWT you should be explicitly making copies of simple values all over the place. Almost certainly you want to make value types immutable - the class should be final and it should never change state (generally all <code>final</code> fields pointing to effective immutables).</p>\n\n<p>So:</p>\n\n<pre><code>public final class Point {\n    private final int x;\n    private final int y;\n\n    private Point(int x, int y) {\n        this.x = x;\n        this.y = y;\n    }\n\n    public static of(int x, int y) {\n        return new Point(x, y);\n    }\n\n    public int x() {\n        return x;\n    }\n    public int y() {\n        return y;\n    }\n    public Point add(Point other) {\n        return of(x+other.x, y+other.y);\n    }\n\n    // Standard fluffy bits:\n    @Override public int hashCode() {\n        return x + 37*y;\n    }\n    @Override public boolean equals(Object obj) {\n        if (!(obj instanceof Point)) {\n            return false;\n        }\n        Point other = (Point)obj;\n        return x==other.x &amp;&amp; y==other.y;\n    }\n    @Override public String toString() {\n        return \"(\"+x+\", \"+y+\")\";\n    }\n}\n</code></pre>\n\n<p>The original code was confused between  <code>int</code> and <code>double</code>, so I've chosen one. If you used <code>double</code> you should exclude <code>NaN</code>. \"Point\" tends to imply an absolute point, which doesn't make sense to add. \"Vector\" or \"dimension\" would probably be more appropriate, depending upon what you intend.</p>\n\n<p>I've hidden the constructor, as identity is not important. Possibly values could be cached. Possibly it is, say, common to add a point to a zero point, so no points need to be created.</p>\n\n<p>It's possible you might want a mutable version, for example to use as an accumulator. This should be a separate class without an inheritance relationship. Probably not in simple cases, but I'll show it anyway:</p>\n\n<pre><code>public final class PointBuilder {\n    private int x;\n    private int y;\n\n    public PointBuilder() {\n    }\n    public PointBuilder(Point point) {\n        this.x = point.x;\n        this.y = point.y;\n    }\n    public Point toPoint() {\n        return new Point(x, y);\n    }\n\n    public PointBuilder x(int x) {\n        this.x = x;\n        return this;\n    }\n    public PointBuilder y(int y) {\n        this.y = y;\n        return this;\n    }\n    public PointBuilder add(Point other) {\n        this.x += other.x;\n        this.y += other.y;\n        return this;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":229431,"reputation":2557,"user_id":492390,"display_name":"mart"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1635980608,"creation_date":1337702198,"answer_id":10705644,"question_id":8375229,"body_markdown":"Despite you can&#39;t do it in pure java you can do it using [java-oo compiler plugin][1].\r\nYou need to write _add_ method for + operator:\r\n\r\n    public Point add(Point other){\r\n       return new Point(this.x + other.x, this.y + other.y);\r\n    }\r\n\r\nand java-oo plugin just desugar operators to these method calls.\r\n\r\n  [1]: https://github.com/amelentev/java-oo","title":"Is it possible to overload operators in Java?","body":"<p>Despite you can't do it in pure java you can do it using <a href=\"https://github.com/amelentev/java-oo\" rel=\"nofollow noreferrer\">java-oo compiler plugin</a>.\nYou need to write <em>add</em> method for + operator:</p>\n<pre><code>public Point add(Point other){\n   return new Point(this.x + other.x, this.y + other.y);\n}\n</code></pre>\n<p>and java-oo plugin just desugar operators to these method calls.</p>\n"},{"tags":[],"owner":{"account_id":1739936,"reputation":168,"user_id":1591625,"display_name":"Yuhta"},"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1378174766,"creation_date":1378174766,"answer_id":18583129,"question_id":8375229,"body_markdown":"You cannot override operators in Java.  That&#39;s one of the reasons why any nontrival math (especially geometric) operations should not be implemented in Java (the `Point` class above is kind of such a class, if you want it to do some real work, for example a line-line intersection, you&#39;d better do it in C++).","title":"Is it possible to overload operators in Java?","body":"<p>You cannot override operators in Java.  That's one of the reasons why any nontrival math (especially geometric) operations should not be implemented in Java (the <code>Point</code> class above is kind of such a class, if you want it to do some real work, for example a line-line intersection, you'd better do it in C++).</p>\n"}],"owner":{"account_id":399082,"reputation":6427,"user_id":764182,"accept_rate":57,"display_name":"Dmitry Belaventsev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52255,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"closed_date":1506246622,"answer_count":6,"score":26,"last_activity_date":1635980608,"creation_date":1323001096,"question_id":8375229,"body_markdown":"I have the following class, which describe one point on XY surface:\r\n\r\n    class Point{\r\n    \tdouble x;\r\n    \tdouble y;\r\n    \t\r\n    \tpublic Point(int x, int y){\r\n    \t\tthis.x = x;\r\n    \t\tthis.y = y;\r\n    \t}\r\n    }\r\n\r\nSo I want to overlad `+` and `-` operators to have possibility write run following code:\r\n\r\n    Point p1 = new Point(1, 2);\r\n    Point p2 = new Point(3, 4);\r\n    Point resAdd = p1 + p2; // answer (4, 6)\r\n    Point resSub = p1 - p2; // answer (-2, -2)\r\n\r\nHow can I do it in Java? Or I should use methods like this:\r\n\r\n    public Point Add(Point p1, Point p2){\r\n    \treturn new Point(p1.x + p2.x, p1.y + p2.y);\r\n    }\r\n\r\nThanks in advance!","title":"Is it possible to overload operators in Java?","body":"<p>I have the following class, which describe one point on XY surface:</p>\n\n<pre><code>class Point{\n    double x;\n    double y;\n\n    public Point(int x, int y){\n        this.x = x;\n        this.y = y;\n    }\n}\n</code></pre>\n\n<p>So I want to overlad <code>+</code> and <code>-</code> operators to have possibility write run following code:</p>\n\n<pre><code>Point p1 = new Point(1, 2);\nPoint p2 = new Point(3, 4);\nPoint resAdd = p1 + p2; // answer (4, 6)\nPoint resSub = p1 - p2; // answer (-2, -2)\n</code></pre>\n\n<p>How can I do it in Java? Or I should use methods like this:</p>\n\n<pre><code>public Point Add(Point p1, Point p2){\n    return new Point(p1.x + p2.x, p1.y + p2.y);\n}\n</code></pre>\n\n<p>Thanks in advance!</p>\n"},{"tags":["java","methods","compiler-errors","runtime-error"],"comments":[{"owner":{"account_id":12223265,"reputation":8608,"user_id":8921755,"display_name":"Ivan"},"score":0,"creation_date":1635899082,"post_id":69818319,"comment_id":123414264,"body_markdown":"Moat likely input provided by codezinger is not what your code expects.","body":"Moat likely input provided by codezinger is not what your code expects."},{"owner":{"account_id":23090422,"reputation":3,"user_id":17201372,"display_name":"imnfrhn"},"score":0,"creation_date":1635899293,"post_id":69818319,"comment_id":123414305,"body_markdown":"i have add the sample input above, it only ask for the character and double number","body":"i have add the sample input above, it only ask for the character and double number"},{"owner":{"account_id":12223265,"reputation":8608,"user_id":8921755,"display_name":"Ivan"},"score":0,"creation_date":1635900372,"post_id":69818319,"comment_id":123414472,"body_markdown":"So now you can run your code in eclipse with that input and use debugger to identify the issue.","body":"So now you can run your code in eclipse with that input and use debugger to identify the issue."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635900326,"creation_date":1635900326,"answer_id":69818464,"question_id":69818319,"body_markdown":"You&#39;re either lying or you&#39;re no good at testing. For example, the very example input you pasted wouldn&#39;t work, even in eclipse.\r\n\r\nYour do/while loop __runs forever__. It has no stop condition at all: No break, and the `while` condition of `N != 0` will never fail to be `true`, as you never modify `N`. Your error is that you&#39;re supposed to re-read N at the top of that `do` loop, instead of _before_ it. Every segment in the input starts with a number indicating how many operations follow (with `0` being used to terminate the app). You only read the first such number.\r\n\r\nFix that and this code will work fine... probably, there is one more small issue:\r\n\r\nSeparately, that `sc.nextLine()` is not useful to this code and dangerous in that it can mess with reading the input depending on precisely how codezinger is providing it to you. Note that a very large amount of tutorials on scanner and keyboard input out there, including most SO answers, erroneously suggesting you run `sc.nextLine()` after every input. Do not do this&lt;sup&gt;1&lt;/sup&gt;.\r\n\r\n1) Not relevant to this question, but I better back up such a statement: If you want keyboard input where hitting enter separates input, instead configure the scanner properly (use `scanner.useDelimiter(&quot;\\\\R&quot;)`, call `scanner.next()` to get a line of text, and don&#39;t ever call `.nextLine()`). This is much simpler (no need to remember to toss those pointless `nextLine()` in there) can read blank input, and will not fail if the user tries to separate things with spaces instead of newlines.\r\n","title":"How to break while loop Java","body":"<p>You're either lying or you're no good at testing. For example, the very example input you pasted wouldn't work, even in eclipse.</p>\n<p>Your do/while loop <strong>runs forever</strong>. It has no stop condition at all: No break, and the <code>while</code> condition of <code>N != 0</code> will never fail to be <code>true</code>, as you never modify <code>N</code>. Your error is that you're supposed to re-read N at the top of that <code>do</code> loop, instead of <em>before</em> it. Every segment in the input starts with a number indicating how many operations follow (with <code>0</code> being used to terminate the app). You only read the first such number.</p>\n<p>Fix that and this code will work fine... probably, there is one more small issue:</p>\n<p>Separately, that <code>sc.nextLine()</code> is not useful to this code and dangerous in that it can mess with reading the input depending on precisely how codezinger is providing it to you. Note that a very large amount of tutorials on scanner and keyboard input out there, including most SO answers, erroneously suggesting you run <code>sc.nextLine()</code> after every input. Do not do this<sup>1</sup>.</p>\n<ol>\n<li>Not relevant to this question, but I better back up such a statement: If you want keyboard input where hitting enter separates input, instead configure the scanner properly (use <code>scanner.useDelimiter(&quot;\\\\R&quot;)</code>, call <code>scanner.next()</code> to get a line of text, and don't ever call <code>.nextLine()</code>). This is much simpler (no need to remember to toss those pointless <code>nextLine()</code> in there) can read blank input, and will not fail if the user tries to separate things with spaces instead of newlines.</li>\n</ol>\n"}],"owner":{"account_id":23090422,"reputation":3,"user_id":17201372,"display_name":"imnfrhn"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":120,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1635980575,"creation_date":1635898691,"question_id":69818319,"body_markdown":"At the main class:\r\n\r\n    Exception in thread &quot;main&quot; java.util.NoSuchElementException at this line char character = sc.next().charAt(0);\r\nand\r\n\r\n    input mismatched at line: double pay=sc.nextDouble();\r\n\r\nThe problem occurs because I didn&#39;t break my while loop. The answer has been updated\r\n\r\nThe input at Codezinger;\r\n\r\n    5  \r\n    =  \r\n    - 0.70  \r\n    - 2.40   \r\n    - 1.20   \r\n    + 20.00   \r\n    3  \r\n    - 5.00   \r\n    - 0.50    \r\n    =    \r\n    0\r\n\r\nThe main class:\r\n\r\n    import java.text.DecimalFormat;\r\n    import java.util.Scanner;\r\n\r\n    public class TestMyPrintCard {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tScanner sc = new Scanner(System.in);\r\n    \t\tint x = 1;\r\n    \t\tDecimalFormat df = new DecimalFormat(&quot;0.00&quot;);\r\n\r\n    \t\tint N = sc.nextInt();\r\n    \t\tsc.nextLine();\r\n\r\n    \t\tdo {\r\n    \t\t    System.out.println(&quot;Case #&quot; + x + &quot;:&quot;);\r\n    \t\t    MyPrintCard c1 = new MyPrintCard(); \r\n\r\n    \t\t    for (int i = 0; i &lt;= N; i++) {\r\n    \t\t        char character = sc.next().charAt(0); // char input =,+,- // PROBLEM HERE\r\n    \t\t        if (character == &#39;=&#39; ) {\r\n    \t\t\t        System.out.println(&quot;RM&quot; + df.format(c1.getBalance()));\r\n    \t\t        } else if (character == &#39;+&#39;) {\t\t\r\n    \t\t\t        double topup = sc.nextDouble();\r\n    \t\t\t        c1.topupCard(topup);\r\n    \t\t        } else if (character == &#39;-&#39;) {\r\n    \t\t\t        double pay = sc.nextDouble(); // PROBLEM HERE\r\n    \t\t\t        c1.payService(pay);\t\t\t\t\r\n    \t\t        } \t\r\n    \t\t    } //end for\r\n\r\n    \t\t    x++;\r\n            } while (N != 0);\t\r\n        }\r\n    }\r\n\r\nThe class:\r\n\r\n    import java.text.DecimalFormat;\r\n\r\n    public class MyPrintCard {\r\n    \tprivate double balance; //declare\r\n    \tDecimalFormat df = new DecimalFormat(&quot;0.00&quot;);\r\n    \t\r\n    \tMyPrintCard() { //constructor initialized\r\n    \t\tbalance = 10.00;\t\t\r\n    \t}\r\n    \t\r\n    \t//getter\r\n    \tpublic double getBalance() {\r\n    \t\treturn balance;\r\n    \t}\r\n    \t\r\n    \tpublic void topupCard(double amt) {\r\n    \t\tbalance += amt;\r\n            System.out.println(&quot;RM&quot; + df.format(balance));    \t\t\r\n    \t}\r\n    \t\r\n    \tpublic void payService(double amt) {\t\r\n    \t\tif (balance &gt; 5) {\r\n    \t\t    balance -= amt;\r\n    \t\t\tSystem.out.println(&quot;RM&quot; + df.format(balance));\t\t\t\t\t\r\n    \t\t} else \t\t\r\n    \t\t\tSystem.out.println(&quot;invalid&quot;);\r\n    \t}\t\r\n    }\r\n\r\nThe correct answer for the main class:\r\n\r\n    import java.text.DecimalFormat;\r\n    import java.util.Scanner;\r\n\r\n    public class TestMyPrintCard {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tScanner sc = new Scanner(System.in);\r\n    \t\tint x = 1;\r\n    \t\tDecimalFormat df = new DecimalFormat(&quot;0.00&quot;);\r\n\r\n    \t\tint N = sc.nextInt();\r\n    \t\r\n    \t\twhile (N != 0) {\r\n    \t\t    System.out.println(&quot;Case #&quot; + x + &quot;:&quot;);\r\n    \t\t    MyPrintCard c1 = new MyPrintCard(); \r\n    \t\t    for (int i = 0; i &lt; N; i++) {\r\n    \t\t        char character = sc.next().charAt(0); // for the character input, =,+,-\r\n    \t\t        if (character == &#39;=&#39; ) {\r\n    \t\t\t        System.out.println(&quot;RM&quot; + df.format(c1.getBalance()));\r\n    \t\t        } else if (character == &#39;+&#39;) {\t\t\r\n    \t\t\t        double topup = sc.nextDouble();\r\n    \t\t\t        c1.topupCard(topup);\r\n    \t\t        } else if (character == &#39;-&#39;) {\r\n    \t\t\t        double pay = sc.nextDouble();\r\n    \t\t\t        c1.payService(pay);\r\n    \t\t        } \t\r\n    \t\t    } //end for\r\n\r\n    \t\t    N = sc.nextInt();\r\n    \t\t    x++;\r\n    \t\t}\r\n\r\n    \t\tsc.close();\r\n    \t}\r\n    }","title":"How to break while loop Java","body":"<p>At the main class:</p>\n<pre><code>Exception in thread &quot;main&quot; java.util.NoSuchElementException at this line char character = sc.next().charAt(0);\n</code></pre>\n<p>and</p>\n<pre><code>input mismatched at line: double pay=sc.nextDouble();\n</code></pre>\n<p>The problem occurs because I didn't break my while loop. The answer has been updated</p>\n<p>The input at Codezinger;</p>\n<pre><code>5  \n=  \n- 0.70  \n- 2.40   \n- 1.20   \n+ 20.00   \n3  \n- 5.00   \n- 0.50    \n=    \n0\n</code></pre>\n<p>The main class:</p>\n<pre><code>import java.text.DecimalFormat;\nimport java.util.Scanner;\n\npublic class TestMyPrintCard {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        int x = 1;\n        DecimalFormat df = new DecimalFormat(&quot;0.00&quot;);\n\n        int N = sc.nextInt();\n        sc.nextLine();\n\n        do {\n            System.out.println(&quot;Case #&quot; + x + &quot;:&quot;);\n            MyPrintCard c1 = new MyPrintCard(); \n\n            for (int i = 0; i &lt;= N; i++) {\n                char character = sc.next().charAt(0); // char input =,+,- // PROBLEM HERE\n                if (character == '=' ) {\n                    System.out.println(&quot;RM&quot; + df.format(c1.getBalance()));\n                } else if (character == '+') {      \n                    double topup = sc.nextDouble();\n                    c1.topupCard(topup);\n                } else if (character == '-') {\n                    double pay = sc.nextDouble(); // PROBLEM HERE\n                    c1.payService(pay);             \n                }   \n            } //end for\n\n            x++;\n        } while (N != 0);   \n    }\n}\n</code></pre>\n<p>The class:</p>\n<pre><code>import java.text.DecimalFormat;\n\npublic class MyPrintCard {\n    private double balance; //declare\n    DecimalFormat df = new DecimalFormat(&quot;0.00&quot;);\n    \n    MyPrintCard() { //constructor initialized\n        balance = 10.00;        \n    }\n    \n    //getter\n    public double getBalance() {\n        return balance;\n    }\n    \n    public void topupCard(double amt) {\n        balance += amt;\n        System.out.println(&quot;RM&quot; + df.format(balance));          \n    }\n    \n    public void payService(double amt) {    \n        if (balance &gt; 5) {\n            balance -= amt;\n            System.out.println(&quot;RM&quot; + df.format(balance));                  \n        } else      \n            System.out.println(&quot;invalid&quot;);\n    }   \n}\n</code></pre>\n<p>The correct answer for the main class:</p>\n<pre><code>import java.text.DecimalFormat;\nimport java.util.Scanner;\n\npublic class TestMyPrintCard {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        int x = 1;\n        DecimalFormat df = new DecimalFormat(&quot;0.00&quot;);\n\n        int N = sc.nextInt();\n    \n        while (N != 0) {\n            System.out.println(&quot;Case #&quot; + x + &quot;:&quot;);\n            MyPrintCard c1 = new MyPrintCard(); \n            for (int i = 0; i &lt; N; i++) {\n                char character = sc.next().charAt(0); // for the character input, =,+,-\n                if (character == '=' ) {\n                    System.out.println(&quot;RM&quot; + df.format(c1.getBalance()));\n                } else if (character == '+') {      \n                    double topup = sc.nextDouble();\n                    c1.topupCard(topup);\n                } else if (character == '-') {\n                    double pay = sc.nextDouble();\n                    c1.payService(pay);\n                }   \n            } //end for\n\n            N = sc.nextInt();\n            x++;\n        }\n\n        sc.close();\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":1,"creation_date":1635974576,"post_id":69831821,"comment_id":123438428,"body_markdown":"Weird that the instructions tell you to extract the right-most digit and then don&#39;t do anything else with it.","body":"Weird that the instructions tell you to extract the right-most digit and then don&#39;t do anything else with it."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1635974610,"post_id":69831821,"comment_id":123438443,"body_markdown":"Related - https://en.wikipedia.org/wiki/Luhn_algorithm","body":"Related - <a href=\"https://en.wikipedia.org/wiki/Luhn_algorithm\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Luhn_algorithm</a>"},{"owner":{"account_id":20708479,"reputation":11,"user_id":15205722,"display_name":"Sally Tuer"},"score":0,"creation_date":1635977124,"post_id":69831821,"comment_id":123439214,"body_markdown":"@user16320675 I did double every other digit ```digit *= 2``` or do you mean double the account number itself?","body":"@user16320675 I did double every other digit <code>digit *= 2</code> or do you mean double the account number itself?"},{"owner":{"account_id":20708479,"reputation":11,"user_id":15205722,"display_name":"Sally Tuer"},"score":0,"creation_date":1635977555,"post_id":69831821,"comment_id":123439310,"body_markdown":"@user16320675\n I also am not sure on how to go about the sum of all digits. When I tried adding the new digits to the account number then the validation proved both account numbers as invalid. Ignoring the unclear instructions, how would you go about writing this program?","body":"@user16320675  I also am not sure on how to go about the sum of all digits. When I tried adding the new digits to the account number then the validation proved both account numbers as invalid. Ignoring the unclear instructions, how would you go about writing this program?"},{"owner":{"account_id":20708479,"reputation":11,"user_id":15205722,"display_name":"Sally Tuer"},"score":0,"creation_date":1635978402,"post_id":69831821,"comment_id":123439538,"body_markdown":"Okay, thank you very much. I&#39;ll try that now. I changed the code into a while loop, using while account &gt; 0 and changed it to every other number: ```if (i % 2 == 0){\n        digit*=2;\n      }\n      sum += digit;\n\n      if (digit &gt; 9){\n        digit -= 9;\n      }\n      sum += digit;```\nI still need to understand what is meant by the sum.","body":"Okay, thank you very much. I&#39;ll try that now. I changed the code into a while loop, using while account &gt; 0 and changed it to every other number: <code>if (i % 2 == 0){         digit*=2;       }       sum += digit;        if (digit &gt; 9){         digit -= 9;       }       sum += digit;</code> I still need to understand what is meant by the sum."},{"owner":{"account_id":20708479,"reputation":11,"user_id":15205722,"display_name":"Sally Tuer"},"score":0,"creation_date":1635981052,"post_id":69831821,"comment_id":123440084,"body_markdown":"Since the lecturer has refused to explain further. I&#39;m going to leave it as sum += digit, where sum is initialized to 0. One of the account numbers returns valid this way.","body":"Since the lecturer has refused to explain further. I&#39;m going to leave it as sum += digit, where sum is initialized to 0. One of the account numbers returns valid this way."},{"owner":{"account_id":20708479,"reputation":11,"user_id":15205722,"display_name":"Sally Tuer"},"score":0,"creation_date":1635981549,"post_id":69831821,"comment_id":123440172,"body_markdown":"@user16320675\n Yes, I have removed that already. Thank you for your help.","body":"@user16320675  Yes, I have removed that already. Thank you for your help."}],"answers":[{"tags":[],"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635980489,"creation_date":1635980489,"answer_id":69832718,"question_id":69831821,"body_markdown":"The following implementation using a boolean flag to detect _the other_ number shows that both account numbers are invalid:\r\n```java\r\npublic static boolean isValid(long acc) {\r\n    System.out.print(acc + &quot; -&gt; &quot;); // debug print\r\n    int sum = 0;\r\n    boolean other = false;\r\n    while (acc &gt; 0) {\r\n        int digit = (int) (acc % 10);\r\n        acc /= 10;\r\n        if (other) {\r\n            digit *= 2;\r\n            if (digit &gt; 9) digit -= 9;\r\n        }\r\n        System.out.print(digit + &quot; &quot;); // debug print\r\n        sum += digit;\r\n        other = !other;\r\n    }\r\n    System.out.println(&quot;sum = &quot; + sum); // debug print\r\n    return sum % 10 == 0;\r\n}\r\n```\r\nTests:\r\n```java\r\nSystem.out.println(isValid(5113476512L));\r\nSystem.out.println(isValid(6512341234L));\r\n```\r\nOutput:\r\n```\r\n5113476512 -&gt; 2 2 5 3 7 8 3 2 1 1 sum = 34\r\nfalse\r\n6512341234 -&gt; 4 6 2 2 4 6 2 2 5 3 sum = 36\r\nfalse\r\n\r\n```","title":"Using modulo and integer division to confirm an account number","body":"<p>The following implementation using a boolean flag to detect <em>the other</em> number shows that both account numbers are invalid:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static boolean isValid(long acc) {\n    System.out.print(acc + &quot; -&gt; &quot;); // debug print\n    int sum = 0;\n    boolean other = false;\n    while (acc &gt; 0) {\n        int digit = (int) (acc % 10);\n        acc /= 10;\n        if (other) {\n            digit *= 2;\n            if (digit &gt; 9) digit -= 9;\n        }\n        System.out.print(digit + &quot; &quot;); // debug print\n        sum += digit;\n        other = !other;\n    }\n    System.out.println(&quot;sum = &quot; + sum); // debug print\n    return sum % 10 == 0;\n}\n</code></pre>\n<p>Tests:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(isValid(5113476512L));\nSystem.out.println(isValid(6512341234L));\n</code></pre>\n<p>Output:</p>\n<pre><code>5113476512 -&gt; 2 2 5 3 7 8 3 2 1 1 sum = 34\nfalse\n6512341234 -&gt; 4 6 2 2 4 6 2 2 5 3 sum = 36\nfalse\n\n</code></pre>\n"}],"owner":{"account_id":20708479,"reputation":11,"user_id":15205722,"display_name":"Sally Tuer"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":285,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635980489,"creation_date":1635974136,"question_id":69831821,"body_markdown":"I am new to Java and currently working on a small class assignment. The question is as follows:\r\n\r\n&gt; Write a program that determines whether a bank account number with 10 digits or fewer passes a validation test; it requires that we extract the digits, right to left by:\r\n&gt; \r\n&gt; - Using the modulo operator to extract the right most digit\r\n&gt; - Using integer division to remove the right-most digit from the account number to obtain a new number without it.\r\nBeginning with the 2nd right-most digit, moving right to left, double every other digit. If it produces a value greater than 9, subtract 9 from that value.\r\n&gt; - Form the sum of all products(new digits) and the unchanged digits.\r\n&gt; - if the sum doesn&#39;t end in 0, its invalid.\r\n&gt; \r\n&gt; Check the validity of 5113 4765 12 and 65 1234 1234\r\n\r\nHere is my code:\r\n```\r\nlong account = Long.parseLong(JOptionPane.showInputDialog( null, &quot;Enter account number: &quot; ));\r\nint sum = 0;\r\nlong digit;\r\n//5113476512\r\n//6512341234\r\nString str_number = String.valueOf(account);\r\n\r\ndigit = account % 10;\r\naccount /= 10;\r\n\r\nfor(int i = str_number.length() -2; i &gt;= 0; i --){\r\n  digit = account % 10;\r\n\r\n  account /= 10;\r\n\r\n  // account%=10;\r\n  // sum += digit;\r\n  digit *= 2;\r\n  if (digit &gt; 9){\r\n    digit -= 9;\r\n  }\r\n  sum += digit;\r\n}\r\n// for(int x = 0; x &lt; digit.length; x ++){\r\n//   sum += digit[x];\r\n// }\r\nif (sum % 10 != 0){\r\n  JOptionPane.showMessageDialog(null, &quot;Account number invalid&quot;);\r\n}\r\nelse{\r\n  JOptionPane.showMessageDialog(null, &quot;Account number valid&quot;);\r\n}\r\nJOptionPane.showMessageDialog(null, sum);\r\n```\r\nBut I feel it doesn&#39;t follow the requirements and might not be correct. Only one of the account numbers returns valid although I&#39;m not sure if that is supposed to be so or not. Any ideas on how to go about this?","title":"Using modulo and integer division to confirm an account number","body":"<p>I am new to Java and currently working on a small class assignment. The question is as follows:</p>\n<blockquote>\n<p>Write a program that determines whether a bank account number with 10 digits or fewer passes a validation test; it requires that we extract the digits, right to left by:</p>\n<ul>\n<li>Using the modulo operator to extract the right most digit</li>\n<li>Using integer division to remove the right-most digit from the account number to obtain a new number without it.\nBeginning with the 2nd right-most digit, moving right to left, double every other digit. If it produces a value greater than 9, subtract 9 from that value.</li>\n<li>Form the sum of all products(new digits) and the unchanged digits.</li>\n<li>if the sum doesn't end in 0, its invalid.</li>\n</ul>\n<p>Check the validity of 5113 4765 12 and 65 1234 1234</p>\n</blockquote>\n<p>Here is my code:</p>\n<pre><code>long account = Long.parseLong(JOptionPane.showInputDialog( null, &quot;Enter account number: &quot; ));\nint sum = 0;\nlong digit;\n//5113476512\n//6512341234\nString str_number = String.valueOf(account);\n\ndigit = account % 10;\naccount /= 10;\n\nfor(int i = str_number.length() -2; i &gt;= 0; i --){\n  digit = account % 10;\n\n  account /= 10;\n\n  // account%=10;\n  // sum += digit;\n  digit *= 2;\n  if (digit &gt; 9){\n    digit -= 9;\n  }\n  sum += digit;\n}\n// for(int x = 0; x &lt; digit.length; x ++){\n//   sum += digit[x];\n// }\nif (sum % 10 != 0){\n  JOptionPane.showMessageDialog(null, &quot;Account number invalid&quot;);\n}\nelse{\n  JOptionPane.showMessageDialog(null, &quot;Account number valid&quot;);\n}\nJOptionPane.showMessageDialog(null, sum);\n</code></pre>\n<p>But I feel it doesn't follow the requirements and might not be correct. Only one of the account numbers returns valid although I'm not sure if that is supposed to be so or not. Any ideas on how to go about this?</p>\n"},{"tags":["java","apache-kafka","spring-kafka","kafka-producer-api"],"comments":[{"owner":{"account_id":1288095,"reputation":169326,"user_id":1240763,"display_name":"Gary Russell"},"score":1,"creation_date":1636031298,"post_id":69832652,"comment_id":123452581,"body_markdown":"This has nothing to do with the message builder or template.\nIt sounds like you might be using JSON to serialize the payload; in that case, you need to configure the JSON serialization for that - see https://www.baeldung.com/jackson-ignore-null-fields for a tutorial.","body":"This has nothing to do with the message builder or template. It sounds like you might be using JSON to serialize the payload; in that case, you need to configure the JSON serialization for that - see <a href=\"https://www.baeldung.com/jackson-ignore-null-fields\" rel=\"nofollow noreferrer\">baeldung.com/jackson-ignore-null-fields</a> for a tutorial."}],"owner":{"account_id":12715664,"reputation":41,"user_id":11990671,"display_name":"Roy Nunez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1375,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1635979988,"creation_date":1635979988,"question_id":69832652,"body_markdown":"When I publish a payload to a kafka topic, if a particular field has a null value, or empty string, this field shows up in the payload when using MessageBuilder. I do want any of the fields that have null values in the message before I publish through kafkaTemplate. How can I filter them when I am using MessageBuilder and kafkaTemplate send method.","title":"How do I remove null Fields in message payload before publishing in kafka topic","body":"<p>When I publish a payload to a kafka topic, if a particular field has a null value, or empty string, this field shows up in the payload when using MessageBuilder. I do want any of the fields that have null values in the message before I publish through kafkaTemplate. How can I filter them when I am using MessageBuilder and kafkaTemplate send method.</p>\n"},{"tags":["java","maven","junit","maven-surefire-plugin"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1634538913,"post_id":69604251,"comment_id":123041776,"body_markdown":"Please show full pom file ... log file output ...and the test case which is not executed ...which JDK version is being used?","body":"Please show full pom file ... log file output ...and the test case which is not executed ...which JDK version is being used?"},{"owner":{"account_id":1661507,"reputation":9914,"user_id":1529709,"accept_rate":100,"display_name":"zb226"},"score":0,"creation_date":1634591472,"post_id":69604251,"comment_id":123061752,"body_markdown":"@khmarbaise: Updated the question, please have a look at the repo - thanks!","body":"@khmarbaise: Updated the question, please have a look at the repo - thanks!"},{"owner":{"account_id":2158921,"reputation":18762,"user_id":1913537,"accept_rate":73,"display_name":"Ori Dar"},"score":0,"creation_date":1634646199,"post_id":69604251,"comment_id":123076258,"body_markdown":"Same result if you run without asterisk?  `&lt;include&gt;some.test.pkg1&lt;/include&gt;` as opposed to `&lt;include&gt;some.test.pkg1.*&lt;/include&gt;`. The later may scan for tests in sub packages.","body":"Same result if you run without asterisk?  <code>&lt;include&gt;some.test.pkg1&lt;&#47;include&gt;</code> as opposed to <code>&lt;include&gt;some.test.pkg1.*&lt;&#47;include&gt;</code>. The later may scan for tests in sub packages."},{"owner":{"account_id":1661507,"reputation":9914,"user_id":1529709,"accept_rate":100,"display_name":"zb226"},"score":0,"creation_date":1634646489,"post_id":69604251,"comment_id":123076386,"body_markdown":"@OriDar Same result without asterisk. If you want to check more closely, please clone the provided repo...","body":"@OriDar Same result without asterisk. If you want to check more closely, please clone the provided repo..."}],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299866,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634721045,"creation_date":1634719360,"answer_id":69642868,"question_id":69604251,"body_markdown":"To be honest, this looks like a bug in maven-surefire-plugin, or at best some behavior change that isn&#39;t documented properly.\r\n\r\nI took the sample you posted to GitHub, downgraded it to maven-surefire-plugin 2.19.1, and it works just fine.\r\n\r\nYou may want to report this bug [Apache&#39;s Jira](https://issues.apache.org/).","title":"Include / exclude tests by fully qualified package name","body":"<p>To be honest, this looks like a bug in maven-surefire-plugin, or at best some behavior change that isn't documented properly.</p>\n<p>I took the sample you posted to GitHub, downgraded it to maven-surefire-plugin 2.19.1, and it works just fine.</p>\n<p>You may want to report this bug <a href=\"https://issues.apache.org/\" rel=\"nofollow noreferrer\">Apache's Jira</a>.</p>\n"}],"owner":{"account_id":1661507,"reputation":9914,"user_id":1529709,"accept_rate":100,"display_name":"zb226"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":467,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69642868,"answer_count":1,"score":2,"last_activity_date":1635979931,"creation_date":1634473004,"question_id":69604251,"body_markdown":"I&#39;m trying to specify a set of tests by fully qualified package name, using Maven 3.6.3 with maven-surefire-plugin 3.0.0-M5 on OpenJDK 11. The [documentation](https://maven.apache.org/surefire/maven-surefire-plugin/examples/inclusion-exclusion.html#Fully_qualified_class_name) states...\r\n\r\n&gt; As of Surefire Plugin 2.19.1, the syntax with fully qualified class\r\n&gt; names or packages can be used\r\n\r\n...and goes on to give an example:\r\n\r\n    &lt;include&gt;my.package.*, another.package.*&lt;/include&gt;\r\n\r\nIf I have my test class `Test1.java` in a package called `some.test.pkg1` and use:\r\n\r\n    &lt;include&gt;some.test.pkg1.*&lt;/include&gt;\r\n\r\nor even:\r\n\r\n    &lt;include&gt;some.test.*&lt;/include&gt;\r\n\r\n...the test won&#39;t be executed. Why is that?\r\n\r\n----\r\n\r\n**Update 1:** To provide all the infos requested by @khmarbaise, I&#39;ve pushed a small project to github, please see here: https://github.com/zb226/so69604251-maven-surefire-plugin\r\n\r\n----\r\n\r\n**Update 2:** @ori-dar suggested dropping the asterisk `*` (or `.*`), but it does not help.\r\n\r\n---\r\n\r\n**Update 3:** I found mentions that by default Maven expects to have Test classes&#39; names ending with `Test`, so I tried to rename the test to `MavenTest.java`, which didn&#39;t help either.\r\n\r\n---\r\n\r\n**Update 4:** For posterity, [SUREFIRE-1789](https://issues.apache.org/jira/browse/SUREFIRE-1789) seems to deal with this exact issue. \r\n[SUREFIRE-1389](https://issues.apache.org/jira/browse/SUREFIRE-1389) is related. [SUREFIRE-1191](https://issues.apache.org/jira/browse/SUREFIRE-1191) introduced the [corresponding section in the docs](https://github.com/sverhagen/maven-surefire/commit/544591c9d18966f514bb4273aa06deed186a6810).\r\n\r\n---\r\n\r\n**Update 5:** I added small test runners for Windows/*nix to my repo linked above, to check which versions are affected by this behaviour. Turns out it&#39;s any and all but 2.19.1 - which means that the official documentation is misleading if not to say wrong for over 5 years now `:(`\r\n\r\n","title":"Include / exclude tests by fully qualified package name","body":"<p>I'm trying to specify a set of tests by fully qualified package name, using Maven 3.6.3 with maven-surefire-plugin 3.0.0-M5 on OpenJDK 11. The <a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/examples/inclusion-exclusion.html#Fully_qualified_class_name\" rel=\"nofollow noreferrer\">documentation</a> states...</p>\n<blockquote>\n<p>As of Surefire Plugin 2.19.1, the syntax with fully qualified class\nnames or packages can be used</p>\n</blockquote>\n<p>...and goes on to give an example:</p>\n<pre><code>&lt;include&gt;my.package.*, another.package.*&lt;/include&gt;\n</code></pre>\n<p>If I have my test class <code>Test1.java</code> in a package called <code>some.test.pkg1</code> and use:</p>\n<pre><code>&lt;include&gt;some.test.pkg1.*&lt;/include&gt;\n</code></pre>\n<p>or even:</p>\n<pre><code>&lt;include&gt;some.test.*&lt;/include&gt;\n</code></pre>\n<p>...the test won't be executed. Why is that?</p>\n<hr />\n<p><strong>Update 1:</strong> To provide all the infos requested by @khmarbaise, I've pushed a small project to github, please see here: <a href=\"https://github.com/zb226/so69604251-maven-surefire-plugin\" rel=\"nofollow noreferrer\">https://github.com/zb226/so69604251-maven-surefire-plugin</a></p>\n<hr />\n<p><strong>Update 2:</strong> @ori-dar suggested dropping the asterisk <code>*</code> (or <code>.*</code>), but it does not help.</p>\n<hr />\n<p><strong>Update 3:</strong> I found mentions that by default Maven expects to have Test classes' names ending with <code>Test</code>, so I tried to rename the test to <code>MavenTest.java</code>, which didn't help either.</p>\n<hr />\n<p><strong>Update 4:</strong> For posterity, <a href=\"https://issues.apache.org/jira/browse/SUREFIRE-1789\" rel=\"nofollow noreferrer\">SUREFIRE-1789</a> seems to deal with this exact issue.\n<a href=\"https://issues.apache.org/jira/browse/SUREFIRE-1389\" rel=\"nofollow noreferrer\">SUREFIRE-1389</a> is related. <a href=\"https://issues.apache.org/jira/browse/SUREFIRE-1191\" rel=\"nofollow noreferrer\">SUREFIRE-1191</a> introduced the <a href=\"https://github.com/sverhagen/maven-surefire/commit/544591c9d18966f514bb4273aa06deed186a6810\" rel=\"nofollow noreferrer\">corresponding section in the docs</a>.</p>\n<hr />\n<p><strong>Update 5:</strong> I added small test runners for Windows/*nix to my repo linked above, to check which versions are affected by this behaviour. Turns out it's any and all but 2.19.1 - which means that the official documentation is misleading if not to say wrong for over 5 years now <code>:(</code></p>\n"},{"tags":["java","arrays","regex"],"comments":[{"owner":{"account_id":4739783,"reputation":612585,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":3,"creation_date":1635958445,"post_id":69828727,"comment_id":123432753,"body_markdown":"It seems you just want to [match and extract](https://ideone.com/NRMDS5) with `[-+/*]` regex.","body":"It seems you just want to <a href=\"https://ideone.com/NRMDS5\" rel=\"nofollow noreferrer\">match and extract</a> with <code>[-+&#47;*]</code> regex."},{"owner":{"account_id":22509001,"reputation":117,"user_id":16704186,"display_name":"WhatTheWhat"},"score":0,"creation_date":1635958710,"post_id":69828727,"comment_id":123432876,"body_markdown":"@WiktorStribiżew Hi, using `[-+/*]` will strip out the operands and leave behind anything else, resulting in an array that, say given 55+5, would contain 55 and 5,  I&#39;m looking to do the opposite so that only * would remain","body":"@WiktorStribiżew Hi, using <code>[-+&#47;*]</code> will strip out the operands and leave behind anything else, resulting in an array that, say given 55+5, would contain 55 and 5,  I&#39;m looking to do the opposite so that only * would remain"},{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":2,"creation_date":1635958827,"post_id":69828727,"comment_id":123432930,"body_markdown":"Remove everything which is not an operator and then split at each char: `str.replaceAll(&quot;[^-+/*]&quot;,&quot;&quot;).split(&quot;&quot;)`","body":"Remove everything which is not an operator and then split at each char: <code>str.replaceAll(&quot;[^-+&#47;*]&quot;,&quot;&quot;).split(&quot;&quot;)</code>"},{"owner":{"account_id":4739783,"reputation":612585,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":0,"creation_date":1635958875,"post_id":69828727,"comment_id":123432954,"body_markdown":"@WhatTheWhat Did you seem the solution I linked to?","body":"@WhatTheWhat Did you seem the solution I linked to?"},{"owner":{"account_id":22509001,"reputation":117,"user_id":16704186,"display_name":"WhatTheWhat"},"score":0,"creation_date":1635958882,"post_id":69828727,"comment_id":123432957,"body_markdown":"@user16320675 Hi, the symbol * also does other stuff in regex, so safer to use  unicode instead","body":"@user16320675 Hi, the symbol * also does other stuff in regex, so safer to use  unicode instead"},{"owner":{"account_id":22509001,"reputation":117,"user_id":16704186,"display_name":"WhatTheWhat"},"score":0,"creation_date":1635960707,"post_id":69828727,"comment_id":123433681,"body_markdown":"@Eritrean, the issue with `str.replaceAll(&quot;[^-+/*]&quot;,&quot;&quot;).split(&quot;&quot;)` is that it will always return an array with something in it. So given an entry of &quot;dc&quot;, the resulting array will have a size of 1 with nothing in it.","body":"@Eritrean, the issue with <code>str.replaceAll(&quot;[^-+&#47;*]&quot;,&quot;&quot;).split(&quot;&quot;)</code> is that it will always return an array with something in it. So given an entry of &quot;dc&quot;, the resulting array will have a size of 1 with nothing in it."},{"owner":{"account_id":22509001,"reputation":117,"user_id":16704186,"display_name":"WhatTheWhat"},"score":0,"creation_date":1635972763,"post_id":69828727,"comment_id":123437852,"body_markdown":"Narrowing it down; `String[] operandsArray = str.split(&quot;[^*/+-]+&quot;);` only produces one empty value at the element [0] of the array","body":"Narrowing it down; <code>String[] operandsArray = str.split(&quot;[^*&#47;+-]+&quot;);</code> only produces one empty value at the element [0] of the array"},{"owner":{"account_id":4739783,"reputation":612585,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":1,"creation_date":1635972836,"post_id":69828727,"comment_id":123437873,"body_markdown":"*Do not use `split`*,  use *`Matcher#find`* as I showed in my top comment.","body":"<i>Do not use <code>split</code></i>,  use <i><code>Matcher#find</code></i> as I showed in my top comment."}],"answers":[{"tags":[],"owner":{"account_id":15702039,"reputation":18231,"user_id":11329890,"display_name":"Ryszard Czech"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635979580,"creation_date":1635979580,"answer_id":69832598,"question_id":69828727,"body_markdown":"Use\r\n```java\r\nimport java.util.*;\r\nimport java.util.stream.*;\r\nimport java.util.regex.*;\r\n\r\nclass Test\r\n{\r\n\tpublic static void main (String[] args) throws java.lang.Exception\r\n\t{\r\n\t\tString text = &quot;55+6-6*6/6&quot;;\r\n\t\tString[] results = Pattern.compile(&quot;[+/*-]&quot;).matcher(text)\r\n\t\t    .results()\r\n\t\t    .map(MatchResult::group)\r\n            .toArray(String[]::new);\r\n    \tSystem.out.println(Arrays.toString(results)); \r\n\t}\r\n}\r\n```\r\nSee [Java proof][1].\r\n\r\n**Results**: `[+, -, *, /]`\r\n\r\n\r\n  [1]: https://tio.run/##bY8/a8MwEMVn61McniSHKFM82HTo0LFQmm4hg@oIR6n@IZ0Th5LP7sp2MIX2loP3e@8ddxYXsT4fv4ZBGe8CwjkJvEOleVGTP1rEIIX5FwXZyn4kpNEiRviQEck3yXz3qVUDEQWmdXHqCEYoC3SHQdl2fwAR2sgAT8Fd41yohW35S99Ij8pZkqWabLYDyh7hCfLtdlWuy6LclHm90FQWZOw0xmR5E4gyWN4445WWNN@vNsX6kDNuBDYnGejYxVIY0vBHkC6CEZ6@js73iVRVG1znGYFfw9E9hyBuyzNVZeWV1ZMp290iSsNdh9wnjNrSyR1TbA7Qx1XGaiDZndyH4Qc","title":"Java str.split returning empty elements using RegEx","body":"<p>Use</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\nimport java.util.stream.*;\nimport java.util.regex.*;\n\nclass Test\n{\n    public static void main (String[] args) throws java.lang.Exception\n    {\n        String text = &quot;55+6-6*6/6&quot;;\n        String[] results = Pattern.compile(&quot;[+/*-]&quot;).matcher(text)\n            .results()\n            .map(MatchResult::group)\n            .toArray(String[]::new);\n        System.out.println(Arrays.toString(results)); \n    }\n}\n</code></pre>\n<p>See <a href=\"https://tio.run/##bY8/a8MwEMVn61McniSHKFM82HTo0LFQmm4hg@oIR6n@IZ0Th5LP7sp2MIX2loP3e@8ddxYXsT4fv4ZBGe8CwjkJvEOleVGTP1rEIIX5FwXZyn4kpNEiRviQEck3yXz3qVUDEQWmdXHqCEYoC3SHQdl2fwAR2sgAT8Fd41yohW35S99Ij8pZkqWabLYDyh7hCfLtdlWuy6LclHm90FQWZOw0xmR5E4gyWN4445WWNN@vNsX6kDNuBDYnGejYxVIY0vBHkC6CEZ6@js73iVRVG1znGYFfw9E9hyBuyzNVZeWV1ZMp290iSsNdh9wnjNrSyR1TbA7Qx1XGaiDZndyH4Qc\" rel=\"nofollow noreferrer\">Java proof</a>.</p>\n<p><strong>Results</strong>: <code>[+, -, *, /]</code></p>\n"}],"owner":{"account_id":22509001,"reputation":117,"user_id":16704186,"display_name":"WhatTheWhat"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":69832598,"answer_count":1,"score":0,"last_activity_date":1635979580,"creation_date":1635958201,"question_id":69828727,"body_markdown":"I want to strip out anything from a string that **isn&#39;t** a plus sign, or a minus, or a multiplication sign or a division sign (/).\r\n\r\nSo i thought I&#39;d use RegEx and negative lookahead.\r\n\r\nGiven a Java array:\r\n\r\n   ```String[] operandsArray = str.split(&quot;(?!\\\\u002A|\\\\u002B|\\\\u002D|\\\\u002F).&quot;)```\r\n\r\nAnd a test string of 55+5, the resulting array `operandsArray` contains:\r\n\r\n    0:&quot;&quot;\r\n    1:&quot;&quot;\r\n    2:&quot;+&quot;\r\n\r\nI&#39;m looking for it to contain just the operands, so:\r\n\r\n    0:&quot;+&quot;\r\n\r\nand given: 55+6-6*6/6, would return:\r\n\r\n    0:&quot;+&quot;\r\n    1:&quot;-&quot;\r\n    2:&quot;*&quot;\r\n    3:&quot;/&quot;\r\n\r\nIt should also match duplicates as well, so given 5+5+5+5, would return:\r\n\r\n    0:&quot;+&quot;\r\n    1:&quot;+&quot;\r\n    2:&quot;+&quot;\r\n\r\nCan anyone help with this, thanks","title":"Java str.split returning empty elements using RegEx","body":"<p>I want to strip out anything from a string that <strong>isn't</strong> a plus sign, or a minus, or a multiplication sign or a division sign (/).</p>\n<p>So i thought I'd use RegEx and negative lookahead.</p>\n<p>Given a Java array:</p>\n<p><code>String[] operandsArray = str.split(&quot;(?!\\\\u002A|\\\\u002B|\\\\u002D|\\\\u002F).&quot;)</code></p>\n<p>And a test string of 55+5, the resulting array <code>operandsArray</code> contains:</p>\n<pre><code>0:&quot;&quot;\n1:&quot;&quot;\n2:&quot;+&quot;\n</code></pre>\n<p>I'm looking for it to contain just the operands, so:</p>\n<pre><code>0:&quot;+&quot;\n</code></pre>\n<p>and given: 55+6-6*6/6, would return:</p>\n<pre><code>0:&quot;+&quot;\n1:&quot;-&quot;\n2:&quot;*&quot;\n3:&quot;/&quot;\n</code></pre>\n<p>It should also match duplicates as well, so given 5+5+5+5, would return:</p>\n<pre><code>0:&quot;+&quot;\n1:&quot;+&quot;\n2:&quot;+&quot;\n</code></pre>\n<p>Can anyone help with this, thanks</p>\n"},{"tags":["java","awt"],"comments":[{"owner":{"account_id":2611382,"reputation":6389,"user_id":2261424,"accept_rate":100,"display_name":"AntonH"},"score":1,"creation_date":1398702100,"post_id":23346208,"comment_id":35752563,"body_markdown":"Are you looking to create a colour using those 3 variables (because there&#39;s a Color constructor that does that), or getting the associated abbreviation (in your example, `Color.BLUE`)?","body":"Are you looking to create a colour using those 3 variables (because there&#39;s a Color constructor that does that), or getting the associated abbreviation (in your example, <code>Color.BLUE</code>)?"},{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":3,"creation_date":1398702168,"post_id":23346208,"comment_id":35752602,"body_markdown":"Colors don&#39;t have names.","body":"Colors don&#39;t have names."},{"owner":{"account_id":1389614,"reputation":1649,"user_id":1320774,"accept_rate":50,"display_name":"javadev"},"score":4,"creation_date":1398702173,"post_id":23346208,"comment_id":35752607,"body_markdown":"Maybe a duplicate to this : http://stackoverflow.com/questions/4126029/java-color-code-convert-to-color-name","body":"Maybe a duplicate to this : <a href=\"http://stackoverflow.com/questions/4126029/java-color-code-convert-to-color-name\" title=\"java color code convert to color name\">stackoverflow.com/questions/4126029/&hellip;</a>"},{"owner":{"account_id":3562114,"reputation":1493,"user_id":2974766,"accept_rate":73,"display_name":"DoubleDouble"},"score":0,"creation_date":1398702379,"post_id":23346208,"comment_id":35752713,"body_markdown":"[Check Documentation](http://docs.oracle.com/javase/7/docs/api/java/awt/Color.html) As AntonH said, if you just want to create a new Color you can do `Color(float r, float g, float b)`","body":"<a href=\"http://docs.oracle.com/javase/7/docs/api/java/awt/Color.html\" rel=\"nofollow noreferrer\">Check Documentation</a> As AntonH said, if you just want to create a new Color you can do <code>Color(float r, float g, float b)</code>"},{"owner":{"account_id":2611382,"reputation":6389,"user_id":2261424,"accept_rate":100,"display_name":"AntonH"},"score":0,"creation_date":1398702479,"post_id":23346208,"comment_id":35752760,"body_markdown":"Or, since you&#39;re indicating `int`s, `Color (int r, int g, int b);`.","body":"Or, since you&#39;re indicating <code>int</code>s, <code>Color (int r, int g, int b);</code>."},{"owner":{"account_id":2399479,"reputation":6729,"user_id":2097529,"accept_rate":76,"display_name":"Kick Buttowski"},"score":0,"creation_date":1398702496,"post_id":23346208,"comment_id":35752768,"body_markdown":"your question does not make sense at all and I agree with JB Nizet, &quot;colors do not have names&quot; \nCan you change your question?","body":"your question does not make sense at all and I agree with JB Nizet, &quot;colors do not have names&quot;  Can you change your question?"},{"owner":{"account_id":2399479,"reputation":6729,"user_id":2097529,"accept_rate":76,"display_name":"Kick Buttowski"},"score":0,"creation_date":1398702628,"post_id":23346208,"comment_id":35752846,"body_markdown":"http://stackoverflow.com/questions/18022364/how-to-convert-rgb-color-to-int-in-java. take a look at this","body":"<a href=\"http://stackoverflow.com/questions/18022364/how-to-convert-rgb-color-to-int-in-java\" title=\"how to convert rgb color to int in java\">stackoverflow.com/questions/18022364/&hellip;</a>. take a look at this"},{"owner":{"display_name":"user3371750"},"score":0,"creation_date":1398704098,"post_id":23346208,"comment_id":35753709,"body_markdown":"Apologies for the poor wording, when I use the method Color(0, 0, 255) I get the error cannot find symbol pointing to method Color(int,int,int), despite the fact I have imported java.awt.Color?","body":"Apologies for the poor wording, when I use the method Color(0, 0, 255) I get the error cannot find symbol pointing to method Color(int,int,int), despite the fact I have imported java.awt.Color?"},{"owner":{"account_id":3392345,"reputation":10946,"user_id":2846923,"accept_rate":100,"display_name":"The Guy with The Hat"},"score":0,"creation_date":1398704137,"post_id":23346208,"comment_id":35753731,"body_markdown":"@user3371750 Cannot find which symbol?","body":"@user3371750 Cannot find which symbol?"},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":0,"creation_date":1398704406,"post_id":23346208,"comment_id":35753897,"body_markdown":"You need to use the `new` operator to create a new instance of Color: `new Color(0, 0, 255)`","body":"You need to use the <code>new</code> operator to create a new instance of Color: <code>new Color(0, 0, 255)</code>"}],"answers":[{"tags":[],"owner":{"account_id":4384926,"reputation":1352,"user_id":3575404,"accept_rate":17,"display_name":"nils"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550758606,"creation_date":1398702156,"answer_id":23346259,"question_id":23346208,"body_markdown":"Without any helping libraries I would say: No. Especially because not every RGB-Color has a specific name. However, you could of course build an own function, which tries to match some of the available colors and deliver something like &quot;Unknown&quot; if there is no match.\r\n\r\nThe matching attempt could theoretically be done using the Java reflection API...","title":"Color Class in Java","body":"<p>Without any helping libraries I would say: No. Especially because not every RGB-Color has a specific name. However, you could of course build an own function, which tries to match some of the available colors and deliver something like \"Unknown\" if there is no match.</p>\n\n<p>The matching attempt could theoretically be done using the Java reflection API...</p>\n"},{"tags":[],"owner":{"account_id":2348323,"reputation":13158,"user_id":2057902,"accept_rate":80,"display_name":"Sireesh Yarlagadda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1398704456,"creation_date":1398702740,"answer_id":23346448,"question_id":23346208,"body_markdown":"As far as i know, **we don&#39;t have any such library to directly access the colors from the Constants**.\r\n\r\n\r\nBut we can manage do it using Hex Color Library in Java.\r\n\r\n\r\n\r\nReferences :\r\n\r\n1. [Hex][1]\r\n\r\n\r\n2. [Color Class][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/11131579/get-color-name-from-hex-code-in-java\r\n  [2]: http://www.javalobby.org/java/forums/t19183.html","title":"Color Class in Java","body":"<p>As far as i know, <strong>we don't have any such library to directly access the colors from the Constants</strong>.</p>\n\n<p>But we can manage do it using Hex Color Library in Java.</p>\n\n<p>References :</p>\n\n<ol>\n<li><p><a href=\"https://stackoverflow.com/questions/11131579/get-color-name-from-hex-code-in-java\">Hex</a></p></li>\n<li><p><a href=\"http://www.javalobby.org/java/forums/t19183.html\" rel=\"nofollow noreferrer\">Color Class</a></p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2867319,"reputation":6050,"user_id":2461379,"display_name":"Farmer Joe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1398705449,"creation_date":1398703938,"answer_id":23346803,"question_id":23346208,"body_markdown":"There is no set function for this kind of behavior, but you could do something like this:\r\n\r\n\tpublic static String getColorName(int r, int g, int b) {\r\n\t\tString[] colorNames = new String[] {\r\n\t\t\t\t&quot;BLACK&quot;,\r\n\t\t\t\t&quot;BLUE&quot;,\r\n\t\t\t\t&quot;GREEN&quot;,\r\n\t\t\t\t&quot;CYAN&quot;,\r\n\t\t\t\t&quot;DARK_GRAY&quot;,\r\n\t\t\t\t&quot;GRAY&quot;,\r\n\t\t\t\t&quot;LIGHT_GRAY&quot;,\r\n\t\t\t\t&quot;MAGENTA&quot;,\r\n\t\t\t\t&quot;ORANGE&quot;,\r\n\t\t\t\t&quot;PINK&quot;,\r\n\t\t\t\t&quot;RED&quot;,\r\n\t\t\t\t&quot;WHITE&quot;,\r\n\t\t\t\t&quot;YELLOW&quot;\r\n\t\t};\r\n\t\tColor userProvidedColor = new Color(r,g,b);\r\n\t\tColor color;\r\n\t\tField field;\r\n\t\tfor (String colorName : colorNames) {\r\n\t\t\ttry {\r\n\t\t\t\tfield = Class.forName(&quot;java.awt.Color&quot;).getField(colorName);\r\n\t\t\t\tcolor = (Color)field.get(null);\r\n\t\t\t\tif (color.equals(userProvidedColor)) {\r\n\t\t\t\t\treturn colorName; // Or maybe return colorName.toLowerCase() for aesthetics\r\n\t\t\t\t}\r\n\t\t\t} catch (Exception e) {\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\tColor someOtherCustomDefinedColorMaybePurple = new Color(128,0,128);\r\n\t\tif (someOtherCustomDefinedColorMaybePurple.equals(userProvidedColor)) {\r\n\t\t\treturn &quot;Purple&quot;;\r\n\t\t}\r\n\t\treturn &quot;Undefined&quot;;\r\n\t}\r\n\r\n\r\nThere are a few options from here as well, maybe you want the nearest color?  In which case you could try and resolve the distance somehow (here by distance from each r,g,b coordinate, admittedly not the best method but simple enough for this example, [this wiki page has a good discussion on more rigorous methods][1])\r\n\r\n\r\n    // ...\r\n    String minColorName = &quot;&quot;;\r\n    float minColorDistance = 10000000;\r\n    float thisColorDistance = -1;\r\n    for (String colorName : colorNames) {\r\n        try {\r\n            field = Class.forName(&quot;java.awt.Color&quot;).getField(colorName);\r\n            color = (Color)field.get(null);\r\n            thisColorDistance = ( Math.abs(color.red - userProvidedColor.red) + Math.abs(color.green - userProvidedColor.green) + Math.abs(color.blue - userProvidedColor.blue) );\r\n            if (thisColorDistance &lt; minColorDistance) {\r\n                minColorName = colorName;\r\n                minColorDistance = thisColorDistance;\r\n            }\r\n        } catch (Exception e) {\r\n            // exception that should only be raised in the case color name is not defined, which shouldnt happen\r\n        }\r\n    }\r\n    if (minColorName.length &gt; 0) {\r\n        return minColorName;\r\n    }\r\n    // Tests on other custom defined colors\r\n    \r\nThis should outline how you would be able to compare to the built in colors from the `Color` library.  You could use a `Map` to expand the functionality further to allow for you to define as many custom colors as you like (Something [@TheGuywithTheHat][2] suggests as well) which gives you more control over the return names of matched colors, and allows for you to go by more colors than just the predefined ones:\r\n\r\n    HashMap&lt;String,Color&gt; colorMap = new HashMap&lt;String,Color&gt;();\r\n    \r\n    colorMap.put(&quot;Red&quot;,Color.RED);\r\n    colorMap.put(&quot;Purple&quot;,new Color(128,0,128));\r\n    colorMap.put(&quot;Some crazy name for a color&quot;, new Color(50,199,173));\r\n    // etc ...\r\n\r\n    String colorName;\r\n    Color color;\r\n    for (Map.Entry&lt;String, Color&gt; entry : colorMap.entrySet()) {\r\n        colorName = entry.getKey();\r\n        color= entry.getValue();\r\n        // Testing against users color\r\n    }\r\n    \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Color_difference\r\n  [2]: https://stackoverflow.com/a/23346833/2461379","title":"Color Class in Java","body":"<p>There is no set function for this kind of behavior, but you could do something like this:</p>\n\n<pre><code>public static String getColorName(int r, int g, int b) {\n    String[] colorNames = new String[] {\n            \"BLACK\",\n            \"BLUE\",\n            \"GREEN\",\n            \"CYAN\",\n            \"DARK_GRAY\",\n            \"GRAY\",\n            \"LIGHT_GRAY\",\n            \"MAGENTA\",\n            \"ORANGE\",\n            \"PINK\",\n            \"RED\",\n            \"WHITE\",\n            \"YELLOW\"\n    };\n    Color userProvidedColor = new Color(r,g,b);\n    Color color;\n    Field field;\n    for (String colorName : colorNames) {\n        try {\n            field = Class.forName(\"java.awt.Color\").getField(colorName);\n            color = (Color)field.get(null);\n            if (color.equals(userProvidedColor)) {\n                return colorName; // Or maybe return colorName.toLowerCase() for aesthetics\n            }\n        } catch (Exception e) {\n\n        }\n    }\n    Color someOtherCustomDefinedColorMaybePurple = new Color(128,0,128);\n    if (someOtherCustomDefinedColorMaybePurple.equals(userProvidedColor)) {\n        return \"Purple\";\n    }\n    return \"Undefined\";\n}\n</code></pre>\n\n<p>There are a few options from here as well, maybe you want the nearest color?  In which case you could try and resolve the distance somehow (here by distance from each r,g,b coordinate, admittedly not the best method but simple enough for this example, <a href=\"https://en.wikipedia.org/wiki/Color_difference\" rel=\"nofollow noreferrer\">this wiki page has a good discussion on more rigorous methods</a>)</p>\n\n<pre><code>// ...\nString minColorName = \"\";\nfloat minColorDistance = 10000000;\nfloat thisColorDistance = -1;\nfor (String colorName : colorNames) {\n    try {\n        field = Class.forName(\"java.awt.Color\").getField(colorName);\n        color = (Color)field.get(null);\n        thisColorDistance = ( Math.abs(color.red - userProvidedColor.red) + Math.abs(color.green - userProvidedColor.green) + Math.abs(color.blue - userProvidedColor.blue) );\n        if (thisColorDistance &lt; minColorDistance) {\n            minColorName = colorName;\n            minColorDistance = thisColorDistance;\n        }\n    } catch (Exception e) {\n        // exception that should only be raised in the case color name is not defined, which shouldnt happen\n    }\n}\nif (minColorName.length &gt; 0) {\n    return minColorName;\n}\n// Tests on other custom defined colors\n</code></pre>\n\n<p>This should outline how you would be able to compare to the built in colors from the <code>Color</code> library.  You could use a <code>Map</code> to expand the functionality further to allow for you to define as many custom colors as you like (Something <a href=\"https://stackoverflow.com/a/23346833/2461379\">@TheGuywithTheHat</a> suggests as well) which gives you more control over the return names of matched colors, and allows for you to go by more colors than just the predefined ones:</p>\n\n<pre><code>HashMap&lt;String,Color&gt; colorMap = new HashMap&lt;String,Color&gt;();\n\ncolorMap.put(\"Red\",Color.RED);\ncolorMap.put(\"Purple\",new Color(128,0,128));\ncolorMap.put(\"Some crazy name for a color\", new Color(50,199,173));\n// etc ...\n\nString colorName;\nColor color;\nfor (Map.Entry&lt;String, Color&gt; entry : colorMap.entrySet()) {\n    colorName = entry.getKey();\n    color= entry.getValue();\n    // Testing against users color\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3392345,"reputation":10946,"user_id":2846923,"accept_rate":100,"display_name":"The Guy with The Hat"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1635979149,"creation_date":1398704034,"answer_id":23346833,"question_id":23346208,"body_markdown":"There is no way to do this with a single method in the Java core classes. However, you can fairly easily do this yourself in two ways.\r\n\r\n### First way\r\n\r\nFirst, create a [`HashMap`][9] of `Color`s that contains all the colors you want:\r\n\r\n    HashMap&lt;Color, String&gt; colors = new HashMap&lt;Color, String&gt;();\r\n    \r\n    colors.put(Color.BLACK,            &quot;BLACK&quot;);\r\n    colors.put(Color.BLUE,             &quot;BLUE&quot;);\r\n    colors.put(Color.CYAN,             &quot;CYAN&quot;);\r\n    colors.put(Color.DARK_GRAY,        &quot;DARK_GRAY&quot;);\r\n    colors.put(Color.GRAY,             &quot;GRAY&quot;);\r\n    colors.put(Color.GREEN,            &quot;GREEN&quot;);\r\n    colors.put(Color.LIGHT_GRAY,       &quot;LIGHT_GRAY&quot;);\r\n    colors.put(Color.MAGENTA,          &quot;MAGENTA&quot;);\r\n    colors.put(Color.ORANGE,           &quot;ORANGE&quot;);\r\n    colors.put(Color.PINK,             &quot;PINK&quot;);\r\n    colors.put(Color.RED,              &quot;RED&quot;);\r\n    colors.put(Color.WHITE,            &quot;WHITE&quot;);\r\n    colors.put(new Color(192, 0, 255), &quot;PURPLE&quot;);\r\n    colors.put(new Color(0xBADA55),    &quot;BADASS_GREEN&quot;);\r\n    colors.put(new Color(0, 0, 128),   &quot;DARK_BLUE&quot;);\r\n\r\nThen, create a new `Color` out of the RGB values you have:\r\n\r\n    Color color = new Color(var1, var2, var3);\r\n\r\nLast, [`get`][10] the value in `colors` for the key `color`:\r\n\r\n    String colorName = colors.get(color);\r\n\r\n### Second way\r\n\r\nThis is potentially a less brittle way, but does have issues, and doesn&#39;t work as-is. You&#39;ll need to catch some exceptions, and maybe handle the case where a field isn&#39;t static and you can&#39;t just do `f.get(null)`.\r\n\r\nCreate a new `Color` out of the RGB values you have:\r\n\r\n    Color color = new Color(var1, var2, var3);\r\n\r\nThen\r\n\r\n 1. Get the [`Class`][1] object from the `Color` class with [`getClass()`][2].\r\n 2. Get the fields from that with [`getDeclaredFields()`][3].\r\n 3. Stream it using [`Arrays.stream()`][4]\r\n 4. Filter it by calling [`filter()`][5], so it only contains all the enum constants that equal the color you made (there should be either one or zero).\r\n 5. Use [`toArray()`][6] to turn the stream into an array.\r\n 6. Get the first element of that array with `[0]`. This will throw an `ArrayIndexOutOfBoundsException` if there isn&#39;t a predefined color matching your color.\r\n 7. Get the name of that color with [`Enum`][7]&#39;s [`toString()`][8].\r\n\r\n&lt;!-- --&gt;\r\n\r\n    String colorName = Arrays.stream(Color.getClass().getDeclaredFields())\r\n                             .filter(f -&gt; f.get(null).equals(color))\r\n                             .toArray()[0]\r\n                             .toString();\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass--\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getDeclaredFields--\r\n  [4]: http://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#stream-T:A-\r\n  [5]: http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#filter-java.util.function.Predicate-\r\n  [6]: http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#toArray--\r\n  [7]: http://docs.oracle.com/javase/8/docs/api/java/lang/Enum.html\r\n  [8]: http://docs.oracle.com/javase/8/docs/api/java/lang/Enum.html#toString--\r\n  [9]: http://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html\r\n  [10]: http://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html#get-java.lang.Object-","title":"Color Class in Java","body":"<p>There is no way to do this with a single method in the Java core classes. However, you can fairly easily do this yourself in two ways.</p>\n<h3>First way</h3>\n<p>First, create a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html\" rel=\"nofollow noreferrer\"><code>HashMap</code></a> of <code>Color</code>s that contains all the colors you want:</p>\n<pre><code>HashMap&lt;Color, String&gt; colors = new HashMap&lt;Color, String&gt;();\n\ncolors.put(Color.BLACK,            &quot;BLACK&quot;);\ncolors.put(Color.BLUE,             &quot;BLUE&quot;);\ncolors.put(Color.CYAN,             &quot;CYAN&quot;);\ncolors.put(Color.DARK_GRAY,        &quot;DARK_GRAY&quot;);\ncolors.put(Color.GRAY,             &quot;GRAY&quot;);\ncolors.put(Color.GREEN,            &quot;GREEN&quot;);\ncolors.put(Color.LIGHT_GRAY,       &quot;LIGHT_GRAY&quot;);\ncolors.put(Color.MAGENTA,          &quot;MAGENTA&quot;);\ncolors.put(Color.ORANGE,           &quot;ORANGE&quot;);\ncolors.put(Color.PINK,             &quot;PINK&quot;);\ncolors.put(Color.RED,              &quot;RED&quot;);\ncolors.put(Color.WHITE,            &quot;WHITE&quot;);\ncolors.put(new Color(192, 0, 255), &quot;PURPLE&quot;);\ncolors.put(new Color(0xBADA55),    &quot;BADASS_GREEN&quot;);\ncolors.put(new Color(0, 0, 128),   &quot;DARK_BLUE&quot;);\n</code></pre>\n<p>Then, create a new <code>Color</code> out of the RGB values you have:</p>\n<pre><code>Color color = new Color(var1, var2, var3);\n</code></pre>\n<p>Last, <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html#get-java.lang.Object-\" rel=\"nofollow noreferrer\"><code>get</code></a> the value in <code>colors</code> for the key <code>color</code>:</p>\n<pre><code>String colorName = colors.get(color);\n</code></pre>\n<h3>Second way</h3>\n<p>This is potentially a less brittle way, but does have issues, and doesn't work as-is. You'll need to catch some exceptions, and maybe handle the case where a field isn't static and you can't just do <code>f.get(null)</code>.</p>\n<p>Create a new <code>Color</code> out of the RGB values you have:</p>\n<pre><code>Color color = new Color(var1, var2, var3);\n</code></pre>\n<p>Then</p>\n<ol>\n<li>Get the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html\" rel=\"nofollow noreferrer\"><code>Class</code></a> object from the <code>Color</code> class with <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass--\" rel=\"nofollow noreferrer\"><code>getClass()</code></a>.</li>\n<li>Get the fields from that with <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getDeclaredFields--\" rel=\"nofollow noreferrer\"><code>getDeclaredFields()</code></a>.</li>\n<li>Stream it using <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#stream-T:A-\" rel=\"nofollow noreferrer\"><code>Arrays.stream()</code></a></li>\n<li>Filter it by calling <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#filter-java.util.function.Predicate-\" rel=\"nofollow noreferrer\"><code>filter()</code></a>, so it only contains all the enum constants that equal the color you made (there should be either one or zero).</li>\n<li>Use <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#toArray--\" rel=\"nofollow noreferrer\"><code>toArray()</code></a> to turn the stream into an array.</li>\n<li>Get the first element of that array with <code>[0]</code>. This will throw an <code>ArrayIndexOutOfBoundsException</code> if there isn't a predefined color matching your color.</li>\n<li>Get the name of that color with <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Enum.html\" rel=\"nofollow noreferrer\"><code>Enum</code></a>'s <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Enum.html#toString--\" rel=\"nofollow noreferrer\"><code>toString()</code></a>.</li>\n</ol>\n\n<pre><code>String colorName = Arrays.stream(Color.getClass().getDeclaredFields())\n                         .filter(f -&gt; f.get(null).equals(color))\n                         .toArray()[0]\n                         .toString();\n</code></pre>\n"}],"owner":{"display_name":"user3371750"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20769,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":23346833,"answer_count":4,"score":3,"last_activity_date":1635979149,"creation_date":1398701998,"question_id":23346208,"body_markdown":"I have a question regarding the awt `Color` class in Java.\r\n\r\nI am currently using the class abbreviations such as `Color.RED` and `Color.BLACK`. I also have a list of three integers such as the following:\r\n\r\n    int var1 = 0\r\n    int var2 = 0\r\n    int var3 = 255\r\n\r\nIs there a method to convert these integers into the appropriate Java `Color` name?","title":"Color Class in Java","body":"<p>I have a question regarding the awt <code>Color</code> class in Java.</p>\n\n<p>I am currently using the class abbreviations such as <code>Color.RED</code> and <code>Color.BLACK</code>. I also have a list of three integers such as the following:</p>\n\n<pre><code>int var1 = 0\nint var2 = 0\nint var3 = 255\n</code></pre>\n\n<p>Is there a method to convert these integers into the appropriate Java <code>Color</code> name?</p>\n"},{"tags":["java","llvm","bytecode"],"comments":[{"owner":{"account_id":60903,"reputation":46025,"user_id":181772,"accept_rate":96,"display_name":"andrew cooke"},"score":1,"creation_date":1338314992,"post_id":10804280,"comment_id":14058274,"body_markdown":"you understand that you can use `javac` (the standard java compiler) to do this?  you don&#39;t need anything from llvm - you can just install the oracle jdk (and i imagine that is how you are expected to prepare java files for class2llvm, but that is only a guess)","body":"you understand that you can use <code>javac</code> (the standard java compiler) to do this?  you don&#39;t need anything from llvm - you can just install the oracle jdk (and i imagine that is how you are expected to prepare java files for class2llvm, but that is only a guess)"},{"owner":{"account_id":235018,"reputation":364834,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"score":4,"creation_date":1338315091,"post_id":10804280,"comment_id":14058310,"body_markdown":"@andrewcooke- Does `javac` really emit LLVM bytecode?  Can you provide a link on how to do this?","body":"@andrewcooke- Does <code>javac</code> really emit LLVM bytecode?  Can you provide a link on how to do this?"},{"owner":{"display_name":"user377628"},"score":0,"creation_date":1338315122,"post_id":10804280,"comment_id":14058319,"body_markdown":"@andrewcooke How can you do this with javac? Are you sure about that?","body":"@andrewcooke How can you do this with javac? Are you sure about that?"},{"owner":{"display_name":"user377628"},"score":1,"creation_date":1338315289,"post_id":10804280,"comment_id":14058377,"body_markdown":"Based on what I just read about VMkit, it supports ahead-of-time compilation. Isn&#39;t that essentially what you need?","body":"Based on what I just read about VMkit, it supports ahead-of-time compilation. Isn&#39;t that essentially what you need?"},{"owner":{"account_id":60903,"reputation":46025,"user_id":181772,"accept_rate":96,"display_name":"andrew cooke"},"score":4,"creation_date":1338315764,"post_id":10804280,"comment_id":14058545,"body_markdown":"maybe i am not understanding.  javac will go from java source to bytecode.  then class2llvm will go from bytecode to llvm.  that gets you from java source to llvm.  is that not what you want?","body":"maybe i am not understanding.  javac will go from java source to bytecode.  then class2llvm will go from bytecode to llvm.  that gets you from java source to llvm.  is that not what you want?"},{"owner":{"account_id":215110,"reputation":1065,"user_id":469506,"display_name":"FeelTheBurns"},"score":0,"creation_date":1338317163,"post_id":10804280,"comment_id":14059026,"body_markdown":"@andrew cooke, atm I can&#39;t get vmkit to install correctly. So just as an alternative using javac will work. However I am unsure where to find the class2llvm function. It doesn&#39;t seem to be part of the core llvm package.","body":"@andrew cooke, atm I can&#39;t get vmkit to install correctly. So just as an alternative using javac will work. However I am unsure where to find the class2llvm function. It doesn&#39;t seem to be part of the core llvm package."},{"owner":{"account_id":60903,"reputation":46025,"user_id":181772,"accept_rate":96,"display_name":"andrew cooke"},"score":1,"creation_date":1338317797,"post_id":10804280,"comment_id":14059247,"body_markdown":"ah, ok, i think i understand what confused everyone.  when i said &quot;you don&#39;t need anything from llvm&quot; i meant to go from source to bytecode (not from source to llvm).  sorry.","body":"ah, ok, i think i understand what confused everyone.  when i said &quot;you don&#39;t need anything from llvm&quot; i meant to go from source to bytecode (not from source to llvm).  sorry."},{"owner":{"account_id":334611,"reputation":2154,"user_id":661171,"accept_rate":95,"display_name":"cib"},"score":1,"creation_date":1397925763,"post_id":10804280,"comment_id":35438542,"body_markdown":"You can find class2llvm here: https://llvm.org/viewvc/llvm-project/java/?sortby=file&amp;pathrev=14484 However, I don&#39;t think it compiles anymore..","body":"You can find class2llvm here: <a href=\"https://llvm.org/viewvc/llvm-project/java/?sortby=file&amp;pathrev=14484\" rel=\"nofollow noreferrer\">llvm.org/viewvc/llvm-project/java/&hellip;</a> However, I don&#39;t think it compiles anymore.."},{"owner":{"account_id":2640892,"reputation":2951,"user_id":2284570,"accept_rate":44,"display_name":"user2284570"},"score":0,"creation_date":1595840455,"post_id":10804280,"comment_id":111602532,"body_markdown":"Please also check https://github.com/polyglot-compiler/JLang","body":"Please also check <a href=\"https://github.com/polyglot-compiler/JLang\" rel=\"nofollow noreferrer\">github.com/polyglot-compiler/JLang</a>"}],"answers":[{"tags":[],"owner":{"account_id":1469524,"reputation":1069,"user_id":2927352,"accept_rate":80,"display_name":"lei_z"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1508771566,"creation_date":1338377111,"answer_id":10815335,"question_id":10804280,"body_markdown":"You may take a look at [dragonegg](https://dragonegg.llvm.org/), which enables llvm to use gcc&#39;s frontends. As gcc already has a frontend for java, called **gcj**, perhaps llvm can use it to compile java code. But I&#39;m not sure how well llvm interfaces with the gcc frontend, so this may not work.","title":"Is there a llvm java front end that converts java source to llvm&#39;s intermediate form?","body":"<p>You may take a look at <a href=\"https://dragonegg.llvm.org/\" rel=\"nofollow noreferrer\">dragonegg</a>, which enables llvm to use gcc's frontends. As gcc already has a frontend for java, called <strong>gcj</strong>, perhaps llvm can use it to compile java code. But I'm not sure how well llvm interfaces with the gcc frontend, so this may not work.</p>\n"},{"tags":[],"owner":{"account_id":467557,"reputation":1865,"user_id":873019,"display_name":"Ashkan"},"down_vote_count":2,"up_vote_count":37,"is_accepted":true,"score":35,"last_activity_date":1354222139,"creation_date":1354222139,"answer_id":13634464,"question_id":10804280,"body_markdown":"The Java frontend translates Java bytecode (.class files) into LLVM\r\nbytecode. Take a look at this link:\r\n\r\nhttps://llvm.org/svn/llvm-project/java/trunk/docs/java-frontend.txt\r\n\r\n","title":"Is there a llvm java front end that converts java source to llvm&#39;s intermediate form?","body":"<p>The Java frontend translates Java bytecode (.class files) into LLVM\nbytecode. Take a look at this link:</p>\n\n<p><a href=\"https://llvm.org/svn/llvm-project/java/trunk/docs/java-frontend.txt\" rel=\"noreferrer\">https://llvm.org/svn/llvm-project/java/trunk/docs/java-frontend.txt</a></p>\n"},{"tags":[],"owner":{"account_id":467557,"reputation":1865,"user_id":873019,"display_name":"Ashkan"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1370943067,"creation_date":1358369219,"answer_id":14367526,"question_id":10804280,"body_markdown":"I have executed a java class using vmkit ( http://vmkit.llvm.org/ ) based on LLVM. It uses LLVM for compiling and optimizing high-level languages to machine code. J3 is an implementation of a JVM with VMKit.","title":"Is there a llvm java front end that converts java source to llvm&#39;s intermediate form?","body":"<p>I have executed a java class using vmkit ( <a href=\"http://vmkit.llvm.org/\" rel=\"nofollow\">http://vmkit.llvm.org/</a> ) based on LLVM. It uses LLVM for compiling and optimizing high-level languages to machine code. J3 is an implementation of a JVM with VMKit.</p>\n"},{"tags":[],"owner":{"account_id":2657865,"reputation":1618,"user_id":2298174,"accept_rate":100,"display_name":"expz"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1450145478,"creation_date":1416021208,"answer_id":26942112,"question_id":10804280,"body_markdown":"[**NOTE: From November 2015 it is no longer open source, so this hack is mostly useless.**]\n\n[RoboVM](http://www.robovm.com/develop/documentation/) might become the solution you&#39;re looking for. It&#39;s open source and compiles JVM bytecode (.class files) to machine code. \n\nI assume they do it using something like class2llvm.\n\nUnfortunately, it&#39;s still in alpha. I just tested it on HelloWorld.java. It gave 5x speed up of load time running on a single core. (Most of the run time is load time.)\n\n&gt; `echo Hello World! : &lt;1 ms  : 31K` (/usr/bin/echo binary)\n&gt;\n&gt; `java HelloWorld   : ~70 ms : 0.4K` (HelloWorld.class JVM bytecode)\n&gt;\n&gt; `./HelloWorld      : ~13 ms : 9.4MB` (9.3MB binary + 57K robovm-rt.jar)\n\nNote that java calls a 32MB $JAVA_HOME/lib/rt.jar file (and maybe more). Searching in such a large file must be part of the reason java is so slow to load. If RoboVM gets smarter, perhaps it can throw out most of the 9.3MB binary for an even faster load?\n\nThe website mentions iOS, but I think that&#39;s because they&#39;re selling their add-on UI libraries. RoboVM compiled fine for me on a flavor of Ubuntu. Just make sure to do\n\n&gt; $ sudo apt-get install g++-multilib\n\nfirst (and maybe install libpthread-stubs0-dev and libpthread-workqueue0...don&#39;t know if they mattered).\n","title":"Is there a llvm java front end that converts java source to llvm&#39;s intermediate form?","body":"<p>[<strong>NOTE: From November 2015 it is no longer open source, so this hack is mostly useless.</strong>]</p>\n<p><a href=\"http://www.robovm.com/develop/documentation/\" rel=\"nofollow noreferrer\">RoboVM</a> might become the solution you're looking for. It's open source and compiles JVM bytecode (.class files) to machine code.</p>\n<p>I assume they do it using something like class2llvm.</p>\n<p>Unfortunately, it's still in alpha. I just tested it on HelloWorld.java. It gave 5x speed up of load time running on a single core. (Most of the run time is load time.)</p>\n<blockquote>\n<p><code>echo Hello World! : &lt;1 ms  : 31K</code> (/usr/bin/echo binary)</p>\n<p><code>java HelloWorld   : ~70 ms : 0.4K</code> (HelloWorld.class JVM bytecode)</p>\n<p><code>./HelloWorld      : ~13 ms : 9.4MB</code> (9.3MB binary + 57K robovm-rt.jar)</p>\n</blockquote>\n<p>Note that java calls a 32MB $JAVA_HOME/lib/rt.jar file (and maybe more). Searching in such a large file must be part of the reason java is so slow to load. If RoboVM gets smarter, perhaps it can throw out most of the 9.3MB binary for an even faster load?</p>\n<p>The website mentions iOS, but I think that's because they're selling their add-on UI libraries. RoboVM compiled fine for me on a flavor of Ubuntu. Just make sure to do</p>\n<blockquote>\n<p>$ sudo apt-get install g++-multilib</p>\n</blockquote>\n<p>first (and maybe install libpthread-stubs0-dev and libpthread-workqueue0...don't know if they mattered).</p>\n"}],"owner":{"account_id":215110,"reputation":1065,"user_id":469506,"display_name":"FeelTheBurns"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38640,"favorite_count":0,"down_vote_count":1,"up_vote_count":67,"accepted_answer_id":13634464,"answer_count":4,"score":66,"last_activity_date":1635978098,"creation_date":1338314304,"question_id":10804280,"body_markdown":"From what I&#39;ve read, there is a llvm program that converts java bytecode to llvm&#39;s intermediate form called class2llvm. My question is, how do I access this. What front end do I have to install in order to access this. \r\n\r\nVMkit is their implementation of a JVM, but I am looking for how to compile the java source code with llvm, not how to run it.","title":"Is there a llvm java front end that converts java source to llvm&#39;s intermediate form?","body":"<p>From what I've read, there is a llvm program that converts java bytecode to llvm's intermediate form called class2llvm. My question is, how do I access this. What front end do I have to install in order to access this. </p>\n\n<p>VMkit is their implementation of a JVM, but I am looking for how to compile the java source code with llvm, not how to run it.</p>\n"},{"tags":["java","model-view-controller","client-server"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1635976141,"post_id":69831868,"comment_id":123438956,"body_markdown":"Are you running your network calls on the GUI thread? (I cannot follow your code clearly.)","body":"Are you running your network calls on the GUI thread? (I cannot follow your code clearly.)"},{"owner":{"account_id":21896433,"reputation":258,"user_id":16182652,"display_name":"Morello"},"score":0,"creation_date":1635976528,"post_id":69831868,"comment_id":123439060,"body_markdown":"yes, they are ran in the clientcontroller class. I then use a switch in the server model app class to receive the requests","body":"yes, they are ran in the clientcontroller class. I then use a switch in the server model app class to receive the requests"},{"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1635977580,"post_id":69831868,"comment_id":123439316,"body_markdown":"All long-running code must be run in its own thread, and the GUI updated by queuing information to the GUI thread as per the [Concurrency in Swing](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/) link.","body":"All long-running code must be run in its own thread, and the GUI updated by queuing information to the GUI thread as per the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/\" rel=\"nofollow noreferrer\">Concurrency in Swing</a> link."},{"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1635977708,"post_id":69831868,"comment_id":123439354,"body_markdown":"There is no [mre] posted with your question, and so we are not able to directly debug the issue to find the exact cause. Still, this is undoubtedly a concurrency issue.","body":"There is no <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> posted with your question, and so we are not able to directly debug the issue to find the exact cause. Still, this is undoubtedly a concurrency issue."},{"owner":{"account_id":21896433,"reputation":258,"user_id":16182652,"display_name":"Morello"},"score":0,"creation_date":1635977795,"post_id":69831868,"comment_id":123439374,"body_markdown":"sorry I will add the remaining code","body":"sorry I will add the remaining code"},{"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1635978209,"post_id":69831868,"comment_id":123439491,"body_markdown":"My assumption has been proved correct. `view.setTheSolution(Integer.parseInt(readFromServer()));` -- here is where you break Swing threading rules. Again, long-running code, such as reading in from the server, *must* be done on a background thread, such as a SwingWorker, and then queued to the GUI via the EDT, the event thread.","body":"My assumption has been proved correct. <code>view.setTheSolution(Integer.parseInt(readFromServer()));</code> -- here is where you break Swing threading rules. Again, long-running code, such as reading in from the server, <i>must</i> be done on a background thread, such as a SwingWorker, and then queued to the GUI via the EDT, the event thread."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1635979478,"post_id":69831868,"comment_id":123439768,"body_markdown":"https://en.wikipedia.org/wiki/SwingWorker and [*Lesson: Concurrency in Swing*](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)","body":"<a href=\"https://en.wikipedia.org/wiki/SwingWorker\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/SwingWorker</a> and <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html\" rel=\"nofollow noreferrer\"><i>Lesson: Concurrency in Swing</i></a>"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1635979518,"post_id":69831868,"comment_id":123439775,"body_markdown":"Always [search](https://stackoverflow.com/search?q=java+swing+freezes) thoroughly before posting. Duplicate of [this](https://stackoverflow.com/q/9419252/642706) and many others.","body":"Always <a href=\"https://stackoverflow.com/search?q=java+swing+freezes\">search</a> thoroughly before posting. Duplicate of <a href=\"https://stackoverflow.com/q/9419252/642706\">this</a> and many others."},{"owner":{"account_id":21896433,"reputation":258,"user_id":16182652,"display_name":"Morello"},"score":0,"creation_date":1635979797,"post_id":69831868,"comment_id":123439830,"body_markdown":"Thank you for your feedback but I am still confused as to where I would set this in my code","body":"Thank you for your feedback but I am still confused as to where I would set this in my code"},{"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1635983762,"post_id":69831868,"comment_id":123440579,"body_markdown":"You may not be at the point to do this yet. Read the [concurrency in Swing](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/) link first and *fully*, and then try to change your code to use a SwingWorker.","body":"You may not be at the point to do this yet. Read the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/\" rel=\"nofollow noreferrer\">concurrency in Swing</a> link first and <i>fully</i>, and then try to change your code to use a SwingWorker."}],"owner":{"account_id":21896433,"reputation":258,"user_id":16182652,"display_name":"Morello"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1635977770,"answer_count":0,"score":0,"last_activity_date":1635977899,"creation_date":1635974426,"question_id":69831868,"body_markdown":"I am trying to create a simple MVC client-server using a calculator app. When I try calculate/return the value my GUI freezes. I am not sure exactly what the problem is but I suspect it has something to do with my while(true) in my ControllerClient. I am unsure if I am communicating with the sockets correctly. I am using strings to communicate between client and server\r\n\r\n    package Client.Controller;\r\n    \r\n    import java.awt.event.ActionEvent;\r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.io.PrintWriter;\r\n    import java.net.Socket;\r\n    \r\n    import Client.View.CalculatorView;\r\n    \r\n    public class ClientController {\r\n    \tprivate CalculatorView view;\r\n    \tprivate Socket clientSocket;\r\n    \tprivate PrintWriter socketOut;\r\n    \tprivate BufferedReader socketIn;\r\n    \t\r\n    \t\r\n    \tpublic ClientController(CalculatorView view, String serverName, int portNum) throws IOException {\r\n    \t\tthis.view = view;\r\n    \t\tclientSocket = new Socket(serverName, portNum);\r\n    \t\tsocketIn = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\r\n    \t\tsocketOut = new PrintWriter((clientSocket.getOutputStream()), true);\r\n    \t}\r\n    \t\r\n    \tpublic void calculate() {\r\n    \t\t\r\n    \t\tString firstNum = Integer.toString(view.getFirstNumber());\r\n    \t\tString secNum = Integer.toString(view.getSecondNumber());\r\n    \t\t\r\n    \t\tsocketOut.println(&quot;1&quot; + firstNum + &quot;,&quot; + secNum);\r\n    \t\tview.setTheSolution(Integer.parseInt(readFromServer()));\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tpublic void communicate() {\r\n    \t\tview.setVisible(true);\r\n    \t\tview.addActionListener((ActionEvent e)-&gt;  {\r\n    \t\t\tcalculate();\r\n    \t\t});\r\n    \t}\r\n    \t\r\n    \tprivate String readFromServer() {\r\n    \t\tString s = &quot;&quot;;\r\n    \t\twhile(true) {\r\n    \t\t\ttry {\r\n    \t\t\t\ts += socketIn.readLine() + &quot;\\n&quot;;\r\n    \t\t\t\tif(s.contains(&quot;\\0&quot;)) {\r\n    \t\t\t\t\ts = s.replace(&quot;\\0&quot;, &quot;\\n&quot;);\r\n    \t\t\t\t\treturn s;\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t} catch (IOException e) {\r\n    \t\t\t\tSystem.out.println(&quot;Error in reading from server.&quot;);\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t}\r\n    \t\t\tSystem.out.println(s);\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \t\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\t\r\n    \t\tCalculatorView view = new CalculatorView();\r\n    \t\ttry {\r\n    \t\t\tClientController control = new ClientController(view, &quot;localhost&quot;, 9090);\r\n    \t\t\tcontrol.communicate();\r\n    \t\t}\r\n    \t\tcatch(IOException e) {\r\n    \t\t\tSystem.out.println(&quot;Error in main client controller&quot;);\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\n\r\nView:\r\n\r\n    package Client.View;\r\n    import java.awt.event.ActionListener;\r\n    \r\n    import javax.swing.*;\r\n    \r\n    public class CalculatorView extends JFrame {\r\n    \t\r\n    \tprivate JTextField firstNumber = new JTextField(10);\r\n    \tprivate JLabel addLabel = new JLabel(&quot;+&quot;);\r\n    \t\r\n    \tprivate JTextField secondNumber = new JTextField(10);\r\n    \t\r\n    \tprivate JButton calculateButton = new JButton(&quot;Calculate&quot;);\r\n    \t\r\n    \tprivate JTextField theSolution = new JTextField(10);\r\n    \t\r\n    \tpublic CalculatorView() {\r\n    \t\t\r\n    \t\tJPanel calcPanel = new JPanel();\r\n    \t\tsetSize(300, 300);\r\n    \t\t\r\n    \t\tcalcPanel.add(firstNumber);\r\n    \t\tcalcPanel.add(addLabel);\r\n    \t\tcalcPanel.add(secondNumber);\r\n    \t\tcalcPanel.add(calculateButton);\r\n    \t\tcalcPanel.add(theSolution);\r\n    \t\t\r\n    \t\tadd(calcPanel);\r\n    \t}\r\n    \t\r\n    \tpublic int getFirstNumber() {\r\n    \t\treturn Integer.parseInt(firstNumber.getText());\r\n    \t}\r\n    \tpublic int getSecondNumber() {\r\n    \t\treturn Integer.parseInt(secondNumber.getText());\r\n    \t}\t\r\n    \tpublic void setTheSolution(int solution) {\r\n    \t\tthis.theSolution.setText(Integer.toString(solution));\r\n    \t}\r\n    \tpublic void addActionListener(ActionListener listenForCalculateButton) {\r\n    \t\tcalculateButton.addActionListener(listenForCalculateButton);\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\nserver model app\r\n\r\n    package Server.Model;\r\n    \r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.PrintWriter;\r\n    \r\n    public class Application implements Runnable{\r\n    \t\r\n    \tprivate CalculatorModel calc;\r\n    \tPrintWriter socketOut;\r\n    \tBufferedReader socketIn;\r\n    \t\r\n    \tpublic Application(CalculatorModel calc, PrintWriter socketOut, BufferedReader socketIn) {\r\n    \t\tthis.calc = calc;\r\n    \t\tthis.socketOut = socketOut;\r\n    \t\tthis.socketIn = socketIn;\r\n    \t}\r\n    \t\r\n    \tpublic void menu() throws IOException {\r\n    \t\tint input;\r\n    \t\tint firstNum;\r\n    \t\tint secNum;\r\n    \t\t\r\n    \t\twhile(true) {\r\n    \t\t\tString request = socketIn.readLine();\r\n    \t\t\tString[] args = request.split(&quot;,&quot;);\r\n    \t\t\tinput = Integer.parseInt(args[0]);\r\n    \t\t\tswitch(input) {\r\n    \t\t\tcase 1:\r\n    \t\t\t\tfirstNum = Integer.parseInt(args[1]);\r\n    \t\t\t\tsecNum = Integer.parseInt(args[2]);\r\n    \t\t\t\taddNum(firstNum, secNum);\r\n    \t\t\t\tbreak;\r\n    \t\t\t\t\r\n    \t\t\tdefault:\r\n    \t\t\t\tSystem.out.println(&quot;Quitting Program&quot;);\r\n    \t\t\t\treturn;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic synchronized void addNum(int firstNum, int secNum) {\r\n    \t\tString s =&quot;&quot;;\r\n    \t\tcalc = new CalculatorModel();\r\n    \t\tcalc.addTwoNumbers(firstNum, secNum);\r\n    \t\ts = Integer.toString(calc.getResult());\r\n    \t\tsocketOut.println(s + &quot;\\0&quot;);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\ttry {\r\n    \t\t\tmenu();\r\n    \t\t} catch (IOException e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\nthe model\r\n\r\n    package Server.Model;\r\n    \r\n    public class CalculatorModel {\r\n    \r\n    \tprivate int result;\r\n    \t\r\n    \tpublic void addTwoNumbers(int a, int b) {\r\n    \t\tresult = (a + b);\r\n    \t}\r\n    \r\n    \tpublic int getResult() {\r\n    \t\treturn result;\r\n    \t}\r\n    \r\n    }\r\n\r\nmy server controller \r\n\r\n    package Server.Controller;\r\n    \r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.io.PrintWriter;\r\n    import java.net.ServerSocket;\r\n    import java.net.Socket;\r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.Executors;\r\n    \r\n    import Server.Model.Application;\r\n    import Server.Model.CalculatorModel;\r\n    \r\n    public class ServerController {\r\n    \tServerSocket serverSocket;\r\n    \tExecutorService pool;\r\n    \tCalculatorModel calc;\r\n    \t\r\n    \tpublic ServerController(int portNum, CalculatorModel calc) {\r\n    \t\ttry {\r\n    \t\t\tserverSocket = new ServerSocket(portNum);\r\n    \t\t\tpool = Executors.newCachedThreadPool();\r\n    \t\t\tthis.calc = calc;\r\n    \t\t\tSystem.out.println(&quot;Server is running...&quot;);\r\n    \t\t} catch (IOException e) {\r\n    \t\t\tSystem.out.println(&quot;Error in creating server controller.&quot;);\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic void communicate() {\r\n    \t\twhile(true) {\r\n    \t\t\ttry {\r\n    \t\t\t\tSocket socket = serverSocket.accept();\r\n    \t\t\t\tBufferedReader socketIn = new BufferedReader(new InputStreamReader(socket.getInputStream()));\r\n    \t\t\t\tPrintWriter socketOut = new PrintWriter(socket.getOutputStream(), true);\r\n    \t\t\t\t\r\n    \t\t\t\tString request = socketIn.readLine();\r\n    \t\t\t\tString[] args = request.split(&quot;,&quot;);\r\n    \t\t\t\tint firstNum = Integer.parseInt(args[0]);\r\n    \t\t\t\tint secNum = Integer.parseInt(args[1]);\r\n    \t\t\t\t\r\n    \t\t\t\tApplication app = new Application(calc, socketOut, socketIn);\r\n    \t\t\t\tpool.execute(app);\r\n    \t\t\t} catch (IOException e) {\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tCalculatorModel calc = new CalculatorModel();\r\n    \t\tServerController server = new ServerController(9090, calc);\r\n    \t\tserver.communicate();\r\n    \t}\r\n    \r\n    }","title":"Java client-server GUI freezing","body":"<p>I am trying to create a simple MVC client-server using a calculator app. When I try calculate/return the value my GUI freezes. I am not sure exactly what the problem is but I suspect it has something to do with my while(true) in my ControllerClient. I am unsure if I am communicating with the sockets correctly. I am using strings to communicate between client and server</p>\n<pre><code>package Client.Controller;\n\nimport java.awt.event.ActionEvent;\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.net.Socket;\n\nimport Client.View.CalculatorView;\n\npublic class ClientController {\n    private CalculatorView view;\n    private Socket clientSocket;\n    private PrintWriter socketOut;\n    private BufferedReader socketIn;\n    \n    \n    public ClientController(CalculatorView view, String serverName, int portNum) throws IOException {\n        this.view = view;\n        clientSocket = new Socket(serverName, portNum);\n        socketIn = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\n        socketOut = new PrintWriter((clientSocket.getOutputStream()), true);\n    }\n    \n    public void calculate() {\n        \n        String firstNum = Integer.toString(view.getFirstNumber());\n        String secNum = Integer.toString(view.getSecondNumber());\n        \n        socketOut.println(&quot;1&quot; + firstNum + &quot;,&quot; + secNum);\n        view.setTheSolution(Integer.parseInt(readFromServer()));\n        \n    }\n    \n    public void communicate() {\n        view.setVisible(true);\n        view.addActionListener((ActionEvent e)-&gt;  {\n            calculate();\n        });\n    }\n    \n    private String readFromServer() {\n        String s = &quot;&quot;;\n        while(true) {\n            try {\n                s += socketIn.readLine() + &quot;\\n&quot;;\n                if(s.contains(&quot;\\0&quot;)) {\n                    s = s.replace(&quot;\\0&quot;, &quot;\\n&quot;);\n                    return s;\n                }\n                \n            } catch (IOException e) {\n                System.out.println(&quot;Error in reading from server.&quot;);\n                e.printStackTrace();\n            }\n            System.out.println(s);\n        }\n    }\n    \n    \n    \n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        \n        CalculatorView view = new CalculatorView();\n        try {\n            ClientController control = new ClientController(view, &quot;localhost&quot;, 9090);\n            control.communicate();\n        }\n        catch(IOException e) {\n            System.out.println(&quot;Error in main client controller&quot;);\n            e.printStackTrace();\n        }\n\n    }\n\n}\n</code></pre>\n<p>View:</p>\n<pre><code>package Client.View;\nimport java.awt.event.ActionListener;\n\nimport javax.swing.*;\n\npublic class CalculatorView extends JFrame {\n    \n    private JTextField firstNumber = new JTextField(10);\n    private JLabel addLabel = new JLabel(&quot;+&quot;);\n    \n    private JTextField secondNumber = new JTextField(10);\n    \n    private JButton calculateButton = new JButton(&quot;Calculate&quot;);\n    \n    private JTextField theSolution = new JTextField(10);\n    \n    public CalculatorView() {\n        \n        JPanel calcPanel = new JPanel();\n        setSize(300, 300);\n        \n        calcPanel.add(firstNumber);\n        calcPanel.add(addLabel);\n        calcPanel.add(secondNumber);\n        calcPanel.add(calculateButton);\n        calcPanel.add(theSolution);\n        \n        add(calcPanel);\n    }\n    \n    public int getFirstNumber() {\n        return Integer.parseInt(firstNumber.getText());\n    }\n    public int getSecondNumber() {\n        return Integer.parseInt(secondNumber.getText());\n    }   \n    public void setTheSolution(int solution) {\n        this.theSolution.setText(Integer.toString(solution));\n    }\n    public void addActionListener(ActionListener listenForCalculateButton) {\n        calculateButton.addActionListener(listenForCalculateButton);\n    }\n\n}\n</code></pre>\n<p>server model app</p>\n<pre><code>package Server.Model;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.PrintWriter;\n\npublic class Application implements Runnable{\n    \n    private CalculatorModel calc;\n    PrintWriter socketOut;\n    BufferedReader socketIn;\n    \n    public Application(CalculatorModel calc, PrintWriter socketOut, BufferedReader socketIn) {\n        this.calc = calc;\n        this.socketOut = socketOut;\n        this.socketIn = socketIn;\n    }\n    \n    public void menu() throws IOException {\n        int input;\n        int firstNum;\n        int secNum;\n        \n        while(true) {\n            String request = socketIn.readLine();\n            String[] args = request.split(&quot;,&quot;);\n            input = Integer.parseInt(args[0]);\n            switch(input) {\n            case 1:\n                firstNum = Integer.parseInt(args[1]);\n                secNum = Integer.parseInt(args[2]);\n                addNum(firstNum, secNum);\n                break;\n                \n            default:\n                System.out.println(&quot;Quitting Program&quot;);\n                return;\n            }\n        }\n    }\n    \n    public synchronized void addNum(int firstNum, int secNum) {\n        String s =&quot;&quot;;\n        calc = new CalculatorModel();\n        calc.addTwoNumbers(firstNum, secNum);\n        s = Integer.toString(calc.getResult());\n        socketOut.println(s + &quot;\\0&quot;);\n    }\n\n    @Override\n    public void run() {\n        // TODO Auto-generated method stub\n        try {\n            menu();\n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n        \n    }\n\n}\n</code></pre>\n<p>the model</p>\n<pre><code>package Server.Model;\n\npublic class CalculatorModel {\n\n    private int result;\n    \n    public void addTwoNumbers(int a, int b) {\n        result = (a + b);\n    }\n\n    public int getResult() {\n        return result;\n    }\n\n}\n</code></pre>\n<p>my server controller</p>\n<pre><code>package Server.Controller;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\nimport Server.Model.Application;\nimport Server.Model.CalculatorModel;\n\npublic class ServerController {\n    ServerSocket serverSocket;\n    ExecutorService pool;\n    CalculatorModel calc;\n    \n    public ServerController(int portNum, CalculatorModel calc) {\n        try {\n            serverSocket = new ServerSocket(portNum);\n            pool = Executors.newCachedThreadPool();\n            this.calc = calc;\n            System.out.println(&quot;Server is running...&quot;);\n        } catch (IOException e) {\n            System.out.println(&quot;Error in creating server controller.&quot;);\n            e.printStackTrace();\n        }\n    }\n    \n    public void communicate() {\n        while(true) {\n            try {\n                Socket socket = serverSocket.accept();\n                BufferedReader socketIn = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n                PrintWriter socketOut = new PrintWriter(socket.getOutputStream(), true);\n                \n                String request = socketIn.readLine();\n                String[] args = request.split(&quot;,&quot;);\n                int firstNum = Integer.parseInt(args[0]);\n                int secNum = Integer.parseInt(args[1]);\n                \n                Application app = new Application(calc, socketOut, socketIn);\n                pool.execute(app);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n    \n    public static void main(String[] args) {\n        CalculatorModel calc = new CalculatorModel();\n        ServerController server = new ServerController(9090, calc);\n        server.communicate();\n    }\n\n}\n</code></pre>\n"},{"tags":["java","list","iterator"],"answers":[{"tags":[],"owner":{"account_id":13459822,"reputation":1807,"user_id":9712270,"display_name":"magicmn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635977679,"creation_date":1635977568,"answer_id":69832328,"question_id":69832195,"body_markdown":"The problem is that in your code you are loosing the type parameter when you obtain the list iterator.\r\n\r\n    public static &lt;E&gt; void append(List&lt;E&gt; list1, List&lt;E&gt; list2) {\r\n        Iterator&lt;E&gt; list2Iterator = list2.listIterator();\r\n        while(list2Iterator.hasNext()) {\r\n            list1.add(list2Iterator.next());\r\n        }\r\n    }\r\n\r\nBut you should avoid manually adding all elements of a collections 1 by 1 to another collection. Here is a better solution:\r\n\r\n    list1.addAll(list2);","title":"Why am I getting an incompatible type error when using the List Iterator&#39;s next method but not when I use List&#39;s get method?","body":"<p>The problem is that in your code you are loosing the type parameter when you obtain the list iterator.</p>\n<pre><code>public static &lt;E&gt; void append(List&lt;E&gt; list1, List&lt;E&gt; list2) {\n    Iterator&lt;E&gt; list2Iterator = list2.listIterator();\n    while(list2Iterator.hasNext()) {\n        list1.add(list2Iterator.next());\n    }\n}\n</code></pre>\n<p>But you should avoid manually adding all elements of a collections 1 by 1 to another collection. Here is a better solution:</p>\n<pre><code>list1.addAll(list2);\n</code></pre>\n"}],"owner":{"account_id":23231835,"reputation":13,"user_id":17322441,"display_name":"gumbojoe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":436,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69832328,"answer_count":1,"score":1,"last_activity_date":1635977679,"creation_date":1635976603,"question_id":69832195,"body_markdown":"    public static void main(String args[]) \r\n    {\r\n        ArrayList&lt;String&gt; names = new ArrayList&lt;String&gt;();\r\n        names.add(&quot;Brett&quot;);\r\n        \r\n        ArrayList&lt;String&gt; names2 = new ArrayList&lt;String&gt;();\r\n        names2.add(&quot;John&quot;);\r\n        \r\n        append(names, names2);\r\n        \r\n    }\r\n    \r\n    public static &lt;E&gt; void append(List&lt;E&gt; list1, List&lt;E&gt; list2)\r\n    {\r\n        Iterator list2Iterator = list2.listIterator();\r\n        while(list2Iterator.hasNext())\r\n        {\r\n            list1.add(list2Iterator.next());\r\n        }\r\n    }\r\n\r\nI was asked to append the elements of one list to another. I used the list2&#39;s iterator to retrieve each element, and passed them to list1&#39;s add method. But I got this error: incompatible types: Object cannot be converted to E. However, if I modify the append method: \r\n\r\n    public static &lt;E&gt; void append(List&lt;E&gt; list1, List&lt;E&gt; list2)\r\n    {\r\n        for (int i = 0; i &lt; list2.size(); i++)\r\n            list1.add(list2.get(i));\r\n    }\r\nit works just fine. Both the list iterator and the get method return the same type, but only the latter works. I&#39;m sure the reason is simple, I just haven&#39;t figured it out so far.\r\n\r\nThanks,\r\n","title":"Why am I getting an incompatible type error when using the List Iterator&#39;s next method but not when I use List&#39;s get method?","body":"<pre><code>public static void main(String args[]) \n{\n    ArrayList&lt;String&gt; names = new ArrayList&lt;String&gt;();\n    names.add(&quot;Brett&quot;);\n    \n    ArrayList&lt;String&gt; names2 = new ArrayList&lt;String&gt;();\n    names2.add(&quot;John&quot;);\n    \n    append(names, names2);\n    \n}\n\npublic static &lt;E&gt; void append(List&lt;E&gt; list1, List&lt;E&gt; list2)\n{\n    Iterator list2Iterator = list2.listIterator();\n    while(list2Iterator.hasNext())\n    {\n        list1.add(list2Iterator.next());\n    }\n}\n</code></pre>\n<p>I was asked to append the elements of one list to another. I used the list2's iterator to retrieve each element, and passed them to list1's add method. But I got this error: incompatible types: Object cannot be converted to E. However, if I modify the append method:</p>\n<pre><code>public static &lt;E&gt; void append(List&lt;E&gt; list1, List&lt;E&gt; list2)\n{\n    for (int i = 0; i &lt; list2.size(); i++)\n        list1.add(list2.get(i));\n}\n</code></pre>\n<p>it works just fine. Both the list iterator and the get method return the same type, but only the latter works. I'm sure the reason is simple, I just haven't figured it out so far.</p>\n<p>Thanks,</p>\n"},{"tags":["java","database","odbc"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1635978010,"post_id":69832333,"comment_id":123439434,"body_markdown":"You can&#39;t: an exception was thrown because it was impossible to create a Connection. You can return null, but that is just going to result in a harder-to-diagnose error when the caller tries to use it. Instead, get rid of the try/catch entirely and let `connect` throw an exception. This will report the cause of the problem at the earliest opportunity.","body":"You can&#39;t: an exception was thrown because it was impossible to create a Connection. You can return null, but that is just going to result in a harder-to-diagnose error when the caller tries to use it. Instead, get rid of the try/catch entirely and let <code>connect</code> throw an exception. This will report the cause of the problem at the earliest opportunity."},{"owner":{"account_id":22425724,"reputation":1060,"user_id":16632363,"display_name":"user16632363"},"score":1,"creation_date":1635979863,"post_id":69832333,"comment_id":123439844,"body_markdown":"Since you cannot guarantee that no failure will happen, you really only have two choices: return a value that says &quot;failed&quot; instead of the expected connection object (null is a popular choice), or don&#39;t return inline: throw an exception, or equivalently don&#39;t intercept the exception that someone further down the stack already threw. I&#39;d go with the exception.","body":"Since you cannot guarantee that no failure will happen, you really only have two choices: return a value that says &quot;failed&quot; instead of the expected connection object (null is a popular choice), or don&#39;t return inline: throw an exception, or equivalently don&#39;t intercept the exception that someone further down the stack already threw. I&#39;d go with the exception."}],"owner":{"account_id":19565153,"reputation":1,"user_id":14317521,"display_name":"jonaskoennel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1635977616,"creation_date":1635977616,"question_id":69832333,"body_markdown":"I have to do a task for my university where I should write a function that returns a connection to a database. I create a new Connection object in the try block and now want to return it, but i need to ensure that my function always returns a connection even if i land in the catch block. How do I write a function that always returns a connection? I have tried to use finally, but the variable cn only exists in the try block.\r\n\r\n\r\n    import java.sql.Connection;\r\n    import java.sql.DriverManager;\r\n    import java.util.Properties;\r\n    \r\n    \r\n    \r\n    public class ConnectDB {\r\n    \t\r\n    \tfinal String propfile = &quot;/properties/db.properties&quot;; \r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tConnectDB con = new ConnectDB();\r\n    \t\tcon.connect();\r\n    \t    \r\n    \t}\r\n    \tpublic Connection connect() {\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\tfinal java.io.InputStream propFile = new ConnectDB().getClass().getResourceAsStream(propfile);\r\n    \t\t    final Properties props = new Properties(System.getProperties());\r\n    \t\t    props.load(propFile);\t\r\n    \t\t    Connection cn = DriverManager.getConnection(props.getProperty(&quot;url&quot;), props.getProperty(&quot;user&quot;), props.getProperty(&quot;password&quot;));\r\n    \t\t    return cn;\r\n    \t\t}\r\n    \t\t    \r\n    \t\tcatch (Exception e) {\r\n    \t\t\tSystem.out.println(&quot;connect ERROR :\\n&quot; + e.toString());\r\n    \t\t}\r\n    \t\t  \r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"How do I ensure that my function always returns my generated connection object?","body":"<p>I have to do a task for my university where I should write a function that returns a connection to a database. I create a new Connection object in the try block and now want to return it, but i need to ensure that my function always returns a connection even if i land in the catch block. How do I write a function that always returns a connection? I have tried to use finally, but the variable cn only exists in the try block.</p>\n<pre><code>import java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.util.Properties;\n\n\n\npublic class ConnectDB {\n    \n    final String propfile = &quot;/properties/db.properties&quot;; \n\n    public static void main(String[] args) {\n        ConnectDB con = new ConnectDB();\n        con.connect();\n        \n    }\n    public Connection connect() {\n        \n        try {\n            final java.io.InputStream propFile = new ConnectDB().getClass().getResourceAsStream(propfile);\n            final Properties props = new Properties(System.getProperties());\n            props.load(propFile);   \n            Connection cn = DriverManager.getConnection(props.getProperty(&quot;url&quot;), props.getProperty(&quot;user&quot;), props.getProperty(&quot;password&quot;));\n            return cn;\n        }\n            \n        catch (Exception e) {\n            System.out.println(&quot;connect ERROR :\\n&quot; + e.toString());\n        }\n          \n    }\n\n}\n</code></pre>\n"},{"tags":["java","unit-testing","junit","mockito"],"answers":[{"tags":[],"owner":{"account_id":1153671,"reputation":2570,"user_id":1134856,"accept_rate":36,"display_name":"treeno"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635977367,"creation_date":1635977367,"answer_id":69832307,"question_id":69831866,"body_markdown":"I would move the lambda&#39;s content to a separate method, which could be tested directly:\r\n\r\n    public void someMethod() {\r\n       s3Event.getRecords().forEach(this::parse);\r\n    }\r\n\r\n    void parse(...) {\r\n       ...\r\n    }\r\n\r\nThis would also improve the readability, since lambdas with more then one line are harder to read then a method reference that has a self-explanatory name.","title":"How to unit Test Lambda functions in Mockito?","body":"<p>I would move the lambda's content to a separate method, which could be tested directly:</p>\n<pre><code>public void someMethod() {\n   s3Event.getRecords().forEach(this::parse);\n}\n\nvoid parse(...) {\n   ...\n}\n</code></pre>\n<p>This would also improve the readability, since lambdas with more then one line are harder to read then a method reference that has a self-explanatory name.</p>\n"}],"owner":{"account_id":17641050,"reputation":65,"user_id":12803314,"display_name":"parthc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2103,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69832307,"answer_count":1,"score":1,"last_activity_date":1635977367,"creation_date":1635974423,"question_id":69831866,"body_markdown":"I have a lambda handler which triggers whenever for every S3Event. \r\n\r\n    s3Event.getRecords().forEach(record-&gt;{\r\n            final String bucket = record.getS3().getBucket().getName();\r\n            final String object = record.getS3().getObject().getKey();\r\n            S3Object s3Object = amazonS3.getObject(bucket, object);\r\n        \r\n                ... More parsing logic\r\n\r\nSo in order to test this function, I have created Mock S3Event builder which would build a mock S3Event for me. Also\r\n\r\n    S3Event s3Event = buildS3Event(S3_BUCKET_NAME, S3_FILE_NAME);\r\n        List&lt;S3EventNotification.S3EventNotificationRecord&gt; mockRecords = s3Event.getRecords();\r\n        S3EventNotification.S3EventNotificationRecord mockFirstRecord = s3Event.getRecords().get(0);\r\n        S3EventNotification.S3Entity mockS3Entity = mockFirstRecord.getS3();\r\n        S3EventNotification.S3BucketEntity mockS3BucketEntity = mockS3Entity.getBucket();\r\n        S3EventNotification.S3ObjectEntity mockS3ObjectEntity = mockS3Entity.getObject();\r\n        String bucketName = mockS3BucketEntity.getName();\r\n        String keyName = mockS3ObjectEntity.getKey();\r\n\r\nBuildS3Event, getMockS3Bocket are utility function that I have used to to create respective mocks.\r\n\r\nClass mocks as well:\r\n\r\n        s3Client = Mockito.mock(AmazonS3.class);\r\n        s3Object = Mockito.mock(S3Object.class);\r\n        s3EventMock = Mockito.mock(S3Event.class);\r\n        notificationRecord = Mockito.mock(S3EventNotification.S3EventNotificationRecord.class);\r\n        notificationRecords = Mockito.mock(List.class);\r\n        s3Entity = Mockito.mock(S3EventNotification.S3Entity.class);\r\n        s3BucketEntity = Mockito.mock(S3EventNotification.S3BucketEntity.class);\r\n        s3ObjectEntity = Mockito.mock(S3EventNotification.S3ObjectEntity.class);\r\n\r\n        when(s3EventMock.getRecords()).thenReturn(mockRecords);\r\n\r\n        handler.handle(s3Event, null) &lt;--- calling the handler \r\n        verify(s3EventMock, times(1)).getRecords(); // seems to work\r\n        verify(notificationRecords, times(1)).get(0); // fails with wanted but not invoked error.\r\n\r\nAm I missing something while mocking?\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to unit Test Lambda functions in Mockito?","body":"<p>I have a lambda handler which triggers whenever for every S3Event.</p>\n<pre><code>s3Event.getRecords().forEach(record-&gt;{\n        final String bucket = record.getS3().getBucket().getName();\n        final String object = record.getS3().getObject().getKey();\n        S3Object s3Object = amazonS3.getObject(bucket, object);\n    \n            ... More parsing logic\n</code></pre>\n<p>So in order to test this function, I have created Mock S3Event builder which would build a mock S3Event for me. Also</p>\n<pre><code>S3Event s3Event = buildS3Event(S3_BUCKET_NAME, S3_FILE_NAME);\n    List&lt;S3EventNotification.S3EventNotificationRecord&gt; mockRecords = s3Event.getRecords();\n    S3EventNotification.S3EventNotificationRecord mockFirstRecord = s3Event.getRecords().get(0);\n    S3EventNotification.S3Entity mockS3Entity = mockFirstRecord.getS3();\n    S3EventNotification.S3BucketEntity mockS3BucketEntity = mockS3Entity.getBucket();\n    S3EventNotification.S3ObjectEntity mockS3ObjectEntity = mockS3Entity.getObject();\n    String bucketName = mockS3BucketEntity.getName();\n    String keyName = mockS3ObjectEntity.getKey();\n</code></pre>\n<p>BuildS3Event, getMockS3Bocket are utility function that I have used to to create respective mocks.</p>\n<p>Class mocks as well:</p>\n<pre><code>    s3Client = Mockito.mock(AmazonS3.class);\n    s3Object = Mockito.mock(S3Object.class);\n    s3EventMock = Mockito.mock(S3Event.class);\n    notificationRecord = Mockito.mock(S3EventNotification.S3EventNotificationRecord.class);\n    notificationRecords = Mockito.mock(List.class);\n    s3Entity = Mockito.mock(S3EventNotification.S3Entity.class);\n    s3BucketEntity = Mockito.mock(S3EventNotification.S3BucketEntity.class);\n    s3ObjectEntity = Mockito.mock(S3EventNotification.S3ObjectEntity.class);\n\n    when(s3EventMock.getRecords()).thenReturn(mockRecords);\n\n    handler.handle(s3Event, null) &lt;--- calling the handler \n    verify(s3EventMock, times(1)).getRecords(); // seems to work\n    verify(notificationRecords, times(1)).get(0); // fails with wanted but not invoked error.\n</code></pre>\n<p>Am I missing something while mocking?</p>\n"},{"tags":["java","class","templates","generics","initialization"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":1,"creation_date":1635976862,"post_id":69832204,"comment_id":123439152,"body_markdown":"T is a generic type parameter. It&#39;s decided by whatever code instantiates A. If someone creates an `A&lt;String&gt;` or `A&lt;List&gt;` then the field `a` will not be a number field, so trying to set it to 89L does not make sense. If you want `a` to be a long, don&#39;t declare it as a generic type.","body":"T is a generic type parameter. It&#39;s decided by whatever code instantiates A. If someone creates an <code>A&lt;String&gt;</code> or <code>A&lt;List&gt;</code> then the field <code>a</code> will not be a number field, so trying to set it to 89L does not make sense. If you want <code>a</code> to be a long, don&#39;t declare it as a generic type."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635977025,"creation_date":1635977025,"answer_id":69832262,"question_id":69832204,"body_markdown":"As the error says: You may only assign expressions that whose type is `T` to `a`.\r\n\r\n89L is an expression of type `long`. T can be anything. Therefore, `89L`, or for that matter, __any expression at all__ cannot possibly be of type T unless you already _have_ an expression of type T.\r\n\r\nThis works, and is in fact the _only_ way to obtain an expression of type T:\r\n\r\n```\r\nclass A&lt;T&gt; {\r\n  T a;\r\n\r\n  A(T in) {\r\n   this.a = in;\r\n  }\r\n}\r\n```\r\n\r\nYou need to obtain an expression of type T from a caller or from something the caller provides. Could also be, say, a `Supplier&lt;T&gt;` or a `List&lt;T&gt;` or even a `List&lt;? extends T&gt;` - but one way or another you need the caller to give you something so you can get a T, because you can&#39;t make one on your own.\r\n\r\nGenerics serve to link things. Generics lets you state: &quot;I have no idea what T might be, but I want to write a method where the parameter&#39;s type is the same as the return type&quot;. In other words, when you use generics, you must use them in __at least__ 2 places: As it serves to link types in different places, using them once is completely useless. In your example, you use it only once, which makes generics useless.\r\n\r\nIn other words, you appear to not understand what generics are for, that&#39;s your underlying problem here. If you want to assign a long value to the `a` field regardless of what the user of your class might wish to do, then your field should simply be declared as `private long a;`, not as `private T a;`.\r\n","title":"Unable to initialize data member of generic type","body":"<p>As the error says: You may only assign expressions that whose type is <code>T</code> to <code>a</code>.</p>\n<p>89L is an expression of type <code>long</code>. T can be anything. Therefore, <code>89L</code>, or for that matter, <strong>any expression at all</strong> cannot possibly be of type T unless you already <em>have</em> an expression of type T.</p>\n<p>This works, and is in fact the <em>only</em> way to obtain an expression of type T:</p>\n<pre><code>class A&lt;T&gt; {\n  T a;\n\n  A(T in) {\n   this.a = in;\n  }\n}\n</code></pre>\n<p>You need to obtain an expression of type T from a caller or from something the caller provides. Could also be, say, a <code>Supplier&lt;T&gt;</code> or a <code>List&lt;T&gt;</code> or even a <code>List&lt;? extends T&gt;</code> - but one way or another you need the caller to give you something so you can get a T, because you can't make one on your own.</p>\n<p>Generics serve to link things. Generics lets you state: &quot;I have no idea what T might be, but I want to write a method where the parameter's type is the same as the return type&quot;. In other words, when you use generics, you must use them in <strong>at least</strong> 2 places: As it serves to link types in different places, using them once is completely useless. In your example, you use it only once, which makes generics useless.</p>\n<p>In other words, you appear to not understand what generics are for, that's your underlying problem here. If you want to assign a long value to the <code>a</code> field regardless of what the user of your class might wish to do, then your field should simply be declared as <code>private long a;</code>, not as <code>private T a;</code>.</p>\n"}],"owner":{"account_id":19464053,"reputation":3,"user_id":14237707,"display_name":"Anonymous"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1635977025,"creation_date":1635976650,"question_id":69832204,"body_markdown":"```\r\nclass A &lt;T&gt;{\r\nT a;\r\n\r\nA(){\r\n    a=89l;//error: incompatible types: long cannot be converted to T\r\n}\r\n    \r\n}\r\npublic class Main extends Exception{\r\n    \r\n    public static void main(String[] args) {\r\n\r\n    }\r\n}\r\n```\r\nwhy it is giving me error i did all things syntactically ","title":"Unable to initialize data member of generic type","body":"<pre><code>class A &lt;T&gt;{\nT a;\n\nA(){\n    a=89l;//error: incompatible types: long cannot be converted to T\n}\n    \n}\npublic class Main extends Exception{\n    \n    public static void main(String[] args) {\n\n    }\n}\n</code></pre>\n<p>why it is giving me error i did all things syntactically</p>\n"},{"tags":["java","tomcat","nonblocking"],"answers":[{"tags":[],"owner":{"account_id":6743753,"reputation":581,"user_id":5196046,"display_name":"Subra M"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1488473237,"creation_date":1488473237,"answer_id":42561191,"question_id":40722254,"body_markdown":"http-nio-&lt;port&gt;-exec-&lt;index&gt; (usually 10) =&gt; This can be controlled by setting &quot;server.tomcat.max-threads=10&quot; in application.properties. If its set to 1, then you see only one thread http-nio-&lt;port&gt;-exec-1. \r\n\r\nI am too trying to find out other thread pools.","title":"Tomcat NIO thread pools","body":"<p>http-nio--exec- (usually 10) => This can be controlled by setting \"server.tomcat.max-threads=10\" in application.properties. If its set to 1, then you see only one thread http-nio--exec-1. </p>\n\n<p>I am too trying to find out other thread pools.</p>\n"},{"tags":[],"owner":{"account_id":17359971,"reputation":2702,"user_id":12576497,"display_name":"RUARO Thibault"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1591888159,"creation_date":1591888159,"answer_id":62327513,"question_id":40722254,"body_markdown":"The proper solution with Spring and Tomcat would be to use 2 properties:\r\n```\r\nserver.tomcat.max-threads=200 # Maximum amount of worker threads.\r\nserver.tomcat.min-spare-threads=10 # Minimum amount of worker threads\r\n```\r\nIf you change the `server.tomcat.max-thread` below the `server.tomcat.min-spare-threads`, then you will have as many thread as the max-thread property.\r\n\r\nIf you change the `server.tomcat.min-spare-threads`, then you will have as many thread as specified.\r\n\r\nFor instance, if you set to this: `server.tomcat.min-spare-threads=15`, then you will have 15 `http-nio-8080-exec-*`","title":"Tomcat NIO thread pools","body":"<p>The proper solution with Spring and Tomcat would be to use 2 properties:</p>\n\n<pre><code>server.tomcat.max-threads=200 # Maximum amount of worker threads.\nserver.tomcat.min-spare-threads=10 # Minimum amount of worker threads\n</code></pre>\n\n<p>If you change the <code>server.tomcat.max-thread</code> below the <code>server.tomcat.min-spare-threads</code>, then you will have as many thread as the max-thread property.</p>\n\n<p>If you change the <code>server.tomcat.min-spare-threads</code>, then you will have as many thread as specified.</p>\n\n<p>For instance, if you set to this: <code>server.tomcat.min-spare-threads=15</code>, then you will have 15 <code>http-nio-8080-exec-*</code></p>\n"}],"owner":{"account_id":1216438,"reputation":1383,"user_id":1195137,"accept_rate":21,"display_name":"Rag"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22029,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"answer_count":2,"score":20,"last_activity_date":1635976957,"creation_date":1479737675,"question_id":40722254,"body_markdown":"I understand Java NIO (channels, selector, ..). I would like to understand Tomcat NIO better so that I can configure thread pools of Tomcat appropriately from Spring boot. \r\n\r\nCan someone please explain what is the purpose of each thread pool and how do these work in relevance to Java NIO? It would be helpful if you can also point out which thread pool is used during the processing of HTTP requests.\r\n\r\nSome Tomcat8 thread pools observed during thread dumps:\r\n\r\n    http-nio-&lt;port&gt;-Acceptor (usually 1 or 2 threads)\r\n    http-nio-&lt;port&gt;-ClientPoller-&lt;index&gt; (usually 2)\r\n    http-nio-&lt;port&gt;-exec-&lt;index&gt; (usually 10)\r\n    NioBlockingSelector.BlockPoller-&lt;index&gt; (usually 2)\r\n\r\n","title":"Tomcat NIO thread pools","body":"<p>I understand Java NIO (channels, selector, ..). I would like to understand Tomcat NIO better so that I can configure thread pools of Tomcat appropriately from Spring boot.</p>\n<p>Can someone please explain what is the purpose of each thread pool and how do these work in relevance to Java NIO? It would be helpful if you can also point out which thread pool is used during the processing of HTTP requests.</p>\n<p>Some Tomcat8 thread pools observed during thread dumps:</p>\n<pre><code>http-nio-&lt;port&gt;-Acceptor (usually 1 or 2 threads)\nhttp-nio-&lt;port&gt;-ClientPoller-&lt;index&gt; (usually 2)\nhttp-nio-&lt;port&gt;-exec-&lt;index&gt; (usually 10)\nNioBlockingSelector.BlockPoller-&lt;index&gt; (usually 2)\n</code></pre>\n"},{"tags":["java","setter"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1635968795,"post_id":69830890,"comment_id":123436494,"body_markdown":"What&#39;s the point of making `setShortName()` public?","body":"What&#39;s the point of making <code>setShortName()</code> public?"},{"owner":{"account_id":20221335,"reputation":158,"user_id":14830735,"display_name":"Hleb Shypula"},"score":0,"creation_date":1635968971,"post_id":69830890,"comment_id":123436566,"body_markdown":"@shmosel I will make it private ofc. But now I&#39;m not sure if it is a good approach to initialize shortName this way. Maybe there are some good patterns to do such things.","body":"@shmosel I will make it private ofc. But now I&#39;m not sure if it is a good approach to initialize shortName this way. Maybe there are some good patterns to do such things."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1635969193,"post_id":69830890,"comment_id":123436636,"body_markdown":"I think it&#39;s fine. An alternative is to scrap the extra field and do the logic in a getter: `public String getShortName() { return this.fullName.substring(0, 1); }`","body":"I think it&#39;s fine. An alternative is to scrap the extra field and do the logic in a getter: <code>public String getShortName() { return this.fullName.substring(0, 1); }</code>"},{"owner":{"account_id":20221335,"reputation":158,"user_id":14830735,"display_name":"Hleb Shypula"},"score":0,"creation_date":1635969379,"post_id":69830890,"comment_id":123436703,"body_markdown":"@shmosel It must be a field, because I send a json object to my frontend","body":"@shmosel It must be a field, because I send a json object to my frontend"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1635969426,"post_id":69830890,"comment_id":123436728,"body_markdown":"I don&#39;t see the connection.","body":"I don&#39;t see the connection."},{"owner":{"account_id":20221335,"reputation":158,"user_id":14830735,"display_name":"Hleb Shypula"},"score":0,"creation_date":1635969633,"post_id":69830890,"comment_id":123436803,"body_markdown":"@shmosel I must initialize shortName, because I send a Person object as a json. So I cannot scrap the field. I need it in my frontend. Btw the logic is pretty complicated. Person class with 2 fields is used just for example","body":"@shmosel I must initialize shortName, because I send a Person object as a json. So I cannot scrap the field. I need it in my frontend. Btw the logic is pretty complicated. Person class with 2 fields is used just for example"},{"owner":{"account_id":8739741,"reputation":6543,"user_id":6537157,"accept_rate":100,"display_name":"akop"},"score":0,"creation_date":1635972360,"post_id":69830890,"comment_id":123437699,"body_markdown":"I think the getter-solution from @shmosel is better. If I see a method starting with `setAbc()`, then I think &quot;ok, with this method I can set the value of Abc&quot;. But this not true in this case - as a user of your class, I can&#39;t set the `shortName`. And as small hint: Don&#39;t write setters yourself, let frameworks like Lombok handle that for you. :)","body":"I think the getter-solution from @shmosel is better. If I see a method starting with <code>setAbc()</code>, then I think &quot;ok, with this method I can set the value of Abc&quot;. But this not true in this case - as a user of your class, I can&#39;t set the <code>shortName</code>. And as small hint: Don&#39;t write setters yourself, let frameworks like Lombok handle that for you. :)"},{"owner":{"account_id":20221335,"reputation":158,"user_id":14830735,"display_name":"Hleb Shypula"},"score":0,"creation_date":1635975777,"post_id":69830890,"comment_id":123438847,"body_markdown":"@akop But it is a setter with no parameters. And I use Lombok btw. I override the `fullName` setter by defining it as framework allows. As a user of my class You will be able to use your desired setter with one parameter as expected. And my setter with no params will be private (as @@shmosel adviced), and You won&#39;t be able to use it.","body":"@akop But it is a setter with no parameters. And I use Lombok btw. I override the <code>fullName</code> setter by defining it as framework allows. As a user of my class You will be able to use your desired setter with one parameter as expected. And my setter with no params will be private (as @@shmosel adviced), and You won&#39;t be able to use it."},{"owner":{"account_id":22425724,"reputation":1060,"user_id":16632363,"display_name":"user16632363"},"score":1,"creation_date":1635977206,"post_id":69830890,"comment_id":123439236,"body_markdown":"Why do you have to have setShortName() at all?  Just assign a value to shortName from within setFullName().  There&#39;s no law about having setters. You should have *separate* setters if and only if the things being set are in fact truly separate - and you have indicated they are not. The short name is derived from the full name, and is not independently settable.","body":"Why do you have to have setShortName() at all?  Just assign a value to shortName from within setFullName().  There&#39;s no law about having setters. You should have <i>separate</i> setters if and only if the things being set are in fact truly separate - and you have indicated they are not. The short name is derived from the full name, and is not independently settable."},{"owner":{"account_id":1079173,"reputation":42590,"user_id":1076640,"display_name":"yshavit"},"score":0,"creation_date":1635977241,"post_id":69830890,"comment_id":123439246,"body_markdown":"I think you need an argument for the `setShortName` -- otherwise, Lombok won&#39;t actually pick it up as the setter, and will still create the normal one. Depending on the serialization library you use for JSON, you may be able to remove the field, and instead define a `getShortName()` method that the serializer picks up even if the field is missing. You may need to create a private `setShortName(String name)` to fill out the pattern for that JSON library to pick it up, but just have that be an empty method (or throw UnsupportedOperationException).","body":"I think you need an argument for the <code>setShortName</code> -- otherwise, Lombok won&#39;t actually pick it up as the setter, and will still create the normal one. Depending on the serialization library you use for JSON, you may be able to remove the field, and instead define a <code>getShortName()</code> method that the serializer picks up even if the field is missing. You may need to create a private <code>setShortName(String name)</code> to fill out the pattern for that JSON library to pick it up, but just have that be an empty method (or throw UnsupportedOperationException)."},{"owner":{"account_id":20221335,"reputation":158,"user_id":14830735,"display_name":"Hleb Shypula"},"score":0,"creation_date":1635978208,"post_id":69830890,"comment_id":123439490,"body_markdown":"@user16632363 Good advice. But as I mentioned above the logic is a bit more complicated and the class has more than 30 fields. The analog of `fullName` setter calls 3 analogs of `shortName` setter with 10 lines of code each. So it won&#39;t be a good solution to put 30 lines of code into `fullName` setter. But I will describe all the aspects in my own answer later.","body":"@user16632363 Good advice. But as I mentioned above the logic is a bit more complicated and the class has more than 30 fields. The analog of <code>fullName</code> setter calls 3 analogs of <code>shortName</code> setter with 10 lines of code each. So it won&#39;t be a good solution to put 30 lines of code into <code>fullName</code> setter. But I will describe all the aspects in my own answer later."},{"owner":{"account_id":22425724,"reputation":1060,"user_id":16632363,"display_name":"user16632363"},"score":0,"creation_date":1635979656,"post_id":69830890,"comment_id":123439804,"body_markdown":"If those analogs have no commonality, then you&#39;re doomed to 30 lines of code somewhere. But I suspect there&#39;s a helper method you could invent to contain whatever&#39;s the same for each case.","body":"If those analogs have no commonality, then you&#39;re doomed to 30 lines of code somewhere. But I suspect there&#39;s a helper method you could invent to contain whatever&#39;s the same for each case."}],"answers":[{"tags":[],"owner":{"account_id":23181148,"reputation":103,"user_id":17278956,"display_name":"Pierre-Alain EMO"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635968975,"creation_date":1635968975,"answer_id":69830941,"question_id":69830890,"body_markdown":"    class Person {\r\n        private String fullName;\r\n        private String shortName;\r\n    \r\n        public Person(String fullName){\r\n            this.fullName = fullName;\r\n            this.shortName = fullName.substring(0, 1);\r\n        }\r\n    }","title":"Call a setter of a field inside a setter of another field","body":"<pre><code>class Person {\n    private String fullName;\n    private String shortName;\n\n    public Person(String fullName){\n        this.fullName = fullName;\n        this.shortName = fullName.substring(0, 1);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20221335,"reputation":158,"user_id":14830735,"display_name":"Hleb Shypula"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":753,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69830941,"answer_count":1,"score":0,"last_activity_date":1635976874,"creation_date":1635968653,"question_id":69830890,"body_markdown":"I want to initialize a field immediately after initializing another field like in code below:\r\n\r\n```\r\n@Setter\r\nclass Person {\r\n    private String fullName;\r\n    private String shortName;\r\n\r\n    public void setFullName(String fullName) {\r\n        this.fullName = fullName;\r\n        setShortName();\r\n    }\r\n\r\n    private void setShortName() {\r\n        this.shortName = this.fullName.substring(0, 1);\r\n    }\r\n}\r\n```\r\n\r\nThe approach with scrapping the `shortName` field and using getter, which returns the desired value is not acceptable. I need this field, because I transfer my object to frontend as a JSON object (I want to print the `shortName` there).\r\n\r\nAlso my class uses `@Setter` annotation from Lombok framework. So users of my class will be able to use the desired setter with one parameter. At the same time the `setShortName()` method is private (as @shmosel advised).\r\n\r\nThe question remains open: Is it a good idea to call the setter of `shortName` inside `setFullName(String fullName)`?\r\n\r\nAnd what is the best approach to do this?","title":"Call a setter of a field inside a setter of another field","body":"<p>I want to initialize a field immediately after initializing another field like in code below:</p>\n<pre><code>@Setter\nclass Person {\n    private String fullName;\n    private String shortName;\n\n    public void setFullName(String fullName) {\n        this.fullName = fullName;\n        setShortName();\n    }\n\n    private void setShortName() {\n        this.shortName = this.fullName.substring(0, 1);\n    }\n}\n</code></pre>\n<p>The approach with scrapping the <code>shortName</code> field and using getter, which returns the desired value is not acceptable. I need this field, because I transfer my object to frontend as a JSON object (I want to print the <code>shortName</code> there).</p>\n<p>Also my class uses <code>@Setter</code> annotation from Lombok framework. So users of my class will be able to use the desired setter with one parameter. At the same time the <code>setShortName()</code> method is private (as @shmosel advised).</p>\n<p>The question remains open: Is it a good idea to call the setter of <code>shortName</code> inside <code>setFullName(String fullName)</code>?</p>\n<p>And what is the best approach to do this?</p>\n"},{"tags":["java","spring","tomcat","web-applications"],"comments":[{"owner":{"account_id":1235468,"reputation":31121,"user_id":1199132,"accept_rate":83,"display_name":"Aritz"},"score":0,"creation_date":1493657395,"post_id":43721760,"comment_id":74489290,"body_markdown":"If we know nothing about your machine specs, memory amount given to the servers.. etc. I guess it is impossible to tell you why.","body":"If we know nothing about your machine specs, memory amount given to the servers.. etc. I guess it is impossible to tell you why."},{"owner":{"account_id":2701145,"reputation":4860,"user_id":2433323,"display_name":"Klaus Groenbaek"},"score":0,"creation_date":1493675653,"post_id":43721760,"comment_id":74497900,"body_markdown":"In my world a minute is extremely long to start anything.","body":"In my world a minute is extremely long to start anything."}],"answers":[{"tags":[],"owner":{"account_id":2701145,"reputation":4860,"user_id":2433323,"display_name":"Klaus Groenbaek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635976747,"creation_date":1493675600,"answer_id":43727078,"question_id":43721760,"body_markdown":"If you are starting Tomcat on a headless server, it can take a long time to gather enough entropy for the SecureRandom which generates sessionIds. This should however only affect startup. \r\nYou can read more about [How do I make Tomcat startup faster][1] here.\r\n\r\nOtherwise you have to look at the CPU and memory utilization, and enable Info/debug logging so you can see where Tomcat uses the time.\r\n\r\n  [1]: https://cwiki.apache.org/confluence/display/TOMCAT/HowTo+FasterStartUp","title":"Tomcat is slow on my VM, but not in Eclipse","body":"<p>If you are starting Tomcat on a headless server, it can take a long time to gather enough entropy for the SecureRandom which generates sessionIds. This should however only affect startup.\nYou can read more about <a href=\"https://cwiki.apache.org/confluence/display/TOMCAT/HowTo+FasterStartUp\" rel=\"nofollow noreferrer\">How do I make Tomcat startup faster</a> here.</p>\n<p>Otherwise you have to look at the CPU and memory utilization, and enable Info/debug logging so you can see where Tomcat uses the time.</p>\n"},{"tags":[],"owner":{"account_id":6424973,"reputation":304,"user_id":4980454,"display_name":"Vivek Nerle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1493717380,"creation_date":1493717380,"answer_id":43734472,"question_id":43721760,"body_markdown":"In my Eclipse I modified eclipse.ini as\r\n-Xms512m\r\n-Xmx2048m\r\n-XX:MaxPermSize=2048m\r\n\r\nand In tomcat Attributes in eclipse I modified,\r\n-Xms512m \r\n-Xmx1024m \r\n-XX:PermSize=1024m \r\n-XX:MaxPermSize=1024m\r\n\r\n///My machine having 8GB of RAM","title":"Tomcat is slow on my VM, but not in Eclipse","body":"<p>In my Eclipse I modified eclipse.ini as\n-Xms512m\n-Xmx2048m\n-XX:MaxPermSize=2048m</p>\n\n<p>and In tomcat Attributes in eclipse I modified,\n-Xms512m \n-Xmx1024m \n-XX:PermSize=1024m \n-XX:MaxPermSize=1024m</p>\n\n<p>///My machine having 8GB of RAM</p>\n"}],"owner":{"account_id":8617815,"reputation":11,"user_id":6453969,"display_name":"BeefTech"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":307,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1635976747,"creation_date":1493652842,"question_id":43721760,"body_markdown":"I have a webapp that was previously deployed like this on my VM :\r\n\r\n - One War containing the core \r\n - JAR of all Dependancies were given to Tomcat by adding them in CLASSPATH\r\n\r\n=&gt; My application took around 1 min to start\r\n\r\nI am working on apply some &quot;best practices&quot; on that web app, and I firstly work on the dependency inclusion. Now the webapp looks like this :\r\n\r\n - One War containing the core (WEB-INF/classes) and all dependencies (WEB-INF/lib)\r\n\r\nIn my Eclipse, there&#39;s no lag when starting the server, it takes around 2 mins. But on my VM, it now takes around 5 mins.\r\n\r\nI would like to know if the old webapp deployment was a good practice ? And if it&#39;s normal to have that long startup time (for me).\r\n\r\nThanks.","title":"Tomcat is slow on my VM, but not in Eclipse","body":"<p>I have a webapp that was previously deployed like this on my VM :</p>\n\n<ul>\n<li>One War containing the core </li>\n<li>JAR of all Dependancies were given to Tomcat by adding them in CLASSPATH</li>\n</ul>\n\n<p>=> My application took around 1 min to start</p>\n\n<p>I am working on apply some \"best practices\" on that web app, and I firstly work on the dependency inclusion. Now the webapp looks like this :</p>\n\n<ul>\n<li>One War containing the core (WEB-INF/classes) and all dependencies (WEB-INF/lib)</li>\n</ul>\n\n<p>In my Eclipse, there's no lag when starting the server, it takes around 2 mins. But on my VM, it now takes around 5 mins.</p>\n\n<p>I would like to know if the old webapp deployment was a good practice ? And if it's normal to have that long startup time (for me).</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","android","user-interface","onclicklistener","vibration"],"comments":[{"owner":{"account_id":2786826,"reputation":2172,"user_id":2398000,"display_name":"avalerio"},"score":0,"creation_date":1635976897,"post_id":69832207,"comment_id":123439160,"body_markdown":"Are you calling `getSystemService(Context.VIBRATOR_SERVICE);` for each button push?","body":"Are you calling <code>getSystemService(Context.VIBRATOR_SERVICE);</code> for each button push?"},{"owner":{"account_id":15120535,"reputation":43,"user_id":10911463,"display_name":"Wakeel Ahmad"},"score":0,"creation_date":1635976995,"post_id":69832207,"comment_id":123439177,"body_markdown":"No i call it only once in onCreate()","body":"No i call it only once in onCreate()"},{"owner":{"account_id":2786826,"reputation":2172,"user_id":2398000,"display_name":"avalerio"},"score":0,"creation_date":1635977480,"post_id":69832207,"comment_id":123439291,"body_markdown":"Are you calling `VibrationEffect.createOneShot((int)n, (int)n1)` for each button click? or are you storing the VibrationEffect and reusing it? I don&#39;t know if it becomes invalidated once its done, but creating involves quite a lot of operations.","body":"Are you calling <code>VibrationEffect.createOneShot((int)n, (int)n1)</code> for each button click? or are you storing the VibrationEffect and reusing it? I don&#39;t know if it becomes invalidated once its done, but creating involves quite a lot of operations."},{"owner":{"account_id":15120535,"reputation":43,"user_id":10911463,"display_name":"Wakeel Ahmad"},"score":0,"creation_date":1635978171,"post_id":69832207,"comment_id":123439481,"body_markdown":"Yes I call this one on each button click. I have not attempted to store it and reuse. Am i doing wrong?","body":"Yes I call this one on each button click. I have not attempted to store it and reuse. Am i doing wrong?"},{"owner":{"account_id":2786826,"reputation":2172,"user_id":2398000,"display_name":"avalerio"},"score":1,"creation_date":1635978764,"post_id":69832207,"comment_id":123439640,"body_markdown":"I&#39;m not sure but you could try to reuse it (ie only create it once), if it doesn&#39;t work after &quot;one shot&quot; then you could try one of the &quot;prebaked&quot; vibrations `VibrationEffect.get(VibrationEffect.EFFECT_CLICK);` which may get created faster.","body":"I&#39;m not sure but you could try to reuse it (ie only create it once), if it doesn&#39;t work after &quot;one shot&quot; then you could try one of the &quot;prebaked&quot; vibrations <code>VibrationEffect.get(VibrationEffect.EFFECT_CLICK);</code> which may get created faster."},{"owner":{"account_id":15120535,"reputation":43,"user_id":10911463,"display_name":"Wakeel Ahmad"},"score":0,"creation_date":1635979712,"post_id":69832207,"comment_id":123439815,"body_markdown":"I tried this vib.vibrate(VibrationEffect.EFFECT_CLICK); but the now there is no vibration with button click.","body":"I tried this vib.vibrate(VibrationEffect.EFFECT_CLICK); but the now there is no vibration with button click."},{"owner":{"account_id":2786826,"reputation":2172,"user_id":2398000,"display_name":"avalerio"},"score":0,"creation_date":1635979852,"post_id":69832207,"comment_id":123439838,"body_markdown":"did you do this `vib.vibrate(VibrationEffect.get(VibrationEffect.EFFECT_CLICK));`  or `vib.vibrate(VibrationEffect.EFFECT_CLICK);` because the second is wrong.","body":"did you do this <code>vib.vibrate(VibrationEffect.get(VibrationEffect.EFFECT_CLICK&zwnj;&#8203;));</code>  or <code>vib.vibrate(VibrationEffect.EFFECT_CLICK);</code> because the second is wrong."}],"owner":{"account_id":15120535,"reputation":43,"user_id":10911463,"display_name":"Wakeel Ahmad"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":222,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1635976670,"creation_date":1635976670,"question_id":69832207,"body_markdown":"I am using the following code to vibrate the device programmatically on a button click and it works but the vibration is not so quick as compared to my android device&#39;s default keyboard button press vibration. When I click the button in my android app the vibration takes a few milli seconds to start (making the app UI ugly). While vibration with typing on android default keyboard is quicker. So is it normal or it can be fixed somehow so that device vibration is quicker like its own keyboard vibration.\r\n\r\n    \r\n\r\n    \r\n\r\n        int n;\r\n            int n1;\r\n    private Vibrator vib;\r\n            vib = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);\r\n        vib.vibrate(VibrationEffect.createOneShot((int)n, (int)n1));\r\n\r\n","title":"How to fix vibration delay in android?","body":"<p>I am using the following code to vibrate the device programmatically on a button click and it works but the vibration is not so quick as compared to my android device's default keyboard button press vibration. When I click the button in my android app the vibration takes a few milli seconds to start (making the app UI ugly). While vibration with typing on android default keyboard is quicker. So is it normal or it can be fixed somehow so that device vibration is quicker like its own keyboard vibration.</p>\n<pre><code>    int n;\n        int n1;\nprivate Vibrator vib;\n        vib = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);\n    vib.vibrate(VibrationEffect.createOneShot((int)n, (int)n1));\n</code></pre>\n"},{"tags":["java","floating-point"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":4,"creation_date":1635958023,"post_id":69828648,"comment_id":123432581,"body_markdown":"I&#39;d expect it to work in the same places where `==` works (with a few caveats around NaN values). The reason why `==` is usually a bad idea for doubles is that two values that are obtained as the result of calculations can be microscopically different - in which case `Double.equals` will still return false, because the values aren&#39;t equal.","body":"I&#39;d expect it to work in the same places where <code>==</code> works (with a few caveats around NaN values). The reason why <code>==</code> is usually a bad idea for doubles is that two values that are obtained as the result of calculations can be microscopically different - in which case <code>Double.equals</code> will still return false, because the values aren&#39;t equal."},{"owner":{"account_id":4007082,"reputation":23327,"user_id":3301492,"display_name":"Boris"},"score":0,"creation_date":1635960563,"post_id":69828648,"comment_id":123433631,"body_markdown":"Quickly testing the above in JShell reveals that it doesn&#39;t work in the same places where `==` works as mentioned above. `boolean test = a.equals(b); test ==&gt; true` and  `boolean test = a == b; test ==&gt; false`","body":"Quickly testing the above in JShell reveals that it doesn&#39;t work in the same places where <code>==</code> works as mentioned above. <code>boolean test = a.equals(b); test ==&gt; true</code> and  <code>boolean test = a == b; test ==&gt; false</code>"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1635976618,"creation_date":1635960394,"answer_id":69829215,"question_id":69828648,"body_markdown":"You need to fully understand the reason for why `==`  comparison is a bad idea. Without understanding, you&#39;re just fumbling in the dark.\r\n\r\nLet&#39;s talk about how computers (and doubles) work.\r\n\r\nImagine you enter a room; it has 3 lightswitches, otherwise it is bare. You will enter the room, you can fiddle with the switches, but then you have to leave. I enter the room later and can look at the switches.\r\n\r\nHow much information can you convey?\r\n\r\nThe answer is: You can convey 8 different states: DDD, DDU, DUD, DUU, UDD, UDU, UUD, and UUU. That&#39;s it.\r\n\r\nComputers work exactly like this when they store a double. Except instead of 3 switches, you get 64 switches. That means `2^64` different states you can convey with a single `double`, and that&#39;s a ton of states: That&#39;s a 19 digit number.\r\n\r\nBut it&#39;s still a finite amount of states, and that&#39;s problematic: There are an infinite amount of numbers between 0 and 1. Let alone between -infinity and +infinity, which `double` dares to cover. How do you store one of an infinite infinity of choices when you only get to represent `2^64` states? That 19-digit number starts to look pretty small when it&#39;s tasked to differentiate from an infinite infinity of possibilities, doesn&#39;t it?\r\n\r\nThe answer, of course, is that __this is completely impossible__.\r\n\r\nSo doubles don&#39;t actually work like that. Instead, someone took some effort and hung up a gigantic numerline, from minus infinite to plus infinite, in a big room, and threw `2^64` darts at this line. The numbers they landed on are the &#39;blessed numbers&#39; - these are representable by a `double` value. That does mean there are an infinite amount of numbers between any 2 darts that therefore are _not_ representable. The darts aren&#39;t quite random: The closer you are to 0, the denser the darts. Once you get beyond about `2^52` or so, the distance between 2 darts exceeds 1.0 even.\r\n\r\nHere&#39;s a trivial example of a non-representable number: 0.3. Amazing, isn&#39;t it? Something that simple. It means __a computer literally cannot calculate 0.1 + 0.2 using `double`__. So what happens when you try? The rules state that the result of any calculation is always silently rounded to the nearest blessed number.\r\n\r\nAnd therein lies the rub: You can run the math:\r\n\r\n```\r\ndouble x = 0.1 + 0.2;\r\n```\r\n\r\nand later do:\r\n\r\n```\r\ndouble y = 0.9 - 0.8 + 0.15 + 0.05;\r\n```\r\n\r\nand us humans would immediately notice that `x` and `y` are naturally identical. But __not so for computers__ - because of that silent rounding to the nearest blessed number, it&#39;s possible that `x` is `0.29999999999999999785`, and `y` is `0.300000000000000000012`.\r\n\r\nThus we get to four crucial aspects when using `double` (or `float` which is just about worse in every fashion, don&#39;t ever use those):\r\n\r\n* If you need absolute precision, don&#39;t use them at all.\r\n* When printing them, always round them down. System.out.println does this out of the box, but you should really use `.printf(&quot;%.5f&quot;)` or similar: Pick the # of digits you need.\r\n* Be aware that the errors will compound, and it gets worse as you are further away from 1.0.\r\n* Do not ever compare with `==`, instead always use a delta-compare: The notion of &quot;lets consider the 2 numbers equal if they are within 0.0000000001 of each other&quot;.\r\n\r\nThere is no universal magic delta value; it depends on your precision needs, how far you away from 1.0, etc. Therefore, just asking the computer: Hey, just figure this stuff out I just wanna know if these 2 doubles are equal is __impossible__. The only definition available that doesn&#39;t require your input as to &#39;how close&#39; they can be, is the notion of sheer perfection: They are equal only if they are precisely identical. This definition would fail you in that trivial example above. It makes not one iota of difference if you use `Double.equals` instead of `double == double`, or any other utility class for that matter.\r\n\r\nSo, no, `Double.equals` is not suitable. You will have to compare `Math.abs(d1 - d2) &lt; epsilon`, where epsilon is your choice. Mostly, if equality matters at all you&#39;re already doing it wrong and shouldn&#39;t be using `double` in the first place.\r\n\r\nNB: When representing money, you don&#39;t want unpredictable rounding, so never use doubles for these. Instead figure out what the atomic banking unit is (dollarcents, eurocents, yen, satoshis for bitcoin, etc), and store that as a long. You store $4.52 and `long x = 452;`, not as `double x = 4.52;`.\r\n","title":"Does the .equals() method of the double wrapper class work for finding equality of floating point numbers?","body":"<p>You need to fully understand the reason for why <code>==</code>  comparison is a bad idea. Without understanding, you're just fumbling in the dark.</p>\n<p>Let's talk about how computers (and doubles) work.</p>\n<p>Imagine you enter a room; it has 3 lightswitches, otherwise it is bare. You will enter the room, you can fiddle with the switches, but then you have to leave. I enter the room later and can look at the switches.</p>\n<p>How much information can you convey?</p>\n<p>The answer is: You can convey 8 different states: DDD, DDU, DUD, DUU, UDD, UDU, UUD, and UUU. That's it.</p>\n<p>Computers work exactly like this when they store a double. Except instead of 3 switches, you get 64 switches. That means <code>2^64</code> different states you can convey with a single <code>double</code>, and that's a ton of states: That's a 19 digit number.</p>\n<p>But it's still a finite amount of states, and that's problematic: There are an infinite amount of numbers between 0 and 1. Let alone between -infinity and +infinity, which <code>double</code> dares to cover. How do you store one of an infinite infinity of choices when you only get to represent <code>2^64</code> states? That 19-digit number starts to look pretty small when it's tasked to differentiate from an infinite infinity of possibilities, doesn't it?</p>\n<p>The answer, of course, is that <strong>this is completely impossible</strong>.</p>\n<p>So doubles don't actually work like that. Instead, someone took some effort and hung up a gigantic numerline, from minus infinite to plus infinite, in a big room, and threw <code>2^64</code> darts at this line. The numbers they landed on are the 'blessed numbers' - these are representable by a <code>double</code> value. That does mean there are an infinite amount of numbers between any 2 darts that therefore are <em>not</em> representable. The darts aren't quite random: The closer you are to 0, the denser the darts. Once you get beyond about <code>2^52</code> or so, the distance between 2 darts exceeds 1.0 even.</p>\n<p>Here's a trivial example of a non-representable number: 0.3. Amazing, isn't it? Something that simple. It means <strong>a computer literally cannot calculate 0.1 + 0.2 using <code>double</code></strong>. So what happens when you try? The rules state that the result of any calculation is always silently rounded to the nearest blessed number.</p>\n<p>And therein lies the rub: You can run the math:</p>\n<pre><code>double x = 0.1 + 0.2;\n</code></pre>\n<p>and later do:</p>\n<pre><code>double y = 0.9 - 0.8 + 0.15 + 0.05;\n</code></pre>\n<p>and us humans would immediately notice that <code>x</code> and <code>y</code> are naturally identical. But <strong>not so for computers</strong> - because of that silent rounding to the nearest blessed number, it's possible that <code>x</code> is <code>0.29999999999999999785</code>, and <code>y</code> is <code>0.300000000000000000012</code>.</p>\n<p>Thus we get to four crucial aspects when using <code>double</code> (or <code>float</code> which is just about worse in every fashion, don't ever use those):</p>\n<ul>\n<li>If you need absolute precision, don't use them at all.</li>\n<li>When printing them, always round them down. System.out.println does this out of the box, but you should really use <code>.printf(&quot;%.5f&quot;)</code> or similar: Pick the # of digits you need.</li>\n<li>Be aware that the errors will compound, and it gets worse as you are further away from 1.0.</li>\n<li>Do not ever compare with <code>==</code>, instead always use a delta-compare: The notion of &quot;lets consider the 2 numbers equal if they are within 0.0000000001 of each other&quot;.</li>\n</ul>\n<p>There is no universal magic delta value; it depends on your precision needs, how far you away from 1.0, etc. Therefore, just asking the computer: Hey, just figure this stuff out I just wanna know if these 2 doubles are equal is <strong>impossible</strong>. The only definition available that doesn't require your input as to 'how close' they can be, is the notion of sheer perfection: They are equal only if they are precisely identical. This definition would fail you in that trivial example above. It makes not one iota of difference if you use <code>Double.equals</code> instead of <code>double == double</code>, or any other utility class for that matter.</p>\n<p>So, no, <code>Double.equals</code> is not suitable. You will have to compare <code>Math.abs(d1 - d2) &lt; epsilon</code>, where epsilon is your choice. Mostly, if equality matters at all you're already doing it wrong and shouldn't be using <code>double</code> in the first place.</p>\n<p>NB: When representing money, you don't want unpredictable rounding, so never use doubles for these. Instead figure out what the atomic banking unit is (dollarcents, eurocents, yen, satoshis for bitcoin, etc), and store that as a long. You store $4.52 and <code>long x = 452;</code>, not as <code>double x = 4.52;</code>.</p>\n"}],"owner":{"account_id":15489754,"reputation":202,"user_id":12472062,"display_name":"Hat"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":217,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69829215,"answer_count":1,"score":0,"last_activity_date":1635976618,"creation_date":1635957913,"question_id":69828648,"body_markdown":"I know that for primitive floating point types (floats and doubles), you&#39;re not supposed to compare them directly via `==`. But what if you&#39;re using the wrapper class for double? Will something like\r\n\r\n    Double a = 5.05;\r\n    Double b = 5.05; \r\n    boolean test = a.equals(b);\r\n\r\ncompare the two values properly?","title":"Does the .equals() method of the double wrapper class work for finding equality of floating point numbers?","body":"<p>I know that for primitive floating point types (floats and doubles), you're not supposed to compare them directly via <code>==</code>. But what if you're using the wrapper class for double? Will something like</p>\n<pre><code>Double a = 5.05;\nDouble b = 5.05; \nboolean test = a.equals(b);\n</code></pre>\n<p>compare the two values properly?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":3,"creation_date":1635958557,"post_id":69828733,"comment_id":123432804,"body_markdown":"Telling us what the program is supposed to do would help.","body":"Telling us what the program is supposed to do would help."},{"owner":{"account_id":183966,"reputation":14606,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":1,"creation_date":1635959002,"post_id":69828733,"comment_id":123433003,"body_markdown":"You can &quot;fake&quot; concatenation with multiple `System.out.print` calls. Each will output directly after the previous. Then do a println to insert then newline. Eg. `S.o.print(&quot;Week &quot;); S.o.print(i + 1); S.o.print(&quot; &quot;)` etc. Or you should shove stuff into a StringBuilder and then print/concat outside of the loop.","body":"You can &quot;fake&quot; concatenation with multiple <code>System.out.print</code> calls. Each will output directly after the previous. Then do a println to insert then newline. Eg. <code>S.o.print(&quot;Week &quot;); S.o.print(i + 1); S.o.print(&quot; &quot;)</code> etc. Or you should shove stuff into a StringBuilder and then print/concat outside of the loop."},{"owner":{"account_id":15209052,"reputation":1128,"user_id":10974490,"display_name":"Bart Barnard"},"score":0,"creation_date":1635959231,"post_id":69828733,"comment_id":123433100,"body_markdown":"I don&#39;t know what it is you want to do, but can&#39;t you use recursion to avoid loops?","body":"I don&#39;t know what it is you want to do, but can&#39;t you use recursion to avoid loops?"},{"owner":{"account_id":18424635,"reputation":101,"user_id":13498954,"display_name":"WildBoar"},"score":0,"creation_date":1635959633,"post_id":69828733,"comment_id":123433259,"body_markdown":"@FedericoklezCulloca\nWell here&#39;s a subject\nCustomer evaluates this progress as a minimal grade for five tests within each week. Each test can be graded between 1 and 9.\nThe maximum number of weeks for the analysis is 18. Once the program has obtained information for each week, it displays the graph on the console to show minimum grades for a specific week.\nAnd we keep assuming that 42 is the input data limit.\nThe exact guaranteed number of tests in a week is 5.\nHowever, the order of weekly data input is not guaranteed, so Week 1’s data can be entered after Week 2’s data.","body":"@FedericoklezCulloca Well here&#39;s a subject Customer evaluates this progress as a minimal grade for five tests within each week. Each test can be graded between 1 and 9. The maximum number of weeks for the analysis is 18. Once the program has obtained information for each week, it displays the graph on the console to show minimum grades for a specific week. And we keep assuming that 42 is the input data limit. The exact guaranteed number of tests in a week is 5. However, the order of weekly data input is not guaranteed, so Week 1’s data can be entered after Week 2’s data."},{"owner":{"account_id":18424635,"reputation":101,"user_id":13498954,"display_name":"WildBoar"},"score":0,"creation_date":1635959694,"post_id":69828733,"comment_id":123433280,"body_markdown":"Second part of subject: If data input order is wrong the program shall be shut down with -1 code.\n\n\n• There are many options for storing information, and arrays are just one of them. Apply another method for storing data about student tests without the use of arrays.\n• String concatenation often results in unexpected program behavior. If there are many iterations of a concatenation operation in a cycle for a single variable, an application may slow down significantly. That is why we should not use string concatenation inside a loop to generate a result.","body":"Second part of subject: If data input order is wrong the program shall be shut down with -1 code.   • There are many options for storing information, and arrays are just one of them. Apply another method for storing data about student tests without the use of arrays. • String concatenation often results in unexpected program behavior. If there are many iterations of a concatenation operation in a cycle for a single variable, an application may slow down significantly. That is why we should not use string concatenation inside a loop to generate a result."},{"owner":{"account_id":18424635,"reputation":101,"user_id":13498954,"display_name":"WildBoar"},"score":0,"creation_date":1635960010,"post_id":69828733,"comment_id":123433414,"body_markdown":"@BartBarnard I thought about that, but all class methods are forbidden and only one file is allowed","body":"@BartBarnard I thought about that, but all class methods are forbidden and only one file is allowed"}],"answers":[{"tags":[],"owner":{"account_id":18424635,"reputation":101,"user_id":13498954,"display_name":"WildBoar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635976573,"creation_date":1635976573,"answer_id":69832192,"question_id":69828733,"body_markdown":"Well, at first, I want to apologize for not posting subject and so unclear question. So the task is next:\r\n\r\n*Customer evaluates this progress as a minimal grade for five tests within each week. Each test can be graded between 1 and 9.*\r\n\r\n*The maximum number of weeks for the analysis is 18. Once the program has obtained information for each week, it displays the graph on the console to show minimum grades for a specific week.*\r\n\r\n*And we keep assuming that 42 is the input data limit.\r\nThe exact guaranteed number of tests in a week is 5.*\r\n\r\n*However, the order of weekly data input is not guaranteed, so Week 1’s data can be entered after Week 2’s data. If data input order is wrong, IllegalArgument message shall be displayed, and the program shall be shut down with -1 code.*\r\n\r\nThe problem was in the very-very confusing notes\r\n\r\n**Note:**\r\n\r\n*• There are many options for storing information, and arrays are just one of them. Apply another method for storing data about student tests without the use of arrays.*\r\n\r\n*• String concatenation often results in unexpected program behavior. If there are many iterations of a concatenation operation in a cycle for a single variable, an application may slow down significantly. That is why we should not use string concatenation inside a loop to generate a result.*\r\n\r\nIn before, &#39;-&gt;&#39; stands for the user input. So, overall, it should be looked like:\r\n\r\n```\r\n-&gt; Week 1\r\n-&gt; 4 5 2 4 2\r\n-&gt; Week 2\r\n-&gt; 7 7 7 7 6\r\n-&gt; Week 3\r\n-&gt; 4 3 4 9 8\r\n-&gt; Week 4\r\n-&gt; 9 9 4 6 7\r\n-&gt; 42\r\nWeek 1 ==&gt;\r\nWeek 2 ======&gt;\r\nWeek 3 ===&gt;\r\nWeek 4 ====&gt;\r\n```\r\n\r\nThe core trick hides in java.utils.scanner and some very handy regex formulas. The final solution is below\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class Program {\r\n\tpublic static void main(String args[]) {\r\n\t\tScanner\tsc = new Scanner(System.in);\r\n\t\tbyte\troll = 0;\r\n\t\tlong\tmultModif = 1;\r\n\t\tlong\tresult = 0;\r\n\r\n\t\tsc.useDelimiter(&quot;\\\\u000A&quot;);\r\n\t\twhile (roll &lt; 18) {\r\n\t\t\tbyte\ttool = 0;\r\n\r\n\t\t\tif (sc.hasNext(&quot;(42)|(Week(\\\\s)(\\\\d))&quot;)) {\r\n\t\t\t\tsc.useDelimiter(&quot;\\\\s+&quot;);\r\n\r\n\t\t\t\tString verify = sc.next();\r\n\t\t\t\tif (verify.equals(&quot;42&quot;))\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\ttool = sc.nextByte();\r\n\t\t\t\tsc.useDelimiter(&quot;\\\\u000A&quot;);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tSystem.err.println(&quot;Illegal Argument&quot;);\r\n\t\t\t\tsc.close();\r\n\t\t\t\tSystem.exit(-1);\r\n\t\t\t}\r\n\t\t\tif (tool != ++roll) {\r\n\t\t\t\tSystem.err.println(&quot;Illegal Argument&quot;);\r\n\t\t\t\tsc.close();\r\n\t\t\t\tSystem.exit(-1);\r\n\t\t\t}\r\n\t\t\ttool = 10;\r\n\t\t\tif (sc.hasNext(&quot;(\\\\d)(\\\\s)(\\\\d)(\\\\s)(\\\\d)(\\\\s)(\\\\d)(\\\\s)(\\\\d)&quot;)) {\r\n\t\t\t\tsc.useDelimiter(&quot;\\\\s+&quot;);\r\n\t\t\t\tfor (byte i = 0; i &lt; 5; ++i) {\r\n\t\t\t\t\tbyte toolTmp = sc.nextByte();\r\n\t\t\t\t\tif (tool &gt; toolTmp)\r\n\t\t\t\t\t\ttool = toolTmp;\r\n\t\t\t\t}\r\n\t\t\t\tsc.useDelimiter(&quot;\\\\u000A&quot;);\r\n\t\t\t} else {\r\n\t\t\t\tSystem.err.println(&quot;Illegal Argument&quot;);\r\n\t\t\t\tsc.close();\r\n\t\t\t\tSystem.exit(-1);\r\n\t\t\t}\r\n\t\t\tresult += tool * multModif;\r\n\t\t\tmultModif *= 10;\r\n\t\t}\r\n\t\tfor (byte i = 0; i &lt; roll; ++i) {\r\n\t\t\tbyte weekRes;\r\n\r\n\t\t\tweekRes = (byte)(result % 10);\r\n\t\t\tresult /= 10;\r\n\t\t\tSystem.out.print(&quot;Week &quot;);\r\n\t\t\tSystem.out.print(i + 1);\r\n\t\t\tSystem.out.print(&#39; &#39;);\r\n\t\t\tfor (byte j = 0; j &lt; weekRes; ++j)\r\n\t\t\t\tSystem.out.print(&#39;=&#39;);\r\n\t\t\tSystem.out.println(&#39;&gt;&#39;);\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nI made it through some tests, but, frankly to say, not 100% sured about accuracy of my solution, but it works and satisfies noted mentioned above. That you guys for assistance, and big sorry for so confusing question...","title":"Store data issue in java","body":"<p>Well, at first, I want to apologize for not posting subject and so unclear question. So the task is next:</p>\n<p><em>Customer evaluates this progress as a minimal grade for five tests within each week. Each test can be graded between 1 and 9.</em></p>\n<p><em>The maximum number of weeks for the analysis is 18. Once the program has obtained information for each week, it displays the graph on the console to show minimum grades for a specific week.</em></p>\n<p><em>And we keep assuming that 42 is the input data limit.\nThe exact guaranteed number of tests in a week is 5.</em></p>\n<p><em>However, the order of weekly data input is not guaranteed, so Week 1’s data can be entered after Week 2’s data. If data input order is wrong, IllegalArgument message shall be displayed, and the program shall be shut down with -1 code.</em></p>\n<p>The problem was in the very-very confusing notes</p>\n<p><strong>Note:</strong></p>\n<p><em>• There are many options for storing information, and arrays are just one of them. Apply another method for storing data about student tests without the use of arrays.</em></p>\n<p><em>• String concatenation often results in unexpected program behavior. If there are many iterations of a concatenation operation in a cycle for a single variable, an application may slow down significantly. That is why we should not use string concatenation inside a loop to generate a result.</em></p>\n<p>In before, '-&gt;' stands for the user input. So, overall, it should be looked like:</p>\n<pre><code>-&gt; Week 1\n-&gt; 4 5 2 4 2\n-&gt; Week 2\n-&gt; 7 7 7 7 6\n-&gt; Week 3\n-&gt; 4 3 4 9 8\n-&gt; Week 4\n-&gt; 9 9 4 6 7\n-&gt; 42\nWeek 1 ==&gt;\nWeek 2 ======&gt;\nWeek 3 ===&gt;\nWeek 4 ====&gt;\n</code></pre>\n<p>The core trick hides in java.utils.scanner and some very handy regex formulas. The final solution is below</p>\n<pre><code>import java.util.Scanner;\n\npublic class Program {\n    public static void main(String args[]) {\n        Scanner sc = new Scanner(System.in);\n        byte    roll = 0;\n        long    multModif = 1;\n        long    result = 0;\n\n        sc.useDelimiter(&quot;\\\\u000A&quot;);\n        while (roll &lt; 18) {\n            byte    tool = 0;\n\n            if (sc.hasNext(&quot;(42)|(Week(\\\\s)(\\\\d))&quot;)) {\n                sc.useDelimiter(&quot;\\\\s+&quot;);\n\n                String verify = sc.next();\n                if (verify.equals(&quot;42&quot;))\n                    break ;\n                tool = sc.nextByte();\n                sc.useDelimiter(&quot;\\\\u000A&quot;);\n            }\n            else {\n                System.err.println(&quot;Illegal Argument&quot;);\n                sc.close();\n                System.exit(-1);\n            }\n            if (tool != ++roll) {\n                System.err.println(&quot;Illegal Argument&quot;);\n                sc.close();\n                System.exit(-1);\n            }\n            tool = 10;\n            if (sc.hasNext(&quot;(\\\\d)(\\\\s)(\\\\d)(\\\\s)(\\\\d)(\\\\s)(\\\\d)(\\\\s)(\\\\d)&quot;)) {\n                sc.useDelimiter(&quot;\\\\s+&quot;);\n                for (byte i = 0; i &lt; 5; ++i) {\n                    byte toolTmp = sc.nextByte();\n                    if (tool &gt; toolTmp)\n                        tool = toolTmp;\n                }\n                sc.useDelimiter(&quot;\\\\u000A&quot;);\n            } else {\n                System.err.println(&quot;Illegal Argument&quot;);\n                sc.close();\n                System.exit(-1);\n            }\n            result += tool * multModif;\n            multModif *= 10;\n        }\n        for (byte i = 0; i &lt; roll; ++i) {\n            byte weekRes;\n\n            weekRes = (byte)(result % 10);\n            result /= 10;\n            System.out.print(&quot;Week &quot;);\n            System.out.print(i + 1);\n            System.out.print(' ');\n            for (byte j = 0; j &lt; weekRes; ++j)\n                System.out.print('=');\n            System.out.println('&gt;');\n        }\n    }\n}\n</code></pre>\n<p>I made it through some tests, but, frankly to say, not 100% sured about accuracy of my solution, but it works and satisfies noted mentioned above. That you guys for assistance, and big sorry for so confusing question...</p>\n"}],"owner":{"account_id":18424635,"reputation":101,"user_id":13498954,"display_name":"WildBoar"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1635976573,"creation_date":1635958225,"question_id":69828733,"body_markdown":"I&#39;ve just written some code to form some statistics in java:\r\n\r\n```\r\npublic static void main(String args[]) {\r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\tbyte[]\tweekEval = new byte[18];\r\n\t\tString\tweekMatch = &quot;&quot;;\r\n\t\tbyte \torder = -1;\r\n\r\n\t\twhile (++order &lt; 18) {\r\n\t\t\tbyte \ttmpRes = 10;\r\n\t\t\tbyte\tcount = 5;\r\n\t\t\tif (sc.hasNextByte())\r\n\t\t\t\tweekMatch += sc.nextByte();\r\n\t\t\tScanner\tscInScope = new Scanner(weekMatch);\r\n\r\n\t\t\tweekMatch = scInScope.findInLine(&quot;Week \\\\d+&quot;);\r\n\t\t\tif (weekMatch == null) {\r\n\t\t\t\tSystem.err.println(&quot;Illegal Argument&quot;);\r\n\t\t\t\tsc.close();\r\n\t\t\t\tSystem.exit(-1);\r\n\t\t\t}\r\n\t\t\tString\torderMatch = &quot;Week &quot; + (order + 1);\r\n\t\t\tif (!orderMatch.equals(weekMatch)) {\r\n\t\t\t\tSystem.err.println(&quot;Illegal argument&quot;);\r\n\t\t\t\tsc.close();\r\n\t\t\t\tSystem.exit(-1);\r\n\t\t\t}\r\n\t\t\tweekMatch = &quot;&quot;;\r\n\t\t\tfor (byte readData = 0; readData &lt; 5; ++readData) {\r\n\t\t\t\tif (sc.hasNext())\r\n\t\t\t\t\tweekMatch += sc.next();\r\n\t\t\t\telse {\r\n\t\t\t\t\tSystem.err.println(&quot;Illegal argument&quot;);\r\n\t\t\t\t\tsc.close();\r\n\t\t\t\t\tscInScope.close();\r\n\t\t\t\t\tSystem.exit(-1);\r\n\t\t\t\t}\r\n\t\t\t\tweekMatch += &#39; &#39;;\r\n\t\t\t}\r\n\t\t\tscInScope = new Scanner(weekMatch);\r\n\t\t\tweekMatch = scInScope.findInLine(&quot;\\\\d \\\\d \\\\d \\\\d \\\\d&quot;);\r\n\t\t\tif (weekMatch == null) {\r\n\t\t\t\tSystem.err.println(&quot;Illegal Argument&quot;);\r\n\t\t\t\tsc.close();\r\n\t\t\t\tSystem.exit(-1);\r\n\t\t\t}\r\n\t\t\tscInScope = new Scanner(weekMatch);\r\n\t\t\twhile (count-- &gt; 0) {\r\n\t\t\t\ttmpRes = scInScope.nextByte();\r\n\t\t\t\tif (weekEval[order] &gt; tmpRes)\r\n\t\t\t\t\tweekEval[order] = tmpRes;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (int i = 0; i &lt; 18 &amp;&amp; weekEval[i] != 10; ++i) {\r\n\t\t\tSystem.out.print(&quot;Week &quot; + (i + 1) + &#39; &#39;);\r\n\t\t\twhile (weekEval[i]-- &gt; 0)\r\n\t\t\t\tSystem.out.printf(&quot;=&quot;);\r\n\t\t\tSystem.out.println(&quot;&gt;&quot;);\r\n\t\t}\r\n\t\tsc.close();\r\n```\r\n\r\nIt works, but I need to complete task without arrays. Ok, I have String at least, right? Wrong. Any String concatenation within a loop is forbidden. The only string method I&#39;m allowed to use is string.equals. There are also system.out, system.err and scanner(System.in). I ran out of ideas, what trick i can use...","title":"Store data issue in java","body":"<p>I've just written some code to form some statistics in java:</p>\n<pre><code>public static void main(String args[]) {\n        Scanner sc = new Scanner(System.in);\n        byte[]  weekEval = new byte[18];\n        String  weekMatch = &quot;&quot;;\n        byte    order = -1;\n\n        while (++order &lt; 18) {\n            byte    tmpRes = 10;\n            byte    count = 5;\n            if (sc.hasNextByte())\n                weekMatch += sc.nextByte();\n            Scanner scInScope = new Scanner(weekMatch);\n\n            weekMatch = scInScope.findInLine(&quot;Week \\\\d+&quot;);\n            if (weekMatch == null) {\n                System.err.println(&quot;Illegal Argument&quot;);\n                sc.close();\n                System.exit(-1);\n            }\n            String  orderMatch = &quot;Week &quot; + (order + 1);\n            if (!orderMatch.equals(weekMatch)) {\n                System.err.println(&quot;Illegal argument&quot;);\n                sc.close();\n                System.exit(-1);\n            }\n            weekMatch = &quot;&quot;;\n            for (byte readData = 0; readData &lt; 5; ++readData) {\n                if (sc.hasNext())\n                    weekMatch += sc.next();\n                else {\n                    System.err.println(&quot;Illegal argument&quot;);\n                    sc.close();\n                    scInScope.close();\n                    System.exit(-1);\n                }\n                weekMatch += ' ';\n            }\n            scInScope = new Scanner(weekMatch);\n            weekMatch = scInScope.findInLine(&quot;\\\\d \\\\d \\\\d \\\\d \\\\d&quot;);\n            if (weekMatch == null) {\n                System.err.println(&quot;Illegal Argument&quot;);\n                sc.close();\n                System.exit(-1);\n            }\n            scInScope = new Scanner(weekMatch);\n            while (count-- &gt; 0) {\n                tmpRes = scInScope.nextByte();\n                if (weekEval[order] &gt; tmpRes)\n                    weekEval[order] = tmpRes;\n            }\n        }\n        for (int i = 0; i &lt; 18 &amp;&amp; weekEval[i] != 10; ++i) {\n            System.out.print(&quot;Week &quot; + (i + 1) + ' ');\n            while (weekEval[i]-- &gt; 0)\n                System.out.printf(&quot;=&quot;);\n            System.out.println(&quot;&gt;&quot;);\n        }\n        sc.close();\n</code></pre>\n<p>It works, but I need to complete task without arrays. Ok, I have String at least, right? Wrong. Any String concatenation within a loop is forbidden. The only string method I'm allowed to use is string.equals. There are also system.out, system.err and scanner(System.in). I ran out of ideas, what trick i can use...</p>\n"},{"tags":["java","lwjgl","slick2d"],"comments":[{"owner":{"account_id":264830,"reputation":70811,"user_id":551406,"accept_rate":95,"display_name":"Michael Berry"},"score":0,"creation_date":1380894955,"post_id":19182843,"comment_id":28381232,"body_markdown":"LWJGL is really quite a thin wrapper around OpenGL - if you want to do things like this more simply I&#39;d suggest something like JMonkey which provides a scenegraph API.","body":"LWJGL is really quite a thin wrapper around OpenGL - if you want to do things like this more simply I&#39;d suggest something like JMonkey which provides a scenegraph API."},{"owner":{"account_id":1883453,"reputation":4644,"user_id":1703140,"accept_rate":68,"display_name":"julian"},"score":2,"creation_date":1380895257,"post_id":19182843,"comment_id":28381438,"body_markdown":"are you saying that its better move to a game engine if i want to write text?","body":"are you saying that its better move to a game engine if i want to write text?"},{"owner":{"account_id":264830,"reputation":70811,"user_id":551406,"accept_rate":95,"display_name":"Michael Berry"},"score":0,"creation_date":1380909366,"post_id":19182843,"comment_id":28389571,"body_markdown":"You say you&#39;re looking for a simple `drawString()` type method, which implies you want simplicity - JMonkey will make things simpler in this respect (and many others).","body":"You say you&#39;re looking for a simple <code>drawString()</code> type method, which implies you want simplicity - JMonkey will make things simpler in this respect (and many others)."}],"answers":[{"tags":[],"owner":{"account_id":3392345,"reputation":10946,"user_id":2846923,"accept_rate":100,"display_name":"The Guy with The Hat"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1635976573,"creation_date":1380904974,"answer_id":19186562,"question_id":19182843,"body_markdown":"Update: this answer is now outdated, and does not work at all with the latest versions of LWJGL. Until I update this answer fully, I recommend that you look here: https://jvm-gaming.org/t/lwjgl-stb-bindings/54537\r\n\r\n---\r\n\r\nYou could use the TrueType fonts feature in the [Slick-util][1] library.\r\n\r\nUsing a common font is easy, just create the font like this:\r\n\r\n    TrueTypeFont font;\r\n    Font awtFont = new Font(&quot;Times New Roman&quot;, Font.BOLD, 24); //name, style (PLAIN, BOLD, or ITALIC), size\r\n    font = new TrueTypeFont(awtFont, false); //base Font, anti-aliasing true/false\r\n\r\nIf you want to load the font from a `.ttf` file, it&#39;s a little more tricky:\r\n\r\n\ttry {\r\n\t\tInputStream inputStream\t= ResourceLoader.getResourceAsStream(&quot;myfont.ttf&quot;);\r\n\t\t\r\n\t\tFont awtFont = Font.createFont(Font.TRUETYPE_FONT, inputStream);\r\n\t\tawtFont = awtFont.deriveFont(24f); // set font size\r\n\t\tfont = new TrueTypeFont(awtFont, false);\r\n\t\t\t\r\n\t} catch (Exception e) {\r\n\t\te.printStackTrace();\r\n\t}\r\n\r\nAfter you have successfully created a `TrueTypeFont`, you can draw it like this:\r\n\r\n    font.drawString(100, 50, &quot;ABC123&quot;, Color.yellow); //x, y, string to draw, color\r\n\r\nFor more information, you can look at the documentation for [`TrueTypeFont`][2] and [`java.awt.Font`][3], and the [Slick-Util tutorial][4] I got most of this code from.\r\n\r\n\r\n  [1]: http://www.lwjgl.org/wiki/index.php?title=Slick-Util_Library_-_Introduction\r\n  [2]: http://slick.ninjacave.com/javadoc/org/newdawn/slick/TrueTypeFont.html\r\n  [3]: http://docs.oracle.com/javase/8/docs/api/java/awt/Font.html\r\n  [4]: http://www.lwjgl.org/wiki/index.php?title=Slick-Util_Library_-_Part_3_-_TrueType_Fonts_for_LWJGL","title":"Write text on the screen with LWJGL","body":"<p>Update: this answer is now outdated, and does not work at all with the latest versions of LWJGL. Until I update this answer fully, I recommend that you look here: <a href=\"https://jvm-gaming.org/t/lwjgl-stb-bindings/54537\" rel=\"nofollow noreferrer\">https://jvm-gaming.org/t/lwjgl-stb-bindings/54537</a></p>\n<hr />\n<p>You could use the TrueType fonts feature in the <a href=\"http://www.lwjgl.org/wiki/index.php?title=Slick-Util_Library_-_Introduction\" rel=\"nofollow noreferrer\">Slick-util</a> library.</p>\n<p>Using a common font is easy, just create the font like this:</p>\n<pre><code>TrueTypeFont font;\nFont awtFont = new Font(&quot;Times New Roman&quot;, Font.BOLD, 24); //name, style (PLAIN, BOLD, or ITALIC), size\nfont = new TrueTypeFont(awtFont, false); //base Font, anti-aliasing true/false\n</code></pre>\n<p>If you want to load the font from a <code>.ttf</code> file, it's a little more tricky:</p>\n<pre><code>try {\n    InputStream inputStream = ResourceLoader.getResourceAsStream(&quot;myfont.ttf&quot;);\n    \n    Font awtFont = Font.createFont(Font.TRUETYPE_FONT, inputStream);\n    awtFont = awtFont.deriveFont(24f); // set font size\n    font = new TrueTypeFont(awtFont, false);\n        \n} catch (Exception e) {\n    e.printStackTrace();\n}\n</code></pre>\n<p>After you have successfully created a <code>TrueTypeFont</code>, you can draw it like this:</p>\n<pre><code>font.drawString(100, 50, &quot;ABC123&quot;, Color.yellow); //x, y, string to draw, color\n</code></pre>\n<p>For more information, you can look at the documentation for <a href=\"http://slick.ninjacave.com/javadoc/org/newdawn/slick/TrueTypeFont.html\" rel=\"nofollow noreferrer\"><code>TrueTypeFont</code></a> and <a href=\"http://docs.oracle.com/javase/8/docs/api/java/awt/Font.html\" rel=\"nofollow noreferrer\"><code>java.awt.Font</code></a>, and the <a href=\"http://www.lwjgl.org/wiki/index.php?title=Slick-Util_Library_-_Part_3_-_TrueType_Fonts_for_LWJGL\" rel=\"nofollow noreferrer\">Slick-Util tutorial</a> I got most of this code from.</p>\n"},{"tags":[],"owner":{"account_id":4256342,"reputation":35,"user_id":3481953,"display_name":"HuraToTheRescue"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1413565408,"creation_date":1413565408,"answer_id":26429986,"question_id":19182843,"body_markdown":"Try Making a `BufferedImage` of required size. Then get its Graphics and draw a String. Then Convert it to a `ByteBuffer` and render it in `OpenGL`.\r\n\r\n    \r\n    String text = &quot;ABCD&quot;;\r\n    int s = 256; //Take whatever size suits you.\r\n    BufferedImage b = new BufferedImage(s, s, BufferedImage.TYPE_4BYTE_ABGR);\r\n    Graphics2D g = b.createGraphics();\r\n    g.drawString(text, 0, 0);\r\n    \r\n    int co = b.getColorModel().getNumComponents();\r\n\r\n    byte[] data = new byte[co * s * s];\r\n    b.getRaster().getDataElements(0, 0, s, s, data);\r\n\r\n    ByteBuffer pixels = BufferUtils.createByteBuffer(data.length);\r\n    pixels.put(data);\r\n    pixels.rewind();\r\n\r\nNow `pixels` contains the required Image data you need to draw.\r\nUse `GL11.glTexImage2D()` function to draw the byte buffer.","title":"Write text on the screen with LWJGL","body":"<p>Try Making a <code>BufferedImage</code> of required size. Then get its Graphics and draw a String. Then Convert it to a <code>ByteBuffer</code> and render it in <code>OpenGL</code>.</p>\n\n<pre><code>String text = \"ABCD\";\nint s = 256; //Take whatever size suits you.\nBufferedImage b = new BufferedImage(s, s, BufferedImage.TYPE_4BYTE_ABGR);\nGraphics2D g = b.createGraphics();\ng.drawString(text, 0, 0);\n\nint co = b.getColorModel().getNumComponents();\n\nbyte[] data = new byte[co * s * s];\nb.getRaster().getDataElements(0, 0, s, s, data);\n\nByteBuffer pixels = BufferUtils.createByteBuffer(data.length);\npixels.put(data);\npixels.rewind();\n</code></pre>\n\n<p>Now <code>pixels</code> contains the required Image data you need to draw.\nUse <code>GL11.glTexImage2D()</code> function to draw the byte buffer.</p>\n"}],"owner":{"account_id":1883453,"reputation":4644,"user_id":1703140,"accept_rate":68,"display_name":"julian"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13136,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":2,"score":7,"last_activity_date":1635976573,"creation_date":1380894285,"question_id":19182843,"body_markdown":"I want to write text on the screen for my game, for things like fps, random text for items and stuff. How can I write that text?\r\n\r\nIs it possible without the Basic Game class? Isn&#39;t there a command like this `g.drawString(&quot;Hello World&quot;, 100, 100);`?","title":"Write text on the screen with LWJGL","body":"<p>I want to write text on the screen for my game, for things like fps, random text for items and stuff. How can I write that text?</p>\n\n<p>Is it possible without the Basic Game class? Isn't there a command like this <code>g.drawString(\"Hello World\", 100, 100);</code>?</p>\n"},{"tags":["java","xml","xsd"],"answers":[{"tags":[],"owner":{"account_id":3859079,"reputation":2069,"user_id":3197244,"accept_rate":50,"display_name":"jgp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635948766,"creation_date":1635948766,"answer_id":69826402,"question_id":69826080,"body_markdown":"It is almost more an architecture question than a development question. Here are a few ideas:\r\n\r\n1. As the data is coming in the data, you could publish it into a Kafka topic, a subscriber would take the data as it comes in the topic, validate it, and write the final file or raise an alert on the bad records. You could add a trigger on the database if it supports it.\r\n\r\n2. You are not describing how the data is being extracted from the database to the XML files, maybe you can work there with paging and create smaller files.\r\n\r\n3. You could use something like Apache Spark that would read the data from the database, using a JDBC connection, modify the internal representation in the dataframe, then directly output the file. 1m entries (depending on how wide is your record) is nothing for Spark.\r\n\r\n4. Some database support user-defined functions in Java, so you could have your XSD validation directly at the database level (really not my favorite, but still an option).\r\n\r\nNotes:\r\n\r\n* You probably know that, but be careful about creating millions of small files, that would kill your system (hence the Kafka recommendation).\r\n* Recommendations can vary whether you&#39;re on-prem vs. cloud, as you can leverage some PaaS services.","title":"How to validate single entries of a XML structure against an XSD schema","body":"<p>It is almost more an architecture question than a development question. Here are a few ideas:</p>\n<ol>\n<li><p>As the data is coming in the data, you could publish it into a Kafka topic, a subscriber would take the data as it comes in the topic, validate it, and write the final file or raise an alert on the bad records. You could add a trigger on the database if it supports it.</p>\n</li>\n<li><p>You are not describing how the data is being extracted from the database to the XML files, maybe you can work there with paging and create smaller files.</p>\n</li>\n<li><p>You could use something like Apache Spark that would read the data from the database, using a JDBC connection, modify the internal representation in the dataframe, then directly output the file. 1m entries (depending on how wide is your record) is nothing for Spark.</p>\n</li>\n<li><p>Some database support user-defined functions in Java, so you could have your XSD validation directly at the database level (really not my favorite, but still an option).</p>\n</li>\n</ol>\n<p>Notes:</p>\n<ul>\n<li>You probably know that, but be careful about creating millions of small files, that would kill your system (hence the Kafka recommendation).</li>\n<li>Recommendations can vary whether you're on-prem vs. cloud, as you can leverage some PaaS services.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635950735,"creation_date":1635950735,"answer_id":69826900,"question_id":69826080,"body_markdown":"You could feed the data into a streaming schema-aware XSLT 3.0 transformation whose logic is\r\n\r\n    &lt;xsl:mode streamable=&quot;yes&quot;&gt;\r\n    &lt;xsl:template match=&quot;record&quot;&gt;\r\n      &lt;xsl:try&gt;\r\n        &lt;xsl:copy-of select=&quot;.&quot; validation=&quot;strict&quot;/&gt;\r\n        &lt;xsl:catch errors=&quot;*&quot;/&gt;\r\n      &lt;/xsl:try&gt;\r\n    &lt;/xsl:template&gt;\r\n     \r\nand (if using Saxon) you could capture the validation errors by supplying an `InvalidityHandler` which would be notified each time invalid data is encountered.","title":"How to validate single entries of a XML structure against an XSD schema","body":"<p>You could feed the data into a streaming schema-aware XSLT 3.0 transformation whose logic is</p>\n<pre><code>&lt;xsl:mode streamable=&quot;yes&quot;&gt;\n&lt;xsl:template match=&quot;record&quot;&gt;\n  &lt;xsl:try&gt;\n    &lt;xsl:copy-of select=&quot;.&quot; validation=&quot;strict&quot;/&gt;\n    &lt;xsl:catch errors=&quot;*&quot;/&gt;\n  &lt;/xsl:try&gt;\n&lt;/xsl:template&gt;\n \n</code></pre>\n<p>and (if using Saxon) you could capture the validation errors by supplying an <code>InvalidityHandler</code> which would be notified each time invalid data is encountered.</p>\n"}],"owner":{"account_id":8839728,"reputation":435,"user_id":6602552,"accept_rate":44,"display_name":"Otis Ottington"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1635976476,"creation_date":1635947515,"question_id":69826080,"body_markdown":"In my application, I have almost 1 million entries in my DB. This data is transformed into one/several XML files which finally get validated against an XSD. If there is an error the XML file cannot be sent to its destination.\r\n\r\nI don&#39;t like this all-or-nothing method, failing after a long time of processing. As the data enters (from the db) over the day: Is there a way to validate every single entry alone? I don&#39;t want to create a file for each entry due to performance issues, so I wonder if there is a way to extract the XSD into a java object and then partially validate it inside the code?\r\n\r\nCan you help?","title":"How to validate single entries of a XML structure against an XSD schema","body":"<p>In my application, I have almost 1 million entries in my DB. This data is transformed into one/several XML files which finally get validated against an XSD. If there is an error the XML file cannot be sent to its destination.</p>\n<p>I don't like this all-or-nothing method, failing after a long time of processing. As the data enters (from the db) over the day: Is there a way to validate every single entry alone? I don't want to create a file for each entry due to performance issues, so I wonder if there is a way to extract the XSD into a java object and then partially validate it inside the code?</p>\n<p>Can you help?</p>\n"},{"tags":["java","instanceof"],"comments":[{"owner":{"account_id":2628168,"reputation":889,"user_id":2274773,"accept_rate":75,"display_name":"DaGLiMiOuX"},"score":0,"creation_date":1369216293,"post_id":16688655,"comment_id":24016744,"body_markdown":"Hope this helps http://www.java-samples.com/showtutorial.php?tutorialid=332 You can use `qux instanceof Foo`","body":"Hope this helps <a href=\"http://www.java-samples.com/showtutorial.php?tutorialid=332\" rel=\"nofollow noreferrer\">java-samples.com/showtutorial.php?tutorialid=332</a> You can use <code>qux instanceof Foo</code>"},{"owner":{"account_id":219917,"reputation":820,"user_id":477064,"display_name":"Dazzy_G"},"score":0,"creation_date":1369216511,"post_id":16688655,"comment_id":24016873,"body_markdown":"@Selvin Using instanceof does not necessarily mean the app design is wrong. For example it is used in adapters when you are trying to map data to multiple view types.","body":"@Selvin Using instanceof does not necessarily mean the app design is wrong. For example it is used in adapters when you are trying to map data to multiple view types."},{"owner":{"account_id":353320,"reputation":6609,"user_id":690952,"display_name":"Selvin"},"score":1,"creation_date":1369216605,"post_id":16688655,"comment_id":24016937,"body_markdown":"but checking if object is instance of Foo but not Bar(when Bar extends Foo) is wrong app design","body":"but checking if object is instance of Foo but not Bar(when Bar extends Foo) is wrong app design"}],"answers":[{"tags":[],"owner":{"account_id":2124262,"reputation":2634,"user_id":1886855,"display_name":"Marco Forberg"},"down_vote_count":4,"up_vote_count":9,"is_accepted":false,"score":5,"last_activity_date":1369216339,"creation_date":1369216339,"answer_id":16688776,"question_id":16688655,"body_markdown":"you should use instanceof\r\n\r\n    if(qux instanceof Foo &amp;&amp; !(qux instanceof Bar)) {\r\n        ...\r\n    }\r\n\r\nThis works with both classes and interfaces, so in most cases it should preferred over `.class` which does not work with interfaces.","title":"Check if an object is an instance of a class (but not an instance of its subclass)","body":"<p>you should use instanceof</p>\n\n<pre><code>if(qux instanceof Foo &amp;&amp; !(qux instanceof Bar)) {\n    ...\n}\n</code></pre>\n\n<p>This works with both classes and interfaces, so in most cases it should preferred over <code>.class</code> which does not work with interfaces.</p>\n"},{"tags":[],"owner":{"account_id":2739817,"reputation":1193,"user_id":2361598,"display_name":"nitegazer2003"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1369216387,"creation_date":1369216387,"answer_id":16688791,"question_id":16688655,"body_markdown":"If you are looking for exact class match the only means is `qux.getClass().equals(Foo.class)`. instanceof will also return true for subclasses.","title":"Check if an object is an instance of a class (but not an instance of its subclass)","body":"<p>If you are looking for exact class match the only means is <code>qux.getClass().equals(Foo.class)</code>. instanceof will also return true for subclasses.</p>\n"},{"tags":[],"owner":{"account_id":218057,"reputation":67728,"user_id":474189,"accept_rate":72,"display_name":"Duncan Jones"},"down_vote_count":0,"up_vote_count":83,"is_accepted":true,"score":83,"last_activity_date":1369216397,"creation_date":1369216397,"answer_id":16688794,"question_id":16688655,"body_markdown":"If you have to do this, the only way would be the `getClass().equals(Foo.class)` option you&#39;ve suggested.\r\n\r\nHowever, the goal of OO design is to allow you to treat *any* `Foo` in the same fashion. Whether or not the instance is a subclass should be irrelevant in a normal program.","title":"Check if an object is an instance of a class (but not an instance of its subclass)","body":"<p>If you have to do this, the only way would be the <code>getClass().equals(Foo.class)</code> option you've suggested.</p>\n\n<p>However, the goal of OO design is to allow you to treat <em>any</em> <code>Foo</code> in the same fashion. Whether or not the instance is a subclass should be irrelevant in a normal program.</p>\n"},{"tags":[],"owner":{"account_id":2264130,"reputation":38897,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1369216455,"creation_date":1369216455,"answer_id":16688815,"question_id":16688655,"body_markdown":"Well you already know that qux is instanceof Foo (unless it&#39;s null...), so a simple `qux instanceof Bar` and a null check should be all you need.\r\n\r\n","title":"Check if an object is an instance of a class (but not an instance of its subclass)","body":"<p>Well you already know that qux is instanceof Foo (unless it's null...), so a simple <code>qux instanceof Bar</code> and a null check should be all you need.</p>\n"},{"tags":[],"owner":{"account_id":293322,"reputation":10392,"user_id":596555,"accept_rate":75,"display_name":"boiledwater"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1369216819,"creation_date":1369216819,"answer_id":16688927,"question_id":16688655,"body_markdown":"        package com.instance;\r\n        \r\n        public class Foo {\r\n        \tpublic void instance(Foo f) {\r\n        \t\tSystem.out.println(&quot;---------&quot;);\r\n        \t\tSystem.out.println(f.getClass());\r\n        \t\tSystem.out.println(getClass());\r\n        \t\tif (f.getClass() == getClass()) {\r\n        \t\t\tSystem.out.println(&quot;Yes&quot;);\r\n        \t\t} else {\r\n        \t\t\tSystem.out.println(&quot;No&quot;);\r\n        \t\t}\r\n        \t}\r\n        }\r\n    \r\n    \r\n    package com.instance;\r\n    \r\n    public class Main {\r\n    \r\n    \t/**\r\n    \t * @param args\r\n    \t */\r\n    \tpublic static void main(String[] args) {\r\n    \t\tFoo f1 = new Foo();\r\n    \t\tFoo f2 = new Foo();\r\n    \t\tFoo f3 = new Bar();\r\n    \t\tf1.instance(f1);\r\n    \t\tf1.instance(f2);\r\n    \t\tf1.instance(f3);\r\n    \t}\r\n    \r\n    }\r\n    \r\n    \r\n        ","title":"Check if an object is an instance of a class (but not an instance of its subclass)","body":"<pre><code>    package com.instance;\n\n    public class Foo {\n        public void instance(Foo f) {\n            System.out.println(\"---------\");\n            System.out.println(f.getClass());\n            System.out.println(getClass());\n            if (f.getClass() == getClass()) {\n                System.out.println(\"Yes\");\n            } else {\n                System.out.println(\"No\");\n            }\n        }\n    }\n\n\npackage com.instance;\n\npublic class Main {\n\n    /**\n     * @param args\n     */\n    public static void main(String[] args) {\n        Foo f1 = new Foo();\n        Foo f2 = new Foo();\n        Foo f3 = new Bar();\n        f1.instance(f1);\n        f1.instance(f2);\n        f1.instance(f3);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1336531,"reputation":9732,"user_id":1279145,"accept_rate":83,"display_name":"Karthik Prasad"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1369217837,"creation_date":1369217837,"answer_id":16689218,"question_id":16688655,"body_markdown":"I just tried following code, it seems like working fine\r\n\r\n    public class BaseClass {\r\n    \t\r\n    \tprivate String a;\r\n    \t\r\n    \tpublic boolean isInstanceOf(BaseClass base){\r\n    \t\tif(base == null){\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \t\telse if(getClass() == base.getClass()){\r\n    \t\t\treturn true;\r\n    \t\t}else{\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n    \r\n    \r\n    \r\n    public class DervidClass extends BaseClass {\r\n    \r\n    \t\r\n    \tpublic boolean isInstanceOf(DervidClass base) {\r\n    \t\tif(base == null){\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \t\telse if(getClass() == base.getClass()){\r\n    \t\t\treturn true;\r\n    \t\t}else{\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t\r\n    }\r\n\r\n    public class myTest {\r\n    public static void main(String[] args) throws ParseException {\r\n    \t\t\r\n    \t\t\r\n    \t\tBaseClass base = new BaseClass();\r\n    \t\tBaseClass base1 = new BaseClass();\r\n    \t\tDervidClass derived = new DervidClass();\r\n    \t\t\r\n    \t\tBaseClass d1 = new DervidClass();\r\n    \t\t\r\n    \t\tSystem.out.println(base.isInstanceOf(d1));\r\n    \t\tSystem.out.println(d1.isInstanceOf(d1));\r\n    \t\tSystem.out.println((d1 instanceof BaseClass));\r\n    \t\t\r\n    \t\t\r\n    \t}","title":"Check if an object is an instance of a class (but not an instance of its subclass)","body":"<p>I just tried following code, it seems like working fine</p>\n\n<pre><code>public class BaseClass {\n\n    private String a;\n\n    public boolean isInstanceOf(BaseClass base){\n        if(base == null){\n            return false;\n        }\n        else if(getClass() == base.getClass()){\n            return true;\n        }else{\n            return false;\n        }\n    }\n\n}\n\n\n\npublic class DervidClass extends BaseClass {\n\n\n    public boolean isInstanceOf(DervidClass base) {\n        if(base == null){\n            return false;\n        }\n        else if(getClass() == base.getClass()){\n            return true;\n        }else{\n            return false;\n        }\n    }\n\n\n}\n\npublic class myTest {\npublic static void main(String[] args) throws ParseException {\n\n\n        BaseClass base = new BaseClass();\n        BaseClass base1 = new BaseClass();\n        DervidClass derived = new DervidClass();\n\n        BaseClass d1 = new DervidClass();\n\n        System.out.println(base.isInstanceOf(d1));\n        System.out.println(d1.isInstanceOf(d1));\n        System.out.println((d1 instanceof BaseClass));\n\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3796206,"reputation":916,"user_id":3151210,"accept_rate":100,"display_name":"Ashish Kumar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1487150077,"creation_date":1487150077,"answer_id":42245076,"question_id":16688655,"body_markdown":"I have read all the answers which have been posted so far but couldn&#39;t find satisfactory answer yet. Answering to **Is there some kind of statement like `instanceof` for this check? or I should use `qux.getClass().equals(Foo.class)`** question I would say yes, there is `instanceof` operator in java to check if the object is instance of class. Below is an example-:\r\n\r\n    class Vehicle {\r\n    \r\n    }\r\n    \r\n    class Car extends Vehicle {\r\n    \r\n    }\r\n    \r\n    public class Research {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tVehicle vehicle = new Vehicle();\r\n    \t\t\r\n    \t\tif (vehicle instanceof Vehicle) {\r\n    \t\t\tSystem.out.println(&quot;vehicle instanceof Vehicle : TRUE&quot;);\r\n    \t\t} else {\r\n    \t\t\tSystem.out.println(&quot;vehicle instanceof Vehicle : FALSE&quot;);\r\n    \t\t}\r\n    \r\n    \t\tif (vehicle instanceof Car) {\r\n    \t\t\tSystem.out.println(&quot;vehicle instanceof Car : TRUE&quot;);\r\n    \t\t} else {\r\n    \t\t\tSystem.out.println(&quot;vehicle instanceof Car : FALSE&quot;);\r\n    \t\t}\r\n    \r\n    \t\tSystem.out.println();\r\n    \t\tCar car = new Car();\r\n    \r\n    \t\tif (car instanceof Vehicle) {\r\n    \t\t\tSystem.out.println(&quot;car instanceof Vehicle : TRUE&quot;);\r\n    \t\t} else {\r\n    \t\t\tSystem.out.println(&quot;car instanceof Vehicle : FALSE&quot;);\r\n    \t\t}\r\n    \r\n    \t\tif (car instanceof Car) {\r\n    \t\t\tSystem.out.println(&quot;car instanceof Car : TRUE&quot;);\r\n    \t\t} else {\r\n    \t\t\tSystem.out.println(&quot;car instanceof Car : FALSE&quot;);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n**Output-:**\r\n\r\n    vehicle instanceof Vehicle : TRUE\r\n    vehicle instanceof Car : FALSE\r\n    \r\n    car instanceof Vehicle : TRUE\r\n    car instanceof Car : TRUE\r\n\r\n**Description-:**`instanceof` operator tells if an object is a instance of a class or it&#39;s parent classes (up to any level).&lt;br&gt;\r\n`vehicle instanceof Car : FALSE` line of output is indicating that `instanceof` operator will not tell if an object is a instance of its sub class.&lt;br&gt;\r\n\r\nAnother way is to use `getClass().equals(Foo.class)` to determine if an object is a instance of a class or not. Let us see below example-:\r\n\r\n    class Vehicle {\r\n    \r\n    }\r\n    \r\n    class Car extends Vehicle {\r\n    \r\n    }\r\n    \r\n    public class Research {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tVehicle vehicle = new Vehicle();\r\n    \t\t\r\n    \t\tif (vehicle.getClass().equals(Vehicle.class)) {\r\n    \t\t\tSystem.out.println(&quot;vehicle instanceof Vehicle : TRUE&quot;);\r\n    \t\t} else {\r\n    \t\t\tSystem.out.println(&quot;vehicle instanceof Vehicle : FALSE&quot;);\r\n    \t\t}\r\n    \r\n    \t\tif (vehicle.getClass().equals(Car.class)) {\r\n    \t\t\tSystem.out.println(&quot;vehicle instanceof Car : TRUE&quot;);\r\n    \t\t} else {\r\n    \t\t\tSystem.out.println(&quot;vehicle instanceof Car : FALSE&quot;);\r\n    \t\t}\r\n    \r\n    \t\tSystem.out.println();\r\n    \t\tCar car = new Car();\r\n    \r\n    \t\tif (car.getClass().equals(Vehicle.class)) {\r\n    \t\t\tSystem.out.println(&quot;car instanceof Vehicle : TRUE&quot;);\r\n    \t\t} else {\r\n    \t\t\tSystem.out.println(&quot;car instanceof Vehicle : FALSE&quot;);\r\n    \t\t}\r\n    \r\n    \t\tif (car.getClass().equals(Car.class)) {\r\n    \t\t\tSystem.out.println(&quot;car instanceof Car : TRUE&quot;);\r\n    \t\t} else {\r\n    \t\t\tSystem.out.println(&quot;car instanceof Car : FALSE&quot;);\r\n    \t\t}\r\n    \t\t\r\n    \t\t\r\n    \t}\r\n    }\r\n\r\n**Output-:**\r\n\r\n    vehicle instanceof Vehicle : TRUE\r\n    vehicle instanceof Car : FALSE\r\n    \r\n    car instanceof Vehicle : FALSE\r\n    car instanceof Car : TRUE\r\n\r\n**Description-:** It would be clear from the above example that which one(out of above two) should be opted where?&lt;br&gt;\r\n\r\n&gt; Important Notes-:\r\n\r\n 1. `instanceof` operator will not throw `NullPointerException` exception in case if reference variable is not pointing to any object(i.e. its having null reference).\r\n 2. `car.getClass().equals(Car.class)` will throw `NullPointerException` exception in case if `car` is not pointing to any object(i.e. its having null reference). Therefore one must place extra null check with this for example `car != null &amp;&amp; car.getClass().equals(Car.class)` to prevent it from `NullPointerException`.\r\n 3. `instanceof` operator tells if an object is a instance of a class or it&#39;s parent classes (up to any level).\r\n 4. `car.getClass().equals(Car.class)` will tell if an object is a instance of class only. **(Parent &amp; Sub classes will not be considered at all)**","title":"Check if an object is an instance of a class (but not an instance of its subclass)","body":"<p>I have read all the answers which have been posted so far but couldn't find satisfactory answer yet. Answering to <strong>Is there some kind of statement like <code>instanceof</code> for this check? or I should use <code>qux.getClass().equals(Foo.class)</code></strong> question I would say yes, there is <code>instanceof</code> operator in java to check if the object is instance of class. Below is an example-:</p>\n\n<pre><code>class Vehicle {\n\n}\n\nclass Car extends Vehicle {\n\n}\n\npublic class Research {\n    public static void main(String[] args) {\n        Vehicle vehicle = new Vehicle();\n\n        if (vehicle instanceof Vehicle) {\n            System.out.println(\"vehicle instanceof Vehicle : TRUE\");\n        } else {\n            System.out.println(\"vehicle instanceof Vehicle : FALSE\");\n        }\n\n        if (vehicle instanceof Car) {\n            System.out.println(\"vehicle instanceof Car : TRUE\");\n        } else {\n            System.out.println(\"vehicle instanceof Car : FALSE\");\n        }\n\n        System.out.println();\n        Car car = new Car();\n\n        if (car instanceof Vehicle) {\n            System.out.println(\"car instanceof Vehicle : TRUE\");\n        } else {\n            System.out.println(\"car instanceof Vehicle : FALSE\");\n        }\n\n        if (car instanceof Car) {\n            System.out.println(\"car instanceof Car : TRUE\");\n        } else {\n            System.out.println(\"car instanceof Car : FALSE\");\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Output-:</strong></p>\n\n<pre><code>vehicle instanceof Vehicle : TRUE\nvehicle instanceof Car : FALSE\n\ncar instanceof Vehicle : TRUE\ncar instanceof Car : TRUE\n</code></pre>\n\n<p><strong>Description-:</strong><code>instanceof</code> operator tells if an object is a instance of a class or it's parent classes (up to any level).<br>\n<code>vehicle instanceof Car : FALSE</code> line of output is indicating that <code>instanceof</code> operator will not tell if an object is a instance of its sub class.<br></p>\n\n<p>Another way is to use <code>getClass().equals(Foo.class)</code> to determine if an object is a instance of a class or not. Let us see below example-:</p>\n\n<pre><code>class Vehicle {\n\n}\n\nclass Car extends Vehicle {\n\n}\n\npublic class Research {\n    public static void main(String[] args) {\n        Vehicle vehicle = new Vehicle();\n\n        if (vehicle.getClass().equals(Vehicle.class)) {\n            System.out.println(\"vehicle instanceof Vehicle : TRUE\");\n        } else {\n            System.out.println(\"vehicle instanceof Vehicle : FALSE\");\n        }\n\n        if (vehicle.getClass().equals(Car.class)) {\n            System.out.println(\"vehicle instanceof Car : TRUE\");\n        } else {\n            System.out.println(\"vehicle instanceof Car : FALSE\");\n        }\n\n        System.out.println();\n        Car car = new Car();\n\n        if (car.getClass().equals(Vehicle.class)) {\n            System.out.println(\"car instanceof Vehicle : TRUE\");\n        } else {\n            System.out.println(\"car instanceof Vehicle : FALSE\");\n        }\n\n        if (car.getClass().equals(Car.class)) {\n            System.out.println(\"car instanceof Car : TRUE\");\n        } else {\n            System.out.println(\"car instanceof Car : FALSE\");\n        }\n\n\n    }\n}\n</code></pre>\n\n<p><strong>Output-:</strong></p>\n\n<pre><code>vehicle instanceof Vehicle : TRUE\nvehicle instanceof Car : FALSE\n\ncar instanceof Vehicle : FALSE\ncar instanceof Car : TRUE\n</code></pre>\n\n<p><strong>Description-:</strong> It would be clear from the above example that which one(out of above two) should be opted where?<br></p>\n\n<blockquote>\n  <p>Important Notes-:</p>\n</blockquote>\n\n<ol>\n<li><code>instanceof</code> operator will not throw <code>NullPointerException</code> exception in case if reference variable is not pointing to any object(i.e. its having null reference).</li>\n<li><code>car.getClass().equals(Car.class)</code> will throw <code>NullPointerException</code> exception in case if <code>car</code> is not pointing to any object(i.e. its having null reference). Therefore one must place extra null check with this for example <code>car != null &amp;&amp; car.getClass().equals(Car.class)</code> to prevent it from <code>NullPointerException</code>.</li>\n<li><code>instanceof</code> operator tells if an object is a instance of a class or it's parent classes (up to any level).</li>\n<li><code>car.getClass().equals(Car.class)</code> will tell if an object is a instance of class only. <strong>(Parent &amp; Sub classes will not be considered at all)</strong></li>\n</ol>\n"}],"owner":{"account_id":455586,"reputation":32079,"user_id":853836,"accept_rate":84,"display_name":"Addev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56131,"favorite_count":0,"down_vote_count":0,"up_vote_count":60,"accepted_answer_id":16688794,"answer_count":7,"score":60,"last_activity_date":1635976428,"creation_date":1369216099,"question_id":16688655,"body_markdown":"For this example:\r\n\r\n    public class Foo{}\r\n    \r\n    public class Bar extends Foo{}\r\n\r\n    ....\r\n\r\n    void myMethod(Foo qux){\r\n       if (checkInstance(qux,Foo.class)){\r\n         ....\r\n       }\r\n    }\r\n\r\nHow can I check if `qux` is an instance of Foo (but not an instance of its subclass of foo)? That is:\r\n\r\n - checkInstance(qux,Foo.class)=true\r\n - checkInstance(qux,Bar.class)=false\r\n\r\nIs there some kind of statement like `instanceof` for this check? or I should use `qux.getClass().equals(Foo.class)`\r\n","title":"Check if an object is an instance of a class (but not an instance of its subclass)","body":"<p>For this example:</p>\n<pre><code>public class Foo{}\n\npublic class Bar extends Foo{}\n\n....\n\nvoid myMethod(Foo qux){\n   if (checkInstance(qux,Foo.class)){\n     ....\n   }\n}\n</code></pre>\n<p>How can I check if <code>qux</code> is an instance of Foo (but not an instance of its subclass of foo)? That is:</p>\n<ul>\n<li>checkInstance(qux,Foo.class)=true</li>\n<li>checkInstance(qux,Bar.class)=false</li>\n</ul>\n<p>Is there some kind of statement like <code>instanceof</code> for this check? or I should use <code>qux.getClass().equals(Foo.class)</code></p>\n"},{"tags":["java","spring-boot","redis","stomp"],"answers":[{"tags":[],"owner":{"account_id":1029091,"reputation":307,"user_id":1037770,"display_name":"Omeri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635976334,"creation_date":1635976334,"answer_id":69832151,"question_id":69136414,"body_markdown":"I was able to implement this using using existing Redis / Sentinel setup using pub/sub.\r\n\r\nEvents are sent to the server using SockJS as normal, and then Redis, which then publishes to the subscribers.  \r\n\r\nI used this SpringBoot reference documentation:\r\nhttps://docs.spring.io/spring-data/data-redis/docs/2.5.4/reference/html/#reference","title":"Synching Stomp over Web Sockets in SpringBoot on a Cluster with Redis as a Message Broker","body":"<p>I was able to implement this using using existing Redis / Sentinel setup using pub/sub.</p>\n<p>Events are sent to the server using SockJS as normal, and then Redis, which then publishes to the subscribers.</p>\n<p>I used this SpringBoot reference documentation:\n<a href=\"https://docs.spring.io/spring-data/data-redis/docs/2.5.4/reference/html/#reference\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/data-redis/docs/2.5.4/reference/html/#reference</a></p>\n"}],"owner":{"account_id":1029091,"reputation":307,"user_id":1037770,"display_name":"Omeri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":444,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635976334,"creation_date":1631297577,"question_id":69136414,"body_markdown":"I am working on a SpringBoot web app using web sockets and I have a functional implementation for a single server. \r\n\r\nI am researching the best solution for integrating a cluster of servers so that the clients connected to each of the load balanced servers would get the broadcasted messages sent from all servers. \r\n\r\n**What is the best practice to connect clustered web socket servers?** \r\n\r\nI see references to RabitMQ but since we have Redis already in place I am trying to figure out if Redis will work as a Stomp Message Broker.\r\n\r\nThanks in advance,\r\n\r\nErion\r\n  ","title":"Synching Stomp over Web Sockets in SpringBoot on a Cluster with Redis as a Message Broker","body":"<p>I am working on a SpringBoot web app using web sockets and I have a functional implementation for a single server.</p>\n<p>I am researching the best solution for integrating a cluster of servers so that the clients connected to each of the load balanced servers would get the broadcasted messages sent from all servers.</p>\n<p><strong>What is the best practice to connect clustered web socket servers?</strong></p>\n<p>I see references to RabitMQ but since we have Redis already in place I am trying to figure out if Redis will work as a Stomp Message Broker.</p>\n<p>Thanks in advance,</p>\n<p>Erion</p>\n"},{"tags":["java","canvas","awt","game-development","bufferstrategy"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1635948807,"post_id":69825495,"comment_id":123428254,"body_markdown":"*When I run my game all I get is a frame with a blank screen:* - what do you expect to get. You don&#39;t do any painting. Also, not sure why you are using a BufferedStratgy. Swing is double buffered by default. Just do [Custom Painting](https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html).","body":"<i>When I run my game all I get is a frame with a blank screen:</i> - what do you expect to get. You don&#39;t do any painting. Also, not sure why you are using a BufferedStratgy. Swing is double buffered by default. Just do <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Custom Painting</a>."},{"owner":{"account_id":13381876,"reputation":52,"user_id":9656873,"display_name":"IssiahB"},"score":0,"creation_date":1635950447,"post_id":69825495,"comment_id":123429056,"body_markdown":"@camickr Thank you for the respond, and I expect a black background, also I have tried drawing other things and nothing appears. I am also not using swing, I&#39;m using a Canvas, and just switched the JFrame to a Frame to see it that would work, but it&#39;s the same results.","body":"@camickr Thank you for the respond, and I expect a black background, also I have tried drawing other things and nothing appears. I am also not using swing, I&#39;m using a Canvas, and just switched the JFrame to a Frame to see it that would work, but it&#39;s the same results."},{"owner":{"account_id":2675582,"reputation":1012,"user_id":2312064,"display_name":"krzydyn"},"score":0,"creation_date":1635951194,"post_id":69825495,"comment_id":123429385,"body_markdown":"Keep in mind that drawing is happening in EDT (in some `pain(Graphics g)` method. And there cannot be any blocking loop inside. Your main game loop should be designed in such way - call `repaint()` after you change the state of the game, and then then `paint(...)` should draw the current state of the game.","body":"Keep in mind that drawing is happening in EDT (in some <code>pain(Graphics g)</code> method. And there cannot be any blocking loop inside. Your main game loop should be designed in such way - call <code>repaint()</code> after you change the state of the game, and then then <code>paint(...)</code> should draw the current state of the game."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1635957163,"post_id":69825495,"comment_id":123432189,"body_markdown":"*I expect a black background* well you don&#39;t have any code that paints a background. Setting the color of the Graphics object doesn&#39;t cause the background to be painted. *I am also not using swing, I&#39;m using a Canvas,* - that was my point. You were using a JFrame, which is a Swing component. So you should be using a JPanel to do custom painting with Swing. It is easier than trying to use a Canvas with a BufferStrategy.","body":"<i>I expect a black background</i> well you don&#39;t have any code that paints a background. Setting the color of the Graphics object doesn&#39;t cause the background to be painted. <i>I am also not using swing, I&#39;m using a Canvas,</i> - that was my point. You were using a JFrame, which is a Swing component. So you should be using a JPanel to do custom painting with Swing. It is easier than trying to use a Canvas with a BufferStrategy."}],"answers":[{"tags":[],"owner":{"account_id":13381876,"reputation":52,"user_id":9656873,"display_name":"IssiahB"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635976253,"creation_date":1635976253,"answer_id":69832137,"question_id":69825495,"body_markdown":"Okay so I changed my *JFrame* to a *Frame* so that I&#39;m not mixing swing components with awt components. Also I was calling `g.setBackground(color)` which wasn&#39;t painting anything to the screen, so instead I simply set the graphics color with `g.setColor(color)`. Then I filled the background with `g.fillRect(0, 0, canvas.getWidth(), canvas.getHeight())`.\r\n\r\nHere is my new drawFrame() method:\r\n\r\n    public void drawFrame() {\r\n\t\tCanvas canvas = Display.getCanvas();\r\n\t\tBufferStrategy strat = canvas.getBufferStrategy();\r\n\t\tif (strat == null) {\r\n\t\t\tcanvas.createBufferStrategy(3);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tdo {\r\n\t\t\tdo {\r\n\t\t\t\tGraphics2D g = null;\r\n\t\t\t\tint screenWidth = canvas.getWidth();\r\n\t\t\t\tint screenHeight = canvas.getHeight();\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tg = (Graphics2D) strat.getDrawGraphics();\r\n\t\t\t\t\tg.setColor(Color.black); // Set Graphics Color\r\n\t\t\t\t\tg.fillRect(0, 0, screenWidth, screenHeight); // Fill Background\r\n\r\n\r\n                    // Do All Drawing here\r\n\r\n\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tg.dispose();\r\n\t\t\t\t}\r\n\t\t\t} while (strat.contentsRestored());\r\n\t\t\t\r\n\t\t\tstrat.show();\r\n\t\t\tToolkit.getDefaultToolkit().sync(); // Also added this to synchronize graphics state\r\n\t\t} while (strat.contentsLost());\r\n\t}\r\n\r\nThis seems to be working for me and now I get this when I run my game: \r\n[![Black Background Game][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JDvPH.png","title":"Having Trouble With Drawing To BufferStrategy Java","body":"<p>Okay so I changed my <em>JFrame</em> to a <em>Frame</em> so that I'm not mixing swing components with awt components. Also I was calling <code>g.setBackground(color)</code> which wasn't painting anything to the screen, so instead I simply set the graphics color with <code>g.setColor(color)</code>. Then I filled the background with <code>g.fillRect(0, 0, canvas.getWidth(), canvas.getHeight())</code>.</p>\n<p>Here is my new drawFrame() method:</p>\n<pre><code>public void drawFrame() {\n    Canvas canvas = Display.getCanvas();\n    BufferStrategy strat = canvas.getBufferStrategy();\n    if (strat == null) {\n        canvas.createBufferStrategy(3);\n        return;\n    }\n    \n    do {\n        do {\n            Graphics2D g = null;\n            int screenWidth = canvas.getWidth();\n            int screenHeight = canvas.getHeight();\n            \n            try {\n                g = (Graphics2D) strat.getDrawGraphics();\n                g.setColor(Color.black); // Set Graphics Color\n                g.fillRect(0, 0, screenWidth, screenHeight); // Fill Background\n\n\n                // Do All Drawing here\n\n\n            } finally {\n                g.dispose();\n            }\n        } while (strat.contentsRestored());\n        \n        strat.show();\n        Toolkit.getDefaultToolkit().sync(); // Also added this to synchronize graphics state\n    } while (strat.contentsLost());\n}\n</code></pre>\n<p>This seems to be working for me and now I get this when I run my game:\n<a href=\"https://i.stack.imgur.com/JDvPH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JDvPH.png\" alt=\"Black Background Game\" /></a></p>\n"}],"owner":{"account_id":13381876,"reputation":52,"user_id":9656873,"display_name":"IssiahB"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635976253,"creation_date":1635945251,"question_id":69825495,"body_markdown":"I am creating a game and want to draw to a Canvas using it&#39;s BufferStrategy. For some reason it doesn&#39;t seem to want to display anything on the screen. I&#39;ve looked at the Java Documentation and read several Stackoverflow questions that others have asked, but can&#39;t get it to work. Just wanting to display a black background so that I know it is working.\r\n\r\nHere is where I create the Canvas:\r\n\r\n    public static void createDisplay() {\r\n\t\tif (frame != null)\r\n\t\t\treturn;\r\n\r\n\t\tURL path = Display.class.getResource(ICON_PATH);\r\n\t\tImage icon = Toolkit.getDefaultToolkit().getImage(path);\r\n\t\tGraphicsEnvironment env = GraphicsEnvironment.getLocalGraphicsEnvironment();\r\n\t\tGraphicsConfiguration config = env.getDefaultScreenDevice().getDefaultConfiguration();\r\n\r\n\t\tDisplay.frame = new Frame(FRAME_TITLE, config);\r\n\t\tDisplay.canvas = new Canvas(config);\r\n\t\tframe.setMinimumSize(MIMIMUM_FRAME_SIZE);\r\n\r\n\t\tframe.setIconImage(icon);\r\n\t\tframe.addWindowListener(this); // For closing frame\r\n\t\tframe.setExtendedState(JFrame.MAXIMIZED_BOTH);\r\n\t\tframe.add(canvas);\r\n\t\t\r\n\t\tframe.setVisible(true);\r\n\t}\r\n\r\nAnd here is where I try to display the black background:\r\n\r\n    public void drawFrame() {\r\n\t\tCanvas canvas = Display.getCanvas();\r\n\t\tBufferStrategy strat = canvas.getBufferStrategy();\r\n\t\tif (strat == null) {\r\n\t\t\tcanvas.createBufferStrategy(3);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tdo {\r\n\t\t\tdo {\r\n\t\t\t\tGraphics2D g = null;\r\n\t\t\t\tint screenWidth = canvas.getWidth();\r\n\t\t\t\tint screenHeight = canvas.getHeight();\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tg = (Graphics2D) strat.getDrawGraphics();\r\n\t\t\t\t\tg.clearRect(0, 0, screenWidth, screenHeight);\r\n\t\t\t\t\r\n\t\t\t\t\t//BufferedImage map = loader.loadWorld();\r\n\t\t\t\t\tg.setBackground(Color.black);\r\n\t\t\t\t\t//g.drawImage(map, 0, 0, canvas);\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tg.dispose();\r\n\t\t\t\t}\r\n\t\t\t} while (strat.contentsRestored());\r\n\t\t\t\r\n\t\t\tstrat.show();\r\n\t\t} while (strat.contentsLost());\r\n\t\t\r\n\t}\r\n\r\ndrawFrame() is called multiple times from my game loop and createDisplay() is called once before the game loop is started. When I run my game all I get is a frame with a blank screen: [![Game Running][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GUZnL.png\r\n\r\nThank You for your help.","title":"Having Trouble With Drawing To BufferStrategy Java","body":"<p>I am creating a game and want to draw to a Canvas using it's BufferStrategy. For some reason it doesn't seem to want to display anything on the screen. I've looked at the Java Documentation and read several Stackoverflow questions that others have asked, but can't get it to work. Just wanting to display a black background so that I know it is working.</p>\n<p>Here is where I create the Canvas:</p>\n<pre><code>public static void createDisplay() {\n    if (frame != null)\n        return;\n\n    URL path = Display.class.getResource(ICON_PATH);\n    Image icon = Toolkit.getDefaultToolkit().getImage(path);\n    GraphicsEnvironment env = GraphicsEnvironment.getLocalGraphicsEnvironment();\n    GraphicsConfiguration config = env.getDefaultScreenDevice().getDefaultConfiguration();\n\n    Display.frame = new Frame(FRAME_TITLE, config);\n    Display.canvas = new Canvas(config);\n    frame.setMinimumSize(MIMIMUM_FRAME_SIZE);\n\n    frame.setIconImage(icon);\n    frame.addWindowListener(this); // For closing frame\n    frame.setExtendedState(JFrame.MAXIMIZED_BOTH);\n    frame.add(canvas);\n    \n    frame.setVisible(true);\n}\n</code></pre>\n<p>And here is where I try to display the black background:</p>\n<pre><code>public void drawFrame() {\n    Canvas canvas = Display.getCanvas();\n    BufferStrategy strat = canvas.getBufferStrategy();\n    if (strat == null) {\n        canvas.createBufferStrategy(3);\n        return;\n    }\n    \n    do {\n        do {\n            Graphics2D g = null;\n            int screenWidth = canvas.getWidth();\n            int screenHeight = canvas.getHeight();\n            \n            try {\n                g = (Graphics2D) strat.getDrawGraphics();\n                g.clearRect(0, 0, screenWidth, screenHeight);\n            \n                //BufferedImage map = loader.loadWorld();\n                g.setBackground(Color.black);\n                //g.drawImage(map, 0, 0, canvas);\n            } finally {\n                g.dispose();\n            }\n        } while (strat.contentsRestored());\n        \n        strat.show();\n    } while (strat.contentsLost());\n    \n}\n</code></pre>\n<p>drawFrame() is called multiple times from my game loop and createDisplay() is called once before the game loop is started. When I run my game all I get is a frame with a blank screen: <a href=\"https://i.stack.imgur.com/GUZnL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GUZnL.png\" alt=\"Game Running\" /></a></p>\n<p>Thank You for your help.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1635972283,"post_id":69831350,"comment_id":123437669,"body_markdown":"Override `readObject`?","body":"Override <code>readObject</code>?"},{"owner":{"account_id":2234211,"reputation":2732,"user_id":1971062,"display_name":"Douma"},"score":0,"creation_date":1635972637,"post_id":69831350,"comment_id":123437801,"body_markdown":"readObject is final and since the variable is private I cannot access it from the outside. I thought maybe there is a simple way of doing this.","body":"readObject is final and since the variable is private I cannot access it from the outside. I thought maybe there is a simple way of doing this."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1635972804,"post_id":69831350,"comment_id":123437864,"body_markdown":"Is `readObject` final? The documentation for [`ObjectInputStream`](https://docs.oracle.com/javase/7/docs/api/java/io/ObjectInputStream.html) says &quot;Serializable classes that require special handling during the serialization and deserialization process should implement the following methods: ... `private void readObject(java.io.ObjectInputStream stream)`&quot;.","body":"Is <code>readObject</code> final? The documentation for <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/ObjectInputStream.html\" rel=\"nofollow noreferrer\"><code>ObjectInputStream</code></a> says &quot;Serializable classes that require special handling during the serialization and deserialization process should implement the following methods: ... <code>private void readObject(java.io.ObjectInputStream stream)</code>&quot;."},{"owner":{"account_id":2234211,"reputation":2732,"user_id":1971062,"display_name":"Douma"},"score":0,"creation_date":1635973175,"post_id":69831350,"comment_id":123437974,"body_markdown":"I thought you meant override the ObjectInputStream method readObject, but I had to declare the following method (in the Stackoverflow class) to make it work:\n\n```@Serial private void readObject(java.io.ObjectInputStream stream) { this.stackOverflow = new Object(); }```\n\nIf you create an answer for this I&#39;ll accept it.","body":"I thought you meant override the ObjectInputStream method readObject, but I had to declare the following method (in the Stackoverflow class) to make it work:  <code>@Serial private void readObject(java.io.ObjectInputStream stream) { this.stackOverflow = new Object(); }</code>  If you create an answer for this I&#39;ll accept it."}],"answers":[{"tags":[],"owner":{"account_id":1153671,"reputation":2570,"user_id":1134856,"accept_rate":36,"display_name":"treeno"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635976049,"creation_date":1635975726,"answer_id":69832060,"question_id":69831350,"body_markdown":"The IIB is copied into all constructors of a class by the compiler and it is executed as the last statement of each constructor. `FileInputStream#readObject` however, does not call any constructors of serialized classes that implement `Serializable`. Only the default constructor of parent classes that do not implement `Serializable` are called.\r\n\r\nSince your property `stackOverflow` is `transient` it is not serialized, and since the constructor of `StackOverflow` is not called during deserialization, the property is not reinitialized. \r\n\r\nIf you need to do some initialization while deserialization you can do this by implementing `Serializable#readObject) \r\n\r\n    public class StackOverflow implements Serializable {\r\n       private void readObject(ObjectInputStream stream) throws IOException, ClassNotFoundException {\r\n          ...\r\n       }\r\n    }\r\n\r\n@see https://docs.oracle.com/javase/8/docs/api/java/io/ObjectInputStream.html\r\n\r\nIf you don&#39;t mind, I&#39;d like to recommend to be very careful with IIBs. They are rarely used and  therefore hard to understand. It is better to simply initialize a property directly like \r\n\r\n    private Cat animal = new Cat();\r\n\r\nMore elaborate initialization can be done in constructors, this is what they are used for in the first place. \r\nIf you have more then one constructor and you don&#39;t want to repeat the same initialization in every constructor, you can delegate to another constructor by calling `this(...)`, or simply by using a method.\r\n\r\n\r\n\r\n\r\n\r\n","title":"Instance Initialization Block not called with ObjectInputStream, how to recreate an object?","body":"<p>The IIB is copied into all constructors of a class by the compiler and it is executed as the last statement of each constructor. <code>FileInputStream#readObject</code> however, does not call any constructors of serialized classes that implement <code>Serializable</code>. Only the default constructor of parent classes that do not implement <code>Serializable</code> are called.</p>\n<p>Since your property <code>stackOverflow</code> is <code>transient</code> it is not serialized, and since the constructor of <code>StackOverflow</code> is not called during deserialization, the property is not reinitialized.</p>\n<p>If you need to do some initialization while deserialization you can do this by implementing `Serializable#readObject)</p>\n<pre><code>public class StackOverflow implements Serializable {\n   private void readObject(ObjectInputStream stream) throws IOException, ClassNotFoundException {\n      ...\n   }\n}\n</code></pre>\n<p>@see <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/ObjectInputStream.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/io/ObjectInputStream.html</a></p>\n<p>If you don't mind, I'd like to recommend to be very careful with IIBs. They are rarely used and  therefore hard to understand. It is better to simply initialize a property directly like</p>\n<pre><code>private Cat animal = new Cat();\n</code></pre>\n<p>More elaborate initialization can be done in constructors, this is what they are used for in the first place.\nIf you have more then one constructor and you don't want to repeat the same initialization in every constructor, you can delegate to another constructor by calling <code>this(...)</code>, or simply by using a method.</p>\n"}],"owner":{"account_id":2234211,"reputation":2732,"user_id":1971062,"display_name":"Douma"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69832060,"answer_count":1,"score":1,"last_activity_date":1635976049,"creation_date":1635971319,"question_id":69831350,"body_markdown":"I have the following code:\r\n\r\n```java\r\nimport java.io.*;\r\n\r\npublic class StackOverflow implements Serializable\r\n{\r\n    private transient Object stackOverflow; \r\n\r\n    {\r\n        stackOverflow = new Object();\r\n    }\r\n\r\n    public static void main(String[] args) throws IOException, ClassNotFoundException\r\n    {\r\n        File object = new File(&quot;/Users/user/Desktop/stackoverflow.txt&quot;);\r\n\r\n        try (FileOutputStream fos = new FileOutputStream(object);\r\n             ObjectOutputStream oos = new ObjectOutputStream(fos)) {\r\n            oos.writeObject(new StackOverflow());\r\n        }\r\n\r\n        try (FileInputStream fis = new FileInputStream(object);\r\n             ObjectInputStream ois = new ObjectInputStream(fis)) {\r\n            StackOverflow stackOverflow = (StackOverflow) ois.readObject();\r\n            System.out.println(stackOverflow.stackOverflow); //output: null\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nSince object is not serializable I made it transient: \r\n\r\n```java \r\nprivate transient Object stackOverflow; \r\n```\r\n\r\nThe problem is, the IIB (Instance Initialization Block) is not executed on the `readObject`-method. So the question is how to I recreate the object.stackoverflow variable? And since it is private, I cannot set it from the outside. ","title":"Instance Initialization Block not called with ObjectInputStream, how to recreate an object?","body":"<p>I have the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.*;\n\npublic class StackOverflow implements Serializable\n{\n    private transient Object stackOverflow; \n\n    {\n        stackOverflow = new Object();\n    }\n\n    public static void main(String[] args) throws IOException, ClassNotFoundException\n    {\n        File object = new File(&quot;/Users/user/Desktop/stackoverflow.txt&quot;);\n\n        try (FileOutputStream fos = new FileOutputStream(object);\n             ObjectOutputStream oos = new ObjectOutputStream(fos)) {\n            oos.writeObject(new StackOverflow());\n        }\n\n        try (FileInputStream fis = new FileInputStream(object);\n             ObjectInputStream ois = new ObjectInputStream(fis)) {\n            StackOverflow stackOverflow = (StackOverflow) ois.readObject();\n            System.out.println(stackOverflow.stackOverflow); //output: null\n        }\n    }\n}\n</code></pre>\n<p>Since object is not serializable I made it transient:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private transient Object stackOverflow; \n</code></pre>\n<p>The problem is, the IIB (Instance Initialization Block) is not executed on the <code>readObject</code>-method. So the question is how to I recreate the object.stackoverflow variable? And since it is private, I cannot set it from the outside.</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":4739783,"reputation":612585,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":0,"creation_date":1635973873,"post_id":69831650,"comment_id":123438190,"body_markdown":"Does it mean if there are 2 or more blank lines you need to remove one? Between `af1` and `23131`, the expected string shows one blank line, while there are two in the input.","body":"Does it mean if there are 2 or more blank lines you need to remove one? Between <code>af1</code> and <code>23131</code>, the expected string shows one blank line, while there are two in the input."},{"owner":{"account_id":4739783,"reputation":612585,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":0,"creation_date":1635974253,"post_id":69831650,"comment_id":123438311,"body_markdown":"Ok, let me guess: `.replaceAll(&quot;(\\\\R{2,})\\\\R|(\\\\R)\\\\R&quot;, &quot;$1$2&quot;)` works for you, doesn&#39;t it?","body":"Ok, let me guess: <code>.replaceAll(&quot;(\\\\R{2,})\\\\R|(\\\\R)\\\\R&quot;, &quot;$1$2&quot;)</code> works for you, doesn&#39;t it?"},{"owner":{"account_id":20769999,"reputation":391,"user_id":15252938,"display_name":"Omegon"},"score":0,"creation_date":1635975205,"post_id":69831650,"comment_id":123438644,"body_markdown":"@WiktorStribiżew not quite.I&#39;ll try to explain when I make my read string ```collectors.ToList``` I have characters: &#39;A&#39; next &#39;\\r&#39; next &#39;\\n&#39; then letters again.and in one place twice in a row &#39;\\r&#39; &#39;\\n&#39; &#39;\\r&#39; &#39;\\n&#39; and with your method everything remained, but the double was removed.Can you tell me how to make all the single \\r \\n removed and the double replaced with &quot;  &quot;(whitespace)","body":"@WiktorStribiżew not quite.I&#39;ll try to explain when I make my read string <code>collectors.ToList</code> I have characters: &#39;A&#39; next &#39;\\r&#39; next &#39;\\n&#39; then letters again.and in one place twice in a row &#39;\\r&#39; &#39;\\n&#39; &#39;\\r&#39; &#39;\\n&#39; and with your method everything remained, but the double was removed.Can you tell me how to make all the single \\r \\n removed and the double replaced with &quot;  &quot;(whitespace)"},{"owner":{"account_id":4739783,"reputation":612585,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":0,"creation_date":1635975544,"post_id":69831650,"comment_id":123438763,"body_markdown":"I can&#39;t quite get what you are after. [This](https://ideone.com/GrfRgo)?","body":"I can&#39;t quite get what you are after. <a href=\"https://ideone.com/GrfRgo\" rel=\"nofollow noreferrer\">This</a>?"},{"owner":{"account_id":20769999,"reputation":391,"user_id":15252938,"display_name":"Omegon"},"score":0,"creation_date":1635975783,"post_id":69831650,"comment_id":123438849,"body_markdown":"@WiktorStribiżew I &#39;ll edit it now to make it clearer","body":"@WiktorStribiżew I &#39;ll edit it now to make it clearer"},{"owner":{"account_id":20769999,"reputation":391,"user_id":15252938,"display_name":"Omegon"},"score":0,"creation_date":1635976048,"post_id":69831650,"comment_id":123438938,"body_markdown":"@WiktorStribiżew edit","body":"@WiktorStribiżew edit"},{"owner":{"account_id":4739783,"reputation":612585,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":0,"creation_date":1635976823,"post_id":69831650,"comment_id":123439135,"body_markdown":"No way is it clearer. Post 1) an exact string literal you have as input, 2) exact string literal you need as output.","body":"No way is it clearer. Post 1) an exact string literal you have as input, 2) exact string literal you need as output."},{"owner":{"account_id":20769999,"reputation":391,"user_id":15252938,"display_name":"Omegon"},"score":0,"creation_date":1635977431,"post_id":69831650,"comment_id":123439284,"body_markdown":"@WiktorStribiżew Here above I have an input file where each character is on its own line,I read the entire file into a string and get that there are now \\r\\n between the letters, and if there was an empty string in the files, then ```\\r\\n\\r\\n```.I add a line to the list and it turns out what is above, and I would like there to be only characters, that is, not ```&#39;a&#39; &#39;\\r&#39; &#39;\\n&#39;  &#39;\\r&#39; &#39;\\n&#39; &#39;1&#39; &#39;\\r&#39; &#39;\\n&#39; &#39;b&#39;``` so if single \\r\\n, then it is removed, and if double \\r\\n\\r\\n, then replace with a space.that is, ```&#39;A&#39; &quot; &#39;1&#39; &#39;b&#39;```","body":"@WiktorStribiżew Here above I have an input file where each character is on its own line,I read the entire file into a string and get that there are now \\r\\n between the letters, and if there was an empty string in the files, then <code>\\r\\n\\r\\n</code>.I add a line to the list and it turns out what is above, and I would like there to be only characters, that is, not <code>&#39;a&#39; &#39;\\r&#39; &#39;\\n&#39;  &#39;\\r&#39; &#39;\\n&#39; &#39;1&#39; &#39;\\r&#39; &#39;\\n&#39; &#39;b&#39;</code> so if single \\r\\n, then it is removed, and if double \\r\\n\\r\\n, then replace with a space.that is, <code>&#39;A&#39; &quot; &#39;1&#39; &#39;b&#39;</code>"},{"owner":{"account_id":20769999,"reputation":391,"user_id":15252938,"display_name":"Omegon"},"score":0,"creation_date":1635980737,"post_id":69831650,"comment_id":123440009,"body_markdown":"@sln thank you, your function is almost working.Everything is fine, but I put something after &quot;:&quot; &quot;\\r&quot;&quot;\\n&quot; don&#39;t know why this is so?","body":"@sln thank you, your function is almost working.Everything is fine, but I put something after &quot;:&quot; &quot;\\r&quot;&quot;\\n&quot; don&#39;t know why this is so?"},{"owner":{"account_id":268704,"reputation":2391,"user_id":15577665,"display_name":"sln"},"score":0,"creation_date":1636040022,"post_id":69831650,"comment_id":123456580,"body_markdown":"Run two regex. `(?&lt;![\\r\\n])(?:\\r?\\n|\\r)(?![\\r\\n])` then replace with a nothing. Then run `(:\\r?\\n|\\r){2,}` then replace with a space.","body":"Run two regex. <code>(?&lt;![\\r\\n])(?:\\r?\\n|\\r)(?![\\r\\n])</code> then replace with a nothing. Then run <code>(:\\r?\\n|\\r){2,}</code> then replace with a space."}],"answers":[{"tags":[],"owner":{"display_name":"user17223316"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635975063,"creation_date":1635975063,"answer_id":69831972,"question_id":69831650,"body_markdown":"Try this.\r\n\r\n    public static void main(String[] args) {\r\n        String str =\r\n            &quot;afaf\\r\\n&quot;\r\n            + &quot;\\r\\n&quot;\r\n            + &quot;af1\\r\\n&quot;\r\n            + &quot;\\r\\n&quot;\r\n            + &quot;\\r\\n&quot;\r\n            + &quot;23131&quot;;\r\n        System.out.println(str.replaceAll(&quot;\\\\r\\\\n((\\\\r\\\\n)+)&quot;, &quot;$1&quot;));\r\n    }\r\n\r\noutput:\r\n\r\n    afaf\r\n    af1\r\n    \r\n    23131\r\n\r\n","title":"How to remove single line transitions from a string, but leave one for double ones?","body":"<p>Try this.</p>\n<pre><code>public static void main(String[] args) {\n    String str =\n        &quot;afaf\\r\\n&quot;\n        + &quot;\\r\\n&quot;\n        + &quot;af1\\r\\n&quot;\n        + &quot;\\r\\n&quot;\n        + &quot;\\r\\n&quot;\n        + &quot;23131&quot;;\n    System.out.println(str.replaceAll(&quot;\\\\r\\\\n((\\\\r\\\\n)+)&quot;, &quot;$1&quot;));\n}\n</code></pre>\n<p>output:</p>\n<pre><code>afaf\naf1\n\n23131\n</code></pre>\n"}],"owner":{"account_id":20769999,"reputation":391,"user_id":15252938,"display_name":"Omegon"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635976039,"creation_date":1635973188,"question_id":69831650,"body_markdown":"I count lines from files in string .\r\n\r\n```\r\nString testing=newString(Files.readAllBytes(Paths.get(path)),StandardCharsets.UTF_8).replaceAll(&quot;\\\\r\\\\n{1}&quot;, &quot;&quot;);\r\n```\r\nWhat regular expression or something similar can be used to remove single line transitions, but leave double ones?\r\n\r\nThat is for example:\r\n\r\nthe elements in the file go like this:\r\n```\r\nA\r\n1\r\n\r\n\r\nb\r\n;\r\nd\r\n```\r\nWhen I do:\r\n```\r\nString testing = new String(Files.readAllBytes(Paths.get(path)), StandardCharsets.UTF_8).replaceAll(&quot;\\\\r\\\\n&quot;, &quot;&quot;);\r\nLinkedList&lt;Character&gt; alphabetList = testing.chars().mapToObj(i -&gt; (char)i).collect(Collectors.toList());\r\n```\r\nI get that the list contains such elements:\r\n```\r\nA\r\n\\\\r\r\n\\\\n\r\n\\\\r\r\n\\\\n\r\n1\r\n\\\\r\r\n\\\\n\r\nb\r\n```\r\nAnd I need the single ones to be removed , and the single ones replaced with &quot; &quot;.","title":"How to remove single line transitions from a string, but leave one for double ones?","body":"<p>I count lines from files in string .</p>\n<pre><code>String testing=newString(Files.readAllBytes(Paths.get(path)),StandardCharsets.UTF_8).replaceAll(&quot;\\\\r\\\\n{1}&quot;, &quot;&quot;);\n</code></pre>\n<p>What regular expression or something similar can be used to remove single line transitions, but leave double ones?</p>\n<p>That is for example:</p>\n<p>the elements in the file go like this:</p>\n<pre><code>A\n1\n\n\nb\n;\nd\n</code></pre>\n<p>When I do:</p>\n<pre><code>String testing = new String(Files.readAllBytes(Paths.get(path)), StandardCharsets.UTF_8).replaceAll(&quot;\\\\r\\\\n&quot;, &quot;&quot;);\nLinkedList&lt;Character&gt; alphabetList = testing.chars().mapToObj(i -&gt; (char)i).collect(Collectors.toList());\n</code></pre>\n<p>I get that the list contains such elements:</p>\n<pre><code>A\n\\\\r\n\\\\n\n\\\\r\n\\\\n\n1\n\\\\r\n\\\\n\nb\n</code></pre>\n<p>And I need the single ones to be removed , and the single ones replaced with &quot; &quot;.</p>\n"},{"tags":["java","spring-boot","ehcache","ehcache-3"],"comments":[{"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"score":1,"creation_date":1635894083,"post_id":69817721,"comment_id":123413392,"body_markdown":"Could the issue be caused by a typo? You are using `notificationList` in your configuration, not `myCache`.","body":"Could the issue be caused by a typo? You are using <code>notificationList</code> in your configuration, not <code>myCache</code>."},{"owner":{"account_id":14693538,"reputation":351,"user_id":10611511,"display_name":"Paloma Schkrab"},"score":0,"creation_date":1635914488,"post_id":69817721,"comment_id":123416651,"body_markdown":"Sorry, I replaced the name of the cache to add it here and missed this one. but they all match on my code","body":"Sorry, I replaced the name of the cache to add it here and missed this one. but they all match on my code"}],"answers":[{"tags":[],"owner":{"account_id":14693538,"reputation":351,"user_id":10611511,"display_name":"Paloma Schkrab"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635975812,"creation_date":1635975812,"answer_id":69832076,"question_id":69817721,"body_markdown":"Solved the issue with the following:\r\n\r\ndid not need the bean above and created a CacheHelper\r\n\r\n\r\n    private String storagePath = &quot;home\\\\parentFolder\\\\cache&quot;;\r\n    \r\n    private PersistentCacheManager persistentCacheManager;\r\n    private Cache&lt;String, String&gt; myCache;\r\n    \r\n    public EhCacheHelper() {\r\n        persistentCacheManager = CacheManagerBuilder.newCacheManagerBuilder()\r\n                .with(CacheManagerBuilder.persistence(new File(storagePath, &quot;myData&quot;)))\r\n                .withCache(&quot;myCache&quot;, CacheConfigurationBuilder.newCacheConfigurationBuilder(String.class, String.class,\r\n                        ResourcePoolsBuilder.newResourcePoolsBuilder()\r\n                                .disk(10, MemoryUnit.MB, true))\r\n                )\r\n                .build(true);\r\n    }\r\n    \r\n    public Cache&lt;String, NotificationListResponse&gt; getMyCacheFromCacheManager() {\r\n        return persistentCacheManager.getCache(&quot;myCache&quot;, String.class, String.class);\r\n    }\r\n\r\n \r\non the method I wanted cached, instead of having the Cacheable annotation, added code to access and save data to cache like:\r\n\r\n\r\n    if (cache.getMyCacheFromCacheManager().containsKey(myKey)) {\r\n        return cache.getMyCacheFromCacheManager().get(myKey);\r\n    }\r\n    .\r\n    .\r\n    .\r\n    cache.getMyCacheFromCacheManager().put(myKey, myValue);","title":"Persistent storage with SimpleCacheManager","body":"<p>Solved the issue with the following:</p>\n<p>did not need the bean above and created a CacheHelper</p>\n<pre><code>private String storagePath = &quot;home\\\\parentFolder\\\\cache&quot;;\n\nprivate PersistentCacheManager persistentCacheManager;\nprivate Cache&lt;String, String&gt; myCache;\n\npublic EhCacheHelper() {\n    persistentCacheManager = CacheManagerBuilder.newCacheManagerBuilder()\n            .with(CacheManagerBuilder.persistence(new File(storagePath, &quot;myData&quot;)))\n            .withCache(&quot;myCache&quot;, CacheConfigurationBuilder.newCacheConfigurationBuilder(String.class, String.class,\n                    ResourcePoolsBuilder.newResourcePoolsBuilder()\n                            .disk(10, MemoryUnit.MB, true))\n            )\n            .build(true);\n}\n\npublic Cache&lt;String, NotificationListResponse&gt; getMyCacheFromCacheManager() {\n    return persistentCacheManager.getCache(&quot;myCache&quot;, String.class, String.class);\n}\n</code></pre>\n<p>on the method I wanted cached, instead of having the Cacheable annotation, added code to access and save data to cache like:</p>\n<pre><code>if (cache.getMyCacheFromCacheManager().containsKey(myKey)) {\n    return cache.getMyCacheFromCacheManager().get(myKey);\n}\n.\n.\n.\ncache.getMyCacheFromCacheManager().put(myKey, myValue);\n</code></pre>\n"}],"owner":{"account_id":14693538,"reputation":351,"user_id":10611511,"display_name":"Paloma Schkrab"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":602,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635975812,"creation_date":1635892814,"question_id":69817721,"body_markdown":"I got an issue where the method on my service has annotation that looks like the following:\r\n\r\n    @Cacheable(value = &quot;myCache&quot;, key = &quot;&#39;myCache&#39; + #listType&quot;, unless = &quot;#result.getMyList().size() == 0&quot;)\r\n\r\nOn my EhCacheConfig I have that looks like the following: \r\n\r\n     @Bean\r\n        public CacheManager cacheManager() {\r\n            SimpleCacheManager cacheManager = new SimpleCacheManager();\r\n            List&lt;Cache&gt; caches = new ArrayList&lt;Cache&gt;();\r\n            caches.add(new ConcurrentMapCache(&quot;myCache&quot;));\r\n            cacheManager.setCaches(caches);\r\n            return cacheManager;\r\n        }\r\n\r\nThe cache works just as I expect it to but now I need to have a persistent storage and I can only find how to do it with PersistentCacheManager. when I try to implement it following [EhCache documentation][1] I keep getting an error:\r\n\r\n    &quot;Cannot find cache named &#39;myCache&#39; for Builder\r\n\r\nThis is my EhCacheConfig when implementing PersistentCacheManager:\r\n\r\n    @Bean\r\n        public PersistentCacheManager cacheManager() {\r\n            PersistentCacheManager persistentCacheManager = CacheManagerBuilder.newCacheManagerBuilder()\r\n                    .with(CacheManagerBuilder.persistence(new File(storagePath, &quot;myData&quot;)))\r\n                    .withCache(&quot;myCache&quot;, CacheConfigurationBuilder.newCacheConfigurationBuilder(String.class, NotificationListResponse.class,\r\n                            ResourcePoolsBuilder.newResourcePoolsBuilder()\r\n                                    .disk(10, MemoryUnit.MB, true))\r\n                    )\r\n                    .build();\r\n            persistentCacheManager.init(true);\r\n            return persistentCacheManager;\r\n        }\r\n\r\n\r\n  [1]: https://www.ehcache.org/documentation/3.9/tiering.html#disk","title":"Persistent storage with SimpleCacheManager","body":"<p>I got an issue where the method on my service has annotation that looks like the following:</p>\n<pre><code>@Cacheable(value = &quot;myCache&quot;, key = &quot;'myCache' + #listType&quot;, unless = &quot;#result.getMyList().size() == 0&quot;)\n</code></pre>\n<p>On my EhCacheConfig I have that looks like the following:</p>\n<pre><code> @Bean\n    public CacheManager cacheManager() {\n        SimpleCacheManager cacheManager = new SimpleCacheManager();\n        List&lt;Cache&gt; caches = new ArrayList&lt;Cache&gt;();\n        caches.add(new ConcurrentMapCache(&quot;myCache&quot;));\n        cacheManager.setCaches(caches);\n        return cacheManager;\n    }\n</code></pre>\n<p>The cache works just as I expect it to but now I need to have a persistent storage and I can only find how to do it with PersistentCacheManager. when I try to implement it following <a href=\"https://www.ehcache.org/documentation/3.9/tiering.html#disk\" rel=\"nofollow noreferrer\">EhCache documentation</a> I keep getting an error:</p>\n<pre><code>&quot;Cannot find cache named 'myCache' for Builder\n</code></pre>\n<p>This is my EhCacheConfig when implementing PersistentCacheManager:</p>\n<pre><code>@Bean\n    public PersistentCacheManager cacheManager() {\n        PersistentCacheManager persistentCacheManager = CacheManagerBuilder.newCacheManagerBuilder()\n                .with(CacheManagerBuilder.persistence(new File(storagePath, &quot;myData&quot;)))\n                .withCache(&quot;myCache&quot;, CacheConfigurationBuilder.newCacheConfigurationBuilder(String.class, NotificationListResponse.class,\n                        ResourcePoolsBuilder.newResourcePoolsBuilder()\n                                .disk(10, MemoryUnit.MB, true))\n                )\n                .build();\n        persistentCacheManager.init(true);\n        return persistentCacheManager;\n    }\n</code></pre>\n"},{"tags":["java","android","layout","styles"],"answers":[{"tags":[],"owner":{"account_id":420575,"reputation":5030,"user_id":798346,"accept_rate":56,"display_name":"Jim Rhodes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635975431,"creation_date":1635975431,"answer_id":69832019,"question_id":69831927,"body_markdown":"Unless things have changed since I last did this, you need to create separate styles.xml files for each resolution and place them in separate folders. The style name should be the same in both files. One will be placed in the &quot;values&quot; folder and the other one will be placed in &quot;values-sw720dp&quot;.\r\n","title":"How do I get the style to change based on the resolution of the device?","body":"<p>Unless things have changed since I last did this, you need to create separate styles.xml files for each resolution and place them in separate folders. The style name should be the same in both files. One will be placed in the &quot;values&quot; folder and the other one will be placed in &quot;values-sw720dp&quot;.</p>\n"}],"owner":{"account_id":23005379,"reputation":71,"user_id":17128751,"display_name":"mbob98"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69832019,"answer_count":1,"score":0,"last_activity_date":1635975431,"creation_date":1635974759,"question_id":69831927,"body_markdown":"I&#39;ve been working on my styles.xml file in order to make a button&#39;s text change color based on the resolution the app is loaded at. I did research on Styles and saw that there are qualifiers that can be added to designate the same style based on resolution, like &quot;someStyle&quot; and &quot;someStyle_sw720&quot; for the sw720 resolution. So I defined styles &quot;BodyButtonStyle&quot; and &quot;BodyButtonStyle_sw720&quot; in the app and gave them different values.\r\n\r\nBoth styles (default and the sw720 style) in styles.xml - \r\n\r\ndefault:\r\n\r\n    &lt;style name=&quot;BodyButtonStyle&quot;&gt;\r\n        &lt;item name=&quot;android:layout_width&quot;&gt;280dp&lt;/item&gt;\r\n        &lt;item name=&quot;android:layout_height&quot;&gt;50dp&lt;/item&gt;\r\n        &lt;item name=&quot;android:fontFamily&quot;&gt;@font/someText&lt;/item&gt;\r\n        &lt;item name=&quot;android:textAllCaps&quot;&gt;false&lt;/item&gt;\r\n        &lt;item name=&quot;android:textAlignment&quot;&gt;center&lt;/item&gt;\r\n        &lt;item name=&quot;android:textColor&quot;&gt;@color/colorWhite&lt;/item&gt;\r\n        &lt;item name=&quot;android:textSize&quot;&gt;25sp&lt;/item&gt;\r\n        &lt;item name=&quot;android:background&quot;&gt;@drawable/rectangle_shape_button&lt;/item&gt;\r\n         &lt;item name=&quot;android:layout_gravity&quot;&gt;center&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\nsw720:\r\n\r\n    &lt;style name=&quot;BodyButtonStyle_sw720&quot;&gt;\r\n        &lt;item name=&quot;android:layout_width&quot;&gt;200dp&lt;/item&gt;\r\n        &lt;item name=&quot;android:layout_height&quot;&gt;50dp&lt;/item&gt;\r\n        &lt;item name=&quot;android:fontFamily&quot;&gt;@font/someText&lt;/item&gt;\r\n        &lt;item name=&quot;android:textAllCaps&quot;&gt;false&lt;/item&gt;\r\n        &lt;item name=&quot;android:textAlignment&quot;&gt;center&lt;/item&gt;\r\n        &lt;item name=&quot;android:textColor&quot;&gt;@color/colorPurple&lt;/item&gt;\r\n        &lt;item name=&quot;android:textSize&quot;&gt;30sp&lt;/item&gt;\r\n        &lt;item name=&quot;android:background&quot;&gt;@drawable/rectangle_shape_button&lt;/item&gt;\r\n        &lt;item name=&quot;android:layout_gravity&quot;&gt;center&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\nIn the layout I&#39;m using, the style is set to &quot;@style/BodyButtonStyle&quot;. I was under the assumption that if I loaded the app on any resolution other than the sw720 one, I&#39;d get white (colorWhite) text, and the sw720 resolution would give it purple (colorPurple) text. I made this assumption because when there are multiple layouts in various resolutions, the app will pick the correct layout to use based on the resolution of the device (i.e a layout called &quot;someLayout&quot; has an sw720 version and an sw800 version, an sw800 device would load the sw800 layout).\r\n\r\nAm I missing something here? I&#39;ve also tried creating additional styles.xml files and loading them with their own &quot;BodyButtonStyle&quot; with different values based on resolution, but the app always seems to load the default regardless of the resolution. Ultimately, my goal is to get a single layout to load different values for elements based on the resolution of the device, and styles seemed to be the solution to that; however, although I seemingly followed the instructions for qualifiers (adding &quot;_sw720&quot; to the style name) it doesn&#39;t work, and only loads the default &quot;BodyButtonStyle&quot;.","title":"How do I get the style to change based on the resolution of the device?","body":"<p>I've been working on my styles.xml file in order to make a button's text change color based on the resolution the app is loaded at. I did research on Styles and saw that there are qualifiers that can be added to designate the same style based on resolution, like &quot;someStyle&quot; and &quot;someStyle_sw720&quot; for the sw720 resolution. So I defined styles &quot;BodyButtonStyle&quot; and &quot;BodyButtonStyle_sw720&quot; in the app and gave them different values.</p>\n<p>Both styles (default and the sw720 style) in styles.xml -</p>\n<p>default:</p>\n<pre><code>&lt;style name=&quot;BodyButtonStyle&quot;&gt;\n    &lt;item name=&quot;android:layout_width&quot;&gt;280dp&lt;/item&gt;\n    &lt;item name=&quot;android:layout_height&quot;&gt;50dp&lt;/item&gt;\n    &lt;item name=&quot;android:fontFamily&quot;&gt;@font/someText&lt;/item&gt;\n    &lt;item name=&quot;android:textAllCaps&quot;&gt;false&lt;/item&gt;\n    &lt;item name=&quot;android:textAlignment&quot;&gt;center&lt;/item&gt;\n    &lt;item name=&quot;android:textColor&quot;&gt;@color/colorWhite&lt;/item&gt;\n    &lt;item name=&quot;android:textSize&quot;&gt;25sp&lt;/item&gt;\n    &lt;item name=&quot;android:background&quot;&gt;@drawable/rectangle_shape_button&lt;/item&gt;\n     &lt;item name=&quot;android:layout_gravity&quot;&gt;center&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n<p>sw720:</p>\n<pre><code>&lt;style name=&quot;BodyButtonStyle_sw720&quot;&gt;\n    &lt;item name=&quot;android:layout_width&quot;&gt;200dp&lt;/item&gt;\n    &lt;item name=&quot;android:layout_height&quot;&gt;50dp&lt;/item&gt;\n    &lt;item name=&quot;android:fontFamily&quot;&gt;@font/someText&lt;/item&gt;\n    &lt;item name=&quot;android:textAllCaps&quot;&gt;false&lt;/item&gt;\n    &lt;item name=&quot;android:textAlignment&quot;&gt;center&lt;/item&gt;\n    &lt;item name=&quot;android:textColor&quot;&gt;@color/colorPurple&lt;/item&gt;\n    &lt;item name=&quot;android:textSize&quot;&gt;30sp&lt;/item&gt;\n    &lt;item name=&quot;android:background&quot;&gt;@drawable/rectangle_shape_button&lt;/item&gt;\n    &lt;item name=&quot;android:layout_gravity&quot;&gt;center&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n<p>In the layout I'm using, the style is set to &quot;@style/BodyButtonStyle&quot;. I was under the assumption that if I loaded the app on any resolution other than the sw720 one, I'd get white (colorWhite) text, and the sw720 resolution would give it purple (colorPurple) text. I made this assumption because when there are multiple layouts in various resolutions, the app will pick the correct layout to use based on the resolution of the device (i.e a layout called &quot;someLayout&quot; has an sw720 version and an sw800 version, an sw800 device would load the sw800 layout).</p>\n<p>Am I missing something here? I've also tried creating additional styles.xml files and loading them with their own &quot;BodyButtonStyle&quot; with different values based on resolution, but the app always seems to load the default regardless of the resolution. Ultimately, my goal is to get a single layout to load different values for elements based on the resolution of the device, and styles seemed to be the solution to that; however, although I seemingly followed the instructions for qualifiers (adding &quot;_sw720&quot; to the style name) it doesn't work, and only loads the default &quot;BodyButtonStyle&quot;.</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":2411568,"reputation":15860,"user_id":2106516,"accept_rate":91,"display_name":"tmarwen"},"score":0,"creation_date":1635973772,"post_id":69831720,"comment_id":123438161,"body_markdown":"Can you add code snippets with your data structure and what you have achieved so far. By the way, *Spring Boot* is a general purpose framework and has nothing to have with data by its own. So please describe you used stack (*Spring Data*, *Spring JPA*...)","body":"Can you add code snippets with your data structure and what you have achieved so far. By the way, <i>Spring Boot</i> is a general purpose framework and has nothing to have with data by its own. So please describe you used stack (<i>Spring Data</i>, <i>Spring JPA</i>...)"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1635973798,"post_id":69831720,"comment_id":123438168,"body_markdown":"For me, the question is unclear. Could you [edit] the post and give an example of what result is expected, given data in table `A` and `B`?","body":"For me, the question is unclear. Could you <a href=\"https://stackoverflow.com/posts/69831720/edit\">edit</a> the post and give an example of what result is expected, given data in table <code>A</code> and <code>B</code>?"},{"owner":{"account_id":20382503,"reputation":244,"user_id":14952296,"display_name":"stephane brun"},"score":0,"creation_date":1635974460,"post_id":69831720,"comment_id":123438389,"body_markdown":"what about setting up a foreign key between the two tables ?? Just asking...","body":"what about setting up a foreign key between the two tables ?? Just asking..."},{"owner":{"account_id":20382503,"reputation":244,"user_id":14952296,"display_name":"stephane brun"},"score":0,"creation_date":1635974716,"post_id":69831720,"comment_id":123438481,"body_markdown":"Can you try this  in your A entity as getter of class B:  `@Formula(&quot;select * from B&quot;)\n    public B getB() {\n        return B;\n    }`","body":"Can you try this  in your A entity as getter of class B:  <code>@Formula(&quot;select * from B&quot;)     public B getB() {         return B;     }</code>"},{"owner":{"account_id":8550991,"reputation":119,"user_id":6407879,"display_name":"kpk"},"score":0,"creation_date":1635975588,"post_id":69831720,"comment_id":123438786,"body_markdown":"No foreign keys to setting up","body":"No foreign keys to setting up"}],"answers":[{"tags":[],"owner":{"account_id":3985860,"reputation":456,"user_id":4408813,"display_name":"abstractnature"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635973877,"creation_date":1635973877,"answer_id":69831772,"question_id":69831720,"body_markdown":"You will have to go with a custom query using @Query annotation.\r\n\r\n    @Query(&quot;SELECT column1, column2 FROM A tb1, B tb2 WHERE ...&quot;)\r\n\r\nLike this.","title":"Spring : Join entity with one row table without join column","body":"<p>You will have to go with a custom query using @Query annotation.</p>\n<pre><code>@Query(&quot;SELECT column1, column2 FROM A tb1, B tb2 WHERE ...&quot;)\n</code></pre>\n<p>Like this.</p>\n"}],"owner":{"account_id":8550991,"reputation":119,"user_id":6407879,"display_name":"kpk"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":559,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635975347,"creation_date":1635973574,"question_id":69831720,"body_markdown":"I want to join table A with  table B in Spring Boot.\r\n\r\nTable A has multiple rows but table B has only one row (with general parameters, by the way)\r\n\r\n**There is no joining columns between these two tables**\r\n\r\nI just want to use a column from table B in entity class of table A\r\n\r\nTable A\r\n\r\n\r\n    @Getter\r\n    @Setter \r\n    @Entity\r\n    @Table(name=&quot;tableA&quot;)\r\n    public class tableA {\r\n     \r\n         @Id\r\n         @Column(name = &quot;id&quot;)\r\n         private Long id;\r\n\r\n         @Column(name = &quot;code&quot;)\r\n         private String code; \r\n\r\n     }\r\n\r\nTableB has only one row with one column &quot;codeformatt&quot;\r\n\r\n        | codeformat |\r\n        |------------|\r\n        | AAAAA-AAAA |\r\n\r\nthis is the format for the code of tableA. I want to use it yo display code with the proper format.\r\n\r\n**There are no foreign keys or joining columns**\r\n\r\nIf I had to write it in SQL I would write it like this:\r\n\r\n       select A.code , B.codeformat\r\n       from tableA A inner join tableB B on (1=1)\r\n \r\n         \r\n    \r\n\r\n\r\n\r\nDoes anyone has any clue how to do it?\r\n\r\nThanks a lot\r\n\r\nKostas","title":"Spring : Join entity with one row table without join column","body":"<p>I want to join table A with  table B in Spring Boot.</p>\n<p>Table A has multiple rows but table B has only one row (with general parameters, by the way)</p>\n<p><strong>There is no joining columns between these two tables</strong></p>\n<p>I just want to use a column from table B in entity class of table A</p>\n<p>Table A</p>\n<pre><code>@Getter\n@Setter \n@Entity\n@Table(name=&quot;tableA&quot;)\npublic class tableA {\n \n     @Id\n     @Column(name = &quot;id&quot;)\n     private Long id;\n\n     @Column(name = &quot;code&quot;)\n     private String code; \n\n }\n</code></pre>\n<p>TableB has only one row with one column &quot;codeformatt&quot;</p>\n<pre><code>    | codeformat |\n    |------------|\n    | AAAAA-AAAA |\n</code></pre>\n<p>this is the format for the code of tableA. I want to use it yo display code with the proper format.</p>\n<p><strong>There are no foreign keys or joining columns</strong></p>\n<p>If I had to write it in SQL I would write it like this:</p>\n<pre><code>   select A.code , B.codeformat\n   from tableA A inner join tableB B on (1=1)\n\n     \n</code></pre>\n<p>Does anyone has any clue how to do it?</p>\n<p>Thanks a lot</p>\n<p>Kostas</p>\n"},{"tags":["java","android","dji-sdk"],"answers":[{"tags":[],"owner":{"account_id":7785191,"reputation":1727,"user_id":5890321,"display_name":"Kenneth Argo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635975187,"creation_date":1635975187,"answer_id":69831985,"question_id":69747637,"body_markdown":"You are NOT limited to controlling the Virtual Joystick by any specific UI, the example uses the control as an easy way to demonstrate.\r\n\r\nHowever, you DO need to send a continuous stream of control values; I don&#39;t remember exactly but if I remember correctly you must send control values evert few-hundred MS or the Virtual Control times-out and ignores values sent.\r\n\r\nBe sure you send values often, without more of your code I&#39;m just taking a guess as the issue but above is a common mistake often seen.","title":"Phantom 4 Advanced - VirtualStick Control doesn&#39;t work","body":"<p>You are NOT limited to controlling the Virtual Joystick by any specific UI, the example uses the control as an easy way to demonstrate.</p>\n<p>However, you DO need to send a continuous stream of control values; I don't remember exactly but if I remember correctly you must send control values evert few-hundred MS or the Virtual Control times-out and ignores values sent.</p>\n<p>Be sure you send values often, without more of your code I'm just taking a guess as the issue but above is a common mistake often seen.</p>\n"}],"owner":{"account_id":23165859,"reputation":13,"user_id":17265803,"display_name":"여현빈"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635975187,"creation_date":1635388699,"question_id":69747637,"body_markdown":"I have a question about virtual stick control..\r\n\r\nI am trying to control a drone using VirtualStick Control.\r\nI&#39;m writing a code that the drone moves when the button is clicked once.\r\nBut it doesn&#39;t work properly...\r\nWhen I checked the example, it uses a joystick-type button like a drone controller.\r\nDo I have to control it this way?\r\nOr if any problems exist in my code, please tell me what the problem is...\r\n\r\nHere is the code I wrote..\r\n\r\n    public void SendDrone(float a, float b){\r\n        if(DroneController.isVirtualStickControlModeAvailable() != true){\r\n            CallInstance.VirtualStickSetting();\r\n        }\r\n\r\n        switch(DroneController.getRollPitchControlMode()){\r\n            case ANGLE:\r\n                DroneController.setRollPitchControlMode(RollPitchControlMode.VELOCITY);\r\n                Log.d(&quot;Caution: &quot;, &quot;Change the Mode First!&quot;);\r\n                break;\r\n\r\n            case VELOCITY:\r\n                DroneController.sendVirtualStickFlightControlData(new FlightControlData(a, b, 0, 0), djiError -&gt; {\r\n                    if(djiError != null)\r\n                    {\r\n                        Log.d(&quot;Warning: &quot;, djiError.getDescription());\r\n                    }\r\n                });\r\n        }","title":"Phantom 4 Advanced - VirtualStick Control doesn&#39;t work","body":"<p>I have a question about virtual stick control..</p>\n<p>I am trying to control a drone using VirtualStick Control.\nI'm writing a code that the drone moves when the button is clicked once.\nBut it doesn't work properly...\nWhen I checked the example, it uses a joystick-type button like a drone controller.\nDo I have to control it this way?\nOr if any problems exist in my code, please tell me what the problem is...</p>\n<p>Here is the code I wrote..</p>\n<pre><code>public void SendDrone(float a, float b){\n    if(DroneController.isVirtualStickControlModeAvailable() != true){\n        CallInstance.VirtualStickSetting();\n    }\n\n    switch(DroneController.getRollPitchControlMode()){\n        case ANGLE:\n            DroneController.setRollPitchControlMode(RollPitchControlMode.VELOCITY);\n            Log.d(&quot;Caution: &quot;, &quot;Change the Mode First!&quot;);\n            break;\n\n        case VELOCITY:\n            DroneController.sendVirtualStickFlightControlData(new FlightControlData(a, b, 0, 0), djiError -&gt; {\n                if(djiError != null)\n                {\n                    Log.d(&quot;Warning: &quot;, djiError.getDescription());\n                }\n            });\n    }\n</code></pre>\n"},{"tags":["java","sitemap"],"comments":[{"owner":{"account_id":6619,"reputation":73627,"user_id":11208,"accept_rate":70,"display_name":"Assaf Lavie"},"score":0,"creation_date":1306150330,"post_id":6096550,"comment_id":25929335,"body_markdown":"I don&#39;t really understand your question. It seems as though you haven&#39;t HTML escaped you data (regardless of using utf-8). Are you escaping or not?","body":"I don&#39;t really understand your question. It seems as though you haven&#39;t HTML escaped you data (regardless of using utf-8). Are you escaping or not?"},{"owner":{"account_id":375942,"reputation":3361,"user_id":727074,"accept_rate":71,"display_name":"Adam Lynch"},"score":0,"creation_date":1306150381,"post_id":6096550,"comment_id":25929336,"body_markdown":"I edited the question a lot.","body":"I edited the question a lot."},{"owner":{"account_id":2785,"reputation":76174,"user_id":3916,"accept_rate":100,"display_name":"Vineet Reynolds"},"score":0,"creation_date":1306150836,"post_id":6096550,"comment_id":7066839,"body_markdown":"Open your sitemap XML files in an editor that supports UTF-8 encoding (like Notepad++) for a quick test to determine whether your files are saved in the correct encoding.","body":"Open your sitemap XML files in an editor that supports UTF-8 encoding (like Notepad++) for a quick test to determine whether your files are saved in the correct encoding."},{"owner":{"account_id":375942,"reputation":3361,"user_id":727074,"accept_rate":71,"display_name":"Adam Lynch"},"score":0,"creation_date":1306151425,"post_id":6096550,"comment_id":7066983,"body_markdown":"@Vineet Done. Not certain where to look to see if the URLs are correctly UTF-8 encoded. I&#39;ve supplied a snippet of the XML file. It looks like the characters have been escaped (with HTML entities).","body":"@Vineet Done. Not certain where to look to see if the URLs are correctly UTF-8 encoded. I&#39;ve supplied a snippet of the XML file. It looks like the characters have been escaped (with HTML entities)."},{"owner":{"account_id":2785,"reputation":76174,"user_id":3916,"accept_rate":100,"display_name":"Vineet Reynolds"},"score":0,"creation_date":1306152066,"post_id":6096550,"comment_id":7067171,"body_markdown":"the Encoding menu in Notepad++ will allow you to view the current encoding used. You could change the encoding of the file, but that is not the point; use the suggested approach to specify the encoding for the URL. Additionally, also ensure that you write the sitemap file using UTF-8 encoding (when you use the FileOutputStream class or a different class).","body":"the Encoding menu in Notepad++ will allow you to view the current encoding used. You could change the encoding of the file, but that is not the point; use the suggested approach to specify the encoding for the URL. Additionally, also ensure that you write the sitemap file using UTF-8 encoding (when you use the FileOutputStream class or a different class)."}],"answers":[{"tags":[],"owner":{"account_id":308414,"reputation":3579,"user_id":620275,"accept_rate":92,"display_name":"Jai"},"down_vote_count":1,"up_vote_count":18,"is_accepted":true,"score":17,"last_activity_date":1306150431,"creation_date":1306150431,"answer_id":6096599,"question_id":6096550,"body_markdown":"Try using `URLEncoder.encode(stringToBeEncoded, &quot;UTF-8&quot;)` to encode the url.","title":"Correctly generating a sitemap XML with special characters","body":"<p>Try using <code>URLEncoder.encode(stringToBeEncoded, \"UTF-8\")</code> to encode the url.</p>\n"},{"tags":[],"owner":{"account_id":62515,"reputation":45036,"user_id":185722,"accept_rate":100,"display_name":"Alexander Pogrebnyak"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1306150882,"creation_date":1306150542,"answer_id":6096614,"question_id":6096550,"body_markdown":"All non-ascii characters in URL has to be &#39;x-url-encoding&#39; encoded.\r\n\r\nHere is the wiki link that explains it: http://en.wikipedia.org/wiki/Percent-encoding.\r\n\r\nIn addition all XML special symbols (`&amp;, &gt;, &lt;, etc.`) also have to be escaped.\r\n\r\n[Jai&#39;s answer][1] shows the correct method to x-url-encode arbitrary string.  Note, however, that it does not do XML escaping.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/6096550/utf-8-encode-urls/6096599#6096599","title":"Correctly generating a sitemap XML with special characters","body":"<p>All non-ascii characters in URL has to be 'x-url-encoding' encoded.</p>\n\n<p>Here is the wiki link that explains it: <a href=\"http://en.wikipedia.org/wiki/Percent-encoding\" rel=\"nofollow noreferrer\">http://en.wikipedia.org/wiki/Percent-encoding</a>.</p>\n\n<p>In addition all XML special symbols (<code>&amp;, &gt;, &lt;, etc.</code>) also have to be escaped.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/6096550/utf-8-encode-urls/6096599#6096599\">Jai's answer</a> shows the correct method to x-url-encode arbitrary string.  Note, however, that it does not do XML escaping.</p>\n"},{"tags":[],"owner":{"account_id":246,"reputation":107903,"user_id":304,"accept_rate":40,"display_name":"McDowell"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1306151631,"creation_date":1306151631,"answer_id":6096796,"question_id":6096550,"body_markdown":"URLs must be percent-encoded as per the [URI spec][1].\r\n\r\nFor example, the code point U+00e3 (&#227;) would become the encoded sequence `%C3%A3`.\r\n\r\nWhen a URI is emitted in an XML document, it must conform to the markup requirements for XML.\r\n\r\nFor example, the URI `http://foo/bar?a=b&amp;x=%C3%A3` becomes `http://foo/bar?a=b&amp;amp;x=%C3%A3`. The ampersand is an [escape character][2] in XML.\r\n\r\n_You can find a detailed discussion of URI encoding [here][3]._\r\n\r\n\r\n  [1]: https://www.rfc-editor.org/rfc/rfc3986#appendix-A\r\n  [2]: http://www.w3.org/TR/xml/#dt-escape\r\n  [3]: http://illegalargumentexception.blogspot.com/2009/12/java-safe-character-handling-and-url.html","title":"Correctly generating a sitemap XML with special characters","body":"<p>URLs must be percent-encoded as per the <a href=\"https://www.rfc-editor.org/rfc/rfc3986#appendix-A\" rel=\"nofollow noreferrer\">URI spec</a>.</p>\n<p>For example, the code point U+00e3 (ã) would become the encoded sequence <code>%C3%A3</code>.</p>\n<p>When a URI is emitted in an XML document, it must conform to the markup requirements for XML.</p>\n<p>For example, the URI <code>http://foo/bar?a=b&amp;x=%C3%A3</code> becomes <code>http://foo/bar?a=b&amp;amp;x=%C3%A3</code>. The ampersand is an <a href=\"http://www.w3.org/TR/xml/#dt-escape\" rel=\"nofollow noreferrer\">escape character</a> in XML.</p>\n<p><em>You can find a detailed discussion of URI encoding <a href=\"http://illegalargumentexception.blogspot.com/2009/12/java-safe-character-handling-and-url.html\" rel=\"nofollow noreferrer\">here</a>.</em></p>\n"},{"tags":[],"owner":{"account_id":295118,"reputation":3597,"user_id":599361,"accept_rate":67,"display_name":"Tom"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1306513122,"creation_date":1306513122,"answer_id":6155033,"question_id":6096550,"body_markdown":"Don&#39;t confuse [percentage encoding][1] of non-ASCII characters in URLs with XML [entity escapes][2] of characters in URLs. You need to do both when creating XML sitemaps.\r\n\r\n  [1]: http://www.microsystools.com/products/sitemap-generator/help/character-percentage-url-encoding/\r\n  [2]: http://www.microsystools.com/products/sitemap-generator/help/xml-sitemap-file-amp/\r\n\r\nIn honesty from reading your original post, it seems something funky is going on because the characters you mention remind me of when an unsuccessful conversion has taken place :)\r\n\r\nAre you sure those characters truly are part of your URLs when using UTF-8?","title":"Correctly generating a sitemap XML with special characters","body":"<p>Don't confuse <a href=\"http://www.microsystools.com/products/sitemap-generator/help/character-percentage-url-encoding/\" rel=\"nofollow\">percentage encoding</a> of non-ASCII characters in URLs with XML <a href=\"http://www.microsystools.com/products/sitemap-generator/help/xml-sitemap-file-amp/\" rel=\"nofollow\">entity escapes</a> of characters in URLs. You need to do both when creating XML sitemaps.</p>\n\n<p>In honesty from reading your original post, it seems something funky is going on because the characters you mention remind me of when an unsuccessful conversion has taken place :)</p>\n\n<p>Are you sure those characters truly are part of your URLs when using UTF-8?</p>\n"}],"owner":{"account_id":375942,"reputation":3361,"user_id":727074,"accept_rate":71,"display_name":"Adam Lynch"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49154,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":6096599,"answer_count":4,"score":9,"last_activity_date":1635974799,"creation_date":1306150123,"question_id":6096550,"body_markdown":"I&#39;ve a program which generates XML sitemaps for Google Webmaster Tools (among other things).  \r\nGWTs is giving me errors for some sitemaps because the URLs contain character sequences like &#227;&#190;, &#227;‹, &#227;€, etc. ** \r\n\r\n[Sitemap specification says][1]:\r\n\r\n&gt; Your Sitemap file must be UTF-8 encoded (you can generally do this when you save the file). As with all XML files, any data values (including URLs) must use entity escape codes for the characters listed: **&amp;**, **&#39;**, **&quot;**, **&lt;**, **&gt;**.\r\n\r\nThe special characters are escaped in the XML files (with HTML entities). XML file snippet:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;urlset xmlns=&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;&gt;\r\n        &lt;url&gt;\r\n            &lt;loc&gt;http://domain/folder/listing-&amp;#227;&amp;#129;.shtml&lt;/loc&gt;\r\n            ...\r\n\r\nAre my URLs UTF-8 encoded? If not, how do I do this in Java? The following is the line in my program where I add the URL to the sitemap:\r\n\r\n        siteMap.addUrl(StringEscapeUtils.escapeXml(countryName+&quot;/&quot;+twoCharFile.getRelativeFileName().toLowerCase()));\r\n\r\n\r\nI&#39;m not sure which ones are causing the error, probably the first two examples.\r\n\r\n\r\n  [1]: https://www.sitemaps.org/protocol.html","title":"Correctly generating a sitemap XML with special characters","body":"<p>I've a program which generates XML sitemaps for Google Webmaster Tools (among other things).<br />\nGWTs is giving me errors for some sitemaps because the URLs contain character sequences like ã¾, ã‹, ã€, etc. **</p>\n<p><a href=\"https://www.sitemaps.org/protocol.html\" rel=\"nofollow noreferrer\">Sitemap specification says</a>:</p>\n<blockquote>\n<p>Your Sitemap file must be UTF-8 encoded (you can generally do this when you save the file). As with all XML files, any data values (including URLs) must use entity escape codes for the characters listed: <strong>&amp;</strong>, <strong>'</strong>, <strong>&quot;</strong>, <strong>&lt;</strong>, <strong>&gt;</strong>.</p>\n</blockquote>\n<p>The special characters are escaped in the XML files (with HTML entities). XML file snippet:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;urlset xmlns=&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;&gt;\n    &lt;url&gt;\n        &lt;loc&gt;http://domain/folder/listing-&amp;#227;&amp;#129;.shtml&lt;/loc&gt;\n        ...\n</code></pre>\n<p>Are my URLs UTF-8 encoded? If not, how do I do this in Java? The following is the line in my program where I add the URL to the sitemap:</p>\n<pre><code>    siteMap.addUrl(StringEscapeUtils.escapeXml(countryName+&quot;/&quot;+twoCharFile.getRelativeFileName().toLowerCase()));\n</code></pre>\n<p>I'm not sure which ones are causing the error, probably the first two examples.</p>\n"},{"tags":["java","spring","jpa","relational-database"],"comments":[{"owner":{"account_id":4564696,"reputation":43122,"user_id":3706016,"display_name":"jarlh"},"score":0,"creation_date":1635972676,"post_id":69831551,"comment_id":123437819,"body_markdown":"I see the &lt;sql&gt; tag, but there&#39;s no SQL above. Do you expect a SQL answer?","body":"I see the &lt;sql&gt; tag, but there&#39;s no SQL above. Do you expect a SQL answer?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1635972687,"post_id":69831551,"comment_id":123437822,"body_markdown":"&quot;*... but I cannot put fetchtype.EAGER on every annotation, because I get another error ...*&quot; - What error? --- Another possibility aside eager fetching would be to use `@Transactional`, so that the entity is still attached when the lazy intialization occurs.","body":"&quot;<i>... but I cannot put fetchtype.EAGER on every annotation, because I get another error ...</i>&quot; - What error? --- Another possibility aside eager fetching would be to use <code>@Transactional</code>, so that the entity is still attached when the lazy intialization occurs."}],"answers":[{"tags":[],"owner":{"account_id":20382503,"reputation":244,"user_id":14952296,"display_name":"stephane brun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635974253,"creation_date":1635973381,"answer_id":69831686,"question_id":69831551,"body_markdown":"With a pure sql model point of view, what&#39;s the difference between breakfast, lunch, afterLunch and dinner ? \r\n\r\nYou have two solutions :\r\n\r\n 1. you need to implement sql inheritance through your hibernate model first. Have a look at here https://www.baeldung.com/hibernate-inheritance. \r\n\r\n2. you have to specify the dedicated `@JoinTable` for each relationship\r\n\r\nIn other words, your implementation definitely cannot work like this.","title":"@ManyToMany relationship, JPA","body":"<p>With a pure sql model point of view, what's the difference between breakfast, lunch, afterLunch and dinner ?</p>\n<p>You have two solutions :</p>\n<ol>\n<li><p>you need to implement sql inheritance through your hibernate model first. Have a look at here <a href=\"https://www.baeldung.com/hibernate-inheritance\" rel=\"nofollow noreferrer\">https://www.baeldung.com/hibernate-inheritance</a>.</p>\n</li>\n<li><p>you have to specify the dedicated <code>@JoinTable</code> for each relationship</p>\n</li>\n</ol>\n<p>In other words, your implementation definitely cannot work like this.</p>\n"}],"owner":{"account_id":21331194,"reputation":43,"user_id":15702984,"display_name":"George Marizov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1635974253,"creation_date":1635972544,"question_id":69831551,"body_markdown":"I have an issue here, I am trying to make FoodProgram with two entities: FoodProgram-holds 4 meals with List&lt;FoodEntity&gt; for each meal. And FoodEntity with name, calories and id. The idea is that each meal can choose from all foods, and foods can repeat in every meal(if we eat eggs for lunch, we can add them to dinner too). I have @ManyToMany annotation in my FoodProgram class. Problem is there, when I try to getLunch from FoodProgram, I got error for lazily initialize, but I cannot put fetchtype.EAGER on every annotation, because I get another error. Should I just make another entity and to figure out different approach?\r\n\r\nFoodEntity\r\n\r\n    @Entity\r\n    public class Food {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    private String name;\r\n    private Integer calories;\r\n\r\n    public Food() {\r\n    }\r\n\r\nFoodProgram entity\r\n\r\n    @Entity\r\n    public class FoodProgram {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    @ManyToMany\r\n    private List&lt;Food&gt; breakfast;\r\n    @ManyToMany\r\n    private List&lt;Food&gt; lunch;\r\n    @ManyToMany\r\n    private List&lt;Food&gt; afterLunch;\r\n    @ManyToMany\r\n    private List&lt;Food&gt; dinner;\r\n\r\n    public FoodProgram() {\r\n    }\r\n\r\n","title":"@ManyToMany relationship, JPA","body":"<p>I have an issue here, I am trying to make FoodProgram with two entities: FoodProgram-holds 4 meals with List for each meal. And FoodEntity with name, calories and id. The idea is that each meal can choose from all foods, and foods can repeat in every meal(if we eat eggs for lunch, we can add them to dinner too). I have @ManyToMany annotation in my FoodProgram class. Problem is there, when I try to getLunch from FoodProgram, I got error for lazily initialize, but I cannot put fetchtype.EAGER on every annotation, because I get another error. Should I just make another entity and to figure out different approach?</p>\n<p>FoodEntity</p>\n<pre><code>@Entity\npublic class Food {\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id;\nprivate String name;\nprivate Integer calories;\n\npublic Food() {\n}\n</code></pre>\n<p>FoodProgram entity</p>\n<pre><code>@Entity\npublic class FoodProgram {\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id;\n@ManyToMany\nprivate List&lt;Food&gt; breakfast;\n@ManyToMany\nprivate List&lt;Food&gt; lunch;\n@ManyToMany\nprivate List&lt;Food&gt; afterLunch;\n@ManyToMany\nprivate List&lt;Food&gt; dinner;\n\npublic FoodProgram() {\n}\n</code></pre>\n"},{"tags":["java","jwt","jose4j"],"comments":[{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":1,"creation_date":1486486925,"post_id":42095637,"comment_id":71361835,"body_markdown":"How can we answer your question without seeing your code?","body":"How can we answer your question without seeing your code?"},{"owner":{"account_id":1528364,"reputation":125594,"user_id":1426227,"accept_rate":79,"display_name":"cassiomolin"},"score":0,"creation_date":1486930613,"post_id":42095637,"comment_id":71547368,"body_markdown":"Let me know if my answer works for you.","body":"Let me know if my answer works for you."},{"owner":{"account_id":303041,"reputation":410,"user_id":611740,"accept_rate":25,"display_name":"Chaos Rules"},"score":0,"creation_date":1487022983,"post_id":42095637,"comment_id":71589894,"body_markdown":"My code was something I found on SO.  What I am looking for is how to get one of the Libraries to extract the claims without me writing code to do it.","body":"My code was something I found on SO.  What I am looking for is how to get one of the Libraries to extract the claims without me writing code to do it."}],"answers":[{"tags":[],"owner":{"account_id":1528364,"reputation":125594,"user_id":1426227,"accept_rate":79,"display_name":"cassiomolin"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1635973645,"creation_date":1486496967,"answer_id":42098703,"question_id":42095637,"body_markdown":"Once the question is tagged with [tag:jose4j], I understand you are using [jose4j][3] for parsing JWT tokens.\r\n\r\nIn this situation, you can invoke [`setSkipSignatureVerification()`][2] from the [`JwtConsumerBuilder`][1]. It allows you to parse the claims without validating the signature:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    JwtConsumer jwtConsumer = new JwtConsumerBuilder()\r\n                                      .setSkipSignatureVerification()\r\n                                      .build();\r\n                                                      \r\n    JwtClaims jwtClaims = jwtConsumer.processToClaims(jwt);\r\n\r\n\r\n  [1]: http://static.javadoc.io/org.bitbucket.b_c/jose4j/0.5.4/org/jose4j/jwt/consumer/JwtConsumerBuilder.html\r\n  [2]: http://static.javadoc.io/org.bitbucket.b_c/jose4j/0.5.4/org/jose4j/jwt/consumer/JwtConsumerBuilder.html#setSkipSignatureVerification()\r\n  [3]: https://bitbucket.org/b_c/jose4j/wiki/Home","title":"How can I get Claims from a JWT?","body":"<p>Once the question is tagged with <a href=\"/questions/tagged/jose4j\" class=\"post-tag\" title=\"show questions tagged &#39;jose4j&#39;\" rel=\"tag\">jose4j</a>, I understand you are using <a href=\"https://bitbucket.org/b_c/jose4j/wiki/Home\" rel=\"nofollow noreferrer\">jose4j</a> for parsing JWT tokens.</p>\n<p>In this situation, you can invoke <a href=\"http://static.javadoc.io/org.bitbucket.b_c/jose4j/0.5.4/org/jose4j/jwt/consumer/JwtConsumerBuilder.html#setSkipSignatureVerification()\" rel=\"nofollow noreferrer\"><code>setSkipSignatureVerification()</code></a> from the <a href=\"http://static.javadoc.io/org.bitbucket.b_c/jose4j/0.5.4/org/jose4j/jwt/consumer/JwtConsumerBuilder.html\" rel=\"nofollow noreferrer\"><code>JwtConsumerBuilder</code></a>. It allows you to parse the claims without validating the signature:</p>\n<pre class=\"lang-java prettyprint-override\"><code>JwtConsumer jwtConsumer = new JwtConsumerBuilder()\n                                  .setSkipSignatureVerification()\n                                  .build();\n                                                  \nJwtClaims jwtClaims = jwtConsumer.processToClaims(jwt);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5527790,"reputation":11911,"user_id":4388776,"display_name":"Keet Sugathadasa"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1612249889,"creation_date":1612249889,"answer_id":66005095,"question_id":42095637,"body_markdown":"Let me provide a general answer for everyone&#39;s use. \r\n\r\nI am using this [maven/gradle library][1]. Use the following for Maven.\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.nimbusds&lt;/groupId&gt;\r\n    &lt;artifactId&gt;nimbus-jose-jwt&lt;/artifactId&gt;\r\n    &lt;version&gt;[ version ]&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nThen use the following code to decode and get claims.\r\n\r\n```\r\nString jwtToken = &quot;eyJ0eXAiOiJKV1QiLCJhbG...&quot;;\r\n\r\nJWSObject jwsObject;\r\nJWTClaimsSet claims;\r\n\r\ntry {\r\n       jwsObject = JWSObject.parse(this.jwt);\r\n       claims =  JWTClaimsSet.parse(jwsObject.getPayload().toJSONObject());\r\n} catch (java.text.ParseException e) {\r\n       // Invalid JWS object encoding\r\n}\r\n\r\n// now access any claims you want using the relevant key. It will be returned as an object\r\nObject expiry = claims.getClaim(&quot;exp&quot;);\r\n\r\n\r\n```\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/com.nimbusds/nimbus-jose-jwt/9.4.2","title":"How can I get Claims from a JWT?","body":"<p>Let me provide a general answer for everyone's use.</p>\n<p>I am using this <a href=\"https://mvnrepository.com/artifact/com.nimbusds/nimbus-jose-jwt/9.4.2\" rel=\"nofollow noreferrer\">maven/gradle library</a>. Use the following for Maven.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.nimbusds&lt;/groupId&gt;\n    &lt;artifactId&gt;nimbus-jose-jwt&lt;/artifactId&gt;\n    &lt;version&gt;[ version ]&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Then use the following code to decode and get claims.</p>\n<pre><code>String jwtToken = &quot;eyJ0eXAiOiJKV1QiLCJhbG...&quot;;\n\nJWSObject jwsObject;\nJWTClaimsSet claims;\n\ntry {\n       jwsObject = JWSObject.parse(this.jwt);\n       claims =  JWTClaimsSet.parse(jwsObject.getPayload().toJSONObject());\n} catch (java.text.ParseException e) {\n       // Invalid JWS object encoding\n}\n\n// now access any claims you want using the relevant key. It will be returned as an object\nObject expiry = claims.getClaim(&quot;exp&quot;);\n\n\n</code></pre>\n"}],"owner":{"account_id":303041,"reputation":410,"user_id":611740,"accept_rate":25,"display_name":"Chaos Rules"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17088,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":42098703,"answer_count":2,"score":6,"last_activity_date":1635973645,"creation_date":1486486629,"question_id":42095637,"body_markdown":"I need to extract claims from a JWT.\r\n\r\nIt seems that this should be a no-brainer.\r\n\r\nIt was signed, from the header I get:\r\n\r\n    {\r\n      &quot;alg&quot;: &quot;RS256&quot;,\r\n      &quot;typ&quot;: &quot;JWT&quot;\r\n    }\r\n\r\nJWT:\r\n&gt;eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX25hbWUiOiJtYXJrLnN0YW5nQGRoaWdyb3VwaW5jLmNvbSIsInNjb3BlIjpbIm9wZW5pZCJdLCJyb2xlcyI6WyJKT0JTRUVLRVIiXSwiam9ic2Vla2VySWQiOiJ3TDFkTWdQckZWOUl5dEZZIiwiZXhwIjoxNDg4Mzk1ODE5LCJhdXRob3JpdGllcyI6WyJKT0JTRUVLRVIiXSwianRpIjoiNWRiYjNkYzQtNGI3NC00MDYyLTgzMmQtYjE1MTgwYWZhZjllIiwiY2xpZW50X2lkIjoiZWZjIn0.NxiF4x39na3KdDUFz2zxqy1zSfJkj4FdKHflpgJUxzMgBq8bbJIFVkmwAUYA6_YXm6kGFcyTMgdiRIJpqc5buDPdV1vkzh4QKFTxMz9MF4i3vtIQ21Vm5W12KikWdWGGUXMD4udJwu7rmuIBtNIa-ciZOPADNrrXfuw7iML1xxAA-C0f4OTbiKqiXr3QEUZwcqZB17qfh_dVRRxgO-_uHUg84JDcpXEDQPzPWX68u1EHH4J6IcpMKn1VY9k3RcZU6pq-ndzQgBlKdVm2owA6i-UM9p1zSz7ZX_2wx0czEEcNF1rMdeIv5yxP9YEpWb14-GUG4qgpn_rAIQBJ7eu7xw\r\n\r\nIt decodes on the jwt.io site just fine, but since I don&#39;t have the &quot;secret&quot; key, it comes up as &quot;invalid signature&quot;.  Which is fine, I am not trying to validate it.\r\n\r\nAll I want is the claims but when I use a Java library to decode it I get nothing but errors.\r\n\r\nIf I decode it manually (i.e. split/base64 decode) it is fine.  \r\n\r\nSo, what am I doing wrong with the Java libraries?","title":"How can I get Claims from a JWT?","body":"<p>I need to extract claims from a JWT.</p>\n\n<p>It seems that this should be a no-brainer.</p>\n\n<p>It was signed, from the header I get:</p>\n\n<pre><code>{\n  \"alg\": \"RS256\",\n  \"typ\": \"JWT\"\n}\n</code></pre>\n\n<p>JWT:</p>\n\n<blockquote>\n  <p>eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX25hbWUiOiJtYXJrLnN0YW5nQGRoaWdyb3VwaW5jLmNvbSIsInNjb3BlIjpbIm9wZW5pZCJdLCJyb2xlcyI6WyJKT0JTRUVLRVIiXSwiam9ic2Vla2VySWQiOiJ3TDFkTWdQckZWOUl5dEZZIiwiZXhwIjoxNDg4Mzk1ODE5LCJhdXRob3JpdGllcyI6WyJKT0JTRUVLRVIiXSwianRpIjoiNWRiYjNkYzQtNGI3NC00MDYyLTgzMmQtYjE1MTgwYWZhZjllIiwiY2xpZW50X2lkIjoiZWZjIn0.NxiF4x39na3KdDUFz2zxqy1zSfJkj4FdKHflpgJUxzMgBq8bbJIFVkmwAUYA6_YXm6kGFcyTMgdiRIJpqc5buDPdV1vkzh4QKFTxMz9MF4i3vtIQ21Vm5W12KikWdWGGUXMD4udJwu7rmuIBtNIa-ciZOPADNrrXfuw7iML1xxAA-C0f4OTbiKqiXr3QEUZwcqZB17qfh_dVRRxgO-_uHUg84JDcpXEDQPzPWX68u1EHH4J6IcpMKn1VY9k3RcZU6pq-ndzQgBlKdVm2owA6i-UM9p1zSz7ZX_2wx0czEEcNF1rMdeIv5yxP9YEpWb14-GUG4qgpn_rAIQBJ7eu7xw</p>\n</blockquote>\n\n<p>It decodes on the jwt.io site just fine, but since I don't have the \"secret\" key, it comes up as \"invalid signature\".  Which is fine, I am not trying to validate it.</p>\n\n<p>All I want is the claims but when I use a Java library to decode it I get nothing but errors.</p>\n\n<p>If I decode it manually (i.e. split/base64 decode) it is fine.  </p>\n\n<p>So, what am I doing wrong with the Java libraries?</p>\n"},{"tags":["java","spring","spring-data-jpa","spring-data-rest","spring-test"],"comments":[{"owner":{"account_id":13864691,"reputation":2209,"user_id":10009424,"display_name":"yejianfengblue"},"score":0,"creation_date":1636000189,"post_id":69831689,"comment_id":123443034,"body_markdown":"1. You&#39;re testing something on a Repository, it&#39;s impossible to test without an database. 2.   `spring-data-rest` requires bootstraping data layer and web layer, so there is no difference from boostraping the entire context using `@SpringBootTest`","body":"1. You&#39;re testing something on a Repository, it&#39;s impossible to test without an database. 2.   <code>spring-data-rest</code> requires bootstraping data layer and web layer, so there is no difference from boostraping the entire context using <code>@SpringBootTest</code>"},{"owner":{"account_id":8244203,"reputation":1279,"user_id":6201811,"display_name":"Manoel Stilpen"},"score":0,"creation_date":1636046616,"post_id":69831689,"comment_id":123459473,"body_markdown":"@yejianfengblue do you know if I could mock my repository method call? I think that way I can test only my weblayer","body":"@yejianfengblue do you know if I could mock my repository method call? I think that way I can test only my weblayer"},{"owner":{"account_id":13864691,"reputation":2209,"user_id":10009424,"display_name":"yejianfengblue"},"score":0,"creation_date":1636092230,"post_id":69831689,"comment_id":123469615,"body_markdown":"If you mock repository method, then you&#39;re not testing the `@PreAuthorize` annotation.","body":"If you mock repository method, then you&#39;re not testing the <code>@PreAuthorize</code> annotation."},{"owner":{"account_id":13864691,"reputation":2209,"user_id":10009424,"display_name":"yejianfengblue"},"score":0,"creation_date":1636092846,"post_id":69831689,"comment_id":123469716,"body_markdown":"If you don&#39;t want `@SpringBootTest`, then some classes annotated with `@Configuration` \n to bootstrap spring context and an in-memory database are required. I can provide such an answer if you modify your requirement.","body":"If you don&#39;t want <code>@SpringBootTest</code>, then some classes annotated with <code>@Configuration</code>   to bootstrap spring context and an in-memory database are required. I can provide such an answer if you modify your requirement."}],"owner":{"account_id":8244203,"reputation":1279,"user_id":6201811,"display_name":"Manoel Stilpen"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1635973415,"creation_date":1635973415,"question_id":69831689,"body_markdown":"I have the following CRUD repository annotated with @RepositoryRestResource:\r\n\r\n```\r\n@RepositoryRestResource\r\npublic interface JPARepository extends CrudRepository&lt;X, Y&gt; {\r\n  @PreAuthorize(&quot;hasAuthority(&#39;OWNER&#39;)&quot;)\r\n  Optional&lt;X&gt; findFirstBySpecificField(String specificField);\r\n}\r\n```\r\n\r\nHow can I create a test responsible for testing the @PreAuthorize annotation without bootstraping the entire spring context and an in-memory database.\r\n\r\nIn another words I would like to create a contract test using mockMvc to validate that the respective auto-generated endpoint will return 4xx given a specific security condition.\r\n\r\nTo clarify I have no problem instantiating spring security beans. My problem here is which annotations I should use on my test class to bootstrap only the desired JPA controller.","title":"How to create contract test of Spring RepositoryRestResource","body":"<p>I have the following CRUD repository annotated with @RepositoryRestResource:</p>\n<pre><code>@RepositoryRestResource\npublic interface JPARepository extends CrudRepository&lt;X, Y&gt; {\n  @PreAuthorize(&quot;hasAuthority('OWNER')&quot;)\n  Optional&lt;X&gt; findFirstBySpecificField(String specificField);\n}\n</code></pre>\n<p>How can I create a test responsible for testing the @PreAuthorize annotation without bootstraping the entire spring context and an in-memory database.</p>\n<p>In another words I would like to create a contract test using mockMvc to validate that the respective auto-generated endpoint will return 4xx given a specific security condition.</p>\n<p>To clarify I have no problem instantiating spring security beans. My problem here is which annotations I should use on my test class to bootstrap only the desired JPA controller.</p>\n"},{"tags":["java","docker"],"answers":[{"tags":[],"owner":{"account_id":7804055,"reputation":3665,"user_id":5902456,"accept_rate":100,"display_name":"adebasi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1538429023,"creation_date":1538429023,"answer_id":52599074,"question_id":52597838,"body_markdown":"Your [Dockerfile][1] contains a semantical error. You have two `CMD` commands.\r\n\r\nhttps://docs.docker.com/engine/reference/builder/#cmd : \r\n&gt; There can only be one CMD instruction in a Dockerfile. If you list\r\n&gt; more than one CMD then only the last CMD will take effect.\r\n\r\nTherefore your `fc-cache` command won&#39;t be executed. Replace `CMD` before `fc-cache` by `RUN`.\r\n\r\n\r\n  [1]: https://hub.docker.com/r/songkong/songkong/~/dockerfile/","title":"How do I install some default fonts to Openjdk 8 running in Docker","body":"<p>Your <a href=\"https://hub.docker.com/r/songkong/songkong/~/dockerfile/\" rel=\"nofollow noreferrer\">Dockerfile</a> contains a semantical error. You have two <code>CMD</code> commands.</p>\n\n<p><a href=\"https://docs.docker.com/engine/reference/builder/#cmd\" rel=\"nofollow noreferrer\">https://docs.docker.com/engine/reference/builder/#cmd</a> : </p>\n\n<blockquote>\n  <p>There can only be one CMD instruction in a Dockerfile. If you list\n  more than one CMD then only the last CMD will take effect.</p>\n</blockquote>\n\n<p>Therefore your <code>fc-cache</code> command won't be executed. Replace <code>CMD</code> before <code>fc-cache</code> by <code>RUN</code>.</p>\n"},{"tags":[],"owner":{"account_id":111681,"reputation":13319,"user_id":1480018,"accept_rate":87,"display_name":"Paul Taylor"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1635973339,"creation_date":1538468034,"answer_id":52604420,"question_id":52597838,"body_markdown":"Answer derived from https://unix.stackexchange.com/questions/438257/how-to-install-microsoft-true-type-font-on-alpine-linux\r\n\r\nI found that *fp-cache* does not exist as part of the *openjdk:8-jre-alpine* distribution\r\n\r\nBut adding:\r\n\r\n    RUN apk --no-cache add msttcorefonts-installer fontconfig &amp;&amp; \\\r\n        update-ms-fonts &amp;&amp; \\\r\n        fc-cache -f\r\n\r\nto my Dockerfile not only added `fc-cache`, but also installed a default set of fonts. \r\n\r\nThis is all that was needed to resolve the Java problem (I could also remove the `fc-cache -rv /opt/songkong/fonts` line) and allowed me to create Excel spreadsheets with the jakarta-poi library.","title":"How do I install some default fonts to Openjdk 8 running in Docker","body":"<p>Answer derived from <a href=\"https://unix.stackexchange.com/questions/438257/how-to-install-microsoft-true-type-font-on-alpine-linux\">https://unix.stackexchange.com/questions/438257/how-to-install-microsoft-true-type-font-on-alpine-linux</a></p>\n<p>I found that <em>fp-cache</em> does not exist as part of the <em>openjdk:8-jre-alpine</em> distribution</p>\n<p>But adding:</p>\n<pre><code>RUN apk --no-cache add msttcorefonts-installer fontconfig &amp;&amp; \\\n    update-ms-fonts &amp;&amp; \\\n    fc-cache -f\n</code></pre>\n<p>to my Dockerfile not only added <code>fc-cache</code>, but also installed a default set of fonts.</p>\n<p>This is all that was needed to resolve the Java problem (I could also remove the <code>fc-cache -rv /opt/songkong/fonts</code> line) and allowed me to create Excel spreadsheets with the jakarta-poi library.</p>\n"}],"owner":{"account_id":111681,"reputation":13319,"user_id":1480018,"accept_rate":87,"display_name":"Paul Taylor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10850,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":52604420,"answer_count":2,"score":3,"last_activity_date":1635973339,"creation_date":1538423027,"question_id":52597838,"body_markdown":"I have a Docker file Java based application - https://hub.docker.com/r/songkong/songkong/~/dockerfile/\r\n\r\nOne problem is that the DockerFile does not seem to come with any fonts installed and this causes this error for my application\r\n\r\n    java.lang.NullPointerException\r\n    \tat sun.awt.FontConfiguration.getVersion(FontConfiguration.java:1264)\r\n    \tat sun.awt.FontConfiguration.readFontConfigFile(FontConfiguration.java:219)\r\n    \tat sun.awt.FontConfiguration.init(FontConfiguration.java:107)\r\n    \tat sun.awt.X11FontManager.createFontConfiguration(X11FontManager.java:774)\r\n    \tat sun.font.SunFontManager$2.run(SunFontManager.java:431)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat sun.font.SunFontManager.&lt;init&gt;(SunFontManager.java:376)\r\n    \tat sun.awt.FcFontManager.&lt;init&gt;(FcFontManager.java:35)\r\n    \tat sun.awt.X11FontManager.&lt;init&gt;(X11FontManager.java:57)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n    \tat java.lang.Class.newInstance(Class.java:442)\r\n    \tat sun.font.FontManagerFactory$1.run(FontManagerFactory.java:83)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat sun.font.FontManagerFactory.getInstance(FontManagerFactory.java:74)\r\n    \tat java.awt.Font.getFont2D(Font.java:491)\r\n    \tat java.awt.Font.canDisplayUpTo(Font.java:2060)\r\n    \tat java.awt.font.TextLayout.singleFont(TextLayout.java:470)\r\n    \tat java.awt.font.TextLayout.&lt;init&gt;(TextLayout.java:531)\r\n    \tat org.apache.poi.ss.util.SheetUtil.getDefaultCharWidth(SheetUtil.java:275)\r\n    \tat org.apache.poi.xssf.streaming.AutoSizeColumnTracker.&lt;init&gt;(AutoSizeColumnTracker.java:117)\r\n    \tat org.apache.poi.xssf.streaming.SXSSFSheet.&lt;init&gt;(SXSSFSheet.java:79)\r\n    \tat org.apache.poi.xssf.streaming.SXSSFWorkbook.createAndRegisterSXSSFSheet(SXSSFWorkbook.java:656)\r\n    \tat org.apache.poi.xssf.streaming.SXSSFWorkbook.createSheet(SXSSFWorkbook.java:677)\r\n    \tat org.apache.poi.xssf.streaming.SXSSFWorkbook.createSheet(SXSSFWorkbook.java:83)\r\n    \tat com.jthink.songkong.reports.spreadsheet.Worksheet.&lt;init&gt;(Worksheet.java:23)\r\n    \tat com.jthink.songkong.reports.spreadsheet.BasicWorksheet.&lt;init&gt;(BasicWorksheet.java:15)\r\n    \tat com.jthink.songkong.reports.spreadsheet.SpreadsheetReport.&lt;init&gt;(SpreadsheetReport.java:51)\r\n    \tat com.jthink.songkong.reports.fixsongsreport.SpreadsheetReportSection.outputReport(SpreadsheetReportSection.java:82)\r\n    \tat com.jthink.songkong.reports.FixSongsReport.outputSpreadsheet(FixSongsReport.java:1033)\r\n    \tat com.jthink.songkong.reports.FixSongsReportCreator.createReport(FixSongsReportCreator.java:122)\r\n    \tat com.jthink.songkong.analyse.toplevelanalyzer.FixSongsController.start(FixSongsController.java:329)\r\n    \tat com.jthink.songkong.server.callback.ServerFixSongs$Task.run(ServerFixSongs.java:448)\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \tat java.lang.Thread.run(Thread.java:748)\r\n\r\nI have had this issue before on a (non Docker) linux installation, and I got round it by adding some fonts to my application download and then using\r\n\r\n    fc-cache -rv /opt/songkong/fonts\r\n\r\nto install the fonts\r\n\r\nSo I added the fonts to the application download and then added\r\n\r\n    CMD fc-cache -rv /opt/songkong/fonts;\r\n \r\nto my DockerFile but it hasn&#39;t worked\r\n\r\nProbably this is not the correct way to do this, is there a correct way.","title":"How do I install some default fonts to Openjdk 8 running in Docker","body":"<p>I have a Docker file Java based application - <a href=\"https://hub.docker.com/r/songkong/songkong/~/dockerfile/\" rel=\"nofollow noreferrer\">https://hub.docker.com/r/songkong/songkong/~/dockerfile/</a></p>\n\n<p>One problem is that the DockerFile does not seem to come with any fonts installed and this causes this error for my application</p>\n\n<pre><code>java.lang.NullPointerException\n    at sun.awt.FontConfiguration.getVersion(FontConfiguration.java:1264)\n    at sun.awt.FontConfiguration.readFontConfigFile(FontConfiguration.java:219)\n    at sun.awt.FontConfiguration.init(FontConfiguration.java:107)\n    at sun.awt.X11FontManager.createFontConfiguration(X11FontManager.java:774)\n    at sun.font.SunFontManager$2.run(SunFontManager.java:431)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.font.SunFontManager.&lt;init&gt;(SunFontManager.java:376)\n    at sun.awt.FcFontManager.&lt;init&gt;(FcFontManager.java:35)\n    at sun.awt.X11FontManager.&lt;init&gt;(X11FontManager.java:57)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at java.lang.Class.newInstance(Class.java:442)\n    at sun.font.FontManagerFactory$1.run(FontManagerFactory.java:83)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.font.FontManagerFactory.getInstance(FontManagerFactory.java:74)\n    at java.awt.Font.getFont2D(Font.java:491)\n    at java.awt.Font.canDisplayUpTo(Font.java:2060)\n    at java.awt.font.TextLayout.singleFont(TextLayout.java:470)\n    at java.awt.font.TextLayout.&lt;init&gt;(TextLayout.java:531)\n    at org.apache.poi.ss.util.SheetUtil.getDefaultCharWidth(SheetUtil.java:275)\n    at org.apache.poi.xssf.streaming.AutoSizeColumnTracker.&lt;init&gt;(AutoSizeColumnTracker.java:117)\n    at org.apache.poi.xssf.streaming.SXSSFSheet.&lt;init&gt;(SXSSFSheet.java:79)\n    at org.apache.poi.xssf.streaming.SXSSFWorkbook.createAndRegisterSXSSFSheet(SXSSFWorkbook.java:656)\n    at org.apache.poi.xssf.streaming.SXSSFWorkbook.createSheet(SXSSFWorkbook.java:677)\n    at org.apache.poi.xssf.streaming.SXSSFWorkbook.createSheet(SXSSFWorkbook.java:83)\n    at com.jthink.songkong.reports.spreadsheet.Worksheet.&lt;init&gt;(Worksheet.java:23)\n    at com.jthink.songkong.reports.spreadsheet.BasicWorksheet.&lt;init&gt;(BasicWorksheet.java:15)\n    at com.jthink.songkong.reports.spreadsheet.SpreadsheetReport.&lt;init&gt;(SpreadsheetReport.java:51)\n    at com.jthink.songkong.reports.fixsongsreport.SpreadsheetReportSection.outputReport(SpreadsheetReportSection.java:82)\n    at com.jthink.songkong.reports.FixSongsReport.outputSpreadsheet(FixSongsReport.java:1033)\n    at com.jthink.songkong.reports.FixSongsReportCreator.createReport(FixSongsReportCreator.java:122)\n    at com.jthink.songkong.analyse.toplevelanalyzer.FixSongsController.start(FixSongsController.java:329)\n    at com.jthink.songkong.server.callback.ServerFixSongs$Task.run(ServerFixSongs.java:448)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n\n<p>I have had this issue before on a (non Docker) linux installation, and I got round it by adding some fonts to my application download and then using</p>\n\n<pre><code>fc-cache -rv /opt/songkong/fonts\n</code></pre>\n\n<p>to install the fonts</p>\n\n<p>So I added the fonts to the application download and then added</p>\n\n<pre><code>CMD fc-cache -rv /opt/songkong/fonts;\n</code></pre>\n\n<p>to my DockerFile but it hasn't worked</p>\n\n<p>Probably this is not the correct way to do this, is there a correct way.</p>\n"},{"tags":["java","spring","spring-boot","filter","configuration"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":3,"creation_date":1635834768,"post_id":69805767,"comment_id":123391596,"body_markdown":"1 and 2 are more or less the same, 3 is not. The first 2 add the filter to the regular filter chain, the last one adds it to the so called filter security chain which is basically a `Filter` acting as a filter chain, this is done/needed so spring security has more control over the order and lifecycle of the filters.","body":"1 and 2 are more or less the same, 3 is not. The first 2 add the filter to the regular filter chain, the last one adds it to the so called filter security chain which is basically a <code>Filter</code> acting as a filter chain, this is done/needed so spring security has more control over the order and lifecycle of the filters."},{"owner":{"account_id":4622947,"reputation":1014,"user_id":3747493,"accept_rate":58,"display_name":"superigno"},"score":0,"creation_date":1635975724,"post_id":69805767,"comment_id":123438829,"body_markdown":"@m-deinum where does the filter security chain fall when it comes to ordering? if I add my regular filter to the filter security chain (like above example), how will that affect the order?","body":"@m-deinum where does the filter security chain fall when it comes to ordering? if I add my regular filter to the filter security chain (like above example), how will that affect the order?"},{"owner":{"account_id":4622947,"reputation":1014,"user_id":3747493,"accept_rate":58,"display_name":"superigno"},"score":0,"creation_date":1635976425,"post_id":69805767,"comment_id":123439027,"body_markdown":"Say I have CustomFilter1 with @Order(1) and CustomerFilter2 with @Order(2), then I added them in the security filter with addFilterBefore(customFilter2, CustomFilter1.class) which means CustomFilter2 going before CustomFilter1. How would that work?","body":"Say I have CustomFilter1 with @Order(1) and CustomerFilter2 with @Order(2), then I added them in the security filter with addFilterBefore(customFilter2, CustomFilter1.class) which means CustomFilter2 going before CustomFilter1. How would that work?"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1636097802,"post_id":69805767,"comment_id":123470759,"body_markdown":"The order isn&#39;t taken into account or even worse it is registered twice (once in the regular chain and as part of the security chain. Only add things to the security chain that actually are (spring) security related, else make it part of the normal chain.","body":"The order isn&#39;t taken into account or even worse it is registered twice (once in the regular chain and as part of the security chain. Only add things to the security chain that actually are (spring) security related, else make it part of the normal chain."}],"owner":{"account_id":4622947,"reputation":1014,"user_id":3747493,"accept_rate":58,"display_name":"superigno"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":353,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1635973229,"creation_date":1635831105,"question_id":69805767,"body_markdown":"I am adding filters in my application and I want to set the order of call for these filters. I can see three ways but I don&#39;t know if they&#39;re at all related?\r\n\r\n**Using `@Order` annotation:**\r\n\r\n\r\n```\r\n@Component\r\n@Order(1)\r\npublic class SampleFilter extends OncePerRequestFilter {\r\n   ...   \r\n}\r\n```\r\n\r\n**Register the filter via config:**\r\n\r\n\r\n```\r\n@Configuration\r\npublic class FilterConfig {\r\n    @Bean\r\n    public FilterRegistrationBean&lt;SampleFilter&gt; perfFilter() {\r\n        FilterRegistrationBean&lt;SampleFilter&gt; registration = new FilterRegistrationBean&lt;&gt;();\r\n        registration.setFilter(new SampleFilter());\r\n        registration.setOrder(1);\r\n        return registration;\r\n    }\r\n}\r\n```\r\n\r\n**Via WebSecurityConfigurerAdapter:**\r\n\r\n```\r\npublic class SampleConfig extends WebSecurityConfigurerAdapter {\r\n\r\n   @Autowired\r\n   private SampleFilter sampleFilter;\r\n\r\n   @Override\r\n   public void configure(HttpSecurity http) throws Exception {\r\n      ...\r\n      http.addFilterBefore(this.sampleFilter, SampleFilterTwo.class);\r\n   }\r\n\r\n}\r\n```\r\n","title":"@Order annotation vs FilterRegistrationBean.setOrder vs addFilterBefore/addFilterAfter in WebSecurityConfigurerAdapter.configure","body":"<p>I am adding filters in my application and I want to set the order of call for these filters. I can see three ways but I don't know if they're at all related?</p>\n<p><strong>Using <code>@Order</code> annotation:</strong></p>\n<pre><code>@Component\n@Order(1)\npublic class SampleFilter extends OncePerRequestFilter {\n   ...   \n}\n</code></pre>\n<p><strong>Register the filter via config:</strong></p>\n<pre><code>@Configuration\npublic class FilterConfig {\n    @Bean\n    public FilterRegistrationBean&lt;SampleFilter&gt; perfFilter() {\n        FilterRegistrationBean&lt;SampleFilter&gt; registration = new FilterRegistrationBean&lt;&gt;();\n        registration.setFilter(new SampleFilter());\n        registration.setOrder(1);\n        return registration;\n    }\n}\n</code></pre>\n<p><strong>Via WebSecurityConfigurerAdapter:</strong></p>\n<pre><code>public class SampleConfig extends WebSecurityConfigurerAdapter {\n\n   @Autowired\n   private SampleFilter sampleFilter;\n\n   @Override\n   public void configure(HttpSecurity http) throws Exception {\n      ...\n      http.addFilterBefore(this.sampleFilter, SampleFilterTwo.class);\n   }\n\n}\n</code></pre>\n"},{"tags":["java","android","firebase","firebase-realtime-database","android-recyclerview"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":1,"creation_date":1636005502,"post_id":69828858,"comment_id":123443914,"body_markdown":"&quot;it&#39;s not working&quot; doesn&#39;t provide enough information so we can help. What exactly in this code doesn&#39;t work the way you expect?\nTell us what is wrong with shared code. Do you have any errors?","body":"&quot;it&#39;s not working&quot; doesn&#39;t provide enough information so we can help. What exactly in this code doesn&#39;t work the way you expect? Tell us what is wrong with shared code. Do you have any errors?"},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1636019277,"post_id":69828858,"comment_id":123447918,"body_markdown":"Yes, and the screen which is named &quot;app error recyclerview&quot; doesn&#39;t contains error messages","body":"Yes, and the screen which is named &quot;app error recyclerview&quot; doesn&#39;t contains error messages"},{"owner":{"account_id":20405030,"reputation":1,"user_id":14969824,"display_name":"shahed"},"score":0,"creation_date":1636043509,"post_id":69828858,"comment_id":123458152,"body_markdown":"@AlexMamo in app error recyclerView screenshot, it not showing any error messages but it is not showing the data : Name, Job Title &amp; Email in the recyclerView that it should take from the realtime Database. i am thinking that it has to do something with the nested database problem that I have and that&#39;s why I uploaded the sign up page code and a screenshots from my realtime database.","body":"@AlexMamo in app error recyclerView screenshot, it not showing any error messages but it is not showing the data : Name, Job Title &amp; Email in the recyclerView that it should take from the realtime Database. i am thinking that it has to do something with the nested database problem that I have and that&#39;s why I uploaded the sign up page code and a screenshots from my realtime database."},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1636056353,"post_id":69828858,"comment_id":123462920,"body_markdown":"I might check [this](https://stackoverflow.com/questions/54069574/firebase-android-listview-not-being-displayed) out.","body":"I might check <a href=\"https://stackoverflow.com/questions/54069574/firebase-android-listview-not-being-displayed\">this</a> out."},{"owner":{"account_id":20405030,"reputation":1,"user_id":14969824,"display_name":"shahed"},"score":0,"creation_date":1636081066,"post_id":69828858,"comment_id":123468105,"body_markdown":"@AlexMamo it didn&#39;t work, the problem was not from the Names.","body":"@AlexMamo it didn&#39;t work, the problem was not from the Names."}],"owner":{"account_id":20405030,"reputation":1,"user_id":14969824,"display_name":"shahed"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1635973031,"creation_date":1635958768,"question_id":69828858,"body_markdown":"i am working on a freelancing app called frelance. the idea of the app is to connect freelancers with clients that need their services.\r\nand I am trying to retrieve data from the realtime database but it&#39;s not working.\r\n\r\n\r\n\r\n**ShowActivity Xml**\r\n\r\n      &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n      &lt;androidx.constraintlayout.widget.ConstraintLayout \r\n      xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n      xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n      xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n      android:layout_width=&quot;match_parent&quot;\r\n      android:layout_height=&quot;match_parent&quot;\r\n      tools:context=&quot;.ShowActivity&quot;&gt;\r\n\r\n\r\n\r\n    &lt;androidx.appcompat.widget.SearchView\r\n        android:id=&quot;@+id/Search&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:padding=&quot;5dp&quot;\r\n        android:background=&quot;@color/black&quot;\r\n        android:layout_marginBottom=&quot;5dp&quot;\r\n        android:hint=&quot;Search&quot;/&gt;\r\n\r\n    &lt;androidx.recyclerview.widget.RecyclerView\r\n\r\n        android:id=&quot;@+id/recyclerview&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintHorizontal_bias=&quot;0.5&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n       &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n\r\n**ShowActivity Java**\r\n        Package com.example.frelance0;\r\n\r\n        import androidx.annotation.NonNull;\r\n        import androidx.appcompat.app.AppCompatActivity;\r\n        import androidx.appcompat.widget.SearchView;\r\n        import androidx.recyclerview.widget.LinearLayoutManager;\r\n        import androidx.recyclerview.widget.RecyclerView;\r\n\r\n        import android.content.Intent;\r\n        import android.os.Bundle;\r\n        import android.util.Log;\r\n        import android.view.View;\r\n\r\n        import com.google.firebase.auth.FirebaseAuth;\r\n        import com.google.firebase.database.DataSnapshot;\r\n        import com.google.firebase.database.DatabaseError;\r\n        import com.google.firebase.database.DatabaseReference;\r\n        import com.google.firebase.database.FirebaseDatabase;\r\n        import com.google.firebase.database.ValueEventListener;\r\n\r\n        import java.security.PrivateKey;\r\n        import java.util.ArrayList;\r\n        import java.util.Map;\r\n\r\n        public class ShowActivity extends AppCompatActivity {\r\n\r\n        private RecyclerView recyclerView;\r\n\r\n    SearchView searchView;\r\n\r\n\r\n    FirebaseAuth mAuth=FirebaseAuth.getInstance();\r\n    FirebaseAuth.AuthStateListener firebaseAuthListener;\r\n    String user_id = mAuth.getCurrentUser().getUid();\r\n\r\n    DatabaseReference F_Database= FirebaseDatabase.getInstance().getReference().child(&quot;Users&quot;);\r\n    DatabaseReference Current_user_db = FirebaseDatabase.getInstance().getReference().child(&quot;Users&quot;).child(&quot;Freelancers&quot;);\r\n\r\n\r\n\r\n    private MyAdapter adapter;\r\n    private ArrayList&lt;Model&gt; list;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_show);\r\n\r\n        recyclerView = findViewById(R.id.recyclerview);\r\n        recyclerView.setHasFixedSize(true);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(this));\r\n        list = new ArrayList&lt;&gt;();\r\n        adapter = new MyAdapter(this, list);\r\n        recyclerView.setAdapter(adapter);\r\n\r\n        searchView = findViewById(R.id.Search);\r\n\r\n\r\n\r\n\r\n        //Log.d(&quot;user id&quot;, user_id);\r\n\r\n        //Log.d(&quot;database&quot;,F_Database.toString());\r\n\r\n\r\n\r\n        F_Database.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                Log.d(&quot;OUTSIDE LOOP&quot;, snapshot.getChildren().toString());\r\n\r\n                for(DataSnapshot dataSnapshot : snapshot.getChildren()){\r\n                    Log.d(&quot;INSIDE LOOP&quot;, &quot;MESSAGE&quot;);\r\n                    Model model = dataSnapshot.getValue(Model.class);\r\n                    list.add(model);\r\n                }\r\n\r\n                adapter.notifyDataSetChanged();\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n        if(searchView != null){\r\n            searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {\r\n                @Override\r\n                public boolean onQueryTextSubmit(String query) {\r\n                    return false;\r\n                }\r\n\r\n                @Override\r\n                public boolean onQueryTextChange(String newText) {\r\n                    search(newText);\r\n                    return true;\r\n                }\r\n            });\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n    private void search(String str){\r\n        ArrayList&lt;Model&gt; mylist = new ArrayList&lt;&gt;();\r\n        for(Model object: list){\r\n            if(object.getEmail().toLowerCase().contains(str.toLowerCase())){\r\n                mylist.add(object);\r\n            }\r\n\r\n        }\r\n\r\n        MyAdapter newAdapter = new MyAdapter(mylist);\r\n        recyclerView.setAdapter(newAdapter);\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n\r\n**Adapter Code**\r\n\r\n        package com.example.frelance0;\r\n        import android.content.Context;\r\n        import android.view.LayoutInflater;\r\n        import android.view.View;\r\n        import android.view.ViewGroup;\r\n        import android.widget.TextView;\r\n\r\n        import androidx.annotation.NonNull;\r\n        import androidx.recyclerview.widget.RecyclerView;\r\n\r\n     import com.example.frelance0.R;\r\n\r\n     import java.util.ArrayList;\r\n\r\n     public class MyAdapter extends RecyclerView.Adapter&lt;MyAdapter.MyViewHolder&gt;{\r\n\r\n    ArrayList&lt;Model&gt; mlist;\r\n    Context context;\r\n\r\n    public MyAdapter(Context context, ArrayList&lt;Model&gt; mlist){\r\n        this.mlist = mlist;\r\n        this.context = context;\r\n    }\r\n\r\n    public MyAdapter(ArrayList&lt;Model&gt; mylist) {\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View v = LayoutInflater.from(context).inflate(R.layout.item, parent, false);\r\n        return new MyViewHolder(v);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull MyViewHolder holder, int position) {\r\n        Model model = mlist.get(position);\r\n        holder.Name.setText(model.getName());\r\n        holder.Email.setText(model.getEmail());\r\n        holder.JobTitle.setText(model.getJobTitle());\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return mlist.size();\r\n    }\r\n\r\n    public static class MyViewHolder extends RecyclerView.ViewHolder{\r\n\r\n        TextView Name , Email , JobTitle;\r\n\r\n        public MyViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n\r\n            Name= itemView.findViewById(R.id.Name);\r\n            Email= itemView.findViewById(R.id.Email);\r\n            JobTitle= itemView.findViewById(R.id.Job);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n**Model Class**\r\n\r\n     package com.example.frelance0;\r\n\r\n     public class Model {\r\n  \r\n    String Name , JobTitle , Email;\r\n\r\n    public void setName(String name) {\r\n        Name = name;\r\n    }\r\n\r\n    public void setJobTitle(String jobTitle) {\r\n        JobTitle = jobTitle;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        Email = email;\r\n    }\r\n\r\n    public String getName() {\r\n        return Name;\r\n    }\r\n\r\n    public String getJobTitle() {\r\n        return JobTitle;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return Email;\r\n    }\r\n      }\r\n\r\n\r\nand Here is a screenshot of my Realtime Database:\r\n\r\n[Realtime Database][1]\r\n\r\n\r\n[Realtime Database][2]\r\n\r\n\r\n[Realtime Database][3]\r\n\r\n\r\nas you can see its nested and i don&#39;t know why.\r\n\r\n\r\n[app error recyclerview screenshot][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lkJxx.jpg\r\n  [2]: https://i.stack.imgur.com/lAHSH.jpg\r\n  [3]: https://i.stack.imgur.com/gePQJ.jpg\r\n  [4]: https://i.stack.imgur.com/l4MmU.png\r\n\r\n\r\n\r\nI will also attach the Sign up Code in Case You need it Because i Have a nested database problem:\r\n\r\n        package com.example.frelance0;\r\n\r\n        import androidx.annotation.NonNull;\r\n        import androidx.annotation.Nullable;\r\n        import androidx.appcompat.app.AppCompatActivity;\r\n        import androidx.recyclerview.widget.LinearLayoutManager;\r\n        import androidx.recyclerview.widget.RecyclerView;\r\n\r\n        import android.app.Activity;\r\n        import android.content.Intent;\r\n        import android.graphics.Bitmap;\r\n        import android.net.Uri;\r\n        import android.os.Bundle;\r\n        import android.provider.MediaStore;\r\n        import android.text.TextUtils;\r\n        import android.view.View;\r\n        import android.widget.Button;\r\n        import android.widget.EditText;\r\n        import android.widget.ImageView;\r\n        import android.widget.ProgressBar;\r\n        import android.widget.TextView;\r\n \r\n        import com.bumptech.glide.Glide;\r\n        import com.example.frelance0.C_Sign_in;\r\n        import com.example.frelance0.Client_Profile;\r\n        import com.example.frelance0.R;\r\n        import com.google.android.gms.tasks.OnCompleteListener;\r\n        import com.google.android.gms.tasks.OnFailureListener;\r\n        import com.google.android.gms.tasks.OnSuccessListener;\r\n        import com.google.android.gms.tasks.Task;\r\n        import com.google.firebase.auth.AuthResult;\r\n        import com.google.firebase.auth.FirebaseAuth;\r\n        import com.google.firebase.auth.FirebaseUser;\r\n        import com.google.firebase.database.DataSnapshot;\r\n        import com.google.firebase.database.DatabaseError;\r\n        import com.google.firebase.database.DatabaseReference;\r\n        import com.google.firebase.database.FirebaseDatabase;\r\n        import com.google.firebase.database.ValueEventListener;\r\n        import com.google.firebase.storage.FirebaseStorage;\r\n        import com.google.firebase.storage.StorageReference;\r\n        import com.google.firebase.storage.UploadTask;\r\n\r\n        import java.io.ByteArrayInputStream;\r\n        import java.io.ByteArrayOutputStream;\r\n        import java.io.IOException;\r\n        import java.util.ArrayList;\r\n        import java.util.HashMap;\r\n        import java.util.Map;\r\n\r\n        public class F_Sign_Up extends AppCompatActivity {\r\n\r\n    EditText mFirstName , mLastName , mEmail , mPassword  , mphone;\r\n    EditText insta , behance , website ;\r\n    EditText Skill1 , Skill2 , Skill3  , Skill4   , Brief , jobTitle , Software1 , Software2 , Software3 , Software4;\r\n\r\n    ImageView ProfileImg;\r\n\r\n    Button register;\r\n    TextView mlogin;\r\n    ProgressBar progressBar;\r\n    String ProfileimgUrl;\r\n\r\n    FirebaseAuth mAuth;\r\n    FirebaseAuth.AuthStateListener firebaseAuthListener;\r\n    DatabaseReference F_Database;\r\n    Uri resultUri;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_f__sign__up);\r\n\r\n\r\n\r\n        //connect Xml\r\n\r\n\r\n\r\n        mFirstName= (EditText) findViewById(R.id.FirstName);\r\n        mLastName= (EditText) findViewById(R.id.LastName);\r\n        mEmail= (EditText) findViewById(R.id.email);\r\n        mPassword= (EditText) findViewById(R.id.password);\r\n        mphone= (EditText) findViewById(R.id.phone);\r\n        register= (Button) findViewById(R.id.signUp);\r\n        mlogin = (TextView) findViewById(R.id.logIn);\r\n        progressBar= (ProgressBar) findViewById(R.id.progressBar);\r\n        Skill1 = (EditText) findViewById(R.id.skill1);\r\n        Skill2 = (EditText) findViewById(R.id.skill2);\r\n        Skill3 = (EditText) findViewById(R.id.skill3);\r\n        Skill4 = (EditText) findViewById(R.id.skill4);\r\n        Software1 = (EditText) findViewById(R.id.software1);\r\n        Software2 = (EditText) findViewById(R.id.software2);\r\n        Software3 = (EditText) findViewById(R.id.software3);\r\n        Software4 =(EditText) findViewById(R.id.software4);\r\n        jobTitle = (EditText) findViewById(R.id.JobTiTleHint);\r\n        Brief = (EditText) findViewById(R.id.Brief);\r\n\r\n        insta = (EditText) findViewById(R.id.insta);\r\n        behance = (EditText) findViewById(R.id.Behance);\r\n        website = (EditText) findViewById(R.id.Website);\r\n\r\n\r\n\r\n        ProfileImg = findViewById(R.id.ProfilePic);\r\n\r\n        String img = ProfileImg.toString();\r\n\r\n        ProfileImg.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(Intent.ACTION_PICK);\r\n                intent.setType(&quot;image/*&quot;);\r\n                startActivityForResult(intent , 1);\r\n            }\r\n        });\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        mAuth =FirebaseAuth.getInstance();\r\n\r\n        firebaseAuthListener = new FirebaseAuth.AuthStateListener() {\r\n            @Override\r\n            public void onAuthStateChanged(@NonNull FirebaseAuth firebaseAuth) {\r\n\r\n                FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();\r\n\r\n                if(user != null) {\r\n\r\n                    Intent intent = new Intent(com.example.frelance0.F_Sign_Up.this, Freelancer_Profile.class);\r\n\r\n                    String P = mphone.getText().toString();\r\n                    intent.putExtra(&quot;Phone&quot;,P);\r\n                    startActivity(intent);\r\n                    return;\r\n\r\n                }\r\n\r\n\r\n            }\r\n        };\r\n\r\n        register.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                String Email = mEmail.getText().toString().trim();\r\n                String Password = mPassword.getText().toString().trim();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n                mAuth =FirebaseAuth.getInstance();\r\n\r\n\r\n                progressBar.setVisibility(View.VISIBLE);\r\n\r\n                mAuth.createUserWithEmailAndPassword(Email,Password).addOnCompleteListener(com.example.frelance0.F_Sign_Up.this, new OnCompleteListener&lt;AuthResult&gt;() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\r\n\r\n\r\n                        // if (task.isSuccessful()){\r\n                        //Toast.makeText(F_Sign_Up.this, &quot;Sign Up Error&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n                        if(TextUtils.isEmpty(Email)){\r\n\r\n                            mEmail.setError(&quot;E-mail is Required&quot;);\r\n                            return;\r\n                        }\r\n\r\n                        if(TextUtils.isEmpty(Password)){\r\n\r\n                            mPassword.setError(&quot;Password is Required&quot;);\r\n                            return;\r\n                        }\r\n                        if(Password.length() &lt; 6){\r\n\r\n                            mPassword.setError(&quot;Password Must Be More Than 6 Char &quot;);\r\n                            return;\r\n                        }\r\n\r\n\r\n\r\n                        if(mAuth.getCurrentUser() != null) {\r\n\r\n                            String user_id = mAuth.getCurrentUser().getUid();\r\n                            DatabaseReference Current_user_db = FirebaseDatabase.getInstance().getReference().child(&quot;Users&quot;).child(&quot;Freelancers&quot;).child(user_id);\r\n                            Current_user_db.setValue(true);\r\n\r\n                            F_Database =FirebaseDatabase.getInstance().getReference().child(&quot;Users&quot;).child(&quot;Freelancers&quot;).child(user_id);\r\n                            Getinfo();\r\n                            Saveinfo();\r\n\r\n                            Intent intent = new Intent(com.example.frelance0.F_Sign_Up.this, loading.class);\r\n\r\n                            //Phone Intent\r\n\r\n                            String P = mphone.getText().toString();\r\n                            intent.putExtra(&quot;Phone&quot;,P);\r\n\r\n\r\n                            startActivity(intent);\r\n\r\n\r\n\r\n\r\n                            String Email = mEmail.getText().toString().trim();\r\n                            String Password = mPassword.getText().toString().trim();\r\n                            String FirstName = mFirstName.getText().toString();\r\n                            String LastName =  mLastName.getText().toString();\r\n                            String FullName = mFirstName.getText().toString() + &quot; &quot; + mLastName.getText().toString();\r\n                            String PhoneNum= mphone.getText().toString();\r\n                            String  Fsoftware= Software1.getText().toString();\r\n                            String  ssoftware= Software2.getText().toString();\r\n                            String  tsoftware= Software3.getText().toString();\r\n                            String  Ffsoftware= Software4.getText().toString();\r\n                            String  Fskill= Skill1.getText().toString();\r\n                            String  sskill= Skill2.getText().toString();\r\n                            String  tskill= Skill3.getText().toString();\r\n                            String  Ffskill= Skill4.getText().toString();\r\n                            String  JB= jobTitle.getText().toString();\r\n                            String  B= Brief.getText().toString();\r\n                            String Be = behance.getText().toString();\r\n                            String instag = insta.getText().toString();\r\n                            String web = website.getText().toString();\r\n\r\n\r\n                            Users user = new Users(FullName,FirstName,LastName,Email,Fskill,sskill,tskill,Ffskill,Fsoftware,ssoftware,tsoftware,Ffsoftware,web,instag,Be,JB,Integer.parseInt(PhoneNum));\r\n                            F_Database.child(&quot;Users&quot;).child(&quot;Freelancers&quot;).push().setValue(user);\r\n\r\n\r\n\r\n                        }\r\n\r\n                    }\r\n                });\r\n\r\n\r\n\r\n\r\n            }\r\n\r\n\r\n\r\n\r\n\r\n\r\n        });\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n\r\n        mAuth.addAuthStateListener(firebaseAuthListener);\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        mAuth.removeAuthStateListener(firebaseAuthListener);\r\n\r\n    }\r\n\r\n    public void Saveinfo(){\r\n\r\n        String Email = mEmail.getText().toString().trim();\r\n        String Password = mPassword.getText().toString().trim();\r\n        String FirstName = mFirstName.getText().toString();\r\n        String LastName =  mLastName.getText().toString();\r\n        String FullName = mFirstName.getText().toString() + &quot; &quot; + mLastName.getText().toString();\r\n        String PhoneNum= mphone.getText().toString();\r\n        String  Fsoftware= Software1.getText().toString();\r\n        String  ssoftware= Software2.getText().toString();\r\n        String  tsoftware= Software3.getText().toString();\r\n        String  Ffsoftware= Software4.getText().toString();\r\n        String  Fskill= Skill1.getText().toString();\r\n        String  sskill= Skill2.getText().toString();\r\n        String  tskill= Skill3.getText().toString();\r\n        String  Ffskill= Skill4.getText().toString();\r\n        String  JB= jobTitle.getText().toString();\r\n        String  B= Brief.getText().toString();\r\n        String Be = behance.getText().toString();\r\n        String instag = insta.getText().toString();\r\n        String web = website.getText().toString();\r\n        Map&lt;String,Object&gt; Map = new HashMap&lt;&gt;();\r\n\r\n        Map userinfo = new HashMap();\r\n\r\n        userinfo.put(&quot;First Name&quot;,FirstName);\r\n        userinfo.put(&quot;Last Name&quot;,LastName);\r\n        userinfo.put(&quot;Full Name&quot;,FullName);\r\n        userinfo.put(&quot;Email&quot;,Email);\r\n        userinfo.put(&quot;Phone Number&quot; , PhoneNum);\r\n        //Skills\r\n        userinfo.put(&quot;Skill 1&quot;,Fskill);\r\n        userinfo.put(&quot;Skill 2&quot;,sskill);\r\n        userinfo.put(&quot;Skill 3&quot;,tskill);\r\n        userinfo.put(&quot;Skill 4&quot;,Ffskill);\r\n\r\n        //Softwares\r\n        userinfo.put(&quot;Software 1&quot;,Fsoftware);\r\n        userinfo.put(&quot;Software 2&quot;,ssoftware);\r\n        userinfo.put(&quot;Software 3&quot;,tsoftware);\r\n        userinfo.put(&quot;Software 4&quot;,Ffsoftware);\r\n\r\n\r\n        //other\r\n        userinfo.put(&quot;Brief&quot;,B);\r\n        userinfo.put(&quot;Job Title&quot;,JB);\r\n\r\n        userinfo.put(&quot;Website&quot;,web);\r\n        userinfo.put(&quot;Instagram&quot;,instag);\r\n        userinfo.put(&quot;Behance&quot;,Be);\r\n\r\n\r\n\r\n\r\n        String user_id = mAuth.getCurrentUser().getUid();\r\n\r\n        F_Database.updateChildren(userinfo);\r\n\r\n        if(resultUri!= null){\r\n            StorageReference FilePath = FirebaseStorage.getInstance().getReference().child(&quot;Profile images&quot;).child(user_id);\r\n            Bitmap bitmap = null;\r\n            try {\r\n                bitmap = MediaStore.Images.Media.getBitmap(getApplication().getContentResolver(), resultUri);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\n            ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n            bitmap.compress(Bitmap.CompressFormat.JPEG,20,baos);\r\n            byte[] data = baos.toByteArray();\r\n            UploadTask uploadTask = FilePath.putBytes(data);\r\n\r\n            uploadTask.addOnFailureListener(new OnFailureListener() {\r\n                @Override\r\n                public void onFailure(@NonNull Exception e) {\r\n                    finish();\r\n                    return;\r\n                }\r\n            });\r\n\r\n            uploadTask.addOnSuccessListener(new OnSuccessListener&lt;UploadTask.TaskSnapshot&gt;() {\r\n                @Override\r\n                public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                    Task&lt;Uri&gt; downloadUrl = taskSnapshot.getStorage().getDownloadUrl();\r\n                    Map newImg = new HashMap();\r\n                    newImg.put(&quot;ProfileImageUrl&quot;, downloadUrl.toString());\r\n                    F_Database.updateChildren(newImg);\r\n                    finish();\r\n                    return;\r\n                }\r\n            });\r\n\r\n        }else {\r\n\r\n            finish();\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    public void Getinfo(){\r\n        F_Database.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot datasnapshot) {\r\n                if(datasnapshot.exists() &amp;&amp; datasnapshot.getChildrenCount()&gt;0){\r\n\r\n                    String Email = mEmail.getText().toString().trim();\r\n                    String Password = mPassword.getText().toString().trim();\r\n                    String FirstName = mFirstName.getText().toString();\r\n                    String LastName =  mLastName.getText().toString();\r\n                   // String FullName = mFirstName.getText().toString() + &quot; &quot; + mLastName.getText().toString();\r\n                    String PhoneNum= mphone.getText().toString();\r\n                    String  Fsoftware= Software1.getText().toString();\r\n                    String  ssoftware= Software2.getText().toString();\r\n                    String  tsoftware= Software3.getText().toString();\r\n                    String  Ffsoftware= Software4.getText().toString();\r\n                    String  Fskill= Skill1.getText().toString();\r\n                    String  sskill= Skill2.getText().toString();\r\n                    String  tskill= Skill3.getText().toString();\r\n                    String  Ffskill= Skill4.getText().toString();\r\n                    String  JB= jobTitle.getText().toString();\r\n                    String  B= Brief.getText().toString();\r\n                    String Be = behance.getText().toString();\r\n                    String instag = insta.getText().toString();\r\n                    String web = website.getText().toString();\r\n                    Map&lt;String,Object&gt; Map = new HashMap&lt;&gt;();\r\n\r\n\r\n\r\n\r\n\r\n                    if(Map.get(&quot;First Name&quot;)!=null){\r\n                        FirstName = Map.get(&quot;First Name&quot;).toString();\r\n                        mFirstName.setText(FirstName);\r\n\r\n                }\r\n\r\n                    if(Map.get(&quot;Email&quot;)!=null){\r\n                        Email = Map.get(&quot;Email&quot;).toString();\r\n                        mEmail.setText(Email);\r\n\r\n                    }\r\n\r\n\r\n\r\n\r\n                    if(Map.get(&quot;Password&quot;)!=null){\r\n                        Password = Map.get(&quot;Password&quot;).toString();\r\n                        mPassword.setText(Password);\r\n\r\n                    }\r\n\r\n\r\n\r\n                    if(Map.get(&quot;LastName&quot;)!=null){\r\n                        LastName = Map.get(&quot;LastName&quot;).toString();\r\n                        mLastName.setText(LastName);\r\n\r\n                    }\r\n\r\n\r\n\r\n\r\n\r\n                    if(Map.get(&quot;PhoneNum&quot;)!=null){\r\n                        PhoneNum = Map.get(&quot;PhoneNum&quot;).toString();\r\n                        mphone.setText(PhoneNum);\r\n\r\n                    }\r\n\r\n\r\n\r\n\r\n                    if(Map.get(&quot;Fsoftware&quot;)!=null){\r\n                        Fsoftware = Map.get(&quot;Fsoftware&quot;).toString();\r\n                        Software1.setText(Fsoftware);\r\n\r\n                    }\r\n\r\n\r\n\r\n                    if(Map.get(&quot;ssoftware&quot;)!=null){\r\n                        ssoftware = Map.get(&quot;ssoftware&quot;).toString();\r\n                        Software2.setText(ssoftware);\r\n\r\n                    }\r\n\r\n\r\n\r\n\r\n                    if(Map.get(&quot;tsoftware&quot;)!=null){\r\n                        tsoftware= Map.get(&quot;ssoftware&quot;).toString();\r\n                        Software3.setText(tsoftware);\r\n\r\n                    }\r\n\r\n\r\n\r\n\r\n                    if(Map.get(&quot;Ffsoftware&quot;)!=null){\r\n                        Ffsoftware = Map.get(&quot;Ffsoftware&quot;).toString();\r\n                        Software4.setText(Ffsoftware);\r\n\r\n                    }\r\n\r\n\r\n\r\n                    if(Map.get(&quot;Fskill&quot;)!=null){\r\n                        Fskill = Map.get(&quot;First Name&quot;).toString();\r\n                        Skill1.setText(Fskill);\r\n\r\n                    }\r\n\r\n\r\n\r\n\r\n                    if(Map.get(&quot;sskill&quot;)!=null){\r\n                        sskill = Map.get(&quot;First Name&quot;).toString();\r\n                        Skill2.setText(sskill);\r\n\r\n                    }\r\n\r\n\r\n\r\n\r\n                    if(Map.get(&quot;tskill&quot;)!=null){\r\n                        tskill = Map.get(&quot;tskill&quot;).toString();\r\n                        Skill3.setText(tskill);\r\n\r\n                    }\r\n\r\n\r\n\r\n\r\n                    if(Map.get(&quot;Ffskill&quot;)!=null){\r\n                        Ffskill= Map.get(&quot;Ffskill&quot;).toString();\r\n                        Skill4.setText(Ffskill);\r\n\r\n                    }\r\n\r\n\r\n\r\n\r\n                    if(Map.get(&quot;JB&quot;)!=null){\r\n                        JB = Map.get(&quot;JB&quot;).toString();\r\n                        jobTitle.setText(JB);\r\n\r\n                    }\r\n\r\n\r\n\r\n\r\n                    if(Map.get(&quot;B&quot;)!=null){\r\n                        B = Map.get(&quot;B&quot;).toString();\r\n                        Brief.setText(B);\r\n\r\n                    }\r\n\r\n\r\n                    if(Map.get(&quot;Be&quot;)!=null){\r\n                        Be = Map.get(&quot;Be&quot;).toString();\r\n                        behance.setText(Be);\r\n\r\n                    }\r\n\r\n\r\n                    if(Map.get(&quot;instag&quot;)!=null){\r\n                        instag = Map.get(&quot;instag&quot;).toString();\r\n                        insta.setText(instag);\r\n\r\n                    }\r\n\r\n\r\n                    if(Map.get(&quot;web&quot;)!=null){\r\n                        web = Map.get(&quot;web&quot;).toString();\r\n                        website.setText(web);\r\n\r\n                    }\r\n\r\n\r\n\r\n\r\n\r\n                    if(Map.get(&quot;ProfileImageUrl&quot;)!=null){\r\n\r\n                        ProfileimgUrl = Map.get(&quot;ProfileImageUrl&quot;).toString();\r\n                        Glide.with(getApplication()).load(ProfileimgUrl).into(ProfileImg);\r\n\r\n                   }\r\n\r\n\r\n                }\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    public void onClick(View view){\r\n\r\n        Intent intent = new Intent(com.example.frelance0.F_Sign_Up.this, Freelancer_Log_in.class);\r\n\r\n        startActivity(intent);\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if(resultCode == 1 &amp;&amp; requestCode == Activity.RESULT_OK);\r\n        final Uri imgUri = data.getData();\r\n\r\n        resultUri = imgUri;\r\n        ProfileImg.setImageURI(imgUri);\r\n    }\r\n}\r\n","title":"can not retrieve data from realtime data base into a recyclerView","body":"<p>i am working on a freelancing app called frelance. the idea of the app is to connect freelancers with clients that need their services.\nand I am trying to retrieve data from the realtime database but it's not working.</p>\n<p><strong>ShowActivity Xml</strong></p>\n<pre><code>  &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n  &lt;androidx.constraintlayout.widget.ConstraintLayout \n  xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n  xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n  xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n  android:layout_width=&quot;match_parent&quot;\n  android:layout_height=&quot;match_parent&quot;\n  tools:context=&quot;.ShowActivity&quot;&gt;\n\n\n\n&lt;androidx.appcompat.widget.SearchView\n    android:id=&quot;@+id/Search&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:padding=&quot;5dp&quot;\n    android:background=&quot;@color/black&quot;\n    android:layout_marginBottom=&quot;5dp&quot;\n    android:hint=&quot;Search&quot;/&gt;\n\n&lt;androidx.recyclerview.widget.RecyclerView\n\n    android:id=&quot;@+id/recyclerview&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n    app:layout_constraintHorizontal_bias=&quot;0.5&quot;\n    app:layout_constraintStart_toStartOf=&quot;parent&quot;\n    app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n   &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p><strong>ShowActivity Java</strong>\nPackage com.example.frelance0;</p>\n<pre><code>    import androidx.annotation.NonNull;\n    import androidx.appcompat.app.AppCompatActivity;\n    import androidx.appcompat.widget.SearchView;\n    import androidx.recyclerview.widget.LinearLayoutManager;\n    import androidx.recyclerview.widget.RecyclerView;\n\n    import android.content.Intent;\n    import android.os.Bundle;\n    import android.util.Log;\n    import android.view.View;\n\n    import com.google.firebase.auth.FirebaseAuth;\n    import com.google.firebase.database.DataSnapshot;\n    import com.google.firebase.database.DatabaseError;\n    import com.google.firebase.database.DatabaseReference;\n    import com.google.firebase.database.FirebaseDatabase;\n    import com.google.firebase.database.ValueEventListener;\n\n    import java.security.PrivateKey;\n    import java.util.ArrayList;\n    import java.util.Map;\n\n    public class ShowActivity extends AppCompatActivity {\n\n    private RecyclerView recyclerView;\n\nSearchView searchView;\n\n\nFirebaseAuth mAuth=FirebaseAuth.getInstance();\nFirebaseAuth.AuthStateListener firebaseAuthListener;\nString user_id = mAuth.getCurrentUser().getUid();\n\nDatabaseReference F_Database= FirebaseDatabase.getInstance().getReference().child(&quot;Users&quot;);\nDatabaseReference Current_user_db = FirebaseDatabase.getInstance().getReference().child(&quot;Users&quot;).child(&quot;Freelancers&quot;);\n\n\n\nprivate MyAdapter adapter;\nprivate ArrayList&lt;Model&gt; list;\n\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_show);\n\n    recyclerView = findViewById(R.id.recyclerview);\n    recyclerView.setHasFixedSize(true);\n    recyclerView.setLayoutManager(new LinearLayoutManager(this));\n    list = new ArrayList&lt;&gt;();\n    adapter = new MyAdapter(this, list);\n    recyclerView.setAdapter(adapter);\n\n    searchView = findViewById(R.id.Search);\n\n\n\n\n    //Log.d(&quot;user id&quot;, user_id);\n\n    //Log.d(&quot;database&quot;,F_Database.toString());\n\n\n\n    F_Database.addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(@NonNull DataSnapshot snapshot) {\n            Log.d(&quot;OUTSIDE LOOP&quot;, snapshot.getChildren().toString());\n\n            for(DataSnapshot dataSnapshot : snapshot.getChildren()){\n                Log.d(&quot;INSIDE LOOP&quot;, &quot;MESSAGE&quot;);\n                Model model = dataSnapshot.getValue(Model.class);\n                list.add(model);\n            }\n\n            adapter.notifyDataSetChanged();\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError error) {\n\n        }\n    });\n\n    if(searchView != null){\n        searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {\n            @Override\n            public boolean onQueryTextSubmit(String query) {\n                return false;\n            }\n\n            @Override\n            public boolean onQueryTextChange(String newText) {\n                search(newText);\n                return true;\n            }\n        });\n    }\n\n\n\n}\n\nprivate void search(String str){\n    ArrayList&lt;Model&gt; mylist = new ArrayList&lt;&gt;();\n    for(Model object: list){\n        if(object.getEmail().toLowerCase().contains(str.toLowerCase())){\n            mylist.add(object);\n        }\n\n    }\n\n    MyAdapter newAdapter = new MyAdapter(mylist);\n    recyclerView.setAdapter(newAdapter);\n}\n</code></pre>\n<p>}</p>\n<p><strong>Adapter Code</strong></p>\n<pre><code>    package com.example.frelance0;\n    import android.content.Context;\n    import android.view.LayoutInflater;\n    import android.view.View;\n    import android.view.ViewGroup;\n    import android.widget.TextView;\n\n    import androidx.annotation.NonNull;\n    import androidx.recyclerview.widget.RecyclerView;\n\n import com.example.frelance0.R;\n\n import java.util.ArrayList;\n\n public class MyAdapter extends RecyclerView.Adapter&lt;MyAdapter.MyViewHolder&gt;{\n\nArrayList&lt;Model&gt; mlist;\nContext context;\n\npublic MyAdapter(Context context, ArrayList&lt;Model&gt; mlist){\n    this.mlist = mlist;\n    this.context = context;\n}\n\npublic MyAdapter(ArrayList&lt;Model&gt; mylist) {\n}\n\n@NonNull\n@Override\npublic MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n    View v = LayoutInflater.from(context).inflate(R.layout.item, parent, false);\n    return new MyViewHolder(v);\n}\n\n@Override\npublic void onBindViewHolder(@NonNull MyViewHolder holder, int position) {\n    Model model = mlist.get(position);\n    holder.Name.setText(model.getName());\n    holder.Email.setText(model.getEmail());\n    holder.JobTitle.setText(model.getJobTitle());\n\n}\n\n@Override\npublic int getItemCount() {\n    return mlist.size();\n}\n\npublic static class MyViewHolder extends RecyclerView.ViewHolder{\n\n    TextView Name , Email , JobTitle;\n\n    public MyViewHolder(@NonNull View itemView) {\n        super(itemView);\n\n        Name= itemView.findViewById(R.id.Name);\n        Email= itemView.findViewById(R.id.Email);\n        JobTitle= itemView.findViewById(R.id.Job);\n    }\n}\n</code></pre>\n<p>}</p>\n<p><strong>Model Class</strong></p>\n<pre><code> package com.example.frelance0;\n\n public class Model {\n\nString Name , JobTitle , Email;\n\npublic void setName(String name) {\n    Name = name;\n}\n\npublic void setJobTitle(String jobTitle) {\n    JobTitle = jobTitle;\n}\n\npublic void setEmail(String email) {\n    Email = email;\n}\n\npublic String getName() {\n    return Name;\n}\n\npublic String getJobTitle() {\n    return JobTitle;\n}\n\npublic String getEmail() {\n    return Email;\n}\n  }\n</code></pre>\n<p>and Here is a screenshot of my Realtime Database:</p>\n<p><a href=\"https://i.stack.imgur.com/lkJxx.jpg\" rel=\"nofollow noreferrer\">Realtime Database</a></p>\n<p><a href=\"https://i.stack.imgur.com/lAHSH.jpg\" rel=\"nofollow noreferrer\">Realtime Database</a></p>\n<p><a href=\"https://i.stack.imgur.com/gePQJ.jpg\" rel=\"nofollow noreferrer\">Realtime Database</a></p>\n<p>as you can see its nested and i don't know why.</p>\n<p><a href=\"https://i.stack.imgur.com/l4MmU.png\" rel=\"nofollow noreferrer\">app error recyclerview screenshot</a></p>\n<p>I will also attach the Sign up Code in Case You need it Because i Have a nested database problem:</p>\n<pre><code>    package com.example.frelance0;\n\n    import androidx.annotation.NonNull;\n    import androidx.annotation.Nullable;\n    import androidx.appcompat.app.AppCompatActivity;\n    import androidx.recyclerview.widget.LinearLayoutManager;\n    import androidx.recyclerview.widget.RecyclerView;\n\n    import android.app.Activity;\n    import android.content.Intent;\n    import android.graphics.Bitmap;\n    import android.net.Uri;\n    import android.os.Bundle;\n    import android.provider.MediaStore;\n    import android.text.TextUtils;\n    import android.view.View;\n    import android.widget.Button;\n    import android.widget.EditText;\n    import android.widget.ImageView;\n    import android.widget.ProgressBar;\n    import android.widget.TextView;\n\n    import com.bumptech.glide.Glide;\n    import com.example.frelance0.C_Sign_in;\n    import com.example.frelance0.Client_Profile;\n    import com.example.frelance0.R;\n    import com.google.android.gms.tasks.OnCompleteListener;\n    import com.google.android.gms.tasks.OnFailureListener;\n    import com.google.android.gms.tasks.OnSuccessListener;\n    import com.google.android.gms.tasks.Task;\n    import com.google.firebase.auth.AuthResult;\n    import com.google.firebase.auth.FirebaseAuth;\n    import com.google.firebase.auth.FirebaseUser;\n    import com.google.firebase.database.DataSnapshot;\n    import com.google.firebase.database.DatabaseError;\n    import com.google.firebase.database.DatabaseReference;\n    import com.google.firebase.database.FirebaseDatabase;\n    import com.google.firebase.database.ValueEventListener;\n    import com.google.firebase.storage.FirebaseStorage;\n    import com.google.firebase.storage.StorageReference;\n    import com.google.firebase.storage.UploadTask;\n\n    import java.io.ByteArrayInputStream;\n    import java.io.ByteArrayOutputStream;\n    import java.io.IOException;\n    import java.util.ArrayList;\n    import java.util.HashMap;\n    import java.util.Map;\n\n    public class F_Sign_Up extends AppCompatActivity {\n\nEditText mFirstName , mLastName , mEmail , mPassword  , mphone;\nEditText insta , behance , website ;\nEditText Skill1 , Skill2 , Skill3  , Skill4   , Brief , jobTitle , Software1 , Software2 , Software3 , Software4;\n\nImageView ProfileImg;\n\nButton register;\nTextView mlogin;\nProgressBar progressBar;\nString ProfileimgUrl;\n\nFirebaseAuth mAuth;\nFirebaseAuth.AuthStateListener firebaseAuthListener;\nDatabaseReference F_Database;\nUri resultUri;\n\n\n\n\n\n\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_f__sign__up);\n\n\n\n    //connect Xml\n\n\n\n    mFirstName= (EditText) findViewById(R.id.FirstName);\n    mLastName= (EditText) findViewById(R.id.LastName);\n    mEmail= (EditText) findViewById(R.id.email);\n    mPassword= (EditText) findViewById(R.id.password);\n    mphone= (EditText) findViewById(R.id.phone);\n    register= (Button) findViewById(R.id.signUp);\n    mlogin = (TextView) findViewById(R.id.logIn);\n    progressBar= (ProgressBar) findViewById(R.id.progressBar);\n    Skill1 = (EditText) findViewById(R.id.skill1);\n    Skill2 = (EditText) findViewById(R.id.skill2);\n    Skill3 = (EditText) findViewById(R.id.skill3);\n    Skill4 = (EditText) findViewById(R.id.skill4);\n    Software1 = (EditText) findViewById(R.id.software1);\n    Software2 = (EditText) findViewById(R.id.software2);\n    Software3 = (EditText) findViewById(R.id.software3);\n    Software4 =(EditText) findViewById(R.id.software4);\n    jobTitle = (EditText) findViewById(R.id.JobTiTleHint);\n    Brief = (EditText) findViewById(R.id.Brief);\n\n    insta = (EditText) findViewById(R.id.insta);\n    behance = (EditText) findViewById(R.id.Behance);\n    website = (EditText) findViewById(R.id.Website);\n\n\n\n    ProfileImg = findViewById(R.id.ProfilePic);\n\n    String img = ProfileImg.toString();\n\n    ProfileImg.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            Intent intent = new Intent(Intent.ACTION_PICK);\n            intent.setType(&quot;image/*&quot;);\n            startActivityForResult(intent , 1);\n        }\n    });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    mAuth =FirebaseAuth.getInstance();\n\n    firebaseAuthListener = new FirebaseAuth.AuthStateListener() {\n        @Override\n        public void onAuthStateChanged(@NonNull FirebaseAuth firebaseAuth) {\n\n            FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();\n\n            if(user != null) {\n\n                Intent intent = new Intent(com.example.frelance0.F_Sign_Up.this, Freelancer_Profile.class);\n\n                String P = mphone.getText().toString();\n                intent.putExtra(&quot;Phone&quot;,P);\n                startActivity(intent);\n                return;\n\n            }\n\n\n        }\n    };\n\n    register.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n\n            String Email = mEmail.getText().toString().trim();\n            String Password = mPassword.getText().toString().trim();\n\n\n\n\n\n\n\n\n\n            mAuth =FirebaseAuth.getInstance();\n\n\n            progressBar.setVisibility(View.VISIBLE);\n\n            mAuth.createUserWithEmailAndPassword(Email,Password).addOnCompleteListener(com.example.frelance0.F_Sign_Up.this, new OnCompleteListener&lt;AuthResult&gt;() {\n                @Override\n                public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\n\n\n                    // if (task.isSuccessful()){\n                    //Toast.makeText(F_Sign_Up.this, &quot;Sign Up Error&quot;, Toast.LENGTH_SHORT).show();\n\n                    if(TextUtils.isEmpty(Email)){\n\n                        mEmail.setError(&quot;E-mail is Required&quot;);\n                        return;\n                    }\n\n                    if(TextUtils.isEmpty(Password)){\n\n                        mPassword.setError(&quot;Password is Required&quot;);\n                        return;\n                    }\n                    if(Password.length() &lt; 6){\n\n                        mPassword.setError(&quot;Password Must Be More Than 6 Char &quot;);\n                        return;\n                    }\n\n\n\n                    if(mAuth.getCurrentUser() != null) {\n\n                        String user_id = mAuth.getCurrentUser().getUid();\n                        DatabaseReference Current_user_db = FirebaseDatabase.getInstance().getReference().child(&quot;Users&quot;).child(&quot;Freelancers&quot;).child(user_id);\n                        Current_user_db.setValue(true);\n\n                        F_Database =FirebaseDatabase.getInstance().getReference().child(&quot;Users&quot;).child(&quot;Freelancers&quot;).child(user_id);\n                        Getinfo();\n                        Saveinfo();\n\n                        Intent intent = new Intent(com.example.frelance0.F_Sign_Up.this, loading.class);\n\n                        //Phone Intent\n\n                        String P = mphone.getText().toString();\n                        intent.putExtra(&quot;Phone&quot;,P);\n\n\n                        startActivity(intent);\n\n\n\n\n                        String Email = mEmail.getText().toString().trim();\n                        String Password = mPassword.getText().toString().trim();\n                        String FirstName = mFirstName.getText().toString();\n                        String LastName =  mLastName.getText().toString();\n                        String FullName = mFirstName.getText().toString() + &quot; &quot; + mLastName.getText().toString();\n                        String PhoneNum= mphone.getText().toString();\n                        String  Fsoftware= Software1.getText().toString();\n                        String  ssoftware= Software2.getText().toString();\n                        String  tsoftware= Software3.getText().toString();\n                        String  Ffsoftware= Software4.getText().toString();\n                        String  Fskill= Skill1.getText().toString();\n                        String  sskill= Skill2.getText().toString();\n                        String  tskill= Skill3.getText().toString();\n                        String  Ffskill= Skill4.getText().toString();\n                        String  JB= jobTitle.getText().toString();\n                        String  B= Brief.getText().toString();\n                        String Be = behance.getText().toString();\n                        String instag = insta.getText().toString();\n                        String web = website.getText().toString();\n\n\n                        Users user = new Users(FullName,FirstName,LastName,Email,Fskill,sskill,tskill,Ffskill,Fsoftware,ssoftware,tsoftware,Ffsoftware,web,instag,Be,JB,Integer.parseInt(PhoneNum));\n                        F_Database.child(&quot;Users&quot;).child(&quot;Freelancers&quot;).push().setValue(user);\n\n\n\n                    }\n\n                }\n            });\n\n\n\n\n        }\n\n\n\n\n\n\n    });\n\n\n\n\n\n\n\n}\n\n@Override\nprotected void onStart() {\n    super.onStart();\n\n    mAuth.addAuthStateListener(firebaseAuthListener);\n}\n\n@Override\nprotected void onStop() {\n    super.onStop();\n    mAuth.removeAuthStateListener(firebaseAuthListener);\n\n}\n\npublic void Saveinfo(){\n\n    String Email = mEmail.getText().toString().trim();\n    String Password = mPassword.getText().toString().trim();\n    String FirstName = mFirstName.getText().toString();\n    String LastName =  mLastName.getText().toString();\n    String FullName = mFirstName.getText().toString() + &quot; &quot; + mLastName.getText().toString();\n    String PhoneNum= mphone.getText().toString();\n    String  Fsoftware= Software1.getText().toString();\n    String  ssoftware= Software2.getText().toString();\n    String  tsoftware= Software3.getText().toString();\n    String  Ffsoftware= Software4.getText().toString();\n    String  Fskill= Skill1.getText().toString();\n    String  sskill= Skill2.getText().toString();\n    String  tskill= Skill3.getText().toString();\n    String  Ffskill= Skill4.getText().toString();\n    String  JB= jobTitle.getText().toString();\n    String  B= Brief.getText().toString();\n    String Be = behance.getText().toString();\n    String instag = insta.getText().toString();\n    String web = website.getText().toString();\n    Map&lt;String,Object&gt; Map = new HashMap&lt;&gt;();\n\n    Map userinfo = new HashMap();\n\n    userinfo.put(&quot;First Name&quot;,FirstName);\n    userinfo.put(&quot;Last Name&quot;,LastName);\n    userinfo.put(&quot;Full Name&quot;,FullName);\n    userinfo.put(&quot;Email&quot;,Email);\n    userinfo.put(&quot;Phone Number&quot; , PhoneNum);\n    //Skills\n    userinfo.put(&quot;Skill 1&quot;,Fskill);\n    userinfo.put(&quot;Skill 2&quot;,sskill);\n    userinfo.put(&quot;Skill 3&quot;,tskill);\n    userinfo.put(&quot;Skill 4&quot;,Ffskill);\n\n    //Softwares\n    userinfo.put(&quot;Software 1&quot;,Fsoftware);\n    userinfo.put(&quot;Software 2&quot;,ssoftware);\n    userinfo.put(&quot;Software 3&quot;,tsoftware);\n    userinfo.put(&quot;Software 4&quot;,Ffsoftware);\n\n\n    //other\n    userinfo.put(&quot;Brief&quot;,B);\n    userinfo.put(&quot;Job Title&quot;,JB);\n\n    userinfo.put(&quot;Website&quot;,web);\n    userinfo.put(&quot;Instagram&quot;,instag);\n    userinfo.put(&quot;Behance&quot;,Be);\n\n\n\n\n    String user_id = mAuth.getCurrentUser().getUid();\n\n    F_Database.updateChildren(userinfo);\n\n    if(resultUri!= null){\n        StorageReference FilePath = FirebaseStorage.getInstance().getReference().child(&quot;Profile images&quot;).child(user_id);\n        Bitmap bitmap = null;\n        try {\n            bitmap = MediaStore.Images.Media.getBitmap(getApplication().getContentResolver(), resultUri);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        bitmap.compress(Bitmap.CompressFormat.JPEG,20,baos);\n        byte[] data = baos.toByteArray();\n        UploadTask uploadTask = FilePath.putBytes(data);\n\n        uploadTask.addOnFailureListener(new OnFailureListener() {\n            @Override\n            public void onFailure(@NonNull Exception e) {\n                finish();\n                return;\n            }\n        });\n\n        uploadTask.addOnSuccessListener(new OnSuccessListener&lt;UploadTask.TaskSnapshot&gt;() {\n            @Override\n            public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\n                Task&lt;Uri&gt; downloadUrl = taskSnapshot.getStorage().getDownloadUrl();\n                Map newImg = new HashMap();\n                newImg.put(&quot;ProfileImageUrl&quot;, downloadUrl.toString());\n                F_Database.updateChildren(newImg);\n                finish();\n                return;\n            }\n        });\n\n    }else {\n\n        finish();\n    }\n\n\n\n\n\n}\n\npublic void Getinfo(){\n    F_Database.addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(@NonNull DataSnapshot datasnapshot) {\n            if(datasnapshot.exists() &amp;&amp; datasnapshot.getChildrenCount()&gt;0){\n\n                String Email = mEmail.getText().toString().trim();\n                String Password = mPassword.getText().toString().trim();\n                String FirstName = mFirstName.getText().toString();\n                String LastName =  mLastName.getText().toString();\n               // String FullName = mFirstName.getText().toString() + &quot; &quot; + mLastName.getText().toString();\n                String PhoneNum= mphone.getText().toString();\n                String  Fsoftware= Software1.getText().toString();\n                String  ssoftware= Software2.getText().toString();\n                String  tsoftware= Software3.getText().toString();\n                String  Ffsoftware= Software4.getText().toString();\n                String  Fskill= Skill1.getText().toString();\n                String  sskill= Skill2.getText().toString();\n                String  tskill= Skill3.getText().toString();\n                String  Ffskill= Skill4.getText().toString();\n                String  JB= jobTitle.getText().toString();\n                String  B= Brief.getText().toString();\n                String Be = behance.getText().toString();\n                String instag = insta.getText().toString();\n                String web = website.getText().toString();\n                Map&lt;String,Object&gt; Map = new HashMap&lt;&gt;();\n\n\n\n\n\n                if(Map.get(&quot;First Name&quot;)!=null){\n                    FirstName = Map.get(&quot;First Name&quot;).toString();\n                    mFirstName.setText(FirstName);\n\n            }\n\n                if(Map.get(&quot;Email&quot;)!=null){\n                    Email = Map.get(&quot;Email&quot;).toString();\n                    mEmail.setText(Email);\n\n                }\n\n\n\n\n                if(Map.get(&quot;Password&quot;)!=null){\n                    Password = Map.get(&quot;Password&quot;).toString();\n                    mPassword.setText(Password);\n\n                }\n\n\n\n                if(Map.get(&quot;LastName&quot;)!=null){\n                    LastName = Map.get(&quot;LastName&quot;).toString();\n                    mLastName.setText(LastName);\n\n                }\n\n\n\n\n\n                if(Map.get(&quot;PhoneNum&quot;)!=null){\n                    PhoneNum = Map.get(&quot;PhoneNum&quot;).toString();\n                    mphone.setText(PhoneNum);\n\n                }\n\n\n\n\n                if(Map.get(&quot;Fsoftware&quot;)!=null){\n                    Fsoftware = Map.get(&quot;Fsoftware&quot;).toString();\n                    Software1.setText(Fsoftware);\n\n                }\n\n\n\n                if(Map.get(&quot;ssoftware&quot;)!=null){\n                    ssoftware = Map.get(&quot;ssoftware&quot;).toString();\n                    Software2.setText(ssoftware);\n\n                }\n\n\n\n\n                if(Map.get(&quot;tsoftware&quot;)!=null){\n                    tsoftware= Map.get(&quot;ssoftware&quot;).toString();\n                    Software3.setText(tsoftware);\n\n                }\n\n\n\n\n                if(Map.get(&quot;Ffsoftware&quot;)!=null){\n                    Ffsoftware = Map.get(&quot;Ffsoftware&quot;).toString();\n                    Software4.setText(Ffsoftware);\n\n                }\n\n\n\n                if(Map.get(&quot;Fskill&quot;)!=null){\n                    Fskill = Map.get(&quot;First Name&quot;).toString();\n                    Skill1.setText(Fskill);\n\n                }\n\n\n\n\n                if(Map.get(&quot;sskill&quot;)!=null){\n                    sskill = Map.get(&quot;First Name&quot;).toString();\n                    Skill2.setText(sskill);\n\n                }\n\n\n\n\n                if(Map.get(&quot;tskill&quot;)!=null){\n                    tskill = Map.get(&quot;tskill&quot;).toString();\n                    Skill3.setText(tskill);\n\n                }\n\n\n\n\n                if(Map.get(&quot;Ffskill&quot;)!=null){\n                    Ffskill= Map.get(&quot;Ffskill&quot;).toString();\n                    Skill4.setText(Ffskill);\n\n                }\n\n\n\n\n                if(Map.get(&quot;JB&quot;)!=null){\n                    JB = Map.get(&quot;JB&quot;).toString();\n                    jobTitle.setText(JB);\n\n                }\n\n\n\n\n                if(Map.get(&quot;B&quot;)!=null){\n                    B = Map.get(&quot;B&quot;).toString();\n                    Brief.setText(B);\n\n                }\n\n\n                if(Map.get(&quot;Be&quot;)!=null){\n                    Be = Map.get(&quot;Be&quot;).toString();\n                    behance.setText(Be);\n\n                }\n\n\n                if(Map.get(&quot;instag&quot;)!=null){\n                    instag = Map.get(&quot;instag&quot;).toString();\n                    insta.setText(instag);\n\n                }\n\n\n                if(Map.get(&quot;web&quot;)!=null){\n                    web = Map.get(&quot;web&quot;).toString();\n                    website.setText(web);\n\n                }\n\n\n\n\n\n                if(Map.get(&quot;ProfileImageUrl&quot;)!=null){\n\n                    ProfileimgUrl = Map.get(&quot;ProfileImageUrl&quot;).toString();\n                    Glide.with(getApplication()).load(ProfileimgUrl).into(ProfileImg);\n\n               }\n\n\n            }\n\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError databaseError) {\n\n        }\n    });\n\n\n\n\n}\n\npublic void onClick(View view){\n\n    Intent intent = new Intent(com.example.frelance0.F_Sign_Up.this, Freelancer_Log_in.class);\n\n    startActivity(intent);\n}\n\n\n@Override\nprotected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n    if(resultCode == 1 &amp;&amp; requestCode == Activity.RESULT_OK);\n    final Uri imgUri = data.getData();\n\n    resultUri = imgUri;\n    ProfileImg.setImageURI(imgUri);\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","android","sqlite"],"comments":[{"owner":{"account_id":14535244,"reputation":161554,"user_id":10498828,"display_name":"forpas"},"score":0,"creation_date":1635943220,"post_id":69824738,"comment_id":123425584,"body_markdown":"Probably you added/modified columns to the table after you first ran the app. Uninstall the app from the device and rerun. If the problem persists try in a clean device.","body":"Probably you added/modified columns to the table after you first ran the app. Uninstall the app from the device and rerun. If the problem persists try in a clean device."},{"owner":{"account_id":1876738,"reputation":685,"user_id":1697806,"accept_rate":43,"display_name":"Allrounder"},"score":0,"creation_date":1635943451,"post_id":69824738,"comment_id":123425683,"body_markdown":"Hi @forpas, Thanks.  I have tried that but it is sadly still not working :-(  I have gone through the code again now and it all looks like it should work right?","body":"Hi @forpas, Thanks.  I have tried that but it is sadly still not working :-(  I have gone through the code again now and it all looks like it should work right?"},{"owner":{"account_id":14535244,"reputation":161554,"user_id":10498828,"display_name":"forpas"},"score":0,"creation_date":1635943517,"post_id":69824738,"comment_id":123425703,"body_markdown":"The error you get means that 1 or more of the columns LocationsDB.FIELD_??? do not exist.","body":"The error you get means that 1 or more of the columns LocationsDB.FIELD_??? do not exist."},{"owner":{"account_id":1876738,"reputation":685,"user_id":1697806,"accept_rate":43,"display_name":"Allrounder"},"score":0,"creation_date":1635944026,"post_id":69824738,"comment_id":123425926,"body_markdown":"But they do exist? I don&#39;t understand?","body":"But they do exist? I don&#39;t understand?"},{"owner":{"display_name":"user2711811"},"score":1,"creation_date":1635944989,"post_id":69824738,"comment_id":123426394,"body_markdown":"AndroidStudio comes with a database explorer so I&#39;d use that to inspect schema and entries - post results as well.","body":"AndroidStudio comes with a database explorer so I&#39;d use that to inspect schema and entries - post results as well."}],"answers":[{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635972485,"creation_date":1635972058,"answer_id":69831471,"question_id":69824738,"body_markdown":"&gt; The reason I think it is not loading is that i get the following error Value must be ≥ 0 by the following lines of code:\r\n\r\nThe `Value must be ≥ 0` for using `the_cursor.get???(getColumnIndex(&quot;the_column_name&quot;))` is an issue that has been raised. **It is not the cause of the data not being inserted.**\r\n\r\nYou can supress is using one of \r\n\r\n1. `@SupressLint(&quot;Range&quot;)` *(hover over the error and the option to add the suppression is presented)*\r\n1. Using the `getColumnIndexOrThrow` method instead of the `getColumnIndex` method.\r\n1. Seperating the statements e.g. :-\r\n\r\n       int cursorIndex = csr.getColumnIndex(&quot;the_column&quot;);\r\n       csr.get???(cursorIndex);\r\n1. Using SDK 30 instead of SDK 31\r\n\r\nThe issue has been raised https://issuetracker.google.com/issues/202193843\r\n\r\n&gt; The app surprisingly still runs and works up until the point it needs to save the info to the database :-)\r\n\r\nYes, the `Value must be ≥ 0` is only a warning.\r\n\r\n**However, the reason that data isn&#39;t being saved is because you are creating a LocationInsertTask and apparently doing nothing with it.**\r\n\r\ni.e. you have :-\r\n\r\n   \r\n\r\n        LocationInsertTask insertTask = new LocationInsertTask();\r\n    }\r\n\r\ntry using \r\n\r\n            LocationInsertTask insertTask = new LocationInsertTask();\r\n            insertTask.execute(new ContentValues[]{contentValues});\r\n    }\r\n\r\n- i.e. executing the task.\r\n\r\nThe underlying `insert` method works i.e. the following code (that bypasses accessing google maps and also the LocationsContentProvider) adds rows to the database :-\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n        Button doit;\r\n        LocationsDB db;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            doit = this.findViewById(R.id.doit);\r\n            db = new LocationsDB(this); // get Database so as to bypass using provider\r\n            //* mimic getting data by using button click\r\n            doit.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    ContentValues contentValues = new ContentValues();\r\n                    contentValues.put(LocationsDB.FIELD_LAT, 100 ); //&lt;&lt;&lt;&lt;&lt; bypass getting value\r\n                    contentValues.put(LocationsDB.FIELD_LNG, 200); //&lt;&lt;&lt;&lt;&lt; bypass getting value\r\n                    contentValues.put(LocationsDB.FIELD_ZOOM, &quot;zoom&quot;); //&lt;&lt;&lt;&lt;&lt; bypass getting value\r\n                    LocationInsertTask insertTask = new LocationInsertTask();\r\n                    insertTask.execute(new ContentValues[]{contentValues}); //&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; FIX &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\r\n                }\r\n            });\r\n    \r\n        }\r\n    \r\n        class LocationInsertTask extends android.os.AsyncTask&lt;ContentValues, Void, Void&gt;\r\n        {\r\n            @Override\r\n            protected Void doInBackground(ContentValues... contentValues) {\r\n    \r\n                /** Setting up values to insert the clicked location into SQLite database */\r\n                //getContentResolver().insert(LocationsContentProvider.CONTENT_URI, contentValues[0]); //&lt;&lt;&lt;&lt;&lt; skip provider\r\n                db.insert(contentValues[0]); \r\n                return null;\r\n            }\r\n        }\r\n    \r\n        /*\r\n        @SuppressLint(&quot;Range&quot;)\r\n        void doNothing() {\r\n            Cursor csr;\r\n            csr.getLong(csr.getColumnIndex(&quot;the_column&quot;));\r\n            csr.getLong(csr.getColumnIndexOrThrow(&quot;the_column&quot;));\r\n            int cursorIndex = csr.getColumnIndex(&quot;the_column&quot;);\r\n            csr.getLong(cursorIndex);\r\n        }\r\n    \r\n         */\r\n    }\r\n\r\nClicking a few times on the button and :-\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**As such if you have further issues then they will within the `LocationsContentProvider`.**\r\n\r\n- Image obtained by using [App Inspection aka Database Inspector][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sdAp9.png\r\n  [2]: https://developer.android.com/studio/inspect/database","title":"How to save custom markers to SQLite Database in Android","body":"<blockquote>\n<p>The reason I think it is not loading is that i get the following error Value must be ≥ 0 by the following lines of code:</p>\n</blockquote>\n<p>The <code>Value must be ≥ 0</code> for using <code>the_cursor.get???(getColumnIndex(&quot;the_column_name&quot;))</code> is an issue that has been raised. <strong>It is not the cause of the data not being inserted.</strong></p>\n<p>You can supress is using one of</p>\n<ol>\n<li><p><code>@SupressLint(&quot;Range&quot;)</code> <em>(hover over the error and the option to add the suppression is presented)</em></p>\n</li>\n<li><p>Using the <code>getColumnIndexOrThrow</code> method instead of the <code>getColumnIndex</code> method.</p>\n</li>\n<li><p>Seperating the statements e.g. :-</p>\n<pre><code>int cursorIndex = csr.getColumnIndex(&quot;the_column&quot;);\ncsr.get???(cursorIndex);\n</code></pre>\n</li>\n<li><p>Using SDK 30 instead of SDK 31</p>\n</li>\n</ol>\n<p>The issue has been raised <a href=\"https://issuetracker.google.com/issues/202193843\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/202193843</a></p>\n<blockquote>\n<p>The app surprisingly still runs and works up until the point it needs to save the info to the database :-)</p>\n</blockquote>\n<p>Yes, the <code>Value must be ≥ 0</code> is only a warning.</p>\n<p><strong>However, the reason that data isn't being saved is because you are creating a LocationInsertTask and apparently doing nothing with it.</strong></p>\n<p>i.e. you have :-</p>\n<pre><code>    LocationInsertTask insertTask = new LocationInsertTask();\n}\n</code></pre>\n<p>try using</p>\n<pre><code>        LocationInsertTask insertTask = new LocationInsertTask();\n        insertTask.execute(new ContentValues[]{contentValues});\n}\n</code></pre>\n<ul>\n<li>i.e. executing the task.</li>\n</ul>\n<p>The underlying <code>insert</code> method works i.e. the following code (that bypasses accessing google maps and also the LocationsContentProvider) adds rows to the database :-</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n    Button doit;\n    LocationsDB db;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        doit = this.findViewById(R.id.doit);\n        db = new LocationsDB(this); // get Database so as to bypass using provider\n        //* mimic getting data by using button click\n        doit.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                ContentValues contentValues = new ContentValues();\n                contentValues.put(LocationsDB.FIELD_LAT, 100 ); //&lt;&lt;&lt;&lt;&lt; bypass getting value\n                contentValues.put(LocationsDB.FIELD_LNG, 200); //&lt;&lt;&lt;&lt;&lt; bypass getting value\n                contentValues.put(LocationsDB.FIELD_ZOOM, &quot;zoom&quot;); //&lt;&lt;&lt;&lt;&lt; bypass getting value\n                LocationInsertTask insertTask = new LocationInsertTask();\n                insertTask.execute(new ContentValues[]{contentValues}); //&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; FIX &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n            }\n        });\n\n    }\n\n    class LocationInsertTask extends android.os.AsyncTask&lt;ContentValues, Void, Void&gt;\n    {\n        @Override\n        protected Void doInBackground(ContentValues... contentValues) {\n\n            /** Setting up values to insert the clicked location into SQLite database */\n            //getContentResolver().insert(LocationsContentProvider.CONTENT_URI, contentValues[0]); //&lt;&lt;&lt;&lt;&lt; skip provider\n            db.insert(contentValues[0]); \n            return null;\n        }\n    }\n\n    /*\n    @SuppressLint(&quot;Range&quot;)\n    void doNothing() {\n        Cursor csr;\n        csr.getLong(csr.getColumnIndex(&quot;the_column&quot;));\n        csr.getLong(csr.getColumnIndexOrThrow(&quot;the_column&quot;));\n        int cursorIndex = csr.getColumnIndex(&quot;the_column&quot;);\n        csr.getLong(cursorIndex);\n    }\n\n     */\n}\n</code></pre>\n<p>Clicking a few times on the button and :-</p>\n<p><a href=\"https://i.stack.imgur.com/sdAp9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sdAp9.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>As such if you have further issues then they will within the <code>LocationsContentProvider</code>.</strong></p>\n<ul>\n<li>Image obtained by using <a href=\"https://developer.android.com/studio/inspect/database\" rel=\"nofollow noreferrer\">App Inspection aka Database Inspector</a></li>\n</ul>\n"}],"owner":{"account_id":1876738,"reputation":685,"user_id":1697806,"accept_rate":43,"display_name":"Allrounder"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635972485,"creation_date":1635942015,"question_id":69824738,"body_markdown":"Okay, so I am completely at a loss here!  What I am trying to do is to save the marker (or point) tapped on the map using `onMapLongClick`.  This works but only half way.\r\n\r\nWhat works is the user &quot;Long press&quot; on the map and it then displays the default map marker icon - Great!\r\n\r\nWhat doesn&#39;t work is it doesn&#39;t save it to the SQLite database - not so great (or it is saving but not displaying when the map loads again ?)\r\n\r\nThe reason I think it is not loading is that i get the following error `Value must be ≥ 0` by the following lines of code:\r\n\r\n    (arg1.getColumnIndex(LocationsDB.FIELD_LAT));\r\n    (arg1.getColumnIndex(LocationsDB.FIELD_LNG));\r\n    (arg1.getColumnIndex(LocationsDB.FIELD_ZOOM));\r\n\r\nThe app surprisingly still runs and works up until the point it needs to save the info to the database :-)\r\n\r\nNow for the code:\r\n\r\nLocationsDB\r\n\r\n    public class LocationsDB extends SQLiteOpenHelper{\r\n\r\n    private static String DBNAME = &quot;locationmarkersqlite&quot;;\r\n    private static int VERSION = 1;\r\n    public static final String FIELD_ROW_ID = &quot;_id&quot;;\r\n    public static final String FIELD_LAT = &quot;lat&quot;;\r\n    public static final String FIELD_LNG = &quot;lng&quot;;\r\n    public static final String FIELD_ZOOM = &quot;zom&quot;;\r\n    private static final String DATABASE_TABLE = &quot;locations&quot;;\r\n    private SQLiteDatabase mDB;\r\n\r\n    public LocationsDB(Context context) {\r\n        super(context, DBNAME, null, VERSION);\r\n        this.mDB = getWritableDatabase();\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(SQLiteDatabase db) {\r\n        String sql =     &quot;create table &quot; + DATABASE_TABLE + &quot; ( &quot; +\r\n                FIELD_ROW_ID + &quot; integer primary key autoincrement , &quot; +\r\n                FIELD_LNG + &quot; double , &quot; +\r\n                FIELD_LAT + &quot; double , &quot; +\r\n                FIELD_ZOOM + &quot; text &quot; +\r\n                &quot; ) &quot;;\r\n\r\n        db.execSQL(sql);\r\n    }\r\n\r\n    public long insert(ContentValues contentValues){\r\n        long rowID = mDB.insert(DATABASE_TABLE, null, contentValues);\r\n        return rowID;\r\n    }\r\n\r\n    public int del(){\r\n        int cnt = mDB.delete(DATABASE_TABLE, null , null);\r\n        return cnt;\r\n    }\r\n    \r\n    public Cursor getAllLocations(){\r\n        return mDB.query(DATABASE_TABLE, new String[] { FIELD_ROW_ID,  FIELD_LAT , FIELD_LNG, FIELD_ZOOM } , null, null, null, null, null);\r\n    }\r\n\r\n    @Override\r\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\r\n    }\r\n    }\r\n\r\nLocationsContentProvider\r\n\r\n    public class LocationsContentProvider extends ContentProvider{\r\n\r\n    public static final String PROVIDER_NAME = &quot;super.awesome.app.not.working.locations&quot;;\r\n    public static final Uri CONTENT_URI = Uri.parse(&quot;content://&quot; + PROVIDER_NAME + &quot;/locations&quot; );\r\n    private static final int LOCATIONS = 1;\r\n\r\n    private static final UriMatcher uriMatcher ;\r\n\r\n    static {\r\n        uriMatcher = new UriMatcher(UriMatcher.NO_MATCH);\r\n        uriMatcher.addURI(PROVIDER_NAME, &quot;locations&quot;, LOCATIONS);\r\n    }\r\n    \r\n    LocationsDB mLocationsDB;\r\n    @Override\r\n    public boolean onCreate() {\r\n        mLocationsDB = new LocationsDB(getContext());\r\n        return true;\r\n    }\r\n    \r\n    @Override\r\n    public Uri insert(Uri uri, ContentValues values) {\r\n        long rowID = mLocationsDB.insert(values);\r\n        Uri _uri=null;\r\n        if(rowID&gt;0){\r\n            _uri = ContentUris.withAppendedId(CONTENT_URI, rowID);\r\n        }else {\r\n            try {\r\n                throw new SQLException(&quot;Failed to insert : &quot; + uri);\r\n            } catch (SQLException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n        return _uri;\r\n    }\r\n\r\n    @Override\r\n    public int update(Uri uri, ContentValues values, String selection,\r\n                      String[] selectionArgs) {\r\n        // TODO Auto-generated method stub\r\n        return 0;\r\n    }\r\n    \r\n    @Override\r\n    public int delete(Uri uri, String selection, String[] selectionArgs) {\r\n        int cnt = 0;\r\n        cnt = mLocationsDB.del();\r\n        return cnt;\r\n    }\r\n    \r\n    @Override\r\n    public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {\r\n\r\n        if(uriMatcher.match(uri)==LOCATIONS){\r\n            return mLocationsDB.getAllLocations();\r\n        }\r\n        return null;\r\n    }\r\n    \r\n    @Override\r\n    public String getType(Uri uri) {\r\n        return null;\r\n    }\r\n    }\r\n\r\nAnd I have added this to the manifest file:\r\n\r\n    &lt;provider\r\n            android:name=&quot;LocationsContentProvider&quot;\r\n            android:authorities=&quot;super.awesome.app.not.working.locations&quot;\r\n            android:exported=&quot;false&quot; /&gt;\r\n\r\nAnd where the magic doesn&#39;t happen\r\n\r\n    public class InteractiveMapFragment extends Fragment {\r\n\r\n    MapView mMapView;\r\n    private GoogleMap googleMap;\r\n    private InteractiveMapViewModel InteractiveMapViewModel;\r\n    private FragmentInteractivemapBinding binding;\r\n\r\n    public View onCreateView(@NonNull LayoutInflater inflater,\r\n                             ViewGroup container, Bundle savedInstanceState) {\r\n        InteractiveMapViewModel =\r\n                new ViewModelProvider(this).get(InteractiveMapViewModel.class);\r\n\r\n        binding = FragmentInteractivemapBinding.inflate(inflater, container, false);\r\n        View root = binding.getRoot();\r\n\r\n        mMapView = (MapView) root.findViewById(R.id.mapView);\r\n        mMapView.onCreate(savedInstanceState);\r\n\r\n        mMapView.onResume(); // needed to get the map to display immediately\r\n\r\n        try {\r\n            MapsInitializer.initialize(getActivity().getApplicationContext());\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        mMapView.getMapAsync(new OnMapReadyCallback() {\r\n            @Override\r\n            public void onMapReady(GoogleMap mMap) {\r\n                googleMap = mMap;\r\n                LatLng myPoint = new LatLng(-24.9948, 31.5969);\r\n                googleMap.addMarker(new MarkerOptions().position(myPoint).title(&quot;Marker Title&quot;).snippet(&quot;Marker Description&quot;));\r\n\r\n                // For zooming automatically to the location of the marker\r\n                CameraPosition cameraPosition = new CameraPosition.Builder().target(myPoint).zoom(12).build();\r\n                googleMap.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));\r\n                googleMap.setOnMapLongClickListener(new GoogleMap.OnMapLongClickListener() {\r\n\r\n                    @Override\r\n                    public void onMapLongClick(LatLng latLng) {\r\n                        drawMarker(latLng);\r\n                        MarkerOptions markerOptions = new MarkerOptions();\r\n                        markerOptions.position(latLng);\r\n                        markerOptions.title(latLng.latitude + &quot; : &quot; + latLng.longitude);\r\n                        ContentValues contentValues = new ContentValues();\r\n                        contentValues.put(LocationsDB.FIELD_LAT, latLng.latitude );\r\n                        contentValues.put(LocationsDB.FIELD_LNG, latLng.longitude);\r\n                        contentValues.put(LocationsDB.FIELD_ZOOM, googleMap.getCameraPosition().zoom);\r\n                        LocationInsertTask insertTask = new LocationInsertTask();\r\n\r\n                        googleMap.animateCamera(CameraUpdateFactory.newLatLng(latLng));\r\n                        googleMap.addMarker(markerOptions);\r\n                    }\r\n                    class LocationInsertTask extends android.os.AsyncTask&lt;ContentValues, Void, Void&gt;\r\n                    {\r\n                        @Override\r\n                        protected Void doInBackground(ContentValues... contentValues) {\r\n\r\n                            /** Setting up values to insert the clicked location into SQLite database */\r\n                            getActivity().getContentResolver().insert(LocationsContentProvider.CONTENT_URI, contentValues[0]);\r\n                            return null;\r\n                        }\r\n                    }\r\n\r\n                    class LocationDeleteTask extends android.os.AsyncTask&lt;Void, Void, Void&gt;\r\n                    {\r\n                        @Override\r\n                        protected Void doInBackground(Void... params)\r\n                        {\r\n\r\n                            /** Deleting all the locations stored in SQLite database */\r\n                            getActivity().getContentResolver().delete(LocationsContentProvider.CONTENT_URI, null, null);\r\n                            return null;\r\n                        }\r\n                    }\r\n                    private void drawMarker(LatLng latLng){\r\n                        MarkerOptions markerOptions = new MarkerOptions();\r\n                        markerOptions.position(latLng);\r\n                        googleMap.addMarker(markerOptions);\r\n                    }\r\n\r\n                    public Loader&lt;Cursor&gt; onCreateLoader(int arg0, Bundle arg1)\r\n                    {\r\n                        Uri uri = LocationsContentProvider.CONTENT_URI;\r\n                        return new CursorLoader(getActivity(), uri, null, null, null, null);\r\n\r\n                    }\r\n                    public void onLoadFinished(Loader&lt;Cursor&gt; arg0, Cursor arg1)\r\n                    {\r\n                        int locationCount = 0;\r\n                        double lat=0;\r\n                        double lng=0;\r\n                        float zoom=0;\r\n                        locationCount = arg1.getCount();\r\n                        arg1.moveToFirst();\r\n\r\n                        for(int i=0;i&lt;locationCount;i++)\r\n                        {\r\n                            lat = arg1.getDouble(arg1.getColumnIndex(LocationsDB.FIELD_LAT));\r\n                            lng = arg1.getDouble(arg1.getColumnIndex(LocationsDB.FIELD_LNG));\r\n                            zoom = arg1.getFloat(arg1.getColumnIndex(LocationsDB.FIELD_ZOOM));\r\n\r\n                            LatLng location = new LatLng(lat, lng);\r\n                            drawMarker(location);\r\n                            arg1.moveToNext();\r\n                        }\r\n\r\n                        if(locationCount&gt;0)\r\n                        {\r\n                            googleMap.moveCamera(CameraUpdateFactory.newLatLng(new LatLng(lat,lng)));\r\n                            googleMap.animateCamera(CameraUpdateFactory.zoomTo(zoom));\r\n                        }\r\n                    }\r\n\r\n                    public void onLoaderReset(Loader&lt;Cursor&gt; arg0)\r\n                    {\r\n                        // TODO Auto-generated method stub\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        return root;\r\n    }\r\n\r\n    @Override\r\n    public void onDestroyView() {\r\n        super.onDestroyView();\r\n        binding = null;\r\n    }\r\n}\r\n\r\nIn the long run I will add the ability to save images, additional text and all those wonderful things, but at the moment I just need this to save the above to the SQLite database which clearly isn&#39;t working. :-(\r\n\r\nWhat am I missing here or doing completely wrong?\r\n\r\nThanks","title":"How to save custom markers to SQLite Database in Android","body":"<p>Okay, so I am completely at a loss here!  What I am trying to do is to save the marker (or point) tapped on the map using <code>onMapLongClick</code>.  This works but only half way.</p>\n<p>What works is the user &quot;Long press&quot; on the map and it then displays the default map marker icon - Great!</p>\n<p>What doesn't work is it doesn't save it to the SQLite database - not so great (or it is saving but not displaying when the map loads again ?)</p>\n<p>The reason I think it is not loading is that i get the following error <code>Value must be ≥ 0</code> by the following lines of code:</p>\n<pre><code>(arg1.getColumnIndex(LocationsDB.FIELD_LAT));\n(arg1.getColumnIndex(LocationsDB.FIELD_LNG));\n(arg1.getColumnIndex(LocationsDB.FIELD_ZOOM));\n</code></pre>\n<p>The app surprisingly still runs and works up until the point it needs to save the info to the database :-)</p>\n<p>Now for the code:</p>\n<p>LocationsDB</p>\n<pre><code>public class LocationsDB extends SQLiteOpenHelper{\n\nprivate static String DBNAME = &quot;locationmarkersqlite&quot;;\nprivate static int VERSION = 1;\npublic static final String FIELD_ROW_ID = &quot;_id&quot;;\npublic static final String FIELD_LAT = &quot;lat&quot;;\npublic static final String FIELD_LNG = &quot;lng&quot;;\npublic static final String FIELD_ZOOM = &quot;zom&quot;;\nprivate static final String DATABASE_TABLE = &quot;locations&quot;;\nprivate SQLiteDatabase mDB;\n\npublic LocationsDB(Context context) {\n    super(context, DBNAME, null, VERSION);\n    this.mDB = getWritableDatabase();\n}\n\n@Override\npublic void onCreate(SQLiteDatabase db) {\n    String sql =     &quot;create table &quot; + DATABASE_TABLE + &quot; ( &quot; +\n            FIELD_ROW_ID + &quot; integer primary key autoincrement , &quot; +\n            FIELD_LNG + &quot; double , &quot; +\n            FIELD_LAT + &quot; double , &quot; +\n            FIELD_ZOOM + &quot; text &quot; +\n            &quot; ) &quot;;\n\n    db.execSQL(sql);\n}\n\npublic long insert(ContentValues contentValues){\n    long rowID = mDB.insert(DATABASE_TABLE, null, contentValues);\n    return rowID;\n}\n\npublic int del(){\n    int cnt = mDB.delete(DATABASE_TABLE, null , null);\n    return cnt;\n}\n\npublic Cursor getAllLocations(){\n    return mDB.query(DATABASE_TABLE, new String[] { FIELD_ROW_ID,  FIELD_LAT , FIELD_LNG, FIELD_ZOOM } , null, null, null, null, null);\n}\n\n@Override\npublic void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n}\n}\n</code></pre>\n<p>LocationsContentProvider</p>\n<pre><code>public class LocationsContentProvider extends ContentProvider{\n\npublic static final String PROVIDER_NAME = &quot;super.awesome.app.not.working.locations&quot;;\npublic static final Uri CONTENT_URI = Uri.parse(&quot;content://&quot; + PROVIDER_NAME + &quot;/locations&quot; );\nprivate static final int LOCATIONS = 1;\n\nprivate static final UriMatcher uriMatcher ;\n\nstatic {\n    uriMatcher = new UriMatcher(UriMatcher.NO_MATCH);\n    uriMatcher.addURI(PROVIDER_NAME, &quot;locations&quot;, LOCATIONS);\n}\n\nLocationsDB mLocationsDB;\n@Override\npublic boolean onCreate() {\n    mLocationsDB = new LocationsDB(getContext());\n    return true;\n}\n\n@Override\npublic Uri insert(Uri uri, ContentValues values) {\n    long rowID = mLocationsDB.insert(values);\n    Uri _uri=null;\n    if(rowID&gt;0){\n        _uri = ContentUris.withAppendedId(CONTENT_URI, rowID);\n    }else {\n        try {\n            throw new SQLException(&quot;Failed to insert : &quot; + uri);\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n    }\n    return _uri;\n}\n\n@Override\npublic int update(Uri uri, ContentValues values, String selection,\n                  String[] selectionArgs) {\n    // TODO Auto-generated method stub\n    return 0;\n}\n\n@Override\npublic int delete(Uri uri, String selection, String[] selectionArgs) {\n    int cnt = 0;\n    cnt = mLocationsDB.del();\n    return cnt;\n}\n\n@Override\npublic Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {\n\n    if(uriMatcher.match(uri)==LOCATIONS){\n        return mLocationsDB.getAllLocations();\n    }\n    return null;\n}\n\n@Override\npublic String getType(Uri uri) {\n    return null;\n}\n}\n</code></pre>\n<p>And I have added this to the manifest file:</p>\n<pre><code>&lt;provider\n        android:name=&quot;LocationsContentProvider&quot;\n        android:authorities=&quot;super.awesome.app.not.working.locations&quot;\n        android:exported=&quot;false&quot; /&gt;\n</code></pre>\n<p>And where the magic doesn't happen</p>\n<pre><code>public class InteractiveMapFragment extends Fragment {\n\nMapView mMapView;\nprivate GoogleMap googleMap;\nprivate InteractiveMapViewModel InteractiveMapViewModel;\nprivate FragmentInteractivemapBinding binding;\n\npublic View onCreateView(@NonNull LayoutInflater inflater,\n                         ViewGroup container, Bundle savedInstanceState) {\n    InteractiveMapViewModel =\n            new ViewModelProvider(this).get(InteractiveMapViewModel.class);\n\n    binding = FragmentInteractivemapBinding.inflate(inflater, container, false);\n    View root = binding.getRoot();\n\n    mMapView = (MapView) root.findViewById(R.id.mapView);\n    mMapView.onCreate(savedInstanceState);\n\n    mMapView.onResume(); // needed to get the map to display immediately\n\n    try {\n        MapsInitializer.initialize(getActivity().getApplicationContext());\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n\n    mMapView.getMapAsync(new OnMapReadyCallback() {\n        @Override\n        public void onMapReady(GoogleMap mMap) {\n            googleMap = mMap;\n            LatLng myPoint = new LatLng(-24.9948, 31.5969);\n            googleMap.addMarker(new MarkerOptions().position(myPoint).title(&quot;Marker Title&quot;).snippet(&quot;Marker Description&quot;));\n\n            // For zooming automatically to the location of the marker\n            CameraPosition cameraPosition = new CameraPosition.Builder().target(myPoint).zoom(12).build();\n            googleMap.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));\n            googleMap.setOnMapLongClickListener(new GoogleMap.OnMapLongClickListener() {\n\n                @Override\n                public void onMapLongClick(LatLng latLng) {\n                    drawMarker(latLng);\n                    MarkerOptions markerOptions = new MarkerOptions();\n                    markerOptions.position(latLng);\n                    markerOptions.title(latLng.latitude + &quot; : &quot; + latLng.longitude);\n                    ContentValues contentValues = new ContentValues();\n                    contentValues.put(LocationsDB.FIELD_LAT, latLng.latitude );\n                    contentValues.put(LocationsDB.FIELD_LNG, latLng.longitude);\n                    contentValues.put(LocationsDB.FIELD_ZOOM, googleMap.getCameraPosition().zoom);\n                    LocationInsertTask insertTask = new LocationInsertTask();\n\n                    googleMap.animateCamera(CameraUpdateFactory.newLatLng(latLng));\n                    googleMap.addMarker(markerOptions);\n                }\n                class LocationInsertTask extends android.os.AsyncTask&lt;ContentValues, Void, Void&gt;\n                {\n                    @Override\n                    protected Void doInBackground(ContentValues... contentValues) {\n\n                        /** Setting up values to insert the clicked location into SQLite database */\n                        getActivity().getContentResolver().insert(LocationsContentProvider.CONTENT_URI, contentValues[0]);\n                        return null;\n                    }\n                }\n\n                class LocationDeleteTask extends android.os.AsyncTask&lt;Void, Void, Void&gt;\n                {\n                    @Override\n                    protected Void doInBackground(Void... params)\n                    {\n\n                        /** Deleting all the locations stored in SQLite database */\n                        getActivity().getContentResolver().delete(LocationsContentProvider.CONTENT_URI, null, null);\n                        return null;\n                    }\n                }\n                private void drawMarker(LatLng latLng){\n                    MarkerOptions markerOptions = new MarkerOptions();\n                    markerOptions.position(latLng);\n                    googleMap.addMarker(markerOptions);\n                }\n\n                public Loader&lt;Cursor&gt; onCreateLoader(int arg0, Bundle arg1)\n                {\n                    Uri uri = LocationsContentProvider.CONTENT_URI;\n                    return new CursorLoader(getActivity(), uri, null, null, null, null);\n\n                }\n                public void onLoadFinished(Loader&lt;Cursor&gt; arg0, Cursor arg1)\n                {\n                    int locationCount = 0;\n                    double lat=0;\n                    double lng=0;\n                    float zoom=0;\n                    locationCount = arg1.getCount();\n                    arg1.moveToFirst();\n\n                    for(int i=0;i&lt;locationCount;i++)\n                    {\n                        lat = arg1.getDouble(arg1.getColumnIndex(LocationsDB.FIELD_LAT));\n                        lng = arg1.getDouble(arg1.getColumnIndex(LocationsDB.FIELD_LNG));\n                        zoom = arg1.getFloat(arg1.getColumnIndex(LocationsDB.FIELD_ZOOM));\n\n                        LatLng location = new LatLng(lat, lng);\n                        drawMarker(location);\n                        arg1.moveToNext();\n                    }\n\n                    if(locationCount&gt;0)\n                    {\n                        googleMap.moveCamera(CameraUpdateFactory.newLatLng(new LatLng(lat,lng)));\n                        googleMap.animateCamera(CameraUpdateFactory.zoomTo(zoom));\n                    }\n                }\n\n                public void onLoaderReset(Loader&lt;Cursor&gt; arg0)\n                {\n                    // TODO Auto-generated method stub\n                }\n            });\n        }\n    });\n    return root;\n}\n\n@Override\npublic void onDestroyView() {\n    super.onDestroyView();\n    binding = null;\n}\n</code></pre>\n<p>}</p>\n<p>In the long run I will add the ability to save images, additional text and all those wonderful things, but at the moment I just need this to save the above to the SQLite database which clearly isn't working. :-(</p>\n<p>What am I missing here or doing completely wrong?</p>\n<p>Thanks</p>\n"},{"tags":["java","javassist","bytecode-manipulation"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1636011793,"post_id":69831536,"comment_id":123445221,"body_markdown":"1) your `readField` method is declared `void` instead having an appropriate return type. 2) fields can be `static`. Then, there is no object to pass to the method. 3) The semantics of `o.getClass().getField(fname)` are different to the semantics of a field access. Due to inheritance, classes may have multiple fields with the same name and not every field is `public`. The compiler uses the compile-time type of the reference, rather than the runtime type of the object.","body":"1) your <code>readField</code> method is declared <code>void</code> instead having an appropriate return type. 2) fields can be <code>static</code>. Then, there is no object to pass to the method. 3) The semantics of <code>o.getClass().getField(fname)</code> are different to the semantics of a field access. Due to inheritance, classes may have multiple fields with the same name and not every field is <code>public</code>. The compiler uses the compile-time type of the reference, rather than the runtime type of the object."},{"owner":{"account_id":12277276,"reputation":21,"user_id":11075184,"display_name":"Davide Rusconi"},"score":0,"creation_date":1636017975,"post_id":69831536,"comment_id":123447443,"body_markdown":"The error was cause by the `if(f.isStatic())` because I wanted exactly the opposite behaviour (i.e. to trigger only on instance fields), but thank you for pointing out the other mistakes.","body":"The error was cause by the <code>if(f.isStatic())</code> because I wanted exactly the opposite behaviour (i.e. to trigger only on instance fields), but thank you for pointing out the other mistakes."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1636018181,"post_id":69831536,"comment_id":123447519,"body_markdown":"The other problems are still applying. There’s also the issue of datatypes. I don’t know if Javassist allows conversions from `Object` to the expect field’s type without a cast, but as far as I know, it doesn’t support autoboxing, so at least conversions from or to primitive types must be done manually.","body":"The other problems are still applying. There’s also the issue of datatypes. I don’t know if Javassist allows conversions from <code>Object</code> to the expect field’s type without a cast, but as far as I know, it doesn’t support autoboxing, so at least conversions from or to primitive types must be done manually."},{"owner":{"account_id":12277276,"reputation":21,"user_id":11075184,"display_name":"Davide Rusconi"},"score":0,"creation_date":1636022186,"post_id":69831536,"comment_id":123448996,"body_markdown":"Yes I solved both the casting and boxing by explicitly adding the cast and the unboxing in the replace.","body":"Yes I solved both the casting and boxing by explicitly adding the cast and the unboxing in the replace."}],"owner":{"account_id":12277276,"reputation":21,"user_id":11075184,"display_name":"Davide Rusconi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":169,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1635972451,"creation_date":1635972451,"question_id":69831536,"body_markdown":"Hi I&#39;m trying to use javassist to redirect all field accesses to a method of the object the field belongs to.\r\n\r\nAs of now I&#39;ve written the following\r\n```java\r\n private void prepareClass(CtClass clazz) throws CannotCompileException {\r\n        CtMethod read =\r\n                CtNewMethod.make(&quot;public void readField(Object o, String fname){ return o.getClass().getField(fname).get(o);}&quot;,clazz);\r\n\r\n        CtMethod write =\r\n                CtNewMethod.make(&quot;public void writeField(Object o, String fname,Object val){  o.getClass().getField(fname).set(o,val);}&quot;,clazz);\r\n\r\n        clazz.addMethod(read);\r\n        clazz.addMethod(write);\r\n\r\n        for (CtMethod m: clazz.getDeclaredMethods()) {\r\n            CodeConverter c = new CodeConverter();\r\n            m.instrument(new ExprEditor(){\r\n                @Override\r\n                public void edit(FieldAccess f) throws CannotCompileException {\r\n                    String name = f.getFieldName();\r\n                    if(f.isStatic())\r\n                        if(f.isReader())\r\n                            f.replace(&quot;$_ = $0.readField($0,\\&quot;&quot; + name + &quot;\\&quot;);&quot;);\r\n                        else\r\n                            f.replace(&quot;$0.writeField($0,\\&quot;&quot; + name + &quot;\\&quot;,$1);&quot;);\r\n                }\r\n            });\r\n        }\r\n    }\r\n```\r\n\r\nBut it crashes with the following error\r\n```\r\njavassist.CannotCompileException: [source error] readField(java.lang.System,java.lang.String) not found in java.lang.System\r\n```\r\n\r\nAs far as I understand is because `$0` is not referring to the actual object but to a System object. \r\n\r\nI&#39;ve both the tutorial and the documentation but I haven&#39;t found a way to refer to the effective object the field belongs to.\r\n\r\nDoes anyone of you know how to achieve the desired behaviour?","title":"Javassist, redirecting field access to object method","body":"<p>Hi I'm trying to use javassist to redirect all field accesses to a method of the object the field belongs to.</p>\n<p>As of now I've written the following</p>\n<pre class=\"lang-java prettyprint-override\"><code> private void prepareClass(CtClass clazz) throws CannotCompileException {\n        CtMethod read =\n                CtNewMethod.make(&quot;public void readField(Object o, String fname){ return o.getClass().getField(fname).get(o);}&quot;,clazz);\n\n        CtMethod write =\n                CtNewMethod.make(&quot;public void writeField(Object o, String fname,Object val){  o.getClass().getField(fname).set(o,val);}&quot;,clazz);\n\n        clazz.addMethod(read);\n        clazz.addMethod(write);\n\n        for (CtMethod m: clazz.getDeclaredMethods()) {\n            CodeConverter c = new CodeConverter();\n            m.instrument(new ExprEditor(){\n                @Override\n                public void edit(FieldAccess f) throws CannotCompileException {\n                    String name = f.getFieldName();\n                    if(f.isStatic())\n                        if(f.isReader())\n                            f.replace(&quot;$_ = $0.readField($0,\\&quot;&quot; + name + &quot;\\&quot;);&quot;);\n                        else\n                            f.replace(&quot;$0.writeField($0,\\&quot;&quot; + name + &quot;\\&quot;,$1);&quot;);\n                }\n            });\n        }\n    }\n</code></pre>\n<p>But it crashes with the following error</p>\n<pre><code>javassist.CannotCompileException: [source error] readField(java.lang.System,java.lang.String) not found in java.lang.System\n</code></pre>\n<p>As far as I understand is because <code>$0</code> is not referring to the actual object but to a System object.</p>\n<p>I've both the tutorial and the documentation but I haven't found a way to refer to the effective object the field belongs to.</p>\n<p>Does anyone of you know how to achieve the desired behaviour?</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":4,"creation_date":1635797361,"post_id":69802263,"comment_id":123384567,"body_markdown":"If methods are `synchronized`, they synchronize over the `this` object. Thus, it is guaranteed that at one point in time on one object at most one thread is executing either  `produce` or `consume`.","body":"If methods are <code>synchronized</code>, they synchronize over the <code>this</code> object. Thus, it is guaranteed that at one point in time on one object at most one thread is executing either  <code>produce</code> or <code>consume</code>."},{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1635797362,"post_id":69802263,"comment_id":123384569,"body_markdown":"What exactly do you mean by &quot;locks method&quot;?","body":"What exactly do you mean by &quot;locks method&quot;?"},{"owner":{"account_id":373862,"reputation":941,"user_id":9009404,"display_name":"Uprooted"},"score":0,"creation_date":1635797468,"post_id":69802263,"comment_id":123384607,"body_markdown":"I see, i thought each method has it&#39;s own lock, like critical section.","body":"I see, i thought each method has it&#39;s own lock, like critical section."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1635797679,"post_id":69802263,"comment_id":123384675,"body_markdown":"I don&#39;t think your methods are broken though, because `wait()` releases the lock and allows another thread to call either method.","body":"I don&#39;t think your methods are broken though, because <code>wait()</code> releases the lock and allows another thread to call either method."}],"answers":[{"tags":[],"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1635972159,"creation_date":1635797676,"answer_id":69802327,"question_id":69802263,"body_markdown":"[JLS, &#167;17.1][JLS] is quite explicit about the mechanism:\r\n\r\n&gt; ...\r\n&gt;\r\n&gt; A `synchronized` method ([&#167;8.4.3.6][JLS-8-4-3-6]) automatically performs a lock action when it is invoked; its body is not executed until the lock action has successfully completed. If the method is an instance method, it locks the monitor associated with the instance for which it was invoked (that is, the object that will be known as `this` during execution of the body of the method). If the method is `static`, it locks the monitor associated with the `Class` object that represents the class in which the method is defined. If execution of the method&#39;s body is ever completed, either normally or abruptly, an unlock action is automatically performed on that same monitor.\r\n&gt;\r\n&gt; ...\r\n\r\nThus, it is guaranteed that at one point in time on one object at most one thread is executing either  `produce(...)` or `consume()`. It is not possible that, at one point in time, one thread executes `produce(...)` on an object while another thread executes `consume()` on the same object.\r\n\r\nThe call to `wait()` in `consume()` releases the intrinsic lock and blocks execution. The call to `notify()` in `produce(...)` notifies one `wait()`ing thread (if any), so it can fight for the lock as soon as the lock is released by the current owner. Notice that a call to `notify()` does not release the intrinsic lock. It just wakes up a `wait()`ing thread. This can be made observable with the following code snippet:\r\n\r\n    class Ideone {\r\n      private static final Object lock = new Object();\r\n    \r\n      public static void main(String[] args) {\r\n        printWithThreadNamePrefix(&quot;Start&quot;);\r\n        Thread waiter = new Thread(Ideone::waiter);\r\n        waiter.start();\r\n    \r\n        // Give waiter some time to a) start and b) acquire the intrinsic lock\r\n        try {\r\n          Thread.sleep(500);\r\n        } catch (InterruptedException e) {\r\n        }\r\n    \r\n        final Thread notifier = new Thread(Ideone::notifier);\r\n        notifier.start();\r\n    \r\n        while (true) {\r\n          try {\r\n            waiter.join();\r\n            break;\r\n          } catch (InterruptedException e) {\r\n          }\r\n        }\r\n    \r\n        printWithThreadNamePrefix(&quot;End&quot;);\r\n      }\r\n    \r\n      private static void waiter() {\r\n        synchronized (lock) {\r\n          printWithThreadNamePrefix(&quot;Waiting...&quot;);\r\n          while (true) {\r\n            try {\r\n              lock.wait();\r\n              break;\r\n            } catch (InterruptedException e) {\r\n            }\r\n          }\r\n          printWithThreadNamePrefix(&quot;... done waiting&quot;);\r\n        }\r\n      }\r\n    \r\n      private static void printWithThreadNamePrefix(String msg) {\r\n        System.out.println(String.format(\r\n            &quot;%s: %s&quot;,\r\n            Thread.currentThread().getName(),\r\n            msg));\r\n      }\r\n    \r\n      private static void notifier() {\r\n        synchronized (lock) {\r\n          printWithThreadNamePrefix(&quot;notifying&quot;);\r\n          lock.notify();\r\n          while (true) {\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n[&lt;kbd&gt;Ideone demo&lt;/kbd&gt;][Ideone]\r\n\r\nThe program will never terminate. Although thread `two` calls `notify()`, it then enters an endless loop, never actually releasing the intrinsic lock. Thus, `one` never has a chance to acquire the intrinsic lock, and the program &quot;hangs&quot; (it is neither a deadlock, nor a livelock, it simply cannot proceed).\r\n\r\nThe things I recommend to change are:\r\n- declare `private List&lt;T&gt; buffer` additionally as `final`\r\n- call `notifyAll()` instead of `notify()` in order to wake all waiting threads (they will still execute sequentially, for details see [this question][questionSergey] by [Sergey Mikhanov][sergey] and its answers)\r\n\r\n[JLS]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.1\r\n[JLS-8-4-3-6]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.4.3.6\r\n[Ideone]: https://ideone.com/sAsGMU\r\n[questionSergey]: https://stackoverflow.com/questions/37026/java-notify-vs-notifyall-all-over-again\r\n[sergey]: https://stackoverflow.com/users/3894/sergey-mikhanov","title":"java, synchronized in two separate methods?","body":"<p><a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.1\" rel=\"nofollow noreferrer\">JLS, §17.1</a> is quite explicit about the mechanism:</p>\n<blockquote>\n<p>...</p>\n<p>A <code>synchronized</code> method (<a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.4.3.6\" rel=\"nofollow noreferrer\">§8.4.3.6</a>) automatically performs a lock action when it is invoked; its body is not executed until the lock action has successfully completed. If the method is an instance method, it locks the monitor associated with the instance for which it was invoked (that is, the object that will be known as <code>this</code> during execution of the body of the method). If the method is <code>static</code>, it locks the monitor associated with the <code>Class</code> object that represents the class in which the method is defined. If execution of the method's body is ever completed, either normally or abruptly, an unlock action is automatically performed on that same monitor.</p>\n<p>...</p>\n</blockquote>\n<p>Thus, it is guaranteed that at one point in time on one object at most one thread is executing either  <code>produce(...)</code> or <code>consume()</code>. It is not possible that, at one point in time, one thread executes <code>produce(...)</code> on an object while another thread executes <code>consume()</code> on the same object.</p>\n<p>The call to <code>wait()</code> in <code>consume()</code> releases the intrinsic lock and blocks execution. The call to <code>notify()</code> in <code>produce(...)</code> notifies one <code>wait()</code>ing thread (if any), so it can fight for the lock as soon as the lock is released by the current owner. Notice that a call to <code>notify()</code> does not release the intrinsic lock. It just wakes up a <code>wait()</code>ing thread. This can be made observable with the following code snippet:</p>\n<pre><code>class Ideone {\n  private static final Object lock = new Object();\n\n  public static void main(String[] args) {\n    printWithThreadNamePrefix(&quot;Start&quot;);\n    Thread waiter = new Thread(Ideone::waiter);\n    waiter.start();\n\n    // Give waiter some time to a) start and b) acquire the intrinsic lock\n    try {\n      Thread.sleep(500);\n    } catch (InterruptedException e) {\n    }\n\n    final Thread notifier = new Thread(Ideone::notifier);\n    notifier.start();\n\n    while (true) {\n      try {\n        waiter.join();\n        break;\n      } catch (InterruptedException e) {\n      }\n    }\n\n    printWithThreadNamePrefix(&quot;End&quot;);\n  }\n\n  private static void waiter() {\n    synchronized (lock) {\n      printWithThreadNamePrefix(&quot;Waiting...&quot;);\n      while (true) {\n        try {\n          lock.wait();\n          break;\n        } catch (InterruptedException e) {\n        }\n      }\n      printWithThreadNamePrefix(&quot;... done waiting&quot;);\n    }\n  }\n\n  private static void printWithThreadNamePrefix(String msg) {\n    System.out.println(String.format(\n        &quot;%s: %s&quot;,\n        Thread.currentThread().getName(),\n        msg));\n  }\n\n  private static void notifier() {\n    synchronized (lock) {\n      printWithThreadNamePrefix(&quot;notifying&quot;);\n      lock.notify();\n      while (true) {\n      }\n    }\n  }\n}\n</code></pre>\n<p><a href=\"https://ideone.com/sAsGMU\" rel=\"nofollow noreferrer\"><kbd>Ideone demo</kbd></a></p>\n<p>The program will never terminate. Although thread <code>two</code> calls <code>notify()</code>, it then enters an endless loop, never actually releasing the intrinsic lock. Thus, <code>one</code> never has a chance to acquire the intrinsic lock, and the program &quot;hangs&quot; (it is neither a deadlock, nor a livelock, it simply cannot proceed).</p>\n<p>The things I recommend to change are:</p>\n<ul>\n<li>declare <code>private List&lt;T&gt; buffer</code> additionally as <code>final</code></li>\n<li>call <code>notifyAll()</code> instead of <code>notify()</code> in order to wake all waiting threads (they will still execute sequentially, for details see <a href=\"https://stackoverflow.com/questions/37026/java-notify-vs-notifyall-all-over-again\">this question</a> by <a href=\"https://stackoverflow.com/users/3894/sergey-mikhanov\">Sergey Mikhanov</a> and its answers)</li>\n</ul>\n"}],"owner":{"account_id":373862,"reputation":941,"user_id":9009404,"display_name":"Uprooted"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":114,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":69802327,"answer_count":1,"score":0,"last_activity_date":1635972159,"creation_date":1635797271,"question_id":69802263,"body_markdown":"I&#39;m trying to create thread safe queue in java. I&#39;ve come across this example:\r\n\r\n```\r\nclass ProducerConsumer&lt;T&gt; {\r\n   private static final int BUFFER_MAX_SIZE = 42;\r\n   private List&lt;T&gt; buffer = new LinkedList&lt;&gt;();\r\n\r\n   synchronized void produce(T value) throws InterruptedException {\r\n      while (buffer.size() == BUFFER_MAX_SIZE) {\r\n         wait();\r\n      }\r\n      buffer.add(value);\r\n      notify();\r\n   }\r\n\r\n   synchronized T consume() throws InterruptedException {\r\n      while (buffer.size() == 0) {\r\n         wait();\r\n      }\r\n      T result = buffer.remove(0);\r\n      notify();\r\n      return result;\r\n   }\r\n}\r\n```\r\n\r\nI&#39;m new to java. In my understanding those two &#39;synchronized&#39; keywords would prevent contention inside each method, but not when both methods are called simultaneously. E.g. thread P calls produce, locks method, thread C calls consume, locks other method, then one tries to extract element from list, another tries to insert element, thread exception arises.\r\n\r\n**My question: Is this example broken?**\r\n\r\nOr maybe I&#39;m missing something and it&#39;s ok.","title":"java, synchronized in two separate methods?","body":"<p>I'm trying to create thread safe queue in java. I've come across this example:</p>\n<pre><code>class ProducerConsumer&lt;T&gt; {\n   private static final int BUFFER_MAX_SIZE = 42;\n   private List&lt;T&gt; buffer = new LinkedList&lt;&gt;();\n\n   synchronized void produce(T value) throws InterruptedException {\n      while (buffer.size() == BUFFER_MAX_SIZE) {\n         wait();\n      }\n      buffer.add(value);\n      notify();\n   }\n\n   synchronized T consume() throws InterruptedException {\n      while (buffer.size() == 0) {\n         wait();\n      }\n      T result = buffer.remove(0);\n      notify();\n      return result;\n   }\n}\n</code></pre>\n<p>I'm new to java. In my understanding those two 'synchronized' keywords would prevent contention inside each method, but not when both methods are called simultaneously. E.g. thread P calls produce, locks method, thread C calls consume, locks other method, then one tries to extract element from list, another tries to insert element, thread exception arises.</p>\n<p><strong>My question: Is this example broken?</strong></p>\n<p>Or maybe I'm missing something and it's ok.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":13862323,"reputation":1355,"user_id":10007682,"display_name":"Dylan"},"score":0,"creation_date":1550594576,"post_id":54771044,"comment_id":96322226,"body_markdown":"storesTotalCorrectAnswer should not affect whether a Toast will appear or not. If you can&#39;t get a Toast to appear, it would be for some other reason.","body":"storesTotalCorrectAnswer should not affect whether a Toast will appear or not. If you can&#39;t get a Toast to appear, it would be for some other reason."},{"owner":{"account_id":15179006,"reputation":57,"user_id":10952828,"display_name":"Wami ikechukwu"},"score":0,"creation_date":1550595231,"post_id":54771044,"comment_id":96322594,"body_markdown":"I decided to include the Toast when I noticed that the output wasn&#39;t displaying  Intended, so if the code was running fine the Toast would have displayed.","body":"I decided to include the Toast when I noticed that the output wasn&#39;t displaying  Intended, so if the code was running fine the Toast would have displayed."},{"owner":{"display_name":"user1531971"},"score":0,"creation_date":1550596771,"post_id":54771044,"comment_id":96323418,"body_markdown":"You need to debug your code, and SO is a terrible debugger! https://ericlippert.com/2014/03/05/how-to-debug-small-programs/","body":"You need to debug your code, and SO is a terrible debugger! <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"},{"owner":{"account_id":15179006,"reputation":57,"user_id":10952828,"display_name":"Wami ikechukwu"},"score":0,"creation_date":1550772080,"post_id":54771044,"comment_id":96403537,"body_markdown":"@jdv thanks i will read that up.","body":"@jdv thanks i will read that up."}],"answers":[{"tags":[],"owner":{"account_id":5821358,"reputation":1051,"user_id":4589334,"display_name":"Davi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550595246,"creation_date":1550595246,"answer_id":54771273,"question_id":54771044,"body_markdown":"I tried this and it is working fine, the only problem is on your if-statements. You said you want it 1 to 4, but the condition is checking &gt;0 and &lt;4 which means 1 to 3. Whenever the randomNumber is 4 it will not work, so change the `if (randomNumberCounter &lt; 4)` to `if (randomNumberCounter &lt;= 4)`.","title":"Incrementing a variable when the user gets the correct answer","body":"<p>I tried this and it is working fine, the only problem is on your if-statements. You said you want it 1 to 4, but the condition is checking >0 and &lt;4 which means 1 to 3. Whenever the randomNumber is 4 it will not work, so change the <code>if (randomNumberCounter &lt; 4)</code> to <code>if (randomNumberCounter &lt;= 4)</code>.</p>\n"},{"tags":[],"owner":{"account_id":9760856,"reputation":2964,"user_id":8313412,"display_name":"SilenceCodder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550604410,"creation_date":1550604410,"answer_id":54773589,"question_id":54771044,"body_markdown":"Firstly try to display your value using Logcat or\r\n\r\n`  if (answerA_ID.isChecked()) {\r\n        System.out.println(&quot;Right Answer&quot;);\r\n    }`  \r\n \r\n\r\n*If it&#39;s showing the answer then use this (++storesTotalCorrectAnswer) Instead of  this (storesTotalCorrectAnswer++)*","title":"Incrementing a variable when the user gets the correct answer","body":"<p>Firstly try to display your value using Logcat or</p>\n\n<p><code>if (answerA_ID.isChecked()) {\n        System.out.println(\"Right Answer\");\n    }</code>  </p>\n\n<p><em>If it's showing the answer then use this (++storesTotalCorrectAnswer) Instead of  this (storesTotalCorrectAnswer++)</em></p>\n"}],"owner":{"account_id":15179006,"reputation":57,"user_id":10952828,"display_name":"Wami ikechukwu"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1635971975,"creation_date":1550594392,"question_id":54771044,"body_markdown":"I am facing a problem / serious bug, which I can&#39;t seem to resolve on my own, though I am still building the app, I want the app to increment the variable `storesTotalCorrectAnswer` whenever the user checked the radio button (that contains the correct answer) but I thought it was working until I starting noticing that the scores were not accurate, so I added a toast message and the toast message isn&#39;t displaying on the app, so I knew that the `storesTotalCorrectAnswer` variable isn&#39;t working as intended.\r\n\r\nPlease - how do I solve this bug?\r\n\r\nWhat I want to achieve is to increment the `storesTotalCorrectAnswer` when the user check the radio button that contains the correct answer.\r\n\r\nI have tried various ways including using an `if` statement on almost everywhere in the code but now seems to be working \r\n\r\n     com.myafrica.africaquiz;\r\n\r\n    import android.content.Intent;\r\n    import android.os.Bundle;\r\n    import android.support.v7.app.AppCompatActivity;\r\n    import android.view.View;\r\n    import android.widget.RadioButton;\r\n    import android.widget.RadioGroup;\r\n    import android.widget.TextView;\r\n    import android.widget.Toast;\r\n\r\n    import java.util.Random;\r\n\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n    //this variable stores the total number of correct answers\r\n    int storesTotalCorrectAnswer = 0;\r\n\r\n    //this variable counts the total number of randomQuestions asked\r\n    int randomNumberCounter = 0;\r\n\r\n    //this variable stores the random numbers generated\r\n    int randomNumber = 0;\r\n\r\n\r\n    //this variables stores the views for public access to other methods\r\n    TextView testQuestionID;\r\n\r\n    RadioButton answerA_ID;\r\n    RadioButton answerB_ID;\r\n    RadioButton answerC_ID;\r\n    RadioButton answerD_ID;\r\n\r\n    RadioGroup radioGroup_ID;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        //get the text view and stores it in this variable\r\n        testQuestionID = findViewById(R.id.testQuestion);\r\n\r\n        //get the radio button view and stores it in this variable\r\n        answerA_ID = findViewById(R.id.answerA);\r\n        answerB_ID = findViewById(R.id.answerB);\r\n        answerC_ID = findViewById(R.id.answerC);\r\n        answerD_ID = findViewById(R.id.answerD);\r\n\r\n        //get the radio group ID and stores it for future reference\r\n        radioGroup_ID = findViewById(R.id.radioGroup_ID);\r\n\r\n       }\r\n\r\n    //When the onclicked() is clicked this method runs\r\n    public void GetNextQuestion(View view) {\r\n\r\n        randomNumberGenerator();\r\n\r\n        //just to know when the onClicks runs\r\n        Toast.makeText(MainActivity.this, &quot;NEXT  is clicked&quot;, Toast.LENGTH_LONG).show();\r\n\r\n    }\r\n\r\n    //the random number generator method\r\n    public void randomNumberGenerator() {\r\n\r\n        //the random number generator\r\n        Random ranNum = new Random();\r\n        randomNumber = ranNum.nextInt(4) + 1;\r\n\r\n        //to stop the questions from displaying once the required number is reached\r\n        if (randomNumberCounter &lt; 4) {\r\n\r\n            //to know how many times the random method has been called\r\n            while (randomNumber &gt; 0) {\r\n                randomNumberCounter++;\r\n\r\n                switch (randomNumber) {\r\n\r\n                    /* When the randomNumber is generated (number from 1 to 4)\r\n                     * it matches the case and displays the required question */\r\n\r\n                    case 1:\r\n                        question1();\r\n                        break;\r\n\r\n                    case 2:\r\n                        question2();\r\n                        break;\r\n\r\n                    case 3:\r\n                        question3();\r\n                        break;\r\n\r\n                    case 4:\r\n                        question4();\r\n                        break;\r\n                }\r\n\r\n                break;\r\n\r\n            }\r\n        }\r\n\r\n        // shows a next layout after the question stops showing\r\n        else {\r\n            Intent secondActivity = new Intent(this, Main2Activity.class);\r\n            secondActivity.putExtra(&quot;secondActivity&quot;, &quot;&quot; + storesTotalCorrectAnswer);\r\n            startActivity(secondActivity);\r\n        }\r\n    }\r\n\r\n\r\n    /*\r\n     * This part of the code will contain the questions and answer part of the quiz app.\r\n     * Each question and answer is a method that will called when the Next button is clicked in the app.\r\n     * When the button is clicked the setText() will automatically (re)set the text in the text layout in the XML\r\n     */\r\n\r\n    public void question1() {\r\n        testQuestionID.setText(&quot;Which part of Africa can Ghana be located&quot;);\r\n        answerA_ID.setText(&quot; A: West Africa&quot;);\r\n        answerB_ID.setText(&quot; B: East Africa&quot;);\r\n        answerC_ID.setText(&quot; C: Central Africa&quot;);\r\n        answerD_ID.setText(&quot; D: North Africa&quot;);\r\n\r\n        //wanted to increment the storesTotalCorrectAnswer when the correct radio button is clicked and displayed a toast message\r\n\r\n        if (answerA_ID.isChecked()) {\r\n            storesTotalCorrectAnswer++;\r\n            Toast.makeText(MainActivity.this, &quot;Question 1 Answer is clicked&quot;, Toast.LENGTH_LONG).show();\r\n        }\r\n\r\n        radioGroup_ID.clearCheck();\r\n\r\n    }\r\n\r\n    public void question2() {\r\n        testQuestionID.setText(&quot;What is the capital of Nigeria&quot;);\r\n        answerA_ID.setText(&quot; A: Abuja&quot;);\r\n        answerB_ID.setText(&quot; B: Kano&quot;);\r\n        answerC_ID.setText(&quot; C: Lagos&quot;);\r\n        answerD_ID.setText(&quot; D: Port Harourt&quot;);\r\n\r\n        //wanted to increment the storesTotalCorrectAnswer when the correct radio button is clicked and displayed a toast message\r\n\r\n        if (answerA_ID.isChecked()) {\r\n            storesTotalCorrectAnswer++;\r\n            Toast.makeText(MainActivity.this, &quot;Question 2 Answer is clicked&quot;, Toast.LENGTH_LONG).show();\r\n        }\r\n\r\n        radioGroup_ID.clearCheck();\r\n    }\r\n\r\n    public void question3() {\r\n        Toast.makeText(MainActivity.this, &quot;Question 2 Answer is clicked&quot;, Toast.LENGTH_LONG).show();\r\n        testQuestionID.setText(&quot;Which of these countries are not located in Africa&quot;);\r\n        answerA_ID.setText(&quot; A: Niger&quot;);\r\n        answerB_ID.setText(&quot; B: Nigeria&quot;);\r\n        answerC_ID.setText(&quot; C: Rwanda&quot;);\r\n        answerD_ID.setText(&quot; D: Non of the Above&quot;);\r\n\r\n        //wanted to increment the storesTotalCorrectAnswer when the correct radio button is clicked and displayed a toast message\r\n\r\n        if (answerD_ID.isChecked()) {\r\n            storesTotalCorrectAnswer++;\r\n            Toast.makeText(MainActivity.this, &quot;Question 3  Answer is clicked&quot;, Toast.LENGTH_LONG).show();\r\n        }\r\n\r\n        radioGroup_ID.clearCheck();\r\n    }\r\n\r\n    public void question4() {\r\n        Toast.makeText(MainActivity.this, &quot;Question 2 Answer is clicked&quot;, Toast.LENGTH_LONG).show();\r\n        testQuestionID.setText(&quot;What is the estimated population of Africa, as at 2015&quot;);\r\n        answerA_ID.setText(&quot; A: 1.2 Billion&quot;);\r\n        answerB_ID.setText(&quot; B: 500 Billion&quot;);\r\n        answerC_ID.setText(&quot; C: 2 Billion&quot;);\r\n        answerD_ID.setText(&quot; D: 360 million&quot;);\r\n\r\n        //wanted to increment the storesTotalCorrectAnswer when the correct radio button is clicked and displayed a toast message\r\n\r\n        if (answerA_ID.isChecked()) {\r\n            storesTotalCorrectAnswer++;\r\n            Toast.makeText(MainActivity.this, &quot;Question 4  is clicked&quot;, Toast.LENGTH_LONG).show();\r\n        }\r\n\r\n        radioGroup_ID.clearCheck();\r\n    }\r\n\r\n    /* END OF CODE */\r\n    }\r\n\r\n","title":"Incrementing a variable when the user gets the correct answer","body":"<p>I am facing a problem / serious bug, which I can't seem to resolve on my own, though I am still building the app, I want the app to increment the variable <code>storesTotalCorrectAnswer</code> whenever the user checked the radio button (that contains the correct answer) but I thought it was working until I starting noticing that the scores were not accurate, so I added a toast message and the toast message isn't displaying on the app, so I knew that the <code>storesTotalCorrectAnswer</code> variable isn't working as intended.</p>\n<p>Please - how do I solve this bug?</p>\n<p>What I want to achieve is to increment the <code>storesTotalCorrectAnswer</code> when the user check the radio button that contains the correct answer.</p>\n<p>I have tried various ways including using an <code>if</code> statement on almost everywhere in the code but now seems to be working</p>\n<pre><code> com.myafrica.africaquiz;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.support.v7.app.AppCompatActivity;\nimport android.view.View;\nimport android.widget.RadioButton;\nimport android.widget.RadioGroup;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport java.util.Random;\n\n\npublic class MainActivity extends AppCompatActivity {\n\n//this variable stores the total number of correct answers\nint storesTotalCorrectAnswer = 0;\n\n//this variable counts the total number of randomQuestions asked\nint randomNumberCounter = 0;\n\n//this variable stores the random numbers generated\nint randomNumber = 0;\n\n\n//this variables stores the views for public access to other methods\nTextView testQuestionID;\n\nRadioButton answerA_ID;\nRadioButton answerB_ID;\nRadioButton answerC_ID;\nRadioButton answerD_ID;\n\nRadioGroup radioGroup_ID;\n\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    //get the text view and stores it in this variable\n    testQuestionID = findViewById(R.id.testQuestion);\n\n    //get the radio button view and stores it in this variable\n    answerA_ID = findViewById(R.id.answerA);\n    answerB_ID = findViewById(R.id.answerB);\n    answerC_ID = findViewById(R.id.answerC);\n    answerD_ID = findViewById(R.id.answerD);\n\n    //get the radio group ID and stores it for future reference\n    radioGroup_ID = findViewById(R.id.radioGroup_ID);\n\n   }\n\n//When the onclicked() is clicked this method runs\npublic void GetNextQuestion(View view) {\n\n    randomNumberGenerator();\n\n    //just to know when the onClicks runs\n    Toast.makeText(MainActivity.this, &quot;NEXT  is clicked&quot;, Toast.LENGTH_LONG).show();\n\n}\n\n//the random number generator method\npublic void randomNumberGenerator() {\n\n    //the random number generator\n    Random ranNum = new Random();\n    randomNumber = ranNum.nextInt(4) + 1;\n\n    //to stop the questions from displaying once the required number is reached\n    if (randomNumberCounter &lt; 4) {\n\n        //to know how many times the random method has been called\n        while (randomNumber &gt; 0) {\n            randomNumberCounter++;\n\n            switch (randomNumber) {\n\n                /* When the randomNumber is generated (number from 1 to 4)\n                 * it matches the case and displays the required question */\n\n                case 1:\n                    question1();\n                    break;\n\n                case 2:\n                    question2();\n                    break;\n\n                case 3:\n                    question3();\n                    break;\n\n                case 4:\n                    question4();\n                    break;\n            }\n\n            break;\n\n        }\n    }\n\n    // shows a next layout after the question stops showing\n    else {\n        Intent secondActivity = new Intent(this, Main2Activity.class);\n        secondActivity.putExtra(&quot;secondActivity&quot;, &quot;&quot; + storesTotalCorrectAnswer);\n        startActivity(secondActivity);\n    }\n}\n\n\n/*\n * This part of the code will contain the questions and answer part of the quiz app.\n * Each question and answer is a method that will called when the Next button is clicked in the app.\n * When the button is clicked the setText() will automatically (re)set the text in the text layout in the XML\n */\n\npublic void question1() {\n    testQuestionID.setText(&quot;Which part of Africa can Ghana be located&quot;);\n    answerA_ID.setText(&quot; A: West Africa&quot;);\n    answerB_ID.setText(&quot; B: East Africa&quot;);\n    answerC_ID.setText(&quot; C: Central Africa&quot;);\n    answerD_ID.setText(&quot; D: North Africa&quot;);\n\n    //wanted to increment the storesTotalCorrectAnswer when the correct radio button is clicked and displayed a toast message\n\n    if (answerA_ID.isChecked()) {\n        storesTotalCorrectAnswer++;\n        Toast.makeText(MainActivity.this, &quot;Question 1 Answer is clicked&quot;, Toast.LENGTH_LONG).show();\n    }\n\n    radioGroup_ID.clearCheck();\n\n}\n\npublic void question2() {\n    testQuestionID.setText(&quot;What is the capital of Nigeria&quot;);\n    answerA_ID.setText(&quot; A: Abuja&quot;);\n    answerB_ID.setText(&quot; B: Kano&quot;);\n    answerC_ID.setText(&quot; C: Lagos&quot;);\n    answerD_ID.setText(&quot; D: Port Harourt&quot;);\n\n    //wanted to increment the storesTotalCorrectAnswer when the correct radio button is clicked and displayed a toast message\n\n    if (answerA_ID.isChecked()) {\n        storesTotalCorrectAnswer++;\n        Toast.makeText(MainActivity.this, &quot;Question 2 Answer is clicked&quot;, Toast.LENGTH_LONG).show();\n    }\n\n    radioGroup_ID.clearCheck();\n}\n\npublic void question3() {\n    Toast.makeText(MainActivity.this, &quot;Question 2 Answer is clicked&quot;, Toast.LENGTH_LONG).show();\n    testQuestionID.setText(&quot;Which of these countries are not located in Africa&quot;);\n    answerA_ID.setText(&quot; A: Niger&quot;);\n    answerB_ID.setText(&quot; B: Nigeria&quot;);\n    answerC_ID.setText(&quot; C: Rwanda&quot;);\n    answerD_ID.setText(&quot; D: Non of the Above&quot;);\n\n    //wanted to increment the storesTotalCorrectAnswer when the correct radio button is clicked and displayed a toast message\n\n    if (answerD_ID.isChecked()) {\n        storesTotalCorrectAnswer++;\n        Toast.makeText(MainActivity.this, &quot;Question 3  Answer is clicked&quot;, Toast.LENGTH_LONG).show();\n    }\n\n    radioGroup_ID.clearCheck();\n}\n\npublic void question4() {\n    Toast.makeText(MainActivity.this, &quot;Question 2 Answer is clicked&quot;, Toast.LENGTH_LONG).show();\n    testQuestionID.setText(&quot;What is the estimated population of Africa, as at 2015&quot;);\n    answerA_ID.setText(&quot; A: 1.2 Billion&quot;);\n    answerB_ID.setText(&quot; B: 500 Billion&quot;);\n    answerC_ID.setText(&quot; C: 2 Billion&quot;);\n    answerD_ID.setText(&quot; D: 360 million&quot;);\n\n    //wanted to increment the storesTotalCorrectAnswer when the correct radio button is clicked and displayed a toast message\n\n    if (answerA_ID.isChecked()) {\n        storesTotalCorrectAnswer++;\n        Toast.makeText(MainActivity.this, &quot;Question 4  is clicked&quot;, Toast.LENGTH_LONG).show();\n    }\n\n    radioGroup_ID.clearCheck();\n}\n\n/* END OF CODE */\n}\n</code></pre>\n"},{"tags":["java","spring","forms","model-view-controller"],"comments":[{"owner":{"account_id":13399899,"reputation":708,"user_id":9784839,"display_name":"Mehedi Hasan Shifat"},"score":0,"creation_date":1636000950,"post_id":69831440,"comment_id":123443149,"body_markdown":"does on submit form hit your controller ?","body":"does on submit form hit your controller ?"},{"owner":{"account_id":13399899,"reputation":708,"user_id":9784839,"display_name":"Mehedi Hasan Shifat"},"score":0,"creation_date":1636001122,"post_id":69831440,"comment_id":123443176,"body_markdown":"You have declared `saveUpdateSpringFallPlanNumber` as param in controller but in html you haven&#39;t mention it.","body":"You have declared <code>saveUpdateSpringFallPlanNumber</code> as param in controller but in html you haven&#39;t mention it."}],"owner":{"account_id":23231810,"reputation":1,"user_id":17322422,"display_name":"chris"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1635971830,"creation_date":1635971830,"question_id":69831440,"body_markdown":"I cannot get the data on my edit form upon submission\r\n\r\nHere&#39;s my jsp/form\r\nI have an attribute but my data is a List&lt;FallPlanNumber&gt; coming from this &quot;${SPRING_FALL_PLAN_NUMBER_LIST}&quot;\r\n    \t \r\n\t\t&lt;form:form method=&quot;POST&quot; action=&quot;EditSpringFallPlanNumberActionForm&quot; \r\n\t\t         modelAttribute=&quot;EditSpringFallPlanNumberFormAttribute&quot;  role=&quot;form&quot;&gt;\t \r\n \r\n\t\t&lt;table border=1 cellspacing=0 cellpadding=3 align=&quot;left&quot; style=&quot;width: 25%&quot;&gt; \t\r\n\t\t   &lt;tr&gt;  \r\n\t\t      &lt;td class=&quot;responsive&quot; align=&quot;center&quot;&gt;&lt;b&gt;UID&lt;/b&gt;&lt;/td&gt;\r\n\t\t      &lt;td class=&quot;responsive&quot; align=&quot;center&quot;&gt;&lt;b&gt;Fall Plan Number&lt;/b&gt;&lt;/td&gt;\r\n\t\t      &lt;td class=&quot;responsive&quot; align=&quot;center&quot;&gt;&lt;b&gt;Spring Plan Number&lt;/b&gt;&lt;/td&gt;\r\n\t\t   &lt;/tr&gt;\t\t\r\n\t\t   &lt;c:forEach var=&quot;springFallPlanNumberValue&quot; items=&quot;${SPRING_FALL_PLAN_NUMBER_LIST}&quot;&gt;\t\t      \r\n\t\t    &lt;tr&gt;\r\n\t\t        &lt;td class=&quot;responsive&quot; align=&quot;center&quot;&gt;\r\n\t\t           &lt;input type=&quot;text&quot;  value=&quot;${springFallPlanNumberValue.UID}&quot; style=&quot;text-align:center;&quot;/&gt; \r\n\t\t        &lt;/td&gt;\r\n\t\t        &lt;td class=&quot;responsive&quot; align=&quot;center&quot;&gt;\r\n\t\t           &lt;input type=&quot;text&quot; value=&quot;${springFallPlanNumberValue.fallPlanNumber}&quot; style=&quot;text-align:center;&quot;/&gt; \r\n\t\t        &lt;/td&gt;\r\n\t\t        &lt;td class=&quot;responsive&quot; align=&quot;center&quot;&gt;\r\n\t\t          &lt;input type=&quot;text&quot;  value=&quot;${springFallPlanNumberValue.springPlanNumber}&quot; style=&quot;text-align:center;&quot;/&gt;  \r\n\t\t        &lt;/td&gt;\r\n\t\t     &lt;/tr&gt;\r\n\t\t   &lt;/c:forEach&gt; ....\r\n.............\r\n....\r\n\r\n\r\nAnd here&#39;s my controller\r\n\r\n        @RequestMapping(value = { &quot;/EditSpringFallPlanNumberActionForm&quot; }, method = RequestMethod.POST, params = { &quot;saveUpdateSpringFallPlanNumber&quot; })\r\n    public ModelAndView saveUpdateSpringFallPlanNumberConfigValues(\r\n    \t\t@ModelAttribute(&quot;EditSpringFallPlanNumberFormAttribute&quot;)  ArrayList&lt;FallSpringPlanNumber&gt; fallSpringPlanNumber,\r\n    \t\tHttpSession session, \r\n            HttpServletRequest request, \r\n\t\t\tModel model){......\r\n.......\r\n\r\nI&quot;m expecting the parameter &quot;ArrayList&lt;FallSpringPlanNumber&gt; fallSpringPlanNumber&quot; to have values and its coming from update form but it&#39;s empty on submit","title":"Edit Action Form To Controller","body":"<p>I cannot get the data on my edit form upon submission</p>\n<p>Here's my jsp/form\nI have an attribute but my data is a List coming from this &quot;${SPRING_FALL_PLAN_NUMBER_LIST}&quot;</p>\n<pre><code>    &lt;form:form method=&quot;POST&quot; action=&quot;EditSpringFallPlanNumberActionForm&quot; \n             modelAttribute=&quot;EditSpringFallPlanNumberFormAttribute&quot;  role=&quot;form&quot;&gt;    \n\n    &lt;table border=1 cellspacing=0 cellpadding=3 align=&quot;left&quot; style=&quot;width: 25%&quot;&gt;    \n       &lt;tr&gt;  \n          &lt;td class=&quot;responsive&quot; align=&quot;center&quot;&gt;&lt;b&gt;UID&lt;/b&gt;&lt;/td&gt;\n          &lt;td class=&quot;responsive&quot; align=&quot;center&quot;&gt;&lt;b&gt;Fall Plan Number&lt;/b&gt;&lt;/td&gt;\n          &lt;td class=&quot;responsive&quot; align=&quot;center&quot;&gt;&lt;b&gt;Spring Plan Number&lt;/b&gt;&lt;/td&gt;\n       &lt;/tr&gt;        \n       &lt;c:forEach var=&quot;springFallPlanNumberValue&quot; items=&quot;${SPRING_FALL_PLAN_NUMBER_LIST}&quot;&gt;            \n        &lt;tr&gt;\n            &lt;td class=&quot;responsive&quot; align=&quot;center&quot;&gt;\n               &lt;input type=&quot;text&quot;  value=&quot;${springFallPlanNumberValue.UID}&quot; style=&quot;text-align:center;&quot;/&gt; \n            &lt;/td&gt;\n            &lt;td class=&quot;responsive&quot; align=&quot;center&quot;&gt;\n               &lt;input type=&quot;text&quot; value=&quot;${springFallPlanNumberValue.fallPlanNumber}&quot; style=&quot;text-align:center;&quot;/&gt; \n            &lt;/td&gt;\n            &lt;td class=&quot;responsive&quot; align=&quot;center&quot;&gt;\n              &lt;input type=&quot;text&quot;  value=&quot;${springFallPlanNumberValue.springPlanNumber}&quot; style=&quot;text-align:center;&quot;/&gt;  \n            &lt;/td&gt;\n         &lt;/tr&gt;\n       &lt;/c:forEach&gt; ....\n</code></pre>\n<p>.............\n....</p>\n<p>And here's my controller</p>\n<pre><code>    @RequestMapping(value = { &quot;/EditSpringFallPlanNumberActionForm&quot; }, method = RequestMethod.POST, params = { &quot;saveUpdateSpringFallPlanNumber&quot; })\npublic ModelAndView saveUpdateSpringFallPlanNumberConfigValues(\n        @ModelAttribute(&quot;EditSpringFallPlanNumberFormAttribute&quot;)  ArrayList&lt;FallSpringPlanNumber&gt; fallSpringPlanNumber,\n        HttpSession session, \n        HttpServletRequest request, \n        Model model){......\n</code></pre>\n<p>.......</p>\n<p>I&quot;m expecting the parameter &quot;ArrayList fallSpringPlanNumber&quot; to have values and its coming from update form but it's empty on submit</p>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1635966486,"post_id":69830415,"comment_id":123435755,"body_markdown":"I recommend using the [`stream` API](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html). If we wish to not use the `stream` API, I recommend using a [`Map`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html) (e.g. [`HashMap`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/HashMap.html)) for word counting.","body":"I recommend using the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html\" rel=\"nofollow noreferrer\"><code>stream</code> API</a>. If we wish to not use the <code>stream</code> API, I recommend using a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html\" rel=\"nofollow noreferrer\"><code>Map</code></a> (e.g. <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/HashMap.html\" rel=\"nofollow noreferrer\"><code>HashMap</code></a>) for word counting."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1636038997,"post_id":69830415,"comment_id":123456120,"body_markdown":"@user16320675  Why all the code in a comment (which , BTW, is frowned upon by SO)?  You could have structured this as an answer.","body":"@user16320675  Why all the code in a comment (which , BTW, is frowned upon by SO)?  You could have structured this as an answer."}],"answers":[{"tags":[],"owner":{"account_id":7817520,"reputation":141,"user_id":5911686,"display_name":"Jithesh Nair"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635967461,"creation_date":1635967461,"answer_id":69830672,"question_id":69830415,"body_markdown":"You are printing the message within the outer loop and it will get executed for each of the words! Please try to use Map. Here I don&#39;t use the stream. Just used Java 7 way.\r\n`\r\n\r\n    public static void printWordsOccurence(String str) {\r\n    \r\n            String[] words = str.split(&quot; &quot;);\r\n    \r\n            Map&lt;String, Integer&gt; res = new LinkedHashMap&lt;&gt;();\r\n    \r\n            for (String w : words) {\r\n                if (res.containsKey(w)) {\r\n                    res.put(w, res.get(w) + 1);\r\n                } else {\r\n                    res.put(w, 1);\r\n                }\r\n            }\r\n    \r\n            for (String w: res.keySet()) {\r\n                System.out.println(&quot;[&quot; + res.get(w) + &quot;]&quot; + w);\r\n            }\r\n        }\r\n\r\n`","title":"How do I prevent recurrence Strings?","body":"<p>You are printing the message within the outer loop and it will get executed for each of the words! Please try to use Map. Here I don't use the stream. Just used Java 7 way.\n`</p>\n<pre><code>public static void printWordsOccurence(String str) {\n\n        String[] words = str.split(&quot; &quot;);\n\n        Map&lt;String, Integer&gt; res = new LinkedHashMap&lt;&gt;();\n\n        for (String w : words) {\n            if (res.containsKey(w)) {\n                res.put(w, res.get(w) + 1);\n            } else {\n                res.put(w, 1);\n            }\n        }\n\n        for (String w: res.keySet()) {\n            System.out.println(&quot;[&quot; + res.get(w) + &quot;]&quot; + w);\n        }\n    }\n</code></pre>\n<p>`</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635970018,"creation_date":1635967546,"answer_id":69830685,"question_id":69830415,"body_markdown":"What you need to do is to not process words you have already seen. So when the `outer loop` sees a `familiar` one it needs to skip it.\r\n\r\nThe easiest way do do this would be to use a set or a map.  But there is another alternative using most of your existing code.\r\n\r\n- simply replace the word when it is encountered with some string.\r\n- then if that string is encountered again by the outer loop, ignore it.\r\n```\r\npublic static void printWordsOccurence(String str) {\r\n\t\r\n\tString[] words = str.split(&quot; &quot;);\r\n    // the marker which replaces the word when found.\r\n\tString seen = &quot;#&quot;;\r\n\r\n\tfor (int i = 0; i &lt; words.length; i++) {\r\n\t\t\r\n        // if the word equals the marker, continue continue on\r\n        // to the next word in this loop\r\n        if (words[i].equals(seen)) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tint counter = 0;\r\n\r\n        // save the word since it may change when found\r\n\t\tString find = words[i];\r\n\r\n\t\tfor (int j = 0; j &lt; words.length; j++) {\r\n\t\t\tif (find.equals(words[j])) {\r\n                // replace the word with the substitute\r\n\t\t\t\twords[j] = seen;\r\n\t\t\t\tcounter++;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tSystem.out.println(counter + &quot; &quot; + find);\r\n\t}\r\n}\r\n```\r\nprints\r\n```\r\n3 I\r\n2 am\r\n1 happy.\r\n1 a\r\n1 doctor.\r\n1 like\r\n1 chocolate.\r\n```\r\nYou may want to modify the words to eliminate any lingering punctuation.\r\n","title":"How do I prevent recurrence Strings?","body":"<p>What you need to do is to not process words you have already seen. So when the <code>outer loop</code> sees a <code>familiar</code> one it needs to skip it.</p>\n<p>The easiest way do do this would be to use a set or a map.  But there is another alternative using most of your existing code.</p>\n<ul>\n<li>simply replace the word when it is encountered with some string.</li>\n<li>then if that string is encountered again by the outer loop, ignore it.</li>\n</ul>\n<pre><code>public static void printWordsOccurence(String str) {\n    \n    String[] words = str.split(&quot; &quot;);\n    // the marker which replaces the word when found.\n    String seen = &quot;#&quot;;\n\n    for (int i = 0; i &lt; words.length; i++) {\n        \n        // if the word equals the marker, continue continue on\n        // to the next word in this loop\n        if (words[i].equals(seen)) {\n            continue;\n        }\n\n        int counter = 0;\n\n        // save the word since it may change when found\n        String find = words[i];\n\n        for (int j = 0; j &lt; words.length; j++) {\n            if (find.equals(words[j])) {\n                // replace the word with the substitute\n                words[j] = seen;\n                counter++;\n            }\n        }\n        \n        System.out.println(counter + &quot; &quot; + find);\n    }\n}\n</code></pre>\n<p>prints</p>\n<pre><code>3 I\n2 am\n1 happy.\n1 a\n1 doctor.\n1 like\n1 chocolate.\n</code></pre>\n<p>You may want to modify the words to eliminate any lingering punctuation.</p>\n"},{"tags":[],"owner":{"account_id":15777655,"reputation":1762,"user_id":11385052,"display_name":"Ryan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635967635,"creation_date":1635967635,"answer_id":69830696,"question_id":69830415,"body_markdown":"    private static void printWordOccurance(String sentence) {\r\n    \tMap&lt;String, Integer&gt; countMap = new HashMap&lt;&gt;();\r\n    \tArrays.stream(sentence.split(&quot;\\\\s+&quot;)).forEach(word -&gt; countMap.compute(word, (k, v) -&gt; v == null ? 1 : v + 1));\r\n    \t\t\r\n    \tSystem.out.println(countMap);\r\n    }","title":"How do I prevent recurrence Strings?","body":"<pre><code>private static void printWordOccurance(String sentence) {\n    Map&lt;String, Integer&gt; countMap = new HashMap&lt;&gt;();\n    Arrays.stream(sentence.split(&quot;\\\\s+&quot;)).forEach(word -&gt; countMap.compute(word, (k, v) -&gt; v == null ? 1 : v + 1));\n        \n    System.out.println(countMap);\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user17223316"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635971669,"creation_date":1635971082,"answer_id":69831308,"question_id":69830415,"body_markdown":"Try this.\r\n\r\n    public static void printWordsOccurence(String str) {\r\n        Arrays.stream(str.split(&quot;[\\\\s.]+&quot;))\r\n            .collect(Collectors.groupingBy(Function.identity(),\r\n                LinkedHashMap::new, Collectors.counting()))\r\n            .entrySet().forEach(e -&gt;\r\n                System.out.println(&quot;[&quot; + e.getValue() + &quot;] &quot; + e.getKey()));\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        String str = &quot;I am happy. I am a doctor. I like chocolate.&quot;;\r\n        printWordsOccurence(str);\r\n    }\r\n\r\noutput:\r\n\r\n    [3] I\r\n    [2] am\r\n    [1] happy\r\n    [1] a\r\n    [1] doctor\r\n    [1] like\r\n    [1] chocolate\r\n\r\nOr\r\n\r\n    public static void printWordsOccurence(String str) {\r\n        Map&lt;String, Integer&gt; counter = new LinkedHashMap&lt;&gt;();\r\n        for (String word : str.split(&quot;[\\\\s.]+&quot;))\r\n            counter.merge(word, 1, Integer::sum);\r\n        for (Entry&lt;String, Integer&gt; e : counter.entrySet())\r\n            System.out.println(&quot;[&quot; + e.getValue() + &quot;] &quot; + e.getKey());\r\n    }\r\n","title":"How do I prevent recurrence Strings?","body":"<p>Try this.</p>\n<pre><code>public static void printWordsOccurence(String str) {\n    Arrays.stream(str.split(&quot;[\\\\s.]+&quot;))\n        .collect(Collectors.groupingBy(Function.identity(),\n            LinkedHashMap::new, Collectors.counting()))\n        .entrySet().forEach(e -&gt;\n            System.out.println(&quot;[&quot; + e.getValue() + &quot;] &quot; + e.getKey()));\n}\n\npublic static void main(String[] args) {\n    String str = &quot;I am happy. I am a doctor. I like chocolate.&quot;;\n    printWordsOccurence(str);\n}\n</code></pre>\n<p>output:</p>\n<pre><code>[3] I\n[2] am\n[1] happy\n[1] a\n[1] doctor\n[1] like\n[1] chocolate\n</code></pre>\n<p>Or</p>\n<pre><code>public static void printWordsOccurence(String str) {\n    Map&lt;String, Integer&gt; counter = new LinkedHashMap&lt;&gt;();\n    for (String word : str.split(&quot;[\\\\s.]+&quot;))\n        counter.merge(word, 1, Integer::sum);\n    for (Entry&lt;String, Integer&gt; e : counter.entrySet())\n        System.out.println(&quot;[&quot; + e.getValue() + &quot;] &quot; + e.getKey());\n}\n</code></pre>\n"}],"owner":{"account_id":19934444,"reputation":5,"user_id":14607449,"display_name":"khalid Morrshid"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69830685,"answer_count":4,"score":0,"last_activity_date":1635971669,"creation_date":1635966098,"question_id":69830415,"body_markdown":"I&#39;ve defines a function printWordsOccurence(String str).\r\nit&#39;s job to print How many times is each word repeated in this text :\r\n\r\n**Text**: I am happy. I am a doctor. I like chocolate.\r\n\r\nthe expected results :\r\n\r\n 1. [3] I\r\n 2. [2] am\r\n 3. [1] happy.\r\n 4. [1] a\r\n 5. [1] doctor.\r\n 6. [1] like\r\n 7. [1] chocolate.\r\n \r\n----------\r\nHere is my code :\r\n\r\n     public static void printWordsOccurence(String str) {\r\n\r\n        String[] words = str.split(&quot; &quot;);\r\n        int counter = 0;\r\n\r\n        for (int i = 0; i &lt; words.length; i++) {\r\n            for (int j = 0; j &lt; words.length; j++) {\r\n                if (words[i].equals(words[j])) {\r\n                    counter++;\r\n                }\r\n            }\r\n            System.out.println(counter + &quot; &quot; + words[i]);\r\n            counter=0;\r\n        }\r\n    }\r\n\r\nI can&#39;t prevent strings from repeating.\r\nAny suggestions or hint would be very helpful\r\n\r\n","title":"How do I prevent recurrence Strings?","body":"<p>I've defines a function printWordsOccurence(String str).\nit's job to print How many times is each word repeated in this text :</p>\n<p><strong>Text</strong>: I am happy. I am a doctor. I like chocolate.</p>\n<p>the expected results :</p>\n<ol>\n<li>[3] I</li>\n<li>[2] am</li>\n<li>[1] happy.</li>\n<li>[1] a</li>\n<li>[1] doctor.</li>\n<li>[1] like</li>\n<li>[1] chocolate.</li>\n</ol>\n<hr />\n<p>Here is my code :</p>\n<pre><code> public static void printWordsOccurence(String str) {\n\n    String[] words = str.split(&quot; &quot;);\n    int counter = 0;\n\n    for (int i = 0; i &lt; words.length; i++) {\n        for (int j = 0; j &lt; words.length; j++) {\n            if (words[i].equals(words[j])) {\n                counter++;\n            }\n        }\n        System.out.println(counter + &quot; &quot; + words[i]);\n        counter=0;\n    }\n}\n</code></pre>\n<p>I can't prevent strings from repeating.\nAny suggestions or hint would be very helpful</p>\n"},{"tags":["java","rabbitmq","jms","message-queue","jndi"],"answers":[{"tags":[],"owner":{"account_id":9019314,"reputation":84,"user_id":6720896,"display_name":"nguyen dang Thanh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1601449815,"creation_date":1601449815,"answer_id":64132568,"question_id":64132394,"body_markdown":"Ya, i just found out that the hostname cannot contains some special character such as _.\r\nThen i removed this from rabbitmq_server to rabbitmqserver then everything is good now.\r\n\r\nHope someone get the issue like me can fix it follow this.","title":"Hostname problem with Wildfly 10 and RabbitMQ JDNI configuration","body":"<p>Ya, i just found out that the hostname cannot contains some special character such as _.\nThen i removed this from rabbitmq_server to rabbitmqserver then everything is good now.</p>\n<p>Hope someone get the issue like me can fix it follow this.</p>\n"}],"owner":{"account_id":9019314,"reputation":84,"user_id":6720896,"display_name":"nguyen dang Thanh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":354,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1635971004,"creation_date":1601449122,"question_id":64132394,"body_markdown":"I&#39;m following this documentation to configure JNDI for Wildfly 10 with RabbitMQ\r\n\r\nhttps://www.rabbitmq.com/jms-client.html\r\n\r\nThe reason i&#39;m using JNDI is to my application has no dependency with any JMS Provider&#39;s library. It means, in my application, i use javax.jms-api-2.0.jar only for integration with RabbitMQ or ActiveMQ... later.\r\n\r\nThis is my configuration in Wildfly standalone.xml file.\r\n\r\n```\r\n                &lt;object-factory name=&quot;java:global/jms/ConnectionFactory1&quot; module=&quot;com.rabbitmq.jms&quot; \r\n                    class=&quot;com.rabbitmq.jms.admin.RMQObjectFactory&quot;&gt;\r\n                    &lt;environment&gt;\r\n                        &lt;property name=&quot;className&quot; value=&quot;javax.jms.ConnectionFactory&quot;/&gt;\r\n                        &lt;property name=&quot;virtualHost&quot; value=&quot;/&quot;/&gt;\r\n                        &lt;property name=&quot;host&quot; value=&quot;rabbitmq_server&quot;/&gt;\r\n                        &lt;property name=&quot;port&quot; value=&quot;5672&quot;/&gt;\r\n                    &lt;/environment&gt;\r\n                &lt;/object-factory&gt;\r\n```\r\n\r\nThis is the soure code for integration.\r\n\r\n```\r\n            Context context = new InitialContext();\r\n            ConnectionFactory connectionFactory\r\n                    = (ConnectionFactory) context.lookup(&quot;java:global/jms/ConnectionFactory1&quot;);\r\n            if (connectionFactory == null) {\r\n                System.out.println(&quot;Cannot initiallize connection factory.&quot;);\r\n                return;\r\n            }\r\n            Connection connection = connectionFactory.createConnection(\r\n                    &quot;guest&quot;,\r\n                    &quot;guest&quot;);\r\n            \r\n            if (connection == null) {\r\n                System.out.println(&quot;Initiallize connection failed.&quot;);\r\n                return;\r\n            }\r\n            Session session = connection.createSession(false, QueueSession.AUTO_ACKNOWLEDGE);\r\n            if (session == null) {\r\n                System.out.println(&quot;Initiallize session failed.&quot;);\r\n                return;\r\n            }\r\n```\r\n\r\n\r\nMy problem is:\r\nAt this configuration, \r\n\r\n&lt;property name=&quot;host&quot; value=&quot;rabbitmq_server&quot;/&gt;\r\n\r\n1. If i set the value is IP address =&gt; it is ok\r\n2. If I set the value is hostname (already mapping with IP address in my hosts file) =&gt; it always create connection to localhost.\r\n\r\nAnyone has faced with this issue before?\r\n\r\n```\r\n12:00:12,318 ERROR [stderr] (default task-15) com.rabbitmq.jms.util.RMQJMSException: RabbitMQ connection was refused. RabbitMQ broker may not be available.\r\n\r\n12:00:12,319 ERROR [stderr] (default task-15) \tat com.rabbitmq.jms.admin.RMQConnectionFactory.instantiateNodeConnection(RMQConnectionFactory.java:170)\r\n\r\n12:00:12,319 ERROR [stderr] (default task-15) \tat com.rabbitmq.jms.admin.RMQConnectionFactory.createConnection(RMQConnectionFactory.java:117)\r\n\r\n12:00:12,319 ERROR [stderr] (default task-15) \tat com.mypackage.web.servlet.WhiteListRegistration.test(WhiteListRegistration.java:68)\r\n\r\n12:00:12,320 ERROR [stderr] (default task-15) \tat com.mypackage.web.servlet.WhiteListRegistration.processRequest(WhiteListRegistration.java:106)\r\n\r\n12:00:12,320 ERROR [stderr] (default task-15) \tat com.mypackage.web.servlet.WhiteListRegistration.doPost(WhiteListRegistration.java:180)\r\n\r\n12:00:12,320 ERROR [stderr] (default task-15) \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:707)\r\n\r\n12:00:12,321 ERROR [stderr] (default task-15) \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\r\n\r\n12:00:12,321 ERROR [stderr] (default task-15) \tat io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:85)\r\n\r\n12:00:12,321 ERROR [stderr] (default task-15) \tat io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\r\n\r\n12:00:12,322 ERROR [stderr] (default task-15) \tat io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\r\n\r\n12:00:12,322 ERROR [stderr] (default task-15) \tat org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\r\n\r\n12:00:12,323 ERROR [stderr] (default task-15) \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n\r\n12:00:12,323 ERROR [stderr] (default task-15) \tat io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:131)\r\n\r\n12:00:12,324 ERROR [stderr] (default task-15) \tat io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\r\n\r\n12:00:12,325 ERROR [stderr] (default task-15) \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n\r\n12:00:12,325 ERROR [stderr] (default task-15) \tat io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\r\n\r\n12:00:12,326 ERROR [stderr] (default task-15) \tat io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\r\n\r\n12:00:12,326 ERROR [stderr] (default task-15) \tat io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)\r\n\r\n12:00:12,327 ERROR [stderr] (default task-15) \tat io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)\r\n\r\n12:00:12,327 ERROR [stderr] (default task-15) \tat io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)\r\n\r\n12:00:12,327 ERROR [stderr] (default task-15) \tat io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)\r\n\r\n12:00:12,327 ERROR [stderr] (default task-15) \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n\r\n12:00:12,328 ERROR [stderr] (default task-15) \tat org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\r\n\r\n12:00:12,328 ERROR [stderr] (default task-15) \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n\r\n12:00:12,328 ERROR [stderr] (default task-15) \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n\r\n12:00:12,329 ERROR [stderr] (default task-15) \tat io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:292)\r\n\r\n12:00:12,380 ERROR [stderr] (default task-15) \tat io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:81)\r\n\r\n12:00:12,381 ERROR [stderr] (default task-15) \tat io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:138)\r\n\r\n12:00:12,381 ERROR [stderr] (default task-15) \tat io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:135)\r\n\r\n12:00:12,381 ERROR [stderr] (default task-15) \tat io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)\r\n\r\n12:00:12,381 ERROR [stderr] (default task-15) \tat io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\r\n\r\n12:00:12,381 ERROR [stderr] (default task-15) \tat io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\r\n\r\n12:00:12,381 ERROR [stderr] (default task-15) \tat io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\r\n\r\n12:00:12,381 ERROR [stderr] (default task-15) \tat io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\r\n\r\n12:00:12,382 ERROR [stderr] (default task-15) \tat io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\r\n\r\n12:00:12,382 ERROR [stderr] (default task-15) \tat io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\r\n\r\n12:00:12,382 ERROR [stderr] (default task-15) \tat io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:272)\r\n\r\n12:00:12,383 ERROR [stderr] (default task-15) \tat io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:81)\r\n\r\n12:00:12,383 ERROR [stderr] (default task-15) \tat io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:104)\r\n\r\n12:00:12,384 ERROR [stderr] (default task-15) \tat io.undertow.server.Connectors.executeRootHandler(Connectors.java:202)\r\n\r\n12:00:12,384 ERROR [stderr] (default task-15) \tat io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:805)\r\n\r\n12:00:12,385 ERROR [stderr] (default task-15) \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\r\n12:00:12,386 ERROR [stderr] (default task-15) \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\r\n12:00:12,387 ERROR [stderr] (default task-15) \tat java.lang.Thread.run(Thread.java:748)\r\n\r\n12:00:12,391 ERROR [stderr] (default task-15) Caused by: java.net.ConnectException: Connection refused: connect\r\n\r\n12:00:12,392 ERROR [stderr] (default task-15) \tat java.net.TwoStacksPlainSocketImpl.socketConnect(Native Method)\r\n\r\n12:00:12,393 ERROR [stderr] (default task-15) \tat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)\r\n\r\n12:00:12,394 ERROR [stderr] (default task-15) \tat java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)\r\n\r\n12:00:12,394 ERROR [stderr] (default task-15) \tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)\r\n\r\n12:00:12,394 ERROR [stderr] (default task-15) \tat java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)\r\n\r\n12:00:12,396 ERROR [stderr] (default task-15) \tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\r\n\r\n12:00:12,397 ERROR [stderr] (default task-15) \tat java.net.Socket.connect(Socket.java:589)\r\n\r\n12:00:12,398 ERROR [stderr] (default task-15) \tat com.rabbitmq.client.impl.SocketFrameHandlerFactory.create(SocketFrameHandlerFactory.java:60)\r\n\r\n12:00:12,398 ERROR [stderr] (default task-15) \tat com.rabbitmq.client.impl.recovery.RecoveryAwareAMQConnectionFactory.newConnection(RecoveryAwareAMQConnectionFactory.java:62)\r\n\r\n12:00:12,398 ERROR [stderr] (default task-15) \tat com.rabbitmq.client.impl.recovery.AutorecoveringConnection.init(AutorecoveringConnection.java:156)\r\n\r\n12:00:12,398 ERROR [stderr] (default task-15) \tat com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1106)\r\n\r\n12:00:12,399 ERROR [stderr] (default task-15) \tat com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1063)\r\n\r\n12:00:12,434 ERROR [stderr] (default task-15) \tat com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1021)\r\n\r\n12:00:12,434 ERROR [stderr] (default task-15) \tat com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1182)\r\n\r\n12:00:12,435 ERROR [stderr] (default task-15) \tat com.rabbitmq.jms.admin.RMQConnectionFactory.instantiateNodeConnection(RMQConnectionFactory.java:159)\r\n\r\n12:00:12,435 ERROR [stderr] (default task-15) \t... 43 more\r\n```","title":"Hostname problem with Wildfly 10 and RabbitMQ JDNI configuration","body":"<p>I'm following this documentation to configure JNDI for Wildfly 10 with RabbitMQ</p>\n<p><a href=\"https://www.rabbitmq.com/jms-client.html\" rel=\"nofollow noreferrer\">https://www.rabbitmq.com/jms-client.html</a></p>\n<p>The reason i'm using JNDI is to my application has no dependency with any JMS Provider's library. It means, in my application, i use javax.jms-api-2.0.jar only for integration with RabbitMQ or ActiveMQ... later.</p>\n<p>This is my configuration in Wildfly standalone.xml file.</p>\n<pre><code>                &lt;object-factory name=&quot;java:global/jms/ConnectionFactory1&quot; module=&quot;com.rabbitmq.jms&quot; \n                    class=&quot;com.rabbitmq.jms.admin.RMQObjectFactory&quot;&gt;\n                    &lt;environment&gt;\n                        &lt;property name=&quot;className&quot; value=&quot;javax.jms.ConnectionFactory&quot;/&gt;\n                        &lt;property name=&quot;virtualHost&quot; value=&quot;/&quot;/&gt;\n                        &lt;property name=&quot;host&quot; value=&quot;rabbitmq_server&quot;/&gt;\n                        &lt;property name=&quot;port&quot; value=&quot;5672&quot;/&gt;\n                    &lt;/environment&gt;\n                &lt;/object-factory&gt;\n</code></pre>\n<p>This is the soure code for integration.</p>\n<pre><code>            Context context = new InitialContext();\n            ConnectionFactory connectionFactory\n                    = (ConnectionFactory) context.lookup(&quot;java:global/jms/ConnectionFactory1&quot;);\n            if (connectionFactory == null) {\n                System.out.println(&quot;Cannot initiallize connection factory.&quot;);\n                return;\n            }\n            Connection connection = connectionFactory.createConnection(\n                    &quot;guest&quot;,\n                    &quot;guest&quot;);\n            \n            if (connection == null) {\n                System.out.println(&quot;Initiallize connection failed.&quot;);\n                return;\n            }\n            Session session = connection.createSession(false, QueueSession.AUTO_ACKNOWLEDGE);\n            if (session == null) {\n                System.out.println(&quot;Initiallize session failed.&quot;);\n                return;\n            }\n</code></pre>\n<p>My problem is:\nAt this configuration,</p>\n\n<ol>\n<li>If i set the value is IP address =&gt; it is ok</li>\n<li>If I set the value is hostname (already mapping with IP address in my hosts file) =&gt; it always create connection to localhost.</li>\n</ol>\n<p>Anyone has faced with this issue before?</p>\n<pre><code>12:00:12,318 ERROR [stderr] (default task-15) com.rabbitmq.jms.util.RMQJMSException: RabbitMQ connection was refused. RabbitMQ broker may not be available.\n\n12:00:12,319 ERROR [stderr] (default task-15)   at com.rabbitmq.jms.admin.RMQConnectionFactory.instantiateNodeConnection(RMQConnectionFactory.java:170)\n\n12:00:12,319 ERROR [stderr] (default task-15)   at com.rabbitmq.jms.admin.RMQConnectionFactory.createConnection(RMQConnectionFactory.java:117)\n\n12:00:12,319 ERROR [stderr] (default task-15)   at com.mypackage.web.servlet.WhiteListRegistration.test(WhiteListRegistration.java:68)\n\n12:00:12,320 ERROR [stderr] (default task-15)   at com.mypackage.web.servlet.WhiteListRegistration.processRequest(WhiteListRegistration.java:106)\n\n12:00:12,320 ERROR [stderr] (default task-15)   at com.mypackage.web.servlet.WhiteListRegistration.doPost(WhiteListRegistration.java:180)\n\n12:00:12,320 ERROR [stderr] (default task-15)   at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)\n\n12:00:12,321 ERROR [stderr] (default task-15)   at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\n\n12:00:12,321 ERROR [stderr] (default task-15)   at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:85)\n\n12:00:12,321 ERROR [stderr] (default task-15)   at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\n\n12:00:12,322 ERROR [stderr] (default task-15)   at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\n\n12:00:12,322 ERROR [stderr] (default task-15)   at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\n\n12:00:12,323 ERROR [stderr] (default task-15)   at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n\n12:00:12,323 ERROR [stderr] (default task-15)   at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:131)\n\n12:00:12,324 ERROR [stderr] (default task-15)   at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\n\n12:00:12,325 ERROR [stderr] (default task-15)   at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n\n12:00:12,325 ERROR [stderr] (default task-15)   at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\n\n12:00:12,326 ERROR [stderr] (default task-15)   at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\n\n12:00:12,326 ERROR [stderr] (default task-15)   at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)\n\n12:00:12,327 ERROR [stderr] (default task-15)   at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)\n\n12:00:12,327 ERROR [stderr] (default task-15)   at io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)\n\n12:00:12,327 ERROR [stderr] (default task-15)   at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)\n\n12:00:12,327 ERROR [stderr] (default task-15)   at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n\n12:00:12,328 ERROR [stderr] (default task-15)   at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\n\n12:00:12,328 ERROR [stderr] (default task-15)   at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n\n12:00:12,328 ERROR [stderr] (default task-15)   at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n\n12:00:12,329 ERROR [stderr] (default task-15)   at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:292)\n\n12:00:12,380 ERROR [stderr] (default task-15)   at io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:81)\n\n12:00:12,381 ERROR [stderr] (default task-15)   at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:138)\n\n12:00:12,381 ERROR [stderr] (default task-15)   at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:135)\n\n12:00:12,381 ERROR [stderr] (default task-15)   at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)\n\n12:00:12,381 ERROR [stderr] (default task-15)   at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\n\n12:00:12,381 ERROR [stderr] (default task-15)   at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\n\n12:00:12,381 ERROR [stderr] (default task-15)   at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\n\n12:00:12,381 ERROR [stderr] (default task-15)   at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\n\n12:00:12,382 ERROR [stderr] (default task-15)   at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\n\n12:00:12,382 ERROR [stderr] (default task-15)   at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\n\n12:00:12,382 ERROR [stderr] (default task-15)   at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:272)\n\n12:00:12,383 ERROR [stderr] (default task-15)   at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:81)\n\n12:00:12,383 ERROR [stderr] (default task-15)   at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:104)\n\n12:00:12,384 ERROR [stderr] (default task-15)   at io.undertow.server.Connectors.executeRootHandler(Connectors.java:202)\n\n12:00:12,384 ERROR [stderr] (default task-15)   at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:805)\n\n12:00:12,385 ERROR [stderr] (default task-15)   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n\n12:00:12,386 ERROR [stderr] (default task-15)   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n\n12:00:12,387 ERROR [stderr] (default task-15)   at java.lang.Thread.run(Thread.java:748)\n\n12:00:12,391 ERROR [stderr] (default task-15) Caused by: java.net.ConnectException: Connection refused: connect\n\n12:00:12,392 ERROR [stderr] (default task-15)   at java.net.TwoStacksPlainSocketImpl.socketConnect(Native Method)\n\n12:00:12,393 ERROR [stderr] (default task-15)   at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)\n\n12:00:12,394 ERROR [stderr] (default task-15)   at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)\n\n12:00:12,394 ERROR [stderr] (default task-15)   at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)\n\n12:00:12,394 ERROR [stderr] (default task-15)   at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)\n\n12:00:12,396 ERROR [stderr] (default task-15)   at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\n\n12:00:12,397 ERROR [stderr] (default task-15)   at java.net.Socket.connect(Socket.java:589)\n\n12:00:12,398 ERROR [stderr] (default task-15)   at com.rabbitmq.client.impl.SocketFrameHandlerFactory.create(SocketFrameHandlerFactory.java:60)\n\n12:00:12,398 ERROR [stderr] (default task-15)   at com.rabbitmq.client.impl.recovery.RecoveryAwareAMQConnectionFactory.newConnection(RecoveryAwareAMQConnectionFactory.java:62)\n\n12:00:12,398 ERROR [stderr] (default task-15)   at com.rabbitmq.client.impl.recovery.AutorecoveringConnection.init(AutorecoveringConnection.java:156)\n\n12:00:12,398 ERROR [stderr] (default task-15)   at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1106)\n\n12:00:12,399 ERROR [stderr] (default task-15)   at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1063)\n\n12:00:12,434 ERROR [stderr] (default task-15)   at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1021)\n\n12:00:12,434 ERROR [stderr] (default task-15)   at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1182)\n\n12:00:12,435 ERROR [stderr] (default task-15)   at com.rabbitmq.jms.admin.RMQConnectionFactory.instantiateNodeConnection(RMQConnectionFactory.java:159)\n\n12:00:12,435 ERROR [stderr] (default task-15)   ... 43 more\n</code></pre>\n"},{"tags":["java","spring","thymeleaf"],"comments":[{"owner":{"account_id":17750,"reputation":25470,"user_id":40064,"accept_rate":69,"display_name":"Wim Deblauwe"},"score":1,"creation_date":1635963795,"post_id":69829866,"comment_id":123434786,"body_markdown":"Do you have a file `templates/view-fields.html` on your classpath ?","body":"Do you have a file <code>templates&#47;view-fields.html</code> on your classpath ?"},{"owner":{"account_id":11982404,"reputation":13,"user_id":8767926,"display_name":"Rollermix"},"score":0,"creation_date":1635964131,"post_id":69829866,"comment_id":123434911,"body_markdown":"Oh thanks. I had field named fields-view.html, i renamed to view-fields.html and started working. Thanks","body":"Oh thanks. I had field named fields-view.html, i renamed to view-fields.html and started working. Thanks"}],"answers":[{"tags":[],"owner":{"account_id":13399899,"reputation":708,"user_id":9784839,"display_name":"Mehedi Hasan Shifat"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635969380,"creation_date":1635969380,"answer_id":69831017,"question_id":69829866,"body_markdown":"According to [your ss](https://i.stack.imgur.com/MeA6K.png) you have named the template as `field-view.html` but in  controller you are returning `view-fields`. \r\n\r\nYour code : \r\n\r\n```java\r\npackage czajka.piotr.restapi.viewcontroller;\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\n\r\n@Controller\r\npublic class FieldViewController {\r\n\r\n    @RequestMapping(&quot;/view-fields&quot;)\r\n    public String viewFields()\r\n    {\r\n        return &quot;field-view&quot;;\r\n    }\r\n}\r\n```\r\n\r\nBtw when you are making **rest api** you should use **@RestController** annotation instead of @Controller. Actually **Controller** will look for temples and **RestController** will return actual string or you can write html code too.","title":"Template might not exists","body":"<p>According to <a href=\"https://i.stack.imgur.com/MeA6K.png\" rel=\"nofollow noreferrer\">your ss</a> you have named the template as <code>field-view.html</code> but in  controller you are returning <code>view-fields</code>.</p>\n<p>Your code :</p>\n<pre class=\"lang-java prettyprint-override\"><code>package czajka.piotr.restapi.viewcontroller;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\n@Controller\npublic class FieldViewController {\n\n    @RequestMapping(&quot;/view-fields&quot;)\n    public String viewFields()\n    {\n        return &quot;field-view&quot;;\n    }\n}\n</code></pre>\n<p>Btw when you are making <strong>rest api</strong> you should use <strong>@RestController</strong> annotation instead of @Controller. Actually <strong>Controller</strong> will look for temples and <strong>RestController</strong> will return actual string or you can write html code too.</p>\n"}],"owner":{"account_id":11982404,"reputation":13,"user_id":8767926,"display_name":"Rollermix"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69831017,"answer_count":1,"score":1,"last_activity_date":1635969380,"creation_date":1635963393,"question_id":69829866,"body_markdown":"Im trying to call restapi and im getting error\r\n```\r\npackage czajka.piotr.restapi.viewcontroller;\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\n\r\n@Controller\r\npublic class FieldViewController {\r\n\r\n    @RequestMapping(&quot;/view-fields&quot;)\r\n    public String viewFields()\r\n    {\r\n        return &quot;view-fields&quot;;\r\n    }\r\n}\r\n```\r\n\r\n&gt; org.thymeleaf.exceptions.TemplateInputException: Error resolving template [view-fields], template might not exist or might not be accessible by any of the configured Template Resolvers\r\n\tat org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n\tat org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n\tat org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n\tat org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n\tat org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:366) ~[thymeleaf-spring5-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n\tat org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:190) ~[thymeleaf-spring5-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1400) ~\r\netc\r\n\r\nproperties\r\n```\r\nspring.jpa.hibernate.ddl-auto=none\r\nspring.datasource.url=jdbc:mysql://localhost:3306/serverdb?useUnicode=true&amp;serverTimezone=UTC\r\nspring.datasource.username=root\r\nspring.datasource.password=12345678\r\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\r\nserver.port=8081\r\nspring.thymeleaf.prefix=classpath:templates/\r\nspring.thymeleaf.suffix=.html\r\nspring.thymeleaf.mode=HTML5\r\n```\r\n[Maybe this would help][1]\r\n\r\n  [1]: https://i.stack.imgur.com/MeA6K.png","title":"Template might not exists","body":"<p>Im trying to call restapi and im getting error</p>\n<pre><code>package czajka.piotr.restapi.viewcontroller;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\n@Controller\npublic class FieldViewController {\n\n    @RequestMapping(&quot;/view-fields&quot;)\n    public String viewFields()\n    {\n        return &quot;view-fields&quot;;\n    }\n}\n</code></pre>\n<blockquote>\n<p>org.thymeleaf.exceptions.TemplateInputException: Error resolving template [view-fields], template might not exist or might not be accessible by any of the configured Template Resolvers\nat org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\nat org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\nat org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\nat org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\nat org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:366) ~[thymeleaf-spring5-3.0.12.RELEASE.jar:3.0.12.RELEASE]\nat org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:190) ~[thymeleaf-spring5-3.0.12.RELEASE.jar:3.0.12.RELEASE]\nat org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1400) ~\netc</p>\n</blockquote>\n<p>properties</p>\n<pre><code>spring.jpa.hibernate.ddl-auto=none\nspring.datasource.url=jdbc:mysql://localhost:3306/serverdb?useUnicode=true&amp;serverTimezone=UTC\nspring.datasource.username=root\nspring.datasource.password=12345678\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\nserver.port=8081\nspring.thymeleaf.prefix=classpath:templates/\nspring.thymeleaf.suffix=.html\nspring.thymeleaf.mode=HTML5\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/MeA6K.png\" rel=\"nofollow noreferrer\">Maybe this would help</a></p>\n"},{"tags":["java","spring-boot","maven","java-11","java-module"],"answers":[{"tags":[],"owner":{"account_id":3068754,"reputation":2677,"user_id":2599899,"display_name":"Arthur Klezovich"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635968899,"creation_date":1635963612,"answer_id":69829916,"question_id":69829810,"body_markdown":"Try using JDK8 to run this code.\r\nIt seems to be a compatability [issue][1]\r\n\r\n**Edit:**\r\n\r\nThe root cause is that this package has been removed. (https://jcp.org/en/jsr/detail?id=305) from the standard JVM installation after java 8.\r\n\r\nSome of the dependencies in your code depends on it, therefore, there is a launch probelem. It comes from this dependency `org.jvnet.staxex`. Its used for XML parsing. Swapping it out for another package, which does not have this dependency is likely to be time consuming if you have a large XML-related code base.\r\n\r\nWhat might work is trying to manually add the dependency which provides these classes. Try adding [this][2] to your dependencies \r\n\r\nAlso, this [blog post][3] might help \r\n\r\n\r\n  [1]: https://github.com/jdbi/jdbi/issues/1435\r\n  [2]: https://mvnrepository.com/artifact/com.google.code.findbugs/jsr305\r\n  [3]: https://nipafx.dev/jsr-305-java-9/","title":"How to deal with ResolutionException?","body":"<p>Try using JDK8 to run this code.\nIt seems to be a compatability <a href=\"https://github.com/jdbi/jdbi/issues/1435\" rel=\"nofollow noreferrer\">issue</a></p>\n<p><strong>Edit:</strong></p>\n<p>The root cause is that this package has been removed. (<a href=\"https://jcp.org/en/jsr/detail?id=305\" rel=\"nofollow noreferrer\">https://jcp.org/en/jsr/detail?id=305</a>) from the standard JVM installation after java 8.</p>\n<p>Some of the dependencies in your code depends on it, therefore, there is a launch probelem. It comes from this dependency <code>org.jvnet.staxex</code>. Its used for XML parsing. Swapping it out for another package, which does not have this dependency is likely to be time consuming if you have a large XML-related code base.</p>\n<p>What might work is trying to manually add the dependency which provides these classes. Try adding <a href=\"https://mvnrepository.com/artifact/com.google.code.findbugs/jsr305\" rel=\"nofollow noreferrer\">this</a> to your dependencies</p>\n<p>Also, this <a href=\"https://nipafx.dev/jsr-305-java-9/\" rel=\"nofollow noreferrer\">blog post</a> might help</p>\n"}],"owner":{"account_id":14196201,"reputation":2340,"user_id":10255450,"display_name":"IsaacLevon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":355,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69829916,"answer_count":1,"score":2,"last_activity_date":1635968899,"creation_date":1635963092,"question_id":69829810,"body_markdown":"I&#39;m trying to use Java Modules in my Spring Boot project and I&#39;m getting the following exception:\r\n\r\n    java.lang.module.ResolutionException: Modules jsr305 and java.annotation export package javax.annotation to module org.jvnet.staxex\r\n\r\n\r\nHow can I solve this problem? ","title":"How to deal with ResolutionException?","body":"<p>I'm trying to use Java Modules in my Spring Boot project and I'm getting the following exception:</p>\n<pre><code>java.lang.module.ResolutionException: Modules jsr305 and java.annotation export package javax.annotation to module org.jvnet.staxex\n</code></pre>\n<p>How can I solve this problem?</p>\n"},{"tags":["java","spring-boot","testing","transactions","integration-testing"],"answers":[{"tags":[],"owner":{"account_id":14459744,"reputation":67,"user_id":10444843,"display_name":"Fyodor Iz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635968266,"creation_date":1635968266,"answer_id":69830815,"question_id":69821608,"body_markdown":"After some time, I found solution to this problem. It is not sofisticated and beatifull, I&#39;d say it&#39;s a bit ugly but it works.\r\n\r\nMybatis&#39;s ```SqlSession``` has a method ```getMapper```, using it you can get a mapper that sees the changes done in your current transaction, it looks like this:\r\n```\r\nDataRepository dataRepository = session.getMapper(DataRepository.class);\r\n```\r\nSo I got all the mappers I need and injected them into beans using ```ReflectionTestUtils.setField```. \r\n\r\n```SqlSession``` itself was rolled back in ```@After``` annotated method.","title":"How to make an integration test with one transaction for all database calls and rollback it afterwards?","body":"<p>After some time, I found solution to this problem. It is not sofisticated and beatifull, I'd say it's a bit ugly but it works.</p>\n<p>Mybatis's <code>SqlSession</code> has a method <code>getMapper</code>, using it you can get a mapper that sees the changes done in your current transaction, it looks like this:</p>\n<pre><code>DataRepository dataRepository = session.getMapper(DataRepository.class);\n</code></pre>\n<p>So I got all the mappers I need and injected them into beans using <code>ReflectionTestUtils.setField</code>.</p>\n<p><code>SqlSession</code> itself was rolled back in <code>@After</code> annotated method.</p>\n"}],"owner":{"account_id":14459744,"reputation":67,"user_id":10444843,"display_name":"Fyodor Iz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":398,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69830815,"answer_count":1,"score":0,"last_activity_date":1635968266,"creation_date":1635927712,"question_id":69821608,"body_markdown":"I&#39;m, writing an integration test, annotated with ```@SpringBootTest```.\r\n\r\nSuppose I create some product using pure SQL from my test, call calculation service that do some calculations based on it, and it calls another service to save those calculation results in different tables.\r\n\r\nWhat **I need is to rollback all the changes made** after test is finished.\r\n\r\nI read different questions, tried to use ```@Transactional``` on class or test-method.\r\n\r\nTried to put database property ```autocommit=false```.\r\n\r\nTried to make ```SqlSession``` object and ```Spy``` it in ```@Before``` into service that saves data into different tables and rollback it in ```@After```. Also, tried to use ```Connection``` with ```autocommit=false``` but it won&#39;t work, it&#39;s **all different transactions** anyway.\r\n\r\nThe ```@Repository``` beans are also annotated with ```@Mapper``` because we use My-Batis. It seems **my-batis** creates new transaction whenever it&#39;s mapper is called.\r\n\r\nSo the only idea I have left is to initiate in-memory database for integration tests and use it.\r\nOr probably I am missing some things and it could be done in other way just trough the transactions management?\r\n\r\nHow do I do all the calls in **one transaction** so they see the changes made and rollback it afterwards?\r\n\r\nHere is an **example** code of a test I am trying to do:\r\n\r\n```\r\n@Slf4j\r\n@RunWith(SpringJUnit4ClassRunner.class)\r\n@SpringBootTest\r\npublic class MyTestClass {\r\n\r\n    @Autowired\r\n    private DataRepository dataRepository;\r\n    @Autowired\r\n    private CalculateService calculateService;\r\n\r\n    @Before\r\n    public void setUp() throws SQLException {\r\n        SqlSession session = sqlSessionFactory.openSession(ExecutorType.BATCH, false);\r\n        connection = session.getConnection();\r\n        connection.setAutoCommit(false);\r\n        spySession = Mockito.spy(session);\r\n        // other stuff with  SqlSessionFactory mocking and injecting the mock \r\n       }\r\n    \r\n    @After\r\n    public void cleanUp() {\r\n        spySession.rollback();\r\n    }\r\n\r\n    @Test\r\n    public void myTest(){\r\n        ResultSet resultSet = connection.prepareStatement(&quot;Insert into...&quot;).executeQuery(); // create new product\r\n        resultSet.next();\r\n        String createdProductId = resultSet.getString(1);\r\n\r\n        Product createdProduct = dataRepository.getProduct(createdProductId);\r\n        assertNotNull(createdProduct); // fails here\r\n\r\n        calculateService.calculate(createdProduct); // this call creates new threads there\r\n        // and calls other service that saves data in different trasaction aswell\r\n\r\n        createdProduct = dataRepository.getProduct(createdProductId); // call again to assert calculation results\r\n        \r\n        assertSomeField(createdProduct.getSomeField);\r\n        // other assertions here\r\n    }\r\n\r\n \r\n}   \r\n```","title":"How to make an integration test with one transaction for all database calls and rollback it afterwards?","body":"<p>I'm, writing an integration test, annotated with <code>@SpringBootTest</code>.</p>\n<p>Suppose I create some product using pure SQL from my test, call calculation service that do some calculations based on it, and it calls another service to save those calculation results in different tables.</p>\n<p>What <strong>I need is to rollback all the changes made</strong> after test is finished.</p>\n<p>I read different questions, tried to use <code>@Transactional</code> on class or test-method.</p>\n<p>Tried to put database property <code>autocommit=false</code>.</p>\n<p>Tried to make <code>SqlSession</code> object and <code>Spy</code> it in <code>@Before</code> into service that saves data into different tables and rollback it in <code>@After</code>. Also, tried to use <code>Connection</code> with <code>autocommit=false</code> but it won't work, it's <strong>all different transactions</strong> anyway.</p>\n<p>The <code>@Repository</code> beans are also annotated with <code>@Mapper</code> because we use My-Batis. It seems <strong>my-batis</strong> creates new transaction whenever it's mapper is called.</p>\n<p>So the only idea I have left is to initiate in-memory database for integration tests and use it.\nOr probably I am missing some things and it could be done in other way just trough the transactions management?</p>\n<p>How do I do all the calls in <strong>one transaction</strong> so they see the changes made and rollback it afterwards?</p>\n<p>Here is an <strong>example</strong> code of a test I am trying to do:</p>\n<pre><code>@Slf4j\n@RunWith(SpringJUnit4ClassRunner.class)\n@SpringBootTest\npublic class MyTestClass {\n\n    @Autowired\n    private DataRepository dataRepository;\n    @Autowired\n    private CalculateService calculateService;\n\n    @Before\n    public void setUp() throws SQLException {\n        SqlSession session = sqlSessionFactory.openSession(ExecutorType.BATCH, false);\n        connection = session.getConnection();\n        connection.setAutoCommit(false);\n        spySession = Mockito.spy(session);\n        // other stuff with  SqlSessionFactory mocking and injecting the mock \n       }\n    \n    @After\n    public void cleanUp() {\n        spySession.rollback();\n    }\n\n    @Test\n    public void myTest(){\n        ResultSet resultSet = connection.prepareStatement(&quot;Insert into...&quot;).executeQuery(); // create new product\n        resultSet.next();\n        String createdProductId = resultSet.getString(1);\n\n        Product createdProduct = dataRepository.getProduct(createdProductId);\n        assertNotNull(createdProduct); // fails here\n\n        calculateService.calculate(createdProduct); // this call creates new threads there\n        // and calls other service that saves data in different trasaction aswell\n\n        createdProduct = dataRepository.getProduct(createdProductId); // call again to assert calculation results\n        \n        assertSomeField(createdProduct.getSomeField);\n        // other assertions here\n    }\n\n \n}   \n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1635967334,"post_id":69830606,"comment_id":123436020,"body_markdown":"Yes, it would. Some outside source (e.g. if we package our code in a `jar` and that `jar` is used by some other java program) could try to write/read that variable (e.g. through the means of reflection).","body":"Yes, it would. Some outside source (e.g. if we package our code in a <code>jar</code> and that <code>jar</code> is used by some other java program) could try to write/read that variable (e.g. through the means of reflection)."},{"owner":{"account_id":15134855,"reputation":93,"user_id":10921658,"display_name":"syclone"},"score":0,"creation_date":1635969263,"post_id":69830606,"comment_id":123436665,"body_markdown":"And what about non initialized local variables without any references? I assume that they woudn&#39;t take any memory since local variables don&#39;t have any default values but they nonetheless can be declared without initialization, atleast if we don&#39;t make a reference to them or else an error occurs.","body":"And what about non initialized local variables without any references? I assume that they woudn&#39;t take any memory since local variables don&#39;t have any default values but they nonetheless can be declared without initialization, atleast if we don&#39;t make a reference to them or else an error occurs."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1635969388,"post_id":69830606,"comment_id":123436706,"body_markdown":"Please read: [Can I ask only one question per post?](https://meta.stackexchange.com/questions/222735/can-i-ask-only-one-question-per-post)","body":"Please read: <a href=\"https://meta.stackexchange.com/questions/222735/can-i-ask-only-one-question-per-post\">Can I ask only one question per post?</a>"},{"owner":{"account_id":15134855,"reputation":93,"user_id":10921658,"display_name":"syclone"},"score":0,"creation_date":1635969714,"post_id":69830606,"comment_id":123436834,"body_markdown":"@Turing85 It would be quite inefficient to make useless posts about very relatable questions.","body":"@Turing85 It would be quite inefficient to make useless posts about very relatable questions."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1635970337,"post_id":69830606,"comment_id":123437018,"body_markdown":"The questions are not &quot;relatable&quot; at all. A field is quite different from a local variable. One resides on the heap, the other on the stack.","body":"The questions are not &quot;relatable&quot; at all. A field is quite different from a local variable. One resides on the heap, the other on the stack."},{"owner":{"account_id":15134855,"reputation":93,"user_id":10921658,"display_name":"syclone"},"score":0,"creation_date":1635970941,"post_id":69830606,"comment_id":123437206,"body_markdown":"@Turing85 They actually are very relatable because the initial question was about fields wich are &quot;relatable&quot; to local variables and i asked about the same thing about them both wich is whether or not the variables in their non initialized form still consume memory. And whether &quot;one resides on the heap and the other on the stack is of none importance&quot; is really not of importance about the relatability about both questions.","body":"@Turing85 They actually are very relatable because the initial question was about fields wich are &quot;relatable&quot; to local variables and i asked about the same thing about them both wich is whether or not the variables in their non initialized form still consume memory. And whether &quot;one resides on the heap and the other on the stack is of none importance&quot; is really not of importance about the relatability about both questions."},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1635974976,"post_id":69830606,"comment_id":123438569,"body_markdown":"@syclone Are you talking about variables or fields in your question? It looks like you are talking about fields, but in the question you are talking about variables.","body":"@syclone Are you talking about variables or fields in your question? It looks like you are talking about fields, but in the question you are talking about variables."}],"answers":[{"tags":[],"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1635967203,"creation_date":1635967203,"answer_id":69830624,"question_id":69830606,"body_markdown":"Yes as it might be accessed in non trivial way which static compiler cannot detect - like using reflection.","title":"If we don&#39;t reference to a non initialized variable will it still allocate memory from it&#39;s default value?","body":"<p>Yes as it might be accessed in non trivial way which static compiler cannot detect - like using reflection.</p>\n"}],"owner":{"account_id":15134855,"reputation":93,"user_id":10921658,"display_name":"syclone"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1635967673,"creation_date":1635967114,"question_id":69830606,"body_markdown":"My question is in regards of memory with non initialized variables.\r\n\r\nLets say we reference to `a` field like this:\r\n\r\n    class JustAClass {\r\n         static int a;\r\n\r\n         public static void main(String[] args){\r\n             System.out.println(a);\r\n         }\r\n    }\r\n\r\nNow in the above example the variable `a` will be by default assigned a value of 0(which will acquire memory in RAM) and 0 will be printed in the console.\r\n\r\nHowever what if we didn&#39;t make a reference to the a variable and simply ran the program like this:\r\n\r\n    class JustAClass {\r\n         static int a;\r\n\r\n         public static void main(String[] args){\r\n            \r\n         }\r\n    }\r\n\r\nWould `a` still acquire memory in this case?","title":"If we don&#39;t reference to a non initialized variable will it still allocate memory from it&#39;s default value?","body":"<p>My question is in regards of memory with non initialized variables.</p>\n<p>Lets say we reference to <code>a</code> field like this:</p>\n<pre><code>class JustAClass {\n     static int a;\n\n     public static void main(String[] args){\n         System.out.println(a);\n     }\n}\n</code></pre>\n<p>Now in the above example the variable <code>a</code> will be by default assigned a value of 0(which will acquire memory in RAM) and 0 will be printed in the console.</p>\n<p>However what if we didn't make a reference to the a variable and simply ran the program like this:</p>\n<pre><code>class JustAClass {\n     static int a;\n\n     public static void main(String[] args){\n        \n     }\n}\n</code></pre>\n<p>Would <code>a</code> still acquire memory in this case?</p>\n"},{"tags":["java","boolean","poker"],"comments":[{"owner":{"account_id":21791742,"reputation":212,"user_id":16091860,"display_name":"croakPedlar"},"score":0,"creation_date":1635963193,"post_id":69829661,"comment_id":123434537,"body_markdown":"Where are these values coming from? String arrays? How are they set? You also cant have two elses like this.","body":"Where are these values coming from? String arrays? How are they set? You also cant have two elses like this."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":3,"creation_date":1635963221,"post_id":69829661,"comment_id":123434548,"body_markdown":"I don&#39;t think it prints anything, since this code won&#39;t even compile.","body":"I don&#39;t think it prints anything, since this code won&#39;t even compile."},{"owner":{"account_id":23154264,"reputation":5,"user_id":17255746,"display_name":"Jay Khan"},"score":0,"creation_date":1635964260,"post_id":69829661,"comment_id":123434953,"body_markdown":"There is more code, the card values are stored as integers further up but I didn’t include that into the question. The app class has the printlns and use of the method.","body":"There is more code, the card values are stored as integers further up but I didn’t include that into the question. The app class has the printlns and use of the method."},{"owner":{"account_id":21791742,"reputation":212,"user_id":16091860,"display_name":"croakPedlar"},"score":0,"creation_date":1635966266,"post_id":69829661,"comment_id":123435678,"body_markdown":"These are very important things to add for debugging. You need to show what type the values are. You need to show something you&#39;ve actually ran and compiled (bc this 100% does not compile). How are these integers if it&#39;s `int` of clubs/diamonds? An int cant store all that info, so how are you creating these cards?","body":"These are very important things to add for debugging. You need to show what type the values are. You need to show something you&#39;ve actually ran and compiled (bc this 100% does not compile). How are these integers if it&#39;s <code>int</code> of clubs/diamonds? An int cant store all that info, so how are you creating these cards?"},{"owner":{"account_id":23154264,"reputation":5,"user_id":17255746,"display_name":"Jay Khan"},"score":0,"creation_date":1635967341,"post_id":69829661,"comment_id":123436025,"body_markdown":"I added the entire code below as an answer to the question.","body":"I added the entire code below as an answer to the question."}],"answers":[{"tags":[],"owner":{"account_id":21791742,"reputation":212,"user_id":16091860,"display_name":"croakPedlar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635967149,"creation_date":1635967149,"answer_id":69830612,"question_id":69829661,"body_markdown":"So there&#39;s a few things happening here that we can make better.\r\n1) This code as written does not compile. We can&#39;t have 2 `else`s after an `if`. `else` should be the last in the decision tree with no conditions. When we do `if/else if/else` statements the syntax looks like this:\r\n\r\n       if(condition){\r\n          //do something \r\n       } else if (condition) {\r\n          //do something\r\n       } else {\r\n         //do something\r\n       }\r\nNotice the placement of your current braces do not match this syntax.\r\n\r\n2. With that in mind, you need `else if`s and you mentioned in a comment that these are integers. So we should change how we return it if we want a string value. We can do `String.valueOf(num)` or `Integer.toString(num)` It&#39;ll look like this:\r\n\r\n  \r\n\r\n       public String lowCard() {\r\n        if ((card1 &lt; card2) &amp;&amp; \r\n            (card1 &lt; card3) &amp;&amp;\r\n            (card1 &lt; card4)) \r\n        {\r\n            return Integer.toString(card1);\r\n        }\r\n        \r\n        else if ((card2 &lt; card1) &amp;&amp; \r\n                 (card2 &lt; card3) &amp;&amp;\r\n                 (card2 &lt; card4))  \r\n        {\r\n            return  Integer.toString(card2);\r\n        }\r\n        \r\n        else if ((card3 &lt; card1) &amp;&amp; \r\n                 (card3 &lt; card2) &amp;&amp;\r\n                 (card3 &lt; card4))  \r\n        {\r\n            return  Integer.toString(card3);\r\n        }\r\n        else\r\n            return  Integer.toString(card4);\r\n        }\r\n\r\nNow remember that these cards HAVE to be global variables because you haven&#39;t passed them into your function. As for where it says &quot;of clubs&quot; or &quot;of diamonds&quot; you got me. That&#39;s not listed in the question anywhere. If you complete your question, I can complete this answer.","title":"I need this boolean to give me the lowest card value and print the first lowest card. When i use this method, it gives me the last card value","body":"<p>So there's a few things happening here that we can make better.</p>\n<ol>\n<li><p>This code as written does not compile. We can't have 2 <code>else</code>s after an <code>if</code>. <code>else</code> should be the last in the decision tree with no conditions. When we do <code>if/else if/else</code> statements the syntax looks like this:</p>\n<pre><code>if(condition){\n   //do something \n} else if (condition) {\n   //do something\n} else {\n  //do something\n}\n</code></pre>\n</li>\n</ol>\n<p>Notice the placement of your current braces do not match this syntax.</p>\n<ol start=\"2\">\n<li><p>With that in mind, you need <code>else if</code>s and you mentioned in a comment that these are integers. So we should change how we return it if we want a string value. We can do <code>String.valueOf(num)</code> or <code>Integer.toString(num)</code> It'll look like this:</p>\n<pre><code>public String lowCard() {\n if ((card1 &lt; card2) &amp;&amp; \n     (card1 &lt; card3) &amp;&amp;\n     (card1 &lt; card4)) \n {\n     return Integer.toString(card1);\n }\n\n else if ((card2 &lt; card1) &amp;&amp; \n          (card2 &lt; card3) &amp;&amp;\n          (card2 &lt; card4))  \n {\n     return  Integer.toString(card2);\n }\n\n else if ((card3 &lt; card1) &amp;&amp; \n          (card3 &lt; card2) &amp;&amp;\n          (card3 &lt; card4))  \n {\n     return  Integer.toString(card3);\n }\n else\n     return  Integer.toString(card4);\n }\n</code></pre>\n</li>\n</ol>\n<p>Now remember that these cards HAVE to be global variables because you haven't passed them into your function. As for where it says &quot;of clubs&quot; or &quot;of diamonds&quot; you got me. That's not listed in the question anywhere. If you complete your question, I can complete this answer.</p>\n"}],"owner":{"account_id":23154264,"reputation":5,"user_id":17255746,"display_name":"Jay Khan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1635967314,"creation_date":1635962381,"question_id":69829661,"body_markdown":"\tpublic String lowCard() {\r\n\t\tif (card1.getValue() &lt; card2.getValue() &amp;&amp; \r\n\t\t\t\tcard1.getValue() &lt;card3.getValue() &amp;&amp;\r\n\t\t\t\tcard1.getValue() &lt; card4.getValue()) {\r\n\t\t\treturn new string (card1.toString());\r\n\t\t}\r\n\t\t\r\n\t\telse (card2.getValue() &lt; card1.getValue() &amp;&amp;\r\n\t\t\t\tcard2.getValue() &lt; card3.getValue() &amp;&amp;\r\n\t\t\t\tcard2.getValue() &lt; card4.getValue()) {\r\n\t\t\treturn (card2.toString());\r\n\t\t}\r\n\t\t\r\n\t\telse (card3.getValue() &lt; card1.getValue() &amp;&amp;\r\n\t\t\t\tcard3.getValue() &lt; card2.getValue() &amp;&amp;\r\n\t\t\t\tcard3.getValue() &lt; card4.getValue()) {\r\n\t\t\treturn (card3.toString());\r\n\t\t}\r\n\t\telse\r\n\t\t\treturn (card4.toString());\r\n\t}\r\n\r\n\r\nIt should print..\r\n3 of clubs\r\n2 of diamonds\r\n5 of clubs\r\n2 of clubs\r\nThe low card is 2 of diamonds\r\n\r\nbut it prints...\r\n3 of clubs\r\n2 of diamonds\r\n5 of clubs\r\n2 of clubs\r\nThe low card is 2 of clubs","title":"I need this boolean to give me the lowest card value and print the first lowest card. When i use this method, it gives me the last card value","body":"<pre><code>public String lowCard() {\n    if (card1.getValue() &lt; card2.getValue() &amp;&amp; \n            card1.getValue() &lt;card3.getValue() &amp;&amp;\n            card1.getValue() &lt; card4.getValue()) {\n        return new string (card1.toString());\n    }\n    \n    else (card2.getValue() &lt; card1.getValue() &amp;&amp;\n            card2.getValue() &lt; card3.getValue() &amp;&amp;\n            card2.getValue() &lt; card4.getValue()) {\n        return (card2.toString());\n    }\n    \n    else (card3.getValue() &lt; card1.getValue() &amp;&amp;\n            card3.getValue() &lt; card2.getValue() &amp;&amp;\n            card3.getValue() &lt; card4.getValue()) {\n        return (card3.toString());\n    }\n    else\n        return (card4.toString());\n}\n</code></pre>\n<p>It should print..\n3 of clubs\n2 of diamonds\n5 of clubs\n2 of clubs\nThe low card is 2 of diamonds</p>\n<p>but it prints...\n3 of clubs\n2 of diamonds\n5 of clubs\n2 of clubs\nThe low card is 2 of clubs</p>\n"},{"tags":["java","javafx","mouse-position"],"comments":[{"owner":{"account_id":5237964,"reputation":6741,"user_id":4185959,"accept_rate":64,"display_name":"Itai"},"score":3,"creation_date":1456991026,"post_id":35765506,"comment_id":59204008,"body_markdown":"Have a look [here](http://stackoverflow.com/questions/16635514/how-to-get-location-of-mouse-in-javafx) . \nBasically - you can have a `MouseMoved` listener (on your root node) that keeps track of the current position in some member field(s). Don&#39;t know if that&#39;s the optimal way though, so you may want to wait for expert opinion :)","body":"Have a look <a href=\"http://stackoverflow.com/questions/16635514/how-to-get-location-of-mouse-in-javafx\">here</a> .  Basically - you can have a <code>MouseMoved</code> listener (on your root node) that keeps track of the current position in some member field(s). Don&#39;t know if that&#39;s the optimal way though, so you may want to wait for expert opinion :)"},{"owner":{"account_id":6429887,"reputation":604,"user_id":4983531,"accept_rate":100,"display_name":"Steven"},"score":0,"creation_date":1456991293,"post_id":35765506,"comment_id":59204191,"body_markdown":"@sillyfly in my opinion, that would be the best option too. Keep track of the mouse through mouse listener","body":"@sillyfly in my opinion, that would be the best option too. Keep track of the mouse through mouse listener"},{"owner":{"account_id":1638510,"reputation":1913,"user_id":1511403,"accept_rate":75,"display_name":"T.G"},"score":0,"creation_date":1456991713,"post_id":35765506,"comment_id":59204424,"body_markdown":"@Steven: He probably meant, that this way mouse position will be tracked always, and it would be much better if it would be tracked only when key is pressed.","body":"@Steven: He probably meant, that this way mouse position will be tracked always, and it would be much better if it would be tracked only when key is pressed."},{"owner":{"account_id":6429887,"reputation":604,"user_id":4983531,"accept_rate":100,"display_name":"Steven"},"score":0,"creation_date":1456996375,"post_id":35765506,"comment_id":59207343,"body_markdown":"@T.G that&#39;s what I meant. Have a global variable keeping track of Mouse Point at all times, and just recall that when a key is pressed. Seems like the only way IMO.","body":"@T.G that&#39;s what I meant. Have a global variable keeping track of Mouse Point at all times, and just recall that when a key is pressed. Seems like the only way IMO."}],"answers":[{"tags":[],"owner":{"account_id":4688412,"reputation":8118,"user_id":3795219,"accept_rate":70,"display_name":"Austin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1456991899,"creation_date":1456991899,"answer_id":35766304,"question_id":35765506,"body_markdown":"When the `KeyEvent` fires, just get the pointer location using `MouseInfo`. \r\n\r\n\t@Override\r\n\tpublic void handle(KeyEvent keyEvent) {\r\n\tif (keyEvent.isShortcutDown()) {\r\n\t    if (keyEvent.getCode() == KeyCode.P) {\r\n\t        //Code Here\r\n\t        Point mouseLoc = MouseInfo.getPointerInfo().getLocation();\r\n\t    }\r\n\t}\r\n\r\nIf you want to continuously track the mouse location, you should use a `MouseMoved` listener.","title":"Get Mouse Position when pressing a character","body":"<p>When the <code>KeyEvent</code> fires, just get the pointer location using <code>MouseInfo</code>. </p>\n\n<pre><code>@Override\npublic void handle(KeyEvent keyEvent) {\nif (keyEvent.isShortcutDown()) {\n    if (keyEvent.getCode() == KeyCode.P) {\n        //Code Here\n        Point mouseLoc = MouseInfo.getPointerInfo().getLocation();\n    }\n}\n</code></pre>\n\n<p>If you want to continuously track the mouse location, you should use a <code>MouseMoved</code> listener.</p>\n"},{"tags":[],"owner":{"account_id":6898784,"reputation":518,"user_id":5299082,"accept_rate":0,"display_name":"Krusty the Clown"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635966805,"creation_date":1635966805,"answer_id":69830549,"question_id":35765506,"body_markdown":"Hey here from five years in the future. Since JavaFX still doesn&#39;t have this feature for some reason, my solution was to subtract the X/Y position of the cursor&#39;s position on the screen (java.awt.MouseInfo) from the X/Y position of the stage. As an example for Y:\r\n\r\n      MouseInfo.getPointerInfo().getLocation().getY() - stage.getY()\r\n\r\nIt&#39;s not perfect, you&#39;ll have to optimize it a bit, but it&#39;s an actual solution (the first guy who answered seems to think the screen equals the stage...)","title":"Get Mouse Position when pressing a character","body":"<p>Hey here from five years in the future. Since JavaFX still doesn't have this feature for some reason, my solution was to subtract the X/Y position of the cursor's position on the screen (java.awt.MouseInfo) from the X/Y position of the stage. As an example for Y:</p>\n<pre><code>  MouseInfo.getPointerInfo().getLocation().getY() - stage.getY()\n</code></pre>\n<p>It's not perfect, you'll have to optimize it a bit, but it's an actual solution (the first guy who answered seems to think the screen equals the stage...)</p>\n"}],"owner":{"account_id":4720185,"reputation":190,"user_id":3818324,"accept_rate":78,"display_name":"JBaoz"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1208,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1635966805,"creation_date":1456989357,"question_id":35765506,"body_markdown":"I want to get the position of my mouse relative to the frame when I click a shortcut:\r\n\r\n    @Override\r\n    public void handle(KeyEvent keyEvent) {\r\n        if (keyEvent.isShortcutDown()) {\r\n            if (keyEvent.getCode() == KeyCode.P) {\r\n                //Code Here\r\n            }\r\n        }\r\n    }","title":"Get Mouse Position when pressing a character","body":"<p>I want to get the position of my mouse relative to the frame when I click a shortcut:</p>\n\n<pre><code>@Override\npublic void handle(KeyEvent keyEvent) {\n    if (keyEvent.isShortcutDown()) {\n        if (keyEvent.getCode() == KeyCode.P) {\n            //Code Here\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","jpa","spring-data-jpa","spring-data-rest"],"comments":[{"owner":{"account_id":9596641,"reputation":873,"user_id":7125557,"display_name":"dimirsen Z"},"score":0,"creation_date":1635520504,"post_id":69770093,"comment_id":123328738,"body_markdown":"If you change the representation of uuid in _link section, the client app may request a link with this base32 coded uuid. Is your backend app ready to serve this link without implicit decoding?","body":"If you change the representation of uuid in _link section, the client app may request a link with this base32 coded uuid. Is your backend app ready to serve this link without implicit decoding?"},{"owner":{"account_id":5400190,"reputation":383,"user_id":4300292,"accept_rate":100,"display_name":"BrendanM"},"score":0,"creation_date":1635595613,"post_id":69770093,"comment_id":123343700,"body_markdown":"Yes it is expecting all uuids to be encoded in base32. So currently the links all fail with 404","body":"Yes it is expecting all uuids to be encoded in base32. So currently the links all fail with 404"}],"answers":[{"tags":[],"owner":{"account_id":23134322,"reputation":107,"user_id":17238746,"display_name":"Ankit Srivastava"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635562416,"creation_date":1635562416,"answer_id":69776437,"question_id":69770093,"body_markdown":"By default, the liveness and readiness probe paths use Spring Boot 2.x+ actuator endpoints. To use Spring Boot 1.x actuator endpoint paths, you must adjust the liveness and readiness values, as the following example shows (replace &lt;application&gt; with the name of your application):\r\n\r\n    deployer.&lt;application&gt;.kubernetes.livenessProbePath=/health\r\n    deployer.&lt;application&gt;.kubernetes.readinessProbePath=/info\r\nTo automatically set both liveness and readiness endpoints on a per-application basis to the default Spring Boot 1.x paths, you can set the following property:\r\n\r\n    deployer.&lt;application&gt;.kubernetes.bootMajorVersion=1\r\n\r\n","title":"Change UUID encoding to base-32 in spring-data-rest HAL _links","body":"<p>By default, the liveness and readiness probe paths use Spring Boot 2.x+ actuator endpoints. To use Spring Boot 1.x actuator endpoint paths, you must adjust the liveness and readiness values, as the following example shows (replace  with the name of your application):</p>\n<pre><code>deployer.&lt;application&gt;.kubernetes.livenessProbePath=/health\ndeployer.&lt;application&gt;.kubernetes.readinessProbePath=/info\n</code></pre>\n<p>To automatically set both liveness and readiness endpoints on a per-application basis to the default Spring Boot 1.x paths, you can set the following property:</p>\n<pre><code>deployer.&lt;application&gt;.kubernetes.bootMajorVersion=1\n</code></pre>\n"}],"owner":{"account_id":5400190,"reputation":383,"user_id":4300292,"accept_rate":100,"display_name":"BrendanM"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":224,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1635966581,"creation_date":1635515481,"question_id":69770093,"body_markdown":"We recently began converting our controllers over to spring-data-rest repositories but in our system we must encode UUIDs in base-32. \r\n\r\nWe were able to solve this for the response content and the urls using the RepositoryRestConfigurer but the UUIDs still show in the standard format in the _links. \r\n\r\nCurrent jackson mapper config:\r\n\r\n    @Override\r\n    public void configureConversionService(ConfigurableConversionService conversionService)\r\n    {\r\n      conversionService.addConverter(String.class, UUID.class, new StringUuidConverter());\r\n    }\r\n\r\n    @Override public void configureJacksonObjectMapper(ObjectMapper objectMapper)\r\n    {\r\n      SimpleModule module = new SimpleModule();\r\n      module.addSerializer(UUID.class, new UUIDSerialiser());\r\n      module.addDeserializer(UUID.class, new UUIDDeserialiser());\r\n\r\n      objectMapper.registerModule(module);\r\n    }\r\n\r\nIs there a similar way to change the _links?\r\n\r\nEdit:\r\nWe have decided to enable support for dash separated uuids along with base32 in incoming requests. This is not a great solution however as it is confusing for clients that our _links are not base32 so we are still looking for a proper solution","title":"Change UUID encoding to base-32 in spring-data-rest HAL _links","body":"<p>We recently began converting our controllers over to spring-data-rest repositories but in our system we must encode UUIDs in base-32.</p>\n<p>We were able to solve this for the response content and the urls using the RepositoryRestConfigurer but the UUIDs still show in the standard format in the _links.</p>\n<p>Current jackson mapper config:</p>\n<pre><code>@Override\npublic void configureConversionService(ConfigurableConversionService conversionService)\n{\n  conversionService.addConverter(String.class, UUID.class, new StringUuidConverter());\n}\n\n@Override public void configureJacksonObjectMapper(ObjectMapper objectMapper)\n{\n  SimpleModule module = new SimpleModule();\n  module.addSerializer(UUID.class, new UUIDSerialiser());\n  module.addDeserializer(UUID.class, new UUIDDeserialiser());\n\n  objectMapper.registerModule(module);\n}\n</code></pre>\n<p>Is there a similar way to change the _links?</p>\n<p>Edit:\nWe have decided to enable support for dash separated uuids along with base32 in incoming requests. This is not a great solution however as it is confusing for clients that our _links are not base32 so we are still looking for a proper solution</p>\n"},{"tags":["java","apache-spark","gradle","build.gradle"],"owner":{"account_id":3546793,"reputation":1587,"user_id":2962555,"accept_rate":44,"display_name":"Laodao"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1635966259,"creation_date":1635966259,"question_id":69830439,"body_markdown":"I am trying to write some unit testing for my Java Spark code. Below are my first simple try\r\n\r\n    public class SparkHelperTest {\r\n    \r\n        private JavaSparkContext sparkCtx;\r\n    \r\n        @Before\r\n        public void setUp() throws IllegalArgumentException, IOException {\r\n            SparkConf conf = new SparkConf();\r\n            conf.setMaster(&quot;local[2]&quot;);\r\n            conf.setAppName(&quot;sparkHelperTest&quot;);\r\n            sparkCtx = new JavaSparkContext(conf);\r\n        }\r\n    \r\n        @Test\r\n        public void test() {\r\n            final List&lt;Integer&gt; nums = new ArrayList&lt;Integer&gt;();\r\n            nums.add(3);\r\n            nums.add(4);\r\n            nums.add(2);\r\n            JavaRDD&lt;Integer&gt; rdd = sparkCtx.parallelize(nums,1);\r\n            assertEquals(3, rdd.count());\r\n        }\r\n    }\r\n\r\nHowever I got this error \r\n\r\n   \r\n\r\n    java.lang.NoClassDefFoundError: com/sun/jersey/spi/container/servlet/ServletContainer\r\n        \tat org.apache.spark.status.api.v1.ApiRootResource$.getServletHandler(ApiRootResource.scala:187)\r\n        \tat org.apache.spark.ui.SparkUI.initialize(SparkUI.scala:70)\r\n        \tat org.apache.spark.ui.SparkUI.&lt;init&gt;(SparkUI.scala:76)\r\n        \tat org.apache.spark.ui.SparkUI$.create(SparkUI.scala:195)\r\n        \tat org.apache.spark.ui.SparkUI$.createLiveUI(SparkUI.scala:146)\r\n        \tat org.apache.spark.SparkContext.&lt;init&gt;(SparkContext.scala:473)\r\n        \tat org.apache.spark.api.java.JavaSparkContext.&lt;init&gt;(JavaSparkContext.scala:59)\r\n        \tat com.firsttry.spark.SparkHelperTest.setUp(SparkHelperTest.java:29)\r\n        \t......\r\n        \tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\r\n        \tat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\r\n        \tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\r\n        \tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\r\n        Caused by: java.lang.ClassNotFoundException: com.sun.jersey.spi.container.servlet.ServletContainer\r\n        \tat java.net.URLClassLoader.findClass(URLClassLoader.java:381)\r\n        \tat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n        \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)\r\n        \tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n        \t... 30 more\r\n\r\nI googled online and basically it is because the jersey version 1 is required. However, I found the jersey v1 was commented in our build.gradle as below\r\n\r\n    compile (\r\n                &#39;io.dropwizard:dropwizard-core:&#39; + dropwizardVersion,\r\n                ......\r\n    )\r\n    compile(&#39;org.apache.spark:spark-core_2.10:&#39; + sparkVersion) {\r\n            exclude group: &#39;org.apache.hadoop&#39;, module: &#39;hadoop-common&#39;\r\n    }    \r\n    configurations.all {\r\n            // all v1 versions of jersey should be excluded. Spark has some of these dependencies\r\n            exclude group: &#39;com.sun.jersey&#39;, module: &#39;jersey-server&#39;\r\n            ......\r\n    }\r\n\r\nif I commented this &quot;`exclude group: &#39;com.sun.jersey&#39;, module: &#39;jersey-server&#39;`&quot;, this error will be gone for unit test. However, after I build the task and run the spark job, I will got another error (note that with this &quot;exclude&quot;, the spark job is running fine, so I guess there is a reason people put this exclude there). \r\nHowever, the mystery is if I simply copy the code in the test() method of the unit testing into the &quot;normal run&quot; code, the spark job is also running fine without requiring this jersey v1 issue. Can any body help, please?","title":"The unit test code for Java Spark doesn&#39;t work, but the spark run with the same code runs fine","body":"<p>I am trying to write some unit testing for my Java Spark code. Below are my first simple try</p>\n<pre><code>public class SparkHelperTest {\n\n    private JavaSparkContext sparkCtx;\n\n    @Before\n    public void setUp() throws IllegalArgumentException, IOException {\n        SparkConf conf = new SparkConf();\n        conf.setMaster(&quot;local[2]&quot;);\n        conf.setAppName(&quot;sparkHelperTest&quot;);\n        sparkCtx = new JavaSparkContext(conf);\n    }\n\n    @Test\n    public void test() {\n        final List&lt;Integer&gt; nums = new ArrayList&lt;Integer&gt;();\n        nums.add(3);\n        nums.add(4);\n        nums.add(2);\n        JavaRDD&lt;Integer&gt; rdd = sparkCtx.parallelize(nums,1);\n        assertEquals(3, rdd.count());\n    }\n}\n</code></pre>\n<p>However I got this error</p>\n<pre><code>java.lang.NoClassDefFoundError: com/sun/jersey/spi/container/servlet/ServletContainer\n        at org.apache.spark.status.api.v1.ApiRootResource$.getServletHandler(ApiRootResource.scala:187)\n        at org.apache.spark.ui.SparkUI.initialize(SparkUI.scala:70)\n        at org.apache.spark.ui.SparkUI.&lt;init&gt;(SparkUI.scala:76)\n        at org.apache.spark.ui.SparkUI$.create(SparkUI.scala:195)\n        at org.apache.spark.ui.SparkUI$.createLiveUI(SparkUI.scala:146)\n        at org.apache.spark.SparkContext.&lt;init&gt;(SparkContext.scala:473)\n        at org.apache.spark.api.java.JavaSparkContext.&lt;init&gt;(JavaSparkContext.scala:59)\n        at com.firsttry.spark.SparkHelperTest.setUp(SparkHelperTest.java:29)\n        ......\n        at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\n        at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\n        at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\n        at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\n    Caused by: java.lang.ClassNotFoundException: com.sun.jersey.spi.container.servlet.ServletContainer\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n        ... 30 more\n</code></pre>\n<p>I googled online and basically it is because the jersey version 1 is required. However, I found the jersey v1 was commented in our build.gradle as below</p>\n<pre><code>compile (\n            'io.dropwizard:dropwizard-core:' + dropwizardVersion,\n            ......\n)\ncompile('org.apache.spark:spark-core_2.10:' + sparkVersion) {\n        exclude group: 'org.apache.hadoop', module: 'hadoop-common'\n}    \nconfigurations.all {\n        // all v1 versions of jersey should be excluded. Spark has some of these dependencies\n        exclude group: 'com.sun.jersey', module: 'jersey-server'\n        ......\n}\n</code></pre>\n<p>if I commented this &quot;<code>exclude group: 'com.sun.jersey', module: 'jersey-server'</code>&quot;, this error will be gone for unit test. However, after I build the task and run the spark job, I will got another error (note that with this &quot;exclude&quot;, the spark job is running fine, so I guess there is a reason people put this exclude there).\nHowever, the mystery is if I simply copy the code in the test() method of the unit testing into the &quot;normal run&quot; code, the spark job is also running fine without requiring this jersey v1 issue. Can any body help, please?</p>\n"},{"tags":["java","date"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":2,"creation_date":1634761649,"post_id":69652542,"comment_id":123115887,"body_markdown":"Must you use `MEDIUM`? Using `LONG` or `FULL` typically gives you a timezone.","body":"Must you use <code>MEDIUM</code>? Using <code>LONG</code> or <code>FULL</code> typically gives you a timezone."},{"owner":{"account_id":4104221,"reputation":3989,"user_id":3368818,"accept_rate":75,"display_name":"Woodchuck"},"score":0,"creation_date":1634762004,"post_id":69652542,"comment_id":123116021,"body_markdown":"It&#39;s a great question. Using `LONG` is apparently about the same, but with the month spelled out in full. It&#39;s probably my best, and simplest, way to go. I guess I&#39;m just being particular in that I would rather keep the month abbreviated while also adding the time zone - if there&#39;s a way to do that.","body":"It&#39;s a great question. Using <code>LONG</code> is apparently about the same, but with the month spelled out in full. It&#39;s probably my best, and simplest, way to go. I guess I&#39;m just being particular in that I would rather keep the month abbreviated while also adding the time zone - if there&#39;s a way to do that."},{"owner":{"account_id":4104221,"reputation":3989,"user_id":3368818,"accept_rate":75,"display_name":"Woodchuck"},"score":1,"creation_date":1634837285,"post_id":69652542,"comment_id":123140646,"body_markdown":"Thanks all for such great answers! Most every one works perfectly for my use case.","body":"Thanks all for such great answers! Most every one works perfectly for my use case."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1634888892,"post_id":69652542,"comment_id":123152422,"body_markdown":"Printing `EST`, that depends a lot. Australian readers will understand Australian Eastern Standard Time, North American readers the North American ditto, God knows what readers elsewhere will assume. Think twice, but if presented in a context where the ambiguity somehow isn&#39;t an issue, `EST` is fine (only never try to parse it back).","body":"Printing <code>EST</code>, that depends a lot. Australian readers will understand Australian Eastern Standard Time, North American readers the North American ditto, God knows what readers elsewhere will assume. Think twice, but if presented in a context where the ambiguity somehow isn&#39;t an issue, <code>EST</code> is fine (only never try to parse it back)."}],"answers":[{"tags":[],"owner":{"account_id":17664504,"reputation":121,"user_id":12822225,"display_name":"Likqez"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634762358,"creation_date":1634761998,"answer_id":69652693,"question_id":69652542,"body_markdown":"the ZonedDateTime can retrieve the current ZoneId. With the Zone, you can just use the ``getDisplayName(TextStyle style, Locale locale)`` getter. Just experiment which TextStyle is the best for you.\r\n\r\n```\r\nzdt.getZone().getDisplayName(TextStyle.SHORT, Locale.ENGLISH)\r\n==&gt; ET\r\n```","title":"Format LocalDateTime using FormatStyle.MEDIUM plus time zone","body":"<p>the ZonedDateTime can retrieve the current ZoneId. With the Zone, you can just use the <code>getDisplayName(TextStyle style, Locale locale)</code> getter. Just experiment which TextStyle is the best for you.</p>\n<pre><code>zdt.getZone().getDisplayName(TextStyle.SHORT, Locale.ENGLISH)\n==&gt; ET\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1634917485,"creation_date":1634762420,"answer_id":69652756,"question_id":69652542,"body_markdown":"# tl;dr\r\n\r\nIf you want a hint as to the time zone in use, use the `LONG` format for time-of-day portion. Optionally specify a different format such as `MEDIUM` for the date portion.\r\n\r\n```java\r\nZonedDateTime\r\n    .now( ZoneId.of( &quot;America/New_York&quot; ) )\r\n    .format(\r\n    \tDateTimeFormatter\r\n    \t\t.ofLocalizedDateTime( \r\n                FormatStyle.MEDIUM ,     // Date portion style.\r\n                FormatStyle.LONG         // Time-of-day portion style.\r\n            )   \r\n    \t\t.withLocale( Locale.US )     // Locale determines the human language and cultural norms used in localizing.\r\n    )\r\n```\r\n\r\nSee this [code run live at IdeOne.com][1].\r\n\r\n&gt;Oct 20, 2021, 4:48:46 PM EDT\r\n\r\nNever use `EDT`, `CST`, `IST`, and such for data-exchange. Do not attempt parsing of such values. These are not [real time zones][2], are not standardized, and are not even unique!\r\n\r\n# Avoid `LocalDateTime.now`\r\n\r\nI cannot imagine any scenario where calling `LocalDateTime.now` is the right thing to do. You capture the date and time-of-day but lack the context of a time zone or offset-from-UTC. So a `LocalDateTime` by definition **cannot represent a moment**, is *not* a point on the timeline.\r\n\r\nIf you want to capture the current moment without committing to a particular time zone, capture the current moment as seen with an offset-from-UTC of zero hours-minutes-seconds.\r\n\r\n    Instant instant = Instant.now() ;  // Current moment as seen in UTC. \r\n\r\n# Use `ZonedDateTime.now`\r\n\r\nIf you want to capture the current moment as seen in `America/New_York` time zone, start with a `ZonedDateTime`.\r\n\r\n    ZonedDateTime.now( ZoneId.of( &quot;America/New_York&quot; ) )\r\n\r\nTo generate text representing a *java.time* object, use `toString` method to get text in standard [ISO 8601][3] format. While such output may seem less readable at first glance, the standard formats are designed to be maximally readable by people across cultures.\r\n\r\nTo get a localized format, I suggest you let *java.time* automatically localize.\r\n\r\n```java\r\nZoneId z = ZoneId.of( &quot;America/New_York&quot; );\r\nZonedDateTime zdt = ZonedDateTime.now( z );\r\nSystem.out.println( &quot;zdt represented in standard ISO 8601 format: &quot; + zdt.toString() );\r\n\r\nLocale locale = Locale.US ; \r\nDateTimeFormatter f_US = DateTimeFormatter.ofLocalizedDateTime( FormatStyle.MEDIUM ).withLocale( locale ) ;\r\nString outputLocalized_US = zdt.format( f_US ) ;\r\nString outputLocalized_CA_fr = zdt.format( f_US.withLocale( Locale.CANADA_FRENCH ) ) ;\r\n\r\nSystem.out.println( outputLocalized_US ) ;\r\nSystem.out.println( outputLocalized_CA_fr ) ;\r\n```\r\n\r\nWhen run.\r\n\r\n```none\r\nzdt represented in standard ISO 8601 format: 2021-10-20T16:37:57.752554-04:00[America/New_York]\r\nOct 20, 2021, 4:37:57 PM\r\n20 oct. 2021 16 h 37 min 57 s\r\n```\r\n\r\n# Separate formats for date &amp; time\r\n\r\nYou can specify different formats for the date versus time-of-day portions. Use a longer format for time-of-day portion to get a hint of the time zone while using a shorter format for date portion, if you so desire.\r\n\r\n```java\r\n        DateTimeFormatter\r\n            .ofLocalizedDateTime( \r\n                FormatStyle.MEDIUM ,     // Date portion format.\r\n                FormatStyle.LONG         // Time-of-day portion format.\r\n            )   \r\n```\r\n\r\n\r\n  [1]: https://ideone.com/lLuNq5\r\n  [2]: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\r\n  [3]: https://en.wikipedia.org/wiki/ISO_8601","title":"Format LocalDateTime using FormatStyle.MEDIUM plus time zone","body":"<h1>tl;dr</h1>\n<p>If you want a hint as to the time zone in use, use the <code>LONG</code> format for time-of-day portion. Optionally specify a different format such as <code>MEDIUM</code> for the date portion.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ZonedDateTime\n    .now( ZoneId.of( &quot;America/New_York&quot; ) )\n    .format(\n        DateTimeFormatter\n            .ofLocalizedDateTime( \n                FormatStyle.MEDIUM ,     // Date portion style.\n                FormatStyle.LONG         // Time-of-day portion style.\n            )   \n            .withLocale( Locale.US )     // Locale determines the human language and cultural norms used in localizing.\n    )\n</code></pre>\n<p>See this <a href=\"https://ideone.com/lLuNq5\" rel=\"nofollow noreferrer\">code run live at IdeOne.com</a>.</p>\n<blockquote>\n<p>Oct 20, 2021, 4:48:46 PM EDT</p>\n</blockquote>\n<p>Never use <code>EDT</code>, <code>CST</code>, <code>IST</code>, and such for data-exchange. Do not attempt parsing of such values. These are not <a href=\"https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\" rel=\"nofollow noreferrer\">real time zones</a>, are not standardized, and are not even unique!</p>\n<h1>Avoid <code>LocalDateTime.now</code></h1>\n<p>I cannot imagine any scenario where calling <code>LocalDateTime.now</code> is the right thing to do. You capture the date and time-of-day but lack the context of a time zone or offset-from-UTC. So a <code>LocalDateTime</code> by definition <strong>cannot represent a moment</strong>, is <em>not</em> a point on the timeline.</p>\n<p>If you want to capture the current moment without committing to a particular time zone, capture the current moment as seen with an offset-from-UTC of zero hours-minutes-seconds.</p>\n<pre><code>Instant instant = Instant.now() ;  // Current moment as seen in UTC. \n</code></pre>\n<h1>Use <code>ZonedDateTime.now</code></h1>\n<p>If you want to capture the current moment as seen in <code>America/New_York</code> time zone, start with a <code>ZonedDateTime</code>.</p>\n<pre><code>ZonedDateTime.now( ZoneId.of( &quot;America/New_York&quot; ) )\n</code></pre>\n<p>To generate text representing a <em>java.time</em> object, use <code>toString</code> method to get text in standard <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> format. While such output may seem less readable at first glance, the standard formats are designed to be maximally readable by people across cultures.</p>\n<p>To get a localized format, I suggest you let <em>java.time</em> automatically localize.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ZoneId z = ZoneId.of( &quot;America/New_York&quot; );\nZonedDateTime zdt = ZonedDateTime.now( z );\nSystem.out.println( &quot;zdt represented in standard ISO 8601 format: &quot; + zdt.toString() );\n\nLocale locale = Locale.US ; \nDateTimeFormatter f_US = DateTimeFormatter.ofLocalizedDateTime( FormatStyle.MEDIUM ).withLocale( locale ) ;\nString outputLocalized_US = zdt.format( f_US ) ;\nString outputLocalized_CA_fr = zdt.format( f_US.withLocale( Locale.CANADA_FRENCH ) ) ;\n\nSystem.out.println( outputLocalized_US ) ;\nSystem.out.println( outputLocalized_CA_fr ) ;\n</code></pre>\n<p>When run.</p>\n<pre class=\"lang-none prettyprint-override\"><code>zdt represented in standard ISO 8601 format: 2021-10-20T16:37:57.752554-04:00[America/New_York]\nOct 20, 2021, 4:37:57 PM\n20 oct. 2021 16 h 37 min 57 s\n</code></pre>\n<h1>Separate formats for date &amp; time</h1>\n<p>You can specify different formats for the date versus time-of-day portions. Use a longer format for time-of-day portion to get a hint of the time zone while using a shorter format for date portion, if you so desire.</p>\n<pre class=\"lang-java prettyprint-override\"><code>        DateTimeFormatter\n            .ofLocalizedDateTime( \n                FormatStyle.MEDIUM ,     // Date portion format.\n                FormatStyle.LONG         // Time-of-day portion format.\n            )   \n</code></pre>\n"},{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634762487,"creation_date":1634762487,"answer_id":69652771,"question_id":69652542,"body_markdown":"Note that if you use `LONG` or `FULL` for the time style, the zone will be included:\r\n\r\n    ZonedDateTime zdt = ZonedDateTime.now(ZoneId.of(&quot;America/New_York&quot;));\r\n    DateTimeFormatter formatter = DateTimeFormatter.ofLocalizedDateTime(FormatStyle.MEDIUM, FormatStyle.LONG);\r\n    System.out.println(zdt.format(formatter));\r\n\r\nIn the US locale, this prints:\r\n\r\n    Oct 20, 2021, 4:34:16 PM EDT\r\n\r\nThis is [documented here][1]:\r\n\r\n&gt; The `FULL` and `LONG` styles typically require a time-zone. When formatting using these styles, a ZoneId must be available, either by using `ZonedDateTime` or `withZone(java.time.ZoneId)`.\r\n\r\nIn this case, a time style of `LONG` happens to be the same as `MEDIUM`, but if you have to use `MEDIUM` for some reason, you can use a `DateTimeFormatterBuilder` and add the zone by hand:\r\n\r\n    ZonedDateTime zdt = ZonedDateTime.now(ZoneId.of(&quot;America/New_York&quot;));\r\n    DateTimeFormatter formatter = new DateTimeFormatterBuilder()\r\n            .append(DateTimeFormatter.ofLocalizedDateTime(FormatStyle.MEDIUM))\r\n            .appendLiteral(&quot; &quot;)\r\n            .appendZoneText(TextStyle.SHORT).toFormatter();\r\n    System.out.println(zdt.format(formatter));\r\n\r\nThe advantage of this is that you can choose what style of timezone name you want. On the other hand, you might run into localisation issues, because I&#39;m not sure if it is natural in all locales to put the timezone last.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/format/DateTimeFormatter.html#ofLocalizedDateTime(java.time.format.FormatStyle)","title":"Format LocalDateTime using FormatStyle.MEDIUM plus time zone","body":"<p>Note that if you use <code>LONG</code> or <code>FULL</code> for the time style, the zone will be included:</p>\n<pre><code>ZonedDateTime zdt = ZonedDateTime.now(ZoneId.of(&quot;America/New_York&quot;));\nDateTimeFormatter formatter = DateTimeFormatter.ofLocalizedDateTime(FormatStyle.MEDIUM, FormatStyle.LONG);\nSystem.out.println(zdt.format(formatter));\n</code></pre>\n<p>In the US locale, this prints:</p>\n<pre><code>Oct 20, 2021, 4:34:16 PM EDT\n</code></pre>\n<p>This is <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/format/DateTimeFormatter.html#ofLocalizedDateTime(java.time.format.FormatStyle)\" rel=\"nofollow noreferrer\">documented here</a>:</p>\n<blockquote>\n<p>The <code>FULL</code> and <code>LONG</code> styles typically require a time-zone. When formatting using these styles, a ZoneId must be available, either by using <code>ZonedDateTime</code> or <code>withZone(java.time.ZoneId)</code>.</p>\n</blockquote>\n<p>In this case, a time style of <code>LONG</code> happens to be the same as <code>MEDIUM</code>, but if you have to use <code>MEDIUM</code> for some reason, you can use a <code>DateTimeFormatterBuilder</code> and add the zone by hand:</p>\n<pre><code>ZonedDateTime zdt = ZonedDateTime.now(ZoneId.of(&quot;America/New_York&quot;));\nDateTimeFormatter formatter = new DateTimeFormatterBuilder()\n        .append(DateTimeFormatter.ofLocalizedDateTime(FormatStyle.MEDIUM))\n        .appendLiteral(&quot; &quot;)\n        .appendZoneText(TextStyle.SHORT).toFormatter();\nSystem.out.println(zdt.format(formatter));\n</code></pre>\n<p>The advantage of this is that you can choose what style of timezone name you want. On the other hand, you might run into localisation issues, because I'm not sure if it is natural in all locales to put the timezone last.</p>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1634769912,"creation_date":1634769912,"answer_id":69653838,"question_id":69652542,"body_markdown":"&gt; Is there some way to format a ZonedDateTime so it reads similar to\r\n&gt; that produced by `FormatStyle.MEDIUM`, but is appended by the \r\n&gt; timezone - say, something like: `Oct 20, 2021 4:05:13 PM EST`?\r\n\r\nYou can use the format, `MMM d, uuuu h:mm:ss a zzz` with the `DateTimeFormatter`.\r\n\r\n**Demo:**\r\n\r\n    import java.time.ZoneId;\r\n    import java.time.ZonedDateTime;\r\n    import java.time.format.DateTimeFormatter;\r\n    import java.util.Locale;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tZonedDateTime now = ZonedDateTime.now(ZoneId.of(&quot;America/New_York&quot;));\r\n    \t\tDateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;MMM d, uuuu h:mm:ss a zzz&quot;, Locale.ENGLISH);\r\n    \t\tSystem.out.println(now.format(dtf));\r\n    \t}\r\n    }\r\n\r\n\r\n**Output:**\r\n\r\n    Oct 20, 2021 6:41:45 PM EDT\r\n\r\n[&lt;kbd&gt;ONLINE DEMO&lt;/kbd&gt;][1]\r\n\r\n\r\n  [1]: https://ideone.com/2ipF1h","title":"Format LocalDateTime using FormatStyle.MEDIUM plus time zone","body":"<blockquote>\n<p>Is there some way to format a ZonedDateTime so it reads similar to\nthat produced by <code>FormatStyle.MEDIUM</code>, but is appended by the\ntimezone - say, something like: <code>Oct 20, 2021 4:05:13 PM EST</code>?</p>\n</blockquote>\n<p>You can use the format, <code>MMM d, uuuu h:mm:ss a zzz</code> with the <code>DateTimeFormatter</code>.</p>\n<p><strong>Demo:</strong></p>\n<pre><code>import java.time.ZoneId;\nimport java.time.ZonedDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.util.Locale;\n\npublic class Main {\n    public static void main(String[] args) {\n        ZonedDateTime now = ZonedDateTime.now(ZoneId.of(&quot;America/New_York&quot;));\n        DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;MMM d, uuuu h:mm:ss a zzz&quot;, Locale.ENGLISH);\n        System.out.println(now.format(dtf));\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>Oct 20, 2021 6:41:45 PM EDT\n</code></pre>\n<p><a href=\"https://ideone.com/2ipF1h\" rel=\"nofollow noreferrer\"><kbd>ONLINE DEMO</kbd></a></p>\n"}],"owner":{"account_id":4104221,"reputation":3989,"user_id":3368818,"accept_rate":75,"display_name":"Woodchuck"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1031,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":69652756,"answer_count":4,"score":7,"last_activity_date":1635966034,"creation_date":1634761204,"question_id":69652542,"body_markdown":"I have a LocalDateTime object that I format as follows:\r\n    \r\n    LocalDateTime localDateTime = LocalDateTime.now();\r\n    DateTimeFormatter formatter = DateTimeFormatter.ofLocalizedDateTime(FormatStyle.MEDIUM);\r\n    System.out.println(localDateTime.format(formatter));\r\n\r\nThat prints a nicely readable date of `Oct 20, 2021 1:00:02 PM`.\r\n\r\nBut I would like to also add the time zone. My understanding is I need to use ZonedDateTime:\r\n\r\n    ZonedDateTime zdt = localDateTime.atZone(ZoneId.of(&quot;America/New_York&quot;));\r\n    System.out.println(zdt);\r\n\r\nBut that produces the not so readable `2021-10-20T13:00:02.921-04:00[America/New_York]`.\r\n\r\nIs there some way to format a ZonedDateTime so it&#39;s concise and readable like that produced by *FormatStyle.MEDIUM*, but also appended by the timezone (e.g: `Oct 20, 2021 1:00:02 PM EST`)?\r\n\r\nNote: I gather from [this answer][1] that I should *not* actually use &quot;pseudo-zones&quot;, such as **EST**, due to their non-standardized nature.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/47981914/3368818","title":"Format LocalDateTime using FormatStyle.MEDIUM plus time zone","body":"<p>I have a LocalDateTime object that I format as follows:</p>\n<pre><code>LocalDateTime localDateTime = LocalDateTime.now();\nDateTimeFormatter formatter = DateTimeFormatter.ofLocalizedDateTime(FormatStyle.MEDIUM);\nSystem.out.println(localDateTime.format(formatter));\n</code></pre>\n<p>That prints a nicely readable date of <code>Oct 20, 2021 1:00:02 PM</code>.</p>\n<p>But I would like to also add the time zone. My understanding is I need to use ZonedDateTime:</p>\n<pre><code>ZonedDateTime zdt = localDateTime.atZone(ZoneId.of(&quot;America/New_York&quot;));\nSystem.out.println(zdt);\n</code></pre>\n<p>But that produces the not so readable <code>2021-10-20T13:00:02.921-04:00[America/New_York]</code>.</p>\n<p>Is there some way to format a ZonedDateTime so it's concise and readable like that produced by <em>FormatStyle.MEDIUM</em>, but also appended by the timezone (e.g: <code>Oct 20, 2021 1:00:02 PM EST</code>)?</p>\n<p>Note: I gather from <a href=\"https://stackoverflow.com/a/47981914/3368818\">this answer</a> that I should <em>not</em> actually use &quot;pseudo-zones&quot;, such as <strong>EST</strong>, due to their non-standardized nature.</p>\n"},{"tags":["java","red-black-tree","red-black-tree-insertion"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1635974543,"post_id":69757559,"comment_id":123438418,"body_markdown":"Does this answer your question? [What is a NullPointerException, and how do I fix it?](https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it\">What is a NullPointerException, and how do I fix it?</a>"}],"answers":[{"tags":[],"owner":{"account_id":2205100,"reputation":766,"user_id":1948525,"display_name":"SJHowe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635965946,"creation_date":1635965946,"answer_id":69830383,"question_id":69757559,"body_markdown":"If you have just inserted a node, that will be a leaf node and Red.\r\nIf it&#39;s parent is Red that is a violation. Its&#39;s grandparent will automatically be Black. But the uncle may not exist and that was a valid Red-Black tree.\r\n\r\nYou should have function which determines the colour of a Node, bearing in mind that all Nil nodes are Black and you should write the code doing operations if &quot;not Black&quot;.\r\n\r\nIf you climb the tree in the direction of the root, the &quot;Uncle&quot; will be a real node.\r\n\r\nThe same situation occurs if you delete a leaf Node for Deletion fixups.\r\nFor deletion fixups, you need to find the parent, the sibling and the siblings  children. The sibling will always exist but the sibling&#39;s children may be Nil nodes. If they are, they are automatically be black.\r\nIf you have to climb tree to repair for deletion, then again, you will find the siblings children are real.","title":"Null Exception When Balancing Red-Black Tree After Insertion","body":"<p>If you have just inserted a node, that will be a leaf node and Red.\nIf it's parent is Red that is a violation. Its's grandparent will automatically be Black. But the uncle may not exist and that was a valid Red-Black tree.</p>\n<p>You should have function which determines the colour of a Node, bearing in mind that all Nil nodes are Black and you should write the code doing operations if &quot;not Black&quot;.</p>\n<p>If you climb the tree in the direction of the root, the &quot;Uncle&quot; will be a real node.</p>\n<p>The same situation occurs if you delete a leaf Node for Deletion fixups.\nFor deletion fixups, you need to find the parent, the sibling and the siblings  children. The sibling will always exist but the sibling's children may be Nil nodes. If they are, they are automatically be black.\nIf you have to climb tree to repair for deletion, then again, you will find the siblings children are real.</p>\n"}],"owner":{"account_id":23173632,"reputation":1,"user_id":17272493,"display_name":"Lucky_13"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":264,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1635965946,"creation_date":1635437562,"question_id":69757559,"body_markdown":"I&#39;m attempting to write a function to balance a red-black tree after inserting nodes into it, but I&#39;m getting a null pointer exception. On line 156, when I assign temp to node.parent.parent.right, temp is null, meaning node.parent.parent.right is null. I&#39;m not sure why. Would anyone be able to look at my code and try to help me figure out why this issue is occurring?\r\n\r\n```\r\n//Insert Fix function to balance tree after insertion\r\n public void InsertFix(Node&lt;T,U&gt; node)\r\n {\r\n     Node&lt;T,U&gt; temp = node.parent.parent;\r\n     if(node.parent == null)\r\n     {\r\n         System.out.println(&quot;parent is null&quot;);\r\n     }\r\n     while(node.parent.color == 1)\r\n     {\r\n         if(node.parent.equals(node.parent.parent.right))\r\n        {\r\n            temp = node.parent.parent.left; //uncle\r\n            \r\n             \r\n            if(temp.color == 1) //if red parent has red child\r\n            {\r\n                temp.color = 0; //change color of parent\r\n                node.parent.color = 0; //change color of uncle\r\n                node.parent.parent.color = 1; //change color of g-parent\r\n                node= node.parent.parent;\r\n            }\r\n            else \r\n            {\r\n                if(node.equals(node.parent.left))\r\n                {\r\n                    node = node.parent;\r\n                     \r\n                    //Perform a right rotation\r\n                    RightRotation(node);\r\n                }\r\n                \r\n                node.parent.color = 0;\r\n                node.parent.parent.color = 1;\r\n                 \r\n                //Perform a left rotation\r\n                LeftRotation(node.parent.parent);\r\n            }\r\n         }\r\n         \r\n        else\r\n        {\r\n          temp = node.parent.parent.right; //uncle THIS VALUE IS NULL\r\n          System.out.println(node.parent.parent.right);\r\n          if(temp.color == 1)\r\n          {\r\n              temp.color = 0;\r\n              node.parent.color = 0;\r\n              node.parent.parent.color = 1;\r\n              node = node.parent.parent;\r\n          }\r\n          \r\n          else\r\n          {\r\n              if(node.equals(node.parent.right))\r\n              {\r\n                  node = node.parent;\r\n                  LeftRotation(node);\r\n              }\r\n              \r\n              node.parent.color = 0;\r\n              node.parent.parent.color = 1;\r\n              RightRotation(node.parent.parent);\r\n          }\r\n             \r\n        }\r\n        \r\n        if (node == root)\r\n        {\r\n            break;\r\n        }\r\n     }\r\n     \r\n     root.color = 0;\r\n }\r\n```","title":"Null Exception When Balancing Red-Black Tree After Insertion","body":"<p>I'm attempting to write a function to balance a red-black tree after inserting nodes into it, but I'm getting a null pointer exception. On line 156, when I assign temp to node.parent.parent.right, temp is null, meaning node.parent.parent.right is null. I'm not sure why. Would anyone be able to look at my code and try to help me figure out why this issue is occurring?</p>\n<pre><code>//Insert Fix function to balance tree after insertion\n public void InsertFix(Node&lt;T,U&gt; node)\n {\n     Node&lt;T,U&gt; temp = node.parent.parent;\n     if(node.parent == null)\n     {\n         System.out.println(&quot;parent is null&quot;);\n     }\n     while(node.parent.color == 1)\n     {\n         if(node.parent.equals(node.parent.parent.right))\n        {\n            temp = node.parent.parent.left; //uncle\n            \n             \n            if(temp.color == 1) //if red parent has red child\n            {\n                temp.color = 0; //change color of parent\n                node.parent.color = 0; //change color of uncle\n                node.parent.parent.color = 1; //change color of g-parent\n                node= node.parent.parent;\n            }\n            else \n            {\n                if(node.equals(node.parent.left))\n                {\n                    node = node.parent;\n                     \n                    //Perform a right rotation\n                    RightRotation(node);\n                }\n                \n                node.parent.color = 0;\n                node.parent.parent.color = 1;\n                 \n                //Perform a left rotation\n                LeftRotation(node.parent.parent);\n            }\n         }\n         \n        else\n        {\n          temp = node.parent.parent.right; //uncle THIS VALUE IS NULL\n          System.out.println(node.parent.parent.right);\n          if(temp.color == 1)\n          {\n              temp.color = 0;\n              node.parent.color = 0;\n              node.parent.parent.color = 1;\n              node = node.parent.parent;\n          }\n          \n          else\n          {\n              if(node.equals(node.parent.right))\n              {\n                  node = node.parent;\n                  LeftRotation(node);\n              }\n              \n              node.parent.color = 0;\n              node.parent.parent.color = 1;\n              RightRotation(node.parent.parent);\n          }\n             \n        }\n        \n        if (node == root)\n        {\n            break;\n        }\n     }\n     \n     root.color = 0;\n }\n</code></pre>\n"},{"tags":["java","android","java-8","android-gradle-plugin"],"comments":[{"owner":{"account_id":421110,"reputation":1383,"user_id":799161,"accept_rate":57,"display_name":"Hoang Huynh"},"score":21,"creation_date":1398560009,"post_id":23318109,"comment_id":35701719,"body_markdown":"I don&#39;t know about official statement but I&#39;ve got Java 8 (edit:JDK 8) working fine with Android SDK for me. Windows 8.1 64 bit here.","body":"I don&#39;t know about official statement but I&#39;ve got Java 8 (edit:JDK 8) working fine with Android SDK for me. Windows 8.1 64 bit here."},{"owner":{"account_id":3417217,"reputation":602,"user_id":2865744,"display_name":"Aboalnaga"},"score":2,"creation_date":1398560054,"post_id":23318109,"comment_id":35701725,"body_markdown":"There have been a discussion going at this post [How does Android&#39;s Java version relate to a Java SE version?](http://stackoverflow.com/questions/7535385/how-does-androids-java-version-relate-to-a-java-se-version)","body":"There have been a discussion going at this post <a href=\"http://stackoverflow.com/questions/7535385/how-does-androids-java-version-relate-to-a-java-se-version\">How does Android&#39;s Java version relate to a Java SE version?</a>"},{"owner":{"account_id":937963,"reputation":67649,"user_id":966550,"accept_rate":67,"display_name":"waqaslam"},"score":0,"creation_date":1398560125,"post_id":23318109,"comment_id":35701740,"body_markdown":"@HoangHuynh are you referring to `JDK 8`?","body":"@HoangHuynh are you referring to <code>JDK 8</code>?"},{"owner":{"account_id":421110,"reputation":1383,"user_id":799161,"accept_rate":57,"display_name":"Hoang Huynh"},"score":1,"creation_date":1398560189,"post_id":23318109,"comment_id":35701752,"body_markdown":"@waqaslam yes I meant JDK 8.","body":"@waqaslam yes I meant JDK 8."},{"owner":{"account_id":937963,"reputation":67649,"user_id":966550,"accept_rate":67,"display_name":"waqaslam"},"score":2,"creation_date":1398560506,"post_id":23318109,"comment_id":35701823,"body_markdown":"@HoangHuynh you may use JDK 6 or above for Android development. However, the compilation supports Java version 6 (and 7 in case of KitKat). I think what the OP meant is also for java version (not JDK)","body":"@HoangHuynh you may use JDK 6 or above for Android development. However, the compilation supports Java version 6 (and 7 in case of KitKat). I think what the OP meant is also for java version (not JDK)"},{"owner":{"account_id":534720,"reputation":7416,"user_id":904556,"accept_rate":94,"display_name":"Jason"},"score":13,"creation_date":1457549109,"post_id":23318109,"comment_id":59460448,"body_markdown":"Java 8 is OFFICIALLY supported in Android N. http://android-developers.blogspot.com/2016/03/first-preview-of-android-n-developer.html","body":"Java 8 is OFFICIALLY supported in Android N. <a href=\"http://android-developers.blogspot.com/2016/03/first-preview-of-android-n-developer.html\" rel=\"nofollow noreferrer\">android-developers.blogspot.com/2016/03/&hellip;</a>"},{"owner":{"account_id":4951203,"reputation":7272,"user_id":3985071,"accept_rate":54,"display_name":"Arpit Patel"},"score":0,"creation_date":1459913757,"post_id":23318109,"comment_id":60496297,"body_markdown":"it&#39;s work perfectly in my java 8 and with windows 10","body":"it&#39;s work perfectly in my java 8 and with windows 10"},{"owner":{"account_id":21180,"reputation":9893,"user_id":51292,"accept_rate":59,"display_name":"Ray Tayek"},"score":2,"creation_date":1462000995,"post_id":23318109,"comment_id":61462186,"body_markdown":"maybe soon: http://developer.android.com/preview/j8-jack.html","body":"maybe soon: <a href=\"http://developer.android.com/preview/j8-jack.html\" rel=\"nofollow noreferrer\">developer.android.com/preview/j8-jack.html</a>"},{"owner":{"account_id":4001931,"reputation":404,"user_id":3297753,"display_name":"Najeeb Arif"},"score":0,"creation_date":1468229452,"post_id":23318109,"comment_id":64023466,"body_markdown":"Yes why not.\nCant see any reason not to be supported.","body":"Yes why not. Cant see any reason not to be supported."},{"owner":{"account_id":4052957,"reputation":3165,"user_id":3331861,"accept_rate":100,"display_name":"Nilay Vishwakarma"},"score":0,"creation_date":1493041589,"post_id":23318109,"comment_id":74229068,"body_markdown":"[Oracle has stopped providing dowload link to JDK7](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html)","body":"<a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html\" rel=\"nofollow noreferrer\">Oracle has stopped providing dowload link to JDK7</a>"},{"owner":{"account_id":64856,"reputation":29696,"user_id":191246,"accept_rate":77,"display_name":"ccpizza"},"score":0,"creation_date":1497077692,"post_id":23318109,"comment_id":75936754,"body_markdown":"jack is now officially deprecated and java8 features are about to be added directly into the standard toolchain: https://android-developers.googleblog.com/2017/03/future-of-java-8-language-feature.html","body":"jack is now officially deprecated and java8 features are about to be added directly into the standard toolchain: <a href=\"https://android-developers.googleblog.com/2017/03/future-of-java-8-language-feature.html\" rel=\"nofollow noreferrer\">android-developers.googleblog.com/2017/03/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2172789,"reputation":6475,"user_id":1924299,"accept_rate":56,"display_name":"Eng. Samer T"},"down_vote_count":7,"up_vote_count":203,"is_accepted":true,"score":196,"last_activity_date":1498083721,"creation_date":1398561012,"answer_id":23318269,"question_id":23318109,"body_markdown":"java 8\r\n-----\r\nAndroid supports all Java 7 language features and a subset of Java 8 language features that vary by platform version.\r\n\r\nTo check which features of java 8 are supported \r\n\r\n[Use Java 8 language features][1]\r\n\r\n&gt; We&#39;ve decided to add support for Java 8 language features directly into the current javac and dx set of tools, and deprecate the Jack toolchain. With this new direction, existing tools and plugins dependent on the Java class file format should continue to work. Moving forward, Java 8 language features will be natively supported by the Android build system. We&#39;re aiming to launch this as part of Android Studio in the coming weeks, and we wanted to share this decision early with you. \r\n \r\n[Future of Java 8 Language Feature Support on Android][2]\r\n\r\n\r\n\r\n\r\nEclipse Users:\r\n------\r\nFor old developers who prefer Eclipse, [google stops support Eclipse Android Developer tools][3]\r\n\r\n\r\nif you installed Java 8 JDK, then give it a try, if any problems appears try to set the compiler as 1.6 in Eclipse from window menu → **Preferences** → **Java** → **Compiler**.\r\nJava 7 will works too:\r\n\r\n![Eclipse Preferences -&gt; Java -&gt; Compiler][4]\r\n\r\n&gt; Java 7 or higher is required if you are targeting Android 5.0 and\r\n&gt; higher.\r\n\r\n\r\ninstall multiple JDK and try.\r\n\r\n \r\n\r\n  [1]: https://developer.android.com/studio/write/java8-support.html\r\n  [2]: https://android-developers.googleblog.com/2017/03/future-of-java-8-language-feature.html\r\n  [3]: https://developer.android.com/sdk/installing/installing-adt.html\r\n  [4]: http://i.stack.imgur.com/SCTyV.png\r\n   ","title":"Is it possible to use Java 8 for Android development?","body":"<h2>java 8</h2>\n\n<p>Android supports all Java 7 language features and a subset of Java 8 language features that vary by platform version.</p>\n\n<p>To check which features of java 8 are supported </p>\n\n<p><a href=\"https://developer.android.com/studio/write/java8-support.html\" rel=\"noreferrer\">Use Java 8 language features</a></p>\n\n<blockquote>\n  <p>We've decided to add support for Java 8 language features directly into the current javac and dx set of tools, and deprecate the Jack toolchain. With this new direction, existing tools and plugins dependent on the Java class file format should continue to work. Moving forward, Java 8 language features will be natively supported by the Android build system. We're aiming to launch this as part of Android Studio in the coming weeks, and we wanted to share this decision early with you. </p>\n</blockquote>\n\n<p><a href=\"https://android-developers.googleblog.com/2017/03/future-of-java-8-language-feature.html\" rel=\"noreferrer\">Future of Java 8 Language Feature Support on Android</a></p>\n\n<h2>Eclipse Users:</h2>\n\n<p>For old developers who prefer Eclipse, <a href=\"https://developer.android.com/sdk/installing/installing-adt.html\" rel=\"noreferrer\">google stops support Eclipse Android Developer tools</a></p>\n\n<p>if you installed Java 8 JDK, then give it a try, if any problems appears try to set the compiler as 1.6 in Eclipse from window menu → <strong>Preferences</strong> → <strong>Java</strong> → <strong>Compiler</strong>.\nJava 7 will works too:</p>\n\n<p><img src=\"https://i.stack.imgur.com/SCTyV.png\" alt=\"Eclipse Preferences -&gt; Java -&gt; Compiler\"></p>\n\n<blockquote>\n  <p>Java 7 or higher is required if you are targeting Android 5.0 and\n  higher.</p>\n</blockquote>\n\n<p>install multiple JDK and try.</p>\n"},{"tags":[],"owner":{"account_id":4387633,"reputation":4514,"user_id":3577235,"display_name":"ekcr1"},"down_vote_count":1,"up_vote_count":355,"is_accepted":false,"score":354,"last_activity_date":1509748229,"creation_date":1398564885,"answer_id":23318644,"question_id":23318109,"body_markdown":"**UPDATE 2017/11/04 - Android Studio 3.0 now has native support for Java 8.** `gradle-retrolambda` is now no longer needed. See https://developer.android.com/studio/write/java8-support.html\r\n\r\nThe above link also includes migration instructions if you are using `gradle-retrolambda`. Original answer below:\r\n\r\n---\r\n\r\nAndroid does not support Java 8. It only supports up to Java 7 (if you have kitkat) and still it doesn&#39;t have invokedynamic, only the new syntax sugar.\r\n\r\nIf you want to use lambdas, one of the major features of Java 8 in Android, you can use [gradle-retrolamba][1]. It&#39;s a gradle build dependency that integrates retrolambda, a tool that converts Java 8 bytecode back to Java 6/7. Basically, if you set the compiler in Android Studio to compile Java 8 bytecode, thus allowing lambdas, it&#39;ll convert it back to Java 6/7 bytecode which then in turn gets converted to dalvik bytecode. It&#39;s a hack for if you want to try out some JDK 8 features in Android in lieu of official support.\r\n\r\n\r\n  [1]: https://github.com/evant/gradle-retrolambda","title":"Is it possible to use Java 8 for Android development?","body":"<p><strong>UPDATE 2017/11/04 - Android Studio 3.0 now has native support for Java 8.</strong> <code>gradle-retrolambda</code> is now no longer needed. See <a href=\"https://developer.android.com/studio/write/java8-support.html\" rel=\"noreferrer\">https://developer.android.com/studio/write/java8-support.html</a></p>\n\n<p>The above link also includes migration instructions if you are using <code>gradle-retrolambda</code>. Original answer below:</p>\n\n<hr>\n\n<p>Android does not support Java 8. It only supports up to Java 7 (if you have kitkat) and still it doesn't have invokedynamic, only the new syntax sugar.</p>\n\n<p>If you want to use lambdas, one of the major features of Java 8 in Android, you can use <a href=\"https://github.com/evant/gradle-retrolambda\" rel=\"noreferrer\">gradle-retrolamba</a>. It's a gradle build dependency that integrates retrolambda, a tool that converts Java 8 bytecode back to Java 6/7. Basically, if you set the compiler in Android Studio to compile Java 8 bytecode, thus allowing lambdas, it'll convert it back to Java 6/7 bytecode which then in turn gets converted to dalvik bytecode. It's a hack for if you want to try out some JDK 8 features in Android in lieu of official support.</p>\n"},{"tags":[],"owner":{"account_id":457668,"reputation":1497,"user_id":857125,"display_name":"chaqke"},"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1479771656,"creation_date":1413849525,"answer_id":26476839,"question_id":23318109,"body_markdown":"Android uses a Java that branches off of Java 6.\r\n\r\nAs of Android SDK version 19, you can use Java 7 features [by doing this][1].  No full support for Java 8 (yet).\r\n\r\n\r\n  [1]: http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Setting-language-level","title":"Is it possible to use Java 8 for Android development?","body":"<p>Android uses a Java that branches off of Java 6.</p>\n\n<p>As of Android SDK version 19, you can use Java 7 features <a href=\"http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Setting-language-level\" rel=\"nofollow noreferrer\">by doing this</a>.  No full support for Java 8 (yet).</p>\n"},{"tags":[],"owner":{"account_id":266703,"reputation":18305,"user_id":1149423,"accept_rate":83,"display_name":"Sufiyan Ghori"},"down_vote_count":3,"up_vote_count":105,"is_accepted":false,"score":102,"last_activity_date":1626990695,"creation_date":1423399157,"answer_id":28394024,"question_id":23318109,"body_markdown":"You can indeed use `gradle-retrolamba` gradle build dependency to use Java 8 for Android Development.\r\n\r\nBelow is the complete guide that I have recently followed to run lambda expressions for Android development. The original source of this guide is mentioned at the end.\r\n\r\n\r\n&gt; In this guide, a method for bringing some **Java 8** features into\r\n&gt; Android Development Tools will be demonstrated, specifically aiming at\r\n&gt; *Eclipse IDE*. However, steps which will be described throughout this guide might also be adapted to Google’s new uprising development\r\n&gt; environment, Android Studio. It is based on the community edition of\r\n&gt; popular IntelliJ Idea IDE by JetBrains and it has recently been\r\n&gt; upgraded to its ‘beta’ version by Google in early July 2014, slightly\r\n&gt; before this guide was written. Eclipse will remain as the prominent\r\n&gt; development environment, at least for a while, and considering the\r\n&gt; fact that most Android projects have been developed using Eclipse, a\r\n&gt; method for bringing new Java 8 features like lambda expressions into\r\n&gt; ADT seems to be quite useful for developers.\r\n&gt; \r\n&gt; Android Development is based on a custom Java implementation called\r\n&gt; Apache Harmony Project which was terminated back in 2011. The most\r\n&gt; commonly used Java syntax in Android Development is Java 6 (v1.6) and\r\n&gt; Java 7 (v1.7) is also partially supported on the KitKat edition\r\n&gt; (Android 4.4.+). Therefore, Java 8 features like lambda expressions\r\n&gt; cannot be used directly in the Android App Development without\r\n&gt; applying some tweaks into the development tools. Luckily, these\r\n&gt; constructs are basically some ‘syntactic sugar’ enhancements which\r\n&gt; give developers the shortcomings of things like ‘anonymous classes’\r\n&gt; and they can be translated into Java 6 or Java 7 classes.\r\n&gt; \r\n&gt; A recent approach for translating a Java 8 source code into lower Java\r\n&gt; versions is called **RetroLambda**. This library makes developers run\r\n&gt; Java 8 code with lambda expressions on Java 7 or even lower.\r\n&gt; Unfortunately, Java 8 features other than lambda expressions are not\r\n&gt; supported by RetroLambda for now but the concept of lambda expressions\r\n&gt; is the biggest leap on Java 8 platform and it’s a great tool for\r\n&gt; Android developers anyway. \r\n&gt; \r\n&gt; Details about this library can be found on its GitHub page:\r\n&gt; \r\n&gt; https://github.com/orfjackal/retrolambda#getting-started\r\n&gt; \r\n&gt; Also, a Gradle plugin for RetroLambda created by another developer\r\n&gt; allows Gradle-based builds to be implemented in Java or Android\r\n&gt; Projects. However, the developer only mentions about integrating this\r\n&gt; plugin into Android Studio environment. Details can be found on its\r\n&gt; GitHub page:\r\n&gt; \r\n&gt; https://github.com/evant/gradle-retrolambda\r\n&gt; \r\n&gt; Using these infrastructures within an Eclipse-based development\r\n&gt; environment cannot be approached directly but it’s doable and will be\r\n&gt; demonstrated throughout this guide.\r\n\r\n**Preparation**\r\n---------------\r\n\r\nThis guide assumes that the reader has a basic understanding of Android Development and it is based on ADT version 22.6.2 because recent ADT version 23.0.2 seems to have problems like layout folder creation. Details about this issue can be found under the following link:\r\n\r\nhttp://code.google.com/p/android/issues/detail?id=72591\r\n\r\nSteps in this guide will be given for a *Windows 8.1 64-bit* development machine but they can easily be adapted to other platforms. The new build system `Gradle` will be used for build/clean processes and its installation procedure will also be provided. Also, both `JDK 8` and `JDK 7` must coexist on the development machine. Steps given below must be followed to install them:\r\n\r\n - Go to JDK 8 early access preview page http://jdk8.java.net\r\n - Download JDK 8u20 and install it. JRE 8 installation is not necessary and it can be skipped\r\n - Go to JDK 7 latest stable release page http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html\r\n - Download JDK 7u65 and install it. JRE 7 installation is again not necessary and it can be skipped\r\n - Add JDK 8 home folder and JDK 8 `bin` folder to your `%PATH%` variable\r\n - Create a new environment variable `JAVA_HOME` with the value of the path of JDK 8 home folder\r\n - Create a new environment variable `JAVA8_HOME` again with the value of the path of JDK 8 home folder\r\n - Create a new environment variable `JAVA7_HOME` with the value of the path of JDK 7 home folder\r\n - Open a terminal window and run `java -version` command and verify that Java 8 is up and running\r\n - Run `javac -version` command in the same window and verify that JDK 8 Java compiler is also up and running\r\n\r\nNow, ADT-22.6.2 must be downloaded from the following link:\r\n\r\nhttp://dl.google.com/android/adt/22.6.2/adt-bundle-windows-x86_64-20140321.zip\r\n\r\n - Download ADT and unzip its contents into a folder, e.g. `D:\\adt`\r\n - Define a new environment variable called `ANDROID_HOME` with the value of the path of your ADT installation folder, e.g. `D:\\adt\\sdk`\r\n - Add your `Android SDK Platform Tools` and `Android SDK Tools` folders, e.g. `D:\\adt\\sdk\\tools` and `D:\\adt\\sdk\\platform-tools`, to your `%PATH%` variable\r\n - Create a shortcut to Eclipse IDE if you like. It is located under your ADT installation folder, e.g. `D:\\adt\\eclipse`\r\n - Run Eclipse IDE and create a workspace, e.g. `D:\\adt\\workspace`\r\n - Click on the `Android SDK Manager` button which is located on the toolbar\r\n - Select `Android SDK Build tools Rev. 19.1` and `Android Support Library` only. Un-select everything else and install these two packages.\r\n\r\n\r\nIf everything goes well, ADT will be up and running.\r\n\r\n**The installation of the following tools is also highly recommended:**\r\n\r\n - Eclipse Kepler Java 8 Support: It makes Eclipse recognize new Java 8 syntax extensions and makes you get rid of annoying `red dots` in your Java code editor. It might be installed through `Help -&gt; Install New Software` in Eclipse. Enter http://download.eclipse.org/eclipse/updates/4.3-P-builds/ into the `Work with` field and continue to install it.\r\n\r\n - Nodeclipse/Enide Gradle: It is mainly used to highlight Groovy language keywords. Groovy is used as the DSL for Gradle build scripts. This plugin can be installed through `Eclipse Marketplace`. However, Eclipse within ADT-22.6.2 does not come along with `Eclipse Marketplace Client`. Therefore, you will first need to install `Eclipse Marketplace Client` by means of `Install New Software` tool in Eclipse. Enter http//:download.eclipse.org/mpc/kepler/ into the `Work with` field and continue to install it. After installing `Eclipse Marketplace Client`, you may search for `Nodeclipse/Enide Gradle` in the `Eclipse Marketplace Client` and install it.\r\n\r\n - Genymotion Virtual Device: It is a great replacement of the default `Android Virtual Device` which comes along with ADT. AVD is annoyingly cumbersome and it keeps on crashing for no reason. Genymotion makes you prepare Android VD&#39;s using `CyanogenMod` images which are executed by *Oracle VirtualBox*. Its single user license is for free and it can be downloaded from http://www.genymotion.com. Only a login is required and it can also be integrated into Eclipse. Details can be found under:\r\n\r\nhttps://cloud.genymotion.com/page/doc/#collapse8\r\n\r\nBelow is a screenshot of an Android 4.3 based CyanogenMod virtual device,\r\n\r\n![enter image description here][1]\r\n\r\nIt might be considered as a fully-fledge Android device running on a x86 or x64 based personal computer. In order to use Google services like `Google PlayStore` on this virtual device, a `gapps` image for the Android version that it uses must be flashed onto the device. A proper `gapps` image for the device might be downloaded from CyanogenMod website:\r\n\r\nhttp://wiki.cyanogenmod.org/w/Google_Apps\r\n\r\nGradle installation is optional since it is also provided by Android SDK itself but its separate installation is highly recommended. Installation of it might be conducted by following these steps:\r\n\r\n - Go to Gradle web site: http://www.gradle.org/\r\n\r\n - Click `Downloads`\r\n - Under `Previous Releases` choose version 1.10 and download either _gradle-1.10-all.zip_ or _gradle-1.10-bin.zip_\r\n - Unzip its contents into a folder, e.g. `D:\\adt\\gradle`\r\n - Define a new environment variable called `GRADLE_HOME` with the value of the path of your Gradle installation folder, e.g. `D:\\adt\\gradle`\r\n - Add your Gradle binaries folder, e.g. `D:\\adt\\gradle\\bin`, to your `%PATH%` variable\r\n - Open a terminal window and run `gradle -v` command and verify that it`s up and running\r\nIf you have come up to this point successfully then it means that you are ready to create your first Android App using Java 8 features.\r\n\r\n**Demo App**\r\n------------\r\n\r\nA simple app will be created to demonstrate the usage of the tools which were described in the previous section. \r\nYou may simply follow the steps given below to get an insight on using lambda expressions in Android Developer Tools:\r\n\r\n - Run Eclipse IDE and create a new Android App by selecting `File -&gt; New -&gt; Other -&gt; Android -&gt; Android Application Project`\r\n - Fill in the form that comes up as shown below:\r\n\r\n![enter image description here][2]\r\n\r\n\r\n - Simply click the `Next` button on the following forms and click the `Finish` button on the last one. Wait till ADT finishes loading up the project\r\n - Right-click on the project and select `New -&gt; Folder` and name it `builders`\r\n - Right-click on the `gen (Generated Java Files)` folder and delete it. Gradle will generate the same files for us soon and we will add them into the project`s build path. The `gen` folder created by the default Ant builder is no longer needed and the artifacts under that folder will be obsolete\r\n - Create following batch files under the `builders` folder:\r\n\r\n       - gradle_build.cmd\r\n       - gradle_post_build.cmd\r\n       - gradle_clean.cmd\r\n\r\n - Fill in these batch files as follows:\r\n\r\n**gradle_build.cmd:**\r\n\r\n![enter image description here][3]\r\n\r\n**gradle_post_build.cmd:**\r\n\r\n![enter image description here][4]\r\n\r\n**gradle_clean.cmd:**\r\n\r\n![enter image description here][5]\r\n\r\n\r\n - Un-select `Project -&gt; Build Automatically` menu option\r\n - Right-click on the project and select `Properties -&gt; Builders` and un-select all default builders provided by ADT\r\n - Click the `New` button in the same window and select `Program` and click `OK`\r\n - New builder configuration window will appear. Fill in its tabs as follows:\r\n\r\n**`Main` Tab of the new Builder Configuration**\r\n\r\n![enter image description here][6]\r\n\r\n**`Refresh` Tab of the new Builder Configuration**\r\n\r\n![enter image description here][7]\r\n\r\n**`Environment` Tab of the new Builder Configuration**\r\n\r\n![enter image description here][8]\r\n\r\n**`Build Options` Tab of the new Builder Configuration**\r\n\r\n![enter image description here][9]\r\n\r\n\r\n- Create the second builder called `Gradle_Post_Build` that uses `gradle_post_build.cmd` as its program. All other settings of this builder must exactly be the same with the previously created builder. This builder will be responsible for copying the artifacts created by the build process into the `bin` folder.\r\n- Create the third builder called `Gradle_Cleaner` that uses `gradle_clean.cmd` as its program. Only `Run the builder` setting in the final tab must be set as `During a Clean`. All other settings of this builder must exactly be the same with the first builder. This builder will be responsible for cleaning the artifacts created by the build process as the name suggests.\r\n\r\n**New Builders of the `HelloLambda` Project**\r\n\r\n![enter image description here][10]\r\n\r\n - Right-click on the project and select `Export`\r\n - Select `Android -&gt; Generate Gradle Build Files` and click `Next`\r\n - Select the project in the next window and click `Finish`\r\n - Go to your project&#39;s root folder and delete the files `gradlew` and `gradlew.bat`. Also delete `gradle` folder\r\n - Switch back to Eclipse and select `Project -&gt; Clean` menu option. Fill in the form that shows up as follows:\r\n\r\n\r\n**`Clean Project` Window**\r\n\r\n![enter image description here][11]\r\n\r\n- Click `OK` and wait till the cleaning process completes\r\n- Add the Java code snippet given below right after the call to `setContentView` function in your `MainActivity` class:\r\n\r\n![enter image description here][12]\r\n \r\n\r\n- Change the beginning of the `build.gradle` file till the `sourceCompatibility` section as follows:\r\n\r\n![enter image description here][13]\r\n\r\n - Right-click on the project and select `Properties -&gt; Java Compiler` option and set all compliance levels to Java 8. This will make Eclipse recognize new Java 8 constructs like lambda expressions.\r\n - Click `No` in the notification window\r\n - Right-click on the project and select `Build project`. Eclipse will start building the project.\r\n\r\n**Build Process**\r\n![enter image description here][14]\r\n\r\n - Right-click on the project and go to `Properties -&gt; Java Build Path`. Add the following folders to the build path (also shown in below image):\r\n\r\n   - `build\\source\\buildConfig\\debug`\r\n   - `build\\source\\r\\debug`\r\n\r\n![enter image description here][15]\r\n\r\n\r\nEclipse will now be able to recognize `R.java` and `buildConfig.java` files and it will not display any `red dots` which denote errors related to the resource files of the project.\r\n\r\n- Create a new `Run Configuration` for your Android target platform by right-clicking on the project and then selecting `Run As -&gt; Run Configurations`. For instance, this demo application looks like shown below on the Genymotion VD:\r\n\r\n**HelloLambda Application**\r\n---------------------------\r\n\r\n![enter image description here][16]\r\n\r\n\r\n\r\nYou may observe in the `LogCat` window that the code snippet with a simple lambda expression works properly\r\n\r\n\r\n![enter image description here][17]\r\n\r\n\r\nSource: [Using Java 8 Lambda Expressions in Android Developer Tools][18]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/iow9j.png\r\n  [2]: http://i.stack.imgur.com/JVoe4.png\r\n  [3]: http://i.stack.imgur.com/8cUqV.png\r\n  [4]: http://i.stack.imgur.com/5zYJt.png\r\n  [5]: http://i.stack.imgur.com/YBqEe.png\r\n  [6]: http://i.stack.imgur.com/w1Rw4.png\r\n  [7]: http://i.stack.imgur.com/YpGL5.png\r\n  [8]: http://i.stack.imgur.com/0OSHU.png\r\n  [9]: http://i.stack.imgur.com/5BoyE.png\r\n  [10]: http://i.stack.imgur.com/0DC3V.png\r\n  [11]: http://i.stack.imgur.com/Yn4Sz.png\r\n  [12]: http://i.stack.imgur.com/XqeCX.png\r\n  [13]: http://i.stack.imgur.com/GSS1F.png\r\n  [14]: http://i.stack.imgur.com/1JNEM.png\r\n  [15]: http://i.stack.imgur.com/q5Yiv.png\r\n  [16]: http://i.stack.imgur.com/9paAZ.png\r\n  [17]: http://i.stack.imgur.com/6lYDI.png\r\n  [18]: https://hakanyamanyar.wordpress.com/2014/07/08/using-java-8-lambda-expressions-in-android-developer-tools/","title":"Is it possible to use Java 8 for Android development?","body":"<p>You can indeed use <code>gradle-retrolamba</code> gradle build dependency to use Java 8 for Android Development.</p>\n<p>Below is the complete guide that I have recently followed to run lambda expressions for Android development. The original source of this guide is mentioned at the end.</p>\n<blockquote>\n<p>In this guide, a method for bringing some <strong>Java 8</strong> features into\nAndroid Development Tools will be demonstrated, specifically aiming at\n<em>Eclipse IDE</em>. However, steps which will be described throughout this guide might also be adapted to Google’s new uprising development\nenvironment, Android Studio. It is based on the community edition of\npopular IntelliJ Idea IDE by JetBrains and it has recently been\nupgraded to its ‘beta’ version by Google in early July 2014, slightly\nbefore this guide was written. Eclipse will remain as the prominent\ndevelopment environment, at least for a while, and considering the\nfact that most Android projects have been developed using Eclipse, a\nmethod for bringing new Java 8 features like lambda expressions into\nADT seems to be quite useful for developers.</p>\n<p>Android Development is based on a custom Java implementation called\nApache Harmony Project which was terminated back in 2011. The most\ncommonly used Java syntax in Android Development is Java 6 (v1.6) and\nJava 7 (v1.7) is also partially supported on the KitKat edition\n(Android 4.4.+). Therefore, Java 8 features like lambda expressions\ncannot be used directly in the Android App Development without\napplying some tweaks into the development tools. Luckily, these\nconstructs are basically some ‘syntactic sugar’ enhancements which\ngive developers the shortcomings of things like ‘anonymous classes’\nand they can be translated into Java 6 or Java 7 classes.</p>\n<p>A recent approach for translating a Java 8 source code into lower Java\nversions is called <strong>RetroLambda</strong>. This library makes developers run\nJava 8 code with lambda expressions on Java 7 or even lower.\nUnfortunately, Java 8 features other than lambda expressions are not\nsupported by RetroLambda for now but the concept of lambda expressions\nis the biggest leap on Java 8 platform and it’s a great tool for\nAndroid developers anyway.</p>\n<p>Details about this library can be found on its GitHub page:</p>\n<p><a href=\"https://github.com/orfjackal/retrolambda#getting-started\" rel=\"nofollow noreferrer\">https://github.com/orfjackal/retrolambda#getting-started</a></p>\n<p>Also, a Gradle plugin for RetroLambda created by another developer\nallows Gradle-based builds to be implemented in Java or Android\nProjects. However, the developer only mentions about integrating this\nplugin into Android Studio environment. Details can be found on its\nGitHub page:</p>\n<p><a href=\"https://github.com/evant/gradle-retrolambda\" rel=\"nofollow noreferrer\">https://github.com/evant/gradle-retrolambda</a></p>\n<p>Using these infrastructures within an Eclipse-based development\nenvironment cannot be approached directly but it’s doable and will be\ndemonstrated throughout this guide.</p>\n</blockquote>\n<h2 id=\"preparation\"><strong>Preparation</strong></h2>\n<p>This guide assumes that the reader has a basic understanding of Android Development and it is based on ADT version 22.6.2 because recent ADT version 23.0.2 seems to have problems like layout folder creation. Details about this issue can be found under the following link:</p>\n<p><a href=\"http://code.google.com/p/android/issues/detail?id=72591\" rel=\"nofollow noreferrer\">http://code.google.com/p/android/issues/detail?id=72591</a></p>\n<p>Steps in this guide will be given for a <em>Windows 8.1 64-bit</em> development machine but they can easily be adapted to other platforms. The new build system <code>Gradle</code> will be used for build/clean processes and its installation procedure will also be provided. Also, both <code>JDK 8</code> and <code>JDK 7</code> must coexist on the development machine. Steps given below must be followed to install them:</p>\n<ul>\n<li>Go to JDK 8 early access preview page <a href=\"http://jdk8.java.net\" rel=\"nofollow noreferrer\">http://jdk8.java.net</a></li>\n<li>Download JDK 8u20 and install it. JRE 8 installation is not necessary and it can be skipped</li>\n<li>Go to JDK 7 latest stable release page <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html\" rel=\"nofollow noreferrer\">http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html</a></li>\n<li>Download JDK 7u65 and install it. JRE 7 installation is again not necessary and it can be skipped</li>\n<li>Add JDK 8 home folder and JDK 8 <code>bin</code> folder to your <code>%PATH%</code> variable</li>\n<li>Create a new environment variable <code>JAVA_HOME</code> with the value of the path of JDK 8 home folder</li>\n<li>Create a new environment variable <code>JAVA8_HOME</code> again with the value of the path of JDK 8 home folder</li>\n<li>Create a new environment variable <code>JAVA7_HOME</code> with the value of the path of JDK 7 home folder</li>\n<li>Open a terminal window and run <code>java -version</code> command and verify that Java 8 is up and running</li>\n<li>Run <code>javac -version</code> command in the same window and verify that JDK 8 Java compiler is also up and running</li>\n</ul>\n<p>Now, ADT-22.6.2 must be downloaded from the following link:</p>\n<p><a href=\"http://dl.google.com/android/adt/22.6.2/adt-bundle-windows-x86_64-20140321.zip\" rel=\"nofollow noreferrer\">http://dl.google.com/android/adt/22.6.2/adt-bundle-windows-x86_64-20140321.zip</a></p>\n<ul>\n<li>Download ADT and unzip its contents into a folder, e.g. <code>D:\\adt</code></li>\n<li>Define a new environment variable called <code>ANDROID_HOME</code> with the value of the path of your ADT installation folder, e.g. <code>D:\\adt\\sdk</code></li>\n<li>Add your <code>Android SDK Platform Tools</code> and <code>Android SDK Tools</code> folders, e.g. <code>D:\\adt\\sdk\\tools</code> and <code>D:\\adt\\sdk\\platform-tools</code>, to your <code>%PATH%</code> variable</li>\n<li>Create a shortcut to Eclipse IDE if you like. It is located under your ADT installation folder, e.g. <code>D:\\adt\\eclipse</code></li>\n<li>Run Eclipse IDE and create a workspace, e.g. <code>D:\\adt\\workspace</code></li>\n<li>Click on the <code>Android SDK Manager</code> button which is located on the toolbar</li>\n<li>Select <code>Android SDK Build tools Rev. 19.1</code> and <code>Android Support Library</code> only. Un-select everything else and install these two packages.</li>\n</ul>\n<p>If everything goes well, ADT will be up and running.</p>\n<p><strong>The installation of the following tools is also highly recommended:</strong></p>\n<ul>\n<li><p>Eclipse Kepler Java 8 Support: It makes Eclipse recognize new Java 8 syntax extensions and makes you get rid of annoying <code>red dots</code> in your Java code editor. It might be installed through <code>Help -&gt; Install New Software</code> in Eclipse. Enter <a href=\"http://download.eclipse.org/eclipse/updates/4.3-P-builds/\" rel=\"nofollow noreferrer\">http://download.eclipse.org/eclipse/updates/4.3-P-builds/</a> into the <code>Work with</code> field and continue to install it.</p>\n</li>\n<li><p>Nodeclipse/Enide Gradle: It is mainly used to highlight Groovy language keywords. Groovy is used as the DSL for Gradle build scripts. This plugin can be installed through <code>Eclipse Marketplace</code>. However, Eclipse within ADT-22.6.2 does not come along with <code>Eclipse Marketplace Client</code>. Therefore, you will first need to install <code>Eclipse Marketplace Client</code> by means of <code>Install New Software</code> tool in Eclipse. Enter http//:download.eclipse.org/mpc/kepler/ into the <code>Work with</code> field and continue to install it. After installing <code>Eclipse Marketplace Client</code>, you may search for <code>Nodeclipse/Enide Gradle</code> in the <code>Eclipse Marketplace Client</code> and install it.</p>\n</li>\n<li><p>Genymotion Virtual Device: It is a great replacement of the default <code>Android Virtual Device</code> which comes along with ADT. AVD is annoyingly cumbersome and it keeps on crashing for no reason. Genymotion makes you prepare Android VD's using <code>CyanogenMod</code> images which are executed by <em>Oracle VirtualBox</em>. Its single user license is for free and it can be downloaded from <a href=\"http://www.genymotion.com\" rel=\"nofollow noreferrer\">http://www.genymotion.com</a>. Only a login is required and it can also be integrated into Eclipse. Details can be found under:</p>\n</li>\n</ul>\n<p><a href=\"https://cloud.genymotion.com/page/doc/#collapse8\" rel=\"nofollow noreferrer\">https://cloud.genymotion.com/page/doc/#collapse8</a></p>\n<p>Below is a screenshot of an Android 4.3 based CyanogenMod virtual device,</p>\n<p><img src=\"https://i.stack.imgur.com/iow9j.png\" alt=\"enter image description here\" /></p>\n<p>It might be considered as a fully-fledge Android device running on a x86 or x64 based personal computer. In order to use Google services like <code>Google PlayStore</code> on this virtual device, a <code>gapps</code> image for the Android version that it uses must be flashed onto the device. A proper <code>gapps</code> image for the device might be downloaded from CyanogenMod website:</p>\n<p><a href=\"http://wiki.cyanogenmod.org/w/Google_Apps\" rel=\"nofollow noreferrer\">http://wiki.cyanogenmod.org/w/Google_Apps</a></p>\n<p>Gradle installation is optional since it is also provided by Android SDK itself but its separate installation is highly recommended. Installation of it might be conducted by following these steps:</p>\n<ul>\n<li><p>Go to Gradle web site: <a href=\"http://www.gradle.org/\" rel=\"nofollow noreferrer\">http://www.gradle.org/</a></p>\n</li>\n<li><p>Click <code>Downloads</code></p>\n</li>\n<li><p>Under <code>Previous Releases</code> choose version 1.10 and download either <em>gradle-1.10-all.zip</em> or <em>gradle-1.10-bin.zip</em></p>\n</li>\n<li><p>Unzip its contents into a folder, e.g. <code>D:\\adt\\gradle</code></p>\n</li>\n<li><p>Define a new environment variable called <code>GRADLE_HOME</code> with the value of the path of your Gradle installation folder, e.g. <code>D:\\adt\\gradle</code></p>\n</li>\n<li><p>Add your Gradle binaries folder, e.g. <code>D:\\adt\\gradle\\bin</code>, to your <code>%PATH%</code> variable</p>\n</li>\n<li><p>Open a terminal window and run <code>gradle -v</code> command and verify that it`s up and running\nIf you have come up to this point successfully then it means that you are ready to create your first Android App using Java 8 features.</p>\n</li>\n</ul>\n<h2 id=\"demo-app\"><strong>Demo App</strong></h2>\n<p>A simple app will be created to demonstrate the usage of the tools which were described in the previous section.\nYou may simply follow the steps given below to get an insight on using lambda expressions in Android Developer Tools:</p>\n<ul>\n<li>Run Eclipse IDE and create a new Android App by selecting <code>File -&gt; New -&gt; Other -&gt; Android -&gt; Android Application Project</code></li>\n<li>Fill in the form that comes up as shown below:</li>\n</ul>\n<p><img src=\"https://i.stack.imgur.com/JVoe4.png\" alt=\"enter image description here\" /></p>\n<ul>\n<li><p>Simply click the <code>Next</code> button on the following forms and click the <code>Finish</code> button on the last one. Wait till ADT finishes loading up the project</p>\n</li>\n<li><p>Right-click on the project and select <code>New -&gt; Folder</code> and name it <code>builders</code></p>\n</li>\n<li><p>Right-click on the <code>gen (Generated Java Files)</code> folder and delete it. Gradle will generate the same files for us soon and we will add them into the project<code>s build path. The </code>gen` folder created by the default Ant builder is no longer needed and the artifacts under that folder will be obsolete</p>\n</li>\n<li><p>Create following batch files under the <code>builders</code> folder:</p>\n<pre><code>- gradle_build.cmd\n- gradle_post_build.cmd\n- gradle_clean.cmd\n</code></pre>\n</li>\n<li><p>Fill in these batch files as follows:</p>\n</li>\n</ul>\n<p><strong>gradle_build.cmd:</strong></p>\n<p><img src=\"https://i.stack.imgur.com/8cUqV.png\" alt=\"enter image description here\" /></p>\n<p><strong>gradle_post_build.cmd:</strong></p>\n<p><img src=\"https://i.stack.imgur.com/5zYJt.png\" alt=\"enter image description here\" /></p>\n<p><strong>gradle_clean.cmd:</strong></p>\n<p><img src=\"https://i.stack.imgur.com/YBqEe.png\" alt=\"enter image description here\" /></p>\n<ul>\n<li>Un-select <code>Project -&gt; Build Automatically</code> menu option</li>\n<li>Right-click on the project and select <code>Properties -&gt; Builders</code> and un-select all default builders provided by ADT</li>\n<li>Click the <code>New</code> button in the same window and select <code>Program</code> and click <code>OK</code></li>\n<li>New builder configuration window will appear. Fill in its tabs as follows:</li>\n</ul>\n<p><strong><code>Main</code> Tab of the new Builder Configuration</strong></p>\n<p><img src=\"https://i.stack.imgur.com/w1Rw4.png\" alt=\"enter image description here\" /></p>\n<p><strong><code>Refresh</code> Tab of the new Builder Configuration</strong></p>\n<p><img src=\"https://i.stack.imgur.com/YpGL5.png\" alt=\"enter image description here\" /></p>\n<p><strong><code>Environment</code> Tab of the new Builder Configuration</strong></p>\n<p><img src=\"https://i.stack.imgur.com/0OSHU.png\" alt=\"enter image description here\" /></p>\n<p><strong><code>Build Options</code> Tab of the new Builder Configuration</strong></p>\n<p><img src=\"https://i.stack.imgur.com/5BoyE.png\" alt=\"enter image description here\" /></p>\n<ul>\n<li>Create the second builder called <code>Gradle_Post_Build</code> that uses <code>gradle_post_build.cmd</code> as its program. All other settings of this builder must exactly be the same with the previously created builder. This builder will be responsible for copying the artifacts created by the build process into the <code>bin</code> folder.</li>\n<li>Create the third builder called <code>Gradle_Cleaner</code> that uses <code>gradle_clean.cmd</code> as its program. Only <code>Run the builder</code> setting in the final tab must be set as <code>During a Clean</code>. All other settings of this builder must exactly be the same with the first builder. This builder will be responsible for cleaning the artifacts created by the build process as the name suggests.</li>\n</ul>\n<p><strong>New Builders of the <code>HelloLambda</code> Project</strong></p>\n<p><img src=\"https://i.stack.imgur.com/0DC3V.png\" alt=\"enter image description here\" /></p>\n<ul>\n<li>Right-click on the project and select <code>Export</code></li>\n<li>Select <code>Android -&gt; Generate Gradle Build Files</code> and click <code>Next</code></li>\n<li>Select the project in the next window and click <code>Finish</code></li>\n<li>Go to your project's root folder and delete the files <code>gradlew</code> and <code>gradlew.bat</code>. Also delete <code>gradle</code> folder</li>\n<li>Switch back to Eclipse and select <code>Project -&gt; Clean</code> menu option. Fill in the form that shows up as follows:</li>\n</ul>\n<p><strong><code>Clean Project</code> Window</strong></p>\n<p><img src=\"https://i.stack.imgur.com/Yn4Sz.png\" alt=\"enter image description here\" /></p>\n<ul>\n<li>Click <code>OK</code> and wait till the cleaning process completes</li>\n<li>Add the Java code snippet given below right after the call to <code>setContentView</code> function in your <code>MainActivity</code> class:</li>\n</ul>\n<p><img src=\"https://i.stack.imgur.com/XqeCX.png\" alt=\"enter image description here\" /></p>\n<ul>\n<li>Change the beginning of the <code>build.gradle</code> file till the <code>sourceCompatibility</code> section as follows:</li>\n</ul>\n<p><img src=\"https://i.stack.imgur.com/GSS1F.png\" alt=\"enter image description here\" /></p>\n<ul>\n<li>Right-click on the project and select <code>Properties -&gt; Java Compiler</code> option and set all compliance levels to Java 8. This will make Eclipse recognize new Java 8 constructs like lambda expressions.</li>\n<li>Click <code>No</code> in the notification window</li>\n<li>Right-click on the project and select <code>Build project</code>. Eclipse will start building the project.</li>\n</ul>\n<p><strong>Build Process</strong>\n<img src=\"https://i.stack.imgur.com/1JNEM.png\" alt=\"enter image description here\" /></p>\n<ul>\n<li><p>Right-click on the project and go to <code>Properties -&gt; Java Build Path</code>. Add the following folders to the build path (also shown in below image):</p>\n<ul>\n<li><code>build\\source\\buildConfig\\debug</code></li>\n<li><code>build\\source\\r\\debug</code></li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://i.stack.imgur.com/q5Yiv.png\" alt=\"enter image description here\" /></p>\n<p>Eclipse will now be able to recognize <code>R.java</code> and <code>buildConfig.java</code> files and it will not display any <code>red dots</code> which denote errors related to the resource files of the project.</p>\n<ul>\n<li>Create a new <code>Run Configuration</code> for your Android target platform by right-clicking on the project and then selecting <code>Run As -&gt; Run Configurations</code>. For instance, this demo application looks like shown below on the Genymotion VD:</li>\n</ul>\n<h2 id=\"hellolambda-application\"><strong>HelloLambda Application</strong></h2>\n<p><img src=\"https://i.stack.imgur.com/9paAZ.png\" alt=\"enter image description here\" /></p>\n<p>You may observe in the <code>LogCat</code> window that the code snippet with a simple lambda expression works properly</p>\n<p><img src=\"https://i.stack.imgur.com/6lYDI.png\" alt=\"enter image description here\" /></p>\n<p>Source: <a href=\"https://hakanyamanyar.wordpress.com/2014/07/08/using-java-8-lambda-expressions-in-android-developer-tools/\" rel=\"nofollow noreferrer\">Using Java 8 Lambda Expressions in Android Developer Tools</a></p>\n"},{"tags":[],"owner":{"account_id":2252734,"reputation":10792,"user_id":1984636,"accept_rate":62,"display_name":"sivi"},"down_vote_count":1,"up_vote_count":24,"is_accepted":false,"score":23,"last_activity_date":1485283030,"creation_date":1448460867,"answer_id":33918771,"question_id":23318109,"body_markdown":"Yes, Android Supports Java 8 Now (24.1.17)\r\n===========\r\nNow it is possible \r\n\r\nBut you will need to have your device rom run on java 1.8  and enable &quot;jackOptions&quot; to run it. \r\nJack is the name for the new Android compiler that runs Java 8\r\n\r\nhttps://developer.android.com/guide/platform/j8-jack.html\r\n\r\nadd these lines to build_gradle \r\n\r\n \r\n\r\n        android {\r\n      ...\r\n      defaultConfig {\r\n        ...\r\n        jackOptions {\r\n          enabled true\r\n        }\r\n      }\r\n      compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n      }\r\n    }\r\n\r\n\r\n\r\n------\r\n\r\nJava 8 seem to be the running java engine of Android studio 2.0, \r\nBut it still does not accept the syntax of java 8 after I checked, and you cannot chose a compiler from android studio now. However, you can use the scala plugin if you need functional programming mechanism in your android client. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/XVIKB.png","title":"Is it possible to use Java 8 for Android development?","body":"<h1>Yes, Android Supports Java 8 Now (24.1.17)</h1>\n\n<p>Now it is possible </p>\n\n<p>But you will need to have your device rom run on java 1.8  and enable \"jackOptions\" to run it. \nJack is the name for the new Android compiler that runs Java 8</p>\n\n<p><a href=\"https://developer.android.com/guide/platform/j8-jack.html\" rel=\"noreferrer\">https://developer.android.com/guide/platform/j8-jack.html</a></p>\n\n<p>add these lines to build_gradle </p>\n\n<pre><code>    android {\n  ...\n  defaultConfig {\n    ...\n    jackOptions {\n      enabled true\n    }\n  }\n  compileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n  }\n}\n</code></pre>\n\n<hr>\n\n<p>Java 8 seem to be the running java engine of Android studio 2.0, \nBut it still does not accept the syntax of java 8 after I checked, and you cannot chose a compiler from android studio now. However, you can use the scala plugin if you need functional programming mechanism in your android client. </p>\n\n<p><a href=\"https://i.stack.imgur.com/XVIKB.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/XVIKB.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":4946403,"reputation":1765,"user_id":3981638,"accept_rate":100,"display_name":"Vishal Raj"},"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1451824281,"creation_date":1450700415,"answer_id":34395563,"question_id":23318109,"body_markdown":"We Can Use Java 8 using:\r\n\r\n&lt;!-- language-all: lang-groovy --&gt;\r\n\r\n  1. In build.gradle (Project: myProject) add following\r\n\r\n        classpath &#39;me.tatarka:gradle-retrolambda:x.x.x&#39; //x.x.x is recent version\r\n\r\n  2. In build.gradle (Module: myModule) add following\r\n\r\n        apply plugin: &#39;me.tatarka.retrolambda&#39;\r\n    \r\n        compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_1_8\r\n            targetCompatibility JavaVersion.VERSION_1_8\r\n        }","title":"Is it possible to use Java 8 for Android development?","body":"<p>We Can Use Java 8 using:</p>\n\n\n\n<ol>\n<li><p>In build.gradle (Project: myProject) add following</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>classpath 'me.tatarka:gradle-retrolambda:x.x.x' //x.x.x is recent version\n</code></pre></li>\n<li><p>In build.gradle (Module: myModule) add following</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>apply plugin: 'me.tatarka.retrolambda'\n\ncompileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n}\n</code></pre></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":3084900,"reputation":16354,"user_id":2612259,"accept_rate":76,"display_name":"nPn"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1455583643,"creation_date":1455583643,"answer_id":35421762,"question_id":23318109,"body_markdown":"When I asked this question almost 2 years ago the answer really was “officially” no,  but as pointed out by ekcr1&#39;s answer you can get one of the most highly anticipated features (lambdas) to work if you  use retrolamba.  At the time I was still using eclipse, as Android Studio was in “preview” mode,  so I never did pursue this path.\r\n\r\nToday, I think the “official” answer is still no,  and while retrolamba still seems like a good way to go, there is another option for those willing to go down a somewhat “unofficial”  route can take, namely Kotlin.\r\n\r\nToday Kotlin reached 1.0.0.  For those not familiar with Kotlin,  more info can be found at their website found here:\r\n\r\nhttps://kotlinlang.org\r\n\r\nor watch this utube video of a talk given by Jake Wharton\r\n\r\nhttps://www.youtube.com/watch?v=A2LukgT2mKc\r\n","title":"Is it possible to use Java 8 for Android development?","body":"<p>When I asked this question almost 2 years ago the answer really was “officially” no,  but as pointed out by ekcr1's answer you can get one of the most highly anticipated features (lambdas) to work if you  use retrolamba.  At the time I was still using eclipse, as Android Studio was in “preview” mode,  so I never did pursue this path.</p>\n\n<p>Today, I think the “official” answer is still no,  and while retrolamba still seems like a good way to go, there is another option for those willing to go down a somewhat “unofficial”  route can take, namely Kotlin.</p>\n\n<p>Today Kotlin reached 1.0.0.  For those not familiar with Kotlin,  more info can be found at their website found here:</p>\n\n<p><a href=\"https://kotlinlang.org\">https://kotlinlang.org</a></p>\n\n<p>or watch this utube video of a talk given by Jake Wharton</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=A2LukgT2mKc\">https://www.youtube.com/watch?v=A2LukgT2mKc</a></p>\n"},{"tags":[],"owner":{"account_id":534720,"reputation":7416,"user_id":904556,"accept_rate":94,"display_name":"Jason"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1457586594,"creation_date":1457549069,"answer_id":35900034,"question_id":23318109,"body_markdown":"Android OFFICIALLY supports Java 8 as of Android N. \r\n\r\n[Feature announcements are here][1], the Java 8 language announcement is:\r\n\r\n&gt; **Improved Java 8 language support** - We’re excited to bring Java 8 language features to Android. With Android&#39;s Jack compiler, you can\r\n&gt; now use many popular Java 8 language features, including lambdas and\r\n&gt; more, on Android versions as far back as Gingerbread. The new features\r\n&gt; help reduce boilerplate code. For example, lambdas can replace\r\n&gt; anonymous inner classes when providing event listeners. Some Java 8\r\n&gt; language features --like default and static methods, streams, and\r\n&gt; functional interfaces -- are also now available on N and above. With\r\n&gt; Jack, we’re looking forward to tracking the Java language more closely\r\n&gt; while maintaining backward compatibility.\r\n\r\n\r\n  [1]: http://android-developers.blogspot.com/2016/03/first-preview-of-android-n-developer.html","title":"Is it possible to use Java 8 for Android development?","body":"<p>Android OFFICIALLY supports Java 8 as of Android N. </p>\n\n<p><a href=\"http://android-developers.blogspot.com/2016/03/first-preview-of-android-n-developer.html\">Feature announcements are here</a>, the Java 8 language announcement is:</p>\n\n<blockquote>\n  <p><strong>Improved Java 8 language support</strong> - We’re excited to bring Java 8 language features to Android. With Android's Jack compiler, you can\n  now use many popular Java 8 language features, including lambdas and\n  more, on Android versions as far back as Gingerbread. The new features\n  help reduce boilerplate code. For example, lambdas can replace\n  anonymous inner classes when providing event listeners. Some Java 8\n  language features --like default and static methods, streams, and\n  functional interfaces -- are also now available on N and above. With\n  Jack, we’re looking forward to tracking the Java language more closely\n  while maintaining backward compatibility.</p>\n</blockquote>\n"},{"tags":[],"owner":{"display_name":"user4774371"},"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1509002249,"creation_date":1457585440,"answer_id":35907821,"question_id":23318109,"body_markdown":"Follow this link for new updates. [Use Java 8 language features][1]\r\n\r\n**Old Answer**\r\n\r\nAs of **[Android N preview][2]** release Android support **limited** features of **Java 8** see [Java 8 Language Features][3]\r\n\r\n&gt; To start using these features, you need to download and set up [Android\r\n&gt; Studio 2.1][4]  and the Android N Preview SDK, which includes the\r\n&gt; required [Jack][5] toolchain and updated Android Plugin for Gradle. If you\r\n&gt; haven&#39;t yet installed the Android N Preview SDK, see [Set Up to Develop\r\n&gt; for Android N][6].\r\n\r\n**Supported Java 8 Language Features and APIs**\r\n\r\n&gt; Android does not currently support all Java 8 language features.\r\n&gt; However, the following features are now available when developing apps\r\n&gt; targeting the Android N Preview:\r\n\r\n[Default and static interface methods][7]\r\n\r\n[Lambda expressions][8] (also available on API level 23 and lower)\r\n\r\n[Repeatable annotations][9]\r\n\r\n[Method References][10] (also available on API level 23 and lower)\r\n\r\nThere are some additional Java 8 features which Android support, you can see complete detail from [Java 8 Language Features][11]\r\n\r\n**Update**\r\n\r\n&gt; Note: The Android N bases its implementation of lambda expressions on\r\n&gt; anonymous classes. This approach allows them to be backwards\r\n&gt; compatible and executable on earlier versions of Android. To test\r\n&gt; lambda expressions on earlier versions, remember to go to your\r\n&gt; build.gradle file, and set compileSdkVersion and targetSdkVersion to\r\n&gt; 23 or lower.\r\n\r\n**Update 2**\r\n\r\nNow Android studio 3.0 stable release support [Java 8 libraries and Java 8 language features][12] (without the Jack compiler).\r\n\r\n\r\n  [1]: https://developer.android.com/guide/platform/j8-jack.html\r\n  [2]: http://android-developers.blogspot.com/2016/03/first-preview-of-android-n-developer.html\r\n  [3]: https://developer.android.com/preview/j8-jack.html\r\n  [4]: http://tools.android.com/recent/androidstudio21previewnowavailableforandroidnpreview\r\n  [5]: https://source.android.com/source/jack.html\r\n  [6]: https://developer.android.com/preview/setup-sdk.html\r\n  [7]: https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html\r\n  [8]: https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html\r\n  [9]: https://docs.oracle.com/javase/tutorial/java/annotations/repeating.html\r\n  [10]: https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\r\n  [11]: https://developer.android.com/preview/j8-jack.html#supported-features\r\n  [12]: https://developer.android.com/studio/write/java8-support.html","title":"Is it possible to use Java 8 for Android development?","body":"<p>Follow this link for new updates. <a href=\"https://developer.android.com/guide/platform/j8-jack.html\" rel=\"nofollow noreferrer\">Use Java 8 language features</a></p>\n\n<p><strong>Old Answer</strong></p>\n\n<p>As of <strong><a href=\"http://android-developers.blogspot.com/2016/03/first-preview-of-android-n-developer.html\" rel=\"nofollow noreferrer\">Android N preview</a></strong> release Android support <strong>limited</strong> features of <strong>Java 8</strong> see <a href=\"https://developer.android.com/preview/j8-jack.html\" rel=\"nofollow noreferrer\">Java 8 Language Features</a></p>\n\n<blockquote>\n  <p>To start using these features, you need to download and set up <a href=\"http://tools.android.com/recent/androidstudio21previewnowavailableforandroidnpreview\" rel=\"nofollow noreferrer\">Android\n  Studio 2.1</a>  and the Android N Preview SDK, which includes the\n  required <a href=\"https://source.android.com/source/jack.html\" rel=\"nofollow noreferrer\">Jack</a> toolchain and updated Android Plugin for Gradle. If you\n  haven't yet installed the Android N Preview SDK, see <a href=\"https://developer.android.com/preview/setup-sdk.html\" rel=\"nofollow noreferrer\">Set Up to Develop\n  for Android N</a>.</p>\n</blockquote>\n\n<p><strong>Supported Java 8 Language Features and APIs</strong></p>\n\n<blockquote>\n  <p>Android does not currently support all Java 8 language features.\n  However, the following features are now available when developing apps\n  targeting the Android N Preview:</p>\n</blockquote>\n\n<p><a href=\"https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html\" rel=\"nofollow noreferrer\">Default and static interface methods</a></p>\n\n<p><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html\" rel=\"nofollow noreferrer\">Lambda expressions</a> (also available on API level 23 and lower)</p>\n\n<p><a href=\"https://docs.oracle.com/javase/tutorial/java/annotations/repeating.html\" rel=\"nofollow noreferrer\">Repeatable annotations</a></p>\n\n<p><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"nofollow noreferrer\">Method References</a> (also available on API level 23 and lower)</p>\n\n<p>There are some additional Java 8 features which Android support, you can see complete detail from <a href=\"https://developer.android.com/preview/j8-jack.html#supported-features\" rel=\"nofollow noreferrer\">Java 8 Language Features</a></p>\n\n<p><strong>Update</strong></p>\n\n<blockquote>\n  <p>Note: The Android N bases its implementation of lambda expressions on\n  anonymous classes. This approach allows them to be backwards\n  compatible and executable on earlier versions of Android. To test\n  lambda expressions on earlier versions, remember to go to your\n  build.gradle file, and set compileSdkVersion and targetSdkVersion to\n  23 or lower.</p>\n</blockquote>\n\n<p><strong>Update 2</strong></p>\n\n<p>Now Android studio 3.0 stable release support <a href=\"https://developer.android.com/studio/write/java8-support.html\" rel=\"nofollow noreferrer\">Java 8 libraries and Java 8 language features</a> (without the Jack compiler).</p>\n"},{"tags":[],"owner":{"account_id":2882843,"reputation":9557,"user_id":2473302,"accept_rate":40,"display_name":"Dhaval Jivani"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1509076996,"creation_date":1457612421,"answer_id":35916359,"question_id":23318109,"body_markdown":"Native Java 8 arrives on android! Finally!\r\n\r\n&gt; remove the Retrolambda plugin and retrolambda block from each module&#39;s\r\n&gt; build.gradle file:\r\n&gt; \r\n&gt; To disable Jack and switch to the default toolchain, simply remove the\r\n&gt; jackOptions block from your module’s build.gradle file\r\n\r\nTo start using supported Java 8 language features, update the Android plugin to 3.0.0 (or higher)\r\n\r\nStarting with Android Studio 3.0 , Java 8 language features are now natively supported by android:\r\n\r\n - Lambda expressions\r\n - Method references\r\n - Type annotations (currently type annotation information is not available at runtime but only on compile time);\r\n - Repeating annotations\r\n - Default and static interface methods (on API level 24 or higher, no instant run support tho);\r\n\r\nAlso from min API level 24 the following Java 8 API are available:\r\n\r\n - java.util.stream\r\n - java.util.function\r\n - java.lang.FunctionalInterface\r\n - java.lang.annotation.Repeatable\r\n - java.lang.reflect.AnnotatedElement.getAnnotationsByType(Class)\r\n - java.lang.reflect.Method.isDefault()\r\n\r\nAdd these lines to your application module’s build.gradle to inform the project of the language level:\r\n\r\n     android {\r\n       compileOptions {\r\n           sourceCompatibility JavaVersion.VERSION_1_8\r\n           targetCompatibility JavaVersion.VERSION_1_8\r\n       }\r\n\r\nDisable Support for Java 8 Language Features by adding the following to your **gradle.properties** file:\r\n\r\n    android.enableDesugar=false\r\n\r\n\r\n\r\nYou’re done! You can now use native java8!","title":"Is it possible to use Java 8 for Android development?","body":"<p>Native Java 8 arrives on android! Finally!</p>\n\n<blockquote>\n  <p>remove the Retrolambda plugin and retrolambda block from each module's\n  build.gradle file:</p>\n  \n  <p>To disable Jack and switch to the default toolchain, simply remove the\n  jackOptions block from your module’s build.gradle file</p>\n</blockquote>\n\n<p>To start using supported Java 8 language features, update the Android plugin to 3.0.0 (or higher)</p>\n\n<p>Starting with Android Studio 3.0 , Java 8 language features are now natively supported by android:</p>\n\n<ul>\n<li>Lambda expressions</li>\n<li>Method references</li>\n<li>Type annotations (currently type annotation information is not available at runtime but only on compile time);</li>\n<li>Repeating annotations</li>\n<li>Default and static interface methods (on API level 24 or higher, no instant run support tho);</li>\n</ul>\n\n<p>Also from min API level 24 the following Java 8 API are available:</p>\n\n<ul>\n<li>java.util.stream</li>\n<li>java.util.function</li>\n<li>java.lang.FunctionalInterface</li>\n<li>java.lang.annotation.Repeatable</li>\n<li>java.lang.reflect.AnnotatedElement.getAnnotationsByType(Class)</li>\n<li>java.lang.reflect.Method.isDefault()</li>\n</ul>\n\n<p>Add these lines to your application module’s build.gradle to inform the project of the language level:</p>\n\n<pre><code> android {\n   compileOptions {\n       sourceCompatibility JavaVersion.VERSION_1_8\n       targetCompatibility JavaVersion.VERSION_1_8\n   }\n</code></pre>\n\n<p>Disable Support for Java 8 Language Features by adding the following to your <strong>gradle.properties</strong> file:</p>\n\n<pre><code>android.enableDesugar=false\n</code></pre>\n\n<p>You’re done! You can now use native java8!</p>\n"},{"tags":[],"owner":{"account_id":1790832,"reputation":1380,"user_id":1631285,"display_name":"asozcan"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1461743798,"creation_date":1461743798,"answer_id":36883704,"question_id":23318109,"body_markdown":"Latest news:\r\n\r\nGoogle announce that with Android N and Android Studio 2.1+, platform will support Java 8. Also stable version of studio 2.1 was released. \r\n\r\nAt last we can use lambda expressions. No more list filter in for loop. Horeeey.","title":"Is it possible to use Java 8 for Android development?","body":"<p>Latest news:</p>\n\n<p>Google announce that with Android N and Android Studio 2.1+, platform will support Java 8. Also stable version of studio 2.1 was released. </p>\n\n<p>At last we can use lambda expressions. No more list filter in for loop. Horeeey.</p>\n"},{"tags":[],"owner":{"account_id":5300560,"reputation":19798,"user_id":4230345,"accept_rate":90,"display_name":"Farbod Salamat-Zadeh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1461779899,"creation_date":1461779899,"answer_id":36897453,"question_id":23318109,"body_markdown":"I wrote a [similar answer](https://stackoverflow.com/a/30440855/4230345) to a [similar question](https://stackoverflow.com/questions/30421389/android-studio-lambda-does-not-work/30440855#30440855_) on Stack Overflow, but here is part of that answer.\n\nAndroid Studio 2.1:  \n-\nThe new version of Android Studio (2.1) has support for Java 8 features. Here is an extract from the [Android Developers blogspot post](http://android-developers.blogspot.co.uk/2016/04/android-studio-21-supports-android-n.html):\n\n&gt;... Android Studio 2.1 release includes support for the new [Jack compiler](https://source.android.com/source/jack.html) and support for [Java 8](http://developer.android.com/intl/zh-cn/preview/j8-jack.html?utm_campaign=android_discussion_studiondeveloperpreview_042616&amp;utm_source=anddev&amp;utm_medium=blog). \n&gt;\n&gt;...\n&gt;\n&gt;To use Java 8 language features when developing with the N Developer Preview, you need to use the Jack compiler. The New Project Wizard [File→ New→ Project] generates the correct configurations for projects targeting the N.\n\n---\n\nPrior to Android Studio 2.1:\n-\n\nAndroid does not support Java 1.8 yet (it only supports up to 1.7), so you cannot use Java 8 features like lambdas.\n\n[This answer gives more detail on Android Studio&#39;s compatibility](https://stackoverflow.com/a/23318644/4230345); it states:\n&gt; If you want to use lambdas, one of the major features of Java 8 in Android, you can use gradle-retrolamba\n\nIf you want to know more about using `gradle-retrolambda`, [this answer gives a lot of detail on doing that](https://stackoverflow.com/a/28394024/4230345).","title":"Is it possible to use Java 8 for Android development?","body":"<p>I wrote a <a href=\"https://stackoverflow.com/a/30440855/4230345\">similar answer</a> to a <a href=\"https://stackoverflow.com/questions/30421389/android-studio-lambda-does-not-work/30440855#30440855_\">similar question</a> on Stack Overflow, but here is part of that answer.</p>\n<h2>Android Studio 2.1:</h2>\n<p>The new version of Android Studio (2.1) has support for Java 8 features. Here is an extract from the <a href=\"http://android-developers.blogspot.co.uk/2016/04/android-studio-21-supports-android-n.html\" rel=\"nofollow noreferrer\">Android Developers blogspot post</a>:</p>\n<blockquote>\n<p>... Android Studio 2.1 release includes support for the new <a href=\"https://source.android.com/source/jack.html\" rel=\"nofollow noreferrer\">Jack compiler</a> and support for <a href=\"http://developer.android.com/intl/zh-cn/preview/j8-jack.html?utm_campaign=android_discussion_studiondeveloperpreview_042616&amp;utm_source=anddev&amp;utm_medium=blog\" rel=\"nofollow noreferrer\">Java 8</a>.</p>\n<p>...</p>\n<p>To use Java 8 language features when developing with the N Developer Preview, you need to use the Jack compiler. The New Project Wizard [File→ New→ Project] generates the correct configurations for projects targeting the N.</p>\n</blockquote>\n<hr />\n<h2>Prior to Android Studio 2.1:</h2>\n<p>Android does not support Java 1.8 yet (it only supports up to 1.7), so you cannot use Java 8 features like lambdas.</p>\n<p><a href=\"https://stackoverflow.com/a/23318644/4230345\">This answer gives more detail on Android Studio's compatibility</a>; it states:</p>\n<blockquote>\n<p>If you want to use lambdas, one of the major features of Java 8 in Android, you can use gradle-retrolamba</p>\n</blockquote>\n<p>If you want to know more about using <code>gradle-retrolambda</code>, <a href=\"https://stackoverflow.com/a/28394024/4230345\">this answer gives a lot of detail on doing that</a>.</p>\n"},{"tags":[],"owner":{"account_id":1972221,"reputation":16711,"user_id":1770868,"accept_rate":95,"display_name":"Ahmad Aghazadeh"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1473933576,"creation_date":1473933576,"answer_id":39508219,"question_id":23318109,"body_markdown":"Add this config build.gradle and sync gradle:\r\n\r\n    android {\r\n        ...\r\n        defaultConfig {\r\n            ...\r\n            jackOptions {\r\n                enabled true\r\n            }\r\n        }\r\n    \r\n        compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_1_8\r\n            targetCompatibility JavaVersion.VERSION_1_8\r\n            // or\r\n            //sourceCompatibility 1.8\r\n            //targetCompatibility 1.8\r\n        }\r\n    }","title":"Is it possible to use Java 8 for Android development?","body":"<p>Add this config build.gradle and sync gradle:</p>\n\n<pre><code>android {\n    ...\n    defaultConfig {\n        ...\n        jackOptions {\n            enabled true\n        }\n    }\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n        // or\n        //sourceCompatibility 1.8\n        //targetCompatibility 1.8\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1342401,"reputation":23303,"user_id":1283845,"accept_rate":65,"display_name":"BlackHatSamurai"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1481667134,"creation_date":1481667134,"answer_id":41131437,"question_id":23318109,"body_markdown":"I figured I would post an updated answer for those looking at for something a little more current. \r\n\r\nCurrently Android and Android Studio are supporting a subset of Java 8 features. According to the Android documentation located [on their website][1], Google says: \r\n\r\n&gt; Support for Java 8 language features requires a new compiler called Jack. Jack is supported only on Android Studio 2.1 and higher. So if you want to use Java 8 language features, you need to use Android Studio 2.1 to build your app.\r\n\r\n&gt;If you already have Android Studio installed, make sure you update to the latest version by clicking Help &gt; Check for Update (on Mac, Android Studio &gt; Check for Updates). If you don&#39;t already have the IDE installed on your workstation, download Android Studio here.\r\n\r\n&gt;**Supported Java 8 Language Features and APIs**\r\n\r\n&gt;Android does not support all Java 8 language features. However, the following features are available when developing apps targeting Android 7.0 (API level 24):\r\n&gt; \r\n&gt;  - Default and static interface methods Lambda expressions (also    available on API level 23 and lower) \r\n&gt;  - Repeatable annotations \r\n&gt;  - Method References (also available on API level 23 and lower) \r\n&gt;  - Type Annotations (also available on API level 23 and lower)\r\n\r\nAdditionally, the following Java 8 language APIs are also available:\r\n\r\n&gt; Reflection and language-related APIs:\r\n&gt; \r\n&gt;    - java.lang.FunctionalInterface\r\n&gt;    - java.lang.annotation.Repeatable\r\n&gt;    - java.lang.reflect.Method.isDefault() and Reflection APIs associated with repeatable annotations, such as\r\n&gt; AnnotatedElement.getAnnotationsByType(Class)\r\n&gt; \r\n&gt; Utility APIs:\r\n&gt; \r\n&gt;  - java.util.function\r\n&gt;  - java.util.stream\r\n&gt; \r\n&gt; In order to use the new Java 8 language features, you need to also use the [Jack toolchain][2]. This new Android toolchain compiles Java language sources into Android-readable DEX bytecode, has its own .jack library format, and provides most toolchain features as part of a single tool: repackaging, shrinking, obfuscation and multidex.\r\n\r\n&gt;Here is a comparison of the two toolchains used to build Android DEX files:\r\n&gt; \r\n&gt;     \r\n&gt; \r\n&gt;     Legacy javac toolchain:\r\n&gt;         javac (.java → .class) → dx (.class → .dex)\r\n&gt;         New Jack toolchain:\r\n&gt;         Jack (.java → .jack → .dex)\r\n\r\n  [1]: https://developer.android.com/guide/platform/j8-jack.html\r\n  [2]: https://source.android.com/source/jack.html\r\n\r\n","title":"Is it possible to use Java 8 for Android development?","body":"<p>I figured I would post an updated answer for those looking at for something a little more current. </p>\n\n<p>Currently Android and Android Studio are supporting a subset of Java 8 features. According to the Android documentation located <a href=\"https://developer.android.com/guide/platform/j8-jack.html\" rel=\"nofollow noreferrer\">on their website</a>, Google says: </p>\n\n<blockquote>\n  <p>Support for Java 8 language features requires a new compiler called Jack. Jack is supported only on Android Studio 2.1 and higher. So if you want to use Java 8 language features, you need to use Android Studio 2.1 to build your app.</p>\n  \n  <p>If you already have Android Studio installed, make sure you update to the latest version by clicking Help > Check for Update (on Mac, Android Studio > Check for Updates). If you don't already have the IDE installed on your workstation, download Android Studio here.</p>\n  \n  <p><strong>Supported Java 8 Language Features and APIs</strong></p>\n  \n  <p>Android does not support all Java 8 language features. However, the following features are available when developing apps targeting Android 7.0 (API level 24):</p>\n  \n  <ul>\n  <li>Default and static interface methods Lambda expressions (also    available on API level 23 and lower) </li>\n  <li>Repeatable annotations </li>\n  <li>Method References (also available on API level 23 and lower) </li>\n  <li>Type Annotations (also available on API level 23 and lower)</li>\n  </ul>\n</blockquote>\n\n<p>Additionally, the following Java 8 language APIs are also available:</p>\n\n<blockquote>\n  <p>Reflection and language-related APIs:</p>\n  \n  <ul>\n  <li>java.lang.FunctionalInterface</li>\n  <li>java.lang.annotation.Repeatable</li>\n  <li>java.lang.reflect.Method.isDefault() and Reflection APIs associated with repeatable annotations, such as\n  AnnotatedElement.getAnnotationsByType(Class)</li>\n  </ul>\n  \n  <p>Utility APIs:</p>\n  \n  <ul>\n  <li>java.util.function</li>\n  <li>java.util.stream</li>\n  </ul>\n  \n  <p>In order to use the new Java 8 language features, you need to also use the <a href=\"https://source.android.com/source/jack.html\" rel=\"nofollow noreferrer\">Jack toolchain</a>. This new Android toolchain compiles Java language sources into Android-readable DEX bytecode, has its own .jack library format, and provides most toolchain features as part of a single tool: repackaging, shrinking, obfuscation and multidex.</p>\n  \n  <p>Here is a comparison of the two toolchains used to build Android DEX files:</p>\n\n<pre><code>Legacy javac toolchain:\n    javac (.java → .class) → dx (.class → .dex)\n    New Jack toolchain:\n    Jack (.java → .jack → .dex)\n</code></pre>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":3028277,"reputation":3741,"user_id":2567799,"accept_rate":67,"display_name":"stamanuel"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1489563504,"creation_date":1489563504,"answer_id":42803654,"question_id":23318109,"body_markdown":"Google just announced that Java 8 will be natively support by Android and that the Jack toolchain will deprecate:\r\n\r\n&gt; We&#39;ve decided to add support for Java 8 language features directly into the current javac and dx set of tools, and deprecate the Jack toolchain. With this new direction, existing tools and plugins dependent on the Java class file format should continue to work. Moving forward, Java 8 language features will be natively supported by the Android build system. We&#39;re aiming to launch this as part of Android Studio in the coming weeks, and we wanted to share this decision early with you. \r\n\r\nMore Info here:\r\nhttps://android-developers.googleblog.com/2017/03/future-of-java-8-language-feature.html","title":"Is it possible to use Java 8 for Android development?","body":"<p>Google just announced that Java 8 will be natively support by Android and that the Jack toolchain will deprecate:</p>\n\n<blockquote>\n  <p>We've decided to add support for Java 8 language features directly into the current javac and dx set of tools, and deprecate the Jack toolchain. With this new direction, existing tools and plugins dependent on the Java class file format should continue to work. Moving forward, Java 8 language features will be natively supported by the Android build system. We're aiming to launch this as part of Android Studio in the coming weeks, and we wanted to share this decision early with you. </p>\n</blockquote>\n\n<p>More Info here:\n<a href=\"https://android-developers.googleblog.com/2017/03/future-of-java-8-language-feature.html\" rel=\"nofollow noreferrer\">https://android-developers.googleblog.com/2017/03/future-of-java-8-language-feature.html</a></p>\n"},{"tags":[],"owner":{"account_id":1872335,"reputation":48173,"user_id":1741671,"accept_rate":86,"display_name":"Ajay S"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1489645113,"creation_date":1489645113,"answer_id":42826614,"question_id":23318109,"body_markdown":"Yes. We will use Java 8 soon!\r\n\r\n&gt; We&#39;ve decided to add support for Java 8 language features directly into the current javac and dx set of tools, and deprecate the Jack toolchain. With this new direction, existing tools and plugins dependent on the Java class file format should continue to work. Moving forward, Java 8 language features will be natively supported by the Android build system. We&#39;re aiming to launch this as part of Android Studio in the coming weeks, and we wanted to share this decision early with you. \r\n\r\n\r\nhttps://android-developers.googleblog.com/2017/03/future-of-java-8-language-feature.html","title":"Is it possible to use Java 8 for Android development?","body":"<p>Yes. We will use Java 8 soon!</p>\n\n<blockquote>\n  <p>We've decided to add support for Java 8 language features directly into the current javac and dx set of tools, and deprecate the Jack toolchain. With this new direction, existing tools and plugins dependent on the Java class file format should continue to work. Moving forward, Java 8 language features will be natively supported by the Android build system. We're aiming to launch this as part of Android Studio in the coming weeks, and we wanted to share this decision early with you. </p>\n</blockquote>\n\n<p><a href=\"https://android-developers.googleblog.com/2017/03/future-of-java-8-language-feature.html\" rel=\"nofollow noreferrer\">https://android-developers.googleblog.com/2017/03/future-of-java-8-language-feature.html</a></p>\n"},{"tags":[],"owner":{"account_id":326511,"reputation":28843,"user_id":648313,"accept_rate":100,"display_name":"Volo"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1579276856,"creation_date":1491412390,"answer_id":43237601,"question_id":23318109,"body_markdown":"**UPDATE 2020/01/17**\r\n\r\n**Android Studio 4.0** includes support for using a number of Java 8 language APIs, by using technique called desugaring, **without** requiring a minimum API level for your app:  \r\nhttps://developer.android.com/studio/preview/features#j8-desugar\r\n\r\n&gt; The following set of APIs is supported in this release:\r\n&gt; \r\n&gt;  - Sequential streams (`java.util.stream`)\r\n&gt;  - A subset of `java.time`\r\n&gt;  - `java.util.function`\r\n&gt;  - Recent additions to `java.util.{Map,Collection,Comparator}`\r\n&gt;  - Optionals (`java.util.Optional`, `java.util.OptionalInt` and `java.util.OptionalDouble`) and some other new classes useful with the\r\n&gt; above APIs\r\n&gt;  - Some additions to `java.util.concurrent.atomic` (new methods on `AtomicInteger`, `AtomicLong` and `AtomicReference`)\r\n&gt;  - `ConcurrentHashMap` (with bug fixes for Android 5.0)\r\n&gt; \r\n&gt; To support these language APIs, D8 compiles a separate library DEX\r\n&gt; file that contains an implementation of the missing APIs and includes\r\n&gt; it in your app. The desugaring process rewrites your app’s code to\r\n&gt; instead use this library at runtime.\r\n&gt; \r\n&gt; To enable support for these language APIs, include the following in\r\n&gt; your module’s `build.gradle` file:\r\n&gt; \r\n&gt;     android {\r\n&gt;       defaultConfig {\r\n&gt;         // Required when setting minSdkVersion to 20 or lower\r\n&gt;         multiDexEnabled true\r\n&gt;       }\r\n&gt;     \r\n&gt;       compileOptions {\r\n&gt;         // Flag to enable support for the new language APIs\r\n&gt;         coreLibraryDesugaringEnabled true\r\n&gt;         // Sets Java compatibility to Java 8\r\n&gt;         sourceCompatibility JavaVersion.VERSION_1_8\r\n&gt;         targetCompatibility JavaVersion.VERSION_1_8\r\n&gt;       }\r\n&gt;     }\r\n&gt;     \r\n&gt;     dependencies {\r\n&gt;       coreLibraryDesugaring &#39;com.android.tools:desugar_jdk_libs:1.0.4&#39;\r\n&gt;     }\r\n\r\n----\r\n\r\n**ORIGINAL POST FROM 2017**\r\n\r\n**Android Studio 3.0** started to provide built-in support for some of Java 8 language features, which are:\r\n\r\n - Lambda expressions\r\n - Method references\r\n - Type Annotations (information is available at compile time, but not at runtime)\r\n - Repeating annotations\r\n - Default and static interface methods\r\n\r\nAlso starting from API level 24 the following Java 8 API are available:\r\n\r\n - `java.util.stream`\r\n - `java.util.function`\r\n - `java.lang.FunctionalInterface`\r\n - `java.lang.annotation.Repeatable`\r\n - `java.lang.reflect.AnnotatedElement.getAnnotationsByType(Class)`\r\n - `java.lang.reflect.Method.isDefault()`\r\n\r\nBesides that, the `try-with-resources` support was extended to all Android API levels.\r\n\r\nMore Java 8 features are promised to be added in the future.\r\n\r\n&gt; To start using supported Java 8 language features, update the Android\r\n&gt; plugin to 3.0.0-alpha1 (or higher) and add the following to your\r\n&gt; module’s build.gradle file:\r\n&gt; \r\n&gt;     android {\r\n&gt;       ...\r\n&gt;       compileOptions {\r\n&gt;         sourceCompatibility JavaVersion.VERSION_1_8\r\n&gt;         targetCompatibility JavaVersion.VERSION_1_8\r\n&gt;       }\r\n&gt;     }\r\n\r\nFor more details visit:  \r\nhttps://developer.android.com/studio/write/java8-support.html\r\n","title":"Is it possible to use Java 8 for Android development?","body":"<p><strong>UPDATE 2020/01/17</strong></p>\n\n<p><strong>Android Studio 4.0</strong> includes support for using a number of Java 8 language APIs, by using technique called desugaring, <strong>without</strong> requiring a minimum API level for your app:<br>\n<a href=\"https://developer.android.com/studio/preview/features#j8-desugar\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/preview/features#j8-desugar</a></p>\n\n<blockquote>\n  <p>The following set of APIs is supported in this release:</p>\n  \n  <ul>\n  <li>Sequential streams (<code>java.util.stream</code>)</li>\n  <li>A subset of <code>java.time</code></li>\n  <li><code>java.util.function</code></li>\n  <li>Recent additions to <code>java.util.{Map,Collection,Comparator}</code></li>\n  <li>Optionals (<code>java.util.Optional</code>, <code>java.util.OptionalInt</code> and <code>java.util.OptionalDouble</code>) and some other new classes useful with the\n  above APIs</li>\n  <li>Some additions to <code>java.util.concurrent.atomic</code> (new methods on <code>AtomicInteger</code>, <code>AtomicLong</code> and <code>AtomicReference</code>)</li>\n  <li><code>ConcurrentHashMap</code> (with bug fixes for Android 5.0)</li>\n  </ul>\n  \n  <p>To support these language APIs, D8 compiles a separate library DEX\n  file that contains an implementation of the missing APIs and includes\n  it in your app. The desugaring process rewrites your app’s code to\n  instead use this library at runtime.</p>\n  \n  <p>To enable support for these language APIs, include the following in\n  your module’s <code>build.gradle</code> file:</p>\n\n<pre><code>android {\n  defaultConfig {\n    // Required when setting minSdkVersion to 20 or lower\n    multiDexEnabled true\n  }\n\n  compileOptions {\n    // Flag to enable support for the new language APIs\n    coreLibraryDesugaringEnabled true\n    // Sets Java compatibility to Java 8\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n  }\n}\n\ndependencies {\n  coreLibraryDesugaring 'com.android.tools:desugar_jdk_libs:1.0.4'\n}\n</code></pre>\n</blockquote>\n\n<hr>\n\n<p><strong>ORIGINAL POST FROM 2017</strong></p>\n\n<p><strong>Android Studio 3.0</strong> started to provide built-in support for some of Java 8 language features, which are:</p>\n\n<ul>\n<li>Lambda expressions</li>\n<li>Method references</li>\n<li>Type Annotations (information is available at compile time, but not at runtime)</li>\n<li>Repeating annotations</li>\n<li>Default and static interface methods</li>\n</ul>\n\n<p>Also starting from API level 24 the following Java 8 API are available:</p>\n\n<ul>\n<li><code>java.util.stream</code></li>\n<li><code>java.util.function</code></li>\n<li><code>java.lang.FunctionalInterface</code></li>\n<li><code>java.lang.annotation.Repeatable</code></li>\n<li><code>java.lang.reflect.AnnotatedElement.getAnnotationsByType(Class)</code></li>\n<li><code>java.lang.reflect.Method.isDefault()</code></li>\n</ul>\n\n<p>Besides that, the <code>try-with-resources</code> support was extended to all Android API levels.</p>\n\n<p>More Java 8 features are promised to be added in the future.</p>\n\n<blockquote>\n  <p>To start using supported Java 8 language features, update the Android\n  plugin to 3.0.0-alpha1 (or higher) and add the following to your\n  module’s build.gradle file:</p>\n\n<pre><code>android {\n  ...\n  compileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n  }\n}\n</code></pre>\n</blockquote>\n\n<p>For more details visit:<br>\n<a href=\"https://developer.android.com/studio/write/java8-support.html\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/write/java8-support.html</a></p>\n"},{"tags":[],"owner":{"account_id":3084900,"reputation":16354,"user_id":2612259,"accept_rate":76,"display_name":"nPn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1495106006,"creation_date":1495106006,"answer_id":44046202,"question_id":23318109,"body_markdown":"I asked this question over 3 years ago and obviously the answers have changed over the years.  As many above have already answered, as of sometime back, the answer became **Yes**.   I have never updated the accepted answer because it was the correct answer at the time. (I am not sure what the Stack Overflow policy is on that)\r\n\r\nI just wanted to add another answer for those who still search for this topic. As of  5/17/2017 Google also announced that [Kotlin][1] is also an **official** language for Android development.\r\n\r\nI have not found an official press release, but I did watch some of the Google I/O [videos][2] where it was announced.  Here is a link to a blog [post][3] by the Kotlin team on the announcement. \r\n\r\n\r\n  [1]: https://kotlinlang.org/\r\n  [2]: https://www.youtube.com/watch?v=d8ALcQiuPWs\r\n  [3]: https://blog.jetbrains.com/kotlin/2017/05/kotlin-on-android-now-official/","title":"Is it possible to use Java 8 for Android development?","body":"<p>I asked this question over 3 years ago and obviously the answers have changed over the years.  As many above have already answered, as of sometime back, the answer became <strong>Yes</strong>.   I have never updated the accepted answer because it was the correct answer at the time. (I am not sure what the Stack Overflow policy is on that)</p>\n\n<p>I just wanted to add another answer for those who still search for this topic. As of  5/17/2017 Google also announced that <a href=\"https://kotlinlang.org/\" rel=\"nofollow noreferrer\">Kotlin</a> is also an <strong>official</strong> language for Android development.</p>\n\n<p>I have not found an official press release, but I did watch some of the Google I/O <a href=\"https://www.youtube.com/watch?v=d8ALcQiuPWs\" rel=\"nofollow noreferrer\">videos</a> where it was announced.  Here is a link to a blog <a href=\"https://blog.jetbrains.com/kotlin/2017/05/kotlin-on-android-now-official/\" rel=\"nofollow noreferrer\">post</a> by the Kotlin team on the announcement. </p>\n"},{"tags":[],"owner":{"account_id":6303863,"reputation":729,"user_id":4897593,"display_name":"Richard"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1496423915,"creation_date":1496423915,"answer_id":44334288,"question_id":23318109,"body_markdown":"Adding the following fixed the problem for me (Android studio 2.3.2):\r\n\r\n**build.gradle (Project)**\r\n\r\n    buildscript {\r\n    repositories {\r\n        ...\r\n        jcenter()\r\n    }\r\n    dependencies {\r\n        ...\r\n        classpath &#39;me.tatarka:gradle-retrolambda:3.4.0&#39; // DEPENDENCY\r\n        ...\r\n       }\r\n    }\r\n\r\n**build.gradle (Module: app)**\r\n\r\n    apply plugin: &#39;com.android.application&#39;\r\n    apply plugin: &#39;me.tatarka.retrolambda&#39; //PLUGIN\r\n    \r\n    android {\r\n        ...\r\n        compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_1_8\r\n            targetCompatibility JavaVersion.VERSION_1_8\r\n        } // SET JAVA VERSION\r\n        ...\r\n    }\r\n","title":"Is it possible to use Java 8 for Android development?","body":"<p>Adding the following fixed the problem for me (Android studio 2.3.2):</p>\n\n<p><strong>build.gradle (Project)</strong></p>\n\n<pre><code>buildscript {\nrepositories {\n    ...\n    jcenter()\n}\ndependencies {\n    ...\n    classpath 'me.tatarka:gradle-retrolambda:3.4.0' // DEPENDENCY\n    ...\n   }\n}\n</code></pre>\n\n<p><strong>build.gradle (Module: app)</strong></p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'me.tatarka.retrolambda' //PLUGIN\n\nandroid {\n    ...\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    } // SET JAVA VERSION\n    ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11042505,"reputation":3088,"user_id":8109872,"accept_rate":0,"display_name":"Fio"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1517694464,"creation_date":1516890553,"answer_id":48445262,"question_id":23318109,"body_markdown":"A subset of Java 8 is supported now on Android Studio. Just make the Source and Target Compatibility adjustments from the window below:\r\n\r\nFile --&gt; Project Structure\r\n\r\n[![Adjustment Window][1]][1]\r\n\r\n\r\nMore information is given in the below link.\r\n\r\n[https://developer.android.com/studio/write/java8-support.html][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/udegk.png\r\n  [2]: https://developer.android.com/studio/write/java8-support.html","title":"Is it possible to use Java 8 for Android development?","body":"<p>A subset of Java 8 is supported now on Android Studio. Just make the Source and Target Compatibility adjustments from the window below:</p>\n\n<p>File --> Project Structure</p>\n\n<p><a href=\"https://i.stack.imgur.com/udegk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/udegk.png\" alt=\"Adjustment Window\"></a></p>\n\n<p>More information is given in the below link.</p>\n\n<p><a href=\"https://developer.android.com/studio/write/java8-support.html\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/write/java8-support.html</a></p>\n"},{"tags":[],"owner":{"account_id":9280154,"reputation":57862,"user_id":6891563,"accept_rate":75,"display_name":"Khemraj Sharma"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1564550397,"creation_date":1536739152,"answer_id":52290242,"question_id":23318109,"body_markdown":"#Easy way\r\n\r\nYou can enable java 1.8 support for android project.\r\n\r\n - Open Project Structure\r\n\r\n  - Either by pressing &lt;kbd&gt;Ctrl + Shift + Alt + S&lt;/kbd&gt;\r\n\r\n  - Or **`File &gt; Project Structure`**\r\n\r\n - Update the **Source Compatibility** and **Target Compatibility** to **1.8** in the Project Structure dialog as shown (click File &gt; Project Structure).\r\n\r\n[![image][1]][1]\r\n\r\n**Or you can use gradle**\r\n\r\n     android {\r\n       compileOptions {\r\n           sourceCompatibility JavaVersion.VERSION_1_8\r\n           targetCompatibility JavaVersion.VERSION_1_8\r\n       }\r\n\r\nSync project. And that&#39;s it!\r\n\r\n**Note:** Java 1.8 support can be enabled for **Android Studio 3.0.0** or higher. See [Documentation][2] for further reading.\r\n\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bf2FY.png\r\n  [2]: https://developer.android.com/studio/write/java8-support","title":"Is it possible to use Java 8 for Android development?","body":"<h1>Easy way</h1>\n\n<p>You can enable java 1.8 support for android project.</p>\n\n<ul>\n<li><p>Open Project Structure</p>\n\n<ul>\n<li><p>Either by pressing <kbd>Ctrl + Shift + Alt + S</kbd></p></li>\n<li><p>Or <strong><code>File &gt; Project Structure</code></strong></p></li>\n</ul></li>\n<li><p>Update the <strong>Source Compatibility</strong> and <strong>Target Compatibility</strong> to <strong>1.8</strong> in the Project Structure dialog as shown (click File > Project Structure).</p></li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/bf2FY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bf2FY.png\" alt=\"image\"></a></p>\n\n<p><strong>Or you can use gradle</strong></p>\n\n<pre><code> android {\n   compileOptions {\n       sourceCompatibility JavaVersion.VERSION_1_8\n       targetCompatibility JavaVersion.VERSION_1_8\n   }\n</code></pre>\n\n<p>Sync project. And that's it!</p>\n\n<p><strong>Note:</strong> Java 1.8 support can be enabled for <strong>Android Studio 3.0.0</strong> or higher. See <a href=\"https://developer.android.com/studio/write/java8-support\" rel=\"nofollow noreferrer\">Documentation</a> for further reading.</p>\n"},{"tags":[],"owner":{"account_id":12230786,"reputation":1392,"user_id":8926845,"display_name":"YuvrajsinhJadeja"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1554181277,"creation_date":1554181277,"answer_id":55467237,"question_id":23318109,"body_markdown":"addd this line into module lvl build gradel\r\n\r\n\r\n `compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }`\r\n ","title":"Is it possible to use Java 8 for Android development?","body":"<p>addd this line into module lvl build gradel</p>\n\n<p><code>compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }</code></p>\n"},{"tags":[],"owner":{"account_id":4756254,"reputation":4369,"user_id":3844956,"accept_rate":43,"display_name":"zackygaurav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1562826082,"creation_date":1562826082,"answer_id":56982753,"question_id":23318109,"body_markdown":"All the above solutions doesn&#39;t seem to work in **2019** with the latest **Android Studio 3.4+**.\r\n\r\nI figured out a perfect and up to date solution to migrate or upgrade your Android Project to **Java 8**.\r\n\r\n**Solution:**\r\nClick on **File** -&gt; **Project Structure** -&gt; **Modules** -&gt; **Properties** tab.\r\n&lt;br/&gt;&lt;br/&gt;Change the **Source Compatibility** and **Target Compatibility** to **1.8 (Java 8)**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rb3bE.png","title":"Is it possible to use Java 8 for Android development?","body":"<p>All the above solutions doesn't seem to work in <strong>2019</strong> with the latest <strong>Android Studio 3.4+</strong>.</p>\n\n<p>I figured out a perfect and up to date solution to migrate or upgrade your Android Project to <strong>Java 8</strong>.</p>\n\n<p><strong>Solution:</strong>\nClick on <strong>File</strong> -> <strong>Project Structure</strong> -> <strong>Modules</strong> -> <strong>Properties</strong> tab.\n<br/><br/>Change the <strong>Source Compatibility</strong> and <strong>Target Compatibility</strong> to <strong>1.8 (Java 8)</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/rb3bE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rb3bE.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":270104,"reputation":19183,"user_id":559850,"accept_rate":94,"display_name":"Tyler"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1572301752,"creation_date":1572301752,"answer_id":58599201,"question_id":23318109,"body_markdown":"**UPDATE 2019/10/28**\r\n\r\n[Android Studio 4.0][1] solves this [issue][2].\r\n\r\nThe D8 compiler patches a backport of the Java 8 native APIs into your APK at compile time and your app will use that code, instead of the native APIs, at runtime.  The process is called [desugaring][3].\r\n\r\n\r\n  [1]: https://androidstudio.googleblog.com/2019/10/android-studio-40-canary-1-available.html\r\n  [2]: https://issuetracker.google.com/issues/114481425\r\n  [3]: https://developer.android.com/studio/preview/features#j8-desugar","title":"Is it possible to use Java 8 for Android development?","body":"<p><strong>UPDATE 2019/10/28</strong></p>\n\n<p><a href=\"https://androidstudio.googleblog.com/2019/10/android-studio-40-canary-1-available.html\" rel=\"nofollow noreferrer\">Android Studio 4.0</a> solves this <a href=\"https://issuetracker.google.com/issues/114481425\" rel=\"nofollow noreferrer\">issue</a>.</p>\n\n<p>The D8 compiler patches a backport of the Java 8 native APIs into your APK at compile time and your app will use that code, instead of the native APIs, at runtime.  The process is called <a href=\"https://developer.android.com/studio/preview/features#j8-desugar\" rel=\"nofollow noreferrer\">desugaring</a>.</p>\n"},{"tags":[],"owner":{"account_id":6288048,"reputation":186,"user_id":4886577,"display_name":"Bijay Budhathoki"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578482686,"creation_date":1578482686,"answer_id":59644816,"question_id":23318109,"body_markdown":"Yes, you can use Java 8 Language features in Android Studio but the version must be 3.0 or higher. Read this article for how to use java 8 features in the android studio.\r\n\r\nhttps://bijay-budhathoki.blogspot.com/2020/01/use-java-8-language-features-in-android-studio.html","title":"Is it possible to use Java 8 for Android development?","body":"<p>Yes, you can use Java 8 Language features in Android Studio but the version must be 3.0 or higher. Read this article for how to use java 8 features in the android studio.</p>\n\n<p><a href=\"https://bijay-budhathoki.blogspot.com/2020/01/use-java-8-language-features-in-android-studio.html\" rel=\"nofollow noreferrer\">https://bijay-budhathoki.blogspot.com/2020/01/use-java-8-language-features-in-android-studio.html</a></p>\n"},{"tags":[],"owner":{"account_id":10158245,"reputation":87,"user_id":7502615,"display_name":"Bora Savkar"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1590245791,"creation_date":1590245791,"answer_id":61973951,"question_id":23318109,"body_markdown":"Easiest way to add Java 8 support \r\n\r\n     compileOptions {\r\n        targetCompatibility = &#39;1.8&#39;\r\n        sourceCompatibility = &#39;1.8&#39;\r\n     }\r\n\r\nJust add it in your build.gradle file.","title":"Is it possible to use Java 8 for Android development?","body":"<p>Easiest way to add Java 8 support </p>\n\n<pre><code> compileOptions {\n    targetCompatibility = '1.8'\n    sourceCompatibility = '1.8'\n }\n</code></pre>\n\n<p>Just add it in your build.gradle file.</p>\n"},{"tags":[],"owner":{"account_id":20534898,"reputation":199,"user_id":15071236,"display_name":"Himesh Perera"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1614928598,"creation_date":1614928598,"answer_id":66488283,"question_id":23318109,"body_markdown":"Android Gradle plugin 3.0.0 and later support all Java 7 language features and a subset of Java 8 language features that vary by platform version. When building your app using Android Gradle plugin 4.0.0 and higher, you can use a number of Java 8 language APIs without requiring a minimum API level for your app.\r\n\r\nThis page describes the Java 8 language features you can use, how to properly configure your project to use them, and any known issues you may encounter. \r\n\r\nFor this article will help you. I&#39;ll put the link here below down \r\nhttps://developer.android.com/studio/write/java8-support","title":"Is it possible to use Java 8 for Android development?","body":"<p>Android Gradle plugin 3.0.0 and later support all Java 7 language features and a subset of Java 8 language features that vary by platform version. When building your app using Android Gradle plugin 4.0.0 and higher, you can use a number of Java 8 language APIs without requiring a minimum API level for your app.</p>\n<p>This page describes the Java 8 language features you can use, how to properly configure your project to use them, and any known issues you may encounter.</p>\n<p>For this article will help you. I'll put the link here below down\n<a href=\"https://developer.android.com/studio/write/java8-support\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/write/java8-support</a></p>\n"},{"tags":[],"owner":{"account_id":18779513,"reputation":1070,"user_id":13694485,"display_name":"PRANAV SINGH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635965658,"creation_date":1635965658,"answer_id":69830315,"question_id":23318109,"body_markdown":"**EASY TO REMEMBER ANSWER**\r\n\r\nIn android studio click on project structure icon then go inside Modules/app then change Source Compatibility and Target Compatibility to 1.8 and press Ok.\r\n\r\n [![][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/b20jx.png","title":"Is it possible to use Java 8 for Android development?","body":"<p><strong>EASY TO REMEMBER ANSWER</strong></p>\n<p>In android studio click on project structure icon then go inside Modules/app then change Source Compatibility and Target Compatibility to 1.8 and press Ok.</p>\n<p><a href=\"https://i.stack.imgur.com/b20jx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b20jx.png\" alt=\"\" /></a></p>\n"}],"owner":{"account_id":3084900,"reputation":16354,"user_id":2612259,"accept_rate":76,"display_name":"nPn"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":296739,"favorite_count":0,"down_vote_count":4,"up_vote_count":637,"accepted_answer_id":23318269,"answer_count":28,"score":633,"last_activity_date":1635965658,"creation_date":1398559243,"question_id":23318109,"body_markdown":"Searching the web, it is not clear if Java 8 is supported for Android development or not.\r\n\r\nBefore I download/setup Java 8, can some one point me at any &quot;official&quot; documentation that says Java 8 is or is not supported for Android development.","title":"Is it possible to use Java 8 for Android development?","body":"<p>Searching the web, it is not clear if Java 8 is supported for Android development or not.</p>\n\n<p>Before I download/setup Java 8, can some one point me at any \"official\" documentation that says Java 8 is or is not supported for Android development.</p>\n"},{"tags":["java","android","alarmmanager","repeatingalarm"],"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1635965941,"post_id":69830304,"comment_id":123435548,"body_markdown":"What does the Javadoc for `setRepeating` say? Also, `Calendar` is deprecated nowadays in favor of the `java.time` API.","body":"What does the Javadoc for <code>setRepeating</code> say? Also, <code>Calendar</code> is deprecated nowadays in favor of the <code>java.time</code> API."},{"owner":{"account_id":17996643,"reputation":455,"user_id":17317985,"display_name":"Will"},"score":0,"creation_date":1635966211,"post_id":69830304,"comment_id":123435655,"body_markdown":"It has no error output. I&#39;m afraid calendar.getTimeInMillis() is adding up the total time for execution. Example: if I needed the alarm to go off at 4:15 pm it converts ((16 * 60) + 15) * 60 * 1000 to the first action. So it&#39;s not working. I&#39;m not sure how the Alarm Manager works.","body":"It has no error output. I&#39;m afraid calendar.getTimeInMillis() is adding up the total time for execution. Example: if I needed the alarm to go off at 4:15 pm it converts ((16 * 60) + 15) * 60 * 1000 to the first action. So it&#39;s not working. I&#39;m not sure how the Alarm Manager works."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1635966328,"post_id":69830304,"comment_id":123435700,"body_markdown":"That&#39;s why I&#39;m suggesting you look at the documentation for Alarm Manager.","body":"That&#39;s why I&#39;m suggesting you look at the documentation for Alarm Manager."},{"owner":{"account_id":17996643,"reputation":455,"user_id":17317985,"display_name":"Will"},"score":0,"creation_date":1635966437,"post_id":69830304,"comment_id":123435739,"body_markdown":"Thankyou very much David!","body":"Thankyou very much David!"}],"owner":{"account_id":17996643,"reputation":455,"user_id":17317985,"display_name":"Will"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1635965612,"creation_date":1635965612,"question_id":69830304,"body_markdown":"I&#39;m trying to make an alarm that besides shoot today, repeat on the exact same hour on the next day.\r\n\r\nNot having any success until now. \r\n\r\n     Calendar calendar = Calendar.getInstance();\r\n     calendar.set(Calendar.HOUR_OF_DAY, timeHOUR);\r\n     calendar.set(Calendar.HOUR, timeHOUR);\r\n     calendar.set(Calendar.MINUTE, timeMINUTE);\r\n\r\nThe alarm must occur at the same times on the following days.\r\n\r\n            alarmMgr.setRepeating(AlarmManager.RTC_WAKEUP,\r\n            calendar.getTimeInMillis(), AlarmManager.INTERVAL_DAY, pendingIntent);\r\n\r\nAlso i need to be able to register more than 1 alarm. I&#39;m not sure if **setRepeating()** supports that.\r\n\r\n\r\n\r\n","title":"How to set an alarm to exact hour on following days?","body":"<p>I'm trying to make an alarm that besides shoot today, repeat on the exact same hour on the next day.</p>\n<p>Not having any success until now.</p>\n<pre><code> Calendar calendar = Calendar.getInstance();\n calendar.set(Calendar.HOUR_OF_DAY, timeHOUR);\n calendar.set(Calendar.HOUR, timeHOUR);\n calendar.set(Calendar.MINUTE, timeMINUTE);\n</code></pre>\n<p>The alarm must occur at the same times on the following days.</p>\n<pre><code>        alarmMgr.setRepeating(AlarmManager.RTC_WAKEUP,\n        calendar.getTimeInMillis(), AlarmManager.INTERVAL_DAY, pendingIntent);\n</code></pre>\n<p>Also i need to be able to register more than 1 alarm. I'm not sure if <strong>setRepeating()</strong> supports that.</p>\n"},{"tags":["java","eclipse","javafx","jar"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":3,"creation_date":1635803141,"post_id":69803076,"comment_id":123386264,"body_markdown":"Check out [jpackage](https://docs.oracle.com/en/java/javase/17/jpackage/packaging-overview.html#GUID-C1027043-587D-418D-8188-EF8F44A4C06A).","body":"Check out <a href=\"https://docs.oracle.com/en/java/javase/17/jpackage/packaging-overview.html#GUID-C1027043-587D-418D-8188-EF8F44A4C06A\" rel=\"nofollow noreferrer\">jpackage</a>."}],"answers":[{"tags":[],"owner":{"account_id":23230221,"reputation":1,"user_id":17321111,"display_name":"Ben Herbst"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635965599,"creation_date":1635965599,"answer_id":69830299,"question_id":69803076,"body_markdown":"You can&#39;t create without arguments, but as the openjfx tutorial also say, you can use jlink and then create a .exe, .deb etc., Use JLink to create binarys and then use jpackage to create the .exe, .deb etc.\r\nYou can find a tutorial for jlink + jpackage + javafx here: https://dev.to/cherrychain/javafx-jlink-and-jpackage-h9","title":"JavaFX JAR executable without adding extra arguments","body":"<p>You can't create without arguments, but as the openjfx tutorial also say, you can use jlink and then create a .exe, .deb etc., Use JLink to create binarys and then use jpackage to create the .exe, .deb etc.\nYou can find a tutorial for jlink + jpackage + javafx here: <a href=\"https://dev.to/cherrychain/javafx-jlink-and-jpackage-h9\" rel=\"nofollow noreferrer\">https://dev.to/cherrychain/javafx-jlink-and-jpackage-h9</a></p>\n"}],"owner":{"account_id":16351409,"reputation":1,"user_id":11809827,"display_name":"Quentin Verchere"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":795,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635965599,"creation_date":1635802854,"question_id":69803076,"body_markdown":"I&#39;m following the JavaFX Getting Started Guide on https://openjfx.io/openjfx-docs/\r\n\r\nI have a basic JavaFX project on Eclipse which run perfectly. Now I would like to generate an executable from this project, on Windows, MacOS and Linux (in order to make my own tutorial).\r\n\r\nThe code is given by OpenJFX.io : https://github.com/openjfx/samples/tree/master/IDE/Eclipse/Non-Modular/Java\r\n\r\nI am at the step where I need to generate a .jar file.\r\n\r\nAs described in the tutoriel, I am facing this error :\r\n\r\nWarning: If you now run the project it will compile but you will get this error:\r\n\r\n**Error: JavaFX runtime components are missing, and are required to run this application\r\nThis error is shown since the Java 16 launcher checks if the main class extends javafx.application.Application. If that is the case, it is required to have the javafx.graphics module on the module-path.**\r\n \r\n[JavaFX runtime components are missing error][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MHd5g.png\r\n\r\nTo get over it, I need to add this argument : **--module-path /path/to/javafx-sdk-17/lib --add-modules javafx.controls,javafx.fxml**\r\n\r\nBut when I generate a .jar file with Eclipse (File -&gt; Export -&gt; Runnable JAR file), it tells me that my argument will not be part of the runnable JAR, but it can be passed on the command line when laughing the JAR.\r\n\r\nSo I have my JAR, I cannot run it with the simple line **java -jar MyJar.jar**\r\nI need to add the --module-path parameter before, like this : \r\n\r\n**java --module-path /PATH_TO_SDK --add-modules javafx.controls,javafx.fxml -jar MyJar.jar**\r\n\r\nMy question is : I want to create a simple executable, without asking my user any configuration, how can I do it ?\r\n\r\n - Can I pass the argument within a .jar ?\r\n - Can I generate a .exe (Windows), .dmg (MacOS) or .rpm (Linux) from the jar, where the user don&#39;t have to add extra argument ? \r\n","title":"JavaFX JAR executable without adding extra arguments","body":"<p>I'm following the JavaFX Getting Started Guide on <a href=\"https://openjfx.io/openjfx-docs/\" rel=\"nofollow noreferrer\">https://openjfx.io/openjfx-docs/</a></p>\n<p>I have a basic JavaFX project on Eclipse which run perfectly. Now I would like to generate an executable from this project, on Windows, MacOS and Linux (in order to make my own tutorial).</p>\n<p>The code is given by OpenJFX.io : <a href=\"https://github.com/openjfx/samples/tree/master/IDE/Eclipse/Non-Modular/Java\" rel=\"nofollow noreferrer\">https://github.com/openjfx/samples/tree/master/IDE/Eclipse/Non-Modular/Java</a></p>\n<p>I am at the step where I need to generate a .jar file.</p>\n<p>As described in the tutoriel, I am facing this error :</p>\n<p>Warning: If you now run the project it will compile but you will get this error:</p>\n<p><strong>Error: JavaFX runtime components are missing, and are required to run this application\nThis error is shown since the Java 16 launcher checks if the main class extends javafx.application.Application. If that is the case, it is required to have the javafx.graphics module on the module-path.</strong></p>\n<p><a href=\"https://i.stack.imgur.com/MHd5g.png\" rel=\"nofollow noreferrer\">JavaFX runtime components are missing error</a></p>\n<p>To get over it, I need to add this argument : <strong>--module-path /path/to/javafx-sdk-17/lib --add-modules javafx.controls,javafx.fxml</strong></p>\n<p>But when I generate a .jar file with Eclipse (File -&gt; Export -&gt; Runnable JAR file), it tells me that my argument will not be part of the runnable JAR, but it can be passed on the command line when laughing the JAR.</p>\n<p>So I have my JAR, I cannot run it with the simple line <strong>java -jar MyJar.jar</strong>\nI need to add the --module-path parameter before, like this :</p>\n<p><strong>java --module-path /PATH_TO_SDK --add-modules javafx.controls,javafx.fxml -jar MyJar.jar</strong></p>\n<p>My question is : I want to create a simple executable, without asking my user any configuration, how can I do it ?</p>\n<ul>\n<li>Can I pass the argument within a .jar ?</li>\n<li>Can I generate a .exe (Windows), .dmg (MacOS) or .rpm (Linux) from the jar, where the user don't have to add extra argument ?</li>\n</ul>\n"},{"tags":["java","spring","maven","intellij-idea","glassfish"],"comments":[{"owner":{"account_id":1143154,"reputation":19805,"user_id":1126526,"accept_rate":90,"display_name":"manish"},"score":0,"creation_date":1438030750,"post_id":31663149,"comment_id":51270906,"body_markdown":"You should have `&lt;mvc:resources location=&quot;classpath:/META-INF/resources/webjars/&quot; mapping=&quot;/webjars/**&quot;/&gt;`.","body":"You should have <code>&lt;mvc:resources location=&quot;classpath:&#47;META-INF&#47;resources&#47;webjars&#47;&quot; mapping=&quot;&#47;webjars&#47;**&quot;&#47;&gt;</code>."},{"owner":{"account_id":5973669,"reputation":6765,"user_id":4695271,"accept_rate":69,"display_name":"x80486"},"score":0,"creation_date":1438031018,"post_id":31663149,"comment_id":51271040,"body_markdown":"@manish he/she is using Java 8 and Glassfish 4.1.0, so I&#39;m sure the `web.xml` is Servlet 3.0 compatible...having this: `&lt;mvc:resources mapping=&quot;/webjars/**&quot; location=&quot;/webjars/&quot; /&gt;` is enough","body":"@manish he/she is using Java 8 and Glassfish 4.1.0, so I&#39;m sure the <code>web.xml</code> is Servlet 3.0 compatible...having this: <code>&lt;mvc:resources mapping=&quot;&#47;webjars&#47;**&quot; location=&quot;&#47;webjars&#47;&quot; &#47;&gt;</code> is enough"},{"owner":{"account_id":3002430,"reputation":878,"user_id":2547661,"accept_rate":71,"display_name":"FateNuller"},"score":0,"creation_date":1438087373,"post_id":31663149,"comment_id":51295185,"body_markdown":"@manish - I get the same error with that location path. It doesn&#39;t understand what &quot;classpath:&quot; is.","body":"@manish - I get the same error with that location path. It doesn&#39;t understand what &quot;classpath:&quot; is."},{"owner":{"account_id":1143154,"reputation":19805,"user_id":1126526,"accept_rate":90,"display_name":"manish"},"score":0,"creation_date":1438087637,"post_id":31663149,"comment_id":51295386,"body_markdown":"Ignore the errors you see in the IDE for the time being.  Have the runtime errors been resolved?  Lets fix one issue at a time.","body":"Ignore the errors you see in the IDE for the time being.  Have the runtime errors been resolved?  Lets fix one issue at a time."},{"owner":{"account_id":3002430,"reputation":878,"user_id":2547661,"accept_rate":71,"display_name":"FateNuller"},"score":0,"creation_date":1438087865,"post_id":31663149,"comment_id":51295555,"body_markdown":"@manish - so I used your line of code in my spring-config.xml and it successfully deployed but I am getting 404 errors at runtime when it tries to load the resources from HTML.\n\nExample:\n`http://localhost:8080/webjars/jquery/3.0.0-alpha1/jquery.min.js Failed to load resource: the server responded with a status of 404 (Not Found)`","body":"@manish - so I used your line of code in my spring-config.xml and it successfully deployed but I am getting 404 errors at runtime when it tries to load the resources from HTML.  Example: <code>http:&#47;&#47;localhost:8080&#47;webjars&#47;jquery&#47;3.0.0-alpha1&#47;jquery.min&zwnj;&#8203;.js Failed to load resource: the server responded with a status of 404 (Not Found)</code>"},{"owner":{"account_id":1143154,"reputation":19805,"user_id":1126526,"accept_rate":90,"display_name":"manish"},"score":0,"creation_date":1438087942,"post_id":31663149,"comment_id":51295616,"body_markdown":"Did the others work or are all of them still failing?  Also, it will be better if you use `RELEASE` versions instead of `LATEST` versions, which could include snapshots.","body":"Did the others work or are all of them still failing?  Also, it will be better if you use <code>RELEASE</code> versions instead of <code>LATEST</code> versions, which could include snapshots."},{"owner":{"account_id":3002430,"reputation":878,"user_id":2547661,"accept_rate":71,"display_name":"FateNuller"},"score":0,"creation_date":1438088044,"post_id":31663149,"comment_id":51295692,"body_markdown":"All responded with 404 errors.\n\nOkay - I switched to `RELEASE` in my dependencies and redeployed successfully and refreshed the web page. Now the exceptions aren&#39;t as verbose and one reports a 404, where the others just say that an error occurred.","body":"All responded with 404 errors.  Okay - I switched to <code>RELEASE</code> in my dependencies and redeployed successfully and refreshed the web page. Now the exceptions aren&#39;t as verbose and one reports a 404, where the others just say that an error occurred."},{"owner":{"account_id":3002430,"reputation":878,"user_id":2547661,"accept_rate":71,"display_name":"FateNuller"},"score":0,"creation_date":1438088138,"post_id":31663149,"comment_id":51295773,"body_markdown":"`GET http://localhost:8080/webjars/bootstrap/3.3.5/css/bootstrap.min.css \nlocalhost/:7 GET http://localhost:8080/webjars/bootstrap/3.3.5/js/bootstrap.min.js \nlocalhost/:8 GET http://localhost:8080/webjars/jquery/3.0.0-alpha1/jquery.min.js 404 (Not Found)`","body":"<code>GET http:&#47;&#47;localhost:8080&#47;webjars&#47;bootstrap&#47;3.3.5&#47;css&#47;bootstrap.&zwnj;&#8203;min.css  localhost&#47;:7 GET http:&#47;&#47;localhost:8080&#47;webjars&#47;bootstrap&#47;3.3.5&#47;js&#47;bootstrap.m&zwnj;&#8203;in.js  localhost&#47;:8 GET http:&#47;&#47;localhost:8080&#47;webjars&#47;jquery&#47;3.0.0-alpha1&#47;jquery.min&zwnj;&#8203;.js 404 (Not Found)</code>"},{"owner":{"account_id":3002430,"reputation":878,"user_id":2547661,"accept_rate":71,"display_name":"FateNuller"},"score":0,"creation_date":1438088326,"post_id":31663149,"comment_id":51295930,"body_markdown":"Weird, when I refresh the page I get incorrect errors like those immediately above, but when I navigate to the page in a new tab, then I get 404 errors for every resource I attempt to load.","body":"Weird, when I refresh the page I get incorrect errors like those immediately above, but when I navigate to the page in a new tab, then I get 404 errors for every resource I attempt to load."},{"owner":{"account_id":1143154,"reputation":19805,"user_id":1126526,"accept_rate":90,"display_name":"manish"},"score":0,"creation_date":1438089255,"post_id":31663149,"comment_id":51296619,"body_markdown":"And, I am assuming your context root is `/` (otherwise, that should precede `/webjars`).  Is it possible for you to upload a sample project somewhere (say, Github)?  All of this is certainly unexpected.","body":"And, I am assuming your context root is <code>&#47;</code> (otherwise, that should precede <code>&#47;webjars</code>).  Is it possible for you to upload a sample project somewhere (say, Github)?  All of this is certainly unexpected."},{"owner":{"account_id":3002430,"reputation":878,"user_id":2547661,"accept_rate":71,"display_name":"FateNuller"},"score":0,"creation_date":1438097436,"post_id":31663149,"comment_id":51303340,"body_markdown":"@manish - sure, I just pushed it to github. Thanks for your help, by the way. https://github.com/NateFuller/Beginning-Java-Web-Dev. Is what is currently pushed enough for you to start the project and attempt to replicate? I used a .gitignore so I&#39;m not sure if you require any additional metadata files.","body":"@manish - sure, I just pushed it to github. Thanks for your help, by the way. <a href=\"https://github.com/NateFuller/Beginning-Java-Web-Dev\" rel=\"nofollow noreferrer\">github.com/NateFuller/Beginning-Java-Web-Dev</a>. Is what is currently pushed enough for you to start the project and attempt to replicate? I used a .gitignore so I&#39;m not sure if you require any additional metadata files."},{"owner":{"account_id":1143154,"reputation":19805,"user_id":1126526,"accept_rate":90,"display_name":"manish"},"score":2,"creation_date":1438098771,"post_id":31663149,"comment_id":51304287,"body_markdown":"Ok, I should have paid more attention earlier. Your Maven project structure is incorrect. I have corrected the project structure and submitted a pull request on your project. If you merge the pull request, take the latest code, run `mvn clean tomcat7:run` and hit `http://localhost:8080/webjars/bootstrap/3.3.5/css/bootstrap.css`, you should be all set. I have added Tomcat 7 Maven plugin to the project so that you can test everything without using an external server. Once you are happy, run `mvn clean package` to generate a WAR file that you can deploy on an external server (say, Glassfish).","body":"Ok, I should have paid more attention earlier. Your Maven project structure is incorrect. I have corrected the project structure and submitted a pull request on your project. If you merge the pull request, take the latest code, run <code>mvn clean tomcat7:run</code> and hit <code>http:&#47;&#47;localhost:8080&#47;webjars&#47;bootstrap&#47;3.3.5&#47;css&#47;bootstrap.&zwnj;&#8203;css</code>, you should be all set. I have added Tomcat 7 Maven plugin to the project so that you can test everything without using an external server. Once you are happy, run <code>mvn clean package</code> to generate a WAR file that you can deploy on an external server (say, Glassfish)."}],"owner":{"account_id":3002430,"reputation":878,"user_id":2547661,"accept_rate":71,"display_name":"FateNuller"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3874,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":0,"score":4,"last_activity_date":1635965519,"creation_date":1438030601,"question_id":31663149,"body_markdown":"So I&#39;m beginning Java Web development and I&#39;d just like to have some libraries imported to my IntelliJ project correctly through use of Maven. I&#39;ve stumbled upon making use of Webjars in order to import bootstrap and jquery, but I am having a great deal of trouble getting anything to work correctly. Wondering if someone could help out? Any suggestions are appreciated.\r\n\r\nMy project currently has Maven and Spring MVC as supported frameworks. My pom.xml:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;groupId&lt;/groupId&gt;\r\n        &lt;artifactId&gt;JavaEEHelloWorld&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n                &lt;artifactId&gt;bootstrap&lt;/artifactId&gt;\r\n                &lt;version&gt;LATEST&lt;/version&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;jquery&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jquery&lt;/artifactId&gt;\r\n                &lt;version&gt;LATEST&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nMy spring-config.xml:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n           xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n           xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;\r\n    \r\n    &lt;/beans&gt;\r\n\r\nMy index.jsp:\r\n\r\n    &lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n        &lt;title&gt;Awesome site.&lt;/title&gt;\r\n        &lt;link rel=&quot;stylesheet&quot; href=&quot;/webjars/bootstrap/3.3.5/css/bootstrap.min.css&quot;/&gt;\r\n        &lt;script src=&quot;/webjars/bootstrap/3.3.5/js/bootstrap.min.js&quot;&gt;&lt;/script&gt;\r\n        &lt;script src=&quot;/webjars/jquery/3.0.0-alpha1/jquery.min.js&quot;&gt;&lt;/script&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    Hello World!\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nIf I try adding the following line to my spring-config.xml, I get this error:\r\n[![Cannot resolve][1]][1]\r\n\r\n\r\nMore screenshots:\r\n\r\nMy project explorer which for some reason never created subdirectories for bootstrap or jquery:\r\n[![Project explorer][2]][2]\r\n\r\nThe errors I&#39;m seeing at runtime:\r\n[![Runtime errors][3]][3]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/QWsam.png\r\n  [2]: http://i.stack.imgur.com/xnCix.png\r\n  [3]: http://i.stack.imgur.com/Y73TR.png","title":"IntelliJ IDEA: Webjars / Maven / Spring MVC - How to correctly import dependencies and have them work?","body":"<p>So I'm beginning Java Web development and I'd just like to have some libraries imported to my IntelliJ project correctly through use of Maven. I've stumbled upon making use of Webjars in order to import bootstrap and jquery, but I am having a great deal of trouble getting anything to work correctly. Wondering if someone could help out? Any suggestions are appreciated.</p>\n\n<p>My project currently has Maven and Spring MVC as supported frameworks. My pom.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;groupId&lt;/groupId&gt;\n    &lt;artifactId&gt;JavaEEHelloWorld&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n            &lt;artifactId&gt;bootstrap&lt;/artifactId&gt;\n            &lt;version&gt;LATEST&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n                    &lt;artifactId&gt;jquery&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n            &lt;artifactId&gt;jquery&lt;/artifactId&gt;\n            &lt;version&gt;LATEST&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>My spring-config.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd\"&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>My index.jsp:</p>\n\n<pre><code>&lt;%@ page contentType=\"text/html;charset=UTF-8\" language=\"java\" %&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Awesome site.&lt;/title&gt;\n    &lt;link rel=\"stylesheet\" href=\"/webjars/bootstrap/3.3.5/css/bootstrap.min.css\"/&gt;\n    &lt;script src=\"/webjars/bootstrap/3.3.5/js/bootstrap.min.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"/webjars/jquery/3.0.0-alpha1/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\nHello World!\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>If I try adding the following line to my spring-config.xml, I get this error:\n<a href=\"https://i.stack.imgur.com/QWsam.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QWsam.png\" alt=\"Cannot resolve\"></a></p>\n\n<p>More screenshots:</p>\n\n<p>My project explorer which for some reason never created subdirectories for bootstrap or jquery:\n<a href=\"https://i.stack.imgur.com/xnCix.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xnCix.png\" alt=\"Project explorer\"></a></p>\n\n<p>The errors I'm seeing at runtime:\n<a href=\"https://i.stack.imgur.com/Y73TR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Y73TR.png\" alt=\"Runtime errors\"></a></p>\n"},{"tags":["java","android","ios","flutter","dart"],"answers":[{"tags":[],"owner":{"account_id":9513887,"reputation":111,"user_id":8277033,"display_name":"Soheil Qorbani"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1615889581,"creation_date":1615889581,"answer_id":66653106,"question_id":66653025,"body_markdown":"```\r\ntimer = Timer.periodic(\r\n Duration(days: 1,), \r\n (Timer t) =&gt; {\r\n  //callback\r\n });\r\n```","title":"How to show alert dialog box only once in a day in Flutter?","body":"<pre><code>timer = Timer.periodic(\n Duration(days: 1,), \n (Timer t) =&gt; {\n  //callback\n });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13768271,"reputation":3035,"user_id":9936384,"display_name":"quoci"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1615890190,"creation_date":1615889690,"answer_id":66653128,"question_id":66653025,"body_markdown":"You could store the last access time of the user with [Shared Preferences](https://pub.dev/packages/shared_preferences) and check if the user was using the app today.\r\n```\r\n    SharedPreferences prefs = await SharedPreferences.getInstance();\r\n    prefs.setInt(&#39;lastAccess&#39;, DateTime.now().millisecondsSinceEpoch)\r\n\r\n    // Get last access\r\n    final int lastAccess = prefs.getInt(&#39;lastAccess&#39;);\r\n\r\n    if(lastAccess!=null){\r\n      // Get last access as DateTime\r\n      final DateTime lastAccessTime = DateTime.fromMillisecondsSinceEpoch(lastAccess);\r\n\r\n      // Check if he opened the app\r\n      final opened = lastAccessTime.isAfter(DateTime.now());\r\n\r\n      if(!opened){\r\n        // Show Dialog\r\n      }\r\n    }\r\n```","title":"How to show alert dialog box only once in a day in Flutter?","body":"<p>You could store the last access time of the user with <a href=\"https://pub.dev/packages/shared_preferences\" rel=\"nofollow noreferrer\">Shared Preferences</a> and check if the user was using the app today.</p>\n<pre><code>    SharedPreferences prefs = await SharedPreferences.getInstance();\n    prefs.setInt('lastAccess', DateTime.now().millisecondsSinceEpoch)\n\n    // Get last access\n    final int lastAccess = prefs.getInt('lastAccess');\n\n    if(lastAccess!=null){\n      // Get last access as DateTime\n      final DateTime lastAccessTime = DateTime.fromMillisecondsSinceEpoch(lastAccess);\n\n      // Check if he opened the app\n      final opened = lastAccessTime.isAfter(DateTime.now());\n\n      if(!opened){\n        // Show Dialog\n      }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2234135,"reputation":22159,"user_id":1971013,"accept_rate":71,"display_name":"meaning-matters"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1615889846,"creation_date":1615889846,"answer_id":66653174,"question_id":66653025,"body_markdown":"Instead of using a boolean, you need the last date/time the dialog was shown.\r\n\r\nEvery time a situation occurs in which you may need to show the dialog, you get the current date/time now and compare that with date/time of the last dialog showing.\r\n\r\nBecause you can&#39;t be sure if the app will be killed or now, you also need to store the last date/time the app was shown on disk.","title":"How to show alert dialog box only once in a day in Flutter?","body":"<p>Instead of using a boolean, you need the last date/time the dialog was shown.</p>\n<p>Every time a situation occurs in which you may need to show the dialog, you get the current date/time now and compare that with date/time of the last dialog showing.</p>\n<p>Because you can't be sure if the app will be killed or now, you also need to store the last date/time the app was shown on disk.</p>\n"},{"tags":[],"owner":{"account_id":19393392,"reputation":914,"user_id":14181556,"display_name":"Mr. ZeroOne"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635965498,"creation_date":1635965498,"answer_id":69830277,"question_id":66653025,"body_markdown":"I just wrote the easiest algorithm.\r\n```\r\n\r\n SharedPreferences prefs = await SharedPreferences.getInstance();\r\n    int? lastDay = prefs.getInt(&#39;lastDay&#39;);\r\n    int today = DateTime.now().day;\r\n    if (lastDay == null || lastDay != today) {\r\n      //Show the dialog\r\n      prefs.setInt(&#39;lastDay&#39;, today);\r\n    }\r\n```\r\n","title":"How to show alert dialog box only once in a day in Flutter?","body":"<p>I just wrote the easiest algorithm.</p>\n<pre><code>\n SharedPreferences prefs = await SharedPreferences.getInstance();\n    int? lastDay = prefs.getInt('lastDay');\n    int today = DateTime.now().day;\n    if (lastDay == null || lastDay != today) {\n      //Show the dialog\n      prefs.setInt('lastDay', today);\n    }\n</code></pre>\n"}],"owner":{"account_id":16035659,"reputation":13,"user_id":11573434,"display_name":"Solace Infotech"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1450,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":66653174,"answer_count":4,"score":1,"last_activity_date":1635965498,"creation_date":1615889297,"question_id":66653025,"body_markdown":"I&#39;m working on an app in which I want to add a functionality that shows an alert dialog box ***only once a day*** when the user opens the app. I&#39;m done with the dialog box I used the `boolean variable` if this bool value is `true` then show *dialog* else don&#39;t show the *dialog*. Once the dialog opens on tap of the button I set the `bool value to false`. But my question is how it will set `true` again at the `end of the day?` What should I need to do so the bool value again set to true at the end of the day?","title":"How to show alert dialog box only once in a day in Flutter?","body":"<p>I'm working on an app in which I want to add a functionality that shows an alert dialog box <em><strong>only once a day</strong></em> when the user opens the app. I'm done with the dialog box I used the <code>boolean variable</code> if this bool value is <code>true</code> then show <em>dialog</em> else don't show the <em>dialog</em>. Once the dialog opens on tap of the button I set the <code>bool value to false</code>. But my question is how it will set <code>true</code> again at the <code>end of the day?</code> What should I need to do so the bool value again set to true at the end of the day?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1635959343,"post_id":69828890,"comment_id":123433141,"body_markdown":"If you have a `Scanner`, why not just use `nextInt()`?","body":"If you have a <code>Scanner</code>, why not just use <code>nextInt()</code>?"},{"owner":{"account_id":22842092,"reputation":79,"user_id":16988911,"display_name":"raxnocafi"},"score":0,"creation_date":1635959884,"post_id":69828890,"comment_id":123433365,"body_markdown":"that&#39;s just how the problem is setup, a string of format characters$xxx,characters$xx,characters$xx, will be entered perfectly","body":"that&#39;s just how the problem is setup, a string of format characters$xxx,characters$xx,characters$xx, will be entered perfectly"}],"answers":[{"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1635959290,"creation_date":1635959290,"answer_id":69828984,"question_id":69828890,"body_markdown":"You can use a regular expression with a positive lookbehind to find all consecutive sequences of digits preceded by a `$` symbol. `Matcher#results` can be used to get all of the matches.\r\n\r\n```\r\nString str = &quot;adsdfsh$1234,khjdfd$356,hsgadfsd$98,ghsdsk$4623&quot;;\r\nint[] nums = Pattern.compile(&quot;(?&lt;=\\\\$)\\\\d+&quot;).matcher(str).results()\r\n                    .map(MatchResult::group)\r\n                    .mapToInt(Integer::parseInt).toArray();\r\nSystem.out.println(Arrays.toString(nums));\r\n```","title":"Java, extract integer values within defined characters from long string","body":"<p>You can use a regular expression with a positive lookbehind to find all consecutive sequences of digits preceded by a <code>$</code> symbol. <code>Matcher#results</code> can be used to get all of the matches.</p>\n<pre><code>String str = &quot;adsdfsh$1234,khjdfd$356,hsgadfsd$98,ghsdsk$4623&quot;;\nint[] nums = Pattern.compile(&quot;(?&lt;=\\\\$)\\\\d+&quot;).matcher(str).results()\n                    .map(MatchResult::group)\n                    .mapToInt(Integer::parseInt).toArray();\nSystem.out.println(Arrays.toString(nums));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3068754,"reputation":2677,"user_id":2599899,"display_name":"Arthur Klezovich"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635960105,"creation_date":1635960105,"answer_id":69829152,"question_id":69828890,"body_markdown":"It can done like this \r\n\r\n```\r\nvar digitStarts = new ArrayList&lt;Integer&gt;()\r\nvar digitsEnds = new ArrayList&lt;Integer&gt;()\r\n\r\n// Get the start and end of each digit\r\nfor (int i=0; i&lt;input.length();i++){\r\n   if(input[i] == &#39;$&#39; ) digitsStarts.add(i)\r\n   if(input[i] == &#39;,&#39;) digitEnds.add(i)\r\n}\r\n\r\n// Get the digits as strings\r\nvar digitStrings = new ArrayList&lt;String&gt;()\r\nfor(int i=0;i&lt;digitsStart.length; i++ ) {\r\n    digitsString.add(input.substring(digitsStarts[i]+1,digitEnds[i]))\r\n}\r\n\r\n// Convert to Int\r\nvar digits = new ArrayList&lt;Int&gt;\r\nfor(int i=0;i&lt;digitString;i++) {\r\n  digits.add(Integer.valueOf(digitStrings[i]))\r\n}\r\n\r\n\r\n```","title":"Java, extract integer values within defined characters from long string","body":"<p>It can done like this</p>\n<pre><code>var digitStarts = new ArrayList&lt;Integer&gt;()\nvar digitsEnds = new ArrayList&lt;Integer&gt;()\n\n// Get the start and end of each digit\nfor (int i=0; i&lt;input.length();i++){\n   if(input[i] == '$' ) digitsStarts.add(i)\n   if(input[i] == ',') digitEnds.add(i)\n}\n\n// Get the digits as strings\nvar digitStrings = new ArrayList&lt;String&gt;()\nfor(int i=0;i&lt;digitsStart.length; i++ ) {\n    digitsString.add(input.substring(digitsStarts[i]+1,digitEnds[i]))\n}\n\n// Convert to Int\nvar digits = new ArrayList&lt;Int&gt;\nfor(int i=0;i&lt;digitString;i++) {\n  digits.add(Integer.valueOf(digitStrings[i]))\n}\n\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15974771,"reputation":1023,"user_id":11527968,"display_name":"Jimmy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635965222,"creation_date":1635965222,"answer_id":69830227,"question_id":69828890,"body_markdown":"**In a very simple way:**\r\n\r\n         public static void main(String[] args) {\r\n    \r\n    \t\tString str = &quot;adsdfsh$1234,khjdfd$356,hsgadfsd$98,ghsdsk$4623&quot;;\r\n    \t\t\r\n    \t\tString strArray[] = str.split(&quot;,&quot;);\r\n    \t\t\r\n    \t\tint numbers[] = new int[strArray.length];\r\n    \t\tint j = 0;\r\n    \t\tfor(String s : strArray) {\r\n    \t\t\tnumbers[j++] = Integer.parseInt(s.substring(s.indexOf(&#39;$&#39;)+1)); \r\n    \t\t}\r\n    \t\tfor(j=0;j&lt;numbers.length;j++)\r\n     \t\t    System.out.print(numbers[j]+&quot;  &quot;);\r\n    \t}\r\n\r\n**OUTPUT:** `1234  356  98  4623` ","title":"Java, extract integer values within defined characters from long string","body":"<p><strong>In a very simple way:</strong></p>\n<pre><code>     public static void main(String[] args) {\n\n        String str = &quot;adsdfsh$1234,khjdfd$356,hsgadfsd$98,ghsdsk$4623&quot;;\n        \n        String strArray[] = str.split(&quot;,&quot;);\n        \n        int numbers[] = new int[strArray.length];\n        int j = 0;\n        for(String s : strArray) {\n            numbers[j++] = Integer.parseInt(s.substring(s.indexOf('$')+1)); \n        }\n        for(j=0;j&lt;numbers.length;j++)\n            System.out.print(numbers[j]+&quot;  &quot;);\n    }\n</code></pre>\n<p><strong>OUTPUT:</strong> <code>1234  356  98  4623</code></p>\n"}],"owner":{"account_id":22842092,"reputation":79,"user_id":16988911,"display_name":"raxnocafi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69828984,"answer_count":3,"score":1,"last_activity_date":1635965222,"creation_date":1635958940,"question_id":69828890,"body_markdown":"I have a program where I receive a long string in the format \r\n\r\ncharacters$xxx,characters$xx,characters$xx, (....)\r\n\r\nx is some digit of some integer with an arbitrary number of digits. The integer values are always contained within $ and ,.\r\n\r\nI need to extract the integers into an integer array then print that array. The second part is easy, but how to extract those integers?\r\n\r\nan example string: adsdfsh$1234,khjdfd$356,hsgadfsd$98,ghsdsk$4623,\r\nthe arraay should  contain 1234, 356, 98, 4623\r\n\r\nbelow is my basic logic\r\n\r\n        import java.util.Scanner;\r\n    \r\n    class RandomStuff {\r\n        \r\n        \r\n        public static void main (String[]args){\r\n           \r\n         Scanner keyboard = new Scanner(System.in);\r\n     \r\n         String input = keyboard.next();\r\n         int count =0;\r\n         // counts number of $, because $ will always preceed an int in my string\r\n         \r\n         for(int i=0;i&lt;input.length();i++ ){\r\n             if (input.charAt(i)==&#39;$&#39;)\r\n                 count++;}\r\n         /* also I&#39;m traversing the string twice here so my complexity is at least \r\n         o(2n) if someone knows how to reduce that, please tell me*/\r\n    \r\n         int [] intlist = new int[count];\r\n         \r\n         // fill the array\r\n         int arrayindex =0;\r\n         for (int i=0; i&lt;input.length();i++){\r\n             \r\n         if (input.charAt(i)==&#39;$&#39;){\r\n             /*insert all following characters as a single integer in intlist[arrayindex]\r\n         until we hit the character &#39;,&#39;*/}\r\n         \r\n          if (input.charAt(i)==&#39;,&#39;){\r\n          arrayindex++;\r\n          /*stop recording characters*/}\r\n             \r\n         }\r\n         \r\n         // i can print an array so I&#39;ll just omit the rest    \r\n    keyboard.close();\r\n    }\r\n\r\n","title":"Java, extract integer values within defined characters from long string","body":"<p>I have a program where I receive a long string in the format</p>\n<p>characters$xxx,characters$xx,characters$xx, (....)</p>\n<p>x is some digit of some integer with an arbitrary number of digits. The integer values are always contained within $ and ,.</p>\n<p>I need to extract the integers into an integer array then print that array. The second part is easy, but how to extract those integers?</p>\n<p>an example string: adsdfsh$1234,khjdfd$356,hsgadfsd$98,ghsdsk$4623,\nthe arraay should  contain 1234, 356, 98, 4623</p>\n<p>below is my basic logic</p>\n<pre><code>    import java.util.Scanner;\n\nclass RandomStuff {\n    \n    \n    public static void main (String[]args){\n       \n     Scanner keyboard = new Scanner(System.in);\n \n     String input = keyboard.next();\n     int count =0;\n     // counts number of $, because $ will always preceed an int in my string\n     \n     for(int i=0;i&lt;input.length();i++ ){\n         if (input.charAt(i)=='$')\n             count++;}\n     /* also I'm traversing the string twice here so my complexity is at least \n     o(2n) if someone knows how to reduce that, please tell me*/\n\n     int [] intlist = new int[count];\n     \n     // fill the array\n     int arrayindex =0;\n     for (int i=0; i&lt;input.length();i++){\n         \n     if (input.charAt(i)=='$'){\n         /*insert all following characters as a single integer in intlist[arrayindex]\n     until we hit the character ','*/}\n     \n      if (input.charAt(i)==','){\n      arrayindex++;\n      /*stop recording characters*/}\n         \n     }\n     \n     // i can print an array so I'll just omit the rest    \nkeyboard.close();\n}\n</code></pre>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":20382503,"reputation":244,"user_id":14952296,"display_name":"stephane brun"},"score":2,"creation_date":1635951896,"post_id":69827029,"comment_id":123429736,"body_markdown":"Have a look to : https://www.baeldung.com/javax-validation","body":"Have a look to : <a href=\"https://www.baeldung.com/javax-validation\" rel=\"nofollow noreferrer\">baeldung.com/javax-validation</a>"},{"owner":{"account_id":20382503,"reputation":244,"user_id":14952296,"display_name":"stephane brun"},"score":0,"creation_date":1635951940,"post_id":69827029,"comment_id":123429756,"body_markdown":"You can use `ObjectUtils` from `org.apache.commons.lang3`\n\n    ObjectUtils.allNotNull(productId, productName, productType, productRating, productSellDate, productReturnDate);","body":"You can use <code>ObjectUtils</code> from <code>org.apache.commons.lang3</code>      ObjectUtils.allNotNull(productId, productName, productType, productRating, productSellDate, productReturnDate);"},{"owner":{"account_id":20382503,"reputation":244,"user_id":14952296,"display_name":"stephane brun"},"score":0,"creation_date":1635952690,"post_id":69827029,"comment_id":123430091,"body_markdown":"with javax-validation yes, but indirectly. You have to specify the message yourself exemple : `@NotNull(message = &quot;propertyX is null&quot;)`","body":"with javax-validation yes, but indirectly. You have to specify the message yourself exemple : <code>@NotNull(message = &quot;propertyX is null&quot;)</code>"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1635952841,"post_id":69827029,"comment_id":123430167,"body_markdown":"Try overloading method `validate` and add a second method parameter which is the name of the thing that you are validating, i.e. `validate(String name, String value)` and `validate(String name, Date value)`","body":"Try overloading method <code>validate</code> and add a second method parameter which is the name of the thing that you are validating, i.e. <code>validate(String name, String value)</code> and <code>validate(String name, Date value)</code>"},{"owner":{"account_id":20382503,"reputation":244,"user_id":14952296,"display_name":"stephane brun"},"score":0,"creation_date":1635952918,"post_id":69827029,"comment_id":123430208,"body_markdown":"@user16320675 yes sorry, ObjectUtils does not match your need, follow this tutorial  https://www.baeldung.com/javax-validation","body":"@user16320675 yes sorry, ObjectUtils does not match your need, follow this tutorial  <a href=\"https://www.baeldung.com/javax-validation\" rel=\"nofollow noreferrer\">baeldung.com/javax-validation</a>"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1635952921,"post_id":69827029,"comment_id":123430210,"body_markdown":"As an aside I recommend you don’t use `Date`. That class is poorly designed and long outdated. Instead use `LocalDate` from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/).","body":"As an aside I recommend you don’t use <code>Date</code>. That class is poorly designed and long outdated. Instead use <code>LocalDate</code> from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>."}],"answers":[{"tags":[],"owner":{"account_id":9748857,"reputation":4106,"user_id":7227834,"display_name":"AmrDeveloper"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1635952082,"creation_date":1635952082,"answer_id":69827246,"question_id":69827029,"body_markdown":"You can write it like this to take any number of input and throw if any one fo them are null or blank or empty\r\n\r\n```java\r\nprivate static String validate(String... strings) {\r\n    for (String s : strings) {\r\n        if (s == null || s.isBlank() || s.isEmpty()) {\r\n            throw new NullPointerException(&quot;input param is empty&quot;);\r\n        }\r\n    }\r\n    return &quot;valid&quot;;\r\n}\r\n```\r\n\r\nand you can call it with any number of inputs\r\n\r\n```java\r\nvalidate(&quot;1&quot;, &quot;2&quot;, null, &quot;&quot;);\r\n```","title":"how to check multiple string value are empty or blank at one shot using java","body":"<p>You can write it like this to take any number of input and throw if any one fo them are null or blank or empty</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static String validate(String... strings) {\n    for (String s : strings) {\n        if (s == null || s.isBlank() || s.isEmpty()) {\n            throw new NullPointerException(&quot;input param is empty&quot;);\n        }\n    }\n    return &quot;valid&quot;;\n}\n</code></pre>\n<p>and you can call it with any number of inputs</p>\n<pre class=\"lang-java prettyprint-override\"><code>validate(&quot;1&quot;, &quot;2&quot;, null, &quot;&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635964922,"creation_date":1635964922,"answer_id":69830160,"question_id":69827029,"body_markdown":"You may consider it just a minor improvement over the solution that you have got. It certainly isn’t a one-shot validation of all the variables. My idea is to do validation and assignment of each in the same line. For example:\r\n\r\n        String productId = validate(&quot;&quot;, &quot;productId&quot;);\r\n        String productName = validate(&quot;Apple&quot;, &quot;productName&quot;);\r\n\r\nResult:\r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.NullPointerException: productId\r\n\r\nThe message mentions that the `productId` is blank/empty.\r\n\r\nThis obviously requires `validate()` to return the validated object in the case where it doesn’t throw.\r\n\r\n\tprivate static String validate(String s, String message) {\r\n        if (s == null || s.isBlank()) {\r\n            throw new NullPointerException(message);\r\n        } else {\r\n            return s;\r\n        }\r\n    }\r\n\r\nWe don’t need `isEmpty()` as an explicit condition since `isBlank()` also returns true for the completely empty string. Whether you want to check for `null`, you know best yourself.\r\n\r\nFor non-String variables simply use the built-in `Objects.requireNonNull()`:\r\n\r\n        LocalDate productSellDate = Objects.requireNonNull(\r\n        \t\tLocalDate.now(ZoneId.systemDefault()), &quot;productSellDate&quot;);\r\n        LocalDate productReturnDate = Objects.requireNonNull(\r\n        \t\tLocalDate.now(ZoneId.systemDefault()), &quot;productReturnDate&quot;);\r\n\r\n`LocalDate` is a class from java.time, the modern Java date and time API that I recommend for all of your date work. A `LocalDate` is a date without time of day. If you need the time too, find some other class from the same API.","title":"how to check multiple string value are empty or blank at one shot using java","body":"<p>You may consider it just a minor improvement over the solution that you have got. It certainly isn’t a one-shot validation of all the variables. My idea is to do validation and assignment of each in the same line. For example:</p>\n<pre><code>    String productId = validate(&quot;&quot;, &quot;productId&quot;);\n    String productName = validate(&quot;Apple&quot;, &quot;productName&quot;);\n</code></pre>\n<p>Result:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.NullPointerException: productId</p>\n</blockquote>\n<p>The message mentions that the <code>productId</code> is blank/empty.</p>\n<p>This obviously requires <code>validate()</code> to return the validated object in the case where it doesn’t throw.</p>\n<pre><code>private static String validate(String s, String message) {\n    if (s == null || s.isBlank()) {\n        throw new NullPointerException(message);\n    } else {\n        return s;\n    }\n}\n</code></pre>\n<p>We don’t need <code>isEmpty()</code> as an explicit condition since <code>isBlank()</code> also returns true for the completely empty string. Whether you want to check for <code>null</code>, you know best yourself.</p>\n<p>For non-String variables simply use the built-in <code>Objects.requireNonNull()</code>:</p>\n<pre><code>    LocalDate productSellDate = Objects.requireNonNull(\n            LocalDate.now(ZoneId.systemDefault()), &quot;productSellDate&quot;);\n    LocalDate productReturnDate = Objects.requireNonNull(\n            LocalDate.now(ZoneId.systemDefault()), &quot;productReturnDate&quot;);\n</code></pre>\n<p><code>LocalDate</code> is a class from java.time, the modern Java date and time API that I recommend for all of your date work. A <code>LocalDate</code> is a date without time of day. If you need the time too, find some other class from the same API.</p>\n"}],"owner":{"account_id":21988193,"reputation":203,"user_id":16262109,"display_name":"Dave Brady"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2598,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1635964922,"creation_date":1635951262,"question_id":69827029,"body_markdown":"I&#39;ve scenario to validate given input param is empty or not, I&#39;ve list of fields with datatype **string** and **date** - `productId,productName,productType,productRating,productSellDate and productReturnDate`\r\n\r\nI want to check these input params are `null` or `empty` or `blank` for each field and if any one of the field is `empty` or `blank` or `null` - it should throw `NullPointerException` with field name.\r\n\r\nPlease find my code below - since I&#39;m new to Java please apologize for the coding standard. I don&#39;t know how to get the field name which has `empty` or `null` when I throw `NullPointerException`\r\n\r\nAnd I&#39;m calling `validate` and `validateDate` for each string, is there any option to validate all these param in one go?\r\n\r\nPlease suggest if there is any better way of writing the below piece of code. Appreciated your help in advance! Thanks.\r\n\r\n\r\n    import java.util.Date;\r\n    \r\n    public class Test {\r\n    \r\n        public static void main(String[] args) {\r\n            String productId = &quot;&quot;;\r\n            String productName = &quot;Apple&quot;;\r\n            String productType = &quot;Electronics&quot;;\r\n            String productRating = &quot;Good&quot;;\r\n            Date productSellDate = new Date();\r\n            Date productReturnDate = new Date();\r\n    \r\n            System.out.println(validate(productId));\r\n            System.out.println(validate(productName));\r\n            System.out.println(validate(productType));\r\n            System.out.println(validate(productRating));\r\n    \r\n            System.out.println(validateDate(productSellDate));\r\n            System.out.println(validateDate(productReturnDate));\r\n    \r\n        }\r\n    \r\n    \r\n        private static String validate(String s) {\r\n            if (s.isBlank() || s.isEmpty()) {\r\n                throw new NullPointerException(&quot;input param is empty&quot;); // how to get the string field name which is empty or null or blank\r\n            } else {\r\n                return &quot;valid&quot;;\r\n            }\r\n        }\r\n    \r\n    \r\n        private static String validateDate(Date d) {\r\n            if (d == null) {\r\n                throw new NullPointerException(&quot;sell or return date is empty&quot;); // how to get the date field name which is empty or null or blank\r\n            } else {\r\n                return &quot;date is valid&quot;;\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"how to check multiple string value are empty or blank at one shot using java","body":"<p>I've scenario to validate given input param is empty or not, I've list of fields with datatype <strong>string</strong> and <strong>date</strong> - <code>productId,productName,productType,productRating,productSellDate and productReturnDate</code></p>\n<p>I want to check these input params are <code>null</code> or <code>empty</code> or <code>blank</code> for each field and if any one of the field is <code>empty</code> or <code>blank</code> or <code>null</code> - it should throw <code>NullPointerException</code> with field name.</p>\n<p>Please find my code below - since I'm new to Java please apologize for the coding standard. I don't know how to get the field name which has <code>empty</code> or <code>null</code> when I throw <code>NullPointerException</code></p>\n<p>And I'm calling <code>validate</code> and <code>validateDate</code> for each string, is there any option to validate all these param in one go?</p>\n<p>Please suggest if there is any better way of writing the below piece of code. Appreciated your help in advance! Thanks.</p>\n<pre><code>import java.util.Date;\n\npublic class Test {\n\n    public static void main(String[] args) {\n        String productId = &quot;&quot;;\n        String productName = &quot;Apple&quot;;\n        String productType = &quot;Electronics&quot;;\n        String productRating = &quot;Good&quot;;\n        Date productSellDate = new Date();\n        Date productReturnDate = new Date();\n\n        System.out.println(validate(productId));\n        System.out.println(validate(productName));\n        System.out.println(validate(productType));\n        System.out.println(validate(productRating));\n\n        System.out.println(validateDate(productSellDate));\n        System.out.println(validateDate(productReturnDate));\n\n    }\n\n\n    private static String validate(String s) {\n        if (s.isBlank() || s.isEmpty()) {\n            throw new NullPointerException(&quot;input param is empty&quot;); // how to get the string field name which is empty or null or blank\n        } else {\n            return &quot;valid&quot;;\n        }\n    }\n\n\n    private static String validateDate(Date d) {\n        if (d == null) {\n            throw new NullPointerException(&quot;sell or return date is empty&quot;); // how to get the date field name which is empty or null or blank\n        } else {\n            return &quot;date is valid&quot;;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","hashmap"],"comments":[{"owner":{"display_name":"user6073886"},"score":1,"creation_date":1635958990,"post_id":69828864,"comment_id":123432999,"body_markdown":"A &quot;simple way o get both keys and values together&quot; would get the `entrySet()` method of the map interface.","body":"A &quot;simple way o get both keys and values together&quot; would get the <code>entrySet()</code> method of the map interface."}],"answers":[{"tags":[],"owner":{"account_id":3068754,"reputation":2677,"user_id":2599899,"display_name":"Arthur Klezovich"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635960889,"creation_date":1635960889,"answer_id":69829322,"question_id":69828864,"body_markdown":"&gt; But I could not found a simple way to get both keys and values together\r\n\r\nYes, you can get keys and values together from a map using the [entrySet()][1] method.\r\n\r\nAnd then you can use it like this \r\n\r\n```\r\nfor (var entry : map.entrySet()) {\r\n    System.out.println(entry.getKey() + &quot;/&quot; + entry.getValue());\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#entrySet--","title":"Finding which keys and values to add/remove from hashmap1 to be equal to hashmap2","body":"<blockquote>\n<p>But I could not found a simple way to get both keys and values together</p>\n</blockquote>\n<p>Yes, you can get keys and values together from a map using the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#entrySet--\" rel=\"nofollow noreferrer\">entrySet()</a> method.</p>\n<p>And then you can use it like this</p>\n<pre><code>for (var entry : map.entrySet()) {\n    System.out.println(entry.getKey() + &quot;/&quot; + entry.getValue());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635961691,"creation_date":1635961691,"answer_id":69829506,"question_id":69828864,"body_markdown":"One way to do this is to first flatten the `Map&lt;String, List&lt;String&gt;&gt;` into lots of &lt;string, string&gt; pairs. Then operate on that. And finally combine the results back to a `Map&lt;String, List&lt;String&gt;&gt;`.\r\n\r\nSo first, you will need to write helper methods that do the flattening and combining:\r\n\r\n```\r\nprivate static Set&lt;Entry&lt;String, String&gt;&gt; flatten(Map&lt;String, List&lt;String&gt;&gt; map) {\r\n    return map.entrySet().stream().flatMap(e -&gt;\r\n          e.getValue().stream().map(v -&gt; Map.entry(e.getKey(), v))\r\n        )\r\n        .collect(Collectors.toSet());\r\n}\r\n\r\nprivate static Map&lt;String, List&lt;String&gt;&gt; group(Set&lt;Map.Entry&lt;String, String&gt;&gt; entries) {\r\n    return entries.stream().collect(Collectors.groupingBy(\r\n        Map.Entry::getKey, Collectors.mapping(Map.Entry::getValue, Collectors.toList())\r\n    ));\r\n}\r\n```\r\n\r\nThen it is very straightforward:\r\n\r\n    var mobileEntries = flatten(dictMobile);\r\n    var opEntries = flatten(dictOP);\r\n    var add = new HashSet&lt;&gt;(opEntries);\r\n    add.removeAll(mobileEntries);\r\n    var remove = new HashSet&lt;&gt;(mobileEntries);\r\n    remove.removeAll(opEntries);\r\n    System.out.println(group(add));\r\n    System.out.println(group(remove));\r\n\r\nThis prints:\r\n\r\n```\r\n{obj3Op=[Germany], obj2=[China]}\r\n{obj1=[Chile], obj3Mobile=[Russia]}\r\n```","title":"Finding which keys and values to add/remove from hashmap1 to be equal to hashmap2","body":"<p>One way to do this is to first flatten the <code>Map&lt;String, List&lt;String&gt;&gt;</code> into lots of &lt;string, string&gt; pairs. Then operate on that. And finally combine the results back to a <code>Map&lt;String, List&lt;String&gt;&gt;</code>.</p>\n<p>So first, you will need to write helper methods that do the flattening and combining:</p>\n<pre><code>private static Set&lt;Entry&lt;String, String&gt;&gt; flatten(Map&lt;String, List&lt;String&gt;&gt; map) {\n    return map.entrySet().stream().flatMap(e -&gt;\n          e.getValue().stream().map(v -&gt; Map.entry(e.getKey(), v))\n        )\n        .collect(Collectors.toSet());\n}\n\nprivate static Map&lt;String, List&lt;String&gt;&gt; group(Set&lt;Map.Entry&lt;String, String&gt;&gt; entries) {\n    return entries.stream().collect(Collectors.groupingBy(\n        Map.Entry::getKey, Collectors.mapping(Map.Entry::getValue, Collectors.toList())\n    ));\n}\n</code></pre>\n<p>Then it is very straightforward:</p>\n<pre><code>var mobileEntries = flatten(dictMobile);\nvar opEntries = flatten(dictOP);\nvar add = new HashSet&lt;&gt;(opEntries);\nadd.removeAll(mobileEntries);\nvar remove = new HashSet&lt;&gt;(mobileEntries);\nremove.removeAll(opEntries);\nSystem.out.println(group(add));\nSystem.out.println(group(remove));\n</code></pre>\n<p>This prints:</p>\n<pre><code>{obj3Op=[Germany], obj2=[China]}\n{obj1=[Chile], obj3Mobile=[Russia]}\n</code></pre>\n"}],"owner":{"account_id":16645896,"reputation":512,"user_id":12832931,"display_name":"William "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69829506,"answer_count":2,"score":0,"last_activity_date":1635963607,"creation_date":1635958822,"question_id":69828864,"body_markdown":"Supposing I have the following situation:\r\n\r\nI want to find which keys and values to add/remove from hashmap1 in order hashmap1 and hashmap2 have the same values.\r\n\r\n    hashmap1: {obj2=[Brazil], obj1=[Argentina, Chile, Brazil], obj3Mobile=[Russia]}\r\n    \r\n    hashmap2: {obj3Op=[Germany], obj2=[Brazil, China], obj1=[Argentina, Brazil]}\r\n\r\n\r\nMy expected output is:\r\n\r\n    add:  {obj2=[China], obj3Op=[Germany]}\r\n    \r\n    remove: {obj3Mobile=[Russia], obj1=[Chile]}\r\n\r\n\r\nIn order to reproduce the dataset:\r\n\r\n    import java.util.HashMap;\r\n    import java.util.HashSet;\r\n    import java.util.Map;\r\n    import java.util.List;\r\n    import java.util.ArrayList;\r\n    \r\n    public class Main\r\n    {\r\n        public static void main(String[] args) {\r\n            Map&lt;String, List&lt;String&gt;&gt; dictOP = new HashMap&lt;String, List&lt;String&gt;&gt;();\r\n            Map&lt;String, List&lt;String&gt;&gt; dictMobile = new HashMap&lt;String, List&lt;String&gt;&gt;();\r\n            \r\n            List&lt;String&gt; obj1Mobile = new ArrayList&lt;String&gt;();\r\n            List&lt;String&gt; obj2Mobile = new ArrayList&lt;String&gt;();\r\n            List&lt;String&gt; obj3Mobile = new ArrayList&lt;String&gt;();\r\n            \r\n            List&lt;String&gt; obj1Op = new ArrayList&lt;String&gt;();\r\n            List&lt;String&gt; obj2Op = new ArrayList&lt;String&gt;();\r\n            List&lt;String&gt; obj3Op = new ArrayList&lt;String&gt;();\r\n            \r\n            \r\n            obj1Mobile.add(&quot;Argentina&quot;);\r\n            obj1Mobile.add(&quot;Chile&quot;);\r\n            obj1Mobile.add(&quot;Brazil&quot;);\r\n            obj2Mobile.add(&quot;Brazil&quot;);\r\n            obj3Mobile.add(&quot;Russia&quot;);\r\n            \r\n            \r\n            obj1Op.add(&quot;Argentina&quot;);\r\n            obj1Op.add(&quot;Brazil&quot;);\r\n            obj2Op.add(&quot;Brazil&quot;);\r\n            obj2Op.add(&quot;China&quot;);\r\n            obj3Op.add(&quot;Germany&quot;);\r\n            \r\n            dictOP.put(&quot;obj1&quot;, obj1Op);\r\n            dictOP.put(&quot;obj2&quot;, obj2Op);\r\n            dictOP.put(&quot;obj3Op&quot;, obj3Op);\r\n            \r\n            dictMobile.put(&quot;obj1&quot;, obj1Mobile);\r\n            dictMobile.put(&quot;obj2&quot;, obj2Mobile);\r\n            dictMobile.put(&quot;obj3Mobile&quot;, obj3Mobile);\r\n            \r\n            System.out.println(dictMobile);\r\n            System.out.println(dictOP);\r\n            \r\n    \r\n        }\r\n    }\r\n\r\n\r\n\r\nUsing this approach below, I could only find which keys to add and remove. \r\n\r\n         \r\n        //Union of keys from both maps\r\n        HashSet&lt;String&gt; removeKey = new HashSet&lt;&gt;(dictMobile.keySet());\r\n        removeKey.addAll(dictOP.keySet());\r\n        removeKey.removeAll(dictMobile.keySet());\r\n         \r\n        HashSet&lt;String&gt; addKey = new HashSet&lt;&gt;(dictOP.keySet());\r\n        addKey.addAll(dictMobile.keySet());\r\n        addKey.removeAll(dictOP.keySet());\r\n        \r\n        System.out.println(removeKey);\r\n        System.out.println(addKey);\r\n\r\nBut I could not found a simple way to get both keys and values together ","title":"Finding which keys and values to add/remove from hashmap1 to be equal to hashmap2","body":"<p>Supposing I have the following situation:</p>\n<p>I want to find which keys and values to add/remove from hashmap1 in order hashmap1 and hashmap2 have the same values.</p>\n<pre><code>hashmap1: {obj2=[Brazil], obj1=[Argentina, Chile, Brazil], obj3Mobile=[Russia]}\n\nhashmap2: {obj3Op=[Germany], obj2=[Brazil, China], obj1=[Argentina, Brazil]}\n</code></pre>\n<p>My expected output is:</p>\n<pre><code>add:  {obj2=[China], obj3Op=[Germany]}\n\nremove: {obj3Mobile=[Russia], obj1=[Chile]}\n</code></pre>\n<p>In order to reproduce the dataset:</p>\n<pre><code>import java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.Map;\nimport java.util.List;\nimport java.util.ArrayList;\n\npublic class Main\n{\n    public static void main(String[] args) {\n        Map&lt;String, List&lt;String&gt;&gt; dictOP = new HashMap&lt;String, List&lt;String&gt;&gt;();\n        Map&lt;String, List&lt;String&gt;&gt; dictMobile = new HashMap&lt;String, List&lt;String&gt;&gt;();\n        \n        List&lt;String&gt; obj1Mobile = new ArrayList&lt;String&gt;();\n        List&lt;String&gt; obj2Mobile = new ArrayList&lt;String&gt;();\n        List&lt;String&gt; obj3Mobile = new ArrayList&lt;String&gt;();\n        \n        List&lt;String&gt; obj1Op = new ArrayList&lt;String&gt;();\n        List&lt;String&gt; obj2Op = new ArrayList&lt;String&gt;();\n        List&lt;String&gt; obj3Op = new ArrayList&lt;String&gt;();\n        \n        \n        obj1Mobile.add(&quot;Argentina&quot;);\n        obj1Mobile.add(&quot;Chile&quot;);\n        obj1Mobile.add(&quot;Brazil&quot;);\n        obj2Mobile.add(&quot;Brazil&quot;);\n        obj3Mobile.add(&quot;Russia&quot;);\n        \n        \n        obj1Op.add(&quot;Argentina&quot;);\n        obj1Op.add(&quot;Brazil&quot;);\n        obj2Op.add(&quot;Brazil&quot;);\n        obj2Op.add(&quot;China&quot;);\n        obj3Op.add(&quot;Germany&quot;);\n        \n        dictOP.put(&quot;obj1&quot;, obj1Op);\n        dictOP.put(&quot;obj2&quot;, obj2Op);\n        dictOP.put(&quot;obj3Op&quot;, obj3Op);\n        \n        dictMobile.put(&quot;obj1&quot;, obj1Mobile);\n        dictMobile.put(&quot;obj2&quot;, obj2Mobile);\n        dictMobile.put(&quot;obj3Mobile&quot;, obj3Mobile);\n        \n        System.out.println(dictMobile);\n        System.out.println(dictOP);\n        \n\n    }\n}\n</code></pre>\n<p>Using this approach below, I could only find which keys to add and remove.</p>\n<pre><code>    //Union of keys from both maps\n    HashSet&lt;String&gt; removeKey = new HashSet&lt;&gt;(dictMobile.keySet());\n    removeKey.addAll(dictOP.keySet());\n    removeKey.removeAll(dictMobile.keySet());\n     \n    HashSet&lt;String&gt; addKey = new HashSet&lt;&gt;(dictOP.keySet());\n    addKey.addAll(dictMobile.keySet());\n    addKey.removeAll(dictOP.keySet());\n    \n    System.out.println(removeKey);\n    System.out.println(addKey);\n</code></pre>\n<p>But I could not found a simple way to get both keys and values together</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1635736971,"post_id":69792302,"comment_id":123366185,"body_markdown":"In what way does it &quot;not work&quot;? What does your `main` method look like?","body":"In what way does it &quot;not work&quot;? What does your <code>main</code> method look like?"},{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":1,"creation_date":1635737182,"post_id":69792302,"comment_id":123366215,"body_markdown":"If this is not just an exercise done to learn techniques, then it makes no sense to use different threads for this. Having to synchronize after each statement simply means threads are introducing a problem (and an unnecessary one).","body":"If this is not just an exercise done to learn techniques, then it makes no sense to use different threads for this. Having to synchronize after each statement simply means threads are introducing a problem (and an unnecessary one)."},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1635737524,"post_id":69792302,"comment_id":123366250,"body_markdown":"You need to know if any other other threads has finished, if they there is only one thread left, then you don&#39;t need to wait","body":"You need to know if any other other threads has finished, if they there is only one thread left, then you don&#39;t need to wait"},{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1635740232,"post_id":69792302,"comment_id":123366583,"body_markdown":"Note that while the answer posted explains how to do this &quot;manually&quot;, in real code that needed something like this you&#39;d use `CyclicBarrier`.","body":"Note that while the answer posted explains how to do this &quot;manually&quot;, in real code that needed something like this you&#39;d use <code>CyclicBarrier</code>."}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635737899,"creation_date":1635737899,"answer_id":69792395,"question_id":69792302,"body_markdown":"This is a little, basic.  I&#39;m not a fan of `static` in this context, but for a demonstration, it should help prove the point\r\n\r\nEssentially, you need a &quot;counter&quot; which can keep track of the number of &quot;active&quot; threads, if there is only one, you don&#39;t need to &quot;wait&quot;, for example...\r\n\r\n    import java.io.IOException;\r\n    import java.util.Random;\r\n    import java.util.concurrent.atomic.AtomicInteger;\r\n    import java.util.zip.DataFormatException;\r\n\r\n    public class Main {\r\n\r\n        public static void main(String[] args) throws IOException, DataFormatException {\r\n            new Thread(new Test(), &quot;One&quot;).start();\r\n            new Thread(new Test(), &quot;Two&quot;).start();\r\n        }\r\n\r\n        public static class Test implements Runnable {\r\n\r\n            public static Object sync = new Object();\r\n            public static AtomicInteger counter = new AtomicInteger(0);\r\n\r\n            public void run() {\r\n\r\n                counter.incrementAndGet();\r\n\r\n                Random rand = new Random();\r\n                // generate random number 1-20;\r\n                int random = rand.nextInt((20 - 1) + 1) + 1;\r\n                String name = Thread.currentThread().getName();\r\n                System.out.println(name + &quot; count to &quot; + random);\r\n                for (int i = 0; i &lt; random; i++) {\r\n\r\n                    synchronized (sync) {\r\n                        try {\r\n                            sync.notify();\r\n                            System.out.println(name + &quot; &quot; + i);\r\n                            int count = counter.get();\r\n                            if (count &gt; 1) {\r\n                                sync.wait();\r\n                            }\r\n                        } catch (Exception e) {\r\n                            e.printStackTrace();\r\n                        }\r\n\r\n                    }\r\n                }\r\n\r\n                counter.decrementAndGet();\r\n                synchronized (sync) {\r\n                    sync.notify();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nAnd, because I don&#39;t like to abuse `static` (`sync` in this context could be argued, but as demonstration of the basic concept)\r\n\r\n\r\n    import java.io.IOException;\r\n    import java.util.Random;\r\n    import java.util.concurrent.atomic.AtomicInteger;\r\n    import java.util.zip.DataFormatException;\r\n\r\n    public class Main {\r\n\r\n        public static void main(String[] args) throws IOException, DataFormatException {\r\n            Object lock = new Object();\r\n            AtomicInteger counter = new AtomicInteger(0);\r\n\r\n            new Thread(new Test(lock, counter), &quot;One&quot;).start();\r\n            new Thread(new Test(lock, counter), &quot;Two&quot;).start();\r\n        }\r\n\r\n        public static class Test implements Runnable {\r\n\r\n            private Object lock;\r\n            private AtomicInteger counter;\r\n\r\n            public Test(Object lock, AtomicInteger counter) {\r\n                this.lock = lock;\r\n                this.counter = counter;\r\n            }\r\n\r\n            public void run() {\r\n\r\n                counter.incrementAndGet();\r\n\r\n                Random rand = new Random();\r\n                // generate random number 1-20;\r\n                int random = rand.nextInt((20 - 1) + 1) + 1;\r\n                String name = Thread.currentThread().getName();\r\n                System.out.println(name + &quot; count to &quot; + random);\r\n                for (int i = 0; i &lt; random; i++) {\r\n\r\n                    synchronized (lock) {\r\n                        try {\r\n                            lock.notify();\r\n                            System.out.println(name + &quot; &quot; + i);\r\n                            int count = counter.get();\r\n                            if (count &gt; 1) {\r\n                                lock.wait();\r\n                            }\r\n                        } catch (Exception e) {\r\n                            e.printStackTrace();\r\n                        }\r\n\r\n                    }\r\n                }\r\n\r\n                counter.decrementAndGet();\r\n                synchronized (lock) {\r\n                    lock.notify();\r\n                }\r\n            }\r\n        }\r\n    }\r\n","title":"Talking between threads","body":"<p>This is a little, basic.  I'm not a fan of <code>static</code> in this context, but for a demonstration, it should help prove the point</p>\n<p>Essentially, you need a &quot;counter&quot; which can keep track of the number of &quot;active&quot; threads, if there is only one, you don't need to &quot;wait&quot;, for example...</p>\n<pre><code>import java.io.IOException;\nimport java.util.Random;\nimport java.util.concurrent.atomic.AtomicInteger;\nimport java.util.zip.DataFormatException;\n\npublic class Main {\n\n    public static void main(String[] args) throws IOException, DataFormatException {\n        new Thread(new Test(), &quot;One&quot;).start();\n        new Thread(new Test(), &quot;Two&quot;).start();\n    }\n\n    public static class Test implements Runnable {\n\n        public static Object sync = new Object();\n        public static AtomicInteger counter = new AtomicInteger(0);\n\n        public void run() {\n\n            counter.incrementAndGet();\n\n            Random rand = new Random();\n            // generate random number 1-20;\n            int random = rand.nextInt((20 - 1) + 1) + 1;\n            String name = Thread.currentThread().getName();\n            System.out.println(name + &quot; count to &quot; + random);\n            for (int i = 0; i &lt; random; i++) {\n\n                synchronized (sync) {\n                    try {\n                        sync.notify();\n                        System.out.println(name + &quot; &quot; + i);\n                        int count = counter.get();\n                        if (count &gt; 1) {\n                            sync.wait();\n                        }\n                    } catch (Exception e) {\n                        e.printStackTrace();\n                    }\n\n                }\n            }\n\n            counter.decrementAndGet();\n            synchronized (sync) {\n                sync.notify();\n            }\n        }\n    }\n}\n</code></pre>\n<p>And, because I don't like to abuse <code>static</code> (<code>sync</code> in this context could be argued, but as demonstration of the basic concept)</p>\n<pre><code>import java.io.IOException;\nimport java.util.Random;\nimport java.util.concurrent.atomic.AtomicInteger;\nimport java.util.zip.DataFormatException;\n\npublic class Main {\n\n    public static void main(String[] args) throws IOException, DataFormatException {\n        Object lock = new Object();\n        AtomicInteger counter = new AtomicInteger(0);\n\n        new Thread(new Test(lock, counter), &quot;One&quot;).start();\n        new Thread(new Test(lock, counter), &quot;Two&quot;).start();\n    }\n\n    public static class Test implements Runnable {\n\n        private Object lock;\n        private AtomicInteger counter;\n\n        public Test(Object lock, AtomicInteger counter) {\n            this.lock = lock;\n            this.counter = counter;\n        }\n\n        public void run() {\n\n            counter.incrementAndGet();\n\n            Random rand = new Random();\n            // generate random number 1-20;\n            int random = rand.nextInt((20 - 1) + 1) + 1;\n            String name = Thread.currentThread().getName();\n            System.out.println(name + &quot; count to &quot; + random);\n            for (int i = 0; i &lt; random; i++) {\n\n                synchronized (lock) {\n                    try {\n                        lock.notify();\n                        System.out.println(name + &quot; &quot; + i);\n                        int count = counter.get();\n                        if (count &gt; 1) {\n                            lock.wait();\n                        }\n                    } catch (Exception e) {\n                        e.printStackTrace();\n                    }\n\n                }\n            }\n\n            counter.decrementAndGet();\n            synchronized (lock) {\n                lock.notify();\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23201586,"reputation":3,"user_id":17296325,"display_name":"d0nahuge"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69792395,"answer_count":1,"score":0,"last_activity_date":1635963396,"creation_date":1635736732,"question_id":69792302,"body_markdown":"I am trying to use two threads to alternate between each other to count to a certain random number. For example, if thread A is assigned with a random number 4 and thread B is assigned with a random number 7, I am looking for output like this:\r\n\r\n```\r\nThread A:1\r\nThread B:1\r\n\r\nThread A:2\r\nThread B:2\r\n\r\nThread A:3\r\nThread B:3\r\n\r\nThread A:4\r\nThread B:4\r\n\r\nThread A:5\r\n\r\nThread A:6\r\n\r\nThread A:7\r\n```\r\n\r\nSo basically it will switch between threads and if one thread is done counting to the random number it will stop and let the other thread finish counting to the random number. This is the code I have so far:\r\n\r\n```\r\npublic class Test extends Thread {\r\n    public static Object sync = new Object();\r\n\r\n\tpublic void run() {\r\n\t\tRandom rand = new Random();\r\n\t\tint random = rand.nextInt(20) + 1; // generate random number 1-20\r\n\t\tfor (int i = 0; i &lt; random; i++) {\r\n\t\t\tsynchronized (sync) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tsync.notify();\r\n                    System.out.println(i);\r\n\t\t\t\t\tsync.wait();\r\n\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nI have been at a dead end for a while and I have no idea on what to do. This is my first time using threads so I could use some help. If anyone knows how to do this let me know as I have tried so much but nothing has worked. Thanks in advance.","title":"Talking between threads","body":"<p>I am trying to use two threads to alternate between each other to count to a certain random number. For example, if thread A is assigned with a random number 4 and thread B is assigned with a random number 7, I am looking for output like this:</p>\n<pre><code>Thread A:1\nThread B:1\n\nThread A:2\nThread B:2\n\nThread A:3\nThread B:3\n\nThread A:4\nThread B:4\n\nThread A:5\n\nThread A:6\n\nThread A:7\n</code></pre>\n<p>So basically it will switch between threads and if one thread is done counting to the random number it will stop and let the other thread finish counting to the random number. This is the code I have so far:</p>\n<pre><code>public class Test extends Thread {\n    public static Object sync = new Object();\n\n    public void run() {\n        Random rand = new Random();\n        int random = rand.nextInt(20) + 1; // generate random number 1-20\n        for (int i = 0; i &lt; random; i++) {\n            synchronized (sync) {\n                try {\n                    sync.notify();\n                    System.out.println(i);\n                    sync.wait();\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>I have been at a dead end for a while and I have no idea on what to do. This is my first time using threads so I could use some help. If anyone knows how to do this let me know as I have tried so much but nothing has worked. Thanks in advance.</p>\n"},{"tags":["java","regex","split"],"comments":[{"owner":{"account_id":262968,"reputation":767120,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"score":2,"creation_date":1635922220,"post_id":69820678,"comment_id":123418015,"body_markdown":"Since there is a `(` at the start and you are splitting on `(` there will be an empty string at the start of resulting array.","body":"Since there is a <code>(</code> at the start and you are splitting on <code>(</code> there will be an empty string at the start of resulting array."},{"owner":{"account_id":20636402,"reputation":29,"user_id":15149980,"display_name":"jadon"},"score":0,"creation_date":1635924156,"post_id":69820678,"comment_id":123418557,"body_markdown":"@anubhava adding `\\\\s` on regex yielded way different and wrong result. Are there any another way to add blank space for regex in split method?","body":"@anubhava adding <code>\\\\s</code> on regex yielded way different and wrong result. Are there any another way to add blank space for regex in split method?"},{"owner":{"account_id":20636402,"reputation":29,"user_id":15149980,"display_name":"jadon"},"score":0,"creation_date":1635924200,"post_id":69820678,"comment_id":123418568,"body_markdown":"@user16320675 That is a one lovely way to solve this problem. Thanks :)","body":"@user16320675 That is a one lovely way to solve this problem. Thanks :)"},{"owner":{"account_id":262968,"reputation":767120,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"score":0,"creation_date":1635924779,"post_id":69820678,"comment_id":123418752,"body_markdown":"@jadon: Have posted an answer below for Java 8","body":"@jadon: Have posted an answer below for Java 8"}],"answers":[{"tags":[],"owner":{"account_id":2094057,"reputation":506072,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635922487,"creation_date":1635922487,"answer_id":69820746,"question_id":69820678,"body_markdown":"What you want here is a regex find all.  One straightforward approach is to use a formal `Pattern` and `Matcher`:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    String input = &quot;(B,C) (D,E) (A,B)&quot;;\r\n    Pattern p = Pattern.compile(&quot;\\\\(([A-Z]+),\\\\s*([A-Z]+)\\\\)&quot;);\r\n    Matcher m = p.matcher(input);\r\n    List&lt;String&gt; matches = new ArrayList&lt;&gt;();\r\n\r\n    while (m.find()) {\r\n        matches.add(m.group(1));\r\n        matches.add(m.group(2));\r\n    }\r\n\r\n    System.out.println(matches);  // [B, C, D, E, A, B]\r\n\r\nAnother approach, if you insist on using a string split, would be to first preprocess the string of tuples into a space separated list:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    String input = &quot;(B,C) (D,E) (A,B)&quot;;\r\n    input = input.replaceAll(&quot;\\\\(([A-Z]+),\\\\s*([A-Z]+)\\\\)\\\\s*&quot;, &quot;$1 $2 &quot;);\r\n    String[] parts = input.split(&quot; &quot;);\r\n    System.out.println(Arrays.toString(parts));  // [B, C, D, E, A, B]","title":"Blank split string in java String.split","body":"<p>What you want here is a regex find all.  One straightforward approach is to use a formal <code>Pattern</code> and <code>Matcher</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String input = &quot;(B,C) (D,E) (A,B)&quot;;\nPattern p = Pattern.compile(&quot;\\\\(([A-Z]+),\\\\s*([A-Z]+)\\\\)&quot;);\nMatcher m = p.matcher(input);\nList&lt;String&gt; matches = new ArrayList&lt;&gt;();\n\nwhile (m.find()) {\n    matches.add(m.group(1));\n    matches.add(m.group(2));\n}\n\nSystem.out.println(matches);  // [B, C, D, E, A, B]\n</code></pre>\n<p>Another approach, if you insist on using a string split, would be to first preprocess the string of tuples into a space separated list:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String input = &quot;(B,C) (D,E) (A,B)&quot;;\ninput = input.replaceAll(&quot;\\\\(([A-Z]+),\\\\s*([A-Z]+)\\\\)\\\\s*&quot;, &quot;$1 $2 &quot;);\nString[] parts = input.split(&quot; &quot;);\nSystem.out.println(Arrays.toString(parts));  // [B, C, D, E, A, B]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":262968,"reputation":767120,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635924477,"creation_date":1635924477,"answer_id":69821053,"question_id":69820678,"body_markdown":"As mentioned in comment that since there is a `(` at the start and you are splitting on `(` there will be an empty string at the start of resulting array.\r\n\r\nYou can use this Java 8 stream based code to get rid of empty strings:\r\n\r\n```sh\r\nString str = &quot;(B,C) (D,E) (A,B)&quot;;\r\nString[] tokens = Arrays.stream(str.split(&quot;[(),\\\\s]+&quot;))\r\n   .filter(s -&gt; !s.isEmpty()).toArray(String[]::new);\r\n\r\n//=&gt; [ &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;A&quot;, &quot;B&quot; ]\r\n```\r\n\r\n&lt;kbd&gt;[Code Demo][1]&lt;/kbd&gt;\r\n\r\n\r\n  [1]: https://ideone.com/G06Cwd","title":"Blank split string in java String.split","body":"<p>As mentioned in comment that since there is a <code>(</code> at the start and you are splitting on <code>(</code> there will be an empty string at the start of resulting array.</p>\n<p>You can use this Java 8 stream based code to get rid of empty strings:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>String str = &quot;(B,C) (D,E) (A,B)&quot;;\nString[] tokens = Arrays.stream(str.split(&quot;[(),\\\\s]+&quot;))\n   .filter(s -&gt; !s.isEmpty()).toArray(String[]::new);\n\n//=&gt; [ &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;A&quot;, &quot;B&quot; ]\n</code></pre>\n<p><kbd><a href=\"https://ideone.com/G06Cwd\" rel=\"nofollow noreferrer\">Code Demo</a></kbd></p>\n"},{"tags":[],"owner":{"display_name":"user17223316"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635926083,"creation_date":1635926083,"answer_id":69821324,"question_id":69820678,"body_markdown":"Try this.\r\n\r\n    public static void main(String[] args) {\r\n        String str = &quot;(B,C) (D,E) (A,B)&quot;;\r\n        String[] tokens = str.replaceAll(&quot;[(),\\\\s]+&quot;, &quot; &quot;).trim().split(&quot; &quot;);\r\n        System.out.println(Arrays.toString(tokens));\r\n    }\r\n\r\noutput:\r\n\r\n    [B, C, D, E, A, B]\r\n","title":"Blank split string in java String.split","body":"<p>Try this.</p>\n<pre><code>public static void main(String[] args) {\n    String str = &quot;(B,C) (D,E) (A,B)&quot;;\n    String[] tokens = str.replaceAll(&quot;[(),\\\\s]+&quot;, &quot; &quot;).trim().split(&quot; &quot;);\n    System.out.println(Arrays.toString(tokens));\n}\n</code></pre>\n<p>output:</p>\n<pre><code>[B, C, D, E, A, B]\n</code></pre>\n"}],"owner":{"account_id":20636402,"reputation":29,"user_id":15149980,"display_name":"jadon"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1635962632,"creation_date":1635922047,"question_id":69820678,"body_markdown":"My goal here is to extract character from such string \r\n```\r\n(B,C) (D,E) (A,B)\r\n```   \r\nto String array `[B,C,D,E,A,B]` with `split` method.   \r\n   \r\nRegex string that I have used is `&quot;\\\\(|\\\\)|,&quot;`   \r\n   \r\nAnd I get a result with `[B,C, ,D,E, ,A,B]`   \r\n   \r\nI have absolutely no idea why there are blank characters in the result array.   \r\n   \r\n``` java\r\nString[] tokens = str.split(&quot;\\\\s&quot;);\r\nfor(String token : tokens) {\r\n   token.charAt(1);\r\n   token.charAt(3);\r\n}\r\n```   \r\nThis could be another answer, but I just want to know what I am missing from `split` method and regex.","title":"Blank split string in java String.split","body":"<p>My goal here is to extract character from such string</p>\n<pre><code>(B,C) (D,E) (A,B)\n</code></pre>\n<p>to String array <code>[B,C,D,E,A,B]</code> with <code>split</code> method.</p>\n<p>Regex string that I have used is <code>&quot;\\\\(|\\\\)|,&quot;</code></p>\n<p>And I get a result with <code>[B,C, ,D,E, ,A,B]</code></p>\n<p>I have absolutely no idea why there are blank characters in the result array.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String[] tokens = str.split(&quot;\\\\s&quot;);\nfor(String token : tokens) {\n   token.charAt(1);\n   token.charAt(3);\n}\n</code></pre>\n<p>This could be another answer, but I just want to know what I am missing from <code>split</code> method and regex.</p>\n"},{"tags":["java","postgresql","docker","dockerfile"],"comments":[{"owner":{"account_id":3068754,"reputation":2677,"user_id":2599899,"display_name":"Arthur Klezovich"},"score":0,"creation_date":1635962538,"post_id":69829634,"comment_id":123434317,"body_markdown":"This seems to be what you&#39;re looking for https://stackoverflow.com/questions/22944631/how-to-get-the-ip-address-of-the-docker-host-from-inside-a-docker-container","body":"This seems to be what you&#39;re looking for <a href=\"https://stackoverflow.com/questions/22944631/how-to-get-the-ip-address-of-the-docker-host-from-inside-a-docker-container\" title=\"how to get the ip address of the docker host from inside a docker container\">stackoverflow.com/questions/22944631/&hellip;</a>"},{"owner":{"account_id":5971465,"reputation":551,"user_id":4693675,"accept_rate":67,"display_name":"Fausto70"},"score":0,"creation_date":1635964722,"post_id":69829634,"comment_id":123435101,"body_markdown":"I already saw that post, but to be honest I&#39;m not so expert of Docker and linux, and I didn&#39;t understand how to solve the problem. I hope that some expert guy can solve my problem with some few rows to be added to my dockerfile.","body":"I already saw that post, but to be honest I&#39;m not so expert of Docker and linux, and I didn&#39;t understand how to solve the problem. I hope that some expert guy can solve my problem with some few rows to be added to my dockerfile."},{"owner":{"account_id":13863020,"reputation":137033,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1635964885,"post_id":69829634,"comment_id":123435155,"body_markdown":"You can&#39;t affect the network environment in the Dockerfile.  In the situation you describe, if the database is always on a separate host, I&#39;d expect it to see the IP of the host system making the call and not the container-private IP address.  Why does the client IP address matter; can you use something like password authentication instead of an IP ACL?","body":"You can&#39;t affect the network environment in the Dockerfile.  In the situation you describe, if the database is always on a separate host, I&#39;d expect it to see the IP of the host system making the call and not the container-private IP address.  Why does the client IP address matter; can you use something like password authentication instead of an IP ACL?"},{"owner":{"account_id":5971465,"reputation":551,"user_id":4693675,"accept_rate":67,"display_name":"Fausto70"},"score":0,"creation_date":1636015501,"post_id":69829634,"comment_id":123446473,"body_markdown":"“I&#39;d expect it to see the IP of the host system making the call and not the container-private IP address”:\nthe problem is that instead the database sees the IP address of the container and not the host, considering however that in this phase of testing the database and container with java app are on the same server, which however can also happen in real life.\n“Why does the client IP address matter”:\nIt is important because the database accepts only ip address setted in pg_hba.conf file, that are of course the addresse of hosts, and not of containers.","body":"“I&#39;d expect it to see the IP of the host system making the call and not the container-private IP address”: the problem is that instead the database sees the IP address of the container and not the host, considering however that in this phase of testing the database and container with java app are on the same server, which however can also happen in real life. “Why does the client IP address matter”: It is important because the database accepts only ip address setted in pg_hba.conf file, that are of course the addresse of hosts, and not of containers."}],"owner":{"account_id":5971465,"reputation":551,"user_id":4693675,"accept_rate":67,"display_name":"Fausto70"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1635962284,"creation_date":1635962284,"question_id":69829634,"body_markdown":"I have a solution made by 3 different Java server applications. \r\n\r\nThe 3 Java applications can run on 3 different physical servers, but also on the same server (depending by number of users, traffic, etc...).\r\nThey must access a Postgresql database. The database can reside either on a different physical server or on the same physical server as one of the applications.\r\n\r\nSo there could be a case where the database and the 3 java applications reside on the same physical server, while in another case they reside on 4 different physical servers. \r\n\r\nAll servers have static IP addresses. \r\n\r\nThe 3 Java applications are installed through the Docker container, while the PostgreSql DB is installed in the traditional way (without container).\r\n\r\nThe problem is that the java application sees (by &#39;getLocalHost()&#39;) the address of the container (172.0 ......) as its own address; because it was designed without container, itmust see the physical address of the host (80.211 .....).\r\n\r\nFurthermore, when the Java application accesses the database, the database sees that the access request comes from the IP address 172.0... while it should receive it, to allow access, from 80.211 ....\r\n\r\nThe Java application are runned by a docker file like that:\r\n\r\n    FROM openjdk:8-oraclelinux8\r\n    WORKDIR /mydir\r\n    # VOLUME . /\r\n    COPY [&quot;./My_name_Java_app.jar&quot;, &quot;./My_name_Java_app.properties&quot;, &quot;./&quot;]\r\n    EXPOSE 80\r\n    EXPOSE 8080\r\n    EXPOSE 1000-2000\r\n    ENTRYPOINT [&quot;/bin/java&quot;, &quot;-Djava.awt.headless=true&quot;, &quot;-jar&quot;, &quot;My_name_Java_app.jar&quot;]\r\n\r\nHow can I modify the dockerfile so that the host ip address is exposed and not the container address?\r\n        \r\n\r\n\r\n","title":"Java application cannot get IP address of the host in docker container with static IP anc cannot access to PosgreSql Database","body":"<p>I have a solution made by 3 different Java server applications.</p>\n<p>The 3 Java applications can run on 3 different physical servers, but also on the same server (depending by number of users, traffic, etc...).\nThey must access a Postgresql database. The database can reside either on a different physical server or on the same physical server as one of the applications.</p>\n<p>So there could be a case where the database and the 3 java applications reside on the same physical server, while in another case they reside on 4 different physical servers.</p>\n<p>All servers have static IP addresses.</p>\n<p>The 3 Java applications are installed through the Docker container, while the PostgreSql DB is installed in the traditional way (without container).</p>\n<p>The problem is that the java application sees (by 'getLocalHost()') the address of the container (172.0 ......) as its own address; because it was designed without container, itmust see the physical address of the host (80.211 .....).</p>\n<p>Furthermore, when the Java application accesses the database, the database sees that the access request comes from the IP address 172.0... while it should receive it, to allow access, from 80.211 ....</p>\n<p>The Java application are runned by a docker file like that:</p>\n<pre><code>FROM openjdk:8-oraclelinux8\nWORKDIR /mydir\n# VOLUME . /\nCOPY [&quot;./My_name_Java_app.jar&quot;, &quot;./My_name_Java_app.properties&quot;, &quot;./&quot;]\nEXPOSE 80\nEXPOSE 8080\nEXPOSE 1000-2000\nENTRYPOINT [&quot;/bin/java&quot;, &quot;-Djava.awt.headless=true&quot;, &quot;-jar&quot;, &quot;My_name_Java_app.jar&quot;]\n</code></pre>\n<p>How can I modify the dockerfile so that the host ip address is exposed and not the container address?</p>\n"},{"tags":["java","caching","redis"],"answers":[{"tags":[],"owner":{"account_id":529477,"reputation":1533,"user_id":1234412,"display_name":"BSB"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635961961,"creation_date":1635961961,"answer_id":69829563,"question_id":69810395,"body_markdown":"You likely want to explicitly set the property `spring.cache.type`, if Spring Data Redis is detected it is configured automatically to use Redis. You can pick values from https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/cache/CacheType.html or completely disable using &#39;none&#39;. You might need to add `spring-boot-starter-cache` to your POM to get the basic cache implementations.","title":"Spring Caching&#39;s AbstractCacheInvoker doPut() method calls RedisCache put() method by mistake","body":"<p>You likely want to explicitly set the property <code>spring.cache.type</code>, if Spring Data Redis is detected it is configured automatically to use Redis. You can pick values from <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/cache/CacheType.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/cache/CacheType.html</a> or completely disable using 'none'. You might need to add <code>spring-boot-starter-cache</code> to your POM to get the basic cache implementations.</p>\n"}],"owner":{"account_id":13886221,"reputation":473,"user_id":10025287,"display_name":"Milan Panic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69829563,"answer_count":1,"score":0,"last_activity_date":1635961961,"creation_date":1635855824,"question_id":69810395,"body_markdown":"I have a web application written in spring boot, that uses springframework.cache, and everything worked fine until I started using spring-data-redis.\r\n\r\nAs soon as I add spring-data-redis in the pom.xml, my spring cache starts using the RedisCache implementation. I want to use redis for the redis streams part on a different thing, and somehow ignore the redis cache implementation for the caching part of the app\r\n\r\nExcpetion classpath:\r\n\r\n    java.io.NotSerializableException: ...DomainData\r\n    assessment-service_1  |         at org.springframework.data.redis.serializer.JdkSerializationRedisSerializer.serialize(JdkSerializationRedisSerializer.java:96)\r\n    assessment-service_1  |         at org.springframework.data.redis.serializer.DefaultRedisElementWriter.write(DefaultRedisElementWriter.java:43)\r\n    assessment-service_1  |         at org.springframework.data.redis.serializer.RedisSerializationContext$SerializationPair.write(RedisSerializationContext.java:287)\r\n    assessment-service_1  |         at org.springframework.data.redis.cache.RedisCache.serializeCacheValue(RedisCache.java:244)\r\n    assessment-service_1  |         at org.springframework.data.redis.cache.RedisCache.put(RedisCache.java:150)\r\n    assessment-service_1  |         at org.springframework.cache.interceptor.AbstractCacheInvoker.doPut(AbstractCacheInvoker.java:87)\r\n    assessment-service_1  |         at org.springframework.cache.interceptor.CacheAspectSupport$CachePutRequest.apply(CacheAspectSupport.java:837)\r\n    assessment-service_1  |         at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:430)\r\n    assessment-service_1  |         at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:346)\r\n    assessment-service_1  |         at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:61)\r\n    assessment-service_1  |         at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    assessment-service_1  |         at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)\r\n    assessment-service_1  |         at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)","title":"Spring Caching&#39;s AbstractCacheInvoker doPut() method calls RedisCache put() method by mistake","body":"<p>I have a web application written in spring boot, that uses springframework.cache, and everything worked fine until I started using spring-data-redis.</p>\n<p>As soon as I add spring-data-redis in the pom.xml, my spring cache starts using the RedisCache implementation. I want to use redis for the redis streams part on a different thing, and somehow ignore the redis cache implementation for the caching part of the app</p>\n<p>Excpetion classpath:</p>\n<pre><code>java.io.NotSerializableException: ...DomainData\nassessment-service_1  |         at org.springframework.data.redis.serializer.JdkSerializationRedisSerializer.serialize(JdkSerializationRedisSerializer.java:96)\nassessment-service_1  |         at org.springframework.data.redis.serializer.DefaultRedisElementWriter.write(DefaultRedisElementWriter.java:43)\nassessment-service_1  |         at org.springframework.data.redis.serializer.RedisSerializationContext$SerializationPair.write(RedisSerializationContext.java:287)\nassessment-service_1  |         at org.springframework.data.redis.cache.RedisCache.serializeCacheValue(RedisCache.java:244)\nassessment-service_1  |         at org.springframework.data.redis.cache.RedisCache.put(RedisCache.java:150)\nassessment-service_1  |         at org.springframework.cache.interceptor.AbstractCacheInvoker.doPut(AbstractCacheInvoker.java:87)\nassessment-service_1  |         at org.springframework.cache.interceptor.CacheAspectSupport$CachePutRequest.apply(CacheAspectSupport.java:837)\nassessment-service_1  |         at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:430)\nassessment-service_1  |         at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:346)\nassessment-service_1  |         at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:61)\nassessment-service_1  |         at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nassessment-service_1  |         at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)\nassessment-service_1  |         at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)\n</code></pre>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":199821,"reputation":21300,"user_id":445348,"accept_rate":77,"display_name":"cottonBallPaws"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1296179569,"creation_date":1296179569,"answer_id":4824059,"question_id":4823442,"body_markdown":"First get a reference to the ListPreference in your onCreate.  You can use findPreference().  For example:\r\n\r\n    ListPreference pref = (ListPreference) findPreference(&quot;thePreferencesKey&quot;);\r\n\r\nThen, when you first load the Activity and whenever the preferences value is changed, use whatever method you want to get the value of the ListPreference and set the summary with:\r\n\r\n    pref.setSummary(theNewString);\r\n\r\n","title":"Android List Preferences: have summary as selected value?","body":"<p>First get a reference to the ListPreference in your onCreate.  You can use findPreference().  For example:</p>\n\n<pre><code>ListPreference pref = (ListPreference) findPreference(\"thePreferencesKey\");\n</code></pre>\n\n<p>Then, when you first load the Activity and whenever the preferences value is changed, use whatever method you want to get the value of the ListPreference and set the summary with:</p>\n\n<pre><code>pref.setSummary(theNewString);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":357487,"reputation":503,"user_id":697686,"display_name":"Axel"},"down_vote_count":1,"up_vote_count":29,"is_accepted":false,"score":28,"last_activity_date":1390402851,"creation_date":1321460624,"answer_id":8155029,"question_id":4823442,"body_markdown":"You can use `OnPreferenceChangeListener` to dynamically change the summary. The problem is that it gets the selected value (from `android:entryValues`), not the caption (`android:entries`). In the following code I used `toString()`, but the proper solution is to find the caption for the value. Anyways, the idea works:\r\n\r\n\r\n    public class Preferences extends PreferenceActivity {\r\n    \t@Override\r\n    \tprotected void onCreate(Bundle savedInstanceState) {\r\n    \t\tsuper.onCreate(savedInstanceState);\r\n    \t\taddPreferencesFromResource(R.xml.your_prefs);\r\n    \t\t\r\n    \t\tListPreference listPreference = (ListPreference) findPreference(&quot;preference_key&quot;);\r\n    \t\tif(listPreference.getValue()==null) {\r\n    \t\t\t// to ensure we don&#39;t get a null value\r\n    \t\t\t// set first value by default\r\n    \t\t\tlistPreference.setValueIndex(0);\r\n    \t\t}\r\n    \t\tlistPreference.setSummary(listPreference.getValue().toString());\r\n    \t\tlistPreference.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic boolean onPreferenceChange(Preference preference, Object newValue) {\r\n    \t\t\t\tpreference.setSummary(newValue.toString());\r\n    \t\t\t\treturn true;\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}\r\n    }\r\n\r\n\r\n","title":"Android List Preferences: have summary as selected value?","body":"<p>You can use <code>OnPreferenceChangeListener</code> to dynamically change the summary. The problem is that it gets the selected value (from <code>android:entryValues</code>), not the caption (<code>android:entries</code>). In the following code I used <code>toString()</code>, but the proper solution is to find the caption for the value. Anyways, the idea works:</p>\n\n<pre><code>public class Preferences extends PreferenceActivity {\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        addPreferencesFromResource(R.xml.your_prefs);\n\n        ListPreference listPreference = (ListPreference) findPreference(\"preference_key\");\n        if(listPreference.getValue()==null) {\n            // to ensure we don't get a null value\n            // set first value by default\n            listPreference.setValueIndex(0);\n        }\n        listPreference.setSummary(listPreference.getValue().toString());\n        listPreference.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {\n            @Override\n            public boolean onPreferenceChange(Preference preference, Object newValue) {\n                preference.setSummary(newValue.toString());\n                return true;\n            }\n        });\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":290461,"reputation":5558,"user_id":592025,"accept_rate":100,"display_name":"midhunhk"},"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1366970105,"creation_date":1366970105,"answer_id":16233612,"question_id":4823442,"body_markdown":"I also wanted to achieve something similar, but the problem with https://stackoverflow.com/a/8155029/592025 is that, it shows the value for my preference (like 1, 2 3 etc). I want to show the entry (human readable string) corresponding to the selected value.\r\n\r\nSo I changed it this way and works the way I need it.\r\n\r\n    listPreference.setSummary(servicePreference.getEntry().toString());\r\n\tlistPreference.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {\r\n\t\t\t\r\n\t\t\t@Override\r\n\t\t\tpublic boolean onPreferenceChange(Preference preference, Object newValue) {\r\n\t\t\t\t// Set the value as the new value\r\n\t\t\t\tlistPreference.setValue(newValue.toString());\r\n\t\t\t\t// Get the entry which corresponds to the current value and set as summary\r\n\t\t\t\tpreference.setSummary(listPreference.getEntry());\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\r\nThe trick is to use `getEntry()` instead of `getValue()` and once the value is changed, to set the value explicitly and read back the entry.","title":"Android List Preferences: have summary as selected value?","body":"<p>I also wanted to achieve something similar, but the problem with <a href=\"https://stackoverflow.com/a/8155029/592025\">https://stackoverflow.com/a/8155029/592025</a> is that, it shows the value for my preference (like 1, 2 3 etc). I want to show the entry (human readable string) corresponding to the selected value.</p>\n\n<p>So I changed it this way and works the way I need it.</p>\n\n<pre><code>listPreference.setSummary(servicePreference.getEntry().toString());\nlistPreference.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {\n\n        @Override\n        public boolean onPreferenceChange(Preference preference, Object newValue) {\n            // Set the value as the new value\n            listPreference.setValue(newValue.toString());\n            // Get the entry which corresponds to the current value and set as summary\n            preference.setSummary(listPreference.getEntry());\n            return false;\n        }\n    });\n</code></pre>\n\n<p>The trick is to use <code>getEntry()</code> instead of <code>getValue()</code> and once the value is changed, to set the value explicitly and read back the entry.</p>\n"},{"tags":[],"owner":{"account_id":167904,"reputation":5322,"user_id":393010,"accept_rate":67,"display_name":"Moberg"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1376557995,"creation_date":1376557995,"answer_id":18249632,"question_id":4823442,"body_markdown":"This is the code I&#39;m using, it does not call setValue manually, as I believe this is already done at a later stage.\r\n\r\nHere is an example:\r\n\r\n    @Override\r\n    public boolean onPreferenceChange(Preference preference, Object value)\r\n    {\r\n        String textValue = value.toString();\r\n\r\n        ListPreference listPreference = (ListPreference) preference;\r\n        int index = listPreference.findIndexOfValue(textValue);\r\n\r\n        CharSequence[] entries = listPreference.getEntries();\r\n        \r\n        preference.setSummary(\r\n                    index &gt;= 0\r\n                            ? entries[index]\r\n                            : null);\r\n    \r\n        return true;\r\n    }","title":"Android List Preferences: have summary as selected value?","body":"<p>This is the code I'm using, it does not call setValue manually, as I believe this is already done at a later stage.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>@Override\npublic boolean onPreferenceChange(Preference preference, Object value)\n{\n    String textValue = value.toString();\n\n    ListPreference listPreference = (ListPreference) preference;\n    int index = listPreference.findIndexOfValue(textValue);\n\n    CharSequence[] entries = listPreference.getEntries();\n\n    preference.setSummary(\n                index &gt;= 0\n                        ? entries[index]\n                        : null);\n\n    return true;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1398047,"reputation":1308,"user_id":1327416,"accept_rate":44,"display_name":"Jordan Hochstetler"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1377034733,"creation_date":1377034733,"answer_id":18345395,"question_id":4823442,"body_markdown":"This is exactly what I did and it works great. In the **onSharedPreferenceChangeListener** I just check the key of what is getting changed and then for ListPreferences convert it back to the Human readable (entry instead of entryValue) with the if statements. Pretty simple.\r\n\r\n\r\n    public class MyPreferences extends PreferenceFragment implements OnSharedPreferenceChangeListener{\r\n\r\n    public void onCreate(Bundle savedInstanceState){\r\n\t\tsuper.onCreate(savedInstanceState);\r\n\t\taddPreferencesFromResource(R.xml.preferences);\r\n\t\tcontext = getActivity();\r\n\t\t\r\n\t\tif (context == null){\r\n\t\t\tLog.e(&quot;error&quot;,&quot;context is null&quot;);\r\n\t\t}\r\n\r\n\t\tprefs = PreferenceManager.getDefaultSharedPreferences(context);\r\n\t\tmyFrequencyList = (Preference)\tfindPreference(&quot;frequency_key&quot;);\r\n        prefs.registerOnSharedPreferenceChangeListener(this);\r\n\r\n\t}\r\n\r\n\r\n    @Override\r\n\tpublic void onSharedPreferenceChanged(SharedPreferences sharedPreferences,\r\n\t\t\tString key) {\r\n\t\t\r\n\t\t\tif(key.equals(&quot;frequency_key&quot;)){\r\n\t\t\t\t    String freq = sharedPreferences.getString(&quot;frequency_key&quot;, &quot;8k Hz&quot;);\r\n\t\t\t\t    if(freq.equals(&quot;8000&quot;)){\r\n\t\t\t\t    \tfreq = &quot;8k Hz&quot;;\r\n\t\t\t\t    }\r\n\t\t\t\t    else if(freq.equals(&quot;16000&quot;)){\r\n\t\t\t\t    \tfreq = &quot;16k Hz&quot;;\r\n\t\t\t\t    }\r\n\t\t\t\t    else if(freq.equals(&quot;22050&quot;)){\r\n\t\t\t\t    \tfreq = &quot;22.05k Hz&quot;;\r\n\t\t\t\t    }\r\n\t\t\t\t    else if(freq.equals(&quot;44100&quot;)){\r\n\t\t\t\t    \tfreq = &quot;44.1k Hz&quot;;\r\n\t\t\t\t    }\r\n\t\t\t\t    else if(freq.equals(&quot;48000&quot;)){\r\n\t\t\t\t    \tfreq = &quot;48k Hz&quot;;\r\n\t\t\t\t    }\r\n\t\t\t\t    else{\r\n\t\t\t\t    \tfreq = &quot;8k Hz&quot;;\r\n\t\t\t\t    }\r\n\t\t\t\t\tmyFrequencyList.setSummary(freq);\r\n\t\t\t}\r\n\r\nxml layout\r\n\r\n     &lt;ListPreference android:id=&quot;@+id/frequency_list&quot;\r\n\t        android:key=&quot;frequency_key&quot;\r\n\t        android:summary=&quot;8000&quot;\r\n\t        android:title=&quot;Sample Rate&quot;\r\n\t        android:defaultValue=&quot;8000&quot;\r\n\t        android:dialogTitle=&quot;Larger sample rates create better sound quality but larger file sizes.&quot;\r\n\t        android:entries=&quot;@array/freq_titles&quot;\r\n\t        android:entryValues=&quot;@array/freq_values&quot;\r\n\t        /&gt;\r\n\r\nxml array\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;resources&gt;\r\n    \r\n    &lt;string-array name=&quot;freq_titles&quot;&gt;\r\n        &lt;item&gt;48k Hz&lt;/item&gt;\r\n        &lt;item&gt;44.1k Hz&lt;/item&gt;\r\n        &lt;item&gt;22.05k Hz&lt;/item&gt;\r\n        &lt;item&gt;16k Hz&lt;/item&gt;\r\n        &lt;item&gt;8k Hz&lt;/item&gt;\r\n    &lt;/string-array&gt;\r\n    \r\n    &lt;string-array name=&quot;freq_values&quot;&gt;\r\n        &lt;item&gt;48000&lt;/item&gt;\r\n        &lt;item&gt;44100&lt;/item&gt;\r\n        &lt;item&gt;22050&lt;/item&gt;\r\n        &lt;item&gt;16000&lt;/item&gt;\r\n        &lt;item&gt;8000&lt;/item&gt;\r\n    &lt;/string-array&gt;\r\n    \r\n    \r\n    \r\n    \r\n&lt;/resources&gt;","title":"Android List Preferences: have summary as selected value?","body":"<p>This is exactly what I did and it works great. In the <strong>onSharedPreferenceChangeListener</strong> I just check the key of what is getting changed and then for ListPreferences convert it back to the Human readable (entry instead of entryValue) with the if statements. Pretty simple.</p>\n\n<pre><code>public class MyPreferences extends PreferenceFragment implements OnSharedPreferenceChangeListener{\n\npublic void onCreate(Bundle savedInstanceState){\n    super.onCreate(savedInstanceState);\n    addPreferencesFromResource(R.xml.preferences);\n    context = getActivity();\n\n    if (context == null){\n        Log.e(\"error\",\"context is null\");\n    }\n\n    prefs = PreferenceManager.getDefaultSharedPreferences(context);\n    myFrequencyList = (Preference)  findPreference(\"frequency_key\");\n    prefs.registerOnSharedPreferenceChangeListener(this);\n\n}\n\n\n@Override\npublic void onSharedPreferenceChanged(SharedPreferences sharedPreferences,\n        String key) {\n\n        if(key.equals(\"frequency_key\")){\n                String freq = sharedPreferences.getString(\"frequency_key\", \"8k Hz\");\n                if(freq.equals(\"8000\")){\n                    freq = \"8k Hz\";\n                }\n                else if(freq.equals(\"16000\")){\n                    freq = \"16k Hz\";\n                }\n                else if(freq.equals(\"22050\")){\n                    freq = \"22.05k Hz\";\n                }\n                else if(freq.equals(\"44100\")){\n                    freq = \"44.1k Hz\";\n                }\n                else if(freq.equals(\"48000\")){\n                    freq = \"48k Hz\";\n                }\n                else{\n                    freq = \"8k Hz\";\n                }\n                myFrequencyList.setSummary(freq);\n        }\n</code></pre>\n\n<p>xml layout</p>\n\n<pre><code> &lt;ListPreference android:id=\"@+id/frequency_list\"\n        android:key=\"frequency_key\"\n        android:summary=\"8000\"\n        android:title=\"Sample Rate\"\n        android:defaultValue=\"8000\"\n        android:dialogTitle=\"Larger sample rates create better sound quality but larger file sizes.\"\n        android:entries=\"@array/freq_titles\"\n        android:entryValues=\"@array/freq_values\"\n        /&gt;\n</code></pre>\n\n<p>xml array</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n</code></pre>\n\n<p></p>\n\n<pre><code>&lt;string-array name=\"freq_titles\"&gt;\n    &lt;item&gt;48k Hz&lt;/item&gt;\n    &lt;item&gt;44.1k Hz&lt;/item&gt;\n    &lt;item&gt;22.05k Hz&lt;/item&gt;\n    &lt;item&gt;16k Hz&lt;/item&gt;\n    &lt;item&gt;8k Hz&lt;/item&gt;\n&lt;/string-array&gt;\n\n&lt;string-array name=\"freq_values\"&gt;\n    &lt;item&gt;48000&lt;/item&gt;\n    &lt;item&gt;44100&lt;/item&gt;\n    &lt;item&gt;22050&lt;/item&gt;\n    &lt;item&gt;16000&lt;/item&gt;\n    &lt;item&gt;8000&lt;/item&gt;\n&lt;/string-array&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":[],"owner":{"account_id":1933155,"reputation":15551,"user_id":1830736,"accept_rate":98,"display_name":"George Hilliard"},"down_vote_count":1,"up_vote_count":430,"is_accepted":false,"score":429,"last_activity_date":1562018500,"creation_date":1405488142,"answer_id":24772748,"question_id":4823442,"body_markdown":"The simplest way to do this is just to have Android do it for you.  Assuming you want the summary to match the selected value, you can simply [set the summary of the `ListPreference` to `&quot;%s&quot;`][1] using either XML or the `setSummary` method in Java.  For example:\r\n\r\n    &lt;ListPreference\r\n        android:key=&quot;pref_list&quot;\r\n        android:title=&quot;A list of preferences&quot;\r\n        android:summary=&quot;%s&quot;\r\n        android:entries=&quot;@array/pref_list_entries&quot;\r\n        android:entryValues=&quot;@array/pref_list_entries_values&quot;\r\n        android:defaultValue=&quot;0&quot; /&gt;\r\n\r\nAndroid will replace `%s` with the current string value of the preference, as displayed by the `ListPreference`&#39;s picker.  The list&#39;s summary will also be set correctly when you enter the activity—you don&#39;t have to write any special code to set it up initially.\r\n\r\nThis [also works][2] with the AndroidX `ListPreference`.\r\n\r\nI spent *far* too much time mucking with `SharedPreferences` listeners before I discovered this.\r\n\r\n  [1]: https://developer.android.com/reference/android/preference/ListPreference.html#setSummary%28java.lang.CharSequence%29\r\n  [2]: https://developer.android.com/reference/androidx/preference/ListPreference.html#setSummary(java.lang.CharSequence)","title":"Android List Preferences: have summary as selected value?","body":"<p>The simplest way to do this is just to have Android do it for you.  Assuming you want the summary to match the selected value, you can simply <a href=\"https://developer.android.com/reference/android/preference/ListPreference.html#setSummary%28java.lang.CharSequence%29\" rel=\"noreferrer\">set the summary of the <code>ListPreference</code> to <code>\"%s\"</code></a> using either XML or the <code>setSummary</code> method in Java.  For example:</p>\n\n<pre><code>&lt;ListPreference\n    android:key=\"pref_list\"\n    android:title=\"A list of preferences\"\n    android:summary=\"%s\"\n    android:entries=\"@array/pref_list_entries\"\n    android:entryValues=\"@array/pref_list_entries_values\"\n    android:defaultValue=\"0\" /&gt;\n</code></pre>\n\n<p>Android will replace <code>%s</code> with the current string value of the preference, as displayed by the <code>ListPreference</code>'s picker.  The list's summary will also be set correctly when you enter the activity—you don't have to write any special code to set it up initially.</p>\n\n<p>This <a href=\"https://developer.android.com/reference/androidx/preference/ListPreference.html#setSummary(java.lang.CharSequence)\" rel=\"noreferrer\">also works</a> with the AndroidX <code>ListPreference</code>.</p>\n\n<p>I spent <em>far</em> too much time mucking with <code>SharedPreferences</code> listeners before I discovered this.</p>\n"},{"tags":[],"owner":{"account_id":1725291,"reputation":805,"user_id":1580118,"accept_rate":40,"display_name":"RudyF"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1457236049,"creation_date":1457232430,"answer_id":35822524,"question_id":4823442,"body_markdown":"Here&#39;s an expanded version of midhunhk&#39;s answer that addresses the helpful &quot;android:summary&quot; string as well\r\n\r\n\t\t\t// Retrieve &amp; populate flash modes\r\n\t\t\tList&lt;String&gt; flashmodes = params.getSupportedFlashModes();\r\n\t\t\tif (flashmodes != null) {\r\n\t\t\t\tfinal ListPreference lp = (ListPreference) findPreference(&quot;flash_list&quot;);\r\n\t\t\t\tfinal String lp_basesummary = &quot;Set the Flash mode. The default is &#39;auto&#39;&quot;;\r\n\r\n\t\t\t\tlp.setEntries(flashmodes.toArray(new CharSequence[flashmodes.size()]));\r\n\t\t\t\tlp.setEntryValues(flashmodes.toArray(new CharSequence[flashmodes.size()]));\r\n\t\t\t\t// If there&#39;s only one option, make it the default\r\n\t\t\t\tif (flashmodes.size() == 1)\r\n\t\t\t\t\tlp.setValueIndex(0);\r\n\r\n\t\t\t\tlp.setSummary(lp_basesummary + &quot; [&quot; + lp.getEntry() + &quot;]&quot;);\r\n\r\n\t\t\t\tlp.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {\r\n\r\n\t\t\t\t\t@Override\r\n\t\t\t\t\tpublic boolean onPreferenceChange(Preference preference, Object newValue) {\r\n\t\t\t\t\t\t// Set the value as the new value\r\n\t\t\t\t\t\tlp.setValue(newValue.toString());\r\n\t\t\t\t\t\t// Get the entry which corresponds to the current value\r\n\t\t\t\t\t\t// and set as summary\r\n\t\t\t\t\t\tpreference.setSummary(lp_basesummary + &quot; [&quot; + lp.getEntry() + &quot;]&quot;);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Remove the preference\r\n\t\t\t\t((PreferenceGroup) findPreference(&quot;camera_preference&quot;)).removePreference(findPreference(&quot;flash_list&quot;));\r\n\t\t\t}\r\n\r\n\t\t\t// Retrieve &amp; populate focus modes\r\n\t\t\tList&lt;String&gt; focusmodes = params.getSupportedFocusModes();\r\n\t\t\tif (focusmodes != null) {\r\n\t\t\t\tfinal ListPreference lp = (ListPreference) findPreference(&quot;focus_mode_list&quot;);\r\n\t\t\t\tfinal String lp_basesummary = &quot;Set the Focus mode. The default is &#39;auto&#39;&quot;;\r\n    ...\r\n\r\nAnd, just to be clear, android:summary is removed from the related xml.\r\n\t","title":"Android List Preferences: have summary as selected value?","body":"<p>Here's an expanded version of midhunhk's answer that addresses the helpful \"android:summary\" string as well</p>\n\n<pre><code>        // Retrieve &amp; populate flash modes\n        List&lt;String&gt; flashmodes = params.getSupportedFlashModes();\n        if (flashmodes != null) {\n            final ListPreference lp = (ListPreference) findPreference(\"flash_list\");\n            final String lp_basesummary = \"Set the Flash mode. The default is 'auto'\";\n\n            lp.setEntries(flashmodes.toArray(new CharSequence[flashmodes.size()]));\n            lp.setEntryValues(flashmodes.toArray(new CharSequence[flashmodes.size()]));\n            // If there's only one option, make it the default\n            if (flashmodes.size() == 1)\n                lp.setValueIndex(0);\n\n            lp.setSummary(lp_basesummary + \" [\" + lp.getEntry() + \"]\");\n\n            lp.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {\n\n                @Override\n                public boolean onPreferenceChange(Preference preference, Object newValue) {\n                    // Set the value as the new value\n                    lp.setValue(newValue.toString());\n                    // Get the entry which corresponds to the current value\n                    // and set as summary\n                    preference.setSummary(lp_basesummary + \" [\" + lp.getEntry() + \"]\");\n                    return false;\n                }\n            });\n        } else {\n            // Remove the preference\n            ((PreferenceGroup) findPreference(\"camera_preference\")).removePreference(findPreference(\"flash_list\"));\n        }\n\n        // Retrieve &amp; populate focus modes\n        List&lt;String&gt; focusmodes = params.getSupportedFocusModes();\n        if (focusmodes != null) {\n            final ListPreference lp = (ListPreference) findPreference(\"focus_mode_list\");\n            final String lp_basesummary = \"Set the Focus mode. The default is 'auto'\";\n...\n</code></pre>\n\n<p>And, just to be clear, android:summary is removed from the related xml.</p>\n"},{"tags":[],"owner":{"account_id":1725291,"reputation":805,"user_id":1580118,"accept_rate":40,"display_name":"RudyF"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1457332494,"creation_date":1457332494,"answer_id":35837581,"question_id":4823442,"body_markdown":"And here&#39;s one way to deal with the Ringtone preference&#39;s summary update following a user selection.\r\n\r\n\t\tfinal SharedPreferences preference = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());\r\n\r\n\t\tfinal RingtonePreference rp_shuttle = (RingtonePreference) findPreference(&quot;shuttle_tone&quot;);\r\n\t\trp_shuttle.setSummary(RingtoneManager\r\n\t\t\t\t.getRingtone(getApplicationContext(), Uri.parse(preference.getString(&quot;shuttle_tone&quot;, &quot;DEFAULT_SOUND&quot;)))\r\n\t\t\t\t.getTitle(this));\r\n\r\n\t\trp_shuttle.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {\r\n\r\n\t\t\tpublic boolean onPreferenceChange(Preference mypreference, Object newValue) {\r\n\t\t\t\trp_shuttle.setSummary(RingtoneManager.getRingtone(getApplicationContext(), Uri.parse(newValue + &quot;&quot;))\r\n\t\t\t\t\t\t.getTitle(getApplicationContext()));\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t})","title":"Android List Preferences: have summary as selected value?","body":"<p>And here's one way to deal with the Ringtone preference's summary update following a user selection.</p>\n\n<pre><code>    final SharedPreferences preference = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());\n\n    final RingtonePreference rp_shuttle = (RingtonePreference) findPreference(\"shuttle_tone\");\n    rp_shuttle.setSummary(RingtoneManager\n            .getRingtone(getApplicationContext(), Uri.parse(preference.getString(\"shuttle_tone\", \"DEFAULT_SOUND\")))\n            .getTitle(this));\n\n    rp_shuttle.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {\n\n        public boolean onPreferenceChange(Preference mypreference, Object newValue) {\n            rp_shuttle.setSummary(RingtoneManager.getRingtone(getApplicationContext(), Uri.parse(newValue + \"\"))\n                    .getTitle(getApplicationContext()));\n\n            return true;\n        }\n    })\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10547150,"reputation":41,"user_id":7771005,"accept_rate":75,"display_name":"Marcio Montenegro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1503268769,"creation_date":1503268769,"answer_id":45787404,"question_id":4823442,"body_markdown":"You hava a method bindPreferenceSummaryToValue on your PreferenceActivity,\r\n\r\nyou can easily add the summary to the list doing like this:\r\n\r\n    private static void bindPreferenceSummaryToValue(Preference preference) {\r\n        preference.setOnPreferenceChangeListener(sBindPreferenceSummaryToValueListener);\r\n\r\n        sBindPreferenceSummaryToValueListener.onPreferenceChange(preference,\r\n                PreferenceManager\r\n                        .getDefaultSharedPreferences(preference.getContext())\r\n                        .getString(preference.getKey(), &quot;&quot;));\r\n    }\r\n\r\nOn yout OnCreate method you call the bind function like this:\r\n\r\n    bindPreferenceSummaryToValue(findPreference(getString(R.string.KEY_OF_THE_LIST)));\r\n\r\nYou can easily add others summary on the same way:\r\n\r\n    bindPreferenceSummaryToValue(findPreference(getString(R.string.KEY_1)));\r\n    bindPreferenceSummaryToValue(findPreference(getString(R.string.KEY_2)));\r\n    bindPreferenceSummaryToValue(findPreference(getString(R.string.KEY_3)));","title":"Android List Preferences: have summary as selected value?","body":"<p>You hava a method bindPreferenceSummaryToValue on your PreferenceActivity,</p>\n\n<p>you can easily add the summary to the list doing like this:</p>\n\n<pre><code>private static void bindPreferenceSummaryToValue(Preference preference) {\n    preference.setOnPreferenceChangeListener(sBindPreferenceSummaryToValueListener);\n\n    sBindPreferenceSummaryToValueListener.onPreferenceChange(preference,\n            PreferenceManager\n                    .getDefaultSharedPreferences(preference.getContext())\n                    .getString(preference.getKey(), \"\"));\n}\n</code></pre>\n\n<p>On yout OnCreate method you call the bind function like this:</p>\n\n<pre><code>bindPreferenceSummaryToValue(findPreference(getString(R.string.KEY_OF_THE_LIST)));\n</code></pre>\n\n<p>You can easily add others summary on the same way:</p>\n\n<pre><code>bindPreferenceSummaryToValue(findPreference(getString(R.string.KEY_1)));\nbindPreferenceSummaryToValue(findPreference(getString(R.string.KEY_2)));\nbindPreferenceSummaryToValue(findPreference(getString(R.string.KEY_3)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6580315,"reputation":151,"user_id":5084782,"display_name":"Derrick Njeru"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527280460,"creation_date":1527280460,"answer_id":50536506,"question_id":4823442,"body_markdown":"under onCreatePreferences do this::\r\n\r\n    SharedPreferences sharedPreferences =getPreferenceScreen().getSharedPreferences();\r\n    PreferenceScreen prefScreen = getPreferenceScreen();\r\n    int count = prefScreen.getPreferenceCount();\r\n\r\n    for (int i = 0; i &lt; count; i++) {\r\n      Preference p = prefScreen.getPreference(i);\r\n        if (p instanceof ListPreference) {\r\n           String value = sharedPreferences.getString(p.getKey(), &quot;&quot;);\r\n           ListPreference listPreference = (ListPreference) preference;\r\n           int prefIndex = listPreference.findIndexOfValue(stringValue);\r\n           if (prefIndex &gt;= 0) {\r\n                preference.setSummary(listPreference.getEntries()[prefIndex]);\r\n          }\r\n        }\r\n     }  \r\n\r\n \r\n\r\n","title":"Android List Preferences: have summary as selected value?","body":"<p>under onCreatePreferences do this::</p>\n\n<pre><code>SharedPreferences sharedPreferences =getPreferenceScreen().getSharedPreferences();\nPreferenceScreen prefScreen = getPreferenceScreen();\nint count = prefScreen.getPreferenceCount();\n\nfor (int i = 0; i &lt; count; i++) {\n  Preference p = prefScreen.getPreference(i);\n    if (p instanceof ListPreference) {\n       String value = sharedPreferences.getString(p.getKey(), \"\");\n       ListPreference listPreference = (ListPreference) preference;\n       int prefIndex = listPreference.findIndexOfValue(stringValue);\n       if (prefIndex &gt;= 0) {\n            preference.setSummary(listPreference.getEntries()[prefIndex]);\n      }\n    }\n }  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":3369695,"reputation":332,"user_id":2829256,"display_name":"42Geek"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1537893212,"creation_date":1537893212,"answer_id":52502909,"question_id":4823442,"body_markdown":"I think that what you are looking for is much simple that you can think, add the following code line to your `Preference` item: \r\n\r\n    android:summary=&quot;%1$s&quot;\r\n\r\nSo it will look something like this: \r\n\r\n    &lt;ListPreference\r\n                android:key=&quot;@string/pref_temp_key&quot;\r\n                android:title=&quot;@string/pref_temp_title&quot;\r\n                android:dialogTitle=&quot;@string/pref_temp_dialog_title&quot;\r\n                android:entries=&quot;@array/pref_tempUnit_entries&quot;\r\n                android:entryValues=&quot;@array/pref_tempUnit_entries&quot;\r\n                android:summary=&quot;%1$s&quot;\r\n                android:defaultValue=&quot;@string/pref_temp_default_value&quot; /&gt;\r\n\r\n","title":"Android List Preferences: have summary as selected value?","body":"<p>I think that what you are looking for is much simple that you can think, add the following code line to your <code>Preference</code> item: </p>\n\n<pre><code>android:summary=\"%1$s\"\n</code></pre>\n\n<p>So it will look something like this: </p>\n\n<pre><code>&lt;ListPreference\n            android:key=\"@string/pref_temp_key\"\n            android:title=\"@string/pref_temp_title\"\n            android:dialogTitle=\"@string/pref_temp_dialog_title\"\n            android:entries=\"@array/pref_tempUnit_entries\"\n            android:entryValues=\"@array/pref_tempUnit_entries\"\n            android:summary=\"%1$s\"\n            android:defaultValue=\"@string/pref_temp_default_value\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5227834,"reputation":1250,"user_id":4179299,"display_name":"Nati Dykstein"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1635961497,"creation_date":1601935736,"answer_id":64216870,"question_id":4823442,"body_markdown":"So simple - just add the following property to your XML definition - \r\n\r\n```xml\r\n&lt;ListPreference\r\n...    \r\napp:useSimpleSummaryProvider=&quot;true&quot;\r\n...\r\n/&gt;\r\n```","title":"Android List Preferences: have summary as selected value?","body":"<p>So simple - just add the following property to your XML definition -</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;ListPreference\n...    \napp:useSimpleSummaryProvider=&quot;true&quot;\n...\n/&gt;\n</code></pre>\n"}],"owner":{"account_id":196417,"reputation":18062,"user_id":439836,"accept_rate":67,"display_name":"Fran Fitzpatrick"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45216,"favorite_count":0,"down_vote_count":0,"up_vote_count":121,"answer_count":12,"score":121,"last_activity_date":1635961497,"creation_date":1296173526,"question_id":4823442,"body_markdown":"I have a Preference activity which uses a List Preferences as defined by my XML file. How would I set the summary of the list activity to the value that is selected?","title":"Android List Preferences: have summary as selected value?","body":"<p>I have a Preference activity which uses a List Preferences as defined by my XML file. How would I set the summary of the list activity to the value that is selected?</p>\n"},{"tags":["java","rest","jboss","wildfly","system-properties"],"comments":[{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1635260408,"post_id":69679648,"comment_id":123246440,"body_markdown":"Are you open to a non-REST API? There is a simple way to do it in Java.","body":"Are you open to a non-REST API? There is a simple way to do it in Java."},{"owner":{"account_id":1263338,"reputation":1300,"user_id":1221159,"accept_rate":67,"display_name":"Barad&#233;"},"score":0,"creation_date":1635955835,"post_id":69679648,"comment_id":123431550,"body_markdown":"REST would be much better but you can post an example with a Java API. Are you talking about EJB?","body":"REST would be much better but you can post an example with a Java API. Are you talking about EJB?"}],"answers":[{"tags":[],"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635961167,"creation_date":1635961167,"answer_id":69829400,"question_id":69679648,"body_markdown":"With the `org.wildfly.core:wildfly-controller-client` API you could do something like this:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    try (ModelControllerClient client = ModelControllerClient.Factory.create(&quot;localhost&quot;, 9990)) {\r\n        final ModelNode address = Operations.createAddress(&quot;system-property&quot;, &quot;test.property&quot;);\r\n        ModelNode op = Operations.createRemoveOperation(address);\r\n        ModelNode result = client.execute(op);\r\n        if (!Operations.isSuccessfulOutcome(result)) {\r\n            throw new RuntimeException(&quot;Failed to remove property: &quot; + Operations.getFailureDescription(result).asString());\r\n        }\r\n        op = Operations.createAddOperation(address);\r\n        op.get(&quot;value&quot;).set(&quot;test-value&quot;);\r\n        result = client.execute(op);\r\n        if (!Operations.isSuccessfulOutcome(result)) {\r\n            throw new RuntimeException(&quot;Failed to add property: &quot; + Operations.getFailureDescription(result).asString());\r\n        }\r\n    }\r\n\r\nYou can use the REST API too, however you&#39;ll need to have a way to do digest authentication.\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    Client client = null;\r\n    try {\r\n        final JsonObject json = Json.createObjectBuilder()\r\n                .add(&quot;address&quot;, Json.createArrayBuilder()\r\n                        .add(&quot;system-property&quot;)\r\n                        .add(&quot;test.property.2&quot;))\r\n                .add(&quot;operation&quot;, &quot;add&quot;)\r\n                .add(&quot;value&quot;, &quot;test-value&quot;)\r\n                .build();\r\n        client = ClientBuilder.newClient();\r\n        final Response response = client.target(&quot;http://localhost:9990/management/&quot;)\r\n                .request()\r\n                .header(HttpHeaders.AUTHORIZATION, &quot;Digest &lt;settings&gt;&quot;)\r\n                .post(Entity.json(json));\r\n        System.out.println(response.getStatusInfo());\r\n    } finally {\r\n        if (client != null) client.close();\r\n    }","title":"How to perform system property operations in WildFly via REST?","body":"<p>With the <code>org.wildfly.core:wildfly-controller-client</code> API you could do something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (ModelControllerClient client = ModelControllerClient.Factory.create(&quot;localhost&quot;, 9990)) {\n    final ModelNode address = Operations.createAddress(&quot;system-property&quot;, &quot;test.property&quot;);\n    ModelNode op = Operations.createRemoveOperation(address);\n    ModelNode result = client.execute(op);\n    if (!Operations.isSuccessfulOutcome(result)) {\n        throw new RuntimeException(&quot;Failed to remove property: &quot; + Operations.getFailureDescription(result).asString());\n    }\n    op = Operations.createAddOperation(address);\n    op.get(&quot;value&quot;).set(&quot;test-value&quot;);\n    result = client.execute(op);\n    if (!Operations.isSuccessfulOutcome(result)) {\n        throw new RuntimeException(&quot;Failed to add property: &quot; + Operations.getFailureDescription(result).asString());\n    }\n}\n</code></pre>\n<p>You can use the REST API too, however you'll need to have a way to do digest authentication.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Client client = null;\ntry {\n    final JsonObject json = Json.createObjectBuilder()\n            .add(&quot;address&quot;, Json.createArrayBuilder()\n                    .add(&quot;system-property&quot;)\n                    .add(&quot;test.property.2&quot;))\n            .add(&quot;operation&quot;, &quot;add&quot;)\n            .add(&quot;value&quot;, &quot;test-value&quot;)\n            .build();\n    client = ClientBuilder.newClient();\n    final Response response = client.target(&quot;http://localhost:9990/management/&quot;)\n            .request()\n            .header(HttpHeaders.AUTHORIZATION, &quot;Digest &lt;settings&gt;&quot;)\n            .post(Entity.json(json));\n    System.out.println(response.getStatusInfo());\n} finally {\n    if (client != null) client.close();\n}\n</code></pre>\n"}],"owner":{"account_id":1263338,"reputation":1300,"user_id":1221159,"accept_rate":67,"display_name":"Barad&#233;"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":343,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635961167,"creation_date":1634917308,"question_id":69679648,"body_markdown":"This documentation states that one can perform certain operations for a WildFly server via REST: https://docs.jboss.org/author/display/WFLY10/The%20HTTP%20management%20API.html\r\nHowever, there is no example how to add/remove/read a system property. I have no idea how the HTTP body has to look for those calls.\r\n\r\nThe answer of the following StackOverflow question says that the class SimpleOperation used in the example does not really exist: https://stackoverflow.com/questions/36772354/wildfly-10-management-rest-api\r\n\r\nI would like to do the following operations:\r\n\r\n    /system-property=BLA:remove\r\n    /system-property=BLA:add(value=&quot;1,2,3,4&quot;)\r\n\r\nand to read it.\r\n\r\nHow can I perform these operations via REST with the WildFly HTTP management API? Ideally, I would use a Java API if there was one.\r\n","title":"How to perform system property operations in WildFly via REST?","body":"<p>This documentation states that one can perform certain operations for a WildFly server via REST: <a href=\"https://docs.jboss.org/author/display/WFLY10/The%20HTTP%20management%20API.html\" rel=\"nofollow noreferrer\">https://docs.jboss.org/author/display/WFLY10/The%20HTTP%20management%20API.html</a>\nHowever, there is no example how to add/remove/read a system property. I have no idea how the HTTP body has to look for those calls.</p>\n<p>The answer of the following StackOverflow question says that the class SimpleOperation used in the example does not really exist: <a href=\"https://stackoverflow.com/questions/36772354/wildfly-10-management-rest-api\">Wildfly 10 management Rest API</a></p>\n<p>I would like to do the following operations:</p>\n<pre><code>/system-property=BLA:remove\n/system-property=BLA:add(value=&quot;1,2,3,4&quot;)\n</code></pre>\n<p>and to read it.</p>\n<p>How can I perform these operations via REST with the WildFly HTTP management API? Ideally, I would use a Java API if there was one.</p>\n"},{"tags":["java","android","android-studio","kotlin"],"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1635963453,"post_id":69829240,"comment_id":123434647,"body_markdown":"To make it compile, put `val` in front of the constructor parameter so it also becomes a property. But this won&#39;t work at runtime, because Android requires an empty constructor for Activities. The recommended design nowadays is to use a single Activity and multiple Fragments. They can share data through a common ViewModel. But if you still want to use two Activities, you need to pass the object through a Bundle in the Intent extras of the Intent used to launch the second Activity. https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android-application","body":"To make it compile, put <code>val</code> in front of the constructor parameter so it also becomes a property. But this won&#39;t work at runtime, because Android requires an empty constructor for Activities. The recommended design nowadays is to use a single Activity and multiple Fragments. They can share data through a common ViewModel. But if you still want to use two Activities, you need to pass the object through a Bundle in the Intent extras of the Intent used to launch the second Activity. <a href=\"https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android-application\" title=\"how do i pass data between activities in android application\">stackoverflow.com/questions/2091465/&hellip;</a>"},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1635963706,"post_id":69829240,"comment_id":123434745,"body_markdown":"Note your class needs to be Serializable or Parcelable to be able to put it in a Bundle. You can look up how to do this in Kotlin. Parcelable is preferable and easily done using the `kotlin-parcelize` plugin.","body":"Note your class needs to be Serializable or Parcelable to be able to put it in a Bundle. You can look up how to do this in Kotlin. Parcelable is preferable and easily done using the <code>kotlin-parcelize</code> plugin."}],"owner":{"account_id":15922516,"reputation":490,"user_id":11489088,"display_name":"petestmart"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1635963585,"answer_count":0,"score":0,"last_activity_date":1635960504,"creation_date":1635960504,"question_id":69829240,"body_markdown":"`MoviesData.java` is a Java class.  I&#39;m trying to pass it to another class from `MainActivity.kt` to `MovieRequest.kt`\r\n\r\nI&#39;m trying to refactor and have very little idea about what I&#39;m doing.\r\n\r\nHere is `MoviesData.java`\r\n\r\n    public class MoviesData {\r\n\r\n    @NotNull\r\n    public final List&lt;? extends Result&gt; results;\r\n\r\n    public MoviesData(List&lt;? extends Result&gt; results) {\r\n        this.results = results;\r\n    }\r\n    }\r\n\r\nThis is the piece in `MainActivity.kt` that is probably wrong:\r\n\r\n    val movieType = MoviesData( *****results:***** I don&#39;t know what to put here *****)\r\n        MovieRequest(movieType)\r\n\r\nThis is `MovieRequest.kt`. Note that all of the instances of `movieType` in this file are showing errors, so there&#39;s likely something wrong here as well:\r\n\r\n    open class MovieRequest(movieType: Array&lt;String&gt;) : AppCompatActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        val request = ServiceBuilder.buildService(TmdbEndpoints::class.java)\r\n        val call = request.getMovies(getString(R.string.api_key))\r\n\r\n        call.enqueue(object : Callback&lt;movieType&gt; {\r\n            override fun onResponse(call: Call&lt;movieType&gt;, response: Response&lt;movieType&gt;) {\r\n                if (response.isSuccessful) {\r\n                    progress_bar.visibility = View.GONE\r\n                    recyclerView.apply {\r\n                        setHasFixedSize(true)\r\n                        layoutManager = LinearLayoutManager(this@MovieRequest)\r\n                        adapter = MoviesAdapter(response.body()!!.results as List&lt;Result&gt;)\r\n                    }\r\n                }\r\n            }\r\n\r\n            override fun onFailure(call: Call&lt;MoviesData&gt;, t: Throwable) {\r\n                Toast.makeText(this@MovieRequest, &quot;${t.message}&quot;, Toast.LENGTH_SHORT).show()\r\n            }\r\n        })\r\n    }\r\n}","title":"Pass a data class to another function in order to make a get request - Kotlin from Java","body":"<p><code>MoviesData.java</code> is a Java class.  I'm trying to pass it to another class from <code>MainActivity.kt</code> to <code>MovieRequest.kt</code></p>\n<p>I'm trying to refactor and have very little idea about what I'm doing.</p>\n<p>Here is <code>MoviesData.java</code></p>\n<pre><code>public class MoviesData {\n\n@NotNull\npublic final List&lt;? extends Result&gt; results;\n\npublic MoviesData(List&lt;? extends Result&gt; results) {\n    this.results = results;\n}\n}\n</code></pre>\n<p>This is the piece in <code>MainActivity.kt</code> that is probably wrong:</p>\n<pre><code>val movieType = MoviesData( *****results:***** I don't know what to put here *****)\n    MovieRequest(movieType)\n</code></pre>\n<p>This is <code>MovieRequest.kt</code>. Note that all of the instances of <code>movieType</code> in this file are showing errors, so there's likely something wrong here as well:</p>\n<pre><code>open class MovieRequest(movieType: Array&lt;String&gt;) : AppCompatActivity() {\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n\n    val request = ServiceBuilder.buildService(TmdbEndpoints::class.java)\n    val call = request.getMovies(getString(R.string.api_key))\n\n    call.enqueue(object : Callback&lt;movieType&gt; {\n        override fun onResponse(call: Call&lt;movieType&gt;, response: Response&lt;movieType&gt;) {\n            if (response.isSuccessful) {\n                progress_bar.visibility = View.GONE\n                recyclerView.apply {\n                    setHasFixedSize(true)\n                    layoutManager = LinearLayoutManager(this@MovieRequest)\n                    adapter = MoviesAdapter(response.body()!!.results as List&lt;Result&gt;)\n                }\n            }\n        }\n\n        override fun onFailure(call: Call&lt;MoviesData&gt;, t: Throwable) {\n            Toast.makeText(this@MovieRequest, &quot;${t.message}&quot;, Toast.LENGTH_SHORT).show()\n        }\n    })\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","ssl"],"comments":[{"owner":{"account_id":3340852,"reputation":1493,"user_id":2807177,"display_name":"gmanjon"},"score":0,"creation_date":1635878272,"post_id":69815369,"comment_id":123408810,"body_markdown":"Please, could you post the code used to send the header?","body":"Please, could you post the code used to send the header?"},{"owner":{"account_id":16824948,"reputation":405,"user_id":12164467,"display_name":"Jan Heil"},"score":0,"creation_date":1635878460,"post_id":69815369,"comment_id":123408870,"body_markdown":"Simple output.....write(code.getBytes());....                                                                  \n                    GET /index.html HTTP/1.1\nHost: www.xxx.dear \nConnection: Keep-Alive\nUser-Agent: Mozilla/4.0 (compatible; MSIE5.01; Windows NT)\nAccept-Language: en-us","body":"Simple output.....write(code.getBytes());....                                                                                       GET /index.html HTTP/1.1 Host: www.xxx.dear  Connection: Keep-Alive User-Agent: Mozilla/4.0 (compatible; MSIE5.01; Windows NT) Accept-Language: en-us"},{"owner":{"account_id":3340852,"reputation":1493,"user_id":2807177,"display_name":"gmanjon"},"score":0,"creation_date":1635882387,"post_id":69815369,"comment_id":123410184,"body_markdown":"I ment to add it to your question. Questions about not working code without posting the code itself are not properly formed questions, and will sure get negative voting. But what is even more important, is that you won&#39;t easily get the answer you are looking for.","body":"I ment to add it to your question. Questions about not working code without posting the code itself are not properly formed questions, and will sure get negative voting. But what is even more important, is that you won&#39;t easily get the answer you are looking for."},{"owner":{"account_id":16824948,"reputation":405,"user_id":12164467,"display_name":"Jan Heil"},"score":0,"creation_date":1635953515,"post_id":69815369,"comment_id":123430501,"body_markdown":"I can&#39;t post my entire Code, because I am limited to some thousand Chars.","body":"I can&#39;t post my entire Code, because I am limited to some thousand Chars."}],"answers":[{"tags":[],"owner":{"account_id":16824948,"reputation":405,"user_id":12164467,"display_name":"Jan Heil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635960352,"creation_date":1635960352,"answer_id":69829207,"question_id":69815369,"body_markdown":"I found out that following Code only works for HTTP:\r\n\r\n                this.threadIO = new Thread(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    try {\r\n                        //while (!socketIO.isClosed() &amp;&amp; readerIO.read() != -1) {\r\n                        while (socketIO.isConnected() &amp;&amp; !socketIO.isClosed()) {\r\n\r\n                            // Byte Buffer ho contains read Data.\r\n                            byte[] bufferIO = new byte[inputIO.available()];\r\n\r\n                            // Read Data into Buffer and store (EOF).\r\n                            int codeIO = inputIO.read(bufferIO);\r\n\r\n                            //if (bufferIO.length != 0 &amp;&amp; inputIO.available() == 0) {\r\n                            if (bufferIO.length != 0 &amp;&amp; inputIO.available() == 0) {\r\n\r\n                                if (binaryIO)\r\n                                    binary(socketIO, bufferIO);\r\n\r\n                                if (stringIO)\r\n                                    string(socketIO, new String(bufferIO, charsetIO));\r\n\r\n                                if (hasCallbacks()) {\r\n                                    String dataIO = new String(bufferIO);\r\n\r\n                                    for (String keyIO : callbacksIO.keySet()) {\r\n                                        if (dataIO.contains(keyIO)) {\r\n\r\n                                            logIO.append(GuardianLog.Type.INFO, &quot;Executing Callback for Initiator &#39;&quot; + keyIO + &quot;&#39;.&quot;);\r\n\r\n                                            callbacksIO.get(keyIO).string(socketIO, dataIO);\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            // Sleep for 100 Milliseconds (CPU Usage)\r\n                            Thread.sleep(100);\r\n                        }\r\n\r\n                        inputIO.reset();\r\n                        inputIO.close();\r\n\r\n                        if (!socketIO.isClosed()) {\r\n                            socketIO.close();\r\n                        }\r\n\r\n                        disconnected(socketIO);\r\n\r\n                        threadIO.stop();\r\n                    } catch (IOException | InterruptedException errorIO) {\r\n                        if (errorIO.getMessage().equalsIgnoreCase(&quot;Stream closed.&quot;) || errorIO.getMessage().equalsIgnoreCase(&quot;Connection reset&quot;)) {\r\n                            logIO.debug(GuardianLog.Type.INFO, &quot;Client was disconnected from Server with Address &quot; + networkIO.getAddress().getHostAddress() + &quot; on Port &quot; + networkIO.getPort() + &quot;.&quot;);\r\n\r\n                            disconnected(socketIO);\r\n                        } else logIO.append(GuardianLog.Type.ERROR, &quot;Socket throw an Error &quot;, errorIO);\r\n                    }\r\n                }\r\n            });\r\n\r\n\r\n\r\nBut this works for HTTPS:\r\n\r\n    new Thread(new Runnable() {\r\n                            @Override\r\n                            public void run() {\r\n                                try {\r\n                                    BufferedReader readerIO = new BufferedReader(new InputStreamReader(handshakeIO.getSocket().getInputStream()));\r\n\r\n                                    System.out.println(&quot;AAA&quot;);\r\n\r\n                                    String lineIO = null;\r\n                                    while ((lineIO = readerIO.readLine()) != null) {\r\n                                        System.out.println(readerIO.readLine());\r\n                                    }\r\n                                } catch (IOException e) {\r\n                                    e.printStackTrace();\r\n                                }\r\n                            }\r\n                        }).start();\r\n\r\n\r\nDon&#39;t know why, but i think something is hanging my functions.","title":"Java HTTPS Client wit Secure Socket","body":"<p>I found out that following Code only works for HTTP:</p>\n<pre><code>            this.threadIO = new Thread(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    //while (!socketIO.isClosed() &amp;&amp; readerIO.read() != -1) {\n                    while (socketIO.isConnected() &amp;&amp; !socketIO.isClosed()) {\n\n                        // Byte Buffer ho contains read Data.\n                        byte[] bufferIO = new byte[inputIO.available()];\n\n                        // Read Data into Buffer and store (EOF).\n                        int codeIO = inputIO.read(bufferIO);\n\n                        //if (bufferIO.length != 0 &amp;&amp; inputIO.available() == 0) {\n                        if (bufferIO.length != 0 &amp;&amp; inputIO.available() == 0) {\n\n                            if (binaryIO)\n                                binary(socketIO, bufferIO);\n\n                            if (stringIO)\n                                string(socketIO, new String(bufferIO, charsetIO));\n\n                            if (hasCallbacks()) {\n                                String dataIO = new String(bufferIO);\n\n                                for (String keyIO : callbacksIO.keySet()) {\n                                    if (dataIO.contains(keyIO)) {\n\n                                        logIO.append(GuardianLog.Type.INFO, &quot;Executing Callback for Initiator '&quot; + keyIO + &quot;'.&quot;);\n\n                                        callbacksIO.get(keyIO).string(socketIO, dataIO);\n                                    }\n                                }\n                            }\n                        }\n\n                        // Sleep for 100 Milliseconds (CPU Usage)\n                        Thread.sleep(100);\n                    }\n\n                    inputIO.reset();\n                    inputIO.close();\n\n                    if (!socketIO.isClosed()) {\n                        socketIO.close();\n                    }\n\n                    disconnected(socketIO);\n\n                    threadIO.stop();\n                } catch (IOException | InterruptedException errorIO) {\n                    if (errorIO.getMessage().equalsIgnoreCase(&quot;Stream closed.&quot;) || errorIO.getMessage().equalsIgnoreCase(&quot;Connection reset&quot;)) {\n                        logIO.debug(GuardianLog.Type.INFO, &quot;Client was disconnected from Server with Address &quot; + networkIO.getAddress().getHostAddress() + &quot; on Port &quot; + networkIO.getPort() + &quot;.&quot;);\n\n                        disconnected(socketIO);\n                    } else logIO.append(GuardianLog.Type.ERROR, &quot;Socket throw an Error &quot;, errorIO);\n                }\n            }\n        });\n</code></pre>\n<p>But this works for HTTPS:</p>\n<pre><code>new Thread(new Runnable() {\n                        @Override\n                        public void run() {\n                            try {\n                                BufferedReader readerIO = new BufferedReader(new InputStreamReader(handshakeIO.getSocket().getInputStream()));\n\n                                System.out.println(&quot;AAA&quot;);\n\n                                String lineIO = null;\n                                while ((lineIO = readerIO.readLine()) != null) {\n                                    System.out.println(readerIO.readLine());\n                                }\n                            } catch (IOException e) {\n                                e.printStackTrace();\n                            }\n                        }\n                    }).start();\n</code></pre>\n<p>Don't know why, but i think something is hanging my functions.</p>\n"}],"owner":{"account_id":16824948,"reputation":405,"user_id":12164467,"display_name":"Jan Heil"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":131,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1635960352,"creation_date":1635877890,"question_id":69815369,"body_markdown":"I am currently writing a Framework with some Network and reflection utils.\r\n\r\nAs an example for my Network Class, I like to write an HTTP/S Client.\r\n\r\nCurrently, the Server is accepting the Client Handshake, but if I send an HTTP Header the Server don&#39;t answer.\r\n\r\nI tried to Debug with some Javax SSL Extension Properties, but it seems okay for me.\r\n\r\n\r\nHeaders (Working on normal HTTP):\r\n\r\n&gt;     GET /index.html HTTP/1.1\r\n&gt;     Host: www.xxx.de\r\n&gt;     Connection: Keep-Alive\r\n&gt;     User-Agent: Mozilla/4.0 (compatible; MSIE5.01; Windows NT)\r\n&gt;     Accept-Language: en-u\r\n\r\n\r\nThe Server is receiving the Request, but the Java Part didn&#39;t recognise the Response...\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n        &quot;C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe&quot; -javaagent:D:\\JetBrains\\apps\\IDEA-U\\ch-1\\213.5281.15\\lib\\idea_rt.jar=1044:D:\\JetBrains\\apps\\IDEA-U\\ch-1\\213.5281.15\\bin -Dfile.encoding=UTF-8 -classpath &quot;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\charsets.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\deploy.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\access-bridge-64.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\cldrdata.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\dnsns.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\jaccess.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\jfxrt.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\localedata.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\nashorn.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\sunec.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\sunjce_provider.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\sunmscapi.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\sunpkcs11.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\zipfs.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\javaws.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\jce.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\jfr.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\jfxswt.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\jsse.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\management-agent.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\plugin.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\resources.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\rt.jar;F:\\Programmieren\\MyTrioX\\ProxMox\\target\\classes;F:\\Programmieren\\MyTrioX\\Extra\\target\\classes;F:\\Programmieren\\MyTrioX\\Slave\\target\\classes&quot; de.bytestore.mytriox.proxmox.ProxMox\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:41.072 CET|SSLCipher.java:438|jdk.tls.keyLimits:  entry = AES/GCM/NoPadding KeyUpdate 2^37. AES/GCM/NOPADDING:KEYUPDATE = 137438953472\r\n    BBB\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.543 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_AES_128_GCM_SHA256 for TLS12\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.544 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_AES_256_GCM_SHA384 for TLS12\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.550 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_AES_128_GCM_SHA256 for TLS11\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.550 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_AES_256_GCM_SHA384 for TLS11\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.550 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384 for TLS11\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.550 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256 for TLS11\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.551 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384 for TLS11\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.551 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_RSA_WITH_AES_256_GCM_SHA384 for TLS11\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.551 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384 for TLS11\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.551 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384 for TLS11\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.551 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_RSA_WITH_AES_256_GCM_SHA384 for TLS11\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.551 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_DSS_WITH_AES_256_GCM_SHA384 for TLS11\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.551 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 for TLS11\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.552 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_RSA_WITH_AES_128_GCM_SHA256 for TLS11\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.552 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256 for TLS11\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.552 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256 for TLS11\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.552 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_GCM_SHA256 for TLS11\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.552 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_GCM_SHA256 for TLS11\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.552 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384 for TLS11\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.552 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384 for TLS11\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.553 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA256 for TLS11\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.553 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384 for TLS11\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.553 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384 for TLS11\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.553 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA256 for TLS11\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.553 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA256 for TLS11\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.554 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_AES_128_GCM_SHA256 for TLS10\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.554 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_AES_256_GCM_SHA384 for TLS10\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.554 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384 for TLS10\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.554 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256 for TLS10\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.554 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384 for TLS10\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.555 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_RSA_WITH_AES_256_GCM_SHA384 for TLS10\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.555 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384 for TLS10\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.555 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384 for TLS10\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.555 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_RSA_WITH_AES_256_GCM_SHA384 for TLS10\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.555 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_DSS_WITH_AES_256_GCM_SHA384 for TLS10\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.555 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 for TLS10\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.556 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_RSA_WITH_AES_128_GCM_SHA256 for TLS10\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.556 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256 for TLS10\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.556 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256 for TLS10\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.556 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_GCM_SHA256 for TLS10\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.556 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_GCM_SHA256 for TLS10\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.557 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384 for TLS10\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.557 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384 for TLS10\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.557 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA256 for TLS10\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.557 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384 for TLS10\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.557 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384 for TLS10\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.558 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA256 for TLS10\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.558 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA256 for TLS10\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.559 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_AES_128_GCM_SHA256 for SSL30\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.559 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_AES_256_GCM_SHA384 for SSL30\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.559 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384 for SSL30\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.559 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256 for SSL30\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.559 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384 for SSL30\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.559 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_RSA_WITH_AES_256_GCM_SHA384 for SSL30\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.559 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384 for SSL30\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.560 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384 for SSL30\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.560 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_RSA_WITH_AES_256_GCM_SHA384 for SSL30\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.560 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_DSS_WITH_AES_256_GCM_SHA384 for SSL30\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.560 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 for SSL30\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.560 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_RSA_WITH_AES_128_GCM_SHA256 for SSL30\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.560 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256 for SSL30\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.560 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256 for SSL30\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.561 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_GCM_SHA256 for SSL30\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.561 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_GCM_SHA256 for SSL30\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.561 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384 for SSL30\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.561 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384 for SSL30\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.561 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA256 for SSL30\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.561 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384 for SSL30\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.561 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384 for SSL30\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.561 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA256 for SSL30\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.562 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA256 for SSL30\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.708 CET|SSLCipher.java:1817|KeyLimit read side: algorithm = AES/GCM/NOPADDING:KEYUPDATE\r\n    countdown value = 137438953472\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.710 CET|SSLCipher.java:1971|KeyLimit write side: algorithm = AES/GCM/NOPADDING:KEYUPDATE\r\n    countdown value = 137438953472\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.769 CET|SSLCipher.java:1817|KeyLimit read side: algorithm = AES/GCM/NOPADDING:KEYUPDATE\r\n    countdown value = 137438953472\r\n    javax.net.ssl|FINE|01|main|2021-11-02 19:29:42.773 CET|SSLCipher.java:1971|KeyLimit write side: algorithm = AES/GCM/NOPADDING:KEYUPDATE\r\n    countdown value = 137438953472\r\n    [SUCCESS]: Handshake with Server 173.212.219.135 via Method TLS_AES_256_GCM_SHA384 was correct.\r\n    [INFO]: Starting Client Socket connecting to Address 173.212.219.135 on Port 443.\r\n    [SUCCESS]: Client connected to Address www.byte-store.de/173.212.219.135 on Port 443.\r\n    WRITE\r\n    GET /index.html HTTP/1.1\r\n    Host: www.byte-store.de\r\n    Connection: Keep-Alive\r\n    User-Agent: Mozilla/4.0 (compatible; MSIE5.01; Windows NT)\r\n    Accept-Language: en-us\r\n\r\n\r\nClientSocket.class:\r\n\r\n    package de.bytestore.mytriox.network.client;\r\n    \r\n   \r\n    public class ClientSocket {\r\n        private ArrayList&lt;ClientInterface&gt; listenerIO = new ArrayList&lt;ClientInterface&gt;();\r\n    \r\n        private InetSocketAddress networkIO;\r\n        private Socket socketIO;\r\n    \r\n        private int timeoutIO = 0;\r\n        private Thread threadIO;\r\n        private Timer timerIO;\r\n    \r\n        // Define Secure Settings of Socket.\r\n        private boolean secureIO = false;\r\n    \r\n        private CertificateUtils certificateIO = new CertificateUtils();\r\n    \r\n        private boolean binaryIO = false;\r\n        private boolean stringIO = false;\r\n    \r\n        // Store Client Callbacks for String as Initiator.\r\n        private HashMap&lt;String, ClientCallback&gt; callbacksIO = new HashMap&lt;String, ClientCallback&gt;();\r\n    \r\n        private OutputStream outputIO = null;\r\n    \r\n        public ClientSocket(InetSocketAddress networkIO) {\r\n            this.networkIO = networkIO;\r\n        }\r\n    \r\n        public ClientSocket(String addressIO, int portIO) {\r\n            this.networkIO = new InetSocketAddress(addressIO, portIO);\r\n        }\r\n    \r\n    \r\n        public void setBinary(boolean binaryIO) {\r\n            this.binaryIO = binaryIO;\r\n        }\r\n    \r\n        public void setString(boolean stringIO) {\r\n            this.stringIO = stringIO;\r\n        }\r\n    \r\n        public void setSecure(boolean stateIO) {\r\n            this.secureIO = stateIO;\r\n        }\r\n    \r\n        public boolean isSecure() {\r\n            return secureIO;\r\n        }\r\n    \r\n        /**\r\n         * Set Timeout of Socket in Seconds.\r\n         *\r\n         * @param timeoutIO\r\n         */\r\n        public void setTimeout(int timeoutIO) {\r\n            this.timeoutIO = timeoutIO * 1000;\r\n        }\r\n    \r\n        public void connect() {\r\n            try {\r\n    \r\n                if (secureIO) {\r\n                    this.certificateIO = new CertificateUtils(&quot;TLS&quot;, &quot;JKS&quot;, &quot;12345678&quot;, new FileManager(&quot;F:\\\\Programmieren\\\\MyTrioX\\\\MyTrioX-CONTROLLER\\\\database\\\\keystore.jks&quot;), new FileManager(&quot;F:\\\\Programmieren\\\\MyTrioX\\\\MyTrioX-CONTROLLER\\\\database\\\\store.jks&quot;));\r\n    \r\n    \r\n                    System.setProperty(&quot;javax.net.ssl.trustStore&quot;, &quot;F:\\\\Programmieren\\\\MyTrioX\\\\MyTrioX-CONTROLLER\\\\configuration\\\\trust.store&quot;);\r\n                    System.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;, &quot;12345678&quot;);\r\n                    System.setProperty(&quot;javax.net.debug&quot;, &quot;ssl # very verbose debug&quot;);\r\n    \r\n                    SSLSocketFactory factoryIO = (SSLSocketFactory) SSLSocketFactory.getDefault();\r\n                    //this.certificateIO.getSocketFactory();\r\n    \r\n                    System.out.println(&quot;BBB&quot;);\r\n    \r\n                    // Create SecureSocket via Factory.\r\n                    this.socketIO = factoryIO.createSocket(this.networkIO.getAddress(), 443);\r\n    \r\n                    // Print Message if Client Handshake was correct.\r\n                    ((SSLSocket) this.socketIO).addHandshakeCompletedListener(new HandshakeCompletedListener() {\r\n                        @Override\r\n                        public void handshakeCompleted(HandshakeCompletedEvent handshakeIO) {\r\n                            logIO.debug(GuardianLog.Type.SUCCESS, &quot;Handshake with Server &quot; + socketIO.getInetAddress().getHostAddress() + &quot; via Method &quot; + handshakeIO.getCipherSuite() + &quot; was correct.&quot;);\r\n                        }\r\n                    });\r\n    \r\n                    ((SSLSocket) this.socketIO).setEnabledCipherSuites(((SSLSocket) this.socketIO).getSupportedCipherSuites());\r\n                    ((SSLSocket) this.socketIO).setEnabledProtocols(((SSLSocket) this.socketIO).getSupportedProtocols());\r\n                    ((SSLSocket) this.socketIO).startHandshake();\r\n    \r\n                    SSLParameters parametersIO = new SSLParameters();\r\n                    parametersIO.setEndpointIdentificationAlgorithm(&quot;HTTPS&quot;);\r\n    \r\n                    ((SSLSocket) this.socketIO).setSSLParameters(parametersIO);\r\n    \r\n                    //SSLEngine engineIO = certificateIO.getEngine();\r\n                    //SSLContext contextIO = certificateIO.getContext();\r\n    \r\n                    //logIO.append(GuardianLog.Type.INFO, &quot;Server &quot; + (((SSLSocket) this.socketIO).getNeedClientAuth() ? &quot;need&quot; : &quot;don&#39;t need&quot;) + &quot; Client Authentication.&quot;);\r\n                    //logIO.debug(GuardianLog.Type.INFO, &quot;Found &quot; + Arrays.toString(engineIO.getSupportedCipherSuites()) + &quot; Supported Cipher Suites for Server Socket.&quot;);\r\n    \r\n    \r\n                    if (CacheHandler.debugIO) {\r\n                        //CertificateUtils.printInfo((SSLSocket) this.socketIO);\r\n                    }\r\n                } else this.socketIO = new Socket(this.networkIO.getAddress(), this.networkIO.getPort());\r\n    \r\n                logIO.debug(GuardianLog.Type.INFO, &quot;Starting Client Socket connecting to Address &quot; + this.networkIO.getAddress().getHostAddress() + &quot; on Port &quot; + this.networkIO.getPort() + &quot;.&quot;);\r\n    \r\n                socketIO.setTcpNoDelay(true);\r\n                socketIO.setKeepAlive(true);\r\n                socketIO.setSoTimeout(timeoutIO);\r\n    \r\n                logIO.debug(GuardianLog.Type.SUCCESS, &quot;Client connected to Address &quot; + networkIO.getAddress() + &quot; on Port &quot; + networkIO.getPort() + &quot;.&quot;);\r\n    \r\n                connected(socketIO);\r\n    \r\n                // Open Output Stream of Socket.\r\n                this.outputIO = socketIO.getOutputStream();\r\n    \r\n                // Open Input Stream of Socket.\r\n                InputStream inputIO = socketIO.getInputStream();\r\n    \r\n                this.threadIO = new Thread(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        try {\r\n                            //while (!socketIO.isClosed() &amp;&amp; readerIO.read() != -1) {\r\n                            while (/**!shutdownIO &amp;&amp;**/socketIO.isConnected() &amp;&amp; !socketIO.isClosed()) {\r\n    \r\n                                // Byte Buffer ho contains read Data.\r\n                                byte[] bufferIO = new byte[inputIO.available()];\r\n    \r\n                                // Read Data into Buffer and store (EOF).\r\n                                int codeIO = inputIO.read(bufferIO);\r\n    \r\n                                //if (bufferIO.length != 0 &amp;&amp; inputIO.available() == 0) {\r\n                                if (bufferIO.length != 0 &amp;&amp; inputIO.available() == 0) {\r\n    \r\n                                    if (binaryIO)\r\n                                        binary(socketIO, bufferIO);\r\n    \r\n                                    if (stringIO)\r\n                                        string(socketIO, new String(bufferIO, charsetIO));\r\n    \r\n                                    if (hasCallbacks()) {\r\n                                        String dataIO = new String(bufferIO);\r\n    \r\n                                        for (String keyIO : callbacksIO.keySet()) {\r\n                                            if (dataIO.contains(keyIO)) {\r\n    \r\n                                                logIO.append(GuardianLog.Type.INFO, &quot;Executing Callback for Initiator &#39;&quot; + keyIO + &quot;&#39;.&quot;);\r\n    \r\n                                                callbacksIO.get(keyIO).string(socketIO, dataIO);\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }\r\n    \r\n                                // Sleep for 100 Milliseconds (CPU Usage)\r\n                                Thread.sleep(100);\r\n                            }\r\n    \r\n                            inputIO.reset();\r\n                            inputIO.close();\r\n    \r\n                            if (!socketIO.isClosed()) {\r\n                                socketIO.close();\r\n                            }\r\n    \r\n                            disconnected(socketIO);\r\n    \r\n                            threadIO.stop();\r\n                        } catch (IOException | InterruptedException errorIO) {\r\n                            if (errorIO.getMessage().equalsIgnoreCase(&quot;Stream closed.&quot;) || errorIO.getMessage().equalsIgnoreCase(&quot;Connection reset&quot;)) {\r\n                                logIO.debug(GuardianLog.Type.INFO, &quot;Client was disconnected from Server with Address &quot; + networkIO.getAddress().getHostAddress() + &quot; on Port &quot; + networkIO.getPort() + &quot;.&quot;);\r\n    \r\n                                disconnected(socketIO);\r\n                            } else logIO.append(GuardianLog.Type.ERROR, &quot;Socket throw an Error &quot;, errorIO);\r\n                        }\r\n                    }\r\n                });\r\n    \r\n                this.threadIO.start();\r\n    \r\n            } catch (IOException errorIO) {\r\n                logIO.append(GuardianLog.Type.ERROR, &quot;Error by connecting to Socket on Port &quot; + this.networkIO.getPort() + &quot;.&quot;, errorIO);\r\n            }\r\n    \r\n        }\r\n    \r\n    \r\n        public void disconnect() {\r\n            try {\r\n                this.outputIO.close();\r\n    \r\n                if (!this.socketIO.isClosed()) {\r\n                    this.socketIO.close();\r\n                }\r\n    \r\n                this.threadIO.stop();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        public void connected(Socket clientIO) {\r\n            for (ClientInterface interfaceIO : listenerIO) {\r\n                interfaceIO.connected(clientIO);\r\n            }\r\n        }\r\n    \r\n        public void disconnected(Socket clientIO) {\r\n            for (ClientInterface interfaceIO : listenerIO) {\r\n                interfaceIO.disconnected(clientIO);\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Call ClientInterfaces with String Method.\r\n         *\r\n         * @param clientIO\r\n         * @param dataIO\r\n         */\r\n        protected void string(Socket clientIO, String dataIO) {\r\n            for (ClientInterface interfaceIO : listenerIO) {\r\n                interfaceIO.string(clientIO, dataIO);\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Call ClientInterfaces with Binary Method.\r\n         *\r\n         * @param clientIO\r\n         * @param binaryIO\r\n         */\r\n        protected void binary(Socket clientIO, byte[] binaryIO) {\r\n            for (ClientInterface interfaceIO : this.listenerIO) {\r\n                interfaceIO.binary(clientIO, binaryIO);\r\n            }\r\n        }\r\n    \r\n    \r\n        public void registerListener(ClientInterface clientIO) {\r\n            this.listenerIO.add(clientIO);\r\n        }\r\n    \r\n        public void unregisterListener(ClientInterface clientIO) {\r\n            this.listenerIO.remove(clientIO);\r\n        }\r\n    \r\n        public void unregisterListeners() {\r\n            this.listenerIO = new ArrayList&lt;ClientInterface&gt;();\r\n        }\r\n    \r\n        public boolean getState() {\r\n            if (this.socketIO != null) {\r\n                return (!this.socketIO.isClosed() &amp;&amp; this.socketIO.isConnected());\r\n            }\r\n            return false;\r\n        }\r\n    \r\n        public Socket getSocket() {\r\n            return socketIO;\r\n        }\r\n    \r\n        public boolean hasCallbacks() {\r\n            return !(this.callbacksIO.isEmpty());\r\n        }\r\n    \r\n        public boolean hasCallback(String initiatorIO) {\r\n            return this.callbacksIO.containsKey(initiatorIO);\r\n        }\r\n    \r\n        public ClientCallbackInterface addCallback(String initiatorIO, ClientCallback callbackIO) {\r\n            this.callbacksIO.put(initiatorIO, callbackIO);\r\n    \r\n            logIO.append(GuardianLog.Type.INFO, &quot;Added Callback with Initiator &#39;&quot; + initiatorIO + &quot;&#39; to callbacks.&quot;);\r\n    \r\n            return callbackIO;\r\n        }\r\n    \r\n        public void removeCallback(String initiatorIO) {\r\n            this.callbacksIO.remove(initiatorIO);\r\n        }\r\n    \r\n    \r\n        protected HashMap&lt;String, ClientCallback&gt; getCallbacks() {\r\n            return this.callbacksIO;\r\n        }\r\n    \r\n        public InetSocketAddress getNetwork() {\r\n            return this.networkIO;\r\n        }\r\n    \r\n        public void setNetwork(InetSocketAddress networkIO) {\r\n            this.networkIO = networkIO;\r\n        }\r\n    \r\n        public void write(String dataIO) {\r\n            this.write(dataIO.getBytes(charsetIO));\r\n        }\r\n    \r\n        public void write(byte[] dataIO) {\r\n            try {\r\n                this.outputIO.write(dataIO);\r\n            } catch (IOException exceptionIO) {\r\n                logIO.append(GuardianLog.Type.ERROR, &quot;Can&#39;t write to Server.&quot;, exceptionIO);\r\n            }\r\n        }\r\n    \r\n        public void flush() {\r\n            try {\r\n                this.outputIO.flush();\r\n            } catch (IOException exceptionIO) {\r\n                logIO.append(GuardianLog.Type.ERROR, &quot;Can&#39;t flush Output Stream from Socket.&quot;, exceptionIO);\r\n            }\r\n        }\r\n    \r\n        protected OutputStream getOutputIO() {\r\n            return this.outputIO;\r\n        }\r\n    \r\n    \r\n    }\r\n\r\nProxMox.class (Example):\r\n\r\n    package de.bytestore.mytriox.proxmox;\r\n    \r\n\r\n    \r\n    public class ProxMox extends Module {\r\n        public static void main(String[] args) throws MalformedURLException {\r\n            WebClient clientIO = new WebClient(new URL(&quot;https://www.byte-store.de/index.html&quot;));\r\n    \r\n    \r\n            // host1.byte-system.de:8006\r\n            WebHeader headerIO = clientIO.request();\r\n    \r\n            System.out.println(headerIO.getBody());\r\n        }\r\n         \r\n    \r\n    }\r\n\r\nWebClient.class\r\nPlese look Pastebin, because i am limited in Chars.\r\n\r\n[Pastebin  Link][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qdPss.png\r\n  [2]: https://pastebin.com/D9aeb5BQ","title":"Java HTTPS Client wit Secure Socket","body":"<p>I am currently writing a Framework with some Network and reflection utils.</p>\n<p>As an example for my Network Class, I like to write an HTTP/S Client.</p>\n<p>Currently, the Server is accepting the Client Handshake, but if I send an HTTP Header the Server don't answer.</p>\n<p>I tried to Debug with some Javax SSL Extension Properties, but it seems okay for me.</p>\n<p>Headers (Working on normal HTTP):</p>\n<blockquote>\n<pre><code>GET /index.html HTTP/1.1\nHost: www.xxx.de\nConnection: Keep-Alive\nUser-Agent: Mozilla/4.0 (compatible; MSIE5.01; Windows NT)\nAccept-Language: en-u\n</code></pre>\n</blockquote>\n<p>The Server is receiving the Request, but the Java Part didn't recognise the Response...</p>\n<p><a href=\"https://i.stack.imgur.com/qdPss.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qdPss.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>    &quot;C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe&quot; -javaagent:D:\\JetBrains\\apps\\IDEA-U\\ch-1\\213.5281.15\\lib\\idea_rt.jar=1044:D:\\JetBrains\\apps\\IDEA-U\\ch-1\\213.5281.15\\bin -Dfile.encoding=UTF-8 -classpath &quot;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\charsets.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\deploy.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\access-bridge-64.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\cldrdata.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\dnsns.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\jaccess.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\jfxrt.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\localedata.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\nashorn.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\sunec.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\sunjce_provider.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\sunmscapi.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\sunpkcs11.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\ext\\zipfs.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\javaws.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\jce.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\jfr.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\jfxswt.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\jsse.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\management-agent.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\plugin.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\resources.jar;C:\\Program Files\\Java\\jdk1.8.0_291\\jre\\lib\\rt.jar;F:\\Programmieren\\MyTrioX\\ProxMox\\target\\classes;F:\\Programmieren\\MyTrioX\\Extra\\target\\classes;F:\\Programmieren\\MyTrioX\\Slave\\target\\classes&quot; de.bytestore.mytriox.proxmox.ProxMox\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:41.072 CET|SSLCipher.java:438|jdk.tls.keyLimits:  entry = AES/GCM/NoPadding KeyUpdate 2^37. AES/GCM/NOPADDING:KEYUPDATE = 137438953472\nBBB\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.543 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_AES_128_GCM_SHA256 for TLS12\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.544 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_AES_256_GCM_SHA384 for TLS12\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.550 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_AES_128_GCM_SHA256 for TLS11\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.550 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_AES_256_GCM_SHA384 for TLS11\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.550 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384 for TLS11\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.550 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256 for TLS11\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.551 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384 for TLS11\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.551 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_RSA_WITH_AES_256_GCM_SHA384 for TLS11\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.551 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384 for TLS11\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.551 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384 for TLS11\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.551 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_RSA_WITH_AES_256_GCM_SHA384 for TLS11\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.551 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_DSS_WITH_AES_256_GCM_SHA384 for TLS11\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.551 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 for TLS11\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.552 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_RSA_WITH_AES_128_GCM_SHA256 for TLS11\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.552 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256 for TLS11\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.552 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256 for TLS11\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.552 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_GCM_SHA256 for TLS11\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.552 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_GCM_SHA256 for TLS11\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.552 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384 for TLS11\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.552 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384 for TLS11\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.553 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA256 for TLS11\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.553 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384 for TLS11\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.553 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384 for TLS11\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.553 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA256 for TLS11\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.553 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA256 for TLS11\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.554 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_AES_128_GCM_SHA256 for TLS10\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.554 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_AES_256_GCM_SHA384 for TLS10\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.554 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384 for TLS10\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.554 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256 for TLS10\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.554 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384 for TLS10\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.555 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_RSA_WITH_AES_256_GCM_SHA384 for TLS10\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.555 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384 for TLS10\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.555 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384 for TLS10\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.555 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_RSA_WITH_AES_256_GCM_SHA384 for TLS10\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.555 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_DSS_WITH_AES_256_GCM_SHA384 for TLS10\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.555 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 for TLS10\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.556 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_RSA_WITH_AES_128_GCM_SHA256 for TLS10\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.556 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256 for TLS10\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.556 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256 for TLS10\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.556 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_GCM_SHA256 for TLS10\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.556 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_GCM_SHA256 for TLS10\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.557 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384 for TLS10\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.557 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384 for TLS10\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.557 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA256 for TLS10\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.557 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384 for TLS10\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.557 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384 for TLS10\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.558 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA256 for TLS10\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.558 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA256 for TLS10\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.559 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_AES_128_GCM_SHA256 for SSL30\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.559 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_AES_256_GCM_SHA384 for SSL30\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.559 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384 for SSL30\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.559 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256 for SSL30\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.559 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384 for SSL30\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.559 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_RSA_WITH_AES_256_GCM_SHA384 for SSL30\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.559 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384 for SSL30\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.560 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384 for SSL30\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.560 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_RSA_WITH_AES_256_GCM_SHA384 for SSL30\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.560 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_DSS_WITH_AES_256_GCM_SHA384 for SSL30\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.560 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 for SSL30\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.560 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_RSA_WITH_AES_128_GCM_SHA256 for SSL30\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.560 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256 for SSL30\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.560 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256 for SSL30\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.561 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_GCM_SHA256 for SSL30\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.561 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_GCM_SHA256 for SSL30\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.561 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384 for SSL30\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.561 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384 for SSL30\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.561 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA256 for SSL30\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.561 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384 for SSL30\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.561 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384 for SSL30\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.561 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA256 for SSL30\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.562 CET|HandshakeContext.java:297|Ignore unsupported cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA256 for SSL30\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.708 CET|SSLCipher.java:1817|KeyLimit read side: algorithm = AES/GCM/NOPADDING:KEYUPDATE\ncountdown value = 137438953472\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.710 CET|SSLCipher.java:1971|KeyLimit write side: algorithm = AES/GCM/NOPADDING:KEYUPDATE\ncountdown value = 137438953472\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.769 CET|SSLCipher.java:1817|KeyLimit read side: algorithm = AES/GCM/NOPADDING:KEYUPDATE\ncountdown value = 137438953472\njavax.net.ssl|FINE|01|main|2021-11-02 19:29:42.773 CET|SSLCipher.java:1971|KeyLimit write side: algorithm = AES/GCM/NOPADDING:KEYUPDATE\ncountdown value = 137438953472\n[SUCCESS]: Handshake with Server 173.212.219.135 via Method TLS_AES_256_GCM_SHA384 was correct.\n[INFO]: Starting Client Socket connecting to Address 173.212.219.135 on Port 443.\n[SUCCESS]: Client connected to Address www.byte-store.de/173.212.219.135 on Port 443.\nWRITE\nGET /index.html HTTP/1.1\nHost: www.byte-store.de\nConnection: Keep-Alive\nUser-Agent: Mozilla/4.0 (compatible; MSIE5.01; Windows NT)\nAccept-Language: en-us\n</code></pre>\n<p>ClientSocket.class:</p>\n<pre><code>package de.bytestore.mytriox.network.client;\n\n\npublic class ClientSocket {\n    private ArrayList&lt;ClientInterface&gt; listenerIO = new ArrayList&lt;ClientInterface&gt;();\n\n    private InetSocketAddress networkIO;\n    private Socket socketIO;\n\n    private int timeoutIO = 0;\n    private Thread threadIO;\n    private Timer timerIO;\n\n    // Define Secure Settings of Socket.\n    private boolean secureIO = false;\n\n    private CertificateUtils certificateIO = new CertificateUtils();\n\n    private boolean binaryIO = false;\n    private boolean stringIO = false;\n\n    // Store Client Callbacks for String as Initiator.\n    private HashMap&lt;String, ClientCallback&gt; callbacksIO = new HashMap&lt;String, ClientCallback&gt;();\n\n    private OutputStream outputIO = null;\n\n    public ClientSocket(InetSocketAddress networkIO) {\n        this.networkIO = networkIO;\n    }\n\n    public ClientSocket(String addressIO, int portIO) {\n        this.networkIO = new InetSocketAddress(addressIO, portIO);\n    }\n\n\n    public void setBinary(boolean binaryIO) {\n        this.binaryIO = binaryIO;\n    }\n\n    public void setString(boolean stringIO) {\n        this.stringIO = stringIO;\n    }\n\n    public void setSecure(boolean stateIO) {\n        this.secureIO = stateIO;\n    }\n\n    public boolean isSecure() {\n        return secureIO;\n    }\n\n    /**\n     * Set Timeout of Socket in Seconds.\n     *\n     * @param timeoutIO\n     */\n    public void setTimeout(int timeoutIO) {\n        this.timeoutIO = timeoutIO * 1000;\n    }\n\n    public void connect() {\n        try {\n\n            if (secureIO) {\n                this.certificateIO = new CertificateUtils(&quot;TLS&quot;, &quot;JKS&quot;, &quot;12345678&quot;, new FileManager(&quot;F:\\\\Programmieren\\\\MyTrioX\\\\MyTrioX-CONTROLLER\\\\database\\\\keystore.jks&quot;), new FileManager(&quot;F:\\\\Programmieren\\\\MyTrioX\\\\MyTrioX-CONTROLLER\\\\database\\\\store.jks&quot;));\n\n\n                System.setProperty(&quot;javax.net.ssl.trustStore&quot;, &quot;F:\\\\Programmieren\\\\MyTrioX\\\\MyTrioX-CONTROLLER\\\\configuration\\\\trust.store&quot;);\n                System.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;, &quot;12345678&quot;);\n                System.setProperty(&quot;javax.net.debug&quot;, &quot;ssl # very verbose debug&quot;);\n\n                SSLSocketFactory factoryIO = (SSLSocketFactory) SSLSocketFactory.getDefault();\n                //this.certificateIO.getSocketFactory();\n\n                System.out.println(&quot;BBB&quot;);\n\n                // Create SecureSocket via Factory.\n                this.socketIO = factoryIO.createSocket(this.networkIO.getAddress(), 443);\n\n                // Print Message if Client Handshake was correct.\n                ((SSLSocket) this.socketIO).addHandshakeCompletedListener(new HandshakeCompletedListener() {\n                    @Override\n                    public void handshakeCompleted(HandshakeCompletedEvent handshakeIO) {\n                        logIO.debug(GuardianLog.Type.SUCCESS, &quot;Handshake with Server &quot; + socketIO.getInetAddress().getHostAddress() + &quot; via Method &quot; + handshakeIO.getCipherSuite() + &quot; was correct.&quot;);\n                    }\n                });\n\n                ((SSLSocket) this.socketIO).setEnabledCipherSuites(((SSLSocket) this.socketIO).getSupportedCipherSuites());\n                ((SSLSocket) this.socketIO).setEnabledProtocols(((SSLSocket) this.socketIO).getSupportedProtocols());\n                ((SSLSocket) this.socketIO).startHandshake();\n\n                SSLParameters parametersIO = new SSLParameters();\n                parametersIO.setEndpointIdentificationAlgorithm(&quot;HTTPS&quot;);\n\n                ((SSLSocket) this.socketIO).setSSLParameters(parametersIO);\n\n                //SSLEngine engineIO = certificateIO.getEngine();\n                //SSLContext contextIO = certificateIO.getContext();\n\n                //logIO.append(GuardianLog.Type.INFO, &quot;Server &quot; + (((SSLSocket) this.socketIO).getNeedClientAuth() ? &quot;need&quot; : &quot;don't need&quot;) + &quot; Client Authentication.&quot;);\n                //logIO.debug(GuardianLog.Type.INFO, &quot;Found &quot; + Arrays.toString(engineIO.getSupportedCipherSuites()) + &quot; Supported Cipher Suites for Server Socket.&quot;);\n\n\n                if (CacheHandler.debugIO) {\n                    //CertificateUtils.printInfo((SSLSocket) this.socketIO);\n                }\n            } else this.socketIO = new Socket(this.networkIO.getAddress(), this.networkIO.getPort());\n\n            logIO.debug(GuardianLog.Type.INFO, &quot;Starting Client Socket connecting to Address &quot; + this.networkIO.getAddress().getHostAddress() + &quot; on Port &quot; + this.networkIO.getPort() + &quot;.&quot;);\n\n            socketIO.setTcpNoDelay(true);\n            socketIO.setKeepAlive(true);\n            socketIO.setSoTimeout(timeoutIO);\n\n            logIO.debug(GuardianLog.Type.SUCCESS, &quot;Client connected to Address &quot; + networkIO.getAddress() + &quot; on Port &quot; + networkIO.getPort() + &quot;.&quot;);\n\n            connected(socketIO);\n\n            // Open Output Stream of Socket.\n            this.outputIO = socketIO.getOutputStream();\n\n            // Open Input Stream of Socket.\n            InputStream inputIO = socketIO.getInputStream();\n\n            this.threadIO = new Thread(new Runnable() {\n                @Override\n                public void run() {\n                    try {\n                        //while (!socketIO.isClosed() &amp;&amp; readerIO.read() != -1) {\n                        while (/**!shutdownIO &amp;&amp;**/socketIO.isConnected() &amp;&amp; !socketIO.isClosed()) {\n\n                            // Byte Buffer ho contains read Data.\n                            byte[] bufferIO = new byte[inputIO.available()];\n\n                            // Read Data into Buffer and store (EOF).\n                            int codeIO = inputIO.read(bufferIO);\n\n                            //if (bufferIO.length != 0 &amp;&amp; inputIO.available() == 0) {\n                            if (bufferIO.length != 0 &amp;&amp; inputIO.available() == 0) {\n\n                                if (binaryIO)\n                                    binary(socketIO, bufferIO);\n\n                                if (stringIO)\n                                    string(socketIO, new String(bufferIO, charsetIO));\n\n                                if (hasCallbacks()) {\n                                    String dataIO = new String(bufferIO);\n\n                                    for (String keyIO : callbacksIO.keySet()) {\n                                        if (dataIO.contains(keyIO)) {\n\n                                            logIO.append(GuardianLog.Type.INFO, &quot;Executing Callback for Initiator '&quot; + keyIO + &quot;'.&quot;);\n\n                                            callbacksIO.get(keyIO).string(socketIO, dataIO);\n                                        }\n                                    }\n                                }\n                            }\n\n                            // Sleep for 100 Milliseconds (CPU Usage)\n                            Thread.sleep(100);\n                        }\n\n                        inputIO.reset();\n                        inputIO.close();\n\n                        if (!socketIO.isClosed()) {\n                            socketIO.close();\n                        }\n\n                        disconnected(socketIO);\n\n                        threadIO.stop();\n                    } catch (IOException | InterruptedException errorIO) {\n                        if (errorIO.getMessage().equalsIgnoreCase(&quot;Stream closed.&quot;) || errorIO.getMessage().equalsIgnoreCase(&quot;Connection reset&quot;)) {\n                            logIO.debug(GuardianLog.Type.INFO, &quot;Client was disconnected from Server with Address &quot; + networkIO.getAddress().getHostAddress() + &quot; on Port &quot; + networkIO.getPort() + &quot;.&quot;);\n\n                            disconnected(socketIO);\n                        } else logIO.append(GuardianLog.Type.ERROR, &quot;Socket throw an Error &quot;, errorIO);\n                    }\n                }\n            });\n\n            this.threadIO.start();\n\n        } catch (IOException errorIO) {\n            logIO.append(GuardianLog.Type.ERROR, &quot;Error by connecting to Socket on Port &quot; + this.networkIO.getPort() + &quot;.&quot;, errorIO);\n        }\n\n    }\n\n\n    public void disconnect() {\n        try {\n            this.outputIO.close();\n\n            if (!this.socketIO.isClosed()) {\n                this.socketIO.close();\n            }\n\n            this.threadIO.stop();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public void connected(Socket clientIO) {\n        for (ClientInterface interfaceIO : listenerIO) {\n            interfaceIO.connected(clientIO);\n        }\n    }\n\n    public void disconnected(Socket clientIO) {\n        for (ClientInterface interfaceIO : listenerIO) {\n            interfaceIO.disconnected(clientIO);\n        }\n    }\n\n    /**\n     * Call ClientInterfaces with String Method.\n     *\n     * @param clientIO\n     * @param dataIO\n     */\n    protected void string(Socket clientIO, String dataIO) {\n        for (ClientInterface interfaceIO : listenerIO) {\n            interfaceIO.string(clientIO, dataIO);\n        }\n    }\n\n    /**\n     * Call ClientInterfaces with Binary Method.\n     *\n     * @param clientIO\n     * @param binaryIO\n     */\n    protected void binary(Socket clientIO, byte[] binaryIO) {\n        for (ClientInterface interfaceIO : this.listenerIO) {\n            interfaceIO.binary(clientIO, binaryIO);\n        }\n    }\n\n\n    public void registerListener(ClientInterface clientIO) {\n        this.listenerIO.add(clientIO);\n    }\n\n    public void unregisterListener(ClientInterface clientIO) {\n        this.listenerIO.remove(clientIO);\n    }\n\n    public void unregisterListeners() {\n        this.listenerIO = new ArrayList&lt;ClientInterface&gt;();\n    }\n\n    public boolean getState() {\n        if (this.socketIO != null) {\n            return (!this.socketIO.isClosed() &amp;&amp; this.socketIO.isConnected());\n        }\n        return false;\n    }\n\n    public Socket getSocket() {\n        return socketIO;\n    }\n\n    public boolean hasCallbacks() {\n        return !(this.callbacksIO.isEmpty());\n    }\n\n    public boolean hasCallback(String initiatorIO) {\n        return this.callbacksIO.containsKey(initiatorIO);\n    }\n\n    public ClientCallbackInterface addCallback(String initiatorIO, ClientCallback callbackIO) {\n        this.callbacksIO.put(initiatorIO, callbackIO);\n\n        logIO.append(GuardianLog.Type.INFO, &quot;Added Callback with Initiator '&quot; + initiatorIO + &quot;' to callbacks.&quot;);\n\n        return callbackIO;\n    }\n\n    public void removeCallback(String initiatorIO) {\n        this.callbacksIO.remove(initiatorIO);\n    }\n\n\n    protected HashMap&lt;String, ClientCallback&gt; getCallbacks() {\n        return this.callbacksIO;\n    }\n\n    public InetSocketAddress getNetwork() {\n        return this.networkIO;\n    }\n\n    public void setNetwork(InetSocketAddress networkIO) {\n        this.networkIO = networkIO;\n    }\n\n    public void write(String dataIO) {\n        this.write(dataIO.getBytes(charsetIO));\n    }\n\n    public void write(byte[] dataIO) {\n        try {\n            this.outputIO.write(dataIO);\n        } catch (IOException exceptionIO) {\n            logIO.append(GuardianLog.Type.ERROR, &quot;Can't write to Server.&quot;, exceptionIO);\n        }\n    }\n\n    public void flush() {\n        try {\n            this.outputIO.flush();\n        } catch (IOException exceptionIO) {\n            logIO.append(GuardianLog.Type.ERROR, &quot;Can't flush Output Stream from Socket.&quot;, exceptionIO);\n        }\n    }\n\n    protected OutputStream getOutputIO() {\n        return this.outputIO;\n    }\n\n\n}\n</code></pre>\n<p>ProxMox.class (Example):</p>\n<pre><code>package de.bytestore.mytriox.proxmox;\n\n\n\npublic class ProxMox extends Module {\n    public static void main(String[] args) throws MalformedURLException {\n        WebClient clientIO = new WebClient(new URL(&quot;https://www.byte-store.de/index.html&quot;));\n\n\n        // host1.byte-system.de:8006\n        WebHeader headerIO = clientIO.request();\n\n        System.out.println(headerIO.getBody());\n    }\n     \n\n}\n</code></pre>\n<p>WebClient.class\nPlese look Pastebin, because i am limited in Chars.</p>\n<p><a href=\"https://pastebin.com/D9aeb5BQ\" rel=\"nofollow noreferrer\">Pastebin  Link</a></p>\n"},{"tags":["java","spring-data-jpa","javers"],"answers":[{"tags":[],"owner":{"account_id":5338007,"reputation":3416,"user_id":4256260,"display_name":"Bartek Walacik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635959951,"creation_date":1635959951,"answer_id":69829106,"question_id":69822745,"body_markdown":"You can&#39;t do it. Javers&#39; Snapshots are immutable by design.","title":"Is it possible to change the javers history?","body":"<p>You can't do it. Javers' Snapshots are immutable by design.</p>\n"}],"owner":{"account_id":14930126,"reputation":3,"user_id":10779748,"display_name":"25Schmeckles"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69829106,"answer_count":1,"score":0,"last_activity_date":1635959951,"creation_date":1635933005,"question_id":69822745,"body_markdown":"I am working on a rest backend using spring boot/jpa. I also use javers to audit my JpaRespositories.\r\n\r\nI am not entirely sure, if javers is intended for this purpose, but in addition to auditing my jpa entities i would also like to be able to edit the history. \r\n\r\nFor example, i would like to get a Shadow-Object from a certain date:\r\n```\r\njavers.findShadows(QueryBuilder.byInstanceId(&quot;Frodo&quot;, Employee.class).withShadowScope(ShadowScope.DEEP_PLUS).from(date).build());\r\n```\r\n\r\nThen i would like to change the returned Shadow-Object and somehow &#39;write it back&#39; into the history, so that when i execute the above statement again, i would get back the edited version. \r\n\r\nAny Ideas if that kind of behaviour is possible?\r\n\r\n","title":"Is it possible to change the javers history?","body":"<p>I am working on a rest backend using spring boot/jpa. I also use javers to audit my JpaRespositories.</p>\n<p>I am not entirely sure, if javers is intended for this purpose, but in addition to auditing my jpa entities i would also like to be able to edit the history.</p>\n<p>For example, i would like to get a Shadow-Object from a certain date:</p>\n<pre><code>javers.findShadows(QueryBuilder.byInstanceId(&quot;Frodo&quot;, Employee.class).withShadowScope(ShadowScope.DEEP_PLUS).from(date).build());\n</code></pre>\n<p>Then i would like to change the returned Shadow-Object and somehow 'write it back' into the history, so that when i execute the above statement again, i would get back the edited version.</p>\n<p>Any Ideas if that kind of behaviour is possible?</p>\n"},{"tags":["java","javafx","slider"],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1635959610,"creation_date":1635958303,"answer_id":69828753,"question_id":69827663,"body_markdown":"One option that I can think of is to have the actual value of the slider be the *index* of the real value you want. Use a formatter to show the real value. You would need to convert the slider value (the index) to the actual value when you process it.\r\n\r\nHere&#39;s a quick example:\r\n\r\n\r\n    import javafx.application.Application;\r\n    import javafx.geometry.Insets;\r\n    import javafx.geometry.Pos;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Label;\r\n    import javafx.scene.control.Slider;\r\n    import javafx.scene.layout.VBox;\r\n    import javafx.stage.Stage;\r\n    import javafx.util.StringConverter;\r\n    \r\n    \r\n    /**\r\n     * JavaFX App\r\n     */\r\n    public class App extends Application {\r\n    \r\n        @Override\r\n        public void start(Stage stage) {\r\n            double[] timepoints = {0.0, 1.9, 2.5, 50.1, 98.7};\r\n            \r\n            Slider slider = new Slider();\r\n            slider.setMin(0);\r\n            slider.setMax(timepoints.length - 1);\r\n            slider.setSnapToTicks(true);\r\n            slider.setMajorTickUnit(1);\r\n            slider.setMinorTickCount(0);\r\n            slider.setShowTickMarks(true);\r\n            slider.setShowTickLabels(true);\r\n            slider.setLabelFormatter(new StringConverter&lt;Double&gt;() {\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic String toString(Double object) {\r\n    \t\t\t\tint index = object.intValue();\r\n    \t\t\t\treturn String.valueOf(timepoints[index]);\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic Double fromString(String string) {\r\n    \t\t\t\t// Not used\r\n    \t\t\t\treturn null;\r\n    \t\t\t}\r\n            \t\r\n            });\r\n            \r\n            Label label = new Label();\r\n            slider.valueProperty().addListener((obs, oldValue, newValue) -&gt; {\r\n            \tlabel.setText(String.valueOf(timepoints[newValue.intValue()]));\r\n            });\r\n            \r\n            VBox root = new VBox(10, label, slider);\r\n            root.setAlignment(Pos.CENTER);\r\n            root.setPadding(new Insets(10));\r\n            Scene scene = new Scene(root, 400, 400);\r\n            \r\n            \r\n            stage.setScene(scene);\r\n            stage.show();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    \r\n    }\r\n\r\nIf you need a lot of this, you could factor it out into a separate class (this is not production-quality, but will give you the idea):\r\n\r\n    import javafx.beans.binding.Bindings;\r\n    import javafx.beans.property.ObjectProperty;\r\n    import javafx.beans.property.SimpleObjectProperty;\r\n    import javafx.collections.FXCollections;\r\n    import javafx.collections.ObservableList;\r\n    import javafx.scene.control.Control;\r\n    import javafx.scene.control.Slider;\r\n    import javafx.util.StringConverter;\r\n    \r\n    public class DiscreteSlider&lt;T&gt; {\r\n    \r\n    \tprivate final ObservableList&lt;T&gt; values ;\r\n    \tprivate final ObjectProperty&lt;T&gt; discreteValue = new SimpleObjectProperty&lt;&gt;();\r\n    \t\r\n    \tprivate final Slider slider ;\r\n    \t\r\n    \tpublic DiscreteSlider(ObservableList&lt;T&gt; values) {\r\n    \t\tthis.values = values ;\r\n    \t\tthis.slider = new Slider() ;\r\n    \t\t\r\n    \t\tslider.setMin(0);\r\n    \t\tslider.maxProperty().bind(Bindings.size(this.values).subtract(1));\r\n    \t\tslider.setShowTickLabels(true);\r\n    \t\tslider.setMajorTickUnit(1);\r\n    \t\tslider.setMinorTickCount(0);\r\n    \t\tslider.setSnapToTicks(true);\r\n    \t\tslider.labelFormatterProperty().bind(Bindings.createObjectBinding(() -&gt; new StringConverter&lt;Double&gt;() {\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic String toString(Double object) {\r\n    \t\t\t\tint index = object.intValue();\r\n    \t\t\t\treturn DiscreteSlider.this.values.get(index).toString();\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic Double fromString(String string) {\r\n    \t\t\t\t// Not used\r\n    \t\t\t\treturn null;\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t}, this.values));\r\n    \t\t\r\n    \t\tdiscreteValue.addListener((obs, oldValue, newValue) -&gt; {\r\n    \t\t\tslider.setValue(this.values.indexOf(newValue));\r\n    \t\t});\r\n    \t\t\r\n    \t\tslider.valueProperty().addListener((obs, oldValue, newValue) -&gt; {\r\n    \t\t\tint index = newValue.intValue();\r\n    \t\t\tsetDiscreteValue(values.get(index));\r\n    \t\t});\r\n    \t\t\r\n    \t\tif (values.size() &gt; 0) setDiscreteValue(values.get(0));\r\n    \t}\r\n    \t\r\n    \t@SafeVarargs\r\n    \tpublic DiscreteSlider(T... values) {\r\n    \t\tthis(FXCollections.observableArrayList(values));\r\n    \t}\r\n    \t\r\n    \tpublic ObjectProperty&lt;T&gt; discreteValueProperty() {\r\n    \t\treturn discreteValue ;\r\n    \t}\r\n    \t\r\n    \tpublic final T getDiscreteValue() {\r\n    \t\treturn discreteValueProperty().get();\r\n    \t}\r\n    \t\r\n    \tpublic final void setDiscreteValue(T value) {\r\n    \t\tdiscreteValueProperty().set(value);\r\n    \t}\r\n    \t\r\n    \tpublic Control asControl() {\r\n    \t\treturn slider ;\r\n    \t}\r\n    }\r\n\r\nand then\r\n\r\n    import javafx.application.Application;\r\n    import javafx.geometry.Insets;\r\n    import javafx.geometry.Pos;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Label;\r\n    import javafx.scene.control.Slider;\r\n    import javafx.scene.layout.VBox;\r\n    import javafx.stage.Stage;\r\n    import javafx.util.StringConverter;\r\n    \r\n    \r\n    public class App extends Application {\r\n    \r\n        @Override\r\n        public void start(Stage stage) {\r\n            Double[] timepoints = {0.0, 1.9, 2.5, 50.1, 98.7} ;\r\n        \t\r\n        \tDiscreteSlider&lt;Double&gt; slider = new DiscreteSlider&lt;&gt;(timepoints);\r\n            \r\n            Label label = new Label();\r\n            label.textProperty().bind(slider.discreteValueProperty().asString());\r\n            \r\n            VBox root = new VBox(10, label, slider.asControl());\r\n            root.setAlignment(Pos.CENTER);\r\n            root.setPadding(new Insets(10));\r\n            Scene scene = new Scene(root, 400, 400);\r\n            \r\n            \r\n            stage.setScene(scene);\r\n            stage.show();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    \r\n    }","title":"Javafx custom slider values","body":"<p>One option that I can think of is to have the actual value of the slider be the <em>index</em> of the real value you want. Use a formatter to show the real value. You would need to convert the slider value (the index) to the actual value when you process it.</p>\n<p>Here's a quick example:</p>\n<pre><code>import javafx.application.Application;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Label;\nimport javafx.scene.control.Slider;\nimport javafx.scene.layout.VBox;\nimport javafx.stage.Stage;\nimport javafx.util.StringConverter;\n\n\n/**\n * JavaFX App\n */\npublic class App extends Application {\n\n    @Override\n    public void start(Stage stage) {\n        double[] timepoints = {0.0, 1.9, 2.5, 50.1, 98.7};\n        \n        Slider slider = new Slider();\n        slider.setMin(0);\n        slider.setMax(timepoints.length - 1);\n        slider.setSnapToTicks(true);\n        slider.setMajorTickUnit(1);\n        slider.setMinorTickCount(0);\n        slider.setShowTickMarks(true);\n        slider.setShowTickLabels(true);\n        slider.setLabelFormatter(new StringConverter&lt;Double&gt;() {\n\n            @Override\n            public String toString(Double object) {\n                int index = object.intValue();\n                return String.valueOf(timepoints[index]);\n            }\n\n            @Override\n            public Double fromString(String string) {\n                // Not used\n                return null;\n            }\n            \n        });\n        \n        Label label = new Label();\n        slider.valueProperty().addListener((obs, oldValue, newValue) -&gt; {\n            label.setText(String.valueOf(timepoints[newValue.intValue()]));\n        });\n        \n        VBox root = new VBox(10, label, slider);\n        root.setAlignment(Pos.CENTER);\n        root.setPadding(new Insets(10));\n        Scene scene = new Scene(root, 400, 400);\n        \n        \n        stage.setScene(scene);\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n\n}\n</code></pre>\n<p>If you need a lot of this, you could factor it out into a separate class (this is not production-quality, but will give you the idea):</p>\n<pre><code>import javafx.beans.binding.Bindings;\nimport javafx.beans.property.ObjectProperty;\nimport javafx.beans.property.SimpleObjectProperty;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.scene.control.Control;\nimport javafx.scene.control.Slider;\nimport javafx.util.StringConverter;\n\npublic class DiscreteSlider&lt;T&gt; {\n\n    private final ObservableList&lt;T&gt; values ;\n    private final ObjectProperty&lt;T&gt; discreteValue = new SimpleObjectProperty&lt;&gt;();\n    \n    private final Slider slider ;\n    \n    public DiscreteSlider(ObservableList&lt;T&gt; values) {\n        this.values = values ;\n        this.slider = new Slider() ;\n        \n        slider.setMin(0);\n        slider.maxProperty().bind(Bindings.size(this.values).subtract(1));\n        slider.setShowTickLabels(true);\n        slider.setMajorTickUnit(1);\n        slider.setMinorTickCount(0);\n        slider.setSnapToTicks(true);\n        slider.labelFormatterProperty().bind(Bindings.createObjectBinding(() -&gt; new StringConverter&lt;Double&gt;() {\n\n            @Override\n            public String toString(Double object) {\n                int index = object.intValue();\n                return DiscreteSlider.this.values.get(index).toString();\n            }\n\n            @Override\n            public Double fromString(String string) {\n                // Not used\n                return null;\n            }\n            \n        }, this.values));\n        \n        discreteValue.addListener((obs, oldValue, newValue) -&gt; {\n            slider.setValue(this.values.indexOf(newValue));\n        });\n        \n        slider.valueProperty().addListener((obs, oldValue, newValue) -&gt; {\n            int index = newValue.intValue();\n            setDiscreteValue(values.get(index));\n        });\n        \n        if (values.size() &gt; 0) setDiscreteValue(values.get(0));\n    }\n    \n    @SafeVarargs\n    public DiscreteSlider(T... values) {\n        this(FXCollections.observableArrayList(values));\n    }\n    \n    public ObjectProperty&lt;T&gt; discreteValueProperty() {\n        return discreteValue ;\n    }\n    \n    public final T getDiscreteValue() {\n        return discreteValueProperty().get();\n    }\n    \n    public final void setDiscreteValue(T value) {\n        discreteValueProperty().set(value);\n    }\n    \n    public Control asControl() {\n        return slider ;\n    }\n}\n</code></pre>\n<p>and then</p>\n<pre><code>import javafx.application.Application;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Label;\nimport javafx.scene.control.Slider;\nimport javafx.scene.layout.VBox;\nimport javafx.stage.Stage;\nimport javafx.util.StringConverter;\n\n\npublic class App extends Application {\n\n    @Override\n    public void start(Stage stage) {\n        Double[] timepoints = {0.0, 1.9, 2.5, 50.1, 98.7} ;\n        \n        DiscreteSlider&lt;Double&gt; slider = new DiscreteSlider&lt;&gt;(timepoints);\n        \n        Label label = new Label();\n        label.textProperty().bind(slider.discreteValueProperty().asString());\n        \n        VBox root = new VBox(10, label, slider.asControl());\n        root.setAlignment(Pos.CENTER);\n        root.setPadding(new Insets(10));\n        Scene scene = new Scene(root, 400, 400);\n        \n        \n        stage.setScene(scene);\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":18828844,"reputation":61,"user_id":13733120,"display_name":"GRETA "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":727,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":69828753,"answer_count":1,"score":3,"last_activity_date":1635959610,"creation_date":1635953844,"question_id":69827663,"body_markdown":"I&#39;m trying to use a JavaFX slider to choose some time instants to visualize the relative graph in my application.\r\nSo I should put a list of double values in the slider range, and they always change because I get them from external files.\r\nFor example: I have as instants: 0.0, 1.9, 2.5, 50.1, 98.7 and so on.\r\nI don&#39;t want to use default ticks but I want to show only the values that I really have.\r\nI haven&#39;t found anything in the web. ","title":"Javafx custom slider values","body":"<p>I'm trying to use a JavaFX slider to choose some time instants to visualize the relative graph in my application.\nSo I should put a list of double values in the slider range, and they always change because I get them from external files.\nFor example: I have as instants: 0.0, 1.9, 2.5, 50.1, 98.7 and so on.\nI don't want to use default ticks but I want to show only the values that I really have.\nI haven't found anything in the web.</p>\n"},{"tags":["java","spring","bean-validation","spring-validator"],"comments":[{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1635959541,"post_id":69828371,"comment_id":123433219,"body_markdown":"Can what you&#39;re looking for be done with _validation groups_?","body":"Can what you&#39;re looking for be done with <i>validation groups</i>?"}],"answers":[{"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635957373,"creation_date":1635957373,"answer_id":69828542,"question_id":69828371,"body_markdown":"In order to achieve this, you need to create your own validation annotation to be applied to your `User` class as whole.\r\n```java\r\n@Documented\r\n@Constraint(validatedBy = UserValidator.class)\r\n@Target({ElementType.TYPE})\r\n@Retention(RetentionPolicy.RUNTIME)\r\npublic @interface ValidUser {\r\n    String message() default &quot;Invalid User data.&quot;;\r\n    Class&lt;?&gt;[] groups() default {};\r\n    Class&lt;? extends Payload&gt;[] payload() default {};\r\n}\r\n```\r\n\r\nMind the `@Constraint(validatedBy = UserValidator.class)`. This means that you now need to implement `UserValidator` that will in fact validate your `User` object:\r\n```java\r\npublic class UserValidator implements ConstraintValidator&lt;ValidUser, Object&gt; {\r\n\r\n    @Override\r\n    public boolean isValid(Object value, ConstraintValidatorContext context) {\r\n        String name = (String) new BeanWrapperImpl(value).getPropertyValue(&quot;name&quot;);\r\n\r\n        // Your custom logic here\r\n    }\r\n}\r\n```\r\n\r\nFinally, the last thing is to use the custom annotation to your `User` class:\r\n```java\r\n@Getter\r\n@Setter\r\n@ToString\r\n@ValidUser\r\npublic class User {\r\n    (...)\r\n}\r\n```\r\n\r\nYou could have more advanced annotation that would accept parameters, but I decided to show the simple solution as it seems to me that this is what you need. You can find an example of this at https://www.baeldung.com/spring-mvc-custom-validator#custom-class-level-validation.","title":"How to handle multiple combination of Java bean validation in Spring","body":"<p>In order to achieve this, you need to create your own validation annotation to be applied to your <code>User</code> class as whole.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Documented\n@Constraint(validatedBy = UserValidator.class)\n@Target({ElementType.TYPE})\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface ValidUser {\n    String message() default &quot;Invalid User data.&quot;;\n    Class&lt;?&gt;[] groups() default {};\n    Class&lt;? extends Payload&gt;[] payload() default {};\n}\n</code></pre>\n<p>Mind the <code>@Constraint(validatedBy = UserValidator.class)</code>. This means that you now need to implement <code>UserValidator</code> that will in fact validate your <code>User</code> object:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class UserValidator implements ConstraintValidator&lt;ValidUser, Object&gt; {\n\n    @Override\n    public boolean isValid(Object value, ConstraintValidatorContext context) {\n        String name = (String) new BeanWrapperImpl(value).getPropertyValue(&quot;name&quot;);\n\n        // Your custom logic here\n    }\n}\n</code></pre>\n<p>Finally, the last thing is to use the custom annotation to your <code>User</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\n@ToString\n@ValidUser\npublic class User {\n    (...)\n}\n</code></pre>\n<p>You could have more advanced annotation that would accept parameters, but I decided to show the simple solution as it seems to me that this is what you need. You can find an example of this at <a href=\"https://www.baeldung.com/spring-mvc-custom-validator#custom-class-level-validation\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-mvc-custom-validator#custom-class-level-validation</a>.</p>\n"}],"owner":{"account_id":21733790,"reputation":387,"user_id":16042088,"display_name":"Mike Marsh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1197,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1635959548,"creation_date":1635956639,"question_id":69828371,"body_markdown":"I&#39;ve use case where I&#39;ve to validate certain fields with different combination, I&#39;m using `javax validation` API in my spring. Please find my list of fields `String name;` `String type;` `String userId;` `String userAltId;` `Date userBuyDate;` `Date userSellDate;`\r\n\r\n**Input param conditions are:** \r\n\r\n - `name, type and gender` -&gt; Always required field\r\n - `userId, userAltId` -&gt; Either `userID` or `altID` should have value or both\r\n   can have value\r\n - `userBuyDate, userSellDate` -&gt; If `userID` or `altID` is null, then\r\n   `userBuyDate` and `userSellDate` must have values\r\n\r\n**Pseudo if condition**\r\n\r\n    if (user.getName().isBlank() || user.getName().isEmpty() &amp;&amp;\r\n            user.getType().isEmpty() || user.getType().isBlank() &amp;&amp;\r\n            user.getGender().isEmpty() || user.getGender().isBlank()) {\r\n\r\n        if (user.getUserId().isEmpty() || user.getUserId().isBlank() ||\r\n                user.getUserAltId().isEmpty() || user.getUserAltId().isBlank() ||\r\n                user.getUserSellDate() == null &amp;&amp; user.getUserBuyDate() == null) {\r\n            throw new NullPointerException(&quot;input validation failed&quot;);\r\n        } else {\r\n            System.out.println(&quot;validation success&quot;);\r\n        }\r\n    }\r\n\r\n\r\nI&#39;m struggling to apply these combination of validation in Java bean using javax validation API, please find my code below. Can someone please help how can I achieve these combination of validation with sample example. In my current code for all the fields I&#39;m using `@NotNull` annotation, I don&#39;t know how to use the combination of optional and required annotation in the Java bean. Any help would be much appreciated. Thanks!\r\n\r\n**User.java**\r\n\r\n    import lombok.Getter;\r\n    import lombok.Setter;\r\n    import lombok.ToString;\r\n    \r\n    import javax.validation.constraints.NotNull;\r\n    import java.util.Date;\r\n    \r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    public class User {\r\n    \r\n        @NotNull(message = &quot;Name cannot be null&quot;)\r\n        private String name;\r\n    \r\n        @NotNull(message = &quot;Type cannot be null&quot;)\r\n        private String type;\r\n    \r\n        @NotNull(message = &quot;Gender cannot be null&quot;)\r\n        private String gender;\r\n    \r\n        @NotNull(message = &quot;User ID cannot be null&quot;)\r\n        private String userId;\r\n    \r\n        @NotNull(message = &quot;User Alt ID cannot be null&quot;)\r\n        private String userAltId;\r\n    \r\n        @NotNull(message = &quot;User Buy Date cannot be null&quot;)\r\n        private Date userBuyDate;\r\n    \r\n        @NotNull(message = &quot;User Sell Date cannot be null&quot;)\r\n        private Date userSellDate;\r\n    \r\n    \r\n    }\r\n\r\n\r\n**Test.java**\r\n\r\n    import javax.validation.ConstraintViolation;\r\n    import javax.validation.Validation;\r\n    import javax.validation.Validator;\r\n    import javax.validation.ValidatorFactory;\r\n    import java.util.Date;\r\n    import java.util.Set;\r\n    \r\n    public class Test {\r\n    \r\n        public static void main(String[] args) {\r\n            User user = new User();\r\n    \r\n            // Always mandatory field\r\n            user.setName(&quot;test&quot;);\r\n            user.setType(&quot;Admin&quot;);\r\n            user.setGender(&quot;Female&quot;);\r\n    \r\n            // Either userID or altID should have value or both can contain value\r\n            user.setUserId(&quot;U1213&quot;);\r\n            user.setUserAltId(&quot;UA93093&quot;);\r\n    \r\n            // If userID or altID is null, then userBuyDate and userSellDate are mandatory\r\n            user.setUserSellDate(new Date());\r\n            user.setUserBuyDate(new Date());\r\n    \r\n            ValidatorFactory factory = Validation.buildDefaultValidatorFactory();\r\n            Validator validator = factory.getValidator();\r\n    \r\n            Set&lt;ConstraintViolation&lt;User&gt;&gt; violations = validator.validate(user);\r\n            for (ConstraintViolation&lt;User&gt; violation : violations) {\r\n                System.out.println(violation.getMessage());\r\n            }\r\n    \r\n            /*if (user.getName().isBlank() || user.getName().isEmpty() &amp;&amp;\r\n                    user.getType().isEmpty() || user.getType().isBlank() &amp;&amp;\r\n                    user.getGender().isEmpty() || user.getGender().isBlank()) {\r\n    \r\n                if (user.getUserId().isEmpty() || user.getUserId().isBlank() ||\r\n                        user.getUserAltId().isEmpty() || user.getUserAltId().isBlank() ||\r\n                        user.getUserSellDate() == null &amp;&amp; user.getUserBuyDate() == null) {\r\n                    throw new NullPointerException(&quot;input validation failed&quot;);\r\n                } else {\r\n                    System.out.println(&quot;validation success&quot;);\r\n                }\r\n            }*/\r\n        }\r\n    }","title":"How to handle multiple combination of Java bean validation in Spring","body":"<p>I've use case where I've to validate certain fields with different combination, I'm using <code>javax validation</code> API in my spring. Please find my list of fields <code>String name;</code> <code>String type;</code> <code>String userId;</code> <code>String userAltId;</code> <code>Date userBuyDate;</code> <code>Date userSellDate;</code></p>\n<p><strong>Input param conditions are:</strong></p>\n<ul>\n<li><code>name, type and gender</code> -&gt; Always required field</li>\n<li><code>userId, userAltId</code> -&gt; Either <code>userID</code> or <code>altID</code> should have value or both\ncan have value</li>\n<li><code>userBuyDate, userSellDate</code> -&gt; If <code>userID</code> or <code>altID</code> is null, then\n<code>userBuyDate</code> and <code>userSellDate</code> must have values</li>\n</ul>\n<p><strong>Pseudo if condition</strong></p>\n<pre><code>if (user.getName().isBlank() || user.getName().isEmpty() &amp;&amp;\n        user.getType().isEmpty() || user.getType().isBlank() &amp;&amp;\n        user.getGender().isEmpty() || user.getGender().isBlank()) {\n\n    if (user.getUserId().isEmpty() || user.getUserId().isBlank() ||\n            user.getUserAltId().isEmpty() || user.getUserAltId().isBlank() ||\n            user.getUserSellDate() == null &amp;&amp; user.getUserBuyDate() == null) {\n        throw new NullPointerException(&quot;input validation failed&quot;);\n    } else {\n        System.out.println(&quot;validation success&quot;);\n    }\n}\n</code></pre>\n<p>I'm struggling to apply these combination of validation in Java bean using javax validation API, please find my code below. Can someone please help how can I achieve these combination of validation with sample example. In my current code for all the fields I'm using <code>@NotNull</code> annotation, I don't know how to use the combination of optional and required annotation in the Java bean. Any help would be much appreciated. Thanks!</p>\n<p><strong>User.java</strong></p>\n<pre><code>import lombok.Getter;\nimport lombok.Setter;\nimport lombok.ToString;\n\nimport javax.validation.constraints.NotNull;\nimport java.util.Date;\n\n@Getter\n@Setter\n@ToString\npublic class User {\n\n    @NotNull(message = &quot;Name cannot be null&quot;)\n    private String name;\n\n    @NotNull(message = &quot;Type cannot be null&quot;)\n    private String type;\n\n    @NotNull(message = &quot;Gender cannot be null&quot;)\n    private String gender;\n\n    @NotNull(message = &quot;User ID cannot be null&quot;)\n    private String userId;\n\n    @NotNull(message = &quot;User Alt ID cannot be null&quot;)\n    private String userAltId;\n\n    @NotNull(message = &quot;User Buy Date cannot be null&quot;)\n    private Date userBuyDate;\n\n    @NotNull(message = &quot;User Sell Date cannot be null&quot;)\n    private Date userSellDate;\n\n\n}\n</code></pre>\n<p><strong>Test.java</strong></p>\n<pre><code>import javax.validation.ConstraintViolation;\nimport javax.validation.Validation;\nimport javax.validation.Validator;\nimport javax.validation.ValidatorFactory;\nimport java.util.Date;\nimport java.util.Set;\n\npublic class Test {\n\n    public static void main(String[] args) {\n        User user = new User();\n\n        // Always mandatory field\n        user.setName(&quot;test&quot;);\n        user.setType(&quot;Admin&quot;);\n        user.setGender(&quot;Female&quot;);\n\n        // Either userID or altID should have value or both can contain value\n        user.setUserId(&quot;U1213&quot;);\n        user.setUserAltId(&quot;UA93093&quot;);\n\n        // If userID or altID is null, then userBuyDate and userSellDate are mandatory\n        user.setUserSellDate(new Date());\n        user.setUserBuyDate(new Date());\n\n        ValidatorFactory factory = Validation.buildDefaultValidatorFactory();\n        Validator validator = factory.getValidator();\n\n        Set&lt;ConstraintViolation&lt;User&gt;&gt; violations = validator.validate(user);\n        for (ConstraintViolation&lt;User&gt; violation : violations) {\n            System.out.println(violation.getMessage());\n        }\n\n        /*if (user.getName().isBlank() || user.getName().isEmpty() &amp;&amp;\n                user.getType().isEmpty() || user.getType().isBlank() &amp;&amp;\n                user.getGender().isEmpty() || user.getGender().isBlank()) {\n\n            if (user.getUserId().isEmpty() || user.getUserId().isBlank() ||\n                    user.getUserAltId().isEmpty() || user.getUserAltId().isBlank() ||\n                    user.getUserSellDate() == null &amp;&amp; user.getUserBuyDate() == null) {\n                throw new NullPointerException(&quot;input validation failed&quot;);\n            } else {\n                System.out.println(&quot;validation success&quot;);\n            }\n        }*/\n    }\n}\n</code></pre>\n"},{"tags":["java","maven","maven-2","maven-3"],"comments":[{"owner":{"account_id":7590669,"reputation":1088,"user_id":5758441,"display_name":"Ashraff Ali Wahab"},"score":1,"creation_date":1532857009,"post_id":51578975,"comment_id":90123320,"body_markdown":"echo the PATH.It seems there is a space after the semi-colon.","body":"echo the PATH.It seems there is a space after the semi-colon."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1532857319,"post_id":51578975,"comment_id":90123393,"body_markdown":"First only the entry in `PATH` is needed which means `C:\\Maven\\apache-maven-3.5.4\\bin`. Everything else `M2`, `M2_HOME` just remove it...Of course you have to set JAVA_HOME...afterwards. Close the command line box and reopen it and try `mv --version`...","body":"First only the entry in <code>PATH</code> is needed which means <code>C:\\Maven\\apache-maven-3.5.4\\bin</code>. Everything else <code>M2</code>, <code>M2_HOME</code> just remove it...Of course you have to set JAVA_HOME...afterwards. Close the command line box and reopen it and try <code>mv --version</code>..."},{"owner":{"account_id":11593851,"reputation":1129,"user_id":8493186,"accept_rate":48,"display_name":"Bastian"},"score":0,"creation_date":1532861146,"post_id":51578975,"comment_id":90124298,"body_markdown":"echo path the first path is the maven path","body":"echo path the first path is the maven path"}],"answers":[{"tags":[],"owner":{"account_id":252496,"reputation":495,"user_id":530576,"accept_rate":100,"display_name":"Rick"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1532859820,"creation_date":1532859820,"answer_id":51579347,"question_id":51578975,"body_markdown":"When using Windows, I prefer to install with chocolatey.org \nYou can put Java, mvn, etc on your machine and forget about it. \nSimilar to the package management system in Linux","title":"mvn is not recognized as an internal or external command","body":"<p>When using Windows, I prefer to install with chocolatey.org \nYou can put Java, mvn, etc on your machine and forget about it. \nSimilar to the package management system in Linux</p>\n"},{"tags":[],"owner":{"account_id":8630937,"reputation":151,"user_id":7940315,"display_name":"Sreelekshmi V"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1552019939,"creation_date":1552019939,"answer_id":55056824,"question_id":51578975,"body_markdown":"Resolve this is creating M2_HOME &amp; MAVEN_HOME and editing Path variable. You can refer to [this link][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/55056735/7940315","title":"mvn is not recognized as an internal or external command","body":"<p>Resolve this is creating M2_HOME &amp; MAVEN_HOME and editing Path variable. You can refer to <a href=\"https://stackoverflow.com/a/55056735/7940315\">this link</a></p>\n"},{"tags":[],"owner":{"account_id":16202543,"reputation":1,"user_id":11698607,"display_name":"Girish J"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561478563,"creation_date":1561477327,"answer_id":56757678,"question_id":51578975,"body_markdown":"The same issue I faced, In your screen shot you are missing the `LICENSE`, `NOTICE`, and `README.txt`.\r\n\r\nThat was because you should unzip and then copy, you would have just copied without unzipping the files.\r\n\r\nMake sure you get the `LICENSE` file is in the folder. That resolved this issue.","title":"mvn is not recognized as an internal or external command","body":"<p>The same issue I faced, In your screen shot you are missing the <code>LICENSE</code>, <code>NOTICE</code>, and <code>README.txt</code>.</p>\n\n<p>That was because you should unzip and then copy, you would have just copied without unzipping the files.</p>\n\n<p>Make sure you get the <code>LICENSE</code> file is in the folder. That resolved this issue.</p>\n"}],"owner":{"account_id":11593851,"reputation":1129,"user_id":8493186,"accept_rate":48,"display_name":"Bastian"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11904,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1635959173,"creation_date":1532856712,"question_id":51578975,"body_markdown":"I followed all the tutorials and tried to use maven.\r\n\r\nI run win 7, and downloaded maven 3.5.4.\r\n\r\n&gt; 1. I placed the zip file under c:\\Maven and extract it in that location.\r\n&gt; \r\n&gt; 2. I navigate to Environment variables and create Variable M2, and put value %M2_HOME%\\bin.\r\n&gt; \r\n&gt; 3. I navigate to Environment variables and create Variable M2_HOME and put value C:\\Maven\\apache-maven-3.5.4\r\n&gt; \r\n&gt; 4. I navigate to System variables and in  Path I added %M2_HOME%\\bin\r\n&gt; \r\n&gt; 5. In System variables the variable JAVA_Home has value C:\\Program Files\\Java\\jdk1.8.0_65\r\n\r\nWhat am I missing?\r\n\r\n[![maven path][1]][maven path]\r\n\r\n[![java path][2]][java path]\r\n\r\n[![env variable][3]][env variable]\r\n\r\n[![system variable ][4]][system variable]\r\n\r\n[![java home][5]][java home]\r\n\r\n[![echo ][6]][command line]\r\n\r\n[![maven path][7]][maven path]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/V21qE.jpg\r\n  [2]: https://i.stack.imgur.com/Krrb3.jpg\r\n  [3]: https://i.stack.imgur.com/kI6FL.jpg\r\n  [4]: https://i.stack.imgur.com/SO6Wk.jpg\r\n  [5]: https://i.stack.imgur.com/grY28.jpg\r\n  [6]: https://i.stack.imgur.com/Tfnmz.jpg\r\n  [7]: https://i.stack.imgur.com/BP9U8.jpg","title":"mvn is not recognized as an internal or external command","body":"<p>I followed all the tutorials and tried to use maven.</p>\n\n<p>I run win 7, and downloaded maven 3.5.4.</p>\n\n<blockquote>\n  <ol>\n  <li><p>I placed the zip file under c:\\Maven and extract it in that location.</p></li>\n  <li><p>I navigate to Environment variables and create Variable M2, and put value %M2_HOME%\\bin.</p></li>\n  <li><p>I navigate to Environment variables and create Variable M2_HOME and put value C:\\Maven\\apache-maven-3.5.4</p></li>\n  <li><p>I navigate to System variables and in  Path I added %M2_HOME%\\bin</p></li>\n  <li><p>In System variables the variable JAVA_Home has value C:\\Program Files\\Java\\jdk1.8.0_65</p></li>\n  </ol>\n</blockquote>\n\n<p>What am I missing?</p>\n\n<p>[<img src=\"https://i.stack.imgur.com/V21qE.jpg\" alt=\"maven path\">][maven path]</p>\n\n<p>[<img src=\"https://i.stack.imgur.com/Krrb3.jpg\" alt=\"java path\">][java path]</p>\n\n<p>[<img src=\"https://i.stack.imgur.com/kI6FL.jpg\" alt=\"env variable\">][env variable]</p>\n\n<p>[<img src=\"https://i.stack.imgur.com/SO6Wk.jpg\" alt=\"system variable \">][system variable]</p>\n\n<p>[<img src=\"https://i.stack.imgur.com/grY28.jpg\" alt=\"java home\">][java home]</p>\n\n<p>[<img src=\"https://i.stack.imgur.com/Tfnmz.jpg\" alt=\"echo \">][command line]</p>\n\n<p>[<img src=\"https://i.stack.imgur.com/BP9U8.jpg\" alt=\"maven path\">][maven path]</p>\n"},{"tags":["java","mysql","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":16076125,"reputation":162,"user_id":11603305,"display_name":"Nora Na"},"score":0,"creation_date":1635955121,"post_id":69827782,"comment_id":123431233,"body_markdown":"can you provide information about the rows which you are trying to join in these two tables?","body":"can you provide information about the rows which you are trying to join in these two tables?"},{"owner":{"account_id":480617,"reputation":2495,"user_id":893952,"accept_rate":57,"display_name":"Harry Coder"},"score":0,"creation_date":1635956137,"post_id":69827782,"comment_id":123431675,"body_markdown":"What is the result when you execute the query in your `database`?","body":"What is the result when you execute the query in your <code>database</code>?"},{"owner":{"account_id":3931383,"reputation":1862,"user_id":4012392,"accept_rate":58,"display_name":"hc0re"},"score":0,"creation_date":1635956172,"post_id":69827782,"comment_id":123431693,"body_markdown":"@NoraNa I am not sure if I understand Your question - what information do You need me to provide? What data is in those rows? What data types I use?","body":"@NoraNa I am not sure if I understand Your question - what information do You need me to provide? What data is in those rows? What data types I use?"},{"owner":{"account_id":3931383,"reputation":1862,"user_id":4012392,"accept_rate":58,"display_name":"hc0re"},"score":0,"creation_date":1635956280,"post_id":69827782,"comment_id":123431751,"body_markdown":"@HarryCoder the result from a query in the database is correct - I get 4 rows I mentioned, but they all contain different sets of data, and all this data is consistent with both tables","body":"@HarryCoder the result from a query in the database is correct - I get 4 rows I mentioned, but they all contain different sets of data, and all this data is consistent with both tables"},{"owner":{"account_id":16076125,"reputation":162,"user_id":11603305,"display_name":"Nora Na"},"score":0,"creation_date":1635956284,"post_id":69827782,"comment_id":123431753,"body_markdown":"I mean the rows in your user and address tables.","body":"I mean the rows in your user and address tables."},{"owner":{"account_id":3931383,"reputation":1862,"user_id":4012392,"accept_rate":58,"display_name":"hc0re"},"score":0,"creation_date":1635957082,"post_id":69827782,"comment_id":123432152,"body_markdown":"@NoraNa I have added the query results from the DB.\n\nDo not take the data model too seriously, cause it is just an example ;)","body":"@NoraNa I have added the query results from the DB.  Do not take the data model too seriously, cause it is just an example ;)"}],"answers":[{"tags":[],"owner":{"account_id":17216718,"reputation":376,"user_id":12464560,"display_name":"Lookslikeitsnot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635958674,"creation_date":1635958674,"answer_id":69828838,"question_id":69827782,"body_markdown":"The fact that the `user_uuid` column is not unique causes the duplicates since it&#39;s marked as @Id and JPA uses its value to find the entities. You&#39;ll need a [composite PK](https://www.baeldung.com/jpa-composite-primary-keys) using either an `IdClass` or an `EmbeddedId` containing the identifiying attributes. ","title":"Hibernate and querying a view. Result count is OK, but all rows are the same but they aren&#39;t on the database","body":"<p>The fact that the <code>user_uuid</code> column is not unique causes the duplicates since it's marked as @Id and JPA uses its value to find the entities. You'll need a <a href=\"https://www.baeldung.com/jpa-composite-primary-keys\" rel=\"nofollow noreferrer\">composite PK</a> using either an <code>IdClass</code> or an <code>EmbeddedId</code> containing the identifiying attributes.</p>\n"}],"owner":{"account_id":3931383,"reputation":1862,"user_id":4012392,"accept_rate":58,"display_name":"hc0re"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":183,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635958674,"creation_date":1635954273,"question_id":69827782,"body_markdown":"I have an entity representing a view on the (mysql) database:\r\n\r\n    @Entity\r\n    @Immutable\r\n    @Table(name = &quot;user_info_view&quot;)\r\n    public class UserInfoView implements Serializable {\r\n    \r\n        @Id\r\n        @Column(name = &quot;user_uuid&quot;)\r\n        private String userUUID;\r\n    \r\n        @Column(name = &quot;name&quot;)\r\n        private String name;\r\n    \r\n        @Column(name = &quot;address&quot;)\r\n        private String address;\r\n    \r\n        //getters, setters, constructors...\r\n    \r\n        }\r\n\r\nThe view is created using a simple SQL, like:\r\n\r\n    CREATE OR REPLACE VIEW USER_INFO_VIEW\r\n    AS\r\n        SELECT u.USER_UUID,\r\n               u.NAME,\r\n               a.ADDRESS\r\n        FROM\r\n        USER u\r\n        JOIN\r\n        ADDRESS a\r\n        ON a.ID = u.ADDRESS_ID\r\n\r\nAnd a repository:\r\n\r\n    @Repository\r\n    public interface UserInfoViewRepository extends JpaRepository&lt;UserInfoView, String&gt; {\r\n    \r\n        List&lt;UserInfoView&gt; findAllByUserUUID(String userUUID);\r\n        \r\n    }\r\n\r\n`SELECT * FROM USER_INFO_VIEW` is returning 4 rows. Running `findAllByUserUUID()` method returns a list of 4 `UserInfoView` objects, but they are all the same - and they contain data from the first row in the database.\r\n\r\nHere are the results of queries on the database:\r\n\r\nSELECT * FROM USER:\r\n\r\n    id | user_uuid | name | address_id |\r\n    ------------------------------------\r\n    1  | UUID1     | john | 1          |\r\n    2  | UUID1     | jane | 2          |\r\n    3  | UUID1     | josh | 3          |\r\n    4  | UUID1     | mark | 4          |\r\n    ------------------------------------ \r\n\r\n    SELECT * FROM ADDRESS:\r\n    \r\n    id | address            | name  | is_current |\r\n    ----------------------------------------------\r\n    1  | some address 1     | addr1 | 1          |\r\n    2  | some address 2     | addr2 | 0          |\r\n    3  | some address 3     | addr3 | 1          |\r\n    4  | some address 4     | addr4 | 1          |\r\n    ---------------------------------------------- \r\n\r\n    SELECT * FROM USER_VIEW WHERE USER_UUID = &quot;UUID1&quot;:\r\n    \r\n    user_uuid | name | address            |\r\n    ---------------------------------------\r\n    UUID1     | john | some address 1     |\r\n    UUID1     | jane | some address 2     |\r\n    UUID1     | josh | some address 3     |\r\n    UUID1     | mark | some address 4     |\r\n    ---------------------------------------\r\n\r\nWhat could be causing this behaviour?","title":"Hibernate and querying a view. Result count is OK, but all rows are the same but they aren&#39;t on the database","body":"<p>I have an entity representing a view on the (mysql) database:</p>\n<pre><code>@Entity\n@Immutable\n@Table(name = &quot;user_info_view&quot;)\npublic class UserInfoView implements Serializable {\n\n    @Id\n    @Column(name = &quot;user_uuid&quot;)\n    private String userUUID;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    @Column(name = &quot;address&quot;)\n    private String address;\n\n    //getters, setters, constructors...\n\n    }\n</code></pre>\n<p>The view is created using a simple SQL, like:</p>\n<pre><code>CREATE OR REPLACE VIEW USER_INFO_VIEW\nAS\n    SELECT u.USER_UUID,\n           u.NAME,\n           a.ADDRESS\n    FROM\n    USER u\n    JOIN\n    ADDRESS a\n    ON a.ID = u.ADDRESS_ID\n</code></pre>\n<p>And a repository:</p>\n<pre><code>@Repository\npublic interface UserInfoViewRepository extends JpaRepository&lt;UserInfoView, String&gt; {\n\n    List&lt;UserInfoView&gt; findAllByUserUUID(String userUUID);\n    \n}\n</code></pre>\n<p><code>SELECT * FROM USER_INFO_VIEW</code> is returning 4 rows. Running <code>findAllByUserUUID()</code> method returns a list of 4 <code>UserInfoView</code> objects, but they are all the same - and they contain data from the first row in the database.</p>\n<p>Here are the results of queries on the database:</p>\n<p>SELECT * FROM USER:</p>\n<pre><code>id | user_uuid | name | address_id |\n------------------------------------\n1  | UUID1     | john | 1          |\n2  | UUID1     | jane | 2          |\n3  | UUID1     | josh | 3          |\n4  | UUID1     | mark | 4          |\n------------------------------------ \n\nSELECT * FROM ADDRESS:\n\nid | address            | name  | is_current |\n----------------------------------------------\n1  | some address 1     | addr1 | 1          |\n2  | some address 2     | addr2 | 0          |\n3  | some address 3     | addr3 | 1          |\n4  | some address 4     | addr4 | 1          |\n---------------------------------------------- \n\nSELECT * FROM USER_VIEW WHERE USER_UUID = &quot;UUID1&quot;:\n\nuser_uuid | name | address            |\n---------------------------------------\nUUID1     | john | some address 1     |\nUUID1     | jane | some address 2     |\nUUID1     | josh | some address 3     |\nUUID1     | mark | some address 4     |\n---------------------------------------\n</code></pre>\n<p>What could be causing this behaviour?</p>\n"},{"tags":["java","android","android-studio","statusbar"],"comments":[{"owner":{"account_id":5877971,"reputation":1421,"user_id":4628279,"display_name":"akhil nair"},"score":0,"creation_date":1636027828,"post_id":69828818,"comment_id":123451200,"body_markdown":"Do you want to add the transparency on scrolling? Or just when the activity is loaded?","body":"Do you want to add the transparency on scrolling? Or just when the activity is loaded?"},{"owner":{"account_id":22165740,"reputation":1230,"user_id":16411959,"display_name":"AI Shakil"},"score":0,"creation_date":1636038980,"post_id":69828818,"comment_id":123456111,"body_markdown":"yes I want to add transparency while scrolling","body":"yes I want to add transparency while scrolling"}],"owner":{"account_id":22165740,"reputation":1230,"user_id":16411959,"display_name":"AI Shakil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1635958560,"creation_date":1635958560,"question_id":69828818,"body_markdown":"I&#39;ve tried lot of methods to make status bar transparent when using Scroll view.\r\nWithout scrollView, I change status bar color transparent easily in theme.xml file.\r\nbut no methods working for scrollView:(\r\n\r\nactivity_main.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.LogInActivity&quot;&gt;\r\n    \r\n    &lt;ScrollView\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:scrollbars=&quot;none&quot;&gt;\r\n  \r\n        &lt;LinearLayout...&gt;\r\n\r\n    &lt;/ScrollView&gt;\r\n\r\n    &lt;/LinearLayout&gt;\r\n\r\n\r\nLogInActivity.java\r\n\r\n    package com.project.appname;\r\n    \r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    \r\n    import android.graphics.Color;\r\n    import android.os.Bundle;\r\n    import android.view.View;\r\n    import android.view.Window;\r\n    import android.view.WindowManager;\r\n    \r\n    \r\n    public class LogInActivity extends AppCompatActivity {\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setTheme(R.style.Theme_Talkrr_Status);\r\n            setContentView(R.layout.activity_log_in);\r\n    \r\n            Window window = getWindow();\r\n            window.clearFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);\r\n            window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);\r\n            window.getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN);\r\n            window.setStatusBarColor(Color.TRANSPARENT);\r\n    \r\n        }\r\n    }\r\n\r\n\r\nthemes.xml\r\n\r\n    &lt;style name=&quot;Theme.AppName.Status&quot;&gt;\r\n    \r\n        &lt;item name=&quot;android:windowLightStatusBar&quot;&gt;true&lt;/item&gt;\r\n    \r\n    &lt;/style&gt;\r\n\r\n","title":"Android java status bar color not being transparent while using ScrollView","body":"<p>I've tried lot of methods to make status bar transparent when using Scroll view.\nWithout scrollView, I change status bar color transparent easily in theme.xml file.\nbut no methods working for scrollView:(</p>\n<p>activity_main.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\nxmlns:tools=&quot;http://schemas.android.com/tools&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;match_parent&quot;\ntools:context=&quot;.LogInActivity&quot;&gt;\n\n&lt;ScrollView\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:scrollbars=&quot;none&quot;&gt;\n\n    &lt;LinearLayout...&gt;\n\n&lt;/ScrollView&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>LogInActivity.java</p>\n<pre><code>package com.project.appname;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.graphics.Color;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.view.Window;\nimport android.view.WindowManager;\n\n\npublic class LogInActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setTheme(R.style.Theme_Talkrr_Status);\n        setContentView(R.layout.activity_log_in);\n\n        Window window = getWindow();\n        window.clearFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);\n        window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);\n        window.getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN);\n        window.setStatusBarColor(Color.TRANSPARENT);\n\n    }\n}\n</code></pre>\n<p>themes.xml</p>\n<pre><code>&lt;style name=&quot;Theme.AppName.Status&quot;&gt;\n\n    &lt;item name=&quot;android:windowLightStatusBar&quot;&gt;true&lt;/item&gt;\n\n&lt;/style&gt;\n</code></pre>\n"},{"tags":["java","functional-programming","hashmap","java-stream","apache-commons"],"comments":[{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1635951333,"post_id":69826985,"comment_id":123429453,"body_markdown":"It would be helpful to show what the data looks like before processing.","body":"It would be helpful to show what the data looks like before processing."},{"owner":{"account_id":20719168,"reputation":47,"user_id":15213946,"display_name":"mike kong"},"score":0,"creation_date":1635951414,"post_id":69826985,"comment_id":123429493,"body_markdown":"@WJS u mean the csv file? cz the output data is read from the csv file","body":"@WJS u mean the csv file? cz the output data is read from the csv file"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635953282,"creation_date":1635952089,"answer_id":69827253,"question_id":69826985,"body_markdown":"Ok, you say your data is in a `List&lt;List&lt;String&gt;&gt;`.  Then try this.\r\n- stream the lists.\r\n- use the first element of each list as the key\r\n- use the `subList` from 1 to end of list as the value.\r\n```\r\nList&lt;List&lt;String&gt;&gt; data = your data\r\n\t\t\r\nMap&lt;String,List&lt;String&gt;&gt; map = data.stream()\r\n\t\t.collect(Collectors.toMap(list -&gt; list.get(0),\r\n\t\t\t\tlist -&gt; new ArrayList&lt;&gt;(\r\n\t\t\t\t\t\tlist.subList(1, list.size()))));\r\n\r\nmap.entrySet().forEach(System.out::println);\r\n","title":"How to extract each column data?","body":"<p>Ok, you say your data is in a <code>List&lt;List&lt;String&gt;&gt;</code>.  Then try this.</p>\n<ul>\n<li>stream the lists.</li>\n<li>use the first element of each list as the key</li>\n<li>use the <code>subList</code> from 1 to end of list as the value.</li>\n</ul>\n<pre><code>List&lt;List&lt;String&gt;&gt; data = your data\n        \nMap&lt;String,List&lt;String&gt;&gt; map = data.stream()\n        .collect(Collectors.toMap(list -&gt; list.get(0),\n                list -&gt; new ArrayList&lt;&gt;(\n                        list.subList(1, list.size()))));\n\nmap.entrySet().forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635958464,"creation_date":1635957964,"answer_id":69828661,"question_id":69826985,"body_markdown":"As the first row contains date headers, and the rest rows contain values, it may be worth to prepare a list of keys for the first &quot;row&quot;, then a map containing empty array lists per key, and then populate the column data for each date.  \r\n_Note: using `LocalDate` instead of obsolete `Date` class_ \r\n```java\r\nList&lt;List&lt;String&gt;&gt; data = Arrays.asList(\r\n    Arrays.asList(&quot;2020/12/31&quot;, &quot;2021/01/01&quot;, &quot;2021/02/01&quot;, &quot;2021/03/01&quot;),\r\n    Arrays.asList(&quot;1&quot;,   &quot;2&quot;,  &quot;3&quot;,  &quot;4&quot;),\r\n    Arrays.asList(&quot;10&quot;, &quot;20&quot;, &quot;30&quot;, &quot;40&quot;),\r\n    Arrays.asList(&quot;20&quot;, &quot;40&quot;, &quot;60&quot;, &quot;80&quot;)\r\n);\r\n\r\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy/MM/dd&quot;);\r\n\r\nList&lt;LocalDate&gt; keys = data.get(0).stream().map(s -&gt; LocalDate.parse(s, formatter)).collect(Collectors.toList());\r\n\r\nMap&lt;LocalDate, List&lt;Integer&gt;&gt; map = new LinkedHashMap&lt;&gt;();\r\n\r\nIntStream.range(0, data.get(0).size())\r\n    .forEach(i -&gt; map.put(keys.get(i), new ArrayList&lt;&gt;()));\r\n\r\ndata.stream()\r\n    .skip(1)\r\n    .forEach(row -&gt; IntStream.range(0, row.size()) // iterate &quot;columns&quot; by index\r\n        .forEach(i -&gt; map.get(keys.get(i))\r\n                    .add(Integer.parseInt(row.get(i)))\r\n        )\r\n    );\r\n    \r\nSystem.out.println(map);\r\n```\r\nOutput:\r\n```\r\n{2020-12-31=[1, 10, 20], 2021-01-01=[2, 20, 40], 2021-02-01=[3, 30, 60], 2021-03-01=[4, 40, 80]}\r\n```\r\nHowever, Stream API does not look to be very appropriate for this task, and good old `for` loops could be used instead.","title":"How to extract each column data?","body":"<p>As the first row contains date headers, and the rest rows contain values, it may be worth to prepare a list of keys for the first &quot;row&quot;, then a map containing empty array lists per key, and then populate the column data for each date.<br />\n<em>Note: using <code>LocalDate</code> instead of obsolete <code>Date</code> class</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;List&lt;String&gt;&gt; data = Arrays.asList(\n    Arrays.asList(&quot;2020/12/31&quot;, &quot;2021/01/01&quot;, &quot;2021/02/01&quot;, &quot;2021/03/01&quot;),\n    Arrays.asList(&quot;1&quot;,   &quot;2&quot;,  &quot;3&quot;,  &quot;4&quot;),\n    Arrays.asList(&quot;10&quot;, &quot;20&quot;, &quot;30&quot;, &quot;40&quot;),\n    Arrays.asList(&quot;20&quot;, &quot;40&quot;, &quot;60&quot;, &quot;80&quot;)\n);\n\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy/MM/dd&quot;);\n\nList&lt;LocalDate&gt; keys = data.get(0).stream().map(s -&gt; LocalDate.parse(s, formatter)).collect(Collectors.toList());\n\nMap&lt;LocalDate, List&lt;Integer&gt;&gt; map = new LinkedHashMap&lt;&gt;();\n\nIntStream.range(0, data.get(0).size())\n    .forEach(i -&gt; map.put(keys.get(i), new ArrayList&lt;&gt;()));\n\ndata.stream()\n    .skip(1)\n    .forEach(row -&gt; IntStream.range(0, row.size()) // iterate &quot;columns&quot; by index\n        .forEach(i -&gt; map.get(keys.get(i))\n                    .add(Integer.parseInt(row.get(i)))\n        )\n    );\n    \nSystem.out.println(map);\n</code></pre>\n<p>Output:</p>\n<pre><code>{2020-12-31=[1, 10, 20], 2021-01-01=[2, 20, 40], 2021-02-01=[3, 30, 60], 2021-03-01=[4, 40, 80]}\n</code></pre>\n<p>However, Stream API does not look to be very appropriate for this task, and good old <code>for</code> loops could be used instead.</p>\n"}],"owner":{"account_id":20719168,"reputation":47,"user_id":15213946,"display_name":"mike kong"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":405,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":69828661,"answer_count":2,"score":-1,"last_activity_date":1635958464,"creation_date":1635951121,"question_id":69826985,"body_markdown":"**Question 1:** *How to extract each column of data using the java functional programming?*\r\n\r\n**Question 2 :** *How to extract each column of data and then put them into **Map&lt;Date, List&lt;Integer&lt;IInteger&gt;&gt;&gt;***?\r\n\r\n[**Output of the data**][1]\r\n\r\n  [1]: https://i.stack.imgur.com/NTUMN.png\r\nThe output shown in the screenshot above is print from **```List&lt;List&lt;String&gt;&gt; covidListWithoutCountryDetails```**\r\n\r\n\r\n**My try (but failed):**\r\n```\r\nMap&lt;String, List&lt;String&gt;&gt; dateWithEachDayAmountCases= new HashMap&lt;&gt;();\r\n        covidListWithoutCountryDetails\r\n                .stream()\r\n                .map(x-&gt; dateWithEachDayAmountCases.put(covidListWithoutCountryDetails.get(0).get(0),zeroIndexList))\r\n                .collect(Collectors.toList())\r\n                        .forEach(x-&gt;System.out.println(x));\r\n```\r\n\r\n**Desired output:**\r\n```\r\n{2020/1/22=[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 14, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]}\r\n{2020/1/23=[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 14, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]}\r\n{2020/1/24=[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 14, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]}\r\n...............\r\n...............\r\n...............\r\nmore and more until the end \r\n```\r\n","title":"How to extract each column data?","body":"<p><strong>Question 1:</strong> <em>How to extract each column of data using the java functional programming?</em></p>\n<p><strong>Question 2 :</strong> <em>How to extract each column of data and then put them into <strong>Map&lt;Date, List&lt;Integer&gt;&gt;</strong></em>?</p>\n<p><a href=\"https://i.stack.imgur.com/NTUMN.png\" rel=\"nofollow noreferrer\"><strong>Output of the data</strong></a></p>\n<p>The output shown in the screenshot above is print from <strong><code>List&lt;List&lt;String&gt;&gt; covidListWithoutCountryDetails</code></strong></p>\n<p><strong>My try (but failed):</strong></p>\n<pre><code>Map&lt;String, List&lt;String&gt;&gt; dateWithEachDayAmountCases= new HashMap&lt;&gt;();\n        covidListWithoutCountryDetails\n                .stream()\n                .map(x-&gt; dateWithEachDayAmountCases.put(covidListWithoutCountryDetails.get(0).get(0),zeroIndexList))\n                .collect(Collectors.toList())\n                        .forEach(x-&gt;System.out.println(x));\n</code></pre>\n<p><strong>Desired output:</strong></p>\n<pre><code>{2020/1/22=[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 14, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]}\n{2020/1/23=[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 14, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]}\n{2020/1/24=[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 14, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]}\n...............\n...............\n...............\nmore and more until the end \n</code></pre>\n"},{"tags":["java","architecture","apache-flink","software-design"],"answers":[{"tags":[],"owner":{"account_id":13472617,"reputation":425,"user_id":10060134,"display_name":"Niko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1635958407,"creation_date":1635958407,"answer_id":69828780,"question_id":69826730,"body_markdown":"You should use [bulk-encoded-format][1] for writing Parquet. RowFormat is used for writing text, csv, json, etc.\r\n\r\n\r\n  [1]: https://ci.apache.org/projects/flink/flink-docs-master/docs/connectors/datastream/streamfile_sink/#bulk-encoded-formats","title":"Creating a parquet file with StreamingFileSink in java","body":"<p>You should use <a href=\"https://ci.apache.org/projects/flink/flink-docs-master/docs/connectors/datastream/streamfile_sink/#bulk-encoded-formats\" rel=\"nofollow noreferrer\">bulk-encoded-format</a> for writing Parquet. RowFormat is used for writing text, csv, json, etc.</p>\n"}],"owner":{"account_id":19735456,"reputation":21,"user_id":14450057,"display_name":"Emsal Cengiz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":390,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635958407,"creation_date":1635950129,"question_id":69826730,"body_markdown":" \r\nI&#39;m aiming to convert the messages I received from kafka to parquet file here, but I could be wrong. Would you help me with this topic?\r\n\r\n       private static SinkFunction&lt;String&gt; createFileSink(String outputPath) {\r\n            final StreamingFileSink&lt;String&gt; sink = StreamingFileSink\r\n                    .forRowFormat(new Path(outputPath), new SimpleStringEncoder&lt;String&gt;(&quot;UTF-8&quot;))\r\n                    .withRollingPolicy(\r\n                            DefaultRollingPolicy.builder()\r\n                                    .withRolloverInterval(TimeUnit.MINUTES.toMillis(15))\r\n                                    .withInactivityInterval(TimeUnit.MINUTES.toMillis(5))\r\n                                    .withMaxPartSize(1024 * 1024)\r\n                                    .build())\r\n                    .build();\r\n    \r\n            return sink;\r\n        }","title":"Creating a parquet file with StreamingFileSink in java","body":"<p>I'm aiming to convert the messages I received from kafka to parquet file here, but I could be wrong. Would you help me with this topic?</p>\n<pre><code>   private static SinkFunction&lt;String&gt; createFileSink(String outputPath) {\n        final StreamingFileSink&lt;String&gt; sink = StreamingFileSink\n                .forRowFormat(new Path(outputPath), new SimpleStringEncoder&lt;String&gt;(&quot;UTF-8&quot;))\n                .withRollingPolicy(\n                        DefaultRollingPolicy.builder()\n                                .withRolloverInterval(TimeUnit.MINUTES.toMillis(15))\n                                .withInactivityInterval(TimeUnit.MINUTES.toMillis(5))\n                                .withMaxPartSize(1024 * 1024)\n                                .build())\n                .build();\n\n        return sink;\n    }\n</code></pre>\n"},{"tags":["java","opencv"],"answers":[{"tags":[],"owner":{"account_id":2268735,"reputation":1,"user_id":1996707,"display_name":"user1996707"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1501562092,"creation_date":1501558341,"answer_id":45428514,"question_id":45048041,"body_markdown":"You can try `org.datavec.image.loader.NativeImageLoader`\r\n\r\n`public INDArray asMatrix(Mat image)` throws `IOException`\r\n\r\n","title":"How to convert Mat (opencv) to INDArray (DL4J)?","body":"<p>You can try <code>org.datavec.image.loader.NativeImageLoader</code></p>\n\n<p><code>public INDArray asMatrix(Mat image)</code> throws <code>IOException</code></p>\n"},{"tags":[],"owner":{"account_id":23023730,"reputation":21,"user_id":17144347,"display_name":"alihoussene silahi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1635958268,"creation_date":1635958268,"answer_id":69828744,"question_id":45048041,"body_markdown":"**DL4J** does not include the **OpenCV** native library because the library must be located in the **JAVA_HOME** directory or in an other location where you can precise in your code. If you want to use the features of opencv included in DL4J, you must firstly download the version of opencv included in the version of DL4J you are using.\r\nAfter downloading the opencv library, The opencv native library is located in\r\n- **opencv/build/java/x64/opencv_javaVERSION_OF_OPENCV.dll** for 64 bits architectures or in\r\n- **opencv/build/java/x86/opencv_javaVERSION_OF_OPENCV.dll** for 32 bits architectures.\r\n\r\n 1. You can copy the native library in the java home and do this in your code:\r\n  \r\n   ~~~java\r\n    System.loadLibrary(Core.NATIVE_LIBRARY_NAME);\r\n    Mat imgMat = Imgcodecs.imread(&quot;C:\\\\Pictures\\\\image.jpg&quot;);\r\n    INDArray image = loader.asMatrix(imgMat);\r\n   ~~~\r\n\r\n\r\n2. Or you can use this approach which is the best\r\n~~~java\r\nSystem.load(&quot;PATH/opencv_javaOPENCV_VERSION.dll&quot;);\r\nMat imgMat = Imgcodecs.imread(&quot;C:\\\\Pictures\\\\image.jpg&quot;);\r\nINDArray image = loader.asMatrix(imgMat);\r\n~~~\r\n\r\n**PATH** is the path where to locate the library and **OPENCV_VERSION** is the opencv version you use.\r\n\r\nYou can adopt the same approach in an other java project based on **opencv**\r\n\r\n","title":"How to convert Mat (opencv) to INDArray (DL4J)?","body":"<p><strong>DL4J</strong> does not include the <strong>OpenCV</strong> native library because the library must be located in the <strong>JAVA_HOME</strong> directory or in an other location where you can precise in your code. If you want to use the features of opencv included in DL4J, you must firstly download the version of opencv included in the version of DL4J you are using.\nAfter downloading the opencv library, The opencv native library is located in</p>\n<ul>\n<li><strong>opencv/build/java/x64/opencv_javaVERSION_OF_OPENCV.dll</strong> for 64 bits architectures or in</li>\n<li><strong>opencv/build/java/x86/opencv_javaVERSION_OF_OPENCV.dll</strong> for 32 bits architectures.</li>\n</ul>\n<ol>\n<li>You can copy the native library in the java home and do this in your code:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code> System.loadLibrary(Core.NATIVE_LIBRARY_NAME);\n Mat imgMat = Imgcodecs.imread(&quot;C:\\\\Pictures\\\\image.jpg&quot;);\n INDArray image = loader.asMatrix(imgMat);\n</code></pre>\n<ol start=\"2\">\n<li>Or you can use this approach which is the best</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>System.load(&quot;PATH/opencv_javaOPENCV_VERSION.dll&quot;);\nMat imgMat = Imgcodecs.imread(&quot;C:\\\\Pictures\\\\image.jpg&quot;);\nINDArray image = loader.asMatrix(imgMat);\n</code></pre>\n<p><strong>PATH</strong> is the path where to locate the library and <strong>OPENCV_VERSION</strong> is the opencv version you use.</p>\n<p>You can adopt the same approach in an other java project based on <strong>opencv</strong></p>\n"}],"owner":{"account_id":5567672,"reputation":521,"user_id":4414277,"accept_rate":42,"display_name":"Febry Fairuz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1281,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1635958268,"creation_date":1499831094,"question_id":45048041,"body_markdown":"I hope anyone can help me to fix this task. I&#39;m working with some Image Classification and tried to combine OpenCv 3.2.0 and DL4J. I knew DL4J also included Opencv, but i think it&#39;s useless.\r\n\r\nCan anyone help me, how to convert into INDArray ? \r\nI tried to read some issue [here][1] and Class NativeImageLoader from DL4J has provide the method, asMatrix(Mat image).\r\nBut when i tried to runing it i got an error \r\n\r\n&gt; java: no suitable method found for asMatrix(org.opencv.core.Mat)\r\n\r\nI don&#39;t know how to fix it my code, or maybe there&#39;s something wrong with my code. Can anyone help me to find out the problem ?\r\n\r\nBtw here&#39;s my code :\r\n\r\n    Mat imgMat = Imgcodecs.imread(&quot;C:\\\\Pictures\\\\image.jpg&quot;);\r\n    INDArray image = loader.asMatrix(imgMat);\r\n\r\nThank you for your kind attention.\r\n\r\n  [1]: https://github.com/deeplearning4j/dl4j-examples/issues/351\r\n\r\n","title":"How to convert Mat (opencv) to INDArray (DL4J)?","body":"<p>I hope anyone can help me to fix this task. I'm working with some Image Classification and tried to combine OpenCv 3.2.0 and DL4J. I knew DL4J also included Opencv, but i think it's useless.</p>\n\n<p>Can anyone help me, how to convert into INDArray ? \nI tried to read some issue <a href=\"https://github.com/deeplearning4j/dl4j-examples/issues/351\" rel=\"noreferrer\">here</a> and Class NativeImageLoader from DL4J has provide the method, asMatrix(Mat image).\nBut when i tried to runing it i got an error </p>\n\n<blockquote>\n  <p>java: no suitable method found for asMatrix(org.opencv.core.Mat)</p>\n</blockquote>\n\n<p>I don't know how to fix it my code, or maybe there's something wrong with my code. Can anyone help me to find out the problem ?</p>\n\n<p>Btw here's my code :</p>\n\n<pre><code>Mat imgMat = Imgcodecs.imread(\"C:\\\\Pictures\\\\image.jpg\");\nINDArray image = loader.asMatrix(imgMat);\n</code></pre>\n\n<p>Thank you for your kind attention.</p>\n"},{"tags":["java","algorithm","recursion","matrix-multiplication"],"comments":[{"owner":{"display_name":"user16438868"},"score":0,"creation_date":1635956532,"post_id":69828241,"comment_id":123431874,"body_markdown":"multiply_normal is the method name that uses 3 for loops to multiply. The other is named `multiply`, which is a recursive way to multiply two matrices.","body":"multiply_normal is the method name that uses 3 for loops to multiply. The other is named <code>multiply</code>, which is a recursive way to multiply two matrices."},{"owner":{"account_id":4962253,"reputation":18492,"user_id":3992939,"accept_rate":73,"display_name":"c0der"},"score":1,"creation_date":1635957811,"post_id":69828241,"comment_id":123432475,"body_markdown":"TL;DR are you aware that in the given example n/2 = 1 ?","body":"TL;DR are you aware that in the given example n/2 = 1 ?"},{"owner":{"display_name":"user16438868"},"score":0,"creation_date":1635958045,"post_id":69828241,"comment_id":123432590,"body_markdown":"Ah you are right, thank you very much! I wasn&#39;t aware of it","body":"Ah you are right, thank you very much! I wasn&#39;t aware of it"}],"answers":[{"tags":[],"owner":{"account_id":4962253,"reputation":18492,"user_id":3992939,"accept_rate":73,"display_name":"c0der"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635958171,"creation_date":1635958171,"answer_id":69828713,"question_id":69828241,"body_markdown":"After having reviewed the code briefly: In the given example n/2 equals 1 which is probably not what you wanted.&lt;br/&gt;\r\nI expect both methods to produce the same result for an even size (say 4x4) matrix. ","title":"Square Matrix Multiply Recursive vs. Traditional Way","body":"<p>After having reviewed the code briefly: In the given example n/2 equals 1 which is probably not what you wanted.<br/>\nI expect both methods to produce the same result for an even size (say 4x4) matrix.</p>\n"}],"owner":{"display_name":"user16438868"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":152,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69828713,"answer_count":1,"score":1,"last_activity_date":1635958171,"creation_date":1635956105,"question_id":69828241,"body_markdown":"I implemented two algorithms for square matrix multiplication. `multiply_normal` is the traditional way, which uses 3 nested for loops and `multiply` is a recursive approach. \r\n\r\nHowever, even though the `multiply_normal` algorithm gives the correct output, the other algorithm seems to fail to output correct result.\r\n\r\nHere is the whole code: \r\n```\r\npublic class App {\r\n    public static void main(String[] args) throws Exception {\r\n        int a[][] = { { 1, 1, 1 }, { 2, 2, 2 }, { 3, 3, 3 } };\r\n        int b[][] = { { 1, 1, 1 }, { 2, 2, 2 }, { 3, 3, 3 } };\r\n\r\n        print(multiply_normal(a, b));\r\n\r\n        System.out.println();\r\n\r\n        print(multiply(a, b));\r\n\r\n    }\r\n\r\n    public static int[][] multiply(int[][] A, int[][] B) {\r\n\r\n        int n = A.length;\r\n\r\n        int[][] R = new int[n][n];\r\n\r\n        if (n == 1)\r\n\r\n            R[0][0] = A[0][0] * B[0][0];\r\n\r\n        else {\r\n\r\n            int[][] A11 = new int[n / 2][n / 2];\r\n            int[][] A12 = new int[n / 2][n / 2];\r\n            int[][] A21 = new int[n / 2][n / 2];\r\n            int[][] A22 = new int[n / 2][n / 2];\r\n            int[][] B11 = new int[n / 2][n / 2];\r\n            int[][] B12 = new int[n / 2][n / 2];\r\n            int[][] B21 = new int[n / 2][n / 2];\r\n            int[][] B22 = new int[n / 2][n / 2];\r\n\r\n            split(A, A11, 0, 0);\r\n            split(A, A12, 0, n / 2);\r\n            split(A, A21, n / 2, 0);\r\n            split(A, A22, n / 2, n / 2);\r\n\r\n            split(B, B11, 0, 0);\r\n            split(B, B12, 0, n / 2);\r\n            split(B, B21, n / 2, 0);\r\n            split(B, B22, n / 2, n / 2);\r\n\r\n            // P:=M2+M3−M6−M7\r\n            int[][] C11 = add(multiply(A11, B11), multiply(A12, B21));\r\n\r\n            // Q:=M4+M6\r\n            int[][] C12 = add(multiply(A11, B12), multiply(A12, B22));\r\n\r\n            // R:=M5+M7\r\n            int[][] C21 = add(multiply(A21, B11), multiply(A22, B21));\r\n\r\n            // S:=M1−M3−M4−M5\r\n            int[][] C22 = add(multiply(A21, B12), multiply(A22, B22));\r\n\r\n            // Step 3: Join 4 halves into one result matrix\r\n            join(C11, R, 0, 0);\r\n            join(C12, R, 0, n / 2);\r\n            join(C21, R, n / 2, 0);\r\n            join(C22, R, n / 2, n / 2);\r\n        }\r\n\r\n        // Step 4: Return result\r\n        return R;\r\n    }\r\n\r\n    // Method 2\r\n    // Function to subtract two matrices\r\n    public int[][] sub(int[][] A, int[][] B) {\r\n        //\r\n        int n = A.length;\r\n\r\n        //\r\n        int[][] C = new int[n][n];\r\n\r\n        // Iterating over elements of 2D matrix\r\n        // using nested for loops\r\n\r\n        // Outer loop for rows\r\n        for (int i = 0; i &lt; n; i++)\r\n\r\n            // Inner loop for columns\r\n            for (int j = 0; j &lt; n; j++)\r\n\r\n                // Subtracting corresponding elements\r\n                // from matrices\r\n                C[i][j] = A[i][j] - B[i][j];\r\n\r\n        // Returning the resultant matrix\r\n        return C;\r\n    }\r\n\r\n    // Method 3\r\n    // Function to add two matrices\r\n    public static int[][] add(int[][] A, int[][] B) {\r\n\r\n        //\r\n        int n = A.length;\r\n\r\n        // Creating a 2D square matrix\r\n        int[][] C = new int[n][n];\r\n\r\n        // Iterating over elements of 2D matrix\r\n        // using nested for loops\r\n\r\n        // Outer loop for rows\r\n        for (int i = 0; i &lt; n; i++)\r\n\r\n            // Inner loop for columns\r\n            for (int j = 0; j &lt; n; j++)\r\n\r\n                // Adding corresponding elements\r\n                // of matrices\r\n                C[i][j] = A[i][j] + B[i][j];\r\n\r\n        // Returning the resultant matrix\r\n        return C;\r\n    }\r\n\r\n    // Method 4\r\n    // Function to split parent matrix\r\n    // into child matrices\r\n    public static void split(int[][] P, int[][] C, int iB, int jB) {\r\n        // Iterating over elements of 2D matrix\r\n        // using nested for loops\r\n\r\n        // Outer loop for rows\r\n        for (int i1 = 0, i2 = iB; i1 &lt; C.length; i1++, i2++)\r\n\r\n            // Inner loop for columns\r\n            for (int j1 = 0, j2 = jB; j1 &lt; C.length; j1++, j2++)\r\n\r\n                C[i1][j1] = P[i2][j2];\r\n    }\r\n\r\n    // Method 5\r\n    // Function to join child matrices\r\n    // into (to) parent matrix\r\n    public static void join(int[][] C, int[][] P, int iB, int jB)\r\n\r\n    {\r\n        // Iterating over elements of 2D matrix\r\n        // using nested for loops\r\n\r\n        // Outer loop for rows\r\n        for (int i1 = 0, i2 = iB; i1 &lt; C.length; i1++, i2++)\r\n\r\n            // Inner loop for columns\r\n            for (int j1 = 0, j2 = jB; j1 &lt; C.length; j1++, j2++)\r\n\r\n                P[i2][j2] = C[i1][j1];\r\n    }\r\n\r\n    public static int[][] multiply_normal(int[][] A, int[][] B) {\r\n        int n = A.length;\r\n\r\n        int C[][] = new int[n][n];\r\n\r\n        for (int i = 0; i &lt; n; i++) {\r\n            for (int j = 0; j &lt; n; j++) {\r\n                C[i][j] = 0;\r\n                for (int k = 0; k &lt; n; k++) {\r\n                    C[i][j] = C[i][j] + A[i][k] * B[k][j];\r\n                }\r\n            }\r\n        }\r\n\r\n        return C;\r\n    }\r\n\r\n    public static void print(int[][] a) {\r\n        for (int i = 0; i &lt; a.length; i++) {\r\n            for (int k = 0; k &lt; a.length; k++) {\r\n                System.out.print(a[i][k] + &quot; &quot;);\r\n            }\r\n            System.out.println();\r\n        }\r\n    }\r\n}\r\n\r\n```\r\nThe output of `multiply_normal` (inputs are in the main method):\r\n```\r\n6 6 6 \r\n12 12 12 \r\n18 18 18 \r\n```\r\n\r\nThe output of `multiply`:\r\n```\r\n3 3 0 \r\n6 6 0 \r\n0 0 0 \r\n```\r\n\r\nSo, where am I mistaken? What should I do to fix that? I would really appreciate if you can help me.","title":"Square Matrix Multiply Recursive vs. Traditional Way","body":"<p>I implemented two algorithms for square matrix multiplication. <code>multiply_normal</code> is the traditional way, which uses 3 nested for loops and <code>multiply</code> is a recursive approach.</p>\n<p>However, even though the <code>multiply_normal</code> algorithm gives the correct output, the other algorithm seems to fail to output correct result.</p>\n<p>Here is the whole code:</p>\n<pre><code>public class App {\n    public static void main(String[] args) throws Exception {\n        int a[][] = { { 1, 1, 1 }, { 2, 2, 2 }, { 3, 3, 3 } };\n        int b[][] = { { 1, 1, 1 }, { 2, 2, 2 }, { 3, 3, 3 } };\n\n        print(multiply_normal(a, b));\n\n        System.out.println();\n\n        print(multiply(a, b));\n\n    }\n\n    public static int[][] multiply(int[][] A, int[][] B) {\n\n        int n = A.length;\n\n        int[][] R = new int[n][n];\n\n        if (n == 1)\n\n            R[0][0] = A[0][0] * B[0][0];\n\n        else {\n\n            int[][] A11 = new int[n / 2][n / 2];\n            int[][] A12 = new int[n / 2][n / 2];\n            int[][] A21 = new int[n / 2][n / 2];\n            int[][] A22 = new int[n / 2][n / 2];\n            int[][] B11 = new int[n / 2][n / 2];\n            int[][] B12 = new int[n / 2][n / 2];\n            int[][] B21 = new int[n / 2][n / 2];\n            int[][] B22 = new int[n / 2][n / 2];\n\n            split(A, A11, 0, 0);\n            split(A, A12, 0, n / 2);\n            split(A, A21, n / 2, 0);\n            split(A, A22, n / 2, n / 2);\n\n            split(B, B11, 0, 0);\n            split(B, B12, 0, n / 2);\n            split(B, B21, n / 2, 0);\n            split(B, B22, n / 2, n / 2);\n\n            // P:=M2+M3−M6−M7\n            int[][] C11 = add(multiply(A11, B11), multiply(A12, B21));\n\n            // Q:=M4+M6\n            int[][] C12 = add(multiply(A11, B12), multiply(A12, B22));\n\n            // R:=M5+M7\n            int[][] C21 = add(multiply(A21, B11), multiply(A22, B21));\n\n            // S:=M1−M3−M4−M5\n            int[][] C22 = add(multiply(A21, B12), multiply(A22, B22));\n\n            // Step 3: Join 4 halves into one result matrix\n            join(C11, R, 0, 0);\n            join(C12, R, 0, n / 2);\n            join(C21, R, n / 2, 0);\n            join(C22, R, n / 2, n / 2);\n        }\n\n        // Step 4: Return result\n        return R;\n    }\n\n    // Method 2\n    // Function to subtract two matrices\n    public int[][] sub(int[][] A, int[][] B) {\n        //\n        int n = A.length;\n\n        //\n        int[][] C = new int[n][n];\n\n        // Iterating over elements of 2D matrix\n        // using nested for loops\n\n        // Outer loop for rows\n        for (int i = 0; i &lt; n; i++)\n\n            // Inner loop for columns\n            for (int j = 0; j &lt; n; j++)\n\n                // Subtracting corresponding elements\n                // from matrices\n                C[i][j] = A[i][j] - B[i][j];\n\n        // Returning the resultant matrix\n        return C;\n    }\n\n    // Method 3\n    // Function to add two matrices\n    public static int[][] add(int[][] A, int[][] B) {\n\n        //\n        int n = A.length;\n\n        // Creating a 2D square matrix\n        int[][] C = new int[n][n];\n\n        // Iterating over elements of 2D matrix\n        // using nested for loops\n\n        // Outer loop for rows\n        for (int i = 0; i &lt; n; i++)\n\n            // Inner loop for columns\n            for (int j = 0; j &lt; n; j++)\n\n                // Adding corresponding elements\n                // of matrices\n                C[i][j] = A[i][j] + B[i][j];\n\n        // Returning the resultant matrix\n        return C;\n    }\n\n    // Method 4\n    // Function to split parent matrix\n    // into child matrices\n    public static void split(int[][] P, int[][] C, int iB, int jB) {\n        // Iterating over elements of 2D matrix\n        // using nested for loops\n\n        // Outer loop for rows\n        for (int i1 = 0, i2 = iB; i1 &lt; C.length; i1++, i2++)\n\n            // Inner loop for columns\n            for (int j1 = 0, j2 = jB; j1 &lt; C.length; j1++, j2++)\n\n                C[i1][j1] = P[i2][j2];\n    }\n\n    // Method 5\n    // Function to join child matrices\n    // into (to) parent matrix\n    public static void join(int[][] C, int[][] P, int iB, int jB)\n\n    {\n        // Iterating over elements of 2D matrix\n        // using nested for loops\n\n        // Outer loop for rows\n        for (int i1 = 0, i2 = iB; i1 &lt; C.length; i1++, i2++)\n\n            // Inner loop for columns\n            for (int j1 = 0, j2 = jB; j1 &lt; C.length; j1++, j2++)\n\n                P[i2][j2] = C[i1][j1];\n    }\n\n    public static int[][] multiply_normal(int[][] A, int[][] B) {\n        int n = A.length;\n\n        int C[][] = new int[n][n];\n\n        for (int i = 0; i &lt; n; i++) {\n            for (int j = 0; j &lt; n; j++) {\n                C[i][j] = 0;\n                for (int k = 0; k &lt; n; k++) {\n                    C[i][j] = C[i][j] + A[i][k] * B[k][j];\n                }\n            }\n        }\n\n        return C;\n    }\n\n    public static void print(int[][] a) {\n        for (int i = 0; i &lt; a.length; i++) {\n            for (int k = 0; k &lt; a.length; k++) {\n                System.out.print(a[i][k] + &quot; &quot;);\n            }\n            System.out.println();\n        }\n    }\n}\n\n</code></pre>\n<p>The output of <code>multiply_normal</code> (inputs are in the main method):</p>\n<pre><code>6 6 6 \n12 12 12 \n18 18 18 \n</code></pre>\n<p>The output of <code>multiply</code>:</p>\n<pre><code>3 3 0 \n6 6 0 \n0 0 0 \n</code></pre>\n<p>So, where am I mistaken? What should I do to fix that? I would really appreciate if you can help me.</p>\n"},{"tags":["java","activemq-artemis"],"comments":[{"owner":{"account_id":10473591,"reputation":858,"user_id":7720801,"display_name":"LDropl"},"score":0,"creation_date":1635950536,"post_id":69821064,"comment_id":123429101,"body_markdown":"I had the same error with that url too. I added acceptors in my main post","body":"I had the same error with that url too. I added acceptors in my main post"},{"owner":{"account_id":10473591,"reputation":858,"user_id":7720801,"display_name":"LDropl"},"score":0,"creation_date":1635951546,"post_id":69821064,"comment_id":123429565,"body_markdown":"Do you mean without sslEnabled thing and other stuff, right ?","body":"Do you mean without sslEnabled thing and other stuff, right ?"},{"owner":{"account_id":10473591,"reputation":858,"user_id":7720801,"display_name":"LDropl"},"score":0,"creation_date":1635956311,"post_id":69821064,"comment_id":123431769,"body_markdown":"Unfortunately it didnt help, same error","body":"Unfortunately it didnt help, same error"},{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1635957956,"post_id":69821064,"comment_id":123432548,"body_markdown":"Can you ping the broker from the client?","body":"Can you ping the broker from the client?"},{"owner":{"account_id":10473591,"reputation":858,"user_id":7720801,"display_name":"LDropl"},"score":0,"creation_date":1636009734,"post_id":69821064,"comment_id":123444706,"body_markdown":"The ping was working. I tried also to run this consumer client on the same server where is broker running and it was same error","body":"The ping was working. I tried also to run this consumer client on the same server where is broker running and it was same error"},{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1636125629,"post_id":69821064,"comment_id":123481186,"body_markdown":"So the broker and the client are running on the *same* machine and the client and broker both using `tcp://amq1:61616` for the URL and acceptor respectively and you&#39;re still getting, &quot;AMQ219007: Cannot connect to server(s). Tried with all available servers.&quot;? If so, are you sure nothing is blocking connections on port `61616`.","body":"So the broker and the client are running on the <i>same</i> machine and the client and broker both using <code>tcp:&#47;&#47;amq1:61616</code> for the URL and acceptor respectively and you&#39;re still getting, &quot;AMQ219007: Cannot connect to server(s). Tried with all available servers.&quot;? If so, are you sure nothing is blocking connections on port <code>61616</code>."},{"owner":{"account_id":10473591,"reputation":858,"user_id":7720801,"display_name":"LDropl"},"score":0,"creation_date":1636125868,"post_id":69821064,"comment_id":123481295,"body_markdown":"Using another port for acceptor should solve this problem with blocking connection on specific port right ?","body":"Using another port for acceptor should solve this problem with blocking connection on specific port right ?"},{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1636127345,"post_id":69821064,"comment_id":123481890,"body_markdown":"It should work unless the other port you choose is also blocked (assuming that port blocking is the problem).","body":"It should work unless the other port you choose is also blocked (assuming that port blocking is the problem)."},{"owner":{"account_id":10473591,"reputation":858,"user_id":7720801,"display_name":"LDropl"},"score":0,"creation_date":1636352941,"post_id":69821064,"comment_id":123523929,"body_markdown":"@JustinBertram but why then message producer works which is using the same connection url ? The message producer are running also on the same machine and works","body":"@JustinBertram but why then message producer works which is using the same connection url ? The message producer are running also on the same machine and works"}],"owner":{"account_id":10473591,"reputation":858,"user_id":7720801,"display_name":"LDropl"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":621,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1635958111,"creation_date":1635924529,"question_id":69821064,"body_markdown":"I&#39;m trying to consume messages from Artemis ActiveMQ version 2.19.0 with Spring Boot application but I&#39;m getting error\r\n\r\n```\r\n2021-11-02 14:47:49.810 ERROR 4100 --- [enerContainer-1] o.s.j.l.DefaultMessageListenerContainer  : Could not refresh JMS Connection for destination &#39;exampleQueue&#39; - retrying using FixedBackOff{interval=5000, currentAttempts=39, maxAttempts=unlimited}. Cause: Failed to create session factory; nested exception is ActiveMQNotConnectedException[errorType=NOT_CONNECTED message=AMQ219007: Cannot connect to server(s). Tried with all available servers.]\r\n```\r\n\r\n```java\r\n@SpringBootApplication\r\n@EnableJms\r\npublic class SpringJmsConsumerApplication {\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(SpringJmsConsumerApplication.class, args);\r\n    }\r\n\r\n    @Bean\r\n    public ActiveMQConnectionFactory jmsFactory() throws JMSException {\r\n        ActiveMQConnectionFactory factory = new ActiveMQConnectionFactory(\r\n                &quot;(tcp://amq1:61616,tcp://amq2:61616,tcp://amq3:61616)?&quot; +\r\n                        &quot;ha=true&amp;sslEnabled=true&quot; +\r\n                        &quot;&amp;trustStorePath=/home/broker_ts.p12&amp;trustStorePassword=12345&quot;\r\n                        + &quot;&amp;keyStorePath=/home/client_ks.p12&amp;keyStorePassword=123456&quot;\r\n        );\r\n        factory.createConnection(&quot;admin&quot;, &quot;admin&quot;);\r\n        factory.setRetryInterval(1000);\r\n        factory.setRetryIntervalMultiplier(1.0);\r\n        factory.setReconnectAttempts(-1);\r\n        factory.setConfirmationWindowSize(10);\r\n        return factory;\r\n    }\r\n\r\n    @Bean\r\n    public JmsTemplate jmsTemplate() throws JMSException {\r\n        return new JmsTemplate(jmsFactory());\r\n    }\r\n\r\n    @Bean\r\n    public Consumer consumer() {\r\n        return new Consumer();\r\n    }\r\n\r\n}\r\n\r\npublic class Consumer {\r\n    @Autowired\r\n    JmsTemplate jmsTemplate;\r\n\r\n    @JmsListener(destination = &quot;jms:queue:exampleQueue&quot;)\r\n    public void receive(@Payload String msg, @Header(&quot;_AMQ_DUPL_ID&quot;) String messageId) {\r\n        System.out.println(&quot;Received message: &quot;  + messageId);\r\n    }\r\n}\r\n```\r\nI also tried to simplify the client&#39;s URL, e.g.:\r\n```java\r\n    @Bean\r\n    public ActiveMQConnectionFactory jmsFactory() throws JMSException {\r\n        ActiveMQConnectionFactory factory = new ActiveMQConnectionFactory(\r\n                &quot;tcp://amq1:61616&quot;\r\n        );\r\n        factory.createConnection(&quot;admin&quot;, &quot;admin&quot;);\r\n        factory.setRetryInterval(1000);\r\n        factory.setRetryIntervalMultiplier(1.0);\r\n        factory.setReconnectAttempts(-1);\r\n        factory.setConfirmationWindowSize(10);\r\n        return factory;\r\n    }\r\n```\r\n\r\nI also tried to use `@JmsListener(destination=&quot;exampleQueue&quot;)`, but I had the same error.\r\n\r\nI had similar implementation for message producer with same Artemis connection url and I was using the same certificates and it was working fine.\r\n\r\nAny ideas what&#39;s wrong in my implementation?\r\n\r\nHere is the `acceptors` from `broker.xml` on the `amq1` broker:\r\n```xml\r\n&lt;acceptors&gt;\r\n   &lt;acceptor name=&quot;netty-acceptor&quot;&gt;tcp://amq1:61616?sslEnabled=true;keyStorePath=/home/broker_ts.p12;keyStorePassword=12345&lt;/acceptor&gt;\r\n&lt;/acceptors&gt;\r\n```\r\nOn `amq2` and `amq3` I have `amq2:61616` and `amq3:61616` respectively. This is the only difference.\r\n\r\nI also tried a simplified `acceptor`:\r\n```xml\r\n&lt;acceptors&gt;\r\n   &lt;acceptor name=&quot;netty-acceptor&quot;&gt;tcp://amq1:61616&lt;/acceptor&gt;\r\n&lt;/acceptors&gt;\r\n```","title":"JMS message consumer could not receive messages from ActiveMQ Artemis","body":"<p>I'm trying to consume messages from Artemis ActiveMQ version 2.19.0 with Spring Boot application but I'm getting error</p>\n<pre><code>2021-11-02 14:47:49.810 ERROR 4100 --- [enerContainer-1] o.s.j.l.DefaultMessageListenerContainer  : Could not refresh JMS Connection for destination 'exampleQueue' - retrying using FixedBackOff{interval=5000, currentAttempts=39, maxAttempts=unlimited}. Cause: Failed to create session factory; nested exception is ActiveMQNotConnectedException[errorType=NOT_CONNECTED message=AMQ219007: Cannot connect to server(s). Tried with all available servers.]\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\n@EnableJms\npublic class SpringJmsConsumerApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(SpringJmsConsumerApplication.class, args);\n    }\n\n    @Bean\n    public ActiveMQConnectionFactory jmsFactory() throws JMSException {\n        ActiveMQConnectionFactory factory = new ActiveMQConnectionFactory(\n                &quot;(tcp://amq1:61616,tcp://amq2:61616,tcp://amq3:61616)?&quot; +\n                        &quot;ha=true&amp;sslEnabled=true&quot; +\n                        &quot;&amp;trustStorePath=/home/broker_ts.p12&amp;trustStorePassword=12345&quot;\n                        + &quot;&amp;keyStorePath=/home/client_ks.p12&amp;keyStorePassword=123456&quot;\n        );\n        factory.createConnection(&quot;admin&quot;, &quot;admin&quot;);\n        factory.setRetryInterval(1000);\n        factory.setRetryIntervalMultiplier(1.0);\n        factory.setReconnectAttempts(-1);\n        factory.setConfirmationWindowSize(10);\n        return factory;\n    }\n\n    @Bean\n    public JmsTemplate jmsTemplate() throws JMSException {\n        return new JmsTemplate(jmsFactory());\n    }\n\n    @Bean\n    public Consumer consumer() {\n        return new Consumer();\n    }\n\n}\n\npublic class Consumer {\n    @Autowired\n    JmsTemplate jmsTemplate;\n\n    @JmsListener(destination = &quot;jms:queue:exampleQueue&quot;)\n    public void receive(@Payload String msg, @Header(&quot;_AMQ_DUPL_ID&quot;) String messageId) {\n        System.out.println(&quot;Received message: &quot;  + messageId);\n    }\n}\n</code></pre>\n<p>I also tried to simplify the client's URL, e.g.:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Bean\n    public ActiveMQConnectionFactory jmsFactory() throws JMSException {\n        ActiveMQConnectionFactory factory = new ActiveMQConnectionFactory(\n                &quot;tcp://amq1:61616&quot;\n        );\n        factory.createConnection(&quot;admin&quot;, &quot;admin&quot;);\n        factory.setRetryInterval(1000);\n        factory.setRetryIntervalMultiplier(1.0);\n        factory.setReconnectAttempts(-1);\n        factory.setConfirmationWindowSize(10);\n        return factory;\n    }\n</code></pre>\n<p>I also tried to use <code>@JmsListener(destination=&quot;exampleQueue&quot;)</code>, but I had the same error.</p>\n<p>I had similar implementation for message producer with same Artemis connection url and I was using the same certificates and it was working fine.</p>\n<p>Any ideas what's wrong in my implementation?</p>\n<p>Here is the <code>acceptors</code> from <code>broker.xml</code> on the <code>amq1</code> broker:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;acceptors&gt;\n   &lt;acceptor name=&quot;netty-acceptor&quot;&gt;tcp://amq1:61616?sslEnabled=true;keyStorePath=/home/broker_ts.p12;keyStorePassword=12345&lt;/acceptor&gt;\n&lt;/acceptors&gt;\n</code></pre>\n<p>On <code>amq2</code> and <code>amq3</code> I have <code>amq2:61616</code> and <code>amq3:61616</code> respectively. This is the only difference.</p>\n<p>I also tried a simplified <code>acceptor</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;acceptors&gt;\n   &lt;acceptor name=&quot;netty-acceptor&quot;&gt;tcp://amq1:61616&lt;/acceptor&gt;\n&lt;/acceptors&gt;\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8107,"page":1885,"page_size":100}
