{"items":[{"tags":["java","android","string","list","arraylist"],"comments":[{"owner":{"account_id":8082223,"reputation":234,"user_id":6090993,"display_name":"Julius Zaldokas"},"score":0,"creation_date":1530094578,"post_id":51060141,"comment_id":89110314,"body_markdown":"How do you output the list?","body":"How do you output the list?"},{"owner":{"account_id":7649524,"reputation":333,"user_id":5798856,"display_name":"Efthimis_28"},"score":0,"creation_date":1530094767,"post_id":51060141,"comment_id":89110423,"body_markdown":"How is the language list formatted?","body":"How is the language list formatted?"},{"owner":{"account_id":13640858,"reputation":3,"user_id":9840893,"display_name":"Ram Trans"},"score":0,"creation_date":1530095035,"post_id":51060141,"comment_id":89110586,"body_markdown":"after putting `langList` to JSONObject","body":"after putting <code>langList</code> to JSONObject"}],"answers":[{"tags":[],"owner":{"account_id":13785918,"reputation":309,"user_id":9949857,"display_name":"Ravi Patel"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1530095474,"creation_date":1530094746,"answer_id":51060273,"question_id":51060141,"body_markdown":"Add double quotes for items using this:   \r\n\r\n\r\n        List&lt;String&gt; langList = new ArrayList&lt;&gt;();\r\n        for (Language obj : language) {\r\n            langList.add(&#39;&quot;&#39;+obj.getCode()+&#39;&quot;&#39;);\r\n        }","title":"List item with double quotes","body":"<p>Add double quotes for items using this:   </p>\n\n<pre><code>    List&lt;String&gt; langList = new ArrayList&lt;&gt;();\n    for (Language obj : language) {\n        langList.add('\"'+obj.getCode()+'\"');\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10895208,"reputation":5019,"user_id":8009433,"display_name":"Navneet Krishna"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1530094752,"creation_date":1530094752,"answer_id":51060280,"question_id":51060141,"body_markdown":"try this\r\n\r\n    List&lt;String&gt; langList = new ArrayList&lt;&gt;();\r\n    for (Language obj : language) {\r\n        langList.add(&#39;&quot;&#39;+obj.getCode()+&#39;&quot;&#39;);\r\n    }","title":"List item with double quotes","body":"<p>try this</p>\n\n<pre><code>List&lt;String&gt; langList = new ArrayList&lt;&gt;();\nfor (Language obj : language) {\n    langList.add('\"'+obj.getCode()+'\"');\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11260438,"reputation":5143,"user_id":8258942,"accept_rate":0,"display_name":"Nitin Bisht"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1530094929,"creation_date":1530094929,"answer_id":51060343,"question_id":51060141,"body_markdown":"You can simply use:\r\n\r\n    langList.add(&#39;&quot;&#39; + obj.getCode() + &#39;&quot;&#39;);","title":"List item with double quotes","body":"<p>You can simply use:</p>\n\n<pre><code>langList.add('\"' + obj.getCode() + '\"');\n</code></pre>\n"},{"tags":[],"owner":{"account_id":218061,"reputation":6484,"user_id":474193,"display_name":"sunil"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1530096836,"creation_date":1530096836,"answer_id":51060985,"question_id":51060141,"body_markdown":"I have added an extra &quot; to both sides before adding them to the list. PFB the code snippet.\r\n\r\n    String array[] = new String[] {&quot;en&quot;,&quot;ta&quot;, &quot;hi&quot;};\r\n\tList&lt;String&gt; langList = new ArrayList&lt;&gt;();\r\n\tfor (String item : array) {\r\n\t\tlangList.add(&quot;\\&quot;&quot;+item+&quot;\\&quot;&quot;);\r\n\t}\r\n\t\r\n\tSystem.out.println(&quot;langList: &quot;+ langList);\r\n\t\r\n\ttry {\r\n\t\tJSONArray jsonObject = new JSONArray(langList.toString());\r\n\t\tSystem.out.println(&quot;jsonObject: &quot;+jsonObject);\r\n\t} catch (JSONException e) {\r\n\t\te.printStackTrace();\r\n\t}\r\n\r\nI could see below logs in console.\r\n\r\n\tlangList: [&quot;en&quot;, &quot;ta&quot;, &quot;hi&quot;]\r\n\tjsonObject: [&quot;en&quot;,&quot;ta&quot;,&quot;hi&quot;]\r\n\r\nHope this helps.\r\n\r\nNote: Used `org.json.JSONArray` and `org.json.JSONException` classes in above code.","title":"List item with double quotes","body":"<p>I have added an extra \" to both sides before adding them to the list. PFB the code snippet.</p>\n\n<pre><code>String array[] = new String[] {\"en\",\"ta\", \"hi\"};\nList&lt;String&gt; langList = new ArrayList&lt;&gt;();\nfor (String item : array) {\n    langList.add(\"\\\"\"+item+\"\\\"\");\n}\n\nSystem.out.println(\"langList: \"+ langList);\n\ntry {\n    JSONArray jsonObject = new JSONArray(langList.toString());\n    System.out.println(\"jsonObject: \"+jsonObject);\n} catch (JSONException e) {\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>I could see below logs in console.</p>\n\n<pre><code>langList: [\"en\", \"ta\", \"hi\"]\njsonObject: [\"en\",\"ta\",\"hi\"]\n</code></pre>\n\n<p>Hope this helps.</p>\n\n<p>Note: Used <code>org.json.JSONArray</code> and <code>org.json.JSONException</code> classes in above code.</p>\n"}],"owner":{"account_id":13640858,"reputation":3,"user_id":9840893,"display_name":"Ram Trans"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3096,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":51060985,"answer_count":4,"score":0,"last_activity_date":1660236888,"creation_date":1530094410,"question_id":51060141,"body_markdown":"I want list item should be with double quotes.\r\ni tried like this :\r\n\r\n    List&lt;String&gt; langList = new ArrayList&lt;&gt;();\r\n        for (Language obj : language) {\r\n            langList.add(obj.getCode());\r\n        }\r\n    JSONObject where = new JSONObject();\r\n    try {\r\n        JSONObject languages = new JSONObject();\r\n        languages.put(&quot;$in&quot;, langList);\r\n        where.put(&quot;languages&quot;, languages);\r\n        } catch (JSONException e) {\r\n            e.printStackTrace();\r\n        }\r\nresult of `langList` is : `&quot;[en, ta, hi]&quot;`\r\nand I added double quotes for items using `langList.add(&quot;\\&quot;&quot; + obj.getCode() + &quot;\\&quot;&quot;);`\r\n\r\nnow, It returns the result is : `&quot;[\\&quot;en\\&quot;, \\&quot;ta\\&quot;, \\&quot;hi\\&quot;]&quot;`\r\n\r\nI don&#39;t want outside double quotes also.\r\n\r\nam expecting result is : `[&quot;en&quot;, &quot;ta&quot;, &quot;hi&quot;]`","title":"List item with double quotes","body":"<p>I want list item should be with double quotes.\ni tried like this :</p>\n\n<pre><code>List&lt;String&gt; langList = new ArrayList&lt;&gt;();\n    for (Language obj : language) {\n        langList.add(obj.getCode());\n    }\nJSONObject where = new JSONObject();\ntry {\n    JSONObject languages = new JSONObject();\n    languages.put(\"$in\", langList);\n    where.put(\"languages\", languages);\n    } catch (JSONException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n\n<p>result of <code>langList</code> is : <code>\"[en, ta, hi]\"</code>\nand I added double quotes for items using <code>langList.add(\"\\\"\" + obj.getCode() + \"\\\"\");</code></p>\n\n<p>now, It returns the result is : <code>\"[\\\"en\\\", \\\"ta\\\", \\\"hi\\\"]\"</code></p>\n\n<p>I don't want outside double quotes also.</p>\n\n<p>am expecting result is : <code>[\"en\", \"ta\", \"hi\"]</code></p>\n"},{"tags":["java","arrays","methods"],"answers":[{"tags":[],"owner":{"account_id":3262328,"reputation":2135,"user_id":2747642,"display_name":"Sree Kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638859482,"creation_date":1638859482,"answer_id":70255889,"question_id":70255759,"body_markdown":"Here&#39;s a changed version. You have to use a nested `for` loop - the first iterates over the input `String[]` and the nested one over the `char[]` in each string. \r\n\r\nI have also used some variables in place of repeated array references for easy reading.\r\n\r\n```java\r\npublic class StrArray{\r\n\tpublic static void main( String[] args ){\r\n\t\tString[] input = new String[]{ &quot;Hel123&amp;$$o&quot;, &quot;#$%World&quot;, &quot;###&quot; };\r\n\t\tString[] strArr = removeCharacters( input );\r\n\t\tArrays.stream( strArr ).forEach( s -&gt; System.out.println( &quot;&#39;&quot; + s + &quot;&#39;&quot; ) );\r\n\t}\r\n\r\n\tpublic static String[] removeCharacters( String[] arr ){\r\n\t\tString[] str = new String[ arr.length ];\r\n\r\n\t\tfor( int i = 0; i &lt; arr.length; i++ ){\r\n\t\t\tString input = arr[ i ];\r\n\t\t\t\r\n\t\t\t/* If the input string in empty, skip.*/\r\n\t\t\tint k = 0;\r\n\t\t\tif( input == null || input.length() == 0 )\r\n\t\t\t\tstr[ i ] = &quot;&quot;;\r\n\t\t\telse{\r\n\t\t\t\t/* Construct a char[] containing all the relevant chars. */\r\n\t\t\t\tchar[] chars = new char[ input.length() ];\r\n\t\t\t\tfor( int j = 0; j &lt; input.length(); j++ ){\r\n\t\t\t\t\tchar c = input.charAt( j );\r\n\t\t\t\t\tif( Character.isLetter( c ) ) chars[ k++ ] = c;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/* Now, convert the char[] into a string. */\r\n\t\t\t\tstr[ i ] = String.valueOf( chars, 0, k );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn str;\r\n\t}\r\n}\r\n```\r\n\r\nI have quoted each string while printing. Hence, running this gives the following output.\r\n```\r\n&#39;Helo&#39;\r\n&#39;World&#39;\r\n&#39;&#39;\r\n```","title":"Removing specific characters from the elements in an array","body":"<p>Here's a changed version. You have to use a nested <code>for</code> loop - the first iterates over the input <code>String[]</code> and the nested one over the <code>char[]</code> in each string.</p>\n<p>I have also used some variables in place of repeated array references for easy reading.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class StrArray{\n    public static void main( String[] args ){\n        String[] input = new String[]{ &quot;Hel123&amp;$$o&quot;, &quot;#$%World&quot;, &quot;###&quot; };\n        String[] strArr = removeCharacters( input );\n        Arrays.stream( strArr ).forEach( s -&gt; System.out.println( &quot;'&quot; + s + &quot;'&quot; ) );\n    }\n\n    public static String[] removeCharacters( String[] arr ){\n        String[] str = new String[ arr.length ];\n\n        for( int i = 0; i &lt; arr.length; i++ ){\n            String input = arr[ i ];\n            \n            /* If the input string in empty, skip.*/\n            int k = 0;\n            if( input == null || input.length() == 0 )\n                str[ i ] = &quot;&quot;;\n            else{\n                /* Construct a char[] containing all the relevant chars. */\n                char[] chars = new char[ input.length() ];\n                for( int j = 0; j &lt; input.length(); j++ ){\n                    char c = input.charAt( j );\n                    if( Character.isLetter( c ) ) chars[ k++ ] = c;\n                }\n\n                /* Now, convert the char[] into a string. */\n                str[ i ] = String.valueOf( chars, 0, k );\n            }\n        }\n\n        return str;\n    }\n}\n</code></pre>\n<p>I have quoted each string while printing. Hence, running this gives the following output.</p>\n<pre><code>'Helo'\n'World'\n''\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23570669,"reputation":84,"user_id":17610846,"display_name":"Juan C."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660236142,"creation_date":1638862470,"answer_id":70256395,"question_id":70255759,"body_markdown":"The problem is that you are iterating over the array of strings but not over the array of characters of each string. You can use a loop to iterate over the array of Strings and a nested loop to iterate over the characters of each String.\r\n \r\nHere I&#39;m using StringBuilder to concatenate the Strings since it is more efficient than using `+`. This is because the String object is immutable, so each call for concatenation will create a new String object. On the other hand, StringBuilder is a mutable array of characters.\r\n\r\n\r\n\r\n\r\n    import java.util.Arrays;\r\n    \r\n    public class MyClass {\r\n        public static void main(String args[]) {\r\n\r\n            String[] stringArray = \r\n            new String[]{ &quot;Hell123&amp;$$o&quot;, &quot;#$%World&quot;, &quot;###&quot; };\r\n            System.out.println(\r\n            Arrays.toString(removeCharacters(stringArray)));\r\n        }\r\n    \r\n        public static String[] removeCharacters(String[] arr) {\r\n            String[] str = new String[arr.length];\r\n    \r\n            for (int i = 0; i &lt; arr.length; i++) {\r\n                StringBuilder strBuilder = new StringBuilder();\r\n                for (int j = 0; j &lt; arr[i].length(); j++) {\r\n                    if (Character.isLetter(arr[i].charAt(j)))\r\n                        strBuilder.append(arr[i].charAt(j));\r\n                }\r\n                str[i] = strBuilder.toString();\r\n            }\r\n            return str;\r\n        }\r\n    }\r\n\r\n\r\n\r\n","title":"Removing specific characters from the elements in an array","body":"<p>The problem is that you are iterating over the array of strings but not over the array of characters of each string. You can use a loop to iterate over the array of Strings and a nested loop to iterate over the characters of each String.</p>\n<p>Here I'm using StringBuilder to concatenate the Strings since it is more efficient than using <code>+</code>. This is because the String object is immutable, so each call for concatenation will create a new String object. On the other hand, StringBuilder is a mutable array of characters.</p>\n<pre><code>import java.util.Arrays;\n\npublic class MyClass {\n    public static void main(String args[]) {\n\n        String[] stringArray = \n        new String[]{ &quot;Hell123&amp;$$o&quot;, &quot;#$%World&quot;, &quot;###&quot; };\n        System.out.println(\n        Arrays.toString(removeCharacters(stringArray)));\n    }\n\n    public static String[] removeCharacters(String[] arr) {\n        String[] str = new String[arr.length];\n\n        for (int i = 0; i &lt; arr.length; i++) {\n            StringBuilder strBuilder = new StringBuilder();\n            for (int j = 0; j &lt; arr[i].length(); j++) {\n                if (Character.isLetter(arr[i].charAt(j)))\n                    strBuilder.append(arr[i].charAt(j));\n            }\n            str[i] = strBuilder.toString();\n        }\n        return str;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23009009,"reputation":43,"user_id":17131783,"display_name":"brmk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":599,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1660236142,"creation_date":1638858509,"question_id":70255759,"body_markdown":"    public static String[] removeCharacters(String[] arr){\r\n\r\n\r\n        String[] str = new String[arr.length];\r\n\r\n        for (int i = 0; i &lt;arr.length; i++) {\r\n            if(Character.isLetter(arr[i].charAt(i)))\r\n                str[i] += arr[i].charAt(i);\r\n            else\r\n                str[i] = &quot;&quot;;\r\n        }\r\n        return str;\r\n    }\r\n\r\nI&#39;m trying to write a method that returns to String array and takes an String array argument.\r\nI need remove special characters from the element and return the element without specials.\r\n\r\n* For example;\r\n[&quot;Hel123&amp;$$o&quot;, &quot;#$%World&quot;, &quot;###&quot;]\r\nwill return to\r\n* [&quot;Hello&quot;, &quot;World&quot;, &quot;&quot;,] as a output.\r\n* I also converted back to String, remove those special characters and split back again to an Array but when i convert to String it all comes together and there is no split point and I don&#39;t want to do it with Regex so i&#39;m trying to do without it. With my solution I&#39;m getting null so i couldn&#39;t fix.","title":"Removing specific characters from the elements in an array","body":"<pre><code>public static String[] removeCharacters(String[] arr){\n\n\n    String[] str = new String[arr.length];\n\n    for (int i = 0; i &lt;arr.length; i++) {\n        if(Character.isLetter(arr[i].charAt(i)))\n            str[i] += arr[i].charAt(i);\n        else\n            str[i] = &quot;&quot;;\n    }\n    return str;\n}\n</code></pre>\n<p>I'm trying to write a method that returns to String array and takes an String array argument.\nI need remove special characters from the element and return the element without specials.</p>\n<ul>\n<li>For example;\n[&quot;Hel123&amp;$$o&quot;, &quot;#$%World&quot;, &quot;###&quot;]\nwill return to</li>\n<li>[&quot;Hello&quot;, &quot;World&quot;, &quot;&quot;,] as a output.</li>\n<li>I also converted back to String, remove those special characters and split back again to an Array but when i convert to String it all comes together and there is no split point and I don't want to do it with Regex so i'm trying to do without it. With my solution I'm getting null so i couldn't fix.</li>\n</ul>\n"},{"tags":["java","debugging","visual-studio-code"],"comments":[{"owner":{"account_id":62272,"reputation":15103,"user_id":185123,"accept_rate":74,"display_name":"spottedmahn"},"score":0,"creation_date":1660235918,"post_id":60046797,"comment_id":129490777,"body_markdown":"GitHub Issue: [Break on exception in Java for “just my code”](https://github.com/microsoft/vscode-java-debug/issues/756)","body":"GitHub Issue: <a href=\"https://github.com/microsoft/vscode-java-debug/issues/756\" rel=\"nofollow noreferrer\">Break on exception in Java for “just my code”</a>"}],"answers":[{"tags":[],"owner":{"account_id":62272,"reputation":15103,"user_id":185123,"accept_rate":74,"display_name":"spottedmahn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660236011,"creation_date":1660236011,"answer_id":73324206,"question_id":60046797,"body_markdown":"&gt;In the new 0.27.0, when you want to break on exception for &quot;Just My Code&quot;, you can add the following settings for that.\r\n[source][1]\r\n\r\n    &quot;java.debug.settings.exceptionBreakpoint.skipClasses&quot;: [\r\n        &quot;$JDK&quot;, // Skip the JDK classes from the default system bootstrap classpath, such as rt.jar, jrt-fs.jar.\r\n        &quot;$Libraries&quot;, // Skip the classes from application libraries, such as Maven, Gradle dependencies.\r\n        // &quot;java.myPackage.myClass&quot;\r\n    ],\r\n\r\n\r\n  [1]: https://github.com/microsoft/vscode-java-debug/issues/756#issuecomment-659264364","title":"Break on exception in Java for &quot;just my code&quot;","body":"<blockquote>\n<p>In the new 0.27.0, when you want to break on exception for &quot;Just My Code&quot;, you can add the following settings for that.\n<a href=\"https://github.com/microsoft/vscode-java-debug/issues/756#issuecomment-659264364\" rel=\"nofollow noreferrer\">source</a></p>\n</blockquote>\n<pre><code>&quot;java.debug.settings.exceptionBreakpoint.skipClasses&quot;: [\n    &quot;$JDK&quot;, // Skip the JDK classes from the default system bootstrap classpath, such as rt.jar, jrt-fs.jar.\n    &quot;$Libraries&quot;, // Skip the classes from application libraries, such as Maven, Gradle dependencies.\n    // &quot;java.myPackage.myClass&quot;\n],\n</code></pre>\n"}],"owner":{"account_id":62272,"reputation":15103,"user_id":185123,"accept_rate":74,"display_name":"spottedmahn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":434,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":73324206,"answer_count":1,"score":6,"last_activity_date":1660236011,"creation_date":1580762223,"question_id":60046797,"body_markdown":"In a Java project, how can I configure **VS Code** to only break on an exception in **&quot;just my code&quot;**?  I&#39;ve messed around w/ the `Uncaught Exceptions` &amp; `Caught Exceptions` but they are not scoped to my code.\r\n\r\nIt seems like a generic feature was implemented, [Debug Protocol: Support more flexible handling of exceptions][1], but I&#39;m not sure how to apply it to a Java project.\r\n\r\n&gt;We&#39;ve added support for exception configuration to the debug protocol ([microsoft/vscode-debugadapter-node#64][1]).  [Source][2]\r\n\r\n---\r\n\r\nI see there&#39;s [an option for Node.js][3]:\r\n\r\n&gt;VS Code Node.js debugging has a feature to avoid source code that you don&#39;t want to step through (AKA &#39;Just My Code&#39;). This feature can be enabled with the `skipFiles` attribute in your launch configuration. `skipFiles` is an array of glob patterns for script paths to skip.\r\n\r\n---\r\n\r\nSomething like [Visual Studio -&gt; Enable or disable Just My Code][4].\r\n\r\n\r\n  [1]: https://github.com/microsoft/vscode-debugadapter-node/issues/64\r\n  [2]: https://github.com/microsoft/vscode/issues/11552#issuecomment-264884939\r\n  [3]: https://code.visualstudio.com/docs/nodejs/nodejs-debugging#_skipping-uninteresting-code-node-chrome\r\n  [4]: https://learn.microsoft.com/en-us/visualstudio/debugger/just-my-code?view=vs-2019#BKMK_Enable_or_disable_Just_My_Code","title":"Break on exception in Java for &quot;just my code&quot;","body":"<p>In a Java project, how can I configure <strong>VS Code</strong> to only break on an exception in <strong>\"just my code\"</strong>?  I've messed around w/ the <code>Uncaught Exceptions</code> &amp; <code>Caught Exceptions</code> but they are not scoped to my code.</p>\n\n<p>It seems like a generic feature was implemented, <a href=\"https://github.com/microsoft/vscode-debugadapter-node/issues/64\" rel=\"noreferrer\">Debug Protocol: Support more flexible handling of exceptions</a>, but I'm not sure how to apply it to a Java project.</p>\n\n<blockquote>\n  <p>We've added support for exception configuration to the debug protocol (<a href=\"https://github.com/microsoft/vscode-debugadapter-node/issues/64\" rel=\"noreferrer\">microsoft/vscode-debugadapter-node#64</a>).  <a href=\"https://github.com/microsoft/vscode/issues/11552#issuecomment-264884939\" rel=\"noreferrer\">Source</a></p>\n</blockquote>\n\n<hr>\n\n<p>I see there's <a href=\"https://code.visualstudio.com/docs/nodejs/nodejs-debugging#_skipping-uninteresting-code-node-chrome\" rel=\"noreferrer\">an option for Node.js</a>:</p>\n\n<blockquote>\n  <p>VS Code Node.js debugging has a feature to avoid source code that you don't want to step through (AKA 'Just My Code'). This feature can be enabled with the <code>skipFiles</code> attribute in your launch configuration. <code>skipFiles</code> is an array of glob patterns for script paths to skip.</p>\n</blockquote>\n\n<hr>\n\n<p>Something like <a href=\"https://learn.microsoft.com/en-us/visualstudio/debugger/just-my-code?view=vs-2019#BKMK_Enable_or_disable_Just_My_Code\" rel=\"noreferrer\">Visual Studio -> Enable or disable Just My Code</a>.</p>\n"},{"tags":["java","arrays","swing","arraylist"],"comments":[{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":2,"creation_date":1660146666,"post_id":73309203,"comment_id":129465546,"body_markdown":"Make a field for that arraylist and use that. You need something that lasts longer than a method invocation. That is what fields are for.","body":"Make a field for that arraylist and use that. You need something that lasts longer than a method invocation. That is what fields are for."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1660169961,"post_id":73309203,"comment_id":129472705,"body_markdown":"unrelated: __never-ever__ do any manual sizing or locating, instead use a suitable layoutManager","body":"unrelated: <b>never-ever</b> do any manual sizing or locating, instead use a suitable layoutManager"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660150248,"creation_date":1660149115,"answer_id":73309787,"question_id":73309203,"body_markdown":"As currently written, your locally declared `ArrayList` is being discarded (headed for garbage collection) each time the flow of control exits your action listener. \r\n\r\n&#128073; Move the list declaration outside that method, to be a member field. (As [commented][1].)\r\n\r\nAnd generally best to declare the more general type, a `List` rather than `ArrayList`. (See [this Question][2].)\r\n\r\nAnd use [Java Generics][3] rather than raw types. Add `&lt; String &gt;`.\r\n\r\n    public class Stuffs {\r\n        // Member fields\r\n        List &lt; String &gt; test = new ArrayList&lt;&gt;();\r\n\r\n        // Constructor\r\n        Stuffs(){ … }\r\n    }\r\n\r\nAs a member field of the `Stuffs` class, the list stays around for as long as the instance object of `Stuffs` lives.\r\n\r\n\r\n----------\r\n\r\n\r\nBe aware of [thread-safety][4]. As currently written, the `ArrayList` should only be accessed from the user-interface thread. If any other threads will access the list, you’ll need to take steps to protect that resource in a thread-safe manner.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/73309203/how-to-add-to-arraylist-continuously/73309787#comment129465546_73309203\r\n  [2]: https://stackoverflow.com/q/2279030/642706\r\n  [3]: https://en.wikipedia.org/wiki/Generics_in_Java\r\n  [4]: https://en.wikipedia.org/wiki/Thread_safety","title":"How to add to ArrayList continuously","body":"<p>As currently written, your locally declared <code>ArrayList</code> is being discarded (headed for garbage collection) each time the flow of control exits your action listener.</p>\n<p>👉 Move the list declaration outside that method, to be a member field. (As <a href=\"https://stackoverflow.com/questions/73309203/how-to-add-to-arraylist-continuously/73309787#comment129465546_73309203\">commented</a>.)</p>\n<p>And generally best to declare the more general type, a <code>List</code> rather than <code>ArrayList</code>. (See <a href=\"https://stackoverflow.com/q/2279030/642706\">this Question</a>.)</p>\n<p>And use <a href=\"https://en.wikipedia.org/wiki/Generics_in_Java\" rel=\"nofollow noreferrer\">Java Generics</a> rather than raw types. Add <code>&lt; String &gt;</code>.</p>\n<pre><code>public class Stuffs {\n    // Member fields\n    List &lt; String &gt; test = new ArrayList&lt;&gt;();\n\n    // Constructor\n    Stuffs(){ … }\n}\n</code></pre>\n<p>As a member field of the <code>Stuffs</code> class, the list stays around for as long as the instance object of <code>Stuffs</code> lives.</p>\n<hr />\n<p>Be aware of <a href=\"https://en.wikipedia.org/wiki/Thread_safety\" rel=\"nofollow noreferrer\">thread-safety</a>. As currently written, the <code>ArrayList</code> should only be accessed from the user-interface thread. If any other threads will access the list, you’ll need to take steps to protect that resource in a thread-safe manner.</p>\n"}],"owner":{"account_id":24760965,"reputation":19,"user_id":19689062,"display_name":"Luqman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":177,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1660235843,"creation_date":1660146498,"question_id":73309203,"body_markdown":"What I am trying to achieve here is when the user selects the data in the ComboBox, it will match it to my HashMap, and add it to an ArrayList.\r\n\r\n    public class Stuffs {\r\n\r\n    Stuffs(){\r\n        \r\n        //Creating HashMap\r\n        HashMap&lt;String,String&gt; map = new HashMap&lt;&gt;();\r\n        map.put(&quot;LOTR 1&quot;, &quot;The Fellowship of the Ring&quot;);\r\n        map.put(&quot;LOTR 2&quot;, &quot;The Two Towers&quot;);\r\n        map.put(&quot;LOTR 3&quot;, &quot;The Return of the King&quot;);\r\n        \r\n        //Creating frame\r\n        JFrame f = new JFrame();\r\n        f.setSize(500, 500);\r\n        f.setVisible(true);\r\n        \r\n        //Creating combobox\r\n        String choices[] = {&quot;LOTR 1&quot;,&quot;LOTR 2&quot;,&quot;LOTR 3&quot;};\r\n        JComboBox cb = new JComboBox(choices);\r\n        cb.setBounds(50, 50,90,20);\r\n        f.setLayout(null);    \r\n        f.setSize(300,300);\r\n        f.add(cb);\r\n  \r\n        //Creating button\r\n        JButton btn = new JButton(&quot;OK&quot;);\r\n        btn.setBounds(100,100,70,20); \r\n        f.add(btn);\r\n        \r\n        \r\n        //Get selected item from HashMap and add into arraylist\r\n        btn.addActionListener(new ActionListener(){\r\n            public void actionPerformed(ActionEvent e){\r\n            \r\n            ArrayList test = new ArrayList&lt;&gt;();\r\n            String x = (String) cb.getSelectedItem();\r\n            String y = map.get(x);\r\n            Collections.addAll(test, x, y);\r\n            System.out.println(test);\r\n            }\r\n        });\r\n        \r\n    }\r\n    \r\n    public static void main(String[] args) {\r\n        \r\n        new Stuffs();     \r\n    }      \r\n        }\r\n\r\nThe code works. The output is :\r\n\r\n    [LOTR 1, The Fellowship of the Ring] \r\n(User selected LOTR 1 from the ComboBox)\r\n\r\nBut when I click on the button again, the ArrayList resets. What I want is so that the ArrayList keeps on adding data without replacing the initial ones, even if its repetitive. For example:\r\n\r\n    [LOTR 1, The Fellowship of the Ring, LOTR 2, The Two Towers]\r\n\r\nBasically the user can select from the ComboBox countless of times, and the ArrayList keeps adding up and adding up.","title":"How to add to ArrayList continuously","body":"<p>What I am trying to achieve here is when the user selects the data in the ComboBox, it will match it to my HashMap, and add it to an ArrayList.</p>\n<pre><code>public class Stuffs {\n\nStuffs(){\n    \n    //Creating HashMap\n    HashMap&lt;String,String&gt; map = new HashMap&lt;&gt;();\n    map.put(&quot;LOTR 1&quot;, &quot;The Fellowship of the Ring&quot;);\n    map.put(&quot;LOTR 2&quot;, &quot;The Two Towers&quot;);\n    map.put(&quot;LOTR 3&quot;, &quot;The Return of the King&quot;);\n    \n    //Creating frame\n    JFrame f = new JFrame();\n    f.setSize(500, 500);\n    f.setVisible(true);\n    \n    //Creating combobox\n    String choices[] = {&quot;LOTR 1&quot;,&quot;LOTR 2&quot;,&quot;LOTR 3&quot;};\n    JComboBox cb = new JComboBox(choices);\n    cb.setBounds(50, 50,90,20);\n    f.setLayout(null);    \n    f.setSize(300,300);\n    f.add(cb);\n\n    //Creating button\n    JButton btn = new JButton(&quot;OK&quot;);\n    btn.setBounds(100,100,70,20); \n    f.add(btn);\n    \n    \n    //Get selected item from HashMap and add into arraylist\n    btn.addActionListener(new ActionListener(){\n        public void actionPerformed(ActionEvent e){\n        \n        ArrayList test = new ArrayList&lt;&gt;();\n        String x = (String) cb.getSelectedItem();\n        String y = map.get(x);\n        Collections.addAll(test, x, y);\n        System.out.println(test);\n        }\n    });\n    \n}\n\npublic static void main(String[] args) {\n    \n    new Stuffs();     \n}      \n    }\n</code></pre>\n<p>The code works. The output is :</p>\n<pre><code>[LOTR 1, The Fellowship of the Ring] \n</code></pre>\n<p>(User selected LOTR 1 from the ComboBox)</p>\n<p>But when I click on the button again, the ArrayList resets. What I want is so that the ArrayList keeps on adding data without replacing the initial ones, even if its repetitive. For example:</p>\n<pre><code>[LOTR 1, The Fellowship of the Ring, LOTR 2, The Two Towers]\n</code></pre>\n<p>Basically the user can select from the ComboBox countless of times, and the ArrayList keeps adding up and adding up.</p>\n"},{"tags":["java","spring-boot","intellij-idea","war"],"comments":[{"owner":{"account_id":36734,"reputation":392127,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1660237481,"post_id":73324179,"comment_id":129491324,"body_markdown":"Does it work in the command line if you run it via `gradle bootRun`? Your app may be not configured correctly if it doesn&#39;t work in this mode. If the war file works, you can use Tomcat run configuration and deploy this war file as an external source artifact.","body":"Does it work in the command line if you run it via <code>gradle bootRun</code>? Your app may be not configured correctly if it doesn&#39;t work in this mode. If the war file works, you can use Tomcat run configuration and deploy this war file as an external source artifact."},{"owner":{"account_id":25909017,"reputation":554,"user_id":19633625,"display_name":"Louis"},"score":0,"creation_date":1660238500,"post_id":73324179,"comment_id":129491609,"body_markdown":"`gradle bootRun` doesn&#39;t work. To correct configuration, what can I do? or what do you think I should share? As I know, spring boot uses embedded tomcat server so that I don&#39;t need to install tomcat on local.","body":"<code>gradle bootRun</code> doesn&#39;t work. To correct configuration, what can I do? or what do you think I should share? As I know, spring boot uses embedded tomcat server so that I don&#39;t need to install tomcat on local."},{"owner":{"account_id":36734,"reputation":392127,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1660238611,"post_id":73324179,"comment_id":129491642,"body_markdown":"I would check https://www.baeldung.com/spring-boot-jsp. It should work with `bootRun` and from the standalone Tomcat server if configured correctly.","body":"I would check <a href=\"https://www.baeldung.com/spring-boot-jsp\" rel=\"nofollow noreferrer\">baeldung.com/spring-boot-jsp</a>. It should work with <code>bootRun</code> and from the standalone Tomcat server if configured correctly."},{"owner":{"account_id":25909017,"reputation":554,"user_id":19633625,"display_name":"Louis"},"score":0,"creation_date":1660240456,"post_id":73324179,"comment_id":129492219,"body_markdown":"I wanted to get real time updated view on browser as soon as I changed the source code. Through the above url, I knew JAR packaging is not an option if we are using JSP with Spring Boot. So war file is essential needed and should be deployed to tomcat container. And run by tomcat. This is the unique way to run my app. right?","body":"I wanted to get real time updated view on browser as soon as I changed the source code. Through the above url, I knew JAR packaging is not an option if we are using JSP with Spring Boot. So war file is essential needed and should be deployed to tomcat container. And run by tomcat. This is the unique way to run my app. right?"},{"owner":{"account_id":25909017,"reputation":554,"user_id":19633625,"display_name":"Louis"},"score":0,"creation_date":1660240650,"post_id":73324179,"comment_id":129492271,"body_markdown":"If I run the `gradle bootRun` on the classpath of the project, the terminal shows the error. \nA problem occurred evaluating root project &#39;moyamo-admin&#39;.\n&gt; Could not find method bootJar() for arguments [build_cyvu7040qathk0htgxk04d9hn$_run_closure2@321cd7a] on root project &#39;moyamo-admin&#39; of type org.gradle.api.Project.","body":"If I run the <code>gradle bootRun</code> on the classpath of the project, the terminal shows the error.  A problem occurred evaluating root project &#39;moyamo-admin&#39;. &gt; Could not find method bootJar() for arguments [build_cyvu7040qathk0htgxk04d9hn$_run_closure2@321cd7a] on root project &#39;moyamo-admin&#39; of type org.gradle.api.Project."}],"owner":{"account_id":25909017,"reputation":554,"user_id":19633625,"display_name":"Louis"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":432,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660235842,"creation_date":1660235842,"question_id":73324179,"body_markdown":"I have built project using gradle. Built file is war file. The app can be run successfully by &quot;java -jar xxxx.war&quot; this command. I&#39;d like to run this app locally on Intellij. The frontend is jsp. Because when run the app on Intellij, it doesn&#39;t include jsp, it doesn&#39;t work on services, I think.\r\nAm I right? How can I run the app locally on the Intellij? I share the build.gradle file.\r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\n```\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;maven-publish&#39;\r\n    id &#39;war&#39;\r\n}\r\n\r\njar { enabled = false }\r\nbootJar { enabled = true }\r\nbootRun {enabled = true}\r\n\r\nconfigurations {\r\n    developmentOnly\r\n    runtimeClasspath {\r\n        extendsFrom developmentOnly\r\n    }\r\n    compile.exclude module: &quot;spring-boot-starter-tomcat&quot;\r\n}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yMWCc.png\r\n  [2]: https://i.stack.imgur.com/3qeTH.png","title":"How can I run the spring boot application using services tabs on Intellij?","body":"<p>I have built project using gradle. Built file is war file. The app can be run successfully by &quot;java -jar xxxx.war&quot; this command. I'd like to run this app locally on Intellij. The frontend is jsp. Because when run the app on Intellij, it doesn't include jsp, it doesn't work on services, I think.\nAm I right? How can I run the app locally on the Intellij? I share the build.gradle file.\n<a href=\"https://i.stack.imgur.com/yMWCc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yMWCc.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/3qeTH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3qeTH.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>plugins {\n    id 'java'\n    id 'maven-publish'\n    id 'war'\n}\n\njar { enabled = false }\nbootJar { enabled = true }\nbootRun {enabled = true}\n\nconfigurations {\n    developmentOnly\n    runtimeClasspath {\n        extendsFrom developmentOnly\n    }\n    compile.exclude module: &quot;spring-boot-starter-tomcat&quot;\n}\n</code></pre>\n"},{"tags":["java","spring-boot","architecture","azure-blob-storage","pgp"],"comments":[{"owner":{"account_id":9273165,"reputation":3381,"user_id":6886501,"display_name":"Markus Meyer"},"score":0,"creation_date":1660192732,"post_id":73315327,"comment_id":129476041,"body_markdown":"You can store it as key in Azure Key Vault: https://learn.microsoft.com/en-us/azure/key-vault/keys/about-keys.","body":"You can store it as key in Azure Key Vault: <a href=\"https://learn.microsoft.com/en-us/azure/key-vault/keys/about-keys\" rel=\"nofollow noreferrer\">learn.microsoft.com/en-us/azure/key-vault/keys/about-keys</a>."},{"owner":{"account_id":8290022,"reputation":61,"user_id":6232003,"display_name":"Bhanu Mittal"},"score":0,"creation_date":1660193664,"post_id":73315327,"comment_id":129476168,"body_markdown":"@MarkusMeyer Azure key vault does not support .asc files.","body":"@MarkusMeyer Azure key vault does not support .asc files."},{"owner":{"account_id":9273165,"reputation":3381,"user_id":6886501,"display_name":"Markus Meyer"},"score":0,"creation_date":1660193872,"post_id":73315327,"comment_id":129476210,"body_markdown":"You can at the content as text into the key","body":"You can at the content as text into the key"}],"owner":{"account_id":8290022,"reputation":61,"user_id":6232003,"display_name":"Bhanu Mittal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660235824,"creation_date":1660192572,"question_id":73315327,"body_markdown":"I have a spring-boot application that listens to a consumer azure topic and downloads a PGP encrypted file whenever there is a message in the topic. After downloading the encrypted file, I need to decrypt the file using a private key file. Should I keep the private key file in azure blob storage and download it at the start of the application? Looking for suggestions.","title":"Where to keep PGP private key file and when to download in springboot application. I am considering to keep file in Azure blob storage","body":"<p>I have a spring-boot application that listens to a consumer azure topic and downloads a PGP encrypted file whenever there is a message in the topic. After downloading the encrypted file, I need to decrypt the file using a private key file. Should I keep the private key file in azure blob storage and download it at the start of the application? Looking for suggestions.</p>\n"},{"tags":["java","testing","junit","mockito"],"comments":[{"owner":{"account_id":8523194,"reputation":1574,"user_id":6389337,"display_name":"sapan prajapati"},"score":0,"creation_date":1660118522,"post_id":73302606,"comment_id":129454501,"body_markdown":"you need to supply mocked parameters to render() method","body":"you need to supply mocked parameters to render() method"}],"answers":[{"tags":[],"owner":{"account_id":8523194,"reputation":1574,"user_id":6389337,"display_name":"sapan prajapati"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660118815,"creation_date":1660118369,"answer_id":73302725,"question_id":73302606,"body_markdown":"As I see, render method is not returning anything so you can do like this  \r\n\r\n    try (MockedStatic&lt;TemplateRendererUtil&gt; mockedStatic = Mockito.mockStatic(TemplateRendererUtil.class)){\r\n                        \r\n     doNothing().when(TemplateRendererUtil.render(Mockito.any(), Mockito.any(), Mockito.anyString(), Mockito.anyMap()));\r\n    \r\n    }","title":"&quot;incompatible parameter types in method reference&quot; when trying to method reference Class method","body":"<p>As I see, render method is not returning anything so you can do like this</p>\n<pre><code>try (MockedStatic&lt;TemplateRendererUtil&gt; mockedStatic = Mockito.mockStatic(TemplateRendererUtil.class)){\n                    \n doNothing().when(TemplateRendererUtil.render(Mockito.any(), Mockito.any(), Mockito.anyString(), Mockito.anyMap()));\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4012793,"reputation":1627,"user_id":3305737,"display_name":"Jonasz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660118840,"creation_date":1660118840,"answer_id":73302831,"question_id":73302606,"body_markdown":"There are actually two problems with your code.\r\n\r\nFirst is the fact that you did not provide the code for the method `TemplateRendererUtil.render()` (without arguments) and you&#39;re using such a method&#39;s reference as a parameter passed to `when()`. You&#39;re not referencing the method with 4 arguments that you&#39;ve shown in your test code.\r\n\r\nThe second problem is the fact that you&#39;re trying to return `null` from a method that does not return anything (`void` type).\r\n\r\nThe correct code would be:\r\n```java\r\ntry (MockedStatic&lt;TemplateRendererUtil&gt; mockedStatic = Mockito.mockStatic(TemplateRendererUtil.class)) {\r\n    mockedStatic.when(() -&gt; TemplateRendererUtil.render(any(), any(), anyString(), anyMap()))\r\n                .thenAnswer(inv -&gt; null);\r\n    // rest of the test\r\n}\r\n```\r\nInstead of `any...` matchers you could use more appropriate ones if needed.\r\n\r\n---\r\n\r\nI&#39;ve reproduced the problem and tested the solution - you can find it [here on GitHub][1]. The test passes. The mocked method was simplified to use `int` and `long`, but the mechanism stays the same.\r\n\r\n\r\n  [1]: https://github.com/Jonarzz/stack-overflow/blob/73302606/src/test/java/io/github/jonarzz/MockStaticTest.java","title":"&quot;incompatible parameter types in method reference&quot; when trying to method reference Class method","body":"<p>There are actually two problems with your code.</p>\n<p>First is the fact that you did not provide the code for the method <code>TemplateRendererUtil.render()</code> (without arguments) and you're using such a method's reference as a parameter passed to <code>when()</code>. You're not referencing the method with 4 arguments that you've shown in your test code.</p>\n<p>The second problem is the fact that you're trying to return <code>null</code> from a method that does not return anything (<code>void</code> type).</p>\n<p>The correct code would be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (MockedStatic&lt;TemplateRendererUtil&gt; mockedStatic = Mockito.mockStatic(TemplateRendererUtil.class)) {\n    mockedStatic.when(() -&gt; TemplateRendererUtil.render(any(), any(), anyString(), anyMap()))\n                .thenAnswer(inv -&gt; null);\n    // rest of the test\n}\n</code></pre>\n<p>Instead of <code>any...</code> matchers you could use more appropriate ones if needed.</p>\n<hr />\n<p>I've reproduced the problem and tested the solution - you can find it <a href=\"https://github.com/Jonarzz/stack-overflow/blob/73302606/src/test/java/io/github/jonarzz/MockStaticTest.java\" rel=\"nofollow noreferrer\">here on GitHub</a>. The test passes. The mocked method was simplified to use <code>int</code> and <code>long</code>, but the mechanism stays the same.</p>\n"}],"owner":{"account_id":25986825,"reputation":21,"user_id":19699689,"display_name":"nixon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":518,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1660235805,"creation_date":1660117771,"question_id":73302606,"body_markdown":"I am trying to mock a static method `render` of the `TemplateRendererUtil` class to return `null` when testing. Not sure if this is the right approach, the method I&#39;m trying to test calls this class, but I just want it to essentially skip this.  \r\n\r\nGetting a compilation error here:   \r\n```java\r\ntry (MockedStatic&lt;TemplateRendererUtil&gt; mockedStatic = Mockito.mockStatic(TemplateRendererUtil.class)){\r\n    // java: incompatible types: incompatible parameter types in method reference\r\n    mockedStatic.when(TemplateRendererUtil::render).thenReturn(null);\r\n}\r\n```\r\n\r\nClass being referenced:\r\n```java\r\n    public class TemplateRendererUtil {\r\n        private static final ResponseTemplateRenderer RENDERER = ResponseTemplateRenderer.getInstance();\r\n    \r\n        private TemplateRendererUtil() {\r\n        }\r\n    \r\n        public static void render(HttpServletRequest req, HttpServletResponse resp, String templateFile, Map&lt;String, Object&gt; params) throws TemplateRendererUtilException {\r\n            try {\r\n                RENDERER.render(req, resp, templateFile, params);\r\n            } catch (ResponseTemplateRendererException var5) {\r\n                throw new TemplateRendererUtilException(var5);\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\nStack trace of at `Mockito.mockStatic`:\r\n```\r\n    java.lang.InternalError: class redefinition failed: invalid class\r\n\r\n\tat java.instrument/sun.instrument.InstrumentationImpl.retransformClasses0(Native Method)\r\n\tat java.instrument/sun.instrument.InstrumentationImpl.retransformClasses(InstrumentationImpl.java:167)\r\n\tat org.mockito.internal.creation.bytebuddy.InlineBytecodeGenerator.triggerRetransformation(InlineBytecodeGenerator.java:280)\r\n\tat org.mockito.internal.creation.bytebuddy.InlineBytecodeGenerator.mockClassStatic(InlineBytecodeGenerator.java:225)\r\n\tat org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator.mockClassStatic(TypeCachingBytecodeGenerator.java:63)\r\n\tat org.mockito.internal.creation.bytebuddy.InlineDelegateByteBuddyMockMaker.createStaticMock(InlineDelegateByteBuddyMockMaker.java:560)\r\n\tat org.mockito.internal.creation.bytebuddy.InlineByteBuddyMockMaker.createStaticMock(InlineByteBuddyMockMaker.java:83)\r\n\tat org.mockito.internal.util.MockUtil.createStaticMock(MockUtil.java:147)\r\n\tat org.mockito.internal.MockitoCore.mockStatic(MockitoCore.java:142)\r\n\tat org.mockito.Mockito.mockStatic(Mockito.java:2181)\r\n\tat org.mockito.Mockito.mockStatic(Mockito.java:2118)\r\n\t...\r\n```","title":"&quot;incompatible parameter types in method reference&quot; when trying to method reference Class method","body":"<p>I am trying to mock a static method <code>render</code> of the <code>TemplateRendererUtil</code> class to return <code>null</code> when testing. Not sure if this is the right approach, the method I'm trying to test calls this class, but I just want it to essentially skip this.</p>\n<p>Getting a compilation error here:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (MockedStatic&lt;TemplateRendererUtil&gt; mockedStatic = Mockito.mockStatic(TemplateRendererUtil.class)){\n    // java: incompatible types: incompatible parameter types in method reference\n    mockedStatic.when(TemplateRendererUtil::render).thenReturn(null);\n}\n</code></pre>\n<p>Class being referenced:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public class TemplateRendererUtil {\n        private static final ResponseTemplateRenderer RENDERER = ResponseTemplateRenderer.getInstance();\n    \n        private TemplateRendererUtil() {\n        }\n    \n        public static void render(HttpServletRequest req, HttpServletResponse resp, String templateFile, Map&lt;String, Object&gt; params) throws TemplateRendererUtilException {\n            try {\n                RENDERER.render(req, resp, templateFile, params);\n            } catch (ResponseTemplateRendererException var5) {\n                throw new TemplateRendererUtilException(var5);\n            }\n        }\n    }\n</code></pre>\n<p>Stack trace of at <code>Mockito.mockStatic</code>:</p>\n<pre><code>    java.lang.InternalError: class redefinition failed: invalid class\n\n    at java.instrument/sun.instrument.InstrumentationImpl.retransformClasses0(Native Method)\n    at java.instrument/sun.instrument.InstrumentationImpl.retransformClasses(InstrumentationImpl.java:167)\n    at org.mockito.internal.creation.bytebuddy.InlineBytecodeGenerator.triggerRetransformation(InlineBytecodeGenerator.java:280)\n    at org.mockito.internal.creation.bytebuddy.InlineBytecodeGenerator.mockClassStatic(InlineBytecodeGenerator.java:225)\n    at org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator.mockClassStatic(TypeCachingBytecodeGenerator.java:63)\n    at org.mockito.internal.creation.bytebuddy.InlineDelegateByteBuddyMockMaker.createStaticMock(InlineDelegateByteBuddyMockMaker.java:560)\n    at org.mockito.internal.creation.bytebuddy.InlineByteBuddyMockMaker.createStaticMock(InlineByteBuddyMockMaker.java:83)\n    at org.mockito.internal.util.MockUtil.createStaticMock(MockUtil.java:147)\n    at org.mockito.internal.MockitoCore.mockStatic(MockitoCore.java:142)\n    at org.mockito.Mockito.mockStatic(Mockito.java:2181)\n    at org.mockito.Mockito.mockStatic(Mockito.java:2118)\n    ...\n</code></pre>\n"},{"tags":["java","javafx","gridview","controlsfx"],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1653413361,"creation_date":1653404339,"answer_id":72365177,"question_id":72362744,"body_markdown":"You might not need to use the strategy you describe. You&#39;re displaying the images in cells of size 340x512, which is 174,080 pixels. Image storage is 4 bytes per pixel, so this is 696,320 bytes per image; 1500 of them will consume about 1GB. You just need to make sure you load the image at the size you are displaying it (instead of its native size):\r\n\r\n    // imageViewList.add(new Image(url));\r\n    imageViewList.add(new Image(url, 340, 512, true, true, true));\r\n\r\nIf you need an image at full size later (e.g. if you want the user to select an image from your grid view and display it in a bigger pane), you&#39;d just need to reload it from the url.\r\n\r\nIf you do need to implement the strategy you describe, `GridView` supports that out of the box. Just keep a list of the URLs, instead of the `Image`s, and use a custom `GridCell` to load the image as needed. This will consume significantly less memory, at the cost of a lot more I/O (loading the images) and CPU (parsing the image format).\r\n\r\n\r\nMake the items for the `GridView` the image urls, stored as Strings.\r\n\r\nThen you can do something like:\r\n\r\n    GridView&lt;String&gt; gridView = new GridView&lt;&gt;();\r\n    gridView.getItems().addAll(getAllImageURLs());\r\n    \r\n    gridView.setCellFactory(gv -&gt; new GridCell&lt;&gt;() {\r\n        private final ImageView imageView = new ImageView();\r\n\r\n        {\r\n            imageView.fitWidthProperty().bind(widthProperty());\r\n            imageView.fitHeightProperty().bind(heightProperty());\r\n            imageView.setPreserveRatio(true);\r\n        }\r\n\r\n        @Override\r\n        protected void updateItem(String url, boolean empty) {\r\n            super.updateItem(url, empty);\r\n            if (empty || url == null) {\r\n                setGraphic(null);\r\n            } else {\r\n                double w = getGridView().getCellWidth();\r\n                double h = getGridView().getCellHeight();\r\n                imageView.setImage(new Image(url, w, h, true, true, true));\r\n                setGraphic(imageView);\r\n            }\r\n        }\r\n    });\r\n\r\n\r\n    protected List&lt;String&gt; getAllImageURLs(){\r\n    \r\n        return App.getCardService().getCardArray().stream()\r\n                // isn&#39;t the first sort redundant here?\r\n                .sorted(Comparator.comparingInt(Card::getCost))\r\n                .sorted(Comparator.comparing(Card::isChampion).reversed())\r\n                .map(card -&gt; String.format(App.pictureFolderPath +&quot;%s.png&quot;, card.getCardCode()))\r\n                .collect(Collectors.toList());\r\n    }","title":"GridView only create Images when they would be visible","body":"<p>You might not need to use the strategy you describe. You're displaying the images in cells of size 340x512, which is 174,080 pixels. Image storage is 4 bytes per pixel, so this is 696,320 bytes per image; 1500 of them will consume about 1GB. You just need to make sure you load the image at the size you are displaying it (instead of its native size):</p>\n<pre><code>// imageViewList.add(new Image(url));\nimageViewList.add(new Image(url, 340, 512, true, true, true));\n</code></pre>\n<p>If you need an image at full size later (e.g. if you want the user to select an image from your grid view and display it in a bigger pane), you'd just need to reload it from the url.</p>\n<p>If you do need to implement the strategy you describe, <code>GridView</code> supports that out of the box. Just keep a list of the URLs, instead of the <code>Image</code>s, and use a custom <code>GridCell</code> to load the image as needed. This will consume significantly less memory, at the cost of a lot more I/O (loading the images) and CPU (parsing the image format).</p>\n<p>Make the items for the <code>GridView</code> the image urls, stored as Strings.</p>\n<p>Then you can do something like:</p>\n<pre><code>GridView&lt;String&gt; gridView = new GridView&lt;&gt;();\ngridView.getItems().addAll(getAllImageURLs());\n\ngridView.setCellFactory(gv -&gt; new GridCell&lt;&gt;() {\n    private final ImageView imageView = new ImageView();\n\n    {\n        imageView.fitWidthProperty().bind(widthProperty());\n        imageView.fitHeightProperty().bind(heightProperty());\n        imageView.setPreserveRatio(true);\n    }\n\n    @Override\n    protected void updateItem(String url, boolean empty) {\n        super.updateItem(url, empty);\n        if (empty || url == null) {\n            setGraphic(null);\n        } else {\n            double w = getGridView().getCellWidth();\n            double h = getGridView().getCellHeight();\n            imageView.setImage(new Image(url, w, h, true, true, true));\n            setGraphic(imageView);\n        }\n    }\n});\n\n\nprotected List&lt;String&gt; getAllImageURLs(){\n\n    return App.getCardService().getCardArray().stream()\n            // isn't the first sort redundant here?\n            .sorted(Comparator.comparingInt(Card::getCost))\n            .sorted(Comparator.comparing(Card::isChampion).reversed())\n            .map(card -&gt; String.format(App.pictureFolderPath +&quot;%s.png&quot;, card.getCardCode()))\n            .collect(Collectors.toList());\n}\n</code></pre>\n"}],"owner":{"account_id":20645894,"reputation":95,"user_id":15157418,"display_name":"tctfox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":72365177,"answer_count":1,"score":4,"last_activity_date":1660235785,"creation_date":1653394625,"question_id":72362744,"body_markdown":"Hei there\r\n \r\nSo I have the following problem. I have around 1500 images of playing cards. I want to display them in a &quot;Gallery&quot; where you could scroll through them. I was able to create a GridView with the ImageCell object and I was also able to add images to it. Now my problem is that if I add all Image&#39;s at once logically Java crashes because of a heap error. I have the image url&#39;s (local files) in a list. How could I implement that it only load lets say 15 images. If I then scroll it loads the next 15 and unloads the old ones. So it would only load the images of the actual visible images and not all 1500. How would I do this? I am completely out of ideas. \r\nThe Platform.runLater() is needed because some sort of issue with ControlsFX\r\n\r\n\r\nHere my code:\r\n \r\n\r\n        public void initialize() {\r\n \r\n        GridView&lt;Image&gt; gridView = new GridView&lt;&gt;();\r\n        gridView.setCellFactory(gridView1 -&gt; new ImageGridCell(true));\r\n        Image image = new Image(&quot;C:\\\\Users\\\\nijog\\\\Downloads\\\\cardpictures\\\\01DE001.png&quot;);\r\n \r\n        gridView.setCellWidth(340);\r\n        gridView.setCellHeight(512);\r\n \r\n        //Platform.runLater(()-&gt; {\r\n        //    for (int i = 0; i &lt; 5000; i++){\r\n        //        gridView.getItems().add(image);\r\n        //    }\r\n        //});\r\n \r\n        Platform.runLater(() -&gt; gridView.getItems().addAll(createImageListFromCardFiles()));\r\n \r\n        borderPane.setCenter(gridView);\r\n \r\n    }\r\n \r\n    protected List&lt;Image&gt; createImageListFromCardFiles(){\r\n \r\n        List&lt;Image&gt; imageViewList = new ArrayList&lt;&gt;();\r\n        App.getCardService().getCardArray().stream()\r\n                //.filter(Card::isCollectible)\r\n                .sorted(Comparator.comparingInt(Card::getCost))\r\n                .sorted(Comparator.comparing(Card::isChampion).reversed())\r\n                .skip(0)\r\n                //.limit(100)\r\n                .forEach(card -&gt; {\r\n                    try {\r\n                        String url = String.format(App.pictureFolderPath +&quot;%s.png&quot;, card.getCardCode());\r\n                        imageViewList.add(new Image(url));\r\n                    } catch (Exception e) {\r\n                        System.out.println(&quot;Picture file not found [CardCode = &quot; + card.getCardCode() + &quot;]&quot;);\r\n                        App.logger.writeLog(Logger.Operation.EXCEPTION, &quot;Picture file not found [CardCode = &quot; + card.getCardCode() + &quot;]&quot;);\r\n                    }\r\n                });\r\n        return imageViewList;\r\n    }","title":"GridView only create Images when they would be visible","body":"<p>Hei there</p>\n<p>So I have the following problem. I have around 1500 images of playing cards. I want to display them in a &quot;Gallery&quot; where you could scroll through them. I was able to create a GridView with the ImageCell object and I was also able to add images to it. Now my problem is that if I add all Image's at once logically Java crashes because of a heap error. I have the image url's (local files) in a list. How could I implement that it only load lets say 15 images. If I then scroll it loads the next 15 and unloads the old ones. So it would only load the images of the actual visible images and not all 1500. How would I do this? I am completely out of ideas.\nThe Platform.runLater() is needed because some sort of issue with ControlsFX</p>\n<p>Here my code:</p>\n<pre><code>    public void initialize() {\n\n    GridView&lt;Image&gt; gridView = new GridView&lt;&gt;();\n    gridView.setCellFactory(gridView1 -&gt; new ImageGridCell(true));\n    Image image = new Image(&quot;C:\\\\Users\\\\nijog\\\\Downloads\\\\cardpictures\\\\01DE001.png&quot;);\n\n    gridView.setCellWidth(340);\n    gridView.setCellHeight(512);\n\n    //Platform.runLater(()-&gt; {\n    //    for (int i = 0; i &lt; 5000; i++){\n    //        gridView.getItems().add(image);\n    //    }\n    //});\n\n    Platform.runLater(() -&gt; gridView.getItems().addAll(createImageListFromCardFiles()));\n\n    borderPane.setCenter(gridView);\n\n}\n\nprotected List&lt;Image&gt; createImageListFromCardFiles(){\n\n    List&lt;Image&gt; imageViewList = new ArrayList&lt;&gt;();\n    App.getCardService().getCardArray().stream()\n            //.filter(Card::isCollectible)\n            .sorted(Comparator.comparingInt(Card::getCost))\n            .sorted(Comparator.comparing(Card::isChampion).reversed())\n            .skip(0)\n            //.limit(100)\n            .forEach(card -&gt; {\n                try {\n                    String url = String.format(App.pictureFolderPath +&quot;%s.png&quot;, card.getCardCode());\n                    imageViewList.add(new Image(url));\n                } catch (Exception e) {\n                    System.out.println(&quot;Picture file not found [CardCode = &quot; + card.getCardCode() + &quot;]&quot;);\n                    App.logger.writeLog(Logger.Operation.EXCEPTION, &quot;Picture file not found [CardCode = &quot; + card.getCardCode() + &quot;]&quot;);\n                }\n            });\n    return imageViewList;\n}\n</code></pre>\n"},{"tags":["java","android","dpi","screen-density","density-independent-pixel"],"answers":[{"tags":[],"owner":{"account_id":19393048,"reputation":128,"user_id":14181277,"display_name":"Vidar567"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660234806,"creation_date":1660234806,"answer_id":73323985,"question_id":73323809,"body_markdown":"You could count these values using methods like:\r\n\r\nmy solution is to get any layout form your `.xml` by id and just count it using the same methods\r\n```\r\nlayout.width\r\nlayout.height\r\n```\r\n\r\nor\r\n\r\n```\r\n        // on below line we are creating and\r\n        // initializing variable for display metrics.\r\n        val displayMetrics = DisplayMetrics()\r\n \r\n        // on below line we are getting metrics\r\n        // for display using window manager.\r\n        windowManager.defaultDisplay.getMetrics(displayMetrics)\r\n \r\n        // on below line we are getting height\r\n        // and width using display metrics.\r\n        val height = displayMetrics.heightPixels\r\n        val width = displayMetrics.widthPixels\r\n```\r\n\r\nAlso if you want to handle showing images on UI just use `Glide Library`","title":"How can I know the pixels range for all screen densities in Android ? (base density of an image)","body":"<p>You could count these values using methods like:</p>\n<p>my solution is to get any layout form your <code>.xml</code> by id and just count it using the same methods</p>\n<pre><code>layout.width\nlayout.height\n</code></pre>\n<p>or</p>\n<pre><code>        // on below line we are creating and\n        // initializing variable for display metrics.\n        val displayMetrics = DisplayMetrics()\n \n        // on below line we are getting metrics\n        // for display using window manager.\n        windowManager.defaultDisplay.getMetrics(displayMetrics)\n \n        // on below line we are getting height\n        // and width using display metrics.\n        val height = displayMetrics.heightPixels\n        val width = displayMetrics.widthPixels\n</code></pre>\n<p>Also if you want to handle showing images on UI just use <code>Glide Library</code></p>\n"}],"owner":{"account_id":25929375,"reputation":69,"user_id":19650731,"display_name":"Eldestornillador"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660234806,"creation_date":1660233971,"question_id":73323809,"body_markdown":"So imagine that I have an image that is 700x700 px in res folder and I want my app to support different pixel densities. So according to the documentation:\r\n\r\nldpi -- 0.75x\\\r\nmdpi -- 1x\\\r\nhdpi -- 1.5x\\\r\nxhdpi -- 2.0x\\\r\nxxhdpi -- 3.0x\\\r\nxxxhdpi -- 4.0x\r\n\r\nSo now, my question is, if my image is 700x700 px , I can think that those 700x700px are the resolution of 1x (mdpi), so the resolutions for the different densities would be the following:\r\n\r\nldpi -- 525x525px\\\r\nmdpi -- 700x700px\\\r\nhdpi -- 1050x1050px\\\r\nxhdpi -- 1400x1400px\\\r\nxxhdpi -- 2100x2100px\\\r\nxxxhdpi -- 2800x2800px\r\n\r\nBut also I can think that my 700x700 image that I have is for the biggest density, so it is the 4.0x (xxxhdpi) , so the resolutions for the different densities would be the following:\r\n\r\nldpi -- 131.25x131.25px\\\r\nmdpi -- 175x175px\\\r\nhdpi -- 262.5x262.5px\\\r\nxhdpi -- 350x350px\\\r\nxxhdpi -- 525x525px\\\r\nxxxhdpi -- 700x700px\r\n\r\n\r\nBut also , I can think that those 700x700px are for ldpi,hdpi,xhdpi,xxhdpi, so there are there are six different possible combinations... I would like to know which of all should be the density base of my 700x700 px image. I think that maybe knowing a pixel range table of all the densities that shows the minimum and maximum pixels for each density would be really helpful.","title":"How can I know the pixels range for all screen densities in Android ? (base density of an image)","body":"<p>So imagine that I have an image that is 700x700 px in res folder and I want my app to support different pixel densities. So according to the documentation:</p>\n<p>ldpi -- 0.75x<br />\nmdpi -- 1x<br />\nhdpi -- 1.5x<br />\nxhdpi -- 2.0x<br />\nxxhdpi -- 3.0x<br />\nxxxhdpi -- 4.0x</p>\n<p>So now, my question is, if my image is 700x700 px , I can think that those 700x700px are the resolution of 1x (mdpi), so the resolutions for the different densities would be the following:</p>\n<p>ldpi -- 525x525px<br />\nmdpi -- 700x700px<br />\nhdpi -- 1050x1050px<br />\nxhdpi -- 1400x1400px<br />\nxxhdpi -- 2100x2100px<br />\nxxxhdpi -- 2800x2800px</p>\n<p>But also I can think that my 700x700 image that I have is for the biggest density, so it is the 4.0x (xxxhdpi) , so the resolutions for the different densities would be the following:</p>\n<p>ldpi -- 131.25x131.25px<br />\nmdpi -- 175x175px<br />\nhdpi -- 262.5x262.5px<br />\nxhdpi -- 350x350px<br />\nxxhdpi -- 525x525px<br />\nxxxhdpi -- 700x700px</p>\n<p>But also , I can think that those 700x700px are for ldpi,hdpi,xhdpi,xxhdpi, so there are there are six different possible combinations... I would like to know which of all should be the density base of my 700x700 px image. I think that maybe knowing a pixel range table of all the densities that shows the minimum and maximum pixels for each density would be really helpful.</p>\n"},{"tags":["java","mysql","docker"],"owner":{"account_id":24706020,"reputation":31,"user_id":18596831,"display_name":"Matvey Androsyuk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660234629,"creation_date":1660234629,"question_id":73323952,"body_markdown":"Salute, guys, I was creating my application on JavaEE using as database MySQL. It works correctly, but now i need to run mysql server from docker container. Here I got problems. I am demonstrating my code https://github.com/MatveyAndrosyukk/javaee_rest_jdbc_todo_list:\r\n\r\n1.My DataSourse URL:\r\n```\r\n    final static String URL = &quot;jdbc:mysql://localhost:3306/javaee_task_db?useSSL=false&quot;;\r\n```\r\n2.My URL from pom.xml in FlyWay configuration:\r\n```\r\n        &lt;plugin&gt;\r\n          &lt;groupId&gt;com.googlecode.flyway&lt;/groupId&gt;\r\n          &lt;artifactId&gt;flyway-maven-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;1.5&lt;/version&gt;\r\n          &lt;configuration&gt;\r\n            &lt;user&gt;user228&lt;/user&gt;\r\n            &lt;password&gt;user228&lt;/password&gt;\r\n            &lt;driver&gt;com.mysql.jdbc.Driver&lt;/driver&gt;\r\n            &lt;url&gt;jdbc:mysql://mysql_db:3306/javaee_task_db?autoReconnect=true&amp;amp;useUnicode=true&amp;amp;characterEncoding=UTF-8&amp;amp;connectionCollation=utf8_general_ci&amp;amp;characterSetResults=UTF-8&lt;/url&gt;\r\n          &lt;/configuration&gt;\r\n         &lt;/plugin&gt;\r\n```\r\n\r\n3.I started MySQL container using Docker: ``` docker run --name mysql_db -p 3308:3306 --hostname=mysql_db -e MYSQL_ROOT_PASSWORD=secret -e MYSQL_DATABASE=javaee_task_db -e MYSQL_USER=user228 -e  MYSQL_PASSWORD=user228 -v $HOME/mysql-data:/var/lib/mysql -d mysql:8.0```\r\n\r\n4.Then I changed DataSourse connection URL and did the same in pom.xml:\r\n```\r\n    final static String URL = &quot;jdbc:mysql://mysql_db:3306/javaee_task_db?useSSL=false&quot;;\r\n```\r\n\r\n5.Thy to start my application and get errors:\r\n\r\n```\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)\r\n\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828)\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:448)\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)\r\n\tat com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)\r\n\tat com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)\r\n\tat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)\r\n\tat com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)\r\n\tat com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)\r\n\tat com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)\r\n\tat com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:100)\r\n\tat com.zaxxer.hikari.HikariDataSource.&lt;init&gt;(HikariDataSource.java:81)\r\n\tat api.configuration.datasource.DataSourceMySQL.&lt;clinit&gt;(DataSourceMySQL.java:38)\r\n\tat api.servlets.context.ContextListener.contextInitialized(ContextListener.java:34)\r\n\tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4768)\r\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\r\n\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\r\n\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\r\n\tat org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1783)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:293)\r\n\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)\r\n\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\r\n\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:460)\r\n\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:408)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:293)\r\n\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)\r\n\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\r\n\tat java.management/com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:472)\r\n\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)\r\n\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\r\n\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1412)\r\n\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\r\n\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\r\n\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\r\n\tat java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\r\n\tat java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)\r\n\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)\r\n\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\r\n\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167)\r\n\tat com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89)\r\n\tat com.mysql.cj.NativeSession.connect(NativeSession.java:120)\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:948)\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:818)\r\n\t... 58 common frames omitted\r\nCaused by: java.net.UnknownHostException: Этот хост неизвестен (mysql_db)\r\n\tat java.base/java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)\r\n\tat java.base/java.net.InetAddress$PlatformNameService.lookupAllHostAddr(InetAddress.java:933)\r\n\tat java.base/java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1519)\r\n\tat java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:852)\r\n\tat java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1509)\r\n\tat java.base/java.net.InetAddress.getAllByName(InetAddress.java:1367)\r\n\tat java.base/java.net.InetAddress.getAllByName(InetAddress.java:1301)\r\n\tat com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:130)\r\n\tat com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63)\r\n\t... 61 common frames omitted\r\n19:15:15.876 [RMI TCP Connection(3)-127.0.0.1] ERROR com.zaxxer.hikari.pool.HikariPool - restServiceDbPool - Exception during pool initialization.\r\ncom.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\r\n\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)\r\n\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828)\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:448)\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)\r\n\tat com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)\r\n\tat com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)\r\n\tat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)\r\n\tat com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)\r\n\tat com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)\r\n\tat com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)\r\n\tat com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:100)\r\n\tat com.zaxxer.hikari.HikariDataSource.&lt;init&gt;(HikariDataSource.java:81)\r\n\tat api.configuration.datasource.DataSourceMySQL.&lt;clinit&gt;(DataSourceMySQL.java:38)\r\n\tat api.servlets.context.ContextListener.contextInitialized(ContextListener.java:34)\r\n\tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4768)\r\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\r\n\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\r\n\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\r\n\tat org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1783)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:293)\r\n\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)\r\n\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\r\n\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:460)\r\n\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:408)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:293)\r\n\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)\r\n\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\r\n\tat java.management/com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:472)\r\n\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)\r\n\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\r\n\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1412)\r\n\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\r\n\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\r\n\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\r\n\tat java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\r\n\tat java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)\r\n\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)\r\n\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\r\n\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167)\r\n\tat com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89)\r\n\tat com.mysql.cj.NativeSession.connect(NativeSession.java:120)\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:948)\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:818)\r\n\t... 58 common frames omitted\r\nCaused by: java.net.UnknownHostException: Этот хост неизвестен (mysql_db)\r\n\tat java.base/java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)\r\n\tat java.base/java.net.InetAddress$PlatformNameService.lookupAllHostAddr(InetAddress.java:933)\r\n\tat java.base/java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1519)\r\n\tat java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:852)\r\n\tat java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1509)\r\n\tat java.base/java.net.InetAddress.getAllByName(InetAddress.java:1367)\r\n\tat java.base/java.net.InetAddress.getAllByName(InetAddress.java:1301)\r\n\tat com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:130)\r\n\tat com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63)\r\n\t... 61 common frames omitted\r\n```\r\n\r\nWhat I made wrong?\r\n","title":"JavaEE can&#39;t create connection with docker&#39;s MySQL container","body":"<p>Salute, guys, I was creating my application on JavaEE using as database MySQL. It works correctly, but now i need to run mysql server from docker container. Here I got problems. I am demonstrating my code <a href=\"https://github.com/MatveyAndrosyukk/javaee_rest_jdbc_todo_list\" rel=\"nofollow noreferrer\">https://github.com/MatveyAndrosyukk/javaee_rest_jdbc_todo_list</a>:</p>\n<p>1.My DataSourse URL:</p>\n<pre><code>    final static String URL = &quot;jdbc:mysql://localhost:3306/javaee_task_db?useSSL=false&quot;;\n</code></pre>\n<p>2.My URL from pom.xml in FlyWay configuration:</p>\n<pre><code>        &lt;plugin&gt;\n          &lt;groupId&gt;com.googlecode.flyway&lt;/groupId&gt;\n          &lt;artifactId&gt;flyway-maven-plugin&lt;/artifactId&gt;\n          &lt;version&gt;1.5&lt;/version&gt;\n          &lt;configuration&gt;\n            &lt;user&gt;user228&lt;/user&gt;\n            &lt;password&gt;user228&lt;/password&gt;\n            &lt;driver&gt;com.mysql.jdbc.Driver&lt;/driver&gt;\n            &lt;url&gt;jdbc:mysql://mysql_db:3306/javaee_task_db?autoReconnect=true&amp;amp;useUnicode=true&amp;amp;characterEncoding=UTF-8&amp;amp;connectionCollation=utf8_general_ci&amp;amp;characterSetResults=UTF-8&lt;/url&gt;\n          &lt;/configuration&gt;\n         &lt;/plugin&gt;\n</code></pre>\n<p>3.I started MySQL container using Docker: <code> docker run --name mysql_db -p 3308:3306 --hostname=mysql_db -e MYSQL_ROOT_PASSWORD=secret -e MYSQL_DATABASE=javaee_task_db -e MYSQL_USER=user228 -e  MYSQL_PASSWORD=user228 -v $HOME/mysql-data:/var/lib/mysql -d mysql:8.0</code></p>\n<p>4.Then I changed DataSourse connection URL and did the same in pom.xml:</p>\n<pre><code>    final static String URL = &quot;jdbc:mysql://mysql_db:3306/javaee_task_db?useSSL=false&quot;;\n</code></pre>\n<p>5.Thy to start my application and get errors:</p>\n<pre><code>The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n    at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828)\n    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:448)\n    at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)\n    at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)\n    at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)\n    at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)\n    at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)\n    at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)\n    at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)\n    at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:100)\n    at com.zaxxer.hikari.HikariDataSource.&lt;init&gt;(HikariDataSource.java:81)\n    at api.configuration.datasource.DataSourceMySQL.&lt;clinit&gt;(DataSourceMySQL.java:38)\n    at api.servlets.context.ContextListener.contextInitialized(ContextListener.java:34)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4768)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\n    at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1783)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:293)\n    at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)\n    at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\n    at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:460)\n    at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:408)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:293)\n    at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)\n    at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\n    at java.management/com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:472)\n    at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)\n    at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\n    at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1412)\n    at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\n    at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\n    at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\n    at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n    at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)\n    at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)\n    at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)\n    at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167)\n    at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89)\n    at com.mysql.cj.NativeSession.connect(NativeSession.java:120)\n    at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:948)\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:818)\n    ... 58 common frames omitted\nCaused by: java.net.UnknownHostException: Этот хост неизвестен (mysql_db)\n    at java.base/java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)\n    at java.base/java.net.InetAddress$PlatformNameService.lookupAllHostAddr(InetAddress.java:933)\n    at java.base/java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1519)\n    at java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:852)\n    at java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1509)\n    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1367)\n    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1301)\n    at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:130)\n    at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63)\n    ... 61 common frames omitted\n19:15:15.876 [RMI TCP Connection(3)-127.0.0.1] ERROR com.zaxxer.hikari.pool.HikariPool - restServiceDbPool - Exception during pool initialization.\ncom.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n    at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828)\n    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:448)\n    at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)\n    at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)\n    at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)\n    at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)\n    at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)\n    at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)\n    at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)\n    at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:100)\n    at com.zaxxer.hikari.HikariDataSource.&lt;init&gt;(HikariDataSource.java:81)\n    at api.configuration.datasource.DataSourceMySQL.&lt;clinit&gt;(DataSourceMySQL.java:38)\n    at api.servlets.context.ContextListener.contextInitialized(ContextListener.java:34)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4768)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\n    at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1783)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:293)\n    at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)\n    at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\n    at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:460)\n    at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:408)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:293)\n    at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)\n    at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\n    at java.management/com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:472)\n    at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)\n    at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\n    at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1412)\n    at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\n    at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\n    at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\n    at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n    at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)\n    at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)\n    at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)\n    at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167)\n    at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89)\n    at com.mysql.cj.NativeSession.connect(NativeSession.java:120)\n    at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:948)\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:818)\n    ... 58 common frames omitted\nCaused by: java.net.UnknownHostException: Этот хост неизвестен (mysql_db)\n    at java.base/java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)\n    at java.base/java.net.InetAddress$PlatformNameService.lookupAllHostAddr(InetAddress.java:933)\n    at java.base/java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1519)\n    at java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:852)\n    at java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1509)\n    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1367)\n    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1301)\n    at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:130)\n    at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63)\n    ... 61 common frames omitted\n</code></pre>\n<p>What I made wrong?</p>\n"},{"tags":["java","gpu","hardware","aparapi"],"owner":{"account_id":17981208,"reputation":29,"user_id":13067500,"display_name":"Daniel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660234469,"creation_date":1660082500,"question_id":73298556,"body_markdown":"I am creating a program that needs to run many calculations simultaneously so i looked for a gpu solution to make it run faster. I implemented the code found here: https://github.com/Syncleus/aparapi-examples/tree/master/src/main/java/com/aparapi/examples/add into this function that would add 2 arrays of values on the GPU:\r\n```\r\n    public static double[] addWithGPU(double[] a, double[] b) {\r\n        final double[] sum = new double[a.length];\r\n\r\n        Kernel kernel = new Kernel(){\r\n            @Override\r\n            public void run() {\r\n                int gid = getGlobalId();\r\n                sum[gid] = a[gid] + b[gid];\r\n            }\r\n        };\r\n\r\n        kernel.execute(Range.create(a.length));\r\n\r\n        kernel.dispose();\r\n        return sum;\r\n    }\r\n```\r\nI used this code in my main class:\r\n```\r\n    public Main() {\r\n        GPU.addWithGPU(new double[] {1, 2, 3}, new double[] {3, 2, 1});\r\n        thread = new Thread(() -&gt; {\r\n            // Code here\r\n        });\r\n        thread.start();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        new Main();\r\n    }\r\n```\r\nI also tried this:\r\n```\r\n    final double[] a1 = {1, 2, 3};\r\n    final double[] a2 = {3, 2, 1};\r\n\r\n    public Main() {\r\n        GPU.addWithGPU(a1, a2);\r\n        thread = new Thread(() -&gt; {\r\n            // Code here\r\n        });\r\n        thread.start();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        new Main();\r\n    }\r\n```\r\nI also tried to make the &quot;addWithGPU&quot; function non static however i still got the error of:\r\n&gt;com.aparapi.internal.model.ClassModel$AttributePool &lt;init&gt;\r\nWARNING: Found unexpected Attribute (name = NestHost)\r\n\r\nSomtimes the code just continues running after the error however sometimes the program just hangs, and it is inconsistent, I belive it may be based on if any other programs are using my GPU at the time however I am not sure.\r\n\r\nMy PC specs are:\r\nGPU: Nvidia RTX 3060, CPU: Intel Core i9 12900KF, Motherboard: ASUS PRIME Z690-P d4 wifi and the software I am using is IntelliJ IDEA CE\r\n\r\nI also would prefer and answer using the aparapi api since I am not great at low level programming, but i will be open so swiching api&#39;s if the aparapi api is simply out of date or has a complicated solution where it would just be simpler to swap api&#39;s.","title":"Getting &quot;WARNING: Found unexpected Attribute (name = NestHost)&quot; when running calculations on the gpu using the aparapi api in java","body":"<p>I am creating a program that needs to run many calculations simultaneously so i looked for a gpu solution to make it run faster. I implemented the code found here: <a href=\"https://github.com/Syncleus/aparapi-examples/tree/master/src/main/java/com/aparapi/examples/add\" rel=\"nofollow noreferrer\">https://github.com/Syncleus/aparapi-examples/tree/master/src/main/java/com/aparapi/examples/add</a> into this function that would add 2 arrays of values on the GPU:</p>\n<pre><code>    public static double[] addWithGPU(double[] a, double[] b) {\n        final double[] sum = new double[a.length];\n\n        Kernel kernel = new Kernel(){\n            @Override\n            public void run() {\n                int gid = getGlobalId();\n                sum[gid] = a[gid] + b[gid];\n            }\n        };\n\n        kernel.execute(Range.create(a.length));\n\n        kernel.dispose();\n        return sum;\n    }\n</code></pre>\n<p>I used this code in my main class:</p>\n<pre><code>    public Main() {\n        GPU.addWithGPU(new double[] {1, 2, 3}, new double[] {3, 2, 1});\n        thread = new Thread(() -&gt; {\n            // Code here\n        });\n        thread.start();\n    }\n\n    public static void main(String[] args) {\n        new Main();\n    }\n</code></pre>\n<p>I also tried this:</p>\n<pre><code>    final double[] a1 = {1, 2, 3};\n    final double[] a2 = {3, 2, 1};\n\n    public Main() {\n        GPU.addWithGPU(a1, a2);\n        thread = new Thread(() -&gt; {\n            // Code here\n        });\n        thread.start();\n    }\n\n    public static void main(String[] args) {\n        new Main();\n    }\n</code></pre>\n<p>I also tried to make the &quot;addWithGPU&quot; function non static however i still got the error of:</p>\n<blockquote>\n<p>com.aparapi.internal.model.ClassModel$AttributePool \nWARNING: Found unexpected Attribute (name = NestHost)</p>\n</blockquote>\n<p>Somtimes the code just continues running after the error however sometimes the program just hangs, and it is inconsistent, I belive it may be based on if any other programs are using my GPU at the time however I am not sure.</p>\n<p>My PC specs are:\nGPU: Nvidia RTX 3060, CPU: Intel Core i9 12900KF, Motherboard: ASUS PRIME Z690-P d4 wifi and the software I am using is IntelliJ IDEA CE</p>\n<p>I also would prefer and answer using the aparapi api since I am not great at low level programming, but i will be open so swiching api's if the aparapi api is simply out of date or has a complicated solution where it would just be simpler to swap api's.</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":25757421,"reputation":381,"user_id":19508866,"display_name":"Rohit Bhati"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1660145924,"creation_date":1660145924,"answer_id":73309086,"question_id":73309018,"body_markdown":"   You can not use `findViewById()` outside of `onCreate()` like this and if you really wanna do that, do it by creating a new method for setting up IDs and then add that method in `onCreate()`.\r\n\r\nthis code will do the work now:\r\n\r\n        package com.example.myapplication;\r\n        import androidx.appcompat.app.AppCompatActivity;\r\n        import android.content.Intent;\r\n        import android.view.View;\r\n        import android.widget.Button;\r\n        import android.os.Bundle;\r\n        \r\n        public class MainActivity extends AppCompatActivity {\r\n        \r\n        public Button signUp;\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            signUp = findViewById(R.id.signUpBtn);\r\n            signUp.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    openActivity();\r\n                }\r\n            });\r\n        }\r\n        \r\n        public void openActivity(){\r\n            Intent intent = new Intent(this, LoginActivity.class);\r\n            startActivity(intent);\r\n        }\r\n    }","title":"Android chat app keeps on crashing when I run it","body":"<p>You can not use <code>findViewById()</code> outside of <code>onCreate()</code> like this and if you really wanna do that, do it by creating a new method for setting up IDs and then add that method in <code>onCreate()</code>.</p>\n<p>this code will do the work now:</p>\n<pre><code>    package com.example.myapplication;\n    import androidx.appcompat.app.AppCompatActivity;\n    import android.content.Intent;\n    import android.view.View;\n    import android.widget.Button;\n    import android.os.Bundle;\n    \n    public class MainActivity extends AppCompatActivity {\n    \n    public Button signUp;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        signUp = findViewById(R.id.signUpBtn);\n        signUp.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                openActivity();\n            }\n        });\n    }\n    \n    public void openActivity(){\n        Intent intent = new Intent(this, LoginActivity.class);\n        startActivity(intent);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20146313,"reputation":1,"user_id":14774743,"display_name":"Jareer Abdullah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1660234161,"creation_date":1660145618,"question_id":73309018,"body_markdown":"I have just begun writing some code for my Chat app after days of planning but the problem is that keeps on crashing right after the Gradle Build has finished and the app is installed on my device. I have created a button that is expected to open a new activity but instead of doing so it crashes. Everything works before I have written any code, the app opens and logcat doesn&#39;t show any errors. Here is the error:\r\n\r\n    2022-08-10 19:26:48.372 15348-15348/? E/e.myapplicatio: Unknown bits set in runtime_flags: 0x40000000\r\n    2022-08-10 19:26:48.391 15348-15348/? E/RefClass: java.lang.reflect.InvocationTargetException\r\n    2022-08-10 19:26:48.474 15348-15348/com.example.myapplication E/Perf:  perftest packageName : com.example.myapplication App is allowed to use Hide APIs  \r\n    2022-08-10 19:26:48.515 15348-15374/com.example.myapplication E/libEGL: Invalid file path for libcolorx-loader.so\r\n    2022-08-10 19:26:48.528 15348-15348/com.example.myapplication E/AndroidRuntime: FATAL EXCEPTION: main\r\n        Process: com.example.myapplication, PID: 15348\r\n        java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.myapplication/com.example.myapplication.MainActivity}: java.lang.NullPointerException: Attempt to invoke virtual method &#39;android.content.pm.ApplicationInfo android.content.Context.getApplicationInfo()&#39; on a null object reference\r\n            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3628)\r\n            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3887)\r\n            at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\r\n            at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:140)\r\n            at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:100)\r\n            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2317)\r\n            at android.os.Handler.dispatchMessage(Handler.java:106)\r\n            at android.os.Looper.loop(Looper.java:263)\r\n            at android.app.ActivityThread.main(ActivityThread.java:8292)\r\n            at java.lang.reflect.Method.invoke(Native Method)\r\n            at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:612)\r\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1006)\r\n         Caused by: java.lang.NullPointerException: Attempt to invoke virtual method &#39;android.content.pm.ApplicationInfo android.content.Context.getApplicationInfo()&#39; on a null object reference\r\n            at android.content.ContextWrapper.getApplicationInfo(ContextWrapper.java:183)\r\n            at android.view.ContextThemeWrapper.getTheme(ContextThemeWrapper.java:174)\r\n            at android.content.Context.obtainStyledAttributes(Context.java:744)\r\n            at androidx.appcompat.app.AppCompatDelegateImpl.createSubDecor(AppCompatDelegateImpl.java:848)\r\n            at androidx.appcompat.app.AppCompatDelegateImpl.ensureSubDecor(AppCompatDelegateImpl.java:815)\r\n            at androidx.appcompat.app.AppCompatDelegateImpl.findViewById(AppCompatDelegateImpl.java:640)\r\n            at androidx.appcompat.app.AppCompatActivity.findViewById(AppCompatActivity.java:259)\r\n            at com.example.myapplication.MainActivity.&lt;init&gt;(MainActivity.java:12)\r\n            at java.lang.Class.newInstance(Native Method)\r\n            at android.app.AppComponentFactory.instantiateActivity(AppComponentFactory.java:95)\r\n            at androidx.core.app.CoreComponentFactory.instantiateActivity(CoreComponentFactory.java:45)\r\n            at android.app.Instrumentation.newActivity(Instrumentation.java:1254)\r\n            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3616)\r\n            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3887)&#160;\r\n            at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)&#160;\r\n            at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:140)&#160;\r\n            at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:100)&#160;\r\n            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2317)&#160;\r\n            at android.os.Handler.dispatchMessage(Handler.java:106)&#160;\r\n            at android.os.Looper.loop(Looper.java:263)&#160;\r\n            at android.app.ActivityThread.main(ActivityThread.java:8292)&#160;\r\n            at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n            at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:612)&#160;\r\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1006)&#160;\r\n\r\nI tried following some other suggestions but they didn&#39;t work. Here&#39;s the snippet of my code:\r\n\r\n~~~\r\npackage com.example.myapplication;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport android.content.Intent;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.os.Bundle;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    public Button signUp = findViewById(R.id.signUpBtn);\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        signUp.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                openActivity();\r\n            }\r\n        });\r\n    }\r\n\r\n    public void openActivity(){\r\n        Intent intent = new Intent(this, LoginActivity.class);\r\n        startActivity(intent);\r\n    }\r\n}\r\n~~~","title":"Android chat app keeps on crashing when I run it","body":"<p>I have just begun writing some code for my Chat app after days of planning but the problem is that keeps on crashing right after the Gradle Build has finished and the app is installed on my device. I have created a button that is expected to open a new activity but instead of doing so it crashes. Everything works before I have written any code, the app opens and logcat doesn't show any errors. Here is the error:</p>\n<pre><code>2022-08-10 19:26:48.372 15348-15348/? E/e.myapplicatio: Unknown bits set in runtime_flags: 0x40000000\n2022-08-10 19:26:48.391 15348-15348/? E/RefClass: java.lang.reflect.InvocationTargetException\n2022-08-10 19:26:48.474 15348-15348/com.example.myapplication E/Perf:  perftest packageName : com.example.myapplication App is allowed to use Hide APIs  \n2022-08-10 19:26:48.515 15348-15374/com.example.myapplication E/libEGL: Invalid file path for libcolorx-loader.so\n2022-08-10 19:26:48.528 15348-15348/com.example.myapplication E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.myapplication, PID: 15348\n    java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.myapplication/com.example.myapplication.MainActivity}: java.lang.NullPointerException: Attempt to invoke virtual method 'android.content.pm.ApplicationInfo android.content.Context.getApplicationInfo()' on a null object reference\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3628)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3887)\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:140)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:100)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2317)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loop(Looper.java:263)\n        at android.app.ActivityThread.main(ActivityThread.java:8292)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:612)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1006)\n     Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'android.content.pm.ApplicationInfo android.content.Context.getApplicationInfo()' on a null object reference\n        at android.content.ContextWrapper.getApplicationInfo(ContextWrapper.java:183)\n        at android.view.ContextThemeWrapper.getTheme(ContextThemeWrapper.java:174)\n        at android.content.Context.obtainStyledAttributes(Context.java:744)\n        at androidx.appcompat.app.AppCompatDelegateImpl.createSubDecor(AppCompatDelegateImpl.java:848)\n        at androidx.appcompat.app.AppCompatDelegateImpl.ensureSubDecor(AppCompatDelegateImpl.java:815)\n        at androidx.appcompat.app.AppCompatDelegateImpl.findViewById(AppCompatDelegateImpl.java:640)\n        at androidx.appcompat.app.AppCompatActivity.findViewById(AppCompatActivity.java:259)\n        at com.example.myapplication.MainActivity.&lt;init&gt;(MainActivity.java:12)\n        at java.lang.Class.newInstance(Native Method)\n        at android.app.AppComponentFactory.instantiateActivity(AppComponentFactory.java:95)\n        at androidx.core.app.CoreComponentFactory.instantiateActivity(CoreComponentFactory.java:45)\n        at android.app.Instrumentation.newActivity(Instrumentation.java:1254)\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3616)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3887) \n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85) \n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:140) \n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:100) \n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2317) \n        at android.os.Handler.dispatchMessage(Handler.java:106) \n        at android.os.Looper.loop(Looper.java:263) \n        at android.app.ActivityThread.main(ActivityThread.java:8292) \n        at java.lang.reflect.Method.invoke(Native Method) \n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:612) \n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1006) \n</code></pre>\n<p>I tried following some other suggestions but they didn't work. Here's the snippet of my code:</p>\n<pre><code>package com.example.myapplication;\nimport androidx.appcompat.app.AppCompatActivity;\nimport android.content.Intent;\nimport android.view.View;\nimport android.widget.Button;\nimport android.os.Bundle;\n\npublic class MainActivity extends AppCompatActivity {\n\n    public Button signUp = findViewById(R.id.signUpBtn);\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        signUp.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                openActivity();\n            }\n        });\n    }\n\n    public void openActivity(){\n        Intent intent = new Intent(this, LoginActivity.class);\n        startActivity(intent);\n    }\n}\n</code></pre>\n"},{"tags":["java","mysql","sql","mariadb","resultset"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1660215108,"post_id":73319135,"comment_id":129482590,"body_markdown":"Process each row retrieved from the table and save it in a `List`.","body":"Process each row retrieved from the table and save it in a <code>List</code>."}],"answers":[{"tags":[],"owner":{"account_id":10929,"reputation":545317,"user_id":20860,"accept_rate":92,"display_name":"Bill Karwin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660234144,"creation_date":1660234144,"answer_id":73323849,"question_id":73319135,"body_markdown":"The MySQL Connector/J fetches rows in batches, according to the &quot;fetchSize&quot;. You can set this as a property of the statement.\r\n\r\nRead the documentation about `ResultSet` here: https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-reference-implementation-notes.html\r\n\r\n","title":"How to &quot;convert&quot; ResultSet in a local variables without having it &quot;plugged&quot; to db?","body":"<p>The MySQL Connector/J fetches rows in batches, according to the &quot;fetchSize&quot;. You can set this as a property of the statement.</p>\n<p>Read the documentation about <code>ResultSet</code> here: <a href=\"https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-reference-implementation-notes.html\" rel=\"nofollow noreferrer\">https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-reference-implementation-notes.html</a></p>\n"}],"owner":{"account_id":7555436,"reputation":1397,"user_id":5953720,"accept_rate":63,"display_name":"Allexj"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1660234373,"answer_count":1,"score":0,"last_activity_date":1660234144,"creation_date":1660213598,"question_id":73319135,"body_markdown":"when I get a ResultSet output, it is always &quot;plugged&quot; to db, so every time I use &quot;resultset.next()&quot; it actually do requests to db. I always thought that when I perform something like this: \r\n\r\n    public static ResultSet getInfoFromDB(){\r\n            ResultSet resultSet;\r\n            try{\r\n                Connection connection = connectDB();\r\n                Statement statement = connection.createStatement();\r\n                resultSet = statement.executeQuery(&quot;SELECT * from tablex&quot;);\r\n            } catch (Exception e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n            return resultSet;\r\n        }\r\n\r\nI thought that since I am selecting * from table, that it was return ALL the table into the variable resultSet.... but it acutally isn&#39;t.\r\n\r\nHow to retrieve all the table and save into a &quot;local&quot; (non &quot;plugged&quot; to db) variable that I can return and manipulate it in local?","title":"How to &quot;convert&quot; ResultSet in a local variables without having it &quot;plugged&quot; to db?","body":"<p>when I get a ResultSet output, it is always &quot;plugged&quot; to db, so every time I use &quot;resultset.next()&quot; it actually do requests to db. I always thought that when I perform something like this:</p>\n<pre><code>public static ResultSet getInfoFromDB(){\n        ResultSet resultSet;\n        try{\n            Connection connection = connectDB();\n            Statement statement = connection.createStatement();\n            resultSet = statement.executeQuery(&quot;SELECT * from tablex&quot;);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n        return resultSet;\n    }\n</code></pre>\n<p>I thought that since I am selecting * from table, that it was return ALL the table into the variable resultSet.... but it acutally isn't.</p>\n<p>How to retrieve all the table and save into a &quot;local&quot; (non &quot;plugged&quot; to db) variable that I can return and manipulate it in local?</p>\n"},{"tags":["java","spring","grails"],"answers":[{"tags":[],"owner":{"account_id":7332,"reputation":23983,"user_id":12704,"accept_rate":75,"display_name":"Michael Easter"},"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1660233882,"creation_date":1266357512,"answer_id":2276669,"question_id":2276624,"body_markdown":"\r\n[The Grails documentation][1] describes a way to get a service when in a servlet. This might be useful, if you can obtain the same objects in your context:\r\n\r\n    ApplicationContext ctx = (ApplicationContext)ApplicationHolder.getApplication().getMainContext();\r\n    CountryServiceInt service = (CountryServiceInt) ctx.getBean(&quot;countryService&quot;);\r\n    String str = service.sayHello(request.getParameter.(&quot;name&quot;));    \r\n\r\n  [1]: http://web.archive.org/web/20100724145043/http://www.grails.org/Services\r\n","title":"How do I get an instance of a Grails service programmatically?","body":"<p><a href=\"http://web.archive.org/web/20100724145043/http://www.grails.org/Services\" rel=\"nofollow noreferrer\">The Grails documentation</a> describes a way to get a service when in a servlet. This might be useful, if you can obtain the same objects in your context:</p>\n<pre><code>ApplicationContext ctx = (ApplicationContext)ApplicationHolder.getApplication().getMainContext();\nCountryServiceInt service = (CountryServiceInt) ctx.getBean(&quot;countryService&quot;);\nString str = service.sayHello(request.getParameter.(&quot;name&quot;));    \n</code></pre>\n"},{"tags":[],"owner":{"account_id":334901,"reputation":323,"user_id":661650,"display_name":"Marcin"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1371714181,"creation_date":1371714181,"answer_id":17207955,"question_id":2276624,"body_markdown":"Since ApplicationHolder has been deprecated, this is another way to get the ApplicationContext:\r\n\r\n    ApplicationContext ctx = Holders.grailsApplication.mainContext ","title":"How do I get an instance of a Grails service programmatically?","body":"<p>Since ApplicationHolder has been deprecated, this is another way to get the ApplicationContext:</p>\n\n<pre><code>ApplicationContext ctx = Holders.grailsApplication.mainContext \n</code></pre>\n"}],"owner":{"account_id":49409,"reputation":1970,"user_id":147095,"accept_rate":76,"display_name":"Thody"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11321,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":2276669,"answer_count":2,"score":11,"last_activity_date":1660233882,"creation_date":1266357023,"question_id":2276624,"body_markdown":"I have an external data source, which will return a string indicating the name of a Grails service to use.\r\n\r\nWhat&#39;s the syntax to get an instance of this service programatically given the name of the service as a String?\r\n\r\nie. given &#39;GoogleWeather&#39;, give me an instance of GoogleWeatherService.\r\n\r\nThanks!","title":"How do I get an instance of a Grails service programmatically?","body":"<p>I have an external data source, which will return a string indicating the name of a Grails service to use.</p>\n\n<p>What's the syntax to get an instance of this service programatically given the name of the service as a String?</p>\n\n<p>ie. given 'GoogleWeather', give me an instance of GoogleWeatherService.</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","android","android-studio","kotlin","intellij-idea"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1586377039,"post_id":61109221,"comment_id":108109943,"body_markdown":"How are you defining &quot;all projects&quot;?","body":"How are you defining &quot;all projects&quot;?"},{"owner":{"account_id":2601421,"reputation":9836,"user_id":2253682,"accept_rate":44,"display_name":"AdamHurwitz"},"score":0,"creation_date":1586377109,"post_id":61109221,"comment_id":108109972,"body_markdown":"The desired goal and what I mean by &#39;all projects&#39; is for this to be a default setting moving forward when opening an existing project or creating a new project.","body":"The desired goal and what I mean by &#39;all projects&#39; is for this to be a default setting moving forward when opening an existing project or creating a new project."},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1586377287,"post_id":61109221,"comment_id":108110061,"body_markdown":"Then it would seem that checking that checkbox is what you want. You are looking at IDE-level settings, not project-specific ones.","body":"Then it would seem that checking that checkbox is what you want. You are looking at IDE-level settings, not project-specific ones."},{"owner":{"account_id":2601421,"reputation":9836,"user_id":2253682,"accept_rate":44,"display_name":"AdamHurwitz"},"score":1,"creation_date":1586377529,"post_id":61109221,"comment_id":108110182,"body_markdown":"`Add unambiguous imports on the fly` is IDE-level settings. However, `Optimize imports on the fly` does not appear to be as the parenthesis state `for current project`. I&#39;ve tested this by creating a new project and opening the settings. As expected, `Add unambiguous imports on the fly` is selected while `Optimize imports on the fly` is not selected.","body":"<code>Add unambiguous imports on the fly</code> is IDE-level settings. However, <code>Optimize imports on the fly</code> does not appear to be as the parenthesis state <code>for current project</code>. I&#39;ve tested this by creating a new project and opening the settings. As expected, <code>Add unambiguous imports on the fly</code> is selected while <code>Optimize imports on the fly</code> is not selected."},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1586377646,"post_id":61109221,"comment_id":108110227,"body_markdown":"OK, that&#39;s a really strange settings UI design.","body":"OK, that&#39;s a really strange settings UI design."},{"owner":{"account_id":2601421,"reputation":9836,"user_id":2253682,"accept_rate":44,"display_name":"AdamHurwitz"},"score":0,"creation_date":1586378264,"post_id":61109221,"comment_id":108110523,"body_markdown":"It is indeed, it would be nice to not have to enable each time a new project is opened.","body":"It is indeed, it would be nice to not have to enable each time a new project is opened."}],"answers":[{"tags":[],"owner":{"account_id":36734,"reputation":392127,"user_id":104891,"display_name":"CrazyCoder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660233643,"creation_date":1660233643,"answer_id":73323736,"question_id":61109221,"body_markdown":"Unfortunately, it&#39;s not possible until [IDEA-237002](https://youtrack.jetbrains.com/issue/IDEA-237002) is fixed.","title":"Optimize imports on the fly for all projects in Android Studio/IntelliJ","body":"<p>Unfortunately, it's not possible until <a href=\"https://youtrack.jetbrains.com/issue/IDEA-237002\" rel=\"nofollow noreferrer\">IDEA-237002</a> is fixed.</p>\n"}],"owner":{"account_id":2601421,"reputation":9836,"user_id":2253682,"accept_rate":44,"display_name":"AdamHurwitz"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1137,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1660233643,"creation_date":1586376697,"question_id":61109221,"body_markdown":"**Is there a way to optimize imports on the fly for all projects, not just &#39;for current project&#39; in Android Studio/IntelliJ?**\r\n\r\n# Expected\r\n\r\nOptimize imports to be enabled when opening an existing project and/or when creating new projects.\r\n\r\n# Observed\r\n\r\n`Add unambiguous imports on the fly` is IDE-level settings. However, `Optimize imports on the fly` does not appear to be as the parenthesis state `for current project`. I&#39;ve tested this by creating a new project and opening the settings. As expected, `Add unambiguous imports on the fly` is selected while `Optimize imports on the fly` is not selected.\r\n\r\nThe current IntelliJ documentation, [Auto imports][1], does not provide a solution.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n# Attempted solution\r\n\r\nEnable `Optimize imports on the fly (for current project)` under _Preferences for New Projects..._\r\n\r\nThis produced the same observed result above.\r\n\r\n[![enter image description here][3]][3]\r\n\r\n[![enter image description here][4]][4]\r\n\r\nThis has also been added to the [IntelliJ community forum][5].  \r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/creating-and-optimizing-imports.html\r\n  [2]: https://i.stack.imgur.com/b29ko.png\r\n  [3]: https://i.stack.imgur.com/rKDW0.jpg\r\n  [4]: https://i.stack.imgur.com/TDCpe.png\r\n  [5]: https://intellij-support.jetbrains.com/hc/en-us/community/posts/360007960300-Optimize-imports-on-the-fly-for-all-projects-instead-of-for-current-project-","title":"Optimize imports on the fly for all projects in Android Studio/IntelliJ","body":"<p><strong>Is there a way to optimize imports on the fly for all projects, not just 'for current project' in Android Studio/IntelliJ?</strong></p>\n\n<h1>Expected</h1>\n\n<p>Optimize imports to be enabled when opening an existing project and/or when creating new projects.</p>\n\n<h1>Observed</h1>\n\n<p><code>Add unambiguous imports on the fly</code> is IDE-level settings. However, <code>Optimize imports on the fly</code> does not appear to be as the parenthesis state <code>for current project</code>. I've tested this by creating a new project and opening the settings. As expected, <code>Add unambiguous imports on the fly</code> is selected while <code>Optimize imports on the fly</code> is not selected.</p>\n\n<p>The current IntelliJ documentation, <a href=\"https://www.jetbrains.com/help/idea/creating-and-optimizing-imports.html\" rel=\"noreferrer\">Auto imports</a>, does not provide a solution.</p>\n\n<p><a href=\"https://i.stack.imgur.com/b29ko.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/b29ko.png\" alt=\"enter image description here\"></a></p>\n\n<h1>Attempted solution</h1>\n\n<p>Enable <code>Optimize imports on the fly (for current project)</code> under <em>Preferences for New Projects...</em></p>\n\n<p>This produced the same observed result above.</p>\n\n<p><a href=\"https://i.stack.imgur.com/rKDW0.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/rKDW0.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/TDCpe.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/TDCpe.png\" alt=\"enter image description here\"></a></p>\n\n<p>This has also been added to the <a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/360007960300-Optimize-imports-on-the-fly-for-all-projects-instead-of-for-current-project-\" rel=\"noreferrer\">IntelliJ community forum</a>.  </p>\n"},{"tags":["java","scala","user-interface","javafx","scalafx"],"comments":[{"owner":{"account_id":5347179,"reputation":10433,"user_id":4262407,"accept_rate":40,"display_name":"mipa"},"score":0,"creation_date":1660233237,"post_id":73323218,"comment_id":129489774,"body_markdown":"You should just use Pane and add scene graph geometries to it or draw into a Canvas.","body":"You should just use Pane and add scene graph geometries to it or draw into a Canvas."}],"answers":[{"tags":[],"owner":{"account_id":15056715,"reputation":1,"user_id":18898152,"display_name":"user18898152"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660233368,"creation_date":1660233368,"answer_id":73323662,"question_id":73323218,"body_markdown":"Just found a solution. I&#39;ve found this can be solved by fixing the exact column and row widths and heights to the same value as the line lengths, like so:\r\n\r\n```\r\nval rowConst = new RowConstraints()\r\n// remove: rowConst.setPercentHeight(100.0 / sizey)\r\nrowConst.setMinHeight(length)\r\nrowConst.setMaxHeight(length)\r\nr.getRowConstraints().add(rowConst) \r\n```\r\nWith `length` passed into the initialisation function, of course.","title":"How to draw a grid out of grid squares seamlessly in JavaFX","body":"<p>Just found a solution. I've found this can be solved by fixing the exact column and row widths and heights to the same value as the line lengths, like so:</p>\n<pre><code>val rowConst = new RowConstraints()\n// remove: rowConst.setPercentHeight(100.0 / sizey)\nrowConst.setMinHeight(length)\nrowConst.setMaxHeight(length)\nr.getRowConstraints().add(rowConst) \n</code></pre>\n<p>With <code>length</code> passed into the initialisation function, of course.</p>\n"}],"owner":{"account_id":15056715,"reputation":1,"user_id":18898152,"display_name":"user18898152"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660233368,"creation_date":1660231345,"question_id":73323218,"body_markdown":"I&#39;m been writing maze algorithms, and want to draw the mazes generated using JavaFX.\r\n\r\nTo begin with, I&#39;m attempting to draw a simple grid - but made up of smaller shapes so that I&#39;ll later be able to change the shape of the grid into that of a maze.\r\n\r\nI&#39;m using little upper left corner shapes (like ┏) and a `GridPane`, but this is leading to small discontinuities between the cells. (screenshot and code below). How can I wedge these shapes together seamlessly? Am I barking up the wrong tree with the `Gridpane` idea?\r\n\r\n[attempted grid drawing so far][1]\r\n\r\n\r\n\r\nMy code, below, is actually written in Scala; I&#39;m using ScalaFX, but finding help for ScalaFX online is a nightmare so I&#39;ve been going solely off JavaFX docs - they are pretty much the same thing as far as I&#39;ve gathered.\r\n\r\n```\r\nval lineLength: Int = 30\r\n\r\ndef makeClosedCell(length: Int = lineLength): Shape = {\r\n    val wallN = Line(0,0,length,0)\r\n    val wallW = Line(0,0,0,length)\r\n    val closedCell: Shape = Shape.union(wallN, wallW)\r\n    return closedCell\r\n}\r\n\r\ndef makeOpenW(length: Int = lineLength): Shape = Line(0,0,length,0)\r\n\r\ndef makeOpenN(length: Int = lineLength): Shape = Line(0,0,0,length)\r\n\r\ndef initialiseGrid(r: GridPane, sizex: Int, sizey: Int): Unit = {\r\n    for (i &lt;- 0 until sizex) {\r\n        val colConst = new ColumnConstraints()\r\n        colConst.setPercentWidth(100.0 / sizex)\r\n        r.getColumnConstraints().add(colConst)\r\n    }\r\n    for (i &lt;- 0 until sizey) {\r\n        val rowConst = new RowConstraints()\r\n        rowConst.setPercentHeight(100.0 / sizey)\r\n        r.getRowConstraints().add(rowConst)     \r\n    }\r\n    for(j &lt;- sizey-1 to 0 by -1){\r\n        for(i &lt;- 0 until sizex){\r\n            r.add(makeClosedCell(),i,j)\r\n        }\r\n        r.add(makeOpenN(),sizex,j)\r\n    }\r\n    for(i &lt;- 0 until sizex){\r\n        r.add(makeOpenW(),i,sizey)\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5ExEi.png","title":"How to draw a grid out of grid squares seamlessly in JavaFX","body":"<p>I'm been writing maze algorithms, and want to draw the mazes generated using JavaFX.</p>\n<p>To begin with, I'm attempting to draw a simple grid - but made up of smaller shapes so that I'll later be able to change the shape of the grid into that of a maze.</p>\n<p>I'm using little upper left corner shapes (like ┏) and a <code>GridPane</code>, but this is leading to small discontinuities between the cells. (screenshot and code below). How can I wedge these shapes together seamlessly? Am I barking up the wrong tree with the <code>Gridpane</code> idea?</p>\n<p><a href=\"https://i.stack.imgur.com/5ExEi.png\" rel=\"nofollow noreferrer\">attempted grid drawing so far</a></p>\n<p>My code, below, is actually written in Scala; I'm using ScalaFX, but finding help for ScalaFX online is a nightmare so I've been going solely off JavaFX docs - they are pretty much the same thing as far as I've gathered.</p>\n<pre><code>val lineLength: Int = 30\n\ndef makeClosedCell(length: Int = lineLength): Shape = {\n    val wallN = Line(0,0,length,0)\n    val wallW = Line(0,0,0,length)\n    val closedCell: Shape = Shape.union(wallN, wallW)\n    return closedCell\n}\n\ndef makeOpenW(length: Int = lineLength): Shape = Line(0,0,length,0)\n\ndef makeOpenN(length: Int = lineLength): Shape = Line(0,0,0,length)\n\ndef initialiseGrid(r: GridPane, sizex: Int, sizey: Int): Unit = {\n    for (i &lt;- 0 until sizex) {\n        val colConst = new ColumnConstraints()\n        colConst.setPercentWidth(100.0 / sizex)\n        r.getColumnConstraints().add(colConst)\n    }\n    for (i &lt;- 0 until sizey) {\n        val rowConst = new RowConstraints()\n        rowConst.setPercentHeight(100.0 / sizey)\n        r.getRowConstraints().add(rowConst)     \n    }\n    for(j &lt;- sizey-1 to 0 by -1){\n        for(i &lt;- 0 until sizex){\n            r.add(makeClosedCell(),i,j)\n        }\n        r.add(makeOpenN(),sizex,j)\n    }\n    for(i &lt;- 0 until sizex){\n        r.add(makeOpenW(),i,sizey)\n    }\n}\n</code></pre>\n"},{"tags":["java","indexing","gremlin","tinkerpop","janusgraph"],"answers":[{"tags":[],"owner":{"account_id":7115613,"reputation":14979,"user_id":5442034,"display_name":"Kelvin Lawrence"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660232795,"creation_date":1660228531,"answer_id":73322500,"question_id":73316305,"body_markdown":"JanusGraph will give you a warning or an error (depending if full graph scans are enabled) if a query is not being fully backed by the index that you have created. Further, adding a `.profile()` to your query will show you the current index usage. If you are seeing the warning/error then you need to take further index action.\r\n\r\nHere is an example using the `inmemory` backend, with the air-routes data set loaded.\r\n\r\n```\r\ngremlin&gt; graph=JanusGraphFactory.open(&#39;inmemory&#39;)\r\n==&gt;standardjanusgraph[inmemory:[127.0.0.1]]\r\n\r\ngremlin&gt; g=graph.traversal()\r\n==&gt;graphtraversalsource[standardjanusgraph[inmemory:[127.0.0.1]], standard]\r\n\r\ngremlin&gt; g.io(&#39;air-routes-latest.xml&#39;).read()\r\n```\r\n\r\nIf we try to run a query now, we get the index warning\r\n```\r\ngremlin&gt; g.V().has(&#39;code&#39;,within(&#39;AUS&#39;,&#39;SFO&#39;,&#39;DFW&#39;)).group().by(&#39;code&#39;)\r\n10:10:40 WARN  org.janusgraph.graphdb.transaction.StandardJanusGraphTx  - Query requires iterating over all vertices [((code = AUS OR code = SFO OR code = DFW))]. For better performance, use indexes\r\n\r\n==&gt;[DFW:[v[12512]],SFO:[v[20568]],AUS:[v[4096]]]\r\n```\r\nSo now let&#39;s create an index\r\n```\r\ngremlin&gt; graph.tx().rollback()\r\n==&gt;null\r\n\r\ngremlin&gt; mgmt = graph.openManagement()\r\n\r\n==&gt;org.janusgraph.graphdb.database.management.ManagementSystem@8e25d3f\r\n\r\ngremlin&gt; idx = mgmt.buildIndex(&#39;airportIndex&#39;,Vertex.class)\r\n\r\n==&gt;org.janusgraph.graphdb.database.management.ManagementSystem$IndexBuilder@388c519\r\n\r\ngremlin&gt; iata = mgmt.getPropertyKey(&#39;code&#39;)\r\n==&gt;code\r\n\r\ngremlin&gt; idx.addKey(iata).buildCompositeIndex()\r\n==&gt;airportIndex\r\n\r\ngremlin&gt; mgmt.commit()\r\n==null\r\n\r\ngremlin&gt; mgmt.awaitGraphIndexStatus(graph, &#39;airportIndex&#39;).\r\n......1&gt;      status(SchemaStatus.REGISTERED).call()\r\n\r\n==&gt;GraphIndexStatusReport[success=true, indexName=&#39;airportIndex&#39;, targetStatus=[REGISTERED], notConverged={}, converged={code=REGISTERED}, elapsed=PT6.016S]\r\n```\r\n\r\nNow we need to re-index\r\n\r\n```\r\ngremlin&gt; mgmt = graph.openManagement()\r\n==&gt;org.janusgraph.graphdb.database.management.ManagementSystem@6637a365\r\n\r\ngremlin&gt; mgmt.updateIndex(mgmt.getGraphIndex(&quot;airportIndex&quot;), SchemaAction.REINDEX).get()\r\n==&gt;org.janusgraph.diskstorage.keycolumnvalue.scan.StandardScanMetrics@6ee88e21\r\n\r\ngremlin&gt; mgmt.commit()\r\n==&gt;null\r\n```\r\n\r\nThe `profile()` will now show us if the index was used\r\n\r\n```\r\ngremlin&gt; g.V().has(&#39;code&#39;,&#39;SFO&#39;).profile()\r\n==&gt;Traversal Metrics\r\nStep                                                               Count  Traversers       Time (ms)    % Dur\r\n=============================================================================================================\r\nJanusGraphStep([],[code.eq(SFO)])                                      1           1           0.714   100.00\r\n  constructGraphCentricQuery                                                                   0.173\r\n  GraphCentricQuery                                                                            0.307\r\n    \\_condition=(code = SFO)\r\n    \\_orders=[]\r\n    \\_isFitted=true\r\n    \\_isOrdered=true\r\n    \\_query=multiKSQ[1]\r\n    \\_index=airportIndex\r\n                                            &gt;TOTAL                     -           -           0.714        -\r\n```\r\n\r\nLastly we can try to again group using the `code` property, and we get no warnings this time as the query is backed by the index.\r\n\r\n```\r\ngremlin&gt; g.V().has(&#39;code&#39;,within(&#39;AUS&#39;,&#39;SFO&#39;,&#39;DFW&#39;)).group().by(&#39;code&#39;)\r\n==&gt;[DFW:[v[4240]],SFO:[v[20584]],AUS:[v[8312]]]\r\n```\r\nThe same index will also work if we add a traversal to the `by` modulator. In fact the index is not even needed to resolve `values(&#39;code&#39;)` as it was already used to find the starting point, and after the `out` a set of additional vertices is already found.\r\n```\r\ngremlin&gt; g.V().has(&#39;code&#39;,&#39;SAF&#39;).group().by(out().values(&#39;code&#39;).fold())\r\n==&gt;[[DFW,LAX,PHX,DEN]:[v[24600]]]\r\n```\r\n\r\nSo in summary for this type of `group` operation, you should just be able to use the &quot;built-in&quot; JanusGraph composite index and not need to resort to an external (mixed) index, unless you are unable to do exact match type lookups.","title":"What index we should create for group by() queries in janus?","body":"<p>JanusGraph will give you a warning or an error (depending if full graph scans are enabled) if a query is not being fully backed by the index that you have created. Further, adding a <code>.profile()</code> to your query will show you the current index usage. If you are seeing the warning/error then you need to take further index action.</p>\n<p>Here is an example using the <code>inmemory</code> backend, with the air-routes data set loaded.</p>\n<pre><code>gremlin&gt; graph=JanusGraphFactory.open('inmemory')\n==&gt;standardjanusgraph[inmemory:[127.0.0.1]]\n\ngremlin&gt; g=graph.traversal()\n==&gt;graphtraversalsource[standardjanusgraph[inmemory:[127.0.0.1]], standard]\n\ngremlin&gt; g.io('air-routes-latest.xml').read()\n</code></pre>\n<p>If we try to run a query now, we get the index warning</p>\n<pre><code>gremlin&gt; g.V().has('code',within('AUS','SFO','DFW')).group().by('code')\n10:10:40 WARN  org.janusgraph.graphdb.transaction.StandardJanusGraphTx  - Query requires iterating over all vertices [((code = AUS OR code = SFO OR code = DFW))]. For better performance, use indexes\n\n==&gt;[DFW:[v[12512]],SFO:[v[20568]],AUS:[v[4096]]]\n</code></pre>\n<p>So now let's create an index</p>\n<pre><code>gremlin&gt; graph.tx().rollback()\n==&gt;null\n\ngremlin&gt; mgmt = graph.openManagement()\n\n==&gt;org.janusgraph.graphdb.database.management.ManagementSystem@8e25d3f\n\ngremlin&gt; idx = mgmt.buildIndex('airportIndex',Vertex.class)\n\n==&gt;org.janusgraph.graphdb.database.management.ManagementSystem$IndexBuilder@388c519\n\ngremlin&gt; iata = mgmt.getPropertyKey('code')\n==&gt;code\n\ngremlin&gt; idx.addKey(iata).buildCompositeIndex()\n==&gt;airportIndex\n\ngremlin&gt; mgmt.commit()\n==null\n\ngremlin&gt; mgmt.awaitGraphIndexStatus(graph, 'airportIndex').\n......1&gt;      status(SchemaStatus.REGISTERED).call()\n\n==&gt;GraphIndexStatusReport[success=true, indexName='airportIndex', targetStatus=[REGISTERED], notConverged={}, converged={code=REGISTERED}, elapsed=PT6.016S]\n</code></pre>\n<p>Now we need to re-index</p>\n<pre><code>gremlin&gt; mgmt = graph.openManagement()\n==&gt;org.janusgraph.graphdb.database.management.ManagementSystem@6637a365\n\ngremlin&gt; mgmt.updateIndex(mgmt.getGraphIndex(&quot;airportIndex&quot;), SchemaAction.REINDEX).get()\n==&gt;org.janusgraph.diskstorage.keycolumnvalue.scan.StandardScanMetrics@6ee88e21\n\ngremlin&gt; mgmt.commit()\n==&gt;null\n</code></pre>\n<p>The <code>profile()</code> will now show us if the index was used</p>\n<pre><code>gremlin&gt; g.V().has('code','SFO').profile()\n==&gt;Traversal Metrics\nStep                                                               Count  Traversers       Time (ms)    % Dur\n=============================================================================================================\nJanusGraphStep([],[code.eq(SFO)])                                      1           1           0.714   100.00\n  constructGraphCentricQuery                                                                   0.173\n  GraphCentricQuery                                                                            0.307\n    \\_condition=(code = SFO)\n    \\_orders=[]\n    \\_isFitted=true\n    \\_isOrdered=true\n    \\_query=multiKSQ[1]\n    \\_index=airportIndex\n                                            &gt;TOTAL                     -           -           0.714        -\n</code></pre>\n<p>Lastly we can try to again group using the <code>code</code> property, and we get no warnings this time as the query is backed by the index.</p>\n<pre><code>gremlin&gt; g.V().has('code',within('AUS','SFO','DFW')).group().by('code')\n==&gt;[DFW:[v[4240]],SFO:[v[20584]],AUS:[v[8312]]]\n</code></pre>\n<p>The same index will also work if we add a traversal to the <code>by</code> modulator. In fact the index is not even needed to resolve <code>values('code')</code> as it was already used to find the starting point, and after the <code>out</code> a set of additional vertices is already found.</p>\n<pre><code>gremlin&gt; g.V().has('code','SAF').group().by(out().values('code').fold())\n==&gt;[[DFW,LAX,PHX,DEN]:[v[24600]]]\n</code></pre>\n<p>So in summary for this type of <code>group</code> operation, you should just be able to use the &quot;built-in&quot; JanusGraph composite index and not need to resort to an external (mixed) index, unless you are unable to do exact match type lookups.</p>\n"}],"owner":{"account_id":24902387,"reputation":1,"user_id":18772897,"display_name":"Mounika Mandadi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660232795,"creation_date":1660200059,"question_id":73316305,"body_markdown":"I have a sample use case in janus where student and skills are my nodes.\r\nFor a given student, I need to find similar student based on most skill overlap.\r\nI have written the following gremlin query,\r\n\r\n```java\r\n  g.V().\r\n  has(&#39;Student&#39;, &#39;id&#39;, &#39;1234&#39;).as(&#39;can&#39;).\r\n  out(&#39;HAS_SKILL&#39;).\r\n  inE(&#39;HAS_SKILL&#39;).\r\n  aggregate(&#39;users&#39;).\r\n  group().by(outV().values(&#39;name&#39;).as(&#39;sks&#39;)).\r\n  unfold().\r\n  project(&#39;total_count&#39;, &#39;similarUser&#39;, &#39;count&#39;, &#39;skills&#39;).\r\n    by(select(&#39;users&#39;).unfold().outV().dedup().count()).\r\n    by(select(keys)).\r\n    by(select(values).count(local)).\r\n    by(select(values).unfold().inV().values(&#39;skillName&#39;).fold()).\r\n  order().by(&#39;count&#39;, desc).\r\n  limit(10)\r\n```\r\n\r\n\r\n I have a composite index  on id.My question is, do we need index on &#39;name&#39; field too , because I am using group by? If yes, what type of index I should create on &#39;name&#39; (composite/mixed)?I tried with composite but my query is taking very much time","title":"What index we should create for group by() queries in janus?","body":"<p>I have a sample use case in janus where student and skills are my nodes.\nFor a given student, I need to find similar student based on most skill overlap.\nI have written the following gremlin query,</p>\n<pre class=\"lang-java prettyprint-override\"><code>  g.V().\n  has('Student', 'id', '1234').as('can').\n  out('HAS_SKILL').\n  inE('HAS_SKILL').\n  aggregate('users').\n  group().by(outV().values('name').as('sks')).\n  unfold().\n  project('total_count', 'similarUser', 'count', 'skills').\n    by(select('users').unfold().outV().dedup().count()).\n    by(select(keys)).\n    by(select(values).count(local)).\n    by(select(values).unfold().inV().values('skillName').fold()).\n  order().by('count', desc).\n  limit(10)\n</code></pre>\n<p>I have a composite index  on id.My question is, do we need index on 'name' field too , because I am using group by? If yes, what type of index I should create on 'name' (composite/mixed)?I tried with composite but my query is taking very much time</p>\n"},{"tags":["java","spring-boot","outputstream"],"answers":[{"tags":[],"owner":{"account_id":61178,"reputation":1255,"user_id":182474,"accept_rate":50,"display_name":"Gabor Garami"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660232672,"creation_date":1660232672,"answer_id":73323508,"question_id":73321844,"body_markdown":"Most modern operation systems limits how many open files could an application have. If you keep a file open when it is not neccesary, you will have one more open file, one less free slots available for you. For some applications, the default 1024 slot is too much, but for some other applications, it&#39;s very few.\r\n\r\nAnyway, from operation perspective this is a bad pattern. Open the file when you need, close it when you finished with it. Write a helper method to make serialization and storing in file easier.","title":"Is there a disadvantage if I produce an OutputStream in configuration in a spring-boot application and keep it till the application instance runs?","body":"<p>Most modern operation systems limits how many open files could an application have. If you keep a file open when it is not neccesary, you will have one more open file, one less free slots available for you. For some applications, the default 1024 slot is too much, but for some other applications, it's very few.</p>\n<p>Anyway, from operation perspective this is a bad pattern. Open the file when you need, close it when you finished with it. Write a helper method to make serialization and storing in file easier.</p>\n"}],"owner":{"account_id":8290022,"reputation":61,"user_id":6232003,"display_name":"Bhanu Mittal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660232672,"creation_date":1660225745,"question_id":73321844,"body_markdown":"I wrote a method which creates a private key file and saves it on the disk. I have a spring-boot application which I will configure to produce this private key file and keep it as OutputStream in the application and use it when required. Are there any disadvantages or issues with this approach?","title":"Is there a disadvantage if I produce an OutputStream in configuration in a spring-boot application and keep it till the application instance runs?","body":"<p>I wrote a method which creates a private key file and saves it on the disk. I have a spring-boot application which I will configure to produce this private key file and keep it as OutputStream in the application and use it when required. Are there any disadvantages or issues with this approach?</p>\n"},{"tags":["java","spring","ldap"],"answers":[{"tags":[],"owner":{"account_id":8540933,"reputation":190,"user_id":6401089,"display_name":"Galbi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660232550,"creation_date":1573029795,"answer_id":58726111,"question_id":58693689,"body_markdown":"Solved.\r\n\r\nInstead of declaring the `multiValuedAttr` with `String[]` it must be defined as `List&lt;String&gt;`\r\n\r\n    @Entry(objectClasses = { &quot;class1&quot;, &quot;class2&quot; }, base=&quot;ou=my_base_dn&quot;)\r\n    public final class MyLdapEntity {\r\n    \r\n        @Id\r\n        private Name dn;\r\n    \r\n        @Attribute(name=&quot;name&quot;)\r\n        private String name;\r\n    \r\n        @Attribute(name=&quot;sureName&quot;)\r\n        private String sureName;\r\n    \r\n        @Attribute(name=&quot;multiValuedAttr&quot;)\r\n        private String[] multiValuedAttr;\r\n    }\r\n\r\nMaybe cause `List&lt;String&gt;` has methods to add elements without increment the array size explicitly.","title":"How to bind multi-valued attributes in LDAP using Spring repository","body":"<p>Solved.</p>\n<p>Instead of declaring the <code>multiValuedAttr</code> with <code>String[]</code> it must be defined as <code>List&lt;String&gt;</code></p>\n<pre><code>@Entry(objectClasses = { &quot;class1&quot;, &quot;class2&quot; }, base=&quot;ou=my_base_dn&quot;)\npublic final class MyLdapEntity {\n\n    @Id\n    private Name dn;\n\n    @Attribute(name=&quot;name&quot;)\n    private String name;\n\n    @Attribute(name=&quot;sureName&quot;)\n    private String sureName;\n\n    @Attribute(name=&quot;multiValuedAttr&quot;)\n    private String[] multiValuedAttr;\n}\n</code></pre>\n<p>Maybe cause <code>List&lt;String&gt;</code> has methods to add elements without increment the array size explicitly.</p>\n"}],"owner":{"account_id":8540933,"reputation":190,"user_id":6401089,"display_name":"Galbi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1097,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":58726111,"answer_count":1,"score":1,"last_activity_date":1660232550,"creation_date":1572871305,"question_id":58693689,"body_markdown":"I want to retrieve a multi-valued attribute from LDAP using a Spring repository.\r\n\r\nMy actual code is something like this:\r\n\r\n    @Entry(objectClasses = { &quot;class1&quot;, &quot;class2&quot; }, base=&quot;ou=my_base_dn&quot;)\r\n    public final class MyLdapEntity {\r\n    \t\r\n    \t@Id\r\n    \tprivate Name dn;\r\n    \t\r\n    \t@Attribute(name=&quot;name&quot;)\r\n    \tprivate String name;\r\n    \t\r\n    \t@Attribute(name=&quot;sureName&quot;)\r\n    \tprivate String sureName;\r\n    \t\r\n    \t@Attribute(name=&quot;multiValuedAttr&quot;)\r\n    \tprivate String[] multiValuedAttr;\r\n    }\r\n\r\nAnd my repository class:\r\n\r\n    @Repository\r\n    public interface MyLdapRepository extends CrudRepository&lt;MyLdapEntity, Long&gt; {\r\n    }\r\n\r\nAnd when I try to get the multivalued attr I can do it only with the first entry.\r\n\r\n&#191;Is there any way to do this mapping with an annotation?","title":"How to bind multi-valued attributes in LDAP using Spring repository","body":"<p>I want to retrieve a multi-valued attribute from LDAP using a Spring repository.</p>\n\n<p>My actual code is something like this:</p>\n\n<pre><code>@Entry(objectClasses = { \"class1\", \"class2\" }, base=\"ou=my_base_dn\")\npublic final class MyLdapEntity {\n\n    @Id\n    private Name dn;\n\n    @Attribute(name=\"name\")\n    private String name;\n\n    @Attribute(name=\"sureName\")\n    private String sureName;\n\n    @Attribute(name=\"multiValuedAttr\")\n    private String[] multiValuedAttr;\n}\n</code></pre>\n\n<p>And my repository class:</p>\n\n<pre><code>@Repository\npublic interface MyLdapRepository extends CrudRepository&lt;MyLdapEntity, Long&gt; {\n}\n</code></pre>\n\n<p>And when I try to get the multivalued attr I can do it only with the first entry.</p>\n\n<p>¿Is there any way to do this mapping with an annotation?</p>\n"},{"tags":["java","unit-testing","junit","mockito","junit4"],"comments":[{"owner":{"account_id":4012793,"reputation":1627,"user_id":3305737,"display_name":"Jonasz"},"score":0,"creation_date":1660230444,"post_id":73322701,"comment_id":129488609,"body_markdown":"So you want to inject actual instances of service1 and service2 fields into the mainService in your test class?","body":"So you want to inject actual instances of service1 and service2 fields into the mainService in your test class?"},{"owner":{"account_id":6661932,"reputation":3905,"user_id":5140756,"accept_rate":16,"display_name":"Augusto"},"score":0,"creation_date":1660230870,"post_id":73322701,"comment_id":129488760,"body_markdown":"@Jonasz exactly!","body":"@Jonasz exactly!"}],"answers":[{"tags":[],"owner":{"account_id":4012793,"reputation":1627,"user_id":3305737,"display_name":"Jonasz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660231186,"creation_date":1660231186,"answer_id":73323172,"question_id":73322701,"body_markdown":"The best approach would be just using the constructor or accessor injection instead of field injection (read more [here][1] or [here][2]), but if you really need to stick to the field injection, simply replace the `@Mock` annotations with `@Spy` annotations like so:\r\n```java\r\n@Spy\r\nprivate Service1 service1;\r\n@Spy\r\nprivate Service2 service2;\r\n```\r\nor (if the `ServiceX` classes do not have a default constructor):\r\n```java\r\n@Spy\r\nprivate Service1 service1 = new Service1(...);\r\n@Spy\r\nprivate Service2 service2 = new Service2(...);\r\n```\r\nThose fields will be used by Mockito when you call `initMocks` and will be injected into the fields annotated with `@InjectMocks`. No behavior mocking required, the actual `ServiceX` classes code will be called.\r\n\r\n---\r\n\r\nI&#39;ve prepared a fully reproducible code example in [a GitHub repository here][3] - the test passes.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/19381846/why-use-constructor-over-setter-injection-in-cdi\r\n  [2]: https://stackoverflow.com/a/39892204/3305737\r\n  [3]: https://github.com/Jonarzz/stack-overflow/blob/73322701/spring-boot-module/src/test/java/io/github/jonarzz/SomeTest.java","title":"How to execute the code of a used Component instead @Mock the results in JUnit Tests?","body":"<p>The best approach would be just using the constructor or accessor injection instead of field injection (read more <a href=\"https://stackoverflow.com/questions/19381846/why-use-constructor-over-setter-injection-in-cdi\">here</a> or <a href=\"https://stackoverflow.com/a/39892204/3305737\">here</a>), but if you really need to stick to the field injection, simply replace the <code>@Mock</code> annotations with <code>@Spy</code> annotations like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Spy\nprivate Service1 service1;\n@Spy\nprivate Service2 service2;\n</code></pre>\n<p>or (if the <code>ServiceX</code> classes do not have a default constructor):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Spy\nprivate Service1 service1 = new Service1(...);\n@Spy\nprivate Service2 service2 = new Service2(...);\n</code></pre>\n<p>Those fields will be used by Mockito when you call <code>initMocks</code> and will be injected into the fields annotated with <code>@InjectMocks</code>. No behavior mocking required, the actual <code>ServiceX</code> classes code will be called.</p>\n<hr />\n<p>I've prepared a fully reproducible code example in <a href=\"https://github.com/Jonarzz/stack-overflow/blob/73322701/spring-boot-module/src/test/java/io/github/jonarzz/SomeTest.java\" rel=\"nofollow noreferrer\">a GitHub repository here</a> - the test passes.</p>\n"},{"tags":[],"owner":{"account_id":26033321,"reputation":1,"user_id":19739158,"display_name":"JBarr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660231536,"creation_date":1660231389,"answer_id":73323224,"question_id":73322701,"body_markdown":"If you want to use real instances of `service1` and `service2` you can use [@Spy][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/39197040/19739158","title":"How to execute the code of a used Component instead @Mock the results in JUnit Tests?","body":"<p>If you want to use real instances of <code>service1</code> and <code>service2</code> you can use <a href=\"https://stackoverflow.com/a/39197040/19739158\">@Spy</a></p>\n"}],"owner":{"account_id":6661932,"reputation":3905,"user_id":5140756,"accept_rate":16,"display_name":"Augusto"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":442,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73323172,"answer_count":2,"score":0,"last_activity_date":1660231536,"creation_date":1660229330,"question_id":73322701,"body_markdown":"I have a `@Component` class that contains some `@Inject` components to perform some code logic. In my Test, I would like to execute that logic instead Mock the results. I don&#39;t want to import `spring-boot-starter-test` because will overload the dependencies and generate conflicts.\r\n\r\nThe `Service1` and `Service2` doesn&#39;t use any third services, it&#39;s has just executed simple logic.\r\n\r\n    @Component\r\n    public class MainService {\r\n    \r\n        @Inject\r\n        private Service1 service1;\r\n    \r\n        @Inject \r\n        private Service2 service2;\r\n    \r\n    }\r\n     \r\n    ---------------- Test Class ----------------\r\n    \r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class SomeTest {\r\n    \r\n        @Mock\r\n        private Service1 service1;\r\n    \r\n        @Mock\r\n        private Service2 service2;\r\n    \r\n        @InjectMocks\r\n        private MainService mainService;\r\n    \r\n        @Before\r\n        public void startUp() {\r\n            MockitoAnnotations.initMocks(this);\r\n        }\r\n    \r\n        @Test\r\n        public void test1() {\r\n           Mockito.when(service1.function).thenReturn(...); \r\n           Mockito.when(service2.function).thenReturn(...);\r\n           // How to provide real execution instead Mock the results?\r\n    \r\n           mainService.start();\r\n           // asserts...\r\n        }\r\n    }","title":"How to execute the code of a used Component instead @Mock the results in JUnit Tests?","body":"<p>I have a <code>@Component</code> class that contains some <code>@Inject</code> components to perform some code logic. In my Test, I would like to execute that logic instead Mock the results. I don't want to import <code>spring-boot-starter-test</code> because will overload the dependencies and generate conflicts.</p>\n<p>The <code>Service1</code> and <code>Service2</code> doesn't use any third services, it's has just executed simple logic.</p>\n<pre><code>@Component\npublic class MainService {\n\n    @Inject\n    private Service1 service1;\n\n    @Inject \n    private Service2 service2;\n\n}\n \n---------------- Test Class ----------------\n\n@RunWith(MockitoJUnitRunner.class)\npublic class SomeTest {\n\n    @Mock\n    private Service1 service1;\n\n    @Mock\n    private Service2 service2;\n\n    @InjectMocks\n    private MainService mainService;\n\n    @Before\n    public void startUp() {\n        MockitoAnnotations.initMocks(this);\n    }\n\n    @Test\n    public void test1() {\n       Mockito.when(service1.function).thenReturn(...); \n       Mockito.when(service2.function).thenReturn(...);\n       // How to provide real execution instead Mock the results?\n\n       mainService.start();\n       // asserts...\n    }\n}\n</code></pre>\n"},{"tags":["java","android","android-sharing"],"comments":[{"owner":{"account_id":19885834,"reputation":173,"user_id":14568825,"display_name":"Aisha Kumari"},"score":0,"creation_date":1660205790,"post_id":73317371,"comment_id":129479396,"body_markdown":"@ninhnau19 can you please help me out of  this problem","body":"@ninhnau19 can you please help me out of  this problem"},{"owner":{"account_id":8061597,"reputation":823,"user_id":6076979,"display_name":"MojoJojo"},"score":0,"creation_date":1660206105,"post_id":73317371,"comment_id":129479499,"body_markdown":"Please refer to this link: https://developer.android.com/training/secure-file-sharing","body":"Please refer to this link: <a href=\"https://developer.android.com/training/secure-file-sharing\" rel=\"nofollow noreferrer\">developer.android.com/training/secure-file-sharing</a>"}],"answers":[{"tags":[],"owner":{"account_id":23733633,"reputation":742,"user_id":17752564,"display_name":"ninhnau19"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660213876,"creation_date":1660213876,"answer_id":73319183,"question_id":73317371,"body_markdown":"make sure you have \r\n\r\n```\r\n        &lt;provider\r\n            android:name=&quot;androidx.core.content.FileProvider&quot;\r\n            android:authorities=&quot;${applicationId}.provider&quot;\r\n            android:grantUriPermissions=&quot;true&quot;\r\n            android:exported=&quot;false&quot;&gt;\r\n            ....\r\n        &lt;/provider&gt;\r\n```\r\nin **AndroidManifest.xml**.\r\n\r\nI don&#39;t sure about *getUriForFile* method in your code, it should look like this:\r\n```\r\nFileProvider.getUriForFile(\r\n                    context,\r\n                    BuildConfig.APPLICATION_ID + &quot;.provider&quot;,\r\n                    file\r\n                )\r\n```\r\n\r\nAnd can u provide an example URI of your video???","title":"How to share video using file provider in android studio?","body":"<p>make sure you have</p>\n<pre><code>        &lt;provider\n            android:name=&quot;androidx.core.content.FileProvider&quot;\n            android:authorities=&quot;${applicationId}.provider&quot;\n            android:grantUriPermissions=&quot;true&quot;\n            android:exported=&quot;false&quot;&gt;\n            ....\n        &lt;/provider&gt;\n</code></pre>\n<p>in <strong>AndroidManifest.xml</strong>.</p>\n<p>I don't sure about <em>getUriForFile</em> method in your code, it should look like this:</p>\n<pre><code>FileProvider.getUriForFile(\n                    context,\n                    BuildConfig.APPLICATION_ID + &quot;.provider&quot;,\n                    file\n                )\n</code></pre>\n<p>And can u provide an example URI of your video???</p>\n"}],"owner":{"account_id":19885834,"reputation":173,"user_id":14568825,"display_name":"Aisha Kumari"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660231533,"creation_date":1660205578,"question_id":73317371,"body_markdown":"I am trying to share video from uri using file provider, but I can&#39;t understand how can I pass the uri to share video.\r\n\r\ncan anyone help me out of this problem \r\n\r\n          &lt;provider\r\n            android:name=&quot;androidx.core.content.FileProvider&quot;\r\n            android:authorities=&quot;com.xyz.fileprovider&quot;\r\n            android:exported=&quot;false&quot;\r\n            android:grantUriPermissions=&quot;true&quot;&gt;\r\n            &lt;meta-data\r\n                android:name=&quot;android.support.FILE_PROVIDER_PATHS&quot;\r\n                android:resource=&quot;@xml/file_provider_paths&quot; /&gt;\r\n        &lt;/provider&gt;\r\n\r\npath.xml\r\n\r\n    &lt;cache-path name=&quot;shared_videos&quot; path=&quot;videos/&quot;/&gt;\r\n\r\n\r\n\r\n\r\nhere i am passing the uri \r\n\r\n    final String path = fileslist.get(position).getPath();\r\n                    String destPath = Environment.getExternalStorageDirectory().getAbsolutePath()+Constant.SAVE_FOLDER_NAME;\r\n                    Intent intent = new Intent(context,Video.class);\r\n                    intent.putExtra(&quot;Dest_path_video&quot;, destPath);\r\n                    intent.putExtra(&quot;File_video&quot;, path);\r\n                    intent.putExtra(&quot;FileName_video&quot;, modalClass.getFileName());\r\n                    intent.putExtra(&quot;Uri_video&quot;, modalClass.getUri().toString());\r\n                    context.startActivity(intent);\r\n\r\nhere is uri \r\n\r\n    String video_uri = fileslist.get(position).getUri().toString();\r\n\r\n\r\n\r\nhere how  I am trying to share video \r\n\r\n           Uri uri = null;\r\n        try {\r\n            File videoPath = new File(context.getCacheDir(), &quot;videos&quot;);\r\n            imagePath.mkdirs();\r\n            File file = new File(videoPath , &quot;shared_videos.mp4&quot;);\r\n            uri = getUriForFile(context, &quot;com.xyz.fileprovider&quot;, file);\r\n            Intent intent = new Intent(Intent.ACTION_SEND);\r\n            intent.putExtra(Intent.EXTRA_STREAM, uri);\r\n            intent.setType(&quot;video/*&quot;);\r\n            context.startActivity(Intent.createChooser(intent, &quot;Share Via&quot;));\r\n        } catch (Exception e) {\r\n            Log.d(&quot;test&quot;,&quot;&quot;+e.getMessage());\r\n        }\r\n\r\n","title":"How to share video using file provider in android studio?","body":"<p>I am trying to share video from uri using file provider, but I can't understand how can I pass the uri to share video.</p>\n<p>can anyone help me out of this problem</p>\n<pre><code>      &lt;provider\n        android:name=&quot;androidx.core.content.FileProvider&quot;\n        android:authorities=&quot;com.xyz.fileprovider&quot;\n        android:exported=&quot;false&quot;\n        android:grantUriPermissions=&quot;true&quot;&gt;\n        &lt;meta-data\n            android:name=&quot;android.support.FILE_PROVIDER_PATHS&quot;\n            android:resource=&quot;@xml/file_provider_paths&quot; /&gt;\n    &lt;/provider&gt;\n</code></pre>\n<p>path.xml</p>\n<pre><code>&lt;cache-path name=&quot;shared_videos&quot; path=&quot;videos/&quot;/&gt;\n</code></pre>\n<p>here i am passing the uri</p>\n<pre><code>final String path = fileslist.get(position).getPath();\n                String destPath = Environment.getExternalStorageDirectory().getAbsolutePath()+Constant.SAVE_FOLDER_NAME;\n                Intent intent = new Intent(context,Video.class);\n                intent.putExtra(&quot;Dest_path_video&quot;, destPath);\n                intent.putExtra(&quot;File_video&quot;, path);\n                intent.putExtra(&quot;FileName_video&quot;, modalClass.getFileName());\n                intent.putExtra(&quot;Uri_video&quot;, modalClass.getUri().toString());\n                context.startActivity(intent);\n</code></pre>\n<p>here is uri</p>\n<pre><code>String video_uri = fileslist.get(position).getUri().toString();\n</code></pre>\n<p>here how  I am trying to share video</p>\n<pre><code>       Uri uri = null;\n    try {\n        File videoPath = new File(context.getCacheDir(), &quot;videos&quot;);\n        imagePath.mkdirs();\n        File file = new File(videoPath , &quot;shared_videos.mp4&quot;);\n        uri = getUriForFile(context, &quot;com.xyz.fileprovider&quot;, file);\n        Intent intent = new Intent(Intent.ACTION_SEND);\n        intent.putExtra(Intent.EXTRA_STREAM, uri);\n        intent.setType(&quot;video/*&quot;);\n        context.startActivity(Intent.createChooser(intent, &quot;Share Via&quot;));\n    } catch (Exception e) {\n        Log.d(&quot;test&quot;,&quot;&quot;+e.getMessage());\n    }\n</code></pre>\n"},{"tags":["java","android","firebase","firebase-storage"],"answers":[{"tags":[],"owner":{"account_id":10560058,"reputation":2957,"user_id":7780102,"display_name":"Digvijay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660231260,"creation_date":1594705815,"answer_id":62888822,"question_id":62888469,"body_markdown":"First you can convert your image in bitmap stream and then you can upload it on firebase storage and get downloadable link also easily. You can do something like this below:\r\n\r\n    StorageReference filepath = mImageStorage.child(&quot;profile_images&quot;).child(current_user_id + &quot;.jpg&quot;);\r\n\r\n    Bitmap bitmap = MediaStore.Images.Media.getBitmap(getContentResolver(),imageUri);\r\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n    bitmap.compress(Bitmap.CompressFormat.JPEG,40,baos);\r\n    byte[] byt = baos.toByteArray();\r\n \r\n    UploadTask uploadTask = filepath.putBytes(byt);\r\n    \r\n     uploadTask.addOnFailureListener(new OnFailureListener() {\r\n\r\n                            @Override\r\n                            public void onFailure(@NonNull Exception e) {\r\n\r\n                                TastyToast.makeText(getApplicationContext(),&quot;Error:&quot;+e.getMessage(),TastyToast.LENGTH_LONG,\r\n                                         TastyToast.ERROR).show();\r\n\r\n                            }\r\n                        }).addOnSuccessListener(new OnSuccessListener&lt;UploadTask.TaskSnapshot&gt;() {\r\n\r\n                            @Override\r\n                            public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n\r\n                                if(taskSnapshot.getMetadata() != null){\r\n\r\n                                    Task&lt;Uri&gt; result = taskSnapshot.getStorage().getDownloadUrl();\r\n\r\n                                    result.addOnSuccessListener(new OnSuccessListener&lt;Uri&gt;() {\r\n\r\n                                        @Override\r\n                                        public void onSuccess(Uri uri) {\r\n\r\n                                             downloadUrl = Uri.parse(uri.toString());\r\n\r\n                                           // In downloadUri variable you will get your \r\n                                               image downloadable link\r\n                                        }\r\n                                    });\r\n                                }\r\n\r\n                            }\r\n                        }); \r\n\r\n","title":"Unable to fetch file from firebase storage","body":"<p>First you can convert your image in bitmap stream and then you can upload it on firebase storage and get downloadable link also easily. You can do something like this below:</p>\n<pre><code>StorageReference filepath = mImageStorage.child(&quot;profile_images&quot;).child(current_user_id + &quot;.jpg&quot;);\n\nBitmap bitmap = MediaStore.Images.Media.getBitmap(getContentResolver(),imageUri);\nByteArrayOutputStream baos = new ByteArrayOutputStream();\nbitmap.compress(Bitmap.CompressFormat.JPEG,40,baos);\nbyte[] byt = baos.toByteArray();\n\nUploadTask uploadTask = filepath.putBytes(byt);\n\n uploadTask.addOnFailureListener(new OnFailureListener() {\n\n                        @Override\n                        public void onFailure(@NonNull Exception e) {\n\n                            TastyToast.makeText(getApplicationContext(),&quot;Error:&quot;+e.getMessage(),TastyToast.LENGTH_LONG,\n                                     TastyToast.ERROR).show();\n\n                        }\n                    }).addOnSuccessListener(new OnSuccessListener&lt;UploadTask.TaskSnapshot&gt;() {\n\n                        @Override\n                        public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\n\n                            if(taskSnapshot.getMetadata() != null){\n\n                                Task&lt;Uri&gt; result = taskSnapshot.getStorage().getDownloadUrl();\n\n                                result.addOnSuccessListener(new OnSuccessListener&lt;Uri&gt;() {\n\n                                    @Override\n                                    public void onSuccess(Uri uri) {\n\n                                         downloadUrl = Uri.parse(uri.toString());\n\n                                       // In downloadUri variable you will get your \n                                           image downloadable link\n                                    }\n                                });\n                            }\n\n                        }\n                    }); \n</code></pre>\n"}],"owner":{"account_id":19053200,"reputation":1,"user_id":13910937,"display_name":"Baked Knight"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":119,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1660231322,"creation_date":1594703568,"question_id":62888469,"body_markdown":"I am unable to fetch the uploaded image file from the firebase storage because the database stores the url in a public unguessable url form and I cannot seem to figure it out, what is wrong with my code?\r\n\r\n        @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        if(requestCode == GALLERY_PICK &amp;&amp; resultCode == RESULT_OK){\r\n\r\n            Uri imageUri = data.getData();\r\n\r\n            CropImage.activity(imageUri)\r\n                    .setAspectRatio(1,1)\r\n                    .start(this);\r\n\r\n            //Toast.makeText(SettingsActivity.this, imageUri, Toast.LENGTH_LONG).show();\r\n\r\n        }\r\n\r\n        if(requestCode == CropImage.CROP_IMAGE_ACTIVITY_REQUEST_CODE){\r\n\r\n            CropImage.ActivityResult result = CropImage.getActivityResult(data);\r\n\r\n            if(resultCode == RESULT_OK){\r\n\r\n                mProgressDialog = new ProgressDialog(SettingsActivity.this);\r\n                mProgressDialog.setTitle(&quot;Uploading&quot;);\r\n                mProgressDialog.setMessage(&quot;Please Wait While The Image Is Being Uploaded&quot;);\r\n                mProgressDialog.setCanceledOnTouchOutside(false);\r\n                mProgressDialog.show();\r\n\r\n                Uri resultUri = result.getUri();\r\n                String current_user_id = mCurrentUser.getUid();\r\n                StorageReference filepath = mImageStorage.child(&quot;profile_images&quot;).child(current_user_id + &quot;.jpg&quot;);\r\n                filepath.putFile(resultUri).addOnCompleteListener(new OnCompleteListener&lt;UploadTask.TaskSnapshot&gt;() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task&lt;UploadTask.TaskSnapshot&gt; task) {\r\n\r\n                        if(task.isSuccessful()){\r\n\r\n                            final String download_url = task.getResult().getMetadata().getReference().getDownloadUrl().toString();\r\n                            mUserDatabase.child(&quot;image&quot;).setValue(download_url).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\r\n                                @Override\r\n                                public void onComplete(@NonNull Task&lt;Void&gt; task) {\r\n\r\n                                    if(task.isSuccessful()){\r\n\r\n                                        mProgressDialog.dismiss();\r\n                                        Toast.makeText(SettingsActivity.this, &quot;Uploaded Successfully&quot;, Toast.LENGTH_LONG).show();\r\n\r\n                                    }\r\n\r\n                                }\r\n                            });\r\n\r\n                        } else {\r\n\r\n                            Toast.makeText(SettingsActivity.this, &quot;Error&quot;, Toast.LENGTH_LONG).show();\r\n                            mProgressDialog.dismiss();\r\n\r\n                        }\r\n\r\n                    }\r\n                });\r\n\r\n            } else if(resultCode == CropImage.CROP_IMAGE_ACTIVITY_RESULT_ERROR_CODE){\r\n\r\n                Exception error = result.getError();\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n","title":"Unable to fetch file from firebase storage","body":"<p>I am unable to fetch the uploaded image file from the firebase storage because the database stores the url in a public unguessable url form and I cannot seem to figure it out, what is wrong with my code?</p>\n<pre><code>    @Override\nprotected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n\n    if(requestCode == GALLERY_PICK &amp;&amp; resultCode == RESULT_OK){\n\n        Uri imageUri = data.getData();\n\n        CropImage.activity(imageUri)\n                .setAspectRatio(1,1)\n                .start(this);\n\n        //Toast.makeText(SettingsActivity.this, imageUri, Toast.LENGTH_LONG).show();\n\n    }\n\n    if(requestCode == CropImage.CROP_IMAGE_ACTIVITY_REQUEST_CODE){\n\n        CropImage.ActivityResult result = CropImage.getActivityResult(data);\n\n        if(resultCode == RESULT_OK){\n\n            mProgressDialog = new ProgressDialog(SettingsActivity.this);\n            mProgressDialog.setTitle(&quot;Uploading&quot;);\n            mProgressDialog.setMessage(&quot;Please Wait While The Image Is Being Uploaded&quot;);\n            mProgressDialog.setCanceledOnTouchOutside(false);\n            mProgressDialog.show();\n\n            Uri resultUri = result.getUri();\n            String current_user_id = mCurrentUser.getUid();\n            StorageReference filepath = mImageStorage.child(&quot;profile_images&quot;).child(current_user_id + &quot;.jpg&quot;);\n            filepath.putFile(resultUri).addOnCompleteListener(new OnCompleteListener&lt;UploadTask.TaskSnapshot&gt;() {\n                @Override\n                public void onComplete(@NonNull Task&lt;UploadTask.TaskSnapshot&gt; task) {\n\n                    if(task.isSuccessful()){\n\n                        final String download_url = task.getResult().getMetadata().getReference().getDownloadUrl().toString();\n                        mUserDatabase.child(&quot;image&quot;).setValue(download_url).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n                            @Override\n                            public void onComplete(@NonNull Task&lt;Void&gt; task) {\n\n                                if(task.isSuccessful()){\n\n                                    mProgressDialog.dismiss();\n                                    Toast.makeText(SettingsActivity.this, &quot;Uploaded Successfully&quot;, Toast.LENGTH_LONG).show();\n\n                                }\n\n                            }\n                        });\n\n                    } else {\n\n                        Toast.makeText(SettingsActivity.this, &quot;Error&quot;, Toast.LENGTH_LONG).show();\n                        mProgressDialog.dismiss();\n\n                    }\n\n                }\n            });\n\n        } else if(resultCode == CropImage.CROP_IMAGE_ACTIVITY_RESULT_ERROR_CODE){\n\n            Exception error = result.getError();\n\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","java-8","java-time","zoneddatetime","java.time.instant"],"comments":[{"owner":{"account_id":2580719,"reputation":5582,"user_id":2237467,"accept_rate":60,"display_name":"Snackoverflow"},"score":2,"creation_date":1551089444,"post_id":32626733,"comment_id":96498104,"body_markdown":"What language/dialect are you using to make the bulk import `import java.time.{Instant, LocalDateTime, ZoneId, ZoneOffset}` work? It&#39;s an `unexpected token` for me in Java 11.","body":"What language/dialect are you using to make the bulk import <code>import java.time.{Instant, LocalDateTime, ZoneId, ZoneOffset}</code> work? It&#39;s an <code>unexpected token</code> for me in Java 11."},{"owner":{"account_id":174076,"reputation":703,"user_id":984221,"display_name":"donatas M"},"score":3,"creation_date":1556111089,"post_id":32626733,"comment_id":98326081,"body_markdown":"Can be Scala, but that&#39;s not really important here","body":"Can be Scala, but that&#39;s not really important here"},{"owner":{"account_id":49078,"reputation":44646,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"score":1,"creation_date":1560016629,"post_id":32626733,"comment_id":99604819,"body_markdown":"I have discussed the theory behind `java.time` at length here: https://stackoverflow.com/a/56508200/145989","body":"I have discussed the theory behind <code>java.time</code> at length here: <a href=\"https://stackoverflow.com/a/56508200/145989\">stackoverflow.com/a/56508200/145989</a>"}],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1442482171,"creation_date":1442482171,"answer_id":32626913,"question_id":32626733,"body_markdown":"As the [documentation][1] says, &quot;This is primarily intended for low-level conversions rather than general application usage.&quot;\r\n\r\nGoing via `Instant` makes perfect sense to me - your epoch second is effectively a different representation of an `Instant`, so convert to an `Instant` and then convert that into a particular time zone.\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html#ofEpochSecond-long-int-java.time.ZoneOffset-","title":"Is there any way to convert ZoneId to ZoneOffset in Java 8?","body":"<p>As the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html#ofEpochSecond-long-int-java.time.ZoneOffset-\" rel=\"noreferrer\">documentation</a> says, \"This is primarily intended for low-level conversions rather than general application usage.\"</p>\n\n<p>Going via <code>Instant</code> makes perfect sense to me - your epoch second is effectively a different representation of an <code>Instant</code>, so convert to an <code>Instant</code> and then convert that into a particular time zone.</p>\n"},{"tags":[],"owner":{"account_id":1023013,"reputation":16655,"user_id":1032890,"accept_rate":100,"display_name":"GeertPt"},"down_vote_count":2,"up_vote_count":49,"is_accepted":false,"score":47,"last_activity_date":1442483978,"creation_date":1442482864,"answer_id":32627141,"question_id":32626733,"body_markdown":"There is no one-to-one mapping. A ZoneId defines a geographic extent in which a set of different ZoneOffsets is used over time. If the timezone uses daylight saving time, its ZoneOffset will be different between summer and winter.\r\n\r\nFurthermore, the daylight saving time rules may have changed over time, so the ZoneOffset could be different for e.g. 13/10/2015 compared to 13/10/1980.\r\n\r\nSo you can only find the ZoneOffset for a ZoneId on a particular Instant.\r\n\r\nSee also https://en.wikipedia.org/wiki/Tz_database","title":"Is there any way to convert ZoneId to ZoneOffset in Java 8?","body":"<p>There is no one-to-one mapping. A ZoneId defines a geographic extent in which a set of different ZoneOffsets is used over time. If the timezone uses daylight saving time, its ZoneOffset will be different between summer and winter.</p>\n\n<p>Furthermore, the daylight saving time rules may have changed over time, so the ZoneOffset could be different for e.g. 13/10/2015 compared to 13/10/1980.</p>\n\n<p>So you can only find the ZoneOffset for a ZoneId on a particular Instant.</p>\n\n<p>See also <a href=\"https://en.wikipedia.org/wiki/Tz_database\">https://en.wikipedia.org/wiki/Tz_database</a></p>\n"},{"tags":[],"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"down_vote_count":0,"up_vote_count":159,"is_accepted":true,"score":159,"last_activity_date":1590499703,"creation_date":1464453793,"answer_id":37501492,"question_id":32626733,"body_markdown":"Here is how you can get `ZoneOffset` from `ZoneId`:\r\n\r\n    Instant instant = Instant.now(); //can be LocalDateTime\r\n    ZoneId systemZone = ZoneId.systemDefault(); // my timezone\r\n    ZoneOffset currentOffsetForMyZone = systemZone.getRules().getOffset(instant);\r\n\r\nNB: `ZoneId` can have different offset depending on point in time and the history of the particular place. So choosing different Instants would result in different offsets.\r\n\r\nNB2: `ZoneId.of()` can return a `ZoneOffset` instead of `ZoneId` if `UTC+3`/`GMT+2`/etc is passed as opposed to a time zone like `Africa/Cairo`. So if UTC/GMT offsets are passed then historical/geographical/daylight-saving information of the `Instant` won&#39;t be taken into account - you&#39;ll simply work with the specified offset.","title":"Is there any way to convert ZoneId to ZoneOffset in Java 8?","body":"<p>Here is how you can get <code>ZoneOffset</code> from <code>ZoneId</code>:</p>\n\n<pre><code>Instant instant = Instant.now(); //can be LocalDateTime\nZoneId systemZone = ZoneId.systemDefault(); // my timezone\nZoneOffset currentOffsetForMyZone = systemZone.getRules().getOffset(instant);\n</code></pre>\n\n<p>NB: <code>ZoneId</code> can have different offset depending on point in time and the history of the particular place. So choosing different Instants would result in different offsets.</p>\n\n<p>NB2: <code>ZoneId.of()</code> can return a <code>ZoneOffset</code> instead of <code>ZoneId</code> if <code>UTC+3</code>/<code>GMT+2</code>/etc is passed as opposed to a time zone like <code>Africa/Cairo</code>. So if UTC/GMT offsets are passed then historical/geographical/daylight-saving information of the <code>Instant</code> won't be taken into account - you'll simply work with the specified offset.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":4,"up_vote_count":59,"is_accepted":false,"score":55,"last_activity_date":1621870888,"creation_date":1484169395,"answer_id":41600839,"question_id":32626733,"body_markdown":"# tl;dr\r\n\r\n    ZonedDateTime.now( \r\n        ZoneId.of( &quot;America/Montreal&quot; ) \r\n    )\r\n\r\n…of current default time zone…\r\n\r\n    ZonedDateTime.now( \r\n        ZoneId.systemDefault() \r\n    )\r\n\r\n# Details\r\n\r\nThe [Answer by Stanislav Bshkyrtsev][1] correctly and directly answers your Question.\r\n\r\nBut, there are larger issues involved, as suggested in the [Answer by Jon Skeet][2].\r\n\r\n## `LocalDateTime`\r\n\r\n&gt;I don&#39;t find the way to convert epoch second to LocalDateTime\r\n\r\n`LocalDateTime` purposely has no concept of time zone or offset-from-UTC. Not likely what you want. The `Local…` means *any* locality, not any one particular locality. This class does *not* represent a moment, only *potential* moments along a range of about 26-27 hours (the range of time zones around the globe). \r\n\r\n## `Instant`\r\n\r\nNo need to start with epoch seconds if you are trying to get current time. Get the current `Instant`. The [`Instant`](http://docs.oracle.com/javase/8/docs/api/java/time/Instant.html) class represents a moment on the timeline in [UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time) with a resolution of [nanoseconds](https://en.wikipedia.org/wiki/Nanosecond) (up to nine (9) digits of a decimal fraction). \r\n\r\n    Instant instant = Instant.now();\r\n\r\nInside of that `Instant` is a count of [nanoseconds][3]-from-epoch. But we do not really care. \r\n\r\nSee also, [*What&#39;s the difference between Instant and LocalDateTime?*](https://stackoverflow.com/q/32437550/642706)\r\n\r\n## `ZonedDateTime`\r\n\r\nIf you want to see that moment through the lens of a particular region’s wall-clock time, apply a `ZoneId` to get a `ZonedDateTime`. \r\n\r\n    ZoneId z = ZoneId.of( &quot;Europe/Paris&quot; );\r\n    ZonedDateTime zdt = instant.atZone( z );\r\n\r\nAs a shortcut, you can do directly to the `ZonedDateTime`.\r\n\r\n    ZonedDateTime zdt = ZonedDateTime.now( z );  \r\n\r\nA `ZonedDateTime` has an `Instant` within it. Call `zdt.toInstant()` to get the same moment in time as a basic value in [UTC][4]. Same number of nanoseconds-since-epoch either way, as a `ZonedDateTime` or as a `Instant`.\r\n\r\n## Seconds-since-epoch given\r\n\r\nIf you are given a count of seconds-since-epoch, and the epoch is the first moment of 1970 in [UTC][4] (`1970-01-01T00:00:00Z`), then feed that number to `Instant`.\r\n\r\n    long secondsSinceEpoch = 1_484_063_246L ;\r\n    Instant instant = Instant.ofEpochSecond( secondsSinceEpoch ) ;\r\n\r\n\r\n----------\r\n\r\n\r\n[![Table of date-time types in Java, both modern and legacy.][5]][5]\r\n\r\n----------\r\n\r\n# About *java.time*\r\n\r\nThe [*java.time*](http://docs.oracle.com/javase/10/docs/api/java/time/package-summary.html) framework is built into Java 8 and later. These classes supplant the troublesome old [legacy](https://en.wikipedia.org/wiki/Legacy_system) date-time classes such as [`java.util.Date`](https://docs.oracle.com/javase/10/docs/api/java/util/Date.html), [`Calendar`](https://docs.oracle.com/javase/10/docs/api/java/util/Calendar.html), &amp; [`SimpleDateFormat`](http://docs.oracle.com/javase/10/docs/api/java/text/SimpleDateFormat.html).\r\n\r\nTo learn more, see the [*Oracle Tutorial*](http://docs.oracle.com/javase/tutorial/datetime/TOC.html). And search Stack Overflow for many examples and explanations. Specification is [JSR 310](https://jcp.org/en/jsr/detail?id=310).\r\n\r\nThe [*Joda-Time*](http://www.joda.org/joda-time/) project, now in [maintenance mode](https://en.wikipedia.org/wiki/Maintenance_mode), advises migration to the [java.time](http://docs.oracle.com/javase/10/docs/api/java/time/package-summary.html) classes.\r\n\r\nYou may exchange *java.time* objects directly with your database. Use a [JDBC driver](https://en.wikipedia.org/wiki/JDBC_driver) compliant with [JDBC 4.2](http://openjdk.java.net/jeps/170) or later. No need for strings, no need for `java.sql.*` classes.\r\n\r\nWhere to obtain the java.time classes? \r\n\r\n - [**Java SE 8**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8), [**Java SE 9**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9), [**Java SE 10**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_10), [**Java SE 11**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_11), and later  - Part of the standard Java API with a bundled implementation.\r\n  - Java 9 adds some minor features and fixes.\r\n - [**Java SE 6**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6) and [**Java SE 7**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7)\r\n  - Most of the *java.time* functionality is back-ported to Java 6 &amp; 7 in [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/).\r\n - [**Android**](https://en.wikipedia.org/wiki/Android_(operating_system))\r\n  - Later versions of Android bundle implementations of the *java.time* classes.\r\n  - For earlier Android (&lt;26), the [***ThreeTenABP***](https://github.com/JakeWharton/ThreeTenABP) project adapts [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/) (mentioned above). See [*How to use ThreeTenABP…*](http://stackoverflow.com/q/38922754/642706).\r\n\r\nThe [**ThreeTen-Extra**](http://www.threeten.org/threeten-extra/) project extends java.time with additional classes. This project is a proving ground for possible future additions to java.time. You may find some useful classes here such as [`Interval`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/Interval.html), [`YearWeek`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearWeek.html), [`YearQuarter`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearQuarter.html), and [more](http://www.threeten.org/threeten-extra/apidocs/index.html).\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/37501492/642706\r\n  [2]: https://stackoverflow.com/a/32626913/642706\r\n  [3]: https://en.wikipedia.org/wiki/Nanosecond\r\n  [4]: https://en.wikipedia.org/wiki/Coordinated_Universal_Time\r\n  [5]: https://i.stack.imgur.com/65LLv.png","title":"Is there any way to convert ZoneId to ZoneOffset in Java 8?","body":"<h1>tl;dr</h1>\n<pre><code>ZonedDateTime.now( \n    ZoneId.of( &quot;America/Montreal&quot; ) \n)\n</code></pre>\n<p>…of current default time zone…</p>\n<pre><code>ZonedDateTime.now( \n    ZoneId.systemDefault() \n)\n</code></pre>\n<h1>Details</h1>\n<p>The <a href=\"https://stackoverflow.com/a/37501492/642706\">Answer by Stanislav Bshkyrtsev</a> correctly and directly answers your Question.</p>\n<p>But, there are larger issues involved, as suggested in the <a href=\"https://stackoverflow.com/a/32626913/642706\">Answer by Jon Skeet</a>.</p>\n<h2><code>LocalDateTime</code></h2>\n<blockquote>\n<p>I don't find the way to convert epoch second to LocalDateTime</p>\n</blockquote>\n<p><code>LocalDateTime</code> purposely has no concept of time zone or offset-from-UTC. Not likely what you want. The <code>Local…</code> means <em>any</em> locality, not any one particular locality. This class does <em>not</em> represent a moment, only <em>potential</em> moments along a range of about 26-27 hours (the range of time zones around the globe).</p>\n<h2><code>Instant</code></h2>\n<p>No need to start with epoch seconds if you are trying to get current time. Get the current <code>Instant</code>. The <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/Instant.html\" rel=\"noreferrer\"><code>Instant</code></a> class represents a moment on the timeline in <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"noreferrer\">UTC</a> with a resolution of <a href=\"https://en.wikipedia.org/wiki/Nanosecond\" rel=\"noreferrer\">nanoseconds</a> (up to nine (9) digits of a decimal fraction).</p>\n<pre><code>Instant instant = Instant.now();\n</code></pre>\n<p>Inside of that <code>Instant</code> is a count of <a href=\"https://en.wikipedia.org/wiki/Nanosecond\" rel=\"noreferrer\">nanoseconds</a>-from-epoch. But we do not really care.</p>\n<p>See also, <a href=\"https://stackoverflow.com/q/32437550/642706\"><em>What's the difference between Instant and LocalDateTime?</em></a></p>\n<h2><code>ZonedDateTime</code></h2>\n<p>If you want to see that moment through the lens of a particular region’s wall-clock time, apply a <code>ZoneId</code> to get a <code>ZonedDateTime</code>.</p>\n<pre><code>ZoneId z = ZoneId.of( &quot;Europe/Paris&quot; );\nZonedDateTime zdt = instant.atZone( z );\n</code></pre>\n<p>As a shortcut, you can do directly to the <code>ZonedDateTime</code>.</p>\n<pre><code>ZonedDateTime zdt = ZonedDateTime.now( z );  \n</code></pre>\n<p>A <code>ZonedDateTime</code> has an <code>Instant</code> within it. Call <code>zdt.toInstant()</code> to get the same moment in time as a basic value in <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"noreferrer\">UTC</a>. Same number of nanoseconds-since-epoch either way, as a <code>ZonedDateTime</code> or as a <code>Instant</code>.</p>\n<h2>Seconds-since-epoch given</h2>\n<p>If you are given a count of seconds-since-epoch, and the epoch is the first moment of 1970 in <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"noreferrer\">UTC</a> (<code>1970-01-01T00:00:00Z</code>), then feed that number to <code>Instant</code>.</p>\n<pre><code>long secondsSinceEpoch = 1_484_063_246L ;\nInstant instant = Instant.ofEpochSecond( secondsSinceEpoch ) ;\n</code></pre>\n<hr />\n<p><a href=\"https://i.stack.imgur.com/65LLv.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/65LLv.png\" alt=\"Table of date-time types in Java, both modern and legacy.\" /></a></p>\n<hr />\n<h1>About <em>java.time</em></h1>\n<p>The <a href=\"http://docs.oracle.com/javase/10/docs/api/java/time/package-summary.html\" rel=\"noreferrer\"><em>java.time</em></a> framework is built into Java 8 and later. These classes supplant the troublesome old <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"noreferrer\">legacy</a> date-time classes such as <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/Date.html\" rel=\"noreferrer\"><code>java.util.Date</code></a>, <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/Calendar.html\" rel=\"noreferrer\"><code>Calendar</code></a>, &amp; <a href=\"http://docs.oracle.com/javase/10/docs/api/java/text/SimpleDateFormat.html\" rel=\"noreferrer\"><code>SimpleDateFormat</code></a>.</p>\n<p>To learn more, see the <a href=\"http://docs.oracle.com/javase/tutorial/datetime/TOC.html\" rel=\"noreferrer\"><em>Oracle Tutorial</em></a>. And search Stack Overflow for many examples and explanations. Specification is <a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"noreferrer\">JSR 310</a>.</p>\n<p>The <a href=\"http://www.joda.org/joda-time/\" rel=\"noreferrer\"><em>Joda-Time</em></a> project, now in <a href=\"https://en.wikipedia.org/wiki/Maintenance_mode\" rel=\"noreferrer\">maintenance mode</a>, advises migration to the <a href=\"http://docs.oracle.com/javase/10/docs/api/java/time/package-summary.html\" rel=\"noreferrer\">java.time</a> classes.</p>\n<p>You may exchange <em>java.time</em> objects directly with your database. Use a <a href=\"https://en.wikipedia.org/wiki/JDBC_driver\" rel=\"noreferrer\">JDBC driver</a> compliant with <a href=\"http://openjdk.java.net/jeps/170\" rel=\"noreferrer\">JDBC 4.2</a> or later. No need for strings, no need for <code>java.sql.*</code> classes.</p>\n<p>Where to obtain the java.time classes?</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"noreferrer\"><strong>Java SE 8</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"noreferrer\"><strong>Java SE 9</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_10\" rel=\"noreferrer\"><strong>Java SE 10</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_11\" rel=\"noreferrer\"><strong>Java SE 11</strong></a>, and later  - Part of the standard Java API with a bundled implementation.</li>\n<li>Java 9 adds some minor features and fixes.</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6\" rel=\"noreferrer\"><strong>Java SE 6</strong></a> and <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7\" rel=\"noreferrer\"><strong>Java SE 7</strong></a></li>\n<li>Most of the <em>java.time</em> functionality is back-ported to Java 6 &amp; 7 in <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a>.</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Android_(operating_system)\" rel=\"noreferrer\"><strong>Android</strong></a></li>\n<li>Later versions of Android bundle implementations of the <em>java.time</em> classes.</li>\n<li>For earlier Android (&lt;26), the <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"noreferrer\"><em><strong>ThreeTenABP</strong></em></a> project adapts <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a> (mentioned above). See <a href=\"http://stackoverflow.com/q/38922754/642706\"><em>How to use ThreeTenABP…</em></a>.</li>\n</ul>\n<p>The <a href=\"http://www.threeten.org/threeten-extra/\" rel=\"noreferrer\"><strong>ThreeTen-Extra</strong></a> project extends java.time with additional classes. This project is a proving ground for possible future additions to java.time. You may find some useful classes here such as <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/Interval.html\" rel=\"noreferrer\"><code>Interval</code></a>, <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearWeek.html\" rel=\"noreferrer\"><code>YearWeek</code></a>, <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearQuarter.html\" rel=\"noreferrer\"><code>YearQuarter</code></a>, and <a href=\"http://www.threeten.org/threeten-extra/apidocs/index.html\" rel=\"noreferrer\">more</a>.</p>\n"},{"tags":[],"owner":{"account_id":32473,"reputation":2320,"user_id":90173,"accept_rate":72,"display_name":"gknauth"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1489691554,"creation_date":1489691554,"answer_id":42842926,"question_id":32626733,"body_markdown":"I hope the first two lines of my solution below are helpful.  My problem was I had a `LocalDateTime` and the name of a time zone, and I needed an `instant` so I could build a `java.util.Date`, because that&#39;s what MongoDB wanted.  My code is Scala, but it&#39;s so close to Java here I think there should be no problem understanding it:\r\n\r\n    val zid = ZoneId.of(tzName)                                // &quot;America/Los_Angeles&quot;\r\n    val zo: ZoneOffset = zid.getRules.getOffset(localDateTime) // ⇒ -07:00\r\n                                             // 2017-03-16T18:03\r\n\r\n    val odt = OffsetDateTime.of(localDateTime, zo) // ⇒ 2017-03-16T18:03:00-07:00\r\n    val instant = odt.toInstant                    // ⇒ 2017-03-17T01:03:00Z\r\n    val issued = Date.from(instant)\r\n","title":"Is there any way to convert ZoneId to ZoneOffset in Java 8?","body":"<p>I hope the first two lines of my solution below are helpful.  My problem was I had a <code>LocalDateTime</code> and the name of a time zone, and I needed an <code>instant</code> so I could build a <code>java.util.Date</code>, because that's what MongoDB wanted.  My code is Scala, but it's so close to Java here I think there should be no problem understanding it:</p>\n\n<pre><code>val zid = ZoneId.of(tzName)                                // \"America/Los_Angeles\"\nval zo: ZoneOffset = zid.getRules.getOffset(localDateTime) // ⇒ -07:00\n                                         // 2017-03-16T18:03\n\nval odt = OffsetDateTime.of(localDateTime, zo) // ⇒ 2017-03-16T18:03:00-07:00\nval instant = odt.toInstant                    // ⇒ 2017-03-17T01:03:00Z\nval issued = Date.from(instant)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2693715,"reputation":999,"user_id":2326336,"display_name":"Jelmer"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1542382747,"creation_date":1515147168,"answer_id":48111373,"question_id":32626733,"body_markdown":"The following returns the amount of time in milliseconds to add to UTC to get standard time in this time zone:\r\n\r\n    TimeZone.getTimeZone(ZoneId.of(&quot;Europe/Amsterdam&quot;)).getRawOffset()\r\n\r\n","title":"Is there any way to convert ZoneId to ZoneOffset in Java 8?","body":"<p>The following returns the amount of time in milliseconds to add to UTC to get standard time in this time zone:</p>\n\n<pre><code>TimeZone.getTimeZone(ZoneId.of(\"Europe/Amsterdam\")).getRawOffset()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1597615913,"creation_date":1597615913,"answer_id":63442389,"question_id":32626733,"body_markdown":"&gt; I have an epoch second and a zoneId. Is there any way to convert ZoneId to ZoneOffset in java 8?\r\n\r\n 1. Get `ZonedDateTime` from epoch second and Zone Id\r\n 2. Get `ZoneOffset` from `ZonedDateTime`\r\n\r\n**Demo:**\r\n\r\n    import java.time.Instant;\r\n    import java.time.ZoneId;\r\n    import java.time.ZoneOffset;\r\n    import java.time.ZonedDateTime;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// Get ZonedDateTime from epoch second and Zone Id\r\n    \t\tZonedDateTime zdt = Instant.ofEpochSecond(1597615462L).atZone(ZoneId.of(&quot;Europe/London&quot;));\r\n    \r\n    \t\t// Get ZoneOffset from ZonedDateTime\r\n    \t\tZoneOffset offset = zdt.getOffset();\r\n    \r\n    \t\tSystem.out.println(offset);\r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n    +01:00\r\n\r\n","title":"Is there any way to convert ZoneId to ZoneOffset in Java 8?","body":"<blockquote>\n<p>I have an epoch second and a zoneId. Is there any way to convert ZoneId to ZoneOffset in java 8?</p>\n</blockquote>\n<ol>\n<li>Get <code>ZonedDateTime</code> from epoch second and Zone Id</li>\n<li>Get <code>ZoneOffset</code> from <code>ZonedDateTime</code></li>\n</ol>\n<p><strong>Demo:</strong></p>\n<pre><code>import java.time.Instant;\nimport java.time.ZoneId;\nimport java.time.ZoneOffset;\nimport java.time.ZonedDateTime;\n\npublic class Main {\n    public static void main(String[] args) {\n        // Get ZonedDateTime from epoch second and Zone Id\n        ZonedDateTime zdt = Instant.ofEpochSecond(1597615462L).atZone(ZoneId.of(&quot;Europe/London&quot;));\n\n        // Get ZoneOffset from ZonedDateTime\n        ZoneOffset offset = zdt.getOffset();\n\n        System.out.println(offset);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>+01:00\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2109967,"reputation":6673,"user_id":1875434,"accept_rate":67,"display_name":"abbas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634039355,"creation_date":1634039355,"answer_id":69540003,"question_id":32626733,"body_markdown":"Since you are looking for the default zone offset\r\n\r\n    ZonedDateTime.now().getOffset()","title":"Is there any way to convert ZoneId to ZoneOffset in Java 8?","body":"<p>Since you are looking for the default zone offset</p>\n<pre><code>ZonedDateTime.now().getOffset()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":931121,"reputation":21651,"user_id":961018,"accept_rate":56,"display_name":"mjs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639224896,"creation_date":1639224896,"answer_id":70315053,"question_id":32626733,"body_markdown":"This does it without creating an Instant or such objects to pull it out. \r\n\r\n    public static ZoneOffset offset() {\r\n        return offset(ZoneId.systemDefault());                 // Default system zone id\r\n    }\r\n    public static ZoneOffset offset(ZoneId id) {\r\n        return ZoneOffset.ofTotalSeconds((int) \r\n            TimeUnit.MILLISECONDS.toSeconds(\r\n                TimeZone.getTimeZone(id).getRawOffset()        // Returns offset in milliseconds \r\n            )\r\n        );\r\n    }","title":"Is there any way to convert ZoneId to ZoneOffset in Java 8?","body":"<p>This does it without creating an Instant or such objects to pull it out.</p>\n<pre><code>public static ZoneOffset offset() {\n    return offset(ZoneId.systemDefault());                 // Default system zone id\n}\npublic static ZoneOffset offset(ZoneId id) {\n    return ZoneOffset.ofTotalSeconds((int) \n        TimeUnit.MILLISECONDS.toSeconds(\n            TimeZone.getTimeZone(id).getRawOffset()        // Returns offset in milliseconds \n        )\n    );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5820503,"reputation":51,"user_id":4588753,"display_name":"regbo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660231210,"creation_date":1660231210,"answer_id":73323177,"question_id":32626733,"body_markdown":"Here is what we use. First convert zone id to timezone, then get the offset in millis, then convert to seconds, then create a ZoneOffset.\r\n\r\n    public static final ZoneOffset toOffset(ZoneId zoneId) {\r\n\t\treturn Optional.ofNullable(zoneId)\r\n\t\t\t\t.map(TimeZone::getTimeZone)\r\n\t\t\t\t.map(TimeZone::getRawOffset)\r\n\t\t\t\t.map(Duration::ofMillis)\r\n\t\t\t\t.map(Duration::getSeconds)\r\n\t\t\t\t.map(Number::intValue)\r\n\t\t\t\t.map(ZoneOffset::ofTotalSeconds)\r\n\t\t\t\t.orElse(null);\r\n\t}","title":"Is there any way to convert ZoneId to ZoneOffset in Java 8?","body":"<p>Here is what we use. First convert zone id to timezone, then get the offset in millis, then convert to seconds, then create a ZoneOffset.</p>\n<pre><code>public static final ZoneOffset toOffset(ZoneId zoneId) {\n    return Optional.ofNullable(zoneId)\n            .map(TimeZone::getTimeZone)\n            .map(TimeZone::getRawOffset)\n            .map(Duration::ofMillis)\n            .map(Duration::getSeconds)\n            .map(Number::intValue)\n            .map(ZoneOffset::ofTotalSeconds)\n            .orElse(null);\n}\n</code></pre>\n"}],"owner":{"account_id":2278928,"reputation":2021,"user_id":2655102,"accept_rate":22,"display_name":"Renkai"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110116,"favorite_count":0,"down_vote_count":0,"up_vote_count":132,"accepted_answer_id":37501492,"answer_count":10,"score":132,"last_activity_date":1660231210,"creation_date":1442481699,"question_id":32626733,"body_markdown":"I have an epoch second and a *zoneId* (see `method1` below). \r\n\r\nIt can be convert to `LocalDateTime` with system default zoneId, but I don&#39;t find the way to convert epoch second to `LocalDateTime` (see  `method2` below), because there is no `ZoneOffset.systemDefault`. I think it&#39;s obscure.\r\n\r\n    import java.time.{Instant, LocalDateTime, ZoneId, ZoneOffset}\r\n    \r\n    val epochSecond = System.currentTimeMillis() / 1000\r\n    \r\n    // method1\r\n    LocalDateTime.ofInstant(Instant.ofEpochSecond(epochSecond), ZoneId.systemDefault())\r\n    \r\n    // method2\r\n    LocalDateTime.ofEpochSecond(epochSecond, 0, ZoneOffset.MAX)\r\n---\r\n## NOTE\r\nThe source code presented above is [Scala][1].\r\n\r\n\r\n  [1]: https://www.scala-lang.org/","title":"Is there any way to convert ZoneId to ZoneOffset in Java 8?","body":"<p>I have an epoch second and a <em>zoneId</em> (see <code>method1</code> below).</p>\n<p>It can be convert to <code>LocalDateTime</code> with system default zoneId, but I don't find the way to convert epoch second to <code>LocalDateTime</code> (see  <code>method2</code> below), because there is no <code>ZoneOffset.systemDefault</code>. I think it's obscure.</p>\n<pre><code>import java.time.{Instant, LocalDateTime, ZoneId, ZoneOffset}\n\nval epochSecond = System.currentTimeMillis() / 1000\n\n// method1\nLocalDateTime.ofInstant(Instant.ofEpochSecond(epochSecond), ZoneId.systemDefault())\n\n// method2\nLocalDateTime.ofEpochSecond(epochSecond, 0, ZoneOffset.MAX)\n</code></pre>\n<hr />\n<h2>NOTE</h2>\n<p>The source code presented above is <a href=\"https://www.scala-lang.org/\" rel=\"noreferrer\">Scala</a>.</p>\n"},{"tags":["java","search","lucene","query-parser"],"answers":[{"tags":[],"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660231071,"creation_date":1660230764,"answer_id":73323067,"question_id":73319361,"body_markdown":"**Short Answer**\r\n\r\nYou cannot run proximity queries for data stored in a `StringField`. You have to use a `TextField`.\r\n\r\nYou did not show us the definition for `KeyValuePairs`, so I have made some assumptions below about that.\r\n\r\n(Small point: I would also suggest that you do not need to use `LinkedList` - you probably only need `ArrayList`.)\r\n\r\n---\r\n\r\n**Longer Answer for More Background**\r\n\r\nYour problem is related to the field types you are using.\r\n\r\nYou have a document containing 2 fields:\r\n\r\n - `content` - which uses a `StringField`\r\n - `title` - which uses a `TextField`.\r\n\r\nAn example of data in the `content` field is `to be or not to be that is the question`.\r\n\r\nYou are attempting to run a proximity query against the `content` field.\r\n\r\nRemember from [this question](https://stackoverflow.com/q/73290954/12567365) that `StringField` data &quot;_is indexed but not tokenized: the entire String value is indexed as a single token._&quot;\r\n\r\nA single token, means the token&#39;s position is always effectively the _only_ position - and therefore position data is not captured in the index (it is basically meaningless).\r\n\r\nThat is why your query throws that error. That query requires the data to be split up into separate tokens - and each token&#39;s position needs to be captured in the index. \r\n\r\n**Therefore you need to use a `TextField` for that type of data.**\r\n\r\nWhen you use a `TextField` for `to be or not to be that is the question`, then the `StandardAnalyzer` causes the following data to be captured in the index:\r\n\r\n```\r\nfield content\r\n  term be\r\n    doc 0\r\n      freq 2\r\n      pos 1\r\n      pos 5\r\n  term is\r\n    doc 0\r\n      freq 1\r\n      pos 7\r\n  term not\r\n    doc 0\r\n      freq 1\r\n      pos 3\r\n  term or\r\n    doc 0\r\n      freq 1\r\n      pos 2\r\n  term question\r\n    doc 0\r\n      freq 1\r\n      pos 9\r\n  term that\r\n    doc 0\r\n      freq 1\r\n      pos 6\r\n  term the\r\n    doc 0\r\n      freq 1\r\n      pos 8\r\n  term to\r\n    doc 0\r\n      freq 2\r\n      pos 0\r\n      pos 4\r\n```\r\n\r\nYou can see that the index now contains the required position data. The proximity query requires this position data to evaluate whether the words in your query are sufficiently close enough to each other, to match your query.\r\n\r\nAnd just for completeness, here is what you get in the index if you use `StringField` instead of `TextField`:\r\n\r\n```\r\ndoc 0\r\n  field 0\r\n    name content\r\n    type string\r\n    value to be or not to be that is the question\r\n```\r\n\r\nAs you can see - only one token - and no position data.","title":"Problem with Proximity search Lucene. Field &quot;content&quot; was indexed without position data","body":"<p><strong>Short Answer</strong></p>\n<p>You cannot run proximity queries for data stored in a <code>StringField</code>. You have to use a <code>TextField</code>.</p>\n<p>You did not show us the definition for <code>KeyValuePairs</code>, so I have made some assumptions below about that.</p>\n<p>(Small point: I would also suggest that you do not need to use <code>LinkedList</code> - you probably only need <code>ArrayList</code>.)</p>\n<hr />\n<p><strong>Longer Answer for More Background</strong></p>\n<p>Your problem is related to the field types you are using.</p>\n<p>You have a document containing 2 fields:</p>\n<ul>\n<li><code>content</code> - which uses a <code>StringField</code></li>\n<li><code>title</code> - which uses a <code>TextField</code>.</li>\n</ul>\n<p>An example of data in the <code>content</code> field is <code>to be or not to be that is the question</code>.</p>\n<p>You are attempting to run a proximity query against the <code>content</code> field.</p>\n<p>Remember from <a href=\"https://stackoverflow.com/q/73290954/12567365\">this question</a> that <code>StringField</code> data &quot;<em>is indexed but not tokenized: the entire String value is indexed as a single token.</em>&quot;</p>\n<p>A single token, means the token's position is always effectively the <em>only</em> position - and therefore position data is not captured in the index (it is basically meaningless).</p>\n<p>That is why your query throws that error. That query requires the data to be split up into separate tokens - and each token's position needs to be captured in the index.</p>\n<p><strong>Therefore you need to use a <code>TextField</code> for that type of data.</strong></p>\n<p>When you use a <code>TextField</code> for <code>to be or not to be that is the question</code>, then the <code>StandardAnalyzer</code> causes the following data to be captured in the index:</p>\n<pre><code>field content\n  term be\n    doc 0\n      freq 2\n      pos 1\n      pos 5\n  term is\n    doc 0\n      freq 1\n      pos 7\n  term not\n    doc 0\n      freq 1\n      pos 3\n  term or\n    doc 0\n      freq 1\n      pos 2\n  term question\n    doc 0\n      freq 1\n      pos 9\n  term that\n    doc 0\n      freq 1\n      pos 6\n  term the\n    doc 0\n      freq 1\n      pos 8\n  term to\n    doc 0\n      freq 2\n      pos 0\n      pos 4\n</code></pre>\n<p>You can see that the index now contains the required position data. The proximity query requires this position data to evaluate whether the words in your query are sufficiently close enough to each other, to match your query.</p>\n<p>And just for completeness, here is what you get in the index if you use <code>StringField</code> instead of <code>TextField</code>:</p>\n<pre><code>doc 0\n  field 0\n    name content\n    type string\n    value to be or not to be that is the question\n</code></pre>\n<p>As you can see - only one token - and no position data.</p>\n"}],"owner":{"account_id":25489160,"reputation":49,"user_id":19284258,"display_name":"ReallyNicePerson"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":217,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73323067,"answer_count":1,"score":0,"last_activity_date":1660231071,"creation_date":1660214824,"question_id":73319361,"body_markdown":"so as in the title when I&#39;m trying to search for a query i get an error \r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.IllegalStateException: field\r\n&gt; &quot;content&quot; was indexed without position data; cannot run PhraseQuery\r\n&gt; (phrase=content:&quot;to be not&quot;~1) at\r\n&gt; org.apache.lucene.search.PhraseQuery$1.getPhraseMatcher(PhraseQuery.java:497)\r\n&gt; at org.apache.lucene.search.PhraseWeight.scorer(PhraseWeight.java:64)\r\n&gt; at org.apache.lucene.search.Weight.bulkScorer(Weight.java:166) at\r\n&gt; org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:731)\r\n&gt; at\r\n&gt; org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:655)\r\n&gt; at\r\n&gt; org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:649)\r\n&gt; at\r\n&gt; org.apache.lucene.search.IndexSearcher.searchAfter(IndexSearcher.java:487)\r\n&gt; at\r\n&gt; org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:501)\r\n&gt; at ProximitySearch.main(ProximitySearch.java:81)\r\n\r\nHere is my code:\r\n    \r\n```java\r\n    public static void main(String[] args) throws IOException, ParseException {\r\n\r\n        Analyzer analyzer = new StandardAnalyzer();\r\n\r\n        List&lt;KeyValuePairs&gt; listOfDocs = new LinkedList&lt;&gt;();\r\n\r\n        KeyValuePairs file1 = new KeyValuePairs(&quot;file1&quot;, &quot;to be or not to be that is the question&quot;);\r\n        KeyValuePairs file2 = new KeyValuePairs(&quot;file2&quot;, &quot;make a long story short&quot;);\r\n        KeyValuePairs file3 = new KeyValuePairs(&quot;file3&quot;, &quot;see eye to eye&quot;);\r\n\r\n        listOfDocs.add(file1);\r\n        listOfDocs.add(file2);\r\n        listOfDocs.add(file3);\r\n\r\n        Path indexPath = Files.createTempDirectory(&quot;tempIndex&quot;);\r\n        Directory directory = FSDirectory.open(indexPath);\r\n        IndexWriterConfig config = new IndexWriterConfig(analyzer);\r\n        IndexWriter iwriter = new IndexWriter(directory, config);\r\n        for (KeyValuePairs listOfDoc : listOfDocs) {\r\n            Document doc = new Document();\r\n            String text = listOfDoc.getKey();\r\n            System.out.println(text);\r\n            String title = listOfDoc.getValue();\r\n            doc.add(new StringField(&quot;content&quot;, text, Field.Store.YES));\r\n            doc.add(new Field(&quot;title&quot;, title, TextField.TYPE_STORED));\r\n            iwriter.addDocument(doc);\r\n        }\r\n        iwriter.close();\r\n\r\n        // Now search the index:\r\n        DirectoryReader ireader = DirectoryReader.open(directory);\r\n        IndexSearcher isearcher = new IndexSearcher(ireader);\r\n\r\n        // Parse a simple query that searches for &quot;something that u want to search&quot;:\r\n        QueryParser parser = new QueryParser(&quot;content&quot;, analyzer);\r\n        Query query = parser.parse(&quot;\\&quot;to be not\\&quot;~1&quot;);\r\n\r\n        ScoreDoc[] hits = isearcher.search(query, 10).scoreDocs;\r\n        System.out.println(Arrays.toString(Arrays.stream(hits).toArray()));\r\n        System.out.println(&quot;Search terms found in :: &quot; + hits.length + &quot; files&quot;);\r\n\r\n        ireader.close();\r\n        directory.close();\r\n        IOUtils.rm(indexPath);\r\n    }\r\n```\r\nI dont know what am i doing wrong.","title":"Problem with Proximity search Lucene. Field &quot;content&quot; was indexed without position data","body":"<p>so as in the title when I'm trying to search for a query i get an error</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.IllegalStateException: field\n&quot;content&quot; was indexed without position data; cannot run PhraseQuery\n(phrase=content:&quot;to be not&quot;~1) at\norg.apache.lucene.search.PhraseQuery$1.getPhraseMatcher(PhraseQuery.java:497)\nat org.apache.lucene.search.PhraseWeight.scorer(PhraseWeight.java:64)\nat org.apache.lucene.search.Weight.bulkScorer(Weight.java:166) at\norg.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:731)\nat\norg.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:655)\nat\norg.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:649)\nat\norg.apache.lucene.search.IndexSearcher.searchAfter(IndexSearcher.java:487)\nat\norg.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:501)\nat ProximitySearch.main(ProximitySearch.java:81)</p>\n</blockquote>\n<p>Here is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void main(String[] args) throws IOException, ParseException {\n\n        Analyzer analyzer = new StandardAnalyzer();\n\n        List&lt;KeyValuePairs&gt; listOfDocs = new LinkedList&lt;&gt;();\n\n        KeyValuePairs file1 = new KeyValuePairs(&quot;file1&quot;, &quot;to be or not to be that is the question&quot;);\n        KeyValuePairs file2 = new KeyValuePairs(&quot;file2&quot;, &quot;make a long story short&quot;);\n        KeyValuePairs file3 = new KeyValuePairs(&quot;file3&quot;, &quot;see eye to eye&quot;);\n\n        listOfDocs.add(file1);\n        listOfDocs.add(file2);\n        listOfDocs.add(file3);\n\n        Path indexPath = Files.createTempDirectory(&quot;tempIndex&quot;);\n        Directory directory = FSDirectory.open(indexPath);\n        IndexWriterConfig config = new IndexWriterConfig(analyzer);\n        IndexWriter iwriter = new IndexWriter(directory, config);\n        for (KeyValuePairs listOfDoc : listOfDocs) {\n            Document doc = new Document();\n            String text = listOfDoc.getKey();\n            System.out.println(text);\n            String title = listOfDoc.getValue();\n            doc.add(new StringField(&quot;content&quot;, text, Field.Store.YES));\n            doc.add(new Field(&quot;title&quot;, title, TextField.TYPE_STORED));\n            iwriter.addDocument(doc);\n        }\n        iwriter.close();\n\n        // Now search the index:\n        DirectoryReader ireader = DirectoryReader.open(directory);\n        IndexSearcher isearcher = new IndexSearcher(ireader);\n\n        // Parse a simple query that searches for &quot;something that u want to search&quot;:\n        QueryParser parser = new QueryParser(&quot;content&quot;, analyzer);\n        Query query = parser.parse(&quot;\\&quot;to be not\\&quot;~1&quot;);\n\n        ScoreDoc[] hits = isearcher.search(query, 10).scoreDocs;\n        System.out.println(Arrays.toString(Arrays.stream(hits).toArray()));\n        System.out.println(&quot;Search terms found in :: &quot; + hits.length + &quot; files&quot;);\n\n        ireader.close();\n        directory.close();\n        IOUtils.rm(indexPath);\n    }\n</code></pre>\n<p>I dont know what am i doing wrong.</p>\n"},{"tags":["java","apache-kafka","apache-kafka-streams"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1659119808,"post_id":73167913,"comment_id":129225681,"body_markdown":"To clarify, is your Streams app using a TimestampExtractor? Or is the producer explicitly setting the record timestamp based on a field in the event? That&#39;s the only reason why the timestamps would be mixed up (but you shouldn&#39;t use this to decipher record order, anyway)","body":"To clarify, is your Streams app using a TimestampExtractor? Or is the producer explicitly setting the record timestamp based on a field in the event? That&#39;s the only reason why the timestamps would be mixed up (but you shouldn&#39;t use this to decipher record order, anyway)"},{"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"score":0,"creation_date":1659342884,"post_id":73167913,"comment_id":129263524,"body_markdown":"@OneCricketeer Thanks for the comment. I&#39;m not using a custom timestamp extractor, meaning `FailOnInvalidTimestamp` is used which in turn uses the record timestamp. I&#39;ve updated the question with some more details which might prove helpful...","body":"@OneCricketeer Thanks for the comment. I&#39;m not using a custom timestamp extractor, meaning <code>FailOnInvalidTimestamp</code> is used which in turn uses the record timestamp. I&#39;ve updated the question with some more details which might prove helpful..."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1659376587,"post_id":73167913,"comment_id":129275277,"body_markdown":"I see you have `Produced.with(Serdes.UUID()`. It&#39;s possible your UUID&#39;s only hash into a handful of partitions, and are not evenly distributed. In other words, two or more UUID&#39;s may have a partition collision after hashed","body":"I see you have <code>Produced.with(Serdes.UUID()</code>. It&#39;s possible your UUID&#39;s only hash into a handful of partitions, and are not evenly distributed. In other words, two or more UUID&#39;s may have a partition collision after hashed"},{"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"score":0,"creation_date":1659439589,"post_id":73167913,"comment_id":129290330,"body_markdown":"@OneCricketeer Thanks for the hint. It seems that it is indeed related. I&#39;ve updated the question with more details, if you&#39;re able to take a look.","body":"@OneCricketeer Thanks for the hint. It seems that it is indeed related. I&#39;ve updated the question with more details, if you&#39;re able to take a look."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1659446962,"post_id":73167913,"comment_id":129293198,"body_markdown":"&quot;hashing the was used for the producer back then&quot; - I&#39;m not sure about this, but I believe Kafka/Spring always used murmur2 hashes during partitioning... Regarding your kafka connect comment - yes, S3 sink for example, can easily write into older partitions. Topic partitions don&#39;t matter for that, though if you&#39;re using the Connector time based partitioner","body":"&quot;hashing the was used for the producer back then&quot; - I&#39;m not sure about this, but I believe Kafka/Spring always used murmur2 hashes during partitioning... Regarding your kafka connect comment - yes, S3 sink for example, can easily write into older partitions. Topic partitions don&#39;t matter for that, though if you&#39;re using the Connector time based partitioner"},{"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"score":0,"creation_date":1659451120,"post_id":73167913,"comment_id":129294980,"body_markdown":"*Kafka/Spring always used murmur2* Unfortunately it seems like this is not the case for Spring Cloud Stream, see my question on this [here](https://stackoverflow.com/questions/73207602/why-does-spring-cloud-stream-with-kafka-binder-hash-keys-differently-than-a-stan?noredirect=1#comment129293663_73207602). So, it unfortunately seems that records produced through Spring Cloud Stream &#39;normally&#39; produced records are not able to be co-partitioned, by default. :(","body":"<i>Kafka/Spring always used murmur2</i> Unfortunately it seems like this is not the case for Spring Cloud Stream, see my question on this <a href=\"https://stackoverflow.com/questions/73207602/why-does-spring-cloud-stream-with-kafka-binder-hash-keys-differently-than-a-stan?noredirect=1#comment129293663_73207602\">here</a>. So, it unfortunately seems that records produced through Spring Cloud Stream &#39;normally&#39; produced records are not able to be co-partitioned, by default. :("},{"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"score":0,"creation_date":1659451127,"post_id":73167913,"comment_id":129294982,"body_markdown":"I&#39;m not quite sure I understood your S3 sink comment. Since my new records are all over the place, I&#39;m seeing connect logs saying something like `writing 04/21/22`, `writing 04/25/22`, `writing 05/01/22`, `writing 04/28/22`, etc. (in e.g., that order, whenever record belonging to a specific storage partition are encountered). Would this not lead to more memory consumption over time, as old messages are encountered? I am indeed using a `DailyPartitioner` for writing the data into S3.","body":"I&#39;m not quite sure I understood your S3 sink comment. Since my new records are all over the place, I&#39;m seeing connect logs saying something like <code>writing 04&#47;21&#47;22</code>, <code>writing 04&#47;25&#47;22</code>, <code>writing 05&#47;01&#47;22</code>, <code>writing 04&#47;28&#47;22</code>, etc. (in e.g., that order, whenever record belonging to a specific storage partition are encountered). Would this not lead to more memory consumption over time, as old messages are encountered? I am indeed using a <code>DailyPartitioner</code> for writing the data into S3."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1659452135,"post_id":73167913,"comment_id":129295432,"body_markdown":"AFAIK, the Spring-Cloud-Stream Kafka Binder does use Kafka&#39;s Partitioner. It is other binders that may be configured with other partitioners (I could be wrong, as I am not a Spring dev like Gary there)... Yes, there is memory usage per partition-buffer, but no more than `flush.size` or if you are using the scheduled rotation interval, then that is the longest it&#39;ll hold onto data. But again, the timestamp is irrelevant to the topic partition","body":"AFAIK, the Spring-Cloud-Stream Kafka Binder does use Kafka&#39;s Partitioner. It is other binders that may be configured with other partitioners (I could be wrong, as I am not a Spring dev like Gary there)... Yes, there is memory usage per partition-buffer, but no more than <code>flush.size</code> or if you are using the scheduled rotation interval, then that is the longest it&#39;ll hold onto data. But again, the timestamp is irrelevant to the topic partition"},{"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"score":0,"creation_date":1659453318,"post_id":73167913,"comment_id":129295979,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/246973/discussion-between-filpa-and-onecricketeer).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/246973/discussion-between-filpa-and-onecricketeer\">continue this discussion in chat</a>."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1659566278,"post_id":73167913,"comment_id":129327799,"body_markdown":"The Kafka topic partition doesn&#39;t determine the S3 sink timestamp partition. Your producers are simply sending late data and/or overriding the record timestamp. You cannot fix this from the consumer side, as S3 sink doesn&#39;t know there will ever be &quot;late data&quot; and it never &quot;closes&quot; a timed partition... If you really want to know what data is being sent to S3, if late, and needs re-processed, you can use a lambda job to trigger only S3 prefixes less than &quot;today&quot;","body":"The Kafka topic partition doesn&#39;t determine the S3 sink timestamp partition. Your producers are simply sending late data and/or overriding the record timestamp. You cannot fix this from the consumer side, as S3 sink doesn&#39;t know there will ever be &quot;late data&quot; and it never &quot;closes&quot; a timed partition... If you really want to know what data is being sent to S3, if late, and needs re-processed, you can use a lambda job to trigger only S3 prefixes less than &quot;today&quot;"},{"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"score":0,"creation_date":1660231012,"post_id":73167913,"comment_id":129488813,"body_markdown":"Got it, makes sense - thanks for your efforts. If you&#39;d like to write a succinct summary as an answer, I&#39;ll gladly accept it. Otherwise I&#39;ll write an answer in a couple days so that other that may have a similar issue might get some help in the future.","body":"Got it, makes sense - thanks for your efforts. If you&#39;d like to write a succinct summary as an answer, I&#39;ll gladly accept it. Otherwise I&#39;ll write an answer in a couple days so that other that may have a similar issue might get some help in the future."}],"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":197,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660231056,"creation_date":1659108543,"question_id":73167913,"body_markdown":"We have the following situation:\r\n\r\n1. Existing topic with **9** partitions in Kafka contains multiple record types. These are partitioned according to a custom header (key = `null`) which is basically a string UUID. \r\n\r\n2. Data is consumed via Kstreams, filtered by the type that interests us and repartitioned into a new topic containing only specific record types. The new topic contains **12** partitions and has key=`&lt;original id in header&gt;`. The increased partition count is to allow more consumers to process this data.\r\n\r\nThis is where things seem to get a little weird.\r\n\r\nIn the original topic, we have millions of the relevant records. In each of the 9 partitions, we see relatively monotonically increasing record times, which is to be expected as the partitions should be assigned relatively randomly due to the high cardinality of the partition key.\r\n\r\nIn the **new** topic, we&#39;re seeing something like the following:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nSeemingly the record timestamps are jumping all over the place. Some discrepancies are to be expected seeing how the partitioning in the original (as well as the new) topic isn&#39;t *exactly* round-robin. We&#39;re seeing a few partitions in our original topic which have offsets that are ~1-2M higher/lower than others, but seeing how we have many millions of records of ingest daily, I can&#39;t explain the one record with a time stamp of `5/28/2022` between `6/17/2022` and `6/14/2022`.\r\n\r\nWhat could explain this behaviour?\r\n\r\n---\r\n\r\nEdit: \r\n\r\nLooking at the consumer group offsets, I&#39;ve found something interesting:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI was reingesting the data with multiple consumers and noted that they have severly different lags per partition. I don&#39;t quite understand why this discrepancy would be so large. Going to investigate further...\r\n\r\n---\r\n\r\nEdit: \r\n\r\nTo add some more detail, the workflow of the Streams app is as follows:\r\n\r\n```java\r\nSpecificAvroSerde&lt;MyEvent&gt; specificAvroSerde = new SpecificAvroSerde&lt;&gt;();\r\nspecificAvroSerde.configure(Collections.singletonMap(AbstractKafkaSchemaSerDeConfig.SCHEMA_REGISTRY_URL_CONFIG, SCHEMA_REGISTRY_URL), /*isKey*/ false);\r\n\r\nstreamsBuilder\r\n        .stream(&quot;events&quot;, Consumed.with(Serdes.Void(), Serdes.ByteArray()))\r\n        .transform(new FilterByTypeHeaderTransformerSupplier(topicProperties))\r\n        .transform(new MyEventAvroTransformerSupplier())\r\n        .to(topicProperties.getOutputTopic(), Produced.with(Serdes.UUID(), specificAvroSerde));\r\n```\r\n\r\nwhere the `FilterByTypeHeaderTransformerSupplier` instantiates a transformer that does, in essence:\r\n\r\n```java\r\npublic KeyValue&lt;Void, byte[]&gt; transform(Void key, byte[] value) {\r\n    // checks record headers\r\n    if (matchesFilter()) {\r\n        return KeyValue.pair(key, value);\r\n    }\r\n    // skip since it is not an event type that interests us\r\n    return null;\r\n}\r\n```\r\n\r\nwhile the other transformer does the following (which doesn&#39;t have great performance but does the job for now): \r\n\r\n```java\r\npublic KeyValue&lt;UUID, MyAvroEvent&gt; transform(Void key, byte[] value) {\r\n    MyEvent event = objectMapper.readValue(value, MyEvent.class);\r\n    MyAvroEvent avroRecord = serializeAsAvro(event);\r\n    return KeyValue.pair(event.getEventId(), avroRecord);\r\n}\r\n```\r\n\r\nhence I use the default timestamp extractor (`FailOnInvalidTimestamp`). \r\n\r\nMost notably, as can be seen, I&#39;m adding a `key` to this record: however, this key is the same one that was previously used to partition the data (in the existing 9 partitions, however). \r\n\r\nI&#39;ll try removing this key first to see if the behaviour changes, but I&#39;m kind of doubtful that that&#39;s the reason, especially since it&#39;s the same partition key value that was used previously.\r\n\r\nI still haven&#39;t found the reason for the wildly differing consumer offsets, unfortunately. I very much hope that I don&#39;t have to have a single consumer reprocess this once to catch up, since that would take a very long time...\r\n\r\n---\r\n\r\nEdit 2:\r\n\r\nI believe I&#39;ve found the cause of this discrepancy. The original records were produced using Spring Cloud Stream - these records included headers such as e.g &quot;scst_partition=4&quot;. **However**, the hashing the was used for the producer back then used Java based hashing (e.g. `&quot;keyAsString&quot;.hashCode() % numPartitions`), while the Kafka Clients use:\r\n\r\n```java\r\nUtils.toPositive(Utils.murmur2(keyAsBytes))\r\n```\r\n\r\nAs a result, we&#39;re seeing behaviour where records in e.g. source partition 0 could land in any one of the new partitions. Hence, small discrepancies in the source distribution could lead to rather large fluctuations in record ordering in the new partitions.\r\n\r\nI&#39;m not quite sure how to deal with this in a sensible manner. Currently I&#39;ve tried using a simple round-robin partitioning in the target topic to see if the distribution is a bit more even in that case.\r\n\r\nThe reason why this is a problem is that this data will be put on an object storage via e.g. Kafka Connect. If I want this data stored in e.g. a daily format, then old data coming in all the time would cause buffers that should&#39;ve been closed a long time ago to be kept open, increasing memory consumption. It doesn&#39;t make sense to use any kind of windowing for late data in this case, seeing how it&#39;s not a real-time aggregation but simply consumption of historical data.\r\n\r\n*Ideally* for the new partitioning I&#39;d want something like: given the number of partitions in the target topic is a multiple of the number of partitions in the source topic, have records in partition 0 go to either partition 0 or 9, from 1 to either 1 or 10, etc. (perhaps even randomly)\r\n\r\nThis would require some more work in the form of a custom partitioner, but I can&#39;t foresee if this would cause other problems down the line. \r\n\r\nI&#39;ve also tried setting the partition Id header (`&quot;kafka_partitionId&quot;` - as far as I know, documentation here isn&#39;t quite easy to find) but it is seemingly not used.\r\n\r\nI&#39;ll investigate a bit further...\r\n\r\n---\r\n\r\nFinal edit:\r\n\r\nFor what it&#39;s worth, the problem boiled down to the following two issues:\r\n\r\n1. My original data, written by Spring Cloud Stream, was partitioned differently that how a vanilla Kafka Producer (which Kafka Streams internally uses) would. This led to data jumping all over the place from a &quot;record-time&quot; point of view.\r\n2. Due to the above, I had to choose a number of partitions that was a multiple of the previous number of partitions as well as use a custom partitioner which does it the &quot;spring cloud stream&quot;.\r\n\r\nThe requirement that the new number be a multiple of the previous one is a result of modular arithmetic. If I wished to have deterministic partitioning for my existing data, having a multiple would allow data to go into one of two possible new partitions as opposed to only one as in the previous case.\r\n\r\nE.g. with 9 -&gt; 18 partitions: \r\n1. id 1 -&gt; previously hashed to partition 0, now hashes to either 0 or 9 (mod 18)\r\n2. id 2 -&gt; previously hashed to partition 1, now hashes to either 1 or 10 (mod 18)\r\n\r\nHence my requirement for higher paralellism is met and the data inside a single partition is ordered as desired, since a target partition is only supplied from at most one source partition.\r\n\r\nI&#39;m sure there might have been a simpler way to go about this all, but this works for now.\r\n\r\nFor further context/info, see also [this](https://stackoverflow.com/questions/73207602/why-does-spring-cloud-stream-with-kafka-binder-hash-keys-differently-than-a-stan) Q&amp;A.\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9gmXW.png\r\n  [2]: https://i.stack.imgur.com/f4puD.png","title":"Odd behaviour on repartitioning existing data in Kafka","body":"<p>We have the following situation:</p>\n<ol>\n<li><p>Existing topic with <strong>9</strong> partitions in Kafka contains multiple record types. These are partitioned according to a custom header (key = <code>null</code>) which is basically a string UUID.</p>\n</li>\n<li><p>Data is consumed via Kstreams, filtered by the type that interests us and repartitioned into a new topic containing only specific record types. The new topic contains <strong>12</strong> partitions and has key=<code>&lt;original id in header&gt;</code>. The increased partition count is to allow more consumers to process this data.</p>\n</li>\n</ol>\n<p>This is where things seem to get a little weird.</p>\n<p>In the original topic, we have millions of the relevant records. In each of the 9 partitions, we see relatively monotonically increasing record times, which is to be expected as the partitions should be assigned relatively randomly due to the high cardinality of the partition key.</p>\n<p>In the <strong>new</strong> topic, we're seeing something like the following:</p>\n<p><a href=\"https://i.stack.imgur.com/9gmXW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9gmXW.png\" alt=\"enter image description here\" /></a></p>\n<p>Seemingly the record timestamps are jumping all over the place. Some discrepancies are to be expected seeing how the partitioning in the original (as well as the new) topic isn't <em>exactly</em> round-robin. We're seeing a few partitions in our original topic which have offsets that are ~1-2M higher/lower than others, but seeing how we have many millions of records of ingest daily, I can't explain the one record with a time stamp of <code>5/28/2022</code> between <code>6/17/2022</code> and <code>6/14/2022</code>.</p>\n<p>What could explain this behaviour?</p>\n<hr />\n<p>Edit:</p>\n<p>Looking at the consumer group offsets, I've found something interesting:</p>\n<p><a href=\"https://i.stack.imgur.com/f4puD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f4puD.png\" alt=\"enter image description here\" /></a></p>\n<p>I was reingesting the data with multiple consumers and noted that they have severly different lags per partition. I don't quite understand why this discrepancy would be so large. Going to investigate further...</p>\n<hr />\n<p>Edit:</p>\n<p>To add some more detail, the workflow of the Streams app is as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SpecificAvroSerde&lt;MyEvent&gt; specificAvroSerde = new SpecificAvroSerde&lt;&gt;();\nspecificAvroSerde.configure(Collections.singletonMap(AbstractKafkaSchemaSerDeConfig.SCHEMA_REGISTRY_URL_CONFIG, SCHEMA_REGISTRY_URL), /*isKey*/ false);\n\nstreamsBuilder\n        .stream(&quot;events&quot;, Consumed.with(Serdes.Void(), Serdes.ByteArray()))\n        .transform(new FilterByTypeHeaderTransformerSupplier(topicProperties))\n        .transform(new MyEventAvroTransformerSupplier())\n        .to(topicProperties.getOutputTopic(), Produced.with(Serdes.UUID(), specificAvroSerde));\n</code></pre>\n<p>where the <code>FilterByTypeHeaderTransformerSupplier</code> instantiates a transformer that does, in essence:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public KeyValue&lt;Void, byte[]&gt; transform(Void key, byte[] value) {\n    // checks record headers\n    if (matchesFilter()) {\n        return KeyValue.pair(key, value);\n    }\n    // skip since it is not an event type that interests us\n    return null;\n}\n</code></pre>\n<p>while the other transformer does the following (which doesn't have great performance but does the job for now):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public KeyValue&lt;UUID, MyAvroEvent&gt; transform(Void key, byte[] value) {\n    MyEvent event = objectMapper.readValue(value, MyEvent.class);\n    MyAvroEvent avroRecord = serializeAsAvro(event);\n    return KeyValue.pair(event.getEventId(), avroRecord);\n}\n</code></pre>\n<p>hence I use the default timestamp extractor (<code>FailOnInvalidTimestamp</code>).</p>\n<p>Most notably, as can be seen, I'm adding a <code>key</code> to this record: however, this key is the same one that was previously used to partition the data (in the existing 9 partitions, however).</p>\n<p>I'll try removing this key first to see if the behaviour changes, but I'm kind of doubtful that that's the reason, especially since it's the same partition key value that was used previously.</p>\n<p>I still haven't found the reason for the wildly differing consumer offsets, unfortunately. I very much hope that I don't have to have a single consumer reprocess this once to catch up, since that would take a very long time...</p>\n<hr />\n<p>Edit 2:</p>\n<p>I believe I've found the cause of this discrepancy. The original records were produced using Spring Cloud Stream - these records included headers such as e.g &quot;scst_partition=4&quot;. <strong>However</strong>, the hashing the was used for the producer back then used Java based hashing (e.g. <code>&quot;keyAsString&quot;.hashCode() % numPartitions</code>), while the Kafka Clients use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Utils.toPositive(Utils.murmur2(keyAsBytes))\n</code></pre>\n<p>As a result, we're seeing behaviour where records in e.g. source partition 0 could land in any one of the new partitions. Hence, small discrepancies in the source distribution could lead to rather large fluctuations in record ordering in the new partitions.</p>\n<p>I'm not quite sure how to deal with this in a sensible manner. Currently I've tried using a simple round-robin partitioning in the target topic to see if the distribution is a bit more even in that case.</p>\n<p>The reason why this is a problem is that this data will be put on an object storage via e.g. Kafka Connect. If I want this data stored in e.g. a daily format, then old data coming in all the time would cause buffers that should've been closed a long time ago to be kept open, increasing memory consumption. It doesn't make sense to use any kind of windowing for late data in this case, seeing how it's not a real-time aggregation but simply consumption of historical data.</p>\n<p><em>Ideally</em> for the new partitioning I'd want something like: given the number of partitions in the target topic is a multiple of the number of partitions in the source topic, have records in partition 0 go to either partition 0 or 9, from 1 to either 1 or 10, etc. (perhaps even randomly)</p>\n<p>This would require some more work in the form of a custom partitioner, but I can't foresee if this would cause other problems down the line.</p>\n<p>I've also tried setting the partition Id header (<code>&quot;kafka_partitionId&quot;</code> - as far as I know, documentation here isn't quite easy to find) but it is seemingly not used.</p>\n<p>I'll investigate a bit further...</p>\n<hr />\n<p>Final edit:</p>\n<p>For what it's worth, the problem boiled down to the following two issues:</p>\n<ol>\n<li>My original data, written by Spring Cloud Stream, was partitioned differently that how a vanilla Kafka Producer (which Kafka Streams internally uses) would. This led to data jumping all over the place from a &quot;record-time&quot; point of view.</li>\n<li>Due to the above, I had to choose a number of partitions that was a multiple of the previous number of partitions as well as use a custom partitioner which does it the &quot;spring cloud stream&quot;.</li>\n</ol>\n<p>The requirement that the new number be a multiple of the previous one is a result of modular arithmetic. If I wished to have deterministic partitioning for my existing data, having a multiple would allow data to go into one of two possible new partitions as opposed to only one as in the previous case.</p>\n<p>E.g. with 9 -&gt; 18 partitions:</p>\n<ol>\n<li>id 1 -&gt; previously hashed to partition 0, now hashes to either 0 or 9 (mod 18)</li>\n<li>id 2 -&gt; previously hashed to partition 1, now hashes to either 1 or 10 (mod 18)</li>\n</ol>\n<p>Hence my requirement for higher paralellism is met and the data inside a single partition is ordered as desired, since a target partition is only supplied from at most one source partition.</p>\n<p>I'm sure there might have been a simpler way to go about this all, but this works for now.</p>\n<p>For further context/info, see also <a href=\"https://stackoverflow.com/questions/73207602/why-does-spring-cloud-stream-with-kafka-binder-hash-keys-differently-than-a-stan\">this</a> Q&amp;A.</p>\n"},{"tags":["java","spring","docker","docker-compose"],"comments":[{"owner":{"account_id":6875395,"reputation":1037,"user_id":5284011,"display_name":"JohnXF"},"score":0,"creation_date":1660233041,"post_id":73323118,"comment_id":129489695,"body_markdown":"Why are you using &#39;ping&#39; to determine if you can connect? If you are intending to use Postman then you are presumably talking to a HTTP-based server on the container and so you should use ``curl`` or ``wget`` or similar to test that you can connect. The hostname ``authentication-srv`` will not resolve on your host - that is the name within the docker network - so you should be trying to connect to the port on ``localhost`` or perhaps your actual host name.","body":"Why are you using &#39;ping&#39; to determine if you can connect? If you are intending to use Postman then you are presumably talking to a HTTP-based server on the container and so you should use <code>curl</code> or <code>wget</code> or similar to test that you can connect. The hostname <code>authentication-srv</code> will not resolve on your host - that is the name within the docker network - so you should be trying to connect to the port on <code>localhost</code> or perhaps your actual host name."},{"owner":{"account_id":13863020,"reputation":137023,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1660235307,"post_id":73323118,"comment_id":129490516,"body_markdown":"Host networking does not work in Docker Desktop (on any platform) and is almost never necessary; you should delete the `network_mode: host` option.  ping(1) is a very-low-level diagnostic tool that sends ICMP ECHO packets, and it doesn&#39;t know about things like TCP ports; it&#39;s usually not the right tool, prefer something like Curl for HTTP debugging.","body":"Host networking does not work in Docker Desktop (on any platform) and is almost never necessary; you should delete the <code>network_mode: host</code> option.  ping(1) is a very-low-level diagnostic tool that sends ICMP ECHO packets, and it doesn&#39;t know about things like TCP ports; it&#39;s usually not the right tool, prefer something like Curl for HTTP debugging."},{"owner":{"account_id":13951422,"reputation":7,"user_id":10074856,"display_name":"RegalArtic"},"score":0,"creation_date":1660291727,"post_id":73323118,"comment_id":129502783,"body_markdown":"If I remove the `network_mode:host` docker will use its own bridge type network by default and I don&#39;t know how to connect to the containers.","body":"If I remove the <code>network_mode:host</code> docker will use its own bridge type network by default and I don&#39;t know how to connect to the containers."}],"owner":{"account_id":13951422,"reputation":7,"user_id":10074856,"display_name":"RegalArtic"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660230997,"creation_date":1660230966,"question_id":73323118,"body_markdown":"i have macOS 11.5, docker desktop 4.10, microservices with spring boot.\r\nI use docker-compose to allow me to start my microservices.\r\nA portion of docker-compose:\r\n\r\n```\r\nauthentication-server:\r\n     build: ./authentication-server\r\n     network_mode: &quot;host&quot;\r\n     image: authentication-server: 0.0.9\r\n     hostname: authentication-srv\r\n     ports:\r\n      - &quot;4445:4445&quot;\r\n```\r\n\r\nbasically I need to communicate with the container, interrogating it from my pc using Postman, then a REST request.\r\n\r\n\r\nDespite the nerwork_mode: &quot;host&quot; when I try to ping localhost: 4445 it tells me \r\n\r\n&quot;ping: cannot resolve localhost: 4445: Unknown host&quot;.\r\n\r\n\r\nAs well as trying the various container names:\r\n\r\n&quot;ping: cannot resolve authentication-srv: 4445: Unknown host&quot;\r\n\r\n&quot;ping: cannot resolve authentication-server: 4445: Unknown host&quot;\r\n\r\nSo my need is to communicate with a container created with docker-compose on my local pc. How can I solve? thank you","title":"communicate with a container created with docker-compose","body":"<p>i have macOS 11.5, docker desktop 4.10, microservices with spring boot.\nI use docker-compose to allow me to start my microservices.\nA portion of docker-compose:</p>\n<pre><code>authentication-server:\n     build: ./authentication-server\n     network_mode: &quot;host&quot;\n     image: authentication-server: 0.0.9\n     hostname: authentication-srv\n     ports:\n      - &quot;4445:4445&quot;\n</code></pre>\n<p>basically I need to communicate with the container, interrogating it from my pc using Postman, then a REST request.</p>\n<p>Despite the nerwork_mode: &quot;host&quot; when I try to ping localhost: 4445 it tells me</p>\n<p>&quot;ping: cannot resolve localhost: 4445: Unknown host&quot;.</p>\n<p>As well as trying the various container names:</p>\n<p>&quot;ping: cannot resolve authentication-srv: 4445: Unknown host&quot;</p>\n<p>&quot;ping: cannot resolve authentication-server: 4445: Unknown host&quot;</p>\n<p>So my need is to communicate with a container created with docker-compose on my local pc. How can I solve? thank you</p>\n"},{"tags":["java","exception","initializer"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":0,"creation_date":1660223336,"post_id":73321158,"comment_id":129485518,"body_markdown":"The compiler does not evaluate `if (true)`, therefore it cannot know if the first one actually throws an exception. The second one either never ends or always throws an exception. The compiler can understand the while is entered but never properly exited. The try-catch is irrelevant in both cases, just throw a new and empty exception in both cases.","body":"The compiler does not evaluate <code>if (true)</code>, therefore it cannot know if the first one actually throws an exception. The second one either never ends or always throws an exception. The compiler can understand the while is entered but never properly exited. The try-catch is irrelevant in both cases, just throw a new and empty exception in both cases."},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1660223337,"post_id":73321158,"comment_id":129485519,"body_markdown":"And what is the exact error message?","body":"And what is the exact error message?"},{"owner":{"account_id":18467057,"reputation":52,"user_id":13452926,"display_name":"Mammad Yahyayev"},"score":0,"creation_date":1660223561,"post_id":73321158,"comment_id":129485610,"body_markdown":"I didn&#39;t write code like this, i am preparing for Java OCP exam, therefore i test it all cases","body":"I didn&#39;t write code like this, i am preparing for Java OCP exam, therefore i test it all cases"},{"owner":{"account_id":6921189,"reputation":1490,"user_id":5313817,"display_name":"Rishal"},"score":0,"creation_date":1660223906,"post_id":73321158,"comment_id":129485753,"body_markdown":"Does this answer your question? [Why is it not allowed to throw an exception in a Java instance initialization block?](https://stackoverflow.com/questions/13532794/why-is-it-not-allowed-to-throw-an-exception-in-a-java-instance-initialization-bl)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/13532794/why-is-it-not-allowed-to-throw-an-exception-in-a-java-instance-initialization-bl\">Why is it not allowed to throw an exception in a Java instance initialization block?</a>"},{"owner":{"account_id":18467057,"reputation":52,"user_id":13452926,"display_name":"Mammad Yahyayev"},"score":0,"creation_date":1660224144,"post_id":73321158,"comment_id":129485855,"body_markdown":"I saw this answers, but i don&#39;t understand differences between `while(true)` and `if(true)` in this case","body":"I saw this answers, but i don&#39;t understand differences between <code>while(true)</code> and <code>if(true)</code> in this case"},{"owner":{"account_id":18467057,"reputation":52,"user_id":13452926,"display_name":"Mammad Yahyayev"},"score":0,"creation_date":1660224632,"post_id":73321158,"comment_id":129486080,"body_markdown":"@luk2302 i understand your answer, and i have a request, where you learn this, i mean can you share any resource","body":"@luk2302 i understand your answer, and i have a request, where you learn this, i mean can you share any resource"}],"answers":[{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660230847,"creation_date":1660224840,"answer_id":73321614,"question_id":73321158,"body_markdown":"Stripping down your examples - because the try/catch/rethrow doesn&#39;t matter here:\r\n\r\n```\r\n{\r\n    if (true) {\r\n        throw new RuntimeException();\r\n    }\r\n}\r\n```\r\n\r\nvs\r\n\r\n```\r\n{\r\n    while (true) {\r\n        throw new RuntimeException();\r\n    }\r\n}\r\n```\r\n\r\nWhat matters here is whether Java considers that the statements can complete normally, because [JLS 8.6](https://docs.oracle.com/javase/specs/jls/se14/html/jls-8.html#jls-8.6) says:\r\n\r\n&gt; **It is a compile-time error if an instance initializer cannot complete normally (&#167;14.22).**\r\n\r\nConsult the [rules on unreachable statements](https://docs.oracle.com/javase/specs/jls/se14/html/jls-14.html#jls-14.22):\r\n\r\n&gt; * An `if-then` statement can complete normally iff it is reachable.\r\n&gt; * ...\r\n&gt; * A `while` statement can complete normally iff at least one of the following is true:\r\n&gt;   * The while statement is reachable and the condition expression is not a constant expression (&#167;15.29) with value true.\r\n&gt;   * There is a reachable break statement that exits the while statement.\r\n\r\n(You can also read this same section to find out why I say the try/catch/rethrow didn&#39;t matter).\r\n\r\nNotice that `if` doesn&#39;t have the same conditions on normal completion as `while`.","title":"Instance Initializer Exception Handling","body":"<p>Stripping down your examples - because the try/catch/rethrow doesn't matter here:</p>\n<pre><code>{\n    if (true) {\n        throw new RuntimeException();\n    }\n}\n</code></pre>\n<p>vs</p>\n<pre><code>{\n    while (true) {\n        throw new RuntimeException();\n    }\n}\n</code></pre>\n<p>What matters here is whether Java considers that the statements can complete normally, because <a href=\"https://docs.oracle.com/javase/specs/jls/se14/html/jls-8.html#jls-8.6\" rel=\"nofollow noreferrer\">JLS 8.6</a> says:</p>\n<blockquote>\n<p><strong>It is a compile-time error if an instance initializer cannot complete normally (§14.22).</strong></p>\n</blockquote>\n<p>Consult the <a href=\"https://docs.oracle.com/javase/specs/jls/se14/html/jls-14.html#jls-14.22\" rel=\"nofollow noreferrer\">rules on unreachable statements</a>:</p>\n<blockquote>\n<ul>\n<li>An <code>if-then</code> statement can complete normally iff it is reachable.</li>\n<li>...</li>\n<li>A <code>while</code> statement can complete normally iff at least one of the following is true:\n<ul>\n<li>The while statement is reachable and the condition expression is not a constant expression (§15.29) with value true.</li>\n<li>There is a reachable break statement that exits the while statement.</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<p>(You can also read this same section to find out why I say the try/catch/rethrow didn't matter).</p>\n<p>Notice that <code>if</code> doesn't have the same conditions on normal completion as <code>while</code>.</p>\n"}],"owner":{"account_id":18467057,"reputation":52,"user_id":13452926,"display_name":"Mammad Yahyayev"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":73321614,"answer_count":1,"score":-2,"last_activity_date":1660230847,"creation_date":1660223084,"question_id":73321158,"body_markdown":"I didn&#39;t understand the difference between these codes. One of them is compiled, the other one isn&#39;t.\r\n\r\n    {\r\n        if (true) {\r\n            try {\r\n                throw new IOException();\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    }\r\n\r\nThis is a instance initializer, i throw a checked exception and then handle it, and this code compile.\r\n\r\nBut this one isn&#39;t compile.\r\n\r\n    {\r\n        while (true) {\r\n            try {\r\n                throw new IOException();\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\nException says: `Initializer must be able to complete normally`\r\n\r\nHere is the image of both\r\n[Instance Initializer][1]\r\n\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/z07sh.png","title":"Instance Initializer Exception Handling","body":"<p>I didn't understand the difference between these codes. One of them is compiled, the other one isn't.</p>\n<pre><code>{\n    if (true) {\n        try {\n            throw new IOException();\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<p>This is a instance initializer, i throw a checked exception and then handle it, and this code compile.</p>\n<p>But this one isn't compile.</p>\n<pre><code>{\n    while (true) {\n        try {\n            throw new IOException();\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<p>Exception says: <code>Initializer must be able to complete normally</code></p>\n<p>Here is the image of both\n<a href=\"https://i.stack.imgur.com/z07sh.png\" rel=\"nofollow noreferrer\">Instance Initializer</a></p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":379763,"reputation":29886,"user_id":733345,"display_name":"Joe"},"score":1,"creation_date":1660214735,"post_id":73319233,"comment_id":129482468,"body_markdown":"Does this answer your question? [How to make a Java class that implements one interface with two generic types?](https://stackoverflow.com/questions/1297972/how-to-make-a-java-class-that-implements-one-interface-with-two-generic-types)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/1297972/how-to-make-a-java-class-that-implements-one-interface-with-two-generic-types\">How to make a Java class that implements one interface with two generic types?</a>"},{"owner":{"account_id":12491593,"reputation":111,"user_id":9092943,"display_name":"Lois2B"},"score":0,"creation_date":1660215765,"post_id":73319233,"comment_id":129482797,"body_markdown":"@Joe Not really, that question seems to be more about a biconsumer where the input arguments are of the same type. However, I&#39;m trying to implement a function where both the argument and the result could be of any type, separately.","body":"@Joe Not really, that question seems to be more about a biconsumer where the input arguments are of the same type. However, I&#39;m trying to implement a function where both the argument and the result could be of any type, separately."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1660220485,"post_id":73319233,"comment_id":129484513,"body_markdown":"I don&#39;t really see how what you&#39;re trying to do is different from a [`Function&lt;T,S&gt;`](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/function/Function.html), with your `assign` method being the equivalent of the `Function#apply(T)` method.","body":"I don&#39;t really see how what you&#39;re trying to do is different from a <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/function/Function.html\" rel=\"nofollow noreferrer\"><code>Function&lt;T,S&gt;</code></a>, with your <code>assign</code> method being the equivalent of the <code>Function#apply(T)</code> method."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1660225380,"post_id":73319233,"comment_id":129486438,"body_markdown":"In other words, you should have `interface Assigner&lt;T, S&gt; { S assign(T type); }` and then your subtypes could be `interface CityAssigner&lt;T&gt; extends Assigner&lt;T, City&gt; {}`, for example.","body":"In other words, you should have <code>interface Assigner&lt;T, S&gt; { S assign(T type); }</code> and then your subtypes could be <code>interface CityAssigner&lt;T&gt; extends Assigner&lt;T, City&gt; {}</code>, for example."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1660230688,"post_id":73319233,"comment_id":129488705,"body_markdown":"Seconding what @Slaw recommended, since your current approach will face a class explosion. If you truly want a GOF design pattern, I would say that you&#39;re looking for the [Decorator pattern](https://en.wikipedia.org/wiki/Decorator_pattern)","body":"Seconding what @Slaw recommended, since your current approach will face a class explosion. If you truly want a GOF design pattern, I would say that you&#39;re looking for the <a href=\"https://en.wikipedia.org/wiki/Decorator_pattern\" rel=\"nofollow noreferrer\">Decorator pattern</a>"},{"owner":{"account_id":12491593,"reputation":111,"user_id":9092943,"display_name":"Lois2B"},"score":0,"creation_date":1660288765,"post_id":73319233,"comment_id":129501806,"body_markdown":"@Slaw Indeed, I realized that it&#39;s Java&#39;s function what I was looking for, that&#39;s why I mentioned it in my previous comment. As you and Cheng&#39;s answer both suggested, I agree that the simplest way is probably just passing the types in the sub interfaces. I got confused because I&#39;m not sure when to put a type parameter to class level instead of the method scope.","body":"@Slaw Indeed, I realized that it&#39;s Java&#39;s function what I was looking for, that&#39;s why I mentioned it in my previous comment. As you and Cheng&#39;s answer both suggested, I agree that the simplest way is probably just passing the types in the sub interfaces. I got confused because I&#39;m not sure when to put a type parameter to class level instead of the method scope."}],"answers":[{"tags":[],"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660230348,"creation_date":1660230348,"answer_id":73322961,"question_id":73319233,"body_markdown":"Your sub interface inherits the method ```assign``` from ```Assigner```.  All you need to do in the sub interface is pass the types to the super interface.  \r\n\r\n```\r\ninterface Assigner&lt;S, T&gt; { S assign(T type);}\r\ninterface PlayerAssigner&lt;S&gt; extends Assigner&lt;S,Player&gt; {}\r\ninterface ManagerAssigner&lt;S&gt; extends Assigner&lt;S,Manager&gt; {}\r\ninterface CityBasedAssigner&lt;T&gt; extends Assigner&lt;City,T&gt; {}\r\n```","title":"What design pattern could work with such a generic type in Java?","body":"<p>Your sub interface inherits the method <code>assign</code> from <code>Assigner</code>.  All you need to do in the sub interface is pass the types to the super interface.</p>\n<pre><code>interface Assigner&lt;S, T&gt; { S assign(T type);}\ninterface PlayerAssigner&lt;S&gt; extends Assigner&lt;S,Player&gt; {}\ninterface ManagerAssigner&lt;S&gt; extends Assigner&lt;S,Manager&gt; {}\ninterface CityBasedAssigner&lt;T&gt; extends Assigner&lt;City,T&gt; {}\n</code></pre>\n"}],"owner":{"account_id":12491593,"reputation":111,"user_id":9092943,"display_name":"Lois2B"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1660230348,"creation_date":1660214114,"question_id":73319233,"body_markdown":"Consider having a generic type:\r\n\r\n```java\r\npublic interface &lt;T&gt; Assigner {\r\n    &lt;S&gt; S assign(T type);\r\n}\r\n```\r\n\r\nNow, let&#39;s say I want to have different types of assigners that could assign an object of any type `T` to a group of any type `S`. Example:\r\n\r\n```java\r\ninterface PlayerAssigner extends Assigner&lt;Player&gt; {\r\n    &lt;S&gt; S assign(Player player);\r\n}\r\n\r\ninterface ManagerAssigner extends Assigner&lt;Manager&gt; {\r\n    &lt;S&gt; S assign(Manager manager);\r\n}\r\n\r\n...\r\n```\r\n\r\nI would also like to introduce a group-type-based assigner, but this is where I got stuck.\r\nI tried:\r\n\r\n```java\r\ninterface CityBasedAssigner&lt;T&gt; extends Assigner&lt;T&gt; {\r\n    City assign(T type);\r\n}\r\n```\r\n\r\n, but this won&#39;t work, it says that both methods have the same erasure. I don&#39;t know whether it should be an abstract class or something different, or whether the whole concept could be simplified. \r\nWhat I want is to be able to instantiate different types of assigners from the combination of two type parameters, e.g. CityBasedPlayerAssigner, CountryBasedPlayerAssigner, CountryBasedManagerAssigner, etc., and this would have been the next step: combining the two extended interfaces and create many implementations based on these two.\r\n\r\nWhat am I missing here?","title":"What design pattern could work with such a generic type in Java?","body":"<p>Consider having a generic type:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface &lt;T&gt; Assigner {\n    &lt;S&gt; S assign(T type);\n}\n</code></pre>\n<p>Now, let's say I want to have different types of assigners that could assign an object of any type <code>T</code> to a group of any type <code>S</code>. Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface PlayerAssigner extends Assigner&lt;Player&gt; {\n    &lt;S&gt; S assign(Player player);\n}\n\ninterface ManagerAssigner extends Assigner&lt;Manager&gt; {\n    &lt;S&gt; S assign(Manager manager);\n}\n\n...\n</code></pre>\n<p>I would also like to introduce a group-type-based assigner, but this is where I got stuck.\nI tried:</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface CityBasedAssigner&lt;T&gt; extends Assigner&lt;T&gt; {\n    City assign(T type);\n}\n</code></pre>\n<p>, but this won't work, it says that both methods have the same erasure. I don't know whether it should be an abstract class or something different, or whether the whole concept could be simplified.\nWhat I want is to be able to instantiate different types of assigners from the combination of two type parameters, e.g. CityBasedPlayerAssigner, CountryBasedPlayerAssigner, CountryBasedManagerAssigner, etc., and this would have been the next step: combining the two extended interfaces and create many implementations based on these two.</p>\n<p>What am I missing here?</p>\n"},{"tags":["java","swing","memory-leaks","jdialog"],"comments":[{"owner":{"display_name":"user4628051"},"score":0,"creation_date":1440493231,"post_id":32199646,"comment_id":52283902,"body_markdown":"Could you please present your code","body":"Could you please present your code"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1440497950,"post_id":32199646,"comment_id":52287011,"body_markdown":"*&quot;I have a Java Application where JDialog is opened from a button in a JFrame.&quot;* I am skeptical that this is a memory leak, and even if so, that it causes much problem.  After all, how many (tens of) thousands of dialogs does it take to crash the JVM?  If it **truly is** a problem (OOME), try using a `CardLayout` in a single dialog, or showing the exact same dialog and components with different values in the fields.","body":"<i>&quot;I have a Java Application where JDialog is opened from a button in a JFrame.&quot;</i> I am skeptical that this is a memory leak, and even if so, that it causes much problem.  After all, how many (tens of) thousands of dialogs does it take to crash the JVM?  If it <b>truly is</b> a problem (OOME), try using a <code>CardLayout</code> in a single dialog, or showing the exact same dialog and components with different values in the fields."},{"owner":{"account_id":3093821,"reputation":53931,"user_id":3182664,"accept_rate":55,"display_name":"Marco13"},"score":0,"creation_date":1440507143,"post_id":32199646,"comment_id":52293000,"body_markdown":"The `ownedWindowList` contains **Weak** References, so this should not prevent the dialog from being reclaimed and garbage collected. But note that this will not done immediately (when you close the dialog), and it might not be done at all during one application run **if** the memory that is occupied by the dialog simply is not required otherwise. Particularly regarding the question: You never know when (or whether) `finalize()` on an object will be called. Websearch: &quot;Effective Java, Item 7: Avoid finalizers&quot;  The rule of thumb is: There&#39;s no leak unless you get an `OutOfMemoryError`","body":"The <code>ownedWindowList</code> contains <b>Weak</b> References, so this should not prevent the dialog from being reclaimed and garbage collected. But note that this will not done immediately (when you close the dialog), and it might not be done at all during one application run <b>if</b> the memory that is occupied by the dialog simply is not required otherwise. Particularly regarding the question: You never know when (or whether) <code>finalize()</code> on an object will be called. Websearch: &quot;Effective Java, Item 7: Avoid finalizers&quot;  The rule of thumb is: There&#39;s no leak unless you get an <code>OutOfMemoryError</code>"}],"answers":[{"tags":[],"owner":{"account_id":25994090,"reputation":60,"user_id":19705775,"display_name":"Adrian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660230263,"creation_date":1660229496,"answer_id":73322751,"question_id":32199646,"body_markdown":"This is what I&#39;m trying right now, and I faced the same problem. \r\nI need an application, that reads some local files, and after more \r\nsearching, I found that Java can do more than I was expected...  \r\nI had written the skeleton of a Java dialog class for an interface. \r\n\r\nThe problem was, closing the dialog, was still working in background. \r\nAnd trying to run again the application, it said it&#39;s still running. \r\nHere is the code for my class: \r\n\r\n    import java.awt.event.*; \r\n    \r\n    public class JFrameDialog extends javax.swing.JDialog \r\n    implements java.awt.event.ActionListener { \r\n      private static javax.swing.JDialog dialog; \r\n    \r\n      @Override\r\n      public void actionPerformed(ActionEvent e){ \r\n      }\r\n    \r\n      public static void setup_controls(){\r\n        javax.swing.JButton myButton = new javax.swing.JButton(&quot;Close&quot;);\r\n        myButton.setVisible(true); \r\n        myButton.setBounds(50, 100, 100, 30); \r\n        myButton.addActionListener(new java.awt.event.ActionListener(){\r\n          public void actionPerformed(ActionEvent e){ \r\n            System.exit(0); \r\n          } \r\n        }); \r\n    \r\n        dialog.add(myButton); \r\n      }\r\n    \r\n      public static void main(String[] args){\r\n        dialog = new javax.swing.JDialog(); \r\n        dialog.setLayout(null); \r\n        dialog.setDefaultCloseOperation(javax.swing.JDialog.DISPOSE_ON_CLOSE); \r\n        dialog.setTitle(&quot; Area Report&quot;); \r\n        dialog.setSize(600,400); \r\n        dialog.setLocation(0, 0);\r\n        \r\n        setup_controls();     \r\n        dialog.setVisible(true); \r\n    \r\n        dialog.addWindowListener(new java.awt.event.WindowAdapter(){\r\n          @Override\r\n          public void windowClosing(WindowEvent e) { \r\n            System.exit(0);\r\n          }\r\n        }); \r\n      } \r\n    }\r\n\r\n\r\n\r\nAs you can see, the close option is also: JDialog.DISPOSE_ON_CLOSE\r\nBut this is not actually removing the program from the working heap. \r\n\r\nOnce you had detected the windowClosing event, either from the Close button, or from the frame menu close button (that with an X inside), you may call System.exit(0); \r\n\r\nThis will terminate the application main loop and the dialog will close. Next time when running again the application, the dialog shows normally. \r\n\r\nHopefully this also works for other people. \r\nWith kind regards, Adrian Brinas. \r\n\r\n\r\n","title":"JDialog not finalized","body":"<p>This is what I'm trying right now, and I faced the same problem.\nI need an application, that reads some local files, and after more\nsearching, I found that Java can do more than I was expected...<br />\nI had written the skeleton of a Java dialog class for an interface.</p>\n<p>The problem was, closing the dialog, was still working in background.\nAnd trying to run again the application, it said it's still running.\nHere is the code for my class:</p>\n<pre><code>import java.awt.event.*; \n\npublic class JFrameDialog extends javax.swing.JDialog \nimplements java.awt.event.ActionListener { \n  private static javax.swing.JDialog dialog; \n\n  @Override\n  public void actionPerformed(ActionEvent e){ \n  }\n\n  public static void setup_controls(){\n    javax.swing.JButton myButton = new javax.swing.JButton(&quot;Close&quot;);\n    myButton.setVisible(true); \n    myButton.setBounds(50, 100, 100, 30); \n    myButton.addActionListener(new java.awt.event.ActionListener(){\n      public void actionPerformed(ActionEvent e){ \n        System.exit(0); \n      } \n    }); \n\n    dialog.add(myButton); \n  }\n\n  public static void main(String[] args){\n    dialog = new javax.swing.JDialog(); \n    dialog.setLayout(null); \n    dialog.setDefaultCloseOperation(javax.swing.JDialog.DISPOSE_ON_CLOSE); \n    dialog.setTitle(&quot; Area Report&quot;); \n    dialog.setSize(600,400); \n    dialog.setLocation(0, 0);\n    \n    setup_controls();     \n    dialog.setVisible(true); \n\n    dialog.addWindowListener(new java.awt.event.WindowAdapter(){\n      @Override\n      public void windowClosing(WindowEvent e) { \n        System.exit(0);\n      }\n    }); \n  } \n}\n</code></pre>\n<p>As you can see, the close option is also: JDialog.DISPOSE_ON_CLOSE\nBut this is not actually removing the program from the working heap.</p>\n<p>Once you had detected the windowClosing event, either from the Close button, or from the frame menu close button (that with an X inside), you may call System.exit(0);</p>\n<p>This will terminate the application main loop and the dialog will close. Next time when running again the application, the dialog shows normally.</p>\n<p>Hopefully this also works for other people.\nWith kind regards, Adrian Brinas.</p>\n"}],"owner":{"account_id":3518095,"reputation":21,"user_id":2941046,"display_name":"Cham"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660230263,"creation_date":1440492913,"question_id":32199646,"body_markdown":"I have a Java Application where JDialog is opened from a button in a JFrame.\r\nI have set default close operation of JDialog to JDialog.DISPOSE_ON_CLOSE.\r\n\r\nThe problem that I the JDialog is not finalized after being closed using the cross button in the dialog window.\r\nAfter analysing a memory snapshot I came across that this is because parent window&#39;s(the JFrame) ownedWindowList still has a reference to the dialog object.\r\n\r\nDoes anyone know why this could happen and how I can solve it?","title":"JDialog not finalized","body":"<p>I have a Java Application where JDialog is opened from a button in a JFrame.\nI have set default close operation of JDialog to JDialog.DISPOSE_ON_CLOSE.</p>\n\n<p>The problem that I the JDialog is not finalized after being closed using the cross button in the dialog window.\nAfter analysing a memory snapshot I came across that this is because parent window's(the JFrame) ownedWindowList still has a reference to the dialog object.</p>\n\n<p>Does anyone know why this could happen and how I can solve it?</p>\n"},{"tags":["java","regex","placeholder"],"comments":[{"owner":{"account_id":5301,"reputation":91455,"user_id":8454,"accept_rate":100,"display_name":"Andy Lester"},"score":1,"creation_date":1660225077,"post_id":73321645,"comment_id":129486294,"body_markdown":"Is this in bash? Can you show us some sample code to give us some context?","body":"Is this in bash? Can you show us some sample code to give us some context?"},{"owner":{"account_id":1157594,"reputation":3566,"user_id":1137788,"accept_rate":84,"display_name":"SatheeshJM"},"score":0,"creation_date":1660225405,"post_id":73321645,"comment_id":129486457,"body_markdown":"It&#39;s in java. have updated question with some code\n@AndyLester","body":"It&#39;s in java. have updated question with some code @AndyLester"},{"owner":{"account_id":4739783,"reputation":612585,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":1,"creation_date":1660225487,"post_id":73321645,"comment_id":129486502,"body_markdown":"Java regex does not allow recursing a part of a pattern, you will have to write some code for this to work.","body":"Java regex does not allow recursing a part of a pattern, you will have to write some code for this to work."},{"owner":{"account_id":1157594,"reputation":3566,"user_id":1137788,"accept_rate":84,"display_name":"SatheeshJM"},"score":0,"creation_date":1660225596,"post_id":73321645,"comment_id":129486563,"body_markdown":"@WiktorStribiżew my regex does not need to detect all nested placeholders.. \nso that is not a problem for me. \nThe regex just needs to detect if the entire string is a placeholder (it may or may not contain nested placeholders)","body":"@WiktorStribiżew my regex does not need to detect all nested placeholders..  so that is not a problem for me.  The regex just needs to detect if the entire string is a placeholder (it may or may not contain nested placeholders)"},{"owner":{"account_id":4739783,"reputation":612585,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":2,"creation_date":1660225631,"post_id":73321645,"comment_id":129486585,"body_markdown":"&quot;*it may or may not contain nested placeholders*&quot; is the culprit.","body":"&quot;<i>it may or may not contain nested placeholders</i>&quot; is the culprit."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":2,"creation_date":1660228519,"post_id":73321645,"comment_id":129487834,"body_markdown":"If you *really* want to build regex based solution then start here: http://www.drregex.com/2017/11/match-nested-brackets-with-regex-new.html. But better hire good security team if your code will need to be maintained by people who know where you live.","body":"If you <i>really</i> want to build regex based solution then start here: <a href=\"http://www.drregex.com/2017/11/match-nested-brackets-with-regex-new.html\" rel=\"nofollow noreferrer\">drregex.com/2017/11/match-nested-brackets-with-regex-new.htm&zwnj;&#8203;l</a>. But better hire good security team if your code will need to be maintained by people who know where you live."}],"answers":[{"tags":[],"owner":{"account_id":1010971,"reputation":11524,"user_id":1023553,"accept_rate":59,"display_name":"NoDataFound"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660227589,"creation_date":1660226090,"answer_id":73321930,"question_id":73321645,"body_markdown":"From your example, I think you need to avoid greedy quantifier:\r\n\r\n    \\$\\{(.+?)\\}\r\n\r\nNotice the `?` after `+` which are reluctant quantifier: https://docs.oracle.com/javase/tutorial/essential/regex/quant.html\r\n\r\nThat should match `${var1}-txt-${var2}`\r\n\r\nNow, if you use `^` and `$` as well, this will fail.\r\n\r\nNote that you could also use [StringSubstitutor from commons-text](https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/StringSubstitutor.html) to perform a similar job (it will handle the parsing and you may use a `Lookup` that capture the variable).\r\n\r\n**Edit for comment**: given that Java regex don&#39;t support recursion, you would have to hard code part of recursion here if you wanted to match all your 4 cases:\r\n\r\n    \\$\\{([^{}-]+)(?:|-\\$\\{([^{}-]+)\\})\\}\r\n\r\nThe first part match a variable, ignoring `{}` and `-`. The other part match either an empty default value, either an interpolation.\r\n\r\nIf you need to catch `${a-${b-${c}}}` you would have to add another layer which you should avoid: doing complex regex for the sake of doing complex regex will simply be a maintenance ache (with only one level of recursion the regexp above is hard to read)\r\n\r\nIf you need to handle recursion, I think you get no other alternative do it yourself with code as as below:\r\n\r\n    void parse(String pattern) {\r\n      if (pattern.startsWith(&quot;${&quot;) &amp;&amp; pattern.endsWith(&quot;}&quot;)) {\r\n        // remove ${ and }\r\n        var content = pattern.substring(2, pattern.length() - 2 - 1);\r\n        var n = content.indexOf(&#39;-&#39;);\r\n        String leftVar = content;\r\n        if (n != -1) {\r\n          leftVar = content.substring(0, n); \r\n          // perform recursion\r\n          parse(content.substring(n+1)); \r\n        } \r\n        // return whatever you need\r\n      }\r\n\r\nOr use something that already exists.\r\n\r\n\r\n","title":"Regex detect if entire string is a placeholder","body":"<p>From your example, I think you need to avoid greedy quantifier:</p>\n<pre><code>\\$\\{(.+?)\\}\n</code></pre>\n<p>Notice the <code>?</code> after <code>+</code> which are reluctant quantifier: <a href=\"https://docs.oracle.com/javase/tutorial/essential/regex/quant.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/essential/regex/quant.html</a></p>\n<p>That should match <code>${var1}-txt-${var2}</code></p>\n<p>Now, if you use <code>^</code> and <code>$</code> as well, this will fail.</p>\n<p>Note that you could also use <a href=\"https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/StringSubstitutor.html\" rel=\"nofollow noreferrer\">StringSubstitutor from commons-text</a> to perform a similar job (it will handle the parsing and you may use a <code>Lookup</code> that capture the variable).</p>\n<p><strong>Edit for comment</strong>: given that Java regex don't support recursion, you would have to hard code part of recursion here if you wanted to match all your 4 cases:</p>\n<pre><code>\\$\\{([^{}-]+)(?:|-\\$\\{([^{}-]+)\\})\\}\n</code></pre>\n<p>The first part match a variable, ignoring <code>{}</code> and <code>-</code>. The other part match either an empty default value, either an interpolation.</p>\n<p>If you need to catch <code>${a-${b-${c}}}</code> you would have to add another layer which you should avoid: doing complex regex for the sake of doing complex regex will simply be a maintenance ache (with only one level of recursion the regexp above is hard to read)</p>\n<p>If you need to handle recursion, I think you get no other alternative do it yourself with code as as below:</p>\n<pre><code>void parse(String pattern) {\n  if (pattern.startsWith(&quot;${&quot;) &amp;&amp; pattern.endsWith(&quot;}&quot;)) {\n    // remove ${ and }\n    var content = pattern.substring(2, pattern.length() - 2 - 1);\n    var n = content.indexOf('-');\n    String leftVar = content;\n    if (n != -1) {\n      leftVar = content.substring(0, n); \n      // perform recursion\n      parse(content.substring(n+1)); \n    } \n    // return whatever you need\n  }\n</code></pre>\n<p>Or use something that already exists.</p>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660228392,"creation_date":1660228392,"answer_id":73322473,"question_id":73321645,"body_markdown":"    static boolean isPlaceHolder(String s) {\r\n        return s.matches(&quot;\\\\$\\\\{[^}]*\\\\}&quot;);\r\n    }\r\n\r\nor optimized for several uses:\r\n\r\n    private static final Pattern PLACE_HOLDER_PATTERN =\r\n            Pattern.compile(&quot;\\\\$\\\\{[^}]*\\\\}&quot;);\r\n    static boolean isPlaceHolder(String s) {\r\n        return PLACE_HOLDER_PATTERN.matcher(s).matches();\r\n    }\r\n\r\n- A **matches** does a match from begin to end, so no need for: `^...$`. As opposed to **find**.\r\n- It still is tricky to detect as false: `&quot;${x}, ${y}&quot;`. It would be best when the placeholder is just for a **variable**, `\\\\w+`.\r\n","title":"Regex detect if entire string is a placeholder","body":"<pre><code>static boolean isPlaceHolder(String s) {\n    return s.matches(&quot;\\\\$\\\\{[^}]*\\\\}&quot;);\n}\n</code></pre>\n<p>or optimized for several uses:</p>\n<pre><code>private static final Pattern PLACE_HOLDER_PATTERN =\n        Pattern.compile(&quot;\\\\$\\\\{[^}]*\\\\}&quot;);\nstatic boolean isPlaceHolder(String s) {\n    return PLACE_HOLDER_PATTERN.matcher(s).matches();\n}\n</code></pre>\n<ul>\n<li>A <strong>matches</strong> does a match from begin to end, so no need for: <code>^...$</code>. As opposed to <strong>find</strong>.</li>\n<li>It still is tricky to detect as false: <code>&quot;${x}, ${y}&quot;</code>. It would be best when the placeholder is just for a <strong>variable</strong>, <code>\\\\w+</code>.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":6556336,"reputation":1128,"user_id":5128343,"display_name":"Jelaby"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660230239,"creation_date":1660229021,"answer_id":73322629,"question_id":73321645,"body_markdown":"It is not possible to match arbitrarily deep nested structures using regular expressions. The most you can do with a single regex is match a finite number of nested parts, though your pattern will probably be pretty ugly.\r\n\r\nAnother approach is to apply a simpler pattern many times, until you have an answer. For example:\r\n\r\n1. Replace everything that matches `\\$\\{[^}]*\\}` (or `\\$\\{.*?\\}`) with nothing (the empty string)\r\n2. Repeat until the pattern no longer matches\r\n\r\nIf the string is now empty, then the value was &quot;valid&quot;.\r\nIf the string is not empty, then the value is &quot;invalid&quot;.\r\n\r\n\r\n```java\r\nprivate static final Pattern PATTERN = Pattern.compile(&quot;\\\\$\\\\{.*?\\\\}&quot;);\r\n\r\npublic boolean isValid(String value) {\r\n  while (true) {\r\n    String newValue = PATTERN.matcher(value).replaceAll(&quot;&quot;);\r\n    if (newValue.equals(value))\r\n      break;\r\n    value = newValue;\r\n  }\r\n  return value.isEmpty();\r\n}","title":"Regex detect if entire string is a placeholder","body":"<p>It is not possible to match arbitrarily deep nested structures using regular expressions. The most you can do with a single regex is match a finite number of nested parts, though your pattern will probably be pretty ugly.</p>\n<p>Another approach is to apply a simpler pattern many times, until you have an answer. For example:</p>\n<ol>\n<li>Replace everything that matches <code>\\$\\{[^}]*\\}</code> (or <code>\\$\\{.*?\\}</code>) with nothing (the empty string)</li>\n<li>Repeat until the pattern no longer matches</li>\n</ol>\n<p>If the string is now empty, then the value was &quot;valid&quot;.\nIf the string is not empty, then the value is &quot;invalid&quot;.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final Pattern PATTERN = Pattern.compile(&quot;\\\\$\\\\{.*?\\\\}&quot;);\n\npublic boolean isValid(String value) {\n  while (true) {\n    String newValue = PATTERN.matcher(value).replaceAll(&quot;&quot;);\n    if (newValue.equals(value))\n      break;\n    value = newValue;\n  }\n  return value.isEmpty();\n}\n</code></pre>\n"}],"owner":{"account_id":1157594,"reputation":3566,"user_id":1137788,"accept_rate":84,"display_name":"SatheeshJM"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":492,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1660230239,"creation_date":1660224960,"question_id":73321645,"body_markdown":"I am trying to write a regex which should detect \r\n&quot;Is the entire string a placeholder&quot;. \r\n\r\n\r\nAn example of a valid placeholder here is `${var}`\r\nAn example of an invalid palceholder here  is `${var}-sometext` as the placeholder is just a part of the text\r\n\r\n\r\nThe regex I have currently is `^\\$\\{(.+)\\}$` \r\n\r\nThis works for normal cases.\r\nfor example\r\n\r\n\r\n\r\n| | | | |\r\n|-|-|-|-|\r\n|1|          ${var}         |         Regex Matches        | Expected ✅ | \r\n|2|          ${var} txt     |         Regex Does Not Match | Expected ✅ | \r\n\r\n\r\neven works for nested placeholders\r\n\r\n\r\n| | | | |\r\n|-|-|-|-|\r\n|3|          ${var-${nestedVar}}     |         Regex Matches | Expected ✅ | \r\n\r\n\r\nWhere this fails is if the strings begins and ends with a placeholder\r\nfor eg\r\n\r\n| | | | |\r\n|-|-|-|-|\r\n|4| ${var1}-txt-${var2} | Regex Matches | NOT Expected ❌ |\r\n\r\nBasically even though the entire string is not a placeholder, the regex treats it as one as it begins with `${` and ends with `}` \r\n\r\n\r\nI can try solving it by replacing `.+` with something like `[^$]+` to exclude dollar, but that will break the nested use case in example 3. \r\n\r\n\r\nHow do I solve this? \r\n\r\n\r\n\r\nEDIT\r\n\r\nAdding some code for context\r\n\r\n```\r\npublic static final Pattern PATTERN = Pattern.compile(&quot;^\\\\$\\\\{(.+)\\\\}$&quot;);\r\nMatcher matcher = PATTERN.matcher(placeholder);\r\nboolean isMatch = matcher.find();\r\n```\r\n","title":"Regex detect if entire string is a placeholder","body":"<p>I am trying to write a regex which should detect\n&quot;Is the entire string a placeholder&quot;.</p>\n<p>An example of a valid placeholder here is <code>${var}</code>\nAn example of an invalid palceholder here  is <code>${var}-sometext</code> as the placeholder is just a part of the text</p>\n<p>The regex I have currently is <code>^\\$\\{(.+)\\}$</code></p>\n<p>This works for normal cases.\nfor example</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>${var}</td>\n<td>Regex Matches</td>\n<td>Expected ✅</td>\n</tr>\n<tr>\n<td>2</td>\n<td>${var} txt</td>\n<td>Regex Does Not Match</td>\n<td>Expected ✅</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>even works for nested placeholders</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>3</td>\n<td>${var-${nestedVar}}</td>\n<td>Regex Matches</td>\n<td>Expected ✅</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Where this fails is if the strings begins and ends with a placeholder\nfor eg</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>4</td>\n<td>${var1}-txt-${var2}</td>\n<td>Regex Matches</td>\n<td>NOT Expected ❌</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Basically even though the entire string is not a placeholder, the regex treats it as one as it begins with <code>${</code> and ends with <code>}</code></p>\n<p>I can try solving it by replacing <code>.+</code> with something like <code>[^$]+</code> to exclude dollar, but that will break the nested use case in example 3.</p>\n<p>How do I solve this?</p>\n<p>EDIT</p>\n<p>Adding some code for context</p>\n<pre><code>public static final Pattern PATTERN = Pattern.compile(&quot;^\\\\$\\\\{(.+)\\\\}$&quot;);\nMatcher matcher = PATTERN.matcher(placeholder);\nboolean isMatch = matcher.find();\n</code></pre>\n"},{"tags":["java","spring-boot","spring-integration","azureservicebus"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660230214,"creation_date":1660230214,"answer_id":73322923,"question_id":73322482,"body_markdown":"The `com.azure.spring.integration.core.handler.DefaultMessageHandler` supports a dynamic destination resolution from message headers:\r\n\r\n    private String toDestination(Message&lt;?&gt; message) {\r\n        if (message.getHeaders().containsKey(AzureHeaders.NAME)) {\r\n            return message.getHeaders().get(AzureHeaders.NAME, String.class);\r\n        }\r\n\r\n        return this.destination;\r\n    }\r\n\r\nSo, what you need is a `@Header(name = AzureHeaders.NAME) String destination` argument on your gateway&#39;s `send()` method. There is no reason in the dynamic nature for the `OUTPUT_CHANNEL`: only one gateway and one service activator for that `DefaultMessageHandler` is enough. You call `send()` with payload and target destination as params.","title":"Multiple queues using azure service bus and spring integration","body":"<p>The <code>com.azure.spring.integration.core.handler.DefaultMessageHandler</code> supports a dynamic destination resolution from message headers:</p>\n<pre><code>private String toDestination(Message&lt;?&gt; message) {\n    if (message.getHeaders().containsKey(AzureHeaders.NAME)) {\n        return message.getHeaders().get(AzureHeaders.NAME, String.class);\n    }\n\n    return this.destination;\n}\n</code></pre>\n<p>So, what you need is a <code>@Header(name = AzureHeaders.NAME) String destination</code> argument on your gateway's <code>send()</code> method. There is no reason in the dynamic nature for the <code>OUTPUT_CHANNEL</code>: only one gateway and one service activator for that <code>DefaultMessageHandler</code> is enough. You call <code>send()</code> with payload and target destination as params.</p>\n"}],"owner":{"account_id":14580754,"reputation":27,"user_id":15587381,"display_name":"Any Programmer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":589,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73322923,"answer_count":1,"score":0,"last_activity_date":1660230214,"creation_date":1660228438,"question_id":73322482,"body_markdown":"I have this scenario. I have many queues in Azure ServiceBus, the implementation below works, however it is not flexible since would need to replicate for each queue. I would like to change from dynamically forming, maybe as a parameter in the method send() the queue name and the OUTPUT_CHANNEL for @ServiceActivator and @MessagingGateway, It is possible?\r\n\r\n\r\n```\r\nimport com.azure.spring.cloud.service.servicebus.properties.ServiceBusEntityType;\r\nimport com.azure.spring.integration.core.handler.DefaultMessageHandler;\r\nimport com.azure.spring.messaging.servicebus.core.ServiceBusTemplate;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.integration.annotation.MessagingGateway;\r\nimport org.springframework.integration.annotation.ServiceActivator;\r\nimport org.springframework.messaging.MessageHandler;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic class TestIntegration {\r\n\r\n    private static final String OUTPUT_CHANNEL = &quot;output&quot;;\r\n    private static final String QUEUE_NAME = &quot;myQueue&quot;;\r\n\r\n    @Autowired\r\n    private QueueOutboundGateway messagingGateway;\r\n\r\n    public void send(String message) {\r\n        this.messagingGateway.send(message);\r\n    }\r\n\r\n    @Bean\r\n    @ServiceActivator(inputChannel = OUTPUT_CHANNEL)\r\n    public MessageHandler queueMessageSender(ServiceBusTemplate serviceBusTemplate) {\r\n        serviceBusTemplate.setDefaultEntityType(ServiceBusEntityType.QUEUE);\r\n        return new DefaultMessageHandler(QUEUE_NAME, serviceBusTemplate);\r\n    }\r\n\r\n    @MessagingGateway(defaultRequestChannel = OUTPUT_CHANNEL)\r\n    public interface QueueOutboundGateway {\r\n        void send(String text);\r\n    }\r\n}\r\n```","title":"Multiple queues using azure service bus and spring integration","body":"<p>I have this scenario. I have many queues in Azure ServiceBus, the implementation below works, however it is not flexible since would need to replicate for each queue. I would like to change from dynamically forming, maybe as a parameter in the method send() the queue name and the OUTPUT_CHANNEL for @ServiceActivator and @MessagingGateway, It is possible?</p>\n<pre><code>import com.azure.spring.cloud.service.servicebus.properties.ServiceBusEntityType;\nimport com.azure.spring.integration.core.handler.DefaultMessageHandler;\nimport com.azure.spring.messaging.servicebus.core.ServiceBusTemplate;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.integration.annotation.MessagingGateway;\nimport org.springframework.integration.annotation.ServiceActivator;\nimport org.springframework.messaging.MessageHandler;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class TestIntegration {\n\n    private static final String OUTPUT_CHANNEL = &quot;output&quot;;\n    private static final String QUEUE_NAME = &quot;myQueue&quot;;\n\n    @Autowired\n    private QueueOutboundGateway messagingGateway;\n\n    public void send(String message) {\n        this.messagingGateway.send(message);\n    }\n\n    @Bean\n    @ServiceActivator(inputChannel = OUTPUT_CHANNEL)\n    public MessageHandler queueMessageSender(ServiceBusTemplate serviceBusTemplate) {\n        serviceBusTemplate.setDefaultEntityType(ServiceBusEntityType.QUEUE);\n        return new DefaultMessageHandler(QUEUE_NAME, serviceBusTemplate);\n    }\n\n    @MessagingGateway(defaultRequestChannel = OUTPUT_CHANNEL)\n    public interface QueueOutboundGateway {\n        void send(String text);\n    }\n}\n</code></pre>\n"},{"tags":["java","anylogic"],"answers":[{"tags":[],"owner":{"account_id":2486375,"reputation":11083,"user_id":2164728,"accept_rate":62,"display_name":"Benjamin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660229654,"creation_date":1660229654,"answer_id":73322789,"question_id":73322713,"body_markdown":"You would normally use the &quot;Statistics&quot; object from the palette. \r\n\r\nJust add values to it when you have them, i.e. `myStatsObject.add(myNewValue)` and you can get various stats about all data you added.\r\n\r\nSee the [help][1] for more info.\r\n\r\n\r\n  [1]: https://anylogic.help/anylogic/analysis/statistics.html","title":"Resource pool MTBF MTTR","body":"<p>You would normally use the &quot;Statistics&quot; object from the palette.</p>\n<p>Just add values to it when you have them, i.e. <code>myStatsObject.add(myNewValue)</code> and you can get various stats about all data you added.</p>\n<p>See the <a href=\"https://anylogic.help/anylogic/analysis/statistics.html\" rel=\"nofollow noreferrer\">help</a> for more info.</p>\n"}],"owner":{"account_id":25251954,"reputation":1,"user_id":19084320,"display_name":"Viviana Sicardi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1660229654,"creation_date":1660229364,"question_id":73322713,"body_markdown":"I want to simulate the maintenance of a machine in  production line, for this I&#39;ve set the resource block with a weibull distribution for the time next to failure( that rapresent the time between failure) and time to repair. Right now i would know the mean time of the  time next to failure and time to repair, I understood that I must to set two different variable but i don&#39;t know how can express the average in anylogic","title":"Resource pool MTBF MTTR","body":"<p>I want to simulate the maintenance of a machine in  production line, for this I've set the resource block with a weibull distribution for the time next to failure( that rapresent the time between failure) and time to repair. Right now i would know the mean time of the  time next to failure and time to repair, I understood that I must to set two different variable but i don't know how can express the average in anylogic</p>\n"},{"tags":["java","android","api","android-volley"],"comments":[{"owner":{"account_id":4972497,"reputation":1593,"user_id":3999808,"accept_rate":0,"display_name":"Zun"},"score":0,"creation_date":1660230132,"post_id":73322426,"comment_id":129488495,"body_markdown":"Nowadays there&#39;s no reason to use Volley (also advised by Google). Use Retrofit with OkHttp, which allows interceptors with ease","body":"Nowadays there&#39;s no reason to use Volley (also advised by Google). Use Retrofit with OkHttp, which allows interceptors with ease"},{"owner":{"account_id":24819493,"reputation":11,"user_id":18699986,"display_name":"Mustafa Amer - ATS"},"score":0,"creation_date":1660560143,"post_id":73322426,"comment_id":129553478,"body_markdown":"@Zun it&#39;s old big code i don&#39;t have time &amp; order to convert it all to retrofit, I&#39;m stuck with it.","body":"@Zun it&#39;s old big code i don&#39;t have time &amp; order to convert it all to retrofit, I&#39;m stuck with it."}],"owner":{"account_id":24819493,"reputation":11,"user_id":18699986,"display_name":"Mustafa Amer - ATS"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":526,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660229586,"creation_date":1660228174,"question_id":73322426,"body_markdown":"I have too many volley requests I want to add an interceptor to each request to track each request details.\r\n\r\nInterceptor used [Chucker Interceptor][1].\r\n\r\nHow do I achieve this?\r\n\r\n\r\n  [1]: https://github.com/jgilfelt/chuck","title":"How to add Interceptor to Volley API request (Android)?","body":"<p>I have too many volley requests I want to add an interceptor to each request to track each request details.</p>\n<p>Interceptor used <a href=\"https://github.com/jgilfelt/chuck\" rel=\"nofollow noreferrer\">Chucker Interceptor</a>.</p>\n<p>How do I achieve this?</p>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":1468853,"reputation":3627,"user_id":1380933,"display_name":"Vadik Sirekanyan"},"score":0,"creation_date":1660173949,"post_id":73312986,"comment_id":129473503,"body_markdown":"I don&#39;t see any ArrayList in your code. What objects do you want to put into it?","body":"I don&#39;t see any ArrayList in your code. What objects do you want to put into it?"}],"answers":[{"tags":[],"owner":{"account_id":1468853,"reputation":3627,"user_id":1380933,"display_name":"Vadik Sirekanyan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660171458,"creation_date":1660171458,"answer_id":73313487,"question_id":73312986,"body_markdown":"The problem is `jsonObject` is not array, try to do this:\r\n```\r\njsonObject.get(&quot;1&quot;)\r\n```\r\nInstead of this:\r\n```\r\njsonObject.get(0)\r\n```","title":"Java get values from json file using simple json lib","body":"<p>The problem is <code>jsonObject</code> is not array, try to do this:</p>\n<pre><code>jsonObject.get(&quot;1&quot;)\n</code></pre>\n<p>Instead of this:</p>\n<pre><code>jsonObject.get(0)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1468853,"reputation":3627,"user_id":1380933,"display_name":"Vadik Sirekanyan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660173344,"creation_date":1660173344,"answer_id":73313690,"question_id":73312986,"body_markdown":"To get all keys of the json object simply do:\r\n```java\r\njsonObject.keySet()\r\n```\r\nIf you want to put keys to the list:\r\n```java\r\nList&lt;String&gt; keys = new ArrayList&lt;&gt;((Set&lt;String&gt;) jsonObject.keySet());\r\n```","title":"Java get values from json file using simple json lib","body":"<p>To get all keys of the json object simply do:</p>\n<pre class=\"lang-java prettyprint-override\"><code>jsonObject.keySet()\n</code></pre>\n<p>If you want to put keys to the list:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; keys = new ArrayList&lt;&gt;((Set&lt;String&gt;) jsonObject.keySet());\n</code></pre>\n"}],"owner":{"account_id":11169687,"reputation":11,"user_id":8197094,"display_name":"Ayham Ahmad"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73313487,"answer_count":2,"score":0,"last_activity_date":1660229397,"creation_date":1660167336,"question_id":73312986,"body_markdown":"I have json file with this format:\r\n```json\r\n{\r\n  &quot;1&quot;: {\r\n    &quot;path&quot;: [&quot;C&quot;],\r\n    &quot;Des&quot;: [&quot;D&quot;]\r\n  },\r\n  &quot;2&quot;: {\r\n    &quot;path&quot;: [&quot;A&quot;],\r\n    &quot;Des&quot;: [&quot;D&quot;]\r\n  },\r\n  &quot;3&quot;: {\r\n    &quot;path&quot;: [&quot;C&quot;],\r\n    &quot;Des&quot;: [&quot;B&quot;]\r\n  }\r\n}\r\n```\r\n   \r\n\r\n I want to get values in class objects \r\n    and using this code to see result before added it to arraylist\r\n    objects \r\n    \r\n```java\r\nimport java.io.FileReader;\r\nimport org.json.simple.JSONObject;\r\nimport org.json.simple.parser.JSONParser;\r\n\r\npublic class test2 {\r\n    public static void main(String[] args) {\r\n        JSONParser parser = new JSONParser();\r\n        try {\r\n            Object obj = parser.parse(new FileReader(&quot;C:/Users/dell/Desktop/streams.json&quot;));\r\n            JSONObject jsonObject = (JSONObject) obj;\r\n            JSONObject json0 = (JSONObject) jsonObject.get(0);\r\n            System.out.println(json0);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```","title":"Java get values from json file using simple json lib","body":"<p>I have json file with this format:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;1&quot;: {\n    &quot;path&quot;: [&quot;C&quot;],\n    &quot;Des&quot;: [&quot;D&quot;]\n  },\n  &quot;2&quot;: {\n    &quot;path&quot;: [&quot;A&quot;],\n    &quot;Des&quot;: [&quot;D&quot;]\n  },\n  &quot;3&quot;: {\n    &quot;path&quot;: [&quot;C&quot;],\n    &quot;Des&quot;: [&quot;B&quot;]\n  }\n}\n</code></pre>\n<p>I want to get values in class objects\nand using this code to see result before added it to arraylist\nobjects</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.FileReader;\nimport org.json.simple.JSONObject;\nimport org.json.simple.parser.JSONParser;\n\npublic class test2 {\n    public static void main(String[] args) {\n        JSONParser parser = new JSONParser();\n        try {\n            Object obj = parser.parse(new FileReader(&quot;C:/Users/dell/Desktop/streams.json&quot;));\n            JSONObject jsonObject = (JSONObject) obj;\n            JSONObject json0 = (JSONObject) jsonObject.get(0);\n            System.out.println(json0);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","mysql","spring","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"score":0,"creation_date":1660065331,"post_id":73294700,"comment_id":129443071,"body_markdown":"Can you post `CreditRating` entity?","body":"Can you post <code>CreditRating</code> entity?"},{"owner":{"account_id":26020646,"reputation":23,"user_id":19728398,"display_name":"Ege Coskun"},"score":0,"creation_date":1660067101,"post_id":73294700,"comment_id":129443640,"body_markdown":"@Pp88 I edited the question. Can you please check?","body":"@Pp88 I edited the question. Can you please check?"},{"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"score":0,"creation_date":1660068580,"post_id":73294700,"comment_id":129444128,"body_markdown":"How are you generating your ids with a sequence? Have you set autoincrecment column on database? Witch database are you using?","body":"How are you generating your ids with a sequence? Have you set autoincrecment column on database? Witch database are you using?"},{"owner":{"account_id":26020646,"reputation":23,"user_id":19728398,"display_name":"Ege Coskun"},"score":0,"creation_date":1660072049,"post_id":73294700,"comment_id":129445212,"body_markdown":"Using MySQL. JPA automatically creates the tables. @Pp88","body":"Using MySQL. JPA automatically creates the tables. @Pp88"},{"owner":{"account_id":22443986,"reputation":2042,"user_id":16648127,"display_name":"Enfield Li"},"score":0,"creation_date":1660216053,"post_id":73294700,"comment_id":129482889,"body_markdown":"It doesn&#39;t seemed there&#39;s anything wrong with existing code, have you log out the result of `creditRatingService.create()` and see if id is generated and check db to see if data is persisted as well.","body":"It doesn&#39;t seemed there&#39;s anything wrong with existing code, have you log out the result of <code>creditRatingService.create()</code> and see if id is generated and check db to see if data is persisted as well."}],"answers":[{"tags":[],"owner":{"account_id":26020646,"reputation":23,"user_id":19728398,"display_name":"Ege Coskun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660229228,"creation_date":1660229228,"answer_id":73322680,"question_id":73294700,"body_markdown":"I figured out the problem. Problem was in database creditRating and credit somehow didn&#39;t have Auto Increment ticked. I dropped the schema then let JPA create the tables again. Then Auto Increment was both ticked on credit and creditRating tables.","title":"Field &#39;id&#39; doesn&#39;t have a default value because of nested object creation","body":"<p>I figured out the problem. Problem was in database creditRating and credit somehow didn't have Auto Increment ticked. I dropped the schema then let JPA create the tables again. Then Auto Increment was both ticked on credit and creditRating tables.</p>\n"}],"owner":{"account_id":26020646,"reputation":23,"user_id":19728398,"display_name":"Ege Coskun"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":316,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1660229228,"creation_date":1660060284,"question_id":73294700,"body_markdown":"I am getting field &#39;id&#39; doesn&#39;t have a default value error in my Spring application.\r\nI am trying to create an Applicant with @Post method but as I am creating the Applicant, new creditRating object needs to be created.\r\n\r\nHere is the method\r\n\r\n```\r\n public Applicant create(ApplicantDTO applicantDTO) {\r\n        Applicant applicant = ApplicantMapper.toEntity(applicantDTO);\r\n        applicant.setCreditRating(creditRatingService.create());\r\n        return applicantRepository.save(applicant);\r\n    }\r\n```\r\nHere is my Applicant class\r\n```\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;applicant&quot;)\r\npublic class Applicant {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    private Long identificationNumber;\r\n    private String firstName;\r\n    private String lastName;\r\n    private double monthlyIncome;\r\n    private String phoneNumber;\r\n\r\n    @OneToOne(cascade = CascadeType.ALL)\r\n    @JoinColumn(name = &quot;credit_rating_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    private CreditRating creditRating;\r\n\r\n    @OneToOne(cascade = CascadeType.ALL)\r\n    @JoinTable(name = &quot;applicant_credit&quot;,\r\n            joinColumns = {@JoinColumn(name = &quot;applicant_id&quot;)},\r\n            inverseJoinColumns = {@JoinColumn(name = &quot;credit_id&quot;)}\r\n    )\r\n    private Credit credit;\r\n\r\n\r\n}\r\n```\r\nAnd this is the create method for CreditRating object.\r\n```\r\n public CreditRating create() {\r\n        CreditRating creditRating = new CreditRating();\r\n        creditRating.setCreditRating(getRandomCreditRating());\r\n        return creditRatingRepository.save(creditRating);\r\n    }\r\n```\r\n\r\nI want this object to be created while creating an Applicant but somehow I think JPA can&#39;t generate the id for it as I am doing the creation like this.\r\n\r\nAs requested here is CreditRating Entity\r\n\r\n```\r\n@Data\r\n@Entity\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Table(name = &quot;credit_rating&quot;)\r\npublic class CreditRating {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    private int creditRating;\r\n\r\n}\r\n```","title":"Field &#39;id&#39; doesn&#39;t have a default value because of nested object creation","body":"<p>I am getting field 'id' doesn't have a default value error in my Spring application.\nI am trying to create an Applicant with @Post method but as I am creating the Applicant, new creditRating object needs to be created.</p>\n<p>Here is the method</p>\n<pre><code> public Applicant create(ApplicantDTO applicantDTO) {\n        Applicant applicant = ApplicantMapper.toEntity(applicantDTO);\n        applicant.setCreditRating(creditRatingService.create());\n        return applicantRepository.save(applicant);\n    }\n</code></pre>\n<p>Here is my Applicant class</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;applicant&quot;)\npublic class Applicant {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private Long identificationNumber;\n    private String firstName;\n    private String lastName;\n    private double monthlyIncome;\n    private String phoneNumber;\n\n    @OneToOne(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;credit_rating_id&quot;, referencedColumnName = &quot;id&quot;)\n    private CreditRating creditRating;\n\n    @OneToOne(cascade = CascadeType.ALL)\n    @JoinTable(name = &quot;applicant_credit&quot;,\n            joinColumns = {@JoinColumn(name = &quot;applicant_id&quot;)},\n            inverseJoinColumns = {@JoinColumn(name = &quot;credit_id&quot;)}\n    )\n    private Credit credit;\n\n\n}\n</code></pre>\n<p>And this is the create method for CreditRating object.</p>\n<pre><code> public CreditRating create() {\n        CreditRating creditRating = new CreditRating();\n        creditRating.setCreditRating(getRandomCreditRating());\n        return creditRatingRepository.save(creditRating);\n    }\n</code></pre>\n<p>I want this object to be created while creating an Applicant but somehow I think JPA can't generate the id for it as I am doing the creation like this.</p>\n<p>As requested here is CreditRating Entity</p>\n<pre><code>@Data\n@Entity\n@AllArgsConstructor\n@NoArgsConstructor\n@Table(name = &quot;credit_rating&quot;)\npublic class CreditRating {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    private int creditRating;\n\n}\n</code></pre>\n"},{"tags":["java","spring-boot","maven","maven-plugin","maven-jar-plugin"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1660208219,"post_id":73317606,"comment_id":129480187,"body_markdown":"The output of `mvn -v` looks strange because on my system it starts with: `Apache Maven 3.8.4 (9b656c72d54e5bacbed989b64718c159fe39b537)` ...also the full log output of the whole build would be helpful...","body":"The output of <code>mvn -v</code> looks strange because on my system it starts with: <code>Apache Maven 3.8.4 (9b656c72d54e5bacbed989b64718c159fe39b537)</code> ...also the full log output of the whole build would be helpful..."},{"owner":{"account_id":4635391,"reputation":1131,"user_id":3756780,"display_name":"slindenau"},"score":0,"creation_date":1660211185,"post_id":73317606,"comment_id":129481293,"body_markdown":"This class is coming from the `maven-archiver` jar, which should be a dependency of the `maven-jar-plugin`. Can you check in the build log with debug enabled (`-X`) what the resolved dependency list of your jar plugin looks like?","body":"This class is coming from the <code>maven-archiver</code> jar, which should be a dependency of the <code>maven-jar-plugin</code>. Can you check in the build log with debug enabled (<code>-X</code>) what the resolved dependency list of your jar plugin looks like?"},{"owner":{"account_id":2908204,"reputation":1283,"user_id":2493020,"accept_rate":67,"display_name":"Abdul Mohsin"},"score":0,"creation_date":1660214386,"post_id":73317606,"comment_id":129482366,"body_markdown":"I&#39;ve added the build logs running the command with -X option","body":"I&#39;ve added the build logs running the command with -X option"},{"owner":{"account_id":4635391,"reputation":1131,"user_id":3756780,"display_name":"slindenau"},"score":1,"creation_date":1660217357,"post_id":73317606,"comment_id":129483335,"body_markdown":"I suspect there is something wrong with the jars in your local `.m2` directory. Can you remove `.m2\\repository\\org\\apache\\maven\\plugins` and try again?","body":"I suspect there is something wrong with the jars in your local <code>.m2</code> directory. Can you remove <code>.m2\\repository\\org\\apache\\maven\\plugins</code> and try again?"}],"answers":[{"tags":[],"owner":{"account_id":4635391,"reputation":1131,"user_id":3756780,"display_name":"slindenau"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660228927,"creation_date":1660228927,"answer_id":73322602,"question_id":73317606,"body_markdown":"You can run the maven build command with argument `-X` to enable debug logging.\r\n\r\nNormally the class `MavenArchiveConfiguration` is loaded from `maven-archiver`, which is a dependency of the `maven-jar-plugin`. These dependencies are managed in the plugins&#39; pom file, and loaded by the maven build process from that pom.\r\n\r\nWhen i locally modify the pom file for this plugin (remove all `dependencies`) then i can reproduce this error message. This leads me to believe there is something wrong with your downloaded copy.\r\n\r\nAs a solution you can remove the contents of `.m2\\repository\\org\\apache\\maven\\plugins\\` and `.m2\\repository\\org\\apache\\maven\\maven-archiver` and try your build again, then all correct plugin files and dependencies should be downloaded again from maven central.\r\n\r\nThen you should find the jar+pom files for the plugin + dependency in your local .m2 folder: `.m2\\repository\\org\\apache\\maven\\plugins\\maven-jar-plugin\\3.2.0` and `.m2\\repository\\org\\apache\\maven\\maven-archiver\\3.5.0`. You can also look in those folders for the `_remote.repositories` file to check for any download issues.\r\n\r\nYou can also check if you have any custom `pluginRepositories` configured that may be providing you with corrupt jar/pom files. You can see your entire pom file by running `mvn help:effective-pom`.\r\n\r\nNormally that should include the following from the [super pom](https://maven.apache.org/ref/3.8.5/maven-model-builder/super-pom.html):\r\n```lang-xml\r\n  &lt;pluginRepositories&gt;\r\n    &lt;pluginRepository&gt;\r\n      &lt;releases&gt;\r\n        &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\r\n      &lt;/releases&gt;\r\n      &lt;snapshots&gt;\r\n        &lt;enabled&gt;false&lt;/enabled&gt;\r\n      &lt;/snapshots&gt;\r\n      &lt;id&gt;central&lt;/id&gt;\r\n      &lt;name&gt;Central Repository&lt;/name&gt;\r\n      &lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt;\r\n    &lt;/pluginRepository&gt;\r\n  &lt;/pluginRepositories&gt;\r\n```\r\n\r\nMore extreme measures could be to download a newer version of maven, or clear your entire local `.m2` (create a backup if you have important files in there).\r\n\r\nThose would be the places to look to resolve this issue.","title":"A required class was missing while executing org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar","body":"<p>You can run the maven build command with argument <code>-X</code> to enable debug logging.</p>\n<p>Normally the class <code>MavenArchiveConfiguration</code> is loaded from <code>maven-archiver</code>, which is a dependency of the <code>maven-jar-plugin</code>. These dependencies are managed in the plugins' pom file, and loaded by the maven build process from that pom.</p>\n<p>When i locally modify the pom file for this plugin (remove all <code>dependencies</code>) then i can reproduce this error message. This leads me to believe there is something wrong with your downloaded copy.</p>\n<p>As a solution you can remove the contents of <code>.m2\\repository\\org\\apache\\maven\\plugins\\</code> and <code>.m2\\repository\\org\\apache\\maven\\maven-archiver</code> and try your build again, then all correct plugin files and dependencies should be downloaded again from maven central.</p>\n<p>Then you should find the jar+pom files for the plugin + dependency in your local .m2 folder: <code>.m2\\repository\\org\\apache\\maven\\plugins\\maven-jar-plugin\\3.2.0</code> and <code>.m2\\repository\\org\\apache\\maven\\maven-archiver\\3.5.0</code>. You can also look in those folders for the <code>_remote.repositories</code> file to check for any download issues.</p>\n<p>You can also check if you have any custom <code>pluginRepositories</code> configured that may be providing you with corrupt jar/pom files. You can see your entire pom file by running <code>mvn help:effective-pom</code>.</p>\n<p>Normally that should include the following from the <a href=\"https://maven.apache.org/ref/3.8.5/maven-model-builder/super-pom.html\" rel=\"nofollow noreferrer\">super pom</a>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;pluginRepositories&gt;\n    &lt;pluginRepository&gt;\n      &lt;releases&gt;\n        &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\n      &lt;/releases&gt;\n      &lt;snapshots&gt;\n        &lt;enabled&gt;false&lt;/enabled&gt;\n      &lt;/snapshots&gt;\n      &lt;id&gt;central&lt;/id&gt;\n      &lt;name&gt;Central Repository&lt;/name&gt;\n      &lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt;\n    &lt;/pluginRepository&gt;\n  &lt;/pluginRepositories&gt;\n</code></pre>\n<p>More extreme measures could be to download a newer version of maven, or clear your entire local <code>.m2</code> (create a backup if you have important files in there).</p>\n<p>Those would be the places to look to resolve this issue.</p>\n"}],"owner":{"account_id":2908204,"reputation":1283,"user_id":2493020,"accept_rate":67,"display_name":"Abdul Mohsin"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1455,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73322602,"answer_count":1,"score":2,"last_activity_date":1660228927,"creation_date":1660206641,"question_id":73317606,"body_markdown":"When I run `mvn clean install` on my maven project, It is giving me the below error\r\n\r\n    [INFO] --- maven-jar-plugin:3.2.0:jar (default-jar) @ commons ---\r\n    [DEBUG] Dependency collection stats {ConflictMarker.analyzeTime=6375, ConflictMarker.markTime=11066, ConflictMarker.nodeCount=1, ConflictIdSorter.graphTime=2217, ConflictIdSorter.topsortTime=5579, ConflictIdSorter.conflictIdCount=1, ConflictIdSorter.conflictIdCycleCount=0, ConflictResolver.totalTime=36123, ConflictResolver.conflictItemCount=1, DefaultDependencyCollector.collectTime=1274402, DefaultDependencyCollector.transformTime=94657}\r\n    [DEBUG] org.apache.maven.plugins:maven-jar-plugin:jar:3.2.0\r\n    [DEBUG]    org.codehaus.plexus:plexus-utils:jar:1.1:runtime\r\n    [DEBUG] Created new class realm plugin&gt;org.apache.maven.plugins:maven-jar-plugin:3.2.0\r\n    [DEBUG] Importing foreign packages into class realm plugin&gt;org.apache.maven.plugins:maven-jar-plugin:3.2.0\r\n    [DEBUG]   Imported:  &lt; maven.api\r\n    [DEBUG] Populating class realm plugin&gt;org.apache.maven.plugins:maven-jar-plugin:3.2.0\r\n    [DEBUG]   Included: org.apache.maven.plugins:maven-jar-plugin:jar:3.2.0\r\n    [DEBUG]   Included: org.codehaus.plexus:plexus-utils:jar:1.1\r\n    [DEBUG] Configuring mojo org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar from plugin realm ClassRealm[plugin&gt;org.apache.maven.plugins:maven-jar-plugin:3.2.0, parent: jdk.internal.loader.ClassLoaders$AppClassLoader@4b85612c]\r\n    [WARNING] Error injecting: org.apache.maven.plugins.jar.JarMojo\r\n    java.lang.NoClassDefFoundError: Lorg/apache/maven/archiver/MavenArchiveConfiguration;\r\n        at java.lang.Class.getDeclaredFields0 (Native Method)\r\n        at java.lang.Class.privateGetDeclaredFields (Class.java:3061)\r\n        at java.lang.Class.getDeclaredFields (Class.java:2248)\r\n        at com.google.inject.spi.InjectionPoint.getDeclaredFields (InjectionPoint.java:760)\r\n        at com.google.inject.spi.InjectionPoint.getInjectionPoints (InjectionPoint.java:670)\r\n        at com.google.inject.spi.InjectionPoint.forInstanceMethodsAndFields (InjectionPoint.java:378)\r\n        at com.google.inject.internal.ConstructorBindingImpl.getInternalDependencies (ConstructorBindingImpl.java:182)\r\n        at com.google.inject.internal.InjectorImpl.getInternalDependencies (InjectorImpl.java:661)\r\n        at com.google.inject.internal.InjectorImpl.cleanup (InjectorImpl.java:617)\r\n        at com.google.inject.internal.InjectorImpl.initializeJitBinding (InjectorImpl.java:603)\r\n        at com.google.inject.internal.InjectorImpl.createJustInTimeBinding (InjectorImpl.java:932)\r\n        at com.google.inject.internal.InjectorImpl.createJustInTimeBindingRecursive (InjectorImpl.java:852)\r\n        at com.google.inject.internal.InjectorImpl.getJustInTimeBinding (InjectorImpl.java:291)\r\n        at com.google.inject.internal.InjectorImpl.getBindingOrThrow (InjectorImpl.java:222)\r\n        at com.google.inject.internal.InjectorImpl.getProviderOrThrow (InjectorImpl.java:1040)\r\n        at com.google.inject.internal.InjectorImpl.getProvider (InjectorImpl.java:1071)\r\n        at com.google.inject.internal.InjectorImpl.getProvider (InjectorImpl.java:1034)\r\n        at com.google.inject.internal.InjectorImpl.getInstance (InjectorImpl.java:1086)\r\n        at org.eclipse.sisu.space.AbstractDeferredClass.get (AbstractDeferredClass.java:48)\r\n        at com.google.inject.internal.ProviderInternalFactory.provision (ProviderInternalFactory.java:85)\r\n        at com.google.inject.internal.InternalFactoryToInitializableAdapter.provision (InternalFactoryToInitializableAdapter.java:57)\r\n        at com.google.inject.internal.ProviderInternalFactory$1.call (ProviderInternalFactory.java:66)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:112)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:127)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback.provision (ProvisionListenerStackCallback.java:66)\r\n        at com.google.inject.internal.ProviderInternalFactory.circularGet (ProviderInternalFactory.java:61)\r\n        at com.google.inject.internal.InternalFactoryToInitializableAdapter.get (InternalFactoryToInitializableAdapter.java:47)\r\n        at com.google.inject.internal.InjectorImpl$1.get (InjectorImpl.java:1050)\r\n        at org.eclipse.sisu.inject.Guice4$1.get (Guice4.java:162)\r\n        at org.eclipse.sisu.inject.LazyBeanEntry.getValue (LazyBeanEntry.java:81)\r\n        at org.eclipse.sisu.plexus.LazyPlexusBean.getValue (LazyPlexusBean.java:51)\r\n        at org.codehaus.plexus.DefaultPlexusContainer.lookup (DefaultPlexusContainer.java:263)\r\n        at org.codehaus.plexus.DefaultPlexusContainer.lookup (DefaultPlexusContainer.java:255)\r\n        at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getConfiguredMojo (DefaultMavenPluginManager.java:520)\r\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:124)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\r\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke (Method.java:566)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n    Caused by: java.lang.ClassNotFoundException: org.apache.maven.archiver.MavenArchiveConfiguration\r\n        at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass (SelfFirstStrategy.java:50)\r\n        at org.codehaus.plexus.classworlds.realm.ClassRealm.unsynchronizedLoadClass (ClassRealm.java:271)\r\n        at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass (ClassRealm.java:247)\r\n        at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass (ClassRealm.java:239)\r\n        at java.lang.Class.getDeclaredFields0 (Native Method)\r\n        at java.lang.Class.privateGetDeclaredFields (Class.java:3061)\r\n        at java.lang.Class.getDeclaredFields (Class.java:2248)\r\n        at com.google.inject.spi.InjectionPoint.getDeclaredFields (InjectionPoint.java:760)\r\n        at com.google.inject.spi.InjectionPoint.getInjectionPoints (InjectionPoint.java:670)\r\n        at com.google.inject.spi.InjectionPoint.forInstanceMethodsAndFields (InjectionPoint.java:378)\r\n        at com.google.inject.internal.ConstructorBindingImpl.getInternalDependencies (ConstructorBindingImpl.java:182)\r\n        at com.google.inject.internal.InjectorImpl.getInternalDependencies (InjectorImpl.java:661)\r\n        at com.google.inject.internal.InjectorImpl.cleanup (InjectorImpl.java:617)\r\n        at com.google.inject.internal.InjectorImpl.initializeJitBinding (InjectorImpl.java:603)\r\n        at com.google.inject.internal.InjectorImpl.createJustInTimeBinding (InjectorImpl.java:932)\r\n        at com.google.inject.internal.InjectorImpl.createJustInTimeBindingRecursive (InjectorImpl.java:852)\r\n        at com.google.inject.internal.InjectorImpl.getJustInTimeBinding (InjectorImpl.java:291)\r\n        at com.google.inject.internal.InjectorImpl.getBindingOrThrow (InjectorImpl.java:222)\r\n        at com.google.inject.internal.InjectorImpl.getProviderOrThrow (InjectorImpl.java:1040)\r\n        at com.google.inject.internal.InjectorImpl.getProvider (InjectorImpl.java:1071)\r\n        at com.google.inject.internal.InjectorImpl.getProvider (InjectorImpl.java:1034)\r\n        at com.google.inject.internal.InjectorImpl.getInstance (InjectorImpl.java:1086)\r\n        at org.eclipse.sisu.space.AbstractDeferredClass.get (AbstractDeferredClass.java:48)\r\n        at com.google.inject.internal.ProviderInternalFactory.provision (ProviderInternalFactory.java:85)\r\n        at com.google.inject.internal.InternalFactoryToInitializableAdapter.provision (InternalFactoryToInitializableAdapter.java:57)\r\n        at com.google.inject.internal.ProviderInternalFactory$1.call (ProviderInternalFactory.java:66)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:112)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:127)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback.provision (ProvisionListenerStackCallback.java:66)\r\n        at com.google.inject.internal.ProviderInternalFactory.circularGet (ProviderInternalFactory.java:61)\r\n        at com.google.inject.internal.InternalFactoryToInitializableAdapter.get (InternalFactoryToInitializableAdapter.java:47)\r\n        at com.google.inject.internal.InjectorImpl$1.get (InjectorImpl.java:1050)\r\n        at org.eclipse.sisu.inject.Guice4$1.get (Guice4.java:162)\r\n        at org.eclipse.sisu.inject.LazyBeanEntry.getValue (LazyBeanEntry.java:81)\r\n        at org.eclipse.sisu.plexus.LazyPlexusBean.getValue (LazyPlexusBean.java:51)\r\n        at org.codehaus.plexus.DefaultPlexusContainer.lookup (DefaultPlexusContainer.java:263)\r\n        at org.codehaus.plexus.DefaultPlexusContainer.lookup (DefaultPlexusContainer.java:255)\r\n        at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getConfiguredMojo (DefaultMavenPluginManager.java:520)\r\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:124)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\r\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke (Method.java:566)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  4.532 s\r\n    [INFO] Finished at: 2022-08-11T16:02:56+05:30\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar (default-jar) on project commons: Execution default-jar of goal org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar failed: A required class was missing while executing org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar: Lorg/apache/maven/archiver/MavenArchiveConfiguration;\r\n    [ERROR] -----------------------------------------------------\r\n    [ERROR] realm =    plugin&gt;org.apache.maven.plugins:maven-jar-plugin:3.2.0\r\n    [ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy\r\n    [ERROR] urls[0] = file:/Users/abdul/.m2/repository/org/apache/maven/plugins/maven-jar-plugin/3.2.0/maven-jar-plugin-3.2.0.jar\r\n    [ERROR] urls[1] = file:/Users/abdul/.m2/repository/org/codehaus/plexus/plexus-utils/1.1/plexus-utils-1.1.jar\r\n    [ERROR] Number of foreign imports: 1\r\n    [ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]]\r\n    [ERROR] \r\n    [ERROR] -----------------------------------------------------\r\n    [ERROR] : org.apache.maven.archiver.MavenArchiveConfiguration\r\n    [ERROR] -&gt; [Help 1]\r\n    org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar (default-jar) on project commons: Execution default-jar of goal org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar failed: A required class was missing while executing org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar: Lorg/apache/maven/archiver/MavenArchiveConfiguration;\r\n    -----------------------------------------------------\r\n    realm =    plugin&gt;org.apache.maven.plugins:maven-jar-plugin:3.2.0\r\n    strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy\r\n    urls[0] = file:/Users/abdul/.m2/repository/org/apache/maven/plugins/maven-jar-plugin/3.2.0/maven-jar-plugin-3.2.0.jar\r\n    urls[1] = file:/Users/abdul/.m2/repository/org/codehaus/plexus/plexus-utils/1.1/plexus-utils-1.1.jar\r\n    Number of foreign imports: 1\r\n    import: Entry[import  from realm ClassRealm[maven.api, parent: null]]\r\n    \r\n    -----------------------------------------------------\r\n    \r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\r\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke (Method.java:566)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n    Caused by: org.apache.maven.plugin.PluginExecutionException: Execution default-jar of goal org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar failed: A required class was missing while executing org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar: Lorg/apache/maven/archiver/MavenArchiveConfiguration;\r\n    -----------------------------------------------------\r\n    realm =    plugin&gt;org.apache.maven.plugins:maven-jar-plugin:3.2.0\r\n    strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy\r\n    urls[0] = file:/Users/abdul/.m2/repository/org/apache/maven/plugins/maven-jar-plugin/3.2.0/maven-jar-plugin-3.2.0.jar\r\n    urls[1] = file:/Users/abdul/.m2/repository/org/codehaus/plexus/plexus-utils/1.1/plexus-utils-1.1.jar\r\n    Number of foreign imports: 1\r\n    import: Entry[import  from realm ClassRealm[maven.api, parent: null]]\r\n        \r\n    \r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar (default-jar) on project commons: Execution default-jar of goal org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar failed: A required class was missing while executing org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar: Lorg/apache/maven/archiver/MavenArchiveConfiguration;\r\n        [ERROR] -----------------------------------------------------\r\n        [ERROR] realm =    plugin&gt;org.apache.maven.plugins:maven-jar-plugin:3.2.0\r\n        [ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy\r\n        [ERROR] urls[0] = file:/Users/abdul/.m2/repository/org/apache/maven/plugins/maven-jar-plugin/3.2.0/maven-jar-plugin-3.2.0.jar\r\n        [ERROR] urls[1] = file:/Users/abdul/.m2/repository/org/codehaus/plexus/plexus-utils/1.1/plexus-utils-1.1.jar\r\n        [ERROR] Number of foreign imports: 1\r\n        [ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]]\r\n        [ERROR] \r\n        [ERROR] -----------------------------------------------------\r\n\r\nMy `pom.xml` Have\r\n\r\n \r\n\r\n        &lt;properties&gt;\r\n            &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n        &lt;/properties&gt;\r\n       \r\n        // dependencies section here\r\n\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;skip&gt;true&lt;/skip&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n\r\n\r\n\r\n`mvn -v` output\r\n\r\n    Apache Maven 3.8.4\r\n    Maven home: /Users/abdul/apache-maven-3.8.4\r\n    Java version: 11.0.13, vendor: Oracle Corporation, runtime: /Users/abdul/jdk-11.0.13.jdk/Contents/Home\r\n    Default locale: en_GB, platform encoding: UTF-8\r\n    OS name: &quot;mac os x&quot;, version: &quot;11.5&quot;, arch: &quot;x86_64&quot;, family: &quot;mac&quot;\r\n\r\n`java -version` output\r\n\r\n    java version &quot;11.0.13&quot; 2021-10-19 LTS\r\n    Java(TM) SE Runtime Environment 18.9 (build 11.0.13+10-LTS-370)\r\n    Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.13+10-LTS-370, mixed mode)\r\n\r\n","title":"A required class was missing while executing org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar","body":"<p>When I run <code>mvn clean install</code> on my maven project, It is giving me the below error</p>\n<pre><code>[INFO] --- maven-jar-plugin:3.2.0:jar (default-jar) @ commons ---\n[DEBUG] Dependency collection stats {ConflictMarker.analyzeTime=6375, ConflictMarker.markTime=11066, ConflictMarker.nodeCount=1, ConflictIdSorter.graphTime=2217, ConflictIdSorter.topsortTime=5579, ConflictIdSorter.conflictIdCount=1, ConflictIdSorter.conflictIdCycleCount=0, ConflictResolver.totalTime=36123, ConflictResolver.conflictItemCount=1, DefaultDependencyCollector.collectTime=1274402, DefaultDependencyCollector.transformTime=94657}\n[DEBUG] org.apache.maven.plugins:maven-jar-plugin:jar:3.2.0\n[DEBUG]    org.codehaus.plexus:plexus-utils:jar:1.1:runtime\n[DEBUG] Created new class realm plugin&gt;org.apache.maven.plugins:maven-jar-plugin:3.2.0\n[DEBUG] Importing foreign packages into class realm plugin&gt;org.apache.maven.plugins:maven-jar-plugin:3.2.0\n[DEBUG]   Imported:  &lt; maven.api\n[DEBUG] Populating class realm plugin&gt;org.apache.maven.plugins:maven-jar-plugin:3.2.0\n[DEBUG]   Included: org.apache.maven.plugins:maven-jar-plugin:jar:3.2.0\n[DEBUG]   Included: org.codehaus.plexus:plexus-utils:jar:1.1\n[DEBUG] Configuring mojo org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar from plugin realm ClassRealm[plugin&gt;org.apache.maven.plugins:maven-jar-plugin:3.2.0, parent: jdk.internal.loader.ClassLoaders$AppClassLoader@4b85612c]\n[WARNING] Error injecting: org.apache.maven.plugins.jar.JarMojo\njava.lang.NoClassDefFoundError: Lorg/apache/maven/archiver/MavenArchiveConfiguration;\n    at java.lang.Class.getDeclaredFields0 (Native Method)\n    at java.lang.Class.privateGetDeclaredFields (Class.java:3061)\n    at java.lang.Class.getDeclaredFields (Class.java:2248)\n    at com.google.inject.spi.InjectionPoint.getDeclaredFields (InjectionPoint.java:760)\n    at com.google.inject.spi.InjectionPoint.getInjectionPoints (InjectionPoint.java:670)\n    at com.google.inject.spi.InjectionPoint.forInstanceMethodsAndFields (InjectionPoint.java:378)\n    at com.google.inject.internal.ConstructorBindingImpl.getInternalDependencies (ConstructorBindingImpl.java:182)\n    at com.google.inject.internal.InjectorImpl.getInternalDependencies (InjectorImpl.java:661)\n    at com.google.inject.internal.InjectorImpl.cleanup (InjectorImpl.java:617)\n    at com.google.inject.internal.InjectorImpl.initializeJitBinding (InjectorImpl.java:603)\n    at com.google.inject.internal.InjectorImpl.createJustInTimeBinding (InjectorImpl.java:932)\n    at com.google.inject.internal.InjectorImpl.createJustInTimeBindingRecursive (InjectorImpl.java:852)\n    at com.google.inject.internal.InjectorImpl.getJustInTimeBinding (InjectorImpl.java:291)\n    at com.google.inject.internal.InjectorImpl.getBindingOrThrow (InjectorImpl.java:222)\n    at com.google.inject.internal.InjectorImpl.getProviderOrThrow (InjectorImpl.java:1040)\n    at com.google.inject.internal.InjectorImpl.getProvider (InjectorImpl.java:1071)\n    at com.google.inject.internal.InjectorImpl.getProvider (InjectorImpl.java:1034)\n    at com.google.inject.internal.InjectorImpl.getInstance (InjectorImpl.java:1086)\n    at org.eclipse.sisu.space.AbstractDeferredClass.get (AbstractDeferredClass.java:48)\n    at com.google.inject.internal.ProviderInternalFactory.provision (ProviderInternalFactory.java:85)\n    at com.google.inject.internal.InternalFactoryToInitializableAdapter.provision (InternalFactoryToInitializableAdapter.java:57)\n    at com.google.inject.internal.ProviderInternalFactory$1.call (ProviderInternalFactory.java:66)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:112)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:127)\n    at com.google.inject.internal.ProvisionListenerStackCallback.provision (ProvisionListenerStackCallback.java:66)\n    at com.google.inject.internal.ProviderInternalFactory.circularGet (ProviderInternalFactory.java:61)\n    at com.google.inject.internal.InternalFactoryToInitializableAdapter.get (InternalFactoryToInitializableAdapter.java:47)\n    at com.google.inject.internal.InjectorImpl$1.get (InjectorImpl.java:1050)\n    at org.eclipse.sisu.inject.Guice4$1.get (Guice4.java:162)\n    at org.eclipse.sisu.inject.LazyBeanEntry.getValue (LazyBeanEntry.java:81)\n    at org.eclipse.sisu.plexus.LazyPlexusBean.getValue (LazyPlexusBean.java:51)\n    at org.codehaus.plexus.DefaultPlexusContainer.lookup (DefaultPlexusContainer.java:263)\n    at org.codehaus.plexus.DefaultPlexusContainer.lookup (DefaultPlexusContainer.java:255)\n    at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getConfiguredMojo (DefaultMavenPluginManager.java:520)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:124)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:566)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\nCaused by: java.lang.ClassNotFoundException: org.apache.maven.archiver.MavenArchiveConfiguration\n    at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass (SelfFirstStrategy.java:50)\n    at org.codehaus.plexus.classworlds.realm.ClassRealm.unsynchronizedLoadClass (ClassRealm.java:271)\n    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass (ClassRealm.java:247)\n    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass (ClassRealm.java:239)\n    at java.lang.Class.getDeclaredFields0 (Native Method)\n    at java.lang.Class.privateGetDeclaredFields (Class.java:3061)\n    at java.lang.Class.getDeclaredFields (Class.java:2248)\n    at com.google.inject.spi.InjectionPoint.getDeclaredFields (InjectionPoint.java:760)\n    at com.google.inject.spi.InjectionPoint.getInjectionPoints (InjectionPoint.java:670)\n    at com.google.inject.spi.InjectionPoint.forInstanceMethodsAndFields (InjectionPoint.java:378)\n    at com.google.inject.internal.ConstructorBindingImpl.getInternalDependencies (ConstructorBindingImpl.java:182)\n    at com.google.inject.internal.InjectorImpl.getInternalDependencies (InjectorImpl.java:661)\n    at com.google.inject.internal.InjectorImpl.cleanup (InjectorImpl.java:617)\n    at com.google.inject.internal.InjectorImpl.initializeJitBinding (InjectorImpl.java:603)\n    at com.google.inject.internal.InjectorImpl.createJustInTimeBinding (InjectorImpl.java:932)\n    at com.google.inject.internal.InjectorImpl.createJustInTimeBindingRecursive (InjectorImpl.java:852)\n    at com.google.inject.internal.InjectorImpl.getJustInTimeBinding (InjectorImpl.java:291)\n    at com.google.inject.internal.InjectorImpl.getBindingOrThrow (InjectorImpl.java:222)\n    at com.google.inject.internal.InjectorImpl.getProviderOrThrow (InjectorImpl.java:1040)\n    at com.google.inject.internal.InjectorImpl.getProvider (InjectorImpl.java:1071)\n    at com.google.inject.internal.InjectorImpl.getProvider (InjectorImpl.java:1034)\n    at com.google.inject.internal.InjectorImpl.getInstance (InjectorImpl.java:1086)\n    at org.eclipse.sisu.space.AbstractDeferredClass.get (AbstractDeferredClass.java:48)\n    at com.google.inject.internal.ProviderInternalFactory.provision (ProviderInternalFactory.java:85)\n    at com.google.inject.internal.InternalFactoryToInitializableAdapter.provision (InternalFactoryToInitializableAdapter.java:57)\n    at com.google.inject.internal.ProviderInternalFactory$1.call (ProviderInternalFactory.java:66)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:112)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:127)\n    at com.google.inject.internal.ProvisionListenerStackCallback.provision (ProvisionListenerStackCallback.java:66)\n    at com.google.inject.internal.ProviderInternalFactory.circularGet (ProviderInternalFactory.java:61)\n    at com.google.inject.internal.InternalFactoryToInitializableAdapter.get (InternalFactoryToInitializableAdapter.java:47)\n    at com.google.inject.internal.InjectorImpl$1.get (InjectorImpl.java:1050)\n    at org.eclipse.sisu.inject.Guice4$1.get (Guice4.java:162)\n    at org.eclipse.sisu.inject.LazyBeanEntry.getValue (LazyBeanEntry.java:81)\n    at org.eclipse.sisu.plexus.LazyPlexusBean.getValue (LazyPlexusBean.java:51)\n    at org.codehaus.plexus.DefaultPlexusContainer.lookup (DefaultPlexusContainer.java:263)\n    at org.codehaus.plexus.DefaultPlexusContainer.lookup (DefaultPlexusContainer.java:255)\n    at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getConfiguredMojo (DefaultMavenPluginManager.java:520)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:124)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:566)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  4.532 s\n[INFO] Finished at: 2022-08-11T16:02:56+05:30\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar (default-jar) on project commons: Execution default-jar of goal org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar failed: A required class was missing while executing org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar: Lorg/apache/maven/archiver/MavenArchiveConfiguration;\n[ERROR] -----------------------------------------------------\n[ERROR] realm =    plugin&gt;org.apache.maven.plugins:maven-jar-plugin:3.2.0\n[ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy\n[ERROR] urls[0] = file:/Users/abdul/.m2/repository/org/apache/maven/plugins/maven-jar-plugin/3.2.0/maven-jar-plugin-3.2.0.jar\n[ERROR] urls[1] = file:/Users/abdul/.m2/repository/org/codehaus/plexus/plexus-utils/1.1/plexus-utils-1.1.jar\n[ERROR] Number of foreign imports: 1\n[ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]]\n[ERROR] \n[ERROR] -----------------------------------------------------\n[ERROR] : org.apache.maven.archiver.MavenArchiveConfiguration\n[ERROR] -&gt; [Help 1]\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar (default-jar) on project commons: Execution default-jar of goal org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar failed: A required class was missing while executing org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar: Lorg/apache/maven/archiver/MavenArchiveConfiguration;\n-----------------------------------------------------\nrealm =    plugin&gt;org.apache.maven.plugins:maven-jar-plugin:3.2.0\nstrategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy\nurls[0] = file:/Users/abdul/.m2/repository/org/apache/maven/plugins/maven-jar-plugin/3.2.0/maven-jar-plugin-3.2.0.jar\nurls[1] = file:/Users/abdul/.m2/repository/org/codehaus/plexus/plexus-utils/1.1/plexus-utils-1.1.jar\nNumber of foreign imports: 1\nimport: Entry[import  from realm ClassRealm[maven.api, parent: null]]\n\n-----------------------------------------------------\n\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:566)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\nCaused by: org.apache.maven.plugin.PluginExecutionException: Execution default-jar of goal org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar failed: A required class was missing while executing org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar: Lorg/apache/maven/archiver/MavenArchiveConfiguration;\n-----------------------------------------------------\nrealm =    plugin&gt;org.apache.maven.plugins:maven-jar-plugin:3.2.0\nstrategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy\nurls[0] = file:/Users/abdul/.m2/repository/org/apache/maven/plugins/maven-jar-plugin/3.2.0/maven-jar-plugin-3.2.0.jar\nurls[1] = file:/Users/abdul/.m2/repository/org/codehaus/plexus/plexus-utils/1.1/plexus-utils-1.1.jar\nNumber of foreign imports: 1\nimport: Entry[import  from realm ClassRealm[maven.api, parent: null]]\n    \n\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar (default-jar) on project commons: Execution default-jar of goal org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar failed: A required class was missing while executing org.apache.maven.plugins:maven-jar-plugin:3.2.0:jar: Lorg/apache/maven/archiver/MavenArchiveConfiguration;\n    [ERROR] -----------------------------------------------------\n    [ERROR] realm =    plugin&gt;org.apache.maven.plugins:maven-jar-plugin:3.2.0\n    [ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy\n    [ERROR] urls[0] = file:/Users/abdul/.m2/repository/org/apache/maven/plugins/maven-jar-plugin/3.2.0/maven-jar-plugin-3.2.0.jar\n    [ERROR] urls[1] = file:/Users/abdul/.m2/repository/org/codehaus/plexus/plexus-utils/1.1/plexus-utils-1.1.jar\n    [ERROR] Number of foreign imports: 1\n    [ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]]\n    [ERROR] \n    [ERROR] -----------------------------------------------------\n</code></pre>\n<p>My <code>pom.xml</code> Have</p>\n<pre><code>    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n   \n    // dependencies section here\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;skip&gt;true&lt;/skip&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p><code>mvn -v</code> output</p>\n<pre><code>Apache Maven 3.8.4\nMaven home: /Users/abdul/apache-maven-3.8.4\nJava version: 11.0.13, vendor: Oracle Corporation, runtime: /Users/abdul/jdk-11.0.13.jdk/Contents/Home\nDefault locale: en_GB, platform encoding: UTF-8\nOS name: &quot;mac os x&quot;, version: &quot;11.5&quot;, arch: &quot;x86_64&quot;, family: &quot;mac&quot;\n</code></pre>\n<p><code>java -version</code> output</p>\n<pre><code>java version &quot;11.0.13&quot; 2021-10-19 LTS\nJava(TM) SE Runtime Environment 18.9 (build 11.0.13+10-LTS-370)\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.13+10-LTS-370, mixed mode)\n</code></pre>\n"},{"tags":["java","maven","jacoco","jacoco-maven-plugin"],"comments":[{"owner":{"account_id":4635391,"reputation":1131,"user_id":3756780,"display_name":"slindenau"},"score":0,"creation_date":1660212217,"post_id":73311296,"comment_id":129481637,"body_markdown":"`AgentOptions` is indeed supposed to be loaded from `org.jacoco.core`. Can you run the build command with debug enabled (`-X`) and check if there are any errors in the resolved plugin dependency list? And perhaps add what maven and java version you run this on. Have you tried updating to plugin version `0.8.x`?","body":"<code>AgentOptions</code> is indeed supposed to be loaded from <code>org.jacoco.core</code>. Can you run the build command with debug enabled (<code>-X</code>) and check if there are any errors in the resolved plugin dependency list? And perhaps add what maven and java version you run this on. Have you tried updating to plugin version <code>0.8.x</code>?"},{"owner":{"account_id":4910891,"reputation":423,"user_id":3956228,"display_name":"Peter"},"score":0,"creation_date":1660215180,"post_id":73311296,"comment_id":129482615,"body_markdown":"Yes, I tried to upgrade plugin version to 0.8.1 but it gives same error.","body":"Yes, I tried to upgrade plugin version to 0.8.1 but it gives same error."},{"owner":{"account_id":4910891,"reputation":423,"user_id":3956228,"display_name":"Peter"},"score":0,"creation_date":1660215218,"post_id":73311296,"comment_id":129482627,"body_markdown":"Updated stack trace in question","body":"Updated stack trace in question"},{"owner":{"account_id":4635391,"reputation":1131,"user_id":3756780,"display_name":"slindenau"},"score":0,"creation_date":1660216913,"post_id":73311296,"comment_id":129483180,"body_markdown":"`[WARNING] The POM for org.jacoco:jacoco-maven-plugin:jar:0.7.9 is missing, no dependency information available` this is weird, in my `.m2` there is a pom available for this artifact. Can you check `.m2\\repository\\org\\jacoco\\jacoco-maven-plugin\\0.7.9` if it contains `jacoco-maven-plugin-0.7.9.pom`? I would recommend to remove `org\\jacoco` from your local m2 and try again.","body":"<code>[WARNING] The POM for org.jacoco:jacoco-maven-plugin:jar:0.7.9 is missing, no dependency information available</code> this is weird, in my <code>.m2</code> there is a pom available for this artifact. Can you check <code>.m2\\repository\\org\\jacoco\\jacoco-maven-plugin\\0.7.9</code> if it contains <code>jacoco-maven-plugin-0.7.9.pom</code>? I would recommend to remove <code>org\\jacoco</code> from your local m2 and try again."},{"owner":{"account_id":4635391,"reputation":1131,"user_id":3756780,"display_name":"slindenau"},"score":0,"creation_date":1660222721,"post_id":73311296,"comment_id":129485295,"body_markdown":"We can also see `[DEBUG] Skipped remote request for org.jacoco:jacoco-maven-plugin:pom:0.7.9, already updated during this session.`, this could indicate that there was a problem downloading the pom file. Are there any errors in `.m2\\repository\\org\\jacoco\\jacoco-maven-plugin\\0.7.9\\_remote.repositories`? Is it trying to download from `central`, or do you have any custom `pluginRepositories`?","body":"We can also see <code>[DEBUG] Skipped remote request for org.jacoco:jacoco-maven-plugin:pom:0.7.9, already updated during this session.</code>, this could indicate that there was a problem downloading the pom file. Are there any errors in <code>.m2\\repository\\org\\jacoco\\jacoco-maven-plugin\\0.7.9\\_remote.&zwnj;&#8203;repositories</code>? Is it trying to download from <code>central</code>, or do you have any custom <code>pluginRepositories</code>?"}],"answers":[{"tags":[],"owner":{"account_id":4635391,"reputation":1131,"user_id":3756780,"display_name":"slindenau"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660228779,"creation_date":1660228779,"answer_id":73322557,"question_id":73311296,"body_markdown":"You can run the maven build command with argument `-X` to enable debug logging.\r\nWith this output you now see the following line in your log:\r\n\r\n`[WARNING] The POM for org.jacoco:jacoco-maven-plugin:jar:0.7.9 is missing, no dependency information available`\r\n\r\nNormally the class `AgentOptions` is loaded from `org.jacoco.core`, which is a dependency of the plugin. But without the pom file, the maven build process doesn&#39;t know this and even though you have that jar file in your local repository, it will not be used due to the missing pom file.\r\n\r\nIn my local m2 i do have the following pom file: `.m2\\repository\\org\\jacoco\\jacoco-maven-plugin\\0.7.9\\jacoco-maven-plugin-0.7.9.pom`. This leads me to believe there is something wrong with your downloaded copy.\r\n\r\nI have verified this causes a problem by removing the `dependencies` list in the local copy of the plugins&#39; pom file, and then i get the same error message in the build process.\r\n\r\nAs a solution you can clear the contents of `.m2\\repository\\org\\jacoco\\` and try your build again, then all correct plugin files and dependencies should be downloaded again from maven central.\r\n\r\nWe can also see `[DEBUG] Skipped remote request for org.jacoco:jacoco-maven-plugin:pom:0.7.9, already updated during this session.`, this could indicate that there was a problem downloading the pom file. Are there any errors in `.m2\\repository\\org\\jacoco\\jacoco-maven-plugin\\0.7.9\\_remote.repositories`? \r\n\r\nIs it trying to download from `central`, or do you have any custom `pluginRepositories` that might not have the complete pom file?  You can see your entire pom file by running `mvn help:effective-pom`.\r\n\r\nNormally that should include the following from the [super pom](https://maven.apache.org/ref/3.8.5/maven-model-builder/super-pom.html):\r\n```lang-xml\r\n  &lt;pluginRepositories&gt;\r\n    &lt;pluginRepository&gt;\r\n      &lt;releases&gt;\r\n        &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\r\n      &lt;/releases&gt;\r\n      &lt;snapshots&gt;\r\n        &lt;enabled&gt;false&lt;/enabled&gt;\r\n      &lt;/snapshots&gt;\r\n      &lt;id&gt;central&lt;/id&gt;\r\n      &lt;name&gt;Central Repository&lt;/name&gt;\r\n      &lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt;\r\n    &lt;/pluginRepository&gt;\r\n  &lt;/pluginRepositories&gt;\r\n```\r\n\r\nMore extreme measures could be to download a newer version of maven, or clear your entire local `.m2` (create a backup if you have important files in there).\r\n\r\nThose would be the places to look to resolve this issue.","title":"Getting error Error injecting: org.jacoco.maven.AgentMojo while maven build","body":"<p>You can run the maven build command with argument <code>-X</code> to enable debug logging.\nWith this output you now see the following line in your log:</p>\n<p><code>[WARNING] The POM for org.jacoco:jacoco-maven-plugin:jar:0.7.9 is missing, no dependency information available</code></p>\n<p>Normally the class <code>AgentOptions</code> is loaded from <code>org.jacoco.core</code>, which is a dependency of the plugin. But without the pom file, the maven build process doesn't know this and even though you have that jar file in your local repository, it will not be used due to the missing pom file.</p>\n<p>In my local m2 i do have the following pom file: <code>.m2\\repository\\org\\jacoco\\jacoco-maven-plugin\\0.7.9\\jacoco-maven-plugin-0.7.9.pom</code>. This leads me to believe there is something wrong with your downloaded copy.</p>\n<p>I have verified this causes a problem by removing the <code>dependencies</code> list in the local copy of the plugins' pom file, and then i get the same error message in the build process.</p>\n<p>As a solution you can clear the contents of <code>.m2\\repository\\org\\jacoco\\</code> and try your build again, then all correct plugin files and dependencies should be downloaded again from maven central.</p>\n<p>We can also see <code>[DEBUG] Skipped remote request for org.jacoco:jacoco-maven-plugin:pom:0.7.9, already updated during this session.</code>, this could indicate that there was a problem downloading the pom file. Are there any errors in <code>.m2\\repository\\org\\jacoco\\jacoco-maven-plugin\\0.7.9\\_remote.repositories</code>?</p>\n<p>Is it trying to download from <code>central</code>, or do you have any custom <code>pluginRepositories</code> that might not have the complete pom file?  You can see your entire pom file by running <code>mvn help:effective-pom</code>.</p>\n<p>Normally that should include the following from the <a href=\"https://maven.apache.org/ref/3.8.5/maven-model-builder/super-pom.html\" rel=\"nofollow noreferrer\">super pom</a>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;pluginRepositories&gt;\n    &lt;pluginRepository&gt;\n      &lt;releases&gt;\n        &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\n      &lt;/releases&gt;\n      &lt;snapshots&gt;\n        &lt;enabled&gt;false&lt;/enabled&gt;\n      &lt;/snapshots&gt;\n      &lt;id&gt;central&lt;/id&gt;\n      &lt;name&gt;Central Repository&lt;/name&gt;\n      &lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt;\n    &lt;/pluginRepository&gt;\n  &lt;/pluginRepositories&gt;\n</code></pre>\n<p>More extreme measures could be to download a newer version of maven, or clear your entire local <code>.m2</code> (create a backup if you have important files in there).</p>\n<p>Those would be the places to look to resolve this issue.</p>\n"}],"owner":{"account_id":4910891,"reputation":423,"user_id":3956228,"display_name":"Peter"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":789,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73322557,"answer_count":1,"score":1,"last_activity_date":1660228779,"creation_date":1660157299,"question_id":73311296,"body_markdown":" I am trying to build a maven project but its giving me below error.\r\n\r\njava.lang.NoClassDefFoundError: org/jacoco/core/runtime/AgentOptions\r\n\r\n    [ERROR] Failed to execute goal org.jacoco:jacoco-maven-plugin:0.7.9:prepare-agent (agent) on project app: Execution agent of goal org.jacoco:ja\r\n    coco-maven-plugin:0.7.9:prepare-agent failed: A required class was missing while executing org.jacoco:jacoco-maven-plugin:0.7.9:prepare-agent: org/jacoc\r\n    o/core/runtime/AgentOptions\r\n    [ERROR] -----------------------------------------------------\r\n    [ERROR] realm =    plugin&gt;org.jacoco:jacoco-maven-plugin:0.7.9\r\n    [ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy\r\n    [ERROR] urls[0] = file:/C:/Users/t/.m2/repository1/org/jacoco/jacoco-maven-plugin/0.7.9/jacoco-maven-plugin-0.7.9.jar\r\n    [ERROR] urls[1] = file:/C:/Users/t/.m2/repository1/org/codehaus/plexus/plexus-utils/1.1/plexus-utils-1.1.jar\r\n    [ERROR] Number of foreign imports: 1\r\n    [ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]]\r\n    [ERROR]\r\n    [ERROR] -----------------------------------------------------\r\n    [ERROR] : org.jacoco.core.runtime.AgentOptions\r\n    [ERROR] -&gt; [Help 1]\r\n    [ERROR]\r\n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR]\r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginContainerException\r\n\r\nEven though I have  jacoco-maven-plugin:0.7.9 &amp; org.jacoco.core-0.7.9 in maven repo its giving this error.\r\n\r\nI am using mvn clean install command to build the application .\r\nFurther I also tried building with -U flag  \r\n\r\n\r\nLastly, when I build it using -X option I see below stack trace\r\n\r\n        [INFO] --- jacoco-maven-plugin:0.7.9:prepare-agent (agent) @ ncso-app-pso ---\r\n    [DEBUG] Skipped remote request for org.jacoco:jacoco-maven-plugin:pom:0.7.9, already updated during this session.\r\n    [WARNING] The POM for org.jacoco:jacoco-maven-plugin:jar:0.7.9 is missing, no dependency information available\r\n    [DEBUG] Dependency collection stats: {ConflictMarker.analyzeTime=50400, ConflictMarker.markTime=25500, ConflictMarker.nodeCount=1, ConflictIdSorter.grap\r\n    hTime=7100, ConflictIdSorter.topsortTime=12700, ConflictIdSorter.conflictIdCount=1, ConflictIdSorter.conflictIdCycleCount=0, ConflictResolver.totalTime=\r\n    56700, ConflictResolver.conflictItemCount=1, DefaultDependencyCollector.collectTime=8846200, DefaultDependencyCollector.transformTime=181500}\r\n    [DEBUG] org.jacoco:jacoco-maven-plugin:jar:0.7.9:\r\n    [DEBUG]    org.codehaus.plexus:plexus-utils:jar:1.1:runtime\r\n    [DEBUG] Created new class realm plugin&gt;org.jacoco:jacoco-maven-plugin:0.7.9\r\n    [DEBUG] Importing foreign packages into class realm plugin&gt;org.jacoco:jacoco-maven-plugin:0.7.9\r\n    [DEBUG]   Imported:  &lt; maven.api\r\n    [DEBUG] Populating class realm plugin&gt;org.jacoco:jacoco-maven-plugin:0.7.9\r\n    [DEBUG]   Included: org.jacoco:jacoco-maven-plugin:jar:0.7.9\r\n    [DEBUG]   Included: org.codehaus.plexus:plexus-utils:jar:1.1\r\n    [DEBUG] Configuring mojo org.jacoco:jacoco-maven-plugin:0.7.9:prepare-agent from plugin realm ClassRealm[plugin&gt;org.jacoco:jacoco-maven-plugin:0.7.9, pa\r\n    rent: sun.misc.Launcher$AppClassLoader@5c647e05]\r\n    [WARNING] Error injecting: org.jacoco.maven.AgentMojo\r\n    java.lang.NoClassDefFoundError: org/jacoco/core/runtime/AgentOptions\r\n        at java.lang.Class.getDeclaredMethods0 (Native Method)\r\n        at java.lang.Class.privateGetDeclaredMethods (Class.java:2701)\r\n        at java.lang.Class.getDeclaredMethods (Class.java:1975)\r\n        at com.google.inject.spi.InjectionPoint.getInjectionPoints (InjectionPoint.java:688)\r\n        at com.google.inject.spi.InjectionPoint.forInstanceMethodsAndFields (InjectionPoint.java:380)\r\n        at com.google.inject.internal.ConstructorBindingImpl.getInternalDependencies (ConstructorBindingImpl.java:164)\r\n        at com.google.inject.internal.InjectorImpl.getInternalDependencies (InjectorImpl.java:613)\r\n        at com.google.inject.internal.InjectorImpl.cleanup (InjectorImpl.java:569)\r\n        at com.google.inject.internal.InjectorImpl.initializeJitBinding (InjectorImpl.java:555)\r\n        at com.google.inject.internal.InjectorImpl.createJustInTimeBinding (InjectorImpl.java:884)\r\n        at com.google.inject.internal.InjectorImpl.createJustInTimeBindingRecursive (InjectorImpl.java:805)\r\n        at com.google.inject.internal.InjectorImpl.getJustInTimeBinding (InjectorImpl.java:282)\r\n        at com.google.inject.internal.InjectorImpl.getBindingOrThrow (InjectorImpl.java:214)\r\n        at com.google.inject.internal.InjectorImpl.getProviderOrThrow (InjectorImpl.java:1006)\r\n        at com.google.inject.internal.InjectorImpl.getProvider (InjectorImpl.java:1038)\r\n        at com.google.inject.internal.InjectorImpl.getProvider (InjectorImpl.java:1001)\r\n        at com.google.inject.internal.InjectorImpl.getInstance (InjectorImpl.java:1051)\r\n        at org.eclipse.sisu.space.AbstractDeferredClass.get (AbstractDeferredClass.java:48)\r\n        at com.google.inject.internal.ProviderInternalFactory.provision (ProviderInternalFactory.java:81)\r\n        at com.google.inject.internal.InternalFactoryToInitializableAdapter.provision (InternalFactoryToInitializableAdapter.java:53)\r\n        at com.google.inject.internal.ProviderInternalFactory$1.call (ProviderInternalFactory.java:65)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:115)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:133)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback.provision (ProvisionListenerStackCallback.java:68)\r\n        at com.google.inject.internal.ProviderInternalFactory.circularGet (ProviderInternalFactory.java:63)\r\n        at com.google.inject.internal.InternalFactoryToInitializableAdapter.get (InternalFactoryToInitializableAdapter.java:45)\r\n        at com.google.inject.internal.InjectorImpl$2$1.call (InjectorImpl.java:1016)\r\n        at com.google.inject.internal.InjectorImpl.callInContext (InjectorImpl.java:1092)\r\n        at com.google.inject.internal.InjectorImpl$2.get (InjectorImpl.java:1012)\r\n        at org.eclipse.sisu.inject.Guice4$1.get (Guice4.java:162)\r\n        at org.eclipse.sisu.inject.LazyBeanEntry.getValue (LazyBeanEntry.java:81)\r\n        at org.eclipse.sisu.plexus.LazyPlexusBean.getValue (LazyPlexusBean.java:51)\r\n        at org.codehaus.plexus.DefaultPlexusContainer.lookup (DefaultPlexusContainer.java:263)\r\n        at org.codehaus.plexus.DefaultPlexusContainer.lookup (DefaultPlexusContainer.java:255)\r\n        at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getConfiguredMojo (DefaultMavenPluginManager.java:519)\r\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:124)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:208)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:154)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:146)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:956)\r\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:290)\r\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:194)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke (Method.java:498)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)\r\n    Caused by: java.lang.ClassNotFoundException: org.jacoco.core.runtime.AgentOptions\r\n        at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass (SelfFirstStrategy.java:50)\r\n        at org.codehaus.plexus.classworlds.realm.ClassRealm.unsynchronizedLoadClass (ClassRealm.java:271)\r\n        at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass (ClassRealm.java:247)\r\n        at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass (ClassRealm.java:239)\r\n        at java.lang.Class.getDeclaredMethods0 (Native Method)\r\n        at java.lang.Class.privateGetDeclaredMethods (Class.java:2701)\r\n        at java.lang.Class.getDeclaredMethods (Class.java:1975)\r\n        at com.google.inject.spi.InjectionPoint.getInjectionPoints (InjectionPoint.java:688)\r\n        at com.google.inject.spi.InjectionPoint.forInstanceMethodsAndFields (InjectionPoint.java:380)\r\n        at com.google.inject.internal.ConstructorBindingImpl.getInternalDependencies (ConstructorBindingImpl.java:164)\r\n        at com.google.inject.internal.InjectorImpl.getInternalDependencies (InjectorImpl.java:613)\r\n        at com.google.inject.internal.InjectorImpl.cleanup (InjectorImpl.java:569)\r\n        at com.google.inject.internal.InjectorImpl.initializeJitBinding (InjectorImpl.java:555)\r\n        at com.google.inject.internal.InjectorImpl.createJustInTimeBinding (InjectorImpl.java:884)\r\n        at com.google.inject.internal.InjectorImpl.createJustInTimeBindingRecursive (InjectorImpl.java:805)\r\n        at com.google.inject.internal.InjectorImpl.getJustInTimeBinding (InjectorImpl.java:282)\r\n        at com.google.inject.internal.InjectorImpl.getBindingOrThrow (InjectorImpl.java:214)\r\n        at com.google.inject.internal.InjectorImpl.getProviderOrThrow (InjectorImpl.java:1006)\r\n        at com.google.inject.internal.InjectorImpl.getProvider (InjectorImpl.java:1038)\r\n        at com.google.inject.internal.InjectorImpl.getProvider (InjectorImpl.java:1001)\r\n        at com.google.inject.internal.InjectorImpl.getInstance (InjectorImpl.java:1051)\r\n        at org.eclipse.sisu.space.AbstractDeferredClass.get (AbstractDeferredClass.java:48)\r\n        at com.google.inject.internal.ProviderInternalFactory.provision (ProviderInternalFactory.java:81)\r\n        at com.google.inject.internal.InternalFactoryToInitializableAdapter.provision (InternalFactoryToInitializableAdapter.java:53)\r\n        at com.google.inject.internal.ProviderInternalFactory$1.call (ProviderInternalFactory.java:65)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:115)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:133)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback.provision (ProvisionListenerStackCallback.java:68)\r\n        at com.google.inject.internal.ProviderInternalFactory.circularGet (ProviderInternalFactory.java:63)\r\n        at com.google.inject.internal.InternalFactoryToInitializableAdapter.get (InternalFactoryToInitializableAdapter.java:45)\r\n        at com.google.inject.internal.InjectorImpl$2$1.call (InjectorImpl.java:1016)\r\n        at com.google.inject.internal.InjectorImpl.callInContext (InjectorImpl.java:1092)\r\n        at com.google.inject.internal.InjectorImpl$2.get (InjectorImpl.java:1012)\r\n        at org.eclipse.sisu.inject.Guice4$1.get (Guice4.java:162)\r\n        at org.eclipse.sisu.inject.LazyBeanEntry.getValue (LazyBeanEntry.java:81)\r\n        at org.eclipse.sisu.plexus.LazyPlexusBean.getValue (LazyPlexusBean.java:51)\r\n        at org.codehaus.plexus.DefaultPlexusContainer.lookup (DefaultPlexusContainer.java:263)\r\n        at org.codehaus.plexus.DefaultPlexusContainer.lookup (DefaultPlexusContainer.java:255)\r\n        at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getConfiguredMojo (DefaultMavenPluginManager.java:519)\r\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:124)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:208)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:154)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:146)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:956)\r\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:290)\r\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:194)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke (Method.java:498)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)","title":"Getting error Error injecting: org.jacoco.maven.AgentMojo while maven build","body":"<p>I am trying to build a maven project but its giving me below error.</p>\n<p>java.lang.NoClassDefFoundError: org/jacoco/core/runtime/AgentOptions</p>\n<pre><code>[ERROR] Failed to execute goal org.jacoco:jacoco-maven-plugin:0.7.9:prepare-agent (agent) on project app: Execution agent of goal org.jacoco:ja\ncoco-maven-plugin:0.7.9:prepare-agent failed: A required class was missing while executing org.jacoco:jacoco-maven-plugin:0.7.9:prepare-agent: org/jacoc\no/core/runtime/AgentOptions\n[ERROR] -----------------------------------------------------\n[ERROR] realm =    plugin&gt;org.jacoco:jacoco-maven-plugin:0.7.9\n[ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy\n[ERROR] urls[0] = file:/C:/Users/t/.m2/repository1/org/jacoco/jacoco-maven-plugin/0.7.9/jacoco-maven-plugin-0.7.9.jar\n[ERROR] urls[1] = file:/C:/Users/t/.m2/repository1/org/codehaus/plexus/plexus-utils/1.1/plexus-utils-1.1.jar\n[ERROR] Number of foreign imports: 1\n[ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]]\n[ERROR]\n[ERROR] -----------------------------------------------------\n[ERROR] : org.jacoco.core.runtime.AgentOptions\n[ERROR] -&gt; [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginContainerException\n</code></pre>\n<p>Even though I have  jacoco-maven-plugin:0.7.9 &amp; org.jacoco.core-0.7.9 in maven repo its giving this error.</p>\n<p>I am using mvn clean install command to build the application .\nFurther I also tried building with -U flag</p>\n<p>Lastly, when I build it using -X option I see below stack trace</p>\n<pre><code>    [INFO] --- jacoco-maven-plugin:0.7.9:prepare-agent (agent) @ ncso-app-pso ---\n[DEBUG] Skipped remote request for org.jacoco:jacoco-maven-plugin:pom:0.7.9, already updated during this session.\n[WARNING] The POM for org.jacoco:jacoco-maven-plugin:jar:0.7.9 is missing, no dependency information available\n[DEBUG] Dependency collection stats: {ConflictMarker.analyzeTime=50400, ConflictMarker.markTime=25500, ConflictMarker.nodeCount=1, ConflictIdSorter.grap\nhTime=7100, ConflictIdSorter.topsortTime=12700, ConflictIdSorter.conflictIdCount=1, ConflictIdSorter.conflictIdCycleCount=0, ConflictResolver.totalTime=\n56700, ConflictResolver.conflictItemCount=1, DefaultDependencyCollector.collectTime=8846200, DefaultDependencyCollector.transformTime=181500}\n[DEBUG] org.jacoco:jacoco-maven-plugin:jar:0.7.9:\n[DEBUG]    org.codehaus.plexus:plexus-utils:jar:1.1:runtime\n[DEBUG] Created new class realm plugin&gt;org.jacoco:jacoco-maven-plugin:0.7.9\n[DEBUG] Importing foreign packages into class realm plugin&gt;org.jacoco:jacoco-maven-plugin:0.7.9\n[DEBUG]   Imported:  &lt; maven.api\n[DEBUG] Populating class realm plugin&gt;org.jacoco:jacoco-maven-plugin:0.7.9\n[DEBUG]   Included: org.jacoco:jacoco-maven-plugin:jar:0.7.9\n[DEBUG]   Included: org.codehaus.plexus:plexus-utils:jar:1.1\n[DEBUG] Configuring mojo org.jacoco:jacoco-maven-plugin:0.7.9:prepare-agent from plugin realm ClassRealm[plugin&gt;org.jacoco:jacoco-maven-plugin:0.7.9, pa\nrent: sun.misc.Launcher$AppClassLoader@5c647e05]\n[WARNING] Error injecting: org.jacoco.maven.AgentMojo\njava.lang.NoClassDefFoundError: org/jacoco/core/runtime/AgentOptions\n    at java.lang.Class.getDeclaredMethods0 (Native Method)\n    at java.lang.Class.privateGetDeclaredMethods (Class.java:2701)\n    at java.lang.Class.getDeclaredMethods (Class.java:1975)\n    at com.google.inject.spi.InjectionPoint.getInjectionPoints (InjectionPoint.java:688)\n    at com.google.inject.spi.InjectionPoint.forInstanceMethodsAndFields (InjectionPoint.java:380)\n    at com.google.inject.internal.ConstructorBindingImpl.getInternalDependencies (ConstructorBindingImpl.java:164)\n    at com.google.inject.internal.InjectorImpl.getInternalDependencies (InjectorImpl.java:613)\n    at com.google.inject.internal.InjectorImpl.cleanup (InjectorImpl.java:569)\n    at com.google.inject.internal.InjectorImpl.initializeJitBinding (InjectorImpl.java:555)\n    at com.google.inject.internal.InjectorImpl.createJustInTimeBinding (InjectorImpl.java:884)\n    at com.google.inject.internal.InjectorImpl.createJustInTimeBindingRecursive (InjectorImpl.java:805)\n    at com.google.inject.internal.InjectorImpl.getJustInTimeBinding (InjectorImpl.java:282)\n    at com.google.inject.internal.InjectorImpl.getBindingOrThrow (InjectorImpl.java:214)\n    at com.google.inject.internal.InjectorImpl.getProviderOrThrow (InjectorImpl.java:1006)\n    at com.google.inject.internal.InjectorImpl.getProvider (InjectorImpl.java:1038)\n    at com.google.inject.internal.InjectorImpl.getProvider (InjectorImpl.java:1001)\n    at com.google.inject.internal.InjectorImpl.getInstance (InjectorImpl.java:1051)\n    at org.eclipse.sisu.space.AbstractDeferredClass.get (AbstractDeferredClass.java:48)\n    at com.google.inject.internal.ProviderInternalFactory.provision (ProviderInternalFactory.java:81)\n    at com.google.inject.internal.InternalFactoryToInitializableAdapter.provision (InternalFactoryToInitializableAdapter.java:53)\n    at com.google.inject.internal.ProviderInternalFactory$1.call (ProviderInternalFactory.java:65)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:115)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:133)\n    at com.google.inject.internal.ProvisionListenerStackCallback.provision (ProvisionListenerStackCallback.java:68)\n    at com.google.inject.internal.ProviderInternalFactory.circularGet (ProviderInternalFactory.java:63)\n    at com.google.inject.internal.InternalFactoryToInitializableAdapter.get (InternalFactoryToInitializableAdapter.java:45)\n    at com.google.inject.internal.InjectorImpl$2$1.call (InjectorImpl.java:1016)\n    at com.google.inject.internal.InjectorImpl.callInContext (InjectorImpl.java:1092)\n    at com.google.inject.internal.InjectorImpl$2.get (InjectorImpl.java:1012)\n    at org.eclipse.sisu.inject.Guice4$1.get (Guice4.java:162)\n    at org.eclipse.sisu.inject.LazyBeanEntry.getValue (LazyBeanEntry.java:81)\n    at org.eclipse.sisu.plexus.LazyPlexusBean.getValue (LazyPlexusBean.java:51)\n    at org.codehaus.plexus.DefaultPlexusContainer.lookup (DefaultPlexusContainer.java:263)\n    at org.codehaus.plexus.DefaultPlexusContainer.lookup (DefaultPlexusContainer.java:255)\n    at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getConfiguredMojo (DefaultMavenPluginManager.java:519)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:124)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:208)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:154)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:146)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:956)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:290)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:194)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:498)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)\nCaused by: java.lang.ClassNotFoundException: org.jacoco.core.runtime.AgentOptions\n    at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass (SelfFirstStrategy.java:50)\n    at org.codehaus.plexus.classworlds.realm.ClassRealm.unsynchronizedLoadClass (ClassRealm.java:271)\n    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass (ClassRealm.java:247)\n    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass (ClassRealm.java:239)\n    at java.lang.Class.getDeclaredMethods0 (Native Method)\n    at java.lang.Class.privateGetDeclaredMethods (Class.java:2701)\n    at java.lang.Class.getDeclaredMethods (Class.java:1975)\n    at com.google.inject.spi.InjectionPoint.getInjectionPoints (InjectionPoint.java:688)\n    at com.google.inject.spi.InjectionPoint.forInstanceMethodsAndFields (InjectionPoint.java:380)\n    at com.google.inject.internal.ConstructorBindingImpl.getInternalDependencies (ConstructorBindingImpl.java:164)\n    at com.google.inject.internal.InjectorImpl.getInternalDependencies (InjectorImpl.java:613)\n    at com.google.inject.internal.InjectorImpl.cleanup (InjectorImpl.java:569)\n    at com.google.inject.internal.InjectorImpl.initializeJitBinding (InjectorImpl.java:555)\n    at com.google.inject.internal.InjectorImpl.createJustInTimeBinding (InjectorImpl.java:884)\n    at com.google.inject.internal.InjectorImpl.createJustInTimeBindingRecursive (InjectorImpl.java:805)\n    at com.google.inject.internal.InjectorImpl.getJustInTimeBinding (InjectorImpl.java:282)\n    at com.google.inject.internal.InjectorImpl.getBindingOrThrow (InjectorImpl.java:214)\n    at com.google.inject.internal.InjectorImpl.getProviderOrThrow (InjectorImpl.java:1006)\n    at com.google.inject.internal.InjectorImpl.getProvider (InjectorImpl.java:1038)\n    at com.google.inject.internal.InjectorImpl.getProvider (InjectorImpl.java:1001)\n    at com.google.inject.internal.InjectorImpl.getInstance (InjectorImpl.java:1051)\n    at org.eclipse.sisu.space.AbstractDeferredClass.get (AbstractDeferredClass.java:48)\n    at com.google.inject.internal.ProviderInternalFactory.provision (ProviderInternalFactory.java:81)\n    at com.google.inject.internal.InternalFactoryToInitializableAdapter.provision (InternalFactoryToInitializableAdapter.java:53)\n    at com.google.inject.internal.ProviderInternalFactory$1.call (ProviderInternalFactory.java:65)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:115)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:133)\n    at com.google.inject.internal.ProvisionListenerStackCallback.provision (ProvisionListenerStackCallback.java:68)\n    at com.google.inject.internal.ProviderInternalFactory.circularGet (ProviderInternalFactory.java:63)\n    at com.google.inject.internal.InternalFactoryToInitializableAdapter.get (InternalFactoryToInitializableAdapter.java:45)\n    at com.google.inject.internal.InjectorImpl$2$1.call (InjectorImpl.java:1016)\n    at com.google.inject.internal.InjectorImpl.callInContext (InjectorImpl.java:1092)\n    at com.google.inject.internal.InjectorImpl$2.get (InjectorImpl.java:1012)\n    at org.eclipse.sisu.inject.Guice4$1.get (Guice4.java:162)\n    at org.eclipse.sisu.inject.LazyBeanEntry.getValue (LazyBeanEntry.java:81)\n    at org.eclipse.sisu.plexus.LazyPlexusBean.getValue (LazyPlexusBean.java:51)\n    at org.codehaus.plexus.DefaultPlexusContainer.lookup (DefaultPlexusContainer.java:263)\n    at org.codehaus.plexus.DefaultPlexusContainer.lookup (DefaultPlexusContainer.java:255)\n    at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getConfiguredMojo (DefaultMavenPluginManager.java:519)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:124)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:208)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:154)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:146)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:956)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:290)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:194)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:498)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)\n</code></pre>\n"},{"tags":["javascript","java","birt"],"answers":[{"tags":[],"owner":{"account_id":3349759,"reputation":2483,"user_id":2814025,"display_name":"hvb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660228679,"creation_date":1660228679,"answer_id":73322529,"question_id":73318928,"body_markdown":"Are you sure your error handling is correct?\r\n\r\nWhat I would do to debug this:\r\n\r\n- Remove the try-catch.\r\n- use some debug output to display type(result) and result.\r\n- Use calls to Java&#39;s System.err before anything happens, just to see\r\n  that the code is actually executed and that you can output anything\r\n  to System.err.\r\n\r\nNote that writing to System.err often behaves like a no-op in Java, because e.g. `javaw.exe` writes the System.out and System.err to *nowhere*.\r\nThe same behavior occurs with `eclipse.exe`, whereas `eclipsec.exe` will actually write System.out and System.err to the console.\r\n\r\n","title":"Calling a bean through a Javascript Birt Expression","body":"<p>Are you sure your error handling is correct?</p>\n<p>What I would do to debug this:</p>\n<ul>\n<li>Remove the try-catch.</li>\n<li>use some debug output to display type(result) and result.</li>\n<li>Use calls to Java's System.err before anything happens, just to see\nthat the code is actually executed and that you can output anything\nto System.err.</li>\n</ul>\n<p>Note that writing to System.err often behaves like a no-op in Java, because e.g. <code>javaw.exe</code> writes the System.out and System.err to <em>nowhere</em>.\nThe same behavior occurs with <code>eclipse.exe</code>, whereas <code>eclipsec.exe</code> will actually write System.out and System.err to the console.</p>\n"}],"owner":{"account_id":16480651,"reputation":97,"user_id":11907506,"display_name":"TheOx"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660228679,"creation_date":1660212601,"question_id":73318928,"body_markdown":"I am trying to show the contact number (GetExtension) of the current user logged in who is producing a report. \r\n\r\nBy using the code below I can show the name of the user who is logged on, I place this Javascript  code within Birt&#39;s Expression Builder (Dynamic text field). This works: \r\n\r\n    `var result = &quot;USERID&quot;;\r\n    try {\r\n    result = Packages.uk.co.blah.session.Session.getUserID();\r\n    } catch (error) {\r\n    Packages.java.lang.System.err.println(error);\r\n    }\r\n    result;`\r\n\r\nI cannot get the Extension method to show using the same code, adjusted to &#39;getExtension&#39;, \r\n\r\n    `var result = &quot;EXTENSION&quot;; \r\n    try { \r\n    result = Packages.uk.co.blah.session.Session.getExtension(); \r\n    } catch (error) {\r\n    Packages.java.lang.System.err.println(error); result;`\r\n\r\nThis did not work so I then tried altering this to the direct path of the package and not session.Session: \r\n\r\n    `var result = &quot;EXTENSION&quot;;\r\n    try {\r\n    result = Packages.uk.co.blah.systemmanagement.personnel.getExtension();\r\n    } catch (error) {\r\n    Packages.java.lang.System.err.println(error);\r\n    }\r\n    result;`\r\n\r\nAgain, this just gives the word ‘EXTENSION’.\r\n\r\nHow can I use getExtension based off the person logged on using getUserID? \r\n\r\n\r\n\r\n","title":"Calling a bean through a Javascript Birt Expression","body":"<p>I am trying to show the contact number (GetExtension) of the current user logged in who is producing a report.</p>\n<p>By using the code below I can show the name of the user who is logged on, I place this Javascript  code within Birt's Expression Builder (Dynamic text field). This works:</p>\n<pre><code>`var result = &quot;USERID&quot;;\ntry {\nresult = Packages.uk.co.blah.session.Session.getUserID();\n} catch (error) {\nPackages.java.lang.System.err.println(error);\n}\nresult;`\n</code></pre>\n<p>I cannot get the Extension method to show using the same code, adjusted to 'getExtension',</p>\n<pre><code>`var result = &quot;EXTENSION&quot;; \ntry { \nresult = Packages.uk.co.blah.session.Session.getExtension(); \n} catch (error) {\nPackages.java.lang.System.err.println(error); result;`\n</code></pre>\n<p>This did not work so I then tried altering this to the direct path of the package and not session.Session:</p>\n<pre><code>`var result = &quot;EXTENSION&quot;;\ntry {\nresult = Packages.uk.co.blah.systemmanagement.personnel.getExtension();\n} catch (error) {\nPackages.java.lang.System.err.println(error);\n}\nresult;`\n</code></pre>\n<p>Again, this just gives the word ‘EXTENSION’.</p>\n<p>How can I use getExtension based off the person logged on using getUserID?</p>\n"},{"tags":["java","selenium","batch-file","command"],"comments":[{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":1,"creation_date":1658488202,"post_id":73078486,"comment_id":129069542,"body_markdown":"Export your main class to runnable jar file. You can run the jar file directly or from bat file using `java -cp FOO.jar packagename.classname`.","body":"Export your main class to runnable jar file. You can run the jar file directly or from bat file using <code>java -cp FOO.jar packagename.classname</code>."},{"owner":{"account_id":25869378,"reputation":11,"user_id":19600490,"display_name":"yash chourasiya"},"score":0,"creation_date":1658563092,"post_id":73078486,"comment_id":129086633,"body_markdown":"Thank you sir.. and one more question ....can we click setting button of browser using selenium java","body":"Thank you sir.. and one more question ....can we click setting button of browser using selenium java"},{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":0,"creation_date":1658563482,"post_id":73078486,"comment_id":129086687,"body_markdown":"You can simulate click anywhere on the screen https://stackoverflow.com/questions/31066403/click-any-where-on-a-webpage. But you need to know exact position, so somehow to count with different screen size and resolution.","body":"You can simulate click anywhere on the screen <a href=\"https://stackoverflow.com/questions/31066403/click-any-where-on-a-webpage\" title=\"click any where on a webpage\">stackoverflow.com/questions/31066403/&hellip;</a>. But you need to know exact position, so somehow to count with different screen size and resolution."}],"owner":{"account_id":25869378,"reputation":11,"user_id":19600490,"display_name":"yash chourasiya"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660228652,"creation_date":1658483985,"question_id":73078486,"body_markdown":"I create a cmd file using \r\n```\r\njava -cp classpackage.classname\r\n```\r\nand save it as a cmd file.  \r\nAfter I create a batch file and write it in the cmd file path.  \r\nAnd then click on the batch file so I get the error:\r\n&gt;Error: Unable to initialize main class artifactiidpack.articlassss  \r\nCaused by: java.lang.NoClassDefFoundError:  \r\norg/openqa/selenium/WebDriver","title":"How to run an Eclipse Maven program to launch chrome browser using .bat(batch)?","body":"<p>I create a cmd file using</p>\n<pre><code>java -cp classpackage.classname\n</code></pre>\n<p>and save it as a cmd file.<br />\nAfter I create a batch file and write it in the cmd file path.<br />\nAnd then click on the batch file so I get the error:</p>\n<blockquote>\n<p>Error: Unable to initialize main class artifactiidpack.articlassss<br />\nCaused by: java.lang.NoClassDefFoundError:<br />\norg/openqa/selenium/WebDriver</p>\n</blockquote>\n"},{"tags":["java","spring","database","kotlin","transactions"],"answers":[{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660228462,"creation_date":1660228107,"answer_id":73322410,"question_id":73322370,"body_markdown":"If &quot;write to table A&quot; is successful then yes it will persist.\r\n\r\nWhy? Because transaction demarcation is done by interceptors that act upon exceptions and in your code no interceptor would see that exception as they could only be executed around those &quot;write to table X&quot; calls (if those are done via interceptable code) or `accept()`.\r\n\r\nLet me try to add some more details:\r\n\r\nIn general, you can conceptually think of the interceptor looking like this (they look different but the example is used to illustrate the point - I&#39;ll also use Java code because I&#39;m not that familiar with Kotlin):\r\n\r\n    void runInTransaction(Runnable interceptedCode) {\r\n      Transaction tx = startTransaction();\r\n\r\n      try {\r\n        interceptedCode.run();\r\n        tx.commit();\r\n      } catch( Exception e) { //kept simple for illustration purposes, in reality this is way more complex\r\n        tx.rollback();\r\n      }\r\n    }\r\n\r\nThen you&#39;d call it like this:\r\n\r\n    runInTransaction(() -&gt; accept());\r\n\r\nAs you can see, since the exception is only thrown and caught in `accept()` - and thus won&#39;t leave the method - the interceptor won&#39;t even see it and thus will commit the transaction.","title":"Spring transaction and try catch blocks","body":"<p>If &quot;write to table A&quot; is successful then yes it will persist.</p>\n<p>Why? Because transaction demarcation is done by interceptors that act upon exceptions and in your code no interceptor would see that exception as they could only be executed around those &quot;write to table X&quot; calls (if those are done via interceptable code) or <code>accept()</code>.</p>\n<p>Let me try to add some more details:</p>\n<p>In general, you can conceptually think of the interceptor looking like this (they look different but the example is used to illustrate the point - I'll also use Java code because I'm not that familiar with Kotlin):</p>\n<pre><code>void runInTransaction(Runnable interceptedCode) {\n  Transaction tx = startTransaction();\n\n  try {\n    interceptedCode.run();\n    tx.commit();\n  } catch( Exception e) { //kept simple for illustration purposes, in reality this is way more complex\n    tx.rollback();\n  }\n}\n</code></pre>\n<p>Then you'd call it like this:</p>\n<pre><code>runInTransaction(() -&gt; accept());\n</code></pre>\n<p>As you can see, since the exception is only thrown and caught in <code>accept()</code> - and thus won't leave the method - the interceptor won't even see it and thus will commit the transaction.</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1660228340,"creation_date":1660228340,"answer_id":73322460,"question_id":73322370,"body_markdown":"Spring has a bit of a bizarre take on what exceptions &#39;mean&#39;. It acts as follows. A transaction method doesn&#39;t commit anything until it exits. i.e. this:\r\n\r\n```\r\n@transaction\r\nfun accept() {\r\n  write to table A\r\n  while (true) {} // loop forever\r\n}\r\n```\r\n\r\ntrivially never actually commits anything, that&#39;s probably obvious. Otherwise, the method exits, and it can exit in one of three ways:\r\n\r\n* The method &#39;returns&#39;. As in, no exception is thrown out of the method - exceptions might be thrown, but they are caught. Then upon exiting the method, the transaction is committed. __Note that this describes your snippet - which does not throw an exception _out_ of the method__. Hence, the write to table A and B will both happen and be visible from outside parties!\r\n* The method finishes by throwing an UNCHECKED exception. Spring&#39;s opinion is that this is &#39;unexpected&#39;, and indicates the result of executing the method is failure - the entire transaction is aborted. the write to table A will not be visible to other transactions, ever, nor would the write to table B (let&#39;s imagine that after the catch block, you have `throw new RuntimeException()`, which is unchecked).\r\n* The method ends by throwing a CHECKED exception out. Spring&#39;s opinion is that this must mean that it is &#39;intentional&#39;, and indicates that the code succeeded; it simply chose to &quot;return&quot; an exception instead of finishing up normally. The transaction is committed - the write to table A will be visible to others. The write to table B will also be visible to others (this is assuming that you add `throw new IOException()` to the end of your accept method, and of course that your method is allowed to do that. Which in java means it has to be declared as `void accept() throws IOException {}`, of course.\r\n\r\nThe notion of checked and unchecked __does not exist__ in kotlin - in kotlin, all exceptions are &#39;unchecked&#39;, effectively. However, spring doesn&#39;t go: &quot;OOoooohhhh, kotlin user, I&#39;ll just treat everything as if it was unchecked, i.e. any exceptions thrown result in a aborted transaction&quot;. Nope, so, you must __learn what checked exceptions are__ even if you write only kotlin.\r\n\r\nUnchecked exceptions are all throwables that have in their type hierarchy either `java.lang.Error` (such as `java.lang.InternalError`, which extends `j.l.Error`), or `java.lang.RuntimeException`, such as `NullPointerException`.\r\n\r\nAll other throwables are &#39;checked&#39;. Such as `IOException`, which extends Exception. which extends Throwable. `Exception` itself is _checked_.\r\n\r\nNB: You can add interceptors and the like to change this behaviour; &quot;checked exception means we need to commit, checked means we need to abort&quot; is merely the default behaviour.","title":"Spring transaction and try catch blocks","body":"<p>Spring has a bit of a bizarre take on what exceptions 'mean'. It acts as follows. A transaction method doesn't commit anything until it exits. i.e. this:</p>\n<pre><code>@transaction\nfun accept() {\n  write to table A\n  while (true) {} // loop forever\n}\n</code></pre>\n<p>trivially never actually commits anything, that's probably obvious. Otherwise, the method exits, and it can exit in one of three ways:</p>\n<ul>\n<li>The method 'returns'. As in, no exception is thrown out of the method - exceptions might be thrown, but they are caught. Then upon exiting the method, the transaction is committed. <strong>Note that this describes your snippet - which does not throw an exception <em>out</em> of the method</strong>. Hence, the write to table A and B will both happen and be visible from outside parties!</li>\n<li>The method finishes by throwing an UNCHECKED exception. Spring's opinion is that this is 'unexpected', and indicates the result of executing the method is failure - the entire transaction is aborted. the write to table A will not be visible to other transactions, ever, nor would the write to table B (let's imagine that after the catch block, you have <code>throw new RuntimeException()</code>, which is unchecked).</li>\n<li>The method ends by throwing a CHECKED exception out. Spring's opinion is that this must mean that it is 'intentional', and indicates that the code succeeded; it simply chose to &quot;return&quot; an exception instead of finishing up normally. The transaction is committed - the write to table A will be visible to others. The write to table B will also be visible to others (this is assuming that you add <code>throw new IOException()</code> to the end of your accept method, and of course that your method is allowed to do that. Which in java means it has to be declared as <code>void accept() throws IOException {}</code>, of course.</li>\n</ul>\n<p>The notion of checked and unchecked <strong>does not exist</strong> in kotlin - in kotlin, all exceptions are 'unchecked', effectively. However, spring doesn't go: &quot;OOoooohhhh, kotlin user, I'll just treat everything as if it was unchecked, i.e. any exceptions thrown result in a aborted transaction&quot;. Nope, so, you must <strong>learn what checked exceptions are</strong> even if you write only kotlin.</p>\n<p>Unchecked exceptions are all throwables that have in their type hierarchy either <code>java.lang.Error</code> (such as <code>java.lang.InternalError</code>, which extends <code>j.l.Error</code>), or <code>java.lang.RuntimeException</code>, such as <code>NullPointerException</code>.</p>\n<p>All other throwables are 'checked'. Such as <code>IOException</code>, which extends Exception. which extends Throwable. <code>Exception</code> itself is <em>checked</em>.</p>\n<p>NB: You can add interceptors and the like to change this behaviour; &quot;checked exception means we need to commit, checked means we need to abort&quot; is merely the default behaviour.</p>\n"}],"owner":{"account_id":10944930,"reputation":537,"user_id":8043394,"display_name":"Zeeshan Shamsuddeen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":825,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73322460,"answer_count":2,"score":0,"last_activity_date":1660228462,"creation_date":1660227900,"question_id":73322370,"body_markdown":"I am pretty new to Kotlin and Spring and had a very basic doubt. Consider a function like this:\r\n\r\n```\r\n@transaction\r\nfun accept() {\r\n    try {\r\n        write to table A\r\n        throw Exception()\r\n    } catch(){\r\n        write to table B\r\n    }\r\n}\r\n```\r\n\r\nQuestion: I understand that Table B write will be successful, but will the table A write succeed? and why?\r\nAny pointers to","title":"Spring transaction and try catch blocks","body":"<p>I am pretty new to Kotlin and Spring and had a very basic doubt. Consider a function like this:</p>\n<pre><code>@transaction\nfun accept() {\n    try {\n        write to table A\n        throw Exception()\n    } catch(){\n        write to table B\n    }\n}\n</code></pre>\n<p>Question: I understand that Table B write will be successful, but will the table A write succeed? and why?\nAny pointers to</p>\n"},{"tags":["java","exception"],"comments":[{"owner":{"account_id":6781150,"reputation":2228,"user_id":5221346,"accept_rate":60,"display_name":"RaminS"},"score":0,"creation_date":1550369767,"post_id":54729507,"comment_id":96242537,"body_markdown":"It is saying that it is a compilation error if it is not the case. It is not saying that it isn&#39;t a compilation error if it is the case, suggesting that there are instances where it does compile, this not being one of those instances.","body":"It is saying that it is a compilation error if it is not the case. It is not saying that it isn&#39;t a compilation error if it is the case, suggesting that there are instances where it does compile, this not being one of those instances."}],"answers":[{"tags":[],"owner":{"account_id":11366790,"reputation":55,"user_id":8333485,"display_name":"J&#250;lio Guedes"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1550372181,"creation_date":1550372181,"answer_id":54729724,"question_id":54729507,"body_markdown":"It is very tricky indeed. To understand this, you should go back to the concept of inheritance in Object Oriented Paradigm:\r\n\r\n - If I want to create an ArrayList, I could do this in two different ways:\r\n 1. The first one is ignoring all the inheritance concept and hardcoding the ArrayList and setting its type as ArrayList itself:\r\n        ```java\r\n        ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n        ```\r\n 2. The second one is following the concept of inheritance, and we try to instance it following a higher level class/interface:\r\n        ```java\r\n        List&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n        ```\r\n\r\nThis second approach is better for many reasons that I will not mention because its not in the scope of the answer, but since ArrayList inherits from List, we can instantiate a new ArrayList as a List object, but it is impossible to do something like this because `List` does not extend or inherits from `ArrayList`:\r\n\r\n```java\r\nArrayList&lt;String&gt; list = new List&lt;String&gt;();\r\n```\r\n\r\nThe same idea applies to Java&#39;s Catchable Exceptions. Following your example, if I have:\r\n\r\n```java\r\nclass A extends Exception {}\r\nclass B extends A {}\r\nclass C extends B {}\r\n```\r\n\r\nWhen I&#39;m trying to catch an exception, I want to try the lower level class (`C`) (i.e. more specific) first, because I have a greater certainty of what it means:\r\n\r\n```java\r\ntry {\r\n    // something here that throws C\r\n} catch (C exc) {\r\n    // Great! Its C! I know exactly what should I do!\r\n} catch (B exc) {\r\n    // Not that great, it might not be that hard to figure out what caused this\r\n} catch (A exc) {\r\n    // I still have some idea of what might have thrown this exception\r\n} catch (Exception e) {\r\n    // Oh boy, its not an exception that I mapped before... It might be harder than I thought... :(\r\n}\r\n```\r\n\r\nBut we have to follow the same line of thought from `ArrayList` not being able to receive a `List` object in Exceptions:\r\n\r\n - a C exception can be caught by `catch (C exc)`, `catch (B exc)`, `catch (A exc)` and `catch (Exception e)`\r\n - a B exception can be caught by `catch (B exc)`, `catch (A exc)` and `catch (Exception e)`\r\n - an A exception can be caught by `catch (A exc)` and `catch (Exception e)`\r\n - and so on...\r\n\r\nSince A is from a &quot;higher level&quot; than B, it cannot be caught by `catch (B exc)`. This is why it does not compile in your example:\r\n\r\n```java\r\nvoid f() {\r\n    try {\r\n        throw new A();\r\n    } catch (B b) {  // will not compile\r\n\r\n    }\r\n}\r\n```\r\n\r\nInside the specification in the [page you linked](https://docs.oracle.com/javase/specs/jls/se8/html/jls-11.html#jls-11.2.3) there is a code snippet right before 11.3 that exemplifies what you asked, because as I already explained, you understood it right:\r\n\r\n&gt; It is a compile-time error if a catch clause can catch checked exception class E1 and it is not the case that the try block corresponding to the catch clause can throw a checked exception class that is a subclass or superclass of E1, unless E1 is Exception or a superclass of Exception.\r\n\r\nThis means that you cannot catch a subclass of the previous catch block, and java compilers will see it as an error. For example, if you try to do this\r\n\r\n```java\r\ntry {\r\n    throw new C();\r\n} catch (A exc) {\r\n    // do something here, because the exception will be caught\r\n} catch (B exc) {\r\n    // since the exception has been caught before and B is subclass of A,\r\n    // this causes the compilation error that JLS was talking about:\r\n    // you cannot catch a subclass of a class previously caught.\r\n}\r\n```","title":"What are the rules of catchable Exceptions in try catch blocks in Java?","body":"<p>It is very tricky indeed. To understand this, you should go back to the concept of inheritance in Object Oriented Paradigm:</p>\n\n<ul>\n<li>If I want to create an ArrayList, I could do this in two different ways:\n\n<ol>\n<li>The first one is ignoring all the inheritance concept and hardcoding the ArrayList and setting its type as ArrayList itself:\n\n<pre class=\"lang-java prettyprint-override\"><code>ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\n</code></pre></li>\n<li>The second one is following the concept of inheritance, and we try to instance it following a higher level class/interface:\n\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; list = new ArrayList&lt;String&gt;();\n</code></pre></li>\n</ol></li>\n</ul>\n\n<p>This second approach is better for many reasons that I will not mention because its not in the scope of the answer, but since ArrayList inherits from List, we can instantiate a new ArrayList as a List object, but it is impossible to do something like this because <code>List</code> does not extend or inherits from <code>ArrayList</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>ArrayList&lt;String&gt; list = new List&lt;String&gt;();\n</code></pre>\n\n<p>The same idea applies to Java's Catchable Exceptions. Following your example, if I have:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>class A extends Exception {}\nclass B extends A {}\nclass C extends B {}\n</code></pre>\n\n<p>When I'm trying to catch an exception, I want to try the lower level class (<code>C</code>) (i.e. more specific) first, because I have a greater certainty of what it means:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    // something here that throws C\n} catch (C exc) {\n    // Great! Its C! I know exactly what should I do!\n} catch (B exc) {\n    // Not that great, it might not be that hard to figure out what caused this\n} catch (A exc) {\n    // I still have some idea of what might have thrown this exception\n} catch (Exception e) {\n    // Oh boy, its not an exception that I mapped before... It might be harder than I thought... :(\n}\n</code></pre>\n\n<p>But we have to follow the same line of thought from <code>ArrayList</code> not being able to receive a <code>List</code> object in Exceptions:</p>\n\n<ul>\n<li>a C exception can be caught by <code>catch (C exc)</code>, <code>catch (B exc)</code>, <code>catch (A exc)</code> and <code>catch (Exception e)</code></li>\n<li>a B exception can be caught by <code>catch (B exc)</code>, <code>catch (A exc)</code> and <code>catch (Exception e)</code></li>\n<li>an A exception can be caught by <code>catch (A exc)</code> and <code>catch (Exception e)</code></li>\n<li>and so on...</li>\n</ul>\n\n<p>Since A is from a \"higher level\" than B, it cannot be caught by <code>catch (B exc)</code>. This is why it does not compile in your example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>void f() {\n    try {\n        throw new A();\n    } catch (B b) {  // will not compile\n\n    }\n}\n</code></pre>\n\n<p>Inside the specification in the <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-11.html#jls-11.2.3\" rel=\"nofollow noreferrer\">page you linked</a> there is a code snippet right before 11.3 that exemplifies what you asked, because as I already explained, you understood it right:</p>\n\n<blockquote>\n  <p>It is a compile-time error if a catch clause can catch checked exception class E1 and it is not the case that the try block corresponding to the catch clause can throw a checked exception class that is a subclass or superclass of E1, unless E1 is Exception or a superclass of Exception.</p>\n</blockquote>\n\n<p>This means that you cannot catch a subclass of the previous catch block, and java compilers will see it as an error. For example, if you try to do this</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    throw new C();\n} catch (A exc) {\n    // do something here, because the exception will be caught\n} catch (B exc) {\n    // since the exception has been caught before and B is subclass of A,\n    // this causes the compilation error that JLS was talking about:\n    // you cannot catch a subclass of a class previously caught.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7341384,"reputation":73,"user_id":5590757,"display_name":"Patrick Anderson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550373977,"creation_date":1550373220,"answer_id":54729793,"question_id":54729507,"body_markdown":"note a checked exception means any exception class not extending Error or RuntimeException. It is simply saying that if you declare in the catch a checked exception other than Exception or throwable, the compiler will complain if the Exception can never be thrown by the try block.\r\n\r\nI believe the super class of E1 may be referring to the case where an instance of E1 or a subclass of E1 may be stored as a super-class of E1. In this case the compiler may run further checks outside the logic stated to ensure that the E1 super class instance is not in fact E1 or a subclass of E1 before it complains.\r\n\r\nIf we are talking about the language specification, the actual output of the compiler may vary for the further checks part provided the output is the same for the situation specifically stated. One compiler may actually check if an E1 instance can be thrown as a super-class while another may simply show a compilation error, provided each implementation otherwise adheres to the spec.","title":"What are the rules of catchable Exceptions in try catch blocks in Java?","body":"<p>note a checked exception means any exception class not extending Error or RuntimeException. It is simply saying that if you declare in the catch a checked exception other than Exception or throwable, the compiler will complain if the Exception can never be thrown by the try block.</p>\n\n<p>I believe the super class of E1 may be referring to the case where an instance of E1 or a subclass of E1 may be stored as a super-class of E1. In this case the compiler may run further checks outside the logic stated to ensure that the E1 super class instance is not in fact E1 or a subclass of E1 before it complains.</p>\n\n<p>If we are talking about the language specification, the actual output of the compiler may vary for the further checks part provided the output is the same for the situation specifically stated. One compiler may actually check if an E1 instance can be thrown as a super-class while another may simply show a compilation error, provided each implementation otherwise adheres to the spec.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1550376044,"creation_date":1550376044,"answer_id":54729991,"question_id":54729507,"body_markdown":"I think that the easy way to understand this is with a concrete example:\r\n\r\n    public void doOpen(File file) throws IOException {\r\n        new FileInputStream(file);\r\n    }\r\n\r\nNote that the method is *declared* as throwing `IOException` rather than its subclass `FileNotFoundException`.\r\n\r\nNow let us try to catch the exception that we know will be thrown when a file does not exist:\r\n\r\n    try {\r\n        doOpen(someFile);\r\n    } catch (FileNotFoundException ex) {\r\n        // print a message\r\n    } \r\n\r\nThe JLS says:\r\n\r\n&gt; It is a compile-time error if a catch clause can catch checked exception class `E1` and it is not the case that the try block corresponding to the catch clause can throw a checked exception class that is a subclass **or superclass of `E1`**, unless `E1` is `Exception` or a superclass of `Exception`. \r\n\r\nIn the catch clause in our example code, the `E1` in the JLS is `FileNotFoundException`.  The  method is declared as throwing `IOException`.  If the highlighted clause were not there (i.e. &quot;or superclass of `E1`&quot;) then that catch would not be legal.  But it clearly *should* be legal, since the `doOpen` method *clearly could* throw `FileNotFoundException`.","title":"What are the rules of catchable Exceptions in try catch blocks in Java?","body":"<p>I think that the easy way to understand this is with a concrete example:</p>\n\n<pre><code>public void doOpen(File file) throws IOException {\n    new FileInputStream(file);\n}\n</code></pre>\n\n<p>Note that the method is <em>declared</em> as throwing <code>IOException</code> rather than its subclass <code>FileNotFoundException</code>.</p>\n\n<p>Now let us try to catch the exception that we know will be thrown when a file does not exist:</p>\n\n<pre><code>try {\n    doOpen(someFile);\n} catch (FileNotFoundException ex) {\n    // print a message\n} \n</code></pre>\n\n<p>The JLS says:</p>\n\n<blockquote>\n  <p>It is a compile-time error if a catch clause can catch checked exception class <code>E1</code> and it is not the case that the try block corresponding to the catch clause can throw a checked exception class that is a subclass <strong>or superclass of <code>E1</code></strong>, unless <code>E1</code> is <code>Exception</code> or a superclass of <code>Exception</code>. </p>\n</blockquote>\n\n<p>In the catch clause in our example code, the <code>E1</code> in the JLS is <code>FileNotFoundException</code>.  The  method is declared as throwing <code>IOException</code>.  If the highlighted clause were not there (i.e. \"or superclass of <code>E1</code>\") then that catch would not be legal.  But it clearly <em>should</em> be legal, since the <code>doOpen</code> method <em>clearly could</em> throw <code>FileNotFoundException</code>.</p>\n"}],"owner":{"account_id":1202806,"reputation":23213,"user_id":1173112,"accept_rate":89,"display_name":"Koray Tugay"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1207,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":54729991,"answer_count":3,"score":1,"last_activity_date":1660228461,"creation_date":1550369395,"question_id":54729507,"body_markdown":"I was reading the Java Language Specification, and [this][1] part caught my attention:\r\n\r\n&gt; It is a compile-time error if a catch clause can catch checked\r\n&gt; exception class E1 and it is not the case that the try block\r\n&gt; corresponding to the catch clause can throw a checked exception class\r\n&gt; that is a subclass or **superclass of E1,** unless E1 is Exception or a\r\n&gt; superclass of Exception.\r\n\r\nThe part I do not understand is **emphasized in bold** above.\r\n\r\nGiven the following hierarchy\r\n\r\n    class A extends Exception {}\r\n    class B extends A {}\r\n    class C extends B {}\r\n\r\nHere is what I understand from:\r\n\r\n&gt; the try block corresponding to the catch clause can throw a checked exception class that is a subclass of E1\r\n\r\n    void f() {\r\n        try {\r\n            throw new C();\r\n        } catch (B b) {\r\n\r\n        }\r\n    }\r\n\r\nwhich compiles fine..\r\n\r\nBut what is meant by\r\n\r\n&gt; the try block corresponding to the catch clause can throw a checked\r\n&gt; exception class that is a superclass of E1\r\n\r\n?\r\n\r\nThis is what I understand, which does not compile (I wasn&#39;t expecting it to, but the JLS makes me think it would)\r\n\r\n    void f() {\r\n        try {\r\n            throw new A();\r\n        } catch (B b) {  // will not compile\r\n\r\n        }\r\n    }\r\n\r\nSince it is highly unlikely that the specification is wrong, can you help me understand what is meant by the part I am confused with, preferably with an example that demonstrates?\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se8/html/jls-11.html#jls-11.2.3","title":"What are the rules of catchable Exceptions in try catch blocks in Java?","body":"<p>I was reading the Java Language Specification, and <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-11.html#jls-11.2.3\" rel=\"nofollow noreferrer\">this</a> part caught my attention:</p>\n<blockquote>\n<p>It is a compile-time error if a catch clause can catch checked\nexception class E1 and it is not the case that the try block\ncorresponding to the catch clause can throw a checked exception class\nthat is a subclass or <strong>superclass of E1,</strong> unless E1 is Exception or a\nsuperclass of Exception.</p>\n</blockquote>\n<p>The part I do not understand is <strong>emphasized in bold</strong> above.</p>\n<p>Given the following hierarchy</p>\n<pre><code>class A extends Exception {}\nclass B extends A {}\nclass C extends B {}\n</code></pre>\n<p>Here is what I understand from:</p>\n<blockquote>\n<p>the try block corresponding to the catch clause can throw a checked exception class that is a subclass of E1</p>\n</blockquote>\n<pre><code>void f() {\n    try {\n        throw new C();\n    } catch (B b) {\n\n    }\n}\n</code></pre>\n<p>which compiles fine..</p>\n<p>But what is meant by</p>\n<blockquote>\n<p>the try block corresponding to the catch clause can throw a checked\nexception class that is a superclass of E1</p>\n</blockquote>\n<p>?</p>\n<p>This is what I understand, which does not compile (I wasn't expecting it to, but the JLS makes me think it would)</p>\n<pre><code>void f() {\n    try {\n        throw new A();\n    } catch (B b) {  // will not compile\n\n    }\n}\n</code></pre>\n<p>Since it is highly unlikely that the specification is wrong, can you help me understand what is meant by the part I am confused with, preferably with an example that demonstrates?</p>\n"},{"tags":["java","hibernate","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":11732873,"reputation":734,"user_id":8587732,"display_name":"Vitaly Chura"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660228383,"creation_date":1660228383,"answer_id":73322470,"question_id":73322469,"body_markdown":"After debugging for 2 days, I found a solution unintentionally. We use [hibernate-types][1] library for mapping of jsonb fields and there was a warning in the log:\r\n```\r\n[2m2022-08-11 12:18:32.709[0;39m [33m WARN[0;39m [35m8[0;39m [2m---[0;39m [2m[           main]\r\n[0;39m [36mHibernate Types                         [0;39m [2m:[0;39m The class \r\ncom.zpot.main.data.entity.area.AreaMeterReading class should override both the equals and hashCode methods\r\n based on the JSON object value it represents!\r\n```\r\n\r\nI overrode the equals and hashcode and it started working, not sure what was the reason for not working without them.\r\n\r\n  [1]: https://github.com/vladmihalcea/hibernate-types","title":"Hibernate executes update query multiple times and entity is not actually saved","body":"<p>After debugging for 2 days, I found a solution unintentionally. We use <a href=\"https://github.com/vladmihalcea/hibernate-types\" rel=\"nofollow noreferrer\">hibernate-types</a> library for mapping of jsonb fields and there was a warning in the log:</p>\n<pre><code>[2m2022-08-11 12:18:32.709[0;39m [33m WARN[0;39m [35m8[0;39m [2m---[0;39m [2m[           main]\n[0;39m [36mHibernate Types                         [0;39m [2m:[0;39m The class \ncom.zpot.main.data.entity.area.AreaMeterReading class should override both the equals and hashCode methods\n based on the JSON object value it represents!\n</code></pre>\n<p>I overrode the equals and hashcode and it started working, not sure what was the reason for not working without them.</p>\n"}],"owner":{"account_id":11732873,"reputation":734,"user_id":8587732,"display_name":"Vitaly Chura"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":381,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660228383,"creation_date":1660228383,"question_id":73322469,"body_markdown":"I have the an entity with the next field:\r\n```\r\n\r\n@Entity\r\n@TypeDef(name = &quot;jsonb&quot;, typeClass = JsonBinaryType.class)\r\npublic class Area extends CreatedDateAuditedEntity {\r\n\r\n@Id\r\n@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;area_seq&quot;)\r\n@SequenceGenerator(name = &quot;area_seq&quot;, sequenceName = &quot;area_seq&quot;, allocationSize = 1)\r\n@Column(name = &quot;a_id&quot;, unique = true, updatable = false, nullable = false)\r\nprivate Long id;\r\n\r\n@Type(type = &quot;jsonb&quot;)\r\n@Column(name = &quot;meter_readings&quot;, columnDefinition = &quot;jsonb&quot;)\r\nprivate List&lt;AreaMeterReading&gt; meterReadings = new ArrayList&lt;&gt;();\r\n```\r\n\r\nThe rest of the columns are omitted because there many of them and I don&#39;t think they are relevant.\r\n\r\nWhen I update the `meterReadings` field and then call `repository.save()`, it works locally, but on our development environment it doesn&#39;t. I see in Hibernate logs, that update of that entity is executed multiple times, the first 1 or 2 times with the new value and then a few times with the old value like so:\r\n\r\n```\r\n2022-08-11 11:40:39.874 DEBUG 6 --- [nio-8081-exec-1] c.z.main.core.service.area.AreaService   : Saved area 1373 with meter_reading values - [AreaMeterReading{meterId=&#39;MeterId1&#39;, meterReading=100}]\r\n2022-08-11 11:40:39.874 DEBUG 6 --- [nio-8081-exec-1] c.z.m.c.service.queue.ProducerService    : Sending message to exchange=zpot-test, queue=common-cost-reorganization-test and for property with ID = 1234\r\n2022-08-11 11:40:39.876 DEBUG 6 --- [nio-8081-exec-1] .m.c.s.c.CommonCostReorganizationService : Sent common cost reorganization message for property with ID=1234\r\n2022-08-11 11:40:39.876 DEBUG 6 --- [nio-8081-exec-1] org.hibernate.SQL                        : select section0_.s_id as s_id1_35_0_, section0_.created_at as created_2_35_0_, section0_.a_id as a_id7_35_0_, section0_.erp_code as erp_code3_35_0_, section0_.name as name4_35_0_, section0_.p_id as p_id8_35_0_, section0_.reference_code as referenc5_35_0_, section0_.removed_at as removed_6_35_0_ from main.section section0_ where section0_.s_id=? and ( section0_.removed_at IS NULL)\r\n2022-08-11 11:40:39.877 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [557]\r\n2022-08-11 11:40:39.878 DEBUG 6 --- [ntContainer#0-1] c.z.m.c.service.queue.ConsumerService    : Received cost participation reorganization message for property with ID=1234 and action date=2022-08-11 to process\r\n2022-08-11 11:40:39.879 DEBUG 6 --- [nio-8081-exec-1] org.hibernate.SQL                        : select attachment0_.a_id as a_id7_22_0_, attachment0_.ma_id as ma_id1_22_0_, attachment0_.ma_id as ma_id1_22_1_, attachment0_.created_at as created_2_22_1_, attachment0_.a_id as a_id7_22_1_, attachment0_.default_image as default_3_22_1_, attachment0_.file_id as file_id4_22_1_, attachment0_.p_id as p_id8_22_1_, attachment0_.reference_type as referenc5_22_1_, attachment0_.removed_at as removed_6_22_1_ from main.main_attachment attachment0_ where attachment0_.a_id=?\r\n2022-08-11 11:40:39.880 DEBUG 6 --- [ntContainer#0-1] org.hibernate.SQL                        : select property0_.p_id as p_id1_28_, property0_.created_at as created_2_28_, property0_.actual_usage as actual_u3_28_, property0_.a_id as a_id37_28_, property0_.autocalculate_areas as autocalc4_28_, property0_.bank as bank5_28_, property0_.bnr as bnr6_28_, property0_.common_costs as common_c7_28_, property0_.common_costs_per_m2 as common_c8_28_, property0_.contract_number as contract9_28_, property0_.created_by as created10_28_, property0_.erp_code as erp_cod11_28_, property0_.exclusive_area as exclusi12_28_, property0_.gnr as gnr13_28_, property0_.internal_key as interna14_28_, property0_.land_area as land_ar15_28_, property0_.name as name16_28_, property0_.op_costs as op_cost17_28_, property0_.organization_id as organiz18_28_, property0_.post_a_id as post_a_38_28_, property0_.property_tax as propert19_28_, property0_.purchase_date as purchas20_28_, property0_.purchase_price as purchas21_28_, property0_.reference_code as referen22_28_, property0_.removed_at as removed23_28_, property0_.rented_area as rented_24_28_, property0_.sale_date as sale_da25_28_, property0_.sale_price as sale_pr26_28_, property0_.snr as snr27_28_, property0_.status as status28_28_, property0_.takeover_date as takeove29_28_, property0_.total_building_area as total_b30_28_, property0_.turnover_reporting as turnove31_28_, property0_.type as type32_28_, property0_.vat_coverage as vat_cov33_28_, property0_.vat_type as vat_typ34_28_, property0_.with_vat as with_va35_28_, property0_.year_built as year_bu36_28_ from main.property property0_ where property0_.p_id=? and (property0_.removed_at is null)\r\n2022-08-11 11:40:39.881 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [1234]\r\n2022-08-11 11:40:39.882 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [1373]\r\n2022-08-11 11:40:39.883 DEBUG 6 --- [ntContainer#0-1] org.hibernate.SQL                        : select sections0_.p_id as p_id8_35_0_, sections0_.s_id as s_id1_35_0_, sections0_.s_id as s_id1_35_1_, sections0_.created_at as created_2_35_1_, sections0_.a_id as a_id7_35_1_, sections0_.erp_code as erp_code3_35_1_, sections0_.name as name4_35_1_, sections0_.p_id as p_id8_35_1_, sections0_.reference_code as referenc5_35_1_, sections0_.removed_at as removed_6_35_1_ from main.section sections0_ where ( sections0_.removed_at IS NULL) and sections0_.p_id=?\r\n2022-08-11 11:40:39.884 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [1234]\r\n2022-08-11 11:40:39.884 DEBUG 6 --- [nio-8081-exec-1] org.hibernate.SQL                        : select areaaderro0_.ad_id as ad_id1_2_0_, areaaderro0_.e_name as e_name2_2_0_, areaaderro0_.e_value as e_value3_2_0_, areaaderro0_.e_level as e_level4_2_0_, areaaderro0_.message as message5_2_0_, areaaderro0_.status as status6_2_0_ from main.area_ad_error areaaderro0_ where areaaderro0_.ad_id=?\r\n2022-08-11 11:40:39.885 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [1326]\r\n2022-08-11 11:40:39.885 DEBUG 6 --- [ntContainer#0-1] org.hibernate.SQL                        : select areas0_.s_id as s_id36_1_0_, areas0_.a_id as a_id1_1_0_, areas0_.a_id as a_id1_1_1_, areas0_.created_at as created_2_1_1_, areas0_.ad_id as ad_id35_1_1_, areas0_.area_height as area_hei3_1_1_, areas0_.bathroom as bathroom4_1_1_, areas0_.cleaning_area as cleaning5_1_1_, areas0_.comment as comment6_1_1_, areas0_.common_area as common_a7_1_1_, areas0_.common_for as common_f8_1_1_, areas0_.divisible_area as divisibl9_1_1_, areas0_.end_date as end_dat10_1_1_, areas0_.erp_code as erp_cod11_1_1_, areas0_.exclusive_area as exclusi12_1_1_, areas0_.floor as floor13_1_1_, areas0_.furnished as furnish14_1_1_, areas0_.gross_circumference as gross_c15_1_1_, areas0_.inclusive_area as inclusi16_1_1_, areas0_.inventory_list as invento17_1_1_, areas0_.kitchen as kitchen18_1_1_, areas0_.market_price as market_19_1_1_, areas0_.meter_readings as meter_r20_1_1_, areas0_.name as name21_1_1_, areas0_.net_circumference as net_cir22_1_1_, areas0_.parking_spaces_number as parking23_1_1_, areas0_.property_type as propert24_1_1_, areas0_.reference_code as referen25_1_1_, areas0_.removed_at as removed26_1_1_, areas0_.rent_option as rent_op27_1_1_, areas0_.rooms_number as rooms_n28_1_1_, areas0_.s_id as s_id36_1_1_, areas0_.special_condition as special29_1_1_, areas0_.stalls_number as stalls_30_1_1_, areas0_.start_date as start_d31_1_1_, areas0_.status as status32_1_1_, areas0_.at_id as at_id37_1_1_, areas0_.vat_reporting as vat_rep33_1_1_, areas0_.vat_type as vat_typ34_1_1_ from main.area areas0_ where areas0_.s_id=?\r\n2022-08-11 11:40:39.886 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [557]\r\n2022-08-11 11:40:39.890 DEBUG 6 --- [ntContainer#0-1] org.hibernate.SQL                        : select areatype0_.at_id as at_id1_6_0_, areatype0_.created_at as created_2_6_0_, areatype0_.name as name3_6_0_, areatype0_.organization_id as organiza4_6_0_, areatype0_.removed_at as removed_5_6_0_, areatype0_.class as class6_6_0_ from main.area_type areatype0_ where areatype0_.at_id=?\r\n2022-08-11 11:40:39.891 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [5400]\r\n2022-08-11 11:40:39.892 DEBUG 6 --- [ntContainer#0-1] org.hibernate.SQL                        : select areatype0_.at_id as at_id1_6_0_, areatype0_.created_at as created_2_6_0_, areatype0_.name as name3_6_0_, areatype0_.organization_id as organiza4_6_0_, areatype0_.removed_at as removed_5_6_0_, areatype0_.class as class6_6_0_ from main.area_type areatype0_ where areatype0_.at_id=?\r\n2022-08-11 11:40:39.892 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [5390]\r\n2022-08-11 11:40:39.893 DEBUG 6 --- [nio-8081-exec-1] org.hibernate.SQL                        : update main.area set ad_id=?, area_height=?, bathroom=?, cleaning_area=?, comment=?, common_area=?, common_for=?, divisible_area=?, end_date=?, erp_code=?, exclusive_area=?, floor=?, furnished=?, gross_circumference=?, inclusive_area=?, inventory_list=?, kitchen=?, market_price=?, meter_readings=?, name=?, net_circumference=?, parking_spaces_number=?, property_type=?, reference_code=?, removed_at=?, rent_option=?, rooms_number=?, special_condition=?, stalls_number=?, start_date=?, status=?, at_id=?, vat_reporting=?, vat_type=? where a_id=?\r\n2022-08-11 11:40:39.894 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [1326]\r\n2022-08-11 11:40:39.894 DEBUG 6 --- [ntContainer#0-1] org.hibernate.SQL                        : select areatype0_.at_id as at_id1_6_0_, areatype0_.created_at as created_2_6_0_, areatype0_.name as name3_6_0_, areatype0_.organization_id as organiza4_6_0_, areatype0_.removed_at as removed_5_6_0_, areatype0_.class as class6_6_0_ from main.area_type areatype0_ where areatype0_.at_id=?\r\n2022-08-11 11:40:39.895 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [5399]\r\n2022-08-11 11:40:39.895 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [2] as [NUMERIC] - [null]\r\n2022-08-11 11:40:39.895 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [3] as [BOOLEAN] - [false]\r\n2022-08-11 11:40:39.896 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [4] as [NUMERIC] - [null]\r\n2022-08-11 11:40:39.897 DEBUG 6 --- [ntContainer#0-1] org.hibernate.SQL                        : select settlement0_.sp_id as sp_id1_36_, settlement0_.created_at as created_2_36_, settlement0_.common_costs_updated_at as common_c3_36_, settlement0_.end_date as end_date4_36_, settlement0_.p_id as p_id8_36_, settlement0_.start_date as start_da5_36_, settlement0_.status as status6_36_, settlement0_.year as year7_36_ from main.settlement_period settlement0_ where settlement0_.p_id=? and settlement0_.year=? and extract(MONTH FROM settlement0_.start_date)=? and settlement0_.status&lt;&gt;?\r\n2022-08-11 11:40:39.898 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [1234]\r\n2022-08-11 11:40:39.898 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [2] as [INTEGER] - [2022]\r\n2022-08-11 11:40:39.899 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [5] as [VARCHAR] - [null]\r\n2022-08-11 11:40:39.899 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [3] as [INTEGER] - [8]\r\n2022-08-11 11:40:39.899 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [6] as [NUMERIC] - [0]\r\n2022-08-11 11:40:39.899 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [4] as [VARCHAR] - [SUBMITTED]\r\n2022-08-11 11:40:39.900 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [7] as [VARCHAR] - [null]\r\n2022-08-11 11:40:39.900 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [8] as [BOOLEAN] - [true]\r\n2022-08-11 11:40:39.901 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [9] as [DATE] - [2023-12-31]\r\n2022-08-11 11:40:39.901 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [10] as [VARCHAR] - [null]\r\n2022-08-11 11:40:39.901 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [11] as [NUMERIC] - [100]\r\n2022-08-11 11:40:39.902 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [12] as [SMALLINT] - [1]\r\n2022-08-11 11:40:39.902 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [13] as [BOOLEAN] - [false]\r\n2022-08-11 11:40:39.902 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [14] as [NUMERIC] - [null]\r\n2022-08-11 11:40:39.902 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [15] as [NUMERIC] - [100]\r\n2022-08-11 11:40:39.903 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [16] as [VARCHAR] - [null]\r\n2022-08-11 11:40:39.903 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [17] as [BOOLEAN] - [true]\r\n2022-08-11 11:40:39.903 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [18] as [NUMERIC] - [null]\r\n2022-08-11 11:40:39.904 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [19] as [OTHER] - [[AreaMeterReading{meterId=&#39;MeterId1&#39;, meterReading=100}]]\r\n2022-08-11 11:40:39.904 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [19] as [OTHER] - [[AreaMeterReading{meterId=&#39;MeterId1&#39;, meterReading=100}]]\r\n2022-08-11 11:40:39.904 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [20] as [VARCHAR] - [Test area 1]\r\n2022-08-11 11:40:39.905 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [21] as [NUMERIC] - [null]\r\n2022-08-11 11:40:39.905 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [22] as [INTEGER] - [null]\r\n2022-08-11 11:40:39.905 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [23] as [VARCHAR] - [null]\r\n2022-08-11 11:40:39.907 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [24] as [VARCHAR] - [null]\r\n2022-08-11 11:40:39.907 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [25] as [TIMESTAMP] - [null]\r\n2022-08-11 11:40:39.908 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [26] as [VARCHAR] - [null]\r\n2022-08-11 11:40:39.908 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [27] as [INTEGER] - [null]\r\n2022-08-11 11:40:39.908 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [28] as [VARCHAR] - [null]\r\n2022-08-11 11:40:39.908 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [29] as [INTEGER] - [null]\r\n2022-08-11 11:40:39.909 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [30] as [DATE] - [2022-01-01]\r\n2022-08-11 11:40:39.909 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [31] as [VARCHAR] - [OCCUPIED]\r\n2022-08-11 11:40:39.909 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [32] as [BIGINT] - [5399]\r\n2022-08-11 11:40:39.909 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [33] as [BOOLEAN] - [true]\r\n2022-08-11 11:40:39.909 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [34] as [VARCHAR] - [COMPLIANT]\r\n2022-08-11 11:40:39.910 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [35] as [BIGINT] - [1373]\r\n2022-08-11 11:40:39.917 DEBUG 6 --- [ntContainer#0-1] org.hibernate.SQL                        : update main.area set ad_id=?, area_height=?, bathroom=?, cleaning_area=?, comment=?, common_area=?, common_for=?, divisible_area=?, end_date=?, erp_code=?, exclusive_area=?, floor=?, furnished=?, gross_circumference=?, inclusive_area=?, inventory_list=?, kitchen=?, market_price=?, meter_readings=?, name=?, net_circumference=?, parking_spaces_number=?, property_type=?, reference_code=?, removed_at=?, rent_option=?, rooms_number=?, special_condition=?, stalls_number=?, start_date=?, status=?, at_id=?, vat_reporting=?, vat_type=? where a_id=?\r\n2022-08-11 11:40:39.917 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [1326]\r\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [2] as [NUMERIC] - [null]\r\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [3] as [BOOLEAN] - [false]\r\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [4] as [NUMERIC] - [null]\r\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [5] as [VARCHAR] - [null]\r\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [6] as [NUMERIC] - [0.00]\r\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [7] as [VARCHAR] - [null]\r\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [8] as [BOOLEAN] - [true]\r\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [9] as [DATE] - [2023-12-31]\r\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [10] as [VARCHAR] - [null]\r\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [11] as [NUMERIC] - [100.00]\r\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [12] as [SMALLINT] - [1]\r\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [13] as [BOOLEAN] - [false]\r\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [14] as [NUMERIC] - [null]\r\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [15] as [NUMERIC] - [100.00]\r\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [16] as [VARCHAR] - [null]\r\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [17] as [BOOLEAN] - [true]\r\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [18] as [NUMERIC] - [null]\r\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [19] as [OTHER] - [[AreaMeterReading{meterId=&#39;MeterId1&#39;, meterReading=300}]]\r\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [19] as [OTHER] - [[AreaMeterReading{meterId=&#39;MeterId1&#39;, meterReading=300}]]\r\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [20] as [VARCHAR] - [Test area 1]\r\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [21] as [NUMERIC] - [null]\r\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [22] as [INTEGER] - [null]\r\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [23] as [VARCHAR] - [null]\r\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [24] as [VARCHAR] - [null]\r\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [25] as [TIMESTAMP] - [null]\r\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [26] as [VARCHAR] - [null]\r\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [27] as [INTEGER] - [null]\r\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [28] as [VARCHAR] - [null]\r\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [29] as [INTEGER] - [null]\r\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [30] as [DATE] - [2022-01-01]\r\n2022-08-11 11:40:39.920 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [31] as [VARCHAR] - [OCCUPIED]\r\n2022-08-11 11:40:39.920 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [32] as [BIGINT] - [5399]\r\n2022-08-11 11:40:39.920 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [33] as [BOOLEAN] - [true]\r\n2022-08-11 11:40:39.920 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [34] as [VARCHAR] - [COMPLIANT]\r\n2022-08-11 11:40:39.920 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [35] as [BIGINT] - [1373]\r\n```\r\nWhere `[AreaMeterReading{meterId=&#39;MeterId1&#39;, meterReading=100}]` is the new value of the field and `[AreaMeterReading{meterId=&#39;MeterId1&#39;, meterReading=300}]` the old value.\r\nWhen I check the database after executing an update, I see the old value in the table.\r\n\r\nI cannot debug it property, because I repeat - it doesn&#39;t happen locally, only on our dev environment. I test it on the same branch and there are no other observable differences between our environments.\r\n\r\nWhy could an update happen multiple times, is it some bug?","title":"Hibernate executes update query multiple times and entity is not actually saved","body":"<p>I have the an entity with the next field:</p>\n<pre><code>\n@Entity\n@TypeDef(name = &quot;jsonb&quot;, typeClass = JsonBinaryType.class)\npublic class Area extends CreatedDateAuditedEntity {\n\n@Id\n@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;area_seq&quot;)\n@SequenceGenerator(name = &quot;area_seq&quot;, sequenceName = &quot;area_seq&quot;, allocationSize = 1)\n@Column(name = &quot;a_id&quot;, unique = true, updatable = false, nullable = false)\nprivate Long id;\n\n@Type(type = &quot;jsonb&quot;)\n@Column(name = &quot;meter_readings&quot;, columnDefinition = &quot;jsonb&quot;)\nprivate List&lt;AreaMeterReading&gt; meterReadings = new ArrayList&lt;&gt;();\n</code></pre>\n<p>The rest of the columns are omitted because there many of them and I don't think they are relevant.</p>\n<p>When I update the <code>meterReadings</code> field and then call <code>repository.save()</code>, it works locally, but on our development environment it doesn't. I see in Hibernate logs, that update of that entity is executed multiple times, the first 1 or 2 times with the new value and then a few times with the old value like so:</p>\n<pre><code>2022-08-11 11:40:39.874 DEBUG 6 --- [nio-8081-exec-1] c.z.main.core.service.area.AreaService   : Saved area 1373 with meter_reading values - [AreaMeterReading{meterId='MeterId1', meterReading=100}]\n2022-08-11 11:40:39.874 DEBUG 6 --- [nio-8081-exec-1] c.z.m.c.service.queue.ProducerService    : Sending message to exchange=zpot-test, queue=common-cost-reorganization-test and for property with ID = 1234\n2022-08-11 11:40:39.876 DEBUG 6 --- [nio-8081-exec-1] .m.c.s.c.CommonCostReorganizationService : Sent common cost reorganization message for property with ID=1234\n2022-08-11 11:40:39.876 DEBUG 6 --- [nio-8081-exec-1] org.hibernate.SQL                        : select section0_.s_id as s_id1_35_0_, section0_.created_at as created_2_35_0_, section0_.a_id as a_id7_35_0_, section0_.erp_code as erp_code3_35_0_, section0_.name as name4_35_0_, section0_.p_id as p_id8_35_0_, section0_.reference_code as referenc5_35_0_, section0_.removed_at as removed_6_35_0_ from main.section section0_ where section0_.s_id=? and ( section0_.removed_at IS NULL)\n2022-08-11 11:40:39.877 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [557]\n2022-08-11 11:40:39.878 DEBUG 6 --- [ntContainer#0-1] c.z.m.c.service.queue.ConsumerService    : Received cost participation reorganization message for property with ID=1234 and action date=2022-08-11 to process\n2022-08-11 11:40:39.879 DEBUG 6 --- [nio-8081-exec-1] org.hibernate.SQL                        : select attachment0_.a_id as a_id7_22_0_, attachment0_.ma_id as ma_id1_22_0_, attachment0_.ma_id as ma_id1_22_1_, attachment0_.created_at as created_2_22_1_, attachment0_.a_id as a_id7_22_1_, attachment0_.default_image as default_3_22_1_, attachment0_.file_id as file_id4_22_1_, attachment0_.p_id as p_id8_22_1_, attachment0_.reference_type as referenc5_22_1_, attachment0_.removed_at as removed_6_22_1_ from main.main_attachment attachment0_ where attachment0_.a_id=?\n2022-08-11 11:40:39.880 DEBUG 6 --- [ntContainer#0-1] org.hibernate.SQL                        : select property0_.p_id as p_id1_28_, property0_.created_at as created_2_28_, property0_.actual_usage as actual_u3_28_, property0_.a_id as a_id37_28_, property0_.autocalculate_areas as autocalc4_28_, property0_.bank as bank5_28_, property0_.bnr as bnr6_28_, property0_.common_costs as common_c7_28_, property0_.common_costs_per_m2 as common_c8_28_, property0_.contract_number as contract9_28_, property0_.created_by as created10_28_, property0_.erp_code as erp_cod11_28_, property0_.exclusive_area as exclusi12_28_, property0_.gnr as gnr13_28_, property0_.internal_key as interna14_28_, property0_.land_area as land_ar15_28_, property0_.name as name16_28_, property0_.op_costs as op_cost17_28_, property0_.organization_id as organiz18_28_, property0_.post_a_id as post_a_38_28_, property0_.property_tax as propert19_28_, property0_.purchase_date as purchas20_28_, property0_.purchase_price as purchas21_28_, property0_.reference_code as referen22_28_, property0_.removed_at as removed23_28_, property0_.rented_area as rented_24_28_, property0_.sale_date as sale_da25_28_, property0_.sale_price as sale_pr26_28_, property0_.snr as snr27_28_, property0_.status as status28_28_, property0_.takeover_date as takeove29_28_, property0_.total_building_area as total_b30_28_, property0_.turnover_reporting as turnove31_28_, property0_.type as type32_28_, property0_.vat_coverage as vat_cov33_28_, property0_.vat_type as vat_typ34_28_, property0_.with_vat as with_va35_28_, property0_.year_built as year_bu36_28_ from main.property property0_ where property0_.p_id=? and (property0_.removed_at is null)\n2022-08-11 11:40:39.881 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [1234]\n2022-08-11 11:40:39.882 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [1373]\n2022-08-11 11:40:39.883 DEBUG 6 --- [ntContainer#0-1] org.hibernate.SQL                        : select sections0_.p_id as p_id8_35_0_, sections0_.s_id as s_id1_35_0_, sections0_.s_id as s_id1_35_1_, sections0_.created_at as created_2_35_1_, sections0_.a_id as a_id7_35_1_, sections0_.erp_code as erp_code3_35_1_, sections0_.name as name4_35_1_, sections0_.p_id as p_id8_35_1_, sections0_.reference_code as referenc5_35_1_, sections0_.removed_at as removed_6_35_1_ from main.section sections0_ where ( sections0_.removed_at IS NULL) and sections0_.p_id=?\n2022-08-11 11:40:39.884 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [1234]\n2022-08-11 11:40:39.884 DEBUG 6 --- [nio-8081-exec-1] org.hibernate.SQL                        : select areaaderro0_.ad_id as ad_id1_2_0_, areaaderro0_.e_name as e_name2_2_0_, areaaderro0_.e_value as e_value3_2_0_, areaaderro0_.e_level as e_level4_2_0_, areaaderro0_.message as message5_2_0_, areaaderro0_.status as status6_2_0_ from main.area_ad_error areaaderro0_ where areaaderro0_.ad_id=?\n2022-08-11 11:40:39.885 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [1326]\n2022-08-11 11:40:39.885 DEBUG 6 --- [ntContainer#0-1] org.hibernate.SQL                        : select areas0_.s_id as s_id36_1_0_, areas0_.a_id as a_id1_1_0_, areas0_.a_id as a_id1_1_1_, areas0_.created_at as created_2_1_1_, areas0_.ad_id as ad_id35_1_1_, areas0_.area_height as area_hei3_1_1_, areas0_.bathroom as bathroom4_1_1_, areas0_.cleaning_area as cleaning5_1_1_, areas0_.comment as comment6_1_1_, areas0_.common_area as common_a7_1_1_, areas0_.common_for as common_f8_1_1_, areas0_.divisible_area as divisibl9_1_1_, areas0_.end_date as end_dat10_1_1_, areas0_.erp_code as erp_cod11_1_1_, areas0_.exclusive_area as exclusi12_1_1_, areas0_.floor as floor13_1_1_, areas0_.furnished as furnish14_1_1_, areas0_.gross_circumference as gross_c15_1_1_, areas0_.inclusive_area as inclusi16_1_1_, areas0_.inventory_list as invento17_1_1_, areas0_.kitchen as kitchen18_1_1_, areas0_.market_price as market_19_1_1_, areas0_.meter_readings as meter_r20_1_1_, areas0_.name as name21_1_1_, areas0_.net_circumference as net_cir22_1_1_, areas0_.parking_spaces_number as parking23_1_1_, areas0_.property_type as propert24_1_1_, areas0_.reference_code as referen25_1_1_, areas0_.removed_at as removed26_1_1_, areas0_.rent_option as rent_op27_1_1_, areas0_.rooms_number as rooms_n28_1_1_, areas0_.s_id as s_id36_1_1_, areas0_.special_condition as special29_1_1_, areas0_.stalls_number as stalls_30_1_1_, areas0_.start_date as start_d31_1_1_, areas0_.status as status32_1_1_, areas0_.at_id as at_id37_1_1_, areas0_.vat_reporting as vat_rep33_1_1_, areas0_.vat_type as vat_typ34_1_1_ from main.area areas0_ where areas0_.s_id=?\n2022-08-11 11:40:39.886 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [557]\n2022-08-11 11:40:39.890 DEBUG 6 --- [ntContainer#0-1] org.hibernate.SQL                        : select areatype0_.at_id as at_id1_6_0_, areatype0_.created_at as created_2_6_0_, areatype0_.name as name3_6_0_, areatype0_.organization_id as organiza4_6_0_, areatype0_.removed_at as removed_5_6_0_, areatype0_.class as class6_6_0_ from main.area_type areatype0_ where areatype0_.at_id=?\n2022-08-11 11:40:39.891 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [5400]\n2022-08-11 11:40:39.892 DEBUG 6 --- [ntContainer#0-1] org.hibernate.SQL                        : select areatype0_.at_id as at_id1_6_0_, areatype0_.created_at as created_2_6_0_, areatype0_.name as name3_6_0_, areatype0_.organization_id as organiza4_6_0_, areatype0_.removed_at as removed_5_6_0_, areatype0_.class as class6_6_0_ from main.area_type areatype0_ where areatype0_.at_id=?\n2022-08-11 11:40:39.892 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [5390]\n2022-08-11 11:40:39.893 DEBUG 6 --- [nio-8081-exec-1] org.hibernate.SQL                        : update main.area set ad_id=?, area_height=?, bathroom=?, cleaning_area=?, comment=?, common_area=?, common_for=?, divisible_area=?, end_date=?, erp_code=?, exclusive_area=?, floor=?, furnished=?, gross_circumference=?, inclusive_area=?, inventory_list=?, kitchen=?, market_price=?, meter_readings=?, name=?, net_circumference=?, parking_spaces_number=?, property_type=?, reference_code=?, removed_at=?, rent_option=?, rooms_number=?, special_condition=?, stalls_number=?, start_date=?, status=?, at_id=?, vat_reporting=?, vat_type=? where a_id=?\n2022-08-11 11:40:39.894 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [1326]\n2022-08-11 11:40:39.894 DEBUG 6 --- [ntContainer#0-1] org.hibernate.SQL                        : select areatype0_.at_id as at_id1_6_0_, areatype0_.created_at as created_2_6_0_, areatype0_.name as name3_6_0_, areatype0_.organization_id as organiza4_6_0_, areatype0_.removed_at as removed_5_6_0_, areatype0_.class as class6_6_0_ from main.area_type areatype0_ where areatype0_.at_id=?\n2022-08-11 11:40:39.895 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [5399]\n2022-08-11 11:40:39.895 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [2] as [NUMERIC] - [null]\n2022-08-11 11:40:39.895 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [3] as [BOOLEAN] - [false]\n2022-08-11 11:40:39.896 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [4] as [NUMERIC] - [null]\n2022-08-11 11:40:39.897 DEBUG 6 --- [ntContainer#0-1] org.hibernate.SQL                        : select settlement0_.sp_id as sp_id1_36_, settlement0_.created_at as created_2_36_, settlement0_.common_costs_updated_at as common_c3_36_, settlement0_.end_date as end_date4_36_, settlement0_.p_id as p_id8_36_, settlement0_.start_date as start_da5_36_, settlement0_.status as status6_36_, settlement0_.year as year7_36_ from main.settlement_period settlement0_ where settlement0_.p_id=? and settlement0_.year=? and extract(MONTH FROM settlement0_.start_date)=? and settlement0_.status&lt;&gt;?\n2022-08-11 11:40:39.898 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [1234]\n2022-08-11 11:40:39.898 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [2] as [INTEGER] - [2022]\n2022-08-11 11:40:39.899 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [5] as [VARCHAR] - [null]\n2022-08-11 11:40:39.899 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [3] as [INTEGER] - [8]\n2022-08-11 11:40:39.899 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [6] as [NUMERIC] - [0]\n2022-08-11 11:40:39.899 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [4] as [VARCHAR] - [SUBMITTED]\n2022-08-11 11:40:39.900 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [7] as [VARCHAR] - [null]\n2022-08-11 11:40:39.900 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [8] as [BOOLEAN] - [true]\n2022-08-11 11:40:39.901 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [9] as [DATE] - [2023-12-31]\n2022-08-11 11:40:39.901 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [10] as [VARCHAR] - [null]\n2022-08-11 11:40:39.901 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [11] as [NUMERIC] - [100]\n2022-08-11 11:40:39.902 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [12] as [SMALLINT] - [1]\n2022-08-11 11:40:39.902 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [13] as [BOOLEAN] - [false]\n2022-08-11 11:40:39.902 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [14] as [NUMERIC] - [null]\n2022-08-11 11:40:39.902 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [15] as [NUMERIC] - [100]\n2022-08-11 11:40:39.903 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [16] as [VARCHAR] - [null]\n2022-08-11 11:40:39.903 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [17] as [BOOLEAN] - [true]\n2022-08-11 11:40:39.903 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [18] as [NUMERIC] - [null]\n2022-08-11 11:40:39.904 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [19] as [OTHER] - [[AreaMeterReading{meterId='MeterId1', meterReading=100}]]\n2022-08-11 11:40:39.904 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [19] as [OTHER] - [[AreaMeterReading{meterId='MeterId1', meterReading=100}]]\n2022-08-11 11:40:39.904 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [20] as [VARCHAR] - [Test area 1]\n2022-08-11 11:40:39.905 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [21] as [NUMERIC] - [null]\n2022-08-11 11:40:39.905 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [22] as [INTEGER] - [null]\n2022-08-11 11:40:39.905 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [23] as [VARCHAR] - [null]\n2022-08-11 11:40:39.907 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [24] as [VARCHAR] - [null]\n2022-08-11 11:40:39.907 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [25] as [TIMESTAMP] - [null]\n2022-08-11 11:40:39.908 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [26] as [VARCHAR] - [null]\n2022-08-11 11:40:39.908 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [27] as [INTEGER] - [null]\n2022-08-11 11:40:39.908 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [28] as [VARCHAR] - [null]\n2022-08-11 11:40:39.908 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [29] as [INTEGER] - [null]\n2022-08-11 11:40:39.909 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [30] as [DATE] - [2022-01-01]\n2022-08-11 11:40:39.909 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [31] as [VARCHAR] - [OCCUPIED]\n2022-08-11 11:40:39.909 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [32] as [BIGINT] - [5399]\n2022-08-11 11:40:39.909 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [33] as [BOOLEAN] - [true]\n2022-08-11 11:40:39.909 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [34] as [VARCHAR] - [COMPLIANT]\n2022-08-11 11:40:39.910 TRACE 6 --- [nio-8081-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [35] as [BIGINT] - [1373]\n2022-08-11 11:40:39.917 DEBUG 6 --- [ntContainer#0-1] org.hibernate.SQL                        : update main.area set ad_id=?, area_height=?, bathroom=?, cleaning_area=?, comment=?, common_area=?, common_for=?, divisible_area=?, end_date=?, erp_code=?, exclusive_area=?, floor=?, furnished=?, gross_circumference=?, inclusive_area=?, inventory_list=?, kitchen=?, market_price=?, meter_readings=?, name=?, net_circumference=?, parking_spaces_number=?, property_type=?, reference_code=?, removed_at=?, rent_option=?, rooms_number=?, special_condition=?, stalls_number=?, start_date=?, status=?, at_id=?, vat_reporting=?, vat_type=? where a_id=?\n2022-08-11 11:40:39.917 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [1326]\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [2] as [NUMERIC] - [null]\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [3] as [BOOLEAN] - [false]\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [4] as [NUMERIC] - [null]\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [5] as [VARCHAR] - [null]\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [6] as [NUMERIC] - [0.00]\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [7] as [VARCHAR] - [null]\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [8] as [BOOLEAN] - [true]\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [9] as [DATE] - [2023-12-31]\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [10] as [VARCHAR] - [null]\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [11] as [NUMERIC] - [100.00]\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [12] as [SMALLINT] - [1]\n2022-08-11 11:40:39.918 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [13] as [BOOLEAN] - [false]\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [14] as [NUMERIC] - [null]\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [15] as [NUMERIC] - [100.00]\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [16] as [VARCHAR] - [null]\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [17] as [BOOLEAN] - [true]\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [18] as [NUMERIC] - [null]\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [19] as [OTHER] - [[AreaMeterReading{meterId='MeterId1', meterReading=300}]]\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [19] as [OTHER] - [[AreaMeterReading{meterId='MeterId1', meterReading=300}]]\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [20] as [VARCHAR] - [Test area 1]\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [21] as [NUMERIC] - [null]\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [22] as [INTEGER] - [null]\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [23] as [VARCHAR] - [null]\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [24] as [VARCHAR] - [null]\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [25] as [TIMESTAMP] - [null]\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [26] as [VARCHAR] - [null]\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [27] as [INTEGER] - [null]\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [28] as [VARCHAR] - [null]\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [29] as [INTEGER] - [null]\n2022-08-11 11:40:39.919 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [30] as [DATE] - [2022-01-01]\n2022-08-11 11:40:39.920 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [31] as [VARCHAR] - [OCCUPIED]\n2022-08-11 11:40:39.920 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [32] as [BIGINT] - [5399]\n2022-08-11 11:40:39.920 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [33] as [BOOLEAN] - [true]\n2022-08-11 11:40:39.920 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [34] as [VARCHAR] - [COMPLIANT]\n2022-08-11 11:40:39.920 TRACE 6 --- [ntContainer#0-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [35] as [BIGINT] - [1373]\n</code></pre>\n<p>Where <code>[AreaMeterReading{meterId='MeterId1', meterReading=100}]</code> is the new value of the field and <code>[AreaMeterReading{meterId='MeterId1', meterReading=300}]</code> the old value.\nWhen I check the database after executing an update, I see the old value in the table.</p>\n<p>I cannot debug it property, because I repeat - it doesn't happen locally, only on our dev environment. I test it on the same branch and there are no other observable differences between our environments.</p>\n<p>Why could an update happen multiple times, is it some bug?</p>\n"},{"tags":["java","visual-studio-code"],"answers":[{"tags":[],"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660190285,"creation_date":1660190285,"answer_id":73315099,"question_id":73314899,"body_markdown":"First, you must install everything from the [*Extension Pack for Java*][1] and the [*Language Support for Java(TM) by Red Hat*][2] extension.\r\n\r\nSecond, you have to make sure you open the correct project folder. Because VS Code takes the opened folder as the workspace, So pay attention to the folder hierarchy you open.\r\n\r\n\r\n  [1]: https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack\r\n  [2]: https://marketplace.visualstudio.com/items?itemName=redhat.java","title":"VS Code can&#39;t recognize Java project or can&#39;t detect Java project","body":"<p>First, you must install everything from the <a href=\"https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack\" rel=\"nofollow noreferrer\"><em>Extension Pack for Java</em></a> and the <a href=\"https://marketplace.visualstudio.com/items?itemName=redhat.java\" rel=\"nofollow noreferrer\"><em>Language Support for Java(TM) by Red Hat</em></a> extension.</p>\n<p>Second, you have to make sure you open the correct project folder. Because VS Code takes the opened folder as the workspace, So pay attention to the folder hierarchy you open.</p>\n"},{"tags":[],"owner":{"account_id":24869613,"reputation":11,"user_id":18744278,"display_name":"Jundi Aufa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660197022,"creation_date":1660197022,"answer_id":73315840,"question_id":73314899,"body_markdown":" I have found the solution, by adding `-Xlog:jni+resolve=off` to `java.jdt.ls.vmargs` and it&#39;s solved","title":"VS Code can&#39;t recognize Java project or can&#39;t detect Java project","body":"<p>I have found the solution, by adding <code>-Xlog:jni+resolve=off</code> to <code>java.jdt.ls.vmargs</code> and it's solved</p>\n"}],"owner":{"account_id":24869613,"reputation":11,"user_id":18744278,"display_name":"Jundi Aufa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1390,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73315840,"answer_count":2,"score":0,"last_activity_date":1660228334,"creation_date":1660188121,"question_id":73314899,"body_markdown":"When I open the Java project in VS Code, it can&#39;t recognize Java language and the Java build status is always &quot;Building&quot; and when I see the java log the build status doesn&#39;t show anything.\r\n\r\nI have already installed Java extension pack.\r\n\r\nIt makes it hard for me to import Java libraries and also hard to get autocomplete when I code Java.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/o2Ob7.png","title":"VS Code can&#39;t recognize Java project or can&#39;t detect Java project","body":"<p>When I open the Java project in VS Code, it can't recognize Java language and the Java build status is always &quot;Building&quot; and when I see the java log the build status doesn't show anything.</p>\n<p>I have already installed Java extension pack.</p>\n<p>It makes it hard for me to import Java libraries and also hard to get autocomplete when I code Java.</p>\n<p><a href=\"https://i.stack.imgur.com/o2Ob7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o2Ob7.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","arrays","algorithm"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1475282423,"post_id":39801619,"comment_id":66895913,"body_markdown":"Why do you think that just because it&#39;s slower, it&#39;s not running in O(n) time?","body":"Why do you think that just because it&#39;s slower, it&#39;s not running in O(n) time?"},{"owner":{"account_id":7178634,"reputation":55168,"user_id":5483526,"display_name":"Matt Timmermans"},"score":1,"creation_date":1475282703,"post_id":39801619,"comment_id":66895965,"body_markdown":"QuickSelect with a random pivot runs in *expected* O(n) time.  Yours does, too, but you are doing a *lot* of work just to choose a pivot, so the constant factor is greater.","body":"QuickSelect with a random pivot runs in <i>expected</i> O(n) time.  Yours does, too, but you are doing a <i>lot</i> of work just to choose a pivot, so the constant factor is greater."}],"owner":{"account_id":7212053,"reputation":315,"user_id":5505759,"accept_rate":56,"display_name":"david mah"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":845,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660228171,"creation_date":1475279940,"question_id":39801619,"body_markdown":"So I&#39;m implement a quickselect algorithm that chooses a good pivot each time. What it does is divide the array into groups of 5, sorts each groups and finds the median. It then takes the medians of each group, groups those values up and then finds the median of medians. Here&#39;s what I have:\r\n\r\n    private static int pickCleverPivot(int left, int right, int[] A){\r\n    \tint index = 0;\r\n    \tint n = right-left;\r\n    \tif (n &lt;= 5) {\r\n    \t\tArrays.sort(A);\r\n    \t\tindex = n/2;\r\n    \t\treturn index;\r\n    \t}\r\n    \tint numofMedians = (int) Math.ceil(n/5);\r\n    \tint[] medians = new int[numofMedians];\r\n    \tint[] groups = new int[5];\r\n    \t\r\n    \tfor(int i = 0; i &lt; numofMedians; i++) {\r\n    \t\tif (i != numofMedians - 1){\r\n    \t\t\tfor (int j = 0; j &lt; 5; j++){\r\n    \t\t\t\tgroups[j] = A[(i*5)+j];\r\n    \t\t\t}\r\n    \t\t\tmedians[i] = findMedian(groups, 5);\r\n    \t\t} else {\r\n    \t\t\tint numOfRemainders = n % 5;\r\n    \t\t\tint[] remainder = new int[numOfRemainders];\r\n    \t\t\tfor (int j = 0; j &lt; numOfRemainders; j++){\r\n    \t\t\t\tremainder[j] = A[(i*5)+j];\r\n    \t\t\t}\r\n    \t\t\tmedians[i] = findMedian(groups, 5);\r\n    \t\t}\r\n    \t}\r\n    \treturn pickCleverPivot(left, left+(numofMedians), medians);\r\n    }\r\n    \r\n    public static int findMedian(int[] A, int n){\r\n    \tArrays.sort(A);\r\n    \tif (n % 2 == 0) {\r\n    \t\treturn (A[n/2] + A[n/2 - 1]) / 2;\r\n    \t}\r\n    \treturn A[n/2];\r\n    }\r\n\r\n    private static int partition(int left, int right, int[] array, int pIndex){\r\n    \t//move pivot to last index of the array\r\n    \tswap(array,pIndex,right);\r\n\r\n\r\n    \tint p=array[right];\r\n    \tint l=left;\r\n    \tint r=right-1;\r\n  \r\n    \twhile(l&lt;=r){\r\n    \t\twhile(l&lt;=r &amp;&amp; array[l]&lt;=p){\r\n    \t\t\tl++;\r\n    \t\t}\r\n    \t\twhile(l&lt;=r &amp;&amp; array[r]&gt;=p){\r\n    \t\t\tr--;\r\n    \t\t}\r\n    \t\tif (l&lt;r){\r\n    \t\t\tswap(array,l,r);\r\n    \t\t}\r\n    \t}\r\n\r\n        swap(array,l,right);\r\n\r\n    \treturn l;\r\n    }\r\n    private static void swap(int[]array, int a, int b){\r\n    \tint tmp = array[a];\r\n    \tarray[a] = array[b];\r\n    \tarray[b] = tmp;\r\n    }\r\n\r\nSo it works like it&#39;s supposed to but now I&#39;m wondering if it&#39;s possible to get it to run in linear O(n) time. I&#39;m currently comparing this code to just choosing a random pivot. On smaller arrays this code runs faster but on larger arrays, choosing a random pivot is faster. So is it actually possible to make this run in O(n) time or is that just in theory and if it&#39;s not possible for it to run that fast then is this method running as fast as it could. ","title":"Quickselect that runs in O(n) in Java?","body":"<p>So I'm implement a quickselect algorithm that chooses a good pivot each time. What it does is divide the array into groups of 5, sorts each groups and finds the median. It then takes the medians of each group, groups those values up and then finds the median of medians. Here's what I have:</p>\n\n<pre><code>private static int pickCleverPivot(int left, int right, int[] A){\n    int index = 0;\n    int n = right-left;\n    if (n &lt;= 5) {\n        Arrays.sort(A);\n        index = n/2;\n        return index;\n    }\n    int numofMedians = (int) Math.ceil(n/5);\n    int[] medians = new int[numofMedians];\n    int[] groups = new int[5];\n\n    for(int i = 0; i &lt; numofMedians; i++) {\n        if (i != numofMedians - 1){\n            for (int j = 0; j &lt; 5; j++){\n                groups[j] = A[(i*5)+j];\n            }\n            medians[i] = findMedian(groups, 5);\n        } else {\n            int numOfRemainders = n % 5;\n            int[] remainder = new int[numOfRemainders];\n            for (int j = 0; j &lt; numOfRemainders; j++){\n                remainder[j] = A[(i*5)+j];\n            }\n            medians[i] = findMedian(groups, 5);\n        }\n    }\n    return pickCleverPivot(left, left+(numofMedians), medians);\n}\n\npublic static int findMedian(int[] A, int n){\n    Arrays.sort(A);\n    if (n % 2 == 0) {\n        return (A[n/2] + A[n/2 - 1]) / 2;\n    }\n    return A[n/2];\n}\n\nprivate static int partition(int left, int right, int[] array, int pIndex){\n    //move pivot to last index of the array\n    swap(array,pIndex,right);\n\n\n    int p=array[right];\n    int l=left;\n    int r=right-1;\n\n    while(l&lt;=r){\n        while(l&lt;=r &amp;&amp; array[l]&lt;=p){\n            l++;\n        }\n        while(l&lt;=r &amp;&amp; array[r]&gt;=p){\n            r--;\n        }\n        if (l&lt;r){\n            swap(array,l,r);\n        }\n    }\n\n    swap(array,l,right);\n\n    return l;\n}\nprivate static void swap(int[]array, int a, int b){\n    int tmp = array[a];\n    array[a] = array[b];\n    array[b] = tmp;\n}\n</code></pre>\n\n<p>So it works like it's supposed to but now I'm wondering if it's possible to get it to run in linear O(n) time. I'm currently comparing this code to just choosing a random pivot. On smaller arrays this code runs faster but on larger arrays, choosing a random pivot is faster. So is it actually possible to make this run in O(n) time or is that just in theory and if it's not possible for it to run that fast then is this method running as fast as it could. </p>\n"},{"tags":["java","android","kotlin","google-api","geofencing"],"comments":[{"owner":{"account_id":17732886,"reputation":547,"user_id":12875014,"display_name":"Abdulrahman Hasanato"},"score":0,"creation_date":1686896962,"post_id":73322424,"comment_id":134863948,"body_markdown":"Have you found any useful solutions?","body":"Have you found any useful solutions?"},{"owner":{"account_id":16447800,"reputation":51,"user_id":11882030,"display_name":"SirHammouD"},"score":0,"creation_date":1687713871,"post_id":73322424,"comment_id":134971760,"body_markdown":"My solution was to create my own custom Geofencing system from scratch as I wasn&#39;t able to figure out why it won&#39;t function on Samsung devices. As mentioned, the geofencing library provided by Google was not Functional on Samsung devices for some reason.","body":"My solution was to create my own custom Geofencing system from scratch as I wasn&#39;t able to figure out why it won&#39;t function on Samsung devices. As mentioned, the geofencing library provided by Google was not Functional on Samsung devices for some reason."}],"owner":{"account_id":16447800,"reputation":51,"user_id":11882030,"display_name":"SirHammouD"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":591,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660228169,"creation_date":1660228169,"question_id":73322424,"body_markdown":"I have created a service to run in the background at all times. The service will start geofencing, paired with a broadcast receiver to handle the transition events. \r\n\r\nTo test whether my service and receiver are working I added a counter and it works great. The counter works when the app is open, minimized or killed. But for some reason, the geofencing isn&#39;t receiving any transition events.\r\n\r\nAny idea why? I know there were a lot of location updates introduced in android 12 but I don&#39;t see any warnings in this regard. \r\n\r\n**The main activity, simple button turn service on or off:**\r\n\r\n    class MainActivity : AppCompatActivity() {\r\n     lateinit var btn: Button\r\n     lateinit var text: TextView\r\n\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_main)\r\n\r\n        btn = findViewById(R.id.button)\r\n        text = findViewById(R.id.text)\r\n        checkText()\r\n\r\n        btn.setOnClickListener(View.OnClickListener {\r\n            if (GeofencingService.isServiceStarted){\r\n                GeofencingService.isParticipatingOn = false\r\n                val intent = Intent(applicationContext, GeofencingService::class.java)\r\n                stopService(intent)\r\n                Toast.makeText(applicationContext ,&quot;Remove GeoFences&quot;, Toast.LENGTH_LONG).show()\r\n                Log.e(&quot;Main&quot;, &quot;Geofences service killed&quot;)\r\n                text.text = &quot;Geofencing Stopped&quot;\r\n            }\r\n            else{\r\n                Toast.makeText(applicationContext ,&quot;Start Foreground&quot;, Toast.LENGTH_LONG).show()\r\n                Log.e(&quot;Main&quot;, &quot;Geofences service started&quot;)\r\n                val intent = Intent(applicationContext, GeofencingService::class.java)\r\n                startService(intent)\r\n                text.text = &quot;Geofencing Started&quot;\r\n            }\r\n        })\r\n\r\n\r\n    }\r\n    private fun checkText(){\r\n        if (GeofencingService.isServiceStarted){\r\n            text.text = &quot;Geofencing Started&quot;\r\n        }\r\n        else{\r\n            text.text = &quot;Geofencing Stopped&quot;\r\n        }\r\n    }\r\n\r\n    }\r\n\r\n\r\n**This is my service:**\r\n    \r\n    class GeofencingService: Service()  {\r\n     private var geofencingClient: GeofencingClient? = null\r\n\r\n    companion object{\r\n        var geofencelist = mutableListOf&lt;Geofence&gt;()\r\n        var isServiceStarted = false\r\n        var isParticipatingOn = false\r\n    }\r\n\r\n    override fun onCreate() {\r\n        super.onCreate()\r\n        Log.e(&quot;Main&quot;, &quot;Geofences onCreate&quot;)\r\n        isServiceStarted = true\r\n        isParticipatingOn = true\r\n        geofencelist.clear()\r\n        geofencingClient = LocationServices.getGeofencingClient(this)\r\n        startCustomForeground()\r\n    }\r\n\r\n    override fun onDestroy() {\r\n        super.onDestroy()\r\n        Log.e(&quot;Main&quot;, &quot;Geofences onDestroy&quot;)\r\n        isServiceStarted = false\r\n        removeGeoFences()\r\n        if (isParticipatingOn){\r\n            val intent = Intent(this, GeofencingService::class.java)\r\n            intent.action = &quot;RESTART_GEOFENCE_EVENT&quot;\r\n            startService(intent)\r\n            //this.sendBroadcast(intent)\r\n        }\r\n    }\r\n\r\n    override fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int {\r\n        //startForegroundService(intent)\r\n        if (GoogleApiAvailability.getInstance().isGooglePlayServicesAvailable(this) == ConnectionResult.SUCCESS) {\r\n            geofencelist.add(\r\n                Geofence.Builder()\r\n                    .setRequestId(&quot;KEY&quot;)\r\n                    .setCircularRegion(\r\n                        lat, // lat\r\n                        long, // long\r\n                        3220f // meters\r\n                    )\r\n                    .setTransitionTypes(Geofence.GEOFENCE_TRANSITION_ENTER or Geofence.GEOFENCE_TRANSITION_EXIT)\r\n                    .setExpirationDuration(Geofence.NEVER_EXPIRE)\r\n                    .setNotificationResponsiveness(120000)\r\n                    .build())\r\n            timer()\r\n            addGeofences()\r\n\r\n        } else {\r\n            Log.e(&quot;Service&quot;, &quot;Your Device doesn&#39;t support Google Play Services.&quot;)\r\n        }\r\n\r\n        return START_NOT_STICKY\r\n    }\r\n    override fun onBind(intent: Intent?): IBinder? {\r\n        TODO(&quot;Not yet implemented&quot;)\r\n        return null\r\n    }\r\n\r\n    @SuppressLint(&quot;MissingPermission&quot;)\r\n    fun addGeofences(){\r\n        geofencingClient?.addGeofences(getGeofencingRequest(), geofencePendingIntent)?.run {\r\n            addOnSuccessListener {\r\n                // Geofences added\r\n                Log.e(&quot;Main&quot;, &quot;Geofences added&quot;)\r\n                // ...\r\n            }\r\n            addOnFailureListener {\r\n                // Failed to add geofences\r\n                // ...\r\n            }\r\n        }\r\n    }\r\n\r\n    @SuppressLint(&quot;MissingPermission&quot;)\r\n    fun removeGeoFences(){\r\n        geofencingClient?.removeGeofences(geofencePendingIntent)?.run {\r\n            addOnSuccessListener {\r\n                // Geofences removed\r\n                Log.e(&quot;Main&quot;, &quot;Geofences removed&quot;)\r\n                // ...\r\n            }\r\n            addOnFailureListener {\r\n                // Failed to remove geofences\r\n                // ...\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private fun getGeofencingRequest(): GeofencingRequest {\r\n        return GeofencingRequest.Builder().apply {\r\n            setInitialTrigger(GeofencingRequest.INITIAL_TRIGGER_ENTER or GeofencingRequest.INITIAL_TRIGGER_DWELL or GeofencingRequest.INITIAL_TRIGGER_EXIT)\r\n            addGeofences(geofencelist)\r\n        }.build()\r\n    }\r\n\r\n    private val geofencePendingIntent: PendingIntent by lazy {\r\n        val intent = Intent(this, GeofencingBroadcastReceiver::class.java)\r\n        intent.action = &quot;START_GEOFENCE_EVENT&quot;\r\n        // We use FLAG_UPDATE_CURRENT so that we get the same pending intent back when calling\r\n        // addGeofences() and removeGeofences().\r\n\r\n        if(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S){\r\n            PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT or PendingIntent.FLAG_MUTABLE)\r\n        }else{\r\n            PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT)\r\n        }\r\n\r\n    }\r\n\r\n    private fun startCustomForeground() {\r\n        val CHANNEL_ID = &quot;GEOFENCING&quot;\r\n        val CHANNEL_NAME = &quot;Geofencing Service&quot;\r\n        val channel = NotificationChannel(CHANNEL_ID, CHANNEL_NAME, NotificationManager.IMPORTANCE_NONE)\r\n        channel.lightColor = Color.TRANSPARENT\r\n        channel.lockscreenVisibility = Notification.VISIBILITY_PRIVATE\r\n\r\n        val manager = (getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager)\r\n        manager.createNotificationChannel(channel)\r\n\r\n        val notificationBuilder: NotificationCompat.Builder =\r\n            NotificationCompat.Builder(this, CHANNEL_ID)\r\n        val notification = notificationBuilder.setOngoing(true)\r\n            .setContentTitle(CHANNEL_NAME + &quot;is running in background&quot;)\r\n            .setPriority(NotificationManager.IMPORTANCE_NONE)\r\n            .setCategory(Notification.CATEGORY_SERVICE)\r\n            .build()\r\n        startForeground(1, notification)\r\n    }\r\n\r\n    private fun timer(){\r\n        val timer = object: CountDownTimer(200000, 1000) {\r\n            override fun onTick(millisUntilFinished: Long) {\r\n                Log.e(&quot;Counter: &quot;, millisUntilFinished.toString())\r\n                val intent = Intent(applicationContext, GeofencingBroadcastReceiver::class.java)\r\n                intent.action = &quot;TIMER&quot;\r\n                applicationContext.sendBroadcast(intent)\r\n            }\r\n\r\n            override fun onFinish() {}\r\n        }\r\n        timer.start()\r\n\r\n    }\r\n\r\n   }\r\n\r\n**This is my broadcast reciver:**\r\n\r\n    class GeofencingBroadcastReceiver: BroadcastReceiver() {\r\n    override fun onReceive(context: Context?, intent: Intent?) {\r\n\r\n        if (intent?.action == &quot;START_GEOFENCE_EVENT&quot;){\r\n            val geofencingEvent = GeofencingEvent.fromIntent(intent)\r\n            if (geofencingEvent.hasError()) {\r\n                val errorMessage = GeofenceStatusCodes\r\n                    .getStatusCodeString(geofencingEvent.errorCode)\r\n                Log.e(&quot;Broadcaster&quot;, errorMessage)\r\n                return\r\n            }\r\n            // Get the transition type.\r\n            Log.e(&quot;Potato&quot;, &quot; Geofencing service broadcast started&quot;)\r\n            val geofenceTransition = geofencingEvent.geofenceTransition\r\n            val triggeringGeofences = geofencingEvent.triggeringLocation\r\n\r\n            // Test that the reported transition was of interest.\r\n            when (geofenceTransition) {\r\n                (Geofence.GEOFENCE_TRANSITION_ENTER )-&gt; {\r\n\r\n                    Toast.makeText(context,&quot;ENTER - &quot;+ triggeringGeofences.longitude.toString() +&quot; - &quot;+ triggeringGeofences.latitude.toString() ,Toast.LENGTH_LONG).show()\r\n\r\n                    Log.i(&quot;Potato&quot;, &quot;ENTER - Lat: ${triggeringGeofences.latitude} - Long: ${triggeringGeofences.longitude}&quot;)\r\n\r\n                }\r\n                (Geofence.GEOFENCE_TRANSITION_EXIT) -&gt; {\r\n\r\n                    Toast.makeText(context,&quot;EXIT - &quot;+ triggeringGeofences.longitude.toString() +&quot; - &quot;+ triggeringGeofences.latitude.toString() ,Toast.LENGTH_LONG).show()\r\n\r\n                    Log.i(&quot;Potato&quot;, &quot;EXIT - Lat: ${triggeringGeofences.latitude} - Long: ${triggeringGeofences.longitude}&quot;)\r\n                }\r\n                else -&gt; {\r\n                    Log.e(&quot;Potato&quot;, &quot; ERROR&quot;)\r\n                }\r\n            }\r\n        }\r\n\r\n        else if(intent?.action == &quot;RESTART_GEOFENCE_EVENT&quot; ) {\r\n            if (!GeofencingService.isServiceStarted){\r\n                Log.e(&quot;Potato&quot;, &quot; Geofencing service restarted&quot;)\r\n                val intentService = Intent(context, GeofencingService::class.java)\r\n                context?.let { ContextCompat.startForegroundService(it,intentService) }\r\n            }\r\n        }\r\n        else if(intent?.action == &quot;TIMER&quot; ) {\r\n            Log.e(&quot;Potato&quot;, &quot; TIMER TICKING ++&quot;)\r\n        }\r\n\r\n    }\r\n    }\r\n\r\n**Manifest changes:**\r\n\r\n    &lt;receiver android:name=&quot;.GeofencingBroadcastReceiver&quot;\r\n            android:enabled=&quot;true&quot;\r\n            android:exported=&quot;false&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;GeofencingBroadcastReceiver&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n\r\n        &lt;service\r\n            android:name=&quot;.GeofencingService&quot;\r\n            android:enabled=&quot;true&quot;\r\n            android:exported=&quot;false&quot;\r\n            android:foregroundServiceType=&quot;location&quot;&gt;\r\n        &lt;/service&gt;\r\n\r\n","title":"Geofences not working on android, no transitions being triggered - Kotlin","body":"<p>I have created a service to run in the background at all times. The service will start geofencing, paired with a broadcast receiver to handle the transition events.</p>\n<p>To test whether my service and receiver are working I added a counter and it works great. The counter works when the app is open, minimized or killed. But for some reason, the geofencing isn't receiving any transition events.</p>\n<p>Any idea why? I know there were a lot of location updates introduced in android 12 but I don't see any warnings in this regard.</p>\n<p><strong>The main activity, simple button turn service on or off:</strong></p>\n<pre><code>class MainActivity : AppCompatActivity() {\n lateinit var btn: Button\n lateinit var text: TextView\n\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n    btn = findViewById(R.id.button)\n    text = findViewById(R.id.text)\n    checkText()\n\n    btn.setOnClickListener(View.OnClickListener {\n        if (GeofencingService.isServiceStarted){\n            GeofencingService.isParticipatingOn = false\n            val intent = Intent(applicationContext, GeofencingService::class.java)\n            stopService(intent)\n            Toast.makeText(applicationContext ,&quot;Remove GeoFences&quot;, Toast.LENGTH_LONG).show()\n            Log.e(&quot;Main&quot;, &quot;Geofences service killed&quot;)\n            text.text = &quot;Geofencing Stopped&quot;\n        }\n        else{\n            Toast.makeText(applicationContext ,&quot;Start Foreground&quot;, Toast.LENGTH_LONG).show()\n            Log.e(&quot;Main&quot;, &quot;Geofences service started&quot;)\n            val intent = Intent(applicationContext, GeofencingService::class.java)\n            startService(intent)\n            text.text = &quot;Geofencing Started&quot;\n        }\n    })\n\n\n}\nprivate fun checkText(){\n    if (GeofencingService.isServiceStarted){\n        text.text = &quot;Geofencing Started&quot;\n    }\n    else{\n        text.text = &quot;Geofencing Stopped&quot;\n    }\n}\n\n}\n</code></pre>\n<p><strong>This is my service:</strong></p>\n<pre><code>class GeofencingService: Service()  {\n private var geofencingClient: GeofencingClient? = null\n\ncompanion object{\n    var geofencelist = mutableListOf&lt;Geofence&gt;()\n    var isServiceStarted = false\n    var isParticipatingOn = false\n}\n\noverride fun onCreate() {\n    super.onCreate()\n    Log.e(&quot;Main&quot;, &quot;Geofences onCreate&quot;)\n    isServiceStarted = true\n    isParticipatingOn = true\n    geofencelist.clear()\n    geofencingClient = LocationServices.getGeofencingClient(this)\n    startCustomForeground()\n}\n\noverride fun onDestroy() {\n    super.onDestroy()\n    Log.e(&quot;Main&quot;, &quot;Geofences onDestroy&quot;)\n    isServiceStarted = false\n    removeGeoFences()\n    if (isParticipatingOn){\n        val intent = Intent(this, GeofencingService::class.java)\n        intent.action = &quot;RESTART_GEOFENCE_EVENT&quot;\n        startService(intent)\n        //this.sendBroadcast(intent)\n    }\n}\n\noverride fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int {\n    //startForegroundService(intent)\n    if (GoogleApiAvailability.getInstance().isGooglePlayServicesAvailable(this) == ConnectionResult.SUCCESS) {\n        geofencelist.add(\n            Geofence.Builder()\n                .setRequestId(&quot;KEY&quot;)\n                .setCircularRegion(\n                    lat, // lat\n                    long, // long\n                    3220f // meters\n                )\n                .setTransitionTypes(Geofence.GEOFENCE_TRANSITION_ENTER or Geofence.GEOFENCE_TRANSITION_EXIT)\n                .setExpirationDuration(Geofence.NEVER_EXPIRE)\n                .setNotificationResponsiveness(120000)\n                .build())\n        timer()\n        addGeofences()\n\n    } else {\n        Log.e(&quot;Service&quot;, &quot;Your Device doesn't support Google Play Services.&quot;)\n    }\n\n    return START_NOT_STICKY\n}\noverride fun onBind(intent: Intent?): IBinder? {\n    TODO(&quot;Not yet implemented&quot;)\n    return null\n}\n\n@SuppressLint(&quot;MissingPermission&quot;)\nfun addGeofences(){\n    geofencingClient?.addGeofences(getGeofencingRequest(), geofencePendingIntent)?.run {\n        addOnSuccessListener {\n            // Geofences added\n            Log.e(&quot;Main&quot;, &quot;Geofences added&quot;)\n            // ...\n        }\n        addOnFailureListener {\n            // Failed to add geofences\n            // ...\n        }\n    }\n}\n\n@SuppressLint(&quot;MissingPermission&quot;)\nfun removeGeoFences(){\n    geofencingClient?.removeGeofences(geofencePendingIntent)?.run {\n        addOnSuccessListener {\n            // Geofences removed\n            Log.e(&quot;Main&quot;, &quot;Geofences removed&quot;)\n            // ...\n        }\n        addOnFailureListener {\n            // Failed to remove geofences\n            // ...\n        }\n    }\n}\n\n\nprivate fun getGeofencingRequest(): GeofencingRequest {\n    return GeofencingRequest.Builder().apply {\n        setInitialTrigger(GeofencingRequest.INITIAL_TRIGGER_ENTER or GeofencingRequest.INITIAL_TRIGGER_DWELL or GeofencingRequest.INITIAL_TRIGGER_EXIT)\n        addGeofences(geofencelist)\n    }.build()\n}\n\nprivate val geofencePendingIntent: PendingIntent by lazy {\n    val intent = Intent(this, GeofencingBroadcastReceiver::class.java)\n    intent.action = &quot;START_GEOFENCE_EVENT&quot;\n    // We use FLAG_UPDATE_CURRENT so that we get the same pending intent back when calling\n    // addGeofences() and removeGeofences().\n\n    if(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S){\n        PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT or PendingIntent.FLAG_MUTABLE)\n    }else{\n        PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT)\n    }\n\n}\n\nprivate fun startCustomForeground() {\n    val CHANNEL_ID = &quot;GEOFENCING&quot;\n    val CHANNEL_NAME = &quot;Geofencing Service&quot;\n    val channel = NotificationChannel(CHANNEL_ID, CHANNEL_NAME, NotificationManager.IMPORTANCE_NONE)\n    channel.lightColor = Color.TRANSPARENT\n    channel.lockscreenVisibility = Notification.VISIBILITY_PRIVATE\n\n    val manager = (getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager)\n    manager.createNotificationChannel(channel)\n\n    val notificationBuilder: NotificationCompat.Builder =\n        NotificationCompat.Builder(this, CHANNEL_ID)\n    val notification = notificationBuilder.setOngoing(true)\n        .setContentTitle(CHANNEL_NAME + &quot;is running in background&quot;)\n        .setPriority(NotificationManager.IMPORTANCE_NONE)\n        .setCategory(Notification.CATEGORY_SERVICE)\n        .build()\n    startForeground(1, notification)\n}\n\nprivate fun timer(){\n    val timer = object: CountDownTimer(200000, 1000) {\n        override fun onTick(millisUntilFinished: Long) {\n            Log.e(&quot;Counter: &quot;, millisUntilFinished.toString())\n            val intent = Intent(applicationContext, GeofencingBroadcastReceiver::class.java)\n            intent.action = &quot;TIMER&quot;\n            applicationContext.sendBroadcast(intent)\n        }\n\n        override fun onFinish() {}\n    }\n    timer.start()\n\n}\n</code></pre>\n<p>}</p>\n<p><strong>This is my broadcast reciver:</strong></p>\n<pre><code>class GeofencingBroadcastReceiver: BroadcastReceiver() {\noverride fun onReceive(context: Context?, intent: Intent?) {\n\n    if (intent?.action == &quot;START_GEOFENCE_EVENT&quot;){\n        val geofencingEvent = GeofencingEvent.fromIntent(intent)\n        if (geofencingEvent.hasError()) {\n            val errorMessage = GeofenceStatusCodes\n                .getStatusCodeString(geofencingEvent.errorCode)\n            Log.e(&quot;Broadcaster&quot;, errorMessage)\n            return\n        }\n        // Get the transition type.\n        Log.e(&quot;Potato&quot;, &quot; Geofencing service broadcast started&quot;)\n        val geofenceTransition = geofencingEvent.geofenceTransition\n        val triggeringGeofences = geofencingEvent.triggeringLocation\n\n        // Test that the reported transition was of interest.\n        when (geofenceTransition) {\n            (Geofence.GEOFENCE_TRANSITION_ENTER )-&gt; {\n\n                Toast.makeText(context,&quot;ENTER - &quot;+ triggeringGeofences.longitude.toString() +&quot; - &quot;+ triggeringGeofences.latitude.toString() ,Toast.LENGTH_LONG).show()\n\n                Log.i(&quot;Potato&quot;, &quot;ENTER - Lat: ${triggeringGeofences.latitude} - Long: ${triggeringGeofences.longitude}&quot;)\n\n            }\n            (Geofence.GEOFENCE_TRANSITION_EXIT) -&gt; {\n\n                Toast.makeText(context,&quot;EXIT - &quot;+ triggeringGeofences.longitude.toString() +&quot; - &quot;+ triggeringGeofences.latitude.toString() ,Toast.LENGTH_LONG).show()\n\n                Log.i(&quot;Potato&quot;, &quot;EXIT - Lat: ${triggeringGeofences.latitude} - Long: ${triggeringGeofences.longitude}&quot;)\n            }\n            else -&gt; {\n                Log.e(&quot;Potato&quot;, &quot; ERROR&quot;)\n            }\n        }\n    }\n\n    else if(intent?.action == &quot;RESTART_GEOFENCE_EVENT&quot; ) {\n        if (!GeofencingService.isServiceStarted){\n            Log.e(&quot;Potato&quot;, &quot; Geofencing service restarted&quot;)\n            val intentService = Intent(context, GeofencingService::class.java)\n            context?.let { ContextCompat.startForegroundService(it,intentService) }\n        }\n    }\n    else if(intent?.action == &quot;TIMER&quot; ) {\n        Log.e(&quot;Potato&quot;, &quot; TIMER TICKING ++&quot;)\n    }\n\n}\n}\n</code></pre>\n<p><strong>Manifest changes:</strong></p>\n<pre><code>&lt;receiver android:name=&quot;.GeofencingBroadcastReceiver&quot;\n        android:enabled=&quot;true&quot;\n        android:exported=&quot;false&quot;&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;GeofencingBroadcastReceiver&quot; /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/receiver&gt;\n\n    &lt;service\n        android:name=&quot;.GeofencingService&quot;\n        android:enabled=&quot;true&quot;\n        android:exported=&quot;false&quot;\n        android:foregroundServiceType=&quot;location&quot;&gt;\n    &lt;/service&gt;\n</code></pre>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":10002936,"reputation":217,"user_id":7398298,"display_name":"arjunan"},"score":0,"creation_date":1538577399,"post_id":52629373,"comment_id":92192399,"body_markdown":"I guess it is not possible. Because we need to create the dimensions first, assignment is next. But your need is dimensions should be dynamic.","body":"I guess it is not possible. Because we need to create the dimensions first, assignment is next. But your need is dimensions should be dynamic."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1538578056,"creation_date":1538578056,"answer_id":52629760,"question_id":52629373,"body_markdown":"You can&#39;t do this with static code.  The Java syntax and (compile time) type system doesn&#39;t support the declaration or construction of arrays with indefinite dimensions.\r\n\r\nYou can create arrays with arbitrary dimensions using reflection; e.g.\r\n\r\n    int nosDimensions = 2;\r\n    Class&lt;MyClass&gt; clazz = MyClass.class;\r\n    Object array = java.lang.reflect.Array.newInstance(clazz, nosDimensions);\r\n\r\n    MyClass[][] typedArray = (MyClass[][]) array;  // just to show we can do it ...\r\n\r\nBut the problem is that if you go down the path, you are liable to end up:\r\n\r\n  - doing lots of casting to types with definite dimensions (see `typedArray` above), and / or \r\n\r\n  - doing operations on the arrays using messy reflective code.","title":"How to dynamically declare shape of an Array in Java?","body":"<p>You can't do this with static code.  The Java syntax and (compile time) type system doesn't support the declaration or construction of arrays with indefinite dimensions.</p>\n\n<p>You can create arrays with arbitrary dimensions using reflection; e.g.</p>\n\n<pre><code>int nosDimensions = 2;\nClass&lt;MyClass&gt; clazz = MyClass.class;\nObject array = java.lang.reflect.Array.newInstance(clazz, nosDimensions);\n\nMyClass[][] typedArray = (MyClass[][]) array;  // just to show we can do it ...\n</code></pre>\n\n<p>But the problem is that if you go down the path, you are liable to end up:</p>\n\n<ul>\n<li><p>doing lots of casting to types with definite dimensions (see <code>typedArray</code> above), and / or </p></li>\n<li><p>doing operations on the arrays using messy reflective code.</p></li>\n</ul>\n"}],"owner":{"account_id":1202806,"reputation":23213,"user_id":1173112,"accept_rate":89,"display_name":"Koray Tugay"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":136,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":52629760,"answer_count":1,"score":-2,"last_activity_date":1660228053,"creation_date":1538576941,"question_id":52629373,"body_markdown":"I am working with an API where I need to provide a `Object[]`, `Object[][]`, `Object[][][]`... you get the idea.\r\n\r\nAssume `setFoo` requires an `Object[]`, this is how I get it to work:\r\n\r\n    Object hello = &quot;Hello&quot;;\r\n    Object world = &quot;world&quot;;\r\n\r\n    final List&lt;Object&gt; objects = new ArrayList&lt;&gt;();\r\n    objects.add(hello);\r\n    objects.add(world);\r\n\r\n    // {&quot;Hello&quot;, &quot;world&quot;}\r\n    item.setFoo(objects.toArray());\r\n\r\n\r\nAnd this is how I make `Object[][]` requirement work, so that I can call `setBar`..\r\n\r\n    Object hello = &quot;Hello&quot;;\r\n    Object world = &quot;world&quot;;\r\n    \r\n    // We now we need to stuff these into an Array of Arrays as in: {{Hello},{world}}\r\n    final List&lt;Object&gt; helloList = new ArrayList&lt;&gt;();\r\n    helloList.add(hello);\r\n    \r\n    final List&lt;Object&gt; worldList = new ArrayList&lt;&gt;();\r\n    worldList.add(world);\r\n    \r\n    final List&lt;List&lt;Object&gt;&gt; surroundingList = new ArrayList&lt;&gt;();\r\n    surroundingList.add(helloList);\r\n    surroundingList.add(worldList);\r\n    \r\n    final Object[][] objects = new Object[surroundingList.size()][1];\r\n    for (int i = 0; i &lt; surroundingList.size(); i++) {\r\n        objects[i] = surroundingList.get(i).toArray();\r\n    }\r\n    \r\n    item.setBar(objects);\r\n\r\nThe problem is, I am not able to figure out how to create the Object[][][] dynamically.. Is there a way to do this in Java? If I can make this `final Object[][] objects = new Object[surroundingList.size()][1];` dynamic I should be in good hands.","title":"How to dynamically declare shape of an Array in Java?","body":"<p>I am working with an API where I need to provide a <code>Object[]</code>, <code>Object[][]</code>, <code>Object[][][]</code>... you get the idea.</p>\n<p>Assume <code>setFoo</code> requires an <code>Object[]</code>, this is how I get it to work:</p>\n<pre><code>Object hello = &quot;Hello&quot;;\nObject world = &quot;world&quot;;\n\nfinal List&lt;Object&gt; objects = new ArrayList&lt;&gt;();\nobjects.add(hello);\nobjects.add(world);\n\n// {&quot;Hello&quot;, &quot;world&quot;}\nitem.setFoo(objects.toArray());\n</code></pre>\n<p>And this is how I make <code>Object[][]</code> requirement work, so that I can call <code>setBar</code>..</p>\n<pre><code>Object hello = &quot;Hello&quot;;\nObject world = &quot;world&quot;;\n\n// We now we need to stuff these into an Array of Arrays as in: {{Hello},{world}}\nfinal List&lt;Object&gt; helloList = new ArrayList&lt;&gt;();\nhelloList.add(hello);\n\nfinal List&lt;Object&gt; worldList = new ArrayList&lt;&gt;();\nworldList.add(world);\n\nfinal List&lt;List&lt;Object&gt;&gt; surroundingList = new ArrayList&lt;&gt;();\nsurroundingList.add(helloList);\nsurroundingList.add(worldList);\n\nfinal Object[][] objects = new Object[surroundingList.size()][1];\nfor (int i = 0; i &lt; surroundingList.size(); i++) {\n    objects[i] = surroundingList.get(i).toArray();\n}\n\nitem.setBar(objects);\n</code></pre>\n<p>The problem is, I am not able to figure out how to create the Object[][][] dynamically.. Is there a way to do this in Java? If I can make this <code>final Object[][] objects = new Object[surroundingList.size()][1];</code> dynamic I should be in good hands.</p>\n"},{"tags":["java","spring-boot","contextpath"],"comments":[{"owner":{"account_id":1035649,"reputation":180,"user_id":1043002,"accept_rate":57,"display_name":"Sachith Deshan N"},"score":1,"creation_date":1659439220,"post_id":73206145,"comment_id":129290230,"body_markdown":"context path is case sensitive","body":"context path is case sensitive"},{"owner":{"account_id":11449092,"reputation":19,"user_id":8391938,"display_name":"Partha Debnath"},"score":0,"creation_date":1659441314,"post_id":73206145,"comment_id":129290928,"body_markdown":"is there any way I can make context path case insensitive?","body":"is there any way I can make context path case insensitive?"}],"answers":[{"tags":[],"owner":{"account_id":2386002,"reputation":5151,"user_id":2086966,"accept_rate":73,"display_name":"smilyface"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660227951,"creation_date":1660227509,"answer_id":73322266,"question_id":73206145,"body_markdown":"For your question in the comment: \r\n`is there any way I can make context path case insensitive?`\r\n\r\nOverriding the `configurePathMatch` would work\r\n\r\n    @Configuration\r\n    public class WebConfig extends WebMvcConfigurerAdapter {\r\n        @Override\r\n        public void configurePathMatch(PathMatchConfigurer configurer) {\r\n            AntPathMatcher pathMatcher = new AntPathMatcher();\r\n            pathMatcher.setCaseSensitive(false);\r\n            configurer.setPathMatcher(pathMatcher);\r\n        }\r\n    }\r\n\r\nNote:&lt;br&gt;\r\n - This will be applicable for all your apis\r\n - As of [current spring version][1], it is `Deprecated`. \r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurerAdapter.html#configurePathMatch-org.springframework.web.servlet.config.annotation.PathMatchConfigurer-","title":"String Boot application is not loading when hitting URL with capital letter server.servlet.contextPath value","body":"<p>For your question in the comment:\n<code>is there any way I can make context path case insensitive?</code></p>\n<p>Overriding the <code>configurePathMatch</code> would work</p>\n<pre><code>@Configuration\npublic class WebConfig extends WebMvcConfigurerAdapter {\n    @Override\n    public void configurePathMatch(PathMatchConfigurer configurer) {\n        AntPathMatcher pathMatcher = new AntPathMatcher();\n        pathMatcher.setCaseSensitive(false);\n        configurer.setPathMatcher(pathMatcher);\n    }\n}\n</code></pre>\n<p>Note:<br></p>\n<ul>\n<li>This will be applicable for all your apis</li>\n<li>As of <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurerAdapter.html#configurePathMatch-org.springframework.web.servlet.config.annotation.PathMatchConfigurer-\" rel=\"nofollow noreferrer\">current spring version</a>, it is <code>Deprecated</code>.</li>\n</ul>\n"}],"owner":{"account_id":11449092,"reputation":19,"user_id":8391938,"display_name":"Partha Debnath"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1660227951,"creation_date":1659436847,"question_id":73206145,"body_markdown":"I am working on a Spring Boot Application. \r\n\r\n*application.properties* \r\n\r\n    server.servlet.contextPath=myapp\r\n\r\nWhen I am hitting a base URL as below:\r\n\r\n`http://localhost:8080/myapp`, I can see my application is loading\r\n\r\n`http://localhost:8080/MYAPP`, I am getting HTTP Status 404. \r\n\r\nNot sure why this is happening, can anyone please explain this to me?","title":"String Boot application is not loading when hitting URL with capital letter server.servlet.contextPath value","body":"<p>I am working on a Spring Boot Application.</p>\n<p><em>application.properties</em></p>\n<pre><code>server.servlet.contextPath=myapp\n</code></pre>\n<p>When I am hitting a base URL as below:</p>\n<p><code>http://localhost:8080/myapp</code>, I can see my application is loading</p>\n<p><code>http://localhost:8080/MYAPP</code>, I am getting HTTP Status 404.</p>\n<p>Not sure why this is happening, can anyone please explain this to me?</p>\n"},{"tags":["java","api","rest-assured"],"comments":[{"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"score":0,"creation_date":1659942296,"post_id":73273267,"comment_id":129405578,"body_markdown":"Do you expect to see `2` in your example?","body":"Do you expect to see <code>2</code> in your example?"},{"owner":{"account_id":25442663,"reputation":23,"user_id":19245271,"display_name":"suhel shaikh"},"score":0,"creation_date":1659958765,"post_id":73273267,"comment_id":129411089,"body_markdown":"No, that would be the length of the response array right!","body":"No, that would be the length of the response array right!"},{"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"score":0,"creation_date":1659960075,"post_id":73273267,"comment_id":129411581,"body_markdown":"What is length or response array? What value do you expect for your sample response?","body":"What is length or response array? What value do you expect for your sample response?"},{"owner":{"account_id":25442663,"reputation":23,"user_id":19245271,"display_name":"suhel shaikh"},"score":0,"creation_date":1659960506,"post_id":73273267,"comment_id":129411730,"body_markdown":"@AlexeyR. I expect the value of 4 as I want to know the size of `{\n        &quot;moduleid&quot;: &quot;1005&quot;,\n        &quot;module&quot;: &quot;debug&quot;,\n        &quot;title&quot;: &quot;Can you fix it?&quot;,\n        &quot;description&quot;: &quot;Learn how to uncover logical mistakes&quot;\n       }`","body":"@AlexeyR. I expect the value of 4 as I want to know the size of <code>{         &quot;moduleid&quot;: &quot;1005&quot;,         &quot;module&quot;: &quot;debug&quot;,         &quot;title&quot;: &quot;Can you fix it?&quot;,         &quot;description&quot;: &quot;Learn how to uncover logical mistakes&quot;        }</code>"},{"owner":{"account_id":25442663,"reputation":23,"user_id":19245271,"display_name":"suhel shaikh"},"score":0,"creation_date":1659960536,"post_id":73273267,"comment_id":129411741,"body_markdown":"I mean if there is a way to find","body":"I mean if there is a way to find"},{"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"score":0,"creation_date":1659961255,"post_id":73273267,"comment_id":129411974,"body_markdown":"There is the way. So you mention `&quot;moduleid&quot;: &quot;1005&quot;` but not `&quot;moduleid&quot;: &quot;1000&quot;`. Do you want to have the way to specify the particular item in response?","body":"There is the way. So you mention <code>&quot;moduleid&quot;: &quot;1005&quot;</code> but not <code>&quot;moduleid&quot;: &quot;1000&quot;</code>. Do you want to have the way to specify the particular item in response?"},{"owner":{"account_id":25442663,"reputation":23,"user_id":19245271,"display_name":"suhel shaikh"},"score":0,"creation_date":1659961969,"post_id":73273267,"comment_id":129412237,"body_markdown":"_moduleid_ can be random, I just gave an example and as for _Do you want to have the way to specify the particular item in response?_ YES","body":"<i>moduleid</i> can be random, I just gave an example and as for <i>Do you want to have the way to specify the particular item in response?</i> YES"},{"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"score":0,"creation_date":1660118307,"post_id":73273267,"comment_id":129454432,"body_markdown":"@suhelshaikh The `length` you mean is the number of key-value pair of the json object?","body":"@suhelshaikh The <code>length</code> you mean is the number of key-value pair of the json object?"},{"owner":{"account_id":25442663,"reputation":23,"user_id":19245271,"display_name":"suhel shaikh"},"score":0,"creation_date":1660222305,"post_id":73273267,"comment_id":129485128,"body_markdown":"@lucas-nguyen-17 yes exactly!","body":"@lucas-nguyen-17 yes exactly!"}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659937289,"creation_date":1659937289,"answer_id":73273316,"question_id":73273267,"body_markdown":"Since the response document does not tell you the amount of elements (and we are not sure whether the server returns a correct `content-size` header, you will have to parse the response and count.","title":"How to find the length or size of the elements of response array in rest assured","body":"<p>Since the response document does not tell you the amount of elements (and we are not sure whether the server returns a correct <code>content-size</code> header, you will have to parse the response and count.</p>\n"},{"tags":[],"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659964180,"creation_date":1659964180,"answer_id":73278415,"question_id":73273267,"body_markdown":"You can do something like this:\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n\r\n    RestAssured.baseURI = &quot;http://demo1954881.mockable.io&quot;;\r\n    Response resp =\r\n            given().\r\n                    when().get(&quot;/modules&quot;)\r\n                    .then().extract().response();\r\n\r\n    ArrayList&lt;Map&gt; parsed = resp.jsonPath().get();\r\n    List&lt;Map&gt; result = parsed\r\n            .stream()\r\n            .filter(i -&gt; &quot;1000&quot;.equals(i.get(&quot;moduleid&quot;)))\r\n                    .collect(Collectors.toList());\r\n\r\n    result.forEach(\r\n            map -&gt; System\r\n                    .out\r\n                    .printf(\r\n                       &quot;Item with [moduleid=%s] has size of %d\\n&quot;,\r\n                       map.get(&quot;moduleid&quot;), map.size())\r\n    );\r\n}\r\n```\r\n\r\nSince you are ware of the response structure it is a simple array of maps. So you serialize it into array of maps and then use regular toolset for manipulating with data.\r\n","title":"How to find the length or size of the elements of response array in rest assured","body":"<p>You can do something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n\n    RestAssured.baseURI = &quot;http://demo1954881.mockable.io&quot;;\n    Response resp =\n            given().\n                    when().get(&quot;/modules&quot;)\n                    .then().extract().response();\n\n    ArrayList&lt;Map&gt; parsed = resp.jsonPath().get();\n    List&lt;Map&gt; result = parsed\n            .stream()\n            .filter(i -&gt; &quot;1000&quot;.equals(i.get(&quot;moduleid&quot;)))\n                    .collect(Collectors.toList());\n\n    result.forEach(\n            map -&gt; System\n                    .out\n                    .printf(\n                       &quot;Item with [moduleid=%s] has size of %d\\n&quot;,\n                       map.get(&quot;moduleid&quot;), map.size())\n    );\n}\n</code></pre>\n<p>Since you are ware of the response structure it is a simple array of maps. So you serialize it into array of maps and then use regular toolset for manipulating with data.</p>\n"},{"tags":[],"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660227836,"creation_date":1660227836,"answer_id":73322348,"question_id":73273267,"body_markdown":"As above comment, the `length` here is the number of key-value pair in the json object.\r\n\r\nFor me, you can choose any object in the array to count the number of key-value pair, but if you want to specify the json object with condition, for example `moduleid=1005`, this code would work for you.\r\n\r\n```\r\nMap&lt;String, Object&gt; parsed = resp.jsonPath().get(&quot;find {it.moduleid = &#39;1005&#39;}&quot;);\r\nint numberOfPair = parsed.keySet().size();\r\nSystem.out.println(numberOfPair); //4\r\n```","title":"How to find the length or size of the elements of response array in rest assured","body":"<p>As above comment, the <code>length</code> here is the number of key-value pair in the json object.</p>\n<p>For me, you can choose any object in the array to count the number of key-value pair, but if you want to specify the json object with condition, for example <code>moduleid=1005</code>, this code would work for you.</p>\n<pre><code>Map&lt;String, Object&gt; parsed = resp.jsonPath().get(&quot;find {it.moduleid = '1005'}&quot;);\nint numberOfPair = parsed.keySet().size();\nSystem.out.println(numberOfPair); //4\n</code></pre>\n"}],"owner":{"account_id":25442663,"reputation":23,"user_id":19245271,"display_name":"suhel shaikh"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":851,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73322348,"answer_count":3,"score":0,"last_activity_date":1660227836,"creation_date":1659936775,"question_id":73273267,"body_markdown":"I am new to rest assured. I have tried below code for getting response\r\n\r\n    RestAssured.baseURI = &quot;http://localhost:8090/api&quot;;\r\n    Response resp = \r\n              given().\r\n              when().get(&quot;/modules&quot;)\r\n             .then().extract().response();\r\nThis is JSON response\r\n\r\n        [\r\n            {\r\n                &quot;moduleid&quot;: &quot;1000&quot;,\r\n                &quot;module&quot;: &quot;reader&quot;,\r\n                &quot;title&quot;: &quot;Learn to read&quot;,\r\n                &quot;description&quot;: &quot;Learn to read and understand code&quot;\r\n            },\r\n           {\r\n            &quot;moduleid&quot;: &quot;1005&quot;,\r\n            &quot;module&quot;: &quot;debug&quot;,\r\n            &quot;title&quot;: &quot;Can you fix it?&quot;,\r\n            &quot;description&quot;: &quot;Learn how to uncover logical mistakes&quot;\r\n           },\r\n        ]\r\n\r\nHow do I get the **length or size** of the elements of that array.\r\n","title":"How to find the length or size of the elements of response array in rest assured","body":"<p>I am new to rest assured. I have tried below code for getting response</p>\n<pre><code>RestAssured.baseURI = &quot;http://localhost:8090/api&quot;;\nResponse resp = \n          given().\n          when().get(&quot;/modules&quot;)\n         .then().extract().response();\n</code></pre>\n<p>This is JSON response</p>\n<pre><code>    [\n        {\n            &quot;moduleid&quot;: &quot;1000&quot;,\n            &quot;module&quot;: &quot;reader&quot;,\n            &quot;title&quot;: &quot;Learn to read&quot;,\n            &quot;description&quot;: &quot;Learn to read and understand code&quot;\n        },\n       {\n        &quot;moduleid&quot;: &quot;1005&quot;,\n        &quot;module&quot;: &quot;debug&quot;,\n        &quot;title&quot;: &quot;Can you fix it?&quot;,\n        &quot;description&quot;: &quot;Learn how to uncover logical mistakes&quot;\n       },\n    ]\n</code></pre>\n<p>How do I get the <strong>length or size</strong> of the elements of that array.</p>\n"},{"tags":["java","android","firebase"],"comments":[{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1660227656,"post_id":73321915,"comment_id":129487470,"body_markdown":"@AlexMamo this error has nothing to do with &#39;thread safeness&#39;. I know, ConcurrentModificationException as a name rather strongly suggests its thread related. It is not. In fact, trying to simultaneously modify the same list from multiple threads does __not__ usually result in a CoModEx, it&#39;s in many ways the opposite.","body":"@AlexMamo this error has nothing to do with &#39;thread safeness&#39;. I know, ConcurrentModificationException as a name rather strongly suggests its thread related. It is not. In fact, trying to simultaneously modify the same list from multiple threads does <b>not</b> usually result in a CoModEx, it&#39;s in many ways the opposite."}],"answers":[{"tags":[],"owner":{"account_id":5191510,"reputation":1415,"user_id":4154302,"display_name":"Asad Awadia"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1660226242,"creation_date":1660226242,"answer_id":73321965,"question_id":73321915,"body_markdown":"You can&#39;t add to mUsers while iterating over it in this async fashion\r\n\r\nUse something that is concurrency friendly such as a concurrenthashset, queue, or copy on write array for mUsers","title":"ConcurrentModificationException thrown on for","body":"<p>You can't add to mUsers while iterating over it in this async fashion</p>\n<p>Use something that is concurrency friendly such as a concurrenthashset, queue, or copy on write array for mUsers</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660227779,"creation_date":1660227779,"answer_id":73322335,"question_id":73321915,"body_markdown":"You&#39;re doing the following:\r\n\r\n1. Obtain an `iterator` from some collection object. a `for (var foo : collectionObject)` does this. Also, calling `collectionObject.iterator()` does this.\r\n2. Modify the collection, and not via the iterator. In any way; `.clear()`, `.add()` - etc.\r\n3. Interact with the iterator somehow. When your `for (var foo : collection)` loops, that&#39;ll do it. So will calling `hasNext()` or `next()` on that iterator.\r\n\r\nThen, boom, ConcurrentModificationException will always occur, unless the type of the collection explicitly calls out in its documentation that it deals with such issues differently (for example, `CopyOnWriteArrayList` is one such particular implementation that would not, and the reason it would not is spelled out in its [javadoc](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArrayList.html).\r\n\r\nYou&#39;re doing precisely that: you&#39;re modifying the list itself as you iterate through it. You can&#39;t do that, and there&#39;s a good reason.When you call `mUsers.add` while you&#39;re looping through all the elements in `mUsers`, did you intend for that loop to then also loop over this freshly added item? It&#39;s likely to lead to lots of endless loops if that&#39;s the case. Or was your intent that the for loop should loop through everything as it was when the for loop begins, thus, anything you delete or add during the loop doesn&#39;t change what you loop through? Perhaps - but this requires copying the list. If the list is large, that&#39;s very pricey.\r\n\r\nYou see why java doesn&#39;t let you do this. It&#39;s an intentional design decision.\r\n\r\nIf you really did intend to edit the list while looping it, there are a few ways to &#39;fix&#39; things:\r\n\r\nUse ListIterator instead, or add things to a second list and once the for loop is done, use `.addAll` to add all elements in the temporary list to the main list.\r\n\r\nHowever, that is __not__ your problem here.\r\n\r\nInstead, your code is just broken. I think the intent is to only execute `mUsers.add(user)` if `user` is not already in `mUsers`.\r\n\r\nThat&#39;s not what your code does even if you adressed the &#39;you cannot modify a list while looping through it&#39; aspect of it. Your code would execute `mUsers.add(user)` once for every existing user name in the list that isn&#39;t identical to user. In other words, if your list is `[Jane, Jackie, Jill]` and I tried to add `Jackie` to it, your list ends up being `[Jane, Jackie, Jill, Jackie, Jackie]` - clearly not what you wanted.\r\n\r\nEither simply use a `Set` (which silently ignores attempts to add stuff that is already in there), or get rid of the inner for loop. All you need is:\r\n\r\n```\r\nif (!mUsers.contains(user)) mUsers.add(user);\r\n```\r\n\r\n","title":"ConcurrentModificationException thrown on for","body":"<p>You're doing the following:</p>\n<ol>\n<li>Obtain an <code>iterator</code> from some collection object. a <code>for (var foo : collectionObject)</code> does this. Also, calling <code>collectionObject.iterator()</code> does this.</li>\n<li>Modify the collection, and not via the iterator. In any way; <code>.clear()</code>, <code>.add()</code> - etc.</li>\n<li>Interact with the iterator somehow. When your <code>for (var foo : collection)</code> loops, that'll do it. So will calling <code>hasNext()</code> or <code>next()</code> on that iterator.</li>\n</ol>\n<p>Then, boom, ConcurrentModificationException will always occur, unless the type of the collection explicitly calls out in its documentation that it deals with such issues differently (for example, <code>CopyOnWriteArrayList</code> is one such particular implementation that would not, and the reason it would not is spelled out in its <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArrayList.html\" rel=\"nofollow noreferrer\">javadoc</a>.</p>\n<p>You're doing precisely that: you're modifying the list itself as you iterate through it. You can't do that, and there's a good reason.When you call <code>mUsers.add</code> while you're looping through all the elements in <code>mUsers</code>, did you intend for that loop to then also loop over this freshly added item? It's likely to lead to lots of endless loops if that's the case. Or was your intent that the for loop should loop through everything as it was when the for loop begins, thus, anything you delete or add during the loop doesn't change what you loop through? Perhaps - but this requires copying the list. If the list is large, that's very pricey.</p>\n<p>You see why java doesn't let you do this. It's an intentional design decision.</p>\n<p>If you really did intend to edit the list while looping it, there are a few ways to 'fix' things:</p>\n<p>Use ListIterator instead, or add things to a second list and once the for loop is done, use <code>.addAll</code> to add all elements in the temporary list to the main list.</p>\n<p>However, that is <strong>not</strong> your problem here.</p>\n<p>Instead, your code is just broken. I think the intent is to only execute <code>mUsers.add(user)</code> if <code>user</code> is not already in <code>mUsers</code>.</p>\n<p>That's not what your code does even if you adressed the 'you cannot modify a list while looping through it' aspect of it. Your code would execute <code>mUsers.add(user)</code> once for every existing user name in the list that isn't identical to user. In other words, if your list is <code>[Jane, Jackie, Jill]</code> and I tried to add <code>Jackie</code> to it, your list ends up being <code>[Jane, Jackie, Jill, Jackie, Jackie]</code> - clearly not what you wanted.</p>\n<p>Either simply use a <code>Set</code> (which silently ignores attempts to add stuff that is already in there), or get rid of the inner for loop. All you need is:</p>\n<pre><code>if (!mUsers.contains(user)) mUsers.add(user);\n</code></pre>\n"}],"owner":{"account_id":25425994,"reputation":3,"user_id":19231169,"display_name":"Abderrazzakk Belghite"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73322335,"answer_count":2,"score":0,"last_activity_date":1660227779,"creation_date":1660226024,"question_id":73321915,"body_markdown":"problem of cant add element while iterating.\r\ni tried th emethod of creating another arraylist nd store element there and add them all in one time but it didnt work because you nedd the arraymist size to operate right. any help pls.\r\n```\r\nprivate void readChats(){\r\n        mUsers = new ArrayList&lt;&gt;();\r\n\r\n        reference = FirebaseDatabase.getInstance().getReference(&quot;Users&quot;);\r\n        reference.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                mUsers.clear();\r\n                for(DataSnapshot dataSnapshot : snapshot.getChildren()){\r\n                    User user = dataSnapshot.getValue(User.class);\r\n\r\n                    //display 1 user from chats\r\n                    for(String id : usersList){\r\n                        if(user.getId().equals(id)){\r\n                            if(mUsers.size() != 0){\r\n                                for(User user1 : mUsers){\r\n                                    if(!user.getId().equals(user1.getId())){\r\n                                        mUsers.add(user);\r\n                                    }\r\n                                }\r\n                            }else{\r\n                                mUsers.add(user);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                }\r\n                userAdapter = new UserAdapter(getContext(), mUsers, true);\r\n                recyclerView.setAdapter(userAdapter);\r\n            }\r\n```","title":"ConcurrentModificationException thrown on for","body":"<p>problem of cant add element while iterating.\ni tried th emethod of creating another arraylist nd store element there and add them all in one time but it didnt work because you nedd the arraymist size to operate right. any help pls.</p>\n<pre><code>private void readChats(){\n        mUsers = new ArrayList&lt;&gt;();\n\n        reference = FirebaseDatabase.getInstance().getReference(&quot;Users&quot;);\n        reference.addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                mUsers.clear();\n                for(DataSnapshot dataSnapshot : snapshot.getChildren()){\n                    User user = dataSnapshot.getValue(User.class);\n\n                    //display 1 user from chats\n                    for(String id : usersList){\n                        if(user.getId().equals(id)){\n                            if(mUsers.size() != 0){\n                                for(User user1 : mUsers){\n                                    if(!user.getId().equals(user1.getId())){\n                                        mUsers.add(user);\n                                    }\n                                }\n                            }else{\n                                mUsers.add(user);\n                            }\n                        }\n                    }\n\n                }\n                userAdapter = new UserAdapter(getContext(), mUsers, true);\n                recyclerView.setAdapter(userAdapter);\n            }\n</code></pre>\n"},{"tags":["java","junit","mockito"],"answers":[{"tags":[],"owner":{"account_id":4012793,"reputation":1627,"user_id":3305737,"display_name":"Jonasz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660215786,"creation_date":1660215786,"answer_id":73319577,"question_id":73319276,"body_markdown":"This is a result of [erasure of generic types][1]. Mockito does not have access to the actual type returned by the `get()` method and in result `null` is returned. See [ReturnsDeepStubs class code in the Mockito GitHub repository][2] for more details.\r\n\r\nTo work around that you should mock returning the stub from the `get()` method by hand in your test code or in a test setup method (`@BeforeEach`).\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/generics/genTypes.html\r\n  [2]: https://github.com/mockito/mockito/blob/main/src/main/java/org/mockito/internal/stubbing/defaultanswers/ReturnsDeepStubs.java#L63","title":"Mocking Instance&lt;T&gt; with deep stubs","body":"<p>This is a result of <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/genTypes.html\" rel=\"nofollow noreferrer\">erasure of generic types</a>. Mockito does not have access to the actual type returned by the <code>get()</code> method and in result <code>null</code> is returned. See <a href=\"https://github.com/mockito/mockito/blob/main/src/main/java/org/mockito/internal/stubbing/defaultanswers/ReturnsDeepStubs.java#L63\" rel=\"nofollow noreferrer\">ReturnsDeepStubs class code in the Mockito GitHub repository</a> for more details.</p>\n<p>To work around that you should mock returning the stub from the <code>get()</code> method by hand in your test code or in a test setup method (<code>@BeforeEach</code>).</p>\n"}],"owner":{"account_id":41650,"reputation":2179,"user_id":121122,"accept_rate":75,"display_name":"eriksmith200"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":175,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73319577,"answer_count":1,"score":0,"last_activity_date":1660227259,"creation_date":1660214321,"question_id":73319276,"body_markdown":"I want to mock a lazy injection with deep stubs using:\r\n```java\r\n@Mock(answer = Answers.RETURNS_DEEP_STUBS)\r\nInstance&lt;MyClass&gt; myClassInstance;\r\n```` \r\n\r\nBut `myClassInstance.get().myMethod()` results in a NullPointerException because `myClassInstance.get()` returns `null` instead of a mock.\r\n\r\nIs this an unsupported feature or am I doing something wrong?\r\n\r\nI&#39;m using junit-jupiter 5.9.0 and mockito-junit-jupiter 4.6.1.","title":"Mocking Instance&lt;T&gt; with deep stubs","body":"<p>I want to mock a lazy injection with deep stubs using:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mock(answer = Answers.RETURNS_DEEP_STUBS)\nInstance&lt;MyClass&gt; myClassInstance;\n</code></pre>\n<p>But <code>myClassInstance.get().myMethod()</code> results in a NullPointerException because <code>myClassInstance.get()</code> returns <code>null</code> instead of a mock.</p>\n<p>Is this an unsupported feature or am I doing something wrong?</p>\n<p>I'm using junit-jupiter 5.9.0 and mockito-junit-jupiter 4.6.1.</p>\n"},{"tags":["java","logging","log4j2"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1660203629,"post_id":73316944,"comment_id":129478662,"body_markdown":"Did you configure any rolling file appender based on date (not size)? If not, then look it up and configure that. This might already solve your problem.","body":"Did you configure any rolling file appender based on date (not size)? If not, then look it up and configure that. This might already solve your problem."},{"owner":{"account_id":9735515,"reputation":1045,"user_id":7218881,"display_name":"Sankalpa Wijewickrama"},"score":1,"creation_date":1660211609,"post_id":73316944,"comment_id":129481439,"body_markdown":"Can you please add your log4j2.xml file to your original question. Then I can have a look at it and diagnose your logging problem.","body":"Can you please add your log4j2.xml file to your original question. Then I can have a look at it and diagnose your logging problem."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1660233710,"post_id":73316944,"comment_id":129489965,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":26035689,"reputation":1,"user_id":19741169,"display_name":"Suresh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660227234,"creation_date":1660203463,"question_id":73316944,"body_markdown":"After running the server today, my today log files are going to stored in yesterday log files.\r\nwhat is the solution for this issue?","title":"log4j2 -- Today&#39;s log files are going to stored in old log files","body":"<p>After running the server today, my today log files are going to stored in yesterday log files.\nwhat is the solution for this issue?</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":1,"creation_date":1660203843,"post_id":73316426,"comment_id":129478741,"body_markdown":"Why do you send an expired/invalid token? In this case you should always get an 401. To ignore it seems no good way for security.","body":"Why do you send an expired/invalid token? In this case you should always get an 401. To ignore it seems no good way for security."},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1660218931,"post_id":73316426,"comment_id":129483945,"body_markdown":"please motivate why you are using `EnableResourceServer` annotation which is in maintenance mode/deprecated instead of implementing the handling of JWTs in the way that spring security recommends in their documentation","body":"please motivate why you are using <code>EnableResourceServer</code> annotation which is in maintenance mode/deprecated instead of implementing the handling of JWTs in the way that spring security recommends in their documentation"}],"answers":[{"tags":[],"owner":{"account_id":25690087,"reputation":1360,"user_id":19451633,"display_name":"Andrei Titov"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1660227197,"creation_date":1660227197,"answer_id":73322196,"question_id":73316426,"body_markdown":"There is a group of methods in `HttpSecurity` class, which allows you to apply defined security rules only to specific paths, and thus create different security filter chains with different rules for different urls.\r\n\r\nFor example, you can exclude some urls like this:\r\n\r\n    // convert your String array into a List of RequestMatcher\r\n    List&lt;RequestMatcher&gt; excludedPathMatchers = Arrays.stream(unsecuredPathList)\r\n                    .map(AntPathRequestMatcher::new)\r\n                    .collect(Collectors.toList());\r\n\r\n    // configure HttpSecurity to apply filter chain only on paths, that don&#39;t match any of the excluded paths\r\n    http.requestMatcher(new NegatedRequestMatcher(new OrRequestMatcher(excludedPathMatchers)));\r\n\r\nOr you can write something like this, if you have only 1 unsecured endpoint:\r\n\r\n    http.requestMatcher(new NegatedRequestMatcher(new AntPathRequestMatcher(&quot;/some_url/**&quot;)));\r\n","title":"InvalidTokenException for &quot;unsecured&quot; routes in Spring Security","body":"<p>There is a group of methods in <code>HttpSecurity</code> class, which allows you to apply defined security rules only to specific paths, and thus create different security filter chains with different rules for different urls.</p>\n<p>For example, you can exclude some urls like this:</p>\n<pre><code>// convert your String array into a List of RequestMatcher\nList&lt;RequestMatcher&gt; excludedPathMatchers = Arrays.stream(unsecuredPathList)\n                .map(AntPathRequestMatcher::new)\n                .collect(Collectors.toList());\n\n// configure HttpSecurity to apply filter chain only on paths, that don't match any of the excluded paths\nhttp.requestMatcher(new NegatedRequestMatcher(new OrRequestMatcher(excludedPathMatchers)));\n</code></pre>\n<p>Or you can write something like this, if you have only 1 unsecured endpoint:</p>\n<pre><code>http.requestMatcher(new NegatedRequestMatcher(new AntPathRequestMatcher(&quot;/some_url/**&quot;)));\n</code></pre>\n"}],"owner":{"account_id":2214033,"reputation":215,"user_id":1955157,"display_name":"PhilippB"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":355,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1660227197,"creation_date":1660200767,"question_id":73316426,"body_markdown":"Since I have updated Spring Boot Version to 2.6.7 I get logs that the way I define unsecured routes is not recommended anymore.\r\n\r\nLog message:\r\n\r\n```\r\nYou are asking Spring Security to ignore Ant [pattern=&#39;/actuator/**&#39;]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.\r\n```\r\n\r\nThe way I was describing the config that Spring Security has to ignore these patterns was done by defining a WebSecurityConfiguration and ignoring those routes. What happens in this case is, that the whole security chain is skipped and the above mentioned logs are written. It&#39;s okay for me, but not for Spring ;).\r\n\r\n\r\n```\r\n@Configuration\r\npublic class WebSecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n\r\n    public void configure(WebSecurity web) throws Exception {\r\n        web.ignoring()\r\n                .antMatchers(\r\n                       &quot;/actuator/**&quot;\r\n                );\r\n    }\r\n}\r\n```\r\n\r\nWhen defining these route as part of the httpSecurity as mentioned in the log. The problem occurs that an expired/invalid token cause an error (401 unauthorized) as well for unsecured routes like ```/actuator/health```.\r\n\r\n\r\n```\r\n@Configuration\r\n@EnableResourceServer\r\npublic class ResourceServerConfiguration extends ResourceServerConfigurerAdapter {\r\n\r\n    @Getter\r\n    private String[] unsecuredPathList;\r\n\r\n    @PostConstruct\r\n    public void postConstruct() {\r\n        this.unsecuredPathList = new String[] {\r\n                &quot;/actuator/**&quot;};\r\n    }\r\n\r\n    @Bean\r\n    public JwtTokenStore jwtTokenStore() {\r\n        return new JwtTokenStore(new CustomJwtAccessTokenConverter(true));\r\n    }\r\n\r\n    @Override\r\n    public void configure(ResourceServerSecurityConfigurer resourceServer) throws Exception {\r\n        resourceServer.tokenStore(jwtTokenStore());\r\n        resourceServer.tokenExtractor(new SessionCookieTokenExtractor());\r\n    }\r\n\r\n    @Override\r\n    public void configure(HttpSecurity http) throws Exception {\r\n\r\n        http\r\n            .anonymous()\r\n            .authorities(&quot;ANONYMOUS&quot;)\r\n            .and()\r\n            .authorizeRequests()\r\n            .antMatchers(unsecuredPathList)\r\n            .permitAll()\r\n            .and()\r\n            .authorizeRequests()\r\n            .anyRequest()\r\n            .authenticated();\r\n    }\r\n}\r\n```\r\n\r\nThe goal I want to reach is: \r\nFor an unsecure resource the token will not be evaluated/the result is ignored and there is no 401-Unauthorized-Error. \r\n\r\nIs there anything I can do in httpSecurity? \r\nOr is there any other recommended way to reach that goal?\r\n\r\nThanks in advance for your help.","title":"InvalidTokenException for &quot;unsecured&quot; routes in Spring Security","body":"<p>Since I have updated Spring Boot Version to 2.6.7 I get logs that the way I define unsecured routes is not recommended anymore.</p>\n<p>Log message:</p>\n<pre><code>You are asking Spring Security to ignore Ant [pattern='/actuator/**']. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.\n</code></pre>\n<p>The way I was describing the config that Spring Security has to ignore these patterns was done by defining a WebSecurityConfiguration and ignoring those routes. What happens in this case is, that the whole security chain is skipped and the above mentioned logs are written. It's okay for me, but not for Spring ;).</p>\n<pre><code>@Configuration\npublic class WebSecurityConfiguration extends WebSecurityConfigurerAdapter {\n\n    public void configure(WebSecurity web) throws Exception {\n        web.ignoring()\n                .antMatchers(\n                       &quot;/actuator/**&quot;\n                );\n    }\n}\n</code></pre>\n<p>When defining these route as part of the httpSecurity as mentioned in the log. The problem occurs that an expired/invalid token cause an error (401 unauthorized) as well for unsecured routes like <code>/actuator/health</code>.</p>\n<pre><code>@Configuration\n@EnableResourceServer\npublic class ResourceServerConfiguration extends ResourceServerConfigurerAdapter {\n\n    @Getter\n    private String[] unsecuredPathList;\n\n    @PostConstruct\n    public void postConstruct() {\n        this.unsecuredPathList = new String[] {\n                &quot;/actuator/**&quot;};\n    }\n\n    @Bean\n    public JwtTokenStore jwtTokenStore() {\n        return new JwtTokenStore(new CustomJwtAccessTokenConverter(true));\n    }\n\n    @Override\n    public void configure(ResourceServerSecurityConfigurer resourceServer) throws Exception {\n        resourceServer.tokenStore(jwtTokenStore());\n        resourceServer.tokenExtractor(new SessionCookieTokenExtractor());\n    }\n\n    @Override\n    public void configure(HttpSecurity http) throws Exception {\n\n        http\n            .anonymous()\n            .authorities(&quot;ANONYMOUS&quot;)\n            .and()\n            .authorizeRequests()\n            .antMatchers(unsecuredPathList)\n            .permitAll()\n            .and()\n            .authorizeRequests()\n            .anyRequest()\n            .authenticated();\n    }\n}\n</code></pre>\n<p>The goal I want to reach is:\nFor an unsecure resource the token will not be evaluated/the result is ignored and there is no 401-Unauthorized-Error.</p>\n<p>Is there anything I can do in httpSecurity?\nOr is there any other recommended way to reach that goal?</p>\n<p>Thanks in advance for your help.</p>\n"},{"tags":["java","spring-boot","tomcat"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1660222807,"post_id":73320694,"comment_id":129485326,"body_markdown":"Your customizer actually disables the use of the properties.","body":"Your customizer actually disables the use of the properties."},{"owner":{"account_id":26037827,"reputation":11,"user_id":19743066,"display_name":"Jayden"},"score":0,"creation_date":1660231020,"post_id":73320694,"comment_id":129488814,"body_markdown":"The server.tomcat.max-http-form-post-size and server.tomcat.max-swallow-size properties were set in application.properties with the hope of resolving this error so it wasn&#39;t part of the initial implementation i.e. the maxPostSize on the Tomcat connector was supposed to be set with the setMaxPostSize call but this doesn&#39;t seem to be working which is why I tried using the properties which also doesn&#39;t seem to be working. Are you suggesting I remove the customizer and just use properties?","body":"The server.tomcat.max-http-form-post-size and server.tomcat.max-swallow-size properties were set in application.properties with the hope of resolving this error so it wasn&#39;t part of the initial implementation i.e. the maxPostSize on the Tomcat connector was supposed to be set with the setMaxPostSize call but this doesn&#39;t seem to be working which is why I tried using the properties which also doesn&#39;t seem to be working. Are you suggesting I remove the customizer and just use properties?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1660285244,"post_id":73320694,"comment_id":129500755,"body_markdown":"Are you using the embedded tomcat or are you deploying your application to a tomcat server?","body":"Are you using the embedded tomcat or are you deploying your application to a tomcat server?"},{"owner":{"account_id":26037827,"reputation":11,"user_id":19743066,"display_name":"Jayden"},"score":0,"creation_date":1660289185,"post_id":73320694,"comment_id":129501923,"body_markdown":"I am deploying the application to a tomcat server.","body":"I am deploying the application to a tomcat server."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1660292161,"post_id":73320694,"comment_id":129502917,"body_markdown":"Then that won&#39;t work as that is for the embedded container. You will need to configure the tomcat instance you are deploying to. The `server.*` properties don&#39;t apply nor do the `TomcatCustomizer` run/apply as it isn&#39;t an embedded tomcat.","body":"Then that won&#39;t work as that is for the embedded container. You will need to configure the tomcat instance you are deploying to. The <code>server.*</code> properties don&#39;t apply nor do the <code>TomcatCustomizer</code> run/apply as it isn&#39;t an embedded tomcat."}],"answers":[{"tags":[],"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660226839,"creation_date":1660226839,"answer_id":73322107,"question_id":73320694,"body_markdown":"simple, in `application.properties`\r\n\r\n\r\n```java\r\n# What you want\r\nspring.servlet.multipart.max-file-size=10MB\r\nspring.servlet.multipart.max-request-size=20MB\r\n```","title":"How to increase maxPostSize in Spring Boot","body":"<p>simple, in <code>application.properties</code></p>\n<pre class=\"lang-java prettyprint-override\"><code># What you want\nspring.servlet.multipart.max-file-size=10MB\nspring.servlet.multipart.max-request-size=20MB\n</code></pre>\n"}],"owner":{"account_id":26037827,"reputation":11,"user_id":19743066,"display_name":"Jayden"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1329,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1660226839,"creation_date":1660221039,"question_id":73320694,"body_markdown":"I&#39;m getting the following error when uploading a large file:\r\n*The multi-part request contained parameter data (excluding uploaded files) that exceeded the limit for maxPostSize set on the associated connector]*\r\n\r\nI have the following in application.properties (I&#39;ve also tried setting these to -1 i.e. unlimited)\r\n\r\n    spring.servlet.multipart.max-file-size=250MB\r\n    spring.servlet.multipart.max-request-size=250MB\r\n    server.tomcat.max-http-form-post-size=250000000\r\n    server.tomcat.max-swallow-size=250000000\r\n\r\nAnd the following in the main application class, Application.java:\r\n\r\n    /* Configures the embedded Tomcat max post size */\r\n    @Bean\r\n    public WebServerFactoryCustomizer&lt;TomcatServletWebServerFactory&gt; containerCustomizer() {\r\n\r\n        return (TomcatServletWebServerFactory container) -&gt; {\r\n\r\n            String propVal = environment.getProperty(&quot;spring.servlet.multipart.max-request-size&quot;);\r\n            int postSize = 10000000; // Default - 10MB\r\n\r\n            if (!propVal.isEmpty()) {\r\n                postSize = Integer.parseInt(propVal.substring(0, propVal.length() - 2));\r\n\r\n                if (propVal.endsWith(&quot;KB&quot;)) {\r\n                    postSize = postSize * 1000;\r\n                }\r\n                else if (propVal.endsWith(&quot;MB&quot;)) {\r\n                    postSize = postSize * 1000000;\r\n                }\r\n            }\r\n            // Needs to be final for lambda expression bellow\r\n            final int maxPostSize = postSize;\r\n\r\n            container.addConnectorCustomizers((connector) -&gt; connector.setMaxPostSize(maxPostSize));\r\n        };\r\n    }\r\n\r\nHowever, I&#39;m still getting the error. Does anyone perhaps have any suggestions or ideas please?\r\n\r\nSpring Boot Version = 2.6.6, Tomcat Version = Apache Tomcat/9.0.62","title":"How to increase maxPostSize in Spring Boot","body":"<p>I'm getting the following error when uploading a large file:\n<em>The multi-part request contained parameter data (excluding uploaded files) that exceeded the limit for maxPostSize set on the associated connector]</em></p>\n<p>I have the following in application.properties (I've also tried setting these to -1 i.e. unlimited)</p>\n<pre><code>spring.servlet.multipart.max-file-size=250MB\nspring.servlet.multipart.max-request-size=250MB\nserver.tomcat.max-http-form-post-size=250000000\nserver.tomcat.max-swallow-size=250000000\n</code></pre>\n<p>And the following in the main application class, Application.java:</p>\n<pre><code>/* Configures the embedded Tomcat max post size */\n@Bean\npublic WebServerFactoryCustomizer&lt;TomcatServletWebServerFactory&gt; containerCustomizer() {\n\n    return (TomcatServletWebServerFactory container) -&gt; {\n\n        String propVal = environment.getProperty(&quot;spring.servlet.multipart.max-request-size&quot;);\n        int postSize = 10000000; // Default - 10MB\n\n        if (!propVal.isEmpty()) {\n            postSize = Integer.parseInt(propVal.substring(0, propVal.length() - 2));\n\n            if (propVal.endsWith(&quot;KB&quot;)) {\n                postSize = postSize * 1000;\n            }\n            else if (propVal.endsWith(&quot;MB&quot;)) {\n                postSize = postSize * 1000000;\n            }\n        }\n        // Needs to be final for lambda expression bellow\n        final int maxPostSize = postSize;\n\n        container.addConnectorCustomizers((connector) -&gt; connector.setMaxPostSize(maxPostSize));\n    };\n}\n</code></pre>\n<p>However, I'm still getting the error. Does anyone perhaps have any suggestions or ideas please?</p>\n<p>Spring Boot Version = 2.6.6, Tomcat Version = Apache Tomcat/9.0.62</p>\n"},{"tags":["java","arrays","patternsyntaxexception"],"comments":[{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":0,"creation_date":1660222485,"post_id":73319752,"comment_id":129485200,"body_markdown":"It&#39;s always helpful if you show the desired result - so include what you want `str` to look like in your example.  I&#39;ve included an answer which should help but if I misinterpreted your objective result then you&#39;ll have to &quot;adjust&quot;.","body":"It&#39;s always helpful if you show the desired result - so include what you want <code>str</code> to look like in your example.  I&#39;ve included an answer which should help but if I misinterpreted your objective result then you&#39;ll have to &quot;adjust&quot;."}],"answers":[{"tags":[],"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660226709,"creation_date":1660221507,"answer_id":73320795,"question_id":73319752,"body_markdown":"This is a partial answer..\r\n\r\nProblem #1: The `Arrays.toString(a)` returns a string which is bounded by `[]` so this is the result:\r\n\r\n    [\\b of \\b, \\bor \\b ,  \\bit  \\b , \\bto \\b ]\r\n\r\nThe brackets are special to regex to define the start-end of a character class definition.  `\\b` in a character class definition does not mean &quot;word boundary&quot; but rather results in an &quot;illegal escape sequence&quot;.\r\n\r\nSo first step is to remove the brackets from the regex string (from [here](https://stackoverflow.com/a/32774108/17856705)).\r\n\r\n    String regex = Arrays.toString(a).replace(&quot;[&quot;,&quot;&quot;).replace(&quot;]&quot;, &quot;&quot;);\r\n\r\nProblem #2: Your regex now looks like:\r\n\r\n    \\b of \\b, \\bor \\b ,  \\bit  \\b , \\bto \\b \r\n\r\nThis is not likely what you want - here&#39;s what I interpret what you want:\r\n\r\n    \r\n\r\n&gt; Remove all occurrences of `of ` OR `or ` OR `it ` OR `to ` iff surrounded by word boundaries to include removing the trailing space.\r\n\r\n(Note also the space after the expressions which should be removed.)\r\n\r\nSo assume we start with:\r\n\r\n    String[] a = new String[] { &quot;\\\\bof \\\\b&quot;, &quot;\\\\bor \\\\b&quot;, &quot; \\\\bit  \\\\b&quot;, &quot;\\\\bto \\\\b&quot; };\r\n\r\nSo to implement the &quot;OR&quot; part you need:\r\n\r\n    \\bof \\b|\\bor \\b|\\bit \\b|\\bto \\b \r\n\r\nAnd so the replace operation would look like:\r\n\r\n\r\n    str = str.replaceAll(&quot;\\\\bof \\\\b|\\\\bor \\\\b|\\\\bit \\\\b|\\\\bto \\\\b&quot;,&quot;&quot;);\r\n\r\nTo continue using your array approach you could then use:\r\n\r\n    String regex = Arrays.toString(a).replace(&quot;[&quot;,&quot;&quot;).replace(&quot;]&quot;, &quot;&quot;);\r\n    regex = regex.replaceAll(&quot;, +&quot;,&quot;|&quot;);\r\n\r\nwhich yields the regex from your array (same as discussed before):\r\n\r\n    \\bof \\b|\\bor \\b|\\bit  \\b|\\bto \\b\r\n\r\nAnd so\r\n\r\n    String str = &quot;asdasdas of or asdasd&quot;;\r\n    str = str.replaceAll(regex,&quot;&quot;);\r\n\r\nyields:\r\n\r\n    asdasdas asdasd\r\n\r\nI was a bit loose in the treatment of regex explanation so I would invite others to be more precise in their answers.\r\n\r\nGood luck.\r\n\r\n    \r\n","title":"Exception in thread &quot;main&quot; java.util.regex.PatternSyntaxException: Illegal/unsupported escape sequence near index 2","body":"<p>This is a partial answer..</p>\n<p>Problem #1: The <code>Arrays.toString(a)</code> returns a string which is bounded by <code>[]</code> so this is the result:</p>\n<pre><code>[\\b of \\b, \\bor \\b ,  \\bit  \\b , \\bto \\b ]\n</code></pre>\n<p>The brackets are special to regex to define the start-end of a character class definition.  <code>\\b</code> in a character class definition does not mean &quot;word boundary&quot; but rather results in an &quot;illegal escape sequence&quot;.</p>\n<p>So first step is to remove the brackets from the regex string (from <a href=\"https://stackoverflow.com/a/32774108/17856705\">here</a>).</p>\n<pre><code>String regex = Arrays.toString(a).replace(&quot;[&quot;,&quot;&quot;).replace(&quot;]&quot;, &quot;&quot;);\n</code></pre>\n<p>Problem #2: Your regex now looks like:</p>\n<pre><code>\\b of \\b, \\bor \\b ,  \\bit  \\b , \\bto \\b \n</code></pre>\n<p>This is not likely what you want - here's what I interpret what you want:</p>\n<blockquote>\n<p>Remove all occurrences of <code>of </code> OR <code>or </code> OR <code>it </code> OR <code>to </code> iff surrounded by word boundaries to include removing the trailing space.</p>\n</blockquote>\n<p>(Note also the space after the expressions which should be removed.)</p>\n<p>So assume we start with:</p>\n<pre><code>String[] a = new String[] { &quot;\\\\bof \\\\b&quot;, &quot;\\\\bor \\\\b&quot;, &quot; \\\\bit  \\\\b&quot;, &quot;\\\\bto \\\\b&quot; };\n</code></pre>\n<p>So to implement the &quot;OR&quot; part you need:</p>\n<pre><code>\\bof \\b|\\bor \\b|\\bit \\b|\\bto \\b \n</code></pre>\n<p>And so the replace operation would look like:</p>\n<pre><code>str = str.replaceAll(&quot;\\\\bof \\\\b|\\\\bor \\\\b|\\\\bit \\\\b|\\\\bto \\\\b&quot;,&quot;&quot;);\n</code></pre>\n<p>To continue using your array approach you could then use:</p>\n<pre><code>String regex = Arrays.toString(a).replace(&quot;[&quot;,&quot;&quot;).replace(&quot;]&quot;, &quot;&quot;);\nregex = regex.replaceAll(&quot;, +&quot;,&quot;|&quot;);\n</code></pre>\n<p>which yields the regex from your array (same as discussed before):</p>\n<pre><code>\\bof \\b|\\bor \\b|\\bit  \\b|\\bto \\b\n</code></pre>\n<p>And so</p>\n<pre><code>String str = &quot;asdasdas of or asdasd&quot;;\nstr = str.replaceAll(regex,&quot;&quot;);\n</code></pre>\n<p>yields:</p>\n<pre><code>asdasdas asdasd\n</code></pre>\n<p>I was a bit loose in the treatment of regex explanation so I would invite others to be more precise in their answers.</p>\n<p>Good luck.</p>\n"}],"owner":{"display_name":"user19207662"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":295,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73320795,"answer_count":1,"score":0,"last_activity_date":1660226709,"creation_date":1660216570,"question_id":73319752,"body_markdown":"I&#39;m trying to remove some words from the line. I don&#39;t want to prescribe them but replace them, because the words that I remove may increase. So I used an array. But when I try to do this, I get errors. I will be glad of any help.\r\n```\r\n String[] a = new String[]{\r\n                &quot;\\\\bof \\\\b&quot;,\r\n                &quot;\\\\bor \\\\b &quot;,&quot; \\\\bit \\\\b &quot;,&quot; \\\\bto \\\\b &quot;\r\n        };\r\n        String str = &quot;asdasdas of or asdasd&quot;;\r\n        str = str.replaceAll(\r\n                Arrays.toString(a)\r\n                , &quot;&quot;);\r\n```","title":"Exception in thread &quot;main&quot; java.util.regex.PatternSyntaxException: Illegal/unsupported escape sequence near index 2","body":"<p>I'm trying to remove some words from the line. I don't want to prescribe them but replace them, because the words that I remove may increase. So I used an array. But when I try to do this, I get errors. I will be glad of any help.</p>\n<pre><code> String[] a = new String[]{\n                &quot;\\\\bof \\\\b&quot;,\n                &quot;\\\\bor \\\\b &quot;,&quot; \\\\bit \\\\b &quot;,&quot; \\\\bto \\\\b &quot;\n        };\n        String str = &quot;asdasdas of or asdasd&quot;;\n        str = str.replaceAll(\n                Arrays.toString(a)\n                , &quot;&quot;);\n</code></pre>\n"},{"tags":["java","svg","module","classpath","batik"],"owner":{"account_id":1964375,"reputation":47,"user_id":1765006,"accept_rate":20,"display_name":"Dieter Profos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":241,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660226592,"creation_date":1660074298,"question_id":73297300,"body_markdown":"The purpose of my project is to create PNG pictures from SVG using specific fonts (I have tried numerous converter services on the web but none of them worked with external fonts, and the JAVA program I have developed 10 years ago does no longer work).\r\nMy actual problem is the import of the **batik.transcoder** components into my program. Currently, it looks as follows:&lt;br&gt;\r\n\r\n    &lt;code&gt;\r\n        // is this the really the parent of JPEGTranscoder / PNGTranscoder??\r\n        import javax.imageio.ImageTranscoder;  \r\n        // Neither org.apache.batik... nor batik... is correct !!??\r\n        import org.apache.batik.transcoder.SVGAbstractTranscoder;\r\n        import batik.transcoder.TranscoderException;\r\n        import batik.transcoder.TranscoderInput;\r\n        import batik.transcoder.TranscoderOutput;\r\n        import batik.transcoder.PNGTranscoder;\r\n        import batik.transcoder.image.JPEGTranscoder;&lt;br&gt;\r\n        // or did I import the wrong jars ??\r\n        // (taken from batik-1.14 and afterwards from batik-1.7; neither did work!)\r\n        public class SVGConverter {\r\n        ...\r\n          // all code lines below return the same error: &quot;... cannot be resolved to a type&quot;\r\n          TranscoderInput input = new TranscoderInput(svgURI);\r\n          TranscoderOutput output = new TranscoderOutput(ostream);\r\n    \r\n          ImageTranscoder t;\r\n        ...\r\n          t = new JPEGTranscoder();\r\n        ...\r\n          t = new PNGTranscoder();\r\n        ...\r\n        }\r\n    &lt;/code&gt;\r\n\r\n          \r\nFirst I tried to import the batik components as modules on the module path but without success. In a contribution to stackoverflow I then found the hint to put the batik components not onto the module path but to the class path (Has batik not been converted into modules?). However, no success either.&lt;br&gt;\r\nI have copied all jar&#39;s contained in batik-1.14.zip and later of batik-1.7.zip into the lib directory within the project. No effect whatsoever...&lt;br&gt;\r\nI was using &quot;import org.apache.batik.transcoder.XXX&quot; in my previous program in 2013: Doesn&#39;t work any more. But using &quot;import batik.transcoder.XXX&quot; doesn&#39;t work either.&lt;br&gt;\r\nThus, the following questions:&lt;br&gt;\r\n**1. Is it correct that batik classes/jars have to be used via the class path?&lt;br&gt;\r\n2. What is the correct package name to address the respective packages and classes?&lt;br&gt;\r\n3. Is it correct to load the corresponding jar&#39;s into the lib directory of the project?&lt;br&gt;**\r\n\r\n","title":"Using Batik 1.14 with Java: How to import modules or classes?","body":"<p>The purpose of my project is to create PNG pictures from SVG using specific fonts (I have tried numerous converter services on the web but none of them worked with external fonts, and the JAVA program I have developed 10 years ago does no longer work).\nMy actual problem is the import of the <strong>batik.transcoder</strong> components into my program. Currently, it looks as follows:<br></p>\n<pre><code>&lt;code&gt;\n    // is this the really the parent of JPEGTranscoder / PNGTranscoder??\n    import javax.imageio.ImageTranscoder;  \n    // Neither org.apache.batik... nor batik... is correct !!??\n    import org.apache.batik.transcoder.SVGAbstractTranscoder;\n    import batik.transcoder.TranscoderException;\n    import batik.transcoder.TranscoderInput;\n    import batik.transcoder.TranscoderOutput;\n    import batik.transcoder.PNGTranscoder;\n    import batik.transcoder.image.JPEGTranscoder;&lt;br&gt;\n    // or did I import the wrong jars ??\n    // (taken from batik-1.14 and afterwards from batik-1.7; neither did work!)\n    public class SVGConverter {\n    ...\n      // all code lines below return the same error: &quot;... cannot be resolved to a type&quot;\n      TranscoderInput input = new TranscoderInput(svgURI);\n      TranscoderOutput output = new TranscoderOutput(ostream);\n\n      ImageTranscoder t;\n    ...\n      t = new JPEGTranscoder();\n    ...\n      t = new PNGTranscoder();\n    ...\n    }\n&lt;/code&gt;\n\n      \n</code></pre>\n<p>First I tried to import the batik components as modules on the module path but without success. In a contribution to stackoverflow I then found the hint to put the batik components not onto the module path but to the class path (Has batik not been converted into modules?). However, no success either.<br>\nI have copied all jar's contained in batik-1.14.zip and later of batik-1.7.zip into the lib directory within the project. No effect whatsoever...<br>\nI was using &quot;import org.apache.batik.transcoder.XXX&quot; in my previous program in 2013: Doesn't work any more. But using &quot;import batik.transcoder.XXX&quot; doesn't work either.<br>\nThus, the following questions:<br>\n<strong>1. Is it correct that batik classes/jars have to be used via the class path?<br>\n2. What is the correct package name to address the respective packages and classes?<br>\n3. Is it correct to load the corresponding jar's into the lib directory of the project?<br></strong></p>\n"},{"tags":["java","json"],"answers":[{"tags":[],"owner":{"account_id":5191510,"reputation":1415,"user_id":4154302,"display_name":"Asad Awadia"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660226402,"creation_date":1660226402,"answer_id":73322008,"question_id":73319546,"body_markdown":"There is a `has` method to check if the key exists\r\n\r\nYou can also use one of the `opt` methods so that you can get back a default value in case the key doesn&#39;t exist","title":"is there a way to check for existence of a key in JSONObject of org.json java package?","body":"<p>There is a <code>has</code> method to check if the key exists</p>\n<p>You can also use one of the <code>opt</code> methods so that you can get back a default value in case the key doesn't exist</p>\n"}],"owner":{"account_id":16944271,"reputation":727,"user_id":12255379,"display_name":"Nikolai Savulkin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73322008,"answer_count":1,"score":0,"last_activity_date":1660226402,"creation_date":1660215680,"question_id":73319546,"body_markdown":"Essentially its as the title says, I want to check if key &quot;error&quot; exists in the JSONObject but guarding it with try catch as a part of normal control flow seems to be a very bad and dirty thing to do, so surely it cant be the intended solution. But I cant think of any other way to do it.","title":"is there a way to check for existence of a key in JSONObject of org.json java package?","body":"<p>Essentially its as the title says, I want to check if key &quot;error&quot; exists in the JSONObject but guarding it with try catch as a part of normal control flow seems to be a very bad and dirty thing to do, so surely it cant be the intended solution. But I cant think of any other way to do it.</p>\n"},{"tags":["java","spring","swagger","openapi"],"comments":[{"owner":{"account_id":39252,"reputation":89802,"user_id":113116,"display_name":"Helen"},"score":0,"creation_date":1660230548,"post_id":73321907,"comment_id":129488637,"body_markdown":"Does this answer your question -- [Swagger schema properties ignored when using $ref - why?](https://stackoverflow.com/q/33629750/113116)","body":"Does this answer your question -- <a href=\"https://stackoverflow.com/q/33629750/113116\">Swagger schema properties ignored when using $ref - why?</a>"},{"owner":{"account_id":20527198,"reputation":1,"user_id":15065352,"display_name":"Vladius"},"score":0,"creation_date":1660235034,"post_id":73321907,"comment_id":129490400,"body_markdown":"very similar to the truth.. I&#39;ll check...","body":"very similar to the truth.. I&#39;ll check..."}],"owner":{"account_id":20527198,"reputation":1,"user_id":15065352,"display_name":"Vladius"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3068,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660226371,"creation_date":1660225989,"question_id":73321907,"body_markdown":"In the project we use open api 3.0. I need to write a custom validator for JsonNullable value...\r\nspecification:\r\n\r\n    Characteristic:\r\n          type: object\r\n          required:\r\n            - name\r\n            - value\r\n          description: Describes a given characteristic of an object or entity through a\r\n            name/value pair.\r\n          properties:\r\n            id:\r\n              type: string\r\n              description: Unique identifier of characteristic\r\n            name:\r\n              type: string\r\n              description: Name of the characteristic\r\n            valueType:\r\n              type: string\r\n              description: Data type of the value of the characteristic\r\n            value:\r\n              $ref: &quot;#/components/schemas/Any&quot;\r\n              x-constraints: &quot;@CustomNotNull&quot;\r\n\r\nanotation:\r\n\r\n    @Documented\r\n    @Constraint(validatedBy = {CustomCharacteristicValidator.class})\r\n    @Target({ElementType.PARAMETER, ElementType.FIELD, ElementType.METHOD})\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    public @interface CustomNotNull {\r\n        String message() default &quot;Value must not be null.&quot;;\r\n        boolean required() default true;\r\n    }\r\n\r\nvalidator:\r\n\r\n  \r\n\r\n      @Component\r\n    public class CustomCharacteristicValidator implements ConstraintValidator&lt;CustomNotNull, JsonNullable&lt;Object&gt;&gt; {\r\n    \r\n        @Override\r\n        public boolean isValid(JsonNullable&lt;Object&gt; value, ConstraintValidatorContext context) {\r\n    //        if (Objects.nonNull(value.get())) {\r\n    //            context.disableDefaultConstraintViolation();\r\n    //            context.buildConstraintViolationWithTemplate(&quot;value can&#39;t be empty&quot;).addConstraintViolation();\r\n    //            return false;\r\n    //        }\r\n            return true;\r\n        }\r\n    }\r\n\r\nused the following resources:\r\n1. https://stackoverflow.com/questions/57727892/how-to-inject-custom-spring-validation-inside-swagger-codegen\r\n2. https://bartko-mat.medium.com/openapi-generator-to-spring-boot-with-custom-java-validations-623381df9215\r\n3. https://stackoverflow.com/questions/71768778/how-to-use-custom-validators-in-spring\r\n\r\n**Problem:** The required annotation is generated for all data types except $ref: &quot;#/components/schemas/Any&quot;\r\n\r\n      /**\r\n       * Get value\r\n       * @return value\r\n      */\r\n      @NotNull \r\n    **//should be here**\r\n      @Schema(name = &quot;value&quot;, required = true)\r\n      public JsonNullable&lt;Object&gt; getValue() {\r\n        return value;\r\n      }\r\nMaybe someone came across? Are there any solutions to this problem at all?","title":"Custom constraint in OpenAPI Specification 3.0.0 (java)","body":"<p>In the project we use open api 3.0. I need to write a custom validator for JsonNullable value...\nspecification:</p>\n<pre><code>Characteristic:\n      type: object\n      required:\n        - name\n        - value\n      description: Describes a given characteristic of an object or entity through a\n        name/value pair.\n      properties:\n        id:\n          type: string\n          description: Unique identifier of characteristic\n        name:\n          type: string\n          description: Name of the characteristic\n        valueType:\n          type: string\n          description: Data type of the value of the characteristic\n        value:\n          $ref: &quot;#/components/schemas/Any&quot;\n          x-constraints: &quot;@CustomNotNull&quot;\n</code></pre>\n<p>anotation:</p>\n<pre><code>@Documented\n@Constraint(validatedBy = {CustomCharacteristicValidator.class})\n@Target({ElementType.PARAMETER, ElementType.FIELD, ElementType.METHOD})\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface CustomNotNull {\n    String message() default &quot;Value must not be null.&quot;;\n    boolean required() default true;\n}\n</code></pre>\n<p>validator:</p>\n<pre><code>  @Component\npublic class CustomCharacteristicValidator implements ConstraintValidator&lt;CustomNotNull, JsonNullable&lt;Object&gt;&gt; {\n\n    @Override\n    public boolean isValid(JsonNullable&lt;Object&gt; value, ConstraintValidatorContext context) {\n//        if (Objects.nonNull(value.get())) {\n//            context.disableDefaultConstraintViolation();\n//            context.buildConstraintViolationWithTemplate(&quot;value can't be empty&quot;).addConstraintViolation();\n//            return false;\n//        }\n        return true;\n    }\n}\n</code></pre>\n<p>used the following resources:</p>\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/57727892/how-to-inject-custom-spring-validation-inside-swagger-codegen\">How to inject custom spring validation inside swagger codegen?</a></li>\n<li><a href=\"https://bartko-mat.medium.com/openapi-generator-to-spring-boot-with-custom-java-validations-623381df9215\" rel=\"nofollow noreferrer\">https://bartko-mat.medium.com/openapi-generator-to-spring-boot-with-custom-java-validations-623381df9215</a></li>\n<li><a href=\"https://stackoverflow.com/questions/71768778/how-to-use-custom-validators-in-spring\">How to use custom validators in Spring</a></li>\n</ol>\n<p><strong>Problem:</strong> The required annotation is generated for all data types except $ref: &quot;#/components/schemas/Any&quot;</p>\n<pre><code>  /**\n   * Get value\n   * @return value\n  */\n  @NotNull \n**//should be here**\n  @Schema(name = &quot;value&quot;, required = true)\n  public JsonNullable&lt;Object&gt; getValue() {\n    return value;\n  }\n</code></pre>\n<p>Maybe someone came across? Are there any solutions to this problem at all?</p>\n"},{"tags":["java","applet","version"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":1,"creation_date":1660141851,"post_id":73308028,"comment_id":129463535,"body_markdown":"What environtment did you use to run this? Applets have been removed from the java runtime as well as from browsers.","body":"What environtment did you use to run this? Applets have been removed from the java runtime as well as from browsers."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1660142597,"post_id":73308028,"comment_id":129463839,"body_markdown":"Have you tried to add similar `codebase` attributes and param `type` tags to the latter `object` tag?","body":"Have you tried to add similar <code>codebase</code> attributes and param <code>type</code> tags to the latter <code>object</code> tag?"},{"owner":{"account_id":7276527,"reputation":1,"user_id":5547792,"display_name":"Adrian"},"score":0,"creation_date":1660143618,"post_id":73308028,"comment_id":129464311,"body_markdown":"I would like to do that, but I don&#39;t know what the codebase should read nor the type line. That would be my ideal solution. The Java 1.3 ones work fine in Edge in IE mode.","body":"I would like to do that, but I don&#39;t know what the codebase should read nor the type line. That would be my ideal solution. The Java 1.3 ones work fine in Edge in IE mode."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660141939,"creation_date":1660141939,"answer_id":73308162,"question_id":73308028,"body_markdown":"I do not envy you for having simply inherited these applets. Even if you had a chance of getting Java 6 running somewhere today, you would hardly find support in case of problems. And today&#39;s browsers may even stop supporting Java Applets altogether (e.g. see https://stackoverflow.com/questions/30843774/how-to-launch-an-applet-using-chrome)\r\n\r\nNot having the full source code is adding yet another layer of complexity and risk.\r\n\r\nThus you might want to find completely other solutions. You could run everything on the client using [Webstart][1]. Or you could run everything on the server using [WebSwing][2]. Or anything inbetween using a website with GWT or React JS or Angular or whatnot. But staying on Applets is no more state of the art.\r\n\r\n  [1]: https://openwebstart.com/\r\n  [2]: https://www.webswing.org/","title":"I want to force an Applet to only use Java 1.6 (Java 6)","body":"<p>I do not envy you for having simply inherited these applets. Even if you had a chance of getting Java 6 running somewhere today, you would hardly find support in case of problems. And today's browsers may even stop supporting Java Applets altogether (e.g. see <a href=\"https://stackoverflow.com/questions/30843774/how-to-launch-an-applet-using-chrome\">How to launch an applet using chrome?</a>)</p>\n<p>Not having the full source code is adding yet another layer of complexity and risk.</p>\n<p>Thus you might want to find completely other solutions. You could run everything on the client using <a href=\"https://openwebstart.com/\" rel=\"nofollow noreferrer\">Webstart</a>. Or you could run everything on the server using <a href=\"https://www.webswing.org/\" rel=\"nofollow noreferrer\">WebSwing</a>. Or anything inbetween using a website with GWT or React JS or Angular or whatnot. But staying on Applets is no more state of the art.</p>\n"}],"owner":{"account_id":7276527,"reputation":1,"user_id":5547792,"display_name":"Adrian"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":260,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660226184,"creation_date":1660141446,"question_id":73308028,"body_markdown":"I have inherited support for an old Java Applet (written circa 2010) in Java 6, (1.6) to support. I have even inherited support for a couple of Java 3 applets.\r\n\r\nThe Java 3 works as the following code surrounds the applet\r\n\r\n    &lt;OBJECT classid=&quot;clsid:8AD9C840-044E-11D1-B3E9-00805F499D93&quot;\r\n    WIDTH = 100% HEIGHT = 100% ALIGN = &quot;baseline&quot;  \r\n    codebase=&quot;http://java.sun.com/products/plugin/1.3/jinstall-13-win32.cab#Version=1,3,0,0&quot;&gt;\r\n    \r\n    &lt;PARAM NAME = CODE VALUE = &quot;ODBSServerGUI\\OLIVE.class&quot; &gt;\r\n    &lt;PARAM NAME = ARCHIVE VALUE = &quot;olive.jar&quot; &gt;\r\n    \r\n    &lt;PARAM NAME=&quot;type&quot; VALUE=&quot;application/x-java-applet;jpi-version=1.3.0_02&quot;&gt;\r\n    &lt;PARAM NAME=&quot;scriptable&quot; VALUE=&quot;false&quot;&gt;\r\n    &lt;PARAM NAME = &quot;port&quot; VALUE =&quot;20285&quot;&gt;\r\n    &lt;PARAM NAME = &quot;host&quot; VALUE =&quot;MOGH&quot;&gt;\r\n    &lt;/OBJECT&gt;\r\n\r\nI need something similar for my Java 6 application, as the Java 6 application does not run with Java 7 or 8. I can not just simply re-compile it, as some of the original source code is missing, and decompiling and re-compiling is a very involved process.\r\nThe Java 6 application currently ran like this, but I now need to force the version and possibly download a &quot;temporary&quot; copy of the code into peoples&#39; browsers.\r\n\r\n    &lt;object classid=&quot;clsid:8AD9C840-044E-11D1-B3E9-00805F499D93&quot;\r\n            width=&quot;100%&quot;\r\n            height=&quot;100%&quot;\r\n            align= &quot;baseline&quot;&gt;\r\n        &lt;param name=&quot;code&quot; value=&quot;SiteCommApplet.TestTool.class&quot; &gt;\r\n        &lt;param name=&quot;archive&quot; value=&quot;/RMCommandCentre/dist/OTTApp.jar&quot;&gt;\r\n        &lt;param name=&quot;username&quot; value=&quot;&lt;?php echo $userdetails[&#39;User&#39;][&#39;name&#39;];?&gt;&quot;&gt;\r\n        &lt;param name=&quot;connid&quot; value=&quot;&lt;?php echo $dbconnection[&#39;Dbconnection&#39;][&#39;id&#39;];?&gt;&quot;&gt;   \r\n    &lt;/object&gt;\r\n\r\nCan somebody please help me.\r\n(I apologise in advance that I am having problems with the formatting.)\r\n\r\nI have just tried the following, but with no luck\r\n\r\n    &lt;object classid=&quot;clsid: CAFEEFAC-0016-0025-FFFF-ABCDEFFEDCBA&quot;\r\n            width=&quot;100%&quot;\r\n            height=&quot;100%&quot;\r\n            align= &quot;baseline&quot; codebase=&quot;http://java.sun.com/update/1.6.0/jinstall-6u25-windows-i586.cab#Version=1,6,25,0&quot;&gt;\r\n        &lt;param name=&quot;code&quot; value=&quot;SiteCommApplet.TestTool.class&quot; &gt;\r\n        &lt;param name=&quot;archive&quot; value=&quot;/RMCommandCentre/dist/OTTApp.jar&quot;&gt;\r\n    \t&lt;PARAM NAME=&quot;type&quot; VALUE=&quot;application/x-java-applet;jpi-version=1.6.0&quot;&gt;\r\n        &lt;param name=&quot;username&quot; value=&quot;&lt;?php echo $userdetails[&#39;User&#39;][&#39;name&#39;];?&gt;&quot;&gt;\r\n    \t&lt;param name=&quot;connid&quot; value=&quot;&lt;?php echo $dbconnection[&#39;Dbconnection&#39;][&#39;id&#39;];?&gt;&quot;&gt;   \r\n    &lt;/object&gt;\r\n\r\nI got that from information on the page https://bugs.openjdk.org/browse/JDK-8161117?page=com.atlassian.jira.plugin.system.issuetabpanels%3Aworklog-tabpanel but the link appears to be broken.\r\n","title":"I want to force an Applet to only use Java 1.6 (Java 6)","body":"<p>I have inherited support for an old Java Applet (written circa 2010) in Java 6, (1.6) to support. I have even inherited support for a couple of Java 3 applets.</p>\n<p>The Java 3 works as the following code surrounds the applet</p>\n<pre><code>&lt;OBJECT classid=&quot;clsid:8AD9C840-044E-11D1-B3E9-00805F499D93&quot;\nWIDTH = 100% HEIGHT = 100% ALIGN = &quot;baseline&quot;  \ncodebase=&quot;http://java.sun.com/products/plugin/1.3/jinstall-13-win32.cab#Version=1,3,0,0&quot;&gt;\n\n&lt;PARAM NAME = CODE VALUE = &quot;ODBSServerGUI\\OLIVE.class&quot; &gt;\n&lt;PARAM NAME = ARCHIVE VALUE = &quot;olive.jar&quot; &gt;\n\n&lt;PARAM NAME=&quot;type&quot; VALUE=&quot;application/x-java-applet;jpi-version=1.3.0_02&quot;&gt;\n&lt;PARAM NAME=&quot;scriptable&quot; VALUE=&quot;false&quot;&gt;\n&lt;PARAM NAME = &quot;port&quot; VALUE =&quot;20285&quot;&gt;\n&lt;PARAM NAME = &quot;host&quot; VALUE =&quot;MOGH&quot;&gt;\n&lt;/OBJECT&gt;\n</code></pre>\n<p>I need something similar for my Java 6 application, as the Java 6 application does not run with Java 7 or 8. I can not just simply re-compile it, as some of the original source code is missing, and decompiling and re-compiling is a very involved process.\nThe Java 6 application currently ran like this, but I now need to force the version and possibly download a &quot;temporary&quot; copy of the code into peoples' browsers.</p>\n<pre><code>&lt;object classid=&quot;clsid:8AD9C840-044E-11D1-B3E9-00805F499D93&quot;\n        width=&quot;100%&quot;\n        height=&quot;100%&quot;\n        align= &quot;baseline&quot;&gt;\n    &lt;param name=&quot;code&quot; value=&quot;SiteCommApplet.TestTool.class&quot; &gt;\n    &lt;param name=&quot;archive&quot; value=&quot;/RMCommandCentre/dist/OTTApp.jar&quot;&gt;\n    &lt;param name=&quot;username&quot; value=&quot;&lt;?php echo $userdetails['User']['name'];?&gt;&quot;&gt;\n    &lt;param name=&quot;connid&quot; value=&quot;&lt;?php echo $dbconnection['Dbconnection']['id'];?&gt;&quot;&gt;   \n&lt;/object&gt;\n</code></pre>\n<p>Can somebody please help me.\n(I apologise in advance that I am having problems with the formatting.)</p>\n<p>I have just tried the following, but with no luck</p>\n<pre><code>&lt;object classid=&quot;clsid: CAFEEFAC-0016-0025-FFFF-ABCDEFFEDCBA&quot;\n        width=&quot;100%&quot;\n        height=&quot;100%&quot;\n        align= &quot;baseline&quot; codebase=&quot;http://java.sun.com/update/1.6.0/jinstall-6u25-windows-i586.cab#Version=1,6,25,0&quot;&gt;\n    &lt;param name=&quot;code&quot; value=&quot;SiteCommApplet.TestTool.class&quot; &gt;\n    &lt;param name=&quot;archive&quot; value=&quot;/RMCommandCentre/dist/OTTApp.jar&quot;&gt;\n    &lt;PARAM NAME=&quot;type&quot; VALUE=&quot;application/x-java-applet;jpi-version=1.6.0&quot;&gt;\n    &lt;param name=&quot;username&quot; value=&quot;&lt;?php echo $userdetails['User']['name'];?&gt;&quot;&gt;\n    &lt;param name=&quot;connid&quot; value=&quot;&lt;?php echo $dbconnection['Dbconnection']['id'];?&gt;&quot;&gt;   \n&lt;/object&gt;\n</code></pre>\n<p>I got that from information on the page <a href=\"https://bugs.openjdk.org/browse/JDK-8161117?page=com.atlassian.jira.plugin.system.issuetabpanels%3Aworklog-tabpanel\" rel=\"nofollow noreferrer\">https://bugs.openjdk.org/browse/JDK-8161117?page=com.atlassian.jira.plugin.system.issuetabpanels%3Aworklog-tabpanel</a> but the link appears to be broken.</p>\n"},{"tags":["java","asp.net","aspose","aspose.words"],"answers":[{"tags":[],"owner":{"account_id":11398698,"reputation":1809,"user_id":8356224,"display_name":"Alexey Noskov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660225892,"creation_date":1660225892,"answer_id":73321885,"question_id":73319798,"body_markdown":"You can use [Document.appendDocument][1] method. In this case each appended document will be added to the document as a separate `Section` node (if there is only one section in the source document). For example:\r\n```java\r\n// List of input Html documents.\r\nString[] files = new String[]{&quot;C:\\\\temp\\\\in1.html&quot;, &quot;C:\\\\temp\\\\in2.html&quot;, &quot;C:\\\\temp\\\\in3.html&quot;};\r\n\r\nDocument doc = new Document();\r\nDocumentBuilder builder = new DocumentBuilder(doc);\r\nbuilder.write(&quot;This is the main document where HTML documents will be appended&quot;);\r\n\r\n// Append HTML documents.\r\nfor(String path : files)\r\n{\r\n    Document subDoc = new Document(path);\r\n    doc.appendDocument(subDoc, ImportFormatMode.USE_DESTINATION_STYLES);\r\n}\r\n\r\ndoc.save(&quot;C:\\\\Temp\\\\out.docx&quot;);\r\n```\r\nIf you are using DocumentBuilder.insertHtml method to insert HTML, you should use DocumentBuilder.insertBreak to insert section break between the inserted HTML parts:\r\n```java\r\n// List of input Html documents.\r\nString[] files = new String[]{&quot;C:\\\\temp\\\\in1.html&quot;, &quot;C:\\\\temp\\\\in2.html&quot;, &quot;C:\\\\temp\\\\in3.html&quot;};\r\n\r\nDocument doc = new Document();\r\nDocumentBuilder builder = new DocumentBuilder(doc);\r\nbuilder.write(&quot;This is the main document where HTML documents will be appended&quot;);\r\n\r\n// Append HTML documents.\r\nfor(String path : files)\r\n{\r\n    // Insert section break\r\n    builder.insertBreak(BreakType.SECTION_BREAK_NEW_PAGE);\r\n    // Insert HTML\r\n    builder.insertHtml(Files.readString(Path.of(path)));\r\n}\r\n\r\ndoc.save(&quot;C:\\\\Temp\\\\out.docx&quot;);\r\n```\r\n\r\n\r\n  [1]: https://reference.aspose.com/words/java/com.aspose.words/document#appendDocument(com.aspose.words.Document,int)","title":"how to read data from multiple HTML files and populated to single docx/pdf using Aspose?","body":"<p>You can use <a href=\"https://reference.aspose.com/words/java/com.aspose.words/document#appendDocument(com.aspose.words.Document,int)\" rel=\"nofollow noreferrer\">Document.appendDocument</a> method. In this case each appended document will be added to the document as a separate <code>Section</code> node (if there is only one section in the source document). For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// List of input Html documents.\nString[] files = new String[]{&quot;C:\\\\temp\\\\in1.html&quot;, &quot;C:\\\\temp\\\\in2.html&quot;, &quot;C:\\\\temp\\\\in3.html&quot;};\n\nDocument doc = new Document();\nDocumentBuilder builder = new DocumentBuilder(doc);\nbuilder.write(&quot;This is the main document where HTML documents will be appended&quot;);\n\n// Append HTML documents.\nfor(String path : files)\n{\n    Document subDoc = new Document(path);\n    doc.appendDocument(subDoc, ImportFormatMode.USE_DESTINATION_STYLES);\n}\n\ndoc.save(&quot;C:\\\\Temp\\\\out.docx&quot;);\n</code></pre>\n<p>If you are using DocumentBuilder.insertHtml method to insert HTML, you should use DocumentBuilder.insertBreak to insert section break between the inserted HTML parts:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// List of input Html documents.\nString[] files = new String[]{&quot;C:\\\\temp\\\\in1.html&quot;, &quot;C:\\\\temp\\\\in2.html&quot;, &quot;C:\\\\temp\\\\in3.html&quot;};\n\nDocument doc = new Document();\nDocumentBuilder builder = new DocumentBuilder(doc);\nbuilder.write(&quot;This is the main document where HTML documents will be appended&quot;);\n\n// Append HTML documents.\nfor(String path : files)\n{\n    // Insert section break\n    builder.insertBreak(BreakType.SECTION_BREAK_NEW_PAGE);\n    // Insert HTML\n    builder.insertHtml(Files.readString(Path.of(path)));\n}\n\ndoc.save(&quot;C:\\\\Temp\\\\out.docx&quot;);\n</code></pre>\n"}],"owner":{"account_id":7038407,"reputation":35,"user_id":5391609,"display_name":"suresh sadanala"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":172,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73321885,"answer_count":1,"score":0,"last_activity_date":1660225892,"creation_date":1660216784,"question_id":73319798,"body_markdown":"Need to read data from each html file and add the data as one section in the docx document and the same should be applies for multiple html files adding each html data as each section in the single document","title":"how to read data from multiple HTML files and populated to single docx/pdf using Aspose?","body":"<p>Need to read data from each html file and add the data as one section in the docx document and the same should be applies for multiple html files adding each html data as each section in the single document</p>\n"},{"tags":["java","spring","hibernate"],"comments":[{"owner":{"account_id":15206782,"reputation":61,"user_id":10972954,"display_name":"clorzs"},"score":0,"creation_date":1660164521,"post_id":73311445,"comment_id":129471344,"body_markdown":"For some hbm.xml files, inside (&lt;class&gt;&lt;/class&gt; ) there is composite-id instead of id. Could that be the issue?","body":"For some hbm.xml files, inside (&lt;class&gt;&lt;/class&gt; ) there is composite-id instead of id. Could that be the issue?"},{"owner":{"account_id":15206782,"reputation":61,"user_id":10972954,"display_name":"clorzs"},"score":0,"creation_date":1660209599,"post_id":73311445,"comment_id":129480734,"body_markdown":"I disabled metamodel population but it didn&#39;t work too\nhibernate.ejb.metamodel.population=disabled","body":"I disabled metamodel population but it didn&#39;t work too hibernate.ejb.metamodel.population=disabled"}],"owner":{"account_id":15206782,"reputation":61,"user_id":10972954,"display_name":"clorzs"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660225807,"creation_date":1660158083,"question_id":73311445,"body_markdown":"I am  upgrading a java project from spirng 2 &amp; hibenate 3 TO spring 5.2.21.RELEASE and hibernate 5.6.9.Final\r\n\r\nWhen I deploy on a server like tomcat or jetty I get the following error declaring a bean in the Persistence.xml file\r\n\r\n    Error Creating bean with name &quot;demo.sessionFactory&quot; defined in...\r\n    \r\n    Caused By: java.lang.IllegalArgumentException: expecting IdClass mapping\r\n\r\n\r\nThe bean created is:\r\n\r\n    &lt;bean id=&quot;demo.sessionFactory&quot; \r\n    class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;\r\n    abstract=&quot;false&quot; lazy-init=&quot;default&quot; autowired=&quot;default&quot;&gt;\r\n    &lt;property name=&quot;hibernateProperties&gt;\r\n       &lt;ref bean=&quot;demo.hibernateProperties&quot;/&gt;\r\n    &lt;/property&gt;\r\n    &lt;property name=&quot;entityInterceptor&gt;\r\n       &lt;ref bean=&quot;demo.myInterceptor&quot;/&gt;\r\n    &lt;/property&gt;\r\n    &lt;property name=&quot;datasource&gt;\r\n       &lt;ref bean=&quot;demo.mappingRessource&quot;/&gt;\r\n    &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\nSorry I can&#39;t share all the code as it belong to a company but I will explain every term used:\r\n\r\ndemo.myInterceptor is a bean that created with a class that implements org.hibernate.EmptyInterceptor where onSave, onflush..are implemented\r\n\r\ndemo.mappingRessources is this bean\r\n\r\n    &lt;bean id=&quot;demo.mappingResssources&quot;\r\n    class=&quot;org.springframework.beans.factory.config.ListFactoryBean&quot;\r\n    parent=&quot;demo.mappingRessourceList&quot;\r\n    &lt;propety name=&quot;sourceList&quot;&gt;\r\n    &lt;list merge=&quot;true&quot;&gt;&lt;/list&gt;\r\n    &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\ndemo.mappingRessources is a list that has many files\r\n\r\n    &lt;util:list id=&quot;demo.mappingRessources&quot;&gt;\r\n    &lt;value&gt;file1.hbm.xml&gt;&lt;/value&gt;\r\n    ....\r\n    &lt;/util:list&gt;\r\n\r\nWhen I enter for example file1.hbm.xml I find the following:\r\n\r\n    &lt;hibernate-mapping&gt;\r\n    &lt;class name=&quot;file1&quot; table=&quot;table1&quot; schema=&quot;schema1&quot; catalog=&quot;demo&quot; lazy=&quot;true&quot;&gt;\r\n    &lt;id =&quot;fileId&quot; type=&quot;int&quot;&gt;\r\n    &lt;column name=&quot;cl1&quot;&gt;&lt;/column&gt;\r\n    &lt;generator class=&quot;native&quot;&gt;&lt;/generator&gt;\r\n    ... same for all attributes of file1\r\n    &lt;/class&gt;\r\n    &lt;/hibernate-mapping&gt;\r\n\r\nwhen I check file1 it is a class that looks like this:\r\n\r\n    pubic class File1 implements Serizalizable {\r\n    private int fileId;\r\n    private String str1:\r\n    ...\r\n    \r\n    public File1(){}\r\n    \r\n    //getters\r\n    \r\n    //setters\r\n    }\r\n\r\nregarding hibernateProperties it is this bean:\r\n\r\n    &lt;bean id=&quot;demo.hibernateProperties\r\n    class=&quot;org.springframework.beans.factory.config.PropertiesFactoryBean&quot;&gt;\r\n    &lt;property name=&quot;properties&quot;&gt;\r\n    &lt;props&gt;\r\n    &lt;prop key=hibernate.dialect&quot;&gt;{demo.hibernateProperties.hibernate.dialect}}\r\n    &lt;/prop&gt;\r\n    ...same for other properties that are defined in a properties file\r\n    &lt;/bean&gt;\r\n\r\nI searched and found that I should add @IdClass but the project was working fine with spring 2 and older hibernate 3 but I am not sure where that should be done. I didn&#39;t create new classes. I am just upgrading dependencies spring &amp; hibernate and modifying classes when needed (package change etc..)\r\n\r\n\r\n**EDIT**:\r\nFor some hbm.xml files, inside class there is composite-id instead of id. Could that be the issue?\r\n\r\n**EDIT1**:\r\n\r\n1-What I have tried but didnt work:\r\ndisable metamodel population.\r\n\r\n2-Comment all references to hbm.xml files as I saw some of them has composite-id and that may be issue according to what I found online.","title":"java/hibernate Exception: expecting IdClass mapping","body":"<p>I am  upgrading a java project from spirng 2 &amp; hibenate 3 TO spring 5.2.21.RELEASE and hibernate 5.6.9.Final</p>\n<p>When I deploy on a server like tomcat or jetty I get the following error declaring a bean in the Persistence.xml file</p>\n<pre><code>Error Creating bean with name &quot;demo.sessionFactory&quot; defined in...\n\nCaused By: java.lang.IllegalArgumentException: expecting IdClass mapping\n</code></pre>\n<p>The bean created is:</p>\n<pre><code>&lt;bean id=&quot;demo.sessionFactory&quot; \nclass=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;\nabstract=&quot;false&quot; lazy-init=&quot;default&quot; autowired=&quot;default&quot;&gt;\n&lt;property name=&quot;hibernateProperties&gt;\n   &lt;ref bean=&quot;demo.hibernateProperties&quot;/&gt;\n&lt;/property&gt;\n&lt;property name=&quot;entityInterceptor&gt;\n   &lt;ref bean=&quot;demo.myInterceptor&quot;/&gt;\n&lt;/property&gt;\n&lt;property name=&quot;datasource&gt;\n   &lt;ref bean=&quot;demo.mappingRessource&quot;/&gt;\n&lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>Sorry I can't share all the code as it belong to a company but I will explain every term used:</p>\n<p>demo.myInterceptor is a bean that created with a class that implements org.hibernate.EmptyInterceptor where onSave, onflush..are implemented</p>\n<p>demo.mappingRessources is this bean</p>\n<pre><code>&lt;bean id=&quot;demo.mappingResssources&quot;\nclass=&quot;org.springframework.beans.factory.config.ListFactoryBean&quot;\nparent=&quot;demo.mappingRessourceList&quot;\n&lt;propety name=&quot;sourceList&quot;&gt;\n&lt;list merge=&quot;true&quot;&gt;&lt;/list&gt;\n&lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>demo.mappingRessources is a list that has many files</p>\n<pre><code>&lt;util:list id=&quot;demo.mappingRessources&quot;&gt;\n&lt;value&gt;file1.hbm.xml&gt;&lt;/value&gt;\n....\n&lt;/util:list&gt;\n</code></pre>\n<p>When I enter for example file1.hbm.xml I find the following:</p>\n<pre><code>&lt;hibernate-mapping&gt;\n&lt;class name=&quot;file1&quot; table=&quot;table1&quot; schema=&quot;schema1&quot; catalog=&quot;demo&quot; lazy=&quot;true&quot;&gt;\n&lt;id =&quot;fileId&quot; type=&quot;int&quot;&gt;\n&lt;column name=&quot;cl1&quot;&gt;&lt;/column&gt;\n&lt;generator class=&quot;native&quot;&gt;&lt;/generator&gt;\n... same for all attributes of file1\n&lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n<p>when I check file1 it is a class that looks like this:</p>\n<pre><code>pubic class File1 implements Serizalizable {\nprivate int fileId;\nprivate String str1:\n...\n\npublic File1(){}\n\n//getters\n\n//setters\n}\n</code></pre>\n<p>regarding hibernateProperties it is this bean:</p>\n<pre><code>&lt;bean id=&quot;demo.hibernateProperties\nclass=&quot;org.springframework.beans.factory.config.PropertiesFactoryBean&quot;&gt;\n&lt;property name=&quot;properties&quot;&gt;\n&lt;props&gt;\n&lt;prop key=hibernate.dialect&quot;&gt;{demo.hibernateProperties.hibernate.dialect}}\n&lt;/prop&gt;\n...same for other properties that are defined in a properties file\n&lt;/bean&gt;\n</code></pre>\n<p>I searched and found that I should add @IdClass but the project was working fine with spring 2 and older hibernate 3 but I am not sure where that should be done. I didn't create new classes. I am just upgrading dependencies spring &amp; hibernate and modifying classes when needed (package change etc..)</p>\n<p><strong>EDIT</strong>:\nFor some hbm.xml files, inside class there is composite-id instead of id. Could that be the issue?</p>\n<p><strong>EDIT1</strong>:</p>\n<p>1-What I have tried but didnt work:\ndisable metamodel population.</p>\n<p>2-Comment all references to hbm.xml files as I saw some of them has composite-id and that may be issue according to what I found online.</p>\n"},{"tags":["java","variables","types","casting"],"comments":[{"owner":{"account_id":72575,"reputation":40794,"user_id":209513,"accept_rate":100,"display_name":"Subhrajyoti Majumder"},"score":3,"creation_date":1404900926,"post_id":24650871,"comment_id":38211591,"body_markdown":"`long c = (long)((a/(float)b)*100);`","body":"<code>long c = (long)((a&#47;(float)b)*100);</code>"},{"owner":{"account_id":3875106,"reputation":282,"user_id":3209360,"display_name":"Blue Ocean"},"score":3,"creation_date":1404900936,"post_id":24650871,"comment_id":38211600,"body_markdown":"did you search your problem before asking question? http://stackoverflow.com/questions/18117014/dividing-long-by-long-returns-0 or http://stackoverflow.com/questions/6766120/long-division-in-java-not-working-as-expected or lots of old questions","body":"did you search your problem before asking question? <a href=\"http://stackoverflow.com/questions/18117014/dividing-long-by-long-returns-0\" title=\"dividing long by long returns 0\">stackoverflow.com/questions/18117014/&hellip;</a> or <a href=\"http://stackoverflow.com/questions/6766120/long-division-in-java-not-working-as-expected\" title=\"long division in java not working as expected\">stackoverflow.com/questions/6766120/&hellip;</a> or lots of old questions"},{"owner":{"account_id":2283394,"reputation":1544,"user_id":2365197,"accept_rate":75,"display_name":"Shishir Gupta"},"score":1,"creation_date":1463311776,"post_id":24650871,"comment_id":62004301,"body_markdown":"Use `long c = (a*100L/b)` if you don&#39;t require decimal value,  `long c = (a/b)*100` is evaluated as `(a/b)*100 --&gt; (3004230/6793368)*100 --&gt; (0L)*100 --&gt; c=0` hence it will always be zero whereas `(a*100L/b) --&gt; (300423000/6793368) --&gt; (44L) --&gt; c=44`","body":"Use <code>long c = (a*100L&#47;b)</code> if you don&#39;t require decimal value,  <code>long c = (a&#47;b)*100</code> is evaluated as <code>(a&#47;b)*100 --&gt; (3004230&#47;6793368)*100 --&gt; (0L)*100 --&gt; c=0</code> hence it will always be zero whereas <code>(a*100L&#47;b) --&gt; (300423000&#47;6793368) --&gt; (44L) --&gt; c=44</code>"},{"owner":{"account_id":3248847,"reputation":1579,"user_id":2739681,"accept_rate":82,"display_name":"PeMa"},"score":1,"creation_date":1524566942,"post_id":24650871,"comment_id":87015442,"body_markdown":"long c = 100L *a/b","body":"long c = 100L *a/b"}],"answers":[{"tags":[],"owner":{"account_id":2510282,"reputation":12462,"user_id":2182928,"accept_rate":97,"display_name":"Rudi Kershaw"},"down_vote_count":0,"up_vote_count":55,"is_accepted":false,"score":55,"last_activity_date":1660225759,"creation_date":1404901041,"answer_id":24650986,"question_id":24650871,"body_markdown":"## Literal Values and Literal Arithmatic ##\r\n\r\nThere are a couple of issues with that code. Firstly, non-floating point **literal values** are of type `int` by default and so `3004230` in your code is an `int`. To explicitly declare it a `long` use `3004230L` instead.\r\n\r\nAlso, all arithmetic done with non-floating point **literals** returns an `int` result unless one of the variables are casted specifically to a floating point type such as `float` or `double`. As such `(a/b)*100` is less than 1, and therefore is [truncated][1] down to 0 (the floating point values are just cut off). Also, even if it did return the same result you are trying to store it in a `long` which can not store floating point values.\r\n\r\nSo, you should do something like the following to get the real result.\r\n\r\n    long a = 3004230L; // Use the L notation to declare this literal a long.\r\n    long b = 6793368L;\r\n    double c = ((double) a/b)*100; /* casting one of the variables to (double) means the result will not be 0 */\r\n\r\nI hope this helps.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Truncation","title":"How to divide two long variables in java","body":"<h2>Literal Values and Literal Arithmatic</h2>\n<p>There are a couple of issues with that code. Firstly, non-floating point <strong>literal values</strong> are of type <code>int</code> by default and so <code>3004230</code> in your code is an <code>int</code>. To explicitly declare it a <code>long</code> use <code>3004230L</code> instead.</p>\n<p>Also, all arithmetic done with non-floating point <strong>literals</strong> returns an <code>int</code> result unless one of the variables are casted specifically to a floating point type such as <code>float</code> or <code>double</code>. As such <code>(a/b)*100</code> is less than 1, and therefore is <a href=\"http://en.wikipedia.org/wiki/Truncation\" rel=\"noreferrer\">truncated</a> down to 0 (the floating point values are just cut off). Also, even if it did return the same result you are trying to store it in a <code>long</code> which can not store floating point values.</p>\n<p>So, you should do something like the following to get the real result.</p>\n<pre><code>long a = 3004230L; // Use the L notation to declare this literal a long.\nlong b = 6793368L;\ndouble c = ((double) a/b)*100; /* casting one of the variables to (double) means the result will not be 0 */\n</code></pre>\n<p>I hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":387465,"reputation":4697,"user_id":745827,"accept_rate":88,"display_name":"Cengiz"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1404901047,"creation_date":1404901047,"answer_id":24650989,"question_id":24650871,"body_markdown":"    final long a = 3004230;\r\n    final long b = 6793368;\r\n    final double c = ((double) a / b) * 100;\r\n\r\n=&gt; c = 44.22298335670907","title":"How to divide two long variables in java","body":"<pre><code>final long a = 3004230;\nfinal long b = 6793368;\nfinal double c = ((double) a / b) * 100;\n</code></pre>\n\n<p>=> c = 44.22298335670907</p>\n"},{"tags":[],"owner":{"account_id":4470148,"reputation":2879,"user_id":3636680,"accept_rate":100,"display_name":"Dawnkeeper"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1404901065,"creation_date":1404901065,"answer_id":24650997,"question_id":24650871,"body_markdown":"What you are doing right now is integer division. This will always return an integer/long result. You have to use a float or double to get a floating point result even if you cast it back to integer values afterwards.\r\n\r\n    long c = (long)(a/(float)b*100);","title":"How to divide two long variables in java","body":"<p>What you are doing right now is integer division. This will always return an integer/long result. You have to use a float or double to get a floating point result even if you cast it back to integer values afterwards.</p>\n\n<pre><code>long c = (long)(a/(float)b*100);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2866514,"reputation":59,"user_id":2460740,"display_name":"whck6"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1404901489,"creation_date":1404901089,"answer_id":24651006,"question_id":24650871,"body_markdown":"try it.\r\n\r\n    long a = 3004230;\r\n    long b =  6793368;\r\n    long c = ((long)((float)a/(float)b)*100); //answer=44\r\n    float c = ((long)((float)a/(float)b)*100); //answer=44.1256378\r\n","title":"How to divide two long variables in java","body":"<p>try it.</p>\n\n<pre><code>long a = 3004230;\nlong b =  6793368;\nlong c = ((long)((float)a/(float)b)*100); //answer=44\nfloat c = ((long)((float)a/(float)b)*100); //answer=44.1256378\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4195313,"reputation":31,"user_id":3436857,"display_name":"sona"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1404901126,"creation_date":1404901126,"answer_id":24651014,"question_id":24650871,"body_markdown":"The long c you are creating isn&#39;t the value you expected. It is in the integer range. To create longs, use\r\n  \r\nfinal long c=  3004230L * 6793368L;\r\nBy adding an L after the number literal, you tell the compiler to compile it as a long instead of an int.","title":"How to divide two long variables in java","body":"<p>The long c you are creating isn't the value you expected. It is in the integer range. To create longs, use</p>\n\n<p>final long c=  3004230L * 6793368L;\nBy adding an L after the number literal, you tell the compiler to compile it as a long instead of an int.</p>\n"},{"tags":[],"owner":{"account_id":2268336,"reputation":10952,"user_id":1996394,"accept_rate":80,"display_name":"rock321987"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1404901128,"creation_date":1404901128,"answer_id":24651015,"question_id":24650871,"body_markdown":"obviously the answer will be `0` for above..as you can see when you divide\r\n\r\n&gt;3004230 / 6793368 = 0.442 = 0(when casted to `long` type)\r\n\r\nand\r\n\r\n&gt; 0 * any number = 0..\r\n\r\nto convert it use this\r\n\r\n    double c = (a * 1.0/b)*100.0;\r\n\r\nyou have to use datatype that can store `decimal` value which is `float` or `double`..`long` cannot store decimal numbers","title":"How to divide two long variables in java","body":"<p>obviously the answer will be <code>0</code> for above..as you can see when you divide</p>\n\n<blockquote>\n  <p>3004230 / 6793368 = 0.442 = 0(when casted to <code>long</code> type)</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>0 * any number = 0..</p>\n</blockquote>\n\n<p>to convert it use this</p>\n\n<pre><code>double c = (a * 1.0/b)*100.0;\n</code></pre>\n\n<p>you have to use datatype that can store <code>decimal</code> value which is <code>float</code> or <code>double</code>..<code>long</code> cannot store decimal numbers</p>\n"},{"tags":[],"owner":{"account_id":72628,"reputation":32475,"user_id":209629,"accept_rate":58,"display_name":"vz0"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1404901215,"creation_date":1404901215,"answer_id":24651040,"question_id":24650871,"body_markdown":"You can do the same without casting to a `float`:\r\n\r\n    long a =  3004230L;\r\n    long b =  6793368L;\r\n    long c = (a * 100L)/b;\r\n\r\n","title":"How to divide two long variables in java","body":"<p>You can do the same without casting to a <code>float</code>:</p>\n\n<pre><code>long a =  3004230L;\nlong b =  6793368L;\nlong c = (a * 100L)/b;\n</code></pre>\n"}],"owner":{"account_id":4666280,"reputation":509,"user_id":3779263,"display_name":"Arulmurugan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105733,"favorite_count":0,"down_vote_count":1,"up_vote_count":50,"closed_date":1404901127,"answer_count":7,"score":49,"last_activity_date":1660225759,"creation_date":1404900703,"question_id":24650871,"body_markdown":"Sorry for the basic question,\r\n I have to divide the long variable by another long variable, but it returns 0.\r\nCan any one help \r\n   \r\n\r\n    long a = 3004230;\r\n    long b =  6793368;\r\n    long c = (a/b)*100;","title":"How to divide two long variables in java","body":"<p>Sorry for the basic question,\n I have to divide the long variable by another long variable, but it returns 0.\nCan any one help </p>\n\n<pre><code>long a = 3004230;\nlong b =  6793368;\nlong c = (a/b)*100;\n</code></pre>\n"},{"tags":["java","classloader"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1660225965,"post_id":73321804,"comment_id":129486724,"body_markdown":"If it is printing `sun.misc.Launcher$AppClassLoader`, then that suggests your class is already on the class-path/module-path (e.g., you included it in a `-cp` argument, it was the main class, etc.). Class loaders, by default, delegate to their parent first, before trying to load the class themselves.","body":"If it is printing <code>sun.misc.Launcher$AppClassLoader</code>, then that suggests your class is already on the class-path/module-path (e.g., you included it in a <code>-cp</code> argument, it was the main class, etc.). Class loaders, by default, delegate to their parent first, before trying to load the class themselves."},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1660227122,"post_id":73321804,"comment_id":129487243,"body_markdown":"which class is the `launch` method in? Maybe `Main`?","body":"which class is the <code>launch</code> method in? Maybe <code>Main</code>?"},{"owner":{"account_id":25946115,"reputation":1,"user_id":19664825,"display_name":"TheOn"},"score":0,"creation_date":1660229196,"post_id":73321804,"comment_id":129488124,"body_markdown":"launch is in the Loader class which calls Main","body":"launch is in the Loader class which calls Main"},{"owner":{"account_id":25946115,"reputation":1,"user_id":19664825,"display_name":"TheOn"},"score":0,"creation_date":1660229426,"post_id":73321804,"comment_id":129488220,"body_markdown":"&quot;Loader&quot; loads class &quot;Main&quot; which is in a .jar file so its added with &quot;-cp&quot;","body":"&quot;Loader&quot; loads class &quot;Main&quot; which is in a .jar file so its added with &quot;-cp&quot;"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1660278603,"post_id":73321804,"comment_id":129499620,"body_markdown":"Then I would guess that&#39;s the problem. The entire JAR file is already visible to `Launcher$AppClassLoader`, and so that&#39;s the loader that will be used to load the classes in that JAR file. You don&#39;t appear to be setting a parent of your custom class loader, and that likely means it&#39;s [being set to the system class loader](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/ClassLoader.html#%3Cinit%3E()). The output you&#39;re seeing is the system class loader.","body":"Then I would guess that&#39;s the problem. The entire JAR file is already visible to <code>Launcher$AppClassLoader</code>, and so that&#39;s the loader that will be used to load the classes in that JAR file. You don&#39;t appear to be setting a parent of your custom class loader, and that likely means it&#39;s <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/ClassLoader.html#%3Cinit%3E()\" rel=\"nofollow noreferrer\">being set to the system class loader</a>. The output you&#39;re seeing is the system class loader."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1660278667,"post_id":73321804,"comment_id":129499627,"body_markdown":"What if you try to set the parent to `null`, if you&#39;re not already doing so?","body":"What if you try to set the parent to <code>null</code>, if you&#39;re not already doing so?"}],"owner":{"account_id":25946115,"reputation":1,"user_id":19664825,"display_name":"TheOn"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":249,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660225608,"creation_date":1660225608,"question_id":73321804,"body_markdown":"    public void launch(String[] args) throws Exception {\r\n\t\tfinal URLClassLoader ucl = (URLClassLoader) getClass().getClassLoader();\r\n        classLoader = new CustomClassLoader(ucl.getURLs());\r\n\t\tThread.currentThread().setContextClassLoader(classLoader);\r\n\t\t\r\n\t\tClass&lt;?&gt; mainClass = Class.forName(&quot;Main&quot;, false, classLoader);\r\n\t\tSystem.out.println(mainClass.getClassLoader().getClass().getName()); //Debug\r\n\t\tMethod mainMethod = mainClass.getDeclaredMethod(&quot;main&quot;, new Class[] {String[].class});\r\n\t\tmainMethod.invoke(null, (Object) args);\r\n\t}\r\n\r\nWhen This Code Is Started the Debug Line Prints &quot;sun.misc.Launcher$AppClassLoader&quot;\r\nHow would I fix this?","title":"Custom Class Loader Not Loading Class","body":"<pre><code>public void launch(String[] args) throws Exception {\n    final URLClassLoader ucl = (URLClassLoader) getClass().getClassLoader();\n    classLoader = new CustomClassLoader(ucl.getURLs());\n    Thread.currentThread().setContextClassLoader(classLoader);\n    \n    Class&lt;?&gt; mainClass = Class.forName(&quot;Main&quot;, false, classLoader);\n    System.out.println(mainClass.getClassLoader().getClass().getName()); //Debug\n    Method mainMethod = mainClass.getDeclaredMethod(&quot;main&quot;, new Class[] {String[].class});\n    mainMethod.invoke(null, (Object) args);\n}\n</code></pre>\n<p>When This Code Is Started the Debug Line Prints &quot;sun.misc.Launcher$AppClassLoader&quot;\nHow would I fix this?</p>\n"},{"tags":["java","mongodb","reactive"],"answers":[{"tags":[],"owner":{"account_id":15492584,"reputation":164,"user_id":11436109,"display_name":"SP193"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1580958208,"creation_date":1580958208,"answer_id":60087112,"question_id":56497746,"body_markdown":"I believe the connectionsPerHost parameter was changed to ConnectionPoolSettings.maxSize, as part of the new MongoDB driver design. Please take this with a pinch of salt, as I have not tested whether it is a perfectly equivalent option.\r\n\r\nThe description for ``threadsAllowedToBlockForConnectionMultiplier`` is as follows, from the MongoDB documentation of [MongoClientSettings.getConnectionPoolSettings][1]() the Async driver:\r\n\r\n&gt; Gets the settings for the connection provider in a settings object. This settings object wraps the values for minConnectionPoolSize, maxConnectionPoolSize, maxWaitTime, maxConnectionIdleTime and maxConnectionLifeTime, and uses maxConnectionPoolSize and threadsAllowedToBlockForConnectionMultiplier to calculate maxWaitQueueSize.\r\n\r\nThis behaviour can be observed in [ConnectionPoolSettings.applyConnectionString][2]():\r\n\r\n```\r\nmaxWaitQueueSize(threadsAllowedToBlockForConnectionMultiplier * maxSize);\r\n```\r\n\r\nThis behaviour appears to be similar, when compared to the description for the original [MongoClientOptions.getThreadsAllowedToBlockForConnectionMultiplier][3]():\r\n&gt; This multiplier, multiplied with the connectionsPerHost setting, gives the maximum number of threads that may be waiting for a connection to become available from the pool. All further threads will get an exception right away. For example if connectionsPerHost is 10 and threadsAllowedToBlockForConnectionMultiplier is 5, then up to 50 threads can wait for a connection.\r\n\r\n  [1]: http://mongodb.github.io/mongo-java-driver/3.9/javadoc/com/mongodb/async/client/MongoClientSettings.html\r\n  [2]: https://github.com/mongodb/mongo-java-driver/blob/3.12.x/driver-core/src/main/com/mongodb/connection/ConnectionPoolSettings.java#L275\r\n  [3]: http://mongodb.github.io/mongo-java-driver/3.4/javadoc/com/mongodb/MongoClientOptions.html#getThreadsAllowedToBlockForConnectionMultiplier--","title":"How to set connections-per-host setting in MongoClientSettings?","body":"<p>I believe the connectionsPerHost parameter was changed to ConnectionPoolSettings.maxSize, as part of the new MongoDB driver design. Please take this with a pinch of salt, as I have not tested whether it is a perfectly equivalent option.</p>\n\n<p>The description for <code>threadsAllowedToBlockForConnectionMultiplier</code> is as follows, from the MongoDB documentation of <a href=\"http://mongodb.github.io/mongo-java-driver/3.9/javadoc/com/mongodb/async/client/MongoClientSettings.html\" rel=\"noreferrer\">MongoClientSettings.getConnectionPoolSettings</a>() the Async driver:</p>\n\n<blockquote>\n  <p>Gets the settings for the connection provider in a settings object. This settings object wraps the values for minConnectionPoolSize, maxConnectionPoolSize, maxWaitTime, maxConnectionIdleTime and maxConnectionLifeTime, and uses maxConnectionPoolSize and threadsAllowedToBlockForConnectionMultiplier to calculate maxWaitQueueSize.</p>\n</blockquote>\n\n<p>This behaviour can be observed in <a href=\"https://github.com/mongodb/mongo-java-driver/blob/3.12.x/driver-core/src/main/com/mongodb/connection/ConnectionPoolSettings.java#L275\" rel=\"noreferrer\">ConnectionPoolSettings.applyConnectionString</a>():</p>\n\n<pre><code>maxWaitQueueSize(threadsAllowedToBlockForConnectionMultiplier * maxSize);\n</code></pre>\n\n<p>This behaviour appears to be similar, when compared to the description for the original <a href=\"http://mongodb.github.io/mongo-java-driver/3.4/javadoc/com/mongodb/MongoClientOptions.html#getThreadsAllowedToBlockForConnectionMultiplier--\" rel=\"noreferrer\">MongoClientOptions.getThreadsAllowedToBlockForConnectionMultiplier</a>():</p>\n\n<blockquote>\n  <p>This multiplier, multiplied with the connectionsPerHost setting, gives the maximum number of threads that may be waiting for a connection to become available from the pool. All further threads will get an exception right away. For example if connectionsPerHost is 10 and threadsAllowedToBlockForConnectionMultiplier is 5, then up to 50 threads can wait for a connection.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":4890986,"reputation":1123,"user_id":3942132,"display_name":"Roie Beck"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1641116869,"creation_date":1641116473,"answer_id":70554960,"question_id":56497746,"body_markdown":"Update, in 4.4.X ```maxWaitQueueSize``` is gone(it is also marked as ```@deprecated``` in 3.12.X),\r\nI think  ```maxConnecting``` had replaced it,\r\nso if you are still using the ```maxWaitQueueSize``` using old logic, the ``` maxConnecting``` value should be as in the previous answer \r\n```\r\nmaxConnecting = maxWaitQueueSize(threadsAllowedToBlockForConnectionMultiplier * maxSize);\r\n```","title":"How to set connections-per-host setting in MongoClientSettings?","body":"<p>Update, in 4.4.X <code>maxWaitQueueSize</code> is gone(it is also marked as <code>@deprecated</code> in 3.12.X),\nI think  <code>maxConnecting</code> had replaced it,\nso if you are still using the <code>maxWaitQueueSize</code> using old logic, the <code> maxConnecting</code> value should be as in the previous answer</p>\n<pre><code>maxConnecting = maxWaitQueueSize(threadsAllowedToBlockForConnectionMultiplier * maxSize);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1348740,"reputation":45,"user_id":1288969,"display_name":"prototype-closure"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660225367,"creation_date":1660225367,"answer_id":73321747,"question_id":56497746,"body_markdown":"Responding to @Sp193. Following\r\n\r\n&gt; threadsAllowedToBlockForConnectionMultiplier \r\n\r\nactually covered here [ConnectionString Javadoc][1]\r\n\r\n - maxPoolSize=n: The maximum number of connections in the connection\r\n   pool. \r\n - waitQueueMultiple=n : this multiplier, multiplied with the\r\n   maxPoolSize setting, gives the maximum number of threads that may be\r\n   waiting for a connection to become available from the pool. All\r\n   further threads will get an exception right away.\r\n - waitQueueTimeoutMS=ms: The maximum wait time in milliseconds that a\r\n   thread may wait for a connection to become available.\r\n\r\n\r\n  [1]: https://mongodb.github.io/mongo-java-driver/3.8/javadoc/com/mongodb/ConnectionString.html#getMaxConnectionPoolSize","title":"How to set connections-per-host setting in MongoClientSettings?","body":"<p>Responding to @Sp193. Following</p>\n<blockquote>\n<p>threadsAllowedToBlockForConnectionMultiplier</p>\n</blockquote>\n<p>actually covered here <a href=\"https://mongodb.github.io/mongo-java-driver/3.8/javadoc/com/mongodb/ConnectionString.html#getMaxConnectionPoolSize\" rel=\"nofollow noreferrer\">ConnectionString Javadoc</a></p>\n<ul>\n<li>maxPoolSize=n: The maximum number of connections in the connection\npool.</li>\n<li>waitQueueMultiple=n : this multiplier, multiplied with the\nmaxPoolSize setting, gives the maximum number of threads that may be\nwaiting for a connection to become available from the pool. All\nfurther threads will get an exception right away.</li>\n<li>waitQueueTimeoutMS=ms: The maximum wait time in milliseconds that a\nthread may wait for a connection to become available.</li>\n</ul>\n"}],"owner":{"account_id":231590,"reputation":322,"user_id":495907,"display_name":"alper"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2958,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":60087112,"answer_count":3,"score":7,"last_activity_date":1660225367,"creation_date":1559923055,"question_id":56497746,"body_markdown":"Blocking MongoDB driver has [`MongoClientOptions`](https://mongodb.github.io/mongo-java-driver/3.4/javadoc/com/mongodb/MongoClientOptions.html), which contains client settings.  \r\nReactive driver&#39;s [`MongoClients.create()`](http://mongodb.github.io/mongo-java-driver-reactivestreams/1.9/javadoc/com/mongodb/reactivestreams/client/MongoClients.html#create-com.mongodb.MongoClientSettings-) expects [`MongoClientSettings`](http://mongodb.github.io/mongo-java-driver/3.8/javadoc/com/mongodb/MongoClientSettings.html?is-external=true) as parameter.  \r\nMost settings from `MongoClientOptions` have their equivalent in `MongoClientSettings`.  \r\n\r\nBut I can&#39;t find `connectionsPerHost` alternative in `MongoClientSettings`.  \r\nAm I missing something?  ","title":"How to set connections-per-host setting in MongoClientSettings?","body":"<p>Blocking MongoDB driver has <a href=\"https://mongodb.github.io/mongo-java-driver/3.4/javadoc/com/mongodb/MongoClientOptions.html\" rel=\"noreferrer\"><code>MongoClientOptions</code></a>, which contains client settings.<br>\nReactive driver's <a href=\"http://mongodb.github.io/mongo-java-driver-reactivestreams/1.9/javadoc/com/mongodb/reactivestreams/client/MongoClients.html#create-com.mongodb.MongoClientSettings-\" rel=\"noreferrer\"><code>MongoClients.create()</code></a> expects <a href=\"http://mongodb.github.io/mongo-java-driver/3.8/javadoc/com/mongodb/MongoClientSettings.html?is-external=true\" rel=\"noreferrer\"><code>MongoClientSettings</code></a> as parameter.<br>\nMost settings from <code>MongoClientOptions</code> have their equivalent in <code>MongoClientSettings</code>.  </p>\n\n<p>But I can't find <code>connectionsPerHost</code> alternative in <code>MongoClientSettings</code>.<br>\nAm I missing something?  </p>\n"},{"tags":["java","database","spring-boot","transactions","jooq"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1660230029,"post_id":73321652,"comment_id":129488457,"body_markdown":"you need to create single `DataSourceConnectionProvider` on top of `TransactionRoutingDataSource`, and single `DefaultConfiguration` on top of `DataSourceConnectionProvider`","body":"you need to create single <code>DataSourceConnectionProvider</code> on top of <code>TransactionRoutingDataSource</code>, and single <code>DefaultConfiguration</code> on top of <code>DataSourceConnectionProvider</code>"}],"owner":{"account_id":26038409,"reputation":21,"user_id":19743578,"display_name":"Sujit"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":466,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1660224999,"creation_date":1660224999,"question_id":73321652,"body_markdown":"We use Spring and jOOQ and at present read/write from primary DB. We do have replica DB&#39;s and are trying to have non critical reads (like from quartz jobs, pure read api&#39;s, etc.) to go to read.\r\n\r\nI referred to https://vladmihalcea.com/read-write-read-only-transaction-routing-spring/ and understand that we need a transactional routing layer introduced which would point one way or the other depending on \r\n```\r\n\r\n    @Transactional (readonly = true) \r\n\r\n```\r\n\r\n\r\nHowever, this doesn&#39;t seem to be working in our case, wherein all routing seems to be happening to primary db itself. \r\n\r\nHere&#39;s the code configurations we use for primary\r\n\r\n```\r\n\r\n@Bean(name = &quot;primaryTransactionAwareDataSourceProxy&quot;)\r\n  public TransactionAwareDataSourceProxy primaryTransactionAwareDataSource(\r\n      @Qualifier(&quot;primaryDataSource&quot;) DataSource primaryDataSource) {\r\n    return new TransactionAwareDataSourceProxy(primaryDataSource);\r\n  }\r\n\r\n  @Bean(name = &quot;xyz&quot;)\r\n  public DataSourceConnectionProvider primaryConnectionProvider(\r\n      @Qualifier(&quot;primaryTransactionAwareDataSourceProxy&quot;) TransactionAwareDataSourceProxy datasource) {\r\n    return new DataSourceConnectionProvider(datasource);\r\n  }\r\n\r\n  @Bean(name = &quot;primaryDsl&quot;)\r\n  @Primary\r\n  public DefaultDSLContext primaryDsl(\r\n      @Qualifier(&quot;primaryConfiguration&quot;) DefaultConfiguration configuration) {\r\n    return new DefaultDSLContext(configuration);\r\n  }\r\n\r\n  @Bean(name = &quot;primaryConfiguration&quot;)\r\n  public DefaultConfiguration primaryConfiguration(\r\n      @Qualifier(&quot;primaryDatabaseProperties&quot;) DatabaseProperties props,\r\n      @Qualifier(&quot;xyz&quot;) DataSourceConnectionProvider provider) {\r\n    DefaultConfiguration jooqConfiguration = new DefaultConfiguration();\r\n    jooqConfiguration.set(provider);\r\n    jooqConfiguration.set(SQLDialect.MYSQL);\r\n    Settings settings = new Settings()\r\n        .withRenderMapping(new RenderMapping()\r\n            .withSchemata(new MappedSchema()\r\n                .withInput(&lt;name&gt;)\r\n                .withOutput(props.getName())));\r\n\r\n    jooqConfiguration.set(settings);\r\n    return jooqConfiguration;\r\n  }\r\n\r\n```\r\n\r\nand for replica we have along similar lines \r\n```\r\n@Bean(name = &quot;replicaTransactionAwareDataSourceProxy&quot;)\r\n  public TransactionAwareDataSourceProxy replicaTransactionAwareDataSource(\r\n      @Qualifier(&quot;replicaDataSource&quot;) DataSource replicaDataSource) {\r\n    return new TransactionAwareDataSourceProxy(replicaDataSource);\r\n  }\r\n\r\n  @Bean(name = &quot;xyz&quot;)\r\n  public DataSourceConnectionProvider replicaConnectionProvider(\r\n      @Qualifier(&quot;replicaTransactionAwareDataSourceProxy&quot;) TransactionAwareDataSourceProxy datasource) {\r\n    return new DataSourceConnectionProvider(datasource);\r\n  }\r\n\r\n  @Bean(name = &quot;replicaDsl&quot;)\r\n  public DefaultDSLContext replicaDsl(\r\n      @Qualifier(&quot;replicaConfiguration&quot;) DefaultConfiguration configuration) {\r\n    return new DefaultDSLContext(configuration);\r\n  }\r\n\r\n  @Bean(name = &quot;replicaConfiguration&quot;)\r\n  public DefaultConfiguration replicaConfiguration(\r\n      @Qualifier(&quot;replicaDatabaseProperties&quot;) DatabaseProperties props,\r\n      @Qualifier(&quot;xyz&quot;) DataSourceConnectionProvider provider) {\r\n    DefaultConfiguration jooqConfiguration = new DefaultConfiguration();\r\n    jooqConfiguration.set(provider);\r\n    jooqConfiguration.set(SQLDialect.MYSQL);\r\n    Settings settings = new Settings()\r\n        .withRenderMapping(new RenderMapping()\r\n            .withSchemata(new MappedSchema()\r\n                .withInput(&lt;name&gt;)\r\n                .withOutput(props.getName())));\r\n\r\n    jooqConfiguration.set(settings);\r\n    return jooqConfiguration;\r\n  }\r\n\r\n```\r\n\r\nThe data sources are configured as \r\n```\r\n\r\n  @Bean(name = &quot;primaryDatabaseProperties&quot;)\r\n  @ConfigurationProperties(prefix = &quot;database&quot;)\r\n  public DatabaseProperties primaryDatabaseProperties() {\r\n    return new DatabaseProperties ();\r\n  }\r\n\r\n  @Bean(name = &quot;replicaDatabaseProperties&quot;)\r\n  @ConfigurationProperties(prefix = &quot;database.replica&quot;)\r\n  public DatabaseProperties replicaDatabaseProperties() {\r\n    return new DatabaseProperties ();\r\n  }\r\n\r\n  @Bean(name = &quot;primaryDataSource&quot;)\r\n  public DataSource primaryDataSource(\r\n      @Qualifier(&quot;primaryDatabaseProperties&quot;) DatabaseProperties props) {\r\n    return dataSource(props);\r\n  }\r\n\r\n  @Bean(name = &quot;replicaDataSource&quot;)\r\n  public DataSource replicaDataSource(\r\n      @Qualifier(&quot;replicaDatabaseProperties&quot;) DatabaseProperties props) {\r\n    return dataSource(props);\r\n  }\r\n\r\n```\r\n\r\nAnd transactional routing data source defined as \r\n```\r\n  @Bean\r\n  public TransactionRoutingDataSource actualDataSource(\r\n      @Qualifier(&quot;primaryTransactionAwareDataSourceProxy&quot;) DataSource primaryDataSource,\r\n      @Qualifier(&quot;replicaTransactionAwareDataSourceProxy&quot;) DataSource replicaDataSource) {\r\n    TransactionRoutingDataSource routingDataSource = new TransactionRoutingDataSource();\r\n\r\n    Map&lt;Object, Object&gt; dataSourceMap = new HashMap&lt;&gt;() {{\r\n      put(DataSourceType.READ_WRITE, primaryDataSource);\r\n      put(DataSourceType.READ_ONLY, replicaDataSource);\r\n    }};\r\n\r\n    routingDataSource.setTargetDataSources(dataSourceMap);\r\n    return routingDataSource;\r\n  }\r\n```\r\n\r\nI have an implementation of AbstractRoutingDataSource defined to do the conditional check of if the current transaction is ready only and route to correct datasource accordingly\r\n```\r\npublic class TransactionRoutingDataSource extends AbstractRoutingDataSource {\r\n\r\n  @Nullable\r\n  @Override\r\n  protected Object determineCurrentLookupKey() {\r\n    return TransactionSynchronizationManager.isCurrentTransactionReadOnly() ?\r\n        DataSourceType.READ_ONLY : DataSourceType.READ_WRITE;\r\n  }\r\n}\r\n```\r\n\r\nAnd I use annotations to indicate the necessary routing in the service layer\r\n```\r\n @Override\r\n    @Transactional(readOnly = true)\r\n    public &lt;return_type&gt; &lt;method_name&gt;() {}\r\n```\r\n\r\nAny pointers as to what I am missing to have jOOQ route correctly to read db?","title":"Spring + jOOQ - transactional routing to read and write db&#39;s","body":"<p>We use Spring and jOOQ and at present read/write from primary DB. We do have replica DB's and are trying to have non critical reads (like from quartz jobs, pure read api's, etc.) to go to read.</p>\n<p>I referred to <a href=\"https://vladmihalcea.com/read-write-read-only-transaction-routing-spring/\" rel=\"nofollow noreferrer\">https://vladmihalcea.com/read-write-read-only-transaction-routing-spring/</a> and understand that we need a transactional routing layer introduced which would point one way or the other depending on</p>\n<pre><code>\n    @Transactional (readonly = true) \n\n</code></pre>\n<p>However, this doesn't seem to be working in our case, wherein all routing seems to be happening to primary db itself.</p>\n<p>Here's the code configurations we use for primary</p>\n<pre><code>\n@Bean(name = &quot;primaryTransactionAwareDataSourceProxy&quot;)\n  public TransactionAwareDataSourceProxy primaryTransactionAwareDataSource(\n      @Qualifier(&quot;primaryDataSource&quot;) DataSource primaryDataSource) {\n    return new TransactionAwareDataSourceProxy(primaryDataSource);\n  }\n\n  @Bean(name = &quot;xyz&quot;)\n  public DataSourceConnectionProvider primaryConnectionProvider(\n      @Qualifier(&quot;primaryTransactionAwareDataSourceProxy&quot;) TransactionAwareDataSourceProxy datasource) {\n    return new DataSourceConnectionProvider(datasource);\n  }\n\n  @Bean(name = &quot;primaryDsl&quot;)\n  @Primary\n  public DefaultDSLContext primaryDsl(\n      @Qualifier(&quot;primaryConfiguration&quot;) DefaultConfiguration configuration) {\n    return new DefaultDSLContext(configuration);\n  }\n\n  @Bean(name = &quot;primaryConfiguration&quot;)\n  public DefaultConfiguration primaryConfiguration(\n      @Qualifier(&quot;primaryDatabaseProperties&quot;) DatabaseProperties props,\n      @Qualifier(&quot;xyz&quot;) DataSourceConnectionProvider provider) {\n    DefaultConfiguration jooqConfiguration = new DefaultConfiguration();\n    jooqConfiguration.set(provider);\n    jooqConfiguration.set(SQLDialect.MYSQL);\n    Settings settings = new Settings()\n        .withRenderMapping(new RenderMapping()\n            .withSchemata(new MappedSchema()\n                .withInput(&lt;name&gt;)\n                .withOutput(props.getName())));\n\n    jooqConfiguration.set(settings);\n    return jooqConfiguration;\n  }\n\n</code></pre>\n<p>and for replica we have along similar lines</p>\n<pre><code>@Bean(name = &quot;replicaTransactionAwareDataSourceProxy&quot;)\n  public TransactionAwareDataSourceProxy replicaTransactionAwareDataSource(\n      @Qualifier(&quot;replicaDataSource&quot;) DataSource replicaDataSource) {\n    return new TransactionAwareDataSourceProxy(replicaDataSource);\n  }\n\n  @Bean(name = &quot;xyz&quot;)\n  public DataSourceConnectionProvider replicaConnectionProvider(\n      @Qualifier(&quot;replicaTransactionAwareDataSourceProxy&quot;) TransactionAwareDataSourceProxy datasource) {\n    return new DataSourceConnectionProvider(datasource);\n  }\n\n  @Bean(name = &quot;replicaDsl&quot;)\n  public DefaultDSLContext replicaDsl(\n      @Qualifier(&quot;replicaConfiguration&quot;) DefaultConfiguration configuration) {\n    return new DefaultDSLContext(configuration);\n  }\n\n  @Bean(name = &quot;replicaConfiguration&quot;)\n  public DefaultConfiguration replicaConfiguration(\n      @Qualifier(&quot;replicaDatabaseProperties&quot;) DatabaseProperties props,\n      @Qualifier(&quot;xyz&quot;) DataSourceConnectionProvider provider) {\n    DefaultConfiguration jooqConfiguration = new DefaultConfiguration();\n    jooqConfiguration.set(provider);\n    jooqConfiguration.set(SQLDialect.MYSQL);\n    Settings settings = new Settings()\n        .withRenderMapping(new RenderMapping()\n            .withSchemata(new MappedSchema()\n                .withInput(&lt;name&gt;)\n                .withOutput(props.getName())));\n\n    jooqConfiguration.set(settings);\n    return jooqConfiguration;\n  }\n\n</code></pre>\n<p>The data sources are configured as</p>\n<pre><code>\n  @Bean(name = &quot;primaryDatabaseProperties&quot;)\n  @ConfigurationProperties(prefix = &quot;database&quot;)\n  public DatabaseProperties primaryDatabaseProperties() {\n    return new DatabaseProperties ();\n  }\n\n  @Bean(name = &quot;replicaDatabaseProperties&quot;)\n  @ConfigurationProperties(prefix = &quot;database.replica&quot;)\n  public DatabaseProperties replicaDatabaseProperties() {\n    return new DatabaseProperties ();\n  }\n\n  @Bean(name = &quot;primaryDataSource&quot;)\n  public DataSource primaryDataSource(\n      @Qualifier(&quot;primaryDatabaseProperties&quot;) DatabaseProperties props) {\n    return dataSource(props);\n  }\n\n  @Bean(name = &quot;replicaDataSource&quot;)\n  public DataSource replicaDataSource(\n      @Qualifier(&quot;replicaDatabaseProperties&quot;) DatabaseProperties props) {\n    return dataSource(props);\n  }\n\n</code></pre>\n<p>And transactional routing data source defined as</p>\n<pre><code>  @Bean\n  public TransactionRoutingDataSource actualDataSource(\n      @Qualifier(&quot;primaryTransactionAwareDataSourceProxy&quot;) DataSource primaryDataSource,\n      @Qualifier(&quot;replicaTransactionAwareDataSourceProxy&quot;) DataSource replicaDataSource) {\n    TransactionRoutingDataSource routingDataSource = new TransactionRoutingDataSource();\n\n    Map&lt;Object, Object&gt; dataSourceMap = new HashMap&lt;&gt;() {{\n      put(DataSourceType.READ_WRITE, primaryDataSource);\n      put(DataSourceType.READ_ONLY, replicaDataSource);\n    }};\n\n    routingDataSource.setTargetDataSources(dataSourceMap);\n    return routingDataSource;\n  }\n</code></pre>\n<p>I have an implementation of AbstractRoutingDataSource defined to do the conditional check of if the current transaction is ready only and route to correct datasource accordingly</p>\n<pre><code>public class TransactionRoutingDataSource extends AbstractRoutingDataSource {\n\n  @Nullable\n  @Override\n  protected Object determineCurrentLookupKey() {\n    return TransactionSynchronizationManager.isCurrentTransactionReadOnly() ?\n        DataSourceType.READ_ONLY : DataSourceType.READ_WRITE;\n  }\n}\n</code></pre>\n<p>And I use annotations to indicate the necessary routing in the service layer</p>\n<pre><code> @Override\n    @Transactional(readOnly = true)\n    public &lt;return_type&gt; &lt;method_name&gt;() {}\n</code></pre>\n<p>Any pointers as to what I am missing to have jOOQ route correctly to read db?</p>\n"},{"tags":["java","amazon-web-services","amazon-s3","aws-sdk"],"comments":[{"owner":{"account_id":100740,"reputation":73217,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":2,"creation_date":1660230022,"post_id":73321623,"comment_id":129488452,"body_markdown":"Not that I&#39;m aware of. You&#39;d have to implement the same high-level feature that the awscli implements. Also see: https://stackoverflow.com/questions/42442259/delete-a-folder-and-its-content-aws-s3-java","body":"Not that I&#39;m aware of. You&#39;d have to implement the same high-level feature that the awscli implements. Also see: <a href=\"https://stackoverflow.com/questions/42442259/delete-a-folder-and-its-content-aws-s3-java\" title=\"delete a folder and its content aws s3 java\">stackoverflow.com/questions/42442259/&hellip;</a>"},{"owner":{"account_id":1531501,"reputation":487,"user_id":1428596,"accept_rate":100,"display_name":"DoNuT"},"score":1,"creation_date":1660645094,"post_id":73321623,"comment_id":129575338,"body_markdown":"@jarmod: Thanks, I just ran the CLI operation with `--debug` option and it really seems that it&#39;s actually running listObjects, then applies filters locally and delete calls, so no more efficient than code sample above.","body":"@jarmod: Thanks, I just ran the CLI operation with <code>--debug</code> option and it really seems that it&#39;s actually running listObjects, then applies filters locally and delete calls, so no more efficient than code sample above."}],"owner":{"account_id":1531501,"reputation":487,"user_id":1428596,"accept_rate":100,"display_name":"DoNuT"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1662453277,"answer_count":0,"score":0,"last_activity_date":1660224862,"creation_date":1660224862,"question_id":73321623,"body_markdown":"Is there any way to do a bulk delete in the v1 AWS SDK that does the same as this CLI call?\r\n\r\n```\r\n$ aws s3 rm s3://my-bucket --dryrun --recursive --exclude &quot;*&quot; --include &quot;PREFIX_0/*&quot;\r\n(dryrun) delete: s3://my-bucket/PREFIX_0/file_0.txt\r\n(dryrun) delete: s3://my-bucket/PREFIX_0/file_1.txt\r\n(dryrun) delete: s3://my-bucket/PREFIX_0/file_2.txt\r\n(dryrun) delete: s3://my-bucket/PREFIX_0/file_3.txt\r\n```\r\n\r\nThe SDK only offers *deleteObjects* which requires a list of keys (not prefixes), so it must be used in conjunction with *listObjects* \r\n\r\n```\r\nprivate static void deleteObjects(AmazonS3 client, String bucketName, List&lt;String&gt; objects) {\r\n    DeleteObjectsRequest request = new DeleteObjectsRequest(bucketName);\r\n    request.withKeys(objects.toArray(new String[]{}));\r\n     client.deleteObjects(request);\r\n}\r\n```\r\n\r\n*[listObjects][1]* is limited to 1000 keys per result, so you&#39;d have to iterate and use markers as a kind of &quot;pagination&quot;. Also not sure how well deleteObjects with a high number of keys performs.\r\n\r\n```\r\nprivate static List&lt;String&gt; listObjects(AmazonS3 client, String bucketName, Optional&lt;String&gt; prefix) {\r\n\tboolean checkForObjects = true;\r\n\r\n\tList&lt;String&gt; objectResultList = new ArrayList&lt;&gt;();\r\n\tListObjectsRequest listRequest = new ListObjectsRequest();\r\n\r\n\twhile (checkForObjects){\r\n\t\t// check for objects with a given prefix\r\n\t\tlistRequest.withBucketName(bucketName);\r\n\t\tprefix.ifPresent(listRequest::withPrefix);\r\n\t\tObjectListing objects = client.listObjects(listRequest);\r\n\t\t// only do another run if result was truncated\r\n\t\tcheckForObjects = objects.isTruncated();\r\n\r\n\t\t// use next marker to get next set of results\r\n\t\tlistRequest.setMarker(objects.getNextMarker());\r\n\r\n\t\tList&lt;String&gt; objectList = objects.getObjectSummaries()\r\n\t\t\t\t.stream()\r\n\t\t\t\t.map(S3ObjectSummary::getKey)\r\n\t\t\t\t.collect(Collectors.toList());\r\n\r\n\t\tobjectResultList.addAll(objectList);\r\n\t}\r\n\r\n\treturn objectResultList;\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/AmazonS3/latest/API/API_ListObjects.html","title":"AWS S3 - Bulk deletion via Java SDK v1","body":"<p>Is there any way to do a bulk delete in the v1 AWS SDK that does the same as this CLI call?</p>\n<pre><code>$ aws s3 rm s3://my-bucket --dryrun --recursive --exclude &quot;*&quot; --include &quot;PREFIX_0/*&quot;\n(dryrun) delete: s3://my-bucket/PREFIX_0/file_0.txt\n(dryrun) delete: s3://my-bucket/PREFIX_0/file_1.txt\n(dryrun) delete: s3://my-bucket/PREFIX_0/file_2.txt\n(dryrun) delete: s3://my-bucket/PREFIX_0/file_3.txt\n</code></pre>\n<p>The SDK only offers <em>deleteObjects</em> which requires a list of keys (not prefixes), so it must be used in conjunction with <em>listObjects</em></p>\n<pre><code>private static void deleteObjects(AmazonS3 client, String bucketName, List&lt;String&gt; objects) {\n    DeleteObjectsRequest request = new DeleteObjectsRequest(bucketName);\n    request.withKeys(objects.toArray(new String[]{}));\n     client.deleteObjects(request);\n}\n</code></pre>\n<p><em><a href=\"https://docs.aws.amazon.com/AmazonS3/latest/API/API_ListObjects.html\" rel=\"nofollow noreferrer\">listObjects</a></em> is limited to 1000 keys per result, so you'd have to iterate and use markers as a kind of &quot;pagination&quot;. Also not sure how well deleteObjects with a high number of keys performs.</p>\n<pre><code>private static List&lt;String&gt; listObjects(AmazonS3 client, String bucketName, Optional&lt;String&gt; prefix) {\n    boolean checkForObjects = true;\n\n    List&lt;String&gt; objectResultList = new ArrayList&lt;&gt;();\n    ListObjectsRequest listRequest = new ListObjectsRequest();\n\n    while (checkForObjects){\n        // check for objects with a given prefix\n        listRequest.withBucketName(bucketName);\n        prefix.ifPresent(listRequest::withPrefix);\n        ObjectListing objects = client.listObjects(listRequest);\n        // only do another run if result was truncated\n        checkForObjects = objects.isTruncated();\n\n        // use next marker to get next set of results\n        listRequest.setMarker(objects.getNextMarker());\n\n        List&lt;String&gt; objectList = objects.getObjectSummaries()\n                .stream()\n                .map(S3ObjectSummary::getKey)\n                .collect(Collectors.toList());\n\n        objectResultList.addAll(objectList);\n    }\n\n    return objectResultList;\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1895953,"reputation":2981,"user_id":1712934,"accept_rate":54,"display_name":"jakub.petr"},"score":0,"creation_date":1435345062,"post_id":31080272,"comment_id":50179130,"body_markdown":"Which List implementation are you using? I assume LinkedList because ArrayList has O(1) for get...","body":"Which List implementation are you using? I assume LinkedList because ArrayList has O(1) for get..."}],"answers":[{"tags":[],"owner":{"account_id":1888343,"reputation":176607,"user_id":1707091,"display_name":"rgettman"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1435345557,"creation_date":1435345148,"answer_id":31080335,"question_id":31080272,"body_markdown":"Maintain a variable `previous` that is equal to the previous loop&#39;s `current` value.\r\n\r\n    T previous = null;\r\n    // If it makes sense to skip the first &quot;null, first element&quot; pair...\r\n    if (it.hasNext())\r\n    {\r\n        previous = it.next();\r\n    }    \r\n\r\n    while (it.hasNext())\r\n    {\r\n        T current = it.next();\r\n        // Process previous and current here.\r\n\r\n        // End of loop, after processing.  Maintain previous reference.\r\n        previous = current;\r\n    }\r\n\r\nThis will be O(n) because you are using the `Iterator` over your entire linked list.","title":"Java iterator get next without incrementing","body":"<p>Maintain a variable <code>previous</code> that is equal to the previous loop's <code>current</code> value.</p>\n\n<pre><code>T previous = null;\n// If it makes sense to skip the first \"null, first element\" pair...\nif (it.hasNext())\n{\n    previous = it.next();\n}    \n\nwhile (it.hasNext())\n{\n    T current = it.next();\n    // Process previous and current here.\n\n    // End of loop, after processing.  Maintain previous reference.\n    previous = current;\n}\n</code></pre>\n\n<p>This will be O(n) because you are using the <code>Iterator</code> over your entire linked list.</p>\n"},{"tags":[],"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1435345379,"creation_date":1435345379,"answer_id":31080406,"question_id":31080272,"body_markdown":"In each iteration, you should keep around a variable that will be the &quot;current&quot; and one that will be the &quot;next&quot;. And you start processing your information starting from the *second* iteration, when you already have a `current` saved from the previous round.\r\n\r\n    T current = null;\r\n    T next = null;\r\n    Iterator&lt;T&gt; iter = r.iterator();\r\n\r\n    while ( iter.hasNext() ) {\r\n        \r\n        next = iter.next();\r\n        if ( current != null ) { // Passed the first iteration\r\n\r\n            // Now you can use current and next, they both have values.\r\n\r\n        }\r\n        current = next; // Save what was the &quot;next&quot; as the next &quot;current&quot;.\r\n    }\r\n\r\nIt&#39;s best to make sure that the list itself doesn&#39;t have null values. If it does, and it&#39;s a valid value, then you should have a boolean flag instead of just checking whether `current != null`.\r\n","title":"Java iterator get next without incrementing","body":"<p>In each iteration, you should keep around a variable that will be the \"current\" and one that will be the \"next\". And you start processing your information starting from the <em>second</em> iteration, when you already have a <code>current</code> saved from the previous round.</p>\n\n<pre><code>T current = null;\nT next = null;\nIterator&lt;T&gt; iter = r.iterator();\n\nwhile ( iter.hasNext() ) {\n\n    next = iter.next();\n    if ( current != null ) { // Passed the first iteration\n\n        // Now you can use current and next, they both have values.\n\n    }\n    current = next; // Save what was the \"next\" as the next \"current\".\n}\n</code></pre>\n\n<p>It's best to make sure that the list itself doesn't have null values. If it does, and it's a valid value, then you should have a boolean flag instead of just checking whether <code>current != null</code>.</p>\n"},{"tags":[],"owner":{"account_id":6411938,"reputation":4104,"user_id":4971422,"display_name":"FredK"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1435345564,"creation_date":1435345564,"answer_id":31080438,"question_id":31080272,"body_markdown":"\r\n\r\n    T current = r.get(0);\r\n    for ( int i=0; i &lt; r.size()-1; i++ ) {\r\n       T next = r.get(i+1);\r\n         // do stuiff here\r\n       current = next;\r\n    }","title":"Java iterator get next without incrementing","body":"<pre><code>T current = r.get(0);\nfor ( int i=0; i &lt; r.size()-1; i++ ) {\n   T next = r.get(i+1);\n     // do stuiff here\n   current = next;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24390162,"reputation":11,"user_id":18320250,"display_name":"Chengen Zhao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660224851,"creation_date":1660223412,"answer_id":73321238,"question_id":31080272,"body_markdown":"Would be nice to use ArrayQueue if you don&#39;t mind the space complexity\r\n\r\n```java\r\n      var queue = new ArrayDeque&lt;&gt;(list);\r\n      while (!queue.isEmpty()) {\r\n        var first = reversed ? queue.pollLast() : queue.pollFirst();\r\n        if (!queue.isEmpty()) {\r\n          var second = reversed ? queue.getLast() : queue.getFirst();\r\n          //your code goes here\r\n        }\r\n      }\r\n//or\r\n    while (!queue.isEmpty()) {\r\n        var first = reversed ? queue.removeLast() : queue.removeFirst();\r\n        var second = reversed ? queue.peekLast() : queue.peekFirst();\r\n        if (second!=null) {\r\n          //your code goes here\r\n        }\r\n      }\r\n```","title":"Java iterator get next without incrementing","body":"<p>Would be nice to use ArrayQueue if you don't mind the space complexity</p>\n<pre class=\"lang-java prettyprint-override\"><code>      var queue = new ArrayDeque&lt;&gt;(list);\n      while (!queue.isEmpty()) {\n        var first = reversed ? queue.pollLast() : queue.pollFirst();\n        if (!queue.isEmpty()) {\n          var second = reversed ? queue.getLast() : queue.getFirst();\n          //your code goes here\n        }\n      }\n//or\n    while (!queue.isEmpty()) {\n        var first = reversed ? queue.removeLast() : queue.removeFirst();\n        var second = reversed ? queue.peekLast() : queue.peekFirst();\n        if (second!=null) {\n          //your code goes here\n        }\n      }\n</code></pre>\n"}],"owner":{"account_id":1772922,"reputation":3834,"user_id":1617352,"accept_rate":55,"display_name":"Dzung Nguyen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30897,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":31080335,"answer_count":4,"score":9,"last_activity_date":1660224851,"creation_date":1435344886,"question_id":31080272,"body_markdown":"I am writing the following loop in Java, for each loop I want to access the current and the next element of linked list r:\r\n        \r\n        List&lt;T&gt; r = new LinkedList();\r\n\r\n\t\tfor (int i=0; i &lt; r.size() - 1; i++) {\r\n\t\t\tT current = r.get(i);\r\n\t\t\tT next = r.get(i+1);\r\n        }\r\n\r\nThis might be wasting as everytime I call get(i), it start from the beginning so the run time order of the code is O(n^2). How do I achieve the same using Iterator (this time it will be O(n))? This is my first attempt:\r\n\r\n    while(it.hasNext()) {\r\n        T current = it;\r\n        T next = it.next();\r\n    }","title":"Java iterator get next without incrementing","body":"<p>I am writing the following loop in Java, for each loop I want to access the current and the next element of linked list r:</p>\n\n<pre><code>    List&lt;T&gt; r = new LinkedList();\n\n    for (int i=0; i &lt; r.size() - 1; i++) {\n        T current = r.get(i);\n        T next = r.get(i+1);\n    }\n</code></pre>\n\n<p>This might be wasting as everytime I call get(i), it start from the beginning so the run time order of the code is O(n^2). How do I achieve the same using Iterator (this time it will be O(n))? This is my first attempt:</p>\n\n<pre><code>while(it.hasNext()) {\n    T current = it;\n    T next = it.next();\n}\n</code></pre>\n"},{"tags":["javascript","java","vaadin","vaadin23"],"answers":[{"tags":[],"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1660111688,"creation_date":1660111688,"answer_id":73301399,"question_id":73298142,"body_markdown":"Your imports should be\r\n\r\n    @CssImport(&quot;./css/info_popup.css&quot;)\r\n    @JsModule(&quot;./js/script.js&quot;)","title":"Vaadin 23 JavaScript import issue","body":"<p>Your imports should be</p>\n<pre><code>@CssImport(&quot;./css/info_popup.css&quot;)\n@JsModule(&quot;./js/script.js&quot;)\n</code></pre>\n"}],"owner":{"account_id":21837180,"reputation":74,"user_id":16131265,"display_name":"Achille004"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":330,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":73301399,"answer_count":1,"score":3,"last_activity_date":1660224715,"creation_date":1660079500,"question_id":73298142,"body_markdown":"I have java class which extends the Vaadin Div class, which should be a cookie warning  popup (implementation is not yet complete): \r\n\r\n```java\r\n//imports\r\n\r\n@CssImport(&quot;css/info_popup.css&quot;)\r\n@JsModule(&quot;js/script.js&quot;)\r\n@Tag(&quot;info_popup&quot;)\r\npublic class CookiesDiv extends Div {\r\n\r\n    public CookiesDiv() {\r\n        this.setId(&quot;info_popup&quot;);\r\n\r\n        Span span = new Span(&quot;By continuing to this site, you accept the EULA and the cookies. &quot;);\r\n        span.add(new Anchor(&quot;./info&quot;, &quot;Learn more&quot;));\r\n        this.add(span);\r\n\r\n        this.add(new Button(&quot;GOT IT&quot;, event -&gt; {\r\n            Page page = UI.getCurrent().getPage();\r\n            this.getId().ifPresent(id -&gt; page.executeJs(&quot;fadeOut(&#39;&quot; + id + &quot;&#39;)&quot;));\r\n        }));\r\n    }\r\n}\r\n```\r\n\r\nWhen the &#39;GOT IT&#39; button is pressed, a JS function written in the &#39;script.js&#39; is called, which animates the div and then removes it from the page:\r\n\r\n```js\r\nwindow.fadeOut = function(target) {\r\n    target.style = &#39;animation: fade-out 0.5s ease-out 0s forwards&#39;\r\n    setTimeout(function() {\r\n        target.style = &#39;display: none&#39;\r\n    }, 500)\r\n}\r\n```\r\n\r\nMy issue is: the file is successfully imported, but when I test the button the browser console throws the following error: &quot;Uncaught ReferenceError: fadeOut is not defined&quot;.\r\n\r\nI read some forums which said that in Vaadin 14 changing ```function fadeOut(target) {}``` to ```window.fadeOut = function(target) {}``` works, but feels like nothing changed.\r\n\r\nThis is my main tree:\r\n```\r\nmain\r\n├───java\r\n│   └───com\r\n│       └───Achille004\r\n│           └───FreeTransfer\r\n│               ├───backend\r\n│               │   ├───database\r\n│               │   ├───handlers\r\n│               │   └───security\r\n│               └───frontend\r\n│                   ├───css\r\n│                   ├───js\r\n│                   ├───pages\r\n│                   └───views\r\n└───resources\r\n    ├───META-INF\r\n    │   └───resources\r\n    │       └───img\r\n    ├───static\r\n    └───templates\r\n```\r\nCookiesDiv.java is located into pages and css and js modules are in their own folder.\r\n\r\nI could not find other stuff online, so I am just lost. Does someone know how to fix?\r\n\r\nP.S. I do not know if it could help: most of the proprieties in the CSS file are ignored, but I still have to do some research about it.","title":"Vaadin 23 JavaScript import issue","body":"<p>I have java class which extends the Vaadin Div class, which should be a cookie warning  popup (implementation is not yet complete):</p>\n<pre class=\"lang-java prettyprint-override\"><code>//imports\n\n@CssImport(&quot;css/info_popup.css&quot;)\n@JsModule(&quot;js/script.js&quot;)\n@Tag(&quot;info_popup&quot;)\npublic class CookiesDiv extends Div {\n\n    public CookiesDiv() {\n        this.setId(&quot;info_popup&quot;);\n\n        Span span = new Span(&quot;By continuing to this site, you accept the EULA and the cookies. &quot;);\n        span.add(new Anchor(&quot;./info&quot;, &quot;Learn more&quot;));\n        this.add(span);\n\n        this.add(new Button(&quot;GOT IT&quot;, event -&gt; {\n            Page page = UI.getCurrent().getPage();\n            this.getId().ifPresent(id -&gt; page.executeJs(&quot;fadeOut('&quot; + id + &quot;')&quot;));\n        }));\n    }\n}\n</code></pre>\n<p>When the 'GOT IT' button is pressed, a JS function written in the 'script.js' is called, which animates the div and then removes it from the page:</p>\n<pre class=\"lang-js prettyprint-override\"><code>window.fadeOut = function(target) {\n    target.style = 'animation: fade-out 0.5s ease-out 0s forwards'\n    setTimeout(function() {\n        target.style = 'display: none'\n    }, 500)\n}\n</code></pre>\n<p>My issue is: the file is successfully imported, but when I test the button the browser console throws the following error: &quot;Uncaught ReferenceError: fadeOut is not defined&quot;.</p>\n<p>I read some forums which said that in Vaadin 14 changing <code>function fadeOut(target) {}</code> to <code>window.fadeOut = function(target) {}</code> works, but feels like nothing changed.</p>\n<p>This is my main tree:</p>\n<pre><code>main\n├───java\n│   └───com\n│       └───Achille004\n│           └───FreeTransfer\n│               ├───backend\n│               │   ├───database\n│               │   ├───handlers\n│               │   └───security\n│               └───frontend\n│                   ├───css\n│                   ├───js\n│                   ├───pages\n│                   └───views\n└───resources\n    ├───META-INF\n    │   └───resources\n    │       └───img\n    ├───static\n    └───templates\n</code></pre>\n<p>CookiesDiv.java is located into pages and css and js modules are in their own folder.</p>\n<p>I could not find other stuff online, so I am just lost. Does someone know how to fix?</p>\n<p>P.S. I do not know if it could help: most of the proprieties in the CSS file are ignored, but I still have to do some research about it.</p>\n"},{"tags":["java","lambda","java-8"],"comments":[{"owner":{"account_id":2776621,"reputation":12858,"user_id":2390083,"accept_rate":75,"display_name":"Beryllium"},"score":1,"creation_date":1371541063,"post_id":17143104,"comment_id":24847421,"body_markdown":"In Scala, you can coerce a *method* into a *function value*, this is the *eta expansion* (there is a difference between *method* and *function* in Scala). As for the case you describe, the Scala compiler is smart enough to accept both.","body":"In Scala, you can coerce a <i>method</i> into a <i>function value</i>, this is the <i>eta expansion</i> (there is a difference between <i>method</i> and <i>function</i> in Scala). As for the case you describe, the Scala compiler is smart enough to accept both."},{"owner":{"account_id":90063,"reputation":9824,"user_id":248082,"accept_rate":64,"display_name":"nobeh"},"score":0,"creation_date":1371543857,"post_id":17143104,"comment_id":24848806,"body_markdown":"@Beryllium Indeed nice contrast and that&#39;s also why I was wondering about the reason Java 8 has not opt for it.","body":"@Beryllium Indeed nice contrast and that&#39;s also why I was wondering about the reason Java 8 has not opt for it."},{"owner":{"account_id":29398,"reputation":10394,"user_id":1859863,"display_name":"Maurice Naftalin"},"score":3,"creation_date":1371545433,"post_id":17143104,"comment_id":24849633,"body_markdown":"@nobeh Java 8 is sticking with functional interfaces because adding function types would have involved much bigger changes to the language. They may come later.","body":"@nobeh Java 8 is sticking with functional interfaces because adding function types would have involved much bigger changes to the language. They may come later."},{"owner":{"display_name":"user2587965"},"score":0,"creation_date":1547729838,"post_id":17143104,"comment_id":95297421,"body_markdown":"@nobeh this sucks. they should reconsider adding function types in next updates","body":"@nobeh this sucks. they should reconsider adding function types in next updates"}],"answers":[{"tags":[],"owner":{"account_id":29398,"reputation":10394,"user_id":1859863,"display_name":"Maurice Naftalin"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1371468350,"creation_date":1371468350,"answer_id":17146368,"question_id":17143104,"body_markdown":"I don&#39;t think there is any way to do what you want.  WHATTYPE is going to have to be a functional interface&amp;mdash;not necessarily `Function`, but one whose single abstract method matches `somemethod`. It&#39;s an ordinary interface type, subject to the usual rules governing Java types.  `java.util.function.Block` was an ordinary interface type like this, and not special in the way that you seem to think.  (It&#39;s still around, by the way, now called `Consumer`.)","title":"How to indirectly run a method reference in Java 8?","body":"<p>I don't think there is any way to do what you want.  WHATTYPE is going to have to be a functional interface&mdash;not necessarily <code>Function</code>, but one whose single abstract method matches <code>somemethod</code>. It's an ordinary interface type, subject to the usual rules governing Java types.  <code>java.util.function.Block</code> was an ordinary interface type like this, and not special in the way that you seem to think.  (It's still around, by the way, now called <code>Consumer</code>.)</p>\n"},{"tags":[],"owner":{"account_id":31622,"reputation":120341,"user_id":86989,"display_name":"newacct"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1371512410,"creation_date":1371512410,"answer_id":17158554,"question_id":17143104,"body_markdown":"A method reference works just like a lambda, and like a lambda, it doesn&#39;t have a &quot;type&quot; on its own. Its type depends on the context where it is used. So your question doesn&#39;t really make sense. If you use the method reference in a call to this `MethodRefRunner.execute()` method, then the type of the method reference *will be* an instance of `WHATTYPE` (whatever that is), because that&#39;s what the method was declared to accept. If you got it from somewhere else, well, that place will know what type it is.","title":"How to indirectly run a method reference in Java 8?","body":"<p>A method reference works just like a lambda, and like a lambda, it doesn't have a \"type\" on its own. Its type depends on the context where it is used. So your question doesn't really make sense. If you use the method reference in a call to this <code>MethodRefRunner.execute()</code> method, then the type of the method reference <em>will be</em> an instance of <code>WHATTYPE</code> (whatever that is), because that's what the method was declared to accept. If you got it from somewhere else, well, that place will know what type it is.</p>\n"},{"tags":[],"owner":{"account_id":21664607,"reputation":435,"user_id":15983216,"display_name":"Sebastian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660224561,"creation_date":1660219669,"answer_id":73320394,"question_id":17143104,"body_markdown":"Although this is an old post with an accepted answer, I feel there is more to say. The other answers are of course right, that lambda expressions or method references don&#39;t have a well defined type without context. However, when applying them to arguments and maybe assigning the result to a variable, you are providing such a context, so that indeed you can define a static execute() function as you suggested. \r\n\r\nWhen you&#39;re not worried about your utility class &quot;MethodRefRunner&quot; getting a bit bigger, you can certainly at least cover the most common cases. The problem is that in principle you need to cover two infinite towers of cases. First are the cases with exactly one return type and an arbitrary number of arguments. Second tower are the cases with again an arbitrary number of arguments but no return type (so &quot;void&quot; which could be seen as special Type &quot;Void&quot;, but unfortunately Java refuses to accept lambda-expressions or method-references from one case for the other). \r\nThe first tower is covered by `Supplier, Function, BiFunction, ...`\r\nthe second tower by `Runnable, Consumer, BiConsumer, ...`\r\nIn principle Function alone would be generic enough to cover all of these cases, but only in combination with currying, and there is no built-in currying in Java available. (a curried `BiFunction&lt;X,Y,Z&gt;` is a `Function&lt;X, Function&lt;Y, Z&gt;&gt;`).\r\nSo doing without currying, I&#39;d suggest the following:\r\n\r\n    public class MethodRefRunner {\r\n    static &lt;X&gt; X execute(Supplier&lt;X&gt; mref) {\r\n\t\treturn mref.get();\r\n\t}\r\n\tstatic &lt;X, Y&gt; Y execute(Function&lt;X, Y&gt; mref, X arg) {\r\n\t\treturn mref.apply(arg);\r\n\t}\r\n\tstatic &lt;X, Y, Z&gt; Z execute(BiFunction&lt;X, Y, Z&gt; mref, X arg1, Y arg2) {\r\n\t\treturn mref.apply(arg1, arg2);\r\n\t}\r\n\t// ... (infinitely more needed for each number of arguments)\r\n\r\n\r\n\t// same infinite tower again with void return\r\n\tstatic void execute(Runnable mref) {\r\n\t\tmref.run();\r\n\t}\r\n\r\n\tstatic &lt;X&gt; void execute(Consumer&lt;X&gt; mref, X arg) {\r\n\t\tmref.accept(arg);\r\n\t}\r\n\r\n\tstatic &lt;X, Y&gt; void execute(BiConsumer&lt;X, Y&gt; mref, X arg1, Y arg2) {\r\n\t\tmref.accept(arg1, arg2);\r\n\t}\r\n\t// ... (infinitely more needed for each number of arguments)\r\n\r\n\r\n\t/* so here&#39;s the test, the example classes are defined below */\r\n\tpublic static void main(String[] args) {\r\n\t\t// initializing the environment\r\n\t\tA a = new A();\r\n\t\tB b = new B();\r\n\t\tClassWithMethods object = new ClassWithMethods();\r\n\r\n\r\n\t\t// applying execute to method references\r\n\t\texecute(object::set, a);\r\n\t\tSystem.out.println(a == execute(object::get)); // true\r\n\r\n\t\tC c = execute(ClassWithMethods::staticMethod, a, b);\r\n\t\tSystem.out.println(c.equals(execute(object::method, b))); // true\r\n\t\tSystem.out.println(c.equals(execute(C::new, a, b))); // true\r\n\r\n\t\t// A last example with object-method reference for a non-specified object (C::equals instead of c::equals).\r\n\t\t// For some reason my compiler cannot deduce the types itself here, so one has to add a cast\r\n\t\tboolean isEqual = execute((BiFunction&lt;C, C, Boolean&gt;) C::equals, c, execute(C::new, a, b));\r\n\t\tSystem.out.println(isEqual); // true\r\n\t}\r\n\r\n\t/* in the following the example-classes used in the test above are defined */\r\n\tstatic class A {\r\n\t}\r\n\tstatic class B {\r\n\t}\r\n\tstatic class C {\r\n\t\tA a;\r\n\t\tB b;\r\n\t\tpublic C(A a, B b) {\r\n\t\t\tthis.a = a;\r\n\t\t\tthis.b = b;\r\n\t\t}\r\n\r\n\t\tpublic boolean equals(C other) {\r\n\t\t\treturn a.equals(other.a) &amp;&amp; b.equals(other.b);\r\n\t\t}\r\n\t}\r\n\tstatic class ClassWithMethods {\r\n\t\tA a;\r\n\r\n\t\tpublic A get() {\r\n\r\n\t\t\treturn this.a;\r\n\t\t}\r\n\r\n\t\tpublic void set(A a) {\r\n\t\t\tthis.a = a;\r\n\t\t}\r\n\r\n\t\tpublic C method(B b) {\r\n\r\n\t\t\treturn new C(this.a, b);\r\n\t\t}\r\n\r\n\t\tpublic static C staticMethod(A a, B b) {\r\n\r\n\t\t\treturn new C(a, b);\r\n\t\t}\r\n\t}\r\n    }","title":"How to indirectly run a method reference in Java 8?","body":"<p>Although this is an old post with an accepted answer, I feel there is more to say. The other answers are of course right, that lambda expressions or method references don't have a well defined type without context. However, when applying them to arguments and maybe assigning the result to a variable, you are providing such a context, so that indeed you can define a static execute() function as you suggested.</p>\n<p>When you're not worried about your utility class &quot;MethodRefRunner&quot; getting a bit bigger, you can certainly at least cover the most common cases. The problem is that in principle you need to cover two infinite towers of cases. First are the cases with exactly one return type and an arbitrary number of arguments. Second tower are the cases with again an arbitrary number of arguments but no return type (so &quot;void&quot; which could be seen as special Type &quot;Void&quot;, but unfortunately Java refuses to accept lambda-expressions or method-references from one case for the other).\nThe first tower is covered by <code>Supplier, Function, BiFunction, ...</code>\nthe second tower by <code>Runnable, Consumer, BiConsumer, ...</code>\nIn principle Function alone would be generic enough to cover all of these cases, but only in combination with currying, and there is no built-in currying in Java available. (a curried <code>BiFunction&lt;X,Y,Z&gt;</code> is a <code>Function&lt;X, Function&lt;Y, Z&gt;&gt;</code>).\nSo doing without currying, I'd suggest the following:</p>\n<pre><code>public class MethodRefRunner {\nstatic &lt;X&gt; X execute(Supplier&lt;X&gt; mref) {\n    return mref.get();\n}\nstatic &lt;X, Y&gt; Y execute(Function&lt;X, Y&gt; mref, X arg) {\n    return mref.apply(arg);\n}\nstatic &lt;X, Y, Z&gt; Z execute(BiFunction&lt;X, Y, Z&gt; mref, X arg1, Y arg2) {\n    return mref.apply(arg1, arg2);\n}\n// ... (infinitely more needed for each number of arguments)\n\n\n// same infinite tower again with void return\nstatic void execute(Runnable mref) {\n    mref.run();\n}\n\nstatic &lt;X&gt; void execute(Consumer&lt;X&gt; mref, X arg) {\n    mref.accept(arg);\n}\n\nstatic &lt;X, Y&gt; void execute(BiConsumer&lt;X, Y&gt; mref, X arg1, Y arg2) {\n    mref.accept(arg1, arg2);\n}\n// ... (infinitely more needed for each number of arguments)\n\n\n/* so here's the test, the example classes are defined below */\npublic static void main(String[] args) {\n    // initializing the environment\n    A a = new A();\n    B b = new B();\n    ClassWithMethods object = new ClassWithMethods();\n\n\n    // applying execute to method references\n    execute(object::set, a);\n    System.out.println(a == execute(object::get)); // true\n\n    C c = execute(ClassWithMethods::staticMethod, a, b);\n    System.out.println(c.equals(execute(object::method, b))); // true\n    System.out.println(c.equals(execute(C::new, a, b))); // true\n\n    // A last example with object-method reference for a non-specified object (C::equals instead of c::equals).\n    // For some reason my compiler cannot deduce the types itself here, so one has to add a cast\n    boolean isEqual = execute((BiFunction&lt;C, C, Boolean&gt;) C::equals, c, execute(C::new, a, b));\n    System.out.println(isEqual); // true\n}\n\n/* in the following the example-classes used in the test above are defined */\nstatic class A {\n}\nstatic class B {\n}\nstatic class C {\n    A a;\n    B b;\n    public C(A a, B b) {\n        this.a = a;\n        this.b = b;\n    }\n\n    public boolean equals(C other) {\n        return a.equals(other.a) &amp;&amp; b.equals(other.b);\n    }\n}\nstatic class ClassWithMethods {\n    A a;\n\n    public A get() {\n\n        return this.a;\n    }\n\n    public void set(A a) {\n        this.a = a;\n    }\n\n    public C method(B b) {\n\n        return new C(this.a, b);\n    }\n\n    public static C staticMethod(A a, B b) {\n\n        return new C(a, b);\n    }\n}\n}\n</code></pre>\n"}],"owner":{"account_id":90063,"reputation":9824,"user_id":248082,"accept_rate":64,"display_name":"nobeh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2675,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":17146368,"answer_count":3,"score":12,"last_activity_date":1660224561,"creation_date":1371457015,"question_id":17143104,"body_markdown":"The general questions are:\r\n\r\n- When using the syntax `object::aMethod`, can it be converted to a type such as `MethodHandle` as a functional interface?\r\n- If no, how can a method reference be indirectly invoked in Java 8 if at all possible?\r\n\r\nAs an example, imagine we&#39;d like to have a `MethodRefRunner` as:\r\n\r\n    class MethodRefRunner {\r\n      static void execute(Object target, WHATTYPE mref, Object... args) {\r\n        mref.apply(args);\r\n      }\r\n    }\r\n\r\nAnd it can be used as: `MethodRefRunner.execute(o, o::someMethod, someParam)`\r\n\r\nIn the above snippet, one option for `WHATTYPE` is `java.util.function.Function` but very restrictive. As [this answer][1] mentions, prior to version b75, there was a `java.util.function.Block` was available and might be handy.\r\n\r\nOn the other side, any chance that `WHATTYPE` could be in some way converted to a `java.lang.invoke.MethodHandle`? \r\n\r\n*Note* to Java experts: Please refine the title of the questions as needed.\r\n\r\n[1]: https://stackoverflow.com/a/13173903/248082\r\n\r\n","title":"How to indirectly run a method reference in Java 8?","body":"<p>The general questions are:</p>\n\n<ul>\n<li>When using the syntax <code>object::aMethod</code>, can it be converted to a type such as <code>MethodHandle</code> as a functional interface?</li>\n<li>If no, how can a method reference be indirectly invoked in Java 8 if at all possible?</li>\n</ul>\n\n<p>As an example, imagine we'd like to have a <code>MethodRefRunner</code> as:</p>\n\n<pre><code>class MethodRefRunner {\n  static void execute(Object target, WHATTYPE mref, Object... args) {\n    mref.apply(args);\n  }\n}\n</code></pre>\n\n<p>And it can be used as: <code>MethodRefRunner.execute(o, o::someMethod, someParam)</code></p>\n\n<p>In the above snippet, one option for <code>WHATTYPE</code> is <code>java.util.function.Function</code> but very restrictive. As <a href=\"https://stackoverflow.com/a/13173903/248082\">this answer</a> mentions, prior to version b75, there was a <code>java.util.function.Block</code> was available and might be handy.</p>\n\n<p>On the other side, any chance that <code>WHATTYPE</code> could be in some way converted to a <code>java.lang.invoke.MethodHandle</code>? </p>\n\n<p><em>Note</em> to Java experts: Please refine the title of the questions as needed.</p>\n"},{"tags":["java","mongodb","spring-boot","apache-kafka"],"comments":[{"owner":{"account_id":25973303,"reputation":3,"user_id":19688105,"display_name":"Venkat"},"score":0,"creation_date":1660215778,"post_id":73319504,"comment_id":129482800,"body_markdown":"Pl go thru the existing answered questions on this. https://stackoverflow.com/questions/3507624/mongodb-nosql-keeping-document-change-history","body":"Pl go thru the existing answered questions on this. <a href=\"https://stackoverflow.com/questions/3507624/mongodb-nosql-keeping-document-change-history\" title=\"mongodb nosql keeping document change history\">stackoverflow.com/questions/3507624/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":268201,"reputation":419,"user_id":1573368,"display_name":"Sheel Prabhakar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660216283,"creation_date":1660216283,"answer_id":73319694,"question_id":73319504,"body_markdown":"MongoDB 4 supports transactions https://spring.io/blog/2018/06/28/hands-on-mongodb-4-0-transactions-with-spring-data\r\nIf using this version then you can have commit and rollback.\r\n\r\nEarlier MongoDB doesn&#39;t support the transaction, so your spring Mongorepository insert call will return after a successful insert. Why do you need to check for commit?\r\n\r\nIf want to make sure then read that document by ID.","title":"How to track changes in mongodb from springboot application","body":"<p>MongoDB 4 supports transactions <a href=\"https://spring.io/blog/2018/06/28/hands-on-mongodb-4-0-transactions-with-spring-data\" rel=\"nofollow noreferrer\">https://spring.io/blog/2018/06/28/hands-on-mongodb-4-0-transactions-with-spring-data</a>\nIf using this version then you can have commit and rollback.</p>\n<p>Earlier MongoDB doesn't support the transaction, so your spring Mongorepository insert call will return after a successful insert. Why do you need to check for commit?</p>\n<p>If want to make sure then read that document by ID.</p>\n"},{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660224254,"creation_date":1660224254,"answer_id":73321454,"question_id":73319504,"body_markdown":"Simply don&#39;t do two-phase commits.\r\n\r\nUse external processes like Debezium or Mongo Kafka Source Connector to read the data directly from Mongo into Kafka topics ","title":"How to track changes in mongodb from springboot application","body":"<p>Simply don't do two-phase commits.</p>\n<p>Use external processes like Debezium or Mongo Kafka Source Connector to read the data directly from Mongo into Kafka topics</p>\n"}],"owner":{"account_id":5193578,"reputation":7,"user_id":16335320,"display_name":"aslan95"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":349,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660224254,"creation_date":1660215499,"question_id":73319504,"body_markdown":"I am inserting some data to mongo with springboot application, after that I send this data to kafka. I want to be sure that before I send them to kafka they are commited to mongo. Is there a way I can ensure that this data is commited before sending them to kafka? Thank you","title":"How to track changes in mongodb from springboot application","body":"<p>I am inserting some data to mongo with springboot application, after that I send this data to kafka. I want to be sure that before I send them to kafka they are commited to mongo. Is there a way I can ensure that this data is commited before sending them to kafka? Thank you</p>\n"},{"tags":["java","amazon-s3"],"comments":[{"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"score":0,"creation_date":1566219766,"post_id":57524148,"comment_id":101576425,"body_markdown":"Are you using &#39;ABC/&#39; as prefix, refer: https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/model/ListObjectsRequest.html","body":"Are you using &#39;ABC/&#39; as prefix, refer: <a href=\"https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/model/ListObjectsRequest.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/&zwnj;&#8203;&hellip;</a>"},{"owner":{"account_id":8881930,"reputation":11996,"user_id":6644368,"accept_rate":100,"display_name":"Yash"},"score":0,"creation_date":1566220005,"post_id":57524148,"comment_id":101576582,"body_markdown":"@Ironluca I have tried with and without delimiters and it doesn&#39;t work either way. At this point, I would like to point out that downgrading the version to `2.15.x` actually solved my problem. But the error still remains incomprehensible.","body":"@Ironluca I have tried with and without delimiters and it doesn&#39;t work either way. At this point, I would like to point out that downgrading the version to <code>2.15.x</code> actually solved my problem. But the error still remains incomprehensible."},{"owner":{"account_id":9847667,"reputation":29054,"user_id":7294647,"accept_rate":67,"display_name":"Jacob G."},"score":1,"creation_date":1566569525,"post_id":57524148,"comment_id":101709596,"body_markdown":"@Yash Version `2.15.x` does not exist. Which version did you *actually* downgrade to? Can you keep incrementing the patch/minor versions until you find the version that throws the exception?","body":"@Yash Version <code>2.15.x</code> does not exist. Which version did you <i>actually</i> downgrade to? Can you keep incrementing the patch/minor versions until you find the version that throws the exception?"},{"owner":{"account_id":8881930,"reputation":11996,"user_id":6644368,"accept_rate":100,"display_name":"Yash"},"score":0,"creation_date":1566569619,"post_id":57524148,"comment_id":101709635,"body_markdown":"@Jacob G. Extremely sorry for the confusion. Below is the version I fell back to:\n`&lt;aws-sdk.version&gt;2.5.15&lt;/aws-sdk.version&gt;`","body":"@Jacob G. Extremely sorry for the confusion. Below is the version I fell back to: <code>&lt;aws-sdk.version&gt;2.5.15&lt;&#47;aws-sdk.version&gt;</code>"},{"owner":{"account_id":9847667,"reputation":29054,"user_id":7294647,"accept_rate":67,"display_name":"Jacob G."},"score":1,"creation_date":1566569751,"post_id":57524148,"comment_id":101709698,"body_markdown":"@Yash No problem :) thanks for the quick response. I do a lot of work with AWS v2, and I&#39;ve never seen something like this before. Is `2.5.15` the latest version of the SDK that **doesn&#39;t** throw the exception? If I&#39;m able to reproduce your exception, I&#39;d be happy to open an issue on their GitHub repository","body":"@Yash No problem :) thanks for the quick response. I do a lot of work with AWS v2, and I&#39;ve never seen something like this before. Is <code>2.5.15</code> the latest version of the SDK that <b>doesn&#39;t</b> throw the exception? If I&#39;m able to reproduce your exception, I&#39;d be happy to open an issue on their GitHub repository"},{"owner":{"account_id":8881930,"reputation":11996,"user_id":6644368,"accept_rate":100,"display_name":"Yash"},"score":0,"creation_date":1566569759,"post_id":57524148,"comment_id":101709704,"body_markdown":"Furthermore, I just want to know if this behaviour of the newer version is expected at all or it is a bug. Because if it is a desirable addition, I would change my code to comply with the newer constructs.","body":"Furthermore, I just want to know if this behaviour of the newer version is expected at all or it is a bug. Because if it is a desirable addition, I would change my code to comply with the newer constructs."},{"owner":{"account_id":8881930,"reputation":11996,"user_id":6644368,"accept_rate":100,"display_name":"Yash"},"score":0,"creation_date":1566569928,"post_id":57524148,"comment_id":101709799,"body_markdown":"@Jacob G. I haven&#39;t tried to step-wise upgrade the version due to lack of time at that moment, which in retrospect seems the obvious thing to do. I would do that and update the post here. The intent to the question was also partly to see if other developers are facing a similar issue","body":"@Jacob G. I haven&#39;t tried to step-wise upgrade the version due to lack of time at that moment, which in retrospect seems the obvious thing to do. I would do that and update the post here. The intent to the question was also partly to see if other developers are facing a similar issue"},{"owner":{"account_id":9847667,"reputation":29054,"user_id":7294647,"accept_rate":67,"display_name":"Jacob G."},"score":1,"creation_date":1566570029,"post_id":57524148,"comment_id":101709846,"body_markdown":"Well I&#39;ve never seen that exception myself, but I&#39;ll see if I can reproduce it using the same version/code that you used.","body":"Well I&#39;ve never seen that exception myself, but I&#39;ll see if I can reproduce it using the same version/code that you used."},{"owner":{"account_id":9847667,"reputation":29054,"user_id":7294647,"accept_rate":67,"display_name":"Jacob G."},"score":0,"creation_date":1566572195,"post_id":57524148,"comment_id":101710955,"body_markdown":"It looks like I&#39;m not able to reproduce the exception; It simply returns the object for me: `ObjectIdentifier(Key=sample.jpeg)`","body":"It looks like I&#39;m not able to reproduce the exception; It simply returns the object for me: <code>ObjectIdentifier(Key=sample.jpeg)</code>"},{"owner":{"account_id":8881930,"reputation":11996,"user_id":6644368,"accept_rate":100,"display_name":"Yash"},"score":0,"creation_date":1566572241,"post_id":57524148,"comment_id":101710983,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/198376/discussion-between-yash-and-jacob-g).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/198376/discussion-between-yash-and-jacob-g\">continue this discussion in chat</a>."}],"answers":[{"tags":[],"owner":{"account_id":5799510,"reputation":166,"user_id":4574131,"display_name":"mOchi"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1566290817,"creation_date":1566290817,"answer_id":57569887,"question_id":57524148,"body_markdown":"Is it possible for you to have a comparison between the instance of the `s3client` (between older version and problematic new version AWS SDK for Java). Please share.\r\n\r\nMight have to debug and inspect. Likely there are values that could be different in default between the 2. For example if default region is different, you won&#39;t get your previously saved objects using the new SDK without changes.\r\n\r\nAlso, since you are migrating to a major revision, it&#39;s likely possible that you will find more issues down the road. It could guide you to refer to the [Migration Guide][1].\r\n\r\nIf you just want specific changes to look up you can check this [What&#39;s Different Page][2]. Please check the links inside that page on the Change Log, you&#39;ll get a per method comparison what changed.\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/sdk-for-java/v2/migration-guide/what-is-java-migration.html\r\n  [2]: https://docs.aws.amazon.com/sdk-for-java/v2/migration-guide/whats-different.html","title":"Amazon SDK Java v2 S3Client listObjects throws S3Exception","body":"<p>Is it possible for you to have a comparison between the instance of the <code>s3client</code> (between older version and problematic new version AWS SDK for Java). Please share.</p>\n\n<p>Might have to debug and inspect. Likely there are values that could be different in default between the 2. For example if default region is different, you won't get your previously saved objects using the new SDK without changes.</p>\n\n<p>Also, since you are migrating to a major revision, it's likely possible that you will find more issues down the road. It could guide you to refer to the <a href=\"https://docs.aws.amazon.com/sdk-for-java/v2/migration-guide/what-is-java-migration.html\" rel=\"nofollow noreferrer\">Migration Guide</a>.</p>\n\n<p>If you just want specific changes to look up you can check this <a href=\"https://docs.aws.amazon.com/sdk-for-java/v2/migration-guide/whats-different.html\" rel=\"nofollow noreferrer\">What's Different Page</a>. Please check the links inside that page on the Change Log, you'll get a per method comparison what changed.</p>\n"},{"tags":[],"owner":{"account_id":5552473,"reputation":973,"user_id":4405062,"accept_rate":50,"display_name":"The Cloud Guy"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1566763605,"creation_date":1566763605,"answer_id":57649333,"question_id":57524148,"body_markdown":"I did come across a similar error before. The error is caused because AWS guys have started transitioning their APIs to v2 for the 2.x SDK. Below is the code snippet that works perfect with or without prefix.\r\n\r\n    ListObjectsV2Request request = new ListObjectsV2Request().withBucketName(bucketName).withPrefix(prefix)\r\n    \t\t\t\t\t.withDelimiter(GenericConstants.FORWARD_SLASH);\r\n    ListObjectsV2Result result = s3Client.listObjectsV2(request);\r\nFeel free to ask for further details if needed. I have did quite a lot with the v2 APIs of S3. ","title":"Amazon SDK Java v2 S3Client listObjects throws S3Exception","body":"<p>I did come across a similar error before. The error is caused because AWS guys have started transitioning their APIs to v2 for the 2.x SDK. Below is the code snippet that works perfect with or without prefix.</p>\n\n<pre><code>ListObjectsV2Request request = new ListObjectsV2Request().withBucketName(bucketName).withPrefix(prefix)\n                    .withDelimiter(GenericConstants.FORWARD_SLASH);\nListObjectsV2Result result = s3Client.listObjectsV2(request);\n</code></pre>\n\n<p>Feel free to ask for further details if needed. I have did quite a lot with the v2 APIs of S3. </p>\n"},{"tags":[],"owner":{"account_id":9847667,"reputation":29054,"user_id":7294647,"accept_rate":67,"display_name":"Jacob G."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1566785016,"creation_date":1566785016,"answer_id":57651065,"question_id":57524148,"body_markdown":"Seeing as our discussion in the comments hasn&#39;t led anywhere, I&#39;d rather not see this bounty go to waste.\r\n\r\nI&#39;ve run your code on my machine (using the same AWS SDK version), and I&#39;m not able to reproduce the exception. If you&#39;re still experiencing the issue, I recommend opening an issue explaining your problem on the GitHub repository: https://github.com/aws/aws-sdk-java-v2/issues/new\r\n\r\nI&#39;ve been through this process before, and they normally respond within a couple days.\r\n\r\nPlease report back if they manage to resolve your issue!","title":"Amazon SDK Java v2 S3Client listObjects throws S3Exception","body":"<p>Seeing as our discussion in the comments hasn't led anywhere, I'd rather not see this bounty go to waste.</p>\n\n<p>I've run your code on my machine (using the same AWS SDK version), and I'm not able to reproduce the exception. If you're still experiencing the issue, I recommend opening an issue explaining your problem on the GitHub repository: <a href=\"https://github.com/aws/aws-sdk-java-v2/issues/new\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-sdk-java-v2/issues/new</a></p>\n\n<p>I've been through this process before, and they normally respond within a couple days.</p>\n\n<p>Please report back if they manage to resolve your issue!</p>\n"},{"tags":[],"owner":{"account_id":7206157,"reputation":3851,"user_id":5501699,"display_name":"Imtiaz Shakil Siddique"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1570469611,"creation_date":1570469611,"answer_id":58274504,"question_id":57524148,"body_markdown":"The issue is with aws&#39;s internal dependency on `org.apache.httpcomponents:httpclient`.\r\n\r\nThe minimum required version for `httpclient` is `4.5.9`. If you downgrade that version in your project pom, then this problem will arise. \r\n\r\nTo check what version you&#39;re running, try:\r\n\r\n    mvn dependency:tree\r\n\r\nFind out the `httpclient` version. This is what mine looks like:\r\n```\r\n[INFO] |  +- software.amazon.awssdk:apache-client:jar:2.8.4:runtime\r\n[INFO] |  |  +- org.apache.httpcomponents:httpclient:jar:4.5.10:runtime\r\n[INFO] |  |  |  \\- commons-codec:commons-codec:jar:1.11:runtime\r\n[INFO] |  |  \\- org.apache.httpcomponents:httpcore:jar:4.4.12:runtime\r\n```\r\n \r\n**Solution:**   \r\nIf you&#39;ve downgraded the version by using any bom or dependency management (in my case `spring-boot-starter-parent:2.1.5.RELEASE` caused this to happen), then just add this to your pom &amp; it should work:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n        &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n        &lt;version&gt;4.5.9&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nRelated Issues:   \r\n[Issue#1434][1],   [Issue#1919][2],    [Issue#1372][3]    \r\n\r\n[1]: https://github.com/aws/aws-sdk-java-v2/issues/1434\r\n[2]: https://github.com/aws/aws-sdk-java/issues/1919\r\n[3]: https://github.com/aws/aws-sdk-java-v2/issues/1372","title":"Amazon SDK Java v2 S3Client listObjects throws S3Exception","body":"<p>The issue is with aws's internal dependency on <code>org.apache.httpcomponents:httpclient</code>.</p>\n\n<p>The minimum required version for <code>httpclient</code> is <code>4.5.9</code>. If you downgrade that version in your project pom, then this problem will arise. </p>\n\n<p>To check what version you're running, try:</p>\n\n<pre><code>mvn dependency:tree\n</code></pre>\n\n<p>Find out the <code>httpclient</code> version. This is what mine looks like:</p>\n\n<pre><code>[INFO] |  +- software.amazon.awssdk:apache-client:jar:2.8.4:runtime\n[INFO] |  |  +- org.apache.httpcomponents:httpclient:jar:4.5.10:runtime\n[INFO] |  |  |  \\- commons-codec:commons-codec:jar:1.11:runtime\n[INFO] |  |  \\- org.apache.httpcomponents:httpcore:jar:4.4.12:runtime\n</code></pre>\n\n<p><strong>Solution:</strong><br>\nIf you've downgraded the version by using any bom or dependency management (in my case <code>spring-boot-starter-parent:2.1.5.RELEASE</code> caused this to happen), then just add this to your pom &amp; it should work:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n    &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n    &lt;version&gt;4.5.9&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Related Issues:<br>\n<a href=\"https://github.com/aws/aws-sdk-java-v2/issues/1434\" rel=\"nofollow noreferrer\">Issue#1434</a>,   <a href=\"https://github.com/aws/aws-sdk-java/issues/1919\" rel=\"nofollow noreferrer\">Issue#1919</a>,    <a href=\"https://github.com/aws/aws-sdk-java-v2/issues/1372\" rel=\"nofollow noreferrer\">Issue#1372</a>    </p>\n"},{"tags":[],"owner":{"account_id":17377280,"reputation":27,"user_id":12590217,"display_name":"Lasan Rashmika"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660224046,"creation_date":1660224046,"answer_id":73321395,"question_id":57524148,"body_markdown":"Adding the below dependency to the pom file will resolve this.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n        &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n        &lt;version&gt;4.5.9&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"Amazon SDK Java v2 S3Client listObjects throws S3Exception","body":"<p>Adding the below dependency to the pom file will resolve this.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n    &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n    &lt;version&gt;4.5.9&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":8881930,"reputation":11996,"user_id":6644368,"accept_rate":100,"display_name":"Yash"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2148,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":5,"score":3,"last_activity_date":1660224046,"creation_date":1565956227,"question_id":57524148,"body_markdown":"I have saved files on `AWS S3` imitating folder structure using names. \r\n\r\ne.g. A file `sample.jpeg` under `ABC` folder will be named `ABC/sample.jpeg`\r\n\r\nI am trying to programmatically delete these folders using the Java SDK v2. I&#39;m trying to list these files using `prefix`. \r\n\r\ne.g. In the example above, I&#39;m trying to list all files having prefix `ABC` in the bucket. \r\n\r\nWhat&#39;s problematic is that without this prefix, the SDK lists the files just fine, but the prefix in my `ListObjectsRequest` as I have shown in the code below, it throws `s3Exception`. The exception itself has an `awsErrorDetails` attribute that has a `sdkHttpResponse` wrapping `statusCode` : `302` and `statusText` : `&quot;Moved Temporarily&quot;` \r\n\r\nFollowing is the Exception trace:\r\n\r\n    software.amazon.awssdk.services.s3.model.S3Exception: null (Service: S3, Status Code: 302, Request ID: null)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.handleErrorResponse(HandleResponseStage.java:115) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.handleResponse(HandleResponseStage.java:73) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.execute(HandleResponseStage.java:58) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.execute(HandleResponseStage.java:41) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:64) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:36) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:77) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:39) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage$RetryExecutor.doExecute(RetryableStage.java:113) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage$RetryExecutor.execute(RetryableStage.java:86) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:62) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:42) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:57) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:37) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.executeWithTimer(ApiCallTimeoutTrackingStage.java:80) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:60) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:42) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:37) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:26) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.internal.http.AmazonSyncHttpClient$RequestExecutionBuilderImpl.execute(AmazonSyncHttpClient.java:240) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.client.handler.BaseSyncClientHandler.invoke(BaseSyncClientHandler.java:96) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.client.handler.BaseSyncClientHandler.execute(BaseSyncClientHandler.java:120) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.client.handler.BaseSyncClientHandler.execute(BaseSyncClientHandler.java:73) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.core.client.handler.SdkSyncClientHandler.execute(SdkSyncClientHandler.java:44) ~[sdk-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.awscore.client.handler.AwsSyncClientHandler.execute(AwsSyncClientHandler.java:55) ~[aws-core-2.7.22.jar:na]\r\n\tat software.amazon.awssdk.services.s3.DefaultS3Client.listObjects(DefaultS3Client.java:2278) ~[s3-2.7.22.jar:na]\r\n\r\n\r\nHere&#39;s the code snippet I&#39;m using:\r\n\r\n        ListObjectsRequest listObjectsRequest = ListObjectsRequest.builder()\r\n                .bucket(this.bucketName)\r\n                .prefix(path)\r\n                .build();\r\n\r\n        List&lt;ObjectIdentifier&gt; objectIds = s3client.listObjects(listObjectsRequest)\r\n                .contents()\r\n                .stream()\r\n                .map(s3Object -&gt; ObjectIdentifier.builder().key(s3Object.key()).build())\r\n                .collect(toList());\r\n\r\nFollowing are the dependencies from my `pom.xml`:\r\n\r\n\t      &lt;properties&gt;\r\n\t\t       &lt;aws-sdk.version&gt;2.7.22&lt;/aws-sdk.version&gt;\r\n          &lt;/properties&gt;\r\n        \r\n        ...\r\n       \r\n\t\t\t&lt;!-- Amazon Web Services --&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;s3&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${aws-sdk.version}&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;auth&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${aws-sdk.version}&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;","title":"Amazon SDK Java v2 S3Client listObjects throws S3Exception","body":"<p>I have saved files on <code>AWS S3</code> imitating folder structure using names. </p>\n\n<p>e.g. A file <code>sample.jpeg</code> under <code>ABC</code> folder will be named <code>ABC/sample.jpeg</code></p>\n\n<p>I am trying to programmatically delete these folders using the Java SDK v2. I'm trying to list these files using <code>prefix</code>. </p>\n\n<p>e.g. In the example above, I'm trying to list all files having prefix <code>ABC</code> in the bucket. </p>\n\n<p>What's problematic is that without this prefix, the SDK lists the files just fine, but the prefix in my <code>ListObjectsRequest</code> as I have shown in the code below, it throws <code>s3Exception</code>. The exception itself has an <code>awsErrorDetails</code> attribute that has a <code>sdkHttpResponse</code> wrapping <code>statusCode</code> : <code>302</code> and <code>statusText</code> : <code>\"Moved Temporarily\"</code> </p>\n\n<p>Following is the Exception trace:</p>\n\n<pre><code>software.amazon.awssdk.services.s3.model.S3Exception: null (Service: S3, Status Code: 302, Request ID: null)\nat software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.handleErrorResponse(HandleResponseStage.java:115) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.handleResponse(HandleResponseStage.java:73) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.execute(HandleResponseStage.java:58) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.execute(HandleResponseStage.java:41) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:64) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:36) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:77) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:39) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage$RetryExecutor.doExecute(RetryableStage.java:113) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage$RetryExecutor.execute(RetryableStage.java:86) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:62) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:42) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:57) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:37) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.executeWithTimer(ApiCallTimeoutTrackingStage.java:80) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:60) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:42) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:37) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:26) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.internal.http.AmazonSyncHttpClient$RequestExecutionBuilderImpl.execute(AmazonSyncHttpClient.java:240) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.client.handler.BaseSyncClientHandler.invoke(BaseSyncClientHandler.java:96) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.client.handler.BaseSyncClientHandler.execute(BaseSyncClientHandler.java:120) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.client.handler.BaseSyncClientHandler.execute(BaseSyncClientHandler.java:73) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.core.client.handler.SdkSyncClientHandler.execute(SdkSyncClientHandler.java:44) ~[sdk-core-2.7.22.jar:na]\nat software.amazon.awssdk.awscore.client.handler.AwsSyncClientHandler.execute(AwsSyncClientHandler.java:55) ~[aws-core-2.7.22.jar:na]\nat software.amazon.awssdk.services.s3.DefaultS3Client.listObjects(DefaultS3Client.java:2278) ~[s3-2.7.22.jar:na]\n</code></pre>\n\n<p>Here's the code snippet I'm using:</p>\n\n<pre><code>    ListObjectsRequest listObjectsRequest = ListObjectsRequest.builder()\n            .bucket(this.bucketName)\n            .prefix(path)\n            .build();\n\n    List&lt;ObjectIdentifier&gt; objectIds = s3client.listObjects(listObjectsRequest)\n            .contents()\n            .stream()\n            .map(s3Object -&gt; ObjectIdentifier.builder().key(s3Object.key()).build())\n            .collect(toList());\n</code></pre>\n\n<p>Following are the dependencies from my <code>pom.xml</code>:</p>\n\n<pre><code>      &lt;properties&gt;\n           &lt;aws-sdk.version&gt;2.7.22&lt;/aws-sdk.version&gt;\n      &lt;/properties&gt;\n\n    ...\n\n        &lt;!-- Amazon Web Services --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n            &lt;artifactId&gt;s3&lt;/artifactId&gt;\n            &lt;version&gt;${aws-sdk.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n            &lt;artifactId&gt;auth&lt;/artifactId&gt;\n            &lt;version&gt;${aws-sdk.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security","spring-data-jpa"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1660222490,"post_id":73320798,"comment_id":129485202,"body_markdown":"Adding `@Transactional` to what?","body":"Adding <code>@Transactional</code> to what?"},{"owner":{"account_id":25887820,"reputation":107,"user_id":19615643,"display_name":"Grimalkin"},"score":0,"creation_date":1660222683,"post_id":73320798,"comment_id":129485279,"body_markdown":"@M.Deinum I tried both class (that extends `UsernamePasswordAuthenticationFilter`) and  `successfulAuthentication` method","body":"@M.Deinum I tried both class (that extends <code>UsernamePasswordAuthenticationFilter</code>) and  <code>successfulAuthentication</code> method"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1660222906,"post_id":73320798,"comment_id":129485357,"body_markdown":"The `successulAuthentication` is an internal method call so adding `@Transactional` won&#39;t help. The easiest is to create another class and move the logic to there and annotate that class (or the method) with `@Transactional`. Or ditch this all together and write an event listener for `AuthenticationSuccessEvent` and then run your logic there. That way you don&#39;t have to extend filters etc. and still get the desired behavior (and have it loosy coupled).","body":"The <code>successulAuthentication</code> is an internal method call so adding <code>@Transactional</code> won&#39;t help. The easiest is to create another class and move the logic to there and annotate that class (or the method) with <code>@Transactional</code>. Or ditch this all together and write an event listener for <code>AuthenticationSuccessEvent</code> and then run your logic there. That way you don&#39;t have to extend filters etc. and still get the desired behavior (and have it loosy coupled)."},{"owner":{"account_id":25887820,"reputation":107,"user_id":19615643,"display_name":"Grimalkin"},"score":0,"creation_date":1660223257,"post_id":73320798,"comment_id":129485488,"body_markdown":"@M.Deinum Thank you so much that works! I guess creating &quot;service&quot; class is good practice after all.","body":"@M.Deinum Thank you so much that works! I guess creating &quot;service&quot; class is good practice after all."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1660223597,"post_id":73320798,"comment_id":129485629,"body_markdown":"You can make it even easier with the listener (I actually just wrote an answer for that).","body":"You can make it even easier with the listener (I actually just wrote an answer for that)."}],"answers":[{"tags":[],"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660223562,"creation_date":1660223562,"answer_id":73321275,"question_id":73320798,"body_markdown":"The `successulAuthentication` is an internal method call so adding `@Transactional` won&#39;t help (as not passing through the proxy). \r\n\r\nThe easiest is to create another class and move the logic to there and annotate that class (or the method) with `@Transactional`. \r\n\r\n```java\r\n@Component\r\n@Transactional\r\npublic class AfterAuthenticationService {\r\n\r\n  private final UserRepo userRepo;\r\n  private final PortRepo portRepo;\r\n\r\n  public AfterAuthenticationService(UserRepo userRepo, PortRepo portRepo) {\r\n    this.userRepo=userRepo;\r\n    this.portRepo=portRepo;\r\n}\r\n\r\n  public void onSuccessfulAuthentication(Authentication authentication) {\r\n    User user = (User) authentication.getPrincipal();\r\n    AppUser appUser = userRepo.findByUsername(user.getUsername());\r\n\r\n    portRepo.enableExpiredPorts(LocalDateTime.now());\r\n    Port port = portRepo.checkIfUserHasPort(appUser.getUserId());\r\n    if (port == null) {\r\n      port = portRepo.getOpenPort();\r\n    } else {\r\n      portRepo.extendDuration(port.getPort());\r\n    }\r\n    portRepo.setInUse(appUser.getUserId(), port.getPort());\r\n   //Some unrelated logic\r\n  }\r\n}\r\n```\r\n\r\nThen in your filter call this service and next the super method. \r\n\r\n```java\r\n@Override\r\npublic void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authentication) throws IOException, ServletException {\r\n  this.afterAuthenticationService.onSuccessfulAuthentication(authentication);\r\n  super.successfulAuthentication(request, response, chain, authentication);    \r\n}\r\n```\r\n\r\nOr ditch this all together and write an event listener for `InteractiveAuthenticationSuccessEvent` and then run your logic there. That way you don&#39;t have to extend filters etc. and still get the desired behavior (and have it loosy coupled).\r\n\r\n```java\r\n@Component\r\n@Transactional\r\npublic class AfterAuthenticationListener {\r\n\r\n  private final UserRepo userRepo;\r\n  private final PortRepo portRepo;\r\n\r\n  public AfterAuthenticationService(UserRepo userRepo, PortRepo portRepo) {\r\n    this.userRepo=userRepo;\r\n    this.portRepo=portRepo;\r\n}\r\n\r\n  @EventListener(InteractiveAuthenticationSuccessEvent.class)\r\n  public void onSuccesfulAuthentication(InteractiveAuthenticationSuccessEvent event) {\r\n    Authentication authentication = event.getAuthentication();\r\n    User user = (User) authentication.getPrincipal();\r\n    AppUser appUser = userRepo.findByUsername(user.getUsername());\r\n\r\n    portRepo.enableExpiredPorts(LocalDateTime.now());\r\n    Port port = portRepo.checkIfUserHasPort(appUser.getUserId());\r\n    if (port == null) {\r\n      port = portRepo.getOpenPort();\r\n    } else {\r\n      portRepo.extendDuration(port.getPort());\r\n    }\r\n    portRepo.setInUse(appUser.getUserId(), port.getPort());\r\n   //Some unrelated logic\r\n  }\r\n}\r\n```\r\n\r\nWith the listener you can now omit your modified filter. ","title":"TransactionRequiredException when updating with Jpa Repository","body":"<p>The <code>successulAuthentication</code> is an internal method call so adding <code>@Transactional</code> won't help (as not passing through the proxy).</p>\n<p>The easiest is to create another class and move the logic to there and annotate that class (or the method) with <code>@Transactional</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@Transactional\npublic class AfterAuthenticationService {\n\n  private final UserRepo userRepo;\n  private final PortRepo portRepo;\n\n  public AfterAuthenticationService(UserRepo userRepo, PortRepo portRepo) {\n    this.userRepo=userRepo;\n    this.portRepo=portRepo;\n}\n\n  public void onSuccessfulAuthentication(Authentication authentication) {\n    User user = (User) authentication.getPrincipal();\n    AppUser appUser = userRepo.findByUsername(user.getUsername());\n\n    portRepo.enableExpiredPorts(LocalDateTime.now());\n    Port port = portRepo.checkIfUserHasPort(appUser.getUserId());\n    if (port == null) {\n      port = portRepo.getOpenPort();\n    } else {\n      portRepo.extendDuration(port.getPort());\n    }\n    portRepo.setInUse(appUser.getUserId(), port.getPort());\n   //Some unrelated logic\n  }\n}\n</code></pre>\n<p>Then in your filter call this service and next the super method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authentication) throws IOException, ServletException {\n  this.afterAuthenticationService.onSuccessfulAuthentication(authentication);\n  super.successfulAuthentication(request, response, chain, authentication);    \n}\n</code></pre>\n<p>Or ditch this all together and write an event listener for <code>InteractiveAuthenticationSuccessEvent</code> and then run your logic there. That way you don't have to extend filters etc. and still get the desired behavior (and have it loosy coupled).</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@Transactional\npublic class AfterAuthenticationListener {\n\n  private final UserRepo userRepo;\n  private final PortRepo portRepo;\n\n  public AfterAuthenticationService(UserRepo userRepo, PortRepo portRepo) {\n    this.userRepo=userRepo;\n    this.portRepo=portRepo;\n}\n\n  @EventListener(InteractiveAuthenticationSuccessEvent.class)\n  public void onSuccesfulAuthentication(InteractiveAuthenticationSuccessEvent event) {\n    Authentication authentication = event.getAuthentication();\n    User user = (User) authentication.getPrincipal();\n    AppUser appUser = userRepo.findByUsername(user.getUsername());\n\n    portRepo.enableExpiredPorts(LocalDateTime.now());\n    Port port = portRepo.checkIfUserHasPort(appUser.getUserId());\n    if (port == null) {\n      port = portRepo.getOpenPort();\n    } else {\n      portRepo.extendDuration(port.getPort());\n    }\n    portRepo.setInUse(appUser.getUserId(), port.getPort());\n   //Some unrelated logic\n  }\n}\n</code></pre>\n<p>With the listener you can now omit your modified filter.</p>\n"}],"owner":{"account_id":25887820,"reputation":107,"user_id":19615643,"display_name":"Grimalkin"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1612,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73321275,"answer_count":1,"score":0,"last_activity_date":1660223562,"creation_date":1660221528,"question_id":73320798,"body_markdown":"On succesfull authentication I&#39;d like to make a call to db to retrieve some additional info but I get:\r\n```\r\norg.springframework.dao.InvalidDataAccessApiUsageException: Executing an update/delete query; nested exception is javax.persistence.TransactionRequiredException: Executing an update/delete query\r\n```\r\nMy `successfulAuthentication` method:\r\n```\r\n    @Override\r\n    public void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authentication) throws IOException, ServletException {\r\n        User user = (User) authentication.getPrincipal();\r\n        AppUser appUser = userRepo.findByUsername(user.getUsername());\r\n\r\n        Port port;\r\n        portRepo.enableExpiredPorts(LocalDateTime.now());\r\n        port = portRepo.checkIfUserHasPort(appUser.getUserId());\r\n        if (port == null) {\r\n            port = portRepo.getOpenPort();\r\n        } else {\r\n            portRepo.extendDuration(port.getPort());\r\n        }\r\n        portRepo.setInUse(appUser.getUserId(), port.getPort());\r\n        //Some unrelated logic\r\n    }\r\n```\r\nRepo that I am calling:\r\n```\r\n@Repository\r\npublic interface PortRepo extends JpaRepository&lt;Port, Integer&gt; {\r\n\r\n    @Modifying\r\n    @Query(value = &quot;UPDATE Port SET active=1 WHERE expiration&lt;datetime()&quot;, nativeQuery = true)\r\n    void enableExpiredPorts(@Param(&quot;localDateTime&quot;)LocalDateTime localDateTime);\r\n\r\n    @Query(value = &quot;SELECT * FROM Port WHERE user_id=:userId&quot;, nativeQuery = true)\r\n    Port checkIfUserHasPort(@Param(&quot;userId&quot;) Long userId);\r\n\r\n    @Query(value = &quot;SELECT * FROM Port WHERE active=1 LIMIT 1&quot;, nativeQuery = true)\r\n    Port getOpenPort();\r\n\r\n    @Modifying\r\n    @Query(value = &quot;UPDATE Port SET active=0, user_id=:userId, expiration=datetime(&#39;now&#39;)  WHERE port=:port&quot;, nativeQuery = true)\r\n    void setInUse(@Param(&quot;userId&quot;) Long userId, @Param(&quot;port&quot;) int port);\r\n\r\n    @Modifying\r\n    @Query(value = &quot;UPDATE Port SET expiration=datetime(&#39;now&#39;)  WHERE port=:port&quot;, nativeQuery = true)\r\n    void extendDuration(@Param(&quot;port&quot;) int port);\r\n}\r\n```\r\nAdding `@Transactional` annotation didn&#39;t help (It was correct one from `org.springframework.transaction.annotation.Transactional`)","title":"TransactionRequiredException when updating with Jpa Repository","body":"<p>On succesfull authentication I'd like to make a call to db to retrieve some additional info but I get:</p>\n<pre><code>org.springframework.dao.InvalidDataAccessApiUsageException: Executing an update/delete query; nested exception is javax.persistence.TransactionRequiredException: Executing an update/delete query\n</code></pre>\n<p>My <code>successfulAuthentication</code> method:</p>\n<pre><code>    @Override\n    public void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authentication) throws IOException, ServletException {\n        User user = (User) authentication.getPrincipal();\n        AppUser appUser = userRepo.findByUsername(user.getUsername());\n\n        Port port;\n        portRepo.enableExpiredPorts(LocalDateTime.now());\n        port = portRepo.checkIfUserHasPort(appUser.getUserId());\n        if (port == null) {\n            port = portRepo.getOpenPort();\n        } else {\n            portRepo.extendDuration(port.getPort());\n        }\n        portRepo.setInUse(appUser.getUserId(), port.getPort());\n        //Some unrelated logic\n    }\n</code></pre>\n<p>Repo that I am calling:</p>\n<pre><code>@Repository\npublic interface PortRepo extends JpaRepository&lt;Port, Integer&gt; {\n\n    @Modifying\n    @Query(value = &quot;UPDATE Port SET active=1 WHERE expiration&lt;datetime()&quot;, nativeQuery = true)\n    void enableExpiredPorts(@Param(&quot;localDateTime&quot;)LocalDateTime localDateTime);\n\n    @Query(value = &quot;SELECT * FROM Port WHERE user_id=:userId&quot;, nativeQuery = true)\n    Port checkIfUserHasPort(@Param(&quot;userId&quot;) Long userId);\n\n    @Query(value = &quot;SELECT * FROM Port WHERE active=1 LIMIT 1&quot;, nativeQuery = true)\n    Port getOpenPort();\n\n    @Modifying\n    @Query(value = &quot;UPDATE Port SET active=0, user_id=:userId, expiration=datetime('now')  WHERE port=:port&quot;, nativeQuery = true)\n    void setInUse(@Param(&quot;userId&quot;) Long userId, @Param(&quot;port&quot;) int port);\n\n    @Modifying\n    @Query(value = &quot;UPDATE Port SET expiration=datetime('now')  WHERE port=:port&quot;, nativeQuery = true)\n    void extendDuration(@Param(&quot;port&quot;) int port);\n}\n</code></pre>\n<p>Adding <code>@Transactional</code> annotation didn't help (It was correct one from <code>org.springframework.transaction.annotation.Transactional</code>)</p>\n"},{"tags":["java","spring","spring-integration","spring-dsl"],"comments":[{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1660146891,"post_id":73309080,"comment_id":129465647,"body_markdown":"The `localFilename()` is applied for exactly a local `java.io.File`, not that `ChannelSftp.LsEntry` which your `AcceptOnceFileListFilter` stores for caching. So, it is not clear where is the clash. Would you mind to point to the code where does such a wrong comparison happen?","body":"The <code>localFilename()</code> is applied for exactly a local <code>java.io.File</code>, not that <code>ChannelSftp.LsEntry</code> which your <code>AcceptOnceFileListFilter</code> stores for caching. So, it is not clear where is the clash. Would you mind to point to the code where does such a wrong comparison happen?"},{"owner":{"account_id":2654907,"reputation":440,"user_id":2295807,"accept_rate":76,"display_name":"kacpr"},"score":0,"creation_date":1660149294,"post_id":73309080,"comment_id":129466590,"body_markdown":"I have added screenshots displaying what is happening. It is now even more perplexing as I noticed that on the 2nd polling the `seenSet` is empty","body":"I have added screenshots displaying what is happening. It is now even more perplexing as I noticed that on the 2nd polling the <code>seenSet</code> is empty"},{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":1,"creation_date":1660150917,"post_id":73309080,"comment_id":129467118,"body_markdown":"It is not a second attempt. As you see the first one is indeed a `ChannelSftp.LsEntry`, but the second one is `File`. So, this story is about different `AcceptOnceFileListFilter`. There is a `localFilter()` option which is applied on transferring the remote file to the local dir. Doesn&#39;t look like you set it, so by default it has to be a `FileSystemPersistentAcceptOnceFileListFilter`. Therefore the &quot;second attempt&quot; does not make sense. So, what Spring Integration version do you use?","body":"It is not a second attempt. As you see the first one is indeed a <code>ChannelSftp.LsEntry</code>, but the second one is <code>File</code>. So, this story is about different <code>AcceptOnceFileListFilter</code>. There is a <code>localFilter()</code> option which is applied on transferring the remote file to the local dir. Doesn&#39;t look like you set it, so by default it has to be a <code>FileSystemPersistentAcceptOnceFileListFilter</code>. Therefore the &quot;second attempt&quot; does not make sense. So, what Spring Integration version do you use?"},{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1660151050,"post_id":73309080,"comment_id":129467163,"body_markdown":"Also pay attention that you check against different instances of the `AcceptOnceFileListFilter`, so this is more confusing how the &quot;third attempt&quot; is even possible...","body":"Also pay attention that you check against different instances of the <code>AcceptOnceFileListFilter</code>, so this is more confusing how the &quot;third attempt&quot; is even possible..."},{"owner":{"account_id":2654907,"reputation":440,"user_id":2295807,"accept_rate":76,"display_name":"kacpr"},"score":0,"creation_date":1660212575,"post_id":73309080,"comment_id":129481741,"body_markdown":"That&#39;s well spotted, I am not sure why this was going to the filter, but another IntegrationFlow (monitoring local files to send to another remote location) was somehow triggering AcceptOnceFileListFilter, even though it never had it added. I&#39;ve disabled that IntegrationFlow to focus on this problem and updated screenshot - as you see now the problem is the LsEntry ends up in the seenSet every time, so there must be a problem with comparison.\nI&#39;m not sure how that&#39;s possible or how to fix it","body":"That&#39;s well spotted, I am not sure why this was going to the filter, but another IntegrationFlow (monitoring local files to send to another remote location) was somehow triggering AcceptOnceFileListFilter, even though it never had it added. I&#39;ve disabled that IntegrationFlow to focus on this problem and updated screenshot - as you see now the problem is the LsEntry ends up in the seenSet every time, so there must be a problem with comparison. I&#39;m not sure how that&#39;s possible or how to fix it"}],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660223541,"creation_date":1660223541,"answer_id":73321267,"question_id":73309080,"body_markdown":"&gt; as you see now the problem is the LsEntry ends up in the seenSet every time\r\n\r\nYes: that&#39;s the problem of the `ChannelSftp.LsEntry` and `AcceptOnceFileListFilter`. It doesn&#39;t implement a `hashCode()` method, so every single new instance is different from another even if the target file is the same. For this purpose we have an `SftpPersistentAcceptOnceFileListFilter` which really compares file names and their `getAttrs().getMTime()`. See more info in docs: https://docs.spring.io/spring-integration/docs/current/reference/html/file.html#remote-persistent-flf\r\n\r\n&gt; (monitoring local files to send to another remote location) was somehow triggering `AcceptOnceFileListFilter`\r\n\r\nYou said yourself &quot;monitoring&quot;, so you probably use over there a `Files.inboundAdapter()`, which really may be configured with the mentioned `AcceptOnceFileListFilter`.","title":"AcceptOnceFileListFilter and renaming a file in Spring Integration","body":"<blockquote>\n<p>as you see now the problem is the LsEntry ends up in the seenSet every time</p>\n</blockquote>\n<p>Yes: that's the problem of the <code>ChannelSftp.LsEntry</code> and <code>AcceptOnceFileListFilter</code>. It doesn't implement a <code>hashCode()</code> method, so every single new instance is different from another even if the target file is the same. For this purpose we have an <code>SftpPersistentAcceptOnceFileListFilter</code> which really compares file names and their <code>getAttrs().getMTime()</code>. See more info in docs: <a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/file.html#remote-persistent-flf\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-integration/docs/current/reference/html/file.html#remote-persistent-flf</a></p>\n<blockquote>\n<p>(monitoring local files to send to another remote location) was somehow triggering <code>AcceptOnceFileListFilter</code></p>\n</blockquote>\n<p>You said yourself &quot;monitoring&quot;, so you probably use over there a <code>Files.inboundAdapter()</code>, which really may be configured with the mentioned <code>AcceptOnceFileListFilter</code>.</p>\n"}],"owner":{"account_id":2654907,"reputation":440,"user_id":2295807,"accept_rate":76,"display_name":"kacpr"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":281,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660223541,"creation_date":1660145905,"question_id":73309080,"body_markdown":"I am writing an IntegrationFlow for SFTP, to copy only the latest file in remote directory, to local. I also want to avoid copying the same file twice so I added an `AcceptOnceFileListFilter`.\r\nUnfortunately the remote files come in form of `IGNORED_STRING_1008202211:22:33.csv`, as you see there is a date-time stamp, based on which I determine the latest file, but the colon symbol is not accepted for filenames in Windows, so I had to apply a function to rename it.\r\nNow this messes with the `AcceptOnceFileListFilter`, I&#39;ve debugged and the original file name is checked once, then it is compared to the modified one (without colons) - so it always gets downloaded again.\r\n\r\n```\r\nSftp.inboundAdapter(sftpSf)\r\n    .filter(new ChainFileListFilter&lt;&gt;() {{\r\n        addFilter(new LatestFileOnly());\r\n        addFilter(new AcceptOnceFileListFilter&lt;&gt;());\r\n    }})\r\n    .localFilename(new Function&lt;String, String&gt;() {\r\n        @Override\r\n        public String apply(String s) {\r\n            return s.replaceAll(&quot;:&quot;, &quot;&quot;);\r\n        }\r\n    })\r\n    .autoCreateLocalDirectory(true)\r\n    .remoteDirectory(readRemoteDirectory)\r\n    .deleteRemoteFiles(false)\r\n    .preserveTimestamp(true)\r\n    .localDirectory(new File(localDirectory));\r\n```\r\n\r\nand the filter to find the latest file, from its filename:\r\n\r\n```\r\npublic class LatestFileOnly implements FileListFilter&lt;ChannelSftp.LsEntry&gt; {\r\n\r\n    @Override\r\n    public List&lt;ChannelSftp.LsEntry&gt; filterFiles(ChannelSftp.LsEntry[] files) {\r\n        return Arrays.stream(files)\r\n            .max(byParsedDate)\r\n            .map(Collections::singletonList)\r\n            .orElse(Collections.emptyList());\r\n    }\r\n\r\n    public final Comparator&lt;ChannelSftp.LsEntry&gt; byParsedDate = Comparator.comparing(\r\n            (ChannelSftp.LsEntry o) -&gt; {\r\n                        Matcher m = pattern.matcher(o.getFilename());\r\n                        if (m.find()) {\r\n                            return LocalDateTime.parse(m.group(0), DateTimeFormatter.ofPattern(&quot;ddMMyyyyHH:mm:ss&quot;));\r\n                        }\r\n                        return LocalDateTime.MIN;\r\n            });\r\n}\r\n```\r\n\r\nPolling after a couple of re-tries:\r\n[![file ignored by the filter][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Szo9u.png","title":"AcceptOnceFileListFilter and renaming a file in Spring Integration","body":"<p>I am writing an IntegrationFlow for SFTP, to copy only the latest file in remote directory, to local. I also want to avoid copying the same file twice so I added an <code>AcceptOnceFileListFilter</code>.\nUnfortunately the remote files come in form of <code>IGNORED_STRING_1008202211:22:33.csv</code>, as you see there is a date-time stamp, based on which I determine the latest file, but the colon symbol is not accepted for filenames in Windows, so I had to apply a function to rename it.\nNow this messes with the <code>AcceptOnceFileListFilter</code>, I've debugged and the original file name is checked once, then it is compared to the modified one (without colons) - so it always gets downloaded again.</p>\n<pre><code>Sftp.inboundAdapter(sftpSf)\n    .filter(new ChainFileListFilter&lt;&gt;() {{\n        addFilter(new LatestFileOnly());\n        addFilter(new AcceptOnceFileListFilter&lt;&gt;());\n    }})\n    .localFilename(new Function&lt;String, String&gt;() {\n        @Override\n        public String apply(String s) {\n            return s.replaceAll(&quot;:&quot;, &quot;&quot;);\n        }\n    })\n    .autoCreateLocalDirectory(true)\n    .remoteDirectory(readRemoteDirectory)\n    .deleteRemoteFiles(false)\n    .preserveTimestamp(true)\n    .localDirectory(new File(localDirectory));\n</code></pre>\n<p>and the filter to find the latest file, from its filename:</p>\n<pre><code>public class LatestFileOnly implements FileListFilter&lt;ChannelSftp.LsEntry&gt; {\n\n    @Override\n    public List&lt;ChannelSftp.LsEntry&gt; filterFiles(ChannelSftp.LsEntry[] files) {\n        return Arrays.stream(files)\n            .max(byParsedDate)\n            .map(Collections::singletonList)\n            .orElse(Collections.emptyList());\n    }\n\n    public final Comparator&lt;ChannelSftp.LsEntry&gt; byParsedDate = Comparator.comparing(\n            (ChannelSftp.LsEntry o) -&gt; {\n                        Matcher m = pattern.matcher(o.getFilename());\n                        if (m.find()) {\n                            return LocalDateTime.parse(m.group(0), DateTimeFormatter.ofPattern(&quot;ddMMyyyyHH:mm:ss&quot;));\n                        }\n                        return LocalDateTime.MIN;\n            });\n}\n</code></pre>\n<p>Polling after a couple of re-tries:\n<a href=\"https://i.stack.imgur.com/Szo9u.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Szo9u.png\" alt=\"file ignored by the filter\" /></a></p>\n"},{"tags":["java","android","android-studio","android-dark-theme"],"comments":[{"owner":{"account_id":12518217,"reputation":649,"user_id":9110576,"display_name":"Haseeb Hassan Asif"},"score":0,"creation_date":1660209443,"post_id":73317964,"comment_id":129480660,"body_markdown":"please provide some details as to what have you tried, what is compulsory in your code and what is it you want to change. If you just want a review of your code, please post it at https://codereview.stackexchange.com/","body":"please provide some details as to what have you tried, what is compulsory in your code and what is it you want to change. If you just want a review of your code, please post it at <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}],"answers":[{"tags":[],"owner":{"account_id":12827704,"reputation":41,"user_id":9280080,"display_name":"YasserElgammal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660223400,"creation_date":1660213299,"answer_id":73319081,"question_id":73317964,"body_markdown":"For example, you can add [MaterialAlertDialogBuilder][1] when the user press on [Dark Theme]\r\nand choose one from [ Day, DarkNight or System Default ]\r\n\r\nAnd here is the code using [AppCompatDelegate][2] to control switching between different themes:\r\n\r\nLight / Day:\r\n\r\n    AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO)\r\n\r\nNight Mode:\r\n\r\n    AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_YES)\r\n\r\nSystem Default:\r\n\r\n    AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_FOLLOW_SYSTEM)\r\n\r\nDon&#39;t forget which user choose.. for example to Shared Preference or any offline storage, to restore theme prefered to user when open app again.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/com/google/android/material/dialog/MaterialAlertDialogBuilder\r\n  [2]: https://developer.android.com/reference/androidx/appcompat/app/AppCompatDelegate","title":"How do I add a dark mode option in a ListView?","body":"<p>For example, you can add <a href=\"https://developer.android.com/reference/com/google/android/material/dialog/MaterialAlertDialogBuilder\" rel=\"nofollow noreferrer\">MaterialAlertDialogBuilder</a> when the user press on [Dark Theme]\nand choose one from [ Day, DarkNight or System Default ]</p>\n<p>And here is the code using <a href=\"https://developer.android.com/reference/androidx/appcompat/app/AppCompatDelegate\" rel=\"nofollow noreferrer\">AppCompatDelegate</a> to control switching between different themes:</p>\n<p>Light / Day:</p>\n<pre><code>AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO)\n</code></pre>\n<p>Night Mode:</p>\n<pre><code>AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_YES)\n</code></pre>\n<p>System Default:</p>\n<pre><code>AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_FOLLOW_SYSTEM)\n</code></pre>\n<p>Don't forget which user choose.. for example to Shared Preference or any offline storage, to restore theme prefered to user when open app again.</p>\n"}],"owner":{"account_id":22071645,"reputation":73,"user_id":16332555,"display_name":"MASAN"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":222,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73319081,"answer_count":1,"score":0,"last_activity_date":1660223400,"creation_date":1660208335,"question_id":73317964,"body_markdown":"I have a ListView with the app&#39;s more technical details and I want to implement a dark theme manual switch like this:\r\n[![enter image description here][1]][1]\r\n\r\nIf it helps, here&#39;s the OnClickListener I use:\r\n\r\n```\r\naboutListView.setOnItemClickListener((parent, view, i, id) -&gt; {\r\n    if (i == 0) {\r\n       ConnectivityManager connectivityManager1 = (ConnectivityManager) getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        NetworkInfo networkInfo1 = connectivityManager1.getActiveNetworkInfo();\r\n        if (networkInfo1 == null || !networkInfo1.isConnected() || !networkInfo1.isAvailable()) {\r\n            Intent intent = new Intent(MainList.this, no_network.class);\r\n            startActivity(intent);\r\n            finish();\r\n\r\n        } else {\r\n            String url = &quot;https://example.com/&quot;;\r\n            CustomTabsIntent.Builder builder = new CustomTabsIntent.Builder()\r\n                    .setShareState(CustomTabsIntent.SHARE_STATE_OFF);\r\n            CustomTabsIntent customTabsIntent = builder.build();\r\n            customTabsIntent.launchUrl(this, Uri.parse(url));\r\n        }\r\n\r\n    } else if (i == 1) {\r\n        ConnectivityManager connectivityManager1 = (ConnectivityManager) getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        NetworkInfo networkInfo1 = connectivityManager1.getActiveNetworkInfo();\r\n        if (networkInfo1 == null || !networkInfo1.isConnected() || !networkInfo1.isAvailable()) {\r\n            Intent intent = new Intent(MainList.this, no_network.class);\r\n            startActivity(intent);\r\n            finish();\r\n        } else {\r\n            String url = &quot;https://example.com/&quot;;\r\n            CustomTabsIntent.Builder builder = new CustomTabsIntent.Builder()\r\n                    .setShareState(CustomTabsIntent.SHARE_STATE_OFF);\r\n            CustomTabsIntent customTabsIntent = builder.build();\r\n            customTabsIntent.launchUrl(this, Uri.parse(url));\r\n        }\r\n    }\r\n\r\n});\r\n```\r\n\r\nIs there a simple way to do it?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Hpt6C.jpg","title":"How do I add a dark mode option in a ListView?","body":"<p>I have a ListView with the app's more technical details and I want to implement a dark theme manual switch like this:\n<a href=\"https://i.stack.imgur.com/Hpt6C.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Hpt6C.jpg\" alt=\"enter image description here\" /></a></p>\n<p>If it helps, here's the OnClickListener I use:</p>\n<pre><code>aboutListView.setOnItemClickListener((parent, view, i, id) -&gt; {\n    if (i == 0) {\n       ConnectivityManager connectivityManager1 = (ConnectivityManager) getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);\n        NetworkInfo networkInfo1 = connectivityManager1.getActiveNetworkInfo();\n        if (networkInfo1 == null || !networkInfo1.isConnected() || !networkInfo1.isAvailable()) {\n            Intent intent = new Intent(MainList.this, no_network.class);\n            startActivity(intent);\n            finish();\n\n        } else {\n            String url = &quot;https://example.com/&quot;;\n            CustomTabsIntent.Builder builder = new CustomTabsIntent.Builder()\n                    .setShareState(CustomTabsIntent.SHARE_STATE_OFF);\n            CustomTabsIntent customTabsIntent = builder.build();\n            customTabsIntent.launchUrl(this, Uri.parse(url));\n        }\n\n    } else if (i == 1) {\n        ConnectivityManager connectivityManager1 = (ConnectivityManager) getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);\n        NetworkInfo networkInfo1 = connectivityManager1.getActiveNetworkInfo();\n        if (networkInfo1 == null || !networkInfo1.isConnected() || !networkInfo1.isAvailable()) {\n            Intent intent = new Intent(MainList.this, no_network.class);\n            startActivity(intent);\n            finish();\n        } else {\n            String url = &quot;https://example.com/&quot;;\n            CustomTabsIntent.Builder builder = new CustomTabsIntent.Builder()\n                    .setShareState(CustomTabsIntent.SHARE_STATE_OFF);\n            CustomTabsIntent customTabsIntent = builder.build();\n            customTabsIntent.launchUrl(this, Uri.parse(url));\n        }\n    }\n\n});\n</code></pre>\n<p>Is there a simple way to do it?</p>\n"},{"tags":["java","velocity","date-formatting"],"comments":[{"owner":{"account_id":11452482,"reputation":345,"user_id":8394510,"display_name":"Tom"},"score":0,"creation_date":1502269306,"post_id":45418747,"comment_id":78131047,"body_markdown":"My issue was that the output is the &quot;java.util...&quot; bit rather than a formatted date, simply adding `$date.format(&#39;d MMMM yyyy&#39;,$rendate_14)` (or similar) resolved the matter!","body":"My issue was that the output is the &quot;java.util...&quot; bit rather than a formatted date, simply adding <code>$date.format(&#39;d MMMM yyyy&#39;,$rendate_14)</code> (or similar) resolved the matter!"}],"answers":[{"tags":[],"owner":{"account_id":5952929,"reputation":8862,"user_id":4680436,"accept_rate":50,"display_name":"aristotll"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1501948175,"creation_date":1501948175,"answer_id":45523747,"question_id":45418747,"body_markdown":"It is very simple:\r\n[`java.util.Calendar#add` is a `void` method][1],of course print nothing.\r\n\r\nTry the following code instead:\r\n\r\n    #set ($rendate_14 = $date.toCalendar(${POLSDATE}))\r\n    $rendate_14.add(5,14)\r\n    $rendate_14\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#add(int,%20int)","title":"Velocity - add days to date string using date.tocalender function","body":"<p>It is very simple:\n<a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#add(int,%20int)\" rel=\"nofollow noreferrer\"><code>java.util.Calendar#add</code> is a <code>void</code> method</a>,of course print nothing.</p>\n\n<p>Try the following code instead:</p>\n\n<pre><code>#set ($rendate_14 = $date.toCalendar(${POLSDATE}))\n$rendate_14.add(5,14)\n$rendate_14\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13167484,"reputation":1,"user_id":9511081,"display_name":"Dashrath Choudhary"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660223358,"creation_date":1660223204,"answer_id":73321192,"question_id":45418747,"body_markdown":"        Try this\r\n        \r\n    #set($date = $date.toDate(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&quot;,$date))   \r\n    #set($currDateCal=$convert.toCalendar($date))\r\n    #set($temp=$currDateCal.add(5,2))    ## Adding 2 days \r\n    #set($temp=$document.put(&quot;CurrentDatePlus2Days&quot;, $date.format(&quot;YYYYMMdd&quot;,$currDateCal)))\r\n    ${JSONUtils.mapToJson($document.getMap())}","title":"Velocity - add days to date string using date.tocalender function","body":"<pre><code>    Try this\n    \n#set($date = $date.toDate(&quot;yyyy-MM-dd'T'HH:mm:ss.SSS&quot;,$date))   \n#set($currDateCal=$convert.toCalendar($date))\n#set($temp=$currDateCal.add(5,2))    ## Adding 2 days \n#set($temp=$document.put(&quot;CurrentDatePlus2Days&quot;, $date.format(&quot;YYYYMMdd&quot;,$currDateCal)))\n${JSONUtils.mapToJson($document.getMap())}\n</code></pre>\n"}],"owner":{"account_id":11452482,"reputation":345,"user_id":8394510,"display_name":"Tom"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2178,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660223358,"creation_date":1501511612,"question_id":45418747,"body_markdown":"I&#39;m using Velocity (integrated within our company&#39;s software) to code email templates, however I&#39;m struggling to find a solution for the above.\r\n\r\nThe software stores a policy start date as the ${POLSDATE} variable, however I need to be able to add 14 days to this date, I&#39;ve tried the below (among several other variations):\r\n\r\n    #set ($rendate_14 = $date.toCalendar(${POLSDATE}))\r\n    $rendate_14.add(5,14)\r\n\r\n&quot;$rendate_14&quot; without the addition prints a comma separated array of data (the date in this example is 01/08/17):\r\n\r\n&gt;java.util.GregorianCalendar[time=1501585201000,areFieldsSet=true,areAllFieldsSet=true,lenient=true,zone=sun.util.calendar.ZoneInfo[id=&quot;Europe/London&quot;,offset=0,dstSavings=3600000,useDaylight=true,transitions=242,lastRule=java.util.SimpleTimeZone[id=Europe/London,offset=0,dstSavings=3600000,useDaylight=true,startYear=0,startMode=2,startMonth=2,startDay=-1,startDayOfWeek=1,startTime=3600000,startTimeMode=2,endMode=2,endMonth=9,endDay=-1,endDayOfWeek=1,endTime=3600000,endTimeMode=2]],firstDayOfWeek=2,minimalDaysInFirstWeek=4,ERA=1,YEAR=2017,MONTH=7,WEEK_OF_YEAR=31,WEEK_OF_MONTH=1,DAY_OF_MONTH=1,DAY_OF_YEAR=213,DAY_OF_WEEK=3,DAY_OF_WEEK_IN_MONTH=1,AM_PM=1,HOUR=0,HOUR_OF_DAY=12,MINUTE=0,SECOND=1,MILLISECOND=0,ZONE_OFFSET=0,DST_OFFSET=3600000]\r\n\r\n...however with the addition `.add(5,14)` it doesn&#39;t print any information at all.\r\n\r\nAny ideas?","title":"Velocity - add days to date string using date.tocalender function","body":"<p>I'm using Velocity (integrated within our company's software) to code email templates, however I'm struggling to find a solution for the above.</p>\n\n<p>The software stores a policy start date as the ${POLSDATE} variable, however I need to be able to add 14 days to this date, I've tried the below (among several other variations):</p>\n\n<pre><code>#set ($rendate_14 = $date.toCalendar(${POLSDATE}))\n$rendate_14.add(5,14)\n</code></pre>\n\n<p>\"$rendate_14\" without the addition prints a comma separated array of data (the date in this example is 01/08/17):</p>\n\n<blockquote>\n  <p>java.util.GregorianCalendar[time=1501585201000,areFieldsSet=true,areAllFieldsSet=true,lenient=true,zone=sun.util.calendar.ZoneInfo[id=\"Europe/London\",offset=0,dstSavings=3600000,useDaylight=true,transitions=242,lastRule=java.util.SimpleTimeZone[id=Europe/London,offset=0,dstSavings=3600000,useDaylight=true,startYear=0,startMode=2,startMonth=2,startDay=-1,startDayOfWeek=1,startTime=3600000,startTimeMode=2,endMode=2,endMonth=9,endDay=-1,endDayOfWeek=1,endTime=3600000,endTimeMode=2]],firstDayOfWeek=2,minimalDaysInFirstWeek=4,ERA=1,YEAR=2017,MONTH=7,WEEK_OF_YEAR=31,WEEK_OF_MONTH=1,DAY_OF_MONTH=1,DAY_OF_YEAR=213,DAY_OF_WEEK=3,DAY_OF_WEEK_IN_MONTH=1,AM_PM=1,HOUR=0,HOUR_OF_DAY=12,MINUTE=0,SECOND=1,MILLISECOND=0,ZONE_OFFSET=0,DST_OFFSET=3600000]</p>\n</blockquote>\n\n<p>...however with the addition <code>.add(5,14)</code> it doesn't print any information at all.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["java","recursion"],"comments":[{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":2,"creation_date":1660218979,"post_id":73320153,"comment_id":129483963,"body_markdown":"This happens because you try to modify the list that you are iterating through. By using another list you prevent this issue.","body":"This happens because you try to modify the list that you are iterating through. By using another list you prevent this issue."}],"answers":[{"tags":[],"owner":{"account_id":23568015,"reputation":136,"user_id":17608510,"display_name":"John"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660223181,"creation_date":1660223181,"answer_id":73321185,"question_id":73320153,"body_markdown":"The ConcurrentModificationException is an Exception, thrown when you try to modify a list while iterating through it. You should not iterate over a list an remove objects during this process.\r\n\r\n**I will explain several ways to avoid this exception:** \r\n\r\n1. Don&#39;t remove during iteration. That is exactly what you&#39;ve done.\r\n\r\n2. Use a Iterator directly, this will prevent getting an Exception.\r\n\r\n3. Make use of &quot;removeIf()&quot;. You can remove objects from a list, using functional programming (Lambda) inside the method call.\r\n\r\n4. You can filter the List, using Streams. This is more advanced and actually not really necessary. But you will not face a ConcurrentModificationException doing this. \r\n\r\nFrom all these ways, I use Iterators the most, but I think you should try and test. Every way has its own usecase. \r\n","title":"Java - Recursion to get children from objects only works with extra list","body":"<p>The ConcurrentModificationException is an Exception, thrown when you try to modify a list while iterating through it. You should not iterate over a list an remove objects during this process.</p>\n<p><strong>I will explain several ways to avoid this exception:</strong></p>\n<ol>\n<li><p>Don't remove during iteration. That is exactly what you've done.</p>\n</li>\n<li><p>Use a Iterator directly, this will prevent getting an Exception.</p>\n</li>\n<li><p>Make use of &quot;removeIf()&quot;. You can remove objects from a list, using functional programming (Lambda) inside the method call.</p>\n</li>\n<li><p>You can filter the List, using Streams. This is more advanced and actually not really necessary. But you will not face a ConcurrentModificationException doing this.</p>\n</li>\n</ol>\n<p>From all these ways, I use Iterators the most, but I think you should try and test. Every way has its own usecase.</p>\n"}],"owner":{"account_id":25988170,"reputation":37,"user_id":19700822,"display_name":"malbo "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":144,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73321185,"answer_count":1,"score":0,"last_activity_date":1660223181,"creation_date":1660218490,"question_id":73320153,"body_markdown":"I&#39;m using a recursive method to get all children from an object.\r\n\r\nClass for the object:\r\n\r\n    class Mandant {\r\n        private String id;\r\n        private String parentId;\r\n    \r\n        public Mandant(String id, String parentId) {\r\n            this.id = id;\r\n            this.parentId = parentId;\r\n        }\r\nplus getter and setter.\r\n\r\nThe method:\r\n\r\n    private static List&lt;Mandant&gt; getAllChildren(Mandant mandant, List&lt;Mandant&gt; allMandants) {\r\n            List&lt;Mandant&gt; result = new ArrayList&lt;&gt;();\r\n            for (Mandant man: allMandants)\r\n                if (man.getParentId() != null &amp;&amp; man.getParentId().equals(mandant.getId())) {\r\n                    result.add(man);\r\n            }\r\n            for (Mandant man: result) {\r\n                result.addAll(getAllChildren(man, allMandants));\r\n            }\r\n            return result;\r\n        }\r\n\r\nThis throws an exception:\r\n\r\n&gt; Exception in thread &quot;main&quot; java.util.ConcurrentModificationException\r\n&gt; \tat\r\n&gt; java.base/java.util.ArrayList$Itr.checkForComodification(ArrayList.java:1013)\r\n&gt; \tat java.base/java.util.ArrayList$Itr.next(ArrayList.java:967)\r\n\r\nBut if I&#39;m using an extra list for storing the recursive call it works:\r\n\r\n    private static List&lt;Mandant&gt; getAllChildren(Mandant mandant, List&lt;Mandant&gt; allMandants) {\r\n                List&lt;Mandant&gt; result = new ArrayList&lt;&gt;();\r\n                for (Mandant man: allMandants)\r\n                    if (man.getParentId() != null &amp;&amp; man.getParentId().equals(mandant.getId())) {\r\n                        result.add(man);\r\n                }\r\n                List&lt;Mandant&gt; lowerChildren = new ArrayList&lt;&gt;();\r\n                for (Mandant man: result) {\r\n                    lowerChildren.addAll(getAllChildren(man, allMandants));\r\n                }\r\n                result.addAll(lowerChildren);\r\n                return result;\r\n            }\r\n\r\nDoes anyone know why?\r\n","title":"Java - Recursion to get children from objects only works with extra list","body":"<p>I'm using a recursive method to get all children from an object.</p>\n<p>Class for the object:</p>\n<pre><code>class Mandant {\n    private String id;\n    private String parentId;\n\n    public Mandant(String id, String parentId) {\n        this.id = id;\n        this.parentId = parentId;\n    }\n</code></pre>\n<p>plus getter and setter.</p>\n<p>The method:</p>\n<pre><code>private static List&lt;Mandant&gt; getAllChildren(Mandant mandant, List&lt;Mandant&gt; allMandants) {\n        List&lt;Mandant&gt; result = new ArrayList&lt;&gt;();\n        for (Mandant man: allMandants)\n            if (man.getParentId() != null &amp;&amp; man.getParentId().equals(mandant.getId())) {\n                result.add(man);\n        }\n        for (Mandant man: result) {\n            result.addAll(getAllChildren(man, allMandants));\n        }\n        return result;\n    }\n</code></pre>\n<p>This throws an exception:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.util.ConcurrentModificationException\nat\njava.base/java.util.ArrayList$Itr.checkForComodification(ArrayList.java:1013)\nat java.base/java.util.ArrayList$Itr.next(ArrayList.java:967)</p>\n</blockquote>\n<p>But if I'm using an extra list for storing the recursive call it works:</p>\n<pre><code>private static List&lt;Mandant&gt; getAllChildren(Mandant mandant, List&lt;Mandant&gt; allMandants) {\n            List&lt;Mandant&gt; result = new ArrayList&lt;&gt;();\n            for (Mandant man: allMandants)\n                if (man.getParentId() != null &amp;&amp; man.getParentId().equals(mandant.getId())) {\n                    result.add(man);\n            }\n            List&lt;Mandant&gt; lowerChildren = new ArrayList&lt;&gt;();\n            for (Mandant man: result) {\n                lowerChildren.addAll(getAllChildren(man, allMandants));\n            }\n            result.addAll(lowerChildren);\n            return result;\n        }\n</code></pre>\n<p>Does anyone know why?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":9847667,"reputation":29054,"user_id":7294647,"accept_rate":67,"display_name":"Jacob G."},"score":1,"creation_date":1593721002,"post_id":62704376,"comment_id":110887130,"body_markdown":"I recommend stepping through your code when `B` only contains positive integers, or if `B` only contains a single element.","body":"I recommend stepping through your code when <code>B</code> only contains positive integers, or if <code>B</code> only contains a single element."},{"owner":{"account_id":303087,"reputation":8621,"user_id":611819,"accept_rate":100,"display_name":"dnault"},"score":0,"creation_date":1593721422,"post_id":62704376,"comment_id":110887289,"body_markdown":"And remember that array indexes start at zero.","body":"And remember that array indexes start at zero."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1593722683,"post_id":62704376,"comment_id":110887768,"body_markdown":"Just set ans to `B[0]` and not `0` and ensure you&#39;re indexing by `i` and not &#39;I`.  And please don;t worry about using streams as you won;t learn the basics of how stuff works.","body":"Just set ans to <code>B[0]</code> and not <code>0</code> and ensure you&#39;re indexing by <code>i</code> and not &#39;I`.  And please don;t worry about using streams as you won;t learn the basics of how stuff works."}],"answers":[{"tags":[],"owner":{"account_id":4608562,"reputation":1127,"user_id":3737355,"accept_rate":45,"display_name":"Debapriya Biswas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1593721441,"creation_date":1593721441,"answer_id":62704484,"question_id":62704376,"body_markdown":"Arrays are 0th based index in Java so start your for loop with i=0\r\n\r\n    class Test {\r\n        int test(int[] B) {\r\n            int ans = Integer.MAX_VALUE;\r\n            for (int i = 0; i &lt; B.length; i++) {\r\n                if (ans &gt; B[i]) {\r\n                    ans = B[i];\r\n                }\r\n            }\r\n            return ans;\r\n        }\r\n    }","title":"Java - Returning the smallest element of the given non-empty array","body":"<p>Arrays are 0th based index in Java so start your for loop with i=0</p>\n<pre><code>class Test {\n    int test(int[] B) {\n        int ans = Integer.MAX_VALUE;\n        for (int i = 0; i &lt; B.length; i++) {\n            if (ans &gt; B[i]) {\n                ans = B[i];\n            }\n        }\n        return ans;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8907026,"reputation":2184,"user_id":6648533,"display_name":"fishstick"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593721451,"creation_date":1593721451,"answer_id":62704488,"question_id":62704376,"body_markdown":"Here is an example that your above code will fail\r\n```\r\nInput: B = [1,2,3,4,5]\r\nExpected Output: 1\r\nYour Output: 0\r\n```\r\nThe root cause is that the initial value of `ans` is 0. Set it to `1001` (or any other int value that is greater than the maximum value of the range) **AND** traverse from the first element of the array instead of the second one would do the trick.","title":"Java - Returning the smallest element of the given non-empty array","body":"<p>Here is an example that your above code will fail</p>\n<pre><code>Input: B = [1,2,3,4,5]\nExpected Output: 1\nYour Output: 0\n</code></pre>\n<p>The root cause is that the initial value of <code>ans</code> is 0. Set it to <code>1001</code> (or any other int value that is greater than the maximum value of the range) <strong>AND</strong> traverse from the first element of the array instead of the second one would do the trick.</p>\n"},{"tags":[],"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1593721471,"creation_date":1593721471,"answer_id":62704499,"question_id":62704376,"body_markdown":"There are two problems in your code: One is that you set `ans` to 0 in initialization. The second is that you start from index 1 rather than index 0, so you may be missing values that way.\r\n\r\nHappily, these two problems can be solved with one solution: \r\n\r\n    class Test {\r\n        int test(int[] B) {\r\n            int ans = B[0]; // use the first element of the array as the start value for ans. \r\n            //Doing that, you don&#39;t need to change your loop\r\n            for (int i = 1; i &lt; B.length; i++) {\r\n                if (ans &gt; B[i]) {\r\n                    ans = B[i];\r\n                }\r\n            }\r\n            return ans;\r\n        }\r\n    }","title":"Java - Returning the smallest element of the given non-empty array","body":"<p>There are two problems in your code: One is that you set <code>ans</code> to 0 in initialization. The second is that you start from index 1 rather than index 0, so you may be missing values that way.</p>\n<p>Happily, these two problems can be solved with one solution:</p>\n<pre><code>class Test {\n    int test(int[] B) {\n        int ans = B[0]; // use the first element of the array as the start value for ans. \n        //Doing that, you don't need to change your loop\n        for (int i = 1; i &lt; B.length; i++) {\n            if (ans &gt; B[i]) {\n                ans = B[i];\n            }\n        }\n        return ans;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593721979,"creation_date":1593721647,"answer_id":62704541,"question_id":62704376,"body_markdown":"You are not considering the first element of the array. Either set `ans` to that or start looping from index `0` and set ans to `Integer.MAX_VALUE` (which will also work for an empty array).\r\n\r\n    int test(int[] B) {\r\n        int ans = Integer.MAX_VALUE;\r\n        for (int i = 0; i &lt; B.length; i++) {\r\n            if (ans &gt; B[I]) {\r\n                ans = B[i];\r\n            }\r\n        }\r\n        return ans;\r\n    }\r\n\r\nFor a shorter solution, you can use `IntStream.min`.\r\n\r\n```\r\nint test(int[] B){\r\n    return Arrays.stream(B).min().orElse(Integer.MAX_VALUE);\r\n    //return minimum or Integer.MAX_VALUE if the array is empty\r\n}\r\n```","title":"Java - Returning the smallest element of the given non-empty array","body":"<p>You are not considering the first element of the array. Either set <code>ans</code> to that or start looping from index <code>0</code> and set ans to <code>Integer.MAX_VALUE</code> (which will also work for an empty array).</p>\n<pre><code>int test(int[] B) {\n    int ans = Integer.MAX_VALUE;\n    for (int i = 0; i &lt; B.length; i++) {\n        if (ans &gt; B[I]) {\n            ans = B[i];\n        }\n    }\n    return ans;\n}\n</code></pre>\n<p>For a shorter solution, you can use <code>IntStream.min</code>.</p>\n<pre><code>int test(int[] B){\n    return Arrays.stream(B).min().orElse(Integer.MAX_VALUE);\n    //return minimum or Integer.MAX_VALUE if the array is empty\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6302434,"reputation":5409,"user_id":4896651,"accept_rate":75,"display_name":"Shadov"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1593722596,"creation_date":1593722596,"answer_id":62704744,"question_id":62704376,"body_markdown":"Of course there is a bug, even more than one. There will always be bugs if you try to do things in a complex way, this is a perfect example of accidental complexity. What you are trying to do here is not obvious from this code at first glance, I have to look into it, analyze it and think on it for a while.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\nLook at something like this:\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    int findMinimum(int[] array) {\r\n        return IntStream.of(array).min().getAsInt();\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n 1. I can immediately see what this method does - the `min()` just jumps at me\r\n\r\n 2. if it compiles then there is a big chance it works, hard to make a mistake here\r\n\r\n 3. I can easy handle the case of array being empty - I added `getAsInt` at the end, but without it I would have an `OptionalInt` - it&#39;s just a good practice to handle such edge cases, trying to find something in an empty array is not that uncommon\r\n\r\n 4. easy to handle similiar cases - finding `maximum` (`max()`) or `average` (`average()`) and many more\r\n\r\nNote: this is a &#39;good practice&#39; answer, since there already are answers that answer the problem here - maybe someone will benefit","title":"Java - Returning the smallest element of the given non-empty array","body":"<p>Of course there is a bug, even more than one. There will always be bugs if you try to do things in a complex way, this is a perfect example of accidental complexity. What you are trying to do here is not obvious from this code at first glance, I have to look into it, analyze it and think on it for a while.</p>\n<p>Look at something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int findMinimum(int[] array) {\n    return IntStream.of(array).min().getAsInt();\n}\n</code></pre>\n<ol>\n<li><p>I can immediately see what this method does - the <code>min()</code> just jumps at me</p>\n</li>\n<li><p>if it compiles then there is a big chance it works, hard to make a mistake here</p>\n</li>\n<li><p>I can easy handle the case of array being empty - I added <code>getAsInt</code> at the end, but without it I would have an <code>OptionalInt</code> - it's just a good practice to handle such edge cases, trying to find something in an empty array is not that uncommon</p>\n</li>\n<li><p>easy to handle similiar cases - finding <code>maximum</code> (<code>max()</code>) or <code>average</code> (<code>average()</code>) and many more</p>\n</li>\n</ol>\n<p>Note: this is a 'good practice' answer, since there already are answers that answer the problem here - maybe someone will benefit</p>\n"},{"tags":[],"owner":{"account_id":14200942,"reputation":21,"user_id":10258865,"display_name":"Sllie Dube"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1593725626,"creation_date":1593725626,"answer_id":62705366,"question_id":62704376,"body_markdown":"The cause of your bug is because you&#39;re setting the ans variable to 0, instead of setting it to the maximum integer value ( MAX_VALUE )  as indicated by most solutions above : \r\n\r\n    int test(int[] B) {\r\n        int ans = Integer.MAX_VALUE;\r\n        for (int i = 0; i &lt; B.length; i++) {\r\n            if (ans &gt; B[I]) {\r\n                ans = B[i];\r\n            }\r\n        }\r\n        return ans;\r\n    }\r\n\r\nYour solution will only work if the given array consists of at-least 1 non-positive element. Once you have an Array with all positive elements, you solution will always return a 0 because no element in an array will ever be less than your initially assumed minimum which is zero in your case.  \r\n\r\n**Alternatively to using streams :** you can sort the Array first and get the first element, assuming it will be sorted in ascending order:\r\n\r\n    int test(int[] B) {\r\n        Arrays.sort(B); // Sorts the array in ascending order\r\n        return B[0];\r\n    }\r\n\r\n","title":"Java - Returning the smallest element of the given non-empty array","body":"<p>The cause of your bug is because you're setting the ans variable to 0, instead of setting it to the maximum integer value ( MAX_VALUE )  as indicated by most solutions above :</p>\n<pre><code>int test(int[] B) {\n    int ans = Integer.MAX_VALUE;\n    for (int i = 0; i &lt; B.length; i++) {\n        if (ans &gt; B[I]) {\n            ans = B[i];\n        }\n    }\n    return ans;\n}\n</code></pre>\n<p>Your solution will only work if the given array consists of at-least 1 non-positive element. Once you have an Array with all positive elements, you solution will always return a 0 because no element in an array will ever be less than your initially assumed minimum which is zero in your case.</p>\n<p><strong>Alternatively to using streams :</strong> you can sort the Array first and get the first element, assuming it will be sorted in ascending order:</p>\n<pre><code>int test(int[] B) {\n    Arrays.sort(B); // Sorts the array in ascending order\n    return B[0];\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11313236,"reputation":63,"user_id":8295795,"display_name":"Mucahit Aktepe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639351298,"creation_date":1639351298,"answer_id":70328492,"question_id":62704376,"body_markdown":"**Test Question**\r\n\r\nI was searching a solution to my problem on the Internet, and I saw your question. I think the problem here is changing only one line, at least my question was like that.\r\n\r\nI solved it in **Python** but I will share also the **Java** Solution.\r\n\r\nThis is the starting code given in **Python**,\r\n\r\n    def solution(A):\r\n        ans = 0\r\n        for i in range(1, len(A)):\r\n            if A[i] &lt; ans:\r\n                ans = A[i]\r\n        return ans\r\n\r\nAnd this is my solution to it with only one line change!\r\n\r\n    def solution(A):\r\n        ans = A[0]\r\n        for i in range(1, len(A)):\r\n            if A[i] &lt; ans:\r\n                ans = A[i]\r\n        return ans\r\n\r\nIf we think the same think for the **Java** code which you shared (I corrected some part of your codes already),\r\n\r\n    class Test {\r\n        int test(int[] B) {\r\n            int ans = B[0];\r\n            for (int i = 1; i &lt; B.length; i++) {\r\n                if (ans &gt; B[i]) {\r\n                    ans = B[i];\r\n                }\r\n            }\r\n            return ans;\r\n        }\r\n    }\r\n\r\nI know this is a specific solution for the question and there are some rules like array cannot be empty.. But I hope it will helps the others. Other solutions are also correct. The only difference that I made it only one line change.\r\n\r\nHappy Coding..","title":"Java - Returning the smallest element of the given non-empty array","body":"<p><strong>Test Question</strong></p>\n<p>I was searching a solution to my problem on the Internet, and I saw your question. I think the problem here is changing only one line, at least my question was like that.</p>\n<p>I solved it in <strong>Python</strong> but I will share also the <strong>Java</strong> Solution.</p>\n<p>This is the starting code given in <strong>Python</strong>,</p>\n<pre><code>def solution(A):\n    ans = 0\n    for i in range(1, len(A)):\n        if A[i] &lt; ans:\n            ans = A[i]\n    return ans\n</code></pre>\n<p>And this is my solution to it with only one line change!</p>\n<pre><code>def solution(A):\n    ans = A[0]\n    for i in range(1, len(A)):\n        if A[i] &lt; ans:\n            ans = A[i]\n    return ans\n</code></pre>\n<p>If we think the same think for the <strong>Java</strong> code which you shared (I corrected some part of your codes already),</p>\n<pre><code>class Test {\n    int test(int[] B) {\n        int ans = B[0];\n        for (int i = 1; i &lt; B.length; i++) {\n            if (ans &gt; B[i]) {\n                ans = B[i];\n            }\n        }\n        return ans;\n    }\n}\n</code></pre>\n<p>I know this is a specific solution for the question and there are some rules like array cannot be empty.. But I hope it will helps the others. Other solutions are also correct. The only difference that I made it only one line change.</p>\n<p>Happy Coding..</p>\n"}],"owner":{"display_name":"user5911451"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10644,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":7,"score":3,"last_activity_date":1660223120,"creation_date":1593720899,"question_id":62704376,"body_markdown":"I am studying Java and trying to find the bug in my code. \r\n\r\nIt is suppose to return the smallest element of the given non-empty array.\r\n\r\nIt works with B = [-3, 4, -2, -2]\r\n\r\nCan you tell me what I am doing wrong here?\r\n\r\n\r\n    class Test {\r\n        int test(int[] B, int[] C) {\r\n            int ans = 0;\r\n            for (int i = 1; i &lt; B.length; i++) {\r\n                if (ans &gt; B[I]) {\r\n                    ans = B[i];\r\n                }\r\n            }\r\n            return ans;\r\n        }\r\n    }\r\n\r\n","title":"Java - Returning the smallest element of the given non-empty array","body":"<p>I am studying Java and trying to find the bug in my code.</p>\n<p>It is suppose to return the smallest element of the given non-empty array.</p>\n<p>It works with B = [-3, 4, -2, -2]</p>\n<p>Can you tell me what I am doing wrong here?</p>\n<pre><code>class Test {\n    int test(int[] B, int[] C) {\n        int ans = 0;\n        for (int i = 1; i &lt; B.length; i++) {\n            if (ans &gt; B[I]) {\n                ans = B[i];\n            }\n        }\n        return ans;\n    }\n}\n</code></pre>\n"},{"tags":["java","file","permissions"],"comments":[{"owner":{"account_id":13022813,"reputation":722,"user_id":9411636,"display_name":"Kaneda"},"score":0,"creation_date":1660224451,"post_id":73321104,"comment_id":129486003,"body_markdown":"which permissions are set when the dirs are created by the java process? from a simple test I made here, they are the same as the created by user on cli","body":"which permissions are set when the dirs are created by the java process? from a simple test I made here, they are the same as the created by user on cli"},{"owner":{"account_id":5577489,"reputation":92,"user_id":4420490,"display_name":"Anton Afanasjew"},"score":0,"creation_date":1660224771,"post_id":73321104,"comment_id":129486146,"body_markdown":"That&#39;s what I would expect. But they are different in our case. That&#39;s why I would like to know how the implicit permission setting is defined in the Java specification.","body":"That&#39;s what I would expect. But they are different in our case. That&#39;s why I would like to know how the implicit permission setting is defined in the Java specification."},{"owner":{"account_id":13022813,"reputation":722,"user_id":9411636,"display_name":"Kaneda"},"score":0,"creation_date":1660224938,"post_id":73321104,"comment_id":129486233,"body_markdown":"ok, but HOW much they are different? show both the permissions set on both case, so we can try to understand better","body":"ok, but HOW much they are different? show both the permissions set on both case, so we can try to understand better"},{"owner":{"account_id":5577489,"reputation":92,"user_id":4420490,"display_name":"Anton Afanasjew"},"score":0,"creation_date":1660225175,"post_id":73321104,"comment_id":129486337,"body_markdown":"CLI: **drwxrwsr-x**\nJBoss: **drwxr-sr-x**","body":"CLI: <b>drwxrwsr-x</b> JBoss: <b>drwxr-sr-x</b>"},{"owner":{"account_id":13022813,"reputation":722,"user_id":9411636,"display_name":"Kaneda"},"score":0,"creation_date":1660226575,"post_id":73321104,"comment_id":129487019,"body_markdown":"probably is something with your jboss permission, or jboss-user created, from what I searched, but nothing much clear","body":"probably is something with your jboss permission, or jboss-user created, from what I searched, but nothing much clear"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1660228388,"post_id":73321104,"comment_id":129487769,"body_markdown":"Are you executing that command line as the same user as whom JBoss runs?  Different users may create files with different default permissions.","body":"Are you executing that command line as the same user as whom JBoss runs?  Different users may create files with different default permissions."},{"owner":{"account_id":5577489,"reputation":92,"user_id":4420490,"display_name":"Anton Afanasjew"},"score":0,"creation_date":1660228486,"post_id":73321104,"comment_id":129487816,"body_markdown":"@VGR: Yes, that&#39;s the strange thing. The same user produces different permissions.","body":"@VGR: Yes, that&#39;s the strange thing. The same user produces different permissions."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1660239250,"post_id":73321104,"comment_id":129491845,"body_markdown":"Perhaps your command line shell has a different umask than the umask of the JBoss process?  I don’t know of an easy way to test that using Java, but you can add a line to the JBoss startup script that prints it out.","body":"Perhaps your command line shell has a different umask than the umask of the JBoss process?  I don’t know of an easy way to test that using Java, but you can add a line to the JBoss startup script that prints it out."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1660247122,"post_id":73321104,"comment_id":129494088,"body_markdown":"In any event, you might have better luck with `Files.createDirectories(Paths.get(filename), PosixFilePermissions.asFileAttribute(PosixFilePermissions.fromString(&quot;rwxrwxr-x&quot;)))`.","body":"In any event, you might have better luck with <code>Files.createDirectories(Paths.get(filename), PosixFilePermissions.asFileAttribute(PosixFilePermissions.fr&zwnj;&#8203;omString(&quot;rwxrwxr-x&quot;&zwnj;&#8203;)))</code>."},{"owner":{"account_id":5577489,"reputation":92,"user_id":4420490,"display_name":"Anton Afanasjew"},"score":0,"creation_date":1660309514,"post_id":73321104,"comment_id":129508862,"body_markdown":"@VGR: but the umask should be the same if the user is the same, shouldn&#39;t it? I wanted to avoid to fix it via explicit setting of permissions via the application, but if there is no other way to manipulate this behaviour, I will go with PosixFilePermissions.","body":"@VGR: but the umask should be the same if the user is the same, shouldn&#39;t it? I wanted to avoid to fix it via explicit setting of permissions via the application, but if there is no other way to manipulate this behaviour, I will go with PosixFilePermissions."}],"owner":{"account_id":5577489,"reputation":92,"user_id":4420490,"display_name":"Anton Afanasjew"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1660222857,"creation_date":1660222857,"question_id":73321104,"body_markdown":"Our Java application runs in the JBoss application server and writes directories to the underlying Unix file system by using the method File::mkdirs().\r\n\r\nWe can observe that the file permissions set by this process are different than the ones that are set when creating the directory from the command line as the same user. No explicit permissions are set in the application code.\r\n\r\nHow does the Java Runtime decide which permissions to assign implicitly to the newly created directory?","title":"Java - Default File Attributes when creating a directory","body":"<p>Our Java application runs in the JBoss application server and writes directories to the underlying Unix file system by using the method File::mkdirs().</p>\n<p>We can observe that the file permissions set by this process are different than the ones that are set when creating the directory from the command line as the same user. No explicit permissions are set in the application code.</p>\n<p>How does the Java Runtime decide which permissions to assign implicitly to the newly created directory?</p>\n"},{"tags":["java","selenium","selenium-webdriver","selenium-chromedriver","webdriverwait"],"answers":[{"tags":[],"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660221652,"creation_date":1660220228,"answer_id":73320515,"question_id":73320363,"body_markdown":"By removing the first product from the cart the remaining products are rearranged there so the remaining `WebElements` in the `removeList` list becoming stale elements.  \r\nIn order to remove all the products from the cart you have to get the `removeList` again after each time the product is removed and validate there are still products in the cart, as following:\r\n```java\r\nWebDriverWait wait = new WebDriverWait(driver, 30);\r\nList&lt;WebElement&gt; removeList = driver.findElements(By.xpath(&quot;//table[contains(@class,&#39;shop_table&#39;)]//a[@class=&#39;remove&#39;]&quot;));\r\nwhile(!removeList.isEmpty()){\r\n    removeList.get(0).click();\r\n    wait.until(ExpectedConditions.invisibilityOfElementLocated(By.cssSelector(&quot;div.blockUI.blockOverlay&quot;)));\r\n    Thread.sleep(200);\r\n    removeList = driver.findElements(By.xpath(&quot;//table[contains(@class,&#39;shop_table&#39;)]//a[@class=&#39;remove&#39;]&quot;));\r\n}\r\n```","title":"SELENIUM &amp; JAVA - Ecommerce Application - Unable to remove product from the cart page","body":"<p>By removing the first product from the cart the remaining products are rearranged there so the remaining <code>WebElements</code> in the <code>removeList</code> list becoming stale elements.<br />\nIn order to remove all the products from the cart you have to get the <code>removeList</code> again after each time the product is removed and validate there are still products in the cart, as following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>WebDriverWait wait = new WebDriverWait(driver, 30);\nList&lt;WebElement&gt; removeList = driver.findElements(By.xpath(&quot;//table[contains(@class,'shop_table')]//a[@class='remove']&quot;));\nwhile(!removeList.isEmpty()){\n    removeList.get(0).click();\n    wait.until(ExpectedConditions.invisibilityOfElementLocated(By.cssSelector(&quot;div.blockUI.blockOverlay&quot;)));\n    Thread.sleep(200);\n    removeList = driver.findElements(By.xpath(&quot;//table[contains(@class,'shop_table')]//a[@class='remove']&quot;));\n}\n</code></pre>\n"}],"owner":{"account_id":8871143,"reputation":269,"user_id":6624829,"accept_rate":86,"display_name":"Bimlesh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":198,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73320515,"answer_count":1,"score":1,"last_activity_date":1660222641,"creation_date":1660219531,"question_id":73320363,"body_markdown":"**With the below code, I am able to remove only the first product from the cart page but not all the products**\r\n\r\npublic class RemoveProductFromCart {\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n\t\tWebDriverManager.chromedriver().setup();\r\n\t\tWebDriver driver = new ChromeDriver();\r\n\t\tdriver.manage().window().maximize();\r\n\t\tdriver.get(&quot;https://askomdch.com/account/&quot;);\r\n\t\tdriver.findElement(By.id(&quot;username&quot;)).sendKeys(&quot;testuser1&quot;);\r\n\t\tdriver.findElement(By.id(&quot;password&quot;)).sendKeys(&quot;Password@123&quot;);\r\n\t\tdriver.findElement(By.xpath(&quot;//button[@type=&#39;submit&#39; and @name=&#39;login&#39;]&quot;)).click();\r\n\t\tThread.sleep(2000);\r\n*Clicking on the cart icon==&gt;*\r\n\r\n\t\tdriver.findElement(By.xpath(&quot;//div[@id=&#39;ast-desktop-header&#39;]//div[@class=&#39;ast-cart-menu-wrap&#39;]&quot;)).click();\r\n\t\tThread.sleep(2000);\r\n\r\n*Grouped all the items to remove into a list and then click them one by one to remove all the products==&gt;*\r\n\r\n\t\tList&lt;WebElement&gt; removeList = driver\r\n\t\t\t\t.findElements(By.xpath(&quot;//table[contains(@class,&#39;shop_table&#39;)]//a[@class=&#39;remove&#39;]&quot;));\r\n\r\n\t\tfor (int i = 0; i &lt; removeList.size(); i++) {\r\n\t\t\tremoveList.get(i).click();\r\n\t\t\tThread.sleep(2000);\r\n\t\t\tif (removeList.size() == 0) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n","title":"SELENIUM &amp; JAVA - Ecommerce Application - Unable to remove product from the cart page","body":"<p><strong>With the below code, I am able to remove only the first product from the cart page but not all the products</strong></p>\n<p>public class RemoveProductFromCart {</p>\n<pre><code>public static void main(String[] args) throws Exception {\n    WebDriverManager.chromedriver().setup();\n    WebDriver driver = new ChromeDriver();\n    driver.manage().window().maximize();\n    driver.get(&quot;https://askomdch.com/account/&quot;);\n    driver.findElement(By.id(&quot;username&quot;)).sendKeys(&quot;testuser1&quot;);\n    driver.findElement(By.id(&quot;password&quot;)).sendKeys(&quot;Password@123&quot;);\n    driver.findElement(By.xpath(&quot;//button[@type='submit' and @name='login']&quot;)).click();\n    Thread.sleep(2000);\n</code></pre>\n<p><em>Clicking on the cart icon==&gt;</em></p>\n<pre><code>    driver.findElement(By.xpath(&quot;//div[@id='ast-desktop-header']//div[@class='ast-cart-menu-wrap']&quot;)).click();\n    Thread.sleep(2000);\n</code></pre>\n<p><em>Grouped all the items to remove into a list and then click them one by one to remove all the products==&gt;</em></p>\n<pre><code>    List&lt;WebElement&gt; removeList = driver\n            .findElements(By.xpath(&quot;//table[contains(@class,'shop_table')]//a[@class='remove']&quot;));\n\n    for (int i = 0; i &lt; removeList.size(); i++) {\n        removeList.get(i).click();\n        Thread.sleep(2000);\n        if (removeList.size() == 0) {\n            break;\n        }\n    }\n\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","android","database","android-recyclerview","android-room"],"comments":[{"owner":{"account_id":4608033,"reputation":9671,"user_id":3736955,"accept_rate":71,"display_name":"Jemshit"},"score":0,"creation_date":1660212345,"post_id":73318762,"comment_id":129481672,"body_markdown":"It would be better this way: 1) Always add to/remove from Database, not recyclerview. 2) Fragment/Activity always listens to Room database changes &amp; updates RecyclerView when there is change. 2a) To listen to changes, you need your Room DAO interface method to return some Observable/Flowable/LiveData/Flow type","body":"It would be better this way: 1) Always add to/remove from Database, not recyclerview. 2) Fragment/Activity always listens to Room database changes &amp; updates RecyclerView when there is change. 2a) To listen to changes, you need your Room DAO interface method to return some Observable/Flowable/LiveData/Flow type"},{"owner":{"account_id":25709482,"reputation":137,"user_id":19468261,"display_name":"ShahZaman Rai"},"score":0,"creation_date":1660212486,"post_id":73318762,"comment_id":129481711,"body_markdown":"i have used liveData but can&#39;t figure out what to write in observe method after getting data","body":"i have used liveData but can&#39;t figure out what to write in observe method after getting data"},{"owner":{"account_id":21390158,"reputation":801,"user_id":15754377,"display_name":"Vivek Gupta"},"score":0,"creation_date":1660212810,"post_id":73318762,"comment_id":129481833,"body_markdown":"https://stackoverflow.com/questions/31367599/how-to-update-recyclerview-adapter-data","body":"<a href=\"https://stackoverflow.com/questions/31367599/how-to-update-recyclerview-adapter-data\" title=\"how to update recyclerview adapter data\">stackoverflow.com/questions/31367599/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6532636,"reputation":160,"user_id":5053306,"display_name":"Graziano Rizzi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660222546,"creation_date":1660213867,"answer_id":73319177,"question_id":73318762,"body_markdown":"Remove this two line\r\n\r\n    notifyItemRemoved(position);\r\n    notifyItemRangeChanged(position, arrNotes.size());\r\n\r\nOLD ANSWER\r\n\r\n\r\nFirst, if you use liveData you don&#39;t need to call the method\r\n\r\n    arrNotes = (ArrayList&lt;Notes&gt;) dbHelper.notesDao().getAllNotes();\r\njust keep a reference to the adapter instance and whenever there is a change from liveData call the notifyDataSetChanged method.\r\n\r\n    adapter = new RecyclerViewAdapter(this,new List&lt;Notes&gt;());\r\n    RecyclerView recyclerView = findViewById(R.id.recycler_view);\r\n    recyclerView.setAdapter(adapter);\r\n    modelView.getAllNotes().observe(this, new Observer&lt;List&lt;Notes&gt;&gt;() {\r\n            @Override\r\n            public void onChanged(List&lt;Notes&gt; notes) {\r\n                arrNotes.clear();\r\n                arrNotes.addAll(notes);\r\n                adapter.notifyDataSetChanged()\r\n            }\r\n        });\r\n\r\n\r\n","title":"Notify adapter on item inserted in RoomDatabase and update the recyclerView","body":"<p>Remove this two line</p>\n<pre><code>notifyItemRemoved(position);\nnotifyItemRangeChanged(position, arrNotes.size());\n</code></pre>\n<p>OLD ANSWER</p>\n<p>First, if you use liveData you don't need to call the method</p>\n<pre><code>arrNotes = (ArrayList&lt;Notes&gt;) dbHelper.notesDao().getAllNotes();\n</code></pre>\n<p>just keep a reference to the adapter instance and whenever there is a change from liveData call the notifyDataSetChanged method.</p>\n<pre><code>adapter = new RecyclerViewAdapter(this,new List&lt;Notes&gt;());\nRecyclerView recyclerView = findViewById(R.id.recycler_view);\nrecyclerView.setAdapter(adapter);\nmodelView.getAllNotes().observe(this, new Observer&lt;List&lt;Notes&gt;&gt;() {\n        @Override\n        public void onChanged(List&lt;Notes&gt; notes) {\n            arrNotes.clear();\n            arrNotes.addAll(notes);\n            adapter.notifyDataSetChanged()\n        }\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7451738,"reputation":130,"user_id":5666269,"display_name":"Milad Targholi"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1660215958,"creation_date":1660215958,"answer_id":73319619,"question_id":73318762,"body_markdown":"&gt; observe a LiveData object as it is not a LifecycleOwner\r\n\r\nUse `observeForever()` on the LiveData, manually unregistering via `removeObserver()` when appropriate (`onDestroy()` of the service, if not sooner).\r\n\r\nBear in mind that standard service limitations apply here (e.g., services run for ~1 minute on Android 8.0+ unless they are foreground services), so it may be that you need to consider other approaches anyway. &#129310;\r\n\r\nAlso you can read more in original post in here -&gt; [Link][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/50915186/how-to-read-data-and-listen-to-changes-from-room-database-in-a-service","title":"Notify adapter on item inserted in RoomDatabase and update the recyclerView","body":"<blockquote>\n<p>observe a LiveData object as it is not a LifecycleOwner</p>\n</blockquote>\n<p>Use <code>observeForever()</code> on the LiveData, manually unregistering via <code>removeObserver()</code> when appropriate (<code>onDestroy()</code> of the service, if not sooner).</p>\n<p>Bear in mind that standard service limitations apply here (e.g., services run for ~1 minute on Android 8.0+ unless they are foreground services), so it may be that you need to consider other approaches anyway. 🤞</p>\n<p>Also you can read more in original post in here -&gt; <a href=\"https://stackoverflow.com/questions/50915186/how-to-read-data-and-listen-to-changes-from-room-database-in-a-service\">Link</a></p>\n"}],"owner":{"account_id":25709482,"reputation":137,"user_id":19468261,"display_name":"ShahZaman Rai"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":597,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73319619,"answer_count":2,"score":1,"last_activity_date":1660222546,"creation_date":1660211894,"question_id":73318762,"body_markdown":"I am creating a notes app with java, i added room database to my app and when user saves a notes it adds it to database but doesn&#39;t shows in recyclerView immediately, when i reloads the app then it shows up, how and where should i insert notifyiteminserted so that recyclerView changes immediately\r\n\r\nI have tried onResume Method but that results in app crash.\r\nThis is my MainActivity.\r\n\r\n\r\n```\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.widget.Button;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\nimport androidx.lifecycle.Observer;\r\nimport androidx.lifecycle.ViewModelProvider;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.recyclerview.widget.StaggeredGridLayoutManager;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n\r\n    static ArrayList&lt;Notes&gt; arrNotes;\r\n    @SuppressLint(&quot;StaticFieldLeak&quot;)\r\n    RecyclerViewAdapter adapter;\r\n    RecyclerView.LayoutManager layoutManager;\r\n    notesModelView modelView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        DatabaseHelper dbHelper = DatabaseHelper.getDatabase(this);\r\n\r\n        arrNotes = (ArrayList&lt;Notes&gt;) dbHelper.notesDao().getAllNotes();\r\n\r\n\r\n        RecyclerView recyclerView = findViewById(R.id.recycler_view);\r\n        adapter = new RecyclerViewAdapter(this, arrNotes);\r\n        recyclerView.setAdapter(adapter);\r\n\r\n        //setting up recycler view\r\n        layoutManager = new StaggeredGridLayoutManager(2, LinearLayoutManager.VERTICAL);\r\n        recyclerView.setLayoutManager(layoutManager);\r\n\r\n        //Setting custom Toolbar\r\n        Toolbar toolbar1 = findViewById(R.id.toolbar);\r\n        setSupportActionBar(toolbar1);\r\n\r\n        //Moving from MainActivity to add_Notes Activity\r\n        Button button = findViewById(R.id.floatingActionButton);\r\n        button.setOnClickListener(view -&gt; {\r\n            Intent intent = new Intent(MainActivity.this, addActivity.class);\r\n            startActivity(intent);\r\n\r\n        });\r\n\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\nThis is my add_Activity.\r\n\r\n```\r\npackage com.example.keepnotes;\r\n\r\nimport android.os.Bundle;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\n\r\nimport java.util.Objects;\r\n\r\npublic class addActivity extends AppCompatActivity {\r\n\r\n\r\n    MainActivity mainActivity;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_add);\r\n\r\n        Toolbar toolbar_add = findViewById(R.id.toolbar_add_activity);\r\n        setSupportActionBar(toolbar_add);\r\n        Objects.requireNonNull(getSupportActionBar()).setDisplayHomeAsUpEnabled(true);\r\n        toolbar_add.setNavigationIcon(R.drawable.back_button);\r\n        toolbar_add.setNavigationOnClickListener(view -&gt; onBackPressed());\r\n\r\n        EditText titleText = findViewById(R.id.add_activity_title);\r\n        EditText bodyText = findViewById(R.id.add_activity_text);\r\n        Button saveBtn = findViewById(R.id.button);\r\n        DatabaseHelper database = DatabaseHelper.getDatabase(this);\r\n\r\n\r\n        saveBtn.setOnClickListener(view -&gt; {\r\n            String titleBody = titleText.getText().toString();\r\n            String textBody = bodyText.getText().toString();\r\n\r\n            if (titleBody.equals(&quot;&quot;) &amp;&amp; textBody.equals(&quot;&quot;)) {\r\n                Toast.makeText(addActivity.this, &quot;Fields can&#39;t be empty&quot;,\r\n                        Toast.LENGTH_LONG).show();\r\n            } else {\r\n                database.notesDao().addNotes(new Notes(titleBody, textBody));\r\n                finish();\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nHow can i notify adapter the changes on each item add in database.\r\n\r\n\r\nHere is my MainActivity after update to liveData.\r\n\r\n```\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.widget.Button;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\nimport androidx.lifecycle.Observer;\r\nimport androidx.lifecycle.ViewModelProvider;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.recyclerview.widget.StaggeredGridLayoutManager;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n\r\n    static ArrayList&lt;Notes&gt; arrNotes;\r\n    @SuppressLint(&quot;StaticFieldLeak&quot;)\r\n    RecyclerViewAdapter adapter;\r\n    RecyclerView.LayoutManager layoutManager;\r\n    notesModelView modelView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        DatabaseHelper dbHelper = DatabaseHelper.getDatabase(this);\r\n\r\n        modelView = new ViewModelProvider(this).get(notesModelView.class);\r\n        modelView.getAllNotes().observe(this, new Observer&lt;List&lt;Notes&gt;&gt;() {\r\n            @Override\r\n            public void onChanged(List&lt;Notes&gt; notes) {\r\n                arrNotes = (ArrayList&lt;Notes&gt;) notes;\r\n            }\r\n        });\r\n\r\n        \r\n        arrNotes = (ArrayList&lt;Notes&gt;) dbHelper.notesDao().getAllNotes();\r\n\r\n\r\n        RecyclerView recyclerView = findViewById(R.id.recycler_view);\r\n        adapter = new RecyclerViewAdapter(this, arrNotes);\r\n        recyclerView.setAdapter(adapter);\r\n\r\n        //setting up recycler view\r\n        layoutManager = new StaggeredGridLayoutManager(2, LinearLayoutManager.VERTICAL);\r\n        recyclerView.setLayoutManager(layoutManager);\r\n\r\n        //Setting custom Toolbar\r\n        Toolbar toolbar1 = findViewById(R.id.toolbar);\r\n        setSupportActionBar(toolbar1);\r\n\r\n        //Moving from MainActivity to add_Notes Activity\r\n        Button button = findViewById(R.id.floatingActionButton);\r\n        button.setOnClickListener(view -&gt; {\r\n            Intent intent = new Intent(MainActivity.this, addActivity.class);\r\n            startActivity(intent);\r\n\r\n        });\r\n\r\n    }\r\n}\r\n\r\n```\r\n\r\nthis is Dao.\r\n```\r\n\r\nimport androidx.lifecycle.LiveData;\r\nimport androidx.room.Dao;\r\nimport androidx.room.Delete;\r\nimport androidx.room.Insert;\r\nimport androidx.room.Query;\r\nimport androidx.room.Update;\r\n\r\nimport java.util.List;\r\n\r\n@Dao\r\npublic interface NotesDao {\r\n\r\n    @Query(&quot;SELECT * FROM notesTable&quot;)\r\n    List&lt;Notes&gt; getAllNotes();\r\n\r\n    @Query(&quot;SELECT * FROM notesTable&quot;)\r\n    LiveData&lt;List&lt;Notes&gt;&gt; findAllNotes();\r\n\r\n    @Insert\r\n    void addNotes(Notes note);\r\n\r\n    @Update\r\n    void updateNotes(Notes note);\r\n\r\n    @Delete\r\n    void deleteNotes(Notes note);\r\n\r\n\r\n\r\n}\r\n\r\n```\r\n And here is my ViewModel\r\n\r\n```\r\npackage com.example.keepnotes;\r\n\r\nimport android.app.Application;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.lifecycle.AndroidViewModel;\r\nimport androidx.lifecycle.LiveData;\r\n\r\nimport java.util.List;\r\n\r\npublic class notesModelView extends AndroidViewModel {\r\n\r\n    DatabaseHelper databaseHelper;\r\n\r\n    public notesModelView(@NonNull Application application) {\r\n        super(application);\r\n        databaseHelper = DatabaseHelper.getDatabase(application.getApplicationContext());\r\n    }\r\n\r\n    public LiveData&lt;List&lt;Notes&gt;&gt; getAllNotes() {\r\n        return databaseHelper.notesDao().findAllNotes();\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nHere is my RecyclerView adapter\r\n```\r\npackage com.example.keepnotes;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.cardview.widget.CardView;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class RecyclerViewAdapter extends RecyclerView.Adapter&lt;RecyclerViewAdapter.ViewHolder&gt; {\r\n\r\n    Context context;\r\n    ArrayList&lt;Notes&gt; arrNotes;\r\n    DatabaseHelper databaseHelper;\r\n\r\n    RecyclerViewAdapter(Context context, ArrayList&lt;Notes&gt; arrNotes, DatabaseHelper databaseHelper) {\r\n        this.context = context;\r\n        this.arrNotes = arrNotes;\r\n        this.databaseHelper = databaseHelper;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(context).inflate(R.layout.single_view, parent, false);\r\n        return new ViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull ViewHolder holder, @SuppressLint(&quot;RecyclerView&quot;) int position) {\r\n        holder.title.setText(arrNotes.get(position).title);\r\n        holder.body.setText(arrNotes.get(position).text);\r\n        holder.index.setText(String.valueOf(position + 1));\r\n\r\n        holder.llView.setOnLongClickListener(new View.OnLongClickListener() {\r\n            @Override\r\n            public boolean onLongClick(View view) {\r\n\r\n                AlertDialog.Builder alert = new AlertDialog.Builder(context)\r\n                        .setTitle(&quot;Delete view&quot;)\r\n                        .setMessage(&quot;Are you sure to delete&quot;)\r\n                        .setIcon(R.drawable.ic_baseline_delete_24)\r\n                        .setPositiveButton(&quot;yes&quot;, new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialogInterface, int i) {\r\n                                \r\n                                databaseHelper.notesDao().deleteNotes(new Notes(arrNotes.get(position).id,arrNotes.get(position).title,arrNotes.get(position).text));\r\n                                notifyItemRemoved(position);\r\n                                notifyItemRangeChanged(position, arrNotes.size());\r\n                            }\r\n                        })\r\n                        .setNegativeButton(&quot;No&quot;, new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialogInterface, int i) {\r\n\r\n                            }\r\n                        });\r\n                alert.show();\r\n\r\n\r\n                return true;\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return arrNotes.size();\r\n    }\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder {\r\n\r\n        TextView title, body, index;\r\n        CardView llView;\r\n\r\n        public ViewHolder(View itemView) {\r\n            super(itemView);\r\n            title = itemView.findViewById(R.id.text_title_view);\r\n            body = itemView.findViewById(R.id.text_text_view);\r\n            index = itemView.findViewById(R.id.index);\r\n            llView = itemView.findViewById(R.id.card_View);\r\n            databaseHelper = DatabaseHelper.getDatabase(context);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\nIt deletes the selected notes but also crashes immediately after confirming delete.\r\n\r\nand it throws following error\r\n```\r\n    java.lang.IndexOutOfBoundsException: Inconsistency detected. Invalid view holder adapter positionViewHolder{535e3b3 position=5 id=-1, oldPos=4, pLpos:4 scrap [attachedScrap] tmpDetached not recyclable(1) no parent} androidx.recyclerview.widget.RecyclerView{11f4816 VFED..... ......ID 31,171-689,1048 #7f090165 app:id/recycler_view}, adapter:com.example.keepnotes.RecyclerViewAdapter@fd652a0, layout:androidx.recyclerview.widget.StaggeredGridLayoutManager@32e1e59, context:com.example.keepnotes.MainActivity@286bccd\r\n\r\n```","title":"Notify adapter on item inserted in RoomDatabase and update the recyclerView","body":"<p>I am creating a notes app with java, i added room database to my app and when user saves a notes it adds it to database but doesn't shows in recyclerView immediately, when i reloads the app then it shows up, how and where should i insert notifyiteminserted so that recyclerView changes immediately</p>\n<p>I have tried onResume Method but that results in app crash.\nThis is my MainActivity.</p>\n<pre><code>\nimport android.annotation.SuppressLint;\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.widget.Button;\nimport android.widget.Toast;\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.appcompat.widget.Toolbar;\nimport androidx.lifecycle.Observer;\nimport androidx.lifecycle.ViewModelProvider;\nimport androidx.recyclerview.widget.LinearLayoutManager;\nimport androidx.recyclerview.widget.RecyclerView;\nimport androidx.recyclerview.widget.StaggeredGridLayoutManager;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n\npublic class MainActivity extends AppCompatActivity {\n\n\n    static ArrayList&lt;Notes&gt; arrNotes;\n    @SuppressLint(&quot;StaticFieldLeak&quot;)\n    RecyclerViewAdapter adapter;\n    RecyclerView.LayoutManager layoutManager;\n    notesModelView modelView;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        DatabaseHelper dbHelper = DatabaseHelper.getDatabase(this);\n\n        arrNotes = (ArrayList&lt;Notes&gt;) dbHelper.notesDao().getAllNotes();\n\n\n        RecyclerView recyclerView = findViewById(R.id.recycler_view);\n        adapter = new RecyclerViewAdapter(this, arrNotes);\n        recyclerView.setAdapter(adapter);\n\n        //setting up recycler view\n        layoutManager = new StaggeredGridLayoutManager(2, LinearLayoutManager.VERTICAL);\n        recyclerView.setLayoutManager(layoutManager);\n\n        //Setting custom Toolbar\n        Toolbar toolbar1 = findViewById(R.id.toolbar);\n        setSupportActionBar(toolbar1);\n\n        //Moving from MainActivity to add_Notes Activity\n        Button button = findViewById(R.id.floatingActionButton);\n        button.setOnClickListener(view -&gt; {\n            Intent intent = new Intent(MainActivity.this, addActivity.class);\n            startActivity(intent);\n\n        });\n\n    }\n}\n\n\n</code></pre>\n<p>This is my add_Activity.</p>\n<pre><code>package com.example.keepnotes;\n\nimport android.os.Bundle;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.Toast;\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.appcompat.widget.Toolbar;\n\nimport java.util.Objects;\n\npublic class addActivity extends AppCompatActivity {\n\n\n    MainActivity mainActivity;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_add);\n\n        Toolbar toolbar_add = findViewById(R.id.toolbar_add_activity);\n        setSupportActionBar(toolbar_add);\n        Objects.requireNonNull(getSupportActionBar()).setDisplayHomeAsUpEnabled(true);\n        toolbar_add.setNavigationIcon(R.drawable.back_button);\n        toolbar_add.setNavigationOnClickListener(view -&gt; onBackPressed());\n\n        EditText titleText = findViewById(R.id.add_activity_title);\n        EditText bodyText = findViewById(R.id.add_activity_text);\n        Button saveBtn = findViewById(R.id.button);\n        DatabaseHelper database = DatabaseHelper.getDatabase(this);\n\n\n        saveBtn.setOnClickListener(view -&gt; {\n            String titleBody = titleText.getText().toString();\n            String textBody = bodyText.getText().toString();\n\n            if (titleBody.equals(&quot;&quot;) &amp;&amp; textBody.equals(&quot;&quot;)) {\n                Toast.makeText(addActivity.this, &quot;Fields can't be empty&quot;,\n                        Toast.LENGTH_LONG).show();\n            } else {\n                database.notesDao().addNotes(new Notes(titleBody, textBody));\n                finish();\n            }\n        });\n    }\n}\n\n</code></pre>\n<p>How can i notify adapter the changes on each item add in database.</p>\n<p>Here is my MainActivity after update to liveData.</p>\n<pre><code>\nimport android.annotation.SuppressLint;\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.widget.Button;\nimport android.widget.Toast;\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.appcompat.widget.Toolbar;\nimport androidx.lifecycle.Observer;\nimport androidx.lifecycle.ViewModelProvider;\nimport androidx.recyclerview.widget.LinearLayoutManager;\nimport androidx.recyclerview.widget.RecyclerView;\nimport androidx.recyclerview.widget.StaggeredGridLayoutManager;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n\npublic class MainActivity extends AppCompatActivity {\n\n\n    static ArrayList&lt;Notes&gt; arrNotes;\n    @SuppressLint(&quot;StaticFieldLeak&quot;)\n    RecyclerViewAdapter adapter;\n    RecyclerView.LayoutManager layoutManager;\n    notesModelView modelView;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        DatabaseHelper dbHelper = DatabaseHelper.getDatabase(this);\n\n        modelView = new ViewModelProvider(this).get(notesModelView.class);\n        modelView.getAllNotes().observe(this, new Observer&lt;List&lt;Notes&gt;&gt;() {\n            @Override\n            public void onChanged(List&lt;Notes&gt; notes) {\n                arrNotes = (ArrayList&lt;Notes&gt;) notes;\n            }\n        });\n\n        \n        arrNotes = (ArrayList&lt;Notes&gt;) dbHelper.notesDao().getAllNotes();\n\n\n        RecyclerView recyclerView = findViewById(R.id.recycler_view);\n        adapter = new RecyclerViewAdapter(this, arrNotes);\n        recyclerView.setAdapter(adapter);\n\n        //setting up recycler view\n        layoutManager = new StaggeredGridLayoutManager(2, LinearLayoutManager.VERTICAL);\n        recyclerView.setLayoutManager(layoutManager);\n\n        //Setting custom Toolbar\n        Toolbar toolbar1 = findViewById(R.id.toolbar);\n        setSupportActionBar(toolbar1);\n\n        //Moving from MainActivity to add_Notes Activity\n        Button button = findViewById(R.id.floatingActionButton);\n        button.setOnClickListener(view -&gt; {\n            Intent intent = new Intent(MainActivity.this, addActivity.class);\n            startActivity(intent);\n\n        });\n\n    }\n}\n\n</code></pre>\n<p>this is Dao.</p>\n<pre><code>\nimport androidx.lifecycle.LiveData;\nimport androidx.room.Dao;\nimport androidx.room.Delete;\nimport androidx.room.Insert;\nimport androidx.room.Query;\nimport androidx.room.Update;\n\nimport java.util.List;\n\n@Dao\npublic interface NotesDao {\n\n    @Query(&quot;SELECT * FROM notesTable&quot;)\n    List&lt;Notes&gt; getAllNotes();\n\n    @Query(&quot;SELECT * FROM notesTable&quot;)\n    LiveData&lt;List&lt;Notes&gt;&gt; findAllNotes();\n\n    @Insert\n    void addNotes(Notes note);\n\n    @Update\n    void updateNotes(Notes note);\n\n    @Delete\n    void deleteNotes(Notes note);\n\n\n\n}\n\n</code></pre>\n<p>And here is my ViewModel</p>\n<pre><code>package com.example.keepnotes;\n\nimport android.app.Application;\n\nimport androidx.annotation.NonNull;\nimport androidx.lifecycle.AndroidViewModel;\nimport androidx.lifecycle.LiveData;\n\nimport java.util.List;\n\npublic class notesModelView extends AndroidViewModel {\n\n    DatabaseHelper databaseHelper;\n\n    public notesModelView(@NonNull Application application) {\n        super(application);\n        databaseHelper = DatabaseHelper.getDatabase(application.getApplicationContext());\n    }\n\n    public LiveData&lt;List&lt;Notes&gt;&gt; getAllNotes() {\n        return databaseHelper.notesDao().findAllNotes();\n    }\n\n}\n\n</code></pre>\n<p>Here is my RecyclerView adapter</p>\n<pre><code>package com.example.keepnotes;\n\nimport android.annotation.SuppressLint;\nimport android.app.AlertDialog;\nimport android.content.Context;\nimport android.content.DialogInterface;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.TextView;\n\nimport androidx.annotation.NonNull;\nimport androidx.cardview.widget.CardView;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class RecyclerViewAdapter extends RecyclerView.Adapter&lt;RecyclerViewAdapter.ViewHolder&gt; {\n\n    Context context;\n    ArrayList&lt;Notes&gt; arrNotes;\n    DatabaseHelper databaseHelper;\n\n    RecyclerViewAdapter(Context context, ArrayList&lt;Notes&gt; arrNotes, DatabaseHelper databaseHelper) {\n        this.context = context;\n        this.arrNotes = arrNotes;\n        this.databaseHelper = databaseHelper;\n    }\n\n    @NonNull\n    @Override\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View view = LayoutInflater.from(context).inflate(R.layout.single_view, parent, false);\n        return new ViewHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull ViewHolder holder, @SuppressLint(&quot;RecyclerView&quot;) int position) {\n        holder.title.setText(arrNotes.get(position).title);\n        holder.body.setText(arrNotes.get(position).text);\n        holder.index.setText(String.valueOf(position + 1));\n\n        holder.llView.setOnLongClickListener(new View.OnLongClickListener() {\n            @Override\n            public boolean onLongClick(View view) {\n\n                AlertDialog.Builder alert = new AlertDialog.Builder(context)\n                        .setTitle(&quot;Delete view&quot;)\n                        .setMessage(&quot;Are you sure to delete&quot;)\n                        .setIcon(R.drawable.ic_baseline_delete_24)\n                        .setPositiveButton(&quot;yes&quot;, new DialogInterface.OnClickListener() {\n                            @Override\n                            public void onClick(DialogInterface dialogInterface, int i) {\n                                \n                                databaseHelper.notesDao().deleteNotes(new Notes(arrNotes.get(position).id,arrNotes.get(position).title,arrNotes.get(position).text));\n                                notifyItemRemoved(position);\n                                notifyItemRangeChanged(position, arrNotes.size());\n                            }\n                        })\n                        .setNegativeButton(&quot;No&quot;, new DialogInterface.OnClickListener() {\n                            @Override\n                            public void onClick(DialogInterface dialogInterface, int i) {\n\n                            }\n                        });\n                alert.show();\n\n\n                return true;\n            }\n        });\n\n    }\n\n    @Override\n    public int getItemCount() {\n        return arrNotes.size();\n    }\n\n    public class ViewHolder extends RecyclerView.ViewHolder {\n\n        TextView title, body, index;\n        CardView llView;\n\n        public ViewHolder(View itemView) {\n            super(itemView);\n            title = itemView.findViewById(R.id.text_title_view);\n            body = itemView.findViewById(R.id.text_text_view);\n            index = itemView.findViewById(R.id.index);\n            llView = itemView.findViewById(R.id.card_View);\n            databaseHelper = DatabaseHelper.getDatabase(context);\n        }\n    }\n}\n\n\n</code></pre>\n<p>It deletes the selected notes but also crashes immediately after confirming delete.</p>\n<p>and it throws following error</p>\n<pre><code>    java.lang.IndexOutOfBoundsException: Inconsistency detected. Invalid view holder adapter positionViewHolder{535e3b3 position=5 id=-1, oldPos=4, pLpos:4 scrap [attachedScrap] tmpDetached not recyclable(1) no parent} androidx.recyclerview.widget.RecyclerView{11f4816 VFED..... ......ID 31,171-689,1048 #7f090165 app:id/recycler_view}, adapter:com.example.keepnotes.RecyclerViewAdapter@fd652a0, layout:androidx.recyclerview.widget.StaggeredGridLayoutManager@32e1e59, context:com.example.keepnotes.MainActivity@286bccd\n\n</code></pre>\n"},{"tags":["java","http","java-http-client"],"answers":[{"tags":[],"owner":{"account_id":1879754,"reputation":404,"user_id":1700223,"display_name":"humbletrader"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1660222373,"creation_date":1660222373,"answer_id":73320980,"question_id":73276742,"body_markdown":"Unfortunately I have only a workaround which I will post here in order to help others : I changed the HTTP 2 to HTTP 1.1.\r\nFeel free to find a better option . On my side I&#39;m thinking about changing java&#39;s HttpClient with a more robust HttpClient implementation","title":"How to skip intermediary status codes (like 103) with java.net.http.HttpClient and read only the final status code","body":"<p>Unfortunately I have only a workaround which I will post here in order to help others : I changed the HTTP 2 to HTTP 1.1.\nFeel free to find a better option . On my side I'm thinking about changing java's HttpClient with a more robust HttpClient implementation</p>\n"}],"owner":{"account_id":1879754,"reputation":404,"user_id":1700223,"display_name":"humbletrader"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":163,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1660222373,"creation_date":1659956016,"question_id":73276742,"body_markdown":"I have a server which replies first with status code 103 ( and some headers) and then with 200 ( plus some other headers) `curl -I` output below: \r\n\r\n```       \r\nHTTP/2 103  \r\nlink: &lt;https://cdn.shopify.com&gt;; rel=preconnect, &lt;https://cdn.shopify.com&gt;; crossorigin; rel=preconnect\r\n    \r\nHTTP/2 200  \r\ndate: Mon, 08 Aug 2022 10:28:30 GMT content-type: text/html; charset=utf-8 x-sorting-hat-podid: 236 x-sorting-hat-shopid: 366627 x-storefront-renderer-rendered: 1 set-cookie: secure_customer_sig=;\r\n```\r\n My java.net.http.HttpClient seems to detect only the first status code (103) and reads only the first headers. \r\n\r\n```java\r\n HttpClient httpClient = HttpClient.newBuilder()\r\n                .version(HttpClient.Version.HTTP_2)\r\n                .followRedirects(HttpClient.Redirect.NORMAL)\r\n                .connectTimeout(Duration.ofMinutes(1))\r\n                .build();\r\n \r\n HttpRequest request = HttpRequest\r\n    .newBuilder(httpReq, (name, value) -&gt; true)\r\n    .header(&quot;user-agent&quot;, &quot;Mozilla/5.0 (X11....&quot;)\r\n    //other headers here\r\n    .build();\r\n\r\n HttpResponse&lt;InputStream&gt; response = httpClient.send(\r\n                    request,\r\n                    HttpResponse.BodyHandlers.ofInputStream()\r\n            );\r\n\r\n logger.debug(&quot;call returned status code {}&quot;, response.statusCode());\r\n```\r\nThe code above only shows 103 as status code ( which is an intermediary status code as you saw in the output of curl).\r\nHow do I skip that status code + its headers ? I&#39;m only interested in the final (200) status code and the subsequent headers.  ","title":"How to skip intermediary status codes (like 103) with java.net.http.HttpClient and read only the final status code","body":"<p>I have a server which replies first with status code 103 ( and some headers) and then with 200 ( plus some other headers) <code>curl -I</code> output below:</p>\n<pre><code>HTTP/2 103  \nlink: &lt;https://cdn.shopify.com&gt;; rel=preconnect, &lt;https://cdn.shopify.com&gt;; crossorigin; rel=preconnect\n    \nHTTP/2 200  \ndate: Mon, 08 Aug 2022 10:28:30 GMT content-type: text/html; charset=utf-8 x-sorting-hat-podid: 236 x-sorting-hat-shopid: 366627 x-storefront-renderer-rendered: 1 set-cookie: secure_customer_sig=;\n</code></pre>\n<p>My java.net.http.HttpClient seems to detect only the first status code (103) and reads only the first headers.</p>\n<pre class=\"lang-java prettyprint-override\"><code> HttpClient httpClient = HttpClient.newBuilder()\n                .version(HttpClient.Version.HTTP_2)\n                .followRedirects(HttpClient.Redirect.NORMAL)\n                .connectTimeout(Duration.ofMinutes(1))\n                .build();\n \n HttpRequest request = HttpRequest\n    .newBuilder(httpReq, (name, value) -&gt; true)\n    .header(&quot;user-agent&quot;, &quot;Mozilla/5.0 (X11....&quot;)\n    //other headers here\n    .build();\n\n HttpResponse&lt;InputStream&gt; response = httpClient.send(\n                    request,\n                    HttpResponse.BodyHandlers.ofInputStream()\n            );\n\n logger.debug(&quot;call returned status code {}&quot;, response.statusCode());\n</code></pre>\n<p>The code above only shows 103 as status code ( which is an intermediary status code as you saw in the output of curl).\nHow do I skip that status code + its headers ? I'm only interested in the final (200) status code and the subsequent headers.</p>\n"},{"tags":["java","android","pem","huawei-developers","jks"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":2,"creation_date":1657800970,"post_id":72978826,"comment_id":128899620,"body_markdown":"Are you sure the file is a JavakeyStore file and not a PKCS#12 (.p12) file? Since about a year Java 11+ encrypts PKCS#12 files now with AES instead of 3DES. Older versions of Java only can decrypt such files if 3DES is used. I would try to open the file using https://keystore-explorer.org using the version with integrated JRE. It will display what file type the file is.","body":"Are you sure the file is a JavakeyStore file and not a PKCS#12 (.p12) file? Since about a year Java 11+ encrypts PKCS#12 files now with AES instead of 3DES. Older versions of Java only can decrypt such files if 3DES is used. I would try to open the file using <a href=\"https://keystore-explorer.org\" rel=\"nofollow noreferrer\">keystore-explorer.org</a> using the version with integrated JRE. It will display what file type the file is."},{"owner":{"account_id":2595424,"reputation":1612,"user_id":2249237,"accept_rate":67,"display_name":"Zee"},"score":0,"creation_date":1657801459,"post_id":72978826,"comment_id":128899808,"body_markdown":"Hi @Robert! I downloaded keystore explorer and opened the file. It is indeed a PKCS#12 file, but I followed the steps to make the file as documented here https://developer.android.com/studio/publish/app-signing#sign_release... where they tell you to use .jks in the file name.  Ill update my question to reflect all this then go have a look on how to get .pem from a .p12!","body":"Hi @Robert! I downloaded keystore explorer and opened the file. It is indeed a PKCS#12 file, but I followed the steps to make the file as documented here <a href=\"https://developer.android.com/studio/publish/app-signing#sign_release\" rel=\"nofollow noreferrer\">developer.android.com/studio/publish/app-signing#sign_releas&zwnj;&#8203;e</a>... where they tell you to use .jks in the file name.  Ill update my question to reflect all this then go have a look on how to get .pem from a .p12!"},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1657805494,"post_id":72978826,"comment_id":128901537,"body_markdown":"If you have opened the file in KeystoreExplorer can simply change the keystore type and save it as JKS file. Then file extension and content matches you your command should work fine.","body":"If you have opened the file in KeystoreExplorer can simply change the keystore type and save it as JKS file. Then file extension and content matches you your command should work fine."}],"answers":[{"tags":[],"owner":{"account_id":2595424,"reputation":1612,"user_id":2249237,"accept_rate":67,"display_name":"Zee"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1657808322,"creation_date":1657808322,"answer_id":72982041,"question_id":72978826,"body_markdown":"As Robert pointed out, Android studio now generates a .p12 file (even if you give it a jks extension like in the documentation). \r\n\r\nTo generate a .prem, you can do: \r\n\r\n    openssl pkcs12 -in filename.jks -out filename.pem -nodes\r\n\r\nwhere filename.jks is actually a .p12 file.","title":"Cannot generate .pem from new .jks file","body":"<p>As Robert pointed out, Android studio now generates a .p12 file (even if you give it a jks extension like in the documentation).</p>\n<p>To generate a .prem, you can do:</p>\n<pre><code>openssl pkcs12 -in filename.jks -out filename.pem -nodes\n</code></pre>\n<p>where filename.jks is actually a .p12 file.</p>\n"},{"tags":[],"owner":{"account_id":23376026,"reputation":62,"user_id":17445609,"display_name":"Ivan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660222062,"creation_date":1660222062,"answer_id":73320930,"question_id":72978826,"body_markdown":"If you can use KeysTore Explorer it does all the tricky staff for you.\r\n\r\n[![Keystore Explorer][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Cq9hY.png\r\n\r\nIt&#39;s free and helps a lot\r\n\r\nhttps://keystore-explorer.org/","title":"Cannot generate .pem from new .jks file","body":"<p>If you can use KeysTore Explorer it does all the tricky staff for you.</p>\n<p><a href=\"https://i.stack.imgur.com/Cq9hY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Cq9hY.png\" alt=\"Keystore Explorer\" /></a></p>\n<p>It's free and helps a lot</p>\n<p><a href=\"https://keystore-explorer.org/\" rel=\"nofollow noreferrer\">https://keystore-explorer.org/</a></p>\n"}],"owner":{"account_id":2595424,"reputation":1612,"user_id":2249237,"accept_rate":67,"display_name":"Zee"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":480,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73320930,"answer_count":2,"score":1,"last_activity_date":1660222062,"creation_date":1657793480,"question_id":72978826,"body_markdown":"I want to upload a new app to Huawei App Gallery. To do so, you have to upload a .pem file. According to documentation from Android and Huawei, this is done like so: \r\n\r\n    keytool -export -rfc -keystore upload-keystore.jks -alias upload -file upload_certificate.pem\r\n\r\nHowever, when I try and doo this on my brand new .jks file generated using Android Studio, I get: \r\n&quot;keytool error: java.io.IOException: Invalid keystore format&quot;\r\n\r\nIt works fine on other, older, .jks files though.\r\n\r\nI have no idea what to do. The best I can find is that &#39;Android Studio now runs on JDK 11&#39;; but I don&#39;t know why that would make the jks unreadable for the keytool. \r\n\r\nI&#39;ve tried: \r\n - Updating Java on my Mac (Java 8, Update 291)\r\n - Updating to the latest android studio (Android Studio Chipmunk | 2021.2.1 Patch 1)\r\n\r\n\r\nUPDATE: \r\nAs recommended by Robert, I downloaded keystore-explorer and saw that the &#39;.jks&#39; is actually a .p12 file. [![enter image description here][1]][1]\r\n\r\nWill investigate and update as soon as I figure out how to get the .pem out of it. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KFynb.png","title":"Cannot generate .pem from new .jks file","body":"<p>I want to upload a new app to Huawei App Gallery. To do so, you have to upload a .pem file. According to documentation from Android and Huawei, this is done like so:</p>\n<pre><code>keytool -export -rfc -keystore upload-keystore.jks -alias upload -file upload_certificate.pem\n</code></pre>\n<p>However, when I try and doo this on my brand new .jks file generated using Android Studio, I get:\n&quot;keytool error: java.io.IOException: Invalid keystore format&quot;</p>\n<p>It works fine on other, older, .jks files though.</p>\n<p>I have no idea what to do. The best I can find is that 'Android Studio now runs on JDK 11'; but I don't know why that would make the jks unreadable for the keytool.</p>\n<p>I've tried:</p>\n<ul>\n<li>Updating Java on my Mac (Java 8, Update 291)</li>\n<li>Updating to the latest android studio (Android Studio Chipmunk | 2021.2.1 Patch 1)</li>\n</ul>\n<p>UPDATE:\nAs recommended by Robert, I downloaded keystore-explorer and saw that the '.jks' is actually a .p12 file. <a href=\"https://i.stack.imgur.com/KFynb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KFynb.png\" alt=\"enter image description here\" /></a></p>\n<p>Will investigate and update as soon as I figure out how to get the .pem out of it.</p>\n"},{"tags":["java","sql","jdbc"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1660221056,"post_id":73320616,"comment_id":129484687,"body_markdown":"`if (resultSet.next() return true; return false;` can be more easily debugged.","body":"<code>if (resultSet.next() return true; return false;</code> can be more easily debugged."},{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1660221921,"post_id":73320616,"comment_id":129485009,"body_markdown":"Which database system are you using? A lot of database systems store the case-insensitive (unquoted) table and column names in uppercase.","body":"Which database system are you using? A lot of database systems store the case-insensitive (unquoted) table and column names in uppercase."},{"owner":{"account_id":24490936,"reputation":119,"user_id":18408027,"display_name":"ethicalhacker"},"score":0,"creation_date":1660225913,"post_id":73320616,"comment_id":129486697,"body_markdown":"this error happens only for postgres, with sybase it works fine.\nnote that I added the `.toLowerCase` to get the expression true so after adding `.toLowerCase`, databaseMetaData.getColumns(null, null, TABLE.toLowerCase(), column.toLowerCase()).next() returns true, but then the  resultSet.next() returns false","body":"this error happens only for postgres, with sybase it works fine. note that I added the <code>.toLowerCase</code> to get the expression true so after adding <code>.toLowerCase</code>, databaseMetaData.getColumns(null, null, TABLE.toLowerCase(), column.toLowerCase()).next() returns true, but then the  resultSet.next() returns false"},{"owner":{"account_id":24490936,"reputation":119,"user_id":18408027,"display_name":"ethicalhacker"},"score":0,"creation_date":1660227033,"post_id":73320616,"comment_id":129487197,"body_markdown":"@JoopEggen didn&#39;t get your point","body":"@JoopEggen didn&#39;t get your point"},{"owner":{"account_id":24490936,"reputation":119,"user_id":18408027,"display_name":"ethicalhacker"},"score":0,"creation_date":1660227059,"post_id":73320616,"comment_id":129487213,"body_markdown":"@MarkRotteveel clear ?","body":"@MarkRotteveel clear ?"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1660227694,"post_id":73320616,"comment_id":129487489,"body_markdown":"A new attack. Connect and disconnect the connection in the same method. I still would do something like a `while (resultSet.next()) { logger.info(&quot;Boo&quot;); } logger.info(&quot;Done&quot;); return ...;` Which is pure paranoia. TABLE an other constant.","body":"A new attack. Connect and disconnect the connection in the same method. I still would do something like a <code>while (resultSet.next()) { logger.info(&quot;Boo&quot;); } logger.info(&quot;Done&quot;); return ...;</code> Which is pure paranoia. TABLE an other constant."},{"owner":{"account_id":24490936,"reputation":119,"user_id":18408027,"display_name":"ethicalhacker"},"score":0,"creation_date":1660229433,"post_id":73320616,"comment_id":129488227,"body_markdown":"`try (ResultSet resultSet = databaseMetaData.getColumns(null, null, TABLE.toLowerCase(), column.toLowerCase()))\n            {\n                logger.info(&quot;start&quot;);\n                while (resultSet.next()) { logger.info(&quot;Boo&quot;); } logger.info(&quot;Done&quot;);\n                return resultSet.next();\n            }`\nI added this, start was NOT printed, it&#39;s weird ! @JoopEggen","body":"<code>try (ResultSet resultSet = databaseMetaData.getColumns(null, null, TABLE.toLowerCase(), column.toLowerCase()))             {                 logger.info(&quot;start&quot;);                 while (resultSet.next()) { logger.info(&quot;Boo&quot;); } logger.info(&quot;Done&quot;);                 return resultSet.next();             }</code> I added this, start was NOT printed, it&#39;s weird ! @JoopEggen"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1660229672,"post_id":73320616,"comment_id":129488322,"body_markdown":"Maybe `logger.error` is reached and logs to nirwana. Or log level info of start is not shown. Debugging...","body":"Maybe <code>logger.error</code> is reached and logs to nirwana. Or log level info of start is not shown. Debugging..."}],"owner":{"account_id":24490936,"reputation":119,"user_id":18408027,"display_name":"ethicalhacker"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660221939,"creation_date":1660220626,"question_id":73320616,"body_markdown":"I am debugging this code: \r\n```\r\ntry {\r\n    DatabaseMetaData databaseMetaData = connection.getMetaData();\r\n    try ( ResultSet resultSet = databaseMetaData.getColumns(null, null, TABLE.toLowerCase(), column.toLowerCase()))\r\n    {\r\n        return resultSet.next();\r\n    }\r\n} catch (SQLException e) {\r\n    logger.error(e);\r\n    return false;\r\n}\r\n```\r\n\r\nIn debug, `databaseMetaData.getColumns(null, null, TABLE.toLowerCase(), column.toLowerCase()).next()` gives true, however, `resultSet.next()` is always giving false!\r\n","title":"resultSet.next() always false","body":"<p>I am debugging this code:</p>\n<pre><code>try {\n    DatabaseMetaData databaseMetaData = connection.getMetaData();\n    try ( ResultSet resultSet = databaseMetaData.getColumns(null, null, TABLE.toLowerCase(), column.toLowerCase()))\n    {\n        return resultSet.next();\n    }\n} catch (SQLException e) {\n    logger.error(e);\n    return false;\n}\n</code></pre>\n<p>In debug, <code>databaseMetaData.getColumns(null, null, TABLE.toLowerCase(), column.toLowerCase()).next()</code> gives true, however, <code>resultSet.next()</code> is always giving false!</p>\n"},{"tags":["java","android","kotlin","bluetooth-lowenergy","gatt"],"answers":[{"tags":[],"owner":{"account_id":692529,"reputation":17134,"user_id":556495,"accept_rate":50,"display_name":"Emil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660145557,"creation_date":1660145557,"answer_id":73309006,"question_id":73306336,"body_markdown":"You can implement GATT client and GATT server concurrently. In most cases you don&#39;t need to know that the same app or another app runs the other role as well, so just develop like you usually would have done if you only implemented one role. Just keep in mind that a GATT client cannot communicate with a GATT server on the same device; it must be another physical device.","title":"Android Mobile/Device as a BLE GATT Peripheral &amp; Central Simultaneously","body":"<p>You can implement GATT client and GATT server concurrently. In most cases you don't need to know that the same app or another app runs the other role as well, so just develop like you usually would have done if you only implemented one role. Just keep in mind that a GATT client cannot communicate with a GATT server on the same device; it must be another physical device.</p>\n"}],"owner":{"account_id":25672666,"reputation":71,"user_id":19436650,"display_name":"Mehar Ahmer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":310,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660221835,"creation_date":1660134487,"question_id":73306336,"body_markdown":"I want to make two Android apps using ```BLE &amp; GATT Protocol```. Implementation like that role of the first app is ```GATT Client``` and the role of the second app is ```GATT Server``` ( or *how to make the mobile phone a GATT Peripheral?*) using Kotlin/Java. Both the apps will execute on a same mobile device and when I send an advertisement from one app the second app will receive this broadcast.\r\n\r\nIs there any tutorial or article link other than the android official document where it is clearly explained? Or how should i implement this?","title":"Android Mobile/Device as a BLE GATT Peripheral &amp; Central Simultaneously","body":"<p>I want to make two Android apps using <code>BLE &amp; GATT Protocol</code>. Implementation like that role of the first app is <code>GATT Client</code> and the role of the second app is <code>GATT Server</code> ( or <em>how to make the mobile phone a GATT Peripheral?</em>) using Kotlin/Java. Both the apps will execute on a same mobile device and when I send an advertisement from one app the second app will receive this broadcast.</p>\n<p>Is there any tutorial or article link other than the android official document where it is clearly explained? Or how should i implement this?</p>\n"},{"tags":["java","spring-boot","jpa"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":1,"creation_date":1658931828,"post_id":73139306,"comment_id":129175315,"body_markdown":"You have no transaction in BeforeEach that&#39;s why it fails. But I cannot tell you why it worked before.","body":"You have no transaction in BeforeEach that&#39;s why it fails. But I cannot tell you why it worked before."}],"answers":[{"tags":[],"owner":{"account_id":7743085,"reputation":325,"user_id":5862030,"accept_rate":62,"display_name":"KuSpa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660221242,"creation_date":1660220844,"answer_id":73320651,"question_id":73139306,"body_markdown":"TL;DR: @Transactional in tests should not be done, except you know what you are doing, H2 is weird.\r\n\r\n### Why is `@Transactional` not a good idea?\r\nEvery test is already wrapped in its own transaction by default ([docs](https://docs.spring.io/spring-framework/docs/5.3.x/reference/html/testing.html#testing-introduction)). That&#39;s why it worked beforehand. Nesting another `Transaction` seems to actually confuse Spring as it does not seem to autocommit on every operation anymore as it is supposed to do.\r\n\r\n### H2 is weird\r\nThe problem was that `Address` (please note that `Address` is not my real code but an example of a simalar relation of objects) used an `UUID` as its `id`.\r\n\r\nWe use H2 as a DB for testing which did not create a proper table for `Address` but messed up the id column with a wrong data type with the new update. Thus, it could not find any `Address` by `id`. That&#39;s why the JPAContext errored saying that the address was not existent.\r\n\r\nAdding \r\n```Java\r\n  //...\r\n  @Entity\r\n  public class Address{\r\n  @Column(columnDefinition = &#39;uuid&#39;) &lt;-- add this line\r\n  @Id\r\n  UUID addrId;\r\n  //...\r\n}\r\n```\r\nhelps M2 to determine the correct column type and solves the problem.","title":"`TransientPropertyValueException` when updating Spring Boot from 2.6.7 to 2.7.2","body":"<p>TL;DR: @Transactional in tests should not be done, except you know what you are doing, H2 is weird.</p>\n<h3>Why is <code>@Transactional</code> not a good idea?</h3>\n<p>Every test is already wrapped in its own transaction by default (<a href=\"https://docs.spring.io/spring-framework/docs/5.3.x/reference/html/testing.html#testing-introduction\" rel=\"nofollow noreferrer\">docs</a>). That's why it worked beforehand. Nesting another <code>Transaction</code> seems to actually confuse Spring as it does not seem to autocommit on every operation anymore as it is supposed to do.</p>\n<h3>H2 is weird</h3>\n<p>The problem was that <code>Address</code> (please note that <code>Address</code> is not my real code but an example of a simalar relation of objects) used an <code>UUID</code> as its <code>id</code>.</p>\n<p>We use H2 as a DB for testing which did not create a proper table for <code>Address</code> but messed up the id column with a wrong data type with the new update. Thus, it could not find any <code>Address</code> by <code>id</code>. That's why the JPAContext errored saying that the address was not existent.</p>\n<p>Adding</p>\n<pre><code>  //...\n  @Entity\n  public class Address{\n  @Column(columnDefinition = 'uuid') &lt;-- add this line\n  @Id\n  UUID addrId;\n  //...\n}\n</code></pre>\n<p>helps M2 to determine the correct column type and solves the problem.</p>\n"}],"owner":{"account_id":7743085,"reputation":325,"user_id":5862030,"accept_rate":62,"display_name":"KuSpa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":168,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73320651,"answer_count":1,"score":0,"last_activity_date":1660221242,"creation_date":1658930293,"question_id":73139306,"body_markdown":"I have the following code in a Spring boot integration test class:\r\n\r\n```java\r\n@Autowired\r\nprivate AddressRepository addressRepository;\r\n// other Repositories that all extend CrudRepository \r\n\r\n@BeforeEach\r\nvoid init(){\r\n  Address address = new Address();\r\n  // Set up address\r\n  address = addressRepository.save(address); //&lt;-- address properly persisted?\r\n\r\n  Building building = new Building();\r\n  building.setAddress(address); \r\n  buildingRepository.save(building); //&lt;-- throws error\r\n}\r\n```\r\n\r\nwhere \r\n```java\r\n@Entity\r\nclass Building {\r\n  @ManyToOne(fetch = FetchType.LAZY, optional = false)\r\n  Address address;\r\n  //...\r\n}\r\n```\r\n\r\nand the pom.xml:\r\n```xml\r\n//...\r\n &lt;parent&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    &lt;version&gt;2.7.2&lt;/version&gt;//&lt;-- upping the version breaks things\r\n    &lt;relativePath/&gt;\r\n  &lt;/parent&gt;\r\n//...\r\n```\r\n\r\nwhich runs smooth on Spring Boot 2.6.7. After upgrading to 2.7.2 however, saving the `building` now throws a `org.hibernate.TransientPropertyValueException: Not-null property references a transient value - transient instance must be saved before current operation`. If I understood correctly, Spring thinks that `address` is not yet persisted and thus cannot store its reference in the `building`. But it is already persisted in line two of `init`?\r\n\r\nWhat am I missing?","title":"`TransientPropertyValueException` when updating Spring Boot from 2.6.7 to 2.7.2","body":"<p>I have the following code in a Spring boot integration test class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Autowired\nprivate AddressRepository addressRepository;\n// other Repositories that all extend CrudRepository \n\n@BeforeEach\nvoid init(){\n  Address address = new Address();\n  // Set up address\n  address = addressRepository.save(address); //&lt;-- address properly persisted?\n\n  Building building = new Building();\n  building.setAddress(address); \n  buildingRepository.save(building); //&lt;-- throws error\n}\n</code></pre>\n<p>where</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\nclass Building {\n  @ManyToOne(fetch = FetchType.LAZY, optional = false)\n  Address address;\n  //...\n}\n</code></pre>\n<p>and the pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>//...\n &lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.7.2&lt;/version&gt;//&lt;-- upping the version breaks things\n    &lt;relativePath/&gt;\n  &lt;/parent&gt;\n//...\n</code></pre>\n<p>which runs smooth on Spring Boot 2.6.7. After upgrading to 2.7.2 however, saving the <code>building</code> now throws a <code>org.hibernate.TransientPropertyValueException: Not-null property references a transient value - transient instance must be saved before current operation</code>. If I understood correctly, Spring thinks that <code>address</code> is not yet persisted and thus cannot store its reference in the <code>building</code>. But it is already persisted in line two of <code>init</code>?</p>\n<p>What am I missing?</p>\n"},{"tags":["java","keycloak"],"comments":[{"owner":{"account_id":8531396,"reputation":661,"user_id":6394930,"display_name":"Rafid"},"score":0,"creation_date":1675919114,"post_id":73320645,"comment_id":133032360,"body_markdown":"did you extend the EventType?","body":"did you extend the EventType?"},{"owner":{"account_id":5390879,"reputation":408,"user_id":4293446,"accept_rate":73,"display_name":"Pan Wolodyjowsky"},"score":0,"creation_date":1675948229,"post_id":73320645,"comment_id":133039840,"body_markdown":"Hi, no. In the end I stored successful MFA date in User Attributes. I don&#39;t think extending EventType is possible atm.","body":"Hi, no. In the end I stored successful MFA date in User Attributes. I don&#39;t think extending EventType is possible atm."}],"owner":{"account_id":5390879,"reputation":408,"user_id":4293446,"accept_rate":73,"display_name":"Pan Wolodyjowsky"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":308,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660221126,"creation_date":1660220798,"question_id":73320645,"body_markdown":"I have Keycloak extension for MFA using codes sent by emails. On successful MFA I would like to send custom &quot;MFA&quot; event.\r\n\r\nI know that Keycloak sends and stores events on various actions like Login, Login_error, Logout etc. I found api to create and send events, but this requires EventType enum as parameter that i am not sure how to extend or if this is even possible.\r\n\r\n```\r\nEventBuilder event = context.getEvent();\r\nevent.event(&quot;MFA&quot;); // This need to be EventType enum, therefore &quot;MFA&quot; does not work/compile\r\nevent.success();\r\ncontext.success();\r\n```\r\n\r\nBroader context is that I am developing conditional authenticator that is supposed to trigger MFA authenticator based on date of last successful MFA. After successful MFA I would like to send an event, and then in conditional authenticator I would like to look for last success MFA event for given user.\r\n\r\nThe only examples i found on the web are how to implement custom event listeners for already existing events within Keycloak.\r\n","title":"Keycloak extend EventType","body":"<p>I have Keycloak extension for MFA using codes sent by emails. On successful MFA I would like to send custom &quot;MFA&quot; event.</p>\n<p>I know that Keycloak sends and stores events on various actions like Login, Login_error, Logout etc. I found api to create and send events, but this requires EventType enum as parameter that i am not sure how to extend or if this is even possible.</p>\n<pre><code>EventBuilder event = context.getEvent();\nevent.event(&quot;MFA&quot;); // This need to be EventType enum, therefore &quot;MFA&quot; does not work/compile\nevent.success();\ncontext.success();\n</code></pre>\n<p>Broader context is that I am developing conditional authenticator that is supposed to trigger MFA authenticator based on date of last successful MFA. After successful MFA I would like to send an event, and then in conditional authenticator I would like to look for last success MFA event for given user.</p>\n<p>The only examples i found on the web are how to implement custom event listeners for already existing events within Keycloak.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","transactions"],"comments":[{"owner":{"account_id":17750,"reputation":25470,"user_id":40064,"accept_rate":69,"display_name":"Wim Deblauwe"},"score":0,"creation_date":1636388848,"post_id":69885782,"comment_id":123537512,"body_markdown":"Not saying it would make a difference, but did you check if you are importing the same `@Transactional` everywhere (There are 2: the JPA one and the Spring one)?","body":"Not saying it would make a difference, but did you check if you are importing the same <code>@Transactional</code> everywhere (There are 2: the JPA one and the Spring one)?"},{"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"score":0,"creation_date":1636390543,"post_id":69885782,"comment_id":123538242,"body_markdown":"@WimDeblauwe I just checked. It uses the `org.springframework.transaction.annotation.Transactional` one.","body":"@WimDeblauwe I just checked. It uses the <code>org.springframework.transaction.annotation.Transactional</code> one."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1636397171,"post_id":69885782,"comment_id":123540866,"body_markdown":"I suspect everything just works and you are just thrown off by the fact you have TRACE logging enabled.","body":"I suspect everything just works and you are just thrown off by the fact you have TRACE logging enabled."},{"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"score":0,"creation_date":1636397494,"post_id":69885782,"comment_id":123540985,"body_markdown":"@M.Deinum what do you mean exactly? I deliberately turned TRACE on by setting `logging.level.org.springframework.transaction.interceptor` to `TRACE` so that i could check whether a transaction was created by the annotated method. This turned out to be the case, but de JpaRepository methods are doing the same according to the log. They need to use the transaction opened by the calling method, not start their own.","body":"@M.Deinum what do you mean exactly? I deliberately turned TRACE on by setting <code>logging.level.org.springframework.transaction.interceptor</code> to <code>TRACE</code> so that i could check whether a transaction was created by the annotated method. This turned out to be the case, but de JpaRepository methods are doing the same according to the log. They need to use the transaction opened by the calling method, not start their own."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1636398299,"post_id":69885782,"comment_id":123541205,"body_markdown":"For the full picture you should enable debug/trace logging for `org.springframework.transaction`. You are now only looking at a single part of the logging. Also if you want your `customTransactionManager` to be used you need to specify that in the `@Transactional` annotation, else it will use the default one. Another tip ditch `@Repository` on your interface, it doesn&#39;t do anything, I would also remove hte `@Transactional` (that doesn&#39;t add anything either).","body":"For the full picture you should enable debug/trace logging for <code>org.springframework.transaction</code>. You are now only looking at a single part of the logging. Also if you want your <code>customTransactionManager</code> to be used you need to specify that in the <code>@Transactional</code> annotation, else it will use the default one. Another tip ditch <code>@Repository</code> on your interface, it doesn&#39;t do anything, I would also remove hte <code>@Transactional</code> (that doesn&#39;t add anything either)."},{"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"score":0,"creation_date":1636398638,"post_id":69885782,"comment_id":123541308,"body_markdown":"@M.Deinum isn&#39;t @Repository necessary for component scanning to work? If i remove @Transactional from the repository i&#39;ll get more of these `This method is not transactional.`. You should look at the implementation of `SimpleJpaRepository`. Every method in that implementation is annotated with `@Transactional` and the class itself is annotated with `@Transactional(readOnly=true)`. Putting @Transactional at the class level ensures that all of my custom jpa methods also get this annotation.","body":"@M.Deinum isn&#39;t @Repository necessary for component scanning to work? If i remove @Transactional from the repository i&#39;ll get more of these <code>This method is not transactional.</code>. You should look at the implementation of <code>SimpleJpaRepository</code>. Every method in that implementation is annotated with <code>@Transactional</code> and the class itself is annotated with <code>@Transactional(readOnly=true)</code>. Putting @Transactional at the class level ensures that all of my custom jpa methods also get this annotation."},{"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"score":0,"creation_date":1636398832,"post_id":69885782,"comment_id":123541353,"body_markdown":"@M.Deinum `org.springframework.transaction` doesnt work btw, Only `logging.level.org.springframework.transaction` does. Perhaps because i&#39;m not using Logback but Log4J2 for logging.","body":"@M.Deinum <code>org.springframework.transaction</code> doesnt work btw, Only <code>logging.level.org.springframework.transaction</code> does. Perhaps because i&#39;m not using Logback but Log4J2 for logging."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1636399005,"post_id":69885782,"comment_id":123541416,"body_markdown":"I was stating the name of the package **not** the name of the property. No `@Repository` isn&#39;t needed on a Spring Data repository that uses different means to determine those. And as stated you are using `customTransactionManager` for JPA not the default `transactionManager` when nothing is specified it will use the default, except for Spring Data JPA as that internally manages the tx (that is the hint in `@EnableJpaRepositories`. Main issue here is multiple transaction managers and using them mixed together.","body":"I was stating the name of the package <b>not</b> the name of the property. No <code>@Repository</code> isn&#39;t needed on a Spring Data repository that uses different means to determine those. And as stated you are using <code>customTransactionManager</code> for JPA not the default <code>transactionManager</code> when nothing is specified it will use the default, except for Spring Data JPA as that internally manages the tx (that is the hint in <code>@EnableJpaRepositories</code>. Main issue here is multiple transaction managers and using them mixed together."},{"owner":{"account_id":1550597,"reputation":8924,"user_id":1443084,"display_name":"Shailendra"},"score":0,"creation_date":1636399045,"post_id":69885782,"comment_id":123541433,"body_markdown":"@Maurice - can you add the code for Language entity as well. It will become easier to test.","body":"@Maurice - can you add the code for Language entity as well. It will become easier to test."},{"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"score":0,"creation_date":1636399130,"post_id":69885782,"comment_id":123541470,"body_markdown":"@Shailendra there is no problem with the language entity. The same problem occurs when calling the method of any jpa repository i have.","body":"@Shailendra there is no problem with the language entity. The same problem occurs when calling the method of any jpa repository i have."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1636399199,"post_id":69885782,"comment_id":123541498,"body_markdown":"@Maurice that is due to the multiple transaction managers and not specifing which one to use.","body":"@Maurice that is due to the multiple transaction managers and not specifing which one to use."},{"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"score":0,"creation_date":1636399868,"post_id":69885782,"comment_id":123541739,"body_markdown":"@M.Deinum i just renamed the transactionmanager to &#39;transactionManager&#39; i also reset the parameters of `@EnableTransactionManagement`. `@Transactional` is now explicitly using transactionmanager as the manager.  But despite all of this the individual method calls are still creating their own transactions!","body":"@M.Deinum i just renamed the transactionmanager to &#39;transactionManager&#39; i also reset the parameters of <code>@EnableTransactionManagement</code>. <code>@Transactional</code> is now explicitly using transactionmanager as the manager.  But despite all of this the individual method calls are still creating their own transactions!"},{"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"score":0,"creation_date":1636399924,"post_id":69885782,"comment_id":123541764,"body_markdown":"@M.Deinum this is what the documentation says about `@Repository`. `As of Spring 2.5, this annotation also serves as a specialization of @Component, allowing for implementation classes to be autodetected through classpath scanning.`. So it does have its use. It helps with autodetection.","body":"@M.Deinum this is what the documentation says about <code>@Repository</code>. <code>As of Spring 2.5, this annotation also serves as a specialization of @Component, allowing for implementation classes to be autodetected through classpath scanning.</code>. So it does have its use. It helps with autodetection."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1636400544,"post_id":69885782,"comment_id":123541971,"body_markdown":"Trust me it doesn&#39;t in this case as (and as stated before) Spring Data has other means. If that stil doesn&#39;t work (as it should do) you aren&#39;t giving the full picture here. Also why the custom transaction manager? Why that setup why not use the default one? Basically I don&#39;t get your setup and you are probably leaving things out of this question.","body":"Trust me it doesn&#39;t in this case as (and as stated before) Spring Data has other means. If that stil doesn&#39;t work (as it should do) you aren&#39;t giving the full picture here. Also why the custom transaction manager? Why that setup why not use the default one? Basically I don&#39;t get your setup and you are probably leaving things out of this question."},{"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"score":0,"creation_date":1636403292,"post_id":69885782,"comment_id":123542863,"body_markdown":"@M.Deinum what more information do you need then? I&#39;ve already posted the code of the TransactionManager, the hibernate settings etc.","body":"@M.Deinum what more information do you need then? I&#39;ve already posted the code of the TransactionManager, the hibernate settings etc."}],"answers":[{"tags":[],"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636484160,"creation_date":1636419385,"answer_id":69891621,"question_id":69885782,"body_markdown":"After having tried different things, including using a `TransactionTemplate` i&#39;ve settled for the following solution:\r\n\r\nFirst i&#39;ve turned off the default transaction policy for the jparepository methods by annotating a `configuration` class with the following: \r\n\r\n`@EnableJpaRepositories(enableDefaultTransactions = false)`\r\n\r\n`enableDefaultTransactions = false` causes any inherited method of JpaRepository to stop creating a transaction whenever they&#39;re called. Only jpa methods that are explicitly annotated with `@Transactional` will continue to create a new transaction when called.\r\n\r\nAll the other ones will now use any transaction that is started by the calling method, for instance a service method that is annotated with `@Transactional`.\r\n\r\nThis isn&#39;t obvious though because the `This method is not transactional` log trace message will still be generated for any jpa method that isn&#39;t explicitly annotated with @Transactional. This can be a bit confusing. \r\n\r\nHowever i&#39;ve proven that these methods really do use the transaction of the calling method by testing it with the following custom update method. \r\n\r\n    @Modifying\r\n    @Query(&quot;UPDATE User u SET u.userStatus = 1 WHERE u.userStatus = 0&quot;)\r\n    public void resetActiveUserAccountsToStatusOffline();  \r\n\r\nSuch a method *needs* to have a transaction or else the exception `javax.persistence.TransactionRequiredException: Executing an update/delete query` is thrown. But as you can see this jpa method wasn&#39;t annotated with `@Transactional` so it really did use the transaction that was started by the calling service method.\r\n\r\nThere is one small disadvantage to setting `enableDefaultTransactions = false` and that is that the transaction type of inherited methods like `findAll` will not always use a transaction that is read only. This really depends on whether the service level transaction is readonly or not. However you could still override the findAll method and explictly annotate it with `Transactional(readOnly = false)`. Another thing to beware of is that any calling method must always be annotated with @Transactional or the jpa method will run outside a transaction.\r\n\r\nI think the advantage far outweighs these small disadvantages though. Because it is very costly performance wise when a new transaction is created for every jpa method call. So this is the solution i&#39;ll settle for right now.\r\n\r\nTo test your own transactions you&#39;ll need to add this to your application.properties\r\n\r\n`logging.level.org.springframework.transaction.interceptor=TRACE`\r\n\r\nIf the setting doesn&#39;t work please add `Log4j2` to your project.\r\n\r\nEDIT:\r\n\r\nThese additional transactions that are opened by the JpaMethods are only `logical transactions` when a `physical transaction` has already been created by the calling method. More about this here: https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#transaction\r\nThese jpa methods still use the transaction created by the calling method.\r\n\r\nThe last answer in this SO thread also explains the difference between logical and physical transactions well: https://stackoverflow.com/questions/16731524/difference-between-physical-and-logical-transactions-in-spring","title":"Spring opens a new transaction for each JpaRepository method that is called within an @Transactional annotated method","body":"<p>After having tried different things, including using a <code>TransactionTemplate</code> i've settled for the following solution:</p>\n<p>First i've turned off the default transaction policy for the jparepository methods by annotating a <code>configuration</code> class with the following:</p>\n<p><code>@EnableJpaRepositories(enableDefaultTransactions = false)</code></p>\n<p><code>enableDefaultTransactions = false</code> causes any inherited method of JpaRepository to stop creating a transaction whenever they're called. Only jpa methods that are explicitly annotated with <code>@Transactional</code> will continue to create a new transaction when called.</p>\n<p>All the other ones will now use any transaction that is started by the calling method, for instance a service method that is annotated with <code>@Transactional</code>.</p>\n<p>This isn't obvious though because the <code>This method is not transactional</code> log trace message will still be generated for any jpa method that isn't explicitly annotated with @Transactional. This can be a bit confusing.</p>\n<p>However i've proven that these methods really do use the transaction of the calling method by testing it with the following custom update method.</p>\n<pre><code>@Modifying\n@Query(&quot;UPDATE User u SET u.userStatus = 1 WHERE u.userStatus = 0&quot;)\npublic void resetActiveUserAccountsToStatusOffline();  \n</code></pre>\n<p>Such a method <em>needs</em> to have a transaction or else the exception <code>javax.persistence.TransactionRequiredException: Executing an update/delete query</code> is thrown. But as you can see this jpa method wasn't annotated with <code>@Transactional</code> so it really did use the transaction that was started by the calling service method.</p>\n<p>There is one small disadvantage to setting <code>enableDefaultTransactions = false</code> and that is that the transaction type of inherited methods like <code>findAll</code> will not always use a transaction that is read only. This really depends on whether the service level transaction is readonly or not. However you could still override the findAll method and explictly annotate it with <code>Transactional(readOnly = false)</code>. Another thing to beware of is that any calling method must always be annotated with @Transactional or the jpa method will run outside a transaction.</p>\n<p>I think the advantage far outweighs these small disadvantages though. Because it is very costly performance wise when a new transaction is created for every jpa method call. So this is the solution i'll settle for right now.</p>\n<p>To test your own transactions you'll need to add this to your application.properties</p>\n<p><code>logging.level.org.springframework.transaction.interceptor=TRACE</code></p>\n<p>If the setting doesn't work please add <code>Log4j2</code> to your project.</p>\n<p>EDIT:</p>\n<p>These additional transactions that are opened by the JpaMethods are only <code>logical transactions</code> when a <code>physical transaction</code> has already been created by the calling method. More about this here: <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#transaction\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#transaction</a>\nThese jpa methods still use the transaction created by the calling method.</p>\n<p>The last answer in this SO thread also explains the difference between logical and physical transactions well: <a href=\"https://stackoverflow.com/questions/16731524/difference-between-physical-and-logical-transactions-in-spring\">Difference between physical and logical transactions in spring</a></p>\n"},{"tags":[],"owner":{"account_id":1550597,"reputation":8924,"user_id":1443084,"display_name":"Shailendra"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1636442219,"creation_date":1636442219,"answer_id":69894165,"question_id":69885782,"body_markdown":"Here is my attempt at understanding your problem. I would recommend enabling extra debug \r\n\r\n    logging.level.org.springframework.orm.jpa.JpaTransactionManager=DEBUG\r\n\r\nMy test Service class - note that this is marked as transactional - for now that&#39;s the only place it is put as that&#39;s what we intend - to create a transactional boundary.\r\n\r\n    @Service\r\n    public class LanguageService {\r\n    \r\n    \t@Autowired\r\n    \tprivate LanguageRepository languageRepository;\r\n    \r\n    \t@Transactional\r\n    \tpublic void runAllMethods() {\r\n    \t\tlanguageRepository.findByLanguageCode(&quot;en&quot;);\r\n    \t\tlanguageRepository.findAll();\r\n    \t\tlanguageRepository.findByIdNotNull();\r\n    \t}\r\n    \r\n    }\r\n\r\nNext is the repository - there are no transactional annotations.\r\n\r\n    public interface LanguageRepository extends JpaRepository&lt;Language, Long&gt; {\r\n    \r\n    \tpublic Language findByLanguageCode(String languageCode);\r\n    \r\n    \tpublic Language findByIdNotNull();\r\n    \r\n    }\r\n\r\n\r\nNow on hitting the service via a controller - I get below logs. Notice the line where it says &quot;Creating new transaction with name [com.shailendra.transaction_demo.service.LanguageService.runAllMethods]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT&quot; - meaning that the transaction was created at the beginning of method invocation.\r\n\r\nAlso note the statement &quot;Participating in existing transaction&quot; which indicates that method is participating in transaction.\r\n\r\n\r\n\r\n    2021-11-09 11:43:06.061 DEBUG 24956 --- [nio-8181-exec-1] o.s.orm.jpa.JpaTransactionManager        : Found thread-bound EntityManager [SessionImpl(2084817241&lt;open&gt;)] for JPA transaction\r\n    2021-11-09 11:43:06.061 DEBUG 24956 --- [nio-8181-exec-1] o.s.orm.jpa.JpaTransactionManager        : Creating new transaction with name [com.shailendra.transaction_demo.service.LanguageService.runAllMethods]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT\r\n    2021-11-09 11:43:06.069 DEBUG 24956 --- [nio-8181-exec-1] o.s.orm.jpa.JpaTransactionManager        : Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3107a702]\r\n    2021-11-09 11:43:06.069 TRACE 24956 --- [nio-8181-exec-1] o.s.t.i.TransactionInterceptor           : Getting transaction for [com.shailendra.transaction_demo.service.LanguageService.runAllMethods]\r\n    2021-11-09 11:43:06.099 TRACE 24956 --- [nio-8181-exec-1] o.s.t.i.TransactionInterceptor           : No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByLanguageCode]: This method is not transactional.\r\n    Hibernate: select language0_.id as id1_0_, language0_.date_created as date_cre2_0_, language0_.english_language_name as english_3_0_, language0_.language_code as language4_0_, language0_.right_to_left as right_to5_0_, language0_.translated_language_name as translat6_0_ from language language0_ where language0_.language_code=?\r\n    2021-11-09 11:43:06.333 DEBUG 24956 --- [nio-8181-exec-1] o.s.orm.jpa.JpaTransactionManager        : Found thread-bound EntityManager [SessionImpl(2084817241&lt;open&gt;)] for JPA transaction\r\n    2021-11-09 11:43:06.333 DEBUG 24956 --- [nio-8181-exec-1] o.s.orm.jpa.JpaTransactionManager        : Participating in existing transaction\r\n    2021-11-09 11:43:06.333 TRACE 24956 --- [nio-8181-exec-1] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll]\r\n    Hibernate: select language0_.id as id1_0_, language0_.date_created as date_cre2_0_, language0_.english_language_name as english_3_0_, language0_.language_code as language4_0_, language0_.right_to_left as right_to5_0_, language0_.translated_language_name as translat6_0_ from language language0_\r\n    2021-11-09 11:43:06.348 TRACE 24956 --- [nio-8181-exec-1] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll]\r\n    2021-11-09 11:43:06.348 TRACE 24956 --- [nio-8181-exec-1] o.s.t.i.TransactionInterceptor           : No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByIdNotNull]: This method is not transactional.\r\n    Hibernate: select language0_.id as id1_0_, language0_.date_created as date_cre2_0_, language0_.english_language_name as english_3_0_, language0_.language_code as language4_0_, language0_.right_to_left as right_to5_0_, language0_.translated_language_name as translat6_0_ from language language0_ where language0_.id is not null\r\n    2021-11-09 11:43:06.348 TRACE 24956 --- [nio-8181-exec-1] o.s.t.i.TransactionInterceptor           : Completing transaction for [com.shailendra.transaction_demo.service.LanguageService.runAllMethods]\r\n    2021-11-09 11:43:06.348 DEBUG 24956 --- [nio-8181-exec-1] o.s.orm.jpa.JpaTransactionManager        : Initiating transaction commit\r\n    2021-11-09 11:43:06.348 DEBUG 24956 --- [nio-8181-exec-1] o.s.orm.jpa.JpaTransactionManager        : Committing JPA transaction on EntityManager [SessionImpl(2084817241&lt;open&gt;)]\r\n\r\n\r\n\r\nFor readonly methods - like findAll - you would see &quot;No need to create transaction&quot; - that&#39;s because although the default Repository implementation &quot;SimpleJpaRepository&quot; is  marked as transactional - the readonly methods are not marked transactional.\r\n\r\n\r\n    @Repository\r\n    @Transactional(readOnly = true)\r\n    public class SimpleJpaRepository&lt;T, ID&gt; implements JpaRepositoryImplementation&lt;T, ID&gt; {","title":"Spring opens a new transaction for each JpaRepository method that is called within an @Transactional annotated method","body":"<p>Here is my attempt at understanding your problem. I would recommend enabling extra debug</p>\n<pre><code>logging.level.org.springframework.orm.jpa.JpaTransactionManager=DEBUG\n</code></pre>\n<p>My test Service class - note that this is marked as transactional - for now that's the only place it is put as that's what we intend - to create a transactional boundary.</p>\n<pre><code>@Service\npublic class LanguageService {\n\n    @Autowired\n    private LanguageRepository languageRepository;\n\n    @Transactional\n    public void runAllMethods() {\n        languageRepository.findByLanguageCode(&quot;en&quot;);\n        languageRepository.findAll();\n        languageRepository.findByIdNotNull();\n    }\n\n}\n</code></pre>\n<p>Next is the repository - there are no transactional annotations.</p>\n<pre><code>public interface LanguageRepository extends JpaRepository&lt;Language, Long&gt; {\n\n    public Language findByLanguageCode(String languageCode);\n\n    public Language findByIdNotNull();\n\n}\n</code></pre>\n<p>Now on hitting the service via a controller - I get below logs. Notice the line where it says &quot;Creating new transaction with name [com.shailendra.transaction_demo.service.LanguageService.runAllMethods]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT&quot; - meaning that the transaction was created at the beginning of method invocation.</p>\n<p>Also note the statement &quot;Participating in existing transaction&quot; which indicates that method is participating in transaction.</p>\n<pre><code>2021-11-09 11:43:06.061 DEBUG 24956 --- [nio-8181-exec-1] o.s.orm.jpa.JpaTransactionManager        : Found thread-bound EntityManager [SessionImpl(2084817241&lt;open&gt;)] for JPA transaction\n2021-11-09 11:43:06.061 DEBUG 24956 --- [nio-8181-exec-1] o.s.orm.jpa.JpaTransactionManager        : Creating new transaction with name [com.shailendra.transaction_demo.service.LanguageService.runAllMethods]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT\n2021-11-09 11:43:06.069 DEBUG 24956 --- [nio-8181-exec-1] o.s.orm.jpa.JpaTransactionManager        : Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3107a702]\n2021-11-09 11:43:06.069 TRACE 24956 --- [nio-8181-exec-1] o.s.t.i.TransactionInterceptor           : Getting transaction for [com.shailendra.transaction_demo.service.LanguageService.runAllMethods]\n2021-11-09 11:43:06.099 TRACE 24956 --- [nio-8181-exec-1] o.s.t.i.TransactionInterceptor           : No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByLanguageCode]: This method is not transactional.\nHibernate: select language0_.id as id1_0_, language0_.date_created as date_cre2_0_, language0_.english_language_name as english_3_0_, language0_.language_code as language4_0_, language0_.right_to_left as right_to5_0_, language0_.translated_language_name as translat6_0_ from language language0_ where language0_.language_code=?\n2021-11-09 11:43:06.333 DEBUG 24956 --- [nio-8181-exec-1] o.s.orm.jpa.JpaTransactionManager        : Found thread-bound EntityManager [SessionImpl(2084817241&lt;open&gt;)] for JPA transaction\n2021-11-09 11:43:06.333 DEBUG 24956 --- [nio-8181-exec-1] o.s.orm.jpa.JpaTransactionManager        : Participating in existing transaction\n2021-11-09 11:43:06.333 TRACE 24956 --- [nio-8181-exec-1] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll]\nHibernate: select language0_.id as id1_0_, language0_.date_created as date_cre2_0_, language0_.english_language_name as english_3_0_, language0_.language_code as language4_0_, language0_.right_to_left as right_to5_0_, language0_.translated_language_name as translat6_0_ from language language0_\n2021-11-09 11:43:06.348 TRACE 24956 --- [nio-8181-exec-1] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll]\n2021-11-09 11:43:06.348 TRACE 24956 --- [nio-8181-exec-1] o.s.t.i.TransactionInterceptor           : No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByIdNotNull]: This method is not transactional.\nHibernate: select language0_.id as id1_0_, language0_.date_created as date_cre2_0_, language0_.english_language_name as english_3_0_, language0_.language_code as language4_0_, language0_.right_to_left as right_to5_0_, language0_.translated_language_name as translat6_0_ from language language0_ where language0_.id is not null\n2021-11-09 11:43:06.348 TRACE 24956 --- [nio-8181-exec-1] o.s.t.i.TransactionInterceptor           : Completing transaction for [com.shailendra.transaction_demo.service.LanguageService.runAllMethods]\n2021-11-09 11:43:06.348 DEBUG 24956 --- [nio-8181-exec-1] o.s.orm.jpa.JpaTransactionManager        : Initiating transaction commit\n2021-11-09 11:43:06.348 DEBUG 24956 --- [nio-8181-exec-1] o.s.orm.jpa.JpaTransactionManager        : Committing JPA transaction on EntityManager [SessionImpl(2084817241&lt;open&gt;)]\n</code></pre>\n<p>For readonly methods - like findAll - you would see &quot;No need to create transaction&quot; - that's because although the default Repository implementation &quot;SimpleJpaRepository&quot; is  marked as transactional - the readonly methods are not marked transactional.</p>\n<pre><code>@Repository\n@Transactional(readOnly = true)\npublic class SimpleJpaRepository&lt;T, ID&gt; implements JpaRepositoryImplementation&lt;T, ID&gt; {\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20867359,"reputation":101,"user_id":15328090,"display_name":"Igor"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660220983,"creation_date":1660140013,"answer_id":73307656,"question_id":69885782,"body_markdown":"Experienced same issue while having multiple datasources, hence multiple transaction managers. Apparently the problem was that service methods marked `@Transactional` used the primary transaction manager, while the repositories were configured to use custom transaction manager:\r\n\r\n    @EnableJpaRepositories(\r\n        basePackageClasses = {\r\n            MyRepository.class\r\n        },\r\n        entityManagerFactoryRef = &quot;customEntityManager&quot;,\r\n        transactionManagerRef = &quot;customTransactionManager&quot;\r\n    )\r\n\r\nSolved the issue using spring&#39;s annotation on service methods with `transactionManager` param specified `@Transactional(transactionManager = &quot;customTransactionManager&quot;)`","title":"Spring opens a new transaction for each JpaRepository method that is called within an @Transactional annotated method","body":"<p>Experienced same issue while having multiple datasources, hence multiple transaction managers. Apparently the problem was that service methods marked <code>@Transactional</code> used the primary transaction manager, while the repositories were configured to use custom transaction manager:</p>\n<pre><code>@EnableJpaRepositories(\n    basePackageClasses = {\n        MyRepository.class\n    },\n    entityManagerFactoryRef = &quot;customEntityManager&quot;,\n    transactionManagerRef = &quot;customTransactionManager&quot;\n)\n</code></pre>\n<p>Solved the issue using spring's annotation on service methods with <code>transactionManager</code> param specified <code>@Transactional(transactionManager = &quot;customTransactionManager&quot;)</code></p>\n"}],"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5555,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"answer_count":3,"score":1,"last_activity_date":1660220983,"creation_date":1636384502,"question_id":69885782,"body_markdown":"I have a method that is annotated with `@Transactional`. That should mean that any database queries that are fired within this method should all use the same transaction. But in reality that doesn&#39;t happen. What does happen is that a transaction is opened for the method itself but then when the first `JpaRepository` method is called a new transaction is opened for that particular method call. \r\n\r\nTo make matters more complex, For custom repository methods this new transaction is **only** opened when the `JpaRepository` or the `JpaRepository custom method` is annotated with `@Transactional` as well.\r\nIf not i get the following trace log statement about it:\r\n\r\n&gt; No need to create transaction for\r\n&gt; [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findFirstByIdNotNull]:\r\n&gt; This method is not transactional.\r\n\r\nSo it doesn&#39;t create a new transaction but it also doesn&#39;t seem to use the transaction created by the calling method either.\r\n\r\nHeres the repository class:\r\n\r\n    @Repository\r\n    public interface LanguageDao extends JpaRepository&lt;Language, Long&gt; {\r\n    \r\n    @Transactional\r\n    public Language findByLanguageCode(String languageCode);\r\n    \r\n    public Language findByIdNotNull();\r\n    \r\n    }\r\n\r\nHeres the method that uses different repository methods.\r\n\r\n    @Transactional\r\n    public void afterSingletonsInstantiated() {\r\n        languageDao.findByLanguageCode(); //This custom method opens a new transaction, but only because i&#39;ve annotated this method with @Transactional as well.\r\n        languageDao.findAll(); //This one as well because its a standard JpaRepository method.\r\n        languageDao.findByIdNotNull();//This custom method doesn&#39;t because it lacks its own @Transactional annotation.\r\n    }\r\n\r\nHeres the @Configuration file, with transaction management and jpa repositories enabled\r\n\r\n    @EnableJpaRepositories(basePackages={&quot;DAOs&quot;}, transactionManagerRef = &quot;customTransactionManager&quot;, enableDefaultTransactions = true)\r\n    @EnableTransactionManagement\r\n    @Configuration\r\n    public class RootConfig implements InitializingBean {\r\n    \r\n        @Bean(name = &quot;customTransactionManager&quot;)\r\n        JpaTransactionManager transactionManager(EntityManagerFactory entityManagerFactory) {\r\n            JpaTransactionManager transactionManager = new JpaTransactionManager();\r\n            transactionManager.setEntityManagerFactory(entityManagerFactory);\r\n            if (shouldCreateInitialLuceneIndex) { \r\n                EntityManager entityManager = entityManagerFactory.createEntityManager();\r\n                createInitialLuceneIndex(entityManager);\r\n                entityManager.close();\r\n            }\r\n            return transactionManager;\r\n        }\r\n    }\r\n\r\nRelevant `application.properties` settings\r\n\r\n    spring.jpa.hibernate.naming-strategy = org.hibernate.cfg.ImprovedNamingStrategy\r\n    spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5InnoDBDialect\r\n    spring.jpa.database-platform = org.hibernate.dialect.MySQL5InnoDBDialect\r\n    spring.jpa.open-in-view = false\r\n\r\nA bit of actual logs. The first line shows that a transaction for the method `afterSingletonsInstantiated` is created.\r\n\r\n    [TRACE] 2021-11-08 15:32:40.811 [main] TransactionInterceptor - Getting transaction for [config.StartupChecks$$EnhancerBySpringCGLIB$$134b7631.afterSingletonsInstantiated]\r\n    [INFO ] 2021-11-08 15:32:40.815 [main] StartupChecks - Calling sequence table reset procedure\r\n    [DEBUG] 2021-11-08 15:32:40.833 [main] SQL - {call RESET_SEQUENCE_TABLE_VALUES_TO_LATEST_ID_VALUES()}\r\n    [INFO ] 2021-11-08 15:32:41.087 [main] StartupChecks - Sequence tables reset call finished!\r\n    [INFO ] 2021-11-08 15:32:41.087 [main] StartupChecks - doing stuff\r\n    [INFO ] 2021-11-08 15:32:41.087 [main] StartupChecks - testing!\r\n    [TRACE] 2021-11-08 15:32:41.087 [main] TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll]\r\n    [DEBUG] 2021-11-08 15:32:41.088 [main] SQL - select language0_.id as id1_77_, language0_.dateCreated as datecrea2_77_, language0_.englishLanguageName as englishl3_77_, language0_.languageCode as language4_77_, language0_.rightToLeft as righttol5_77_, language0_.translatedLanguageName as translat6_77_ from languages language0_\r\n    [TRACE] 2021-11-08 15:32:41.091 [main] TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll]\r\n    [INFO ] 2021-11-08 15:32:41.091 [main] StartupChecks - end test!\r\n    [TRACE] 2021-11-08 15:32:41.091 [main] TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByLanguageCode]\r\n    [DEBUG] 2021-11-08 15:32:41.112 [main] SQL - select language0_.id as id1_77_, language0_.dateCreated as datecrea2_77_, language0_.englishLanguageName as englishl3_77_, language0_.languageCode as language4_77_, language0_.rightToLeft as righttol5_77_, language0_.translatedLanguageName as translat6_77_ from languages language0_ where language0_.languageCode=?\r\n    [TRACE] 2021-11-08 15:32:41.113 [main] TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByLanguageCode]\r\n    [TRACE] 2021-11-08 15:32:41.113 [main] TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findFirstByIdNotNull]: This method is not transactional.\r\n    [DEBUG] 2021-11-08 15:32:41.115 [main] SQL - select authority0_.ID as id1_7_, authority0_.dateCreated as datecrea2_7_, authority0_.NAME as name3_7_ from AUTHORITY authority0_ where authority0_.ID is not null limit ?\r\n    [TRACE] 2021-11-08 15:32:41.120 [main] TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findFirstByIdNotNull]: This method is not transactional.\r\n\r\nHere is a list of the things that i&#39;ve already tried.\r\n\r\n 1. Annotate `languageDao` with @Transactional(propagation = Propagation.SUPPORTS) or \r\n    @Transactional(propagation = Propagation.NESTED). `NESTED` isn&#39;t supported by hibernate and thus this causes an error, This error remains even when i set nestedTransactionAllowed to `true` on the transactionmanager. The setting `SUPPORTS` is ignored. The repository still starts a new transaction for each method that is called. (Update: `Propagation.MANDATORY` has no effect either)\r\n 2. I&#39;ve named my transactionmanager `customTransactionManager` and added this as a parameter to @EnableJpaRepositories like so: `@EnableJpaRepositories(basePackages={&quot;DAOs&quot;}, transactionManagerRef = &quot;customTransactionManager&quot;)`\r\n 3. I&#39;ve set `enableDefaultTransactions` of `@EnableJpaRepositories` to `false`. This causes default methods like `findAll()` and `save()` to no longer be executed in a transaction by default. However it doesn&#39;t force them to use the transaction of the calling method that was annotated with `@Transactional`. \r\n\r\nSo my question is: How do i make the (custom) jpa repositories use the transaction that was started by the calling method?\r\n\r\nEDIT: Here https://stackoverflow.com/questions/53802031/jpa-spanning-a-transaction-over-multiple-jparepository-method-calls a similar problem is described. According to the user spring only uses the existing transaction when the repository implements `Repository` instead of `CrudRepository` or `JpaRepository`. But this is a workaround. \r\n\r\nEDIT 2: My @Transactional annotations keep working when i remove `@EnableTransactionManagement`. According to [this post][1] that can occur when i use `spring-boot-starter-jdbc` or `spring-boot-starter-data-jpa as a dependency`, which i do. Could these dependencies somehow interfere with the normal working of the transaction manager?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/40046116/spring-boot-with-spring-transactional-works-without-enabling-transactional-mana","title":"Spring opens a new transaction for each JpaRepository method that is called within an @Transactional annotated method","body":"<p>I have a method that is annotated with <code>@Transactional</code>. That should mean that any database queries that are fired within this method should all use the same transaction. But in reality that doesn't happen. What does happen is that a transaction is opened for the method itself but then when the first <code>JpaRepository</code> method is called a new transaction is opened for that particular method call.</p>\n<p>To make matters more complex, For custom repository methods this new transaction is <strong>only</strong> opened when the <code>JpaRepository</code> or the <code>JpaRepository custom method</code> is annotated with <code>@Transactional</code> as well.\nIf not i get the following trace log statement about it:</p>\n<blockquote>\n<p>No need to create transaction for\n[org.springframework.data.jpa.repository.support.SimpleJpaRepository.findFirstByIdNotNull]:\nThis method is not transactional.</p>\n</blockquote>\n<p>So it doesn't create a new transaction but it also doesn't seem to use the transaction created by the calling method either.</p>\n<p>Heres the repository class:</p>\n<pre><code>@Repository\npublic interface LanguageDao extends JpaRepository&lt;Language, Long&gt; {\n\n@Transactional\npublic Language findByLanguageCode(String languageCode);\n\npublic Language findByIdNotNull();\n\n}\n</code></pre>\n<p>Heres the method that uses different repository methods.</p>\n<pre><code>@Transactional\npublic void afterSingletonsInstantiated() {\n    languageDao.findByLanguageCode(); //This custom method opens a new transaction, but only because i've annotated this method with @Transactional as well.\n    languageDao.findAll(); //This one as well because its a standard JpaRepository method.\n    languageDao.findByIdNotNull();//This custom method doesn't because it lacks its own @Transactional annotation.\n}\n</code></pre>\n<p>Heres the @Configuration file, with transaction management and jpa repositories enabled</p>\n<pre><code>@EnableJpaRepositories(basePackages={&quot;DAOs&quot;}, transactionManagerRef = &quot;customTransactionManager&quot;, enableDefaultTransactions = true)\n@EnableTransactionManagement\n@Configuration\npublic class RootConfig implements InitializingBean {\n\n    @Bean(name = &quot;customTransactionManager&quot;)\n    JpaTransactionManager transactionManager(EntityManagerFactory entityManagerFactory) {\n        JpaTransactionManager transactionManager = new JpaTransactionManager();\n        transactionManager.setEntityManagerFactory(entityManagerFactory);\n        if (shouldCreateInitialLuceneIndex) { \n            EntityManager entityManager = entityManagerFactory.createEntityManager();\n            createInitialLuceneIndex(entityManager);\n            entityManager.close();\n        }\n        return transactionManager;\n    }\n}\n</code></pre>\n<p>Relevant <code>application.properties</code> settings</p>\n<pre><code>spring.jpa.hibernate.naming-strategy = org.hibernate.cfg.ImprovedNamingStrategy\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5InnoDBDialect\nspring.jpa.database-platform = org.hibernate.dialect.MySQL5InnoDBDialect\nspring.jpa.open-in-view = false\n</code></pre>\n<p>A bit of actual logs. The first line shows that a transaction for the method <code>afterSingletonsInstantiated</code> is created.</p>\n<pre><code>[TRACE] 2021-11-08 15:32:40.811 [main] TransactionInterceptor - Getting transaction for [config.StartupChecks$$EnhancerBySpringCGLIB$$134b7631.afterSingletonsInstantiated]\n[INFO ] 2021-11-08 15:32:40.815 [main] StartupChecks - Calling sequence table reset procedure\n[DEBUG] 2021-11-08 15:32:40.833 [main] SQL - {call RESET_SEQUENCE_TABLE_VALUES_TO_LATEST_ID_VALUES()}\n[INFO ] 2021-11-08 15:32:41.087 [main] StartupChecks - Sequence tables reset call finished!\n[INFO ] 2021-11-08 15:32:41.087 [main] StartupChecks - doing stuff\n[INFO ] 2021-11-08 15:32:41.087 [main] StartupChecks - testing!\n[TRACE] 2021-11-08 15:32:41.087 [main] TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll]\n[DEBUG] 2021-11-08 15:32:41.088 [main] SQL - select language0_.id as id1_77_, language0_.dateCreated as datecrea2_77_, language0_.englishLanguageName as englishl3_77_, language0_.languageCode as language4_77_, language0_.rightToLeft as righttol5_77_, language0_.translatedLanguageName as translat6_77_ from languages language0_\n[TRACE] 2021-11-08 15:32:41.091 [main] TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll]\n[INFO ] 2021-11-08 15:32:41.091 [main] StartupChecks - end test!\n[TRACE] 2021-11-08 15:32:41.091 [main] TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByLanguageCode]\n[DEBUG] 2021-11-08 15:32:41.112 [main] SQL - select language0_.id as id1_77_, language0_.dateCreated as datecrea2_77_, language0_.englishLanguageName as englishl3_77_, language0_.languageCode as language4_77_, language0_.rightToLeft as righttol5_77_, language0_.translatedLanguageName as translat6_77_ from languages language0_ where language0_.languageCode=?\n[TRACE] 2021-11-08 15:32:41.113 [main] TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByLanguageCode]\n[TRACE] 2021-11-08 15:32:41.113 [main] TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findFirstByIdNotNull]: This method is not transactional.\n[DEBUG] 2021-11-08 15:32:41.115 [main] SQL - select authority0_.ID as id1_7_, authority0_.dateCreated as datecrea2_7_, authority0_.NAME as name3_7_ from AUTHORITY authority0_ where authority0_.ID is not null limit ?\n[TRACE] 2021-11-08 15:32:41.120 [main] TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findFirstByIdNotNull]: This method is not transactional.\n</code></pre>\n<p>Here is a list of the things that i've already tried.</p>\n<ol>\n<li>Annotate <code>languageDao</code> with @Transactional(propagation = Propagation.SUPPORTS) or\n@Transactional(propagation = Propagation.NESTED). <code>NESTED</code> isn't supported by hibernate and thus this causes an error, This error remains even when i set nestedTransactionAllowed to <code>true</code> on the transactionmanager. The setting <code>SUPPORTS</code> is ignored. The repository still starts a new transaction for each method that is called. (Update: <code>Propagation.MANDATORY</code> has no effect either)</li>\n<li>I've named my transactionmanager <code>customTransactionManager</code> and added this as a parameter to @EnableJpaRepositories like so: <code>@EnableJpaRepositories(basePackages={&quot;DAOs&quot;}, transactionManagerRef = &quot;customTransactionManager&quot;)</code></li>\n<li>I've set <code>enableDefaultTransactions</code> of <code>@EnableJpaRepositories</code> to <code>false</code>. This causes default methods like <code>findAll()</code> and <code>save()</code> to no longer be executed in a transaction by default. However it doesn't force them to use the transaction of the calling method that was annotated with <code>@Transactional</code>.</li>\n</ol>\n<p>So my question is: How do i make the (custom) jpa repositories use the transaction that was started by the calling method?</p>\n<p>EDIT: Here <a href=\"https://stackoverflow.com/questions/53802031/jpa-spanning-a-transaction-over-multiple-jparepository-method-calls\">JPA - Spanning a transaction over multiple JpaRepository method calls</a> a similar problem is described. According to the user spring only uses the existing transaction when the repository implements <code>Repository</code> instead of <code>CrudRepository</code> or <code>JpaRepository</code>. But this is a workaround.</p>\n<p>EDIT 2: My @Transactional annotations keep working when i remove <code>@EnableTransactionManagement</code>. According to <a href=\"https://stackoverflow.com/questions/40046116/spring-boot-with-spring-transactional-works-without-enabling-transactional-mana\">this post</a> that can occur when i use <code>spring-boot-starter-jdbc</code> or <code>spring-boot-starter-data-jpa as a dependency</code>, which i do. Could these dependencies somehow interfere with the normal working of the transaction manager?</p>\n"},{"tags":["java","spring","spring-boot","jpa"],"comments":[{"owner":{"account_id":2883526,"reputation":2320,"user_id":3439993,"accept_rate":33,"display_name":"Deltharis"},"score":0,"creation_date":1660142292,"post_id":73306545,"comment_id":129463706,"body_markdown":"You have an overriden `equals()` (interesting implementation, but I can&#39;t see anything wrong with it) and no `hashCode()`? That might produce weird effects when dealing with collections of `EntityDTO`, as it&#39;s violating hashcode contract.","body":"You have an overriden <code>equals()</code> (interesting implementation, but I can&#39;t see anything wrong with it) and no <code>hashCode()</code>? That might produce weird effects when dealing with collections of <code>EntityDTO</code>, as it&#39;s violating hashcode contract."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1660143986,"post_id":73306545,"comment_id":129464451,"body_markdown":"What is the problem - is the CandidateAcademicEducation.candidate reference null, is the foreign key being updated to be null, or is it trying to insert a new Candidate because the instance is valid just missing an ID?  You mention sending data as JSON - What is the state of the entities you build from that before you pass it to JPA exactly?  Pre/Post update on Candidate might not help if another instance of CandidateAcademicEducation is getting into the persistence unit that isn&#39;t tied to that Candidate. Maybe check the events on CandidateAcademicEducation and where they are created","body":"What is the problem - is the CandidateAcademicEducation.candidate reference null, is the foreign key being updated to be null, or is it trying to insert a new Candidate because the instance is valid just missing an ID?  You mention sending data as JSON - What is the state of the entities you build from that before you pass it to JPA exactly?  Pre/Post update on Candidate might not help if another instance of CandidateAcademicEducation is getting into the persistence unit that isn&#39;t tied to that Candidate. Maybe check the events on CandidateAcademicEducation and where they are created"},{"owner":{"account_id":22538139,"reputation":11,"user_id":16729060,"display_name":"R&#237;ad Oliveira de Morais"},"score":0,"creation_date":1660213297,"post_id":73306545,"comment_id":129481986,"body_markdown":"@Deltharis I&#39;m not so familiar with Java, i made this overriden thinking on SortedSet Ordination, and to verify and prevent objects with basic the same properties to be handled differently. I didn&#39;t know about this hashCode contract, can you talk more about it? (I&#39;m thinking it&#39;s to generate the hash and use it on the comparsion of compareTo instead of inserting the logic directly on compareTo method, but i&#39;m just guessing)","body":"@Deltharis I&#39;m not so familiar with Java, i made this overriden thinking on SortedSet Ordination, and to verify and prevent objects with basic the same properties to be handled differently. I didn&#39;t know about this hashCode contract, can you talk more about it? (I&#39;m thinking it&#39;s to generate the hash and use it on the comparsion of compareTo instead of inserting the logic directly on compareTo method, but i&#39;m just guessing)"},{"owner":{"account_id":22538139,"reputation":11,"user_id":16729060,"display_name":"R&#237;ad Oliveira de Morais"},"score":0,"creation_date":1660213837,"post_id":73306545,"comment_id":129482180,"body_markdown":"@Chris The problem is the foreign key being updated to null, but strangely it only happens on one of the academicEducations passed via JSON (It&#39;s like one of them is being ignored, and i&#39;m think it has something to do with the conversion/deconversion to DTO on the update method of CandidateServices, because when i just fetch the candidate data from database, without making any operation, and save it, this don&#39;t happen)","body":"@Chris The problem is the foreign key being updated to null, but strangely it only happens on one of the academicEducations passed via JSON (It&#39;s like one of them is being ignored, and i&#39;m think it has something to do with the conversion/deconversion to DTO on the update method of CandidateServices, because when i just fetch the candidate data from database, without making any operation, and save it, this don&#39;t happen)"},{"owner":{"account_id":22538139,"reputation":11,"user_id":16729060,"display_name":"R&#237;ad Oliveira de Morais"},"score":0,"creation_date":1660215990,"post_id":73306545,"comment_id":129482873,"body_markdown":"@Chris i updated the post and added the JSON that i&#39;ve been using on create and update methods. About the Pre/Post update on Candidate, i thought that if i tied the CandidateAcademicEducation instances to Candidate on PreUpdate it would guarantee that all instances sent to persistence have the correct reference to the Candidate, does it not work like that? Can you please explain how exactly i verify the events of an entity? I&#39;m not really sure what you mean by events","body":"@Chris i updated the post and added the JSON that i&#39;ve been using on create and update methods. About the Pre/Post update on Candidate, i thought that if i tied the CandidateAcademicEducation instances to Candidate on PreUpdate it would guarantee that all instances sent to persistence have the correct reference to the Candidate, does it not work like that? Can you please explain how exactly i verify the events of an entity? I&#39;m not really sure what you mean by events"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1660232052,"post_id":73306545,"comment_id":129489284,"body_markdown":"You are using &quot;parsedUpdatedCandidate.update(updatedCandidate);&quot; seemingly to merge the incomplete JSON (there are no IDs in there, nor are there CandidateAcademicEducation.candidate references, so I suspect they would all be null), and this maybe where the problem or difference is. You are also using HashSets/HashMaps which rely on hashcode and equals on the objects, and since your objects don&#39;t have IDs set, might cause you issues on lookups; not having hashcode impl that matches equals in this case might be helping you, though your sets won&#39;t work the way you want them to.","body":"You are using &quot;parsedUpdatedCandidate.update(updatedCandidate);&quot; seemingly to merge the incomplete JSON (there are no IDs in there, nor are there CandidateAcademicEducation.candidate references, so I suspect they would all be null), and this maybe where the problem or difference is. You are also using HashSets/HashMaps which rely on hashcode and equals on the objects, and since your objects don&#39;t have IDs set, might cause you issues on lookups; not having hashcode impl that matches equals in this case might be helping you, though your sets won&#39;t work the way you want them to."}],"answers":[{"tags":[],"owner":{"account_id":22538139,"reputation":11,"user_id":16729060,"display_name":"R&#237;ad Oliveira de Morais"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660220794,"creation_date":1660220767,"answer_id":73320641,"question_id":73306545,"body_markdown":"Based on what [@Chris](https://stackoverflow.com/users/496099/chris) said on the comments, it&#39;s not possible to guarantee which prePersist/preUpdate method will be called first(From the parent entity or the child), because of that some of the related entities was working perfectly while CandidateAcademicEducation wasn&#39;t. So the solution is to set the parent (Candidate reference on CandidateAcademicEducation in this case) references before call save method from the repository.\r\n\r\nI&#39;ve also found this question talking about this uncertainty of prePersist/preUpdate/postPersist/postUpdate: [https://stackoverflow.com/questions/55309086/preupdate-called-but-child-collection-entity-not-stored](https://stackoverflow.com/questions/55309086/preupdate-called-but-child-collection-entity-not-stored)\r\n\r\n[@Chris](https://stackoverflow.com/users/496099/chris) and [@Deltharis](https://stackoverflow.com/users/3439993/deltharis) Thank you very much for the help. ","title":"Java JPA SpringBoot removing parent id from one child (Of one specific entity) when parent updates","body":"<p>Based on what <a href=\"https://stackoverflow.com/users/496099/chris\">@Chris</a> said on the comments, it's not possible to guarantee which prePersist/preUpdate method will be called first(From the parent entity or the child), because of that some of the related entities was working perfectly while CandidateAcademicEducation wasn't. So the solution is to set the parent (Candidate reference on CandidateAcademicEducation in this case) references before call save method from the repository.</p>\n<p>I've also found this question talking about this uncertainty of prePersist/preUpdate/postPersist/postUpdate: <a href=\"https://stackoverflow.com/questions/55309086/preupdate-called-but-child-collection-entity-not-stored\">PreUpdate called but child collection entity not stored</a></p>\n<p><a href=\"https://stackoverflow.com/users/496099/chris\">@Chris</a> and <a href=\"https://stackoverflow.com/users/3439993/deltharis\">@Deltharis</a> Thank you very much for the help.</p>\n"}],"owner":{"account_id":22538139,"reputation":11,"user_id":16729060,"display_name":"R&#237;ad Oliveira de Morais"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660220794,"creation_date":1660135359,"question_id":73306545,"body_markdown":"I&#39;ve been developing a SpringBoot application, and some entities of the project has OneToMany relationship, which has cascade all, for example:\r\n```\r\n\t@OneToMany(mappedBy = &quot;candidate&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\r\n\t@LazyCollection(LazyCollectionOption.FALSE)\r\n\tprivate Set&lt;CandidateAcademicEducation&gt; academicEducations;\r\n\r\n\t@OneToMany(mappedBy = &quot;candidate&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\r\n\t@LazyCollection(LazyCollectionOption.FALSE)\r\n\tprivate Set&lt;CandidateProfessionalExperience&gt; professionalExperiences;\r\n```\r\nIn all entities, this cascade was working just fine, i was sending the parent object with all related entities (Using JSON), it was being saved, updated and deleted correctly, but specifically on this CandidateAcademicEducation entity, when i update the Candidate entity (Sending the same data present on database to the application, including related entities), for some reason (When the candidate already has academicEducations on database), always one of the AcademicEducations loses candidate&#39;s id (If i send 1 academicEducation, it just loses candidate&#39;s id. If i send 3, 2 of them stay with parent&#39;s id and the other loses).\r\n\r\nI&#39;ve been reading and re-reading the code a lot, because CandidateProfessionalExperience is working just fine, and i can&#39;t find the difference between them.\r\n\r\nI&#39;ve verified preUpdate and postUpdate methods on Candidate entity, and it always has the correct amount of AcademicEducation, with the data and reference to Candidate entity correctly setted.\r\n\r\n**EntityDTO:**\r\n```\r\n\r\npublic abstract class EntityDTO&lt;Entity&gt; implements Comparable&lt;EntityDTO&lt;Entity&gt;&gt; {\r\n    @JsonProperty(access = Access.READ_ONLY)\r\n    protected Long id;\r\n\r\n    public EntityDTO() {\r\n        super();\r\n    }\r\n\r\n    public EntityDTO(Long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public static&lt;T, K extends EntityDTO&lt;T&gt;&gt; T getParsedEntity(\r\n        K entityDTO\r\n    ) {\r\n        if(entityDTO == null) return null;\r\n        return entityDTO.toEntity();\r\n    }\r\n\r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public int compareTo(EntityDTO&lt;Entity&gt; entityDTO) {\r\n        if(entityDTO == null) return -1;\r\n\r\n        boolean idIsNull = id == null;\r\n        boolean receivedIdIsNull = entityDTO.getId() == null;\r\n\r\n        if(idIsNull &amp;&amp; receivedIdIsNull) return 0;\r\n        if(idIsNull || receivedIdIsNull) return -1;\r\n        \r\n        return id.compareTo(entityDTO.getId());\r\n    }\r\n\r\n    public boolean equals(EntityDTO&lt;Entity&gt; entityDTO) {\r\n        return this.compareTo(entityDTO) == 0;\r\n    }\r\n\r\n    public abstract Entity toEntity();\r\n}\r\n```\r\n\r\n**Candidate entity:**\r\n```\r\n    @Entity\r\n    @Table(name = &quot;candidates&quot;)\r\n    public class Candidate {\r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    \tprivate Long id;\r\n    \r\n    \tprivate String photo;\r\n    \tprivate String profession;\r\n    \tprivate String phoneNumber;\r\n    \tprivate String linkedin;\r\n    \tprivate String birthDate;\r\n    \tprivate boolean hasProfessionalExperience;\r\n    \r\n    \t@ManyToOne\r\n    \tprivate State state;\r\n    \r\n        @ManyToOne\r\n    \tprivate City city;\r\n    \r\n    \t@OneToOne\r\n    \tprivate User user;\r\n    \r\n    \t@OneToMany(mappedBy = &quot;candidate&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\r\n    \t@LazyCollection(LazyCollectionOption.FALSE)\r\n    \tprivate Set&lt;CandidateAcademicEducation&gt; academicEducations;\r\n    \r\n    \t@OneToMany(mappedBy = &quot;candidate&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\r\n    \t@LazyCollection(LazyCollectionOption.FALSE)\r\n    \tprivate Set&lt;CandidateProfessionalExperience&gt; professionalExperiences;\r\n    \r\n    \t@CreationTimestamp\r\n    \t@Column(updatable = false)\r\n        private Date createdAt;\r\n     \r\n        @UpdateTimestamp\r\n        private Date updatedAt;\r\n    \t\r\n    \tpublic Candidate() {\r\n    \t\tsuper();\r\n    \t}\r\n    \r\n    \tpublic Candidate(\r\n    \t\tLong id, String photo, String profession,\r\n    \t\tString phoneNumber, String linkedin, String birthDate,\r\n    \t\tboolean hasProfessionalExperience, State state,\r\n    \t\tCity city, User user, Set&lt;CandidateAcademicEducation&gt; academicEducations,\r\n    \t\tSet&lt;CandidateProfessionalExperience&gt; professionalExperiences,\r\n    \t\tDate createdAt, Date updatedAt\r\n    \t) {\r\n    \t\tthis.id = id;\r\n    \t\tthis.photo = photo;\r\n    \t\tthis.profession = profession;\r\n    \t\tthis.phoneNumber = phoneNumber;\r\n    \t\tthis.linkedin = linkedin;\r\n    \t\tthis.birthDate = birthDate;\r\n    \t\tthis.hasProfessionalExperience = hasProfessionalExperience;\r\n    \t\tthis.state = state;\r\n    \t\tthis.city = city;\r\n    \t\tthis.user = user;\r\n    \t\tthis.academicEducations = academicEducations;\r\n    \t\tthis.professionalExperiences = professionalExperiences;\r\n    \t\tthis.createdAt = createdAt;\r\n    \t\tthis.updatedAt = updatedAt;\r\n    \t}\r\n    \r\n    \t@PrePersist\r\n    \t@PreUpdate\r\n    \tprivate void prePersistAndUpdate() {\r\n    \t\tacademicEducations.forEach(academicEducation -&gt; academicEducation.setCandidate(this));\r\n    \t\tprofessionalExperiences.forEach(professionalExperience -&gt; professionalExperience.setCandidate(this));\r\n    \t}\r\n    }\r\n```\r\n**CandidateDTO:**\r\n```\r\n  public class CandidateWithAllRelatedDataDTO extends CandidateDTO {\r\n\tprivate SortedSet&lt;CandidateAcademicEducationDTO&gt; academicEducations;\r\n\tprivate SortedSet&lt;CandidateProfessionalExperienceDTO&gt; professionalExperiences;\r\n\t\r\n    public CandidateWithAllRelatedDataDTO() {\r\n        super();\r\n    }\r\n\r\n\tpublic CandidateWithAllRelatedDataDTO(\r\n        Long id, String photo, String profession,\r\n        String phoneNumber, String linkedin,\r\n        String birthDate, Boolean hasProfessionalExperience,\r\n        StateDTO state, CityDTO city,\r\n        SortedSet&lt;CandidateAcademicEducationDTO&gt; academicEducations,\r\n        SortedSet&lt;CandidateProfessionalExperienceDTO&gt; professionalExperiences,\r\n        Long userId, Date createdAt, Date updatedAt\r\n    ) {\r\n        super(\r\n            id, photo, profession, phoneNumber,\r\n            linkedin, birthDate, hasProfessionalExperience,\r\n            state, city, userId, createdAt, updatedAt\r\n        );\r\n        this.academicEducations = academicEducations;\r\n        this.professionalExperiences = professionalExperiences;\r\n    }\r\n\r\n\tpublic static CandidateWithAllRelatedDataDTO FromEntity(Candidate candidateEntity) {\r\n\t\tif(candidateEntity == null) return null;\r\n\t\t\r\n\t\tCandidateWithAllRelatedDataDTO candidateWithAllRelatedDataDTO = new CandidateWithAllRelatedDataDTO();\r\n        candidateWithAllRelatedDataDTO.setId(candidateEntity.getId());\r\n        candidateWithAllRelatedDataDTO.setPhoto(candidateEntity.getPhoto());\r\n        candidateWithAllRelatedDataDTO.setProfession(candidateEntity.getProfession());\r\n        candidateWithAllRelatedDataDTO.setPhoneNumber(candidateEntity.getPhoneNumber());\r\n        candidateWithAllRelatedDataDTO.setLinkedin(candidateEntity.getLinkedin());\r\n        candidateWithAllRelatedDataDTO.setBirthDate(candidateEntity.getBirthDate());\r\n        candidateWithAllRelatedDataDTO.setHasProfessionalExperience(candidateEntity.hasProfessionalExperience());\r\n        candidateWithAllRelatedDataDTO.setState(StateDTO.FromEntity(candidateEntity.getState()));\r\n\t\tcandidateWithAllRelatedDataDTO.setCity(CityDTO.FromEntity(candidateEntity.getCity()));\r\n        candidateWithAllRelatedDataDTO.setUserId(candidateEntity.getUser().getId());\r\n        candidateWithAllRelatedDataDTO.setCreatedAt(candidateEntity.getCreatedAt());\r\n        candidateWithAllRelatedDataDTO.setUpdatedAt(candidateEntity.getUpdatedAt());\r\n\r\n        candidateWithAllRelatedDataDTO.setAcademicEducations(\r\n            candidateEntity.getAcademicEducations().stream().map(\r\n                academicEducation -&gt; CandidateAcademicEducationDTO.FromEntity(academicEducation)\r\n            ).collect(Collectors.toCollection(() -&gt; new TreeSet&lt;&gt;()))\r\n        );\r\n\r\n        candidateWithAllRelatedDataDTO.setProfessionalExperiences(\r\n            candidateEntity.getProfessionalExperiences().stream().map(\r\n                professionalExperience -&gt; \r\n                    CandidateProfessionalExperienceDTO.FromEntity(professionalExperience)\r\n            ).collect(Collectors.toCollection(() -&gt; new TreeSet&lt;&gt;()))\r\n        );\r\n\r\n\t\treturn candidateWithAllRelatedDataDTO;\r\n\t}\r\n\r\n    public void update(CandidateWithAllRelatedDataDTO updatedCandidate) {\r\n        String photo = updatedCandidate.getPhoto();\r\n        if(photo != null) this.photo = photo;\r\n        \r\n        String profession = updatedCandidate.getProfession();\r\n        if(profession != null) this.profession = profession;\r\n        \r\n        String phoneNumber = updatedCandidate.getPhoneNumber();\r\n        if(phoneNumber != null) this.phoneNumber = phoneNumber;\r\n        \r\n        String linkedin = updatedCandidate.getLinkedin();\r\n        if(linkedin != null) this.linkedin = linkedin;\r\n\r\n        String birthDate = updatedCandidate.getBirthDate();\r\n        if(birthDate != null) this.birthDate = birthDate;\r\n\r\n        Boolean hasProfessionalExperience = updatedCandidate.hasProfessionalExperience();\r\n        if(hasProfessionalExperience != null) this.hasProfessionalExperience = hasProfessionalExperience;\r\n\r\n        StateDTO state = updatedCandidate.getState();\r\n        if(state != null) this.state = state;\r\n\r\n        CityDTO city = updatedCandidate.getCity();\r\n        if(city != null) this.city = city;\r\n\r\n        SortedSet&lt;CandidateAcademicEducationDTO&gt; academicEducations = updatedCandidate.getAcademicEducations();\r\n        if(academicEducations != null) EntitySetUpdater.updateEntity(this.academicEducations, academicEducations);\r\n        \r\n        SortedSet&lt;CandidateProfessionalExperienceDTO&gt; professionalExperiences = updatedCandidate.getProfessionalExperiences();\r\n        if(professionalExperiences != null) EntitySetUpdater.updateEntity(this.professionalExperiences, professionalExperiences);\r\n    }\r\n\r\n\t@Override\r\n\tpublic Candidate toEntity() {\r\n        Candidate candidate = super.toEntity();\r\n\r\n        Set&lt;CandidateAcademicEducation&gt; parsedAcademicEducations = new HashSet&lt;&gt;();\r\n        if(academicEducations != null) {\r\n            parsedAcademicEducations.addAll(\r\n                academicEducations.stream().map(\r\n                    academicEducation -&gt; getParsedEntity(academicEducation)\r\n                ).collect(Collectors.toSet())\r\n            );\r\n        }\r\n        candidate.setAcademicEducations(parsedAcademicEducations);\r\n\r\n        Set&lt;CandidateProfessionalExperience&gt; parsedProfessionalExperiences = new HashSet&lt;&gt;();\r\n        if(professionalExperiences != null) {\r\n            parsedProfessionalExperiences.addAll(\r\n                professionalExperiences.stream().map(\r\n                    professionalExperience -&gt; getParsedEntity(professionalExperience)\r\n                ).collect(Collectors.toSet())\r\n            );\r\n        }\r\n        candidate.setProfessionalExperiences(parsedProfessionalExperiences);\r\n\r\n        return candidate;\r\n\t}\r\n}\r\n```\r\n**Candidate professional experience:**\r\n```\r\n    @Entity\r\n    @Table(name = &quot;candidate_professional_experiences&quot;)\r\n    public class CandidateProfessionalExperience {\r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    \tprivate Long id;\r\n    \r\n    \tprivate String roleName;\r\n        private String companyName;\r\n        private String startDate;\r\n        private String endDate;\r\n        private boolean actualJob;\r\n    \r\n        @Column(length = 1000)\r\n        private String assignmentsDescription;\r\n    \r\n    \t@ManyToOne\r\n    \tprivate State state;\r\n    \r\n        @ManyToOne\r\n    \tprivate City city;\r\n    \r\n    \t@ManyToOne\r\n    \tprivate Candidate candidate;\r\n    \r\n    \t@CreationTimestamp\r\n    \t@Column(updatable = false)\r\n        private Date createdAt;\r\n     \r\n        @UpdateTimestamp\r\n        private Date updatedAt;\r\n    \t\r\n    \tpublic CandidateProfessionalExperience() {\r\n    \t\tsuper();\r\n    \t}\r\n    \r\n    \tpublic CandidateProfessionalExperience(\r\n    \t\tLong id, String roleName, String companyName,\r\n    \t\tString startDate, String endDate, boolean actualJob,\r\n    \t\tString assignmentsDescription, State state, City city,\r\n    \t\tCandidate candidate, Date createdAt, Date updatedAt\r\n    \t) {\r\n    \t\tthis.id = id;\r\n    \t\tthis.roleName = roleName;\r\n    \t\tthis.companyName = companyName;\r\n    \t\tthis.startDate = startDate;\r\n    \t\tthis.endDate = endDate;\r\n    \t\tthis.actualJob = actualJob;\r\n    \t\tthis.assignmentsDescription = assignmentsDescription;\r\n    \t\tthis.state = state;\r\n    \t\tthis.city = city;\r\n    \t\tthis.candidate = candidate;\r\n    \t\tthis.createdAt = createdAt;\r\n    \t\tthis.updatedAt = updatedAt;\r\n    \t}\r\n    }\r\n```\r\n**Candidate Professional Experience DTO:**\r\n```\r\n       public class CandidateProfessionalExperienceDTO extends EntityDTO&lt;CandidateProfessionalExperience&gt; {\r\n    \tprivate String roleName;\r\n        private String companyName;\r\n        private String startDate;\r\n        private String endDate;\r\n        private String assignmentsDescription;\r\n        private boolean actualJob;\r\n    \r\n    \tprivate StateDTO state;\r\n    \tprivate CityDTO city;\r\n    \r\n        @JsonProperty(access = Access.READ_ONLY)\r\n    \tprivate Date createdAt;\r\n    \r\n    \t@JsonProperty(access = Access.READ_ONLY)\r\n    \tprivate Date updatedAt;\r\n    \t\r\n        public CandidateProfessionalExperienceDTO() {\r\n            super();\r\n        }\r\n    \r\n        public CandidateProfessionalExperienceDTO(\r\n            Long id, String roleName, String companyName, String startDate,\r\n            String endDate, String assignmentsDescription, boolean actualJob,\r\n            StateDTO state, CityDTO city, Date createdAt, Date updatedAt\r\n        ) {\r\n            super(id);\r\n            this.roleName = roleName;\r\n            this.companyName = companyName;\r\n            this.startDate = startDate;\r\n            this.endDate = endDate;\r\n            this.assignmentsDescription = assignmentsDescription;\r\n            this.actualJob = actualJob;\r\n            this.state = state;\r\n            this.city = city;\r\n            this.createdAt = createdAt;\r\n            this.updatedAt = updatedAt;\r\n        }\r\n    \r\n    \tpublic static CandidateProfessionalExperienceDTO FromEntity(\r\n            CandidateProfessionalExperience candidateProfessionalExperienceEntity\r\n        ) {\r\n    \t\tif(candidateProfessionalExperienceEntity == null) return null;\r\n    \t\t\r\n    \t\tCandidateProfessionalExperienceDTO candidateProfessionalExperienceDTO = new CandidateProfessionalExperienceDTO();\r\n            candidateProfessionalExperienceDTO.setId(candidateProfessionalExperienceEntity.getId());\r\n            candidateProfessionalExperienceDTO.setRoleName(candidateProfessionalExperienceEntity.getRoleName());\r\n            candidateProfessionalExperienceDTO.setCompanyName(candidateProfessionalExperienceEntity.getCompanyName());\r\n            candidateProfessionalExperienceDTO.setStartDate(candidateProfessionalExperienceEntity.getStartDate());\r\n            candidateProfessionalExperienceDTO.setEndDate(candidateProfessionalExperienceEntity.getEndDate());\r\n            candidateProfessionalExperienceDTO.setAssignmentsDescription(\r\n                candidateProfessionalExperienceEntity.getAssignmentsDescription()\r\n            );\r\n            candidateProfessionalExperienceDTO.setActualJob(candidateProfessionalExperienceEntity.isActualJob());\r\n            candidateProfessionalExperienceDTO.setState(StateDTO.FromEntity(candidateProfessionalExperienceEntity.getState()));\r\n            candidateProfessionalExperienceDTO.setCity(CityDTO.FromEntity(candidateProfessionalExperienceEntity.getCity()));\r\n            candidateProfessionalExperienceDTO.setCreatedAt(candidateProfessionalExperienceEntity.getCreatedAt());\r\n            candidateProfessionalExperienceDTO.setUpdatedAt(candidateProfessionalExperienceEntity.getUpdatedAt());\r\n    \r\n    \t\treturn candidateProfessionalExperienceDTO;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic CandidateProfessionalExperience toEntity() {\r\n            State parsedState = getParsedEntity(state);\r\n            City parsedCity = getParsedEntity(city);\r\n    \r\n            return new CandidateProfessionalExperience(\r\n                id, roleName, companyName, startDate, endDate,\r\n                actualJob, assignmentsDescription, parsedState, parsedCity,\r\n                null, null, null\r\n            );\r\n    \t}\r\n    \r\n        @Override\r\n    \tpublic int compareTo(EntityDTO&lt;CandidateProfessionalExperience&gt; candidateProfessionalExperienceDTO) {\r\n            if(candidateProfessionalExperienceDTO == null) return -1;\r\n    \r\n            CandidateProfessionalExperienceDTO parsedDTO = (CandidateProfessionalExperienceDTO) candidateProfessionalExperienceDTO;\r\n            int roleNameResult = StringComparator.compareStrings(roleName, parsedDTO.getRoleName());\r\n            if(roleNameResult != 0) return roleNameResult;\r\n    \r\n    \t\treturn StringComparator.compareStrings(companyName, parsedDTO.getCompanyName());\r\n        }\r\n    }\r\n```\r\n**Candidate Academic Education:**\r\n```\r\n    @Entity\r\n    @Table(name = &quot;candidate_academic_education&quot;)\r\n    public class CandidateAcademicEducation {\r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    \tprivate Long id;\r\n    \r\n    \tprivate String title;\r\n        private String institutionName;\r\n        private Integer startYear;\r\n        private Integer endYear;\r\n        private CandidateLevelOfSchooling levelOfSchooling;\r\n    \r\n    \t@ManyToOne\r\n    \tprivate Candidate candidate;\r\n    \r\n    \t@CreationTimestamp\r\n    \t@Column(updatable = false)\r\n        private Date createdAt;\r\n     \r\n        @UpdateTimestamp\r\n        private Date updatedAt;\r\n    \r\n        public CandidateAcademicEducation() {\r\n            super();\r\n        }\r\n    \r\n    \tpublic CandidateAcademicEducation(\r\n            Long id, String title, String institutionName,\r\n            Integer startYear, Integer endYear,\r\n            CandidateLevelOfSchooling levelOfSchooling,\r\n            Candidate candidate, Date createdAt, Date updatedAt\r\n        ) {\r\n            this.id = id;\r\n            this.title = title;\r\n            this.institutionName = institutionName;\r\n            this.startYear = startYear;\r\n            this.endYear = endYear;\r\n            this.levelOfSchooling = levelOfSchooling;\r\n            this.candidate = candidate;\r\n            this.createdAt = createdAt;\r\n            this.updatedAt = updatedAt;\r\n        }\r\n    }\r\n```\r\n**Candidate Academic Education DTO:**\r\n```\r\n    public class CandidateAcademicEducationDTO extends EntityDTO&lt;CandidateAcademicEducation&gt; {\r\n    \tprivate String title;\r\n        private String institutionName;\r\n        private Integer startYear;\r\n        private Integer endYear;\r\n        private CandidateLevelOfSchooling levelOfSchooling;\r\n    \r\n        @JsonProperty(access = Access.READ_ONLY)\r\n    \tprivate Date createdAt;\r\n    \r\n    \t@JsonProperty(access = Access.READ_ONLY)\r\n    \tprivate Date updatedAt;\r\n    \t\r\n        public CandidateAcademicEducationDTO() {\r\n            super();\r\n        }\r\n    \r\n        public CandidateAcademicEducationDTO(\r\n            Long id, String title, String institutionName,\r\n            Integer startYear, Integer endYear,\r\n            CandidateLevelOfSchooling levelOfSchooling, Date createdAt,\r\n            Date updatedAt\r\n        ) {\r\n            super(id);\r\n            this.title = title;\r\n            this.institutionName = institutionName;\r\n            this.startYear = startYear;\r\n            this.endYear = endYear;\r\n            this.levelOfSchooling = levelOfSchooling;\r\n            this.createdAt = createdAt;\r\n            this.updatedAt = updatedAt;\r\n        }\r\n    \r\n    \tpublic static CandidateAcademicEducationDTO FromEntity(\r\n            CandidateAcademicEducation candidateAcademicEducationEntity\r\n        ) {\r\n    \t\tif(candidateAcademicEducationEntity == null) return null;\r\n    \t\t\r\n    \t\tCandidateAcademicEducationDTO candidateAcademicEducationDTO = new CandidateAcademicEducationDTO();\r\n            candidateAcademicEducationDTO.setId(candidateAcademicEducationEntity.getId());\r\n            candidateAcademicEducationDTO.setTitle(candidateAcademicEducationEntity.getTitle());\r\n            candidateAcademicEducationDTO.setInstitutionName(candidateAcademicEducationEntity.getInstitutionName());\r\n            candidateAcademicEducationDTO.setStartYear(candidateAcademicEducationEntity.getStartYear());\r\n            candidateAcademicEducationDTO.setEndYear(candidateAcademicEducationEntity.getEndYear());\r\n            candidateAcademicEducationDTO.setLevelOfSchooling(candidateAcademicEducationEntity.getLevelOfSchooling());\r\n            candidateAcademicEducationDTO.setCreatedAt(candidateAcademicEducationEntity.getCreatedAt());\r\n            candidateAcademicEducationDTO.setUpdatedAt(candidateAcademicEducationEntity.getUpdatedAt());\r\n    \r\n    \t\treturn candidateAcademicEducationDTO;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic CandidateAcademicEducation toEntity() {\r\n            return new CandidateAcademicEducation(\r\n                id, title, institutionName, startYear, endYear,\r\n                levelOfSchooling, null, null, null\r\n            );\r\n    \t}\r\n    \r\n        @Override\r\n    \tpublic int compareTo(EntityDTO&lt;CandidateAcademicEducation&gt; candidateAcademicEducationDTO) {\r\n            if(candidateAcademicEducationDTO == null) return -1;\r\n    \r\n            CandidateAcademicEducationDTO parsedDTO = (CandidateAcademicEducationDTO) candidateAcademicEducationDTO;\r\n            int titleResult = StringComparator.compareStrings(title, parsedDTO.getTitle());\r\n            if(titleResult != 0) return titleResult;\r\n    \r\n    \t\treturn StringComparator.compareStrings(institutionName, parsedDTO.getInstitutionName());\r\n        }\r\n    }\r\n```\r\n**Candidate Services (Update method with auxiliar methods):**\r\n```\r\nprivate void validateCandidateLinkedin(String linkedin) {\r\n    boolean existsCandidateByLinkedin = candidateRepository.existsByLinkedin(\r\n\t\tlinkedin\r\n\t);\r\n\tif(existsCandidateByLinkedin) {\r\n\t\tthrow new ServerException(\r\n\t\t\t&quot;A candidate with this linkedin already exists&quot;,\r\n\t\t\tHttpStatus.BAD_REQUEST\r\n\t\t);\r\n\t}\r\n}\r\n\r\nprivate void validateCandidatePhoneNumber(String phoneNumber) {\r\n    boolean existsCandidateByPhoneNumber = candidateRepository.existsByPhoneNumber(\r\n\t\tphoneNumber\r\n\t);\r\n\tif(existsCandidateByPhoneNumber) {\r\n\t\tthrow new ServerException(\r\n\t\t\t&quot;A candidate with this phone number already exists&quot;,\r\n\t\t\tHttpStatus.BAD_REQUEST\r\n\t\t);\r\n\t}\r\n}\r\n\r\nprivate void validateNewCandidateData(\r\n\tCandidate databaseCandidate, CandidateWithAllRelatedDataDTO updatedCandidate\r\n) {\r\n\tboolean hasDifferentLinkedin = StringComparator.compareStrings(\r\n\t\tdatabaseCandidate.getLinkedin(), updatedCandidate.getLinkedin()\r\n\t) != 0;\r\n\tif(hasDifferentLinkedin) validateCandidateLinkedin(updatedCandidate.getLinkedin());\r\n\r\n\tboolean hasDifferentPhoneNumber = !databaseCandidate.getPhoneNumber().equals(\r\n\t\tupdatedCandidate.getPhoneNumber()\r\n\t);\r\n\tif(hasDifferentPhoneNumber) validateCandidatePhoneNumber(updatedCandidate.getPhoneNumber());\r\n}\r\n\r\npublic CandidateWithAllRelatedDataDTO update(\r\n\tLong userId, CandidateWithAllRelatedDataDTO updatedCandidate\r\n) {\r\n\tCandidate findedCandidate = findOneWithAllDataByUserId(\r\n\t\tuserId\r\n\t);\r\n\tif(findedCandidate == null) {\r\n\t\tthrow new ServerException(\r\n\t\t\t&quot;Requested user does not have a candidate account&quot;,\r\n\t\t\tHttpStatus.BAD_REQUEST\r\n\t\t);\r\n\t}\r\n\r\n\tCandidateWithAllRelatedDataDTO parsedUpdatedCandidate = \r\n\t\tCandidateWithAllRelatedDataDTO.FromEntity(findedCandidate);\r\n\tparsedUpdatedCandidate.update(updatedCandidate);\r\n\r\n\tvalidateNewCandidateData(findedCandidate, parsedUpdatedCandidate);\r\n\tparsedUpdatedCandidate.setUpdatedAt(new Date());\r\n\r\n\tcandidateRepository.save(EntityDTO.getParsedEntity(parsedUpdatedCandidate));\r\n\treturn findOneById(findedCandidate.getId());\r\n}\r\n```\r\n\r\n**The JSON that i&#39;ve been using both in create and update methods:**\r\n```\r\n{\r\n\t&quot;photo&quot;: &quot;photo.png&quot;,\r\n\t&quot;profession&quot;: &quot;Programador&quot;,\r\n\t&quot;phoneNumber&quot;: &quot;(00)9.0000-0000&quot;,\r\n\t&quot;linkedin&quot;: &quot;https://linkedin.com.br&quot;,\r\n\t&quot;birthDate&quot;: &quot;10/2002&quot;,\r\n\t&quot;hasProfessionalExperience&quot;: true,\r\n\t&quot;state&quot;: {\r\n\t\t&quot;id&quot;: 1\r\n\t},\r\n\t&quot;city&quot;: {\r\n\t\t&quot;id&quot;: 1\r\n\t},\r\n\t&quot;academicEducations&quot;: [\r\n\t\t{\r\n\t\t\t&quot;title&quot;: &quot;Ci&#234;ncia da Computa&#231;&#227;o&quot;,\r\n\t\t\t&quot;institutionName&quot;: &quot;UFERSA&quot;,\r\n\t\t\t&quot;startYear&quot;: 2020,\r\n\t\t\t&quot;endYear&quot;: 2024,\r\n\t\t\t&quot;levelOfSchooling&quot;: &quot;INCOMPLETE_HIGHER_EDUCATION&quot;\r\n\t\t},\r\n\t\t{\r\n\t\t\t&quot;title&quot;: &quot;Direito&quot;,\r\n\t\t\t&quot;institutionName&quot;: &quot;UERN&quot;,\r\n\t\t\t&quot;startYear&quot;: 2016,\r\n\t\t\t&quot;endYear&quot;: 2020,\r\n\t\t\t&quot;levelOfSchooling&quot;: &quot;COMPLETE_HIGHER_EDUCATION&quot;\r\n\t\t}\r\n\t],\r\n\t&quot;professionalExperiences&quot;: [\r\n\t\t{\r\n\t\t\t&quot;roleName&quot;: &quot;Administrador de neg&#243;cios&quot;,\r\n\t\t\t&quot;companyName&quot;: &quot;Unijuris&quot;,\r\n\t\t\t&quot;startDate&quot;: &quot;05/2019&quot;,\r\n\t\t\t&quot;endDate&quot;: &quot;08/2022&quot;,\r\n\t\t\t&quot;assignmentsDescription&quot;: &quot;Gest&#227;o de pessoas, execu&#231;&#227;o de movimenta&#231;&#245;es financeiras.&quot;,\r\n\t\t\t&quot;actualJob&quot;: true,\r\n\t\t\t&quot;state&quot;: {\r\n\t\t\t\t&quot;id&quot;: 1\r\n\t\t\t},\r\n\t\t\t&quot;city&quot;: {\r\n\t\t\t\t&quot;id&quot;: 1\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\t&quot;roleName&quot;: &quot;Veterin&#225;rio&quot;,\r\n\t\t\t&quot;companyName&quot;: &quot;Nova startup&quot;,\r\n\t\t\t&quot;startDate&quot;: &quot;05/2012&quot;,\r\n\t\t\t&quot;endDate&quot;: &quot;06/2019&quot;,\r\n\t\t\t&quot;assignmentsDescription&quot;: &quot;Tratamento de animais de v&#225;rias esp&#233;cies diferentes.&quot;,\r\n\t\t\t&quot;actualJob&quot;: false,\r\n\t\t\t&quot;state&quot;: {\r\n\t\t\t\t&quot;id&quot;: 1\r\n\t\t\t},\r\n\t\t\t&quot;city&quot;: {\r\n\t\t\t\t&quot;id&quot;: 1\r\n\t\t\t}\r\n\t\t}\r\n\t]\r\n}\r\n```","title":"Java JPA SpringBoot removing parent id from one child (Of one specific entity) when parent updates","body":"<p>I've been developing a SpringBoot application, and some entities of the project has OneToMany relationship, which has cascade all, for example:</p>\n<pre><code>    @OneToMany(mappedBy = &quot;candidate&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\n    @LazyCollection(LazyCollectionOption.FALSE)\n    private Set&lt;CandidateAcademicEducation&gt; academicEducations;\n\n    @OneToMany(mappedBy = &quot;candidate&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\n    @LazyCollection(LazyCollectionOption.FALSE)\n    private Set&lt;CandidateProfessionalExperience&gt; professionalExperiences;\n</code></pre>\n<p>In all entities, this cascade was working just fine, i was sending the parent object with all related entities (Using JSON), it was being saved, updated and deleted correctly, but specifically on this CandidateAcademicEducation entity, when i update the Candidate entity (Sending the same data present on database to the application, including related entities), for some reason (When the candidate already has academicEducations on database), always one of the AcademicEducations loses candidate's id (If i send 1 academicEducation, it just loses candidate's id. If i send 3, 2 of them stay with parent's id and the other loses).</p>\n<p>I've been reading and re-reading the code a lot, because CandidateProfessionalExperience is working just fine, and i can't find the difference between them.</p>\n<p>I've verified preUpdate and postUpdate methods on Candidate entity, and it always has the correct amount of AcademicEducation, with the data and reference to Candidate entity correctly setted.</p>\n<p><strong>EntityDTO:</strong></p>\n<pre><code>\npublic abstract class EntityDTO&lt;Entity&gt; implements Comparable&lt;EntityDTO&lt;Entity&gt;&gt; {\n    @JsonProperty(access = Access.READ_ONLY)\n    protected Long id;\n\n    public EntityDTO() {\n        super();\n    }\n\n    public EntityDTO(Long id) {\n        this.id = id;\n    }\n\n    public static&lt;T, K extends EntityDTO&lt;T&gt;&gt; T getParsedEntity(\n        K entityDTO\n    ) {\n        if(entityDTO == null) return null;\n        return entityDTO.toEntity();\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public int compareTo(EntityDTO&lt;Entity&gt; entityDTO) {\n        if(entityDTO == null) return -1;\n\n        boolean idIsNull = id == null;\n        boolean receivedIdIsNull = entityDTO.getId() == null;\n\n        if(idIsNull &amp;&amp; receivedIdIsNull) return 0;\n        if(idIsNull || receivedIdIsNull) return -1;\n        \n        return id.compareTo(entityDTO.getId());\n    }\n\n    public boolean equals(EntityDTO&lt;Entity&gt; entityDTO) {\n        return this.compareTo(entityDTO) == 0;\n    }\n\n    public abstract Entity toEntity();\n}\n</code></pre>\n<p><strong>Candidate entity:</strong></p>\n<pre><code>    @Entity\n    @Table(name = &quot;candidates&quot;)\n    public class Candidate {\n        @Id\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\n        private Long id;\n    \n        private String photo;\n        private String profession;\n        private String phoneNumber;\n        private String linkedin;\n        private String birthDate;\n        private boolean hasProfessionalExperience;\n    \n        @ManyToOne\n        private State state;\n    \n        @ManyToOne\n        private City city;\n    \n        @OneToOne\n        private User user;\n    \n        @OneToMany(mappedBy = &quot;candidate&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\n        @LazyCollection(LazyCollectionOption.FALSE)\n        private Set&lt;CandidateAcademicEducation&gt; academicEducations;\n    \n        @OneToMany(mappedBy = &quot;candidate&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\n        @LazyCollection(LazyCollectionOption.FALSE)\n        private Set&lt;CandidateProfessionalExperience&gt; professionalExperiences;\n    \n        @CreationTimestamp\n        @Column(updatable = false)\n        private Date createdAt;\n     \n        @UpdateTimestamp\n        private Date updatedAt;\n        \n        public Candidate() {\n            super();\n        }\n    \n        public Candidate(\n            Long id, String photo, String profession,\n            String phoneNumber, String linkedin, String birthDate,\n            boolean hasProfessionalExperience, State state,\n            City city, User user, Set&lt;CandidateAcademicEducation&gt; academicEducations,\n            Set&lt;CandidateProfessionalExperience&gt; professionalExperiences,\n            Date createdAt, Date updatedAt\n        ) {\n            this.id = id;\n            this.photo = photo;\n            this.profession = profession;\n            this.phoneNumber = phoneNumber;\n            this.linkedin = linkedin;\n            this.birthDate = birthDate;\n            this.hasProfessionalExperience = hasProfessionalExperience;\n            this.state = state;\n            this.city = city;\n            this.user = user;\n            this.academicEducations = academicEducations;\n            this.professionalExperiences = professionalExperiences;\n            this.createdAt = createdAt;\n            this.updatedAt = updatedAt;\n        }\n    \n        @PrePersist\n        @PreUpdate\n        private void prePersistAndUpdate() {\n            academicEducations.forEach(academicEducation -&gt; academicEducation.setCandidate(this));\n            professionalExperiences.forEach(professionalExperience -&gt; professionalExperience.setCandidate(this));\n        }\n    }\n</code></pre>\n<p><strong>CandidateDTO:</strong></p>\n<pre><code>  public class CandidateWithAllRelatedDataDTO extends CandidateDTO {\n    private SortedSet&lt;CandidateAcademicEducationDTO&gt; academicEducations;\n    private SortedSet&lt;CandidateProfessionalExperienceDTO&gt; professionalExperiences;\n    \n    public CandidateWithAllRelatedDataDTO() {\n        super();\n    }\n\n    public CandidateWithAllRelatedDataDTO(\n        Long id, String photo, String profession,\n        String phoneNumber, String linkedin,\n        String birthDate, Boolean hasProfessionalExperience,\n        StateDTO state, CityDTO city,\n        SortedSet&lt;CandidateAcademicEducationDTO&gt; academicEducations,\n        SortedSet&lt;CandidateProfessionalExperienceDTO&gt; professionalExperiences,\n        Long userId, Date createdAt, Date updatedAt\n    ) {\n        super(\n            id, photo, profession, phoneNumber,\n            linkedin, birthDate, hasProfessionalExperience,\n            state, city, userId, createdAt, updatedAt\n        );\n        this.academicEducations = academicEducations;\n        this.professionalExperiences = professionalExperiences;\n    }\n\n    public static CandidateWithAllRelatedDataDTO FromEntity(Candidate candidateEntity) {\n        if(candidateEntity == null) return null;\n        \n        CandidateWithAllRelatedDataDTO candidateWithAllRelatedDataDTO = new CandidateWithAllRelatedDataDTO();\n        candidateWithAllRelatedDataDTO.setId(candidateEntity.getId());\n        candidateWithAllRelatedDataDTO.setPhoto(candidateEntity.getPhoto());\n        candidateWithAllRelatedDataDTO.setProfession(candidateEntity.getProfession());\n        candidateWithAllRelatedDataDTO.setPhoneNumber(candidateEntity.getPhoneNumber());\n        candidateWithAllRelatedDataDTO.setLinkedin(candidateEntity.getLinkedin());\n        candidateWithAllRelatedDataDTO.setBirthDate(candidateEntity.getBirthDate());\n        candidateWithAllRelatedDataDTO.setHasProfessionalExperience(candidateEntity.hasProfessionalExperience());\n        candidateWithAllRelatedDataDTO.setState(StateDTO.FromEntity(candidateEntity.getState()));\n        candidateWithAllRelatedDataDTO.setCity(CityDTO.FromEntity(candidateEntity.getCity()));\n        candidateWithAllRelatedDataDTO.setUserId(candidateEntity.getUser().getId());\n        candidateWithAllRelatedDataDTO.setCreatedAt(candidateEntity.getCreatedAt());\n        candidateWithAllRelatedDataDTO.setUpdatedAt(candidateEntity.getUpdatedAt());\n\n        candidateWithAllRelatedDataDTO.setAcademicEducations(\n            candidateEntity.getAcademicEducations().stream().map(\n                academicEducation -&gt; CandidateAcademicEducationDTO.FromEntity(academicEducation)\n            ).collect(Collectors.toCollection(() -&gt; new TreeSet&lt;&gt;()))\n        );\n\n        candidateWithAllRelatedDataDTO.setProfessionalExperiences(\n            candidateEntity.getProfessionalExperiences().stream().map(\n                professionalExperience -&gt; \n                    CandidateProfessionalExperienceDTO.FromEntity(professionalExperience)\n            ).collect(Collectors.toCollection(() -&gt; new TreeSet&lt;&gt;()))\n        );\n\n        return candidateWithAllRelatedDataDTO;\n    }\n\n    public void update(CandidateWithAllRelatedDataDTO updatedCandidate) {\n        String photo = updatedCandidate.getPhoto();\n        if(photo != null) this.photo = photo;\n        \n        String profession = updatedCandidate.getProfession();\n        if(profession != null) this.profession = profession;\n        \n        String phoneNumber = updatedCandidate.getPhoneNumber();\n        if(phoneNumber != null) this.phoneNumber = phoneNumber;\n        \n        String linkedin = updatedCandidate.getLinkedin();\n        if(linkedin != null) this.linkedin = linkedin;\n\n        String birthDate = updatedCandidate.getBirthDate();\n        if(birthDate != null) this.birthDate = birthDate;\n\n        Boolean hasProfessionalExperience = updatedCandidate.hasProfessionalExperience();\n        if(hasProfessionalExperience != null) this.hasProfessionalExperience = hasProfessionalExperience;\n\n        StateDTO state = updatedCandidate.getState();\n        if(state != null) this.state = state;\n\n        CityDTO city = updatedCandidate.getCity();\n        if(city != null) this.city = city;\n\n        SortedSet&lt;CandidateAcademicEducationDTO&gt; academicEducations = updatedCandidate.getAcademicEducations();\n        if(academicEducations != null) EntitySetUpdater.updateEntity(this.academicEducations, academicEducations);\n        \n        SortedSet&lt;CandidateProfessionalExperienceDTO&gt; professionalExperiences = updatedCandidate.getProfessionalExperiences();\n        if(professionalExperiences != null) EntitySetUpdater.updateEntity(this.professionalExperiences, professionalExperiences);\n    }\n\n    @Override\n    public Candidate toEntity() {\n        Candidate candidate = super.toEntity();\n\n        Set&lt;CandidateAcademicEducation&gt; parsedAcademicEducations = new HashSet&lt;&gt;();\n        if(academicEducations != null) {\n            parsedAcademicEducations.addAll(\n                academicEducations.stream().map(\n                    academicEducation -&gt; getParsedEntity(academicEducation)\n                ).collect(Collectors.toSet())\n            );\n        }\n        candidate.setAcademicEducations(parsedAcademicEducations);\n\n        Set&lt;CandidateProfessionalExperience&gt; parsedProfessionalExperiences = new HashSet&lt;&gt;();\n        if(professionalExperiences != null) {\n            parsedProfessionalExperiences.addAll(\n                professionalExperiences.stream().map(\n                    professionalExperience -&gt; getParsedEntity(professionalExperience)\n                ).collect(Collectors.toSet())\n            );\n        }\n        candidate.setProfessionalExperiences(parsedProfessionalExperiences);\n\n        return candidate;\n    }\n}\n</code></pre>\n<p><strong>Candidate professional experience:</strong></p>\n<pre><code>    @Entity\n    @Table(name = &quot;candidate_professional_experiences&quot;)\n    public class CandidateProfessionalExperience {\n        @Id\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\n        private Long id;\n    \n        private String roleName;\n        private String companyName;\n        private String startDate;\n        private String endDate;\n        private boolean actualJob;\n    \n        @Column(length = 1000)\n        private String assignmentsDescription;\n    \n        @ManyToOne\n        private State state;\n    \n        @ManyToOne\n        private City city;\n    \n        @ManyToOne\n        private Candidate candidate;\n    \n        @CreationTimestamp\n        @Column(updatable = false)\n        private Date createdAt;\n     \n        @UpdateTimestamp\n        private Date updatedAt;\n        \n        public CandidateProfessionalExperience() {\n            super();\n        }\n    \n        public CandidateProfessionalExperience(\n            Long id, String roleName, String companyName,\n            String startDate, String endDate, boolean actualJob,\n            String assignmentsDescription, State state, City city,\n            Candidate candidate, Date createdAt, Date updatedAt\n        ) {\n            this.id = id;\n            this.roleName = roleName;\n            this.companyName = companyName;\n            this.startDate = startDate;\n            this.endDate = endDate;\n            this.actualJob = actualJob;\n            this.assignmentsDescription = assignmentsDescription;\n            this.state = state;\n            this.city = city;\n            this.candidate = candidate;\n            this.createdAt = createdAt;\n            this.updatedAt = updatedAt;\n        }\n    }\n</code></pre>\n<p><strong>Candidate Professional Experience DTO:</strong></p>\n<pre><code>       public class CandidateProfessionalExperienceDTO extends EntityDTO&lt;CandidateProfessionalExperience&gt; {\n        private String roleName;\n        private String companyName;\n        private String startDate;\n        private String endDate;\n        private String assignmentsDescription;\n        private boolean actualJob;\n    \n        private StateDTO state;\n        private CityDTO city;\n    \n        @JsonProperty(access = Access.READ_ONLY)\n        private Date createdAt;\n    \n        @JsonProperty(access = Access.READ_ONLY)\n        private Date updatedAt;\n        \n        public CandidateProfessionalExperienceDTO() {\n            super();\n        }\n    \n        public CandidateProfessionalExperienceDTO(\n            Long id, String roleName, String companyName, String startDate,\n            String endDate, String assignmentsDescription, boolean actualJob,\n            StateDTO state, CityDTO city, Date createdAt, Date updatedAt\n        ) {\n            super(id);\n            this.roleName = roleName;\n            this.companyName = companyName;\n            this.startDate = startDate;\n            this.endDate = endDate;\n            this.assignmentsDescription = assignmentsDescription;\n            this.actualJob = actualJob;\n            this.state = state;\n            this.city = city;\n            this.createdAt = createdAt;\n            this.updatedAt = updatedAt;\n        }\n    \n        public static CandidateProfessionalExperienceDTO FromEntity(\n            CandidateProfessionalExperience candidateProfessionalExperienceEntity\n        ) {\n            if(candidateProfessionalExperienceEntity == null) return null;\n            \n            CandidateProfessionalExperienceDTO candidateProfessionalExperienceDTO = new CandidateProfessionalExperienceDTO();\n            candidateProfessionalExperienceDTO.setId(candidateProfessionalExperienceEntity.getId());\n            candidateProfessionalExperienceDTO.setRoleName(candidateProfessionalExperienceEntity.getRoleName());\n            candidateProfessionalExperienceDTO.setCompanyName(candidateProfessionalExperienceEntity.getCompanyName());\n            candidateProfessionalExperienceDTO.setStartDate(candidateProfessionalExperienceEntity.getStartDate());\n            candidateProfessionalExperienceDTO.setEndDate(candidateProfessionalExperienceEntity.getEndDate());\n            candidateProfessionalExperienceDTO.setAssignmentsDescription(\n                candidateProfessionalExperienceEntity.getAssignmentsDescription()\n            );\n            candidateProfessionalExperienceDTO.setActualJob(candidateProfessionalExperienceEntity.isActualJob());\n            candidateProfessionalExperienceDTO.setState(StateDTO.FromEntity(candidateProfessionalExperienceEntity.getState()));\n            candidateProfessionalExperienceDTO.setCity(CityDTO.FromEntity(candidateProfessionalExperienceEntity.getCity()));\n            candidateProfessionalExperienceDTO.setCreatedAt(candidateProfessionalExperienceEntity.getCreatedAt());\n            candidateProfessionalExperienceDTO.setUpdatedAt(candidateProfessionalExperienceEntity.getUpdatedAt());\n    \n            return candidateProfessionalExperienceDTO;\n        }\n    \n        @Override\n        public CandidateProfessionalExperience toEntity() {\n            State parsedState = getParsedEntity(state);\n            City parsedCity = getParsedEntity(city);\n    \n            return new CandidateProfessionalExperience(\n                id, roleName, companyName, startDate, endDate,\n                actualJob, assignmentsDescription, parsedState, parsedCity,\n                null, null, null\n            );\n        }\n    \n        @Override\n        public int compareTo(EntityDTO&lt;CandidateProfessionalExperience&gt; candidateProfessionalExperienceDTO) {\n            if(candidateProfessionalExperienceDTO == null) return -1;\n    \n            CandidateProfessionalExperienceDTO parsedDTO = (CandidateProfessionalExperienceDTO) candidateProfessionalExperienceDTO;\n            int roleNameResult = StringComparator.compareStrings(roleName, parsedDTO.getRoleName());\n            if(roleNameResult != 0) return roleNameResult;\n    \n            return StringComparator.compareStrings(companyName, parsedDTO.getCompanyName());\n        }\n    }\n</code></pre>\n<p><strong>Candidate Academic Education:</strong></p>\n<pre><code>    @Entity\n    @Table(name = &quot;candidate_academic_education&quot;)\n    public class CandidateAcademicEducation {\n        @Id\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\n        private Long id;\n    \n        private String title;\n        private String institutionName;\n        private Integer startYear;\n        private Integer endYear;\n        private CandidateLevelOfSchooling levelOfSchooling;\n    \n        @ManyToOne\n        private Candidate candidate;\n    \n        @CreationTimestamp\n        @Column(updatable = false)\n        private Date createdAt;\n     \n        @UpdateTimestamp\n        private Date updatedAt;\n    \n        public CandidateAcademicEducation() {\n            super();\n        }\n    \n        public CandidateAcademicEducation(\n            Long id, String title, String institutionName,\n            Integer startYear, Integer endYear,\n            CandidateLevelOfSchooling levelOfSchooling,\n            Candidate candidate, Date createdAt, Date updatedAt\n        ) {\n            this.id = id;\n            this.title = title;\n            this.institutionName = institutionName;\n            this.startYear = startYear;\n            this.endYear = endYear;\n            this.levelOfSchooling = levelOfSchooling;\n            this.candidate = candidate;\n            this.createdAt = createdAt;\n            this.updatedAt = updatedAt;\n        }\n    }\n</code></pre>\n<p><strong>Candidate Academic Education DTO:</strong></p>\n<pre><code>    public class CandidateAcademicEducationDTO extends EntityDTO&lt;CandidateAcademicEducation&gt; {\n        private String title;\n        private String institutionName;\n        private Integer startYear;\n        private Integer endYear;\n        private CandidateLevelOfSchooling levelOfSchooling;\n    \n        @JsonProperty(access = Access.READ_ONLY)\n        private Date createdAt;\n    \n        @JsonProperty(access = Access.READ_ONLY)\n        private Date updatedAt;\n        \n        public CandidateAcademicEducationDTO() {\n            super();\n        }\n    \n        public CandidateAcademicEducationDTO(\n            Long id, String title, String institutionName,\n            Integer startYear, Integer endYear,\n            CandidateLevelOfSchooling levelOfSchooling, Date createdAt,\n            Date updatedAt\n        ) {\n            super(id);\n            this.title = title;\n            this.institutionName = institutionName;\n            this.startYear = startYear;\n            this.endYear = endYear;\n            this.levelOfSchooling = levelOfSchooling;\n            this.createdAt = createdAt;\n            this.updatedAt = updatedAt;\n        }\n    \n        public static CandidateAcademicEducationDTO FromEntity(\n            CandidateAcademicEducation candidateAcademicEducationEntity\n        ) {\n            if(candidateAcademicEducationEntity == null) return null;\n            \n            CandidateAcademicEducationDTO candidateAcademicEducationDTO = new CandidateAcademicEducationDTO();\n            candidateAcademicEducationDTO.setId(candidateAcademicEducationEntity.getId());\n            candidateAcademicEducationDTO.setTitle(candidateAcademicEducationEntity.getTitle());\n            candidateAcademicEducationDTO.setInstitutionName(candidateAcademicEducationEntity.getInstitutionName());\n            candidateAcademicEducationDTO.setStartYear(candidateAcademicEducationEntity.getStartYear());\n            candidateAcademicEducationDTO.setEndYear(candidateAcademicEducationEntity.getEndYear());\n            candidateAcademicEducationDTO.setLevelOfSchooling(candidateAcademicEducationEntity.getLevelOfSchooling());\n            candidateAcademicEducationDTO.setCreatedAt(candidateAcademicEducationEntity.getCreatedAt());\n            candidateAcademicEducationDTO.setUpdatedAt(candidateAcademicEducationEntity.getUpdatedAt());\n    \n            return candidateAcademicEducationDTO;\n        }\n    \n        @Override\n        public CandidateAcademicEducation toEntity() {\n            return new CandidateAcademicEducation(\n                id, title, institutionName, startYear, endYear,\n                levelOfSchooling, null, null, null\n            );\n        }\n    \n        @Override\n        public int compareTo(EntityDTO&lt;CandidateAcademicEducation&gt; candidateAcademicEducationDTO) {\n            if(candidateAcademicEducationDTO == null) return -1;\n    \n            CandidateAcademicEducationDTO parsedDTO = (CandidateAcademicEducationDTO) candidateAcademicEducationDTO;\n            int titleResult = StringComparator.compareStrings(title, parsedDTO.getTitle());\n            if(titleResult != 0) return titleResult;\n    \n            return StringComparator.compareStrings(institutionName, parsedDTO.getInstitutionName());\n        }\n    }\n</code></pre>\n<p><strong>Candidate Services (Update method with auxiliar methods):</strong></p>\n<pre><code>private void validateCandidateLinkedin(String linkedin) {\n    boolean existsCandidateByLinkedin = candidateRepository.existsByLinkedin(\n        linkedin\n    );\n    if(existsCandidateByLinkedin) {\n        throw new ServerException(\n            &quot;A candidate with this linkedin already exists&quot;,\n            HttpStatus.BAD_REQUEST\n        );\n    }\n}\n\nprivate void validateCandidatePhoneNumber(String phoneNumber) {\n    boolean existsCandidateByPhoneNumber = candidateRepository.existsByPhoneNumber(\n        phoneNumber\n    );\n    if(existsCandidateByPhoneNumber) {\n        throw new ServerException(\n            &quot;A candidate with this phone number already exists&quot;,\n            HttpStatus.BAD_REQUEST\n        );\n    }\n}\n\nprivate void validateNewCandidateData(\n    Candidate databaseCandidate, CandidateWithAllRelatedDataDTO updatedCandidate\n) {\n    boolean hasDifferentLinkedin = StringComparator.compareStrings(\n        databaseCandidate.getLinkedin(), updatedCandidate.getLinkedin()\n    ) != 0;\n    if(hasDifferentLinkedin) validateCandidateLinkedin(updatedCandidate.getLinkedin());\n\n    boolean hasDifferentPhoneNumber = !databaseCandidate.getPhoneNumber().equals(\n        updatedCandidate.getPhoneNumber()\n    );\n    if(hasDifferentPhoneNumber) validateCandidatePhoneNumber(updatedCandidate.getPhoneNumber());\n}\n\npublic CandidateWithAllRelatedDataDTO update(\n    Long userId, CandidateWithAllRelatedDataDTO updatedCandidate\n) {\n    Candidate findedCandidate = findOneWithAllDataByUserId(\n        userId\n    );\n    if(findedCandidate == null) {\n        throw new ServerException(\n            &quot;Requested user does not have a candidate account&quot;,\n            HttpStatus.BAD_REQUEST\n        );\n    }\n\n    CandidateWithAllRelatedDataDTO parsedUpdatedCandidate = \n        CandidateWithAllRelatedDataDTO.FromEntity(findedCandidate);\n    parsedUpdatedCandidate.update(updatedCandidate);\n\n    validateNewCandidateData(findedCandidate, parsedUpdatedCandidate);\n    parsedUpdatedCandidate.setUpdatedAt(new Date());\n\n    candidateRepository.save(EntityDTO.getParsedEntity(parsedUpdatedCandidate));\n    return findOneById(findedCandidate.getId());\n}\n</code></pre>\n<p><strong>The JSON that i've been using both in create and update methods:</strong></p>\n<pre><code>{\n    &quot;photo&quot;: &quot;photo.png&quot;,\n    &quot;profession&quot;: &quot;Programador&quot;,\n    &quot;phoneNumber&quot;: &quot;(00)9.0000-0000&quot;,\n    &quot;linkedin&quot;: &quot;https://linkedin.com.br&quot;,\n    &quot;birthDate&quot;: &quot;10/2002&quot;,\n    &quot;hasProfessionalExperience&quot;: true,\n    &quot;state&quot;: {\n        &quot;id&quot;: 1\n    },\n    &quot;city&quot;: {\n        &quot;id&quot;: 1\n    },\n    &quot;academicEducations&quot;: [\n        {\n            &quot;title&quot;: &quot;Ciência da Computação&quot;,\n            &quot;institutionName&quot;: &quot;UFERSA&quot;,\n            &quot;startYear&quot;: 2020,\n            &quot;endYear&quot;: 2024,\n            &quot;levelOfSchooling&quot;: &quot;INCOMPLETE_HIGHER_EDUCATION&quot;\n        },\n        {\n            &quot;title&quot;: &quot;Direito&quot;,\n            &quot;institutionName&quot;: &quot;UERN&quot;,\n            &quot;startYear&quot;: 2016,\n            &quot;endYear&quot;: 2020,\n            &quot;levelOfSchooling&quot;: &quot;COMPLETE_HIGHER_EDUCATION&quot;\n        }\n    ],\n    &quot;professionalExperiences&quot;: [\n        {\n            &quot;roleName&quot;: &quot;Administrador de negócios&quot;,\n            &quot;companyName&quot;: &quot;Unijuris&quot;,\n            &quot;startDate&quot;: &quot;05/2019&quot;,\n            &quot;endDate&quot;: &quot;08/2022&quot;,\n            &quot;assignmentsDescription&quot;: &quot;Gestão de pessoas, execução de movimentações financeiras.&quot;,\n            &quot;actualJob&quot;: true,\n            &quot;state&quot;: {\n                &quot;id&quot;: 1\n            },\n            &quot;city&quot;: {\n                &quot;id&quot;: 1\n            }\n        },\n        {\n            &quot;roleName&quot;: &quot;Veterinário&quot;,\n            &quot;companyName&quot;: &quot;Nova startup&quot;,\n            &quot;startDate&quot;: &quot;05/2012&quot;,\n            &quot;endDate&quot;: &quot;06/2019&quot;,\n            &quot;assignmentsDescription&quot;: &quot;Tratamento de animais de várias espécies diferentes.&quot;,\n            &quot;actualJob&quot;: false,\n            &quot;state&quot;: {\n                &quot;id&quot;: 1\n            },\n            &quot;city&quot;: {\n                &quot;id&quot;: 1\n            }\n        }\n    ]\n}\n</code></pre>\n"},{"tags":["java","cognos","cognos-10"],"answers":[{"tags":[],"owner":{"account_id":15911732,"reputation":741,"user_id":11481509,"display_name":"Daniel Wagemann"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660220646,"creation_date":1660220646,"answer_id":73320623,"question_id":73318804,"body_markdown":"As per the error, you are connecting to an SSL protected URL without having the proper cert loaded into the key store.  You can either change the URL to a non SSL URL or access the dispatcher URI directly.   If that is not an option you will need to import the cert.\r\n\r\nhttps://www.ibm.com/support/pages/configuring-triggerbat-connect-ssl-enabled-dispatcher-ibm-cognos-bi-or-replacement-ca-certificate\r\n\r\n","title":"Errors in cognos schedule by trigger","body":"<p>As per the error, you are connecting to an SSL protected URL without having the proper cert loaded into the key store.  You can either change the URL to a non SSL URL or access the dispatcher URI directly.   If that is not an option you will need to import the cert.</p>\n<p><a href=\"https://www.ibm.com/support/pages/configuring-triggerbat-connect-ssl-enabled-dispatcher-ibm-cognos-bi-or-replacement-ca-certificate\" rel=\"nofollow noreferrer\">https://www.ibm.com/support/pages/configuring-triggerbat-connect-ssl-enabled-dispatcher-ibm-cognos-bi-or-replacement-ca-certificate</a></p>\n"}],"owner":{"account_id":25689216,"reputation":1,"user_id":19450885,"display_name":"Lyra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":263,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660220646,"creation_date":1660212121,"question_id":73318804,"body_markdown":"\r\nI set one of my entry for schedule by trigger to save report in cognos.\r\nI was trying to run from command line with the trigger.bat but it keeps showing up errors like this. It keeps showing the certpath not trusted and login failure.\r\nI can’t seem to fix the errors, any suggestions? \r\n\r\nErrors shown:\r\n```\r\nC:\\Program Files\\ibm\\cognos\\c10_64\\webapps\\utilities\\trigger&gt;trigger.bat &quot;https:\r\n//182.196.182.155/ibmcognos/cgi-bin/cognos.cgi&quot; user1 password ladp &quot;te\r\nst_trigger&quot;\r\nAxisFault\r\n faultCode: {http://schemas.xmlsoap.org/soap/envelope/}Server.userException\r\n faultSubcode:\r\n faultString: javax.net.ssl.SSLHandshakeException: com.ibm.jsse2.util.j: PKIX pa\r\nth building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBui\r\nlderImpl could not build a valid CertPath.; internal cause is:\r\n        java.security.cert.CertPathValidatorException: The certificate issued by\r\n CN=cn-uat, DC=dcuat, DC=uat is not trusted; internal cause is:\r\n        java.security.cert.CertPathValidatorException: Certificate chaining erro\r\nr\r\n faultActor:\r\n faultNode:\r\n faultDetail:\r\n        {http://xml.apache.org/axis/}stackTrace:javax.net.ssl.SSLHandshakeExcept\r\nion: com.ibm.jsse2.util.j: PKIX path building failed: java.security.cert.CertPat\r\nhBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; in\r\nternal cause is:\r\n        java.security.cert.CertPathValidatorException: The certificate issued by\r\n CN=cn-uat, DC=dcuat, DC=uat is not trusted; internal cause is:\r\n        java.security.cert.CertPathValidatorException: Certificate chaining erro\r\nr\r\n        at com.ibm.jsse2.j.a(j.java:44)\r\n        at com.ibm.jsse2.qc.a(qc.java:508)\r\n        at com.ibm.jsse2.ab.a(ab.java:148)\r\n        at com.ibm.jsse2.ab.a(ab.java:68)\r\n        at com.ibm.jsse2.bb.a(bb.java:31)\r\n        at com.ibm.jsse2.bb.a(bb.java:115)\r\n        at com.ibm.jsse2.ab.t(ab.java:364)\r\n        at com.ibm.jsse2.ab.a(ab.java:175)\r\n        at com.ibm.jsse2.qc.a(qc.java:592)\r\n        at com.ibm.jsse2.qc.h(qc.java:275)\r\n        at com.ibm.jsse2.qc.a(qc.java:541)\r\n        at com.ibm.jsse2.qc.startHandshake(qc.java:89)\r\n        at org.apache.axis.components.net.JSSESocketFactory.create(JSSESocketFac\r\ntory.java:210)\r\n        at org.apache.axis.transport.http.HTTPSender.getSocket(HTTPSender.java:1\r\n91)\r\n        at org.apache.axis.transport.http.HTTPSender.writeToSocket(HTTPSender.ja\r\nva:404)\r\n        at org.apache.axis.transport.http.HTTPSender.invoke(HTTPSender.java:138)\r\n\r\n        at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrateg\r\ny.java:32)\r\n        at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)\r\n        at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)\r\n        at org.apache.axis.client.AxisClient.invoke(AxisClient.java:165)\r\n        at org.apache.axis.client.Call.invokeEngine(Call.java:2784)\r\n        at org.apache.axis.client.Call.invoke(Call.java:2767)\r\n        at org.apache.axis.client.Call.invoke(Call.java:2443)\r\n        at org.apache.axis.client.Call.invoke(Call.java:2366)\r\n        at org.apache.axis.client.Call.invoke(Call.java:1812)\r\n        at com.cognos.developer.schemas.bibus._3.ContentManagerServiceStub.logon\r\n(ContentManagerServiceStub.java:7948)\r\n        at Trigger.login(Trigger.java:111)\r\n        at Trigger.main(Trigger.java:264)\r\nCaused by: com.ibm.jsse2.util.j: PKIX path building failed: java.security.cert.C\r\nertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPat\r\nh.; internal cause is:\r\n        java.security.cert.CertPathValidatorException: The certificate issued by\r\n CN=cn-uat, DC=dcuat, DC=uat is not trusted; internal cause is:\r\n        java.security.cert.CertPathValidatorException: Certificate chaining erro\r\nr\r\n        at com.ibm.jsse2.util.h.a(h.java:39)\r\n        at com.ibm.jsse2.util.h.b(h.java:76)\r\n        at com.ibm.jsse2.util.g.a(g.java:21)\r\n        at com.ibm.jsse2.yc.a(yc.java:101)\r\n        at com.ibm.jsse2.yc.a(yc.java:56)\r\n        at com.ibm.jsse2.yc.checkServerTrusted(yc.java:77)\r\n        at com.ibm.jsse2.bb.a(bb.java:281)\r\n        ... 23 more\r\nCaused by: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl\r\ncould not build a valid CertPath.; internal cause is:\r\n        java.security.cert.CertPathValidatorException: The certificate issued by\r\n CN=Bankcommuat-CA, DC=bankcomm, DC=uat is not trusted; internal cause is:\r\n        java.security.cert.CertPathValidatorException: Certificate chaining erro\r\nr\r\n        at com.ibm.security.cert.PKIXCertPathBuilderImpl.engineBuild(PKIXCertPat\r\nhBuilderImpl.java:410)\r\n        at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:256)\r\n        at com.ibm.jsse2.util.h.a(h.java:58)\r\n        ... 29 more\r\nCaused by: java.security.cert.CertPathValidatorException: The certificate issued\r\n by CN=cn-uat, DC=dcuat, DC=uat is not trusted; internal cause is:\r\n        java.security.cert.CertPathValidatorException: Certificate chaining erro\r\nr\r\n        at com.ibm.security.cert.BasicChecker.&amp;lt;init&amp;gt;(BasicChecker.java:111\r\n)\r\n        at com.ibm.security.cert.PKIXCertPathValidatorImpl.engineValidate(PKIXCe\r\nrtPathValidatorImpl.java:176)\r\n        at com.ibm.security.cert.PKIXCertPathBuilderImpl.myValidator(PKIXCertPat\r\nhBuilderImpl.java:737)\r\n        at com.ibm.security.cert.PKIXCertPathBuilderImpl.buildCertPath(PKIXCertP\r\nathBuilderImpl.java:649)\r\n        at com.ibm.security.cert.PKIXCertPathBuilderImpl.buildCertPath(PKIXCertP\r\nathBuilderImpl.java:595)\r\n        at com.ibm.security.cert.PKIXCertPathBuilderImpl.engineBuild(PKIXCertPat\r\nhBuilderImpl.java:356)\r\n        ... 31 more\r\nCaused by: java.security.cert.CertPathValidatorException: Certificate chaining e\r\nrror\r\n        at com.ibm.security.cert.CertPathUtil.findIssuer(CertPathUtil.java:316)\r\n        at com.ibm.security.cert.BasicChecker.&amp;lt;init&amp;gt;(BasicChecker.java:108\r\n)\r\n        ... 36 more\r\n\r\n        {http://xml.apache.org/axis/}hostname:UAT136210\r\n\r\njavax.net.ssl.SSLHandshakeException: com.ibm.jsse2.util.j: PKIX path building fa\r\niled: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could\r\n not build a valid CertPath.; internal cause is:\r\n        java.security.cert.CertPathValidatorException: The certificate issued by\r\n CN=Bankcommuat-CA, DC=bankcomm, DC=uat is not trusted; internal cause is:\r\n        java.security.cert.CertPathValidatorException: Certificate chaining erro\r\nr\r\n        at org.apache.axis.AxisFault.makeFault(AxisFault.java:101)\r\n        at org.apache.axis.transport.http.HTTPSender.invoke(HTTPSender.java:154)\r\n\r\n        at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrateg\r\ny.java:32)\r\n        at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)\r\n        at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)\r\n        at org.apache.axis.client.AxisClient.invoke(AxisClient.java:165)\r\n        at org.apache.axis.client.Call.invokeEngine(Call.java:2784)\r\n        at org.apache.axis.client.Call.invoke(Call.java:2767)\r\n        at org.apache.axis.client.Call.invoke(Call.java:2443)\r\n        at org.apache.axis.client.Call.invoke(Call.java:2366)\r\n        at org.apache.axis.client.Call.invoke(Call.java:1812)\r\n        at com.cognos.developer.schemas.bibus._3.ContentManagerServiceStub.logon\r\n(ContentManagerServiceStub.java:7948)\r\n        at Trigger.login(Trigger.java:111)\r\n        at Trigger.main(Trigger.java:264)\r\nCaused by: javax.net.ssl.SSLHandshakeException: com.ibm.jsse2.util.j: PKIX path\r\nbuilding failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilde\r\nrImpl could not build a valid CertPath.; internal cause is:\r\n        java.security.cert.CertPathValidatorException: The certificate issued by\r\n CN=cn-uat, DC=dcuat, DC=uat is not trusted; internal cause is:\r\n        java.security.cert.CertPathValidatorException: Certificate chaining erro\r\nr\r\n        at com.ibm.jsse2.j.a(j.java:44)\r\n        at com.ibm.jsse2.qc.a(qc.java:508)\r\n        at com.ibm.jsse2.ab.a(ab.java:148)\r\n        at com.ibm.jsse2.ab.a(ab.java:68)\r\n        at com.ibm.jsse2.bb.a(bb.java:31)\r\n        at com.ibm.jsse2.bb.a(bb.java:115)\r\n        at com.ibm.jsse2.ab.t(ab.java:364)\r\n        at com.ibm.jsse2.ab.a(ab.java:175)\r\n        at com.ibm.jsse2.qc.a(qc.java:592)\r\n        at com.ibm.jsse2.qc.h(qc.java:275)\r\n        at com.ibm.jsse2.qc.a(qc.java:541)\r\n        at com.ibm.jsse2.qc.startHandshake(qc.java:89)\r\n        at org.apache.axis.components.net.JSSESocketFactory.create(JSSESocketFac\r\ntory.java:210)\r\n        at org.apache.axis.transport.http.HTTPSender.getSocket(HTTPSender.java:1\r\n91)\r\n        at org.apache.axis.transport.http.HTTPSender.writeToSocket(HTTPSender.ja\r\nva:404)\r\n        at org.apache.axis.transport.http.HTTPSender.invoke(HTTPSender.java:138)\r\n\r\n        ... 12 more\r\nCaused by: com.ibm.jsse2.util.j: PKIX path building failed: java.security.cert.C\r\nertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPat\r\nh.; internal cause is:\r\n        java.security.cert.CertPathValidatorException: The certificate issued by\r\n CN=ccn-uat, DC=dcuat, DC=uat is not trusted; internal cause is:\r\n        java.security.cert.CertPathValidatorException: Certificate chaining erro\r\nr\r\n        at com.ibm.jsse2.util.h.a(h.java:39)\r\n        at com.ibm.jsse2.util.h.b(h.java:76)\r\n        at com.ibm.jsse2.util.g.a(g.java:21)\r\n        at com.ibm.jsse2.yc.a(yc.java:101)\r\n        at com.ibm.jsse2.yc.a(yc.java:56)\r\n        at com.ibm.jsse2.yc.checkServerTrusted(yc.java:77)\r\n        at com.ibm.jsse2.bb.a(bb.java:281)\r\n        ... 23 more\r\nCaused by: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl\r\ncould not build a valid CertPath.; internal cause is:\r\n        java.security.cert.CertPathValidatorException: The certificate issued by\r\n CN=ccn-uat, DC=dcuat, DC=uat is not trusted; internal cause is:\r\n        java.security.cert.CertPathValidatorException: Certificate chaining erro\r\nr\r\n        at com.ibm.security.cert.PKIXCertPathBuilderImpl.engineBuild(PKIXCertPat\r\nhBuilderImpl.java:410)\r\n        at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:256)\r\n        at com.ibm.jsse2.util.h.a(h.java:58)\r\n        ... 29 more\r\nCaused by: java.security.cert.CertPathValidatorException: The certificate issued\r\n by CN=ccn-uat, DC=dcuat, DC=uat is not trusted; internal cause is:\r\n        java.security.cert.CertPathValidatorException: Certificate chaining erro\r\nr\r\n        at com.ibm.security.cert.BasicChecker.&lt;init&gt;(BasicChecker.java:111)\r\n        at com.ibm.security.cert.PKIXCertPathValidatorImpl.engineValidate(PKIXCe\r\nrtPathValidatorImpl.java:176)\r\n        at com.ibm.security.cert.PKIXCertPathBuilderImpl.myValidator(PKIXCertPat\r\nhBuilderImpl.java:737)\r\n        at com.ibm.security.cert.PKIXCertPathBuilderImpl.buildCertPath(PKIXCertP\r\nathBuilderImpl.java:649)\r\n        at com.ibm.security.cert.PKIXCertPathBuilderImpl.buildCertPath(PKIXCertP\r\nathBuilderImpl.java:595)\r\n        at com.ibm.security.cert.PKIXCertPathBuilderImpl.engineBuild(PKIXCertPat\r\nhBuilderImpl.java:356)\r\n        ... 31 more\r\nCaused by: java.security.cert.CertPathValidatorException: Certificate chaining e\r\nrror\r\n        at com.ibm.security.cert.CertPathUtil.findIssuer(CertPathUtil.java:316)\r\n        at com.ibm.security.cert.BasicChecker.&lt;init&gt;(BasicChecker.java:108)\r\n        ... 36 more\r\nError: Login Failure - please try again.\r\n\r\n\r\nCommand Line Parameters:\r\n\r\n&lt;URL&gt; [ &lt;userName&gt; &lt;password&gt; &lt;nameSpace&gt; ] triggerList [ &lt;delimiter&gt; ]\r\n\r\n  Required arguments:\r\n\r\n          URL - Server URL\r\n                        eg. &quot;http://localhost:9300/p2pd/servlet/dispatch&quot;\r\n  triggerList - comma separated list of trigger names\r\n                        eg. &quot;triggerName1,triggerName2,triggerName3&quot;\r\n\r\n  NOTE: If using the optional delimiter override parameter defined below, use th\r\ne delimiter specified in that parameter to separate the trigger names\r\n                        eg. &quot;triggerName1|triggerName2|triggerName3&quot;\r\n\r\n  Optional arguments: for use with secured namespace (Anonymous disabled)\r\n\r\n     userName - username, valid within the namespace, to run the utility\r\n     password - password for the given user\r\n    nameSpace - namespace for the desired user\r\n\r\n  Optional argument:\r\n\r\n     delimiter - Use a different triggerList delimiter character to override the\r\n comma delimiter if trigger names contain commas\r\n                        eg. &quot;|\r\n```\r\nThanks.","title":"Errors in cognos schedule by trigger","body":"<p>I set one of my entry for schedule by trigger to save report in cognos.\nI was trying to run from command line with the trigger.bat but it keeps showing up errors like this. It keeps showing the certpath not trusted and login failure.\nI can’t seem to fix the errors, any suggestions?</p>\n<p>Errors shown:</p>\n<pre><code>C:\\Program Files\\ibm\\cognos\\c10_64\\webapps\\utilities\\trigger&gt;trigger.bat &quot;https:\n//182.196.182.155/ibmcognos/cgi-bin/cognos.cgi&quot; user1 password ladp &quot;te\nst_trigger&quot;\nAxisFault\n faultCode: {http://schemas.xmlsoap.org/soap/envelope/}Server.userException\n faultSubcode:\n faultString: javax.net.ssl.SSLHandshakeException: com.ibm.jsse2.util.j: PKIX pa\nth building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBui\nlderImpl could not build a valid CertPath.; internal cause is:\n        java.security.cert.CertPathValidatorException: The certificate issued by\n CN=cn-uat, DC=dcuat, DC=uat is not trusted; internal cause is:\n        java.security.cert.CertPathValidatorException: Certificate chaining erro\nr\n faultActor:\n faultNode:\n faultDetail:\n        {http://xml.apache.org/axis/}stackTrace:javax.net.ssl.SSLHandshakeExcept\nion: com.ibm.jsse2.util.j: PKIX path building failed: java.security.cert.CertPat\nhBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; in\nternal cause is:\n        java.security.cert.CertPathValidatorException: The certificate issued by\n CN=cn-uat, DC=dcuat, DC=uat is not trusted; internal cause is:\n        java.security.cert.CertPathValidatorException: Certificate chaining erro\nr\n        at com.ibm.jsse2.j.a(j.java:44)\n        at com.ibm.jsse2.qc.a(qc.java:508)\n        at com.ibm.jsse2.ab.a(ab.java:148)\n        at com.ibm.jsse2.ab.a(ab.java:68)\n        at com.ibm.jsse2.bb.a(bb.java:31)\n        at com.ibm.jsse2.bb.a(bb.java:115)\n        at com.ibm.jsse2.ab.t(ab.java:364)\n        at com.ibm.jsse2.ab.a(ab.java:175)\n        at com.ibm.jsse2.qc.a(qc.java:592)\n        at com.ibm.jsse2.qc.h(qc.java:275)\n        at com.ibm.jsse2.qc.a(qc.java:541)\n        at com.ibm.jsse2.qc.startHandshake(qc.java:89)\n        at org.apache.axis.components.net.JSSESocketFactory.create(JSSESocketFac\ntory.java:210)\n        at org.apache.axis.transport.http.HTTPSender.getSocket(HTTPSender.java:1\n91)\n        at org.apache.axis.transport.http.HTTPSender.writeToSocket(HTTPSender.ja\nva:404)\n        at org.apache.axis.transport.http.HTTPSender.invoke(HTTPSender.java:138)\n\n        at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrateg\ny.java:32)\n        at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)\n        at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)\n        at org.apache.axis.client.AxisClient.invoke(AxisClient.java:165)\n        at org.apache.axis.client.Call.invokeEngine(Call.java:2784)\n        at org.apache.axis.client.Call.invoke(Call.java:2767)\n        at org.apache.axis.client.Call.invoke(Call.java:2443)\n        at org.apache.axis.client.Call.invoke(Call.java:2366)\n        at org.apache.axis.client.Call.invoke(Call.java:1812)\n        at com.cognos.developer.schemas.bibus._3.ContentManagerServiceStub.logon\n(ContentManagerServiceStub.java:7948)\n        at Trigger.login(Trigger.java:111)\n        at Trigger.main(Trigger.java:264)\nCaused by: com.ibm.jsse2.util.j: PKIX path building failed: java.security.cert.C\nertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPat\nh.; internal cause is:\n        java.security.cert.CertPathValidatorException: The certificate issued by\n CN=cn-uat, DC=dcuat, DC=uat is not trusted; internal cause is:\n        java.security.cert.CertPathValidatorException: Certificate chaining erro\nr\n        at com.ibm.jsse2.util.h.a(h.java:39)\n        at com.ibm.jsse2.util.h.b(h.java:76)\n        at com.ibm.jsse2.util.g.a(g.java:21)\n        at com.ibm.jsse2.yc.a(yc.java:101)\n        at com.ibm.jsse2.yc.a(yc.java:56)\n        at com.ibm.jsse2.yc.checkServerTrusted(yc.java:77)\n        at com.ibm.jsse2.bb.a(bb.java:281)\n        ... 23 more\nCaused by: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl\ncould not build a valid CertPath.; internal cause is:\n        java.security.cert.CertPathValidatorException: The certificate issued by\n CN=Bankcommuat-CA, DC=bankcomm, DC=uat is not trusted; internal cause is:\n        java.security.cert.CertPathValidatorException: Certificate chaining erro\nr\n        at com.ibm.security.cert.PKIXCertPathBuilderImpl.engineBuild(PKIXCertPat\nhBuilderImpl.java:410)\n        at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:256)\n        at com.ibm.jsse2.util.h.a(h.java:58)\n        ... 29 more\nCaused by: java.security.cert.CertPathValidatorException: The certificate issued\n by CN=cn-uat, DC=dcuat, DC=uat is not trusted; internal cause is:\n        java.security.cert.CertPathValidatorException: Certificate chaining erro\nr\n        at com.ibm.security.cert.BasicChecker.&amp;lt;init&amp;gt;(BasicChecker.java:111\n)\n        at com.ibm.security.cert.PKIXCertPathValidatorImpl.engineValidate(PKIXCe\nrtPathValidatorImpl.java:176)\n        at com.ibm.security.cert.PKIXCertPathBuilderImpl.myValidator(PKIXCertPat\nhBuilderImpl.java:737)\n        at com.ibm.security.cert.PKIXCertPathBuilderImpl.buildCertPath(PKIXCertP\nathBuilderImpl.java:649)\n        at com.ibm.security.cert.PKIXCertPathBuilderImpl.buildCertPath(PKIXCertP\nathBuilderImpl.java:595)\n        at com.ibm.security.cert.PKIXCertPathBuilderImpl.engineBuild(PKIXCertPat\nhBuilderImpl.java:356)\n        ... 31 more\nCaused by: java.security.cert.CertPathValidatorException: Certificate chaining e\nrror\n        at com.ibm.security.cert.CertPathUtil.findIssuer(CertPathUtil.java:316)\n        at com.ibm.security.cert.BasicChecker.&amp;lt;init&amp;gt;(BasicChecker.java:108\n)\n        ... 36 more\n\n        {http://xml.apache.org/axis/}hostname:UAT136210\n\njavax.net.ssl.SSLHandshakeException: com.ibm.jsse2.util.j: PKIX path building fa\niled: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could\n not build a valid CertPath.; internal cause is:\n        java.security.cert.CertPathValidatorException: The certificate issued by\n CN=Bankcommuat-CA, DC=bankcomm, DC=uat is not trusted; internal cause is:\n        java.security.cert.CertPathValidatorException: Certificate chaining erro\nr\n        at org.apache.axis.AxisFault.makeFault(AxisFault.java:101)\n        at org.apache.axis.transport.http.HTTPSender.invoke(HTTPSender.java:154)\n\n        at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrateg\ny.java:32)\n        at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)\n        at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)\n        at org.apache.axis.client.AxisClient.invoke(AxisClient.java:165)\n        at org.apache.axis.client.Call.invokeEngine(Call.java:2784)\n        at org.apache.axis.client.Call.invoke(Call.java:2767)\n        at org.apache.axis.client.Call.invoke(Call.java:2443)\n        at org.apache.axis.client.Call.invoke(Call.java:2366)\n        at org.apache.axis.client.Call.invoke(Call.java:1812)\n        at com.cognos.developer.schemas.bibus._3.ContentManagerServiceStub.logon\n(ContentManagerServiceStub.java:7948)\n        at Trigger.login(Trigger.java:111)\n        at Trigger.main(Trigger.java:264)\nCaused by: javax.net.ssl.SSLHandshakeException: com.ibm.jsse2.util.j: PKIX path\nbuilding failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilde\nrImpl could not build a valid CertPath.; internal cause is:\n        java.security.cert.CertPathValidatorException: The certificate issued by\n CN=cn-uat, DC=dcuat, DC=uat is not trusted; internal cause is:\n        java.security.cert.CertPathValidatorException: Certificate chaining erro\nr\n        at com.ibm.jsse2.j.a(j.java:44)\n        at com.ibm.jsse2.qc.a(qc.java:508)\n        at com.ibm.jsse2.ab.a(ab.java:148)\n        at com.ibm.jsse2.ab.a(ab.java:68)\n        at com.ibm.jsse2.bb.a(bb.java:31)\n        at com.ibm.jsse2.bb.a(bb.java:115)\n        at com.ibm.jsse2.ab.t(ab.java:364)\n        at com.ibm.jsse2.ab.a(ab.java:175)\n        at com.ibm.jsse2.qc.a(qc.java:592)\n        at com.ibm.jsse2.qc.h(qc.java:275)\n        at com.ibm.jsse2.qc.a(qc.java:541)\n        at com.ibm.jsse2.qc.startHandshake(qc.java:89)\n        at org.apache.axis.components.net.JSSESocketFactory.create(JSSESocketFac\ntory.java:210)\n        at org.apache.axis.transport.http.HTTPSender.getSocket(HTTPSender.java:1\n91)\n        at org.apache.axis.transport.http.HTTPSender.writeToSocket(HTTPSender.ja\nva:404)\n        at org.apache.axis.transport.http.HTTPSender.invoke(HTTPSender.java:138)\n\n        ... 12 more\nCaused by: com.ibm.jsse2.util.j: PKIX path building failed: java.security.cert.C\nertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPat\nh.; internal cause is:\n        java.security.cert.CertPathValidatorException: The certificate issued by\n CN=ccn-uat, DC=dcuat, DC=uat is not trusted; internal cause is:\n        java.security.cert.CertPathValidatorException: Certificate chaining erro\nr\n        at com.ibm.jsse2.util.h.a(h.java:39)\n        at com.ibm.jsse2.util.h.b(h.java:76)\n        at com.ibm.jsse2.util.g.a(g.java:21)\n        at com.ibm.jsse2.yc.a(yc.java:101)\n        at com.ibm.jsse2.yc.a(yc.java:56)\n        at com.ibm.jsse2.yc.checkServerTrusted(yc.java:77)\n        at com.ibm.jsse2.bb.a(bb.java:281)\n        ... 23 more\nCaused by: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl\ncould not build a valid CertPath.; internal cause is:\n        java.security.cert.CertPathValidatorException: The certificate issued by\n CN=ccn-uat, DC=dcuat, DC=uat is not trusted; internal cause is:\n        java.security.cert.CertPathValidatorException: Certificate chaining erro\nr\n        at com.ibm.security.cert.PKIXCertPathBuilderImpl.engineBuild(PKIXCertPat\nhBuilderImpl.java:410)\n        at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:256)\n        at com.ibm.jsse2.util.h.a(h.java:58)\n        ... 29 more\nCaused by: java.security.cert.CertPathValidatorException: The certificate issued\n by CN=ccn-uat, DC=dcuat, DC=uat is not trusted; internal cause is:\n        java.security.cert.CertPathValidatorException: Certificate chaining erro\nr\n        at com.ibm.security.cert.BasicChecker.&lt;init&gt;(BasicChecker.java:111)\n        at com.ibm.security.cert.PKIXCertPathValidatorImpl.engineValidate(PKIXCe\nrtPathValidatorImpl.java:176)\n        at com.ibm.security.cert.PKIXCertPathBuilderImpl.myValidator(PKIXCertPat\nhBuilderImpl.java:737)\n        at com.ibm.security.cert.PKIXCertPathBuilderImpl.buildCertPath(PKIXCertP\nathBuilderImpl.java:649)\n        at com.ibm.security.cert.PKIXCertPathBuilderImpl.buildCertPath(PKIXCertP\nathBuilderImpl.java:595)\n        at com.ibm.security.cert.PKIXCertPathBuilderImpl.engineBuild(PKIXCertPat\nhBuilderImpl.java:356)\n        ... 31 more\nCaused by: java.security.cert.CertPathValidatorException: Certificate chaining e\nrror\n        at com.ibm.security.cert.CertPathUtil.findIssuer(CertPathUtil.java:316)\n        at com.ibm.security.cert.BasicChecker.&lt;init&gt;(BasicChecker.java:108)\n        ... 36 more\nError: Login Failure - please try again.\n\n\nCommand Line Parameters:\n\n&lt;URL&gt; [ &lt;userName&gt; &lt;password&gt; &lt;nameSpace&gt; ] triggerList [ &lt;delimiter&gt; ]\n\n  Required arguments:\n\n          URL - Server URL\n                        eg. &quot;http://localhost:9300/p2pd/servlet/dispatch&quot;\n  triggerList - comma separated list of trigger names\n                        eg. &quot;triggerName1,triggerName2,triggerName3&quot;\n\n  NOTE: If using the optional delimiter override parameter defined below, use th\ne delimiter specified in that parameter to separate the trigger names\n                        eg. &quot;triggerName1|triggerName2|triggerName3&quot;\n\n  Optional arguments: for use with secured namespace (Anonymous disabled)\n\n     userName - username, valid within the namespace, to run the utility\n     password - password for the given user\n    nameSpace - namespace for the desired user\n\n  Optional argument:\n\n     delimiter - Use a different triggerList delimiter character to override the\n comma delimiter if trigger names contain commas\n                        eg. &quot;|\n</code></pre>\n<p>Thanks.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1464024338,"creation_date":1464024338,"answer_id":37397033,"question_id":37396972,"body_markdown":"[`TreeSet`][1] treats two objects for which `compareTo` returns 0 to be equals. Which means you&#39;ll can never have two objects with the same priority in your tree set with your current implementation.\r\n\r\nOn way to fix your problem is to make your `compareTo` method consider all values that you care about (i.e. only objects that are actually equal return 0).\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/TreeSet.html","title":"Objects disappearing from Java TreeSet","body":"<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/TreeSet.html\" rel=\"nofollow\"><code>TreeSet</code></a> treats two objects for which <code>compareTo</code> returns 0 to be equals. Which means you'll can never have two objects with the same priority in your tree set with your current implementation.</p>\n\n<p>On way to fix your problem is to make your <code>compareTo</code> method consider all values that you care about (i.e. only objects that are actually equal return 0).</p>\n"},{"tags":[],"owner":{"account_id":8445215,"reputation":11578,"user_id":6336139,"display_name":"T. Claverie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1464024537,"creation_date":1464024537,"answer_id":37397090,"question_id":37396972,"body_markdown":"A `Set` is a collection of unique elements. As you are using the priority to compare `PacketListener`, I assume that there are at most five instances in you `TreeSet`, one for each priority.\r\n\r\nIf the structure allows you, you can find a secondary key to compare `PacketListener`, in case they have the same priority. If you can&#39;t, then `TreeSet` is the wrong way to go.","title":"Objects disappearing from Java TreeSet","body":"<p>A <code>Set</code> is a collection of unique elements. As you are using the priority to compare <code>PacketListener</code>, I assume that there are at most five instances in you <code>TreeSet</code>, one for each priority.</p>\n\n<p>If the structure allows you, you can find a secondary key to compare <code>PacketListener</code>, in case they have the same priority. If you can't, then <code>TreeSet</code> is the wrong way to go.</p>\n"},{"tags":[],"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1660220549,"creation_date":1464024994,"answer_id":37397231,"question_id":37396972,"body_markdown":"[The API docs for `TreeSet`][1] contain this important information:\r\n\r\n&gt; Note that the ordering maintained by a set (whether or not an explicit comparator is provided) must be *consistent with equals* if it is to correctly implement the `Set` interface. [...] This is so because the `Set` interface is defined in terms of the `equals` operation, but a `TreeSet` instance performs all element comparisons using its `compareTo` (or `compare`) method, so two elements that are deemed equal by this method are, from the standpoint of the set, equal.\r\n\r\nIn other words, a `TreeSet` can accommodate multiple instances of your `PacketListener` class, but only so long as each has a different priority than all the others, so that for every pair of elements *A* and *B*, exactly one of these holds: either `A == B` or `A.compareTo(B) != 0`.\r\n\r\nIf you must accommodate multiple `PacketListener` instances with the same priority in the same collection, then you need a different type of collection.  `HashSet` is perfectly good with classes that use the `equals()` and `hashCode()` methods inherited from `Object`, provided that that is indeed the desired sense of instance equality.  You could also consider a `LinkedHashSet` if you want some kind of guarantee about iteration order, or maybe a `PriorityQueue` if you want to order by priority but you are willing to use a different mechanism to avoid duplicates.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/TreeSet.html","title":"Objects disappearing from Java TreeSet","body":"<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/TreeSet.html\" rel=\"nofollow noreferrer\">The API docs for <code>TreeSet</code></a> contain this important information:</p>\n<blockquote>\n<p>Note that the ordering maintained by a set (whether or not an explicit comparator is provided) must be <em>consistent with equals</em> if it is to correctly implement the <code>Set</code> interface. [...] This is so because the <code>Set</code> interface is defined in terms of the <code>equals</code> operation, but a <code>TreeSet</code> instance performs all element comparisons using its <code>compareTo</code> (or <code>compare</code>) method, so two elements that are deemed equal by this method are, from the standpoint of the set, equal.</p>\n</blockquote>\n<p>In other words, a <code>TreeSet</code> can accommodate multiple instances of your <code>PacketListener</code> class, but only so long as each has a different priority than all the others, so that for every pair of elements <em>A</em> and <em>B</em>, exactly one of these holds: either <code>A == B</code> or <code>A.compareTo(B) != 0</code>.</p>\n<p>If you must accommodate multiple <code>PacketListener</code> instances with the same priority in the same collection, then you need a different type of collection.  <code>HashSet</code> is perfectly good with classes that use the <code>equals()</code> and <code>hashCode()</code> methods inherited from <code>Object</code>, provided that that is indeed the desired sense of instance equality.  You could also consider a <code>LinkedHashSet</code> if you want some kind of guarantee about iteration order, or maybe a <code>PriorityQueue</code> if you want to order by priority but you are willing to use a different mechanism to avoid duplicates.</p>\n"}],"owner":{"account_id":7115457,"reputation":1071,"user_id":5441932,"accept_rate":69,"display_name":"konsolas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":701,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":37397231,"answer_count":3,"score":2,"last_activity_date":1660220549,"creation_date":1464024109,"question_id":37396972,"body_markdown":"I have a class that I&#39;d like to put in a `TreeSet`, which implements `Comparable` to sort them by priority. Here&#39;s a small segment:\r\n\r\n    public abstract class PacketListener implements Comparable&lt;PacketListener&gt; {\r\n        public enum ListenerPriority {\r\n            LOWEST, LOW, NORMAL, HIGH, HIGHEST\r\n        }\r\n\r\n        private final ListenerPriority priority; // Initialized in constructor\r\n        \r\n        // ... class body ...\r\n        \r\n        @Override\r\n        public final int compareTo(PacketListener o) {\r\n            return priority.compareTo(o.priority);\r\n        }\r\n    }\r\n\r\nThe idea is obviously for the `TreeSet` to sort the objects by priority, allowing me to iterate through the listeners in order. However, I&#39;ve discovered that, for some reason, I can&#39;t add a second `PacketListener` to the set object. After adding two different `PacketListener` objects, the size of the set remains at 1.\r\n\r\nShould I not be using `TreeSet`?","title":"Objects disappearing from Java TreeSet","body":"<p>I have a class that I'd like to put in a <code>TreeSet</code>, which implements <code>Comparable</code> to sort them by priority. Here's a small segment:</p>\n\n<pre><code>public abstract class PacketListener implements Comparable&lt;PacketListener&gt; {\n    public enum ListenerPriority {\n        LOWEST, LOW, NORMAL, HIGH, HIGHEST\n    }\n\n    private final ListenerPriority priority; // Initialized in constructor\n\n    // ... class body ...\n\n    @Override\n    public final int compareTo(PacketListener o) {\n        return priority.compareTo(o.priority);\n    }\n}\n</code></pre>\n\n<p>The idea is obviously for the <code>TreeSet</code> to sort the objects by priority, allowing me to iterate through the listeners in order. However, I've discovered that, for some reason, I can't add a second <code>PacketListener</code> to the set object. After adding two different <code>PacketListener</code> objects, the size of the set remains at 1.</p>\n\n<p>Should I not be using <code>TreeSet</code>?</p>\n"},{"tags":["java","selenium","salesforce"],"comments":[{"owner":{"account_id":25717722,"reputation":10119,"user_id":19475185,"display_name":"Barry the Platipus"},"score":0,"creation_date":1660056539,"post_id":73293804,"comment_id":129439697,"body_markdown":"Did you try hovering over the element with ActionChains? Selenium documentatiion can be found at https://www.selenium.dev/documentation/","body":"Did you try hovering over the element with ActionChains? Selenium documentatiion can be found at <a href=\"https://www.selenium.dev/documentation/\" rel=\"nofollow noreferrer\">selenium.dev/documentation</a>"},{"owner":{"account_id":26019576,"reputation":11,"user_id":19727457,"display_name":"Mansi Palav"},"score":0,"creation_date":1660134440,"post_id":73293804,"comment_id":129460399,"body_markdown":"Yes, I did hovering by using Action class  and driver.moveToElement(hoverElement).perform(); method. Just struggling to get the text out of it.","body":"Yes, I did hovering by using Action class  and driver.moveToElement(hoverElement).perform(); method. Just struggling to get the text out of it."}],"answers":[{"tags":[],"owner":{"account_id":26019576,"reputation":11,"user_id":19727457,"display_name":"Mansi Palav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660220297,"creation_date":1660220297,"answer_id":73320534,"question_id":73293804,"body_markdown":"I got a solution for this and got to learn new things\r\n\r\nSo the web element attribute values is dynamic it keeps on changing its value before hover, on hover, after hover. hence, I was not able to trace the text residing in it.\r\nSo first thing I would suggest is to analyze the attribute values and take the one which is needed.\r\n\r\n**Code before hover:**\r\n\r\n    &lt;lightning-primitive-bubble class=&quot;slds-hide slds-popover slds-popover_tooltip slds-fall-into-ground slds-nubbin_bottom-left&quot; style=&quot;position: absolute; min-width: 75px;&quot; role=&quot;tooltip&quot; id=&quot;salesforce-lightning-tooltip-bubble_e3b7781a-384d-c9bf-0b46-4d6fa6b1bba4&quot;&gt;&lt;div class=&quot;slds-popover__body&quot;&gt;&lt;/div&gt;&lt;/lightning-primitive-bubble&gt;\r\n    &lt;div class=&quot;slds-popover__body&quot;&gt;&lt;/div&gt;\r\n    &lt;/lightning-primitive-bubble&gt;\r\n\r\n**On Hover:**\r\nclass and id both got change \r\nfor example class = &quot;slds-popover slds-popover_tooltip slds-nubbin_bottom-left slds-rise-from-ground&quot; \r\n\r\n**After hover:** \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;lightning-primitive-bubble class=&quot;slds-popover slds-popover_tooltip slds-nubbin_top-left slds-fall-into-ground slds-hide&quot; style=&quot;position: fixed; min-width: 75px; z-index: 9100; left: 421px; right: auto; top: 100px;&quot; role=&quot;tooltip&quot; id=&quot;salesforce-lightning-tooltip-bubble_aaddfd6a-2e8f-0462-d8f5-4574cd12e11f&quot;\r\n      data-position-id=&quot;lgcp-1000002&quot;&gt;\r\n      &lt;div class=&quot;slds-popover__body&quot;&gt;When did the current support plan begin?&lt;/div&gt;\r\n    &lt;/lightning-primitive-bubble&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nSo in my case the tooltip text was coming on mouse hover and after mouse hover as well.\r\nSo I took the dynamic element which is **on mouse hover**\r\n\r\n    //Hover on help text\r\n    we = driver.findElement(By.xpath(&quot;(//lightning-helptext)[3]&quot;));\r\n        \t actions.moveToElement(we).build().perform();\r\n    \r\n    //Found the dynamic web element on mouse hover     \r\n    String actualHelpText = new WebDriverWait(driver, Duration.ofSeconds(10)).until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;//*[@class=\\&quot;slds-popover slds-popover_tooltip slds-nubbin_bottom-left slds-rise-from-ground\\&quot;]&quot;))).getText();\r\n    System.out.println(new WebDriverWait(driver, Duration.ofSeconds(10)).until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;//*[@class=\\&quot;slds-popover slds-popover_tooltip slds-nubbin_bottom-left slds-rise-from-ground\\&quot;]&quot;))).getText());\r\n    assertEquals(actualHelpText,&quot;When did the current support plan begin?&quot;);\r\n\t\r\n\r\n\r\n\r\nPlease hit the vote to the answer if you got help with this. ","title":"How to get the text of tooltip/ help text on mouse hover?","body":"<p>I got a solution for this and got to learn new things</p>\n<p>So the web element attribute values is dynamic it keeps on changing its value before hover, on hover, after hover. hence, I was not able to trace the text residing in it.\nSo first thing I would suggest is to analyze the attribute values and take the one which is needed.</p>\n<p><strong>Code before hover:</strong></p>\n<pre><code>&lt;lightning-primitive-bubble class=&quot;slds-hide slds-popover slds-popover_tooltip slds-fall-into-ground slds-nubbin_bottom-left&quot; style=&quot;position: absolute; min-width: 75px;&quot; role=&quot;tooltip&quot; id=&quot;salesforce-lightning-tooltip-bubble_e3b7781a-384d-c9bf-0b46-4d6fa6b1bba4&quot;&gt;&lt;div class=&quot;slds-popover__body&quot;&gt;&lt;/div&gt;&lt;/lightning-primitive-bubble&gt;\n&lt;div class=&quot;slds-popover__body&quot;&gt;&lt;/div&gt;\n&lt;/lightning-primitive-bubble&gt;\n</code></pre>\n<p><strong>On Hover:</strong>\nclass and id both got change\nfor example class = &quot;slds-popover slds-popover_tooltip slds-nubbin_bottom-left slds-rise-from-ground&quot;</p>\n<p><strong>After hover:</strong></p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;lightning-primitive-bubble class=\"slds-popover slds-popover_tooltip slds-nubbin_top-left slds-fall-into-ground slds-hide\" style=\"position: fixed; min-width: 75px; z-index: 9100; left: 421px; right: auto; top: 100px;\" role=\"tooltip\" id=\"salesforce-lightning-tooltip-bubble_aaddfd6a-2e8f-0462-d8f5-4574cd12e11f\"\n  data-position-id=\"lgcp-1000002\"&gt;\n  &lt;div class=\"slds-popover__body\"&gt;When did the current support plan begin?&lt;/div&gt;\n&lt;/lightning-primitive-bubble&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>So in my case the tooltip text was coming on mouse hover and after mouse hover as well.\nSo I took the dynamic element which is <strong>on mouse hover</strong></p>\n<pre><code>//Hover on help text\nwe = driver.findElement(By.xpath(&quot;(//lightning-helptext)[3]&quot;));\n         actions.moveToElement(we).build().perform();\n\n//Found the dynamic web element on mouse hover     \nString actualHelpText = new WebDriverWait(driver, Duration.ofSeconds(10)).until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;//*[@class=\\&quot;slds-popover slds-popover_tooltip slds-nubbin_bottom-left slds-rise-from-ground\\&quot;]&quot;))).getText();\nSystem.out.println(new WebDriverWait(driver, Duration.ofSeconds(10)).until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;//*[@class=\\&quot;slds-popover slds-popover_tooltip slds-nubbin_bottom-left slds-rise-from-ground\\&quot;]&quot;))).getText());\nassertEquals(actualHelpText,&quot;When did the current support plan begin?&quot;);\n</code></pre>\n<p>Please hit the vote to the answer if you got help with this.</p>\n"}],"owner":{"account_id":26019576,"reputation":11,"user_id":19727457,"display_name":"Mansi Palav"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1312,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1660220297,"creation_date":1660056375,"question_id":73293804,"body_markdown":"I am trying to get the text/content on the tooltip/help text. I am using selenium java. \r\n\r\nExpected Result: To get the text so that I can verify by assertEquals\r\n\r\nActual Result: Not getting the text. It is getting null values. No error as such\r\n\r\nHTML CODE:\r\n\r\n    &lt;lightning-primitive-bubble class=&quot;slds-popover slds-popover_tooltip slds-nubbin_bottom-left slds-fall-into-ground&quot; role=&quot;tooltip&quot; id=&quot;salesforce-lightning-tooltip-bubble_8869b6bc-5567-f877-4ce1-037d1eaa3c37&quot; style=&quot;position: fixed; min-width: 75px; z-index: 9104; left: 421px; right: auto; top: 114px;&quot; data-position-id=&quot;lgcp-1000014&quot;&gt;&lt;div class=&quot;slds-popover__body&quot;&gt;When did the current support plan begin?&lt;/div&gt;&lt;/lightning-primitive-bubble&gt;\r\n\r\nMouse hover is done successfully. Only the text of the help text is not retrieved in the output\r\nHere is my code\r\n\r\n    String help = driver.findElement(By.xpath(&quot;(//lightning-primitive-bubble/div)[1]&quot;)).getText();\r\n    System.out.printf(&quot;Help text &gt;&quot;, help);\r\n\r\nI have tried multiple things like I have tried full xpath, absolute xpath, css selector, etc.\r\nAlso tried multiple methods\r\n .getText(); .getAttribute(&quot;innerText&quot;), .getAttribute(&quot;textContent&quot;),etc.\r\n\r\nReferred following link\r\nhttps://stackoverflow.com/questions/16705165/unable-to-extract-the-text-using-gettext-in-selenium-webdriver-and-also-unable-t\r\n\r\nhttps://www.seleniumeasy.com/selenium-tutorials/how-to-verify-tooltip-text-with-selenium-webdriver-using-java\r\n\r\nCan someone please help me to get the text\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to get the text of tooltip/ help text on mouse hover?","body":"<p>I am trying to get the text/content on the tooltip/help text. I am using selenium java.</p>\n<p>Expected Result: To get the text so that I can verify by assertEquals</p>\n<p>Actual Result: Not getting the text. It is getting null values. No error as such</p>\n<p>HTML CODE:</p>\n<pre><code>&lt;lightning-primitive-bubble class=&quot;slds-popover slds-popover_tooltip slds-nubbin_bottom-left slds-fall-into-ground&quot; role=&quot;tooltip&quot; id=&quot;salesforce-lightning-tooltip-bubble_8869b6bc-5567-f877-4ce1-037d1eaa3c37&quot; style=&quot;position: fixed; min-width: 75px; z-index: 9104; left: 421px; right: auto; top: 114px;&quot; data-position-id=&quot;lgcp-1000014&quot;&gt;&lt;div class=&quot;slds-popover__body&quot;&gt;When did the current support plan begin?&lt;/div&gt;&lt;/lightning-primitive-bubble&gt;\n</code></pre>\n<p>Mouse hover is done successfully. Only the text of the help text is not retrieved in the output\nHere is my code</p>\n<pre><code>String help = driver.findElement(By.xpath(&quot;(//lightning-primitive-bubble/div)[1]&quot;)).getText();\nSystem.out.printf(&quot;Help text &gt;&quot;, help);\n</code></pre>\n<p>I have tried multiple things like I have tried full xpath, absolute xpath, css selector, etc.\nAlso tried multiple methods\n.getText(); .getAttribute(&quot;innerText&quot;), .getAttribute(&quot;textContent&quot;),etc.</p>\n<p>Referred following link\n<a href=\"https://stackoverflow.com/questions/16705165/unable-to-extract-the-text-using-gettext-in-selenium-webdriver-and-also-unable-t\">Unable to extract the text using gettext in Selenium WebDriver and also unable to click it</a></p>\n<p><a href=\"https://www.seleniumeasy.com/selenium-tutorials/how-to-verify-tooltip-text-with-selenium-webdriver-using-java\" rel=\"nofollow noreferrer\">https://www.seleniumeasy.com/selenium-tutorials/how-to-verify-tooltip-text-with-selenium-webdriver-using-java</a></p>\n<p>Can someone please help me to get the text</p>\n"},{"tags":["java","android","android-layout","android-activity","onconfigurationchanged"],"comments":[{"owner":{"account_id":15293172,"reputation":1557,"user_id":11034109,"display_name":"Dhanuesh"},"score":0,"creation_date":1610379181,"post_id":65669657,"comment_id":116107354,"body_markdown":"for dealing with lifecycle-events in a better and elegant way use `viewmodels`, take a look at the [official docs](https://developer.android.com/topic/libraries/architecture/viewmodel) for more info","body":"for dealing with lifecycle-events in a better and elegant way use <code>viewmodels</code>, take a look at the <a href=\"https://developer.android.com/topic/libraries/architecture/viewmodel\" rel=\"nofollow noreferrer\">official docs</a> for more info"},{"owner":{"account_id":19834873,"reputation":37,"user_id":14528724,"display_name":"Paruyr"},"score":0,"creation_date":1610381740,"post_id":65669657,"comment_id":116108659,"body_markdown":"@rcs if you mean deleting android:configChanges in manifest and working with the lifecycle the issue is the same lifecycle event are not called when rotating 180 degree from landscape to reverse landscape","body":"@rcs if you mean deleting android:configChanges in manifest and working with the lifecycle the issue is the same lifecycle event are not called when rotating 180 degree from landscape to reverse landscape"}],"answers":[{"tags":[],"owner":{"account_id":35743,"reputation":150884,"user_id":101361,"accept_rate":71,"display_name":"laalto"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1610379460,"creation_date":1610379460,"answer_id":65669897,"question_id":65669657,"body_markdown":"The default `screenOrientation` mode behavior is vendor and device specific. For phones, it&#39;s typical that only -90&#176;, 0&#176; and 90&#176; are supported.\r\n\r\nTo support all orientations, add `android:screenOrientation=&quot;fullSensor&quot;` to your activity&#39;s manifest entry.\r\n\r\nDocs: https://developer.android.com/guide/topics/manifest/activity-element#screen","title":"How handle Android Device 180 degree rotation (reverseLandscape)? - onConfigurationChanged is not called","body":"<p>The default <code>screenOrientation</code> mode behavior is vendor and device specific. For phones, it's typical that only -90°, 0° and 90° are supported.</p>\n<p>To support all orientations, add <code>android:screenOrientation=&quot;fullSensor&quot;</code> to your activity's manifest entry.</p>\n<p>Docs: <a href=\"https://developer.android.com/guide/topics/manifest/activity-element#screen\" rel=\"nofollow noreferrer\">https://developer.android.com/guide/topics/manifest/activity-element#screen</a></p>\n"},{"tags":[],"owner":{"account_id":23469875,"reputation":1,"user_id":17523520,"display_name":"UgurBH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660220194,"creation_date":1659948543,"answer_id":73275151,"question_id":65669657,"body_markdown":"Kind of late answer but it may help in the future.\r\n\r\nCall `setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_FULL_SENSOR)` in your main activity&#39;s onCreate method.\r\n\r\nBelow works for me.\r\n\r\n    MainActivity.this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_FULL_SENSOR);","title":"How handle Android Device 180 degree rotation (reverseLandscape)? - onConfigurationChanged is not called","body":"<p>Kind of late answer but it may help in the future.</p>\n<p>Call <code>setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_FULL_SENSOR)</code> in your main activity's onCreate method.</p>\n<p>Below works for me.</p>\n<pre><code>MainActivity.this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_FULL_SENSOR);\n</code></pre>\n"}],"owner":{"account_id":19834873,"reputation":37,"user_id":14528724,"display_name":"Paruyr"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":869,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1660220194,"creation_date":1610378670,"question_id":65669657,"body_markdown":"When rotating phone 180 degree onConfigurationChanged Callback is not called, only works when changing  rotation from portrait to landscape and vice verse, however rotating 180 degree when on landscape view is rotated however onConfigurationChanged  callback is not called. How to handle 180 rotating. \r\n\r\n\r\nmy Manifest\r\n```\r\n&lt;activity\r\n            android:name=&quot;com.myApp.Activity&quot;\r\n            android:configChanges=&quot;screenSize|smallestScreenSize|screenLayout|orientation&quot;/&gt;\r\n```\r\n\r\nmy Activity\r\n\r\n \r\n\r\n    @Override\r\n        public void onConfigurationChanged(Configuration newConfig) {\r\n            super.onConfigurationChanged(newConfig);\r\n            Toast.makeText(this, &quot;rotated&quot;, Toast.LENGTH_SHORT).show();\r\n        }","title":"How handle Android Device 180 degree rotation (reverseLandscape)? - onConfigurationChanged is not called","body":"<p>When rotating phone 180 degree onConfigurationChanged Callback is not called, only works when changing  rotation from portrait to landscape and vice verse, however rotating 180 degree when on landscape view is rotated however onConfigurationChanged  callback is not called. How to handle 180 rotating.</p>\n<p>my Manifest</p>\n<pre><code>&lt;activity\n            android:name=&quot;com.myApp.Activity&quot;\n            android:configChanges=&quot;screenSize|smallestScreenSize|screenLayout|orientation&quot;/&gt;\n</code></pre>\n<p>my Activity</p>\n<pre><code>@Override\n    public void onConfigurationChanged(Configuration newConfig) {\n        super.onConfigurationChanged(newConfig);\n        Toast.makeText(this, &quot;rotated&quot;, Toast.LENGTH_SHORT).show();\n    }\n</code></pre>\n"},{"tags":["java","selenium","selenium-webdriver","xpath","findelement"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":1,"creation_date":1660231697,"post_id":73320342,"comment_id":129489143,"body_markdown":"Please [edit] your question and add the relevant fragment of the html, for a [mcve].","body":"Please <a href=\"https://stackoverflow.com/posts/73320342/edit\">edit</a> your question and add the relevant fragment of the html, for a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":226259,"reputation":2571,"user_id":7372462,"display_name":"Conal Tuohy"},"score":0,"creation_date":1660301491,"post_id":73320342,"comment_id":129506051,"body_markdown":"What happens? Does it produce an error message?","body":"What happens? Does it produce an error message?"},{"owner":{"account_id":26037731,"reputation":1,"user_id":19742978,"display_name":"Ema"},"score":0,"creation_date":1660301846,"post_id":73320342,"comment_id":129506188,"body_markdown":"It produces the following error message:\n\norg.openqa.selenium.NoSuchElementException: no such element:  Unable to locate element: {&quot;method&quot;:&quot;xpath&quot;,&quot;selector&quot;:&quot;//*[text()=&#39;Linearmodule&#39;]&quot;}","body":"It produces the following error message:  org.openqa.selenium.NoSuchElementException: no such element:  Unable to locate element: {&quot;method&quot;:&quot;xpath&quot;,&quot;selector&quot;:&quot;//*[text()=&#39;Linearmodule&#39;]&quot;}"}],"owner":{"account_id":26037731,"reputation":1,"user_id":19742978,"display_name":"Ema"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660220006,"creation_date":1660219411,"question_id":73320342,"body_markdown":"I&#39;m writing an automated test in Java where I want to send text of an element I need clicked, to be found through that text. Here&#39;s the code:\r\n\r\n```java\r\npublic void selectElement(String elementName, String type, String input){\r\n\r\n        By elementToSelect = By.xpath(&quot;//*[text()=&#39;&quot; + elementName + &quot;&#39;]&quot;);\r\n\r\n        switch (type) {\r\n            case &quot;Photo&quot;, &quot;Radio&quot;, &quot;Button&quot;, &quot;Checkbox&quot; -&gt; {\r\n                driver.findElement(elementToSelect).click();\r\n            }\r\n            case &quot;Edit&quot; -&gt; {\r\n                WebElement edit = driver.findElement(elementToSelect);\r\n                edit.sendKeys(input + org.openqa.selenium.Keys.ENTER);\r\n            }\r\n         \r\n        }\r\n    }\r\n```\r\n\r\nI also tried with this but no such luck: \r\n\r\n```java\r\n WebElement element = (WebElement) ((JavascriptExecutor) driver).executeScript(&quot;return $(\\&quot;:contains(&#39;&quot; + elementToSelect + &quot;&#39;):last\\&quot;).get(0);&quot;);\r\n```\r\n","title":"Can&#39;t find element through text","body":"<p>I'm writing an automated test in Java where I want to send text of an element I need clicked, to be found through that text. Here's the code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void selectElement(String elementName, String type, String input){\n\n        By elementToSelect = By.xpath(&quot;//*[text()='&quot; + elementName + &quot;']&quot;);\n\n        switch (type) {\n            case &quot;Photo&quot;, &quot;Radio&quot;, &quot;Button&quot;, &quot;Checkbox&quot; -&gt; {\n                driver.findElement(elementToSelect).click();\n            }\n            case &quot;Edit&quot; -&gt; {\n                WebElement edit = driver.findElement(elementToSelect);\n                edit.sendKeys(input + org.openqa.selenium.Keys.ENTER);\n            }\n         \n        }\n    }\n</code></pre>\n<p>I also tried with this but no such luck:</p>\n<pre class=\"lang-java prettyprint-override\"><code> WebElement element = (WebElement) ((JavascriptExecutor) driver).executeScript(&quot;return $(\\&quot;:contains('&quot; + elementToSelect + &quot;'):last\\&quot;).get(0);&quot;);\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":8781643,"reputation":25950,"user_id":6565093,"accept_rate":47,"display_name":"pvpkiran"},"score":6,"creation_date":1517908893,"post_id":48639412,"comment_id":84275202,"body_markdown":"Did you use `@EnableConfigurationProperties`","body":"Did you use <code>@EnableConfigurationProperties</code>"},{"owner":{"account_id":466701,"reputation":3379,"user_id":871611,"accept_rate":80,"display_name":"user871611"},"score":1,"creation_date":1517909316,"post_id":48639412,"comment_id":84275467,"body_markdown":"Thanks, this was missing to get it started. This is the answer.","body":"Thanks, this was missing to get it started. This is the answer."}],"answers":[{"tags":[],"owner":{"account_id":8781643,"reputation":25950,"user_id":6565093,"accept_rate":47,"display_name":"pvpkiran"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1517909388,"creation_date":1517909388,"answer_id":48639608,"question_id":48639412,"body_markdown":"You need to Enable Configuration Properties.  \r\n\r\n    @EnableConfigurationProperties","title":"Working with @ConfigurationProperties in a non Spring-Boot application","body":"<p>You need to Enable Configuration Properties.  </p>\n\n<pre><code>@EnableConfigurationProperties\n</code></pre>\n"}],"owner":{"account_id":466701,"reputation":3379,"user_id":871611,"accept_rate":80,"display_name":"user871611"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3563,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":48639608,"answer_count":1,"score":4,"last_activity_date":1660219962,"creation_date":1517908779,"question_id":48639412,"body_markdown":"I&#39;m trying to get configuration-binding in my Spring-MVC application (non Spring-Boot) enabled using the @ConfigurationProperties. The only thing i did so far, is that I added the Maven `spring-boot` dependency to my project, to get the `ConfigurationProperties` class.\r\n\r\n    @Configuration\r\n    @PropertySource(&quot;classpath:foo.properties&quot;)\r\n    @ConfigurationProperties(prefix = &quot;foo&quot;)\r\n    public class FooConfig{\r\n    \r\n      private String bar;\r\n      // ...  \r\n    }\r\n\r\nSo far nothing is being bound. Any thoughts to get the binding going?","title":"Working with @ConfigurationProperties in a non Spring-Boot application","body":"<p>I'm trying to get configuration-binding in my Spring-MVC application (non Spring-Boot) enabled using the @ConfigurationProperties. The only thing i did so far, is that I added the Maven <code>spring-boot</code> dependency to my project, to get the <code>ConfigurationProperties</code> class.</p>\n<pre><code>@Configuration\n@PropertySource(&quot;classpath:foo.properties&quot;)\n@ConfigurationProperties(prefix = &quot;foo&quot;)\npublic class FooConfig{\n\n  private String bar;\n  // ...  \n}\n</code></pre>\n<p>So far nothing is being bound. Any thoughts to get the binding going?</p>\n"},{"tags":["javascript","java","angular","postgresql"],"comments":[{"owner":{"account_id":1776479,"reputation":14458,"user_id":1620194,"accept_rate":83,"display_name":"Salketer"},"score":0,"creation_date":1660133464,"post_id":73305917,"comment_id":129459993,"body_markdown":"Just wondering: why is formData being sent as a response? Why not simply send the file in a GET? Also, without the server-side code it will be too hard to find the error IMO.","body":"Just wondering: why is formData being sent as a response? Why not simply send the file in a GET? Also, without the server-side code it will be too hard to find the error IMO."},{"owner":{"account_id":13156580,"reputation":1,"user_id":9503560,"display_name":"Hayne"},"score":0,"creation_date":1660134839,"post_id":73305917,"comment_id":129460544,"body_markdown":"@Salketer I added backend side of code. It&#39;s that way by design and unfortunately, I can&#39;t change that.","body":"@Salketer I added backend side of code. It&#39;s that way by design and unfortunately, I can&#39;t change that."}],"owner":{"account_id":13156580,"reputation":1,"user_id":9503560,"display_name":"Hayne"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660219884,"creation_date":1660132671,"question_id":73305917,"body_markdown":"I&#39;m trying to read the image send in multipart response and use it in my app. My backend service is returning two parts, first with meta-data and second with actual image&#39;s bytes.\r\nImage is held in PostgreSQL in bytea column. \r\n\r\nTo save image I&#39;m using [file-saver][1] package.\r\n\r\nExample of response look something like that:\r\n\r\n    --977f8983-13a8-4aea-b8ba-075803ad4790\r\n    Content-Disposition: form-data; name=&quot;imageData&quot;\r\n    Content-Type: application/json\r\n    \r\n    {&quot;idUser&quot;:5}\r\n    --977f8983-13a8-4aea-b8ba-075803ad4790\r\n    Content-Disposition: form-data; name=&quot;image&quot;\r\n    Content-Type: application/octet-stream\r\n    \r\n    *image&#39;s bytes*\r\n    --977f8983-13a8-4aea-b8ba-075803ad4790--\r\n\r\nHere&#39;s my code where I&#39;m trying to save image\r\n\r\n    getImage().then(response =&gt; {\r\n      if (response.status === 200) {\r\n      return response.formData()\r\n      }\r\n    })\r\n    .then(fd =&gt; {\r\n      if (fd instanceof FormData) {\r\n        const blob = new Blob([fd.get(&#39;image&#39;)],{\r\n          type:&#39;image/png&#39;\r\n        })\r\n        saveAs(blob, &#39;image.png&#39;);\r\n      }\r\n    });\r\n\r\nAs result, I get a corrupted png that is almost twice in terms of size as the original. I used the same approach in different parts of my code, and there it worked well\r\n\r\nI&#39;ve tried to save it a different way, but it resulted in a 1kb png file containing index.html of site\r\n\r\n    getImage().then(response =&gt; {\r\n      if (response.status === 200) {\r\n      return response.formData()\r\n      }\r\n    })\r\n    .then(fd =&gt; {\r\n      if (fd instanceof FormData) {\r\n        saveAs(fd.get(&#39;image&#39;), &#39;image.png&#39;);\r\n      }\r\n    });\r\n\r\nCan you see what I&#39;m doing wrong? Thanks in advance for all suggestions.\r\n\r\nEdit: Added backend code\r\n\r\nLogic\r\n\r\n    @Inject\r\n        ImageRepository repository;\r\n\r\n    public Response getUserImage(Long idUser) {\r\n        var entity = repository.findByIdActiveUser(idUser);\r\n        var image = new UsrImage();\r\n        image.setIdUser(entity.getUsrUserEntity().getId());       \r\n        var multipartEntity = new MultipartFormDataOutput();\r\n        multipartEntity.addFormData(&quot;imageData&quot;, image, MediaType.APPLICATION_JSON_TYPE);\r\n        multipartEntity.addFormData(&quot;image&quot;, entity.getImage(), MediaType.APPLICATION_OCTET_STREAM_TYPE);\r\n        return Response.ok(multipartEntity,MediaType.MULTIPART_FORM_DATA_TYPE).build();\r\n    }\r\n\r\n    @Entity\r\n    @Table(name = &quot;usr_image&quot;)\r\n    public class UsrImageEntity {\r\n    \r\n        @Id\r\n        @Basic(optional = false)\r\n        @NotNull\r\n        @Column(name = &quot;id_user&quot;, nullable = false)\r\n        private Long idUser;\r\n        @Basic(optional = false)\r\n        @NotNull\r\n        @Type(type = &quot;org.hibernate.type.BinaryType&quot;)\r\n        @Column(nullable = false)\r\n        private byte[] image;\r\n        @JoinColumn(name = &quot;id_user&quot;, referencedColumnName = &quot;id&quot;, nullable = false, insertable = false, updatable = false)\r\n        @OneToOne(optional = false)\r\n        private UsrUserEntity usrUserEntity;\r\n        enter code here\r\n        public byte[] getImage() {\r\n            return image;\r\n        }\r\n    \r\n        public void setImage(byte[] image) {\r\n            this.image = image;\r\n        }\r\n    \r\n        public UsrUserEntity getUsrUserEntity() {\r\n            return usrUserEntity;\r\n        }\r\n    \r\n        public void setUsrUserEntity(UsrUserEntity usrUserEntity) {\r\n            this.usrUserEntity = usrUserEntity;\r\n        }\r\n    }\r\n    @RequestScoped\r\n    public class UsrImageRepository implements PanacheRepositoryBase&lt;UsrImageEntity, Long&gt;{\r\n    \r\n        public UsrImageEntity findByIdActiveUser(Long idUser) {\r\n            try{\r\n                return find(&quot;select f from UsrImageEntity f INNER JOIN UsrUserEntity u ON f.usrUserEntity.id=u.id where u.status = ?1 and u.id = ?2&quot;,\r\n                        UserStatusEnum.ACTIVE.toString(),idUser).singleResult();\r\n            }catch (NoResultException ex){\r\n                Log.info(ex.getMessage());\r\n                throw new NotFoundException(&quot;There is no image for user id=&quot;+idUser);\r\n            }catch (NonUniqueResultException ex){\r\n                Log.info(ex.getMessage());\r\n                throw new InternalError(ex.getMessage());\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n\r\n\r\n  [1]: https://www.npmjs.com/package/file-saver\r\n","title":"Image from multipart form data is parsed incorrectly in GET request","body":"<p>I'm trying to read the image send in multipart response and use it in my app. My backend service is returning two parts, first with meta-data and second with actual image's bytes.\nImage is held in PostgreSQL in bytea column.</p>\n<p>To save image I'm using <a href=\"https://www.npmjs.com/package/file-saver\" rel=\"nofollow noreferrer\">file-saver</a> package.</p>\n<p>Example of response look something like that:</p>\n<pre><code>--977f8983-13a8-4aea-b8ba-075803ad4790\nContent-Disposition: form-data; name=&quot;imageData&quot;\nContent-Type: application/json\n\n{&quot;idUser&quot;:5}\n--977f8983-13a8-4aea-b8ba-075803ad4790\nContent-Disposition: form-data; name=&quot;image&quot;\nContent-Type: application/octet-stream\n\n*image's bytes*\n--977f8983-13a8-4aea-b8ba-075803ad4790--\n</code></pre>\n<p>Here's my code where I'm trying to save image</p>\n<pre><code>getImage().then(response =&gt; {\n  if (response.status === 200) {\n  return response.formData()\n  }\n})\n.then(fd =&gt; {\n  if (fd instanceof FormData) {\n    const blob = new Blob([fd.get('image')],{\n      type:'image/png'\n    })\n    saveAs(blob, 'image.png');\n  }\n});\n</code></pre>\n<p>As result, I get a corrupted png that is almost twice in terms of size as the original. I used the same approach in different parts of my code, and there it worked well</p>\n<p>I've tried to save it a different way, but it resulted in a 1kb png file containing index.html of site</p>\n<pre><code>getImage().then(response =&gt; {\n  if (response.status === 200) {\n  return response.formData()\n  }\n})\n.then(fd =&gt; {\n  if (fd instanceof FormData) {\n    saveAs(fd.get('image'), 'image.png');\n  }\n});\n</code></pre>\n<p>Can you see what I'm doing wrong? Thanks in advance for all suggestions.</p>\n<p>Edit: Added backend code</p>\n<p>Logic</p>\n<pre><code>@Inject\n    ImageRepository repository;\n\npublic Response getUserImage(Long idUser) {\n    var entity = repository.findByIdActiveUser(idUser);\n    var image = new UsrImage();\n    image.setIdUser(entity.getUsrUserEntity().getId());       \n    var multipartEntity = new MultipartFormDataOutput();\n    multipartEntity.addFormData(&quot;imageData&quot;, image, MediaType.APPLICATION_JSON_TYPE);\n    multipartEntity.addFormData(&quot;image&quot;, entity.getImage(), MediaType.APPLICATION_OCTET_STREAM_TYPE);\n    return Response.ok(multipartEntity,MediaType.MULTIPART_FORM_DATA_TYPE).build();\n}\n\n@Entity\n@Table(name = &quot;usr_image&quot;)\npublic class UsrImageEntity {\n\n    @Id\n    @Basic(optional = false)\n    @NotNull\n    @Column(name = &quot;id_user&quot;, nullable = false)\n    private Long idUser;\n    @Basic(optional = false)\n    @NotNull\n    @Type(type = &quot;org.hibernate.type.BinaryType&quot;)\n    @Column(nullable = false)\n    private byte[] image;\n    @JoinColumn(name = &quot;id_user&quot;, referencedColumnName = &quot;id&quot;, nullable = false, insertable = false, updatable = false)\n    @OneToOne(optional = false)\n    private UsrUserEntity usrUserEntity;\n    enter code here\n    public byte[] getImage() {\n        return image;\n    }\n\n    public void setImage(byte[] image) {\n        this.image = image;\n    }\n\n    public UsrUserEntity getUsrUserEntity() {\n        return usrUserEntity;\n    }\n\n    public void setUsrUserEntity(UsrUserEntity usrUserEntity) {\n        this.usrUserEntity = usrUserEntity;\n    }\n}\n@RequestScoped\npublic class UsrImageRepository implements PanacheRepositoryBase&lt;UsrImageEntity, Long&gt;{\n\n    public UsrImageEntity findByIdActiveUser(Long idUser) {\n        try{\n            return find(&quot;select f from UsrImageEntity f INNER JOIN UsrUserEntity u ON f.usrUserEntity.id=u.id where u.status = ?1 and u.id = ?2&quot;,\n                    UserStatusEnum.ACTIVE.toString(),idUser).singleResult();\n        }catch (NoResultException ex){\n            Log.info(ex.getMessage());\n            throw new NotFoundException(&quot;There is no image for user id=&quot;+idUser);\n        }catch (NonUniqueResultException ex){\n            Log.info(ex.getMessage());\n            throw new InternalError(ex.getMessage());\n        }\n    }\n    \n}\n</code></pre>\n"},{"tags":["java","sap-cloud-sdk","sap-business-technology-platform"],"comments":[{"owner":{"account_id":20747477,"reputation":166,"user_id":15235787,"display_name":"Johannes Schneider"},"score":0,"creation_date":1660053178,"post_id":73291380,"comment_id":129438249,"body_markdown":"Could you please add further context information, such as:\n* Which SAP Cloud SDK version are you using?\n* Which CAP version are you using?\n* Are you using the `com.sap.cds:cds-integration-cloud-sdk` dependency?\nTo answer all of these questions, simply attaching the output of `mvn dependency:tree` should be sufficient.","body":"Could you please add further context information, such as: * Which SAP Cloud SDK version are you using? * Which CAP version are you using? * Are you using the <code>com.sap.cds:cds-integration-cloud-sdk</code> dependency? To answer all of these questions, simply attaching the output of <code>mvn dependency:tree</code> should be sufficient."},{"owner":{"account_id":26018463,"reputation":11,"user_id":19726474,"display_name":"ETayamenDel"},"score":0,"creation_date":1660056098,"post_id":73291380,"comment_id":129439502,"body_markdown":"Hi @JohannesSchneider. I&#39;ve updated the question with the copy of this! Thanks#1","body":"Hi @JohannesSchneider. I&#39;ve updated the question with the copy of this! Thanks#1"},{"owner":{"account_id":20747477,"reputation":166,"user_id":15235787,"display_name":"Johannes Schneider"},"score":0,"creation_date":1660115947,"post_id":73291380,"comment_id":129453637,"body_markdown":"Thanks for attaching the dependency tree. So far everything looks as expected (the integration dependency is slightly outdated, but that shouldn&#39;t cause any harm). Therefore, I&#39;d like to ask whether you can decode the auth token you are getting via `AuthTokenAccessor.getCurrentToken()`. Is that really a valid user token? (i.e. not a technical token)","body":"Thanks for attaching the dependency tree. So far everything looks as expected (the integration dependency is slightly outdated, but that shouldn&#39;t cause any harm). Therefore, I&#39;d like to ask whether you can decode the auth token you are getting via <code>AuthTokenAccessor.getCurrentToken()</code>. Is that really a valid user token? (i.e. not a technical token)"},{"owner":{"account_id":26018463,"reputation":11,"user_id":19726474,"display_name":"ETayamenDel"},"score":0,"creation_date":1660141925,"post_id":73291380,"comment_id":129463564,"body_markdown":"Hi @JohannesSchneider I have got passed this error now and the solution is mentioned here: https://blogs.sap.com/2021/03/24/oauth2samlbearerassertion-flow-with-the-sap-btp-destination-service.-successfactors./comment-page-1/#comment-634599. I am able to access the Destination correctly now but now I am getting another error when I make the a request; java.lang.NoClassDefFoundError: com/google/gson/Gson. I have tried to add it as a dependency but no luck.","body":"Hi @JohannesSchneider I have got passed this error now and the solution is mentioned here: <a href=\"https://blogs.sap.com/2021/03/24/oauth2samlbearerassertion-flow-with-the-sap-btp-destination-service.-successfactors./comment-page-1/#comment-634599\" rel=\"nofollow noreferrer\">blogs.sap.com/2021/03/24/&hellip;</a>. I am able to access the Destination correctly now but now I am getting another error when I make the a request; java.lang.NoClassDefFoundError: com/google/gson/Gson. I have tried to add it as a dependency but no luck."},{"owner":{"account_id":20747477,"reputation":166,"user_id":15235787,"display_name":"Johannes Schneider"},"score":0,"creation_date":1660200545,"post_id":73291380,"comment_id":129477721,"body_markdown":"Great to hear that you already found an answer! Would you mind posting a brief summary of the solution as an answer here on SO (with the link from where you got the answer from initially) so that others can also solve this problem in the future? Regarding the ClassNotFoundException: I think it would be best practice to open up a new question to get help (after searching the internet for a similar issue of course). If you feel like the SAP Cloud SDK is involved, don&#39;t hesitate to reach out to us again: [Get Support](https://sap.github.io/cloud-sdk/docs/overview/get-support)","body":"Great to hear that you already found an answer! Would you mind posting a brief summary of the solution as an answer here on SO (with the link from where you got the answer from initially) so that others can also solve this problem in the future? Regarding the ClassNotFoundException: I think it would be best practice to open up a new question to get help (after searching the internet for a similar issue of course). If you feel like the SAP Cloud SDK is involved, don&#39;t hesitate to reach out to us again: <a href=\"https://sap.github.io/cloud-sdk/docs/overview/get-support\" rel=\"nofollow noreferrer\">Get Support</a>"}],"answers":[{"tags":[],"owner":{"account_id":26018463,"reputation":11,"user_id":19726474,"display_name":"ETayamenDel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660219770,"creation_date":1660219770,"answer_id":73320411,"question_id":73291380,"body_markdown":"**UPDATE**: I found out that the issue was that we did not have /IWFND/SG_MED_CATALOG_0002 in our destinations scope list - which had some roles in it.","title":"SAP Cloud SDK - Accessing Auth Token Destination Error: Failed to read authentication token","body":"<p><strong>UPDATE</strong>: I found out that the issue was that we did not have /IWFND/SG_MED_CATALOG_0002 in our destinations scope list - which had some roles in it.</p>\n"}],"owner":{"account_id":26018463,"reputation":11,"user_id":19726474,"display_name":"ETayamenDel"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":664,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660219770,"creation_date":1660046161,"question_id":73291380,"body_markdown":"Currently using CAP and SAP Cloud SDK to retrieve a destination of OAuth2SAMLBearerAssertion type.\r\nWe have done the relevant setup in BTP and S4HC found here: https://blogs.sap.com/2021/05/10/oauth2samlbearerassertion-flow-with-the-sap-btp-destination-service.-s-4hana-cloud./\r\n\r\nWe are currently using the following destination config:\r\n[Destination Config][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9ciHS.png\r\n\r\nIn our CAP application, we are trying to access the destination using:\r\n\r\n    DestinationAccessor.getDestination(Constants.DEFAULT_S4_HANA_CLOUD);\r\n\r\nHowever when we get the following error:\r\n\r\n    Failed to read authentication token. The destination service responded with an error: Retrieval of OAuthToken failed due to: Cannot determine user to propagate for OAuth2SAMLBearerAssertion destination. Either provide user_token JWT token (https://docs.cloudfoundry.org/api/uaa/version/4.7.1/index.html#user-token-grant) when retrieving the destination or configure it with SystemUser.\r\n\r\nHow can this be possible if I am able to get the token via the following?\r\n\r\n    AuthToken currentToken = AuthTokenAccessor.getCurrentToken();\r\n    AuthToken xsuaaServiceToken = AuthTokenAccessor.getXsuaaServiceToken();\r\n\r\nI have also tried to authenticate with the token passed i.e.\r\n\r\n    AuthTokenAccessor.executeWithAuthToken(currentToken,  () -&gt; DestinationAccessor.getDestination(Constants.DEFAULT_S4_HANA_CLOUD));\r\n\r\nAre we missing a crucial step in the process? Has anyone encountered this issue before?\r\n\r\nHow are we able to correctly pass the AuthToken to the destination?\r\n\r\nHere is a snippet of my dependencies as requested:https://pastebin.com/iweEDfyN\r\n\r\nThanks in Advance!\r\n\r\n","title":"SAP Cloud SDK - Accessing Auth Token Destination Error: Failed to read authentication token","body":"<p>Currently using CAP and SAP Cloud SDK to retrieve a destination of OAuth2SAMLBearerAssertion type.\nWe have done the relevant setup in BTP and S4HC found here: <a href=\"https://blogs.sap.com/2021/05/10/oauth2samlbearerassertion-flow-with-the-sap-btp-destination-service.-s-4hana-cloud./\" rel=\"nofollow noreferrer\">https://blogs.sap.com/2021/05/10/oauth2samlbearerassertion-flow-with-the-sap-btp-destination-service.-s-4hana-cloud./</a></p>\n<p>We are currently using the following destination config:\n<a href=\"https://i.stack.imgur.com/9ciHS.png\" rel=\"nofollow noreferrer\">Destination Config</a></p>\n<p>In our CAP application, we are trying to access the destination using:</p>\n<pre><code>DestinationAccessor.getDestination(Constants.DEFAULT_S4_HANA_CLOUD);\n</code></pre>\n<p>However when we get the following error:</p>\n<pre><code>Failed to read authentication token. The destination service responded with an error: Retrieval of OAuthToken failed due to: Cannot determine user to propagate for OAuth2SAMLBearerAssertion destination. Either provide user_token JWT token (https://docs.cloudfoundry.org/api/uaa/version/4.7.1/index.html#user-token-grant) when retrieving the destination or configure it with SystemUser.\n</code></pre>\n<p>How can this be possible if I am able to get the token via the following?</p>\n<pre><code>AuthToken currentToken = AuthTokenAccessor.getCurrentToken();\nAuthToken xsuaaServiceToken = AuthTokenAccessor.getXsuaaServiceToken();\n</code></pre>\n<p>I have also tried to authenticate with the token passed i.e.</p>\n<pre><code>AuthTokenAccessor.executeWithAuthToken(currentToken,  () -&gt; DestinationAccessor.getDestination(Constants.DEFAULT_S4_HANA_CLOUD));\n</code></pre>\n<p>Are we missing a crucial step in the process? Has anyone encountered this issue before?</p>\n<p>How are we able to correctly pass the AuthToken to the destination?</p>\n<p>Here is a snippet of my dependencies as requested:<a href=\"https://pastebin.com/iweEDfyN\" rel=\"nofollow noreferrer\">https://pastebin.com/iweEDfyN</a></p>\n<p>Thanks in Advance!</p>\n"},{"tags":["java","maven","jenkins","build","artifactory"],"comments":[{"owner":{"account_id":294314,"reputation":4599,"user_id":598141,"accept_rate":44,"display_name":"Ian W"},"score":0,"creation_date":1659838720,"post_id":73263348,"comment_id":129389093,"body_markdown":"[How do I deploy large files to Artifactory?](https://jfrog.com/knowledge-base/how-do-i-deploy-large-files-to-artifactory/). [When Using Artifactory’s REST API, Is There a Size Limit on File Uploads?](https://jfrog.com/knowledge-base/when-using-artifactorys-rest-api-is-there-a-size-limit-on-file-uploads/)","body":"<a href=\"https://jfrog.com/knowledge-base/how-do-i-deploy-large-files-to-artifactory/\" rel=\"nofollow noreferrer\">How do I deploy large files to Artifactory?</a>. <a href=\"https://jfrog.com/knowledge-base/when-using-artifactorys-rest-api-is-there-a-size-limit-on-file-uploads/\" rel=\"nofollow noreferrer\">When Using Artifactory’s REST API, Is There a Size Limit on File Uploads?</a>"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1659861733,"post_id":73263348,"comment_id":129391664,"body_markdown":"It would be helpfull to see the full logging output as well as the full pom file which is used and how you are calling Maven ...without that it&#39;s imposibble to say samething about the reasons...","body":"It would be helpfull to see the full logging output as well as the full pom file which is used and how you are calling Maven ...without that it&#39;s imposibble to say samething about the reasons..."}],"answers":[{"tags":[],"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659901181,"creation_date":1659834742,"answer_id":73264274,"question_id":73263348,"body_markdown":"Two suggestions:\r\n\r\n1. version `2.8.2` of `maven-deploy-plugin` was released in 2014 - 8 years ago, it is definitely worth to try update it (and `maven` as well)\r\n2. deploying `SNAPSHOT` versions does not make sense: there is no reliable way to work with `SNAPSHOT` dependencies, it is like playing improved russian roulette with five rounds in a revolver - there are only two states of such artifact cached locally: it either stale or you have no idea what has been changed.\r\n\r\n\r\n----------\r\n\r\nSpecial note for guys who like to flirt with snapshot versions.\r\n\r\nSnapshot concept have nothing in common with SDLC, that is just a poor attempt to place something unusable into another [DML](https://en.wikipedia.org/wiki/Definitive_Media_Library) or partition.\r\n\r\nIf your need to build some kind of feature-preview/nightly releases maven does allow to do that without affecting entire SDLC:\r\n\r\n``` shell\r\nmvn -e --batch-mode -Prelease release:clean release:prepare \\\r\n -Darguments=&#39;-DaltReleaseDeploymentRepository=... -DaltSnapshotDeploymentRepository=...&#39; \\\r\n# version convention for fp release\r\n -DreleaseVersion=1.0.0-${sha} \\\r\n# continue staying on snapshot version\r\n -DdevelopmentVersion=1.0.0-SNAPSHOT \\\r\n -DpushChanges=false \\\r\n -DpreparationGoals=&quot;clean deploy&quot;\r\n``` \r\n\r\nPeople who run `mvn deploy` against `SNAPSHOT` version just do not understand what they are really doing and what are the consequences. That should be at least `mvn deploy -Dmaven.install.skip=true`","title":"Maven upload 64MB jar does not finish","body":"<p>Two suggestions:</p>\n<ol>\n<li>version <code>2.8.2</code> of <code>maven-deploy-plugin</code> was released in 2014 - 8 years ago, it is definitely worth to try update it (and <code>maven</code> as well)</li>\n<li>deploying <code>SNAPSHOT</code> versions does not make sense: there is no reliable way to work with <code>SNAPSHOT</code> dependencies, it is like playing improved russian roulette with five rounds in a revolver - there are only two states of such artifact cached locally: it either stale or you have no idea what has been changed.</li>\n</ol>\n<hr />\n<p>Special note for guys who like to flirt with snapshot versions.</p>\n<p>Snapshot concept have nothing in common with SDLC, that is just a poor attempt to place something unusable into another <a href=\"https://en.wikipedia.org/wiki/Definitive_Media_Library\" rel=\"nofollow noreferrer\">DML</a> or partition.</p>\n<p>If your need to build some kind of feature-preview/nightly releases maven does allow to do that without affecting entire SDLC:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>mvn -e --batch-mode -Prelease release:clean release:prepare \\\n -Darguments='-DaltReleaseDeploymentRepository=... -DaltSnapshotDeploymentRepository=...' \\\n# version convention for fp release\n -DreleaseVersion=1.0.0-${sha} \\\n# continue staying on snapshot version\n -DdevelopmentVersion=1.0.0-SNAPSHOT \\\n -DpushChanges=false \\\n -DpreparationGoals=&quot;clean deploy&quot;\n</code></pre>\n<p>People who run <code>mvn deploy</code> against <code>SNAPSHOT</code> version just do not understand what they are really doing and what are the consequences. That should be at least <code>mvn deploy -Dmaven.install.skip=true</code></p>\n"},{"tags":[],"owner":{"account_id":2852205,"reputation":891,"user_id":2449161,"accept_rate":80,"display_name":"2dor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660219578,"creation_date":1660219578,"answer_id":73320374,"question_id":73263348,"body_markdown":"The problem was that I had double &lt;distributionManagement&gt; that defined the repositories, both in parent pom and in the application module pom. \r\nI don&#39;t know exactly why this caused Maven to block the upload of the jar to Artifactory but I am certain that this was the problem. \r\n\r\nFrom my point of view, 2.8.2 is ok being the latest full release and there can be business reasons why we want to upload to Artifactory also SNAPSHOT versions. ","title":"Maven upload 64MB jar does not finish","body":"<p>The problem was that I had double  that defined the repositories, both in parent pom and in the application module pom.\nI don't know exactly why this caused Maven to block the upload of the jar to Artifactory but I am certain that this was the problem.</p>\n<p>From my point of view, 2.8.2 is ok being the latest full release and there can be business reasons why we want to upload to Artifactory also SNAPSHOT versions.</p>\n"}],"owner":{"account_id":2852205,"reputation":891,"user_id":2449161,"accept_rate":80,"display_name":"2dor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":129,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73320374,"answer_count":2,"score":0,"last_activity_date":1660219578,"creation_date":1659820958,"question_id":73263348,"body_markdown":"I have a multi-module SpringBoot application that I deploy to artifactory. Unfortunately the upload to artifactory fails because the Jenkins build checks if the file exists and it doesn&#39;t because the file does not get uploaded. \r\n\r\nSub-module gets uploaded successfully:\r\n````\r\n[INFO] Uploading to snapshots: &lt;jar path&gt;\r\n[INFO] Uploaded to snapshots: &lt;jar path&gt;  (241 kB at 759 kB/s)\r\n\r\n````\r\n\r\nMain app module logs : \r\n\r\n````\r\n Uploading to snapshots: &lt;jar&gt;\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.8.2:deploy (default-deploy) on project &lt;project&gt;: Failed to deploy artifacts: Could not find artifact &lt;application module jar&gt; in snapshots (&lt;artifactory path&gt;) -&gt; [Help 1]\r\n````\r\n\r\nAs you can see above, for sub-modules I get also &quot;Uploaded&quot; message. For the main app module i get only &quot;uploading&quot;, not &quot;uploaded&quot;. Main difference that I can see is the size. SpringBoot app jar is 60MB and the sub-modules are KB. I think the build triggers the upload but then directly checks if it was uploaded but maybe the upload did not finish...\r\nWhat can I do to fix this and get a successfull build? ","title":"Maven upload 64MB jar does not finish","body":"<p>I have a multi-module SpringBoot application that I deploy to artifactory. Unfortunately the upload to artifactory fails because the Jenkins build checks if the file exists and it doesn't because the file does not get uploaded.</p>\n<p>Sub-module gets uploaded successfully:</p>\n<pre><code>[INFO] Uploading to snapshots: &lt;jar path&gt;\n[INFO] Uploaded to snapshots: &lt;jar path&gt;  (241 kB at 759 kB/s)\n\n</code></pre>\n<p>Main app module logs :</p>\n<pre><code> Uploading to snapshots: &lt;jar&gt;\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.8.2:deploy (default-deploy) on project &lt;project&gt;: Failed to deploy artifacts: Could not find artifact &lt;application module jar&gt; in snapshots (&lt;artifactory path&gt;) -&gt; [Help 1]\n</code></pre>\n<p>As you can see above, for sub-modules I get also &quot;Uploaded&quot; message. For the main app module i get only &quot;uploading&quot;, not &quot;uploaded&quot;. Main difference that I can see is the size. SpringBoot app jar is 60MB and the sub-modules are KB. I think the build triggers the upload but then directly checks if it was uploaded but maybe the upload did not finish...\nWhat can I do to fix this and get a successfull build?</p>\n"},{"tags":["java","junit"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1660219668,"post_id":73159806,"comment_id":129484226,"body_markdown":"Looks like youare mixing JUnit4 and Junit5.Make sure that you aren&#39;t mixing those in 1 test... I.e. accidentily using the `@Test` from JUnit4 will disable the JUnit5 annotations.","body":"Looks like youare mixing JUnit4 and Junit5.Make sure that you aren&#39;t mixing those in 1 test... I.e. accidentily using the <code>@Test</code> from JUnit4 will disable the JUnit5 annotations."},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1660230342,"post_id":73159806,"comment_id":129488572,"body_markdown":"If this wasn&#39;t caused by mixing JUnit versions, please [edit] the question and add a testcase as a [mcve].","body":"If this wasn&#39;t caused by mixing JUnit versions, please <a href=\"https://stackoverflow.com/posts/73159806/edit\">edit</a> the question and add a testcase as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"answers":[{"tags":[],"owner":{"account_id":26037703,"reputation":305,"user_id":19742955,"display_name":"Jai Prakash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660219432,"creation_date":1660218693,"answer_id":73320188,"question_id":73159806,"body_markdown":"According to below dependency: \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;junit&lt;/groupId&gt;\r\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n         &lt;version&gt;4.13.2&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n```@Disabled``` replace with ```@Ignore``` and ```@TestMethodOrder``` replace with ```@FixMethodOrder```\r\n\r\nthen its working.\r\n\r\n    import org.junit.FixMethodOrder;\r\n    import org.junit.Ignore;\r\n    import org.junit.runners.MethodSorters;\r\n\r\n    @FixMethodOrder(MethodSorters.NAME_ASCENDING)\r\n    public class Check {\r\n\t\r\n\t    @Ignore\r\n\t    public void test() {\r\n\t\t    //TODO \r\n\t    }\r\n    }","title":"@Disabled and @TestMethodOrder not working","body":"<p>According to below dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;junit&lt;/groupId&gt;\n    &lt;artifactId&gt;junit&lt;/artifactId&gt;\n     &lt;version&gt;4.13.2&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><code>@Disabled</code> replace with <code>@Ignore</code> and <code>@TestMethodOrder</code> replace with <code>@FixMethodOrder</code></p>\n<p>then its working.</p>\n<pre><code>import org.junit.FixMethodOrder;\nimport org.junit.Ignore;\nimport org.junit.runners.MethodSorters;\n\n@FixMethodOrder(MethodSorters.NAME_ASCENDING)\npublic class Check {\n\n    @Ignore\n    public void test() {\n        //TODO \n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10286890,"reputation":3,"user_id":7589869,"display_name":"Alex "},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":410,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73320188,"answer_count":1,"score":0,"last_activity_date":1660219432,"creation_date":1659046994,"question_id":73159806,"body_markdown":"First I couldn&#39;t get @TestMethodOrder to work, starting working on something else and noticed that @Disabled doesn&#39;t work either. I assume it has something to do with my dependencies/surefire plugin. I looked at similar posts but no luck\r\n\r\nHere is part of my pom\r\n```\r\n &lt;dependencies&gt;\r\n        &lt;!-- Test dependencies --&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/junit/junit --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;version&gt;4.13.2&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.assertj/assertj-core --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.assertj&lt;/groupId&gt;\r\n            &lt;artifactId&gt;assertj-core&lt;/artifactId&gt;\r\n            &lt;version&gt;3.23.1&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter-api --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n            &lt;version&gt;5.9.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-surefire-plugin--&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.9.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;16&lt;/source&gt;\r\n                    &lt;target&gt;16&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0-M5&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n```","title":"@Disabled and @TestMethodOrder not working","body":"<p>First I couldn't get @TestMethodOrder to work, starting working on something else and noticed that @Disabled doesn't work either. I assume it has something to do with my dependencies/surefire plugin. I looked at similar posts but no luck</p>\n<p>Here is part of my pom</p>\n<pre><code> &lt;dependencies&gt;\n        &lt;!-- Test dependencies --&gt;\n        &lt;!-- https://mvnrepository.com/artifact/junit/junit --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.13.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.assertj/assertj-core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.assertj&lt;/groupId&gt;\n            &lt;artifactId&gt;assertj-core&lt;/artifactId&gt;\n            &lt;version&gt;3.23.1&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;version&gt;5.9.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-surefire-plugin--&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.9.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;16&lt;/source&gt;\n                    &lt;target&gt;16&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.0.0-M5&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n</code></pre>\n"},{"tags":["java","apache-poi"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1660218862,"creation_date":1660218862,"answer_id":73320223,"question_id":73319947,"body_markdown":"Have you tried this:\r\n\r\n    TextRun run = textBox.appendText(text, false);\r\n    run.setBold(true);\r\n    run.setItalic(true);\r\n    run.setUnderlined(true);\r\n    run.setStrikethrough(true);","title":"Is there any way to make text both bold as well as italic in ppt using apache poi?","body":"<p>Have you tried this:</p>\n<pre><code>TextRun run = textBox.appendText(text, false);\nrun.setBold(true);\nrun.setItalic(true);\nrun.setUnderlined(true);\nrun.setStrikethrough(true);\n</code></pre>\n"}],"owner":{"account_id":25957216,"reputation":45,"user_id":19674403,"display_name":"Code Machine"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73320223,"answer_count":1,"score":0,"last_activity_date":1660219144,"creation_date":1660217525,"question_id":73319947,"body_markdown":"In apache poi there are methods to make text bold or italic or underline, like I did as below,\r\n\r\n    textBox.appendText(text, false).setBold(true);\r\n    textBox.appendText(text, false).setItalic(true);\r\n    textBox.appendText(text, false).setUnderlined(true);\r\n    textBox.appendText(text, false).setStrikethrough(true);\r\n\r\nBut I&#39;m not able to do all the things on the same text like bold and italic and underline:\r\n \r\n&quot;***Example***&quot;\r\n\r\nSo, how to do that?","title":"Is there any way to make text both bold as well as italic in ppt using apache poi?","body":"<p>In apache poi there are methods to make text bold or italic or underline, like I did as below,</p>\n<pre><code>textBox.appendText(text, false).setBold(true);\ntextBox.appendText(text, false).setItalic(true);\ntextBox.appendText(text, false).setUnderlined(true);\ntextBox.appendText(text, false).setStrikethrough(true);\n</code></pre>\n<p>But I'm not able to do all the things on the same text like bold and italic and underline:</p>\n<p>&quot;<em><strong>Example</strong></em>&quot;</p>\n<p>So, how to do that?</p>\n"},{"tags":["java","scala","tostring","gatling"],"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":2,"creation_date":1660219239,"post_id":73320216,"comment_id":129484062,"body_markdown":"What do you *want* to get as result when one of value is null? (I am not Scala dev so don&#39;t know how `session(&quot;teacherRefId&quot;).as[String]` handles nulls). If you simply want to replace it with `null` *String* you could wrap your session values with `String.valueOf(..)` like `String.valueOf(session.getString(&quot;userRefId&quot;))` which in case of `null` will produce `&quot;null&quot;` String.","body":"What do you <i>want</i> to get as result when one of value is null? (I am not Scala dev so don&#39;t know how <code>session(&quot;teacherRefId&quot;).as[String]</code> handles nulls). If you simply want to replace it with <code>null</code> <i>String</i> you could wrap your session values with <code>String.valueOf(..)</code> like <code>String.valueOf(session.getString(&quot;userRefId&quot;))</code> which in case of <code>null</code> will produce <code>&quot;null&quot;</code> String."}],"owner":{"account_id":21237877,"reputation":79,"user_id":15621824,"display_name":"Alexb1999"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3631,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1660218833,"creation_date":1660218833,"question_id":73320216,"body_markdown":"I am building a body for a request which is a string (in JSON format). The final character of &quot;$studentRefIdList&quot; should be ignored since it is an unwanted &quot;,&quot;. \r\nThe following code produces the desired string:\r\n\r\n```\r\n\r\nString[] studentsArr = studentsList.split(&quot;,&quot;);\r\n\r\n        StringBuilder builder = new StringBuilder();\r\n\r\n        for(String i: studentsArr){\r\n            builder.append(&quot;{\\&quot;studentPersonalRefId\\&quot;:\\&quot;&quot; + i + &quot;\\&quot;},&quot;);\r\n        }\r\n\r\nString body = parsedString.replace(&quot;\\&quot;$studentRefIdList\\&quot;&quot;, builder.substring(0, builder.toString().length() - 1))\r\n                .replace(&quot;$title&quot;, title)\r\n                .replace(&quot;$teacherRefId&quot;, session.getString(&quot;userRefId&quot;))\r\n                .replace(&quot;$sectionId&quot;, session.getString(&quot;sectionRefId&quot;))\r\n                .replace(&quot;$sif_RefObject&quot;, session.getString(&quot;assignmentType&quot;))\r\n                .replace(&quot;$availableDate&quot;, availableDate)\r\n                .replace(&quot;$dueDate&quot;, dueDate);\r\n\r\n  return body;\r\n```\r\n\r\nHowever, when I make a request to the associated endpoint  I get this error:\r\n**&quot;Cannot invoke &quot;java.lang.CharSequence.toString()&quot; because &quot;replacement&quot; is null&quot;**\r\n\r\nI understand that this is a Java error relating to toString() but I couldn&#39;t find a similar question. \r\n\r\nFor context, this is the original scala version of this code :\r\n```\r\n    val body = parsedString.replace(&quot;\\&quot;$studentRefIdList\\&quot;&quot;, builder.toString().dropRight(1))\r\n      .replace(&quot;$title&quot;, title)\r\n      .replace(&quot;$teacherRefId&quot;, session(&quot;teacherRefId&quot;).as[String])\r\n      .replace(&quot;$sectionId&quot;, session(&quot;sectionRefId&quot;).as[String])\r\n      .replace(&quot;$sif_RefObject&quot;, session(&quot;assignmentType&quot;).as[String])\r\n      .replace(&quot;$availableDate&quot;, availableDate)\r\n      .replace(&quot;$dueDate&quot;, dueDate)\r\n    body\r\n```\r\n\r\nThanks","title":"&quot;Cannot invoke &quot;java.lang.CharSequence.toString()&quot; because &quot;replacement&quot; is null&quot;","body":"<p>I am building a body for a request which is a string (in JSON format). The final character of &quot;$studentRefIdList&quot; should be ignored since it is an unwanted &quot;,&quot;.\nThe following code produces the desired string:</p>\n<pre><code>\nString[] studentsArr = studentsList.split(&quot;,&quot;);\n\n        StringBuilder builder = new StringBuilder();\n\n        for(String i: studentsArr){\n            builder.append(&quot;{\\&quot;studentPersonalRefId\\&quot;:\\&quot;&quot; + i + &quot;\\&quot;},&quot;);\n        }\n\nString body = parsedString.replace(&quot;\\&quot;$studentRefIdList\\&quot;&quot;, builder.substring(0, builder.toString().length() - 1))\n                .replace(&quot;$title&quot;, title)\n                .replace(&quot;$teacherRefId&quot;, session.getString(&quot;userRefId&quot;))\n                .replace(&quot;$sectionId&quot;, session.getString(&quot;sectionRefId&quot;))\n                .replace(&quot;$sif_RefObject&quot;, session.getString(&quot;assignmentType&quot;))\n                .replace(&quot;$availableDate&quot;, availableDate)\n                .replace(&quot;$dueDate&quot;, dueDate);\n\n  return body;\n</code></pre>\n<p>However, when I make a request to the associated endpoint  I get this error:\n<strong>&quot;Cannot invoke &quot;java.lang.CharSequence.toString()&quot; because &quot;replacement&quot; is null&quot;</strong></p>\n<p>I understand that this is a Java error relating to toString() but I couldn't find a similar question.</p>\n<p>For context, this is the original scala version of this code :</p>\n<pre><code>    val body = parsedString.replace(&quot;\\&quot;$studentRefIdList\\&quot;&quot;, builder.toString().dropRight(1))\n      .replace(&quot;$title&quot;, title)\n      .replace(&quot;$teacherRefId&quot;, session(&quot;teacherRefId&quot;).as[String])\n      .replace(&quot;$sectionId&quot;, session(&quot;sectionRefId&quot;).as[String])\n      .replace(&quot;$sif_RefObject&quot;, session(&quot;assignmentType&quot;).as[String])\n      .replace(&quot;$availableDate&quot;, availableDate)\n      .replace(&quot;$dueDate&quot;, dueDate)\n    body\n</code></pre>\n<p>Thanks</p>\n"},{"tags":["java","android-studio","onclicklistener","polyline","google-maps-android-api-3"],"answers":[{"tags":[],"owner":{"account_id":25242117,"reputation":136,"user_id":19075858,"display_name":"Mike Schvedov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660218440,"creation_date":1660218440,"answer_id":73320142,"question_id":73315724,"body_markdown":"Just replace the random variables to contain your own values,&lt;br&gt;\r\nchange these:\r\n\r\n    double randomValuex = 36.046851 + ((36.203712 - 36.046851) * r.nextDouble());\r\n    double randomValuex2 = 36.046851 + ((36.203712 - 36.046851) * r.nextDouble());\r\n\r\nTo this:\r\n       \r\n       const val MY_X_LOCATION = 36.0 (or whatever you want)\r\n       const val MY_Y_LOCATION = 36.1 (or whatever you want)\r\n       const val MY_X2_LOCATION = 36.2 (or whatever you want)\r\n       const val MY_Y2_LOCATION = 36.3 (or whatever you want)\r\n    \r\n       double myValueX = MY_X_LOCATION\r\n       double myValueX2 = My_X2_LOCATION\r\n       double myValueY = MY_Y_LOCATION\r\n       double myValueY2 = My_Y2_LOCATION\r\n\r\nAnd then pass them here:\r\n\r\n    from = new LatLng(myValueX, myValueY);\r\n    to = new LatLng(myValueX2, myValueY2);\r\n\r\n**(You can store the constants in your class or some other place.&lt;br&gt;\r\nYou can also pass them as parameters of a method, and put&lt;br&gt;\r\nthis onClickListener inside the method)**","title":"How to change Random location onClickListener android google maps api","body":"<p>Just replace the random variables to contain your own values,<br>\nchange these:</p>\n<pre><code>double randomValuex = 36.046851 + ((36.203712 - 36.046851) * r.nextDouble());\ndouble randomValuex2 = 36.046851 + ((36.203712 - 36.046851) * r.nextDouble());\n</code></pre>\n<p>To this:</p>\n<pre><code>   const val MY_X_LOCATION = 36.0 (or whatever you want)\n   const val MY_Y_LOCATION = 36.1 (or whatever you want)\n   const val MY_X2_LOCATION = 36.2 (or whatever you want)\n   const val MY_Y2_LOCATION = 36.3 (or whatever you want)\n\n   double myValueX = MY_X_LOCATION\n   double myValueX2 = My_X2_LOCATION\n   double myValueY = MY_Y_LOCATION\n   double myValueY2 = My_Y2_LOCATION\n</code></pre>\n<p>And then pass them here:</p>\n<pre><code>from = new LatLng(myValueX, myValueY);\nto = new LatLng(myValueX2, myValueY2);\n</code></pre>\n<p><strong>(You can store the constants in your class or some other place.<br>\nYou can also pass them as parameters of a method, and put<br>\nthis onClickListener inside the method)</strong></p>\n"}],"owner":{"account_id":26034828,"reputation":3,"user_id":19740421,"display_name":"josh21"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73320142,"answer_count":1,"score":0,"last_activity_date":1660218440,"creation_date":1660196272,"question_id":73315724,"body_markdown":"hey i&#39;m new with this and I&#39;m trying to implement a button to generate a location polyline. i got the code from here https://github.com/Moneemsaadaoui/Gradientpoly. and the code to generate a polyline like this.\r\n\r\n     generate.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                double randomValuex = 36.046851 + ((36.203712 - 36.046851) * r.nextDouble());\r\n                double randomValuex2 = 36.046851 + ((36.203712 - 36.046851) * r.nextDouble());\r\n                double randomValuey = 8.269289 + ((10.486982 - 8.269289) * r.nextDouble());\r\n                double randomValuey2 = 8.269289 + ((10.486982 - 8.269289) * r.nextDouble());\r\n                from = new LatLng(randomValuex, randomValuey);\r\n                to = new LatLng(randomValuex2, randomValuey2);\r\n\r\n                //Setting up our awesome gradient &#127752;&#127752;\r\n\r\n                gradientPoly.setApiKey(&quot;API_KEY&quot;)\r\n                        .setStartPoint(from).setEndPoint(to)\r\n                        .setStartColor(Color.parseColor(&quot;#1eb5ab&quot;))\r\n                        .setWidth(11).setEndColor(Color.parseColor(&quot;#ff0098&quot;))\r\n                        .DrawPolyline();\r\n            }\r\n        });\r\n\r\nmy question is **how to change Random Generate location** To **some location that I have specified** (fixed location)? sorry for my bad english.","title":"How to change Random location onClickListener android google maps api","body":"<p>hey i'm new with this and I'm trying to implement a button to generate a location polyline. i got the code from here <a href=\"https://github.com/Moneemsaadaoui/Gradientpoly\" rel=\"nofollow noreferrer\">https://github.com/Moneemsaadaoui/Gradientpoly</a>. and the code to generate a polyline like this.</p>\n<pre><code> generate.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            double randomValuex = 36.046851 + ((36.203712 - 36.046851) * r.nextDouble());\n            double randomValuex2 = 36.046851 + ((36.203712 - 36.046851) * r.nextDouble());\n            double randomValuey = 8.269289 + ((10.486982 - 8.269289) * r.nextDouble());\n            double randomValuey2 = 8.269289 + ((10.486982 - 8.269289) * r.nextDouble());\n            from = new LatLng(randomValuex, randomValuey);\n            to = new LatLng(randomValuex2, randomValuey2);\n\n            //Setting up our awesome gradient 🌈🌈\n\n            gradientPoly.setApiKey(&quot;API_KEY&quot;)\n                    .setStartPoint(from).setEndPoint(to)\n                    .setStartColor(Color.parseColor(&quot;#1eb5ab&quot;))\n                    .setWidth(11).setEndColor(Color.parseColor(&quot;#ff0098&quot;))\n                    .DrawPolyline();\n        }\n    });\n</code></pre>\n<p>my question is <strong>how to change Random Generate location</strong> To <strong>some location that I have specified</strong> (fixed location)? sorry for my bad english.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8875,"page":1117,"page_size":100}
